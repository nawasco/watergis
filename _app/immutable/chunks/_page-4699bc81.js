var yx=Object.defineProperty;var _x=(i,e,t)=>e in i?yx(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t;var pl=(i,e,t)=>(_x(i,typeof e!="symbol"?e+"":e,t),t);import{I as qn,J as Kf,K as c4,L as vx,S as xr,i as Ar,s as br,C as fr,M as qi,k as ti,l as ii,m as si,h as Oe,N as or,b as Dt,O as ir,D as dr,E as pr,F as mr,P as wr,Q as ro,f as yt,t as At,R as Io,T as Zn,U as mo,o as Ss,V as uo,W as dg,X as wn,v as wl,w as Hi,e as gn,x as $i,y as Gi,Y as po,d as Mr,z as Wi,Z as ds,_ as $o,$ as Lc,g as Dr,a0 as $p,a1 as e1,a2 as Xy,B as is,a3 as bx,a as Xi,c as Yi,n as oi,H as Wo,a4 as bl,q as Cn,r as En,a5 as ic,G as Kt,a6 as ec,a7 as Ja,p as oc,a8 as V0,a9 as td,u as ks,aa as wx,ab as h4,ac as qd,ad as Ld,ae as T1,af as Vo,ag as qo,ah as pg,A as xx,ai as R0,aj as f4,ak as d4}from"./index-952dc840.js";import{r as Ax,w as Vl}from"./singletons-3cc581f4.js";import{_ as m1}from"./preload-helper-aa6bc0ce.js";import{p as kx}from"./stores-0bd4cdf3.js";var D2=function(i,e){return D2=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,o){t.__proto__=o}||function(t,o){for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&(t[l]=o[l])},D2(i,e)};function xl(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");D2(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var ts=function(){return ts=Object.assign||function(e){for(var t,o=1,l=arguments.length;o<l;o++){t=arguments[o];for(var u in t)Object.prototype.hasOwnProperty.call(t,u)&&(e[u]=t[u])}return e},ts.apply(this,arguments)};function Ph(i){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&i[e],o=0;if(t)return t.call(i);if(i&&typeof i.length=="number")return{next:function(){return i&&o>=i.length&&(i=void 0),{value:i&&i[o++],done:!i}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}/**
 * @license
 * Copyright 2016 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var Fu=function(){function i(e){e===void 0&&(e={}),this.adapter=e}return Object.defineProperty(i,"cssClasses",{get:function(){return{}},enumerable:!1,configurable:!0}),Object.defineProperty(i,"strings",{get:function(){return{}},enumerable:!1,configurable:!0}),Object.defineProperty(i,"numbers",{get:function(){return{}},enumerable:!1,configurable:!0}),Object.defineProperty(i,"defaultAdapter",{get:function(){return{}},enumerable:!1,configurable:!0}),i.prototype.init=function(){},i.prototype.destroy=function(){},i}();/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */function Sx(i){return i===void 0&&(i=window),Cx(i)?{passive:!0}:!1}function Cx(i){i===void 0&&(i=window);var e=!1;try{var t={get passive(){return e=!0,!1}},o=function(){};i.document.addEventListener("test",o,t),i.document.removeEventListener("test",o,t)}catch{e=!1}return e}const p4=Object.freeze(Object.defineProperty({__proto__:null,applyPassive:Sx},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */function Ex(i,e){if(i.closest)return i.closest(e);for(var t=i;t;){if(m4(t,e))return t;t=t.parentElement}return null}function m4(i,e){var t=i.matches||i.webkitMatchesSelector||i.msMatchesSelector;return t.call(i,e)}function Ix(i){var e=i;if(e.offsetParent!==null)return e.scrollWidth;var t=e.cloneNode(!0);t.style.setProperty("position","absolute"),t.style.setProperty("transform","translate(-9999px, -9999px)"),document.documentElement.appendChild(t);var o=t.scrollWidth;return document.documentElement.removeChild(t),o}const L1=Object.freeze(Object.defineProperty({__proto__:null,closest:Ex,matches:m4,estimateScrollWidth:Ix},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2016 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var Tx={BG_FOCUSED:"mdc-ripple-upgraded--background-focused",FG_ACTIVATION:"mdc-ripple-upgraded--foreground-activation",FG_DEACTIVATION:"mdc-ripple-upgraded--foreground-deactivation",ROOT:"mdc-ripple-upgraded",UNBOUNDED:"mdc-ripple-upgraded--unbounded"},Lx={VAR_FG_SCALE:"--mdc-ripple-fg-scale",VAR_FG_SIZE:"--mdc-ripple-fg-size",VAR_FG_TRANSLATE_END:"--mdc-ripple-fg-translate-end",VAR_FG_TRANSLATE_START:"--mdc-ripple-fg-translate-start",VAR_LEFT:"--mdc-ripple-left",VAR_TOP:"--mdc-ripple-top"},Yy={DEACTIVATION_TIMEOUT_MS:225,FG_DEACTIVATION_MS:150,INITIAL_ORIGIN_SCALE:.6,PADDING:10,TAP_DELAY_MS:300},Op;function Px(i,e){e===void 0&&(e=!1);var t=i.CSS,o=Op;if(typeof Op=="boolean"&&!e)return Op;var l=t&&typeof t.supports=="function";if(!l)return!1;var u=t.supports("--css-vars","yes"),m=t.supports("(--css-vars: yes)")&&t.supports("color","#00000000");return o=u||m,e||(Op=o),o}function Mx(i,e,t){if(!i)return{x:0,y:0};var o=e.x,l=e.y,u=o+t.left,m=l+t.top,r,h;if(i.type==="touchstart"){var y=i;r=y.changedTouches[0].pageX-u,h=y.changedTouches[0].pageY-m}else{var b=i;r=b.pageX-u,h=b.pageY-m}return{x:r,y:h}}/**
 * @license
 * Copyright 2016 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var Zy=["touchstart","pointerdown","mousedown","keydown"],Ky=["touchend","pointerup","mouseup","contextmenu"],Fp=[],Dx=function(i){xl(e,i);function e(t){var o=i.call(this,ts(ts({},e.defaultAdapter),t))||this;return o.activationAnimationHasEnded=!1,o.activationTimer=0,o.fgDeactivationRemovalTimer=0,o.fgScale="0",o.frame={width:0,height:0},o.initialSize=0,o.layoutFrame=0,o.maxRadius=0,o.unboundedCoords={left:0,top:0},o.activationState=o.defaultActivationState(),o.activationTimerCallback=function(){o.activationAnimationHasEnded=!0,o.runDeactivationUXLogicIfReady()},o.activateHandler=function(l){o.activateImpl(l)},o.deactivateHandler=function(){o.deactivateImpl()},o.focusHandler=function(){o.handleFocus()},o.blurHandler=function(){o.handleBlur()},o.resizeHandler=function(){o.layout()},o}return Object.defineProperty(e,"cssClasses",{get:function(){return Tx},enumerable:!1,configurable:!0}),Object.defineProperty(e,"strings",{get:function(){return Lx},enumerable:!1,configurable:!0}),Object.defineProperty(e,"numbers",{get:function(){return Yy},enumerable:!1,configurable:!0}),Object.defineProperty(e,"defaultAdapter",{get:function(){return{addClass:function(){},browserSupportsCssVars:function(){return!0},computeBoundingRect:function(){return{top:0,right:0,bottom:0,left:0,width:0,height:0}},containsEventTarget:function(){return!0},deregisterDocumentInteractionHandler:function(){},deregisterInteractionHandler:function(){},deregisterResizeHandler:function(){},getWindowPageOffset:function(){return{x:0,y:0}},isSurfaceActive:function(){return!0},isSurfaceDisabled:function(){return!0},isUnbounded:function(){return!0},registerDocumentInteractionHandler:function(){},registerInteractionHandler:function(){},registerResizeHandler:function(){},removeClass:function(){},updateCssVariable:function(){}}},enumerable:!1,configurable:!0}),e.prototype.init=function(){var t=this,o=this.supportsPressRipple();if(this.registerRootHandlers(o),o){var l=e.cssClasses,u=l.ROOT,m=l.UNBOUNDED;requestAnimationFrame(function(){t.adapter.addClass(u),t.adapter.isUnbounded()&&(t.adapter.addClass(m),t.layoutInternal())})}},e.prototype.destroy=function(){var t=this;if(this.supportsPressRipple()){this.activationTimer&&(clearTimeout(this.activationTimer),this.activationTimer=0,this.adapter.removeClass(e.cssClasses.FG_ACTIVATION)),this.fgDeactivationRemovalTimer&&(clearTimeout(this.fgDeactivationRemovalTimer),this.fgDeactivationRemovalTimer=0,this.adapter.removeClass(e.cssClasses.FG_DEACTIVATION));var o=e.cssClasses,l=o.ROOT,u=o.UNBOUNDED;requestAnimationFrame(function(){t.adapter.removeClass(l),t.adapter.removeClass(u),t.removeCssVars()})}this.deregisterRootHandlers(),this.deregisterDeactivationHandlers()},e.prototype.activate=function(t){this.activateImpl(t)},e.prototype.deactivate=function(){this.deactivateImpl()},e.prototype.layout=function(){var t=this;this.layoutFrame&&cancelAnimationFrame(this.layoutFrame),this.layoutFrame=requestAnimationFrame(function(){t.layoutInternal(),t.layoutFrame=0})},e.prototype.setUnbounded=function(t){var o=e.cssClasses.UNBOUNDED;t?this.adapter.addClass(o):this.adapter.removeClass(o)},e.prototype.handleFocus=function(){var t=this;requestAnimationFrame(function(){return t.adapter.addClass(e.cssClasses.BG_FOCUSED)})},e.prototype.handleBlur=function(){var t=this;requestAnimationFrame(function(){return t.adapter.removeClass(e.cssClasses.BG_FOCUSED)})},e.prototype.supportsPressRipple=function(){return this.adapter.browserSupportsCssVars()},e.prototype.defaultActivationState=function(){return{activationEvent:void 0,hasDeactivationUXRun:!1,isActivated:!1,isProgrammatic:!1,wasActivatedByPointer:!1,wasElementMadeActive:!1}},e.prototype.registerRootHandlers=function(t){var o,l;if(t){try{for(var u=Ph(Zy),m=u.next();!m.done;m=u.next()){var r=m.value;this.adapter.registerInteractionHandler(r,this.activateHandler)}}catch(h){o={error:h}}finally{try{m&&!m.done&&(l=u.return)&&l.call(u)}finally{if(o)throw o.error}}this.adapter.isUnbounded()&&this.adapter.registerResizeHandler(this.resizeHandler)}this.adapter.registerInteractionHandler("focus",this.focusHandler),this.adapter.registerInteractionHandler("blur",this.blurHandler)},e.prototype.registerDeactivationHandlers=function(t){var o,l;if(t.type==="keydown")this.adapter.registerInteractionHandler("keyup",this.deactivateHandler);else try{for(var u=Ph(Ky),m=u.next();!m.done;m=u.next()){var r=m.value;this.adapter.registerDocumentInteractionHandler(r,this.deactivateHandler)}}catch(h){o={error:h}}finally{try{m&&!m.done&&(l=u.return)&&l.call(u)}finally{if(o)throw o.error}}},e.prototype.deregisterRootHandlers=function(){var t,o;try{for(var l=Ph(Zy),u=l.next();!u.done;u=l.next()){var m=u.value;this.adapter.deregisterInteractionHandler(m,this.activateHandler)}}catch(r){t={error:r}}finally{try{u&&!u.done&&(o=l.return)&&o.call(l)}finally{if(t)throw t.error}}this.adapter.deregisterInteractionHandler("focus",this.focusHandler),this.adapter.deregisterInteractionHandler("blur",this.blurHandler),this.adapter.isUnbounded()&&this.adapter.deregisterResizeHandler(this.resizeHandler)},e.prototype.deregisterDeactivationHandlers=function(){var t,o;this.adapter.deregisterInteractionHandler("keyup",this.deactivateHandler);try{for(var l=Ph(Ky),u=l.next();!u.done;u=l.next()){var m=u.value;this.adapter.deregisterDocumentInteractionHandler(m,this.deactivateHandler)}}catch(r){t={error:r}}finally{try{u&&!u.done&&(o=l.return)&&o.call(l)}finally{if(t)throw t.error}}},e.prototype.removeCssVars=function(){var t=this,o=e.strings,l=Object.keys(o);l.forEach(function(u){u.indexOf("VAR_")===0&&t.adapter.updateCssVariable(o[u],null)})},e.prototype.activateImpl=function(t){var o=this;if(!this.adapter.isSurfaceDisabled()){var l=this.activationState;if(!l.isActivated){var u=this.previousActivationEvent,m=u&&t!==void 0&&u.type!==t.type;if(!m){l.isActivated=!0,l.isProgrammatic=t===void 0,l.activationEvent=t,l.wasActivatedByPointer=l.isProgrammatic?!1:t!==void 0&&(t.type==="mousedown"||t.type==="touchstart"||t.type==="pointerdown");var r=t!==void 0&&Fp.length>0&&Fp.some(function(h){return o.adapter.containsEventTarget(h)});if(r){this.resetActivationState();return}t!==void 0&&(Fp.push(t.target),this.registerDeactivationHandlers(t)),l.wasElementMadeActive=this.checkElementMadeActive(t),l.wasElementMadeActive&&this.animateActivation(),requestAnimationFrame(function(){Fp=[],!l.wasElementMadeActive&&t!==void 0&&(t.key===" "||t.keyCode===32)&&(l.wasElementMadeActive=o.checkElementMadeActive(t),l.wasElementMadeActive&&o.animateActivation()),l.wasElementMadeActive||(o.activationState=o.defaultActivationState())})}}}},e.prototype.checkElementMadeActive=function(t){return t!==void 0&&t.type==="keydown"?this.adapter.isSurfaceActive():!0},e.prototype.animateActivation=function(){var t=this,o=e.strings,l=o.VAR_FG_TRANSLATE_START,u=o.VAR_FG_TRANSLATE_END,m=e.cssClasses,r=m.FG_DEACTIVATION,h=m.FG_ACTIVATION,y=e.numbers.DEACTIVATION_TIMEOUT_MS;this.layoutInternal();var b="",v="";if(!this.adapter.isUnbounded()){var w=this.getFgTranslationCoordinates(),x=w.startPoint,C=w.endPoint;b=x.x+"px, "+x.y+"px",v=C.x+"px, "+C.y+"px"}this.adapter.updateCssVariable(l,b),this.adapter.updateCssVariable(u,v),clearTimeout(this.activationTimer),clearTimeout(this.fgDeactivationRemovalTimer),this.rmBoundedActivationClasses(),this.adapter.removeClass(r),this.adapter.computeBoundingRect(),this.adapter.addClass(h),this.activationTimer=setTimeout(function(){t.activationTimerCallback()},y)},e.prototype.getFgTranslationCoordinates=function(){var t=this.activationState,o=t.activationEvent,l=t.wasActivatedByPointer,u;l?u=Mx(o,this.adapter.getWindowPageOffset(),this.adapter.computeBoundingRect()):u={x:this.frame.width/2,y:this.frame.height/2},u={x:u.x-this.initialSize/2,y:u.y-this.initialSize/2};var m={x:this.frame.width/2-this.initialSize/2,y:this.frame.height/2-this.initialSize/2};return{startPoint:u,endPoint:m}},e.prototype.runDeactivationUXLogicIfReady=function(){var t=this,o=e.cssClasses.FG_DEACTIVATION,l=this.activationState,u=l.hasDeactivationUXRun,m=l.isActivated,r=u||!m;r&&this.activationAnimationHasEnded&&(this.rmBoundedActivationClasses(),this.adapter.addClass(o),this.fgDeactivationRemovalTimer=setTimeout(function(){t.adapter.removeClass(o)},Yy.FG_DEACTIVATION_MS))},e.prototype.rmBoundedActivationClasses=function(){var t=e.cssClasses.FG_ACTIVATION;this.adapter.removeClass(t),this.activationAnimationHasEnded=!1,this.adapter.computeBoundingRect()},e.prototype.resetActivationState=function(){var t=this;this.previousActivationEvent=this.activationState.activationEvent,this.activationState=this.defaultActivationState(),setTimeout(function(){return t.previousActivationEvent=void 0},e.numbers.TAP_DELAY_MS)},e.prototype.deactivateImpl=function(){var t=this,o=this.activationState;if(!!o.isActivated){var l=ts({},o);o.isProgrammatic?(requestAnimationFrame(function(){t.animateDeactivation(l)}),this.resetActivationState()):(this.deregisterDeactivationHandlers(),requestAnimationFrame(function(){t.activationState.hasDeactivationUXRun=!0,t.animateDeactivation(l),t.resetActivationState()}))}},e.prototype.animateDeactivation=function(t){var o=t.wasActivatedByPointer,l=t.wasElementMadeActive;(o||l)&&this.runDeactivationUXLogicIfReady()},e.prototype.layoutInternal=function(){var t=this;this.frame=this.adapter.computeBoundingRect();var o=Math.max(this.frame.height,this.frame.width),l=function(){var m=Math.sqrt(Math.pow(t.frame.width,2)+Math.pow(t.frame.height,2));return m+e.numbers.PADDING};this.maxRadius=this.adapter.isUnbounded()?o:l();var u=Math.floor(o*e.numbers.INITIAL_ORIGIN_SCALE);this.adapter.isUnbounded()&&u%2!==0?this.initialSize=u-1:this.initialSize=u,this.fgScale=""+this.maxRadius/this.initialSize,this.updateLayoutCssVars()},e.prototype.updateLayoutCssVars=function(){var t=e.strings,o=t.VAR_FG_SIZE,l=t.VAR_LEFT,u=t.VAR_TOP,m=t.VAR_FG_SCALE;this.adapter.updateCssVariable(o,this.initialSize+"px"),this.adapter.updateCssVariable(m,this.fgScale),this.adapter.isUnbounded()&&(this.unboundedCoords={left:Math.round(this.frame.width/2-this.initialSize/2),top:Math.round(this.frame.height/2-this.initialSize/2)},this.adapter.updateCssVariable(l,this.unboundedCoords.left+"px"),this.adapter.updateCssVariable(u,this.unboundedCoords.top+"px"))},e}(Fu);/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var Gf={FIXED_CLASS:"mdc-top-app-bar--fixed",FIXED_SCROLLED_CLASS:"mdc-top-app-bar--fixed-scrolled",SHORT_CLASS:"mdc-top-app-bar--short",SHORT_COLLAPSED_CLASS:"mdc-top-app-bar--short-collapsed",SHORT_HAS_ACTION_ITEM_CLASS:"mdc-top-app-bar--short-has-action-item"},t1={DEBOUNCE_THROTTLE_RESIZE_TIME_MS:100,MAX_TOP_APP_BAR_HEIGHT:128},Ox={ACTION_ITEM_SELECTOR:".mdc-top-app-bar__action-item",NAVIGATION_EVENT:"MDCTopAppBar:nav",NAVIGATION_ICON_SELECTOR:".mdc-top-app-bar__navigation-icon",ROOT_SELECTOR:".mdc-top-app-bar",TITLE_SELECTOR:".mdc-top-app-bar__title"};/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var mg=function(i){xl(e,i);function e(t){return i.call(this,ts(ts({},e.defaultAdapter),t))||this}return Object.defineProperty(e,"strings",{get:function(){return Ox},enumerable:!1,configurable:!0}),Object.defineProperty(e,"cssClasses",{get:function(){return Gf},enumerable:!1,configurable:!0}),Object.defineProperty(e,"numbers",{get:function(){return t1},enumerable:!1,configurable:!0}),Object.defineProperty(e,"defaultAdapter",{get:function(){return{addClass:function(){},removeClass:function(){},hasClass:function(){return!1},setStyle:function(){},getTopAppBarHeight:function(){return 0},notifyNavigationIconClicked:function(){},getViewportScrollY:function(){return 0},getTotalActionItems:function(){return 0}}},enumerable:!1,configurable:!0}),e.prototype.handleTargetScroll=function(){},e.prototype.handleWindowResize=function(){},e.prototype.handleNavigationClick=function(){this.adapter.notifyNavigationIconClicked()},e}(Fu);/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var Rp=0,g4=function(i){xl(e,i);function e(t){var o=i.call(this,t)||this;return o.wasDocked=!0,o.isDockedShowing=!0,o.currentAppBarOffsetTop=0,o.isCurrentlyBeingResized=!1,o.resizeThrottleId=Rp,o.resizeDebounceId=Rp,o.lastScrollPosition=o.adapter.getViewportScrollY(),o.topAppBarHeight=o.adapter.getTopAppBarHeight(),o}return e.prototype.destroy=function(){i.prototype.destroy.call(this),this.adapter.setStyle("top","")},e.prototype.handleTargetScroll=function(){var t=Math.max(this.adapter.getViewportScrollY(),0),o=t-this.lastScrollPosition;this.lastScrollPosition=t,this.isCurrentlyBeingResized||(this.currentAppBarOffsetTop-=o,this.currentAppBarOffsetTop>0?this.currentAppBarOffsetTop=0:Math.abs(this.currentAppBarOffsetTop)>this.topAppBarHeight&&(this.currentAppBarOffsetTop=-this.topAppBarHeight),this.moveTopAppBar())},e.prototype.handleWindowResize=function(){var t=this;this.resizeThrottleId||(this.resizeThrottleId=setTimeout(function(){t.resizeThrottleId=Rp,t.throttledResizeHandler()},t1.DEBOUNCE_THROTTLE_RESIZE_TIME_MS)),this.isCurrentlyBeingResized=!0,this.resizeDebounceId&&clearTimeout(this.resizeDebounceId),this.resizeDebounceId=setTimeout(function(){t.handleTargetScroll(),t.isCurrentlyBeingResized=!1,t.resizeDebounceId=Rp},t1.DEBOUNCE_THROTTLE_RESIZE_TIME_MS)},e.prototype.checkForUpdate=function(){var t=-this.topAppBarHeight,o=this.currentAppBarOffsetTop<0,l=this.currentAppBarOffsetTop>t,u=o&&l;if(u)this.wasDocked=!1;else if(this.wasDocked){if(this.isDockedShowing!==l)return this.isDockedShowing=l,!0}else return this.wasDocked=!0,!0;return u},e.prototype.moveTopAppBar=function(){if(this.checkForUpdate()){var t=this.currentAppBarOffsetTop;Math.abs(t)>=this.topAppBarHeight&&(t=-t1.MAX_TOP_APP_BAR_HEIGHT),this.adapter.setStyle("top",t+"px")}},e.prototype.throttledResizeHandler=function(){var t=this.adapter.getTopAppBarHeight();this.topAppBarHeight!==t&&(this.wasDocked=!1,this.currentAppBarOffsetTop-=this.topAppBarHeight-t,this.topAppBarHeight=t),this.handleTargetScroll()},e}(mg);/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var Fx=function(i){xl(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.wasScrolled=!1,t}return e.prototype.handleTargetScroll=function(){var t=this.adapter.getViewportScrollY();t<=0?this.wasScrolled&&(this.adapter.removeClass(Gf.FIXED_SCROLLED_CLASS),this.wasScrolled=!1):this.wasScrolled||(this.adapter.addClass(Gf.FIXED_SCROLLED_CLASS),this.wasScrolled=!0)},e}(g4);/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var Rx=function(i){xl(e,i);function e(t){var o=i.call(this,t)||this;return o.collapsed=!1,o.isAlwaysCollapsed=!1,o}return Object.defineProperty(e.prototype,"isCollapsed",{get:function(){return this.collapsed},enumerable:!1,configurable:!0}),e.prototype.init=function(){i.prototype.init.call(this),this.adapter.getTotalActionItems()>0&&this.adapter.addClass(Gf.SHORT_HAS_ACTION_ITEM_CLASS),this.setAlwaysCollapsed(this.adapter.hasClass(Gf.SHORT_COLLAPSED_CLASS))},e.prototype.setAlwaysCollapsed=function(t){this.isAlwaysCollapsed=!!t,this.isAlwaysCollapsed?this.collapse():this.maybeCollapseBar()},e.prototype.getAlwaysCollapsed=function(){return this.isAlwaysCollapsed},e.prototype.handleTargetScroll=function(){this.maybeCollapseBar()},e.prototype.maybeCollapseBar=function(){if(!this.isAlwaysCollapsed){var t=this.adapter.getViewportScrollY();t<=0?this.collapsed&&this.uncollapse():this.collapsed||this.collapse()}},e.prototype.uncollapse=function(){this.adapter.removeClass(Gf.SHORT_COLLAPSED_CLASS),this.collapsed=!1},e.prototype.collapse=function(){this.adapter.addClass(Gf.SHORT_COLLAPSED_CLASS),this.collapsed=!0},e}(mg);function rr(i){return Object.entries(i).filter(([e,t])=>e!==""&&t).map(([e])=>e).join(" ")}function So(i,e,t,o={bubbles:!0},l=!1){if(typeof Event<"u"&&i){const u=new CustomEvent(e,Object.assign(Object.assign({},o),{detail:t}));if(i==null||i.dispatchEvent(u),l&&e.startsWith("SMUI")){const m=new CustomEvent(e.replace(/^SMUI/g,()=>"MDC"),Object.assign(Object.assign({},o),{detail:t}));i==null||i.dispatchEvent(m),m.defaultPrevented&&u.preventDefault()}return u}}function mf(i,e){let t=Object.getOwnPropertyNames(i);const o={};for(let l=0;l<t.length;l++){const u=t[l],m=u.indexOf("$");m!==-1&&e.indexOf(u.substring(0,m+1))!==-1||e.indexOf(u)===-1&&(o[u]=i[u])}return o}const Jy=/^[a-z]+(?::(?:preventDefault|stopPropagation|passive|nonpassive|capture|once|self))+$/,Bx=/^[^$]+(?:\$(?:preventDefault|stopPropagation|passive|nonpassive|capture|once|self))+$/;function go(i){let e,t=[];i.$on=(l,u)=>{let m=l,r=()=>{};return e?r=e(m,u):t.push([m,u]),m.match(Jy)&&console&&console.warn('Event modifiers in SMUI now use "$" instead of ":", so that all events can be bound with modifiers. Please update your event binding: ',m),()=>{r()}};function o(l){Kf(i,l)}return l=>{const u=[],m={};e=(r,h)=>{let y=r,b=h,v=!1;const w=y.match(Jy),x=y.match(Bx),C=w||x;if(y.match(/^SMUI:\w+:/)){const M=y.split(":");let O="";for(let V=0;V<M.length;V++)O+=V===M.length-1?":"+M[V]:M[V].split("-").map(X=>X.slice(0,1).toUpperCase()+X.slice(1)).join("");console.warn(`The event ${y.split("$")[0]} has been renamed to ${O.split("$")[0]}.`),y=O}if(C){const M=y.split(w?":":"$");y=M[0];const O=Object.fromEntries(M.slice(1).map(V=>[V,!0]));O.passive&&(v=v||{},v.passive=!0),O.nonpassive&&(v=v||{},v.passive=!1),O.capture&&(v=v||{},v.capture=!0),O.once&&(v=v||{},v.once=!0),O.preventDefault&&(b=c4(b)),O.stopPropagation&&(b=vx(b))}const T=qn(l,y,b,v),S=()=>{T();const M=u.indexOf(S);M>-1&&u.splice(M,1)};return u.push(S),y in m||(m[y]=qn(l,y,o)),S};for(let r=0;r<t.length;r++)e(t[r][0],t[r][1]);return{destroy:()=>{for(let r=0;r<u.length;r++)u[r]();for(let r of Object.entries(m))r[1]()}}}}function fo(i,e){let t=Object.getOwnPropertyNames(i);const o={};for(let l=0;l<t.length;l++){const u=t[l];u.substring(0,e.length)===e&&(o[u.substring(e.length)]=i[u])}return o}function Eo(i,e){let t=[];if(e)for(let o=0;o<e.length;o++){const l=e[o],u=Array.isArray(l)?l[0]:l;Array.isArray(l)&&l.length>1?t.push(u(i,l[1])):t.push(u(i))}return{update(o){if((o&&o.length||0)!=t.length)throw new Error("You must not change the length of an actions array.");if(o)for(let l=0;l<o.length;l++){const u=t[l];if(u&&u.update){const m=o[l];Array.isArray(m)&&m.length>1?u.update(m[1]):u.update()}}},destroy(){for(let o=0;o<t.length;o++){const l=t[o];l&&l.destroy&&l.destroy()}}}}const{window:Qy}=dg;function zx(i){let e,t,o,l,u,m,r;const h=i[22].default,y=fr(h,i,i[21],null);let b=[{class:t=rr({[i[2]]:!0,"mdc-top-app-bar":!0,"mdc-top-app-bar--short":i[4]==="short","mdc-top-app-bar--short-collapsed":i[0],"mdc-top-app-bar--fixed":i[4]==="fixed","smui-top-app-bar--static":i[4]==="static","smui-top-app-bar--color-secondary":i[5]==="secondary","mdc-top-app-bar--prominent":i[6],"mdc-top-app-bar--dense":i[7],...i[11]})},{style:o=Object.entries(i[12]).map($y).concat([i[3]]).join(" ")},i[15]],v={};for(let w=0;w<b.length;w+=1)v=qi(v,b[w]);return{c(){e=ti("header"),y&&y.c(),this.h()},l(w){e=ii(w,"HEADER",{class:!0,style:!0});var x=si(e);y&&y.l(x),x.forEach(Oe),this.h()},h(){or(e,v)},m(w,x){Dt(w,e,x),y&&y.m(e,null),i[25](e),u=!0,m||(r=[qn(Qy,"resize",i[23]),qn(Qy,"scroll",i[24]),ir(l=Eo.call(null,e,i[1])),ir(i[13].call(null,e)),qn(e,"SMUITopAppBarIconButton:nav",i[26])],m=!0)},p(w,x){y&&y.p&&(!u||x[0]&2097152)&&dr(y,h,w,w[21],u?mr(h,w[21],x,null):pr(w[21]),null),or(e,v=wr(b,[(!u||x[0]&2293&&t!==(t=rr({[w[2]]:!0,"mdc-top-app-bar":!0,"mdc-top-app-bar--short":w[4]==="short","mdc-top-app-bar--short-collapsed":w[0],"mdc-top-app-bar--fixed":w[4]==="fixed","smui-top-app-bar--static":w[4]==="static","smui-top-app-bar--color-secondary":w[5]==="secondary","mdc-top-app-bar--prominent":w[6],"mdc-top-app-bar--dense":w[7],...w[11]})))&&{class:t},(!u||x[0]&4104&&o!==(o=Object.entries(w[12]).map($y).concat([w[3]]).join(" ")))&&{style:o},x[0]&32768&&w[15]])),l&&ro(l.update)&&x[0]&2&&l.update.call(null,w[1])},i(w){u||(yt(y,w),u=!0)},o(w){At(y,w),u=!1},d(w){w&&Oe(e),y&&y.d(w),i[25](null),m=!1,Io(r)}}}const $y=([i,e])=>`${i}: ${e};`;function Nx(i,e,t){const o=["use","class","style","variant","color","collapsed","prominent","dense","scrollTarget","getPropStore","getElement"];let l=Zn(e,o),{$$slots:u={},$$scope:m}=e;const r=go(mo());let h=()=>{};function y(he){return he===h}let{use:b=[]}=e,{class:v=""}=e,{style:w=""}=e,{variant:x="standard"}=e,{color:C="primary"}=e,{collapsed:T=h}=e;const S=!y(T)&&!!T;y(T)&&(T=!1);let{prominent:M=!1}=e,{dense:O=!1}=e,{scrollTarget:V=void 0}=e,X,Z,ee={},J={},ie,ke=Ax({variant:x,prominent:M,dense:O},he=>{t(18,ie=he)}),Le,fe=x;Ss(()=>(t(9,Z=Te()),Z.init(),()=>{Z.destroy()}));function Te(){const he={static:mg,short:Rx,fixed:Fx}[x]||g4;return new he({hasClass:_e,addClass:ve,removeClass:rt,setStyle:nt,getTopAppBarHeight:()=>X.clientHeight,notifyNavigationIconClicked:()=>So(X,"SMUITopAppBar:nav",void 0,void 0,!0),getViewportScrollY:()=>V==null?window.pageYOffset:V.scrollTop,getTotalActionItems:()=>X.querySelectorAll(".mdc-top-app-bar__action-item").length})}function _e(he){return he in ee?ee[he]:be().classList.contains(he)}function ve(he){ee[he]||t(11,ee[he]=!0,ee)}function rt(he){(!(he in ee)||ee[he])&&t(11,ee[he]=!1,ee)}function nt(he,me){J[he]!=me&&(me===""||me==null?(delete J[he],t(12,J),t(20,fe),t(4,x),t(9,Z)):t(12,J[he]=me,J))}function Tt(){Z&&(Z.handleTargetScroll(),x==="short"&&t(0,T="isCollapsed"in Z&&Z.isCollapsed))}function We(){return ke}function be(){return X}const Ce=()=>x!=="short"&&x!=="fixed"&&Z&&Z.handleWindowResize(),Be=()=>V==null&&Tt();function le(he){wn[he?"unshift":"push"](()=>{X=he,t(10,X)})}const Ee=()=>Z&&Z.handleNavigationClick();return i.$$set=he=>{e=qi(qi({},e),uo(he)),t(15,l=Zn(e,o)),"use"in he&&t(1,b=he.use),"class"in he&&t(2,v=he.class),"style"in he&&t(3,w=he.style),"variant"in he&&t(4,x=he.variant),"color"in he&&t(5,C=he.color),"collapsed"in he&&t(0,T=he.collapsed),"prominent"in he&&t(6,M=he.prominent),"dense"in he&&t(7,O=he.dense),"scrollTarget"in he&&t(8,V=he.scrollTarget),"$$scope"in he&&t(21,m=he.$$scope)},i.$$.update=()=>{i.$$.dirty[0]&262352&&ie&&ie({variant:x,prominent:M,dense:O}),i.$$.dirty[0]&1049104&&fe!==x&&Z&&(t(20,fe=x),Z.destroy(),t(11,ee={}),t(12,J={}),t(9,Z=Te()),Z.init()),i.$$.dirty[0]&528&&Z&&x==="short"&&"setAlwaysCollapsed"in Z&&Z.setAlwaysCollapsed(S),i.$$.dirty[0]&524544&&Le!==V&&(Le&&Le.removeEventListener("scroll",Tt),V&&V.addEventListener("scroll",Tt),t(19,Le=V))},[T,b,v,w,x,C,M,O,V,Z,X,ee,J,r,Tt,l,We,be,ie,Le,fe,m,u,Ce,Be,le,Ee]}class jx extends xr{constructor(e){super(),Ar(this,e,Nx,zx,br,{use:1,class:2,style:3,variant:4,color:5,collapsed:0,prominent:6,dense:7,scrollTarget:8,getPropStore:16,getElement:17},null,[-1,-1])}get getPropStore(){return this.$$.ctx[16]}get getElement(){return this.$$.ctx[17]}}function Ux(i){let e,t,o,l,u;const m=i[6].default,r=fr(m,i,i[5],null);let h=[i[3]],y={};for(let b=0;b<h.length;b+=1)y=qi(y,h[b]);return{c(){e=ti("div"),r&&r.c(),this.h()},l(b){e=ii(b,"DIV",{});var v=si(e);r&&r.l(v),v.forEach(Oe),this.h()},h(){or(e,y)},m(b,v){Dt(b,e,v),r&&r.m(e,null),i[7](e),o=!0,l||(u=[ir(t=Eo.call(null,e,i[0])),ir(i[2].call(null,e))],l=!0)},p(b,[v]){r&&r.p&&(!o||v&32)&&dr(r,m,b,b[5],o?mr(m,b[5],v,null):pr(b[5]),null),or(e,y=wr(h,[v&8&&b[3]])),t&&ro(t.update)&&v&1&&t.update.call(null,b[0])},i(b){o||(yt(r,b),o=!0)},o(b){At(r,b),o=!1},d(b){b&&Oe(e),r&&r.d(b),i[7](null),l=!1,Io(u)}}}function Vx(i,e,t){const o=["use","getElement"];let l=Zn(e,o),{$$slots:u={},$$scope:m}=e,{use:r=[]}=e;const h=go(mo());let y;function b(){return y}function v(w){wn[w?"unshift":"push"](()=>{y=w,t(1,y)})}return i.$$set=w=>{e=qi(qi({},e),uo(w)),t(3,l=Zn(e,o)),"use"in w&&t(0,r=w.use),"$$scope"in w&&t(5,m=w.$$scope)},[r,y,h,l,b,m,u,v]}class y4 extends xr{constructor(e){super(),Ar(this,e,Vx,Ux,br,{use:0,getElement:4})}get getElement(){return this.$$.ctx[4]}}function qx(i){let e;const t=i[10].default,o=fr(t,i,i[12],null);return{c(){o&&o.c()},l(l){o&&o.l(l)},m(l,u){o&&o.m(l,u),e=!0},p(l,u){o&&o.p&&(!e||u&4096)&&dr(o,t,l,l[12],e?mr(t,l[12],u,null):pr(l[12]),null)},i(l){e||(yt(o,l),e=!0)},o(l){At(o,l),e=!1},d(l){o&&o.d(l)}}}function Hx(i){let e,t,o;const l=[{use:[i[7],...i[0]]},{class:rr({[i[1]]:!0,[i[5]]:!0,...i[4]})},i[6],i[8]];var u=i[2];function m(r){let h={$$slots:{default:[qx]},$$scope:{ctx:r}};for(let y=0;y<l.length;y+=1)h=qi(h,l[y]);return{props:h}}return u&&(e=wl(u,m(i)),i[11](e)),{c(){e&&Hi(e.$$.fragment),t=gn()},l(r){e&&$i(e.$$.fragment,r),t=gn()},m(r,h){e&&Gi(e,r,h),Dt(r,t,h),o=!0},p(r,[h]){const y=h&499?wr(l,[h&129&&{use:[r[7],...r[0]]},h&50&&{class:rr({[r[1]]:!0,[r[5]]:!0,...r[4]})},h&64&&po(r[6]),h&256&&po(r[8])]):{};if(h&4096&&(y.$$scope={dirty:h,ctx:r}),u!==(u=r[2])){if(e){Dr();const b=e;At(b.$$.fragment,1,0,()=>{Wi(b,1)}),Mr()}u?(e=wl(u,m(r)),r[11](e),Hi(e.$$.fragment),yt(e.$$.fragment,1),Gi(e,t.parentNode,t)):e=null}else u&&e.$set(y)},i(r){o||(e&&yt(e.$$.fragment,r),o=!0)},o(r){e&&At(e.$$.fragment,r),o=!1},d(r){i[11](null),r&&Oe(t),e&&Wi(e,r)}}}const af={component:y4,class:"",classMap:{},contexts:{},props:{}};function Gx(i,e,t){const o=["use","class","component","getElement"];let l=Zn(e,o),{$$slots:u={},$$scope:m}=e,{use:r=[]}=e,{class:h=""}=e,y;const b=af.class,v={},w=[],x=af.contexts,C=af.props;let{component:T=af.component}=e;Object.entries(af.classMap).forEach(([V,X])=>{const Z=ds(X);Z&&"subscribe"in Z&&w.push(Z.subscribe(ee=>{t(4,v[V]=ee,v)}))});const S=go(mo());for(let V in x)x.hasOwnProperty(V)&&$o(V,x[V]);Lc(()=>{for(const V of w)V()});function M(){return y.getElement()}function O(V){wn[V?"unshift":"push"](()=>{y=V,t(3,y)})}return i.$$set=V=>{e=qi(qi({},e),uo(V)),t(8,l=Zn(e,o)),"use"in V&&t(0,r=V.use),"class"in V&&t(1,h=V.class),"component"in V&&t(2,T=V.component),"$$scope"in V&&t(12,m=V.$$scope)},[r,h,T,y,v,b,C,S,l,M,u,O,m]}class Wx extends xr{constructor(e){super(),Ar(this,e,Gx,Hx,br,{use:0,class:1,component:2,getElement:9})}get getElement(){return this.$$.ctx[9]}}const e_=Object.assign({},af);function Al(i){return new Proxy(Wx,{construct:function(e,t){return Object.assign(af,e_,i),new e(...t)},get:function(e,t){return Object.assign(af,e_,i),e[t]}})}function Xx(i){let e,t,o,l,u;const m=i[7].default,r=fr(m,i,i[6],null);let h=[{href:i[1]},i[4]],y={};for(let b=0;b<h.length;b+=1)y=qi(y,h[b]);return{c(){e=ti("a"),r&&r.c(),this.h()},l(b){e=ii(b,"A",{href:!0});var v=si(e);r&&r.l(v),v.forEach(Oe),this.h()},h(){or(e,y)},m(b,v){Dt(b,e,v),r&&r.m(e,null),i[8](e),o=!0,l||(u=[ir(t=Eo.call(null,e,i[0])),ir(i[3].call(null,e))],l=!0)},p(b,[v]){r&&r.p&&(!o||v&64)&&dr(r,m,b,b[6],o?mr(m,b[6],v,null):pr(b[6]),null),or(e,y=wr(h,[(!o||v&2)&&{href:b[1]},v&16&&b[4]])),t&&ro(t.update)&&v&1&&t.update.call(null,b[0])},i(b){o||(yt(r,b),o=!0)},o(b){At(r,b),o=!1},d(b){b&&Oe(e),r&&r.d(b),i[8](null),l=!1,Io(u)}}}function Yx(i,e,t){const o=["use","href","getElement"];let l=Zn(e,o),{$$slots:u={},$$scope:m}=e,{use:r=[]}=e,{href:h="javascript:void(0);"}=e;const y=go(mo());let b;function v(){return b}function w(x){wn[x?"unshift":"push"](()=>{b=x,t(2,b)})}return i.$$set=x=>{e=qi(qi({},e),uo(x)),t(4,l=Zn(e,o)),"use"in x&&t(0,r=x.use),"href"in x&&t(1,h=x.href),"$$scope"in x&&t(6,m=x.$$scope)},[r,h,b,y,l,v,m,u,w]}class Zx extends xr{constructor(e){super(),Ar(this,e,Yx,Xx,br,{use:0,href:1,getElement:5})}get getElement(){return this.$$.ctx[5]}}function Kx(i){let e,t,o,l,u;const m=i[6].default,r=fr(m,i,i[5],null);let h=[i[3]],y={};for(let b=0;b<h.length;b+=1)y=qi(y,h[b]);return{c(){e=ti("button"),r&&r.c(),this.h()},l(b){e=ii(b,"BUTTON",{});var v=si(e);r&&r.l(v),v.forEach(Oe),this.h()},h(){or(e,y)},m(b,v){Dt(b,e,v),r&&r.m(e,null),e.autofocus&&e.focus(),i[7](e),o=!0,l||(u=[ir(t=Eo.call(null,e,i[0])),ir(i[2].call(null,e))],l=!0)},p(b,[v]){r&&r.p&&(!o||v&32)&&dr(r,m,b,b[5],o?mr(m,b[5],v,null):pr(b[5]),null),or(e,y=wr(h,[v&8&&b[3]])),t&&ro(t.update)&&v&1&&t.update.call(null,b[0])},i(b){o||(yt(r,b),o=!0)},o(b){At(r,b),o=!1},d(b){b&&Oe(e),r&&r.d(b),i[7](null),l=!1,Io(u)}}}function Jx(i,e,t){const o=["use","getElement"];let l=Zn(e,o),{$$slots:u={},$$scope:m}=e,{use:r=[]}=e;const h=go(mo());let y;function b(){return y}function v(w){wn[w?"unshift":"push"](()=>{y=w,t(1,y)})}return i.$$set=w=>{e=qi(qi({},e),uo(w)),t(3,l=Zn(e,o)),"use"in w&&t(0,r=w.use),"$$scope"in w&&t(5,m=w.$$scope)},[r,y,h,l,b,m,u,v]}class Qx extends xr{constructor(e){super(),Ar(this,e,Jx,Kx,br,{use:0,getElement:4})}get getElement(){return this.$$.ctx[4]}}function $x(i){let e,t,o,l,u;const m=i[6].default,r=fr(m,i,i[5],null);let h=[i[3]],y={};for(let b=0;b<h.length;b+=1)y=qi(y,h[b]);return{c(){e=ti("h3"),r&&r.c(),this.h()},l(b){e=ii(b,"H3",{});var v=si(e);r&&r.l(v),v.forEach(Oe),this.h()},h(){or(e,y)},m(b,v){Dt(b,e,v),r&&r.m(e,null),i[7](e),o=!0,l||(u=[ir(t=Eo.call(null,e,i[0])),ir(i[2].call(null,e))],l=!0)},p(b,[v]){r&&r.p&&(!o||v&32)&&dr(r,m,b,b[5],o?mr(m,b[5],v,null):pr(b[5]),null),or(e,y=wr(h,[v&8&&b[3]])),t&&ro(t.update)&&v&1&&t.update.call(null,b[0])},i(b){o||(yt(r,b),o=!0)},o(b){At(r,b),o=!1},d(b){b&&Oe(e),r&&r.d(b),i[7](null),l=!1,Io(u)}}}function e6(i,e,t){const o=["use","getElement"];let l=Zn(e,o),{$$slots:u={},$$scope:m}=e,{use:r=[]}=e;const h=go(mo());let y;function b(){return y}function v(w){wn[w?"unshift":"push"](()=>{y=w,t(1,y)})}return i.$$set=w=>{e=qi(qi({},e),uo(w)),t(3,l=Zn(e,o)),"use"in w&&t(0,r=w.use),"$$scope"in w&&t(5,m=w.$$scope)},[r,y,h,l,b,m,u,v]}class t6 extends xr{constructor(e){super(),Ar(this,e,e6,$x,br,{use:0,getElement:4})}get getElement(){return this.$$.ctx[4]}}function i6(i){let e,t,o,l,u;const m=i[6].default,r=fr(m,i,i[5],null);let h=[i[3]],y={};for(let b=0;b<h.length;b+=1)y=qi(y,h[b]);return{c(){e=ti("h5"),r&&r.c(),this.h()},l(b){e=ii(b,"H5",{});var v=si(e);r&&r.l(v),v.forEach(Oe),this.h()},h(){or(e,y)},m(b,v){Dt(b,e,v),r&&r.m(e,null),i[7](e),o=!0,l||(u=[ir(t=Eo.call(null,e,i[0])),ir(i[2].call(null,e))],l=!0)},p(b,[v]){r&&r.p&&(!o||v&32)&&dr(r,m,b,b[5],o?mr(m,b[5],v,null):pr(b[5]),null),or(e,y=wr(h,[v&8&&b[3]])),t&&ro(t.update)&&v&1&&t.update.call(null,b[0])},i(b){o||(yt(r,b),o=!0)},o(b){At(r,b),o=!1},d(b){b&&Oe(e),r&&r.d(b),i[7](null),l=!1,Io(u)}}}function n6(i,e,t){const o=["use","getElement"];let l=Zn(e,o),{$$slots:u={},$$scope:m}=e,{use:r=[]}=e;const h=go(mo());let y;function b(){return y}function v(w){wn[w?"unshift":"push"](()=>{y=w,t(1,y)})}return i.$$set=w=>{e=qi(qi({},e),uo(w)),t(3,l=Zn(e,o)),"use"in w&&t(0,r=w.use),"$$scope"in w&&t(5,m=w.$$scope)},[r,y,h,l,b,m,u,v]}class r6 extends xr{constructor(e){super(),Ar(this,e,n6,i6,br,{use:0,getElement:4})}get getElement(){return this.$$.ctx[4]}}function o6(i){let e,t,o,l,u;const m=i[6].default,r=fr(m,i,i[5],null);let h=[i[3]],y={};for(let b=0;b<h.length;b+=1)y=qi(y,h[b]);return{c(){e=ti("h6"),r&&r.c(),this.h()},l(b){e=ii(b,"H6",{});var v=si(e);r&&r.l(v),v.forEach(Oe),this.h()},h(){or(e,y)},m(b,v){Dt(b,e,v),r&&r.m(e,null),i[7](e),o=!0,l||(u=[ir(t=Eo.call(null,e,i[0])),ir(i[2].call(null,e))],l=!0)},p(b,[v]){r&&r.p&&(!o||v&32)&&dr(r,m,b,b[5],o?mr(m,b[5],v,null):pr(b[5]),null),or(e,y=wr(h,[v&8&&b[3]])),t&&ro(t.update)&&v&1&&t.update.call(null,b[0])},i(b){o||(yt(r,b),o=!0)},o(b){At(r,b),o=!1},d(b){b&&Oe(e),r&&r.d(b),i[7](null),l=!1,Io(u)}}}function s6(i,e,t){const o=["use","getElement"];let l=Zn(e,o),{$$slots:u={},$$scope:m}=e,{use:r=[]}=e;const h=go(mo());let y;function b(){return y}function v(w){wn[w?"unshift":"push"](()=>{y=w,t(1,y)})}return i.$$set=w=>{e=qi(qi({},e),uo(w)),t(3,l=Zn(e,o)),"use"in w&&t(0,r=w.use),"$$scope"in w&&t(5,m=w.$$scope)},[r,y,h,l,b,m,u,v]}class a6 extends xr{constructor(e){super(),Ar(this,e,s6,o6,br,{use:0,getElement:4})}get getElement(){return this.$$.ctx[4]}}function l6(i){let e,t,o,l,u;const m=i[6].default,r=fr(m,i,i[5],null);let h=[i[3]],y={};for(let b=0;b<h.length;b+=1)y=qi(y,h[b]);return{c(){e=ti("i"),r&&r.c(),this.h()},l(b){e=ii(b,"I",{});var v=si(e);r&&r.l(v),v.forEach(Oe),this.h()},h(){or(e,y)},m(b,v){Dt(b,e,v),r&&r.m(e,null),i[7](e),o=!0,l||(u=[ir(t=Eo.call(null,e,i[0])),ir(i[2].call(null,e))],l=!0)},p(b,[v]){r&&r.p&&(!o||v&32)&&dr(r,m,b,b[5],o?mr(m,b[5],v,null):pr(b[5]),null),or(e,y=wr(h,[v&8&&b[3]])),t&&ro(t.update)&&v&1&&t.update.call(null,b[0])},i(b){o||(yt(r,b),o=!0)},o(b){At(r,b),o=!1},d(b){b&&Oe(e),r&&r.d(b),i[7](null),l=!1,Io(u)}}}function u6(i,e,t){const o=["use","getElement"];let l=Zn(e,o),{$$slots:u={},$$scope:m}=e,{use:r=[]}=e;const h=go(mo());let y;function b(){return y}function v(w){wn[w?"unshift":"push"](()=>{y=w,t(1,y)})}return i.$$set=w=>{e=qi(qi({},e),uo(w)),t(3,l=Zn(e,o)),"use"in w&&t(0,r=w.use),"$$scope"in w&&t(5,m=w.$$scope)},[r,y,h,l,b,m,u,v]}class c6 extends xr{constructor(e){super(),Ar(this,e,u6,l6,br,{use:0,getElement:4})}get getElement(){return this.$$.ctx[4]}}function h6(i){let e,t,o,l,u;const m=i[6].default,r=fr(m,i,i[5],null);let h=[i[3]],y={};for(let b=0;b<h.length;b+=1)y=qi(y,h[b]);return{c(){e=ti("li"),r&&r.c(),this.h()},l(b){e=ii(b,"LI",{});var v=si(e);r&&r.l(v),v.forEach(Oe),this.h()},h(){or(e,y)},m(b,v){Dt(b,e,v),r&&r.m(e,null),i[7](e),o=!0,l||(u=[ir(t=Eo.call(null,e,i[0])),ir(i[2].call(null,e))],l=!0)},p(b,[v]){r&&r.p&&(!o||v&32)&&dr(r,m,b,b[5],o?mr(m,b[5],v,null):pr(b[5]),null),or(e,y=wr(h,[v&8&&b[3]])),t&&ro(t.update)&&v&1&&t.update.call(null,b[0])},i(b){o||(yt(r,b),o=!0)},o(b){At(r,b),o=!1},d(b){b&&Oe(e),r&&r.d(b),i[7](null),l=!1,Io(u)}}}function f6(i,e,t){const o=["use","getElement"];let l=Zn(e,o),{$$slots:u={},$$scope:m}=e,{use:r=[]}=e;const h=go(mo());let y;function b(){return y}function v(w){wn[w?"unshift":"push"](()=>{y=w,t(1,y)})}return i.$$set=w=>{e=qi(qi({},e),uo(w)),t(3,l=Zn(e,o)),"use"in w&&t(0,r=w.use),"$$scope"in w&&t(5,m=w.$$scope)},[r,y,h,l,b,m,u,v]}class d6 extends xr{constructor(e){super(),Ar(this,e,f6,h6,br,{use:0,getElement:4})}get getElement(){return this.$$.ctx[4]}}function p6(i){let e,t,o,l,u;const m=i[6].default,r=fr(m,i,i[5],null);let h=[i[3]],y={};for(let b=0;b<h.length;b+=1)y=qi(y,h[b]);return{c(){e=ti("main"),r&&r.c(),this.h()},l(b){e=ii(b,"MAIN",{});var v=si(e);r&&r.l(v),v.forEach(Oe),this.h()},h(){or(e,y)},m(b,v){Dt(b,e,v),r&&r.m(e,null),i[7](e),o=!0,l||(u=[ir(t=Eo.call(null,e,i[0])),ir(i[2].call(null,e))],l=!0)},p(b,[v]){r&&r.p&&(!o||v&32)&&dr(r,m,b,b[5],o?mr(m,b[5],v,null):pr(b[5]),null),or(e,y=wr(h,[v&8&&b[3]])),t&&ro(t.update)&&v&1&&t.update.call(null,b[0])},i(b){o||(yt(r,b),o=!0)},o(b){At(r,b),o=!1},d(b){b&&Oe(e),r&&r.d(b),i[7](null),l=!1,Io(u)}}}function m6(i,e,t){const o=["use","getElement"];let l=Zn(e,o),{$$slots:u={},$$scope:m}=e,{use:r=[]}=e;const h=go(mo());let y;function b(){return y}function v(w){wn[w?"unshift":"push"](()=>{y=w,t(1,y)})}return i.$$set=w=>{e=qi(qi({},e),uo(w)),t(3,l=Zn(e,o)),"use"in w&&t(0,r=w.use),"$$scope"in w&&t(5,m=w.$$scope)},[r,y,h,l,b,m,u,v]}class g6 extends xr{constructor(e){super(),Ar(this,e,m6,p6,br,{use:0,getElement:4})}get getElement(){return this.$$.ctx[4]}}function y6(i){let e,t,o,l,u;const m=i[6].default,r=fr(m,i,i[5],null);let h=[i[3]],y={};for(let b=0;b<h.length;b+=1)y=qi(y,h[b]);return{c(){e=ti("nav"),r&&r.c(),this.h()},l(b){e=ii(b,"NAV",{});var v=si(e);r&&r.l(v),v.forEach(Oe),this.h()},h(){or(e,y)},m(b,v){Dt(b,e,v),r&&r.m(e,null),i[7](e),o=!0,l||(u=[ir(t=Eo.call(null,e,i[0])),ir(i[2].call(null,e))],l=!0)},p(b,[v]){r&&r.p&&(!o||v&32)&&dr(r,m,b,b[5],o?mr(m,b[5],v,null):pr(b[5]),null),or(e,y=wr(h,[v&8&&b[3]])),t&&ro(t.update)&&v&1&&t.update.call(null,b[0])},i(b){o||(yt(r,b),o=!0)},o(b){At(r,b),o=!1},d(b){b&&Oe(e),r&&r.d(b),i[7](null),l=!1,Io(u)}}}function _6(i,e,t){const o=["use","getElement"];let l=Zn(e,o),{$$slots:u={},$$scope:m}=e,{use:r=[]}=e;const h=go(mo());let y;function b(){return y}function v(w){wn[w?"unshift":"push"](()=>{y=w,t(1,y)})}return i.$$set=w=>{e=qi(qi({},e),uo(w)),t(3,l=Zn(e,o)),"use"in w&&t(0,r=w.use),"$$scope"in w&&t(5,m=w.$$scope)},[r,y,h,l,b,m,u,v]}class v6 extends xr{constructor(e){super(),Ar(this,e,_6,y6,br,{use:0,getElement:4})}get getElement(){return this.$$.ctx[4]}}function b6(i){let e,t,o,l,u;const m=i[6].default,r=fr(m,i,i[5],null);let h=[i[3]],y={};for(let b=0;b<h.length;b+=1)y=qi(y,h[b]);return{c(){e=ti("span"),r&&r.c(),this.h()},l(b){e=ii(b,"SPAN",{});var v=si(e);r&&r.l(v),v.forEach(Oe),this.h()},h(){or(e,y)},m(b,v){Dt(b,e,v),r&&r.m(e,null),i[7](e),o=!0,l||(u=[ir(t=Eo.call(null,e,i[0])),ir(i[2].call(null,e))],l=!0)},p(b,[v]){r&&r.p&&(!o||v&32)&&dr(r,m,b,b[5],o?mr(m,b[5],v,null):pr(b[5]),null),or(e,y=wr(h,[v&8&&b[3]])),t&&ro(t.update)&&v&1&&t.update.call(null,b[0])},i(b){o||(yt(r,b),o=!0)},o(b){At(r,b),o=!1},d(b){b&&Oe(e),r&&r.d(b),i[7](null),l=!1,Io(u)}}}function w6(i,e,t){const o=["use","getElement"];let l=Zn(e,o),{$$slots:u={},$$scope:m}=e,{use:r=[]}=e;const h=go(mo());let y;function b(){return y}function v(w){wn[w?"unshift":"push"](()=>{y=w,t(1,y)})}return i.$$set=w=>{e=qi(qi({},e),uo(w)),t(3,l=Zn(e,o)),"use"in w&&t(0,r=w.use),"$$scope"in w&&t(5,m=w.$$scope)},[r,y,h,l,b,m,u,v]}class _4 extends xr{constructor(e){super(),Ar(this,e,w6,b6,br,{use:0,getElement:4})}get getElement(){return this.$$.ctx[4]}}function x6(i){let e,t,o,l,u;const m=i[6].default,r=fr(m,i,i[5],null);let h=[i[3]],y={};for(let b=0;b<h.length;b+=1)y=qi(y,h[b]);return{c(){e=$p("svg"),r&&r.c(),this.h()},l(b){e=e1(b,"svg",{});var v=si(e);r&&r.l(v),v.forEach(Oe),this.h()},h(){Xy(e,y)},m(b,v){Dt(b,e,v),r&&r.m(e,null),i[7](e),o=!0,l||(u=[ir(t=Eo.call(null,e,i[0])),ir(i[2].call(null,e))],l=!0)},p(b,[v]){r&&r.p&&(!o||v&32)&&dr(r,m,b,b[5],o?mr(m,b[5],v,null):pr(b[5]),null),Xy(e,y=wr(h,[v&8&&b[3]])),t&&ro(t.update)&&v&1&&t.update.call(null,b[0])},i(b){o||(yt(r,b),o=!0)},o(b){At(r,b),o=!1},d(b){b&&Oe(e),r&&r.d(b),i[7](null),l=!1,Io(u)}}}function A6(i,e,t){const o=["use","getElement"];let l=Zn(e,o),{$$slots:u={},$$scope:m}=e,{use:r=[]}=e;const h=go(mo());let y;function b(){return y}function v(w){wn[w?"unshift":"push"](()=>{y=w,t(1,y)})}return i.$$set=w=>{e=qi(qi({},e),uo(w)),t(3,l=Zn(e,o)),"use"in w&&t(0,r=w.use),"$$scope"in w&&t(5,m=w.$$scope)},[r,y,h,l,b,m,u,v]}class t_ extends xr{constructor(e){super(),Ar(this,e,A6,x6,br,{use:0,getElement:4})}get getElement(){return this.$$.ctx[4]}}function k6(i){let e,t,o,l,u;const m=i[6].default,r=fr(m,i,i[5],null);let h=[i[3]],y={};for(let b=0;b<h.length;b+=1)y=qi(y,h[b]);return{c(){e=ti("ul"),r&&r.c(),this.h()},l(b){e=ii(b,"UL",{});var v=si(e);r&&r.l(v),v.forEach(Oe),this.h()},h(){or(e,y)},m(b,v){Dt(b,e,v),r&&r.m(e,null),i[7](e),o=!0,l||(u=[ir(t=Eo.call(null,e,i[0])),ir(i[2].call(null,e))],l=!0)},p(b,[v]){r&&r.p&&(!o||v&32)&&dr(r,m,b,b[5],o?mr(m,b[5],v,null):pr(b[5]),null),or(e,y=wr(h,[v&8&&b[3]])),t&&ro(t.update)&&v&1&&t.update.call(null,b[0])},i(b){o||(yt(r,b),o=!0)},o(b){At(r,b),o=!1},d(b){b&&Oe(e),r&&r.d(b),i[7](null),l=!1,Io(u)}}}function S6(i,e,t){const o=["use","getElement"];let l=Zn(e,o),{$$slots:u={},$$scope:m}=e,{use:r=[]}=e;const h=go(mo());let y;function b(){return y}function v(w){wn[w?"unshift":"push"](()=>{y=w,t(1,y)})}return i.$$set=w=>{e=qi(qi({},e),uo(w)),t(3,l=Zn(e,o)),"use"in w&&t(0,r=w.use),"$$scope"in w&&t(5,m=w.$$scope)},[r,y,h,l,b,m,u,v]}class C6 extends xr{constructor(e){super(),Ar(this,e,S6,k6,br,{use:0,getElement:4})}get getElement(){return this.$$.ctx[4]}}const gg=Zx,v4=Qx,ip=y4,E6=t6,I6=r6,T6=a6,L6=d6,P6=g6,M6=v6,vf=_4,D6=C6,O6=Al({class:"mdc-top-app-bar__row",component:ip});function F6(i){let e,t,o,l,u,m;const r=i[9].default,h=fr(r,i,i[8],null);let y=[{class:t=rr({[i[1]]:!0,"mdc-top-app-bar__section":!0,"mdc-top-app-bar__section--align-start":i[2]==="start","mdc-top-app-bar__section--align-end":i[2]==="end"})},i[3]?{role:"toolbar"}:{},i[6]],b={};for(let v=0;v<y.length;v+=1)b=qi(b,y[v]);return{c(){e=ti("section"),h&&h.c(),this.h()},l(v){e=ii(v,"SECTION",{class:!0});var w=si(e);h&&h.l(w),w.forEach(Oe),this.h()},h(){or(e,b)},m(v,w){Dt(v,e,w),h&&h.m(e,null),i[10](e),l=!0,u||(m=[ir(o=Eo.call(null,e,i[0])),ir(i[5].call(null,e))],u=!0)},p(v,[w]){h&&h.p&&(!l||w&256)&&dr(h,r,v,v[8],l?mr(r,v[8],w,null):pr(v[8]),null),or(e,b=wr(y,[(!l||w&6&&t!==(t=rr({[v[1]]:!0,"mdc-top-app-bar__section":!0,"mdc-top-app-bar__section--align-start":v[2]==="start","mdc-top-app-bar__section--align-end":v[2]==="end"})))&&{class:t},w&8&&(v[3]?{role:"toolbar"}:{}),w&64&&v[6]])),o&&ro(o.update)&&w&1&&o.update.call(null,v[0])},i(v){l||(yt(h,v),l=!0)},o(v){At(h,v),l=!1},d(v){v&&Oe(e),h&&h.d(v),i[10](null),u=!1,Io(m)}}}function R6(i,e,t){const o=["use","class","align","toolbar","getElement"];let l=Zn(e,o),{$$slots:u={},$$scope:m}=e;const r=go(mo());let{use:h=[]}=e,{class:y=""}=e,{align:b="start"}=e,{toolbar:v=!1}=e,w;$o("SMUI:icon-button:context",v?"top-app-bar:action":"top-app-bar:navigation"),$o("SMUI:button:context",v?"top-app-bar:action":"top-app-bar:navigation");function x(){return w}function C(T){wn[T?"unshift":"push"](()=>{w=T,t(4,w)})}return i.$$set=T=>{e=qi(qi({},e),uo(T)),t(6,l=Zn(e,o)),"use"in T&&t(0,h=T.use),"class"in T&&t(1,y=T.class),"align"in T&&t(2,b=T.align),"toolbar"in T&&t(3,v=T.toolbar),"$$scope"in T&&t(8,m=T.$$scope)},[h,y,b,v,w,r,l,x,m,u,C]}class B6 extends xr{constructor(e){super(),Ar(this,e,R6,F6,br,{use:0,class:1,align:2,toolbar:3,getElement:7})}get getElement(){return this.$$.ctx[7]}}const z6=Al({class:"mdc-top-app-bar__title",component:vf});function N6(i){let e;const t=i[11].default,o=fr(t,i,i[13],null);return{c(){o&&o.c()},l(l){o&&o.l(l)},m(l,u){o&&o.m(l,u),e=!0},p(l,u){o&&o.p&&(!e||u&8192)&&dr(o,t,l,l[13],e?mr(t,l[13],u,null):pr(l[13]),null)},i(l){e||(yt(o,l),e=!0)},o(l){At(o,l),e=!1},d(l){o&&o.d(l)}}}function j6(i){let e,t,o;const l=[{use:[i[6],...i[0]]},{class:rr({[i[1]]:!0,[i[5]]:!0})},i[7]];var u=i[2];function m(r){let h={$$slots:{default:[N6]},$$scope:{ctx:r}};for(let y=0;y<l.length;y+=1)h=qi(h,l[y]);return{props:h}}return u&&(e=wl(u,m(i)),i[12](e)),{c(){e&&Hi(e.$$.fragment),t=gn()},l(r){e&&$i(e.$$.fragment,r),t=gn()},m(r,h){e&&Gi(e,r,h),Dt(r,t,h),o=!0},p(r,[h]){const y=h&227?wr(l,[h&65&&{use:[r[6],...r[0]]},h&34&&{class:rr({[r[1]]:!0,[r[5]]:!0})},h&128&&po(r[7])]):{};if(h&8192&&(y.$$scope={dirty:h,ctx:r}),u!==(u=r[2])){if(e){Dr();const b=e;At(b.$$.fragment,1,0,()=>{Wi(b,1)}),Mr()}u?(e=wl(u,m(r)),r[12](e),Hi(e.$$.fragment),yt(e.$$.fragment,1),Gi(e,t.parentNode,t)):e=null}else u&&e.$set(y)},i(r){o||(e&&yt(e.$$.fragment,r),o=!0)},o(r){e&&At(e.$$.fragment,r),o=!1},d(r){i[12](null),r&&Oe(t),e&&Wi(e,r)}}}function U6(i,e,t){let o,l;const u=["use","class","topAppBar","component","getElement"];let m=Zn(e,u),r,h=is,y=()=>(h(),h=bx(o,X=>t(10,r=X)),o);i.$$.on_destroy.push(()=>h());let{$$slots:b={},$$scope:v}=e;const w=go(mo());let{use:x=[]}=e,{class:C=""}=e,{topAppBar:T}=e,S,{component:M=P6}=e;function O(){return S.getElement()}function V(X){wn[X?"unshift":"push"](()=>{S=X,t(4,S)})}return i.$$set=X=>{e=qi(qi({},e),uo(X)),t(7,m=Zn(e,u)),"use"in X&&t(0,x=X.use),"class"in X&&t(1,C=X.class),"topAppBar"in X&&t(8,T=X.topAppBar),"component"in X&&t(2,M=X.component),"$$scope"in X&&t(13,v=X.$$scope)},i.$$.update=()=>{i.$$.dirty&256&&y(t(3,o=T&&T.getPropStore())),i.$$.dirty&1032&&t(5,l=(()=>!o||r.variant==="static"?"":r.variant==="short"?"mdc-top-app-bar--short-fixed-adjust":r.prominent&&r.dense?"mdc-top-app-bar--dense-prominent-fixed-adjust":r.prominent?"mdc-top-app-bar--prominent-fixed-adjust":r.dense?"mdc-top-app-bar--dense-fixed-adjust":"mdc-top-app-bar--fixed-adjust")())},[x,C,M,o,S,l,w,m,T,O,r,b,V,v]}class V6 extends xr{constructor(e){super(),Ar(this,e,U6,j6,br,{use:0,class:1,topAppBar:8,component:2,getElement:9})}get getElement(){return this.$$.ctx[9]}}const i_=B6,q6=V6;/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var Bp={ICON_BUTTON_ON:"mdc-icon-button--on",ROOT:"mdc-icon-button"},kh={ARIA_LABEL:"aria-label",ARIA_PRESSED:"aria-pressed",DATA_ARIA_LABEL_OFF:"data-aria-label-off",DATA_ARIA_LABEL_ON:"data-aria-label-on",CHANGE_EVENT:"MDCIconButtonToggle:change"};/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var H6=function(i){xl(e,i);function e(t){var o=i.call(this,ts(ts({},e.defaultAdapter),t))||this;return o.hasToggledAriaLabel=!1,o}return Object.defineProperty(e,"cssClasses",{get:function(){return Bp},enumerable:!1,configurable:!0}),Object.defineProperty(e,"strings",{get:function(){return kh},enumerable:!1,configurable:!0}),Object.defineProperty(e,"defaultAdapter",{get:function(){return{addClass:function(){},hasClass:function(){return!1},notifyChange:function(){},removeClass:function(){},getAttr:function(){return null},setAttr:function(){}}},enumerable:!1,configurable:!0}),e.prototype.init=function(){var t=this.adapter.getAttr(kh.DATA_ARIA_LABEL_ON),o=this.adapter.getAttr(kh.DATA_ARIA_LABEL_OFF);if(t&&o){if(this.adapter.getAttr(kh.ARIA_PRESSED)!==null)throw new Error("MDCIconButtonToggleFoundation: Button should not set `aria-pressed` if it has a toggled aria label.");this.hasToggledAriaLabel=!0}else this.adapter.setAttr(kh.ARIA_PRESSED,String(this.isOn()))},e.prototype.handleClick=function(){this.toggle(),this.adapter.notifyChange({isOn:this.isOn()})},e.prototype.isOn=function(){return this.adapter.hasClass(Bp.ICON_BUTTON_ON)},e.prototype.toggle=function(t){if(t===void 0&&(t=!this.isOn()),t?this.adapter.addClass(Bp.ICON_BUTTON_ON):this.adapter.removeClass(Bp.ICON_BUTTON_ON),this.hasToggledAriaLabel){var o=t?this.adapter.getAttr(kh.DATA_ARIA_LABEL_ON):this.adapter.getAttr(kh.DATA_ARIA_LABEL_OFF);this.adapter.setAttr(kh.ARIA_LABEL,o||"")}else this.adapter.setAttr(kh.ARIA_PRESSED,""+t)},e}(Fu);/**
 * @license
 * Copyright 2020 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var lo={UNKNOWN:"Unknown",BACKSPACE:"Backspace",ENTER:"Enter",SPACEBAR:"Spacebar",PAGE_UP:"PageUp",PAGE_DOWN:"PageDown",END:"End",HOME:"Home",ARROW_LEFT:"ArrowLeft",ARROW_UP:"ArrowUp",ARROW_RIGHT:"ArrowRight",ARROW_DOWN:"ArrowDown",DELETE:"Delete",ESCAPE:"Escape",TAB:"Tab"},ql=new Set;ql.add(lo.BACKSPACE);ql.add(lo.ENTER);ql.add(lo.SPACEBAR);ql.add(lo.PAGE_UP);ql.add(lo.PAGE_DOWN);ql.add(lo.END);ql.add(lo.HOME);ql.add(lo.ARROW_LEFT);ql.add(lo.ARROW_UP);ql.add(lo.ARROW_RIGHT);ql.add(lo.ARROW_DOWN);ql.add(lo.DELETE);ql.add(lo.ESCAPE);ql.add(lo.TAB);var lu={BACKSPACE:8,ENTER:13,SPACEBAR:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,ARROW_LEFT:37,ARROW_UP:38,ARROW_RIGHT:39,ARROW_DOWN:40,DELETE:46,ESCAPE:27,TAB:9},Hl=new Map;Hl.set(lu.BACKSPACE,lo.BACKSPACE);Hl.set(lu.ENTER,lo.ENTER);Hl.set(lu.SPACEBAR,lo.SPACEBAR);Hl.set(lu.PAGE_UP,lo.PAGE_UP);Hl.set(lu.PAGE_DOWN,lo.PAGE_DOWN);Hl.set(lu.END,lo.END);Hl.set(lu.HOME,lo.HOME);Hl.set(lu.ARROW_LEFT,lo.ARROW_LEFT);Hl.set(lu.ARROW_UP,lo.ARROW_UP);Hl.set(lu.ARROW_RIGHT,lo.ARROW_RIGHT);Hl.set(lu.ARROW_DOWN,lo.ARROW_DOWN);Hl.set(lu.DELETE,lo.DELETE);Hl.set(lu.ESCAPE,lo.ESCAPE);Hl.set(lu.TAB,lo.TAB);var bf=new Set;bf.add(lo.PAGE_UP);bf.add(lo.PAGE_DOWN);bf.add(lo.END);bf.add(lo.HOME);bf.add(lo.ARROW_LEFT);bf.add(lo.ARROW_UP);bf.add(lo.ARROW_RIGHT);bf.add(lo.ARROW_DOWN);function ca(i){var e=i.key;if(ql.has(e))return e;var t=Hl.get(i.keyCode);return t||lo.UNKNOWN}const{applyPassive:zp}=p4,{matches:G6}=L1;function oh(i,{ripple:e=!0,surface:t=!1,unbounded:o=!1,disabled:l=!1,color:u,active:m,rippleElement:r,eventTarget:h,activeTarget:y,addClass:b=C=>i.classList.add(C),removeClass:v=C=>i.classList.remove(C),addStyle:w=(C,T)=>i.style.setProperty(C,T),initPromise:x=Promise.resolve()}={}){let C,T=ds("SMUI:addLayoutListener"),S,M=m,O=h,V=y;function X(){t?(b("mdc-ripple-surface"),u==="primary"?(b("smui-ripple-surface--primary"),v("smui-ripple-surface--secondary")):u==="secondary"?(v("smui-ripple-surface--primary"),b("smui-ripple-surface--secondary")):(v("smui-ripple-surface--primary"),v("smui-ripple-surface--secondary"))):(v("mdc-ripple-surface"),v("smui-ripple-surface--primary"),v("smui-ripple-surface--secondary")),C&&M!==m&&(M=m,m?C.activate():m===!1&&C.deactivate()),e&&!C?(C=new Dx({addClass:b,browserSupportsCssVars:()=>Px(window),computeBoundingRect:()=>(r||i).getBoundingClientRect(),containsEventTarget:ee=>i.contains(ee),deregisterDocumentInteractionHandler:(ee,J)=>document.documentElement.removeEventListener(ee,J,zp()),deregisterInteractionHandler:(ee,J)=>(h||i).removeEventListener(ee,J,zp()),deregisterResizeHandler:ee=>window.removeEventListener("resize",ee),getWindowPageOffset:()=>({x:window.pageXOffset,y:window.pageYOffset}),isSurfaceActive:()=>m==null?G6(y||i,":active"):m,isSurfaceDisabled:()=>!!l,isUnbounded:()=>!!o,registerDocumentInteractionHandler:(ee,J)=>document.documentElement.addEventListener(ee,J,zp()),registerInteractionHandler:(ee,J)=>(h||i).addEventListener(ee,J,zp()),registerResizeHandler:ee=>window.addEventListener("resize",ee),removeClass:v,updateCssVariable:w}),x.then(()=>{C&&(C.init(),C.setUnbounded(o))})):C&&!e&&x.then(()=>{C&&(C.destroy(),C=void 0)}),C&&(O!==h||V!==y)&&(O=h,V=y,C.destroy(),requestAnimationFrame(()=>{C&&(C.init(),C.setUnbounded(o))})),!e&&o&&b("mdc-ripple-upgraded--unbounded")}X(),T&&(S=T(Z));function Z(){C&&C.layout()}return{update(ee){({ripple:e,surface:t,unbounded:o,disabled:l,color:u,active:m,rippleElement:r,eventTarget:h,activeTarget:y,addClass:b,removeClass:v,addStyle:w,initPromise:x}=Object.assign({ripple:!0,surface:!1,unbounded:!1,disabled:!1,color:void 0,active:void 0,rippleElement:void 0,eventTarget:void 0,activeTarget:void 0,addClass:J=>i.classList.add(J),removeClass:J=>i.classList.remove(J),addStyle:(J,ie)=>i.style.setProperty(J,ie),initPromise:Promise.resolve()},ee)),X()},destroy(){C&&(C.destroy(),C=void 0,v("mdc-ripple-surface"),v("smui-ripple-surface--primary"),v("smui-ripple-surface--secondary")),S&&S()}}}function n_(i){let e;return{c(){e=ti("div"),this.h()},l(t){e=ii(t,"DIV",{class:!0}),si(e).forEach(Oe),this.h()},h(){oi(e,"class","mdc-icon-button__touch")},m(t,o){Dt(t,e,o)},d(t){t&&Oe(e)}}}function W6(i){let e,t,o,l;const u=i[32].default,m=fr(u,i,i[36],null);let r=i[8]&&n_();return{c(){e=ti("div"),t=Xi(),m&&m.c(),r&&r.c(),o=gn(),this.h()},l(h){e=ii(h,"DIV",{class:!0}),si(e).forEach(Oe),t=Yi(h),m&&m.l(h),r&&r.l(h),o=gn(),this.h()},h(){oi(e,"class","mdc-icon-button__ripple")},m(h,y){Dt(h,e,y),Dt(h,t,y),m&&m.m(h,y),r&&r.m(h,y),Dt(h,o,y),l=!0},p(h,y){m&&m.p&&(!l||y[1]&32)&&dr(m,u,h,h[36],l?mr(u,h[36],y,null):pr(h[36]),null),h[8]?r||(r=n_(),r.c(),r.m(o.parentNode,o)):r&&(r.d(1),r=null)},i(h){l||(yt(m,h),l=!0)},o(h){At(m,h),l=!1},d(h){h&&Oe(e),h&&Oe(t),m&&m.d(h),r&&r.d(h),h&&Oe(o)}}}function X6(i){let e,t,o;const l=[{use:[[oh,{ripple:i[4],unbounded:!0,color:i[5],disabled:!!i[28].disabled,addClass:i[25],removeClass:i[26],addStyle:i[27]}],i[21],...i[1]]},{class:rr({[i[2]]:!0,"mdc-icon-button":!0,"mdc-icon-button--on":!i[22](i[0])&&i[0],"mdc-icon-button--touch":i[8],"mdc-icon-button--display-flex":i[9],"smui-icon-button--size-button":i[10]==="button","mdc-icon-button--reduced-size":i[10]==="mini"||i[10]==="button","mdc-card__action":i[23]==="card:action","mdc-card__action--icon":i[23]==="card:action","mdc-top-app-bar__navigation-icon":i[23]==="top-app-bar:navigation","mdc-top-app-bar__action-item":i[23]==="top-app-bar:action","mdc-snackbar__dismiss":i[23]==="snackbar:actions","mdc-data-table__pagination-button":i[23]==="data-table:pagination","mdc-data-table__sort-icon-button":i[23]==="data-table:sortable-header-cell","mdc-dialog__close":i[23]==="dialog:header"&&i[12]==="close",...i[17]})},{style:Object.entries(i[18]).map(r_).concat([i[3]]).join(" ")},{"aria-pressed":i[22](i[0])?null:i[0]?"true":"false"},{"aria-label":i[0]?i[6]:i[7]},{"data-aria-label-on":i[6]},{"data-aria-label-off":i[7]},{"aria-describedby":i[24]},{href:i[11]},i[20],i[19],i[28]];var u=i[13];function m(r){let h={$$slots:{default:[W6]},$$scope:{ctx:r}};for(let y=0;y<l.length;y+=1)h=qi(h,l[y]);return{props:h}}return u&&(e=wl(u,m(i)),i[33](e),e.$on("click",i[34]),e.$on("click",i[35])),{c(){e&&Hi(e.$$.fragment),t=gn()},l(r){e&&$i(e.$$.fragment,r),t=gn()},m(r,h){e&&Gi(e,r,h),Dt(r,t,h),o=!0},p(r,h){const y=h[0]&536748031?wr(l,[h[0]&505413682&&{use:[[oh,{ripple:r[4],unbounded:!0,color:r[5],disabled:!!r[28].disabled,addClass:r[25],removeClass:r[26],addStyle:r[27]}],r[21],...r[1]]},h[0]&12719877&&{class:rr({[r[2]]:!0,"mdc-icon-button":!0,"mdc-icon-button--on":!r[22](r[0])&&r[0],"mdc-icon-button--touch":r[8],"mdc-icon-button--display-flex":r[9],"smui-icon-button--size-button":r[10]==="button","mdc-icon-button--reduced-size":r[10]==="mini"||r[10]==="button","mdc-card__action":r[23]==="card:action","mdc-card__action--icon":r[23]==="card:action","mdc-top-app-bar__navigation-icon":r[23]==="top-app-bar:navigation","mdc-top-app-bar__action-item":r[23]==="top-app-bar:action","mdc-snackbar__dismiss":r[23]==="snackbar:actions","mdc-data-table__pagination-button":r[23]==="data-table:pagination","mdc-data-table__sort-icon-button":r[23]==="data-table:sortable-header-cell","mdc-dialog__close":r[23]==="dialog:header"&&r[12]==="close",...r[17]})},h[0]&262152&&{style:Object.entries(r[18]).map(r_).concat([r[3]]).join(" ")},h[0]&4194305&&{"aria-pressed":r[22](r[0])?null:r[0]?"true":"false"},h[0]&193&&{"aria-label":r[0]?r[6]:r[7]},h[0]&64&&{"data-aria-label-on":r[6]},h[0]&128&&{"data-aria-label-off":r[7]},h[0]&16777216&&{"aria-describedby":r[24]},h[0]&2048&&{href:r[11]},h[0]&1048576&&po(r[20]),h[0]&524288&&po(r[19]),h[0]&268435456&&po(r[28])]):{};if(h[0]&256|h[1]&32&&(y.$$scope={dirty:h,ctx:r}),u!==(u=r[13])){if(e){Dr();const b=e;At(b.$$.fragment,1,0,()=>{Wi(b,1)}),Mr()}u?(e=wl(u,m(r)),r[33](e),e.$on("click",r[34]),e.$on("click",r[35]),Hi(e.$$.fragment),yt(e.$$.fragment,1),Gi(e,t.parentNode,t)):e=null}else u&&e.$set(y)},i(r){o||(e&&yt(e.$$.fragment,r),o=!0)},o(r){e&&At(e.$$.fragment,r),o=!1},d(r){i[33](null),r&&Oe(t),e&&Wi(e,r)}}}const r_=([i,e])=>`${i}: ${e};`;function Y6(i,e,t){let o;const l=["use","class","style","ripple","color","toggle","pressed","ariaLabelOn","ariaLabelOff","touch","displayFlex","size","href","action","component","getElement"];let u=Zn(e,l),{$$slots:m={},$$scope:r}=e;const h=go(mo());let y=()=>{};function b(Ke){return Ke===y}let{use:v=[]}=e,{class:w=""}=e,{style:x=""}=e,{ripple:C=!0}=e,{color:T=void 0}=e,{toggle:S=!1}=e,{pressed:M=y}=e,{ariaLabelOn:O=void 0}=e,{ariaLabelOff:V=void 0}=e,{touch:X=!1}=e,{displayFlex:Z=!0}=e,{size:ee="normal"}=e,{href:J=void 0}=e,{action:ie=void 0}=e,ke,Le,fe={},Te={},_e={},ve=ds("SMUI:icon-button:context"),rt=ds("SMUI:icon-button:aria-describedby"),{component:nt=J==null?v4:gg}=e,Tt=u.disabled;$o("SMUI:icon:context","icon-button");let We=null;Lc(()=>{Le&&Le.destroy()});function be(Ke){return Ke in fe?fe[Ke]:Fe().classList.contains(Ke)}function Ce(Ke){fe[Ke]||t(17,fe[Ke]=!0,fe)}function Be(Ke){(!(Ke in fe)||fe[Ke])&&t(17,fe[Ke]=!1,fe)}function le(Ke,Lt){Te[Ke]!=Lt&&(Lt===""||Lt==null?(delete Te[Ke],t(18,Te)):t(18,Te[Ke]=Lt,Te))}function Ee(Ke){var Lt;return Ke in _e?(Lt=_e[Ke])!==null&&Lt!==void 0?Lt:null:Fe().getAttribute(Ke)}function he(Ke,Lt){_e[Ke]!==Lt&&t(19,_e[Ke]=Lt,_e)}function me(Ke){t(0,M=Ke.isOn)}function Fe(){return ke.getElement()}function Xe(Ke){wn[Ke?"unshift":"push"](()=>{ke=Ke,t(15,ke)})}const lt=()=>Le&&Le.handleClick(),Ye=()=>ve==="top-app-bar:navigation"&&So(Fe(),"SMUITopAppBarIconButton:nav");return i.$$set=Ke=>{e=qi(qi({},e),uo(Ke)),t(28,u=Zn(e,l)),"use"in Ke&&t(1,v=Ke.use),"class"in Ke&&t(2,w=Ke.class),"style"in Ke&&t(3,x=Ke.style),"ripple"in Ke&&t(4,C=Ke.ripple),"color"in Ke&&t(5,T=Ke.color),"toggle"in Ke&&t(29,S=Ke.toggle),"pressed"in Ke&&t(0,M=Ke.pressed),"ariaLabelOn"in Ke&&t(6,O=Ke.ariaLabelOn),"ariaLabelOff"in Ke&&t(7,V=Ke.ariaLabelOff),"touch"in Ke&&t(8,X=Ke.touch),"displayFlex"in Ke&&t(9,Z=Ke.displayFlex),"size"in Ke&&t(10,ee=Ke.size),"href"in Ke&&t(11,J=Ke.href),"action"in Ke&&t(12,ie=Ke.action),"component"in Ke&&t(13,nt=Ke.component),"$$scope"in Ke&&t(36,r=Ke.$$scope)},i.$$.update=()=>{if(i.$$.dirty[0]&4096&&t(20,o=(()=>{if(ve==="data-table:pagination")switch(ie){case"first-page":return{"data-first-page":"true"};case"prev-page":return{"data-prev-page":"true"};case"next-page":return{"data-next-page":"true"};case"last-page":return{"data-last-page":"true"};default:return{"data-action":"true"}}else return ve==="dialog:header"?{"data-mdc-dialog-action":ie}:{action:ie}})()),Tt!==u.disabled){const Ke=Fe();"blur"in Ke&&Ke.blur(),t(30,Tt=u.disabled)}i.$$.dirty[0]&536969216|i.$$.dirty[1]&1&&ke&&Fe()&&S!==We&&(S&&!Le?(t(16,Le=new H6({addClass:Ce,hasClass:be,notifyChange:Ke=>{me(Ke),So(Fe(),"SMUIIconButtonToggle:change",Ke,void 0,!0)},removeClass:Be,getAttr:Ee,setAttr:he})),Le.init()):!S&&Le&&(Le.destroy(),t(16,Le=void 0),t(17,fe={}),t(19,_e={})),t(31,We=S)),i.$$.dirty[0]&65537&&Le&&!b(M)&&Le.isOn()!==M&&Le.toggle(M)},[M,v,w,x,C,T,O,V,X,Z,ee,J,ie,nt,Fe,ke,Le,fe,Te,_e,o,h,b,ve,rt,Ce,Be,le,u,S,Tt,We,m,Xe,lt,Ye,r]}class Fh extends xr{constructor(e){super(),Ar(this,e,Y6,X6,br,{use:1,class:2,style:3,ripple:4,color:5,toggle:29,pressed:0,ariaLabelOn:6,ariaLabelOff:7,touch:8,displayFlex:9,size:10,href:11,action:12,component:13,getElement:14},null,[-1,-1])}get getElement(){return this.$$.ctx[14]}}function Z6(i){let e;const t=i[9].default,o=fr(t,i,i[11],null);return{c(){o&&o.c()},l(l){o&&o.l(l)},m(l,u){o&&o.m(l,u),e=!0},p(l,u){o&&o.p&&(!e||u&2048)&&dr(o,t,l,l[11],e?mr(t,l[11],u,null):pr(l[11]),null)},i(l){e||(yt(o,l),e=!0)},o(l){At(o,l),e=!1},d(l){o&&o.d(l)}}}function K6(i){let e,t,o;const l=[{use:[i[4],...i[0]]},{class:rr({[i[1]]:!0,"mdc-button__label":i[5]==="button","mdc-fab__label":i[5]==="fab","mdc-tab__text-label":i[5]==="tab","mdc-image-list__label":i[5]==="image-list","mdc-snackbar__label":i[5]==="snackbar","mdc-banner__text":i[5]==="banner","mdc-segmented-button__label":i[5]==="segmented-button","mdc-data-table__pagination-rows-per-page-label":i[5]==="data-table:pagination","mdc-data-table__header-cell-label":i[5]==="data-table:sortable-header-cell"})},i[5]==="snackbar"?{"aria-atomic":"false"}:{},{tabindex:i[6]},i[7]];var u=i[2];function m(r){let h={$$slots:{default:[Z6]},$$scope:{ctx:r}};for(let y=0;y<l.length;y+=1)h=qi(h,l[y]);return{props:h}}return u&&(e=wl(u,m(i)),i[10](e)),{c(){e&&Hi(e.$$.fragment),t=gn()},l(r){e&&$i(e.$$.fragment,r),t=gn()},m(r,h){e&&Gi(e,r,h),Dt(r,t,h),o=!0},p(r,[h]){const y=h&243?wr(l,[h&17&&{use:[r[4],...r[0]]},h&34&&{class:rr({[r[1]]:!0,"mdc-button__label":r[5]==="button","mdc-fab__label":r[5]==="fab","mdc-tab__text-label":r[5]==="tab","mdc-image-list__label":r[5]==="image-list","mdc-snackbar__label":r[5]==="snackbar","mdc-banner__text":r[5]==="banner","mdc-segmented-button__label":r[5]==="segmented-button","mdc-data-table__pagination-rows-per-page-label":r[5]==="data-table:pagination","mdc-data-table__header-cell-label":r[5]==="data-table:sortable-header-cell"})},h&32&&po(r[5]==="snackbar"?{"aria-atomic":"false"}:{}),h&64&&{tabindex:r[6]},h&128&&po(r[7])]):{};if(h&2048&&(y.$$scope={dirty:h,ctx:r}),u!==(u=r[2])){if(e){Dr();const b=e;At(b.$$.fragment,1,0,()=>{Wi(b,1)}),Mr()}u?(e=wl(u,m(r)),r[10](e),Hi(e.$$.fragment),yt(e.$$.fragment,1),Gi(e,t.parentNode,t)):e=null}else u&&e.$set(y)},i(r){o||(e&&yt(e.$$.fragment,r),o=!0)},o(r){e&&At(e.$$.fragment,r),o=!1},d(r){i[10](null),r&&Oe(t),e&&Wi(e,r)}}}function J6(i,e,t){const o=["use","class","component","getElement"];let l=Zn(e,o),{$$slots:u={},$$scope:m}=e;const r=go(mo());let{use:h=[]}=e,{class:y=""}=e,b,{component:v=_4}=e;const w=ds("SMUI:label:context"),x=ds("SMUI:label:tabindex");function C(){return b.getElement()}function T(S){wn[S?"unshift":"push"](()=>{b=S,t(3,b)})}return i.$$set=S=>{e=qi(qi({},e),uo(S)),t(7,l=Zn(e,o)),"use"in S&&t(0,h=S.use),"class"in S&&t(1,y=S.class),"component"in S&&t(2,v=S.component),"$$scope"in S&&t(11,m=S.$$scope)},[h,y,v,b,r,w,x,l,C,u,T,m]}class Q6 extends xr{constructor(e){super(),Ar(this,e,J6,K6,br,{use:0,class:1,component:2,getElement:8})}get getElement(){return this.$$.ctx[8]}}function $6(i){let e;const t=i[9].default,o=fr(t,i,i[11],null);return{c(){o&&o.c()},l(l){o&&o.l(l)},m(l,u){o&&o.m(l,u),e=!0},p(l,u){o&&o.p&&(!e||u&2048)&&dr(o,t,l,l[11],e?mr(t,l[11],u,null):pr(l[11]),null)},i(l){e||(yt(o,l),e=!0)},o(l){At(o,l),e=!1},d(l){o&&o.d(l)}}}function e8(i){let e,t,o;const l=[{use:[i[5],...i[0]]},{class:rr({[i[1]]:!0,"mdc-button__icon":i[6]==="button","mdc-fab__icon":i[6]==="fab","mdc-icon-button__icon":i[6]==="icon-button","mdc-icon-button__icon--on":i[6]==="icon-button"&&i[2],"mdc-tab__icon":i[6]==="tab","mdc-banner__icon":i[6]==="banner","mdc-segmented-button__icon":i[6]==="segmented-button"})},{"aria-hidden":"true"},i[3]===t_?{focusable:"false",tabindex:"-1"}:{},i[7]];var u=i[3];function m(r){let h={$$slots:{default:[$6]},$$scope:{ctx:r}};for(let y=0;y<l.length;y+=1)h=qi(h,l[y]);return{props:h}}return u&&(e=wl(u,m(i)),i[10](e)),{c(){e&&Hi(e.$$.fragment),t=gn()},l(r){e&&$i(e.$$.fragment,r),t=gn()},m(r,h){e&&Gi(e,r,h),Dt(r,t,h),o=!0},p(r,[h]){const y=h&239?wr(l,[h&33&&{use:[r[5],...r[0]]},h&70&&{class:rr({[r[1]]:!0,"mdc-button__icon":r[6]==="button","mdc-fab__icon":r[6]==="fab","mdc-icon-button__icon":r[6]==="icon-button","mdc-icon-button__icon--on":r[6]==="icon-button"&&r[2],"mdc-tab__icon":r[6]==="tab","mdc-banner__icon":r[6]==="banner","mdc-segmented-button__icon":r[6]==="segmented-button"})},l[2],h&8&&po(r[3]===t_?{focusable:"false",tabindex:"-1"}:{}),h&128&&po(r[7])]):{};if(h&2048&&(y.$$scope={dirty:h,ctx:r}),u!==(u=r[3])){if(e){Dr();const b=e;At(b.$$.fragment,1,0,()=>{Wi(b,1)}),Mr()}u?(e=wl(u,m(r)),r[10](e),Hi(e.$$.fragment),yt(e.$$.fragment,1),Gi(e,t.parentNode,t)):e=null}else u&&e.$set(y)},i(r){o||(e&&yt(e.$$.fragment,r),o=!0)},o(r){e&&At(e.$$.fragment,r),o=!1},d(r){i[10](null),r&&Oe(t),e&&Wi(e,r)}}}function t8(i,e,t){const o=["use","class","on","component","getElement"];let l=Zn(e,o),{$$slots:u={},$$scope:m}=e;const r=go(mo());let{use:h=[]}=e,{class:y=""}=e,{on:b=!1}=e,v,{component:w=c6}=e;const x=ds("SMUI:icon:context");function C(){return v.getElement()}function T(S){wn[S?"unshift":"push"](()=>{v=S,t(4,v)})}return i.$$set=S=>{e=qi(qi({},e),uo(S)),t(7,l=Zn(e,o)),"use"in S&&t(0,h=S.use),"class"in S&&t(1,y=S.class),"on"in S&&t(2,b=S.on),"component"in S&&t(3,w=S.component),"$$scope"in S&&t(11,m=S.$$scope)},[h,y,b,w,v,r,x,l,C,u,T,m]}class i8 extends xr{constructor(e){super(),Ar(this,e,t8,e8,br,{use:0,class:1,on:2,component:3,getElement:8})}get getElement(){return this.$$.ctx[8]}}function n8(i){let e;const t=i[4].default,o=fr(t,i,i[3],null);return{c(){o&&o.c()},l(l){o&&o.l(l)},m(l,u){o&&o.m(l,u),e=!0},p(l,[u]){o&&o.p&&(!e||u&8)&&dr(o,t,l,l[3],e?mr(t,l[3],u,null):pr(l[3]),null)},i(l){e||(yt(o,l),e=!0)},o(l){At(o,l),e=!1},d(l){o&&o.d(l)}}}function r8(i,e,t){let o,{$$slots:l={},$$scope:u}=e,{key:m}=e,{value:r}=e;const h=Vl(r);return Wo(i,h,y=>t(5,o=y)),$o(m,h),Lc(()=>{h.set(void 0)}),i.$$set=y=>{"key"in y&&t(1,m=y.key),"value"in y&&t(2,r=y.value),"$$scope"in y&&t(3,u=y.$$scope)},i.$$.update=()=>{i.$$.dirty&4&&bl(h,o=r,o)},[h,m,r,u,l]}class g1 extends xr{constructor(e){super(),Ar(this,e,r8,n8,br,{key:1,value:2})}}const sh=Q6,tl=i8,zr={title:"Water Supply Map for Nanyuki Water",url:"https://nawasco.co.ke",logo:"/favicon.png",basePath:"",attribution:"\xA9Nanyuki Water and Serwerage Co., Ltd.",styles:[{title:"Satellite(water)",uri:"https://nawasco.github.io/mapbox-stylefiles/unvt/style-aerial-water.json"},{title:"UNVT Buildings(water)",uri:"https://nawasco.github.io/mapbox-stylefiles/unvt/style-buildings-water.json"},{title:"Satellite(sewer)",uri:"https://nawasco.github.io/mapbox-stylefiles/unvt/style-aerial-sewer.json"},{title:"UNVT Buildings(sewer)",uri:"https://nawasco.github.io/mapbox-stylefiles/unvt/style-buildings-sewer.json"},{title:"UN Vector Tile",uri:"https://nawasco.github.io/mapbox-stylefiles/unvt/style.json"},{title:"UNVT Buildings",uri:"https://nawasco.github.io/mapbox-stylefiles/unvt/style-buildings.json"}],center:[37.119039,-.024493],zoom:13,search:{url:"https://nawasco.github.io/vt/meter.geojson",target:["accountno","serialno"],format:i=>{const e=[];return["accountno","serialno","category"].forEach(o=>{if(i[o]){let l=i[o];switch(o){case"accountno":l=`A/C: ${l}`;break;case"serialno":l=`S/N: ${l}`;break}e.push(l)}}),e.length>0?e.join(", "):""},place_type:["meter"],placeholder:"Account No or S/N",zoom:16},popup:{target:["pipeline","sewerline","meter","kiosks","borehole","tank","booster-pump","chambers","manholes","pg-building"]},legend:{targets:{cadastral:"Cadastral","cadastral-annotation":"Cadastral Label",blocks:"Blocks","blocks-annotation":"Blocks Label",waterworks:"Waterworks",pipeline:"Pipeline",pipeline_annotation:"Pipeline Label",sewerline:"Sewer Pipeline",sewerline_annotation:"Sewer Pipeline Label",meter:"Consumer Meter",kiosks:"Water Kiosk",borehole:"Borehole",tank:"Tank","booster-pump":"Booster Pump",chambers:"Chamber",manholes:"Manhole"}},elevation:{url:"https://nawasco.github.io/ke-central-terrain/tiles/{z}/{x}/{y}.png",options:{tileSize:512,font:["Roboto Medium"],fontSize:12,fontHalo:1,mainColor:"#263238",haloColor:"#fff",units:"kilometers"}},valhalla:{url:"https://valhalla.water-gis.com",options:{Contours:[{time:3,distance:1,color:"ff0000"},{time:5,distance:2,color:"ffff00"},{time:10,distance:3,color:"0000ff"},{time:15,distance:4,color:"ff00ff"}],routing:{font:["Roboto Medium"],fontSize:14,fontHalo:3,fontColor:"#263238",fontHaloColor:"#fff",iconImage:"marker",iconSize:1}}},terrain:{source:"nanyuki-dem",exaggeration:1}};function es(i){return es=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},es(i)}var jl=Uint8Array,Ul=Uint16Array,Hd=Uint32Array,P1=new jl([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),M1=new jl([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),O2=new jl([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),b4=function(i,e){for(var t=new Ul(31),o=0;o<31;++o)t[o]=e+=1<<i[o-1];for(var l=new Hd(t[30]),o=1;o<30;++o)for(var u=t[o];u<t[o+1];++u)l[u]=u-t[o]<<5|o;return[t,l]},w4=b4(P1,2),x4=w4[0],F2=w4[1];x4[28]=258,F2[258]=28;var A4=b4(M1,0),o8=A4[0],o_=A4[1],R2=new Ul(32768);for(var As=0;As<32768;++As){var $h=(As&43690)>>>1|(As&21845)<<1;$h=($h&52428)>>>2|($h&13107)<<2,$h=($h&61680)>>>4|($h&3855)<<4,R2[As]=(($h&65280)>>>8|($h&255)<<8)>>>1}var rh=function(i,e,t){for(var o=i.length,l=0,u=new Ul(e);l<o;++l)++u[i[l]-1];var m=new Ul(e);for(l=0;l<e;++l)m[l]=m[l-1]+u[l-1]<<1;var r;if(t){r=new Ul(1<<e);var h=15-e;for(l=0;l<o;++l)if(i[l])for(var y=l<<4|i[l],b=e-i[l],v=m[i[l]-1]++<<b,w=v|(1<<b)-1;v<=w;++v)r[R2[v]>>>h]=y}else for(r=new Ul(o),l=0;l<o;++l)r[l]=R2[m[i[l]-1]++]>>>15-i[l];return r},gf=new jl(288);for(var As=0;As<144;++As)gf[As]=8;for(var As=144;As<256;++As)gf[As]=9;for(var As=256;As<280;++As)gf[As]=7;for(var As=280;As<288;++As)gf[As]=8;var Gd=new jl(32);for(var As=0;As<32;++As)Gd[As]=5;var s8=rh(gf,9,0),a8=rh(gf,9,1),l8=rh(Gd,5,0),u8=rh(Gd,5,1),Lm=function(i){for(var e=i[0],t=1;t<i.length;++t)i[t]>e&&(e=i[t]);return e},Sc=function(i,e,t){var o=e/8>>0;return(i[o]|i[o+1]<<8)>>>(e&7)&t},Pm=function(i,e){var t=e/8>>0;return(i[t]|i[t+1]<<8|i[t+2]<<16)>>>(e&7)},yg=function(i){return(i/8>>0)+(i&7&&1)},k4=function(i,e,t){(e==null||e<0)&&(e=0),(t==null||t>i.length)&&(t=i.length);var o=new(i instanceof Ul?Ul:i instanceof Hd?Hd:jl)(t-e);return o.set(i.subarray(e,t)),o},c8=function(i,e,t){var o=i.length,l=!e||t,u=!t||t.i;t||(t={}),e||(e=new jl(o*3));var m=function(Fe){var Xe=e.length;if(Fe>Xe){var lt=new jl(Math.max(Xe*2,Fe));lt.set(e),e=lt}},r=t.f||0,h=t.p||0,y=t.b||0,b=t.l,v=t.d,w=t.m,x=t.n,C=o*8;do{if(!b){t.f=r=Sc(i,h,1);var T=Sc(i,h+1,3);if(h+=3,T)if(T==1)b=a8,v=u8,w=9,x=5;else if(T==2){var V=Sc(i,h,31)+257,X=Sc(i,h+10,15)+4,Z=V+Sc(i,h+5,31)+1;h+=14;for(var ee=new jl(Z),J=new jl(19),ie=0;ie<X;++ie)J[O2[ie]]=Sc(i,h+ie*3,7);h+=X*3;var ke=Lm(J),Le=(1<<ke)-1;if(!u&&h+Z*(ke+7)>C)break;for(var fe=rh(J,ke,1),ie=0;ie<Z;){var Te=fe[Sc(i,h,Le)];h+=Te&15;var S=Te>>>4;if(S<16)ee[ie++]=S;else{var _e=0,ve=0;for(S==16?(ve=3+Sc(i,h,3),h+=2,_e=ee[ie-1]):S==17?(ve=3+Sc(i,h,7),h+=3):S==18&&(ve=11+Sc(i,h,127),h+=7);ve--;)ee[ie++]=_e}}var rt=ee.subarray(0,V),nt=ee.subarray(V);w=Lm(rt),x=Lm(nt),b=rh(rt,w,1),v=rh(nt,x,1)}else throw"invalid block type";else{var S=yg(h)+4,M=i[S-4]|i[S-3]<<8,O=S+M;if(O>o){if(u)throw"unexpected EOF";break}l&&m(y+M),e.set(i.subarray(S,O),y),t.b=y+=M,t.p=h=O*8;continue}if(h>C)throw"unexpected EOF"}l&&m(y+131072);for(var Tt=(1<<w)-1,We=(1<<x)-1,be=w+x+18;u||h+be<C;){var _e=b[Pm(i,h)&Tt],Ce=_e>>>4;if(h+=_e&15,h>C)throw"unexpected EOF";if(!_e)throw"invalid length/literal";if(Ce<256)e[y++]=Ce;else if(Ce==256){b=null;break}else{var Be=Ce-254;if(Ce>264){var ie=Ce-257,le=P1[ie];Be=Sc(i,h,(1<<le)-1)+x4[ie],h+=le}var Ee=v[Pm(i,h)&We],he=Ee>>>4;if(!Ee)throw"invalid distance";h+=Ee&15;var nt=o8[he];if(he>3){var le=M1[he];nt+=Pm(i,h)&(1<<le)-1,h+=le}if(h>C)throw"unexpected EOF";l&&m(y+131072);for(var me=y+Be;y<me;y+=4)e[y]=e[y-nt],e[y+1]=e[y+1-nt],e[y+2]=e[y+2-nt],e[y+3]=e[y+3-nt];y=me}}t.l=b,t.p=h,t.b=y,b&&(r=1,t.m=w,t.d=v,t.n=x)}while(!r);return y==e.length?e:k4(e,0,y)},Sh=function(i,e,t){t<<=e&7;var o=e/8>>0;i[o]|=t,i[o+1]|=t>>>8},wd=function(i,e,t){t<<=e&7;var o=e/8>>0;i[o]|=t,i[o+1]|=t>>>8,i[o+2]|=t>>>16},Mm=function(i,e){for(var t=[],o=0;o<i.length;++o)i[o]&&t.push({s:o,f:i[o]});var l=t.length,u=t.slice();if(!l)return[new jl(0),0];if(l==1){var m=new jl(t[0].s+1);return m[t[0].s]=1,[m,1]}t.sort(function(Z,ee){return Z.f-ee.f}),t.push({s:-1,f:25001});var r=t[0],h=t[1],y=0,b=1,v=2;for(t[0]={s:-1,f:r.f+h.f,l:r,r:h};b!=l-1;)r=t[t[y].f<t[v].f?y++:v++],h=t[y!=b&&t[y].f<t[v].f?y++:v++],t[b++]={s:-1,f:r.f+h.f,l:r,r:h};for(var w=u[0].s,o=1;o<l;++o)u[o].s>w&&(w=u[o].s);var x=new Ul(w+1),C=B2(t[b-1],x,0);if(C>e){var o=0,T=0,S=C-e,M=1<<S;for(u.sort(function(ee,J){return x[J.s]-x[ee.s]||ee.f-J.f});o<l;++o){var O=u[o].s;if(x[O]>e)T+=M-(1<<C-x[O]),x[O]=e;else break}for(T>>>=S;T>0;){var V=u[o].s;x[V]<e?T-=1<<e-x[V]++-1:++o}for(;o>=0&&T;--o){var X=u[o].s;x[X]==e&&(--x[X],++T)}C=e}return[new jl(x),C]},B2=function(i,e,t){return i.s==-1?Math.max(B2(i.l,e,t+1),B2(i.r,e,t+1)):e[i.s]=t},s_=function(i){for(var e=i.length;e&&!i[--e];);for(var t=new Ul(++e),o=0,l=i[0],u=1,m=function(h){t[o++]=h},r=1;r<=e;++r)if(i[r]==l&&r!=e)++u;else{if(!l&&u>2){for(;u>138;u-=138)m(32754);u>2&&(m(u>10?u-11<<5|28690:u-3<<5|12305),u=0)}else if(u>3){for(m(l),--u;u>6;u-=6)m(8304);u>2&&(m(u-3<<5|8208),u=0)}for(;u--;)m(l);u=1,l=i[r]}return[t.subarray(0,o),e]},xd=function(i,e){for(var t=0,o=0;o<e.length;++o)t+=i[o]*e[o];return t},i1=function(i,e,t){var o=t.length,l=yg(e+2);i[l]=o&255,i[l+1]=o>>>8,i[l+2]=i[l]^255,i[l+3]=i[l+1]^255;for(var u=0;u<o;++u)i[l+u+4]=t[u];return(l+4+o)*8},a_=function(i,e,t,o,l,u,m,r,h,y,b){Sh(e,b++,t),++l[256];for(var v=Mm(l,15),w=v[0],x=v[1],C=Mm(u,15),T=C[0],S=C[1],M=s_(w),O=M[0],V=M[1],X=s_(T),Z=X[0],ee=X[1],J=new Ul(19),ie=0;ie<O.length;++ie)J[O[ie]&31]++;for(var ie=0;ie<Z.length;++ie)J[Z[ie]&31]++;for(var ke=Mm(J,7),Le=ke[0],fe=ke[1],Te=19;Te>4&&!Le[O2[Te-1]];--Te);var _e=y+5<<3,ve=xd(l,gf)+xd(u,Gd)+m,rt=xd(l,w)+xd(u,T)+m+14+3*Te+xd(J,Le)+(2*J[16]+3*J[17]+7*J[18]);if(_e<=ve&&_e<=rt)return i1(e,b,i.subarray(h,h+y));var nt,Tt,We,be;if(Sh(e,b,1+(rt<ve)),b+=2,rt<ve){nt=rh(w,x,0),Tt=w,We=rh(T,S,0),be=T;var Ce=rh(Le,fe,0);Sh(e,b,V-257),Sh(e,b+5,ee-1),Sh(e,b+10,Te-4),b+=14;for(var ie=0;ie<Te;++ie)Sh(e,b+3*ie,Le[O2[ie]]);b+=3*Te;for(var Be=[O,Z],le=0;le<2;++le)for(var Ee=Be[le],ie=0;ie<Ee.length;++ie){var he=Ee[ie]&31;Sh(e,b,Ce[he]),b+=Le[he],he>15&&(Sh(e,b,Ee[ie]>>>5&127),b+=Ee[ie]>>>12)}}else nt=s8,Tt=gf,We=l8,be=Gd;for(var ie=0;ie<r;++ie)if(o[ie]>255){var he=o[ie]>>>18&31;wd(e,b,nt[he+257]),b+=Tt[he+257],he>7&&(Sh(e,b,o[ie]>>>23&31),b+=P1[he]);var me=o[ie]&31;wd(e,b,We[me]),b+=be[me],me>3&&(wd(e,b,o[ie]>>>5&8191),b+=M1[me])}else wd(e,b,nt[o[ie]]),b+=Tt[o[ie]];return wd(e,b,nt[256]),b+Tt[256]},h8=new Hd([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),f8=new jl(0),d8=function(i,e,t,o,l,u){var m=i.length,r=new jl(o+m+5*(1+Math.floor(m/7e3))+l),h=r.subarray(o,r.length-l),y=0;if(!e||m<8)for(var b=0;b<=m;b+=65535){var v=b+65535;v<m?y=i1(h,y,i.subarray(b,v)):(h[b]=u,y=i1(h,y,i.subarray(b,m)))}else{for(var w=h8[e-1],x=w>>>13,C=w&8191,T=(1<<t)-1,S=new Ul(32768),M=new Ul(T+1),O=Math.ceil(t/3),V=2*O,X=function(wt){return(i[wt]^i[wt+1]<<O^i[wt+2]<<V)&T},Z=new Hd(25e3),ee=new Ul(288),J=new Ul(32),ie=0,ke=0,b=0,Le=0,fe=0,Te=0;b<m;++b){var _e=X(b),ve=b&32767,rt=M[_e];if(S[ve]=rt,M[_e]=ve,fe<=b){var nt=m-b;if((ie>7e3||Le>24576)&&nt>423){y=a_(i,h,0,Z,ee,J,ke,Le,Te,b-Te,y),Le=ie=ke=0,Te=b;for(var Tt=0;Tt<286;++Tt)ee[Tt]=0;for(var Tt=0;Tt<30;++Tt)J[Tt]=0}var We=2,be=0,Ce=C,Be=ve-rt&32767;if(nt>2&&_e==X(b-Be))for(var le=Math.min(x,nt)-1,Ee=Math.min(32767,b),he=Math.min(258,nt);Be<=Ee&&--Ce&&ve!=rt;){if(i[b+We]==i[b+We-Be]){for(var me=0;me<he&&i[b+me]==i[b+me-Be];++me);if(me>We){if(We=me,be=Be,me>le)break;for(var Fe=Math.min(Be,me-2),Xe=0,Tt=0;Tt<Fe;++Tt){var lt=b-Be+Tt+32768&32767,Ye=S[lt],Ke=lt-Ye+32768&32767;Ke>Xe&&(Xe=Ke,rt=lt)}}}ve=rt,rt=S[ve],Be+=ve-rt+32768&32767}if(be){Z[Le++]=268435456|F2[We]<<18|o_[be];var Lt=F2[We]&31,$t=o_[be]&31;ke+=P1[Lt]+M1[$t],++ee[257+Lt],++J[$t],fe=b+We,++ie}else Z[Le++]=i[b],++ee[i[b]]}}y=a_(i,h,u,Z,ee,J,ke,Le,Te,b-Te,y),u||(y=i1(h,y,f8))}return k4(r,0,o+yg(y)+l)},p8=function(){var i=1,e=0;return{p:function(t){for(var o=i,l=e,u=t.length,m=0;m!=u;){for(var r=Math.min(m+5552,u);m<r;++m)o+=t[m],l+=o;o%=65521,l%=65521}i=o,e=l},d:function(){return(i>>>8<<16|(e&255)<<8|e>>>8)+((i&255)<<23)*2}}},m8=function(i,e,t,o,l){return d8(i,e.level==null?6:e.level,e.mem==null?Math.ceil(Math.max(8,Math.min(13,Math.log(i.length)))*1.5):12+e.mem,t,o,!l)},g8=function(i,e,t){for(;t;++e)i[e]=t,t>>>=8},y8=function(i,e){var t=e.level,o=t==0?0:t<6?1:t==9?3:2;i[0]=120,i[1]=o<<6|(o?32-2*o:1)},_8=function(i){if((i[0]&15)!=8||i[0]>>>4>7||(i[0]<<8|i[1])%31)throw"invalid zlib data";if(i[1]&32)throw"invalid zlib data: preset dictionaries not supported"};function z2(i,e){e===void 0&&(e={});var t=p8();t.p(i);var o=m8(i,e,2,4);return y8(o,e),g8(o,o.length-4,t.d()),o}function v8(i,e){return c8((_8(i),i.subarray(2,-4)),e)}var qr=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function Dm(){qr.console&&typeof qr.console.log=="function"&&qr.console.log.apply(qr.console,arguments)}var fs={log:Dm,warn:function(i){qr.console&&(typeof qr.console.warn=="function"?qr.console.warn.apply(qr.console,arguments):Dm.call(null,arguments))},error:function(i){qr.console&&(typeof qr.console.error=="function"?qr.console.error.apply(qr.console,arguments):Dm(i))}};function Om(i,e,t){var o=new XMLHttpRequest;o.open("GET",i),o.responseType="blob",o.onload=function(){Vf(o.response,e,t)},o.onerror=function(){fs.error("could not download file")},o.send()}function l_(i){var e=new XMLHttpRequest;e.open("HEAD",i,!1);try{e.send()}catch{}return e.status>=200&&e.status<=299}function Np(i){try{i.dispatchEvent(new MouseEvent("click"))}catch{var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),i.dispatchEvent(e)}}var Fd,N2,Vf=qr.saveAs||((typeof window>"u"?"undefined":es(window))!=="object"||window!==qr?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(i,e,t){var o=qr.URL||qr.webkitURL,l=document.createElement("a");e=e||i.name||"download",l.download=e,l.rel="noopener",typeof i=="string"?(l.href=i,l.origin!==location.origin?l_(l.href)?Om(i,e,t):Np(l,l.target="_blank"):Np(l)):(l.href=o.createObjectURL(i),setTimeout(function(){o.revokeObjectURL(l.href)},4e4),setTimeout(function(){Np(l)},0))}:"msSaveOrOpenBlob"in navigator?function(i,e,t){if(e=e||i.name||"download",typeof i=="string")if(l_(i))Om(i,e,t);else{var o=document.createElement("a");o.href=i,o.target="_blank",setTimeout(function(){Np(o)})}else navigator.msSaveOrOpenBlob(function(l,u){return u===void 0?u={autoBom:!1}:es(u)!=="object"&&(fs.warn("Deprecated: Expected third argument to be a object"),u={autoBom:!u}),u.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(l.type)?new Blob([String.fromCharCode(65279),l],{type:l.type}):l}(i,t),e)}:function(i,e,t,o){if((o=o||open("","_blank"))&&(o.document.title=o.document.body.innerText="downloading..."),typeof i=="string")return Om(i,e,t);var l=i.type==="application/octet-stream",u=/constructor/i.test(qr.HTMLElement)||qr.safari,m=/CriOS\/[\d]+/.test(navigator.userAgent);if((m||l&&u)&&(typeof FileReader>"u"?"undefined":es(FileReader))==="object"){var r=new FileReader;r.onloadend=function(){var b=r.result;b=m?b:b.replace(/^data:[^;]*;/,"data:attachment/file;"),o?o.location.href=b:location=b,o=null},r.readAsDataURL(i)}else{var h=qr.URL||qr.webkitURL,y=h.createObjectURL(i);o?o.location=y:location.href=y,o=null,setTimeout(function(){h.revokeObjectURL(y)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function S4(i){var e;i=i||"",this.ok=!1,i.charAt(0)=="#"&&(i=i.substr(1,6)),i={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[i=(i=i.replace(/ /g,"")).toLowerCase()]||i;for(var t=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(r){return[parseInt(r[1]),parseInt(r[2]),parseInt(r[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(r){return[parseInt(r[1],16),parseInt(r[2],16),parseInt(r[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(r){return[parseInt(r[1]+r[1],16),parseInt(r[2]+r[2],16),parseInt(r[3]+r[3],16)]}}],o=0;o<t.length;o++){var l=t[o].re,u=t[o].process,m=l.exec(i);m&&(e=u(m),this.r=e[0],this.g=e[1],this.b=e[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var r=this.r.toString(16),h=this.g.toString(16),y=this.b.toString(16);return r.length==1&&(r="0"+r),h.length==1&&(h="0"+h),y.length==1&&(y="0"+y),"#"+r+h+y}}/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function Fm(i,e){var t=i[0],o=i[1],l=i[2],u=i[3];t=ml(t,o,l,u,e[0],7,-680876936),u=ml(u,t,o,l,e[1],12,-389564586),l=ml(l,u,t,o,e[2],17,606105819),o=ml(o,l,u,t,e[3],22,-1044525330),t=ml(t,o,l,u,e[4],7,-176418897),u=ml(u,t,o,l,e[5],12,1200080426),l=ml(l,u,t,o,e[6],17,-1473231341),o=ml(o,l,u,t,e[7],22,-45705983),t=ml(t,o,l,u,e[8],7,1770035416),u=ml(u,t,o,l,e[9],12,-1958414417),l=ml(l,u,t,o,e[10],17,-42063),o=ml(o,l,u,t,e[11],22,-1990404162),t=ml(t,o,l,u,e[12],7,1804603682),u=ml(u,t,o,l,e[13],12,-40341101),l=ml(l,u,t,o,e[14],17,-1502002290),t=gl(t,o=ml(o,l,u,t,e[15],22,1236535329),l,u,e[1],5,-165796510),u=gl(u,t,o,l,e[6],9,-1069501632),l=gl(l,u,t,o,e[11],14,643717713),o=gl(o,l,u,t,e[0],20,-373897302),t=gl(t,o,l,u,e[5],5,-701558691),u=gl(u,t,o,l,e[10],9,38016083),l=gl(l,u,t,o,e[15],14,-660478335),o=gl(o,l,u,t,e[4],20,-405537848),t=gl(t,o,l,u,e[9],5,568446438),u=gl(u,t,o,l,e[14],9,-1019803690),l=gl(l,u,t,o,e[3],14,-187363961),o=gl(o,l,u,t,e[8],20,1163531501),t=gl(t,o,l,u,e[13],5,-1444681467),u=gl(u,t,o,l,e[2],9,-51403784),l=gl(l,u,t,o,e[7],14,1735328473),t=yl(t,o=gl(o,l,u,t,e[12],20,-1926607734),l,u,e[5],4,-378558),u=yl(u,t,o,l,e[8],11,-2022574463),l=yl(l,u,t,o,e[11],16,1839030562),o=yl(o,l,u,t,e[14],23,-35309556),t=yl(t,o,l,u,e[1],4,-1530992060),u=yl(u,t,o,l,e[4],11,1272893353),l=yl(l,u,t,o,e[7],16,-155497632),o=yl(o,l,u,t,e[10],23,-1094730640),t=yl(t,o,l,u,e[13],4,681279174),u=yl(u,t,o,l,e[0],11,-358537222),l=yl(l,u,t,o,e[3],16,-722521979),o=yl(o,l,u,t,e[6],23,76029189),t=yl(t,o,l,u,e[9],4,-640364487),u=yl(u,t,o,l,e[12],11,-421815835),l=yl(l,u,t,o,e[15],16,530742520),t=_l(t,o=yl(o,l,u,t,e[2],23,-995338651),l,u,e[0],6,-198630844),u=_l(u,t,o,l,e[7],10,1126891415),l=_l(l,u,t,o,e[14],15,-1416354905),o=_l(o,l,u,t,e[5],21,-57434055),t=_l(t,o,l,u,e[12],6,1700485571),u=_l(u,t,o,l,e[3],10,-1894986606),l=_l(l,u,t,o,e[10],15,-1051523),o=_l(o,l,u,t,e[1],21,-2054922799),t=_l(t,o,l,u,e[8],6,1873313359),u=_l(u,t,o,l,e[15],10,-30611744),l=_l(l,u,t,o,e[6],15,-1560198380),o=_l(o,l,u,t,e[13],21,1309151649),t=_l(t,o,l,u,e[4],6,-145523070),u=_l(u,t,o,l,e[11],10,-1120210379),l=_l(l,u,t,o,e[2],15,718787259),o=_l(o,l,u,t,e[9],21,-343485551),i[0]=uf(t,i[0]),i[1]=uf(o,i[1]),i[2]=uf(l,i[2]),i[3]=uf(u,i[3])}function D1(i,e,t,o,l,u){return e=uf(uf(e,i),uf(o,u)),uf(e<<l|e>>>32-l,t)}function ml(i,e,t,o,l,u,m){return D1(e&t|~e&o,i,e,l,u,m)}function gl(i,e,t,o,l,u,m){return D1(e&o|t&~o,i,e,l,u,m)}function yl(i,e,t,o,l,u,m){return D1(e^t^o,i,e,l,u,m)}function _l(i,e,t,o,l,u,m){return D1(t^(e|~o),i,e,l,u,m)}function C4(i){var e,t=i.length,o=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=i.length;e+=64)Fm(o,b8(i.substring(e-64,e)));i=i.substring(e-64);var l=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<i.length;e++)l[e>>2]|=i.charCodeAt(e)<<(e%4<<3);if(l[e>>2]|=128<<(e%4<<3),e>55)for(Fm(o,l),e=0;e<16;e++)l[e]=0;return l[14]=8*t,Fm(o,l),o}function b8(i){var e,t=[];for(e=0;e<64;e+=4)t[e>>2]=i.charCodeAt(e)+(i.charCodeAt(e+1)<<8)+(i.charCodeAt(e+2)<<16)+(i.charCodeAt(e+3)<<24);return t}Fd=qr.atob.bind(qr),N2=qr.btoa.bind(qr);var u_="0123456789abcdef".split("");function w8(i){for(var e="",t=0;t<4;t++)e+=u_[i>>8*t+4&15]+u_[i>>8*t&15];return e}function x8(i){return String.fromCharCode((255&i)>>0,(65280&i)>>8,(16711680&i)>>16,(4278190080&i)>>24)}function j2(i){return C4(i).map(x8).join("")}var A8=function(i){for(var e=0;e<i.length;e++)i[e]=w8(i[e]);return i.join("")}(C4("hello"))!="5d41402abc4b2a76b9719d911017c592";function uf(i,e){if(A8){var t=(65535&i)+(65535&e);return(i>>16)+(e>>16)+(t>>16)<<16|65535&t}return i+e&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function U2(i,e){var t,o,l,u;if(i!==t){for(var m=(l=i,u=1+(256/i.length>>0),new Array(u+1).join(l)),r=[],h=0;h<256;h++)r[h]=h;var y=0;for(h=0;h<256;h++){var b=r[h];y=(y+b+m.charCodeAt(h))%256,r[h]=r[y],r[y]=b}t=i,o=r}else r=o;var v=e.length,w=0,x=0,C="";for(h=0;h<v;h++)x=(x+(b=r[w=(w+1)%256]))%256,r[w]=r[x],r[x]=b,m=r[(r[w]+r[x])%256],C+=String.fromCharCode(e.charCodeAt(h)^m);return C}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var c_={print:4,modify:8,copy:16,"annot-forms":32};function M0(i,e,t,o){this.v=1,this.r=2;var l=192;i.forEach(function(r){if(c_.perm!==void 0)throw new Error("Invalid permission: "+r);l+=c_[r]}),this.padding="(\xBFN^Nu\x8AAd\0NV\xFF\xFA\b..\0\xB6\xD0h>\x80/\f\xA9\xFEdSiz";var u=(e+this.padding).substr(0,32),m=(t+this.padding).substr(0,32);this.O=this.processOwnerPassword(u,m),this.P=-(1+(255^l)),this.encryptionKey=j2(u+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(o)).substr(0,5),this.U=U2(this.encryptionKey,this.padding)}function D0(i){if(/[^\u0000-\u00ff]/.test(i))throw new Error("Invalid PDF Name Object: "+i+", Only accept ASCII characters.");for(var e="",t=i.length,o=0;o<t;o++){var l=i.charCodeAt(o);l<33||l===35||l===37||l===40||l===41||l===47||l===60||l===62||l===91||l===93||l===123||l===125||l>126?e+="#"+("0"+l.toString(16)).slice(-2):e+=i[o]}return e}function h_(i){if(es(i)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var e={};this.subscribe=function(t,o,l){if(l=l||!1,typeof t!="string"||typeof o!="function"||typeof l!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");e.hasOwnProperty(t)||(e[t]={});var u=Math.random().toString(35);return e[t][u]=[o,!!l],u},this.unsubscribe=function(t){for(var o in e)if(e[o][t])return delete e[o][t],Object.keys(e[o]).length===0&&delete e[o],!0;return!1},this.publish=function(t){if(e.hasOwnProperty(t)){var o=Array.prototype.slice.call(arguments,1),l=[];for(var u in e[t]){var m=e[t][u];try{m[0].apply(i,o)}catch(r){qr.console&&fs.error("jsPDF PubSub Error",r.message,r)}m[1]&&l.push(u)}l.length&&l.forEach(this.unsubscribe)}},this.getTopics=function(){return e}}function y1(i){if(!(this instanceof y1))return new y1(i);var e="opacity,stroke-opacity".split(",");for(var t in i)i.hasOwnProperty(t)&&e.indexOf(t)>=0&&(this[t]=i[t]);this.id="",this.objectNumber=-1}function E4(i,e){this.gState=i,this.matrix=e,this.id="",this.objectNumber=-1}function qf(i,e,t,o,l){if(!(this instanceof qf))return new qf(i,e,t,o,l);this.type=i==="axial"?2:3,this.coords=e,this.colors=t,E4.call(this,o,l)}function B0(i,e,t,o,l){if(!(this instanceof B0))return new B0(i,e,t,o,l);this.boundingBox=i,this.xStep=e,this.yStep=t,this.stream="",this.cloneIndex=0,E4.call(this,o,l)}function Vr(i){var e,t=typeof arguments[0]=="string"?arguments[0]:"p",o=arguments[1],l=arguments[2],u=arguments[3],m=[],r=1,h=16,y="S",b=null;es(i=i||{})==="object"&&(t=i.orientation,o=i.unit||o,l=i.format||l,u=i.compress||i.compressPdf||u,(b=i.encryption||null)!==null&&(b.userPassword=b.userPassword||"",b.ownerPassword=b.ownerPassword||"",b.userPermissions=b.userPermissions||[]),r=typeof i.userUnit=="number"?Math.abs(i.userUnit):1,i.precision!==void 0&&(e=i.precision),i.floatPrecision!==void 0&&(h=i.floatPrecision),y=i.defaultPathOperation||"S"),m=i.filters||(u===!0?["FlateEncode"]:m),o=o||"mm",t=(""+(t||"P")).toLowerCase();var v=i.putOnlyUsedFonts||!1,w={},x={internal:{},__private__:{}};x.__private__.PubSub=h_;var C="1.3",T=x.__private__.getPdfVersion=function(){return C};x.__private__.setPdfVersion=function(se){C=se};var S={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};x.__private__.getPageFormats=function(){return S};var M=x.__private__.getPageFormat=function(se){return S[se]};l=l||"a4";var O={COMPAT:"compat",ADVANCED:"advanced"},V=O.COMPAT;function X(){this.saveGraphicsState(),$e(new ln(vt,0,0,-vt,0,ma()*vt).toString()+" cm"),this.setFontSize(this.getFontSize()/vt),y="n",V=O.ADVANCED}function Z(){this.restoreGraphicsState(),y="S",V=O.COMPAT}var ee=x.__private__.combineFontStyleAndFontWeight=function(se,Ue){if(se=="bold"&&Ue=="normal"||se=="bold"&&Ue==400||se=="normal"&&Ue=="italic"||se=="bold"&&Ue=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return Ue&&(se=Ue==400||Ue==="normal"?se==="italic"?"italic":"normal":Ue!=700&&Ue!=="bold"||se!=="normal"?(Ue==700?"bold":Ue)+""+se:"bold"),se};x.advancedAPI=function(se){var Ue=V===O.COMPAT;return Ue&&X.call(this),typeof se!="function"||(se(this),Ue&&Z.call(this)),this},x.compatAPI=function(se){var Ue=V===O.ADVANCED;return Ue&&Z.call(this),typeof se!="function"||(se(this),Ue&&X.call(this)),this},x.isAdvancedAPI=function(){return V===O.ADVANCED};var J,ie=function(se){if(V!==O.ADVANCED)throw new Error(se+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},ke=x.roundToPrecision=x.__private__.roundToPrecision=function(se,Ue){var kt=e||Ue;if(isNaN(se)||isNaN(kt))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return se.toFixed(kt).replace(/0+$/,"")};J=x.hpf=x.__private__.hpf=typeof h=="number"?function(se){if(isNaN(se))throw new Error("Invalid argument passed to jsPDF.hpf");return ke(se,h)}:h==="smart"?function(se){if(isNaN(se))throw new Error("Invalid argument passed to jsPDF.hpf");return ke(se,se>-1&&se<1?16:5)}:function(se){if(isNaN(se))throw new Error("Invalid argument passed to jsPDF.hpf");return ke(se,16)};var Le=x.f2=x.__private__.f2=function(se){if(isNaN(se))throw new Error("Invalid argument passed to jsPDF.f2");return ke(se,2)},fe=x.__private__.f3=function(se){if(isNaN(se))throw new Error("Invalid argument passed to jsPDF.f3");return ke(se,3)},Te=x.scale=x.__private__.scale=function(se){if(isNaN(se))throw new Error("Invalid argument passed to jsPDF.scale");return V===O.COMPAT?se*vt:V===O.ADVANCED?se:void 0},_e=function(se){return V===O.COMPAT?ma()-se:V===O.ADVANCED?se:void 0},ve=function(se){return Te(_e(se))};x.__private__.setPrecision=x.setPrecision=function(se){typeof parseInt(se,10)=="number"&&(e=parseInt(se,10))};var rt,nt="00000000000000000000000000000000",Tt=x.__private__.getFileId=function(){return nt},We=x.__private__.setFileId=function(se){return nt=se!==void 0&&/^[a-fA-F0-9]{32}$/.test(se)?se.toUpperCase():nt.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),b!==null&&(U=new M0(b.userPermissions,b.userPassword,b.ownerPassword,nt)),nt};x.setFileId=function(se){return We(se),this},x.getFileId=function(){return Tt()};var be=x.__private__.convertDateToPDFDate=function(se){var Ue=se.getTimezoneOffset(),kt=Ue<0?"+":"-",Xt=Math.floor(Math.abs(Ue/60)),hi=Math.abs(Ue%60),Zi=[kt,he(Xt),"'",he(hi),"'"].join("");return["D:",se.getFullYear(),he(se.getMonth()+1),he(se.getDate()),he(se.getHours()),he(se.getMinutes()),he(se.getSeconds()),Zi].join("")},Ce=x.__private__.convertPDFDateToDate=function(se){var Ue=parseInt(se.substr(2,4),10),kt=parseInt(se.substr(6,2),10)-1,Xt=parseInt(se.substr(8,2),10),hi=parseInt(se.substr(10,2),10),Zi=parseInt(se.substr(12,2),10),hn=parseInt(se.substr(14,2),10);return new Date(Ue,kt,Xt,hi,Zi,hn,0)},Be=x.__private__.setCreationDate=function(se){var Ue;if(se===void 0&&(se=new Date),se instanceof Date)Ue=be(se);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(se))throw new Error("Invalid argument passed to jsPDF.setCreationDate");Ue=se}return rt=Ue},le=x.__private__.getCreationDate=function(se){var Ue=rt;return se==="jsDate"&&(Ue=Ce(rt)),Ue};x.setCreationDate=function(se){return Be(se),this},x.getCreationDate=function(se){return le(se)};var Ee,he=x.__private__.padd2=function(se){return("0"+parseInt(se)).slice(-2)},me=x.__private__.padd2Hex=function(se){return("00"+(se=se.toString())).substr(se.length)},Fe=0,Xe=[],lt=[],Ye=0,Ke=[],Lt=[],$t=!1,dt=lt,wt=function(){Fe=0,Ye=0,lt=[],Xe=[],Ke=[],ct=Pe(),gt=Pe()};x.__private__.setCustomOutputDestination=function(se){$t=!0,dt=se};var bt=function(se){$t||(dt=se)};x.__private__.resetCustomOutputDestination=function(){$t=!1,dt=lt};var $e=x.__private__.out=function(se){return se=se.toString(),Ye+=se.length+1,dt.push(se),dt},Yt=x.__private__.write=function(se){return $e(arguments.length===1?se.toString():Array.prototype.join.call(arguments," "))},li=x.__private__.getArrayBuffer=function(se){for(var Ue=se.length,kt=new ArrayBuffer(Ue),Xt=new Uint8Array(kt);Ue--;)Xt[Ue]=se.charCodeAt(Ue);return kt},Zt=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];x.__private__.getStandardFonts=function(){return Zt};var Ci=i.fontSize||16;x.__private__.setFontSize=x.setFontSize=function(se){return Ci=V===O.ADVANCED?se/vt:se,this};var Li,Vt=x.__private__.getFontSize=x.getFontSize=function(){return V===O.COMPAT?Ci:Ci*vt},mi=i.R2L||!1;x.__private__.setR2L=x.setR2L=function(se){return mi=se,this},x.__private__.getR2L=x.getR2L=function(){return mi};var Qi,xi=x.__private__.setZoomMode=function(se){var Ue=[void 0,null,"fullwidth","fullheight","fullpage","original"];if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(se))Li=se;else if(isNaN(se)){if(Ue.indexOf(se)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+se+'" is not recognized.');Li=se}else Li=parseInt(se,10)};x.__private__.getZoomMode=function(){return Li};var Jt,Me=x.__private__.setPageMode=function(se){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(se)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+se+'" is not recognized.');Qi=se};x.__private__.getPageMode=function(){return Qi};var Q=x.__private__.setLayoutMode=function(se){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(se)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+se+'" is not recognized.');Jt=se};x.__private__.getLayoutMode=function(){return Jt},x.__private__.setDisplayMode=x.setDisplayMode=function(se,Ue,kt){return xi(se),Q(Ue),Me(kt),this};var ae={title:"",subject:"",author:"",keywords:"",creator:""};x.__private__.getDocumentProperty=function(se){if(Object.keys(ae).indexOf(se)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return ae[se]},x.__private__.getDocumentProperties=function(){return ae},x.__private__.setDocumentProperties=x.setProperties=x.setDocumentProperties=function(se){for(var Ue in ae)ae.hasOwnProperty(Ue)&&se[Ue]&&(ae[Ue]=se[Ue]);return this},x.__private__.setDocumentProperty=function(se,Ue){if(Object.keys(ae).indexOf(se)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return ae[se]=Ue};var et,vt,Wt,di,xn,Mn={},fn={},Bi=[],en={},Xn={},Yn={},Kr={},jn=null,cn=0,mn=[],er=new h_(x),yn=i.hotfixes||[],Ln={},lr={},oo=[],ln=function se(Ue,kt,Xt,hi,Zi,hn){if(!(this instanceof se))return new se(Ue,kt,Xt,hi,Zi,hn);isNaN(Ue)&&(Ue=1),isNaN(kt)&&(kt=0),isNaN(Xt)&&(Xt=0),isNaN(hi)&&(hi=1),isNaN(Zi)&&(Zi=0),isNaN(hn)&&(hn=0),this._matrix=[Ue,kt,Xt,hi,Zi,hn]};Object.defineProperty(ln.prototype,"sx",{get:function(){return this._matrix[0]},set:function(se){this._matrix[0]=se}}),Object.defineProperty(ln.prototype,"shy",{get:function(){return this._matrix[1]},set:function(se){this._matrix[1]=se}}),Object.defineProperty(ln.prototype,"shx",{get:function(){return this._matrix[2]},set:function(se){this._matrix[2]=se}}),Object.defineProperty(ln.prototype,"sy",{get:function(){return this._matrix[3]},set:function(se){this._matrix[3]=se}}),Object.defineProperty(ln.prototype,"tx",{get:function(){return this._matrix[4]},set:function(se){this._matrix[4]=se}}),Object.defineProperty(ln.prototype,"ty",{get:function(){return this._matrix[5]},set:function(se){this._matrix[5]=se}}),Object.defineProperty(ln.prototype,"a",{get:function(){return this._matrix[0]},set:function(se){this._matrix[0]=se}}),Object.defineProperty(ln.prototype,"b",{get:function(){return this._matrix[1]},set:function(se){this._matrix[1]=se}}),Object.defineProperty(ln.prototype,"c",{get:function(){return this._matrix[2]},set:function(se){this._matrix[2]=se}}),Object.defineProperty(ln.prototype,"d",{get:function(){return this._matrix[3]},set:function(se){this._matrix[3]=se}}),Object.defineProperty(ln.prototype,"e",{get:function(){return this._matrix[4]},set:function(se){this._matrix[4]=se}}),Object.defineProperty(ln.prototype,"f",{get:function(){return this._matrix[5]},set:function(se){this._matrix[5]=se}}),Object.defineProperty(ln.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(ln.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(ln.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(ln.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),ln.prototype.join=function(se){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(J).join(se)},ln.prototype.multiply=function(se){var Ue=se.sx*this.sx+se.shy*this.shx,kt=se.sx*this.shy+se.shy*this.sy,Xt=se.shx*this.sx+se.sy*this.shx,hi=se.shx*this.shy+se.sy*this.sy,Zi=se.tx*this.sx+se.ty*this.shx+this.tx,hn=se.tx*this.shy+se.ty*this.sy+this.ty;return new ln(Ue,kt,Xt,hi,Zi,hn)},ln.prototype.decompose=function(){var se=this.sx,Ue=this.shy,kt=this.shx,Xt=this.sy,hi=this.tx,Zi=this.ty,hn=Math.sqrt(se*se+Ue*Ue),Jn=(se/=hn)*kt+(Ue/=hn)*Xt;kt-=se*Jn,Xt-=Ue*Jn;var kr=Math.sqrt(kt*kt+Xt*Xt);return Jn/=kr,se*(Xt/=kr)<Ue*(kt/=kr)&&(se=-se,Ue=-Ue,Jn=-Jn,hn=-hn),{scale:new ln(hn,0,0,kr,0,0),translate:new ln(1,0,0,1,hi,Zi),rotate:new ln(se,Ue,-Ue,se,0,0),skew:new ln(1,0,Jn,1,0,0)}},ln.prototype.toString=function(se){return this.join(" ")},ln.prototype.inversed=function(){var se=this.sx,Ue=this.shy,kt=this.shx,Xt=this.sy,hi=this.tx,Zi=this.ty,hn=1/(se*Xt-Ue*kt),Jn=Xt*hn,kr=-Ue*hn,jr=-kt*hn,Xr=se*hn;return new ln(Jn,kr,jr,Xr,-Jn*hi-jr*Zi,-kr*hi-Xr*Zi)},ln.prototype.applyToPoint=function(se){var Ue=se.x*this.sx+se.y*this.shx+this.tx,kt=se.x*this.shy+se.y*this.sy+this.ty;return new Gl(Ue,kt)},ln.prototype.applyToRectangle=function(se){var Ue=this.applyToPoint(se),kt=this.applyToPoint(new Gl(se.x+se.w,se.y+se.h));return new gu(Ue.x,Ue.y,kt.x-Ue.x,kt.y-Ue.y)},ln.prototype.clone=function(){var se=this.sx,Ue=this.shy,kt=this.shx,Xt=this.sy,hi=this.tx,Zi=this.ty;return new ln(se,Ue,kt,Xt,hi,Zi)},x.Matrix=ln;var qe=x.matrixMult=function(se,Ue){return Ue.multiply(se)},To=new ln(1,0,0,1,0,0);x.unitMatrix=x.identityMatrix=To;var bo=function(se,Ue){if(!Xn[se]){var kt=(Ue instanceof qf?"Sh":"P")+(Object.keys(en).length+1).toString(10);Ue.id=kt,Xn[se]=kt,en[kt]=Ue,er.publish("addPattern",Ue)}};x.ShadingPattern=qf,x.TilingPattern=B0,x.addShadingPattern=function(se,Ue){return ie("addShadingPattern()"),bo(se,Ue),this},x.beginTilingPattern=function(se){ie("beginTilingPattern()"),Bn(se.boundingBox[0],se.boundingBox[1],se.boundingBox[2]-se.boundingBox[0],se.boundingBox[3]-se.boundingBox[1],se.matrix)},x.endTilingPattern=function(se,Ue){ie("endTilingPattern()"),Ue.stream=Lt[Ee].join(`
`),bo(se,Ue),er.publish("endTilingPattern",Ue),oo.pop().restore()};var co=x.__private__.newObject=function(){var se=Pe();return Ie(se,!0),se},Pe=x.__private__.newObjectDeferred=function(){return Fe++,Xe[Fe]=function(){return Ye},Fe},Ie=function(se,Ue){return Ue=typeof Ue=="boolean"&&Ue,Xe[se]=Ye,Ue&&$e(se+" 0 obj"),se},He=x.__private__.newAdditionalObject=function(){var se={objId:Pe(),content:""};return Ke.push(se),se},ct=Pe(),gt=Pe(),Rt=x.__private__.decodeColorString=function(se){var Ue=se.split(" ");if(Ue.length!==2||Ue[1]!=="g"&&Ue[1]!=="G")Ue.length===5&&(Ue[4]==="k"||Ue[4]==="K")&&(Ue=[(1-Ue[0])*(1-Ue[3]),(1-Ue[1])*(1-Ue[3]),(1-Ue[2])*(1-Ue[3]),"r"]);else{var kt=parseFloat(Ue[0]);Ue=[kt,kt,kt,"r"]}for(var Xt="#",hi=0;hi<3;hi++)Xt+=("0"+Math.floor(255*parseFloat(Ue[hi])).toString(16)).slice(-2);return Xt},Ge=x.__private__.encodeColorString=function(se){var Ue;typeof se=="string"&&(se={ch1:se});var kt=se.ch1,Xt=se.ch2,hi=se.ch3,Zi=se.ch4,hn=se.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof kt=="string"&&kt.charAt(0)!=="#"){var Jn=new S4(kt);if(Jn.ok)kt=Jn.toHex();else if(!/^\d*\.?\d*$/.test(kt))throw new Error('Invalid color "'+kt+'" passed to jsPDF.encodeColorString.')}if(typeof kt=="string"&&/^#[0-9A-Fa-f]{3}$/.test(kt)&&(kt="#"+kt[1]+kt[1]+kt[2]+kt[2]+kt[3]+kt[3]),typeof kt=="string"&&/^#[0-9A-Fa-f]{6}$/.test(kt)){var kr=parseInt(kt.substr(1),16);kt=kr>>16&255,Xt=kr>>8&255,hi=255&kr}if(Xt===void 0||Zi===void 0&&kt===Xt&&Xt===hi)if(typeof kt=="string")Ue=kt+" "+hn[0];else switch(se.precision){case 2:Ue=Le(kt/255)+" "+hn[0];break;case 3:default:Ue=fe(kt/255)+" "+hn[0]}else if(Zi===void 0||es(Zi)==="object"){if(Zi&&!isNaN(Zi.a)&&Zi.a===0)return Ue=["1.","1.","1.",hn[1]].join(" ");if(typeof kt=="string")Ue=[kt,Xt,hi,hn[1]].join(" ");else switch(se.precision){case 2:Ue=[Le(kt/255),Le(Xt/255),Le(hi/255),hn[1]].join(" ");break;default:case 3:Ue=[fe(kt/255),fe(Xt/255),fe(hi/255),hn[1]].join(" ")}}else if(typeof kt=="string")Ue=[kt,Xt,hi,Zi,hn[2]].join(" ");else switch(se.precision){case 2:Ue=[Le(kt),Le(Xt),Le(hi),Le(Zi),hn[2]].join(" ");break;case 3:default:Ue=[fe(kt),fe(Xt),fe(hi),fe(Zi),hn[2]].join(" ")}return Ue},Ht=x.__private__.getFilters=function(){return m},Bt=x.__private__.putStream=function(se){var Ue=(se=se||{}).data||"",kt=se.filters||Ht(),Xt=se.alreadyAppliedFilters||[],hi=se.addLength1||!1,Zi=Ue.length,hn=se.objectId,Jn=function(Es){return Es};if(b!==null&&hn===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");b!==null&&(Jn=U.encryptor(hn,0));var kr={};kt===!0&&(kt=["FlateEncode"]);var jr=se.additionalKeyValues||[],Xr=(kr=Vr.API.processDataByFilters!==void 0?Vr.API.processDataByFilters(Ue,kt):{data:Ue,reverseChain:[]}).reverseChain+(Array.isArray(Xt)?Xt.join(" "):Xt.toString());if(kr.data.length!==0&&(jr.push({key:"Length",value:kr.data.length}),hi===!0&&jr.push({key:"Length1",value:Zi})),Xr.length!=0)if(Xr.split("/").length-1==1)jr.push({key:"Filter",value:Xr});else{jr.push({key:"Filter",value:"["+Xr+"]"});for(var $r=0;$r<jr.length;$r+=1)if(jr[$r].key==="DecodeParms"){for(var Fo=[],No=0;No<kr.reverseChain.split("/").length-1;No+=1)Fo.push("null");Fo.push(jr[$r].value),jr[$r].value="["+Fo.join(" ")+"]"}}$e("<<");for(var Ho=0;Ho<jr.length;Ho++)$e("/"+jr[Ho].key+" "+jr[Ho].value);$e(">>"),kr.data.length!==0&&($e("stream"),$e(Jn(kr.data)),$e("endstream"))},ei=x.__private__.putPage=function(se){var Ue=se.number,kt=se.data,Xt=se.objId,hi=se.contentsObjId;Ie(Xt,!0),$e("<</Type /Page"),$e("/Parent "+se.rootDictionaryObjId+" 0 R"),$e("/Resources "+se.resourceDictionaryObjId+" 0 R"),$e("/MediaBox ["+parseFloat(J(se.mediaBox.bottomLeftX))+" "+parseFloat(J(se.mediaBox.bottomLeftY))+" "+J(se.mediaBox.topRightX)+" "+J(se.mediaBox.topRightY)+"]"),se.cropBox!==null&&$e("/CropBox ["+J(se.cropBox.bottomLeftX)+" "+J(se.cropBox.bottomLeftY)+" "+J(se.cropBox.topRightX)+" "+J(se.cropBox.topRightY)+"]"),se.bleedBox!==null&&$e("/BleedBox ["+J(se.bleedBox.bottomLeftX)+" "+J(se.bleedBox.bottomLeftY)+" "+J(se.bleedBox.topRightX)+" "+J(se.bleedBox.topRightY)+"]"),se.trimBox!==null&&$e("/TrimBox ["+J(se.trimBox.bottomLeftX)+" "+J(se.trimBox.bottomLeftY)+" "+J(se.trimBox.topRightX)+" "+J(se.trimBox.topRightY)+"]"),se.artBox!==null&&$e("/ArtBox ["+J(se.artBox.bottomLeftX)+" "+J(se.artBox.bottomLeftY)+" "+J(se.artBox.topRightX)+" "+J(se.artBox.topRightY)+"]"),typeof se.userUnit=="number"&&se.userUnit!==1&&$e("/UserUnit "+se.userUnit),er.publish("putPage",{objId:Xt,pageContext:mn[Ue],pageNumber:Ue,page:kt}),$e("/Contents "+hi+" 0 R"),$e(">>"),$e("endobj");var Zi=kt.join(`
`);return V===O.ADVANCED&&(Zi+=`
Q`),Ie(hi,!0),Bt({data:Zi,filters:Ht(),objectId:hi}),$e("endobj"),Xt},_t=x.__private__.putPages=function(){var se,Ue,kt=[];for(se=1;se<=cn;se++)mn[se].objId=Pe(),mn[se].contentsObjId=Pe();for(se=1;se<=cn;se++)kt.push(ei({number:se,data:Lt[se],objId:mn[se].objId,contentsObjId:mn[se].contentsObjId,mediaBox:mn[se].mediaBox,cropBox:mn[se].cropBox,bleedBox:mn[se].bleedBox,trimBox:mn[se].trimBox,artBox:mn[se].artBox,userUnit:mn[se].userUnit,rootDictionaryObjId:ct,resourceDictionaryObjId:gt}));Ie(ct,!0),$e("<</Type /Pages");var Xt="/Kids [";for(Ue=0;Ue<cn;Ue++)Xt+=kt[Ue]+" 0 R ";$e(Xt+"]"),$e("/Count "+cn),$e(">>"),$e("endobj"),er.publish("postPutPages")},Ri=function(se){er.publish("putFont",{font:se,out:$e,newObject:co,putStream:Bt}),se.isAlreadyPutted!==!0&&(se.objectNumber=co(),$e("<<"),$e("/Type /Font"),$e("/BaseFont /"+D0(se.postScriptName)),$e("/Subtype /Type1"),typeof se.encoding=="string"&&$e("/Encoding /"+se.encoding),$e("/FirstChar 32"),$e("/LastChar 255"),$e(">>"),$e("endobj"))},Ii=function(){for(var se in Mn)Mn.hasOwnProperty(se)&&(v===!1||v===!0&&w.hasOwnProperty(se))&&Ri(Mn[se])},In=function(se){se.objectNumber=co();var Ue=[];Ue.push({key:"Type",value:"/XObject"}),Ue.push({key:"Subtype",value:"/Form"}),Ue.push({key:"BBox",value:"["+[J(se.x),J(se.y),J(se.x+se.width),J(se.y+se.height)].join(" ")+"]"}),Ue.push({key:"Matrix",value:"["+se.matrix.toString()+"]"});var kt=se.pages[1].join(`
`);Bt({data:kt,additionalKeyValues:Ue,objectId:se.objectNumber}),$e("endobj")},kn=function(){for(var se in Ln)Ln.hasOwnProperty(se)&&In(Ln[se])},xt=function(se,Ue){var kt,Xt=[],hi=1/(Ue-1);for(kt=0;kt<1;kt+=hi)Xt.push(kt);if(Xt.push(1),se[0].offset!=0){var Zi={offset:0,color:se[0].color};se.unshift(Zi)}if(se[se.length-1].offset!=1){var hn={offset:1,color:se[se.length-1].color};se.push(hn)}for(var Jn="",kr=0,jr=0;jr<Xt.length;jr++){for(kt=Xt[jr];kt>se[kr+1].offset;)kr++;var Xr=se[kr].offset,$r=(kt-Xr)/(se[kr+1].offset-Xr),Fo=se[kr].color,No=se[kr+1].color;Jn+=me(Math.round((1-$r)*Fo[0]+$r*No[0]).toString(16))+me(Math.round((1-$r)*Fo[1]+$r*No[1]).toString(16))+me(Math.round((1-$r)*Fo[2]+$r*No[2]).toString(16))}return Jn.trim()},Pn=function(se,Ue){Ue||(Ue=21);var kt=co(),Xt=xt(se.colors,Ue),hi=[];hi.push({key:"FunctionType",value:"0"}),hi.push({key:"Domain",value:"[0.0 1.0]"}),hi.push({key:"Size",value:"["+Ue+"]"}),hi.push({key:"BitsPerSample",value:"8"}),hi.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),hi.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Bt({data:Xt,additionalKeyValues:hi,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:kt}),$e("endobj"),se.objectNumber=co(),$e("<< /ShadingType "+se.type),$e("/ColorSpace /DeviceRGB");var Zi="/Coords ["+J(parseFloat(se.coords[0]))+" "+J(parseFloat(se.coords[1]))+" ";se.type===2?Zi+=J(parseFloat(se.coords[2]))+" "+J(parseFloat(se.coords[3])):Zi+=J(parseFloat(se.coords[2]))+" "+J(parseFloat(se.coords[3]))+" "+J(parseFloat(se.coords[4]))+" "+J(parseFloat(se.coords[5])),$e(Zi+="]"),se.matrix&&$e("/Matrix ["+se.matrix.toString()+"]"),$e("/Function "+kt+" 0 R"),$e("/Extend [true true]"),$e(">>"),$e("endobj")},$n=function(se,Ue){var kt=Pe(),Xt=co();Ue.push({resourcesOid:kt,objectOid:Xt}),se.objectNumber=Xt;var hi=[];hi.push({key:"Type",value:"/Pattern"}),hi.push({key:"PatternType",value:"1"}),hi.push({key:"PaintType",value:"1"}),hi.push({key:"TilingType",value:"1"}),hi.push({key:"BBox",value:"["+se.boundingBox.map(J).join(" ")+"]"}),hi.push({key:"XStep",value:J(se.xStep)}),hi.push({key:"YStep",value:J(se.yStep)}),hi.push({key:"Resources",value:kt+" 0 R"}),se.matrix&&hi.push({key:"Matrix",value:"["+se.matrix.toString()+"]"}),Bt({data:se.stream,additionalKeyValues:hi,objectId:se.objectNumber}),$e("endobj")},Pr=function(se){var Ue;for(Ue in en)en.hasOwnProperty(Ue)&&(en[Ue]instanceof qf?Pn(en[Ue]):en[Ue]instanceof B0&&$n(en[Ue],se))},cr=function(se){for(var Ue in se.objectNumber=co(),$e("<<"),se)switch(Ue){case"opacity":$e("/ca "+Le(se[Ue]));break;case"stroke-opacity":$e("/CA "+Le(se[Ue]))}$e(">>"),$e("endobj")},Cr=function(){var se;for(se in Yn)Yn.hasOwnProperty(se)&&cr(Yn[se])},Or=function(){for(var se in $e("/XObject <<"),Ln)Ln.hasOwnProperty(se)&&Ln[se].objectNumber>=0&&$e("/"+se+" "+Ln[se].objectNumber+" 0 R");er.publish("putXobjectDict"),$e(">>")},Er=function(){U.oid=co(),$e("<<"),$e("/Filter /Standard"),$e("/V "+U.v),$e("/R "+U.r),$e("/U <"+U.toHexString(U.U)+">"),$e("/O <"+U.toHexString(U.O)+">"),$e("/P "+U.P),$e(">>"),$e("endobj")},Jo=function(){for(var se in $e("/Font <<"),Mn)Mn.hasOwnProperty(se)&&(v===!1||v===!0&&w.hasOwnProperty(se))&&$e("/"+se+" "+Mn[se].objectNumber+" 0 R");$e(">>")},_o=function(){if(Object.keys(en).length>0){for(var se in $e("/Shading <<"),en)en.hasOwnProperty(se)&&en[se]instanceof qf&&en[se].objectNumber>=0&&$e("/"+se+" "+en[se].objectNumber+" 0 R");er.publish("putShadingPatternDict"),$e(">>")}},Qo=function(se){if(Object.keys(en).length>0){for(var Ue in $e("/Pattern <<"),en)en.hasOwnProperty(Ue)&&en[Ue]instanceof x.TilingPattern&&en[Ue].objectNumber>=0&&en[Ue].objectNumber<se&&$e("/"+Ue+" "+en[Ue].objectNumber+" 0 R");er.publish("putTilingPatternDict"),$e(">>")}},il=function(){if(Object.keys(Yn).length>0){var se;for(se in $e("/ExtGState <<"),Yn)Yn.hasOwnProperty(se)&&Yn[se].objectNumber>=0&&$e("/"+se+" "+Yn[se].objectNumber+" 0 R");er.publish("putGStateDict"),$e(">>")}},Do=function(se){Ie(se.resourcesOid,!0),$e("<<"),$e("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),Jo(),_o(),Qo(se.objectOid),il(),Or(),$e(">>"),$e("endobj")},Ot=function(){var se=[];Ii(),Cr(),kn(),Pr(se),er.publish("putResources"),se.forEach(Do),Do({resourcesOid:gt,objectOid:Number.MAX_SAFE_INTEGER}),er.publish("postPutResources")},sr=function(){er.publish("putAdditionalObjects");for(var se=0;se<Ke.length;se++){var Ue=Ke[se];Ie(Ue.objId,!0),$e(Ue.content),$e("endobj")}er.publish("postPutAdditionalObjects")},hr=function(se){fn[se.fontName]=fn[se.fontName]||{},fn[se.fontName][se.fontStyle]=se.id},Nr=function(se,Ue,kt,Xt,hi){var Zi={id:"F"+(Object.keys(Mn).length+1).toString(10),postScriptName:se,fontName:Ue,fontStyle:kt,encoding:Xt,isStandardFont:hi||!1,metadata:{}};return er.publish("addFont",{font:Zi,instance:this}),Mn[Zi.id]=Zi,hr(Zi),Zi.id},Xo=function(se){for(var Ue=0,kt=Zt.length;Ue<kt;Ue++){var Xt=Nr.call(this,se[Ue][0],se[Ue][1],se[Ue][2],Zt[Ue][3],!0);v===!1&&(w[Xt]=!0);var hi=se[Ue][0].split("-");hr({id:Xt,fontName:hi[0],fontStyle:hi[1]||""})}er.publish("addFonts",{fonts:Mn,dictionary:fn})},Oo=function(se){return se.foo=function(){try{return se.apply(this,arguments)}catch(Xt){var Ue=Xt.stack||"";~Ue.indexOf(" at ")&&(Ue=Ue.split(" at ")[1]);var kt="Error in function "+Ue.split(`
`)[0].split("<")[0]+": "+Xt.message;if(!qr.console)throw new Error(kt);qr.console.error(kt,Xt),qr.alert&&alert(kt)}},se.foo.bar=se,se.foo},Sa=function(se,Ue){var kt,Xt,hi,Zi,hn,Jn,kr,jr,Xr;if(hi=(Ue=Ue||{}).sourceEncoding||"Unicode",hn=Ue.outputEncoding,(Ue.autoencode||hn)&&Mn[et].metadata&&Mn[et].metadata[hi]&&Mn[et].metadata[hi].encoding&&(Zi=Mn[et].metadata[hi].encoding,!hn&&Mn[et].encoding&&(hn=Mn[et].encoding),!hn&&Zi.codePages&&(hn=Zi.codePages[0]),typeof hn=="string"&&(hn=Zi[hn]),hn)){for(kr=!1,Jn=[],kt=0,Xt=se.length;kt<Xt;kt++)(jr=hn[se.charCodeAt(kt)])?Jn.push(String.fromCharCode(jr)):Jn.push(se[kt]),Jn[kt].charCodeAt(0)>>8&&(kr=!0);se=Jn.join("")}for(kt=se.length;kr===void 0&&kt!==0;)se.charCodeAt(kt-1)>>8&&(kr=!0),kt--;if(!kr)return se;for(Jn=Ue.noBOM?[]:[254,255],kt=0,Xt=se.length;kt<Xt;kt++){if((Xr=(jr=se.charCodeAt(kt))>>8)>>8)throw new Error("Character at position "+kt+" of string '"+se+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");Jn.push(Xr),Jn.push(jr-(Xr<<8))}return String.fromCharCode.apply(void 0,Jn)},ns=x.__private__.pdfEscape=x.pdfEscape=function(se,Ue){return Sa(se,Ue).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Vs=x.__private__.beginPage=function(se){Lt[++cn]=[],mn[cn]={objId:0,contentsObjId:0,userUnit:Number(r),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(se[0]),topRightY:Number(se[1])}},Cs(cn),bt(Lt[Ee])},vs=function(se,Ue){var kt,Xt,hi;switch(t=Ue||t,typeof se=="string"&&(kt=M(se.toLowerCase()),Array.isArray(kt)&&(Xt=kt[0],hi=kt[1])),Array.isArray(se)&&(Xt=se[0]*vt,hi=se[1]*vt),isNaN(Xt)&&(Xt=l[0],hi=l[1]),(Xt>14400||hi>14400)&&(fs.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),Xt=Math.min(14400,Xt),hi=Math.min(14400,hi)),l=[Xt,hi],t.substr(0,1)){case"l":hi>Xt&&(l=[hi,Xt]);break;case"p":Xt>hi&&(l=[hi,Xt])}Vs(l),Qn(F),$e(Hs),Bu!==0&&$e(Bu+" J"),pu!==0&&$e(pu+" j"),er.publish("addPage",{pageNumber:cn})},Ca=function(se){se>0&&se<=cn&&(Lt.splice(se,1),mn.splice(se,1),cn--,Ee>cn&&(Ee=cn),this.setPage(Ee))},Cs=function(se){se>0&&se<=cn&&(Ee=se)},Zs=x.__private__.getNumberOfPages=x.getNumberOfPages=function(){return Lt.length-1},qs=function(se,Ue,kt){var Xt,hi=void 0;return kt=kt||{},se=se!==void 0?se:Mn[et].fontName,Ue=Ue!==void 0?Ue:Mn[et].fontStyle,Xt=se.toLowerCase(),fn[Xt]!==void 0&&fn[Xt][Ue]!==void 0?hi=fn[Xt][Ue]:fn[se]!==void 0&&fn[se][Ue]!==void 0?hi=fn[se][Ue]:kt.disableWarning===!1&&fs.warn("Unable to look up font label for font '"+se+"', '"+Ue+"'. Refer to getFontList() for available fonts."),hi||kt.noFallback||(hi=fn.times[Ue])==null&&(hi=fn.times.normal),hi},Ea=x.__private__.putInfo=function(){var se=co(),Ue=function(Xt){return Xt};for(var kt in b!==null&&(Ue=U.encryptor(se,0)),$e("<<"),$e("/Producer ("+ns(Ue("jsPDF "+Vr.version))+")"),ae)ae.hasOwnProperty(kt)&&ae[kt]&&$e("/"+kt.substr(0,1).toUpperCase()+kt.substr(1)+" ("+ns(Ue(ae[kt]))+")");$e("/CreationDate ("+ns(Ue(rt))+")"),$e(">>"),$e("endobj")},kl=x.__private__.putCatalog=function(se){var Ue=(se=se||{}).rootDictionaryObjId||ct;switch(co(),$e("<<"),$e("/Type /Catalog"),$e("/Pages "+Ue+" 0 R"),Li||(Li="fullwidth"),Li){case"fullwidth":$e("/OpenAction [3 0 R /FitH null]");break;case"fullheight":$e("/OpenAction [3 0 R /FitV null]");break;case"fullpage":$e("/OpenAction [3 0 R /Fit]");break;case"original":$e("/OpenAction [3 0 R /XYZ null null 1]");break;default:var kt=""+Li;kt.substr(kt.length-1)==="%"&&(Li=parseInt(Li)/100),typeof Li=="number"&&$e("/OpenAction [3 0 R /XYZ null null "+Le(Li)+"]")}switch(Jt||(Jt="continuous"),Jt){case"continuous":$e("/PageLayout /OneColumn");break;case"single":$e("/PageLayout /SinglePage");break;case"two":case"twoleft":$e("/PageLayout /TwoColumnLeft");break;case"tworight":$e("/PageLayout /TwoColumnRight")}Qi&&$e("/PageMode /"+Qi),er.publish("putCatalog"),$e(">>"),$e("endobj")},cu=x.__private__.putTrailer=function(){$e("trailer"),$e("<<"),$e("/Size "+(Fe+1)),$e("/Root "+Fe+" 0 R"),$e("/Info "+(Fe-1)+" 0 R"),b!==null&&$e("/Encrypt "+U.oid+" 0 R"),$e("/ID [ <"+nt+"> <"+nt+"> ]"),$e(">>")},Sl=x.__private__.putHeader=function(){$e("%PDF-"+C),$e("%\xBA\xDF\xAC\xE0")},hu=x.__private__.putXRef=function(){var se="0000000000";$e("xref"),$e("0 "+(Fe+1)),$e("0000000000 65535 f ");for(var Ue=1;Ue<=Fe;Ue++)typeof Xe[Ue]=="function"?$e((se+Xe[Ue]()).slice(-10)+" 00000 n "):Xe[Ue]!==void 0?$e((se+Xe[Ue]).slice(-10)+" 00000 n "):$e("0000000000 00000 n ")},ha=x.__private__.buildDocument=function(){wt(),bt(lt),er.publish("buildDocument"),Sl(),_t(),sr(),Ot(),b!==null&&Er(),Ea(),kl();var se=Ye;return hu(),cu(),$e("startxref"),$e(""+se),$e("%%EOF"),bt(Lt[Ee]),lt.join(`
`)},fa=x.__private__.getBlob=function(se){return new Blob([li(se)],{type:"application/pdf"})},Co=x.output=x.__private__.output=Oo(function(se,Ue){switch(typeof(Ue=Ue||{})=="string"?Ue={filename:Ue}:Ue.filename=Ue.filename||"generated.pdf",se){case void 0:return ha();case"save":x.save(Ue.filename);break;case"arraybuffer":return li(ha());case"blob":return fa(ha());case"bloburi":case"bloburl":if(qr.URL!==void 0&&typeof qr.URL.createObjectURL=="function")return qr.URL&&qr.URL.createObjectURL(fa(ha()))||void 0;fs.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var kt="",Xt=ha();try{kt=N2(Xt)}catch{kt=N2(unescape(encodeURIComponent(Xt)))}return"data:application/pdf;filename="+Ue.filename+";base64,"+kt;case"pdfobjectnewwindow":if(Object.prototype.toString.call(qr)==="[object Window]"){var hi="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",Zi=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';Ue.pdfObjectUrl&&(hi=Ue.pdfObjectUrl,Zi="");var hn='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+hi+'"'+Zi+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(Ue)+");<\/script></body></html>",Jn=qr.open();return Jn!==null&&Jn.document.write(hn),Jn}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(qr)==="[object Window]"){var kr='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(Ue.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+Ue.filename+'" width="500px" height="400px" /></body></html>',jr=qr.open();if(jr!==null){jr.document.write(kr);var Xr=this;jr.document.documentElement.querySelector("#pdfViewer").onload=function(){jr.document.title=Ue.filename,jr.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(Xr.output("bloburl"))}}return jr}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(qr)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var $r='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",Ue)+'"></iframe></body></html>',Fo=qr.open();if(Fo!==null&&(Fo.document.write($r),Fo.document.title=Ue.filename),Fo||typeof safari>"u")return Fo;break;case"datauri":case"dataurl":return qr.document.location.href=this.output("datauristring",Ue);default:return null}}),nl=function(se){return Array.isArray(yn)===!0&&yn.indexOf(se)>-1};switch(o){case"pt":vt=1;break;case"mm":vt=72/25.4;break;case"cm":vt=72/2.54;break;case"in":vt=72;break;case"px":vt=nl("px_scaling")==1?.75:96/72;break;case"pc":case"em":vt=12;break;case"ex":vt=6;break;default:if(typeof o!="number")throw new Error("Invalid unit: "+o);vt=o}var U=null;Be(),We();var $=function(se){return b!==null?U.encryptor(se,0):function(Ue){return Ue}},ge=x.__private__.getPageInfo=x.getPageInfo=function(se){if(isNaN(se)||se%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:mn[se].objId,pageNumber:se,pageContext:mn[se]}},De=x.__private__.getPageInfoByObjId=function(se){if(isNaN(se)||se%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var Ue in mn)if(mn[Ue].objId===se)break;return ge(Ue)},ot=x.__private__.getCurrentPageInfo=x.getCurrentPageInfo=function(){return{objId:mn[Ee].objId,pageNumber:Ee,pageContext:mn[Ee]}};x.addPage=function(){return vs.apply(this,arguments),this},x.setPage=function(){return Cs.apply(this,arguments),bt.call(this,Lt[Ee]),this},x.insertPage=function(se){return this.addPage(),this.movePage(Ee,se),this},x.movePage=function(se,Ue){var kt,Xt;if(se>Ue){kt=Lt[se],Xt=mn[se];for(var hi=se;hi>Ue;hi--)Lt[hi]=Lt[hi-1],mn[hi]=mn[hi-1];Lt[Ue]=kt,mn[Ue]=Xt,this.setPage(Ue)}else if(se<Ue){kt=Lt[se],Xt=mn[se];for(var Zi=se;Zi<Ue;Zi++)Lt[Zi]=Lt[Zi+1],mn[Zi]=mn[Zi+1];Lt[Ue]=kt,mn[Ue]=Xt,this.setPage(Ue)}return this},x.deletePage=function(){return Ca.apply(this,arguments),this},x.__private__.text=x.text=function(se,Ue,kt,Xt,hi){var Zi,hn,Jn,kr,jr,Xr,$r,Fo,No,Ho=(Xt=Xt||{}).scope||this;if(typeof se=="number"&&typeof Ue=="number"&&(typeof kt=="string"||Array.isArray(kt))){var Es=kt;kt=Ue,Ue=se,se=Es}if(arguments[3]instanceof ln?(ie("The transform parameter of text() with a Matrix value"),No=hi):(Jn=arguments[4],kr=arguments[5],es($r=arguments[3])==="object"&&$r!==null||(typeof Jn=="string"&&(kr=Jn,Jn=null),typeof $r=="string"&&(kr=$r,$r=null),typeof $r=="number"&&(Jn=$r,$r=null),Xt={flags:$r,angle:Jn,align:kr})),isNaN(Ue)||isNaN(kt)||se==null)throw new Error("Invalid arguments passed to jsPDF.text");if(se.length===0)return Ho;var ps="",Ur=!1,Is=typeof Xt.lineHeightFactor=="number"?Xt.lineHeightFactor:c,bs=Ho.internal.scaleFactor;function Xl(Ro){return Ro=Ro.split("	").join(Array(Xt.TabLen||9).join(" ")),ns(Ro,$r)}function El(Ro){for(var Gr,Lo=Ro.concat(),rs=[],_n=Lo.length;_n--;)typeof(Gr=Lo.shift())=="string"?rs.push(Gr):Array.isArray(Ro)&&(Gr.length===1||Gr[1]===void 0&&Gr[2]===void 0)?rs.push(Gr[0]):rs.push([Gr[0],Gr[1],Gr[2]]);return rs}function Nu(Ro,Gr){var Lo;if(typeof Ro=="string")Lo=Gr(Ro)[0];else if(Array.isArray(Ro)){for(var rs,_n,Da=Ro.concat(),qu=[],Hu=Da.length;Hu--;)typeof(rs=Da.shift())=="string"?qu.push(Gr(rs)[0]):Array.isArray(rs)&&typeof rs[0]=="string"&&(_n=Gr(rs[0],rs[1],rs[2]),qu.push([_n[0],_n[1],_n[2]]));Lo=qu}return Lo}var Ia=!1,Il=!0;if(typeof se=="string")Ia=!0;else if(Array.isArray(se)){var rl=se.concat();hn=[];for(var ju,Fs=rl.length;Fs--;)(typeof(ju=rl.shift())!="string"||Array.isArray(ju)&&typeof ju[0]!="string")&&(Il=!1);Ia=Il}if(Ia===!1)throw new Error('Type of text must be string or Array. "'+se+'" is not recognized.');typeof se=="string"&&(se=se.match(/[\r?\n]/)?se.split(/\r\n|\r|\n/g):[se]);var yu=Ci/Ho.internal.scaleFactor,Yl=yu*(Is-1);switch(Xt.baseline){case"bottom":kt-=Yl;break;case"top":kt+=yu-Yl;break;case"hanging":kt+=yu-2*Yl;break;case"middle":kt+=yu/2-Yl}if((Xr=Xt.maxWidth||0)>0&&(typeof se=="string"?se=Ho.splitTextToSize(se,Xr):Object.prototype.toString.call(se)==="[object Array]"&&(se=se.reduce(function(Ro,Gr){return Ro.concat(Ho.splitTextToSize(Gr,Xr))},[]))),Zi={text:se,x:Ue,y:kt,options:Xt,mutex:{pdfEscape:ns,activeFontKey:et,fonts:Mn,activeFontSize:Ci}},er.publish("preProcessText",Zi),se=Zi.text,Jn=(Xt=Zi.options).angle,!(No instanceof ln)&&Jn&&typeof Jn=="number"){Jn*=Math.PI/180,Xt.rotationDirection===0&&(Jn=-Jn),V===O.ADVANCED&&(Jn=-Jn);var Ua=Math.cos(Jn),_u=Math.sin(Jn);No=new ln(Ua,_u,-_u,Ua,0,0)}else Jn&&Jn instanceof ln&&(No=Jn);V!==O.ADVANCED||No||(No=To),(jr=Xt.charSpace||du)!==void 0&&(ps+=J(Te(jr))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(Fo=Xt.horizontalScale)!==void 0&&(ps+=J(100*Fo)+` Tz
`),Xt.lang;var Rs=-1,vu=Xt.renderingMode!==void 0?Xt.renderingMode:Xt.stroke,ol=Ho.internal.getCurrentPageInfo().pageContext;switch(vu){case 0:case!1:case"fill":Rs=0;break;case 1:case!0:case"stroke":Rs=1;break;case 2:case"fillThenStroke":Rs=2;break;case 3:case"invisible":Rs=3;break;case 4:case"fillAndAddForClipping":Rs=4;break;case 5:case"strokeAndAddPathForClipping":Rs=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":Rs=6;break;case 7:case"addToPathForClipping":Rs=7}var Zl=ol.usedRenderingMode!==void 0?ol.usedRenderingMode:-1;Rs!==-1?ps+=Rs+` Tr
`:Zl!==-1&&(ps+=`0 Tr
`),Rs!==-1&&(ol.usedRenderingMode=Rs),kr=Xt.align||"left";var Ta,Tl=Ci*Is,Fc=Ho.internal.pageSize.getWidth(),Rc=Mn[et];jr=Xt.charSpace||du,Xr=Xt.maxWidth||0,$r=Object.assign({autoencode:!0,noBOM:!0},Xt.flags);var Ll=[];if(Object.prototype.toString.call(se)==="[object Array]"){var Bs;hn=El(se),kr!=="left"&&(Ta=hn.map(function(Ro){return Ho.getStringUnitWidth(Ro,{font:Rc,charSpace:jr,fontSize:Ci,doKerning:!1})*Ci/bs}));var La,Pa=0;if(kr==="right"){Ue-=Ta[0],se=[],Fs=hn.length;for(var ra=0;ra<Fs;ra++)ra===0?(La=da(Ue),Bs=Na(kt)):(La=Te(Pa-Ta[ra]),Bs=-Tl),se.push([hn[ra],La,Bs]),Pa=Ta[ra]}else if(kr==="center"){Ue-=Ta[0]/2,se=[],Fs=hn.length;for(var us=0;us<Fs;us++)us===0?(La=da(Ue),Bs=Na(kt)):(La=Te((Pa-Ta[us])/2),Bs=-Tl),se.push([hn[us],La,Bs]),Pa=Ta[us]}else if(kr==="left"){se=[],Fs=hn.length;for(var sl=0;sl<Fs;sl++)se.push(hn[sl])}else{if(kr!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');se=[],Fs=hn.length,Xr=Xr!==0?Xr:Fc;for(var Yo=0;Yo<Fs;Yo++)Bs=Yo===0?Na(kt):-Tl,La=Yo===0?da(Ue):0,Yo<Fs-1?Ll.push(J(Te((Xr-Ta[Yo])/(hn[Yo].split(" ").length-1)))):Ll.push(0),se.push([hn[Yo],La,Bs])}}var Uu=typeof Xt.R2L=="boolean"?Xt.R2L:mi;Uu===!0&&(se=Nu(se,function(Ro,Gr,Lo){return[Ro.split("").reverse().join(""),Gr,Lo]})),Zi={text:se,x:Ue,y:kt,options:Xt,mutex:{pdfEscape:ns,activeFontKey:et,fonts:Mn,activeFontSize:Ci}},er.publish("postProcessText",Zi),se=Zi.text,Ur=Zi.mutex.isHex||!1;var Ma=Mn[et].encoding;Ma!=="WinAnsiEncoding"&&Ma!=="StandardEncoding"||(se=Nu(se,function(Ro,Gr,Lo){return[Xl(Ro),Gr,Lo]})),hn=El(se),se=[];for(var oa,Yr,ga,Pl=0,Vu=1,bu=Array.isArray(hn[0])?Vu:Pl,Gs="",Ml=function(Ro,Gr,Lo){var rs="";return Lo instanceof ln?(Lo=typeof Xt.angle=="number"?qe(Lo,new ln(1,0,0,1,Ro,Gr)):qe(new ln(1,0,0,1,Ro,Gr),Lo),V===O.ADVANCED&&(Lo=qe(new ln(1,0,0,-1,0,0),Lo)),rs=Lo.join(" ")+` Tm
`):rs=J(Ro)+" "+J(Gr)+` Td
`,rs},ms=0;ms<hn.length;ms++){switch(Gs="",bu){case Vu:ga=(Ur?"<":"(")+hn[ms][0]+(Ur?">":")"),oa=parseFloat(hn[ms][1]),Yr=parseFloat(hn[ms][2]);break;case Pl:ga=(Ur?"<":"(")+hn[ms]+(Ur?">":")"),oa=da(Ue),Yr=Na(kt)}Ll!==void 0&&Ll[ms]!==void 0&&(Gs=Ll[ms]+` Tw
`),ms===0?se.push(Gs+Ml(oa,Yr,No)+ga):bu===Pl?se.push(Gs+ga):bu===Vu&&se.push(Gs+Ml(oa,Yr,No)+ga)}se=bu===Pl?se.join(` Tj
T* `):se.join(` Tj
`),se+=` Tj
`;var Dn=`BT
/`;return Dn+=et+" "+Ci+` Tf
`,Dn+=J(Ci*Is)+` TL
`,Dn+=fu+`
`,Dn+=ps,Dn+=se,$e(Dn+="ET"),w[et]=!0,Ho};var Et=x.__private__.clip=x.clip=function(se){return $e(se==="evenodd"?"W*":"W"),this};x.clipEvenOdd=function(){return Et("evenodd")},x.__private__.discardPath=x.discardPath=function(){return $e("n"),this};var Nt=x.__private__.isValidStyle=function(se){var Ue=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(se)!==-1&&(Ue=!0),Ue};x.__private__.setDefaultPathOperation=x.setDefaultPathOperation=function(se){return Nt(se)&&(y=se),this};var zt=x.__private__.getStyle=x.getStyle=function(se){var Ue=y;switch(se){case"D":case"S":Ue="S";break;case"F":Ue="f";break;case"FD":case"DF":Ue="B";break;case"f":case"f*":case"B":case"B*":Ue=se}return Ue},bi=x.close=function(){return $e("h"),this};x.stroke=function(){return $e("S"),this},x.fill=function(se){return yi("f",se),this},x.fillEvenOdd=function(se){return yi("f*",se),this},x.fillStroke=function(se){return yi("B",se),this},x.fillStrokeEvenOdd=function(se){return yi("B*",se),this};var yi=function(se,Ue){es(Ue)==="object"?ji(Ue,se):$e(se)},_i=function(se){se===null||V===O.ADVANCED&&se===void 0||(se=zt(se),$e(se))};function ui(se,Ue,kt,Xt,hi){var Zi=new B0(Ue||this.boundingBox,kt||this.xStep,Xt||this.yStep,this.gState,hi||this.matrix);Zi.stream=this.stream;var hn=se+"$$"+this.cloneIndex+++"$$";return bo(hn,Zi),Zi}var ji=function(se,Ue){var kt=Xn[se.key],Xt=en[kt];if(Xt instanceof qf)$e("q"),$e(an(Ue)),Xt.gState&&x.setGState(Xt.gState),$e(se.matrix.toString()+" cm"),$e("/"+kt+" sh"),$e("Q");else if(Xt instanceof B0){var hi=new ln(1,0,0,-1,0,ma());se.matrix&&(hi=hi.multiply(se.matrix||To),kt=ui.call(Xt,se.key,se.boundingBox,se.xStep,se.yStep,hi).id),$e("q"),$e("/Pattern cs"),$e("/"+kt+" scn"),Xt.gState&&x.setGState(Xt.gState),$e(Ue),$e("Q")}},an=function(se){switch(se){case"f":case"F":return"W n";case"f*":return"W* n";case"B":return"W S";case"B*":return"W* S";case"S":return"W S";case"n":return"W n"}},Tn=x.moveTo=function(se,Ue){return $e(J(Te(se))+" "+J(ve(Ue))+" m"),this},ft=x.lineTo=function(se,Ue){return $e(J(Te(se))+" "+J(ve(Ue))+" l"),this},p=x.curveTo=function(se,Ue,kt,Xt,hi,Zi){return $e([J(Te(se)),J(ve(Ue)),J(Te(kt)),J(ve(Xt)),J(Te(hi)),J(ve(Zi)),"c"].join(" ")),this};x.__private__.line=x.line=function(se,Ue,kt,Xt,hi){if(isNaN(se)||isNaN(Ue)||isNaN(kt)||isNaN(Xt)||!Nt(hi))throw new Error("Invalid arguments passed to jsPDF.line");return V===O.COMPAT?this.lines([[kt-se,Xt-Ue]],se,Ue,[1,1],hi||"S"):this.lines([[kt-se,Xt-Ue]],se,Ue,[1,1]).stroke()},x.__private__.lines=x.lines=function(se,Ue,kt,Xt,hi,Zi){var hn,Jn,kr,jr,Xr,$r,Fo,No,Ho,Es,ps,Ur;if(typeof se=="number"&&(Ur=kt,kt=Ue,Ue=se,se=Ur),Xt=Xt||[1,1],Zi=Zi||!1,isNaN(Ue)||isNaN(kt)||!Array.isArray(se)||!Array.isArray(Xt)||!Nt(hi)||typeof Zi!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(Tn(Ue,kt),hn=Xt[0],Jn=Xt[1],jr=se.length,Es=Ue,ps=kt,kr=0;kr<jr;kr++)(Xr=se[kr]).length===2?(Es=Xr[0]*hn+Es,ps=Xr[1]*Jn+ps,ft(Es,ps)):($r=Xr[0]*hn+Es,Fo=Xr[1]*Jn+ps,No=Xr[2]*hn+Es,Ho=Xr[3]*Jn+ps,Es=Xr[4]*hn+Es,ps=Xr[5]*Jn+ps,p($r,Fo,No,Ho,Es,ps));return Zi&&bi(),_i(hi),this},x.path=function(se){for(var Ue=0;Ue<se.length;Ue++){var kt=se[Ue],Xt=kt.c;switch(kt.op){case"m":Tn(Xt[0],Xt[1]);break;case"l":ft(Xt[0],Xt[1]);break;case"c":p.apply(this,Xt);break;case"h":bi()}}return this},x.__private__.rect=x.rect=function(se,Ue,kt,Xt,hi){if(isNaN(se)||isNaN(Ue)||isNaN(kt)||isNaN(Xt)||!Nt(hi))throw new Error("Invalid arguments passed to jsPDF.rect");return V===O.COMPAT&&(Xt=-Xt),$e([J(Te(se)),J(ve(Ue)),J(Te(kt)),J(Te(Xt)),"re"].join(" ")),_i(hi),this},x.__private__.triangle=x.triangle=function(se,Ue,kt,Xt,hi,Zi,hn){if(isNaN(se)||isNaN(Ue)||isNaN(kt)||isNaN(Xt)||isNaN(hi)||isNaN(Zi)||!Nt(hn))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[kt-se,Xt-Ue],[hi-kt,Zi-Xt],[se-hi,Ue-Zi]],se,Ue,[1,1],hn,!0),this},x.__private__.roundedRect=x.roundedRect=function(se,Ue,kt,Xt,hi,Zi,hn){if(isNaN(se)||isNaN(Ue)||isNaN(kt)||isNaN(Xt)||isNaN(hi)||isNaN(Zi)||!Nt(hn))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var Jn=4/3*(Math.SQRT2-1);return hi=Math.min(hi,.5*kt),Zi=Math.min(Zi,.5*Xt),this.lines([[kt-2*hi,0],[hi*Jn,0,hi,Zi-Zi*Jn,hi,Zi],[0,Xt-2*Zi],[0,Zi*Jn,-hi*Jn,Zi,-hi,Zi],[2*hi-kt,0],[-hi*Jn,0,-hi,-Zi*Jn,-hi,-Zi],[0,2*Zi-Xt],[0,-Zi*Jn,hi*Jn,-Zi,hi,-Zi]],se+hi,Ue,[1,1],hn,!0),this},x.__private__.ellipse=x.ellipse=function(se,Ue,kt,Xt,hi){if(isNaN(se)||isNaN(Ue)||isNaN(kt)||isNaN(Xt)||!Nt(hi))throw new Error("Invalid arguments passed to jsPDF.ellipse");var Zi=4/3*(Math.SQRT2-1)*kt,hn=4/3*(Math.SQRT2-1)*Xt;return Tn(se+kt,Ue),p(se+kt,Ue-hn,se+Zi,Ue-Xt,se,Ue-Xt),p(se-Zi,Ue-Xt,se-kt,Ue-hn,se-kt,Ue),p(se-kt,Ue+hn,se-Zi,Ue+Xt,se,Ue+Xt),p(se+Zi,Ue+Xt,se+kt,Ue+hn,se+kt,Ue),_i(hi),this},x.__private__.circle=x.circle=function(se,Ue,kt,Xt){if(isNaN(se)||isNaN(Ue)||isNaN(kt)||!Nt(Xt))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(se,Ue,kt,kt,Xt)},x.setFont=function(se,Ue,kt){return kt&&(Ue=ee(Ue,kt)),et=qs(se,Ue,{disableWarning:!1}),this};var Di=x.__private__.getFont=x.getFont=function(){return Mn[qs.apply(x,arguments)]};x.__private__.getFontList=x.getFontList=function(){var se,Ue,kt={};for(se in fn)if(fn.hasOwnProperty(se))for(Ue in kt[se]=[],fn[se])fn[se].hasOwnProperty(Ue)&&kt[se].push(Ue);return kt},x.addFont=function(se,Ue,kt,Xt,hi){var Zi=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&Zi.indexOf(arguments[3])!==-1?hi=arguments[3]:arguments[3]&&Zi.indexOf(arguments[3])==-1&&(kt=ee(kt,Xt)),hi=hi||"Identity-H",Nr.call(this,se,Ue,kt,hi)};var c,F=i.lineWidth||.200025,pn=x.__private__.getLineWidth=x.getLineWidth=function(){return F},Qn=x.__private__.setLineWidth=x.setLineWidth=function(se){return F=se,$e(J(Te(se))+" w"),this};x.__private__.setLineDash=Vr.API.setLineDash=Vr.API.setLineDashPattern=function(se,Ue){if(se=se||[],Ue=Ue||0,isNaN(Ue)||!Array.isArray(se))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return se=se.map(function(kt){return J(Te(kt))}).join(" "),Ue=J(Te(Ue)),$e("["+se+"] "+Ue+" d"),this};var wo=x.__private__.getLineHeight=x.getLineHeight=function(){return Ci*c};x.__private__.getLineHeight=x.getLineHeight=function(){return Ci*c};var re=x.__private__.setLineHeightFactor=x.setLineHeightFactor=function(se){return typeof(se=se||1.15)=="number"&&(c=se),this},Br=x.__private__.getLineHeightFactor=x.getLineHeightFactor=function(){return c};re(i.lineHeight);var da=x.__private__.getHorizontalCoordinate=function(se){return Te(se)},Na=x.__private__.getVerticalCoordinate=function(se){return V===O.ADVANCED?se:mn[Ee].mediaBox.topRightY-mn[Ee].mediaBox.bottomLeftY-Te(se)},Oc=x.__private__.getHorizontalCoordinateString=x.getHorizontalCoordinateString=function(se){return J(da(se))},Cl=x.__private__.getVerticalCoordinateString=x.getVerticalCoordinateString=function(se){return J(Na(se))},Hs=i.strokeColor||"0 G";x.__private__.getStrokeColor=x.getDrawColor=function(){return Rt(Hs)},x.__private__.setStrokeColor=x.setDrawColor=function(se,Ue,kt,Xt){return Hs=Ge({ch1:se,ch2:Ue,ch3:kt,ch4:Xt,pdfColorType:"draw",precision:2}),$e(Hs),this};var ac=i.fillColor||"0 g";x.__private__.getFillColor=x.getFillColor=function(){return Rt(ac)},x.__private__.setFillColor=x.setFillColor=function(se,Ue,kt,Xt){return ac=Ge({ch1:se,ch2:Ue,ch3:kt,ch4:Xt,pdfColorType:"fill",precision:2}),$e(ac),this};var fu=i.textColor||"0 g",uh=x.__private__.getTextColor=x.getTextColor=function(){return Rt(fu)};x.__private__.setTextColor=x.setTextColor=function(se,Ue,kt,Xt){return fu=Ge({ch1:se,ch2:Ue,ch3:kt,ch4:Xt,pdfColorType:"text",precision:3}),this};var du=i.charSpace,ch=x.__private__.getCharSpace=x.getCharSpace=function(){return parseFloat(du||0)};x.__private__.setCharSpace=x.setCharSpace=function(se){if(isNaN(se))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return du=se,this};var Bu=0;x.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},x.__private__.setLineCap=x.setLineCap=function(se){var Ue=x.CapJoinStyles[se];if(Ue===void 0)throw new Error("Line cap style of '"+se+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Bu=Ue,$e(Ue+" J"),this};var pu=0;x.__private__.setLineJoin=x.setLineJoin=function(se){var Ue=x.CapJoinStyles[se];if(Ue===void 0)throw new Error("Line join style of '"+se+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return pu=Ue,$e(Ue+" j"),this},x.__private__.setLineMiterLimit=x.__private__.setMiterLimit=x.setLineMiterLimit=x.setMiterLimit=function(se){if(se=se||0,isNaN(se))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return $e(J(Te(se))+" M"),this},x.GState=y1,x.setGState=function(se){(se=typeof se=="string"?Yn[Kr[se]]:mu(null,se)).equals(jn)||($e("/"+se.id+" gs"),jn=se)};var mu=function(se,Ue){if(!se||!Kr[se]){var kt=!1;for(var Xt in Yn)if(Yn.hasOwnProperty(Xt)&&Yn[Xt].equals(Ue)){kt=!0;break}if(kt)Ue=Yn[Xt];else{var hi="GS"+(Object.keys(Yn).length+1).toString(10);Yn[hi]=Ue,Ue.id=hi}return se&&(Kr[se]=Ue.id),er.publish("addGState",Ue),Ue}};x.addGState=function(se,Ue){return mu(se,Ue),this},x.saveGraphicsState=function(){return $e("q"),Bi.push({key:et,size:Ci,color:fu}),this},x.restoreGraphicsState=function(){$e("Q");var se=Bi.pop();return et=se.key,Ci=se.size,fu=se.color,jn=null,this},x.setCurrentTransformationMatrix=function(se){return $e(se.toString()+" cm"),this},x.comment=function(se){return $e("#"+se),this};var Gl=function(se,Ue){var kt=se||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return kt},set:function(Zi){isNaN(Zi)||(kt=parseFloat(Zi))}});var Xt=Ue||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return Xt},set:function(Zi){isNaN(Zi)||(Xt=parseFloat(Zi))}});var hi="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return hi},set:function(Zi){hi=Zi.toString()}}),this},gu=function(se,Ue,kt,Xt){Gl.call(this,se,Ue),this.type="rect";var hi=kt||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return hi},set:function(hn){isNaN(hn)||(hi=parseFloat(hn))}});var Zi=Xt||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return Zi},set:function(hn){isNaN(hn)||(Zi=parseFloat(hn))}}),this},Un=function(){this.page=cn,this.currentPage=Ee,this.pages=Lt.slice(0),this.pagesContext=mn.slice(0),this.x=Wt,this.y=di,this.matrix=xn,this.width=pa(Ee),this.height=ma(Ee),this.outputDestination=dt,this.id="",this.objectNumber=-1};Un.prototype.restore=function(){cn=this.page,Ee=this.currentPage,mn=this.pagesContext,Lt=this.pages,Wt=this.x,di=this.y,xn=this.matrix,Wl(Ee,this.width),xo(Ee,this.height),dt=this.outputDestination};var Bn=function(se,Ue,kt,Xt,hi){oo.push(new Un),cn=Ee=0,Lt=[],Wt=se,di=Ue,xn=hi,Vs([kt,Xt])},zu=function(se){if(lr[se])oo.pop().restore();else{var Ue=new Un,kt="Xo"+(Object.keys(Ln).length+1).toString(10);Ue.id=kt,lr[se]=kt,Ln[kt]=Ue,er.publish("addFormObject",Ue),oo.pop().restore()}};for(var ja in x.beginFormObject=function(se,Ue,kt,Xt,hi){return Bn(se,Ue,kt,Xt,hi),this},x.endFormObject=function(se){return zu(se),this},x.doFormObject=function(se,Ue){var kt=Ln[lr[se]];return $e("q"),$e(Ue.toString()+" cm"),$e("/"+kt.id+" Do"),$e("Q"),this},x.getFormObject=function(se){var Ue=Ln[lr[se]];return{x:Ue.x,y:Ue.y,width:Ue.width,height:Ue.height,matrix:Ue.matrix}},x.save=function(se,Ue){return se=se||"generated.pdf",(Ue=Ue||{}).returnPromise=Ue.returnPromise||!1,Ue.returnPromise===!1?(Vf(fa(ha()),se),typeof Vf.unload=="function"&&qr.setTimeout&&setTimeout(Vf.unload,911),this):new Promise(function(kt,Xt){try{var hi=Vf(fa(ha()),se);typeof Vf.unload=="function"&&qr.setTimeout&&setTimeout(Vf.unload,911),kt(hi)}catch(Zi){Xt(Zi.message)}})},Vr.API)Vr.API.hasOwnProperty(ja)&&(ja==="events"&&Vr.API.events.length?function(se,Ue){var kt,Xt,hi;for(hi=Ue.length-1;hi!==-1;hi--)kt=Ue[hi][0],Xt=Ue[hi][1],se.subscribe.apply(se,[kt].concat(typeof Xt=="function"?[Xt]:Xt))}(er,Vr.API.events):x[ja]=Vr.API[ja]);var pa=x.getPageWidth=function(se){return(mn[se=se||Ee].mediaBox.topRightX-mn[se].mediaBox.bottomLeftX)/vt},Wl=x.setPageWidth=function(se,Ue){mn[se].mediaBox.topRightX=Ue*vt+mn[se].mediaBox.bottomLeftX},ma=x.getPageHeight=function(se){return(mn[se=se||Ee].mediaBox.topRightY-mn[se].mediaBox.bottomLeftY)/vt},xo=x.setPageHeight=function(se,Ue){mn[se].mediaBox.topRightY=Ue*vt+mn[se].mediaBox.bottomLeftY};return x.internal={pdfEscape:ns,getStyle:zt,getFont:Di,getFontSize:Vt,getCharSpace:ch,getTextColor:uh,getLineHeight:wo,getLineHeightFactor:Br,getLineWidth:pn,write:Yt,getHorizontalCoordinate:da,getVerticalCoordinate:Na,getCoordinateString:Oc,getVerticalCoordinateString:Cl,collections:{},newObject:co,newAdditionalObject:He,newObjectDeferred:Pe,newObjectDeferredBegin:Ie,getFilters:Ht,putStream:Bt,events:er,scaleFactor:vt,pageSize:{getWidth:function(){return pa(Ee)},setWidth:function(se){Wl(Ee,se)},getHeight:function(){return ma(Ee)},setHeight:function(se){xo(Ee,se)}},encryptionOptions:b,encryption:U,getEncryptor:$,output:Co,getNumberOfPages:Zs,pages:Lt,out:$e,f2:Le,f3:fe,getPageInfo:ge,getPageInfoByObjId:De,getCurrentPageInfo:ot,getPDFVersion:T,Point:Gl,Rectangle:gu,Matrix:ln,hasHotfix:nl},Object.defineProperty(x.internal.pageSize,"width",{get:function(){return pa(Ee)},set:function(se){Wl(Ee,se)},enumerable:!0,configurable:!0}),Object.defineProperty(x.internal.pageSize,"height",{get:function(){return ma(Ee)},set:function(se){xo(Ee,se)},enumerable:!0,configurable:!0}),Xo.call(x,Zt),et="F1",vs(l,t),er.publish("initialized"),x}M0.prototype.lsbFirstWord=function(i){return String.fromCharCode(i>>0&255,i>>8&255,i>>16&255,i>>24&255)},M0.prototype.toHexString=function(i){return i.split("").map(function(e){return("0"+(255&e.charCodeAt(0)).toString(16)).slice(-2)}).join("")},M0.prototype.hexToBytes=function(i){for(var e=[],t=0;t<i.length;t+=2)e.push(String.fromCharCode(parseInt(i.substr(t,2),16)));return e.join("")},M0.prototype.processOwnerPassword=function(i,e){return U2(j2(e).substr(0,5),i)},M0.prototype.encryptor=function(i,e){var t=j2(this.encryptionKey+String.fromCharCode(255&i,i>>8&255,i>>16&255,255&e,e>>8&255)).substr(0,10);return function(o){return U2(t,o)}},y1.prototype.equals=function(i){var e,t="id,objectNumber,equals";if(!i||es(i)!==es(this))return!1;var o=0;for(e in this)if(!(t.indexOf(e)>=0)){if(this.hasOwnProperty(e)&&!i.hasOwnProperty(e)||this[e]!==i[e])return!1;o++}for(e in i)i.hasOwnProperty(e)&&t.indexOf(e)<0&&o--;return o===0},Vr.API={events:[]},Vr.version="2.5.1";var Ys=Vr.API,_g=1,i0=function(i){return i.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},w0=function(i){return i.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},Qr=function(i){return i.toFixed(2)},ef=function(i){return i.toFixed(5)};Ys.__acroform__={};var uu=function(i,e){i.prototype=Object.create(e.prototype),i.prototype.constructor=i},f_=function(i){return i*_g},Zc=function(i){var e=new T4,t=gr.internal.getHeight(i)||0,o=gr.internal.getWidth(i)||0;return e.BBox=[0,0,Number(Qr(o)),Number(Qr(t))],e},k8=Ys.__acroform__.setBit=function(i,e){if(i=i||0,e=e||0,isNaN(i)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return i|=1<<e},S8=Ys.__acroform__.clearBit=function(i,e){if(i=i||0,e=e||0,isNaN(i)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return i&=~(1<<e)},C8=Ys.__acroform__.getBit=function(i,e){if(isNaN(i)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return(i&1<<e)==0?0:1},ta=Ys.__acroform__.getBitForPdf=function(i,e){if(isNaN(i)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return C8(i,e-1)},ia=Ys.__acroform__.setBitForPdf=function(i,e){if(isNaN(i)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return k8(i,e-1)},na=Ys.__acroform__.clearBitForPdf=function(i,e){if(isNaN(i)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return S8(i,e-1)},E8=Ys.__acroform__.calculateCoordinates=function(i,e){var t=e.internal.getHorizontalCoordinate,o=e.internal.getVerticalCoordinate,l=i[0],u=i[1],m=i[2],r=i[3],h={};return h.lowerLeft_X=t(l)||0,h.lowerLeft_Y=o(u+r)||0,h.upperRight_X=t(l+m)||0,h.upperRight_Y=o(u)||0,[Number(Qr(h.lowerLeft_X)),Number(Qr(h.lowerLeft_Y)),Number(Qr(h.upperRight_X)),Number(Qr(h.upperRight_Y))]},I8=function(i){if(i.appearanceStreamContent)return i.appearanceStreamContent;if(i.V||i.DV){var e=[],t=i._V||i.DV,o=V2(i,t),l=i.scope.internal.getFont(i.fontName,i.fontStyle).id;e.push("/Tx BMC"),e.push("q"),e.push("BT"),e.push(i.scope.__private__.encodeColorString(i.color)),e.push("/"+l+" "+Qr(o.fontSize)+" Tf"),e.push("1 0 0 1 0 0 Tm"),e.push(o.text),e.push("ET"),e.push("Q"),e.push("EMC");var u=Zc(i);return u.scope=i.scope,u.stream=e.join(`
`),u}},V2=function(i,e){var t=i.fontSize===0?i.maxFontSize:i.fontSize,o={text:"",fontSize:""},l=(e=(e=e.substr(0,1)=="("?e.substr(1):e).substr(e.length-1)==")"?e.substr(0,e.length-1):e).split(" ");l=i.multiline?l.map(function(fe){return fe.split(`
`)}):l.map(function(fe){return[fe]});var u=t,m=gr.internal.getHeight(i)||0;m=m<0?-m:m;var r=gr.internal.getWidth(i)||0;r=r<0?-r:r;var h=function(fe,Te,_e){if(fe+1<l.length){var ve=Te+" "+l[fe+1][0];return jp(ve,i,_e).width<=r-4}return!1};u++;e:for(;u>0;){e="",u--;var y,b,v=jp("3",i,u).height,w=i.multiline?m-u:(m-v)/2,x=w+=2,C=0,T=0,S=0;if(u<=0){e=`(...) Tj
`,e+="% Width of Text: "+jp(e,i,u=12).width+", FieldWidth:"+r+`
`;break}for(var M="",O=0,V=0;V<l.length;V++)if(l.hasOwnProperty(V)){var X=!1;if(l[V].length!==1&&S!==l[V].length-1){if((v+2)*(O+2)+2>m)continue e;M+=l[V][S],X=!0,T=V,V--}else{M=(M+=l[V][S]+" ").substr(M.length-1)==" "?M.substr(0,M.length-1):M;var Z=parseInt(V),ee=h(Z,M,u),J=V>=l.length-1;if(ee&&!J){M+=" ",S=0;continue}if(ee||J){if(J)T=Z;else if(i.multiline&&(v+2)*(O+2)+2>m)continue e}else{if(!i.multiline||(v+2)*(O+2)+2>m)continue e;T=Z}}for(var ie="",ke=C;ke<=T;ke++){var Le=l[ke];if(i.multiline){if(ke===T){ie+=Le[S]+" ",S=(S+1)%Le.length;continue}if(ke===C){ie+=Le[Le.length-1]+" ";continue}}ie+=Le[0]+" "}switch(ie=ie.substr(ie.length-1)==" "?ie.substr(0,ie.length-1):ie,b=jp(ie,i,u).width,i.textAlign){case"right":y=r-b-2;break;case"center":y=(r-b)/2;break;case"left":default:y=2}e+=Qr(y)+" "+Qr(x)+` Td
`,e+="("+i0(ie)+`) Tj
`,e+=-Qr(y)+` 0 Td
`,x=-(u+2),b=0,C=X?T:T+1,O++,M=""}break}return o.text=e,o.fontSize=u,o},jp=function(i,e,t){var o=e.scope.internal.getFont(e.fontName,e.fontStyle),l=e.scope.getStringUnitWidth(i,{font:o,fontSize:parseFloat(t),charSpace:0})*parseFloat(t);return{height:e.scope.getStringUnitWidth("3",{font:o,fontSize:parseFloat(t),charSpace:0})*parseFloat(t)*1.5,width:l}},T8={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},L8=function(i,e){var t={type:"reference",object:i};e.internal.getPageInfo(i.page).pageContext.annotations.find(function(o){return o.type===t.type&&o.object===t.object})===void 0&&e.internal.getPageInfo(i.page).pageContext.annotations.push(t)},P8=function(i,e){for(var t in i)if(i.hasOwnProperty(t)){var o=t,l=i[t];e.internal.newObjectDeferredBegin(l.objId,!0),es(l)==="object"&&typeof l.putStream=="function"&&l.putStream(),delete i[o]}},M8=function(i,e){if(e.scope=i,i.internal!==void 0&&(i.internal.acroformPlugin===void 0||i.internal.acroformPlugin.isInitialized===!1)){if(Pc.FieldNum=0,i.internal.acroformPlugin=JSON.parse(JSON.stringify(T8)),i.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");_g=i.internal.scaleFactor,i.internal.acroformPlugin.acroFormDictionaryRoot=new L4,i.internal.acroformPlugin.acroFormDictionaryRoot.scope=i,i.internal.acroformPlugin.acroFormDictionaryRoot._eventID=i.internal.events.subscribe("postPutResources",function(){(function(t){t.internal.events.unsubscribe(t.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete t.internal.acroformPlugin.acroFormDictionaryRoot._eventID,t.internal.acroformPlugin.printedOut=!0})(i)}),i.internal.events.subscribe("buildDocument",function(){(function(t){t.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var o=t.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var l in o)if(o.hasOwnProperty(l)){var u=o[l];u.objId=void 0,u.hasAnnotation&&L8(u,t)}})(i)}),i.internal.events.subscribe("putCatalog",function(){(function(t){if(t.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");t.internal.write("/AcroForm "+t.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(i)}),i.internal.events.subscribe("postPutPages",function(t){(function(o,l){var u=!o;for(var m in o||(l.internal.newObjectDeferredBegin(l.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),l.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),o=o||l.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(o.hasOwnProperty(m)){var r=o[m],h=[],y=r.Rect;if(r.Rect&&(r.Rect=E8(r.Rect,l)),l.internal.newObjectDeferredBegin(r.objId,!0),r.DA=gr.createDefaultAppearanceStream(r),es(r)==="object"&&typeof r.getKeyValueListForStream=="function"&&(h=r.getKeyValueListForStream()),r.Rect=y,r.hasAppearanceStream&&!r.appearanceStreamContent){var b=I8(r);h.push({key:"AP",value:"<</N "+b+">>"}),l.internal.acroformPlugin.xForms.push(b)}if(r.appearanceStreamContent){var v="";for(var w in r.appearanceStreamContent)if(r.appearanceStreamContent.hasOwnProperty(w)){var x=r.appearanceStreamContent[w];if(v+="/"+w+" ",v+="<<",Object.keys(x).length>=1||Array.isArray(x)){for(var m in x)if(x.hasOwnProperty(m)){var C=x[m];typeof C=="function"&&(C=C.call(l,r)),v+="/"+m+" "+C+" ",l.internal.acroformPlugin.xForms.indexOf(C)>=0||l.internal.acroformPlugin.xForms.push(C)}}else typeof(C=x)=="function"&&(C=C.call(l,r)),v+="/"+m+" "+C,l.internal.acroformPlugin.xForms.indexOf(C)>=0||l.internal.acroformPlugin.xForms.push(C);v+=">>"}h.push({key:"AP",value:`<<
`+v+">>"})}l.internal.putStream({additionalKeyValues:h,objectId:r.objId}),l.internal.out("endobj")}u&&P8(l.internal.acroformPlugin.xForms,l)})(t,i)}),i.internal.acroformPlugin.isInitialized=!0}},I4=Ys.__acroform__.arrayToPdfArray=function(i,e,t){var o=function(m){return m};if(Array.isArray(i)){for(var l="[",u=0;u<i.length;u++)switch(u!==0&&(l+=" "),es(i[u])){case"boolean":case"number":case"object":l+=i[u].toString();break;case"string":i[u].substr(0,1)!=="/"?(e!==void 0&&t&&(o=t.internal.getEncryptor(e)),l+="("+i0(o(i[u].toString()))+")"):l+=i[u].toString()}return l+="]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},Rm=function(i,e,t){var o=function(l){return l};return e!==void 0&&t&&(o=t.internal.getEncryptor(e)),(i=i||"").toString(),i="("+i0(o(i))+")"},ih=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(i){this._objId=i}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};ih.prototype.toString=function(){return this.objId+" 0 R"},ih.prototype.putStream=function(){var i=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:i,objectId:this.objId}),this.scope.internal.out("endobj")},ih.prototype.getKeyValueListForStream=function(){var i=[],e=Object.getOwnPropertyNames(this).filter(function(u){return u!="content"&&u!="appearanceStreamContent"&&u!="scope"&&u!="objId"&&u.substring(0,1)!="_"});for(var t in e)if(Object.getOwnPropertyDescriptor(this,e[t]).configurable===!1){var o=e[t],l=this[o];l&&(Array.isArray(l)?i.push({key:o,value:I4(l,this.objId,this.scope)}):l instanceof ih?(l.scope=this.scope,i.push({key:o,value:l.objId+" 0 R"})):typeof l!="function"&&i.push({key:o,value:l}))}return i};var T4=function(){ih.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var i,e=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(t){i=t.trim()},get:function(){return i||null}})};uu(T4,ih);var L4=function(){ih.call(this);var i,e=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return e.length>0?e:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return e}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(i){var t=function(o){return o};return this.scope&&(t=this.scope.internal.getEncryptor(this.objId)),"("+i0(t(i))+")"}},set:function(t){i=t}})};uu(L4,ih);var Pc=function i(){ih.call(this);var e=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return e},set:function(M){if(isNaN(M))throw new Error('Invalid value "'+M+'" for attribute F supplied.');e=M}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return Boolean(ta(e,3))},set:function(M){Boolean(M)===!0?this.F=ia(e,3):this.F=na(e,3)}});var t=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return t},set:function(M){if(isNaN(M))throw new Error('Invalid value "'+M+'" for attribute Ff supplied.');t=M}});var o=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(o.length!==0)return o},set:function(M){o=M!==void 0?M:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!o||isNaN(o[0])?0:o[0]},set:function(M){o[0]=M}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!o||isNaN(o[1])?0:o[1]},set:function(M){o[1]=M}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!o||isNaN(o[2])?0:o[2]},set:function(M){o[2]=M}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!o||isNaN(o[3])?0:o[3]},set:function(M){o[3]=M}});var l="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return l},set:function(M){switch(M){case"/Btn":case"/Tx":case"/Ch":case"/Sig":l=M;break;default:throw new Error('Invalid value "'+M+'" for attribute FT supplied.')}}});var u=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!u||u.length<1){if(this instanceof _1)return;u="FieldObject"+i.FieldNum++}var M=function(O){return O};return this.scope&&(M=this.scope.internal.getEncryptor(this.objId)),"("+i0(M(u))+")"},set:function(M){u=M.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return u},set:function(M){u=M}});var m="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return m},set:function(M){m=M}});var r="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return r},set:function(M){r=M}});var h=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return h},set:function(M){h=M}});var y=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return y===void 0?50/_g:y},set:function(M){y=M}});var b="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return b},set:function(M){b=M}});var v="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!v||this instanceof _1||this instanceof Yf))return Rm(v,this.objId,this.scope)},set:function(M){M=M.toString(),v=M}});var w=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(w)return this instanceof za?w:Rm(w,this.objId,this.scope)},set:function(M){M=M.toString(),w=this instanceof za?M:M.substr(0,1)==="("?w0(M.substr(1,M.length-2)):w0(M)}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof za?w0(w.substr(1,w.length-1)):w},set:function(M){M=M.toString(),w=this instanceof za?"/"+M:M}});var x=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(x)return x},set:function(M){this.V=M}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(x)return this instanceof za?x:Rm(x,this.objId,this.scope)},set:function(M){M=M.toString(),x=this instanceof za?M:M.substr(0,1)==="("?w0(M.substr(1,M.length-2)):w0(M)}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof za?w0(x.substr(1,x.length-1)):x},set:function(M){M=M.toString(),x=this instanceof za?"/"+M:M}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var C,T=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return T},set:function(M){M=Boolean(M),T=M}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(C)return C},set:function(M){C=M}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return Boolean(ta(this.Ff,1))},set:function(M){Boolean(M)===!0?this.Ff=ia(this.Ff,1):this.Ff=na(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return Boolean(ta(this.Ff,2))},set:function(M){Boolean(M)===!0?this.Ff=ia(this.Ff,2):this.Ff=na(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return Boolean(ta(this.Ff,3))},set:function(M){Boolean(M)===!0?this.Ff=ia(this.Ff,3):this.Ff=na(this.Ff,3)}});var S=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(S!==null)return S},set:function(M){if([0,1,2].indexOf(M)===-1)throw new Error('Invalid value "'+M+'" for attribute Q supplied.');S=M}}),Object.defineProperty(this,"textAlign",{get:function(){var M;switch(S){case 0:default:M="left";break;case 1:M="center";break;case 2:M="right"}return M},configurable:!0,enumerable:!0,set:function(M){switch(M){case"right":case 2:S=2;break;case"center":case 1:S=1;break;case"left":case 0:default:S=0}}})};uu(Pc,ih);var q0=function(){Pc.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var i=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return i},set:function(t){i=t}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return i},set:function(t){i=t}});var e=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return I4(e,this.objId,this.scope)},set:function(t){var o,l;l=[],typeof(o=t)=="string"&&(l=function(u,m,r){r||(r=1);for(var h,y=[];h=m.exec(u);)y.push(h[r]);return y}(o,/\((.*?)\)/g)),e=l}}),this.getOptions=function(){return e},this.setOptions=function(t){e=t,this.sort&&e.sort()},this.addOption=function(t){t=(t=t||"").toString(),e.push(t),this.sort&&e.sort()},this.removeOption=function(t,o){for(o=o||!1,t=(t=t||"").toString();e.indexOf(t)!==-1&&(e.splice(e.indexOf(t),1),o!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return Boolean(ta(this.Ff,18))},set:function(t){Boolean(t)===!0?this.Ff=ia(this.Ff,18):this.Ff=na(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return Boolean(ta(this.Ff,19))},set:function(t){this.combo===!0&&(Boolean(t)===!0?this.Ff=ia(this.Ff,19):this.Ff=na(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return Boolean(ta(this.Ff,20))},set:function(t){Boolean(t)===!0?(this.Ff=ia(this.Ff,20),e.sort()):this.Ff=na(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return Boolean(ta(this.Ff,22))},set:function(t){Boolean(t)===!0?this.Ff=ia(this.Ff,22):this.Ff=na(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return Boolean(ta(this.Ff,23))},set:function(t){Boolean(t)===!0?this.Ff=ia(this.Ff,23):this.Ff=na(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return Boolean(ta(this.Ff,27))},set:function(t){Boolean(t)===!0?this.Ff=ia(this.Ff,27):this.Ff=na(this.Ff,27)}}),this.hasAppearanceStream=!1};uu(q0,Pc);var H0=function(){q0.call(this),this.fontName="helvetica",this.combo=!1};uu(H0,q0);var G0=function(){H0.call(this),this.combo=!0};uu(G0,H0);var n1=function(){G0.call(this),this.edit=!0};uu(n1,G0);var za=function(){Pc.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return Boolean(ta(this.Ff,15))},set:function(t){Boolean(t)===!0?this.Ff=ia(this.Ff,15):this.Ff=na(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return Boolean(ta(this.Ff,16))},set:function(t){Boolean(t)===!0?this.Ff=ia(this.Ff,16):this.Ff=na(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return Boolean(ta(this.Ff,17))},set:function(t){Boolean(t)===!0?this.Ff=ia(this.Ff,17):this.Ff=na(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return Boolean(ta(this.Ff,26))},set:function(t){Boolean(t)===!0?this.Ff=ia(this.Ff,26):this.Ff=na(this.Ff,26)}});var i,e={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var t=function(u){return u};if(this.scope&&(t=this.scope.internal.getEncryptor(this.objId)),Object.keys(e).length!==0){var o,l=[];for(o in l.push("<<"),e)l.push("/"+o+" ("+i0(t(e[o]))+")");return l.push(">>"),l.join(`
`)}},set:function(t){es(t)==="object"&&(e=t)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return e.CA||""},set:function(t){typeof t=="string"&&(e.CA=t)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return i},set:function(t){i=t}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return i.substr(1,i.length-1)},set:function(t){i="/"+t}})};uu(za,Pc);var r1=function(){za.call(this),this.pushButton=!0};uu(r1,za);var W0=function(){za.call(this),this.radio=!0,this.pushButton=!1;var i=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return i},set:function(e){i=e!==void 0?e:[]}})};uu(W0,za);var _1=function(){var i,e;Pc.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return i},set:function(l){i=l}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return e},set:function(l){e=l}});var t,o={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var l=function(r){return r};this.scope&&(l=this.scope.internal.getEncryptor(this.objId));var u,m=[];for(u in m.push("<<"),o)m.push("/"+u+" ("+i0(l(o[u]))+")");return m.push(">>"),m.join(`
`)},set:function(l){es(l)==="object"&&(o=l)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return o.CA||""},set:function(l){typeof l=="string"&&(o.CA=l)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return t},set:function(l){t=l}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return t.substr(1,t.length-1)},set:function(l){t="/"+l}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=gr.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};uu(_1,Pc),W0.prototype.setAppearance=function(i){if(!("createAppearanceStream"in i)||!("getCA"in i))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var e in this.Kids)if(this.Kids.hasOwnProperty(e)){var t=this.Kids[e];t.appearanceStreamContent=i.createAppearanceStream(t.optionName),t.caption=i.getCA()}},W0.prototype.createOption=function(i){var e=new _1;return e.Parent=this,e.optionName=i,this.Kids.push(e),D8.call(this.scope,e),e};var o1=function(){za.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=gr.CheckBox.createAppearanceStream()};uu(o1,za);var Yf=function(){Pc.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return Boolean(ta(this.Ff,13))},set:function(e){Boolean(e)===!0?this.Ff=ia(this.Ff,13):this.Ff=na(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return Boolean(ta(this.Ff,21))},set:function(e){Boolean(e)===!0?this.Ff=ia(this.Ff,21):this.Ff=na(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return Boolean(ta(this.Ff,23))},set:function(e){Boolean(e)===!0?this.Ff=ia(this.Ff,23):this.Ff=na(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return Boolean(ta(this.Ff,24))},set:function(e){Boolean(e)===!0?this.Ff=ia(this.Ff,24):this.Ff=na(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return Boolean(ta(this.Ff,25))},set:function(e){Boolean(e)===!0?this.Ff=ia(this.Ff,25):this.Ff=na(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return Boolean(ta(this.Ff,26))},set:function(e){Boolean(e)===!0?this.Ff=ia(this.Ff,26):this.Ff=na(this.Ff,26)}});var i=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return i},set:function(e){i=e}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return i},set:function(e){Number.isInteger(e)&&(i=e)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};uu(Yf,Pc);var s1=function(){Yf.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return Boolean(ta(this.Ff,14))},set:function(i){Boolean(i)===!0?this.Ff=ia(this.Ff,14):this.Ff=na(this.Ff,14)}}),this.password=!0};uu(s1,Yf);var gr={CheckBox:{createAppearanceStream:function(){return{N:{On:gr.CheckBox.YesNormal},D:{On:gr.CheckBox.YesPushDown,Off:gr.CheckBox.OffPushDown}}},YesPushDown:function(i){var e=Zc(i);e.scope=i.scope;var t=[],o=i.scope.internal.getFont(i.fontName,i.fontStyle).id,l=i.scope.__private__.encodeColorString(i.color),u=V2(i,i.caption);return t.push("0.749023 g"),t.push("0 0 "+Qr(gr.internal.getWidth(i))+" "+Qr(gr.internal.getHeight(i))+" re"),t.push("f"),t.push("BMC"),t.push("q"),t.push("0 0 1 rg"),t.push("/"+o+" "+Qr(u.fontSize)+" Tf "+l),t.push("BT"),t.push(u.text),t.push("ET"),t.push("Q"),t.push("EMC"),e.stream=t.join(`
`),e},YesNormal:function(i){var e=Zc(i);e.scope=i.scope;var t=i.scope.internal.getFont(i.fontName,i.fontStyle).id,o=i.scope.__private__.encodeColorString(i.color),l=[],u=gr.internal.getHeight(i),m=gr.internal.getWidth(i),r=V2(i,i.caption);return l.push("1 g"),l.push("0 0 "+Qr(m)+" "+Qr(u)+" re"),l.push("f"),l.push("q"),l.push("0 0 1 rg"),l.push("0 0 "+Qr(m-1)+" "+Qr(u-1)+" re"),l.push("W"),l.push("n"),l.push("0 g"),l.push("BT"),l.push("/"+t+" "+Qr(r.fontSize)+" Tf "+o),l.push(r.text),l.push("ET"),l.push("Q"),e.stream=l.join(`
`),e},OffPushDown:function(i){var e=Zc(i);e.scope=i.scope;var t=[];return t.push("0.749023 g"),t.push("0 0 "+Qr(gr.internal.getWidth(i))+" "+Qr(gr.internal.getHeight(i))+" re"),t.push("f"),e.stream=t.join(`
`),e}},RadioButton:{Circle:{createAppearanceStream:function(i){var e={D:{Off:gr.RadioButton.Circle.OffPushDown},N:{}};return e.N[i]=gr.RadioButton.Circle.YesNormal,e.D[i]=gr.RadioButton.Circle.YesPushDown,e},getCA:function(){return"l"},YesNormal:function(i){var e=Zc(i);e.scope=i.scope;var t=[],o=gr.internal.getWidth(i)<=gr.internal.getHeight(i)?gr.internal.getWidth(i)/4:gr.internal.getHeight(i)/4;o=Number((.9*o).toFixed(5));var l=gr.internal.Bezier_C,u=Number((o*l).toFixed(5));return t.push("q"),t.push("1 0 0 1 "+ef(gr.internal.getWidth(i)/2)+" "+ef(gr.internal.getHeight(i)/2)+" cm"),t.push(o+" 0 m"),t.push(o+" "+u+" "+u+" "+o+" 0 "+o+" c"),t.push("-"+u+" "+o+" -"+o+" "+u+" -"+o+" 0 c"),t.push("-"+o+" -"+u+" -"+u+" -"+o+" 0 -"+o+" c"),t.push(u+" -"+o+" "+o+" -"+u+" "+o+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e},YesPushDown:function(i){var e=Zc(i);e.scope=i.scope;var t=[],o=gr.internal.getWidth(i)<=gr.internal.getHeight(i)?gr.internal.getWidth(i)/4:gr.internal.getHeight(i)/4;o=Number((.9*o).toFixed(5));var l=Number((2*o).toFixed(5)),u=Number((l*gr.internal.Bezier_C).toFixed(5)),m=Number((o*gr.internal.Bezier_C).toFixed(5));return t.push("0.749023 g"),t.push("q"),t.push("1 0 0 1 "+ef(gr.internal.getWidth(i)/2)+" "+ef(gr.internal.getHeight(i)/2)+" cm"),t.push(l+" 0 m"),t.push(l+" "+u+" "+u+" "+l+" 0 "+l+" c"),t.push("-"+u+" "+l+" -"+l+" "+u+" -"+l+" 0 c"),t.push("-"+l+" -"+u+" -"+u+" -"+l+" 0 -"+l+" c"),t.push(u+" -"+l+" "+l+" -"+u+" "+l+" 0 c"),t.push("f"),t.push("Q"),t.push("0 g"),t.push("q"),t.push("1 0 0 1 "+ef(gr.internal.getWidth(i)/2)+" "+ef(gr.internal.getHeight(i)/2)+" cm"),t.push(o+" 0 m"),t.push(o+" "+m+" "+m+" "+o+" 0 "+o+" c"),t.push("-"+m+" "+o+" -"+o+" "+m+" -"+o+" 0 c"),t.push("-"+o+" -"+m+" -"+m+" -"+o+" 0 -"+o+" c"),t.push(m+" -"+o+" "+o+" -"+m+" "+o+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e},OffPushDown:function(i){var e=Zc(i);e.scope=i.scope;var t=[],o=gr.internal.getWidth(i)<=gr.internal.getHeight(i)?gr.internal.getWidth(i)/4:gr.internal.getHeight(i)/4;o=Number((.9*o).toFixed(5));var l=Number((2*o).toFixed(5)),u=Number((l*gr.internal.Bezier_C).toFixed(5));return t.push("0.749023 g"),t.push("q"),t.push("1 0 0 1 "+ef(gr.internal.getWidth(i)/2)+" "+ef(gr.internal.getHeight(i)/2)+" cm"),t.push(l+" 0 m"),t.push(l+" "+u+" "+u+" "+l+" 0 "+l+" c"),t.push("-"+u+" "+l+" -"+l+" "+u+" -"+l+" 0 c"),t.push("-"+l+" -"+u+" -"+u+" -"+l+" 0 -"+l+" c"),t.push(u+" -"+l+" "+l+" -"+u+" "+l+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e}},Cross:{createAppearanceStream:function(i){var e={D:{Off:gr.RadioButton.Cross.OffPushDown},N:{}};return e.N[i]=gr.RadioButton.Cross.YesNormal,e.D[i]=gr.RadioButton.Cross.YesPushDown,e},getCA:function(){return"8"},YesNormal:function(i){var e=Zc(i);e.scope=i.scope;var t=[],o=gr.internal.calculateCross(i);return t.push("q"),t.push("1 1 "+Qr(gr.internal.getWidth(i)-2)+" "+Qr(gr.internal.getHeight(i)-2)+" re"),t.push("W"),t.push("n"),t.push(Qr(o.x1.x)+" "+Qr(o.x1.y)+" m"),t.push(Qr(o.x2.x)+" "+Qr(o.x2.y)+" l"),t.push(Qr(o.x4.x)+" "+Qr(o.x4.y)+" m"),t.push(Qr(o.x3.x)+" "+Qr(o.x3.y)+" l"),t.push("s"),t.push("Q"),e.stream=t.join(`
`),e},YesPushDown:function(i){var e=Zc(i);e.scope=i.scope;var t=gr.internal.calculateCross(i),o=[];return o.push("0.749023 g"),o.push("0 0 "+Qr(gr.internal.getWidth(i))+" "+Qr(gr.internal.getHeight(i))+" re"),o.push("f"),o.push("q"),o.push("1 1 "+Qr(gr.internal.getWidth(i)-2)+" "+Qr(gr.internal.getHeight(i)-2)+" re"),o.push("W"),o.push("n"),o.push(Qr(t.x1.x)+" "+Qr(t.x1.y)+" m"),o.push(Qr(t.x2.x)+" "+Qr(t.x2.y)+" l"),o.push(Qr(t.x4.x)+" "+Qr(t.x4.y)+" m"),o.push(Qr(t.x3.x)+" "+Qr(t.x3.y)+" l"),o.push("s"),o.push("Q"),e.stream=o.join(`
`),e},OffPushDown:function(i){var e=Zc(i);e.scope=i.scope;var t=[];return t.push("0.749023 g"),t.push("0 0 "+Qr(gr.internal.getWidth(i))+" "+Qr(gr.internal.getHeight(i))+" re"),t.push("f"),e.stream=t.join(`
`),e}}},createDefaultAppearanceStream:function(i){var e=i.scope.internal.getFont(i.fontName,i.fontStyle).id,t=i.scope.__private__.encodeColorString(i.color);return"/"+e+" "+i.fontSize+" Tf "+t}};gr.internal={Bezier_C:.551915024494,calculateCross:function(i){var e=gr.internal.getWidth(i),t=gr.internal.getHeight(i),o=Math.min(e,t);return{x1:{x:(e-o)/2,y:(t-o)/2+o},x2:{x:(e-o)/2+o,y:(t-o)/2},x3:{x:(e-o)/2,y:(t-o)/2},x4:{x:(e-o)/2+o,y:(t-o)/2+o}}}},gr.internal.getWidth=function(i){var e=0;return es(i)==="object"&&(e=f_(i.Rect[2])),e},gr.internal.getHeight=function(i){var e=0;return es(i)==="object"&&(e=f_(i.Rect[3])),e};var D8=Ys.addField=function(i){if(M8(this,i),!(i instanceof Pc))throw new Error("Invalid argument passed to jsPDF.addField.");var e;return(e=i).scope.internal.acroformPlugin.printedOut&&(e.scope.internal.acroformPlugin.printedOut=!1,e.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),e.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(e),i.page=i.scope.internal.getCurrentPageInfo().pageNumber,this};Ys.AcroFormChoiceField=q0,Ys.AcroFormListBox=H0,Ys.AcroFormComboBox=G0,Ys.AcroFormEditBox=n1,Ys.AcroFormButton=za,Ys.AcroFormPushButton=r1,Ys.AcroFormRadioButton=W0,Ys.AcroFormCheckBox=o1,Ys.AcroFormTextField=Yf,Ys.AcroFormPasswordField=s1,Ys.AcroFormAppearance=gr,Ys.AcroForm={ChoiceField:q0,ListBox:H0,ComboBox:G0,EditBox:n1,Button:za,PushButton:r1,RadioButton:W0,CheckBox:o1,TextField:Yf,PasswordField:s1,Appearance:gr},Vr.AcroForm={ChoiceField:q0,ListBox:H0,ComboBox:G0,EditBox:n1,Button:za,PushButton:r1,RadioButton:W0,CheckBox:o1,TextField:Yf,PasswordField:s1,Appearance:gr};Vr.AcroForm;function P4(i){return i.reduce(function(e,t,o){return e[t]=o,e},{})}(function(i){i.__addimage__={};var e="UNKNOWN",t={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},o=i.__addimage__.getImageFileTypeByImageData=function(fe,Te){var _e,ve,rt,nt,Tt,We=e;if((Te=Te||e)==="RGBA"||fe.data!==void 0&&fe.data instanceof Uint8ClampedArray&&"height"in fe&&"width"in fe)return"RGBA";if(ee(fe))for(Tt in t)for(rt=t[Tt],_e=0;_e<rt.length;_e+=1){for(nt=!0,ve=0;ve<rt[_e].length;ve+=1)if(rt[_e][ve]!==void 0&&rt[_e][ve]!==fe[ve]){nt=!1;break}if(nt===!0){We=Tt;break}}else for(Tt in t)for(rt=t[Tt],_e=0;_e<rt.length;_e+=1){for(nt=!0,ve=0;ve<rt[_e].length;ve+=1)if(rt[_e][ve]!==void 0&&rt[_e][ve]!==fe.charCodeAt(ve)){nt=!1;break}if(nt===!0){We=Tt;break}}return We===e&&Te!==e&&(We=Te),We},l=function fe(Te){for(var _e=this.internal.write,ve=this.internal.putStream,rt=(0,this.internal.getFilters)();rt.indexOf("FlateEncode")!==-1;)rt.splice(rt.indexOf("FlateEncode"),1);Te.objectId=this.internal.newObject();var nt=[];if(nt.push({key:"Type",value:"/XObject"}),nt.push({key:"Subtype",value:"/Image"}),nt.push({key:"Width",value:Te.width}),nt.push({key:"Height",value:Te.height}),Te.colorSpace===S.INDEXED?nt.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(Te.palette.length/3-1)+" "+("sMask"in Te&&Te.sMask!==void 0?Te.objectId+2:Te.objectId+1)+" 0 R]"}):(nt.push({key:"ColorSpace",value:"/"+Te.colorSpace}),Te.colorSpace===S.DEVICE_CMYK&&nt.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),nt.push({key:"BitsPerComponent",value:Te.bitsPerComponent}),"decodeParameters"in Te&&Te.decodeParameters!==void 0&&nt.push({key:"DecodeParms",value:"<<"+Te.decodeParameters+">>"}),"transparency"in Te&&Array.isArray(Te.transparency)){for(var Tt="",We=0,be=Te.transparency.length;We<be;We++)Tt+=Te.transparency[We]+" "+Te.transparency[We]+" ";nt.push({key:"Mask",value:"["+Tt+"]"})}Te.sMask!==void 0&&nt.push({key:"SMask",value:Te.objectId+1+" 0 R"});var Ce=Te.filter!==void 0?["/"+Te.filter]:void 0;if(ve({data:Te.data,additionalKeyValues:nt,alreadyAppliedFilters:Ce,objectId:Te.objectId}),_e("endobj"),"sMask"in Te&&Te.sMask!==void 0){var Be="/Predictor "+Te.predictor+" /Colors 1 /BitsPerComponent "+Te.bitsPerComponent+" /Columns "+Te.width,le={width:Te.width,height:Te.height,colorSpace:"DeviceGray",bitsPerComponent:Te.bitsPerComponent,decodeParameters:Be,data:Te.sMask};"filter"in Te&&(le.filter=Te.filter),fe.call(this,le)}if(Te.colorSpace===S.INDEXED){var Ee=this.internal.newObject();ve({data:ie(new Uint8Array(Te.palette)),objectId:Ee}),_e("endobj")}},u=function(){var fe=this.internal.collections.addImage_images;for(var Te in fe)l.call(this,fe[Te])},m=function(){var fe,Te=this.internal.collections.addImage_images,_e=this.internal.write;for(var ve in Te)_e("/I"+(fe=Te[ve]).index,fe.objectId,"0","R")},r=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",u),this.internal.events.subscribe("putXobjectDict",m))},h=function(){var fe=this.internal.collections.addImage_images;return r.call(this),fe},y=function(){return Object.keys(this.internal.collections.addImage_images).length},b=function(fe){return typeof i["process"+fe.toUpperCase()]=="function"},v=function(fe){return es(fe)==="object"&&fe.nodeType===1},w=function(fe,Te){if(fe.nodeName==="IMG"&&fe.hasAttribute("src")){var _e=""+fe.getAttribute("src");if(_e.indexOf("data:image/")===0)return Fd(unescape(_e).split("base64,").pop());var ve=i.loadFile(_e,!0);if(ve!==void 0)return ve}if(fe.nodeName==="CANVAS"){if(fe.width===0||fe.height===0)throw new Error("Given canvas must have data. Canvas width: "+fe.width+", height: "+fe.height);var rt;switch(Te){case"PNG":rt="image/png";break;case"WEBP":rt="image/webp";break;case"JPEG":case"JPG":default:rt="image/jpeg"}return Fd(fe.toDataURL(rt,1).split("base64,").pop())}},x=function(fe){var Te=this.internal.collections.addImage_images;if(Te){for(var _e in Te)if(fe===Te[_e].alias)return Te[_e]}},C=function(fe,Te,_e){return fe||Te||(fe=-96,Te=-96),fe<0&&(fe=-1*_e.width*72/fe/this.internal.scaleFactor),Te<0&&(Te=-1*_e.height*72/Te/this.internal.scaleFactor),fe===0&&(fe=Te*_e.width/_e.height),Te===0&&(Te=fe*_e.height/_e.width),[fe,Te]},T=function(fe,Te,_e,ve,rt,nt){var Tt=C.call(this,_e,ve,rt),We=this.internal.getCoordinateString,be=this.internal.getVerticalCoordinateString,Ce=h.call(this);if(_e=Tt[0],ve=Tt[1],Ce[rt.index]=rt,nt){nt*=Math.PI/180;var Be=Math.cos(nt),le=Math.sin(nt),Ee=function(me){return me.toFixed(4)},he=[Ee(Be),Ee(le),Ee(-1*le),Ee(Be),0,0,"cm"]}this.internal.write("q"),nt?(this.internal.write([1,"0","0",1,We(fe),be(Te+ve),"cm"].join(" ")),this.internal.write(he.join(" ")),this.internal.write([We(_e),"0","0",We(ve),"0","0","cm"].join(" "))):this.internal.write([We(_e),"0","0",We(ve),We(fe),be(Te+ve),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+rt.index+" Do"),this.internal.write("Q")},S=i.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};i.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var M=i.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},O=i.__addimage__.sHashCode=function(fe){var Te,_e,ve=0;if(typeof fe=="string")for(_e=fe.length,Te=0;Te<_e;Te++)ve=(ve<<5)-ve+fe.charCodeAt(Te),ve|=0;else if(ee(fe))for(_e=fe.byteLength/2,Te=0;Te<_e;Te++)ve=(ve<<5)-ve+fe[Te],ve|=0;return ve},V=i.__addimage__.validateStringAsBase64=function(fe){(fe=fe||"").toString().trim();var Te=!0;return fe.length===0&&(Te=!1),fe.length%4!=0&&(Te=!1),/^[A-Za-z0-9+/]+$/.test(fe.substr(0,fe.length-2))===!1&&(Te=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(fe.substr(-2))===!1&&(Te=!1),Te},X=i.__addimage__.extractImageFromDataUrl=function(fe){var Te=(fe=fe||"").split("base64,"),_e=null;if(Te.length===2){var ve=/^data:(\w*\/\w*);*(charset=(?!charset=)[\w=-]*)*;*$/.exec(Te[0]);Array.isArray(ve)&&(_e={mimeType:ve[1],charset:ve[2],data:Te[1]})}return _e},Z=i.__addimage__.supportsArrayBuffer=function(){return typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"};i.__addimage__.isArrayBuffer=function(fe){return Z()&&fe instanceof ArrayBuffer};var ee=i.__addimage__.isArrayBufferView=function(fe){return Z()&&typeof Uint32Array<"u"&&(fe instanceof Int8Array||fe instanceof Uint8Array||typeof Uint8ClampedArray<"u"&&fe instanceof Uint8ClampedArray||fe instanceof Int16Array||fe instanceof Uint16Array||fe instanceof Int32Array||fe instanceof Uint32Array||fe instanceof Float32Array||fe instanceof Float64Array)},J=i.__addimage__.binaryStringToUint8Array=function(fe){for(var Te=fe.length,_e=new Uint8Array(Te),ve=0;ve<Te;ve++)_e[ve]=fe.charCodeAt(ve);return _e},ie=i.__addimage__.arrayBufferToBinaryString=function(fe){for(var Te="",_e=ee(fe)?fe:new Uint8Array(fe),ve=0;ve<_e.length;ve+=8192)Te+=String.fromCharCode.apply(null,_e.subarray(ve,ve+8192));return Te};i.addImage=function(){var fe,Te,_e,ve,rt,nt,Tt,We,be;if(typeof arguments[1]=="number"?(Te=e,_e=arguments[1],ve=arguments[2],rt=arguments[3],nt=arguments[4],Tt=arguments[5],We=arguments[6],be=arguments[7]):(Te=arguments[1],_e=arguments[2],ve=arguments[3],rt=arguments[4],nt=arguments[5],Tt=arguments[6],We=arguments[7],be=arguments[8]),es(fe=arguments[0])==="object"&&!v(fe)&&"imageData"in fe){var Ce=fe;fe=Ce.imageData,Te=Ce.format||Te||e,_e=Ce.x||_e||0,ve=Ce.y||ve||0,rt=Ce.w||Ce.width||rt,nt=Ce.h||Ce.height||nt,Tt=Ce.alias||Tt,We=Ce.compression||We,be=Ce.rotation||Ce.angle||be}var Be=this.internal.getFilters();if(We===void 0&&Be.indexOf("FlateEncode")!==-1&&(We="SLOW"),isNaN(_e)||isNaN(ve))throw new Error("Invalid coordinates passed to jsPDF.addImage");r.call(this);var le=ke.call(this,fe,Te,Tt,We);return T.call(this,_e,ve,rt,nt,le,be),this};var ke=function(fe,Te,_e,ve){var rt,nt,Tt;if(typeof fe=="string"&&o(fe)===e){fe=unescape(fe);var We=Le(fe,!1);(We!==""||(We=i.loadFile(fe,!0))!==void 0)&&(fe=We)}if(v(fe)&&(fe=w(fe,Te)),Te=o(fe,Te),!b(Te))throw new Error("addImage does not support files of type '"+Te+"', please ensure that a plugin for '"+Te+"' support is added.");if(((Tt=_e)==null||Tt.length===0)&&(_e=function(be){return typeof be=="string"||ee(be)?O(be):ee(be.data)?O(be.data):null}(fe)),(rt=x.call(this,_e))||(Z()&&(fe instanceof Uint8Array||Te==="RGBA"||(nt=fe,fe=J(fe))),rt=this["process"+Te.toUpperCase()](fe,y.call(this),_e,function(be){return be&&typeof be=="string"&&(be=be.toUpperCase()),be in i.image_compression?be:M.NONE}(ve),nt)),!rt)throw new Error("An unknown error occurred whilst processing the image.");return rt},Le=i.__addimage__.convertBase64ToBinaryString=function(fe,Te){var _e;Te=typeof Te!="boolean"||Te;var ve,rt="";if(typeof fe=="string"){ve=(_e=X(fe))!==null?_e.data:fe;try{rt=Fd(ve)}catch(nt){if(Te)throw V(ve)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+nt.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return rt};i.getImageProperties=function(fe){var Te,_e,ve="";if(v(fe)&&(fe=w(fe)),typeof fe=="string"&&o(fe)===e&&((ve=Le(fe,!1))===""&&(ve=i.loadFile(fe)||""),fe=ve),_e=o(fe),!b(_e))throw new Error("addImage does not support files of type '"+_e+"', please ensure that a plugin for '"+_e+"' support is added.");if(!Z()||fe instanceof Uint8Array||(fe=J(fe)),!(Te=this["process"+_e.toUpperCase()](fe)))throw new Error("An unknown error occurred whilst processing the image");return Te.fileType=_e,Te}})(Vr.API),function(i){var e=function(t){if(t!==void 0&&t!="")return!0};Vr.API.events.push(["addPage",function(t){this.internal.getPageInfo(t.pageNumber).pageContext.annotations=[]}]),i.events.push(["putPage",function(t){for(var o,l,u,m=this.internal.getCoordinateString,r=this.internal.getVerticalCoordinateString,h=this.internal.getPageInfoByObjId(t.objId),y=t.pageContext.annotations,b=!1,v=0;v<y.length&&!b;v++)switch((o=y[v]).type){case"link":(e(o.options.url)||e(o.options.pageNumber))&&(b=!0);break;case"reference":case"text":case"freetext":b=!0}if(b!=0){this.internal.write("/Annots [");for(var w=0;w<y.length;w++){o=y[w];var x=this.internal.pdfEscape,C=this.internal.getEncryptor(t.objId);switch(o.type){case"reference":this.internal.write(" "+o.object.objId+" 0 R ");break;case"text":var T=this.internal.newAdditionalObject(),S=this.internal.newAdditionalObject(),M=this.internal.getEncryptor(T.objId),O=o.title||"Note";u="<</Type /Annot /Subtype /Text "+(l="/Rect ["+m(o.bounds.x)+" "+r(o.bounds.y+o.bounds.h)+" "+m(o.bounds.x+o.bounds.w)+" "+r(o.bounds.y)+"] ")+"/Contents ("+x(M(o.contents))+")",u+=" /Popup "+S.objId+" 0 R",u+=" /P "+h.objId+" 0 R",u+=" /T ("+x(M(O))+") >>",T.content=u;var V=T.objId+" 0 R";u="<</Type /Annot /Subtype /Popup "+(l="/Rect ["+m(o.bounds.x+30)+" "+r(o.bounds.y+o.bounds.h)+" "+m(o.bounds.x+o.bounds.w+30)+" "+r(o.bounds.y)+"] ")+" /Parent "+V,o.open&&(u+=" /Open true"),u+=" >>",S.content=u,this.internal.write(T.objId,"0 R",S.objId,"0 R");break;case"freetext":l="/Rect ["+m(o.bounds.x)+" "+r(o.bounds.y)+" "+m(o.bounds.x+o.bounds.w)+" "+r(o.bounds.y+o.bounds.h)+"] ";var X=o.color||"#000000";u="<</Type /Annot /Subtype /FreeText "+l+"/Contents ("+x(C(o.contents))+")",u+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+X+")",u+=" /Border [0 0 0]",u+=" >>",this.internal.write(u);break;case"link":if(o.options.name){var Z=this.annotations._nameMap[o.options.name];o.options.pageNumber=Z.page,o.options.top=Z.y}else o.options.top||(o.options.top=0);if(l="/Rect ["+o.finalBounds.x+" "+o.finalBounds.y+" "+o.finalBounds.w+" "+o.finalBounds.h+"] ",u="",o.options.url)u="<</Type /Annot /Subtype /Link "+l+"/Border [0 0 0] /A <</S /URI /URI ("+x(C(o.options.url))+") >>";else if(o.options.pageNumber)switch(u="<</Type /Annot /Subtype /Link "+l+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(o.options.pageNumber).objId+" 0 R",o.options.magFactor=o.options.magFactor||"XYZ",o.options.magFactor){case"Fit":u+=" /Fit]";break;case"FitH":u+=" /FitH "+o.options.top+"]";break;case"FitV":o.options.left=o.options.left||0,u+=" /FitV "+o.options.left+"]";break;case"XYZ":default:var ee=r(o.options.top);o.options.left=o.options.left||0,o.options.zoom===void 0&&(o.options.zoom=0),u+=" /XYZ "+o.options.left+" "+ee+" "+o.options.zoom+"]"}u!=""&&(u+=" >>",this.internal.write(u))}}this.internal.write("]")}}]),i.createAnnotation=function(t){var o=this.internal.getCurrentPageInfo();switch(t.type){case"link":this.link(t.bounds.x,t.bounds.y,t.bounds.w,t.bounds.h,t);break;case"text":case"freetext":o.pageContext.annotations.push(t)}},i.link=function(t,o,l,u,m){var r=this.internal.getCurrentPageInfo(),h=this.internal.getCoordinateString,y=this.internal.getVerticalCoordinateString;r.pageContext.annotations.push({finalBounds:{x:h(t),y:y(o),w:h(t+l),h:y(o+u)},options:m,type:"link"})},i.textWithLink=function(t,o,l,u){var m,r,h=this.getTextWidth(t),y=this.internal.getLineHeight()/this.internal.scaleFactor;if(u.maxWidth!==void 0){r=u.maxWidth;var b=this.splitTextToSize(t,r).length;m=Math.ceil(y*b)}else r=h,m=y;return this.text(t,o,l,u),l+=.2*y,u.align==="center"&&(o-=h/2),u.align==="right"&&(o-=h),this.link(o,l-y,r,m,u),h},i.getTextWidth=function(t){var o=this.internal.getFontSize();return this.getStringUnitWidth(t)*o/this.internal.scaleFactor}}(Vr.API),function(i){var e={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},t={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},o={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},l=[1570,1571,1573,1575];i.__arabicParser__={};var u=i.__arabicParser__.isInArabicSubstitutionA=function(T){return e[T.charCodeAt(0)]!==void 0},m=i.__arabicParser__.isArabicLetter=function(T){return typeof T=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(T)},r=i.__arabicParser__.isArabicEndLetter=function(T){return m(T)&&u(T)&&e[T.charCodeAt(0)].length<=2},h=i.__arabicParser__.isArabicAlfLetter=function(T){return m(T)&&l.indexOf(T.charCodeAt(0))>=0};i.__arabicParser__.arabicLetterHasIsolatedForm=function(T){return m(T)&&u(T)&&e[T.charCodeAt(0)].length>=1};var y=i.__arabicParser__.arabicLetterHasFinalForm=function(T){return m(T)&&u(T)&&e[T.charCodeAt(0)].length>=2};i.__arabicParser__.arabicLetterHasInitialForm=function(T){return m(T)&&u(T)&&e[T.charCodeAt(0)].length>=3};var b=i.__arabicParser__.arabicLetterHasMedialForm=function(T){return m(T)&&u(T)&&e[T.charCodeAt(0)].length==4},v=i.__arabicParser__.resolveLigatures=function(T){var S=0,M=t,O="",V=0;for(S=0;S<T.length;S+=1)M[T.charCodeAt(S)]!==void 0?(V++,typeof(M=M[T.charCodeAt(S)])=="number"&&(O+=String.fromCharCode(M),M=t,V=0),S===T.length-1&&(M=t,O+=T.charAt(S-(V-1)),S-=V-1,V=0)):(M=t,O+=T.charAt(S-V),S-=V,V=0);return O};i.__arabicParser__.isArabicDiacritic=function(T){return T!==void 0&&o[T.charCodeAt(0)]!==void 0};var w=i.__arabicParser__.getCorrectForm=function(T,S,M){return m(T)?u(T)===!1?-1:!y(T)||!m(S)&&!m(M)||!m(M)&&r(S)||r(T)&&!m(S)||r(T)&&h(S)||r(T)&&r(S)?0:b(T)&&m(S)&&!r(S)&&m(M)&&y(M)?3:r(T)||!m(M)?1:2:-1},x=function(T){var S=0,M=0,O=0,V="",X="",Z="",ee=(T=T||"").split("\\s+"),J=[];for(S=0;S<ee.length;S+=1){for(J.push(""),M=0;M<ee[S].length;M+=1)V=ee[S][M],X=ee[S][M-1],Z=ee[S][M+1],m(V)?(O=w(V,X,Z),J[S]+=O!==-1?String.fromCharCode(e[V.charCodeAt(0)][O]):V):J[S]+=V;J[S]=v(J[S])}return J.join(" ")},C=i.__arabicParser__.processArabic=i.processArabic=function(){var T,S=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,M=[];if(Array.isArray(S)){var O=0;for(M=[],O=0;O<S.length;O+=1)Array.isArray(S[O])?M.push([x(S[O][0]),S[O][1],S[O][2]]):M.push([x(S[O])]);T=M}else T=x(S);return typeof arguments[0]=="string"?T:(arguments[0].text=T,arguments[0])};i.events.push(["preProcessText",C])}(Vr.API),Vr.API.autoPrint=function(i){var e;switch((i=i||{}).variant=i.variant||"non-conform",i.variant){case"javascript":this.addJS("print({});");break;case"non-conform":default:this.internal.events.subscribe("postPutResources",function(){e=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+e+" 0 R")})}return this},function(i){var e=function(){var t=void 0;Object.defineProperty(this,"pdf",{get:function(){return t},set:function(r){t=r}});var o=150;Object.defineProperty(this,"width",{get:function(){return o},set:function(r){o=isNaN(r)||Number.isInteger(r)===!1||r<0?150:r,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=o+1)}});var l=300;Object.defineProperty(this,"height",{get:function(){return l},set:function(r){l=isNaN(r)||Number.isInteger(r)===!1||r<0?300:r,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=l+1)}});var u=[];Object.defineProperty(this,"childNodes",{get:function(){return u},set:function(r){u=r}});var m={};Object.defineProperty(this,"style",{get:function(){return m},set:function(r){m=r}}),Object.defineProperty(this,"parentNode",{})};e.prototype.getContext=function(t,o){var l;if((t=t||"2d")!=="2d")return null;for(l in o)this.pdf.context2d.hasOwnProperty(l)&&(this.pdf.context2d[l]=o[l]);return this.pdf.context2d._canvas=this,this.pdf.context2d},e.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},i.events.push(["initialized",function(){this.canvas=new e,this.canvas.pdf=this}])}(Vr.API),function(i){var e={left:0,top:0,bottom:0,right:0},t=!1,o=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},e),this.internal.__cell__.margins.width=this.getPageWidth(),l.call(this))},l=function(){this.internal.__cell__.lastCell=new u,this.internal.__cell__.pages=1},u=function(){var h=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return h},set:function(T){h=T}});var y=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return y},set:function(T){y=T}});var b=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return b},set:function(T){b=T}});var v=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return v},set:function(T){v=T}});var w=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return w},set:function(T){w=T}});var x=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return x},set:function(T){x=T}});var C=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return C},set:function(T){C=T}}),this};u.prototype.clone=function(){return new u(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},u.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},i.setHeaderFunction=function(h){return o.call(this),this.internal.__cell__.headerFunction=typeof h=="function"?h:void 0,this},i.getTextDimensions=function(h,y){o.call(this);var b=(y=y||{}).fontSize||this.getFontSize(),v=y.font||this.getFont(),w=y.scaleFactor||this.internal.scaleFactor,x=0,C=0,T=0,S=this;if(!Array.isArray(h)&&typeof h!="string"){if(typeof h!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");h=String(h)}var M=y.maxWidth;M>0?typeof h=="string"?h=this.splitTextToSize(h,M):Object.prototype.toString.call(h)==="[object Array]"&&(h=h.reduce(function(V,X){return V.concat(S.splitTextToSize(X,M))},[])):h=Array.isArray(h)?h:[h];for(var O=0;O<h.length;O++)x<(T=this.getStringUnitWidth(h[O],{font:v})*b)&&(x=T);return x!==0&&(C=h.length),{w:x/=w,h:Math.max((C*b*this.getLineHeightFactor()-b*(this.getLineHeightFactor()-1))/w,0)}},i.cellAddPage=function(){o.call(this),this.addPage();var h=this.internal.__cell__.margins||e;return this.internal.__cell__.lastCell=new u(h.left,h.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var m=i.cell=function(){var h;h=arguments[0]instanceof u?arguments[0]:new u(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),o.call(this);var y=this.internal.__cell__.lastCell,b=this.internal.__cell__.padding,v=this.internal.__cell__.margins||e,w=this.internal.__cell__.tableHeaderRow,x=this.internal.__cell__.printHeaders;return y.lineNumber!==void 0&&(y.lineNumber===h.lineNumber?(h.x=(y.x||0)+(y.width||0),h.y=y.y||0):y.y+y.height+h.height+v.bottom>this.getPageHeight()?(this.cellAddPage(),h.y=v.top,x&&w&&(this.printHeaderRow(h.lineNumber,!0),h.y+=w[0].height)):h.y=y.y+y.height||h.y),h.text[0]!==void 0&&(this.rect(h.x,h.y,h.width,h.height,t===!0?"FD":void 0),h.align==="right"?this.text(h.text,h.x+h.width-b,h.y+b,{align:"right",baseline:"top"}):h.align==="center"?this.text(h.text,h.x+h.width/2,h.y+b,{align:"center",baseline:"top",maxWidth:h.width-b-b}):this.text(h.text,h.x+b,h.y+b,{align:"left",baseline:"top",maxWidth:h.width-b-b})),this.internal.__cell__.lastCell=h,this};i.table=function(h,y,b,v,w){if(o.call(this),!b)throw new Error("No data for PDF table.");var x,C,T,S,M=[],O=[],V=[],X={},Z={},ee=[],J=[],ie=(w=w||{}).autoSize||!1,ke=w.printHeaders!==!1,Le=w.css&&w.css["font-size"]!==void 0?16*w.css["font-size"]:w.fontSize||12,fe=w.margins||Object.assign({width:this.getPageWidth()},e),Te=typeof w.padding=="number"?w.padding:3,_e=w.headerBackgroundColor||"#c8c8c8",ve=w.headerTextColor||"#000";if(l.call(this),this.internal.__cell__.printHeaders=ke,this.internal.__cell__.margins=fe,this.internal.__cell__.table_font_size=Le,this.internal.__cell__.padding=Te,this.internal.__cell__.headerBackgroundColor=_e,this.internal.__cell__.headerTextColor=ve,this.setFontSize(Le),v==null)O=M=Object.keys(b[0]),V=M.map(function(){return"left"});else if(Array.isArray(v)&&es(v[0])==="object")for(M=v.map(function(Ce){return Ce.name}),O=v.map(function(Ce){return Ce.prompt||Ce.name||""}),V=v.map(function(Ce){return Ce.align||"left"}),x=0;x<v.length;x+=1)Z[v[x].name]=v[x].width*(19.049976/25.4);else Array.isArray(v)&&typeof v[0]=="string"&&(O=M=v,V=M.map(function(){return"left"}));if(ie||Array.isArray(v)&&typeof v[0]=="string")for(x=0;x<M.length;x+=1){for(X[S=M[x]]=b.map(function(Ce){return Ce[S]}),this.setFont(void 0,"bold"),ee.push(this.getTextDimensions(O[x],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),C=X[S],this.setFont(void 0,"normal"),T=0;T<C.length;T+=1)ee.push(this.getTextDimensions(C[T],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);Z[S]=Math.max.apply(null,ee)+Te+Te,ee=[]}if(ke){var rt={};for(x=0;x<M.length;x+=1)rt[M[x]]={},rt[M[x]].text=O[x],rt[M[x]].align=V[x];var nt=r.call(this,rt,Z);J=M.map(function(Ce){return new u(h,y,Z[Ce],nt,rt[Ce].text,void 0,rt[Ce].align)}),this.setTableHeaderRow(J),this.printHeaderRow(1,!1)}var Tt=v.reduce(function(Ce,Be){return Ce[Be.name]=Be.align,Ce},{});for(x=0;x<b.length;x+=1){"rowStart"in w&&w.rowStart instanceof Function&&w.rowStart({row:x,data:b[x]},this);var We=r.call(this,b[x],Z);for(T=0;T<M.length;T+=1){var be=b[x][M[T]];"cellStart"in w&&w.cellStart instanceof Function&&w.cellStart({row:x,col:T,data:be},this),m.call(this,new u(h,y,Z[M[T]],We,be,x+2,Tt[M[T]]))}}return this.internal.__cell__.table_x=h,this.internal.__cell__.table_y=y,this};var r=function(h,y){var b=this.internal.__cell__.padding,v=this.internal.__cell__.table_font_size,w=this.internal.scaleFactor;return Object.keys(h).map(function(x){var C=h[x];return this.splitTextToSize(C.hasOwnProperty("text")?C.text:C,y[x]-b-b)},this).map(function(x){return this.getLineHeightFactor()*x.length*v/w+b+b},this).reduce(function(x,C){return Math.max(x,C)},0)};i.setTableHeaderRow=function(h){o.call(this),this.internal.__cell__.tableHeaderRow=h},i.printHeaderRow=function(h,y){if(o.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var b;if(t=!0,typeof this.internal.__cell__.headerFunction=="function"){var v=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new u(v[0],v[1],v[2],v[3],void 0,-1)}this.setFont(void 0,"bold");for(var w=[],x=0;x<this.internal.__cell__.tableHeaderRow.length;x+=1){b=this.internal.__cell__.tableHeaderRow[x].clone(),y&&(b.y=this.internal.__cell__.margins.top||0,w.push(b)),b.lineNumber=h;var C=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),m.call(this,b),this.setTextColor(C)}w.length>0&&this.setTableHeaderRow(w),this.setFont(void 0,"normal"),t=!1}}(Vr.API);var M4={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},D4=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],q2=P4(D4),O4=[100,200,300,400,500,600,700,800,900],O8=P4(O4);function H2(i){var e=i.family.replace(/"|'/g,"").toLowerCase(),t=function(u){return M4[u=u||"normal"]?u:"normal"}(i.style),o=function(u){if(!u)return 400;if(typeof u=="number")return u>=100&&u<=900&&u%100==0?u:400;if(/^\d00$/.test(u))return parseInt(u);switch(u){case"bold":return 700;case"normal":default:return 400}}(i.weight),l=function(u){return typeof q2[u=u||"normal"]=="number"?u:"normal"}(i.stretch);return{family:e,style:t,weight:o,stretch:l,src:i.src||[],ref:i.ref||{name:e,style:[l,t,o].join(" ")}}}function d_(i,e,t,o){var l;for(l=t;l>=0&&l<e.length;l+=o)if(i[e[l]])return i[e[l]];for(l=t;l>=0&&l<e.length;l-=o)if(i[e[l]])return i[e[l]]}var F8={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},p_={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function m_(i){return[i.stretch,i.style,i.weight,i.family].join(" ")}function R8(i,e,t){for(var o=(t=t||{}).defaultFontFamily||"times",l=Object.assign({},F8,t.genericFontFamilies||{}),u=null,m=null,r=0;r<e.length;++r)if(l[(u=H2(e[r])).family]&&(u.family=l[u.family]),i.hasOwnProperty(u.family)){m=i[u.family];break}if(!(m=m||i[o]))throw new Error("Could not find a font-family for the rule '"+m_(u)+"' and default family '"+o+"'.");if(m=function(h,y){if(y[h])return y[h];var b=q2[h],v=b<=q2.normal?-1:1,w=d_(y,D4,b,v);if(!w)throw new Error("Could not find a matching font-stretch value for "+h);return w}(u.stretch,m),m=function(h,y){if(y[h])return y[h];for(var b=M4[h],v=0;v<b.length;++v)if(y[b[v]])return y[b[v]];throw new Error("Could not find a matching font-style for "+h)}(u.style,m),!(m=function(h,y){if(y[h])return y[h];if(h===400&&y[500])return y[500];if(h===500&&y[400])return y[400];var b=O8[h],v=d_(y,O4,b,h<400?-1:1);if(!v)throw new Error("Could not find a matching font-weight for value "+h);return v}(u.weight,m)))throw new Error("Failed to resolve a font for the rule '"+m_(u)+"'.");return m}function g_(i){return i.trimLeft()}function B8(i,e){for(var t=0;t<i.length;){if(i.charAt(t)===e)return[i.substring(0,t),i.substring(t+1)];t+=1}return null}function z8(i){var e=i.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return e===null?null:[e[0],i.substring(e[0].length)]}var Up,y_,__,Bm=["times"];(function(i){var e,t,o,l,u,m,r,h,y,b=function(le){return le=le||{},this.isStrokeTransparent=le.isStrokeTransparent||!1,this.strokeOpacity=le.strokeOpacity||1,this.strokeStyle=le.strokeStyle||"#000000",this.fillStyle=le.fillStyle||"#000000",this.isFillTransparent=le.isFillTransparent||!1,this.fillOpacity=le.fillOpacity||1,this.font=le.font||"10px sans-serif",this.textBaseline=le.textBaseline||"alphabetic",this.textAlign=le.textAlign||"left",this.lineWidth=le.lineWidth||1,this.lineJoin=le.lineJoin||"miter",this.lineCap=le.lineCap||"butt",this.path=le.path||[],this.transform=le.transform!==void 0?le.transform.clone():new h,this.globalCompositeOperation=le.globalCompositeOperation||"normal",this.globalAlpha=le.globalAlpha||1,this.clip_path=le.clip_path||[],this.currentPoint=le.currentPoint||new m,this.miterLimit=le.miterLimit||10,this.lastPoint=le.lastPoint||new m,this.lineDashOffset=le.lineDashOffset||0,this.lineDash=le.lineDash||[],this.margin=le.margin||[0,0,0,0],this.prevPageLastElemOffset=le.prevPageLastElemOffset||0,this.ignoreClearRect=typeof le.ignoreClearRect!="boolean"||le.ignoreClearRect,this};i.events.push(["initialized",function(){this.context2d=new v(this),e=this.internal.f2,t=this.internal.getCoordinateString,o=this.internal.getVerticalCoordinateString,l=this.internal.getHorizontalCoordinate,u=this.internal.getVerticalCoordinate,m=this.internal.Point,r=this.internal.Rectangle,h=this.internal.Matrix,y=new b}]);var v=function(le){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var Ee=le;Object.defineProperty(this,"pdf",{get:function(){return Ee}});var he=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return he},set:function(bt){he=Boolean(bt)}});var me=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return me},set:function(bt){me=Boolean(bt)}});var Fe=0;Object.defineProperty(this,"posX",{get:function(){return Fe},set:function(bt){isNaN(bt)||(Fe=bt)}});var Xe=0;Object.defineProperty(this,"posY",{get:function(){return Xe},set:function(bt){isNaN(bt)||(Xe=bt)}}),Object.defineProperty(this,"margin",{get:function(){return y.margin},set:function(bt){var $e;typeof bt=="number"?$e=[bt,bt,bt,bt]:(($e=new Array(4))[0]=bt[0],$e[1]=bt.length>=2?bt[1]:$e[0],$e[2]=bt.length>=3?bt[2]:$e[0],$e[3]=bt.length>=4?bt[3]:$e[1]),y.margin=$e}});var lt=!1;Object.defineProperty(this,"autoPaging",{get:function(){return lt},set:function(bt){lt=bt}});var Ye=0;Object.defineProperty(this,"lastBreak",{get:function(){return Ye},set:function(bt){Ye=bt}});var Ke=[];Object.defineProperty(this,"pageBreaks",{get:function(){return Ke},set:function(bt){Ke=bt}}),Object.defineProperty(this,"ctx",{get:function(){return y},set:function(bt){bt instanceof b&&(y=bt)}}),Object.defineProperty(this,"path",{get:function(){return y.path},set:function(bt){y.path=bt}});var Lt=[];Object.defineProperty(this,"ctxStack",{get:function(){return Lt},set:function(bt){Lt=bt}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(bt){var $e;$e=w(bt),this.ctx.fillStyle=$e.style,this.ctx.isFillTransparent=$e.a===0,this.ctx.fillOpacity=$e.a,this.pdf.setFillColor($e.r,$e.g,$e.b,{a:$e.a}),this.pdf.setTextColor($e.r,$e.g,$e.b,{a:$e.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(bt){var $e=w(bt);this.ctx.strokeStyle=$e.style,this.ctx.isStrokeTransparent=$e.a===0,this.ctx.strokeOpacity=$e.a,$e.a===0?this.pdf.setDrawColor(255,255,255):($e.a,this.pdf.setDrawColor($e.r,$e.g,$e.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(bt){["butt","round","square"].indexOf(bt)!==-1&&(this.ctx.lineCap=bt,this.pdf.setLineCap(bt))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(bt){isNaN(bt)||(this.ctx.lineWidth=bt,this.pdf.setLineWidth(bt))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(bt){["bevel","round","miter"].indexOf(bt)!==-1&&(this.ctx.lineJoin=bt,this.pdf.setLineJoin(bt))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(bt){isNaN(bt)||(this.ctx.miterLimit=bt,this.pdf.setMiterLimit(bt))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(bt){this.ctx.textBaseline=bt}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(bt){["right","end","center","left","start"].indexOf(bt)!==-1&&(this.ctx.textAlign=bt)}});var $t=null;function dt(bt,$e){if($t===null){var Yt=function(li){var Zt=[];return Object.keys(li).forEach(function(Ci){li[Ci].forEach(function(Li){var Vt=null;switch(Li){case"bold":Vt={family:Ci,weight:"bold"};break;case"italic":Vt={family:Ci,style:"italic"};break;case"bolditalic":Vt={family:Ci,weight:"bold",style:"italic"};break;case"":case"normal":Vt={family:Ci}}Vt!==null&&(Vt.ref={name:Ci,style:Li},Zt.push(Vt))})}),Zt}(bt.getFontList());$t=function(li){for(var Zt={},Ci=0;Ci<li.length;++Ci){var Li=H2(li[Ci]),Vt=Li.family,mi=Li.stretch,Qi=Li.style,xi=Li.weight;Zt[Vt]=Zt[Vt]||{},Zt[Vt][mi]=Zt[Vt][mi]||{},Zt[Vt][mi][Qi]=Zt[Vt][mi][Qi]||{},Zt[Vt][mi][Qi][xi]=Li}return Zt}(Yt.concat($e))}return $t}var wt=null;Object.defineProperty(this,"fontFaces",{get:function(){return wt},set:function(bt){$t=null,wt=bt}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(bt){var $e;if(this.ctx.font=bt,($e=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(bt))!==null){var Yt=$e[1],li=($e[2],$e[3]),Zt=$e[4],Ci=($e[5],$e[6]),Li=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(Zt)[2];Zt=Math.floor(Li==="px"?parseFloat(Zt)*this.pdf.internal.scaleFactor:Li==="em"?parseFloat(Zt)*this.pdf.getFontSize():parseFloat(Zt)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(Zt);var Vt=function(ae){var et,vt,Wt=[],di=ae.trim();if(di==="")return Bm;if(di in p_)return[p_[di]];for(;di!=="";){switch(vt=null,et=(di=g_(di)).charAt(0)){case'"':case"'":vt=B8(di.substring(1),et);break;default:vt=z8(di)}if(vt===null||(Wt.push(vt[0]),(di=g_(vt[1]))!==""&&di.charAt(0)!==","))return Bm;di=di.replace(/^,/,"")}return Wt}(Ci);if(this.fontFaces){var mi=R8(dt(this.pdf,this.fontFaces),Vt.map(function(ae){return{family:ae,stretch:"normal",weight:li,style:Yt}}));this.pdf.setFont(mi.ref.name,mi.ref.style)}else{var Qi="";(li==="bold"||parseInt(li,10)>=700||Yt==="bold")&&(Qi="bold"),Yt==="italic"&&(Qi+="italic"),Qi.length===0&&(Qi="normal");for(var xi="",Jt={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},Me=0;Me<Vt.length;Me++){if(this.pdf.internal.getFont(Vt[Me],Qi,{noFallback:!0,disableWarning:!0})!==void 0){xi=Vt[Me];break}if(Qi==="bolditalic"&&this.pdf.internal.getFont(Vt[Me],"bold",{noFallback:!0,disableWarning:!0})!==void 0)xi=Vt[Me],Qi="bold";else if(this.pdf.internal.getFont(Vt[Me],"normal",{noFallback:!0,disableWarning:!0})!==void 0){xi=Vt[Me],Qi="normal";break}}if(xi===""){for(var Q=0;Q<Vt.length;Q++)if(Jt[Vt[Q]]){xi=Jt[Vt[Q]];break}}xi=xi===""?"Times":xi,this.pdf.setFont(xi,Qi)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(bt){this.ctx.globalCompositeOperation=bt}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(bt){this.ctx.globalAlpha=bt}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(bt){this.ctx.lineDashOffset=bt,Be.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(bt){this.ctx.lineDash=bt,Be.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(bt){this.ctx.ignoreClearRect=Boolean(bt)}})};v.prototype.setLineDash=function(le){this.lineDash=le},v.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},v.prototype.fill=function(){X.call(this,"fill",!1)},v.prototype.stroke=function(){X.call(this,"stroke",!1)},v.prototype.beginPath=function(){this.path=[{type:"begin"}]},v.prototype.moveTo=function(le,Ee){if(isNaN(le)||isNaN(Ee))throw fs.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var he=this.ctx.transform.applyToPoint(new m(le,Ee));this.path.push({type:"mt",x:he.x,y:he.y}),this.ctx.lastPoint=new m(le,Ee)},v.prototype.closePath=function(){var le=new m(0,0),Ee=0;for(Ee=this.path.length-1;Ee!==-1;Ee--)if(this.path[Ee].type==="begin"&&es(this.path[Ee+1])==="object"&&typeof this.path[Ee+1].x=="number"){le=new m(this.path[Ee+1].x,this.path[Ee+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new m(le.x,le.y)},v.prototype.lineTo=function(le,Ee){if(isNaN(le)||isNaN(Ee))throw fs.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var he=this.ctx.transform.applyToPoint(new m(le,Ee));this.path.push({type:"lt",x:he.x,y:he.y}),this.ctx.lastPoint=new m(he.x,he.y)},v.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),X.call(this,null,!0)},v.prototype.quadraticCurveTo=function(le,Ee,he,me){if(isNaN(he)||isNaN(me)||isNaN(le)||isNaN(Ee))throw fs.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var Fe=this.ctx.transform.applyToPoint(new m(he,me)),Xe=this.ctx.transform.applyToPoint(new m(le,Ee));this.path.push({type:"qct",x1:Xe.x,y1:Xe.y,x:Fe.x,y:Fe.y}),this.ctx.lastPoint=new m(Fe.x,Fe.y)},v.prototype.bezierCurveTo=function(le,Ee,he,me,Fe,Xe){if(isNaN(Fe)||isNaN(Xe)||isNaN(le)||isNaN(Ee)||isNaN(he)||isNaN(me))throw fs.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var lt=this.ctx.transform.applyToPoint(new m(Fe,Xe)),Ye=this.ctx.transform.applyToPoint(new m(le,Ee)),Ke=this.ctx.transform.applyToPoint(new m(he,me));this.path.push({type:"bct",x1:Ye.x,y1:Ye.y,x2:Ke.x,y2:Ke.y,x:lt.x,y:lt.y}),this.ctx.lastPoint=new m(lt.x,lt.y)},v.prototype.arc=function(le,Ee,he,me,Fe,Xe){if(isNaN(le)||isNaN(Ee)||isNaN(he)||isNaN(me)||isNaN(Fe))throw fs.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(Xe=Boolean(Xe),!this.ctx.transform.isIdentity){var lt=this.ctx.transform.applyToPoint(new m(le,Ee));le=lt.x,Ee=lt.y;var Ye=this.ctx.transform.applyToPoint(new m(0,he)),Ke=this.ctx.transform.applyToPoint(new m(0,0));he=Math.sqrt(Math.pow(Ye.x-Ke.x,2)+Math.pow(Ye.y-Ke.y,2))}Math.abs(Fe-me)>=2*Math.PI&&(me=0,Fe=2*Math.PI),this.path.push({type:"arc",x:le,y:Ee,radius:he,startAngle:me,endAngle:Fe,counterclockwise:Xe})},v.prototype.arcTo=function(le,Ee,he,me,Fe){throw new Error("arcTo not implemented.")},v.prototype.rect=function(le,Ee,he,me){if(isNaN(le)||isNaN(Ee)||isNaN(he)||isNaN(me))throw fs.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(le,Ee),this.lineTo(le+he,Ee),this.lineTo(le+he,Ee+me),this.lineTo(le,Ee+me),this.lineTo(le,Ee),this.lineTo(le+he,Ee),this.lineTo(le,Ee)},v.prototype.fillRect=function(le,Ee,he,me){if(isNaN(le)||isNaN(Ee)||isNaN(he)||isNaN(me))throw fs.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!x.call(this)){var Fe={};this.lineCap!=="butt"&&(Fe.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(Fe.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(le,Ee,he,me),this.fill(),Fe.hasOwnProperty("lineCap")&&(this.lineCap=Fe.lineCap),Fe.hasOwnProperty("lineJoin")&&(this.lineJoin=Fe.lineJoin)}},v.prototype.strokeRect=function(le,Ee,he,me){if(isNaN(le)||isNaN(Ee)||isNaN(he)||isNaN(me))throw fs.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");C.call(this)||(this.beginPath(),this.rect(le,Ee,he,me),this.stroke())},v.prototype.clearRect=function(le,Ee,he,me){if(isNaN(le)||isNaN(Ee)||isNaN(he)||isNaN(me))throw fs.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(le,Ee,he,me))},v.prototype.save=function(le){le=typeof le!="boolean"||le;for(var Ee=this.pdf.internal.getCurrentPageInfo().pageNumber,he=0;he<this.pdf.internal.getNumberOfPages();he++)this.pdf.setPage(he+1),this.pdf.internal.out("q");if(this.pdf.setPage(Ee),le){this.ctx.fontSize=this.pdf.internal.getFontSize();var me=new b(this.ctx);this.ctxStack.push(this.ctx),this.ctx=me}},v.prototype.restore=function(le){le=typeof le!="boolean"||le;for(var Ee=this.pdf.internal.getCurrentPageInfo().pageNumber,he=0;he<this.pdf.internal.getNumberOfPages();he++)this.pdf.setPage(he+1),this.pdf.internal.out("Q");this.pdf.setPage(Ee),le&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},v.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var w=function(le){var Ee,he,me,Fe;if(le.isCanvasGradient===!0&&(le=le.getColor()),!le)return{r:0,g:0,b:0,a:0,style:le};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(le))Ee=0,he=0,me=0,Fe=0;else{var Xe=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(le);if(Xe!==null)Ee=parseInt(Xe[1]),he=parseInt(Xe[2]),me=parseInt(Xe[3]),Fe=1;else if((Xe=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(le))!==null)Ee=parseInt(Xe[1]),he=parseInt(Xe[2]),me=parseInt(Xe[3]),Fe=parseFloat(Xe[4]);else{if(Fe=1,typeof le=="string"&&le.charAt(0)!=="#"){var lt=new S4(le);le=lt.ok?lt.toHex():"#000000"}le.length===4?(Ee=le.substring(1,2),Ee+=Ee,he=le.substring(2,3),he+=he,me=le.substring(3,4),me+=me):(Ee=le.substring(1,3),he=le.substring(3,5),me=le.substring(5,7)),Ee=parseInt(Ee,16),he=parseInt(he,16),me=parseInt(me,16)}}return{r:Ee,g:he,b:me,a:Fe,style:le}},x=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},C=function(){return Boolean(this.ctx.isStrokeTransparent||this.globalAlpha==0)};v.prototype.fillText=function(le,Ee,he,me){if(isNaN(Ee)||isNaN(he)||typeof le!="string")throw fs.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(me=isNaN(me)?void 0:me,!x.call(this)){var Fe=We(this.ctx.transform.rotation),Xe=this.ctx.transform.scaleX;Te.call(this,{text:le,x:Ee,y:he,scale:Xe,angle:Fe,align:this.textAlign,maxWidth:me})}},v.prototype.strokeText=function(le,Ee,he,me){if(isNaN(Ee)||isNaN(he)||typeof le!="string")throw fs.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!C.call(this)){me=isNaN(me)?void 0:me;var Fe=We(this.ctx.transform.rotation),Xe=this.ctx.transform.scaleX;Te.call(this,{text:le,x:Ee,y:he,scale:Xe,renderingMode:"stroke",angle:Fe,align:this.textAlign,maxWidth:me})}},v.prototype.measureText=function(le){if(typeof le!="string")throw fs.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var Ee=this.pdf,he=this.pdf.internal.scaleFactor,me=Ee.internal.getFontSize(),Fe=Ee.getStringUnitWidth(le)*me/Ee.internal.scaleFactor,Xe=function(lt){var Ye=(lt=lt||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return Ye}}),this};return new Xe({width:Fe*=Math.round(96*he/72*1e4)/1e4})},v.prototype.scale=function(le,Ee){if(isNaN(le)||isNaN(Ee))throw fs.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var he=new h(le,0,0,Ee,0,0);this.ctx.transform=this.ctx.transform.multiply(he)},v.prototype.rotate=function(le){if(isNaN(le))throw fs.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var Ee=new h(Math.cos(le),Math.sin(le),-Math.sin(le),Math.cos(le),0,0);this.ctx.transform=this.ctx.transform.multiply(Ee)},v.prototype.translate=function(le,Ee){if(isNaN(le)||isNaN(Ee))throw fs.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var he=new h(1,0,0,1,le,Ee);this.ctx.transform=this.ctx.transform.multiply(he)},v.prototype.transform=function(le,Ee,he,me,Fe,Xe){if(isNaN(le)||isNaN(Ee)||isNaN(he)||isNaN(me)||isNaN(Fe)||isNaN(Xe))throw fs.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var lt=new h(le,Ee,he,me,Fe,Xe);this.ctx.transform=this.ctx.transform.multiply(lt)},v.prototype.setTransform=function(le,Ee,he,me,Fe,Xe){le=isNaN(le)?1:le,Ee=isNaN(Ee)?0:Ee,he=isNaN(he)?0:he,me=isNaN(me)?1:me,Fe=isNaN(Fe)?0:Fe,Xe=isNaN(Xe)?0:Xe,this.ctx.transform=new h(le,Ee,he,me,Fe,Xe)};var T=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};v.prototype.drawImage=function(le,Ee,he,me,Fe,Xe,lt,Ye,Ke){var Lt=this.pdf.getImageProperties(le),$t=1,dt=1,wt=1,bt=1;me!==void 0&&Ye!==void 0&&(wt=Ye/me,bt=Ke/Fe,$t=Lt.width/me*Ye/me,dt=Lt.height/Fe*Ke/Fe),Xe===void 0&&(Xe=Ee,lt=he,Ee=0,he=0),me!==void 0&&Ye===void 0&&(Ye=me,Ke=Fe),me===void 0&&Ye===void 0&&(Ye=Lt.width,Ke=Lt.height);for(var $e,Yt=this.ctx.transform.decompose(),li=We(Yt.rotate.shx),Zt=new h,Ci=(Zt=(Zt=(Zt=Zt.multiply(Yt.translate)).multiply(Yt.skew)).multiply(Yt.scale)).applyToRectangle(new r(Xe-Ee*wt,lt-he*bt,me*$t,Fe*dt)),Li=S.call(this,Ci),Vt=[],mi=0;mi<Li.length;mi+=1)Vt.indexOf(Li[mi])===-1&&Vt.push(Li[mi]);if(V(Vt),this.autoPaging)for(var Qi=Vt[0],xi=Vt[Vt.length-1],Jt=Qi;Jt<xi+1;Jt++){this.pdf.setPage(Jt);var Me=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Q=Jt===1?this.posY+this.margin[0]:this.margin[0],ae=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],et=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],vt=Jt===1?0:ae+(Jt-2)*et;if(this.ctx.clip_path.length!==0){var Wt=this.path;$e=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=O($e,this.posX+this.margin[3],-vt+Q+this.ctx.prevPageLastElemOffset),Z.call(this,"fill",!0),this.path=Wt}var di=JSON.parse(JSON.stringify(Ci));di=O([di],this.posX+this.margin[3],-vt+Q+this.ctx.prevPageLastElemOffset)[0];var xn=(Jt>Qi||Jt<xi)&&T.call(this);xn&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Me,et,null).clip().discardPath()),this.pdf.addImage(le,"JPEG",di.x,di.y,di.w,di.h,null,null,li),xn&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(le,"JPEG",Ci.x,Ci.y,Ci.w,Ci.h,null,null,li)};var S=function(le,Ee,he){var me=[];Ee=Ee||this.pdf.internal.pageSize.width,he=he||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var Fe=this.posY+this.ctx.prevPageLastElemOffset;switch(le.type){default:case"mt":case"lt":me.push(Math.floor((le.y+Fe)/he)+1);break;case"arc":me.push(Math.floor((le.y+Fe-le.radius)/he)+1),me.push(Math.floor((le.y+Fe+le.radius)/he)+1);break;case"qct":var Xe=be(this.ctx.lastPoint.x,this.ctx.lastPoint.y,le.x1,le.y1,le.x,le.y);me.push(Math.floor((Xe.y+Fe)/he)+1),me.push(Math.floor((Xe.y+Xe.h+Fe)/he)+1);break;case"bct":var lt=Ce(this.ctx.lastPoint.x,this.ctx.lastPoint.y,le.x1,le.y1,le.x2,le.y2,le.x,le.y);me.push(Math.floor((lt.y+Fe)/he)+1),me.push(Math.floor((lt.y+lt.h+Fe)/he)+1);break;case"rect":me.push(Math.floor((le.y+Fe)/he)+1),me.push(Math.floor((le.y+le.h+Fe)/he)+1)}for(var Ye=0;Ye<me.length;Ye+=1)for(;this.pdf.internal.getNumberOfPages()<me[Ye];)M.call(this);return me},M=function(){var le=this.fillStyle,Ee=this.strokeStyle,he=this.font,me=this.lineCap,Fe=this.lineWidth,Xe=this.lineJoin;this.pdf.addPage(),this.fillStyle=le,this.strokeStyle=Ee,this.font=he,this.lineCap=me,this.lineWidth=Fe,this.lineJoin=Xe},O=function(le,Ee,he){for(var me=0;me<le.length;me++)switch(le[me].type){case"bct":le[me].x2+=Ee,le[me].y2+=he;case"qct":le[me].x1+=Ee,le[me].y1+=he;case"mt":case"lt":case"arc":default:le[me].x+=Ee,le[me].y+=he}return le},V=function(le){return le.sort(function(Ee,he){return Ee-he})},X=function(le,Ee){for(var he,me,Fe=this.fillStyle,Xe=this.strokeStyle,lt=this.lineCap,Ye=this.lineWidth,Ke=Math.abs(Ye*this.ctx.transform.scaleX),Lt=this.lineJoin,$t=JSON.parse(JSON.stringify(this.path)),dt=JSON.parse(JSON.stringify(this.path)),wt=[],bt=0;bt<dt.length;bt++)if(dt[bt].x!==void 0)for(var $e=S.call(this,dt[bt]),Yt=0;Yt<$e.length;Yt+=1)wt.indexOf($e[Yt])===-1&&wt.push($e[Yt]);for(var li=0;li<wt.length;li++)for(;this.pdf.internal.getNumberOfPages()<wt[li];)M.call(this);if(V(wt),this.autoPaging)for(var Zt=wt[0],Ci=wt[wt.length-1],Li=Zt;Li<Ci+1;Li++){this.pdf.setPage(Li),this.fillStyle=Fe,this.strokeStyle=Xe,this.lineCap=lt,this.lineWidth=Ke,this.lineJoin=Lt;var Vt=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],mi=Li===1?this.posY+this.margin[0]:this.margin[0],Qi=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],xi=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Jt=Li===1?0:Qi+(Li-2)*xi;if(this.ctx.clip_path.length!==0){var Me=this.path;he=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=O(he,this.posX+this.margin[3],-Jt+mi+this.ctx.prevPageLastElemOffset),Z.call(this,le,!0),this.path=Me}if(me=JSON.parse(JSON.stringify($t)),this.path=O(me,this.posX+this.margin[3],-Jt+mi+this.ctx.prevPageLastElemOffset),Ee===!1||Li===0){var Q=(Li>Zt||Li<Ci)&&T.call(this);Q&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Vt,xi,null).clip().discardPath()),Z.call(this,le,Ee),Q&&this.pdf.restoreGraphicsState()}this.lineWidth=Ye}else this.lineWidth=Ke,Z.call(this,le,Ee),this.lineWidth=Ye;this.path=$t},Z=function(le,Ee){if((le!=="stroke"||Ee||!C.call(this))&&(le==="stroke"||Ee||!x.call(this))){for(var he,me,Fe=[],Xe=this.path,lt=0;lt<Xe.length;lt++){var Ye=Xe[lt];switch(Ye.type){case"begin":Fe.push({begin:!0});break;case"close":Fe.push({close:!0});break;case"mt":Fe.push({start:Ye,deltas:[],abs:[]});break;case"lt":var Ke=Fe.length;if(Xe[lt-1]&&!isNaN(Xe[lt-1].x)&&(he=[Ye.x-Xe[lt-1].x,Ye.y-Xe[lt-1].y],Ke>0)){for(;Ke>=0;Ke--)if(Fe[Ke-1].close!==!0&&Fe[Ke-1].begin!==!0){Fe[Ke-1].deltas.push(he),Fe[Ke-1].abs.push(Ye);break}}break;case"bct":he=[Ye.x1-Xe[lt-1].x,Ye.y1-Xe[lt-1].y,Ye.x2-Xe[lt-1].x,Ye.y2-Xe[lt-1].y,Ye.x-Xe[lt-1].x,Ye.y-Xe[lt-1].y],Fe[Fe.length-1].deltas.push(he);break;case"qct":var Lt=Xe[lt-1].x+2/3*(Ye.x1-Xe[lt-1].x),$t=Xe[lt-1].y+2/3*(Ye.y1-Xe[lt-1].y),dt=Ye.x+2/3*(Ye.x1-Ye.x),wt=Ye.y+2/3*(Ye.y1-Ye.y),bt=Ye.x,$e=Ye.y;he=[Lt-Xe[lt-1].x,$t-Xe[lt-1].y,dt-Xe[lt-1].x,wt-Xe[lt-1].y,bt-Xe[lt-1].x,$e-Xe[lt-1].y],Fe[Fe.length-1].deltas.push(he);break;case"arc":Fe.push({deltas:[],abs:[],arc:!0}),Array.isArray(Fe[Fe.length-1].abs)&&Fe[Fe.length-1].abs.push(Ye)}}me=Ee?null:le==="stroke"?"stroke":"fill";for(var Yt=!1,li=0;li<Fe.length;li++)if(Fe[li].arc)for(var Zt=Fe[li].abs,Ci=0;Ci<Zt.length;Ci++){var Li=Zt[Ci];Li.type==="arc"?ie.call(this,Li.x,Li.y,Li.radius,Li.startAngle,Li.endAngle,Li.counterclockwise,void 0,Ee,!Yt):_e.call(this,Li.x,Li.y),Yt=!0}else if(Fe[li].close===!0)this.pdf.internal.out("h"),Yt=!1;else if(Fe[li].begin!==!0){var Vt=Fe[li].start.x,mi=Fe[li].start.y;ve.call(this,Fe[li].deltas,Vt,mi),Yt=!0}me&&ke.call(this,me),Ee&&Le.call(this)}},ee=function(le){var Ee=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,he=Ee*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return le-he;case"top":return le+Ee-he;case"hanging":return le+Ee-2*he;case"middle":return le+Ee/2-he;case"ideographic":return le;case"alphabetic":default:return le}},J=function(le){return le+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};v.prototype.createLinearGradient=function(){var le=function(){};return le.colorStops=[],le.addColorStop=function(Ee,he){this.colorStops.push([Ee,he])},le.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},le.isCanvasGradient=!0,le},v.prototype.createPattern=function(){return this.createLinearGradient()},v.prototype.createRadialGradient=function(){return this.createLinearGradient()};var ie=function(le,Ee,he,me,Fe,Xe,lt,Ye,Ke){for(var Lt=nt.call(this,he,me,Fe,Xe),$t=0;$t<Lt.length;$t++){var dt=Lt[$t];$t===0&&(Ke?fe.call(this,dt.x1+le,dt.y1+Ee):_e.call(this,dt.x1+le,dt.y1+Ee)),rt.call(this,le,Ee,dt.x2,dt.y2,dt.x3,dt.y3,dt.x4,dt.y4)}Ye?Le.call(this):ke.call(this,lt)},ke=function(le){switch(le){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},Le=function(){this.pdf.clip(),this.pdf.discardPath()},fe=function(le,Ee){this.pdf.internal.out(t(le)+" "+o(Ee)+" m")},Te=function(le){var Ee;switch(le.align){case"right":case"end":Ee="right";break;case"center":Ee="center";break;case"left":case"start":default:Ee="left"}var he=this.pdf.getTextDimensions(le.text),me=ee.call(this,le.y),Fe=J.call(this,me)-he.h,Xe=this.ctx.transform.applyToPoint(new m(le.x,me)),lt=this.ctx.transform.decompose(),Ye=new h;Ye=(Ye=(Ye=Ye.multiply(lt.translate)).multiply(lt.skew)).multiply(lt.scale);for(var Ke,Lt,$t,dt=this.ctx.transform.applyToRectangle(new r(le.x,me,he.w,he.h)),wt=Ye.applyToRectangle(new r(le.x,Fe,he.w,he.h)),bt=S.call(this,wt),$e=[],Yt=0;Yt<bt.length;Yt+=1)$e.indexOf(bt[Yt])===-1&&$e.push(bt[Yt]);if(V($e),this.autoPaging)for(var li=$e[0],Zt=$e[$e.length-1],Ci=li;Ci<Zt+1;Ci++){this.pdf.setPage(Ci);var Li=Ci===1?this.posY+this.margin[0]:this.margin[0],Vt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],mi=this.pdf.internal.pageSize.height-this.margin[2],Qi=mi-this.margin[0],xi=this.pdf.internal.pageSize.width-this.margin[1],Jt=xi-this.margin[3],Me=Ci===1?0:Vt+(Ci-2)*Qi;if(this.ctx.clip_path.length!==0){var Q=this.path;Ke=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=O(Ke,this.posX+this.margin[3],-1*Me+Li),Z.call(this,"fill",!0),this.path=Q}var ae=O([JSON.parse(JSON.stringify(wt))],this.posX+this.margin[3],-Me+Li+this.ctx.prevPageLastElemOffset)[0];le.scale>=.01&&(Lt=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Lt*le.scale),$t=this.lineWidth,this.lineWidth=$t*le.scale);var et=this.autoPaging!=="text";if(et||ae.y+ae.h<=mi){if(et||ae.y>=Li&&ae.x<=xi){var vt=et?le.text:this.pdf.splitTextToSize(le.text,le.maxWidth||xi-ae.x)[0],Wt=O([JSON.parse(JSON.stringify(dt))],this.posX+this.margin[3],-Me+Li+this.ctx.prevPageLastElemOffset)[0],di=et&&(Ci>li||Ci<Zt)&&T.call(this);di&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Jt,Qi,null).clip().discardPath()),this.pdf.text(vt,Wt.x,Wt.y,{angle:le.angle,align:Ee,renderingMode:le.renderingMode}),di&&this.pdf.restoreGraphicsState()}}else ae.y<mi&&(this.ctx.prevPageLastElemOffset+=mi-ae.y);le.scale>=.01&&(this.pdf.setFontSize(Lt),this.lineWidth=$t)}else le.scale>=.01&&(Lt=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Lt*le.scale),$t=this.lineWidth,this.lineWidth=$t*le.scale),this.pdf.text(le.text,Xe.x+this.posX,Xe.y+this.posY,{angle:le.angle,align:Ee,renderingMode:le.renderingMode,maxWidth:le.maxWidth}),le.scale>=.01&&(this.pdf.setFontSize(Lt),this.lineWidth=$t)},_e=function(le,Ee,he,me){he=he||0,me=me||0,this.pdf.internal.out(t(le+he)+" "+o(Ee+me)+" l")},ve=function(le,Ee,he){return this.pdf.lines(le,Ee,he,null,null)},rt=function(le,Ee,he,me,Fe,Xe,lt,Ye){this.pdf.internal.out([e(l(he+le)),e(u(me+Ee)),e(l(Fe+le)),e(u(Xe+Ee)),e(l(lt+le)),e(u(Ye+Ee)),"c"].join(" "))},nt=function(le,Ee,he,me){for(var Fe=2*Math.PI,Xe=Math.PI/2;Ee>he;)Ee-=Fe;var lt=Math.abs(he-Ee);lt<Fe&&me&&(lt=Fe-lt);for(var Ye=[],Ke=me?-1:1,Lt=Ee;lt>1e-5;){var $t=Lt+Ke*Math.min(lt,Xe);Ye.push(Tt.call(this,le,Lt,$t)),lt-=Math.abs($t-Lt),Lt=$t}return Ye},Tt=function(le,Ee,he){var me=(he-Ee)/2,Fe=le*Math.cos(me),Xe=le*Math.sin(me),lt=Fe,Ye=-Xe,Ke=lt*lt+Ye*Ye,Lt=Ke+lt*Fe+Ye*Xe,$t=4/3*(Math.sqrt(2*Ke*Lt)-Lt)/(lt*Xe-Ye*Fe),dt=lt-$t*Ye,wt=Ye+$t*lt,bt=dt,$e=-wt,Yt=me+Ee,li=Math.cos(Yt),Zt=Math.sin(Yt);return{x1:le*Math.cos(Ee),y1:le*Math.sin(Ee),x2:dt*li-wt*Zt,y2:dt*Zt+wt*li,x3:bt*li-$e*Zt,y3:bt*Zt+$e*li,x4:le*Math.cos(he),y4:le*Math.sin(he)}},We=function(le){return 180*le/Math.PI},be=function(le,Ee,he,me,Fe,Xe){var lt=le+.5*(he-le),Ye=Ee+.5*(me-Ee),Ke=Fe+.5*(he-Fe),Lt=Xe+.5*(me-Xe),$t=Math.min(le,Fe,lt,Ke),dt=Math.max(le,Fe,lt,Ke),wt=Math.min(Ee,Xe,Ye,Lt),bt=Math.max(Ee,Xe,Ye,Lt);return new r($t,wt,dt-$t,bt-wt)},Ce=function(le,Ee,he,me,Fe,Xe,lt,Ye){var Ke,Lt,$t,dt,wt,bt,$e,Yt,li,Zt,Ci,Li,Vt,mi,Qi=he-le,xi=me-Ee,Jt=Fe-he,Me=Xe-me,Q=lt-Fe,ae=Ye-Xe;for(Lt=0;Lt<41;Lt++)li=($e=($t=le+(Ke=Lt/40)*Qi)+Ke*((wt=he+Ke*Jt)-$t))+Ke*(wt+Ke*(Fe+Ke*Q-wt)-$e),Zt=(Yt=(dt=Ee+Ke*xi)+Ke*((bt=me+Ke*Me)-dt))+Ke*(bt+Ke*(Xe+Ke*ae-bt)-Yt),Lt==0?(Ci=li,Li=Zt,Vt=li,mi=Zt):(Ci=Math.min(Ci,li),Li=Math.min(Li,Zt),Vt=Math.max(Vt,li),mi=Math.max(mi,Zt));return new r(Math.round(Ci),Math.round(Li),Math.round(Vt-Ci),Math.round(mi-Li))},Be=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var le,Ee,he=(le=this.ctx.lineDash,Ee=this.ctx.lineDashOffset,JSON.stringify({lineDash:le,lineDashOffset:Ee}));this.prevLineDash!==he&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=he)}}})(Vr.API),function(i){var e=function(u){var m,r,h,y,b,v,w,x,C,T;for(/[^\x00-\xFF]/.test(u),r=[],h=0,y=(u+=m="\0\0\0\0".slice(u.length%4||4)).length;y>h;h+=4)(b=(u.charCodeAt(h)<<24)+(u.charCodeAt(h+1)<<16)+(u.charCodeAt(h+2)<<8)+u.charCodeAt(h+3))!==0?(v=(b=((b=((b=((b=(b-(T=b%85))/85)-(C=b%85))/85)-(x=b%85))/85)-(w=b%85))/85)%85,r.push(v+33,w+33,x+33,C+33,T+33)):r.push(122);return function(S,M){for(var O=M;O>0;O--)S.pop()}(r,m.length),String.fromCharCode.apply(String,r)+"~>"},t=function(u){var m,r,h,y,b,v=String,w="length",x=255,C="charCodeAt",T="slice",S="replace";for(u[T](-2),u=u[T](0,-2)[S](/\s/g,"")[S]("z","!!!!!"),h=[],y=0,b=(u+=m="uuuuu"[T](u[w]%5||5))[w];b>y;y+=5)r=52200625*(u[C](y)-33)+614125*(u[C](y+1)-33)+7225*(u[C](y+2)-33)+85*(u[C](y+3)-33)+(u[C](y+4)-33),h.push(x&r>>24,x&r>>16,x&r>>8,x&r);return function(M,O){for(var V=O;V>0;V--)M.pop()}(h,m[w]),v.fromCharCode.apply(v,h)},o=function(u){var m=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((u=u.replace(/\s/g,"")).indexOf(">")!==-1&&(u=u.substr(0,u.indexOf(">"))),u.length%2&&(u+="0"),m.test(u)===!1)return"";for(var r="",h=0;h<u.length;h+=2)r+=String.fromCharCode("0x"+(u[h]+u[h+1]));return r},l=function(u){for(var m=new Uint8Array(u.length),r=u.length;r--;)m[r]=u.charCodeAt(r);return u=(m=z2(m)).reduce(function(h,y){return h+String.fromCharCode(y)},"")};i.processDataByFilters=function(u,m){var r=0,h=u||"",y=[];for(typeof(m=m||[])=="string"&&(m=[m]),r=0;r<m.length;r+=1)switch(m[r]){case"ASCII85Decode":case"/ASCII85Decode":h=t(h),y.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":h=e(h),y.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":h=o(h),y.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":h=h.split("").map(function(b){return("0"+b.charCodeAt().toString(16)).slice(-2)}).join("")+">",y.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":h=l(h),y.push("/FlateDecode");break;default:throw new Error('The filter: "'+m[r]+'" is not implemented')}return{data:h,reverseChain:y.reverse().join(" ")}}}(Vr.API),function(i){i.loadFile=function(e,t,o){return function(l,u,m){u=u!==!1,m=typeof m=="function"?m:function(){};var r=void 0;try{r=function(h,y,b){var v=new XMLHttpRequest,w=0,x=function(C){var T=C.length,S=[],M=String.fromCharCode;for(w=0;w<T;w+=1)S.push(M(255&C.charCodeAt(w)));return S.join("")};if(v.open("GET",h,!y),v.overrideMimeType("text/plain; charset=x-user-defined"),y===!1&&(v.onload=function(){v.status===200?b(x(this.responseText)):b(void 0)}),v.send(null),y&&v.status===200)return x(v.responseText)}(l,u,m)}catch{}return r}(e,t,o)},i.loadImageFile=i.loadFile}(Vr.API),function(i){function e(){return(qr.html2canvas?Promise.resolve(qr.html2canvas):m1(()=>import("./html2canvas.esm-fb42d204.js"),[],import.meta.url)).catch(function(m){return Promise.reject(new Error("Could not load html2canvas: "+m))}).then(function(m){return m.default?m.default:m})}function t(){return(qr.DOMPurify?Promise.resolve(qr.DOMPurify):m1(()=>import("./purify.es-20117e50.js"),[],import.meta.url)).catch(function(m){return Promise.reject(new Error("Could not load dompurify: "+m))}).then(function(m){return m.default?m.default:m})}var o=function(m){var r=es(m);return r==="undefined"?"undefined":r==="string"||m instanceof String?"string":r==="number"||m instanceof Number?"number":r==="function"||m instanceof Function?"function":m&&m.constructor===Array?"array":m&&m.nodeType===1?"element":r==="object"?"object":"unknown"},l=function(m,r){var h=document.createElement(m);for(var y in r.className&&(h.className=r.className),r.innerHTML&&r.dompurify&&(h.innerHTML=r.dompurify.sanitize(r.innerHTML)),r.style)h.style[y]=r.style[y];return h},u=function m(r){var h=Object.assign(m.convert(Promise.resolve()),JSON.parse(JSON.stringify(m.template))),y=m.convert(Promise.resolve(),h);return y=(y=y.setProgress(1,m,1,[m])).set(r)};(u.prototype=Object.create(Promise.prototype)).constructor=u,u.convert=function(m,r){return m.__proto__=r||u.prototype,m},u.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},u.prototype.from=function(m,r){return this.then(function(){switch(r=r||function(h){switch(o(h)){case"string":return"string";case"element":return h.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(m)){case"string":return this.then(t).then(function(h){return this.set({src:l("div",{innerHTML:m,dompurify:h})})});case"element":return this.set({src:m});case"canvas":return this.set({canvas:m});case"img":return this.set({img:m});default:return this.error("Unknown source type.")}})},u.prototype.to=function(m){switch(m){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},u.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var m={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},r=function h(y,b){for(var v=y.nodeType===3?document.createTextNode(y.nodeValue):y.cloneNode(!1),w=y.firstChild;w;w=w.nextSibling)b!==!0&&w.nodeType===1&&w.nodeName==="SCRIPT"||v.appendChild(h(w,b));return y.nodeType===1&&(y.nodeName==="CANVAS"?(v.width=y.width,v.height=y.height,v.getContext("2d").drawImage(y,0,0)):y.nodeName!=="TEXTAREA"&&y.nodeName!=="SELECT"||(v.value=y.value),v.addEventListener("load",function(){v.scrollTop=y.scrollTop,v.scrollLeft=y.scrollLeft},!0)),v}(this.prop.src,this.opt.html2canvas.javascriptEnabled);r.tagName==="BODY"&&(m.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=l("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=l("div",{className:"html2pdf__container",style:m}),this.prop.container.appendChild(r),this.prop.container.firstChild.appendChild(l("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},u.prototype.toCanvas=function(){var m=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(m).then(e).then(function(r){var h=Object.assign({},this.opt.html2canvas);return delete h.onrendered,r(this.prop.container,h)}).then(function(r){(this.opt.html2canvas.onrendered||function(){})(r),this.prop.canvas=r,document.body.removeChild(this.prop.overlay)})},u.prototype.toContext2d=function(){var m=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(m).then(e).then(function(r){var h=this.opt.jsPDF,y=this.opt.fontFaces,b=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,v=Object.assign({async:!0,allowTaint:!0,scale:b,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete v.onrendered,h.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,h.context2d.posX=this.opt.x,h.context2d.posY=this.opt.y,h.context2d.margin=this.opt.margin,h.context2d.fontFaces=y,y)for(var w=0;w<y.length;++w){var x=y[w],C=x.src.find(function(T){return T.format==="truetype"});C&&h.addFont(C.url,x.ref.name,x.ref.style)}return v.windowHeight=v.windowHeight||0,v.windowHeight=v.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):v.windowHeight,h.context2d.save(!0),r(this.prop.container,v)}).then(function(r){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(r),this.prop.canvas=r,document.body.removeChild(this.prop.overlay)})},u.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var m=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=m})},u.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},u.prototype.output=function(m,r,h){return(h=h||"pdf").toLowerCase()==="img"||h.toLowerCase()==="image"?this.outputImg(m,r):this.outputPdf(m,r)},u.prototype.outputPdf=function(m,r){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(m,r)})},u.prototype.outputImg=function(m){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(m){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+m+'" is not supported.'}})},u.prototype.save=function(m){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(m?{filename:m}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},u.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},u.prototype.set=function(m){if(o(m)!=="object")return this;var r=Object.keys(m||{}).map(function(h){if(h in u.template.prop)return function(){this.prop[h]=m[h]};switch(h){case"margin":return this.setMargin.bind(this,m.margin);case"jsPDF":return function(){return this.opt.jsPDF=m.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,m.pageSize);default:return function(){this.opt[h]=m[h]}}},this);return this.then(function(){return this.thenList(r)})},u.prototype.get=function(m,r){return this.then(function(){var h=m in u.template.prop?this.prop[m]:this.opt[m];return r?r(h):h})},u.prototype.setMargin=function(m){return this.then(function(){switch(o(m)){case"number":m=[m,m,m,m];case"array":if(m.length===2&&(m=[m[0],m[1],m[0],m[1]]),m.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=m}).then(this.setPageSize)},u.prototype.setPageSize=function(m){function r(h,y){return Math.floor(h*y/72*96)}return this.then(function(){(m=m||Vr.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(m.inner={width:m.width-this.opt.margin[1]-this.opt.margin[3],height:m.height-this.opt.margin[0]-this.opt.margin[2]},m.inner.px={width:r(m.inner.width,m.k),height:r(m.inner.height,m.k)},m.inner.ratio=m.inner.height/m.inner.width),this.prop.pageSize=m})},u.prototype.setProgress=function(m,r,h,y){return m!=null&&(this.progress.val=m),r!=null&&(this.progress.state=r),h!=null&&(this.progress.n=h),y!=null&&(this.progress.stack=y),this.progress.ratio=this.progress.val/this.progress.state,this},u.prototype.updateProgress=function(m,r,h,y){return this.setProgress(m?this.progress.val+m:null,r||null,h?this.progress.n+h:null,y?this.progress.stack.concat(y):null)},u.prototype.then=function(m,r){var h=this;return this.thenCore(m,r,function(y,b){return h.updateProgress(null,null,1,[y]),Promise.prototype.then.call(this,function(v){return h.updateProgress(null,y),v}).then(y,b).then(function(v){return h.updateProgress(1),v})})},u.prototype.thenCore=function(m,r,h){h=h||Promise.prototype.then,m&&(m=m.bind(this)),r&&(r=r.bind(this));var y=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?this:u.convert(Object.assign({},this),Promise.prototype),b=h.call(y,m,r);return u.convert(b,this.__proto__)},u.prototype.thenExternal=function(m,r){return Promise.prototype.then.call(this,m,r)},u.prototype.thenList=function(m){var r=this;return m.forEach(function(h){r=r.thenCore(h)}),r},u.prototype.catch=function(m){m&&(m=m.bind(this));var r=Promise.prototype.catch.call(this,m);return u.convert(r,this)},u.prototype.catchExternal=function(m){return Promise.prototype.catch.call(this,m)},u.prototype.error=function(m){return this.then(function(){throw new Error(m)})},u.prototype.using=u.prototype.set,u.prototype.saveAs=u.prototype.save,u.prototype.export=u.prototype.output,u.prototype.run=u.prototype.then,Vr.getPageSize=function(m,r,h){if(es(m)==="object"){var y=m;m=y.orientation,r=y.unit||r,h=y.format||h}r=r||"mm",h=h||"a4",m=(""+(m||"P")).toLowerCase();var b,v=(""+h).toLowerCase(),w={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(r){case"pt":b=1;break;case"mm":b=72/25.4;break;case"cm":b=72/2.54;break;case"in":b=72;break;case"px":b=.75;break;case"pc":case"em":b=12;break;case"ex":b=6;break;default:throw"Invalid unit: "+r}var x,C=0,T=0;if(w.hasOwnProperty(v))C=w[v][1]/b,T=w[v][0]/b;else try{C=h[1],T=h[0]}catch{throw new Error("Invalid format: "+h)}if(m==="p"||m==="portrait")m="p",T>C&&(x=T,T=C,C=x);else{if(m!=="l"&&m!=="landscape")throw"Invalid orientation: "+m;m="l",C>T&&(x=T,T=C,C=x)}return{width:T,height:C,unit:r,k:b,orientation:m}},i.html=function(m,r){(r=r||{}).callback=r.callback||function(){},r.html2canvas=r.html2canvas||{},r.html2canvas.canvas=r.html2canvas.canvas||this.canvas,r.jsPDF=r.jsPDF||this,r.fontFaces=r.fontFaces?r.fontFaces.map(H2):null;var h=new u(r);return r.worker?h:h.from(m).doCallback()}}(Vr.API),Vr.API.addJS=function(i){return __=i,this.internal.events.subscribe("postPutResources",function(){Up=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(Up+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),y_=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+__+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){Up!==void 0&&y_!==void 0&&this.internal.out("/Names <</JavaScript "+Up+" 0 R>>")}),this},function(i){var e;i.events.push(["postPutResources",function(){var t=this,o=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var l=t.outline.render().split(/\r\n/),u=0;u<l.length;u++){var m=l[u],r=o.exec(m);if(r!=null){var h=r[1];t.internal.newObjectDeferredBegin(h,!1)}t.internal.write(m)}if(this.outline.createNamedDestinations){var y=this.internal.pages.length,b=[];for(u=0;u<y;u++){var v=t.internal.newObject();b.push(v);var w=t.internal.getPageInfo(u+1);t.internal.write("<< /D["+w.objId+" 0 R /XYZ null null null]>> endobj")}var x=t.internal.newObject();for(t.internal.write("<< /Names [ "),u=0;u<b.length;u++)t.internal.write("(page_"+(u+1)+")"+b[u]+" 0 R");t.internal.write(" ] >>","endobj"),e=t.internal.newObject(),t.internal.write("<< /Dests "+x+" 0 R"),t.internal.write(">>","endobj")}}]),i.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+e+" 0 R"))}]),i.events.push(["initialized",function(){var t=this;t.outline={createNamedDestinations:!1,root:{children:[]}},t.outline.add=function(o,l,u){var m={title:l,options:u,children:[]};return o==null&&(o=this.root),o.children.push(m),m},t.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=t,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},t.outline.genIds_r=function(o){o.id=t.internal.newObjectDeferred();for(var l=0;l<o.children.length;l++)this.genIds_r(o.children[l])},t.outline.renderRoot=function(o){this.objStart(o),this.line("/Type /Outlines"),o.children.length>0&&(this.line("/First "+this.makeRef(o.children[0])),this.line("/Last "+this.makeRef(o.children[o.children.length-1]))),this.line("/Count "+this.count_r({count:0},o)),this.objEnd()},t.outline.renderItems=function(o){for(var l=this.ctx.pdf.internal.getVerticalCoordinateString,u=0;u<o.children.length;u++){var m=o.children[u];this.objStart(m),this.line("/Title "+this.makeString(m.title)),this.line("/Parent "+this.makeRef(o)),u>0&&this.line("/Prev "+this.makeRef(o.children[u-1])),u<o.children.length-1&&this.line("/Next "+this.makeRef(o.children[u+1])),m.children.length>0&&(this.line("/First "+this.makeRef(m.children[0])),this.line("/Last "+this.makeRef(m.children[m.children.length-1])));var r=this.count=this.count_r({count:0},m);if(r>0&&this.line("/Count "+r),m.options&&m.options.pageNumber){var h=t.internal.getPageInfo(m.options.pageNumber);this.line("/Dest ["+h.objId+" 0 R /XYZ 0 "+l(0)+" 0]")}this.objEnd()}for(var y=0;y<o.children.length;y++)this.renderItems(o.children[y])},t.outline.line=function(o){this.ctx.val+=o+`\r
`},t.outline.makeRef=function(o){return o.id+" 0 R"},t.outline.makeString=function(o){return"("+t.internal.pdfEscape(o)+")"},t.outline.objStart=function(o){this.ctx.val+=`\r
`+o.id+` 0 obj\r
<<\r
`},t.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},t.outline.count_r=function(o,l){for(var u=0;u<l.children.length;u++)o.count++,this.count_r(o,l.children[u]);return o.count}}])}(Vr.API),function(i){var e=[192,193,194,195,196,197,198,199];i.processJPEG=function(t,o,l,u,m,r){var h,y=this.decode.DCT_DECODE,b=null;if(typeof t=="string"||this.__addimage__.isArrayBuffer(t)||this.__addimage__.isArrayBufferView(t)){switch(t=m||t,t=this.__addimage__.isArrayBuffer(t)?new Uint8Array(t):t,(h=function(v){for(var w,x=256*v.charCodeAt(4)+v.charCodeAt(5),C=v.length,T={width:0,height:0,numcomponents:1},S=4;S<C;S+=2){if(S+=x,e.indexOf(v.charCodeAt(S+1))!==-1){w=256*v.charCodeAt(S+5)+v.charCodeAt(S+6),T={width:256*v.charCodeAt(S+7)+v.charCodeAt(S+8),height:w,numcomponents:v.charCodeAt(S+9)};break}x=256*v.charCodeAt(S+2)+v.charCodeAt(S+3)}return T}(t=this.__addimage__.isArrayBufferView(t)?this.__addimage__.arrayBufferToBinaryString(t):t)).numcomponents){case 1:r=this.color_spaces.DEVICE_GRAY;break;case 4:r=this.color_spaces.DEVICE_CMYK;break;case 3:r=this.color_spaces.DEVICE_RGB}b={data:t,width:h.width,height:h.height,colorSpace:r,bitsPerComponent:8,filter:y,index:o,alias:l}}return b}}(Vr.API);var x0,Vp,v_,b_,w_,N8=function(){var i,e,t;function o(u){var m,r,h,y,b,v,w,x,C,T,S,M,O,V;for(this.data=u,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},v=null;;){switch(m=this.readUInt32(),C=function(){var X,Z;for(Z=[],X=0;X<4;++X)Z.push(String.fromCharCode(this.data[this.pos++]));return Z}.call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(m);break;case"fcTL":v&&this.animation.frames.push(v),this.pos+=4,v={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},b=this.readUInt16(),y=this.readUInt16()||100,v.delay=1e3*b/y,v.disposeOp=this.data[this.pos++],v.blendOp=this.data[this.pos++],v.data=[];break;case"IDAT":case"fdAT":for(C==="fdAT"&&(this.pos+=4,m-=4),u=(v!=null?v.data:void 0)||this.imgData,M=0;0<=m?M<m:M>m;0<=m?++M:--M)u.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(h=this.palette.length/3,this.transparency.indexed=this.read(m),this.transparency.indexed.length>h)throw new Error("More transparent colors than palette size");if((T=h-this.transparency.indexed.length)>0)for(O=0;0<=T?O<T:O>T;0<=T?++O:--O)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(m)[0];break;case 2:this.transparency.rgb=this.read(m)}break;case"tEXt":w=(S=this.read(m)).indexOf(0),x=String.fromCharCode.apply(String,S.slice(0,w)),this.text[x]=String.fromCharCode.apply(String,S.slice(w+1));break;case"IEND":return v&&this.animation.frames.push(v),this.colors=function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}.call(this),this.hasAlphaChannel=(V=this.colorType)===4||V===6,r=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*r,this.colorSpace=function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}.call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=m}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}o.prototype.read=function(u){var m,r;for(r=[],m=0;0<=u?m<u:m>u;0<=u?++m:--m)r.push(this.data[this.pos++]);return r},o.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},o.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},o.prototype.decodePixels=function(u){var m=this.pixelBitlength/8,r=new Uint8Array(this.width*this.height*m),h=0,y=this;if(u==null&&(u=this.imgData),u.length===0)return new Uint8Array(0);function b(v,w,x,C){var T,S,M,O,V,X,Z,ee,J,ie,ke,Le,fe,Te,_e,ve,rt,nt,Tt,We,be,Ce=Math.ceil((y.width-v)/x),Be=Math.ceil((y.height-w)/C),le=y.width==Ce&&y.height==Be;for(Te=m*Ce,Le=le?r:new Uint8Array(Te*Be),X=u.length,fe=0,S=0;fe<Be&&h<X;){switch(u[h++]){case 0:for(O=rt=0;rt<Te;O=rt+=1)Le[S++]=u[h++];break;case 1:for(O=nt=0;nt<Te;O=nt+=1)T=u[h++],V=O<m?0:Le[S-m],Le[S++]=(T+V)%256;break;case 2:for(O=Tt=0;Tt<Te;O=Tt+=1)T=u[h++],M=(O-O%m)/m,_e=fe&&Le[(fe-1)*Te+M*m+O%m],Le[S++]=(_e+T)%256;break;case 3:for(O=We=0;We<Te;O=We+=1)T=u[h++],M=(O-O%m)/m,V=O<m?0:Le[S-m],_e=fe&&Le[(fe-1)*Te+M*m+O%m],Le[S++]=(T+Math.floor((V+_e)/2))%256;break;case 4:for(O=be=0;be<Te;O=be+=1)T=u[h++],M=(O-O%m)/m,V=O<m?0:Le[S-m],fe===0?_e=ve=0:(_e=Le[(fe-1)*Te+M*m+O%m],ve=M&&Le[(fe-1)*Te+(M-1)*m+O%m]),Z=V+_e-ve,ee=Math.abs(Z-V),ie=Math.abs(Z-_e),ke=Math.abs(Z-ve),J=ee<=ie&&ee<=ke?V:ie<=ke?_e:ve,Le[S++]=(T+J)%256;break;default:throw new Error("Invalid filter algorithm: "+u[h-1])}if(!le){var Ee=((w+fe*C)*y.width+v)*m,he=fe*Te;for(O=0;O<Ce;O+=1){for(var me=0;me<m;me+=1)r[Ee++]=Le[he++];Ee+=(x-1)*m}}fe++}}return u=v8(u),y.interlaceMethod==1?(b(0,0,8,8),b(4,0,8,8),b(0,4,4,8),b(2,0,4,4),b(0,2,2,4),b(1,0,2,2),b(0,1,1,2)):b(0,0,1,1),r},o.prototype.decodePalette=function(){var u,m,r,h,y,b,v,w,x;for(r=this.palette,b=this.transparency.indexed||[],y=new Uint8Array((b.length||0)+r.length),h=0,u=0,m=v=0,w=r.length;v<w;m=v+=3)y[h++]=r[m],y[h++]=r[m+1],y[h++]=r[m+2],y[h++]=(x=b[u++])!=null?x:255;return y},o.prototype.copyToImageData=function(u,m){var r,h,y,b,v,w,x,C,T,S,M;if(h=this.colors,T=null,r=this.hasAlphaChannel,this.palette.length&&(T=(M=this._decodedPalette)!=null?M:this._decodedPalette=this.decodePalette(),h=4,r=!0),C=(y=u.data||u).length,v=T||m,b=w=0,h===1)for(;b<C;)x=T?4*m[b/4]:w,S=v[x++],y[b++]=S,y[b++]=S,y[b++]=S,y[b++]=r?v[x++]:255,w=x;else for(;b<C;)x=T?4*m[b/4]:w,y[b++]=v[x++],y[b++]=v[x++],y[b++]=v[x++],y[b++]=r?v[x++]:255,w=x},o.prototype.decode=function(){var u;return u=new Uint8Array(this.width*this.height*4),this.copyToImageData(u,this.decodePixels()),u};var l=function(){if(Object.prototype.toString.call(qr)==="[object Window]"){try{e=qr.document.createElement("canvas"),t=e.getContext("2d")}catch{return!1}return!0}return!1};return l(),i=function(u){var m;if(l()===!0)return t.width=u.width,t.height=u.height,t.clearRect(0,0,u.width,u.height),t.putImageData(u,0,0),(m=new Image).src=e.toDataURL(),m;throw new Error("This method requires a Browser with Canvas-capability.")},o.prototype.decodeFrames=function(u){var m,r,h,y,b,v,w,x;if(this.animation){for(x=[],r=b=0,v=(w=this.animation.frames).length;b<v;r=++b)m=w[r],h=u.createImageData(m.width,m.height),y=this.decodePixels(new Uint8Array(m.data)),this.copyToImageData(h,y),m.imageData=h,x.push(m.image=i(h));return x}},o.prototype.renderFrame=function(u,m){var r,h,y;return r=(h=this.animation.frames)[m],y=h[m-1],m===0&&u.clearRect(0,0,this.width,this.height),(y!=null?y.disposeOp:void 0)===1?u.clearRect(y.xOffset,y.yOffset,y.width,y.height):(y!=null?y.disposeOp:void 0)===2&&u.putImageData(y.imageData,y.xOffset,y.yOffset),r.blendOp===0&&u.clearRect(r.xOffset,r.yOffset,r.width,r.height),u.drawImage(r.image,r.xOffset,r.yOffset)},o.prototype.animate=function(u){var m,r,h,y,b,v,w=this;return r=0,v=this.animation,y=v.numFrames,h=v.frames,b=v.numPlays,(m=function(){var x,C;if(x=r++%y,C=h[x],w.renderFrame(u,x),y>1&&r/y<b)return w.animation._timeout=setTimeout(m,C.delay)})()},o.prototype.stopAnimation=function(){var u;return clearTimeout((u=this.animation)!=null?u._timeout:void 0)},o.prototype.render=function(u){var m,r;return u._png&&u._png.stopAnimation(),u._png=this,u.width=this.width,u.height=this.height,m=u.getContext("2d"),this.animation?(this.decodeFrames(m),this.animate(m)):(r=m.createImageData(this.width,this.height),this.copyToImageData(r,this.decodePixels()),m.putImageData(r,0,0))},o}();/**
 * @license
 *
 * Copyright (c) 2014 James Robb, https://github.com/jamesbrobb
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * ====================================================================
 *//**
 * @license
 * (c) Dean McNamee <dean@gmail.com>, 2013.
 *
 * https://github.com/deanm/omggif
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to
 * deal in the Software without restriction, including without limitation the
 * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
 * sell copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
 * IN THE SOFTWARE.
 *
 * omggif is a JavaScript implementation of a GIF 89a encoder and decoder,
 * including animation and compression.  It does not rely on any specific
 * underlying system, so should run in the browser, Node, or Plask.
 */function j8(i){var e=0;if(i[e++]!==71||i[e++]!==73||i[e++]!==70||i[e++]!==56||(i[e++]+1&253)!=56||i[e++]!==97)throw new Error("Invalid GIF 87a/89a header.");var t=i[e++]|i[e++]<<8,o=i[e++]|i[e++]<<8,l=i[e++],u=l>>7,m=1<<(7&l)+1;i[e++],i[e++];var r=null,h=null;u&&(r=e,h=m,e+=3*m);var y=!0,b=[],v=0,w=null,x=0,C=null;for(this.width=t,this.height=o;y&&e<i.length;)switch(i[e++]){case 33:switch(i[e++]){case 255:if(i[e]!==11||i[e+1]==78&&i[e+2]==69&&i[e+3]==84&&i[e+4]==83&&i[e+5]==67&&i[e+6]==65&&i[e+7]==80&&i[e+8]==69&&i[e+9]==50&&i[e+10]==46&&i[e+11]==48&&i[e+12]==3&&i[e+13]==1&&i[e+16]==0)e+=14,C=i[e++]|i[e++]<<8,e++;else for(e+=12;;){if(!((fe=i[e++])>=0))throw Error("Invalid block size");if(fe===0)break;e+=fe}break;case 249:if(i[e++]!==4||i[e+4]!==0)throw new Error("Invalid graphics extension block.");var T=i[e++];v=i[e++]|i[e++]<<8,w=i[e++],(1&T)==0&&(w=null),x=T>>2&7,e++;break;case 254:for(;;){if(!((fe=i[e++])>=0))throw Error("Invalid block size");if(fe===0)break;e+=fe}break;default:throw new Error("Unknown graphic control label: 0x"+i[e-1].toString(16))}break;case 44:var S=i[e++]|i[e++]<<8,M=i[e++]|i[e++]<<8,O=i[e++]|i[e++]<<8,V=i[e++]|i[e++]<<8,X=i[e++],Z=X>>6&1,ee=1<<(7&X)+1,J=r,ie=h,ke=!1;X>>7&&(ke=!0,J=e,ie=ee,e+=3*ee);var Le=e;for(e++;;){var fe;if(!((fe=i[e++])>=0))throw Error("Invalid block size");if(fe===0)break;e+=fe}b.push({x:S,y:M,width:O,height:V,has_local_palette:ke,palette_offset:J,palette_size:ie,data_offset:Le,data_length:e-Le,transparent_index:w,interlaced:!!Z,delay:v,disposal:x});break;case 59:y=!1;break;default:throw new Error("Unknown gif block: 0x"+i[e-1].toString(16))}this.numFrames=function(){return b.length},this.loopCount=function(){return C},this.frameInfo=function(Te){if(Te<0||Te>=b.length)throw new Error("Frame index out of range.");return b[Te]},this.decodeAndBlitFrameBGRA=function(Te,_e){var ve=this.frameInfo(Te),rt=ve.width*ve.height,nt=new Uint8Array(rt);x_(i,ve.data_offset,nt,rt);var Tt=ve.palette_offset,We=ve.transparent_index;We===null&&(We=256);var be=ve.width,Ce=t-be,Be=be,le=4*(ve.y*t+ve.x),Ee=4*((ve.y+ve.height)*t+ve.x),he=le,me=4*Ce;ve.interlaced===!0&&(me+=4*t*7);for(var Fe=8,Xe=0,lt=nt.length;Xe<lt;++Xe){var Ye=nt[Xe];if(Be===0&&(Be=be,(he+=me)>=Ee&&(me=4*Ce+4*t*(Fe-1),he=le+(be+Ce)*(Fe<<1),Fe>>=1)),Ye===We)he+=4;else{var Ke=i[Tt+3*Ye],Lt=i[Tt+3*Ye+1],$t=i[Tt+3*Ye+2];_e[he++]=$t,_e[he++]=Lt,_e[he++]=Ke,_e[he++]=255}--Be}},this.decodeAndBlitFrameRGBA=function(Te,_e){var ve=this.frameInfo(Te),rt=ve.width*ve.height,nt=new Uint8Array(rt);x_(i,ve.data_offset,nt,rt);var Tt=ve.palette_offset,We=ve.transparent_index;We===null&&(We=256);var be=ve.width,Ce=t-be,Be=be,le=4*(ve.y*t+ve.x),Ee=4*((ve.y+ve.height)*t+ve.x),he=le,me=4*Ce;ve.interlaced===!0&&(me+=4*t*7);for(var Fe=8,Xe=0,lt=nt.length;Xe<lt;++Xe){var Ye=nt[Xe];if(Be===0&&(Be=be,(he+=me)>=Ee&&(me=4*Ce+4*t*(Fe-1),he=le+(be+Ce)*(Fe<<1),Fe>>=1)),Ye===We)he+=4;else{var Ke=i[Tt+3*Ye],Lt=i[Tt+3*Ye+1],$t=i[Tt+3*Ye+2];_e[he++]=Ke,_e[he++]=Lt,_e[he++]=$t,_e[he++]=255}--Be}}}function x_(i,e,t,o){for(var l=i[e++],u=1<<l,m=u+1,r=m+1,h=l+1,y=(1<<h)-1,b=0,v=0,w=0,x=i[e++],C=new Int32Array(4096),T=null;;){for(;b<16&&x!==0;)v|=i[e++]<<b,b+=8,x===1?x=i[e++]:--x;if(b<h)break;var S=v&y;if(v>>=h,b-=h,S!==u){if(S===m)break;for(var M=S<r?S:T,O=0,V=M;V>u;)V=C[V]>>8,++O;var X=V;if(w+O+(M!==S?1:0)>o)return void fs.log("Warning, gif stream longer than expected.");t[w++]=X;var Z=w+=O;for(M!==S&&(t[w++]=X),V=M;O--;)V=C[V],t[--Z]=255&V,V>>=8;T!==null&&r<4096&&(C[r++]=T<<8|X,r>=y+1&&h<12&&(++h,y=y<<1|1)),T=S}else r=m+1,y=(1<<(h=l+1))-1,T=null}return w!==o&&fs.log("Warning, gif stream shorter than expected."),t}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function zm(i){var e,t,o,l,u,m=Math.floor,r=new Array(64),h=new Array(64),y=new Array(64),b=new Array(64),v=new Array(65535),w=new Array(65535),x=new Array(64),C=new Array(64),T=[],S=0,M=7,O=new Array(64),V=new Array(64),X=new Array(64),Z=new Array(256),ee=new Array(2048),J=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],ie=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],ke=[0,1,2,3,4,5,6,7,8,9,10,11],Le=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],fe=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],Te=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],_e=[0,1,2,3,4,5,6,7,8,9,10,11],ve=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],rt=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function nt(le,Ee){for(var he=0,me=0,Fe=new Array,Xe=1;Xe<=16;Xe++){for(var lt=1;lt<=le[Xe];lt++)Fe[Ee[me]]=[],Fe[Ee[me]][0]=he,Fe[Ee[me]][1]=Xe,me++,he++;he*=2}return Fe}function Tt(le){for(var Ee=le[0],he=le[1]-1;he>=0;)Ee&1<<he&&(S|=1<<M),he--,--M<0&&(S==255?(We(255),We(0)):We(S),M=7,S=0)}function We(le){T.push(le)}function be(le){We(le>>8&255),We(255&le)}function Ce(le,Ee,he,me,Fe){for(var Xe,lt=Fe[0],Ye=Fe[240],Ke=function(Zt,Ci){var Li,Vt,mi,Qi,xi,Jt,Me,Q,ae,et,vt=0;for(ae=0;ae<8;++ae){Li=Zt[vt],Vt=Zt[vt+1],mi=Zt[vt+2],Qi=Zt[vt+3],xi=Zt[vt+4],Jt=Zt[vt+5],Me=Zt[vt+6];var Wt=Li+(Q=Zt[vt+7]),di=Li-Q,xn=Vt+Me,Mn=Vt-Me,fn=mi+Jt,Bi=mi-Jt,en=Qi+xi,Xn=Qi-xi,Yn=Wt+en,Kr=Wt-en,jn=xn+fn,cn=xn-fn;Zt[vt]=Yn+jn,Zt[vt+4]=Yn-jn;var mn=.707106781*(cn+Kr);Zt[vt+2]=Kr+mn,Zt[vt+6]=Kr-mn;var er=.382683433*((Yn=Xn+Bi)-(cn=Mn+di)),yn=.5411961*Yn+er,Ln=1.306562965*cn+er,lr=.707106781*(jn=Bi+Mn),oo=di+lr,ln=di-lr;Zt[vt+5]=ln+yn,Zt[vt+3]=ln-yn,Zt[vt+1]=oo+Ln,Zt[vt+7]=oo-Ln,vt+=8}for(vt=0,ae=0;ae<8;++ae){Li=Zt[vt],Vt=Zt[vt+8],mi=Zt[vt+16],Qi=Zt[vt+24],xi=Zt[vt+32],Jt=Zt[vt+40],Me=Zt[vt+48];var qe=Li+(Q=Zt[vt+56]),To=Li-Q,bo=Vt+Me,co=Vt-Me,Pe=mi+Jt,Ie=mi-Jt,He=Qi+xi,ct=Qi-xi,gt=qe+He,Rt=qe-He,Ge=bo+Pe,Ht=bo-Pe;Zt[vt]=gt+Ge,Zt[vt+32]=gt-Ge;var Bt=.707106781*(Ht+Rt);Zt[vt+16]=Rt+Bt,Zt[vt+48]=Rt-Bt;var ei=.382683433*((gt=ct+Ie)-(Ht=co+To)),_t=.5411961*gt+ei,Ri=1.306562965*Ht+ei,Ii=.707106781*(Ge=Ie+co),In=To+Ii,kn=To-Ii;Zt[vt+40]=kn+_t,Zt[vt+24]=kn-_t,Zt[vt+8]=In+Ri,Zt[vt+56]=In-Ri,vt++}for(ae=0;ae<64;++ae)et=Zt[ae]*Ci[ae],x[ae]=et>0?et+.5|0:et-.5|0;return x}(le,Ee),Lt=0;Lt<64;++Lt)C[J[Lt]]=Ke[Lt];var $t=C[0]-he;he=C[0],$t==0?Tt(me[0]):(Tt(me[w[Xe=32767+$t]]),Tt(v[Xe]));for(var dt=63;dt>0&&C[dt]==0;)dt--;if(dt==0)return Tt(lt),he;for(var wt,bt=1;bt<=dt;){for(var $e=bt;C[bt]==0&&bt<=dt;)++bt;var Yt=bt-$e;if(Yt>=16){wt=Yt>>4;for(var li=1;li<=wt;++li)Tt(Ye);Yt&=15}Xe=32767+C[bt],Tt(Fe[(Yt<<4)+w[Xe]]),Tt(v[Xe]),bt++}return dt!=63&&Tt(lt),he}function Be(le){le=Math.min(Math.max(le,1),100),u!=le&&(function(Ee){for(var he=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],me=0;me<64;me++){var Fe=m((he[me]*Ee+50)/100);Fe=Math.min(Math.max(Fe,1),255),r[J[me]]=Fe}for(var Xe=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],lt=0;lt<64;lt++){var Ye=m((Xe[lt]*Ee+50)/100);Ye=Math.min(Math.max(Ye,1),255),h[J[lt]]=Ye}for(var Ke=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],Lt=0,$t=0;$t<8;$t++)for(var dt=0;dt<8;dt++)y[Lt]=1/(r[J[Lt]]*Ke[$t]*Ke[dt]*8),b[Lt]=1/(h[J[Lt]]*Ke[$t]*Ke[dt]*8),Lt++}(le<50?Math.floor(5e3/le):Math.floor(200-2*le)),u=le)}this.encode=function(le,Ee){Ee&&Be(Ee),T=new Array,S=0,M=7,be(65496),be(65504),be(16),We(74),We(70),We(73),We(70),We(0),We(1),We(1),We(0),be(1),be(1),We(0),We(0),function(){be(65499),be(132),We(0);for(var Vt=0;Vt<64;Vt++)We(r[Vt]);We(1);for(var mi=0;mi<64;mi++)We(h[mi])}(),function(Vt,mi){be(65472),be(17),We(8),be(mi),be(Vt),We(3),We(1),We(17),We(0),We(2),We(17),We(1),We(3),We(17),We(1)}(le.width,le.height),function(){be(65476),be(418),We(0);for(var Vt=0;Vt<16;Vt++)We(ie[Vt+1]);for(var mi=0;mi<=11;mi++)We(ke[mi]);We(16);for(var Qi=0;Qi<16;Qi++)We(Le[Qi+1]);for(var xi=0;xi<=161;xi++)We(fe[xi]);We(1);for(var Jt=0;Jt<16;Jt++)We(Te[Jt+1]);for(var Me=0;Me<=11;Me++)We(_e[Me]);We(17);for(var Q=0;Q<16;Q++)We(ve[Q+1]);for(var ae=0;ae<=161;ae++)We(rt[ae])}(),be(65498),be(12),We(3),We(1),We(0),We(2),We(17),We(3),We(17),We(0),We(63),We(0);var he=0,me=0,Fe=0;S=0,M=7,this.encode.displayName="_encode_";for(var Xe,lt,Ye,Ke,Lt,$t,dt,wt,bt,$e=le.data,Yt=le.width,li=le.height,Zt=4*Yt,Ci=0;Ci<li;){for(Xe=0;Xe<Zt;){for(Lt=Zt*Ci+Xe,dt=-1,wt=0,bt=0;bt<64;bt++)$t=Lt+(wt=bt>>3)*Zt+(dt=4*(7&bt)),Ci+wt>=li&&($t-=Zt*(Ci+1+wt-li)),Xe+dt>=Zt&&($t-=Xe+dt-Zt+4),lt=$e[$t++],Ye=$e[$t++],Ke=$e[$t++],O[bt]=(ee[lt]+ee[Ye+256>>0]+ee[Ke+512>>0]>>16)-128,V[bt]=(ee[lt+768>>0]+ee[Ye+1024>>0]+ee[Ke+1280>>0]>>16)-128,X[bt]=(ee[lt+1280>>0]+ee[Ye+1536>>0]+ee[Ke+1792>>0]>>16)-128;he=Ce(O,y,he,e,o),me=Ce(V,b,me,t,l),Fe=Ce(X,b,Fe,t,l),Xe+=32}Ci+=8}if(M>=0){var Li=[];Li[1]=M+1,Li[0]=(1<<M+1)-1,Tt(Li)}return be(65497),new Uint8Array(T)},i=i||50,function(){for(var le=String.fromCharCode,Ee=0;Ee<256;Ee++)Z[Ee]=le(Ee)}(),e=nt(ie,ke),t=nt(Te,_e),o=nt(Le,fe),l=nt(ve,rt),function(){for(var le=1,Ee=2,he=1;he<=15;he++){for(var me=le;me<Ee;me++)w[32767+me]=he,v[32767+me]=[],v[32767+me][1]=he,v[32767+me][0]=me;for(var Fe=-(Ee-1);Fe<=-le;Fe++)w[32767+Fe]=he,v[32767+Fe]=[],v[32767+Fe][1]=he,v[32767+Fe][0]=Ee-1+Fe;le<<=1,Ee<<=1}}(),function(){for(var le=0;le<256;le++)ee[le]=19595*le,ee[le+256>>0]=38470*le,ee[le+512>>0]=7471*le+32768,ee[le+768>>0]=-11059*le,ee[le+1024>>0]=-21709*le,ee[le+1280>>0]=32768*le+8421375,ee[le+1536>>0]=-27439*le,ee[le+1792>>0]=-5329*le}(),Be(i)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function Cc(i,e){if(this.pos=0,this.buffer=i,this.datav=new DataView(i.buffer),this.is_with_alpha=!!e,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function A_(i){function e(ie){if(!ie)throw Error("assert :P")}function t(ie,ke,Le){for(var fe=0;4>fe;fe++)if(ie[ke+fe]!=Le.charCodeAt(fe))return!0;return!1}function o(ie,ke,Le,fe,Te){for(var _e=0;_e<Te;_e++)ie[ke+_e]=Le[fe+_e]}function l(ie,ke,Le,fe){for(var Te=0;Te<fe;Te++)ie[ke+Te]=Le}function u(ie){return new Int32Array(ie)}function m(ie,ke){for(var Le=[],fe=0;fe<ie;fe++)Le.push(new ke);return Le}function r(ie,ke){var Le=[];return function fe(Te,_e,ve){for(var rt=ve[_e],nt=0;nt<rt&&(Te.push(ve.length>_e+1?[]:new ke),!(ve.length<_e+1));nt++)fe(Te[nt],_e+1,ve)}(Le,0,ie),Le}var h=function(){var ie=this;function ke(j,K){for(var ue=1<<K-1>>>0;j&ue;)ue>>>=1;return ue?(j&ue-1)+ue:j}function Le(j,K,ue,we,je){e(!(we%ue));do j[K+(we-=ue)]=je;while(0<we)}function fe(j,K,ue,we,je){if(e(2328>=je),512>=je)var Je=u(512);else if((Je=u(je))==null)return 0;return function(tt,at,pt,Ct,ai,ki){var wi,pi,on=at,Oi=1<<pt,qt=u(16),Qt=u(16);for(e(ai!=0),e(Ct!=null),e(tt!=null),e(0<pt),pi=0;pi<ai;++pi){if(15<Ct[pi])return 0;++qt[Ct[pi]]}if(qt[0]==ai)return 0;for(Qt[1]=0,wi=1;15>wi;++wi){if(qt[wi]>1<<wi)return 0;Qt[wi+1]=Qt[wi]+qt[wi]}for(pi=0;pi<ai;++pi)wi=Ct[pi],0<Ct[pi]&&(ki[Qt[wi]++]=pi);if(Qt[15]==1)return(Ct=new Te).g=0,Ct.value=ki[0],Le(tt,on,1,Oi,Ct),Oi;var Ki,tn=-1,Ui=Oi-1,Fn=0,Sn=1,Sr=1,Rn=1<<pt;for(pi=0,wi=1,ai=2;wi<=pt;++wi,ai<<=1){if(Sn+=Sr<<=1,0>(Sr-=qt[wi]))return 0;for(;0<qt[wi];--qt[wi])(Ct=new Te).g=wi,Ct.value=ki[pi++],Le(tt,on+Fn,ai,Rn,Ct),Fn=ke(Fn,wi)}for(wi=pt+1,ai=2;15>=wi;++wi,ai<<=1){if(Sn+=Sr<<=1,0>(Sr-=qt[wi]))return 0;for(;0<qt[wi];--qt[wi]){if(Ct=new Te,(Fn&Ui)!=tn){for(on+=Rn,Ki=1<<(tn=wi)-pt;15>tn&&!(0>=(Ki-=qt[tn]));)++tn,Ki<<=1;Oi+=Rn=1<<(Ki=tn-pt),tt[at+(tn=Fn&Ui)].g=Ki+pt,tt[at+tn].value=on-at-tn}Ct.g=wi-pt,Ct.value=ki[pi++],Le(tt,on+(Fn>>pt),ai,Rn,Ct),Fn=ke(Fn,wi)}}return Sn!=2*Qt[15]-1?0:Oi}(j,K,ue,we,je,Je)}function Te(){this.value=this.g=0}function _e(){this.value=this.g=0}function ve(){this.G=m(5,Te),this.H=u(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=m(Fs,_e)}function rt(j,K,ue,we){e(j!=null),e(K!=null),e(2147483648>we),j.Ca=254,j.I=0,j.b=-8,j.Ka=0,j.oa=K,j.pa=ue,j.Jd=K,j.Yc=ue+we,j.Zc=4<=we?ue+we-4+1:ue,Xe(j)}function nt(j,K){for(var ue=0;0<K--;)ue|=Ye(j,128)<<K;return ue}function Tt(j,K){var ue=nt(j,K);return lt(j)?-ue:ue}function We(j,K,ue,we){var je,Je=0;for(e(j!=null),e(K!=null),e(4294967288>we),j.Sb=we,j.Ra=0,j.u=0,j.h=0,4<we&&(we=4),je=0;je<we;++je)Je+=K[ue+je]<<8*je;j.Ra=Je,j.bb=we,j.oa=K,j.pa=ue}function be(j){for(;8<=j.u&&j.bb<j.Sb;)j.Ra>>>=8,j.Ra+=j.oa[j.pa+j.bb]<<Ua-8>>>0,++j.bb,j.u-=8;he(j)&&(j.h=1,j.u=0)}function Ce(j,K){if(e(0<=K),!j.h&&K<=Yl){var ue=Ee(j)&yu[K];return j.u+=K,be(j),ue}return j.h=1,j.u=0}function Be(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function le(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function Ee(j){return j.Ra>>>(j.u&Ua-1)>>>0}function he(j){return e(j.bb<=j.Sb),j.h||j.bb==j.Sb&&j.u>Ua}function me(j,K){j.u=K,j.h=he(j)}function Fe(j){j.u>=_u&&(e(j.u>=_u),be(j))}function Xe(j){e(j!=null&&j.oa!=null),j.pa<j.Zc?(j.I=(j.oa[j.pa++]|j.I<<8)>>>0,j.b+=8):(e(j!=null&&j.oa!=null),j.pa<j.Yc?(j.b+=8,j.I=j.oa[j.pa++]|j.I<<8):j.Ka?j.b=0:(j.I<<=8,j.b+=8,j.Ka=1))}function lt(j){return nt(j,1)}function Ye(j,K){var ue=j.Ca;0>j.b&&Xe(j);var we=j.b,je=ue*K>>>8,Je=(j.I>>>we>je)+0;for(Je?(ue-=je,j.I-=je+1<<we>>>0):ue=je+1,we=ue,je=0;256<=we;)je+=8,we>>=8;return we=7^je+Rs[we],j.b-=we,j.Ca=(ue<<we)-1,Je}function Ke(j,K,ue){j[K+0]=ue>>24&255,j[K+1]=ue>>16&255,j[K+2]=ue>>8&255,j[K+3]=ue>>0&255}function Lt(j,K){return j[K+0]<<0|j[K+1]<<8}function $t(j,K){return Lt(j,K)|j[K+2]<<16}function dt(j,K){return Lt(j,K)|Lt(j,K+2)<<16}function wt(j,K){var ue=1<<K;return e(j!=null),e(0<K),j.X=u(ue),j.X==null?0:(j.Mb=32-K,j.Xa=K,1)}function bt(j,K){e(j!=null),e(K!=null),e(j.Xa==K.Xa),o(K.X,0,j.X,0,1<<K.Xa)}function $e(){this.X=[],this.Xa=this.Mb=0}function Yt(j,K,ue,we){e(ue!=null),e(we!=null);var je=ue[0],Je=we[0];return je==0&&(je=(j*Je+K/2)/K),Je==0&&(Je=(K*je+j/2)/j),0>=je||0>=Je?0:(ue[0]=je,we[0]=Je,1)}function li(j,K){return j+(1<<K)-1>>>K}function Zt(j,K){return((4278255360&j)+(4278255360&K)>>>0&4278255360)+((16711935&j)+(16711935&K)>>>0&16711935)>>>0}function Ci(j,K){ie[K]=function(ue,we,je,Je,tt,at,pt){var Ct;for(Ct=0;Ct<tt;++Ct){var ai=ie[j](at[pt+Ct-1],je,Je+Ct);at[pt+Ct]=Zt(ue[we+Ct],ai)}}}function Li(){this.ud=this.hd=this.jd=0}function Vt(j,K){return((4278124286&(j^K))>>>1)+(j&K)>>>0}function mi(j){return 0<=j&&256>j?j:0>j?0:255<j?255:void 0}function Qi(j,K){return mi(j+(j-K+.5>>1))}function xi(j,K,ue){return Math.abs(K-ue)-Math.abs(j-ue)}function Jt(j,K,ue,we,je,Je,tt){for(we=Je[tt-1],ue=0;ue<je;++ue)Je[tt+ue]=we=Zt(j[K+ue],we)}function Me(j,K,ue,we,je){var Je;for(Je=0;Je<ue;++Je){var tt=j[K+Je],at=tt>>8&255,pt=16711935&(pt=(pt=16711935&tt)+((at<<16)+at));we[je+Je]=(4278255360&tt)+pt>>>0}}function Q(j,K){K.jd=j>>0&255,K.hd=j>>8&255,K.ud=j>>16&255}function ae(j,K,ue,we,je,Je){var tt;for(tt=0;tt<we;++tt){var at=K[ue+tt],pt=at>>>8,Ct=at,ai=255&(ai=(ai=at>>>16)+((j.jd<<24>>24)*(pt<<24>>24)>>>5));Ct=255&(Ct=(Ct=Ct+((j.hd<<24>>24)*(pt<<24>>24)>>>5))+((j.ud<<24>>24)*(ai<<24>>24)>>>5)),je[Je+tt]=(4278255360&at)+(ai<<16)+Ct}}function et(j,K,ue,we,je){ie[K]=function(Je,tt,at,pt,Ct,ai,ki,wi,pi){for(pt=ki;pt<wi;++pt)for(ki=0;ki<pi;++ki)Ct[ai++]=je(at[we(Je[tt++])])},ie[j]=function(Je,tt,at,pt,Ct,ai,ki){var wi=8>>Je.b,pi=Je.Ea,on=Je.K[0],Oi=Je.w;if(8>wi)for(Je=(1<<Je.b)-1,Oi=(1<<wi)-1;tt<at;++tt){var qt,Qt=0;for(qt=0;qt<pi;++qt)qt&Je||(Qt=we(pt[Ct++])),ai[ki++]=je(on[Qt&Oi]),Qt>>=wi}else ie["VP8LMapColor"+ue](pt,Ct,on,Oi,ai,ki,tt,at,pi)}}function vt(j,K,ue,we,je){for(ue=K+ue;K<ue;){var Je=j[K++];we[je++]=Je>>16&255,we[je++]=Je>>8&255,we[je++]=Je>>0&255}}function Wt(j,K,ue,we,je){for(ue=K+ue;K<ue;){var Je=j[K++];we[je++]=Je>>16&255,we[je++]=Je>>8&255,we[je++]=Je>>0&255,we[je++]=Je>>24&255}}function di(j,K,ue,we,je){for(ue=K+ue;K<ue;){var Je=(tt=j[K++])>>16&240|tt>>12&15,tt=tt>>0&240|tt>>28&15;we[je++]=Je,we[je++]=tt}}function xn(j,K,ue,we,je){for(ue=K+ue;K<ue;){var Je=(tt=j[K++])>>16&248|tt>>13&7,tt=tt>>5&224|tt>>3&31;we[je++]=Je,we[je++]=tt}}function Mn(j,K,ue,we,je){for(ue=K+ue;K<ue;){var Je=j[K++];we[je++]=Je>>0&255,we[je++]=Je>>8&255,we[je++]=Je>>16&255}}function fn(j,K,ue,we,je,Je){if(Je==0)for(ue=K+ue;K<ue;)Ke(we,((Je=j[K++])[0]>>24|Je[1]>>8&65280|Je[2]<<8&16711680|Je[3]<<24)>>>0),je+=32;else o(we,je,j,K,ue)}function Bi(j,K){ie[K][0]=ie[j+"0"],ie[K][1]=ie[j+"1"],ie[K][2]=ie[j+"2"],ie[K][3]=ie[j+"3"],ie[K][4]=ie[j+"4"],ie[K][5]=ie[j+"5"],ie[K][6]=ie[j+"6"],ie[K][7]=ie[j+"7"],ie[K][8]=ie[j+"8"],ie[K][9]=ie[j+"9"],ie[K][10]=ie[j+"10"],ie[K][11]=ie[j+"11"],ie[K][12]=ie[j+"12"],ie[K][13]=ie[j+"13"],ie[K][14]=ie[j+"0"],ie[K][15]=ie[j+"0"]}function en(j){return j==Bo||j==Au||j==ku||j==Nc}function Xn(){this.eb=[],this.size=this.A=this.fb=0}function Yn(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function Kr(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new Xn,this.f.kb=new Yn,this.sd=null}function jn(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function cn(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function mn(j){return alert("todo:WebPSamplerProcessPlane"),j.T}function er(j,K){var ue=j.T,we=K.ba.f.RGBA,je=we.eb,Je=we.fb+j.ka*we.A,tt=W[K.ba.S],at=j.y,pt=j.O,Ct=j.f,ai=j.N,ki=j.ea,wi=j.W,pi=K.cc,on=K.dc,Oi=K.Mc,qt=K.Nc,Qt=j.ka,Ki=j.ka+j.T,tn=j.U,Ui=tn+1>>1;for(Qt==0?tt(at,pt,null,null,Ct,ai,ki,wi,Ct,ai,ki,wi,je,Je,null,null,tn):(tt(K.ec,K.fc,at,pt,pi,on,Oi,qt,Ct,ai,ki,wi,je,Je-we.A,je,Je,tn),++ue);Qt+2<Ki;Qt+=2)pi=Ct,on=ai,Oi=ki,qt=wi,ai+=j.Rc,wi+=j.Rc,Je+=2*we.A,tt(at,(pt+=2*j.fa)-j.fa,at,pt,pi,on,Oi,qt,Ct,ai,ki,wi,je,Je-we.A,je,Je,tn);return pt+=j.fa,j.j+Ki<j.o?(o(K.ec,K.fc,at,pt,tn),o(K.cc,K.dc,Ct,ai,Ui),o(K.Mc,K.Nc,ki,wi,Ui),ue--):1&Ki||tt(at,pt,null,null,Ct,ai,ki,wi,Ct,ai,ki,wi,je,Je+we.A,null,null,tn),ue}function yn(j,K,ue){var we=j.F,je=[j.J];if(we!=null){var Je=j.U,tt=K.ba.S,at=tt==Kl||tt==ku;K=K.ba.f.RGBA;var pt=[0],Ct=j.ka;pt[0]=j.T,j.Kb&&(Ct==0?--pt[0]:(--Ct,je[0]-=j.width),j.j+j.ka+j.T==j.o&&(pt[0]=j.o-j.j-Ct));var ai=K.eb;Ct=K.fb+Ct*K.A,j=Hu(we,je[0],j.width,Je,pt,ai,Ct+(at?0:3),K.A),e(ue==pt),j&&en(tt)&&Da(ai,Ct,at,Je,pt,K.A)}return 0}function Ln(j){var K=j.ma,ue=K.ba.S,we=11>ue,je=ue==uc||ue==xu||ue==Kl||ue==eo||ue==12||en(ue);if(K.memory=null,K.Ib=null,K.Jb=null,K.Nd=null,!Il(K.Oa,j,je?11:12))return 0;if(je&&en(ue)&&hn(),j.da)alert("todo:use_scaling");else{if(we){if(K.Ib=mn,j.Kb){if(ue=j.U+1>>1,K.memory=u(j.U+2*ue),K.memory==null)return 0;K.ec=K.memory,K.fc=0,K.cc=K.ec,K.dc=K.fc+j.U,K.Mc=K.cc,K.Nc=K.dc+ue,K.Ib=er,hn()}}else alert("todo:EmitYUV");je&&(K.Jb=yn,we&&hi())}if(we&&!jt){for(j=0;256>j;++j)Pi[j]=89858*(j-128)+St>>Mt,Ni[j]=-22014*(j-128)+St,Vi[j]=-45773*(j-128),Ei[j]=113618*(j-128)+St>>Mt;for(j=It;j<ri;++j)K=76283*(j-16)+St>>Mt,un[j-It]=Is(K,255),zi[j-It]=Is(K+8>>4,15);jt=1}return 1}function lr(j){var K=j.ma,ue=j.U,we=j.T;return e(!(1&j.ka)),0>=ue||0>=we?0:(ue=K.Ib(j,K),K.Jb!=null&&K.Jb(j,K,ue),K.Dc+=ue,1)}function oo(j){j.ma.memory=null}function ln(j,K,ue,we){return Ce(j,8)!=47?0:(K[0]=Ce(j,14)+1,ue[0]=Ce(j,14)+1,we[0]=Ce(j,1),Ce(j,3)!=0?0:!j.h)}function qe(j,K){if(4>j)return j+1;var ue=j-2>>1;return(2+(1&j)<<ue)+Ce(K,ue)+1}function To(j,K){return 120<K?K-120:1<=(ue=((ue=tr[K-1])>>4)*j+(8-(15&ue)))?ue:1;var ue}function bo(j,K,ue){var we=Ee(ue),je=j[K+=255&we].g-8;return 0<je&&(me(ue,ue.u+8),we=Ee(ue),K+=j[K].value,K+=we&(1<<je)-1),me(ue,ue.u+j[K].g),j[K].value}function co(j,K,ue){return ue.g+=j.g,ue.value+=j.value<<K>>>0,e(8>=ue.g),j.g}function Pe(j,K,ue){var we=j.xc;return e((K=we==0?0:j.vc[j.md*(ue>>we)+(K>>we)])<j.Wb),j.Ya[K]}function Ie(j,K,ue,we){var je=j.ab,Je=j.c*K,tt=j.C;K=tt+K;var at=ue,pt=we;for(we=j.Ta,ue=j.Ua;0<je--;){var Ct=j.gc[je],ai=tt,ki=K,wi=at,pi=pt,on=(pt=we,at=ue,Ct.Ea);switch(e(ai<ki),e(ki<=Ct.nc),Ct.hc){case 2:Zl(wi,pi,(ki-ai)*on,pt,at);break;case 0:var Oi=ai,qt=ki,Qt=pt,Ki=at,tn=(Rn=Ct).Ea;Oi==0&&(vu(wi,pi,null,null,1,Qt,Ki),Jt(wi,pi+1,0,0,tn-1,Qt,Ki+1),pi+=tn,Ki+=tn,++Oi);for(var Ui=1<<Rn.b,Fn=Ui-1,Sn=li(tn,Rn.b),Sr=Rn.K,Rn=Rn.w+(Oi>>Rn.b)*Sn;Oi<qt;){var vo=Sr,Ao=Rn,Zr=1;for(ol(wi,pi,Qt,Ki-tn,1,Qt,Ki);Zr<tn;){var Hr=(Zr&~Fn)+Ui;Hr>tn&&(Hr=tn),(0,Ll[vo[Ao++]>>8&15])(wi,pi+ +Zr,Qt,Ki+Zr-tn,Hr-Zr,Qt,Ki+Zr),Zr=Hr}pi+=tn,Ki+=tn,++Oi&Fn||(Rn+=Sn)}ki!=Ct.nc&&o(pt,at-on,pt,at+(ki-ai-1)*on,on);break;case 1:for(on=wi,qt=pi,tn=(wi=Ct.Ea)-(Ki=wi&~(Qt=(pi=1<<Ct.b)-1)),Oi=li(wi,Ct.b),Ui=Ct.K,Ct=Ct.w+(ai>>Ct.b)*Oi;ai<ki;){for(Fn=Ui,Sn=Ct,Sr=new Li,Rn=qt+Ki,vo=qt+wi;qt<Rn;)Q(Fn[Sn++],Sr),Bs(Sr,on,qt,pi,pt,at),qt+=pi,at+=pi;qt<vo&&(Q(Fn[Sn++],Sr),Bs(Sr,on,qt,tn,pt,at),qt+=tn,at+=tn),++ai&Qt||(Ct+=Oi)}break;case 3:if(wi==pt&&pi==at&&0<Ct.b){for(qt=pt,wi=on=at+(ki-ai)*on-(Ki=(ki-ai)*li(Ct.Ea,Ct.b)),pi=pt,Qt=at,Oi=[],Ki=(tn=Ki)-1;0<=Ki;--Ki)Oi[Ki]=pi[Qt+Ki];for(Ki=tn-1;0<=Ki;--Ki)qt[wi+Ki]=Oi[Ki];Ta(Ct,ai,ki,pt,on,pt,at)}else Ta(Ct,ai,ki,wi,pi,pt,at)}at=we,pt=ue}pt!=ue&&o(we,ue,at,pt,Je)}function He(j,K){var ue=j.V,we=j.Ba+j.c*j.C,je=K-j.C;if(e(K<=j.l.o),e(16>=je),0<je){var Je=j.l,tt=j.Ta,at=j.Ua,pt=Je.width;if(Ie(j,je,ue,we),je=at=[at],e((ue=j.C)<(we=K)),e(Je.v<Je.va),we>Je.o&&(we=Je.o),ue<Je.j){var Ct=Je.j-ue;ue=Je.j,je[0]+=Ct*pt}if(ue>=we?ue=0:(je[0]+=4*Je.v,Je.ka=ue-Je.j,Je.U=Je.va-Je.v,Je.T=we-ue,ue=1),ue){if(at=at[0],11>(ue=j.ca).S){var ai=ue.f.RGBA,ki=(we=ue.S,je=Je.U,Je=Je.T,Ct=ai.eb,ai.A),wi=Je;for(ai=ai.fb+j.Ma*ai.A;0<wi--;){var pi=tt,on=at,Oi=je,qt=Ct,Qt=ai;switch(we){case Va:La(pi,on,Oi,qt,Qt);break;case uc:Pa(pi,on,Oi,qt,Qt);break;case Bo:Pa(pi,on,Oi,qt,Qt),Da(qt,Qt,0,Oi,1,0);break;case wu:sl(pi,on,Oi,qt,Qt);break;case xu:fn(pi,on,Oi,qt,Qt,1);break;case Au:fn(pi,on,Oi,qt,Qt,1),Da(qt,Qt,0,Oi,1,0);break;case Kl:fn(pi,on,Oi,qt,Qt,0);break;case ku:fn(pi,on,Oi,qt,Qt,0),Da(qt,Qt,1,Oi,1,0);break;case eo:ra(pi,on,Oi,qt,Qt);break;case Nc:ra(pi,on,Oi,qt,Qt),qu(qt,Qt,Oi,1,0);break;case ya:us(pi,on,Oi,qt,Qt);break;default:e(0)}at+=pt,ai+=ki}j.Ma+=Je}else alert("todo:EmitRescaledRowsYUVA");e(j.Ma<=ue.height)}}j.C=K,e(j.C<=j.i)}function ct(j){var K;if(0<j.ua)return 0;for(K=0;K<j.Wb;++K){var ue=j.Ya[K].G,we=j.Ya[K].H;if(0<ue[1][we[1]+0].g||0<ue[2][we[2]+0].g||0<ue[3][we[3]+0].g)return 0}return 1}function gt(j,K,ue,we,je,Je){if(j.Z!=0){var tt=j.qd,at=j.rd;for(e(z[j.Z]!=null);K<ue;++K)z[j.Z](tt,at,we,je,we,je,Je),tt=we,at=je,je+=Je;j.qd=tt,j.rd=at}}function Rt(j,K){var ue=j.l.ma,we=ue.Z==0||ue.Z==1?j.l.j:j.C;if(we=j.C<we?we:j.C,e(K<=j.l.o),K>we){var je=j.l.width,Je=ue.ca,tt=ue.tb+je*we,at=j.V,pt=j.Ba+j.c*we,Ct=j.gc;e(j.ab==1),e(Ct[0].hc==3),Fc(Ct[0],we,K,at,pt,Je,tt),gt(ue,we,K,Je,tt,je)}j.C=j.Ma=K}function Ge(j,K,ue,we,je,Je,tt){var at=j.$/we,pt=j.$%we,Ct=j.m,ai=j.s,ki=ue+j.$,wi=ki;je=ue+we*je;var pi=ue+we*Je,on=280+ai.ua,Oi=j.Pb?at:16777216,qt=0<ai.ua?ai.Wa:null,Qt=ai.wc,Ki=ki<pi?Pe(ai,pt,at):null;e(j.C<Je),e(pi<=je);var tn=!1;e:for(;;){for(;tn||ki<pi;){var Ui=0;if(at>=Oi){var Fn=ki-ue;e((Oi=j).Pb),Oi.wd=Oi.m,Oi.xd=Fn,0<Oi.s.ua&&bt(Oi.s.Wa,Oi.s.vb),Oi=at+Gu}if(pt&Qt||(Ki=Pe(ai,pt,at)),e(Ki!=null),Ki.Qb&&(K[ki]=Ki.qb,tn=!0),!tn)if(Fe(Ct),Ki.jc){Ui=Ct,Fn=K;var Sn=ki,Sr=Ki.pd[Ee(Ui)&Fs-1];e(Ki.jc),256>Sr.g?(me(Ui,Ui.u+Sr.g),Fn[Sn]=Sr.value,Ui=0):(me(Ui,Ui.u+Sr.g-256),e(256<=Sr.value),Ui=Sr.value),Ui==0&&(tn=!0)}else Ui=bo(Ki.G[0],Ki.H[0],Ct);if(Ct.h)break;if(tn||256>Ui){if(!tn)if(Ki.nd)K[ki]=(Ki.qb|Ui<<8)>>>0;else{if(Fe(Ct),tn=bo(Ki.G[1],Ki.H[1],Ct),Fe(Ct),Fn=bo(Ki.G[2],Ki.H[2],Ct),Sn=bo(Ki.G[3],Ki.H[3],Ct),Ct.h)break;K[ki]=(Sn<<24|tn<<16|Ui<<8|Fn)>>>0}if(tn=!1,++ki,++pt>=we&&(pt=0,++at,tt!=null&&at<=Je&&!(at%16)&&tt(j,at),qt!=null))for(;wi<ki;)Ui=K[wi++],qt.X[(506832829*Ui&4294967295)>>>qt.Mb]=Ui}else if(280>Ui){if(Ui=qe(Ui-256,Ct),Fn=bo(Ki.G[4],Ki.H[4],Ct),Fe(Ct),Fn=To(we,Fn=qe(Fn,Ct)),Ct.h)break;if(ki-ue<Fn||je-ki<Ui)break e;for(Sn=0;Sn<Ui;++Sn)K[ki+Sn]=K[ki+Sn-Fn];for(ki+=Ui,pt+=Ui;pt>=we;)pt-=we,++at,tt!=null&&at<=Je&&!(at%16)&&tt(j,at);if(e(ki<=je),pt&Qt&&(Ki=Pe(ai,pt,at)),qt!=null)for(;wi<ki;)Ui=K[wi++],qt.X[(506832829*Ui&4294967295)>>>qt.Mb]=Ui}else{if(!(Ui<on))break e;for(tn=Ui-280,e(qt!=null);wi<ki;)Ui=K[wi++],qt.X[(506832829*Ui&4294967295)>>>qt.Mb]=Ui;Ui=ki,e(!(tn>>>(Fn=qt).Xa)),K[Ui]=Fn.X[tn],tn=!0}tn||e(Ct.h==he(Ct))}if(j.Pb&&Ct.h&&ki<je)e(j.m.h),j.a=5,j.m=j.wd,j.$=j.xd,0<j.s.ua&&bt(j.s.vb,j.s.Wa);else{if(Ct.h)break e;tt!=null&&tt(j,at>Je?Je:at),j.a=0,j.$=ki-ue}return 1}return j.a=3,0}function Ht(j){e(j!=null),j.vc=null,j.yc=null,j.Ya=null;var K=j.Wa;K!=null&&(K.X=null),j.vb=null,e(j!=null)}function Bt(){var j=new zu;return j==null?null:(j.a=0,j.xb=D,Bi("Predictor","VP8LPredictors"),Bi("Predictor","VP8LPredictors_C"),Bi("PredictorAdd","VP8LPredictorsAdd"),Bi("PredictorAdd","VP8LPredictorsAdd_C"),Zl=Me,Bs=ae,La=vt,Pa=Wt,ra=di,us=xn,sl=Mn,ie.VP8LMapColor32b=Tl,ie.VP8LMapColor8b=Rc,j)}function ei(j,K,ue,we,je){var Je=1,tt=[j],at=[K],pt=we.m,Ct=we.s,ai=null,ki=0;e:for(;;){if(ue)for(;Je&&Ce(pt,1);){var wi=tt,pi=at,on=we,Oi=1,qt=on.m,Qt=on.gc[on.ab],Ki=Ce(qt,2);if(on.Oc&1<<Ki)Je=0;else{switch(on.Oc|=1<<Ki,Qt.hc=Ki,Qt.Ea=wi[0],Qt.nc=pi[0],Qt.K=[null],++on.ab,e(4>=on.ab),Ki){case 0:case 1:Qt.b=Ce(qt,3)+2,Oi=ei(li(Qt.Ea,Qt.b),li(Qt.nc,Qt.b),0,on,Qt.K),Qt.K=Qt.K[0];break;case 3:var tn,Ui=Ce(qt,8)+1,Fn=16<Ui?0:4<Ui?1:2<Ui?2:3;if(wi[0]=li(Qt.Ea,Fn),Qt.b=Fn,tn=Oi=ei(Ui,1,0,on,Qt.K)){var Sn,Sr=Ui,Rn=Qt,vo=1<<(8>>Rn.b),Ao=u(vo);if(Ao==null)tn=0;else{var Zr=Rn.K[0],Hr=Rn.w;for(Ao[0]=Rn.K[0][0],Sn=1;Sn<1*Sr;++Sn)Ao[Sn]=Zt(Zr[Hr+Sn],Ao[Sn-1]);for(;Sn<4*vo;++Sn)Ao[Sn]=0;Rn.K[0]=null,Rn.K[0]=Ao,tn=1}}Oi=tn;break;case 2:break;default:e(0)}Je=Oi}}if(tt=tt[0],at=at[0],Je&&Ce(pt,1)&&!(Je=1<=(ki=Ce(pt,4))&&11>=ki)){we.a=3;break e}var yo;if(yo=Je)t:{var ko,Wr,Ts,Rr=we,ss=tt,zs=at,so=ki,cs=ue,Ls=Rr.m,Ns=Rr.s,zo=[null],_a=1,qa=0,Mo=yr[so];i:for(;;){if(cs&&Ce(Ls,1)){var xs=Ce(Ls,3)+2,$l=li(ss,xs),Ha=li(zs,xs),cl=$l*Ha;if(!ei($l,Ha,0,Rr,zo))break i;for(zo=zo[0],Ns.xc=xs,ko=0;ko<cl;++ko){var hl=zo[ko]>>8&65535;zo[ko]=hl,hl>=_a&&(_a=hl+1)}}if(Ls.h)break i;for(Wr=0;5>Wr;++Wr){var as=jh[Wr];!Wr&&0<so&&(as+=1<<so),qa<as&&(qa=as)}var Uh=m(_a*Mo,Te),s0=_a,wf=m(s0,ve);if(wf==null)var fc=null;else e(65536>=s0),fc=wf;var dc=u(qa);if(fc==null||dc==null||Uh==null){Rr.a=1;break i}var Vh=Uh;for(ko=Ts=0;ko<_a;++ko){var Ga=fc[ko],Wa=Ga.G,pc=Ga.H,mc=0,qh=1,jc=0;for(Wr=0;5>Wr;++Wr){as=jh[Wr],Wa[Wr]=Vh,pc[Wr]=Ts,!Wr&&0<so&&(as+=1<<so);n:{var gc,Uc=as,yc=Rr,Vc=dc,aa=Vh,Js=Ts,Ps=0,eu=yc.m,a0=Ce(eu,1);if(l(Vc,0,0,Uc),a0){var tu=Ce(eu,1)+1,l0=Ce(eu,1),xf=Ce(eu,l0==0?1:8);Vc[xf]=1,tu==2&&(Vc[xf=Ce(eu,8)]=1);var mh=1}else{var qc=u(19),Af=Ce(eu,4)+4;if(19<Af){yc.a=3;var gh=0;break n}for(gc=0;gc<Af;++gc)qc[cc[gc]]=Ce(eu,3);var Hh=void 0,yh=void 0,Dl=yc,u0=qc,Hc=Uc,_c=Vc,va=0,iu=Dl.m,c0=8,kf=m(128,Te);o:for(;fe(kf,0,7,u0,19);){if(Ce(iu,1)){var ud=2+2*Ce(iu,3);if((Hh=2+Ce(iu,ud))>Hc)break o}else Hh=Hc;for(yh=0;yh<Hc&&Hh--;){Fe(iu);var vc=kf[0+(127&Ee(iu))];me(iu,iu.u+vc.g);var Su=vc.value;if(16>Su)_c[yh++]=Su,Su!=0&&(c0=Su);else{var h0=Su==16,Wu=Su-16,_h=al[Wu],Sf=Ce(iu,Nh[Wu])+_h;if(yh+Sf>Hc)break o;for(var cd=h0?c0:0;0<Sf--;)_c[yh++]=cd}}va=1;break o}va||(Dl.a=3),mh=va}(mh=mh&&!eu.h)&&(Ps=fe(aa,Js,8,Vc,Uc)),mh&&Ps!=0?gh=Ps:(yc.a=3,gh=0)}if(gh==0)break i;if(qh&&ll[Wr]==1&&(qh=Vh[Ts].g==0),mc+=Vh[Ts].g,Ts+=gh,3>=Wr){var vh,Cf=dc[0];for(vh=1;vh<as;++vh)dc[vh]>Cf&&(Cf=dc[vh]);jc+=Cf}}if(Ga.nd=qh,Ga.Qb=0,qh&&(Ga.qb=(Wa[3][pc[3]+0].value<<24|Wa[1][pc[1]+0].value<<16|Wa[2][pc[2]+0].value)>>>0,mc==0&&256>Wa[0][pc[0]+0].value&&(Ga.Qb=1,Ga.qb+=Wa[0][pc[0]+0].value<<8)),Ga.jc=!Ga.Qb&&6>jc,Ga.jc){var ba,Cu=Ga;for(ba=0;ba<Fs;++ba){var Xu=ba,nu=Cu.pd[Xu],Gh=Cu.G[0][Cu.H[0]+Xu];256<=Gh.value?(nu.g=Gh.g+256,nu.value=Gh.value):(nu.g=0,nu.value=0,Xu>>=co(Gh,8,nu),Xu>>=co(Cu.G[1][Cu.H[1]+Xu],16,nu),Xu>>=co(Cu.G[2][Cu.H[2]+Xu],0,nu),co(Cu.G[3][Cu.H[3]+Xu],24,nu))}}}Ns.vc=zo,Ns.Wb=_a,Ns.Ya=fc,Ns.yc=Uh,yo=1;break t}yo=0}if(!(Je=yo)){we.a=3;break e}if(0<ki){if(Ct.ua=1<<ki,!wt(Ct.Wa,ki)){we.a=1,Je=0;break e}}else Ct.ua=0;var Yu=we,f0=tt,Ko=at,Zu=Yu.s,Wh=Zu.xc;if(Yu.c=f0,Yu.i=Ko,Zu.md=li(f0,Wh),Zu.wc=Wh==0?-1:(1<<Wh)-1,ue){we.xb=I;break e}if((ai=u(tt*at))==null){we.a=1,Je=0;break e}Je=(Je=Ge(we,ai,0,tt,at,at,null))&&!pt.h;break e}return Je?(je!=null?je[0]=ai:(e(ai==null),e(ue)),we.$=0,ue||Ht(Ct)):Ht(Ct),Je}function _t(j,K){var ue=j.c*j.i,we=ue+K+16*K;return e(j.c<=K),j.V=u(we),j.V==null?(j.Ta=null,j.Ua=0,j.a=1,0):(j.Ta=j.V,j.Ua=j.Ba+ue+K,1)}function Ri(j,K){var ue=j.C,we=K-ue,je=j.V,Je=j.Ba+j.c*ue;for(e(K<=j.l.o);0<we;){var tt=16<we?16:we,at=j.l.ma,pt=j.l.width,Ct=pt*tt,ai=at.ca,ki=at.tb+pt*ue,wi=j.Ta,pi=j.Ua;Ie(j,tt,je,Je),Bc(wi,pi,ai,ki,Ct),gt(at,ue,ue+tt,ai,ki,pt),we-=tt,je+=tt*j.c,ue+=tt}e(ue==K),j.C=j.Ma=K}function Ii(){this.ub=this.yd=this.td=this.Rb=0}function In(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function kn(){this.Fb=this.Bb=this.Cb=0,this.Zb=u(4),this.Lb=u(4)}function xt(){this.Yb=function(){var j=[];return function K(ue,we,je){for(var Je=je[we],tt=0;tt<Je&&(ue.push(je.length>we+1?[]:0),!(je.length<we+1));tt++)K(ue[tt],we+1,je)}(j,0,[3,11]),j}()}function Pn(){this.jb=u(3),this.Wc=r([4,8],xt),this.Xc=r([4,17],xt)}function $n(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new u(4),this.od=new u(4)}function Pr(){this.ld=this.La=this.dd=this.tc=0}function cr(){this.Na=this.la=0}function Cr(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function Or(){this.ad=u(384),this.Za=0,this.Ob=u(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function Er(){this.uc=this.M=this.Nb=0,this.wa=Array(new Pr),this.Y=0,this.ya=Array(new Or),this.aa=0,this.l=new Qo}function Jo(){this.y=u(16),this.f=u(8),this.ea=u(8)}function _o(){this.cb=this.a=0,this.sc="",this.m=new Be,this.Od=new Ii,this.Kc=new In,this.ed=new $n,this.Qa=new kn,this.Ic=this.$c=this.Aa=0,this.D=new Er,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=m(8,Be),this.ia=0,this.pb=m(4,Cr),this.Pa=new Pn,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new Jo),this.Hd=0,this.rb=Array(new cr),this.sb=0,this.wa=Array(new Pr),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new Or),this.L=this.aa=0,this.gd=r([4,2],Pr),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function Qo(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function il(){var j=new _o;return j!=null&&(j.a=0,j.sc="OK",j.cb=0,j.Xb=0,jo||(jo=hr)),j}function Do(j,K,ue){return j.a==0&&(j.a=K,j.sc=ue,j.cb=0),0}function Ot(j,K,ue){return 3<=ue&&j[K+0]==157&&j[K+1]==1&&j[K+2]==42}function sr(j,K){if(j==null)return 0;if(j.a=0,j.sc="OK",K==null)return Do(j,2,"null VP8Io passed to VP8GetHeaders()");var ue=K.data,we=K.w,je=K.ha;if(4>je)return Do(j,7,"Truncated header.");var Je=ue[we+0]|ue[we+1]<<8|ue[we+2]<<16,tt=j.Od;if(tt.Rb=!(1&Je),tt.td=Je>>1&7,tt.yd=Je>>4&1,tt.ub=Je>>5,3<tt.td)return Do(j,3,"Incorrect keyframe parameters.");if(!tt.yd)return Do(j,4,"Frame not displayable.");we+=3,je-=3;var at=j.Kc;if(tt.Rb){if(7>je)return Do(j,7,"cannot parse picture header");if(!Ot(ue,we,je))return Do(j,3,"Bad code word");at.c=16383&(ue[we+4]<<8|ue[we+3]),at.Td=ue[we+4]>>6,at.i=16383&(ue[we+6]<<8|ue[we+5]),at.Ud=ue[we+6]>>6,we+=7,je-=7,j.za=at.c+15>>4,j.Ub=at.i+15>>4,K.width=at.c,K.height=at.i,K.Da=0,K.j=0,K.v=0,K.va=K.width,K.o=K.height,K.da=0,K.ib=K.width,K.hb=K.height,K.U=K.width,K.T=K.height,l((Je=j.Pa).jb,0,255,Je.jb.length),e((Je=j.Qa)!=null),Je.Cb=0,Je.Bb=0,Je.Fb=1,l(Je.Zb,0,0,Je.Zb.length),l(Je.Lb,0,0,Je.Lb)}if(tt.ub>je)return Do(j,7,"bad partition length");rt(Je=j.m,ue,we,tt.ub),we+=tt.ub,je-=tt.ub,tt.Rb&&(at.Ld=lt(Je),at.Kd=lt(Je)),at=j.Qa;var pt,Ct=j.Pa;if(e(Je!=null),e(at!=null),at.Cb=lt(Je),at.Cb){if(at.Bb=lt(Je),lt(Je)){for(at.Fb=lt(Je),pt=0;4>pt;++pt)at.Zb[pt]=lt(Je)?Tt(Je,7):0;for(pt=0;4>pt;++pt)at.Lb[pt]=lt(Je)?Tt(Je,6):0}if(at.Bb)for(pt=0;3>pt;++pt)Ct.jb[pt]=lt(Je)?nt(Je,8):255}else at.Bb=0;if(Je.Ka)return Do(j,3,"cannot parse segment header");if((at=j.ed).zd=lt(Je),at.Tb=nt(Je,6),at.wb=nt(Je,3),at.Pc=lt(Je),at.Pc&&lt(Je)){for(Ct=0;4>Ct;++Ct)lt(Je)&&(at.vd[Ct]=Tt(Je,6));for(Ct=0;4>Ct;++Ct)lt(Je)&&(at.od[Ct]=Tt(Je,6))}if(j.L=at.Tb==0?0:at.zd?1:2,Je.Ka)return Do(j,3,"cannot parse filter header");var ai=je;if(je=pt=we,we=pt+ai,at=ai,j.Xb=(1<<nt(j.m,2))-1,ai<3*(Ct=j.Xb))ue=7;else{for(pt+=3*Ct,at-=3*Ct,ai=0;ai<Ct;++ai){var ki=ue[je+0]|ue[je+1]<<8|ue[je+2]<<16;ki>at&&(ki=at),rt(j.Jc[+ai],ue,pt,ki),pt+=ki,at-=ki,je+=3}rt(j.Jc[+Ct],ue,pt,at),ue=pt<we?0:5}if(ue!=0)return Do(j,ue,"cannot parse partitions");for(ue=nt(pt=j.m,7),je=lt(pt)?Tt(pt,4):0,we=lt(pt)?Tt(pt,4):0,at=lt(pt)?Tt(pt,4):0,Ct=lt(pt)?Tt(pt,4):0,pt=lt(pt)?Tt(pt,4):0,ai=j.Qa,ki=0;4>ki;++ki){if(ai.Cb){var wi=ai.Zb[ki];ai.Fb||(wi+=ue)}else{if(0<ki){j.pb[ki]=j.pb[0];continue}wi=ue}var pi=j.pb[ki];pi.Sc[0]=hc[Is(wi+je,127)],pi.Sc[1]=ws[Is(wi+0,127)],pi.Eb[0]=2*hc[Is(wi+we,127)],pi.Eb[1]=101581*ws[Is(wi+at,127)]>>16,8>pi.Eb[1]&&(pi.Eb[1]=8),pi.Qc[0]=hc[Is(wi+Ct,117)],pi.Qc[1]=ws[Is(wi+pt,127)],pi.lc=wi+pt}if(!tt.Rb)return Do(j,4,"Not a key frame.");for(lt(Je),tt=j.Pa,ue=0;4>ue;++ue){for(je=0;8>je;++je)for(we=0;3>we;++we)for(at=0;11>at;++at)Ct=Ye(Je,gs[ue][je][we][at])?nt(Je,8):Ql[ue][je][we][at],tt.Wc[ue][je].Yb[we][at]=Ct;for(je=0;17>je;++je)tt.Xc[ue][je]=tt.Wc[ue][ph[je]]}return j.kc=lt(Je),j.kc&&(j.Bd=nt(Je,8)),j.cb=1}function hr(j,K,ue,we,je,Je,tt){var at=K[je].Yb[ue];for(ue=0;16>je;++je){if(!Ye(j,at[ue+0]))return je;for(;!Ye(j,at[ue+1]);)if(at=K[++je].Yb[0],ue=0,je==16)return 16;var pt=K[je+1].Yb;if(Ye(j,at[ue+2])){var Ct=j,ai=0;if(Ye(Ct,(wi=at)[(ki=ue)+3]))if(Ye(Ct,wi[ki+6])){for(at=0,ki=2*(ai=Ye(Ct,wi[ki+8]))+(wi=Ye(Ct,wi[ki+9+ai])),ai=0,wi=Jl[ki];wi[at];++at)ai+=ai+Ye(Ct,wi[at]);ai+=3+(8<<ki)}else Ye(Ct,wi[ki+7])?(ai=7+2*Ye(Ct,165),ai+=Ye(Ct,145)):ai=5+Ye(Ct,159);else ai=Ye(Ct,wi[ki+4])?3+Ye(Ct,wi[ki+5]):2;at=pt[2]}else ai=1,at=pt[1];pt=tt+ul[je],0>(Ct=j).b&&Xe(Ct);var ki,wi=Ct.b,pi=(ki=Ct.Ca>>1)-(Ct.I>>wi)>>31;--Ct.b,Ct.Ca+=pi,Ct.Ca|=1,Ct.I-=(ki+1&pi)<<wi,Je[pt]=((ai^pi)-pi)*we[(0<je)+0]}return 16}function Nr(j){var K=j.rb[j.sb-1];K.la=0,K.Na=0,l(j.zc,0,0,j.zc.length),j.ja=0}function Xo(j,K){if(j==null)return 0;if(K==null)return Do(j,2,"NULL VP8Io parameter in VP8Decode().");if(!j.cb&&!sr(j,K))return 0;if(e(j.cb),K.ac==null||K.ac(K)){K.ob&&(j.L=0);var ue=vn[j.L];if(j.L==2?(j.yb=0,j.zb=0):(j.yb=K.v-ue>>4,j.zb=K.j-ue>>4,0>j.yb&&(j.yb=0),0>j.zb&&(j.zb=0)),j.Va=K.o+15+ue>>4,j.Hb=K.va+15+ue>>4,j.Hb>j.za&&(j.Hb=j.za),j.Va>j.Ub&&(j.Va=j.Ub),0<j.L){var we=j.ed;for(ue=0;4>ue;++ue){var je;if(j.Qa.Cb){var Je=j.Qa.Lb[ue];j.Qa.Fb||(Je+=we.Tb)}else Je=we.Tb;for(je=0;1>=je;++je){var tt=j.gd[ue][je],at=Je;if(we.Pc&&(at+=we.vd[0],je&&(at+=we.od[0])),0<(at=0>at?0:63<at?63:at)){var pt=at;0<we.wb&&(pt=4<we.wb?pt>>2:pt>>1)>9-we.wb&&(pt=9-we.wb),1>pt&&(pt=1),tt.dd=pt,tt.tc=2*at+pt,tt.ld=40<=at?2:15<=at?1:0}else tt.tc=0;tt.La=je}}}ue=0}else Do(j,6,"Frame setup failed"),ue=j.a;if(ue=ue==0){if(ue){j.$c=0,0<j.Aa||(j.Ic=Ir);e:{ue=j.Ic,we=4*(pt=j.za);var Ct=32*pt,ai=pt+1,ki=0<j.L?pt*(0<j.Aa?2:1):0,wi=(j.Aa==2?2:1)*pt;if((tt=we+832+(je=3*(16*ue+vn[j.L])/2*Ct)+(Je=j.Fa!=null&&0<j.Fa.length?j.Kc.c*j.Kc.i:0))!=tt)ue=0;else{if(tt>j.Vb){if(j.Vb=0,j.Ec=u(tt),j.Fc=0,j.Ec==null){ue=Do(j,1,"no memory during frame initialization.");break e}j.Vb=tt}tt=j.Ec,at=j.Fc,j.Ac=tt,j.Bc=at,at+=we,j.Gd=m(Ct,Jo),j.Hd=0,j.rb=m(ai+1,cr),j.sb=1,j.wa=ki?m(ki,Pr):null,j.Y=0,j.D.Nb=0,j.D.wa=j.wa,j.D.Y=j.Y,0<j.Aa&&(j.D.Y+=pt),e(!0),j.oc=tt,j.pc=at,at+=832,j.ya=m(wi,Or),j.aa=0,j.D.ya=j.ya,j.D.aa=j.aa,j.Aa==2&&(j.D.aa+=pt),j.R=16*pt,j.B=8*pt,pt=(Ct=vn[j.L])*j.R,Ct=Ct/2*j.B,j.sa=tt,j.ta=at+pt,j.qa=j.sa,j.ra=j.ta+16*ue*j.R+Ct,j.Ha=j.qa,j.Ia=j.ra+8*ue*j.B+Ct,j.$c=0,at+=je,j.mb=Je?tt:null,j.nb=Je?at:null,e(at+Je<=j.Fc+j.Vb),Nr(j),l(j.Ac,j.Bc,0,we),ue=1}}if(ue){if(K.ka=0,K.y=j.sa,K.O=j.ta,K.f=j.qa,K.N=j.ra,K.ea=j.Ha,K.Vd=j.Ia,K.fa=j.R,K.Rc=j.B,K.F=null,K.J=0,!zc){for(ue=-255;255>=ue;++ue)hh[255+ue]=0>ue?-ue:ue;for(ue=-1020;1020>=ue;++ue)fh[1020+ue]=-128>ue?-128:127<ue?127:ue;for(ue=-112;112>=ue;++ue)zh[112+ue]=-16>ue?-16:15<ue?15:ue;for(ue=-255;510>=ue;++ue)Lr[255+ue]=0>ue?0:255<ue?255:ue;zc=1}Yo=Ea,Uu=Ca,oa=Cs,Yr=Zs,ga=qs,Ma=vs,Pl=ac,Vu=fu,bu=ch,Gs=Bu,Ml=uh,ms=du,Dn=pu,Ro=mu,Gr=Br,Lo=da,rs=Na,_n=Oc,B[0]=Nt,B[1]=cu,B[2]=ot,B[3]=Et,B[4]=zt,B[5]=yi,B[6]=bi,B[7]=_i,B[8]=ji,B[9]=ui,sa[0]=nl,sa[1]=hu,sa[2]=ha,sa[3]=fa,sa[4]=U,sa[5]=$,sa[6]=ge,d[0]=p,d[1]=Sl,d[2]=an,d[3]=Tn,d[4]=c,d[5]=Di,d[6]=F,ue=1}else ue=0}ue&&(ue=function(pi,on){for(pi.M=0;pi.M<pi.Va;++pi.M){var Oi,qt=pi.Jc[pi.M&pi.Xb],Qt=pi.m,Ki=pi;for(Oi=0;Oi<Ki.za;++Oi){var tn=Qt,Ui=Ki,Fn=Ui.Ac,Sn=Ui.Bc+4*Oi,Sr=Ui.zc,Rn=Ui.ya[Ui.aa+Oi];if(Ui.Qa.Bb?Rn.$b=Ye(tn,Ui.Pa.jb[0])?2+Ye(tn,Ui.Pa.jb[2]):Ye(tn,Ui.Pa.jb[1]):Rn.$b=0,Ui.kc&&(Rn.Ad=Ye(tn,Ui.Bd)),Rn.Za=!Ye(tn,145)+0,Rn.Za){var vo=Rn.Ob,Ao=0;for(Ui=0;4>Ui;++Ui){var Zr,Hr=Sr[0+Ui];for(Zr=0;4>Zr;++Zr){Hr=os[Fn[Sn+Zr]][Hr];for(var yo=dh[Ye(tn,Hr[0])];0<yo;)yo=dh[2*yo+Ye(tn,Hr[yo])];Hr=-yo,Fn[Sn+Zr]=Hr}o(vo,Ao,Fn,Sn,4),Ao+=4,Sr[0+Ui]=Hr}}else Hr=Ye(tn,156)?Ye(tn,128)?1:3:Ye(tn,163)?2:0,Rn.Ob[0]=Hr,l(Fn,Sn,Hr,4),l(Sr,0,Hr,4);Rn.Dd=Ye(tn,142)?Ye(tn,114)?Ye(tn,183)?1:3:2:0}if(Ki.m.Ka)return Do(pi,7,"Premature end-of-partition0 encountered.");for(;pi.ja<pi.za;++pi.ja){if(Ki=qt,tn=(Qt=pi).rb[Qt.sb-1],Fn=Qt.rb[Qt.sb+Qt.ja],Oi=Qt.ya[Qt.aa+Qt.ja],Sn=Qt.kc?Oi.Ad:0)tn.la=Fn.la=0,Oi.Za||(tn.Na=Fn.Na=0),Oi.Hc=0,Oi.Gc=0,Oi.ia=0;else{var ko,Wr;if(tn=Fn,Fn=Ki,Sn=Qt.Pa.Xc,Sr=Qt.ya[Qt.aa+Qt.ja],Rn=Qt.pb[Sr.$b],Ui=Sr.ad,vo=0,Ao=Qt.rb[Qt.sb-1],Hr=Zr=0,l(Ui,vo,0,384),Sr.Za)var Ts=0,Rr=Sn[3];else{yo=u(16);var ss=tn.Na+Ao.Na;if(ss=jo(Fn,Sn[1],ss,Rn.Eb,0,yo,0),tn.Na=Ao.Na=(0<ss)+0,1<ss)Yo(yo,0,Ui,vo);else{var zs=yo[0]+3>>3;for(yo=0;256>yo;yo+=16)Ui[vo+yo]=zs}Ts=1,Rr=Sn[0]}var so=15&tn.la,cs=15&Ao.la;for(yo=0;4>yo;++yo){var Ls=1&cs;for(zs=Wr=0;4>zs;++zs)so=so>>1|(Ls=(ss=jo(Fn,Rr,ss=Ls+(1&so),Rn.Sc,Ts,Ui,vo))>Ts)<<7,Wr=Wr<<2|(3<ss?3:1<ss?2:Ui[vo+0]!=0),vo+=16;so>>=4,cs=cs>>1|Ls<<7,Zr=(Zr<<8|Wr)>>>0}for(Rr=so,Ts=cs>>4,ko=0;4>ko;ko+=2){for(Wr=0,so=tn.la>>4+ko,cs=Ao.la>>4+ko,yo=0;2>yo;++yo){for(Ls=1&cs,zs=0;2>zs;++zs)ss=Ls+(1&so),so=so>>1|(Ls=0<(ss=jo(Fn,Sn[2],ss,Rn.Qc,0,Ui,vo)))<<3,Wr=Wr<<2|(3<ss?3:1<ss?2:Ui[vo+0]!=0),vo+=16;so>>=2,cs=cs>>1|Ls<<5}Hr|=Wr<<4*ko,Rr|=so<<4<<ko,Ts|=(240&cs)<<ko}tn.la=Rr,Ao.la=Ts,Sr.Hc=Zr,Sr.Gc=Hr,Sr.ia=43690&Hr?0:Rn.ia,Sn=!(Zr|Hr)}if(0<Qt.L&&(Qt.wa[Qt.Y+Qt.ja]=Qt.gd[Oi.$b][Oi.Za],Qt.wa[Qt.Y+Qt.ja].La|=!Sn),Ki.Ka)return Do(pi,7,"Premature end-of-file encountered.")}if(Nr(pi),Qt=on,Ki=1,Oi=(qt=pi).D,tn=0<qt.L&&qt.M>=qt.zb&&qt.M<=qt.Va,qt.Aa==0)e:{if(Oi.M=qt.M,Oi.uc=tn,Nu(qt,Oi),Ki=1,Oi=(Wr=qt.D).Nb,tn=(Hr=vn[qt.L])*qt.R,Fn=Hr/2*qt.B,yo=16*Oi*qt.R,zs=8*Oi*qt.B,Sn=qt.sa,Sr=qt.ta-tn+yo,Rn=qt.qa,Ui=qt.ra-Fn+zs,vo=qt.Ha,Ao=qt.Ia-Fn+zs,cs=(so=Wr.M)==0,Zr=so>=qt.Va-1,qt.Aa==2&&Nu(qt,Wr),Wr.uc)for(Ls=(ss=qt).D.M,e(ss.D.uc),Wr=ss.yb;Wr<ss.Hb;++Wr){Ts=Wr,Rr=Ls;var Ns=(zo=(as=ss).D).Nb;ko=as.R;var zo=zo.wa[zo.Y+Ts],_a=as.sa,qa=as.ta+16*Ns*ko+16*Ts,Mo=zo.dd,xs=zo.tc;if(xs!=0)if(e(3<=xs),as.L==1)0<Ts&&Lo(_a,qa,ko,xs+4),zo.La&&_n(_a,qa,ko,xs),0<Rr&&Gr(_a,qa,ko,xs+4),zo.La&&rs(_a,qa,ko,xs);else{var $l=as.B,Ha=as.qa,cl=as.ra+8*Ns*$l+8*Ts,hl=as.Ha,as=as.Ia+8*Ns*$l+8*Ts;Ns=zo.ld,0<Ts&&(Vu(_a,qa,ko,xs+4,Mo,Ns),Gs(Ha,cl,hl,as,$l,xs+4,Mo,Ns)),zo.La&&(ms(_a,qa,ko,xs,Mo,Ns),Ro(Ha,cl,hl,as,$l,xs,Mo,Ns)),0<Rr&&(Pl(_a,qa,ko,xs+4,Mo,Ns),bu(Ha,cl,hl,as,$l,xs+4,Mo,Ns)),zo.La&&(Ml(_a,qa,ko,xs,Mo,Ns),Dn(Ha,cl,hl,as,$l,xs,Mo,Ns))}}if(qt.ia&&alert("todo:DitherRow"),Qt.put!=null){if(Wr=16*so,so=16*(so+1),cs?(Qt.y=qt.sa,Qt.O=qt.ta+yo,Qt.f=qt.qa,Qt.N=qt.ra+zs,Qt.ea=qt.Ha,Qt.W=qt.Ia+zs):(Wr-=Hr,Qt.y=Sn,Qt.O=Sr,Qt.f=Rn,Qt.N=Ui,Qt.ea=vo,Qt.W=Ao),Zr||(so-=Hr),so>Qt.o&&(so=Qt.o),Qt.F=null,Qt.J=null,qt.Fa!=null&&0<qt.Fa.length&&Wr<so&&(Qt.J=xo(qt,Qt,Wr,so-Wr),Qt.F=qt.mb,Qt.F==null&&Qt.F.length==0)){Ki=Do(qt,3,"Could not decode alpha data.");break e}Wr<Qt.j&&(Hr=Qt.j-Wr,Wr=Qt.j,e(!(1&Hr)),Qt.O+=qt.R*Hr,Qt.N+=qt.B*(Hr>>1),Qt.W+=qt.B*(Hr>>1),Qt.F!=null&&(Qt.J+=Qt.width*Hr)),Wr<so&&(Qt.O+=Qt.v,Qt.N+=Qt.v>>1,Qt.W+=Qt.v>>1,Qt.F!=null&&(Qt.J+=Qt.v),Qt.ka=Wr-Qt.j,Qt.U=Qt.va-Qt.v,Qt.T=so-Wr,Ki=Qt.put(Qt))}Oi+1!=qt.Ic||Zr||(o(qt.sa,qt.ta-tn,Sn,Sr+16*qt.R,tn),o(qt.qa,qt.ra-Fn,Rn,Ui+8*qt.B,Fn),o(qt.Ha,qt.Ia-Fn,vo,Ao+8*qt.B,Fn))}if(!Ki)return Do(pi,6,"Output aborted.")}return 1}(j,K)),K.bc!=null&&K.bc(K),ue&=1}return ue?(j.cb=0,ue):0}function Oo(j,K,ue,we,je){je=j[K+ue+32*we]+(je>>3),j[K+ue+32*we]=-256&je?0>je?0:255:je}function Sa(j,K,ue,we,je,Je){Oo(j,K,0,ue,we+je),Oo(j,K,1,ue,we+Je),Oo(j,K,2,ue,we-Je),Oo(j,K,3,ue,we-je)}function ns(j){return(20091*j>>16)+j}function Vs(j,K,ue,we){var je,Je=0,tt=u(16);for(je=0;4>je;++je){var at=j[K+0]+j[K+8],pt=j[K+0]-j[K+8],Ct=(35468*j[K+4]>>16)-ns(j[K+12]),ai=ns(j[K+4])+(35468*j[K+12]>>16);tt[Je+0]=at+ai,tt[Je+1]=pt+Ct,tt[Je+2]=pt-Ct,tt[Je+3]=at-ai,Je+=4,K++}for(je=Je=0;4>je;++je)at=(j=tt[Je+0]+4)+tt[Je+8],pt=j-tt[Je+8],Ct=(35468*tt[Je+4]>>16)-ns(tt[Je+12]),Oo(ue,we,0,0,at+(ai=ns(tt[Je+4])+(35468*tt[Je+12]>>16))),Oo(ue,we,1,0,pt+Ct),Oo(ue,we,2,0,pt-Ct),Oo(ue,we,3,0,at-ai),Je++,we+=32}function vs(j,K,ue,we){var je=j[K+0]+4,Je=35468*j[K+4]>>16,tt=ns(j[K+4]),at=35468*j[K+1]>>16;Sa(ue,we,0,je+tt,j=ns(j[K+1]),at),Sa(ue,we,1,je+Je,j,at),Sa(ue,we,2,je-Je,j,at),Sa(ue,we,3,je-tt,j,at)}function Ca(j,K,ue,we,je){Vs(j,K,ue,we),je&&Vs(j,K+16,ue,we+4)}function Cs(j,K,ue,we){Uu(j,K+0,ue,we,1),Uu(j,K+32,ue,we+128,1)}function Zs(j,K,ue,we){var je;for(j=j[K+0]+4,je=0;4>je;++je)for(K=0;4>K;++K)Oo(ue,we,K,je,j)}function qs(j,K,ue,we){j[K+0]&&Yr(j,K+0,ue,we),j[K+16]&&Yr(j,K+16,ue,we+4),j[K+32]&&Yr(j,K+32,ue,we+128),j[K+48]&&Yr(j,K+48,ue,we+128+4)}function Ea(j,K,ue,we){var je,Je=u(16);for(je=0;4>je;++je){var tt=j[K+0+je]+j[K+12+je],at=j[K+4+je]+j[K+8+je],pt=j[K+4+je]-j[K+8+je],Ct=j[K+0+je]-j[K+12+je];Je[0+je]=tt+at,Je[8+je]=tt-at,Je[4+je]=Ct+pt,Je[12+je]=Ct-pt}for(je=0;4>je;++je)tt=(j=Je[0+4*je]+3)+Je[3+4*je],at=Je[1+4*je]+Je[2+4*je],pt=Je[1+4*je]-Je[2+4*je],Ct=j-Je[3+4*je],ue[we+0]=tt+at>>3,ue[we+16]=Ct+pt>>3,ue[we+32]=tt-at>>3,ue[we+48]=Ct-pt>>3,we+=64}function kl(j,K,ue){var we,je=K-32,Je=Ks,tt=255-j[je-1];for(we=0;we<ue;++we){var at,pt=Je,Ct=tt+j[K-1];for(at=0;at<ue;++at)j[K+at]=pt[Ct+j[je+at]];K+=32}}function cu(j,K){kl(j,K,4)}function Sl(j,K){kl(j,K,8)}function hu(j,K){kl(j,K,16)}function ha(j,K){var ue;for(ue=0;16>ue;++ue)o(j,K+32*ue,j,K-32,16)}function fa(j,K){var ue;for(ue=16;0<ue;--ue)l(j,K,j[K-1],16),K+=32}function Co(j,K,ue){var we;for(we=0;16>we;++we)l(K,ue+32*we,j,16)}function nl(j,K){var ue,we=16;for(ue=0;16>ue;++ue)we+=j[K-1+32*ue]+j[K+ue-32];Co(we>>5,j,K)}function U(j,K){var ue,we=8;for(ue=0;16>ue;++ue)we+=j[K-1+32*ue];Co(we>>4,j,K)}function $(j,K){var ue,we=8;for(ue=0;16>ue;++ue)we+=j[K+ue-32];Co(we>>4,j,K)}function ge(j,K){Co(128,j,K)}function De(j,K,ue){return j+2*K+ue+2>>2}function ot(j,K){var ue,we=K-32;for(we=new Uint8Array([De(j[we-1],j[we+0],j[we+1]),De(j[we+0],j[we+1],j[we+2]),De(j[we+1],j[we+2],j[we+3]),De(j[we+2],j[we+3],j[we+4])]),ue=0;4>ue;++ue)o(j,K+32*ue,we,0,we.length)}function Et(j,K){var ue=j[K-1],we=j[K-1+32],je=j[K-1+64],Je=j[K-1+96];Ke(j,K+0,16843009*De(j[K-1-32],ue,we)),Ke(j,K+32,16843009*De(ue,we,je)),Ke(j,K+64,16843009*De(we,je,Je)),Ke(j,K+96,16843009*De(je,Je,Je))}function Nt(j,K){var ue,we=4;for(ue=0;4>ue;++ue)we+=j[K+ue-32]+j[K-1+32*ue];for(we>>=3,ue=0;4>ue;++ue)l(j,K+32*ue,we,4)}function zt(j,K){var ue=j[K-1+0],we=j[K-1+32],je=j[K-1+64],Je=j[K-1-32],tt=j[K+0-32],at=j[K+1-32],pt=j[K+2-32],Ct=j[K+3-32];j[K+0+96]=De(we,je,j[K-1+96]),j[K+1+96]=j[K+0+64]=De(ue,we,je),j[K+2+96]=j[K+1+64]=j[K+0+32]=De(Je,ue,we),j[K+3+96]=j[K+2+64]=j[K+1+32]=j[K+0+0]=De(tt,Je,ue),j[K+3+64]=j[K+2+32]=j[K+1+0]=De(at,tt,Je),j[K+3+32]=j[K+2+0]=De(pt,at,tt),j[K+3+0]=De(Ct,pt,at)}function bi(j,K){var ue=j[K+1-32],we=j[K+2-32],je=j[K+3-32],Je=j[K+4-32],tt=j[K+5-32],at=j[K+6-32],pt=j[K+7-32];j[K+0+0]=De(j[K+0-32],ue,we),j[K+1+0]=j[K+0+32]=De(ue,we,je),j[K+2+0]=j[K+1+32]=j[K+0+64]=De(we,je,Je),j[K+3+0]=j[K+2+32]=j[K+1+64]=j[K+0+96]=De(je,Je,tt),j[K+3+32]=j[K+2+64]=j[K+1+96]=De(Je,tt,at),j[K+3+64]=j[K+2+96]=De(tt,at,pt),j[K+3+96]=De(at,pt,pt)}function yi(j,K){var ue=j[K-1+0],we=j[K-1+32],je=j[K-1+64],Je=j[K-1-32],tt=j[K+0-32],at=j[K+1-32],pt=j[K+2-32],Ct=j[K+3-32];j[K+0+0]=j[K+1+64]=Je+tt+1>>1,j[K+1+0]=j[K+2+64]=tt+at+1>>1,j[K+2+0]=j[K+3+64]=at+pt+1>>1,j[K+3+0]=pt+Ct+1>>1,j[K+0+96]=De(je,we,ue),j[K+0+64]=De(we,ue,Je),j[K+0+32]=j[K+1+96]=De(ue,Je,tt),j[K+1+32]=j[K+2+96]=De(Je,tt,at),j[K+2+32]=j[K+3+96]=De(tt,at,pt),j[K+3+32]=De(at,pt,Ct)}function _i(j,K){var ue=j[K+0-32],we=j[K+1-32],je=j[K+2-32],Je=j[K+3-32],tt=j[K+4-32],at=j[K+5-32],pt=j[K+6-32],Ct=j[K+7-32];j[K+0+0]=ue+we+1>>1,j[K+1+0]=j[K+0+64]=we+je+1>>1,j[K+2+0]=j[K+1+64]=je+Je+1>>1,j[K+3+0]=j[K+2+64]=Je+tt+1>>1,j[K+0+32]=De(ue,we,je),j[K+1+32]=j[K+0+96]=De(we,je,Je),j[K+2+32]=j[K+1+96]=De(je,Je,tt),j[K+3+32]=j[K+2+96]=De(Je,tt,at),j[K+3+64]=De(tt,at,pt),j[K+3+96]=De(at,pt,Ct)}function ui(j,K){var ue=j[K-1+0],we=j[K-1+32],je=j[K-1+64],Je=j[K-1+96];j[K+0+0]=ue+we+1>>1,j[K+2+0]=j[K+0+32]=we+je+1>>1,j[K+2+32]=j[K+0+64]=je+Je+1>>1,j[K+1+0]=De(ue,we,je),j[K+3+0]=j[K+1+32]=De(we,je,Je),j[K+3+32]=j[K+1+64]=De(je,Je,Je),j[K+3+64]=j[K+2+64]=j[K+0+96]=j[K+1+96]=j[K+2+96]=j[K+3+96]=Je}function ji(j,K){var ue=j[K-1+0],we=j[K-1+32],je=j[K-1+64],Je=j[K-1+96],tt=j[K-1-32],at=j[K+0-32],pt=j[K+1-32],Ct=j[K+2-32];j[K+0+0]=j[K+2+32]=ue+tt+1>>1,j[K+0+32]=j[K+2+64]=we+ue+1>>1,j[K+0+64]=j[K+2+96]=je+we+1>>1,j[K+0+96]=Je+je+1>>1,j[K+3+0]=De(at,pt,Ct),j[K+2+0]=De(tt,at,pt),j[K+1+0]=j[K+3+32]=De(ue,tt,at),j[K+1+32]=j[K+3+64]=De(we,ue,tt),j[K+1+64]=j[K+3+96]=De(je,we,ue),j[K+1+96]=De(Je,je,we)}function an(j,K){var ue;for(ue=0;8>ue;++ue)o(j,K+32*ue,j,K-32,8)}function Tn(j,K){var ue;for(ue=0;8>ue;++ue)l(j,K,j[K-1],8),K+=32}function ft(j,K,ue){var we;for(we=0;8>we;++we)l(K,ue+32*we,j,8)}function p(j,K){var ue,we=8;for(ue=0;8>ue;++ue)we+=j[K+ue-32]+j[K-1+32*ue];ft(we>>4,j,K)}function Di(j,K){var ue,we=4;for(ue=0;8>ue;++ue)we+=j[K+ue-32];ft(we>>3,j,K)}function c(j,K){var ue,we=4;for(ue=0;8>ue;++ue)we+=j[K-1+32*ue];ft(we>>3,j,K)}function F(j,K){ft(128,j,K)}function pn(j,K,ue){var we=j[K-ue],je=j[K+0],Je=3*(je-we)+lc[1020+j[K-2*ue]-j[K+ue]],tt=Zo[112+(Je+4>>3)];j[K-ue]=Ks[255+we+Zo[112+(Je+3>>3)]],j[K+0]=Ks[255+je-tt]}function Qn(j,K,ue,we){var je=j[K+0],Je=j[K+ue];return Go[255+j[K-2*ue]-j[K-ue]]>we||Go[255+Je-je]>we}function wo(j,K,ue,we){return 4*Go[255+j[K-ue]-j[K+0]]+Go[255+j[K-2*ue]-j[K+ue]]<=we}function re(j,K,ue,we,je){var Je=j[K-3*ue],tt=j[K-2*ue],at=j[K-ue],pt=j[K+0],Ct=j[K+ue],ai=j[K+2*ue],ki=j[K+3*ue];return 4*Go[255+at-pt]+Go[255+tt-Ct]>we?0:Go[255+j[K-4*ue]-Je]<=je&&Go[255+Je-tt]<=je&&Go[255+tt-at]<=je&&Go[255+ki-ai]<=je&&Go[255+ai-Ct]<=je&&Go[255+Ct-pt]<=je}function Br(j,K,ue,we){var je=2*we+1;for(we=0;16>we;++we)wo(j,K+we,ue,je)&&pn(j,K+we,ue)}function da(j,K,ue,we){var je=2*we+1;for(we=0;16>we;++we)wo(j,K+we*ue,1,je)&&pn(j,K+we*ue,1)}function Na(j,K,ue,we){var je;for(je=3;0<je;--je)Br(j,K+=4*ue,ue,we)}function Oc(j,K,ue,we){var je;for(je=3;0<je;--je)da(j,K+=4,ue,we)}function Cl(j,K,ue,we,je,Je,tt,at){for(Je=2*Je+1;0<je--;){if(re(j,K,ue,Je,tt))if(Qn(j,K,ue,at))pn(j,K,ue);else{var pt=j,Ct=K,ai=ue,ki=pt[Ct-2*ai],wi=pt[Ct-ai],pi=pt[Ct+0],on=pt[Ct+ai],Oi=pt[Ct+2*ai],qt=27*(Ki=lc[1020+3*(pi-wi)+lc[1020+ki-on]])+63>>7,Qt=18*Ki+63>>7,Ki=9*Ki+63>>7;pt[Ct-3*ai]=Ks[255+pt[Ct-3*ai]+Ki],pt[Ct-2*ai]=Ks[255+ki+Qt],pt[Ct-ai]=Ks[255+wi+qt],pt[Ct+0]=Ks[255+pi-qt],pt[Ct+ai]=Ks[255+on-Qt],pt[Ct+2*ai]=Ks[255+Oi-Ki]}K+=we}}function Hs(j,K,ue,we,je,Je,tt,at){for(Je=2*Je+1;0<je--;){if(re(j,K,ue,Je,tt))if(Qn(j,K,ue,at))pn(j,K,ue);else{var pt=j,Ct=K,ai=ue,ki=pt[Ct-ai],wi=pt[Ct+0],pi=pt[Ct+ai],on=Zo[112+((Oi=3*(wi-ki))+4>>3)],Oi=Zo[112+(Oi+3>>3)],qt=on+1>>1;pt[Ct-2*ai]=Ks[255+pt[Ct-2*ai]+qt],pt[Ct-ai]=Ks[255+ki+Oi],pt[Ct+0]=Ks[255+wi-on],pt[Ct+ai]=Ks[255+pi-qt]}K+=we}}function ac(j,K,ue,we,je,Je){Cl(j,K,ue,1,16,we,je,Je)}function fu(j,K,ue,we,je,Je){Cl(j,K,1,ue,16,we,je,Je)}function uh(j,K,ue,we,je,Je){var tt;for(tt=3;0<tt;--tt)Hs(j,K+=4*ue,ue,1,16,we,je,Je)}function du(j,K,ue,we,je,Je){var tt;for(tt=3;0<tt;--tt)Hs(j,K+=4,1,ue,16,we,je,Je)}function ch(j,K,ue,we,je,Je,tt,at){Cl(j,K,je,1,8,Je,tt,at),Cl(ue,we,je,1,8,Je,tt,at)}function Bu(j,K,ue,we,je,Je,tt,at){Cl(j,K,1,je,8,Je,tt,at),Cl(ue,we,1,je,8,Je,tt,at)}function pu(j,K,ue,we,je,Je,tt,at){Hs(j,K+4*je,je,1,8,Je,tt,at),Hs(ue,we+4*je,je,1,8,Je,tt,at)}function mu(j,K,ue,we,je,Je,tt,at){Hs(j,K+4,1,je,8,Je,tt,at),Hs(ue,we+4,1,je,8,Je,tt,at)}function Gl(){this.ba=new Kr,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new cn,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function gu(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function Un(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function Bn(){this.ua=0,this.Wa=new $e,this.vb=new $e,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new ve,this.yc=new Te}function zu(){this.xb=this.a=0,this.l=new Qo,this.ca=new Kr,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new le,this.Pb=0,this.wd=new le,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new Bn,this.ab=0,this.gc=m(4,Un),this.Oc=0}function ja(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new Qo,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function pa(j,K,ue,we,je,Je,tt){for(j=j==null?0:j[K+0],K=0;K<tt;++K)je[Je+K]=j+ue[we+K]&255,j=je[Je+K]}function Wl(j,K,ue,we,je,Je,tt){var at;if(j==null)pa(null,null,ue,we,je,Je,tt);else for(at=0;at<tt;++at)je[Je+at]=j[K+at]+ue[we+at]&255}function ma(j,K,ue,we,je,Je,tt){if(j==null)pa(null,null,ue,we,je,Je,tt);else{var at,pt=j[K+0],Ct=pt,ai=pt;for(at=0;at<tt;++at)Ct=ai+(pt=j[K+at])-Ct,ai=ue[we+at]+(-256&Ct?0>Ct?0:255:Ct)&255,Ct=pt,je[Je+at]=ai}}function xo(j,K,ue,we){var je=K.width,Je=K.o;if(e(j!=null&&K!=null),0>ue||0>=we||ue+we>Je)return null;if(!j.Cc){if(j.ga==null){var tt;if(j.ga=new ja,(tt=j.ga==null)||(tt=K.width*K.o,e(j.Gb.length==0),j.Gb=u(tt),j.Uc=0,j.Gb==null?tt=0:(j.mb=j.Gb,j.nb=j.Uc,j.rc=null,tt=1),tt=!tt),!tt){tt=j.ga;var at=j.Fa,pt=j.P,Ct=j.qc,ai=j.mb,ki=j.nb,wi=pt+1,pi=Ct-1,on=tt.l;if(e(at!=null&&ai!=null&&K!=null),z[0]=null,z[1]=pa,z[2]=Wl,z[3]=ma,tt.ca=ai,tt.tb=ki,tt.c=K.width,tt.i=K.height,e(0<tt.c&&0<tt.i),1>=Ct)K=0;else if(tt.$a=at[pt+0]>>0&3,tt.Z=at[pt+0]>>2&3,tt.Lc=at[pt+0]>>4&3,pt=at[pt+0]>>6&3,0>tt.$a||1<tt.$a||4<=tt.Z||1<tt.Lc||pt)K=0;else if(on.put=lr,on.ac=Ln,on.bc=oo,on.ma=tt,on.width=K.width,on.height=K.height,on.Da=K.Da,on.v=K.v,on.va=K.va,on.j=K.j,on.o=K.o,tt.$a)e:{e(tt.$a==1),K=Bt();t:for(;;){if(K==null){K=0;break e}if(e(tt!=null),tt.mc=K,K.c=tt.c,K.i=tt.i,K.l=tt.l,K.l.ma=tt,K.l.width=tt.c,K.l.height=tt.i,K.a=0,We(K.m,at,wi,pi),!ei(tt.c,tt.i,1,K,null)||(K.ab==1&&K.gc[0].hc==3&&ct(K.s)?(tt.ic=1,at=K.c*K.i,K.Ta=null,K.Ua=0,K.V=u(at),K.Ba=0,K.V==null?(K.a=1,K=0):K=1):(tt.ic=0,K=_t(K,tt.c)),!K))break t;K=1;break e}tt.mc=null,K=0}else K=pi>=tt.c*tt.i;tt=!K}if(tt)return null;j.ga.Lc!=1?j.Ga=0:we=Je-ue}e(j.ga!=null),e(ue+we<=Je);e:{if(K=(at=j.ga).c,Je=at.l.o,at.$a==0){if(wi=j.rc,pi=j.Vc,on=j.Fa,pt=j.P+1+ue*K,Ct=j.mb,ai=j.nb+ue*K,e(pt<=j.P+j.qc),at.Z!=0)for(e(z[at.Z]!=null),tt=0;tt<we;++tt)z[at.Z](wi,pi,on,pt,Ct,ai,K),wi=Ct,pi=ai,ai+=K,pt+=K;else for(tt=0;tt<we;++tt)o(Ct,ai,on,pt,K),wi=Ct,pi=ai,ai+=K,pt+=K;j.rc=wi,j.Vc=pi}else{if(e(at.mc!=null),K=ue+we,e((tt=at.mc)!=null),e(K<=tt.i),tt.C>=K)K=1;else if(at.ic||hi(),at.ic){at=tt.V,wi=tt.Ba,pi=tt.c;var Oi=tt.i,qt=(on=1,pt=tt.$/pi,Ct=tt.$%pi,ai=tt.m,ki=tt.s,tt.$),Qt=pi*Oi,Ki=pi*K,tn=ki.wc,Ui=qt<Ki?Pe(ki,Ct,pt):null;e(qt<=Qt),e(K<=Oi),e(ct(ki));t:for(;;){for(;!ai.h&&qt<Ki;){if(Ct&tn||(Ui=Pe(ki,Ct,pt)),e(Ui!=null),Fe(ai),256>(Oi=bo(Ui.G[0],Ui.H[0],ai)))at[wi+qt]=Oi,++qt,++Ct>=pi&&(Ct=0,++pt<=K&&!(pt%16)&&Rt(tt,pt));else{if(!(280>Oi)){on=0;break t}Oi=qe(Oi-256,ai);var Fn,Sn=bo(Ui.G[4],Ui.H[4],ai);if(Fe(ai),!(qt>=(Sn=To(pi,Sn=qe(Sn,ai)))&&Qt-qt>=Oi)){on=0;break t}for(Fn=0;Fn<Oi;++Fn)at[wi+qt+Fn]=at[wi+qt+Fn-Sn];for(qt+=Oi,Ct+=Oi;Ct>=pi;)Ct-=pi,++pt<=K&&!(pt%16)&&Rt(tt,pt);qt<Ki&&Ct&tn&&(Ui=Pe(ki,Ct,pt))}e(ai.h==he(ai))}Rt(tt,pt>K?K:pt);break t}!on||ai.h&&qt<Qt?(on=0,tt.a=ai.h?5:3):tt.$=qt,K=on}else K=Ge(tt,tt.V,tt.Ba,tt.c,tt.i,K,Ri);if(!K){we=0;break e}}ue+we>=Je&&(j.Cc=1),we=1}if(!we)return null;if(j.Cc&&((we=j.ga)!=null&&(we.mc=null),j.ga=null,0<j.Ga))return alert("todo:WebPDequantizeLevels"),null}return j.nb+ue*je}function se(j,K,ue,we,je,Je){for(;0<je--;){var tt,at=j,pt=K+(ue?1:0),Ct=j,ai=K+(ue?0:3);for(tt=0;tt<we;++tt){var ki=Ct[ai+4*tt];ki!=255&&(ki*=32897,at[pt+4*tt+0]=at[pt+4*tt+0]*ki>>23,at[pt+4*tt+1]=at[pt+4*tt+1]*ki>>23,at[pt+4*tt+2]=at[pt+4*tt+2]*ki>>23)}K+=Je}}function Ue(j,K,ue,we,je){for(;0<we--;){var Je;for(Je=0;Je<ue;++Je){var tt=j[K+2*Je+0],at=15&(Ct=j[K+2*Je+1]),pt=4369*at,Ct=(240&Ct|Ct>>4)*pt>>16;j[K+2*Je+0]=(240&tt|tt>>4)*pt>>16&240|(15&tt|tt<<4)*pt>>16>>4&15,j[K+2*Je+1]=240&Ct|at}K+=je}}function kt(j,K,ue,we,je,Je,tt,at){var pt,Ct,ai=255;for(Ct=0;Ct<je;++Ct){for(pt=0;pt<we;++pt){var ki=j[K+pt];Je[tt+4*pt]=ki,ai&=ki}K+=ue,tt+=at}return ai!=255}function Xt(j,K,ue,we,je){var Je;for(Je=0;Je<je;++Je)ue[we+Je]=j[K+Je]>>8}function hi(){Da=se,qu=Ue,Hu=kt,Bc=Xt}function Zi(j,K,ue){ie[j]=function(we,je,Je,tt,at,pt,Ct,ai,ki,wi,pi,on,Oi,qt,Qt,Ki,tn){var Ui,Fn=tn-1>>1,Sn=at[pt+0]|Ct[ai+0]<<16,Sr=ki[wi+0]|pi[on+0]<<16;e(we!=null);var Rn=3*Sn+Sr+131074>>2;for(K(we[je+0],255&Rn,Rn>>16,Oi,qt),Je!=null&&(Rn=3*Sr+Sn+131074>>2,K(Je[tt+0],255&Rn,Rn>>16,Qt,Ki)),Ui=1;Ui<=Fn;++Ui){var vo=at[pt+Ui]|Ct[ai+Ui]<<16,Ao=ki[wi+Ui]|pi[on+Ui]<<16,Zr=Sn+vo+Sr+Ao+524296,Hr=Zr+2*(vo+Sr)>>3;Rn=Hr+Sn>>1,Sn=(Zr=Zr+2*(Sn+Ao)>>3)+vo>>1,K(we[je+2*Ui-1],255&Rn,Rn>>16,Oi,qt+(2*Ui-1)*ue),K(we[je+2*Ui-0],255&Sn,Sn>>16,Oi,qt+(2*Ui-0)*ue),Je!=null&&(Rn=Zr+Sr>>1,Sn=Hr+Ao>>1,K(Je[tt+2*Ui-1],255&Rn,Rn>>16,Qt,Ki+(2*Ui-1)*ue),K(Je[tt+2*Ui+0],255&Sn,Sn>>16,Qt,Ki+(2*Ui+0)*ue)),Sn=vo,Sr=Ao}1&tn||(Rn=3*Sn+Sr+131074>>2,K(we[je+tn-1],255&Rn,Rn>>16,Oi,qt+(tn-1)*ue),Je!=null&&(Rn=3*Sr+Sn+131074>>2,K(Je[tt+tn-1],255&Rn,Rn>>16,Qt,Ki+(tn-1)*ue)))}}function hn(){W[Va]=ne,W[uc]=ye,W[wu]=pe,W[xu]=Se,W[Kl]=ze,W[eo]=Qe,W[ya]=st,W[Bo]=ye,W[Au]=Se,W[ku]=ze,W[Nc]=Qe}function Jn(j){return j&~Ai?0>j?0:255:j>>fi}function kr(j,K){return Jn((19077*j>>8)+(26149*K>>8)-14234)}function jr(j,K,ue){return Jn((19077*j>>8)-(6419*K>>8)-(13320*ue>>8)+8708)}function Xr(j,K){return Jn((19077*j>>8)+(33050*K>>8)-17685)}function $r(j,K,ue,we,je){we[je+0]=kr(j,ue),we[je+1]=jr(j,K,ue),we[je+2]=Xr(j,K)}function Fo(j,K,ue,we,je){we[je+0]=Xr(j,K),we[je+1]=jr(j,K,ue),we[je+2]=kr(j,ue)}function No(j,K,ue,we,je){var Je=jr(j,K,ue);K=Je<<3&224|Xr(j,K)>>3,we[je+0]=248&kr(j,ue)|Je>>5,we[je+1]=K}function Ho(j,K,ue,we,je){var Je=240&Xr(j,K)|15;we[je+0]=240&kr(j,ue)|jr(j,K,ue)>>4,we[je+1]=Je}function Es(j,K,ue,we,je){we[je+0]=255,$r(j,K,ue,we,je+1)}function ps(j,K,ue,we,je){Fo(j,K,ue,we,je),we[je+3]=255}function Ur(j,K,ue,we,je){$r(j,K,ue,we,je),we[je+3]=255}function Is(j,K){return 0>j?0:j>K?K:j}function bs(j,K,ue){ie[j]=function(we,je,Je,tt,at,pt,Ct,ai,ki){for(var wi=ai+(-2&ki)*ue;ai!=wi;)K(we[je+0],Je[tt+0],at[pt+0],Ct,ai),K(we[je+1],Je[tt+0],at[pt+0],Ct,ai+ue),je+=2,++tt,++pt,ai+=2*ue;1&ki&&K(we[je+0],Je[tt+0],at[pt+0],Ct,ai)}}function Xl(j,K,ue){return ue==0?j==0?K==0?6:5:K==0?4:0:ue}function El(j,K,ue,we,je){switch(j>>>30){case 3:Uu(K,ue,we,je,0);break;case 2:Ma(K,ue,we,je);break;case 1:Yr(K,ue,we,je)}}function Nu(j,K){var ue,we,je=K.M,Je=K.Nb,tt=j.oc,at=j.pc+40,pt=j.oc,Ct=j.pc+584,ai=j.oc,ki=j.pc+600;for(ue=0;16>ue;++ue)tt[at+32*ue-1]=129;for(ue=0;8>ue;++ue)pt[Ct+32*ue-1]=129,ai[ki+32*ue-1]=129;for(0<je?tt[at-1-32]=pt[Ct-1-32]=ai[ki-1-32]=129:(l(tt,at-32-1,127,21),l(pt,Ct-32-1,127,9),l(ai,ki-32-1,127,9)),we=0;we<j.za;++we){var wi=K.ya[K.aa+we];if(0<we){for(ue=-1;16>ue;++ue)o(tt,at+32*ue-4,tt,at+32*ue+12,4);for(ue=-1;8>ue;++ue)o(pt,Ct+32*ue-4,pt,Ct+32*ue+4,4),o(ai,ki+32*ue-4,ai,ki+32*ue+4,4)}var pi=j.Gd,on=j.Hd+we,Oi=wi.ad,qt=wi.Hc;if(0<je&&(o(tt,at-32,pi[on].y,0,16),o(pt,Ct-32,pi[on].f,0,8),o(ai,ki-32,pi[on].ea,0,8)),wi.Za){var Qt=tt,Ki=at-32+16;for(0<je&&(we>=j.za-1?l(Qt,Ki,pi[on].y[15],4):o(Qt,Ki,pi[on+1].y,0,4)),ue=0;4>ue;ue++)Qt[Ki+128+ue]=Qt[Ki+256+ue]=Qt[Ki+384+ue]=Qt[Ki+0+ue];for(ue=0;16>ue;++ue,qt<<=2)Qt=tt,Ki=at+zn[ue],B[wi.Ob[ue]](Qt,Ki),El(qt,Oi,16*+ue,Qt,Ki)}else if(Qt=Xl(we,je,wi.Ob[0]),sa[Qt](tt,at),qt!=0)for(ue=0;16>ue;++ue,qt<<=2)El(qt,Oi,16*+ue,tt,at+zn[ue]);for(ue=wi.Gc,Qt=Xl(we,je,wi.Dd),d[Qt](pt,Ct),d[Qt](ai,ki),qt=Oi,Qt=pt,Ki=Ct,255&(wi=ue>>0)&&(170&wi?oa(qt,256,Qt,Ki):ga(qt,256,Qt,Ki)),wi=ai,qt=ki,255&(ue>>=8)&&(170&ue?oa(Oi,320,wi,qt):ga(Oi,320,wi,qt)),je<j.Ub-1&&(o(pi[on].y,0,tt,at+480,16),o(pi[on].f,0,pt,Ct+224,8),o(pi[on].ea,0,ai,ki+224,8)),ue=8*Je*j.B,pi=j.sa,on=j.ta+16*we+16*Je*j.R,Oi=j.qa,wi=j.ra+8*we+ue,qt=j.Ha,Qt=j.Ia+8*we+ue,ue=0;16>ue;++ue)o(pi,on+ue*j.R,tt,at+32*ue,16);for(ue=0;8>ue;++ue)o(Oi,wi+ue*j.B,pt,Ct+32*ue,8),o(qt,Qt+ue*j.B,ai,ki+32*ue,8)}}function Ia(j,K,ue,we,je,Je,tt,at,pt){var Ct=[0],ai=[0],ki=0,wi=pt!=null?pt.kd:0,pi=pt!=null?pt:new gu;if(j==null||12>ue)return 7;pi.data=j,pi.w=K,pi.ha=ue,K=[K],ue=[ue],pi.gb=[pi.gb];e:{var on=K,Oi=ue,qt=pi.gb;if(e(j!=null),e(Oi!=null),e(qt!=null),qt[0]=0,12<=Oi[0]&&!t(j,on[0],"RIFF")){if(t(j,on[0]+8,"WEBP")){qt=3;break e}var Qt=dt(j,on[0]+4);if(12>Qt||4294967286<Qt){qt=3;break e}if(wi&&Qt>Oi[0]-8){qt=7;break e}qt[0]=Qt,on[0]+=12,Oi[0]-=12}qt=0}if(qt!=0)return qt;for(Qt=0<pi.gb[0],ue=ue[0];;){e:{var Ki=j;Oi=K,qt=ue;var tn=Ct,Ui=ai,Fn=on=[0];if((Rn=ki=[ki])[0]=0,8>qt[0])qt=7;else{if(!t(Ki,Oi[0],"VP8X")){if(dt(Ki,Oi[0]+4)!=10){qt=3;break e}if(18>qt[0]){qt=7;break e}var Sn=dt(Ki,Oi[0]+8),Sr=1+$t(Ki,Oi[0]+12);if(2147483648<=Sr*(Ki=1+$t(Ki,Oi[0]+15))){qt=3;break e}Fn!=null&&(Fn[0]=Sn),tn!=null&&(tn[0]=Sr),Ui!=null&&(Ui[0]=Ki),Oi[0]+=18,qt[0]-=18,Rn[0]=1}qt=0}}if(ki=ki[0],on=on[0],qt!=0)return qt;if(Oi=!!(2&on),!Qt&&ki)return 3;if(Je!=null&&(Je[0]=!!(16&on)),tt!=null&&(tt[0]=Oi),at!=null&&(at[0]=0),tt=Ct[0],on=ai[0],ki&&Oi&&pt==null){qt=0;break}if(4>ue){qt=7;break}if(Qt&&ki||!Qt&&!ki&&!t(j,K[0],"ALPH")){ue=[ue],pi.na=[pi.na],pi.P=[pi.P],pi.Sa=[pi.Sa];e:{Sn=j,qt=K,Qt=ue;var Rn=pi.gb;tn=pi.na,Ui=pi.P,Fn=pi.Sa,Sr=22,e(Sn!=null),e(Qt!=null),Ki=qt[0];var vo=Qt[0];for(e(tn!=null),e(Fn!=null),tn[0]=null,Ui[0]=null,Fn[0]=0;;){if(qt[0]=Ki,Qt[0]=vo,8>vo){qt=7;break e}var Ao=dt(Sn,Ki+4);if(4294967286<Ao){qt=3;break e}var Zr=8+Ao+1&-2;if(Sr+=Zr,0<Rn&&Sr>Rn){qt=3;break e}if(!t(Sn,Ki,"VP8 ")||!t(Sn,Ki,"VP8L")){qt=0;break e}if(vo[0]<Zr){qt=7;break e}t(Sn,Ki,"ALPH")||(tn[0]=Sn,Ui[0]=Ki+8,Fn[0]=Ao),Ki+=Zr,vo-=Zr}}if(ue=ue[0],pi.na=pi.na[0],pi.P=pi.P[0],pi.Sa=pi.Sa[0],qt!=0)break}ue=[ue],pi.Ja=[pi.Ja],pi.xa=[pi.xa];e:if(Rn=j,qt=K,Qt=ue,tn=pi.gb[0],Ui=pi.Ja,Fn=pi.xa,Sn=qt[0],Ki=!t(Rn,Sn,"VP8 "),Sr=!t(Rn,Sn,"VP8L"),e(Rn!=null),e(Qt!=null),e(Ui!=null),e(Fn!=null),8>Qt[0])qt=7;else{if(Ki||Sr){if(Rn=dt(Rn,Sn+4),12<=tn&&Rn>tn-12){qt=3;break e}if(wi&&Rn>Qt[0]-8){qt=7;break e}Ui[0]=Rn,qt[0]+=8,Qt[0]-=8,Fn[0]=Sr}else Fn[0]=5<=Qt[0]&&Rn[Sn+0]==47&&!(Rn[Sn+4]>>5),Ui[0]=Qt[0];qt=0}if(ue=ue[0],pi.Ja=pi.Ja[0],pi.xa=pi.xa[0],K=K[0],qt!=0)break;if(4294967286<pi.Ja)return 3;if(at==null||Oi||(at[0]=pi.xa?2:1),tt=[tt],on=[on],pi.xa){if(5>ue){qt=7;break}at=tt,wi=on,Oi=Je,j==null||5>ue?j=0:5<=ue&&j[K+0]==47&&!(j[K+4]>>5)?(Qt=[0],Rn=[0],tn=[0],We(Ui=new le,j,K,ue),ln(Ui,Qt,Rn,tn)?(at!=null&&(at[0]=Qt[0]),wi!=null&&(wi[0]=Rn[0]),Oi!=null&&(Oi[0]=tn[0]),j=1):j=0):j=0}else{if(10>ue){qt=7;break}at=on,j==null||10>ue||!Ot(j,K+3,ue-3)?j=0:(wi=j[K+0]|j[K+1]<<8|j[K+2]<<16,Oi=16383&(j[K+7]<<8|j[K+6]),j=16383&(j[K+9]<<8|j[K+8]),1&wi||3<(wi>>1&7)||!(wi>>4&1)||wi>>5>=pi.Ja||!Oi||!j?j=0:(tt&&(tt[0]=Oi),at&&(at[0]=j),j=1))}if(!j||(tt=tt[0],on=on[0],ki&&(Ct[0]!=tt||ai[0]!=on)))return 3;pt!=null&&(pt[0]=pi,pt.offset=K-pt.w,e(4294967286>K-pt.w),e(pt.offset==pt.ha-ue));break}return qt==0||qt==7&&ki&&pt==null?(Je!=null&&(Je[0]|=pi.na!=null&&0<pi.na.length),we!=null&&(we[0]=tt),je!=null&&(je[0]=on),0):qt}function Il(j,K,ue){var we=K.width,je=K.height,Je=0,tt=0,at=we,pt=je;if(K.Da=j!=null&&0<j.Da,K.Da&&(at=j.cd,pt=j.bd,Je=j.v,tt=j.j,11>ue||(Je&=-2,tt&=-2),0>Je||0>tt||0>=at||0>=pt||Je+at>we||tt+pt>je))return 0;if(K.v=Je,K.j=tt,K.va=Je+at,K.o=tt+pt,K.U=at,K.T=pt,K.da=j!=null&&0<j.da,K.da){if(!Yt(at,pt,ue=[j.ib],Je=[j.hb]))return 0;K.ib=ue[0],K.hb=Je[0]}return K.ob=j!=null&&j.ob,K.Kb=j==null||!j.Sd,K.da&&(K.ob=K.ib<3*we/4&&K.hb<3*je/4,K.Kb=0),1}function rl(j){if(j==null)return 2;if(11>j.S){var K=j.f.RGBA;K.fb+=(j.height-1)*K.A,K.A=-K.A}else K=j.f.kb,j=j.height,K.O+=(j-1)*K.fa,K.fa=-K.fa,K.N+=(j-1>>1)*K.Ab,K.Ab=-K.Ab,K.W+=(j-1>>1)*K.Db,K.Db=-K.Db,K.F!=null&&(K.J+=(j-1)*K.lb,K.lb=-K.lb);return 0}function ju(j,K,ue,we){if(we==null||0>=j||0>=K)return 2;if(ue!=null){if(ue.Da){var je=ue.cd,Je=ue.bd,tt=-2&ue.v,at=-2&ue.j;if(0>tt||0>at||0>=je||0>=Je||tt+je>j||at+Je>K)return 2;j=je,K=Je}if(ue.da){if(!Yt(j,K,je=[ue.ib],Je=[ue.hb]))return 2;j=je[0],K=Je[0]}}we.width=j,we.height=K;e:{var pt=we.width,Ct=we.height;if(j=we.S,0>=pt||0>=Ct||!(j>=Va&&13>j))j=2;else{if(0>=we.Rd&&we.sd==null){tt=Je=je=K=0;var ai=(at=pt*Fr[j])*Ct;if(11>j||(Je=(Ct+1)/2*(K=(pt+1)/2),j==12&&(tt=(je=pt)*Ct)),(Ct=u(ai+2*Je+tt))==null){j=1;break e}we.sd=Ct,11>j?((pt=we.f.RGBA).eb=Ct,pt.fb=0,pt.A=at,pt.size=ai):((pt=we.f.kb).y=Ct,pt.O=0,pt.fa=at,pt.Fd=ai,pt.f=Ct,pt.N=0+ai,pt.Ab=K,pt.Cd=Je,pt.ea=Ct,pt.W=0+ai+Je,pt.Db=K,pt.Ed=Je,j==12&&(pt.F=Ct,pt.J=0+ai+2*Je),pt.Tc=tt,pt.lb=je)}if(K=1,je=we.S,Je=we.width,tt=we.height,je>=Va&&13>je)if(11>je)j=we.f.RGBA,K&=(at=Math.abs(j.A))*(tt-1)+Je<=j.size,K&=at>=Je*Fr[je],K&=j.eb!=null;else{j=we.f.kb,at=(Je+1)/2,ai=(tt+1)/2,pt=Math.abs(j.fa),Ct=Math.abs(j.Ab);var ki=Math.abs(j.Db),wi=Math.abs(j.lb),pi=wi*(tt-1)+Je;K&=pt*(tt-1)+Je<=j.Fd,K&=Ct*(ai-1)+at<=j.Cd,K=(K&=ki*(ai-1)+at<=j.Ed)&pt>=Je&Ct>=at&ki>=at,K&=j.y!=null,K&=j.f!=null,K&=j.ea!=null,je==12&&(K&=wi>=Je,K&=pi<=j.Tc,K&=j.F!=null)}else K=0;j=K?0:2}}return j!=0||ue!=null&&ue.fd&&(j=rl(we)),j}var Fs=64,yu=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],Yl=24,Ua=32,_u=8,Rs=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];Ci("Predictor0","PredictorAdd0"),ie.Predictor0=function(){return 4278190080},ie.Predictor1=function(j){return j},ie.Predictor2=function(j,K,ue){return K[ue+0]},ie.Predictor3=function(j,K,ue){return K[ue+1]},ie.Predictor4=function(j,K,ue){return K[ue-1]},ie.Predictor5=function(j,K,ue){return Vt(Vt(j,K[ue+1]),K[ue+0])},ie.Predictor6=function(j,K,ue){return Vt(j,K[ue-1])},ie.Predictor7=function(j,K,ue){return Vt(j,K[ue+0])},ie.Predictor8=function(j,K,ue){return Vt(K[ue-1],K[ue+0])},ie.Predictor9=function(j,K,ue){return Vt(K[ue+0],K[ue+1])},ie.Predictor10=function(j,K,ue){return Vt(Vt(j,K[ue-1]),Vt(K[ue+0],K[ue+1]))},ie.Predictor11=function(j,K,ue){var we=K[ue+0];return 0>=xi(we>>24&255,j>>24&255,(K=K[ue-1])>>24&255)+xi(we>>16&255,j>>16&255,K>>16&255)+xi(we>>8&255,j>>8&255,K>>8&255)+xi(255&we,255&j,255&K)?we:j},ie.Predictor12=function(j,K,ue){var we=K[ue+0];return(mi((j>>24&255)+(we>>24&255)-((K=K[ue-1])>>24&255))<<24|mi((j>>16&255)+(we>>16&255)-(K>>16&255))<<16|mi((j>>8&255)+(we>>8&255)-(K>>8&255))<<8|mi((255&j)+(255&we)-(255&K)))>>>0},ie.Predictor13=function(j,K,ue){var we=K[ue-1];return(Qi((j=Vt(j,K[ue+0]))>>24&255,we>>24&255)<<24|Qi(j>>16&255,we>>16&255)<<16|Qi(j>>8&255,we>>8&255)<<8|Qi(j>>0&255,we>>0&255))>>>0};var vu=ie.PredictorAdd0;ie.PredictorAdd1=Jt,Ci("Predictor2","PredictorAdd2"),Ci("Predictor3","PredictorAdd3"),Ci("Predictor4","PredictorAdd4"),Ci("Predictor5","PredictorAdd5"),Ci("Predictor6","PredictorAdd6"),Ci("Predictor7","PredictorAdd7"),Ci("Predictor8","PredictorAdd8"),Ci("Predictor9","PredictorAdd9"),Ci("Predictor10","PredictorAdd10"),Ci("Predictor11","PredictorAdd11"),Ci("Predictor12","PredictorAdd12"),Ci("Predictor13","PredictorAdd13");var ol=ie.PredictorAdd2;et("ColorIndexInverseTransform","MapARGB","32b",function(j){return j>>8&255},function(j){return j}),et("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(j){return j},function(j){return j>>8&255});var Zl,Ta=ie.ColorIndexInverseTransform,Tl=ie.MapARGB,Fc=ie.VP8LColorIndexInverseTransformAlpha,Rc=ie.MapAlpha,Ll=ie.VP8LPredictorsAdd=[];Ll.length=16,(ie.VP8LPredictors=[]).length=16,(ie.VP8LPredictorsAdd_C=[]).length=16,(ie.VP8LPredictors_C=[]).length=16;var Bs,La,Pa,ra,us,sl,Yo,Uu,Ma,oa,Yr,ga,Pl,Vu,bu,Gs,Ml,ms,Dn,Ro,Gr,Lo,rs,_n,Da,qu,Hu,Bc,hh=u(511),fh=u(2041),zh=u(225),Lr=u(767),zc=0,lc=fh,Zo=zh,Ks=Lr,Go=hh,Va=0,uc=1,wu=2,xu=3,Kl=4,eo=5,ya=6,Bo=7,Au=8,ku=9,Nc=10,Nh=[2,3,7],al=[3,3,11],jh=[280,256,256,256,40],ll=[0,1,1,1,0],cc=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],tr=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],yr=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],Gu=8,hc=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],ws=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],jo=null,Jl=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],ul=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],dh=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],Ql=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],os=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],gs=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],ph=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],sa=[],B=[],d=[],I=1,D=2,z=[],W=[];Zi("UpsampleRgbLinePair",$r,3),Zi("UpsampleBgrLinePair",Fo,3),Zi("UpsampleRgbaLinePair",Ur,4),Zi("UpsampleBgraLinePair",ps,4),Zi("UpsampleArgbLinePair",Es,4),Zi("UpsampleRgba4444LinePair",Ho,2),Zi("UpsampleRgb565LinePair",No,2);var ne=ie.UpsampleRgbLinePair,pe=ie.UpsampleBgrLinePair,ye=ie.UpsampleRgbaLinePair,Se=ie.UpsampleBgraLinePair,ze=ie.UpsampleArgbLinePair,Qe=ie.UpsampleRgba4444LinePair,st=ie.UpsampleRgb565LinePair,Mt=16,St=1<<Mt-1,It=-227,ri=482,fi=6,Ai=(256<<fi)-1,jt=0,Pi=u(256),Ei=u(256),Vi=u(256),Ni=u(256),un=u(ri-It),zi=u(ri-It);bs("YuvToRgbRow",$r,3),bs("YuvToBgrRow",Fo,3),bs("YuvToRgbaRow",Ur,4),bs("YuvToBgraRow",ps,4),bs("YuvToArgbRow",Es,4),bs("YuvToRgba4444Row",Ho,2),bs("YuvToRgb565Row",No,2);var zn=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],vn=[0,2,8],Wn=[8,7,6,4,4,2,2,2,1,1,1,1],Ir=1;this.WebPDecodeRGBA=function(j,K,ue,we,je){var Je=uc,tt=new Gl,at=new Kr;tt.ba=at,at.S=Je,at.width=[at.width],at.height=[at.height];var pt=at.width,Ct=at.height,ai=new jn;if(ai==null||j==null)var ki=2;else e(ai!=null),ki=Ia(j,K,ue,ai.width,ai.height,ai.Pd,ai.Qd,ai.format,null);if(ki!=0?pt=0:(pt!=null&&(pt[0]=ai.width[0]),Ct!=null&&(Ct[0]=ai.height[0]),pt=1),pt){at.width=at.width[0],at.height=at.height[0],we!=null&&(we[0]=at.width),je!=null&&(je[0]=at.height);e:{if(we=new Qo,(je=new gu).data=j,je.w=K,je.ha=ue,je.kd=1,K=[0],e(je!=null),((j=Ia(je.data,je.w,je.ha,null,null,null,K,null,je))==0||j==7)&&K[0]&&(j=4),(K=j)==0){if(e(tt!=null),we.data=je.data,we.w=je.w+je.offset,we.ha=je.ha-je.offset,we.put=lr,we.ac=Ln,we.bc=oo,we.ma=tt,je.xa){if((j=Bt())==null){tt=1;break e}if(function(wi,pi){var on=[0],Oi=[0],qt=[0];t:for(;;){if(wi==null)return 0;if(pi==null)return wi.a=2,0;if(wi.l=pi,wi.a=0,We(wi.m,pi.data,pi.w,pi.ha),!ln(wi.m,on,Oi,qt)){wi.a=3;break t}if(wi.xb=D,pi.width=on[0],pi.height=Oi[0],!ei(on[0],Oi[0],1,wi,null))break t;return 1}return e(wi.a!=0),0}(j,we)){if(we=(K=ju(we.width,we.height,tt.Oa,tt.ba))==0){t:{we=j;i:for(;;){if(we==null){we=0;break t}if(e(we.s.yc!=null),e(we.s.Ya!=null),e(0<we.s.Wb),e((ue=we.l)!=null),e((je=ue.ma)!=null),we.xb!=0){if(we.ca=je.ba,we.tb=je.tb,e(we.ca!=null),!Il(je.Oa,ue,xu)){we.a=2;break i}if(!_t(we,ue.width)||ue.da)break i;if((ue.da||en(we.ca.S))&&hi(),11>we.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),we.ca.f.kb.F!=null&&hi()),we.Pb&&0<we.s.ua&&we.s.vb.X==null&&!wt(we.s.vb,we.s.Wa.Xa)){we.a=1;break i}we.xb=0}if(!Ge(we,we.V,we.Ba,we.c,we.i,ue.o,He))break i;je.Dc=we.Ma,we=1;break t}e(we.a!=0),we=0}we=!we}we&&(K=j.a)}else K=j.a}else{if((j=new il)==null){tt=1;break e}if(j.Fa=je.na,j.P=je.P,j.qc=je.Sa,sr(j,we)){if((K=ju(we.width,we.height,tt.Oa,tt.ba))==0){if(j.Aa=0,ue=tt.Oa,e((je=j)!=null),ue!=null){if(0<(pt=0>(pt=ue.Md)?0:100<pt?255:255*pt/100)){for(Ct=ai=0;4>Ct;++Ct)12>(ki=je.pb[Ct]).lc&&(ki.ia=pt*Wn[0>ki.lc?0:ki.lc]>>3),ai|=ki.ia;ai&&(alert("todo:VP8InitRandom"),je.ia=1)}je.Ga=ue.Id,100<je.Ga?je.Ga=100:0>je.Ga&&(je.Ga=0)}Xo(j,we)||(K=j.a)}}else K=j.a}K==0&&tt.Oa!=null&&tt.Oa.fd&&(K=rl(tt.ba))}tt=K}Je=tt!=0?null:11>Je?at.f.RGBA.eb:at.f.kb.y}else Je=null;return Je};var Fr=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function y(ie,ke){for(var Le="",fe=0;fe<4;fe++)Le+=String.fromCharCode(ie[ke++]);return Le}function b(ie,ke){return(ie[ke+0]<<0|ie[ke+1]<<8|ie[ke+2]<<16)>>>0}function v(ie,ke){return(ie[ke+0]<<0|ie[ke+1]<<8|ie[ke+2]<<16|ie[ke+3]<<24)>>>0}new h;var w=[0],x=[0],C=[],T=new h,S=i,M=function(ie,ke){var Le={},fe=0,Te=!1,_e=0,ve=0;if(Le.frames=[],!function(Ee,he,me,Fe){for(var Xe=0;Xe<Fe;Xe++)if(Ee[he+Xe]!=me.charCodeAt(Xe))return!0;return!1}(ie,ke,"RIFF",4)){var rt,nt;for(v(ie,ke+=4),ke+=8;ke<ie.length;){var Tt=y(ie,ke),We=v(ie,ke+=4);ke+=4;var be=We+(1&We);switch(Tt){case"VP8 ":case"VP8L":Le.frames[fe]===void 0&&(Le.frames[fe]={}),(le=Le.frames[fe]).src_off=Te?ve:ke-8,le.src_size=_e+We+8,fe++,Te&&(Te=!1,_e=0,ve=0);break;case"VP8X":(le=Le.header={}).feature_flags=ie[ke];var Ce=ke+4;le.canvas_width=1+b(ie,Ce),Ce+=3,le.canvas_height=1+b(ie,Ce),Ce+=3;break;case"ALPH":Te=!0,_e=be+8,ve=ke-8;break;case"ANIM":(le=Le.header).bgcolor=v(ie,ke),Ce=ke+4,le.loop_count=(rt=ie)[(nt=Ce)+0]<<0|rt[nt+1]<<8,Ce+=2;break;case"ANMF":var Be,le;(le=Le.frames[fe]={}).offset_x=2*b(ie,ke),ke+=3,le.offset_y=2*b(ie,ke),ke+=3,le.width=1+b(ie,ke),ke+=3,le.height=1+b(ie,ke),ke+=3,le.duration=b(ie,ke),ke+=3,Be=ie[ke++],le.dispose=1&Be,le.blend=Be>>1&1}Tt!="ANMF"&&(ke+=be)}return Le}}(S,0);M.response=S,M.rgbaoutput=!0,M.dataurl=!1;var O=M.header?M.header:null,V=M.frames?M.frames:null;if(O){O.loop_counter=O.loop_count,w=[O.canvas_height],x=[O.canvas_width];for(var X=0;X<V.length&&V[X].blend!=0;X++);}var Z=V[0],ee=T.WebPDecodeRGBA(S,Z.src_off,Z.src_size,x,w);Z.rgba=ee,Z.imgwidth=x[0],Z.imgheight=w[0];for(var J=0;J<x[0]*w[0]*4;J++)C[J]=ee[J];return this.width=x,this.height=w,this.data=C,this}(function(i){var e=function(){return typeof z2=="function"},t=function(w,x,C,T){var S=4,M=m;switch(T){case i.image_compression.FAST:S=1,M=u;break;case i.image_compression.MEDIUM:S=6,M=r;break;case i.image_compression.SLOW:S=9,M=h}w=o(w,x,C,M);var O=z2(w,{level:S});return i.__addimage__.arrayBufferToBinaryString(O)},o=function(w,x,C,T){for(var S,M,O,V=w.length/x,X=new Uint8Array(w.length+V),Z=b(),ee=0;ee<V;ee+=1){if(O=ee*x,S=w.subarray(O,O+x),T)X.set(T(S,C,M),O+ee);else{for(var J,ie=Z.length,ke=[];J<ie;J+=1)ke[J]=Z[J](S,C,M);var Le=v(ke.concat());X.set(ke[Le],O+ee)}M=S}return X},l=function(w){var x=Array.apply([],w);return x.unshift(0),x},u=function(w,x){var C,T=[],S=w.length;T[0]=1;for(var M=0;M<S;M+=1)C=w[M-x]||0,T[M+1]=w[M]-C+256&255;return T},m=function(w,x,C){var T,S=[],M=w.length;S[0]=2;for(var O=0;O<M;O+=1)T=C&&C[O]||0,S[O+1]=w[O]-T+256&255;return S},r=function(w,x,C){var T,S,M=[],O=w.length;M[0]=3;for(var V=0;V<O;V+=1)T=w[V-x]||0,S=C&&C[V]||0,M[V+1]=w[V]+256-(T+S>>>1)&255;return M},h=function(w,x,C){var T,S,M,O,V=[],X=w.length;V[0]=4;for(var Z=0;Z<X;Z+=1)T=w[Z-x]||0,S=C&&C[Z]||0,M=C&&C[Z-x]||0,O=y(T,S,M),V[Z+1]=w[Z]-O+256&255;return V},y=function(w,x,C){if(w===x&&x===C)return w;var T=Math.abs(x-C),S=Math.abs(w-C),M=Math.abs(w+x-C-C);return T<=S&&T<=M?w:S<=M?x:C},b=function(){return[l,u,m,r,h]},v=function(w){var x=w.map(function(C){return C.reduce(function(T,S){return T+Math.abs(S)},0)});return x.indexOf(Math.min.apply(null,x))};i.processPNG=function(w,x,C,T){var S,M,O,V,X,Z,ee,J,ie,ke,Le,fe,Te,_e,ve,rt=this.decode.FLATE_DECODE,nt="";if(this.__addimage__.isArrayBuffer(w)&&(w=new Uint8Array(w)),this.__addimage__.isArrayBufferView(w)){if(w=(O=new N8(w)).imgData,M=O.bits,S=O.colorSpace,X=O.colors,[4,6].indexOf(O.colorType)!==-1){if(O.bits===8){ie=(J=O.pixelBitlength==32?new Uint32Array(O.decodePixels().buffer):O.pixelBitlength==16?new Uint16Array(O.decodePixels().buffer):new Uint8Array(O.decodePixels().buffer)).length,Le=new Uint8Array(ie*O.colors),ke=new Uint8Array(ie);var Tt,We=O.pixelBitlength-O.bits;for(_e=0,ve=0;_e<ie;_e++){for(Te=J[_e],Tt=0;Tt<We;)Le[ve++]=Te>>>Tt&255,Tt+=O.bits;ke[_e]=Te>>>Tt&255}}if(O.bits===16){ie=(J=new Uint32Array(O.decodePixels().buffer)).length,Le=new Uint8Array(ie*(32/O.pixelBitlength)*O.colors),ke=new Uint8Array(ie*(32/O.pixelBitlength)),fe=O.colors>1,_e=0,ve=0;for(var be=0;_e<ie;)Te=J[_e++],Le[ve++]=Te>>>0&255,fe&&(Le[ve++]=Te>>>16&255,Te=J[_e++],Le[ve++]=Te>>>0&255),ke[be++]=Te>>>16&255;M=8}T!==i.image_compression.NONE&&e()?(w=t(Le,O.width*O.colors,O.colors,T),ee=t(ke,O.width,1,T)):(w=Le,ee=ke,rt=void 0)}if(O.colorType===3&&(S=this.color_spaces.INDEXED,Z=O.palette,O.transparency.indexed)){var Ce=O.transparency.indexed,Be=0;for(_e=0,ie=Ce.length;_e<ie;++_e)Be+=Ce[_e];if((Be/=255)===ie-1&&Ce.indexOf(0)!==-1)V=[Ce.indexOf(0)];else if(Be!==ie){for(J=O.decodePixels(),ke=new Uint8Array(J.length),_e=0,ie=J.length;_e<ie;_e++)ke[_e]=Ce[J[_e]];ee=t(ke,O.width,1)}}var le=function(Ee){var he;switch(Ee){case i.image_compression.FAST:he=11;break;case i.image_compression.MEDIUM:he=13;break;case i.image_compression.SLOW:he=14;break;default:he=12}return he}(T);return rt===this.decode.FLATE_DECODE&&(nt="/Predictor "+le+" "),nt+="/Colors "+X+" /BitsPerComponent "+M+" /Columns "+O.width,(this.__addimage__.isArrayBuffer(w)||this.__addimage__.isArrayBufferView(w))&&(w=this.__addimage__.arrayBufferToBinaryString(w)),(ee&&this.__addimage__.isArrayBuffer(ee)||this.__addimage__.isArrayBufferView(ee))&&(ee=this.__addimage__.arrayBufferToBinaryString(ee)),{alias:C,data:w,index:x,filter:rt,decodeParameters:nt,transparency:V,palette:Z,sMask:ee,predictor:le,width:O.width,height:O.height,bitsPerComponent:M,colorSpace:S}}}})(Vr.API),function(i){i.processGIF89A=function(e,t,o,l){var u=new j8(e),m=u.width,r=u.height,h=[];u.decodeAndBlitFrameRGBA(0,h);var y={data:h,width:m,height:r},b=new zm(100).encode(y,100);return i.processJPEG.call(this,b,t,o,l)},i.processGIF87A=i.processGIF89A}(Vr.API),Cc.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var i=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(i);for(var e=0;e<i;e++){var t=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),l=this.datav.getUint8(this.pos++,!0),u=this.datav.getUint8(this.pos++,!0);this.palette[e]={red:l,green:o,blue:t,quad:u}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},Cc.prototype.parseBGR=function(){this.pos=this.offset;try{var i="bit"+this.bitPP,e=this.width*this.height*4;this.data=new Uint8Array(e),this[i]()}catch(t){fs.log("bit decode error:"+t)}},Cc.prototype.bit1=function(){var i,e=Math.ceil(this.width/8),t=e%4;for(i=this.height-1;i>=0;i--){for(var o=this.bottom_up?i:this.height-1-i,l=0;l<e;l++)for(var u=this.datav.getUint8(this.pos++,!0),m=o*this.width*4+8*l*4,r=0;r<8&&8*l+r<this.width;r++){var h=this.palette[u>>7-r&1];this.data[m+4*r]=h.blue,this.data[m+4*r+1]=h.green,this.data[m+4*r+2]=h.red,this.data[m+4*r+3]=255}t!==0&&(this.pos+=4-t)}},Cc.prototype.bit4=function(){for(var i=Math.ceil(this.width/2),e=i%4,t=this.height-1;t>=0;t--){for(var o=this.bottom_up?t:this.height-1-t,l=0;l<i;l++){var u=this.datav.getUint8(this.pos++,!0),m=o*this.width*4+2*l*4,r=u>>4,h=15&u,y=this.palette[r];if(this.data[m]=y.blue,this.data[m+1]=y.green,this.data[m+2]=y.red,this.data[m+3]=255,2*l+1>=this.width)break;y=this.palette[h],this.data[m+4]=y.blue,this.data[m+4+1]=y.green,this.data[m+4+2]=y.red,this.data[m+4+3]=255}e!==0&&(this.pos+=4-e)}},Cc.prototype.bit8=function(){for(var i=this.width%4,e=this.height-1;e>=0;e--){for(var t=this.bottom_up?e:this.height-1-e,o=0;o<this.width;o++){var l=this.datav.getUint8(this.pos++,!0),u=t*this.width*4+4*o;if(l<this.palette.length){var m=this.palette[l];this.data[u]=m.red,this.data[u+1]=m.green,this.data[u+2]=m.blue,this.data[u+3]=255}else this.data[u]=255,this.data[u+1]=255,this.data[u+2]=255,this.data[u+3]=255}i!==0&&(this.pos+=4-i)}},Cc.prototype.bit15=function(){for(var i=this.width%3,e=parseInt("11111",2),t=this.height-1;t>=0;t--){for(var o=this.bottom_up?t:this.height-1-t,l=0;l<this.width;l++){var u=this.datav.getUint16(this.pos,!0);this.pos+=2;var m=(u&e)/e*255|0,r=(u>>5&e)/e*255|0,h=(u>>10&e)/e*255|0,y=u>>15?255:0,b=o*this.width*4+4*l;this.data[b]=h,this.data[b+1]=r,this.data[b+2]=m,this.data[b+3]=y}this.pos+=i}},Cc.prototype.bit16=function(){for(var i=this.width%3,e=parseInt("11111",2),t=parseInt("111111",2),o=this.height-1;o>=0;o--){for(var l=this.bottom_up?o:this.height-1-o,u=0;u<this.width;u++){var m=this.datav.getUint16(this.pos,!0);this.pos+=2;var r=(m&e)/e*255|0,h=(m>>5&t)/t*255|0,y=(m>>11)/e*255|0,b=l*this.width*4+4*u;this.data[b]=y,this.data[b+1]=h,this.data[b+2]=r,this.data[b+3]=255}this.pos+=i}},Cc.prototype.bit24=function(){for(var i=this.height-1;i>=0;i--){for(var e=this.bottom_up?i:this.height-1-i,t=0;t<this.width;t++){var o=this.datav.getUint8(this.pos++,!0),l=this.datav.getUint8(this.pos++,!0),u=this.datav.getUint8(this.pos++,!0),m=e*this.width*4+4*t;this.data[m]=u,this.data[m+1]=l,this.data[m+2]=o,this.data[m+3]=255}this.pos+=this.width%4}},Cc.prototype.bit32=function(){for(var i=this.height-1;i>=0;i--)for(var e=this.bottom_up?i:this.height-1-i,t=0;t<this.width;t++){var o=this.datav.getUint8(this.pos++,!0),l=this.datav.getUint8(this.pos++,!0),u=this.datav.getUint8(this.pos++,!0),m=this.datav.getUint8(this.pos++,!0),r=e*this.width*4+4*t;this.data[r]=u,this.data[r+1]=l,this.data[r+2]=o,this.data[r+3]=m}},Cc.prototype.getData=function(){return this.data},function(i){i.processBMP=function(e,t,o,l){var u=new Cc(e,!1),m=u.width,r=u.height,h={data:u.getData(),width:m,height:r},y=new zm(100).encode(h,100);return i.processJPEG.call(this,y,t,o,l)}}(Vr.API),A_.prototype.getData=function(){return this.data},function(i){i.processWEBP=function(e,t,o,l){var u=new A_(e),m=u.width,r=u.height,h={data:u.getData(),width:m,height:r},y=new zm(100).encode(h,100);return i.processJPEG.call(this,y,t,o,l)}}(Vr.API),Vr.API.processRGBA=function(i,e,t){for(var o=i.data,l=o.length,u=new Uint8Array(l/4*3),m=new Uint8Array(l/4),r=0,h=0,y=0;y<l;y+=4){var b=o[y],v=o[y+1],w=o[y+2],x=o[y+3];u[r++]=b,u[r++]=v,u[r++]=w,m[h++]=x}var C=this.__addimage__.arrayBufferToBinaryString(u);return{alpha:this.__addimage__.arrayBufferToBinaryString(m),data:C,index:e,alias:t,colorSpace:"DeviceRGB",bitsPerComponent:8,width:i.width,height:i.height}},Vr.API.setLanguage=function(i){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[i]!==void 0&&(this.internal.languageSettings.languageCode=i,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},x0=Vr.API,Vp=x0.getCharWidthsArray=function(i,e){var t,o,l=(e=e||{}).font||this.internal.getFont(),u=e.fontSize||this.internal.getFontSize(),m=e.charSpace||this.internal.getCharSpace(),r=e.widths?e.widths:l.metadata.Unicode.widths,h=r.fof?r.fof:1,y=e.kerning?e.kerning:l.metadata.Unicode.kerning,b=y.fof?y.fof:1,v=e.doKerning!==!1,w=0,x=i.length,C=0,T=r[0]||h,S=[];for(t=0;t<x;t++)o=i.charCodeAt(t),typeof l.metadata.widthOfString=="function"?S.push((l.metadata.widthOfGlyph(l.metadata.characterToGlyph(o))+m*(1e3/u)||0)/1e3):(w=v&&es(y[o])==="object"&&!isNaN(parseInt(y[o][C],10))?y[o][C]/b:0,S.push((r[o]||T)/h+w)),C=o;return S},v_=x0.getStringUnitWidth=function(i,e){var t=(e=e||{}).fontSize||this.internal.getFontSize(),o=e.font||this.internal.getFont(),l=e.charSpace||this.internal.getCharSpace();return x0.processArabic&&(i=x0.processArabic(i)),typeof o.metadata.widthOfString=="function"?o.metadata.widthOfString(i,t,l)/t:Vp.apply(this,arguments).reduce(function(u,m){return u+m},0)},b_=function(i,e,t,o){for(var l=[],u=0,m=i.length,r=0;u!==m&&r+e[u]<t;)r+=e[u],u++;l.push(i.slice(0,u));var h=u;for(r=0;u!==m;)r+e[u]>o&&(l.push(i.slice(h,u)),r=0,h=u),r+=e[u],u++;return h!==u&&l.push(i.slice(h,u)),l},w_=function(i,e,t){t||(t={});var o,l,u,m,r,h,y,b=[],v=[b],w=t.textIndent||0,x=0,C=0,T=i.split(" "),S=Vp.apply(this,[" ",t])[0];if(h=t.lineIndent===-1?T[0].length+2:t.lineIndent||0){var M=Array(h).join(" "),O=[];T.map(function(X){(X=X.split(/\s*\n/)).length>1?O=O.concat(X.map(function(Z,ee){return(ee&&Z.length?`
`:"")+Z})):O.push(X[0])}),T=O,h=v_.apply(this,[M,t])}for(u=0,m=T.length;u<m;u++){var V=0;if(o=T[u],h&&o[0]==`
`&&(o=o.substr(1),V=1),w+x+(C=(l=Vp.apply(this,[o,t])).reduce(function(X,Z){return X+Z},0))>e||V){if(C>e){for(r=b_.apply(this,[o,l,e-(w+x),e]),b.push(r.shift()),b=[r.pop()];r.length;)v.push([r.shift()]);C=l.slice(o.length-(b[0]?b[0].length:0)).reduce(function(X,Z){return X+Z},0)}else b=[o];v.push(b),w=C+h,x=S}else b.push(o),w+=x+C,x=S}return y=h?function(X,Z){return(Z?M:"")+X.join(" ")}:function(X){return X.join(" ")},v.map(y)},x0.splitTextToSize=function(i,e,t){var o,l=(t=t||{}).fontSize||this.internal.getFontSize(),u=function(b){if(b.widths&&b.kerning)return{widths:b.widths,kerning:b.kerning};var v=this.internal.getFont(b.fontName,b.fontStyle);return v.metadata.Unicode?{widths:v.metadata.Unicode.widths||{0:1},kerning:v.metadata.Unicode.kerning||{}}:{font:v.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}.call(this,t);o=Array.isArray(i)?i:String(i).split(/\r?\n/);var m=1*this.internal.scaleFactor*e/l;u.textIndent=t.textIndent?1*t.textIndent*this.internal.scaleFactor/l:0,u.lineIndent=t.lineIndent;var r,h,y=[];for(r=0,h=o.length;r<h;r++)y=y.concat(w_.apply(this,[o[r],m,u]));return y},function(i){i.__fontmetrics__=i.__fontmetrics__||{};for(var e="klmnopqrstuvwxyz",t={},o={},l=0;l<e.length;l++)t[e[l]]="0123456789abcdef"[l],o["0123456789abcdef"[l]]=e[l];var u=function(v){return"0x"+parseInt(v,10).toString(16)},m=i.__fontmetrics__.compress=function(v){var w,x,C,T,S=["{"];for(var M in v){if(w=v[M],isNaN(parseInt(M,10))?x="'"+M+"'":(M=parseInt(M,10),x=(x=u(M).slice(2)).slice(0,-1)+o[x.slice(-1)]),typeof w=="number")w<0?(C=u(w).slice(3),T="-"):(C=u(w).slice(2),T=""),C=T+C.slice(0,-1)+o[C.slice(-1)];else{if(es(w)!=="object")throw new Error("Don't know what to do with value type "+es(w)+".");C=m(w)}S.push(x+C)}return S.push("}"),S.join("")},r=i.__fontmetrics__.uncompress=function(v){if(typeof v!="string")throw new Error("Invalid argument passed to uncompress.");for(var w,x,C,T,S={},M=1,O=S,V=[],X="",Z="",ee=v.length-1,J=1;J<ee;J+=1)(T=v[J])=="'"?w?(C=w.join(""),w=void 0):w=[]:w?w.push(T):T=="{"?(V.push([O,C]),O={},C=void 0):T=="}"?((x=V.pop())[0][x[1]]=O,C=void 0,O=x[0]):T=="-"?M=-1:C===void 0?t.hasOwnProperty(T)?(X+=t[T],C=parseInt(X,16)*M,M=1,X=""):X+=T:t.hasOwnProperty(T)?(Z+=t[T],O[C]=parseInt(Z,16)*M,M=1,C=void 0,Z=""):Z+=T;return S},h={codePages:["WinAnsiEncoding"],WinAnsiEncoding:r("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},y={Unicode:{Courier:h,"Courier-Bold":h,"Courier-BoldOblique":h,"Courier-Oblique":h,Helvetica:h,"Helvetica-Bold":h,"Helvetica-BoldOblique":h,"Helvetica-Oblique":h,"Times-Roman":h,"Times-Bold":h,"Times-BoldItalic":h,"Times-Italic":h}},b={Unicode:{"Courier-Oblique":r("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":r("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":r("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:r("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":r("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":r("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:r("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:r("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":r("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:r("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":r("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":r("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":r("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":r("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};i.events.push(["addFont",function(v){var w=v.font,x=b.Unicode[w.postScriptName];x&&(w.metadata.Unicode={},w.metadata.Unicode.widths=x.widths,w.metadata.Unicode.kerning=x.kerning);var C=y.Unicode[w.postScriptName];C&&(w.metadata.Unicode.encoding=C,w.encoding=C.codePages[0])}])}(Vr.API),function(i){var e=function(t){for(var o=t.length,l=new Uint8Array(o),u=0;u<o;u++)l[u]=t.charCodeAt(u);return l};i.API.events.push(["addFont",function(t){var o=void 0,l=t.font,u=t.instance;if(!l.isStandardFont){if(u===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+l.postScriptName+"').");if(typeof(o=u.existsFileInVFS(l.postScriptName)===!1?u.loadFile(l.postScriptName):u.getFileFromVFS(l.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+l.postScriptName+"').");(function(m,r){r=/^\x00\x01\x00\x00/.test(r)?e(r):e(Fd(r)),m.metadata=i.API.TTFFont.open(r),m.metadata.Unicode=m.metadata.Unicode||{encoding:{},kerning:{},widths:[]},m.metadata.glyIdsUsed=[0]})(l,o)}}])}(Vr),function(i){function e(){return(qr.canvg?Promise.resolve(qr.canvg):m1(()=>import("./index.es-9f27f93f.js"),[],import.meta.url)).catch(function(t){return Promise.reject(new Error("Could not load canvg: "+t))}).then(function(t){return t.default?t.default:t})}Vr.API.addSvgAsImage=function(t,o,l,u,m,r,h,y){if(isNaN(o)||isNaN(l))throw fs.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(u)||isNaN(m))throw fs.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var b=document.createElement("canvas");b.width=u,b.height=m;var v=b.getContext("2d");v.fillStyle="#fff",v.fillRect(0,0,b.width,b.height);var w={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},x=this;return e().then(function(C){return C.fromString(v,t,w)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(C){return C.render(w)}).then(function(){x.addImage(b.toDataURL("image/jpeg",1),o,l,u,m,h,y)})}}(),Vr.API.putTotalPages=function(i){var e,t=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(e=new RegExp(i,"g"),t=this.internal.getNumberOfPages()):(e=new RegExp(this.pdfEscape16(i,this.internal.getFont()),"g"),t=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var o=1;o<=this.internal.getNumberOfPages();o++)for(var l=0;l<this.internal.pages[o].length;l++)this.internal.pages[o][l]=this.internal.pages[o][l].replace(e,t);return this},Vr.API.viewerPreferences=function(i,e){var t;i=i||{},e=e||!1;var o,l,u,m={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},r=Object.keys(m),h=[],y=0,b=0,v=0;function w(C,T){var S,M=!1;for(S=0;S<C.length;S+=1)C[S]===T&&(M=!0);return M}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(m)),this.internal.viewerpreferences.isSubscribed=!1),t=this.internal.viewerpreferences.configuration,i==="reset"||e===!0){var x=r.length;for(v=0;v<x;v+=1)t[r[v]].value=t[r[v]].defaultValue,t[r[v]].explicitSet=!1}if(es(i)==="object"){for(l in i)if(u=i[l],w(r,l)&&u!==void 0){if(t[l].type==="boolean"&&typeof u=="boolean")t[l].value=u;else if(t[l].type==="name"&&w(t[l].valueSet,u))t[l].value=u;else if(t[l].type==="integer"&&Number.isInteger(u))t[l].value=u;else if(t[l].type==="array"){for(y=0;y<u.length;y+=1)if(o=!0,u[y].length===1&&typeof u[y][0]=="number")h.push(String(u[y]-1));else if(u[y].length>1){for(b=0;b<u[y].length;b+=1)typeof u[y][b]!="number"&&(o=!1);o===!0&&h.push([u[y][0]-1,u[y][1]-1].join(" "))}t[l].value="["+h.join(" ")+"]"}else t[l].value=t[l].defaultValue;t[l].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var C,T=[];for(C in t)t[C].explicitSet===!0&&(t[C].type==="name"?T.push("/"+C+" /"+t[C].value):T.push("/"+C+" "+t[C].value));T.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+T.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=t,this},function(i){var e=function(){var o='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',l=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),u=unescape(encodeURIComponent(o)),m=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),r=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),h=unescape(encodeURIComponent("</x:xmpmeta>")),y=u.length+m.length+r.length+l.length+h.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+y+" >>"),this.internal.write("stream"),this.internal.write(l+u+m+r+h),this.internal.write("endstream"),this.internal.write("endobj")},t=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};i.addMetadata=function(o,l){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:o,namespaceuri:l||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",t),this.internal.events.subscribe("postPutResources",e)),this}}(Vr.API),function(i){var e=i.API,t=e.pdfEscape16=function(u,m){for(var r,h=m.metadata.Unicode.widths,y=["","0","00","000","0000"],b=[""],v=0,w=u.length;v<w;++v){if(r=m.metadata.characterToGlyph(u.charCodeAt(v)),m.metadata.glyIdsUsed.push(r),m.metadata.toUnicode[r]=u.charCodeAt(v),h.indexOf(r)==-1&&(h.push(r),h.push([parseInt(m.metadata.widthOfGlyph(r),10)])),r=="0")return b.join("");r=r.toString(16),b.push(y[4-r.length],r)}return b.join("")},o=function(u){var m,r,h,y,b,v,w;for(b=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,h=[],v=0,w=(r=Object.keys(u).sort(function(x,C){return x-C})).length;v<w;v++)m=r[v],h.length>=100&&(b+=`
`+h.length+` beginbfchar
`+h.join(`
`)+`
endbfchar`,h=[]),u[m]!==void 0&&u[m]!==null&&typeof u[m].toString=="function"&&(y=("0000"+u[m].toString(16)).slice(-4),m=("0000"+(+m).toString(16)).slice(-4),h.push("<"+m+"><"+y+">"));return h.length&&(b+=`
`+h.length+` beginbfchar
`+h.join(`
`)+`
endbfchar
`),b+=`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};e.events.push(["putFont",function(u){(function(m){var r=m.font,h=m.out,y=m.newObject,b=m.putStream;if(r.metadata instanceof i.API.TTFFont&&r.encoding==="Identity-H"){for(var v=r.metadata.Unicode.widths,w=r.metadata.subset.encode(r.metadata.glyIdsUsed,1),x="",C=0;C<w.length;C++)x+=String.fromCharCode(w[C]);var T=y();b({data:x,addLength1:!0,objectId:T}),h("endobj");var S=y();b({data:o(r.metadata.toUnicode),addLength1:!0,objectId:S}),h("endobj");var M=y();h("<<"),h("/Type /FontDescriptor"),h("/FontName /"+D0(r.fontName)),h("/FontFile2 "+T+" 0 R"),h("/FontBBox "+i.API.PDFObject.convert(r.metadata.bbox)),h("/Flags "+r.metadata.flags),h("/StemV "+r.metadata.stemV),h("/ItalicAngle "+r.metadata.italicAngle),h("/Ascent "+r.metadata.ascender),h("/Descent "+r.metadata.decender),h("/CapHeight "+r.metadata.capHeight),h(">>"),h("endobj");var O=y();h("<<"),h("/Type /Font"),h("/BaseFont /"+D0(r.fontName)),h("/FontDescriptor "+M+" 0 R"),h("/W "+i.API.PDFObject.convert(v)),h("/CIDToGIDMap /Identity"),h("/DW 1000"),h("/Subtype /CIDFontType2"),h("/CIDSystemInfo"),h("<<"),h("/Supplement 0"),h("/Registry (Adobe)"),h("/Ordering ("+r.encoding+")"),h(">>"),h(">>"),h("endobj"),r.objectNumber=y(),h("<<"),h("/Type /Font"),h("/Subtype /Type0"),h("/ToUnicode "+S+" 0 R"),h("/BaseFont /"+D0(r.fontName)),h("/Encoding /"+r.encoding),h("/DescendantFonts ["+O+" 0 R]"),h(">>"),h("endobj"),r.isAlreadyPutted=!0}})(u)}]),e.events.push(["putFont",function(u){(function(m){var r=m.font,h=m.out,y=m.newObject,b=m.putStream;if(r.metadata instanceof i.API.TTFFont&&r.encoding==="WinAnsiEncoding"){for(var v=r.metadata.rawData,w="",x=0;x<v.length;x++)w+=String.fromCharCode(v[x]);var C=y();b({data:w,addLength1:!0,objectId:C}),h("endobj");var T=y();b({data:o(r.metadata.toUnicode),addLength1:!0,objectId:T}),h("endobj");var S=y();h("<<"),h("/Descent "+r.metadata.decender),h("/CapHeight "+r.metadata.capHeight),h("/StemV "+r.metadata.stemV),h("/Type /FontDescriptor"),h("/FontFile2 "+C+" 0 R"),h("/Flags 96"),h("/FontBBox "+i.API.PDFObject.convert(r.metadata.bbox)),h("/FontName /"+D0(r.fontName)),h("/ItalicAngle "+r.metadata.italicAngle),h("/Ascent "+r.metadata.ascender),h(">>"),h("endobj"),r.objectNumber=y();for(var M=0;M<r.metadata.hmtx.widths.length;M++)r.metadata.hmtx.widths[M]=parseInt(r.metadata.hmtx.widths[M]*(1e3/r.metadata.head.unitsPerEm));h("<</Subtype/TrueType/Type/Font/ToUnicode "+T+" 0 R/BaseFont/"+D0(r.fontName)+"/FontDescriptor "+S+" 0 R/Encoding/"+r.encoding+" /FirstChar 29 /LastChar 255 /Widths "+i.API.PDFObject.convert(r.metadata.hmtx.widths)+">>"),h("endobj"),r.isAlreadyPutted=!0}})(u)}]);var l=function(u){var m,r=u.text||"",h=u.x,y=u.y,b=u.options||{},v=u.mutex||{},w=v.pdfEscape,x=v.activeFontKey,C=v.fonts,T=x,S="",M=0,O="",V=C[T].encoding;if(C[T].encoding!=="Identity-H")return{text:r,x:h,y,options:b,mutex:v};for(O=r,T=x,Array.isArray(r)&&(O=r[0]),M=0;M<O.length;M+=1)C[T].metadata.hasOwnProperty("cmap")&&(m=C[T].metadata.cmap.unicode.codeMap[O[M].charCodeAt(0)]),m||O[M].charCodeAt(0)<256&&C[T].metadata.hasOwnProperty("Unicode")?S+=O[M]:S+="";var X="";return parseInt(T.slice(1))<14||V==="WinAnsiEncoding"?X=w(S,T).split("").map(function(Z){return Z.charCodeAt(0).toString(16)}).join(""):V==="Identity-H"&&(X=t(S,C[T])),v.isHex=!0,{text:X,x:h,y,options:b,mutex:v}};e.events.push(["postProcessText",function(u){var m=u.text||"",r=[],h={text:m,x:u.x,y:u.y,options:u.options,mutex:u.mutex};if(Array.isArray(m)){var y=0;for(y=0;y<m.length;y+=1)Array.isArray(m[y])&&m[y].length===3?r.push([l(Object.assign({},h,{text:m[y][0]})).text,m[y][1],m[y][2]]):r.push(l(Object.assign({},h,{text:m[y]})).text);u.text=r}else u.text=l(Object.assign({},h,{text:m})).text}])}(Vr),function(i){var e=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};i.existsFileInVFS=function(t){return e.call(this),this.internal.vFS[t]!==void 0},i.addFileToVFS=function(t,o){return e.call(this),this.internal.vFS[t]=o,this},i.getFileFromVFS=function(t){return e.call(this),this.internal.vFS[t]!==void 0?this.internal.vFS[t]:null}}(Vr.API),function(i){i.__bidiEngine__=i.prototype.__bidiEngine__=function(o){var l,u,m,r,h,y,b,v=e,w=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],x=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],C={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},T={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},S=["(",")","(","<",">","<","[","]","[","{","}","{","\xAB","\xBB","\xAB","\u2039","\u203A","\u2039","\u2045","\u2046","\u2045","\u207D","\u207E","\u207D","\u208D","\u208E","\u208D","\u2264","\u2265","\u2264","\u2329","\u232A","\u2329","\uFE59","\uFE5A","\uFE59","\uFE5B","\uFE5C","\uFE5B","\uFE5D","\uFE5E","\uFE5D","\uFE64","\uFE65","\uFE64"],M=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),O=!1,V=0;this.__bidiEngine__={};var X=function(fe){var Te=fe.charCodeAt(),_e=Te>>8,ve=T[_e];return ve!==void 0?v[256*ve+(255&Te)]:_e===252||_e===253?"AL":M.test(_e)?"L":_e===8?"R":"N"},Z=function(fe){for(var Te,_e=0;_e<fe.length;_e++){if((Te=X(fe.charAt(_e)))==="L")return!1;if(Te==="R")return!0}return!1},ee=function(fe,Te,_e,ve){var rt,nt,Tt,We,be=Te[ve];switch(be){case"L":case"R":O=!1;break;case"N":case"AN":break;case"EN":O&&(be="AN");break;case"AL":O=!0,be="R";break;case"WS":be="N";break;case"CS":ve<1||ve+1>=Te.length||(rt=_e[ve-1])!=="EN"&&rt!=="AN"||(nt=Te[ve+1])!=="EN"&&nt!=="AN"?be="N":O&&(nt="AN"),be=nt===rt?nt:"N";break;case"ES":be=(rt=ve>0?_e[ve-1]:"B")==="EN"&&ve+1<Te.length&&Te[ve+1]==="EN"?"EN":"N";break;case"ET":if(ve>0&&_e[ve-1]==="EN"){be="EN";break}if(O){be="N";break}for(Tt=ve+1,We=Te.length;Tt<We&&Te[Tt]==="ET";)Tt++;be=Tt<We&&Te[Tt]==="EN"?"EN":"N";break;case"NSM":if(m&&!r){for(We=Te.length,Tt=ve+1;Tt<We&&Te[Tt]==="NSM";)Tt++;if(Tt<We){var Ce=fe[ve],Be=Ce>=1425&&Ce<=2303||Ce===64286;if(rt=Te[Tt],Be&&(rt==="R"||rt==="AL")){be="R";break}}}be=ve<1||(rt=Te[ve-1])==="B"?"N":_e[ve-1];break;case"B":O=!1,l=!0,be=V;break;case"S":u=!0,be="N";break;case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":O=!1;break;case"BN":be="N"}return be},J=function(fe,Te,_e){var ve=fe.split("");return _e&&ie(ve,_e,{hiLevel:V}),ve.reverse(),Te&&Te.reverse(),ve.join("")},ie=function(fe,Te,_e){var ve,rt,nt,Tt,We,be=-1,Ce=fe.length,Be=0,le=[],Ee=V?x:w,he=[];for(O=!1,l=!1,u=!1,rt=0;rt<Ce;rt++)he[rt]=X(fe[rt]);for(nt=0;nt<Ce;nt++){if(We=Be,le[nt]=ee(fe,he,le,nt),ve=240&(Be=Ee[We][C[le[nt]]]),Be&=15,Te[nt]=Tt=Ee[Be][5],ve>0)if(ve===16){for(rt=be;rt<nt;rt++)Te[rt]=1;be=-1}else be=-1;if(Ee[Be][6])be===-1&&(be=nt);else if(be>-1){for(rt=be;rt<nt;rt++)Te[rt]=Tt;be=-1}he[nt]==="B"&&(Te[nt]=0),_e.hiLevel|=Tt}u&&function(me,Fe,Xe){for(var lt=0;lt<Xe;lt++)if(me[lt]==="S"){Fe[lt]=V;for(var Ye=lt-1;Ye>=0&&me[Ye]==="WS";Ye--)Fe[Ye]=V}}(he,Te,Ce)},ke=function(fe,Te,_e,ve,rt){if(!(rt.hiLevel<fe)){if(fe===1&&V===1&&!l)return Te.reverse(),void(_e&&_e.reverse());for(var nt,Tt,We,be,Ce=Te.length,Be=0;Be<Ce;){if(ve[Be]>=fe){for(We=Be+1;We<Ce&&ve[We]>=fe;)We++;for(be=Be,Tt=We-1;be<Tt;be++,Tt--)nt=Te[be],Te[be]=Te[Tt],Te[Tt]=nt,_e&&(nt=_e[be],_e[be]=_e[Tt],_e[Tt]=nt);Be=We}Be++}}},Le=function(fe,Te,_e){var ve=fe.split(""),rt={hiLevel:V};return _e||(_e=[]),ie(ve,_e,rt),function(nt,Tt,We){if(We.hiLevel!==0&&b)for(var be,Ce=0;Ce<nt.length;Ce++)Tt[Ce]===1&&(be=S.indexOf(nt[Ce]))>=0&&(nt[Ce]=S[be+1])}(ve,_e,rt),ke(2,ve,Te,_e,rt),ke(1,ve,Te,_e,rt),ve.join("")};return this.__bidiEngine__.doBidiReorder=function(fe,Te,_e){if(function(rt,nt){if(nt)for(var Tt=0;Tt<rt.length;Tt++)nt[Tt]=Tt;r===void 0&&(r=Z(rt)),y===void 0&&(y=Z(rt))}(fe,Te),m||!h||y)if(m&&h&&r^y)V=r?1:0,fe=J(fe,Te,_e);else if(!m&&h&&y)V=r?1:0,fe=Le(fe,Te,_e),fe=J(fe,Te);else if(!m||r||h||y){if(m&&!h&&r^y)fe=J(fe,Te),r?(V=0,fe=Le(fe,Te,_e)):(V=1,fe=Le(fe,Te,_e),fe=J(fe,Te));else if(m&&r&&!h&&y)V=1,fe=Le(fe,Te,_e),fe=J(fe,Te);else if(!m&&!h&&r^y){var ve=b;r?(V=1,fe=Le(fe,Te,_e),V=0,b=!1,fe=Le(fe,Te,_e),b=ve):(V=0,fe=Le(fe,Te,_e),fe=J(fe,Te),V=1,b=!1,fe=Le(fe,Te,_e),b=ve,fe=J(fe,Te))}}else V=0,fe=Le(fe,Te,_e);else V=r?1:0,fe=Le(fe,Te,_e);return fe},this.__bidiEngine__.setOptions=function(fe){fe&&(m=fe.isInputVisual,h=fe.isOutputVisual,r=fe.isInputRtl,y=fe.isOutputRtl,b=fe.isSymmetricSwapping)},this.__bidiEngine__.setOptions(o),this.__bidiEngine__};var e=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],t=new i.__bidiEngine__({isInputVisual:!0});i.API.events.push(["postProcessText",function(o){var l=o.text,u=(o.x,o.y,o.options||{}),m=(o.mutex,u.lang,[]);if(u.isInputVisual=typeof u.isInputVisual!="boolean"||u.isInputVisual,t.setOptions(u),Object.prototype.toString.call(l)==="[object Array]"){var r=0;for(m=[],r=0;r<l.length;r+=1)Object.prototype.toString.call(l[r])==="[object Array]"?m.push([t.doBidiReorder(l[r][0]),l[r][1],l[r][2]]):m.push([t.doBidiReorder(l[r])]);o.text=m}else o.text=t.doBidiReorder(l);t.setOptions({isInputVisual:!0})}])}(Vr),Vr.API.TTFFont=function(){function i(e){var t;if(this.rawData=e,t=this.contents=new yf(e),this.contents.pos=4,t.readString(4)==="ttcf")throw new Error("TTCF not supported.");t.pos=0,this.parse(),this.subset=new tA(this),this.registerTTF()}return i.open=function(e){return new i(e)},i.prototype.parse=function(){return this.directory=new U8(this.contents),this.head=new q8(this),this.name=new Y8(this),this.cmap=new F4(this),this.toUnicode={},this.hhea=new H8(this),this.maxp=new Z8(this),this.hmtx=new K8(this),this.post=new W8(this),this.os2=new G8(this),this.loca=new eA(this),this.glyf=new J8(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},i.prototype.registerTTF=function(){var e,t,o,l,u;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=function(){var m,r,h,y;for(y=[],m=0,r=(h=this.bbox).length;m<r;m++)e=h[m],y.push(Math.round(e*this.scaleFactor));return y}.call(this),this.stemV=0,this.post.exists?(o=255&(l=this.post.italic_angle),(32768&(t=l>>16))!=0&&(t=-(1+(65535^t))),this.italicAngle=+(t+"."+o)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(u=this.familyClass)===1||u===2||u===3||u===4||u===5||u===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},i.prototype.characterToGlyph=function(e){var t;return((t=this.cmap.unicode)!=null?t.codeMap[e]:void 0)||0},i.prototype.widthOfGlyph=function(e){var t;return t=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(e).advance*t},i.prototype.widthOfString=function(e,t,o){var l,u,m,r;for(m=0,u=0,r=(e=""+e).length;0<=r?u<r:u>r;u=0<=r?++u:--u)l=e.charCodeAt(u),m+=this.widthOfGlyph(this.characterToGlyph(l))+o*(1e3/t)||0;return m*(t/1e3)},i.prototype.lineHeight=function(e,t){var o;return t==null&&(t=!1),o=t?this.lineGap:0,(this.ascender+o-this.decender)/1e3*e},i}();var Mc,yf=function(){function i(e){this.data=e!=null?e:[],this.pos=0,this.length=this.data.length}return i.prototype.readByte=function(){return this.data[this.pos++]},i.prototype.writeByte=function(e){return this.data[this.pos++]=e},i.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},i.prototype.writeUInt32=function(e){return this.writeByte(e>>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e)},i.prototype.readInt32=function(){var e;return(e=this.readUInt32())>=2147483648?e-4294967296:e},i.prototype.writeInt32=function(e){return e<0&&(e+=4294967296),this.writeUInt32(e)},i.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},i.prototype.writeUInt16=function(e){return this.writeByte(e>>8&255),this.writeByte(255&e)},i.prototype.readInt16=function(){var e;return(e=this.readUInt16())>=32768?e-65536:e},i.prototype.writeInt16=function(e){return e<0&&(e+=65536),this.writeUInt16(e)},i.prototype.readString=function(e){var t,o;for(o=[],t=0;0<=e?t<e:t>e;t=0<=e?++t:--t)o[t]=String.fromCharCode(this.readByte());return o.join("")},i.prototype.writeString=function(e){var t,o,l;for(l=[],t=0,o=e.length;0<=o?t<o:t>o;t=0<=o?++t:--t)l.push(this.writeByte(e.charCodeAt(t)));return l},i.prototype.readShort=function(){return this.readInt16()},i.prototype.writeShort=function(e){return this.writeInt16(e)},i.prototype.readLongLong=function(){var e,t,o,l,u,m,r,h;return e=this.readByte(),t=this.readByte(),o=this.readByte(),l=this.readByte(),u=this.readByte(),m=this.readByte(),r=this.readByte(),h=this.readByte(),128&e?-1*(72057594037927940*(255^e)+281474976710656*(255^t)+1099511627776*(255^o)+4294967296*(255^l)+16777216*(255^u)+65536*(255^m)+256*(255^r)+(255^h)+1):72057594037927940*e+281474976710656*t+1099511627776*o+4294967296*l+16777216*u+65536*m+256*r+h},i.prototype.writeLongLong=function(e){var t,o;return t=Math.floor(e/4294967296),o=4294967295&e,this.writeByte(t>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t),this.writeByte(o>>24&255),this.writeByte(o>>16&255),this.writeByte(o>>8&255),this.writeByte(255&o)},i.prototype.readInt=function(){return this.readInt32()},i.prototype.writeInt=function(e){return this.writeInt32(e)},i.prototype.read=function(e){var t,o;for(t=[],o=0;0<=e?o<e:o>e;o=0<=e?++o:--o)t.push(this.readByte());return t},i.prototype.write=function(e){var t,o,l,u;for(u=[],o=0,l=e.length;o<l;o++)t=e[o],u.push(this.writeByte(t));return u},i}(),U8=function(){var i;function e(t){var o,l,u;for(this.scalarType=t.readInt(),this.tableCount=t.readShort(),this.searchRange=t.readShort(),this.entrySelector=t.readShort(),this.rangeShift=t.readShort(),this.tables={},l=0,u=this.tableCount;0<=u?l<u:l>u;l=0<=u?++l:--l)o={tag:t.readString(4),checksum:t.readInt(),offset:t.readInt(),length:t.readInt()},this.tables[o.tag]=o}return e.prototype.encode=function(t){var o,l,u,m,r,h,y,b,v,w,x,C,T;for(T in x=Object.keys(t).length,h=Math.log(2),v=16*Math.floor(Math.log(x)/h),m=Math.floor(v/h),b=16*x-v,(l=new yf).writeInt(this.scalarType),l.writeShort(x),l.writeShort(v),l.writeShort(m),l.writeShort(b),u=16*x,y=l.pos+u,r=null,C=[],t)for(w=t[T],l.writeString(T),l.writeInt(i(w)),l.writeInt(y),l.writeInt(w.length),C=C.concat(w),T==="head"&&(r=y),y+=w.length;y%4;)C.push(0),y++;return l.write(C),o=2981146554-i(l.data),l.pos=r+8,l.writeUInt32(o),l.data},i=function(t){var o,l,u,m;for(t=R4.call(t);t.length%4;)t.push(0);for(u=new yf(t),l=0,o=0,m=t.length;o<m;o=o+=4)l+=u.readUInt32();return 4294967295&l},e}(),V8={}.hasOwnProperty,ah=function(i,e){for(var t in e)V8.call(e,t)&&(i[t]=e[t]);function o(){this.constructor=i}return o.prototype=e.prototype,i.prototype=new o,i.__super__=e.prototype,i};Mc=function(){function i(e){var t;this.file=e,t=this.file.directory.tables[this.tag],this.exists=!!t,t&&(this.offset=t.offset,this.length=t.length,this.parse(this.file.contents))}return i.prototype.parse=function(){},i.prototype.encode=function(){},i.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},i}();var q8=function(i){function e(){return e.__super__.constructor.apply(this,arguments)}return ah(e,Mc),e.prototype.tag="head",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.revision=t.readInt(),this.checkSumAdjustment=t.readInt(),this.magicNumber=t.readInt(),this.flags=t.readShort(),this.unitsPerEm=t.readShort(),this.created=t.readLongLong(),this.modified=t.readLongLong(),this.xMin=t.readShort(),this.yMin=t.readShort(),this.xMax=t.readShort(),this.yMax=t.readShort(),this.macStyle=t.readShort(),this.lowestRecPPEM=t.readShort(),this.fontDirectionHint=t.readShort(),this.indexToLocFormat=t.readShort(),this.glyphDataFormat=t.readShort()},e.prototype.encode=function(t){var o;return(o=new yf).writeInt(this.version),o.writeInt(this.revision),o.writeInt(this.checkSumAdjustment),o.writeInt(this.magicNumber),o.writeShort(this.flags),o.writeShort(this.unitsPerEm),o.writeLongLong(this.created),o.writeLongLong(this.modified),o.writeShort(this.xMin),o.writeShort(this.yMin),o.writeShort(this.xMax),o.writeShort(this.yMax),o.writeShort(this.macStyle),o.writeShort(this.lowestRecPPEM),o.writeShort(this.fontDirectionHint),o.writeShort(t),o.writeShort(this.glyphDataFormat),o.data},e}(),k_=function(){function i(e,t){var o,l,u,m,r,h,y,b,v,w,x,C,T,S,M,O,V;switch(this.platformID=e.readUInt16(),this.encodingID=e.readShort(),this.offset=t+e.readInt(),v=e.pos,e.pos=this.offset,this.format=e.readUInt16(),this.length=e.readUInt16(),this.language=e.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(h=0;h<256;++h)this.codeMap[h]=e.readByte();break;case 4:for(x=e.readUInt16(),w=x/2,e.pos+=6,u=function(){var X,Z;for(Z=[],h=X=0;0<=w?X<w:X>w;h=0<=w?++X:--X)Z.push(e.readUInt16());return Z}(),e.pos+=2,T=function(){var X,Z;for(Z=[],h=X=0;0<=w?X<w:X>w;h=0<=w?++X:--X)Z.push(e.readUInt16());return Z}(),y=function(){var X,Z;for(Z=[],h=X=0;0<=w?X<w:X>w;h=0<=w?++X:--X)Z.push(e.readUInt16());return Z}(),b=function(){var X,Z;for(Z=[],h=X=0;0<=w?X<w:X>w;h=0<=w?++X:--X)Z.push(e.readUInt16());return Z}(),l=(this.length-e.pos+this.offset)/2,r=function(){var X,Z;for(Z=[],h=X=0;0<=l?X<l:X>l;h=0<=l?++X:--X)Z.push(e.readUInt16());return Z}(),h=M=0,V=u.length;M<V;h=++M)for(S=u[h],o=O=C=T[h];C<=S?O<=S:O>=S;o=C<=S?++O:--O)b[h]===0?m=o+y[h]:(m=r[b[h]/2+(o-C)-(w-h)]||0)!==0&&(m+=y[h]),this.codeMap[o]=65535&m}e.pos=v}return i.encode=function(e,t){var o,l,u,m,r,h,y,b,v,w,x,C,T,S,M,O,V,X,Z,ee,J,ie,ke,Le,fe,Te,_e,ve,rt,nt,Tt,We,be,Ce,Be,le,Ee,he,me,Fe,Xe,lt,Ye,Ke,Lt,$t;switch(ve=new yf,m=Object.keys(e).sort(function(dt,wt){return dt-wt}),t){case"macroman":for(T=0,S=function(){var dt=[];for(C=0;C<256;++C)dt.push(0);return dt}(),O={0:0},u={},rt=0,be=m.length;rt<be;rt++)O[Ye=e[l=m[rt]]]==null&&(O[Ye]=++T),u[l]={old:e[l],new:O[e[l]]},S[l]=O[e[l]];return ve.writeUInt16(1),ve.writeUInt16(0),ve.writeUInt32(12),ve.writeUInt16(0),ve.writeUInt16(262),ve.writeUInt16(0),ve.write(S),{charMap:u,subtable:ve.data,maxGlyphID:T+1};case"unicode":for(Te=[],v=[],V=0,O={},o={},M=y=null,nt=0,Ce=m.length;nt<Ce;nt++)O[Z=e[l=m[nt]]]==null&&(O[Z]=++V),o[l]={old:Z,new:O[Z]},r=O[Z]-l,M!=null&&r===y||(M&&v.push(M),Te.push(l),y=r),M=l;for(M&&v.push(M),v.push(65535),Te.push(65535),Le=2*(ke=Te.length),ie=2*Math.pow(Math.log(ke)/Math.LN2,2),w=Math.log(ie/2)/Math.LN2,J=2*ke-ie,h=[],ee=[],x=[],C=Tt=0,Be=Te.length;Tt<Be;C=++Tt){if(fe=Te[C],b=v[C],fe===65535){h.push(0),ee.push(0);break}if(fe-(_e=o[fe].new)>=32768)for(h.push(0),ee.push(2*(x.length+ke-C)),l=We=fe;fe<=b?We<=b:We>=b;l=fe<=b?++We:--We)x.push(o[l].new);else h.push(_e-fe),ee.push(0)}for(ve.writeUInt16(3),ve.writeUInt16(1),ve.writeUInt32(12),ve.writeUInt16(4),ve.writeUInt16(16+8*ke+2*x.length),ve.writeUInt16(0),ve.writeUInt16(Le),ve.writeUInt16(ie),ve.writeUInt16(w),ve.writeUInt16(J),Xe=0,le=v.length;Xe<le;Xe++)l=v[Xe],ve.writeUInt16(l);for(ve.writeUInt16(0),lt=0,Ee=Te.length;lt<Ee;lt++)l=Te[lt],ve.writeUInt16(l);for(Ke=0,he=h.length;Ke<he;Ke++)r=h[Ke],ve.writeUInt16(r);for(Lt=0,me=ee.length;Lt<me;Lt++)X=ee[Lt],ve.writeUInt16(X);for($t=0,Fe=x.length;$t<Fe;$t++)T=x[$t],ve.writeUInt16(T);return{charMap:o,subtable:ve.data,maxGlyphID:V+1}}},i}(),F4=function(i){function e(){return e.__super__.constructor.apply(this,arguments)}return ah(e,Mc),e.prototype.tag="cmap",e.prototype.parse=function(t){var o,l,u;for(t.pos=this.offset,this.version=t.readUInt16(),u=t.readUInt16(),this.tables=[],this.unicode=null,l=0;0<=u?l<u:l>u;l=0<=u?++l:--l)o=new k_(t,this.offset),this.tables.push(o),o.isUnicode&&this.unicode==null&&(this.unicode=o);return!0},e.encode=function(t,o){var l,u;return o==null&&(o="macroman"),l=k_.encode(t,o),(u=new yf).writeUInt16(0),u.writeUInt16(1),l.table=u.data.concat(l.subtable),l},e}(),H8=function(i){function e(){return e.__super__.constructor.apply(this,arguments)}return ah(e,Mc),e.prototype.tag="hhea",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.ascender=t.readShort(),this.decender=t.readShort(),this.lineGap=t.readShort(),this.advanceWidthMax=t.readShort(),this.minLeftSideBearing=t.readShort(),this.minRightSideBearing=t.readShort(),this.xMaxExtent=t.readShort(),this.caretSlopeRise=t.readShort(),this.caretSlopeRun=t.readShort(),this.caretOffset=t.readShort(),t.pos+=8,this.metricDataFormat=t.readShort(),this.numberOfMetrics=t.readUInt16()},e}(),G8=function(i){function e(){return e.__super__.constructor.apply(this,arguments)}return ah(e,Mc),e.prototype.tag="OS/2",e.prototype.parse=function(t){if(t.pos=this.offset,this.version=t.readUInt16(),this.averageCharWidth=t.readShort(),this.weightClass=t.readUInt16(),this.widthClass=t.readUInt16(),this.type=t.readShort(),this.ySubscriptXSize=t.readShort(),this.ySubscriptYSize=t.readShort(),this.ySubscriptXOffset=t.readShort(),this.ySubscriptYOffset=t.readShort(),this.ySuperscriptXSize=t.readShort(),this.ySuperscriptYSize=t.readShort(),this.ySuperscriptXOffset=t.readShort(),this.ySuperscriptYOffset=t.readShort(),this.yStrikeoutSize=t.readShort(),this.yStrikeoutPosition=t.readShort(),this.familyClass=t.readShort(),this.panose=function(){var o,l;for(l=[],o=0;o<10;++o)l.push(t.readByte());return l}(),this.charRange=function(){var o,l;for(l=[],o=0;o<4;++o)l.push(t.readInt());return l}(),this.vendorID=t.readString(4),this.selection=t.readShort(),this.firstCharIndex=t.readShort(),this.lastCharIndex=t.readShort(),this.version>0&&(this.ascent=t.readShort(),this.descent=t.readShort(),this.lineGap=t.readShort(),this.winAscent=t.readShort(),this.winDescent=t.readShort(),this.codePageRange=function(){var o,l;for(l=[],o=0;o<2;o=++o)l.push(t.readInt());return l}(),this.version>1))return this.xHeight=t.readShort(),this.capHeight=t.readShort(),this.defaultChar=t.readShort(),this.breakChar=t.readShort(),this.maxContext=t.readShort()},e}(),W8=function(i){function e(){return e.__super__.constructor.apply(this,arguments)}return ah(e,Mc),e.prototype.tag="post",e.prototype.parse=function(t){var o,l,u;switch(t.pos=this.offset,this.format=t.readInt(),this.italicAngle=t.readInt(),this.underlinePosition=t.readShort(),this.underlineThickness=t.readShort(),this.isFixedPitch=t.readInt(),this.minMemType42=t.readInt(),this.maxMemType42=t.readInt(),this.minMemType1=t.readInt(),this.maxMemType1=t.readInt(),this.format){case 65536:break;case 131072:var m;for(l=t.readUInt16(),this.glyphNameIndex=[],m=0;0<=l?m<l:m>l;m=0<=l?++m:--m)this.glyphNameIndex.push(t.readUInt16());for(this.names=[],u=[];t.pos<this.offset+this.length;)o=t.readByte(),u.push(this.names.push(t.readString(o)));return u;case 151552:return l=t.readUInt16(),this.offsets=t.read(l);case 196608:break;case 262144:return this.map=function(){var r,h,y;for(y=[],m=r=0,h=this.file.maxp.numGlyphs;0<=h?r<h:r>h;m=0<=h?++r:--r)y.push(t.readUInt32());return y}.call(this)}},e}(),X8=function(i,e){this.raw=i,this.length=i.length,this.platformID=e.platformID,this.encodingID=e.encodingID,this.languageID=e.languageID},Y8=function(i){function e(){return e.__super__.constructor.apply(this,arguments)}return ah(e,Mc),e.prototype.tag="name",e.prototype.parse=function(t){var o,l,u,m,r,h,y,b,v,w,x;for(t.pos=this.offset,t.readShort(),o=t.readShort(),h=t.readShort(),l=[],m=0;0<=o?m<o:m>o;m=0<=o?++m:--m)l.push({platformID:t.readShort(),encodingID:t.readShort(),languageID:t.readShort(),nameID:t.readShort(),length:t.readShort(),offset:this.offset+h+t.readShort()});for(y={},m=v=0,w=l.length;v<w;m=++v)u=l[m],t.pos=u.offset,b=t.readString(u.length),r=new X8(b,u),y[x=u.nameID]==null&&(y[x]=[]),y[u.nameID].push(r);this.strings=y,this.copyright=y[0],this.fontFamily=y[1],this.fontSubfamily=y[2],this.uniqueSubfamily=y[3],this.fontName=y[4],this.version=y[5];try{this.postscriptName=y[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=y[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=y[7],this.manufacturer=y[8],this.designer=y[9],this.description=y[10],this.vendorUrl=y[11],this.designerUrl=y[12],this.license=y[13],this.licenseUrl=y[14],this.preferredFamily=y[15],this.preferredSubfamily=y[17],this.compatibleFull=y[18],this.sampleText=y[19]},e}(),Z8=function(i){function e(){return e.__super__.constructor.apply(this,arguments)}return ah(e,Mc),e.prototype.tag="maxp",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.numGlyphs=t.readUInt16(),this.maxPoints=t.readUInt16(),this.maxContours=t.readUInt16(),this.maxCompositePoints=t.readUInt16(),this.maxComponentContours=t.readUInt16(),this.maxZones=t.readUInt16(),this.maxTwilightPoints=t.readUInt16(),this.maxStorage=t.readUInt16(),this.maxFunctionDefs=t.readUInt16(),this.maxInstructionDefs=t.readUInt16(),this.maxStackElements=t.readUInt16(),this.maxSizeOfInstructions=t.readUInt16(),this.maxComponentElements=t.readUInt16(),this.maxComponentDepth=t.readUInt16()},e}(),K8=function(i){function e(){return e.__super__.constructor.apply(this,arguments)}return ah(e,Mc),e.prototype.tag="hmtx",e.prototype.parse=function(t){var o,l,u,m,r,h,y;for(t.pos=this.offset,this.metrics=[],o=0,h=this.file.hhea.numberOfMetrics;0<=h?o<h:o>h;o=0<=h?++o:--o)this.metrics.push({advance:t.readUInt16(),lsb:t.readInt16()});for(u=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var b,v;for(v=[],o=b=0;0<=u?b<u:b>u;o=0<=u?++b:--b)v.push(t.readInt16());return v}(),this.widths=function(){var b,v,w,x;for(x=[],b=0,v=(w=this.metrics).length;b<v;b++)m=w[b],x.push(m.advance);return x}.call(this),l=this.widths[this.widths.length-1],y=[],o=r=0;0<=u?r<u:r>u;o=0<=u?++r:--r)y.push(this.widths.push(l));return y},e.prototype.forGlyph=function(t){return t in this.metrics?this.metrics[t]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[t-this.metrics.length]}},e}(),R4=[].slice,J8=function(i){function e(){return e.__super__.constructor.apply(this,arguments)}return ah(e,Mc),e.prototype.tag="glyf",e.prototype.parse=function(){return this.cache={}},e.prototype.glyphFor=function(t){var o,l,u,m,r,h,y,b,v,w;return t in this.cache?this.cache[t]:(m=this.file.loca,o=this.file.contents,l=m.indexOf(t),(u=m.lengthOf(t))===0?this.cache[t]=null:(o.pos=this.offset+l,r=(h=new yf(o.read(u))).readShort(),b=h.readShort(),w=h.readShort(),y=h.readShort(),v=h.readShort(),this.cache[t]=r===-1?new $8(h,b,w,y,v):new Q8(h,r,b,w,y,v),this.cache[t]))},e.prototype.encode=function(t,o,l){var u,m,r,h,y;for(r=[],m=[],h=0,y=o.length;h<y;h++)u=t[o[h]],m.push(r.length),u&&(r=r.concat(u.encode(l)));return m.push(r.length),{table:r,offsets:m}},e}(),Q8=function(){function i(e,t,o,l,u,m){this.raw=e,this.numberOfContours=t,this.xMin=o,this.yMin=l,this.xMax=u,this.yMax=m,this.compound=!1}return i.prototype.encode=function(){return this.raw.data},i}(),$8=function(){function i(e,t,o,l,u){var m,r;for(this.raw=e,this.xMin=t,this.yMin=o,this.xMax=l,this.yMax=u,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],m=this.raw;r=m.readShort(),this.glyphOffsets.push(m.pos),this.glyphIDs.push(m.readUInt16()),32&r;)m.pos+=1&r?4:2,128&r?m.pos+=8:64&r?m.pos+=4:8&r&&(m.pos+=2)}return i.prototype.encode=function(){var e,t,o;for(t=new yf(R4.call(this.raw.data)),e=0,o=this.glyphIDs.length;e<o;++e)t.pos=this.glyphOffsets[e];return t.data},i}(),eA=function(i){function e(){return e.__super__.constructor.apply(this,arguments)}return ah(e,Mc),e.prototype.tag="loca",e.prototype.parse=function(t){var o,l;return t.pos=this.offset,o=this.file.head.indexToLocFormat,this.offsets=o===0?function(){var u,m;for(m=[],l=0,u=this.length;l<u;l+=2)m.push(2*t.readUInt16());return m}.call(this):function(){var u,m;for(m=[],l=0,u=this.length;l<u;l+=4)m.push(t.readUInt32());return m}.call(this)},e.prototype.indexOf=function(t){return this.offsets[t]},e.prototype.lengthOf=function(t){return this.offsets[t+1]-this.offsets[t]},e.prototype.encode=function(t,o){for(var l=new Uint32Array(this.offsets.length),u=0,m=0,r=0;r<l.length;++r)if(l[r]=u,m<o.length&&o[m]==r){++m,l[r]=u;var h=this.offsets[r],y=this.offsets[r+1]-h;y>0&&(u+=y)}for(var b=new Array(4*l.length),v=0;v<l.length;++v)b[4*v+3]=255&l[v],b[4*v+2]=(65280&l[v])>>8,b[4*v+1]=(16711680&l[v])>>16,b[4*v]=(4278190080&l[v])>>24;return b},e}(),tA=function(){function i(e){this.font=e,this.subset={},this.unicodes={},this.next=33}return i.prototype.generateCmap=function(){var e,t,o,l,u;for(t in l=this.font.cmap.tables[0].codeMap,e={},u=this.subset)o=u[t],e[t]=l[o];return e},i.prototype.glyphsFor=function(e){var t,o,l,u,m,r,h;for(l={},m=0,r=e.length;m<r;m++)l[u=e[m]]=this.font.glyf.glyphFor(u);for(u in t=[],l)(o=l[u])!=null&&o.compound&&t.push.apply(t,o.glyphIDs);if(t.length>0)for(u in h=this.glyphsFor(t))o=h[u],l[u]=o;return l},i.prototype.encode=function(e,t){var o,l,u,m,r,h,y,b,v,w,x,C,T,S,M;for(l in o=F4.encode(this.generateCmap(),"unicode"),m=this.glyphsFor(e),x={0:0},M=o.charMap)x[(h=M[l]).old]=h.new;for(C in w=o.maxGlyphID,m)C in x||(x[C]=w++);return b=function(O){var V,X;for(V in X={},O)X[O[V]]=V;return X}(x),v=Object.keys(b).sort(function(O,V){return O-V}),T=function(){var O,V,X;for(X=[],O=0,V=v.length;O<V;O++)r=v[O],X.push(b[r]);return X}(),u=this.font.glyf.encode(m,T,x),y=this.font.loca.encode(u.offsets,T),S={cmap:this.font.cmap.raw(),glyf:u.table,loca:y,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(t)},this.font.os2.exists&&(S["OS/2"]=this.font.os2.raw()),this.font.directory.encode(S)},i}();Vr.API.PDFObject=function(){var i;function e(){}return i=function(t,o){return(Array(o+1).join("0")+t).slice(-o)},e.convert=function(t){var o,l,u,m;if(Array.isArray(t))return"["+function(){var r,h,y;for(y=[],r=0,h=t.length;r<h;r++)o=t[r],y.push(e.convert(o));return y}().join(" ")+"]";if(typeof t=="string")return"/"+t;if(t!=null&&t.isString)return"("+t+")";if(t instanceof Date)return"(D:"+i(t.getUTCFullYear(),4)+i(t.getUTCMonth(),2)+i(t.getUTCDate(),2)+i(t.getUTCHours(),2)+i(t.getUTCMinutes(),2)+i(t.getUTCSeconds(),2)+"Z)";if({}.toString.call(t)==="[object Object]"){for(l in u=["<<"],t)m=t[l],u.push("/"+l+" "+e.convert(m));return u.push(">>"),u.join(`
`)}return""+t},e}();var O0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function iA(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}function nA(i){var e=i.default;if(typeof e=="function"){var t=function(){return e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(i).forEach(function(o){var l=Object.getOwnPropertyDescriptor(i,o);Object.defineProperty(t,o,l.get?l:{enumerable:!0,get:function(){return i[o]}})}),t}var B4={exports:{}};(function(i,e){(function(t,o){o()})(O0,function(){function t(y,b){return typeof b>"u"?b={autoBom:!1}:typeof b!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),b={autoBom:!b}),b.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(y.type)?new Blob(["\uFEFF",y],{type:y.type}):y}function o(y,b,v){var w=new XMLHttpRequest;w.open("GET",y),w.responseType="blob",w.onload=function(){h(w.response,b,v)},w.onerror=function(){console.error("could not download file")},w.send()}function l(y){var b=new XMLHttpRequest;b.open("HEAD",y,!1);try{b.send()}catch{}return 200<=b.status&&299>=b.status}function u(y){try{y.dispatchEvent(new MouseEvent("click"))}catch{var b=document.createEvent("MouseEvents");b.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),y.dispatchEvent(b)}}var m=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof O0=="object"&&O0.global===O0?O0:void 0,r=m.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),h=m.saveAs||(typeof window!="object"||window!==m?function(){}:"download"in HTMLAnchorElement.prototype&&!r?function(y,b,v){var w=m.URL||m.webkitURL,x=document.createElement("a");b=b||y.name||"download",x.download=b,x.rel="noopener",typeof y=="string"?(x.href=y,x.origin===location.origin?u(x):l(x.href)?o(y,b,v):u(x,x.target="_blank")):(x.href=w.createObjectURL(y),setTimeout(function(){w.revokeObjectURL(x.href)},4e4),setTimeout(function(){u(x)},0))}:"msSaveOrOpenBlob"in navigator?function(y,b,v){if(b=b||y.name||"download",typeof y!="string")navigator.msSaveOrOpenBlob(t(y,v),b);else if(l(y))o(y,b,v);else{var w=document.createElement("a");w.href=y,w.target="_blank",setTimeout(function(){u(w)})}}:function(y,b,v,w){if(w=w||open("","_blank"),w&&(w.document.title=w.document.body.innerText="downloading..."),typeof y=="string")return o(y,b,v);var x=y.type==="application/octet-stream",C=/constructor/i.test(m.HTMLElement)||m.safari,T=/CriOS\/[\d]+/.test(navigator.userAgent);if((T||x&&C||r)&&typeof FileReader<"u"){var S=new FileReader;S.onloadend=function(){var V=S.result;V=T?V:V.replace(/^data:[^;]*;/,"data:attachment/file;"),w?w.location.href=V:location=V,w=null},S.readAsDataURL(y)}else{var M=m.URL||m.webkitURL,O=M.createObjectURL(y);w?w.location=O:location.href=O,w=null,setTimeout(function(){M.revokeObjectURL(O)},4e4)}});m.saveAs=h.saveAs=h,i.exports=h})})(B4);var Lu={exports:{}};(function(i,e){(function(t,o){i.exports=o()})(O0,function(){var t,o,l;function u(r,h){if(!t)t=h;else if(!o)o=h;else{var y="var sharedChunk = {}; ("+t+")(sharedChunk); ("+o+")(sharedChunk);",b={};t(b),l=h(b),typeof window<"u"&&(l.workerUrl=window.URL.createObjectURL(new Blob([y],{type:"text/javascript"})))}}u(["exports"],function(r){var h=y;function y(_,f,A,P){this.cx=3*_,this.bx=3*(A-_)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*f,this.by=3*(P-f)-this.cy,this.ay=1-this.cy-this.by,this.p1x=_,this.p1y=f,this.p2x=A,this.p2y=P}function b(_,f,A,P){const N=new h(_,f,A,P);return function(q){return N.solve(q)}}y.prototype={sampleCurveX:function(_){return((this.ax*_+this.bx)*_+this.cx)*_},sampleCurveY:function(_){return((this.ay*_+this.by)*_+this.cy)*_},sampleCurveDerivativeX:function(_){return(3*this.ax*_+2*this.bx)*_+this.cx},solveCurveX:function(_,f){if(f===void 0&&(f=1e-6),_<0)return 0;if(_>1)return 1;for(var A=_,P=0;P<8;P++){var N=this.sampleCurveX(A)-_;if(Math.abs(N)<f)return A;var q=this.sampleCurveDerivativeX(A);if(Math.abs(q)<1e-6)break;A-=N/q}var Y=0,oe=1;for(A=_,P=0;P<20&&(N=this.sampleCurveX(A),!(Math.abs(N-_)<f));P++)_>N?Y=A:oe=A,A=.5*(oe-Y)+Y;return A},solve:function(_,f){return this.sampleCurveY(this.solveCurveX(_,f))}};const v=b(.25,.1,.25,1);function w(_,f,A){return Math.min(A,Math.max(f,_))}function x(_,f,A){const P=A-f,N=((_-f)%P+P)%P+f;return N===f?A:N}function C(_,...f){for(const A of f)for(const P in A)_[P]=A[P];return _}let T=1;function S(_,f){_.forEach(A=>{f[A]&&(f[A]=f[A].bind(f))})}function M(_,f,A){const P={};for(const N in _)P[N]=f.call(A||this,_[N],N,_);return P}function O(_,f,A){const P={};for(const N in _)f.call(A||this,_[N],N,_)&&(P[N]=_[N]);return P}function V(_){return Array.isArray(_)?_.map(V):typeof _=="object"&&_?M(_,V):_}const X={};function Z(_){X[_]||(typeof console<"u"&&console.warn(_),X[_]=!0)}function ee(_,f,A){return(A.y-_.y)*(f.x-_.x)>(f.y-_.y)*(A.x-_.x)}function J(_){let f=0;for(let A,P,N=0,q=_.length,Y=q-1;N<q;Y=N++)A=_[N],P=_[Y],f+=(P.x-A.x)*(A.y+P.y);return f}function ie(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function ke(_){const f={};if(_.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(A,P,N,q)=>{const Y=N||q;return f[P]=!Y||Y.toLowerCase(),""}),f["max-age"]){const A=parseInt(f["max-age"],10);isNaN(A)?delete f["max-age"]:f["max-age"]=A}return f}let Le,fe,Te=null;function _e(_){if(Te==null){const f=_.navigator?_.navigator.userAgent:null;Te=!!_.safari||!(!f||!(/\b(iPad|iPhone|iPod)\b/.test(f)||f.match("Safari")&&!f.match("Chrome")))}return Te}function ve(_){return typeof ImageBitmap<"u"&&_ instanceof ImageBitmap}const rt={now:typeof performance<"u"&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),frame(_){const f=requestAnimationFrame(_);return{cancel:()=>cancelAnimationFrame(f)}},getImageData(_,f=0){const A=window.document.createElement("canvas"),P=A.getContext("2d");if(!P)throw new Error("failed to create canvas 2d context");return A.width=_.width,A.height=_.height,P.drawImage(_,0,0,_.width,_.height),P.getImageData(-f,-f,_.width+2*f,_.height+2*f)},resolveURL:_=>(Le||(Le=document.createElement("a")),Le.href=_,Le.href),hardwareConcurrency:typeof navigator<"u"&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return!!matchMedia&&(fe==null&&(fe=matchMedia("(prefers-reduced-motion: reduce)")),fe.matches)}};var nt=Tt;function Tt(_,f){this.x=_,this.y=f}Tt.prototype={clone:function(){return new Tt(this.x,this.y)},add:function(_){return this.clone()._add(_)},sub:function(_){return this.clone()._sub(_)},multByPoint:function(_){return this.clone()._multByPoint(_)},divByPoint:function(_){return this.clone()._divByPoint(_)},mult:function(_){return this.clone()._mult(_)},div:function(_){return this.clone()._div(_)},rotate:function(_){return this.clone()._rotate(_)},rotateAround:function(_,f){return this.clone()._rotateAround(_,f)},matMult:function(_){return this.clone()._matMult(_)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(_){return this.x===_.x&&this.y===_.y},dist:function(_){return Math.sqrt(this.distSqr(_))},distSqr:function(_){var f=_.x-this.x,A=_.y-this.y;return f*f+A*A},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(_){return Math.atan2(this.y-_.y,this.x-_.x)},angleWith:function(_){return this.angleWithSep(_.x,_.y)},angleWithSep:function(_,f){return Math.atan2(this.x*f-this.y*_,this.x*_+this.y*f)},_matMult:function(_){var f=_[2]*this.x+_[3]*this.y;return this.x=_[0]*this.x+_[1]*this.y,this.y=f,this},_add:function(_){return this.x+=_.x,this.y+=_.y,this},_sub:function(_){return this.x-=_.x,this.y-=_.y,this},_mult:function(_){return this.x*=_,this.y*=_,this},_div:function(_){return this.x/=_,this.y/=_,this},_multByPoint:function(_){return this.x*=_.x,this.y*=_.y,this},_divByPoint:function(_){return this.x/=_.x,this.y/=_.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var _=this.y;return this.y=this.x,this.x=-_,this},_rotate:function(_){var f=Math.cos(_),A=Math.sin(_),P=A*this.x+f*this.y;return this.x=f*this.x-A*this.y,this.y=P,this},_rotateAround:function(_,f){var A=Math.cos(_),P=Math.sin(_),N=f.y+P*(this.x-f.x)+A*(this.y-f.y);return this.x=f.x+A*(this.x-f.x)-P*(this.y-f.y),this.y=N,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},Tt.convert=function(_){return _ instanceof Tt?_:Array.isArray(_)?new Tt(_[0],_[1]):_};const We={MAX_PARALLEL_IMAGE_REQUESTS:16,REGISTERED_PROTOCOLS:{}},be="mapbox-tiles";let Ce,Be,le=500,Ee=50;function he(){typeof caches>"u"||Ce||(Ce=caches.open(be))}let me=1/0;const Fe={supported:!1,testSupport:function(_){!Ye&&lt&&(Ke?Lt(_):Xe=_)}};let Xe,lt,Ye=!1,Ke=!1;function Lt(_){const f=_.createTexture();_.bindTexture(_.TEXTURE_2D,f);try{if(_.texImage2D(_.TEXTURE_2D,0,_.RGBA,_.RGBA,_.UNSIGNED_BYTE,lt),_.isContextLost())return;Fe.supported=!0}catch{}_.deleteTexture(f),Ye=!0}typeof document<"u"&&(lt=document.createElement("img"),lt.onload=function(){Xe&&Lt(Xe),Xe=null,Ke=!0},lt.onerror=function(){Ye=!0,Xe=null},lt.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");const $t={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};typeof Object.freeze=="function"&&Object.freeze($t);class dt extends Error{constructor(f,A,P,N){super(`AJAXError: ${A} (${f}): ${P}`),this.status=f,this.statusText=A,this.url=P,this.body=N}}const wt=ie()?()=>self.worker&&self.worker.referrer:()=>(window.location.protocol==="blob:"?window.parent:window).location.href;function bt(_,f){const A=new AbortController,P=new Request(_.url,{method:_.method||"GET",body:_.body,credentials:_.credentials,headers:_.headers,referrer:wt(),signal:A.signal});let N=!1,q=!1;return _.type==="json"&&P.headers.set("Accept","application/json"),((Y,oe,de)=>{if(q)return;const xe=Date.now();fetch(P).then(Re=>Re.ok?((Ve,it,ut)=>{(_.type==="arrayBuffer"?Ve.arrayBuffer():_.type==="json"?Ve.json():Ve.text()).then(ht=>{q||(it&&ut&&function(Gt,Ut,vi){if(he(),!Ce)return;const Fi={status:Ut.status,statusText:Ut.statusText,headers:new Headers};Ut.headers.forEach((Ti,rn)=>Fi.headers.set(rn,Ti));const gi=ke(Ut.headers.get("Cache-Control")||"");gi["no-store"]||(gi["max-age"]&&Fi.headers.set("Expires",new Date(vi+1e3*gi["max-age"]).toUTCString()),new Date(Fi.headers.get("Expires")).getTime()-vi<42e4||function(Ti,rn){if(Be===void 0)try{new Response(new ReadableStream),Be=!0}catch{Be=!1}Be?rn(Ti.body):Ti.blob().then(rn)}(Ut,Ti=>{const rn=new Response(Ti,Fi);he(),Ce&&Ce.then(nn=>nn.put(function(Kn){const nr=Kn.indexOf("?");return nr<0?Kn:Kn.slice(0,nr)}(Gt.url),rn)).catch(nn=>Z(nn.message))}))}(P,it,ut),N=!0,f(null,ht,Ve.headers.get("Cache-Control"),Ve.headers.get("Expires")))}).catch(ht=>{q||f(new Error(ht.message))})})(Re,null,xe):Re.blob().then(Ve=>f(new dt(Re.status,Re.statusText,_.url,Ve)))).catch(Re=>{Re.code!==20&&f(new Error(Re.message))})})(),{cancel:()=>{q=!0,N||A.abort()}}}const $e=function(_,f){if(/:\/\//.test(_.url)&&!/^https?:|^file:/.test(_.url)){if(ie()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",_,f);if(!ie()){const P=_.url.substring(0,_.url.indexOf("://"));return(We.REGISTERED_PROTOCOLS[P]||bt)(_,f)}}if(!(/^file:/.test(A=_.url)||/^file:/.test(wt())&&!/^\w+:/.test(A))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return bt(_,f);if(ie()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",_,f,void 0,!0)}var A;return function(P,N){const q=new XMLHttpRequest;q.open(P.method||"GET",P.url,!0),P.type==="arrayBuffer"&&(q.responseType="arraybuffer");for(const Y in P.headers)q.setRequestHeader(Y,P.headers[Y]);return P.type==="json"&&(q.responseType="text",q.setRequestHeader("Accept","application/json")),q.withCredentials=P.credentials==="include",q.onerror=()=>{N(new Error(q.statusText))},q.onload=()=>{if((q.status>=200&&q.status<300||q.status===0)&&q.response!==null){let Y=q.response;if(P.type==="json")try{Y=JSON.parse(q.response)}catch(oe){return N(oe)}N(null,Y,q.getResponseHeader("Cache-Control"),q.getResponseHeader("Expires"))}else{const Y=new Blob([q.response],{type:q.getResponseHeader("Content-Type")});N(new dt(q.status,q.statusText,P.url,Y))}},q.send(P.body),{cancel:()=>q.abort()}}(_,f)},Yt=function(_,f){return $e(C(_,{type:"arrayBuffer"}),f)};function li(_){const f=window.document.createElement("a");return f.href=_,f.protocol===window.document.location.protocol&&f.host===window.document.location.host}const Zt="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";let Ci,Li;Ci=[],Li=0;const Vt=function(_,f){if(Fe.supported&&(_.headers||(_.headers={}),_.headers.accept="image/webp,*/*"),Li>=We.MAX_PARALLEL_IMAGE_REQUESTS){const q={requestParameters:_,callback:f,cancelled:!1,cancel(){this.cancelled=!0}};return Ci.push(q),q}Li++;let A=!1;const P=()=>{if(!A)for(A=!0,Li--;Ci.length&&Li<We.MAX_PARALLEL_IMAGE_REQUESTS;){const q=Ci.shift(),{requestParameters:Y,callback:oe,cancelled:de}=q;de||(q.cancel=Vt(Y,oe).cancel)}},N=Yt(_,(q,Y,oe,de)=>{P(),q?f(q):Y&&function(xe,Re){typeof createImageBitmap=="function"?function(Ve,it){const ut=new Blob([new Uint8Array(Ve)],{type:"image/png"});createImageBitmap(ut).then(ht=>{it(null,ht)}).catch(ht=>{it(new Error(`Could not load image because of ${ht.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`))})}(xe,Re):function(Ve,it){const ut=new Image;ut.onload=()=>{it(null,ut),URL.revokeObjectURL(ut.src),ut.onload=null,window.requestAnimationFrame(()=>{ut.src=Zt})},ut.onerror=()=>it(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const ht=new Blob([new Uint8Array(Ve)],{type:"image/png"});ut.src=Ve.byteLength?URL.createObjectURL(ht):Zt}(xe,Re)}(Y,(xe,Re)=>{xe!=null?f(xe):Re!=null&&f(null,Re,{cacheControl:oe,expires:de})})});return{cancel:()=>{N.cancel(),P()}}};function mi(_,f,A){A[_]&&A[_].indexOf(f)!==-1||(A[_]=A[_]||[],A[_].push(f))}function Qi(_,f,A){if(A&&A[_]){const P=A[_].indexOf(f);P!==-1&&A[_].splice(P,1)}}class xi{constructor(f,A={}){C(this,A),this.type=f}}class Jt extends xi{constructor(f,A={}){super("error",C({error:f},A))}}class Me{on(f,A){return this._listeners=this._listeners||{},mi(f,A,this._listeners),this}off(f,A){return Qi(f,A,this._listeners),Qi(f,A,this._oneTimeListeners),this}once(f,A){return this._oneTimeListeners=this._oneTimeListeners||{},mi(f,A,this._oneTimeListeners),this}fire(f,A){typeof f=="string"&&(f=new xi(f,A||{}));const P=f.type;if(this.listens(P)){f.target=this;const N=this._listeners&&this._listeners[P]?this._listeners[P].slice():[];for(const oe of N)oe.call(this,f);const q=this._oneTimeListeners&&this._oneTimeListeners[P]?this._oneTimeListeners[P].slice():[];for(const oe of q)Qi(P,oe,this._oneTimeListeners),oe.call(this,f);const Y=this._eventedParent;Y&&(C(f,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),Y.fire(f))}else f instanceof Jt&&console.error(f.error);return this}listens(f){return this._listeners&&this._listeners[f]&&this._listeners[f].length>0||this._oneTimeListeners&&this._oneTimeListeners[f]&&this._oneTimeListeners[f].length>0||this._eventedParent&&this._eventedParent.listens(f)}setEventedParent(f,A){return this._eventedParent=f,this._eventedParentData=A,this}}var Q={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1},elevationOffset:{type:"number",default:450}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};class ae{constructor(f,A,P,N){this.message=(f?`${f}: `:"")+P,N&&(this.identifier=N),A!=null&&A.__line__&&(this.line=A.__line__)}}function et(_){const f=_.value;return f?[new ae(_.key,f,"constants have been deprecated as of v8")]:[]}function vt(_,...f){for(const A of f)for(const P in A)_[P]=A[P];return _}function Wt(_){return _ instanceof Number||_ instanceof String||_ instanceof Boolean?_.valueOf():_}function di(_){if(Array.isArray(_))return _.map(di);if(_ instanceof Object&&!(_ instanceof Number||_ instanceof String||_ instanceof Boolean)){const f={};for(const A in _)f[A]=di(_[A]);return f}return Wt(_)}class xn extends Error{constructor(f,A){super(A),this.message=A,this.key=f}}class Mn{constructor(f,A=[]){this.parent=f,this.bindings={};for(const[P,N]of A)this.bindings[P]=N}concat(f){return new Mn(this,f)}get(f){if(this.bindings[f])return this.bindings[f];if(this.parent)return this.parent.get(f);throw new Error(`${f} not found in scope.`)}has(f){return!!this.bindings[f]||!!this.parent&&this.parent.has(f)}}const fn={kind:"null"},Bi={kind:"number"},en={kind:"string"},Xn={kind:"boolean"},Yn={kind:"color"},Kr={kind:"object"},jn={kind:"value"},cn={kind:"collator"},mn={kind:"formatted"},er={kind:"padding"},yn={kind:"resolvedImage"};function Ln(_,f){return{kind:"array",itemType:_,N:f}}function lr(_){if(_.kind==="array"){const f=lr(_.itemType);return typeof _.N=="number"?`array<${f}, ${_.N}>`:_.itemType.kind==="value"?"array":`array<${f}>`}return _.kind}const oo=[fn,Bi,en,Xn,Yn,mn,Kr,Ln(jn),er,yn];function ln(_,f){if(f.kind==="error")return null;if(_.kind==="array"){if(f.kind==="array"&&(f.N===0&&f.itemType.kind==="value"||!ln(_.itemType,f.itemType))&&(typeof _.N!="number"||_.N===f.N))return null}else{if(_.kind===f.kind)return null;if(_.kind==="value"){for(const A of oo)if(!ln(A,f))return null}}return`Expected ${lr(_)} but found ${lr(f)} instead.`}function qe(_,f){return f.some(A=>A.kind===_.kind)}function To(_,f){return f.some(A=>A==="null"?_===null:A==="array"?Array.isArray(_):A==="object"?_&&!Array.isArray(_)&&typeof _=="object":A===typeof _)}var bo,co={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function Pe(_){return(_=Math.round(_))<0?0:_>255?255:_}function Ie(_){return Pe(_[_.length-1]==="%"?parseFloat(_)/100*255:parseInt(_))}function He(_){return(f=_[_.length-1]==="%"?parseFloat(_)/100:parseFloat(_))<0?0:f>1?1:f;var f}function ct(_,f,A){return A<0?A+=1:A>1&&(A-=1),6*A<1?_+(f-_)*A*6:2*A<1?f:3*A<2?_+(f-_)*(2/3-A)*6:_}try{bo={}.parseCSSColor=function(_){var f,A=_.replace(/ /g,"").toLowerCase();if(A in co)return co[A].slice();if(A[0]==="#")return A.length===4?(f=parseInt(A.substr(1),16))>=0&&f<=4095?[(3840&f)>>4|(3840&f)>>8,240&f|(240&f)>>4,15&f|(15&f)<<4,1]:null:A.length===7&&(f=parseInt(A.substr(1),16))>=0&&f<=16777215?[(16711680&f)>>16,(65280&f)>>8,255&f,1]:null;var P=A.indexOf("("),N=A.indexOf(")");if(P!==-1&&N+1===A.length){var q=A.substr(0,P),Y=A.substr(P+1,N-(P+1)).split(","),oe=1;switch(q){case"rgba":if(Y.length!==4)return null;oe=He(Y.pop());case"rgb":return Y.length!==3?null:[Ie(Y[0]),Ie(Y[1]),Ie(Y[2]),oe];case"hsla":if(Y.length!==4)return null;oe=He(Y.pop());case"hsl":if(Y.length!==3)return null;var de=(parseFloat(Y[0])%360+360)%360/360,xe=He(Y[1]),Re=He(Y[2]),Ve=Re<=.5?Re*(xe+1):Re+xe-Re*xe,it=2*Re-Ve;return[Pe(255*ct(it,Ve,de+1/3)),Pe(255*ct(it,Ve,de)),Pe(255*ct(it,Ve,de-1/3)),oe];default:return null}}return null}}catch{}class gt{constructor(f,A,P,N=1){this.r=f,this.g=A,this.b=P,this.a=N}static parse(f){if(!f)return;if(f instanceof gt)return f;if(typeof f!="string")return;const A=bo(f);return A?new gt(A[0]/255*A[3],A[1]/255*A[3],A[2]/255*A[3],A[3]):void 0}toString(){const[f,A,P,N]=this.toArray();return`rgba(${Math.round(f)},${Math.round(A)},${Math.round(P)},${N})`}toArray(){const{r:f,g:A,b:P,a:N}=this;return N===0?[0,0,0,0]:[255*f/N,255*A/N,255*P/N,N]}}gt.black=new gt(0,0,0,1),gt.white=new gt(1,1,1,1),gt.transparent=new gt(0,0,0,0),gt.red=new gt(1,0,0,1);class Rt{constructor(f,A,P){this.sensitivity=f?A?"variant":"case":A?"accent":"base",this.locale=P,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(f,A){return this.collator.compare(f,A)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class Ge{constructor(f,A,P,N,q){this.text=f,this.image=A,this.scale=P,this.fontStack=N,this.textColor=q}}class Ht{constructor(f){this.sections=f}static fromString(f){return new Ht([new Ge(f,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some(f=>f.text.length!==0||f.image&&f.image.name.length!==0)}static factory(f){return f instanceof Ht?f:Ht.fromString(f)}toString(){return this.sections.length===0?"":this.sections.map(f=>f.text).join("")}}class Bt{constructor(f){this.values=f.slice()}static parse(f){if(f instanceof Bt)return f;if(typeof f=="number")return new Bt([f,f,f,f]);if(Array.isArray(f)&&!(f.length<1||f.length>4)){for(const A of f)if(typeof A!="number")return;switch(f.length){case 1:f=[f[0],f[0],f[0],f[0]];break;case 2:f=[f[0],f[1],f[0],f[1]];break;case 3:f=[f[0],f[1],f[2],f[1]]}return new Bt(f)}}toString(){return JSON.stringify(this.values)}}class ei{constructor(f){this.name=f.name,this.available=f.available}toString(){return this.name}static fromString(f){return f?new ei({name:f,available:!1}):null}}function _t(_,f,A,P){return typeof _=="number"&&_>=0&&_<=255&&typeof f=="number"&&f>=0&&f<=255&&typeof A=="number"&&A>=0&&A<=255?P===void 0||typeof P=="number"&&P>=0&&P<=1?null:`Invalid rgba value [${[_,f,A,P].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof P=="number"?[_,f,A,P]:[_,f,A]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function Ri(_){if(_===null||typeof _=="string"||typeof _=="boolean"||typeof _=="number"||_ instanceof gt||_ instanceof Rt||_ instanceof Ht||_ instanceof Bt||_ instanceof ei)return!0;if(Array.isArray(_)){for(const f of _)if(!Ri(f))return!1;return!0}if(typeof _=="object"){for(const f in _)if(!Ri(_[f]))return!1;return!0}return!1}function Ii(_){if(_===null)return fn;if(typeof _=="string")return en;if(typeof _=="boolean")return Xn;if(typeof _=="number")return Bi;if(_ instanceof gt)return Yn;if(_ instanceof Rt)return cn;if(_ instanceof Ht)return mn;if(_ instanceof Bt)return er;if(_ instanceof ei)return yn;if(Array.isArray(_)){const f=_.length;let A;for(const P of _){const N=Ii(P);if(A){if(A===N)continue;A=jn;break}A=N}return Ln(A||jn,f)}return Kr}function In(_){const f=typeof _;return _===null?"":f==="string"||f==="number"||f==="boolean"?String(_):_ instanceof gt||_ instanceof Ht||_ instanceof Bt||_ instanceof ei?_.toString():JSON.stringify(_)}class kn{constructor(f,A){this.type=f,this.value=A}static parse(f,A){if(f.length!==2)return A.error(`'literal' expression requires exactly one argument, but found ${f.length-1} instead.`);if(!Ri(f[1]))return A.error("invalid value");const P=f[1];let N=Ii(P);const q=A.expectedType;return N.kind!=="array"||N.N!==0||!q||q.kind!=="array"||typeof q.N=="number"&&q.N!==0||(N=q),new kn(N,P)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}class xt{constructor(f){this.name="ExpressionEvaluationError",this.message=f}toJSON(){return this.message}}const Pn={string:en,number:Bi,boolean:Xn,object:Kr};class $n{constructor(f,A){this.type=f,this.args=A}static parse(f,A){if(f.length<2)return A.error("Expected at least one argument.");let P,N=1;const q=f[0];if(q==="array"){let oe,de;if(f.length>2){const xe=f[1];if(typeof xe!="string"||!(xe in Pn)||xe==="object")return A.error('The item type argument of "array" must be one of string, number, boolean',1);oe=Pn[xe],N++}else oe=jn;if(f.length>3){if(f[2]!==null&&(typeof f[2]!="number"||f[2]<0||f[2]!==Math.floor(f[2])))return A.error('The length argument to "array" must be a positive integer literal',2);de=f[2],N++}P=Ln(oe,de)}else{if(!Pn[q])throw new Error(`Types doesn't contain name = ${q}`);P=Pn[q]}const Y=[];for(;N<f.length;N++){const oe=A.parse(f[N],N,jn);if(!oe)return null;Y.push(oe)}return new $n(P,Y)}evaluate(f){for(let A=0;A<this.args.length;A++){const P=this.args[A].evaluate(f);if(!ln(this.type,Ii(P)))return P;if(A===this.args.length-1)throw new xt(`Expected value to be of type ${lr(this.type)}, but found ${lr(Ii(P))} instead.`)}throw new Error}eachChild(f){this.args.forEach(f)}outputDefined(){return this.args.every(f=>f.outputDefined())}}const Pr={"to-boolean":Xn,"to-color":Yn,"to-number":Bi,"to-string":en};class cr{constructor(f,A){this.type=f,this.args=A}static parse(f,A){if(f.length<2)return A.error("Expected at least one argument.");const P=f[0];if(!Pr[P])throw new Error(`Can't parse ${P} as it is not part of the known types`);if((P==="to-boolean"||P==="to-string")&&f.length!==2)return A.error("Expected one argument.");const N=Pr[P],q=[];for(let Y=1;Y<f.length;Y++){const oe=A.parse(f[Y],Y,jn);if(!oe)return null;q.push(oe)}return new cr(N,q)}evaluate(f){if(this.type.kind==="boolean")return Boolean(this.args[0].evaluate(f));if(this.type.kind==="color"){let A,P;for(const N of this.args){if(A=N.evaluate(f),P=null,A instanceof gt)return A;if(typeof A=="string"){const q=f.parseColor(A);if(q)return q}else if(Array.isArray(A)&&(P=A.length<3||A.length>4?`Invalid rbga value ${JSON.stringify(A)}: expected an array containing either three or four numeric values.`:_t(A[0],A[1],A[2],A[3]),!P))return new gt(A[0]/255,A[1]/255,A[2]/255,A[3])}throw new xt(P||`Could not parse color from value '${typeof A=="string"?A:JSON.stringify(A)}'`)}if(this.type.kind==="padding"){let A;for(const P of this.args){A=P.evaluate(f);const N=Bt.parse(A);if(N)return N}throw new xt(`Could not parse padding from value '${typeof A=="string"?A:JSON.stringify(A)}'`)}if(this.type.kind==="number"){let A=null;for(const P of this.args){if(A=P.evaluate(f),A===null)return 0;const N=Number(A);if(!isNaN(N))return N}throw new xt(`Could not convert ${JSON.stringify(A)} to number.`)}return this.type.kind==="formatted"?Ht.fromString(In(this.args[0].evaluate(f))):this.type.kind==="resolvedImage"?ei.fromString(In(this.args[0].evaluate(f))):In(this.args[0].evaluate(f))}eachChild(f){this.args.forEach(f)}outputDefined(){return this.args.every(f=>f.outputDefined())}}const Cr=["Unknown","Point","LineString","Polygon"];class Or{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?Cr[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(f){let A=this._parseColorCache[f];return A||(A=this._parseColorCache[f]=gt.parse(f)),A}}class Er{constructor(f,A,P,N){this.name=f,this.type=A,this._evaluate=P,this.args=N}evaluate(f){return this._evaluate(f,this.args)}eachChild(f){this.args.forEach(f)}outputDefined(){return!1}static parse(f,A){const P=f[0],N=Er.definitions[P];if(!N)return A.error(`Unknown expression "${P}". If you wanted a literal array, use ["literal", [...]].`,0);const q=Array.isArray(N)?N[0]:N.type,Y=Array.isArray(N)?[[N[1],N[2]]]:N.overloads,oe=Y.filter(([xe])=>!Array.isArray(xe)||xe.length===f.length-1);let de=null;for(const[xe,Re]of oe){de=new Sl(A.registry,A.path,null,A.scope);const Ve=[];let it=!1;for(let ut=1;ut<f.length;ut++){const ht=f[ut],Gt=Array.isArray(xe)?xe[ut-1]:xe.type,Ut=de.parse(ht,1+Ve.length,Gt);if(!Ut){it=!0;break}Ve.push(Ut)}if(!it)if(Array.isArray(xe)&&xe.length!==Ve.length)de.error(`Expected ${xe.length} arguments, but found ${Ve.length} instead.`);else{for(let ut=0;ut<Ve.length;ut++){const ht=Array.isArray(xe)?xe[ut]:xe.type,Gt=Ve[ut];de.concat(ut+1).checkSubtype(ht,Gt.type)}if(de.errors.length===0)return new Er(P,q,Re,Ve)}}if(oe.length===1)A.errors.push(...de.errors);else{const xe=(oe.length?oe:Y).map(([Ve])=>{return it=Ve,Array.isArray(it)?`(${it.map(lr).join(", ")})`:`(${lr(it.type)}...)`;var it}).join(" | "),Re=[];for(let Ve=1;Ve<f.length;Ve++){const it=A.parse(f[Ve],1+Re.length);if(!it)return null;Re.push(lr(it.type))}A.error(`Expected arguments of type ${xe}, but found (${Re.join(", ")}) instead.`)}return null}static register(f,A){Er.definitions=A;for(const P in A)f[P]=Er}}class Jo{constructor(f,A,P){this.type=cn,this.locale=P,this.caseSensitive=f,this.diacriticSensitive=A}static parse(f,A){if(f.length!==2)return A.error("Expected one argument.");const P=f[1];if(typeof P!="object"||Array.isArray(P))return A.error("Collator options argument must be an object.");const N=A.parse(P["case-sensitive"]!==void 0&&P["case-sensitive"],1,Xn);if(!N)return null;const q=A.parse(P["diacritic-sensitive"]!==void 0&&P["diacritic-sensitive"],1,Xn);if(!q)return null;let Y=null;return P.locale&&(Y=A.parse(P.locale,1,en),!Y)?null:new Jo(N,q,Y)}evaluate(f){return new Rt(this.caseSensitive.evaluate(f),this.diacriticSensitive.evaluate(f),this.locale?this.locale.evaluate(f):null)}eachChild(f){f(this.caseSensitive),f(this.diacriticSensitive),this.locale&&f(this.locale)}outputDefined(){return!1}}const _o=8192;function Qo(_,f){_[0]=Math.min(_[0],f[0]),_[1]=Math.min(_[1],f[1]),_[2]=Math.max(_[2],f[0]),_[3]=Math.max(_[3],f[1])}function il(_,f){return!(_[0]<=f[0]||_[2]>=f[2]||_[1]<=f[1]||_[3]>=f[3])}function Do(_,f){const A=(180+_[0])/360,P=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+_[1]*Math.PI/360)))/360,N=Math.pow(2,f.z);return[Math.round(A*N*_o),Math.round(P*N*_o)]}function Ot(_,f,A){const P=_[0]-f[0],N=_[1]-f[1],q=_[0]-A[0],Y=_[1]-A[1];return P*Y-q*N==0&&P*q<=0&&N*Y<=0}function sr(_,f){let A=!1;for(let Y=0,oe=f.length;Y<oe;Y++){const de=f[Y];for(let xe=0,Re=de.length;xe<Re-1;xe++){if(Ot(_,de[xe],de[xe+1]))return!1;(N=de[xe])[1]>(P=_)[1]!=(q=de[xe+1])[1]>P[1]&&P[0]<(q[0]-N[0])*(P[1]-N[1])/(q[1]-N[1])+N[0]&&(A=!A)}}var P,N,q;return A}function hr(_,f){for(let A=0;A<f.length;A++)if(sr(_,f[A]))return!0;return!1}function Nr(_,f,A,P){const N=P[0]-A[0],q=P[1]-A[1],Y=(_[0]-A[0])*q-N*(_[1]-A[1]),oe=(f[0]-A[0])*q-N*(f[1]-A[1]);return Y>0&&oe<0||Y<0&&oe>0}function Xo(_,f,A){for(const xe of A)for(let Re=0;Re<xe.length-1;++Re)if((oe=[(Y=xe[Re+1])[0]-(q=xe[Re])[0],Y[1]-q[1]])[0]*(de=[(N=f)[0]-(P=_)[0],N[1]-P[1]])[1]-oe[1]*de[0]!=0&&Nr(P,N,q,Y)&&Nr(q,Y,P,N))return!0;var P,N,q,Y,oe,de;return!1}function Oo(_,f){for(let A=0;A<_.length;++A)if(!sr(_[A],f))return!1;for(let A=0;A<_.length-1;++A)if(Xo(_[A],_[A+1],f))return!1;return!0}function Sa(_,f){for(let A=0;A<f.length;A++)if(Oo(_,f[A]))return!0;return!1}function ns(_,f,A){const P=[];for(let N=0;N<_.length;N++){const q=[];for(let Y=0;Y<_[N].length;Y++){const oe=Do(_[N][Y],A);Qo(f,oe),q.push(oe)}P.push(q)}return P}function Vs(_,f,A){const P=[];for(let N=0;N<_.length;N++){const q=ns(_[N],f,A);P.push(q)}return P}function vs(_,f,A,P){if(_[0]<A[0]||_[0]>A[2]){const N=.5*P;let q=_[0]-A[0]>N?-P:A[0]-_[0]>N?P:0;q===0&&(q=_[0]-A[2]>N?-P:A[2]-_[0]>N?P:0),_[0]+=q}Qo(f,_)}function Ca(_,f,A,P){const N=Math.pow(2,P.z)*_o,q=[P.x*_o,P.y*_o],Y=[];for(const oe of _)for(const de of oe){const xe=[de.x+q[0],de.y+q[1]];vs(xe,f,A,N),Y.push(xe)}return Y}function Cs(_,f,A,P){const N=Math.pow(2,P.z)*_o,q=[P.x*_o,P.y*_o],Y=[];for(const de of _){const xe=[];for(const Re of de){const Ve=[Re.x+q[0],Re.y+q[1]];Qo(f,Ve),xe.push(Ve)}Y.push(xe)}if(f[2]-f[0]<=N/2){(oe=f)[0]=oe[1]=1/0,oe[2]=oe[3]=-1/0;for(const de of Y)for(const xe of de)vs(xe,f,A,N)}var oe;return Y}class Zs{constructor(f,A){this.type=Xn,this.geojson=f,this.geometries=A}static parse(f,A){if(f.length!==2)return A.error(`'within' expression requires exactly one argument, but found ${f.length-1} instead.`);if(Ri(f[1])){const P=f[1];if(P.type==="FeatureCollection")for(let N=0;N<P.features.length;++N){const q=P.features[N].geometry.type;if(q==="Polygon"||q==="MultiPolygon")return new Zs(P,P.features[N].geometry)}else if(P.type==="Feature"){const N=P.geometry.type;if(N==="Polygon"||N==="MultiPolygon")return new Zs(P,P.geometry)}else if(P.type==="Polygon"||P.type==="MultiPolygon")return new Zs(P,P)}return A.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(f){if(f.geometry()!=null&&f.canonicalID()!=null){if(f.geometryType()==="Point")return function(A,P){const N=[1/0,1/0,-1/0,-1/0],q=[1/0,1/0,-1/0,-1/0],Y=A.canonicalID();if(P.type==="Polygon"){const oe=ns(P.coordinates,q,Y),de=Ca(A.geometry(),N,q,Y);if(!il(N,q))return!1;for(const xe of de)if(!sr(xe,oe))return!1}if(P.type==="MultiPolygon"){const oe=Vs(P.coordinates,q,Y),de=Ca(A.geometry(),N,q,Y);if(!il(N,q))return!1;for(const xe of de)if(!hr(xe,oe))return!1}return!0}(f,this.geometries);if(f.geometryType()==="LineString")return function(A,P){const N=[1/0,1/0,-1/0,-1/0],q=[1/0,1/0,-1/0,-1/0],Y=A.canonicalID();if(P.type==="Polygon"){const oe=ns(P.coordinates,q,Y),de=Cs(A.geometry(),N,q,Y);if(!il(N,q))return!1;for(const xe of de)if(!Oo(xe,oe))return!1}if(P.type==="MultiPolygon"){const oe=Vs(P.coordinates,q,Y),de=Cs(A.geometry(),N,q,Y);if(!il(N,q))return!1;for(const xe of de)if(!Sa(xe,oe))return!1}return!0}(f,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}function qs(_){if(_ instanceof Er&&(_.name==="get"&&_.args.length===1||_.name==="feature-state"||_.name==="has"&&_.args.length===1||_.name==="properties"||_.name==="geometry-type"||_.name==="id"||/^filter-/.test(_.name))||_ instanceof Zs)return!1;let f=!0;return _.eachChild(A=>{f&&!qs(A)&&(f=!1)}),f}function Ea(_){if(_ instanceof Er&&_.name==="feature-state")return!1;let f=!0;return _.eachChild(A=>{f&&!Ea(A)&&(f=!1)}),f}function kl(_,f){if(_ instanceof Er&&f.indexOf(_.name)>=0)return!1;let A=!0;return _.eachChild(P=>{A&&!kl(P,f)&&(A=!1)}),A}class cu{constructor(f,A){this.type=A.type,this.name=f,this.boundExpression=A}static parse(f,A){if(f.length!==2||typeof f[1]!="string")return A.error("'var' expression requires exactly one string literal argument.");const P=f[1];return A.scope.has(P)?new cu(P,A.scope.get(P)):A.error(`Unknown variable "${P}". Make sure "${P}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(f){return this.boundExpression.evaluate(f)}eachChild(){}outputDefined(){return!1}}class Sl{constructor(f,A=[],P,N=new Mn,q=[]){this.registry=f,this.path=A,this.key=A.map(Y=>`[${Y}]`).join(""),this.scope=N,this.errors=q,this.expectedType=P}parse(f,A,P,N,q={}){return A?this.concat(A,P,N)._parse(f,q):this._parse(f,q)}_parse(f,A){function P(N,q,Y){return Y==="assert"?new $n(q,[N]):Y==="coerce"?new cr(q,[N]):N}if(f!==null&&typeof f!="string"&&typeof f!="boolean"&&typeof f!="number"||(f=["literal",f]),Array.isArray(f)){if(f.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const N=f[0];if(typeof N!="string")return this.error(`Expression name must be a string, but found ${typeof N} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const q=this.registry[N];if(q){let Y=q.parse(f,this);if(!Y)return null;if(this.expectedType){const oe=this.expectedType,de=Y.type;if(oe.kind!=="string"&&oe.kind!=="number"&&oe.kind!=="boolean"&&oe.kind!=="object"&&oe.kind!=="array"||de.kind!=="value")if(oe.kind!=="color"&&oe.kind!=="formatted"&&oe.kind!=="resolvedImage"||de.kind!=="value"&&de.kind!=="string")if(oe.kind!=="padding"||de.kind!=="value"&&de.kind!=="number"&&de.kind!=="array"){if(this.checkSubtype(oe,de))return null}else Y=P(Y,oe,A.typeAnnotation||"coerce");else Y=P(Y,oe,A.typeAnnotation||"coerce");else Y=P(Y,oe,A.typeAnnotation||"assert")}if(!(Y instanceof kn)&&Y.type.kind!=="resolvedImage"&&hu(Y)){const oe=new Or;try{Y=new kn(Y.type,Y.evaluate(oe))}catch(de){return this.error(de.message),null}}return Y}return this.error(`Unknown expression "${N}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(f===void 0?"'undefined' value invalid. Use null instead.":typeof f=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof f} instead.`)}concat(f,A,P){const N=typeof f=="number"?this.path.concat(f):this.path,q=P?this.scope.concat(P):this.scope;return new Sl(this.registry,N,A||null,q,this.errors)}error(f,...A){const P=`${this.key}${A.map(N=>`[${N}]`).join("")}`;this.errors.push(new xn(P,f))}checkSubtype(f,A){const P=ln(f,A);return P&&this.error(P),P}}function hu(_){if(_ instanceof cu)return hu(_.boundExpression);if(_ instanceof Er&&_.name==="error"||_ instanceof Jo||_ instanceof Zs)return!1;const f=_ instanceof cr||_ instanceof $n;let A=!0;return _.eachChild(P=>{A=f?A&&hu(P):A&&P instanceof kn}),!!A&&qs(_)&&kl(_,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}function ha(_,f){const A=_.length-1;let P,N,q=0,Y=A,oe=0;for(;q<=Y;)if(oe=Math.floor((q+Y)/2),P=_[oe],N=_[oe+1],P<=f){if(oe===A||f<N)return oe;q=oe+1}else{if(!(P>f))throw new xt("Input is not a number.");Y=oe-1}return 0}class fa{constructor(f,A,P){this.type=f,this.input=A,this.labels=[],this.outputs=[];for(const[N,q]of P)this.labels.push(N),this.outputs.push(q)}static parse(f,A){if(f.length-1<4)return A.error(`Expected at least 4 arguments, but found only ${f.length-1}.`);if((f.length-1)%2!=0)return A.error("Expected an even number of arguments.");const P=A.parse(f[1],1,Bi);if(!P)return null;const N=[];let q=null;A.expectedType&&A.expectedType.kind!=="value"&&(q=A.expectedType);for(let Y=1;Y<f.length;Y+=2){const oe=Y===1?-1/0:f[Y],de=f[Y+1],xe=Y,Re=Y+1;if(typeof oe!="number")return A.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',xe);if(N.length&&N[N.length-1][0]>=oe)return A.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',xe);const Ve=A.parse(de,Re,q);if(!Ve)return null;q=q||Ve.type,N.push([oe,Ve])}return new fa(q,P,N)}evaluate(f){const A=this.labels,P=this.outputs;if(A.length===1)return P[0].evaluate(f);const N=this.input.evaluate(f);if(N<=A[0])return P[0].evaluate(f);const q=A.length;return N>=A[q-1]?P[q-1].evaluate(f):P[ha(A,N)].evaluate(f)}eachChild(f){f(this.input);for(const A of this.outputs)f(A)}outputDefined(){return this.outputs.every(f=>f.outputDefined())}}function Co(_,f,A){return _*(1-A)+f*A}var nl=Object.freeze({__proto__:null,number:Co,color:function(_,f,A){return new gt(Co(_.r,f.r,A),Co(_.g,f.g,A),Co(_.b,f.b,A),Co(_.a,f.a,A))},array:function(_,f,A){return _.map((P,N)=>Co(P,f[N],A))},padding:function(_,f,A){const P=_.values,N=f.values;return new Bt([Co(P[0],N[0],A),Co(P[1],N[1],A),Co(P[2],N[2],A),Co(P[3],N[3],A)])}});const U=.95047,$=1.08883,ge=4/29,De=6/29,ot=3*De*De,Et=Math.PI/180,Nt=180/Math.PI;function zt(_){return _>.008856451679035631?Math.pow(_,1/3):_/ot+ge}function bi(_){return _>De?_*_*_:ot*(_-ge)}function yi(_){return 255*(_<=.0031308?12.92*_:1.055*Math.pow(_,1/2.4)-.055)}function _i(_){return(_/=255)<=.04045?_/12.92:Math.pow((_+.055)/1.055,2.4)}function ui(_){const f=_i(_.r),A=_i(_.g),P=_i(_.b),N=zt((.4124564*f+.3575761*A+.1804375*P)/U),q=zt((.2126729*f+.7151522*A+.072175*P)/1);return{l:116*q-16,a:500*(N-q),b:200*(q-zt((.0193339*f+.119192*A+.9503041*P)/$)),alpha:_.a}}function ji(_){let f=(_.l+16)/116,A=isNaN(_.a)?f:f+_.a/500,P=isNaN(_.b)?f:f-_.b/200;return f=1*bi(f),A=U*bi(A),P=$*bi(P),new gt(yi(3.2404542*A-1.5371385*f-.4985314*P),yi(-.969266*A+1.8760108*f+.041556*P),yi(.0556434*A-.2040259*f+1.0572252*P),_.alpha)}function an(_,f,A){const P=f-_;return _+A*(P>180||P<-180?P-360*Math.round(P/360):P)}const Tn={forward:ui,reverse:ji,interpolate:function(_,f,A){return{l:Co(_.l,f.l,A),a:Co(_.a,f.a,A),b:Co(_.b,f.b,A),alpha:Co(_.alpha,f.alpha,A)}}},ft={forward:function(_){const{l:f,a:A,b:P}=ui(_),N=Math.atan2(P,A)*Nt;return{h:N<0?N+360:N,c:Math.sqrt(A*A+P*P),l:f,alpha:_.a}},reverse:function(_){const f=_.h*Et,A=_.c;return ji({l:_.l,a:Math.cos(f)*A,b:Math.sin(f)*A,alpha:_.alpha})},interpolate:function(_,f,A){return{h:an(_.h,f.h,A),c:Co(_.c,f.c,A),l:Co(_.l,f.l,A),alpha:Co(_.alpha,f.alpha,A)}}};var p=Object.freeze({__proto__:null,lab:Tn,hcl:ft});class Di{constructor(f,A,P,N,q){this.type=f,this.operator=A,this.interpolation=P,this.input=N,this.labels=[],this.outputs=[];for(const[Y,oe]of q)this.labels.push(Y),this.outputs.push(oe)}static interpolationFactor(f,A,P,N){let q=0;if(f.name==="exponential")q=c(A,f.base,P,N);else if(f.name==="linear")q=c(A,1,P,N);else if(f.name==="cubic-bezier"){const Y=f.controlPoints;q=new h(Y[0],Y[1],Y[2],Y[3]).solve(c(A,1,P,N))}return q}static parse(f,A){let[P,N,q,...Y]=f;if(!Array.isArray(N)||N.length===0)return A.error("Expected an interpolation type expression.",1);if(N[0]==="linear")N={name:"linear"};else if(N[0]==="exponential"){const xe=N[1];if(typeof xe!="number")return A.error("Exponential interpolation requires a numeric base.",1,1);N={name:"exponential",base:xe}}else{if(N[0]!=="cubic-bezier")return A.error(`Unknown interpolation type ${String(N[0])}`,1,0);{const xe=N.slice(1);if(xe.length!==4||xe.some(Re=>typeof Re!="number"||Re<0||Re>1))return A.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);N={name:"cubic-bezier",controlPoints:xe}}}if(f.length-1<4)return A.error(`Expected at least 4 arguments, but found only ${f.length-1}.`);if((f.length-1)%2!=0)return A.error("Expected an even number of arguments.");if(q=A.parse(q,2,Bi),!q)return null;const oe=[];let de=null;P==="interpolate-hcl"||P==="interpolate-lab"?de=Yn:A.expectedType&&A.expectedType.kind!=="value"&&(de=A.expectedType);for(let xe=0;xe<Y.length;xe+=2){const Re=Y[xe],Ve=Y[xe+1],it=xe+3,ut=xe+4;if(typeof Re!="number")return A.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',it);if(oe.length&&oe[oe.length-1][0]>=Re)return A.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',it);const ht=A.parse(Ve,ut,de);if(!ht)return null;de=de||ht.type,oe.push([Re,ht])}return de.kind==="number"||de.kind==="color"||de.kind==="padding"||de.kind==="array"&&de.itemType.kind==="number"&&typeof de.N=="number"?new Di(de,P,N,q,oe):A.error(`Type ${lr(de)} is not interpolatable.`)}evaluate(f){const A=this.labels,P=this.outputs;if(A.length===1)return P[0].evaluate(f);const N=this.input.evaluate(f);if(N<=A[0])return P[0].evaluate(f);const q=A.length;if(N>=A[q-1])return P[q-1].evaluate(f);const Y=ha(A,N),oe=Di.interpolationFactor(this.interpolation,N,A[Y],A[Y+1]),de=P[Y].evaluate(f),xe=P[Y+1].evaluate(f);return this.operator==="interpolate"?nl[this.type.kind.toLowerCase()](de,xe,oe):this.operator==="interpolate-hcl"?ft.reverse(ft.interpolate(ft.forward(de),ft.forward(xe),oe)):Tn.reverse(Tn.interpolate(Tn.forward(de),Tn.forward(xe),oe))}eachChild(f){f(this.input);for(const A of this.outputs)f(A)}outputDefined(){return this.outputs.every(f=>f.outputDefined())}}function c(_,f,A,P){const N=P-A,q=_-A;return N===0?0:f===1?q/N:(Math.pow(f,q)-1)/(Math.pow(f,N)-1)}class F{constructor(f,A){this.type=f,this.args=A}static parse(f,A){if(f.length<2)return A.error("Expectected at least one argument.");let P=null;const N=A.expectedType;N&&N.kind!=="value"&&(P=N);const q=[];for(const oe of f.slice(1)){const de=A.parse(oe,1+q.length,P,void 0,{typeAnnotation:"omit"});if(!de)return null;P=P||de.type,q.push(de)}if(!P)throw new Error("No output type");const Y=N&&q.some(oe=>ln(N,oe.type));return new F(Y?jn:P,q)}evaluate(f){let A,P=null,N=0;for(const q of this.args)if(N++,P=q.evaluate(f),P&&P instanceof ei&&!P.available&&(A||(A=P.name),P=null,N===this.args.length&&(P=A)),P!==null)break;return P}eachChild(f){this.args.forEach(f)}outputDefined(){return this.args.every(f=>f.outputDefined())}}class pn{constructor(f,A){this.type=A.type,this.bindings=[].concat(f),this.result=A}evaluate(f){return this.result.evaluate(f)}eachChild(f){for(const A of this.bindings)f(A[1]);f(this.result)}static parse(f,A){if(f.length<4)return A.error(`Expected at least 3 arguments, but found ${f.length-1} instead.`);const P=[];for(let q=1;q<f.length-1;q+=2){const Y=f[q];if(typeof Y!="string")return A.error(`Expected string, but found ${typeof Y} instead.`,q);if(/[^a-zA-Z0-9_]/.test(Y))return A.error("Variable names must contain only alphanumeric characters or '_'.",q);const oe=A.parse(f[q+1],q+1);if(!oe)return null;P.push([Y,oe])}const N=A.parse(f[f.length-1],f.length-1,A.expectedType,P);return N?new pn(P,N):null}outputDefined(){return this.result.outputDefined()}}class Qn{constructor(f,A,P){this.type=f,this.index=A,this.input=P}static parse(f,A){if(f.length!==3)return A.error(`Expected 2 arguments, but found ${f.length-1} instead.`);const P=A.parse(f[1],1,Bi),N=A.parse(f[2],2,Ln(A.expectedType||jn));return P&&N?new Qn(N.type.itemType,P,N):null}evaluate(f){const A=this.index.evaluate(f),P=this.input.evaluate(f);if(A<0)throw new xt(`Array index out of bounds: ${A} < 0.`);if(A>=P.length)throw new xt(`Array index out of bounds: ${A} > ${P.length-1}.`);if(A!==Math.floor(A))throw new xt(`Array index must be an integer, but found ${A} instead.`);return P[A]}eachChild(f){f(this.index),f(this.input)}outputDefined(){return!1}}class wo{constructor(f,A){this.type=Xn,this.needle=f,this.haystack=A}static parse(f,A){if(f.length!==3)return A.error(`Expected 2 arguments, but found ${f.length-1} instead.`);const P=A.parse(f[1],1,jn),N=A.parse(f[2],2,jn);return P&&N?qe(P.type,[Xn,en,Bi,fn,jn])?new wo(P,N):A.error(`Expected first argument to be of type boolean, string, number or null, but found ${lr(P.type)} instead`):null}evaluate(f){const A=this.needle.evaluate(f),P=this.haystack.evaluate(f);if(!P)return!1;if(!To(A,["boolean","string","number","null"]))throw new xt(`Expected first argument to be of type boolean, string, number or null, but found ${lr(Ii(A))} instead.`);if(!To(P,["string","array"]))throw new xt(`Expected second argument to be of type array or string, but found ${lr(Ii(P))} instead.`);return P.indexOf(A)>=0}eachChild(f){f(this.needle),f(this.haystack)}outputDefined(){return!0}}class re{constructor(f,A,P){this.type=Bi,this.needle=f,this.haystack=A,this.fromIndex=P}static parse(f,A){if(f.length<=2||f.length>=5)return A.error(`Expected 3 or 4 arguments, but found ${f.length-1} instead.`);const P=A.parse(f[1],1,jn),N=A.parse(f[2],2,jn);if(!P||!N)return null;if(!qe(P.type,[Xn,en,Bi,fn,jn]))return A.error(`Expected first argument to be of type boolean, string, number or null, but found ${lr(P.type)} instead`);if(f.length===4){const q=A.parse(f[3],3,Bi);return q?new re(P,N,q):null}return new re(P,N)}evaluate(f){const A=this.needle.evaluate(f),P=this.haystack.evaluate(f);if(!To(A,["boolean","string","number","null"]))throw new xt(`Expected first argument to be of type boolean, string, number or null, but found ${lr(Ii(A))} instead.`);if(!To(P,["string","array"]))throw new xt(`Expected second argument to be of type array or string, but found ${lr(Ii(P))} instead.`);if(this.fromIndex){const N=this.fromIndex.evaluate(f);return P.indexOf(A,N)}return P.indexOf(A)}eachChild(f){f(this.needle),f(this.haystack),this.fromIndex&&f(this.fromIndex)}outputDefined(){return!1}}class Br{constructor(f,A,P,N,q,Y){this.inputType=f,this.type=A,this.input=P,this.cases=N,this.outputs=q,this.otherwise=Y}static parse(f,A){if(f.length<5)return A.error(`Expected at least 4 arguments, but found only ${f.length-1}.`);if(f.length%2!=1)return A.error("Expected an even number of arguments.");let P,N;A.expectedType&&A.expectedType.kind!=="value"&&(N=A.expectedType);const q={},Y=[];for(let xe=2;xe<f.length-1;xe+=2){let Re=f[xe];const Ve=f[xe+1];Array.isArray(Re)||(Re=[Re]);const it=A.concat(xe);if(Re.length===0)return it.error("Expected at least one branch label.");for(const ht of Re){if(typeof ht!="number"&&typeof ht!="string")return it.error("Branch labels must be numbers or strings.");if(typeof ht=="number"&&Math.abs(ht)>Number.MAX_SAFE_INTEGER)return it.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof ht=="number"&&Math.floor(ht)!==ht)return it.error("Numeric branch labels must be integer values.");if(P){if(it.checkSubtype(P,Ii(ht)))return null}else P=Ii(ht);if(q[String(ht)]!==void 0)return it.error("Branch labels must be unique.");q[String(ht)]=Y.length}const ut=A.parse(Ve,xe,N);if(!ut)return null;N=N||ut.type,Y.push(ut)}const oe=A.parse(f[1],1,jn);if(!oe)return null;const de=A.parse(f[f.length-1],f.length-1,N);return de?oe.type.kind!=="value"&&A.concat(1).checkSubtype(P,oe.type)?null:new Br(P,N,oe,q,Y,de):null}evaluate(f){const A=this.input.evaluate(f);return(Ii(A)===this.inputType&&this.outputs[this.cases[A]]||this.otherwise).evaluate(f)}eachChild(f){f(this.input),this.outputs.forEach(f),f(this.otherwise)}outputDefined(){return this.outputs.every(f=>f.outputDefined())&&this.otherwise.outputDefined()}}class da{constructor(f,A,P){this.type=f,this.branches=A,this.otherwise=P}static parse(f,A){if(f.length<4)return A.error(`Expected at least 3 arguments, but found only ${f.length-1}.`);if(f.length%2!=0)return A.error("Expected an odd number of arguments.");let P;A.expectedType&&A.expectedType.kind!=="value"&&(P=A.expectedType);const N=[];for(let Y=1;Y<f.length-1;Y+=2){const oe=A.parse(f[Y],Y,Xn);if(!oe)return null;const de=A.parse(f[Y+1],Y+1,P);if(!de)return null;N.push([oe,de]),P=P||de.type}const q=A.parse(f[f.length-1],f.length-1,P);if(!q)return null;if(!P)throw new Error("Can't infer output type");return new da(P,N,q)}evaluate(f){for(const[A,P]of this.branches)if(A.evaluate(f))return P.evaluate(f);return this.otherwise.evaluate(f)}eachChild(f){for(const[A,P]of this.branches)f(A),f(P);f(this.otherwise)}outputDefined(){return this.branches.every(([f,A])=>A.outputDefined())&&this.otherwise.outputDefined()}}class Na{constructor(f,A,P,N){this.type=f,this.input=A,this.beginIndex=P,this.endIndex=N}static parse(f,A){if(f.length<=2||f.length>=5)return A.error(`Expected 3 or 4 arguments, but found ${f.length-1} instead.`);const P=A.parse(f[1],1,jn),N=A.parse(f[2],2,Bi);if(!P||!N)return null;if(!qe(P.type,[Ln(jn),en,jn]))return A.error(`Expected first argument to be of type array or string, but found ${lr(P.type)} instead`);if(f.length===4){const q=A.parse(f[3],3,Bi);return q?new Na(P.type,P,N,q):null}return new Na(P.type,P,N)}evaluate(f){const A=this.input.evaluate(f),P=this.beginIndex.evaluate(f);if(!To(A,["string","array"]))throw new xt(`Expected first argument to be of type array or string, but found ${lr(Ii(A))} instead.`);if(this.endIndex){const N=this.endIndex.evaluate(f);return A.slice(P,N)}return A.slice(P)}eachChild(f){f(this.input),f(this.beginIndex),this.endIndex&&f(this.endIndex)}outputDefined(){return!1}}function Oc(_,f){return _==="=="||_==="!="?f.kind==="boolean"||f.kind==="string"||f.kind==="number"||f.kind==="null"||f.kind==="value":f.kind==="string"||f.kind==="number"||f.kind==="value"}function Cl(_,f,A,P){return P.compare(f,A)===0}function Hs(_,f,A){const P=_!=="=="&&_!=="!=";return class z4{constructor(q,Y,oe){this.type=Xn,this.lhs=q,this.rhs=Y,this.collator=oe,this.hasUntypedArgument=q.type.kind==="value"||Y.type.kind==="value"}static parse(q,Y){if(q.length!==3&&q.length!==4)return Y.error("Expected two or three arguments.");const oe=q[0];let de=Y.parse(q[1],1,jn);if(!de)return null;if(!Oc(oe,de.type))return Y.concat(1).error(`"${oe}" comparisons are not supported for type '${lr(de.type)}'.`);let xe=Y.parse(q[2],2,jn);if(!xe)return null;if(!Oc(oe,xe.type))return Y.concat(2).error(`"${oe}" comparisons are not supported for type '${lr(xe.type)}'.`);if(de.type.kind!==xe.type.kind&&de.type.kind!=="value"&&xe.type.kind!=="value")return Y.error(`Cannot compare types '${lr(de.type)}' and '${lr(xe.type)}'.`);P&&(de.type.kind==="value"&&xe.type.kind!=="value"?de=new $n(xe.type,[de]):de.type.kind!=="value"&&xe.type.kind==="value"&&(xe=new $n(de.type,[xe])));let Re=null;if(q.length===4){if(de.type.kind!=="string"&&xe.type.kind!=="string"&&de.type.kind!=="value"&&xe.type.kind!=="value")return Y.error("Cannot use collator to compare non-string types.");if(Re=Y.parse(q[3],3,cn),!Re)return null}return new z4(de,xe,Re)}evaluate(q){const Y=this.lhs.evaluate(q),oe=this.rhs.evaluate(q);if(P&&this.hasUntypedArgument){const de=Ii(Y),xe=Ii(oe);if(de.kind!==xe.kind||de.kind!=="string"&&de.kind!=="number")throw new xt(`Expected arguments for "${_}" to be (string, string) or (number, number), but found (${de.kind}, ${xe.kind}) instead.`)}if(this.collator&&!P&&this.hasUntypedArgument){const de=Ii(Y),xe=Ii(oe);if(de.kind!=="string"||xe.kind!=="string")return f(q,Y,oe)}return this.collator?A(q,Y,oe,this.collator.evaluate(q)):f(q,Y,oe)}eachChild(q){q(this.lhs),q(this.rhs),this.collator&&q(this.collator)}outputDefined(){return!0}}}const ac=Hs("==",function(_,f,A){return f===A},Cl),fu=Hs("!=",function(_,f,A){return f!==A},function(_,f,A,P){return!Cl(0,f,A,P)}),uh=Hs("<",function(_,f,A){return f<A},function(_,f,A,P){return P.compare(f,A)<0}),du=Hs(">",function(_,f,A){return f>A},function(_,f,A,P){return P.compare(f,A)>0}),ch=Hs("<=",function(_,f,A){return f<=A},function(_,f,A,P){return P.compare(f,A)<=0}),Bu=Hs(">=",function(_,f,A){return f>=A},function(_,f,A,P){return P.compare(f,A)>=0});class pu{constructor(f,A,P,N,q){this.type=en,this.number=f,this.locale=A,this.currency=P,this.minFractionDigits=N,this.maxFractionDigits=q}static parse(f,A){if(f.length!==3)return A.error("Expected two arguments.");const P=A.parse(f[1],1,Bi);if(!P)return null;const N=f[2];if(typeof N!="object"||Array.isArray(N))return A.error("NumberFormat options argument must be an object.");let q=null;if(N.locale&&(q=A.parse(N.locale,1,en),!q))return null;let Y=null;if(N.currency&&(Y=A.parse(N.currency,1,en),!Y))return null;let oe=null;if(N["min-fraction-digits"]&&(oe=A.parse(N["min-fraction-digits"],1,Bi),!oe))return null;let de=null;return N["max-fraction-digits"]&&(de=A.parse(N["max-fraction-digits"],1,Bi),!de)?null:new pu(P,q,Y,oe,de)}evaluate(f){return new Intl.NumberFormat(this.locale?this.locale.evaluate(f):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(f):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(f):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(f):void 0}).format(this.number.evaluate(f))}eachChild(f){f(this.number),this.locale&&f(this.locale),this.currency&&f(this.currency),this.minFractionDigits&&f(this.minFractionDigits),this.maxFractionDigits&&f(this.maxFractionDigits)}outputDefined(){return!1}}class mu{constructor(f){this.type=mn,this.sections=f}static parse(f,A){if(f.length<2)return A.error("Expected at least one argument.");const P=f[1];if(!Array.isArray(P)&&typeof P=="object")return A.error("First argument must be an image or text section.");const N=[];let q=!1;for(let Y=1;Y<=f.length-1;++Y){const oe=f[Y];if(q&&typeof oe=="object"&&!Array.isArray(oe)){q=!1;let de=null;if(oe["font-scale"]&&(de=A.parse(oe["font-scale"],1,Bi),!de))return null;let xe=null;if(oe["text-font"]&&(xe=A.parse(oe["text-font"],1,Ln(en)),!xe))return null;let Re=null;if(oe["text-color"]&&(Re=A.parse(oe["text-color"],1,Yn),!Re))return null;const Ve=N[N.length-1];Ve.scale=de,Ve.font=xe,Ve.textColor=Re}else{const de=A.parse(f[Y],1,jn);if(!de)return null;const xe=de.type.kind;if(xe!=="string"&&xe!=="value"&&xe!=="null"&&xe!=="resolvedImage")return A.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");q=!0,N.push({content:de,scale:null,font:null,textColor:null})}}return new mu(N)}evaluate(f){return new Ht(this.sections.map(A=>{const P=A.content.evaluate(f);return Ii(P)===yn?new Ge("",P,null,null,null):new Ge(In(P),null,A.scale?A.scale.evaluate(f):null,A.font?A.font.evaluate(f).join(","):null,A.textColor?A.textColor.evaluate(f):null)}))}eachChild(f){for(const A of this.sections)f(A.content),A.scale&&f(A.scale),A.font&&f(A.font),A.textColor&&f(A.textColor)}outputDefined(){return!1}}class Gl{constructor(f){this.type=yn,this.input=f}static parse(f,A){if(f.length!==2)return A.error("Expected two arguments.");const P=A.parse(f[1],1,en);return P?new Gl(P):A.error("No image name provided.")}evaluate(f){const A=this.input.evaluate(f),P=ei.fromString(A);return P&&f.availableImages&&(P.available=f.availableImages.indexOf(A)>-1),P}eachChild(f){f(this.input)}outputDefined(){return!1}}class gu{constructor(f){this.type=Bi,this.input=f}static parse(f,A){if(f.length!==2)return A.error(`Expected 1 argument, but found ${f.length-1} instead.`);const P=A.parse(f[1],1);return P?P.type.kind!=="array"&&P.type.kind!=="string"&&P.type.kind!=="value"?A.error(`Expected argument of type string or array, but found ${lr(P.type)} instead.`):new gu(P):null}evaluate(f){const A=this.input.evaluate(f);if(typeof A=="string"||Array.isArray(A))return A.length;throw new xt(`Expected value to be of type string or array, but found ${lr(Ii(A))} instead.`)}eachChild(f){f(this.input)}outputDefined(){return!1}}const Un={"==":ac,"!=":fu,">":du,"<":uh,">=":Bu,"<=":ch,array:$n,at:Qn,boolean:$n,case:da,coalesce:F,collator:Jo,format:mu,image:Gl,in:wo,"index-of":re,interpolate:Di,"interpolate-hcl":Di,"interpolate-lab":Di,length:gu,let:pn,literal:kn,match:Br,number:$n,"number-format":pu,object:$n,slice:Na,step:fa,string:$n,"to-boolean":cr,"to-color":cr,"to-number":cr,"to-string":cr,var:cu,within:Zs};function Bn(_,[f,A,P,N]){f=f.evaluate(_),A=A.evaluate(_),P=P.evaluate(_);const q=N?N.evaluate(_):1,Y=_t(f,A,P,q);if(Y)throw new xt(Y);return new gt(f/255*q,A/255*q,P/255*q,q)}function zu(_,f){return _ in f}function ja(_,f){const A=f[_];return A===void 0?null:A}function pa(_){return{type:_}}function Wl(_){return{result:"success",value:_}}function ma(_){return{result:"error",value:_}}function xo(_){return _["property-type"]==="data-driven"||_["property-type"]==="cross-faded-data-driven"}function se(_){return!!_.expression&&_.expression.parameters.indexOf("zoom")>-1}function Ue(_){return!!_.expression&&_.expression.interpolated}function kt(_){return _ instanceof Number?"number":_ instanceof String?"string":_ instanceof Boolean?"boolean":Array.isArray(_)?"array":_===null?"null":typeof _}function Xt(_){return typeof _=="object"&&_!==null&&!Array.isArray(_)}function hi(_){return _}function Zi(_,f){const A=f.type==="color",P=_.stops&&typeof _.stops[0][0]=="object",N=P||!(P||_.property!==void 0),q=_.type||(Ue(f)?"exponential":"interval");if(A||f.type==="padding"){const xe=A?gt.parse:Bt.parse;(_=vt({},_)).stops&&(_.stops=_.stops.map(Re=>[Re[0],xe(Re[1])])),_.default=xe(_.default?_.default:f.default)}if(_.colorSpace&&_.colorSpace!=="rgb"&&!p[_.colorSpace])throw new Error(`Unknown color space: ${_.colorSpace}`);let Y,oe,de;if(q==="exponential")Y=jr;else if(q==="interval")Y=kr;else if(q==="categorical"){Y=Jn,oe=Object.create(null);for(const xe of _.stops)oe[xe[0]]=xe[1];de=typeof _.stops[0][0]}else{if(q!=="identity")throw new Error(`Unknown function type "${q}"`);Y=Xr}if(P){const xe={},Re=[];for(let ut=0;ut<_.stops.length;ut++){const ht=_.stops[ut],Gt=ht[0].zoom;xe[Gt]===void 0&&(xe[Gt]={zoom:Gt,type:_.type,property:_.property,default:_.default,stops:[]},Re.push(Gt)),xe[Gt].stops.push([ht[0].value,ht[1]])}const Ve=[];for(const ut of Re)Ve.push([xe[ut].zoom,Zi(xe[ut],f)]);const it={name:"linear"};return{kind:"composite",interpolationType:it,interpolationFactor:Di.interpolationFactor.bind(void 0,it),zoomStops:Ve.map(ut=>ut[0]),evaluate:({zoom:ut},ht)=>jr({stops:Ve,base:_.base},f,ut).evaluate(ut,ht)}}if(N){const xe=q==="exponential"?{name:"exponential",base:_.base!==void 0?_.base:1}:null;return{kind:"camera",interpolationType:xe,interpolationFactor:Di.interpolationFactor.bind(void 0,xe),zoomStops:_.stops.map(Re=>Re[0]),evaluate:({zoom:Re})=>Y(_,f,Re,oe,de)}}return{kind:"source",evaluate(xe,Re){const Ve=Re&&Re.properties?Re.properties[_.property]:void 0;return Ve===void 0?hn(_.default,f.default):Y(_,f,Ve,oe,de)}}}function hn(_,f,A){return _!==void 0?_:f!==void 0?f:A!==void 0?A:void 0}function Jn(_,f,A,P,N){return hn(typeof A===N?P[A]:void 0,_.default,f.default)}function kr(_,f,A){if(kt(A)!=="number")return hn(_.default,f.default);const P=_.stops.length;if(P===1||A<=_.stops[0][0])return _.stops[0][1];if(A>=_.stops[P-1][0])return _.stops[P-1][1];const N=ha(_.stops.map(q=>q[0]),A);return _.stops[N][1]}function jr(_,f,A){const P=_.base!==void 0?_.base:1;if(kt(A)!=="number")return hn(_.default,f.default);const N=_.stops.length;if(N===1||A<=_.stops[0][0])return _.stops[0][1];if(A>=_.stops[N-1][0])return _.stops[N-1][1];const q=ha(_.stops.map(Re=>Re[0]),A),Y=function(Re,Ve,it,ut){const ht=ut-it,Gt=Re-it;return ht===0?0:Ve===1?Gt/ht:(Math.pow(Ve,Gt)-1)/(Math.pow(Ve,ht)-1)}(A,P,_.stops[q][0],_.stops[q+1][0]),oe=_.stops[q][1],de=_.stops[q+1][1];let xe=nl[f.type]||hi;if(_.colorSpace&&_.colorSpace!=="rgb"){const Re=p[_.colorSpace];xe=(Ve,it)=>Re.reverse(Re.interpolate(Re.forward(Ve),Re.forward(it),Y))}return typeof oe.evaluate=="function"?{evaluate(...Re){const Ve=oe.evaluate.apply(void 0,Re),it=de.evaluate.apply(void 0,Re);if(Ve!==void 0&&it!==void 0)return xe(Ve,it,Y)}}:xe(oe,de,Y)}function Xr(_,f,A){switch(f.type){case"color":A=gt.parse(A);break;case"formatted":A=Ht.fromString(A.toString());break;case"resolvedImage":A=ei.fromString(A.toString());break;case"padding":A=Bt.parse(A);break;default:kt(A)===f.type||f.type==="enum"&&f.values[A]||(A=void 0)}return hn(A,_.default,f.default)}Er.register(Un,{error:[{kind:"error"},[en],(_,[f])=>{throw new xt(f.evaluate(_))}],typeof:[en,[jn],(_,[f])=>lr(Ii(f.evaluate(_)))],"to-rgba":[Ln(Bi,4),[Yn],(_,[f])=>f.evaluate(_).toArray()],rgb:[Yn,[Bi,Bi,Bi],Bn],rgba:[Yn,[Bi,Bi,Bi,Bi],Bn],has:{type:Xn,overloads:[[[en],(_,[f])=>zu(f.evaluate(_),_.properties())],[[en,Kr],(_,[f,A])=>zu(f.evaluate(_),A.evaluate(_))]]},get:{type:jn,overloads:[[[en],(_,[f])=>ja(f.evaluate(_),_.properties())],[[en,Kr],(_,[f,A])=>ja(f.evaluate(_),A.evaluate(_))]]},"feature-state":[jn,[en],(_,[f])=>ja(f.evaluate(_),_.featureState||{})],properties:[Kr,[],_=>_.properties()],"geometry-type":[en,[],_=>_.geometryType()],id:[jn,[],_=>_.id()],zoom:[Bi,[],_=>_.globals.zoom],"heatmap-density":[Bi,[],_=>_.globals.heatmapDensity||0],"line-progress":[Bi,[],_=>_.globals.lineProgress||0],accumulated:[jn,[],_=>_.globals.accumulated===void 0?null:_.globals.accumulated],"+":[Bi,pa(Bi),(_,f)=>{let A=0;for(const P of f)A+=P.evaluate(_);return A}],"*":[Bi,pa(Bi),(_,f)=>{let A=1;for(const P of f)A*=P.evaluate(_);return A}],"-":{type:Bi,overloads:[[[Bi,Bi],(_,[f,A])=>f.evaluate(_)-A.evaluate(_)],[[Bi],(_,[f])=>-f.evaluate(_)]]},"/":[Bi,[Bi,Bi],(_,[f,A])=>f.evaluate(_)/A.evaluate(_)],"%":[Bi,[Bi,Bi],(_,[f,A])=>f.evaluate(_)%A.evaluate(_)],ln2:[Bi,[],()=>Math.LN2],pi:[Bi,[],()=>Math.PI],e:[Bi,[],()=>Math.E],"^":[Bi,[Bi,Bi],(_,[f,A])=>Math.pow(f.evaluate(_),A.evaluate(_))],sqrt:[Bi,[Bi],(_,[f])=>Math.sqrt(f.evaluate(_))],log10:[Bi,[Bi],(_,[f])=>Math.log(f.evaluate(_))/Math.LN10],ln:[Bi,[Bi],(_,[f])=>Math.log(f.evaluate(_))],log2:[Bi,[Bi],(_,[f])=>Math.log(f.evaluate(_))/Math.LN2],sin:[Bi,[Bi],(_,[f])=>Math.sin(f.evaluate(_))],cos:[Bi,[Bi],(_,[f])=>Math.cos(f.evaluate(_))],tan:[Bi,[Bi],(_,[f])=>Math.tan(f.evaluate(_))],asin:[Bi,[Bi],(_,[f])=>Math.asin(f.evaluate(_))],acos:[Bi,[Bi],(_,[f])=>Math.acos(f.evaluate(_))],atan:[Bi,[Bi],(_,[f])=>Math.atan(f.evaluate(_))],min:[Bi,pa(Bi),(_,f)=>Math.min(...f.map(A=>A.evaluate(_)))],max:[Bi,pa(Bi),(_,f)=>Math.max(...f.map(A=>A.evaluate(_)))],abs:[Bi,[Bi],(_,[f])=>Math.abs(f.evaluate(_))],round:[Bi,[Bi],(_,[f])=>{const A=f.evaluate(_);return A<0?-Math.round(-A):Math.round(A)}],floor:[Bi,[Bi],(_,[f])=>Math.floor(f.evaluate(_))],ceil:[Bi,[Bi],(_,[f])=>Math.ceil(f.evaluate(_))],"filter-==":[Xn,[en,jn],(_,[f,A])=>_.properties()[f.value]===A.value],"filter-id-==":[Xn,[jn],(_,[f])=>_.id()===f.value],"filter-type-==":[Xn,[en],(_,[f])=>_.geometryType()===f.value],"filter-<":[Xn,[en,jn],(_,[f,A])=>{const P=_.properties()[f.value],N=A.value;return typeof P==typeof N&&P<N}],"filter-id-<":[Xn,[jn],(_,[f])=>{const A=_.id(),P=f.value;return typeof A==typeof P&&A<P}],"filter->":[Xn,[en,jn],(_,[f,A])=>{const P=_.properties()[f.value],N=A.value;return typeof P==typeof N&&P>N}],"filter-id->":[Xn,[jn],(_,[f])=>{const A=_.id(),P=f.value;return typeof A==typeof P&&A>P}],"filter-<=":[Xn,[en,jn],(_,[f,A])=>{const P=_.properties()[f.value],N=A.value;return typeof P==typeof N&&P<=N}],"filter-id-<=":[Xn,[jn],(_,[f])=>{const A=_.id(),P=f.value;return typeof A==typeof P&&A<=P}],"filter->=":[Xn,[en,jn],(_,[f,A])=>{const P=_.properties()[f.value],N=A.value;return typeof P==typeof N&&P>=N}],"filter-id->=":[Xn,[jn],(_,[f])=>{const A=_.id(),P=f.value;return typeof A==typeof P&&A>=P}],"filter-has":[Xn,[jn],(_,[f])=>f.value in _.properties()],"filter-has-id":[Xn,[],_=>_.id()!==null&&_.id()!==void 0],"filter-type-in":[Xn,[Ln(en)],(_,[f])=>f.value.indexOf(_.geometryType())>=0],"filter-id-in":[Xn,[Ln(jn)],(_,[f])=>f.value.indexOf(_.id())>=0],"filter-in-small":[Xn,[en,Ln(jn)],(_,[f,A])=>A.value.indexOf(_.properties()[f.value])>=0],"filter-in-large":[Xn,[en,Ln(jn)],(_,[f,A])=>function(P,N,q,Y){for(;q<=Y;){const oe=q+Y>>1;if(N[oe]===P)return!0;N[oe]>P?Y=oe-1:q=oe+1}return!1}(_.properties()[f.value],A.value,0,A.value.length-1)],all:{type:Xn,overloads:[[[Xn,Xn],(_,[f,A])=>f.evaluate(_)&&A.evaluate(_)],[pa(Xn),(_,f)=>{for(const A of f)if(!A.evaluate(_))return!1;return!0}]]},any:{type:Xn,overloads:[[[Xn,Xn],(_,[f,A])=>f.evaluate(_)||A.evaluate(_)],[pa(Xn),(_,f)=>{for(const A of f)if(A.evaluate(_))return!0;return!1}]]},"!":[Xn,[Xn],(_,[f])=>!f.evaluate(_)],"is-supported-script":[Xn,[en],(_,[f])=>{const A=_.globals&&_.globals.isSupportedScript;return!A||A(f.evaluate(_))}],upcase:[en,[en],(_,[f])=>f.evaluate(_).toUpperCase()],downcase:[en,[en],(_,[f])=>f.evaluate(_).toLowerCase()],concat:[en,pa(jn),(_,f)=>f.map(A=>In(A.evaluate(_))).join("")],"resolved-locale":[en,[cn],(_,[f])=>f.evaluate(_).resolvedLocale()]});class $r{constructor(f,A){this.expression=f,this._warningHistory={},this._evaluator=new Or,this._defaultValue=A?function(P){return P.type==="color"&&Xt(P.default)?new gt(0,0,0,0):P.type==="color"?gt.parse(P.default)||null:P.type==="padding"?Bt.parse(P.default)||null:P.default===void 0?null:P.default}(A):null,this._enumValues=A&&A.type==="enum"?A.values:null}evaluateWithoutErrorHandling(f,A,P,N,q,Y){return this._evaluator.globals=f,this._evaluator.feature=A,this._evaluator.featureState=P,this._evaluator.canonical=N,this._evaluator.availableImages=q||null,this._evaluator.formattedSection=Y,this.expression.evaluate(this._evaluator)}evaluate(f,A,P,N,q,Y){this._evaluator.globals=f,this._evaluator.feature=A||null,this._evaluator.featureState=P||null,this._evaluator.canonical=N,this._evaluator.availableImages=q||null,this._evaluator.formattedSection=Y||null;try{const oe=this.expression.evaluate(this._evaluator);if(oe==null||typeof oe=="number"&&oe!=oe)return this._defaultValue;if(this._enumValues&&!(oe in this._enumValues))throw new xt(`Expected value to be one of ${Object.keys(this._enumValues).map(de=>JSON.stringify(de)).join(", ")}, but found ${JSON.stringify(oe)} instead.`);return oe}catch(oe){return this._warningHistory[oe.message]||(this._warningHistory[oe.message]=!0,typeof console<"u"&&console.warn(oe.message)),this._defaultValue}}}function Fo(_){return Array.isArray(_)&&_.length>0&&typeof _[0]=="string"&&_[0]in Un}function No(_,f){const A=new Sl(Un,[],f?function(N){const q={color:Yn,string:en,number:Bi,enum:en,boolean:Xn,formatted:mn,padding:er,resolvedImage:yn};return N.type==="array"?Ln(q[N.value]||jn,N.length):q[N.type]}(f):void 0),P=A.parse(_,void 0,void 0,void 0,f&&f.type==="string"?{typeAnnotation:"coerce"}:void 0);return P?Wl(new $r(P,f)):ma(A.errors)}class Ho{constructor(f,A){this.kind=f,this._styleExpression=A,this.isStateDependent=f!=="constant"&&!Ea(A.expression)}evaluateWithoutErrorHandling(f,A,P,N,q,Y){return this._styleExpression.evaluateWithoutErrorHandling(f,A,P,N,q,Y)}evaluate(f,A,P,N,q,Y){return this._styleExpression.evaluate(f,A,P,N,q,Y)}}class Es{constructor(f,A,P,N){this.kind=f,this.zoomStops=P,this._styleExpression=A,this.isStateDependent=f!=="camera"&&!Ea(A.expression),this.interpolationType=N}evaluateWithoutErrorHandling(f,A,P,N,q,Y){return this._styleExpression.evaluateWithoutErrorHandling(f,A,P,N,q,Y)}evaluate(f,A,P,N,q,Y){return this._styleExpression.evaluate(f,A,P,N,q,Y)}interpolationFactor(f,A,P){return this.interpolationType?Di.interpolationFactor(this.interpolationType,f,A,P):0}}function ps(_,f){const A=No(_,f);if(A.result==="error")return A;const P=A.value.expression,N=qs(P);if(!N&&!xo(f))return ma([new xn("","data expressions not supported")]);const q=kl(P,["zoom"]);if(!q&&!se(f))return ma([new xn("","zoom expressions not supported")]);const Y=Is(P);return Y||q?Y instanceof xn?ma([Y]):Y instanceof Di&&!Ue(f)?ma([new xn("",'"interpolate" expressions cannot be used with this property')]):Wl(Y?new Es(N?"camera":"composite",A.value,Y.labels,Y instanceof Di?Y.interpolation:void 0):new Ho(N?"constant":"source",A.value)):ma([new xn("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class Ur{constructor(f,A){this._parameters=f,this._specification=A,vt(this,Zi(this._parameters,this._specification))}static deserialize(f){return new Ur(f._parameters,f._specification)}static serialize(f){return{_parameters:f._parameters,_specification:f._specification}}}function Is(_){let f=null;if(_ instanceof pn)f=Is(_.result);else if(_ instanceof F){for(const A of _.args)if(f=Is(A),f)break}else(_ instanceof fa||_ instanceof Di)&&_.input instanceof Er&&_.input.name==="zoom"&&(f=_);return f instanceof xn||_.eachChild(A=>{const P=Is(A);P instanceof xn?f=P:!f&&P?f=new xn("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):f&&P&&f!==P&&(f=new xn("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),f}function bs(_){const f=_.key,A=_.value,P=_.valueSpec||{},N=_.objectElementValidators||{},q=_.style,Y=_.styleSpec;let oe=[];const de=kt(A);if(de!=="object")return[new ae(f,A,`object expected, ${de} found`)];for(const xe in A){const Re=xe.split(".")[0],Ve=P[Re]||P["*"];let it;if(N[Re])it=N[Re];else if(P[Re])it=Yo;else if(N["*"])it=N["*"];else{if(!P["*"]){oe.push(new ae(f,A[xe],`unknown property "${xe}"`));continue}it=Yo}oe=oe.concat(it({key:(f&&`${f}.`)+xe,value:A[xe],valueSpec:Ve,style:q,styleSpec:Y,object:A,objectKey:xe},A))}for(const xe in P)N[xe]||P[xe].required&&P[xe].default===void 0&&A[xe]===void 0&&oe.push(new ae(f,A,`missing required property "${xe}"`));return oe}function Xl(_){const f=_.value,A=_.valueSpec,P=_.style,N=_.styleSpec,q=_.key,Y=_.arrayElementValidator||Yo;if(kt(f)!=="array")return[new ae(q,f,`array expected, ${kt(f)} found`)];if(A.length&&f.length!==A.length)return[new ae(q,f,`array length ${A.length} expected, length ${f.length} found`)];if(A["min-length"]&&f.length<A["min-length"])return[new ae(q,f,`array length at least ${A["min-length"]} expected, length ${f.length} found`)];let oe={type:A.value,values:A.values};N.$version<7&&(oe.function=A.function),kt(A.value)==="object"&&(oe=A.value);let de=[];for(let xe=0;xe<f.length;xe++)de=de.concat(Y({array:f,arrayIndex:xe,value:f[xe],valueSpec:oe,style:P,styleSpec:N,key:`${q}[${xe}]`}));return de}function El(_){const f=_.key,A=_.value,P=_.valueSpec;let N=kt(A);return N==="number"&&A!=A&&(N="NaN"),N!=="number"?[new ae(f,A,`number expected, ${N} found`)]:"minimum"in P&&A<P.minimum?[new ae(f,A,`${A} is less than the minimum value ${P.minimum}`)]:"maximum"in P&&A>P.maximum?[new ae(f,A,`${A} is greater than the maximum value ${P.maximum}`)]:[]}function Nu(_){const f=_.valueSpec,A=Wt(_.value.type);let P,N,q,Y={};const oe=A!=="categorical"&&_.value.property===void 0,de=!oe,xe=kt(_.value.stops)==="array"&&kt(_.value.stops[0])==="array"&&kt(_.value.stops[0][0])==="object",Re=bs({key:_.key,value:_.value,valueSpec:_.styleSpec.function,style:_.style,styleSpec:_.styleSpec,objectElementValidators:{stops:function(ut){if(A==="identity")return[new ae(ut.key,ut.value,'identity function may not have a "stops" property')];let ht=[];const Gt=ut.value;return ht=ht.concat(Xl({key:ut.key,value:Gt,valueSpec:ut.valueSpec,style:ut.style,styleSpec:ut.styleSpec,arrayElementValidator:Ve})),kt(Gt)==="array"&&Gt.length===0&&ht.push(new ae(ut.key,Gt,"array must have at least one stop")),ht},default:function(ut){return Yo({key:ut.key,value:ut.value,valueSpec:f,style:ut.style,styleSpec:ut.styleSpec})}}});return A==="identity"&&oe&&Re.push(new ae(_.key,_.value,'missing required property "property"')),A==="identity"||_.value.stops||Re.push(new ae(_.key,_.value,'missing required property "stops"')),A==="exponential"&&_.valueSpec.expression&&!Ue(_.valueSpec)&&Re.push(new ae(_.key,_.value,"exponential functions not supported")),_.styleSpec.$version>=8&&(de&&!xo(_.valueSpec)?Re.push(new ae(_.key,_.value,"property functions not supported")):oe&&!se(_.valueSpec)&&Re.push(new ae(_.key,_.value,"zoom functions not supported"))),A!=="categorical"&&!xe||_.value.property!==void 0||Re.push(new ae(_.key,_.value,'"property" property is required')),Re;function Ve(ut){let ht=[];const Gt=ut.value,Ut=ut.key;if(kt(Gt)!=="array")return[new ae(Ut,Gt,`array expected, ${kt(Gt)} found`)];if(Gt.length!==2)return[new ae(Ut,Gt,`array length 2 expected, length ${Gt.length} found`)];if(xe){if(kt(Gt[0])!=="object")return[new ae(Ut,Gt,`object expected, ${kt(Gt[0])} found`)];if(Gt[0].zoom===void 0)return[new ae(Ut,Gt,"object stop key must have zoom")];if(Gt[0].value===void 0)return[new ae(Ut,Gt,"object stop key must have value")];if(q&&q>Wt(Gt[0].zoom))return[new ae(Ut,Gt[0].zoom,"stop zoom values must appear in ascending order")];Wt(Gt[0].zoom)!==q&&(q=Wt(Gt[0].zoom),N=void 0,Y={}),ht=ht.concat(bs({key:`${Ut}[0]`,value:Gt[0],valueSpec:{zoom:{}},style:ut.style,styleSpec:ut.styleSpec,objectElementValidators:{zoom:El,value:it}}))}else ht=ht.concat(it({key:`${Ut}[0]`,value:Gt[0],valueSpec:{},style:ut.style,styleSpec:ut.styleSpec},Gt));return Fo(di(Gt[1]))?ht.concat([new ae(`${Ut}[1]`,Gt[1],"expressions are not allowed in function stops.")]):ht.concat(Yo({key:`${Ut}[1]`,value:Gt[1],valueSpec:f,style:ut.style,styleSpec:ut.styleSpec}))}function it(ut,ht){const Gt=kt(ut.value),Ut=Wt(ut.value),vi=ut.value!==null?ut.value:ht;if(P){if(Gt!==P)return[new ae(ut.key,vi,`${Gt} stop domain type must match previous stop domain type ${P}`)]}else P=Gt;if(Gt!=="number"&&Gt!=="string"&&Gt!=="boolean")return[new ae(ut.key,vi,"stop domain value must be a number, string, or boolean")];if(Gt!=="number"&&A!=="categorical"){let Fi=`number expected, ${Gt} found`;return xo(f)&&A===void 0&&(Fi+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new ae(ut.key,vi,Fi)]}return A!=="categorical"||Gt!=="number"||isFinite(Ut)&&Math.floor(Ut)===Ut?A!=="categorical"&&Gt==="number"&&N!==void 0&&Ut<N?[new ae(ut.key,vi,"stop domain values must appear in ascending order")]:(N=Ut,A==="categorical"&&Ut in Y?[new ae(ut.key,vi,"stop domain values must be unique")]:(Y[Ut]=!0,[])):[new ae(ut.key,vi,`integer expected, found ${Ut}`)]}}function Ia(_){const f=(_.expressionContext==="property"?ps:No)(di(_.value),_.valueSpec);if(f.result==="error")return f.value.map(P=>new ae(`${_.key}${P.key}`,_.value,P.message));const A=f.value.expression||f.value._styleExpression.expression;if(_.expressionContext==="property"&&_.propertyKey==="text-font"&&!A.outputDefined())return[new ae(_.key,_.value,`Invalid data expression for "${_.propertyKey}". Output values must be contained as literals within the expression.`)];if(_.expressionContext==="property"&&_.propertyType==="layout"&&!Ea(A))return[new ae(_.key,_.value,'"feature-state" data expressions are not supported with layout properties.')];if(_.expressionContext==="filter"&&!Ea(A))return[new ae(_.key,_.value,'"feature-state" data expressions are not supported with filters.')];if(_.expressionContext&&_.expressionContext.indexOf("cluster")===0){if(!kl(A,["zoom","feature-state"]))return[new ae(_.key,_.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(_.expressionContext==="cluster-initial"&&!qs(A))return[new ae(_.key,_.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function Il(_){const f=_.key,A=_.value,P=_.valueSpec,N=[];return Array.isArray(P.values)?P.values.indexOf(Wt(A))===-1&&N.push(new ae(f,A,`expected one of [${P.values.join(", ")}], ${JSON.stringify(A)} found`)):Object.keys(P.values).indexOf(Wt(A))===-1&&N.push(new ae(f,A,`expected one of [${Object.keys(P.values).join(", ")}], ${JSON.stringify(A)} found`)),N}function rl(_){if(_===!0||_===!1)return!0;if(!Array.isArray(_)||_.length===0)return!1;switch(_[0]){case"has":return _.length>=2&&_[1]!=="$id"&&_[1]!=="$type";case"in":return _.length>=3&&(typeof _[1]!="string"||Array.isArray(_[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return _.length!==3||Array.isArray(_[1])||Array.isArray(_[2]);case"any":case"all":for(const f of _.slice(1))if(!rl(f)&&typeof f!="boolean")return!1;return!0;default:return!0}}const ju={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function Fs(_){if(_==null)return{filter:()=>!0,needGeometry:!1};rl(_)||(_=Ua(_));const f=No(_,ju);if(f.result==="error")throw new Error(f.value.map(A=>`${A.key}: ${A.message}`).join(", "));return{filter:(A,P,N)=>f.value.evaluate(A,P,{},N),needGeometry:Yl(_)}}function yu(_,f){return _<f?-1:_>f?1:0}function Yl(_){if(!Array.isArray(_))return!1;if(_[0]==="within")return!0;for(let f=1;f<_.length;f++)if(Yl(_[f]))return!0;return!1}function Ua(_){if(!_)return!0;const f=_[0];return _.length<=1?f!=="any":f==="=="?_u(_[1],_[2],"=="):f==="!="?ol(_u(_[1],_[2],"==")):f==="<"||f===">"||f==="<="||f===">="?_u(_[1],_[2],f):f==="any"?(A=_.slice(1),["any"].concat(A.map(Ua))):f==="all"?["all"].concat(_.slice(1).map(Ua)):f==="none"?["all"].concat(_.slice(1).map(Ua).map(ol)):f==="in"?Rs(_[1],_.slice(2)):f==="!in"?ol(Rs(_[1],_.slice(2))):f==="has"?vu(_[1]):f==="!has"?ol(vu(_[1])):f!=="within"||_;var A}function _u(_,f,A){switch(_){case"$type":return[`filter-type-${A}`,f];case"$id":return[`filter-id-${A}`,f];default:return[`filter-${A}`,_,f]}}function Rs(_,f){if(f.length===0)return!1;switch(_){case"$type":return["filter-type-in",["literal",f]];case"$id":return["filter-id-in",["literal",f]];default:return f.length>200&&!f.some(A=>typeof A!=typeof f[0])?["filter-in-large",_,["literal",f.sort(yu)]]:["filter-in-small",_,["literal",f]]}}function vu(_){switch(_){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",_]}}function ol(_){return["!",_]}function Zl(_){return rl(di(_.value))?Ia(vt({},_,{expressionContext:"filter",valueSpec:{value:"boolean"}})):Ta(_)}function Ta(_){const f=_.value,A=_.key;if(kt(f)!=="array")return[new ae(A,f,`array expected, ${kt(f)} found`)];const P=_.styleSpec;let N,q=[];if(f.length<1)return[new ae(A,f,"filter array must have at least 1 element")];switch(q=q.concat(Il({key:`${A}[0]`,value:f[0],valueSpec:P.filter_operator,style:_.style,styleSpec:_.styleSpec})),Wt(f[0])){case"<":case"<=":case">":case">=":f.length>=2&&Wt(f[1])==="$type"&&q.push(new ae(A,f,`"$type" cannot be use with operator "${f[0]}"`));case"==":case"!=":f.length!==3&&q.push(new ae(A,f,`filter array for operator "${f[0]}" must have 3 elements`));case"in":case"!in":f.length>=2&&(N=kt(f[1]),N!=="string"&&q.push(new ae(`${A}[1]`,f[1],`string expected, ${N} found`)));for(let Y=2;Y<f.length;Y++)N=kt(f[Y]),Wt(f[1])==="$type"?q=q.concat(Il({key:`${A}[${Y}]`,value:f[Y],valueSpec:P.geometry_type,style:_.style,styleSpec:_.styleSpec})):N!=="string"&&N!=="number"&&N!=="boolean"&&q.push(new ae(`${A}[${Y}]`,f[Y],`string, number, or boolean expected, ${N} found`));break;case"any":case"all":case"none":for(let Y=1;Y<f.length;Y++)q=q.concat(Ta({key:`${A}[${Y}]`,value:f[Y],style:_.style,styleSpec:_.styleSpec}));break;case"has":case"!has":N=kt(f[1]),f.length!==2?q.push(new ae(A,f,`filter array for "${f[0]}" operator must have 2 elements`)):N!=="string"&&q.push(new ae(`${A}[1]`,f[1],`string expected, ${N} found`));break;case"within":N=kt(f[1]),f.length!==2?q.push(new ae(A,f,`filter array for "${f[0]}" operator must have 2 elements`)):N!=="object"&&q.push(new ae(`${A}[1]`,f[1],`object expected, ${N} found`))}return q}function Tl(_,f){const A=_.key,P=_.style,N=_.styleSpec,q=_.value,Y=_.objectKey,oe=N[`${f}_${_.layerType}`];if(!oe)return[];const de=Y.match(/^(.*)-transition$/);if(f==="paint"&&de&&oe[de[1]]&&oe[de[1]].transition)return Yo({key:A,value:q,valueSpec:N.transition,style:P,styleSpec:N});const xe=_.valueSpec||oe[Y];if(!xe)return[new ae(A,q,`unknown property "${Y}"`)];let Re;if(kt(q)==="string"&&xo(xe)&&!xe.tokens&&(Re=/^{([^}]+)}$/.exec(q)))return[new ae(A,q,`"${Y}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(Re[1])} }\`.`)];const Ve=[];return _.layerType==="symbol"&&(Y==="text-field"&&P&&!P.glyphs&&Ve.push(new ae(A,q,'use of "text-field" requires a style "glyphs" property')),Y==="text-font"&&Xt(di(q))&&Wt(q.type)==="identity"&&Ve.push(new ae(A,q,'"text-font" does not support identity functions'))),Ve.concat(Yo({key:_.key,value:q,valueSpec:xe,style:P,styleSpec:N,expressionContext:"property",propertyType:f,propertyKey:Y}))}function Fc(_){return Tl(_,"paint")}function Rc(_){return Tl(_,"layout")}function Ll(_){let f=[];const A=_.value,P=_.key,N=_.style,q=_.styleSpec;A.type||A.ref||f.push(new ae(P,A,'either "type" or "ref" is required'));let Y=Wt(A.type);const oe=Wt(A.ref);if(A.id){const de=Wt(A.id);for(let xe=0;xe<_.arrayIndex;xe++){const Re=N.layers[xe];Wt(Re.id)===de&&f.push(new ae(P,A.id,`duplicate layer id "${A.id}", previously used at line ${Re.id.__line__}`))}}if("ref"in A){let de;["type","source","source-layer","filter","layout"].forEach(xe=>{xe in A&&f.push(new ae(P,A[xe],`"${xe}" is prohibited for ref layers`))}),N.layers.forEach(xe=>{Wt(xe.id)===oe&&(de=xe)}),de?de.ref?f.push(new ae(P,A.ref,"ref cannot reference another ref layer")):Y=Wt(de.type):f.push(new ae(P,A.ref,`ref layer "${oe}" not found`))}else if(Y!=="background")if(A.source){const de=N.sources&&N.sources[A.source],xe=de&&Wt(de.type);de?xe==="vector"&&Y==="raster"?f.push(new ae(P,A.source,`layer "${A.id}" requires a raster source`)):xe==="raster"&&Y!=="raster"?f.push(new ae(P,A.source,`layer "${A.id}" requires a vector source`)):xe!=="vector"||A["source-layer"]?xe==="raster-dem"&&Y!=="hillshade"?f.push(new ae(P,A.source,"raster-dem source can only be used with layer type 'hillshade'.")):Y!=="line"||!A.paint||!A.paint["line-gradient"]||xe==="geojson"&&de.lineMetrics||f.push(new ae(P,A,`layer "${A.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):f.push(new ae(P,A,`layer "${A.id}" must specify a "source-layer"`)):f.push(new ae(P,A.source,`source "${A.source}" not found`))}else f.push(new ae(P,A,'missing required property "source"'));return f=f.concat(bs({key:P,value:A,valueSpec:q.layer,style:_.style,styleSpec:_.styleSpec,objectElementValidators:{"*":()=>[],type:()=>Yo({key:`${P}.type`,value:A.type,valueSpec:q.layer.type,style:_.style,styleSpec:_.styleSpec,object:A,objectKey:"type"}),filter:Zl,layout:de=>bs({layer:A,key:de.key,value:de.value,style:de.style,styleSpec:de.styleSpec,objectElementValidators:{"*":xe=>Rc(vt({layerType:Y},xe))}}),paint:de=>bs({layer:A,key:de.key,value:de.value,style:de.style,styleSpec:de.styleSpec,objectElementValidators:{"*":xe=>Fc(vt({layerType:Y},xe))}})}})),f}function Bs(_){const f=_.value,A=_.key,P=kt(f);return P!=="string"?[new ae(A,f,`string expected, ${P} found`)]:[]}const La={promoteId:function({key:_,value:f}){if(kt(f)==="string")return Bs({key:_,value:f});{const A=[];for(const P in f)A.push(...Bs({key:`${_}.${P}`,value:f[P]}));return A}}};function Pa(_){const f=_.value,A=_.key,P=_.styleSpec,N=_.style;if(!f.type)return[new ae(A,f,'"type" is required')];const q=Wt(f.type);let Y;switch(q){case"vector":case"raster":case"raster-dem":return Y=bs({key:A,value:f,valueSpec:P[`source_${q.replace("-","_")}`],style:_.style,styleSpec:P,objectElementValidators:La}),Y;case"geojson":if(Y=bs({key:A,value:f,valueSpec:P.source_geojson,style:N,styleSpec:P,objectElementValidators:La}),f.cluster)for(const oe in f.clusterProperties){const[de,xe]=f.clusterProperties[oe],Re=typeof de=="string"?[de,["accumulated"],["get",oe]]:de;Y.push(...Ia({key:`${A}.${oe}.map`,value:xe,expressionContext:"cluster-map"})),Y.push(...Ia({key:`${A}.${oe}.reduce`,value:Re,expressionContext:"cluster-reduce"}))}return Y;case"video":return bs({key:A,value:f,valueSpec:P.source_video,style:N,styleSpec:P});case"image":return bs({key:A,value:f,valueSpec:P.source_image,style:N,styleSpec:P});case"canvas":return[new ae(A,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return Il({key:`${A}.type`,value:f.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:N,styleSpec:P})}}function ra(_){const f=_.value,A=_.styleSpec,P=A.light,N=_.style;let q=[];const Y=kt(f);if(f===void 0)return q;if(Y!=="object")return q=q.concat([new ae("light",f,`object expected, ${Y} found`)]),q;for(const oe in f){const de=oe.match(/^(.*)-transition$/);q=q.concat(de&&P[de[1]]&&P[de[1]].transition?Yo({key:oe,value:f[oe],valueSpec:A.transition,style:N,styleSpec:A}):P[oe]?Yo({key:oe,value:f[oe],valueSpec:P[oe],style:N,styleSpec:A}):[new ae(oe,f[oe],`unknown property "${oe}"`)])}return q}function us(_){const f=_.value,A=_.styleSpec,P=A.terrain,N=_.style;let q=[];const Y=kt(f);if(f===void 0)return q;if(Y!=="object")return q=q.concat([new ae("terrain",f,`object expected, ${Y} found`)]),q;for(const oe in f)q=q.concat(P[oe]?Yo({key:oe,value:f[oe],valueSpec:P[oe],style:N,styleSpec:A}):[new ae(oe,f[oe],`unknown property "${oe}"`)]);return q}const sl={"*":()=>[],array:Xl,boolean:function(_){const f=_.value,A=_.key,P=kt(f);return P!=="boolean"?[new ae(A,f,`boolean expected, ${P} found`)]:[]},number:El,color:function(_){const f=_.key,A=_.value,P=kt(A);return P!=="string"?[new ae(f,A,`color expected, ${P} found`)]:bo(A)===null?[new ae(f,A,`color expected, "${A}" found`)]:[]},constants:et,enum:Il,filter:Zl,function:Nu,layer:Ll,object:bs,source:Pa,light:ra,terrain:us,string:Bs,formatted:function(_){return Bs(_).length===0?[]:Ia(_)},resolvedImage:function(_){return Bs(_).length===0?[]:Ia(_)},padding:function(_){const f=_.key,A=_.value;if(kt(A)==="array"){if(A.length<1||A.length>4)return[new ae(f,A,`padding requires 1 to 4 values; ${A.length} values found`)];const P={type:"number"};let N=[];for(let q=0;q<A.length;q++)N=N.concat(Yo({key:`${f}[${q}]`,value:A[q],valueSpec:P}));return N}return El({key:f,value:A,valueSpec:{}})}};function Yo(_){const f=_.value,A=_.valueSpec,P=_.styleSpec;return A.expression&&Xt(Wt(f))?Nu(_):A.expression&&Fo(di(f))?Ia(_):A.type&&sl[A.type]?sl[A.type](_):bs(vt({},_,{valueSpec:A.type?P[A.type]:A}))}function Uu(_){const f=_.value,A=_.key,P=Bs(_);return P.length||(f.indexOf("{fontstack}")===-1&&P.push(new ae(A,f,'"glyphs" url must include a "{fontstack}" token')),f.indexOf("{range}")===-1&&P.push(new ae(A,f,'"glyphs" url must include a "{range}" token'))),P}function Ma(_,f=Q){let A=[];return A=A.concat(Yo({key:"",value:_,valueSpec:f.$root,styleSpec:f,style:_,objectElementValidators:{glyphs:Uu,"*":()=>[]}})),_.constants&&(A=A.concat(et({key:"constants",value:_.constants,style:_,styleSpec:f}))),oa(A)}function oa(_){return[].concat(_).sort((f,A)=>f.line-A.line)}function Yr(_){return function(...f){return oa(_.apply(this,f))}}Ma.source=Yr(Pa),Ma.light=Yr(ra),Ma.terrain=Yr(us),Ma.layer=Yr(Ll),Ma.filter=Yr(Zl),Ma.paintProperty=Yr(Fc),Ma.layoutProperty=Yr(Rc);const ga=Ma,Pl=ga.light,Vu=ga.paintProperty,bu=ga.layoutProperty;function Gs(_,f){let A=!1;if(f&&f.length)for(const P of f)_.fire(new Jt(new Error(P.message))),A=!0;return A}class Ml{constructor(f,A,P){const N=this.cells=[];if(f instanceof ArrayBuffer){this.arrayBuffer=f;const Y=new Int32Array(this.arrayBuffer);f=Y[0],this.d=(A=Y[1])+2*(P=Y[2]);for(let de=0;de<this.d*this.d;de++){const xe=Y[3+de],Re=Y[3+de+1];N.push(xe===Re?null:Y.subarray(xe,Re))}const oe=Y[3+N.length+1];this.keys=Y.subarray(Y[3+N.length],oe),this.bboxes=Y.subarray(oe),this.insert=this._insertReadonly}else{this.d=A+2*P;for(let Y=0;Y<this.d*this.d;Y++)N.push([]);this.keys=[],this.bboxes=[]}this.n=A,this.extent=f,this.padding=P,this.scale=A/f,this.uid=0;const q=P/A*f;this.min=-q,this.max=f+q}insert(f,A,P,N,q){this._forEachCell(A,P,N,q,this._insertCell,this.uid++,void 0,void 0),this.keys.push(f),this.bboxes.push(A),this.bboxes.push(P),this.bboxes.push(N),this.bboxes.push(q)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(f,A,P,N,q,Y){this.cells[q].push(Y)}query(f,A,P,N,q){const Y=this.min,oe=this.max;if(f<=Y&&A<=Y&&oe<=P&&oe<=N&&!q)return Array.prototype.slice.call(this.keys);{const de=[];return this._forEachCell(f,A,P,N,this._queryCell,de,{},q),de}}_queryCell(f,A,P,N,q,Y,oe,de){const xe=this.cells[q];if(xe!==null){const Re=this.keys,Ve=this.bboxes;for(let it=0;it<xe.length;it++){const ut=xe[it];if(oe[ut]===void 0){const ht=4*ut;(de?de(Ve[ht+0],Ve[ht+1],Ve[ht+2],Ve[ht+3]):f<=Ve[ht+2]&&A<=Ve[ht+3]&&P>=Ve[ht+0]&&N>=Ve[ht+1])?(oe[ut]=!0,Y.push(Re[ut])):oe[ut]=!1}}}}_forEachCell(f,A,P,N,q,Y,oe,de){const xe=this._convertToCellCoord(f),Re=this._convertToCellCoord(A),Ve=this._convertToCellCoord(P),it=this._convertToCellCoord(N);for(let ut=xe;ut<=Ve;ut++)for(let ht=Re;ht<=it;ht++){const Gt=this.d*ht+ut;if((!de||de(this._convertFromCellCoord(ut),this._convertFromCellCoord(ht),this._convertFromCellCoord(ut+1),this._convertFromCellCoord(ht+1)))&&q.call(this,f,A,P,N,Gt,Y,oe,de))return}}_convertFromCellCoord(f){return(f-this.padding)/this.scale}_convertToCellCoord(f){return Math.max(0,Math.min(this.d-1,Math.floor(f*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;const f=this.cells,A=3+this.cells.length+1+1;let P=0;for(let Y=0;Y<this.cells.length;Y++)P+=this.cells[Y].length;const N=new Int32Array(A+P+this.keys.length+this.bboxes.length);N[0]=this.extent,N[1]=this.n,N[2]=this.padding;let q=A;for(let Y=0;Y<f.length;Y++){const oe=f[Y];N[3+Y]=q,N.set(oe,q),q+=oe.length}return N[3+f.length]=q,N.set(this.keys,q),q+=this.keys.length,N[3+f.length+1]=q,N.set(this.bboxes,q),q+=this.bboxes.length,N.buffer}static serialize(f,A){const P=f.toArrayBuffer();return A&&A.push(P),{buffer:P}}static deserialize(f){return new Ml(f.buffer)}}const ms={};function Dn(_,f,A={}){if(ms[_])throw new Error(`${_} is already registered.`);Object.defineProperty(f,"_classRegistryKey",{value:_,writeable:!1}),ms[_]={klass:f,omit:A.omit||[],shallow:A.shallow||[]}}Dn("Object",Object),Dn("TransferableGridIndex",Ml),Dn("Color",gt),Dn("Error",Error),Dn("AJAXError",dt),Dn("ResolvedImage",ei),Dn("StylePropertyFunction",Ur),Dn("StyleExpression",$r,{omit:["_evaluator"]}),Dn("ZoomDependentExpression",Es),Dn("ZoomConstantExpression",Ho),Dn("CompoundExpression",Er,{omit:["_evaluate"]});for(const _ in Un)Un[_]._classRegistryKey||Dn(`Expression_${_}`,Un[_]);function Ro(_){return _&&typeof ArrayBuffer<"u"&&(_ instanceof ArrayBuffer||_.constructor&&_.constructor.name==="ArrayBuffer")}function Gr(_,f){if(_==null||typeof _=="boolean"||typeof _=="number"||typeof _=="string"||_ instanceof Boolean||_ instanceof Number||_ instanceof String||_ instanceof Date||_ instanceof RegExp||_ instanceof Blob)return _;if(Ro(_)||ve(_))return f&&f.push(_),_;if(ArrayBuffer.isView(_)){const A=_;return f&&f.push(A.buffer),A}if(_ instanceof ImageData)return f&&f.push(_.data.buffer),_;if(Array.isArray(_)){const A=[];for(const P of _)A.push(Gr(P,f));return A}if(typeof _=="object"){const A=_.constructor,P=A._classRegistryKey;if(!P)throw new Error("can't serialize object of unregistered class");if(!ms[P])throw new Error(`${P} is not registered.`);const N=A.serialize?A.serialize(_,f):{};if(A.serialize){if(f&&N===f[f.length-1])throw new Error("statically serialized object won't survive transfer of $name property")}else{for(const q in _){if(!_.hasOwnProperty(q)||ms[P].omit.indexOf(q)>=0)continue;const Y=_[q];N[q]=ms[P].shallow.indexOf(q)>=0?Y:Gr(Y,f)}_ instanceof Error&&(N.message=_.message)}if(N.$name)throw new Error("$name property is reserved for worker serialization logic.");return P!=="Object"&&(N.$name=P),N}throw new Error("can't serialize object of type "+typeof _)}function Lo(_){if(_==null||typeof _=="boolean"||typeof _=="number"||typeof _=="string"||_ instanceof Boolean||_ instanceof Number||_ instanceof String||_ instanceof Date||_ instanceof RegExp||_ instanceof Blob||Ro(_)||ve(_)||ArrayBuffer.isView(_)||_ instanceof ImageData)return _;if(Array.isArray(_))return _.map(Lo);if(typeof _=="object"){const f=_.$name||"Object";if(!ms[f])throw new Error(`can't deserialize unregistered class ${f}`);const{klass:A}=ms[f];if(!A)throw new Error(`can't deserialize unregistered class ${f}`);if(A.deserialize)return A.deserialize(_);const P=Object.create(A.prototype);for(const N of Object.keys(_)){if(N==="$name")continue;const q=_[N];P[N]=ms[f].shallow.indexOf(N)>=0?q:Lo(q)}return P}throw new Error("can't deserialize object of type "+typeof _)}class rs{constructor(){this.first=!0}update(f,A){const P=Math.floor(f);return this.first?(this.first=!1,this.lastIntegerZoom=P,this.lastIntegerZoomTime=0,this.lastZoom=f,this.lastFloorZoom=P,!0):(this.lastFloorZoom>P?(this.lastIntegerZoom=P+1,this.lastIntegerZoomTime=A):this.lastFloorZoom<P&&(this.lastIntegerZoom=P,this.lastIntegerZoomTime=A),f!==this.lastZoom&&(this.lastZoom=f,this.lastFloorZoom=P,!0))}}const _n={"Latin-1 Supplement":_=>_>=128&&_<=255,Arabic:_=>_>=1536&&_<=1791,"Arabic Supplement":_=>_>=1872&&_<=1919,"Arabic Extended-A":_=>_>=2208&&_<=2303,"Hangul Jamo":_=>_>=4352&&_<=4607,"Unified Canadian Aboriginal Syllabics":_=>_>=5120&&_<=5759,Khmer:_=>_>=6016&&_<=6143,"Unified Canadian Aboriginal Syllabics Extended":_=>_>=6320&&_<=6399,"General Punctuation":_=>_>=8192&&_<=8303,"Letterlike Symbols":_=>_>=8448&&_<=8527,"Number Forms":_=>_>=8528&&_<=8591,"Miscellaneous Technical":_=>_>=8960&&_<=9215,"Control Pictures":_=>_>=9216&&_<=9279,"Optical Character Recognition":_=>_>=9280&&_<=9311,"Enclosed Alphanumerics":_=>_>=9312&&_<=9471,"Geometric Shapes":_=>_>=9632&&_<=9727,"Miscellaneous Symbols":_=>_>=9728&&_<=9983,"Miscellaneous Symbols and Arrows":_=>_>=11008&&_<=11263,"CJK Radicals Supplement":_=>_>=11904&&_<=12031,"Kangxi Radicals":_=>_>=12032&&_<=12255,"Ideographic Description Characters":_=>_>=12272&&_<=12287,"CJK Symbols and Punctuation":_=>_>=12288&&_<=12351,Hiragana:_=>_>=12352&&_<=12447,Katakana:_=>_>=12448&&_<=12543,Bopomofo:_=>_>=12544&&_<=12591,"Hangul Compatibility Jamo":_=>_>=12592&&_<=12687,Kanbun:_=>_>=12688&&_<=12703,"Bopomofo Extended":_=>_>=12704&&_<=12735,"CJK Strokes":_=>_>=12736&&_<=12783,"Katakana Phonetic Extensions":_=>_>=12784&&_<=12799,"Enclosed CJK Letters and Months":_=>_>=12800&&_<=13055,"CJK Compatibility":_=>_>=13056&&_<=13311,"CJK Unified Ideographs Extension A":_=>_>=13312&&_<=19903,"Yijing Hexagram Symbols":_=>_>=19904&&_<=19967,"CJK Unified Ideographs":_=>_>=19968&&_<=40959,"Yi Syllables":_=>_>=40960&&_<=42127,"Yi Radicals":_=>_>=42128&&_<=42191,"Hangul Jamo Extended-A":_=>_>=43360&&_<=43391,"Hangul Syllables":_=>_>=44032&&_<=55215,"Hangul Jamo Extended-B":_=>_>=55216&&_<=55295,"Private Use Area":_=>_>=57344&&_<=63743,"CJK Compatibility Ideographs":_=>_>=63744&&_<=64255,"Arabic Presentation Forms-A":_=>_>=64336&&_<=65023,"Vertical Forms":_=>_>=65040&&_<=65055,"CJK Compatibility Forms":_=>_>=65072&&_<=65103,"Small Form Variants":_=>_>=65104&&_<=65135,"Arabic Presentation Forms-B":_=>_>=65136&&_<=65279,"Halfwidth and Fullwidth Forms":_=>_>=65280&&_<=65519};function Da(_){for(const f of _)if(Bc(f.charCodeAt(0)))return!0;return!1}function qu(_){for(const f of _)if(!Hu(f.charCodeAt(0)))return!1;return!0}function Hu(_){return!(_n.Arabic(_)||_n["Arabic Supplement"](_)||_n["Arabic Extended-A"](_)||_n["Arabic Presentation Forms-A"](_)||_n["Arabic Presentation Forms-B"](_))}function Bc(_){return!(_!==746&&_!==747&&(_<4352||!(_n["Bopomofo Extended"](_)||_n.Bopomofo(_)||_n["CJK Compatibility Forms"](_)&&!(_>=65097&&_<=65103)||_n["CJK Compatibility Ideographs"](_)||_n["CJK Compatibility"](_)||_n["CJK Radicals Supplement"](_)||_n["CJK Strokes"](_)||!(!_n["CJK Symbols and Punctuation"](_)||_>=12296&&_<=12305||_>=12308&&_<=12319||_===12336)||_n["CJK Unified Ideographs Extension A"](_)||_n["CJK Unified Ideographs"](_)||_n["Enclosed CJK Letters and Months"](_)||_n["Hangul Compatibility Jamo"](_)||_n["Hangul Jamo Extended-A"](_)||_n["Hangul Jamo Extended-B"](_)||_n["Hangul Jamo"](_)||_n["Hangul Syllables"](_)||_n.Hiragana(_)||_n["Ideographic Description Characters"](_)||_n.Kanbun(_)||_n["Kangxi Radicals"](_)||_n["Katakana Phonetic Extensions"](_)||_n.Katakana(_)&&_!==12540||!(!_n["Halfwidth and Fullwidth Forms"](_)||_===65288||_===65289||_===65293||_>=65306&&_<=65310||_===65339||_===65341||_===65343||_>=65371&&_<=65503||_===65507||_>=65512&&_<=65519)||!(!_n["Small Form Variants"](_)||_>=65112&&_<=65118||_>=65123&&_<=65126)||_n["Unified Canadian Aboriginal Syllabics"](_)||_n["Unified Canadian Aboriginal Syllabics Extended"](_)||_n["Vertical Forms"](_)||_n["Yijing Hexagram Symbols"](_)||_n["Yi Syllables"](_)||_n["Yi Radicals"](_))))}function hh(_){return!(Bc(_)||function(f){return!!(_n["Latin-1 Supplement"](f)&&(f===167||f===169||f===174||f===177||f===188||f===189||f===190||f===215||f===247)||_n["General Punctuation"](f)&&(f===8214||f===8224||f===8225||f===8240||f===8241||f===8251||f===8252||f===8258||f===8263||f===8264||f===8265||f===8273)||_n["Letterlike Symbols"](f)||_n["Number Forms"](f)||_n["Miscellaneous Technical"](f)&&(f>=8960&&f<=8967||f>=8972&&f<=8991||f>=8996&&f<=9e3||f===9003||f>=9085&&f<=9114||f>=9150&&f<=9165||f===9167||f>=9169&&f<=9179||f>=9186&&f<=9215)||_n["Control Pictures"](f)&&f!==9251||_n["Optical Character Recognition"](f)||_n["Enclosed Alphanumerics"](f)||_n["Geometric Shapes"](f)||_n["Miscellaneous Symbols"](f)&&!(f>=9754&&f<=9759)||_n["Miscellaneous Symbols and Arrows"](f)&&(f>=11026&&f<=11055||f>=11088&&f<=11097||f>=11192&&f<=11243)||_n["CJK Symbols and Punctuation"](f)||_n.Katakana(f)||_n["Private Use Area"](f)||_n["CJK Compatibility Forms"](f)||_n["Small Form Variants"](f)||_n["Halfwidth and Fullwidth Forms"](f)||f===8734||f===8756||f===8757||f>=9984&&f<=10087||f>=10102&&f<=10131||f===65532||f===65533)}(_))}function fh(_){return _>=1424&&_<=2303||_n["Arabic Presentation Forms-A"](_)||_n["Arabic Presentation Forms-B"](_)}function zh(_,f){return!(!f&&fh(_)||_>=2304&&_<=3583||_>=3840&&_<=4255||_n.Khmer(_))}function Lr(_){for(const f of _)if(fh(f.charCodeAt(0)))return!0;return!1}const zc="deferred",lc="loading",Zo="loaded";let Ks=null,Go="unavailable",Va=null;const uc=function(_){_&&typeof _=="string"&&_.indexOf("NetworkError")>-1&&(Go="error"),Ks&&Ks(_)};function wu(){xu.fire(new xi("pluginStateChange",{pluginStatus:Go,pluginURL:Va}))}const xu=new Me,Kl=function(){return Go},eo=function(){if(Go!==zc||!Va)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");Go=lc,wu(),Va&&Yt({url:Va},_=>{_?uc(_):(Go=Zo,wu())})},ya={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:()=>Go===Zo||ya.applyArabicShaping!=null,isLoading:()=>Go===lc,setState(_){if(!ie())throw new Error("Cannot set the state of the rtl-text-plugin when not in the web-worker context");Go=_.pluginStatus,Va=_.pluginURL},isParsed(){if(!ie())throw new Error("rtl-text-plugin is only parsed on the worker-threads");return ya.applyArabicShaping!=null&&ya.processBidirectionalText!=null&&ya.processStyledBidirectionalText!=null},getPluginURL(){if(!ie())throw new Error("rtl-text-plugin url can only be queried from the worker threads");return Va}};class Bo{constructor(f,A){this.zoom=f,A?(this.now=A.now,this.fadeDuration=A.fadeDuration,this.zoomHistory=A.zoomHistory,this.transition=A.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new rs,this.transition={})}isSupportedScript(f){return function(A,P){for(const N of A)if(!zh(N.charCodeAt(0),P))return!1;return!0}(f,ya.isLoaded())}crossFadingFactor(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const f=this.zoom,A=f-Math.floor(f),P=this.crossFadingFactor();return f>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:A+(1-A)*P}:{fromScale:.5,toScale:1,t:1-(1-P)*A}}}class Au{constructor(f,A){this.property=f,this.value=A,this.expression=function(P,N){if(Xt(P))return new Ur(P,N);if(Fo(P)){const q=ps(P,N);if(q.result==="error")throw new Error(q.value.map(Y=>`${Y.key}: ${Y.message}`).join(", "));return q.value}{let q=P;return N.type==="color"&&typeof P=="string"?q=gt.parse(P):N.type!=="padding"||typeof P!="number"&&!Array.isArray(P)||(q=Bt.parse(P)),{kind:"constant",evaluate:()=>q}}}(A===void 0?f.specification.default:A,f.specification)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}possiblyEvaluate(f,A,P){return this.property.possiblyEvaluate(this,f,A,P)}}class ku{constructor(f){this.property=f,this.value=new Au(f,void 0)}transitioned(f,A){return new Nh(this.property,this.value,A,C({},f.transition,this.transition),f.now)}untransitioned(){return new Nh(this.property,this.value,null,{},0)}}class Nc{constructor(f){this._properties=f,this._values=Object.create(f.defaultTransitionablePropertyValues)}getValue(f){return V(this._values[f].value.value)}setValue(f,A){Object.prototype.hasOwnProperty.call(this._values,f)||(this._values[f]=new ku(this._values[f].property)),this._values[f].value=new Au(this._values[f].property,A===null?void 0:V(A))}getTransition(f){return V(this._values[f].transition)}setTransition(f,A){Object.prototype.hasOwnProperty.call(this._values,f)||(this._values[f]=new ku(this._values[f].property)),this._values[f].transition=V(A)||void 0}serialize(){const f={};for(const A of Object.keys(this._values)){const P=this.getValue(A);P!==void 0&&(f[A]=P);const N=this.getTransition(A);N!==void 0&&(f[`${A}-transition`]=N)}return f}transitioned(f,A){const P=new al(this._properties);for(const N of Object.keys(this._values))P._values[N]=this._values[N].transitioned(f,A._values[N]);return P}untransitioned(){const f=new al(this._properties);for(const A of Object.keys(this._values))f._values[A]=this._values[A].untransitioned();return f}}class Nh{constructor(f,A,P,N,q){this.property=f,this.value=A,this.begin=q+N.delay||0,this.end=this.begin+N.duration||0,f.specification.transition&&(N.delay||N.duration)&&(this.prior=P)}possiblyEvaluate(f,A,P){const N=f.now||0,q=this.value.possiblyEvaluate(f,A,P),Y=this.prior;if(Y){if(N>this.end)return this.prior=null,q;if(this.value.isDataDriven())return this.prior=null,q;if(N<this.begin)return Y.possiblyEvaluate(f,A,P);{const oe=(N-this.begin)/(this.end-this.begin);return this.property.interpolate(Y.possiblyEvaluate(f,A,P),q,function(de){if(de<=0)return 0;if(de>=1)return 1;const xe=de*de,Re=xe*de;return 4*(de<.5?Re:3*(de-xe)+Re-.75)}(oe))}}return q}}class al{constructor(f){this._properties=f,this._values=Object.create(f.defaultTransitioningPropertyValues)}possiblyEvaluate(f,A,P){const N=new cc(this._properties);for(const q of Object.keys(this._values))N._values[q]=this._values[q].possiblyEvaluate(f,A,P);return N}hasTransition(){for(const f of Object.keys(this._values))if(this._values[f].prior)return!0;return!1}}class jh{constructor(f){this._properties=f,this._values=Object.create(f.defaultPropertyValues)}getValue(f){return V(this._values[f].value)}setValue(f,A){this._values[f]=new Au(this._values[f].property,A===null?void 0:V(A))}serialize(){const f={};for(const A of Object.keys(this._values)){const P=this.getValue(A);P!==void 0&&(f[A]=P)}return f}possiblyEvaluate(f,A,P){const N=new cc(this._properties);for(const q of Object.keys(this._values))N._values[q]=this._values[q].possiblyEvaluate(f,A,P);return N}}class ll{constructor(f,A,P){this.property=f,this.value=A,this.parameters=P}isConstant(){return this.value.kind==="constant"}constantOr(f){return this.value.kind==="constant"?this.value.value:f}evaluate(f,A,P,N){return this.property.evaluate(this.value,this.parameters,f,A,P,N)}}class cc{constructor(f){this._properties=f,this._values=Object.create(f.defaultPossiblyEvaluatedValues)}get(f){return this._values[f]}}class tr{constructor(f){this.specification=f}possiblyEvaluate(f,A){if(f.isDataDriven())throw new Error("Value should not be data driven");return f.expression.evaluate(A)}interpolate(f,A,P){const N=nl[this.specification.type];return N?N(f,A,P):f}}class yr{constructor(f,A){this.specification=f,this.overrides=A}possiblyEvaluate(f,A,P,N){return new ll(this,f.expression.kind==="constant"||f.expression.kind==="camera"?{kind:"constant",value:f.expression.evaluate(A,null,{},P,N)}:f.expression,A)}interpolate(f,A,P){if(f.value.kind!=="constant"||A.value.kind!=="constant")return f;if(f.value.value===void 0||A.value.value===void 0)return new ll(this,{kind:"constant",value:void 0},f.parameters);const N=nl[this.specification.type];return N?new ll(this,{kind:"constant",value:N(f.value.value,A.value.value,P)},f.parameters):f}evaluate(f,A,P,N,q,Y){return f.kind==="constant"?f.value:f.evaluate(A,P,N,q,Y)}}class Gu extends yr{possiblyEvaluate(f,A,P,N){if(f.value===void 0)return new ll(this,{kind:"constant",value:void 0},A);if(f.expression.kind==="constant"){const q=f.expression.evaluate(A,null,{},P,N),Y=f.property.specification.type==="resolvedImage"&&typeof q!="string"?q.name:q,oe=this._calculate(Y,Y,Y,A);return new ll(this,{kind:"constant",value:oe},A)}if(f.expression.kind==="camera"){const q=this._calculate(f.expression.evaluate({zoom:A.zoom-1}),f.expression.evaluate({zoom:A.zoom}),f.expression.evaluate({zoom:A.zoom+1}),A);return new ll(this,{kind:"constant",value:q},A)}return new ll(this,f.expression,A)}evaluate(f,A,P,N,q,Y){if(f.kind==="source"){const oe=f.evaluate(A,P,N,q,Y);return this._calculate(oe,oe,oe,A)}return f.kind==="composite"?this._calculate(f.evaluate({zoom:Math.floor(A.zoom)-1},P,N),f.evaluate({zoom:Math.floor(A.zoom)},P,N),f.evaluate({zoom:Math.floor(A.zoom)+1},P,N),A):f.value}_calculate(f,A,P,N){return N.zoom>N.zoomHistory.lastIntegerZoom?{from:f,to:A}:{from:P,to:A}}interpolate(f){return f}}class hc{constructor(f){this.specification=f}possiblyEvaluate(f,A,P,N){if(f.value!==void 0){if(f.expression.kind==="constant"){const q=f.expression.evaluate(A,null,{},P,N);return this._calculate(q,q,q,A)}return this._calculate(f.expression.evaluate(new Bo(Math.floor(A.zoom-1),A)),f.expression.evaluate(new Bo(Math.floor(A.zoom),A)),f.expression.evaluate(new Bo(Math.floor(A.zoom+1),A)),A)}}_calculate(f,A,P,N){return N.zoom>N.zoomHistory.lastIntegerZoom?{from:f,to:A}:{from:P,to:A}}interpolate(f){return f}}class ws{constructor(f){this.specification=f}possiblyEvaluate(f,A,P,N){return!!f.expression.evaluate(A,null,{},P,N)}interpolate(){return!1}}class jo{constructor(f){this.properties=f,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(const A in f){const P=f[A];P.specification.overridable&&this.overridableProperties.push(A);const N=this.defaultPropertyValues[A]=new Au(P,void 0),q=this.defaultTransitionablePropertyValues[A]=new ku(P);this.defaultTransitioningPropertyValues[A]=q.untransitioned(),this.defaultPossiblyEvaluatedValues[A]=N.possiblyEvaluate({})}}}Dn("DataDrivenProperty",yr),Dn("DataConstantProperty",tr),Dn("CrossFadedDataDrivenProperty",Gu),Dn("CrossFadedProperty",hc),Dn("ColorRampProperty",ws);const Jl="-transition";class ul extends Me{constructor(f,A){if(super(),this.id=f.id,this.type=f.type,this._featureFilter={filter:()=>!0,needGeometry:!1},f.type!=="custom"&&(this.metadata=f.metadata,this.minzoom=f.minzoom,this.maxzoom=f.maxzoom,f.type!=="background"&&(this.source=f.source,this.sourceLayer=f["source-layer"],this.filter=f.filter),A.layout&&(this._unevaluatedLayout=new jh(A.layout)),A.paint)){this._transitionablePaint=new Nc(A.paint);for(const P in f.paint)this.setPaintProperty(P,f.paint[P],{validate:!1});for(const P in f.layout)this.setLayoutProperty(P,f.layout[P],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new cc(A.paint)}}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(f){return f==="visibility"?this.visibility:this._unevaluatedLayout.getValue(f)}setLayoutProperty(f,A,P={}){A!=null&&this._validate(bu,`layers.${this.id}.layout.${f}`,f,A,P)||(f!=="visibility"?this._unevaluatedLayout.setValue(f,A):this.visibility=A)}getPaintProperty(f){return f.endsWith(Jl)?this._transitionablePaint.getTransition(f.slice(0,-Jl.length)):this._transitionablePaint.getValue(f)}setPaintProperty(f,A,P={}){if(A!=null&&this._validate(Vu,`layers.${this.id}.paint.${f}`,f,A,P))return!1;if(f.endsWith(Jl))return this._transitionablePaint.setTransition(f.slice(0,-Jl.length),A||void 0),!1;{const N=this._transitionablePaint._values[f],q=N.property.specification["property-type"]==="cross-faded-data-driven",Y=N.value.isDataDriven(),oe=N.value;this._transitionablePaint.setValue(f,A),this._handleSpecialPaintPropertyUpdate(f);const de=this._transitionablePaint._values[f].value;return de.isDataDriven()||Y||q||this._handleOverridablePaintPropertyUpdate(f,oe,de)}}_handleSpecialPaintPropertyUpdate(f){}_handleOverridablePaintPropertyUpdate(f,A,P){return!1}isHidden(f){return!!(this.minzoom&&f<this.minzoom)||!!(this.maxzoom&&f>=this.maxzoom)||this.visibility==="none"}updateTransitions(f){this._transitioningPaint=this._transitionablePaint.transitioned(f,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(f,A){f.getCrossfadeParameters&&(this._crossfadeParameters=f.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(f,void 0,A)),this.paint=this._transitioningPaint.possiblyEvaluate(f,void 0,A)}serialize(){const f={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(f.layout=f.layout||{},f.layout.visibility=this.visibility),O(f,(A,P)=>!(A===void 0||P==="layout"&&!Object.keys(A).length||P==="paint"&&!Object.keys(A).length))}_validate(f,A,P,N,q={}){return(!q||q.validate!==!1)&&Gs(this,f.call(ga,{key:A,layerType:this.type,objectKey:P,value:N,styleSpec:Q,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const f in this.paint._values){const A=this.paint.get(f);if(A instanceof ll&&xo(A.property.specification)&&(A.value.kind==="source"||A.value.kind==="composite")&&A.value.isStateDependent)return!0}return!1}}const dh={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class Ql{constructor(f,A){this._structArray=f,this._pos1=A*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class os{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(f,A){return f._trim(),A&&(f.isTransferred=!0,A.push(f.arrayBuffer)),{length:f.length,arrayBuffer:f.arrayBuffer}}static deserialize(f){const A=Object.create(this.prototype);return A.arrayBuffer=f.arrayBuffer,A.length=f.length,A.capacity=f.arrayBuffer.byteLength/A.bytesPerElement,A._refreshViews(),A}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(f){this.reserve(f),this.length=f}reserve(f){if(f>this.capacity){this.capacity=Math.max(f,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const A=this.uint8;this._refreshViews(),A&&this.uint8.set(A)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function gs(_,f=1){let A=0,P=0;return{members:_.map(N=>{const q=dh[N.type].BYTES_PER_ELEMENT,Y=A=ph(A,Math.max(f,q)),oe=N.components||1;return P=Math.max(P,q),A+=q*oe,{name:N.name,type:N.type,components:oe,offset:Y}}),size:ph(A,Math.max(P,f)),alignment:f}}function ph(_,f){return Math.ceil(_/f)*f}class sa extends os{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(f,A){const P=this.length;return this.resize(P+1),this.emplace(P,f,A)}emplace(f,A,P){const N=2*f;return this.int16[N+0]=A,this.int16[N+1]=P,f}}sa.prototype.bytesPerElement=4,Dn("StructArrayLayout2i4",sa);class B extends os{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(f,A,P,N){const q=this.length;return this.resize(q+1),this.emplace(q,f,A,P,N)}emplace(f,A,P,N,q){const Y=4*f;return this.int16[Y+0]=A,this.int16[Y+1]=P,this.int16[Y+2]=N,this.int16[Y+3]=q,f}}B.prototype.bytesPerElement=8,Dn("StructArrayLayout4i8",B);class d extends os{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(f,A,P,N,q,Y){const oe=this.length;return this.resize(oe+1),this.emplace(oe,f,A,P,N,q,Y)}emplace(f,A,P,N,q,Y,oe){const de=6*f;return this.int16[de+0]=A,this.int16[de+1]=P,this.int16[de+2]=N,this.int16[de+3]=q,this.int16[de+4]=Y,this.int16[de+5]=oe,f}}d.prototype.bytesPerElement=12,Dn("StructArrayLayout2i4i12",d);class I extends os{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(f,A,P,N,q,Y){const oe=this.length;return this.resize(oe+1),this.emplace(oe,f,A,P,N,q,Y)}emplace(f,A,P,N,q,Y,oe){const de=4*f,xe=8*f;return this.int16[de+0]=A,this.int16[de+1]=P,this.uint8[xe+4]=N,this.uint8[xe+5]=q,this.uint8[xe+6]=Y,this.uint8[xe+7]=oe,f}}I.prototype.bytesPerElement=8,Dn("StructArrayLayout2i4ub8",I);class D extends os{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(f,A){const P=this.length;return this.resize(P+1),this.emplace(P,f,A)}emplace(f,A,P){const N=2*f;return this.float32[N+0]=A,this.float32[N+1]=P,f}}D.prototype.bytesPerElement=8,Dn("StructArrayLayout2f8",D);class z extends os{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(f,A,P,N,q,Y,oe,de,xe,Re){const Ve=this.length;return this.resize(Ve+1),this.emplace(Ve,f,A,P,N,q,Y,oe,de,xe,Re)}emplace(f,A,P,N,q,Y,oe,de,xe,Re,Ve){const it=10*f;return this.uint16[it+0]=A,this.uint16[it+1]=P,this.uint16[it+2]=N,this.uint16[it+3]=q,this.uint16[it+4]=Y,this.uint16[it+5]=oe,this.uint16[it+6]=de,this.uint16[it+7]=xe,this.uint16[it+8]=Re,this.uint16[it+9]=Ve,f}}z.prototype.bytesPerElement=20,Dn("StructArrayLayout10ui20",z);class W extends os{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(f,A,P,N,q,Y,oe,de,xe,Re,Ve,it){const ut=this.length;return this.resize(ut+1),this.emplace(ut,f,A,P,N,q,Y,oe,de,xe,Re,Ve,it)}emplace(f,A,P,N,q,Y,oe,de,xe,Re,Ve,it,ut){const ht=12*f;return this.int16[ht+0]=A,this.int16[ht+1]=P,this.int16[ht+2]=N,this.int16[ht+3]=q,this.uint16[ht+4]=Y,this.uint16[ht+5]=oe,this.uint16[ht+6]=de,this.uint16[ht+7]=xe,this.int16[ht+8]=Re,this.int16[ht+9]=Ve,this.int16[ht+10]=it,this.int16[ht+11]=ut,f}}W.prototype.bytesPerElement=24,Dn("StructArrayLayout4i4ui4i24",W);class ne extends os{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(f,A,P){const N=this.length;return this.resize(N+1),this.emplace(N,f,A,P)}emplace(f,A,P,N){const q=3*f;return this.float32[q+0]=A,this.float32[q+1]=P,this.float32[q+2]=N,f}}ne.prototype.bytesPerElement=12,Dn("StructArrayLayout3f12",ne);class pe extends os{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(f){const A=this.length;return this.resize(A+1),this.emplace(A,f)}emplace(f,A){return this.uint32[1*f+0]=A,f}}pe.prototype.bytesPerElement=4,Dn("StructArrayLayout1ul4",pe);class ye extends os{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(f,A,P,N,q,Y,oe,de,xe){const Re=this.length;return this.resize(Re+1),this.emplace(Re,f,A,P,N,q,Y,oe,de,xe)}emplace(f,A,P,N,q,Y,oe,de,xe,Re){const Ve=10*f,it=5*f;return this.int16[Ve+0]=A,this.int16[Ve+1]=P,this.int16[Ve+2]=N,this.int16[Ve+3]=q,this.int16[Ve+4]=Y,this.int16[Ve+5]=oe,this.uint32[it+3]=de,this.uint16[Ve+8]=xe,this.uint16[Ve+9]=Re,f}}ye.prototype.bytesPerElement=20,Dn("StructArrayLayout6i1ul2ui20",ye);class Se extends os{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(f,A,P,N,q,Y){const oe=this.length;return this.resize(oe+1),this.emplace(oe,f,A,P,N,q,Y)}emplace(f,A,P,N,q,Y,oe){const de=6*f;return this.int16[de+0]=A,this.int16[de+1]=P,this.int16[de+2]=N,this.int16[de+3]=q,this.int16[de+4]=Y,this.int16[de+5]=oe,f}}Se.prototype.bytesPerElement=12,Dn("StructArrayLayout2i2i2i12",Se);class ze extends os{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(f,A,P,N,q){const Y=this.length;return this.resize(Y+1),this.emplace(Y,f,A,P,N,q)}emplace(f,A,P,N,q,Y){const oe=4*f,de=8*f;return this.float32[oe+0]=A,this.float32[oe+1]=P,this.float32[oe+2]=N,this.int16[de+6]=q,this.int16[de+7]=Y,f}}ze.prototype.bytesPerElement=16,Dn("StructArrayLayout2f1f2i16",ze);class Qe extends os{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(f,A,P,N){const q=this.length;return this.resize(q+1),this.emplace(q,f,A,P,N)}emplace(f,A,P,N,q){const Y=12*f,oe=3*f;return this.uint8[Y+0]=A,this.uint8[Y+1]=P,this.float32[oe+1]=N,this.float32[oe+2]=q,f}}Qe.prototype.bytesPerElement=12,Dn("StructArrayLayout2ub2f12",Qe);class st extends os{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(f,A,P){const N=this.length;return this.resize(N+1),this.emplace(N,f,A,P)}emplace(f,A,P,N){const q=3*f;return this.uint16[q+0]=A,this.uint16[q+1]=P,this.uint16[q+2]=N,f}}st.prototype.bytesPerElement=6,Dn("StructArrayLayout3ui6",st);class Mt extends os{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(f,A,P,N,q,Y,oe,de,xe,Re,Ve,it,ut,ht,Gt,Ut,vi){const Fi=this.length;return this.resize(Fi+1),this.emplace(Fi,f,A,P,N,q,Y,oe,de,xe,Re,Ve,it,ut,ht,Gt,Ut,vi)}emplace(f,A,P,N,q,Y,oe,de,xe,Re,Ve,it,ut,ht,Gt,Ut,vi,Fi){const gi=24*f,Ti=12*f,rn=48*f;return this.int16[gi+0]=A,this.int16[gi+1]=P,this.uint16[gi+2]=N,this.uint16[gi+3]=q,this.uint32[Ti+2]=Y,this.uint32[Ti+3]=oe,this.uint32[Ti+4]=de,this.uint16[gi+10]=xe,this.uint16[gi+11]=Re,this.uint16[gi+12]=Ve,this.float32[Ti+7]=it,this.float32[Ti+8]=ut,this.uint8[rn+36]=ht,this.uint8[rn+37]=Gt,this.uint8[rn+38]=Ut,this.uint32[Ti+10]=vi,this.int16[gi+22]=Fi,f}}Mt.prototype.bytesPerElement=48,Dn("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",Mt);class St extends os{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(f,A,P,N,q,Y,oe,de,xe,Re,Ve,it,ut,ht,Gt,Ut,vi,Fi,gi,Ti,rn,nn,Kn,nr,Hn,On,An,Gn){const Nn=this.length;return this.resize(Nn+1),this.emplace(Nn,f,A,P,N,q,Y,oe,de,xe,Re,Ve,it,ut,ht,Gt,Ut,vi,Fi,gi,Ti,rn,nn,Kn,nr,Hn,On,An,Gn)}emplace(f,A,P,N,q,Y,oe,de,xe,Re,Ve,it,ut,ht,Gt,Ut,vi,Fi,gi,Ti,rn,nn,Kn,nr,Hn,On,An,Gn,Nn){const dn=34*f,vr=17*f;return this.int16[dn+0]=A,this.int16[dn+1]=P,this.int16[dn+2]=N,this.int16[dn+3]=q,this.int16[dn+4]=Y,this.int16[dn+5]=oe,this.int16[dn+6]=de,this.int16[dn+7]=xe,this.uint16[dn+8]=Re,this.uint16[dn+9]=Ve,this.uint16[dn+10]=it,this.uint16[dn+11]=ut,this.uint16[dn+12]=ht,this.uint16[dn+13]=Gt,this.uint16[dn+14]=Ut,this.uint16[dn+15]=vi,this.uint16[dn+16]=Fi,this.uint16[dn+17]=gi,this.uint16[dn+18]=Ti,this.uint16[dn+19]=rn,this.uint16[dn+20]=nn,this.uint16[dn+21]=Kn,this.uint16[dn+22]=nr,this.uint32[vr+12]=Hn,this.float32[vr+13]=On,this.float32[vr+14]=An,this.float32[vr+15]=Gn,this.float32[vr+16]=Nn,f}}St.prototype.bytesPerElement=68,Dn("StructArrayLayout8i15ui1ul4f68",St);class It extends os{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(f){const A=this.length;return this.resize(A+1),this.emplace(A,f)}emplace(f,A){return this.float32[1*f+0]=A,f}}It.prototype.bytesPerElement=4,Dn("StructArrayLayout1f4",It);class ri extends os{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(f,A,P){const N=this.length;return this.resize(N+1),this.emplace(N,f,A,P)}emplace(f,A,P,N){const q=3*f;return this.int16[q+0]=A,this.int16[q+1]=P,this.int16[q+2]=N,f}}ri.prototype.bytesPerElement=6,Dn("StructArrayLayout3i6",ri);class fi extends os{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(f,A,P){const N=this.length;return this.resize(N+1),this.emplace(N,f,A,P)}emplace(f,A,P,N){const q=4*f;return this.uint32[2*f+0]=A,this.uint16[q+2]=P,this.uint16[q+3]=N,f}}fi.prototype.bytesPerElement=8,Dn("StructArrayLayout1ul2ui8",fi);class Ai extends os{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(f,A){const P=this.length;return this.resize(P+1),this.emplace(P,f,A)}emplace(f,A,P){const N=2*f;return this.uint16[N+0]=A,this.uint16[N+1]=P,f}}Ai.prototype.bytesPerElement=4,Dn("StructArrayLayout2ui4",Ai);class jt extends os{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(f){const A=this.length;return this.resize(A+1),this.emplace(A,f)}emplace(f,A){return this.uint16[1*f+0]=A,f}}jt.prototype.bytesPerElement=2,Dn("StructArrayLayout1ui2",jt);class Pi extends os{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(f,A,P,N){const q=this.length;return this.resize(q+1),this.emplace(q,f,A,P,N)}emplace(f,A,P,N,q){const Y=4*f;return this.float32[Y+0]=A,this.float32[Y+1]=P,this.float32[Y+2]=N,this.float32[Y+3]=q,f}}Pi.prototype.bytesPerElement=16,Dn("StructArrayLayout4f16",Pi);class Ei extends Ql{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new nt(this.anchorPointX,this.anchorPointY)}}Ei.prototype.size=20;class Vi extends ye{get(f){return new Ei(this,f)}}Dn("CollisionBoxArray",Vi);class Ni extends Ql{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(f){this._structArray.uint8[this._pos1+37]=f}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(f){this._structArray.uint8[this._pos1+38]=f}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(f){this._structArray.uint32[this._pos4+10]=f}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}Ni.prototype.size=48;class un extends Mt{get(f){return new Ni(this,f)}}Dn("PlacedSymbolArray",un);class zi extends Ql{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(f){this._structArray.uint32[this._pos4+12]=f}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get textOffset0(){return this._structArray.float32[this._pos4+14]}get textOffset1(){return this._structArray.float32[this._pos4+15]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+16]}}zi.prototype.size=68;class zn extends St{get(f){return new zi(this,f)}}Dn("SymbolInstanceArray",zn);class vn extends It{getoffsetX(f){return this.float32[1*f+0]}}Dn("GlyphOffsetArray",vn);class Wn extends ri{getx(f){return this.int16[3*f+0]}gety(f){return this.int16[3*f+1]}gettileUnitDistanceFromAnchor(f){return this.int16[3*f+2]}}Dn("SymbolLineVertexArray",Wn);class Ir extends Ql{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}Ir.prototype.size=8;class Fr extends fi{get(f){return new Ir(this,f)}}Dn("FeatureIndexArray",Fr);class j extends sa{}class K extends sa{}class ue extends sa{}class we extends d{}class je extends I{}class Je extends D{}class tt extends z{}class at extends W{}class pt extends ne{}class Ct extends pe{}class ai extends Se{}class ki extends Qe{}class wi extends st{}class pi extends Ai{}const on=gs([{name:"a_pos",components:2,type:"Int16"}],4),{members:Oi}=on;class qt{constructor(f=[]){this.segments=f}prepareSegment(f,A,P,N){let q=this.segments[this.segments.length-1];return f>qt.MAX_VERTEX_ARRAY_LENGTH&&Z(`Max vertices per segment is ${qt.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${f}`),(!q||q.vertexLength+f>qt.MAX_VERTEX_ARRAY_LENGTH||q.sortKey!==N)&&(q={vertexOffset:A.length,primitiveOffset:P.length,vertexLength:0,primitiveLength:0},N!==void 0&&(q.sortKey=N),this.segments.push(q)),q}get(){return this.segments}destroy(){for(const f of this.segments)for(const A in f.vaos)f.vaos[A].destroy()}static simpleSegment(f,A,P,N){return new qt([{vertexOffset:f,primitiveOffset:A,vertexLength:P,primitiveLength:N,vaos:{},sortKey:0}])}}function Qt(_,f){return 256*(_=w(Math.floor(_),0,255))+w(Math.floor(f),0,255)}qt.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,Dn("SegmentVector",qt);const Ki=gs([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]);var tn={exports:{}},Ui={exports:{}};Ui.exports=function(_,f){var A,P,N,q,Y,oe,de,xe;for(P=_.length-(A=3&_.length),N=f,Y=3432918353,oe=461845907,xe=0;xe<P;)de=255&_.charCodeAt(xe)|(255&_.charCodeAt(++xe))<<8|(255&_.charCodeAt(++xe))<<16|(255&_.charCodeAt(++xe))<<24,++xe,N=27492+(65535&(q=5*(65535&(N=(N^=de=(65535&(de=(de=(65535&de)*Y+(((de>>>16)*Y&65535)<<16)&4294967295)<<15|de>>>17))*oe+(((de>>>16)*oe&65535)<<16)&4294967295)<<13|N>>>19))+((5*(N>>>16)&65535)<<16)&4294967295))+((58964+(q>>>16)&65535)<<16);switch(de=0,A){case 3:de^=(255&_.charCodeAt(xe+2))<<16;case 2:de^=(255&_.charCodeAt(xe+1))<<8;case 1:N^=de=(65535&(de=(de=(65535&(de^=255&_.charCodeAt(xe)))*Y+(((de>>>16)*Y&65535)<<16)&4294967295)<<15|de>>>17))*oe+(((de>>>16)*oe&65535)<<16)&4294967295}return N^=_.length,N=2246822507*(65535&(N^=N>>>16))+((2246822507*(N>>>16)&65535)<<16)&4294967295,N=3266489909*(65535&(N^=N>>>13))+((3266489909*(N>>>16)&65535)<<16)&4294967295,(N^=N>>>16)>>>0};var Fn={exports:{}};Fn.exports=function(_,f){for(var A,P=_.length,N=f^P,q=0;P>=4;)A=1540483477*(65535&(A=255&_.charCodeAt(q)|(255&_.charCodeAt(++q))<<8|(255&_.charCodeAt(++q))<<16|(255&_.charCodeAt(++q))<<24))+((1540483477*(A>>>16)&65535)<<16),N=1540483477*(65535&N)+((1540483477*(N>>>16)&65535)<<16)^(A=1540483477*(65535&(A^=A>>>24))+((1540483477*(A>>>16)&65535)<<16)),P-=4,++q;switch(P){case 3:N^=(255&_.charCodeAt(q+2))<<16;case 2:N^=(255&_.charCodeAt(q+1))<<8;case 1:N=1540483477*(65535&(N^=255&_.charCodeAt(q)))+((1540483477*(N>>>16)&65535)<<16)}return N=1540483477*(65535&(N^=N>>>13))+((1540483477*(N>>>16)&65535)<<16),(N^=N>>>15)>>>0};var Sn=Ui.exports,Sr=Fn.exports;tn.exports=Sn,tn.exports.murmur3=Sn,tn.exports.murmur2=Sr;class Rn{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(f,A,P,N){this.ids.push(vo(f)),this.positions.push(A,P,N)}getPositions(f){if(!this.indexed)throw new Error("Trying to get index, but feature positions are not indexed");const A=vo(f);let P=0,N=this.ids.length-1;for(;P<N;){const Y=P+N>>1;this.ids[Y]>=A?N=Y:P=Y+1}const q=[];for(;this.ids[P]===A;)q.push({index:this.positions[3*P],start:this.positions[3*P+1],end:this.positions[3*P+2]}),P++;return q}static serialize(f,A){const P=new Float64Array(f.ids),N=new Uint32Array(f.positions);return Ao(P,N,0,P.length-1),A&&A.push(P.buffer,N.buffer),{ids:P,positions:N}}static deserialize(f){const A=new Rn;return A.ids=f.ids,A.positions=f.positions,A.indexed=!0,A}}function vo(_){const f=+_;return!isNaN(f)&&f<=Number.MAX_SAFE_INTEGER?f:tn.exports(String(_))}function Ao(_,f,A,P){for(;A<P;){const N=_[A+P>>1];let q=A-1,Y=P+1;for(;;){do q++;while(_[q]<N);do Y--;while(_[Y]>N);if(q>=Y)break;Zr(_,q,Y),Zr(f,3*q,3*Y),Zr(f,3*q+1,3*Y+1),Zr(f,3*q+2,3*Y+2)}Y-A<P-Y?(Ao(_,f,A,Y),A=Y+1):(Ao(_,f,Y+1,P),P=Y)}}function Zr(_,f,A){const P=_[f];_[f]=_[A],_[A]=P}Dn("FeaturePositionMap",Rn);class Hr{constructor(f,A){this.gl=f.gl,this.location=A}}class yo extends Hr{constructor(f,A){super(f,A),this.current=0}set(f){this.current!==f&&(this.current=f,this.gl.uniform1f(this.location,f))}}class ko extends Hr{constructor(f,A){super(f,A),this.current=[0,0,0,0]}set(f){f[0]===this.current[0]&&f[1]===this.current[1]&&f[2]===this.current[2]&&f[3]===this.current[3]||(this.current=f,this.gl.uniform4f(this.location,f[0],f[1],f[2],f[3]))}}class Wr extends Hr{constructor(f,A){super(f,A),this.current=gt.transparent}set(f){f.r===this.current.r&&f.g===this.current.g&&f.b===this.current.b&&f.a===this.current.a||(this.current=f,this.gl.uniform4f(this.location,f.r,f.g,f.b,f.a))}}const Ts=new Float32Array(16);function Rr(_){return[Qt(255*_.r,255*_.g),Qt(255*_.b,255*_.a)]}class ss{constructor(f,A,P){this.value=f,this.uniformNames=A.map(N=>`u_${N}`),this.type=P}setUniform(f,A,P){f.set(P.constantOr(this.value))}getBinding(f,A,P){return this.type==="color"?new Wr(f,A):new yo(f,A)}}class zs{constructor(f,A){this.uniformNames=A.map(P=>`u_${P}`),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(f,A){this.pixelRatioFrom=A.pixelRatio,this.pixelRatioTo=f.pixelRatio,this.patternFrom=A.tlbr,this.patternTo=f.tlbr}setUniform(f,A,P,N){const q=N==="u_pattern_to"?this.patternTo:N==="u_pattern_from"?this.patternFrom:N==="u_pixel_ratio_to"?this.pixelRatioTo:N==="u_pixel_ratio_from"?this.pixelRatioFrom:null;q&&f.set(q)}getBinding(f,A,P){return P.substr(0,9)==="u_pattern"?new ko(f,A):new yo(f,A)}}class so{constructor(f,A,P,N){this.expression=f,this.type=P,this.maxValue=0,this.paintVertexAttributes=A.map(q=>({name:`a_${q}`,type:"Float32",components:P==="color"?2:1,offset:0})),this.paintVertexArray=new N}populatePaintArray(f,A,P,N,q){const Y=this.paintVertexArray.length,oe=this.expression.evaluate(new Bo(0),A,{},N,[],q);this.paintVertexArray.resize(f),this._setPaintValue(Y,f,oe)}updatePaintArray(f,A,P,N){const q=this.expression.evaluate({zoom:0},P,N);this._setPaintValue(f,A,q)}_setPaintValue(f,A,P){if(this.type==="color"){const N=Rr(P);for(let q=f;q<A;q++)this.paintVertexArray.emplace(q,N[0],N[1])}else{for(let N=f;N<A;N++)this.paintVertexArray.emplace(N,P);this.maxValue=Math.max(this.maxValue,Math.abs(P))}}upload(f){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=f.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class cs{constructor(f,A,P,N,q,Y){this.expression=f,this.uniformNames=A.map(oe=>`u_${oe}_t`),this.type=P,this.useIntegerZoom=N,this.zoom=q,this.maxValue=0,this.paintVertexAttributes=A.map(oe=>({name:`a_${oe}`,type:"Float32",components:P==="color"?4:2,offset:0})),this.paintVertexArray=new Y}populatePaintArray(f,A,P,N,q){const Y=this.expression.evaluate(new Bo(this.zoom),A,{},N,[],q),oe=this.expression.evaluate(new Bo(this.zoom+1),A,{},N,[],q),de=this.paintVertexArray.length;this.paintVertexArray.resize(f),this._setPaintValue(de,f,Y,oe)}updatePaintArray(f,A,P,N){const q=this.expression.evaluate({zoom:this.zoom},P,N),Y=this.expression.evaluate({zoom:this.zoom+1},P,N);this._setPaintValue(f,A,q,Y)}_setPaintValue(f,A,P,N){if(this.type==="color"){const q=Rr(P),Y=Rr(N);for(let oe=f;oe<A;oe++)this.paintVertexArray.emplace(oe,q[0],q[1],Y[0],Y[1])}else{for(let q=f;q<A;q++)this.paintVertexArray.emplace(q,P,N);this.maxValue=Math.max(this.maxValue,Math.abs(P),Math.abs(N))}}upload(f){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=f.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(f,A){const P=this.useIntegerZoom?Math.floor(A.zoom):A.zoom,N=w(this.expression.interpolationFactor(P,this.zoom,this.zoom+1),0,1);f.set(N)}getBinding(f,A,P){return new yo(f,A)}}class Ls{constructor(f,A,P,N,q,Y){this.expression=f,this.type=A,this.useIntegerZoom=P,this.zoom=N,this.layerId=Y,this.zoomInPaintVertexArray=new q,this.zoomOutPaintVertexArray=new q}populatePaintArray(f,A,P){const N=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(f),this.zoomOutPaintVertexArray.resize(f),this._setPaintValues(N,f,A.patterns&&A.patterns[this.layerId],P)}updatePaintArray(f,A,P,N,q){this._setPaintValues(f,A,P.patterns&&P.patterns[this.layerId],q)}_setPaintValues(f,A,P,N){if(!N||!P)return;const{min:q,mid:Y,max:oe}=P,de=N[q],xe=N[Y],Re=N[oe];if(de&&xe&&Re)for(let Ve=f;Ve<A;Ve++)this.zoomInPaintVertexArray.emplace(Ve,xe.tl[0],xe.tl[1],xe.br[0],xe.br[1],de.tl[0],de.tl[1],de.br[0],de.br[1],xe.pixelRatio,de.pixelRatio),this.zoomOutPaintVertexArray.emplace(Ve,xe.tl[0],xe.tl[1],xe.br[0],xe.br[1],Re.tl[0],Re.tl[1],Re.br[0],Re.br[1],xe.pixelRatio,Re.pixelRatio)}upload(f){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=f.createVertexBuffer(this.zoomInPaintVertexArray,Ki.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=f.createVertexBuffer(this.zoomOutPaintVertexArray,Ki.members,this.expression.isStateDependent))}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class Ns{constructor(f,A,P){this.binders={},this._buffers=[];const N=[];for(const q in f.paint._values){if(!P(q))continue;const Y=f.paint.get(q);if(!(Y instanceof ll&&xo(Y.property.specification)))continue;const oe=_a(q,f.type),de=Y.value,xe=Y.property.specification.type,Re=Y.property.useIntegerZoom,Ve=Y.property.specification["property-type"],it=Ve==="cross-faded"||Ve==="cross-faded-data-driven";if(de.kind==="constant")this.binders[q]=it?new zs(de.value,oe):new ss(de.value,oe,xe),N.push(`/u_${q}`);else if(de.kind==="source"||it){const ut=qa(q,xe,"source");this.binders[q]=it?new Ls(de,xe,Re,A,ut,f.id):new so(de,oe,xe,ut),N.push(`/a_${q}`)}else{const ut=qa(q,xe,"composite");this.binders[q]=new cs(de,oe,xe,Re,A,ut),N.push(`/z_${q}`)}}this.cacheKey=N.sort().join("")}getMaxValue(f){const A=this.binders[f];return A instanceof so||A instanceof cs?A.maxValue:0}populatePaintArrays(f,A,P,N,q){for(const Y in this.binders){const oe=this.binders[Y];(oe instanceof so||oe instanceof cs||oe instanceof Ls)&&oe.populatePaintArray(f,A,P,N,q)}}setConstantPatternPositions(f,A){for(const P in this.binders){const N=this.binders[P];N instanceof zs&&N.setConstantPatternPositions(f,A)}}updatePaintArrays(f,A,P,N,q){let Y=!1;for(const oe in f){const de=A.getPositions(oe);for(const xe of de){const Re=P.feature(xe.index);for(const Ve in this.binders){const it=this.binders[Ve];if((it instanceof so||it instanceof cs||it instanceof Ls)&&it.expression.isStateDependent===!0){const ut=N.paint.get(Ve);it.expression=ut.value,it.updatePaintArray(xe.start,xe.end,Re,f[oe],q),Y=!0}}}}return Y}defines(){const f=[];for(const A in this.binders){const P=this.binders[A];(P instanceof ss||P instanceof zs)&&f.push(...P.uniformNames.map(N=>`#define HAS_UNIFORM_${N}`))}return f}getBinderAttributes(){const f=[];for(const A in this.binders){const P=this.binders[A];if(P instanceof so||P instanceof cs)for(let N=0;N<P.paintVertexAttributes.length;N++)f.push(P.paintVertexAttributes[N].name);else if(P instanceof Ls)for(let N=0;N<Ki.members.length;N++)f.push(Ki.members[N].name)}return f}getBinderUniforms(){const f=[];for(const A in this.binders){const P=this.binders[A];if(P instanceof ss||P instanceof zs||P instanceof cs)for(const N of P.uniformNames)f.push(N)}return f}getPaintVertexBuffers(){return this._buffers}getUniforms(f,A){const P=[];for(const N in this.binders){const q=this.binders[N];if(q instanceof ss||q instanceof zs||q instanceof cs){for(const Y of q.uniformNames)if(A[Y]){const oe=q.getBinding(f,A[Y],Y);P.push({name:Y,property:N,binding:oe})}}}return P}setUniforms(f,A,P,N){for(const{name:q,property:Y,binding:oe}of A)this.binders[Y].setUniform(oe,N,P.get(Y),q)}updatePaintBuffers(f){this._buffers=[];for(const A in this.binders){const P=this.binders[A];if(f&&P instanceof Ls){const N=f.fromScale===2?P.zoomInPaintVertexBuffer:P.zoomOutPaintVertexBuffer;N&&this._buffers.push(N)}else(P instanceof so||P instanceof cs)&&P.paintVertexBuffer&&this._buffers.push(P.paintVertexBuffer)}}upload(f){for(const A in this.binders){const P=this.binders[A];(P instanceof so||P instanceof cs||P instanceof Ls)&&P.upload(f)}this.updatePaintBuffers()}destroy(){for(const f in this.binders){const A=this.binders[f];(A instanceof so||A instanceof cs||A instanceof Ls)&&A.destroy()}}}class zo{constructor(f,A,P=()=>!0){this.programConfigurations={};for(const N of f)this.programConfigurations[N.id]=new Ns(N,A,P);this.needsUpload=!1,this._featureMap=new Rn,this._bufferOffset=0}populatePaintArrays(f,A,P,N,q,Y){for(const oe in this.programConfigurations)this.programConfigurations[oe].populatePaintArrays(f,A,N,q,Y);A.id!==void 0&&this._featureMap.add(A.id,P,this._bufferOffset,f),this._bufferOffset=f,this.needsUpload=!0}updatePaintArrays(f,A,P,N){for(const q of P)this.needsUpload=this.programConfigurations[q.id].updatePaintArrays(f,this._featureMap,A,q,N)||this.needsUpload}get(f){return this.programConfigurations[f]}upload(f){if(this.needsUpload){for(const A in this.programConfigurations)this.programConfigurations[A].upload(f);this.needsUpload=!1}}destroy(){for(const f in this.programConfigurations)this.programConfigurations[f].destroy()}}function _a(_,f){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[_]||[_.replace(`${f}-`,"").replace(/-/g,"_")]}function qa(_,f,A){const P={color:{source:D,composite:Pi},number:{source:It,composite:D}},N=function(q){return{"line-pattern":{source:tt,composite:tt},"fill-pattern":{source:tt,composite:tt},"fill-extrusion-pattern":{source:tt,composite:tt}}[q]}(_);return N&&N[A]||P[f][A]}Dn("ConstantBinder",ss),Dn("CrossFadedConstantBinder",zs),Dn("SourceExpressionBinder",so),Dn("CrossFadedCompositeBinder",Ls),Dn("CompositeExpressionBinder",cs),Dn("ProgramConfiguration",Ns,{omit:["_buffers"]}),Dn("ProgramConfigurationSet",zo);var Mo=8192;const xs=Math.pow(2,14)-1,$l=-xs-1;function Ha(_){const f=Mo/_.extent,A=_.loadGeometry();for(let P=0;P<A.length;P++){const N=A[P];for(let q=0;q<N.length;q++){const Y=N[q],oe=Math.round(Y.x*f),de=Math.round(Y.y*f);Y.x=w(oe,$l,xs),Y.y=w(de,$l,xs),(oe<Y.x||oe>Y.x+1||de<Y.y||de>Y.y+1)&&Z("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return A}function cl(_,f){return{type:_.type,id:_.id,properties:_.properties,geometry:f?Ha(_):[]}}function hl(_,f,A,P,N){_.emplaceBack(2*f+(P+1)/2,2*A+(N+1)/2)}class as{constructor(f){this.zoom=f.zoom,this.overscaling=f.overscaling,this.layers=f.layers,this.layerIds=this.layers.map(A=>A.id),this.index=f.index,this.hasPattern=!1,this.layoutVertexArray=new K,this.indexArray=new wi,this.segments=new qt,this.programConfigurations=new zo(f.layers,f.zoom),this.stateDependentLayerIds=this.layers.filter(A=>A.isStateDependent()).map(A=>A.id)}populate(f,A,P){const N=this.layers[0],q=[];let Y=null,oe=!1;N.type==="circle"&&(Y=N.layout.get("circle-sort-key"),oe=!Y.isConstant());for(const{feature:de,id:xe,index:Re,sourceLayerIndex:Ve}of f){const it=this.layers[0]._featureFilter.needGeometry,ut=cl(de,it);if(!this.layers[0]._featureFilter.filter(new Bo(this.zoom),ut,P))continue;const ht=oe?Y.evaluate(ut,{},P):void 0,Gt={id:xe,properties:de.properties,type:de.type,sourceLayerIndex:Ve,index:Re,geometry:it?ut.geometry:Ha(de),patterns:{},sortKey:ht};q.push(Gt)}oe&&q.sort((de,xe)=>de.sortKey-xe.sortKey);for(const de of q){const{geometry:xe,index:Re,sourceLayerIndex:Ve}=de,it=f[Re].feature;this.addFeature(de,xe,Re,P),A.featureIndex.insert(it,xe,Re,Ve,this.index)}}update(f,A,P){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(f,A,this.stateDependentLayers,P)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(f){this.uploaded||(this.layoutVertexBuffer=f.createVertexBuffer(this.layoutVertexArray,Oi),this.indexBuffer=f.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(f),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(f,A,P,N){for(const q of A)for(const Y of q){const oe=Y.x,de=Y.y;if(oe<0||oe>=Mo||de<0||de>=Mo)continue;const xe=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,f.sortKey),Re=xe.vertexLength;hl(this.layoutVertexArray,oe,de,-1,-1),hl(this.layoutVertexArray,oe,de,1,-1),hl(this.layoutVertexArray,oe,de,1,1),hl(this.layoutVertexArray,oe,de,-1,1),this.indexArray.emplaceBack(Re,Re+1,Re+2),this.indexArray.emplaceBack(Re,Re+3,Re+2),xe.vertexLength+=4,xe.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,f,P,{},N)}}function Uh(_,f){for(let A=0;A<_.length;A++)if(mc(f,_[A]))return!0;for(let A=0;A<f.length;A++)if(mc(_,f[A]))return!0;return!!dc(_,f)}function s0(_,f,A){return!!mc(_,f)||!!Ga(f,_,A)}function wf(_,f){if(_.length===1)return pc(f,_[0]);for(let A=0;A<f.length;A++){const P=f[A];for(let N=0;N<P.length;N++)if(mc(_,P[N]))return!0}for(let A=0;A<_.length;A++)if(pc(f,_[A]))return!0;for(let A=0;A<f.length;A++)if(dc(_,f[A]))return!0;return!1}function fc(_,f,A){if(_.length>1){if(dc(_,f))return!0;for(let P=0;P<f.length;P++)if(Ga(f[P],_,A))return!0}for(let P=0;P<_.length;P++)if(Ga(_[P],f,A))return!0;return!1}function dc(_,f){if(_.length===0||f.length===0)return!1;for(let A=0;A<_.length-1;A++){const P=_[A],N=_[A+1];for(let q=0;q<f.length-1;q++)if(Vh(P,N,f[q],f[q+1]))return!0}return!1}function Vh(_,f,A,P){return ee(_,A,P)!==ee(f,A,P)&&ee(_,f,A)!==ee(_,f,P)}function Ga(_,f,A){const P=A*A;if(f.length===1)return _.distSqr(f[0])<P;for(let N=1;N<f.length;N++)if(Wa(_,f[N-1],f[N])<P)return!0;return!1}function Wa(_,f,A){const P=f.distSqr(A);if(P===0)return _.distSqr(f);const N=((_.x-f.x)*(A.x-f.x)+(_.y-f.y)*(A.y-f.y))/P;return _.distSqr(N<0?f:N>1?A:A.sub(f)._mult(N)._add(f))}function pc(_,f){let A,P,N,q=!1;for(let Y=0;Y<_.length;Y++){A=_[Y];for(let oe=0,de=A.length-1;oe<A.length;de=oe++)P=A[oe],N=A[de],P.y>f.y!=N.y>f.y&&f.x<(N.x-P.x)*(f.y-P.y)/(N.y-P.y)+P.x&&(q=!q)}return q}function mc(_,f){let A=!1;for(let P=0,N=_.length-1;P<_.length;N=P++){const q=_[P],Y=_[N];q.y>f.y!=Y.y>f.y&&f.x<(Y.x-q.x)*(f.y-q.y)/(Y.y-q.y)+q.x&&(A=!A)}return A}function qh(_,f,A){const P=A[0],N=A[2];if(_.x<P.x&&f.x<P.x||_.x>N.x&&f.x>N.x||_.y<P.y&&f.y<P.y||_.y>N.y&&f.y>N.y)return!1;const q=ee(_,f,A[0]);return q!==ee(_,f,A[1])||q!==ee(_,f,A[2])||q!==ee(_,f,A[3])}function jc(_,f,A){const P=f.paint.get(_).value;return P.kind==="constant"?P.value:A.programConfigurations.get(f.id).getMaxValue(_)}function gc(_){return Math.sqrt(_[0]*_[0]+_[1]*_[1])}function Uc(_,f,A,P,N){if(!f[0]&&!f[1])return _;const q=nt.convert(f)._mult(N);A==="viewport"&&q._rotate(-P);const Y=[];for(let oe=0;oe<_.length;oe++)Y.push(_[oe].sub(q));return Y}Dn("CircleBucket",as,{omit:["layers"]});const yc=new jo({"circle-sort-key":new yr(Q.layout_circle["circle-sort-key"])});var Vc={paint:new jo({"circle-radius":new yr(Q.paint_circle["circle-radius"]),"circle-color":new yr(Q.paint_circle["circle-color"]),"circle-blur":new yr(Q.paint_circle["circle-blur"]),"circle-opacity":new yr(Q.paint_circle["circle-opacity"]),"circle-translate":new tr(Q.paint_circle["circle-translate"]),"circle-translate-anchor":new tr(Q.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new tr(Q.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new tr(Q.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new yr(Q.paint_circle["circle-stroke-width"]),"circle-stroke-color":new yr(Q.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new yr(Q.paint_circle["circle-stroke-opacity"])}),layout:yc},aa=1e-6,Js=typeof Float32Array<"u"?Float32Array:Array;function Ps(){var _=new Js(9);return Js!=Float32Array&&(_[1]=0,_[2]=0,_[3]=0,_[5]=0,_[6]=0,_[7]=0),_[0]=1,_[4]=1,_[8]=1,_}function eu(_){return _[0]=1,_[1]=0,_[2]=0,_[3]=0,_[4]=0,_[5]=1,_[6]=0,_[7]=0,_[8]=0,_[9]=0,_[10]=1,_[11]=0,_[12]=0,_[13]=0,_[14]=0,_[15]=1,_}function a0(_,f,A){var P=f[0],N=f[1],q=f[2],Y=f[3],oe=f[4],de=f[5],xe=f[6],Re=f[7],Ve=f[8],it=f[9],ut=f[10],ht=f[11],Gt=f[12],Ut=f[13],vi=f[14],Fi=f[15],gi=A[0],Ti=A[1],rn=A[2],nn=A[3];return _[0]=gi*P+Ti*oe+rn*Ve+nn*Gt,_[1]=gi*N+Ti*de+rn*it+nn*Ut,_[2]=gi*q+Ti*xe+rn*ut+nn*vi,_[3]=gi*Y+Ti*Re+rn*ht+nn*Fi,_[4]=(gi=A[4])*P+(Ti=A[5])*oe+(rn=A[6])*Ve+(nn=A[7])*Gt,_[5]=gi*N+Ti*de+rn*it+nn*Ut,_[6]=gi*q+Ti*xe+rn*ut+nn*vi,_[7]=gi*Y+Ti*Re+rn*ht+nn*Fi,_[8]=(gi=A[8])*P+(Ti=A[9])*oe+(rn=A[10])*Ve+(nn=A[11])*Gt,_[9]=gi*N+Ti*de+rn*it+nn*Ut,_[10]=gi*q+Ti*xe+rn*ut+nn*vi,_[11]=gi*Y+Ti*Re+rn*ht+nn*Fi,_[12]=(gi=A[12])*P+(Ti=A[13])*oe+(rn=A[14])*Ve+(nn=A[15])*Gt,_[13]=gi*N+Ti*de+rn*it+nn*Ut,_[14]=gi*q+Ti*xe+rn*ut+nn*vi,_[15]=gi*Y+Ti*Re+rn*ht+nn*Fi,_}Math.hypot||(Math.hypot=function(){for(var _=0,f=arguments.length;f--;)_+=arguments[f]*arguments[f];return Math.sqrt(_)});var tu,l0=a0;function xf(){var _=new Js(3);return Js!=Float32Array&&(_[0]=0,_[1]=0,_[2]=0),_}function mh(_,f,A){var P=new Js(3);return P[0]=_,P[1]=f,P[2]=A,P}function qc(_,f,A){var P=f[0],N=f[1],q=f[2],Y=f[3];return _[0]=A[0]*P+A[4]*N+A[8]*q+A[12]*Y,_[1]=A[1]*P+A[5]*N+A[9]*q+A[13]*Y,_[2]=A[2]*P+A[6]*N+A[10]*q+A[14]*Y,_[3]=A[3]*P+A[7]*N+A[11]*q+A[15]*Y,_}function Af(){var _=new Js(4);return Js!=Float32Array&&(_[0]=0,_[1]=0,_[2]=0),_[3]=1,_}function gh(_,f){const A=qc([],[_.x,_.y,0,1],f);return new nt(A[0]/A[3],A[1]/A[3])}xf(),tu=new Js(4),Js!=Float32Array&&(tu[0]=0,tu[1]=0,tu[2]=0,tu[3]=0),xf(),mh(1,0,0),mh(0,1,0),Af(),Af(),Ps(),function(){var _;_=new Js(2),Js!=Float32Array&&(_[0]=0,_[1]=0)}();class Hh extends as{}Dn("HeatmapBucket",Hh,{omit:["layers"]});var yh={paint:new jo({"heatmap-radius":new yr(Q.paint_heatmap["heatmap-radius"]),"heatmap-weight":new yr(Q.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new tr(Q.paint_heatmap["heatmap-intensity"]),"heatmap-color":new ws(Q.paint_heatmap["heatmap-color"]),"heatmap-opacity":new tr(Q.paint_heatmap["heatmap-opacity"])})};function Dl(_,{width:f,height:A},P,N){if(N){if(N instanceof Uint8ClampedArray)N=new Uint8Array(N.buffer);else if(N.length!==f*A*P)throw new RangeError(`mismatched image size. expected: ${N.length} but got: ${f*A*P}`)}else N=new Uint8Array(f*A*P);return _.width=f,_.height=A,_.data=N,_}function u0(_,{width:f,height:A},P){if(f===_.width&&A===_.height)return;const N=Dl({},{width:f,height:A},P);Hc(_,N,{x:0,y:0},{x:0,y:0},{width:Math.min(_.width,f),height:Math.min(_.height,A)},P),_.width=f,_.height=A,_.data=N.data}function Hc(_,f,A,P,N,q){if(N.width===0||N.height===0)return f;if(N.width>_.width||N.height>_.height||A.x>_.width-N.width||A.y>_.height-N.height)throw new RangeError("out of range source coordinates for image copy");if(N.width>f.width||N.height>f.height||P.x>f.width-N.width||P.y>f.height-N.height)throw new RangeError("out of range destination coordinates for image copy");const Y=_.data,oe=f.data;if(Y===oe)throw new Error("srcData equals dstData, so image is already copied");for(let de=0;de<N.height;de++){const xe=((A.y+de)*_.width+A.x)*q,Re=((P.y+de)*f.width+P.x)*q;for(let Ve=0;Ve<N.width*q;Ve++)oe[Re+Ve]=Y[xe+Ve]}return f}class _c{constructor(f,A){Dl(this,f,1,A)}resize(f){u0(this,f,1)}clone(){return new _c({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(f,A,P,N,q){Hc(f,A,P,N,q,1)}}class va{constructor(f,A){Dl(this,f,4,A)}resize(f){u0(this,f,4)}replace(f,A){A?this.data.set(f):this.data=f instanceof Uint8ClampedArray?new Uint8Array(f.buffer):f}clone(){return new va({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(f,A,P,N,q){Hc(f,A,P,N,q,4)}}function iu(_){const f={},A=_.resolution||256,P=_.clips?_.clips.length:1,N=_.image||new va({width:A,height:P});if(Math.log(A)/Math.LN2%1!=0)throw new Error(`width is not a power of 2 - ${A}`);const q=(Y,oe,de)=>{f[_.evaluationKey]=de;const xe=_.expression.evaluate(f);N.data[Y+oe+0]=Math.floor(255*xe.r/xe.a),N.data[Y+oe+1]=Math.floor(255*xe.g/xe.a),N.data[Y+oe+2]=Math.floor(255*xe.b/xe.a),N.data[Y+oe+3]=Math.floor(255*xe.a)};if(_.clips)for(let Y=0,oe=0;Y<P;++Y,oe+=4*A)for(let de=0,xe=0;de<A;de++,xe+=4){const Re=de/(A-1),{start:Ve,end:it}=_.clips[Y];q(oe,xe,Ve*(1-Re)+it*Re)}else for(let Y=0,oe=0;Y<A;Y++,oe+=4)q(0,oe,Y/(A-1));return N}Dn("AlphaImage",_c),Dn("RGBAImage",va);var c0={paint:new jo({"hillshade-illumination-direction":new tr(Q.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new tr(Q.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new tr(Q.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new tr(Q.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new tr(Q.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new tr(Q.paint_hillshade["hillshade-accent-color"])})};const kf=gs([{name:"a_pos",components:2,type:"Int16"}],4),{members:ud}=kf;var vc={exports:{}};function Su(_,f,A){A=A||2;var P,N,q,Y,oe,de,xe,Re=f&&f.length,Ve=Re?f[0]*A:_.length,it=h0(_,0,Ve,A,!0),ut=[];if(!it||it.next===it.prev)return ut;if(Re&&(it=function(Gt,Ut,vi,Fi){var gi,Ti,rn,nn=[];for(gi=0,Ti=Ut.length;gi<Ti;gi++)(rn=h0(Gt,Ut[gi]*Fi,gi<Ti-1?Ut[gi+1]*Fi:Gt.length,Fi,!1))===rn.next&&(rn.steiner=!0),nn.push(Gh(rn));for(nn.sort(ba),gi=0;gi<nn.length;gi++)vi=Cu(nn[gi],vi);return vi}(_,f,it,A)),_.length>80*A){P=q=_[0],N=Y=_[1];for(var ht=A;ht<Ve;ht+=A)(oe=_[ht])<P&&(P=oe),(de=_[ht+1])<N&&(N=de),oe>q&&(q=oe),de>Y&&(Y=de);xe=(xe=Math.max(q-P,Y-N))!==0?32767/xe:0}return _h(it,ut,A,P,N,xe,0),ut}function h0(_,f,A,P,N){var q,Y;if(N===If(_,f,A,P)>0)for(q=f;q<A;q+=P)Y=hp(q,_[q],_[q+1],Y);else for(q=A-P;q>=f;q-=P)Y=hp(q,_[q],_[q+1],Y);return Y&&Zu(Y,Y.next)&&(Ef(Y),Y=Y.next),Y}function Wu(_,f){if(!_)return _;f||(f=_);var A,P=_;do if(A=!1,P.steiner||!Zu(P,P.next)&&Ko(P.prev,P,P.next)!==0)P=P.next;else{if(Ef(P),(P=f=P.prev)===P.next)break;A=!0}while(A||P!==f);return f}function _h(_,f,A,P,N,q,Y){if(_){!Y&&q&&function(Re,Ve,it,ut){var ht=Re;do ht.z===0&&(ht.z=nu(ht.x,ht.y,Ve,it,ut)),ht.prevZ=ht.prev,ht.nextZ=ht.next,ht=ht.next;while(ht!==Re);ht.prevZ.nextZ=null,ht.prevZ=null,function(Gt){var Ut,vi,Fi,gi,Ti,rn,nn,Kn,nr=1;do{for(vi=Gt,Gt=null,Ti=null,rn=0;vi;){for(rn++,Fi=vi,nn=0,Ut=0;Ut<nr&&(nn++,Fi=Fi.nextZ);Ut++);for(Kn=nr;nn>0||Kn>0&&Fi;)nn!==0&&(Kn===0||!Fi||vi.z<=Fi.z)?(gi=vi,vi=vi.nextZ,nn--):(gi=Fi,Fi=Fi.nextZ,Kn--),Ti?Ti.nextZ=gi:Gt=gi,gi.prevZ=Ti,Ti=gi;vi=Fi}Ti.nextZ=null,nr*=2}while(rn>1)}(ht)}(_,P,N,q);for(var oe,de,xe=_;_.prev!==_.next;)if(oe=_.prev,de=_.next,q?cd(_,P,N,q):Sf(_))f.push(oe.i/A|0),f.push(_.i/A|0),f.push(de.i/A|0),Ef(_),_=de.next,xe=de.next;else if((_=de)===xe){Y?Y===1?_h(_=vh(Wu(_),f,A),f,A,P,N,q,2):Y===2&&Cf(_,f,A,P,N,q):_h(Wu(_),f,A,P,N,q,1);break}}}function Sf(_){var f=_.prev,A=_,P=_.next;if(Ko(f,A,P)>=0)return!1;for(var N=f.x,q=A.x,Y=P.x,oe=f.y,de=A.y,xe=P.y,Re=N<q?N<Y?N:Y:q<Y?q:Y,Ve=oe<de?oe<xe?oe:xe:de<xe?de:xe,it=N>q?N>Y?N:Y:q>Y?q:Y,ut=oe>de?oe>xe?oe:xe:de>xe?de:xe,ht=P.next;ht!==f;){if(ht.x>=Re&&ht.x<=it&&ht.y>=Ve&&ht.y<=ut&&Yu(N,oe,q,de,Y,xe,ht.x,ht.y)&&Ko(ht.prev,ht,ht.next)>=0)return!1;ht=ht.next}return!0}function cd(_,f,A,P){var N=_.prev,q=_,Y=_.next;if(Ko(N,q,Y)>=0)return!1;for(var oe=N.x,de=q.x,xe=Y.x,Re=N.y,Ve=q.y,it=Y.y,ut=oe<de?oe<xe?oe:xe:de<xe?de:xe,ht=Re<Ve?Re<it?Re:it:Ve<it?Ve:it,Gt=oe>de?oe>xe?oe:xe:de>xe?de:xe,Ut=Re>Ve?Re>it?Re:it:Ve>it?Ve:it,vi=nu(ut,ht,f,A,P),Fi=nu(Gt,Ut,f,A,P),gi=_.prevZ,Ti=_.nextZ;gi&&gi.z>=vi&&Ti&&Ti.z<=Fi;){if(gi.x>=ut&&gi.x<=Gt&&gi.y>=ht&&gi.y<=Ut&&gi!==N&&gi!==Y&&Yu(oe,Re,de,Ve,xe,it,gi.x,gi.y)&&Ko(gi.prev,gi,gi.next)>=0||(gi=gi.prevZ,Ti.x>=ut&&Ti.x<=Gt&&Ti.y>=ht&&Ti.y<=Ut&&Ti!==N&&Ti!==Y&&Yu(oe,Re,de,Ve,xe,it,Ti.x,Ti.y)&&Ko(Ti.prev,Ti,Ti.next)>=0))return!1;Ti=Ti.nextZ}for(;gi&&gi.z>=vi;){if(gi.x>=ut&&gi.x<=Gt&&gi.y>=ht&&gi.y<=Ut&&gi!==N&&gi!==Y&&Yu(oe,Re,de,Ve,xe,it,gi.x,gi.y)&&Ko(gi.prev,gi,gi.next)>=0)return!1;gi=gi.prevZ}for(;Ti&&Ti.z<=Fi;){if(Ti.x>=ut&&Ti.x<=Gt&&Ti.y>=ht&&Ti.y<=Ut&&Ti!==N&&Ti!==Y&&Yu(oe,Re,de,Ve,xe,it,Ti.x,Ti.y)&&Ko(Ti.prev,Ti,Ti.next)>=0)return!1;Ti=Ti.nextZ}return!0}function vh(_,f,A){var P=_;do{var N=P.prev,q=P.next.next;!Zu(N,q)&&Wh(N,P,P.next,q)&&Xh(N,q)&&Xh(q,N)&&(f.push(N.i/A|0),f.push(P.i/A|0),f.push(q.i/A|0),Ef(P),Ef(P.next),P=_=q),P=P.next}while(P!==_);return Wu(P)}function Cf(_,f,A,P,N,q){var Y=_;do{for(var oe=Y.next.next;oe!==Y.prev;){if(Y.i!==oe.i&&f0(Y,oe)){var de=cp(Y,oe);return Y=Wu(Y,Y.next),de=Wu(de,de.next),_h(Y,f,A,P,N,q,0),void _h(de,f,A,P,N,q,0)}oe=oe.next}Y=Y.next}while(Y!==_)}function ba(_,f){return _.x-f.x}function Cu(_,f){var A=function(N,q){var Y,oe=q,de=N.x,xe=N.y,Re=-1/0;do{if(xe<=oe.y&&xe>=oe.next.y&&oe.next.y!==oe.y){var Ve=oe.x+(xe-oe.y)*(oe.next.x-oe.x)/(oe.next.y-oe.y);if(Ve<=de&&Ve>Re&&(Re=Ve,Y=oe.x<oe.next.x?oe:oe.next,Ve===de))return Y}oe=oe.next}while(oe!==q);if(!Y)return null;var it,ut=Y,ht=Y.x,Gt=Y.y,Ut=1/0;oe=Y;do de>=oe.x&&oe.x>=ht&&de!==oe.x&&Yu(xe<Gt?de:Re,xe,ht,Gt,xe<Gt?Re:de,xe,oe.x,oe.y)&&(it=Math.abs(xe-oe.y)/(de-oe.x),Xh(oe,N)&&(it<Ut||it===Ut&&(oe.x>Y.x||oe.x===Y.x&&Xu(Y,oe)))&&(Y=oe,Ut=it)),oe=oe.next;while(oe!==ut);return Y}(_,f);if(!A)return f;var P=cp(A,_);return Wu(P,P.next),Wu(A,A.next)}function Xu(_,f){return Ko(_.prev,_,f.prev)<0&&Ko(f.next,_,_.next)<0}function nu(_,f,A,P,N){return(_=1431655765&((_=858993459&((_=252645135&((_=16711935&((_=(_-A)*N|0)|_<<8))|_<<4))|_<<2))|_<<1))|(f=1431655765&((f=858993459&((f=252645135&((f=16711935&((f=(f-P)*N|0)|f<<8))|f<<4))|f<<2))|f<<1))<<1}function Gh(_){var f=_,A=_;do(f.x<A.x||f.x===A.x&&f.y<A.y)&&(A=f),f=f.next;while(f!==_);return A}function Yu(_,f,A,P,N,q,Y,oe){return(N-Y)*(f-oe)>=(_-Y)*(q-oe)&&(_-Y)*(P-oe)>=(A-Y)*(f-oe)&&(A-Y)*(q-oe)>=(N-Y)*(P-oe)}function f0(_,f){return _.next.i!==f.i&&_.prev.i!==f.i&&!function(A,P){var N=A;do{if(N.i!==A.i&&N.next.i!==A.i&&N.i!==P.i&&N.next.i!==P.i&&Wh(N,N.next,A,P))return!0;N=N.next}while(N!==A);return!1}(_,f)&&(Xh(_,f)&&Xh(f,_)&&function(A,P){var N=A,q=!1,Y=(A.x+P.x)/2,oe=(A.y+P.y)/2;do N.y>oe!=N.next.y>oe&&N.next.y!==N.y&&Y<(N.next.x-N.x)*(oe-N.y)/(N.next.y-N.y)+N.x&&(q=!q),N=N.next;while(N!==A);return q}(_,f)&&(Ko(_.prev,_,f.prev)||Ko(_,f.prev,f))||Zu(_,f)&&Ko(_.prev,_,_.next)>0&&Ko(f.prev,f,f.next)>0)}function Ko(_,f,A){return(f.y-_.y)*(A.x-f.x)-(f.x-_.x)*(A.y-f.y)}function Zu(_,f){return _.x===f.x&&_.y===f.y}function Wh(_,f,A,P){var N=p0(Ko(_,f,A)),q=p0(Ko(_,f,P)),Y=p0(Ko(A,P,_)),oe=p0(Ko(A,P,f));return N!==q&&Y!==oe||!(N!==0||!d0(_,A,f))||!(q!==0||!d0(_,P,f))||!(Y!==0||!d0(A,_,P))||!(oe!==0||!d0(A,f,P))}function d0(_,f,A){return f.x<=Math.max(_.x,A.x)&&f.x>=Math.min(_.x,A.x)&&f.y<=Math.max(_.y,A.y)&&f.y>=Math.min(_.y,A.y)}function p0(_){return _>0?1:_<0?-1:0}function Xh(_,f){return Ko(_.prev,_,_.next)<0?Ko(_,f,_.next)>=0&&Ko(_,_.prev,f)>=0:Ko(_,f,_.prev)<0||Ko(_,_.next,f)<0}function cp(_,f){var A=new hd(_.i,_.x,_.y),P=new hd(f.i,f.x,f.y),N=_.next,q=f.prev;return _.next=f,f.prev=_,A.next=N,N.prev=A,P.next=A,A.prev=P,q.next=P,P.prev=q,P}function hp(_,f,A,P){var N=new hd(_,f,A);return P?(N.next=P.next,N.prev=P,P.next.prev=N,P.next=N):(N.prev=N,N.next=N),N}function Ef(_){_.next.prev=_.prev,_.prev.next=_.next,_.prevZ&&(_.prevZ.nextZ=_.nextZ),_.nextZ&&(_.nextZ.prevZ=_.prevZ)}function hd(_,f,A){this.i=_,this.x=f,this.y=A,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function If(_,f,A,P){for(var N=0,q=f,Y=A-P;q<A;q+=P)N+=(_[Y]-_[q])*(_[q+1]+_[Y+1]),Y=q;return N}function tm(_,f,A,P,N){fp(_,f,A||0,P||_.length-1,N||dp)}function fp(_,f,A,P,N){for(;P>A;){if(P-A>600){var q=P-A+1,Y=f-A+1,oe=Math.log(q),de=.5*Math.exp(2*oe/3),xe=.5*Math.sqrt(oe*de*(q-de)/q)*(Y-q/2<0?-1:1);fp(_,f,Math.max(A,Math.floor(f-Y*de/q+xe)),Math.min(P,Math.floor(f+(q-Y)*de/q+xe)),N)}var Re=_[f],Ve=A,it=P;for(Tf(_,A,f),N(_[P],Re)>0&&Tf(_,A,P);Ve<it;){for(Tf(_,Ve,it),Ve++,it--;N(_[Ve],Re)<0;)Ve++;for(;N(_[it],Re)>0;)it--}N(_[A],Re)===0?Tf(_,A,it):Tf(_,++it,P),it<=f&&(A=it+1),f<=it&&(P=it-1)}}function Tf(_,f,A){var P=_[f];_[f]=_[A],_[A]=P}function dp(_,f){return _<f?-1:_>f?1:0}function m0(_,f){const A=_.length;if(A<=1)return[_];const P=[];let N,q;for(let Y=0;Y<A;Y++){const oe=J(_[Y]);oe!==0&&(_[Y].area=Math.abs(oe),q===void 0&&(q=oe<0),q===oe<0?(N&&P.push(N),N=[_[Y]]):N.push(_[Y]))}if(N&&P.push(N),f>1)for(let Y=0;Y<P.length;Y++)P[Y].length<=f||(tm(P[Y],f,1,P[Y].length-1,js),P[Y]=P[Y].slice(0,f));return P}function js(_,f){return f.area-_.area}function Lf(_,f,A){const P=A.patternDependencies;let N=!1;for(const q of f){const Y=q.paint.get(`${_}-pattern`);Y.isConstant()||(N=!0);const oe=Y.constantOr(null);oe&&(N=!0,P[oe.to]=!0,P[oe.from]=!0)}return N}function fd(_,f,A,P,N){const q=N.patternDependencies;for(const Y of f){const oe=Y.paint.get(`${_}-pattern`).value;if(oe.kind!=="constant"){let de=oe.evaluate({zoom:P-1},A,{},N.availableImages),xe=oe.evaluate({zoom:P},A,{},N.availableImages),Re=oe.evaluate({zoom:P+1},A,{},N.availableImages);de=de&&de.name?de.name:de,xe=xe&&xe.name?xe.name:xe,Re=Re&&Re.name?Re.name:Re,q[de]=!0,q[xe]=!0,q[Re]=!0,A.patterns[Y.id]={min:de,mid:xe,max:Re}}}return A}vc.exports=Su,vc.exports.default=Su,Su.deviation=function(_,f,A,P){var N=f&&f.length,q=Math.abs(If(_,0,N?f[0]*A:_.length,A));if(N)for(var Y=0,oe=f.length;Y<oe;Y++)q-=Math.abs(If(_,f[Y]*A,Y<oe-1?f[Y+1]*A:_.length,A));var de=0;for(Y=0;Y<P.length;Y+=3){var xe=P[Y]*A,Re=P[Y+1]*A,Ve=P[Y+2]*A;de+=Math.abs((_[xe]-_[Ve])*(_[Re+1]-_[xe+1])-(_[xe]-_[Re])*(_[Ve+1]-_[xe+1]))}return q===0&&de===0?0:Math.abs((de-q)/q)},Su.flatten=function(_){for(var f=_[0][0].length,A={vertices:[],holes:[],dimensions:f},P=0,N=0;N<_.length;N++){for(var q=0;q<_[N].length;q++)for(var Y=0;Y<f;Y++)A.vertices.push(_[N][q][Y]);N>0&&A.holes.push(P+=_[N-1].length)}return A};class dd{constructor(f){this.zoom=f.zoom,this.overscaling=f.overscaling,this.layers=f.layers,this.layerIds=this.layers.map(A=>A.id),this.index=f.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new ue,this.indexArray=new wi,this.indexArray2=new pi,this.programConfigurations=new zo(f.layers,f.zoom),this.segments=new qt,this.segments2=new qt,this.stateDependentLayerIds=this.layers.filter(A=>A.isStateDependent()).map(A=>A.id)}populate(f,A,P){this.hasPattern=Lf("fill",this.layers,A);const N=this.layers[0].layout.get("fill-sort-key"),q=!N.isConstant(),Y=[];for(const{feature:oe,id:de,index:xe,sourceLayerIndex:Re}of f){const Ve=this.layers[0]._featureFilter.needGeometry,it=cl(oe,Ve);if(!this.layers[0]._featureFilter.filter(new Bo(this.zoom),it,P))continue;const ut=q?N.evaluate(it,{},P,A.availableImages):void 0,ht={id:de,properties:oe.properties,type:oe.type,sourceLayerIndex:Re,index:xe,geometry:Ve?it.geometry:Ha(oe),patterns:{},sortKey:ut};Y.push(ht)}q&&Y.sort((oe,de)=>oe.sortKey-de.sortKey);for(const oe of Y){const{geometry:de,index:xe,sourceLayerIndex:Re}=oe;if(this.hasPattern){const Ve=fd("fill",this.layers,oe,this.zoom,A);this.patternFeatures.push(Ve)}else this.addFeature(oe,de,xe,P,{});A.featureIndex.insert(f[xe].feature,de,xe,Re,this.index)}}update(f,A,P){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(f,A,this.stateDependentLayers,P)}addFeatures(f,A,P){for(const N of this.patternFeatures)this.addFeature(N,N.geometry,N.index,A,P)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(f){this.uploaded||(this.layoutVertexBuffer=f.createVertexBuffer(this.layoutVertexArray,ud),this.indexBuffer=f.createIndexBuffer(this.indexArray),this.indexBuffer2=f.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(f),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(f,A,P,N,q){for(const Y of m0(A,500)){let oe=0;for(const ut of Y)oe+=ut.length;const de=this.segments.prepareSegment(oe,this.layoutVertexArray,this.indexArray),xe=de.vertexLength,Re=[],Ve=[];for(const ut of Y){if(ut.length===0)continue;ut!==Y[0]&&Ve.push(Re.length/2);const ht=this.segments2.prepareSegment(ut.length,this.layoutVertexArray,this.indexArray2),Gt=ht.vertexLength;this.layoutVertexArray.emplaceBack(ut[0].x,ut[0].y),this.indexArray2.emplaceBack(Gt+ut.length-1,Gt),Re.push(ut[0].x),Re.push(ut[0].y);for(let Ut=1;Ut<ut.length;Ut++)this.layoutVertexArray.emplaceBack(ut[Ut].x,ut[Ut].y),this.indexArray2.emplaceBack(Gt+Ut-1,Gt+Ut),Re.push(ut[Ut].x),Re.push(ut[Ut].y);ht.vertexLength+=ut.length,ht.primitiveLength+=ut.length}const it=vc.exports(Re,Ve);for(let ut=0;ut<it.length;ut+=3)this.indexArray.emplaceBack(xe+it[ut],xe+it[ut+1],xe+it[ut+2]);de.vertexLength+=oe,de.primitiveLength+=it.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,f,P,q,N)}}Dn("FillBucket",dd,{omit:["layers","patternFeatures"]});const im=new jo({"fill-sort-key":new yr(Q.layout_fill["fill-sort-key"])});var pp={paint:new jo({"fill-antialias":new tr(Q.paint_fill["fill-antialias"]),"fill-opacity":new yr(Q.paint_fill["fill-opacity"]),"fill-color":new yr(Q.paint_fill["fill-color"]),"fill-outline-color":new yr(Q.paint_fill["fill-outline-color"]),"fill-translate":new tr(Q.paint_fill["fill-translate"]),"fill-translate-anchor":new tr(Q.paint_fill["fill-translate-anchor"]),"fill-pattern":new Gu(Q.paint_fill["fill-pattern"])}),layout:im};const Yh=gs([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),nm=gs([{name:"a_centroid",components:2,type:"Int16"}],4),{members:rm}=Yh;var Gc={},bc=nt,_r=wc;function wc(_,f,A,P,N){this.properties={},this.extent=A,this.type=0,this._pbf=_,this._geometry=-1,this._keys=P,this._values=N,_.readFields(om,this,f)}function om(_,f,A){_==1?f.id=A.readVarint():_==2?function(P,N){for(var q=P.readVarint()+P.pos;P.pos<q;){var Y=N._keys[P.readVarint()],oe=N._values[P.readVarint()];N.properties[Y]=oe}}(A,f):_==3?f.type=A.readVarint():_==4&&(f._geometry=A.pos)}function sm(_){for(var f,A,P=0,N=0,q=_.length,Y=q-1;N<q;Y=N++)P+=((A=_[Y]).x-(f=_[N]).x)*(f.y+A.y);return P}wc.types=["Unknown","Point","LineString","Polygon"],wc.prototype.loadGeometry=function(){var _=this._pbf;_.pos=this._geometry;for(var f,A=_.readVarint()+_.pos,P=1,N=0,q=0,Y=0,oe=[];_.pos<A;){if(N<=0){var de=_.readVarint();P=7&de,N=de>>3}if(N--,P===1||P===2)q+=_.readSVarint(),Y+=_.readSVarint(),P===1&&(f&&oe.push(f),f=[]),f.push(new bc(q,Y));else{if(P!==7)throw new Error("unknown command "+P);f&&f.push(f[0].clone())}}return f&&oe.push(f),oe},wc.prototype.bbox=function(){var _=this._pbf;_.pos=this._geometry;for(var f=_.readVarint()+_.pos,A=1,P=0,N=0,q=0,Y=1/0,oe=-1/0,de=1/0,xe=-1/0;_.pos<f;){if(P<=0){var Re=_.readVarint();A=7&Re,P=Re>>3}if(P--,A===1||A===2)(N+=_.readSVarint())<Y&&(Y=N),N>oe&&(oe=N),(q+=_.readSVarint())<de&&(de=q),q>xe&&(xe=q);else if(A!==7)throw new Error("unknown command "+A)}return[Y,de,oe,xe]},wc.prototype.toGeoJSON=function(_,f,A){var P,N,q=this.extent*Math.pow(2,A),Y=this.extent*_,oe=this.extent*f,de=this.loadGeometry(),xe=wc.types[this.type];function Re(ut){for(var ht=0;ht<ut.length;ht++){var Gt=ut[ht];ut[ht]=[360*(Gt.x+Y)/q-180,360/Math.PI*Math.atan(Math.exp((180-360*(Gt.y+oe)/q)*Math.PI/180))-90]}}switch(this.type){case 1:var Ve=[];for(P=0;P<de.length;P++)Ve[P]=de[P][0];Re(de=Ve);break;case 2:for(P=0;P<de.length;P++)Re(de[P]);break;case 3:for(de=function(ut){var ht=ut.length;if(ht<=1)return[ut];for(var Gt,Ut,vi=[],Fi=0;Fi<ht;Fi++){var gi=sm(ut[Fi]);gi!==0&&(Ut===void 0&&(Ut=gi<0),Ut===gi<0?(Gt&&vi.push(Gt),Gt=[ut[Fi]]):Gt.push(ut[Fi]))}return Gt&&vi.push(Gt),vi}(de),P=0;P<de.length;P++)for(N=0;N<de[P].length;N++)Re(de[P][N])}de.length===1?de=de[0]:xe="Multi"+xe;var it={type:"Feature",geometry:{type:xe,coordinates:de},properties:this.properties};return"id"in this&&(it.id=this.id),it};var am=_r,mp=gp;function gp(_,f){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=_,this._keys=[],this._values=[],this._features=[],_.readFields(lm,this,f),this.length=this._features.length}function lm(_,f,A){_===15?f.version=A.readVarint():_===1?f.name=A.readString():_===5?f.extent=A.readVarint():_===2?f._features.push(A.pos):_===3?f._keys.push(A.readString()):_===4&&f._values.push(function(P){for(var N=null,q=P.readVarint()+P.pos;P.pos<q;){var Y=P.readVarint()>>3;N=Y===1?P.readString():Y===2?P.readFloat():Y===3?P.readDouble():Y===4?P.readVarint64():Y===5?P.readVarint():Y===6?P.readSVarint():Y===7?P.readBoolean():null}return N}(A))}gp.prototype.feature=function(_){if(_<0||_>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[_];var f=this._pbf.readVarint()+this._pbf.pos;return new am(this._pbf,f,this.extent,this._keys,this._values)};var Pf=mp;function g0(_,f,A){if(_===3){var P=new Pf(A,A.readVarint()+A.pos);P.length&&(f[P.name]=P)}}Gc.VectorTile=function(_,f){this.layers=_.readFields(g0,{},f)},Gc.VectorTileFeature=_r,Gc.VectorTileLayer=mp;const yp=Gc.VectorTileFeature.types,pd=Math.pow(2,13);function Zh(_,f,A,P,N,q,Y,oe){_.emplaceBack(f,A,2*Math.floor(P*pd)+Y,N*pd*2,q*pd*2,Math.round(oe))}class Mf{constructor(f){this.zoom=f.zoom,this.overscaling=f.overscaling,this.layers=f.layers,this.layerIds=this.layers.map(A=>A.id),this.index=f.index,this.hasPattern=!1,this.layoutVertexArray=new we,this.centroidVertexArray=new j,this.indexArray=new wi,this.programConfigurations=new zo(f.layers,f.zoom),this.segments=new qt,this.stateDependentLayerIds=this.layers.filter(A=>A.isStateDependent()).map(A=>A.id)}populate(f,A,P){this.features=[],this.hasPattern=Lf("fill-extrusion",this.layers,A);for(const{feature:N,id:q,index:Y,sourceLayerIndex:oe}of f){const de=this.layers[0]._featureFilter.needGeometry,xe=cl(N,de);if(!this.layers[0]._featureFilter.filter(new Bo(this.zoom),xe,P))continue;const Re={id:q,sourceLayerIndex:oe,index:Y,geometry:de?xe.geometry:Ha(N),properties:N.properties,type:N.type,patterns:{}};this.hasPattern?this.features.push(fd("fill-extrusion",this.layers,Re,this.zoom,A)):this.addFeature(Re,Re.geometry,Y,P,{}),A.featureIndex.insert(N,Re.geometry,Y,oe,this.index,!0)}}addFeatures(f,A,P){for(const N of this.features){const{geometry:q}=N;this.addFeature(N,q,N.index,A,P)}}update(f,A,P){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(f,A,this.stateDependentLayers,P)}isEmpty(){return this.layoutVertexArray.length===0&&this.centroidVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(f){this.uploaded||(this.layoutVertexBuffer=f.createVertexBuffer(this.layoutVertexArray,rm),this.centroidVertexBuffer=f.createVertexBuffer(this.centroidVertexArray,nm.members,!0),this.indexBuffer=f.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(f),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.centroidVertexBuffer.destroy())}addFeature(f,A,P,N,q){const Y={x:0,y:0,vertexCount:0};for(const oe of m0(A,500)){let de=0;for(const ht of oe)de+=ht.length;let xe=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray);for(const ht of oe){if(ht.length===0||um(ht))continue;let Gt=0;for(let Ut=0;Ut<ht.length;Ut++){const vi=ht[Ut];if(Ut>=1){const Fi=ht[Ut-1];if(!_p(vi,Fi)){xe.vertexLength+4>qt.MAX_VERTEX_ARRAY_LENGTH&&(xe=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));const gi=vi.sub(Fi)._perp()._unit(),Ti=Fi.dist(vi);Gt+Ti>32768&&(Gt=0),Zh(this.layoutVertexArray,vi.x,vi.y,gi.x,gi.y,0,0,Gt),Zh(this.layoutVertexArray,vi.x,vi.y,gi.x,gi.y,0,1,Gt),Y.x+=2*vi.x,Y.y+=2*vi.y,Y.vertexCount+=2,Gt+=Ti,Zh(this.layoutVertexArray,Fi.x,Fi.y,gi.x,gi.y,0,0,Gt),Zh(this.layoutVertexArray,Fi.x,Fi.y,gi.x,gi.y,0,1,Gt),Y.x+=2*Fi.x,Y.y+=2*Fi.y,Y.vertexCount+=2;const rn=xe.vertexLength;this.indexArray.emplaceBack(rn,rn+2,rn+1),this.indexArray.emplaceBack(rn+1,rn+2,rn+3),xe.vertexLength+=4,xe.primitiveLength+=2}}}}if(xe.vertexLength+de>qt.MAX_VERTEX_ARRAY_LENGTH&&(xe=this.segments.prepareSegment(de,this.layoutVertexArray,this.indexArray)),yp[f.type]!=="Polygon")continue;const Re=[],Ve=[],it=xe.vertexLength;for(const ht of oe)if(ht.length!==0){ht!==oe[0]&&Ve.push(Re.length/2);for(let Gt=0;Gt<ht.length;Gt++){const Ut=ht[Gt];Zh(this.layoutVertexArray,Ut.x,Ut.y,0,0,1,1,0),Y.x+=Ut.x,Y.y+=Ut.y,Y.vertexCount+=1,Re.push(Ut.x),Re.push(Ut.y)}}const ut=vc.exports(Re,Ve);for(let ht=0;ht<ut.length;ht+=3)this.indexArray.emplaceBack(it+ut[ht],it+ut[ht+2],it+ut[ht+1]);xe.primitiveLength+=ut.length/3,xe.vertexLength+=de}for(let oe=0;oe<Y.vertexCount;oe++)this.centroidVertexArray.emplaceBack(Math.floor(Y.x/Y.vertexCount),Math.floor(Y.y/Y.vertexCount));this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,f,P,q,N)}}function _p(_,f){return _.x===f.x&&(_.x<0||_.x>Mo)||_.y===f.y&&(_.y<0||_.y>Mo)}function um(_){return _.every(f=>f.x<0)||_.every(f=>f.x>Mo)||_.every(f=>f.y<0)||_.every(f=>f.y>Mo)}Dn("FillExtrusionBucket",Mf,{omit:["layers","features"]});var cm={paint:new jo({"fill-extrusion-opacity":new tr(Q["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new yr(Q["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new tr(Q["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new tr(Q["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new Gu(Q["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new yr(Q["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new yr(Q["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new tr(Q["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})};function Df(_,f){return _.x*f.x+_.y*f.y}function vp(_,f){if(_.length===1){let A=0;const P=f[A++];let N;for(;!N||P.equals(N);)if(N=f[A++],!N)return 1/0;for(;A<f.length;A++){const q=f[A],Y=_[0],oe=N.sub(P),de=q.sub(P),xe=Y.sub(P),Re=Df(oe,oe),Ve=Df(oe,de),it=Df(de,de),ut=Df(xe,oe),ht=Df(xe,de),Gt=Re*it-Ve*Ve,Ut=(it*ut-Ve*ht)/Gt,vi=(Re*ht-Ve*ut)/Gt,Fi=P.z*(1-Ut-vi)+N.z*Ut+q.z*vi;if(isFinite(Fi))return Fi}return 1/0}{let A=1/0;for(const P of f)A=Math.min(A,P.z);return A}}const bp=gs([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:hm}=bp,n=gs([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:s}=n,a=Gc.VectorTileFeature.types,g=Math.cos(Math.PI/180*37.5),k=Math.pow(2,14)/.5;class E{constructor(f){this.zoom=f.zoom,this.overscaling=f.overscaling,this.layers=f.layers,this.layerIds=this.layers.map(A=>A.id),this.index=f.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(A=>{this.gradients[A.id]={}}),this.layoutVertexArray=new je,this.layoutVertexArray2=new Je,this.indexArray=new wi,this.programConfigurations=new zo(f.layers,f.zoom),this.segments=new qt,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(A=>A.isStateDependent()).map(A=>A.id)}populate(f,A,P){this.hasPattern=Lf("line",this.layers,A);const N=this.layers[0].layout.get("line-sort-key"),q=!N.isConstant(),Y=[];for(const{feature:oe,id:de,index:xe,sourceLayerIndex:Re}of f){const Ve=this.layers[0]._featureFilter.needGeometry,it=cl(oe,Ve);if(!this.layers[0]._featureFilter.filter(new Bo(this.zoom),it,P))continue;const ut=q?N.evaluate(it,{},P):void 0,ht={id:de,properties:oe.properties,type:oe.type,sourceLayerIndex:Re,index:xe,geometry:Ve?it.geometry:Ha(oe),patterns:{},sortKey:ut};Y.push(ht)}q&&Y.sort((oe,de)=>oe.sortKey-de.sortKey);for(const oe of Y){const{geometry:de,index:xe,sourceLayerIndex:Re}=oe;if(this.hasPattern){const Ve=fd("line",this.layers,oe,this.zoom,A);this.patternFeatures.push(Ve)}else this.addFeature(oe,de,xe,P,{});A.featureIndex.insert(f[xe].feature,de,xe,Re,this.index)}}update(f,A,P){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(f,A,this.stateDependentLayers,P)}addFeatures(f,A,P){for(const N of this.patternFeatures)this.addFeature(N,N.geometry,N.index,A,P)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(f){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=f.createVertexBuffer(this.layoutVertexArray2,s)),this.layoutVertexBuffer=f.createVertexBuffer(this.layoutVertexArray,hm),this.indexBuffer=f.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(f),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(f){if(f.properties&&Object.prototype.hasOwnProperty.call(f.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(f.properties,"mapbox_clip_end"))return{start:+f.properties.mapbox_clip_start,end:+f.properties.mapbox_clip_end}}addFeature(f,A,P,N,q){const Y=this.layers[0].layout,oe=Y.get("line-join").evaluate(f,{}),de=Y.get("line-cap"),xe=Y.get("line-miter-limit"),Re=Y.get("line-round-limit");this.lineClips=this.lineFeatureClips(f);for(const Ve of A)this.addLine(Ve,f,oe,de,xe,Re);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,f,P,q,N)}addLine(f,A,P,N,q,Y){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let vi=0;vi<f.length-1;vi++)this.totalDistance+=f[vi].dist(f[vi+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const oe=a[A.type]==="Polygon";let de=f.length;for(;de>=2&&f[de-1].equals(f[de-2]);)de--;let xe=0;for(;xe<de-1&&f[xe].equals(f[xe+1]);)xe++;if(de<(oe?3:2))return;P==="bevel"&&(q=1.05);const Re=this.overscaling<=16?122880/(512*this.overscaling):0,Ve=this.segments.prepareSegment(10*de,this.layoutVertexArray,this.indexArray);let it,ut,ht,Gt,Ut;this.e1=this.e2=-1,oe&&(it=f[de-2],Ut=f[xe].sub(it)._unit()._perp());for(let vi=xe;vi<de;vi++){if(ht=vi===de-1?oe?f[xe+1]:void 0:f[vi+1],ht&&f[vi].equals(ht))continue;Ut&&(Gt=Ut),it&&(ut=it),it=f[vi],Ut=ht?ht.sub(it)._unit()._perp():Gt,Gt=Gt||Ut;let Fi=Gt.add(Ut);Fi.x===0&&Fi.y===0||Fi._unit();const gi=Gt.x*Ut.x+Gt.y*Ut.y,Ti=Fi.x*Ut.x+Fi.y*Ut.y,rn=Ti!==0?1/Ti:1/0,nn=2*Math.sqrt(2-2*Ti),Kn=Ti<g&&ut&&ht,nr=Gt.x*Ut.y-Gt.y*Ut.x>0;if(Kn&&vi>xe){const An=it.dist(ut);if(An>2*Re){const Gn=it.sub(it.sub(ut)._mult(Re/An)._round());this.updateDistance(ut,Gn),this.addCurrentVertex(Gn,Gt,0,0,Ve),ut=Gn}}const Hn=ut&&ht;let On=Hn?P:oe?"butt":N;if(Hn&&On==="round"&&(rn<Y?On="miter":rn<=2&&(On="fakeround")),On==="miter"&&rn>q&&(On="bevel"),On==="bevel"&&(rn>2&&(On="flipbevel"),rn<q&&(On="miter")),ut&&this.updateDistance(ut,it),On==="miter")Fi._mult(rn),this.addCurrentVertex(it,Fi,0,0,Ve);else if(On==="flipbevel"){if(rn>100)Fi=Ut.mult(-1);else{const An=rn*Gt.add(Ut).mag()/Gt.sub(Ut).mag();Fi._perp()._mult(An*(nr?-1:1))}this.addCurrentVertex(it,Fi,0,0,Ve),this.addCurrentVertex(it,Fi.mult(-1),0,0,Ve)}else if(On==="bevel"||On==="fakeround"){const An=-Math.sqrt(rn*rn-1),Gn=nr?An:0,Nn=nr?0:An;if(ut&&this.addCurrentVertex(it,Gt,Gn,Nn,Ve),On==="fakeround"){const dn=Math.round(180*nn/Math.PI/20);for(let vr=1;vr<dn;vr++){let ur=vr/dn;if(ur!==.5){const ls=ur-.5;ur+=ur*ls*(ur-1)*((1.0904+gi*(gi*(3.55645-1.43519*gi)-3.2452))*ls*ls+(.848013+gi*(.215638*gi-1.06021)))}const Jr=Ut.sub(Gt)._mult(ur)._add(Gt)._unit()._mult(nr?-1:1);this.addHalfVertex(it,Jr.x,Jr.y,!1,nr,0,Ve)}}ht&&this.addCurrentVertex(it,Ut,-Gn,-Nn,Ve)}else if(On==="butt")this.addCurrentVertex(it,Fi,0,0,Ve);else if(On==="square"){const An=ut?1:-1;this.addCurrentVertex(it,Fi,An,An,Ve)}else On==="round"&&(ut&&(this.addCurrentVertex(it,Gt,0,0,Ve),this.addCurrentVertex(it,Gt,1,1,Ve,!0)),ht&&(this.addCurrentVertex(it,Ut,-1,-1,Ve,!0),this.addCurrentVertex(it,Ut,0,0,Ve)));if(Kn&&vi<de-1){const An=it.dist(ht);if(An>2*Re){const Gn=it.add(ht.sub(it)._mult(Re/An)._round());this.updateDistance(it,Gn),this.addCurrentVertex(Gn,Ut,0,0,Ve),it=Gn}}}}addCurrentVertex(f,A,P,N,q,Y=!1){const oe=A.y*N-A.x,de=-A.y-A.x*N;this.addHalfVertex(f,A.x+A.y*P,A.y-A.x*P,Y,!1,P,q),this.addHalfVertex(f,oe,de,Y,!0,-N,q),this.distance>k/2&&this.totalDistance===0&&(this.distance=0,this.addCurrentVertex(f,A,P,N,q,Y))}addHalfVertex({x:f,y:A},P,N,q,Y,oe,de){const xe=.5*(this.lineClips?this.scaledDistance*(k-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((f<<1)+(q?1:0),(A<<1)+(Y?1:0),Math.round(63*P)+128,Math.round(63*N)+128,1+(oe===0?0:oe<0?-1:1)|(63&xe)<<2,xe>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);const Re=de.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,Re),de.primitiveLength++),Y?this.e2=Re:this.e1=Re}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(f,A){this.distance+=f.dist(A),this.updateScaledDistance()}}Dn("LineBucket",E,{omit:["layers","patternFeatures"]});const L=new jo({"line-cap":new tr(Q.layout_line["line-cap"]),"line-join":new yr(Q.layout_line["line-join"]),"line-miter-limit":new tr(Q.layout_line["line-miter-limit"]),"line-round-limit":new tr(Q.layout_line["line-round-limit"]),"line-sort-key":new yr(Q.layout_line["line-sort-key"])});var R={paint:new jo({"line-opacity":new yr(Q.paint_line["line-opacity"]),"line-color":new yr(Q.paint_line["line-color"]),"line-translate":new tr(Q.paint_line["line-translate"]),"line-translate-anchor":new tr(Q.paint_line["line-translate-anchor"]),"line-width":new yr(Q.paint_line["line-width"]),"line-gap-width":new yr(Q.paint_line["line-gap-width"]),"line-offset":new yr(Q.paint_line["line-offset"]),"line-blur":new yr(Q.paint_line["line-blur"]),"line-dasharray":new hc(Q.paint_line["line-dasharray"]),"line-pattern":new Gu(Q.paint_line["line-pattern"]),"line-gradient":new ws(Q.paint_line["line-gradient"])}),layout:L};const G=new class extends yr{possiblyEvaluate(_,f){return f=new Bo(Math.floor(f.zoom),{now:f.now,fadeDuration:f.fadeDuration,zoomHistory:f.zoomHistory,transition:f.transition}),super.possiblyEvaluate(_,f)}evaluate(_,f,A,P){return f=C({},f,{zoom:Math.floor(f.zoom)}),super.evaluate(_,f,A,P)}}(R.paint.properties["line-width"].specification);function H(_,f){return f>0?f+2*_:_}G.useIntegerZoom=!0;const te=gs([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),ce=gs([{name:"a_projected_pos",components:3,type:"Float32"}],4);gs([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const Ae=gs([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}]);gs([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const Ne=gs([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),Ze=gs([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function mt(_,f,A){return _.sections.forEach(P=>{P.text=function(N,q,Y){const oe=q.layout.get("text-transform").evaluate(Y,{});return oe==="uppercase"?N=N.toLocaleUpperCase():oe==="lowercase"&&(N=N.toLocaleLowerCase()),ya.applyArabicShaping&&(N=ya.applyArabicShaping(N)),N}(P.text,f,A)}),_}gs([{name:"triangle",components:3,type:"Uint16"}]),gs([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),gs([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),gs([{type:"Float32",name:"offsetX"}]),gs([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);const Pt={"!":"\uFE15","#":"\uFF03",$:"\uFF04","%":"\uFF05","&":"\uFF06","(":"\uFE35",")":"\uFE36","*":"\uFF0A","+":"\uFF0B",",":"\uFE10","-":"\uFE32",".":"\u30FB","/":"\uFF0F",":":"\uFE13",";":"\uFE14","<":"\uFE3F","=":"\uFF1D",">":"\uFE40","?":"\uFE16","@":"\uFF20","[":"\uFE47","\\":"\uFF3C","]":"\uFE48","^":"\uFF3E",_:"\uFE33","`":"\uFF40","{":"\uFE37","|":"\u2015","}":"\uFE38","~":"\uFF5E","\xA2":"\uFFE0","\xA3":"\uFFE1","\xA5":"\uFFE5","\xA6":"\uFFE4","\xAC":"\uFFE2","\xAF":"\uFFE3","\u2013":"\uFE32","\u2014":"\uFE31","\u2018":"\uFE43","\u2019":"\uFE44","\u201C":"\uFE41","\u201D":"\uFE42","\u2026":"\uFE19","\u2027":"\u30FB","\u20A9":"\uFFE6","\u3001":"\uFE11","\u3002":"\uFE12","\u3008":"\uFE3F","\u3009":"\uFE40","\u300A":"\uFE3D","\u300B":"\uFE3E","\u300C":"\uFE41","\u300D":"\uFE42","\u300E":"\uFE43","\u300F":"\uFE44","\u3010":"\uFE3B","\u3011":"\uFE3C","\u3014":"\uFE39","\u3015":"\uFE3A","\u3016":"\uFE17","\u3017":"\uFE18","\uFF01":"\uFE15","\uFF08":"\uFE35","\uFF09":"\uFE36","\uFF0C":"\uFE10","\uFF0D":"\uFE32","\uFF0E":"\u30FB","\uFF1A":"\uFE13","\uFF1B":"\uFE14","\uFF1C":"\uFE3F","\uFF1E":"\uFE40","\uFF1F":"\uFE16","\uFF3B":"\uFE47","\uFF3D":"\uFE48","\uFF3F":"\uFE33","\uFF5B":"\uFE37","\uFF5C":"\u2015","\uFF5D":"\uFE38","\uFF5F":"\uFE35","\uFF60":"\uFE36","\uFF61":"\uFE12","\uFF62":"\uFE41","\uFF63":"\uFE42"};var Ft=24,ni=Si,ci=function(_,f,A,P,N){var q,Y,oe=8*N-P-1,de=(1<<oe)-1,xe=de>>1,Re=-7,Ve=A?N-1:0,it=A?-1:1,ut=_[f+Ve];for(Ve+=it,q=ut&(1<<-Re)-1,ut>>=-Re,Re+=oe;Re>0;q=256*q+_[f+Ve],Ve+=it,Re-=8);for(Y=q&(1<<-Re)-1,q>>=-Re,Re+=P;Re>0;Y=256*Y+_[f+Ve],Ve+=it,Re-=8);if(q===0)q=1-xe;else{if(q===de)return Y?NaN:1/0*(ut?-1:1);Y+=Math.pow(2,P),q-=xe}return(ut?-1:1)*Y*Math.pow(2,q-P)},Mi=function(_,f,A,P,N,q){var Y,oe,de,xe=8*q-N-1,Re=(1<<xe)-1,Ve=Re>>1,it=N===23?Math.pow(2,-24)-Math.pow(2,-77):0,ut=P?0:q-1,ht=P?1:-1,Gt=f<0||f===0&&1/f<0?1:0;for(f=Math.abs(f),isNaN(f)||f===1/0?(oe=isNaN(f)?1:0,Y=Re):(Y=Math.floor(Math.log(f)/Math.LN2),f*(de=Math.pow(2,-Y))<1&&(Y--,de*=2),(f+=Y+Ve>=1?it/de:it*Math.pow(2,1-Ve))*de>=2&&(Y++,de/=2),Y+Ve>=Re?(oe=0,Y=Re):Y+Ve>=1?(oe=(f*de-1)*Math.pow(2,N),Y+=Ve):(oe=f*Math.pow(2,Ve-1)*Math.pow(2,N),Y=0));N>=8;_[A+ut]=255&oe,ut+=ht,oe/=256,N-=8);for(Y=Y<<N|oe,xe+=N;xe>0;_[A+ut]=255&Y,ut+=ht,Y/=256,xe-=8);_[A+ut-ht]|=128*Gt};function Si(_){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(_)?_:new Uint8Array(_||0),this.pos=0,this.type=0,this.length=this.buf.length}Si.Varint=0,Si.Fixed64=1,Si.Bytes=2,Si.Fixed32=5;var Ji,sn=4294967296,bn=1/sn,ar=typeof TextDecoder>"u"?null:new TextDecoder("utf8");function Tr(_){return _.type===Si.Bytes?_.readVarint()+_.pos:_.pos+1}function ys(_,f,A){return A?4294967296*f+(_>>>0):4294967296*(f>>>0)+(_>>>0)}function wa(_,f,A){var P=f<=16383?1:f<=2097151?2:f<=268435455?3:Math.floor(Math.log(f)/(7*Math.LN2));A.realloc(P);for(var N=A.pos-1;N>=_;N--)A.buf[N+P]=A.buf[N]}function fl(_,f){for(var A=0;A<_.length;A++)f.writeVarint(_[A])}function Ku(_,f){for(var A=0;A<_.length;A++)f.writeSVarint(_[A])}function Kh(_,f){for(var A=0;A<_.length;A++)f.writeFloat(_[A])}function P3(_,f){for(var A=0;A<_.length;A++)f.writeDouble(_[A])}function M3(_,f){for(var A=0;A<_.length;A++)f.writeBoolean(_[A])}function D3(_,f){for(var A=0;A<_.length;A++)f.writeFixed32(_[A])}function O3(_,f){for(var A=0;A<_.length;A++)f.writeSFixed32(_[A])}function F3(_,f){for(var A=0;A<_.length;A++)f.writeFixed64(_[A])}function R3(_,f){for(var A=0;A<_.length;A++)f.writeSFixed64(_[A])}function wp(_,f){return(_[f]|_[f+1]<<8|_[f+2]<<16)+16777216*_[f+3]}function y0(_,f,A){_[A]=f,_[A+1]=f>>>8,_[A+2]=f>>>16,_[A+3]=f>>>24}function ay(_,f){return(_[f]|_[f+1]<<8|_[f+2]<<16)+(_[f+3]<<24)}function B3(_,f,A){_===1&&A.readMessage(z3,f)}function z3(_,f,A){if(_===3){const{id:P,bitmap:N,width:q,height:Y,left:oe,top:de,advance:xe}=A.readMessage(N3,{});f.push({id:P,bitmap:new _c({width:q+6,height:Y+6},N),metrics:{width:q,height:Y,left:oe,top:de,advance:xe}})}}function N3(_,f,A){_===1?f.id=A.readVarint():_===2?f.bitmap=A.readBytes():_===3?f.width=A.readVarint():_===4?f.height=A.readVarint():_===5?f.left=A.readSVarint():_===6?f.top=A.readSVarint():_===7&&(f.advance=A.readVarint())}function ly(_){let f=0,A=0;for(const Y of _)f+=Y.w*Y.h,A=Math.max(A,Y.w);_.sort((Y,oe)=>oe.h-Y.h);const P=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(f/.95)),A),h:1/0}];let N=0,q=0;for(const Y of _)for(let oe=P.length-1;oe>=0;oe--){const de=P[oe];if(!(Y.w>de.w||Y.h>de.h)){if(Y.x=de.x,Y.y=de.y,q=Math.max(q,Y.y+Y.h),N=Math.max(N,Y.x+Y.w),Y.w===de.w&&Y.h===de.h){const xe=P.pop();oe<P.length&&(P[oe]=xe)}else Y.h===de.h?(de.x+=Y.w,de.w-=Y.w):Y.w===de.w?(de.y+=Y.h,de.h-=Y.h):(P.push({x:de.x+Y.w,y:de.y,w:de.w-Y.w,h:Y.h}),de.y+=Y.h,de.h-=Y.h);break}}return{w:N,h:q,fill:f/(N*q)||0}}Si.prototype={destroy:function(){this.buf=null},readFields:function(_,f,A){for(A=A||this.length;this.pos<A;){var P=this.readVarint(),N=P>>3,q=this.pos;this.type=7&P,_(N,f,this),this.pos===q&&this.skip(P)}return f},readMessage:function(_,f){return this.readFields(_,f,this.readVarint()+this.pos)},readFixed32:function(){var _=wp(this.buf,this.pos);return this.pos+=4,_},readSFixed32:function(){var _=ay(this.buf,this.pos);return this.pos+=4,_},readFixed64:function(){var _=wp(this.buf,this.pos)+wp(this.buf,this.pos+4)*sn;return this.pos+=8,_},readSFixed64:function(){var _=wp(this.buf,this.pos)+ay(this.buf,this.pos+4)*sn;return this.pos+=8,_},readFloat:function(){var _=ci(this.buf,this.pos,!0,23,4);return this.pos+=4,_},readDouble:function(){var _=ci(this.buf,this.pos,!0,52,8);return this.pos+=8,_},readVarint:function(_){var f,A,P=this.buf;return f=127&(A=P[this.pos++]),A<128?f:(f|=(127&(A=P[this.pos++]))<<7,A<128?f:(f|=(127&(A=P[this.pos++]))<<14,A<128?f:(f|=(127&(A=P[this.pos++]))<<21,A<128?f:function(N,q,Y){var oe,de,xe=Y.buf;if(oe=(112&(de=xe[Y.pos++]))>>4,de<128||(oe|=(127&(de=xe[Y.pos++]))<<3,de<128)||(oe|=(127&(de=xe[Y.pos++]))<<10,de<128)||(oe|=(127&(de=xe[Y.pos++]))<<17,de<128)||(oe|=(127&(de=xe[Y.pos++]))<<24,de<128)||(oe|=(1&(de=xe[Y.pos++]))<<31,de<128))return ys(N,oe,q);throw new Error("Expected varint not more than 10 bytes")}(f|=(15&(A=P[this.pos]))<<28,_,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var _=this.readVarint();return _%2==1?(_+1)/-2:_/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var _=this.readVarint()+this.pos,f=this.pos;return this.pos=_,_-f>=12&&ar?function(A,P,N){return ar.decode(A.subarray(P,N))}(this.buf,f,_):function(A,P,N){for(var q="",Y=P;Y<N;){var oe,de,xe,Re=A[Y],Ve=null,it=Re>239?4:Re>223?3:Re>191?2:1;if(Y+it>N)break;it===1?Re<128&&(Ve=Re):it===2?(192&(oe=A[Y+1]))==128&&(Ve=(31&Re)<<6|63&oe)<=127&&(Ve=null):it===3?(de=A[Y+2],(192&(oe=A[Y+1]))==128&&(192&de)==128&&((Ve=(15&Re)<<12|(63&oe)<<6|63&de)<=2047||Ve>=55296&&Ve<=57343)&&(Ve=null)):it===4&&(de=A[Y+2],xe=A[Y+3],(192&(oe=A[Y+1]))==128&&(192&de)==128&&(192&xe)==128&&((Ve=(15&Re)<<18|(63&oe)<<12|(63&de)<<6|63&xe)<=65535||Ve>=1114112)&&(Ve=null)),Ve===null?(Ve=65533,it=1):Ve>65535&&(Ve-=65536,q+=String.fromCharCode(Ve>>>10&1023|55296),Ve=56320|1023&Ve),q+=String.fromCharCode(Ve),Y+=it}return q}(this.buf,f,_)},readBytes:function(){var _=this.readVarint()+this.pos,f=this.buf.subarray(this.pos,_);return this.pos=_,f},readPackedVarint:function(_,f){if(this.type!==Si.Bytes)return _.push(this.readVarint(f));var A=Tr(this);for(_=_||[];this.pos<A;)_.push(this.readVarint(f));return _},readPackedSVarint:function(_){if(this.type!==Si.Bytes)return _.push(this.readSVarint());var f=Tr(this);for(_=_||[];this.pos<f;)_.push(this.readSVarint());return _},readPackedBoolean:function(_){if(this.type!==Si.Bytes)return _.push(this.readBoolean());var f=Tr(this);for(_=_||[];this.pos<f;)_.push(this.readBoolean());return _},readPackedFloat:function(_){if(this.type!==Si.Bytes)return _.push(this.readFloat());var f=Tr(this);for(_=_||[];this.pos<f;)_.push(this.readFloat());return _},readPackedDouble:function(_){if(this.type!==Si.Bytes)return _.push(this.readDouble());var f=Tr(this);for(_=_||[];this.pos<f;)_.push(this.readDouble());return _},readPackedFixed32:function(_){if(this.type!==Si.Bytes)return _.push(this.readFixed32());var f=Tr(this);for(_=_||[];this.pos<f;)_.push(this.readFixed32());return _},readPackedSFixed32:function(_){if(this.type!==Si.Bytes)return _.push(this.readSFixed32());var f=Tr(this);for(_=_||[];this.pos<f;)_.push(this.readSFixed32());return _},readPackedFixed64:function(_){if(this.type!==Si.Bytes)return _.push(this.readFixed64());var f=Tr(this);for(_=_||[];this.pos<f;)_.push(this.readFixed64());return _},readPackedSFixed64:function(_){if(this.type!==Si.Bytes)return _.push(this.readSFixed64());var f=Tr(this);for(_=_||[];this.pos<f;)_.push(this.readSFixed64());return _},skip:function(_){var f=7&_;if(f===Si.Varint)for(;this.buf[this.pos++]>127;);else if(f===Si.Bytes)this.pos=this.readVarint()+this.pos;else if(f===Si.Fixed32)this.pos+=4;else{if(f!==Si.Fixed64)throw new Error("Unimplemented type: "+f);this.pos+=8}},writeTag:function(_,f){this.writeVarint(_<<3|f)},realloc:function(_){for(var f=this.length||16;f<this.pos+_;)f*=2;if(f!==this.length){var A=new Uint8Array(f);A.set(this.buf),this.buf=A,this.length=f}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(_){this.realloc(4),y0(this.buf,_,this.pos),this.pos+=4},writeSFixed32:function(_){this.realloc(4),y0(this.buf,_,this.pos),this.pos+=4},writeFixed64:function(_){this.realloc(8),y0(this.buf,-1&_,this.pos),y0(this.buf,Math.floor(_*bn),this.pos+4),this.pos+=8},writeSFixed64:function(_){this.realloc(8),y0(this.buf,-1&_,this.pos),y0(this.buf,Math.floor(_*bn),this.pos+4),this.pos+=8},writeVarint:function(_){(_=+_||0)>268435455||_<0?function(f,A){var P,N;if(f>=0?(P=f%4294967296|0,N=f/4294967296|0):(N=~(-f/4294967296),4294967295^(P=~(-f%4294967296))?P=P+1|0:(P=0,N=N+1|0)),f>=18446744073709552e3||f<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");A.realloc(10),function(q,Y,oe){oe.buf[oe.pos++]=127&q|128,q>>>=7,oe.buf[oe.pos++]=127&q|128,q>>>=7,oe.buf[oe.pos++]=127&q|128,q>>>=7,oe.buf[oe.pos++]=127&q|128,oe.buf[oe.pos]=127&(q>>>=7)}(P,0,A),function(q,Y){var oe=(7&q)<<4;Y.buf[Y.pos++]|=oe|((q>>>=3)?128:0),q&&(Y.buf[Y.pos++]=127&q|((q>>>=7)?128:0),q&&(Y.buf[Y.pos++]=127&q|((q>>>=7)?128:0),q&&(Y.buf[Y.pos++]=127&q|((q>>>=7)?128:0),q&&(Y.buf[Y.pos++]=127&q|((q>>>=7)?128:0),q&&(Y.buf[Y.pos++]=127&q)))))}(N,A)}(_,this):(this.realloc(4),this.buf[this.pos++]=127&_|(_>127?128:0),_<=127||(this.buf[this.pos++]=127&(_>>>=7)|(_>127?128:0),_<=127||(this.buf[this.pos++]=127&(_>>>=7)|(_>127?128:0),_<=127||(this.buf[this.pos++]=_>>>7&127))))},writeSVarint:function(_){this.writeVarint(_<0?2*-_-1:2*_)},writeBoolean:function(_){this.writeVarint(Boolean(_))},writeString:function(_){_=String(_),this.realloc(4*_.length),this.pos++;var f=this.pos;this.pos=function(P,N,q){for(var Y,oe,de=0;de<N.length;de++){if((Y=N.charCodeAt(de))>55295&&Y<57344){if(!oe){Y>56319||de+1===N.length?(P[q++]=239,P[q++]=191,P[q++]=189):oe=Y;continue}if(Y<56320){P[q++]=239,P[q++]=191,P[q++]=189,oe=Y;continue}Y=oe-55296<<10|Y-56320|65536,oe=null}else oe&&(P[q++]=239,P[q++]=191,P[q++]=189,oe=null);Y<128?P[q++]=Y:(Y<2048?P[q++]=Y>>6|192:(Y<65536?P[q++]=Y>>12|224:(P[q++]=Y>>18|240,P[q++]=Y>>12&63|128),P[q++]=Y>>6&63|128),P[q++]=63&Y|128)}return q}(this.buf,_,this.pos);var A=this.pos-f;A>=128&&wa(f,A,this),this.pos=f-1,this.writeVarint(A),this.pos+=A},writeFloat:function(_){this.realloc(4),Mi(this.buf,_,this.pos,!0,23,4),this.pos+=4},writeDouble:function(_){this.realloc(8),Mi(this.buf,_,this.pos,!0,52,8),this.pos+=8},writeBytes:function(_){var f=_.length;this.writeVarint(f),this.realloc(f);for(var A=0;A<f;A++)this.buf[this.pos++]=_[A]},writeRawMessage:function(_,f){this.pos++;var A=this.pos;_(f,this);var P=this.pos-A;P>=128&&wa(A,P,this),this.pos=A-1,this.writeVarint(P),this.pos+=P},writeMessage:function(_,f,A){this.writeTag(_,Si.Bytes),this.writeRawMessage(f,A)},writePackedVarint:function(_,f){f.length&&this.writeMessage(_,fl,f)},writePackedSVarint:function(_,f){f.length&&this.writeMessage(_,Ku,f)},writePackedBoolean:function(_,f){f.length&&this.writeMessage(_,M3,f)},writePackedFloat:function(_,f){f.length&&this.writeMessage(_,Kh,f)},writePackedDouble:function(_,f){f.length&&this.writeMessage(_,P3,f)},writePackedFixed32:function(_,f){f.length&&this.writeMessage(_,D3,f)},writePackedSFixed32:function(_,f){f.length&&this.writeMessage(_,O3,f)},writePackedFixed64:function(_,f){f.length&&this.writeMessage(_,F3,f)},writePackedSFixed64:function(_,f){f.length&&this.writeMessage(_,R3,f)},writeBytesField:function(_,f){this.writeTag(_,Si.Bytes),this.writeBytes(f)},writeFixed32Field:function(_,f){this.writeTag(_,Si.Fixed32),this.writeFixed32(f)},writeSFixed32Field:function(_,f){this.writeTag(_,Si.Fixed32),this.writeSFixed32(f)},writeFixed64Field:function(_,f){this.writeTag(_,Si.Fixed64),this.writeFixed64(f)},writeSFixed64Field:function(_,f){this.writeTag(_,Si.Fixed64),this.writeSFixed64(f)},writeVarintField:function(_,f){this.writeTag(_,Si.Varint),this.writeVarint(f)},writeSVarintField:function(_,f){this.writeTag(_,Si.Varint),this.writeSVarint(f)},writeStringField:function(_,f){this.writeTag(_,Si.Bytes),this.writeString(f)},writeFloatField:function(_,f){this.writeTag(_,Si.Fixed32),this.writeFloat(f)},writeDoubleField:function(_,f){this.writeTag(_,Si.Fixed64),this.writeDouble(f)},writeBooleanField:function(_,f){this.writeVarintField(_,Boolean(f))}};class fm{constructor(f,{pixelRatio:A,version:P,stretchX:N,stretchY:q,content:Y}){this.paddedRect=f,this.pixelRatio=A,this.stretchX=N,this.stretchY=q,this.content=Y,this.version=P}get tl(){return[this.paddedRect.x+1,this.paddedRect.y+1]}get br(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]}}class uy{constructor(f,A){const P={},N={};this.haveRenderCallbacks=[];const q=[];this.addImages(f,P,q),this.addImages(A,N,q);const{w:Y,h:oe}=ly(q),de=new va({width:Y||1,height:oe||1});for(const xe in f){const Re=f[xe],Ve=P[xe].paddedRect;va.copy(Re.data,de,{x:0,y:0},{x:Ve.x+1,y:Ve.y+1},Re.data)}for(const xe in A){const Re=A[xe],Ve=N[xe].paddedRect,it=Ve.x+1,ut=Ve.y+1,ht=Re.data.width,Gt=Re.data.height;va.copy(Re.data,de,{x:0,y:0},{x:it,y:ut},Re.data),va.copy(Re.data,de,{x:0,y:Gt-1},{x:it,y:ut-1},{width:ht,height:1}),va.copy(Re.data,de,{x:0,y:0},{x:it,y:ut+Gt},{width:ht,height:1}),va.copy(Re.data,de,{x:ht-1,y:0},{x:it-1,y:ut},{width:1,height:Gt}),va.copy(Re.data,de,{x:0,y:0},{x:it+ht,y:ut},{width:1,height:Gt})}this.image=de,this.iconPositions=P,this.patternPositions=N}addImages(f,A,P){for(const N in f){const q=f[N],Y={x:0,y:0,w:q.data.width+2,h:q.data.height+2};P.push(Y),A[N]=new fm(Y,q),q.hasRenderCallback&&this.haveRenderCallbacks.push(N)}}patchUpdatedImages(f,A){f.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const P in f.updatedImages)this.patchUpdatedImage(this.iconPositions[P],f.getImage(P),A),this.patchUpdatedImage(this.patternPositions[P],f.getImage(P),A)}patchUpdatedImage(f,A,P){if(!f||!A||f.version===A.version)return;f.version=A.version;const[N,q]=f.tl;P.update(A.data,void 0,{x:N,y:q})}}Dn("ImagePosition",fm),Dn("ImageAtlas",uy),r.WritingMode=void 0,(Ji=r.WritingMode||(r.WritingMode={}))[Ji.none=0]="none",Ji[Ji.horizontal=1]="horizontal",Ji[Ji.vertical=2]="vertical",Ji[Ji.horizontalOnly=3]="horizontalOnly";const xp=-17;class md{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(f,A){const P=new md;return P.scale=f||1,P.fontStack=A,P}static forImage(f){const A=new md;return A.imageName=f,A}}class _0{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(f,A){const P=new _0;for(let N=0;N<f.sections.length;N++){const q=f.sections[N];q.image?P.addImageSection(q):P.addTextSection(q,A)}return P}length(){return this.text.length}getSection(f){return this.sections[this.sectionIndex[f]]}getSectionIndex(f){return this.sectionIndex[f]}getCharCode(f){return this.text.charCodeAt(f)}verticalizePunctuation(){this.text=function(f){let A="";for(let P=0;P<f.length;P++){const N=f.charCodeAt(P+1)||null,q=f.charCodeAt(P-1)||null;A+=N&&hh(N)&&!Pt[f[P+1]]||q&&hh(q)&&!Pt[f[P-1]]||!Pt[f[P]]?f[P]:Pt[f[P]]}return A}(this.text)}trim(){let f=0;for(let P=0;P<this.text.length&&kp[this.text.charCodeAt(P)];P++)f++;let A=this.text.length;for(let P=this.text.length-1;P>=0&&P>=f&&kp[this.text.charCodeAt(P)];P--)A--;this.text=this.text.substring(f,A),this.sectionIndex=this.sectionIndex.slice(f,A)}substring(f,A){const P=new _0;return P.text=this.text.substring(f,A),P.sectionIndex=this.sectionIndex.slice(f,A),P.sections=this.sections,P}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((f,A)=>Math.max(f,this.sections[A].scale),0)}addTextSection(f,A){this.text+=f.text,this.sections.push(md.forText(f.scale,f.fontStack||A));const P=this.sections.length-1;for(let N=0;N<f.text.length;++N)this.sectionIndex.push(P)}addImageSection(f){const A=f.image?f.image.name:"";if(A.length===0)return void Z("Can't add FormattedSection with an empty image.");const P=this.getNextImageSectionCharCode();P?(this.text+=String.fromCharCode(P),this.sections.push(md.forImage(A)),this.sectionIndex.push(this.sections.length-1)):Z("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function Ap(_,f,A,P,N,q,Y,oe,de,xe,Re,Ve,it,ut,ht,Gt){const Ut=_0.fromFeature(_,N);let vi;Ve===r.WritingMode.vertical&&Ut.verticalizePunctuation();const{processBidirectionalText:Fi,processStyledBidirectionalText:gi}=ya;if(Fi&&Ut.sections.length===1){vi=[];const nn=Fi(Ut.toString(),dm(Ut,xe,q,f,P,ut,ht));for(const Kn of nn){const nr=new _0;nr.text=Kn,nr.sections=Ut.sections;for(let Hn=0;Hn<Kn.length;Hn++)nr.sectionIndex.push(0);vi.push(nr)}}else if(gi){vi=[];const nn=gi(Ut.text,Ut.sectionIndex,dm(Ut,xe,q,f,P,ut,ht));for(const Kn of nn){const nr=new _0;nr.text=Kn[0],nr.sectionIndex=Kn[1],nr.sections=Ut.sections,vi.push(nr)}}else vi=function(nn,Kn){const nr=[],Hn=nn.text;let On=0;for(const An of Kn)nr.push(nn.substring(On,An)),On=An;return On<Hn.length&&nr.push(nn.substring(On,Hn.length)),nr}(Ut,dm(Ut,xe,q,f,P,ut,ht));const Ti=[],rn={positionedLines:Ti,text:Ut.toString(),top:Re[1],bottom:Re[1],left:Re[0],right:Re[0],writingMode:Ve,iconsInText:!1,verticalizable:!1};return function(nn,Kn,nr,Hn,On,An,Gn,Nn,dn,vr,ur,Jr){let ls=0,hs=xp,Qs=0,Iu=0;const Oa=Nn==="right"?1:Nn==="left"?0:.5;let Ws=0;for(const Xs of On){Xs.trim();const Ra=Xs.getMaxScale(),Ya=(Ra-1)*Ft,dl={positionedGlyphs:[],lineOffset:0};nn.positionedLines[Ws]=dl;const Fl=dl.positionedGlyphs;let Rl=0;if(!Xs.length()){hs+=An,++Ws;continue}for(let ua=0;ua<Xs.length();ua++){const to=Xs.getSection(ua),ru=Xs.getSectionIndex(ua),Ba=Xs.getCharCode(ua);let Za=0,Ju=null,xc=null,Ac=null,wh=Ft;const Qu=!(dn===r.WritingMode.horizontal||!ur&&!Bc(Ba)||ur&&(kp[Ba]||(la=Ba,_n.Arabic(la)||_n["Arabic Supplement"](la)||_n["Arabic Extended-A"](la)||_n["Arabic Presentation Forms-A"](la)||_n["Arabic Presentation Forms-B"](la))));if(to.imageName){const Tu=Hn[to.imageName];if(!Tu)continue;Ac=to.imageName,nn.iconsInText=nn.iconsInText||!0,xc=Tu.paddedRect;const Bl=Tu.displaySize;to.scale=to.scale*Ft/Jr,Ju={width:Bl[0],height:Bl[1],left:1,top:-3,advance:Qu?Bl[1]:Bl[0]},Za=Ya+(Ft-Bl[1]*to.scale),wh=Ju.advance;const xh=Qu?Bl[0]*to.scale-Ft*Ra:Bl[1]*to.scale-Ft*Ra;xh>0&&xh>Rl&&(Rl=xh)}else{const Tu=nr[to.fontStack],Bl=Tu&&Tu[Ba];if(Bl&&Bl.rect)xc=Bl.rect,Ju=Bl.metrics;else{const xh=Kn[to.fontStack],_d=xh&&xh[Ba];if(!_d)continue;Ju=_d.metrics}Za=(Ra-to.scale)*Ft}Qu?(nn.verticalizable=!0,Fl.push({glyph:Ba,imageName:Ac,x:ls,y:hs+Za,vertical:Qu,scale:to.scale,fontStack:to.fontStack,sectionIndex:ru,metrics:Ju,rect:xc}),ls+=wh*to.scale+vr):(Fl.push({glyph:Ba,imageName:Ac,x:ls,y:hs+Za,vertical:Qu,scale:to.scale,fontStack:to.fontStack,sectionIndex:ru,metrics:Ju,rect:xc}),ls+=Ju.advance*to.scale+vr)}Fl.length!==0&&(Qs=Math.max(ls-vr,Qs),V3(Fl,0,Fl.length-1,Oa,Rl)),ls=0;const _s=An*Ra+Rl;dl.lineOffset=Math.max(Rl,Ya),hs+=_s,Iu=Math.max(_s,Iu),++Ws}var la;const Fa=hs-xp,{horizontalAlign:Xa,verticalAlign:Ol}=pm(Gn);(function(Xs,Ra,Ya,dl,Fl,Rl,_s,ua,to){const ru=(Ra-Ya)*Fl;let Ba=0;Ba=Rl!==_s?-ua*dl-xp:(-dl*to+.5)*_s;for(const Za of Xs)for(const Ju of Za.positionedGlyphs)Ju.x+=ru,Ju.y+=Ba})(nn.positionedLines,Oa,Xa,Ol,Qs,Iu,An,Fa,On.length),nn.top+=-Ol*Fa,nn.bottom=nn.top+Fa,nn.left+=-Xa*Qs,nn.right=nn.left+Qs}(rn,f,A,P,vi,Y,oe,de,Ve,xe,it,Gt),!function(nn){for(const Kn of nn)if(Kn.positionedGlyphs.length!==0)return!1;return!0}(Ti)&&rn}const kp={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},j3={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0};function cy(_,f,A,P,N,q){if(f.imageName){const Y=P[f.imageName];return Y?Y.displaySize[0]*f.scale*Ft/q+N:0}{const Y=A[f.fontStack],oe=Y&&Y[_];return oe?oe.metrics.advance*f.scale+N:0}}function hy(_,f,A,P){const N=Math.pow(_-f,2);return P?_<f?N/2:2*N:N+Math.abs(A)*A}function U3(_,f,A){let P=0;return _===10&&(P-=1e4),A&&(P+=150),_!==40&&_!==65288||(P+=50),f!==41&&f!==65289||(P+=50),P}function fy(_,f,A,P,N,q){let Y=null,oe=hy(f,A,N,q);for(const de of P){const xe=hy(f-de.x,A,N,q)+de.badness;xe<=oe&&(Y=de,oe=xe)}return{index:_,x:f,priorBreak:Y,badness:oe}}function dy(_){return _?dy(_.priorBreak).concat(_.index):[]}function dm(_,f,A,P,N,q,Y){if(q!=="point")return[];if(!_)return[];const oe=[],de=function(it,ut,ht,Gt,Ut,vi){let Fi=0;for(let gi=0;gi<it.length();gi++){const Ti=it.getSection(gi);Fi+=cy(it.getCharCode(gi),Ti,Gt,Ut,ut,vi)}return Fi/Math.max(1,Math.ceil(Fi/ht))}(_,f,A,P,N,Y),xe=_.text.indexOf("\u200B")>=0;let Re=0;for(let it=0;it<_.length();it++){const ut=_.getSection(it),ht=_.getCharCode(it);if(kp[ht]||(Re+=cy(ht,ut,P,N,f,Y)),it<_.length()-1){const Gt=!((Ve=ht)<11904||!(_n["Bopomofo Extended"](Ve)||_n.Bopomofo(Ve)||_n["CJK Compatibility Forms"](Ve)||_n["CJK Compatibility Ideographs"](Ve)||_n["CJK Compatibility"](Ve)||_n["CJK Radicals Supplement"](Ve)||_n["CJK Strokes"](Ve)||_n["CJK Symbols and Punctuation"](Ve)||_n["CJK Unified Ideographs Extension A"](Ve)||_n["CJK Unified Ideographs"](Ve)||_n["Enclosed CJK Letters and Months"](Ve)||_n["Halfwidth and Fullwidth Forms"](Ve)||_n.Hiragana(Ve)||_n["Ideographic Description Characters"](Ve)||_n["Kangxi Radicals"](Ve)||_n["Katakana Phonetic Extensions"](Ve)||_n.Katakana(Ve)||_n["Vertical Forms"](Ve)||_n["Yi Radicals"](Ve)||_n["Yi Syllables"](Ve)));(j3[ht]||Gt||ut.imageName)&&oe.push(fy(it+1,Re,de,oe,U3(ht,_.getCharCode(it+1),Gt&&xe),!1))}}var Ve;return dy(fy(_.length(),Re,de,oe,0,!0))}function pm(_){let f=.5,A=.5;switch(_){case"right":case"top-right":case"bottom-right":f=1;break;case"left":case"top-left":case"bottom-left":f=0}switch(_){case"bottom":case"bottom-right":case"bottom-left":A=1;break;case"top":case"top-right":case"top-left":A=0}return{horizontalAlign:f,verticalAlign:A}}function V3(_,f,A,P,N){if(!P&&!N)return;const q=_[A],Y=(_[A].x+q.metrics.advance*q.scale)*P;for(let oe=f;oe<=A;oe++)_[oe].x-=Y,_[oe].y+=N}function q3(_,f,A){const{horizontalAlign:P,verticalAlign:N}=pm(A),q=f[0]-_.displaySize[0]*P,Y=f[1]-_.displaySize[1]*N;return{image:_,top:Y,bottom:Y+_.displaySize[1],left:q,right:q+_.displaySize[0]}}function py(_,f,A,P,N,q){const Y=_.image;let oe;if(Y.content){const Ut=Y.content,vi=Y.pixelRatio||1;oe=[Ut[0]/vi,Ut[1]/vi,Y.displaySize[0]-Ut[2]/vi,Y.displaySize[1]-Ut[3]/vi]}const de=f.left*q,xe=f.right*q;let Re,Ve,it,ut;A==="width"||A==="both"?(ut=N[0]+de-P[3],Ve=N[0]+xe+P[1]):(ut=N[0]+(de+xe-Y.displaySize[0])/2,Ve=ut+Y.displaySize[0]);const ht=f.top*q,Gt=f.bottom*q;return A==="height"||A==="both"?(Re=N[1]+ht-P[0],it=N[1]+Gt+P[2]):(Re=N[1]+(ht+Gt-Y.displaySize[1])/2,it=Re+Y.displaySize[1]),{image:Y,top:Re,right:Ve,bottom:it,left:ut,collisionPadding:oe}}const bh=128;function my(_,f){const{expression:A}=f;if(A.kind==="constant")return{kind:"constant",layoutSize:A.evaluate(new Bo(_+1))};if(A.kind==="source")return{kind:"source"};{const{zoomStops:P,interpolationType:N}=A;let q=0;for(;q<P.length&&P[q]<=_;)q++;q=Math.max(0,q-1);let Y=q;for(;Y<P.length&&P[Y]<_+1;)Y++;Y=Math.min(P.length-1,Y);const oe=P[q],de=P[Y];return A.kind==="composite"?{kind:"composite",minZoom:oe,maxZoom:de,interpolationType:N}:{kind:"camera",minZoom:oe,maxZoom:de,minSize:A.evaluate(new Bo(oe)),maxSize:A.evaluate(new Bo(de)),interpolationType:N}}}class Jh extends nt{constructor(f,A,P,N){super(f,A),this.angle=P,N!==void 0&&(this.segment=N)}clone(){return new Jh(this.x,this.y,this.angle,this.segment)}}function gy(_,f,A,P,N){if(f.segment===void 0)return!0;let q=f,Y=f.segment+1,oe=0;for(;oe>-A/2;){if(Y--,Y<0)return!1;oe-=_[Y].dist(q),q=_[Y]}oe+=_[Y].dist(_[Y+1]),Y++;const de=[];let xe=0;for(;oe<A/2;){const Re=_[Y],Ve=_[Y+1];if(!Ve)return!1;let it=_[Y-1].angleTo(Re)-Re.angleTo(Ve);for(it=Math.abs((it+3*Math.PI)%(2*Math.PI)-Math.PI),de.push({distance:oe,angleDelta:it}),xe+=it;oe-de[0].distance>P;)xe-=de.shift().angleDelta;if(xe>N)return!1;Y++,oe+=Re.dist(Ve)}return!0}function yy(_){let f=0;for(let A=0;A<_.length-1;A++)f+=_[A].dist(_[A+1]);return f}function _y(_,f,A){return _?.6*f*A:0}function vy(_,f){return Math.max(_?_.right-_.left:0,f?f.right-f.left:0)}function H3(_,f,A,P,N,q){const Y=_y(A,N,q),oe=vy(A,P)*q;let de=0;const xe=yy(_)/2;for(let Re=0;Re<_.length-1;Re++){const Ve=_[Re],it=_[Re+1],ut=Ve.dist(it);if(de+ut>xe){const ht=(xe-de)/ut,Gt=Co(Ve.x,it.x,ht),Ut=Co(Ve.y,it.y,ht),vi=new Jh(Gt,Ut,it.angleTo(Ve),Re);return vi._round(),!Y||gy(_,vi,oe,Y,f)?vi:void 0}de+=ut}}function G3(_,f,A,P,N,q,Y,oe,de){const xe=_y(P,q,Y),Re=vy(P,N),Ve=Re*Y,it=_[0].x===0||_[0].x===de||_[0].y===0||_[0].y===de;return f-Ve<f/4&&(f=Ve+f/4),by(_,it?f/2*oe%f:(Re/2+2*q)*Y*oe%f,f,xe,A,Ve,it,!1,de)}function by(_,f,A,P,N,q,Y,oe,de){const xe=q/2,Re=yy(_);let Ve=0,it=f-A,ut=[];for(let ht=0;ht<_.length-1;ht++){const Gt=_[ht],Ut=_[ht+1],vi=Gt.dist(Ut),Fi=Ut.angleTo(Gt);for(;it+A<Ve+vi;){it+=A;const gi=(it-Ve)/vi,Ti=Co(Gt.x,Ut.x,gi),rn=Co(Gt.y,Ut.y,gi);if(Ti>=0&&Ti<de&&rn>=0&&rn<de&&it-xe>=0&&it+xe<=Re){const nn=new Jh(Ti,rn,Fi,ht);nn._round(),P&&!gy(_,nn,q,P,N)||ut.push(nn)}}Ve+=vi}return oe||ut.length||Y||(ut=by(_,Ve/2,A,P,N,q,Y,!0,de)),ut}function wy(_,f,A,P,N){const q=[];for(let Y=0;Y<_.length;Y++){const oe=_[Y];let de;for(let xe=0;xe<oe.length-1;xe++){let Re=oe[xe],Ve=oe[xe+1];Re.x<f&&Ve.x<f||(Re.x<f?Re=new nt(f,Re.y+(f-Re.x)/(Ve.x-Re.x)*(Ve.y-Re.y))._round():Ve.x<f&&(Ve=new nt(f,Re.y+(f-Re.x)/(Ve.x-Re.x)*(Ve.y-Re.y))._round()),Re.y<A&&Ve.y<A||(Re.y<A?Re=new nt(Re.x+(A-Re.y)/(Ve.y-Re.y)*(Ve.x-Re.x),A)._round():Ve.y<A&&(Ve=new nt(Re.x+(A-Re.y)/(Ve.y-Re.y)*(Ve.x-Re.x),A)._round()),Re.x>=P&&Ve.x>=P||(Re.x>=P?Re=new nt(P,Re.y+(P-Re.x)/(Ve.x-Re.x)*(Ve.y-Re.y))._round():Ve.x>=P&&(Ve=new nt(P,Re.y+(P-Re.x)/(Ve.x-Re.x)*(Ve.y-Re.y))._round()),Re.y>=N&&Ve.y>=N||(Re.y>=N?Re=new nt(Re.x+(N-Re.y)/(Ve.y-Re.y)*(Ve.x-Re.x),N)._round():Ve.y>=N&&(Ve=new nt(Re.x+(N-Re.y)/(Ve.y-Re.y)*(Ve.x-Re.x),N)._round()),de&&Re.equals(de[de.length-1])||(de=[Re],q.push(de)),de.push(Ve)))))}}return q}function xy(_,f,A,P){const N=[],q=_.image,Y=q.pixelRatio,oe=q.paddedRect.w-2,de=q.paddedRect.h-2,xe=_.right-_.left,Re=_.bottom-_.top,Ve=q.stretchX||[[0,oe]],it=q.stretchY||[[0,de]],ut=(An,Gn)=>An+Gn[1]-Gn[0],ht=Ve.reduce(ut,0),Gt=it.reduce(ut,0),Ut=oe-ht,vi=de-Gt;let Fi=0,gi=ht,Ti=0,rn=Gt,nn=0,Kn=Ut,nr=0,Hn=vi;if(q.content&&P){const An=q.content;Fi=Sp(Ve,0,An[0]),Ti=Sp(it,0,An[1]),gi=Sp(Ve,An[0],An[2]),rn=Sp(it,An[1],An[3]),nn=An[0]-Fi,nr=An[1]-Ti,Kn=An[2]-An[0]-gi,Hn=An[3]-An[1]-rn}const On=(An,Gn,Nn,dn)=>{const vr=Cp(An.stretch-Fi,gi,xe,_.left),ur=Ep(An.fixed-nn,Kn,An.stretch,ht),Jr=Cp(Gn.stretch-Ti,rn,Re,_.top),ls=Ep(Gn.fixed-nr,Hn,Gn.stretch,Gt),hs=Cp(Nn.stretch-Fi,gi,xe,_.left),Qs=Ep(Nn.fixed-nn,Kn,Nn.stretch,ht),Iu=Cp(dn.stretch-Ti,rn,Re,_.top),Oa=Ep(dn.fixed-nr,Hn,dn.stretch,Gt),Ws=new nt(vr,Jr),la=new nt(hs,Jr),Fa=new nt(hs,Iu),Xa=new nt(vr,Iu),Ol=new nt(ur/Y,ls/Y),Xs=new nt(Qs/Y,Oa/Y),Ra=f*Math.PI/180;if(Ra){const Fl=Math.sin(Ra),Rl=Math.cos(Ra),_s=[Rl,-Fl,Fl,Rl];Ws._matMult(_s),la._matMult(_s),Xa._matMult(_s),Fa._matMult(_s)}const Ya=An.stretch+An.fixed,dl=Gn.stretch+Gn.fixed;return{tl:Ws,tr:la,bl:Xa,br:Fa,tex:{x:q.paddedRect.x+1+Ya,y:q.paddedRect.y+1+dl,w:Nn.stretch+Nn.fixed-Ya,h:dn.stretch+dn.fixed-dl},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:Ol,pixelOffsetBR:Xs,minFontScaleX:Kn/Y/xe,minFontScaleY:Hn/Y/Re,isSDF:A}};if(P&&(q.stretchX||q.stretchY)){const An=Ay(Ve,Ut,ht),Gn=Ay(it,vi,Gt);for(let Nn=0;Nn<An.length-1;Nn++){const dn=An[Nn],vr=An[Nn+1];for(let ur=0;ur<Gn.length-1;ur++)N.push(On(dn,Gn[ur],vr,Gn[ur+1]))}}else N.push(On({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:oe+1},{fixed:0,stretch:de+1}));return N}function Sp(_,f,A){let P=0;for(const N of _)P+=Math.max(f,Math.min(A,N[1]))-Math.max(f,Math.min(A,N[0]));return P}function Ay(_,f,A){const P=[{fixed:-1,stretch:0}];for(const[N,q]of _){const Y=P[P.length-1];P.push({fixed:N-Y.stretch,stretch:Y.stretch}),P.push({fixed:N-Y.stretch,stretch:Y.stretch+(q-N)})}return P.push({fixed:f+1,stretch:A}),P}function Cp(_,f,A,P){return _/f*A+P}function Ep(_,f,A,P){return _-f*A/P}Dn("Anchor",Jh);class Ip{constructor(f,A,P,N,q,Y,oe,de,xe,Re){if(this.boxStartIndex=f.length,xe){let Ve=Y.top,it=Y.bottom;const ut=Y.collisionPadding;ut&&(Ve-=ut[1],it+=ut[3]);let ht=it-Ve;ht>0&&(ht=Math.max(10,ht),this.circleDiameter=ht)}else{let Ve=Y.top*oe-de[0],it=Y.bottom*oe+de[2],ut=Y.left*oe-de[3],ht=Y.right*oe+de[1];const Gt=Y.collisionPadding;if(Gt&&(ut-=Gt[0]*oe,Ve-=Gt[1]*oe,ht+=Gt[2]*oe,it+=Gt[3]*oe),Re){const Ut=new nt(ut,Ve),vi=new nt(ht,Ve),Fi=new nt(ut,it),gi=new nt(ht,it),Ti=Re*Math.PI/180;Ut._rotate(Ti),vi._rotate(Ti),Fi._rotate(Ti),gi._rotate(Ti),ut=Math.min(Ut.x,vi.x,Fi.x,gi.x),ht=Math.max(Ut.x,vi.x,Fi.x,gi.x),Ve=Math.min(Ut.y,vi.y,Fi.y,gi.y),it=Math.max(Ut.y,vi.y,Fi.y,gi.y)}f.emplaceBack(A.x,A.y,ut,Ve,ht,it,P,N,q)}this.boxEndIndex=f.length}}class W3{constructor(f=[],A=X3){if(this.data=f,this.length=this.data.length,this.compare=A,this.length>0)for(let P=(this.length>>1)-1;P>=0;P--)this._down(P)}push(f){this.data.push(f),this.length++,this._up(this.length-1)}pop(){if(this.length===0)return;const f=this.data[0],A=this.data.pop();return this.length--,this.length>0&&(this.data[0]=A,this._down(0)),f}peek(){return this.data[0]}_up(f){const{data:A,compare:P}=this,N=A[f];for(;f>0;){const q=f-1>>1,Y=A[q];if(P(N,Y)>=0)break;A[f]=Y,f=q}A[f]=N}_down(f){const{data:A,compare:P}=this,N=this.length>>1,q=A[f];for(;f<N;){let Y=1+(f<<1),oe=A[Y];const de=Y+1;if(de<this.length&&P(A[de],oe)<0&&(Y=de,oe=A[de]),P(oe,q)>=0)break;A[f]=oe,f=Y}A[f]=q}}function X3(_,f){return _<f?-1:_>f?1:0}function Y3(_,f=1,A=!1){let P=1/0,N=1/0,q=-1/0,Y=-1/0;const oe=_[0];for(let ut=0;ut<oe.length;ut++){const ht=oe[ut];(!ut||ht.x<P)&&(P=ht.x),(!ut||ht.y<N)&&(N=ht.y),(!ut||ht.x>q)&&(q=ht.x),(!ut||ht.y>Y)&&(Y=ht.y)}const de=Math.min(q-P,Y-N);let xe=de/2;const Re=new W3([],Z3);if(de===0)return new nt(P,N);for(let ut=P;ut<q;ut+=de)for(let ht=N;ht<Y;ht+=de)Re.push(new v0(ut+xe,ht+xe,xe,_));let Ve=function(ut){let ht=0,Gt=0,Ut=0;const vi=ut[0];for(let Fi=0,gi=vi.length,Ti=gi-1;Fi<gi;Ti=Fi++){const rn=vi[Fi],nn=vi[Ti],Kn=rn.x*nn.y-nn.x*rn.y;Gt+=(rn.x+nn.x)*Kn,Ut+=(rn.y+nn.y)*Kn,ht+=3*Kn}return new v0(Gt/ht,Ut/ht,0,ut)}(_),it=Re.length;for(;Re.length;){const ut=Re.pop();(ut.d>Ve.d||!Ve.d)&&(Ve=ut,A&&console.log("found best %d after %d probes",Math.round(1e4*ut.d)/1e4,it)),ut.max-Ve.d<=f||(xe=ut.h/2,Re.push(new v0(ut.p.x-xe,ut.p.y-xe,xe,_)),Re.push(new v0(ut.p.x+xe,ut.p.y-xe,xe,_)),Re.push(new v0(ut.p.x-xe,ut.p.y+xe,xe,_)),Re.push(new v0(ut.p.x+xe,ut.p.y+xe,xe,_)),it+=4)}return A&&(console.log(`num probes: ${it}`),console.log(`best distance: ${Ve.d}`)),Ve.p}function Z3(_,f){return f.max-_.max}function v0(_,f,A,P){this.p=new nt(_,f),this.h=A,this.d=function(N,q){let Y=!1,oe=1/0;for(let de=0;de<q.length;de++){const xe=q[de];for(let Re=0,Ve=xe.length,it=Ve-1;Re<Ve;it=Re++){const ut=xe[Re],ht=xe[it];ut.y>N.y!=ht.y>N.y&&N.x<(ht.x-ut.x)*(N.y-ut.y)/(ht.y-ut.y)+ut.x&&(Y=!Y),oe=Math.min(oe,Wa(N,ut,ht))}}return(Y?1:-1)*Math.sqrt(oe)}(this.p,P),this.max=this.d+this.h*Math.SQRT2}const mm=Number.POSITIVE_INFINITY;function ky(_,f){return f[1]!==mm?function(A,P,N){let q=0,Y=0;switch(P=Math.abs(P),N=Math.abs(N),A){case"top-right":case"top-left":case"top":Y=N-7;break;case"bottom-right":case"bottom-left":case"bottom":Y=7-N}switch(A){case"top-right":case"bottom-right":case"right":q=-P;break;case"top-left":case"bottom-left":case"left":q=P}return[q,Y]}(_,f[0],f[1]):function(A,P){let N=0,q=0;P<0&&(P=0);const Y=P/Math.sqrt(2);switch(A){case"top-right":case"top-left":q=Y-7;break;case"bottom-right":case"bottom-left":q=7-Y;break;case"bottom":q=7-P;break;case"top":q=P-7}switch(A){case"top-right":case"bottom-right":N=-Y;break;case"top-left":case"bottom-left":N=Y;break;case"left":N=P;break;case"right":N=-P}return[N,q]}(_,f[0])}function gm(_){switch(_){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function K3(_,f,A,P,N,q,Y,oe,de,xe,Re){let Ve=q.textMaxSize.evaluate(f,{});Ve===void 0&&(Ve=Y);const it=_.layers[0].layout,ut=it.get("icon-offset").evaluate(f,{},Re),ht=Cy(A.horizontal),Gt=Y/24,Ut=_.tilePixelRatio*Gt,vi=_.tilePixelRatio*Ve/24,Fi=_.tilePixelRatio*oe,gi=_.tilePixelRatio*it.get("symbol-spacing"),Ti=it.get("text-padding")*_.tilePixelRatio,rn=function(dn,vr,ur,Jr=1){const ls=dn.get("icon-padding").evaluate(vr,{},ur),hs=ls&&ls.values;return[hs[0]*Jr,hs[1]*Jr,hs[2]*Jr,hs[3]*Jr]}(it,f,Re,_.tilePixelRatio),nn=it.get("text-max-angle")/180*Math.PI,Kn=it.get("text-rotation-alignment")!=="viewport"&&it.get("symbol-placement")!=="point",nr=it.get("icon-rotation-alignment")==="map"&&it.get("symbol-placement")!=="point",Hn=it.get("symbol-placement"),On=gi/2,An=it.get("icon-text-fit");let Gn;P&&An!=="none"&&(_.allowVerticalPlacement&&A.vertical&&(Gn=py(P,A.vertical,An,it.get("icon-text-fit-padding"),ut,Gt)),ht&&(P=py(P,ht,An,it.get("icon-text-fit-padding"),ut,Gt)));const Nn=(dn,vr)=>{vr.x<0||vr.x>=Mo||vr.y<0||vr.y>=Mo||function(ur,Jr,ls,hs,Qs,Iu,Oa,Ws,la,Fa,Xa,Ol,Xs,Ra,Ya,dl,Fl,Rl,_s,ua,to,ru,Ba,Za,Ju){const xc=ur.addToLineVertexArray(Jr,ls);let Ac,wh,Qu,Tu,Bl=0,xh=0,_d=0,Vy=0,Cm=-1,Em=-1;const Ah={};let qy=tn.exports(""),Im=0,Tm=0;if(Ws._unevaluatedLayout.getValue("text-radial-offset")===void 0?[Im,Tm]=Ws.layout.get("text-offset").evaluate(to,{},Za).map(zl=>zl*Ft):(Im=Ws.layout.get("text-radial-offset").evaluate(to,{},Za)*Ft,Tm=mm),ur.allowVerticalPlacement&&hs.vertical){const zl=Ws.layout.get("text-rotate").evaluate(to,{},Za)+90;Qu=new Ip(la,Jr,Fa,Xa,Ol,hs.vertical,Xs,Ra,Ya,zl),Oa&&(Tu=new Ip(la,Jr,Fa,Xa,Ol,Oa,Fl,Rl,Ya,zl))}if(Qs){const zl=Ws.layout.get("icon-rotate").evaluate(to,{}),Wc=Ws.layout.get("icon-text-fit")!=="none",vd=xy(Qs,zl,Ba,Wc),bd=Oa?xy(Oa,zl,Ba,Wc):void 0;wh=new Ip(la,Jr,Fa,Xa,Ol,Qs,Fl,Rl,!1,zl),Bl=4*vd.length;const Wy=ur.iconSizeData;let Ff=null;Wy.kind==="source"?(Ff=[bh*Ws.layout.get("icon-size").evaluate(to,{})],Ff[0]>Qh&&Z(`${ur.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)):Wy.kind==="composite"&&(Ff=[bh*ru.compositeIconSizes[0].evaluate(to,{},Za),bh*ru.compositeIconSizes[1].evaluate(to,{},Za)],(Ff[0]>Qh||Ff[1]>Qh)&&Z(`${ur.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)),ur.addSymbols(ur.icon,vd,Ff,ua,_s,to,r.WritingMode.none,Jr,xc.lineStartIndex,xc.lineLength,-1,Za),Cm=ur.icon.placedSymbolArray.length-1,bd&&(xh=4*bd.length,ur.addSymbols(ur.icon,bd,Ff,ua,_s,to,r.WritingMode.vertical,Jr,xc.lineStartIndex,xc.lineLength,-1,Za),Em=ur.icon.placedSymbolArray.length-1)}const Hy=Object.keys(hs.horizontal);for(const zl of Hy){const Wc=hs.horizontal[zl];if(!Ac){qy=tn.exports(Wc.text);const bd=Ws.layout.get("text-rotate").evaluate(to,{},Za);Ac=new Ip(la,Jr,Fa,Xa,Ol,Wc,Xs,Ra,Ya,bd)}const vd=Wc.positionedLines.length===1;if(_d+=Sy(ur,Jr,Wc,Iu,Ws,Ya,to,dl,xc,hs.vertical?r.WritingMode.horizontal:r.WritingMode.horizontalOnly,vd?Hy:[zl],Ah,Cm,ru,Za),vd)break}hs.vertical&&(Vy+=Sy(ur,Jr,hs.vertical,Iu,Ws,Ya,to,dl,xc,r.WritingMode.vertical,["vertical"],Ah,Em,ru,Za));const ux=Ac?Ac.boxStartIndex:ur.collisionBoxArray.length,cx=Ac?Ac.boxEndIndex:ur.collisionBoxArray.length,hx=Qu?Qu.boxStartIndex:ur.collisionBoxArray.length,fx=Qu?Qu.boxEndIndex:ur.collisionBoxArray.length,dx=wh?wh.boxStartIndex:ur.collisionBoxArray.length,px=wh?wh.boxEndIndex:ur.collisionBoxArray.length,mx=Tu?Tu.boxStartIndex:ur.collisionBoxArray.length,gx=Tu?Tu.boxEndIndex:ur.collisionBoxArray.length;let kc=-1;const Dp=(zl,Wc)=>zl&&zl.circleDiameter?Math.max(zl.circleDiameter,Wc):Wc;kc=Dp(Ac,kc),kc=Dp(Qu,kc),kc=Dp(wh,kc),kc=Dp(Tu,kc);const Gy=kc>-1?1:0;Gy&&(kc*=Ju/Ft),ur.glyphOffsetArray.length>=b0.MAX_GLYPHS&&Z("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),to.sortKey!==void 0&&ur.addToSortKeyRanges(ur.symbolInstances.length,to.sortKey),ur.symbolInstances.emplaceBack(Jr.x,Jr.y,Ah.right>=0?Ah.right:-1,Ah.center>=0?Ah.center:-1,Ah.left>=0?Ah.left:-1,Ah.vertical||-1,Cm,Em,qy,ux,cx,hx,fx,dx,px,mx,gx,Fa,_d,Vy,Bl,xh,Gy,0,Xs,Im,Tm,kc)}(_,vr,dn,A,P,N,Gn,_.layers[0],_.collisionBoxArray,f.index,f.sourceLayerIndex,_.index,Ut,[Ti,Ti,Ti,Ti],Kn,de,Fi,rn,nr,ut,f,q,xe,Re,Y)};if(Hn==="line")for(const dn of wy(f.geometry,0,0,Mo,Mo)){const vr=G3(dn,gi,nn,A.vertical||ht,P,24,vi,_.overscaling,Mo);for(const ur of vr){const Jr=ht;Jr&&J3(_,Jr.text,On,ur)||Nn(dn,ur)}}else if(Hn==="line-center"){for(const dn of f.geometry)if(dn.length>1){const vr=H3(dn,nn,A.vertical||ht,P,24,vi);vr&&Nn(dn,vr)}}else if(f.type==="Polygon")for(const dn of m0(f.geometry,0)){const vr=Y3(dn,16);Nn(dn[0],new Jh(vr.x,vr.y,0))}else if(f.type==="LineString")for(const dn of f.geometry)Nn(dn,new Jh(dn[0].x,dn[0].y,0));else if(f.type==="Point")for(const dn of f.geometry)for(const vr of dn)Nn([vr],new Jh(vr.x,vr.y,0))}const Qh=32640;function Sy(_,f,A,P,N,q,Y,oe,de,xe,Re,Ve,it,ut,ht){const Gt=function(Fi,gi,Ti,rn,nn,Kn,nr,Hn){const On=rn.layout.get("text-rotate").evaluate(Kn,{})*Math.PI/180,An=[];for(const Gn of gi.positionedLines)for(const Nn of Gn.positionedGlyphs){if(!Nn.rect)continue;const dn=Nn.rect||{};let vr=4,ur=!0,Jr=1,ls=0;const hs=(nn||Hn)&&Nn.vertical,Qs=Nn.metrics.advance*Nn.scale/2;if(Hn&&gi.verticalizable){const _s=(Nn.scale-1)*Ft,ua=(Ft-Nn.metrics.width*Nn.scale)/2;ls=Gn.lineOffset/2-(Nn.imageName?-ua:_s)}if(Nn.imageName){const _s=nr[Nn.imageName];ur=_s.sdf,Jr=_s.pixelRatio,vr=1/Jr}const Iu=nn?[Nn.x+Qs,Nn.y]:[0,0];let Oa=nn?[0,0]:[Nn.x+Qs+Ti[0],Nn.y+Ti[1]-ls],Ws=[0,0];hs&&(Ws=Oa,Oa=[0,0]);const la=(Nn.metrics.left-vr)*Nn.scale-Qs+Oa[0],Fa=(-Nn.metrics.top-vr)*Nn.scale+Oa[1],Xa=la+dn.w*Nn.scale/Jr,Ol=Fa+dn.h*Nn.scale/Jr,Xs=new nt(la,Fa),Ra=new nt(Xa,Fa),Ya=new nt(la,Ol),dl=new nt(Xa,Ol);if(hs){const _s=new nt(-Qs,Qs-xp),ua=-Math.PI/2,to=12-Qs,ru=new nt(22-to,-(Nn.imageName?to:0)),Ba=new nt(...Ws);Xs._rotateAround(ua,_s)._add(ru)._add(Ba),Ra._rotateAround(ua,_s)._add(ru)._add(Ba),Ya._rotateAround(ua,_s)._add(ru)._add(Ba),dl._rotateAround(ua,_s)._add(ru)._add(Ba)}if(On){const _s=Math.sin(On),ua=Math.cos(On),to=[ua,-_s,_s,ua];Xs._matMult(to),Ra._matMult(to),Ya._matMult(to),dl._matMult(to)}const Fl=new nt(0,0),Rl=new nt(0,0);An.push({tl:Xs,tr:Ra,bl:Ya,br:dl,tex:dn,writingMode:gi.writingMode,glyphOffset:Iu,sectionIndex:Nn.sectionIndex,isSDF:ur,pixelOffsetTL:Fl,pixelOffsetBR:Rl,minFontScaleX:0,minFontScaleY:0})}return An}(0,A,oe,N,q,Y,P,_.allowVerticalPlacement),Ut=_.textSizeData;let vi=null;Ut.kind==="source"?(vi=[bh*N.layout.get("text-size").evaluate(Y,{})],vi[0]>Qh&&Z(`${_.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)):Ut.kind==="composite"&&(vi=[bh*ut.compositeTextSizes[0].evaluate(Y,{},ht),bh*ut.compositeTextSizes[1].evaluate(Y,{},ht)],(vi[0]>Qh||vi[1]>Qh)&&Z(`${_.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)),_.addSymbols(_.text,Gt,vi,oe,q,Y,xe,f,de.lineStartIndex,de.lineLength,it,ht);for(const Fi of Re)Ve[Fi]=_.text.placedSymbolArray.length-1;return 4*Gt.length}function Cy(_){for(const f in _)return _[f];return null}function J3(_,f,A,P){const N=_.compareText;if(f in N){const q=N[f];for(let Y=q.length-1;Y>=0;Y--)if(P.dist(q[Y])<A)return!0}else N[f]=[];return N[f].push(P),!1}const Q3=Gc.VectorTileFeature.types,$3=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function Tp(_,f,A,P,N,q,Y,oe,de,xe,Re,Ve,it){const ut=oe?Math.min(Qh,Math.round(oe[0])):0,ht=oe?Math.min(Qh,Math.round(oe[1])):0;_.emplaceBack(f,A,Math.round(32*P),Math.round(32*N),q,Y,(ut<<1)+(de?1:0),ht,16*xe,16*Re,256*Ve,256*it)}function ym(_,f,A){_.emplaceBack(f.x,f.y,A),_.emplaceBack(f.x,f.y,A),_.emplaceBack(f.x,f.y,A),_.emplaceBack(f.x,f.y,A)}function ex(_){for(const f of _.sections)if(Lr(f.text))return!0;return!1}class _m{constructor(f){this.layoutVertexArray=new at,this.indexArray=new wi,this.programConfigurations=f,this.segments=new qt,this.dynamicLayoutVertexArray=new pt,this.opacityVertexArray=new Ct,this.placedSymbolArray=new un}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(f,A,P,N){this.isEmpty()||(P&&(this.layoutVertexBuffer=f.createVertexBuffer(this.layoutVertexArray,te.members),this.indexBuffer=f.createIndexBuffer(this.indexArray,A),this.dynamicLayoutVertexBuffer=f.createVertexBuffer(this.dynamicLayoutVertexArray,ce.members,!0),this.opacityVertexBuffer=f.createVertexBuffer(this.opacityVertexArray,$3,!0),this.opacityVertexBuffer.itemSize=1),(P||N)&&this.programConfigurations.upload(f))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}Dn("SymbolBuffers",_m);class vm{constructor(f,A,P){this.layoutVertexArray=new f,this.layoutAttributes=A,this.indexArray=new P,this.segments=new qt,this.collisionVertexArray=new ki}upload(f){this.layoutVertexBuffer=f.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=f.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=f.createVertexBuffer(this.collisionVertexArray,Ae.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}Dn("CollisionBuffers",vm);class b0{constructor(f){this.collisionBoxArray=f.collisionBoxArray,this.zoom=f.zoom,this.overscaling=f.overscaling,this.layers=f.layers,this.layerIds=this.layers.map(Y=>Y.id),this.index=f.index,this.pixelRatio=f.pixelRatio,this.sourceLayerIndex=f.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=eu([]),this.placementViewportMatrix=eu([]);const A=this.layers[0]._unevaluatedLayout._values;this.textSizeData=my(this.zoom,A["text-size"]),this.iconSizeData=my(this.zoom,A["icon-size"]);const P=this.layers[0].layout,N=P.get("symbol-sort-key"),q=P.get("symbol-z-order");this.canOverlap=wm(P,"text-overlap","text-allow-overlap")!=="never"||wm(P,"icon-overlap","icon-allow-overlap")!=="never"||P.get("text-ignore-placement")||P.get("icon-ignore-placement"),this.sortFeaturesByKey=q!=="viewport-y"&&!N.isConstant(),this.sortFeaturesByY=(q==="viewport-y"||q==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,P.get("symbol-placement")==="point"&&(this.writingModes=P.get("text-writing-mode").map(Y=>r.WritingMode[Y])),this.stateDependentLayerIds=this.layers.filter(Y=>Y.isStateDependent()).map(Y=>Y.id),this.sourceID=f.sourceID}createArrays(){this.text=new _m(new zo(this.layers,this.zoom,f=>/^text/.test(f))),this.icon=new _m(new zo(this.layers,this.zoom,f=>/^icon/.test(f))),this.glyphOffsetArray=new vn,this.lineVertexArray=new Wn,this.symbolInstances=new zn}calculateGlyphDependencies(f,A,P,N,q){for(let Y=0;Y<f.length;Y++)if(A[f.charCodeAt(Y)]=!0,(P||N)&&q){const oe=Pt[f.charAt(Y)];oe&&(A[oe.charCodeAt(0)]=!0)}}populate(f,A,P){const N=this.layers[0],q=N.layout,Y=q.get("text-font"),oe=q.get("text-field"),de=q.get("icon-image"),xe=(oe.value.kind!=="constant"||oe.value.value instanceof Ht&&!oe.value.value.isEmpty()||oe.value.value.toString().length>0)&&(Y.value.kind!=="constant"||Y.value.value.length>0),Re=de.value.kind!=="constant"||!!de.value.value||Object.keys(de.parameters).length>0,Ve=q.get("symbol-sort-key");if(this.features=[],!xe&&!Re)return;const it=A.iconDependencies,ut=A.glyphDependencies,ht=A.availableImages,Gt=new Bo(this.zoom);for(const{feature:Ut,id:vi,index:Fi,sourceLayerIndex:gi}of f){const Ti=N._featureFilter.needGeometry,rn=cl(Ut,Ti);if(!N._featureFilter.filter(Gt,rn,P))continue;let nn,Kn;if(Ti||(rn.geometry=Ha(Ut)),xe){const Hn=N.getValueAndResolveTokens("text-field",rn,P,ht),On=Ht.factory(Hn);ex(On)&&(this.hasRTLText=!0),(!this.hasRTLText||Kl()==="unavailable"||this.hasRTLText&&ya.isParsed())&&(nn=mt(On,N,rn))}if(Re){const Hn=N.getValueAndResolveTokens("icon-image",rn,P,ht);Kn=Hn instanceof ei?Hn:ei.fromString(Hn)}if(!nn&&!Kn)continue;const nr=this.sortFeaturesByKey?Ve.evaluate(rn,{},P):void 0;if(this.features.push({id:vi,text:nn,icon:Kn,index:Fi,sourceLayerIndex:gi,geometry:rn.geometry,properties:Ut.properties,type:Q3[Ut.type],sortKey:nr}),Kn&&(it[Kn.name]=!0),nn){const Hn=Y.evaluate(rn,{},P).join(","),On=q.get("text-rotation-alignment")!=="viewport"&&q.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(r.WritingMode.vertical)>=0;for(const An of nn.sections)if(An.image)it[An.image.name]=!0;else{const Gn=Da(nn.toString()),Nn=An.fontStack||Hn,dn=ut[Nn]=ut[Nn]||{};this.calculateGlyphDependencies(An.text,dn,On,this.allowVerticalPlacement,Gn)}}}q.get("symbol-placement")==="line"&&(this.features=function(Ut){const vi={},Fi={},gi=[];let Ti=0;function rn(Hn){gi.push(Ut[Hn]),Ti++}function nn(Hn,On,An){const Gn=Fi[Hn];return delete Fi[Hn],Fi[On]=Gn,gi[Gn].geometry[0].pop(),gi[Gn].geometry[0]=gi[Gn].geometry[0].concat(An[0]),Gn}function Kn(Hn,On,An){const Gn=vi[On];return delete vi[On],vi[Hn]=Gn,gi[Gn].geometry[0].shift(),gi[Gn].geometry[0]=An[0].concat(gi[Gn].geometry[0]),Gn}function nr(Hn,On,An){const Gn=An?On[0][On[0].length-1]:On[0][0];return`${Hn}:${Gn.x}:${Gn.y}`}for(let Hn=0;Hn<Ut.length;Hn++){const On=Ut[Hn],An=On.geometry,Gn=On.text?On.text.toString():null;if(!Gn){rn(Hn);continue}const Nn=nr(Gn,An),dn=nr(Gn,An,!0);if(Nn in Fi&&dn in vi&&Fi[Nn]!==vi[dn]){const vr=Kn(Nn,dn,An),ur=nn(Nn,dn,gi[vr].geometry);delete vi[Nn],delete Fi[dn],Fi[nr(Gn,gi[ur].geometry,!0)]=ur,gi[vr].geometry=null}else Nn in Fi?nn(Nn,dn,An):dn in vi?Kn(Nn,dn,An):(rn(Hn),vi[Nn]=Ti-1,Fi[dn]=Ti-1)}return gi.filter(Hn=>Hn.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((Ut,vi)=>Ut.sortKey-vi.sortKey)}update(f,A,P){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(f,A,this.layers,P),this.icon.programConfigurations.updatePaintArrays(f,A,this.layers,P))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(f){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(f),this.iconCollisionBox.upload(f)),this.text.upload(f,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(f,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(f,A){const P=this.lineVertexArray.length;if(f.segment!==void 0){let N=f.dist(A[f.segment+1]),q=f.dist(A[f.segment]);const Y={};for(let oe=f.segment+1;oe<A.length;oe++)Y[oe]={x:A[oe].x,y:A[oe].y,tileUnitDistanceFromAnchor:N},oe<A.length-1&&(N+=A[oe+1].dist(A[oe]));for(let oe=f.segment||0;oe>=0;oe--)Y[oe]={x:A[oe].x,y:A[oe].y,tileUnitDistanceFromAnchor:q},oe>0&&(q+=A[oe-1].dist(A[oe]));for(let oe=0;oe<A.length;oe++){const de=Y[oe];this.lineVertexArray.emplaceBack(de.x,de.y,de.tileUnitDistanceFromAnchor)}}return{lineStartIndex:P,lineLength:this.lineVertexArray.length-P}}addSymbols(f,A,P,N,q,Y,oe,de,xe,Re,Ve,it){const ut=f.indexArray,ht=f.layoutVertexArray,Gt=f.segments.prepareSegment(4*A.length,ht,ut,this.canOverlap?Y.sortKey:void 0),Ut=this.glyphOffsetArray.length,vi=Gt.vertexLength,Fi=this.allowVerticalPlacement&&oe===r.WritingMode.vertical?Math.PI/2:0,gi=Y.text&&Y.text.sections;for(let Ti=0;Ti<A.length;Ti++){const{tl:rn,tr:nn,bl:Kn,br:nr,tex:Hn,pixelOffsetTL:On,pixelOffsetBR:An,minFontScaleX:Gn,minFontScaleY:Nn,glyphOffset:dn,isSDF:vr,sectionIndex:ur}=A[Ti],Jr=Gt.vertexLength,ls=dn[1];Tp(ht,de.x,de.y,rn.x,ls+rn.y,Hn.x,Hn.y,P,vr,On.x,On.y,Gn,Nn),Tp(ht,de.x,de.y,nn.x,ls+nn.y,Hn.x+Hn.w,Hn.y,P,vr,An.x,On.y,Gn,Nn),Tp(ht,de.x,de.y,Kn.x,ls+Kn.y,Hn.x,Hn.y+Hn.h,P,vr,On.x,An.y,Gn,Nn),Tp(ht,de.x,de.y,nr.x,ls+nr.y,Hn.x+Hn.w,Hn.y+Hn.h,P,vr,An.x,An.y,Gn,Nn),ym(f.dynamicLayoutVertexArray,de,Fi),ut.emplaceBack(Jr,Jr+1,Jr+2),ut.emplaceBack(Jr+1,Jr+2,Jr+3),Gt.vertexLength+=4,Gt.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(dn[0]),Ti!==A.length-1&&ur===A[Ti+1].sectionIndex||f.programConfigurations.populatePaintArrays(ht.length,Y,Y.index,{},it,gi&&gi[ur])}f.placedSymbolArray.emplaceBack(de.x,de.y,Ut,this.glyphOffsetArray.length-Ut,vi,xe,Re,de.segment,P?P[0]:0,P?P[1]:0,N[0],N[1],oe,0,!1,0,Ve)}_addCollisionDebugVertex(f,A,P,N,q,Y){return A.emplaceBack(0,0),f.emplaceBack(P.x,P.y,N,q,Math.round(Y.x),Math.round(Y.y))}addCollisionDebugVertices(f,A,P,N,q,Y,oe){const de=q.segments.prepareSegment(4,q.layoutVertexArray,q.indexArray),xe=de.vertexLength,Re=q.layoutVertexArray,Ve=q.collisionVertexArray,it=oe.anchorX,ut=oe.anchorY;this._addCollisionDebugVertex(Re,Ve,Y,it,ut,new nt(f,A)),this._addCollisionDebugVertex(Re,Ve,Y,it,ut,new nt(P,A)),this._addCollisionDebugVertex(Re,Ve,Y,it,ut,new nt(P,N)),this._addCollisionDebugVertex(Re,Ve,Y,it,ut,new nt(f,N)),de.vertexLength+=4;const ht=q.indexArray;ht.emplaceBack(xe,xe+1),ht.emplaceBack(xe+1,xe+2),ht.emplaceBack(xe+2,xe+3),ht.emplaceBack(xe+3,xe),de.primitiveLength+=4}addDebugCollisionBoxes(f,A,P,N){for(let q=f;q<A;q++){const Y=this.collisionBoxArray.get(q);this.addCollisionDebugVertices(Y.x1,Y.y1,Y.x2,Y.y2,N?this.textCollisionBox:this.iconCollisionBox,Y.anchorPoint,P)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new vm(ai,Ne.members,pi),this.iconCollisionBox=new vm(ai,Ne.members,pi);for(let f=0;f<this.symbolInstances.length;f++){const A=this.symbolInstances.get(f);this.addDebugCollisionBoxes(A.textBoxStartIndex,A.textBoxEndIndex,A,!0),this.addDebugCollisionBoxes(A.verticalTextBoxStartIndex,A.verticalTextBoxEndIndex,A,!0),this.addDebugCollisionBoxes(A.iconBoxStartIndex,A.iconBoxEndIndex,A,!1),this.addDebugCollisionBoxes(A.verticalIconBoxStartIndex,A.verticalIconBoxEndIndex,A,!1)}}_deserializeCollisionBoxesForSymbol(f,A,P,N,q,Y,oe,de,xe){const Re={};for(let Ve=A;Ve<P;Ve++){const it=f.get(Ve);Re.textBox={x1:it.x1,y1:it.y1,x2:it.x2,y2:it.y2,anchorPointX:it.anchorPointX,anchorPointY:it.anchorPointY},Re.textFeatureIndex=it.featureIndex;break}for(let Ve=N;Ve<q;Ve++){const it=f.get(Ve);Re.verticalTextBox={x1:it.x1,y1:it.y1,x2:it.x2,y2:it.y2,anchorPointX:it.anchorPointX,anchorPointY:it.anchorPointY},Re.verticalTextFeatureIndex=it.featureIndex;break}for(let Ve=Y;Ve<oe;Ve++){const it=f.get(Ve);Re.iconBox={x1:it.x1,y1:it.y1,x2:it.x2,y2:it.y2,anchorPointX:it.anchorPointX,anchorPointY:it.anchorPointY},Re.iconFeatureIndex=it.featureIndex;break}for(let Ve=de;Ve<xe;Ve++){const it=f.get(Ve);Re.verticalIconBox={x1:it.x1,y1:it.y1,x2:it.x2,y2:it.y2,anchorPointX:it.anchorPointX,anchorPointY:it.anchorPointY},Re.verticalIconFeatureIndex=it.featureIndex;break}return Re}deserializeCollisionBoxes(f){this.collisionArrays=[];for(let A=0;A<this.symbolInstances.length;A++){const P=this.symbolInstances.get(A);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(f,P.textBoxStartIndex,P.textBoxEndIndex,P.verticalTextBoxStartIndex,P.verticalTextBoxEndIndex,P.iconBoxStartIndex,P.iconBoxEndIndex,P.verticalIconBoxStartIndex,P.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(f,A){const P=f.placedSymbolArray.get(A),N=P.vertexStartIndex+4*P.numGlyphs;for(let q=P.vertexStartIndex;q<N;q+=4)f.indexArray.emplaceBack(q,q+1,q+2),f.indexArray.emplaceBack(q+1,q+2,q+3)}getSortedSymbolIndexes(f){if(this.sortedAngle===f&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const A=Math.sin(f),P=Math.cos(f),N=[],q=[],Y=[];for(let oe=0;oe<this.symbolInstances.length;++oe){Y.push(oe);const de=this.symbolInstances.get(oe);N.push(0|Math.round(A*de.anchorX+P*de.anchorY)),q.push(de.featureIndex)}return Y.sort((oe,de)=>N[oe]-N[de]||q[de]-q[oe]),Y}addToSortKeyRanges(f,A){const P=this.sortKeyRanges[this.sortKeyRanges.length-1];P&&P.sortKey===A?P.symbolInstanceEnd=f+1:this.sortKeyRanges.push({sortKey:A,symbolInstanceStart:f,symbolInstanceEnd:f+1})}sortFeatures(f){if(this.sortFeaturesByY&&this.sortedAngle!==f&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(f),this.sortedAngle=f,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const A of this.symbolInstanceIndexes){const P=this.symbolInstances.get(A);this.featureSortOrder.push(P.featureIndex),[P.rightJustifiedTextSymbolIndex,P.centerJustifiedTextSymbolIndex,P.leftJustifiedTextSymbolIndex].forEach((N,q,Y)=>{N>=0&&Y.indexOf(N)===q&&this.addIndicesForPlacedSymbol(this.text,N)}),P.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,P.verticalPlacedTextSymbolIndex),P.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,P.placedIconSymbolIndex),P.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,P.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}Dn("SymbolBucket",b0,{omit:["layers","collisionBoxArray","features","compareText"]}),b0.MAX_GLYPHS=65535,b0.addDynamicAttributes=ym;const tx=new jo({"symbol-placement":new tr(Q.layout_symbol["symbol-placement"]),"symbol-spacing":new tr(Q.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new tr(Q.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new yr(Q.layout_symbol["symbol-sort-key"]),"symbol-z-order":new tr(Q.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new tr(Q.layout_symbol["icon-allow-overlap"]),"icon-overlap":new tr(Q.layout_symbol["icon-overlap"]),"icon-ignore-placement":new tr(Q.layout_symbol["icon-ignore-placement"]),"icon-optional":new tr(Q.layout_symbol["icon-optional"]),"icon-rotation-alignment":new tr(Q.layout_symbol["icon-rotation-alignment"]),"icon-size":new yr(Q.layout_symbol["icon-size"]),"icon-text-fit":new tr(Q.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new tr(Q.layout_symbol["icon-text-fit-padding"]),"icon-image":new yr(Q.layout_symbol["icon-image"]),"icon-rotate":new yr(Q.layout_symbol["icon-rotate"]),"icon-padding":new yr(Q.layout_symbol["icon-padding"]),"icon-keep-upright":new tr(Q.layout_symbol["icon-keep-upright"]),"icon-offset":new yr(Q.layout_symbol["icon-offset"]),"icon-anchor":new yr(Q.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new tr(Q.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new tr(Q.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new tr(Q.layout_symbol["text-rotation-alignment"]),"text-field":new yr(Q.layout_symbol["text-field"]),"text-font":new yr(Q.layout_symbol["text-font"]),"text-size":new yr(Q.layout_symbol["text-size"]),"text-max-width":new yr(Q.layout_symbol["text-max-width"]),"text-line-height":new tr(Q.layout_symbol["text-line-height"]),"text-letter-spacing":new yr(Q.layout_symbol["text-letter-spacing"]),"text-justify":new yr(Q.layout_symbol["text-justify"]),"text-radial-offset":new yr(Q.layout_symbol["text-radial-offset"]),"text-variable-anchor":new tr(Q.layout_symbol["text-variable-anchor"]),"text-anchor":new yr(Q.layout_symbol["text-anchor"]),"text-max-angle":new tr(Q.layout_symbol["text-max-angle"]),"text-writing-mode":new tr(Q.layout_symbol["text-writing-mode"]),"text-rotate":new yr(Q.layout_symbol["text-rotate"]),"text-padding":new tr(Q.layout_symbol["text-padding"]),"text-keep-upright":new tr(Q.layout_symbol["text-keep-upright"]),"text-transform":new yr(Q.layout_symbol["text-transform"]),"text-offset":new yr(Q.layout_symbol["text-offset"]),"text-allow-overlap":new tr(Q.layout_symbol["text-allow-overlap"]),"text-overlap":new tr(Q.layout_symbol["text-overlap"]),"text-ignore-placement":new tr(Q.layout_symbol["text-ignore-placement"]),"text-optional":new tr(Q.layout_symbol["text-optional"])});var bm={paint:new jo({"icon-opacity":new yr(Q.paint_symbol["icon-opacity"]),"icon-color":new yr(Q.paint_symbol["icon-color"]),"icon-halo-color":new yr(Q.paint_symbol["icon-halo-color"]),"icon-halo-width":new yr(Q.paint_symbol["icon-halo-width"]),"icon-halo-blur":new yr(Q.paint_symbol["icon-halo-blur"]),"icon-translate":new tr(Q.paint_symbol["icon-translate"]),"icon-translate-anchor":new tr(Q.paint_symbol["icon-translate-anchor"]),"text-opacity":new yr(Q.paint_symbol["text-opacity"]),"text-color":new yr(Q.paint_symbol["text-color"],{runtimeType:Yn,getOverride:_=>_.textColor,hasOverride:_=>!!_.textColor}),"text-halo-color":new yr(Q.paint_symbol["text-halo-color"]),"text-halo-width":new yr(Q.paint_symbol["text-halo-width"]),"text-halo-blur":new yr(Q.paint_symbol["text-halo-blur"]),"text-translate":new tr(Q.paint_symbol["text-translate"]),"text-translate-anchor":new tr(Q.paint_symbol["text-translate-anchor"])}),layout:tx};class Ey{constructor(f){if(f.property.overrides===void 0)throw new Error("overrides must be provided to instantiate FormatSectionOverride class");this.type=f.property.overrides?f.property.overrides.runtimeType:fn,this.defaultValue=f}evaluate(f){if(f.formattedSection){const A=this.defaultValue.property.overrides;if(A&&A.hasOverride(f.formattedSection))return A.getOverride(f.formattedSection)}return f.feature&&f.featureState?this.defaultValue.evaluate(f.feature,f.featureState):this.defaultValue.property.specification.default}eachChild(f){this.defaultValue.isConstant()||f(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}Dn("FormatSectionOverride",Ey,{omit:["defaultValue"]});class Lp extends ul{constructor(f){super(f,bm)}recalculate(f,A){if(super.recalculate(f,A),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")==="map"?"map":"viewport"),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){const P=this.layout.get("text-writing-mode");if(P){const N=[];for(const q of P)N.indexOf(q)<0&&N.push(q);this.layout._values["text-writing-mode"]=N}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(f,A,P,N){const q=this.layout.get(f).evaluate(A,{},P,N),Y=this._unevaluatedLayout._values[f];return Y.isDataDriven()||Fo(Y.value)||!q?q:function(oe,de){return de.replace(/{([^{}]+)}/g,(xe,Re)=>Re in oe?String(oe[Re]):"")}(A.properties,q)}createBucket(f){return new b0(f)}queryRadius(){return 0}queryIntersectsFeature(){throw new Error("Should take a different path in FeatureIndex")}_setPaintOverrides(){for(const f of bm.paint.overridableProperties){if(!Lp.hasPaintOverride(this.layout,f))continue;const A=this.paint.get(f),P=new Ey(A),N=new $r(P,A.property.specification);let q=null;q=A.value.kind==="constant"||A.value.kind==="source"?new Ho("source",N):new Es("composite",N,A.value.zoomStops),this.paint._values[f]=new ll(A.property,q,A.parameters)}}_handleOverridablePaintPropertyUpdate(f,A,P){return!(!this.layout||A.isDataDriven()||P.isDataDriven())&&Lp.hasPaintOverride(this.layout,f)}static hasPaintOverride(f,A){const P=f.get("text-field"),N=bm.paint.properties[A];let q=!1;const Y=oe=>{for(const de of oe)if(N.overrides&&N.overrides.hasOverride(de))return void(q=!0)};if(P.value.kind==="constant"&&P.value.value instanceof Ht)Y(P.value.value.sections);else if(P.value.kind==="source"){const oe=xe=>{q||(xe instanceof kn&&Ii(xe.value)===mn?Y(xe.value.sections):xe instanceof mu?Y(xe.sections):xe.eachChild(oe))},de=P.value;de._styleExpression&&oe(de._styleExpression.expression)}return q}}function wm(_,f,A){let P="never";const N=_.get(f);return N?P=N:_.get(A)&&(P="always"),P}var ix={paint:new jo({"background-color":new tr(Q.paint_background["background-color"]),"background-pattern":new hc(Q.paint_background["background-pattern"]),"background-opacity":new tr(Q.paint_background["background-opacity"])})},nx={paint:new jo({"raster-opacity":new tr(Q.paint_raster["raster-opacity"]),"raster-hue-rotate":new tr(Q.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new tr(Q.paint_raster["raster-brightness-min"]),"raster-brightness-max":new tr(Q.paint_raster["raster-brightness-max"]),"raster-saturation":new tr(Q.paint_raster["raster-saturation"]),"raster-contrast":new tr(Q.paint_raster["raster-contrast"]),"raster-resampling":new tr(Q.paint_raster["raster-resampling"]),"raster-fade-duration":new tr(Q.paint_raster["raster-fade-duration"])})};class rx extends ul{constructor(f){super(f,{}),this.onAdd=A=>{this.implementation.onAdd&&this.implementation.onAdd(A,A.painter.context.gl)},this.onRemove=A=>{this.implementation.onRemove&&this.implementation.onRemove(A,A.painter.context.gl)},this.implementation=f}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){throw new Error("Custom layers cannot be serialized")}}const ox={circle:class extends ul{constructor(_){super(_,Vc)}createBucket(_){return new as(_)}queryRadius(_){const f=_;return jc("circle-radius",this,f)+jc("circle-stroke-width",this,f)+gc(this.paint.get("circle-translate"))}queryIntersectsFeature(_,f,A,P,N,q,Y,oe){const de=Uc(_,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),q.angle,Y),xe=this.paint.get("circle-radius").evaluate(f,A)+this.paint.get("circle-stroke-width").evaluate(f,A),Re=this.paint.get("circle-pitch-alignment")==="map",Ve=Re?de:function(ut,ht){return ut.map(Gt=>gh(Gt,ht))}(de,oe),it=Re?xe*Y:xe;for(const ut of P)for(const ht of ut){const Gt=Re?ht:gh(ht,oe);let Ut=it;const vi=qc([],[ht.x,ht.y,0,1],oe);if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?Ut*=vi[3]/q.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(Ut*=q.cameraToCenterDistance/vi[3]),s0(Ve,Gt,Ut))return!0}return!1}},heatmap:class extends ul{constructor(_){super(_,yh),this._updateColorRamp()}createBucket(_){return new Hh(_)}_handleSpecialPaintPropertyUpdate(_){_==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=iu({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)}queryRadius(){return 0}queryIntersectsFeature(){return!1}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}},hillshade:class extends ul{constructor(_){super(_,c0)}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}},fill:class extends ul{constructor(_){super(_,pp)}recalculate(_,f){super.recalculate(_,f);const A=this.paint._values["fill-outline-color"];A.value.kind==="constant"&&A.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(_){return new dd(_)}queryRadius(){return gc(this.paint.get("fill-translate"))}queryIntersectsFeature(_,f,A,P,N,q,Y){return wf(Uc(_,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),q.angle,Y),P)}isTileClipped(){return!0}},"fill-extrusion":class extends ul{constructor(_){super(_,cm)}createBucket(_){return new Mf(_)}queryRadius(){return gc(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature(_,f,A,P,N,q,Y,oe){const de=Uc(_,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),q.angle,Y),xe=this.paint.get("fill-extrusion-height").evaluate(f,A),Re=this.paint.get("fill-extrusion-base").evaluate(f,A),Ve=function(ut,ht,Gt,Ut){const vi=[];for(const Fi of ut){const gi=[Fi.x,Fi.y,0,1];qc(gi,gi,ht),vi.push(new nt(gi[0]/gi[3],gi[1]/gi[3]))}return vi}(de,oe),it=function(ut,ht,Gt,Ut){const vi=[],Fi=[],gi=Ut[8]*ht,Ti=Ut[9]*ht,rn=Ut[10]*ht,nn=Ut[11]*ht,Kn=Ut[8]*Gt,nr=Ut[9]*Gt,Hn=Ut[10]*Gt,On=Ut[11]*Gt;for(const An of ut){const Gn=[],Nn=[];for(const dn of An){const vr=dn.x,ur=dn.y,Jr=Ut[0]*vr+Ut[4]*ur+Ut[12],ls=Ut[1]*vr+Ut[5]*ur+Ut[13],hs=Ut[2]*vr+Ut[6]*ur+Ut[14],Qs=Ut[3]*vr+Ut[7]*ur+Ut[15],Iu=hs+rn,Oa=Qs+nn,Ws=Jr+Kn,la=ls+nr,Fa=hs+Hn,Xa=Qs+On,Ol=new nt((Jr+gi)/Oa,(ls+Ti)/Oa);Ol.z=Iu/Oa,Gn.push(Ol);const Xs=new nt(Ws/Xa,la/Xa);Xs.z=Fa/Xa,Nn.push(Xs)}vi.push(Gn),Fi.push(Nn)}return[vi,Fi]}(P,Re,xe,oe);return function(ut,ht,Gt){let Ut=1/0;wf(Gt,ht)&&(Ut=vp(Gt,ht[0]));for(let vi=0;vi<ht.length;vi++){const Fi=ht[vi],gi=ut[vi];for(let Ti=0;Ti<Fi.length-1;Ti++){const rn=Fi[Ti],nn=[rn,Fi[Ti+1],gi[Ti+1],gi[Ti],rn];Uh(Gt,nn)&&(Ut=Math.min(Ut,vp(Gt,nn)))}}return Ut!==1/0&&Ut}(it[0],it[1],Ve)}},line:class extends ul{constructor(_){super(_,R),this.gradientVersion=0}_handleSpecialPaintPropertyUpdate(_){_==="line-gradient"&&(this.stepInterpolant=this._transitionablePaint._values["line-gradient"].value.expression._styleExpression.expression instanceof fa,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER)}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(_,f){super.recalculate(_,f),this.paint._values["line-floorwidth"]=G.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,_)}createBucket(_){return new E(_)}queryRadius(_){const f=_,A=H(jc("line-width",this,f),jc("line-gap-width",this,f)),P=jc("line-offset",this,f);return A/2+Math.abs(P)+gc(this.paint.get("line-translate"))}queryIntersectsFeature(_,f,A,P,N,q,Y){const oe=Uc(_,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),q.angle,Y),de=Y/2*H(this.paint.get("line-width").evaluate(f,A),this.paint.get("line-gap-width").evaluate(f,A)),xe=this.paint.get("line-offset").evaluate(f,A);return xe&&(P=function(Re,Ve){const it=[];for(let ut=0;ut<Re.length;ut++){const ht=Re[ut],Gt=[];for(let Ut=0;Ut<ht.length;Ut++){const vi=ht[Ut-1],Fi=ht[Ut],gi=ht[Ut+1],Ti=Ut===0?new nt(0,0):Fi.sub(vi)._unit()._perp(),rn=Ut===ht.length-1?new nt(0,0):gi.sub(Fi)._unit()._perp(),nn=Ti._add(rn)._unit(),Kn=nn.x*rn.x+nn.y*rn.y;Kn!==0&&nn._mult(1/Kn),Gt.push(nn._mult(Ve)._add(Fi))}it.push(Gt)}return it}(P,xe*Y)),function(Re,Ve,it){for(let ut=0;ut<Ve.length;ut++){const ht=Ve[ut];if(Re.length>=3){for(let Gt=0;Gt<ht.length;Gt++)if(mc(Re,ht[Gt]))return!0}if(fc(Re,ht,it))return!0}return!1}(oe,P,de)}isTileClipped(){return!0}},symbol:Lp,background:class extends ul{constructor(_){super(_,ix)}},raster:class extends ul{constructor(_){super(_,nx)}}};class sx{constructor(f){this._callback=f,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._callback()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._callback()},0))}remove(){delete this._channel,this._callback=()=>{}}}const Iy=63710088e-1;class Ms{constructor(f,A){if(isNaN(f)||isNaN(A))throw new Error(`Invalid LngLat object: (${f}, ${A})`);if(this.lng=+f,this.lat=+A,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new Ms(x(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(f){const A=Math.PI/180,P=this.lat*A,N=f.lat*A,q=Math.sin(P)*Math.sin(N)+Math.cos(P)*Math.cos(N)*Math.cos((f.lng-this.lng)*A);return Iy*Math.acos(Math.min(q,1))}toBounds(f=0){const A=360*f/40075017,P=A/Math.cos(Math.PI/180*this.lat);return new Of(new Ms(this.lng-P,this.lat-A),new Ms(this.lng+P,this.lat+A))}static convert(f){if(f instanceof Ms)return f;if(Array.isArray(f)&&(f.length===2||f.length===3))return new Ms(Number(f[0]),Number(f[1]));if(!Array.isArray(f)&&typeof f=="object"&&f!==null)return new Ms(Number("lng"in f?f.lng:f.lon),Number(f.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}class Of{constructor(f,A){f&&(A?this.setSouthWest(f).setNorthEast(A):f.length===4?this.setSouthWest([f[0],f[1]]).setNorthEast([f[2],f[3]]):this.setSouthWest(f[0]).setNorthEast(f[1]))}setNorthEast(f){return this._ne=f instanceof Ms?new Ms(f.lng,f.lat):Ms.convert(f),this}setSouthWest(f){return this._sw=f instanceof Ms?new Ms(f.lng,f.lat):Ms.convert(f),this}extend(f){const A=this._sw,P=this._ne;let N,q;if(f instanceof Ms)N=f,q=f;else{if(!(f instanceof Of))return Array.isArray(f)?f.length===4||f.every(Array.isArray)?this.extend(Of.convert(f)):this.extend(Ms.convert(f)):this;if(N=f._sw,q=f._ne,!N||!q)return this}return A||P?(A.lng=Math.min(N.lng,A.lng),A.lat=Math.min(N.lat,A.lat),P.lng=Math.max(q.lng,P.lng),P.lat=Math.max(q.lat,P.lat)):(this._sw=new Ms(N.lng,N.lat),this._ne=new Ms(q.lng,q.lat)),this}getCenter(){return new Ms((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new Ms(this.getWest(),this.getNorth())}getSouthEast(){return new Ms(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(f){const{lng:A,lat:P}=Ms.convert(f);let N=this._sw.lng<=A&&A<=this._ne.lng;return this._sw.lng>this._ne.lng&&(N=this._sw.lng>=A&&A>=this._ne.lng),this._sw.lat<=P&&P<=this._ne.lat&&N}static convert(f){return f instanceof Of?f:f&&new Of(f)}}const Ty=2*Math.PI*Iy;function Ly(_){return Ty*Math.cos(_*Math.PI/180)}function Py(_){return(180+_)/360}function My(_){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+_*Math.PI/360)))/360}function Dy(_,f){return _/Ly(f)}function xm(_){return 360/Math.PI*Math.atan(Math.exp((180-360*_)*Math.PI/180))-90}class Pp{constructor(f,A,P=0){this.x=+f,this.y=+A,this.z=+P}static fromLngLat(f,A=0){const P=Ms.convert(f);return new Pp(Py(P.lng),My(P.lat),Dy(A,P.lat))}toLngLat(){return new Ms(360*this.x-180,xm(this.y))}toAltitude(){return this.z*Ly(xm(this.y))}meterInMercatorCoordinateUnits(){return 1/Ty*(f=xm(this.y),1/Math.cos(f*Math.PI/180));var f}}function Oy(_,f,A){var P=2*Math.PI*6378137/256/Math.pow(2,A);return[_*P-2*Math.PI*6378137/2,f*P-2*Math.PI*6378137/2]}class Am{constructor(f,A,P){if(f<0||f>25||P<0||P>=Math.pow(2,f)||A<0||A>=Math.pow(2,f))throw new Error(`x=${A}, y=${P}, z=${f} outside of bounds. 0<=x<${Math.pow(2,f)}, 0<=y<${Math.pow(2,f)} 0<=z<=25 `);this.z=f,this.x=A,this.y=P,this.key=gd(0,f,f,A,P)}equals(f){return this.z===f.z&&this.x===f.x&&this.y===f.y}url(f,A,P){const N=(Y=this.y,oe=this.z,de=Oy(256*(q=this.x),256*(Y=Math.pow(2,oe)-Y-1),oe),xe=Oy(256*(q+1),256*(Y+1),oe),de[0]+","+de[1]+","+xe[0]+","+xe[1]);var q,Y,oe,de,xe;const Re=function(Ve,it,ut){let ht,Gt="";for(let Ut=Ve;Ut>0;Ut--)ht=1<<Ut-1,Gt+=(it&ht?1:0)+(ut&ht?2:0);return Gt}(this.z,this.x,this.y);return f[(this.x+this.y)%f.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(P==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,A>1?"@2x":"").replace(/{quadkey}/g,Re).replace(/{bbox-epsg-3857}/g,N)}isChildOf(f){const A=this.z-f.z;return A>0&&f.x===this.x>>A&&f.y===this.y>>A}getTilePoint(f){const A=Math.pow(2,this.z);return new nt((f.x*A-this.x)*Mo,(f.y*A-this.y)*Mo)}toString(){return`${this.z}/${this.x}/${this.y}`}}class Fy{constructor(f,A){this.wrap=f,this.canonical=A,this.key=gd(f,A.z,A.z,A.x,A.y)}}class Eu{constructor(f,A,P,N,q){if(f<P)throw new Error(`overscaledZ should be >= z; overscaledZ = ${f}; z = ${P}`);this.overscaledZ=f,this.wrap=A,this.canonical=new Am(P,+N,+q),this.key=gd(A,f,P,N,q)}clone(){return new Eu(this.overscaledZ,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)}equals(f){return this.overscaledZ===f.overscaledZ&&this.wrap===f.wrap&&this.canonical.equals(f.canonical)}scaledTo(f){if(f>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${f}; overscaledZ = ${this.overscaledZ}`);const A=this.canonical.z-f;return f>this.canonical.z?new Eu(f,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new Eu(f,this.wrap,f,this.canonical.x>>A,this.canonical.y>>A)}calculateScaledKey(f,A){if(f>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${f}; overscaledZ = ${this.overscaledZ}`);const P=this.canonical.z-f;return f>this.canonical.z?gd(this.wrap*+A,f,this.canonical.z,this.canonical.x,this.canonical.y):gd(this.wrap*+A,f,f,this.canonical.x>>P,this.canonical.y>>P)}isChildOf(f){if(f.wrap!==this.wrap)return!1;const A=this.canonical.z-f.canonical.z;return f.overscaledZ===0||f.overscaledZ<this.overscaledZ&&f.canonical.x===this.canonical.x>>A&&f.canonical.y===this.canonical.y>>A}children(f){if(this.overscaledZ>=f)return[new Eu(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const A=this.canonical.z+1,P=2*this.canonical.x,N=2*this.canonical.y;return[new Eu(A,this.wrap,A,P,N),new Eu(A,this.wrap,A,P+1,N),new Eu(A,this.wrap,A,P,N+1),new Eu(A,this.wrap,A,P+1,N+1)]}isLessThan(f){return this.wrap<f.wrap||!(this.wrap>f.wrap)&&(this.overscaledZ<f.overscaledZ||!(this.overscaledZ>f.overscaledZ)&&(this.canonical.x<f.canonical.x||!(this.canonical.x>f.canonical.x)&&this.canonical.y<f.canonical.y))}wrapped(){return new Eu(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(f){return new Eu(this.overscaledZ,f,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new Fy(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(f){return this.canonical.getTilePoint(new Pp(f.x-this.wrap,f.y))}}function gd(_,f,A,P,N){(_*=2)<0&&(_=-1*_-1);const q=1<<A;return(q*q*_+q*N+P).toString(36)+A.toString(36)+f.toString(36)}Dn("CanonicalTileID",Am),Dn("OverscaledTileID",Eu,{omit:["posMatrix"]});class Ry{constructor(f,A,P){if(this.uid=f,A.height!==A.width)throw new RangeError("DEM tiles must be square");if(P&&P!=="mapbox"&&P!=="terrarium")return void Z(`"${P}" is not a valid encoding type. Valid types include "mapbox" and "terrarium".`);this.stride=A.height;const N=this.dim=A.height-2;this.data=new Uint32Array(A.data.buffer),this.encoding=P||"mapbox";for(let q=0;q<N;q++)this.data[this._idx(-1,q)]=this.data[this._idx(0,q)],this.data[this._idx(N,q)]=this.data[this._idx(N-1,q)],this.data[this._idx(q,-1)]=this.data[this._idx(q,0)],this.data[this._idx(q,N)]=this.data[this._idx(q,N-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(N,-1)]=this.data[this._idx(N-1,0)],this.data[this._idx(-1,N)]=this.data[this._idx(0,N-1)],this.data[this._idx(N,N)]=this.data[this._idx(N-1,N-1)],this.min=Number.MAX_SAFE_INTEGER,this.max=Number.MIN_SAFE_INTEGER;for(let q=0;q<N;q++)for(let Y=0;Y<N;Y++){const oe=this.get(q,Y);oe>this.max&&(this.max=oe),oe<this.min&&(this.min=oe)}}get(f,A){const P=new Uint8Array(this.data.buffer),N=4*this._idx(f,A);return(this.encoding==="terrarium"?this._unpackTerrarium:this._unpackMapbox)(P[N],P[N+1],P[N+2])}getUnpackVector(){return this.encoding==="terrarium"?[256,1,1/256,32768]:[6553.6,25.6,.1,1e4]}_idx(f,A){if(f<-1||f>=this.dim+1||A<-1||A>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(A+1)*this.stride+(f+1)}_unpackMapbox(f,A,P){return(256*f*256+256*A+P)/10-1e4}_unpackTerrarium(f,A,P){return 256*f+A+P/256-32768}getPixels(){return new va({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(f,A,P){if(this.dim!==f.dim)throw new Error("dem dimension mismatch");let N=A*this.dim,q=A*this.dim+this.dim,Y=P*this.dim,oe=P*this.dim+this.dim;switch(A){case-1:N=q-1;break;case 1:q=N+1}switch(P){case-1:Y=oe-1;break;case 1:oe=Y+1}const de=-A*this.dim,xe=-P*this.dim;for(let Re=Y;Re<oe;Re++)for(let Ve=N;Ve<q;Ve++)this.data[this._idx(Ve,Re)]=f.data[this._idx(Ve+de,Re+xe)]}}Dn("DEMData",Ry);class By{constructor(f){this._stringToNumber={},this._numberToString=[];for(let A=0;A<f.length;A++){const P=f[A];this._stringToNumber[P]=A,this._numberToString[A]=P}}encode(f){return this._stringToNumber[f]}decode(f){if(f>=this._numberToString.length)throw new Error(`Out of bounds. Index requested n=${f} can't be >= this._numberToString.length ${this._numberToString.length}`);return this._numberToString[f]}}class zy{constructor(f,A,P,N,q){this.type="Feature",this._vectorTileFeature=f,f._z=A,f._x=P,f._y=N,this.properties=f.properties,this.id=q}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry}set geometry(f){this._geometry=f}toJSON(){const f={geometry:this.geometry};for(const A in this)A!=="_geometry"&&A!=="_vectorTileFeature"&&(f[A]=this[A]);return f}}class Ny{constructor(f,A){this.tileID=f,this.x=f.canonical.x,this.y=f.canonical.y,this.z=f.canonical.z,this.grid=new Ml(Mo,16,0),this.grid3D=new Ml(Mo,16,0),this.featureIndexArray=new Fr,this.promoteId=A}insert(f,A,P,N,q,Y){const oe=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(P,N,q);const de=Y?this.grid3D:this.grid;for(let xe=0;xe<A.length;xe++){const Re=A[xe],Ve=[1/0,1/0,-1/0,-1/0];for(let it=0;it<Re.length;it++){const ut=Re[it];Ve[0]=Math.min(Ve[0],ut.x),Ve[1]=Math.min(Ve[1],ut.y),Ve[2]=Math.max(Ve[2],ut.x),Ve[3]=Math.max(Ve[3],ut.y)}Ve[0]<Mo&&Ve[1]<Mo&&Ve[2]>=0&&Ve[3]>=0&&de.insert(oe,Ve[0],Ve[1],Ve[2],Ve[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=new Gc.VectorTile(new ni(this.rawTileData)).layers,this.sourceLayerCoder=new By(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers}query(f,A,P,N){this.loadVTLayers();const q=f.params||{},Y=Mo/f.tileSize/f.scale,oe=Fs(q.filter),de=f.queryGeometry,xe=f.queryPadding*Y,Re=Uy(de),Ve=this.grid.query(Re.minX-xe,Re.minY-xe,Re.maxX+xe,Re.maxY+xe),it=Uy(f.cameraQueryGeometry),ut=this.grid3D.query(it.minX-xe,it.minY-xe,it.maxX+xe,it.maxY+xe,(Ut,vi,Fi,gi)=>function(Ti,rn,nn,Kn,nr){for(const On of Ti)if(rn<=On.x&&nn<=On.y&&Kn>=On.x&&nr>=On.y)return!0;const Hn=[new nt(rn,nn),new nt(rn,nr),new nt(Kn,nr),new nt(Kn,nn)];if(Ti.length>2){for(const On of Hn)if(mc(Ti,On))return!0}for(let On=0;On<Ti.length-1;On++)if(qh(Ti[On],Ti[On+1],Hn))return!0;return!1}(f.cameraQueryGeometry,Ut-xe,vi-xe,Fi+xe,gi+xe));for(const Ut of ut)Ve.push(Ut);Ve.sort(ax);const ht={};let Gt;for(let Ut=0;Ut<Ve.length;Ut++){const vi=Ve[Ut];if(vi===Gt)continue;Gt=vi;const Fi=this.featureIndexArray.get(vi);let gi=null;this.loadMatchingFeature(ht,Fi.bucketIndex,Fi.sourceLayerIndex,Fi.featureIndex,oe,q.layers,q.availableImages,A,P,N,(Ti,rn,nn)=>(gi||(gi=Ha(Ti)),rn.queryIntersectsFeature(de,Ti,nn,gi,this.z,f.transform,Y,f.pixelPosMatrix)))}return ht}loadMatchingFeature(f,A,P,N,q,Y,oe,de,xe,Re,Ve){const it=this.bucketLayerIDs[A];if(Y&&!function(Ut,vi){for(let Fi=0;Fi<Ut.length;Fi++)if(vi.indexOf(Ut[Fi])>=0)return!0;return!1}(Y,it))return;const ut=this.sourceLayerCoder.decode(P),ht=this.vtLayers[ut].feature(N);if(q.needGeometry){const Ut=cl(ht,!0);if(!q.filter(new Bo(this.tileID.overscaledZ),Ut,this.tileID.canonical))return}else if(!q.filter(new Bo(this.tileID.overscaledZ),ht))return;const Gt=this.getId(ht,ut);for(let Ut=0;Ut<it.length;Ut++){const vi=it[Ut];if(Y&&Y.indexOf(vi)<0)continue;const Fi=de[vi];if(!Fi)continue;let gi={};Gt&&Re&&(gi=Re.getState(Fi.sourceLayer||"_geojsonTileLayer",Gt));const Ti=C({},xe[vi]);Ti.paint=jy(Ti.paint,Fi.paint,ht,gi,oe),Ti.layout=jy(Ti.layout,Fi.layout,ht,gi,oe);const rn=!Ve||Ve(ht,Fi,gi);if(!rn)continue;const nn=new zy(ht,this.z,this.x,this.y,Gt);nn.layer=Ti;let Kn=f[vi];Kn===void 0&&(Kn=f[vi]=[]),Kn.push({featureIndex:N,feature:nn,intersectionZ:rn})}}lookupSymbolFeatures(f,A,P,N,q,Y,oe,de){const xe={};this.loadVTLayers();const Re=Fs(q);for(const Ve of f)this.loadMatchingFeature(xe,P,N,Ve,Re,Y,oe,de,A);return xe}hasLayer(f){for(const A of this.bucketLayerIDs)for(const P of A)if(f===P)return!0;return!1}getId(f,A){let P=f.id;return this.promoteId&&(P=f.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[A]],typeof P=="boolean"&&(P=Number(P))),P}}function jy(_,f,A,P,N){return M(_,(q,Y)=>{const oe=f instanceof cc?f.get(Y):null;return oe&&oe.evaluate?oe.evaluate(A,P,N):oe})}function Uy(_){let f=1/0,A=1/0,P=-1/0,N=-1/0;for(const q of _)f=Math.min(f,q.x),A=Math.min(A,q.y),P=Math.max(P,q.x),N=Math.max(N,q.y);return{minX:f,minY:A,maxX:P,maxY:N}}function ax(_,f){return f-_}var km;Dn("FeatureIndex",Ny,{omit:["rawTileData","sourceLayerCoder"]}),r.PerformanceMarkers=void 0,(km=r.PerformanceMarkers||(r.PerformanceMarkers={})).create="create",km.load="load",km.fullLoad="fullLoad";let Mp=null,yd=[];const Sm=1e3/30,lx={mark(_){performance.mark(_)},frame(_){const f=_;Mp!=null&&yd.push(f-Mp),Mp=f},clearMetrics(){Mp=null,yd=[],performance.clearMeasures("loadTime"),performance.clearMeasures("fullLoadTime");for(const _ in r.PerformanceMarkers)performance.clearMarks(r.PerformanceMarkers[_])},getPerformanceMetrics(){performance.measure("loadTime",r.PerformanceMarkers.create,r.PerformanceMarkers.load),performance.measure("fullLoadTime",r.PerformanceMarkers.create,r.PerformanceMarkers.fullLoad);const _=performance.getEntriesByName("loadTime")[0].duration,f=performance.getEntriesByName("fullLoadTime")[0].duration,A=yd.length,P=1/(yd.reduce((q,Y)=>q+Y,0)/A/1e3),N=yd.filter(q=>q>Sm).reduce((q,Y)=>q+(Y-Sm)/Sm,0);return{loadTime:_,fullLoadTime:f,fps:P,percentDroppedFrames:N/(A+N)*100}}};r.AJAXError=dt,r.ARRAY_TYPE=Js,r.Actor=class{constructor(_,f,A){this.target=_,this.parent=f,this.mapId=A,this.callbacks={},this.tasks={},this.taskQueue=[],this.cancelCallbacks={},S(["receive","process"],this),this.invoker=new sx(this.process),this.target.addEventListener("message",this.receive,!1),this.globalScope=ie()?_:window}send(_,f,A,P,N=!1){const q=Math.round(1e18*Math.random()).toString(36).substring(0,10);A&&(this.callbacks[q]=A);const Y=_e(this.globalScope)?void 0:[];return this.target.postMessage({id:q,type:_,hasCallback:!!A,targetMapId:P,mustQueue:N,sourceMapId:this.mapId,data:Gr(f,Y)},Y),{cancel:()=>{A&&delete this.callbacks[q],this.target.postMessage({id:q,type:"<cancel>",targetMapId:P,sourceMapId:this.mapId})}}}receive(_){const f=_.data,A=f.id;if(A&&(!f.targetMapId||this.mapId===f.targetMapId))if(f.type==="<cancel>"){delete this.tasks[A];const P=this.cancelCallbacks[A];delete this.cancelCallbacks[A],P&&P()}else ie()||f.mustQueue?(this.tasks[A]=f,this.taskQueue.push(A),this.invoker.trigger()):this.processTask(A,f)}process(){if(!this.taskQueue.length)return;const _=this.taskQueue.shift(),f=this.tasks[_];delete this.tasks[_],this.taskQueue.length&&this.invoker.trigger(),f&&this.processTask(_,f)}processTask(_,f){if(f.type==="<response>"){const A=this.callbacks[_];delete this.callbacks[_],A&&(f.error?A(Lo(f.error)):A(null,Lo(f.data)))}else{let A=!1;const P=_e(this.globalScope)?void 0:[],N=f.hasCallback?(oe,de)=>{A=!0,delete this.cancelCallbacks[_],this.target.postMessage({id:_,type:"<response>",sourceMapId:this.mapId,error:oe?Gr(oe):null,data:Gr(de,P)},P)}:oe=>{A=!0};let q=null;const Y=Lo(f.data);if(this.parent[f.type])q=this.parent[f.type](f.sourceMapId,Y,N);else if(this.parent.getWorkerSource){const oe=f.type.split(".");q=this.parent.getWorkerSource(f.sourceMapId,oe[0],Y.source)[oe[1]](Y,N)}else N(new Error(`Could not find function ${f.type}`));!A&&q&&q.cancel&&(this.cancelCallbacks[_]=q.cancel)}}remove(){this.invoker.remove(),this.target.removeEventListener("message",this.receive,!1)}},r.AlphaImage=_c,r.CanonicalTileID=Am,r.CollisionBoxArray=Vi,r.CollisionCircleLayoutArray=class extends ze{},r.Color=gt,r.DEMData=Ry,r.DataConstantProperty=tr,r.DictionaryCoder=By,r.EXTENT=Mo,r.ErrorEvent=Jt,r.EvaluationParameters=Bo,r.Event=xi,r.Evented=Me,r.FeatureIndex=Ny,r.FillBucket=dd,r.FillExtrusionBucket=Mf,r.GeoJSONFeature=zy,r.ImageAtlas=uy,r.ImagePosition=fm,r.LineBucket=E,r.LineStripIndexArray=class extends jt{},r.LngLat=Ms,r.LngLatBounds=Of,r.MercatorCoordinate=Pp,r.ONE_EM=Ft,r.OverscaledTileID=Eu,r.PerformanceUtils=lx,r.PosArray=j,r.Properties=jo,r.QuadTriangleArray=class extends st{},r.RGBAImage=va,r.RasterBoundsArray=class extends B{},r.RequestPerformance=class{constructor(_){this._marks={start:[_.url,"start"].join("#"),end:[_.url,"end"].join("#"),measure:_.url.toString()},performance.mark(this._marks.start)}finish(){performance.mark(this._marks.end);let _=performance.getEntriesByName(this._marks.measure);return _.length===0&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),_=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),_}},r.ResourceType=$t,r.SegmentVector=qt,r.SymbolBucket=b0,r.Transitionable=Nc,r.TriangleIndexArray=wi,r.Uniform1f=yo,r.Uniform1i=class extends Hr{constructor(_,f){super(_,f),this.current=0}set(_){this.current!==_&&(this.current=_,this.gl.uniform1i(this.location,_))}},r.Uniform2f=class extends Hr{constructor(_,f){super(_,f),this.current=[0,0]}set(_){_[0]===this.current[0]&&_[1]===this.current[1]||(this.current=_,this.gl.uniform2f(this.location,_[0],_[1]))}},r.Uniform3f=class extends Hr{constructor(_,f){super(_,f),this.current=[0,0,0]}set(_){_[0]===this.current[0]&&_[1]===this.current[1]&&_[2]===this.current[2]||(this.current=_,this.gl.uniform3f(this.location,_[0],_[1],_[2]))}},r.Uniform4f=ko,r.UniformColor=Wr,r.UniformMatrix4f=class extends Hr{constructor(_,f){super(_,f),this.current=Ts}set(_){if(_[12]!==this.current[12]||_[0]!==this.current[0])return this.current=_,void this.gl.uniformMatrix4fv(this.location,!1,_);for(let f=1;f<16;f++)if(_[f]!==this.current[f]){this.current=_,this.gl.uniformMatrix4fv(this.location,!1,_);break}}},r.UnwrappedTileID=Fy,r.ValidationError=ae,r.ZoomHistory=rs,r.add=function(_,f,A){return _[0]=f[0]+A[0],_[1]=f[1]+A[1],_[2]=f[2]+A[2],_},r.addDynamicAttributes=ym,r.asyncAll=function(_,f,A){if(!_.length)return A(null,[]);let P=_.length;const N=new Array(_.length);let q=null;_.forEach((Y,oe)=>{f(Y,(de,xe)=>{de&&(q=de),N[oe]=xe,--P==0&&A(q,N)})})},r.bezier=b,r.bindAll=S,r.cacheEntryPossiblyAdded=function(_){me++,me>Ee&&(_.getActor().send("enforceCacheSizeLimit",le),me=0)},r.clamp=w,r.clearTileCache=function(_){const f=caches.delete(be);_&&f.catch(_).then(()=>_())},r.clipLine=wy,r.clone=function(_){var f=new Js(16);return f[0]=_[0],f[1]=_[1],f[2]=_[2],f[3]=_[3],f[4]=_[4],f[5]=_[5],f[6]=_[6],f[7]=_[7],f[8]=_[8],f[9]=_[9],f[10]=_[10],f[11]=_[11],f[12]=_[12],f[13]=_[13],f[14]=_[14],f[15]=_[15],f},r.clone$1=V,r.clone$2=function(_){var f=new Js(3);return f[0]=_[0],f[1]=_[1],f[2]=_[2],f},r.collisionCircleLayout=Ze,r.config=We,r.copy=function(_,f){return _[0]=f[0],_[1]=f[1],_[2]=f[2],_[3]=f[3],_[4]=f[4],_[5]=f[5],_[6]=f[6],_[7]=f[7],_[8]=f[8],_[9]=f[9],_[10]=f[10],_[11]=f[11],_[12]=f[12],_[13]=f[13],_[14]=f[14],_[15]=f[15],_},r.create=function(){var _=new Js(16);return Js!=Float32Array&&(_[1]=0,_[2]=0,_[3]=0,_[4]=0,_[6]=0,_[7]=0,_[8]=0,_[9]=0,_[11]=0,_[12]=0,_[13]=0,_[14]=0),_[0]=1,_[5]=1,_[10]=1,_[15]=1,_},r.create$1=Ps,r.createExpression=No,r.createFilter=Fs,r.createLayout=gs,r.createStyleLayer=function(_){return _.type==="custom"?new rx(_):new ox[_.type](_)},r.cross=function(_,f,A){var P=f[0],N=f[1],q=f[2],Y=A[0],oe=A[1],de=A[2];return _[0]=N*de-q*oe,_[1]=q*Y-P*de,_[2]=P*oe-N*Y,_},r.dot=function(_,f){return _[0]*f[0]+_[1]*f[1]+_[2]*f[2]},r.dot$1=function(_,f){return _[0]*f[0]+_[1]*f[1]+_[2]*f[2]+_[3]*f[3]},r.ease=v,r.emitValidationErrors=Gs,r.enforceCacheSizeLimit=function(_){he(),Ce&&Ce.then(f=>{f.keys().then(A=>{for(let P=0;P<A.length-_;P++)f.delete(A[P])})})},r.equals=function(_,f){var A=_[0],P=_[1],N=_[2],q=_[3],Y=_[4],oe=_[5],de=_[6],xe=_[7],Re=_[8],Ve=_[9],it=_[10],ut=_[11],ht=_[12],Gt=_[13],Ut=_[14],vi=_[15],Fi=f[0],gi=f[1],Ti=f[2],rn=f[3],nn=f[4],Kn=f[5],nr=f[6],Hn=f[7],On=f[8],An=f[9],Gn=f[10],Nn=f[11],dn=f[12],vr=f[13],ur=f[14],Jr=f[15];return Math.abs(A-Fi)<=aa*Math.max(1,Math.abs(A),Math.abs(Fi))&&Math.abs(P-gi)<=aa*Math.max(1,Math.abs(P),Math.abs(gi))&&Math.abs(N-Ti)<=aa*Math.max(1,Math.abs(N),Math.abs(Ti))&&Math.abs(q-rn)<=aa*Math.max(1,Math.abs(q),Math.abs(rn))&&Math.abs(Y-nn)<=aa*Math.max(1,Math.abs(Y),Math.abs(nn))&&Math.abs(oe-Kn)<=aa*Math.max(1,Math.abs(oe),Math.abs(Kn))&&Math.abs(de-nr)<=aa*Math.max(1,Math.abs(de),Math.abs(nr))&&Math.abs(xe-Hn)<=aa*Math.max(1,Math.abs(xe),Math.abs(Hn))&&Math.abs(Re-On)<=aa*Math.max(1,Math.abs(Re),Math.abs(On))&&Math.abs(Ve-An)<=aa*Math.max(1,Math.abs(Ve),Math.abs(An))&&Math.abs(it-Gn)<=aa*Math.max(1,Math.abs(it),Math.abs(Gn))&&Math.abs(ut-Nn)<=aa*Math.max(1,Math.abs(ut),Math.abs(Nn))&&Math.abs(ht-dn)<=aa*Math.max(1,Math.abs(ht),Math.abs(dn))&&Math.abs(Gt-vr)<=aa*Math.max(1,Math.abs(Gt),Math.abs(vr))&&Math.abs(Ut-ur)<=aa*Math.max(1,Math.abs(Ut),Math.abs(ur))&&Math.abs(vi-Jr)<=aa*Math.max(1,Math.abs(vi),Math.abs(Jr))},r.evaluateSizeForFeature=function(_,{uSize:f,uSizeT:A},{lowerSize:P,upperSize:N}){return _.kind==="source"?P/bh:_.kind==="composite"?Co(P/bh,N/bh,A):f},r.evaluateSizeForZoom=function(_,f){let A=0,P=0;if(_.kind==="constant")P=_.layoutSize;else if(_.kind!=="source"){const{interpolationType:N,minZoom:q,maxZoom:Y}=_,oe=N?w(Di.interpolationFactor(N,f,q,Y),0,1):0;_.kind==="camera"?P=Co(_.minSize,_.maxSize,oe):A=oe}return{uSizeT:A,uSize:P}},r.evaluateVariableOffset=ky,r.evented=xu,r.exported=rt,r.exported$1=Fe,r.extend=C,r.filterObject=O,r.fromRotation=function(_,f){var A=Math.sin(f),P=Math.cos(f);return _[0]=P,_[1]=A,_[2]=0,_[3]=-A,_[4]=P,_[5]=0,_[6]=0,_[7]=0,_[8]=1,_},r.fromScaling=function(_,f){return _[0]=f[0],_[1]=0,_[2]=0,_[3]=0,_[4]=0,_[5]=f[1],_[6]=0,_[7]=0,_[8]=0,_[9]=0,_[10]=f[2],_[11]=0,_[12]=0,_[13]=0,_[14]=0,_[15]=1,_},r.getAnchorAlignment=pm,r.getAnchorJustification=gm,r.getArrayBuffer=Yt,r.getImage=Vt,r.getJSON=function(_,f){return $e(C(_,{type:"json"}),f)},r.getOverlapMode=wm,r.getRTLTextPluginStatus=Kl,r.getReferrer=wt,r.getVideo=function(_,f){const A=window.document.createElement("video");A.muted=!0,A.onloadstart=function(){f(null,A)};for(let P=0;P<_.length;P++){const N=window.document.createElement("source");li(_[P])||(A.crossOrigin="Anonymous"),N.src=_[P],A.appendChild(N)}return{cancel:()=>{}}},r.identity=eu,r.invert=function(_,f){var A=f[0],P=f[1],N=f[2],q=f[3],Y=f[4],oe=f[5],de=f[6],xe=f[7],Re=f[8],Ve=f[9],it=f[10],ut=f[11],ht=f[12],Gt=f[13],Ut=f[14],vi=f[15],Fi=A*oe-P*Y,gi=A*de-N*Y,Ti=A*xe-q*Y,rn=P*de-N*oe,nn=P*xe-q*oe,Kn=N*xe-q*de,nr=Re*Gt-Ve*ht,Hn=Re*Ut-it*ht,On=Re*vi-ut*ht,An=Ve*Ut-it*Gt,Gn=Ve*vi-ut*Gt,Nn=it*vi-ut*Ut,dn=Fi*Nn-gi*Gn+Ti*An+rn*On-nn*Hn+Kn*nr;return dn?(_[0]=(oe*Nn-de*Gn+xe*An)*(dn=1/dn),_[1]=(N*Gn-P*Nn-q*An)*dn,_[2]=(Gt*Kn-Ut*nn+vi*rn)*dn,_[3]=(it*nn-Ve*Kn-ut*rn)*dn,_[4]=(de*On-Y*Nn-xe*Hn)*dn,_[5]=(A*Nn-N*On+q*Hn)*dn,_[6]=(Ut*Ti-ht*Kn-vi*gi)*dn,_[7]=(Re*Kn-it*Ti+ut*gi)*dn,_[8]=(Y*Gn-oe*On+xe*nr)*dn,_[9]=(P*On-A*Gn-q*nr)*dn,_[10]=(ht*nn-Gt*Ti+vi*Fi)*dn,_[11]=(Ve*Ti-Re*nn-ut*Fi)*dn,_[12]=(oe*Hn-Y*An-de*nr)*dn,_[13]=(A*An-P*Hn+N*nr)*dn,_[14]=(Gt*gi-ht*rn-Ut*Fi)*dn,_[15]=(Re*rn-Ve*gi+it*Fi)*dn,_):null},r.isImageBitmap=ve,r.isSafari=_e,r.isWorker=ie,r.keysDifference=function(_,f){const A=[];for(const P in _)P in f||A.push(P);return A},r.lazyLoadRTLTextPlugin=function(){ya.isLoading()||ya.isLoaded()||Kl()!=="deferred"||eo()},r.makeRequest=$e,r.mapObject=M,r.mercatorXfromLng=Py,r.mercatorYfromLat=My,r.mercatorZfromAltitude=Dy,r.mul=l0,r.mul$1=function(_,f,A){return _[0]=f[0]*A[0],_[1]=f[1]*A[1],_[2]=f[2]*A[2],_[3]=f[3]*A[3],_},r.multiply=a0,r.nextPowerOfTwo=function(_){return _<=1?1:Math.pow(2,Math.ceil(Math.log(_)/Math.LN2))},r.normalize=function(_,f){var A=f[0],P=f[1],N=f[2],q=A*A+P*P+N*N;return q>0&&(q=1/Math.sqrt(q)),_[0]=f[0]*q,_[1]=f[1]*q,_[2]=f[2]*q,_},r.number=Co,r.ortho=function(_,f,A,P,N,q,Y){var oe=1/(f-A),de=1/(P-N),xe=1/(q-Y);return _[0]=-2*oe,_[1]=0,_[2]=0,_[3]=0,_[4]=0,_[5]=-2*de,_[6]=0,_[7]=0,_[8]=0,_[9]=0,_[10]=2*xe,_[11]=0,_[12]=(f+A)*oe,_[13]=(N+P)*de,_[14]=(Y+q)*xe,_[15]=1,_},r.parseCacheControl=ke,r.parseGlyphPbf=function(_){return new ni(_).readFields(B3,[])},r.pbf=ni,r.performSymbolLayout=function(_){_.bucket.createArrays(),_.bucket.tilePixelRatio=Mo/(512*_.bucket.overscaling),_.bucket.compareText={},_.bucket.iconsNeedLinear=!1;const f=_.bucket.layers[0].layout,A=_.bucket.layers[0]._unevaluatedLayout._values,P={layoutIconSize:A["icon-size"].possiblyEvaluate(new Bo(_.bucket.zoom+1),_.canonical),layoutTextSize:A["text-size"].possiblyEvaluate(new Bo(_.bucket.zoom+1),_.canonical),textMaxSize:A["text-size"].possiblyEvaluate(new Bo(18))};if(_.bucket.textSizeData.kind==="composite"){const{minZoom:de,maxZoom:xe}=_.bucket.textSizeData;P.compositeTextSizes=[A["text-size"].possiblyEvaluate(new Bo(de),_.canonical),A["text-size"].possiblyEvaluate(new Bo(xe),_.canonical)]}if(_.bucket.iconSizeData.kind==="composite"){const{minZoom:de,maxZoom:xe}=_.bucket.iconSizeData;P.compositeIconSizes=[A["icon-size"].possiblyEvaluate(new Bo(de),_.canonical),A["icon-size"].possiblyEvaluate(new Bo(xe),_.canonical)]}const N=f.get("text-line-height")*Ft,q=f.get("text-rotation-alignment")!=="viewport"&&f.get("symbol-placement")!=="point",Y=f.get("text-keep-upright"),oe=f.get("text-size");for(const de of _.bucket.features){const xe=f.get("text-font").evaluate(de,{},_.canonical).join(","),Re=oe.evaluate(de,{},_.canonical),Ve=P.layoutTextSize.evaluate(de,{},_.canonical),it=P.layoutIconSize.evaluate(de,{},_.canonical),ut={horizontal:{},vertical:void 0},ht=de.text;let Gt,Ut=[0,0];if(ht){const gi=ht.toString(),Ti=f.get("text-letter-spacing").evaluate(de,{},_.canonical)*Ft,rn=qu(gi)?Ti:0,nn=f.get("text-anchor").evaluate(de,{},_.canonical),Kn=f.get("text-variable-anchor");if(!Kn){const Gn=f.get("text-radial-offset").evaluate(de,{},_.canonical);Ut=Gn?ky(nn,[Gn*Ft,mm]):f.get("text-offset").evaluate(de,{},_.canonical).map(Nn=>Nn*Ft)}let nr=q?"center":f.get("text-justify").evaluate(de,{},_.canonical);const Hn=f.get("symbol-placement"),On=Hn==="point"?f.get("text-max-width").evaluate(de,{},_.canonical)*Ft:0,An=()=>{_.bucket.allowVerticalPlacement&&Da(gi)&&(ut.vertical=Ap(ht,_.glyphMap,_.glyphPositions,_.imagePositions,xe,On,N,nn,"left",rn,Ut,r.WritingMode.vertical,!0,Hn,Ve,Re))};if(!q&&Kn){const Gn=nr==="auto"?Kn.map(dn=>gm(dn)):[nr];let Nn=!1;for(let dn=0;dn<Gn.length;dn++){const vr=Gn[dn];if(!ut.horizontal[vr])if(Nn)ut.horizontal[vr]=ut.horizontal[0];else{const ur=Ap(ht,_.glyphMap,_.glyphPositions,_.imagePositions,xe,On,N,"center",vr,rn,Ut,r.WritingMode.horizontal,!1,Hn,Ve,Re);ur&&(ut.horizontal[vr]=ur,Nn=ur.positionedLines.length===1)}}An()}else{nr==="auto"&&(nr=gm(nn));const Gn=Ap(ht,_.glyphMap,_.glyphPositions,_.imagePositions,xe,On,N,nn,nr,rn,Ut,r.WritingMode.horizontal,!1,Hn,Ve,Re);Gn&&(ut.horizontal[nr]=Gn),An(),Da(gi)&&q&&Y&&(ut.vertical=Ap(ht,_.glyphMap,_.glyphPositions,_.imagePositions,xe,On,N,nn,nr,rn,Ut,r.WritingMode.vertical,!1,Hn,Ve,Re))}}let vi=!1;if(de.icon&&de.icon.name){const gi=_.imageMap[de.icon.name];gi&&(Gt=q3(_.imagePositions[de.icon.name],f.get("icon-offset").evaluate(de,{},_.canonical),f.get("icon-anchor").evaluate(de,{},_.canonical)),vi=!!gi.sdf,_.bucket.sdfIcons===void 0?_.bucket.sdfIcons=vi:_.bucket.sdfIcons!==vi&&Z("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(gi.pixelRatio!==_.bucket.pixelRatio||f.get("icon-rotate").constantOr(1)!==0)&&(_.bucket.iconsNeedLinear=!0))}const Fi=Cy(ut.horizontal)||ut.vertical;_.bucket.iconsInText=!!Fi&&Fi.iconsInText,(Fi||Gt)&&K3(_.bucket,de,ut,Gt,_.imageMap,P,Ve,it,Ut,vi,_.canonical)}_.showCollisionBoxes&&_.bucket.generateCollisionDebugBuffers()},r.perspective=function(_,f,A,P,N){var q,Y=1/Math.tan(f/2);return _[0]=Y/A,_[1]=0,_[2]=0,_[3]=0,_[4]=0,_[5]=Y,_[6]=0,_[7]=0,_[8]=0,_[9]=0,_[11]=-1,_[12]=0,_[13]=0,_[15]=0,N!=null&&N!==1/0?(_[10]=(N+P)*(q=1/(P-N)),_[14]=2*N*P*q):(_[10]=-1,_[14]=-2*P),_},r.pick=function(_,f){const A={};for(let P=0;P<f.length;P++){const N=f[P];N in _&&(A[N]=_[N])}return A},r.plugin=ya,r.pointGeometry=nt,r.polygonIntersectsPolygon=Uh,r.potpack=ly,r.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],r.register=Dn,r.registerForPluginStateChange=function(_){return _({pluginStatus:Go,pluginURL:Va}),xu.on("pluginStateChange",_),_},r.renderColorRamp=iu,r.rotateX=function(_,f,A){var P=Math.sin(A),N=Math.cos(A),q=f[4],Y=f[5],oe=f[6],de=f[7],xe=f[8],Re=f[9],Ve=f[10],it=f[11];return f!==_&&(_[0]=f[0],_[1]=f[1],_[2]=f[2],_[3]=f[3],_[12]=f[12],_[13]=f[13],_[14]=f[14],_[15]=f[15]),_[4]=q*N+xe*P,_[5]=Y*N+Re*P,_[6]=oe*N+Ve*P,_[7]=de*N+it*P,_[8]=xe*N-q*P,_[9]=Re*N-Y*P,_[10]=Ve*N-oe*P,_[11]=it*N-de*P,_},r.rotateZ=function(_,f,A){var P=Math.sin(A),N=Math.cos(A),q=f[0],Y=f[1],oe=f[2],de=f[3],xe=f[4],Re=f[5],Ve=f[6],it=f[7];return f!==_&&(_[8]=f[8],_[9]=f[9],_[10]=f[10],_[11]=f[11],_[12]=f[12],_[13]=f[13],_[14]=f[14],_[15]=f[15]),_[0]=q*N+xe*P,_[1]=Y*N+Re*P,_[2]=oe*N+Ve*P,_[3]=de*N+it*P,_[4]=xe*N-q*P,_[5]=Re*N-Y*P,_[6]=Ve*N-oe*P,_[7]=it*N-de*P,_},r.scale=function(_,f,A){var P=A[0],N=A[1],q=A[2];return _[0]=f[0]*P,_[1]=f[1]*P,_[2]=f[2]*P,_[3]=f[3]*P,_[4]=f[4]*N,_[5]=f[5]*N,_[6]=f[6]*N,_[7]=f[7]*N,_[8]=f[8]*q,_[9]=f[9]*q,_[10]=f[10]*q,_[11]=f[11]*q,_[12]=f[12],_[13]=f[13],_[14]=f[14],_[15]=f[15],_},r.scale$1=function(_,f,A){return _[0]=f[0]*A,_[1]=f[1]*A,_[2]=f[2]*A,_},r.setCacheLimits=function(_,f){le=_,Ee=f},r.setRTLTextPlugin=function(_,f,A=!1){if(Go===zc||Go===lc||Go===Zo)throw new Error("setRTLTextPlugin cannot be called multiple times.");Va=rt.resolveURL(_),Go=zc,Ks=f,wu(),A||eo()},r.spec=Q,r.sphericalToCartesian=function([_,f,A]){return f+=90,f*=Math.PI/180,A*=Math.PI/180,{x:_*Math.cos(f)*Math.sin(A),y:_*Math.sin(f)*Math.sin(A),z:_*Math.cos(A)}},r.sqrLen=function(_){var f=_[0],A=_[1];return f*f+A*A},r.sub=function(_,f,A){return _[0]=f[0]-A[0],_[1]=f[1]-A[1],_[2]=f[2]-A[2],_},r.toEvaluationFeature=cl,r.transformMat3=function(_,f,A){var P=f[0],N=f[1],q=f[2];return _[0]=P*A[0]+N*A[3]+q*A[6],_[1]=P*A[1]+N*A[4]+q*A[7],_[2]=P*A[2]+N*A[5]+q*A[8],_},r.transformMat4=qc,r.transformMat4$1=function(_,f,A){var P=f[0],N=f[1];return _[0]=A[0]*P+A[4]*N+A[12],_[1]=A[1]*P+A[5]*N+A[13],_},r.translate=function(_,f,A){var P,N,q,Y,oe,de,xe,Re,Ve,it,ut,ht,Gt=A[0],Ut=A[1],vi=A[2];return f===_?(_[12]=f[0]*Gt+f[4]*Ut+f[8]*vi+f[12],_[13]=f[1]*Gt+f[5]*Ut+f[9]*vi+f[13],_[14]=f[2]*Gt+f[6]*Ut+f[10]*vi+f[14],_[15]=f[3]*Gt+f[7]*Ut+f[11]*vi+f[15]):(N=f[1],q=f[2],Y=f[3],oe=f[4],de=f[5],xe=f[6],Re=f[7],Ve=f[8],it=f[9],ut=f[10],ht=f[11],_[0]=P=f[0],_[1]=N,_[2]=q,_[3]=Y,_[4]=oe,_[5]=de,_[6]=xe,_[7]=Re,_[8]=Ve,_[9]=it,_[10]=ut,_[11]=ht,_[12]=P*Gt+oe*Ut+Ve*vi+f[12],_[13]=N*Gt+de*Ut+it*vi+f[13],_[14]=q*Gt+xe*Ut+ut*vi+f[14],_[15]=Y*Gt+Re*Ut+ht*vi+f[15]),_},r.triggerPluginCompletionEvent=uc,r.unicodeBlockLookup=_n,r.uniqueId=function(){return T++},r.validateCustomStyleLayer=function(_){const f=[],A=_.id;return A===void 0&&f.push({message:`layers.${A}: missing required property "id"`}),_.render===void 0&&f.push({message:`layers.${A}: missing required method "render"`}),_.renderingMode&&_.renderingMode!=="2d"&&_.renderingMode!=="3d"&&f.push({message:`layers.${A}: property "renderingMode" must be either "2d" or "3d"`}),f},r.validateLight=Pl,r.validateStyle=ga,r.vectorTile=Gc,r.warnOnce=Z,r.wrap=x}),u(["./shared"],function(r){function h(Pe){const Ie=typeof Pe;if(Ie==="number"||Ie==="boolean"||Ie==="string"||Pe==null)return JSON.stringify(Pe);if(Array.isArray(Pe)){let gt="[";for(const Rt of Pe)gt+=`${h(Rt)},`;return`${gt}]`}const He=Object.keys(Pe).sort();let ct="{";for(let gt=0;gt<He.length;gt++)ct+=`${JSON.stringify(He[gt])}:${h(Pe[He[gt]])},`;return`${ct}}`}function y(Pe){let Ie="";for(const He of r.refProperties)Ie+=`/${h(Pe[He])}`;return Ie}class b{constructor(Ie){this.keyCache={},Ie&&this.replace(Ie)}replace(Ie){this._layerConfigs={},this._layers={},this.update(Ie,[])}update(Ie,He){for(const gt of Ie){this._layerConfigs[gt.id]=gt;const Rt=this._layers[gt.id]=r.createStyleLayer(gt);Rt._featureFilter=r.createFilter(Rt.filter),this.keyCache[gt.id]&&delete this.keyCache[gt.id]}for(const gt of He)delete this.keyCache[gt],delete this._layerConfigs[gt],delete this._layers[gt];this.familiesBySource={};const ct=function(gt,Rt){const Ge={};for(let Bt=0;Bt<gt.length;Bt++){const ei=Rt&&Rt[gt[Bt].id]||y(gt[Bt]);Rt&&(Rt[gt[Bt].id]=ei);let _t=Ge[ei];_t||(_t=Ge[ei]=[]),_t.push(gt[Bt])}const Ht=[];for(const Bt in Ge)Ht.push(Ge[Bt]);return Ht}(Object.values(this._layerConfigs),this.keyCache);for(const gt of ct){const Rt=gt.map(Ri=>this._layers[Ri.id]),Ge=Rt[0];if(Ge.visibility==="none")continue;const Ht=Ge.source||"";let Bt=this.familiesBySource[Ht];Bt||(Bt=this.familiesBySource[Ht]={});const ei=Ge.sourceLayer||"_geojsonTileLayer";let _t=Bt[ei];_t||(_t=Bt[ei]=[]),_t.push(Rt)}}}class v{constructor(Ie){const He={},ct=[];for(const Ht in Ie){const Bt=Ie[Ht],ei=He[Ht]={};for(const _t in Bt){const Ri=Bt[+_t];if(!Ri||Ri.bitmap.width===0||Ri.bitmap.height===0)continue;const Ii={x:0,y:0,w:Ri.bitmap.width+2,h:Ri.bitmap.height+2};ct.push(Ii),ei[_t]={rect:Ii,metrics:Ri.metrics}}}const{w:gt,h:Rt}=r.potpack(ct),Ge=new r.AlphaImage({width:gt||1,height:Rt||1});for(const Ht in Ie){const Bt=Ie[Ht];for(const ei in Bt){const _t=Bt[+ei];if(!_t||_t.bitmap.width===0||_t.bitmap.height===0)continue;const Ri=He[Ht][ei].rect;r.AlphaImage.copy(_t.bitmap,Ge,{x:0,y:0},{x:Ri.x+1,y:Ri.y+1},_t.bitmap)}}this.image=Ge,this.positions=He}}r.register("GlyphAtlas",v);class w{constructor(Ie){this.tileID=new r.OverscaledTileID(Ie.tileID.overscaledZ,Ie.tileID.wrap,Ie.tileID.canonical.z,Ie.tileID.canonical.x,Ie.tileID.canonical.y),this.uid=Ie.uid,this.zoom=Ie.zoom,this.pixelRatio=Ie.pixelRatio,this.tileSize=Ie.tileSize,this.source=Ie.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=Ie.showCollisionBoxes,this.collectResourceTiming=!!Ie.collectResourceTiming,this.returnDependencies=!!Ie.returnDependencies,this.promoteId=Ie.promoteId}parse(Ie,He,ct,gt,Rt){this.status="parsing",this.data=Ie,this.collisionBoxArray=new r.CollisionBoxArray;const Ge=new r.DictionaryCoder(Object.keys(Ie.layers).sort()),Ht=new r.FeatureIndex(this.tileID,this.promoteId);Ht.bucketLayerIDs=[];const Bt={},ei={featureIndex:Ht,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:ct},_t=He.familiesBySource[this.source];for(const cr in _t){const Cr=Ie.layers[cr];if(!Cr)continue;Cr.version===1&&r.warnOnce(`Vector tile source "${this.source}" layer "${cr}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const Or=Ge.encode(cr),Er=[];for(let Jo=0;Jo<Cr.length;Jo++){const _o=Cr.feature(Jo),Qo=Ht.getId(_o,cr);Er.push({feature:_o,id:Qo,index:Jo,sourceLayerIndex:Or})}for(const Jo of _t[cr]){const _o=Jo[0];_o.source!==this.source&&r.warnOnce(`layer.source = ${_o.source} does not equal this.source = ${this.source}`),_o.minzoom&&this.zoom<Math.floor(_o.minzoom)||_o.maxzoom&&this.zoom>=_o.maxzoom||_o.visibility!=="none"&&(x(Jo,this.zoom,ct),(Bt[_o.id]=_o.createBucket({index:Ht.bucketLayerIDs.length,layers:Jo,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:Or,sourceID:this.source})).populate(Er,ei,this.tileID.canonical),Ht.bucketLayerIDs.push(Jo.map(Qo=>Qo.id)))}}let Ri,Ii,In,kn;const xt=r.mapObject(ei.glyphDependencies,cr=>Object.keys(cr).map(Number));Object.keys(xt).length?gt.send("getGlyphs",{uid:this.uid,stacks:xt},(cr,Cr)=>{Ri||(Ri=cr,Ii=Cr,Pr.call(this))}):Ii={};const Pn=Object.keys(ei.iconDependencies);Pn.length?gt.send("getImages",{icons:Pn,source:this.source,tileID:this.tileID,type:"icons"},(cr,Cr)=>{Ri||(Ri=cr,In=Cr,Pr.call(this))}):In={};const $n=Object.keys(ei.patternDependencies);function Pr(){if(Ri)return Rt(Ri);if(Ii&&In&&kn){const cr=new v(Ii),Cr=new r.ImageAtlas(In,kn);for(const Or in Bt){const Er=Bt[Or];Er instanceof r.SymbolBucket?(x(Er.layers,this.zoom,ct),r.performSymbolLayout({bucket:Er,glyphMap:Ii,glyphPositions:cr.positions,imageMap:In,imagePositions:Cr.iconPositions,showCollisionBoxes:this.showCollisionBoxes,canonical:this.tileID.canonical})):Er.hasPattern&&(Er instanceof r.LineBucket||Er instanceof r.FillBucket||Er instanceof r.FillExtrusionBucket)&&(x(Er.layers,this.zoom,ct),Er.addFeatures(ei,this.tileID.canonical,Cr.patternPositions))}this.status="done",Rt(null,{buckets:Object.values(Bt).filter(Or=>!Or.isEmpty()),featureIndex:Ht,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:cr.image,imageAtlas:Cr,glyphMap:this.returnDependencies?Ii:null,iconMap:this.returnDependencies?In:null,glyphPositions:this.returnDependencies?cr.positions:null})}}$n.length?gt.send("getImages",{icons:$n,source:this.source,tileID:this.tileID,type:"patterns"},(cr,Cr)=>{Ri||(Ri=cr,kn=Cr,Pr.call(this))}):kn={},Pr.call(this)}}function x(Pe,Ie,He){const ct=new r.EvaluationParameters(Ie);for(const gt of Pe)gt.recalculate(ct,He)}function C(Pe,Ie){const He=r.getArrayBuffer(Pe.request,(ct,gt,Rt,Ge)=>{ct?Ie(ct):gt&&Ie(null,{vectorTile:new r.vectorTile.VectorTile(new r.pbf(gt)),rawData:gt,cacheControl:Rt,expires:Ge})});return()=>{He.cancel(),Ie()}}class T{constructor(Ie,He,ct,gt){this.actor=Ie,this.layerIndex=He,this.availableImages=ct,this.loadVectorData=gt||C,this.loading={},this.loaded={}}loadTile(Ie,He){const ct=Ie.uid;this.loading||(this.loading={});const gt=!!(Ie&&Ie.request&&Ie.request.collectResourceTiming)&&new r.RequestPerformance(Ie.request),Rt=this.loading[ct]=new w(Ie);Rt.abort=this.loadVectorData(Ie,(Ge,Ht)=>{if(delete this.loading[ct],Ge||!Ht)return Rt.status="done",this.loaded[ct]=Rt,He(Ge);const Bt=Ht.rawData,ei={};Ht.expires&&(ei.expires=Ht.expires),Ht.cacheControl&&(ei.cacheControl=Ht.cacheControl);const _t={};if(gt){const Ri=gt.finish();Ri&&(_t.resourceTiming=JSON.parse(JSON.stringify(Ri)))}Rt.vectorTile=Ht.vectorTile,Rt.parse(Ht.vectorTile,this.layerIndex,this.availableImages,this.actor,(Ri,Ii)=>{if(Ri||!Ii)return He(Ri);He(null,r.extend({rawTileData:Bt.slice(0)},Ii,ei,_t))}),this.loaded=this.loaded||{},this.loaded[ct]=Rt})}reloadTile(Ie,He){const ct=this.loaded,gt=Ie.uid,Rt=this;if(ct&&ct[gt]){const Ge=ct[gt];Ge.showCollisionBoxes=Ie.showCollisionBoxes;const Ht=(Bt,ei)=>{const _t=Ge.reloadCallback;_t&&(delete Ge.reloadCallback,Ge.parse(Ge.vectorTile,Rt.layerIndex,this.availableImages,Rt.actor,_t)),He(Bt,ei)};Ge.status==="parsing"?Ge.reloadCallback=Ht:Ge.status==="done"&&(Ge.vectorTile?Ge.parse(Ge.vectorTile,this.layerIndex,this.availableImages,this.actor,Ht):Ht())}}abortTile(Ie,He){const ct=this.loading,gt=Ie.uid;ct&&ct[gt]&&ct[gt].abort&&(ct[gt].abort(),delete ct[gt]),He()}removeTile(Ie,He){const ct=this.loaded,gt=Ie.uid;ct&&ct[gt]&&delete ct[gt],He()}}class S{constructor(){this.loaded={}}loadTile(Ie,He){const{uid:ct,encoding:gt,rawImageData:Rt}=Ie,Ge=r.isImageBitmap(Rt)?this.getImageData(Rt):Rt,Ht=new r.DEMData(ct,Ge,gt);this.loaded=this.loaded||{},this.loaded[ct]=Ht,He(null,Ht)}getImageData(Ie){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(Ie.width,Ie.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d")),this.offscreenCanvas.width=Ie.width,this.offscreenCanvas.height=Ie.height,this.offscreenCanvasContext.drawImage(Ie,0,0,Ie.width,Ie.height);const He=this.offscreenCanvasContext.getImageData(-1,-1,Ie.width+2,Ie.height+2);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),new r.RGBAImage({width:He.width,height:He.height},He.data)}removeTile(Ie){const He=this.loaded,ct=Ie.uid;He&&He[ct]&&delete He[ct]}}var M=function Pe(Ie,He){var ct,gt=Ie&&Ie.type;if(gt==="FeatureCollection")for(ct=0;ct<Ie.features.length;ct++)Pe(Ie.features[ct],He);else if(gt==="GeometryCollection")for(ct=0;ct<Ie.geometries.length;ct++)Pe(Ie.geometries[ct],He);else if(gt==="Feature")Pe(Ie.geometry,He);else if(gt==="Polygon")O(Ie.coordinates,He);else if(gt==="MultiPolygon")for(ct=0;ct<Ie.coordinates.length;ct++)O(Ie.coordinates[ct],He);return Ie};function O(Pe,Ie){if(Pe.length!==0){V(Pe[0],Ie);for(var He=1;He<Pe.length;He++)V(Pe[He],!Ie)}}function V(Pe,Ie){for(var He=0,ct=0,gt=0,Rt=Pe.length,Ge=Rt-1;gt<Rt;Ge=gt++){var Ht=(Pe[gt][0]-Pe[Ge][0])*(Pe[Ge][1]+Pe[gt][1]),Bt=He+Ht;ct+=Math.abs(He)>=Math.abs(Ht)?He-Bt+Ht:Ht-Bt+He,He=Bt}He+ct>=0!=!!Ie&&Pe.reverse()}const X=r.vectorTile.VectorTileFeature.prototype.toGeoJSON;class Z{constructor(Ie){this._feature=Ie,this.extent=r.EXTENT,this.type=Ie.type,this.properties=Ie.tags,"id"in Ie&&!isNaN(Ie.id)&&(this.id=parseInt(Ie.id,10))}loadGeometry(){if(this._feature.type===1){const Ie=[];for(const He of this._feature.geometry)Ie.push([new r.pointGeometry(He[0],He[1])]);return Ie}{const Ie=[];for(const He of this._feature.geometry){const ct=[];for(const gt of He)ct.push(new r.pointGeometry(gt[0],gt[1]));Ie.push(ct)}return Ie}}toGeoJSON(Ie,He,ct){return X.call(this,Ie,He,ct)}}class ee{constructor(Ie){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=r.EXTENT,this.length=Ie.length,this._features=Ie}feature(Ie){return new Z(this._features[Ie])}}var J={exports:{}},ie=r.pointGeometry,ke=r.vectorTile.VectorTileFeature,Le=fe;function fe(Pe,Ie){this.options=Ie||{},this.features=Pe,this.length=Pe.length}function Te(Pe,Ie){this.id=typeof Pe.id=="number"?Pe.id:void 0,this.type=Pe.type,this.rawGeometry=Pe.type===1?[Pe.geometry]:Pe.geometry,this.properties=Pe.tags,this.extent=Ie||4096}fe.prototype.feature=function(Pe){return new Te(this.features[Pe],this.options.extent)},Te.prototype.loadGeometry=function(){var Pe=this.rawGeometry;this.geometry=[];for(var Ie=0;Ie<Pe.length;Ie++){for(var He=Pe[Ie],ct=[],gt=0;gt<He.length;gt++)ct.push(new ie(He[gt][0],He[gt][1]));this.geometry.push(ct)}return this.geometry},Te.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var Pe=this.geometry,Ie=1/0,He=-1/0,ct=1/0,gt=-1/0,Rt=0;Rt<Pe.length;Rt++)for(var Ge=Pe[Rt],Ht=0;Ht<Ge.length;Ht++){var Bt=Ge[Ht];Ie=Math.min(Ie,Bt.x),He=Math.max(He,Bt.x),ct=Math.min(ct,Bt.y),gt=Math.max(gt,Bt.y)}return[Ie,ct,He,gt]},Te.prototype.toGeoJSON=ke.prototype.toGeoJSON;var _e=r.pbf,ve=Le;function rt(Pe){var Ie=new _e;return function(He,ct){for(var gt in He.layers)ct.writeMessage(3,nt,He.layers[gt])}(Pe,Ie),Ie.finish()}function nt(Pe,Ie){var He;Ie.writeVarintField(15,Pe.version||1),Ie.writeStringField(1,Pe.name||""),Ie.writeVarintField(5,Pe.extent||4096);var ct={keys:[],values:[],keycache:{},valuecache:{}};for(He=0;He<Pe.length;He++)ct.feature=Pe.feature(He),Ie.writeMessage(2,Tt,ct);var gt=ct.keys;for(He=0;He<gt.length;He++)Ie.writeStringField(3,gt[He]);var Rt=ct.values;for(He=0;He<Rt.length;He++)Ie.writeMessage(4,le,Rt[He])}function Tt(Pe,Ie){var He=Pe.feature;He.id!==void 0&&Ie.writeVarintField(1,He.id),Ie.writeMessage(2,We,Pe),Ie.writeVarintField(3,He.type),Ie.writeMessage(4,Be,He)}function We(Pe,Ie){var He=Pe.feature,ct=Pe.keys,gt=Pe.values,Rt=Pe.keycache,Ge=Pe.valuecache;for(var Ht in He.properties){var Bt=He.properties[Ht],ei=Rt[Ht];if(Bt!==null){ei===void 0&&(ct.push(Ht),Rt[Ht]=ei=ct.length-1),Ie.writeVarint(ei);var _t=typeof Bt;_t!=="string"&&_t!=="boolean"&&_t!=="number"&&(Bt=JSON.stringify(Bt));var Ri=_t+":"+Bt,Ii=Ge[Ri];Ii===void 0&&(gt.push(Bt),Ge[Ri]=Ii=gt.length-1),Ie.writeVarint(Ii)}}}function be(Pe,Ie){return(Ie<<3)+(7&Pe)}function Ce(Pe){return Pe<<1^Pe>>31}function Be(Pe,Ie){for(var He=Pe.loadGeometry(),ct=Pe.type,gt=0,Rt=0,Ge=He.length,Ht=0;Ht<Ge;Ht++){var Bt=He[Ht],ei=1;ct===1&&(ei=Bt.length),Ie.writeVarint(be(1,ei));for(var _t=ct===3?Bt.length-1:Bt.length,Ri=0;Ri<_t;Ri++){Ri===1&&ct!==1&&Ie.writeVarint(be(2,_t-1));var Ii=Bt[Ri].x-gt,In=Bt[Ri].y-Rt;Ie.writeVarint(Ce(Ii)),Ie.writeVarint(Ce(In)),gt+=Ii,Rt+=In}ct===3&&Ie.writeVarint(be(7,1))}}function le(Pe,Ie){var He=typeof Pe;He==="string"?Ie.writeStringField(1,Pe):He==="boolean"?Ie.writeBooleanField(7,Pe):He==="number"&&(Pe%1!=0?Ie.writeDoubleField(3,Pe):Pe<0?Ie.writeSVarintField(6,Pe):Ie.writeVarintField(5,Pe))}function Ee(Pe,Ie,He,ct,gt,Rt){if(gt-ct<=He)return;const Ge=ct+gt>>1;he(Pe,Ie,Ge,ct,gt,Rt%2),Ee(Pe,Ie,He,ct,Ge-1,Rt+1),Ee(Pe,Ie,He,Ge+1,gt,Rt+1)}function he(Pe,Ie,He,ct,gt,Rt){for(;gt>ct;){if(gt-ct>600){const ei=gt-ct+1,_t=He-ct+1,Ri=Math.log(ei),Ii=.5*Math.exp(2*Ri/3),In=.5*Math.sqrt(Ri*Ii*(ei-Ii)/ei)*(_t-ei/2<0?-1:1);he(Pe,Ie,He,Math.max(ct,Math.floor(He-_t*Ii/ei+In)),Math.min(gt,Math.floor(He+(ei-_t)*Ii/ei+In)),Rt)}const Ge=Ie[2*He+Rt];let Ht=ct,Bt=gt;for(me(Pe,Ie,ct,He),Ie[2*gt+Rt]>Ge&&me(Pe,Ie,ct,gt);Ht<Bt;){for(me(Pe,Ie,Ht,Bt),Ht++,Bt--;Ie[2*Ht+Rt]<Ge;)Ht++;for(;Ie[2*Bt+Rt]>Ge;)Bt--}Ie[2*ct+Rt]===Ge?me(Pe,Ie,ct,Bt):(Bt++,me(Pe,Ie,Bt,gt)),Bt<=He&&(ct=Bt+1),He<=Bt&&(gt=Bt-1)}}function me(Pe,Ie,He,ct){Fe(Pe,He,ct),Fe(Ie,2*He,2*ct),Fe(Ie,2*He+1,2*ct+1)}function Fe(Pe,Ie,He){const ct=Pe[Ie];Pe[Ie]=Pe[He],Pe[He]=ct}function Xe(Pe,Ie,He,ct){const gt=Pe-He,Rt=Ie-ct;return gt*gt+Rt*Rt}J.exports=rt,J.exports.fromVectorTileJs=rt,J.exports.fromGeojsonVt=function(Pe,Ie){Ie=Ie||{};var He={};for(var ct in Pe)He[ct]=new ve(Pe[ct].features,Ie),He[ct].name=ct,He[ct].version=Ie.version,He[ct].extent=Ie.extent;return rt({layers:He})},J.exports.GeoJSONWrapper=ve;const lt=Pe=>Pe[0],Ye=Pe=>Pe[1];class Ke{constructor(Ie,He=lt,ct=Ye,gt=64,Rt=Float64Array){this.nodeSize=gt,this.points=Ie;const Ge=Ie.length<65536?Uint16Array:Uint32Array,Ht=this.ids=new Ge(Ie.length),Bt=this.coords=new Rt(2*Ie.length);for(let ei=0;ei<Ie.length;ei++)Ht[ei]=ei,Bt[2*ei]=He(Ie[ei]),Bt[2*ei+1]=ct(Ie[ei]);Ee(Ht,Bt,gt,0,Ht.length-1,0)}range(Ie,He,ct,gt){return function(Rt,Ge,Ht,Bt,ei,_t,Ri){const Ii=[0,Rt.length-1,0],In=[];let kn,xt;for(;Ii.length;){const Pn=Ii.pop(),$n=Ii.pop(),Pr=Ii.pop();if($n-Pr<=Ri){for(let Or=Pr;Or<=$n;Or++)kn=Ge[2*Or],xt=Ge[2*Or+1],kn>=Ht&&kn<=ei&&xt>=Bt&&xt<=_t&&In.push(Rt[Or]);continue}const cr=Math.floor((Pr+$n)/2);kn=Ge[2*cr],xt=Ge[2*cr+1],kn>=Ht&&kn<=ei&&xt>=Bt&&xt<=_t&&In.push(Rt[cr]);const Cr=(Pn+1)%2;(Pn===0?Ht<=kn:Bt<=xt)&&(Ii.push(Pr),Ii.push(cr-1),Ii.push(Cr)),(Pn===0?ei>=kn:_t>=xt)&&(Ii.push(cr+1),Ii.push($n),Ii.push(Cr))}return In}(this.ids,this.coords,Ie,He,ct,gt,this.nodeSize)}within(Ie,He,ct){return function(gt,Rt,Ge,Ht,Bt,ei){const _t=[0,gt.length-1,0],Ri=[],Ii=Bt*Bt;for(;_t.length;){const In=_t.pop(),kn=_t.pop(),xt=_t.pop();if(kn-xt<=ei){for(let Cr=xt;Cr<=kn;Cr++)Xe(Rt[2*Cr],Rt[2*Cr+1],Ge,Ht)<=Ii&&Ri.push(gt[Cr]);continue}const Pn=Math.floor((xt+kn)/2),$n=Rt[2*Pn],Pr=Rt[2*Pn+1];Xe($n,Pr,Ge,Ht)<=Ii&&Ri.push(gt[Pn]);const cr=(In+1)%2;(In===0?Ge-Bt<=$n:Ht-Bt<=Pr)&&(_t.push(xt),_t.push(Pn-1),_t.push(cr)),(In===0?Ge+Bt>=$n:Ht+Bt>=Pr)&&(_t.push(Pn+1),_t.push(kn),_t.push(cr))}return Ri}(this.ids,this.coords,Ie,He,ct,this.nodeSize)}}const Lt={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:Pe=>Pe},$t=Math.fround||(dt=new Float32Array(1),Pe=>(dt[0]=+Pe,dt[0]));var dt;class wt{constructor(Ie){this.options=Vt(Object.create(Lt),Ie),this.trees=new Array(this.options.maxZoom+1)}load(Ie){const{log:He,minZoom:ct,maxZoom:gt,nodeSize:Rt}=this.options;He&&console.time("total time");const Ge=`prepare ${Ie.length} points`;He&&console.time(Ge),this.points=Ie;let Ht=[];for(let Bt=0;Bt<Ie.length;Bt++)Ie[Bt].geometry&&Ht.push($e(Ie[Bt],Bt));this.trees[gt+1]=new Ke(Ht,mi,Qi,Rt,Float32Array),He&&console.timeEnd(Ge);for(let Bt=gt;Bt>=ct;Bt--){const ei=+Date.now();Ht=this._cluster(Ht,Bt),this.trees[Bt]=new Ke(Ht,mi,Qi,Rt,Float32Array),He&&console.log("z%d: %d clusters in %dms",Bt,Ht.length,+Date.now()-ei)}return He&&console.timeEnd("total time"),this}getClusters(Ie,He){let ct=((Ie[0]+180)%360+360)%360-180;const gt=Math.max(-90,Math.min(90,Ie[1]));let Rt=Ie[2]===180?180:((Ie[2]+180)%360+360)%360-180;const Ge=Math.max(-90,Math.min(90,Ie[3]));if(Ie[2]-Ie[0]>=360)ct=-180,Rt=180;else if(ct>Rt){const _t=this.getClusters([ct,gt,180,Ge],He),Ri=this.getClusters([-180,gt,Rt,Ge],He);return _t.concat(Ri)}const Ht=this.trees[this._limitZoom(He)],Bt=Ht.range(Zt(ct),Ci(Ge),Zt(Rt),Ci(gt)),ei=[];for(const _t of Bt){const Ri=Ht.points[_t];ei.push(Ri.numPoints?Yt(Ri):this.points[Ri.index])}return ei}getChildren(Ie){const He=this._getOriginId(Ie),ct=this._getOriginZoom(Ie),gt="No cluster with the specified id.",Rt=this.trees[ct];if(!Rt)throw new Error(gt);const Ge=Rt.points[He];if(!Ge)throw new Error(gt);const Ht=this.options.radius/(this.options.extent*Math.pow(2,ct-1)),Bt=Rt.within(Ge.x,Ge.y,Ht),ei=[];for(const _t of Bt){const Ri=Rt.points[_t];Ri.parentId===Ie&&ei.push(Ri.numPoints?Yt(Ri):this.points[Ri.index])}if(ei.length===0)throw new Error(gt);return ei}getLeaves(Ie,He,ct){const gt=[];return this._appendLeaves(gt,Ie,He=He||10,ct=ct||0,0),gt}getTile(Ie,He,ct){const gt=this.trees[this._limitZoom(Ie)],Rt=Math.pow(2,Ie),{extent:Ge,radius:Ht}=this.options,Bt=Ht/Ge,ei=(ct-Bt)/Rt,_t=(ct+1+Bt)/Rt,Ri={features:[]};return this._addTileFeatures(gt.range((He-Bt)/Rt,ei,(He+1+Bt)/Rt,_t),gt.points,He,ct,Rt,Ri),He===0&&this._addTileFeatures(gt.range(1-Bt/Rt,ei,1,_t),gt.points,Rt,ct,Rt,Ri),He===Rt-1&&this._addTileFeatures(gt.range(0,ei,Bt/Rt,_t),gt.points,-1,ct,Rt,Ri),Ri.features.length?Ri:null}getClusterExpansionZoom(Ie){let He=this._getOriginZoom(Ie)-1;for(;He<=this.options.maxZoom;){const ct=this.getChildren(Ie);if(He++,ct.length!==1)break;Ie=ct[0].properties.cluster_id}return He}_appendLeaves(Ie,He,ct,gt,Rt){const Ge=this.getChildren(He);for(const Ht of Ge){const Bt=Ht.properties;if(Bt&&Bt.cluster?Rt+Bt.point_count<=gt?Rt+=Bt.point_count:Rt=this._appendLeaves(Ie,Bt.cluster_id,ct,gt,Rt):Rt<gt?Rt++:Ie.push(Ht),Ie.length===ct)break}return Rt}_addTileFeatures(Ie,He,ct,gt,Rt,Ge){for(const Ht of Ie){const Bt=He[Ht],ei=Bt.numPoints;let _t,Ri,Ii;if(ei)_t=li(Bt),Ri=Bt.x,Ii=Bt.y;else{const xt=this.points[Bt.index];_t=xt.properties,Ri=Zt(xt.geometry.coordinates[0]),Ii=Ci(xt.geometry.coordinates[1])}const In={type:1,geometry:[[Math.round(this.options.extent*(Ri*Rt-ct)),Math.round(this.options.extent*(Ii*Rt-gt))]],tags:_t};let kn;ei?kn=Bt.id:this.options.generateId?kn=Bt.index:this.points[Bt.index].id&&(kn=this.points[Bt.index].id),kn!==void 0&&(In.id=kn),Ge.features.push(In)}}_limitZoom(Ie){return Math.max(this.options.minZoom,Math.min(Math.floor(+Ie),this.options.maxZoom+1))}_cluster(Ie,He){const ct=[],{radius:gt,extent:Rt,reduce:Ge,minPoints:Ht}=this.options,Bt=gt/(Rt*Math.pow(2,He));for(let ei=0;ei<Ie.length;ei++){const _t=Ie[ei];if(_t.zoom<=He)continue;_t.zoom=He;const Ri=this.trees[He+1],Ii=Ri.within(_t.x,_t.y,Bt),In=_t.numPoints||1;let kn=In;for(const xt of Ii){const Pn=Ri.points[xt];Pn.zoom>He&&(kn+=Pn.numPoints||1)}if(kn>In&&kn>=Ht){let xt=_t.x*In,Pn=_t.y*In,$n=Ge&&In>1?this._map(_t,!0):null;const Pr=(ei<<5)+(He+1)+this.points.length;for(const cr of Ii){const Cr=Ri.points[cr];if(Cr.zoom<=He)continue;Cr.zoom=He;const Or=Cr.numPoints||1;xt+=Cr.x*Or,Pn+=Cr.y*Or,Cr.parentId=Pr,Ge&&($n||($n=this._map(_t,!0)),Ge($n,this._map(Cr)))}_t.parentId=Pr,ct.push(bt(xt/kn,Pn/kn,Pr,kn,$n))}else if(ct.push(_t),kn>1)for(const xt of Ii){const Pn=Ri.points[xt];Pn.zoom<=He||(Pn.zoom=He,ct.push(Pn))}}return ct}_getOriginId(Ie){return Ie-this.points.length>>5}_getOriginZoom(Ie){return(Ie-this.points.length)%32}_map(Ie,He){if(Ie.numPoints)return He?Vt({},Ie.properties):Ie.properties;const ct=this.points[Ie.index].properties,gt=this.options.map(ct);return He&&gt===ct?Vt({},gt):gt}}function bt(Pe,Ie,He,ct,gt){return{x:$t(Pe),y:$t(Ie),zoom:1/0,id:He,parentId:-1,numPoints:ct,properties:gt}}function $e(Pe,Ie){const[He,ct]=Pe.geometry.coordinates;return{x:$t(Zt(He)),y:$t(Ci(ct)),zoom:1/0,index:Ie,parentId:-1}}function Yt(Pe){return{type:"Feature",id:Pe.id,properties:li(Pe),geometry:{type:"Point",coordinates:[(Ie=Pe.x,360*(Ie-.5)),Li(Pe.y)]}};var Ie}function li(Pe){const Ie=Pe.numPoints,He=Ie>=1e4?`${Math.round(Ie/1e3)}k`:Ie>=1e3?Math.round(Ie/100)/10+"k":Ie;return Vt(Vt({},Pe.properties),{cluster:!0,cluster_id:Pe.id,point_count:Ie,point_count_abbreviated:He})}function Zt(Pe){return Pe/360+.5}function Ci(Pe){const Ie=Math.sin(Pe*Math.PI/180),He=.5-.25*Math.log((1+Ie)/(1-Ie))/Math.PI;return He<0?0:He>1?1:He}function Li(Pe){const Ie=(180-360*Pe)*Math.PI/180;return 360*Math.atan(Math.exp(Ie))/Math.PI-90}function Vt(Pe,Ie){for(const He in Ie)Pe[He]=Ie[He];return Pe}function mi(Pe){return Pe.x}function Qi(Pe){return Pe.y}function xi(Pe,Ie,He,ct){for(var gt,Rt=ct,Ge=He-Ie>>1,Ht=He-Ie,Bt=Pe[Ie],ei=Pe[Ie+1],_t=Pe[He],Ri=Pe[He+1],Ii=Ie+3;Ii<He;Ii+=3){var In=Jt(Pe[Ii],Pe[Ii+1],Bt,ei,_t,Ri);if(In>Rt)gt=Ii,Rt=In;else if(In===Rt){var kn=Math.abs(Ii-Ge);kn<Ht&&(gt=Ii,Ht=kn)}}Rt>ct&&(gt-Ie>3&&xi(Pe,Ie,gt,ct),Pe[gt+2]=Rt,He-gt>3&&xi(Pe,gt,He,ct))}function Jt(Pe,Ie,He,ct,gt,Rt){var Ge=gt-He,Ht=Rt-ct;if(Ge!==0||Ht!==0){var Bt=((Pe-He)*Ge+(Ie-ct)*Ht)/(Ge*Ge+Ht*Ht);Bt>1?(He=gt,ct=Rt):Bt>0&&(He+=Ge*Bt,ct+=Ht*Bt)}return(Ge=Pe-He)*Ge+(Ht=Ie-ct)*Ht}function Me(Pe,Ie,He,ct){var gt={id:Pe===void 0?null:Pe,type:Ie,geometry:He,tags:ct,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(Rt){var Ge=Rt.geometry,Ht=Rt.type;if(Ht==="Point"||Ht==="MultiPoint"||Ht==="LineString")Q(Rt,Ge);else if(Ht==="Polygon"||Ht==="MultiLineString")for(var Bt=0;Bt<Ge.length;Bt++)Q(Rt,Ge[Bt]);else if(Ht==="MultiPolygon")for(Bt=0;Bt<Ge.length;Bt++)for(var ei=0;ei<Ge[Bt].length;ei++)Q(Rt,Ge[Bt][ei])}(gt),gt}function Q(Pe,Ie){for(var He=0;He<Ie.length;He+=3)Pe.minX=Math.min(Pe.minX,Ie[He]),Pe.minY=Math.min(Pe.minY,Ie[He+1]),Pe.maxX=Math.max(Pe.maxX,Ie[He]),Pe.maxY=Math.max(Pe.maxY,Ie[He+1])}function ae(Pe,Ie,He,ct){if(Ie.geometry){var gt=Ie.geometry.coordinates,Rt=Ie.geometry.type,Ge=Math.pow(He.tolerance/((1<<He.maxZoom)*He.extent),2),Ht=[],Bt=Ie.id;if(He.promoteId?Bt=Ie.properties[He.promoteId]:He.generateId&&(Bt=ct||0),Rt==="Point")et(gt,Ht);else if(Rt==="MultiPoint")for(var ei=0;ei<gt.length;ei++)et(gt[ei],Ht);else if(Rt==="LineString")vt(gt,Ht,Ge,!1);else if(Rt==="MultiLineString"){if(He.lineMetrics){for(ei=0;ei<gt.length;ei++)vt(gt[ei],Ht=[],Ge,!1),Pe.push(Me(Bt,"LineString",Ht,Ie.properties));return}Wt(gt,Ht,Ge,!1)}else if(Rt==="Polygon")Wt(gt,Ht,Ge,!0);else{if(Rt!=="MultiPolygon"){if(Rt==="GeometryCollection"){for(ei=0;ei<Ie.geometry.geometries.length;ei++)ae(Pe,{id:Bt,geometry:Ie.geometry.geometries[ei],properties:Ie.properties},He,ct);return}throw new Error("Input data is not a valid GeoJSON object.")}for(ei=0;ei<gt.length;ei++){var _t=[];Wt(gt[ei],_t,Ge,!0),Ht.push(_t)}}Pe.push(Me(Bt,Rt,Ht,Ie.properties))}}function et(Pe,Ie){Ie.push(di(Pe[0])),Ie.push(xn(Pe[1])),Ie.push(0)}function vt(Pe,Ie,He,ct){for(var gt,Rt,Ge=0,Ht=0;Ht<Pe.length;Ht++){var Bt=di(Pe[Ht][0]),ei=xn(Pe[Ht][1]);Ie.push(Bt),Ie.push(ei),Ie.push(0),Ht>0&&(Ge+=ct?(gt*ei-Bt*Rt)/2:Math.sqrt(Math.pow(Bt-gt,2)+Math.pow(ei-Rt,2))),gt=Bt,Rt=ei}var _t=Ie.length-3;Ie[2]=1,xi(Ie,0,_t,He),Ie[_t+2]=1,Ie.size=Math.abs(Ge),Ie.start=0,Ie.end=Ie.size}function Wt(Pe,Ie,He,ct){for(var gt=0;gt<Pe.length;gt++){var Rt=[];vt(Pe[gt],Rt,He,ct),Ie.push(Rt)}}function di(Pe){return Pe/360+.5}function xn(Pe){var Ie=Math.sin(Pe*Math.PI/180),He=.5-.25*Math.log((1+Ie)/(1-Ie))/Math.PI;return He<0?0:He>1?1:He}function Mn(Pe,Ie,He,ct,gt,Rt,Ge,Ht){if(ct/=Ie,Rt>=(He/=Ie)&&Ge<ct)return Pe;if(Ge<He||Rt>=ct)return null;for(var Bt=[],ei=0;ei<Pe.length;ei++){var _t=Pe[ei],Ri=_t.geometry,Ii=_t.type,In=gt===0?_t.minX:_t.minY,kn=gt===0?_t.maxX:_t.maxY;if(In>=He&&kn<ct)Bt.push(_t);else if(!(kn<He||In>=ct)){var xt=[];if(Ii==="Point"||Ii==="MultiPoint")fn(Ri,xt,He,ct,gt);else if(Ii==="LineString")Bi(Ri,xt,He,ct,gt,!1,Ht.lineMetrics);else if(Ii==="MultiLineString")Xn(Ri,xt,He,ct,gt,!1);else if(Ii==="Polygon")Xn(Ri,xt,He,ct,gt,!0);else if(Ii==="MultiPolygon")for(var Pn=0;Pn<Ri.length;Pn++){var $n=[];Xn(Ri[Pn],$n,He,ct,gt,!0),$n.length&&xt.push($n)}if(xt.length){if(Ht.lineMetrics&&Ii==="LineString"){for(Pn=0;Pn<xt.length;Pn++)Bt.push(Me(_t.id,Ii,xt[Pn],_t.tags));continue}Ii!=="LineString"&&Ii!=="MultiLineString"||(xt.length===1?(Ii="LineString",xt=xt[0]):Ii="MultiLineString"),Ii!=="Point"&&Ii!=="MultiPoint"||(Ii=xt.length===3?"Point":"MultiPoint"),Bt.push(Me(_t.id,Ii,xt,_t.tags))}}}return Bt.length?Bt:null}function fn(Pe,Ie,He,ct,gt){for(var Rt=0;Rt<Pe.length;Rt+=3){var Ge=Pe[Rt+gt];Ge>=He&&Ge<=ct&&(Ie.push(Pe[Rt]),Ie.push(Pe[Rt+1]),Ie.push(Pe[Rt+2]))}}function Bi(Pe,Ie,He,ct,gt,Rt,Ge){for(var Ht,Bt,ei=en(Pe),_t=gt===0?Kr:jn,Ri=Pe.start,Ii=0;Ii<Pe.length-3;Ii+=3){var In=Pe[Ii],kn=Pe[Ii+1],xt=Pe[Ii+2],Pn=Pe[Ii+3],$n=Pe[Ii+4],Pr=gt===0?In:kn,cr=gt===0?Pn:$n,Cr=!1;Ge&&(Ht=Math.sqrt(Math.pow(In-Pn,2)+Math.pow(kn-$n,2))),Pr<He?cr>He&&(Bt=_t(ei,In,kn,Pn,$n,He),Ge&&(ei.start=Ri+Ht*Bt)):Pr>ct?cr<ct&&(Bt=_t(ei,In,kn,Pn,$n,ct),Ge&&(ei.start=Ri+Ht*Bt)):Yn(ei,In,kn,xt),cr<He&&Pr>=He&&(Bt=_t(ei,In,kn,Pn,$n,He),Cr=!0),cr>ct&&Pr<=ct&&(Bt=_t(ei,In,kn,Pn,$n,ct),Cr=!0),!Rt&&Cr&&(Ge&&(ei.end=Ri+Ht*Bt),Ie.push(ei),ei=en(Pe)),Ge&&(Ri+=Ht)}var Or=Pe.length-3;In=Pe[Or],kn=Pe[Or+1],xt=Pe[Or+2],(Pr=gt===0?In:kn)>=He&&Pr<=ct&&Yn(ei,In,kn,xt),Or=ei.length-3,Rt&&Or>=3&&(ei[Or]!==ei[0]||ei[Or+1]!==ei[1])&&Yn(ei,ei[0],ei[1],ei[2]),ei.length&&Ie.push(ei)}function en(Pe){var Ie=[];return Ie.size=Pe.size,Ie.start=Pe.start,Ie.end=Pe.end,Ie}function Xn(Pe,Ie,He,ct,gt,Rt){for(var Ge=0;Ge<Pe.length;Ge++)Bi(Pe[Ge],Ie,He,ct,gt,Rt,!1)}function Yn(Pe,Ie,He,ct){Pe.push(Ie),Pe.push(He),Pe.push(ct)}function Kr(Pe,Ie,He,ct,gt,Rt){var Ge=(Rt-Ie)/(ct-Ie);return Pe.push(Rt),Pe.push(He+(gt-He)*Ge),Pe.push(1),Ge}function jn(Pe,Ie,He,ct,gt,Rt){var Ge=(Rt-He)/(gt-He);return Pe.push(Ie+(ct-Ie)*Ge),Pe.push(Rt),Pe.push(1),Ge}function cn(Pe,Ie){for(var He=[],ct=0;ct<Pe.length;ct++){var gt,Rt=Pe[ct],Ge=Rt.type;if(Ge==="Point"||Ge==="MultiPoint"||Ge==="LineString")gt=mn(Rt.geometry,Ie);else if(Ge==="MultiLineString"||Ge==="Polygon"){gt=[];for(var Ht=0;Ht<Rt.geometry.length;Ht++)gt.push(mn(Rt.geometry[Ht],Ie))}else if(Ge==="MultiPolygon")for(gt=[],Ht=0;Ht<Rt.geometry.length;Ht++){for(var Bt=[],ei=0;ei<Rt.geometry[Ht].length;ei++)Bt.push(mn(Rt.geometry[Ht][ei],Ie));gt.push(Bt)}He.push(Me(Rt.id,Ge,gt,Rt.tags))}return He}function mn(Pe,Ie){var He=[];He.size=Pe.size,Pe.start!==void 0&&(He.start=Pe.start,He.end=Pe.end);for(var ct=0;ct<Pe.length;ct+=3)He.push(Pe[ct]+Ie,Pe[ct+1],Pe[ct+2]);return He}function er(Pe,Ie){if(Pe.transformed)return Pe;var He,ct,gt,Rt=1<<Pe.z,Ge=Pe.x,Ht=Pe.y;for(He=0;He<Pe.features.length;He++){var Bt=Pe.features[He],ei=Bt.geometry,_t=Bt.type;if(Bt.geometry=[],_t===1)for(ct=0;ct<ei.length;ct+=2)Bt.geometry.push(yn(ei[ct],ei[ct+1],Ie,Rt,Ge,Ht));else for(ct=0;ct<ei.length;ct++){var Ri=[];for(gt=0;gt<ei[ct].length;gt+=2)Ri.push(yn(ei[ct][gt],ei[ct][gt+1],Ie,Rt,Ge,Ht));Bt.geometry.push(Ri)}}return Pe.transformed=!0,Pe}function yn(Pe,Ie,He,ct,gt,Rt){return[Math.round(He*(Pe*ct-gt)),Math.round(He*(Ie*ct-Rt))]}function Ln(Pe,Ie,He,ct,gt){for(var Rt=Ie===gt.maxZoom?0:gt.tolerance/((1<<Ie)*gt.extent),Ge={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:He,y:ct,z:Ie,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},Ht=0;Ht<Pe.length;Ht++){Ge.numFeatures++,lr(Ge,Pe[Ht],Rt,gt);var Bt=Pe[Ht].minX,ei=Pe[Ht].minY,_t=Pe[Ht].maxX,Ri=Pe[Ht].maxY;Bt<Ge.minX&&(Ge.minX=Bt),ei<Ge.minY&&(Ge.minY=ei),_t>Ge.maxX&&(Ge.maxX=_t),Ri>Ge.maxY&&(Ge.maxY=Ri)}return Ge}function lr(Pe,Ie,He,ct){var gt=Ie.geometry,Rt=Ie.type,Ge=[];if(Rt==="Point"||Rt==="MultiPoint")for(var Ht=0;Ht<gt.length;Ht+=3)Ge.push(gt[Ht]),Ge.push(gt[Ht+1]),Pe.numPoints++,Pe.numSimplified++;else if(Rt==="LineString")oo(Ge,gt,Pe,He,!1,!1);else if(Rt==="MultiLineString"||Rt==="Polygon")for(Ht=0;Ht<gt.length;Ht++)oo(Ge,gt[Ht],Pe,He,Rt==="Polygon",Ht===0);else if(Rt==="MultiPolygon")for(var Bt=0;Bt<gt.length;Bt++){var ei=gt[Bt];for(Ht=0;Ht<ei.length;Ht++)oo(Ge,ei[Ht],Pe,He,!0,Ht===0)}if(Ge.length){var _t=Ie.tags||null;if(Rt==="LineString"&&ct.lineMetrics){for(var Ri in _t={},Ie.tags)_t[Ri]=Ie.tags[Ri];_t.mapbox_clip_start=gt.start/gt.size,_t.mapbox_clip_end=gt.end/gt.size}var Ii={geometry:Ge,type:Rt==="Polygon"||Rt==="MultiPolygon"?3:Rt==="LineString"||Rt==="MultiLineString"?2:1,tags:_t};Ie.id!==null&&(Ii.id=Ie.id),Pe.features.push(Ii)}}function oo(Pe,Ie,He,ct,gt,Rt){var Ge=ct*ct;if(ct>0&&Ie.size<(gt?Ge:ct))He.numPoints+=Ie.length/3;else{for(var Ht=[],Bt=0;Bt<Ie.length;Bt+=3)(ct===0||Ie[Bt+2]>Ge)&&(He.numSimplified++,Ht.push(Ie[Bt]),Ht.push(Ie[Bt+1])),He.numPoints++;gt&&function(ei,_t){for(var Ri=0,Ii=0,In=ei.length,kn=In-2;Ii<In;kn=Ii,Ii+=2)Ri+=(ei[Ii]-ei[kn])*(ei[Ii+1]+ei[kn+1]);if(Ri>0===_t)for(Ii=0,In=ei.length;Ii<In/2;Ii+=2){var xt=ei[Ii],Pn=ei[Ii+1];ei[Ii]=ei[In-2-Ii],ei[Ii+1]=ei[In-1-Ii],ei[In-2-Ii]=xt,ei[In-1-Ii]=Pn}}(Ht,Rt),Pe.push(Ht)}}function ln(Pe,Ie){var He=(Ie=this.options=function(gt,Rt){for(var Ge in Rt)gt[Ge]=Rt[Ge];return gt}(Object.create(this.options),Ie)).debug;if(He&&console.time("preprocess data"),Ie.maxZoom<0||Ie.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(Ie.promoteId&&Ie.generateId)throw new Error("promoteId and generateId cannot be used together.");var ct=function(gt,Rt){var Ge=[];if(gt.type==="FeatureCollection")for(var Ht=0;Ht<gt.features.length;Ht++)ae(Ge,gt.features[Ht],Rt,Ht);else ae(Ge,gt.type==="Feature"?gt:{geometry:gt},Rt);return Ge}(Pe,Ie);this.tiles={},this.tileCoords=[],He&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",Ie.indexMaxZoom,Ie.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),ct=function(gt,Rt){var Ge=Rt.buffer/Rt.extent,Ht=gt,Bt=Mn(gt,1,-1-Ge,Ge,0,-1,2,Rt),ei=Mn(gt,1,1-Ge,2+Ge,0,-1,2,Rt);return(Bt||ei)&&(Ht=Mn(gt,1,-Ge,1+Ge,0,-1,2,Rt)||[],Bt&&(Ht=cn(Bt,1).concat(Ht)),ei&&(Ht=Ht.concat(cn(ei,-1)))),Ht}(ct,Ie),ct.length&&this.splitTile(ct,0,0,0),He&&(ct.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function qe(Pe,Ie,He){return 32*((1<<Pe)*He+Ie)+Pe}function To(Pe,Ie){const He=Pe.tileID.canonical;if(!this._geoJSONIndex)return Ie(null,null);const ct=this._geoJSONIndex.getTile(He.z,He.x,He.y);if(!ct)return Ie(null,null);const gt=new ee(ct.features);let Rt=J.exports(gt);Rt.byteOffset===0&&Rt.byteLength===Rt.buffer.byteLength||(Rt=new Uint8Array(Rt)),Ie(null,{vectorTile:gt,rawData:Rt.buffer})}ln.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},ln.prototype.splitTile=function(Pe,Ie,He,ct,gt,Rt,Ge){for(var Ht=[Pe,Ie,He,ct],Bt=this.options,ei=Bt.debug;Ht.length;){ct=Ht.pop(),He=Ht.pop(),Ie=Ht.pop(),Pe=Ht.pop();var _t=1<<Ie,Ri=qe(Ie,He,ct),Ii=this.tiles[Ri];if(!Ii&&(ei>1&&console.time("creation"),Ii=this.tiles[Ri]=Ln(Pe,Ie,He,ct,Bt),this.tileCoords.push({z:Ie,x:He,y:ct}),ei)){ei>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",Ie,He,ct,Ii.numFeatures,Ii.numPoints,Ii.numSimplified),console.timeEnd("creation"));var In="z"+Ie;this.stats[In]=(this.stats[In]||0)+1,this.total++}if(Ii.source=Pe,gt){if(Ie===Bt.maxZoom||Ie===gt)continue;var kn=1<<gt-Ie;if(He!==Math.floor(Rt/kn)||ct!==Math.floor(Ge/kn))continue}else if(Ie===Bt.indexMaxZoom||Ii.numPoints<=Bt.indexMaxPoints)continue;if(Ii.source=null,Pe.length!==0){ei>1&&console.time("clipping");var xt,Pn,$n,Pr,cr,Cr,Or=.5*Bt.buffer/Bt.extent,Er=.5-Or,Jo=.5+Or,_o=1+Or;xt=Pn=$n=Pr=null,cr=Mn(Pe,_t,He-Or,He+Jo,0,Ii.minX,Ii.maxX,Bt),Cr=Mn(Pe,_t,He+Er,He+_o,0,Ii.minX,Ii.maxX,Bt),Pe=null,cr&&(xt=Mn(cr,_t,ct-Or,ct+Jo,1,Ii.minY,Ii.maxY,Bt),Pn=Mn(cr,_t,ct+Er,ct+_o,1,Ii.minY,Ii.maxY,Bt),cr=null),Cr&&($n=Mn(Cr,_t,ct-Or,ct+Jo,1,Ii.minY,Ii.maxY,Bt),Pr=Mn(Cr,_t,ct+Er,ct+_o,1,Ii.minY,Ii.maxY,Bt),Cr=null),ei>1&&console.timeEnd("clipping"),Ht.push(xt||[],Ie+1,2*He,2*ct),Ht.push(Pn||[],Ie+1,2*He,2*ct+1),Ht.push($n||[],Ie+1,2*He+1,2*ct),Ht.push(Pr||[],Ie+1,2*He+1,2*ct+1)}}},ln.prototype.getTile=function(Pe,Ie,He){var ct=this.options,gt=ct.extent,Rt=ct.debug;if(Pe<0||Pe>24)return null;var Ge=1<<Pe,Ht=qe(Pe,Ie=(Ie%Ge+Ge)%Ge,He);if(this.tiles[Ht])return er(this.tiles[Ht],gt);Rt>1&&console.log("drilling down to z%d-%d-%d",Pe,Ie,He);for(var Bt,ei=Pe,_t=Ie,Ri=He;!Bt&&ei>0;)ei--,_t=Math.floor(_t/2),Ri=Math.floor(Ri/2),Bt=this.tiles[qe(ei,_t,Ri)];return Bt&&Bt.source?(Rt>1&&console.log("found parent tile z%d-%d-%d",ei,_t,Ri),Rt>1&&console.time("drilling down"),this.splitTile(Bt.source,ei,_t,Ri,Pe,Ie,He),Rt>1&&console.timeEnd("drilling down"),this.tiles[Ht]?er(this.tiles[Ht],gt):null):null};class bo extends T{constructor(Ie,He,ct,gt){super(Ie,He,ct,To),gt&&(this.loadGeoJSON=gt)}loadData(Ie,He){var ct;(ct=this._pendingRequest)===null||ct===void 0||ct.cancel(),this._pendingCallback&&this._pendingCallback(null,{abandoned:!0});const gt=!!(Ie&&Ie.request&&Ie.request.collectResourceTiming)&&new r.RequestPerformance(Ie.request);this._pendingCallback=He,this._pendingRequest=this.loadGeoJSON(Ie,(Rt,Ge)=>{if(delete this._pendingCallback,delete this._pendingRequest,Rt||!Ge)return He(Rt);if(typeof Ge!="object")return He(new Error(`Input data given to '${Ie.source}' is not a valid GeoJSON object.`));{M(Ge,!0);try{if(Ie.filter){const Bt=r.createExpression(Ie.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(Bt.result==="error")throw new Error(Bt.value.map(_t=>`${_t.key}: ${_t.message}`).join(", "));const ei=Ge.features.filter(_t=>Bt.value.evaluate({zoom:0},_t));Ge={type:"FeatureCollection",features:ei}}this._geoJSONIndex=Ie.cluster?new wt(function({superclusterOptions:Bt,clusterProperties:ei}){if(!ei||!Bt)return Bt;const _t={},Ri={},Ii={accumulated:null,zoom:0},In={properties:null},kn=Object.keys(ei);for(const xt of kn){const[Pn,$n]=ei[xt],Pr=r.createExpression($n),cr=r.createExpression(typeof Pn=="string"?[Pn,["accumulated"],["get",xt]]:Pn);_t[xt]=Pr.value,Ri[xt]=cr.value}return Bt.map=xt=>{In.properties=xt;const Pn={};for(const $n of kn)Pn[$n]=_t[$n].evaluate(Ii,In);return Pn},Bt.reduce=(xt,Pn)=>{In.properties=Pn;for(const $n of kn)Ii.accumulated=xt[$n],xt[$n]=Ri[$n].evaluate(Ii,In)},Bt}(Ie)).load(Ge.features):function(Bt,ei){return new ln(Bt,ei)}(Ge,Ie.geojsonVtOptions)}catch(Bt){return He(Bt)}this.loaded={};const Ht={};if(gt){const Bt=gt.finish();Bt&&(Ht.resourceTiming={},Ht.resourceTiming[Ie.source]=JSON.parse(JSON.stringify(Bt)))}He(null,Ht)}})}reloadTile(Ie,He){const ct=this.loaded;return ct&&ct[Ie.uid]?super.reloadTile(Ie,He):this.loadTile(Ie,He)}loadGeoJSON(Ie,He){if(Ie.request)return r.getJSON(Ie.request,He);if(typeof Ie.data=="string")try{He(null,JSON.parse(Ie.data))}catch{He(new Error(`Input data given to '${Ie.source}' is not a valid GeoJSON object.`))}else He(new Error(`Input data given to '${Ie.source}' is not a valid GeoJSON object.`));return{cancel:()=>{}}}removeSource(Ie,He){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),He()}getClusterExpansionZoom(Ie,He){try{He(null,this._geoJSONIndex.getClusterExpansionZoom(Ie.clusterId))}catch(ct){He(ct)}}getClusterChildren(Ie,He){try{He(null,this._geoJSONIndex.getChildren(Ie.clusterId))}catch(ct){He(ct)}}getClusterLeaves(Ie,He){try{He(null,this._geoJSONIndex.getLeaves(Ie.clusterId,Ie.limit,Ie.offset))}catch(ct){He(ct)}}}class co{constructor(Ie){this.self=Ie,this.actor=new r.Actor(Ie,this),this.layerIndexes={},this.availableImages={},this.workerSourceTypes={vector:T,geojson:bo},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=(He,ct)=>{if(this.workerSourceTypes[He])throw new Error(`Worker source with name "${He}" already registered.`);this.workerSourceTypes[He]=ct},this.self.registerRTLTextPlugin=He=>{if(r.plugin.isParsed())throw new Error("RTL text plugin already registered.");r.plugin.applyArabicShaping=He.applyArabicShaping,r.plugin.processBidirectionalText=He.processBidirectionalText,r.plugin.processStyledBidirectionalText=He.processStyledBidirectionalText}}setReferrer(Ie,He){this.referrer=He}setImages(Ie,He,ct){this.availableImages[Ie]=He;for(const gt in this.workerSources[Ie]){const Rt=this.workerSources[Ie][gt];for(const Ge in Rt)Rt[Ge].availableImages=He}ct()}setLayers(Ie,He,ct){this.getLayerIndex(Ie).replace(He),ct()}updateLayers(Ie,He,ct){this.getLayerIndex(Ie).update(He.layers,He.removedIds),ct()}loadTile(Ie,He,ct){this.getWorkerSource(Ie,He.type,He.source).loadTile(He,ct)}loadDEMTile(Ie,He,ct){this.getDEMWorkerSource(Ie,He.source).loadTile(He,ct)}reloadTile(Ie,He,ct){this.getWorkerSource(Ie,He.type,He.source).reloadTile(He,ct)}abortTile(Ie,He,ct){this.getWorkerSource(Ie,He.type,He.source).abortTile(He,ct)}removeTile(Ie,He,ct){this.getWorkerSource(Ie,He.type,He.source).removeTile(He,ct)}removeDEMTile(Ie,He){this.getDEMWorkerSource(Ie,He.source).removeTile(He)}removeSource(Ie,He,ct){if(!this.workerSources[Ie]||!this.workerSources[Ie][He.type]||!this.workerSources[Ie][He.type][He.source])return;const gt=this.workerSources[Ie][He.type][He.source];delete this.workerSources[Ie][He.type][He.source],gt.removeSource!==void 0?gt.removeSource(He,ct):ct()}loadWorkerSource(Ie,He,ct){try{this.self.importScripts(He.url),ct()}catch(gt){ct(gt.toString())}}syncRTLPluginState(Ie,He,ct){try{r.plugin.setState(He);const gt=r.plugin.getPluginURL();if(r.plugin.isLoaded()&&!r.plugin.isParsed()&&gt!=null){this.self.importScripts(gt);const Rt=r.plugin.isParsed();ct(Rt?void 0:new Error(`RTL Text Plugin failed to import scripts from ${gt}`),Rt)}}catch(gt){ct(gt.toString())}}getAvailableImages(Ie){let He=this.availableImages[Ie];return He||(He=[]),He}getLayerIndex(Ie){let He=this.layerIndexes[Ie];return He||(He=this.layerIndexes[Ie]=new b),He}getWorkerSource(Ie,He,ct){if(this.workerSources[Ie]||(this.workerSources[Ie]={}),this.workerSources[Ie][He]||(this.workerSources[Ie][He]={}),!this.workerSources[Ie][He][ct]){const gt={send:(Rt,Ge,Ht)=>{this.actor.send(Rt,Ge,Ht,Ie)}};this.workerSources[Ie][He][ct]=new this.workerSourceTypes[He](gt,this.getLayerIndex(Ie),this.getAvailableImages(Ie))}return this.workerSources[Ie][He][ct]}getDEMWorkerSource(Ie,He){return this.demWorkerSources[Ie]||(this.demWorkerSources[Ie]={}),this.demWorkerSources[Ie][He]||(this.demWorkerSources[Ie][He]=new S),this.demWorkerSources[Ie][He]}enforceCacheSizeLimit(Ie,He){r.enforceCacheSizeLimit(He)}}return r.isWorker()&&(self.worker=new co(self)),co}),u(["./shared"],function(r){var h=y;function y(B){return!function(d){return typeof window>"u"||typeof document>"u"?"not a browser":Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray?Function.prototype&&Function.prototype.bind?Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions?"JSON"in window&&"parse"in JSON&&"stringify"in JSON?function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var D,z,W=new Blob([""],{type:"text/javascript"}),ne=URL.createObjectURL(W);try{z=new Worker(ne),D=!0}catch{D=!1}return z&&z.terminate(),URL.revokeObjectURL(ne),D}()?"Uint8ClampedArray"in window?ArrayBuffer.isView?function(){var D=document.createElement("canvas");D.width=D.height=1;var z=D.getContext("2d");if(!z)return!1;var W=z.getImageData(0,0,1,1);return W&&W.width===D.width}()?(b[I=d&&d.failIfMajorPerformanceCaveat]===void 0&&(b[I]=function(D){var z,W=function(ne){var pe=document.createElement("canvas"),ye=Object.create(y.webGLContextAttributes);return ye.failIfMajorPerformanceCaveat=ne,pe.getContext("webgl",ye)||pe.getContext("experimental-webgl",ye)}(D);if(!W)return!1;try{z=W.createShader(W.VERTEX_SHADER)}catch{return!1}return!(!z||W.isContextLost())&&(W.shaderSource(z,"void main() {}"),W.compileShader(z),W.getShaderParameter(z,W.COMPILE_STATUS)===!0)}(I)),b[I]?document.documentMode?"insufficient ECMAScript 6 support":void 0:"insufficient WebGL support"):"insufficient Canvas/getImageData support":"insufficient ArrayBuffer support":"insufficient Uint8ClampedArray support":"insufficient worker support":"insufficient JSON support":"insufficient Object support":"insufficient Function support":"insufficent Array support";var I}(B)}var b={};function v(B,d){if(Array.isArray(B)){if(!Array.isArray(d)||B.length!==d.length)return!1;for(let I=0;I<B.length;I++)if(!v(B[I],d[I]))return!1;return!0}if(typeof B=="object"&&B!==null&&d!==null){if(typeof d!="object"||Object.keys(B).length!==Object.keys(d).length)return!1;for(const I in B)if(!v(B[I],d[I]))return!1;return!0}return B===d}y.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0};class w{static testProp(d){if(!w.docStyle)return d[0];for(let I=0;I<d.length;I++)if(d[I]in w.docStyle)return d[I];return d[0]}static create(d,I,D){const z=window.document.createElement(d);return I!==void 0&&(z.className=I),D&&D.appendChild(z),z}static createNS(d,I){return window.document.createElementNS(d,I)}static disableDrag(){w.docStyle&&w.selectProp&&(w.userSelect=w.docStyle[w.selectProp],w.docStyle[w.selectProp]="none")}static enableDrag(){w.docStyle&&w.selectProp&&(w.docStyle[w.selectProp]=w.userSelect)}static setTransform(d,I){d.style[w.transformProp]=I}static addEventListener(d,I,D,z={}){d.addEventListener(I,D,"passive"in z?z:z.capture)}static removeEventListener(d,I,D,z={}){d.removeEventListener(I,D,"passive"in z?z:z.capture)}static suppressClickInternal(d){d.preventDefault(),d.stopPropagation(),window.removeEventListener("click",w.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",w.suppressClickInternal,!0),window.setTimeout(()=>{window.removeEventListener("click",w.suppressClickInternal,!0)},0)}static mousePos(d,I){const D=d.getBoundingClientRect();return new r.pointGeometry(I.clientX-D.left-d.clientLeft,I.clientY-D.top-d.clientTop)}static touchPos(d,I){const D=d.getBoundingClientRect(),z=[];for(let W=0;W<I.length;W++)z.push(new r.pointGeometry(I[W].clientX-D.left-d.clientLeft,I[W].clientY-D.top-d.clientTop));return z}static mouseButton(d){return d.button}static remove(d){d.parentNode&&d.parentNode.removeChild(d)}}w.docStyle=typeof window<"u"&&window.document&&window.document.documentElement.style,w.selectProp=w.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),w.transformProp=w.testProp(["transform","WebkitTransform"]);class x{constructor(d){this._transformRequestFn=d}transformRequest(d,I){return this._transformRequestFn&&this._transformRequestFn(d,I)||{url:d}}normalizeSpriteURL(d,I,D){const z=function(W){const ne=W.match(C);if(!ne)throw new Error(`Unable to parse URL "${W}"`);return{protocol:ne[1],authority:ne[2],path:ne[3]||"/",params:ne[4]?ne[4].split("&"):[]}}(d);return z.path+=`${I}${D}`,function(W){const ne=W.params.length?`?${W.params.join("&")}`:"";return`${W.protocol}://${W.authority}${W.path}${ne}`}(z)}setTransformRequest(d){this._transformRequestFn=d}}const C=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;class T{constructor(d,I,D,z){this.context=d,this.format=D,this.texture=d.gl.createTexture(),this.update(I,z)}update(d,I,D){const{width:z,height:W}=d,ne=!(this.size&&this.size[0]===z&&this.size[1]===W||D),{context:pe}=this,{gl:ye}=pe;if(this.useMipmap=Boolean(I&&I.useMipmap),ye.bindTexture(ye.TEXTURE_2D,this.texture),pe.pixelStoreUnpackFlipY.set(!1),pe.pixelStoreUnpack.set(1),pe.pixelStoreUnpackPremultiplyAlpha.set(this.format===ye.RGBA&&(!I||I.premultiply!==!1)),ne)this.size=[z,W],d instanceof HTMLImageElement||d instanceof HTMLCanvasElement||d instanceof HTMLVideoElement||d instanceof ImageData||r.isImageBitmap(d)?ye.texImage2D(ye.TEXTURE_2D,0,this.format,this.format,ye.UNSIGNED_BYTE,d):ye.texImage2D(ye.TEXTURE_2D,0,this.format,z,W,0,this.format,ye.UNSIGNED_BYTE,d.data);else{const{x:Se,y:ze}=D||{x:0,y:0};d instanceof HTMLImageElement||d instanceof HTMLCanvasElement||d instanceof HTMLVideoElement||d instanceof ImageData||r.isImageBitmap(d)?ye.texSubImage2D(ye.TEXTURE_2D,0,Se,ze,ye.RGBA,ye.UNSIGNED_BYTE,d):ye.texSubImage2D(ye.TEXTURE_2D,0,Se,ze,z,W,ye.RGBA,ye.UNSIGNED_BYTE,d.data)}this.useMipmap&&this.isSizePowerOfTwo()&&ye.generateMipmap(ye.TEXTURE_2D)}bind(d,I,D){const{context:z}=this,{gl:W}=z;W.bindTexture(W.TEXTURE_2D,this.texture),D!==W.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(D=W.LINEAR),d!==this.filter&&(W.texParameteri(W.TEXTURE_2D,W.TEXTURE_MAG_FILTER,d),W.texParameteri(W.TEXTURE_2D,W.TEXTURE_MIN_FILTER,D||d),this.filter=d),I!==this.wrap&&(W.texParameteri(W.TEXTURE_2D,W.TEXTURE_WRAP_S,I),W.texParameteri(W.TEXTURE_2D,W.TEXTURE_WRAP_T,I),this.wrap=I)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:d}=this.context;d.deleteTexture(this.texture),this.texture=null}}function S(B){const{userImage:d}=B;return!!(d&&d.render&&d.render())&&(B.data.replace(new Uint8Array(d.data.buffer)),!0)}class M extends r.Evented{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new r.RGBAImage({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(d){if(this.loaded!==d&&(this.loaded=d,d)){for(const{ids:I,callback:D}of this.requestors)this._notify(I,D);this.requestors=[]}}getImage(d){return this.images[d]}addImage(d,I){if(this.images[d])throw new Error(`Image id ${d} already exist, use updateImage instead`);this._validate(d,I)&&(this.images[d]=I)}_validate(d,I){let D=!0;return this._validateStretch(I.stretchX,I.data&&I.data.width)||(this.fire(new r.ErrorEvent(new Error(`Image "${d}" has invalid "stretchX" value`))),D=!1),this._validateStretch(I.stretchY,I.data&&I.data.height)||(this.fire(new r.ErrorEvent(new Error(`Image "${d}" has invalid "stretchY" value`))),D=!1),this._validateContent(I.content,I)||(this.fire(new r.ErrorEvent(new Error(`Image "${d}" has invalid "content" value`))),D=!1),D}_validateStretch(d,I){if(!d)return!0;let D=0;for(const z of d){if(z[0]<D||z[1]<z[0]||I<z[1])return!1;D=z[1]}return!0}_validateContent(d,I){return!(d&&(d.length!==4||d[0]<0||I.data.width<d[0]||d[1]<0||I.data.height<d[1]||d[2]<0||I.data.width<d[2]||d[3]<0||I.data.height<d[3]||d[2]<d[0]||d[3]<d[1]))}updateImage(d,I){const D=this.images[d];if(D.data.width!==I.data.width||D.data.height!==I.data.height)throw new Error(`size mismatch between old image (${D.data.width}x${D.data.height}) and new image (${I.data.width}x${I.data.height}).`);I.version=D.version+1,this.images[d]=I,this.updatedImages[d]=!0}removeImage(d){const I=this.images[d];delete this.images[d],delete this.patterns[d],I.userImage&&I.userImage.onRemove&&I.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(d,I){let D=!0;if(!this.isLoaded())for(const z of d)this.images[z]||(D=!1);this.isLoaded()||D?this._notify(d,I):this.requestors.push({ids:d,callback:I})}_notify(d,I){const D={};for(const z of d){this.images[z]||this.fire(new r.Event("styleimagemissing",{id:z}));const W=this.images[z];W?D[z]={data:W.data.clone(),pixelRatio:W.pixelRatio,sdf:W.sdf,version:W.version,stretchX:W.stretchX,stretchY:W.stretchY,content:W.content,hasRenderCallback:Boolean(W.userImage&&W.userImage.render)}:r.warnOnce(`Image "${z}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}I(null,D)}getPixelSize(){const{width:d,height:I}=this.atlasImage;return{width:d,height:I}}getPattern(d){const I=this.patterns[d],D=this.getImage(d);if(!D)return null;if(I&&I.position.version===D.version)return I.position;if(I)I.position.version=D.version;else{const z={w:D.data.width+2,h:D.data.height+2,x:0,y:0},W=new r.ImagePosition(z,D);this.patterns[d]={bin:z,position:W}}return this._updatePatternAtlas(),this.patterns[d].position}bind(d){const I=d.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new T(d,this.atlasImage,I.RGBA),this.atlasTexture.bind(I.LINEAR,I.CLAMP_TO_EDGE)}_updatePatternAtlas(){const d=[];for(const W in this.patterns)d.push(this.patterns[W].bin);const{w:I,h:D}=r.potpack(d),z=this.atlasImage;z.resize({width:I||1,height:D||1});for(const W in this.patterns){const{bin:ne}=this.patterns[W],pe=ne.x+1,ye=ne.y+1,Se=this.images[W].data,ze=Se.width,Qe=Se.height;r.RGBAImage.copy(Se,z,{x:0,y:0},{x:pe,y:ye},{width:ze,height:Qe}),r.RGBAImage.copy(Se,z,{x:0,y:Qe-1},{x:pe,y:ye-1},{width:ze,height:1}),r.RGBAImage.copy(Se,z,{x:0,y:0},{x:pe,y:ye+Qe},{width:ze,height:1}),r.RGBAImage.copy(Se,z,{x:ze-1,y:0},{x:pe-1,y:ye},{width:1,height:Qe}),r.RGBAImage.copy(Se,z,{x:0,y:0},{x:pe+ze,y:ye},{width:1,height:Qe})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(d){for(const I of d){if(this.callbackDispatchedThisFrame[I])continue;this.callbackDispatchedThisFrame[I]=!0;const D=this.images[I];D||r.warnOnce(`Image with ID: "${I}" was not found`),S(D)&&this.updateImage(I,D)}}}const O=1e20;function V(B,d,I,D,z,W,ne,pe,ye){for(let Se=d;Se<d+D;Se++)X(B,I*W+Se,W,z,ne,pe,ye);for(let Se=I;Se<I+z;Se++)X(B,Se*W+d,1,D,ne,pe,ye)}function X(B,d,I,D,z,W,ne){W[0]=0,ne[0]=-O,ne[1]=O,z[0]=B[d];for(let pe=1,ye=0,Se=0;pe<D;pe++){z[pe]=B[d+pe*I];const ze=pe*pe;do{const Qe=W[ye];Se=(z[pe]-z[Qe]+ze-Qe*Qe)/(pe-Qe)/2}while(Se<=ne[ye]&&--ye>-1);ye++,W[ye]=pe,ne[ye]=Se,ne[ye+1]=O}for(let pe=0,ye=0;pe<D;pe++){for(;ne[ye+1]<pe;)ye++;const Se=W[ye],ze=pe-Se;B[d+pe*I]=z[Se]+ze*ze}}class Z{constructor(d,I){this.requestManager=d,this.localIdeographFontFamily=I,this.entries={}}setURL(d){this.url=d}getGlyphs(d,I){const D=[];for(const z in d)for(const W of d[z])D.push({stack:z,id:W});r.asyncAll(D,({stack:z,id:W},ne)=>{let pe=this.entries[z];pe||(pe=this.entries[z]={glyphs:{},requests:{},ranges:{}});let ye=pe.glyphs[W];if(ye!==void 0)return void ne(null,{stack:z,id:W,glyph:ye});if(ye=this._tinySDF(pe,z,W),ye)return pe.glyphs[W]=ye,void ne(null,{stack:z,id:W,glyph:ye});const Se=Math.floor(W/256);if(256*Se>65535)return void ne(new Error("glyphs > 65535 not supported"));if(pe.ranges[Se])return void ne(null,{stack:z,id:W,glyph:ye});let ze=pe.requests[Se];ze||(ze=pe.requests[Se]=[],Z.loadGlyphRange(z,Se,this.url,this.requestManager,(Qe,st)=>{if(st){for(const Mt in st)this._doesCharSupportLocalGlyph(+Mt)||(pe.glyphs[+Mt]=st[+Mt]);pe.ranges[Se]=!0}for(const Mt of ze)Mt(Qe,st);delete pe.requests[Se]})),ze.push((Qe,st)=>{Qe?ne(Qe):st&&ne(null,{stack:z,id:W,glyph:st[W]||null})})},(z,W)=>{if(z)I(z);else if(W){const ne={};for(const{stack:pe,id:ye,glyph:Se}of W)(ne[pe]||(ne[pe]={}))[ye]=Se&&{id:Se.id,bitmap:Se.bitmap.clone(),metrics:Se.metrics};I(null,ne)}})}_doesCharSupportLocalGlyph(d){return!!this.localIdeographFontFamily&&(r.unicodeBlockLookup["CJK Unified Ideographs"](d)||r.unicodeBlockLookup["Hangul Syllables"](d)||r.unicodeBlockLookup.Hiragana(d)||r.unicodeBlockLookup.Katakana(d))}_tinySDF(d,I,D){const z=this.localIdeographFontFamily;if(!z||!this._doesCharSupportLocalGlyph(D))return;let W=d.tinySDF;if(!W){let pe="400";/bold/i.test(I)?pe="900":/medium/i.test(I)?pe="500":/light/i.test(I)&&(pe="200"),W=d.tinySDF=new Z.TinySDF({fontSize:24,buffer:3,radius:8,cutoff:.25,fontFamily:z,fontWeight:pe})}const ne=W.draw(String.fromCharCode(D));return{id:D,bitmap:new r.AlphaImage({width:ne.width||30,height:ne.height||30},ne.data),metrics:{width:ne.glyphWidth||24,height:ne.glyphHeight||24,left:ne.glyphLeft||0,top:ne.glyphTop-27||-8,advance:ne.glyphAdvance||24}}}}Z.loadGlyphRange=function(B,d,I,D,z){const W=256*d,ne=W+255,pe=D.transformRequest(I.replace("{fontstack}",B).replace("{range}",`${W}-${ne}`),r.ResourceType.Glyphs);r.getArrayBuffer(pe,(ye,Se)=>{if(ye)z(ye);else if(Se){const ze={};for(const Qe of r.parseGlyphPbf(Se))ze[Qe.id]=Qe;z(null,ze)}})},Z.TinySDF=class{constructor({fontSize:B=24,buffer:d=3,radius:I=8,cutoff:D=.25,fontFamily:z="sans-serif",fontWeight:W="normal",fontStyle:ne="normal"}={}){this.buffer=d,this.cutoff=D,this.radius=I;const pe=this.size=B+4*d,ye=this._createCanvas(pe),Se=this.ctx=ye.getContext("2d",{willReadFrequently:!0});Se.font=`${ne} ${W} ${B}px ${z}`,Se.textBaseline="alphabetic",Se.textAlign="left",Se.fillStyle="black",this.gridOuter=new Float64Array(pe*pe),this.gridInner=new Float64Array(pe*pe),this.f=new Float64Array(pe),this.z=new Float64Array(pe+1),this.v=new Uint16Array(pe)}_createCanvas(B){const d=document.createElement("canvas");return d.width=d.height=B,d}draw(B){const{width:d,actualBoundingBoxAscent:I,actualBoundingBoxDescent:D,actualBoundingBoxLeft:z,actualBoundingBoxRight:W}=this.ctx.measureText(B),ne=Math.ceil(I),pe=Math.min(this.size-this.buffer,Math.ceil(W-z)),ye=Math.min(this.size-this.buffer,ne+Math.ceil(D)),Se=pe+2*this.buffer,ze=ye+2*this.buffer,Qe=Math.max(Se*ze,0),st=new Uint8ClampedArray(Qe),Mt={data:st,width:Se,height:ze,glyphWidth:pe,glyphHeight:ye,glyphTop:ne,glyphLeft:0,glyphAdvance:d};if(pe===0||ye===0)return Mt;const{ctx:St,buffer:It,gridInner:ri,gridOuter:fi}=this;St.clearRect(It,It,pe,ye),St.fillText(B,It,It+ne);const Ai=St.getImageData(It,It,pe,ye);fi.fill(O,0,Qe),ri.fill(0,0,Qe);for(let jt=0;jt<ye;jt++)for(let Pi=0;Pi<pe;Pi++){const Ei=Ai.data[4*(jt*pe+Pi)+3]/255;if(Ei===0)continue;const Vi=(jt+It)*Se+Pi+It;if(Ei===1)fi[Vi]=0,ri[Vi]=O;else{const Ni=.5-Ei;fi[Vi]=Ni>0?Ni*Ni:0,ri[Vi]=Ni<0?Ni*Ni:0}}V(fi,0,0,Se,ze,Se,this.f,this.v,this.z),V(ri,It,It,pe,ye,Se,this.f,this.v,this.z);for(let jt=0;jt<Qe;jt++){const Pi=Math.sqrt(fi[jt])-Math.sqrt(ri[jt]);st[jt]=Math.round(255-255*(Pi/this.radius+this.cutoff))}return Mt}};const ee=new r.Properties({anchor:new r.DataConstantProperty(r.spec.light.anchor),position:new class{constructor(){this.specification=r.spec.light.position}possiblyEvaluate(B,d){return r.sphericalToCartesian(B.expression.evaluate(d))}interpolate(B,d,I){return{x:r.number(B.x,d.x,I),y:r.number(B.y,d.y,I),z:r.number(B.z,d.z,I)}}},color:new r.DataConstantProperty(r.spec.light.color),intensity:new r.DataConstantProperty(r.spec.light.intensity)}),J="-transition";class ie extends r.Evented{constructor(d){super(),this._transitionable=new r.Transitionable(ee),this.setLight(d),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(d,I={}){if(!this._validate(r.validateLight,d,I))for(const D in d){const z=d[D];D.endsWith(J)?this._transitionable.setTransition(D.slice(0,-J.length),z):this._transitionable.setValue(D,z)}}updateTransitions(d){this._transitioning=this._transitionable.transitioned(d,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(d){this.properties=this._transitioning.possiblyEvaluate(d)}_validate(d,I,D){return(!D||D.validate!==!1)&&r.emitValidationErrors(this,d.call(r.validateStyle,r.extend({value:I,style:{glyphs:!0,sprite:!0},styleSpec:r.spec})))}}class ke{constructor(d,I){this.width=d,this.height=I,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(d,I){const D=d.join(",")+String(I);return this.dashEntry[D]||(this.dashEntry[D]=this.addDash(d,I)),this.dashEntry[D]}getDashRanges(d,I,D){const z=[];let W=d.length%2==1?-d[d.length-1]*D:0,ne=d[0]*D,pe=!0;z.push({left:W,right:ne,isDash:pe,zeroLength:d[0]===0});let ye=d[0];for(let Se=1;Se<d.length;Se++){pe=!pe;const ze=d[Se];W=ye*D,ye+=ze,ne=ye*D,z.push({left:W,right:ne,isDash:pe,zeroLength:ze===0})}return z}addRoundDash(d,I,D){const z=I/2;for(let W=-D;W<=D;W++){const ne=this.width*(this.nextRow+D+W);let pe=0,ye=d[pe];for(let Se=0;Se<this.width;Se++){Se/ye.right>1&&(ye=d[++pe]);const ze=Math.abs(Se-ye.left),Qe=Math.abs(Se-ye.right),st=Math.min(ze,Qe);let Mt;const St=W/D*(z+1);if(ye.isDash){const It=z-Math.abs(St);Mt=Math.sqrt(st*st+It*It)}else Mt=z-Math.sqrt(st*st+St*St);this.data[ne+Se]=Math.max(0,Math.min(255,Mt+128))}}}addRegularDash(d){for(let pe=d.length-1;pe>=0;--pe){const ye=d[pe],Se=d[pe+1];ye.zeroLength?d.splice(pe,1):Se&&Se.isDash===ye.isDash&&(Se.left=ye.left,d.splice(pe,1))}const I=d[0],D=d[d.length-1];I.isDash===D.isDash&&(I.left=D.left-this.width,D.right=I.right+this.width);const z=this.width*this.nextRow;let W=0,ne=d[W];for(let pe=0;pe<this.width;pe++){pe/ne.right>1&&(ne=d[++W]);const ye=Math.abs(pe-ne.left),Se=Math.abs(pe-ne.right),ze=Math.min(ye,Se);this.data[z+pe]=Math.max(0,Math.min(255,(ne.isDash?ze:-ze)+128))}}addDash(d,I){const D=I?7:0,z=2*D+1;if(this.nextRow+z>this.height)return r.warnOnce("LineAtlas out of space"),null;let W=0;for(let pe=0;pe<d.length;pe++)W+=d[pe];if(W!==0){const pe=this.width/W,ye=this.getDashRanges(d,this.width,pe);I?this.addRoundDash(ye,pe,D):this.addRegularDash(ye)}const ne={y:(this.nextRow+D+.5)/this.height,height:2*D/this.height,width:W};return this.nextRow+=z,this.dirty=!0,ne}bind(d){const I=d.gl;this.texture?(I.bindTexture(I.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,I.texSubImage2D(I.TEXTURE_2D,0,0,0,this.width,this.height,I.ALPHA,I.UNSIGNED_BYTE,this.data))):(this.texture=I.createTexture(),I.bindTexture(I.TEXTURE_2D,this.texture),I.texParameteri(I.TEXTURE_2D,I.TEXTURE_WRAP_S,I.REPEAT),I.texParameteri(I.TEXTURE_2D,I.TEXTURE_WRAP_T,I.REPEAT),I.texParameteri(I.TEXTURE_2D,I.TEXTURE_MIN_FILTER,I.LINEAR),I.texParameteri(I.TEXTURE_2D,I.TEXTURE_MAG_FILTER,I.LINEAR),I.texImage2D(I.TEXTURE_2D,0,I.ALPHA,this.width,this.height,0,I.ALPHA,I.UNSIGNED_BYTE,this.data))}}class Le{constructor(d,I){this.workerPool=d,this.actors=[],this.currentActor=0,this.id=r.uniqueId();const D=this.workerPool.acquire(this.id);for(let z=0;z<D.length;z++){const W=new Le.Actor(D[z],I,this.id);W.name=`Worker ${z}`,this.actors.push(W)}if(!this.actors.length)throw new Error("No actors found")}broadcast(d,I,D){r.asyncAll(this.actors,(z,W)=>{z.send(d,I,W)},D=D||function(){})}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(){this.actors.forEach(d=>{d.remove()}),this.actors=[],this.workerPool.release(this.id)}}function fe(B,d,I){const D=function(z,W){if(z)return I(z);if(W){const ne=r.pick(r.extend(W,B),["tiles","minzoom","maxzoom","attribution","bounds","scheme","tileSize","encoding"]);W.vector_layers&&(ne.vectorLayers=W.vector_layers,ne.vectorLayerIds=ne.vectorLayers.map(pe=>pe.id)),I(null,ne)}};return B.url?r.getJSON(d.transformRequest(B.url,r.ResourceType.Source),D):r.exported.frame(()=>D(null,B))}Le.Actor=r.Actor;class Te{constructor(d,I,D){this.bounds=r.LngLatBounds.convert(this.validateBounds(d)),this.minzoom=I||0,this.maxzoom=D||24}validateBounds(d){return Array.isArray(d)&&d.length===4?[Math.max(-180,d[0]),Math.max(-90,d[1]),Math.min(180,d[2]),Math.min(90,d[3])]:[-180,-90,180,90]}contains(d){const I=Math.pow(2,d.z),D=Math.floor(r.mercatorXfromLng(this.bounds.getWest())*I),z=Math.floor(r.mercatorYfromLat(this.bounds.getNorth())*I),W=Math.ceil(r.mercatorXfromLng(this.bounds.getEast())*I),ne=Math.ceil(r.mercatorYfromLat(this.bounds.getSouth())*I);return d.x>=D&&d.x<W&&d.y>=z&&d.y<ne}}class _e extends r.Evented{constructor(d,I,D,z){if(super(),this.id=d,this.dispatcher=D,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,r.extend(this,r.pick(I,["url","scheme","tileSize","promoteId"])),this._options=r.extend({type:"vector"},I),this._collectResourceTiming=I.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(z)}load(){this._loaded=!1,this.fire(new r.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=fe(this._options,this.map._requestManager,(d,I)=>{this._tileJSONRequest=null,this._loaded=!0,this.map.style.sourceCaches[this.id].clearTiles(),d?this.fire(new r.ErrorEvent(d)):I&&(r.extend(this,I),I.bounds&&(this.tileBounds=new Te(I.bounds,this.minzoom,this.maxzoom)),this.fire(new r.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new r.Event("data",{dataType:"source",sourceDataType:"content"})))})}loaded(){return this._loaded}hasTile(d){return!this.tileBounds||this.tileBounds.contains(d.canonical)}onAdd(d){this.map=d,this.load()}setSourceProperty(d){this._tileJSONRequest&&this._tileJSONRequest.cancel(),d(),this.load()}setTiles(d){return this.setSourceProperty(()=>{this._options.tiles=d}),this}setUrl(d){return this.setSourceProperty(()=>{this.url=d,this._options.url=d}),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}serialize(){return r.extend({},this._options)}loadTile(d,I){const D=d.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),z={request:this.map._requestManager.transformRequest(D,r.ResourceType.Tile),uid:d.uid,tileID:d.tileID,zoom:d.tileID.overscaledZ,tileSize:this.tileSize*d.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};function W(ne,pe){return delete d.request,d.aborted?I(null):ne&&ne.status!==404?I(ne):(pe&&pe.resourceTiming&&(d.resourceTiming=pe.resourceTiming),this.map._refreshExpiredTiles&&pe&&d.setExpiryData(pe),d.loadVectorData(pe,this.map.painter),r.cacheEntryPossiblyAdded(this.dispatcher),I(null),void(d.reloadCallback&&(this.loadTile(d,d.reloadCallback),d.reloadCallback=null)))}z.request.collectResourceTiming=this._collectResourceTiming,d.actor&&d.state!=="expired"?d.state==="loading"?d.reloadCallback=I:d.request=d.actor.send("reloadTile",z,W.bind(this)):(d.actor=this.dispatcher.getActor(),d.request=d.actor.send("loadTile",z,W.bind(this)))}abortTile(d){d.request&&(d.request.cancel(),delete d.request),d.actor&&d.actor.send("abortTile",{uid:d.uid,type:this.type,source:this.id},void 0)}unloadTile(d){d.unloadVectorData(),d.actor&&d.actor.send("removeTile",{uid:d.uid,type:this.type,source:this.id},void 0)}hasTransition(){return!1}}class ve extends r.Evented{constructor(d,I,D,z){super(),this.id=d,this.dispatcher=D,this.setEventedParent(z),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=r.extend({type:"raster"},I),r.extend(this,r.pick(I,["url","scheme","tileSize"]))}load(){this._loaded=!1,this.fire(new r.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=fe(this._options,this.map._requestManager,(d,I)=>{this._tileJSONRequest=null,this._loaded=!0,d?this.fire(new r.ErrorEvent(d)):I&&(r.extend(this,I),I.bounds&&(this.tileBounds=new Te(I.bounds,this.minzoom,this.maxzoom)),this.fire(new r.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new r.Event("data",{dataType:"source",sourceDataType:"content"})))})}loaded(){return this._loaded}onAdd(d){this.map=d,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}serialize(){return r.extend({},this._options)}hasTile(d){return!this.tileBounds||this.tileBounds.contains(d.canonical)}loadTile(d,I){const D=d.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);d.request=r.getImage(this.map._requestManager.transformRequest(D,r.ResourceType.Tile),(z,W,ne)=>{if(delete d.request,d.aborted)d.state="unloaded",I(null);else if(z)d.state="errored",I(z);else if(W){this.map._refreshExpiredTiles&&d.setExpiryData(ne);const pe=this.map.painter.context,ye=pe.gl;d.texture=this.map.painter.getTileTexture(W.width),d.texture?d.texture.update(W,{useMipmap:!0}):(d.texture=new T(pe,W,ye.RGBA,{useMipmap:!0}),d.texture.bind(ye.LINEAR,ye.CLAMP_TO_EDGE,ye.LINEAR_MIPMAP_NEAREST),pe.extTextureFilterAnisotropic&&ye.texParameterf(ye.TEXTURE_2D,pe.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,pe.extTextureFilterAnisotropicMax)),d.state="loaded",r.cacheEntryPossiblyAdded(this.dispatcher),I(null)}})}abortTile(d,I){d.request&&(d.request.cancel(),delete d.request),I()}unloadTile(d,I){d.texture&&this.map.painter.saveTileTexture(d.texture),I()}hasTransition(){return!1}}let rt;class nt extends ve{constructor(d,I,D,z){super(d,I,D,z),this.type="raster-dem",this.maxzoom=22,this._options=r.extend({type:"raster-dem"},I),this.encoding=I.encoding||"mapbox"}serialize(){return{type:"raster-dem",url:this.url,tileSize:this.tileSize,tiles:this.tiles,bounds:this.bounds,encoding:this.encoding}}loadTile(d,I){const D=d.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);function z(W,ne){W&&(d.state="errored",I(W)),ne&&(d.dem=ne,d.needsHillshadePrepare=!0,d.needsTerrainPrepare=!0,d.state="loaded",I(null))}d.request=r.getImage(this.map._requestManager.transformRequest(D,r.ResourceType.Tile),function(W,ne){if(delete d.request,d.aborted)d.state="unloaded",I(null);else if(W)d.state="errored",I(W);else if(ne){this.map._refreshExpiredTiles&&d.setExpiryData(ne),delete ne.cacheControl,delete ne.expires;const pe=r.isImageBitmap(ne)&&(rt==null&&(rt=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")&&typeof createImageBitmap=="function"),rt)?ne:r.exported.getImageData(ne,1),ye={uid:d.uid,coord:d.tileID,source:this.id,rawImageData:pe,encoding:this.encoding};d.actor&&d.state!=="expired"||(d.actor=this.dispatcher.getActor(),d.actor.send("loadDEMTile",ye,z.bind(this)))}}.bind(this)),d.neighboringTiles=this._getNeighboringTiles(d.tileID)}_getNeighboringTiles(d){const I=d.canonical,D=Math.pow(2,I.z),z=(I.x-1+D)%D,W=I.x===0?d.wrap-1:d.wrap,ne=(I.x+1+D)%D,pe=I.x+1===D?d.wrap+1:d.wrap,ye={};return ye[new r.OverscaledTileID(d.overscaledZ,W,I.z,z,I.y).key]={backfilled:!1},ye[new r.OverscaledTileID(d.overscaledZ,pe,I.z,ne,I.y).key]={backfilled:!1},I.y>0&&(ye[new r.OverscaledTileID(d.overscaledZ,W,I.z,z,I.y-1).key]={backfilled:!1},ye[new r.OverscaledTileID(d.overscaledZ,d.wrap,I.z,I.x,I.y-1).key]={backfilled:!1},ye[new r.OverscaledTileID(d.overscaledZ,pe,I.z,ne,I.y-1).key]={backfilled:!1}),I.y+1<D&&(ye[new r.OverscaledTileID(d.overscaledZ,W,I.z,z,I.y+1).key]={backfilled:!1},ye[new r.OverscaledTileID(d.overscaledZ,d.wrap,I.z,I.x,I.y+1).key]={backfilled:!1},ye[new r.OverscaledTileID(d.overscaledZ,pe,I.z,ne,I.y+1).key]={backfilled:!1}),ye}unloadTile(d){d.demTexture&&this.map.painter.saveTileTexture(d.demTexture),d.fbo&&(d.fbo.destroy(),delete d.fbo),d.dem&&delete d.dem,delete d.neighboringTiles,d.state="unloaded",d.actor&&d.actor.send("removeDEMTile",{uid:d.uid,source:this.id})}}class Tt extends r.Evented{constructor(d,I,D,z){super(),this.id=d,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._pendingLoads=0,this.actor=D.getActor(),this.setEventedParent(z),this._data=I.data,this._options=r.extend({},I),this._collectResourceTiming=I.collectResourceTiming,I.maxzoom!==void 0&&(this.maxzoom=I.maxzoom),I.type&&(this.type=I.type),I.attribution&&(this.attribution=I.attribution),this.promoteId=I.promoteId;const W=r.EXTENT/this.tileSize;this.workerOptions=r.extend({source:this.id,cluster:I.cluster||!1,geojsonVtOptions:{buffer:(I.buffer!==void 0?I.buffer:128)*W,tolerance:(I.tolerance!==void 0?I.tolerance:.375)*W,extent:r.EXTENT,maxZoom:this.maxzoom,lineMetrics:I.lineMetrics||!1,generateId:I.generateId||!1},superclusterOptions:{maxZoom:I.clusterMaxZoom!==void 0?I.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,I.clusterMinPoints||2),extent:r.EXTENT,radius:(I.clusterRadius||50)*W,log:!1,generateId:I.generateId||!1},clusterProperties:I.clusterProperties,filter:I.filter},I.workerOptions)}load(){this._updateWorkerData("metadata")}onAdd(d){this.map=d,this.load()}setData(d){return this._data=d,this._updateWorkerData("content"),this}getClusterExpansionZoom(d,I){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:d,source:this.id},I),this}getClusterChildren(d,I){return this.actor.send("geojson.getClusterChildren",{clusterId:d,source:this.id},I),this}getClusterLeaves(d,I,D,z){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:d,limit:I,offset:D},z),this}_updateWorkerData(d){const I=r.extend({},this.workerOptions),D=this._data;typeof D=="string"?(I.request=this.map._requestManager.transformRequest(r.exported.resolveURL(D),r.ResourceType.Source),I.request.collectResourceTiming=this._collectResourceTiming):I.data=JSON.stringify(D),this._pendingLoads++,this.fire(new r.Event("dataloading",{dataType:"source"})),this.actor.send(`${this.type}.loadData`,I,(z,W)=>{if(this._pendingLoads--,this._removed||W&&W.abandoned)return void this.fire(new r.Event("dataabort",{dataType:"source",sourceDataType:d}));let ne=null;if(W&&W.resourceTiming&&W.resourceTiming[this.id]&&(ne=W.resourceTiming[this.id].slice(0)),z)return void this.fire(new r.ErrorEvent(z));const pe={dataType:"source",sourceDataType:d};this._collectResourceTiming&&ne&&ne.length>0&&r.extend(pe,{resourceTiming:ne}),this.fire(new r.Event("data",pe))})}loaded(){return this._pendingLoads===0}loadTile(d,I){const D=d.actor?"reloadTile":"loadTile";d.actor=this.actor;const z={type:this.type,uid:d.uid,tileID:d.tileID,zoom:d.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};d.request=this.actor.send(D,z,(W,ne)=>(delete d.request,d.unloadVectorData(),d.aborted?I(null):W?I(W):(d.loadVectorData(ne,this.map.painter,D==="reloadTile"),I(null))))}abortTile(d){d.request&&(d.request.cancel(),delete d.request),d.aborted=!0}unloadTile(d){d.unloadVectorData(),this.actor.send("removeTile",{uid:d.uid,type:this.type,source:this.id})}onRemove(){this._removed=!0,this.actor.send("removeSource",{type:this.type,source:this.id})}serialize(){return r.extend({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}}var We=r.createLayout([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class be extends r.Evented{constructor(d,I,D,z){super(),this.id=d,this.dispatcher=D,this.coordinates=I.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(z),this.options=I}load(d,I){this._loaded=!1,this.fire(new r.Event("dataloading",{dataType:"source"})),this.url=this.options.url,r.getImage(this.map._requestManager.transformRequest(this.url,r.ResourceType.Image),(D,z)=>{this._loaded=!0,D?this.fire(new r.ErrorEvent(D)):z&&(this.image=z,d&&(this.coordinates=d),I&&I(),this._finishLoading())})}loaded(){return this._loaded}updateImage(d){return this.image&&d.url?(this.options.url=d.url,this.load(d.coordinates,()=>{this.texture=null}),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new r.Event("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(d){this.map=d,this.load()}setCoordinates(d){this.coordinates=d;const I=d.map(r.MercatorCoordinate.fromLngLat);this.tileID=function(z){let W=1/0,ne=1/0,pe=-1/0,ye=-1/0;for(const st of z)W=Math.min(W,st.x),ne=Math.min(ne,st.y),pe=Math.max(pe,st.x),ye=Math.max(ye,st.y);const Se=Math.max(pe-W,ye-ne),ze=Math.max(0,Math.floor(-Math.log(Se)/Math.LN2)),Qe=Math.pow(2,ze);return new r.CanonicalTileID(ze,Math.floor((W+pe)/2*Qe),Math.floor((ne+ye)/2*Qe))}(I),this.minzoom=this.maxzoom=this.tileID.z;const D=I.map(z=>this.tileID.getTilePoint(z)._round());return this._boundsArray=new r.RasterBoundsArray,this._boundsArray.emplaceBack(D[0].x,D[0].y,0,0),this._boundsArray.emplaceBack(D[1].x,D[1].y,r.EXTENT,0),this._boundsArray.emplaceBack(D[3].x,D[3].y,0,r.EXTENT),this._boundsArray.emplaceBack(D[2].x,D[2].y,r.EXTENT,r.EXTENT),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new r.Event("data",{dataType:"source",sourceDataType:"content"})),this}prepare(){if(Object.keys(this.tiles).length===0||!this.image)return;const d=this.map.painter.context,I=d.gl;this.boundsBuffer||(this.boundsBuffer=d.createVertexBuffer(this._boundsArray,We.members)),this.boundsSegments||(this.boundsSegments=r.SegmentVector.simpleSegment(0,0,4,2)),this.texture||(this.texture=new T(d,this.image,I.RGBA),this.texture.bind(I.LINEAR,I.CLAMP_TO_EDGE));for(const D in this.tiles){const z=this.tiles[D];z.state!=="loaded"&&(z.state="loaded",z.texture=this.texture)}}loadTile(d,I){this.tileID&&this.tileID.equals(d.tileID.canonical)?(this.tiles[String(d.tileID.wrap)]=d,d.buckets={},I(null)):(d.state="errored",I(null))}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}}class Ce extends be{constructor(d,I,D,z){super(d,I,D,z),this.roundZoom=!0,this.type="video",this.options=I}load(){this._loaded=!1;const d=this.options;this.urls=[];for(const I of d.urls)this.urls.push(this.map._requestManager.transformRequest(I,r.ResourceType.Source).url);r.getVideo(this.urls,(I,D)=>{this._loaded=!0,I?this.fire(new r.ErrorEvent(I)):D&&(this.video=D,this.video.loop=!0,this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading())})}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(d){if(this.video){const I=this.video.seekable;d<I.start(0)||d>I.end(0)?this.fire(new r.ErrorEvent(new r.ValidationError(`sources.${this.id}`,null,`Playback for this video can be set only between the ${I.start(0)} and ${I.end(0)}-second mark.`))):this.video.currentTime=d}}getVideo(){return this.video}onAdd(d){this.map||(this.map=d,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const d=this.map.painter.context,I=d.gl;this.boundsBuffer||(this.boundsBuffer=d.createVertexBuffer(this._boundsArray,We.members)),this.boundsSegments||(this.boundsSegments=r.SegmentVector.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(I.LINEAR,I.CLAMP_TO_EDGE),I.texSubImage2D(I.TEXTURE_2D,0,0,0,I.RGBA,I.UNSIGNED_BYTE,this.video)):(this.texture=new T(d,this.video,I.RGBA),this.texture.bind(I.LINEAR,I.CLAMP_TO_EDGE));for(const D in this.tiles){const z=this.tiles[D];z.state!=="loaded"&&(z.state="loaded",z.texture=this.texture)}}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}}class Be extends be{constructor(d,I,D,z){super(d,I,D,z),I.coordinates?Array.isArray(I.coordinates)&&I.coordinates.length===4&&!I.coordinates.some(W=>!Array.isArray(W)||W.length!==2||W.some(ne=>typeof ne!="number"))||this.fire(new r.ErrorEvent(new r.ValidationError(`sources.${d}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new r.ErrorEvent(new r.ValidationError(`sources.${d}`,null,'missing required property "coordinates"'))),I.animate&&typeof I.animate!="boolean"&&this.fire(new r.ErrorEvent(new r.ValidationError(`sources.${d}`,null,'optional "animate" property must be a boolean value'))),I.canvas?typeof I.canvas=="string"||I.canvas instanceof HTMLCanvasElement||this.fire(new r.ErrorEvent(new r.ValidationError(`sources.${d}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new r.ErrorEvent(new r.ValidationError(`sources.${d}`,null,'missing required property "canvas"'))),this.options=I,this.animate=I.animate===void 0||I.animate}load(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new r.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())}getCanvas(){return this.canvas}onAdd(d){this.map=d,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let d=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,d=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,d=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const I=this.map.painter.context,D=I.gl;this.boundsBuffer||(this.boundsBuffer=I.createVertexBuffer(this._boundsArray,We.members)),this.boundsSegments||(this.boundsSegments=r.SegmentVector.simpleSegment(0,0,4,2)),this.texture?(d||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new T(I,this.canvas,D.RGBA,{premultiply:!0});for(const z in this.tiles){const W=this.tiles[z];W.state!=="loaded"&&(W.state="loaded",W.texture=this.texture)}}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const d of[this.canvas.width,this.canvas.height])if(isNaN(d)||d<=0)return!0;return!1}}const le={vector:_e,raster:ve,"raster-dem":nt,geojson:Tt,video:Ce,image:be,canvas:Be};function Ee(B,d){const I=r.create();return r.translate(I,I,[1,1,0]),r.scale(I,I,[.5*B.width,.5*B.height,1]),r.multiply(I,I,B.calculatePosMatrix(d.toUnwrapped()))}function he(B,d,I,D,z,W){const ne=function(Qe,st,Mt){if(Qe)for(const St of Qe){const It=st[St];if(It&&It.source===Mt&&It.type==="fill-extrusion")return!0}else for(const St in st){const It=st[St];if(It.source===Mt&&It.type==="fill-extrusion")return!0}return!1}(z&&z.layers,d,B.id),pe=W.maxPitchScaleFactor(),ye=B.tilesIn(D,pe,ne);ye.sort(me);const Se=[];for(const Qe of ye)Se.push({wrappedTileID:Qe.tileID.wrapped().key,queryResults:Qe.tile.queryRenderedFeatures(d,I,B._state,Qe.queryGeometry,Qe.cameraQueryGeometry,Qe.scale,z,W,pe,Ee(B.transform,Qe.tileID))});const ze=function(Qe){const st={},Mt={};for(const St of Qe){const It=St.queryResults,ri=St.wrappedTileID,fi=Mt[ri]=Mt[ri]||{};for(const Ai in It){const jt=It[Ai],Pi=fi[Ai]=fi[Ai]||{},Ei=st[Ai]=st[Ai]||[];for(const Vi of jt)Pi[Vi.featureIndex]||(Pi[Vi.featureIndex]=!0,Ei.push(Vi))}}return st}(Se);for(const Qe in ze)ze[Qe].forEach(st=>{const Mt=st.feature,St=B.getFeatureState(Mt.layer["source-layer"],Mt.id);Mt.source=Mt.layer.source,Mt.layer["source-layer"]&&(Mt.sourceLayer=Mt.layer["source-layer"]),Mt.state=St});return ze}function me(B,d){const I=B.tileID,D=d.tileID;return I.overscaledZ-D.overscaledZ||I.canonical.y-D.canonical.y||I.wrap-D.wrap||I.canonical.x-D.canonical.x}class Fe{constructor(d,I){this.tileID=d,this.uid=r.uniqueId(),this.uses=0,this.tileSize=I,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.textures=[],this.textureCoords={},this.expiredRequestCount=0,this.state="loading"}registerFadeDuration(d){const I=d+this.timeAdded;I<r.exported.now()||this.fadeEndTime&&I<this.fadeEndTime||(this.fadeEndTime=I)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}clearTextures(d){this.demTexture&&d.saveTileTexture(this.demTexture),this.textures.forEach(I=>d.saveTileTexture(I)),this.demTexture=null,this.textures=[],this.textureCoords={}}loadVectorData(d,I,D){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",d){d.featureIndex&&(this.latestFeatureIndex=d.featureIndex,d.rawTileData?(this.latestRawTileData=d.rawTileData,this.latestFeatureIndex.rawTileData=d.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=d.collisionBoxArray,this.buckets=function(z,W){const ne={};if(!W)return ne;for(const pe of z){const ye=pe.layerIds.map(Se=>W.getLayer(Se)).filter(Boolean);if(ye.length!==0){pe.layers=ye,pe.stateDependentLayerIds&&(pe.stateDependentLayers=pe.stateDependentLayerIds.map(Se=>ye.filter(ze=>ze.id===Se)[0]));for(const Se of ye)ne[Se.id]=pe}}return ne}(d.buckets,I.style),this.hasSymbolBuckets=!1;for(const z in this.buckets){const W=this.buckets[z];if(W instanceof r.SymbolBucket){if(this.hasSymbolBuckets=!0,!D)break;W.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const z in this.buckets){const W=this.buckets[z];if(W instanceof r.SymbolBucket&&W.hasRTLText){this.hasRTLText=!0,r.lazyLoadRTLTextPlugin();break}}this.queryPadding=0;for(const z in this.buckets){const W=this.buckets[z];this.queryPadding=Math.max(this.queryPadding,I.style.getLayer(z).queryRadius(W))}d.imageAtlas&&(this.imageAtlas=d.imageAtlas),d.glyphAtlasImage&&(this.glyphAtlasImage=d.glyphAtlasImage)}else this.collisionBoxArray=new r.CollisionBoxArray}unloadVectorData(){for(const d in this.buckets)this.buckets[d].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(d){return this.buckets[d.id]}upload(d){for(const D in this.buckets){const z=this.buckets[D];z.uploadPending()&&z.upload(d)}const I=d.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new T(d,this.imageAtlas.image,I.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new T(d,this.glyphAtlasImage,I.ALPHA),this.glyphAtlasImage=null)}prepare(d){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(d,this.imageAtlasTexture)}queryRenderedFeatures(d,I,D,z,W,ne,pe,ye,Se,ze){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:z,cameraQueryGeometry:W,scale:ne,tileSize:this.tileSize,pixelPosMatrix:ze,transform:ye,params:pe,queryPadding:this.queryPadding*Se},d,I,D):{}}querySourceFeatures(d,I){const D=this.latestFeatureIndex;if(!D||!D.rawTileData)return;const z=D.loadVTLayers(),W=I?I.sourceLayer:"",ne=z._geojsonTileLayer||z[W];if(!ne)return;const pe=r.createFilter(I&&I.filter),{z:ye,x:Se,y:ze}=this.tileID.canonical,Qe={z:ye,x:Se,y:ze};for(let st=0;st<ne.length;st++){const Mt=ne.feature(st);if(pe.needGeometry){const ri=r.toEvaluationFeature(Mt,!0);if(!pe.filter(new r.EvaluationParameters(this.tileID.overscaledZ),ri,this.tileID.canonical))continue}else if(!pe.filter(new r.EvaluationParameters(this.tileID.overscaledZ),Mt))continue;const St=D.getId(Mt,W),It=new r.GeoJSONFeature(Mt,ye,Se,ze,St);It.tile=Qe,d.push(It)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(d){const I=this.expirationTime;if(d.cacheControl){const D=r.parseCacheControl(d.cacheControl);D["max-age"]&&(this.expirationTime=Date.now()+1e3*D["max-age"])}else d.expires&&(this.expirationTime=new Date(d.expires).getTime());if(this.expirationTime){const D=Date.now();let z=!1;if(this.expirationTime>D)z=!1;else if(I)if(this.expirationTime<I)z=!0;else{const W=this.expirationTime-I;W?this.expirationTime=D+Math.max(W,3e4):z=!0}else z=!0;z?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(d,I){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(d).length===0)return;const D=this.latestFeatureIndex.loadVTLayers();for(const z in this.buckets){if(!I.style.hasLayer(z))continue;const W=this.buckets[z],ne=W.layers[0].sourceLayer||"_geojsonTileLayer",pe=D[ne],ye=d[ne];if(!pe||!ye||Object.keys(ye).length===0)continue;W.update(ye,pe,this.imageAtlas&&this.imageAtlas.patternPositions||{});const Se=I&&I.style&&I.style.getLayer(z);Se&&(this.queryPadding=Math.max(this.queryPadding,Se.queryRadius(W)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<r.exported.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(d){this.symbolFadeHoldUntil=r.exported.now()+d}setDependencies(d,I){const D={};for(const z of I)D[z]=!0;this.dependencies[d]=D}hasDependency(d,I){for(const D of d){const z=this.dependencies[D];if(z){for(const W of I)if(z[W])return!0}}return!1}}class Xe{constructor(d,I){this.max=d,this.onRemove=I,this.reset()}reset(){for(const d in this.data)for(const I of this.data[d])I.timeout&&clearTimeout(I.timeout),this.onRemove(I.value);return this.data={},this.order=[],this}add(d,I,D){const z=d.wrapped().key;this.data[z]===void 0&&(this.data[z]=[]);const W={value:I,timeout:void 0};if(D!==void 0&&(W.timeout=setTimeout(()=>{this.remove(d,W)},D)),this.data[z].push(W),this.order.push(z),this.order.length>this.max){const ne=this._getAndRemoveByKey(this.order[0]);ne&&this.onRemove(ne)}return this}has(d){return d.wrapped().key in this.data}getAndRemove(d){return this.has(d)?this._getAndRemoveByKey(d.wrapped().key):null}_getAndRemoveByKey(d){const I=this.data[d].shift();return I.timeout&&clearTimeout(I.timeout),this.data[d].length===0&&delete this.data[d],this.order.splice(this.order.indexOf(d),1),I.value}getByKey(d){const I=this.data[d];return I?I[0].value:null}get(d){return this.has(d)?this.data[d.wrapped().key][0].value:null}remove(d,I){if(!this.has(d))return this;const D=d.wrapped().key,z=I===void 0?0:this.data[D].indexOf(I),W=this.data[D][z];return this.data[D].splice(z,1),W.timeout&&clearTimeout(W.timeout),this.data[D].length===0&&delete this.data[D],this.onRemove(W.value),this.order.splice(this.order.indexOf(D),1),this}setMaxSize(d){for(this.max=d;this.order.length>this.max;){const I=this._getAndRemoveByKey(this.order[0]);I&&this.onRemove(I)}return this}filter(d){const I=[];for(const D in this.data)for(const z of this.data[D])d(z.value)||I.push(z);for(const D of I)this.remove(D.value.tileID,D)}}class lt{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(d,I,D){const z=String(I);if(this.stateChanges[d]=this.stateChanges[d]||{},this.stateChanges[d][z]=this.stateChanges[d][z]||{},r.extend(this.stateChanges[d][z],D),this.deletedStates[d]===null){this.deletedStates[d]={};for(const W in this.state[d])W!==z&&(this.deletedStates[d][W]=null)}else if(this.deletedStates[d]&&this.deletedStates[d][z]===null){this.deletedStates[d][z]={};for(const W in this.state[d][z])D[W]||(this.deletedStates[d][z][W]=null)}else for(const W in D)this.deletedStates[d]&&this.deletedStates[d][z]&&this.deletedStates[d][z][W]===null&&delete this.deletedStates[d][z][W]}removeFeatureState(d,I,D){if(this.deletedStates[d]===null)return;const z=String(I);if(this.deletedStates[d]=this.deletedStates[d]||{},D&&I!==void 0)this.deletedStates[d][z]!==null&&(this.deletedStates[d][z]=this.deletedStates[d][z]||{},this.deletedStates[d][z][D]=null);else if(I!==void 0)if(this.stateChanges[d]&&this.stateChanges[d][z])for(D in this.deletedStates[d][z]={},this.stateChanges[d][z])this.deletedStates[d][z][D]=null;else this.deletedStates[d][z]=null;else this.deletedStates[d]=null}getState(d,I){const D=String(I),z=r.extend({},(this.state[d]||{})[D],(this.stateChanges[d]||{})[D]);if(this.deletedStates[d]===null)return{};if(this.deletedStates[d]){const W=this.deletedStates[d][I];if(W===null)return{};for(const ne in W)delete z[ne]}return z}initializeTileState(d,I){d.setFeatureState(this.state,I)}coalesceChanges(d,I){const D={};for(const z in this.stateChanges){this.state[z]=this.state[z]||{};const W={};for(const ne in this.stateChanges[z])this.state[z][ne]||(this.state[z][ne]={}),r.extend(this.state[z][ne],this.stateChanges[z][ne]),W[ne]=this.state[z][ne];D[z]=W}for(const z in this.deletedStates){this.state[z]=this.state[z]||{};const W={};if(this.deletedStates[z]===null)for(const ne in this.state[z])W[ne]={},this.state[z][ne]={};else for(const ne in this.deletedStates[z]){if(this.deletedStates[z][ne]===null)this.state[z][ne]={};else for(const pe of Object.keys(this.deletedStates[z][ne]))delete this.state[z][ne][pe];W[ne]=this.state[z][ne]}D[z]=D[z]||{},r.extend(D[z],W)}if(this.stateChanges={},this.deletedStates={},Object.keys(D).length!==0)for(const z in d)d[z].setFeatureState(D,I)}}class Ye extends r.Evented{constructor(d,I,D){super(),this.id=d,this.dispatcher=D,this.on("data",z=>{z.dataType==="source"&&z.sourceDataType==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&z.dataType==="source"&&z.sourceDataType==="content"&&(this.reload(),this.transform&&this.update(this.transform,this.terrain))}),this.on("dataloading",()=>{this._sourceErrored=!1}),this.on("error",()=>{this._sourceErrored=this._source.loaded()}),this._source=function(z,W,ne,pe){const ye=new le[W.type](z,W,ne,pe);if(ye.id!==z)throw new Error(`Expected Source id to be ${z} instead of ${ye.id}`);return r.bindAll(["load","abort","unload","serialize","prepare"],ye),ye}(d,I,D,this),this._tiles={},this._cache=new Xe(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new lt}onAdd(d){this.map=d,this._maxTileCacheSize=d?d._maxTileCacheSize:null,this._source&&this._source.onAdd&&this._source.onAdd(d)}onRemove(d){this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(d)}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;for(const d in this._tiles){const I=this._tiles[d];if(I.state!=="loaded"&&I.state!=="errored")return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const d=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,d&&this.reload(),this.transform&&this.update(this.transform,this.terrain)}_loadTile(d,I){return this._source.loadTile(d,I)}_unloadTile(d){if(this._source.unloadTile)return this._source.unloadTile(d,()=>{})}_abortTile(d){this._source.abortTile&&this._source.abortTile(d,()=>{}),this._source.fire(new r.Event("dataabort",{tile:d,coord:d.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(d){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const I in this._tiles){const D=this._tiles[I];D.upload(d),D.prepare(this.map.style.imageManager)}}getIds(){return Object.values(this._tiles).map(d=>d.tileID).sort(Ke).map(d=>d.key)}getRenderableIds(d){const I=[];for(const D in this._tiles)this._isIdRenderable(D,d)&&I.push(this._tiles[D]);return d?I.sort((D,z)=>{const W=D.tileID,ne=z.tileID,pe=new r.pointGeometry(W.canonical.x,W.canonical.y)._rotate(this.transform.angle),ye=new r.pointGeometry(ne.canonical.x,ne.canonical.y)._rotate(this.transform.angle);return W.overscaledZ-ne.overscaledZ||ye.y-pe.y||ye.x-pe.x}).map(D=>D.tileID.key):I.map(D=>D.tileID).sort(Ke).map(D=>D.key)}hasRenderableParent(d){const I=this.findLoadedParent(d,0);return!!I&&this._isIdRenderable(I.tileID.key)}_isIdRenderable(d,I){return this._tiles[d]&&this._tiles[d].hasData()&&!this._coveredTiles[d]&&(I||!this._tiles[d].holdingForFade())}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const d in this._tiles)this._tiles[d].state!=="errored"&&this._reloadTile(d,"reloading")}}_reloadTile(d,I){const D=this._tiles[d];D&&(D.state!=="loading"&&(D.state=I),this._loadTile(D,this._tileLoaded.bind(this,D,d,I)))}_tileLoaded(d,I,D,z){if(z)return d.state="errored",void(z.status!==404?this._source.fire(new r.ErrorEvent(z,{tile:d})):this.update(this.transform,this.terrain));d.timeAdded=r.exported.now(),D==="expired"&&(d.refreshedUponExpiration=!0),this._setTileReloadTimer(I,d),this.getSource().type==="raster-dem"&&d.dem&&this._backfillDEM(d),this._state.initializeTileState(d,this.map?this.map.painter:null),d.aborted||this._source.fire(new r.Event("data",{dataType:"source",tile:d,coord:d.tileID}))}_backfillDEM(d){const I=this.getRenderableIds();for(let z=0;z<I.length;z++){const W=I[z];if(d.neighboringTiles&&d.neighboringTiles[W]){const ne=this.getTileByID(W);D(d,ne),D(ne,d)}}function D(z,W){z.needsHillshadePrepare=!0,z.needsTerrainPrepare=!0;let ne=W.tileID.canonical.x-z.tileID.canonical.x;const pe=W.tileID.canonical.y-z.tileID.canonical.y,ye=Math.pow(2,z.tileID.canonical.z),Se=W.tileID.key;ne===0&&pe===0||Math.abs(pe)>1||(Math.abs(ne)>1&&(Math.abs(ne+ye)===1?ne+=ye:Math.abs(ne-ye)===1&&(ne-=ye)),W.dem&&z.dem&&(z.dem.backfillBorder(W.dem,ne,pe),z.neighboringTiles&&z.neighboringTiles[Se]&&(z.neighboringTiles[Se].backfilled=!0)))}}getTile(d){return this.getTileByID(d.key)}getTileByID(d){return this._tiles[d]}_retainLoadedChildren(d,I,D,z){for(const W in this._tiles){let ne=this._tiles[W];if(z[W]||!ne.hasData()||ne.tileID.overscaledZ<=I||ne.tileID.overscaledZ>D)continue;let pe=ne.tileID;for(;ne&&ne.tileID.overscaledZ>I+1;){const Se=ne.tileID.scaledTo(ne.tileID.overscaledZ-1);ne=this._tiles[Se.key],ne&&ne.hasData()&&(pe=Se)}let ye=pe;for(;ye.overscaledZ>I;)if(ye=ye.scaledTo(ye.overscaledZ-1),d[ye.key]){z[pe.key]=pe;break}}}findLoadedParent(d,I){if(d.key in this._loadedParentTiles){const D=this._loadedParentTiles[d.key];return D&&D.tileID.overscaledZ>=I?D:null}for(let D=d.overscaledZ-1;D>=I;D--){const z=d.scaledTo(D),W=this._getLoadedTile(z);if(W)return W}}_getLoadedTile(d){const I=this._tiles[d.key];return I&&I.hasData()?I:this._cache.getByKey(d.wrapped().key)}updateCacheSize(d){const I=Math.ceil(d.width/this._source.tileSize)+1,D=Math.ceil(d.height/this._source.tileSize)+1,z=Math.floor(I*D*5),W=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,z):z;this._cache.setMaxSize(W)}handleWrapJump(d){const I=Math.round((d-(this._prevLng===void 0?d:this._prevLng))/360);if(this._prevLng=d,I){const D={};for(const z in this._tiles){const W=this._tiles[z];W.tileID=W.tileID.unwrapTo(W.tileID.wrap+I),D[W.tileID.key]=W}this._tiles=D;for(const z in this._timers)clearTimeout(this._timers[z]),delete this._timers[z];for(const z in this._tiles)this._setTileReloadTimer(z,this._tiles[z])}}update(d,I){if(this.transform=d,this.terrain=I,!this._sourceLoaded||this._paused)return;let D;this.updateCacheSize(d),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?D=d.getVisibleUnwrappedCoordinates(this._source.tileID).map(Se=>new r.OverscaledTileID(Se.canonical.z,Se.wrap,Se.canonical.z,Se.canonical.x,Se.canonical.y)):(D=d.coveringTiles({tileSize:this.usedForTerrain?this.tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:!this.usedForTerrain&&this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled,terrain:I}),this._source.hasTile&&(D=D.filter(Se=>this._source.hasTile(Se)))):D=[];const z=d.coveringZoomLevel(this._source),W=Math.max(z-Ye.maxOverzooming,this._source.minzoom),ne=Math.max(z+Ye.maxUnderzooming,this._source.minzoom);if(this.usedForTerrain){const Se={};for(const ze of D)if(ze.canonical.z>this._source.minzoom){const Qe=ze.scaledTo(ze.canonical.z-1);Se[Qe.key]=Qe;const st=ze.scaledTo(Math.max(this._source.minzoom,Math.min(ze.canonical.z,5)));Se[st.key]=st}D=D.concat(Object.values(Se))}const pe=this._updateRetainedTiles(D,z);if(Lt(this._source.type)){const Se={},ze={},Qe=Object.keys(pe);for(const st of Qe){const Mt=pe[st],St=this._tiles[st];if(!St||St.fadeEndTime&&St.fadeEndTime<=r.exported.now())continue;const It=this.findLoadedParent(Mt,W);It&&(this._addTile(It.tileID),Se[It.tileID.key]=It.tileID),ze[st]=Mt}this._retainLoadedChildren(ze,z,ne,pe);for(const st in Se)pe[st]||(this._coveredTiles[st]=!0,pe[st]=Se[st]);if(I){const st={},Mt={};for(const St of D)this._tiles[St.key].hasData()?st[St.key]=St:Mt[St.key]=St;for(const St in Mt){const It=Mt[St].children(this._source.maxzoom);this._tiles[It[0].key]&&this._tiles[It[1].key]&&this._tiles[It[2].key]&&this._tiles[It[3].key]&&(st[It[0].key]=pe[It[0].key]=It[0],st[It[1].key]=pe[It[1].key]=It[1],st[It[2].key]=pe[It[2].key]=It[2],st[It[3].key]=pe[It[3].key]=It[3],delete Mt[St])}for(const St in Mt){const It=this.findLoadedParent(Mt[St],this._source.minzoom);if(It){st[It.tileID.key]=pe[It.tileID.key]=It.tileID;for(const ri in st)st[ri].isChildOf(It.tileID)&&delete st[ri]}}for(const St in this._tiles)st[St]||(this._coveredTiles[St]=!0)}}for(const Se in pe)this._tiles[Se].clearFadeHold();const ye=r.keysDifference(this._tiles,pe);for(const Se of ye){const ze=this._tiles[Se];ze.hasSymbolBuckets&&!ze.holdingForFade()?ze.setHoldDuration(this.map._fadeDuration):ze.hasSymbolBuckets&&!ze.symbolFadeFinished()||this._removeTile(Se)}this._updateLoadedParentTileCache()}releaseSymbolFadeTiles(){for(const d in this._tiles)this._tiles[d].holdingForFade()&&this._removeTile(d)}_updateRetainedTiles(d,I){const D={},z={},W=Math.max(I-Ye.maxOverzooming,this._source.minzoom),ne=Math.max(I+Ye.maxUnderzooming,this._source.minzoom),pe={};for(const ye of d){const Se=this._addTile(ye);D[ye.key]=ye,Se.hasData()||I<this._source.maxzoom&&(pe[ye.key]=ye)}this._retainLoadedChildren(pe,I,ne,D);for(const ye of d){let Se=this._tiles[ye.key];if(Se.hasData())continue;if(I+1>this._source.maxzoom){const Qe=ye.children(this._source.maxzoom)[0],st=this.getTile(Qe);if(st&&st.hasData()){D[Qe.key]=Qe;continue}}else{const Qe=ye.children(this._source.maxzoom);if(D[Qe[0].key]&&D[Qe[1].key]&&D[Qe[2].key]&&D[Qe[3].key])continue}let ze=Se.wasRequested();for(let Qe=ye.overscaledZ-1;Qe>=W;--Qe){const st=ye.scaledTo(Qe);if(z[st.key]||(z[st.key]=!0,Se=this.getTile(st),!Se&&ze&&(Se=this._addTile(st)),Se&&(D[st.key]=st,ze=Se.wasRequested(),Se.hasData())))break}}return D}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const d in this._tiles){const I=[];let D,z=this._tiles[d].tileID;for(;z.overscaledZ>0;){if(z.key in this._loadedParentTiles){D=this._loadedParentTiles[z.key];break}I.push(z.key);const W=z.scaledTo(z.overscaledZ-1);if(D=this._getLoadedTile(W),D)break;z=W}for(const W of I)this._loadedParentTiles[W]=D}}_addTile(d){let I=this._tiles[d.key];if(I)return I;I=this._cache.getAndRemove(d),I&&(this._setTileReloadTimer(d.key,I),I.tileID=d,this._state.initializeTileState(I,this.map?this.map.painter:null),this._cacheTimers[d.key]&&(clearTimeout(this._cacheTimers[d.key]),delete this._cacheTimers[d.key],this._setTileReloadTimer(d.key,I)));const D=I;return I||(I=new Fe(d,this._source.tileSize*d.overscaleFactor()),this._loadTile(I,this._tileLoaded.bind(this,I,d.key,I.state))),I.uses++,this._tiles[d.key]=I,D||this._source.fire(new r.Event("dataloading",{tile:I,coord:I.tileID,dataType:"source"})),I}_setTileReloadTimer(d,I){d in this._timers&&(clearTimeout(this._timers[d]),delete this._timers[d]);const D=I.getExpiryTimeout();D&&(this._timers[d]=setTimeout(()=>{this._reloadTile(d,"expired"),delete this._timers[d]},D))}_removeTile(d){const I=this._tiles[d];I&&(I.uses--,delete this._tiles[d],this._timers[d]&&(clearTimeout(this._timers[d]),delete this._timers[d]),I.uses>0||(I.hasData()&&I.state!=="reloading"?this._cache.add(I.tileID,I,I.getExpiryTimeout()):(I.aborted=!0,this._abortTile(I),this._unloadTile(I))))}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const d in this._tiles)this._removeTile(d);this._cache.reset()}tilesIn(d,I,D){const z=[],W=this.transform;if(!W)return z;const ne=D?W.getCameraQueryGeometry(d):d,pe=d.map(St=>W.pointCoordinate(St,this.terrain)),ye=ne.map(St=>W.pointCoordinate(St,this.terrain)),Se=this.getIds();let ze=1/0,Qe=1/0,st=-1/0,Mt=-1/0;for(const St of ye)ze=Math.min(ze,St.x),Qe=Math.min(Qe,St.y),st=Math.max(st,St.x),Mt=Math.max(Mt,St.y);for(let St=0;St<Se.length;St++){const It=this._tiles[Se[St]];if(It.holdingForFade())continue;const ri=It.tileID,fi=Math.pow(2,W.zoom-It.tileID.overscaledZ),Ai=I*It.queryPadding*r.EXTENT/It.tileSize/fi,jt=[ri.getTilePoint(new r.MercatorCoordinate(ze,Qe)),ri.getTilePoint(new r.MercatorCoordinate(st,Mt))];if(jt[0].x-Ai<r.EXTENT&&jt[0].y-Ai<r.EXTENT&&jt[1].x+Ai>=0&&jt[1].y+Ai>=0){const Pi=pe.map(Vi=>ri.getTilePoint(Vi)),Ei=ye.map(Vi=>ri.getTilePoint(Vi));z.push({tile:It,tileID:ri,queryGeometry:Pi,cameraQueryGeometry:Ei,scale:fi})}}return z}getVisibleCoordinates(d){const I=this.getRenderableIds(d).map(D=>this._tiles[D].tileID);for(const D of I)D.posMatrix=this.transform.calculatePosMatrix(D.toUnwrapped());return I}hasTransition(){if(this._source.hasTransition())return!0;if(Lt(this._source.type))for(const d in this._tiles){const I=this._tiles[d];if(I.fadeEndTime!==void 0&&I.fadeEndTime>=r.exported.now())return!0}return!1}setFeatureState(d,I,D){this._state.updateState(d=d||"_geojsonTileLayer",I,D)}removeFeatureState(d,I,D){this._state.removeFeatureState(d=d||"_geojsonTileLayer",I,D)}getFeatureState(d,I){return this._state.getState(d=d||"_geojsonTileLayer",I)}setDependencies(d,I,D){const z=this._tiles[d];z&&z.setDependencies(I,D)}reloadTilesForDependencies(d,I){for(const D in this._tiles)this._tiles[D].hasDependency(d,I)&&this._reloadTile(D,"reloading");this._cache.filter(D=>!D.hasDependency(d,I))}}function Ke(B,d){const I=Math.abs(2*B.wrap)-+(B.wrap<0),D=Math.abs(2*d.wrap)-+(d.wrap<0);return B.overscaledZ-d.overscaledZ||D-I||d.canonical.y-B.canonical.y||d.canonical.x-B.canonical.x}function Lt(B){return B==="raster"||B==="image"||B==="video"}Ye.maxOverzooming=10,Ye.maxUnderzooming=3;const $t="mapboxgl_preloaded_worker_pool";class dt{constructor(){this.active={}}acquire(d){if(!this.workers)for(this.workers=[];this.workers.length<dt.workerCount;)this.workers.push(new Worker(sa.workerUrl));return this.active[d]=!0,this.workers.slice()}release(d){delete this.active[d],this.numActive()===0&&(this.workers.forEach(I=>{I.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[$t]}numActive(){return Object.keys(this.active).length}}const wt=Math.floor(r.exported.hardwareConcurrency/2);let bt;function $e(){return bt||(bt=new dt),bt}function Yt(B,d){const I={};for(const D in B)D!=="ref"&&(I[D]=B[D]);return r.refProperties.forEach(D=>{D in d&&(I[D]=d[D])}),I}function li(B){B=B.slice();const d=Object.create(null);for(let I=0;I<B.length;I++)d[B[I].id]=B[I];for(let I=0;I<B.length;I++)"ref"in B[I]&&(B[I]=Yt(B[I],d[B[I].ref]));return B}dt.workerCount=Math.max(Math.min(wt,6),1);const Zt={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};function Ci(B,d,I){I.push({command:Zt.addSource,args:[B,d[B]]})}function Li(B,d,I){d.push({command:Zt.removeSource,args:[B]}),I[B]=!0}function Vt(B,d,I,D){Li(B,I,D),Ci(B,d,I)}function mi(B,d,I){let D;for(D in B[I])if(Object.prototype.hasOwnProperty.call(B[I],D)&&D!=="data"&&!v(B[I][D],d[I][D]))return!1;for(D in d[I])if(Object.prototype.hasOwnProperty.call(d[I],D)&&D!=="data"&&!v(B[I][D],d[I][D]))return!1;return!0}function Qi(B,d,I,D,z,W){let ne;for(ne in d=d||{},B=B||{})Object.prototype.hasOwnProperty.call(B,ne)&&(v(B[ne],d[ne])||I.push({command:W,args:[D,ne,d[ne],z]}));for(ne in d)Object.prototype.hasOwnProperty.call(d,ne)&&!Object.prototype.hasOwnProperty.call(B,ne)&&(v(B[ne],d[ne])||I.push({command:W,args:[D,ne,d[ne],z]}))}function xi(B){return B.id}function Jt(B,d){return B[d.id]=d,B}class Me{constructor(d,I){this.reset(d,I)}reset(d,I){this.points=d||[],this._distances=[0];for(let D=1;D<this.points.length;D++)this._distances[D]=this._distances[D-1]+this.points[D].dist(this.points[D-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(I||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(d){if(this.points.length===1)return this.points[0];d=r.clamp(d,0,1);let I=1,D=this._distances[I];const z=d*this.paddedLength+this.padding;for(;D<z&&I<this._distances.length;)D=this._distances[++I];const W=I-1,ne=this._distances[W],pe=D-ne,ye=pe>0?(z-ne)/pe:0;return this.points[W].mult(1-ye).add(this.points[I].mult(ye))}}function Q(B,d){let I=!0;return B==="always"||B!=="never"&&d!=="never"||(I=!1),I}class ae{constructor(d,I,D){const z=this.boxCells=[],W=this.circleCells=[];this.xCellCount=Math.ceil(d/D),this.yCellCount=Math.ceil(I/D);for(let ne=0;ne<this.xCellCount*this.yCellCount;ne++)z.push([]),W.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=d,this.height=I,this.xScale=this.xCellCount/d,this.yScale=this.yCellCount/I,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(d,I,D,z,W){this._forEachCell(I,D,z,W,this._insertBoxCell,this.boxUid++),this.boxKeys.push(d),this.bboxes.push(I),this.bboxes.push(D),this.bboxes.push(z),this.bboxes.push(W)}insertCircle(d,I,D,z){this._forEachCell(I-z,D-z,I+z,D+z,this._insertCircleCell,this.circleUid++),this.circleKeys.push(d),this.circles.push(I),this.circles.push(D),this.circles.push(z)}_insertBoxCell(d,I,D,z,W,ne){this.boxCells[W].push(ne)}_insertCircleCell(d,I,D,z,W,ne){this.circleCells[W].push(ne)}_query(d,I,D,z,W,ne,pe){if(D<0||d>this.width||z<0||I>this.height)return[];const ye=[];if(d<=0&&I<=0&&this.width<=D&&this.height<=z){if(W)return[{key:null,x1:d,y1:I,x2:D,y2:z}];for(let Se=0;Se<this.boxKeys.length;Se++)ye.push({key:this.boxKeys[Se],x1:this.bboxes[4*Se],y1:this.bboxes[4*Se+1],x2:this.bboxes[4*Se+2],y2:this.bboxes[4*Se+3]});for(let Se=0;Se<this.circleKeys.length;Se++){const ze=this.circles[3*Se],Qe=this.circles[3*Se+1],st=this.circles[3*Se+2];ye.push({key:this.circleKeys[Se],x1:ze-st,y1:Qe-st,x2:ze+st,y2:Qe+st})}}else this._forEachCell(d,I,D,z,this._queryCell,ye,{hitTest:W,overlapMode:ne,seenUids:{box:{},circle:{}}},pe);return ye}query(d,I,D,z){return this._query(d,I,D,z,!1,null)}hitTest(d,I,D,z,W,ne){return this._query(d,I,D,z,!0,W,ne).length>0}hitTestCircle(d,I,D,z,W){const ne=d-D,pe=d+D,ye=I-D,Se=I+D;if(pe<0||ne>this.width||Se<0||ye>this.height)return!1;const ze=[];return this._forEachCell(ne,ye,pe,Se,this._queryCellCircle,ze,{hitTest:!0,overlapMode:z,circle:{x:d,y:I,radius:D},seenUids:{box:{},circle:{}}},W),ze.length>0}_queryCell(d,I,D,z,W,ne,pe,ye){const{seenUids:Se,hitTest:ze,overlapMode:Qe}=pe,st=this.boxCells[W];if(st!==null){const St=this.bboxes;for(const It of st)if(!Se.box[It]){Se.box[It]=!0;const ri=4*It,fi=this.boxKeys[It];if(d<=St[ri+2]&&I<=St[ri+3]&&D>=St[ri+0]&&z>=St[ri+1]&&(!ye||ye(fi))&&(!ze||!Q(Qe,fi.overlapMode))&&(ne.push({key:fi,x1:St[ri],y1:St[ri+1],x2:St[ri+2],y2:St[ri+3]}),ze))return!0}}const Mt=this.circleCells[W];if(Mt!==null){const St=this.circles;for(const It of Mt)if(!Se.circle[It]){Se.circle[It]=!0;const ri=3*It,fi=this.circleKeys[It];if(this._circleAndRectCollide(St[ri],St[ri+1],St[ri+2],d,I,D,z)&&(!ye||ye(fi))&&(!ze||!Q(Qe,fi.overlapMode))){const Ai=St[ri],jt=St[ri+1],Pi=St[ri+2];if(ne.push({key:fi,x1:Ai-Pi,y1:jt-Pi,x2:Ai+Pi,y2:jt+Pi}),ze)return!0}}}return!1}_queryCellCircle(d,I,D,z,W,ne,pe,ye){const{circle:Se,seenUids:ze,overlapMode:Qe}=pe,st=this.boxCells[W];if(st!==null){const St=this.bboxes;for(const It of st)if(!ze.box[It]){ze.box[It]=!0;const ri=4*It,fi=this.boxKeys[It];if(this._circleAndRectCollide(Se.x,Se.y,Se.radius,St[ri+0],St[ri+1],St[ri+2],St[ri+3])&&(!ye||ye(fi))&&!Q(Qe,fi.overlapMode))return ne.push(!0),!0}}const Mt=this.circleCells[W];if(Mt!==null){const St=this.circles;for(const It of Mt)if(!ze.circle[It]){ze.circle[It]=!0;const ri=3*It,fi=this.circleKeys[It];if(this._circlesCollide(St[ri],St[ri+1],St[ri+2],Se.x,Se.y,Se.radius)&&(!ye||ye(fi))&&!Q(Qe,fi.overlapMode))return ne.push(!0),!0}}}_forEachCell(d,I,D,z,W,ne,pe,ye){const Se=this._convertToXCellCoord(d),ze=this._convertToYCellCoord(I),Qe=this._convertToXCellCoord(D),st=this._convertToYCellCoord(z);for(let Mt=Se;Mt<=Qe;Mt++)for(let St=ze;St<=st;St++)if(W.call(this,d,I,D,z,this.xCellCount*St+Mt,ne,pe,ye))return}_convertToXCellCoord(d){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(d*this.xScale)))}_convertToYCellCoord(d){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(d*this.yScale)))}_circlesCollide(d,I,D,z,W,ne){const pe=z-d,ye=W-I,Se=D+ne;return Se*Se>pe*pe+ye*ye}_circleAndRectCollide(d,I,D,z,W,ne,pe){const ye=(ne-z)/2,Se=Math.abs(d-(z+ye));if(Se>ye+D)return!1;const ze=(pe-W)/2,Qe=Math.abs(I-(W+ze));if(Qe>ze+D)return!1;if(Se<=ye||Qe<=ze)return!0;const st=Se-ye,Mt=Qe-ze;return st*st+Mt*Mt<=D*D}}function et(B,d,I,D,z){const W=r.create();return d?(r.scale(W,W,[1/z,1/z,1]),I||r.rotateZ(W,W,D.angle)):r.multiply(W,D.labelPlaneMatrix,B),W}function vt(B,d,I,D,z){if(d){const W=r.clone(B);return r.scale(W,W,[z,z,1]),I||r.rotateZ(W,W,-D.angle),W}return D.glCoordMatrix}function Wt(B,d,I){let D;I?(D=[B.x,B.y,I(B.x,B.y),1],r.transformMat4(D,D,d)):(D=[B.x,B.y,0,1],cn(D,D,d));const z=D[3];return{point:new r.pointGeometry(D[0]/z,D[1]/z),signedDistanceFromCamera:z}}function di(B,d){return .5+B/d*.5}function xn(B,d){const I=B[0]/B[3],D=B[1]/B[3];return I>=-d[0]&&I<=d[0]&&D>=-d[1]&&D<=d[1]}function Mn(B,d,I,D,z,W,ne,pe,ye,Se){const ze=D?B.textSizeData:B.iconSizeData,Qe=r.evaluateSizeForZoom(ze,I.transform.zoom),st=[256/I.width*2+1,256/I.height*2+1],Mt=D?B.text.dynamicLayoutVertexArray:B.icon.dynamicLayoutVertexArray;Mt.clear();const St=B.lineVertexArray,It=D?B.text.placedSymbolArray:B.icon.placedSymbolArray,ri=I.transform.width/I.transform.height;let fi=!1;for(let Ai=0;Ai<It.length;Ai++){const jt=It.get(Ai);if(jt.hidden||jt.writingMode===r.WritingMode.vertical&&!fi){jn(jt.numGlyphs,Mt);continue}let Pi;if(fi=!1,Se?(Pi=[jt.anchorX,jt.anchorY,Se(jt.anchorX,jt.anchorY),1],r.transformMat4(Pi,Pi,d)):(Pi=[jt.anchorX,jt.anchorY,0,1],cn(Pi,Pi,d)),!xn(Pi,st)){jn(jt.numGlyphs,Mt);continue}const Ei=di(I.transform.cameraToCenterDistance,Pi[3]),Vi=r.evaluateSizeForFeature(ze,Qe,jt),Ni=ne?Vi/Ei:Vi*Ei,un=new r.pointGeometry(jt.anchorX,jt.anchorY),zi=Wt(un,z,Se).point,zn={},vn=en(jt,Ni,!1,pe,d,z,W,B.glyphOffsetArray,St,Mt,zi,un,zn,ri,ye,Se);fi=vn.useVertical,(vn.notEnoughRoom||fi||vn.needsFlipping&&en(jt,Ni,!0,pe,d,z,W,B.glyphOffsetArray,St,Mt,zi,un,zn,ri,ye,Se).notEnoughRoom)&&jn(jt.numGlyphs,Mt)}D?B.text.dynamicLayoutVertexBuffer.updateData(Mt):B.icon.dynamicLayoutVertexBuffer.updateData(Mt)}function fn(B,d,I,D,z,W,ne,pe,ye,Se,ze,Qe,st){const Mt=pe.glyphStartIndex+pe.numGlyphs,St=pe.lineStartIndex,It=pe.lineStartIndex+pe.lineLength,ri=d.getoffsetX(pe.glyphStartIndex),fi=d.getoffsetX(Mt-1),Ai=Yn(B*ri,I,D,z,W,ne,pe.segment,St,It,ye,Se,ze,Qe,st);if(!Ai)return null;const jt=Yn(B*fi,I,D,z,W,ne,pe.segment,St,It,ye,Se,ze,Qe,st);return jt?{first:Ai,last:jt}:null}function Bi(B,d,I,D){return B===r.WritingMode.horizontal&&Math.abs(I.y-d.y)>Math.abs(I.x-d.x)*D?{useVertical:!0}:(B===r.WritingMode.vertical?d.y<I.y:d.x>I.x)?{needsFlipping:!0}:null}function en(B,d,I,D,z,W,ne,pe,ye,Se,ze,Qe,st,Mt,St,It){const ri=d/24,fi=B.lineOffsetX*ri,Ai=B.lineOffsetY*ri;let jt;if(B.numGlyphs>1){const Pi=B.glyphStartIndex+B.numGlyphs,Ei=B.lineStartIndex,Vi=B.lineStartIndex+B.lineLength,Ni=fn(ri,pe,fi,Ai,I,ze,Qe,B,ye,W,st,St,It);if(!Ni)return{notEnoughRoom:!0};const un=Wt(Ni.first.point,ne,It).point,zi=Wt(Ni.last.point,ne,It).point;if(D&&!I){const zn=Bi(B.writingMode,un,zi,Mt);if(zn)return zn}jt=[Ni.first];for(let zn=B.glyphStartIndex+1;zn<Pi-1;zn++)jt.push(Yn(ri*pe.getoffsetX(zn),fi,Ai,I,ze,Qe,B.segment,Ei,Vi,ye,W,st,St,It));jt.push(Ni.last)}else{if(D&&!I){const Ei=Wt(Qe,z,It).point,Vi=B.lineStartIndex+B.segment+1,Ni=new r.pointGeometry(ye.getx(Vi),ye.gety(Vi)),un=Wt(Ni,z,It),zi=un.signedDistanceFromCamera>0?un.point:Xn(Qe,Ni,Ei,1,z,It),zn=Bi(B.writingMode,Ei,zi,Mt);if(zn)return zn}const Pi=Yn(ri*pe.getoffsetX(B.glyphStartIndex),fi,Ai,I,ze,Qe,B.segment,B.lineStartIndex,B.lineStartIndex+B.lineLength,ye,W,st,St,It);if(!Pi)return{notEnoughRoom:!0};jt=[Pi]}for(const Pi of jt)r.addDynamicAttributes(Se,Pi.point,Pi.angle);return{}}function Xn(B,d,I,D,z,W){const ne=Wt(B.add(B.sub(d)._unit()),z,W).point,pe=I.sub(ne);return I.add(pe._mult(D/pe.mag()))}function Yn(B,d,I,D,z,W,ne,pe,ye,Se,ze,Qe,st,Mt){const St=D?B-d:B+d;let It=St>0?1:-1,ri=0;D&&(It*=-1,ri=Math.PI),It<0&&(ri+=Math.PI);let fi=It>0?pe+ne:pe+ne+1,Ai=z,jt=z,Pi=0,Ei=0;const Vi=Math.abs(St),Ni=[];for(;Pi+Ei<=Vi;){if(fi+=It,fi<pe||fi>=ye)return null;if(jt=Ai,Ni.push(Ai),Ai=Qe[fi],Ai===void 0){const Wn=new r.pointGeometry(Se.getx(fi),Se.gety(fi)),Ir=Wt(Wn,ze,Mt);if(Ir.signedDistanceFromCamera>0)Ai=Qe[fi]=Ir.point;else{const Fr=fi-It;Ai=Xn(Pi===0?W:new r.pointGeometry(Se.getx(Fr),Se.gety(Fr)),Wn,jt,Vi-Pi+1,ze,Mt)}}Pi+=Ei,Ei=jt.dist(Ai)}const un=(Vi-Pi)/Ei,zi=Ai.sub(jt),zn=zi.mult(un)._add(jt);zn._add(zi._unit()._perp()._mult(I*It));const vn=ri+Math.atan2(Ai.y-jt.y,Ai.x-jt.x);return Ni.push(zn),{point:zn,angle:st?vn:0,path:Ni}}const Kr=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function jn(B,d){for(let I=0;I<B;I++){const D=d.length;d.resize(D+4),d.float32.set(Kr,3*D)}}function cn(B,d,I){const D=d[0],z=d[1];return B[0]=I[0]*D+I[4]*z+I[12],B[1]=I[1]*D+I[5]*z+I[13],B[3]=I[3]*D+I[7]*z+I[15],B}const mn=100;class er{constructor(d,I=new ae(d.width+200,d.height+200,25),D=new ae(d.width+200,d.height+200,25)){this.transform=d,this.grid=I,this.ignoredGrid=D,this.pitchfactor=Math.cos(d._pitch)*d.cameraToCenterDistance,this.screenRightBoundary=d.width+mn,this.screenBottomBoundary=d.height+mn,this.gridRightBoundary=d.width+200,this.gridBottomBoundary=d.height+200,this.perspectiveRatioCutoff=.6}placeCollisionBox(d,I,D,z,W,ne){const pe=this.projectAndGetPerspectiveRatio(z,d.anchorPointX,d.anchorPointY,ne),ye=D*pe.perspectiveRatio,Se=d.x1*ye+pe.point.x,ze=d.y1*ye+pe.point.y,Qe=d.x2*ye+pe.point.x,st=d.y2*ye+pe.point.y;return!this.isInsideGrid(Se,ze,Qe,st)||I!=="always"&&this.grid.hitTest(Se,ze,Qe,st,I,W)||pe.perspectiveRatio<this.perspectiveRatioCutoff?{box:[],offscreen:!1}:{box:[Se,ze,Qe,st],offscreen:this.isOffscreen(Se,ze,Qe,st)}}placeCollisionCircles(d,I,D,z,W,ne,pe,ye,Se,ze,Qe,st,Mt,St){const It=[],ri=new r.pointGeometry(I.anchorX,I.anchorY),fi=Wt(ri,ne,St),Ai=di(this.transform.cameraToCenterDistance,fi.signedDistanceFromCamera),jt=(ze?W/Ai:W*Ai)/r.ONE_EM,Pi=Wt(ri,pe,St).point,Ei=fn(jt,z,I.lineOffsetX*jt,I.lineOffsetY*jt,!1,Pi,ri,I,D,pe,{},!1,St);let Vi=!1,Ni=!1,un=!0;if(Ei){const zi=.5*st*Ai+Mt,zn=new r.pointGeometry(-100,-100),vn=new r.pointGeometry(this.screenRightBoundary,this.screenBottomBoundary),Wn=new Me,Ir=Ei.first,Fr=Ei.last;let j=[];for(let we=Ir.path.length-1;we>=1;we--)j.push(Ir.path[we]);for(let we=1;we<Fr.path.length;we++)j.push(Fr.path[we]);const K=2.5*zi;if(ye){const we=j.map(je=>Wt(je,ye,St));j=we.some(je=>je.signedDistanceFromCamera<=0)?[]:we.map(je=>je.point)}let ue=[];if(j.length>0){const we=j[0].clone(),je=j[0].clone();for(let Je=1;Je<j.length;Je++)we.x=Math.min(we.x,j[Je].x),we.y=Math.min(we.y,j[Je].y),je.x=Math.max(je.x,j[Je].x),je.y=Math.max(je.y,j[Je].y);ue=we.x>=zn.x&&je.x<=vn.x&&we.y>=zn.y&&je.y<=vn.y?[j]:je.x<zn.x||we.x>vn.x||je.y<zn.y||we.y>vn.y?[]:r.clipLine([j],zn.x,zn.y,vn.x,vn.y)}for(const we of ue){Wn.reset(we,.25*zi);let je=0;je=Wn.length<=.5*zi?1:Math.ceil(Wn.paddedLength/K)+1;for(let Je=0;Je<je;Je++){const tt=Je/Math.max(je-1,1),at=Wn.lerp(tt),pt=at.x+mn,Ct=at.y+mn;It.push(pt,Ct,zi,0);const ai=pt-zi,ki=Ct-zi,wi=pt+zi,pi=Ct+zi;if(un=un&&this.isOffscreen(ai,ki,wi,pi),Ni=Ni||this.isInsideGrid(ai,ki,wi,pi),d!=="always"&&this.grid.hitTestCircle(pt,Ct,zi,d,Qe)&&(Vi=!0,!Se))return{circles:[],offscreen:!1,collisionDetected:Vi}}}}return{circles:!Se&&Vi||!Ni||Ai<this.perspectiveRatioCutoff?[]:It,offscreen:un,collisionDetected:Vi}}queryRenderedSymbols(d){if(d.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const I=[];let D=1/0,z=1/0,W=-1/0,ne=-1/0;for(const ze of d){const Qe=new r.pointGeometry(ze.x+mn,ze.y+mn);D=Math.min(D,Qe.x),z=Math.min(z,Qe.y),W=Math.max(W,Qe.x),ne=Math.max(ne,Qe.y),I.push(Qe)}const pe=this.grid.query(D,z,W,ne).concat(this.ignoredGrid.query(D,z,W,ne)),ye={},Se={};for(const ze of pe){const Qe=ze.key;if(ye[Qe.bucketInstanceId]===void 0&&(ye[Qe.bucketInstanceId]={}),ye[Qe.bucketInstanceId][Qe.featureIndex])continue;const st=[new r.pointGeometry(ze.x1,ze.y1),new r.pointGeometry(ze.x2,ze.y1),new r.pointGeometry(ze.x2,ze.y2),new r.pointGeometry(ze.x1,ze.y2)];r.polygonIntersectsPolygon(I,st)&&(ye[Qe.bucketInstanceId][Qe.featureIndex]=!0,Se[Qe.bucketInstanceId]===void 0&&(Se[Qe.bucketInstanceId]=[]),Se[Qe.bucketInstanceId].push(Qe.featureIndex))}return Se}insertCollisionBox(d,I,D,z,W,ne){(D?this.ignoredGrid:this.grid).insert({bucketInstanceId:z,featureIndex:W,collisionGroupID:ne,overlapMode:I},d[0],d[1],d[2],d[3])}insertCollisionCircles(d,I,D,z,W,ne){const pe=D?this.ignoredGrid:this.grid,ye={bucketInstanceId:z,featureIndex:W,collisionGroupID:ne,overlapMode:I};for(let Se=0;Se<d.length;Se+=4)pe.insertCircle(ye,d[Se],d[Se+1],d[Se+2])}projectAndGetPerspectiveRatio(d,I,D,z){let W;return z?(W=[I,D,z(I,D),1],r.transformMat4(W,W,d)):(W=[I,D,0,1],cn(W,W,d)),{point:new r.pointGeometry((W[0]/W[3]+1)/2*this.transform.width+mn,(-W[1]/W[3]+1)/2*this.transform.height+mn),perspectiveRatio:.5+this.transform.cameraToCenterDistance/W[3]*.5}}isOffscreen(d,I,D,z){return D<mn||d>=this.screenRightBoundary||z<mn||I>this.screenBottomBoundary}isInsideGrid(d,I,D,z){return D>=0&&d<this.gridRightBoundary&&z>=0&&I<this.gridBottomBoundary}getViewportMatrix(){const d=r.identity([]);return r.translate(d,d,[-100,-100,0]),d}}function yn(B,d,I){return d*(r.EXTENT/(B.tileSize*Math.pow(2,I-B.tileID.overscaledZ)))}class Ln{constructor(d,I,D,z){this.opacity=d?Math.max(0,Math.min(1,d.opacity+(d.placed?I:-I))):z&&D?1:0,this.placed=D}isHidden(){return this.opacity===0&&!this.placed}}class lr{constructor(d,I,D,z,W){this.text=new Ln(d?d.text:null,I,D,W),this.icon=new Ln(d?d.icon:null,I,z,W)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class oo{constructor(d,I,D){this.text=d,this.icon=I,this.skipFade=D}}class ln{constructor(){this.invProjMatrix=r.create(),this.viewportMatrix=r.create(),this.circles=[]}}class qe{constructor(d,I,D,z,W){this.bucketInstanceId=d,this.featureIndex=I,this.sourceLayerIndex=D,this.bucketIndex=z,this.tileID=W}}class To{constructor(d){this.crossSourceCollisions=d,this.maxGroupID=0,this.collisionGroups={}}get(d){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[d]){const I=++this.maxGroupID;this.collisionGroups[d]={ID:I,predicate:D=>D.collisionGroupID===I}}return this.collisionGroups[d]}}function bo(B,d,I,D,z){const{horizontalAlign:W,verticalAlign:ne}=r.getAnchorAlignment(B),pe=-(W-.5)*d,ye=-(ne-.5)*I,Se=r.evaluateVariableOffset(B,D);return new r.pointGeometry(pe+Se[0]*z,ye+Se[1]*z)}function co(B,d,I,D,z,W){const{x1:ne,x2:pe,y1:ye,y2:Se,anchorPointX:ze,anchorPointY:Qe}=B,st=new r.pointGeometry(d,I);return D&&st._rotate(z?W:-W),{x1:ne+st.x,y1:ye+st.y,x2:pe+st.x,y2:Se+st.y,anchorPointX:ze,anchorPointY:Qe}}class Pe{constructor(d,I,D,z,W){this.transform=d.clone(),this.terrain=I,this.collisionIndex=new er(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=D,this.retainedQueryData={},this.collisionGroups=new To(z),this.collisionCircleArrays={},this.prevPlacement=W,W&&(W.prevPlacement=void 0),this.placedOrientations={}}getBucketParts(d,I,D,z){const W=D.getBucket(I),ne=D.latestFeatureIndex;if(!W||!ne||I.id!==W.layerIds[0])return;const pe=D.collisionBoxArray,ye=W.layers[0].layout,Se=Math.pow(2,this.transform.zoom-D.tileID.overscaledZ),ze=D.tileSize/r.EXTENT,Qe=this.transform.calculatePosMatrix(D.tileID.toUnwrapped()),st=ye.get("text-pitch-alignment")==="map",Mt=ye.get("text-rotation-alignment")==="map",St=yn(D,1,this.transform.zoom),It=et(Qe,st,Mt,this.transform,St);let ri=null;if(st){const Ai=vt(Qe,st,Mt,this.transform,St);ri=r.multiply([],this.transform.labelPlaneMatrix,Ai)}this.retainedQueryData[W.bucketInstanceId]=new qe(W.bucketInstanceId,ne,W.sourceLayerIndex,W.index,D.tileID);const fi={bucket:W,layout:ye,posMatrix:Qe,textLabelPlaneMatrix:It,labelToScreenMatrix:ri,scale:Se,textPixelRatio:ze,holdingForFade:D.holdingForFade(),collisionBoxArray:pe,partiallyEvaluatedTextSize:r.evaluateSizeForZoom(W.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(W.sourceID)};if(z)for(const Ai of W.sortKeyRanges){const{sortKey:jt,symbolInstanceStart:Pi,symbolInstanceEnd:Ei}=Ai;d.push({sortKey:jt,symbolInstanceStart:Pi,symbolInstanceEnd:Ei,parameters:fi})}else d.push({symbolInstanceStart:0,symbolInstanceEnd:W.symbolInstances.length,parameters:fi})}attemptAnchorPlacement(d,I,D,z,W,ne,pe,ye,Se,ze,Qe,st,Mt,St,It,ri){const fi=[st.textOffset0,st.textOffset1],Ai=bo(d,D,z,fi,W),jt=this.collisionIndex.placeCollisionBox(co(I,Ai.x,Ai.y,ne,pe,this.transform.angle),Qe,ye,Se,ze.predicate,ri);if((!It||this.collisionIndex.placeCollisionBox(co(It,Ai.x,Ai.y,ne,pe,this.transform.angle),Qe,ye,Se,ze.predicate,ri).box.length!==0)&&jt.box.length>0){let Pi;if(this.prevPlacement&&this.prevPlacement.variableOffsets[st.crossTileID]&&this.prevPlacement.placements[st.crossTileID]&&this.prevPlacement.placements[st.crossTileID].text&&(Pi=this.prevPlacement.variableOffsets[st.crossTileID].anchor),st.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");return this.variableOffsets[st.crossTileID]={textOffset:fi,width:D,height:z,anchor:d,textBoxScale:W,prevAnchor:Pi},this.markUsedJustification(Mt,d,st,St),Mt.allowVerticalPlacement&&(this.markUsedOrientation(Mt,St,st),this.placedOrientations[st.crossTileID]=St),{shift:Ai,placedGlyphBoxes:jt}}}placeLayerBucketPart(d,I,D){const{bucket:z,layout:W,posMatrix:ne,textLabelPlaneMatrix:pe,labelToScreenMatrix:ye,textPixelRatio:Se,holdingForFade:ze,collisionBoxArray:Qe,partiallyEvaluatedTextSize:st,collisionGroup:Mt}=d.parameters,St=W.get("text-optional"),It=W.get("icon-optional"),ri=r.getOverlapMode(W,"text-overlap","text-allow-overlap"),fi=ri==="always",Ai=r.getOverlapMode(W,"icon-overlap","icon-allow-overlap"),jt=Ai==="always",Pi=W.get("text-rotation-alignment")==="map",Ei=W.get("text-pitch-alignment")==="map",Vi=W.get("icon-text-fit")!=="none",Ni=W.get("symbol-z-order")==="viewport-y",un=fi&&(jt||!z.hasIconData()||It),zi=jt&&(fi||!z.hasTextData()||St);!z.collisionArrays&&Qe&&z.deserializeCollisionBoxes(Qe);const zn=(vn,Wn)=>{if(I[vn.crossTileID])return;if(ze)return void(this.placements[vn.crossTileID]=new oo(!1,!1,!1));let Ir=!1,Fr=!1,j=!0,K=null,ue={box:null,offscreen:null},we={box:null,offscreen:null},je=null,Je=null,tt=null,at=0,pt=0,Ct=0;Wn.textFeatureIndex?at=Wn.textFeatureIndex:vn.useRuntimeCollisionCircles&&(at=vn.featureIndex),Wn.verticalTextFeatureIndex&&(pt=Wn.verticalTextFeatureIndex);const ai=this.retainedQueryData[z.bucketInstanceId].tileID,ki=this.terrain?(Oi,qt)=>this.terrain.getElevation(ai,Oi,qt):null;for(const Oi of["textBox","verticalTextBox","iconBox","verticalIconBox"]){const qt=Wn[Oi];qt&&(qt.elevation=ki?ki(qt.anchorPointX,qt.anchorPointY):0)}const wi=Wn.textBox;if(wi){const Oi=Qt=>{let Ki=r.WritingMode.horizontal;if(z.allowVerticalPlacement&&!Qt&&this.prevPlacement){const tn=this.prevPlacement.placedOrientations[vn.crossTileID];tn&&(this.placedOrientations[vn.crossTileID]=tn,Ki=tn,this.markUsedOrientation(z,Ki,vn))}return Ki},qt=(Qt,Ki)=>{if(z.allowVerticalPlacement&&vn.numVerticalGlyphVertices>0&&Wn.verticalTextBox){for(const tn of z.writingModes)if(tn===r.WritingMode.vertical?(ue=Ki(),we=ue):ue=Qt(),ue&&ue.box&&ue.box.length)break}else ue=Qt()};if(W.get("text-variable-anchor")){let Qt=W.get("text-variable-anchor");if(this.prevPlacement&&this.prevPlacement.variableOffsets[vn.crossTileID]){const Ui=this.prevPlacement.variableOffsets[vn.crossTileID];Qt.indexOf(Ui.anchor)>0&&(Qt=Qt.filter(Fn=>Fn!==Ui.anchor),Qt.unshift(Ui.anchor))}const Ki=(Ui,Fn,Sn)=>{const Sr=Ui.x2-Ui.x1,Rn=Ui.y2-Ui.y1,vo=vn.textBoxScale,Ao=Vi&&Ai==="never"?Fn:null;let Zr={box:[],offscreen:!1};const Hr=ri!=="never"?2*Qt.length:Qt.length;for(let yo=0;yo<Hr;++yo){const ko=this.attemptAnchorPlacement(Qt[yo%Qt.length],Ui,Sr,Rn,vo,Pi,Ei,Se,ne,Mt,yo>=Qt.length?ri:"never",vn,z,Sn,Ao,ki);if(ko&&(Zr=ko.placedGlyphBoxes,Zr&&Zr.box&&Zr.box.length)){Ir=!0,K=ko.shift;break}}return Zr};qt(()=>Ki(wi,Wn.iconBox,r.WritingMode.horizontal),()=>{const Ui=Wn.verticalTextBox;return z.allowVerticalPlacement&&!(ue&&ue.box&&ue.box.length)&&vn.numVerticalGlyphVertices>0&&Ui?Ki(Ui,Wn.verticalIconBox,r.WritingMode.vertical):{box:null,offscreen:null}}),ue&&(Ir=ue.box,j=ue.offscreen);const tn=Oi(ue&&ue.box);if(!Ir&&this.prevPlacement){const Ui=this.prevPlacement.variableOffsets[vn.crossTileID];Ui&&(this.variableOffsets[vn.crossTileID]=Ui,this.markUsedJustification(z,Ui.anchor,vn,tn))}}else{const Qt=(Ki,tn)=>{const Ui=this.collisionIndex.placeCollisionBox(Ki,ri,Se,ne,Mt.predicate,ki);return Ui&&Ui.box&&Ui.box.length&&(this.markUsedOrientation(z,tn,vn),this.placedOrientations[vn.crossTileID]=tn),Ui};qt(()=>Qt(wi,r.WritingMode.horizontal),()=>{const Ki=Wn.verticalTextBox;return z.allowVerticalPlacement&&vn.numVerticalGlyphVertices>0&&Ki?Qt(Ki,r.WritingMode.vertical):{box:null,offscreen:null}}),Oi(ue&&ue.box&&ue.box.length)}}if(je=ue,Ir=je&&je.box&&je.box.length>0,j=je&&je.offscreen,vn.useRuntimeCollisionCircles){const Oi=z.text.placedSymbolArray.get(vn.centerJustifiedTextSymbolIndex),qt=r.evaluateSizeForFeature(z.textSizeData,st,Oi),Qt=W.get("text-padding");Je=this.collisionIndex.placeCollisionCircles(ri,Oi,z.lineVertexArray,z.glyphOffsetArray,qt,ne,pe,ye,D,Ei,Mt.predicate,vn.collisionCircleDiameter,Qt,ki),Je.circles.length&&Je.collisionDetected&&!D&&r.warnOnce("Collisions detected, but collision boxes are not shown"),Ir=fi||Je.circles.length>0&&!Je.collisionDetected,j=j&&Je.offscreen}if(Wn.iconFeatureIndex&&(Ct=Wn.iconFeatureIndex),Wn.iconBox){const Oi=qt=>{const Qt=Vi&&K?co(qt,K.x,K.y,Pi,Ei,this.transform.angle):qt;return this.collisionIndex.placeCollisionBox(Qt,Ai,Se,ne,Mt.predicate,ki)};we&&we.box&&we.box.length&&Wn.verticalIconBox?(tt=Oi(Wn.verticalIconBox),Fr=tt.box.length>0):(tt=Oi(Wn.iconBox),Fr=tt.box.length>0),j=j&&tt.offscreen}const pi=St||vn.numHorizontalGlyphVertices===0&&vn.numVerticalGlyphVertices===0,on=It||vn.numIconVertices===0;if(pi||on?on?pi||(Fr=Fr&&Ir):Ir=Fr&&Ir:Fr=Ir=Fr&&Ir,Ir&&je&&je.box&&this.collisionIndex.insertCollisionBox(je.box,ri,W.get("text-ignore-placement"),z.bucketInstanceId,we&&we.box&&pt?pt:at,Mt.ID),Fr&&tt&&this.collisionIndex.insertCollisionBox(tt.box,Ai,W.get("icon-ignore-placement"),z.bucketInstanceId,Ct,Mt.ID),Je&&(Ir&&this.collisionIndex.insertCollisionCircles(Je.circles,ri,W.get("text-ignore-placement"),z.bucketInstanceId,at,Mt.ID),D)){const Oi=z.bucketInstanceId;let qt=this.collisionCircleArrays[Oi];qt===void 0&&(qt=this.collisionCircleArrays[Oi]=new ln);for(let Qt=0;Qt<Je.circles.length;Qt+=4)qt.circles.push(Je.circles[Qt+0]),qt.circles.push(Je.circles[Qt+1]),qt.circles.push(Je.circles[Qt+2]),qt.circles.push(Je.collisionDetected?1:0)}if(vn.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");if(z.bucketInstanceId===0)throw new Error("bucket.bucketInstanceId can't be 0");this.placements[vn.crossTileID]=new oo(Ir||un,Fr||zi,j||z.justReloaded),I[vn.crossTileID]=!0};if(Ni){if(d.symbolInstanceStart!==0)throw new Error("bucket.bucketInstanceId should be 0");const vn=z.getSortedSymbolIndexes(this.transform.angle);for(let Wn=vn.length-1;Wn>=0;--Wn){const Ir=vn[Wn];zn(z.symbolInstances.get(Ir),z.collisionArrays[Ir])}}else for(let vn=d.symbolInstanceStart;vn<d.symbolInstanceEnd;vn++)zn(z.symbolInstances.get(vn),z.collisionArrays[vn]);if(D&&z.bucketInstanceId in this.collisionCircleArrays){const vn=this.collisionCircleArrays[z.bucketInstanceId];r.invert(vn.invProjMatrix,ne),vn.viewportMatrix=this.collisionIndex.getViewportMatrix()}z.justReloaded=!1}markUsedJustification(d,I,D,z){let W;W=z===r.WritingMode.vertical?D.verticalPlacedTextSymbolIndex:{left:D.leftJustifiedTextSymbolIndex,center:D.centerJustifiedTextSymbolIndex,right:D.rightJustifiedTextSymbolIndex}[r.getAnchorJustification(I)];const ne=[D.leftJustifiedTextSymbolIndex,D.centerJustifiedTextSymbolIndex,D.rightJustifiedTextSymbolIndex,D.verticalPlacedTextSymbolIndex];for(const pe of ne)pe>=0&&(d.text.placedSymbolArray.get(pe).crossTileID=W>=0&&pe!==W?0:D.crossTileID)}markUsedOrientation(d,I,D){const z=I===r.WritingMode.horizontal||I===r.WritingMode.horizontalOnly?I:0,W=I===r.WritingMode.vertical?I:0,ne=[D.leftJustifiedTextSymbolIndex,D.centerJustifiedTextSymbolIndex,D.rightJustifiedTextSymbolIndex];for(const pe of ne)d.text.placedSymbolArray.get(pe).placedOrientation=z;D.verticalPlacedTextSymbolIndex&&(d.text.placedSymbolArray.get(D.verticalPlacedTextSymbolIndex).placedOrientation=W)}commit(d){this.commitTime=d,this.zoomAtLastRecencyCheck=this.transform.zoom;const I=this.prevPlacement;let D=!1;this.prevZoomAdjustment=I?I.zoomAdjustment(this.transform.zoom):0;const z=I?I.symbolFadeChange(d):1,W=I?I.opacities:{},ne=I?I.variableOffsets:{},pe=I?I.placedOrientations:{};for(const ye in this.placements){const Se=this.placements[ye],ze=W[ye];ze?(this.opacities[ye]=new lr(ze,z,Se.text,Se.icon),D=D||Se.text!==ze.text.placed||Se.icon!==ze.icon.placed):(this.opacities[ye]=new lr(null,z,Se.text,Se.icon,Se.skipFade),D=D||Se.text||Se.icon)}for(const ye in W){const Se=W[ye];if(!this.opacities[ye]){const ze=new lr(Se,z,!1,!1);ze.isHidden()||(this.opacities[ye]=ze,D=D||Se.text.placed||Se.icon.placed)}}for(const ye in ne)this.variableOffsets[ye]||!this.opacities[ye]||this.opacities[ye].isHidden()||(this.variableOffsets[ye]=ne[ye]);for(const ye in pe)this.placedOrientations[ye]||!this.opacities[ye]||this.opacities[ye].isHidden()||(this.placedOrientations[ye]=pe[ye]);if(I&&I.lastPlacementChangeTime===void 0)throw new Error("Last placement time for previous placement is not defined");D?this.lastPlacementChangeTime=d:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=I?I.lastPlacementChangeTime:d)}updateLayerOpacities(d,I){const D={};for(const z of I){const W=z.getBucket(d);W&&z.latestFeatureIndex&&d.id===W.layerIds[0]&&this.updateBucketOpacities(W,D,z.collisionBoxArray)}}updateBucketOpacities(d,I,D){d.hasTextData()&&d.text.opacityVertexArray.clear(),d.hasIconData()&&d.icon.opacityVertexArray.clear(),d.hasIconCollisionBoxData()&&d.iconCollisionBox.collisionVertexArray.clear(),d.hasTextCollisionBoxData()&&d.textCollisionBox.collisionVertexArray.clear();const z=d.layers[0].layout,W=new lr(null,0,!1,!1,!0),ne=z.get("text-allow-overlap"),pe=z.get("icon-allow-overlap"),ye=z.get("text-variable-anchor"),Se=z.get("text-rotation-alignment")==="map",ze=z.get("text-pitch-alignment")==="map",Qe=z.get("icon-text-fit")!=="none",st=new lr(null,0,ne&&(pe||!d.hasIconData()||z.get("icon-optional")),pe&&(ne||!d.hasTextData()||z.get("text-optional")),!0);!d.collisionArrays&&D&&(d.hasIconCollisionBoxData()||d.hasTextCollisionBoxData())&&d.deserializeCollisionBoxes(D);const Mt=(St,It,ri)=>{for(let fi=0;fi<It/4;fi++)St.opacityVertexArray.emplaceBack(ri)};for(let St=0;St<d.symbolInstances.length;St++){const It=d.symbolInstances.get(St),{numHorizontalGlyphVertices:ri,numVerticalGlyphVertices:fi,crossTileID:Ai}=It;let jt=this.opacities[Ai];I[Ai]?jt=W:jt||(jt=st,this.opacities[Ai]=jt),I[Ai]=!0;const Pi=It.numIconVertices>0,Ei=this.placedOrientations[It.crossTileID],Vi=Ei===r.WritingMode.vertical,Ni=Ei===r.WritingMode.horizontal||Ei===r.WritingMode.horizontalOnly;if(ri>0||fi>0){const un=ei(jt.text);Mt(d.text,ri,Vi?_t:un),Mt(d.text,fi,Ni?_t:un);const zi=jt.text.isHidden();[It.rightJustifiedTextSymbolIndex,It.centerJustifiedTextSymbolIndex,It.leftJustifiedTextSymbolIndex].forEach(Wn=>{Wn>=0&&(d.text.placedSymbolArray.get(Wn).hidden=zi||Vi?1:0)}),It.verticalPlacedTextSymbolIndex>=0&&(d.text.placedSymbolArray.get(It.verticalPlacedTextSymbolIndex).hidden=zi||Ni?1:0);const zn=this.variableOffsets[It.crossTileID];zn&&this.markUsedJustification(d,zn.anchor,It,Ei);const vn=this.placedOrientations[It.crossTileID];vn&&(this.markUsedJustification(d,"left",It,vn),this.markUsedOrientation(d,vn,It))}if(Pi){const un=ei(jt.icon),zi=!(Qe&&It.verticalPlacedIconSymbolIndex&&Vi);It.placedIconSymbolIndex>=0&&(Mt(d.icon,It.numIconVertices,zi?un:_t),d.icon.placedSymbolArray.get(It.placedIconSymbolIndex).hidden=jt.icon.isHidden()),It.verticalPlacedIconSymbolIndex>=0&&(Mt(d.icon,It.numVerticalIconVertices,zi?_t:un),d.icon.placedSymbolArray.get(It.verticalPlacedIconSymbolIndex).hidden=jt.icon.isHidden())}if(d.hasIconCollisionBoxData()||d.hasTextCollisionBoxData()){const un=d.collisionArrays[St];if(un){let zi=new r.pointGeometry(0,0);if(un.textBox||un.verticalTextBox){let vn=!0;if(ye){const Wn=this.variableOffsets[Ai];Wn?(zi=bo(Wn.anchor,Wn.width,Wn.height,Wn.textOffset,Wn.textBoxScale),Se&&zi._rotate(ze?this.transform.angle:-this.transform.angle)):vn=!1}un.textBox&&Ie(d.textCollisionBox.collisionVertexArray,jt.text.placed,!vn||Vi,zi.x,zi.y),un.verticalTextBox&&Ie(d.textCollisionBox.collisionVertexArray,jt.text.placed,!vn||Ni,zi.x,zi.y)}const zn=Boolean(!Ni&&un.verticalIconBox);un.iconBox&&Ie(d.iconCollisionBox.collisionVertexArray,jt.icon.placed,zn,Qe?zi.x:0,Qe?zi.y:0),un.verticalIconBox&&Ie(d.iconCollisionBox.collisionVertexArray,jt.icon.placed,!zn,Qe?zi.x:0,Qe?zi.y:0)}}}if(d.sortFeatures(this.transform.angle),this.retainedQueryData[d.bucketInstanceId]&&(this.retainedQueryData[d.bucketInstanceId].featureSortOrder=d.featureSortOrder),d.hasTextData()&&d.text.opacityVertexBuffer&&d.text.opacityVertexBuffer.updateData(d.text.opacityVertexArray),d.hasIconData()&&d.icon.opacityVertexBuffer&&d.icon.opacityVertexBuffer.updateData(d.icon.opacityVertexArray),d.hasIconCollisionBoxData()&&d.iconCollisionBox.collisionVertexBuffer&&d.iconCollisionBox.collisionVertexBuffer.updateData(d.iconCollisionBox.collisionVertexArray),d.hasTextCollisionBoxData()&&d.textCollisionBox.collisionVertexBuffer&&d.textCollisionBox.collisionVertexBuffer.updateData(d.textCollisionBox.collisionVertexArray),d.text.opacityVertexArray.length!==d.text.layoutVertexArray.length/4)throw new Error(`bucket.text.opacityVertexArray.length (= ${d.text.opacityVertexArray.length}) !== bucket.text.layoutVertexArray.length (= ${d.text.layoutVertexArray.length}) / 4`);if(d.icon.opacityVertexArray.length!==d.icon.layoutVertexArray.length/4)throw new Error(`bucket.icon.opacityVertexArray.length (= ${d.icon.opacityVertexArray.length}) !== bucket.icon.layoutVertexArray.length (= ${d.icon.layoutVertexArray.length}) / 4`);if(d.bucketInstanceId in this.collisionCircleArrays){const St=this.collisionCircleArrays[d.bucketInstanceId];d.placementInvProjMatrix=St.invProjMatrix,d.placementViewportMatrix=St.viewportMatrix,d.collisionCircleArray=St.circles,delete this.collisionCircleArrays[d.bucketInstanceId]}}symbolFadeChange(d){return this.fadeDuration===0?1:(d-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(d){return Math.max(0,(this.transform.zoom-d)/1.5)}hasTransitions(d){return this.stale||d-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(d,I){const D=this.zoomAtLastRecencyCheck===I?1-this.zoomAdjustment(I):1;return this.zoomAtLastRecencyCheck=I,this.commitTime+this.fadeDuration*D>d}setStale(){this.stale=!0}}function Ie(B,d,I,D,z){B.emplaceBack(d?1:0,I?1:0,D||0,z||0),B.emplaceBack(d?1:0,I?1:0,D||0,z||0),B.emplaceBack(d?1:0,I?1:0,D||0,z||0),B.emplaceBack(d?1:0,I?1:0,D||0,z||0)}const He=Math.pow(2,25),ct=Math.pow(2,24),gt=Math.pow(2,17),Rt=Math.pow(2,16),Ge=Math.pow(2,9),Ht=Math.pow(2,8),Bt=Math.pow(2,1);function ei(B){if(B.opacity===0&&!B.placed)return 0;if(B.opacity===1&&B.placed)return 4294967295;const d=B.placed?1:0,I=Math.floor(127*B.opacity);return I*He+d*ct+I*gt+d*Rt+I*Ge+d*Ht+I*Bt+d}const _t=0;class Ri{constructor(d){this._sortAcrossTiles=d.layout.get("symbol-z-order")!=="viewport-y"&&!d.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(d,I,D,z,W){const ne=this._bucketParts;for(;this._currentTileIndex<d.length;)if(I.getBucketParts(ne,z,d[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,W())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,ne.sort((pe,ye)=>pe.sortKey-ye.sortKey));this._currentPartIndex<ne.length;)if(I.placeLayerBucketPart(ne[this._currentPartIndex],this._seenCrossTileIDs,D),this._currentPartIndex++,W())return!0;return!1}}class Ii{constructor(d,I,D,z,W,ne,pe,ye){this.placement=new Pe(d,I,ne,pe,ye),this._currentPlacementIndex=D.length-1,this._forceFullPlacement=z,this._showCollisionBoxes=W,this._done=!1}isDone(){return this._done}continuePlacement(d,I,D){const z=r.exported.now(),W=()=>{const ne=r.exported.now()-z;return!this._forceFullPlacement&&ne>2};for(;this._currentPlacementIndex>=0;){const ne=I[d[this._currentPlacementIndex]],pe=this.placement.collisionIndex.transform.zoom;if(ne.type==="symbol"&&(!ne.minzoom||ne.minzoom<=pe)&&(!ne.maxzoom||ne.maxzoom>pe)){if(this._inProgressLayer||(this._inProgressLayer=new Ri(ne)),this._inProgressLayer.continuePlacement(D[ne.source],this.placement,this._showCollisionBoxes,ne,W))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(d){return this.placement.commit(d),this.placement}}const In=512/r.EXTENT/2;class kn{constructor(d,I,D){this.tileID=d,this.indexedSymbolInstances={},this.bucketInstanceId=D;for(let z=0;z<I.length;z++){const W=I.get(z),ne=W.key;this.indexedSymbolInstances[ne]||(this.indexedSymbolInstances[ne]=[]),this.indexedSymbolInstances[ne].push({crossTileID:W.crossTileID,coord:this.getScaledCoordinates(W,d)})}}getScaledCoordinates(d,I){const D=In/Math.pow(2,I.canonical.z-this.tileID.canonical.z);return{x:Math.floor((I.canonical.x*r.EXTENT+d.anchorX)*D),y:Math.floor((I.canonical.y*r.EXTENT+d.anchorY)*D)}}findMatches(d,I,D){const z=this.tileID.canonical.z<I.canonical.z?1:Math.pow(2,this.tileID.canonical.z-I.canonical.z);for(let W=0;W<d.length;W++){const ne=d.get(W);if(ne.crossTileID)continue;const pe=this.indexedSymbolInstances[ne.key];if(!pe)continue;const ye=this.getScaledCoordinates(ne,I);for(const Se of pe)if(Math.abs(Se.coord.x-ye.x)<=z&&Math.abs(Se.coord.y-ye.y)<=z&&!D[Se.crossTileID]){D[Se.crossTileID]=!0,ne.crossTileID=Se.crossTileID;break}}}}class xt{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class Pn{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(d){const I=Math.round((d-this.lng)/360);if(I!==0)for(const D in this.indexes){const z=this.indexes[D],W={};for(const ne in z){const pe=z[ne];pe.tileID=pe.tileID.unwrapTo(pe.tileID.wrap+I),W[pe.tileID.key]=pe}this.indexes[D]=W}this.lng=d}addBucket(d,I,D){if(this.indexes[d.overscaledZ]&&this.indexes[d.overscaledZ][d.key]){if(this.indexes[d.overscaledZ][d.key].bucketInstanceId===I.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(d.overscaledZ,this.indexes[d.overscaledZ][d.key])}for(let W=0;W<I.symbolInstances.length;W++)I.symbolInstances.get(W).crossTileID=0;this.usedCrossTileIDs[d.overscaledZ]||(this.usedCrossTileIDs[d.overscaledZ]={});const z=this.usedCrossTileIDs[d.overscaledZ];for(const W in this.indexes){const ne=this.indexes[W];if(Number(W)>d.overscaledZ)for(const pe in ne){const ye=ne[pe];ye.tileID.isChildOf(d)&&ye.findMatches(I.symbolInstances,d,z)}else{const pe=ne[d.scaledTo(Number(W)).key];pe&&pe.findMatches(I.symbolInstances,d,z)}}for(let W=0;W<I.symbolInstances.length;W++){const ne=I.symbolInstances.get(W);ne.crossTileID||(ne.crossTileID=D.generate(),z[ne.crossTileID]=!0)}return this.indexes[d.overscaledZ]===void 0&&(this.indexes[d.overscaledZ]={}),this.indexes[d.overscaledZ][d.key]=new kn(d,I.symbolInstances,I.bucketInstanceId),!0}removeBucketCrossTileIDs(d,I){for(const D in I.indexedSymbolInstances)for(const z of I.indexedSymbolInstances[D])delete this.usedCrossTileIDs[d][z.crossTileID]}removeStaleBuckets(d){let I=!1;for(const D in this.indexes){const z=this.indexes[D];for(const W in z)d[z[W].bucketInstanceId]||(this.removeBucketCrossTileIDs(D,z[W]),delete z[W],I=!0)}return I}}class $n{constructor(){this.layerIndexes={},this.crossTileIDs=new xt,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(d,I,D){let z=this.layerIndexes[d.id];z===void 0&&(z=this.layerIndexes[d.id]=new Pn);let W=!1;const ne={};z.handleWrapJump(D);for(const pe of I){const ye=pe.getBucket(d);ye&&d.id===ye.layerIds[0]&&(ye.bucketInstanceId||(ye.bucketInstanceId=++this.maxBucketInstanceId),z.addBucket(pe.tileID,ye,this.crossTileIDs)&&(W=!0),ne[ye.bucketInstanceId]=!0)}return z.removeStaleBuckets(ne)&&(W=!0),W}pruneUnusedLayers(d){const I={};d.forEach(D=>{I[D]=!0});for(const D in this.layerIndexes)I[D]||delete this.layerIndexes[D]}}var Pr=r.createLayout([{name:"a_pos",type:"Int16",components:2}]);class cr extends r.Evented{constructor(d){super(),this.sourceCache=d,this._tiles={},this._renderableTilesKeys=[],this._sourceTileCache={},this.renderHistory=[],this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.deltaZoom=1,this.renderHistorySize=d._cache.max,d.usedForTerrain=!0,d.tileSize=this.tileSize*2**this.deltaZoom}destruct(){this.sourceCache.usedForTerrain=!1,this.sourceCache.tileSize=null;for(const d in this._tiles){const I=this._tiles[d];I.textures.forEach(D=>D.destroy()),I.textures=[]}}update(d,I){this.sourceCache.update(d,I),this._renderableTilesKeys=[];for(const D of d.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,reparseOverscaled:!1,terrain:I}))this._renderableTilesKeys.push(D.key),this._tiles[D.key]||(D.posMatrix=new Float64Array(16),r.ortho(D.posMatrix,0,r.EXTENT,0,r.EXTENT,0,1),this._tiles[D.key]=new Fe(D,this.tileSize))}removeOutdated(d){const I={};this.renderHistory=this.renderHistory.filter((D,z)=>this.renderHistory.indexOf(D)===z).slice(0,this.renderHistorySize);for(const D of this._renderableTilesKeys)I[D]=!0;for(const D of this.renderHistory)I[D]=!0;for(const D in this._tiles)I[D]||(this._tiles[D].clearTextures(d),delete this._tiles[D])}getRenderableTiles(){return this._renderableTilesKeys.map(d=>this.getTileByID(d))}getTileByID(d){return this._tiles[d]}getTerrainCoords(d){const I={};for(const D of this._renderableTilesKeys){const z=this._tiles[D].tileID;if(z.canonical.equals(d.canonical)){const W=d.clone();W.posMatrix=new Float64Array(16),r.ortho(W.posMatrix,0,r.EXTENT,0,r.EXTENT,0,1),I[D]=W}else if(z.canonical.isChildOf(d.canonical)){const W=d.clone();W.posMatrix=new Float64Array(16);const ne=z.canonical.z-d.canonical.z,pe=z.canonical.x-(z.canonical.x>>ne<<ne),ye=z.canonical.y-(z.canonical.y>>ne<<ne),Se=r.EXTENT>>ne;r.ortho(W.posMatrix,0,Se,0,Se,0,1),r.translate(W.posMatrix,W.posMatrix,[-pe*Se,-ye*Se,0]),I[D]=W}else if(d.canonical.isChildOf(z.canonical)){const W=d.clone();W.posMatrix=new Float64Array(16);const ne=d.canonical.z-z.canonical.z,pe=d.canonical.x-(d.canonical.x>>ne<<ne),ye=d.canonical.y-(d.canonical.y>>ne<<ne),Se=r.EXTENT>>ne;r.ortho(W.posMatrix,0,r.EXTENT,0,r.EXTENT,0,1),r.translate(W.posMatrix,W.posMatrix,[pe*Se,ye*Se,0]),r.scale(W.posMatrix,W.posMatrix,[1/2**ne,1/2**ne,0]),I[D]=W}}return I}getSourceTile(d,I){const D=this.sourceCache._source;let z=d.overscaledZ-this.deltaZoom;if(z>D.maxzoom&&(z=D.maxzoom),z<D.minzoom)return null;this._sourceTileCache[d.key]||(this._sourceTileCache[d.key]=d.scaledTo(z).key);let W=this.sourceCache.getTileByID(this._sourceTileCache[d.key]);if((!W||!W.dem)&&I)for(;z>=D.minzoom&&(!W||!W.dem);)W=this.sourceCache.getTileByID(d.scaledTo(z--).key);return W}tilesAfterTime(d=Date.now()){return Object.values(this._tiles).filter(I=>I.timeLoaded>=d)}}class Cr{constructor(d,I,D){this.style=d,this.sourceCache=new cr(I),this.options=D,this.exaggeration=typeof D.exaggeration=="number"?D.exaggeration:1,this.elevationOffset=typeof D.elevationOffset=="number"?D.elevationOffset:450,this.qualityFactor=2,this.meshSize=128,this._demMatrixCache={},this.coordsIndex=[],this._coordsTextureSize=1024,this.clearRerenderCache()}getDEMElevation(d,I,D,z=r.EXTENT){if(!(I>=0&&I<z&&D>=0&&D<z))return this.elevationOffset;let W=0;const ne=this.getTerrainData(d);if(ne.tile&&ne.tile.dem){const pe=r.transformMat4$1([],[I/z*r.EXTENT,D/z*r.EXTENT],ne.u_terrain_matrix),ye=[pe[0]*ne.tile.dem.dim,pe[1]*ne.tile.dem.dim],Se=[Math.floor(ye[0]),Math.floor(ye[1])],ze=ne.tile.dem.get(Se[0],Se[1]),Qe=ne.tile.dem.get(Se[0],Se[1]+1),st=ne.tile.dem.get(Se[0]+1,Se[1]),Mt=ne.tile.dem.get(Se[0]+1,Se[1]+1);W=r.number(r.number(ze,Qe,ye[0]-Se[0]),r.number(st,Mt,ye[0]-Se[0]),ye[1]-Se[1])}return W}rememberForRerender(d,I){for(const D in this.sourceCache._tiles){const z=this.sourceCache._tiles[D];(z.tileID.equals(I)||z.tileID.isChildOf(I))&&(d===this.sourceCache.sourceCache.id&&(z.timeLoaded=Date.now()),this._rerender[d]=this._rerender[d]||{},this._rerender[d][z.tileID.key]=!0)}}needsRerender(d,I){return this._rerender[d]&&this._rerender[d][I.key]}clearRerenderCache(){this._rerender={}}getElevation(d,I,D,z=r.EXTENT){return(this.getDEMElevation(d,I,D,z)+this.elevationOffset)*this.exaggeration}getTerrainData(d){if(!this._emptyDemTexture){const z=this.style.map.painter.context,W=new r.RGBAImage({width:1,height:1},new Uint8Array(4));this._emptyDepthTexture=new T(z,W,z.gl.RGBA,{premultiply:!1}),this._emptyDemUnpack=[0,0,0,0],this._emptyDemTexture=new T(z,new r.RGBAImage({width:1,height:1}),z.gl.RGBA,{premultiply:!1}),this._emptyDemTexture.bind(z.gl.NEAREST,z.gl.CLAMP_TO_EDGE),this._emptyDemMatrix=r.identity([])}const I=this.sourceCache.getSourceTile(d,!0);if(I&&I.dem&&(!I.demTexture||I.needsTerrainPrepare)){const z=this.style.map.painter.context;I.demTexture=this.style.map.painter.getTileTexture(I.dem.stride),I.demTexture?I.demTexture.update(I.dem.getPixels(),{premultiply:!1}):I.demTexture=new T(z,I.dem.getPixels(),z.gl.RGBA,{premultiply:!1}),I.demTexture.bind(z.gl.NEAREST,z.gl.CLAMP_TO_EDGE),I.needsTerrainPrepare=!1}const D=I&&I+I.tileID.key+d.key;if(D&&!this._demMatrixCache[D]){const z=this.sourceCache.sourceCache._source.maxzoom;let W=d.canonical.z-I.tileID.canonical.z;d.overscaledZ>d.canonical.z&&(d.canonical.z>=z?W=d.canonical.z-z:r.warnOnce("cannot calculate elevation if elevation maxzoom > source.maxzoom"));const ne=d.canonical.x-(d.canonical.x>>W<<W),pe=d.canonical.y-(d.canonical.y>>W<<W),ye=r.fromScaling(new Float64Array(16),[1/(r.EXTENT<<W),1/(r.EXTENT<<W),0]);r.translate(ye,ye,[ne*r.EXTENT,pe*r.EXTENT,0]),this._demMatrixCache[d.key]={matrix:ye,coord:d}}return{u_depth:2,u_terrain:3,u_terrain_dim:I&&I.dem&&I.dem.dim||1,u_terrain_matrix:D?this._demMatrixCache[d.key].matrix:this._emptyDemMatrix,u_terrain_unpack:I&&I.dem&&I.dem.getUnpackVector()||this._emptyDemUnpack,u_terrain_offset:this.elevationOffset,u_terrain_exaggeration:this.exaggeration,texture:(I&&I.demTexture||this._emptyDemTexture).texture,depthTexture:(this._fboDepthTexture||this._emptyDepthTexture).texture,tile:I}}getRTTFramebuffer(){const d=this.style.map.painter;if(!this._rttFramebuffer){const I=this.sourceCache.tileSize*this.qualityFactor;this._rttFramebuffer=d.context.createFramebuffer(I,I,!0),this._rttFramebuffer.depthAttachment.set(d.context.createRenderbuffer(d.context.gl.DEPTH_COMPONENT16,I,I))}return this._rttFramebuffer}getFramebuffer(d){const I=this.style.map.painter,D=I.width/devicePixelRatio,z=I.height/devicePixelRatio;return!this._fbo||this._fbo.width===D&&this._fbo.height===z||(this._fbo.destroy(),this._fboCoordsTexture.destroy(),this._fboDepthTexture.destroy(),delete this._fbo,delete this._fboDepthTexture,delete this._fboCoordsTexture),this._fboCoordsTexture||(this._fboCoordsTexture=new T(I.context,{width:D,height:z,data:null},I.context.gl.RGBA,{premultiply:!1}),this._fboCoordsTexture.bind(I.context.gl.NEAREST,I.context.gl.CLAMP_TO_EDGE)),this._fboDepthTexture||(this._fboDepthTexture=new T(I.context,{width:D,height:z,data:null},I.context.gl.RGBA,{premultiply:!1}),this._fboDepthTexture.bind(I.context.gl.NEAREST,I.context.gl.CLAMP_TO_EDGE)),this._fbo||(this._fbo=I.context.createFramebuffer(D,z,!0),this._fbo.depthAttachment.set(I.context.createRenderbuffer(I.context.gl.DEPTH_COMPONENT16,D,z))),this._fbo.colorAttachment.set(d==="coords"?this._fboCoordsTexture.texture:this._fboDepthTexture.texture),this._fbo}getCoordsTexture(){const d=this.style.map.painter.context;if(this._coordsTexture)return this._coordsTexture;const I=new Uint8Array(this._coordsTextureSize*this._coordsTextureSize*4);for(let W=0,ne=0;W<this._coordsTextureSize;W++)for(let pe=0;pe<this._coordsTextureSize;pe++,ne+=4)I[ne+0]=255&pe,I[ne+1]=255&W,I[ne+2]=pe>>8<<4|W>>8,I[ne+3]=0;const D=new r.RGBAImage({width:this._coordsTextureSize,height:this._coordsTextureSize},new Uint8Array(I.buffer)),z=new T(d,D,d.gl.RGBA,{premultiply:!1});return z.bind(d.gl.NEAREST,d.gl.CLAMP_TO_EDGE),this._coordsTexture=z,z}pointCoordinate(d){const I=new Uint8Array(4),D=this.style.map.painter,z=D.context,W=z.gl;z.bindFramebuffer.set(this.getFramebuffer("coords").framebuffer),W.readPixels(d.x,D.height/devicePixelRatio-d.y-1,1,1,W.RGBA,W.UNSIGNED_BYTE,I),z.bindFramebuffer.set(null);const ne=I[0]+(I[2]>>4<<8),pe=I[1]+((15&I[2])<<8),ye=this.coordsIndex[255-I[3]],Se=ye&&this.sourceCache.getTileByID(ye);if(!Se)return null;const ze=this._coordsTextureSize,Qe=(1<<Se.tileID.canonical.z)*ze;return new r.MercatorCoordinate((Se.tileID.canonical.x*ze+ne)/Qe,(Se.tileID.canonical.y*ze+pe)/Qe,this.getElevation(Se.tileID,ne,pe,ze))}getTerrainMesh(){if(this._mesh)return this._mesh;const d=this.style.map.painter.context,I=new r.PosArray,D=new r.TriangleIndexArray,z=this.meshSize,W=r.EXTENT/z,ne=z*z;for(let pe=0;pe<=z;pe++)for(let ye=0;ye<=z;ye++)I.emplaceBack(ye*W,pe*W);for(let pe=0;pe<ne;pe+=z+1)for(let ye=0;ye<z;ye++)D.emplaceBack(ye+pe,z+ye+pe+1,z+ye+pe+2),D.emplaceBack(ye+pe,z+ye+pe+2,ye+pe+1);return this._mesh={indexBuffer:d.createIndexBuffer(D),vertexBuffer:d.createVertexBuffer(I,Pr.members),segments:r.SegmentVector.simpleSegment(0,0,I.length,D.length)},this._mesh}getMinMaxElevation(d){const I=this.getTerrainData(d).tile,D={minElevation:null,maxElevation:null};return I&&I.dem&&(D.minElevation=(I.dem.min+this.elevationOffset)*this.exaggeration,D.maxElevation=(I.dem.max+this.elevationOffset)*this.exaggeration),D}}const Or=(B,d)=>r.emitValidationErrors(B,d&&d.filter(I=>I.identifier!=="source.canvas")),Er=r.pick(Zt,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData"]),Jo=r.pick(Zt,["setCenter","setZoom","setBearing","setPitch"]),_o=function(){const B={},d=r.spec.$version;for(const I in r.spec.$root){const D=r.spec.$root[I];if(D.required){let z=null;z=I==="version"?d:D.type==="array"?[]:{},z!=null&&(B[I]=z)}}return B}();class Qo extends r.Evented{constructor(d,I={}){super(),this.map=d,this.dispatcher=new Le($e(),this),this.imageManager=new M,this.imageManager.setEventedParent(this),this.glyphManager=new Z(d._requestManager,I.localIdeographFontFamily),this.lineAtlas=new ke(256,512),this.crossTileSymbolIndex=new $n,this._layers={},this._serializedLayers={},this._order=[],this.sourceCaches={},this.zoomHistory=new r.ZoomHistory,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("setReferrer",r.getReferrer());const D=this;this._rtlTextPluginCallback=Qo.registerForPluginStateChange(z=>{D.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:z.pluginStatus,pluginURL:z.pluginURL},(W,ne)=>{if(r.triggerPluginCompletionEvent(W),ne&&ne.every(pe=>pe))for(const pe in D.sourceCaches)D.sourceCaches[pe].reload()})}),this.on("data",z=>{if(z.dataType!=="source"||z.sourceDataType!=="metadata")return;const W=this.sourceCaches[z.sourceId];if(!W)return;const ne=W.getSource();if(ne&&ne.vectorLayerIds)for(const pe in this._layers){const ye=this._layers[pe];ye.source===ne.id&&this._validateLayer(ye)}})}loadURL(d,I={}){this.fire(new r.Event("dataloading",{dataType:"style"}));const D=typeof I.validate!="boolean"||I.validate,z=this.map._requestManager.transformRequest(d,r.ResourceType.Style);this._request=r.getJSON(z,(W,ne)=>{this._request=null,W?this.fire(new r.ErrorEvent(W)):ne&&this._load(ne,D)})}loadJSON(d,I={}){this.fire(new r.Event("dataloading",{dataType:"style"})),this._request=r.exported.frame(()=>{this._request=null,this._load(d,I.validate!==!1)})}loadEmpty(){this.fire(new r.Event("dataloading",{dataType:"style"})),this._load(_o,!1)}_load(d,I){if(I&&Or(this,r.validateStyle(d)))return;this._loaded=!0,this.stylesheet=d;for(const z in d.sources)this.addSource(z,d.sources[z],{validate:!1});d.sprite?this._loadSprite(d.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(d.glyphs);const D=li(this.stylesheet.layers);this._order=D.map(z=>z.id),this._layers={},this._serializedLayers={};for(let z of D)z=r.createStyleLayer(z),z.setEventedParent(this,{layer:{id:z.id}}),this._layers[z.id]=z,this._serializedLayers[z.id]=z.serialize();this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new ie(this.stylesheet.light),this.setTerrain(this.stylesheet.terrain),this.fire(new r.Event("data",{dataType:"style"})),this.fire(new r.Event("style.load"))}_loadSprite(d){this._spriteRequest=function(I,D,z,W){let ne,pe,ye;const Se=z>1?"@2x":"";let ze=r.getJSON(D.transformRequest(D.normalizeSpriteURL(I,Se,".json"),r.ResourceType.SpriteJSON),(Mt,St)=>{ze=null,ye||(ye=Mt,ne=St,st())}),Qe=r.getImage(D.transformRequest(D.normalizeSpriteURL(I,Se,".png"),r.ResourceType.SpriteImage),(Mt,St)=>{Qe=null,ye||(ye=Mt,pe=St,st())});function st(){if(ye)W(ye);else if(ne&&pe){const Mt=r.exported.getImageData(pe),St={};for(const It in ne){const{width:ri,height:fi,x:Ai,y:jt,sdf:Pi,pixelRatio:Ei,stretchX:Vi,stretchY:Ni,content:un}=ne[It],zi=new r.RGBAImage({width:ri,height:fi});r.RGBAImage.copy(Mt,zi,{x:Ai,y:jt},{x:0,y:0},{width:ri,height:fi}),St[It]={data:zi,pixelRatio:Ei,sdf:Pi,stretchX:Vi,stretchY:Ni,content:un}}W(null,St)}}return{cancel(){ze&&(ze.cancel(),ze=null),Qe&&(Qe.cancel(),Qe=null)}}}(d,this.map._requestManager,this.map.getPixelRatio(),(I,D)=>{if(this._spriteRequest=null,I)this.fire(new r.ErrorEvent(I));else if(D)for(const z in D)this.imageManager.addImage(z,D[z]);this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new r.Event("data",{dataType:"style"}))})}_validateLayer(d){const I=this.sourceCaches[d.source];if(!I)return;const D=d.sourceLayer;if(!D)return;const z=I.getSource();(z.type==="geojson"||z.vectorLayerIds&&z.vectorLayerIds.indexOf(D)===-1)&&this.fire(new r.ErrorEvent(new Error(`Source layer "${D}" does not exist on source "${z.id}" as specified by style layer "${d.id}".`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const d in this.sourceCaches)if(!this.sourceCaches[d].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeLayers(d){const I=[];for(const D of d){const z=this._layers[D];z.type!=="custom"&&I.push(z.serialize())}return I}hasTransitions(){if(this.light&&this.light.hasTransition())return!0;for(const d in this.sourceCaches)if(this.sourceCaches[d].hasTransition())return!0;for(const d in this._layers)if(this._layers[d].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(d){if(!this._loaded)return;const I=this._changed;if(this._changed){const z=Object.keys(this._updatedLayers),W=Object.keys(this._removedLayers);(z.length||W.length)&&this._updateWorkerLayers(z,W);for(const ne in this._updatedSources){const pe=this._updatedSources[ne];if(pe==="reload")this._reloadSource(ne);else{if(pe!=="clear")throw new Error(`Invalid action ${pe}`);this._clearSource(ne)}}this._updateTilesForChangedImages();for(const ne in this._updatedPaintProps)this._layers[ne].updateTransitions(d);this.light.updateTransitions(d),this._resetUpdates()}const D={};for(const z in this.sourceCaches){const W=this.sourceCaches[z];D[z]=W.used,W.used=!1}for(const z of this._order){const W=this._layers[z];W.recalculate(d,this._availableImages),!W.isHidden(d.zoom)&&W.source&&(this.sourceCaches[W.source].used=!0)}for(const z in D){const W=this.sourceCaches[z];D[z]!==W.used&&W.fire(new r.Event("data",{sourceDataType:"visibility",dataType:"source",sourceId:z}))}this.light.recalculate(d),this.z=d.zoom,I&&this.fire(new r.Event("data",{dataType:"style"}))}_updateTilesForChangedImages(){const d=Object.keys(this._changedImages);if(d.length){for(const I in this.sourceCaches)this.sourceCaches[I].reloadTilesForDependencies(["icons","patterns"],d);this._changedImages={}}}_updateWorkerLayers(d,I){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(d),removedIds:I})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}}setTerrain(d){if(this._checkLoaded(),this._terrainDataCallback&&this.off("data",this._terrainDataCallback),this._terrainfreezeElevationCallback&&this.map.off("freezeElevation",this._terrainfreezeElevationCallback),d){const I=this.sourceCaches[d.source];if(!I)throw new Error(`cannot load terrain, because there exists no source with ID: ${d.source}`);this.terrain=new Cr(this,I,d),this.map.transform.updateElevation(this.terrain),this._terrainfreezeElevationCallback=D=>{D.freeze?this.map.transform.freezeElevation=!0:(this.map.transform.freezeElevation=!1,this.map.transform.recalculateZoom(this.terrain))},this._terrainDataCallback=D=>{D.tile&&(D.sourceId===d.source?(this.map.transform.updateElevation(this.terrain),this.terrain.rememberForRerender(D.sourceId,D.tile.tileID)):D.source.type==="geojson"&&this.terrain.rememberForRerender(D.sourceId,D.tile.tileID))},this.on("data",this._terrainDataCallback),this.map.on("freezeElevation",this._terrainfreezeElevationCallback)}else this.terrain&&this.terrain.sourceCache.destruct(),this.terrain=null,this.map.transform.updateElevation(this.terrain);this.map.fire(new r.Event("terrain",{terrain:d}))}setState(d){if(this._checkLoaded(),Or(this,r.validateStyle(d)))return!1;(d=r.clone$1(d)).layers=li(d.layers);const I=function(z,W){if(!z)return[{command:Zt.setStyle,args:[W]}];let ne=[];try{if(!v(z.version,W.version))return[{command:Zt.setStyle,args:[W]}];v(z.center,W.center)||ne.push({command:Zt.setCenter,args:[W.center]}),v(z.zoom,W.zoom)||ne.push({command:Zt.setZoom,args:[W.zoom]}),v(z.bearing,W.bearing)||ne.push({command:Zt.setBearing,args:[W.bearing]}),v(z.pitch,W.pitch)||ne.push({command:Zt.setPitch,args:[W.pitch]}),v(z.sprite,W.sprite)||ne.push({command:Zt.setSprite,args:[W.sprite]}),v(z.glyphs,W.glyphs)||ne.push({command:Zt.setGlyphs,args:[W.glyphs]}),v(z.transition,W.transition)||ne.push({command:Zt.setTransition,args:[W.transition]}),v(z.light,W.light)||ne.push({command:Zt.setLight,args:[W.light]});const pe={},ye=[];(function(ze,Qe,st,Mt){let St;for(St in Qe=Qe||{},ze=ze||{})Object.prototype.hasOwnProperty.call(ze,St)&&(Object.prototype.hasOwnProperty.call(Qe,St)||Li(St,st,Mt));for(St in Qe)Object.prototype.hasOwnProperty.call(Qe,St)&&(Object.prototype.hasOwnProperty.call(ze,St)?v(ze[St],Qe[St])||(ze[St].type==="geojson"&&Qe[St].type==="geojson"&&mi(ze,Qe,St)?st.push({command:Zt.setGeoJSONSourceData,args:[St,Qe[St].data]}):Vt(St,Qe,st,Mt)):Ci(St,Qe,st))})(z.sources,W.sources,ye,pe);const Se=[];z.layers&&z.layers.forEach(ze=>{pe[ze.source]?ne.push({command:Zt.removeLayer,args:[ze.id]}):Se.push(ze)}),ne=ne.concat(ye),function(ze,Qe,st){Qe=Qe||[];const Mt=(ze=ze||[]).map(xi),St=Qe.map(xi),It=ze.reduce(Jt,{}),ri=Qe.reduce(Jt,{}),fi=Mt.slice(),Ai=Object.create(null);let jt,Pi,Ei,Vi,Ni,un,zi;for(jt=0,Pi=0;jt<Mt.length;jt++)Ei=Mt[jt],Object.prototype.hasOwnProperty.call(ri,Ei)?Pi++:(st.push({command:Zt.removeLayer,args:[Ei]}),fi.splice(fi.indexOf(Ei,Pi),1));for(jt=0,Pi=0;jt<St.length;jt++)Ei=St[St.length-1-jt],fi[fi.length-1-jt]!==Ei&&(Object.prototype.hasOwnProperty.call(It,Ei)?(st.push({command:Zt.removeLayer,args:[Ei]}),fi.splice(fi.lastIndexOf(Ei,fi.length-Pi),1)):Pi++,un=fi[fi.length-jt],st.push({command:Zt.addLayer,args:[ri[Ei],un]}),fi.splice(fi.length-jt,0,Ei),Ai[Ei]=!0);for(jt=0;jt<St.length;jt++)if(Ei=St[jt],Vi=It[Ei],Ni=ri[Ei],!Ai[Ei]&&!v(Vi,Ni))if(v(Vi.source,Ni.source)&&v(Vi["source-layer"],Ni["source-layer"])&&v(Vi.type,Ni.type)){for(zi in Qi(Vi.layout,Ni.layout,st,Ei,null,Zt.setLayoutProperty),Qi(Vi.paint,Ni.paint,st,Ei,null,Zt.setPaintProperty),v(Vi.filter,Ni.filter)||st.push({command:Zt.setFilter,args:[Ei,Ni.filter]}),v(Vi.minzoom,Ni.minzoom)&&v(Vi.maxzoom,Ni.maxzoom)||st.push({command:Zt.setLayerZoomRange,args:[Ei,Ni.minzoom,Ni.maxzoom]}),Vi)Object.prototype.hasOwnProperty.call(Vi,zi)&&zi!=="layout"&&zi!=="paint"&&zi!=="filter"&&zi!=="metadata"&&zi!=="minzoom"&&zi!=="maxzoom"&&(zi.indexOf("paint.")===0?Qi(Vi[zi],Ni[zi],st,Ei,zi.slice(6),Zt.setPaintProperty):v(Vi[zi],Ni[zi])||st.push({command:Zt.setLayerProperty,args:[Ei,zi,Ni[zi]]}));for(zi in Ni)Object.prototype.hasOwnProperty.call(Ni,zi)&&!Object.prototype.hasOwnProperty.call(Vi,zi)&&zi!=="layout"&&zi!=="paint"&&zi!=="filter"&&zi!=="metadata"&&zi!=="minzoom"&&zi!=="maxzoom"&&(zi.indexOf("paint.")===0?Qi(Vi[zi],Ni[zi],st,Ei,zi.slice(6),Zt.setPaintProperty):v(Vi[zi],Ni[zi])||st.push({command:Zt.setLayerProperty,args:[Ei,zi,Ni[zi]]}))}else st.push({command:Zt.removeLayer,args:[Ei]}),un=fi[fi.lastIndexOf(Ei)+1],st.push({command:Zt.addLayer,args:[Ni,un]})}(Se,W.layers,ne)}catch(pe){console.warn("Unable to compute style diff:",pe),ne=[{command:Zt.setStyle,args:[W]}]}return ne}(this.serialize(),d).filter(z=>!(z.command in Jo));if(I.length===0)return!1;const D=I.filter(z=>!(z.command in Er));if(D.length>0)throw new Error(`Unimplemented: ${D.map(z=>z.command).join(", ")}.`);return I.forEach(z=>{z.command!=="setTransition"&&this[z.command].apply(this,z.args)}),this.stylesheet=d,!0}addImage(d,I){if(this.getImage(d))return this.fire(new r.ErrorEvent(new Error(`An image named "${d}" already exists.`)));this.imageManager.addImage(d,I),this._afterImageUpdated(d)}updateImage(d,I){this.imageManager.updateImage(d,I)}getImage(d){return this.imageManager.getImage(d)}removeImage(d){if(!this.getImage(d))return this.fire(new r.ErrorEvent(new Error(`An image named "${d}" does not exist.`)));this.imageManager.removeImage(d),this._afterImageUpdated(d)}_afterImageUpdated(d){this._availableImages=this.imageManager.listImages(),this._changedImages[d]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new r.Event("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(d,I,D={}){if(this._checkLoaded(),this.sourceCaches[d]!==void 0)throw new Error(`Source "${d}" already exists.`);if(!I.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(I).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(I.type)>=0&&this._validate(r.validateStyle.source,`sources.${d}`,I,null,D))return;this.map&&this.map._collectResourceTiming&&(I.collectResourceTiming=!0);const z=this.sourceCaches[d]=new Ye(d,I,this.dispatcher);z.style=this,z.setEventedParent(this,()=>({isSourceLoaded:this.loaded(),source:z.serialize(),sourceId:d})),z.onAdd(this.map),this._changed=!0}removeSource(d){if(this._checkLoaded(),this.sourceCaches[d]===void 0)throw new Error("There is no source with this ID");for(const D in this._layers)if(this._layers[D].source===d)return this.fire(new r.ErrorEvent(new Error(`Source "${d}" cannot be removed while layer "${D}" is using it.`)));const I=this.sourceCaches[d];delete this.sourceCaches[d],delete this._updatedSources[d],I.fire(new r.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:d})),I.setEventedParent(null),I.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(d,I){if(this._checkLoaded(),this.sourceCaches[d]===void 0)throw new Error(`There is no source with this ID=${d}`);const D=this.sourceCaches[d].getSource();if(D.type!=="geojson")throw new Error(`geojsonSource.type is ${D.type}, which is !== 'geojson`);D.setData(I),this._changed=!0}getSource(d){return this.sourceCaches[d]&&this.sourceCaches[d].getSource()}addLayer(d,I,D={}){this._checkLoaded();const z=d.id;if(this.getLayer(z))return void this.fire(new r.ErrorEvent(new Error(`Layer "${z}" already exists on this map.`)));let W;if(d.type==="custom"){if(Or(this,r.validateCustomStyleLayer(d)))return;W=r.createStyleLayer(d)}else{if(typeof d.source=="object"&&(this.addSource(z,d.source),d=r.clone$1(d),d=r.extend(d,{source:z})),this._validate(r.validateStyle.layer,`layers.${z}`,d,{arrayIndex:-1},D))return;W=r.createStyleLayer(d),this._validateLayer(W),W.setEventedParent(this,{layer:{id:z}}),this._serializedLayers[W.id]=W.serialize()}const ne=I?this._order.indexOf(I):this._order.length;if(I&&ne===-1)this.fire(new r.ErrorEvent(new Error(`Cannot add layer "${z}" before non-existing layer "${I}".`)));else{if(this._order.splice(ne,0,z),this._layerOrderChanged=!0,this._layers[z]=W,this._removedLayers[z]&&W.source&&W.type!=="custom"){const pe=this._removedLayers[z];delete this._removedLayers[z],pe.type!==W.type?this._updatedSources[W.source]="clear":(this._updatedSources[W.source]="reload",this.sourceCaches[W.source].pause())}this._updateLayer(W),W.onAdd&&W.onAdd(this.map)}}moveLayer(d,I){if(this._checkLoaded(),this._changed=!0,!this._layers[d])return void this.fire(new r.ErrorEvent(new Error(`The layer '${d}' does not exist in the map's style and cannot be moved.`)));if(d===I)return;const D=this._order.indexOf(d);this._order.splice(D,1);const z=I?this._order.indexOf(I):this._order.length;I&&z===-1?this.fire(new r.ErrorEvent(new Error(`Cannot move layer "${d}" before non-existing layer "${I}".`))):(this._order.splice(z,0,d),this._layerOrderChanged=!0)}removeLayer(d){this._checkLoaded();const I=this._layers[d];if(!I)return void this.fire(new r.ErrorEvent(new Error(`Cannot remove non-existing layer "${d}".`)));I.setEventedParent(null);const D=this._order.indexOf(d);this._order.splice(D,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[d]=I,delete this._layers[d],delete this._serializedLayers[d],delete this._updatedLayers[d],delete this._updatedPaintProps[d],I.onRemove&&I.onRemove(this.map)}getLayer(d){return this._layers[d]}hasLayer(d){return d in this._layers}setLayerZoomRange(d,I,D){this._checkLoaded();const z=this.getLayer(d);z?z.minzoom===I&&z.maxzoom===D||(I!=null&&(z.minzoom=I),D!=null&&(z.maxzoom=D),this._updateLayer(z)):this.fire(new r.ErrorEvent(new Error(`Cannot set the zoom range of non-existing layer "${d}".`)))}setFilter(d,I,D={}){this._checkLoaded();const z=this.getLayer(d);if(z){if(!v(z.filter,I))return I==null?(z.filter=void 0,void this._updateLayer(z)):void(this._validate(r.validateStyle.filter,`layers.${z.id}.filter`,I,null,D)||(z.filter=r.clone$1(I),this._updateLayer(z)))}else this.fire(new r.ErrorEvent(new Error(`Cannot filter non-existing layer "${d}".`)))}getFilter(d){return r.clone$1(this.getLayer(d).filter)}setLayoutProperty(d,I,D,z={}){this._checkLoaded();const W=this.getLayer(d);W?v(W.getLayoutProperty(I),D)||(W.setLayoutProperty(I,D,z),this._updateLayer(W)):this.fire(new r.ErrorEvent(new Error(`Cannot style non-existing layer "${d}".`)))}getLayoutProperty(d,I){const D=this.getLayer(d);if(D)return D.getLayoutProperty(I);this.fire(new r.ErrorEvent(new Error(`Cannot get style of non-existing layer "${d}".`)))}setPaintProperty(d,I,D,z={}){this._checkLoaded();const W=this.getLayer(d);W?v(W.getPaintProperty(I),D)||(W.setPaintProperty(I,D,z)&&this._updateLayer(W),this._changed=!0,this._updatedPaintProps[d]=!0):this.fire(new r.ErrorEvent(new Error(`Cannot style non-existing layer "${d}".`)))}getPaintProperty(d,I){return this.getLayer(d).getPaintProperty(I)}setFeatureState(d,I){this._checkLoaded();const D=d.source,z=d.sourceLayer,W=this.sourceCaches[D];if(W===void 0)return void this.fire(new r.ErrorEvent(new Error(`The source '${D}' does not exist in the map's style.`)));const ne=W.getSource().type;ne==="geojson"&&z?this.fire(new r.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):ne!=="vector"||z?(d.id===void 0&&this.fire(new r.ErrorEvent(new Error("The feature id parameter must be provided."))),W.setFeatureState(z,d.id,I)):this.fire(new r.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(d,I){this._checkLoaded();const D=d.source,z=this.sourceCaches[D];if(z===void 0)return void this.fire(new r.ErrorEvent(new Error(`The source '${D}' does not exist in the map's style.`)));const W=z.getSource().type,ne=W==="vector"?d.sourceLayer:void 0;W!=="vector"||ne?I&&typeof d.id!="string"&&typeof d.id!="number"?this.fire(new r.ErrorEvent(new Error("A feature id is required to remove its specific state property."))):z.removeFeatureState(ne,d.id,I):this.fire(new r.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}getFeatureState(d){this._checkLoaded();const I=d.source,D=d.sourceLayer,z=this.sourceCaches[I];if(z!==void 0)return z.getSource().type!=="vector"||D?(d.id===void 0&&this.fire(new r.ErrorEvent(new Error("The feature id parameter must be provided."))),z.getFeatureState(D,d.id)):void this.fire(new r.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new r.ErrorEvent(new Error(`The source '${I}' does not exist in the map's style.`)))}getTransition(){return r.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){return r.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,sources:r.mapObject(this.sourceCaches,d=>d.serialize()),layers:this._serializeLayers(this._order)},d=>d!==void 0)}_updateLayer(d){this._updatedLayers[d.id]=!0,d.source&&!this._updatedSources[d.source]&&this.sourceCaches[d.source].getSource().type!=="raster"&&(this._updatedSources[d.source]="reload",this.sourceCaches[d.source].pause()),this._changed=!0}_flattenAndSortRenderedFeatures(d){const I=ne=>this._layers[ne].type==="fill-extrusion",D={},z=[];for(let ne=this._order.length-1;ne>=0;ne--){const pe=this._order[ne];if(I(pe)){D[pe]=ne;for(const ye of d){const Se=ye[pe];if(Se)for(const ze of Se)z.push(ze)}}}z.sort((ne,pe)=>pe.intersectionZ-ne.intersectionZ);const W=[];for(let ne=this._order.length-1;ne>=0;ne--){const pe=this._order[ne];if(I(pe))for(let ye=z.length-1;ye>=0;ye--){const Se=z[ye].feature;if(D[Se.layer.id]<ne)break;W.push(Se),z.pop()}else for(const ye of d){const Se=ye[pe];if(Se)for(const ze of Se)W.push(ze.feature)}}return W}queryRenderedFeatures(d,I,D){I&&I.filter&&this._validate(r.validateStyle.filter,"queryRenderedFeatures.filter",I.filter,null,I);const z={};if(I&&I.layers){if(!Array.isArray(I.layers))return this.fire(new r.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(const ne of I.layers){const pe=this._layers[ne];if(!pe)return this.fire(new r.ErrorEvent(new Error(`The layer '${ne}' does not exist in the map's style and cannot be queried for features.`))),[];z[pe.source]=!0}}const W=[];I.availableImages=this._availableImages;for(const ne in this.sourceCaches)I.layers&&!z[ne]||W.push(he(this.sourceCaches[ne],this._layers,this._serializedLayers,d,I,D));return this.placement&&W.push(function(ne,pe,ye,Se,ze,Qe,st){const Mt={},St=Qe.queryRenderedSymbols(Se),It=[];for(const ri of Object.keys(St).map(Number))It.push(st[ri]);It.sort(me);for(const ri of It){const fi=ri.featureIndex.lookupSymbolFeatures(St[ri.bucketInstanceId],pe,ri.bucketIndex,ri.sourceLayerIndex,ze.filter,ze.layers,ze.availableImages,ne);for(const Ai in fi){const jt=Mt[Ai]=Mt[Ai]||[],Pi=fi[Ai];Pi.sort((Ei,Vi)=>{const Ni=ri.featureSortOrder;if(Ni){const un=Ni.indexOf(Ei.featureIndex);return Ni.indexOf(Vi.featureIndex)-un}return Vi.featureIndex-Ei.featureIndex});for(const Ei of Pi)jt.push(Ei)}}for(const ri in Mt)Mt[ri].forEach(fi=>{const Ai=fi.feature,jt=ye[ne[ri].source].getFeatureState(Ai.layer["source-layer"],Ai.id);Ai.source=Ai.layer.source,Ai.layer["source-layer"]&&(Ai.sourceLayer=Ai.layer["source-layer"]),Ai.state=jt});return Mt}(this._layers,this._serializedLayers,this.sourceCaches,d,I,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(W)}querySourceFeatures(d,I){I&&I.filter&&this._validate(r.validateStyle.filter,"querySourceFeatures.filter",I.filter,null,I);const D=this.sourceCaches[d];return D?function(z,W){const ne=z.getRenderableIds().map(Se=>z.getTileByID(Se)),pe=[],ye={};for(let Se=0;Se<ne.length;Se++){const ze=ne[Se],Qe=ze.tileID.canonical.key;ye[Qe]||(ye[Qe]=!0,ze.querySourceFeatures(pe,W))}return pe}(D,I):[]}addSourceType(d,I,D){return Qo.getSourceType(d)?D(new Error(`A source type called "${d}" already exists.`)):(Qo.setSourceType(d,I),I.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:d,url:I.workerSourceURL},D):D(null,null))}getLight(){return this.light.getLight()}setLight(d,I={}){this._checkLoaded();const D=this.light.getLight();let z=!1;for(const ne in d)if(!v(d[ne],D[ne])){z=!0;break}if(!z)return;const W={now:r.exported.now(),transition:r.extend({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(d,I),this.light.updateTransitions(W)}_validate(d,I,D,z,W={}){return(!W||W.validate!==!1)&&Or(this,d.call(r.validateStyle,r.extend({key:I,style:this.serialize(),value:D,styleSpec:r.spec},z)))}_remove(){this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),r.evented.off("pluginStateChange",this._rtlTextPluginCallback);for(const d in this._layers)this._layers[d].setEventedParent(null);for(const d in this.sourceCaches){const I=this.sourceCaches[d];I.setEventedParent(null),I.onRemove(this.map)}this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()}_clearSource(d){this.sourceCaches[d].clearTiles()}_reloadSource(d){this.sourceCaches[d].resume(),this.sourceCaches[d].reload()}_updateSources(d){for(const I in this.sourceCaches)this.sourceCaches[I].update(d,this.terrain)}_generateCollisionBoxes(){for(const d in this.sourceCaches)this._reloadSource(d)}_updatePlacement(d,I,D,z,W=!1){let ne=!1,pe=!1;const ye={};for(const Se of this._order){const ze=this._layers[Se];if(ze.type!=="symbol")continue;if(!ye[ze.source]){const st=this.sourceCaches[ze.source];ye[ze.source]=st.getRenderableIds(!0).map(Mt=>st.getTileByID(Mt)).sort((Mt,St)=>St.tileID.overscaledZ-Mt.tileID.overscaledZ||(Mt.tileID.isLessThan(St.tileID)?-1:1))}const Qe=this.crossTileSymbolIndex.addLayer(ze,ye[ze.source],d.center.lng);ne=ne||Qe}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((W=W||this._layerOrderChanged||D===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(r.exported.now(),d.zoom))&&(this.pauseablePlacement=new Ii(d,this.terrain,this._order,W,I,D,z,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,ye),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(r.exported.now()),pe=!0),ne&&this.pauseablePlacement.placement.setStale()),pe||ne)for(const Se of this._order){const ze=this._layers[Se];ze.type==="symbol"&&this.placement.updateLayerOpacities(ze,ye[ze.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(r.exported.now())}_releaseSymbolFadeTiles(){for(const d in this.sourceCaches)this.sourceCaches[d].releaseSymbolFadeTiles()}getImages(d,I,D){this.imageManager.getImages(I.icons,D),this._updateTilesForChangedImages();const z=this.sourceCaches[I.source];z&&z.setDependencies(I.tileID.key,I.type,I.icons)}getGlyphs(d,I,D){this.glyphManager.getGlyphs(I.stacks,D)}getResource(d,I,D){return r.makeRequest(I,D)}}Qo.getSourceType=function(B){return le[B]},Qo.setSourceType=function(B,d){le[B]=d},Qo.registerForPluginStateChange=r.registerForPluginStateChange;var il="attribute vec2 a_pos;uniform mat4 u_matrix;varying vec2 v_texture_pos;varying float v_depth;void main() {v_texture_pos=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos,get_elevation(a_pos),1.0);v_depth=gl_Position.z/gl_Position.w;}";const Do={prelude:Ot(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}
#ifdef TERRAIN3D
uniform sampler2D u_terrain;uniform float u_terrain_dim;uniform mat4 u_terrain_matrix;uniform vec4 u_terrain_unpack;uniform float u_terrain_offset;uniform float u_terrain_exaggeration;uniform highp sampler2D u_depth;
#endif
const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitShifts=vec4(1.)/bitSh;highp float unpack(highp vec4 color) {return dot(color,bitShifts);}highp float depthOpacity(vec3 frag) {
#ifdef TERRAIN3D
highp float d=unpack(texture2D(u_depth,frag.xy*0.5+0.5))+0.0001-frag.z;return 1.0-max(0.0,min(1.0,-d*500.0));
#else
return 1.0;
#endif
}float calculate_visibility(vec4 pos) {
#ifdef TERRAIN3D
vec3 frag=pos.xyz/pos.w;highp float d=depthOpacity(frag);if (d > 0.95) return 1.0;return (d+depthOpacity(frag+vec3(0.0,0.01,0.0)))/2.0;
#else
return 1.0;
#endif
}float ele(vec2 pos) {
#ifdef TERRAIN3D
vec4 rgb=(texture2D(u_terrain,pos)*255.0)*u_terrain_unpack;return rgb.r+rgb.g+rgb.b-u_terrain_unpack.a;
#else
return 0.0;
#endif
}float get_elevation(vec2 pos) {
#ifdef TERRAIN3D
vec2 coord=(u_terrain_matrix*vec4(pos,0.0,1.0)).xy*u_terrain_dim+1.0;vec2 f=fract(coord);vec2 c=(floor(coord)+0.5)/(u_terrain_dim+2.0);float d=1.0/(u_terrain_dim+2.0);float tl=ele(c);float tr=ele(c+vec2(d,0.0));float bl=ele(c+vec2(0.0,d));float br=ele(c+vec2(d,d));float elevation=mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);return (elevation+u_terrain_offset)*u_terrain_exaggeration;
#else
return 0.0;
#endif
}`),background:Ot(`uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),backgroundPattern:Ot(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:Ot(`varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);float ele=get_elevation(circle_center);v_visibility=calculate_visibility(u_matrix*vec4(circle_center,ele,1.0));if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,ele,1);} else {gl_Position=u_matrix*vec4(circle_center,ele,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),clippingMask:Ot("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:Ot(`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}`),heatmapTexture:Ot(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:Ot("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,get_elevation(a_pos),1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:Ot("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),debug:Ot("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,get_elevation(a_pos),1);}"),fill:Ot(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_FragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);}`),fillOutline:Ot(`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillOutlinePattern:Ot(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillPattern:Ot(`#ifdef GL_ES
precision highp float;
#endif
uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),fillExtrusion:Ot(`varying vec4 v_color;void main() {gl_FragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;
#ifdef TERRAIN3D
float baseDelta=10.0;float ele=get_elevation(a_centroid);
#else
float baseDelta=0.0;float ele=0.0;
#endif
base=max(0.0,ele+base-baseDelta);height=max(0.0,ele+height);float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),fillExtrusionPattern:Ot(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;
#ifdef TERRAIN3D
float baseDelta=10.0;float ele=get_elevation(a_centroid);
#else
float baseDelta=0.0;float ele=0.0;
#endif
base=max(0.0,ele+base-baseDelta);height=max(0.0,ele+height);float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),hillshadePrepare:Ot(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:Ot(`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;
#define PI 3.141592653589793
void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),line:Ot(`uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),lineGradient:Ot(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),linePattern:Ot(`#ifdef GL_ES
precision highp float;
#endif
uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),lineSDF:Ot(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),raster:Ot(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),symbolIcon:Ot(`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),z,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float visibility=calculate_visibility(projectedPoint);v_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));}`),symbolSDF:Ot(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),z,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),symbolTextAndIcon:Ot(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),z,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`),terrain:Ot("uniform sampler2D u_texture;varying vec2 v_texture_pos;void main() {gl_FragColor=texture2D(u_texture,v_texture_pos);}",il),terrainDepth:Ot("varying float v_depth;const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitMsk=vec4(0.,vec3(1./256.0));highp vec4 pack(highp float value) {highp vec4 comp=fract(value*bitSh);comp-=comp.xxyz*bitMsk;return comp;}void main() {gl_FragColor=pack(v_depth);}",il),terrainCoords:Ot("precision mediump float;uniform sampler2D u_texture;uniform float u_terrain_coords_id;varying vec2 v_texture_pos;void main() {vec4 rgba=texture2D(u_texture,v_texture_pos);gl_FragColor=vec4(rgba.r,rgba.g,rgba.b,u_terrain_coords_id);}",il)};function Ot(B,d){const I=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,D=d.match(/attribute ([\w]+) ([\w]+)/g),z=B.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),W=d.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),ne=W?W.concat(z):z,pe={};return{fragmentSource:B=B.replace(I,(ye,Se,ze,Qe,st)=>(pe[st]=!0,Se==="define"?`
#ifndef HAS_UNIFORM_u_${st}
varying ${ze} ${Qe} ${st};
#else
uniform ${ze} ${Qe} u_${st};
#endif
`:`
#ifdef HAS_UNIFORM_u_${st}
    ${ze} ${Qe} ${st} = u_${st};
#endif
`)),vertexSource:d=d.replace(I,(ye,Se,ze,Qe,st)=>{const Mt=Qe==="float"?"vec2":"vec4",St=st.match(/color/)?"color":Mt;return pe[st]?Se==="define"?`
#ifndef HAS_UNIFORM_u_${st}
uniform lowp float u_${st}_t;
attribute ${ze} ${Mt} a_${st};
varying ${ze} ${Qe} ${st};
#else
uniform ${ze} ${Qe} u_${st};
#endif
`:St==="vec4"?`
#ifndef HAS_UNIFORM_u_${st}
    ${st} = a_${st};
#else
    ${ze} ${Qe} ${st} = u_${st};
#endif
`:`
#ifndef HAS_UNIFORM_u_${st}
    ${st} = unpack_mix_${St}(a_${st}, u_${st}_t);
#else
    ${ze} ${Qe} ${st} = u_${st};
#endif
`:Se==="define"?`
#ifndef HAS_UNIFORM_u_${st}
uniform lowp float u_${st}_t;
attribute ${ze} ${Mt} a_${st};
#else
uniform ${ze} ${Qe} u_${st};
#endif
`:St==="vec4"?`
#ifndef HAS_UNIFORM_u_${st}
    ${ze} ${Qe} ${st} = a_${st};
#else
    ${ze} ${Qe} ${st} = u_${st};
#endif
`:`
#ifndef HAS_UNIFORM_u_${st}
    ${ze} ${Qe} ${st} = unpack_mix_${St}(a_${st}, u_${st}_t);
#else
    ${ze} ${Qe} ${st} = u_${st};
#endif
`}),staticAttributes:D,staticUniforms:ne}}class sr{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(d,I,D,z,W,ne,pe,ye,Se){this.context=d;let ze=this.boundPaintVertexBuffers.length!==z.length;for(let Qe=0;!ze&&Qe<z.length;Qe++)this.boundPaintVertexBuffers[Qe]!==z[Qe]&&(ze=!0);d.extVertexArrayObject&&this.vao&&this.boundProgram===I&&this.boundLayoutVertexBuffer===D&&!ze&&this.boundIndexBuffer===W&&this.boundVertexOffset===ne&&this.boundDynamicVertexBuffer===pe&&this.boundDynamicVertexBuffer2===ye&&this.boundDynamicVertexBuffer3===Se?(d.bindVertexArrayOES.set(this.vao),pe&&pe.bind(),W&&W.dynamicDraw&&W.bind(),ye&&ye.bind(),Se&&Se.bind()):this.freshBind(I,D,z,W,ne,pe,ye,Se)}freshBind(d,I,D,z,W,ne,pe,ye){let Se;const ze=d.numAttributes,Qe=this.context,st=Qe.gl;if(Qe.extVertexArrayObject)this.vao&&this.destroy(),this.vao=Qe.extVertexArrayObject.createVertexArrayOES(),Qe.bindVertexArrayOES.set(this.vao),Se=0,this.boundProgram=d,this.boundLayoutVertexBuffer=I,this.boundPaintVertexBuffers=D,this.boundIndexBuffer=z,this.boundVertexOffset=W,this.boundDynamicVertexBuffer=ne,this.boundDynamicVertexBuffer2=pe,this.boundDynamicVertexBuffer3=ye;else{Se=Qe.currentNumAttributes||0;for(let Mt=ze;Mt<Se;Mt++)st.disableVertexAttribArray(Mt)}I.enableAttributes(st,d);for(const Mt of D)Mt.enableAttributes(st,d);ne&&ne.enableAttributes(st,d),pe&&pe.enableAttributes(st,d),ye&&ye.enableAttributes(st,d),I.bind(),I.setVertexAttribPointers(st,d,W);for(const Mt of D)Mt.bind(),Mt.setVertexAttribPointers(st,d,W);ne&&(ne.bind(),ne.setVertexAttribPointers(st,d,W)),z&&z.bind(),pe&&(pe.bind(),pe.setVertexAttribPointers(st,d,W)),ye&&(ye.bind(),ye.setVertexAttribPointers(st,d,W)),Qe.currentNumAttributes=ze}destroy(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)}}function hr(B){const d=[];for(let I=0;I<B.length;I++){if(B[I]===null)continue;const D=B[I].split(" ");d.push(D.pop())}return d}class Nr{constructor(d,I,D,z,W,ne,pe){const ye=d.gl;this.program=ye.createProgram();const Se=hr(D.staticAttributes),ze=z?z.getBinderAttributes():[],Qe=Se.concat(ze),st=Do.prelude.staticUniforms?hr(Do.prelude.staticUniforms):[],Mt=D.staticUniforms?hr(D.staticUniforms):[],St=z?z.getBinderUniforms():[],It=st.concat(Mt).concat(St),ri=[];for(const Ni of It)ri.indexOf(Ni)<0&&ri.push(Ni);const fi=z?z.defines():[];ne&&fi.push("#define OVERDRAW_INSPECTOR;"),pe&&fi.push("#define TERRAIN3D;");const Ai=fi.concat(Do.prelude.fragmentSource,D.fragmentSource).join(`
`),jt=fi.concat(Do.prelude.vertexSource,D.vertexSource).join(`
`),Pi=ye.createShader(ye.FRAGMENT_SHADER);if(ye.isContextLost())return void(this.failedToCreate=!0);ye.shaderSource(Pi,Ai),ye.compileShader(Pi),ye.attachShader(this.program,Pi);const Ei=ye.createShader(ye.VERTEX_SHADER);if(ye.isContextLost())return void(this.failedToCreate=!0);ye.shaderSource(Ei,jt),ye.compileShader(Ei),ye.attachShader(this.program,Ei),this.attributes={};const Vi={};this.numAttributes=Qe.length;for(let Ni=0;Ni<this.numAttributes;Ni++)Qe[Ni]&&(ye.bindAttribLocation(this.program,Ni,Qe[Ni]),this.attributes[Qe[Ni]]=Ni);ye.linkProgram(this.program),ye.deleteShader(Ei),ye.deleteShader(Pi);for(let Ni=0;Ni<ri.length;Ni++){const un=ri[Ni];if(un&&!Vi[un]){const zi=ye.getUniformLocation(this.program,un);zi&&(Vi[un]=zi)}}this.fixedUniforms=W(d,Vi),this.terrainUniforms=((Ni,un)=>({u_depth:new r.Uniform1i(Ni,un.u_depth),u_terrain:new r.Uniform1i(Ni,un.u_terrain),u_terrain_dim:new r.Uniform1f(Ni,un.u_terrain_dim),u_terrain_matrix:new r.UniformMatrix4f(Ni,un.u_terrain_matrix),u_terrain_unpack:new r.Uniform4f(Ni,un.u_terrain_unpack),u_terrain_offset:new r.Uniform1f(Ni,un.u_terrain_offset),u_terrain_exaggeration:new r.Uniform1f(Ni,un.u_terrain_exaggeration)}))(d,Vi),this.binderUniforms=z?z.getUniforms(d,Vi):[]}draw(d,I,D,z,W,ne,pe,ye,Se,ze,Qe,st,Mt,St,It,ri,fi,Ai){const jt=d.gl;if(this.failedToCreate)return;if(d.program.set(this.program),d.setDepthMode(D),d.setStencilMode(z),d.setColorMode(W),d.setCullFace(ne),ye){d.activeTexture.set(jt.TEXTURE2),jt.bindTexture(jt.TEXTURE_2D,ye.depthTexture),d.activeTexture.set(jt.TEXTURE3),jt.bindTexture(jt.TEXTURE_2D,ye.texture);for(const Ei in this.terrainUniforms)this.terrainUniforms[Ei].set(ye[Ei])}for(const Ei in this.fixedUniforms)this.fixedUniforms[Ei].set(pe[Ei]);It&&It.setUniforms(d,this.binderUniforms,Mt,{zoom:St});let Pi=0;switch(I){case jt.LINES:Pi=2;break;case jt.TRIANGLES:Pi=3;break;case jt.LINE_STRIP:Pi=1}for(const Ei of st.get()){const Vi=Ei.vaos||(Ei.vaos={});(Vi[Se]||(Vi[Se]=new sr)).bind(d,this,ze,It?It.getPaintVertexBuffers():[],Qe,Ei.vertexOffset,ri,fi,Ai),jt.drawElements(I,Ei.primitiveLength*Pi,jt.UNSIGNED_SHORT,Ei.primitiveOffset*Pi*2)}}}function Xo(B,d,I){const D=1/yn(I,1,d.transform.tileZoom),z=Math.pow(2,I.tileID.overscaledZ),W=I.tileSize*Math.pow(2,d.transform.tileZoom)/z,ne=W*(I.tileID.canonical.x+I.tileID.wrap*z),pe=W*I.tileID.canonical.y;return{u_image:0,u_texsize:I.imageAtlasTexture.size,u_scale:[D,B.fromScale,B.toScale],u_fade:B.t,u_pixel_coord_upper:[ne>>16,pe>>16],u_pixel_coord_lower:[65535&ne,65535&pe]}}const Oo=(B,d,I,D)=>{const z=d.style.light,W=z.properties.get("position"),ne=[W.x,W.y,W.z],pe=r.create$1();z.properties.get("anchor")==="viewport"&&r.fromRotation(pe,-d.transform.angle),r.transformMat3(ne,ne,pe);const ye=z.properties.get("color");return{u_matrix:B,u_lightpos:ne,u_lightintensity:z.properties.get("intensity"),u_lightcolor:[ye.r,ye.g,ye.b],u_vertical_gradient:+I,u_opacity:D}},Sa=(B,d,I,D,z,W,ne)=>r.extend(Oo(B,d,I,D),Xo(W,d,ne),{u_height_factor:-Math.pow(2,z.overscaledZ)/ne.tileSize/8}),ns=B=>({u_matrix:B}),Vs=(B,d,I,D)=>r.extend(ns(B),Xo(I,d,D)),vs=(B,d)=>({u_matrix:B,u_world:d}),Ca=(B,d,I,D,z)=>r.extend(Vs(B,d,I,D),{u_world:z}),Cs=(B,d,I,D)=>{const z=B.transform;let W,ne;if(D.paint.get("circle-pitch-alignment")==="map"){const pe=yn(I,1,z.zoom);W=!0,ne=[pe,pe]}else W=!1,ne=z.pixelsToGLUnits;return{u_camera_to_center_distance:z.cameraToCenterDistance,u_scale_with_map:+(D.paint.get("circle-pitch-scale")==="map"),u_matrix:B.translatePosMatrix(d.posMatrix,I,D.paint.get("circle-translate"),D.paint.get("circle-translate-anchor")),u_pitch_with_map:+W,u_device_pixel_ratio:B.pixelRatio,u_extrude_scale:ne}},Zs=(B,d,I)=>{const D=yn(I,1,d.zoom),z=Math.pow(2,d.zoom-I.tileID.overscaledZ),W=I.tileID.overscaleFactor();return{u_matrix:B,u_camera_to_center_distance:d.cameraToCenterDistance,u_pixels_to_tile_units:D,u_extrude_scale:[d.pixelsToGLUnits[0]/(D*z),d.pixelsToGLUnits[1]/(D*z)],u_overscale_factor:W}},qs=(B,d,I=1)=>({u_matrix:B,u_color:d,u_overlay:0,u_overlay_scale:I}),Ea=B=>({u_matrix:B}),kl=(B,d,I,D)=>({u_matrix:B,u_extrude_scale:yn(d,1,I),u_intensity:D});function cu(B,d){const I=Math.pow(2,d.canonical.z),D=d.canonical.y;return[new r.MercatorCoordinate(0,D/I).toLngLat().lat,new r.MercatorCoordinate(0,(D+1)/I).toLngLat().lat]}const Sl=(B,d,I,D)=>{const z=B.transform;return{u_matrix:nl(B,d,I,D),u_ratio:1/yn(d,1,z.zoom),u_device_pixel_ratio:B.pixelRatio,u_units_to_pixels:[1/z.pixelsToGLUnits[0],1/z.pixelsToGLUnits[1]]}},hu=(B,d,I,D,z)=>r.extend(Sl(B,d,I,z),{u_image:0,u_image_height:D}),ha=(B,d,I,D,z)=>{const W=B.transform,ne=Co(d,W);return{u_matrix:nl(B,d,I,z),u_texsize:d.imageAtlasTexture.size,u_ratio:1/yn(d,1,W.zoom),u_device_pixel_ratio:B.pixelRatio,u_image:0,u_scale:[ne,D.fromScale,D.toScale],u_fade:D.t,u_units_to_pixels:[1/W.pixelsToGLUnits[0],1/W.pixelsToGLUnits[1]]}},fa=(B,d,I,D,z,W)=>{const ne=B.lineAtlas,pe=Co(d,B.transform),ye=I.layout.get("line-cap")==="round",Se=ne.getDash(D.from,ye),ze=ne.getDash(D.to,ye),Qe=Se.width*z.fromScale,st=ze.width*z.toScale;return r.extend(Sl(B,d,I,W),{u_patternscale_a:[pe/Qe,-Se.height/2],u_patternscale_b:[pe/st,-ze.height/2],u_sdfgamma:ne.width/(256*Math.min(Qe,st)*B.pixelRatio)/2,u_image:0,u_tex_y_a:Se.y,u_tex_y_b:ze.y,u_mix:z.t})};function Co(B,d){return 1/yn(B,1,d.tileZoom)}function nl(B,d,I,D){return B.translatePosMatrix(D?D.posMatrix:d.tileID.posMatrix,d,I.paint.get("line-translate"),I.paint.get("line-translate-anchor"))}const U=(B,d,I,D,z)=>{return{u_matrix:B,u_tl_parent:d,u_scale_parent:I,u_buffer_scale:1,u_fade_t:D.mix,u_opacity:D.opacity*z.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:z.paint.get("raster-brightness-min"),u_brightness_high:z.paint.get("raster-brightness-max"),u_saturation_factor:(ne=z.paint.get("raster-saturation"),ne>0?1-1/(1.001-ne):-ne),u_contrast_factor:(W=z.paint.get("raster-contrast"),W>0?1/(1-W):1+W),u_spin_weights:$(z.paint.get("raster-hue-rotate"))};var W,ne};function $(B){B*=Math.PI/180;const d=Math.sin(B),I=Math.cos(B);return[(2*I+1)/3,(-Math.sqrt(3)*d-I+1)/3,(Math.sqrt(3)*d-I+1)/3]}const ge=(B,d,I,D,z,W,ne,pe,ye,Se)=>{const ze=z.transform;return{u_is_size_zoom_constant:+(B==="constant"||B==="source"),u_is_size_feature_constant:+(B==="constant"||B==="camera"),u_size_t:d?d.uSizeT:0,u_size:d?d.uSize:0,u_camera_to_center_distance:ze.cameraToCenterDistance,u_pitch:ze.pitch/360*2*Math.PI,u_rotate_symbol:+I,u_aspect_ratio:ze.width/ze.height,u_fade_change:z.options.fadeDuration?z.symbolFadeChange:1,u_matrix:W,u_label_plane_matrix:ne,u_coord_matrix:pe,u_is_text:+ye,u_pitch_with_map:+D,u_texsize:Se,u_texture:0}},De=(B,d,I,D,z,W,ne,pe,ye,Se,ze)=>{const Qe=z.transform;return r.extend(ge(B,d,I,D,z,W,ne,pe,ye,Se),{u_gamma_scale:D?Math.cos(Qe._pitch)*Qe.cameraToCenterDistance:1,u_device_pixel_ratio:z.pixelRatio,u_is_halo:+ze})},ot=(B,d,I,D,z,W,ne,pe,ye,Se)=>r.extend(De(B,d,I,D,z,W,ne,pe,!0,ye,!0),{u_texsize_icon:Se,u_texture_icon:1}),Et=(B,d,I)=>({u_matrix:B,u_opacity:d,u_color:I}),Nt=(B,d,I,D,z,W)=>r.extend(function(ne,pe,ye,Se){const ze=ye.imageManager.getPattern(ne.from.toString()),Qe=ye.imageManager.getPattern(ne.to.toString()),{width:st,height:Mt}=ye.imageManager.getPixelSize(),St=Math.pow(2,Se.tileID.overscaledZ),It=Se.tileSize*Math.pow(2,ye.transform.tileZoom)/St,ri=It*(Se.tileID.canonical.x+Se.tileID.wrap*St),fi=It*Se.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:ze.tl,u_pattern_br_a:ze.br,u_pattern_tl_b:Qe.tl,u_pattern_br_b:Qe.br,u_texsize:[st,Mt],u_mix:pe.t,u_pattern_size_a:ze.displaySize,u_pattern_size_b:Qe.displaySize,u_scale_a:pe.fromScale,u_scale_b:pe.toScale,u_tile_units_to_pixels:1/yn(Se,1,ye.transform.tileZoom),u_pixel_coord_upper:[ri>>16,fi>>16],u_pixel_coord_lower:[65535&ri,65535&fi]}}(D,W,I,z),{u_matrix:B,u_opacity:d}),zt={fillExtrusion:(B,d)=>({u_matrix:new r.UniformMatrix4f(B,d.u_matrix),u_lightpos:new r.Uniform3f(B,d.u_lightpos),u_lightintensity:new r.Uniform1f(B,d.u_lightintensity),u_lightcolor:new r.Uniform3f(B,d.u_lightcolor),u_vertical_gradient:new r.Uniform1f(B,d.u_vertical_gradient),u_opacity:new r.Uniform1f(B,d.u_opacity)}),fillExtrusionPattern:(B,d)=>({u_matrix:new r.UniformMatrix4f(B,d.u_matrix),u_lightpos:new r.Uniform3f(B,d.u_lightpos),u_lightintensity:new r.Uniform1f(B,d.u_lightintensity),u_lightcolor:new r.Uniform3f(B,d.u_lightcolor),u_vertical_gradient:new r.Uniform1f(B,d.u_vertical_gradient),u_height_factor:new r.Uniform1f(B,d.u_height_factor),u_image:new r.Uniform1i(B,d.u_image),u_texsize:new r.Uniform2f(B,d.u_texsize),u_pixel_coord_upper:new r.Uniform2f(B,d.u_pixel_coord_upper),u_pixel_coord_lower:new r.Uniform2f(B,d.u_pixel_coord_lower),u_scale:new r.Uniform3f(B,d.u_scale),u_fade:new r.Uniform1f(B,d.u_fade),u_opacity:new r.Uniform1f(B,d.u_opacity)}),fill:(B,d)=>({u_matrix:new r.UniformMatrix4f(B,d.u_matrix)}),fillPattern:(B,d)=>({u_matrix:new r.UniformMatrix4f(B,d.u_matrix),u_image:new r.Uniform1i(B,d.u_image),u_texsize:new r.Uniform2f(B,d.u_texsize),u_pixel_coord_upper:new r.Uniform2f(B,d.u_pixel_coord_upper),u_pixel_coord_lower:new r.Uniform2f(B,d.u_pixel_coord_lower),u_scale:new r.Uniform3f(B,d.u_scale),u_fade:new r.Uniform1f(B,d.u_fade)}),fillOutline:(B,d)=>({u_matrix:new r.UniformMatrix4f(B,d.u_matrix),u_world:new r.Uniform2f(B,d.u_world)}),fillOutlinePattern:(B,d)=>({u_matrix:new r.UniformMatrix4f(B,d.u_matrix),u_world:new r.Uniform2f(B,d.u_world),u_image:new r.Uniform1i(B,d.u_image),u_texsize:new r.Uniform2f(B,d.u_texsize),u_pixel_coord_upper:new r.Uniform2f(B,d.u_pixel_coord_upper),u_pixel_coord_lower:new r.Uniform2f(B,d.u_pixel_coord_lower),u_scale:new r.Uniform3f(B,d.u_scale),u_fade:new r.Uniform1f(B,d.u_fade)}),circle:(B,d)=>({u_camera_to_center_distance:new r.Uniform1f(B,d.u_camera_to_center_distance),u_scale_with_map:new r.Uniform1i(B,d.u_scale_with_map),u_pitch_with_map:new r.Uniform1i(B,d.u_pitch_with_map),u_extrude_scale:new r.Uniform2f(B,d.u_extrude_scale),u_device_pixel_ratio:new r.Uniform1f(B,d.u_device_pixel_ratio),u_matrix:new r.UniformMatrix4f(B,d.u_matrix)}),collisionBox:(B,d)=>({u_matrix:new r.UniformMatrix4f(B,d.u_matrix),u_camera_to_center_distance:new r.Uniform1f(B,d.u_camera_to_center_distance),u_pixels_to_tile_units:new r.Uniform1f(B,d.u_pixels_to_tile_units),u_extrude_scale:new r.Uniform2f(B,d.u_extrude_scale),u_overscale_factor:new r.Uniform1f(B,d.u_overscale_factor)}),collisionCircle:(B,d)=>({u_matrix:new r.UniformMatrix4f(B,d.u_matrix),u_inv_matrix:new r.UniformMatrix4f(B,d.u_inv_matrix),u_camera_to_center_distance:new r.Uniform1f(B,d.u_camera_to_center_distance),u_viewport_size:new r.Uniform2f(B,d.u_viewport_size)}),debug:(B,d)=>({u_color:new r.UniformColor(B,d.u_color),u_matrix:new r.UniformMatrix4f(B,d.u_matrix),u_overlay:new r.Uniform1i(B,d.u_overlay),u_overlay_scale:new r.Uniform1f(B,d.u_overlay_scale)}),clippingMask:(B,d)=>({u_matrix:new r.UniformMatrix4f(B,d.u_matrix)}),heatmap:(B,d)=>({u_extrude_scale:new r.Uniform1f(B,d.u_extrude_scale),u_intensity:new r.Uniform1f(B,d.u_intensity),u_matrix:new r.UniformMatrix4f(B,d.u_matrix)}),heatmapTexture:(B,d)=>({u_matrix:new r.UniformMatrix4f(B,d.u_matrix),u_world:new r.Uniform2f(B,d.u_world),u_image:new r.Uniform1i(B,d.u_image),u_color_ramp:new r.Uniform1i(B,d.u_color_ramp),u_opacity:new r.Uniform1f(B,d.u_opacity)}),hillshade:(B,d)=>({u_matrix:new r.UniformMatrix4f(B,d.u_matrix),u_image:new r.Uniform1i(B,d.u_image),u_latrange:new r.Uniform2f(B,d.u_latrange),u_light:new r.Uniform2f(B,d.u_light),u_shadow:new r.UniformColor(B,d.u_shadow),u_highlight:new r.UniformColor(B,d.u_highlight),u_accent:new r.UniformColor(B,d.u_accent)}),hillshadePrepare:(B,d)=>({u_matrix:new r.UniformMatrix4f(B,d.u_matrix),u_image:new r.Uniform1i(B,d.u_image),u_dimension:new r.Uniform2f(B,d.u_dimension),u_zoom:new r.Uniform1f(B,d.u_zoom),u_unpack:new r.Uniform4f(B,d.u_unpack)}),line:(B,d)=>({u_matrix:new r.UniformMatrix4f(B,d.u_matrix),u_ratio:new r.Uniform1f(B,d.u_ratio),u_device_pixel_ratio:new r.Uniform1f(B,d.u_device_pixel_ratio),u_units_to_pixels:new r.Uniform2f(B,d.u_units_to_pixels)}),lineGradient:(B,d)=>({u_matrix:new r.UniformMatrix4f(B,d.u_matrix),u_ratio:new r.Uniform1f(B,d.u_ratio),u_device_pixel_ratio:new r.Uniform1f(B,d.u_device_pixel_ratio),u_units_to_pixels:new r.Uniform2f(B,d.u_units_to_pixels),u_image:new r.Uniform1i(B,d.u_image),u_image_height:new r.Uniform1f(B,d.u_image_height)}),linePattern:(B,d)=>({u_matrix:new r.UniformMatrix4f(B,d.u_matrix),u_texsize:new r.Uniform2f(B,d.u_texsize),u_ratio:new r.Uniform1f(B,d.u_ratio),u_device_pixel_ratio:new r.Uniform1f(B,d.u_device_pixel_ratio),u_image:new r.Uniform1i(B,d.u_image),u_units_to_pixels:new r.Uniform2f(B,d.u_units_to_pixels),u_scale:new r.Uniform3f(B,d.u_scale),u_fade:new r.Uniform1f(B,d.u_fade)}),lineSDF:(B,d)=>({u_matrix:new r.UniformMatrix4f(B,d.u_matrix),u_ratio:new r.Uniform1f(B,d.u_ratio),u_device_pixel_ratio:new r.Uniform1f(B,d.u_device_pixel_ratio),u_units_to_pixels:new r.Uniform2f(B,d.u_units_to_pixels),u_patternscale_a:new r.Uniform2f(B,d.u_patternscale_a),u_patternscale_b:new r.Uniform2f(B,d.u_patternscale_b),u_sdfgamma:new r.Uniform1f(B,d.u_sdfgamma),u_image:new r.Uniform1i(B,d.u_image),u_tex_y_a:new r.Uniform1f(B,d.u_tex_y_a),u_tex_y_b:new r.Uniform1f(B,d.u_tex_y_b),u_mix:new r.Uniform1f(B,d.u_mix)}),raster:(B,d)=>({u_matrix:new r.UniformMatrix4f(B,d.u_matrix),u_tl_parent:new r.Uniform2f(B,d.u_tl_parent),u_scale_parent:new r.Uniform1f(B,d.u_scale_parent),u_buffer_scale:new r.Uniform1f(B,d.u_buffer_scale),u_fade_t:new r.Uniform1f(B,d.u_fade_t),u_opacity:new r.Uniform1f(B,d.u_opacity),u_image0:new r.Uniform1i(B,d.u_image0),u_image1:new r.Uniform1i(B,d.u_image1),u_brightness_low:new r.Uniform1f(B,d.u_brightness_low),u_brightness_high:new r.Uniform1f(B,d.u_brightness_high),u_saturation_factor:new r.Uniform1f(B,d.u_saturation_factor),u_contrast_factor:new r.Uniform1f(B,d.u_contrast_factor),u_spin_weights:new r.Uniform3f(B,d.u_spin_weights)}),symbolIcon:(B,d)=>({u_is_size_zoom_constant:new r.Uniform1i(B,d.u_is_size_zoom_constant),u_is_size_feature_constant:new r.Uniform1i(B,d.u_is_size_feature_constant),u_size_t:new r.Uniform1f(B,d.u_size_t),u_size:new r.Uniform1f(B,d.u_size),u_camera_to_center_distance:new r.Uniform1f(B,d.u_camera_to_center_distance),u_pitch:new r.Uniform1f(B,d.u_pitch),u_rotate_symbol:new r.Uniform1i(B,d.u_rotate_symbol),u_aspect_ratio:new r.Uniform1f(B,d.u_aspect_ratio),u_fade_change:new r.Uniform1f(B,d.u_fade_change),u_matrix:new r.UniformMatrix4f(B,d.u_matrix),u_label_plane_matrix:new r.UniformMatrix4f(B,d.u_label_plane_matrix),u_coord_matrix:new r.UniformMatrix4f(B,d.u_coord_matrix),u_is_text:new r.Uniform1i(B,d.u_is_text),u_pitch_with_map:new r.Uniform1i(B,d.u_pitch_with_map),u_texsize:new r.Uniform2f(B,d.u_texsize),u_texture:new r.Uniform1i(B,d.u_texture)}),symbolSDF:(B,d)=>({u_is_size_zoom_constant:new r.Uniform1i(B,d.u_is_size_zoom_constant),u_is_size_feature_constant:new r.Uniform1i(B,d.u_is_size_feature_constant),u_size_t:new r.Uniform1f(B,d.u_size_t),u_size:new r.Uniform1f(B,d.u_size),u_camera_to_center_distance:new r.Uniform1f(B,d.u_camera_to_center_distance),u_pitch:new r.Uniform1f(B,d.u_pitch),u_rotate_symbol:new r.Uniform1i(B,d.u_rotate_symbol),u_aspect_ratio:new r.Uniform1f(B,d.u_aspect_ratio),u_fade_change:new r.Uniform1f(B,d.u_fade_change),u_matrix:new r.UniformMatrix4f(B,d.u_matrix),u_label_plane_matrix:new r.UniformMatrix4f(B,d.u_label_plane_matrix),u_coord_matrix:new r.UniformMatrix4f(B,d.u_coord_matrix),u_is_text:new r.Uniform1i(B,d.u_is_text),u_pitch_with_map:new r.Uniform1i(B,d.u_pitch_with_map),u_texsize:new r.Uniform2f(B,d.u_texsize),u_texture:new r.Uniform1i(B,d.u_texture),u_gamma_scale:new r.Uniform1f(B,d.u_gamma_scale),u_device_pixel_ratio:new r.Uniform1f(B,d.u_device_pixel_ratio),u_is_halo:new r.Uniform1i(B,d.u_is_halo)}),symbolTextAndIcon:(B,d)=>({u_is_size_zoom_constant:new r.Uniform1i(B,d.u_is_size_zoom_constant),u_is_size_feature_constant:new r.Uniform1i(B,d.u_is_size_feature_constant),u_size_t:new r.Uniform1f(B,d.u_size_t),u_size:new r.Uniform1f(B,d.u_size),u_camera_to_center_distance:new r.Uniform1f(B,d.u_camera_to_center_distance),u_pitch:new r.Uniform1f(B,d.u_pitch),u_rotate_symbol:new r.Uniform1i(B,d.u_rotate_symbol),u_aspect_ratio:new r.Uniform1f(B,d.u_aspect_ratio),u_fade_change:new r.Uniform1f(B,d.u_fade_change),u_matrix:new r.UniformMatrix4f(B,d.u_matrix),u_label_plane_matrix:new r.UniformMatrix4f(B,d.u_label_plane_matrix),u_coord_matrix:new r.UniformMatrix4f(B,d.u_coord_matrix),u_is_text:new r.Uniform1i(B,d.u_is_text),u_pitch_with_map:new r.Uniform1i(B,d.u_pitch_with_map),u_texsize:new r.Uniform2f(B,d.u_texsize),u_texsize_icon:new r.Uniform2f(B,d.u_texsize_icon),u_texture:new r.Uniform1i(B,d.u_texture),u_texture_icon:new r.Uniform1i(B,d.u_texture_icon),u_gamma_scale:new r.Uniform1f(B,d.u_gamma_scale),u_device_pixel_ratio:new r.Uniform1f(B,d.u_device_pixel_ratio),u_is_halo:new r.Uniform1i(B,d.u_is_halo)}),background:(B,d)=>({u_matrix:new r.UniformMatrix4f(B,d.u_matrix),u_opacity:new r.Uniform1f(B,d.u_opacity),u_color:new r.UniformColor(B,d.u_color)}),backgroundPattern:(B,d)=>({u_matrix:new r.UniformMatrix4f(B,d.u_matrix),u_opacity:new r.Uniform1f(B,d.u_opacity),u_image:new r.Uniform1i(B,d.u_image),u_pattern_tl_a:new r.Uniform2f(B,d.u_pattern_tl_a),u_pattern_br_a:new r.Uniform2f(B,d.u_pattern_br_a),u_pattern_tl_b:new r.Uniform2f(B,d.u_pattern_tl_b),u_pattern_br_b:new r.Uniform2f(B,d.u_pattern_br_b),u_texsize:new r.Uniform2f(B,d.u_texsize),u_mix:new r.Uniform1f(B,d.u_mix),u_pattern_size_a:new r.Uniform2f(B,d.u_pattern_size_a),u_pattern_size_b:new r.Uniform2f(B,d.u_pattern_size_b),u_scale_a:new r.Uniform1f(B,d.u_scale_a),u_scale_b:new r.Uniform1f(B,d.u_scale_b),u_pixel_coord_upper:new r.Uniform2f(B,d.u_pixel_coord_upper),u_pixel_coord_lower:new r.Uniform2f(B,d.u_pixel_coord_lower),u_tile_units_to_pixels:new r.Uniform1f(B,d.u_tile_units_to_pixels)}),terrain:(B,d)=>({u_matrix:new r.UniformMatrix4f(B,d.u_matrix),u_texture:new r.Uniform1i(B,d.u_texture)}),terrainDepth:(B,d)=>({u_matrix:new r.UniformMatrix4f(B,d.u_matrix)}),terrainCoords:(B,d)=>({u_matrix:new r.UniformMatrix4f(B,d.u_matrix),u_texture:new r.Uniform1i(B,d.u_texture),u_terrain_coords_id:new r.Uniform1f(B,d.u_terrain_coords_id)})};class bi{constructor(d,I,D){this.context=d;const z=d.gl;this.buffer=z.createBuffer(),this.dynamicDraw=Boolean(D),this.context.unbindVAO(),d.bindElementBuffer.set(this.buffer),z.bufferData(z.ELEMENT_ARRAY_BUFFER,I.arrayBuffer,this.dynamicDraw?z.DYNAMIC_DRAW:z.STATIC_DRAW),this.dynamicDraw||delete I.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(d){const I=this.context.gl;if(!this.dynamicDraw)throw new Error("Attempted to update data while not in dynamic mode.");this.context.unbindVAO(),this.bind(),I.bufferSubData(I.ELEMENT_ARRAY_BUFFER,0,d.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const yi={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class _i{constructor(d,I,D,z){this.length=I.length,this.attributes=D,this.itemSize=I.bytesPerElement,this.dynamicDraw=z,this.context=d;const W=d.gl;this.buffer=W.createBuffer(),d.bindVertexBuffer.set(this.buffer),W.bufferData(W.ARRAY_BUFFER,I.arrayBuffer,this.dynamicDraw?W.DYNAMIC_DRAW:W.STATIC_DRAW),this.dynamicDraw||delete I.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(d){if(d.length!==this.length)throw new Error(`Length of new data is ${d.length}, which doesn't match current length of ${this.length}`);const I=this.context.gl;this.bind(),I.bufferSubData(I.ARRAY_BUFFER,0,d.arrayBuffer)}enableAttributes(d,I){for(let D=0;D<this.attributes.length;D++){const z=I.attributes[this.attributes[D].name];z!==void 0&&d.enableVertexAttribArray(z)}}setVertexAttribPointers(d,I,D){for(let z=0;z<this.attributes.length;z++){const W=this.attributes[z],ne=I.attributes[W.name];ne!==void 0&&d.vertexAttribPointer(ne,W.components,d[yi[W.type]],!1,this.itemSize,W.offset+this.itemSize*(D||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}class ui{constructor(d){this.gl=d.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(d){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class ji extends ui{getDefault(){return r.Color.transparent}set(d){const I=this.current;(d.r!==I.r||d.g!==I.g||d.b!==I.b||d.a!==I.a||this.dirty)&&(this.gl.clearColor(d.r,d.g,d.b,d.a),this.current=d,this.dirty=!1)}}class an extends ui{getDefault(){return 1}set(d){(d!==this.current||this.dirty)&&(this.gl.clearDepth(d),this.current=d,this.dirty=!1)}}class Tn extends ui{getDefault(){return 0}set(d){(d!==this.current||this.dirty)&&(this.gl.clearStencil(d),this.current=d,this.dirty=!1)}}class ft extends ui{getDefault(){return[!0,!0,!0,!0]}set(d){const I=this.current;(d[0]!==I[0]||d[1]!==I[1]||d[2]!==I[2]||d[3]!==I[3]||this.dirty)&&(this.gl.colorMask(d[0],d[1],d[2],d[3]),this.current=d,this.dirty=!1)}}class p extends ui{getDefault(){return!0}set(d){(d!==this.current||this.dirty)&&(this.gl.depthMask(d),this.current=d,this.dirty=!1)}}class Di extends ui{getDefault(){return 255}set(d){(d!==this.current||this.dirty)&&(this.gl.stencilMask(d),this.current=d,this.dirty=!1)}}class c extends ui{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(d){const I=this.current;(d.func!==I.func||d.ref!==I.ref||d.mask!==I.mask||this.dirty)&&(this.gl.stencilFunc(d.func,d.ref,d.mask),this.current=d,this.dirty=!1)}}class F extends ui{getDefault(){const d=this.gl;return[d.KEEP,d.KEEP,d.KEEP]}set(d){const I=this.current;(d[0]!==I[0]||d[1]!==I[1]||d[2]!==I[2]||this.dirty)&&(this.gl.stencilOp(d[0],d[1],d[2]),this.current=d,this.dirty=!1)}}class pn extends ui{getDefault(){return!1}set(d){if(d===this.current&&!this.dirty)return;const I=this.gl;d?I.enable(I.STENCIL_TEST):I.disable(I.STENCIL_TEST),this.current=d,this.dirty=!1}}class Qn extends ui{getDefault(){return[0,1]}set(d){const I=this.current;(d[0]!==I[0]||d[1]!==I[1]||this.dirty)&&(this.gl.depthRange(d[0],d[1]),this.current=d,this.dirty=!1)}}class wo extends ui{getDefault(){return!1}set(d){if(d===this.current&&!this.dirty)return;const I=this.gl;d?I.enable(I.DEPTH_TEST):I.disable(I.DEPTH_TEST),this.current=d,this.dirty=!1}}class re extends ui{getDefault(){return this.gl.LESS}set(d){(d!==this.current||this.dirty)&&(this.gl.depthFunc(d),this.current=d,this.dirty=!1)}}class Br extends ui{getDefault(){return!1}set(d){if(d===this.current&&!this.dirty)return;const I=this.gl;d?I.enable(I.BLEND):I.disable(I.BLEND),this.current=d,this.dirty=!1}}class da extends ui{getDefault(){const d=this.gl;return[d.ONE,d.ZERO]}set(d){const I=this.current;(d[0]!==I[0]||d[1]!==I[1]||this.dirty)&&(this.gl.blendFunc(d[0],d[1]),this.current=d,this.dirty=!1)}}class Na extends ui{getDefault(){return r.Color.transparent}set(d){const I=this.current;(d.r!==I.r||d.g!==I.g||d.b!==I.b||d.a!==I.a||this.dirty)&&(this.gl.blendColor(d.r,d.g,d.b,d.a),this.current=d,this.dirty=!1)}}class Oc extends ui{getDefault(){return this.gl.FUNC_ADD}set(d){(d!==this.current||this.dirty)&&(this.gl.blendEquation(d),this.current=d,this.dirty=!1)}}class Cl extends ui{getDefault(){return!1}set(d){if(d===this.current&&!this.dirty)return;const I=this.gl;d?I.enable(I.CULL_FACE):I.disable(I.CULL_FACE),this.current=d,this.dirty=!1}}class Hs extends ui{getDefault(){return this.gl.BACK}set(d){(d!==this.current||this.dirty)&&(this.gl.cullFace(d),this.current=d,this.dirty=!1)}}class ac extends ui{getDefault(){return this.gl.CCW}set(d){(d!==this.current||this.dirty)&&(this.gl.frontFace(d),this.current=d,this.dirty=!1)}}class fu extends ui{getDefault(){return null}set(d){(d!==this.current||this.dirty)&&(this.gl.useProgram(d),this.current=d,this.dirty=!1)}}class uh extends ui{getDefault(){return this.gl.TEXTURE0}set(d){(d!==this.current||this.dirty)&&(this.gl.activeTexture(d),this.current=d,this.dirty=!1)}}class du extends ui{getDefault(){const d=this.gl;return[0,0,d.drawingBufferWidth,d.drawingBufferHeight]}set(d){const I=this.current;(d[0]!==I[0]||d[1]!==I[1]||d[2]!==I[2]||d[3]!==I[3]||this.dirty)&&(this.gl.viewport(d[0],d[1],d[2],d[3]),this.current=d,this.dirty=!1)}}class ch extends ui{getDefault(){return null}set(d){if(d===this.current&&!this.dirty)return;const I=this.gl;I.bindFramebuffer(I.FRAMEBUFFER,d),this.current=d,this.dirty=!1}}class Bu extends ui{getDefault(){return null}set(d){if(d===this.current&&!this.dirty)return;const I=this.gl;I.bindRenderbuffer(I.RENDERBUFFER,d),this.current=d,this.dirty=!1}}class pu extends ui{getDefault(){return null}set(d){if(d===this.current&&!this.dirty)return;const I=this.gl;I.bindTexture(I.TEXTURE_2D,d),this.current=d,this.dirty=!1}}class mu extends ui{getDefault(){return null}set(d){if(d===this.current&&!this.dirty)return;const I=this.gl;I.bindBuffer(I.ARRAY_BUFFER,d),this.current=d,this.dirty=!1}}class Gl extends ui{getDefault(){return null}set(d){const I=this.gl;I.bindBuffer(I.ELEMENT_ARRAY_BUFFER,d),this.current=d,this.dirty=!1}}class gu extends ui{constructor(d){super(d),this.vao=d.extVertexArrayObject}getDefault(){return null}set(d){this.vao&&(d!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(d),this.current=d,this.dirty=!1)}}class Un extends ui{getDefault(){return 4}set(d){if(d===this.current&&!this.dirty)return;const I=this.gl;I.pixelStorei(I.UNPACK_ALIGNMENT,d),this.current=d,this.dirty=!1}}class Bn extends ui{getDefault(){return!1}set(d){if(d===this.current&&!this.dirty)return;const I=this.gl;I.pixelStorei(I.UNPACK_PREMULTIPLY_ALPHA_WEBGL,d),this.current=d,this.dirty=!1}}class zu extends ui{getDefault(){return!1}set(d){if(d===this.current&&!this.dirty)return;const I=this.gl;I.pixelStorei(I.UNPACK_FLIP_Y_WEBGL,d),this.current=d,this.dirty=!1}}class ja extends ui{constructor(d,I){super(d),this.context=d,this.parent=I}getDefault(){return null}}class pa extends ja{setDirty(){this.dirty=!0}set(d){if(d===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const I=this.gl;I.framebufferTexture2D(I.FRAMEBUFFER,I.COLOR_ATTACHMENT0,I.TEXTURE_2D,d,0),this.current=d,this.dirty=!1}}class Wl extends ja{set(d){if(d===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const I=this.gl;I.framebufferRenderbuffer(I.FRAMEBUFFER,I.DEPTH_ATTACHMENT,I.RENDERBUFFER,d),this.current=d,this.dirty=!1}}class ma{constructor(d,I,D,z){this.context=d,this.width=I,this.height=D;const W=d.gl,ne=this.framebuffer=W.createFramebuffer();if(this.colorAttachment=new pa(d,ne),z&&(this.depthAttachment=new Wl(d,ne)),W.checkFramebufferStatus(W.FRAMEBUFFER)!==W.FRAMEBUFFER_COMPLETE)throw new Error("Framebuffer is not complete")}destroy(){const d=this.context.gl,I=this.colorAttachment.get();if(I&&d.deleteTexture(I),this.depthAttachment){const D=this.depthAttachment.get();D&&d.deleteRenderbuffer(D)}d.deleteFramebuffer(this.framebuffer)}}class xo{constructor(d,I,D){this.blendFunction=d,this.blendColor=I,this.mask=D}}xo.Replace=[1,0],xo.disabled=new xo(xo.Replace,r.Color.transparent,[!1,!1,!1,!1]),xo.unblended=new xo(xo.Replace,r.Color.transparent,[!0,!0,!0,!0]),xo.alphaBlended=new xo([1,771],r.Color.transparent,[!0,!0,!0,!0]);class se{constructor(d){this.gl=d,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),this.clearColor=new ji(this),this.clearDepth=new an(this),this.clearStencil=new Tn(this),this.colorMask=new ft(this),this.depthMask=new p(this),this.stencilMask=new Di(this),this.stencilFunc=new c(this),this.stencilOp=new F(this),this.stencilTest=new pn(this),this.depthRange=new Qn(this),this.depthTest=new wo(this),this.depthFunc=new re(this),this.blend=new Br(this),this.blendFunc=new da(this),this.blendColor=new Na(this),this.blendEquation=new Oc(this),this.cullFace=new Cl(this),this.cullFaceSide=new Hs(this),this.frontFace=new ac(this),this.program=new fu(this),this.activeTexture=new uh(this),this.viewport=new du(this),this.bindFramebuffer=new ch(this),this.bindRenderbuffer=new Bu(this),this.bindTexture=new pu(this),this.bindVertexBuffer=new mu(this),this.bindElementBuffer=new Gl(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new gu(this),this.pixelStoreUnpack=new Un(this),this.pixelStoreUnpackPremultiplyAlpha=new Bn(this),this.pixelStoreUnpackFlipY=new zu(this),this.extTextureFilterAnisotropic=d.getExtension("EXT_texture_filter_anisotropic")||d.getExtension("MOZ_EXT_texture_filter_anisotropic")||d.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=d.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureHalfFloat=d.getExtension("OES_texture_half_float"),this.extTextureHalfFloat&&(d.getExtension("OES_texture_half_float_linear"),this.extRenderToTextureHalfFloat=d.getExtension("EXT_color_buffer_half_float")),this.extTimerQuery=d.getExtension("EXT_disjoint_timer_query"),this.maxTextureSize=d.getParameter(d.MAX_TEXTURE_SIZE)}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(d,I){return new bi(this,d,I)}createVertexBuffer(d,I,D){return new _i(this,d,I,D)}createRenderbuffer(d,I,D){const z=this.gl,W=z.createRenderbuffer();return this.bindRenderbuffer.set(W),z.renderbufferStorage(z.RENDERBUFFER,d,I,D),this.bindRenderbuffer.set(null),W}createFramebuffer(d,I,D){return new ma(this,d,I,D)}clear({color:d,depth:I}){const D=this.gl;let z=0;d&&(z|=D.COLOR_BUFFER_BIT,this.clearColor.set(d),this.colorMask.set([!0,!0,!0,!0])),I!==void 0&&(z|=D.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(I),this.depthMask.set(!0)),D.clear(z)}setCullFace(d){d.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(d.mode),this.frontFace.set(d.frontFace))}setDepthMode(d){d.func!==this.gl.ALWAYS||d.mask?(this.depthTest.set(!0),this.depthFunc.set(d.func),this.depthMask.set(d.mask),this.depthRange.set(d.range)):this.depthTest.set(!1)}setStencilMode(d){d.test.func!==this.gl.ALWAYS||d.mask?(this.stencilTest.set(!0),this.stencilMask.set(d.mask),this.stencilOp.set([d.fail,d.depthFail,d.pass]),this.stencilFunc.set({func:d.test.func,ref:d.ref,mask:d.test.mask})):this.stencilTest.set(!1)}setColorMode(d){v(d.blendFunction,xo.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(d.blendFunction),this.blendColor.set(d.blendColor)),this.colorMask.set(d.mask)}unbindVAO(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)}}class Ue{constructor(d,I,D){this.func=d,this.mask=I,this.range=D}}Ue.ReadOnly=!1,Ue.ReadWrite=!0,Ue.disabled=new Ue(519,Ue.ReadOnly,[0,1]);const kt=7680;class Xt{constructor(d,I,D,z,W,ne){this.test=d,this.ref=I,this.mask=D,this.fail=z,this.depthFail=W,this.pass=ne}}Xt.disabled=new Xt({func:519,mask:0},0,0,kt,kt,kt);class hi{constructor(d,I,D){this.enable=d,this.mode=I,this.frontFace=D}}let Zi;function hn(B,d,I,D,z,W,ne){const pe=B.context,ye=pe.gl,Se=B.useProgram("collisionBox"),ze=[];let Qe=0,st=0;for(let jt=0;jt<D.length;jt++){const Pi=D[jt],Ei=d.getTile(Pi),Vi=Ei.getBucket(I);if(!Vi)continue;let Ni=Pi.posMatrix;z[0]===0&&z[1]===0||(Ni=B.translatePosMatrix(Pi.posMatrix,Ei,z,W));const un=ne?Vi.textCollisionBox:Vi.iconCollisionBox,zi=Vi.collisionCircleArray;if(zi.length>0){const zn=r.create(),vn=Ni;r.mul(zn,Vi.placementInvProjMatrix,B.transform.glCoordMatrix),r.mul(zn,zn,Vi.placementViewportMatrix),ze.push({circleArray:zi,circleOffset:st,transform:vn,invTransform:zn,coord:Pi}),Qe+=zi.length/4,st=Qe}un&&Se.draw(pe,ye.LINES,Ue.disabled,Xt.disabled,B.colorModeForRenderPass(),hi.disabled,Zs(Ni,B.transform,Ei),B.style.terrain&&B.style.terrain.getTerrainData(Pi),I.id,un.layoutVertexBuffer,un.indexBuffer,un.segments,null,B.transform.zoom,null,null,un.collisionVertexBuffer)}if(!ne||!ze.length)return;const Mt=B.useProgram("collisionCircle"),St=new r.CollisionCircleLayoutArray;St.resize(4*Qe),St._trim();let It=0;for(const jt of ze)for(let Pi=0;Pi<jt.circleArray.length/4;Pi++){const Ei=4*Pi,Vi=jt.circleArray[Ei+0],Ni=jt.circleArray[Ei+1],un=jt.circleArray[Ei+2],zi=jt.circleArray[Ei+3];St.emplace(It++,Vi,Ni,un,zi,0),St.emplace(It++,Vi,Ni,un,zi,1),St.emplace(It++,Vi,Ni,un,zi,2),St.emplace(It++,Vi,Ni,un,zi,3)}(!Zi||Zi.length<2*Qe)&&(Zi=function(jt){const Pi=2*jt,Ei=new r.QuadTriangleArray;Ei.resize(Pi),Ei._trim();for(let Vi=0;Vi<Pi;Vi++){const Ni=6*Vi;Ei.uint16[Ni+0]=4*Vi+0,Ei.uint16[Ni+1]=4*Vi+1,Ei.uint16[Ni+2]=4*Vi+2,Ei.uint16[Ni+3]=4*Vi+2,Ei.uint16[Ni+4]=4*Vi+3,Ei.uint16[Ni+5]=4*Vi+0}return Ei}(Qe));const ri=pe.createIndexBuffer(Zi,!0),fi=pe.createVertexBuffer(St,r.collisionCircleLayout.members,!0);for(const jt of ze){const Pi={u_matrix:jt.transform,u_inv_matrix:jt.invTransform,u_camera_to_center_distance:(Ai=B.transform).cameraToCenterDistance,u_viewport_size:[Ai.width,Ai.height]};Mt.draw(pe,ye.TRIANGLES,Ue.disabled,Xt.disabled,B.colorModeForRenderPass(),hi.disabled,Pi,B.style.terrain&&B.style.terrain.getTerrainData(jt.coord),I.id,fi,ri,r.SegmentVector.simpleSegment(0,2*jt.circleOffset,jt.circleArray.length,jt.circleArray.length/2),null,B.transform.zoom,null,null,null)}var Ai;fi.destroy(),ri.destroy()}hi.disabled=new hi(!1,1029,2305),hi.backCCW=new hi(!0,1029,2305);const Jn=r.identity(new Float32Array(16));function kr(B,d,I,D,z,W){const{horizontalAlign:ne,verticalAlign:pe}=r.getAnchorAlignment(B),ye=-(ne-.5)*d,Se=-(pe-.5)*I,ze=r.evaluateVariableOffset(B,D);return new r.pointGeometry((ye/z+ze[0])*W,(Se/z+ze[1])*W)}function jr(B,d,I,D,z,W,ne,pe,ye,Se,ze){const Qe=B.text.placedSymbolArray,st=B.text.dynamicLayoutVertexArray,Mt=B.icon.dynamicLayoutVertexArray,St={};st.clear();for(let It=0;It<Qe.length;It++){const ri=Qe.get(It),fi=B.allowVerticalPlacement&&!ri.placedOrientation,Ai=ri.hidden||!ri.crossTileID||fi?null:D[ri.crossTileID];if(Ai){const jt=new r.pointGeometry(ri.anchorX,ri.anchorY),Pi=Wt(jt,I?ne:W,ze),Ei=di(z.cameraToCenterDistance,Pi.signedDistanceFromCamera);let Vi=r.evaluateSizeForFeature(B.textSizeData,ye,ri)*Ei/r.ONE_EM;I&&(Vi*=B.tilePixelRatio/pe);const{width:Ni,height:un,anchor:zi,textOffset:zn,textBoxScale:vn}=Ai,Wn=kr(zi,Ni,un,zn,vn,Vi),Ir=I?Wt(jt.add(Wn),W,ze).point:Pi.point.add(d?Wn.rotate(-z.angle):Wn),Fr=B.allowVerticalPlacement&&ri.placedOrientation===r.WritingMode.vertical?Math.PI/2:0;for(let j=0;j<ri.numGlyphs;j++)r.addDynamicAttributes(st,Ir,Fr);Se&&ri.associatedIconIndex>=0&&(St[ri.associatedIconIndex]={shiftedAnchor:Ir,angle:Fr})}else jn(ri.numGlyphs,st)}if(Se){Mt.clear();const It=B.icon.placedSymbolArray;for(let ri=0;ri<It.length;ri++){const fi=It.get(ri);if(fi.hidden)jn(fi.numGlyphs,Mt);else{const Ai=St[ri];if(Ai)for(let jt=0;jt<fi.numGlyphs;jt++)r.addDynamicAttributes(Mt,Ai.shiftedAnchor,Ai.angle);else jn(fi.numGlyphs,Mt)}}B.icon.dynamicLayoutVertexBuffer.updateData(Mt)}B.text.dynamicLayoutVertexBuffer.updateData(st)}function Xr(B,d,I){return I.iconsInText&&d?"symbolTextAndIcon":B?"symbolSDF":"symbolIcon"}function $r(B,d,I,D,z,W,ne,pe,ye,Se,ze,Qe){const st=B.context,Mt=st.gl,St=B.transform,It=pe==="map",ri=ye==="map",fi=pe!=="viewport"&&I.layout.get("symbol-placement")!=="point",Ai=It&&!ri&&!fi,jt=!I.layout.get("symbol-sort-key").isConstant();let Pi=!1;const Ei=B.depthModeForSublayer(0,Ue.ReadOnly),Vi=I.layout.get("text-variable-anchor"),Ni=[];for(const un of D){const zi=d.getTile(un),zn=zi.getBucket(I);if(!zn)continue;const vn=z?zn.text:zn.icon;if(!vn||!vn.segments.get().length)continue;const Wn=vn.programConfigurations.get(I.id),Ir=z||zn.sdfIcons,Fr=z?zn.textSizeData:zn.iconSizeData,j=ri||St.pitch!==0,K=B.useProgram(Xr(Ir,z,zn),Wn),ue=r.evaluateSizeForZoom(Fr,St.zoom),we=B.style.terrain&&B.style.terrain.getTerrainData(un);let je,Je,tt,at,pt=[0,0],Ct=null;if(z){if(Je=zi.glyphAtlasTexture,tt=Mt.LINEAR,je=zi.glyphAtlasTexture.size,zn.iconsInText){pt=zi.imageAtlasTexture.size,Ct=zi.imageAtlasTexture;const Fn=Fr.kind==="composite"||Fr.kind==="camera";at=j||B.options.rotating||B.options.zooming||Fn?Mt.LINEAR:Mt.NEAREST}}else{const Fn=I.layout.get("icon-size").constantOr(0)!==1||zn.iconsNeedLinear;Je=zi.imageAtlasTexture,tt=Ir||B.options.rotating||B.options.zooming||Fn||j?Mt.LINEAR:Mt.NEAREST,je=zi.imageAtlasTexture.size}const ai=yn(zi,1,B.transform.zoom),ki=et(un.posMatrix,ri,It,B.transform,ai),wi=vt(un.posMatrix,ri,It,B.transform,ai),pi=Vi&&zn.hasTextData(),on=I.layout.get("icon-text-fit")!=="none"&&pi&&zn.hasIconData();if(fi){const Fn=B.style.terrain?(Sr,Rn)=>B.style.terrain.getElevation(un,Sr,Rn):null,Sn=I.layout.get("text-rotation-alignment")==="map";Mn(zn,un.posMatrix,B,z,ki,wi,ri,Se,Sn,Fn)}const Oi=B.translatePosMatrix(un.posMatrix,zi,W,ne),qt=fi||z&&Vi||on?Jn:ki,Qt=B.translatePosMatrix(wi,zi,W,ne,!0),Ki=Ir&&I.paint.get(z?"text-halo-width":"icon-halo-width").constantOr(1)!==0;let tn;tn=Ir?zn.iconsInText?ot(Fr.kind,ue,Ai,ri,B,Oi,qt,Qt,je,pt):De(Fr.kind,ue,Ai,ri,B,Oi,qt,Qt,z,je,!0):ge(Fr.kind,ue,Ai,ri,B,Oi,qt,Qt,z,je);const Ui={program:K,buffers:vn,uniformValues:tn,atlasTexture:Je,atlasTextureIcon:Ct,atlasInterpolation:tt,atlasInterpolationIcon:at,isSDF:Ir,hasHalo:Ki};if(jt&&zn.canOverlap){Pi=!0;const Fn=vn.segments.get();for(const Sn of Fn)Ni.push({segments:new r.SegmentVector([Sn]),sortKey:Sn.sortKey,state:Ui,terrainData:we})}else Ni.push({segments:vn.segments,sortKey:0,state:Ui,terrainData:we})}Pi&&Ni.sort((un,zi)=>un.sortKey-zi.sortKey);for(const un of Ni){const zi=un.state;if(st.activeTexture.set(Mt.TEXTURE0),zi.atlasTexture.bind(zi.atlasInterpolation,Mt.CLAMP_TO_EDGE),zi.atlasTextureIcon&&(st.activeTexture.set(Mt.TEXTURE1),zi.atlasTextureIcon&&zi.atlasTextureIcon.bind(zi.atlasInterpolationIcon,Mt.CLAMP_TO_EDGE)),zi.isSDF){const zn=zi.uniformValues;zi.hasHalo&&(zn.u_is_halo=1,Fo(zi.buffers,un.segments,I,B,zi.program,Ei,ze,Qe,zn,un.terrainData)),zn.u_is_halo=0}Fo(zi.buffers,un.segments,I,B,zi.program,Ei,ze,Qe,zi.uniformValues,un.terrainData)}}function Fo(B,d,I,D,z,W,ne,pe,ye,Se){const ze=D.context;z.draw(ze,ze.gl.TRIANGLES,W,ne,pe,hi.disabled,ye,Se,I.id,B.layoutVertexBuffer,B.indexBuffer,d,I.paint,D.transform.zoom,B.programConfigurations.get(I.id),B.dynamicLayoutVertexBuffer,B.opacityVertexBuffer)}function No(B,d,I,D,z,W,ne){const pe=B.context.gl,ye=I.paint.get("fill-pattern"),Se=ye&&ye.constantOr(1),ze=I.getCrossfadeParameters();let Qe,st,Mt,St,It;ne?(st=Se&&!I.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",Qe=pe.LINES):(st=Se?"fillPattern":"fill",Qe=pe.TRIANGLES);for(const ri of D){const fi=d.getTile(ri);if(Se&&!fi.patternsLoaded())continue;const Ai=fi.getBucket(I);if(!Ai)continue;const jt=Ai.programConfigurations.get(I.id),Pi=B.useProgram(st,jt),Ei=B.style.terrain&&B.style.terrain.getTerrainData(ri);Se&&(B.context.activeTexture.set(pe.TEXTURE0),fi.imageAtlasTexture.bind(pe.LINEAR,pe.CLAMP_TO_EDGE),jt.updatePaintBuffers(ze));const Vi=ye.constantOr(null);if(Vi&&fi.imageAtlas){const zi=fi.imageAtlas,zn=zi.patternPositions[Vi.to.toString()],vn=zi.patternPositions[Vi.from.toString()];zn&&vn&&jt.setConstantPatternPositions(zn,vn)}const Ni=Ei?ri:null,un=B.translatePosMatrix(Ni?Ni.posMatrix:ri.posMatrix,fi,I.paint.get("fill-translate"),I.paint.get("fill-translate-anchor"));if(ne){St=Ai.indexBuffer2,It=Ai.segments2;const zi=[pe.drawingBufferWidth,pe.drawingBufferHeight];Mt=st==="fillOutlinePattern"&&Se?Ca(un,B,ze,fi,zi):vs(un,zi)}else St=Ai.indexBuffer,It=Ai.segments,Mt=Se?Vs(un,B,ze,fi):ns(un);Pi.draw(B.context,Qe,z,B.stencilModeForClipping(ri),W,hi.disabled,Mt,Ei,I.id,Ai.layoutVertexBuffer,St,It,I.paint,B.transform.zoom,jt)}}function Ho(B,d,I,D,z,W,ne){const pe=B.context,ye=pe.gl,Se=I.paint.get("fill-extrusion-pattern"),ze=Se.constantOr(1),Qe=I.getCrossfadeParameters(),st=I.paint.get("fill-extrusion-opacity");for(const Mt of D){const St=d.getTile(Mt),It=St.getBucket(I);if(!It)continue;const ri=B.style.terrain&&B.style.terrain.getTerrainData(Mt),fi=It.programConfigurations.get(I.id),Ai=B.useProgram(ze?"fillExtrusionPattern":"fillExtrusion",fi);ze&&(B.context.activeTexture.set(ye.TEXTURE0),St.imageAtlasTexture.bind(ye.LINEAR,ye.CLAMP_TO_EDGE),fi.updatePaintBuffers(Qe));const jt=Se.constantOr(null);if(jt&&St.imageAtlas){const Ni=St.imageAtlas,un=Ni.patternPositions[jt.to.toString()],zi=Ni.patternPositions[jt.from.toString()];un&&zi&&fi.setConstantPatternPositions(un,zi)}const Pi=B.translatePosMatrix(Mt.posMatrix,St,I.paint.get("fill-extrusion-translate"),I.paint.get("fill-extrusion-translate-anchor")),Ei=I.paint.get("fill-extrusion-vertical-gradient"),Vi=ze?Sa(Pi,B,Ei,st,Mt,Qe,St):Oo(Pi,B,Ei,st);Ai.draw(pe,pe.gl.TRIANGLES,z,W,ne,hi.backCCW,Vi,ri,I.id,It.layoutVertexBuffer,It.indexBuffer,It.segments,I.paint,B.transform.zoom,fi,B.style.terrain&&It.centroidVertexBuffer)}}function Es(B,d,I,D,z,W,ne){const pe=B.context,ye=pe.gl,Se=I.fbo;if(!Se)return;const ze=B.useProgram("hillshade"),Qe=B.style.terrain&&B.style.terrain.getTerrainData(d);pe.activeTexture.set(ye.TEXTURE0),ye.bindTexture(ye.TEXTURE_2D,Se.colorAttachment.get()),ze.draw(pe,ye.TRIANGLES,z,W,ne,hi.disabled,((st,Mt,St,It)=>{const ri=St.paint.get("hillshade-shadow-color"),fi=St.paint.get("hillshade-highlight-color"),Ai=St.paint.get("hillshade-accent-color");let jt=St.paint.get("hillshade-illumination-direction")*(Math.PI/180);St.paint.get("hillshade-illumination-anchor")==="viewport"&&(jt-=st.transform.angle);const Pi=!st.options.moving;return{u_matrix:It?It.posMatrix:st.transform.calculatePosMatrix(Mt.tileID.toUnwrapped(),Pi),u_image:0,u_latrange:cu(0,Mt.tileID),u_light:[St.paint.get("hillshade-exaggeration"),jt],u_shadow:ri,u_highlight:fi,u_accent:Ai}})(B,I,D,Qe?d:null),Qe,D.id,B.rasterBoundsBuffer,B.quadTriangleIndexBuffer,B.rasterBoundsSegments)}function ps(B,d,I,D,z,W){const ne=B.context,pe=ne.gl,ye=d.dem;if(ye&&ye.data){const Se=ye.dim,ze=ye.stride,Qe=ye.getPixels();if(ne.activeTexture.set(pe.TEXTURE1),ne.pixelStoreUnpackPremultiplyAlpha.set(!1),d.demTexture=d.demTexture||B.getTileTexture(ze),d.demTexture){const Mt=d.demTexture;Mt.update(Qe,{premultiply:!1}),Mt.bind(pe.NEAREST,pe.CLAMP_TO_EDGE)}else d.demTexture=new T(ne,Qe,pe.RGBA,{premultiply:!1}),d.demTexture.bind(pe.NEAREST,pe.CLAMP_TO_EDGE);ne.activeTexture.set(pe.TEXTURE0);let st=d.fbo;if(!st){const Mt=new T(ne,{width:Se,height:Se,data:null},pe.RGBA);Mt.bind(pe.LINEAR,pe.CLAMP_TO_EDGE),st=d.fbo=ne.createFramebuffer(Se,Se,!0),st.colorAttachment.set(Mt.texture)}ne.bindFramebuffer.set(st.framebuffer),ne.viewport.set([0,0,Se,Se]),B.useProgram("hillshadePrepare").draw(ne,pe.TRIANGLES,D,z,W,hi.disabled,((Mt,St)=>{const It=St.stride,ri=r.create();return r.ortho(ri,0,r.EXTENT,-r.EXTENT,0,0,1),r.translate(ri,ri,[0,-r.EXTENT,0]),{u_matrix:ri,u_image:1,u_dimension:[It,It],u_zoom:Mt.overscaledZ,u_unpack:St.getUnpackVector()}})(d.tileID,ye),null,I.id,B.rasterBoundsBuffer,B.quadTriangleIndexBuffer,B.rasterBoundsSegments),d.needsHillshadePrepare=!1}}function Ur(B,d,I,D,z,W){const ne=D.paint.get("raster-fade-duration");if(!W&&ne>0){const pe=r.exported.now(),ye=(pe-B.timeAdded)/ne,Se=d?(pe-d.timeAdded)/ne:-1,ze=I.getSource(),Qe=z.coveringZoomLevel({tileSize:ze.tileSize,roundZoom:ze.roundZoom}),st=!d||Math.abs(d.tileID.overscaledZ-Qe)>Math.abs(B.tileID.overscaledZ-Qe),Mt=st&&B.refreshedUponExpiration?1:r.clamp(st?ye:1-Se,0,1);return B.refreshedUponExpiration&&ye>=1&&(B.refreshedUponExpiration=!1),d?{opacity:1,mix:1-Mt}:{opacity:Mt,mix:0}}return{opacity:1,mix:0}}const Is=new r.Color(1,0,0,1),bs=new r.Color(0,1,0,1),Xl=new r.Color(0,0,1,1),El=new r.Color(1,0,1,1),Nu=new r.Color(0,1,1,1);function Ia(B,d,I,D){rl(B,0,d+I/2,B.transform.width,I,D)}function Il(B,d,I,D){rl(B,d-I/2,0,I,B.transform.height,D)}function rl(B,d,I,D,z,W){const ne=B.context,pe=ne.gl;pe.enable(pe.SCISSOR_TEST),pe.scissor(d*B.pixelRatio,I*B.pixelRatio,D*B.pixelRatio,z*B.pixelRatio),ne.clear({color:W}),pe.disable(pe.SCISSOR_TEST)}function ju(B,d,I){const D=B.context,z=D.gl,W=I.posMatrix,ne=B.useProgram("debug"),pe=Ue.disabled,ye=Xt.disabled,Se=B.colorModeForRenderPass(),ze="$debug",Qe=B.style.terrain&&B.style.terrain.getTerrainData(I);D.activeTexture.set(z.TEXTURE0),B.emptyTexture.bind(z.LINEAR,z.CLAMP_TO_EDGE);const st=d.getTileByID(I.key).latestRawTileData,Mt=Math.floor((st&&st.byteLength||0)/1024),St=d.getTile(I).tileSize,It=512/Math.min(St,512)*(I.overscaledZ/B.transform.zoom)*.5;let ri=I.canonical.toString();I.overscaledZ!==I.canonical.z&&(ri+=` => ${I.overscaledZ}`),function(fi,Ai){fi.initDebugOverlayCanvas();const jt=fi.debugOverlayCanvas,Pi=fi.context.gl,Ei=fi.debugOverlayCanvas.getContext("2d");Ei.clearRect(0,0,jt.width,jt.height),Ei.shadowColor="white",Ei.shadowBlur=2,Ei.lineWidth=1.5,Ei.strokeStyle="white",Ei.textBaseline="top",Ei.font="bold 36px Open Sans, sans-serif",Ei.fillText(Ai,5,5),Ei.strokeText(Ai,5,5),fi.debugOverlayTexture.update(jt),fi.debugOverlayTexture.bind(Pi.LINEAR,Pi.CLAMP_TO_EDGE)}(B,`${ri} ${Mt}kB`),ne.draw(D,z.TRIANGLES,pe,ye,xo.alphaBlended,hi.disabled,qs(W,r.Color.transparent,It),null,ze,B.debugBuffer,B.quadTriangleIndexBuffer,B.debugSegments),ne.draw(D,z.LINE_STRIP,pe,ye,Se,hi.disabled,qs(W,r.Color.red),Qe,ze,B.debugBuffer,B.tileBorderIndexBuffer,B.debugSegments)}function Fs(B,d,I){const D=B.context,z=D.gl,W=B.colorModeForRenderPass(),ne=new Ue(z.LEQUAL,Ue.ReadWrite,B.depthRangeFor3D),pe=B.useProgram("terrain"),ye=d.getTerrainMesh(),Se=d.getTerrainData(I.tileID);D.bindFramebuffer.set(null),D.viewport.set([0,0,B.width,B.height]),D.activeTexture.set(z.TEXTURE0),z.bindTexture(z.TEXTURE_2D,d.getRTTFramebuffer().colorAttachment.get());const ze=B.transform.calculatePosMatrix(I.tileID.toUnwrapped());pe.draw(D,z.TRIANGLES,ne,Xt.disabled,W,hi.backCCW,{u_matrix:ze,u_texture:0},Se,"terrain",ye.vertexBuffer,ye.indexBuffer,ye.segments)}function yu(B,d,I,D){const z=B.context,W=I.tileSize*d.qualityFactor;I.textures[D]||(I.textures[D]=B.getTileTexture(W)||new T(z,{width:W,height:W,data:null},z.gl.RGBA),I.textures[D].bind(z.gl.LINEAR,z.gl.CLAMP_TO_EDGE),D===0&&d.sourceCache.renderHistory.unshift(I.tileID.key));const ne=d.getRTTFramebuffer();ne.colorAttachment.set(I.textures[D].texture),z.bindFramebuffer.set(ne.framebuffer),z.viewport.set([0,0,W,W])}class Yl{constructor(d){this._coordsDescendingInv={},this._coordsDescendingInvStr={},this.painter=d,this._renderToTexture={background:!0,fill:!0,line:!0,raster:!0},this._coordsDescendingInv={},this._coordsDescendingInvStr={},this._stacks=[],this._prevType=null,this._rerender={},this._renderableTiles=d.style.terrain.sourceCache.getRenderableTiles(),this._init()}_init(){const d=this.painter.style,I=d.terrain;for(const D in d.sourceCaches){this._coordsDescendingInv[D]={};const z=d.sourceCaches[D].getVisibleCoordinates();for(const W of z){const ne=I.sourceCache.getTerrainCoords(W);for(const pe in ne)this._coordsDescendingInv[D][pe]||(this._coordsDescendingInv[D][pe]=[]),this._coordsDescendingInv[D][pe].push(ne[pe])}}for(const D of d._order){const z=d._layers[D],W=z.source;if(this._renderToTexture[z.type]&&!this._coordsDescendingInvStr[W]){this._coordsDescendingInvStr[W]={};for(const ne in this._coordsDescendingInv[W])this._coordsDescendingInvStr[W][ne]=this._coordsDescendingInv[W][ne].map(pe=>pe.key).sort().join()}}return this._renderableTiles.forEach(D=>{for(const z in this._coordsDescendingInvStr){const W=this._coordsDescendingInvStr[z][D.tileID.key];W&&W!==D.textureCoords[z]&&D.clearTextures(this.painter),I.needsRerender(z,D.tileID)&&D.clearTextures(this.painter)}this._rerender[D.tileID.key]=!D.textures.length}),I.clearRerenderCache(),I.sourceCache.removeOutdated(this.painter),this}renderLayer(d){const I=d.type,D=this.painter,z=D.style._order,W=D.currentLayer,ne=W+1===z.length;if(this._renderToTexture[I]&&(this._prevType&&this._renderToTexture[this._prevType]||this._stacks.push([]),this._prevType=I,this._stacks[this._stacks.length-1].push(z[W]),!ne))return!0;if(this._renderToTexture[this._prevType]||I==="hillshade"||this._renderToTexture[I]&&ne){this._prevType=I;const pe=this._stacks.length-1,ye=this._stacks[pe]||[];for(const Se of this._renderableTiles){if(yu(D,D.style.terrain,Se,pe),this._rerender[Se.tileID.key]){D.context.clear({color:r.Color.transparent});for(let ze=0;ze<ye.length;ze++){const Qe=D.style._layers[ye[ze]],st=Qe.source?this._coordsDescendingInv[Qe.source][Se.tileID.key]:[Se.tileID];D._renderTileClippingMasks(Qe,st),D.renderLayer(D,D.style.sourceCaches[Qe.source],Qe,st),Qe.source&&(Se.textureCoords[Qe.source]=this._coordsDescendingInvStr[Qe.source][Se.tileID.key])}}Fs(D,D.style.terrain,Se)}if(I==="hillshade"){this._stacks.push([z[W]]);for(const Se of this._renderableTiles){const ze=this._coordsDescendingInv[d.source][Se.tileID.key];yu(D,D.style.terrain,Se,this._stacks.length-1),D.context.clear({color:r.Color.transparent}),D._renderTileClippingMasks(d,ze),D.renderLayer(D,D.style.sourceCaches[d.source],d,ze),Fs(D,D.style.terrain,Se)}return!0}return this._renderToTexture[I]}return!1}}const Ua={symbol:function(B,d,I,D,z){if(B.renderPass!=="translucent")return;const W=Xt.disabled,ne=B.colorModeForRenderPass();I.layout.get("text-variable-anchor")&&function(pe,ye,Se,ze,Qe,st,Mt){const St=ye.transform,It=Qe==="map",ri=st==="map";for(const fi of pe){const Ai=ze.getTile(fi),jt=Ai.getBucket(Se);if(!jt||!jt.text||!jt.text.segments.get().length)continue;const Pi=r.evaluateSizeForZoom(jt.textSizeData,St.zoom),Ei=yn(Ai,1,ye.transform.zoom),Vi=et(fi.posMatrix,ri,It,ye.transform,Ei),Ni=Se.layout.get("icon-text-fit")!=="none"&&jt.hasIconData();if(Pi){const un=Math.pow(2,St.zoom-Ai.tileID.overscaledZ);jr(jt,It,ri,Mt,St,Vi,fi.posMatrix,un,Pi,Ni,ye.style.terrain?(zi,zn)=>ye.style.terrain.getElevation(fi,zi,zn):null)}}}(D,B,I,d,I.layout.get("text-rotation-alignment"),I.layout.get("text-pitch-alignment"),z),I.paint.get("icon-opacity").constantOr(1)!==0&&$r(B,d,I,D,!1,I.paint.get("icon-translate"),I.paint.get("icon-translate-anchor"),I.layout.get("icon-rotation-alignment"),I.layout.get("icon-pitch-alignment"),I.layout.get("icon-keep-upright"),W,ne),I.paint.get("text-opacity").constantOr(1)!==0&&$r(B,d,I,D,!0,I.paint.get("text-translate"),I.paint.get("text-translate-anchor"),I.layout.get("text-rotation-alignment"),I.layout.get("text-pitch-alignment"),I.layout.get("text-keep-upright"),W,ne),d.map.showCollisionBoxes&&(hn(B,d,I,D,I.paint.get("text-translate"),I.paint.get("text-translate-anchor"),!0),hn(B,d,I,D,I.paint.get("icon-translate"),I.paint.get("icon-translate-anchor"),!1))},circle:function(B,d,I,D){if(B.renderPass!=="translucent")return;const z=I.paint.get("circle-opacity"),W=I.paint.get("circle-stroke-width"),ne=I.paint.get("circle-stroke-opacity"),pe=!I.layout.get("circle-sort-key").isConstant();if(z.constantOr(1)===0&&(W.constantOr(1)===0||ne.constantOr(1)===0))return;const ye=B.context,Se=ye.gl,ze=B.depthModeForSublayer(0,Ue.ReadOnly),Qe=Xt.disabled,st=B.colorModeForRenderPass(),Mt=[];for(let St=0;St<D.length;St++){const It=D[St],ri=d.getTile(It),fi=ri.getBucket(I);if(!fi)continue;const Ai=fi.programConfigurations.get(I.id),jt=B.useProgram("circle",Ai),Pi=fi.layoutVertexBuffer,Ei=fi.indexBuffer,Vi=B.style.terrain&&B.style.terrain.getTerrainData(It),Ni={programConfiguration:Ai,program:jt,layoutVertexBuffer:Pi,indexBuffer:Ei,uniformValues:Cs(B,It,ri,I),terrainData:Vi};if(pe){const un=fi.segments.get();for(const zi of un)Mt.push({segments:new r.SegmentVector([zi]),sortKey:zi.sortKey,state:Ni})}else Mt.push({segments:fi.segments,sortKey:0,state:Ni})}pe&&Mt.sort((St,It)=>St.sortKey-It.sortKey);for(const St of Mt){const{programConfiguration:It,program:ri,layoutVertexBuffer:fi,indexBuffer:Ai,uniformValues:jt,terrainData:Pi}=St.state;ri.draw(ye,Se.TRIANGLES,ze,Qe,st,hi.disabled,jt,Pi,I.id,fi,Ai,St.segments,I.paint,B.transform.zoom,It)}},heatmap:function(B,d,I,D){if(I.paint.get("heatmap-opacity")!==0)if(B.renderPass==="offscreen"){const z=B.context,W=z.gl,ne=Xt.disabled,pe=new xo([W.ONE,W.ONE],r.Color.transparent,[!0,!0,!0,!0]);(function(ye,Se,ze){const Qe=ye.gl;ye.activeTexture.set(Qe.TEXTURE1),ye.viewport.set([0,0,Se.width/4,Se.height/4]);let st=ze.heatmapFbo;if(st)Qe.bindTexture(Qe.TEXTURE_2D,st.colorAttachment.get()),ye.bindFramebuffer.set(st.framebuffer);else{const Mt=Qe.createTexture();Qe.bindTexture(Qe.TEXTURE_2D,Mt),Qe.texParameteri(Qe.TEXTURE_2D,Qe.TEXTURE_WRAP_S,Qe.CLAMP_TO_EDGE),Qe.texParameteri(Qe.TEXTURE_2D,Qe.TEXTURE_WRAP_T,Qe.CLAMP_TO_EDGE),Qe.texParameteri(Qe.TEXTURE_2D,Qe.TEXTURE_MIN_FILTER,Qe.LINEAR),Qe.texParameteri(Qe.TEXTURE_2D,Qe.TEXTURE_MAG_FILTER,Qe.LINEAR),st=ze.heatmapFbo=ye.createFramebuffer(Se.width/4,Se.height/4,!1),function(St,It,ri,fi){const Ai=St.gl;Ai.texImage2D(Ai.TEXTURE_2D,0,Ai.RGBA,It.width/4,It.height/4,0,Ai.RGBA,St.extRenderToTextureHalfFloat?St.extTextureHalfFloat.HALF_FLOAT_OES:Ai.UNSIGNED_BYTE,null),fi.colorAttachment.set(ri)}(ye,Se,Mt,st)}})(z,B,I),z.clear({color:r.Color.transparent});for(let ye=0;ye<D.length;ye++){const Se=D[ye];if(d.hasRenderableParent(Se))continue;const ze=d.getTile(Se),Qe=ze.getBucket(I);if(!Qe)continue;const st=Qe.programConfigurations.get(I.id),Mt=B.useProgram("heatmap",st),{zoom:St}=B.transform;Mt.draw(z,W.TRIANGLES,Ue.disabled,ne,pe,hi.disabled,kl(Se.posMatrix,ze,St,I.paint.get("heatmap-intensity")),null,I.id,Qe.layoutVertexBuffer,Qe.indexBuffer,Qe.segments,I.paint,B.transform.zoom,st)}z.viewport.set([0,0,B.width,B.height])}else B.renderPass==="translucent"&&(B.context.setColorMode(B.colorModeForRenderPass()),function(z,W){const ne=z.context,pe=ne.gl,ye=W.heatmapFbo;if(!ye)return;ne.activeTexture.set(pe.TEXTURE0),pe.bindTexture(pe.TEXTURE_2D,ye.colorAttachment.get()),ne.activeTexture.set(pe.TEXTURE1);let Se=W.colorRampTexture;Se||(Se=W.colorRampTexture=new T(ne,W.colorRamp,pe.RGBA)),Se.bind(pe.LINEAR,pe.CLAMP_TO_EDGE),z.useProgram("heatmapTexture").draw(ne,pe.TRIANGLES,Ue.disabled,Xt.disabled,z.colorModeForRenderPass(),hi.disabled,((ze,Qe,st,Mt)=>{const St=r.create();r.ortho(St,0,ze.width,ze.height,0,0,1);const It=ze.context.gl;return{u_matrix:St,u_world:[It.drawingBufferWidth,It.drawingBufferHeight],u_image:0,u_color_ramp:1,u_opacity:Qe.paint.get("heatmap-opacity")}})(z,W),null,W.id,z.viewportBuffer,z.quadTriangleIndexBuffer,z.viewportSegments,W.paint,z.transform.zoom)}(B,I))},line:function(B,d,I,D){if(B.renderPass!=="translucent")return;const z=I.paint.get("line-opacity"),W=I.paint.get("line-width");if(z.constantOr(1)===0||W.constantOr(1)===0)return;const ne=B.depthModeForSublayer(0,Ue.ReadOnly),pe=B.colorModeForRenderPass(),ye=I.paint.get("line-dasharray"),Se=I.paint.get("line-pattern"),ze=Se.constantOr(1),Qe=I.paint.get("line-gradient"),st=I.getCrossfadeParameters(),Mt=ze?"linePattern":ye?"lineSDF":Qe?"lineGradient":"line",St=B.context,It=St.gl;let ri=!0;for(const fi of D){const Ai=d.getTile(fi);if(ze&&!Ai.patternsLoaded())continue;const jt=Ai.getBucket(I);if(!jt)continue;const Pi=jt.programConfigurations.get(I.id),Ei=B.context.program.get(),Vi=B.useProgram(Mt,Pi),Ni=ri||Vi.program!==Ei,un=B.style.terrain&&B.style.terrain.getTerrainData(fi),zi=Se.constantOr(null);if(zi&&Ai.imageAtlas){const Wn=Ai.imageAtlas,Ir=Wn.patternPositions[zi.to.toString()],Fr=Wn.patternPositions[zi.from.toString()];Ir&&Fr&&Pi.setConstantPatternPositions(Ir,Fr)}const zn=un?fi:null,vn=ze?ha(B,Ai,I,st,zn):ye?fa(B,Ai,I,ye,st,zn):Qe?hu(B,Ai,I,jt.lineClipsArray.length,zn):Sl(B,Ai,I,zn);if(ze)St.activeTexture.set(It.TEXTURE0),Ai.imageAtlasTexture.bind(It.LINEAR,It.CLAMP_TO_EDGE),Pi.updatePaintBuffers(st);else if(ye&&(Ni||B.lineAtlas.dirty))St.activeTexture.set(It.TEXTURE0),B.lineAtlas.bind(St);else if(Qe){const Wn=jt.gradients[I.id];let Ir=Wn.texture;if(I.gradientVersion!==Wn.version){let Fr=256;if(I.stepInterpolant){const j=d.getSource().maxzoom,K=fi.canonical.z===j?Math.ceil(1<<B.transform.maxZoom-fi.canonical.z):1;Fr=r.clamp(r.nextPowerOfTwo(jt.maxLineLength/r.EXTENT*1024*K),256,St.maxTextureSize)}Wn.gradient=r.renderColorRamp({expression:I.gradientExpression(),evaluationKey:"lineProgress",resolution:Fr,image:Wn.gradient||void 0,clips:jt.lineClipsArray}),Wn.texture?Wn.texture.update(Wn.gradient):Wn.texture=new T(St,Wn.gradient,It.RGBA),Wn.version=I.gradientVersion,Ir=Wn.texture}St.activeTexture.set(It.TEXTURE0),Ir.bind(I.stepInterpolant?It.NEAREST:It.LINEAR,It.CLAMP_TO_EDGE)}Vi.draw(St,It.TRIANGLES,ne,B.stencilModeForClipping(fi),pe,hi.disabled,vn,un,I.id,jt.layoutVertexBuffer,jt.indexBuffer,jt.segments,I.paint,B.transform.zoom,Pi,jt.layoutVertexBuffer2),ri=!1}},fill:function(B,d,I,D){const z=I.paint.get("fill-color"),W=I.paint.get("fill-opacity");if(W.constantOr(1)===0)return;const ne=B.colorModeForRenderPass(),pe=I.paint.get("fill-pattern"),ye=B.opaquePassEnabledForLayer()&&!pe.constantOr(1)&&z.constantOr(r.Color.transparent).a===1&&W.constantOr(0)===1?"opaque":"translucent";if(B.renderPass===ye){const Se=B.depthModeForSublayer(1,B.renderPass==="opaque"?Ue.ReadWrite:Ue.ReadOnly);No(B,d,I,D,Se,ne,!1)}if(B.renderPass==="translucent"&&I.paint.get("fill-antialias")){const Se=B.depthModeForSublayer(I.getPaintProperty("fill-outline-color")?2:0,Ue.ReadOnly);No(B,d,I,D,Se,ne,!0)}},"fill-extrusion":function(B,d,I,D){const z=I.paint.get("fill-extrusion-opacity");if(z!==0&&B.renderPass==="translucent"){const W=new Ue(B.context.gl.LEQUAL,Ue.ReadWrite,B.depthRangeFor3D);if(z!==1||I.paint.get("fill-extrusion-pattern").constantOr(1))Ho(B,d,I,D,W,Xt.disabled,xo.disabled),Ho(B,d,I,D,W,B.stencilModeFor3D(),B.colorModeForRenderPass());else{const ne=B.colorModeForRenderPass();Ho(B,d,I,D,W,Xt.disabled,ne)}}},hillshade:function(B,d,I,D){if(B.renderPass!=="offscreen"&&B.renderPass!=="translucent")return;const z=B.context,W=B.depthModeForSublayer(0,Ue.ReadOnly),ne=B.colorModeForRenderPass(),[pe,ye]=B.renderPass==="translucent"?B.stencilConfigForOverlap(D):[{},D];for(const Se of ye){const ze=d.getTile(Se);ze.needsHillshadePrepare!==void 0&&ze.needsHillshadePrepare&&B.renderPass==="offscreen"?ps(B,ze,I,W,Xt.disabled,ne):B.renderPass==="translucent"&&Es(B,Se,ze,I,W,pe[Se.overscaledZ],ne)}z.viewport.set([0,0,B.width,B.height])},raster:function(B,d,I,D){if(B.renderPass!=="translucent"||I.paint.get("raster-opacity")===0||!D.length)return;const z=B.context,W=z.gl,ne=d.getSource(),pe=B.useProgram("raster"),ye=B.colorModeForRenderPass(),[Se,ze]=ne instanceof be?[{},D]:B.stencilConfigForOverlap(D),Qe=ze[ze.length-1].overscaledZ,st=!B.options.moving;for(const Mt of ze){const St=B.depthModeForSublayer(Mt.overscaledZ-Qe,I.paint.get("raster-opacity")===1?Ue.ReadWrite:Ue.ReadOnly,W.LESS),It=d.getTile(Mt);It.registerFadeDuration(I.paint.get("raster-fade-duration"));const ri=d.findLoadedParent(Mt,0),fi=Ur(It,ri,d,I,B.transform,B.style.terrain);let Ai,jt;const Pi=I.paint.get("raster-resampling")==="nearest"?W.NEAREST:W.LINEAR;z.activeTexture.set(W.TEXTURE0),It.texture.bind(Pi,W.CLAMP_TO_EDGE,W.LINEAR_MIPMAP_NEAREST),z.activeTexture.set(W.TEXTURE1),ri?(ri.texture.bind(Pi,W.CLAMP_TO_EDGE,W.LINEAR_MIPMAP_NEAREST),Ai=Math.pow(2,ri.tileID.overscaledZ-It.tileID.overscaledZ),jt=[It.tileID.canonical.x*Ai%1,It.tileID.canonical.y*Ai%1]):It.texture.bind(Pi,W.CLAMP_TO_EDGE,W.LINEAR_MIPMAP_NEAREST);const Ei=B.style.terrain&&B.style.terrain.getTerrainData(Mt),Vi=Ei?Mt:null,Ni=Vi?Vi.posMatrix:B.transform.calculatePosMatrix(Mt.toUnwrapped(),st),un=U(Ni,jt||[0,0],Ai||1,fi,I);ne instanceof be?pe.draw(z,W.TRIANGLES,St,Xt.disabled,ye,hi.disabled,un,Ei,I.id,ne.boundsBuffer,B.quadTriangleIndexBuffer,ne.boundsSegments):pe.draw(z,W.TRIANGLES,St,Se[Mt.overscaledZ],ye,hi.disabled,un,Ei,I.id,B.rasterBoundsBuffer,B.quadTriangleIndexBuffer,B.rasterBoundsSegments)}},background:function(B,d,I,D){const z=I.paint.get("background-color"),W=I.paint.get("background-opacity");if(W===0)return;const ne=B.context,pe=ne.gl,ye=B.transform,Se=ye.tileSize,ze=I.paint.get("background-pattern");if(B.isPatternMissing(ze))return;const Qe=!ze&&z.a===1&&W===1&&B.opaquePassEnabledForLayer()?"opaque":"translucent";if(B.renderPass!==Qe)return;const st=Xt.disabled,Mt=B.depthModeForSublayer(0,Qe==="opaque"?Ue.ReadWrite:Ue.ReadOnly),St=B.colorModeForRenderPass(),It=B.useProgram(ze?"backgroundPattern":"background"),ri=D||ye.coveringTiles({tileSize:Se,terrain:B.style.terrain});ze&&(ne.activeTexture.set(pe.TEXTURE0),B.imageManager.bind(B.context));const fi=I.getCrossfadeParameters();for(const Ai of ri){const jt=D?Ai.posMatrix:B.transform.calculatePosMatrix(Ai.toUnwrapped()),Pi=ze?Nt(jt,W,B,ze,{tileID:Ai,tileSize:Se},fi):Et(jt,W,z),Ei=B.style.terrain&&B.style.terrain.getTerrainData(Ai);It.draw(ne,pe.TRIANGLES,Mt,st,St,hi.disabled,Pi,Ei,I.id,B.tileExtentBuffer,B.quadTriangleIndexBuffer,B.tileExtentSegments)}},debug:function(B,d,I){for(let D=0;D<I.length;D++)ju(B,d,I[D])},custom:function(B,d,I){const D=B.context,z=I.implementation;if(B.renderPass==="offscreen"){const W=z.prerender;W&&(B.setCustomLayerDefaults(),D.setColorMode(B.colorModeForRenderPass()),W.call(z,D.gl,B.transform.customLayerMatrix()),D.setDirty(),B.setBaseState())}else if(B.renderPass==="translucent"){B.setCustomLayerDefaults(),D.setColorMode(B.colorModeForRenderPass()),D.setStencilMode(Xt.disabled);const W=z.renderingMode==="3d"?new Ue(B.context.gl.LEQUAL,Ue.ReadWrite,B.depthRangeFor3D):B.depthModeForSublayer(0,Ue.ReadOnly);D.setDepthMode(W),z.render(D.gl,B.transform.customLayerMatrix()),D.setDirty(),B.setBaseState(),D.bindFramebuffer.set(null)}}};class _u{constructor(d,I){this.context=new se(d),this.transform=I,this._tileTextures={},this.terrainFacilitator={dirty:!0,matrix:r.create(),renderTime:0},this.setup(),this.numSublayers=Ye.maxUnderzooming+Ye.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new $n,this.gpuTimers={}}resize(d,I,D){if(this.width=d*D,this.height=I*D,this.pixelRatio=D,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const z of this.style._order)this.style._layers[z].resize()}setup(){const d=this.context,I=new r.PosArray;I.emplaceBack(0,0),I.emplaceBack(r.EXTENT,0),I.emplaceBack(0,r.EXTENT),I.emplaceBack(r.EXTENT,r.EXTENT),this.tileExtentBuffer=d.createVertexBuffer(I,Pr.members),this.tileExtentSegments=r.SegmentVector.simpleSegment(0,0,4,2);const D=new r.PosArray;D.emplaceBack(0,0),D.emplaceBack(r.EXTENT,0),D.emplaceBack(0,r.EXTENT),D.emplaceBack(r.EXTENT,r.EXTENT),this.debugBuffer=d.createVertexBuffer(D,Pr.members),this.debugSegments=r.SegmentVector.simpleSegment(0,0,4,5);const z=new r.RasterBoundsArray;z.emplaceBack(0,0,0,0),z.emplaceBack(r.EXTENT,0,r.EXTENT,0),z.emplaceBack(0,r.EXTENT,0,r.EXTENT),z.emplaceBack(r.EXTENT,r.EXTENT,r.EXTENT,r.EXTENT),this.rasterBoundsBuffer=d.createVertexBuffer(z,We.members),this.rasterBoundsSegments=r.SegmentVector.simpleSegment(0,0,4,2);const W=new r.PosArray;W.emplaceBack(0,0),W.emplaceBack(1,0),W.emplaceBack(0,1),W.emplaceBack(1,1),this.viewportBuffer=d.createVertexBuffer(W,Pr.members),this.viewportSegments=r.SegmentVector.simpleSegment(0,0,4,2);const ne=new r.LineStripIndexArray;ne.emplaceBack(0),ne.emplaceBack(1),ne.emplaceBack(3),ne.emplaceBack(2),ne.emplaceBack(0),this.tileBorderIndexBuffer=d.createIndexBuffer(ne);const pe=new r.TriangleIndexArray;pe.emplaceBack(0,1,2),pe.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=d.createIndexBuffer(pe),this.emptyTexture=new T(d,{width:1,height:1,data:new Uint8Array([0,0,0,0])},d.gl.RGBA);const ye=this.context.gl;this.stencilClearMode=new Xt({func:ye.ALWAYS,mask:0},0,255,ye.ZERO,ye.ZERO,ye.ZERO)}clearStencil(){const d=this.context,I=d.gl;this.nextStencilID=1,this.currentStencilSource=void 0;const D=r.create();r.ortho(D,0,this.width,this.height,0,0,1),r.scale(D,D,[I.drawingBufferWidth,I.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(d,I.TRIANGLES,Ue.disabled,this.stencilClearMode,xo.disabled,hi.disabled,Ea(D),null,"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(d,I){if(this.currentStencilSource===d.source||!d.isTileClipped()||!I||!I.length)return;this.currentStencilSource=d.source;const D=this.context,z=D.gl;this.nextStencilID+I.length>256&&this.clearStencil(),D.setColorMode(xo.disabled),D.setDepthMode(Ue.disabled);const W=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(const ne of I){const pe=this._tileClippingMaskIDs[ne.key]=this.nextStencilID++,ye=this.style.terrain&&this.style.terrain.getTerrainData(ne);W.draw(D,z.TRIANGLES,Ue.disabled,new Xt({func:z.ALWAYS,mask:0},pe,255,z.KEEP,z.KEEP,z.REPLACE),xo.disabled,hi.disabled,Ea(ne.posMatrix),ye,"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const d=this.nextStencilID++,I=this.context.gl;return new Xt({func:I.NOTEQUAL,mask:255},d,255,I.KEEP,I.KEEP,I.REPLACE)}stencilModeForClipping(d){const I=this.context.gl;return new Xt({func:I.EQUAL,mask:255},this._tileClippingMaskIDs[d.key],0,I.KEEP,I.KEEP,I.REPLACE)}stencilConfigForOverlap(d){const I=this.context.gl,D=d.sort((ne,pe)=>pe.overscaledZ-ne.overscaledZ),z=D[D.length-1].overscaledZ,W=D[0].overscaledZ-z+1;if(W>1){this.currentStencilSource=void 0,this.nextStencilID+W>256&&this.clearStencil();const ne={};for(let pe=0;pe<W;pe++)ne[pe+z]=new Xt({func:I.GEQUAL,mask:255},pe+this.nextStencilID,255,I.KEEP,I.KEEP,I.REPLACE);return this.nextStencilID+=W,[ne,D]}return[{[z]:Xt.disabled},D]}colorModeForRenderPass(){const d=this.context.gl;return this._showOverdrawInspector?new xo([d.CONSTANT_COLOR,d.ONE],new r.Color(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?xo.unblended:xo.alphaBlended}depthModeForSublayer(d,I,D){if(!this.opaquePassEnabledForLayer())return Ue.disabled;const z=1-((1+this.currentLayer)*this.numSublayers+d)*this.depthEpsilon;return new Ue(D||this.context.gl.LEQUAL,I,[z,z])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(d,I){this.style=d,this.options=I,this.lineAtlas=d.lineAtlas,this.imageManager=d.imageManager,this.glyphManager=d.glyphManager,this.symbolFadeChange=d.placement.symbolFadeChange(r.exported.now()),this.imageManager.beginFrame();const D=this.style._order,z=this.style.sourceCaches,W=this.style.terrain&&new Yl(this);for(const Se in z){const ze=z[Se];ze.used&&ze.prepare(this.context)}const ne={},pe={},ye={};for(const Se in z){const ze=z[Se];ne[Se]=ze.getVisibleCoordinates(),pe[Se]=ne[Se].slice().reverse(),ye[Se]=ze.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let Se=0;Se<D.length;Se++)if(this.style._layers[D[Se]].is3D()){this.opaquePassCutoff=Se;break}if(W){this.opaquePassCutoff=0;const Se=this.style.terrain.sourceCache.tilesAfterTime(this.terrainFacilitator.renderTime);(this.terrainFacilitator.dirty||!r.equals(this.terrainFacilitator.matrix,this.transform.projMatrix)||Se.length)&&(r.copy(this.terrainFacilitator.matrix,this.transform.projMatrix),this.terrainFacilitator.renderTime=Date.now(),this.terrainFacilitator.dirty=!1,function(ze,Qe){const st=ze.context,Mt=st.gl,St=xo.unblended,It=new Ue(Mt.LEQUAL,Ue.ReadWrite,[0,1]),ri=Qe.getTerrainMesh(),fi=Qe.sourceCache.getRenderableTiles(),Ai=ze.useProgram("terrainDepth");st.bindFramebuffer.set(Qe.getFramebuffer("depth").framebuffer),st.viewport.set([0,0,ze.width/devicePixelRatio,ze.height/devicePixelRatio]),st.clear({color:r.Color.transparent,depth:1});for(const jt of fi){const Pi=Qe.getTerrainData(jt.tileID),Ei=ze.transform.calculatePosMatrix(jt.tileID.toUnwrapped());Ai.draw(st,Mt.TRIANGLES,It,Xt.disabled,St,hi.backCCW,{u_matrix:Ei},Pi,"terrain",ri.vertexBuffer,ri.indexBuffer,ri.segments)}st.bindFramebuffer.set(null),st.viewport.set([0,0,ze.width,ze.height])}(this,this.style.terrain),function(ze,Qe){const st=ze.context,Mt=st.gl,St=xo.unblended,It=new Ue(Mt.LEQUAL,Ue.ReadWrite,[0,1]),ri=Qe.getTerrainMesh(),fi=Qe.getCoordsTexture(),Ai=Qe.sourceCache.getRenderableTiles(),jt=ze.useProgram("terrainCoords");st.bindFramebuffer.set(Qe.getFramebuffer("coords").framebuffer),st.viewport.set([0,0,ze.width/devicePixelRatio,ze.height/devicePixelRatio]),st.clear({color:r.Color.transparent,depth:1}),Qe.coordsIndex=[];for(const Pi of Ai){const Ei=Qe.getTerrainData(Pi.tileID);st.activeTexture.set(Mt.TEXTURE0),Mt.bindTexture(Mt.TEXTURE_2D,fi.texture);const Vi=ze.transform.calculatePosMatrix(Pi.tileID.toUnwrapped());jt.draw(st,Mt.TRIANGLES,It,Xt.disabled,St,hi.backCCW,{u_matrix:Vi,u_terrain_coords_id:(255-Qe.coordsIndex.length)/255,u_texture:0},Ei,"terrain",ri.vertexBuffer,ri.indexBuffer,ri.segments),Qe.coordsIndex.push(Pi.tileID.key)}st.bindFramebuffer.set(null),st.viewport.set([0,0,ze.width,ze.height])}(this,this.style.terrain))}this.renderPass="offscreen";for(const Se of D){const ze=this.style._layers[Se];if(!ze.hasOffscreenPass()||ze.isHidden(this.transform.zoom))continue;const Qe=pe[ze.source];(ze.type==="custom"||Qe.length)&&this.renderLayer(this,z[ze.source],ze,Qe)}if(this.context.bindFramebuffer.set(null),this.context.clear({color:I.showOverdrawInspector?r.Color.black:r.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=I.showOverdrawInspector,this.depthRangeFor3D=[0,1-(d._order.length+2)*this.numSublayers*this.depthEpsilon],!W)for(this.renderPass="opaque",this.currentLayer=D.length-1;this.currentLayer>=0;this.currentLayer--){const Se=this.style._layers[D[this.currentLayer]],ze=z[Se.source],Qe=ne[Se.source];this._renderTileClippingMasks(Se,Qe),this.renderLayer(this,ze,Se,Qe)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<D.length;this.currentLayer++){const Se=this.style._layers[D[this.currentLayer]],ze=z[Se.source];if(W&&W.renderLayer(Se))continue;const Qe=(Se.type==="symbol"?ye:pe)[Se.source];this._renderTileClippingMasks(Se,ne[Se.source]),this.renderLayer(this,ze,Se,Qe)}if(this.options.showTileBoundaries){let Se,ze;Object.values(this.style._layers).forEach(Qe=>{Qe.source&&!Qe.isHidden(this.transform.zoom)&&(Qe.source!==(ze&&ze.id)&&(ze=this.style.sourceCaches[Qe.source]),(!Se||Se.getSource().maxzoom<ze.getSource().maxzoom)&&(Se=ze))}),Se&&Ua.debug(this,Se,Se.getVisibleCoordinates())}this.options.showPadding&&function(Se){const ze=Se.transform.padding;Ia(Se,Se.transform.height-(ze.top||0),3,Is),Ia(Se,ze.bottom||0,3,bs),Il(Se,ze.left||0,3,Xl),Il(Se,Se.transform.width-(ze.right||0),3,El);const Qe=Se.transform.centerPoint;(function(st,Mt,St,It){rl(st,Mt-1,St-10,2,20,It),rl(st,Mt-10,St-1,20,2,It)})(Se,Qe.x,Se.transform.height-Qe.y,Nu)}(this),this.context.setDefault()}renderLayer(d,I,D,z){D.isHidden(this.transform.zoom)||(D.type==="background"||D.type==="custom"||(z||[]).length)&&(this.id=D.id,this.gpuTimingStart(D),Ua[D.type](d,I,D,z,this.style.placement.variableOffsets),this.gpuTimingEnd())}gpuTimingStart(d){if(!this.options.gpuTiming)return;const I=this.context.extTimerQuery;let D=this.gpuTimers[d.id];D||(D=this.gpuTimers[d.id]={calls:0,cpuTime:0,query:I.createQueryEXT()}),D.calls++,I.beginQueryEXT(I.TIME_ELAPSED_EXT,D.query)}gpuTimingEnd(){if(!this.options.gpuTiming)return;const d=this.context.extTimerQuery;d.endQueryEXT(d.TIME_ELAPSED_EXT)}collectGpuTimers(){const d=this.gpuTimers;return this.gpuTimers={},d}queryGpuTimers(d){const I={};for(const D in d){const z=d[D],W=this.context.extTimerQuery,ne=W.getQueryObjectEXT(z.query,W.QUERY_RESULT_EXT)/1e6;W.deleteQueryEXT(z.query),I[D]=ne}return I}translatePosMatrix(d,I,D,z,W){if(!D[0]&&!D[1])return d;const ne=W?z==="map"?this.transform.angle:0:z==="viewport"?-this.transform.angle:0;if(ne){const Se=Math.sin(ne),ze=Math.cos(ne);D=[D[0]*ze-D[1]*Se,D[0]*Se+D[1]*ze]}const pe=[W?D[0]:yn(I,D[0],this.transform.zoom),W?D[1]:yn(I,D[1],this.transform.zoom),0],ye=new Float32Array(16);return r.translate(ye,d,pe),ye}saveTileTexture(d){const I=this._tileTextures[d.size[0]];I?I.push(d):this._tileTextures[d.size[0]]=[d]}getTileTexture(d){const I=this._tileTextures[d];return I&&I.length>0?I.pop():null}isPatternMissing(d){if(!d)return!1;if(!d.from||!d.to)return!0;const I=this.imageManager.getPattern(d.from.toString()),D=this.imageManager.getPattern(d.to.toString());return!I||!D}useProgram(d,I){this.cache=this.cache||{};const D=d+(I?I.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"")+(this.style.terrain?"/terrain":"");return this.cache[D]||(this.cache[D]=new Nr(this.context,d,Do[d],I,zt[d],this._showOverdrawInspector,this.style.terrain)),this.cache[D]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const d=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(d.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new T(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy()}}class Rs{constructor(d,I){this.points=d,this.planes=I}static fromInvProjectionMatrix(d,I,D){const z=Math.pow(2,D),W=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(pe=>{const ye=1/(pe=r.transformMat4([],pe,d))[3]/I*z;return r.mul$1(pe,pe,[ye,ye,1/pe[3],ye])}),ne=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(pe=>{const ye=r.sub([],W[pe[0]],W[pe[1]]),Se=r.sub([],W[pe[2]],W[pe[1]]),ze=r.normalize([],r.cross([],ye,Se)),Qe=-r.dot(ze,W[pe[1]]);return ze.concat(Qe)});return new Rs(W,ne)}}class vu{constructor(d,I){this.min=d,this.max=I,this.center=r.scale$1([],r.add([],this.min,this.max),.5)}quadrant(d){const I=[d%2==0,d<2],D=r.clone$2(this.min),z=r.clone$2(this.max);for(let W=0;W<I.length;W++)D[W]=I[W]?this.min[W]:this.center[W],z[W]=I[W]?this.center[W]:this.max[W];return z[2]=this.max[2],new vu(D,z)}distanceX(d){return Math.max(Math.min(this.max[0],d[0]),this.min[0])-d[0]}distanceY(d){return Math.max(Math.min(this.max[1],d[1]),this.min[1])-d[1]}intersects(d){const I=[[this.min[0],this.min[1],this.min[2],1],[this.max[0],this.min[1],this.min[2],1],[this.max[0],this.max[1],this.min[2],1],[this.min[0],this.max[1],this.min[2],1],[this.min[0],this.min[1],this.max[2],1],[this.max[0],this.min[1],this.max[2],1],[this.max[0],this.max[1],this.max[2],1],[this.min[0],this.max[1],this.max[2],1]];let D=!0;for(let z=0;z<d.planes.length;z++){const W=d.planes[z];let ne=0;for(let pe=0;pe<I.length;pe++)r.dot$1(W,I[pe])>=0&&ne++;if(ne===0)return 0;ne!==I.length&&(D=!1)}if(D)return 2;for(let z=0;z<3;z++){let W=Number.MAX_VALUE,ne=-Number.MAX_VALUE;for(let pe=0;pe<d.points.length;pe++){const ye=d.points[pe][z]-this.min[z];W=Math.min(W,ye),ne=Math.max(ne,ye)}if(ne<0||W>this.max[z]-this.min[z])return 0}return 1}}class ol{constructor(d=0,I=0,D=0,z=0){if(isNaN(d)||d<0||isNaN(I)||I<0||isNaN(D)||D<0||isNaN(z)||z<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=d,this.bottom=I,this.left=D,this.right=z}interpolate(d,I,D){return I.top!=null&&d.top!=null&&(this.top=r.number(d.top,I.top,D)),I.bottom!=null&&d.bottom!=null&&(this.bottom=r.number(d.bottom,I.bottom,D)),I.left!=null&&d.left!=null&&(this.left=r.number(d.left,I.left,D)),I.right!=null&&d.right!=null&&(this.right=r.number(d.right,I.right,D)),this}getCenter(d,I){const D=r.clamp((this.left+d-this.right)/2,0,d),z=r.clamp((this.top+I-this.bottom)/2,0,I);return new r.pointGeometry(D,z)}equals(d){return this.top===d.top&&this.bottom===d.bottom&&this.left===d.left&&this.right===d.right}clone(){return new ol(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}class Zl{constructor(d,I,D,z,W){this.tileSize=512,this.maxValidLatitude=85.051129,this.freezeElevation=!1,this._renderWorldCopies=W===void 0||!!W,this._minZoom=d||0,this._maxZoom=I||22,this._minPitch=D==null?0:D,this._maxPitch=z==null?60:z,this.setMaxBounds(),this.width=0,this.height=0,this._center=new r.LngLat(0,0),this._elevation=0,this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new ol,this._posMatrixCache={},this._alignedPosMatrixCache={}}clone(){const d=new Zl(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return d.tileSize=this.tileSize,d.latRange=this.latRange,d.width=this.width,d.height=this.height,d._center=this._center,d._elevation=this._elevation,d.zoom=this.zoom,d.angle=this.angle,d._fov=this._fov,d._pitch=this._pitch,d._unmodified=this._unmodified,d._edgeInsets=this._edgeInsets.clone(),d._calcMatrices(),d}get minZoom(){return this._minZoom}set minZoom(d){this._minZoom!==d&&(this._minZoom=d,this.zoom=Math.max(this.zoom,d))}get maxZoom(){return this._maxZoom}set maxZoom(d){this._maxZoom!==d&&(this._maxZoom=d,this.zoom=Math.min(this.zoom,d))}get minPitch(){return this._minPitch}set minPitch(d){this._minPitch!==d&&(this._minPitch=d,this.pitch=Math.max(this.pitch,d))}get maxPitch(){return this._maxPitch}set maxPitch(d){this._maxPitch!==d&&(this._maxPitch=d,this.pitch=Math.min(this.pitch,d))}get renderWorldCopies(){return this._renderWorldCopies}set renderWorldCopies(d){d===void 0?d=!0:d===null&&(d=!1),this._renderWorldCopies=d}get worldSize(){return this.tileSize*this.scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new r.pointGeometry(this.width,this.height)}get bearing(){return-this.angle/Math.PI*180}set bearing(d){const I=-r.wrap(d,-180,180)*Math.PI/180;var D;this.angle!==I&&(this._unmodified=!1,this.angle=I,this._calcMatrices(),this.rotationMatrix=(D=new r.ARRAY_TYPE(4),r.ARRAY_TYPE!=Float32Array&&(D[1]=0,D[2]=0),D[0]=1,D[3]=1,D),function(z,W,ne){var pe=W[0],ye=W[1],Se=W[2],ze=W[3],Qe=Math.sin(ne),st=Math.cos(ne);z[0]=pe*st+Se*Qe,z[1]=ye*st+ze*Qe,z[2]=pe*-Qe+Se*st,z[3]=ye*-Qe+ze*st}(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(d){const I=r.clamp(d,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==I&&(this._unmodified=!1,this._pitch=I,this._calcMatrices())}get fov(){return this._fov/Math.PI*180}set fov(d){d=Math.max(.01,Math.min(60,d)),this._fov!==d&&(this._unmodified=!1,this._fov=d/180*Math.PI,this._calcMatrices())}get zoom(){return this._zoom}set zoom(d){const I=Math.min(Math.max(d,this.minZoom),this.maxZoom);this._zoom!==I&&(this._unmodified=!1,this._zoom=I,this.scale=this.zoomScale(I),this.tileZoom=Math.floor(I),this.zoomFraction=I-this.tileZoom,this._constrain(),this._calcMatrices())}get center(){return this._center}set center(d){d.lat===this._center.lat&&d.lng===this._center.lng||(this._unmodified=!1,this._center=d,this._constrain(),this._calcMatrices())}get elevation(){return this._elevation}set elevation(d){d!==this._elevation&&(this._elevation=d,this._constrain(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}set padding(d){this._edgeInsets.equals(d)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,d,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}isPaddingEqual(d){return this._edgeInsets.equals(d)}interpolatePadding(d,I,D){this._unmodified=!1,this._edgeInsets.interpolate(d,I,D),this._constrain(),this._calcMatrices()}coveringZoomLevel(d){const I=(d.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/d.tileSize));return Math.max(0,I)}getVisibleUnwrappedCoordinates(d){const I=[new r.UnwrappedTileID(0,d)];if(this._renderWorldCopies){const D=this.pointCoordinate(new r.pointGeometry(0,0)),z=this.pointCoordinate(new r.pointGeometry(this.width,0)),W=this.pointCoordinate(new r.pointGeometry(this.width,this.height)),ne=this.pointCoordinate(new r.pointGeometry(0,this.height)),pe=Math.floor(Math.min(D.x,z.x,W.x,ne.x)),ye=Math.floor(Math.max(D.x,z.x,W.x,ne.x)),Se=1;for(let ze=pe-Se;ze<=ye+Se;ze++)ze!==0&&I.push(new r.UnwrappedTileID(ze,d))}return I}coveringTiles(d){var I,D;let z=this.coveringZoomLevel(d);const W=z;if(d.minzoom!==void 0&&z<d.minzoom)return[];d.maxzoom!==void 0&&z>d.maxzoom&&(z=d.maxzoom);const ne=this.pointCoordinate(this.getCameraPoint()),pe=r.MercatorCoordinate.fromLngLat(this.center),ye=Math.pow(2,z),Se=[ye*ne.x,ye*ne.y,0],ze=[ye*pe.x,ye*pe.y,0],Qe=Rs.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,z);let st=d.minzoom||0;!d.terrain&&this.pitch<=60&&this._edgeInsets.top<.1&&(st=z);const Mt=d.terrain?2/Math.min(this.tileSize,d.tileSize)*this.tileSize:3,St=jt=>({aabb:new vu([jt*ye,0,0],[(jt+1)*ye,ye,0]),zoom:0,x:0,y:0,wrap:jt,fullyVisible:!1}),It=[],ri=[],fi=z,Ai=d.reparseOverscaled?W:z;if(this._renderWorldCopies)for(let jt=1;jt<=3;jt++)It.push(St(-jt)),It.push(St(jt));for(It.push(St(0));It.length>0;){const jt=It.pop(),Pi=jt.x,Ei=jt.y;let Vi=jt.fullyVisible;if(!Vi){const Wn=jt.aabb.intersects(Qe);if(Wn===0)continue;Vi=Wn===2}const Ni=d.terrain?Se:ze,un=jt.aabb.distanceX(Ni),zi=jt.aabb.distanceY(Ni),zn=Math.max(Math.abs(un),Math.abs(zi)),vn=Mt+(1<<fi-jt.zoom)-2;if(jt.zoom===fi||zn>vn&&jt.zoom>=st){const Wn=fi-jt.zoom,Ir=Se[0]-.5-(Pi<<Wn),Fr=Se[1]-.5-(Ei<<Wn);ri.push({tileID:new r.OverscaledTileID(jt.zoom===fi?Ai:jt.zoom,jt.wrap,jt.zoom,Pi,Ei),distanceSq:r.sqrLen([ze[0]-.5-Pi,ze[1]-.5-Ei]),tileDistanceToCamera:Math.sqrt(Ir*Ir+Fr*Fr)})}else for(let Wn=0;Wn<4;Wn++){const Ir=(Pi<<1)+Wn%2,Fr=(Ei<<1)+(Wn>>1),j=jt.zoom+1;let K=jt.aabb.quadrant(Wn);if(d.terrain){const ue=new r.OverscaledTileID(j,jt.wrap,j,Ir,Fr),we=d.terrain.getMinMaxElevation(ue),je=(I=we.minElevation)!==null&&I!==void 0?I:this.elevation,Je=(D=we.maxElevation)!==null&&D!==void 0?D:this.elevation;K=new vu([K.min[0],K.min[1],je],[K.max[0],K.max[1],Je])}It.push({aabb:K,zoom:j,x:Ir,y:Fr,wrap:jt.wrap,fullyVisible:Vi})}}return ri.sort((jt,Pi)=>jt.distanceSq-Pi.distanceSq).map(jt=>jt.tileID)}resize(d,I){this.width=d,this.height=I,this.pixelsToGLUnits=[2/d,-2/I],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(d){return Math.pow(2,d)}scaleZoom(d){return Math.log(d)/Math.LN2}project(d){const I=r.clamp(d.lat,-this.maxValidLatitude,this.maxValidLatitude);return new r.pointGeometry(r.mercatorXfromLng(d.lng)*this.worldSize,r.mercatorYfromLat(I)*this.worldSize)}unproject(d){return new r.MercatorCoordinate(d.x/this.worldSize,d.y/this.worldSize).toLngLat()}get point(){return this.project(this.center)}updateElevation(d){this.freezeElevation||(this.elevation=d?this.getElevation(this._center,d):0)}getElevation(d,I){const D=r.MercatorCoordinate.fromLngLat(d),z=(1<<this.tileZoom)*r.EXTENT,W=D.x*z,ne=D.y*z,pe=Math.floor(W/r.EXTENT),ye=Math.floor(ne/r.EXTENT),Se=new r.OverscaledTileID(this.tileZoom,0,this.tileZoom,pe,ye);return I.getElevation(Se,W%r.EXTENT,ne%r.EXTENT,r.EXTENT)}getCameraPosition(){return{lngLat:this.pointLocation(this.getCameraPoint()),altitude:Math.cos(this._pitch)*this.cameraToCenterDistance/this._pixelPerMeter+this.elevation}}recalculateZoom(d){const I=this.pointLocation(this.centerPoint,d),D=this.getElevation(I,d);if(!(this.elevation-D))return;const z=this.getCameraPosition(),W=r.MercatorCoordinate.fromLngLat(z.lngLat,z.altitude),ne=r.MercatorCoordinate.fromLngLat(I,D),pe=W.x-ne.x,ye=W.y-ne.y,Se=W.z-ne.z,ze=Math.sqrt(pe*pe+ye*ye+Se*Se),Qe=this.scaleZoom(this.cameraToCenterDistance/ze/this.tileSize);this._elevation=D,this._center=I,this.zoom=Qe}setLocationAtPoint(d,I){const D=this.pointCoordinate(I),z=this.pointCoordinate(this.centerPoint),W=this.locationCoordinate(d),ne=new r.MercatorCoordinate(W.x-(D.x-z.x),W.y-(D.y-z.y));this.center=this.coordinateLocation(ne),this._renderWorldCopies&&(this.center=this.center.wrap())}locationPoint(d,I){return I?this.coordinatePoint(this.locationCoordinate(d),this.getElevation(d,I),this.pixelMatrix3D):this.coordinatePoint(this.locationCoordinate(d))}pointLocation(d,I){return this.coordinateLocation(this.pointCoordinate(d,I))}locationCoordinate(d){return r.MercatorCoordinate.fromLngLat(d)}coordinateLocation(d){return d&&d.toLngLat()}pointCoordinate(d,I){if(I){const st=I.pointCoordinate(d);if(st!=null)return st}const D=[d.x,d.y,0,1],z=[d.x,d.y,1,1];r.transformMat4(D,D,this.pixelMatrixInverse),r.transformMat4(z,z,this.pixelMatrixInverse);const W=D[3],ne=z[3],pe=D[1]/W,ye=z[1]/ne,Se=D[2]/W,ze=z[2]/ne,Qe=Se===ze?0:(0-Se)/(ze-Se);return new r.MercatorCoordinate(r.number(D[0]/W,z[0]/ne,Qe)/this.worldSize,r.number(pe,ye,Qe)/this.worldSize)}coordinatePoint(d,I=0,D=this.pixelMatrix){const z=[d.x*this.worldSize,d.y*this.worldSize,I,1];return r.transformMat4(z,z,D),new r.pointGeometry(z[0]/z[3],z[1]/z[3])}getBounds(){const d=Math.max(0,this.height/2-this.getHorizon());return new r.LngLatBounds().extend(this.pointLocation(new r.pointGeometry(0,d))).extend(this.pointLocation(new r.pointGeometry(this.width,d))).extend(this.pointLocation(new r.pointGeometry(this.width,this.height))).extend(this.pointLocation(new r.pointGeometry(0,this.height)))}getMaxBounds(){return this.latRange&&this.latRange.length===2&&this.lngRange&&this.lngRange.length===2?new r.LngLatBounds([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null}getHorizon(){return Math.tan(Math.PI/2-this._pitch)*this.cameraToCenterDistance*.85}setMaxBounds(d){d?(this.lngRange=[d.getWest(),d.getEast()],this.latRange=[d.getSouth(),d.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])}calculatePosMatrix(d,I=!1){const D=d.key,z=I?this._alignedPosMatrixCache:this._posMatrixCache;if(z[D])return z[D];const W=d.canonical,ne=this.worldSize/this.zoomScale(W.z),pe=W.x+Math.pow(2,W.z)*d.wrap,ye=r.identity(new Float64Array(16));return r.translate(ye,ye,[pe*ne,W.y*ne,0]),r.scale(ye,ye,[ne/r.EXTENT,ne/r.EXTENT,1]),r.multiply(ye,I?this.alignedProjMatrix:this.projMatrix,ye),z[D]=new Float32Array(ye),z[D]}customLayerMatrix(){return this.mercatorMatrix.slice()}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;let d,I,D,z,W=-90,ne=90,pe=-180,ye=180;const Se=this.size,ze=this._unmodified;if(this.latRange){const Mt=this.latRange;W=r.mercatorYfromLat(Mt[1])*this.worldSize,ne=r.mercatorYfromLat(Mt[0])*this.worldSize,d=ne-W<Se.y?Se.y/(ne-W):0}if(this.lngRange){const Mt=this.lngRange;pe=r.wrap(r.mercatorXfromLng(Mt[0])*this.worldSize,0,this.worldSize),ye=r.wrap(r.mercatorXfromLng(Mt[1])*this.worldSize,0,this.worldSize),ye<pe&&(ye+=this.worldSize),I=ye-pe<Se.x?Se.x/(ye-pe):0}const Qe=this.point,st=Math.max(I||0,d||0);if(st)return this.center=this.unproject(new r.pointGeometry(I?(ye+pe)/2:Qe.x,d?(ne+W)/2:Qe.y)),this.zoom+=this.scaleZoom(st),this._unmodified=ze,void(this._constraining=!1);if(this.latRange){const Mt=Qe.y,St=Se.y/2;Mt-St<W&&(z=W+St),Mt+St>ne&&(z=ne-St)}if(this.lngRange){const Mt=(pe+ye)/2,St=r.wrap(Qe.x,Mt-this.worldSize/2,Mt+this.worldSize/2),It=Se.x/2;St-It<pe&&(D=pe+It),St+It>ye&&(D=ye-It)}D===void 0&&z===void 0||(this.center=this.unproject(new r.pointGeometry(D!==void 0?D:Qe.x,z!==void 0?z:Qe.y)).wrap()),this._unmodified=ze,this._constraining=!1}_calcMatrices(){if(!this.height)return;const d=this.centerOffset,I=this.point.x,D=this.point.y;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height,this._pixelPerMeter=r.mercatorZfromAltitude(1,this.center.lat)*this.worldSize;let z=r.identity(new Float64Array(16));r.scale(z,z,[this.width/2,-this.height/2,1]),r.translate(z,z,[1,-1,0]),this.labelPlaneMatrix=z,z=r.identity(new Float64Array(16)),r.scale(z,z,[1,-1,1]),r.translate(z,z,[-1,-1,0]),r.scale(z,z,[2/this.width,2/this.height,1]),this.glCoordMatrix=z,this.cameraToSeaLevelDistance=this.cameraToCenterDistance+this._elevation*this._pixelPerMeter/Math.cos(this._pitch);const W=Math.PI/2+this._pitch,ne=this._fov*(.5+d.y/this.height),pe=Math.sin(ne)*this.cameraToSeaLevelDistance/Math.sin(r.clamp(Math.PI-W-ne,.01,Math.PI-.01)),ye=this.getHorizon(),Se=2*Math.atan(ye/this.cameraToCenterDistance)*(.5+d.y/(2*ye)),ze=Math.sin(Se)*this.cameraToSeaLevelDistance/Math.sin(r.clamp(Math.PI-W-Se,.01,Math.PI-.01)),Qe=Math.cos(Math.PI/2-this._pitch)*pe+this.cameraToSeaLevelDistance,st=Math.cos(Math.PI/2-this._pitch)*ze+this.cameraToSeaLevelDistance,Mt=1.01*Math.min(Qe,st),St=this.height/50;z=new Float64Array(16),r.perspective(z,this._fov,this.width/this.height,St,Mt),z[8]=2*-d.x/this.width,z[9]=2*d.y/this.height,r.scale(z,z,[1,-1,1]),r.translate(z,z,[0,0,-this.cameraToCenterDistance]),r.rotateX(z,z,this._pitch),r.rotateZ(z,z,this.angle),r.translate(z,z,[-I,-D,0]),this.mercatorMatrix=r.scale([],z,[this.worldSize,this.worldSize,this.worldSize]),r.scale(z,z,[1,1,this._pixelPerMeter]),this.pixelMatrix=r.multiply(new Float64Array(16),this.labelPlaneMatrix,z),r.translate(z,z,[0,0,-this.elevation]),this.projMatrix=z,this.invProjMatrix=r.invert([],z),this.pixelMatrix3D=r.multiply(new Float64Array(16),this.labelPlaneMatrix,z);const It=this.width%2/2,ri=this.height%2/2,fi=Math.cos(this.angle),Ai=Math.sin(this.angle),jt=I-Math.round(I)+fi*It+Ai*ri,Pi=D-Math.round(D)+fi*ri+Ai*It,Ei=new Float64Array(z);if(r.translate(Ei,Ei,[jt>.5?jt-1:jt,Pi>.5?Pi-1:Pi,0]),this.alignedProjMatrix=Ei,z=r.invert(new Float64Array(16),this.pixelMatrix),!z)throw new Error("failed to invert matrix");this.pixelMatrixInverse=z,this._posMatrixCache={},this._alignedPosMatrixCache={}}maxPitchScaleFactor(){if(!this.pixelMatrixInverse)return 1;const d=this.pointCoordinate(new r.pointGeometry(0,0)),I=[d.x*this.worldSize,d.y*this.worldSize,0,1];return r.transformMat4(I,I,this.pixelMatrix)[3]/this.cameraToCenterDistance}getCameraPoint(){const d=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new r.pointGeometry(0,d))}getCameraQueryGeometry(d){const I=this.getCameraPoint();if(d.length===1)return[d[0],I];{let D=I.x,z=I.y,W=I.x,ne=I.y;for(const pe of d)D=Math.min(D,pe.x),z=Math.min(z,pe.y),W=Math.max(W,pe.x),ne=Math.max(ne,pe.y);return[new r.pointGeometry(D,z),new r.pointGeometry(W,z),new r.pointGeometry(W,ne),new r.pointGeometry(D,ne),new r.pointGeometry(D,z)]}}}class Ta{constructor(d){this._hashName=d&&encodeURIComponent(d),r.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=function(I,D){let z=!1,W=null;const ne=()=>{W=null,z&&(I(),W=setTimeout(ne,300),z=!1)};return()=>(z=!0,W||ne(),W)}(this._updateHashUnthrottled.bind(this))}addTo(d){return this._map=d,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this}getHashString(d){const I=this._map.getCenter(),D=Math.round(100*this._map.getZoom())/100,z=Math.ceil((D*Math.LN2+Math.log(512/360/.5))/Math.LN10),W=Math.pow(10,z),ne=Math.round(I.lng*W)/W,pe=Math.round(I.lat*W)/W,ye=this._map.getBearing(),Se=this._map.getPitch();let ze="";if(ze+=d?`/${ne}/${pe}/${D}`:`${D}/${pe}/${ne}`,(ye||Se)&&(ze+="/"+Math.round(10*ye)/10),Se&&(ze+=`/${Math.round(Se)}`),this._hashName){const Qe=this._hashName;let st=!1;const Mt=window.location.hash.slice(1).split("&").map(St=>{const It=St.split("=")[0];return It===Qe?(st=!0,`${It}=${ze}`):St}).filter(St=>St);return st||Mt.push(`${Qe}=${ze}`),`#${Mt.join("&")}`}return`#${ze}`}_getCurrentHash(){const d=window.location.hash.replace("#","");if(this._hashName){let I;return d.split("&").map(D=>D.split("=")).forEach(D=>{D[0]===this._hashName&&(I=D)}),(I&&I[1]||"").split("/")}return d.split("/")}_onHashChange(){const d=this._getCurrentHash();if(d.length>=3&&!d.some(I=>isNaN(I))){const I=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(d[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+d[2],+d[1]],zoom:+d[0],bearing:I,pitch:+(d[4]||0)}),!0}return!1}_updateHashUnthrottled(){const d=window.location.href.replace(/(#.+)?$/,this.getHashString());try{window.history.replaceState(window.history.state,null,d)}catch{}}}const Tl={linearity:.3,easing:r.bezier(0,0,.3,1)},Fc=r.extend({deceleration:2500,maxSpeed:1400},Tl),Rc=r.extend({deceleration:20,maxSpeed:1400},Tl),Ll=r.extend({deceleration:1e3,maxSpeed:360},Tl),Bs=r.extend({deceleration:1e3,maxSpeed:90},Tl);class La{constructor(d){this._map=d,this.clear()}clear(){this._inertiaBuffer=[]}record(d){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:r.exported.now(),settings:d})}_drainInertiaBuffer(){const d=this._inertiaBuffer,I=r.exported.now();for(;d.length>0&&I-d[0].time>160;)d.shift()}_onMoveEnd(d){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const I={zoom:0,bearing:0,pitch:0,pan:new r.pointGeometry(0,0),pinchAround:void 0,around:void 0};for(const{settings:W}of this._inertiaBuffer)I.zoom+=W.zoomDelta||0,I.bearing+=W.bearingDelta||0,I.pitch+=W.pitchDelta||0,W.panDelta&&I.pan._add(W.panDelta),W.around&&(I.around=W.around),W.pinchAround&&(I.pinchAround=W.pinchAround);const D=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,z={};if(I.pan.mag()){const W=ra(I.pan.mag(),D,r.extend({},Fc,d||{}));z.offset=I.pan.mult(W.amount/I.pan.mag()),z.center=this._map.transform.center,Pa(z,W)}if(I.zoom){const W=ra(I.zoom,D,Rc);z.zoom=this._map.transform.zoom+W.amount,Pa(z,W)}if(I.bearing){const W=ra(I.bearing,D,Ll);z.bearing=this._map.transform.bearing+r.clamp(W.amount,-179,179),Pa(z,W)}if(I.pitch){const W=ra(I.pitch,D,Bs);z.pitch=this._map.transform.pitch+W.amount,Pa(z,W)}if(z.zoom||z.bearing){const W=I.pinchAround===void 0?I.around:I.pinchAround;z.around=W?this._map.unproject(W):this._map.getCenter()}return this.clear(),r.extend(z,{noMoveStart:!0})}}function Pa(B,d){(!B.duration||B.duration<d.duration)&&(B.duration=d.duration,B.easing=d.easing)}function ra(B,d,I){const{maxSpeed:D,linearity:z,deceleration:W}=I,ne=r.clamp(B*z/(d/1e3),-D,D),pe=Math.abs(ne)/(W*z);return{easing:I.easing,duration:1e3*pe,amount:ne*(pe/2)}}class us extends r.Event{constructor(d,I,D,z={}){const W=w.mousePos(I.getCanvasContainer(),D),ne=I.unproject(W);super(d,r.extend({point:W,lngLat:ne,originalEvent:D},z)),this._defaultPrevented=!1,this.target=I}preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}}class sl extends r.Event{constructor(d,I,D){const z=d==="touchend"?D.changedTouches:D.touches,W=w.touchPos(I.getCanvasContainer(),z),ne=W.map(ye=>I.unproject(ye)),pe=W.reduce((ye,Se,ze,Qe)=>ye.add(Se.div(Qe.length)),new r.pointGeometry(0,0));super(d,{points:W,point:pe,lngLats:ne,lngLat:I.unproject(pe),originalEvent:D}),this._defaultPrevented=!1}preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}}class Yo extends r.Event{constructor(d,I,D){super(d,{originalEvent:D}),this._defaultPrevented=!1}preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}}class Uu{constructor(d,I){this._map=d,this._clickTolerance=I.clickTolerance}reset(){delete this._mousedownPos}wheel(d){return this._firePreventable(new Yo(d.type,this._map,d))}mousedown(d,I){return this._mousedownPos=I,this._firePreventable(new us(d.type,this._map,d))}mouseup(d){this._map.fire(new us(d.type,this._map,d))}click(d,I){this._mousedownPos&&this._mousedownPos.dist(I)>=this._clickTolerance||this._map.fire(new us(d.type,this._map,d))}dblclick(d){return this._firePreventable(new us(d.type,this._map,d))}mouseover(d){this._map.fire(new us(d.type,this._map,d))}mouseout(d){this._map.fire(new us(d.type,this._map,d))}touchstart(d){return this._firePreventable(new sl(d.type,this._map,d))}touchmove(d){this._map.fire(new sl(d.type,this._map,d))}touchend(d){this._map.fire(new sl(d.type,this._map,d))}touchcancel(d){this._map.fire(new sl(d.type,this._map,d))}_firePreventable(d){if(this._map.fire(d),d.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Ma{constructor(d){this._map=d}reset(){this._delayContextMenu=!1,this._ignoreContextMenu=!0,delete this._contextMenuEvent}mousemove(d){this._map.fire(new us(d.type,this._map,d))}mousedown(){this._delayContextMenu=!0,this._ignoreContextMenu=!1}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new us("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(d){this._delayContextMenu?this._contextMenuEvent=d:this._ignoreContextMenu||this._map.fire(new us(d.type,this._map,d)),this._map.listens("contextmenu")&&d.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class oa{constructor(d,I){this._map=d,this._el=d.getCanvasContainer(),this._container=d.getContainer(),this._clickTolerance=I.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(d,I){this.isEnabled()&&d.shiftKey&&d.button===0&&(w.disableDrag(),this._startPos=this._lastPos=I,this._active=!0)}mousemoveWindow(d,I){if(!this._active)return;const D=I;if(this._lastPos.equals(D)||!this._box&&D.dist(this._startPos)<this._clickTolerance)return;const z=this._startPos;this._lastPos=D,this._box||(this._box=w.create("div","maplibregl-boxzoom mapboxgl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair","mapboxgl-crosshair"),this._fireEvent("boxzoomstart",d));const W=Math.min(z.x,D.x),ne=Math.max(z.x,D.x),pe=Math.min(z.y,D.y),ye=Math.max(z.y,D.y);w.setTransform(this._box,`translate(${W}px,${pe}px)`),this._box.style.width=ne-W+"px",this._box.style.height=ye-pe+"px"}mouseupWindow(d,I){if(!this._active||d.button!==0)return;const D=this._startPos,z=I;if(this.reset(),w.suppressClick(),D.x!==z.x||D.y!==z.y)return this._map.fire(new r.Event("boxzoomend",{originalEvent:d})),{cameraAnimation:W=>W.fitScreenCoordinates(D,z,this._map.getBearing(),{linear:!0})};this._fireEvent("boxzoomcancel",d)}keydown(d){this._active&&d.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",d))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair","mapboxgl-crosshair"),this._box&&(w.remove(this._box),this._box=null),w.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(d,I){return this._map.fire(new r.Event(d,{originalEvent:I}))}}function Yr(B,d){if(B.length!==d.length)throw new Error(`The number of touches and points are not equal - touches ${B.length}, points ${d.length}`);const I={};for(let D=0;D<B.length;D++)I[B[D].identifier]=d[D];return I}class ga{constructor(d){this.reset(),this.numTouches=d.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(d,I,D){(this.centroid||D.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=d.timeStamp),D.length===this.numTouches&&(this.centroid=function(z){const W=new r.pointGeometry(0,0);for(const ne of z)W._add(ne);return W.div(z.length)}(I),this.touches=Yr(D,I)))}touchmove(d,I,D){if(this.aborted||!this.centroid)return;const z=Yr(D,I);for(const W in this.touches){const ne=this.touches[W],pe=z[W];(!pe||pe.dist(ne)>30)&&(this.aborted=!0)}}touchend(d,I,D){if((!this.centroid||d.timeStamp-this.startTime>500)&&(this.aborted=!0),D.length===0){const z=!this.aborted&&this.centroid;if(this.reset(),z)return z}}}class Pl{constructor(d){this.singleTap=new ga(d),this.numTaps=d.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(d,I,D){this.singleTap.touchstart(d,I,D)}touchmove(d,I,D){this.singleTap.touchmove(d,I,D)}touchend(d,I,D){const z=this.singleTap.touchend(d,I,D);if(z){const W=d.timeStamp-this.lastTime<500,ne=!this.lastTap||this.lastTap.dist(z)<30;if(W&&ne||this.reset(),this.count++,this.lastTime=d.timeStamp,this.lastTap=z,this.count===this.numTaps)return this.reset(),z}}}class Vu{constructor(){this._zoomIn=new Pl({numTouches:1,numTaps:2}),this._zoomOut=new Pl({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(d,I,D){this._zoomIn.touchstart(d,I,D),this._zoomOut.touchstart(d,I,D)}touchmove(d,I,D){this._zoomIn.touchmove(d,I,D),this._zoomOut.touchmove(d,I,D)}touchend(d,I,D){const z=this._zoomIn.touchend(d,I,D),W=this._zoomOut.touchend(d,I,D);return z?(this._active=!0,d.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:ne=>ne.easeTo({duration:300,zoom:ne.getZoom()+1,around:ne.unproject(z)},{originalEvent:d})}):W?(this._active=!0,d.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:ne=>ne.easeTo({duration:300,zoom:ne.getZoom()-1,around:ne.unproject(W)},{originalEvent:d})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}const bu={0:1,2:2};class Gs{constructor(d){this.reset(),this._clickTolerance=d.clickTolerance||1}reset(){this._active=!1,this._moved=!1,delete this._lastPoint,delete this._eventButton}_correctButton(d,I){return!1}_move(d,I){return{}}mousedown(d,I){if(this._lastPoint)return;const D=w.mouseButton(d);this._correctButton(d,D)&&(this._lastPoint=I,this._eventButton=D)}mousemoveWindow(d,I){const D=this._lastPoint;if(D){if(d.preventDefault(),function(z,W){const ne=bu[W];return z.buttons===void 0||(z.buttons&ne)!==ne}(d,this._eventButton))this.reset();else if(this._moved||!(I.dist(D)<this._clickTolerance))return this._moved=!0,this._lastPoint=I,this._move(D,I)}}mouseupWindow(d){this._lastPoint&&w.mouseButton(d)===this._eventButton&&(this._moved&&w.suppressClick(),this.reset())}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Ml extends Gs{mousedown(d,I){super.mousedown(d,I),this._lastPoint&&(this._active=!0)}_correctButton(d,I){return I===0&&!d.ctrlKey}_move(d,I){return{around:I,panDelta:I.sub(d)}}}class ms extends Gs{_correctButton(d,I){return I===0&&d.ctrlKey||I===2}_move(d,I){const D=.8*(I.x-d.x);if(D)return this._active=!0,{bearingDelta:D}}contextmenu(d){d.preventDefault()}}class Dn extends Gs{_correctButton(d,I){return I===0&&d.ctrlKey||I===2}_move(d,I){const D=-.5*(I.y-d.y);if(D)return this._active=!0,{pitchDelta:D}}contextmenu(d){d.preventDefault()}}class Ro{constructor(d,I){this._minTouches=d.cooperativeGestures?2:1,this._clickTolerance=d.clickTolerance||1,this._map=I,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new r.pointGeometry(0,0),setTimeout(()=>{this._cancelCooperativeMessage=!1},200)}touchstart(d,I,D){return this._calculateTransform(d,I,D)}touchmove(d,I,D){if(this._map._cooperativeGestures&&(this._minTouches===2&&D.length<2&&!this._cancelCooperativeMessage?this._map._onCooperativeGesture(d,!1,D.length):this._cancelCooperativeMessage||(this._cancelCooperativeMessage=!0)),this._active&&!(D.length<this._minTouches))return d.preventDefault(),this._calculateTransform(d,I,D)}touchend(d,I,D){this._calculateTransform(d,I,D),this._active&&D.length<this._minTouches&&this.reset()}touchcancel(){this.reset()}_calculateTransform(d,I,D){D.length>0&&(this._active=!0);const z=Yr(D,I),W=new r.pointGeometry(0,0),ne=new r.pointGeometry(0,0);let pe=0;for(const Se in z){const ze=z[Se],Qe=this._touches[Se];Qe&&(W._add(ze),ne._add(ze.sub(Qe)),pe++,z[Se]=ze)}if(this._touches=z,pe<this._minTouches||!ne.mag())return;const ye=ne.div(pe);return this._sum._add(ye),this._sum.mag()<this._clickTolerance?void 0:{around:W.div(pe),panDelta:ye}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Gr{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}_start(d){}_move(d,I,D){return{}}touchstart(d,I,D){this._firstTwoTouches||D.length<2||(this._firstTwoTouches=[D[0].identifier,D[1].identifier],this._start([I[0],I[1]]))}touchmove(d,I,D){if(!this._firstTwoTouches)return;d.preventDefault();const[z,W]=this._firstTwoTouches,ne=Lo(D,I,z),pe=Lo(D,I,W);if(!ne||!pe)return;const ye=this._aroundCenter?null:ne.add(pe).div(2);return this._move([ne,pe],ye,d)}touchend(d,I,D){if(!this._firstTwoTouches)return;const[z,W]=this._firstTwoTouches,ne=Lo(D,I,z),pe=Lo(D,I,W);ne&&pe||(this._active&&w.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(d){this._enabled=!0,this._aroundCenter=!!d&&d.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}function Lo(B,d,I){for(let D=0;D<B.length;D++)if(B[D].identifier===I)return d[D]}function rs(B,d){return Math.log(B/d)/Math.LN2}class _n extends Gr{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(d){this._startDistance=this._distance=d[0].dist(d[1])}_move(d,I){const D=this._distance;if(this._distance=d[0].dist(d[1]),this._active||!(Math.abs(rs(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:rs(this._distance,D),pinchAround:I}}}function Da(B,d){return 180*B.angleWith(d)/Math.PI}class qu extends Gr{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(d){this._startVector=this._vector=d[0].sub(d[1]),this._minDiameter=d[0].dist(d[1])}_move(d,I){const D=this._vector;if(this._vector=d[0].sub(d[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:Da(this._vector,D),pinchAround:I}}_isBelowThreshold(d){this._minDiameter=Math.min(this._minDiameter,d.mag());const I=25/(Math.PI*this._minDiameter)*360,D=Da(d,this._startVector);return Math.abs(D)<I}}function Hu(B){return Math.abs(B.y)>Math.abs(B.x)}class Bc extends Gr{constructor(d){super(),this._map=d}reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}touchstart(d,I,D){super.touchstart(d,I,D),this._currentTouchCount=D.length}_start(d){this._lastPoints=d,Hu(d[0].sub(d[1]))&&(this._valid=!1)}_move(d,I,D){if(this._map._cooperativeGestures&&this._currentTouchCount<3)return;const z=d[0].sub(this._lastPoints[0]),W=d[1].sub(this._lastPoints[1]);return this._valid=this.gestureBeginsVertically(z,W,D.timeStamp),this._valid?(this._lastPoints=d,this._active=!0,{pitchDelta:(z.y+W.y)/2*-.5}):void 0}gestureBeginsVertically(d,I,D){if(this._valid!==void 0)return this._valid;const z=d.mag()>=2,W=I.mag()>=2;if(!z&&!W)return;if(!z||!W)return this._firstMove===void 0&&(this._firstMove=D),D-this._firstMove<100&&void 0;const ne=d.y>0==I.y>0;return Hu(d)&&Hu(I)&&ne}}const hh={panStep:100,bearingStep:15,pitchStep:10};class fh{constructor(){const d=hh;this._panStep=d.panStep,this._bearingStep=d.bearingStep,this._pitchStep=d.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(d){if(d.altKey||d.ctrlKey||d.metaKey)return;let I=0,D=0,z=0,W=0,ne=0;switch(d.keyCode){case 61:case 107:case 171:case 187:I=1;break;case 189:case 109:case 173:I=-1;break;case 37:d.shiftKey?D=-1:(d.preventDefault(),W=-1);break;case 39:d.shiftKey?D=1:(d.preventDefault(),W=1);break;case 38:d.shiftKey?z=1:(d.preventDefault(),ne=-1);break;case 40:d.shiftKey?z=-1:(d.preventDefault(),ne=1);break;default:return}return this._rotationDisabled&&(D=0,z=0),{cameraAnimation:pe=>{const ye=pe.getZoom();pe.easeTo({duration:300,easeId:"keyboardHandler",easing:zh,zoom:I?Math.round(ye)+I*(d.shiftKey?2:1):ye,bearing:pe.getBearing()+D*this._bearingStep,pitch:pe.getPitch()+z*this._pitchStep,offset:[-W*this._panStep,-ne*this._panStep],center:pe.getCenter()},{originalEvent:d})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function zh(B){return B*(2-B)}const Lr=4.000244140625;class zc{constructor(d,I){this._map=d,this._el=d.getCanvasContainer(),this._handler=I,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222,r.bindAll(["_onTimeout"],this)}setZoomRate(d){this._defaultZoomRate=d}setWheelZoomRate(d){this._wheelZoomRate=d}isEnabled(){return!!this._enabled}isActive(){return!!this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(d){this.isEnabled()||(this._enabled=!0,this._aroundCenter=d&&d.around==="center")}disable(){this.isEnabled()&&(this._enabled=!1)}wheel(d){if(!this.isEnabled())return;if(this._map._cooperativeGestures){if(!this._map._metaPress)return;d.preventDefault()}let I=d.deltaMode===WheelEvent.DOM_DELTA_LINE?40*d.deltaY:d.deltaY;const D=r.exported.now(),z=D-(this._lastWheelEventTime||0);this._lastWheelEventTime=D,I!==0&&I%Lr==0?this._type="wheel":I!==0&&Math.abs(I)<4?this._type="trackpad":z>400?(this._type=null,this._lastValue=I,this._timeout=setTimeout(this._onTimeout,40,d)):this._type||(this._type=Math.abs(z*I)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,I+=this._lastValue)),d.shiftKey&&I&&(I/=4),this._type&&(this._lastWheelEvent=d,this._delta-=I,this._active||this._start(d)),d.preventDefault()}_onTimeout(d){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(d)}_start(d){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const I=w.mousePos(this._el,d);this._around=r.LngLat.convert(this._aroundCenter?this._map.getCenter():this._map.unproject(I)),this._aroundPoint=this._map.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const d=this._map.transform;if(this._delta!==0){const pe=this._type==="wheel"&&Math.abs(this._delta)>Lr?this._wheelZoomRate:this._defaultZoomRate;let ye=2/(1+Math.exp(-Math.abs(this._delta*pe)));this._delta<0&&ye!==0&&(ye=1/ye);const Se=typeof this._targetZoom=="number"?d.zoomScale(this._targetZoom):d.scale;this._targetZoom=Math.min(d.maxZoom,Math.max(d.minZoom,d.scaleZoom(Se*ye))),this._type==="wheel"&&(this._startZoom=d.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}const I=typeof this._targetZoom=="number"?this._targetZoom:d.zoom,D=this._startZoom,z=this._easing;let W,ne=!1;if(this._type==="wheel"&&D&&z){const pe=Math.min((r.exported.now()-this._lastWheelEventTime)/200,1),ye=z(pe);W=r.number(D,I,ye),pe<1?this._frameId||(this._frameId=!0):ne=!0}else W=I,ne=!0;return this._active=!0,ne&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._handler._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!ne,zoomDelta:W-d.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(d){let I=r.ease;if(this._prevEase){const D=this._prevEase,z=(r.exported.now()-D.start)/D.duration,W=D.easing(z+.01)-D.easing(z),ne=.27/Math.sqrt(W*W+1e-4)*.01,pe=Math.sqrt(.0729-ne*ne);I=r.bezier(ne,pe,.25,1)}return this._prevEase={start:r.exported.now(),duration:d,easing:I},I}reset(){this._active=!1}}class lc{constructor(d,I){this._clickZoom=d,this._tapZoom=I}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class Zo{constructor(){this.reset()}reset(){this._active=!1}dblclick(d,I){return d.preventDefault(),{cameraAnimation:D=>{D.easeTo({duration:300,zoom:D.getZoom()+(d.shiftKey?-1:1),around:D.unproject(I)},{originalEvent:d})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Ks{constructor(){this._tap=new Pl({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,this._tap.reset()}touchstart(d,I,D){this._swipePoint||(this._tapTime&&d.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?D.length>0&&(this._swipePoint=I[0],this._swipeTouch=D[0].identifier):this._tap.touchstart(d,I,D))}touchmove(d,I,D){if(this._tapTime){if(this._swipePoint){if(D[0].identifier!==this._swipeTouch)return;const z=I[0],W=z.y-this._swipePoint.y;return this._swipePoint=z,d.preventDefault(),this._active=!0,{zoomDelta:W/128}}}else this._tap.touchmove(d,I,D)}touchend(d,I,D){this._tapTime?this._swipePoint&&D.length===0&&this.reset():this._tap.touchend(d,I,D)&&(this._tapTime=d.timeStamp)}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Go{constructor(d,I,D){this._el=d,this._mousePan=I,this._touchPan=D}enable(d){this._inertiaOptions=d||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan","mapboxgl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan","mapboxgl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class Va{constructor(d,I,D){this._pitchWithRotate=d.pitchWithRotate,this._mouseRotate=I,this._mousePitch=D}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class uc{constructor(d,I,D,z){this._el=d,this._touchZoom=I,this._touchRotate=D,this._tapDragZoom=z,this._rotationDisabled=!1,this._enabled=!0}enable(d){this._touchZoom.enable(d),this._rotationDisabled||this._touchRotate.enable(d),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate","mapboxgl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate","mapboxgl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}const wu=B=>B.zoom||B.drag||B.pitch||B.rotate;class xu extends r.Event{}function Kl(B){return B.panDelta&&B.panDelta.mag()||B.zoomDelta||B.bearingDelta||B.pitchDelta}class eo{constructor(d,I){this._map=d,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new La(d),this._bearingSnap=I.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(I),r.bindAll(["handleEvent","handleWindowEvent"],this);const D=this._el;this._listeners=[[D,"touchstart",{passive:!0}],[D,"touchmove",{passive:!1}],[D,"touchend",void 0],[D,"touchcancel",void 0],[D,"mousedown",void 0],[D,"mousemove",void 0],[D,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[D,"mouseover",void 0],[D,"mouseout",void 0],[D,"dblclick",void 0],[D,"click",void 0],[D,"keydown",{capture:!1}],[D,"keyup",void 0],[D,"wheel",{passive:!1}],[D,"contextmenu",void 0],[window,"blur",void 0]];for(const[z,W,ne]of this._listeners)w.addEventListener(z,W,z===document?this.handleWindowEvent:this.handleEvent,ne)}destroy(){for(const[d,I,D]of this._listeners)w.removeEventListener(d,I,d===document?this.handleWindowEvent:this.handleEvent,D)}_addDefaultHandlers(d){const I=this._map,D=I.getCanvasContainer();this._add("mapEvent",new Uu(I,d));const z=I.boxZoom=new oa(I,d);this._add("boxZoom",z);const W=new Vu,ne=new Zo;I.doubleClickZoom=new lc(ne,W),this._add("tapZoom",W),this._add("clickZoom",ne);const pe=new Ks;this._add("tapDragZoom",pe);const ye=I.touchPitch=new Bc(I);this._add("touchPitch",ye);const Se=new ms(d),ze=new Dn(d);I.dragRotate=new Va(d,Se,ze),this._add("mouseRotate",Se,["mousePitch"]),this._add("mousePitch",ze,["mouseRotate"]);const Qe=new Ml(d),st=new Ro(d,I);I.dragPan=new Go(D,Qe,st),this._add("mousePan",Qe),this._add("touchPan",st,["touchZoom","touchRotate"]);const Mt=new qu,St=new _n;I.touchZoomRotate=new uc(D,St,Mt,pe),this._add("touchRotate",Mt,["touchPan","touchZoom"]),this._add("touchZoom",St,["touchPan","touchRotate"]);const It=I.scrollZoom=new zc(I,this);this._add("scrollZoom",It,["mousePan"]);const ri=I.keyboard=new fh;this._add("keyboard",ri),this._add("blockableMapEvent",new Ma(I));for(const fi of["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"])d.interactive&&d[fi]&&I[fi].enable(d[fi])}_add(d,I,D){this._handlers.push({handlerName:d,handler:I,allowed:D}),this._handlersById[d]=I}stop(d){if(!this._updatingCamera){for(const{handler:I}of this._handlers)I.reset();this._inertia.clear(),this._fireEvents({},{},d),this._changes=[]}}isActive(){for(const{handler:d}of this._handlers)if(d.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return Boolean(wu(this._eventsInProgress))||this.isZooming()}_blockedByActive(d,I,D){for(const z in d)if(z!==D&&(!I||I.indexOf(z)<0))return!0;return!1}handleWindowEvent(d){this.handleEvent(d,`${d.type}Window`)}_getMapTouches(d){const I=[];for(const D of d)this._el.contains(D.target)&&I.push(D);return I}handleEvent(d,I){if(d.type==="blur")return void this.stop(!0);this._updatingCamera=!0;const D=d.type==="renderFrame"?void 0:d,z={needsRenderFrame:!1},W={},ne={},pe=d.touches,ye=pe?this._getMapTouches(pe):void 0,Se=ye?w.touchPos(this._el,ye):w.mousePos(this._el,d);for(const{handlerName:st,handler:Mt,allowed:St}of this._handlers){if(!Mt.isEnabled())continue;let It;this._blockedByActive(ne,St,st)?Mt.reset():Mt[I||d.type]&&(It=Mt[I||d.type](d,Se,ye),this.mergeHandlerResult(z,W,It,st,D),It&&It.needsRenderFrame&&this._triggerRenderFrame()),(It||Mt.isActive())&&(ne[st]=Mt)}const ze={};for(const st in this._previousActiveHandlers)ne[st]||(ze[st]=D);this._previousActiveHandlers=ne,(Object.keys(ze).length||Kl(z))&&(this._changes.push([z,W,ze]),this._triggerRenderFrame()),(Object.keys(ne).length||Kl(z))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:Qe}=z;Qe&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],Qe(this._map))}mergeHandlerResult(d,I,D,z,W){if(!D)return;r.extend(d,D);const ne={handlerName:z,originalEvent:D.originalEvent||W};D.zoomDelta!==void 0&&(I.zoom=ne),D.panDelta!==void 0&&(I.drag=ne),D.pitchDelta!==void 0&&(I.pitch=ne),D.bearingDelta!==void 0&&(I.rotate=ne)}_applyChanges(){const d={},I={},D={};for(const[z,W,ne]of this._changes)z.panDelta&&(d.panDelta=(d.panDelta||new r.pointGeometry(0,0))._add(z.panDelta)),z.zoomDelta&&(d.zoomDelta=(d.zoomDelta||0)+z.zoomDelta),z.bearingDelta&&(d.bearingDelta=(d.bearingDelta||0)+z.bearingDelta),z.pitchDelta&&(d.pitchDelta=(d.pitchDelta||0)+z.pitchDelta),z.around!==void 0&&(d.around=z.around),z.pinchAround!==void 0&&(d.pinchAround=z.pinchAround),z.noInertia&&(d.noInertia=z.noInertia),r.extend(I,W),r.extend(D,ne);this._updateMapTransform(d,I,D),this._changes=[]}_updateMapTransform(d,I,D){const z=this._map,W=z.transform,ne=z.style&&z.style.terrain;if(!(Kl(d)||ne&&this._drag))return this._fireEvents(I,D,!0);let{panDelta:pe,zoomDelta:ye,bearingDelta:Se,pitchDelta:ze,around:Qe,pinchAround:st}=d;st!==void 0&&(Qe=st),z._stop(!0),Qe=Qe||z.transform.centerPoint;const Mt=W.pointLocation(pe?Qe.sub(pe):Qe);Se&&(W.bearing+=Se),ze&&(W.pitch+=ze),ye&&(W.zoom+=ye),ne?I.drag&&!this._drag?(this._drag={center:W.centerPoint,lngLat:W.pointLocation(Qe),point:Qe,handlerName:I.drag.handlerName},z.fire(new r.Event("freezeElevation",{freeze:!0}))):this._drag&&D[this._drag.handlerName]?(z.fire(new r.Event("freezeElevation",{freeze:!1})),this._drag=null):I.drag&&this._drag&&(W.center=W.pointLocation(W.centerPoint.sub(pe))):W.setLocationAtPoint(Mt,Qe),this._map._update(),d.noInertia||this._inertia.record(d),this._fireEvents(I,D,!0)}_fireEvents(d,I,D){const z=wu(this._eventsInProgress),W=wu(d),ne={};for(const ze in d){const{originalEvent:Qe}=d[ze];this._eventsInProgress[ze]||(ne[`${ze}start`]=Qe),this._eventsInProgress[ze]=d[ze]}!z&&W&&this._fireEvent("movestart",W.originalEvent);for(const ze in ne)this._fireEvent(ze,ne[ze]);W&&this._fireEvent("move",W.originalEvent);for(const ze in d){const{originalEvent:Qe}=d[ze];this._fireEvent(ze,Qe)}const pe={};let ye;for(const ze in this._eventsInProgress){const{handlerName:Qe,originalEvent:st}=this._eventsInProgress[ze];this._handlersById[Qe].isActive()||(delete this._eventsInProgress[ze],ye=I[Qe]||st,pe[`${ze}end`]=ye)}for(const ze in pe)this._fireEvent(ze,pe[ze]);const Se=wu(this._eventsInProgress);if(D&&(z||W)&&!Se){this._updatingCamera=!0;const ze=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),Qe=st=>st!==0&&-this._bearingSnap<st&&st<this._bearingSnap;ze?(Qe(ze.bearing||this._map.getBearing())&&(ze.bearing=0),this._map.easeTo(ze,{originalEvent:ye})):(this._map.fire(new r.Event("moveend",{originalEvent:ye})),Qe(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}}_fireEvent(d,I){this._map.fire(new r.Event(d,I?{originalEvent:I}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(d=>{delete this._frameId,this.handleEvent(new xu("renderFrame",{timeStamp:d})),this._applyChanges()})}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}const ya={extend:(B,...d)=>r.extend(B,...d),run(B){B()},logToElement(B,d=!1,I="log"){const D=window.document.getElementById(I);D&&(d&&(D.innerHTML=""),D.innerHTML+=`<br>${B}`)}};class Bo extends r.Evented{constructor(d,I){super(),this._moving=!1,this._zooming=!1,this.transform=d,this._bearingSnap=I.bearingSnap,r.bindAll(["_renderFrameCallback"],this)}getCenter(){return new r.LngLat(this.transform.center.lng,this.transform.center.lat)}setCenter(d,I){return this.jumpTo({center:d},I)}panBy(d,I,D){return d=r.pointGeometry.convert(d).mult(-1),this.panTo(this.transform.center,r.extend({offset:d},I),D)}panTo(d,I,D){return this.easeTo(r.extend({center:d},I),D)}getZoom(){return this.transform.zoom}setZoom(d,I){return this.jumpTo({zoom:d},I),this}zoomTo(d,I,D){return this.easeTo(r.extend({zoom:d},I),D)}zoomIn(d,I){return this.zoomTo(this.getZoom()+1,d,I),this}zoomOut(d,I){return this.zoomTo(this.getZoom()-1,d,I),this}getBearing(){return this.transform.bearing}setBearing(d,I){return this.jumpTo({bearing:d},I),this}getPadding(){return this.transform.padding}setPadding(d,I){return this.jumpTo({padding:d},I),this}rotateTo(d,I,D){return this.easeTo(r.extend({bearing:d},I),D)}resetNorth(d,I){return this.rotateTo(0,r.extend({duration:1e3},d),I),this}resetNorthPitch(d,I){return this.easeTo(r.extend({bearing:0,pitch:0,duration:1e3},d),I),this}snapToNorth(d,I){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(d,I):this}getPitch(){return this.transform.pitch}setPitch(d,I){return this.jumpTo({pitch:d},I),this}cameraForBounds(d,I){d=r.LngLatBounds.convert(d);const D=I&&I.bearing||0;return this._cameraForBoxAndBearing(d.getNorthWest(),d.getSouthEast(),D,I)}_cameraForBoxAndBearing(d,I,D,z){const W={top:0,bottom:0,right:0,left:0};if(typeof(z=r.extend({padding:W,offset:[0,0],maxZoom:this.transform.maxZoom},z)).padding=="number"){const Ei=z.padding;z.padding={top:Ei,bottom:Ei,right:Ei,left:Ei}}z.padding=r.extend(W,z.padding);const ne=this.transform,pe=ne.padding,ye=ne.project(r.LngLat.convert(d)),Se=ne.project(r.LngLat.convert(I)),ze=ye.rotate(-D*Math.PI/180),Qe=Se.rotate(-D*Math.PI/180),st=new r.pointGeometry(Math.max(ze.x,Qe.x),Math.max(ze.y,Qe.y)),Mt=new r.pointGeometry(Math.min(ze.x,Qe.x),Math.min(ze.y,Qe.y)),St=st.sub(Mt),It=(ne.width-(pe.left+pe.right+z.padding.left+z.padding.right))/St.x,ri=(ne.height-(pe.top+pe.bottom+z.padding.top+z.padding.bottom))/St.y;if(ri<0||It<0)return void r.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.");const fi=Math.min(ne.scaleZoom(ne.scale*Math.min(It,ri)),z.maxZoom),Ai=r.pointGeometry.convert(z.offset),jt=new r.pointGeometry((z.padding.left-z.padding.right)/2,(z.padding.top-z.padding.bottom)/2).rotate(D*Math.PI/180),Pi=Ai.add(jt).mult(ne.scale/ne.zoomScale(fi));return{center:ne.unproject(ye.add(Se).div(2).sub(Pi)),zoom:fi,bearing:D}}fitBounds(d,I,D){return this._fitInternal(this.cameraForBounds(d,I),I,D)}fitScreenCoordinates(d,I,D,z,W){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(r.pointGeometry.convert(d)),this.transform.pointLocation(r.pointGeometry.convert(I)),D,z),z,W)}_fitInternal(d,I,D){return d?(delete(I=r.extend(d,I)).padding,I.linear?this.easeTo(I,D):this.flyTo(I,D)):this}jumpTo(d,I){this.stop();const D=this.transform;let z=!1,W=!1,ne=!1;return"zoom"in d&&D.zoom!==+d.zoom&&(z=!0,D.zoom=+d.zoom),d.center!==void 0&&(D.center=r.LngLat.convert(d.center)),"bearing"in d&&D.bearing!==+d.bearing&&(W=!0,D.bearing=+d.bearing),"pitch"in d&&D.pitch!==+d.pitch&&(ne=!0,D.pitch=+d.pitch),d.padding==null||D.isPaddingEqual(d.padding)||(D.padding=d.padding),this.fire(new r.Event("movestart",I)).fire(new r.Event("move",I)),z&&this.fire(new r.Event("zoomstart",I)).fire(new r.Event("zoom",I)).fire(new r.Event("zoomend",I)),W&&this.fire(new r.Event("rotatestart",I)).fire(new r.Event("rotate",I)).fire(new r.Event("rotateend",I)),ne&&this.fire(new r.Event("pitchstart",I)).fire(new r.Event("pitch",I)).fire(new r.Event("pitchend",I)),this.fire(new r.Event("moveend",I))}calculateCameraOptionsFromTo(d,I,D,z=0){const W=r.MercatorCoordinate.fromLngLat(d,I),ne=r.MercatorCoordinate.fromLngLat(D,z),pe=ne.x-W.x,ye=ne.y-W.y,Se=ne.z-W.z,ze=Math.hypot(pe,ye,Se);if(ze===0)throw new Error("Can't calculate camera options with same From and To");const Qe=Math.hypot(pe,ye),st=this.transform.scaleZoom(this.transform.cameraToCenterDistance/ze/this.transform.tileSize),Mt=180*Math.atan2(pe,-ye)/Math.PI;let St=180*Math.acos(Qe/ze)/Math.PI;return St=Se<0?90-St:90+St,{center:ne.toLngLat(),zoom:st,pitch:St,bearing:Mt}}easeTo(d,I){this._stop(!1,d.easeId),((d=r.extend({offset:[0,0],duration:500,easing:r.ease},d)).animate===!1||!d.essential&&r.exported.prefersReducedMotion)&&(d.duration=0);const D=this.transform,z=this.getZoom(),W=this.getBearing(),ne=this.getPitch(),pe=this.getPadding(),ye="zoom"in d?+d.zoom:z,Se="bearing"in d?this._normalizeBearing(d.bearing,W):W,ze="pitch"in d?+d.pitch:ne,Qe="padding"in d?d.padding:D.padding,st=r.pointGeometry.convert(d.offset);let Mt=D.centerPoint.add(st);const St=D.pointLocation(Mt),It=r.LngLat.convert(d.center||St);this._normalizeCenter(It);const ri=D.project(St),fi=D.project(It).sub(ri),Ai=D.zoomScale(ye-z);let jt,Pi;d.around&&(jt=r.LngLat.convert(d.around),Pi=D.locationPoint(jt));const Ei={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||ye!==z,this._rotating=this._rotating||W!==Se,this._pitching=this._pitching||ze!==ne,this._padding=!D.isPaddingEqual(Qe),this._easeId=d.easeId,this._prepareEase(I,d.noMoveStart,Ei),this._ease(Vi=>{if(this._zooming&&(D.zoom=r.number(z,ye,Vi)),this._rotating&&(D.bearing=r.number(W,Se,Vi)),this._pitching&&(D.pitch=r.number(ne,ze,Vi)),this._padding&&(D.interpolatePadding(pe,Qe,Vi),Mt=D.centerPoint.add(st)),jt)D.setLocationAtPoint(jt,Pi);else{const Ni=D.zoomScale(D.zoom-z),un=ye>z?Math.min(2,Ai):Math.max(.5,Ai),zi=Math.pow(un,1-Vi),zn=D.unproject(ri.add(fi.mult(Vi*zi)).mult(Ni));D.setLocationAtPoint(D.renderWorldCopies?zn.wrap():zn,Mt)}this._fireMoveEvents(I)},Vi=>{this._afterEase(I,Vi)},d),this}_prepareEase(d,I,D={}){this._moving=!0,this.fire(new r.Event("freezeElevation",{freeze:!0})),I||D.moving||this.fire(new r.Event("movestart",d)),this._zooming&&!D.zooming&&this.fire(new r.Event("zoomstart",d)),this._rotating&&!D.rotating&&this.fire(new r.Event("rotatestart",d)),this._pitching&&!D.pitching&&this.fire(new r.Event("pitchstart",d))}_fireMoveEvents(d){this.fire(new r.Event("move",d)),this._zooming&&this.fire(new r.Event("zoom",d)),this._rotating&&this.fire(new r.Event("rotate",d)),this._pitching&&this.fire(new r.Event("pitch",d))}_afterEase(d,I){if(this._easeId&&I&&this._easeId===I)return;delete this._easeId,this.fire(new r.Event("freezeElevation",{freeze:!1}));const D=this._zooming,z=this._rotating,W=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,D&&this.fire(new r.Event("zoomend",d)),z&&this.fire(new r.Event("rotateend",d)),W&&this.fire(new r.Event("pitchend",d)),this.fire(new r.Event("moveend",d))}flyTo(d,I){if(!d.essential&&r.exported.prefersReducedMotion){const j=r.pick(d,["center","zoom","bearing","pitch","around"]);return this.jumpTo(j,I)}this.stop(),d=r.extend({offset:[0,0],speed:1.2,curve:1.42,easing:r.ease},d);const D=this.transform,z=this.getZoom(),W=this.getBearing(),ne=this.getPitch(),pe=this.getPadding(),ye="zoom"in d?r.clamp(+d.zoom,D.minZoom,D.maxZoom):z,Se="bearing"in d?this._normalizeBearing(d.bearing,W):W,ze="pitch"in d?+d.pitch:ne,Qe="padding"in d?d.padding:D.padding,st=D.zoomScale(ye-z),Mt=r.pointGeometry.convert(d.offset);let St=D.centerPoint.add(Mt);const It=D.pointLocation(St),ri=r.LngLat.convert(d.center||It);this._normalizeCenter(ri);const fi=D.project(It),Ai=D.project(ri).sub(fi);let jt=d.curve;const Pi=Math.max(D.width,D.height),Ei=Pi/st,Vi=Ai.mag();if("minZoom"in d){const j=r.clamp(Math.min(d.minZoom,z,ye),D.minZoom,D.maxZoom),K=Pi/D.zoomScale(j-z);jt=Math.sqrt(K/Vi*2)}const Ni=jt*jt;function un(j){const K=(Ei*Ei-Pi*Pi+(j?-1:1)*Ni*Ni*Vi*Vi)/(2*(j?Ei:Pi)*Ni*Vi);return Math.log(Math.sqrt(K*K+1)-K)}function zi(j){return(Math.exp(j)-Math.exp(-j))/2}function zn(j){return(Math.exp(j)+Math.exp(-j))/2}const vn=un(0);let Wn=function(j){return zn(vn)/zn(vn+jt*j)},Ir=function(j){return Pi*((zn(vn)*(zi(K=vn+jt*j)/zn(K))-zi(vn))/Ni)/Vi;var K},Fr=(un(1)-vn)/jt;if(Math.abs(Vi)<1e-6||!isFinite(Fr)){if(Math.abs(Pi-Ei)<1e-6)return this.easeTo(d,I);const j=Ei<Pi?-1:1;Fr=Math.abs(Math.log(Ei/Pi))/jt,Ir=function(){return 0},Wn=function(K){return Math.exp(j*jt*K)}}return d.duration="duration"in d?+d.duration:1e3*Fr/("screenSpeed"in d?+d.screenSpeed/jt:+d.speed),d.maxDuration&&d.duration>d.maxDuration&&(d.duration=0),this._zooming=!0,this._rotating=W!==Se,this._pitching=ze!==ne,this._padding=!D.isPaddingEqual(Qe),this._prepareEase(I,!1),this._ease(j=>{const K=j*Fr,ue=1/Wn(K);D.zoom=j===1?ye:z+D.scaleZoom(ue),this._rotating&&(D.bearing=r.number(W,Se,j)),this._pitching&&(D.pitch=r.number(ne,ze,j)),this._padding&&(D.interpolatePadding(pe,Qe,j),St=D.centerPoint.add(Mt));const we=j===1?ri:D.unproject(fi.add(Ai.mult(Ir(K))).mult(ue));D.setLocationAtPoint(D.renderWorldCopies?we.wrap():we,St),this._fireMoveEvents(I)},()=>this._afterEase(I),d),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(d,I){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){const D=this._onEaseEnd;delete this._onEaseEnd,D.call(this,I)}if(!d){const D=this.handlers;D&&D.stop(!1)}return this}_ease(d,I,D){D.animate===!1||D.duration===0?(d(1),I()):(this._easeStart=r.exported.now(),this._easeOptions=D,this._onEaseFrame=d,this._onEaseEnd=I,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_renderFrameCallback(){const d=Math.min((r.exported.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(d)),d<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()}_normalizeBearing(d,I){d=r.wrap(d,-180,180);const D=Math.abs(d-I);return Math.abs(d-360-I)<D&&(d-=360),Math.abs(d+360-I)<D&&(d+=360),d}_normalizeCenter(d){const I=this.transform;if(!I.renderWorldCopies||I.lngRange)return;const D=d.lng-I.center.lng;d.lng+=D>180?-360:D<-180?360:0}}class Au{constructor(d={}){this.options=d,r.bindAll(["_toggleAttribution","_updateData","_updateCompact","_updateCompactMinimize"],this)}getDefaultPosition(){return"bottom-right"}onAdd(d){return this._map=d,this._compact=this.options&&this.options.compact,this._container=w.create("details","maplibregl-ctrl maplibregl-ctrl-attrib mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._compactButton=w.create("summary","maplibregl-ctrl-attrib-button mapboxgl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=w.create("div","maplibregl-ctrl-attrib-inner mapboxgl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("terrain",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){w.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("terrain",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._attribHTML=void 0}_setElementTitle(d,I){const D=this._map._getUIString(`AttributionControl.${I}`);d.title=D,d.setAttribute("aria-label",D)}_toggleAttribution(){this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show","mapboxgl-compact-show")):(this._container.classList.add("maplibregl-compact-show","mapboxgl-compact-show"),this._container.removeAttribute("open")))}_updateData(d){!d||d.sourceDataType!=="metadata"&&d.sourceDataType!=="visibility"&&d.dataType!=="style"&&d.type!=="terrain"||this._updateAttributions()}_updateAttributions(){if(!this._map.style)return;let d=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?d=d.concat(this.options.customAttribution.map(z=>typeof z!="string"?"":z)):typeof this.options.customAttribution=="string"&&d.push(this.options.customAttribution)),this._map.style.stylesheet){const z=this._map.style.stylesheet;this.styleOwner=z.owner,this.styleId=z.id}const I=this._map.style.sourceCaches;for(const z in I){const W=I[z];if(W.used||W.usedForTerrain){const ne=W.getSource();ne.attribution&&d.indexOf(ne.attribution)<0&&d.push(ne.attribution)}}d=d.filter(z=>String(z).trim()),d.sort((z,W)=>z.length-W.length),d=d.filter((z,W)=>{for(let ne=W+1;ne<d.length;ne++)if(d[ne].indexOf(z)>=0)return!1;return!0});const D=d.join(" | ");D!==this._attribHTML&&(this._attribHTML=D,d.length?(this._innerContainer.innerHTML=D,this._container.classList.remove("maplibregl-attrib-empty","mapboxgl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty","mapboxgl-attrib-empty"),this._updateCompact(),this._editLink=null)}_updateCompact(){this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact===!1?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","mapboxgl-compact","maplibregl-compact-show","mapboxgl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show","mapboxgl-compact","mapboxgl-compact-show"))}_updateCompactMinimize(){this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show","mapboxgl-compact-show")}}class ku{constructor(d={}){this.options=d,r.bindAll(["_updateCompact"],this)}getDefaultPosition(){return"bottom-left"}onAdd(d){this._map=d,this._compact=this.options&&this.options.compact,this._container=w.create("div","maplibregl-ctrl mapboxgl-ctrl");const I=w.create("a","maplibregl-ctrl-logo mapboxgl-ctrl-logo");return I.target="_blank",I.rel="noopener nofollow",I.href="https://maplibre.org/",I.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),I.setAttribute("rel","noopener nofollow"),this._container.appendChild(I),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){w.remove(this._container),this._map.off("resize",this._updateCompact),this._map=void 0,this._compact=void 0}_updateCompact(){const d=this._container.children;if(d.length){const I=d[0];this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact!==!1&&I.classList.add("maplibregl-compact","mapboxgl-compact"):I.classList.remove("maplibregl-compact","mapboxgl-compact")}}}class Nc{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(d){const I=++this._id;return this._queue.push({callback:d,id:I,cancelled:!1}),I}remove(d){const I=this._currentlyRunning,D=I?this._queue.concat(I):this._queue;for(const z of D)if(z.id===d)return void(z.cancelled=!0)}run(d=0){if(this._currentlyRunning)throw new Error("Attempting to run(), but is already running.");const I=this._currentlyRunning=this._queue;this._queue=[];for(const D of I)if(!D.cancelled&&(D.callback(d),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}const Nh={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm","TerrainControl.enableTerrain":"Enable terrain","TerrainControl.disableTerrain":"Disable terrain"},al={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:void 0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,maplibreLogo:!1,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",transformRequest:null,fadeDuration:300,crossSourceCollisions:!0},jh={showCompass:!0,showZoom:!0,visualizePitch:!1};class ll{constructor(d,I,D=!1){this._clickTolerance=10,this.element=I,this.mouseRotate=new ms({clickTolerance:d.dragRotate._mouseRotate._clickTolerance}),this.map=d,D&&(this.mousePitch=new Dn({clickTolerance:d.dragRotate._mousePitch._clickTolerance})),r.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),w.addEventListener(I,"mousedown",this.mousedown),w.addEventListener(I,"touchstart",this.touchstart,{passive:!1}),w.addEventListener(I,"touchmove",this.touchmove),w.addEventListener(I,"touchend",this.touchend),w.addEventListener(I,"touchcancel",this.reset)}down(d,I){this.mouseRotate.mousedown(d,I),this.mousePitch&&this.mousePitch.mousedown(d,I),w.disableDrag()}move(d,I){const D=this.map,z=this.mouseRotate.mousemoveWindow(d,I);if(z&&z.bearingDelta&&D.setBearing(D.getBearing()+z.bearingDelta),this.mousePitch){const W=this.mousePitch.mousemoveWindow(d,I);W&&W.pitchDelta&&D.setPitch(D.getPitch()+W.pitchDelta)}}off(){const d=this.element;w.removeEventListener(d,"mousedown",this.mousedown),w.removeEventListener(d,"touchstart",this.touchstart,{passive:!1}),w.removeEventListener(d,"touchmove",this.touchmove),w.removeEventListener(d,"touchend",this.touchend),w.removeEventListener(d,"touchcancel",this.reset),this.offTemp()}offTemp(){w.enableDrag(),w.removeEventListener(window,"mousemove",this.mousemove),w.removeEventListener(window,"mouseup",this.mouseup)}mousedown(d){this.down(r.extend({},d,{ctrlKey:!0,preventDefault:()=>d.preventDefault()}),w.mousePos(this.element,d)),w.addEventListener(window,"mousemove",this.mousemove),w.addEventListener(window,"mouseup",this.mouseup)}mousemove(d){this.move(d,w.mousePos(this.element,d))}mouseup(d){this.mouseRotate.mouseupWindow(d),this.mousePitch&&this.mousePitch.mouseupWindow(d),this.offTemp()}touchstart(d){d.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=w.touchPos(this.element,d.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:()=>d.preventDefault()},this._startPos))}touchmove(d){d.targetTouches.length!==1?this.reset():(this._lastPos=w.touchPos(this.element,d.targetTouches)[0],this.move({preventDefault:()=>d.preventDefault()},this._lastPos))}touchend(d){d.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()}reset(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()}}function cc(B,d,I){if(B=new r.LngLat(B.lng,B.lat),d){const D=new r.LngLat(B.lng-360,B.lat),z=new r.LngLat(B.lng+360,B.lat),W=I.locationPoint(B).distSqr(d);I.locationPoint(D).distSqr(d)<W?B=D:I.locationPoint(z).distSqr(d)<W&&(B=z)}for(;Math.abs(B.lng-I.center.lng)>180;){const D=I.locationPoint(B);if(D.x>=0&&D.y>=0&&D.x<=I.width&&D.y<=I.height)break;B.lng>I.center.lng?B.lng-=360:B.lng+=360}return B}const tr={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function yr(B,d,I){const D=B.classList;for(const z in tr)D.remove(`maplibregl-${I}-anchor-${z}`,`mapboxgl-${I}-anchor-${z}`);D.add(`maplibregl-${I}-anchor-${d}`,`mapboxgl-${I}-anchor-${d}`)}class Gu extends r.Evented{constructor(d,I){if(super(),(d instanceof HTMLElement||I)&&(d=r.extend({element:d},I)),r.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress"],this),this._anchor=d&&d.anchor||"center",this._color=d&&d.color||"#3FB1CE",this._scale=d&&d.scale||1,this._draggable=d&&d.draggable||!1,this._clickTolerance=d&&d.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=d&&d.rotation||0,this._rotationAlignment=d&&d.rotationAlignment||"auto",this._pitchAlignment=d&&d.pitchAlignment&&d.pitchAlignment!=="auto"?d.pitchAlignment:this._rotationAlignment,d&&d.element)this._element=d.element,this._offset=r.pointGeometry.convert(d&&d.offset||[0,0]);else{this._defaultMarker=!0,this._element=w.create("div"),this._element.setAttribute("aria-label","Map marker");const D=w.createNS("http://www.w3.org/2000/svg","svg"),z=41,W=27;D.setAttributeNS(null,"display","block"),D.setAttributeNS(null,"height",`${z}px`),D.setAttributeNS(null,"width",`${W}px`),D.setAttributeNS(null,"viewBox",`0 0 ${W} ${z}`);const ne=w.createNS("http://www.w3.org/2000/svg","g");ne.setAttributeNS(null,"stroke","none"),ne.setAttributeNS(null,"stroke-width","1"),ne.setAttributeNS(null,"fill","none"),ne.setAttributeNS(null,"fill-rule","evenodd");const pe=w.createNS("http://www.w3.org/2000/svg","g");pe.setAttributeNS(null,"fill-rule","nonzero");const ye=w.createNS("http://www.w3.org/2000/svg","g");ye.setAttributeNS(null,"transform","translate(3.0, 29.0)"),ye.setAttributeNS(null,"fill","#000000");const Se=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(const Ai of Se){const jt=w.createNS("http://www.w3.org/2000/svg","ellipse");jt.setAttributeNS(null,"opacity","0.04"),jt.setAttributeNS(null,"cx","10.5"),jt.setAttributeNS(null,"cy","5.80029008"),jt.setAttributeNS(null,"rx",Ai.rx),jt.setAttributeNS(null,"ry",Ai.ry),ye.appendChild(jt)}const ze=w.createNS("http://www.w3.org/2000/svg","g");ze.setAttributeNS(null,"fill",this._color);const Qe=w.createNS("http://www.w3.org/2000/svg","path");Qe.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),ze.appendChild(Qe);const st=w.createNS("http://www.w3.org/2000/svg","g");st.setAttributeNS(null,"opacity","0.25"),st.setAttributeNS(null,"fill","#000000");const Mt=w.createNS("http://www.w3.org/2000/svg","path");Mt.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),st.appendChild(Mt);const St=w.createNS("http://www.w3.org/2000/svg","g");St.setAttributeNS(null,"transform","translate(6.0, 7.0)"),St.setAttributeNS(null,"fill","#FFFFFF");const It=w.createNS("http://www.w3.org/2000/svg","g");It.setAttributeNS(null,"transform","translate(8.0, 8.0)");const ri=w.createNS("http://www.w3.org/2000/svg","circle");ri.setAttributeNS(null,"fill","#000000"),ri.setAttributeNS(null,"opacity","0.25"),ri.setAttributeNS(null,"cx","5.5"),ri.setAttributeNS(null,"cy","5.5"),ri.setAttributeNS(null,"r","5.4999962");const fi=w.createNS("http://www.w3.org/2000/svg","circle");fi.setAttributeNS(null,"fill","#FFFFFF"),fi.setAttributeNS(null,"cx","5.5"),fi.setAttributeNS(null,"cy","5.5"),fi.setAttributeNS(null,"r","5.4999962"),It.appendChild(ri),It.appendChild(fi),pe.appendChild(ye),pe.appendChild(ze),pe.appendChild(st),pe.appendChild(St),pe.appendChild(It),D.appendChild(pe),D.setAttributeNS(null,"height",z*this._scale+"px"),D.setAttributeNS(null,"width",W*this._scale+"px"),this._element.appendChild(D),this._offset=r.pointGeometry.convert(d&&d.offset||[0,-14])}this._element.classList.add("maplibregl-marker","mapboxgl-marker"),this._element.addEventListener("dragstart",D=>{D.preventDefault()}),this._element.addEventListener("mousedown",D=>{D.preventDefault()}),yr(this._element,this._anchor,"marker"),this._popup=null}addTo(d){return this.remove(),this._map=d,d.getCanvasContainer().appendChild(this._element),d.on("move",this._update),d.on("moveend",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._opacityTimeout&&(clearTimeout(this._opacityTimeout),delete this._opacityTimeout),this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),w.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(d){return this._lngLat=r.LngLat.convert(d),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(d){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),d){if(!("offset"in d.options)){const z=Math.sqrt(Math.pow(13.5,2)/2);d.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[z,-1*(38.1-13.5+z)],"bottom-right":[-z,-1*(38.1-13.5+z)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=d,this._lngLat&&this._popup.setLngLat(this._lngLat),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}_onKeyPress(d){const I=d.code,D=d.charCode||d.keyCode;I!=="Space"&&I!=="Enter"&&D!==32&&D!==13||this.togglePopup()}_onMapClick(d){const I=d.originalEvent.target,D=this._element;this._popup&&(I===D||D.contains(I))&&this.togglePopup()}getPopup(){return this._popup}togglePopup(){const d=this._popup;return d?(d.isOpen()?d.remove():d.addTo(this._map),this):this}_update(d){if(!this._map)return;this._map.transform.renderWorldCopies&&(this._lngLat=cc(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset);let I="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?I=`rotateZ(${this._rotation}deg)`:this._rotationAlignment==="map"&&(I=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let D="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?D="rotateX(0deg)":this._pitchAlignment==="map"&&(D=`rotateX(${this._map.getPitch()}deg)`),d&&d.type!=="moveend"||(this._pos=this._pos.round()),w.setTransform(this._element,`${tr[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${D} ${I}`),this._map.style&&this._map.style.terrain&&!this._opacityTimeout&&(this._opacityTimeout=setTimeout(()=>{const z=this._map.unproject(this._pos),W=40075016686e-3*Math.abs(Math.cos(this._lngLat.lat*Math.PI/180))/Math.pow(2,this._map.transform.tileZoom+8);this._element.style.opacity=z.distanceTo(this._lngLat)>20*W?"0.2":"1.0",this._opacityTimeout=null},100))}getOffset(){return this._offset}setOffset(d){return this._offset=r.pointGeometry.convert(d),this._update(),this}_onMove(d){if(!this._isDragging){const I=this._clickTolerance||this._map._clickTolerance;this._isDragging=d.point.dist(this._pointerdownPos)>=I}this._isDragging&&(this._pos=d.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new r.Event("dragstart"))),this.fire(new r.Event("drag")))}_onUp(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new r.Event("dragend")),this._state="inactive"}_addDragHandler(d){this._element.contains(d.originalEvent.target)&&(d.preventDefault(),this._positionDelta=d.point.sub(this._pos).add(this._offset),this._pointerdownPos=d.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))}setDraggable(d){return this._draggable=!!d,this._map&&(d?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(d){return this._rotation=d||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(d){return this._rotationAlignment=d||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(d){return this._pitchAlignment=d&&d!=="auto"?d:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}}const hc={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0};let ws,jo=0,Jl=!1;const ul={maxWidth:100,unit:"metric"};function dh(B,d,I){const D=I&&I.maxWidth||100,z=B._container.clientHeight/2,W=B.unproject([0,z]),ne=B.unproject([D,z]),pe=W.distanceTo(ne);if(I&&I.unit==="imperial"){const ye=3.2808*pe;ye>5280?Ql(d,D,ye/5280,B._getUIString("ScaleControl.Miles")):Ql(d,D,ye,B._getUIString("ScaleControl.Feet"))}else I&&I.unit==="nautical"?Ql(d,D,pe/1852,B._getUIString("ScaleControl.NauticalMiles")):pe>=1e3?Ql(d,D,pe/1e3,B._getUIString("ScaleControl.Kilometers")):Ql(d,D,pe,B._getUIString("ScaleControl.Meters"))}function Ql(B,d,I,D){const z=function(W){const ne=Math.pow(10,`${Math.floor(W)}`.length-1);let pe=W/ne;return pe=pe>=10?10:pe>=5?5:pe>=3?3:pe>=2?2:pe>=1?1:function(ye){const Se=Math.pow(10,Math.ceil(-Math.log(ye)/Math.LN10));return Math.round(ye*Se)/Se}(pe),ne*pe}(I);B.style.width=d*(z/I)+"px",B.innerHTML=`${z}&nbsp;${D}`}const os={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},gs=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function ph(B){if(B){if(typeof B=="number"){const d=Math.round(Math.sqrt(.5*Math.pow(B,2)));return{center:new r.pointGeometry(0,0),top:new r.pointGeometry(0,B),"top-left":new r.pointGeometry(d,d),"top-right":new r.pointGeometry(-d,d),bottom:new r.pointGeometry(0,-B),"bottom-left":new r.pointGeometry(d,-d),"bottom-right":new r.pointGeometry(-d,-d),left:new r.pointGeometry(B,0),right:new r.pointGeometry(-B,0)}}if(B instanceof r.pointGeometry||Array.isArray(B)){const d=r.pointGeometry.convert(B);return{center:d,top:d,"top-left":d,"top-right":d,bottom:d,"bottom-left":d,"bottom-right":d,left:d,right:d}}return{center:r.pointGeometry.convert(B.center||[0,0]),top:r.pointGeometry.convert(B.top||[0,0]),"top-left":r.pointGeometry.convert(B["top-left"]||[0,0]),"top-right":r.pointGeometry.convert(B["top-right"]||[0,0]),bottom:r.pointGeometry.convert(B.bottom||[0,0]),"bottom-left":r.pointGeometry.convert(B["bottom-left"]||[0,0]),"bottom-right":r.pointGeometry.convert(B["bottom-right"]||[0,0]),left:r.pointGeometry.convert(B.left||[0,0]),right:r.pointGeometry.convert(B.right||[0,0])}}return ph(new r.pointGeometry(0,0))}const sa={supported:h,setRTLTextPlugin:r.setRTLTextPlugin,getRTLTextPluginStatus:r.getRTLTextPluginStatus,Map:class extends Bo{constructor(B){var d;if(r.PerformanceUtils.mark(r.PerformanceMarkers.create),(B=r.extend({},al,B)).minZoom!=null&&B.maxZoom!=null&&B.minZoom>B.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(B.minPitch!=null&&B.maxPitch!=null&&B.minPitch>B.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(B.minPitch!=null&&B.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(B.maxPitch!=null&&B.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(super(new Zl(B.minZoom,B.maxZoom,B.minPitch,B.maxPitch,B.renderWorldCopies),{bearingSnap:B.bearingSnap}),this._interactive=B.interactive,this._cooperativeGestures=B.cooperativeGestures,this._maxTileCacheSize=B.maxTileCacheSize,this._failIfMajorPerformanceCaveat=B.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=B.preserveDrawingBuffer,this._antialias=B.antialias,this._trackResize=B.trackResize,this._bearingSnap=B.bearingSnap,this._refreshExpiredTiles=B.refreshExpiredTiles,this._fadeDuration=B.fadeDuration,this._crossSourceCollisions=B.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=B.collectResourceTiming,this._renderTaskQueue=new Nc,this._controls=[],this._mapId=r.uniqueId(),this._locale=r.extend({},Nh,B.locale),this._clickTolerance=B.clickTolerance,this._pixelRatio=(d=B.pixelRatio)!==null&&d!==void 0?d:devicePixelRatio,this._requestManager=new x(B.transformRequest),typeof B.container=="string"){if(this._container=document.getElementById(B.container),!this._container)throw new Error(`Container '${B.container}' not found.`)}else{if(!(B.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=B.container}if(B.maxBounds&&this.setMaxBounds(B.maxBounds),r.bindAll(["_onWindowOnline","_onWindowResize","_onMapScroll","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),this.painter===void 0)throw new Error("Failed to initialize WebGL.");this.on("move",()=>this._update(!1)),this.on("moveend",()=>this._update(!1)),this.on("zoom",()=>this._update(!0)),this.on("terrain",()=>{this.painter.terrainFacilitator.dirty=!0,this._update(!0)}),typeof window<"u"&&(addEventListener("online",this._onWindowOnline,!1),addEventListener("resize",this._onWindowResize,!1),addEventListener("orientationchange",this._onWindowResize,!1)),this.handlers=new eo(this,B),this._cooperativeGestures&&this._setupCooperativeGestures(),this._hash=B.hash&&new Ta(typeof B.hash=="string"&&B.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:B.center,zoom:B.zoom,bearing:B.bearing,pitch:B.pitch}),B.bounds&&(this.resize(),this.fitBounds(B.bounds,r.extend({},B.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=B.localIdeographFontFamily,B.style&&this.setStyle(B.style,{localIdeographFontFamily:B.localIdeographFontFamily}),B.attributionControl&&this.addControl(new Au({customAttribution:B.customAttribution})),B.maplibreLogo&&this.addControl(new ku,B.logoPosition),this.on("style.load",()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet)}),this.on("data",I=>{this._update(I.dataType==="style"),this.fire(new r.Event(`${I.dataType}data`,I))}),this.on("dataloading",I=>{this.fire(new r.Event(`${I.dataType}dataloading`,I))}),this.on("dataabort",I=>{this.fire(new r.Event("sourcedataabort",I))})}_getMapId(){return this._mapId}addControl(B,d){if(d===void 0&&(d=B.getDefaultPosition?B.getDefaultPosition():"top-right"),!B||!B.onAdd)return this.fire(new r.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const I=B.onAdd(this);this._controls.push(B);const D=this._controlPositions[d];return d.indexOf("bottom")!==-1?D.insertBefore(I,D.firstChild):D.appendChild(I),this}removeControl(B){if(!B||!B.onRemove)return this.fire(new r.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const d=this._controls.indexOf(B);return d>-1&&this._controls.splice(d,1),B.onRemove(this),this}hasControl(B){return this._controls.indexOf(B)>-1}calculateCameraOptionsFromTo(B,d,I,D){return D==null&&this.style.terrain&&(D=this.transform.getElevation(I,this.style.terrain)),super.calculateCameraOptionsFromTo(B,d,I,D)}resize(B){const d=this._containerDimensions(),I=d[0],D=d[1];this._resizeCanvas(I,D,this.getPixelRatio()),this.transform.resize(I,D),this.painter.resize(I,D,this.getPixelRatio());const z=!this._moving;return z&&(this.stop(),this.fire(new r.Event("movestart",B)).fire(new r.Event("move",B))),this.fire(new r.Event("resize",B)),z&&this.fire(new r.Event("moveend",B)),this}getPixelRatio(){return this._pixelRatio}setPixelRatio(B){const[d,I]=this._containerDimensions();this._pixelRatio=B,this._resizeCanvas(d,I,B),this.painter.resize(d,I,B)}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(B){return this.transform.setMaxBounds(r.LngLatBounds.convert(B)),this._update()}setMinZoom(B){if((B=B==null?-2:B)>=-2&&B<=this.transform.maxZoom)return this.transform.minZoom=B,this._update(),this.getZoom()<B&&this.setZoom(B),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(B){if((B=B==null?22:B)>=this.transform.minZoom)return this.transform.maxZoom=B,this._update(),this.getZoom()>B&&this.setZoom(B),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(B){if((B=B==null?0:B)<0)throw new Error("minPitch must be greater than or equal to 0");if(B>=0&&B<=this.transform.maxPitch)return this.transform.minPitch=B,this._update(),this.getPitch()<B&&this.setPitch(B),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(B){if((B=B==null?60:B)>85)throw new Error("maxPitch must be less than or equal to 85");if(B>=this.transform.minPitch)return this.transform.maxPitch=B,this._update(),this.getPitch()>B&&this.setPitch(B),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(B){return this.transform.renderWorldCopies=B,this._update()}project(B){return this.transform.locationPoint(r.LngLat.convert(B),this.style&&this.style.terrain)}unproject(B){return this.transform.pointLocation(r.pointGeometry.convert(B),this.style&&this.style.terrain)}isMoving(){return this._moving||this.handlers.isMoving()}isZooming(){return this._zooming||this.handlers.isZooming()}isRotating(){return this._rotating||this.handlers.isRotating()}_createDelegatedListener(B,d,I){if(B==="mouseenter"||B==="mouseover"){let D=!1;return{layer:d,listener:I,delegates:{mousemove:W=>{const ne=this.getLayer(d)?this.queryRenderedFeatures(W.point,{layers:[d]}):[];ne.length?D||(D=!0,I.call(this,new us(B,this,W.originalEvent,{features:ne}))):D=!1},mouseout:()=>{D=!1}}}}if(B==="mouseleave"||B==="mouseout"){let D=!1;return{layer:d,listener:I,delegates:{mousemove:ne=>{(this.getLayer(d)?this.queryRenderedFeatures(ne.point,{layers:[d]}):[]).length?D=!0:D&&(D=!1,I.call(this,new us(B,this,ne.originalEvent)))},mouseout:ne=>{D&&(D=!1,I.call(this,new us(B,this,ne.originalEvent)))}}}}{const D=z=>{const W=this.getLayer(d)?this.queryRenderedFeatures(z.point,{layers:[d]}):[];W.length&&(z.features=W,I.call(this,z),delete z.features)};return{layer:d,listener:I,delegates:{[B]:D}}}}on(B,d,I){if(I===void 0)return super.on(B,d);const D=this._createDelegatedListener(B,d,I);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[B]=this._delegatedListeners[B]||[],this._delegatedListeners[B].push(D);for(const z in D.delegates)this.on(z,D.delegates[z]);return this}once(B,d,I){if(I===void 0)return super.once(B,d);const D=this._createDelegatedListener(B,d,I);for(const z in D.delegates)this.once(z,D.delegates[z]);return this}off(B,d,I){return I===void 0?super.off(B,d):(this._delegatedListeners&&this._delegatedListeners[B]&&(D=>{const z=this._delegatedListeners[B];for(let W=0;W<z.length;W++){const ne=z[W];if(ne.layer===d&&ne.listener===I){for(const pe in ne.delegates)this.off(pe,ne.delegates[pe]);return z.splice(W,1),this}}})(),this)}queryRenderedFeatures(B,d){if(!this.style)return[];let I;if(d!==void 0||B===void 0||B instanceof r.pointGeometry||Array.isArray(B)||(d=B,B=void 0),d=d||{},(B=B||[[0,0],[this.transform.width,this.transform.height]])instanceof r.pointGeometry||typeof B[0]=="number")I=[r.pointGeometry.convert(B)];else{const D=r.pointGeometry.convert(B[0]),z=r.pointGeometry.convert(B[1]);I=[D,new r.pointGeometry(z.x,D.y),z,new r.pointGeometry(D.x,z.y),D]}return this.style.queryRenderedFeatures(I,d,this.transform)}querySourceFeatures(B,d){return this.style.querySourceFeatures(B,d)}setStyle(B,d){return(d=r.extend({},{localIdeographFontFamily:this._localIdeographFontFamily},d)).diff!==!1&&d.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&B?(this._diffStyle(B,d),this):(this._localIdeographFontFamily=d.localIdeographFontFamily,this._updateStyle(B,d))}setTransformRequest(B){return this._requestManager.setTransformRequest(B),this}_getUIString(B){const d=this._locale[B];if(d==null)throw new Error(`Missing UI string '${B}'`);return d}_updateStyle(B,d){return this.style&&(this.style.setEventedParent(null),this.style._remove()),B?(this.style=new Qo(this,d||{}),this.style.setEventedParent(this,{style:this.style}),typeof B=="string"?this.style.loadURL(B):this.style.loadJSON(B),this):(delete this.style,this)}_lazyInitEmptyStyle(){this.style||(this.style=new Qo(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(B,d){if(typeof B=="string"){const I=this._requestManager.transformRequest(B,r.ResourceType.Style);r.getJSON(I,(D,z)=>{D?this.fire(new r.ErrorEvent(D)):z&&this._updateDiff(z,d)})}else typeof B=="object"&&this._updateDiff(B,d)}_updateDiff(B,d){try{this.style.setState(B)&&this._update(!0)}catch(I){r.warnOnce(`Unable to perform style diff: ${I.message||I.error||I}.  Rebuilding the style from scratch.`),this._updateStyle(B,d)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():r.warnOnce("There is no style added to the map.")}addSource(B,d){return this._lazyInitEmptyStyle(),this.style.addSource(B,d),this._update(!0)}isSourceLoaded(B){const d=this.style&&this.style.sourceCaches[B];if(d!==void 0)return d.loaded();this.fire(new r.ErrorEvent(new Error(`There is no source with ID '${B}'`)))}setTerrain(B){return this.style.setTerrain(B),this}getTerrain(){return this.style.terrain&&this.style.terrain.options}areTilesLoaded(){const B=this.style&&this.style.sourceCaches;for(const d in B){const I=B[d]._tiles;for(const D in I){const z=I[D];if(z.state!=="loaded"&&z.state!=="errored")return!1}}return!0}addSourceType(B,d,I){return this._lazyInitEmptyStyle(),this.style.addSourceType(B,d,I)}removeSource(B){return this.style.removeSource(B),this._update(!0)}getSource(B){return this.style.getSource(B)}addImage(B,d,{pixelRatio:I=1,sdf:D=!1,stretchX:z,stretchY:W,content:ne}={}){if(this._lazyInitEmptyStyle(),d instanceof HTMLImageElement||r.isImageBitmap(d)){const{width:pe,height:ye,data:Se}=r.exported.getImageData(d);this.style.addImage(B,{data:new r.RGBAImage({width:pe,height:ye},Se),pixelRatio:I,stretchX:z,stretchY:W,content:ne,sdf:D,version:0})}else{if(d.width===void 0||d.height===void 0)return this.fire(new r.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{const{width:pe,height:ye,data:Se}=d,ze=d;this.style.addImage(B,{data:new r.RGBAImage({width:pe,height:ye},new Uint8Array(Se)),pixelRatio:I,stretchX:z,stretchY:W,content:ne,sdf:D,version:0,userImage:ze}),ze.onAdd&&ze.onAdd(this,B)}}}updateImage(B,d){const I=this.style.getImage(B);if(!I)return this.fire(new r.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const D=d instanceof HTMLImageElement||r.isImageBitmap(d)?r.exported.getImageData(d):d,{width:z,height:W,data:ne}=D;if(z===void 0||W===void 0)return this.fire(new r.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(z!==I.data.width||W!==I.data.height)return this.fire(new r.ErrorEvent(new Error("The width and height of the updated image must be that same as the previous version of the image")));const pe=!(d instanceof HTMLImageElement||r.isImageBitmap(d));I.data.replace(ne,pe),this.style.updateImage(B,I)}hasImage(B){return B?!!this.style.getImage(B):(this.fire(new r.ErrorEvent(new Error("Missing required image id"))),!1)}removeImage(B){this.style.removeImage(B)}loadImage(B,d){r.getImage(this._requestManager.transformRequest(B,r.ResourceType.Image),d)}listImages(){return this.style.listImages()}addLayer(B,d){return this._lazyInitEmptyStyle(),this.style.addLayer(B,d),this._update(!0)}moveLayer(B,d){return this.style.moveLayer(B,d),this._update(!0)}removeLayer(B){return this.style.removeLayer(B),this._update(!0)}getLayer(B){return this.style.getLayer(B)}setLayerZoomRange(B,d,I){return this.style.setLayerZoomRange(B,d,I),this._update(!0)}setFilter(B,d,I={}){return this.style.setFilter(B,d,I),this._update(!0)}getFilter(B){return this.style.getFilter(B)}setPaintProperty(B,d,I,D={}){return this.style.setPaintProperty(B,d,I,D),this._update(!0)}getPaintProperty(B,d){return this.style.getPaintProperty(B,d)}setLayoutProperty(B,d,I,D={}){return this.style.setLayoutProperty(B,d,I,D),this._update(!0)}getLayoutProperty(B,d){return this.style.getLayoutProperty(B,d)}setLight(B,d={}){return this._lazyInitEmptyStyle(),this.style.setLight(B,d),this._update(!0)}getLight(){return this.style.getLight()}setFeatureState(B,d){return this.style.setFeatureState(B,d),this._update()}removeFeatureState(B,d){return this.style.removeFeatureState(B,d),this._update()}getFeatureState(B){return this.style.getFeatureState(B)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let B=0,d=0;return this._container&&(B=this._container.clientWidth||400,d=this._container.clientHeight||300),[B,d]}_setupContainer(){const B=this._container;B.classList.add("maplibregl-map","mapboxgl-map");const d=this._canvasContainer=w.create("div","maplibregl-canvas-container mapboxgl-canvas-container",B);this._interactive&&d.classList.add("maplibregl-interactive","mapboxgl-interactive"),this._canvas=w.create("canvas","maplibregl-canvas mapboxgl-canvas",d),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map"),this._canvas.setAttribute("role","region");const I=this._containerDimensions();this._resizeCanvas(I[0],I[1],this.getPixelRatio());const D=this._controlContainer=w.create("div","maplibregl-control-container mapboxgl-control-container",B),z=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(W=>{z[W]=w.create("div",`maplibregl-ctrl-${W} mapboxgl-ctrl-${W}`,D)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_setupCooperativeGestures(){const B=this._container;this._metaPress=!1,this._cooperativeGesturesScreen=w.create("div","maplibregl-cooperative-gesture-screen",B);let d="Control",I=typeof this._cooperativeGestures!="boolean"&&this._cooperativeGestures.windowsHelpText?this._cooperativeGestures.windowsHelpText:"Use Ctrl + scroll to zoom the map";navigator.platform.indexOf("Mac")===0&&(I=typeof this._cooperativeGestures!="boolean"&&this._cooperativeGestures.macHelpText?this._cooperativeGestures.macHelpText:"Use \u2318 + scroll to zoom the map",d="Meta"),this._cooperativeGesturesScreen.innerHTML=`
            <div class="maplibregl-desktop-message">${I}</div>
            <div class="maplibregl-mobile-message">${typeof this._cooperativeGestures!="boolean"&&this._cooperativeGestures.mobileHelpText?this._cooperativeGestures.mobileHelpText:"Use two fingers to move the map"}</div>
        `,document.addEventListener("keydown",D=>{D.key===d&&(this._metaPress=!0)}),document.addEventListener("keyup",D=>{D.key===d&&(this._metaPress=!1)}),this._canvasContainer.addEventListener("wheel",D=>{this._onCooperativeGesture(D,this._metaPress,1)},!1),this._canvasContainer.classList.remove("mapboxgl-touch-drag-pan","maplibregl-touch-drag-pan")}_resizeCanvas(B,d,I){this._canvas.width=I*B,this._canvas.height=I*d,this._canvas.style.width=`${B}px`,this._canvas.style.height=`${d}px`}_setupPainter(){const B=r.extend({},h.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),d=this._canvas.getContext("webgl",B)||this._canvas.getContext("experimental-webgl",B);d?(this.painter=new _u(d,this.transform),r.exported$1.testSupport(d)):this.fire(new r.ErrorEvent(new Error("Failed to initialize WebGL")))}_contextLost(B){B.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new r.Event("webglcontextlost",{originalEvent:B}))}_contextRestored(B){this._setupPainter(),this.resize(),this._update(),this.fire(new r.Event("webglcontextrestored",{originalEvent:B}))}_onMapScroll(B){if(B.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1}_onCooperativeGesture(B,d,I){return!d&&I<2&&(this._cooperativeGesturesScreen.classList.add("maplibregl-show"),setTimeout(()=>{this._cooperativeGesturesScreen.classList.remove("maplibregl-show")},100)),!1}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(B){return this.style?(this._styleDirty=this._styleDirty||B,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(B){return this._update(),this._renderTaskQueue.add(B)}_cancelRenderFrame(B){this._renderTaskQueue.remove(B)}_render(B){let d,I=0;const D=this.painter.context.extTimerQuery;if(this.listens("gpu-timing-frame")&&(d=D.createQueryEXT(),D.beginQueryEXT(D.TIME_ELAPSED_EXT,d),I=r.exported.now()),this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(B),this._removed)return;let z=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;const ne=this.transform.zoom,pe=r.exported.now();this.style.zoomHistory.update(ne,pe);const ye=new r.EvaluationParameters(ne,{now:pe,fadeDuration:this._fadeDuration,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),Se=ye.crossFadingFactor();Se===1&&Se===this._crossFadingFactor||(z=!0,this._crossFadingFactor=Se),this.style.update(ye)}if(this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.style.terrain&&this.style.terrain.sourceCache.update(this.transform,this.style.terrain),this.transform.updateElevation(this.style.terrain),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,this._fadeDuration,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:this._fadeDuration,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer")}),this.fire(new r.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,r.PerformanceUtils.mark(r.PerformanceMarkers.load),this.fire(new r.Event("load"))),this.style&&(this.style.hasTransitions()||z)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),this.listens("gpu-timing-frame")){const ne=r.exported.now()-I;D.endQueryEXT(D.TIME_ELAPSED_EXT,d),setTimeout(()=>{const pe=D.getQueryObjectEXT(d,D.QUERY_RESULT_EXT)/1e6;D.deleteQueryEXT(d),this.fire(new r.Event("gpu-timing-frame",{cpuTime:ne,gpuTime:pe}))},50)}if(this.listens("gpu-timing-layer")){const ne=this.painter.collectGpuTimers();setTimeout(()=>{const pe=this.painter.queryGpuTimers(ne);this.fire(new r.Event("gpu-timing-layer",{layerTimes:pe}))},50)}const W=this._sourcesDirty||this._styleDirty||this._placementDirty;return W||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new r.Event("idle")),!this._loaded||this._fullyLoaded||W||(this._fullyLoaded=!0,r.PerformanceUtils.mark(r.PerformanceMarkers.fullLoad)),this}redraw(){return this.style&&(this._frame&&(this._frame.cancel(),this._frame=null),this._render(0)),this}remove(){this._hash&&this._hash.remove();for(const d of this._controls)d.onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof window<"u"&&(removeEventListener("resize",this._onWindowResize,!1),removeEventListener("orientationchange",this._onWindowResize,!1),removeEventListener("online",this._onWindowOnline,!1));const B=this.painter.context.gl.getExtension("WEBGL_lose_context");B&&B.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),w.remove(this._canvasContainer),w.remove(this._controlContainer),this._cooperativeGestures&&w.remove(this._cooperativeGesturesScreen),this._container.classList.remove("maplibregl-map","mapboxgl-map"),r.PerformanceUtils.clearMetrics(),this._removed=!0,this.fire(new r.Event("remove"))}triggerRepaint(){this.style&&!this._frame&&(this._frame=r.exported.frame(B=>{r.PerformanceUtils.frame(B),this._frame=null,this._render(B)}))}_onWindowOnline(){this._update()}_onWindowResize(B){this._trackResize&&this.resize({originalEvent:B})._update()}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(B){this._showTileBoundaries!==B&&(this._showTileBoundaries=B,this._update())}get showPadding(){return!!this._showPadding}set showPadding(B){this._showPadding!==B&&(this._showPadding=B,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(B){this._showCollisionBoxes!==B&&(this._showCollisionBoxes=B,B?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(B){this._showOverdrawInspector!==B&&(this._showOverdrawInspector=B,this._update())}get repaint(){return!!this._repaint}set repaint(B){this._repaint!==B&&(this._repaint=B,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(B){this._vertices=B,this._update()}_setCacheLimits(B,d){r.setCacheLimits(B,d)}get version(){return"2.4.0"}},NavigationControl:class{constructor(B){this.options=r.extend({},jh,B),this._container=w.create("div","maplibregl-ctrl maplibregl-ctrl-group mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",d=>d.preventDefault()),this.options.showZoom&&(r.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in mapboxgl-ctrl-zoom-in",d=>this._map.zoomIn({},{originalEvent:d})),w.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out mapboxgl-ctrl-zoom-out",d=>this._map.zoomOut({},{originalEvent:d})),w.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(r.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("maplibregl-ctrl-compass mapboxgl-ctrl-compass",d=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:d}):this._map.resetNorth({},{originalEvent:d})}),this._compassIcon=w.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}_updateZoomButtons(){const B=this._map.getZoom(),d=B===this._map.getMaxZoom(),I=B===this._map.getMinZoom();this._zoomInButton.disabled=d,this._zoomOutButton.disabled=I,this._zoomInButton.setAttribute("aria-disabled",d.toString()),this._zoomOutButton.setAttribute("aria-disabled",I.toString())}_rotateCompassArrow(){const B=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${this._map.transform.angle*(180/Math.PI)}deg)`:`rotate(${this._map.transform.angle*(180/Math.PI)}deg)`;this._compassIcon.style.transform=B}onAdd(B){return this._map=B,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new ll(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){w.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(B,d){const I=w.create("button",B,this._container);return I.type="button",I.addEventListener("click",d),I}_setButtonTitle(B,d){const I=this._map._getUIString(`NavigationControl.${d}`);B.title=I,B.setAttribute("aria-label",I)}},GeolocateControl:class extends r.Evented{constructor(B){super(),this.options=r.extend({},hc,B),r.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker"],this)}onAdd(B){var d;return this._map=B,this._container=w.create("div","maplibregl-ctrl maplibregl-ctrl-group mapboxgl-ctrl mapboxgl-ctrl-group"),d=this._setupUI,ws!==void 0?d(ws):window.navigator.permissions!==void 0?window.navigator.permissions.query({name:"geolocation"}).then(I=>{ws=I.state!=="denied",d(ws)}):(ws=!!window.navigator.geolocation,d(ws)),this._container}onRemove(){this._geolocationWatchID!==void 0&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),w.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,jo=0,Jl=!1}_isOutOfMapMaxBounds(B){const d=this._map.getMaxBounds(),I=B.coords;return d&&(I.longitude<d.getWest()||I.longitude>d.getEast()||I.latitude<d.getSouth()||I.latitude>d.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error","mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting");break;case"ACTIVE_ERROR":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}}_onSuccess(B){if(this._map){if(this._isOutOfMapMaxBounds(B))return this._setErrorState(),this.fire(new r.Event("outofmaxbounds",B)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=B,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error","mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background");break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(B),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(B),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale","mapboxgl-user-location-dot-stale"),this.fire(new r.Event("geolocate",B)),this._finish()}}_updateCamera(B){const d=new r.LngLat(B.coords.longitude,B.coords.latitude),I=B.coords.accuracy,D=this._map.getBearing(),z=r.extend({bearing:D},this.options.fitBoundsOptions);this._map.fitBounds(d.toBounds(I),z,{geolocateSource:!0})}_updateMarker(B){if(B){const d=new r.LngLat(B.coords.longitude,B.coords.latitude);this._accuracyCircleMarker.setLngLat(d).addTo(this._map),this._userLocationDotMarker.setLngLat(d).addTo(this._map),this._accuracy=B.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()}_updateCircleRadius(){const B=this._map._container.clientHeight/2,d=this._map.unproject([0,B]),I=this._map.unproject([1,B]),D=d.distanceTo(I),z=Math.ceil(2*this._accuracy/D);this._circleElement.style.width=`${z}px`,this._circleElement.style.height=`${z}px`}_onZoom(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}_onError(B){if(this._map){if(this.options.trackUserLocation)if(B.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error","mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const d=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=d,this._geolocateButton.setAttribute("aria-label",d),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(B.code===3&&Jl)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale","mapboxgl-user-location-dot-stale"),this.fire(new r.Event("error",B)),this._finish()}}_finish(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0}_setupUI(B){if(this._container.addEventListener("contextmenu",d=>d.preventDefault()),this._geolocateButton=w.create("button","maplibregl-ctrl-geolocate mapboxgl-ctrl-geolocate",this._container),w.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",B===!1){r.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");const d=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=d,this._geolocateButton.setAttribute("aria-label",d)}else{const d=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=d,this._geolocateButton.setAttribute("aria-label",d)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=w.create("div","maplibregl-user-location-dot mapboxgl-user-location-dot"),this._userLocationDotMarker=new Gu(this._dotElement),this._circleElement=w.create("div","maplibregl-user-location-accuracy-circle mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new Gu({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",d=>{d.geolocateSource||this._watchState!=="ACTIVE_LOCK"||d.originalEvent&&d.originalEvent.type==="resize"||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this.fire(new r.Event("trackuserlocationend")))})}trigger(){if(!this._setup)return r.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new r.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":jo--,Jl=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error","mapboxgl-ctrl-geolocate-background-error"),this.fire(new r.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new r.Event("trackuserlocationstart"));break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active");break;case"OFF":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let B;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),jo++,jo>1?(B={maximumAge:6e5,timeout:0},Jl=!0):(B=this.options.positionOptions,Jl=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,B)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},AttributionControl:Au,LogoControl:ku,ScaleControl:class{constructor(B){this.options=r.extend({},ul,B),r.bindAll(["_onMove","setUnit"],this)}getDefaultPosition(){return"bottom-left"}_onMove(){dh(this._map,this._container,this.options)}onAdd(B){return this._map=B,this._container=w.create("div","maplibregl-ctrl maplibregl-ctrl-scale mapboxgl-ctrl mapboxgl-ctrl-scale",B.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){w.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}setUnit(B){this.options.unit=B,dh(this._map,this._container,this.options)}},FullscreenControl:class{constructor(B){this._fullscreen=!1,B&&B.container&&(B.container instanceof HTMLElement?this._container=B.container:r.warnOnce("Full screen control 'container' must be a DOM element.")),r.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(B){return this._map=B,this._container||(this._container=this._map.getContainer()),this._controlContainer=w.create("div","maplibregl-ctrl maplibregl-ctrl-group mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",r.warnOnce("This device does not support fullscreen mode.")),this._controlContainer}onRemove(){w.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._changeIcon)}_checkFullscreenSupport(){return!!(document.fullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled||document.webkitFullscreenEnabled)}_setupUI(){const B=this._fullscreenButton=w.create("button","maplibregl-ctrl-fullscreen mapboxgl-ctrl-fullscreen",this._controlContainer);w.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",B).setAttribute("aria-hidden","true"),B.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._changeIcon)}_updateTitle(){const B=this._getTitle();this._fullscreenButton.setAttribute("aria-label",B),this._fullscreenButton.title=B}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_changeIcon(){(window.document.fullscreenElement||window.document.mozFullScreenElement||window.document.webkitFullscreenElement||window.document.msFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())}_onClickFullscreen(){this._isFullscreen()?window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.msExitFullscreen?window.document.msExitFullscreen():window.document.webkitCancelFullScreen&&window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()}},TerrainControl:class{constructor(B){this.options=B,r.bindAll(["_toggleTerrain","_updateTerrainIcon"],this)}onAdd(B){return this._map=B,this._container=w.create("div","maplibregl-ctrl maplibregl-ctrl-group mapboxgl-ctrl mapboxgl-ctrl-group"),this._terrainButton=w.create("button","maplibregl-ctrl-terrain mapboxgl-ctrl-terrain",this._container),w.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){w.remove(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}_toggleTerrain(){this._map.getTerrain()?this._map.setTerrain(null):this._map.setTerrain(this.options),this._updateTerrainIcon()}_updateTerrainIcon(){this._terrainButton.classList.remove("maplibregl-ctrl-terrain","mapboxgl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled","mapboxgl-ctrl-terrain-enabled"),this._map.style.terrain?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled","mapboxgl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.disableTerrain")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain","mapboxgl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.enableTerrain"))}},Popup:class extends r.Evented{constructor(B){super(),this.options=r.extend(Object.create(os),B),r.bindAll(["_update","_onClose","remove","_onMouseMove","_onMouseUp","_onDrag"],this)}addTo(B){return this._map&&this.remove(),this._map=B,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer","mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer","mapboxgl-track-pointer")):this._map.on("move",this._update),this.fire(new r.Event("open")),this}isOpen(){return!!this._map}remove(){return this._content&&w.remove(this._content),this._container&&(w.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),delete this._map),this.fire(new r.Event("close")),this}getLngLat(){return this._lngLat}setLngLat(B){return this._lngLat=r.LngLat.convert(B),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer","mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer","mapboxgl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer","mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer","mapboxgl-track-pointer")),this}getElement(){return this._container}setText(B){return this.setDOMContent(document.createTextNode(B))}setHTML(B){const d=document.createDocumentFragment(),I=document.createElement("body");let D;for(I.innerHTML=B;D=I.firstChild,D;)d.appendChild(D);return this.setDOMContent(d)}getMaxWidth(){return this._container&&this._container.style.maxWidth}setMaxWidth(B){return this.options.maxWidth=B,this._update(),this}setDOMContent(B){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=w.create("div","maplibregl-popup-content mapboxgl-popup-content",this._container);return this._content.appendChild(B),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(B){this._container&&this._container.classList.add(B)}removeClassName(B){this._container&&this._container.classList.remove(B)}setOffset(B){return this.options.offset=B,this._update(),this}toggleClassName(B){if(this._container)return this._container.classList.toggle(B)}_createCloseButton(){this.options.closeButton&&(this._closeButton=w.create("button","maplibregl-popup-close-button mapboxgl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_onMouseUp(B){this._update(B.point)}_onMouseMove(B){this._update(B.point)}_onDrag(B){this._update(B.point)}_update(B){if(!this._map||!this._lngLat&&!this._trackPointer||!this._content||(this._container||(this._container=w.create("div","maplibregl-popup mapboxgl-popup",this._map.getContainer()),this._tip=w.create("div","maplibregl-popup-tip mapboxgl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className&&this.options.className.split(" ").forEach(W=>this._container.classList.add(W)),this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer","mapboxgl-popup-track-pointer")),this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=cc(this._lngLat,this._pos,this._map.transform)),this._trackPointer&&!B))return;const d=this._pos=this._trackPointer&&B?B:this._map.project(this._lngLat);let I=this.options.anchor;const D=ph(this.options.offset);if(!I){const W=this._container.offsetWidth,ne=this._container.offsetHeight;let pe;pe=d.y+D.bottom.y<ne?["top"]:d.y>this._map.transform.height-ne?["bottom"]:[],d.x<W/2?pe.push("left"):d.x>this._map.transform.width-W/2&&pe.push("right"),I=pe.length===0?"bottom":pe.join("-")}const z=d.add(D[I]).round();w.setTransform(this._container,`${tr[I]} translate(${z.x}px,${z.y}px)`),yr(this._container,I,"popup")}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const B=this._container.querySelector(gs);B&&B.focus()}_onClose(){this.remove()}},Marker:Gu,Style:Qo,LngLat:r.LngLat,LngLatBounds:r.LngLatBounds,Point:r.pointGeometry,MercatorCoordinate:r.MercatorCoordinate,Evented:r.Evented,AJAXError:r.AJAXError,config:r.config,CanvasSource:Be,GeoJSONSource:Tt,ImageSource:be,RasterDEMTileSource:nt,RasterTileSource:ve,VectorTileSource:_e,VideoSource:Ce,prewarm:function(){$e().acquire($t)},clearPrewarmedResources:function(){const B=bt;B&&(B.isPreloaded()&&B.numActive()===1?(B.release($t),bt=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},get version(){return"2.4.0"},get workerCount(){return dt.workerCount},set workerCount(B){dt.workerCount=B},get maxParallelImageRequests(){return r.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(B){r.config.MAX_PARALLEL_IMAGE_REQUESTS=B},clearStorage(B){r.clearTileCache(B)},workerUrl:"",addProtocol(B,d){r.config.REGISTERED_PROTOCOLS[B]=d},removeProtocol(B){delete r.config.REGISTERED_PROTOCOLS[B]}};return ya.extend(sa,{isSafari:r.isSafari,getPerformanceMetrics:r.PerformanceUtils.getPerformanceMetrics}),sa});var m=l;return m})})(Lu);const rA=Lu.exports;var G2={};const oA={},sA=Object.freeze(Object.defineProperty({__proto__:null,default:oA},Symbol.toStringTag,{value:"Module"})),Nm=nA(sA);(function(i){/*! Fabric.js Copyright 2008-2015, Printio (Juriy Zaytsev, Maxim Chernyak) */var e=e||{version:"5.2.4"};if(i.fabric=e,typeof document<"u"&&typeof window<"u")document instanceof(typeof HTMLDocument<"u"?HTMLDocument:Document)?e.document=document:e.document=document.implementation.createHTMLDocument(""),e.window=window;else{var t=Nm,o=new t.JSDOM(decodeURIComponent("%3C!DOCTYPE%20html%3E%3Chtml%3E%3Chead%3E%3C%2Fhead%3E%3Cbody%3E%3C%2Fbody%3E%3C%2Fhtml%3E"),{features:{FetchExternalResources:["img"]},resources:"usable"}).window;e.document=o.document,e.jsdomImplForWrapper=Nm.implForWrapper,e.nodeCanvas=Nm.Canvas,e.window=o,DOMParser=e.window.DOMParser}e.isTouchSupported="ontouchstart"in e.window||"ontouchstart"in e.document||e.window&&e.window.navigator&&e.window.navigator.maxTouchPoints>0,e.isLikelyNode=typeof Buffer<"u"&&typeof window>"u",e.SHARED_ATTRIBUTES=["display","transform","fill","fill-opacity","fill-rule","opacity","stroke","stroke-dasharray","stroke-linecap","stroke-dashoffset","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","id","paint-order","vector-effect","instantiated_by_use","clip-path"],e.DPI=96,e.reNum="(?:[-+]?(?:\\d+|\\d*\\.\\d+)(?:[eE][-+]?\\d+)?)",e.commaWsp="(?:\\s+,?\\s*|,\\s*)",e.rePathCommand=/([-+]?((\d+\.\d+)|((\d+)|(\.\d+)))(?:[eE][-+]?\d+)?)/ig,e.reNonWord=/[ \n\.,;!\?\-]/,e.fontPaths={},e.iMatrix=[1,0,0,1,0,0],e.svgNS="http://www.w3.org/2000/svg",e.perfLimitSizeTotal=2097152,e.maxCacheSideLimit=4096,e.minCacheSideLimit=256,e.charWidthsCache={},e.textureSize=2048,e.disableStyleCopyPaste=!1,e.enableGLFiltering=!0,e.devicePixelRatio=e.window.devicePixelRatio||e.window.webkitDevicePixelRatio||e.window.mozDevicePixelRatio||1,e.browserShadowBlurConstant=1,e.arcToSegmentsCache={},e.boundsOfCurveCache={},e.cachesBoundsOfCurve=!0,e.forceGLPutImageData=!1,e.initFilterBackend=function(){if(e.enableGLFiltering&&e.isWebglSupported&&e.isWebglSupported(e.textureSize))return console.log("max texture size: "+e.maxTextureSize),new e.WebglFilterBackend({tileSize:e.textureSize});if(e.Canvas2dFilterBackend)return new e.Canvas2dFilterBackend},typeof document<"u"&&typeof window<"u"&&(window.fabric=e),function(){function r(x,C){if(!!this.__eventListeners[x]){var T=this.__eventListeners[x];C?T[T.indexOf(C)]=!1:e.util.array.fill(T,!1)}}function h(x,C){if(this.__eventListeners||(this.__eventListeners={}),arguments.length===1)for(var T in x)this.on(T,x[T]);else this.__eventListeners[x]||(this.__eventListeners[x]=[]),this.__eventListeners[x].push(C);return this}function y(x,C){var T=function(){C.apply(this,arguments),this.off(x,T)}.bind(this);this.on(x,T)}function b(x,C){if(arguments.length===1)for(var T in x)y.call(this,T,x[T]);else y.call(this,x,C);return this}function v(x,C){if(!this.__eventListeners)return this;if(arguments.length===0)for(x in this.__eventListeners)r.call(this,x);else if(arguments.length===1&&typeof arguments[0]=="object")for(var T in x)r.call(this,T,x[T]);else r.call(this,x,C);return this}function w(x,C){if(!this.__eventListeners)return this;var T=this.__eventListeners[x];if(!T)return this;for(var S=0,M=T.length;S<M;S++)T[S]&&T[S].call(this,C||{});return this.__eventListeners[x]=T.filter(function(O){return O!==!1}),this}e.Observable={fire:w,on:h,once:b,off:v}}(),e.Collection={_objects:[],add:function(){if(this._objects.push.apply(this._objects,arguments),this._onObjectAdded)for(var r=0,h=arguments.length;r<h;r++)this._onObjectAdded(arguments[r]);return this.renderOnAddRemove&&this.requestRenderAll(),this},insertAt:function(r,h,y){var b=this._objects;return y?b[h]=r:b.splice(h,0,r),this._onObjectAdded&&this._onObjectAdded(r),this.renderOnAddRemove&&this.requestRenderAll(),this},remove:function(){for(var r=this._objects,h,y=!1,b=0,v=arguments.length;b<v;b++)h=r.indexOf(arguments[b]),h!==-1&&(y=!0,r.splice(h,1),this._onObjectRemoved&&this._onObjectRemoved(arguments[b]));return this.renderOnAddRemove&&y&&this.requestRenderAll(),this},forEachObject:function(r,h){for(var y=this.getObjects(),b=0,v=y.length;b<v;b++)r.call(h,y[b],b,y);return this},getObjects:function(r){return typeof r>"u"?this._objects.concat():this._objects.filter(function(h){return h.type===r})},item:function(r){return this._objects[r]},isEmpty:function(){return this._objects.length===0},size:function(){return this._objects.length},contains:function(r,h){return this._objects.indexOf(r)>-1?!0:h?this._objects.some(function(y){return typeof y.contains=="function"&&y.contains(r,!0)}):!1},complexity:function(){return this._objects.reduce(function(r,h){return r+=h.complexity?h.complexity():0,r},0)}},e.CommonMethods={_setOptions:function(r){for(var h in r)this.set(h,r[h])},_initGradient:function(r,h){r&&r.colorStops&&!(r instanceof e.Gradient)&&this.set(h,new e.Gradient(r))},_initPattern:function(r,h,y){r&&r.source&&!(r instanceof e.Pattern)?this.set(h,new e.Pattern(r,y)):y&&y()},_setObject:function(r){for(var h in r)this._set(h,r[h])},set:function(r,h){return typeof r=="object"?this._setObject(r):this._set(r,h),this},_set:function(r,h){this[r]=h},toggle:function(r){var h=this.get(r);return typeof h=="boolean"&&this.set(r,!h),this},get:function(r){return this[r]}},function(r){var h=Math.sqrt,y=Math.atan2,b=Math.pow,v=Math.PI/180,w=Math.PI/2;e.util={cos:function(x){if(x===0)return 1;x<0&&(x=-x);var C=x/w;switch(C){case 1:case 3:return 0;case 2:return-1}return Math.cos(x)},sin:function(x){if(x===0)return 0;var C=x/w,T=1;switch(x<0&&(T=-1),C){case 1:return T;case 2:return 0;case 3:return-T}return Math.sin(x)},removeFromArray:function(x,C){var T=x.indexOf(C);return T!==-1&&x.splice(T,1),x},getRandomInt:function(x,C){return Math.floor(Math.random()*(C-x+1))+x},degreesToRadians:function(x){return x*v},radiansToDegrees:function(x){return x/v},rotatePoint:function(x,C,T){var S=new e.Point(x.x-C.x,x.y-C.y),M=e.util.rotateVector(S,T);return new e.Point(M.x,M.y).addEquals(C)},rotateVector:function(x,C){var T=e.util.sin(C),S=e.util.cos(C),M=x.x*S-x.y*T,O=x.x*T+x.y*S;return{x:M,y:O}},createVector:function(x,C){return new e.Point(C.x-x.x,C.y-x.y)},calcAngleBetweenVectors:function(x,C){return Math.acos((x.x*C.x+x.y*C.y)/(Math.hypot(x.x,x.y)*Math.hypot(C.x,C.y)))},getHatVector:function(x){return new e.Point(x.x,x.y).multiply(1/Math.hypot(x.x,x.y))},getBisector:function(x,C,T){var S=e.util.createVector(x,C),M=e.util.createVector(x,T),O=e.util.calcAngleBetweenVectors(S,M),V=e.util.calcAngleBetweenVectors(e.util.rotateVector(S,O),M),X=O*(V===0?1:-1)/2;return{vector:e.util.getHatVector(e.util.rotateVector(S,X)),angle:O}},projectStrokeOnPoints:function(x,C,T){var S=[],M=C.strokeWidth/2,O=C.strokeUniform?new e.Point(1/C.scaleX,1/C.scaleY):new e.Point(1,1),V=function(X){var Z=M/Math.hypot(X.x,X.y);return new e.Point(X.x*Z*O.x,X.y*Z*O.y)};return x.length<=1||x.forEach(function(X,Z){var ee=new e.Point(X.x,X.y),J,ie;Z===0?(ie=x[Z+1],J=T?V(e.util.createVector(ie,ee)).addEquals(ee):x[x.length-1]):Z===x.length-1?(J=x[Z-1],ie=T?V(e.util.createVector(J,ee)).addEquals(ee):x[0]):(J=x[Z-1],ie=x[Z+1]);var ke=e.util.getBisector(ee,J,ie),Le=ke.vector,fe=ke.angle,Te,_e;if(C.strokeLineJoin==="miter"&&(Te=-M/Math.sin(fe/2),_e=new e.Point(Le.x*Te*O.x,Le.y*Te*O.y),Math.hypot(_e.x,_e.y)/M<=C.strokeMiterLimit)){S.push(ee.add(_e)),S.push(ee.subtract(_e));return}Te=-M*Math.SQRT2,_e=new e.Point(Le.x*Te*O.x,Le.y*Te*O.y),S.push(ee.add(_e)),S.push(ee.subtract(_e))}),S},transformPoint:function(x,C,T){return T?new e.Point(C[0]*x.x+C[2]*x.y,C[1]*x.x+C[3]*x.y):new e.Point(C[0]*x.x+C[2]*x.y+C[4],C[1]*x.x+C[3]*x.y+C[5])},makeBoundingBoxFromPoints:function(x,C){if(C)for(var T=0;T<x.length;T++)x[T]=e.util.transformPoint(x[T],C);var S=[x[0].x,x[1].x,x[2].x,x[3].x],M=e.util.array.min(S),O=e.util.array.max(S),V=O-M,X=[x[0].y,x[1].y,x[2].y,x[3].y],Z=e.util.array.min(X),ee=e.util.array.max(X),J=ee-Z;return{left:M,top:Z,width:V,height:J}},invertTransform:function(x){var C=1/(x[0]*x[3]-x[1]*x[2]),T=[C*x[3],-C*x[1],-C*x[2],C*x[0]],S=e.util.transformPoint({x:x[4],y:x[5]},T,!0);return T[4]=-S.x,T[5]=-S.y,T},toFixed:function(x,C){return parseFloat(Number(x).toFixed(C))},parseUnit:function(x,C){var T=/\D{0,2}$/.exec(x),S=parseFloat(x);switch(C||(C=e.Text.DEFAULT_SVG_FONT_SIZE),T[0]){case"mm":return S*e.DPI/25.4;case"cm":return S*e.DPI/2.54;case"in":return S*e.DPI;case"pt":return S*e.DPI/72;case"pc":return S*e.DPI/72*12;case"em":return S*C;default:return S}},falseFunction:function(){return!1},getKlass:function(x,C){return x=e.util.string.camelize(x.charAt(0).toUpperCase()+x.slice(1)),e.util.resolveNamespace(C)[x]},getSvgAttributes:function(x){var C=["instantiated_by_use","style","id","class"];switch(x){case"linearGradient":C=C.concat(["x1","y1","x2","y2","gradientUnits","gradientTransform"]);break;case"radialGradient":C=C.concat(["gradientUnits","gradientTransform","cx","cy","r","fx","fy","fr"]);break;case"stop":C=C.concat(["offset","stop-color","stop-opacity"]);break}return C},resolveNamespace:function(x){if(!x)return e;var C=x.split("."),T=C.length,S,M=r||e.window;for(S=0;S<T;++S)M=M[C[S]];return M},loadImage:function(x,C,T,S){if(!x){C&&C.call(T,x);return}var M=e.util.createImage(),O=function(){C&&C.call(T,M,!1),M=M.onload=M.onerror=null};M.onload=O,M.onerror=function(){e.log("Error loading "+M.src),C&&C.call(T,null,!0),M=M.onload=M.onerror=null},x.indexOf("data")!==0&&S!==void 0&&S!==null&&(M.crossOrigin=S),x.substring(0,14)==="data:image/svg"&&(M.onload=null,e.util.loadImageInDom(M,O)),M.src=x},loadImageInDom:function(x,C){var T=e.document.createElement("div");T.style.width=T.style.height="1px",T.style.left=T.style.top="-100%",T.style.position="absolute",T.appendChild(x),e.document.querySelector("body").appendChild(T),x.onload=function(){C(),T.parentNode.removeChild(T),T=null}},enlivenObjects:function(x,C,T,S){x=x||[];var M=[],O=0,V=x.length;function X(){++O===V&&C&&C(M.filter(function(Z){return Z}))}if(!V){C&&C(M);return}x.forEach(function(Z,ee){if(!Z||!Z.type){X();return}var J=e.util.getKlass(Z.type,T);J.fromObject(Z,function(ie,ke){ke||(M[ee]=ie),S&&S(Z,ie,ke),X()})})},enlivenObjectEnlivables:function(x,C,T){var S=e.Object.ENLIVEN_PROPS.filter(function(M){return!!x[M]});e.util.enlivenObjects(S.map(function(M){return x[M]}),function(M){var O={};S.forEach(function(V,X){O[V]=M[X],C&&(C[V]=M[X])}),T&&T(O)})},enlivenPatterns:function(x,C){x=x||[];function T(){++M===O&&C&&C(S)}var S=[],M=0,O=x.length;if(!O){C&&C(S);return}x.forEach(function(V,X){V&&V.source?new e.Pattern(V,function(Z){S[X]=Z,T()}):(S[X]=V,T())})},groupSVGElements:function(x,C,T){var S;return x&&x.length===1?(typeof T<"u"&&(x[0].sourcePath=T),x[0]):(C&&(C.width&&C.height?C.centerPoint={x:C.width/2,y:C.height/2}:(delete C.width,delete C.height)),S=new e.Group(x,C),typeof T<"u"&&(S.sourcePath=T),S)},populateWithProperties:function(x,C,T){if(T&&Array.isArray(T))for(var S=0,M=T.length;S<M;S++)T[S]in x&&(C[T[S]]=x[T[S]])},createCanvasElement:function(){return e.document.createElement("canvas")},copyCanvasElement:function(x){var C=e.util.createCanvasElement();return C.width=x.width,C.height=x.height,C.getContext("2d").drawImage(x,0,0),C},toDataURL:function(x,C,T){return x.toDataURL("image/"+C,T)},createImage:function(){return e.document.createElement("img")},multiplyTransformMatrices:function(x,C,T){return[x[0]*C[0]+x[2]*C[1],x[1]*C[0]+x[3]*C[1],x[0]*C[2]+x[2]*C[3],x[1]*C[2]+x[3]*C[3],T?0:x[0]*C[4]+x[2]*C[5]+x[4],T?0:x[1]*C[4]+x[3]*C[5]+x[5]]},qrDecompose:function(x){var C=y(x[1],x[0]),T=b(x[0],2)+b(x[1],2),S=h(T),M=(x[0]*x[3]-x[2]*x[1])/S,O=y(x[0]*x[2]+x[1]*x[3],T);return{angle:C/v,scaleX:S,scaleY:M,skewX:O/v,skewY:0,translateX:x[4],translateY:x[5]}},calcRotateMatrix:function(x){if(!x.angle)return e.iMatrix.concat();var C=e.util.degreesToRadians(x.angle),T=e.util.cos(C),S=e.util.sin(C);return[T,S,-S,T,0,0]},calcDimensionsMatrix:function(x){var C=typeof x.scaleX>"u"?1:x.scaleX,T=typeof x.scaleY>"u"?1:x.scaleY,S=[x.flipX?-C:C,0,0,x.flipY?-T:T,0,0],M=e.util.multiplyTransformMatrices,O=e.util.degreesToRadians;return x.skewX&&(S=M(S,[1,0,Math.tan(O(x.skewX)),1],!0)),x.skewY&&(S=M(S,[1,Math.tan(O(x.skewY)),0,1],!0)),S},composeMatrix:function(x){var C=[1,0,0,1,x.translateX||0,x.translateY||0],T=e.util.multiplyTransformMatrices;return x.angle&&(C=T(C,e.util.calcRotateMatrix(x))),(x.scaleX!==1||x.scaleY!==1||x.skewX||x.skewY||x.flipX||x.flipY)&&(C=T(C,e.util.calcDimensionsMatrix(x))),C},resetObjectTransform:function(x){x.scaleX=1,x.scaleY=1,x.skewX=0,x.skewY=0,x.flipX=!1,x.flipY=!1,x.rotate(0)},saveObjectTransform:function(x){return{scaleX:x.scaleX,scaleY:x.scaleY,skewX:x.skewX,skewY:x.skewY,angle:x.angle,left:x.left,flipX:x.flipX,flipY:x.flipY,top:x.top}},isTransparent:function(x,C,T,S){S>0&&(C>S?C-=S:C=0,T>S?T-=S:T=0);var M=!0,O,V,X=x.getImageData(C,T,S*2||1,S*2||1),Z=X.data.length;for(O=3;O<Z&&(V=X.data[O],M=V<=0,M!==!1);O+=4);return X=null,M},parsePreserveAspectRatioAttribute:function(x){var C="meet",T="Mid",S="Mid",M=x.split(" "),O;return M&&M.length&&(C=M.pop(),C!=="meet"&&C!=="slice"?(O=C,C="meet"):M.length&&(O=M.pop())),T=O!=="none"?O.slice(1,4):"none",S=O!=="none"?O.slice(5,8):"none",{meetOrSlice:C,alignX:T,alignY:S}},clearFabricFontCache:function(x){x=(x||"").toLowerCase(),x?e.charWidthsCache[x]&&delete e.charWidthsCache[x]:e.charWidthsCache={}},limitDimsByArea:function(x,C){var T=Math.sqrt(C*x),S=Math.floor(C/T);return{x:Math.floor(T),y:S}},capValue:function(x,C,T){return Math.max(x,Math.min(C,T))},findScaleToFit:function(x,C){return Math.min(C.width/x.width,C.height/x.height)},findScaleToCover:function(x,C){return Math.max(C.width/x.width,C.height/x.height)},matrixToSVG:function(x){return"matrix("+x.map(function(C){return e.util.toFixed(C,e.Object.NUM_FRACTION_DIGITS)}).join(" ")+")"},removeTransformFromObject:function(x,C){var T=e.util.invertTransform(C),S=e.util.multiplyTransformMatrices(T,x.calcOwnMatrix());e.util.applyTransformToObject(x,S)},addTransformToObject:function(x,C){e.util.applyTransformToObject(x,e.util.multiplyTransformMatrices(C,x.calcOwnMatrix()))},applyTransformToObject:function(x,C){var T=e.util.qrDecompose(C),S=new e.Point(T.translateX,T.translateY);x.flipX=!1,x.flipY=!1,x.set("scaleX",T.scaleX),x.set("scaleY",T.scaleY),x.skewX=T.skewX,x.skewY=T.skewY,x.angle=T.angle,x.setPositionByOrigin(S,"center","center")},sizeAfterTransform:function(x,C,T){var S=x/2,M=C/2,O=[{x:-S,y:-M},{x:S,y:-M},{x:-S,y:M},{x:S,y:M}],V=e.util.calcDimensionsMatrix(T),X=e.util.makeBoundingBoxFromPoints(O,V);return{x:X.width,y:X.height}},mergeClipPaths:function(x,C){var T=x,S=C;T.inverted&&!S.inverted&&(T=C,S=x),e.util.applyTransformToObject(S,e.util.multiplyTransformMatrices(e.util.invertTransform(T.calcTransformMatrix()),S.calcTransformMatrix()));var M=T.inverted&&S.inverted;return M&&(T.inverted=S.inverted=!1),new e.Group([T],{clipPath:S,inverted:M})},hasStyleChanged:function(x,C,T){return T=T||!1,x.fill!==C.fill||x.stroke!==C.stroke||x.strokeWidth!==C.strokeWidth||x.fontSize!==C.fontSize||x.fontFamily!==C.fontFamily||x.fontWeight!==C.fontWeight||x.fontStyle!==C.fontStyle||x.deltaY!==C.deltaY||T&&(x.overline!==C.overline||x.underline!==C.underline||x.linethrough!==C.linethrough)},stylesToArray:function(T,C){for(var T=e.util.object.clone(T,!0),S=C.split(`
`),M=-1,O={},V=[],X=0;X<S.length;X++){if(!T[X]){M+=S[X].length;continue}for(var Z=0;Z<S[X].length;Z++){M++;var ee=T[X][Z];if(ee){var J=e.util.hasStyleChanged(O,ee,!0);J?V.push({start:M,end:M+1,style:ee}):V[V.length-1].end++}O=ee||{}}}return V},stylesFromArray:function(x,C){if(!Array.isArray(x))return x;for(var T=C.split(`
`),S=-1,M=0,O={},V=0;V<T.length;V++)for(var X=0;X<T[V].length;X++)S++,x[M]&&x[M].start<=S&&S<x[M].end&&(O[V]=O[V]||{},O[V][X]=Object.assign({},x[M].style),S===x[M].end-1&&M++);return O}}}(i),function(){var r=Array.prototype.join,h={m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7},y={m:"l",M:"L"};function b(be,Ce,Be,le,Ee,he,me,Fe,Xe,lt,Ye){var Ke=e.util.cos(be),Lt=e.util.sin(be),$t=e.util.cos(Ce),dt=e.util.sin(Ce),wt=Be*Ee*$t-le*he*dt+me,bt=le*Ee*$t+Be*he*dt+Fe,$e=lt+Xe*(-Be*Ee*Lt-le*he*Ke),Yt=Ye+Xe*(-le*Ee*Lt+Be*he*Ke),li=wt+Xe*(Be*Ee*dt+le*he*$t),Zt=bt+Xe*(le*Ee*dt-Be*he*$t);return["C",$e,Yt,li,Zt,wt,bt]}function v(be,Ce,Be,le,Ee,he,me){var Fe=Math.PI,Xe=me*Fe/180,lt=e.util.sin(Xe),Ye=e.util.cos(Xe),Ke=0,Lt=0;Be=Math.abs(Be),le=Math.abs(le);var $t=-Ye*be*.5-lt*Ce*.5,dt=-Ye*Ce*.5+lt*be*.5,wt=Be*Be,bt=le*le,$e=dt*dt,Yt=$t*$t,li=wt*bt-wt*$e-bt*Yt,Zt=0;if(li<0){var Ci=Math.sqrt(1-li/(wt*bt));Be*=Ci,le*=Ci}else Zt=(Ee===he?-1:1)*Math.sqrt(li/(wt*$e+bt*Yt));var Li=Zt*Be*dt/le,Vt=-Zt*le*$t/Be,mi=Ye*Li-lt*Vt+be*.5,Qi=lt*Li+Ye*Vt+Ce*.5,xi=w(1,0,($t-Li)/Be,(dt-Vt)/le),Jt=w(($t-Li)/Be,(dt-Vt)/le,(-$t-Li)/Be,(-dt-Vt)/le);he===0&&Jt>0?Jt-=2*Fe:he===1&&Jt<0&&(Jt+=2*Fe);for(var Me=Math.ceil(Math.abs(Jt/Fe*2)),Q=[],ae=Jt/Me,et=8/3*Math.sin(ae/4)*Math.sin(ae/4)/Math.sin(ae/2),vt=xi+ae,Wt=0;Wt<Me;Wt++)Q[Wt]=b(xi,vt,Ye,lt,Be,le,mi,Qi,et,Ke,Lt),Ke=Q[Wt][5],Lt=Q[Wt][6],xi=vt,vt+=ae;return Q}function w(be,Ce,Be,le){var Ee=Math.atan2(Ce,be),he=Math.atan2(le,Be);return he>=Ee?he-Ee:2*Math.PI-(Ee-he)}function x(be,Ce,Be,le,Ee,he,me,Fe){var Xe;if(e.cachesBoundsOfCurve&&(Xe=r.call(arguments),e.boundsOfCurveCache[Xe]))return e.boundsOfCurveCache[Xe];var lt=Math.sqrt,Ye=Math.min,Ke=Math.max,Lt=Math.abs,$t=[],dt=[[],[]],wt,bt,$e,Yt,li,Zt,Ci,Li;bt=6*be-12*Be+6*Ee,wt=-3*be+9*Be-9*Ee+3*me,$e=3*Be-3*be;for(var Vt=0;Vt<2;++Vt){if(Vt>0&&(bt=6*Ce-12*le+6*he,wt=-3*Ce+9*le-9*he+3*Fe,$e=3*le-3*Ce),Lt(wt)<1e-12){if(Lt(bt)<1e-12)continue;Yt=-$e/bt,0<Yt&&Yt<1&&$t.push(Yt);continue}Ci=bt*bt-4*$e*wt,!(Ci<0)&&(Li=lt(Ci),li=(-bt+Li)/(2*wt),0<li&&li<1&&$t.push(li),Zt=(-bt-Li)/(2*wt),0<Zt&&Zt<1&&$t.push(Zt))}for(var mi,Qi,xi=$t.length,Jt=xi,Me;xi--;)Yt=$t[xi],Me=1-Yt,mi=Me*Me*Me*be+3*Me*Me*Yt*Be+3*Me*Yt*Yt*Ee+Yt*Yt*Yt*me,dt[0][xi]=mi,Qi=Me*Me*Me*Ce+3*Me*Me*Yt*le+3*Me*Yt*Yt*he+Yt*Yt*Yt*Fe,dt[1][xi]=Qi;dt[0][Jt]=be,dt[1][Jt]=Ce,dt[0][Jt+1]=me,dt[1][Jt+1]=Fe;var Q=[{x:Ye.apply(null,dt[0]),y:Ye.apply(null,dt[1])},{x:Ke.apply(null,dt[0]),y:Ke.apply(null,dt[1])}];return e.cachesBoundsOfCurve&&(e.boundsOfCurveCache[Xe]=Q),Q}function C(be,Ce,Be){for(var le=Be[1],Ee=Be[2],he=Be[3],me=Be[4],Fe=Be[5],Xe=Be[6],lt=Be[7],Ye=v(Xe-be,lt-Ce,le,Ee,me,Fe,he),Ke=0,Lt=Ye.length;Ke<Lt;Ke++)Ye[Ke][1]+=be,Ye[Ke][2]+=Ce,Ye[Ke][3]+=be,Ye[Ke][4]+=Ce,Ye[Ke][5]+=be,Ye[Ke][6]+=Ce;return Ye}function T(be){var Ce=0,Be=0,le=be.length,Ee=0,he=0,me,Fe,Xe,lt=[],Ye,Ke,Lt;for(Fe=0;Fe<le;++Fe){switch(Xe=!1,me=be[Fe].slice(0),me[0]){case"l":me[0]="L",me[1]+=Ce,me[2]+=Be;case"L":Ce=me[1],Be=me[2];break;case"h":me[1]+=Ce;case"H":me[0]="L",me[2]=Be,Ce=me[1];break;case"v":me[1]+=Be;case"V":me[0]="L",Be=me[1],me[1]=Ce,me[2]=Be;break;case"m":me[0]="M",me[1]+=Ce,me[2]+=Be;case"M":Ce=me[1],Be=me[2],Ee=me[1],he=me[2];break;case"c":me[0]="C",me[1]+=Ce,me[2]+=Be,me[3]+=Ce,me[4]+=Be,me[5]+=Ce,me[6]+=Be;case"C":Ke=me[3],Lt=me[4],Ce=me[5],Be=me[6];break;case"s":me[0]="S",me[1]+=Ce,me[2]+=Be,me[3]+=Ce,me[4]+=Be;case"S":Ye==="C"?(Ke=2*Ce-Ke,Lt=2*Be-Lt):(Ke=Ce,Lt=Be),Ce=me[3],Be=me[4],me[0]="C",me[5]=me[3],me[6]=me[4],me[3]=me[1],me[4]=me[2],me[1]=Ke,me[2]=Lt,Ke=me[3],Lt=me[4];break;case"q":me[0]="Q",me[1]+=Ce,me[2]+=Be,me[3]+=Ce,me[4]+=Be;case"Q":Ke=me[1],Lt=me[2],Ce=me[3],Be=me[4];break;case"t":me[0]="T",me[1]+=Ce,me[2]+=Be;case"T":Ye==="Q"?(Ke=2*Ce-Ke,Lt=2*Be-Lt):(Ke=Ce,Lt=Be),me[0]="Q",Ce=me[1],Be=me[2],me[1]=Ke,me[2]=Lt,me[3]=Ce,me[4]=Be;break;case"a":me[0]="A",me[6]+=Ce,me[7]+=Be;case"A":Xe=!0,lt=lt.concat(C(Ce,Be,me)),Ce=me[6],Be=me[7];break;case"z":case"Z":Ce=Ee,Be=he;break}Xe||lt.push(me),Ye=me[0]}return lt}function S(be,Ce,Be,le){return Math.sqrt((Be-be)*(Be-be)+(le-Ce)*(le-Ce))}function M(be){return be*be*be}function O(be){return 3*be*be*(1-be)}function V(be){return 3*be*(1-be)*(1-be)}function X(be){return(1-be)*(1-be)*(1-be)}function Z(be,Ce,Be,le,Ee,he,me,Fe){return function(Xe){var lt=M(Xe),Ye=O(Xe),Ke=V(Xe),Lt=X(Xe);return{x:me*lt+Ee*Ye+Be*Ke+be*Lt,y:Fe*lt+he*Ye+le*Ke+Ce*Lt}}}function ee(be,Ce,Be,le,Ee,he,me,Fe){return function(Xe){var lt=1-Xe,Ye=3*lt*lt*(Be-be)+6*lt*Xe*(Ee-Be)+3*Xe*Xe*(me-Ee),Ke=3*lt*lt*(le-Ce)+6*lt*Xe*(he-le)+3*Xe*Xe*(Fe-he);return Math.atan2(Ke,Ye)}}function J(be){return be*be}function ie(be){return 2*be*(1-be)}function ke(be){return(1-be)*(1-be)}function Le(be,Ce,Be,le,Ee,he){return function(me){var Fe=J(me),Xe=ie(me),lt=ke(me);return{x:Ee*Fe+Be*Xe+be*lt,y:he*Fe+le*Xe+Ce*lt}}}function fe(be,Ce,Be,le,Ee,he){return function(me){var Fe=1-me,Xe=2*Fe*(Be-be)+2*me*(Ee-Be),lt=2*Fe*(le-Ce)+2*me*(he-le);return Math.atan2(lt,Xe)}}function Te(be,Ce,Be){var le={x:Ce,y:Be},Ee,he=0,me;for(me=1;me<=100;me+=1)Ee=be(me/100),he+=S(le.x,le.y,Ee.x,Ee.y),le=Ee;return he}function _e(be,Ce){for(var Be=0,le=0,Ee=be.iterator,he={x:be.x,y:be.y},me,Fe,Xe=.01,lt=be.angleFinder,Ye;le<Ce&&Xe>1e-4;)me=Ee(Be),Ye=Be,Fe=S(he.x,he.y,me.x,me.y),Fe+le>Ce?(Be-=Xe,Xe/=2):(he=me,Be+=Xe,le+=Fe);return me.angle=lt(Ye),me}function ve(be){for(var Ce=0,Be=be.length,le,Ee=0,he=0,me=0,Fe=0,Xe=[],lt,Ye,Ke,Lt=0;Lt<Be;Lt++){switch(le=be[Lt],Ye={x:Ee,y:he,command:le[0]},le[0]){case"M":Ye.length=0,me=Ee=le[1],Fe=he=le[2];break;case"L":Ye.length=S(Ee,he,le[1],le[2]),Ee=le[1],he=le[2];break;case"C":lt=Z(Ee,he,le[1],le[2],le[3],le[4],le[5],le[6]),Ke=ee(Ee,he,le[1],le[2],le[3],le[4],le[5],le[6]),Ye.iterator=lt,Ye.angleFinder=Ke,Ye.length=Te(lt,Ee,he),Ee=le[5],he=le[6];break;case"Q":lt=Le(Ee,he,le[1],le[2],le[3],le[4]),Ke=fe(Ee,he,le[1],le[2],le[3],le[4]),Ye.iterator=lt,Ye.angleFinder=Ke,Ye.length=Te(lt,Ee,he),Ee=le[3],he=le[4];break;case"Z":case"z":Ye.destX=me,Ye.destY=Fe,Ye.length=S(Ee,he,me,Fe),Ee=me,he=Fe;break}Ce+=Ye.length,Xe.push(Ye)}return Xe.push({length:Ce,x:Ee,y:he}),Xe}function rt(be,Ce,Be){Be||(Be=ve(be));for(var le=0;Ce-Be[le].length>0&&le<Be.length-2;)Ce-=Be[le].length,le++;var Ee=Be[le],he=Ce/Ee.length,me=Ee.command,Fe=be[le],Xe;switch(me){case"M":return{x:Ee.x,y:Ee.y,angle:0};case"Z":case"z":return Xe=new e.Point(Ee.x,Ee.y).lerp(new e.Point(Ee.destX,Ee.destY),he),Xe.angle=Math.atan2(Ee.destY-Ee.y,Ee.destX-Ee.x),Xe;case"L":return Xe=new e.Point(Ee.x,Ee.y).lerp(new e.Point(Fe[1],Fe[2]),he),Xe.angle=Math.atan2(Fe[2]-Ee.y,Fe[1]-Ee.x),Xe;case"C":return _e(Ee,Ce);case"Q":return _e(Ee,Ce)}}function nt(be){var Ce=[],Be=[],le,Ee,he=e.rePathCommand,me="[-+]?(?:\\d*\\.\\d+|\\d+\\.?)(?:[eE][-+]?\\d+)?\\s*",Fe="("+me+")"+e.commaWsp,Xe="([01])"+e.commaWsp+"?",lt=Fe+"?"+Fe+"?"+Fe+Xe+Xe+Fe+"?("+me+")",Ye=new RegExp(lt,"g"),Ke,Lt,$t;if(!be||!be.match)return Ce;$t=be.match(/[mzlhvcsqta][^mzlhvcsqta]*/gi);for(var dt=0,wt,bt=$t.length;dt<bt;dt++){le=$t[dt],Lt=le.slice(1).trim(),Be.length=0;var $e=le.charAt(0);if(wt=[$e],$e.toLowerCase()==="a")for(var Yt;Yt=Ye.exec(Lt);)for(var li=1;li<Yt.length;li++)Be.push(Yt[li]);else for(;Ke=he.exec(Lt);)Be.push(Ke[0]);for(var li=0,Zt=Be.length;li<Zt;li++)Ee=parseFloat(Be[li]),isNaN(Ee)||wt.push(Ee);var Ci=h[$e.toLowerCase()],Li=y[$e]||$e;if(wt.length-1>Ci)for(var Vt=1,mi=wt.length;Vt<mi;Vt+=Ci)Ce.push([$e].concat(wt.slice(Vt,Vt+Ci))),$e=Li;else Ce.push(wt)}return Ce}function Tt(be,Ce){var Be=[],le,Ee=new e.Point(be[0].x,be[0].y),he=new e.Point(be[1].x,be[1].y),me=be.length,Fe=1,Xe=0,lt=me>2;for(Ce=Ce||0,lt&&(Fe=be[2].x<he.x?-1:be[2].x===he.x?0:1,Xe=be[2].y<he.y?-1:be[2].y===he.y?0:1),Be.push(["M",Ee.x-Fe*Ce,Ee.y-Xe*Ce]),le=1;le<me;le++){if(!Ee.eq(he)){var Ye=Ee.midPointFrom(he);Be.push(["Q",Ee.x,Ee.y,Ye.x,Ye.y])}Ee=be[le],le+1<be.length&&(he=be[le+1])}return lt&&(Fe=Ee.x>be[le-2].x?1:Ee.x===be[le-2].x?0:-1,Xe=Ee.y>be[le-2].y?1:Ee.y===be[le-2].y?0:-1),Be.push(["L",Ee.x+Fe*Ce,Ee.y+Xe*Ce]),Be}function We(be,Ce,Be){return Be&&(Ce=e.util.multiplyTransformMatrices(Ce,[1,0,0,1,-Be.x,-Be.y])),be.map(function(le){for(var Ee=le.slice(0),he={},me=1;me<le.length-1;me+=2)he.x=le[me],he.y=le[me+1],he=e.util.transformPoint(he,Ce),Ee[me]=he.x,Ee[me+1]=he.y;return Ee})}e.util.joinPath=function(be){return be.map(function(Ce){return Ce.join(" ")}).join(" ")},e.util.parsePath=nt,e.util.makePathSimpler=T,e.util.getSmoothPathFromPoints=Tt,e.util.getPathSegmentsInfo=ve,e.util.getBoundsOfCurve=x,e.util.getPointOnPath=rt,e.util.transformPath=We}(),function(){var r=Array.prototype.slice;function h(x,C){for(var T=r.call(arguments,2),S=[],M=0,O=x.length;M<O;M++)S[M]=T.length?x[M][C].apply(x[M],T):x[M][C].call(x[M]);return S}function y(x,C){return w(x,C,function(T,S){return T>=S})}function b(x,C){return w(x,C,function(T,S){return T<S})}function v(x,C){for(var T=x.length;T--;)x[T]=C;return x}function w(x,C,T){if(!(!x||x.length===0)){var S=x.length-1,M=C?x[S][C]:x[S];if(C)for(;S--;)T(x[S][C],M)&&(M=x[S][C]);else for(;S--;)T(x[S],M)&&(M=x[S]);return M}}e.util.array={fill:v,invoke:h,min:b,max:y}}(),function(){function r(y,b,v){if(v)if(!e.isLikelyNode&&b instanceof Element)y=b;else if(b instanceof Array){y=[];for(var w=0,x=b.length;w<x;w++)y[w]=r({},b[w],v)}else if(b&&typeof b=="object")for(var C in b)C==="canvas"||C==="group"?y[C]=null:b.hasOwnProperty(C)&&(y[C]=r({},b[C],v));else y=b;else for(var C in b)y[C]=b[C];return y}function h(y,b){return r({},y,b)}e.util.object={extend:r,clone:h},e.util.object.extend(e.util,e.Observable)}(),function(){function r(w){return w.replace(/-+(.)?/g,function(x,C){return C?C.toUpperCase():""})}function h(w,x){return w.charAt(0).toUpperCase()+(x?w.slice(1):w.slice(1).toLowerCase())}function y(w){return w.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&apos;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function b(w){var x=0,C,T=[];for(x=0,C;x<w.length;x++)(C=v(w,x))!==!1&&T.push(C);return T}function v(w,x){var C=w.charCodeAt(x);if(isNaN(C))return"";if(C<55296||C>57343)return w.charAt(x);if(55296<=C&&C<=56319){if(w.length<=x+1)throw"High surrogate without following low surrogate";var T=w.charCodeAt(x+1);if(56320>T||T>57343)throw"High surrogate without following low surrogate";return w.charAt(x)+w.charAt(x+1)}if(x===0)throw"Low surrogate without preceding high surrogate";var S=w.charCodeAt(x-1);if(55296>S||S>56319)throw"Low surrogate without preceding high surrogate";return!1}e.util.string={camelize:r,capitalize:h,escapeXml:y,graphemeSplit:b}}(),function(){var r=Array.prototype.slice,h=function(){},y=function(){for(var C in{toString:1})if(C==="toString")return!1;return!0}(),b=function(C,T,S){for(var M in T)M in C.prototype&&typeof C.prototype[M]=="function"&&(T[M]+"").indexOf("callSuper")>-1?C.prototype[M]=function(O){return function(){var V=this.constructor.superclass;this.constructor.superclass=S;var X=T[O].apply(this,arguments);if(this.constructor.superclass=V,O!=="initialize")return X}}(M):C.prototype[M]=T[M],y&&(T.toString!==Object.prototype.toString&&(C.prototype.toString=T.toString),T.valueOf!==Object.prototype.valueOf&&(C.prototype.valueOf=T.valueOf))};function v(){}function w(C){for(var T=null,S=this;S.constructor.superclass;){var M=S.constructor.superclass.prototype[C];if(S[C]!==M){T=M;break}S=S.constructor.superclass.prototype}return T?arguments.length>1?T.apply(this,r.call(arguments,1)):T.call(this):console.log("tried to callSuper "+C+", method not found in prototype chain",this)}function x(){var C=null,T=r.call(arguments,0);typeof T[0]=="function"&&(C=T.shift());function S(){this.initialize.apply(this,arguments)}S.superclass=C,S.subclasses=[],C&&(v.prototype=C.prototype,S.prototype=new v,C.subclasses.push(S));for(var M=0,O=T.length;M<O;M++)b(S,T[M],C);return S.prototype.initialize||(S.prototype.initialize=h),S.prototype.constructor=S,S.prototype.callSuper=w,S}e.util.createClass=x}(),function(){var r=!!e.document.createElement("div").attachEvent,h=["touchstart","touchmove","touchend"];e.util.addListener=function(b,v,w,x){b&&b.addEventListener(v,w,r?!1:x)},e.util.removeListener=function(b,v,w,x){b&&b.removeEventListener(v,w,r?!1:x)};function y(b){var v=b.changedTouches;return v&&v[0]?v[0]:b}e.util.getPointer=function(b){var v=b.target,w=e.util.getScrollLeftTop(v),x=y(b);return{x:x.clientX+w.left,y:x.clientY+w.top}},e.util.isTouchEvent=function(b){return h.indexOf(b.type)>-1||b.pointerType==="touch"}}(),function(){function r(x,C){var T=x.style;if(!T)return x;if(typeof C=="string")return x.style.cssText+=";"+C,C.indexOf("opacity")>-1?w(x,C.match(/opacity:\s*(\d?\.?\d*)/)[1]):x;for(var S in C)if(S==="opacity")w(x,C[S]);else{var M=S==="float"||S==="cssFloat"?typeof T.styleFloat>"u"?"cssFloat":"styleFloat":S;T.setProperty(M,C[S])}return x}var h=e.document.createElement("div"),y=typeof h.style.opacity=="string",b=typeof h.style.filter=="string",v=/alpha\s*\(\s*opacity\s*=\s*([^\)]+)\)/,w=function(x){return x};y?w=function(x,C){return x.style.opacity=C,x}:b&&(w=function(x,C){var T=x.style;return x.currentStyle&&!x.currentStyle.hasLayout&&(T.zoom=1),v.test(T.filter)?(C=C>=.9999?"":"alpha(opacity="+C*100+")",T.filter=T.filter.replace(v,C)):T.filter+=" alpha(opacity="+C*100+")",x}),e.util.setStyle=r}(),function(){var r=Array.prototype.slice;function h(X){return typeof X=="string"?e.document.getElementById(X):X}var y,b=function(X){return r.call(X,0)};try{y=b(e.document.childNodes)instanceof Array}catch{}y||(b=function(X){for(var Z=new Array(X.length),ee=X.length;ee--;)Z[ee]=X[ee];return Z});function v(X,Z){var ee=e.document.createElement(X);for(var J in Z)J==="class"?ee.className=Z[J]:J==="for"?ee.htmlFor=Z[J]:ee.setAttribute(J,Z[J]);return ee}function w(X,Z){X&&(" "+X.className+" ").indexOf(" "+Z+" ")===-1&&(X.className+=(X.className?" ":"")+Z)}function x(X,Z,ee){return typeof Z=="string"&&(Z=v(Z,ee)),X.parentNode&&X.parentNode.replaceChild(Z,X),Z.appendChild(X),Z}function C(X){for(var Z=0,ee=0,J=e.document.documentElement,ie=e.document.body||{scrollLeft:0,scrollTop:0};X&&(X.parentNode||X.host)&&(X=X.parentNode||X.host,X===e.document?(Z=ie.scrollLeft||J.scrollLeft||0,ee=ie.scrollTop||J.scrollTop||0):(Z+=X.scrollLeft||0,ee+=X.scrollTop||0),!(X.nodeType===1&&X.style.position==="fixed")););return{left:Z,top:ee}}function T(X){var Z,ee=X&&X.ownerDocument,J={left:0,top:0},ie={left:0,top:0},ke,Le={borderLeftWidth:"left",borderTopWidth:"top",paddingLeft:"left",paddingTop:"top"};if(!ee)return ie;for(var fe in Le)ie[Le[fe]]+=parseInt(S(X,fe),10)||0;return Z=ee.documentElement,typeof X.getBoundingClientRect<"u"&&(J=X.getBoundingClientRect()),ke=C(X),{left:J.left+ke.left-(Z.clientLeft||0)+ie.left,top:J.top+ke.top-(Z.clientTop||0)+ie.top}}var S;e.document.defaultView&&e.document.defaultView.getComputedStyle?S=function(X,Z){var ee=e.document.defaultView.getComputedStyle(X,null);return ee?ee[Z]:void 0}:S=function(X,Z){var ee=X.style[Z];return!ee&&X.currentStyle&&(ee=X.currentStyle[Z]),ee},function(){var X=e.document.documentElement.style,Z="userSelect"in X?"userSelect":"MozUserSelect"in X?"MozUserSelect":"WebkitUserSelect"in X?"WebkitUserSelect":"KhtmlUserSelect"in X?"KhtmlUserSelect":"";function ee(ie){return typeof ie.onselectstart<"u"&&(ie.onselectstart=e.util.falseFunction),Z?ie.style[Z]="none":typeof ie.unselectable=="string"&&(ie.unselectable="on"),ie}function J(ie){return typeof ie.onselectstart<"u"&&(ie.onselectstart=null),Z?ie.style[Z]="":typeof ie.unselectable=="string"&&(ie.unselectable=""),ie}e.util.makeElementUnselectable=ee,e.util.makeElementSelectable=J}();function M(X){var Z=e.jsdomImplForWrapper(X);return Z._canvas||Z._image}function O(X){if(!!e.isLikelyNode){var Z=e.jsdomImplForWrapper(X);Z&&(Z._image=null,Z._canvas=null,Z._currentSrc=null,Z._attributes=null,Z._classList=null)}}function V(X,Z){X.imageSmoothingEnabled=X.imageSmoothingEnabled||X.webkitImageSmoothingEnabled||X.mozImageSmoothingEnabled||X.msImageSmoothingEnabled||X.oImageSmoothingEnabled,X.imageSmoothingEnabled=Z}e.util.setImageSmoothing=V,e.util.getById=h,e.util.toArray=b,e.util.addClass=w,e.util.makeElement=v,e.util.wrapElement=x,e.util.getScrollLeftTop=C,e.util.getElementOffset=T,e.util.getNodeCanvas=M,e.util.cleanUpJsdomNode=O}(),function(){function r(b,v){return b+(/\?/.test(b)?"&":"?")+v}function h(){}function y(b,v){v||(v={});var w=v.method?v.method.toUpperCase():"GET",x=v.onComplete||function(){},C=new e.window.XMLHttpRequest,T=v.body||v.parameters;return C.onreadystatechange=function(){C.readyState===4&&(x(C),C.onreadystatechange=h)},w==="GET"&&(T=null,typeof v.parameters=="string"&&(b=r(b,v.parameters))),C.open(w,b,!0),(w==="POST"||w==="PUT")&&C.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),C.send(T),C}e.util.request=y}(),e.log=console.log,e.warn=console.warn,function(){var r=e.util.object.extend,h=e.util.object.clone,y=[];e.util.object.extend(y,{cancelAll:function(){var M=this.splice(0);return M.forEach(function(O){O.cancel()}),M},cancelByCanvas:function(M){if(!M)return[];var O=this.filter(function(V){return typeof V.target=="object"&&V.target.canvas===M});return O.forEach(function(V){V.cancel()}),O},cancelByTarget:function(M){var O=this.findAnimationsByTarget(M);return O.forEach(function(V){V.cancel()}),O},findAnimationIndex:function(M){return this.indexOf(this.findAnimation(M))},findAnimation:function(M){return this.find(function(O){return O.cancel===M})},findAnimationsByTarget:function(M){return M?this.filter(function(O){return O.target===M}):[]}});function b(){return!1}function v(M,O,V,X){return-V*Math.cos(M/X*(Math.PI/2))+V+O}function w(M){M||(M={});var O=!1,V,X=function(){var Z=e.runningAnimations.indexOf(V);return Z>-1&&e.runningAnimations.splice(Z,1)[0]};return V=r(h(M),{cancel:function(){return O=!0,X()},currentValue:"startValue"in M?M.startValue:0,completionRate:0,durationRate:0}),e.runningAnimations.push(V),T(function(Z){var ee=Z||+new Date,J=M.duration||500,ie=ee+J,ke,Le=M.onChange||b,fe=M.abort||b,Te=M.onComplete||b,_e=M.easing||v,ve="startValue"in M?M.startValue.length>0:!1,rt="startValue"in M?M.startValue:0,nt="endValue"in M?M.endValue:100,Tt=M.byValue||(ve?rt.map(function(We,be){return nt[be]-rt[be]}):nt-rt);M.onStart&&M.onStart(),function We(be){ke=be||+new Date;var Ce=ke>ie?J:ke-ee,Be=Ce/J,le=ve?rt.map(function(he,me){return _e(Ce,rt[me],Tt[me],J)}):_e(Ce,rt,Tt,J),Ee=Math.abs(ve?(le[0]-rt[0])/Tt[0]:(le-rt)/Tt);if(V.currentValue=ve?le.slice():le,V.completionRate=Ee,V.durationRate=Be,!O){if(fe(le,Ee,Be)){X();return}if(ke>ie){V.currentValue=ve?nt.slice():nt,V.completionRate=1,V.durationRate=1,Le(ve?nt.slice():nt,1,1),Te(nt,1,1),X();return}else Le(le,Ee,Be),T(We)}}(ee)}),V.cancel}var x=e.window.requestAnimationFrame||e.window.webkitRequestAnimationFrame||e.window.mozRequestAnimationFrame||e.window.oRequestAnimationFrame||e.window.msRequestAnimationFrame||function(M){return e.window.setTimeout(M,1e3/60)},C=e.window.cancelAnimationFrame||e.window.clearTimeout;function T(){return x.apply(e.window,arguments)}function S(){return C.apply(e.window,arguments)}e.util.animate=w,e.util.requestAnimFrame=T,e.util.cancelAnimFrame=S,e.runningAnimations=y}(),function(){function r(y,b,v){var w="rgba("+parseInt(y[0]+v*(b[0]-y[0]),10)+","+parseInt(y[1]+v*(b[1]-y[1]),10)+","+parseInt(y[2]+v*(b[2]-y[2]),10);return w+=","+(y&&b?parseFloat(y[3]+v*(b[3]-y[3])):1),w+=")",w}function h(y,b,v,w){var x=new e.Color(y).getSource(),C=new e.Color(b).getSource(),T=w.onComplete,S=w.onChange;return w=w||{},e.util.animate(e.util.object.extend(w,{duration:v||500,startValue:x,endValue:C,byValue:C,easing:function(M,O,V,X){var Z=w.colorEasing?w.colorEasing(M,X):1-Math.cos(M/X*(Math.PI/2));return r(O,V,Z)},onComplete:function(M,O,V){if(T)return T(r(C,C,0),O,V)},onChange:function(M,O,V){if(S){if(Array.isArray(M))return S(r(M,M,0),O,V);S(M,O,V)}}}))}e.util.animateColor=h}(),function(){function r(be,Ce,Be,le){return be<Math.abs(Ce)?(be=Ce,le=Be/4):Ce===0&&be===0?le=Be/(2*Math.PI)*Math.asin(1):le=Be/(2*Math.PI)*Math.asin(Ce/be),{a:be,c:Ce,p:Be,s:le}}function h(be,Ce,Be){return be.a*Math.pow(2,10*(Ce-=1))*Math.sin((Ce*Be-be.s)*(2*Math.PI)/be.p)}function y(be,Ce,Be,le){return Be*((be=be/le-1)*be*be+1)+Ce}function b(be,Ce,Be,le){return be/=le/2,be<1?Be/2*be*be*be+Ce:Be/2*((be-=2)*be*be+2)+Ce}function v(be,Ce,Be,le){return Be*(be/=le)*be*be*be+Ce}function w(be,Ce,Be,le){return-Be*((be=be/le-1)*be*be*be-1)+Ce}function x(be,Ce,Be,le){return be/=le/2,be<1?Be/2*be*be*be*be+Ce:-Be/2*((be-=2)*be*be*be-2)+Ce}function C(be,Ce,Be,le){return Be*(be/=le)*be*be*be*be+Ce}function T(be,Ce,Be,le){return Be*((be=be/le-1)*be*be*be*be+1)+Ce}function S(be,Ce,Be,le){return be/=le/2,be<1?Be/2*be*be*be*be*be+Ce:Be/2*((be-=2)*be*be*be*be+2)+Ce}function M(be,Ce,Be,le){return-Be*Math.cos(be/le*(Math.PI/2))+Be+Ce}function O(be,Ce,Be,le){return Be*Math.sin(be/le*(Math.PI/2))+Ce}function V(be,Ce,Be,le){return-Be/2*(Math.cos(Math.PI*be/le)-1)+Ce}function X(be,Ce,Be,le){return be===0?Ce:Be*Math.pow(2,10*(be/le-1))+Ce}function Z(be,Ce,Be,le){return be===le?Ce+Be:Be*(-Math.pow(2,-10*be/le)+1)+Ce}function ee(be,Ce,Be,le){return be===0?Ce:be===le?Ce+Be:(be/=le/2,be<1?Be/2*Math.pow(2,10*(be-1))+Ce:Be/2*(-Math.pow(2,-10*--be)+2)+Ce)}function J(be,Ce,Be,le){return-Be*(Math.sqrt(1-(be/=le)*be)-1)+Ce}function ie(be,Ce,Be,le){return Be*Math.sqrt(1-(be=be/le-1)*be)+Ce}function ke(be,Ce,Be,le){return be/=le/2,be<1?-Be/2*(Math.sqrt(1-be*be)-1)+Ce:Be/2*(Math.sqrt(1-(be-=2)*be)+1)+Ce}function Le(be,Ce,Be,le){var Ee=1.70158,he=0,me=Be;if(be===0)return Ce;if(be/=le,be===1)return Ce+Be;he||(he=le*.3);var Fe=r(me,Be,he,Ee);return-h(Fe,be,le)+Ce}function fe(be,Ce,Be,le){var Ee=1.70158,he=0,me=Be;if(be===0)return Ce;if(be/=le,be===1)return Ce+Be;he||(he=le*.3);var Fe=r(me,Be,he,Ee);return Fe.a*Math.pow(2,-10*be)*Math.sin((be*le-Fe.s)*(2*Math.PI)/Fe.p)+Fe.c+Ce}function Te(be,Ce,Be,le){var Ee=1.70158,he=0,me=Be;if(be===0)return Ce;if(be/=le/2,be===2)return Ce+Be;he||(he=le*(.3*1.5));var Fe=r(me,Be,he,Ee);return be<1?-.5*h(Fe,be,le)+Ce:Fe.a*Math.pow(2,-10*(be-=1))*Math.sin((be*le-Fe.s)*(2*Math.PI)/Fe.p)*.5+Fe.c+Ce}function _e(be,Ce,Be,le,Ee){return Ee===void 0&&(Ee=1.70158),Be*(be/=le)*be*((Ee+1)*be-Ee)+Ce}function ve(be,Ce,Be,le,Ee){return Ee===void 0&&(Ee=1.70158),Be*((be=be/le-1)*be*((Ee+1)*be+Ee)+1)+Ce}function rt(be,Ce,Be,le,Ee){return Ee===void 0&&(Ee=1.70158),be/=le/2,be<1?Be/2*(be*be*(((Ee*=1.525)+1)*be-Ee))+Ce:Be/2*((be-=2)*be*(((Ee*=1.525)+1)*be+Ee)+2)+Ce}function nt(be,Ce,Be,le){return Be-Tt(le-be,0,Be,le)+Ce}function Tt(be,Ce,Be,le){return(be/=le)<1/2.75?Be*(7.5625*be*be)+Ce:be<2/2.75?Be*(7.5625*(be-=1.5/2.75)*be+.75)+Ce:be<2.5/2.75?Be*(7.5625*(be-=2.25/2.75)*be+.9375)+Ce:Be*(7.5625*(be-=2.625/2.75)*be+.984375)+Ce}function We(be,Ce,Be,le){return be<le/2?nt(be*2,0,Be,le)*.5+Ce:Tt(be*2-le,0,Be,le)*.5+Be*.5+Ce}e.util.ease={easeInQuad:function(be,Ce,Be,le){return Be*(be/=le)*be+Ce},easeOutQuad:function(be,Ce,Be,le){return-Be*(be/=le)*(be-2)+Ce},easeInOutQuad:function(be,Ce,Be,le){return be/=le/2,be<1?Be/2*be*be+Ce:-Be/2*(--be*(be-2)-1)+Ce},easeInCubic:function(be,Ce,Be,le){return Be*(be/=le)*be*be+Ce},easeOutCubic:y,easeInOutCubic:b,easeInQuart:v,easeOutQuart:w,easeInOutQuart:x,easeInQuint:C,easeOutQuint:T,easeInOutQuint:S,easeInSine:M,easeOutSine:O,easeInOutSine:V,easeInExpo:X,easeOutExpo:Z,easeInOutExpo:ee,easeInCirc:J,easeOutCirc:ie,easeInOutCirc:ke,easeInElastic:Le,easeOutElastic:fe,easeInOutElastic:Te,easeInBack:_e,easeOutBack:ve,easeInOutBack:rt,easeInBounce:nt,easeOutBounce:Tt,easeInOutBounce:We}}(),function(r){var h=r.fabric||(r.fabric={}),y=h.util.object.extend,b=h.util.object.clone,v=h.util.toFixed,w=h.util.parseUnit,x=h.util.multiplyTransformMatrices,C=["path","circle","polygon","polyline","ellipse","rect","line","image","text"],T=["symbol","image","marker","pattern","view","svg"],S=["pattern","defs","symbol","metadata","clipPath","mask","desc"],M=["symbol","g","a","svg","clipPath","defs"],O={cx:"left",x:"left",r:"radius",cy:"top",y:"top",display:"visible",visibility:"visible",transform:"transformMatrix","fill-opacity":"fillOpacity","fill-rule":"fillRule","font-family":"fontFamily","font-size":"fontSize","font-style":"fontStyle","font-weight":"fontWeight","letter-spacing":"charSpacing","paint-order":"paintFirst","stroke-dasharray":"strokeDashArray","stroke-dashoffset":"strokeDashOffset","stroke-linecap":"strokeLineCap","stroke-linejoin":"strokeLineJoin","stroke-miterlimit":"strokeMiterLimit","stroke-opacity":"strokeOpacity","stroke-width":"strokeWidth","text-decoration":"textDecoration","text-anchor":"textAnchor",opacity:"opacity","clip-path":"clipPath","clip-rule":"clipRule","vector-effect":"strokeUniform","image-rendering":"imageSmoothing"},V={stroke:"strokeOpacity",fill:"fillOpacity"},X="font-size",Z="clip-path";h.svgValidTagNamesRegEx=ie(C),h.svgViewBoxElementsRegEx=ie(T),h.svgInvalidAncestorsRegEx=ie(S),h.svgValidParentsRegEx=ie(M),h.cssRules={},h.gradientDefs={},h.clipPaths={};function ee(he){return he in O?O[he]:he}function J(he,me,Fe,Xe){var lt=Array.isArray(me),Ye;if((he==="fill"||he==="stroke")&&me==="none")me="";else{if(he==="strokeUniform")return me==="non-scaling-stroke";if(he==="strokeDashArray")me==="none"?me=null:me=me.replace(/,/g," ").split(/\s+/).map(parseFloat);else if(he==="transformMatrix")Fe&&Fe.transformMatrix?me=x(Fe.transformMatrix,h.parseTransformAttribute(me)):me=h.parseTransformAttribute(me);else if(he==="visible")me=me!=="none"&&me!=="hidden",Fe&&Fe.visible===!1&&(me=!1);else if(he==="opacity")me=parseFloat(me),Fe&&typeof Fe.opacity<"u"&&(me*=Fe.opacity);else if(he==="textAnchor")me=me==="start"?"left":me==="end"?"right":"center";else if(he==="charSpacing")Ye=w(me,Xe)/Xe*1e3;else if(he==="paintFirst"){var Ke=me.indexOf("fill"),Lt=me.indexOf("stroke"),me="fill";(Ke>-1&&Lt>-1&&Lt<Ke||Ke===-1&&Lt>-1)&&(me="stroke")}else{if(he==="href"||he==="xlink:href"||he==="font")return me;if(he==="imageSmoothing")return me==="optimizeQuality";Ye=lt?me.map(w):w(me,Xe)}}return!lt&&isNaN(Ye)?me:Ye}function ie(he){return new RegExp("^("+he.join("|")+")\\b","i")}function ke(he){for(var me in V)if(!(typeof he[V[me]]>"u"||he[me]==="")){if(typeof he[me]>"u"){if(!h.Object.prototype[me])continue;he[me]=h.Object.prototype[me]}if(he[me].indexOf("url(")!==0){var Fe=new h.Color(he[me]);he[me]=Fe.setAlpha(v(Fe.getAlpha()*he[V[me]],2)).toRgba()}}return he}function Le(he,me){var Fe,Xe=[],lt,Ye,Ke;for(Ye=0,Ke=me.length;Ye<Ke;Ye++)Fe=me[Ye],lt=he.getElementsByTagName(Fe),Xe=Xe.concat(Array.prototype.slice.call(lt));return Xe}h.parseTransformAttribute=function(){function he(Vt,mi){var Qi=h.util.cos(mi[0]),xi=h.util.sin(mi[0]),Jt=0,Me=0;mi.length===3&&(Jt=mi[1],Me=mi[2]),Vt[0]=Qi,Vt[1]=xi,Vt[2]=-xi,Vt[3]=Qi,Vt[4]=Jt-(Qi*Jt-xi*Me),Vt[5]=Me-(xi*Jt+Qi*Me)}function me(Vt,mi){var Qi=mi[0],xi=mi.length===2?mi[1]:mi[0];Vt[0]=Qi,Vt[3]=xi}function Fe(Vt,mi,Qi){Vt[Qi]=Math.tan(h.util.degreesToRadians(mi[0]))}function Xe(Vt,mi){Vt[4]=mi[0],mi.length===2&&(Vt[5]=mi[1])}var lt=h.iMatrix,Ye=h.reNum,Ke=h.commaWsp,Lt="(?:(skewX)\\s*\\(\\s*("+Ye+")\\s*\\))",$t="(?:(skewY)\\s*\\(\\s*("+Ye+")\\s*\\))",dt="(?:(rotate)\\s*\\(\\s*("+Ye+")(?:"+Ke+"("+Ye+")"+Ke+"("+Ye+"))?\\s*\\))",wt="(?:(scale)\\s*\\(\\s*("+Ye+")(?:"+Ke+"("+Ye+"))?\\s*\\))",bt="(?:(translate)\\s*\\(\\s*("+Ye+")(?:"+Ke+"("+Ye+"))?\\s*\\))",$e="(?:(matrix)\\s*\\(\\s*("+Ye+")"+Ke+"("+Ye+")"+Ke+"("+Ye+")"+Ke+"("+Ye+")"+Ke+"("+Ye+")"+Ke+"("+Ye+")\\s*\\))",Yt="(?:"+$e+"|"+bt+"|"+wt+"|"+dt+"|"+Lt+"|"+$t+")",li="(?:"+Yt+"(?:"+Ke+"*"+Yt+")*)",Zt="^\\s*(?:"+li+"?)\\s*$",Ci=new RegExp(Zt),Li=new RegExp(Yt,"g");return function(Vt){var mi=lt.concat(),Qi=[];if(!Vt||Vt&&!Ci.test(Vt))return mi;Vt.replace(Li,function(Jt){var Me=new RegExp(Yt).exec(Jt).filter(function(et){return!!et}),Q=Me[1],ae=Me.slice(2).map(parseFloat);switch(Q){case"translate":Xe(mi,ae);break;case"rotate":ae[0]=h.util.degreesToRadians(ae[0]),he(mi,ae);break;case"scale":me(mi,ae);break;case"skewX":Fe(mi,ae,2);break;case"skewY":Fe(mi,ae,1);break;case"matrix":mi=ae;break}Qi.push(mi.concat()),mi=lt.concat()});for(var xi=Qi[0];Qi.length>1;)Qi.shift(),xi=h.util.multiplyTransformMatrices(xi,Qi[0]);return xi}}();function fe(he,me){var Fe,Xe;he.replace(/;\s*$/,"").split(";").forEach(function(lt){var Ye=lt.split(":");Fe=Ye[0].trim().toLowerCase(),Xe=Ye[1].trim(),me[Fe]=Xe})}function Te(he,me){var Fe,Xe;for(var lt in he)typeof he[lt]>"u"||(Fe=lt.toLowerCase(),Xe=he[lt],me[Fe]=Xe)}function _e(he,me){var Fe={};for(var Xe in h.cssRules[me])if(ve(he,Xe.split(" ")))for(var lt in h.cssRules[me][Xe])Fe[lt]=h.cssRules[me][Xe][lt];return Fe}function ve(he,me){var Fe,Xe=!0;return Fe=nt(he,me.pop()),Fe&&me.length&&(Xe=rt(he,me)),Fe&&Xe&&me.length===0}function rt(he,me){for(var Fe,Xe=!0;he.parentNode&&he.parentNode.nodeType===1&&me.length;)Xe&&(Fe=me.pop()),he=he.parentNode,Xe=nt(he,Fe);return me.length===0}function nt(he,me){var Fe=he.nodeName,Xe=he.getAttribute("class"),lt=he.getAttribute("id"),Ye,Ke;if(Ye=new RegExp("^"+Fe,"i"),me=me.replace(Ye,""),lt&&me.length&&(Ye=new RegExp("#"+lt+"(?![a-zA-Z\\-]+)","i"),me=me.replace(Ye,"")),Xe&&me.length)for(Xe=Xe.split(" "),Ke=Xe.length;Ke--;)Ye=new RegExp("\\."+Xe[Ke]+"(?![a-zA-Z\\-]+)","i"),me=me.replace(Ye,"");return me.length===0}function Tt(he,me){var Fe;if(he.getElementById&&(Fe=he.getElementById(me)),Fe)return Fe;var Xe,lt,Ye,Ke=he.getElementsByTagName("*");for(lt=0,Ye=Ke.length;lt<Ye;lt++)if(Xe=Ke[lt],me===Xe.getAttribute("id"))return Xe}function We(he){for(var me=Le(he,["use","svg:use"]),Fe=0;me.length&&Fe<me.length;){var Xe=me[Fe],lt=Xe.getAttribute("xlink:href")||Xe.getAttribute("href");if(lt===null)return;var Ye=lt.slice(1),Ke=Xe.getAttribute("x")||0,Lt=Xe.getAttribute("y")||0,$t=Tt(he,Ye).cloneNode(!0),dt=($t.getAttribute("transform")||"")+" translate("+Ke+", "+Lt+")",wt,bt=me.length,$e,Yt,li,Zt,Ci=h.svgNS;if(Ce($t),/^svg$/i.test($t.nodeName)){var Li=$t.ownerDocument.createElementNS(Ci,"g");for(Yt=0,li=$t.attributes,Zt=li.length;Yt<Zt;Yt++)$e=li.item(Yt),Li.setAttributeNS(Ci,$e.nodeName,$e.nodeValue);for(;$t.firstChild;)Li.appendChild($t.firstChild);$t=Li}for(Yt=0,li=Xe.attributes,Zt=li.length;Yt<Zt;Yt++)$e=li.item(Yt),!($e.nodeName==="x"||$e.nodeName==="y"||$e.nodeName==="xlink:href"||$e.nodeName==="href")&&($e.nodeName==="transform"?dt=$e.nodeValue+" "+dt:$t.setAttribute($e.nodeName,$e.nodeValue));$t.setAttribute("transform",dt),$t.setAttribute("instantiated_by_use","1"),$t.removeAttribute("id"),wt=Xe.parentNode,wt.replaceChild($t,Xe),me.length===bt&&Fe++}}var be=new RegExp("^\\s*("+h.reNum+"+)\\s*,?\\s*("+h.reNum+"+)\\s*,?\\s*("+h.reNum+"+)\\s*,?\\s*("+h.reNum+"+)\\s*$");function Ce(he){if(!h.svgViewBoxElementsRegEx.test(he.nodeName))return{};var me=he.getAttribute("viewBox"),Fe=1,Xe=1,lt=0,Ye=0,Ke,Lt,$t,dt,wt=he.getAttribute("width"),bt=he.getAttribute("height"),$e=he.getAttribute("x")||0,Yt=he.getAttribute("y")||0,li=he.getAttribute("preserveAspectRatio")||"",Zt=!me||!(me=me.match(be)),Ci=!wt||!bt||wt==="100%"||bt==="100%",Li=Zt&&Ci,Vt={},mi="",Qi=0,xi=0;if(Vt.width=0,Vt.height=0,Vt.toBeParsed=Li,Zt&&($e||Yt)&&he.parentNode&&he.parentNode.nodeName!=="#document"&&(mi=" translate("+w($e)+" "+w(Yt)+") ",$t=(he.getAttribute("transform")||"")+mi,he.setAttribute("transform",$t),he.removeAttribute("x"),he.removeAttribute("y")),Li)return Vt;if(Zt)return Vt.width=w(wt),Vt.height=w(bt),Vt;if(lt=-parseFloat(me[1]),Ye=-parseFloat(me[2]),Ke=parseFloat(me[3]),Lt=parseFloat(me[4]),Vt.minX=lt,Vt.minY=Ye,Vt.viewBoxWidth=Ke,Vt.viewBoxHeight=Lt,Ci?(Vt.width=Ke,Vt.height=Lt):(Vt.width=w(wt),Vt.height=w(bt),Fe=Vt.width/Ke,Xe=Vt.height/Lt),li=h.util.parsePreserveAspectRatioAttribute(li),li.alignX!=="none"&&(li.meetOrSlice==="meet"&&(Xe=Fe=Fe>Xe?Xe:Fe),li.meetOrSlice==="slice"&&(Xe=Fe=Fe>Xe?Fe:Xe),Qi=Vt.width-Ke*Fe,xi=Vt.height-Lt*Fe,li.alignX==="Mid"&&(Qi/=2),li.alignY==="Mid"&&(xi/=2),li.alignX==="Min"&&(Qi=0),li.alignY==="Min"&&(xi=0)),Fe===1&&Xe===1&&lt===0&&Ye===0&&$e===0&&Yt===0)return Vt;if(($e||Yt)&&he.parentNode.nodeName!=="#document"&&(mi=" translate("+w($e)+" "+w(Yt)+") "),$t=mi+" matrix("+Fe+" 0 0 "+Xe+" "+(lt*Fe+Qi)+" "+(Ye*Xe+xi)+") ",he.nodeName==="svg"){for(dt=he.ownerDocument.createElementNS(h.svgNS,"g");he.firstChild;)dt.appendChild(he.firstChild);he.appendChild(dt)}else dt=he,dt.removeAttribute("x"),dt.removeAttribute("y"),$t=dt.getAttribute("transform")+$t;return dt.setAttribute("transform",$t),Vt}function Be(he,me){for(;he&&(he=he.parentNode);)if(he.nodeName&&me.test(he.nodeName.replace("svg:",""))&&!he.getAttribute("instantiated_by_use"))return!0;return!1}h.parseSVGDocument=function(he,me,Fe,Xe){if(!!he){We(he);var lt=h.Object.__uid++,Ye,Ke,Lt=Ce(he),$t=h.util.toArray(he.getElementsByTagName("*"));if(Lt.crossOrigin=Xe&&Xe.crossOrigin,Lt.svgUid=lt,$t.length===0&&h.isLikelyNode){$t=he.selectNodes('//*[name(.)!="svg"]');var dt=[];for(Ye=0,Ke=$t.length;Ye<Ke;Ye++)dt[Ye]=$t[Ye];$t=dt}var wt=$t.filter(function($e){return Ce($e),h.svgValidTagNamesRegEx.test($e.nodeName.replace("svg:",""))&&!Be($e,h.svgInvalidAncestorsRegEx)});if(!wt||wt&&!wt.length){me&&me([],{});return}var bt={};$t.filter(function($e){return $e.nodeName.replace("svg:","")==="clipPath"}).forEach(function($e){var Yt=$e.getAttribute("id");bt[Yt]=h.util.toArray($e.getElementsByTagName("*")).filter(function(li){return h.svgValidTagNamesRegEx.test(li.nodeName.replace("svg:",""))})}),h.gradientDefs[lt]=h.getGradientDefs(he),h.cssRules[lt]=h.getCSSRules(he),h.clipPaths[lt]=bt,h.parseElements(wt,function($e,Yt){me&&(me($e,Lt,Yt,$t),delete h.gradientDefs[lt],delete h.cssRules[lt],delete h.clipPaths[lt])},b(Lt),Fe,Xe)}};function le(he,me){var Fe=["gradientTransform","x1","x2","y1","y2","gradientUnits","cx","cy","r","fx","fy"],Xe="xlink:href",lt=me.getAttribute(Xe).slice(1),Ye=Tt(he,lt);if(Ye&&Ye.getAttribute(Xe)&&le(he,Ye),Fe.forEach(function(Lt){Ye&&!me.hasAttribute(Lt)&&Ye.hasAttribute(Lt)&&me.setAttribute(Lt,Ye.getAttribute(Lt))}),!me.children.length)for(var Ke=Ye.cloneNode(!0);Ke.firstChild;)me.appendChild(Ke.firstChild);me.removeAttribute(Xe)}var Ee=new RegExp("(normal|italic)?\\s*(normal|small-caps)?\\s*(normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900)?\\s*("+h.reNum+"(?:px|cm|mm|em|pt|pc|in)*)(?:\\/(normal|"+h.reNum+"))?\\s+(.*)");y(h,{parseFontDeclaration:function(he,me){var Fe=he.match(Ee);if(!!Fe){var Xe=Fe[1],lt=Fe[3],Ye=Fe[4],Ke=Fe[5],Lt=Fe[6];Xe&&(me.fontStyle=Xe),lt&&(me.fontWeight=isNaN(parseFloat(lt))?lt:parseFloat(lt)),Ye&&(me.fontSize=w(Ye)),Lt&&(me.fontFamily=Lt),Ke&&(me.lineHeight=Ke==="normal"?1:Ke)}},getGradientDefs:function(he){var me=["linearGradient","radialGradient","svg:linearGradient","svg:radialGradient"],Fe=Le(he,me),Xe,lt=0,Ye={};for(lt=Fe.length;lt--;)Xe=Fe[lt],Xe.getAttribute("xlink:href")&&le(he,Xe),Ye[Xe.getAttribute("id")]=Xe;return Ye},parseAttributes:function(he,me,Fe){if(!!he){var Xe,lt={},Ye,Ke;typeof Fe>"u"&&(Fe=he.getAttribute("svgUid")),he.parentNode&&h.svgValidParentsRegEx.test(he.parentNode.nodeName)&&(lt=h.parseAttributes(he.parentNode,me,Fe));var Lt=me.reduce(function(li,Zt){return Xe=he.getAttribute(Zt),Xe&&(li[Zt]=Xe),li},{}),$t=y(_e(he,Fe),h.parseStyleAttribute(he));Lt=y(Lt,$t),$t[Z]&&he.setAttribute(Z,$t[Z]),Ye=Ke=lt.fontSize||h.Text.DEFAULT_SVG_FONT_SIZE,Lt[X]&&(Lt[X]=Ye=w(Lt[X],Ke));var dt,wt,bt={};for(var $e in Lt)dt=ee($e),wt=J(dt,Lt[$e],lt,Ye),bt[dt]=wt;bt&&bt.font&&h.parseFontDeclaration(bt.font,bt);var Yt=y(lt,bt);return h.svgValidParentsRegEx.test(he.nodeName)?Yt:ke(Yt)}},parseElements:function(he,me,Fe,Xe,lt){new h.ElementsParser(he,me,Fe,Xe,lt).parse()},parseStyleAttribute:function(he){var me={},Fe=he.getAttribute("style");return Fe&&(typeof Fe=="string"?fe(Fe,me):Te(Fe,me)),me},parsePointsAttribute:function(he){if(!he)return null;he=he.replace(/,/g," ").trim(),he=he.split(/\s+/);var me=[],Fe,Xe;for(Fe=0,Xe=he.length;Fe<Xe;Fe+=2)me.push({x:parseFloat(he[Fe]),y:parseFloat(he[Fe+1])});return me},getCSSRules:function(he){var me=he.getElementsByTagName("style"),Fe,Xe,lt={},Ye;for(Fe=0,Xe=me.length;Fe<Xe;Fe++){var Ke=me[Fe].textContent;Ke=Ke.replace(/\/\*[\s\S]*?\*\//g,""),Ke.trim()!==""&&(Ye=Ke.split("}"),Ye=Ye.filter(function(Lt){return Lt.trim()}),Ye.forEach(function(Lt){var $t=Lt.split("{"),dt={},wt=$t[1].trim(),bt=wt.split(";").filter(function(Zt){return Zt.trim()});for(Fe=0,Xe=bt.length;Fe<Xe;Fe++){var $e=bt[Fe].split(":"),Yt=$e[0].trim(),li=$e[1].trim();dt[Yt]=li}Lt=$t[0].trim(),Lt.split(",").forEach(function(Zt){Zt=Zt.replace(/^svg/i,"").trim(),Zt!==""&&(lt[Zt]?h.util.object.extend(lt[Zt],dt):lt[Zt]=h.util.object.clone(dt))})}))}return lt},loadSVGFromURL:function(he,me,Fe,Xe){he=he.replace(/^\n\s*/,"").trim(),new h.util.request(he,{method:"get",onComplete:lt});function lt(Ye){var Ke=Ye.responseXML;if(!Ke||!Ke.documentElement)return me&&me(null),!1;h.parseSVGDocument(Ke.documentElement,function(Lt,$t,dt,wt){me&&me(Lt,$t,dt,wt)},Fe,Xe)}},loadSVGFromString:function(he,me,Fe,Xe){var lt=new h.window.DOMParser,Ye=lt.parseFromString(he.trim(),"text/xml");h.parseSVGDocument(Ye.documentElement,function(Ke,Lt,$t,dt){me(Ke,Lt,$t,dt)},Fe,Xe)}})}(i),e.ElementsParser=function(r,h,y,b,v,w){this.elements=r,this.callback=h,this.options=y,this.reviver=b,this.svgUid=y&&y.svgUid||0,this.parsingOptions=v,this.regexUrl=/^url\(['"]?#([^'"]+)['"]?\)/g,this.doc=w},function(r){r.parse=function(){this.instances=new Array(this.elements.length),this.numElements=this.elements.length,this.createObjects()},r.createObjects=function(){var h=this;this.elements.forEach(function(y,b){y.setAttribute("svgUid",h.svgUid),h.createObject(y,b)})},r.findTag=function(h){return e[e.util.string.capitalize(h.tagName.replace("svg:",""))]},r.createObject=function(h,y){var b=this.findTag(h);if(b&&b.fromElement)try{b.fromElement(h,this.createCallback(y,h),this.options)}catch(v){e.log(v)}else this.checkIfDone()},r.createCallback=function(h,y){var b=this;return function(v){var w;b.resolveGradient(v,y,"fill"),b.resolveGradient(v,y,"stroke"),v instanceof e.Image&&v._originalElement&&(w=v.parsePreserveAspectRatioAttribute(y)),v._removeTransformMatrix(w),b.resolveClipPath(v,y),b.reviver&&b.reviver(y,v),b.instances[h]=v,b.checkIfDone()}},r.extractPropertyDefinition=function(h,y,b){var v=h[y],w=this.regexUrl;if(!!w.test(v)){w.lastIndex=0;var x=w.exec(v)[1];return w.lastIndex=0,e[b][this.svgUid][x]}},r.resolveGradient=function(h,y,b){var v=this.extractPropertyDefinition(h,b,"gradientDefs");if(v){var w=y.getAttribute(b+"-opacity"),x=e.Gradient.fromElement(v,h,w,this.options);h.set(b,x)}},r.createClipPathCallback=function(h,y){return function(b){b._removeTransformMatrix(),b.fillRule=b.clipRule,y.push(b)}},r.resolveClipPath=function(h,y){var b=this.extractPropertyDefinition(h,"clipPath","clipPaths"),v,w,x,C,T,S;if(b){C=[],x=e.util.invertTransform(h.calcTransformMatrix());for(var M=b[0].parentNode,O=y;O.parentNode&&O.getAttribute("clip-path")!==h.clipPath;)O=O.parentNode;O.parentNode.appendChild(M);for(var V=0;V<b.length;V++)v=b[V],w=this.findTag(v),w.fromElement(v,this.createClipPathCallback(h,C),this.options);C.length===1?b=C[0]:b=new e.Group(C),T=e.util.multiplyTransformMatrices(x,b.calcTransformMatrix()),b.clipPath&&this.resolveClipPath(b,O);var S=e.util.qrDecompose(T);b.flipX=!1,b.flipY=!1,b.set("scaleX",S.scaleX),b.set("scaleY",S.scaleY),b.angle=S.angle,b.skewX=S.skewX,b.skewY=0,b.setPositionByOrigin({x:S.translateX,y:S.translateY},"center","center"),h.clipPath=b}else delete h.clipPath},r.checkIfDone=function(){--this.numElements===0&&(this.instances=this.instances.filter(function(h){return h!=null}),this.callback(this.instances,this.elements))}}(e.ElementsParser.prototype),function(r){var h=r.fabric||(r.fabric={});if(h.Point){h.warn("fabric.Point is already defined");return}h.Point=y;function y(b,v){this.x=b,this.y=v}y.prototype={type:"point",constructor:y,add:function(b){return new y(this.x+b.x,this.y+b.y)},addEquals:function(b){return this.x+=b.x,this.y+=b.y,this},scalarAdd:function(b){return new y(this.x+b,this.y+b)},scalarAddEquals:function(b){return this.x+=b,this.y+=b,this},subtract:function(b){return new y(this.x-b.x,this.y-b.y)},subtractEquals:function(b){return this.x-=b.x,this.y-=b.y,this},scalarSubtract:function(b){return new y(this.x-b,this.y-b)},scalarSubtractEquals:function(b){return this.x-=b,this.y-=b,this},multiply:function(b){return new y(this.x*b,this.y*b)},multiplyEquals:function(b){return this.x*=b,this.y*=b,this},divide:function(b){return new y(this.x/b,this.y/b)},divideEquals:function(b){return this.x/=b,this.y/=b,this},eq:function(b){return this.x===b.x&&this.y===b.y},lt:function(b){return this.x<b.x&&this.y<b.y},lte:function(b){return this.x<=b.x&&this.y<=b.y},gt:function(b){return this.x>b.x&&this.y>b.y},gte:function(b){return this.x>=b.x&&this.y>=b.y},lerp:function(b,v){return typeof v>"u"&&(v=.5),v=Math.max(Math.min(1,v),0),new y(this.x+(b.x-this.x)*v,this.y+(b.y-this.y)*v)},distanceFrom:function(b){var v=this.x-b.x,w=this.y-b.y;return Math.sqrt(v*v+w*w)},midPointFrom:function(b){return this.lerp(b)},min:function(b){return new y(Math.min(this.x,b.x),Math.min(this.y,b.y))},max:function(b){return new y(Math.max(this.x,b.x),Math.max(this.y,b.y))},toString:function(){return this.x+","+this.y},setXY:function(b,v){return this.x=b,this.y=v,this},setX:function(b){return this.x=b,this},setY:function(b){return this.y=b,this},setFromPoint:function(b){return this.x=b.x,this.y=b.y,this},swap:function(b){var v=this.x,w=this.y;this.x=b.x,this.y=b.y,b.x=v,b.y=w},clone:function(){return new y(this.x,this.y)}}}(i),function(r){var h=r.fabric||(r.fabric={});if(h.Intersection){h.warn("fabric.Intersection is already defined");return}function y(b){this.status=b,this.points=[]}h.Intersection=y,h.Intersection.prototype={constructor:y,appendPoint:function(b){return this.points.push(b),this},appendPoints:function(b){return this.points=this.points.concat(b),this}},h.Intersection.intersectLineLine=function(b,v,w,x){var C,T=(x.x-w.x)*(b.y-w.y)-(x.y-w.y)*(b.x-w.x),S=(v.x-b.x)*(b.y-w.y)-(v.y-b.y)*(b.x-w.x),M=(x.y-w.y)*(v.x-b.x)-(x.x-w.x)*(v.y-b.y);if(M!==0){var O=T/M,V=S/M;0<=O&&O<=1&&0<=V&&V<=1?(C=new y("Intersection"),C.appendPoint(new h.Point(b.x+O*(v.x-b.x),b.y+O*(v.y-b.y)))):C=new y}else T===0||S===0?C=new y("Coincident"):C=new y("Parallel");return C},h.Intersection.intersectLinePolygon=function(b,v,w){var x=new y,C=w.length,T,S,M,O;for(O=0;O<C;O++)T=w[O],S=w[(O+1)%C],M=y.intersectLineLine(b,v,T,S),x.appendPoints(M.points);return x.points.length>0&&(x.status="Intersection"),x},h.Intersection.intersectPolygonPolygon=function(b,v){var w=new y,x=b.length,C;for(C=0;C<x;C++){var T=b[C],S=b[(C+1)%x],M=y.intersectLinePolygon(T,S,v);w.appendPoints(M.points)}return w.points.length>0&&(w.status="Intersection"),w},h.Intersection.intersectPolygonRectangle=function(b,v,w){var x=v.min(w),C=v.max(w),T=new h.Point(C.x,x.y),S=new h.Point(x.x,C.y),M=y.intersectLinePolygon(x,T,b),O=y.intersectLinePolygon(T,C,b),V=y.intersectLinePolygon(C,S,b),X=y.intersectLinePolygon(S,x,b),Z=new y;return Z.appendPoints(M.points),Z.appendPoints(O.points),Z.appendPoints(V.points),Z.appendPoints(X.points),Z.points.length>0&&(Z.status="Intersection"),Z}}(i),function(r){var h=r.fabric||(r.fabric={});if(h.Color){h.warn("fabric.Color is already defined.");return}function y(v){v?this._tryParsingColor(v):this.setSource([0,0,0,1])}h.Color=y,h.Color.prototype={_tryParsingColor:function(v){var w;v in y.colorNameMap&&(v=y.colorNameMap[v]),v==="transparent"&&(w=[255,255,255,0]),w||(w=y.sourceFromHex(v)),w||(w=y.sourceFromRgb(v)),w||(w=y.sourceFromHsl(v)),w||(w=[0,0,0,1]),w&&this.setSource(w)},_rgbToHsl:function(v,w,x){v/=255,w/=255,x/=255;var C,T,S,M=h.util.array.max([v,w,x]),O=h.util.array.min([v,w,x]);if(S=(M+O)/2,M===O)C=T=0;else{var V=M-O;switch(T=S>.5?V/(2-M-O):V/(M+O),M){case v:C=(w-x)/V+(w<x?6:0);break;case w:C=(x-v)/V+2;break;case x:C=(v-w)/V+4;break}C/=6}return[Math.round(C*360),Math.round(T*100),Math.round(S*100)]},getSource:function(){return this._source},setSource:function(v){this._source=v},toRgb:function(){var v=this.getSource();return"rgb("+v[0]+","+v[1]+","+v[2]+")"},toRgba:function(){var v=this.getSource();return"rgba("+v[0]+","+v[1]+","+v[2]+","+v[3]+")"},toHsl:function(){var v=this.getSource(),w=this._rgbToHsl(v[0],v[1],v[2]);return"hsl("+w[0]+","+w[1]+"%,"+w[2]+"%)"},toHsla:function(){var v=this.getSource(),w=this._rgbToHsl(v[0],v[1],v[2]);return"hsla("+w[0]+","+w[1]+"%,"+w[2]+"%,"+v[3]+")"},toHex:function(){var v=this.getSource(),w,x,C;return w=v[0].toString(16),w=w.length===1?"0"+w:w,x=v[1].toString(16),x=x.length===1?"0"+x:x,C=v[2].toString(16),C=C.length===1?"0"+C:C,w.toUpperCase()+x.toUpperCase()+C.toUpperCase()},toHexa:function(){var v=this.getSource(),w;return w=Math.round(v[3]*255),w=w.toString(16),w=w.length===1?"0"+w:w,this.toHex()+w.toUpperCase()},getAlpha:function(){return this.getSource()[3]},setAlpha:function(v){var w=this.getSource();return w[3]=v,this.setSource(w),this},toGrayscale:function(){var v=this.getSource(),w=parseInt((v[0]*.3+v[1]*.59+v[2]*.11).toFixed(0),10),x=v[3];return this.setSource([w,w,w,x]),this},toBlackWhite:function(v){var w=this.getSource(),x=(w[0]*.3+w[1]*.59+w[2]*.11).toFixed(0),C=w[3];return v=v||127,x=Number(x)<Number(v)?0:255,this.setSource([x,x,x,C]),this},overlayWith:function(v){v instanceof y||(v=new y(v));var w=[],x=this.getAlpha(),C=.5,T=this.getSource(),S=v.getSource(),M;for(M=0;M<3;M++)w.push(Math.round(T[M]*(1-C)+S[M]*C));return w[3]=x,this.setSource(w),this}},h.Color.reRGBa=/^rgba?\(\s*(\d{1,3}(?:\.\d+)?\%?)\s*,\s*(\d{1,3}(?:\.\d+)?\%?)\s*,\s*(\d{1,3}(?:\.\d+)?\%?)\s*(?:\s*,\s*((?:\d*\.?\d+)?)\s*)?\)$/i,h.Color.reHSLa=/^hsla?\(\s*(\d{1,3})\s*,\s*(\d{1,3}\%)\s*,\s*(\d{1,3}\%)\s*(?:\s*,\s*(\d+(?:\.\d+)?)\s*)?\)$/i,h.Color.reHex=/^#?([0-9a-f]{8}|[0-9a-f]{6}|[0-9a-f]{4}|[0-9a-f]{3})$/i,h.Color.colorNameMap={aliceblue:"#F0F8FF",antiquewhite:"#FAEBD7",aqua:"#00FFFF",aquamarine:"#7FFFD4",azure:"#F0FFFF",beige:"#F5F5DC",bisque:"#FFE4C4",black:"#000000",blanchedalmond:"#FFEBCD",blue:"#0000FF",blueviolet:"#8A2BE2",brown:"#A52A2A",burlywood:"#DEB887",cadetblue:"#5F9EA0",chartreuse:"#7FFF00",chocolate:"#D2691E",coral:"#FF7F50",cornflowerblue:"#6495ED",cornsilk:"#FFF8DC",crimson:"#DC143C",cyan:"#00FFFF",darkblue:"#00008B",darkcyan:"#008B8B",darkgoldenrod:"#B8860B",darkgray:"#A9A9A9",darkgrey:"#A9A9A9",darkgreen:"#006400",darkkhaki:"#BDB76B",darkmagenta:"#8B008B",darkolivegreen:"#556B2F",darkorange:"#FF8C00",darkorchid:"#9932CC",darkred:"#8B0000",darksalmon:"#E9967A",darkseagreen:"#8FBC8F",darkslateblue:"#483D8B",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",darkturquoise:"#00CED1",darkviolet:"#9400D3",deeppink:"#FF1493",deepskyblue:"#00BFFF",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1E90FF",firebrick:"#B22222",floralwhite:"#FFFAF0",forestgreen:"#228B22",fuchsia:"#FF00FF",gainsboro:"#DCDCDC",ghostwhite:"#F8F8FF",gold:"#FFD700",goldenrod:"#DAA520",gray:"#808080",grey:"#808080",green:"#008000",greenyellow:"#ADFF2F",honeydew:"#F0FFF0",hotpink:"#FF69B4",indianred:"#CD5C5C",indigo:"#4B0082",ivory:"#FFFFF0",khaki:"#F0E68C",lavender:"#E6E6FA",lavenderblush:"#FFF0F5",lawngreen:"#7CFC00",lemonchiffon:"#FFFACD",lightblue:"#ADD8E6",lightcoral:"#F08080",lightcyan:"#E0FFFF",lightgoldenrodyellow:"#FAFAD2",lightgray:"#D3D3D3",lightgrey:"#D3D3D3",lightgreen:"#90EE90",lightpink:"#FFB6C1",lightsalmon:"#FFA07A",lightseagreen:"#20B2AA",lightskyblue:"#87CEFA",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#B0C4DE",lightyellow:"#FFFFE0",lime:"#00FF00",limegreen:"#32CD32",linen:"#FAF0E6",magenta:"#FF00FF",maroon:"#800000",mediumaquamarine:"#66CDAA",mediumblue:"#0000CD",mediumorchid:"#BA55D3",mediumpurple:"#9370DB",mediumseagreen:"#3CB371",mediumslateblue:"#7B68EE",mediumspringgreen:"#00FA9A",mediumturquoise:"#48D1CC",mediumvioletred:"#C71585",midnightblue:"#191970",mintcream:"#F5FFFA",mistyrose:"#FFE4E1",moccasin:"#FFE4B5",navajowhite:"#FFDEAD",navy:"#000080",oldlace:"#FDF5E6",olive:"#808000",olivedrab:"#6B8E23",orange:"#FFA500",orangered:"#FF4500",orchid:"#DA70D6",palegoldenrod:"#EEE8AA",palegreen:"#98FB98",paleturquoise:"#AFEEEE",palevioletred:"#DB7093",papayawhip:"#FFEFD5",peachpuff:"#FFDAB9",peru:"#CD853F",pink:"#FFC0CB",plum:"#DDA0DD",powderblue:"#B0E0E6",purple:"#800080",rebeccapurple:"#663399",red:"#FF0000",rosybrown:"#BC8F8F",royalblue:"#4169E1",saddlebrown:"#8B4513",salmon:"#FA8072",sandybrown:"#F4A460",seagreen:"#2E8B57",seashell:"#FFF5EE",sienna:"#A0522D",silver:"#C0C0C0",skyblue:"#87CEEB",slateblue:"#6A5ACD",slategray:"#708090",slategrey:"#708090",snow:"#FFFAFA",springgreen:"#00FF7F",steelblue:"#4682B4",tan:"#D2B48C",teal:"#008080",thistle:"#D8BFD8",tomato:"#FF6347",turquoise:"#40E0D0",violet:"#EE82EE",wheat:"#F5DEB3",white:"#FFFFFF",whitesmoke:"#F5F5F5",yellow:"#FFFF00",yellowgreen:"#9ACD32"};function b(v,w,x){return x<0&&(x+=1),x>1&&(x-=1),x<1/6?v+(w-v)*6*x:x<1/2?w:x<2/3?v+(w-v)*(2/3-x)*6:v}h.Color.fromRgb=function(v){return y.fromSource(y.sourceFromRgb(v))},h.Color.sourceFromRgb=function(v){var w=v.match(y.reRGBa);if(w){var x=parseInt(w[1],10)/(/%$/.test(w[1])?100:1)*(/%$/.test(w[1])?255:1),C=parseInt(w[2],10)/(/%$/.test(w[2])?100:1)*(/%$/.test(w[2])?255:1),T=parseInt(w[3],10)/(/%$/.test(w[3])?100:1)*(/%$/.test(w[3])?255:1);return[parseInt(x,10),parseInt(C,10),parseInt(T,10),w[4]?parseFloat(w[4]):1]}},h.Color.fromRgba=y.fromRgb,h.Color.fromHsl=function(v){return y.fromSource(y.sourceFromHsl(v))},h.Color.sourceFromHsl=function(v){var w=v.match(y.reHSLa);if(!!w){var x=(parseFloat(w[1])%360+360)%360/360,C=parseFloat(w[2])/(/%$/.test(w[2])?100:1),T=parseFloat(w[3])/(/%$/.test(w[3])?100:1),S,M,O;if(C===0)S=M=O=T;else{var V=T<=.5?T*(C+1):T+C-T*C,X=T*2-V;S=b(X,V,x+1/3),M=b(X,V,x),O=b(X,V,x-1/3)}return[Math.round(S*255),Math.round(M*255),Math.round(O*255),w[4]?parseFloat(w[4]):1]}},h.Color.fromHsla=y.fromHsl,h.Color.fromHex=function(v){return y.fromSource(y.sourceFromHex(v))},h.Color.sourceFromHex=function(v){if(v.match(y.reHex)){var w=v.slice(v.indexOf("#")+1),x=w.length===3||w.length===4,C=w.length===8||w.length===4,T=x?w.charAt(0)+w.charAt(0):w.substring(0,2),S=x?w.charAt(1)+w.charAt(1):w.substring(2,4),M=x?w.charAt(2)+w.charAt(2):w.substring(4,6),O=C?x?w.charAt(3)+w.charAt(3):w.substring(6,8):"FF";return[parseInt(T,16),parseInt(S,16),parseInt(M,16),parseFloat((parseInt(O,16)/255).toFixed(2))]}},h.Color.fromSource=function(v){var w=new y;return w.setSource(v),w}}(i),function(r){var h=r.fabric||(r.fabric={}),y=["e","se","s","sw","w","nw","n","ne","e"],b=["ns","nesw","ew","nwse"],v={},w="left",x="top",C="right",T="bottom",S="center",M={top:T,bottom:x,left:C,right:w,center:S},O=h.util.radiansToDegrees,V=Math.sign||function(dt){return(dt>0)-(dt<0)||+dt};function X(dt,wt){var bt=dt.angle+O(Math.atan2(wt.y,wt.x))+360;return Math.round(bt%360/45)}function Z(dt,wt){var bt=wt.transform.target,$e=bt.canvas,Yt=h.util.object.clone(wt);Yt.target=bt,$e&&$e.fire("object:"+dt,Yt),bt.fire(dt,wt)}function ee(dt,wt){var bt=wt.canvas,$e=bt.uniScaleKey,Yt=dt[$e];return bt.uniformScaling&&!Yt||!bt.uniformScaling&&Yt}function J(dt){return dt.originX===S&&dt.originY===S}function ie(dt,wt,bt){var $e=dt.lockScalingX,Yt=dt.lockScalingY;return!!($e&&Yt||!wt&&($e||Yt)&&bt||$e&&wt==="x"||Yt&&wt==="y")}function ke(dt,wt,bt){var $e="not-allowed",Yt=ee(dt,bt),li="";if(wt.x!==0&&wt.y===0?li="x":wt.x===0&&wt.y!==0&&(li="y"),ie(bt,li,Yt))return $e;var Zt=X(bt,wt);return y[Zt]+"-resize"}function Le(dt,wt,bt){var $e="not-allowed";if(wt.x!==0&&bt.lockSkewingY||wt.y!==0&&bt.lockSkewingX)return $e;var Yt=X(bt,wt)%4;return b[Yt]+"-resize"}function fe(dt,wt,bt){return dt[bt.canvas.altActionKey]?v.skewCursorStyleHandler(dt,wt,bt):v.scaleCursorStyleHandler(dt,wt,bt)}function Te(dt,wt,bt){var $e=dt[bt.canvas.altActionKey];if(wt.x===0)return $e?"skewX":"scaleY";if(wt.y===0)return $e?"skewY":"scaleX"}function _e(dt,wt,bt){return bt.lockRotation?"not-allowed":wt.cursorStyle}function ve(dt,wt,bt,$e){return{e:dt,transform:wt,pointer:{x:bt,y:$e}}}function rt(dt){return function(wt,bt,$e,Yt){var li=bt.target,Zt=li.getCenterPoint(),Ci=li.translateToOriginPoint(Zt,bt.originX,bt.originY),Li=dt(wt,bt,$e,Yt);return li.setPositionByOrigin(Ci,bt.originX,bt.originY),Li}}function nt(dt,wt){return function(bt,$e,Yt,li){var Zt=wt(bt,$e,Yt,li);return Zt&&Z(dt,ve(bt,$e,Yt,li)),Zt}}function Tt(dt,wt,bt,$e,Yt){var li=dt.target,Zt=li.controls[dt.corner],Ci=li.canvas.getZoom(),Li=li.padding/Ci,Vt=li.toLocalPoint(new h.Point($e,Yt),wt,bt);return Vt.x>=Li&&(Vt.x-=Li),Vt.x<=-Li&&(Vt.x+=Li),Vt.y>=Li&&(Vt.y-=Li),Vt.y<=Li&&(Vt.y+=Li),Vt.x-=Zt.offsetX,Vt.y-=Zt.offsetY,Vt}function We(dt){return dt.flipX!==dt.flipY}function be(dt,wt,bt,$e,Yt){if(dt[wt]!==0){var li=dt._getTransformedDimensions()[$e],Zt=Yt/li*dt[bt];dt.set(bt,Zt)}}function Ce(dt,wt,bt,$e){var Yt=wt.target,li=Yt._getTransformedDimensions(0,Yt.skewY),Zt=Tt(wt,wt.originX,wt.originY,bt,$e),Ci=Math.abs(Zt.x*2)-li.x,Li=Yt.skewX,Vt;Ci<2?Vt=0:(Vt=O(Math.atan2(Ci/Yt.scaleX,li.y/Yt.scaleY)),wt.originX===w&&wt.originY===T&&(Vt=-Vt),wt.originX===C&&wt.originY===x&&(Vt=-Vt),We(Yt)&&(Vt=-Vt));var mi=Li!==Vt;if(mi){var Qi=Yt._getTransformedDimensions().y;Yt.set("skewX",Vt),be(Yt,"skewY","scaleY","y",Qi)}return mi}function Be(dt,wt,bt,$e){var Yt=wt.target,li=Yt._getTransformedDimensions(Yt.skewX,0),Zt=Tt(wt,wt.originX,wt.originY,bt,$e),Ci=Math.abs(Zt.y*2)-li.y,Li=Yt.skewY,Vt;Ci<2?Vt=0:(Vt=O(Math.atan2(Ci/Yt.scaleY,li.x/Yt.scaleX)),wt.originX===w&&wt.originY===T&&(Vt=-Vt),wt.originX===C&&wt.originY===x&&(Vt=-Vt),We(Yt)&&(Vt=-Vt));var mi=Li!==Vt;if(mi){var Qi=Yt._getTransformedDimensions().x;Yt.set("skewY",Vt),be(Yt,"skewX","scaleX","x",Qi)}return mi}function le(dt,wt,bt,$e){var Yt=wt.target,li=Yt.skewX,Zt,Ci=wt.originY;if(Yt.lockSkewingX)return!1;if(li===0){var Li=Tt(wt,S,S,bt,$e);Li.x>0?Zt=w:Zt=C}else li>0&&(Zt=Ci===x?w:C),li<0&&(Zt=Ci===x?C:w),We(Yt)&&(Zt=Zt===w?C:w);wt.originX=Zt;var Vt=nt("skewing",rt(Ce));return Vt(dt,wt,bt,$e)}function Ee(dt,wt,bt,$e){var Yt=wt.target,li=Yt.skewY,Zt,Ci=wt.originX;if(Yt.lockSkewingY)return!1;if(li===0){var Li=Tt(wt,S,S,bt,$e);Li.y>0?Zt=x:Zt=T}else li>0&&(Zt=Ci===w?x:T),li<0&&(Zt=Ci===w?T:x),We(Yt)&&(Zt=Zt===x?T:x);wt.originY=Zt;var Vt=nt("skewing",rt(Be));return Vt(dt,wt,bt,$e)}function he(dt,wt,bt,$e){var Yt=wt,li=Yt.target,Zt=li.translateToOriginPoint(li.getCenterPoint(),Yt.originX,Yt.originY);if(li.lockRotation)return!1;var Ci=Math.atan2(Yt.ey-Zt.y,Yt.ex-Zt.x),Li=Math.atan2($e-Zt.y,bt-Zt.x),Vt=O(Li-Ci+Yt.theta),mi=!0;if(li.snapAngle>0){var Qi=li.snapAngle,xi=li.snapThreshold||Qi,Jt=Math.ceil(Vt/Qi)*Qi,Me=Math.floor(Vt/Qi)*Qi;Math.abs(Vt-Me)<xi?Vt=Me:Math.abs(Vt-Jt)<xi&&(Vt=Jt)}return Vt<0&&(Vt=360+Vt),Vt%=360,mi=li.angle!==Vt,li.angle=Vt,mi}function me(dt,wt,bt,$e,Yt){Yt=Yt||{};var li=wt.target,Zt=li.lockScalingX,Ci=li.lockScalingY,Li=Yt.by,Vt,mi,Qi,xi,Jt=ee(dt,li),Me=ie(li,Li,Jt),Q,ae,et=wt.gestureScale;if(Me)return!1;if(et)mi=wt.scaleX*et,Qi=wt.scaleY*et;else{if(Vt=Tt(wt,wt.originX,wt.originY,bt,$e),Q=Li!=="y"?V(Vt.x):1,ae=Li!=="x"?V(Vt.y):1,wt.signX||(wt.signX=Q),wt.signY||(wt.signY=ae),li.lockScalingFlip&&(wt.signX!==Q||wt.signY!==ae))return!1;if(xi=li._getTransformedDimensions(),Jt&&!Li){var vt=Math.abs(Vt.x)+Math.abs(Vt.y),Wt=wt.original,di=Math.abs(xi.x*Wt.scaleX/li.scaleX)+Math.abs(xi.y*Wt.scaleY/li.scaleY),xn=vt/di;mi=Wt.scaleX*xn,Qi=Wt.scaleY*xn}else mi=Math.abs(Vt.x*li.scaleX/xi.x),Qi=Math.abs(Vt.y*li.scaleY/xi.y);J(wt)&&(mi*=2,Qi*=2),wt.signX!==Q&&Li!=="y"&&(wt.originX=M[wt.originX],mi*=-1,wt.signX=Q),wt.signY!==ae&&Li!=="x"&&(wt.originY=M[wt.originY],Qi*=-1,wt.signY=ae)}var Mn=li.scaleX,fn=li.scaleY;return Li?(Li==="x"&&li.set("scaleX",mi),Li==="y"&&li.set("scaleY",Qi)):(!Zt&&li.set("scaleX",mi),!Ci&&li.set("scaleY",Qi)),Mn!==li.scaleX||fn!==li.scaleY}function Fe(dt,wt,bt,$e){return me(dt,wt,bt,$e)}function Xe(dt,wt,bt,$e){return me(dt,wt,bt,$e,{by:"x"})}function lt(dt,wt,bt,$e){return me(dt,wt,bt,$e,{by:"y"})}function Ye(dt,wt,bt,$e){return dt[wt.target.canvas.altActionKey]?v.skewHandlerX(dt,wt,bt,$e):v.scalingY(dt,wt,bt,$e)}function Ke(dt,wt,bt,$e){return dt[wt.target.canvas.altActionKey]?v.skewHandlerY(dt,wt,bt,$e):v.scalingX(dt,wt,bt,$e)}function Lt(dt,wt,bt,$e){var Yt=wt.target,li=Tt(wt,wt.originX,wt.originY,bt,$e),Zt=Yt.strokeWidth/(Yt.strokeUniform?Yt.scaleX:1),Ci=J(wt)?2:1,Li=Yt.width,Vt=Math.abs(li.x*Ci/Yt.scaleX)-Zt;return Yt.set("width",Math.max(Vt,0)),Li!==Vt}function $t(dt,wt,bt,$e){var Yt=wt.target,li=bt-wt.offsetX,Zt=$e-wt.offsetY,Ci=!Yt.get("lockMovementX")&&Yt.left!==li,Li=!Yt.get("lockMovementY")&&Yt.top!==Zt;return Ci&&Yt.set("left",li),Li&&Yt.set("top",Zt),(Ci||Li)&&Z("moving",ve(dt,wt,bt,$e)),Ci||Li}v.scaleCursorStyleHandler=ke,v.skewCursorStyleHandler=Le,v.scaleSkewCursorStyleHandler=fe,v.rotationWithSnapping=nt("rotating",rt(he)),v.scalingEqually=nt("scaling",rt(Fe)),v.scalingX=nt("scaling",rt(Xe)),v.scalingY=nt("scaling",rt(lt)),v.scalingYOrSkewingX=Ye,v.scalingXOrSkewingY=Ke,v.changeWidth=nt("resizing",rt(Lt)),v.skewHandlerX=le,v.skewHandlerY=Ee,v.dragHandler=$t,v.scaleOrSkewActionName=Te,v.rotationStyleHandler=_e,v.fireEvent=Z,v.wrapWithFixedAnchor=rt,v.wrapWithFireEvent=nt,v.getLocalPoint=Tt,h.controlsUtils=v}(i),function(r){var h=r.fabric||(r.fabric={}),y=h.util.degreesToRadians,b=h.controlsUtils;function v(x,C,T,S,M){S=S||{};var O=this.sizeX||S.cornerSize||M.cornerSize,V=this.sizeY||S.cornerSize||M.cornerSize,X=typeof S.transparentCorners<"u"?S.transparentCorners:M.transparentCorners,Z=X?"stroke":"fill",ee=!X&&(S.cornerStrokeColor||M.cornerStrokeColor),J=C,ie=T,ke;x.save(),x.fillStyle=S.cornerColor||M.cornerColor,x.strokeStyle=S.cornerStrokeColor||M.cornerStrokeColor,O>V?(ke=O,x.scale(1,V/O),ie=T*O/V):V>O?(ke=V,x.scale(O/V,1),J=C*V/O):ke=O,x.lineWidth=1,x.beginPath(),x.arc(J,ie,ke/2,0,2*Math.PI,!1),x[Z](),ee&&x.stroke(),x.restore()}function w(x,C,T,S,M){S=S||{};var O=this.sizeX||S.cornerSize||M.cornerSize,V=this.sizeY||S.cornerSize||M.cornerSize,X=typeof S.transparentCorners<"u"?S.transparentCorners:M.transparentCorners,Z=X?"stroke":"fill",ee=!X&&(S.cornerStrokeColor||M.cornerStrokeColor),J=O/2,ie=V/2;x.save(),x.fillStyle=S.cornerColor||M.cornerColor,x.strokeStyle=S.cornerStrokeColor||M.cornerStrokeColor,x.lineWidth=1,x.translate(C,T),x.rotate(y(M.angle)),x[Z+"Rect"](-J,-ie,O,V),ee&&x.strokeRect(-J,-ie,O,V),x.restore()}b.renderCircleControl=v,b.renderSquareControl=w}(i),function(r){var h=r.fabric||(r.fabric={});function y(b){for(var v in b)this[v]=b[v]}h.Control=y,h.Control.prototype={visible:!0,actionName:"scale",angle:0,x:0,y:0,offsetX:0,offsetY:0,sizeX:null,sizeY:null,touchSizeX:null,touchSizeY:null,cursorStyle:"crosshair",withConnection:!1,actionHandler:function(){},mouseDownHandler:function(){},mouseUpHandler:function(){},getActionHandler:function(){return this.actionHandler},getMouseDownHandler:function(){return this.mouseDownHandler},getMouseUpHandler:function(){return this.mouseUpHandler},cursorStyleHandler:function(b,v){return v.cursorStyle},getActionName:function(b,v){return v.actionName},getVisibility:function(b,v){var w=b._controlsVisibility;return w&&typeof w[v]<"u"?w[v]:this.visible},setVisibility:function(b){this.visible=b},positionHandler:function(b,v){var w=h.util.transformPoint({x:this.x*b.x+this.offsetX,y:this.y*b.y+this.offsetY},v);return w},calcCornerCoords:function(b,v,w,x,C){var T,S,M,O,V=C?this.touchSizeX:this.sizeX,X=C?this.touchSizeY:this.sizeY;if(V&&X&&V!==X){var Z=Math.atan2(X,V),ee=Math.sqrt(V*V+X*X)/2,J=Z-h.util.degreesToRadians(b),ie=Math.PI/2-Z-h.util.degreesToRadians(b);T=ee*h.util.cos(J),S=ee*h.util.sin(J),M=ee*h.util.cos(ie),O=ee*h.util.sin(ie)}else{var ke=V&&X?V:v;ee=ke*.7071067812;var J=h.util.degreesToRadians(45-b);T=M=ee*h.util.cos(J),S=O=ee*h.util.sin(J)}return{tl:{x:w-O,y:x-M},tr:{x:w+T,y:x-S},bl:{x:w-T,y:x+S},br:{x:w+O,y:x+M}}},render:function(b,v,w,x,C){switch(x=x||{},x.cornerStyle||C.cornerStyle){case"circle":h.controlsUtils.renderCircleControl.call(this,b,v,w,x,C);break;default:h.controlsUtils.renderSquareControl.call(this,b,v,w,x,C)}}}}(i),function(){function r(w,x){var C=w.getAttribute("style"),T=w.getAttribute("offset")||0,S,M,O,V;if(T=parseFloat(T)/(/%$/.test(T)?100:1),T=T<0?0:T>1?1:T,C){var X=C.split(/\s*;\s*/);for(X[X.length-1]===""&&X.pop(),V=X.length;V--;){var Z=X[V].split(/\s*:\s*/),ee=Z[0].trim(),J=Z[1].trim();ee==="stop-color"?S=J:ee==="stop-opacity"&&(O=J)}}return S||(S=w.getAttribute("stop-color")||"rgb(0,0,0)"),O||(O=w.getAttribute("stop-opacity")),S=new e.Color(S),M=S.getAlpha(),O=isNaN(parseFloat(O))?1:parseFloat(O),O*=M*x,{offset:T,color:S.toRgb(),opacity:O}}function h(w){return{x1:w.getAttribute("x1")||0,y1:w.getAttribute("y1")||0,x2:w.getAttribute("x2")||"100%",y2:w.getAttribute("y2")||0}}function y(w){return{x1:w.getAttribute("fx")||w.getAttribute("cx")||"50%",y1:w.getAttribute("fy")||w.getAttribute("cy")||"50%",r1:0,x2:w.getAttribute("cx")||"50%",y2:w.getAttribute("cy")||"50%",r2:w.getAttribute("r")||"50%"}}var b=e.util.object.clone;e.Gradient=e.util.createClass({offsetX:0,offsetY:0,gradientTransform:null,gradientUnits:"pixels",type:"linear",initialize:function(w){w||(w={}),w.coords||(w.coords={});var x,C=this;Object.keys(w).forEach(function(T){C[T]=w[T]}),this.id?this.id+="_"+e.Object.__uid++:this.id=e.Object.__uid++,x={x1:w.coords.x1||0,y1:w.coords.y1||0,x2:w.coords.x2||0,y2:w.coords.y2||0},this.type==="radial"&&(x.r1=w.coords.r1||0,x.r2=w.coords.r2||0),this.coords=x,this.colorStops=w.colorStops.slice()},addColorStop:function(w){for(var x in w){var C=new e.Color(w[x]);this.colorStops.push({offset:parseFloat(x),color:C.toRgb(),opacity:C.getAlpha()})}return this},toObject:function(w){var x={type:this.type,coords:this.coords,colorStops:this.colorStops,offsetX:this.offsetX,offsetY:this.offsetY,gradientUnits:this.gradientUnits,gradientTransform:this.gradientTransform?this.gradientTransform.concat():this.gradientTransform};return e.util.populateWithProperties(this,x,w),x},toSVG:function(w,M){var C=b(this.coords,!0),T,S,M=M||{},O,V,X=b(this.colorStops,!0),Z=C.r1>C.r2,ee=this.gradientTransform?this.gradientTransform.concat():e.iMatrix.concat(),J=-this.offsetX,ie=-this.offsetY,ke=!!M.additionalTransform,Le=this.gradientUnits==="pixels"?"userSpaceOnUse":"objectBoundingBox";if(X.sort(function(rt,nt){return rt.offset-nt.offset}),Le==="objectBoundingBox"?(J/=w.width,ie/=w.height):(J+=w.width/2,ie+=w.height/2),w.type==="path"&&this.gradientUnits!=="percentage"&&(J-=w.pathOffset.x,ie-=w.pathOffset.y),ee[4]-=J,ee[5]-=ie,V='id="SVGID_'+this.id+'" gradientUnits="'+Le+'"',V+=' gradientTransform="'+(ke?M.additionalTransform+" ":"")+e.util.matrixToSVG(ee)+'" ',this.type==="linear"?O=["<linearGradient ",V,' x1="',C.x1,'" y1="',C.y1,'" x2="',C.x2,'" y2="',C.y2,`">
`]:this.type==="radial"&&(O=["<radialGradient ",V,' cx="',Z?C.x1:C.x2,'" cy="',Z?C.y1:C.y2,'" r="',Z?C.r1:C.r2,'" fx="',Z?C.x2:C.x1,'" fy="',Z?C.y2:C.y1,`">
`]),this.type==="radial"){if(Z)for(X=X.concat(),X.reverse(),T=0,S=X.length;T<S;T++)X[T].offset=1-X[T].offset;var fe=Math.min(C.r1,C.r2);if(fe>0){var Te=Math.max(C.r1,C.r2),_e=fe/Te;for(T=0,S=X.length;T<S;T++)X[T].offset+=_e*(1-X[T].offset)}}for(T=0,S=X.length;T<S;T++){var ve=X[T];O.push("<stop ",'offset="',ve.offset*100+"%",'" style="stop-color:',ve.color,typeof ve.opacity<"u"?";stop-opacity: "+ve.opacity:";",`"/>
`)}return O.push(this.type==="linear"?`</linearGradient>
`:`</radialGradient>
`),O.join("")},toLive:function(w){var x,C=e.util.object.clone(this.coords),T,S;if(!!this.type){for(this.type==="linear"?x=w.createLinearGradient(C.x1,C.y1,C.x2,C.y2):this.type==="radial"&&(x=w.createRadialGradient(C.x1,C.y1,C.r1,C.x2,C.y2,C.r2)),T=0,S=this.colorStops.length;T<S;T++){var M=this.colorStops[T].color,O=this.colorStops[T].opacity,V=this.colorStops[T].offset;typeof O<"u"&&(M=new e.Color(M).setAlpha(O).toRgba()),x.addColorStop(V,M)}return x}}}),e.util.object.extend(e.Gradient,{fromElement:function(w,x,C,T){var S=parseFloat(C)/(/%$/.test(C)?100:1);S=S<0?0:S>1?1:S,isNaN(S)&&(S=1);var M=w.getElementsByTagName("stop"),O,V=w.getAttribute("gradientUnits")==="userSpaceOnUse"?"pixels":"percentage",X=w.getAttribute("gradientTransform")||"",Z=[],ee,J,ie=0,ke=0,Le;for(w.nodeName==="linearGradient"||w.nodeName==="LINEARGRADIENT"?(O="linear",ee=h(w)):(O="radial",ee=y(w)),J=M.length;J--;)Z.push(r(M[J],S));Le=e.parseTransformAttribute(X),v(x,ee,T,V),V==="pixels"&&(ie=-x.left,ke=-x.top);var fe=new e.Gradient({id:w.getAttribute("id"),type:O,coords:ee,colorStops:Z,gradientUnits:V,gradientTransform:Le,offsetX:ie,offsetY:ke});return fe}});function v(w,x,C,T){var S,M;Object.keys(x).forEach(function(O){S=x[O],S==="Infinity"?M=1:S==="-Infinity"?M=0:(M=parseFloat(x[O],10),typeof S=="string"&&/^(\d+\.\d+)%|(\d+)%$/.test(S)&&(M*=.01,T==="pixels"&&((O==="x1"||O==="x2"||O==="r2")&&(M*=C.viewBoxWidth||C.width),(O==="y1"||O==="y2")&&(M*=C.viewBoxHeight||C.height)))),x[O]=M})}}(),function(){var r=e.util.toFixed;e.Pattern=e.util.createClass({repeat:"repeat",offsetX:0,offsetY:0,crossOrigin:"",patternTransform:null,initialize:function(h,y){if(h||(h={}),this.id=e.Object.__uid++,this.setOptions(h),!h.source||h.source&&typeof h.source!="string"){y&&y(this);return}else{var b=this;this.source=e.util.createImage(),e.util.loadImage(h.source,function(v,w){b.source=v,y&&y(b,w)},null,this.crossOrigin)}},toObject:function(h){var y=e.Object.NUM_FRACTION_DIGITS,b,v;return typeof this.source.src=="string"?b=this.source.src:typeof this.source=="object"&&this.source.toDataURL&&(b=this.source.toDataURL()),v={type:"pattern",source:b,repeat:this.repeat,crossOrigin:this.crossOrigin,offsetX:r(this.offsetX,y),offsetY:r(this.offsetY,y),patternTransform:this.patternTransform?this.patternTransform.concat():null},e.util.populateWithProperties(this,v,h),v},toSVG:function(h){var y=typeof this.source=="function"?this.source():this.source,b=y.width/h.width,v=y.height/h.height,w=this.offsetX/h.width,x=this.offsetY/h.height,C="";return(this.repeat==="repeat-x"||this.repeat==="no-repeat")&&(v=1,x&&(v+=Math.abs(x))),(this.repeat==="repeat-y"||this.repeat==="no-repeat")&&(b=1,w&&(b+=Math.abs(w))),y.src?C=y.src:y.toDataURL&&(C=y.toDataURL()),'<pattern id="SVGID_'+this.id+'" x="'+w+'" y="'+x+'" width="'+b+'" height="'+v+`">
<image x="0" y="0" width="`+y.width+'" height="'+y.height+'" xlink:href="'+C+`"></image>
</pattern>
`},setOptions:function(h){for(var y in h)this[y]=h[y]},toLive:function(h){var y=this.source;return!y||typeof y.src<"u"&&(!y.complete||y.naturalWidth===0||y.naturalHeight===0)?"":h.createPattern(y,this.repeat)}})}(),function(r){var h=r.fabric||(r.fabric={}),y=h.util.toFixed;if(h.Shadow){h.warn("fabric.Shadow is already defined.");return}h.Shadow=h.util.createClass({color:"rgb(0,0,0)",blur:0,offsetX:0,offsetY:0,affectStroke:!1,includeDefaultValues:!0,nonScaling:!1,initialize:function(b){typeof b=="string"&&(b=this._parseShadow(b));for(var v in b)this[v]=b[v];this.id=h.Object.__uid++},_parseShadow:function(b){var v=b.trim(),w=h.Shadow.reOffsetsAndBlur.exec(v)||[],x=v.replace(h.Shadow.reOffsetsAndBlur,"")||"rgb(0,0,0)";return{color:x.trim(),offsetX:parseFloat(w[1],10)||0,offsetY:parseFloat(w[2],10)||0,blur:parseFloat(w[3],10)||0}},toString:function(){return[this.offsetX,this.offsetY,this.blur,this.color].join("px ")},toSVG:function(b){var v=40,w=40,x=h.Object.NUM_FRACTION_DIGITS,C=h.util.rotateVector({x:this.offsetX,y:this.offsetY},h.util.degreesToRadians(-b.angle)),T=20,S=new h.Color(this.color);return b.width&&b.height&&(v=y((Math.abs(C.x)+this.blur)/b.width,x)*100+T,w=y((Math.abs(C.y)+this.blur)/b.height,x)*100+T),b.flipX&&(C.x*=-1),b.flipY&&(C.y*=-1),'<filter id="SVGID_'+this.id+'" y="-'+w+'%" height="'+(100+2*w)+'%" x="-'+v+'%" width="'+(100+2*v)+`%" >
	<feGaussianBlur in="SourceAlpha" stdDeviation="`+y(this.blur?this.blur/2:0,x)+`"></feGaussianBlur>
	<feOffset dx="`+y(C.x,x)+'" dy="'+y(C.y,x)+`" result="oBlur" ></feOffset>
	<feFlood flood-color="`+S.toRgb()+'" flood-opacity="'+S.getAlpha()+`"/>
	<feComposite in2="oBlur" operator="in" />
	<feMerge>
		<feMergeNode></feMergeNode>
		<feMergeNode in="SourceGraphic"></feMergeNode>
	</feMerge>
</filter>
`},toObject:function(){if(this.includeDefaultValues)return{color:this.color,blur:this.blur,offsetX:this.offsetX,offsetY:this.offsetY,affectStroke:this.affectStroke,nonScaling:this.nonScaling};var b={},v=h.Shadow.prototype;return["color","blur","offsetX","offsetY","affectStroke","nonScaling"].forEach(function(w){this[w]!==v[w]&&(b[w]=this[w])},this),b}}),h.Shadow.reOffsetsAndBlur=/(?:\s|^)(-?\d+(?:\.\d*)?(?:px)?(?:\s?|$))?(-?\d+(?:\.\d*)?(?:px)?(?:\s?|$))?(\d+(?:\.\d*)?(?:px)?)?(?:\s?|$)(?:$|\s)/}(i),function(){if(e.StaticCanvas){e.warn("fabric.StaticCanvas is already defined.");return}var r=e.util.object.extend,h=e.util.getElementOffset,y=e.util.removeFromArray,b=e.util.toFixed,v=e.util.transformPoint,w=e.util.invertTransform,x=e.util.getNodeCanvas,C=e.util.createCanvasElement,T=new Error("Could not initialize `canvas` element");e.StaticCanvas=e.util.createClass(e.CommonMethods,{initialize:function(S,M){M||(M={}),this.renderAndResetBound=this.renderAndReset.bind(this),this.requestRenderAllBound=this.requestRenderAll.bind(this),this._initStatic(S,M)},backgroundColor:"",backgroundImage:null,overlayColor:"",overlayImage:null,includeDefaultValues:!0,stateful:!1,renderOnAddRemove:!0,controlsAboveOverlay:!1,allowTouchScrolling:!1,imageSmoothingEnabled:!0,viewportTransform:e.iMatrix.concat(),backgroundVpt:!0,overlayVpt:!0,enableRetinaScaling:!0,vptCoords:{},skipOffscreen:!0,clipPath:void 0,_initStatic:function(S,M){var O=this.requestRenderAllBound;this._objects=[],this._createLowerCanvas(S),this._initOptions(M),this.interactive||this._initRetinaScaling(),M.overlayImage&&this.setOverlayImage(M.overlayImage,O),M.backgroundImage&&this.setBackgroundImage(M.backgroundImage,O),M.backgroundColor&&this.setBackgroundColor(M.backgroundColor,O),M.overlayColor&&this.setOverlayColor(M.overlayColor,O),this.calcOffset()},_isRetinaScaling:function(){return e.devicePixelRatio>1&&this.enableRetinaScaling},getRetinaScaling:function(){return this._isRetinaScaling()?Math.max(1,e.devicePixelRatio):1},_initRetinaScaling:function(){if(!!this._isRetinaScaling()){var S=e.devicePixelRatio;this.__initRetinaScaling(S,this.lowerCanvasEl,this.contextContainer),this.upperCanvasEl&&this.__initRetinaScaling(S,this.upperCanvasEl,this.contextTop)}},__initRetinaScaling:function(S,M,O){M.setAttribute("width",this.width*S),M.setAttribute("height",this.height*S),O.scale(S,S)},calcOffset:function(){return this._offset=h(this.lowerCanvasEl),this},setOverlayImage:function(S,M,O){return this.__setBgOverlayImage("overlayImage",S,M,O)},setBackgroundImage:function(S,M,O){return this.__setBgOverlayImage("backgroundImage",S,M,O)},setOverlayColor:function(S,M){return this.__setBgOverlayColor("overlayColor",S,M)},setBackgroundColor:function(S,M){return this.__setBgOverlayColor("backgroundColor",S,M)},__setBgOverlayImage:function(S,M,O,V){return typeof M=="string"?e.util.loadImage(M,function(X,Z){if(X){var ee=new e.Image(X,V);this[S]=ee,ee.canvas=this}O&&O(X,Z)},this,V&&V.crossOrigin):(V&&M.setOptions(V),this[S]=M,M&&(M.canvas=this),O&&O(M,!1)),this},__setBgOverlayColor:function(S,M,O){return this[S]=M,this._initGradient(M,S),this._initPattern(M,S,O),this},_createCanvasElement:function(){var S=C();if(!S||(S.style||(S.style={}),typeof S.getContext>"u"))throw T;return S},_initOptions:function(S){var M=this.lowerCanvasEl;this._setOptions(S),this.width=this.width||parseInt(M.width,10)||0,this.height=this.height||parseInt(M.height,10)||0,this.lowerCanvasEl.style&&(M.width=this.width,M.height=this.height,M.style.width=this.width+"px",M.style.height=this.height+"px",this.viewportTransform=this.viewportTransform.slice())},_createLowerCanvas:function(S){S&&S.getContext?this.lowerCanvasEl=S:this.lowerCanvasEl=e.util.getById(S)||this._createCanvasElement(),e.util.addClass(this.lowerCanvasEl,"lower-canvas"),this._originalCanvasStyle=this.lowerCanvasEl.style,this.interactive&&this._applyCanvasStyle(this.lowerCanvasEl),this.contextContainer=this.lowerCanvasEl.getContext("2d")},getWidth:function(){return this.width},getHeight:function(){return this.height},setWidth:function(S,M){return this.setDimensions({width:S},M)},setHeight:function(S,M){return this.setDimensions({height:S},M)},setDimensions:function(S,M){var O;M=M||{};for(var V in S)O=S[V],M.cssOnly||(this._setBackstoreDimension(V,S[V]),O+="px",this.hasLostContext=!0),M.backstoreOnly||this._setCssDimension(V,O);return this._isCurrentlyDrawing&&this.freeDrawingBrush&&this.freeDrawingBrush._setBrushStyles(this.contextTop),this._initRetinaScaling(),this.calcOffset(),M.cssOnly||this.requestRenderAll(),this},_setBackstoreDimension:function(S,M){return this.lowerCanvasEl[S]=M,this.upperCanvasEl&&(this.upperCanvasEl[S]=M),this.cacheCanvasEl&&(this.cacheCanvasEl[S]=M),this[S]=M,this},_setCssDimension:function(S,M){return this.lowerCanvasEl.style[S]=M,this.upperCanvasEl&&(this.upperCanvasEl.style[S]=M),this.wrapperEl&&(this.wrapperEl.style[S]=M),this},getZoom:function(){return this.viewportTransform[0]},setViewportTransform:function(S){var M=this._activeObject,O=this.backgroundImage,V=this.overlayImage,X,Z,ee;for(this.viewportTransform=S,Z=0,ee=this._objects.length;Z<ee;Z++)X=this._objects[Z],X.group||X.setCoords(!0);return M&&M.setCoords(),O&&O.setCoords(!0),V&&V.setCoords(!0),this.calcViewportBoundaries(),this.renderOnAddRemove&&this.requestRenderAll(),this},zoomToPoint:function(S,M){var O=S,V=this.viewportTransform.slice(0);S=v(S,w(this.viewportTransform)),V[0]=M,V[3]=M;var X=v(S,V);return V[4]+=O.x-X.x,V[5]+=O.y-X.y,this.setViewportTransform(V)},setZoom:function(S){return this.zoomToPoint(new e.Point(0,0),S),this},absolutePan:function(S){var M=this.viewportTransform.slice(0);return M[4]=-S.x,M[5]=-S.y,this.setViewportTransform(M)},relativePan:function(S){return this.absolutePan(new e.Point(-S.x-this.viewportTransform[4],-S.y-this.viewportTransform[5]))},getElement:function(){return this.lowerCanvasEl},_onObjectAdded:function(S){this.stateful&&S.setupState(),S._set("canvas",this),S.setCoords(),this.fire("object:added",{target:S}),S.fire("added")},_onObjectRemoved:function(S){this.fire("object:removed",{target:S}),S.fire("removed"),delete S.canvas},clearContext:function(S){return S.clearRect(0,0,this.width,this.height),this},getContext:function(){return this.contextContainer},clear:function(){return this.remove.apply(this,this.getObjects()),this.backgroundImage=null,this.overlayImage=null,this.backgroundColor="",this.overlayColor="",this._hasITextHandlers&&(this.off("mouse:up",this._mouseUpITextHandler),this._iTextInstances=null,this._hasITextHandlers=!1),this.clearContext(this.contextContainer),this.fire("canvas:cleared"),this.renderOnAddRemove&&this.requestRenderAll(),this},renderAll:function(){var S=this.contextContainer;return this.renderCanvas(S,this._objects),this},renderAndReset:function(){this.isRendering=0,this.renderAll()},requestRenderAll:function(){return this.isRendering||(this.isRendering=e.util.requestAnimFrame(this.renderAndResetBound)),this},calcViewportBoundaries:function(){var S={},M=this.width,O=this.height,V=w(this.viewportTransform);return S.tl=v({x:0,y:0},V),S.br=v({x:M,y:O},V),S.tr=new e.Point(S.br.x,S.tl.y),S.bl=new e.Point(S.tl.x,S.br.y),this.vptCoords=S,S},cancelRequestedRender:function(){this.isRendering&&(e.util.cancelAnimFrame(this.isRendering),this.isRendering=0)},renderCanvas:function(S,M){var O=this.viewportTransform,V=this.clipPath;this.cancelRequestedRender(),this.calcViewportBoundaries(),this.clearContext(S),e.util.setImageSmoothing(S,this.imageSmoothingEnabled),this.fire("before:render",{ctx:S}),this._renderBackground(S),S.save(),S.transform(O[0],O[1],O[2],O[3],O[4],O[5]),this._renderObjects(S,M),S.restore(),!this.controlsAboveOverlay&&this.interactive&&this.drawControls(S),V&&(V.canvas=this,V.shouldCache(),V._transformDone=!0,V.renderCache({forClipping:!0}),this.drawClipPathOnCanvas(S)),this._renderOverlay(S),this.controlsAboveOverlay&&this.interactive&&this.drawControls(S),this.fire("after:render",{ctx:S})},drawClipPathOnCanvas:function(S){var M=this.viewportTransform,O=this.clipPath;S.save(),S.transform(M[0],M[1],M[2],M[3],M[4],M[5]),S.globalCompositeOperation="destination-in",O.transform(S),S.scale(1/O.zoomX,1/O.zoomY),S.drawImage(O._cacheCanvas,-O.cacheTranslationX,-O.cacheTranslationY),S.restore()},_renderObjects:function(S,M){var O,V;for(O=0,V=M.length;O<V;++O)M[O]&&M[O].render(S)},_renderBackgroundOrOverlay:function(S,M){var O=this[M+"Color"],V=this[M+"Image"],X=this.viewportTransform,Z=this[M+"Vpt"];if(!(!O&&!V)){if(O){S.save(),S.beginPath(),S.moveTo(0,0),S.lineTo(this.width,0),S.lineTo(this.width,this.height),S.lineTo(0,this.height),S.closePath(),S.fillStyle=O.toLive?O.toLive(S,this):O,Z&&S.transform(X[0],X[1],X[2],X[3],X[4],X[5]),S.transform(1,0,0,1,O.offsetX||0,O.offsetY||0);var ee=O.gradientTransform||O.patternTransform;ee&&S.transform(ee[0],ee[1],ee[2],ee[3],ee[4],ee[5]),S.fill(),S.restore()}V&&(S.save(),Z&&S.transform(X[0],X[1],X[2],X[3],X[4],X[5]),V.render(S),S.restore())}},_renderBackground:function(S){this._renderBackgroundOrOverlay(S,"background")},_renderOverlay:function(S){this._renderBackgroundOrOverlay(S,"overlay")},getCenter:function(){return{top:this.height/2,left:this.width/2}},getCenterPoint:function(){return new e.Point(this.width/2,this.height/2)},centerObjectH:function(S){return this._centerObject(S,new e.Point(this.getCenterPoint().x,S.getCenterPoint().y))},centerObjectV:function(S){return this._centerObject(S,new e.Point(S.getCenterPoint().x,this.getCenterPoint().y))},centerObject:function(S){var M=this.getCenterPoint();return this._centerObject(S,M)},viewportCenterObject:function(S){var M=this.getVpCenter();return this._centerObject(S,M)},viewportCenterObjectH:function(S){var M=this.getVpCenter();return this._centerObject(S,new e.Point(M.x,S.getCenterPoint().y)),this},viewportCenterObjectV:function(S){var M=this.getVpCenter();return this._centerObject(S,new e.Point(S.getCenterPoint().x,M.y))},getVpCenter:function(){var S=this.getCenterPoint(),M=w(this.viewportTransform);return v(S,M)},_centerObject:function(S,M){return S.setPositionByOrigin(M,"center","center"),S.setCoords(),this.renderOnAddRemove&&this.requestRenderAll(),this},toDatalessJSON:function(S){return this.toDatalessObject(S)},toObject:function(S){return this._toObjectMethod("toObject",S)},toDatalessObject:function(S){return this._toObjectMethod("toDatalessObject",S)},_toObjectMethod:function(S,M){var O=this.clipPath,V={version:e.version,objects:this._toObjects(S,M)};return O&&!O.excludeFromExport&&(V.clipPath=this._toObject(this.clipPath,S,M)),r(V,this.__serializeBgOverlay(S,M)),e.util.populateWithProperties(this,V,M),V},_toObjects:function(S,M){return this._objects.filter(function(O){return!O.excludeFromExport}).map(function(O){return this._toObject(O,S,M)},this)},_toObject:function(S,M,O){var V;this.includeDefaultValues||(V=S.includeDefaultValues,S.includeDefaultValues=!1);var X=S[M](O);return this.includeDefaultValues||(S.includeDefaultValues=V),X},__serializeBgOverlay:function(S,M){var O={},V=this.backgroundImage,X=this.overlayImage,Z=this.backgroundColor,ee=this.overlayColor;return Z&&Z.toObject?Z.excludeFromExport||(O.background=Z.toObject(M)):Z&&(O.background=Z),ee&&ee.toObject?ee.excludeFromExport||(O.overlay=ee.toObject(M)):ee&&(O.overlay=ee),V&&!V.excludeFromExport&&(O.backgroundImage=this._toObject(V,S,M)),X&&!X.excludeFromExport&&(O.overlayImage=this._toObject(X,S,M)),O},svgViewportTransformation:!0,toSVG:function(S,M){S||(S={}),S.reviver=M;var O=[];return this._setSVGPreamble(O,S),this._setSVGHeader(O,S),this.clipPath&&O.push('<g clip-path="url(#'+this.clipPath.clipPathId+`)" >
`),this._setSVGBgOverlayColor(O,"background"),this._setSVGBgOverlayImage(O,"backgroundImage",M),this._setSVGObjects(O,M),this.clipPath&&O.push(`</g>
`),this._setSVGBgOverlayColor(O,"overlay"),this._setSVGBgOverlayImage(O,"overlayImage",M),O.push("</svg>"),O.join("")},_setSVGPreamble:function(S,M){M.suppressPreamble||S.push('<?xml version="1.0" encoding="',M.encoding||"UTF-8",`" standalone="no" ?>
`,'<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" ',`"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
`)},_setSVGHeader:function(S,M){var O=M.width||this.width,V=M.height||this.height,X,Z='viewBox="0 0 '+this.width+" "+this.height+'" ',ee=e.Object.NUM_FRACTION_DIGITS;M.viewBox?Z='viewBox="'+M.viewBox.x+" "+M.viewBox.y+" "+M.viewBox.width+" "+M.viewBox.height+'" ':this.svgViewportTransformation&&(X=this.viewportTransform,Z='viewBox="'+b(-X[4]/X[0],ee)+" "+b(-X[5]/X[3],ee)+" "+b(this.width/X[0],ee)+" "+b(this.height/X[3],ee)+'" '),S.push("<svg ",'xmlns="http://www.w3.org/2000/svg" ','xmlns:xlink="http://www.w3.org/1999/xlink" ','version="1.1" ','width="',O,'" ','height="',V,'" ',Z,`xml:space="preserve">
`,"<desc>Created with Fabric.js ",e.version,`</desc>
`,`<defs>
`,this.createSVGFontFacesMarkup(),this.createSVGRefElementsMarkup(),this.createSVGClipPathMarkup(M),`</defs>
`)},createSVGClipPathMarkup:function(S){var M=this.clipPath;return M?(M.clipPathId="CLIPPATH_"+e.Object.__uid++,'<clipPath id="'+M.clipPathId+`" >
`+this.clipPath.toClipPathSVG(S.reviver)+`</clipPath>
`):""},createSVGRefElementsMarkup:function(){var S=this,M=["background","overlay"].map(function(O){var V=S[O+"Color"];if(V&&V.toLive){var X=S[O+"Vpt"],Z=S.viewportTransform,ee={width:S.width/(X?Z[0]:1),height:S.height/(X?Z[3]:1)};return V.toSVG(ee,{additionalTransform:X?e.util.matrixToSVG(Z):""})}});return M.join("")},createSVGFontFacesMarkup:function(){var S="",M={},O,V,X,Z,ee,J,ie,ke,Le,fe=e.fontPaths,Te=[];for(this._objects.forEach(function ve(rt){Te.push(rt),rt._objects&&rt._objects.forEach(ve)}),ke=0,Le=Te.length;ke<Le;ke++)if(O=Te[ke],V=O.fontFamily,!(O.type.indexOf("text")===-1||M[V]||!fe[V])&&(M[V]=!0,!!O.styles)){X=O.styles;for(ee in X){Z=X[ee];for(ie in Z)J=Z[ie],V=J.fontFamily,!M[V]&&fe[V]&&(M[V]=!0)}}for(var _e in M)S+=[`		@font-face {
`,"			font-family: '",_e,`';
`,"			src: url('",fe[_e],`');
`,`		}
`].join("");return S&&(S=['	<style type="text/css">',`<![CDATA[
`,S,"]]>",`</style>
`].join("")),S},_setSVGObjects:function(S,M){var O,V,X,Z=this._objects;for(V=0,X=Z.length;V<X;V++)O=Z[V],!O.excludeFromExport&&this._setSVGObject(S,O,M)},_setSVGObject:function(S,M,O){S.push(M.toSVG(O))},_setSVGBgOverlayImage:function(S,M,O){this[M]&&!this[M].excludeFromExport&&this[M].toSVG&&S.push(this[M].toSVG(O))},_setSVGBgOverlayColor:function(S,M){var O=this[M+"Color"],V=this.viewportTransform,X=this.width,Z=this.height;if(!!O)if(O.toLive){var ee=O.repeat,J=e.util.invertTransform(V),ie=this[M+"Vpt"],ke=ie?e.util.matrixToSVG(J):"";S.push('<rect transform="'+ke+" translate(",X/2,",",Z/2,')"',' x="',O.offsetX-X/2,'" y="',O.offsetY-Z/2,'" ','width="',ee==="repeat-y"||ee==="no-repeat"?O.source.width:X,'" height="',ee==="repeat-x"||ee==="no-repeat"?O.source.height:Z,'" fill="url(#SVGID_'+O.id+')"',`></rect>
`)}else S.push('<rect x="0" y="0" width="100%" height="100%" ','fill="',O,'"',`></rect>
`)},sendToBack:function(S){if(!S)return this;var M=this._activeObject,O,V,X;if(S===M&&S.type==="activeSelection")for(X=M._objects,O=X.length;O--;)V=X[O],y(this._objects,V),this._objects.unshift(V);else y(this._objects,S),this._objects.unshift(S);return this.renderOnAddRemove&&this.requestRenderAll(),this},bringToFront:function(S){if(!S)return this;var M=this._activeObject,O,V,X;if(S===M&&S.type==="activeSelection")for(X=M._objects,O=0;O<X.length;O++)V=X[O],y(this._objects,V),this._objects.push(V);else y(this._objects,S),this._objects.push(S);return this.renderOnAddRemove&&this.requestRenderAll(),this},sendBackwards:function(S,M){if(!S)return this;var O=this._activeObject,V,X,Z,ee,J,ie=0;if(S===O&&S.type==="activeSelection")for(J=O._objects,V=0;V<J.length;V++)X=J[V],Z=this._objects.indexOf(X),Z>0+ie&&(ee=Z-1,y(this._objects,X),this._objects.splice(ee,0,X)),ie++;else Z=this._objects.indexOf(S),Z!==0&&(ee=this._findNewLowerIndex(S,Z,M),y(this._objects,S),this._objects.splice(ee,0,S));return this.renderOnAddRemove&&this.requestRenderAll(),this},_findNewLowerIndex:function(S,M,O){var V,X;if(O)for(V=M,X=M-1;X>=0;--X){var Z=S.intersectsWithObject(this._objects[X])||S.isContainedWithinObject(this._objects[X])||this._objects[X].isContainedWithinObject(S);if(Z){V=X;break}}else V=M-1;return V},bringForward:function(S,M){if(!S)return this;var O=this._activeObject,V,X,Z,ee,J,ie=0;if(S===O&&S.type==="activeSelection")for(J=O._objects,V=J.length;V--;)X=J[V],Z=this._objects.indexOf(X),Z<this._objects.length-1-ie&&(ee=Z+1,y(this._objects,X),this._objects.splice(ee,0,X)),ie++;else Z=this._objects.indexOf(S),Z!==this._objects.length-1&&(ee=this._findNewUpperIndex(S,Z,M),y(this._objects,S),this._objects.splice(ee,0,S));return this.renderOnAddRemove&&this.requestRenderAll(),this},_findNewUpperIndex:function(S,M,O){var V,X,Z;if(O)for(V=M,X=M+1,Z=this._objects.length;X<Z;++X){var ee=S.intersectsWithObject(this._objects[X])||S.isContainedWithinObject(this._objects[X])||this._objects[X].isContainedWithinObject(S);if(ee){V=X;break}}else V=M+1;return V},moveTo:function(S,M){return y(this._objects,S),this._objects.splice(M,0,S),this.renderOnAddRemove&&this.requestRenderAll()},dispose:function(){return this.isRendering&&(e.util.cancelAnimFrame(this.isRendering),this.isRendering=0),this.forEachObject(function(S){S.dispose&&S.dispose()}),this._objects=[],this.backgroundImage&&this.backgroundImage.dispose&&this.backgroundImage.dispose(),this.backgroundImage=null,this.overlayImage&&this.overlayImage.dispose&&this.overlayImage.dispose(),this.overlayImage=null,this._iTextInstances=null,this.contextContainer=null,this.lowerCanvasEl.classList.remove("lower-canvas"),e.util.setStyle(this.lowerCanvasEl,this._originalCanvasStyle),delete this._originalCanvasStyle,this.lowerCanvasEl.setAttribute("width",this.width),this.lowerCanvasEl.setAttribute("height",this.height),e.util.cleanUpJsdomNode(this.lowerCanvasEl),this.lowerCanvasEl=void 0,this},toString:function(){return"#<fabric.Canvas ("+this.complexity()+"): { objects: "+this._objects.length+" }>"}}),r(e.StaticCanvas.prototype,e.Observable),r(e.StaticCanvas.prototype,e.Collection),r(e.StaticCanvas.prototype,e.DataURLExporter),r(e.StaticCanvas,{EMPTY_JSON:'{"objects": [], "background": "white"}',supports:function(S){var M=C();if(!M||!M.getContext)return null;var O=M.getContext("2d");if(!O)return null;switch(S){case"setLineDash":return typeof O.setLineDash<"u";default:return null}}}),e.StaticCanvas.prototype.toJSON=e.StaticCanvas.prototype.toObject,e.isLikelyNode&&(e.StaticCanvas.prototype.createPNGStream=function(){var S=x(this.lowerCanvasEl);return S&&S.createPNGStream()},e.StaticCanvas.prototype.createJPEGStream=function(S){var M=x(this.lowerCanvasEl);return M&&M.createJPEGStream(S)})}(),e.BaseBrush=e.util.createClass({color:"rgb(0, 0, 0)",width:1,shadow:null,strokeLineCap:"round",strokeLineJoin:"round",strokeMiterLimit:10,strokeDashArray:null,limitedToCanvasSize:!1,_setBrushStyles:function(r){r.strokeStyle=this.color,r.lineWidth=this.width,r.lineCap=this.strokeLineCap,r.miterLimit=this.strokeMiterLimit,r.lineJoin=this.strokeLineJoin,r.setLineDash(this.strokeDashArray||[])},_saveAndTransform:function(r){var h=this.canvas.viewportTransform;r.save(),r.transform(h[0],h[1],h[2],h[3],h[4],h[5])},_setShadow:function(){if(!!this.shadow){var r=this.canvas,h=this.shadow,y=r.contextTop,b=r.getZoom();r&&r._isRetinaScaling()&&(b*=e.devicePixelRatio),y.shadowColor=h.color,y.shadowBlur=h.blur*b,y.shadowOffsetX=h.offsetX*b,y.shadowOffsetY=h.offsetY*b}},needsFullRender:function(){var r=new e.Color(this.color);return r.getAlpha()<1||!!this.shadow},_resetShadow:function(){var r=this.canvas.contextTop;r.shadowColor="",r.shadowBlur=r.shadowOffsetX=r.shadowOffsetY=0},_isOutSideCanvas:function(r){return r.x<0||r.x>this.canvas.getWidth()||r.y<0||r.y>this.canvas.getHeight()}}),function(){e.PencilBrush=e.util.createClass(e.BaseBrush,{decimate:.4,drawStraightLine:!1,straightLineKey:"shiftKey",initialize:function(r){this.canvas=r,this._points=[]},needsFullRender:function(){return this.callSuper("needsFullRender")||this._hasStraightLine},_drawSegment:function(r,h,y){var b=h.midPointFrom(y);return r.quadraticCurveTo(h.x,h.y,b.x,b.y),b},onMouseDown:function(r,h){!this.canvas._isMainEvent(h.e)||(this.drawStraightLine=h.e[this.straightLineKey],this._prepareForDrawing(r),this._captureDrawingPath(r),this._render())},onMouseMove:function(r,h){if(!!this.canvas._isMainEvent(h.e)&&(this.drawStraightLine=h.e[this.straightLineKey],!(this.limitedToCanvasSize===!0&&this._isOutSideCanvas(r))&&this._captureDrawingPath(r)&&this._points.length>1))if(this.needsFullRender())this.canvas.clearContext(this.canvas.contextTop),this._render();else{var y=this._points,b=y.length,v=this.canvas.contextTop;this._saveAndTransform(v),this.oldEnd&&(v.beginPath(),v.moveTo(this.oldEnd.x,this.oldEnd.y)),this.oldEnd=this._drawSegment(v,y[b-2],y[b-1],!0),v.stroke(),v.restore()}},onMouseUp:function(r){return this.canvas._isMainEvent(r.e)?(this.drawStraightLine=!1,this.oldEnd=void 0,this._finalizeAndAddPath(),!1):!0},_prepareForDrawing:function(r){var h=new e.Point(r.x,r.y);this._reset(),this._addPoint(h),this.canvas.contextTop.moveTo(h.x,h.y)},_addPoint:function(r){return this._points.length>1&&r.eq(this._points[this._points.length-1])?!1:(this.drawStraightLine&&this._points.length>1&&(this._hasStraightLine=!0,this._points.pop()),this._points.push(r),!0)},_reset:function(){this._points=[],this._setBrushStyles(this.canvas.contextTop),this._setShadow(),this._hasStraightLine=!1},_captureDrawingPath:function(r){var h=new e.Point(r.x,r.y);return this._addPoint(h)},_render:function(r){var h,y,b=this._points[0],v=this._points[1];if(r=r||this.canvas.contextTop,this._saveAndTransform(r),r.beginPath(),this._points.length===2&&b.x===v.x&&b.y===v.y){var w=this.width/1e3;b=new e.Point(b.x,b.y),v=new e.Point(v.x,v.y),b.x-=w,v.x+=w}for(r.moveTo(b.x,b.y),h=1,y=this._points.length;h<y;h++)this._drawSegment(r,b,v),b=this._points[h],v=this._points[h+1];r.lineTo(b.x,b.y),r.stroke(),r.restore()},convertPointsToSVGPath:function(r){var h=this.width/1e3;return e.util.getSmoothPathFromPoints(r,h)},_isEmptySVGPath:function(r){var h=e.util.joinPath(r);return h==="M 0 0 Q 0 0 0 0 L 0 0"},createPath:function(r){var h=new e.Path(r,{fill:null,stroke:this.color,strokeWidth:this.width,strokeLineCap:this.strokeLineCap,strokeMiterLimit:this.strokeMiterLimit,strokeLineJoin:this.strokeLineJoin,strokeDashArray:this.strokeDashArray});return this.shadow&&(this.shadow.affectStroke=!0,h.shadow=new e.Shadow(this.shadow)),h},decimatePoints:function(r,h){if(r.length<=2)return r;var y=this.canvas.getZoom(),b=Math.pow(h/y,2),v,w=r.length-1,x=r[0],C=[x],T;for(v=1;v<w-1;v++)T=Math.pow(x.x-r[v].x,2)+Math.pow(x.y-r[v].y,2),T>=b&&(x=r[v],C.push(x));return C.push(r[w]),C},_finalizeAndAddPath:function(){var r=this.canvas.contextTop;r.closePath(),this.decimate&&(this._points=this.decimatePoints(this._points,this.decimate));var h=this.convertPointsToSVGPath(this._points);if(this._isEmptySVGPath(h)){this.canvas.requestRenderAll();return}var y=this.createPath(h);this.canvas.clearContext(this.canvas.contextTop),this.canvas.fire("before:path:created",{path:y}),this.canvas.add(y),this.canvas.requestRenderAll(),y.setCoords(),this._resetShadow(),this.canvas.fire("path:created",{path:y})}})}(),e.CircleBrush=e.util.createClass(e.BaseBrush,{width:10,initialize:function(r){this.canvas=r,this.points=[]},drawDot:function(r){var h=this.addPoint(r),y=this.canvas.contextTop;this._saveAndTransform(y),this.dot(y,h),y.restore()},dot:function(r,h){r.fillStyle=h.fill,r.beginPath(),r.arc(h.x,h.y,h.radius,0,Math.PI*2,!1),r.closePath(),r.fill()},onMouseDown:function(r){this.points.length=0,this.canvas.clearContext(this.canvas.contextTop),this._setShadow(),this.drawDot(r)},_render:function(){var r=this.canvas.contextTop,h,y,b=this.points;for(this._saveAndTransform(r),h=0,y=b.length;h<y;h++)this.dot(r,b[h]);r.restore()},onMouseMove:function(r){this.limitedToCanvasSize===!0&&this._isOutSideCanvas(r)||(this.needsFullRender()?(this.canvas.clearContext(this.canvas.contextTop),this.addPoint(r),this._render()):this.drawDot(r))},onMouseUp:function(){var r=this.canvas.renderOnAddRemove,h,y;this.canvas.renderOnAddRemove=!1;var b=[];for(h=0,y=this.points.length;h<y;h++){var v=this.points[h],w=new e.Circle({radius:v.radius,left:v.x,top:v.y,originX:"center",originY:"center",fill:v.fill});this.shadow&&(w.shadow=new e.Shadow(this.shadow)),b.push(w)}var x=new e.Group(b);x.canvas=this.canvas,this.canvas.fire("before:path:created",{path:x}),this.canvas.add(x),this.canvas.fire("path:created",{path:x}),this.canvas.clearContext(this.canvas.contextTop),this._resetShadow(),this.canvas.renderOnAddRemove=r,this.canvas.requestRenderAll()},addPoint:function(r){var h=new e.Point(r.x,r.y),y=e.util.getRandomInt(Math.max(0,this.width-20),this.width+20)/2,b=new e.Color(this.color).setAlpha(e.util.getRandomInt(0,100)/100).toRgba();return h.radius=y,h.fill=b,this.points.push(h),h}}),e.SprayBrush=e.util.createClass(e.BaseBrush,{width:10,density:20,dotWidth:1,dotWidthVariance:1,randomOpacity:!1,optimizeOverlapping:!0,initialize:function(r){this.canvas=r,this.sprayChunks=[]},onMouseDown:function(r){this.sprayChunks.length=0,this.canvas.clearContext(this.canvas.contextTop),this._setShadow(),this.addSprayChunk(r),this.render(this.sprayChunkPoints)},onMouseMove:function(r){this.limitedToCanvasSize===!0&&this._isOutSideCanvas(r)||(this.addSprayChunk(r),this.render(this.sprayChunkPoints))},onMouseUp:function(){var r=this.canvas.renderOnAddRemove;this.canvas.renderOnAddRemove=!1;for(var h=[],y=0,b=this.sprayChunks.length;y<b;y++)for(var v=this.sprayChunks[y],w=0,x=v.length;w<x;w++){var C=new e.Rect({width:v[w].width,height:v[w].width,left:v[w].x+1,top:v[w].y+1,originX:"center",originY:"center",fill:this.color});h.push(C)}this.optimizeOverlapping&&(h=this._getOptimizedRects(h));var T=new e.Group(h);this.shadow&&T.set("shadow",new e.Shadow(this.shadow)),this.canvas.fire("before:path:created",{path:T}),this.canvas.add(T),this.canvas.fire("path:created",{path:T}),this.canvas.clearContext(this.canvas.contextTop),this._resetShadow(),this.canvas.renderOnAddRemove=r,this.canvas.requestRenderAll()},_getOptimizedRects:function(r){var h={},y,b,v;for(b=0,v=r.length;b<v;b++)y=r[b].left+""+r[b].top,h[y]||(h[y]=r[b]);var w=[];for(y in h)w.push(h[y]);return w},render:function(r){var h=this.canvas.contextTop,y,b;for(h.fillStyle=this.color,this._saveAndTransform(h),y=0,b=r.length;y<b;y++){var v=r[y];typeof v.opacity<"u"&&(h.globalAlpha=v.opacity),h.fillRect(v.x,v.y,v.width,v.width)}h.restore()},_render:function(){var r=this.canvas.contextTop,h,y;for(r.fillStyle=this.color,this._saveAndTransform(r),h=0,y=this.sprayChunks.length;h<y;h++)this.render(this.sprayChunks[h]);r.restore()},addSprayChunk:function(r){this.sprayChunkPoints=[];var h,y,b,v=this.width/2,w;for(w=0;w<this.density;w++){h=e.util.getRandomInt(r.x-v,r.x+v),y=e.util.getRandomInt(r.y-v,r.y+v),this.dotWidthVariance?b=e.util.getRandomInt(Math.max(1,this.dotWidth-this.dotWidthVariance),this.dotWidth+this.dotWidthVariance):b=this.dotWidth;var x=new e.Point(h,y);x.width=b,this.randomOpacity&&(x.opacity=e.util.getRandomInt(0,100)/100),this.sprayChunkPoints.push(x)}this.sprayChunks.push(this.sprayChunkPoints)}}),e.PatternBrush=e.util.createClass(e.PencilBrush,{getPatternSrc:function(){var r=20,h=5,y=e.util.createCanvasElement(),b=y.getContext("2d");return y.width=y.height=r+h,b.fillStyle=this.color,b.beginPath(),b.arc(r/2,r/2,r/2,0,Math.PI*2,!1),b.closePath(),b.fill(),y},getPatternSrcFunction:function(){return String(this.getPatternSrc).replace("this.color",'"'+this.color+'"')},getPattern:function(r){return r.createPattern(this.source||this.getPatternSrc(),"repeat")},_setBrushStyles:function(r){this.callSuper("_setBrushStyles",r),r.strokeStyle=this.getPattern(r)},createPath:function(r){var h=this.callSuper("createPath",r),y=h._getLeftTopCoords().scalarAdd(h.strokeWidth/2);return h.stroke=new e.Pattern({source:this.source||this.getPatternSrcFunction(),offsetX:-y.x,offsetY:-y.y}),h}}),function(){var r=e.util.getPointer,h=e.util.degreesToRadians,y=e.util.isTouchEvent;e.Canvas=e.util.createClass(e.StaticCanvas,{initialize:function(v,w){w||(w={}),this.renderAndResetBound=this.renderAndReset.bind(this),this.requestRenderAllBound=this.requestRenderAll.bind(this),this._initStatic(v,w),this._initInteractive(),this._createCacheCanvas()},uniformScaling:!0,uniScaleKey:"shiftKey",centeredScaling:!1,centeredRotation:!1,centeredKey:"altKey",altActionKey:"shiftKey",interactive:!0,selection:!0,selectionKey:"shiftKey",altSelectionKey:null,selectionColor:"rgba(100, 100, 255, 0.3)",selectionDashArray:[],selectionBorderColor:"rgba(255, 255, 255, 0.3)",selectionLineWidth:1,selectionFullyContained:!1,hoverCursor:"move",moveCursor:"move",defaultCursor:"default",freeDrawingCursor:"crosshair",notAllowedCursor:"not-allowed",containerClass:"canvas-container",perPixelTargetFind:!1,targetFindTolerance:0,skipTargetFind:!1,isDrawingMode:!1,preserveObjectStacking:!1,snapAngle:0,snapThreshold:null,stopContextMenu:!1,fireRightClick:!1,fireMiddleClick:!1,targets:[],enablePointerEvents:!1,_hoveredTarget:null,_hoveredTargets:[],_initInteractive:function(){this._currentTransform=null,this._groupSelector=null,this._initWrapperElement(),this._createUpperCanvas(),this._initEventListeners(),this._initRetinaScaling(),this.freeDrawingBrush=e.PencilBrush&&new e.PencilBrush(this),this.calcOffset()},_chooseObjectsToRender:function(){var v=this.getActiveObjects(),w,x,C;if(v.length>0&&!this.preserveObjectStacking){x=[],C=[];for(var T=0,S=this._objects.length;T<S;T++)w=this._objects[T],v.indexOf(w)===-1?x.push(w):C.push(w);v.length>1&&(this._activeObject._objects=C),x.push.apply(x,C)}else x=this._objects;return x},renderAll:function(){this.contextTopDirty&&!this._groupSelector&&!this.isDrawingMode&&(this.clearContext(this.contextTop),this.contextTopDirty=!1),this.hasLostContext&&(this.renderTopLayer(this.contextTop),this.hasLostContext=!1);var v=this.contextContainer;return this.renderCanvas(v,this._chooseObjectsToRender()),this},renderTopLayer:function(v){v.save(),this.isDrawingMode&&this._isCurrentlyDrawing&&(this.freeDrawingBrush&&this.freeDrawingBrush._render(),this.contextTopDirty=!0),this.selection&&this._groupSelector&&(this._drawSelection(v),this.contextTopDirty=!0),v.restore()},renderTop:function(){var v=this.contextTop;return this.clearContext(v),this.renderTopLayer(v),this.fire("after:render"),this},_normalizePointer:function(v,w){var x=v.calcTransformMatrix(),C=e.util.invertTransform(x),T=this.restorePointerVpt(w);return e.util.transformPoint(T,C)},isTargetTransparent:function(v,w,x){if(v.shouldCache()&&v._cacheCanvas&&v!==this._activeObject){var C=this._normalizePointer(v,{x:w,y:x}),T=Math.max(v.cacheTranslationX+C.x*v.zoomX,0),S=Math.max(v.cacheTranslationY+C.y*v.zoomY,0),X=e.util.isTransparent(v._cacheContext,Math.round(T),Math.round(S),this.targetFindTolerance);return X}var M=this.contextCache,O=v.selectionBackgroundColor,V=this.viewportTransform;v.selectionBackgroundColor="",this.clearContext(M),M.save(),M.transform(V[0],V[1],V[2],V[3],V[4],V[5]),v.render(M),M.restore(),v.selectionBackgroundColor=O;var X=e.util.isTransparent(M,w,x,this.targetFindTolerance);return X},_isSelectionKeyPressed:function(v){var w=!1;return Array.isArray(this.selectionKey)?w=!!this.selectionKey.find(function(x){return v[x]===!0}):w=v[this.selectionKey],w},_shouldClearSelection:function(v,w){var x=this.getActiveObjects(),C=this._activeObject;return!w||w&&C&&x.length>1&&x.indexOf(w)===-1&&C!==w&&!this._isSelectionKeyPressed(v)||w&&!w.evented||w&&!w.selectable&&C&&C!==w},_shouldCenterTransform:function(v,w,x){if(!!v){var C;return w==="scale"||w==="scaleX"||w==="scaleY"||w==="resizing"?C=this.centeredScaling||v.centeredScaling:w==="rotate"&&(C=this.centeredRotation||v.centeredRotation),C?!x:x}},_getOriginFromCorner:function(v,w){var x={x:v.originX,y:v.originY};return w==="ml"||w==="tl"||w==="bl"?x.x="right":(w==="mr"||w==="tr"||w==="br")&&(x.x="left"),w==="tl"||w==="mt"||w==="tr"?x.y="bottom":(w==="bl"||w==="mb"||w==="br")&&(x.y="top"),x},_getActionFromCorner:function(v,w,x,C){if(!w||!v)return"drag";var T=C.controls[w];return T.getActionName(x,T,C)},_setupCurrentTransform:function(v,w,x){if(!!w){var C=this.getPointer(v),T=w.__corner,S=w.controls[T],M=x&&T?S.getActionHandler(v,w,S):e.controlsUtils.dragHandler,O=this._getActionFromCorner(x,T,v,w),V=this._getOriginFromCorner(w,T),X=v[this.centeredKey],Z={target:w,action:O,actionHandler:M,corner:T,scaleX:w.scaleX,scaleY:w.scaleY,skewX:w.skewX,skewY:w.skewY,offsetX:C.x-w.left,offsetY:C.y-w.top,originX:V.x,originY:V.y,ex:C.x,ey:C.y,lastX:C.x,lastY:C.y,theta:h(w.angle),width:w.width*w.scaleX,shiftKey:v.shiftKey,altKey:X,original:e.util.saveObjectTransform(w)};this._shouldCenterTransform(w,O,X)&&(Z.originX="center",Z.originY="center"),Z.original.originX=V.x,Z.original.originY=V.y,this._currentTransform=Z,this._beforeTransform(v)}},setCursor:function(v){this.upperCanvasEl.style.cursor=v},_drawSelection:function(v){var w=this._groupSelector,x=new e.Point(w.ex,w.ey),C=e.util.transformPoint(x,this.viewportTransform),T=new e.Point(w.ex+w.left,w.ey+w.top),S=e.util.transformPoint(T,this.viewportTransform),M=Math.min(C.x,S.x),O=Math.min(C.y,S.y),V=Math.max(C.x,S.x),X=Math.max(C.y,S.y),Z=this.selectionLineWidth/2;this.selectionColor&&(v.fillStyle=this.selectionColor,v.fillRect(M,O,V-M,X-O)),!(!this.selectionLineWidth||!this.selectionBorderColor)&&(v.lineWidth=this.selectionLineWidth,v.strokeStyle=this.selectionBorderColor,M+=Z,O+=Z,V-=Z,X-=Z,e.Object.prototype._setLineDash.call(this,v,this.selectionDashArray),v.strokeRect(M,O,V-M,X-O))},findTarget:function(v,w){if(!this.skipTargetFind){var x=!0,C=this.getPointer(v,x),T=this._activeObject,S=this.getActiveObjects(),M,O,V=y(v),X=S.length>1&&!w||S.length===1;if(this.targets=[],X&&T._findTargetCorner(C,V)||S.length>1&&!w&&T===this._searchPossibleTargets([T],C))return T;if(S.length===1&&T===this._searchPossibleTargets([T],C))if(this.preserveObjectStacking)M=T,O=this.targets,this.targets=[];else return T;var Z=this._searchPossibleTargets(this._objects,C);return v[this.altSelectionKey]&&Z&&M&&Z!==M&&(Z=M,this.targets=O),Z}},_checkTarget:function(v,w,x){if(w&&w.visible&&w.evented&&w.containsPoint(v))if((this.perPixelTargetFind||w.perPixelTargetFind)&&!w.isEditing){var C=this.isTargetTransparent(w,x.x,x.y);if(!C)return!0}else return!0},_searchPossibleTargets:function(v,w){for(var x,C=v.length,T;C--;){var S=v[C],M=S.group?this._normalizePointer(S.group,w):w;if(this._checkTarget(M,S,w)){x=v[C],x.subTargetCheck&&x instanceof e.Group&&(T=this._searchPossibleTargets(x._objects,w),T&&this.targets.push(T));break}}return x},restorePointerVpt:function(v){return e.util.transformPoint(v,e.util.invertTransform(this.viewportTransform))},getPointer:function(v,w){if(this._absolutePointer&&!w)return this._absolutePointer;if(this._pointer&&w)return this._pointer;var x=r(v),C=this.upperCanvasEl,T=C.getBoundingClientRect(),S=T.width||0,M=T.height||0,O;(!S||!M)&&("top"in T&&"bottom"in T&&(M=Math.abs(T.top-T.bottom)),"right"in T&&"left"in T&&(S=Math.abs(T.right-T.left))),this.calcOffset(),x.x=x.x-this._offset.left,x.y=x.y-this._offset.top,w||(x=this.restorePointerVpt(x));var V=this.getRetinaScaling();return V!==1&&(x.x/=V,x.y/=V),S===0||M===0?O={width:1,height:1}:O={width:C.width/S,height:C.height/M},{x:x.x*O.width,y:x.y*O.height}},_createUpperCanvas:function(){var v=this.lowerCanvasEl.className.replace(/\s*lower-canvas\s*/,""),w=this.lowerCanvasEl,x=this.upperCanvasEl;x?x.className="":(x=this._createCanvasElement(),this.upperCanvasEl=x),e.util.addClass(x,"upper-canvas "+v),this.wrapperEl.appendChild(x),this._copyCanvasStyle(w,x),this._applyCanvasStyle(x),this.contextTop=x.getContext("2d")},getTopContext:function(){return this.contextTop},_createCacheCanvas:function(){this.cacheCanvasEl=this._createCanvasElement(),this.cacheCanvasEl.setAttribute("width",this.width),this.cacheCanvasEl.setAttribute("height",this.height),this.contextCache=this.cacheCanvasEl.getContext("2d")},_initWrapperElement:function(){this.wrapperEl=e.util.wrapElement(this.lowerCanvasEl,"div",{class:this.containerClass}),e.util.setStyle(this.wrapperEl,{width:this.width+"px",height:this.height+"px",position:"relative"}),e.util.makeElementUnselectable(this.wrapperEl)},_applyCanvasStyle:function(v){var w=this.width||v.width,x=this.height||v.height;e.util.setStyle(v,{position:"absolute",width:w+"px",height:x+"px",left:0,top:0,"touch-action":this.allowTouchScrolling?"manipulation":"none","-ms-touch-action":this.allowTouchScrolling?"manipulation":"none"}),v.width=w,v.height=x,e.util.makeElementUnselectable(v)},_copyCanvasStyle:function(v,w){w.style.cssText=v.style.cssText},getSelectionContext:function(){return this.contextTop},getSelectionElement:function(){return this.upperCanvasEl},getActiveObject:function(){return this._activeObject},getActiveObjects:function(){var v=this._activeObject;return v?v.type==="activeSelection"&&v._objects?v._objects.slice(0):[v]:[]},_onObjectRemoved:function(v){v===this._activeObject&&(this.fire("before:selection:cleared",{target:v}),this._discardActiveObject(),this.fire("selection:cleared",{target:v}),v.fire("deselected")),v===this._hoveredTarget&&(this._hoveredTarget=null,this._hoveredTargets=[]),this.callSuper("_onObjectRemoved",v)},_fireSelectionEvents:function(v,w){var x=!1,C=this.getActiveObjects(),T=[],S=[];v.forEach(function(M){C.indexOf(M)===-1&&(x=!0,M.fire("deselected",{e:w,target:M}),S.push(M))}),C.forEach(function(M){v.indexOf(M)===-1&&(x=!0,M.fire("selected",{e:w,target:M}),T.push(M))}),v.length>0&&C.length>0?x&&this.fire("selection:updated",{e:w,selected:T,deselected:S}):C.length>0?this.fire("selection:created",{e:w,selected:T}):v.length>0&&this.fire("selection:cleared",{e:w,deselected:S})},setActiveObject:function(v,w){var x=this.getActiveObjects();return this._setActiveObject(v,w),this._fireSelectionEvents(x,w),this},_setActiveObject:function(v,w){return this._activeObject===v||!this._discardActiveObject(w,v)||v.onSelect({e:w})?!1:(this._activeObject=v,!0)},_discardActiveObject:function(v,w){var x=this._activeObject;if(x){if(x.onDeselect({e:v,object:w}))return!1;this._activeObject=null}return!0},discardActiveObject:function(v){var w=this.getActiveObjects(),x=this.getActiveObject();return w.length&&this.fire("before:selection:cleared",{target:x,e:v}),this._discardActiveObject(v),this._fireSelectionEvents(w,v),this},dispose:function(){var v=this.wrapperEl;return this.removeListeners(),v.removeChild(this.upperCanvasEl),v.removeChild(this.lowerCanvasEl),this.contextCache=null,this.contextTop=null,["upperCanvasEl","cacheCanvasEl"].forEach(function(w){e.util.cleanUpJsdomNode(this[w]),this[w]=void 0}.bind(this)),v.parentNode&&v.parentNode.replaceChild(this.lowerCanvasEl,this.wrapperEl),delete this.wrapperEl,e.StaticCanvas.prototype.dispose.call(this),this},clear:function(){return this.discardActiveObject(),this.clearContext(this.contextTop),this.callSuper("clear")},drawControls:function(v){var w=this._activeObject;w&&w._renderControls(v)},_toObject:function(v,w,x){var C=this._realizeGroupTransformOnObject(v),T=this.callSuper("_toObject",v,w,x);return this._unwindGroupTransformOnObject(v,C),T},_realizeGroupTransformOnObject:function(v){if(v.group&&v.group.type==="activeSelection"&&this._activeObject===v.group){var w=["angle","flipX","flipY","left","scaleX","scaleY","skewX","skewY","top"],x={};return w.forEach(function(C){x[C]=v[C]}),e.util.addTransformToObject(v,this._activeObject.calcOwnMatrix()),x}else return null},_unwindGroupTransformOnObject:function(v,w){w&&v.set(w)},_setSVGObject:function(v,w,x){var C=this._realizeGroupTransformOnObject(w);this.callSuper("_setSVGObject",v,w,x),this._unwindGroupTransformOnObject(w,C)},setViewportTransform:function(v){this.renderOnAddRemove&&this._activeObject&&this._activeObject.isEditing&&this._activeObject.clearContextTop(),e.StaticCanvas.prototype.setViewportTransform.call(this,v)}});for(var b in e.StaticCanvas)b!=="prototype"&&(e.Canvas[b]=e.StaticCanvas[b])}(),function(){var r=e.util.addListener,h=e.util.removeListener,y=3,b=2,v=1,w={passive:!1};function x(C,T){return C.button&&C.button===T-1}e.util.object.extend(e.Canvas.prototype,{mainTouchId:null,_initEventListeners:function(){this.removeListeners(),this._bindEvents(),this.addOrRemove(r,"add")},_getEventPrefix:function(){return this.enablePointerEvents?"pointer":"mouse"},addOrRemove:function(C,T){var S=this.upperCanvasEl,M=this._getEventPrefix();C(e.window,"resize",this._onResize),C(S,M+"down",this._onMouseDown),C(S,M+"move",this._onMouseMove,w),C(S,M+"out",this._onMouseOut),C(S,M+"enter",this._onMouseEnter),C(S,"wheel",this._onMouseWheel),C(S,"contextmenu",this._onContextMenu),C(S,"dblclick",this._onDoubleClick),C(S,"dragover",this._onDragOver),C(S,"dragenter",this._onDragEnter),C(S,"dragleave",this._onDragLeave),C(S,"drop",this._onDrop),this.enablePointerEvents||C(S,"touchstart",this._onTouchStart,w),typeof eventjs<"u"&&T in eventjs&&(eventjs[T](S,"gesture",this._onGesture),eventjs[T](S,"drag",this._onDrag),eventjs[T](S,"orientation",this._onOrientationChange),eventjs[T](S,"shake",this._onShake),eventjs[T](S,"longpress",this._onLongPress))},removeListeners:function(){this.addOrRemove(h,"remove");var C=this._getEventPrefix();h(e.document,C+"up",this._onMouseUp),h(e.document,"touchend",this._onTouchEnd,w),h(e.document,C+"move",this._onMouseMove,w),h(e.document,"touchmove",this._onMouseMove,w)},_bindEvents:function(){this.eventsBound||(this._onMouseDown=this._onMouseDown.bind(this),this._onTouchStart=this._onTouchStart.bind(this),this._onMouseMove=this._onMouseMove.bind(this),this._onMouseUp=this._onMouseUp.bind(this),this._onTouchEnd=this._onTouchEnd.bind(this),this._onResize=this._onResize.bind(this),this._onGesture=this._onGesture.bind(this),this._onDrag=this._onDrag.bind(this),this._onShake=this._onShake.bind(this),this._onLongPress=this._onLongPress.bind(this),this._onOrientationChange=this._onOrientationChange.bind(this),this._onMouseWheel=this._onMouseWheel.bind(this),this._onMouseOut=this._onMouseOut.bind(this),this._onMouseEnter=this._onMouseEnter.bind(this),this._onContextMenu=this._onContextMenu.bind(this),this._onDoubleClick=this._onDoubleClick.bind(this),this._onDragOver=this._onDragOver.bind(this),this._onDragEnter=this._simpleEventHandler.bind(this,"dragenter"),this._onDragLeave=this._simpleEventHandler.bind(this,"dragleave"),this._onDrop=this._onDrop.bind(this),this.eventsBound=!0)},_onGesture:function(C,T){this.__onTransformGesture&&this.__onTransformGesture(C,T)},_onDrag:function(C,T){this.__onDrag&&this.__onDrag(C,T)},_onMouseWheel:function(C){this.__onMouseWheel(C)},_onMouseOut:function(C){var T=this._hoveredTarget;this.fire("mouse:out",{target:T,e:C}),this._hoveredTarget=null,T&&T.fire("mouseout",{e:C});var S=this;this._hoveredTargets.forEach(function(M){S.fire("mouse:out",{target:T,e:C}),M&&T.fire("mouseout",{e:C})}),this._hoveredTargets=[]},_onMouseEnter:function(C){!this._currentTransform&&!this.findTarget(C)&&(this.fire("mouse:over",{target:null,e:C}),this._hoveredTarget=null,this._hoveredTargets=[])},_onOrientationChange:function(C,T){this.__onOrientationChange&&this.__onOrientationChange(C,T)},_onShake:function(C,T){this.__onShake&&this.__onShake(C,T)},_onLongPress:function(C,T){this.__onLongPress&&this.__onLongPress(C,T)},_onDragOver:function(C){C.preventDefault();var T=this._simpleEventHandler("dragover",C);this._fireEnterLeaveEvents(T,C)},_onDrop:function(C){return this._simpleEventHandler("drop:before",C),this._simpleEventHandler("drop",C)},_onContextMenu:function(C){return this.stopContextMenu&&(C.stopPropagation(),C.preventDefault()),!1},_onDoubleClick:function(C){this._cacheTransformEventData(C),this._handleEvent(C,"dblclick"),this._resetTransformEventData(C)},getPointerId:function(C){var T=C.changedTouches;return T?T[0]&&T[0].identifier:this.enablePointerEvents?C.pointerId:-1},_isMainEvent:function(C){return C.isPrimary===!0?!0:C.isPrimary===!1?!1:C.type==="touchend"&&C.touches.length===0?!0:C.changedTouches?C.changedTouches[0].identifier===this.mainTouchId:!0},_onTouchStart:function(C){C.preventDefault(),this.mainTouchId===null&&(this.mainTouchId=this.getPointerId(C)),this.__onMouseDown(C),this._resetTransformEventData();var T=this.upperCanvasEl,S=this._getEventPrefix();r(e.document,"touchend",this._onTouchEnd,w),r(e.document,"touchmove",this._onMouseMove,w),h(T,S+"down",this._onMouseDown)},_onMouseDown:function(C){this.__onMouseDown(C),this._resetTransformEventData();var T=this.upperCanvasEl,S=this._getEventPrefix();h(T,S+"move",this._onMouseMove,w),r(e.document,S+"up",this._onMouseUp),r(e.document,S+"move",this._onMouseMove,w)},_onTouchEnd:function(C){if(!(C.touches.length>0)){this.__onMouseUp(C),this._resetTransformEventData(),this.mainTouchId=null;var T=this._getEventPrefix();h(e.document,"touchend",this._onTouchEnd,w),h(e.document,"touchmove",this._onMouseMove,w);var S=this;this._willAddMouseDown&&clearTimeout(this._willAddMouseDown),this._willAddMouseDown=setTimeout(function(){r(S.upperCanvasEl,T+"down",S._onMouseDown),S._willAddMouseDown=0},400)}},_onMouseUp:function(C){this.__onMouseUp(C),this._resetTransformEventData();var T=this.upperCanvasEl,S=this._getEventPrefix();this._isMainEvent(C)&&(h(e.document,S+"up",this._onMouseUp),h(e.document,S+"move",this._onMouseMove,w),r(T,S+"move",this._onMouseMove,w))},_onMouseMove:function(C){!this.allowTouchScrolling&&C.preventDefault&&C.preventDefault(),this.__onMouseMove(C)},_onResize:function(){this.calcOffset()},_shouldRender:function(C){var T=this._activeObject;return!!T!=!!C||T&&C&&T!==C?!0:(T&&T.isEditing,!1)},__onMouseUp:function(C){var T,S=this._currentTransform,M=this._groupSelector,O=!1,V=!M||M.left===0&&M.top===0;if(this._cacheTransformEventData(C),T=this._target,this._handleEvent(C,"up:before"),x(C,y)){this.fireRightClick&&this._handleEvent(C,"up",y,V);return}if(x(C,b)){this.fireMiddleClick&&this._handleEvent(C,"up",b,V),this._resetTransformEventData();return}if(this.isDrawingMode&&this._isCurrentlyDrawing){this._onMouseUpInDrawingMode(C);return}if(!!this._isMainEvent(C)){if(S&&(this._finalizeCurrentTransform(C),O=S.actionPerformed),!V){var X=T===this._activeObject;this._maybeGroupObjects(C),O||(O=this._shouldRender(T)||!X&&T===this._activeObject)}var Z,ee;if(T){if(Z=T._findTargetCorner(this.getPointer(C,!0),e.util.isTouchEvent(C)),T.selectable&&T!==this._activeObject&&T.activeOn==="up")this.setActiveObject(T,C),O=!0;else{var J=T.controls[Z],ie=J&&J.getMouseUpHandler(C,T,J);ie&&(ee=this.getPointer(C),ie(C,S,ee.x,ee.y))}T.isMoving=!1}if(S&&(S.target!==T||S.corner!==Z)){var ke=S.target&&S.target.controls[S.corner],Le=ke&&ke.getMouseUpHandler(C,T,J);ee=ee||this.getPointer(C),Le&&Le(C,S,ee.x,ee.y)}this._setCursorFromEvent(C,T),this._handleEvent(C,"up",v,V),this._groupSelector=null,this._currentTransform=null,T&&(T.__corner=0),O?this.requestRenderAll():V||this.renderTop()}},_simpleEventHandler:function(C,T){var S=this.findTarget(T),M=this.targets,O={e:T,target:S,subTargets:M};if(this.fire(C,O),S&&S.fire(C,O),!M)return S;for(var V=0;V<M.length;V++)M[V].fire(C,O);return S},_handleEvent:function(C,T,S,M){var O=this._target,V=this.targets||[],X={e:C,target:O,subTargets:V,button:S||v,isClick:M||!1,pointer:this._pointer,absolutePointer:this._absolutePointer,transform:this._currentTransform};T==="up"&&(X.currentTarget=this.findTarget(C),X.currentSubTargets=this.targets),this.fire("mouse:"+T,X),O&&O.fire("mouse"+T,X);for(var Z=0;Z<V.length;Z++)V[Z].fire("mouse"+T,X)},_finalizeCurrentTransform:function(C){var T=this._currentTransform,S=T.target,M={e:C,target:S,transform:T,action:T.action};S._scaling&&(S._scaling=!1),S.setCoords(),(T.actionPerformed||this.stateful&&S.hasStateChanged())&&this._fire("modified",M)},_onMouseDownInDrawingMode:function(C){this._isCurrentlyDrawing=!0,this.getActiveObject()&&this.discardActiveObject(C).requestRenderAll();var T=this.getPointer(C);this.freeDrawingBrush.onMouseDown(T,{e:C,pointer:T}),this._handleEvent(C,"down")},_onMouseMoveInDrawingMode:function(C){if(this._isCurrentlyDrawing){var T=this.getPointer(C);this.freeDrawingBrush.onMouseMove(T,{e:C,pointer:T})}this.setCursor(this.freeDrawingCursor),this._handleEvent(C,"move")},_onMouseUpInDrawingMode:function(C){var T=this.getPointer(C);this._isCurrentlyDrawing=this.freeDrawingBrush.onMouseUp({e:C,pointer:T}),this._handleEvent(C,"up")},__onMouseDown:function(C){this._cacheTransformEventData(C),this._handleEvent(C,"down:before");var T=this._target;if(x(C,y)){this.fireRightClick&&this._handleEvent(C,"down",y);return}if(x(C,b)){this.fireMiddleClick&&this._handleEvent(C,"down",b);return}if(this.isDrawingMode){this._onMouseDownInDrawingMode(C);return}if(!!this._isMainEvent(C)&&!this._currentTransform){var S=this._pointer;this._previousPointer=S;var M=this._shouldRender(T),O=this._shouldGroup(C,T);if(this._shouldClearSelection(C,T)?this.discardActiveObject(C):O&&(this._handleGrouping(C,T),T=this._activeObject),this.selection&&(!T||!T.selectable&&!T.isEditing&&T!==this._activeObject)&&(this._groupSelector={ex:this._absolutePointer.x,ey:this._absolutePointer.y,top:0,left:0}),T){var V=T===this._activeObject;T.selectable&&T.activeOn==="down"&&this.setActiveObject(T,C);var X=T._findTargetCorner(this.getPointer(C,!0),e.util.isTouchEvent(C));if(T.__corner=X,T===this._activeObject&&(X||!O)){this._setupCurrentTransform(C,T,V);var Z=T.controls[X],S=this.getPointer(C),ee=Z&&Z.getMouseDownHandler(C,T,Z);ee&&ee(C,this._currentTransform,S.x,S.y)}}this._handleEvent(C,"down"),(M||O)&&this.requestRenderAll()}},_resetTransformEventData:function(){this._target=null,this._pointer=null,this._absolutePointer=null},_cacheTransformEventData:function(C){this._resetTransformEventData(),this._pointer=this.getPointer(C,!0),this._absolutePointer=this.restorePointerVpt(this._pointer),this._target=this._currentTransform?this._currentTransform.target:this.findTarget(C)||null},_beforeTransform:function(C){var T=this._currentTransform;this.stateful&&T.target.saveState(),this.fire("before:transform",{e:C,transform:T})},__onMouseMove:function(C){this._handleEvent(C,"move:before"),this._cacheTransformEventData(C);var T,S;if(this.isDrawingMode){this._onMouseMoveInDrawingMode(C);return}if(!!this._isMainEvent(C)){var M=this._groupSelector;M?(S=this._absolutePointer,M.left=S.x-M.ex,M.top=S.y-M.ey,this.renderTop()):this._currentTransform?this._transformObject(C):(T=this.findTarget(C)||null,this._setCursorFromEvent(C,T),this._fireOverOutEvents(T,C)),this._handleEvent(C,"move"),this._resetTransformEventData()}},_fireOverOutEvents:function(C,T){var S=this._hoveredTarget,M=this._hoveredTargets,O=this.targets,V=Math.max(M.length,O.length);this.fireSyntheticInOutEvents(C,T,{oldTarget:S,evtOut:"mouseout",canvasEvtOut:"mouse:out",evtIn:"mouseover",canvasEvtIn:"mouse:over"});for(var X=0;X<V;X++)this.fireSyntheticInOutEvents(O[X],T,{oldTarget:M[X],evtOut:"mouseout",evtIn:"mouseover"});this._hoveredTarget=C,this._hoveredTargets=this.targets.concat()},_fireEnterLeaveEvents:function(C,T){var S=this._draggedoverTarget,M=this._hoveredTargets,O=this.targets,V=Math.max(M.length,O.length);this.fireSyntheticInOutEvents(C,T,{oldTarget:S,evtOut:"dragleave",evtIn:"dragenter"});for(var X=0;X<V;X++)this.fireSyntheticInOutEvents(O[X],T,{oldTarget:M[X],evtOut:"dragleave",evtIn:"dragenter"});this._draggedoverTarget=C},fireSyntheticInOutEvents:function(C,T,S){var M,O,V=S.oldTarget,X,Z,ee=V!==C,J=S.canvasEvtIn,ie=S.canvasEvtOut;ee&&(M={e:T,target:C,previousTarget:V},O={e:T,target:V,nextTarget:C}),Z=C&&ee,X=V&&ee,X&&(ie&&this.fire(ie,O),V.fire(S.evtOut,O)),Z&&(J&&this.fire(J,M),C.fire(S.evtIn,M))},__onMouseWheel:function(C){this._cacheTransformEventData(C),this._handleEvent(C,"wheel"),this._resetTransformEventData()},_transformObject:function(C){var T=this.getPointer(C),S=this._currentTransform;S.reset=!1,S.shiftKey=C.shiftKey,S.altKey=C[this.centeredKey],this._performTransformAction(C,S,T),S.actionPerformed&&this.requestRenderAll()},_performTransformAction:function(C,T,S){var M=S.x,O=S.y,V=T.action,X=!1,Z=T.actionHandler;Z&&(X=Z(C,T,M,O)),V==="drag"&&X&&(T.target.isMoving=!0,this.setCursor(T.target.moveCursor||this.moveCursor)),T.actionPerformed=T.actionPerformed||X},_fire:e.controlsUtils.fireEvent,_setCursorFromEvent:function(C,T){if(!T)return this.setCursor(this.defaultCursor),!1;var S=T.hoverCursor||this.hoverCursor,M=this._activeObject&&this._activeObject.type==="activeSelection"?this._activeObject:null,O=(!M||!M.contains(T))&&T._findTargetCorner(this.getPointer(C,!0));O?this.setCursor(this.getCornerCursor(O,T,C)):(T.subTargetCheck&&this.targets.concat().reverse().map(function(V){S=V.hoverCursor||S}),this.setCursor(S))},getCornerCursor:function(C,T,S){var M=T.controls[C];return M.cursorStyleHandler(S,M,T)}})}(),function(){var r=Math.min,h=Math.max;e.util.object.extend(e.Canvas.prototype,{_shouldGroup:function(y,b){var v=this._activeObject;return v&&this._isSelectionKeyPressed(y)&&b&&b.selectable&&this.selection&&(v!==b||v.type==="activeSelection")&&!b.onSelect({e:y})},_handleGrouping:function(y,b){var v=this._activeObject;v.__corner||b===v&&(b=this.findTarget(y,!0),!b||!b.selectable)||(v&&v.type==="activeSelection"?this._updateActiveSelection(b,y):this._createActiveSelection(b,y))},_updateActiveSelection:function(y,b){var v=this._activeObject,w=v._objects.slice(0);v.contains(y)?(v.removeWithUpdate(y),this._hoveredTarget=y,this._hoveredTargets=this.targets.concat(),v.size()===1&&this._setActiveObject(v.item(0),b)):(v.addWithUpdate(y),this._hoveredTarget=v,this._hoveredTargets=this.targets.concat()),this._fireSelectionEvents(w,b)},_createActiveSelection:function(y,b){var v=this.getActiveObjects(),w=this._createGroup(y);this._hoveredTarget=w,this._setActiveObject(w,b),this._fireSelectionEvents(v,b)},_createGroup:function(y){var b=this._objects,v=b.indexOf(this._activeObject)<b.indexOf(y),w=v?[this._activeObject,y]:[y,this._activeObject];return this._activeObject.isEditing&&this._activeObject.exitEditing(),new e.ActiveSelection(w,{canvas:this})},_groupSelectedObjects:function(y){var b=this._collectObjects(y),v;b.length===1?this.setActiveObject(b[0],y):b.length>1&&(v=new e.ActiveSelection(b.reverse(),{canvas:this}),this.setActiveObject(v,y))},_collectObjects:function(y){for(var b=[],v,w=this._groupSelector.ex,x=this._groupSelector.ey,C=w+this._groupSelector.left,T=x+this._groupSelector.top,S=new e.Point(r(w,C),r(x,T)),M=new e.Point(h(w,C),h(x,T)),O=!this.selectionFullyContained,V=w===C&&x===T,X=this._objects.length;X--&&(v=this._objects[X],!(!(!v||!v.selectable||!v.visible)&&(O&&v.intersectsWithRect(S,M,!0)||v.isContainedWithinRect(S,M,!0)||O&&v.containsPoint(S,null,!0)||O&&v.containsPoint(M,null,!0))&&(b.push(v),V))););return b.length>1&&(b=b.filter(function(Z){return!Z.onSelect({e:y})})),b},_maybeGroupObjects:function(y){this.selection&&this._groupSelector&&this._groupSelectedObjects(y),this.setCursor(this.defaultCursor),this._groupSelector=null}})}(),function(){e.util.object.extend(e.StaticCanvas.prototype,{toDataURL:function(r){r||(r={});var h=r.format||"png",y=r.quality||1,b=(r.multiplier||1)*(r.enableRetinaScaling?this.getRetinaScaling():1),v=this.toCanvasElement(b,r);return e.util.toDataURL(v,h,y)},toCanvasElement:function(r,h){r=r||1,h=h||{};var y=(h.width||this.width)*r,b=(h.height||this.height)*r,v=this.getZoom(),w=this.width,x=this.height,C=v*r,T=this.viewportTransform,S=(T[4]-(h.left||0))*r,M=(T[5]-(h.top||0))*r,O=this.interactive,V=[C,0,0,C,S,M],X=this.enableRetinaScaling,Z=e.util.createCanvasElement(),ee=this.contextTop;return Z.width=y,Z.height=b,this.contextTop=null,this.enableRetinaScaling=!1,this.interactive=!1,this.viewportTransform=V,this.width=y,this.height=b,this.calcViewportBoundaries(),this.renderCanvas(Z.getContext("2d"),this._objects),this.viewportTransform=T,this.width=w,this.height=x,this.calcViewportBoundaries(),this.interactive=O,this.enableRetinaScaling=X,this.contextTop=ee,Z}})}(),e.util.object.extend(e.StaticCanvas.prototype,{loadFromJSON:function(r,h,y){if(!!r){var b=typeof r=="string"?JSON.parse(r):e.util.object.clone(r),v=this,w=b.clipPath,x=this.renderOnAddRemove;return this.renderOnAddRemove=!1,delete b.clipPath,this._enlivenObjects(b.objects,function(C){v.clear(),v._setBgOverlay(b,function(){w?v._enlivenObjects([w],function(T){v.clipPath=T[0],v.__setupCanvas.call(v,b,C,x,h)}):v.__setupCanvas.call(v,b,C,x,h)})},y),this}},__setupCanvas:function(r,h,y,b){var v=this;h.forEach(function(w,x){v.insertAt(w,x)}),this.renderOnAddRemove=y,delete r.objects,delete r.backgroundImage,delete r.overlayImage,delete r.background,delete r.overlay,this._setOptions(r),this.renderAll(),b&&b()},_setBgOverlay:function(r,h){var y={backgroundColor:!1,overlayColor:!1,backgroundImage:!1,overlayImage:!1};if(!r.backgroundImage&&!r.overlayImage&&!r.background&&!r.overlay){h&&h();return}var b=function(){y.backgroundImage&&y.overlayImage&&y.backgroundColor&&y.overlayColor&&h&&h()};this.__setBgOverlay("backgroundImage",r.backgroundImage,y,b),this.__setBgOverlay("overlayImage",r.overlayImage,y,b),this.__setBgOverlay("backgroundColor",r.background,y,b),this.__setBgOverlay("overlayColor",r.overlay,y,b)},__setBgOverlay:function(r,h,y,b){var v=this;if(!h){y[r]=!0,b&&b();return}r==="backgroundImage"||r==="overlayImage"?e.util.enlivenObjects([h],function(w){v[r]=w[0],y[r]=!0,b&&b()}):this["set"+e.util.string.capitalize(r,!0)](h,function(){y[r]=!0,b&&b()})},_enlivenObjects:function(r,h,y){if(!r||r.length===0){h&&h([]);return}e.util.enlivenObjects(r,function(b){h&&h(b)},null,y)},_toDataURL:function(r,h){this.clone(function(y){h(y.toDataURL(r))})},_toDataURLWithMultiplier:function(r,h,y){this.clone(function(b){y(b.toDataURLWithMultiplier(r,h))})},clone:function(r,h){var y=JSON.stringify(this.toJSON(h));this.cloneWithoutData(function(b){b.loadFromJSON(y,function(){r&&r(b)})})},cloneWithoutData:function(r){var h=e.util.createCanvasElement();h.width=this.width,h.height=this.height;var y=new e.Canvas(h);this.backgroundImage?(y.setBackgroundImage(this.backgroundImage.src,function(){y.renderAll(),r&&r(y)}),y.backgroundImageOpacity=this.backgroundImageOpacity,y.backgroundImageStretch=this.backgroundImageStretch):r&&r(y)}}),function(r){var h=r.fabric||(r.fabric={}),y=h.util.object.extend,b=h.util.object.clone,v=h.util.toFixed,w=h.util.string.capitalize,x=h.util.degreesToRadians,C=!h.isLikelyNode,T=2;h.Object||(h.Object=h.util.createClass(h.CommonMethods,{type:"object",originX:"left",originY:"top",top:0,left:0,width:0,height:0,scaleX:1,scaleY:1,flipX:!1,flipY:!1,opacity:1,angle:0,skewX:0,skewY:0,cornerSize:13,touchCornerSize:24,transparentCorners:!0,hoverCursor:null,moveCursor:null,padding:0,borderColor:"rgb(178,204,255)",borderDashArray:null,cornerColor:"rgb(178,204,255)",cornerStrokeColor:null,cornerStyle:"rect",cornerDashArray:null,centeredScaling:!1,centeredRotation:!0,fill:"rgb(0,0,0)",fillRule:"nonzero",globalCompositeOperation:"source-over",backgroundColor:"",selectionBackgroundColor:"",stroke:null,strokeWidth:1,strokeDashArray:null,strokeDashOffset:0,strokeLineCap:"butt",strokeLineJoin:"miter",strokeMiterLimit:4,shadow:null,borderOpacityWhenMoving:.4,borderScaleFactor:1,minScaleLimit:0,selectable:!0,evented:!0,visible:!0,hasControls:!0,hasBorders:!0,perPixelTargetFind:!1,includeDefaultValues:!0,lockMovementX:!1,lockMovementY:!1,lockRotation:!1,lockScalingX:!1,lockScalingY:!1,lockSkewingX:!1,lockSkewingY:!1,lockScalingFlip:!1,excludeFromExport:!1,objectCaching:C,statefullCache:!1,noScaleCache:!0,strokeUniform:!1,dirty:!0,__corner:0,paintFirst:"fill",activeOn:"down",stateProperties:"top left width height scaleX scaleY flipX flipY originX originY transformMatrix stroke strokeWidth strokeDashArray strokeLineCap strokeDashOffset strokeLineJoin strokeMiterLimit angle opacity fill globalCompositeOperation shadow visible backgroundColor skewX skewY fillRule paintFirst clipPath strokeUniform".split(" "),cacheProperties:"fill stroke strokeWidth strokeDashArray width height paintFirst strokeUniform strokeLineCap strokeDashOffset strokeLineJoin strokeMiterLimit backgroundColor clipPath".split(" "),colorProperties:"fill stroke backgroundColor".split(" "),clipPath:void 0,inverted:!1,absolutePositioned:!1,initialize:function(S){S&&this.setOptions(S)},_createCacheCanvas:function(){this._cacheProperties={},this._cacheCanvas=h.util.createCanvasElement(),this._cacheContext=this._cacheCanvas.getContext("2d"),this._updateCacheCanvas(),this.dirty=!0},_limitCacheSize:function(S){var M=h.perfLimitSizeTotal,O=S.width,V=S.height,X=h.maxCacheSideLimit,Z=h.minCacheSideLimit;if(O<=X&&V<=X&&O*V<=M)return O<Z&&(S.width=Z),V<Z&&(S.height=Z),S;var ee=O/V,J=h.util.limitDimsByArea(ee,M),ie=h.util.capValue,ke=ie(Z,J.x,X),Le=ie(Z,J.y,X);return O>ke&&(S.zoomX/=O/ke,S.width=ke,S.capped=!0),V>Le&&(S.zoomY/=V/Le,S.height=Le,S.capped=!0),S},_getCacheCanvasDimensions:function(){var S=this.getTotalObjectScaling(),M=this._getTransformedDimensions(0,0),O=M.x*S.scaleX/this.scaleX,V=M.y*S.scaleY/this.scaleY;return{width:O+T,height:V+T,zoomX:S.scaleX,zoomY:S.scaleY,x:O,y:V}},_updateCacheCanvas:function(){var S=this.canvas;if(this.noScaleCache&&S&&S._currentTransform){var M=S._currentTransform.target,O=S._currentTransform.action;if(this===M&&O.slice&&O.slice(0,5)==="scale")return!1}var V=this._cacheCanvas,X=this._limitCacheSize(this._getCacheCanvasDimensions()),Z=h.minCacheSideLimit,ee=X.width,J=X.height,ie,ke,Le=X.zoomX,fe=X.zoomY,Te=ee!==this.cacheWidth||J!==this.cacheHeight,_e=this.zoomX!==Le||this.zoomY!==fe,ve=Te||_e,rt=0,nt=0,Tt=!1;if(Te){var We=this._cacheCanvas.width,be=this._cacheCanvas.height,Ce=ee>We||J>be,Be=(ee<We*.9||J<be*.9)&&We>Z&&be>Z;Tt=Ce||Be,Ce&&!X.capped&&(ee>Z||J>Z)&&(rt=ee*.1,nt=J*.1)}return this instanceof h.Text&&this.path&&(ve=!0,Tt=!0,rt+=this.getHeightOfLine(0)*this.zoomX,nt+=this.getHeightOfLine(0)*this.zoomY),ve?(Tt?(V.width=Math.ceil(ee+rt),V.height=Math.ceil(J+nt)):(this._cacheContext.setTransform(1,0,0,1,0,0),this._cacheContext.clearRect(0,0,V.width,V.height)),ie=X.x/2,ke=X.y/2,this.cacheTranslationX=Math.round(V.width/2-ie)+ie,this.cacheTranslationY=Math.round(V.height/2-ke)+ke,this.cacheWidth=ee,this.cacheHeight=J,this._cacheContext.translate(this.cacheTranslationX,this.cacheTranslationY),this._cacheContext.scale(Le,fe),this.zoomX=Le,this.zoomY=fe,!0):!1},setOptions:function(S){this._setOptions(S),this._initGradient(S.fill,"fill"),this._initGradient(S.stroke,"stroke"),this._initPattern(S.fill,"fill"),this._initPattern(S.stroke,"stroke")},transform:function(S){var M=this.group&&!this.group._transformDone||this.group&&this.canvas&&S===this.canvas.contextTop,O=this.calcTransformMatrix(!M);S.transform(O[0],O[1],O[2],O[3],O[4],O[5])},toObject:function(S){var M=h.Object.NUM_FRACTION_DIGITS,O={type:this.type,version:h.version,originX:this.originX,originY:this.originY,left:v(this.left,M),top:v(this.top,M),width:v(this.width,M),height:v(this.height,M),fill:this.fill&&this.fill.toObject?this.fill.toObject():this.fill,stroke:this.stroke&&this.stroke.toObject?this.stroke.toObject():this.stroke,strokeWidth:v(this.strokeWidth,M),strokeDashArray:this.strokeDashArray?this.strokeDashArray.concat():this.strokeDashArray,strokeLineCap:this.strokeLineCap,strokeDashOffset:this.strokeDashOffset,strokeLineJoin:this.strokeLineJoin,strokeUniform:this.strokeUniform,strokeMiterLimit:v(this.strokeMiterLimit,M),scaleX:v(this.scaleX,M),scaleY:v(this.scaleY,M),angle:v(this.angle,M),flipX:this.flipX,flipY:this.flipY,opacity:v(this.opacity,M),shadow:this.shadow&&this.shadow.toObject?this.shadow.toObject():this.shadow,visible:this.visible,backgroundColor:this.backgroundColor,fillRule:this.fillRule,paintFirst:this.paintFirst,globalCompositeOperation:this.globalCompositeOperation,skewX:v(this.skewX,M),skewY:v(this.skewY,M)};return this.clipPath&&!this.clipPath.excludeFromExport&&(O.clipPath=this.clipPath.toObject(S),O.clipPath.inverted=this.clipPath.inverted,O.clipPath.absolutePositioned=this.clipPath.absolutePositioned),h.util.populateWithProperties(this,O,S),this.includeDefaultValues||(O=this._removeDefaultValues(O)),O},toDatalessObject:function(S){return this.toObject(S)},_removeDefaultValues:function(S){var M=h.util.getKlass(S.type).prototype,O=M.stateProperties;return O.forEach(function(V){V==="left"||V==="top"||(S[V]===M[V]&&delete S[V],Array.isArray(S[V])&&Array.isArray(M[V])&&S[V].length===0&&M[V].length===0&&delete S[V])}),S},toString:function(){return"#<fabric."+w(this.type)+">"},getObjectScaling:function(){if(!this.group)return{scaleX:this.scaleX,scaleY:this.scaleY};var S=h.util.qrDecompose(this.calcTransformMatrix());return{scaleX:Math.abs(S.scaleX),scaleY:Math.abs(S.scaleY)}},getTotalObjectScaling:function(){var S=this.getObjectScaling(),M=S.scaleX,O=S.scaleY;if(this.canvas){var V=this.canvas.getZoom(),X=this.canvas.getRetinaScaling();M*=V*X,O*=V*X}return{scaleX:M,scaleY:O}},getObjectOpacity:function(){var S=this.opacity;return this.group&&(S*=this.group.getObjectOpacity()),S},_set:function(S,M){var O=S==="scaleX"||S==="scaleY",V=this[S]!==M,X=!1;return O&&(M=this._constrainScale(M)),S==="scaleX"&&M<0?(this.flipX=!this.flipX,M*=-1):S==="scaleY"&&M<0?(this.flipY=!this.flipY,M*=-1):S==="shadow"&&M&&!(M instanceof h.Shadow)?M=new h.Shadow(M):S==="dirty"&&this.group&&this.group.set("dirty",M),this[S]=M,V&&(X=this.group&&this.group.isOnACache(),this.cacheProperties.indexOf(S)>-1?(this.dirty=!0,X&&this.group.set("dirty",!0)):X&&this.stateProperties.indexOf(S)>-1&&this.group.set("dirty",!0)),this},setOnGroup:function(){},getViewportTransform:function(){return this.canvas&&this.canvas.viewportTransform?this.canvas.viewportTransform:h.iMatrix.concat()},isNotVisible:function(){return this.opacity===0||!this.width&&!this.height&&this.strokeWidth===0||!this.visible},render:function(S){this.isNotVisible()||this.canvas&&this.canvas.skipOffscreen&&!this.group&&!this.isOnScreen()||(S.save(),this._setupCompositeOperation(S),this.drawSelectionBackground(S),this.transform(S),this._setOpacity(S),this._setShadow(S,this),this.shouldCache()?(this.renderCache(),this.drawCacheOnCanvas(S)):(this._removeCacheCanvas(),this.dirty=!1,this.drawObject(S),this.objectCaching&&this.statefullCache&&this.saveState({propertySet:"cacheProperties"})),S.restore())},renderCache:function(S){S=S||{},(!this._cacheCanvas||!this._cacheContext)&&this._createCacheCanvas(),this.isCacheDirty()&&(this.statefullCache&&this.saveState({propertySet:"cacheProperties"}),this.drawObject(this._cacheContext,S.forClipping),this.dirty=!1)},_removeCacheCanvas:function(){this._cacheCanvas=null,this._cacheContext=null,this.cacheWidth=0,this.cacheHeight=0},hasStroke:function(){return this.stroke&&this.stroke!=="transparent"&&this.strokeWidth!==0},hasFill:function(){return this.fill&&this.fill!=="transparent"},needsItsOwnCache:function(){return!!(this.paintFirst==="stroke"&&this.hasFill()&&this.hasStroke()&&typeof this.shadow=="object"||this.clipPath)},shouldCache:function(){return this.ownCaching=this.needsItsOwnCache()||this.objectCaching&&(!this.group||!this.group.isOnACache()),this.ownCaching},willDrawShadow:function(){return!!this.shadow&&(this.shadow.offsetX!==0||this.shadow.offsetY!==0)},drawClipPathOnCache:function(S,M){if(S.save(),M.inverted?S.globalCompositeOperation="destination-out":S.globalCompositeOperation="destination-in",M.absolutePositioned){var O=h.util.invertTransform(this.calcTransformMatrix());S.transform(O[0],O[1],O[2],O[3],O[4],O[5])}M.transform(S),S.scale(1/M.zoomX,1/M.zoomY),S.drawImage(M._cacheCanvas,-M.cacheTranslationX,-M.cacheTranslationY),S.restore()},drawObject:function(S,M){var O=this.fill,V=this.stroke;M?(this.fill="black",this.stroke="",this._setClippingProperties(S)):this._renderBackground(S),this._render(S),this._drawClipPath(S,this.clipPath),this.fill=O,this.stroke=V},_drawClipPath:function(S,M){!M||(M.canvas=this.canvas,M.shouldCache(),M._transformDone=!0,M.renderCache({forClipping:!0}),this.drawClipPathOnCache(S,M))},drawCacheOnCanvas:function(S){S.scale(1/this.zoomX,1/this.zoomY),S.drawImage(this._cacheCanvas,-this.cacheTranslationX,-this.cacheTranslationY)},isCacheDirty:function(S){if(this.isNotVisible())return!1;if(this._cacheCanvas&&this._cacheContext&&!S&&this._updateCacheCanvas())return!0;if(this.dirty||this.clipPath&&this.clipPath.absolutePositioned||this.statefullCache&&this.hasStateChanged("cacheProperties")){if(this._cacheCanvas&&this._cacheContext&&!S){var M=this.cacheWidth/this.zoomX,O=this.cacheHeight/this.zoomY;this._cacheContext.clearRect(-M/2,-O/2,M,O)}return!0}return!1},_renderBackground:function(S){if(!!this.backgroundColor){var M=this._getNonTransformedDimensions();S.fillStyle=this.backgroundColor,S.fillRect(-M.x/2,-M.y/2,M.x,M.y),this._removeShadow(S)}},_setOpacity:function(S){this.group&&!this.group._transformDone?S.globalAlpha=this.getObjectOpacity():S.globalAlpha*=this.opacity},_setStrokeStyles:function(S,M){var O=M.stroke;O&&(S.lineWidth=M.strokeWidth,S.lineCap=M.strokeLineCap,S.lineDashOffset=M.strokeDashOffset,S.lineJoin=M.strokeLineJoin,S.miterLimit=M.strokeMiterLimit,O.toLive?O.gradientUnits==="percentage"||O.gradientTransform||O.patternTransform?this._applyPatternForTransformedGradient(S,O):(S.strokeStyle=O.toLive(S,this),this._applyPatternGradientTransform(S,O)):S.strokeStyle=M.stroke)},_setFillStyles:function(S,M){var O=M.fill;O&&(O.toLive?(S.fillStyle=O.toLive(S,this),this._applyPatternGradientTransform(S,M.fill)):S.fillStyle=O)},_setClippingProperties:function(S){S.globalAlpha=1,S.strokeStyle="transparent",S.fillStyle="#000000"},_setLineDash:function(S,M){!M||M.length===0||(1&M.length&&M.push.apply(M,M),S.setLineDash(M))},_renderControls:function(S,M){var O=this.getViewportTransform(),V=this.calcTransformMatrix(),X,Z,ee;M=M||{},Z=typeof M.hasBorders<"u"?M.hasBorders:this.hasBorders,ee=typeof M.hasControls<"u"?M.hasControls:this.hasControls,V=h.util.multiplyTransformMatrices(O,V),X=h.util.qrDecompose(V),S.save(),S.translate(X.translateX,X.translateY),S.lineWidth=1*this.borderScaleFactor,this.group||(S.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1),this.flipX&&(X.angle-=180),S.rotate(x(this.group?X.angle:this.angle)),M.forActiveSelection||this.group?Z&&this.drawBordersInGroup(S,X,M):Z&&this.drawBorders(S,M),ee&&this.drawControls(S,M),S.restore()},_setShadow:function(S){if(!!this.shadow){var M=this.shadow,O=this.canvas,V,X=O&&O.viewportTransform[0]||1,Z=O&&O.viewportTransform[3]||1;M.nonScaling?V={scaleX:1,scaleY:1}:V=this.getObjectScaling(),O&&O._isRetinaScaling()&&(X*=h.devicePixelRatio,Z*=h.devicePixelRatio),S.shadowColor=M.color,S.shadowBlur=M.blur*h.browserShadowBlurConstant*(X+Z)*(V.scaleX+V.scaleY)/4,S.shadowOffsetX=M.offsetX*X*V.scaleX,S.shadowOffsetY=M.offsetY*Z*V.scaleY}},_removeShadow:function(S){!this.shadow||(S.shadowColor="",S.shadowBlur=S.shadowOffsetX=S.shadowOffsetY=0)},_applyPatternGradientTransform:function(S,M){if(!M||!M.toLive)return{offsetX:0,offsetY:0};var O=M.gradientTransform||M.patternTransform,V=-this.width/2+M.offsetX||0,X=-this.height/2+M.offsetY||0;return M.gradientUnits==="percentage"?S.transform(this.width,0,0,this.height,V,X):S.transform(1,0,0,1,V,X),O&&S.transform(O[0],O[1],O[2],O[3],O[4],O[5]),{offsetX:V,offsetY:X}},_renderPaintInOrder:function(S){this.paintFirst==="stroke"?(this._renderStroke(S),this._renderFill(S)):(this._renderFill(S),this._renderStroke(S))},_render:function(){},_renderFill:function(S){!this.fill||(S.save(),this._setFillStyles(S,this),this.fillRule==="evenodd"?S.fill("evenodd"):S.fill(),S.restore())},_renderStroke:function(S){if(!(!this.stroke||this.strokeWidth===0)){if(this.shadow&&!this.shadow.affectStroke&&this._removeShadow(S),S.save(),this.strokeUniform&&this.group){var M=this.getObjectScaling();S.scale(1/M.scaleX,1/M.scaleY)}else this.strokeUniform&&S.scale(1/this.scaleX,1/this.scaleY);this._setLineDash(S,this.strokeDashArray),this._setStrokeStyles(S,this),S.stroke(),S.restore()}},_applyPatternForTransformedGradient:function(S,M){var O=this._limitCacheSize(this._getCacheCanvasDimensions()),V=h.util.createCanvasElement(),X,Z=this.canvas.getRetinaScaling(),ee=O.x/this.scaleX/Z,J=O.y/this.scaleY/Z;V.width=ee,V.height=J,X=V.getContext("2d"),X.beginPath(),X.moveTo(0,0),X.lineTo(ee,0),X.lineTo(ee,J),X.lineTo(0,J),X.closePath(),X.translate(ee/2,J/2),X.scale(O.zoomX/this.scaleX/Z,O.zoomY/this.scaleY/Z),this._applyPatternGradientTransform(X,M),X.fillStyle=M.toLive(S),X.fill(),S.translate(-this.width/2-this.strokeWidth/2,-this.height/2-this.strokeWidth/2),S.scale(Z*this.scaleX/O.zoomX,Z*this.scaleY/O.zoomY),S.strokeStyle=X.createPattern(V,"no-repeat")},_findCenterFromElement:function(){return{x:this.left+this.width/2,y:this.top+this.height/2}},_assignTransformMatrixProps:function(){if(this.transformMatrix){var S=h.util.qrDecompose(this.transformMatrix);this.flipX=!1,this.flipY=!1,this.set("scaleX",S.scaleX),this.set("scaleY",S.scaleY),this.angle=S.angle,this.skewX=S.skewX,this.skewY=0}},_removeTransformMatrix:function(S){var M=this._findCenterFromElement();this.transformMatrix&&(this._assignTransformMatrixProps(),M=h.util.transformPoint(M,this.transformMatrix)),this.transformMatrix=null,S&&(this.scaleX*=S.scaleX,this.scaleY*=S.scaleY,this.cropX=S.cropX,this.cropY=S.cropY,M.x+=S.offsetLeft,M.y+=S.offsetTop,this.width=S.width,this.height=S.height),this.setPositionByOrigin(M,"center","center")},clone:function(S,M){var O=this.toObject(M);this.constructor.fromObject?this.constructor.fromObject(O,S):h.Object._fromObject("Object",O,S)},cloneAsImage:function(S,M){var O=this.toCanvasElement(M);return S&&S(new h.Image(O)),this},toCanvasElement:function(S){S||(S={});var M=h.util,O=M.saveObjectTransform(this),V=this.group,X=this.shadow,Z=Math.abs,ee=(S.multiplier||1)*(S.enableRetinaScaling?h.devicePixelRatio:1);delete this.group,S.withoutTransform&&M.resetObjectTransform(this),S.withoutShadow&&(this.shadow=null);var J=h.util.createCanvasElement(),ie=this.getBoundingRect(!0,!0),ke=this.shadow,Le,fe={x:0,y:0},Te,_e,ve;ke&&(Te=ke.blur,ke.nonScaling?Le={scaleX:1,scaleY:1}:Le=this.getObjectScaling(),fe.x=2*Math.round(Z(ke.offsetX)+Te)*Z(Le.scaleX),fe.y=2*Math.round(Z(ke.offsetY)+Te)*Z(Le.scaleY)),_e=ie.width+fe.x,ve=ie.height+fe.y,J.width=Math.ceil(_e),J.height=Math.ceil(ve);var rt=new h.StaticCanvas(J,{enableRetinaScaling:!1,renderOnAddRemove:!1,skipOffscreen:!1});S.format==="jpeg"&&(rt.backgroundColor="#fff"),this.setPositionByOrigin(new h.Point(rt.width/2,rt.height/2),"center","center");var nt=this.canvas;rt.add(this);var Tt=rt.toCanvasElement(ee||1,S);return this.shadow=X,this.set("canvas",nt),V&&(this.group=V),this.set(O).setCoords(),rt._objects=[],rt.dispose(),rt=null,Tt},toDataURL:function(S){return S||(S={}),h.util.toDataURL(this.toCanvasElement(S),S.format||"png",S.quality||1)},isType:function(S){return arguments.length>1?Array.from(arguments).includes(this.type):this.type===S},complexity:function(){return 1},toJSON:function(S){return this.toObject(S)},rotate:function(S){var M=(this.originX!=="center"||this.originY!=="center")&&this.centeredRotation;return M&&this._setOriginToCenter(),this.set("angle",S),M&&this._resetOrigin(),this},centerH:function(){return this.canvas&&this.canvas.centerObjectH(this),this},viewportCenterH:function(){return this.canvas&&this.canvas.viewportCenterObjectH(this),this},centerV:function(){return this.canvas&&this.canvas.centerObjectV(this),this},viewportCenterV:function(){return this.canvas&&this.canvas.viewportCenterObjectV(this),this},center:function(){return this.canvas&&this.canvas.centerObject(this),this},viewportCenter:function(){return this.canvas&&this.canvas.viewportCenterObject(this),this},getLocalPointer:function(S,M){M=M||this.canvas.getPointer(S);var O=new h.Point(M.x,M.y),V=this._getLeftTopCoords();return this.angle&&(O=h.util.rotatePoint(O,V,x(-this.angle))),{x:O.x-V.x,y:O.y-V.y}},_setupCompositeOperation:function(S){this.globalCompositeOperation&&(S.globalCompositeOperation=this.globalCompositeOperation)},dispose:function(){h.runningAnimations&&h.runningAnimations.cancelByTarget(this)}}),h.util.createAccessors&&h.util.createAccessors(h.Object),y(h.Object.prototype,h.Observable),h.Object.NUM_FRACTION_DIGITS=2,h.Object.ENLIVEN_PROPS=["clipPath"],h.Object._fromObject=function(S,M,O,V){var X=h[S];M=b(M,!0),h.util.enlivenPatterns([M.fill,M.stroke],function(Z){typeof Z[0]<"u"&&(M.fill=Z[0]),typeof Z[1]<"u"&&(M.stroke=Z[1]),h.util.enlivenObjectEnlivables(M,M,function(){var ee=V?new X(M[V],M):new X(M);O&&O(ee)})})},h.Object.__uid=0)}(i),function(){var r=e.util.degreesToRadians,h={left:-.5,center:0,right:.5},y={top:-.5,center:0,bottom:.5};e.util.object.extend(e.Object.prototype,{translateToGivenOrigin:function(b,v,w,x,C){var T=b.x,S=b.y,M,O,V;return typeof v=="string"?v=h[v]:v-=.5,typeof x=="string"?x=h[x]:x-=.5,M=x-v,typeof w=="string"?w=y[w]:w-=.5,typeof C=="string"?C=y[C]:C-=.5,O=C-w,(M||O)&&(V=this._getTransformedDimensions(),T=b.x+M*V.x,S=b.y+O*V.y),new e.Point(T,S)},translateToCenterPoint:function(b,v,w){var x=this.translateToGivenOrigin(b,v,w,"center","center");return this.angle?e.util.rotatePoint(x,b,r(this.angle)):x},translateToOriginPoint:function(b,v,w){var x=this.translateToGivenOrigin(b,"center","center",v,w);return this.angle?e.util.rotatePoint(x,b,r(this.angle)):x},getCenterPoint:function(){var b=new e.Point(this.left,this.top);return this.translateToCenterPoint(b,this.originX,this.originY)},getPointByOrigin:function(b,v){var w=this.getCenterPoint();return this.translateToOriginPoint(w,b,v)},toLocalPoint:function(b,v,w){var x=this.getCenterPoint(),C,T;return typeof v<"u"&&typeof w<"u"?C=this.translateToGivenOrigin(x,"center","center",v,w):C=new e.Point(this.left,this.top),T=new e.Point(b.x,b.y),this.angle&&(T=e.util.rotatePoint(T,x,-r(this.angle))),T.subtractEquals(C)},setPositionByOrigin:function(b,v,w){var x=this.translateToCenterPoint(b,v,w),C=this.translateToOriginPoint(x,this.originX,this.originY);this.set("left",C.x),this.set("top",C.y)},adjustPosition:function(b){var v=r(this.angle),w=this.getScaledWidth(),x=e.util.cos(v)*w,C=e.util.sin(v)*w,T,S;typeof this.originX=="string"?T=h[this.originX]:T=this.originX-.5,typeof b=="string"?S=h[b]:S=b-.5,this.left+=x*(S-T),this.top+=C*(S-T),this.setCoords(),this.originX=b},_setOriginToCenter:function(){this._originalOriginX=this.originX,this._originalOriginY=this.originY;var b=this.getCenterPoint();this.originX="center",this.originY="center",this.left=b.x,this.top=b.y},_resetOrigin:function(){var b=this.translateToOriginPoint(this.getCenterPoint(),this._originalOriginX,this._originalOriginY);this.originX=this._originalOriginX,this.originY=this._originalOriginY,this.left=b.x,this.top=b.y,this._originalOriginX=null,this._originalOriginY=null},_getLeftTopCoords:function(){return this.translateToOriginPoint(this.getCenterPoint(),"left","top")}})}(),function(){function r(w){return[new e.Point(w.tl.x,w.tl.y),new e.Point(w.tr.x,w.tr.y),new e.Point(w.br.x,w.br.y),new e.Point(w.bl.x,w.bl.y)]}var h=e.util,y=h.degreesToRadians,b=h.multiplyTransformMatrices,v=h.transformPoint;h.object.extend(e.Object.prototype,{oCoords:null,aCoords:null,lineCoords:null,ownMatrixCache:null,matrixCache:null,controls:{},_getCoords:function(w,x){return x?w?this.calcACoords():this.calcLineCoords():((!this.aCoords||!this.lineCoords)&&this.setCoords(!0),w?this.aCoords:this.lineCoords)},getCoords:function(w,x){return r(this._getCoords(w,x))},intersectsWithRect:function(w,x,C,T){var S=this.getCoords(C,T),M=e.Intersection.intersectPolygonRectangle(S,w,x);return M.status==="Intersection"},intersectsWithObject:function(w,x,C){var T=e.Intersection.intersectPolygonPolygon(this.getCoords(x,C),w.getCoords(x,C));return T.status==="Intersection"||w.isContainedWithinObject(this,x,C)||this.isContainedWithinObject(w,x,C)},isContainedWithinObject:function(w,x,C){for(var T=this.getCoords(x,C),S=x?w.aCoords:w.lineCoords,M=0,O=w._getImageLines(S);M<4;M++)if(!w.containsPoint(T[M],O))return!1;return!0},isContainedWithinRect:function(w,x,C,T){var S=this.getBoundingRect(C,T);return S.left>=w.x&&S.left+S.width<=x.x&&S.top>=w.y&&S.top+S.height<=x.y},containsPoint:function(w,M,C,T){var S=this._getCoords(C,T),M=M||this._getImageLines(S),O=this._findCrossPoints(w,M);return O!==0&&O%2===1},isOnScreen:function(w){if(!this.canvas)return!1;var x=this.canvas.vptCoords.tl,C=this.canvas.vptCoords.br,T=this.getCoords(!0,w);return T.some(function(S){return S.x<=C.x&&S.x>=x.x&&S.y<=C.y&&S.y>=x.y})||this.intersectsWithRect(x,C,!0,w)?!0:this._containsCenterOfCanvas(x,C,w)},_containsCenterOfCanvas:function(w,x,C){var T={x:(w.x+x.x)/2,y:(w.y+x.y)/2};return!!this.containsPoint(T,null,!0,C)},isPartiallyOnScreen:function(w){if(!this.canvas)return!1;var x=this.canvas.vptCoords.tl,C=this.canvas.vptCoords.br;if(this.intersectsWithRect(x,C,!0,w))return!0;var T=this.getCoords(!0,w).every(function(S){return(S.x>=C.x||S.x<=x.x)&&(S.y>=C.y||S.y<=x.y)});return T&&this._containsCenterOfCanvas(x,C,w)},_getImageLines:function(w){var x={topline:{o:w.tl,d:w.tr},rightline:{o:w.tr,d:w.br},bottomline:{o:w.br,d:w.bl},leftline:{o:w.bl,d:w.tl}};return x},_findCrossPoints:function(w,x){var C,T,S,M,O,V=0,X;for(var Z in x)if(X=x[Z],!(X.o.y<w.y&&X.d.y<w.y)&&!(X.o.y>=w.y&&X.d.y>=w.y)&&(X.o.x===X.d.x&&X.o.x>=w.x?O=X.o.x:(C=0,T=(X.d.y-X.o.y)/(X.d.x-X.o.x),S=w.y-C*w.x,M=X.o.y-T*X.o.x,O=-(S-M)/(C-T)),O>=w.x&&(V+=1),V===2))break;return V},getBoundingRect:function(w,x){var C=this.getCoords(w,x);return h.makeBoundingBoxFromPoints(C)},getScaledWidth:function(){return this._getTransformedDimensions().x},getScaledHeight:function(){return this._getTransformedDimensions().y},_constrainScale:function(w){return Math.abs(w)<this.minScaleLimit?w<0?-this.minScaleLimit:this.minScaleLimit:w===0?1e-4:w},scale:function(w){return this._set("scaleX",w),this._set("scaleY",w),this.setCoords()},scaleToWidth:function(w,x){var C=this.getBoundingRect(x).width/this.getScaledWidth();return this.scale(w/this.width/C)},scaleToHeight:function(w,x){var C=this.getBoundingRect(x).height/this.getScaledHeight();return this.scale(w/this.height/C)},calcLineCoords:function(){var w=this.getViewportTransform(),x=this.padding,C=y(this.angle),T=h.cos(C),S=h.sin(C),M=T*x,O=S*x,V=M+O,X=M-O,Z=this.calcACoords(),ee={tl:v(Z.tl,w),tr:v(Z.tr,w),bl:v(Z.bl,w),br:v(Z.br,w)};return x&&(ee.tl.x-=X,ee.tl.y-=V,ee.tr.x+=V,ee.tr.y-=X,ee.bl.x-=V,ee.bl.y+=X,ee.br.x+=X,ee.br.y+=V),ee},calcOCoords:function(){var w=this._calcRotateMatrix(),x=this._calcTranslateMatrix(),C=this.getViewportTransform(),T=b(C,x),S=b(T,w),S=b(S,[1/C[0],0,0,1/C[3],0,0]),M=this._calculateCurrentDimensions(),O={};return this.forEachControl(function(V,X,Z){O[X]=V.positionHandler(M,S,Z)}),O},calcACoords:function(){var w=this._calcRotateMatrix(),x=this._calcTranslateMatrix(),C=b(x,w),T=this._getTransformedDimensions(),S=T.x/2,M=T.y/2;return{tl:v({x:-S,y:-M},C),tr:v({x:S,y:-M},C),bl:v({x:-S,y:M},C),br:v({x:S,y:M},C)}},setCoords:function(w){return this.aCoords=this.calcACoords(),this.lineCoords=this.group?this.aCoords:this.calcLineCoords(),w?this:(this.oCoords=this.calcOCoords(),this._setCornerCoords&&this._setCornerCoords(),this)},_calcRotateMatrix:function(){return h.calcRotateMatrix(this)},_calcTranslateMatrix:function(){var w=this.getCenterPoint();return[1,0,0,1,w.x,w.y]},transformMatrixKey:function(w){var x="_",C="";return!w&&this.group&&(C=this.group.transformMatrixKey(w)+x),C+this.top+x+this.left+x+this.scaleX+x+this.scaleY+x+this.skewX+x+this.skewY+x+this.angle+x+this.originX+x+this.originY+x+this.width+x+this.height+x+this.strokeWidth+this.flipX+this.flipY},calcTransformMatrix:function(w){var x=this.calcOwnMatrix();if(w||!this.group)return x;var C=this.transformMatrixKey(w),T=this.matrixCache||(this.matrixCache={});return T.key===C?T.value:(this.group&&(x=b(this.group.calcTransformMatrix(!1),x)),T.key=C,T.value=x,x)},calcOwnMatrix:function(){var w=this.transformMatrixKey(!0),x=this.ownMatrixCache||(this.ownMatrixCache={});if(x.key===w)return x.value;var C=this._calcTranslateMatrix(),T={angle:this.angle,translateX:C[4],translateY:C[5],scaleX:this.scaleX,scaleY:this.scaleY,skewX:this.skewX,skewY:this.skewY,flipX:this.flipX,flipY:this.flipY};return x.key=w,x.value=h.composeMatrix(T),x.value},_getNonTransformedDimensions:function(){var w=this.strokeWidth,x=this.width+w,C=this.height+w;return{x,y:C}},_getTransformedDimensions:function(w,x){typeof w>"u"&&(w=this.skewX),typeof x>"u"&&(x=this.skewY);var C,T,S,M=w===0&&x===0;if(this.strokeUniform?(T=this.width,S=this.height):(C=this._getNonTransformedDimensions(),T=C.x,S=C.y),M)return this._finalizeDimensions(T*this.scaleX,S*this.scaleY);var O=h.sizeAfterTransform(T,S,{scaleX:this.scaleX,scaleY:this.scaleY,skewX:w,skewY:x});return this._finalizeDimensions(O.x,O.y)},_finalizeDimensions:function(w,x){return this.strokeUniform?{x:w+this.strokeWidth,y:x+this.strokeWidth}:{x:w,y:x}},_calculateCurrentDimensions:function(){var w=this.getViewportTransform(),x=this._getTransformedDimensions(),C=v(x,w,!0);return C.scalarAdd(2*this.padding)}})}(),e.util.object.extend(e.Object.prototype,{sendToBack:function(){return this.group?e.StaticCanvas.prototype.sendToBack.call(this.group,this):this.canvas&&this.canvas.sendToBack(this),this},bringToFront:function(){return this.group?e.StaticCanvas.prototype.bringToFront.call(this.group,this):this.canvas&&this.canvas.bringToFront(this),this},sendBackwards:function(r){return this.group?e.StaticCanvas.prototype.sendBackwards.call(this.group,this,r):this.canvas&&this.canvas.sendBackwards(this,r),this},bringForward:function(r){return this.group?e.StaticCanvas.prototype.bringForward.call(this.group,this,r):this.canvas&&this.canvas.bringForward(this,r),this},moveTo:function(r){return this.group&&this.group.type!=="activeSelection"?e.StaticCanvas.prototype.moveTo.call(this.group,this,r):this.canvas&&this.canvas.moveTo(this,r),this}}),function(){function r(y,b){if(b){if(b.toLive)return y+": url(#SVGID_"+b.id+"); ";var v=new e.Color(b),w=y+": "+v.toRgb()+"; ",x=v.getAlpha();return x!==1&&(w+=y+"-opacity: "+x.toString()+"; "),w}else return y+": none; "}var h=e.util.toFixed;e.util.object.extend(e.Object.prototype,{getSvgStyles:function(y){var b=this.fillRule?this.fillRule:"nonzero",v=this.strokeWidth?this.strokeWidth:"0",w=this.strokeDashArray?this.strokeDashArray.join(" "):"none",x=this.strokeDashOffset?this.strokeDashOffset:"0",C=this.strokeLineCap?this.strokeLineCap:"butt",T=this.strokeLineJoin?this.strokeLineJoin:"miter",S=this.strokeMiterLimit?this.strokeMiterLimit:"4",M=typeof this.opacity<"u"?this.opacity:"1",O=this.visible?"":" visibility: hidden;",V=y?"":this.getSvgFilter(),X=r("fill",this.fill),Z=r("stroke",this.stroke);return[Z,"stroke-width: ",v,"; ","stroke-dasharray: ",w,"; ","stroke-linecap: ",C,"; ","stroke-dashoffset: ",x,"; ","stroke-linejoin: ",T,"; ","stroke-miterlimit: ",S,"; ",X,"fill-rule: ",b,"; ","opacity: ",M,";",V,O].join("")},getSvgSpanStyles:function(y,b){var v="; ",x=y.fontFamily?"font-family: "+(y.fontFamily.indexOf("'")===-1&&y.fontFamily.indexOf('"')===-1?"'"+y.fontFamily+"'":y.fontFamily)+v:"",w=y.strokeWidth?"stroke-width: "+y.strokeWidth+v:"",x=x,C=y.fontSize?"font-size: "+y.fontSize+"px"+v:"",T=y.fontStyle?"font-style: "+y.fontStyle+v:"",S=y.fontWeight?"font-weight: "+y.fontWeight+v:"",M=y.fill?r("fill",y.fill):"",O=y.stroke?r("stroke",y.stroke):"",V=this.getSvgTextDecoration(y),X=y.deltaY?"baseline-shift: "+-y.deltaY+"; ":"";return V&&(V="text-decoration: "+V+v),[O,w,x,C,T,S,V,M,X,b?"white-space: pre; ":""].join("")},getSvgTextDecoration:function(y){return["overline","underline","line-through"].filter(function(b){return y[b.replace("-","")]}).join(" ")},getSvgFilter:function(){return this.shadow?"filter: url(#SVGID_"+this.shadow.id+");":""},getSvgCommons:function(){return[this.id?'id="'+this.id+'" ':"",this.clipPath?'clip-path="url(#'+this.clipPath.clipPathId+')" ':""].join("")},getSvgTransform:function(y,b){var v=y?this.calcTransformMatrix():this.calcOwnMatrix(),w='transform="'+e.util.matrixToSVG(v);return w+(b||"")+'" '},_setSVGBg:function(y){if(this.backgroundColor){var b=e.Object.NUM_FRACTION_DIGITS;y.push("		<rect ",this._getFillAttributes(this.backgroundColor),' x="',h(-this.width/2,b),'" y="',h(-this.height/2,b),'" width="',h(this.width,b),'" height="',h(this.height,b),`"></rect>
`)}},toSVG:function(y){return this._createBaseSVGMarkup(this._toSVG(y),{reviver:y})},toClipPathSVG:function(y){return"	"+this._createBaseClipPathSVGMarkup(this._toSVG(y),{reviver:y})},_createBaseClipPathSVGMarkup:function(y,b){b=b||{};var v=b.reviver,w=b.additionalTransform||"",x=[this.getSvgTransform(!0,w),this.getSvgCommons()].join(""),C=y.indexOf("COMMON_PARTS");return y[C]=x,v?v(y.join("")):y.join("")},_createBaseSVGMarkup:function(y,b){b=b||{};var v=b.noStyle,w=b.reviver,x=v?"":'style="'+this.getSvgStyles()+'" ',C=b.withShadow?'style="'+this.getSvgFilter()+'" ':"",T=this.clipPath,S=this.strokeUniform?'vector-effect="non-scaling-stroke" ':"",M=T&&T.absolutePositioned,O=this.stroke,V=this.fill,X=this.shadow,Z,ee=[],J,ie=y.indexOf("COMMON_PARTS"),ke=b.additionalTransform;return T&&(T.clipPathId="CLIPPATH_"+e.Object.__uid++,J='<clipPath id="'+T.clipPathId+`" >
`+T.toClipPathSVG(w)+`</clipPath>
`),M&&ee.push("<g ",C,this.getSvgCommons(),` >
`),ee.push("<g ",this.getSvgTransform(!1),M?"":C+this.getSvgCommons(),` >
`),Z=[x,S,v?"":this.addPaintOrder()," ",ke?'transform="'+ke+'" ':""].join(""),y[ie]=Z,V&&V.toLive&&ee.push(V.toSVG(this)),O&&O.toLive&&ee.push(O.toSVG(this)),X&&ee.push(X.toSVG(this)),T&&ee.push(J),ee.push(y.join("")),ee.push(`</g>
`),M&&ee.push(`</g>
`),w?w(ee.join("")):ee.join("")},addPaintOrder:function(){return this.paintFirst!=="fill"?' paint-order="'+this.paintFirst+'" ':""}})}(),function(){var r=e.util.object.extend,h="stateProperties";function y(v,w,x){var C={},T=!0;x.forEach(function(S){C[S]=v[S]}),r(v[w],C,T)}function b(v,w,x){if(v===w)return!0;if(Array.isArray(v)){if(!Array.isArray(w)||v.length!==w.length)return!1;for(var C=0,T=v.length;C<T;C++)if(!b(v[C],w[C]))return!1;return!0}else if(v&&typeof v=="object"){var S=Object.keys(v),M;if(!w||typeof w!="object"||!x&&S.length!==Object.keys(w).length)return!1;for(var C=0,T=S.length;C<T;C++)if(M=S[C],!(M==="canvas"||M==="group")&&!b(v[M],w[M]))return!1;return!0}}e.util.object.extend(e.Object.prototype,{hasStateChanged:function(v){v=v||h;var w="_"+v;return Object.keys(this[w]).length<this[v].length?!0:!b(this[w],this,!0)},saveState:function(v){var w=v&&v.propertySet||h,x="_"+w;return this[x]?(y(this,x,this[w]),v&&v.stateProperties&&y(this,x,v.stateProperties),this):this.setupState(v)},setupState:function(v){v=v||{};var w=v.propertySet||h;return v.propertySet=w,this["_"+w]={},this.saveState(v),this}})}(),function(){var r=e.util.degreesToRadians;e.util.object.extend(e.Object.prototype,{_findTargetCorner:function(h,y){if(!this.hasControls||this.group||!this.canvas||this.canvas._activeObject!==this)return!1;var b=h.x,v=h.y,w,x,C=Object.keys(this.oCoords),T=C.length-1,S;for(this.__corner=0;T>=0;T--)if(S=C[T],!!this.isControlVisible(S)&&(x=this._getImageLines(y?this.oCoords[S].touchCorner:this.oCoords[S].corner),w=this._findCrossPoints({x:b,y:v},x),w!==0&&w%2===1))return this.__corner=S,S;return!1},forEachControl:function(h){for(var y in this.controls)h(this.controls[y],y,this)},_setCornerCoords:function(){var h=this.oCoords;for(var y in h){var b=this.controls[y];h[y].corner=b.calcCornerCoords(this.angle,this.cornerSize,h[y].x,h[y].y,!1),h[y].touchCorner=b.calcCornerCoords(this.angle,this.touchCornerSize,h[y].x,h[y].y,!0)}},drawSelectionBackground:function(h){if(!this.selectionBackgroundColor||this.canvas&&!this.canvas.interactive||this.canvas&&this.canvas._activeObject!==this)return this;h.save();var y=this.getCenterPoint(),b=this._calculateCurrentDimensions(),v=this.canvas.viewportTransform;return h.translate(y.x,y.y),h.scale(1/v[0],1/v[3]),h.rotate(r(this.angle)),h.fillStyle=this.selectionBackgroundColor,h.fillRect(-b.x/2,-b.y/2,b.x,b.y),h.restore(),this},drawBorders:function(h,y){y=y||{};var b=this._calculateCurrentDimensions(),v=this.borderScaleFactor,w=b.x+v,x=b.y+v,C=typeof y.hasControls<"u"?y.hasControls:this.hasControls,T=!1;return h.save(),h.strokeStyle=y.borderColor||this.borderColor,this._setLineDash(h,y.borderDashArray||this.borderDashArray),h.strokeRect(-w/2,-x/2,w,x),C&&(h.beginPath(),this.forEachControl(function(S,M,O){S.withConnection&&S.getVisibility(O,M)&&(T=!0,h.moveTo(S.x*w,S.y*x),h.lineTo(S.x*w+S.offsetX,S.y*x+S.offsetY))}),T&&h.stroke()),h.restore(),this},drawBordersInGroup:function(h,y,b){b=b||{};var v=e.util.sizeAfterTransform(this.width,this.height,y),w=this.strokeWidth,x=this.strokeUniform,C=this.borderScaleFactor,T=v.x+w*(x?this.canvas.getZoom():y.scaleX)+C,S=v.y+w*(x?this.canvas.getZoom():y.scaleY)+C;return h.save(),this._setLineDash(h,b.borderDashArray||this.borderDashArray),h.strokeStyle=b.borderColor||this.borderColor,h.strokeRect(-T/2,-S/2,T,S),h.restore(),this},drawControls:function(h,y){y=y||{},h.save();var b=this.canvas.getRetinaScaling(),v,w;return h.setTransform(b,0,0,b,0,0),h.strokeStyle=h.fillStyle=y.cornerColor||this.cornerColor,this.transparentCorners||(h.strokeStyle=y.cornerStrokeColor||this.cornerStrokeColor),this._setLineDash(h,y.cornerDashArray||this.cornerDashArray),this.setCoords(),this.group&&(v=this.group.calcTransformMatrix()),this.forEachControl(function(x,C,T){w=T.oCoords[C],x.getVisibility(T,C)&&(v&&(w=e.util.transformPoint(w,v)),x.render(h,w.x,w.y,y,T))}),h.restore(),this},isControlVisible:function(h){return this.controls[h]&&this.controls[h].getVisibility(this,h)},setControlVisible:function(h,y){return this._controlsVisibility||(this._controlsVisibility={}),this._controlsVisibility[h]=y,this},setControlsVisibility:function(h){h||(h={});for(var y in h)this.setControlVisible(y,h[y]);return this},onDeselect:function(){},onSelect:function(){}})}(),e.util.object.extend(e.StaticCanvas.prototype,{FX_DURATION:500,fxCenterObjectH:function(r,h){h=h||{};var y=function(){},b=h.onComplete||y,v=h.onChange||y,w=this;return e.util.animate({target:this,startValue:r.left,endValue:this.getCenterPoint().x,duration:this.FX_DURATION,onChange:function(x){r.set("left",x),w.requestRenderAll(),v()},onComplete:function(){r.setCoords(),b()}})},fxCenterObjectV:function(r,h){h=h||{};var y=function(){},b=h.onComplete||y,v=h.onChange||y,w=this;return e.util.animate({target:this,startValue:r.top,endValue:this.getCenterPoint().y,duration:this.FX_DURATION,onChange:function(x){r.set("top",x),w.requestRenderAll(),v()},onComplete:function(){r.setCoords(),b()}})},fxRemove:function(r,h){h=h||{};var y=function(){},b=h.onComplete||y,v=h.onChange||y,w=this;return e.util.animate({target:this,startValue:r.opacity,endValue:0,duration:this.FX_DURATION,onChange:function(x){r.set("opacity",x),w.requestRenderAll(),v()},onComplete:function(){w.remove(r),b()}})}}),e.util.object.extend(e.Object.prototype,{animate:function(){if(arguments[0]&&typeof arguments[0]=="object"){var r=[],h,y,b=[];for(h in arguments[0])r.push(h);for(var v=0,w=r.length;v<w;v++)h=r[v],y=v!==w-1,b.push(this._animate(h,arguments[0][h],arguments[1],y));return b}else return this._animate.apply(this,arguments)},_animate:function(r,h,y,b){var v=this,w;h=h.toString(),y?y=e.util.object.clone(y):y={},~r.indexOf(".")&&(w=r.split("."));var x=v.colorProperties.indexOf(r)>-1||w&&v.colorProperties.indexOf(w[1])>-1,C=w?this.get(w[0])[w[1]]:this.get(r);"from"in y||(y.from=C),x||(~h.indexOf("=")?h=C+parseFloat(h.replace("=","")):h=parseFloat(h));var T={target:this,startValue:y.from,endValue:h,byValue:y.by,easing:y.easing,duration:y.duration,abort:y.abort&&function(S,M,O){return y.abort.call(v,S,M,O)},onChange:function(S,M,O){w?v[w[0]][w[1]]=S:v.set(r,S),!b&&y.onChange&&y.onChange(S,M,O)},onComplete:function(S,M,O){b||(v.setCoords(),y.onComplete&&y.onComplete(S,M,O))}};return x?e.util.animateColor(T.startValue,T.endValue,T.duration,T):e.util.animate(T)}}),function(r){var h=r.fabric||(r.fabric={}),y=h.util.object.extend,b=h.util.object.clone,v={x1:1,x2:1,y1:1,y2:1};if(h.Line){h.warn("fabric.Line is already defined");return}h.Line=h.util.createClass(h.Object,{type:"line",x1:0,y1:0,x2:0,y2:0,cacheProperties:h.Object.prototype.cacheProperties.concat("x1","x2","y1","y2"),initialize:function(x,C){x||(x=[0,0,0,0]),this.callSuper("initialize",C),this.set("x1",x[0]),this.set("y1",x[1]),this.set("x2",x[2]),this.set("y2",x[3]),this._setWidthHeight(C)},_setWidthHeight:function(x){x||(x={}),this.width=Math.abs(this.x2-this.x1),this.height=Math.abs(this.y2-this.y1),this.left="left"in x?x.left:this._getLeftToOriginX(),this.top="top"in x?x.top:this._getTopToOriginY()},_set:function(x,C){return this.callSuper("_set",x,C),typeof v[x]<"u"&&this._setWidthHeight(),this},_getLeftToOriginX:w({origin:"originX",axis1:"x1",axis2:"x2",dimension:"width"},{nearest:"left",center:"center",farthest:"right"}),_getTopToOriginY:w({origin:"originY",axis1:"y1",axis2:"y2",dimension:"height"},{nearest:"top",center:"center",farthest:"bottom"}),_render:function(x){x.beginPath();var C=this.calcLinePoints();x.moveTo(C.x1,C.y1),x.lineTo(C.x2,C.y2),x.lineWidth=this.strokeWidth;var T=x.strokeStyle;x.strokeStyle=this.stroke||x.fillStyle,this.stroke&&this._renderStroke(x),x.strokeStyle=T},_findCenterFromElement:function(){return{x:(this.x1+this.x2)/2,y:(this.y1+this.y2)/2}},toObject:function(x){return y(this.callSuper("toObject",x),this.calcLinePoints())},_getNonTransformedDimensions:function(){var x=this.callSuper("_getNonTransformedDimensions");return this.strokeLineCap==="butt"&&(this.width===0&&(x.y-=this.strokeWidth),this.height===0&&(x.x-=this.strokeWidth)),x},calcLinePoints:function(){var x=this.x1<=this.x2?-1:1,C=this.y1<=this.y2?-1:1,T=x*this.width*.5,S=C*this.height*.5,M=x*this.width*-.5,O=C*this.height*-.5;return{x1:T,x2:M,y1:S,y2:O}},_toSVG:function(){var x=this.calcLinePoints();return["<line ","COMMON_PARTS",'x1="',x.x1,'" y1="',x.y1,'" x2="',x.x2,'" y2="',x.y2,`" />
`]}}),h.Line.ATTRIBUTE_NAMES=h.SHARED_ATTRIBUTES.concat("x1 y1 x2 y2".split(" ")),h.Line.fromElement=function(x,C,T){T=T||{};var S=h.parseAttributes(x,h.Line.ATTRIBUTE_NAMES),M=[S.x1||0,S.y1||0,S.x2||0,S.y2||0];C(new h.Line(M,y(S,T)))},h.Line.fromObject=function(x,C){function T(M){delete M.points,C&&C(M)}var S=b(x,!0);S.points=[x.x1,x.y1,x.x2,x.y2],h.Object._fromObject("Line",S,T,"points")};function w(x,C){var T=x.origin,S=x.axis1,M=x.axis2,O=x.dimension,V=C.nearest,X=C.center,Z=C.farthest;return function(){switch(this.get(T)){case V:return Math.min(this.get(S),this.get(M));case X:return Math.min(this.get(S),this.get(M))+.5*this.get(O);case Z:return Math.max(this.get(S),this.get(M))}}}}(i),function(r){var h=r.fabric||(r.fabric={}),y=h.util.degreesToRadians;if(h.Circle){h.warn("fabric.Circle is already defined.");return}h.Circle=h.util.createClass(h.Object,{type:"circle",radius:0,startAngle:0,endAngle:360,cacheProperties:h.Object.prototype.cacheProperties.concat("radius","startAngle","endAngle"),_set:function(v,w){return this.callSuper("_set",v,w),v==="radius"&&this.setRadius(w),this},toObject:function(v){return this.callSuper("toObject",["radius","startAngle","endAngle"].concat(v))},_toSVG:function(){var v,w=0,x=0,C=(this.endAngle-this.startAngle)%360;if(C===0)v=["<circle ","COMMON_PARTS",'cx="'+w+'" cy="'+x+'" ','r="',this.radius,`" />
`];else{var T=y(this.startAngle),S=y(this.endAngle),M=this.radius,O=h.util.cos(T)*M,V=h.util.sin(T)*M,X=h.util.cos(S)*M,Z=h.util.sin(S)*M,ee=C>180?"1":"0";v=['<path d="M '+O+" "+V," A "+M+" "+M," 0 ",+ee+" 1"," "+X+" "+Z,'" ',"COMMON_PARTS",` />
`]}return v},_render:function(v){v.beginPath(),v.arc(0,0,this.radius,y(this.startAngle),y(this.endAngle),!1),this._renderPaintInOrder(v)},getRadiusX:function(){return this.get("radius")*this.get("scaleX")},getRadiusY:function(){return this.get("radius")*this.get("scaleY")},setRadius:function(v){return this.radius=v,this.set("width",v*2).set("height",v*2)}}),h.Circle.ATTRIBUTE_NAMES=h.SHARED_ATTRIBUTES.concat("cx cy r".split(" ")),h.Circle.fromElement=function(v,w){var x=h.parseAttributes(v,h.Circle.ATTRIBUTE_NAMES);if(!b(x))throw new Error("value of `r` attribute is required and can not be negative");x.left=(x.left||0)-x.radius,x.top=(x.top||0)-x.radius,w(new h.Circle(x))};function b(v){return"radius"in v&&v.radius>=0}h.Circle.fromObject=function(v,w){h.Object._fromObject("Circle",v,w)}}(i),function(r){var h=r.fabric||(r.fabric={});if(h.Triangle){h.warn("fabric.Triangle is already defined");return}h.Triangle=h.util.createClass(h.Object,{type:"triangle",width:100,height:100,_render:function(y){var b=this.width/2,v=this.height/2;y.beginPath(),y.moveTo(-b,v),y.lineTo(0,-v),y.lineTo(b,v),y.closePath(),this._renderPaintInOrder(y)},_toSVG:function(){var y=this.width/2,b=this.height/2,v=[-y+" "+b,"0 "+-b,y+" "+b].join(",");return["<polygon ","COMMON_PARTS",'points="',v,'" />']}}),h.Triangle.fromObject=function(y,b){return h.Object._fromObject("Triangle",y,b)}}(i),function(r){var h=r.fabric||(r.fabric={}),y=Math.PI*2;if(h.Ellipse){h.warn("fabric.Ellipse is already defined.");return}h.Ellipse=h.util.createClass(h.Object,{type:"ellipse",rx:0,ry:0,cacheProperties:h.Object.prototype.cacheProperties.concat("rx","ry"),initialize:function(b){this.callSuper("initialize",b),this.set("rx",b&&b.rx||0),this.set("ry",b&&b.ry||0)},_set:function(b,v){switch(this.callSuper("_set",b,v),b){case"rx":this.rx=v,this.set("width",v*2);break;case"ry":this.ry=v,this.set("height",v*2);break}return this},getRx:function(){return this.get("rx")*this.get("scaleX")},getRy:function(){return this.get("ry")*this.get("scaleY")},toObject:function(b){return this.callSuper("toObject",["rx","ry"].concat(b))},_toSVG:function(){return["<ellipse ","COMMON_PARTS",'cx="0" cy="0" ','rx="',this.rx,'" ry="',this.ry,`" />
`]},_render:function(b){b.beginPath(),b.save(),b.transform(1,0,0,this.ry/this.rx,0,0),b.arc(0,0,this.rx,0,y,!1),b.restore(),this._renderPaintInOrder(b)}}),h.Ellipse.ATTRIBUTE_NAMES=h.SHARED_ATTRIBUTES.concat("cx cy rx ry".split(" ")),h.Ellipse.fromElement=function(b,v){var w=h.parseAttributes(b,h.Ellipse.ATTRIBUTE_NAMES);w.left=(w.left||0)-w.rx,w.top=(w.top||0)-w.ry,v(new h.Ellipse(w))},h.Ellipse.fromObject=function(b,v){h.Object._fromObject("Ellipse",b,v)}}(i),function(r){var h=r.fabric||(r.fabric={}),y=h.util.object.extend;if(h.Rect){h.warn("fabric.Rect is already defined");return}h.Rect=h.util.createClass(h.Object,{stateProperties:h.Object.prototype.stateProperties.concat("rx","ry"),type:"rect",rx:0,ry:0,cacheProperties:h.Object.prototype.cacheProperties.concat("rx","ry"),initialize:function(b){this.callSuper("initialize",b),this._initRxRy()},_initRxRy:function(){this.rx&&!this.ry?this.ry=this.rx:this.ry&&!this.rx&&(this.rx=this.ry)},_render:function(b){var v=this.rx?Math.min(this.rx,this.width/2):0,w=this.ry?Math.min(this.ry,this.height/2):0,x=this.width,C=this.height,T=-this.width/2,S=-this.height/2,M=v!==0||w!==0,O=1-.5522847498;b.beginPath(),b.moveTo(T+v,S),b.lineTo(T+x-v,S),M&&b.bezierCurveTo(T+x-O*v,S,T+x,S+O*w,T+x,S+w),b.lineTo(T+x,S+C-w),M&&b.bezierCurveTo(T+x,S+C-O*w,T+x-O*v,S+C,T+x-v,S+C),b.lineTo(T+v,S+C),M&&b.bezierCurveTo(T+O*v,S+C,T,S+C-O*w,T,S+C-w),b.lineTo(T,S+w),M&&b.bezierCurveTo(T,S+O*w,T+O*v,S,T+v,S),b.closePath(),this._renderPaintInOrder(b)},toObject:function(b){return this.callSuper("toObject",["rx","ry"].concat(b))},_toSVG:function(){var b=-this.width/2,v=-this.height/2;return["<rect ","COMMON_PARTS",'x="',b,'" y="',v,'" rx="',this.rx,'" ry="',this.ry,'" width="',this.width,'" height="',this.height,`" />
`]}}),h.Rect.ATTRIBUTE_NAMES=h.SHARED_ATTRIBUTES.concat("x y rx ry width height".split(" ")),h.Rect.fromElement=function(b,v,w){if(!b)return v(null);w=w||{};var x=h.parseAttributes(b,h.Rect.ATTRIBUTE_NAMES);x.left=x.left||0,x.top=x.top||0,x.height=x.height||0,x.width=x.width||0;var C=new h.Rect(y(w?h.util.object.clone(w):{},x));C.visible=C.visible&&C.width>0&&C.height>0,v(C)},h.Rect.fromObject=function(b,v){return h.Object._fromObject("Rect",b,v)}}(i),function(r){var h=r.fabric||(r.fabric={}),y=h.util.object.extend,b=h.util.array.min,v=h.util.array.max,w=h.util.toFixed,x=h.util.projectStrokeOnPoints;if(h.Polyline){h.warn("fabric.Polyline is already defined");return}h.Polyline=h.util.createClass(h.Object,{type:"polyline",points:null,exactBoundingBox:!1,cacheProperties:h.Object.prototype.cacheProperties.concat("points"),initialize:function(C,T){T=T||{},this.points=C||[],this.callSuper("initialize",T),this._setPositionDimensions(T)},_projectStrokeOnPoints:function(){return x(this.points,this,!0)},_setPositionDimensions:function(C){var T=this._calcDimensions(C),S,M=this.exactBoundingBox?this.strokeWidth:0;this.width=T.width-M,this.height=T.height-M,C.fromSVG||(S=this.translateToGivenOrigin({x:T.left-this.strokeWidth/2+M/2,y:T.top-this.strokeWidth/2+M/2},"left","top",this.originX,this.originY)),typeof C.left>"u"&&(this.left=C.fromSVG?T.left:S.x),typeof C.top>"u"&&(this.top=C.fromSVG?T.top:S.y),this.pathOffset={x:T.left+this.width/2+M/2,y:T.top+this.height/2+M/2}},_calcDimensions:function(){var C=this.exactBoundingBox?this._projectStrokeOnPoints():this.points,T=b(C,"x")||0,S=b(C,"y")||0,M=v(C,"x")||0,O=v(C,"y")||0,V=M-T,X=O-S;return{left:T,top:S,width:V,height:X}},toObject:function(C){return y(this.callSuper("toObject",C),{points:this.points.concat()})},_toSVG:function(){for(var C=[],T=this.pathOffset.x,S=this.pathOffset.y,M=h.Object.NUM_FRACTION_DIGITS,O=0,V=this.points.length;O<V;O++)C.push(w(this.points[O].x-T,M),",",w(this.points[O].y-S,M)," ");return["<"+this.type+" ","COMMON_PARTS",'points="',C.join(""),`" />
`]},commonRender:function(C){var T,S=this.points.length,M=this.pathOffset.x,O=this.pathOffset.y;if(!S||isNaN(this.points[S-1].y))return!1;C.beginPath(),C.moveTo(this.points[0].x-M,this.points[0].y-O);for(var V=0;V<S;V++)T=this.points[V],C.lineTo(T.x-M,T.y-O);return!0},_render:function(C){!this.commonRender(C)||this._renderPaintInOrder(C)},complexity:function(){return this.get("points").length}}),h.Polyline.ATTRIBUTE_NAMES=h.SHARED_ATTRIBUTES.concat(),h.Polyline.fromElementGenerator=function(C){return function(T,S,M){if(!T)return S(null);M||(M={});var O=h.parsePointsAttribute(T.getAttribute("points")),V=h.parseAttributes(T,h[C].ATTRIBUTE_NAMES);V.fromSVG=!0,S(new h[C](O,y(V,M)))}},h.Polyline.fromElement=h.Polyline.fromElementGenerator("Polyline"),h.Polyline.fromObject=function(C,T){return h.Object._fromObject("Polyline",C,T,"points")}}(i),function(r){var h=r.fabric||(r.fabric={}),y=h.util.projectStrokeOnPoints;if(h.Polygon){h.warn("fabric.Polygon is already defined");return}h.Polygon=h.util.createClass(h.Polyline,{type:"polygon",_projectStrokeOnPoints:function(){return y(this.points,this)},_render:function(b){!this.commonRender(b)||(b.closePath(),this._renderPaintInOrder(b))}}),h.Polygon.ATTRIBUTE_NAMES=h.SHARED_ATTRIBUTES.concat(),h.Polygon.fromElement=h.Polyline.fromElementGenerator("Polygon"),h.Polygon.fromObject=function(b,v){h.Object._fromObject("Polygon",b,v,"points")}}(i),function(r){var h=r.fabric||(r.fabric={}),y=h.util.array.min,b=h.util.array.max,v=h.util.object.extend,w=h.util.object.clone,x=h.util.toFixed;if(h.Path){h.warn("fabric.Path is already defined");return}h.Path=h.util.createClass(h.Object,{type:"path",path:null,cacheProperties:h.Object.prototype.cacheProperties.concat("path","fillRule"),stateProperties:h.Object.prototype.stateProperties.concat("path"),initialize:function(C,T){T=w(T||{}),delete T.path,this.callSuper("initialize",T),this._setPath(C||[],T)},_setPath:function(C,T){this.path=h.util.makePathSimpler(Array.isArray(C)?C:h.util.parsePath(C)),h.Polyline.prototype._setPositionDimensions.call(this,T||{})},_renderPathCommands:function(C){var T,S=0,M=0,O=0,V=0,X=0,Z=0,ee=-this.pathOffset.x,J=-this.pathOffset.y;C.beginPath();for(var ie=0,ke=this.path.length;ie<ke;++ie)switch(T=this.path[ie],T[0]){case"L":O=T[1],V=T[2],C.lineTo(O+ee,V+J);break;case"M":O=T[1],V=T[2],S=O,M=V,C.moveTo(O+ee,V+J);break;case"C":O=T[5],V=T[6],X=T[3],Z=T[4],C.bezierCurveTo(T[1]+ee,T[2]+J,X+ee,Z+J,O+ee,V+J);break;case"Q":C.quadraticCurveTo(T[1]+ee,T[2]+J,T[3]+ee,T[4]+J),O=T[3],V=T[4],X=T[1],Z=T[2];break;case"z":case"Z":O=S,V=M,C.closePath();break}},_render:function(C){this._renderPathCommands(C),this._renderPaintInOrder(C)},toString:function(){return"#<fabric.Path ("+this.complexity()+'): { "top": '+this.top+', "left": '+this.left+" }>"},toObject:function(C){return v(this.callSuper("toObject",C),{path:this.path.map(function(T){return T.slice()})})},toDatalessObject:function(C){var T=this.toObject(["sourcePath"].concat(C));return T.sourcePath&&delete T.path,T},_toSVG:function(){var C=h.util.joinPath(this.path);return["<path ","COMMON_PARTS",'d="',C,'" stroke-linecap="round" ',`/>
`]},_getOffsetTransform:function(){var C=h.Object.NUM_FRACTION_DIGITS;return" translate("+x(-this.pathOffset.x,C)+", "+x(-this.pathOffset.y,C)+")"},toClipPathSVG:function(C){var T=this._getOffsetTransform();return"	"+this._createBaseClipPathSVGMarkup(this._toSVG(),{reviver:C,additionalTransform:T})},toSVG:function(C){var T=this._getOffsetTransform();return this._createBaseSVGMarkup(this._toSVG(),{reviver:C,additionalTransform:T})},complexity:function(){return this.path.length},_calcDimensions:function(){for(var C=[],T=[],S,M=0,O=0,V=0,X=0,Z,ee=0,J=this.path.length;ee<J;++ee){switch(S=this.path[ee],S[0]){case"L":V=S[1],X=S[2],Z=[];break;case"M":V=S[1],X=S[2],M=V,O=X,Z=[];break;case"C":Z=h.util.getBoundsOfCurve(V,X,S[1],S[2],S[3],S[4],S[5],S[6]),V=S[5],X=S[6];break;case"Q":Z=h.util.getBoundsOfCurve(V,X,S[1],S[2],S[1],S[2],S[3],S[4]),V=S[3],X=S[4];break;case"z":case"Z":V=M,X=O;break}Z.forEach(function(ve){C.push(ve.x),T.push(ve.y)}),C.push(V),T.push(X)}var ie=y(C)||0,ke=y(T)||0,Le=b(C)||0,fe=b(T)||0,Te=Le-ie,_e=fe-ke;return{left:ie,top:ke,width:Te,height:_e}}}),h.Path.fromObject=function(C,T){if(typeof C.sourcePath=="string"){var S=C.sourcePath;h.loadSVGFromURL(S,function(M){var O=M[0];O.setOptions(C),C.clipPath?h.util.enlivenObjects([C.clipPath],function(V){O.clipPath=V[0],T&&T(O)}):T&&T(O)})}else h.Object._fromObject("Path",C,T,"path")},h.Path.ATTRIBUTE_NAMES=h.SHARED_ATTRIBUTES.concat(["d"]),h.Path.fromElement=function(C,T,S){var M=h.parseAttributes(C,h.Path.ATTRIBUTE_NAMES);M.fromSVG=!0,T(new h.Path(M.d,v(M,S)))}}(i),function(r){var h=r.fabric||(r.fabric={}),y=h.util.array.min,b=h.util.array.max;h.Group||(h.Group=h.util.createClass(h.Object,h.Collection,{type:"group",strokeWidth:0,subTargetCheck:!1,cacheProperties:[],useSetOnGroup:!1,initialize:function(v,w,x){w=w||{},this._objects=[],x&&this.callSuper("initialize",w),this._objects=v||[];for(var C=this._objects.length;C--;)this._objects[C].group=this;if(x)this._updateObjectsACoords();else{var T=w&&w.centerPoint;w.originX!==void 0&&(this.originX=w.originX),w.originY!==void 0&&(this.originY=w.originY),T||this._calcBounds(),this._updateObjectsCoords(T),delete w.centerPoint,this.callSuper("initialize",w)}this.setCoords()},_updateObjectsACoords:function(){for(var v=!0,w=this._objects.length;w--;)this._objects[w].setCoords(v)},_updateObjectsCoords:function(w){for(var w=w||this.getCenterPoint(),x=this._objects.length;x--;)this._updateObjectCoords(this._objects[x],w)},_updateObjectCoords:function(v,w){var x=v.left,C=v.top,T=!0;v.set({left:x-w.x,top:C-w.y}),v.group=this,v.setCoords(T)},toString:function(){return"#<fabric.Group: ("+this.complexity()+")>"},addWithUpdate:function(v){var w=!!this.group;return this._restoreObjectsState(),h.util.resetObjectTransform(this),v&&(w&&h.util.removeTransformFromObject(v,this.group.calcTransformMatrix()),this._objects.push(v),v.group=this,v._set("canvas",this.canvas)),this._calcBounds(),this._updateObjectsCoords(),this.dirty=!0,w?this.group.addWithUpdate():this.setCoords(),this},removeWithUpdate:function(v){return this._restoreObjectsState(),h.util.resetObjectTransform(this),this.remove(v),this._calcBounds(),this._updateObjectsCoords(),this.setCoords(),this.dirty=!0,this},_onObjectAdded:function(v){this.dirty=!0,v.group=this,v._set("canvas",this.canvas)},_onObjectRemoved:function(v){this.dirty=!0,delete v.group},_set:function(v,w){var x=this._objects.length;if(this.useSetOnGroup)for(;x--;)this._objects[x].setOnGroup(v,w);if(v==="canvas")for(;x--;)this._objects[x]._set(v,w);h.Object.prototype._set.call(this,v,w)},toObject:function(v){var w=this.includeDefaultValues,x=this._objects.filter(function(T){return!T.excludeFromExport}).map(function(T){var S=T.includeDefaultValues;T.includeDefaultValues=w;var M=T.toObject(v);return T.includeDefaultValues=S,M}),C=h.Object.prototype.toObject.call(this,v);return C.objects=x,C},toDatalessObject:function(v){var w,x=this.sourcePath;if(x)w=x;else{var C=this.includeDefaultValues;w=this._objects.map(function(S){var M=S.includeDefaultValues;S.includeDefaultValues=C;var O=S.toDatalessObject(v);return S.includeDefaultValues=M,O})}var T=h.Object.prototype.toDatalessObject.call(this,v);return T.objects=w,T},render:function(v){this._transformDone=!0,this.callSuper("render",v),this._transformDone=!1},shouldCache:function(){var v=h.Object.prototype.shouldCache.call(this);if(v){for(var w=0,x=this._objects.length;w<x;w++)if(this._objects[w].willDrawShadow())return this.ownCaching=!1,!1}return v},willDrawShadow:function(){if(h.Object.prototype.willDrawShadow.call(this))return!0;for(var v=0,w=this._objects.length;v<w;v++)if(this._objects[v].willDrawShadow())return!0;return!1},isOnACache:function(){return this.ownCaching||this.group&&this.group.isOnACache()},drawObject:function(v){for(var w=0,x=this._objects.length;w<x;w++)this._objects[w].render(v);this._drawClipPath(v,this.clipPath)},isCacheDirty:function(v){if(this.callSuper("isCacheDirty",v))return!0;if(!this.statefullCache)return!1;for(var w=0,x=this._objects.length;w<x;w++)if(this._objects[w].isCacheDirty(!0)){if(this._cacheCanvas){var C=this.cacheWidth/this.zoomX,T=this.cacheHeight/this.zoomY;this._cacheContext.clearRect(-C/2,-T/2,C,T)}return!0}return!1},_restoreObjectsState:function(){var v=this.calcOwnMatrix();return this._objects.forEach(function(w){h.util.addTransformToObject(w,v),delete w.group,w.setCoords()}),this},destroy:function(){return this._objects.forEach(function(v){v.set("dirty",!0)}),this._restoreObjectsState()},dispose:function(){this.callSuper("dispose"),this.forEachObject(function(v){v.dispose&&v.dispose()}),this._objects=[]},toActiveSelection:function(){if(!!this.canvas){var v=this._objects,w=this.canvas;this._objects=[];var x=this.toObject();delete x.objects;var C=new h.ActiveSelection([]);return C.set(x),C.type="activeSelection",w.remove(this),v.forEach(function(T){T.group=C,T.dirty=!0,w.add(T)}),C.canvas=w,C._objects=v,w._activeObject=C,C.setCoords(),C}},ungroupOnCanvas:function(){return this._restoreObjectsState()},setObjectsCoords:function(){var v=!0;return this.forEachObject(function(w){w.setCoords(v)}),this},_calcBounds:function(v){for(var w=[],x=[],C,T,S,M=["tr","br","bl","tl"],O=0,V=this._objects.length,X,Z=M.length;O<V;++O){for(C=this._objects[O],S=C.calcACoords(),X=0;X<Z;X++)T=M[X],w.push(S[T].x),x.push(S[T].y);C.aCoords=S}this._getBounds(w,x,v)},_getBounds:function(v,w,x){var C=new h.Point(y(v),y(w)),T=new h.Point(b(v),b(w)),S=C.y||0,M=C.x||0,O=T.x-C.x||0,V=T.y-C.y||0;this.width=O,this.height=V,x||this.setPositionByOrigin({x:M,y:S},"left","top")},_toSVG:function(v){for(var w=["<g ","COMMON_PARTS",` >
`],x=0,C=this._objects.length;x<C;x++)w.push("		",this._objects[x].toSVG(v));return w.push(`</g>
`),w},getSvgStyles:function(){var v=typeof this.opacity<"u"&&this.opacity!==1?"opacity: "+this.opacity+";":"",w=this.visible?"":" visibility: hidden;";return[v,this.getSvgFilter(),w].join("")},toClipPathSVG:function(v){for(var w=[],x=0,C=this._objects.length;x<C;x++)w.push("	",this._objects[x].toClipPathSVG(v));return this._createBaseClipPathSVGMarkup(w,{reviver:v})}}),h.Group.fromObject=function(v,w){var x=v.objects,C=h.util.object.clone(v,!0);if(delete C.objects,typeof x=="string"){h.loadSVGFromURL(x,function(T){var S=h.util.groupSVGElements(T,v,x),M=C.clipPath;delete C.clipPath,S.set(C),M?h.util.enlivenObjects([M],function(O){S.clipPath=O[0],w&&w(S)}):w&&w(S)});return}h.util.enlivenObjects(x,function(T){h.util.enlivenObjectEnlivables(v,C,function(){w&&w(new h.Group(T,C,!0))})})})}(i),function(r){var h=r.fabric||(r.fabric={});h.ActiveSelection||(h.ActiveSelection=h.util.createClass(h.Group,{type:"activeSelection",initialize:function(y,b){b=b||{},this._objects=y||[];for(var v=this._objects.length;v--;)this._objects[v].group=this;b.originX&&(this.originX=b.originX),b.originY&&(this.originY=b.originY),this._calcBounds(),this._updateObjectsCoords(),h.Object.prototype.initialize.call(this,b),this.setCoords()},toGroup:function(){var y=this._objects.concat();this._objects=[];var b=h.Object.prototype.toObject.call(this),v=new h.Group([]);if(delete b.type,v.set(b),y.forEach(function(x){x.canvas.remove(x),x.group=v}),v._objects=y,!this.canvas)return v;var w=this.canvas;return w.add(v),w._activeObject=v,v.setCoords(),v},onDeselect:function(){return this.destroy(),!1},toString:function(){return"#<fabric.ActiveSelection: ("+this.complexity()+")>"},shouldCache:function(){return!1},isOnACache:function(){return!1},_renderControls:function(y,b,v){y.save(),y.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1,this.callSuper("_renderControls",y,b),v=v||{},typeof v.hasControls>"u"&&(v.hasControls=!1),v.forActiveSelection=!0;for(var w=0,x=this._objects.length;w<x;w++)this._objects[w]._renderControls(y,v);y.restore()}}),h.ActiveSelection.fromObject=function(y,b){h.util.enlivenObjects(y.objects,function(v){delete y.objects,b&&b(new h.ActiveSelection(v,y,!0))})})}(i),function(r){var h=e.util.object.extend;if(r.fabric||(r.fabric={}),r.fabric.Image){e.warn("fabric.Image is already defined.");return}e.Image=e.util.createClass(e.Object,{type:"image",strokeWidth:0,srcFromAttribute:!1,_lastScaleX:1,_lastScaleY:1,_filterScalingX:1,_filterScalingY:1,minimumScaleTrigger:.5,stateProperties:e.Object.prototype.stateProperties.concat("cropX","cropY"),cacheProperties:e.Object.prototype.cacheProperties.concat("cropX","cropY"),cacheKey:"",cropX:0,cropY:0,imageSmoothing:!0,initialize:function(y,b){b||(b={}),this.filters=[],this.cacheKey="texture"+e.Object.__uid++,this.callSuper("initialize",b),this._initElement(y,b)},getElement:function(){return this._element||{}},setElement:function(y,b){return this.removeTexture(this.cacheKey),this.removeTexture(this.cacheKey+"_filtered"),this._element=y,this._originalElement=y,this._initConfig(b),this.filters.length!==0&&this.applyFilters(),this.resizeFilter&&this.applyResizeFilters(),this},removeTexture:function(y){var b=e.filterBackend;b&&b.evictCachesForKey&&b.evictCachesForKey(y)},dispose:function(){this.callSuper("dispose"),this.removeTexture(this.cacheKey),this.removeTexture(this.cacheKey+"_filtered"),this._cacheContext=void 0,["_originalElement","_element","_filteredEl","_cacheCanvas"].forEach(function(y){e.util.cleanUpJsdomNode(this[y]),this[y]=void 0}.bind(this))},getCrossOrigin:function(){return this._originalElement&&(this._originalElement.crossOrigin||null)},getOriginalSize:function(){var y=this.getElement();return{width:y.naturalWidth||y.width,height:y.naturalHeight||y.height}},_stroke:function(y){if(!(!this.stroke||this.strokeWidth===0)){var b=this.width/2,v=this.height/2;y.beginPath(),y.moveTo(-b,-v),y.lineTo(b,-v),y.lineTo(b,v),y.lineTo(-b,v),y.lineTo(-b,-v),y.closePath()}},toObject:function(y){var b=[];this.filters.forEach(function(w){w&&b.push(w.toObject())});var v=h(this.callSuper("toObject",["cropX","cropY"].concat(y)),{src:this.getSrc(),crossOrigin:this.getCrossOrigin(),filters:b});return this.resizeFilter&&(v.resizeFilter=this.resizeFilter.toObject()),v},hasCrop:function(){return this.cropX||this.cropY||this.width<this._element.width||this.height<this._element.height},_toSVG:function(){var y=[],b=[],v,w=this._element,x=-this.width/2,C=-this.height/2,T="",S="";if(!w)return[];if(this.hasCrop()){var M=e.Object.__uid++;y.push('<clipPath id="imageCrop_'+M+`">
`,'	<rect x="'+x+'" y="'+C+'" width="'+this.width+'" height="'+this.height+`" />
`,`</clipPath>
`),T=' clip-path="url(#imageCrop_'+M+')" '}if(this.imageSmoothing||(S='" image-rendering="optimizeSpeed'),b.push("	<image ","COMMON_PARTS",'xlink:href="',this.getSvgSrc(!0),'" x="',x-this.cropX,'" y="',C-this.cropY,'" width="',w.width||w.naturalWidth,'" height="',w.height||w.height,S,'"',T,`></image>
`),this.stroke||this.strokeDashArray){var O=this.fill;this.fill=null,v=["	<rect ",'x="',x,'" y="',C,'" width="',this.width,'" height="',this.height,'" style="',this.getSvgStyles(),`"/>
`],this.fill=O}return this.paintFirst!=="fill"?y=y.concat(v,b):y=y.concat(b,v),y},getSrc:function(y){var b=y?this._element:this._originalElement;return b?b.toDataURL?b.toDataURL():this.srcFromAttribute?b.getAttribute("src"):b.src:this.src||""},setSrc:function(y,b,v){return e.util.loadImage(y,function(w,x){this.setElement(w,v),this._setWidthHeight(),b&&b(this,x)},this,v&&v.crossOrigin),this},toString:function(){return'#<fabric.Image: { src: "'+this.getSrc()+'" }>'},applyResizeFilters:function(){var y=this.resizeFilter,b=this.minimumScaleTrigger,v=this.getTotalObjectScaling(),w=v.scaleX,x=v.scaleY,C=this._filteredEl||this._originalElement;if(this.group&&this.set("dirty",!0),!y||w>b&&x>b){this._element=C,this._filterScalingX=1,this._filterScalingY=1,this._lastScaleX=w,this._lastScaleY=x;return}e.filterBackend||(e.filterBackend=e.initFilterBackend());var T=e.util.createCanvasElement(),S=this._filteredEl?this.cacheKey+"_filtered":this.cacheKey,M=C.width,O=C.height;T.width=M,T.height=O,this._element=T,this._lastScaleX=y.scaleX=w,this._lastScaleY=y.scaleY=x,e.filterBackend.applyFilters([y],C,M,O,this._element,S),this._filterScalingX=T.width/this._originalElement.width,this._filterScalingY=T.height/this._originalElement.height},applyFilters:function(y){if(y=y||this.filters||[],y=y.filter(function(C){return C&&!C.isNeutralState()}),this.set("dirty",!0),this.removeTexture(this.cacheKey+"_filtered"),y.length===0)return this._element=this._originalElement,this._filteredEl=null,this._filterScalingX=1,this._filterScalingY=1,this;var b=this._originalElement,v=b.naturalWidth||b.width,w=b.naturalHeight||b.height;if(this._element===this._originalElement){var x=e.util.createCanvasElement();x.width=v,x.height=w,this._element=x,this._filteredEl=x}else this._element=this._filteredEl,this._filteredEl.getContext("2d").clearRect(0,0,v,w),this._lastScaleX=1,this._lastScaleY=1;return e.filterBackend||(e.filterBackend=e.initFilterBackend()),e.filterBackend.applyFilters(y,this._originalElement,v,w,this._element,this.cacheKey),(this._originalElement.width!==this._element.width||this._originalElement.height!==this._element.height)&&(this._filterScalingX=this._element.width/this._originalElement.width,this._filterScalingY=this._element.height/this._originalElement.height),this},_render:function(y){e.util.setImageSmoothing(y,this.imageSmoothing),this.isMoving!==!0&&this.resizeFilter&&this._needsResize()&&this.applyResizeFilters(),this._stroke(y),this._renderPaintInOrder(y)},drawCacheOnCanvas:function(y){e.util.setImageSmoothing(y,this.imageSmoothing),e.Object.prototype.drawCacheOnCanvas.call(this,y)},shouldCache:function(){return this.needsItsOwnCache()},_renderFill:function(y){var b=this._element;if(!!b){var v=this._filterScalingX,w=this._filterScalingY,x=this.width,C=this.height,T=Math.min,S=Math.max,M=S(this.cropX,0),O=S(this.cropY,0),V=b.naturalWidth||b.width,X=b.naturalHeight||b.height,Z=M*v,ee=O*w,J=T(x*v,V-Z),ie=T(C*w,X-ee),ke=-x/2,Le=-C/2,fe=T(x,V/v-M),Te=T(C,X/w-O);b&&y.drawImage(b,Z,ee,J,ie,ke,Le,fe,Te)}},_needsResize:function(){var y=this.getTotalObjectScaling();return y.scaleX!==this._lastScaleX||y.scaleY!==this._lastScaleY},_resetWidthHeight:function(){this.set(this.getOriginalSize())},_initElement:function(y,b){this.setElement(e.util.getById(y),b),e.util.addClass(this.getElement(),e.Image.CSS_CANVAS)},_initConfig:function(y){y||(y={}),this.setOptions(y),this._setWidthHeight(y)},_initFilters:function(y,b){y&&y.length?e.util.enlivenObjects(y,function(v){b&&b(v)},"fabric.Image.filters"):b&&b()},_setWidthHeight:function(y){y||(y={});var b=this.getElement();this.width=y.width||b.naturalWidth||b.width||0,this.height=y.height||b.naturalHeight||b.height||0},parsePreserveAspectRatioAttribute:function(){var y=e.util.parsePreserveAspectRatioAttribute(this.preserveAspectRatio||""),b=this._element.width,v=this._element.height,w=1,x=1,C=0,T=0,S=0,M=0,O,V=this.width,X=this.height,Z={width:V,height:X};return y&&(y.alignX!=="none"||y.alignY!=="none")?(y.meetOrSlice==="meet"&&(w=x=e.util.findScaleToFit(this._element,Z),O=(V-b*w)/2,y.alignX==="Min"&&(C=-O),y.alignX==="Max"&&(C=O),O=(X-v*x)/2,y.alignY==="Min"&&(T=-O),y.alignY==="Max"&&(T=O)),y.meetOrSlice==="slice"&&(w=x=e.util.findScaleToCover(this._element,Z),O=b-V/w,y.alignX==="Mid"&&(S=O/2),y.alignX==="Max"&&(S=O),O=v-X/x,y.alignY==="Mid"&&(M=O/2),y.alignY==="Max"&&(M=O),b=V/w,v=X/x)):(w=V/b,x=X/v),{width:b,height:v,scaleX:w,scaleY:x,offsetLeft:C,offsetTop:T,cropX:S,cropY:M}}}),e.Image.CSS_CANVAS="canvas-img",e.Image.prototype.getSvgSrc=e.Image.prototype.getSrc,e.Image.fromObject=function(y,b){var v=e.util.object.clone(y);e.util.loadImage(v.src,function(w,x){if(x){b&&b(null,!0);return}e.Image.prototype._initFilters.call(v,v.filters,function(C){v.filters=C||[],e.Image.prototype._initFilters.call(v,[v.resizeFilter],function(T){v.resizeFilter=T[0],e.util.enlivenObjectEnlivables(v,v,function(){var S=new e.Image(w,v);b(S,!1)})})})},null,v.crossOrigin)},e.Image.fromURL=function(y,b,v){e.util.loadImage(y,function(w,x){b&&b(new e.Image(w,v),x)},null,v&&v.crossOrigin)},e.Image.ATTRIBUTE_NAMES=e.SHARED_ATTRIBUTES.concat("x y width height preserveAspectRatio xlink:href crossOrigin image-rendering".split(" ")),e.Image.fromElement=function(y,b,v){var w=e.parseAttributes(y,e.Image.ATTRIBUTE_NAMES);e.Image.fromURL(w["xlink:href"],b,h(v?e.util.object.clone(v):{},w))}}(i),e.util.object.extend(e.Object.prototype,{_getAngleValueForStraighten:function(){var r=this.angle%360;return r>0?Math.round((r-1)/90)*90:Math.round(r/90)*90},straighten:function(){return this.rotate(this._getAngleValueForStraighten())},fxStraighten:function(r){r=r||{};var h=function(){},y=r.onComplete||h,b=r.onChange||h,v=this;return e.util.animate({target:this,startValue:this.get("angle"),endValue:this._getAngleValueForStraighten(),duration:this.FX_DURATION,onChange:function(w){v.rotate(w),b()},onComplete:function(){v.setCoords(),y()}})}}),e.util.object.extend(e.StaticCanvas.prototype,{straightenObject:function(r){return r.straighten(),this.requestRenderAll(),this},fxStraightenObject:function(r){return r.fxStraighten({onChange:this.requestRenderAllBound})}}),function(){function r(y,b){var v="precision "+b+` float;
void main(){}`,w=y.createShader(y.FRAGMENT_SHADER);return y.shaderSource(w,v),y.compileShader(w),!!y.getShaderParameter(w,y.COMPILE_STATUS)}e.isWebglSupported=function(y){if(e.isLikelyNode)return!1;y=y||e.WebglFilterBackend.prototype.tileSize;var b=document.createElement("canvas"),v=b.getContext("webgl")||b.getContext("experimental-webgl"),w=!1;if(v){e.maxTextureSize=v.getParameter(v.MAX_TEXTURE_SIZE),w=e.maxTextureSize>=y;for(var x=["highp","mediump","lowp"],C=0;C<3;C++)if(r(v,x[C])){e.webGlPrecision=x[C];break}}return this.isSupported=w,w},e.WebglFilterBackend=h;function h(y){y&&y.tileSize&&(this.tileSize=y.tileSize),this.setupGLContext(this.tileSize,this.tileSize),this.captureGPUInfo()}h.prototype={tileSize:2048,resources:{},setupGLContext:function(y,b){this.dispose(),this.createWebGLCanvas(y,b),this.aPosition=new Float32Array([0,0,0,1,1,0,1,1]),this.chooseFastestCopyGLTo2DMethod(y,b)},chooseFastestCopyGLTo2DMethod:function(y,b){var v=typeof window.performance<"u",w;try{new ImageData(1,1),w=!0}catch{w=!1}var x=typeof ArrayBuffer<"u",C=typeof Uint8ClampedArray<"u";if(!!(v&&w&&x&&C)){var T=e.util.createCanvasElement(),S=new ArrayBuffer(y*b*4);if(e.forceGLPutImageData){this.imageBuffer=S,this.copyGLTo2D=m;return}var M={imageBuffer:S,destinationWidth:y,destinationHeight:b,targetCanvas:T},O,V,X;T.width=y,T.height=b,O=window.performance.now(),u.call(M,this.gl,M),V=window.performance.now()-O,O=window.performance.now(),m.call(M,this.gl,M),X=window.performance.now()-O,V>X?(this.imageBuffer=S,this.copyGLTo2D=m):this.copyGLTo2D=u}},createWebGLCanvas:function(y,b){var v=e.util.createCanvasElement();v.width=y,v.height=b;var w={alpha:!0,premultipliedAlpha:!1,depth:!1,stencil:!1,antialias:!1},x=v.getContext("webgl",w);x||(x=v.getContext("experimental-webgl",w)),x&&(x.clearColor(0,0,0,0),this.canvas=v,this.gl=x)},applyFilters:function(y,b,v,w,x,C){var T=this.gl,S;C&&(S=this.getCachedTexture(C,b));var M={originalWidth:b.width||b.originalWidth,originalHeight:b.height||b.originalHeight,sourceWidth:v,sourceHeight:w,destinationWidth:v,destinationHeight:w,context:T,sourceTexture:this.createTexture(T,v,w,!S&&b),targetTexture:this.createTexture(T,v,w),originalTexture:S||this.createTexture(T,v,w,!S&&b),passes:y.length,webgl:!0,aPosition:this.aPosition,programCache:this.programCache,pass:0,filterBackend:this,targetCanvas:x},O=T.createFramebuffer();return T.bindFramebuffer(T.FRAMEBUFFER,O),y.forEach(function(V){V&&V.applyTo(M)}),l(M),this.copyGLTo2D(T,M),T.bindTexture(T.TEXTURE_2D,null),T.deleteTexture(M.sourceTexture),T.deleteTexture(M.targetTexture),T.deleteFramebuffer(O),x.getContext("2d").setTransform(1,0,0,1,0,0),M},dispose:function(){this.canvas&&(this.canvas=null,this.gl=null),this.clearWebGLCaches()},clearWebGLCaches:function(){this.programCache={},this.textureCache={}},createTexture:function(y,b,v,w){var x=y.createTexture();return y.bindTexture(y.TEXTURE_2D,x),y.texParameteri(y.TEXTURE_2D,y.TEXTURE_MAG_FILTER,y.NEAREST),y.texParameteri(y.TEXTURE_2D,y.TEXTURE_MIN_FILTER,y.NEAREST),y.texParameteri(y.TEXTURE_2D,y.TEXTURE_WRAP_S,y.CLAMP_TO_EDGE),y.texParameteri(y.TEXTURE_2D,y.TEXTURE_WRAP_T,y.CLAMP_TO_EDGE),w?y.texImage2D(y.TEXTURE_2D,0,y.RGBA,y.RGBA,y.UNSIGNED_BYTE,w):y.texImage2D(y.TEXTURE_2D,0,y.RGBA,b,v,0,y.RGBA,y.UNSIGNED_BYTE,null),x},getCachedTexture:function(y,b){if(this.textureCache[y])return this.textureCache[y];var v=this.createTexture(this.gl,b.width,b.height,b);return this.textureCache[y]=v,v},evictCachesForKey:function(y){this.textureCache[y]&&(this.gl.deleteTexture(this.textureCache[y]),delete this.textureCache[y])},copyGLTo2D:u,captureGPUInfo:function(){if(this.gpuInfo)return this.gpuInfo;var y=this.gl,b={renderer:"",vendor:""};if(!y)return b;var v=y.getExtension("WEBGL_debug_renderer_info");if(v){var w=y.getParameter(v.UNMASKED_RENDERER_WEBGL),x=y.getParameter(v.UNMASKED_VENDOR_WEBGL);w&&(b.renderer=w.toLowerCase()),x&&(b.vendor=x.toLowerCase())}return this.gpuInfo=b,b}}}();function l(r){var h=r.targetCanvas,y=h.width,b=h.height,v=r.destinationWidth,w=r.destinationHeight;(y!==v||b!==w)&&(h.width=v,h.height=w)}function u(r,h){var y=r.canvas,b=h.targetCanvas,v=b.getContext("2d");v.translate(0,b.height),v.scale(1,-1);var w=y.height-b.height;v.drawImage(y,0,w,b.width,b.height,0,0,b.width,b.height)}function m(r,h){var y=h.targetCanvas,b=y.getContext("2d"),v=h.destinationWidth,w=h.destinationHeight,x=v*w*4,C=new Uint8Array(this.imageBuffer,0,x),T=new Uint8ClampedArray(this.imageBuffer,0,x);r.readPixels(0,0,v,w,r.RGBA,r.UNSIGNED_BYTE,C);var S=new ImageData(T,v,w);b.putImageData(S,0,0)}(function(){var r=function(){};e.Canvas2dFilterBackend=h;function h(){}h.prototype={evictCachesForKey:r,dispose:r,clearWebGLCaches:r,resources:{},applyFilters:function(y,b,v,w,x){var C=x.getContext("2d");C.drawImage(b,0,0,v,w);var T=C.getImageData(0,0,v,w),S=C.getImageData(0,0,v,w),M={sourceWidth:v,sourceHeight:w,imageData:T,originalEl:b,originalImageData:S,canvasEl:x,ctx:C,filterBackend:this};return y.forEach(function(O){O.applyTo(M)}),(M.imageData.width!==v||M.imageData.height!==w)&&(x.width=M.imageData.width,x.height=M.imageData.height),C.putImageData(M.imageData,0,0),M}}})(),e.Image=e.Image||{},e.Image.filters=e.Image.filters||{},e.Image.filters.BaseFilter=e.util.createClass({type:"BaseFilter",vertexSource:`attribute vec2 aPosition;
varying vec2 vTexCoord;
void main() {
vTexCoord = aPosition;
gl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);
}`,fragmentSource:`precision highp float;
varying vec2 vTexCoord;
uniform sampler2D uTexture;
void main() {
gl_FragColor = texture2D(uTexture, vTexCoord);
}`,initialize:function(r){r&&this.setOptions(r)},setOptions:function(r){for(var h in r)this[h]=r[h]},createProgram:function(r,h,y){h=h||this.fragmentSource,y=y||this.vertexSource,e.webGlPrecision!=="highp"&&(h=h.replace(/precision highp float/g,"precision "+e.webGlPrecision+" float"));var b=r.createShader(r.VERTEX_SHADER);if(r.shaderSource(b,y),r.compileShader(b),!r.getShaderParameter(b,r.COMPILE_STATUS))throw new Error("Vertex shader compile error for "+this.type+": "+r.getShaderInfoLog(b));var v=r.createShader(r.FRAGMENT_SHADER);if(r.shaderSource(v,h),r.compileShader(v),!r.getShaderParameter(v,r.COMPILE_STATUS))throw new Error("Fragment shader compile error for "+this.type+": "+r.getShaderInfoLog(v));var w=r.createProgram();if(r.attachShader(w,b),r.attachShader(w,v),r.linkProgram(w),!r.getProgramParameter(w,r.LINK_STATUS))throw new Error('Shader link error for "${this.type}" '+r.getProgramInfoLog(w));var x=this.getAttributeLocations(r,w),C=this.getUniformLocations(r,w)||{};return C.uStepW=r.getUniformLocation(w,"uStepW"),C.uStepH=r.getUniformLocation(w,"uStepH"),{program:w,attributeLocations:x,uniformLocations:C}},getAttributeLocations:function(r,h){return{aPosition:r.getAttribLocation(h,"aPosition")}},getUniformLocations:function(){return{}},sendAttributeData:function(r,h,y){var b=h.aPosition,v=r.createBuffer();r.bindBuffer(r.ARRAY_BUFFER,v),r.enableVertexAttribArray(b),r.vertexAttribPointer(b,2,r.FLOAT,!1,0,0),r.bufferData(r.ARRAY_BUFFER,y,r.STATIC_DRAW)},_setupFrameBuffer:function(r){var h=r.context,y,b;r.passes>1?(y=r.destinationWidth,b=r.destinationHeight,(r.sourceWidth!==y||r.sourceHeight!==b)&&(h.deleteTexture(r.targetTexture),r.targetTexture=r.filterBackend.createTexture(h,y,b)),h.framebufferTexture2D(h.FRAMEBUFFER,h.COLOR_ATTACHMENT0,h.TEXTURE_2D,r.targetTexture,0)):(h.bindFramebuffer(h.FRAMEBUFFER,null),h.finish())},_swapTextures:function(r){r.passes--,r.pass++;var h=r.targetTexture;r.targetTexture=r.sourceTexture,r.sourceTexture=h},isNeutralState:function(){var r=this.mainParameter,h=e.Image.filters[this.type].prototype;if(r)if(Array.isArray(h[r])){for(var y=h[r].length;y--;)if(this[r][y]!==h[r][y])return!1;return!0}else return h[r]===this[r];else return!1},applyTo:function(r){r.webgl?(this._setupFrameBuffer(r),this.applyToWebGL(r),this._swapTextures(r)):this.applyTo2d(r)},retrieveShader:function(r){return r.programCache.hasOwnProperty(this.type)||(r.programCache[this.type]=this.createProgram(r.context)),r.programCache[this.type]},applyToWebGL:function(r){var h=r.context,y=this.retrieveShader(r);r.pass===0&&r.originalTexture?h.bindTexture(h.TEXTURE_2D,r.originalTexture):h.bindTexture(h.TEXTURE_2D,r.sourceTexture),h.useProgram(y.program),this.sendAttributeData(h,y.attributeLocations,r.aPosition),h.uniform1f(y.uniformLocations.uStepW,1/r.sourceWidth),h.uniform1f(y.uniformLocations.uStepH,1/r.sourceHeight),this.sendUniformData(h,y.uniformLocations),h.viewport(0,0,r.destinationWidth,r.destinationHeight),h.drawArrays(h.TRIANGLE_STRIP,0,4)},bindAdditionalTexture:function(r,h,y){r.activeTexture(y),r.bindTexture(r.TEXTURE_2D,h),r.activeTexture(r.TEXTURE0)},unbindAdditionalTexture:function(r,h){r.activeTexture(h),r.bindTexture(r.TEXTURE_2D,null),r.activeTexture(r.TEXTURE0)},getMainParameter:function(){return this[this.mainParameter]},setMainParameter:function(r){this[this.mainParameter]=r},sendUniformData:function(){},createHelpLayer:function(r){if(!r.helpLayer){var h=document.createElement("canvas");h.width=r.sourceWidth,h.height=r.sourceHeight,r.helpLayer=h}},toObject:function(){var r={type:this.type},h=this.mainParameter;return h&&(r[h]=this[h]),r},toJSON:function(){return this.toObject()}}),e.Image.filters.BaseFilter.fromObject=function(r,h){var y=new e.Image.filters[r.type](r);return h&&h(y),y},function(r){var h=r.fabric||(r.fabric={}),y=h.Image.filters,b=h.util.createClass;y.ColorMatrix=b(y.BaseFilter,{type:"ColorMatrix",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
varying vec2 vTexCoord;
uniform mat4 uColorMatrix;
uniform vec4 uConstants;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
color *= uColorMatrix;
color += uConstants;
gl_FragColor = color;
}`,matrix:[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],mainParameter:"matrix",colorsOnly:!0,initialize:function(v){this.callSuper("initialize",v),this.matrix=this.matrix.slice(0)},applyTo2d:function(v){var w=v.imageData,x=w.data,C=x.length,T=this.matrix,S,M,O,V,X,Z=this.colorsOnly;for(X=0;X<C;X+=4)S=x[X],M=x[X+1],O=x[X+2],Z?(x[X]=S*T[0]+M*T[1]+O*T[2]+T[4]*255,x[X+1]=S*T[5]+M*T[6]+O*T[7]+T[9]*255,x[X+2]=S*T[10]+M*T[11]+O*T[12]+T[14]*255):(V=x[X+3],x[X]=S*T[0]+M*T[1]+O*T[2]+V*T[3]+T[4]*255,x[X+1]=S*T[5]+M*T[6]+O*T[7]+V*T[8]+T[9]*255,x[X+2]=S*T[10]+M*T[11]+O*T[12]+V*T[13]+T[14]*255,x[X+3]=S*T[15]+M*T[16]+O*T[17]+V*T[18]+T[19]*255)},getUniformLocations:function(v,w){return{uColorMatrix:v.getUniformLocation(w,"uColorMatrix"),uConstants:v.getUniformLocation(w,"uConstants")}},sendUniformData:function(v,w){var x=this.matrix,C=[x[0],x[1],x[2],x[3],x[5],x[6],x[7],x[8],x[10],x[11],x[12],x[13],x[15],x[16],x[17],x[18]],T=[x[4],x[9],x[14],x[19]];v.uniformMatrix4fv(w.uColorMatrix,!1,C),v.uniform4fv(w.uConstants,T)}}),h.Image.filters.ColorMatrix.fromObject=h.Image.filters.BaseFilter.fromObject}(i),function(r){var h=r.fabric||(r.fabric={}),y=h.Image.filters,b=h.util.createClass;y.Brightness=b(y.BaseFilter,{type:"Brightness",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uBrightness;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
color.rgb += uBrightness;
gl_FragColor = color;
}`,brightness:0,mainParameter:"brightness",applyTo2d:function(v){if(this.brightness!==0){var w=v.imageData,x=w.data,C,T=x.length,S=Math.round(this.brightness*255);for(C=0;C<T;C+=4)x[C]=x[C]+S,x[C+1]=x[C+1]+S,x[C+2]=x[C+2]+S}},getUniformLocations:function(v,w){return{uBrightness:v.getUniformLocation(w,"uBrightness")}},sendUniformData:function(v,w){v.uniform1f(w.uBrightness,this.brightness)}}),h.Image.filters.Brightness.fromObject=h.Image.filters.BaseFilter.fromObject}(i),function(r){var h=r.fabric||(r.fabric={}),y=h.util.object.extend,b=h.Image.filters,v=h.util.createClass;b.Convolute=v(b.BaseFilter,{type:"Convolute",opaque:!1,matrix:[0,0,0,0,1,0,0,0,0],fragmentSource:{Convolute_3_1:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[9];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 0);
for (float h = 0.0; h < 3.0; h+=1.0) {
for (float w = 0.0; w < 3.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 1), uStepH * (h - 1));
color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 3.0 + w)];
}
}
gl_FragColor = color;
}`,Convolute_3_0:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[9];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 1);
for (float h = 0.0; h < 3.0; h+=1.0) {
for (float w = 0.0; w < 3.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 1.0), uStepH * (h - 1.0));
color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 3.0 + w)];
}
}
float alpha = texture2D(uTexture, vTexCoord).a;
gl_FragColor = color;
gl_FragColor.a = alpha;
}`,Convolute_5_1:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[25];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 0);
for (float h = 0.0; h < 5.0; h+=1.0) {
for (float w = 0.0; w < 5.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));
color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 5.0 + w)];
}
}
gl_FragColor = color;
}`,Convolute_5_0:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[25];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 1);
for (float h = 0.0; h < 5.0; h+=1.0) {
for (float w = 0.0; w < 5.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));
color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 5.0 + w)];
}
}
float alpha = texture2D(uTexture, vTexCoord).a;
gl_FragColor = color;
gl_FragColor.a = alpha;
}`,Convolute_7_1:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[49];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 0);
for (float h = 0.0; h < 7.0; h+=1.0) {
for (float w = 0.0; w < 7.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));
color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 7.0 + w)];
}
}
gl_FragColor = color;
}`,Convolute_7_0:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[49];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 1);
for (float h = 0.0; h < 7.0; h+=1.0) {
for (float w = 0.0; w < 7.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));
color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 7.0 + w)];
}
}
float alpha = texture2D(uTexture, vTexCoord).a;
gl_FragColor = color;
gl_FragColor.a = alpha;
}`,Convolute_9_1:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[81];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 0);
for (float h = 0.0; h < 9.0; h+=1.0) {
for (float w = 0.0; w < 9.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));
color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 9.0 + w)];
}
}
gl_FragColor = color;
}`,Convolute_9_0:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[81];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 1);
for (float h = 0.0; h < 9.0; h+=1.0) {
for (float w = 0.0; w < 9.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));
color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 9.0 + w)];
}
}
float alpha = texture2D(uTexture, vTexCoord).a;
gl_FragColor = color;
gl_FragColor.a = alpha;
}`},retrieveShader:function(w){var x=Math.sqrt(this.matrix.length),C=this.type+"_"+x+"_"+(this.opaque?1:0),T=this.fragmentSource[C];return w.programCache.hasOwnProperty(C)||(w.programCache[C]=this.createProgram(w.context,T)),w.programCache[C]},applyTo2d:function(w){var x=w.imageData,C=x.data,T=this.matrix,S=Math.round(Math.sqrt(T.length)),M=Math.floor(S/2),O=x.width,V=x.height,X=w.ctx.createImageData(O,V),Z=X.data,ee=this.opaque?1:0,J,ie,ke,Le,fe,Te,_e,ve,rt,nt,Tt,We,be;for(Tt=0;Tt<V;Tt++)for(nt=0;nt<O;nt++){for(fe=(Tt*O+nt)*4,J=0,ie=0,ke=0,Le=0,be=0;be<S;be++)for(We=0;We<S;We++)_e=Tt+be-M,Te=nt+We-M,!(_e<0||_e>=V||Te<0||Te>=O)&&(ve=(_e*O+Te)*4,rt=T[be*S+We],J+=C[ve]*rt,ie+=C[ve+1]*rt,ke+=C[ve+2]*rt,ee||(Le+=C[ve+3]*rt));Z[fe]=J,Z[fe+1]=ie,Z[fe+2]=ke,ee?Z[fe+3]=C[fe+3]:Z[fe+3]=Le}w.imageData=X},getUniformLocations:function(w,x){return{uMatrix:w.getUniformLocation(x,"uMatrix"),uOpaque:w.getUniformLocation(x,"uOpaque"),uHalfSize:w.getUniformLocation(x,"uHalfSize"),uSize:w.getUniformLocation(x,"uSize")}},sendUniformData:function(w,x){w.uniform1fv(x.uMatrix,this.matrix)},toObject:function(){return y(this.callSuper("toObject"),{opaque:this.opaque,matrix:this.matrix})}}),h.Image.filters.Convolute.fromObject=h.Image.filters.BaseFilter.fromObject}(i),function(r){var h=r.fabric||(r.fabric={}),y=h.Image.filters,b=h.util.createClass;y.Grayscale=b(y.BaseFilter,{type:"Grayscale",fragmentSource:{average:`precision highp float;
uniform sampler2D uTexture;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
float average = (color.r + color.b + color.g) / 3.0;
gl_FragColor = vec4(average, average, average, color.a);
}`,lightness:`precision highp float;
uniform sampler2D uTexture;
uniform int uMode;
varying vec2 vTexCoord;
void main() {
vec4 col = texture2D(uTexture, vTexCoord);
float average = (max(max(col.r, col.g),col.b) + min(min(col.r, col.g),col.b)) / 2.0;
gl_FragColor = vec4(average, average, average, col.a);
}`,luminosity:`precision highp float;
uniform sampler2D uTexture;
uniform int uMode;
varying vec2 vTexCoord;
void main() {
vec4 col = texture2D(uTexture, vTexCoord);
float average = 0.21 * col.r + 0.72 * col.g + 0.07 * col.b;
gl_FragColor = vec4(average, average, average, col.a);
}`},mode:"average",mainParameter:"mode",applyTo2d:function(v){var w=v.imageData,x=w.data,C,T=x.length,S,M=this.mode;for(C=0;C<T;C+=4)M==="average"?S=(x[C]+x[C+1]+x[C+2])/3:M==="lightness"?S=(Math.min(x[C],x[C+1],x[C+2])+Math.max(x[C],x[C+1],x[C+2]))/2:M==="luminosity"&&(S=.21*x[C]+.72*x[C+1]+.07*x[C+2]),x[C]=S,x[C+1]=S,x[C+2]=S},retrieveShader:function(v){var w=this.type+"_"+this.mode;if(!v.programCache.hasOwnProperty(w)){var x=this.fragmentSource[this.mode];v.programCache[w]=this.createProgram(v.context,x)}return v.programCache[w]},getUniformLocations:function(v,w){return{uMode:v.getUniformLocation(w,"uMode")}},sendUniformData:function(v,w){var x=1;v.uniform1i(w.uMode,x)},isNeutralState:function(){return!1}}),h.Image.filters.Grayscale.fromObject=h.Image.filters.BaseFilter.fromObject}(i),function(r){var h=r.fabric||(r.fabric={}),y=h.Image.filters,b=h.util.createClass;y.Invert=b(y.BaseFilter,{type:"Invert",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform int uInvert;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
if (uInvert == 1) {
gl_FragColor = vec4(1.0 - color.r,1.0 -color.g,1.0 -color.b,color.a);
} else {
gl_FragColor = color;
}
}`,invert:!0,mainParameter:"invert",applyTo2d:function(v){var w=v.imageData,x=w.data,C,T=x.length;for(C=0;C<T;C+=4)x[C]=255-x[C],x[C+1]=255-x[C+1],x[C+2]=255-x[C+2]},isNeutralState:function(){return!this.invert},getUniformLocations:function(v,w){return{uInvert:v.getUniformLocation(w,"uInvert")}},sendUniformData:function(v,w){v.uniform1i(w.uInvert,this.invert)}}),h.Image.filters.Invert.fromObject=h.Image.filters.BaseFilter.fromObject}(i),function(r){var h=r.fabric||(r.fabric={}),y=h.util.object.extend,b=h.Image.filters,v=h.util.createClass;b.Noise=v(b.BaseFilter,{type:"Noise",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uStepH;
uniform float uNoise;
uniform float uSeed;
varying vec2 vTexCoord;
float rand(vec2 co, float seed, float vScale) {
return fract(sin(dot(co.xy * vScale ,vec2(12.9898 , 78.233))) * 43758.5453 * (seed + 0.01) / 2.0);
}
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
color.rgb += (0.5 - rand(vTexCoord, uSeed, 0.1 / uStepH)) * uNoise;
gl_FragColor = color;
}`,mainParameter:"noise",noise:0,applyTo2d:function(w){if(this.noise!==0){var x=w.imageData,C=x.data,T,S=C.length,M=this.noise,O;for(T=0,S=C.length;T<S;T+=4)O=(.5-Math.random())*M,C[T]+=O,C[T+1]+=O,C[T+2]+=O}},getUniformLocations:function(w,x){return{uNoise:w.getUniformLocation(x,"uNoise"),uSeed:w.getUniformLocation(x,"uSeed")}},sendUniformData:function(w,x){w.uniform1f(x.uNoise,this.noise/255),w.uniform1f(x.uSeed,Math.random())},toObject:function(){return y(this.callSuper("toObject"),{noise:this.noise})}}),h.Image.filters.Noise.fromObject=h.Image.filters.BaseFilter.fromObject}(i),function(r){var h=r.fabric||(r.fabric={}),y=h.Image.filters,b=h.util.createClass;y.Pixelate=b(y.BaseFilter,{type:"Pixelate",blocksize:4,mainParameter:"blocksize",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uBlocksize;
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
float blockW = uBlocksize * uStepW;
float blockH = uBlocksize * uStepW;
int posX = int(vTexCoord.x / blockW);
int posY = int(vTexCoord.y / blockH);
float fposX = float(posX);
float fposY = float(posY);
vec2 squareCoords = vec2(fposX * blockW, fposY * blockH);
vec4 color = texture2D(uTexture, squareCoords);
gl_FragColor = color;
}`,applyTo2d:function(v){var w=v.imageData,x=w.data,C=w.height,T=w.width,S,M,O,V,X,Z,ee,J,ie,ke,Le;for(M=0;M<C;M+=this.blocksize)for(O=0;O<T;O+=this.blocksize)for(S=M*4*T+O*4,V=x[S],X=x[S+1],Z=x[S+2],ee=x[S+3],ke=Math.min(M+this.blocksize,C),Le=Math.min(O+this.blocksize,T),J=M;J<ke;J++)for(ie=O;ie<Le;ie++)S=J*4*T+ie*4,x[S]=V,x[S+1]=X,x[S+2]=Z,x[S+3]=ee},isNeutralState:function(){return this.blocksize===1},getUniformLocations:function(v,w){return{uBlocksize:v.getUniformLocation(w,"uBlocksize"),uStepW:v.getUniformLocation(w,"uStepW"),uStepH:v.getUniformLocation(w,"uStepH")}},sendUniformData:function(v,w){v.uniform1f(w.uBlocksize,this.blocksize)}}),h.Image.filters.Pixelate.fromObject=h.Image.filters.BaseFilter.fromObject}(i),function(r){var h=r.fabric||(r.fabric={}),y=h.util.object.extend,b=h.Image.filters,v=h.util.createClass;b.RemoveColor=v(b.BaseFilter,{type:"RemoveColor",color:"#FFFFFF",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform vec4 uLow;
uniform vec4 uHigh;
varying vec2 vTexCoord;
void main() {
gl_FragColor = texture2D(uTexture, vTexCoord);
if(all(greaterThan(gl_FragColor.rgb,uLow.rgb)) && all(greaterThan(uHigh.rgb,gl_FragColor.rgb))) {
gl_FragColor.a = 0.0;
}
}`,distance:.02,useAlpha:!1,applyTo2d:function(w){var x=w.imageData,C=x.data,T,S=this.distance*255,M,O,V,X=new h.Color(this.color).getSource(),Z=[X[0]-S,X[1]-S,X[2]-S],ee=[X[0]+S,X[1]+S,X[2]+S];for(T=0;T<C.length;T+=4)M=C[T],O=C[T+1],V=C[T+2],M>Z[0]&&O>Z[1]&&V>Z[2]&&M<ee[0]&&O<ee[1]&&V<ee[2]&&(C[T+3]=0)},getUniformLocations:function(w,x){return{uLow:w.getUniformLocation(x,"uLow"),uHigh:w.getUniformLocation(x,"uHigh")}},sendUniformData:function(w,x){var C=new h.Color(this.color).getSource(),T=parseFloat(this.distance),S=[0+C[0]/255-T,0+C[1]/255-T,0+C[2]/255-T,1],M=[C[0]/255+T,C[1]/255+T,C[2]/255+T,1];w.uniform4fv(x.uLow,S),w.uniform4fv(x.uHigh,M)},toObject:function(){return y(this.callSuper("toObject"),{color:this.color,distance:this.distance})}}),h.Image.filters.RemoveColor.fromObject=h.Image.filters.BaseFilter.fromObject}(i),function(r){var h=r.fabric||(r.fabric={}),y=h.Image.filters,b=h.util.createClass,v={Brownie:[.5997,.34553,-.27082,0,.186,-.0377,.86095,.15059,0,-.1449,.24113,-.07441,.44972,0,-.02965,0,0,0,1,0],Vintage:[.62793,.32021,-.03965,0,.03784,.02578,.64411,.03259,0,.02926,.0466,-.08512,.52416,0,.02023,0,0,0,1,0],Kodachrome:[1.12855,-.39673,-.03992,0,.24991,-.16404,1.08352,-.05498,0,.09698,-.16786,-.56034,1.60148,0,.13972,0,0,0,1,0],Technicolor:[1.91252,-.85453,-.09155,0,.04624,-.30878,1.76589,-.10601,0,-.27589,-.2311,-.75018,1.84759,0,.12137,0,0,0,1,0],Polaroid:[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0],Sepia:[.393,.769,.189,0,0,.349,.686,.168,0,0,.272,.534,.131,0,0,0,0,0,1,0],BlackWhite:[1.5,1.5,1.5,0,-1,1.5,1.5,1.5,0,-1,1.5,1.5,1.5,0,-1,0,0,0,1,0]};for(var w in v)y[w]=b(y.ColorMatrix,{type:w,matrix:v[w],mainParameter:!1,colorsOnly:!0}),h.Image.filters[w].fromObject=h.Image.filters.BaseFilter.fromObject}(i),function(r){var h=r.fabric,y=h.Image.filters,b=h.util.createClass;y.BlendColor=b(y.BaseFilter,{type:"BlendColor",color:"#F95C63",mode:"multiply",alpha:1,fragmentSource:{multiply:`gl_FragColor.rgb *= uColor.rgb;
`,screen:`gl_FragColor.rgb = 1.0 - (1.0 - gl_FragColor.rgb) * (1.0 - uColor.rgb);
`,add:`gl_FragColor.rgb += uColor.rgb;
`,diff:`gl_FragColor.rgb = abs(gl_FragColor.rgb - uColor.rgb);
`,subtract:`gl_FragColor.rgb -= uColor.rgb;
`,lighten:`gl_FragColor.rgb = max(gl_FragColor.rgb, uColor.rgb);
`,darken:`gl_FragColor.rgb = min(gl_FragColor.rgb, uColor.rgb);
`,exclusion:`gl_FragColor.rgb += uColor.rgb - 2.0 * (uColor.rgb * gl_FragColor.rgb);
`,overlay:`if (uColor.r < 0.5) {
gl_FragColor.r *= 2.0 * uColor.r;
} else {
gl_FragColor.r = 1.0 - 2.0 * (1.0 - gl_FragColor.r) * (1.0 - uColor.r);
}
if (uColor.g < 0.5) {
gl_FragColor.g *= 2.0 * uColor.g;
} else {
gl_FragColor.g = 1.0 - 2.0 * (1.0 - gl_FragColor.g) * (1.0 - uColor.g);
}
if (uColor.b < 0.5) {
gl_FragColor.b *= 2.0 * uColor.b;
} else {
gl_FragColor.b = 1.0 - 2.0 * (1.0 - gl_FragColor.b) * (1.0 - uColor.b);
}
`,tint:`gl_FragColor.rgb *= (1.0 - uColor.a);
gl_FragColor.rgb += uColor.rgb;
`},buildSource:function(v){return`precision highp float;
uniform sampler2D uTexture;
uniform vec4 uColor;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
gl_FragColor = color;
if (color.a > 0.0) {
`+this.fragmentSource[v]+`}
}`},retrieveShader:function(v){var w=this.type+"_"+this.mode,x;return v.programCache.hasOwnProperty(w)||(x=this.buildSource(this.mode),v.programCache[w]=this.createProgram(v.context,x)),v.programCache[w]},applyTo2d:function(v){var w=v.imageData,x=w.data,C=x.length,T,S,M,O,V,X,Z,ee=1-this.alpha;Z=new h.Color(this.color).getSource(),T=Z[0]*this.alpha,S=Z[1]*this.alpha,M=Z[2]*this.alpha;for(var J=0;J<C;J+=4)switch(O=x[J],V=x[J+1],X=x[J+2],this.mode){case"multiply":x[J]=O*T/255,x[J+1]=V*S/255,x[J+2]=X*M/255;break;case"screen":x[J]=255-(255-O)*(255-T)/255,x[J+1]=255-(255-V)*(255-S)/255,x[J+2]=255-(255-X)*(255-M)/255;break;case"add":x[J]=O+T,x[J+1]=V+S,x[J+2]=X+M;break;case"diff":case"difference":x[J]=Math.abs(O-T),x[J+1]=Math.abs(V-S),x[J+2]=Math.abs(X-M);break;case"subtract":x[J]=O-T,x[J+1]=V-S,x[J+2]=X-M;break;case"darken":x[J]=Math.min(O,T),x[J+1]=Math.min(V,S),x[J+2]=Math.min(X,M);break;case"lighten":x[J]=Math.max(O,T),x[J+1]=Math.max(V,S),x[J+2]=Math.max(X,M);break;case"overlay":x[J]=T<128?2*O*T/255:255-2*(255-O)*(255-T)/255,x[J+1]=S<128?2*V*S/255:255-2*(255-V)*(255-S)/255,x[J+2]=M<128?2*X*M/255:255-2*(255-X)*(255-M)/255;break;case"exclusion":x[J]=T+O-2*T*O/255,x[J+1]=S+V-2*S*V/255,x[J+2]=M+X-2*M*X/255;break;case"tint":x[J]=T+O*ee,x[J+1]=S+V*ee,x[J+2]=M+X*ee}},getUniformLocations:function(v,w){return{uColor:v.getUniformLocation(w,"uColor")}},sendUniformData:function(v,w){var x=new h.Color(this.color).getSource();x[0]=this.alpha*x[0]/255,x[1]=this.alpha*x[1]/255,x[2]=this.alpha*x[2]/255,x[3]=this.alpha,v.uniform4fv(w.uColor,x)},toObject:function(){return{type:this.type,color:this.color,mode:this.mode,alpha:this.alpha}}}),h.Image.filters.BlendColor.fromObject=h.Image.filters.BaseFilter.fromObject}(i),function(r){var h=r.fabric,y=h.Image.filters,b=h.util.createClass;y.BlendImage=b(y.BaseFilter,{type:"BlendImage",image:null,mode:"multiply",alpha:1,vertexSource:`attribute vec2 aPosition;
varying vec2 vTexCoord;
varying vec2 vTexCoord2;
uniform mat3 uTransformMatrix;
void main() {
vTexCoord = aPosition;
vTexCoord2 = (uTransformMatrix * vec3(aPosition, 1.0)).xy;
gl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);
}`,fragmentSource:{multiply:`precision highp float;
uniform sampler2D uTexture;
uniform sampler2D uImage;
uniform vec4 uColor;
varying vec2 vTexCoord;
varying vec2 vTexCoord2;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
vec4 color2 = texture2D(uImage, vTexCoord2);
color.rgba *= color2.rgba;
gl_FragColor = color;
}`,mask:`precision highp float;
uniform sampler2D uTexture;
uniform sampler2D uImage;
uniform vec4 uColor;
varying vec2 vTexCoord;
varying vec2 vTexCoord2;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
vec4 color2 = texture2D(uImage, vTexCoord2);
color.a = color2.a;
gl_FragColor = color;
}`},retrieveShader:function(v){var w=this.type+"_"+this.mode,x=this.fragmentSource[this.mode];return v.programCache.hasOwnProperty(w)||(v.programCache[w]=this.createProgram(v.context,x)),v.programCache[w]},applyToWebGL:function(v){var w=v.context,x=this.createTexture(v.filterBackend,this.image);this.bindAdditionalTexture(w,x,w.TEXTURE1),this.callSuper("applyToWebGL",v),this.unbindAdditionalTexture(w,w.TEXTURE1)},createTexture:function(v,w){return v.getCachedTexture(w.cacheKey,w._element)},calculateMatrix:function(){var v=this.image,w=v._element.width,x=v._element.height;return[1/v.scaleX,0,0,0,1/v.scaleY,0,-v.left/w,-v.top/x,1]},applyTo2d:function(v){var w=v.imageData,x=v.filterBackend.resources,C=w.data,T=C.length,S=w.width,M=w.height,O,V,X,Z,ee,J,ie,ke,Le,fe,Te=this.image,_e;x.blendImage||(x.blendImage=h.util.createCanvasElement()),Le=x.blendImage,fe=Le.getContext("2d"),Le.width!==S||Le.height!==M?(Le.width=S,Le.height=M):fe.clearRect(0,0,S,M),fe.setTransform(Te.scaleX,0,0,Te.scaleY,Te.left,Te.top),fe.drawImage(Te._element,0,0,S,M),_e=fe.getImageData(0,0,S,M).data;for(var ve=0;ve<T;ve+=4)switch(ee=C[ve],J=C[ve+1],ie=C[ve+2],ke=C[ve+3],O=_e[ve],V=_e[ve+1],X=_e[ve+2],Z=_e[ve+3],this.mode){case"multiply":C[ve]=ee*O/255,C[ve+1]=J*V/255,C[ve+2]=ie*X/255,C[ve+3]=ke*Z/255;break;case"mask":C[ve+3]=Z;break}},getUniformLocations:function(v,w){return{uTransformMatrix:v.getUniformLocation(w,"uTransformMatrix"),uImage:v.getUniformLocation(w,"uImage")}},sendUniformData:function(v,w){var x=this.calculateMatrix();v.uniform1i(w.uImage,1),v.uniformMatrix3fv(w.uTransformMatrix,!1,x)},toObject:function(){return{type:this.type,image:this.image&&this.image.toObject(),mode:this.mode,alpha:this.alpha}}}),h.Image.filters.BlendImage.fromObject=function(v,w){h.Image.fromObject(v.image,function(x){var C=h.util.object.clone(v);C.image=x,w(new h.Image.filters.BlendImage(C))})}}(i),function(r){var h=r.fabric||(r.fabric={}),y=Math.pow,b=Math.floor,v=Math.sqrt,w=Math.abs,x=Math.round,C=Math.sin,T=Math.ceil,S=h.Image.filters,M=h.util.createClass;S.Resize=M(S.BaseFilter,{type:"Resize",resizeType:"hermite",scaleX:1,scaleY:1,lanczosLobes:3,getUniformLocations:function(O,V){return{uDelta:O.getUniformLocation(V,"uDelta"),uTaps:O.getUniformLocation(V,"uTaps")}},sendUniformData:function(O,V){O.uniform2fv(V.uDelta,this.horizontal?[1/this.width,0]:[0,1/this.height]),O.uniform1fv(V.uTaps,this.taps)},retrieveShader:function(O){var V=this.getFilterWindow(),X=this.type+"_"+V;if(!O.programCache.hasOwnProperty(X)){var Z=this.generateShader(V);O.programCache[X]=this.createProgram(O.context,Z)}return O.programCache[X]},getFilterWindow:function(){var O=this.tempScale;return Math.ceil(this.lanczosLobes/O)},getTaps:function(){for(var O=this.lanczosCreate(this.lanczosLobes),V=this.tempScale,X=this.getFilterWindow(),Z=new Array(X),ee=1;ee<=X;ee++)Z[ee-1]=O(ee*V);return Z},generateShader:function(Z){for(var V=new Array(Z),X=this.fragmentSourceTOP,Z,ee=1;ee<=Z;ee++)V[ee-1]=ee+".0 * uDelta";return X+="uniform float uTaps["+Z+`];
`,X+=`void main() {
`,X+=`  vec4 color = texture2D(uTexture, vTexCoord);
`,X+=`  float sum = 1.0;
`,V.forEach(function(J,ie){X+="  color += texture2D(uTexture, vTexCoord + "+J+") * uTaps["+ie+`];
`,X+="  color += texture2D(uTexture, vTexCoord - "+J+") * uTaps["+ie+`];
`,X+="  sum += 2.0 * uTaps["+ie+`];
`}),X+=`  gl_FragColor = color / sum;
`,X+="}",X},fragmentSourceTOP:`precision highp float;
uniform sampler2D uTexture;
uniform vec2 uDelta;
varying vec2 vTexCoord;
`,applyTo:function(O){O.webgl?(O.passes++,this.width=O.sourceWidth,this.horizontal=!0,this.dW=Math.round(this.width*this.scaleX),this.dH=O.sourceHeight,this.tempScale=this.dW/this.width,this.taps=this.getTaps(),O.destinationWidth=this.dW,this._setupFrameBuffer(O),this.applyToWebGL(O),this._swapTextures(O),O.sourceWidth=O.destinationWidth,this.height=O.sourceHeight,this.horizontal=!1,this.dH=Math.round(this.height*this.scaleY),this.tempScale=this.dH/this.height,this.taps=this.getTaps(),O.destinationHeight=this.dH,this._setupFrameBuffer(O),this.applyToWebGL(O),this._swapTextures(O),O.sourceHeight=O.destinationHeight):this.applyTo2d(O)},isNeutralState:function(){return this.scaleX===1&&this.scaleY===1},lanczosCreate:function(O){return function(V){if(V>=O||V<=-O)return 0;if(V<11920929e-14&&V>-11920929e-14)return 1;V*=Math.PI;var X=V/O;return C(V)/V*C(X)/X}},applyTo2d:function(O){var V=O.imageData,X=this.scaleX,Z=this.scaleY;this.rcpScaleX=1/X,this.rcpScaleY=1/Z;var ee=V.width,J=V.height,ie=x(ee*X),ke=x(J*Z),Le;this.resizeType==="sliceHack"?Le=this.sliceByTwo(O,ee,J,ie,ke):this.resizeType==="hermite"?Le=this.hermiteFastResize(O,ee,J,ie,ke):this.resizeType==="bilinear"?Le=this.bilinearFiltering(O,ee,J,ie,ke):this.resizeType==="lanczos"&&(Le=this.lanczosResize(O,ee,J,ie,ke)),O.imageData=Le},sliceByTwo:function(O,V,X,Z,ee){var J=O.imageData,ie=.5,ke=!1,Le=!1,fe=V*ie,Te=X*ie,_e=h.filterBackend.resources,ve,rt,nt=0,Tt=0,We=V,be=0;for(_e.sliceByTwo||(_e.sliceByTwo=document.createElement("canvas")),ve=_e.sliceByTwo,(ve.width<V*1.5||ve.height<X)&&(ve.width=V*1.5,ve.height=X),rt=ve.getContext("2d"),rt.clearRect(0,0,V*1.5,X),rt.putImageData(J,0,0),Z=b(Z),ee=b(ee);!ke||!Le;)V=fe,X=Te,Z<b(fe*ie)?fe=b(fe*ie):(fe=Z,ke=!0),ee<b(Te*ie)?Te=b(Te*ie):(Te=ee,Le=!0),rt.drawImage(ve,nt,Tt,V,X,We,be,fe,Te),nt=We,Tt=be,be+=Te;return rt.getImageData(nt,Tt,Z,ee)},lanczosResize:function(O,V,X,Z,ee){function J(Be){var le,Ee,he,me,Fe,Xe,lt,Ye,Ke,Lt,$t;for(be.x=(Be+.5)*Te,Ce.x=b(be.x),le=0;le<ee;le++){for(be.y=(le+.5)*_e,Ce.y=b(be.y),Fe=0,Xe=0,lt=0,Ye=0,Ke=0,Ee=Ce.x-nt;Ee<=Ce.x+nt;Ee++)if(!(Ee<0||Ee>=V)){Lt=b(1e3*w(Ee-be.x)),We[Lt]||(We[Lt]={});for(var dt=Ce.y-Tt;dt<=Ce.y+Tt;dt++)dt<0||dt>=X||($t=b(1e3*w(dt-be.y)),We[Lt][$t]||(We[Lt][$t]=fe(v(y(Lt*ve,2)+y($t*rt,2))/1e3)),he=We[Lt][$t],he>0&&(me=(dt*V+Ee)*4,Fe+=he,Xe+=he*ie[me],lt+=he*ie[me+1],Ye+=he*ie[me+2],Ke+=he*ie[me+3]))}me=(le*Z+Be)*4,Le[me]=Xe/Fe,Le[me+1]=lt/Fe,Le[me+2]=Ye/Fe,Le[me+3]=Ke/Fe}return++Be<Z?J(Be):ke}var ie=O.imageData.data,ke=O.ctx.createImageData(Z,ee),Le=ke.data,fe=this.lanczosCreate(this.lanczosLobes),Te=this.rcpScaleX,_e=this.rcpScaleY,ve=2/this.rcpScaleX,rt=2/this.rcpScaleY,nt=T(Te*this.lanczosLobes/2),Tt=T(_e*this.lanczosLobes/2),We={},be={},Ce={};return J(0)},bilinearFiltering:function(O,V,X,Z,ee){var J,ie,ke,Le,fe,Te,_e,ve,rt,nt,Tt,We,be=0,Ce,Be=this.rcpScaleX,le=this.rcpScaleY,Ee=4*(V-1),he=O.imageData,me=he.data,Fe=O.ctx.createImageData(Z,ee),Xe=Fe.data;for(_e=0;_e<ee;_e++)for(ve=0;ve<Z;ve++)for(fe=b(Be*ve),Te=b(le*_e),rt=Be*ve-fe,nt=le*_e-Te,Ce=4*(Te*V+fe),Tt=0;Tt<4;Tt++)J=me[Ce+Tt],ie=me[Ce+4+Tt],ke=me[Ce+Ee+Tt],Le=me[Ce+Ee+4+Tt],We=J*(1-rt)*(1-nt)+ie*rt*(1-nt)+ke*nt*(1-rt)+Le*rt*nt,Xe[be++]=We;return Fe},hermiteFastResize:function(O,V,X,Z,ee){for(var J=this.rcpScaleX,ie=this.rcpScaleY,ke=T(J/2),Le=T(ie/2),fe=O.imageData,Te=fe.data,_e=O.ctx.createImageData(Z,ee),ve=_e.data,rt=0;rt<ee;rt++)for(var nt=0;nt<Z;nt++){for(var Tt=(nt+rt*Z)*4,We=0,be=0,Ce=0,Be=0,le=0,Ee=0,he=0,me=(rt+.5)*ie,Fe=b(rt*ie);Fe<(rt+1)*ie;Fe++)for(var Xe=w(me-(Fe+.5))/Le,lt=(nt+.5)*J,Ye=Xe*Xe,Ke=b(nt*J);Ke<(nt+1)*J;Ke++){var Lt=w(lt-(Ke+.5))/ke,$t=v(Ye+Lt*Lt);$t>1&&$t<-1||(We=2*$t*$t*$t-3*$t*$t+1,We>0&&(Lt=4*(Ke+Fe*V),he+=We*Te[Lt+3],Ce+=We,Te[Lt+3]<255&&(We=We*Te[Lt+3]/250),Be+=We*Te[Lt],le+=We*Te[Lt+1],Ee+=We*Te[Lt+2],be+=We))}ve[Tt]=Be/be,ve[Tt+1]=le/be,ve[Tt+2]=Ee/be,ve[Tt+3]=he/Ce}return _e},toObject:function(){return{type:this.type,scaleX:this.scaleX,scaleY:this.scaleY,resizeType:this.resizeType,lanczosLobes:this.lanczosLobes}}}),h.Image.filters.Resize.fromObject=h.Image.filters.BaseFilter.fromObject}(i),function(r){var h=r.fabric||(r.fabric={}),y=h.Image.filters,b=h.util.createClass;y.Contrast=b(y.BaseFilter,{type:"Contrast",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uContrast;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
float contrastF = 1.015 * (uContrast + 1.0) / (1.0 * (1.015 - uContrast));
color.rgb = contrastF * (color.rgb - 0.5) + 0.5;
gl_FragColor = color;
}`,contrast:0,mainParameter:"contrast",applyTo2d:function(v){if(this.contrast!==0){var w=v.imageData,x,T,C=w.data,T=C.length,S=Math.floor(this.contrast*255),M=259*(S+255)/(255*(259-S));for(x=0;x<T;x+=4)C[x]=M*(C[x]-128)+128,C[x+1]=M*(C[x+1]-128)+128,C[x+2]=M*(C[x+2]-128)+128}},getUniformLocations:function(v,w){return{uContrast:v.getUniformLocation(w,"uContrast")}},sendUniformData:function(v,w){v.uniform1f(w.uContrast,this.contrast)}}),h.Image.filters.Contrast.fromObject=h.Image.filters.BaseFilter.fromObject}(i),function(r){var h=r.fabric||(r.fabric={}),y=h.Image.filters,b=h.util.createClass;y.Saturation=b(y.BaseFilter,{type:"Saturation",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uSaturation;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
float rgMax = max(color.r, color.g);
float rgbMax = max(rgMax, color.b);
color.r += rgbMax != color.r ? (rgbMax - color.r) * uSaturation : 0.00;
color.g += rgbMax != color.g ? (rgbMax - color.g) * uSaturation : 0.00;
color.b += rgbMax != color.b ? (rgbMax - color.b) * uSaturation : 0.00;
gl_FragColor = color;
}`,saturation:0,mainParameter:"saturation",applyTo2d:function(v){if(this.saturation!==0){var w=v.imageData,x=w.data,C=x.length,T=-this.saturation,S,M;for(S=0;S<C;S+=4)M=Math.max(x[S],x[S+1],x[S+2]),x[S]+=M!==x[S]?(M-x[S])*T:0,x[S+1]+=M!==x[S+1]?(M-x[S+1])*T:0,x[S+2]+=M!==x[S+2]?(M-x[S+2])*T:0}},getUniformLocations:function(v,w){return{uSaturation:v.getUniformLocation(w,"uSaturation")}},sendUniformData:function(v,w){v.uniform1f(w.uSaturation,-this.saturation)}}),h.Image.filters.Saturation.fromObject=h.Image.filters.BaseFilter.fromObject}(i),function(r){var h=r.fabric||(r.fabric={}),y=h.Image.filters,b=h.util.createClass;y.Vibrance=b(y.BaseFilter,{type:"Vibrance",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uVibrance;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
float max = max(color.r, max(color.g, color.b));
float avg = (color.r + color.g + color.b) / 3.0;
float amt = (abs(max - avg) * 2.0) * uVibrance;
color.r += max != color.r ? (max - color.r) * amt : 0.00;
color.g += max != color.g ? (max - color.g) * amt : 0.00;
color.b += max != color.b ? (max - color.b) * amt : 0.00;
gl_FragColor = color;
}`,vibrance:0,mainParameter:"vibrance",applyTo2d:function(v){if(this.vibrance!==0){var w=v.imageData,x=w.data,C=x.length,T=-this.vibrance,S,M,O,V;for(S=0;S<C;S+=4)M=Math.max(x[S],x[S+1],x[S+2]),O=(x[S]+x[S+1]+x[S+2])/3,V=Math.abs(M-O)*2/255*T,x[S]+=M!==x[S]?(M-x[S])*V:0,x[S+1]+=M!==x[S+1]?(M-x[S+1])*V:0,x[S+2]+=M!==x[S+2]?(M-x[S+2])*V:0}},getUniformLocations:function(v,w){return{uVibrance:v.getUniformLocation(w,"uVibrance")}},sendUniformData:function(v,w){v.uniform1f(w.uVibrance,-this.vibrance)}}),h.Image.filters.Vibrance.fromObject=h.Image.filters.BaseFilter.fromObject}(i),function(r){var h=r.fabric||(r.fabric={}),y=h.Image.filters,b=h.util.createClass;y.Blur=b(y.BaseFilter,{type:"Blur",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform vec2 uDelta;
varying vec2 vTexCoord;
const float nSamples = 15.0;
vec3 v3offset = vec3(12.9898, 78.233, 151.7182);
float random(vec3 scale) {
return fract(sin(dot(gl_FragCoord.xyz, scale)) * 43758.5453);
}
void main() {
vec4 color = vec4(0.0);
float total = 0.0;
float offset = random(v3offset);
for (float t = -nSamples; t <= nSamples; t++) {
float percent = (t + offset - 0.5) / nSamples;
float weight = 1.0 - abs(percent);
color += texture2D(uTexture, vTexCoord + uDelta * percent) * weight;
total += weight;
}
gl_FragColor = color / total;
}`,blur:0,mainParameter:"blur",applyTo:function(v){v.webgl?(this.aspectRatio=v.sourceWidth/v.sourceHeight,v.passes++,this._setupFrameBuffer(v),this.horizontal=!0,this.applyToWebGL(v),this._swapTextures(v),this._setupFrameBuffer(v),this.horizontal=!1,this.applyToWebGL(v),this._swapTextures(v)):this.applyTo2d(v)},applyTo2d:function(v){v.imageData=this.simpleBlur(v)},simpleBlur:function(v){var w=v.filterBackend.resources,x,C,T=v.imageData.width,S=v.imageData.height;w.blurLayer1||(w.blurLayer1=h.util.createCanvasElement(),w.blurLayer2=h.util.createCanvasElement()),x=w.blurLayer1,C=w.blurLayer2,(x.width!==T||x.height!==S)&&(C.width=x.width=T,C.height=x.height=S);var M=x.getContext("2d"),O=C.getContext("2d"),V=15,X,Z,ee,J,ie=this.blur*.06*.5;for(M.putImageData(v.imageData,0,0),O.clearRect(0,0,T,S),J=-V;J<=V;J++)X=(Math.random()-.5)/4,Z=J/V,ee=ie*Z*T+X,O.globalAlpha=1-Math.abs(Z),O.drawImage(x,ee,X),M.drawImage(C,0,0),O.globalAlpha=1,O.clearRect(0,0,C.width,C.height);for(J=-V;J<=V;J++)X=(Math.random()-.5)/4,Z=J/V,ee=ie*Z*S+X,O.globalAlpha=1-Math.abs(Z),O.drawImage(x,X,ee),M.drawImage(C,0,0),O.globalAlpha=1,O.clearRect(0,0,C.width,C.height);v.ctx.drawImage(x,0,0);var ke=v.ctx.getImageData(0,0,x.width,x.height);return M.globalAlpha=1,M.clearRect(0,0,x.width,x.height),ke},getUniformLocations:function(v,w){return{delta:v.getUniformLocation(w,"uDelta")}},sendUniformData:function(v,w){var x=this.chooseRightDelta();v.uniform2fv(w.delta,x)},chooseRightDelta:function(){var v=1,w=[0,0],x;return this.horizontal?this.aspectRatio>1&&(v=1/this.aspectRatio):this.aspectRatio<1&&(v=this.aspectRatio),x=v*this.blur*.12,this.horizontal?w[0]=x:w[1]=x,w}}),y.Blur.fromObject=h.Image.filters.BaseFilter.fromObject}(i),function(r){var h=r.fabric||(r.fabric={}),y=h.Image.filters,b=h.util.createClass;y.Gamma=b(y.BaseFilter,{type:"Gamma",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform vec3 uGamma;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
vec3 correction = (1.0 / uGamma);
color.r = pow(color.r, correction.r);
color.g = pow(color.g, correction.g);
color.b = pow(color.b, correction.b);
gl_FragColor = color;
gl_FragColor.rgb *= color.a;
}`,gamma:[1,1,1],mainParameter:"gamma",initialize:function(v){this.gamma=[1,1,1],y.BaseFilter.prototype.initialize.call(this,v)},applyTo2d:function(v){var w=v.imageData,x=w.data,C=this.gamma,T=x.length,S=1/C[0],M=1/C[1],O=1/C[2],V;for(this.rVals||(this.rVals=new Uint8Array(256),this.gVals=new Uint8Array(256),this.bVals=new Uint8Array(256)),V=0,T=256;V<T;V++)this.rVals[V]=Math.pow(V/255,S)*255,this.gVals[V]=Math.pow(V/255,M)*255,this.bVals[V]=Math.pow(V/255,O)*255;for(V=0,T=x.length;V<T;V+=4)x[V]=this.rVals[x[V]],x[V+1]=this.gVals[x[V+1]],x[V+2]=this.bVals[x[V+2]]},getUniformLocations:function(v,w){return{uGamma:v.getUniformLocation(w,"uGamma")}},sendUniformData:function(v,w){v.uniform3fv(w.uGamma,this.gamma)}}),h.Image.filters.Gamma.fromObject=h.Image.filters.BaseFilter.fromObject}(i),function(r){var h=r.fabric||(r.fabric={}),y=h.Image.filters,b=h.util.createClass;y.Composed=b(y.BaseFilter,{type:"Composed",subFilters:[],initialize:function(v){this.callSuper("initialize",v),this.subFilters=this.subFilters.slice(0)},applyTo:function(v){v.passes+=this.subFilters.length-1,this.subFilters.forEach(function(w){w.applyTo(v)})},toObject:function(){return h.util.object.extend(this.callSuper("toObject"),{subFilters:this.subFilters.map(function(v){return v.toObject()})})},isNeutralState:function(){return!this.subFilters.some(function(v){return!v.isNeutralState()})}}),h.Image.filters.Composed.fromObject=function(v,w){var x=v.subFilters||[],C=x.map(function(S){return new h.Image.filters[S.type](S)}),T=new h.Image.filters.Composed({subFilters:C});return w&&w(T),T}}(i),function(r){var h=r.fabric||(r.fabric={}),y=h.Image.filters,b=h.util.createClass;y.HueRotation=b(y.ColorMatrix,{type:"HueRotation",rotation:0,mainParameter:"rotation",calculateMatrix:function(){var v=this.rotation*Math.PI,w=h.util.cos(v),x=h.util.sin(v),C=1/3,T=Math.sqrt(C)*x,S=1-w;this.matrix=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],this.matrix[0]=w+S/3,this.matrix[1]=C*S-T,this.matrix[2]=C*S+T,this.matrix[5]=C*S+T,this.matrix[6]=w+C*S,this.matrix[7]=C*S-T,this.matrix[10]=C*S-T,this.matrix[11]=C*S+T,this.matrix[12]=w+C*S},isNeutralState:function(v){return this.calculateMatrix(),y.BaseFilter.prototype.isNeutralState.call(this,v)},applyTo:function(v){this.calculateMatrix(),y.BaseFilter.prototype.applyTo.call(this,v)}}),h.Image.filters.HueRotation.fromObject=h.Image.filters.BaseFilter.fromObject}(i),function(r){var h=r.fabric||(r.fabric={}),y=h.util.object.clone;if(h.Text){h.warn("fabric.Text is already defined");return}var b="fontFamily fontWeight fontSize text underline overline linethrough textAlign fontStyle lineHeight textBackgroundColor charSpacing styles direction path pathStartOffset pathSide pathAlign".split(" ");h.Text=h.util.createClass(h.Object,{_dimensionAffectingProps:["fontSize","fontWeight","fontFamily","fontStyle","lineHeight","text","charSpacing","textAlign","styles","path","pathStartOffset","pathSide","pathAlign"],_reNewline:/\r?\n/,_reSpacesAndTabs:/[ \t\r]/g,_reSpaceAndTab:/[ \t\r]/,_reWords:/\S+/g,type:"text",fontSize:40,fontWeight:"normal",fontFamily:"Times New Roman",underline:!1,overline:!1,linethrough:!1,textAlign:"left",fontStyle:"normal",lineHeight:1.16,superscript:{size:.6,baseline:-.35},subscript:{size:.6,baseline:.11},textBackgroundColor:"",stateProperties:h.Object.prototype.stateProperties.concat(b),cacheProperties:h.Object.prototype.cacheProperties.concat(b),stroke:null,shadow:null,path:null,pathStartOffset:0,pathSide:"left",pathAlign:"baseline",_fontSizeFraction:.222,offsets:{underline:.1,linethrough:-.315,overline:-.88},_fontSizeMult:1.13,charSpacing:0,styles:null,_measuringContext:null,deltaY:0,direction:"ltr",_styleProperties:["stroke","strokeWidth","fill","fontFamily","fontSize","fontWeight","fontStyle","underline","overline","linethrough","deltaY","textBackgroundColor"],__charBounds:[],CACHE_FONT_SIZE:400,MIN_TEXT_WIDTH:2,initialize:function(v,w){this.styles=w?w.styles||{}:{},this.text=v,this.__skipDimension=!0,this.callSuper("initialize",w),this.path&&this.setPathInfo(),this.__skipDimension=!1,this.initDimensions(),this.setCoords(),this.setupState({propertySet:"_dimensionAffectingProps"})},setPathInfo:function(){var v=this.path;v&&(v.segmentsInfo=h.util.getPathSegmentsInfo(v.path))},getMeasuringContext:function(){return h._measuringContext||(h._measuringContext=this.canvas&&this.canvas.contextCache||h.util.createCanvasElement().getContext("2d")),h._measuringContext},_splitText:function(){var v=this._splitTextIntoLines(this.text);return this.textLines=v.lines,this._textLines=v.graphemeLines,this._unwrappedTextLines=v._unwrappedLines,this._text=v.graphemeText,v},initDimensions:function(){this.__skipDimension||(this._splitText(),this._clearCache(),this.path?(this.width=this.path.width,this.height=this.path.height):(this.width=this.calcTextWidth()||this.cursorWidth||this.MIN_TEXT_WIDTH,this.height=this.calcTextHeight()),this.textAlign.indexOf("justify")!==-1&&this.enlargeSpaces(),this.saveState({propertySet:"_dimensionAffectingProps"}))},enlargeSpaces:function(){for(var v,w,x,C,T,S,M,O=0,V=this._textLines.length;O<V;O++)if(!(this.textAlign!=="justify"&&(O===V-1||this.isEndOfWrapping(O)))&&(C=0,T=this._textLines[O],w=this.getLineWidth(O),w<this.width&&(M=this.textLines[O].match(this._reSpacesAndTabs)))){x=M.length,v=(this.width-w)/x;for(var X=0,Z=T.length;X<=Z;X++)S=this.__charBounds[O][X],this._reSpaceAndTab.test(T[X])?(S.width+=v,S.kernedWidth+=v,S.left+=C,C+=v):S.left+=C}},isEndOfWrapping:function(v){return v===this._textLines.length-1},missingNewlineOffset:function(){return 1},toString:function(){return"#<fabric.Text ("+this.complexity()+'): { "text": "'+this.text+'", "fontFamily": "'+this.fontFamily+'" }>'},_getCacheCanvasDimensions:function(){var v=this.callSuper("_getCacheCanvasDimensions"),w=this.fontSize;return v.width+=w*v.zoomX,v.height+=w*v.zoomY,v},_render:function(v){var w=this.path;w&&!w.isNotVisible()&&w._render(v),this._setTextStyles(v),this._renderTextLinesBackground(v),this._renderTextDecoration(v,"underline"),this._renderText(v),this._renderTextDecoration(v,"overline"),this._renderTextDecoration(v,"linethrough")},_renderText:function(v){this.paintFirst==="stroke"?(this._renderTextStroke(v),this._renderTextFill(v)):(this._renderTextFill(v),this._renderTextStroke(v))},_setTextStyles:function(v,w,x){if(v.textBaseline="alphabetical",this.path)switch(this.pathAlign){case"center":v.textBaseline="middle";break;case"ascender":v.textBaseline="top";break;case"descender":v.textBaseline="bottom";break}v.font=this._getFontDeclaration(w,x)},calcTextWidth:function(){for(var v=this.getLineWidth(0),w=1,x=this._textLines.length;w<x;w++){var C=this.getLineWidth(w);C>v&&(v=C)}return v},_renderTextLine:function(v,w,x,C,T,S){this._renderChars(v,w,x,C,T,S)},_renderTextLinesBackground:function(v){if(!(!this.textBackgroundColor&&!this.styleHas("textBackgroundColor"))){for(var w,x,C=v.fillStyle,T,S,M=this._getLeftOffset(),O=this._getTopOffset(),V=0,X=0,Z,ee,J=this.path,ie,ke=0,Le=this._textLines.length;ke<Le;ke++){if(w=this.getHeightOfLine(ke),!this.textBackgroundColor&&!this.styleHas("textBackgroundColor",ke)){O+=w;continue}T=this._textLines[ke],x=this._getLineLeftOffset(ke),X=0,V=0,S=this.getValueOfPropertyAt(ke,0,"textBackgroundColor");for(var fe=0,Te=T.length;fe<Te;fe++)Z=this.__charBounds[ke][fe],ee=this.getValueOfPropertyAt(ke,fe,"textBackgroundColor"),J?(v.save(),v.translate(Z.renderLeft,Z.renderTop),v.rotate(Z.angle),v.fillStyle=ee,ee&&v.fillRect(-Z.width/2,-w/this.lineHeight*(1-this._fontSizeFraction),Z.width,w/this.lineHeight),v.restore()):ee!==S?(ie=M+x+V,this.direction==="rtl"&&(ie=this.width-ie-X),v.fillStyle=S,S&&v.fillRect(ie,O,X,w/this.lineHeight),V=Z.left,X=Z.width,S=ee):X+=Z.kernedWidth;ee&&!J&&(ie=M+x+V,this.direction==="rtl"&&(ie=this.width-ie-X),v.fillStyle=ee,v.fillRect(ie,O,X,w/this.lineHeight)),O+=w}v.fillStyle=C,this._removeShadow(v)}},getFontCache:function(v){var w=v.fontFamily.toLowerCase();h.charWidthsCache[w]||(h.charWidthsCache[w]={});var x=h.charWidthsCache[w],C=v.fontStyle.toLowerCase()+"_"+(v.fontWeight+"").toLowerCase();return x[C]||(x[C]={}),x[C]},_measureChar:function(v,w,x,C){var T=this.getFontCache(w),S=this._getFontDeclaration(w),M=this._getFontDeclaration(C),O=x+v,V=S===M,X,Z,ee,J=w.fontSize/this.CACHE_FONT_SIZE,ie;if(x&&T[x]!==void 0&&(ee=T[x]),T[v]!==void 0&&(ie=X=T[v]),V&&T[O]!==void 0&&(Z=T[O],ie=Z-ee),X===void 0||ee===void 0||Z===void 0){var ke=this.getMeasuringContext();this._setTextStyles(ke,w,!0)}return X===void 0&&(ie=X=ke.measureText(v).width,T[v]=X),ee===void 0&&V&&x&&(ee=ke.measureText(x).width,T[x]=ee),V&&Z===void 0&&(Z=ke.measureText(O).width,T[O]=Z,ie=Z-ee),{width:X*J,kernedWidth:ie*J}},getHeightOfChar:function(v,w){return this.getValueOfPropertyAt(v,w,"fontSize")},measureLine:function(v){var w=this._measureLine(v);return this.charSpacing!==0&&(w.width-=this._getWidthOfCharSpacing()),w.width<0&&(w.width=0),w},_measureLine:function(v){var w=0,x,C,T=this._textLines[v],S,M,O=0,V=new Array(T.length),X=0,Z,ee,J=this.path,ie=this.pathSide==="right";for(this.__charBounds[v]=V,x=0;x<T.length;x++)C=T[x],M=this._getGraphemeBox(C,v,x,S),V[x]=M,w+=M.kernedWidth,S=C;if(V[x]={left:M?M.left+M.width:0,width:0,kernedWidth:0,height:this.fontSize},J){switch(ee=J.segmentsInfo[J.segmentsInfo.length-1].length,Z=h.util.getPointOnPath(J.path,0,J.segmentsInfo),Z.x+=J.pathOffset.x,Z.y+=J.pathOffset.y,this.textAlign){case"left":X=ie?ee-w:0;break;case"center":X=(ee-w)/2;break;case"right":X=ie?0:ee-w;break}for(X+=this.pathStartOffset*(ie?-1:1),x=ie?T.length-1:0;ie?x>=0:x<T.length;ie?x--:x++)M=V[x],X>ee?X%=ee:X<0&&(X+=ee),this._setGraphemeOnPath(X,M,Z),X+=M.kernedWidth}return{width:w,numOfSpaces:O}},_setGraphemeOnPath:function(v,w,x){var C=v+w.kernedWidth/2,T=this.path,S=h.util.getPointOnPath(T.path,C,T.segmentsInfo);w.renderLeft=S.x-x.x,w.renderTop=S.y-x.y,w.angle=S.angle+(this.pathSide==="right"?Math.PI:0)},_getGraphemeBox:function(v,w,x,C,T){var S=this.getCompleteStyleDeclaration(w,x),M=C?this.getCompleteStyleDeclaration(w,x-1):{},O=this._measureChar(v,S,C,M),V=O.kernedWidth,X=O.width,Z;this.charSpacing!==0&&(Z=this._getWidthOfCharSpacing(),X+=Z,V+=Z);var ee={width:X,left:0,height:S.fontSize,kernedWidth:V,deltaY:S.deltaY};if(x>0&&!T){var J=this.__charBounds[w][x-1];ee.left=J.left+J.width+O.kernedWidth-O.width}return ee},getHeightOfLine:function(v){if(this.__lineHeights[v])return this.__lineHeights[v];for(var w=this._textLines[v],x=this.getHeightOfChar(v,0),C=1,T=w.length;C<T;C++)x=Math.max(this.getHeightOfChar(v,C),x);return this.__lineHeights[v]=x*this.lineHeight*this._fontSizeMult},calcTextHeight:function(){for(var v,w=0,x=0,C=this._textLines.length;x<C;x++)v=this.getHeightOfLine(x),w+=x===C-1?v/this.lineHeight:v;return w},_getLeftOffset:function(){return this.direction==="ltr"?-this.width/2:this.width/2},_getTopOffset:function(){return-this.height/2},_renderTextCommon:function(v,w){v.save();for(var x=0,C=this._getLeftOffset(),T=this._getTopOffset(),S=0,M=this._textLines.length;S<M;S++){var O=this.getHeightOfLine(S),V=O/this.lineHeight,X=this._getLineLeftOffset(S);this._renderTextLine(w,v,this._textLines[S],C+X,T+x+V,S),x+=O}v.restore()},_renderTextFill:function(v){!this.fill&&!this.styleHas("fill")||this._renderTextCommon(v,"fillText")},_renderTextStroke:function(v){(!this.stroke||this.strokeWidth===0)&&this.isEmptyStyles()||(this.shadow&&!this.shadow.affectStroke&&this._removeShadow(v),v.save(),this._setLineDash(v,this.strokeDashArray),v.beginPath(),this._renderTextCommon(v,"strokeText"),v.closePath(),v.restore())},_renderChars:function(v,w,x,C,T,S){var M=this.getHeightOfLine(S),O=this.textAlign.indexOf("justify")!==-1,V,X,Z="",ee,J=0,ie,ke=this.path,Le=!O&&this.charSpacing===0&&this.isEmptyStyles(S)&&!ke,fe=this.direction==="ltr",Te=this.direction==="ltr"?1:-1,_e,ve=w.canvas.getAttribute("dir");if(w.save(),ve!==this.direction&&(w.canvas.setAttribute("dir",fe?"ltr":"rtl"),w.direction=fe?"ltr":"rtl",w.textAlign=fe?"left":"right"),T-=M*this._fontSizeFraction/this.lineHeight,Le){this._renderChar(v,w,S,0,x.join(""),C,T,M),w.restore();return}for(var rt=0,nt=x.length-1;rt<=nt;rt++)ie=rt===nt||this.charSpacing||ke,Z+=x[rt],ee=this.__charBounds[S][rt],J===0?(C+=Te*(ee.kernedWidth-ee.width),J+=ee.width):J+=ee.kernedWidth,O&&!ie&&this._reSpaceAndTab.test(x[rt])&&(ie=!0),ie||(V=V||this.getCompleteStyleDeclaration(S,rt),X=this.getCompleteStyleDeclaration(S,rt+1),ie=h.util.hasStyleChanged(V,X,!1)),ie&&(ke?(w.save(),w.translate(ee.renderLeft,ee.renderTop),w.rotate(ee.angle),this._renderChar(v,w,S,rt,Z,-J/2,0,M),w.restore()):(_e=C,this._renderChar(v,w,S,rt,Z,_e,T,M)),Z="",V=X,C+=Te*J,J=0);w.restore()},_applyPatternGradientTransformText:function(v){var w=h.util.createCanvasElement(),x,C=this.width+this.strokeWidth,T=this.height+this.strokeWidth;return w.width=C,w.height=T,x=w.getContext("2d"),x.beginPath(),x.moveTo(0,0),x.lineTo(C,0),x.lineTo(C,T),x.lineTo(0,T),x.closePath(),x.translate(C/2,T/2),x.fillStyle=v.toLive(x),this._applyPatternGradientTransform(x,v),x.fill(),x.createPattern(w,"no-repeat")},handleFiller:function(v,w,x){var C,T;return x.toLive?x.gradientUnits==="percentage"||x.gradientTransform||x.patternTransform?(C=-this.width/2,T=-this.height/2,v.translate(C,T),v[w]=this._applyPatternGradientTransformText(x),{offsetX:C,offsetY:T}):(v[w]=x.toLive(v,this),this._applyPatternGradientTransform(v,x)):(v[w]=x,{offsetX:0,offsetY:0})},_setStrokeStyles:function(v,w){return v.lineWidth=w.strokeWidth,v.lineCap=this.strokeLineCap,v.lineDashOffset=this.strokeDashOffset,v.lineJoin=this.strokeLineJoin,v.miterLimit=this.strokeMiterLimit,this.handleFiller(v,"strokeStyle",w.stroke)},_setFillStyles:function(v,w){return this.handleFiller(v,"fillStyle",w.fill)},_renderChar:function(v,w,x,C,T,S,M){var O=this._getStyleDeclaration(x,C),V=this.getCompleteStyleDeclaration(x,C),X=v==="fillText"&&V.fill,Z=v==="strokeText"&&V.stroke&&V.strokeWidth,ee,J;!Z&&!X||(w.save(),X&&(ee=this._setFillStyles(w,V)),Z&&(J=this._setStrokeStyles(w,V)),w.font=this._getFontDeclaration(V),O&&O.textBackgroundColor&&this._removeShadow(w),O&&O.deltaY&&(M+=O.deltaY),X&&w.fillText(T,S-ee.offsetX,M-ee.offsetY),Z&&w.strokeText(T,S-J.offsetX,M-J.offsetY),w.restore())},setSuperscript:function(v,w){return this._setScript(v,w,this.superscript)},setSubscript:function(v,w){return this._setScript(v,w,this.subscript)},_setScript:function(v,w,x){var C=this.get2DCursorLocation(v,!0),T=this.getValueOfPropertyAt(C.lineIndex,C.charIndex,"fontSize"),S=this.getValueOfPropertyAt(C.lineIndex,C.charIndex,"deltaY"),M={fontSize:T*x.size,deltaY:S+T*x.baseline};return this.setSelectionStyles(M,v,w),this},_getLineLeftOffset:function(v){var w=this.getLineWidth(v),x=this.width-w,C=this.textAlign,T=this.direction,M,S=0,M=this.isEndOfWrapping(v);return C==="justify"||C==="justify-center"&&!M||C==="justify-right"&&!M||C==="justify-left"&&!M?0:(C==="center"&&(S=x/2),C==="right"&&(S=x),C==="justify-center"&&(S=x/2),C==="justify-right"&&(S=x),T==="rtl"&&(S-=x),S)},_clearCache:function(){this.__lineWidths=[],this.__lineHeights=[],this.__charBounds=[]},_shouldClearDimensionCache:function(){var v=this._forceClearCache;return v||(v=this.hasStateChanged("_dimensionAffectingProps")),v&&(this.dirty=!0,this._forceClearCache=!1),v},getLineWidth:function(v){if(this.__lineWidths[v]!==void 0)return this.__lineWidths[v];var w=this.measureLine(v),x=w.width;return this.__lineWidths[v]=x,x},_getWidthOfCharSpacing:function(){return this.charSpacing!==0?this.fontSize*this.charSpacing/1e3:0},getValueOfPropertyAt:function(v,w,x){var C=this._getStyleDeclaration(v,w);return C&&typeof C[x]<"u"?C[x]:this[x]},_renderTextDecoration:function(v,w){if(!(!this[w]&&!this.styleHas(w))){for(var x,C,T,S,M,O,V,X,Z=this._getLeftOffset(),ee=this._getTopOffset(),J,ie,ke,Le,fe,Te,_e,ve,rt=this.path,nt=this._getWidthOfCharSpacing(),Tt=this.offsets[w],We=0,be=this._textLines.length;We<be;We++){if(x=this.getHeightOfLine(We),!this[w]&&!this.styleHas(w,We)){ee+=x;continue}V=this._textLines[We],Te=x/this.lineHeight,S=this._getLineLeftOffset(We),ie=0,ke=0,X=this.getValueOfPropertyAt(We,0,w),ve=this.getValueOfPropertyAt(We,0,"fill"),J=ee+Te*(1-this._fontSizeFraction),C=this.getHeightOfChar(We,0),M=this.getValueOfPropertyAt(We,0,"deltaY");for(var Ce=0,Be=V.length;Ce<Be;Ce++)if(Le=this.__charBounds[We][Ce],fe=this.getValueOfPropertyAt(We,Ce,w),_e=this.getValueOfPropertyAt(We,Ce,"fill"),T=this.getHeightOfChar(We,Ce),O=this.getValueOfPropertyAt(We,Ce,"deltaY"),rt&&fe&&_e)v.save(),v.fillStyle=ve,v.translate(Le.renderLeft,Le.renderTop),v.rotate(Le.angle),v.fillRect(-Le.kernedWidth/2,Tt*T+O,Le.kernedWidth,this.fontSize/15),v.restore();else if((fe!==X||_e!==ve||T!==C||O!==M)&&ke>0){var le=Z+S+ie;this.direction==="rtl"&&(le=this.width-le-ke),X&&ve&&(v.fillStyle=ve,v.fillRect(le,J+Tt*C+M,ke,this.fontSize/15)),ie=Le.left,ke=Le.width,X=fe,ve=_e,C=T,M=O}else ke+=Le.kernedWidth;var le=Z+S+ie;this.direction==="rtl"&&(le=this.width-le-ke),v.fillStyle=_e,fe&&_e&&v.fillRect(le,J+Tt*C+M,ke-nt,this.fontSize/15),ee+=x}this._removeShadow(v)}},_getFontDeclaration:function(v,w){var x=v||this,C=this.fontFamily,T=h.Text.genericFonts.indexOf(C.toLowerCase())>-1,S=C===void 0||C.indexOf("'")>-1||C.indexOf(",")>-1||C.indexOf('"')>-1||T?x.fontFamily:'"'+x.fontFamily+'"';return[h.isLikelyNode?x.fontWeight:x.fontStyle,h.isLikelyNode?x.fontStyle:x.fontWeight,w?this.CACHE_FONT_SIZE+"px":x.fontSize+"px",S].join(" ")},render:function(v){!this.visible||this.canvas&&this.canvas.skipOffscreen&&!this.group&&!this.isOnScreen()||(this._shouldClearDimensionCache()&&this.initDimensions(),this.callSuper("render",v))},_splitTextIntoLines:function(v){for(var w=v.split(this._reNewline),x=new Array(w.length),C=[`
`],T=[],S=0;S<w.length;S++)x[S]=h.util.string.graphemeSplit(w[S]),T=T.concat(x[S],C);return T.pop(),{_unwrappedLines:x,lines:w,graphemeText:T,graphemeLines:x}},toObject:function(v){var w=b.concat(v),x=this.callSuper("toObject",w);return x.styles=h.util.stylesToArray(this.styles,this.text),x.path&&(x.path=this.path.toObject()),x},set:function(v,w){this.callSuper("set",v,w);var x=!1,C=!1;if(typeof v=="object")for(var T in v)T==="path"&&this.setPathInfo(),x=x||this._dimensionAffectingProps.indexOf(T)!==-1,C=C||T==="path";else x=this._dimensionAffectingProps.indexOf(v)!==-1,C=v==="path";return C&&this.setPathInfo(),x&&(this.initDimensions(),this.setCoords()),this},complexity:function(){return 1}}),h.Text.ATTRIBUTE_NAMES=h.SHARED_ATTRIBUTES.concat("x y dx dy font-family font-style font-weight font-size letter-spacing text-decoration text-anchor".split(" ")),h.Text.DEFAULT_SVG_FONT_SIZE=16,h.Text.fromElement=function(v,w,x){if(!v)return w(null);var C=h.parseAttributes(v,h.Text.ATTRIBUTE_NAMES),T=C.textAnchor||"left";if(x=h.util.object.extend(x?y(x):{},C),x.top=x.top||0,x.left=x.left||0,C.textDecoration){var S=C.textDecoration;S.indexOf("underline")!==-1&&(x.underline=!0),S.indexOf("overline")!==-1&&(x.overline=!0),S.indexOf("line-through")!==-1&&(x.linethrough=!0),delete x.textDecoration}"dx"in C&&(x.left+=C.dx),"dy"in C&&(x.top+=C.dy),"fontSize"in x||(x.fontSize=h.Text.DEFAULT_SVG_FONT_SIZE);var M="";"textContent"in v?M=v.textContent:"firstChild"in v&&v.firstChild!==null&&"data"in v.firstChild&&v.firstChild.data!==null&&(M=v.firstChild.data),M=M.replace(/^\s+|\s+$|\n+/g,"").replace(/\s+/g," ");var O=x.strokeWidth;x.strokeWidth=0;var V=new h.Text(M,x),X=V.getScaledHeight()/V.height,Z=(V.height+V.strokeWidth)*V.lineHeight-V.height,ee=Z*X,J=V.getScaledHeight()+ee,ie=0;T==="center"&&(ie=V.getScaledWidth()/2),T==="right"&&(ie=V.getScaledWidth()),V.set({left:V.left-ie,top:V.top-(J-V.fontSize*(.07+V._fontSizeFraction))/V.lineHeight,strokeWidth:typeof O<"u"?O:1}),w(V)},h.Text.fromObject=function(v,w){var x=y(v),C=v.path;return delete x.path,h.Object._fromObject("Text",x,function(T){T.styles=h.util.stylesFromArray(v.styles,v.text),C?h.Object._fromObject("Path",C,function(S){T.set("path",S),w(T)},"path"):w(T)},"text")},h.Text.genericFonts=["sans-serif","serif","cursive","fantasy","monospace"],h.util.createAccessors&&h.util.createAccessors(h.Text)}(i),function(){e.util.object.extend(e.Text.prototype,{isEmptyStyles:function(r){if(!this.styles||typeof r<"u"&&!this.styles[r])return!0;var h=typeof r>"u"?this.styles:{line:this.styles[r]};for(var y in h)for(var b in h[y])for(var v in h[y][b])return!1;return!0},styleHas:function(r,h){if(!this.styles||!r||r===""||typeof h<"u"&&!this.styles[h])return!1;var y=typeof h>"u"?this.styles:{0:this.styles[h]};for(var b in y)for(var v in y[b])if(typeof y[b][v][r]<"u")return!0;return!1},cleanStyle:function(r){if(!this.styles||!r||r==="")return!1;var h=this.styles,y=0,b,v,w=!0,x=0,C;for(var T in h){b=0;for(var S in h[T]){var C=h[T][S],M=C.hasOwnProperty(r);y++,M?(v?C[r]!==v&&(w=!1):v=C[r],C[r]===this[r]&&delete C[r]):w=!1,Object.keys(C).length!==0?b++:delete h[T][S]}b===0&&delete h[T]}for(var O=0;O<this._textLines.length;O++)x+=this._textLines[O].length;w&&y===x&&(this[r]=v,this.removeStyle(r))},removeStyle:function(r){if(!(!this.styles||!r||r==="")){var h=this.styles,y,b,v;for(b in h){y=h[b];for(v in y)delete y[v][r],Object.keys(y[v]).length===0&&delete y[v];Object.keys(y).length===0&&delete h[b]}}},_extendStyles:function(r,h){var y=this.get2DCursorLocation(r);this._getLineStyle(y.lineIndex)||this._setLineStyle(y.lineIndex),this._getStyleDeclaration(y.lineIndex,y.charIndex)||this._setStyleDeclaration(y.lineIndex,y.charIndex,{}),e.util.object.extend(this._getStyleDeclaration(y.lineIndex,y.charIndex),h)},get2DCursorLocation:function(r,h){typeof r>"u"&&(r=this.selectionStart);for(var y=h?this._unwrappedTextLines:this._textLines,b=y.length,v=0;v<b;v++){if(r<=y[v].length)return{lineIndex:v,charIndex:r};r-=y[v].length+this.missingNewlineOffset(v)}return{lineIndex:v-1,charIndex:y[v-1].length<r?y[v-1].length:r}},getSelectionStyles:function(r,h,y){typeof r>"u"&&(r=this.selectionStart||0),typeof h>"u"&&(h=this.selectionEnd||r);for(var b=[],v=r;v<h;v++)b.push(this.getStyleAtPosition(v,y));return b},getStyleAtPosition:function(r,h){var y=this.get2DCursorLocation(r),b=h?this.getCompleteStyleDeclaration(y.lineIndex,y.charIndex):this._getStyleDeclaration(y.lineIndex,y.charIndex);return b||{}},setSelectionStyles:function(r,h,y){typeof h>"u"&&(h=this.selectionStart||0),typeof y>"u"&&(y=this.selectionEnd||h);for(var b=h;b<y;b++)this._extendStyles(b,r);return this._forceClearCache=!0,this},_getStyleDeclaration:function(r,h){var y=this.styles&&this.styles[r];return y?y[h]:null},getCompleteStyleDeclaration:function(r,h){for(var y=this._getStyleDeclaration(r,h)||{},b={},v,w=0;w<this._styleProperties.length;w++)v=this._styleProperties[w],b[v]=typeof y[v]>"u"?this[v]:y[v];return b},_setStyleDeclaration:function(r,h,y){this.styles[r][h]=y},_deleteStyleDeclaration:function(r,h){delete this.styles[r][h]},_getLineStyle:function(r){return!!this.styles[r]},_setLineStyle:function(r){this.styles[r]={}},_deleteLineStyle:function(r){delete this.styles[r]}})}(),function(){function r(h){h.textDecoration&&(h.textDecoration.indexOf("underline")>-1&&(h.underline=!0),h.textDecoration.indexOf("line-through")>-1&&(h.linethrough=!0),h.textDecoration.indexOf("overline")>-1&&(h.overline=!0),delete h.textDecoration)}e.IText=e.util.createClass(e.Text,e.Observable,{type:"i-text",selectionStart:0,selectionEnd:0,selectionColor:"rgba(17,119,255,0.3)",isEditing:!1,editable:!0,editingBorderColor:"rgba(102,153,255,0.25)",cursorWidth:2,cursorColor:"",cursorDelay:1e3,cursorDuration:600,caching:!0,hiddenTextareaContainer:null,_reSpace:/\s|\n/,_currentCursorOpacity:0,_selectionDirection:null,_abortCursorAnimation:!1,__widthOfSpace:[],inCompositionMode:!1,initialize:function(h,y){this.callSuper("initialize",h,y),this.initBehavior()},setSelectionStart:function(h){h=Math.max(h,0),this._updateAndFire("selectionStart",h)},setSelectionEnd:function(h){h=Math.min(h,this.text.length),this._updateAndFire("selectionEnd",h)},_updateAndFire:function(h,y){this[h]!==y&&(this._fireSelectionChanged(),this[h]=y),this._updateTextarea()},_fireSelectionChanged:function(){this.fire("selection:changed"),this.canvas&&this.canvas.fire("text:selection:changed",{target:this})},initDimensions:function(){this.isEditing&&this.initDelayedCursor(),this.clearContextTop(),this.callSuper("initDimensions")},render:function(h){this.clearContextTop(),this.callSuper("render",h),this.cursorOffsetCache={},this.renderCursorOrSelection()},_render:function(h){this.callSuper("_render",h)},clearContextTop:function(h){if(!(!this.isEditing||!this.canvas||!this.canvas.contextTop)){var y=this.canvas.contextTop,b=this.canvas.viewportTransform;y.save(),y.transform(b[0],b[1],b[2],b[3],b[4],b[5]),this.transform(y),this._clearTextArea(y),h||y.restore()}},renderCursorOrSelection:function(){if(!(!this.isEditing||!this.canvas||!this.canvas.contextTop)){var h=this._getCursorBoundaries(),y=this.canvas.contextTop;this.clearContextTop(!0),this.selectionStart===this.selectionEnd?this.renderCursor(h,y):this.renderSelection(h,y),y.restore()}},_clearTextArea:function(h){var y=this.width+4,b=this.height+4;h.clearRect(-y/2,-b/2,y,b)},_getCursorBoundaries:function(h){typeof h>"u"&&(h=this.selectionStart);var y=this._getLeftOffset(),b=this._getTopOffset(),v=this._getCursorBoundariesOffsets(h);return{left:y,top:b,leftOffset:v.left,topOffset:v.top}},_getCursorBoundariesOffsets:function(h){if(this.cursorOffsetCache&&"top"in this.cursorOffsetCache)return this.cursorOffsetCache;var y,b,v,w=0,x=0,C,T=this.get2DCursorLocation(h);v=T.charIndex,b=T.lineIndex;for(var S=0;S<b;S++)w+=this.getHeightOfLine(S);y=this._getLineLeftOffset(b);var M=this.__charBounds[b][v];return M&&(x=M.left),this.charSpacing!==0&&v===this._textLines[b].length&&(x-=this._getWidthOfCharSpacing()),C={top:w,left:y+(x>0?x:0)},this.direction==="rtl"&&(C.left*=-1),this.cursorOffsetCache=C,this.cursorOffsetCache},renderCursor:function(h,y){var b=this.get2DCursorLocation(),v=b.lineIndex,w=b.charIndex>0?b.charIndex-1:0,x=this.getValueOfPropertyAt(v,w,"fontSize"),C=this.scaleX*this.canvas.getZoom(),T=this.cursorWidth/C,S=h.topOffset,M=this.getValueOfPropertyAt(v,w,"deltaY");S+=(1-this._fontSizeFraction)*this.getHeightOfLine(v)/this.lineHeight-x*(1-this._fontSizeFraction),this.inCompositionMode&&this.renderSelection(h,y),y.fillStyle=this.cursorColor||this.getValueOfPropertyAt(v,w,"fill"),y.globalAlpha=this.__isMousedown?1:this._currentCursorOpacity,y.fillRect(h.left+h.leftOffset-T/2,S+h.top+M,T,x)},renderSelection:function(h,y){for(var b=this.inCompositionMode?this.hiddenTextarea.selectionStart:this.selectionStart,v=this.inCompositionMode?this.hiddenTextarea.selectionEnd:this.selectionEnd,w=this.textAlign.indexOf("justify")!==-1,x=this.get2DCursorLocation(b),C=this.get2DCursorLocation(v),T=x.lineIndex,S=C.lineIndex,M=x.charIndex<0?0:x.charIndex,O=C.charIndex<0?0:C.charIndex,V=T;V<=S;V++){var X=this._getLineLeftOffset(V)||0,Z=this.getHeightOfLine(V),ee=0,J=0,ie=0;if(V===T&&(J=this.__charBounds[T][M].left),V>=T&&V<S)ie=w&&!this.isEndOfWrapping(V)?this.width:this.getLineWidth(V)||5;else if(V===S)if(O===0)ie=this.__charBounds[S][O].left;else{var ke=this._getWidthOfCharSpacing();ie=this.__charBounds[S][O-1].left+this.__charBounds[S][O-1].width-ke}ee=Z,(this.lineHeight<1||V===S&&this.lineHeight>1)&&(Z/=this.lineHeight);var Le=h.left+X+J,fe=ie-J,Te=Z,_e=0;this.inCompositionMode?(y.fillStyle=this.compositionColor||"black",Te=1,_e=Z):y.fillStyle=this.selectionColor,this.direction==="rtl"&&(Le=this.width-Le-fe),y.fillRect(Le,h.top+h.topOffset+_e,fe,Te),h.topOffset+=ee}},getCurrentCharFontSize:function(){var h=this._getCurrentCharIndex();return this.getValueOfPropertyAt(h.l,h.c,"fontSize")},getCurrentCharColor:function(){var h=this._getCurrentCharIndex();return this.getValueOfPropertyAt(h.l,h.c,"fill")},_getCurrentCharIndex:function(){var h=this.get2DCursorLocation(this.selectionStart,!0),y=h.charIndex>0?h.charIndex-1:0;return{l:h.lineIndex,c:y}}}),e.IText.fromObject=function(h,y){var b=e.util.stylesFromArray(h.styles,h.text),v=Object.assign({},h,{styles:b});if(r(v),v.styles)for(var w in v.styles)for(var x in v.styles[w])r(v.styles[w][x]);e.Object._fromObject("IText",v,y,"text")}}(),function(){var r=e.util.object.clone;e.util.object.extend(e.IText.prototype,{initBehavior:function(){this.initAddedHandler(),this.initRemovedHandler(),this.initCursorSelectionHandlers(),this.initDoubleClickSimulation(),this.mouseMoveHandler=this.mouseMoveHandler.bind(this)},onDeselect:function(){this.isEditing&&this.exitEditing(),this.selected=!1},initAddedHandler:function(){var h=this;this.on("added",function(){var y=h.canvas;y&&(y._hasITextHandlers||(y._hasITextHandlers=!0,h._initCanvasHandlers(y)),y._iTextInstances=y._iTextInstances||[],y._iTextInstances.push(h))})},initRemovedHandler:function(){var h=this;this.on("removed",function(){var y=h.canvas;y&&(y._iTextInstances=y._iTextInstances||[],e.util.removeFromArray(y._iTextInstances,h),y._iTextInstances.length===0&&(y._hasITextHandlers=!1,h._removeCanvasHandlers(y)))})},_initCanvasHandlers:function(h){h._mouseUpITextHandler=function(){h._iTextInstances&&h._iTextInstances.forEach(function(y){y.__isMousedown=!1})},h.on("mouse:up",h._mouseUpITextHandler)},_removeCanvasHandlers:function(h){h.off("mouse:up",h._mouseUpITextHandler)},_tick:function(){this._currentTickState=this._animateCursor(this,1,this.cursorDuration,"_onTickComplete")},_animateCursor:function(h,y,b,v){var w;return w={isAborted:!1,abort:function(){this.isAborted=!0}},h.animate("_currentCursorOpacity",y,{duration:b,onComplete:function(){w.isAborted||h[v]()},onChange:function(){h.canvas&&h.selectionStart===h.selectionEnd&&h.renderCursorOrSelection()},abort:function(){return w.isAborted}}),w},_onTickComplete:function(){var h=this;this._cursorTimeout1&&clearTimeout(this._cursorTimeout1),this._cursorTimeout1=setTimeout(function(){h._currentTickCompleteState=h._animateCursor(h,0,this.cursorDuration/2,"_tick")},100)},initDelayedCursor:function(h){var y=this,b=h?0:this.cursorDelay;this.abortCursorAnimation(),this._currentCursorOpacity=1,this._cursorTimeout2=setTimeout(function(){y._tick()},b)},abortCursorAnimation:function(){var h=this._currentTickState||this._currentTickCompleteState,y=this.canvas;this._currentTickState&&this._currentTickState.abort(),this._currentTickCompleteState&&this._currentTickCompleteState.abort(),clearTimeout(this._cursorTimeout1),clearTimeout(this._cursorTimeout2),this._currentCursorOpacity=0,h&&y&&y.clearContext(y.contextTop||y.contextContainer)},selectAll:function(){return this.selectionStart=0,this.selectionEnd=this._text.length,this._fireSelectionChanged(),this._updateTextarea(),this},getSelectedText:function(){return this._text.slice(this.selectionStart,this.selectionEnd).join("")},findWordBoundaryLeft:function(h){var y=0,b=h-1;if(this._reSpace.test(this._text[b]))for(;this._reSpace.test(this._text[b]);)y++,b--;for(;/\S/.test(this._text[b])&&b>-1;)y++,b--;return h-y},findWordBoundaryRight:function(h){var y=0,b=h;if(this._reSpace.test(this._text[b]))for(;this._reSpace.test(this._text[b]);)y++,b++;for(;/\S/.test(this._text[b])&&b<this._text.length;)y++,b++;return h+y},findLineBoundaryLeft:function(h){for(var y=0,b=h-1;!/\n/.test(this._text[b])&&b>-1;)y++,b--;return h-y},findLineBoundaryRight:function(h){for(var y=0,b=h;!/\n/.test(this._text[b])&&b<this._text.length;)y++,b++;return h+y},searchWordBoundary:function(h,y){for(var b=this._text,v=this._reSpace.test(b[h])?h-1:h,w=b[v],x=e.reNonWord;!x.test(w)&&v>0&&v<b.length;)v+=y,w=b[v];return x.test(w)&&(v+=y===1?0:1),v},selectWord:function(h){h=h||this.selectionStart;var y=this.searchWordBoundary(h,-1),b=this.searchWordBoundary(h,1);this.selectionStart=y,this.selectionEnd=b,this._fireSelectionChanged(),this._updateTextarea(),this.renderCursorOrSelection()},selectLine:function(h){h=h||this.selectionStart;var y=this.findLineBoundaryLeft(h),b=this.findLineBoundaryRight(h);return this.selectionStart=y,this.selectionEnd=b,this._fireSelectionChanged(),this._updateTextarea(),this},enterEditing:function(h){if(!(this.isEditing||!this.editable))return this.canvas&&(this.canvas.calcOffset(),this.exitEditingOnOthers(this.canvas)),this.isEditing=!0,this.initHiddenTextarea(h),this.hiddenTextarea.focus(),this.hiddenTextarea.value=this.text,this._updateTextarea(),this._saveEditingProps(),this._setEditingProps(),this._textBeforeEdit=this.text,this._tick(),this.fire("editing:entered"),this._fireSelectionChanged(),this.canvas?(this.canvas.fire("text:editing:entered",{target:this}),this.initMouseMoveHandler(),this.canvas.requestRenderAll(),this):this},exitEditingOnOthers:function(h){h._iTextInstances&&h._iTextInstances.forEach(function(y){y.selected=!1,y.isEditing&&y.exitEditing()})},initMouseMoveHandler:function(){this.canvas.on("mouse:move",this.mouseMoveHandler)},mouseMoveHandler:function(h){if(!(!this.__isMousedown||!this.isEditing)){document.activeElement!==this.hiddenTextarea&&this.hiddenTextarea.focus();var y=this.getSelectionStartFromPointer(h.e),b=this.selectionStart,v=this.selectionEnd;(y!==this.__selectionStartOnMouseDown||b===v)&&(b===y||v===y)||(y>this.__selectionStartOnMouseDown?(this.selectionStart=this.__selectionStartOnMouseDown,this.selectionEnd=y):(this.selectionStart=y,this.selectionEnd=this.__selectionStartOnMouseDown),(this.selectionStart!==b||this.selectionEnd!==v)&&(this.restartCursorIfNeeded(),this._fireSelectionChanged(),this._updateTextarea(),this.renderCursorOrSelection()))}},_setEditingProps:function(){this.hoverCursor="text",this.canvas&&(this.canvas.defaultCursor=this.canvas.moveCursor="text"),this.borderColor=this.editingBorderColor,this.hasControls=this.selectable=!1,this.lockMovementX=this.lockMovementY=!0},fromStringToGraphemeSelection:function(h,y,b){var v=b.slice(0,h),w=e.util.string.graphemeSplit(v).length;if(h===y)return{selectionStart:w,selectionEnd:w};var x=b.slice(h,y),C=e.util.string.graphemeSplit(x).length;return{selectionStart:w,selectionEnd:w+C}},fromGraphemeToStringSelection:function(h,y,b){var v=b.slice(0,h),w=v.join("").length;if(h===y)return{selectionStart:w,selectionEnd:w};var x=b.slice(h,y),C=x.join("").length;return{selectionStart:w,selectionEnd:w+C}},_updateTextarea:function(){if(this.cursorOffsetCache={},!!this.hiddenTextarea){if(!this.inCompositionMode){var h=this.fromGraphemeToStringSelection(this.selectionStart,this.selectionEnd,this._text);this.hiddenTextarea.selectionStart=h.selectionStart,this.hiddenTextarea.selectionEnd=h.selectionEnd}this.updateTextareaPosition()}},updateFromTextArea:function(){if(!!this.hiddenTextarea){this.cursorOffsetCache={},this.text=this.hiddenTextarea.value,this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords());var h=this.fromStringToGraphemeSelection(this.hiddenTextarea.selectionStart,this.hiddenTextarea.selectionEnd,this.hiddenTextarea.value);this.selectionEnd=this.selectionStart=h.selectionEnd,this.inCompositionMode||(this.selectionStart=h.selectionStart),this.updateTextareaPosition()}},updateTextareaPosition:function(){if(this.selectionStart===this.selectionEnd){var h=this._calcTextareaPosition();this.hiddenTextarea.style.left=h.left,this.hiddenTextarea.style.top=h.top}},_calcTextareaPosition:function(){if(!this.canvas)return{x:1,y:1};var h=this.inCompositionMode?this.compositionStart:this.selectionStart,y=this._getCursorBoundaries(h),b=this.get2DCursorLocation(h),v=b.lineIndex,w=b.charIndex,x=this.getValueOfPropertyAt(v,w,"fontSize")*this.lineHeight,C=y.leftOffset,T=this.calcTransformMatrix(),S={x:y.left+C,y:y.top+y.topOffset+x},M=this.canvas.getRetinaScaling(),O=this.canvas.upperCanvasEl,V=O.width/M,X=O.height/M,Z=V-x,ee=X-x,J=O.clientWidth/V,ie=O.clientHeight/X;return S=e.util.transformPoint(S,T),S=e.util.transformPoint(S,this.canvas.viewportTransform),S.x*=J,S.y*=ie,S.x<0&&(S.x=0),S.x>Z&&(S.x=Z),S.y<0&&(S.y=0),S.y>ee&&(S.y=ee),S.x+=this.canvas._offset.left,S.y+=this.canvas._offset.top,{left:S.x+"px",top:S.y+"px",fontSize:x+"px",charHeight:x}},_saveEditingProps:function(){this._savedProps={hasControls:this.hasControls,borderColor:this.borderColor,lockMovementX:this.lockMovementX,lockMovementY:this.lockMovementY,hoverCursor:this.hoverCursor,selectable:this.selectable,defaultCursor:this.canvas&&this.canvas.defaultCursor,moveCursor:this.canvas&&this.canvas.moveCursor}},_restoreEditingProps:function(){!this._savedProps||(this.hoverCursor=this._savedProps.hoverCursor,this.hasControls=this._savedProps.hasControls,this.borderColor=this._savedProps.borderColor,this.selectable=this._savedProps.selectable,this.lockMovementX=this._savedProps.lockMovementX,this.lockMovementY=this._savedProps.lockMovementY,this.canvas&&(this.canvas.defaultCursor=this._savedProps.defaultCursor,this.canvas.moveCursor=this._savedProps.moveCursor))},exitEditing:function(){var h=this._textBeforeEdit!==this.text,y=this.hiddenTextarea;return this.selected=!1,this.isEditing=!1,this.selectionEnd=this.selectionStart,y&&(y.blur&&y.blur(),y.parentNode&&y.parentNode.removeChild(y)),this.hiddenTextarea=null,this.abortCursorAnimation(),this._restoreEditingProps(),this._currentCursorOpacity=0,this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords()),this.fire("editing:exited"),h&&this.fire("modified"),this.canvas&&(this.canvas.off("mouse:move",this.mouseMoveHandler),this.canvas.fire("text:editing:exited",{target:this}),h&&this.canvas.fire("object:modified",{target:this})),this},_removeExtraneousStyles:function(){for(var h in this.styles)this._textLines[h]||delete this.styles[h]},removeStyleFromTo:function(h,y){var b=this.get2DCursorLocation(h,!0),v=this.get2DCursorLocation(y,!0),w=b.lineIndex,x=b.charIndex,C=v.lineIndex,T=v.charIndex,S,M;if(w!==C){if(this.styles[w])for(S=x;S<this._unwrappedTextLines[w].length;S++)delete this.styles[w][S];if(this.styles[C])for(S=T;S<this._unwrappedTextLines[C].length;S++)M=this.styles[C][S],M&&(this.styles[w]||(this.styles[w]={}),this.styles[w][x+S-T]=M);for(S=w+1;S<=C;S++)delete this.styles[S];this.shiftLineStyles(C,w-C)}else if(this.styles[w]){M=this.styles[w];var O=T-x,V,X;for(S=x;S<T;S++)delete M[S];for(X in this.styles[w])V=parseInt(X,10),V>=T&&(M[V-O]=M[X],delete M[X])}},shiftLineStyles:function(h,y){var b=r(this.styles);for(var v in this.styles){var w=parseInt(v,10);w>h&&(this.styles[w+y]=b[w],b[w-y]||delete this.styles[w])}},restartCursorIfNeeded:function(){(!this._currentTickState||this._currentTickState.isAborted||!this._currentTickCompleteState||this._currentTickCompleteState.isAborted)&&this.initDelayedCursor()},insertNewlineStyleObject:function(h,y,b,v){var w,x={},C=!1,T=this._unwrappedTextLines[h].length===y;b||(b=1),this.shiftLineStyles(h,b),this.styles[h]&&(w=this.styles[h][y===0?y:y-1]);for(var S in this.styles[h]){var M=parseInt(S,10);M>=y&&(C=!0,x[M-y]=this.styles[h][S],T&&y===0||delete this.styles[h][S])}var O=!1;for(C&&!T&&(this.styles[h+b]=x,O=!0),O&&b--;b>0;)v&&v[b-1]?this.styles[h+b]={0:r(v[b-1])}:w?this.styles[h+b]={0:r(w)}:delete this.styles[h+b],b--;this._forceClearCache=!0},insertCharStyleObject:function(h,y,b,v){this.styles||(this.styles={});var w=this.styles[h],x=w?r(w):{};b||(b=1);for(var C in x){var T=parseInt(C,10);T>=y&&(w[T+b]=x[T],x[T-b]||delete w[T])}if(this._forceClearCache=!0,v){for(;b--;)!Object.keys(v[b]).length||(this.styles[h]||(this.styles[h]={}),this.styles[h][y+b]=r(v[b]));return}if(!!w)for(var S=w[y?y-1:1];S&&b--;)this.styles[h][y+b]=r(S)},insertNewStyleBlock:function(h,y,b){for(var v=this.get2DCursorLocation(y,!0),w=[0],x=0,C=0;C<h.length;C++)h[C]===`
`?(x++,w[x]=0):w[x]++;w[0]>0&&(this.insertCharStyleObject(v.lineIndex,v.charIndex,w[0],b),b=b&&b.slice(w[0]+1)),x&&this.insertNewlineStyleObject(v.lineIndex,v.charIndex+w[0],x);for(var C=1;C<x;C++)w[C]>0?this.insertCharStyleObject(v.lineIndex+C,0,w[C],b):b&&this.styles[v.lineIndex+C]&&b[0]&&(this.styles[v.lineIndex+C][0]=b[0]),b=b&&b.slice(w[C]+1);w[C]>0&&this.insertCharStyleObject(v.lineIndex+C,0,w[C],b)},setSelectionStartEndWithShift:function(h,y,b){b<=h?(y===h?this._selectionDirection="left":this._selectionDirection==="right"&&(this._selectionDirection="left",this.selectionEnd=h),this.selectionStart=b):b>h&&b<y?this._selectionDirection==="right"?this.selectionEnd=b:this.selectionStart=b:(y===h?this._selectionDirection="right":this._selectionDirection==="left"&&(this._selectionDirection="right",this.selectionStart=y),this.selectionEnd=b)},setSelectionInBoundaries:function(){var h=this.text.length;this.selectionStart>h?this.selectionStart=h:this.selectionStart<0&&(this.selectionStart=0),this.selectionEnd>h?this.selectionEnd=h:this.selectionEnd<0&&(this.selectionEnd=0)}})}(),e.util.object.extend(e.IText.prototype,{initDoubleClickSimulation:function(){this.__lastClickTime=+new Date,this.__lastLastClickTime=+new Date,this.__lastPointer={},this.on("mousedown",this.onMouseDown)},onMouseDown:function(r){if(!!this.canvas){this.__newClickTime=+new Date;var h=r.pointer;this.isTripleClick(h)&&(this.fire("tripleclick",r),this._stopEvent(r.e)),this.__lastLastClickTime=this.__lastClickTime,this.__lastClickTime=this.__newClickTime,this.__lastPointer=h,this.__lastIsEditing=this.isEditing,this.__lastSelected=this.selected}},isTripleClick:function(r){return this.__newClickTime-this.__lastClickTime<500&&this.__lastClickTime-this.__lastLastClickTime<500&&this.__lastPointer.x===r.x&&this.__lastPointer.y===r.y},_stopEvent:function(r){r.preventDefault&&r.preventDefault(),r.stopPropagation&&r.stopPropagation()},initCursorSelectionHandlers:function(){this.initMousedownHandler(),this.initMouseupHandler(),this.initClicks()},doubleClickHandler:function(r){!this.isEditing||this.selectWord(this.getSelectionStartFromPointer(r.e))},tripleClickHandler:function(r){!this.isEditing||this.selectLine(this.getSelectionStartFromPointer(r.e))},initClicks:function(){this.on("mousedblclick",this.doubleClickHandler),this.on("tripleclick",this.tripleClickHandler)},_mouseDownHandler:function(r){!this.canvas||!this.editable||r.e.button&&r.e.button!==1||(this.__isMousedown=!0,this.selected&&(this.inCompositionMode=!1,this.setCursorByClick(r.e)),this.isEditing&&(this.__selectionStartOnMouseDown=this.selectionStart,this.selectionStart===this.selectionEnd&&this.abortCursorAnimation(),this.renderCursorOrSelection()))},_mouseDownHandlerBefore:function(r){!this.canvas||!this.editable||r.e.button&&r.e.button!==1||(this.selected=this===this.canvas._activeObject)},initMousedownHandler:function(){this.on("mousedown",this._mouseDownHandler),this.on("mousedown:before",this._mouseDownHandlerBefore)},initMouseupHandler:function(){this.on("mouseup",this.mouseUpHandler)},mouseUpHandler:function(r){if(this.__isMousedown=!1,!(!this.editable||this.group||r.transform&&r.transform.actionPerformed||r.e.button&&r.e.button!==1)){if(this.canvas){var h=this.canvas._activeObject;if(h&&h!==this)return}this.__lastSelected&&!this.__corner?(this.selected=!1,this.__lastSelected=!1,this.enterEditing(r.e),this.selectionStart===this.selectionEnd?this.initDelayedCursor(!0):this.renderCursorOrSelection()):this.selected=!0}},setCursorByClick:function(r){var h=this.getSelectionStartFromPointer(r),y=this.selectionStart,b=this.selectionEnd;r.shiftKey?this.setSelectionStartEndWithShift(y,b,h):(this.selectionStart=h,this.selectionEnd=h),this.isEditing&&(this._fireSelectionChanged(),this._updateTextarea())},getSelectionStartFromPointer:function(r){for(var h=this.getLocalPointer(r),y=0,b=0,v=0,w=0,x=0,C,T,S=0,M=this._textLines.length;S<M&&v<=h.y;S++)v+=this.getHeightOfLine(S)*this.scaleY,x=S,S>0&&(w+=this._textLines[S-1].length+this.missingNewlineOffset(S-1));C=this._getLineLeftOffset(x),b=C*this.scaleX,T=this._textLines[x],this.direction==="rtl"&&(h.x=this.width*this.scaleX-h.x+b);for(var O=0,V=T.length;O<V&&(y=b,b+=this.__charBounds[x][O].kernedWidth*this.scaleX,b<=h.x);O++)w++;return this._getNewSelectionStartFromOffset(h,y,b,w,V)},_getNewSelectionStartFromOffset:function(r,h,y,b,v){var w=r.x-h,x=y-r.x,C=x>w||x<0?0:1,T=b+C;return this.flipX&&(T=v-T),T>this._text.length&&(T=this._text.length),T}}),e.util.object.extend(e.IText.prototype,{initHiddenTextarea:function(){this.hiddenTextarea=e.document.createElement("textarea"),this.hiddenTextarea.setAttribute("autocapitalize","off"),this.hiddenTextarea.setAttribute("autocorrect","off"),this.hiddenTextarea.setAttribute("autocomplete","off"),this.hiddenTextarea.setAttribute("spellcheck","false"),this.hiddenTextarea.setAttribute("data-fabric-hiddentextarea",""),this.hiddenTextarea.setAttribute("wrap","off");var r=this._calcTextareaPosition();this.hiddenTextarea.style.cssText="position: absolute; top: "+r.top+"; left: "+r.left+"; z-index: -999; opacity: 0; width: 1px; height: 1px; font-size: 1px; padding\uFF70top: "+r.fontSize+";",this.hiddenTextareaContainer?this.hiddenTextareaContainer.appendChild(this.hiddenTextarea):e.document.body.appendChild(this.hiddenTextarea),e.util.addListener(this.hiddenTextarea,"keydown",this.onKeyDown.bind(this)),e.util.addListener(this.hiddenTextarea,"keyup",this.onKeyUp.bind(this)),e.util.addListener(this.hiddenTextarea,"input",this.onInput.bind(this)),e.util.addListener(this.hiddenTextarea,"copy",this.copy.bind(this)),e.util.addListener(this.hiddenTextarea,"cut",this.copy.bind(this)),e.util.addListener(this.hiddenTextarea,"paste",this.paste.bind(this)),e.util.addListener(this.hiddenTextarea,"compositionstart",this.onCompositionStart.bind(this)),e.util.addListener(this.hiddenTextarea,"compositionupdate",this.onCompositionUpdate.bind(this)),e.util.addListener(this.hiddenTextarea,"compositionend",this.onCompositionEnd.bind(this)),!this._clickHandlerInitialized&&this.canvas&&(e.util.addListener(this.canvas.upperCanvasEl,"click",this.onClick.bind(this)),this._clickHandlerInitialized=!0)},keysMap:{9:"exitEditing",27:"exitEditing",33:"moveCursorUp",34:"moveCursorDown",35:"moveCursorRight",36:"moveCursorLeft",37:"moveCursorLeft",38:"moveCursorUp",39:"moveCursorRight",40:"moveCursorDown"},keysMapRtl:{9:"exitEditing",27:"exitEditing",33:"moveCursorUp",34:"moveCursorDown",35:"moveCursorLeft",36:"moveCursorRight",37:"moveCursorRight",38:"moveCursorUp",39:"moveCursorLeft",40:"moveCursorDown"},ctrlKeysMapUp:{67:"copy",88:"cut"},ctrlKeysMapDown:{65:"selectAll"},onClick:function(){this.hiddenTextarea&&this.hiddenTextarea.focus()},onKeyDown:function(r){if(!!this.isEditing){var h=this.direction==="rtl"?this.keysMapRtl:this.keysMap;if(r.keyCode in h)this[h[r.keyCode]](r);else if(r.keyCode in this.ctrlKeysMapDown&&(r.ctrlKey||r.metaKey))this[this.ctrlKeysMapDown[r.keyCode]](r);else return;r.stopImmediatePropagation(),r.preventDefault(),r.keyCode>=33&&r.keyCode<=40?(this.inCompositionMode=!1,this.clearContextTop(),this.renderCursorOrSelection()):this.canvas&&this.canvas.requestRenderAll()}},onKeyUp:function(r){if(!this.isEditing||this._copyDone||this.inCompositionMode){this._copyDone=!1;return}if(r.keyCode in this.ctrlKeysMapUp&&(r.ctrlKey||r.metaKey))this[this.ctrlKeysMapUp[r.keyCode]](r);else return;r.stopImmediatePropagation(),r.preventDefault(),this.canvas&&this.canvas.requestRenderAll()},onInput:function(r){var h=this.fromPaste;if(this.fromPaste=!1,r&&r.stopPropagation(),!!this.isEditing){var y=this._splitTextIntoLines(this.hiddenTextarea.value).graphemeText,b=this._text.length,v=y.length,w,x,C=v-b,T=this.selectionStart,S=this.selectionEnd,M=T!==S,O,V,X;if(this.hiddenTextarea.value===""){this.styles={},this.updateFromTextArea(),this.fire("changed"),this.canvas&&(this.canvas.fire("text:changed",{target:this}),this.canvas.requestRenderAll());return}var Z=this.fromStringToGraphemeSelection(this.hiddenTextarea.selectionStart,this.hiddenTextarea.selectionEnd,this.hiddenTextarea.value),ee=T>Z.selectionStart;M?(w=this._text.slice(T,S),C+=S-T):v<b&&(ee?w=this._text.slice(S+C,S):w=this._text.slice(T,T-C)),x=y.slice(Z.selectionEnd-C,Z.selectionEnd),w&&w.length&&(x.length&&(O=this.getSelectionStyles(T,T+1,!1),O=x.map(function(){return O[0]})),M?(V=T,X=S):ee?(V=S-w.length,X=S):(V=S,X=S+w.length),this.removeStyleFromTo(V,X)),x.length&&(h&&x.join("")===e.copiedText&&!e.disableStyleCopyPaste&&(O=e.copiedTextStyle),this.insertNewStyleBlock(x,T,O)),this.updateFromTextArea(),this.fire("changed"),this.canvas&&(this.canvas.fire("text:changed",{target:this}),this.canvas.requestRenderAll())}},onCompositionStart:function(){this.inCompositionMode=!0},onCompositionEnd:function(){this.inCompositionMode=!1},onCompositionUpdate:function(r){this.compositionStart=r.target.selectionStart,this.compositionEnd=r.target.selectionEnd,this.updateTextareaPosition()},copy:function(){this.selectionStart!==this.selectionEnd&&(e.copiedText=this.getSelectedText(),e.disableStyleCopyPaste?e.copiedTextStyle=null:e.copiedTextStyle=this.getSelectionStyles(this.selectionStart,this.selectionEnd,!0),this._copyDone=!0)},paste:function(){this.fromPaste=!0},_getClipboardData:function(r){return r&&r.clipboardData||e.window.clipboardData},_getWidthBeforeCursor:function(r,h){var y=this._getLineLeftOffset(r),b;return h>0&&(b=this.__charBounds[r][h-1],y+=b.left+b.width),y},getDownCursorOffset:function(r,h){var y=this._getSelectionForOffset(r,h),b=this.get2DCursorLocation(y),v=b.lineIndex;if(v===this._textLines.length-1||r.metaKey||r.keyCode===34)return this._text.length-y;var w=b.charIndex,x=this._getWidthBeforeCursor(v,w),C=this._getIndexOnLine(v+1,x),T=this._textLines[v].slice(w);return T.length+C+1+this.missingNewlineOffset(v)},_getSelectionForOffset:function(r,h){return r.shiftKey&&this.selectionStart!==this.selectionEnd&&h?this.selectionEnd:this.selectionStart},getUpCursorOffset:function(r,h){var y=this._getSelectionForOffset(r,h),b=this.get2DCursorLocation(y),v=b.lineIndex;if(v===0||r.metaKey||r.keyCode===33)return-y;var w=b.charIndex,x=this._getWidthBeforeCursor(v,w),C=this._getIndexOnLine(v-1,x),T=this._textLines[v].slice(0,w),S=this.missingNewlineOffset(v-1);return-this._textLines[v-1].length+C-T.length+(1-S)},_getIndexOnLine:function(r,h){for(var y=this._textLines[r],b=this._getLineLeftOffset(r),v=b,w=0,x,C,T=0,S=y.length;T<S;T++)if(x=this.__charBounds[r][T].width,v+=x,v>h){C=!0;var M=v-x,O=v,V=Math.abs(M-h),X=Math.abs(O-h);w=X<V?T:T-1;break}return C||(w=y.length-1),w},moveCursorDown:function(r){this.selectionStart>=this._text.length&&this.selectionEnd>=this._text.length||this._moveCursorUpOrDown("Down",r)},moveCursorUp:function(r){this.selectionStart===0&&this.selectionEnd===0||this._moveCursorUpOrDown("Up",r)},_moveCursorUpOrDown:function(r,h){var y="get"+r+"CursorOffset",b=this[y](h,this._selectionDirection==="right");h.shiftKey?this.moveCursorWithShift(b):this.moveCursorWithoutShift(b),b!==0&&(this.setSelectionInBoundaries(),this.abortCursorAnimation(),this._currentCursorOpacity=1,this.initDelayedCursor(),this._fireSelectionChanged(),this._updateTextarea())},moveCursorWithShift:function(r){var h=this._selectionDirection==="left"?this.selectionStart+r:this.selectionEnd+r;return this.setSelectionStartEndWithShift(this.selectionStart,this.selectionEnd,h),r!==0},moveCursorWithoutShift:function(r){return r<0?(this.selectionStart+=r,this.selectionEnd=this.selectionStart):(this.selectionEnd+=r,this.selectionStart=this.selectionEnd),r!==0},moveCursorLeft:function(r){this.selectionStart===0&&this.selectionEnd===0||this._moveCursorLeftOrRight("Left",r)},_move:function(r,h,y){var b;if(r.altKey)b=this["findWordBoundary"+y](this[h]);else if(r.metaKey||r.keyCode===35||r.keyCode===36)b=this["findLineBoundary"+y](this[h]);else return this[h]+=y==="Left"?-1:1,!0;if(typeof b<"u"&&this[h]!==b)return this[h]=b,!0},_moveLeft:function(r,h){return this._move(r,h,"Left")},_moveRight:function(r,h){return this._move(r,h,"Right")},moveCursorLeftWithoutShift:function(r){var h=!0;return this._selectionDirection="left",this.selectionEnd===this.selectionStart&&this.selectionStart!==0&&(h=this._moveLeft(r,"selectionStart")),this.selectionEnd=this.selectionStart,h},moveCursorLeftWithShift:function(r){if(this._selectionDirection==="right"&&this.selectionStart!==this.selectionEnd)return this._moveLeft(r,"selectionEnd");if(this.selectionStart!==0)return this._selectionDirection="left",this._moveLeft(r,"selectionStart")},moveCursorRight:function(r){this.selectionStart>=this._text.length&&this.selectionEnd>=this._text.length||this._moveCursorLeftOrRight("Right",r)},_moveCursorLeftOrRight:function(r,h){var y="moveCursor"+r+"With";this._currentCursorOpacity=1,h.shiftKey?y+="Shift":y+="outShift",this[y](h)&&(this.abortCursorAnimation(),this.initDelayedCursor(),this._fireSelectionChanged(),this._updateTextarea())},moveCursorRightWithShift:function(r){if(this._selectionDirection==="left"&&this.selectionStart!==this.selectionEnd)return this._moveRight(r,"selectionStart");if(this.selectionEnd!==this._text.length)return this._selectionDirection="right",this._moveRight(r,"selectionEnd")},moveCursorRightWithoutShift:function(r){var h=!0;return this._selectionDirection="right",this.selectionStart===this.selectionEnd?(h=this._moveRight(r,"selectionStart"),this.selectionEnd=this.selectionStart):this.selectionStart=this.selectionEnd,h},removeChars:function(r,h){typeof h>"u"&&(h=r+1),this.removeStyleFromTo(r,h),this._text.splice(r,h-r),this.text=this._text.join(""),this.set("dirty",!0),this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords()),this._removeExtraneousStyles()},insertChars:function(r,h,y,b){typeof b>"u"&&(b=y),b>y&&this.removeStyleFromTo(y,b);var v=e.util.string.graphemeSplit(r);this.insertNewStyleBlock(v,y,h),this._text=[].concat(this._text.slice(0,y),v,this._text.slice(b)),this.text=this._text.join(""),this.set("dirty",!0),this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords()),this._removeExtraneousStyles()}}),function(){var r=e.util.toFixed,h=/  +/g;e.util.object.extend(e.Text.prototype,{_toSVG:function(){var y=this._getSVGLeftTopOffsets(),b=this._getSVGTextAndBg(y.textTop,y.textLeft);return this._wrapSVGTextAndBg(b)},toSVG:function(y){return this._createBaseSVGMarkup(this._toSVG(),{reviver:y,noStyle:!0,withShadow:!0})},_getSVGLeftTopOffsets:function(){return{textLeft:-this.width/2,textTop:-this.height/2,lineTop:this.getHeightOfLine(0)}},_wrapSVGTextAndBg:function(y){var b=!0,v=this.getSvgTextDecoration(this);return[y.textBgRects.join(""),'		<text xml:space="preserve" ',this.fontFamily?'font-family="'+this.fontFamily.replace(/"/g,"'")+'" ':"",this.fontSize?'font-size="'+this.fontSize+'" ':"",this.fontStyle?'font-style="'+this.fontStyle+'" ':"",this.fontWeight?'font-weight="'+this.fontWeight+'" ':"",v?'text-decoration="'+v+'" ':"",'style="',this.getSvgStyles(b),'"',this.addPaintOrder()," >",y.textSpans.join(""),`</text>
`]},_getSVGTextAndBg:function(y,b){var v=[],w=[],x=y,C;this._setSVGBg(w);for(var T=0,S=this._textLines.length;T<S;T++)C=this._getLineLeftOffset(T),(this.textBackgroundColor||this.styleHas("textBackgroundColor",T))&&this._setSVGTextLineBg(w,T,b+C,x),this._setSVGTextLineText(v,T,b+C,x),x+=this.getHeightOfLine(T);return{textSpans:v,textBgRects:w}},_createTextCharSpan:function(y,b,v,w){var x=y!==y.trim()||y.match(h),C=this.getSvgSpanStyles(b,x),T=C?'style="'+C+'"':"",S=b.deltaY,M="",O=e.Object.NUM_FRACTION_DIGITS;return S&&(M=' dy="'+r(S,O)+'" '),['<tspan x="',r(v,O),'" y="',r(w,O),'" ',M,T,">",e.util.string.escapeXml(y),"</tspan>"].join("")},_setSVGTextLineText:function(y,b,v,w){var x=this.getHeightOfLine(b),C=this.textAlign.indexOf("justify")!==-1,T,S,M="",O,V,X=0,Z=this._textLines[b],ee;w+=x*(1-this._fontSizeFraction)/this.lineHeight;for(var J=0,ie=Z.length-1;J<=ie;J++)ee=J===ie||this.charSpacing,M+=Z[J],O=this.__charBounds[b][J],X===0?(v+=O.kernedWidth-O.width,X+=O.width):X+=O.kernedWidth,C&&!ee&&this._reSpaceAndTab.test(Z[J])&&(ee=!0),ee||(T=T||this.getCompleteStyleDeclaration(b,J),S=this.getCompleteStyleDeclaration(b,J+1),ee=e.util.hasStyleChanged(T,S,!0)),ee&&(V=this._getStyleDeclaration(b,J)||{},y.push(this._createTextCharSpan(M,V,v,w)),M="",T=S,v+=X,X=0)},_pushTextBgRect:function(y,b,v,w,x,C){var T=e.Object.NUM_FRACTION_DIGITS;y.push("		<rect ",this._getFillAttributes(b),' x="',r(v,T),'" y="',r(w,T),'" width="',r(x,T),'" height="',r(C,T),`"></rect>
`)},_setSVGTextLineBg:function(y,b,v,w){for(var x=this._textLines[b],C=this.getHeightOfLine(b)/this.lineHeight,T=0,S=0,M,O,V=this.getValueOfPropertyAt(b,0,"textBackgroundColor"),X=0,Z=x.length;X<Z;X++)M=this.__charBounds[b][X],O=this.getValueOfPropertyAt(b,X,"textBackgroundColor"),O!==V?(V&&this._pushTextBgRect(y,V,v+S,w,T,C),S=M.left,T=M.width,V=O):T+=M.kernedWidth;O&&this._pushTextBgRect(y,O,v+S,w,T,C)},_getFillAttributes:function(y){var b=y&&typeof y=="string"?new e.Color(y):"";return!b||!b.getSource()||b.getAlpha()===1?'fill="'+y+'"':'opacity="'+b.getAlpha()+'" fill="'+b.setAlpha(1).toRgb()+'"'},_getSVGLineTopOffset:function(y){for(var b=0,v=0,w=0;w<y;w++)b+=this.getHeightOfLine(w);return v=this.getHeightOfLine(w),{lineTop:b,offset:(this._fontSizeMult-this._fontSizeFraction)*v/(this.lineHeight*this._fontSizeMult)}},getSvgStyles:function(y){var b=e.Object.prototype.getSvgStyles.call(this,y);return b+" white-space: pre;"}})}(),function(r){var h=r.fabric||(r.fabric={});h.Textbox=h.util.createClass(h.IText,h.Observable,{type:"textbox",minWidth:20,dynamicMinWidth:2,__cachedLines:null,lockScalingFlip:!0,noScaleCache:!1,_dimensionAffectingProps:h.Text.prototype._dimensionAffectingProps.concat("width"),_wordJoiners:/[ \t\r]/,splitByGrapheme:!1,initDimensions:function(){this.__skipDimension||(this.isEditing&&this.initDelayedCursor(),this.clearContextTop(),this._clearCache(),this.dynamicMinWidth=0,this._styleMap=this._generateStyleMap(this._splitText()),this.dynamicMinWidth>this.width&&this._set("width",this.dynamicMinWidth),this.textAlign.indexOf("justify")!==-1&&this.enlargeSpaces(),this.height=this.calcTextHeight(),this.saveState({propertySet:"_dimensionAffectingProps"}))},_generateStyleMap:function(y){for(var b=0,v=0,w=0,x={},C=0;C<y.graphemeLines.length;C++)y.graphemeText[w]===`
`&&C>0?(v=0,w++,b++):!this.splitByGrapheme&&this._reSpaceAndTab.test(y.graphemeText[w])&&C>0&&(v++,w++),x[C]={line:b,offset:v},w+=y.graphemeLines[C].length,v+=y.graphemeLines[C].length;return x},styleHas:function(y,b){if(this._styleMap&&!this.isWrapping){var v=this._styleMap[b];v&&(b=v.line)}return h.Text.prototype.styleHas.call(this,y,b)},isEmptyStyles:function(y){if(!this.styles)return!0;var b=0,v=y+1,w,x,C=!1,T=this._styleMap[y],S=this._styleMap[y+1];T&&(y=T.line,b=T.offset),S&&(v=S.line,C=v===y,w=S.offset),x=typeof y>"u"?this.styles:{line:this.styles[y]};for(var M in x)for(var O in x[M])if(O>=b&&(!C||O<w))for(var V in x[M][O])return!1;return!0},_getStyleDeclaration:function(y,b){if(this._styleMap&&!this.isWrapping){var v=this._styleMap[y];if(!v)return null;y=v.line,b=v.offset+b}return this.callSuper("_getStyleDeclaration",y,b)},_setStyleDeclaration:function(y,b,v){var w=this._styleMap[y];y=w.line,b=w.offset+b,this.styles[y][b]=v},_deleteStyleDeclaration:function(y,b){var v=this._styleMap[y];y=v.line,b=v.offset+b,delete this.styles[y][b]},_getLineStyle:function(y){var b=this._styleMap[y];return!!this.styles[b.line]},_setLineStyle:function(y){var b=this._styleMap[y];this.styles[b.line]={}},_wrapText:function(y,b){var v=[],w;for(this.isWrapping=!0,w=0;w<y.length;w++)v=v.concat(this._wrapLine(y[w],w,b));return this.isWrapping=!1,v},_measureWord:function(y,b,v){var w=0,x,C=!0;v=v||0;for(var T=0,S=y.length;T<S;T++){var M=this._getGraphemeBox(y[T],b,T+v,x,C);w+=M.kernedWidth,x=y[T]}return w},_wrapLine:function(y,b,v,Le){var x=0,C=this.splitByGrapheme,T=[],S=[],M=C?h.util.string.graphemeSplit(y):y.split(this._wordJoiners),O="",V=0,X=C?"":" ",Z=0,ee=0,J=0,ie=!0,ke=this._getWidthOfCharSpacing(),Le=Le||0;M.length===0&&M.push([]),v-=Le;for(var fe=0;fe<M.length;fe++)O=C?M[fe]:h.util.string.graphemeSplit(M[fe]),Z=this._measureWord(O,b,V),V+=O.length,x+=ee+Z-ke,x>v&&!ie?(T.push(S),S=[],x=Z,ie=!0):x+=ke,!ie&&!C&&S.push(X),S=S.concat(O),ee=C?0:this._measureWord([X],b,V),V++,ie=!1,Z>J&&(J=Z);return fe&&T.push(S),J+Le>this.dynamicMinWidth&&(this.dynamicMinWidth=J-ke+Le),T},isEndOfWrapping:function(y){return!this._styleMap[y+1]||this._styleMap[y+1].line!==this._styleMap[y].line},missingNewlineOffset:function(y){return this.splitByGrapheme?this.isEndOfWrapping(y)?1:0:1},_splitTextIntoLines:function(y){for(var b=h.Text.prototype._splitTextIntoLines.call(this,y),v=this._wrapText(b.lines,this.width),w=new Array(v.length),x=0;x<v.length;x++)w[x]=v[x].join("");return b.lines=w,b.graphemeLines=v,b},getMinWidth:function(){return Math.max(this.minWidth,this.dynamicMinWidth)},_removeExtraneousStyles:function(){var y={};for(var b in this._styleMap)this._textLines[b]&&(y[this._styleMap[b].line]=1);for(var b in this.styles)y[b]||delete this.styles[b]},toObject:function(y){return this.callSuper("toObject",["minWidth","splitByGrapheme"].concat(y))}}),h.Textbox.fromObject=function(y,b){var v=h.util.stylesFromArray(y.styles,y.text),w=Object.assign({},y,{styles:v});return h.Object._fromObject("Textbox",w,b,"text")}}(i),function(){var r=e.controlsUtils,h=r.scaleSkewCursorStyleHandler,y=r.scaleCursorStyleHandler,b=r.scalingEqually,v=r.scalingYOrSkewingX,w=r.scalingXOrSkewingY,x=r.scaleOrSkewActionName,C=e.Object.prototype.controls;if(C.ml=new e.Control({x:-.5,y:0,cursorStyleHandler:h,actionHandler:w,getActionName:x}),C.mr=new e.Control({x:.5,y:0,cursorStyleHandler:h,actionHandler:w,getActionName:x}),C.mb=new e.Control({x:0,y:.5,cursorStyleHandler:h,actionHandler:v,getActionName:x}),C.mt=new e.Control({x:0,y:-.5,cursorStyleHandler:h,actionHandler:v,getActionName:x}),C.tl=new e.Control({x:-.5,y:-.5,cursorStyleHandler:y,actionHandler:b}),C.tr=new e.Control({x:.5,y:-.5,cursorStyleHandler:y,actionHandler:b}),C.bl=new e.Control({x:-.5,y:.5,cursorStyleHandler:y,actionHandler:b}),C.br=new e.Control({x:.5,y:.5,cursorStyleHandler:y,actionHandler:b}),C.mtr=new e.Control({x:0,y:-.5,actionHandler:r.rotationWithSnapping,cursorStyleHandler:r.rotationStyleHandler,offsetY:-40,withConnection:!0,actionName:"rotate"}),e.Textbox){var T=e.Textbox.prototype.controls={};T.mtr=C.mtr,T.tr=C.tr,T.br=C.br,T.tl=C.tl,T.bl=C.bl,T.mt=C.mt,T.mb=C.mb,T.mr=new e.Control({x:.5,y:0,actionHandler:r.changeWidth,cursorStyleHandler:h,actionName:"resizing"}),T.ml=new e.Control({x:-.5,y:0,actionHandler:r.changeWidth,cursorStyleHandler:h,actionName:"resizing"})}}()})(G2);const Jc={JPEG:"jpg",PNG:"png",PDF:"pdf",SVG:"svg"},v1={in:"in",mm:"mm"},id={A2:[594,420],A3:[420,297],A4:[297,210],A5:[210,148],A6:[148,105],B2:[707,500],B3:[500,353],B4:[353,250],B5:[250,176],B6:[176,125]},nh={Landscape:"landscape",Portrait:"portrait"},Wd={72:72,96:96,200:200,300:300,400:400};class aA{constructor(){pl(this,"map");pl(this,"width");pl(this,"height");pl(this,"dpi");pl(this,"format");pl(this,"unit")}generate(e,t=id.A4,o=300,l=Jc.PNG.toString(),u=v1.mm){this.map=e,this.width=t[0],this.height=t[1],this.dpi=o,this.format=l,this.unit=u;const m=this,r=window.devicePixelRatio;Object.defineProperty(window,"devicePixelRatio",{get(){return m.dpi/96}});const h=document.createElement("div");h.className="hidden-map",document.body.appendChild(h);const y=document.createElement("div");y.style.width=this.toPixels(this.width),y.style.height=this.toPixels(this.height),h.appendChild(y);const b=this.map.getStyle();if(b&&b.sources){const w=b.sources;Object.keys(w).forEach(x=>{const C=w[x];Object.keys(C).forEach(T=>{C[T]||delete C[T]})})}const v=new Lu.exports.Map({container:y,style:b,center:this.map.getCenter(),zoom:this.map.getZoom(),bearing:this.map.getBearing(),pitch:this.map.getPitch(),interactive:!1,preserveDrawingBuffer:!0,fadeDuration:0,attributionControl:!1,transformRequest:this.map._requestManager._transformRequestFn});v.once("idle",()=>{var C;const w=v.getCanvas(),x=`map.${m.format}`;switch(m.format){case Jc.PNG:m.toPNG(w,x);break;case Jc.JPEG:m.toJPEG(w,x);break;case Jc.PDF:m.toPDF(v,x);break;case Jc.SVG:m.toSVG(w,x);break;default:console.error(`Invalid file format: ${m.format}`);break}v.remove(),(C=h.parentNode)==null||C.removeChild(h),Object.defineProperty(window,"devicePixelRatio",{get(){return r}})})}toPNG(e,t){e.toBlob(o=>{B4.exports.saveAs(o,t)})}toJPEG(e,t){const o=e.toDataURL("image/jpeg",.85),l=document.createElement("a");l.href=o,l.download=t,l.click(),l.remove()}toPDF(e,t){const o=e.getCanvas(),l=new Vr({orientation:this.width>this.height?"l":"p",unit:this.unit,compress:!0});l.addImage(o.toDataURL("image/png"),"png",0,0,this.width,this.height,void 0,"FAST");const{lng:u,lat:m}=e.getCenter();l.setProperties({title:e.getStyle().name,subject:`center: [${u}, ${m}], zoom: ${e.getZoom()}`,creator:"Mapbox GL Export Plugin",author:"(c)Mapbox, (c)OpenStreetMap"}),l.save(t)}toSVG(e,t){const o=e.toDataURL("image/png");G2.fabric.Image.fromURL(o,l=>{const u=new G2.fabric.Canvas("canvas"),m=Number(this.toPixels(this.width,this.dpi).replace("px","")),r=Number(this.toPixels(this.height,this.dpi).replace("px",""));l.scaleToWidth(m),l.scaleToHeight(r),u.add(l);const h=u.toSVG({x:0,y:0,width:m,height:r,viewBox:{x:0,y:0,width:m,height:r}}),y=document.createElement("a");y.href=`data:application/xml,${encodeURIComponent(h)}`,y.download=t,y.click(),y.remove()})}toPixels(e,t=96){return this.unit===v1.mm&&(t/=25.4),`${t*e}px`}toBlob(e){const t=atob(e.replace(/^.*,/,"")),o=new Uint8Array(t.length);for(let u=0;u<t.length;u+=1)o[u]=t.charCodeAt(u);return new Blob([o.buffer],{type:"image/png"})}}const lA=Object.freeze(Object.defineProperty({__proto__:null,Format:Jc,Unit:v1,Size:id,PageOrientation:nh,DPI:Wd,default:aA},Symbol.toStringTag,{value:"Module"})),Mu=Vl(null),Xd=Vl(null),Ad=Vl(null),jm=Vl(null),kd=Vl(null),Sd=Vl("Measure"),W2=Vl([]);function S_(i,e,t){const o=i.slice();return o[15]=e[t],o}function C_(i,e,t){const o=i.slice();return o[15]=e[t],o}function E_(i,e,t){const o=i.slice();return o[15]=e[t],o}function I_(i,e,t){const o=i.slice();return o[15]=e[t],o}function uA(i){let e;return{c(){e=Cn("print")},l(t){e=En(t,"print")},m(t,o){Dt(t,e,o)},d(t){t&&Oe(e)}}}function T_(i){let e,t=i[15]+"",o;return{c(){e=ti("option"),o=Cn(t),this.h()},l(l){e=ii(l,"OPTION",{});var u=si(e);o=En(u,t),u.forEach(Oe),this.h()},h(){e.__value=id[i[15]],e.value=e.__value},m(l,u){Dt(l,e,u),Kt(e,o)},p:is,d(l){l&&Oe(e)}}}function L_(i){let e,t,o,l,u,m,r,h=i[15]+"",y,b,v,w;function x(){return i[9](i[15])}return{c(){e=ti("label"),t=ti("input"),l=Xi(),u=ti("div"),m=ti("i"),r=Xi(),y=Cn(h),b=Xi(),this.h()},l(C){e=ii(C,"LABEL",{class:!0,style:!0});var T=si(e);t=ii(T,"INPUT",{type:!0,name:!0}),l=Yi(T),u=ii(T,"DIV",{class:!0});var S=si(u);m=ii(S,"I",{class:!0}),si(m).forEach(Oe),S.forEach(Oe),r=Yi(T),y=En(T,h),b=Yi(T),T.forEach(Oe),this.h()},h(){oi(t,"type","radio"),oi(t,"name","orientation"),t.checked=o=i[3]===nh[i[15]],oi(m,"class",`fas ${nh[i[15]]===nh.Landscape?"fa-left-right":"fa-up-down"}`),oi(u,"class","icon is-small is-left"),oi(e,"class","radio"),oc(e,"color","black")},m(C,T){Dt(C,e,T),Kt(e,t),Kt(e,l),Kt(e,u),Kt(u,m),Kt(e,r),Kt(e,y),Kt(e,b),v||(w=qn(t,"click",x),v=!0)},p(C,T){i=C,T&8&&o!==(o=i[3]===nh[i[15]])&&(t.checked=o)},d(C){C&&Oe(e),v=!1,w()}}}function P_(i){let e,t=i[15]+"",o;return{c(){e=ti("option"),o=Cn(t),this.h()},l(l){e=ii(l,"OPTION",{});var u=si(e);o=En(u,t),u.forEach(Oe),this.h()},h(){e.__value=Jc[i[15]],e.value=e.__value},m(l,u){Dt(l,e,u),Kt(e,o)},p:is,d(l){l&&Oe(e)}}}function M_(i){let e,t=i[15]+"",o;return{c(){e=ti("option"),o=Cn(t),this.h()},l(l){e=ii(l,"OPTION",{});var u=si(e);o=En(u,t),u.forEach(Oe),this.h()},h(){e.__value=Wd[i[15]],e.value=e.__value},m(l,u){Dt(l,e,u),Kt(e,o)},p:is,d(l){l&&Oe(e)}}}function cA(i){let e,t,o,l,u,m,r,h,y,b,v,w,x,C,T,S,M,O,V,X,Z,ee,J,ie,ke,Le,fe,Te,_e,ve,rt,nt,Tt,We,be,Ce,Be,le,Ee,he,me,Fe,Xe,lt,Ye,Ke,Lt,$t,dt,wt,bt,$e,Yt,li,Zt,Ci,Li,Vt,mi,Qi,xi,Jt,Me,Q,ae,et,vt,Wt,di,xn;e=new Fh({props:{class:"material-icons","aria-label":"Print",$$slots:{default:[uA]},$$scope:{ctx:i}}}),e.$on("click",i[6]);let Mn=Object.keys(id),fn=[];for(let cn=0;cn<Mn.length;cn+=1)fn[cn]=T_(I_(i,Mn,cn));let Bi=Object.keys(nh),en=[];for(let cn=0;cn<Bi.length;cn+=1)en[cn]=L_(E_(i,Bi,cn));let Xn=Object.keys(Jc),Yn=[];for(let cn=0;cn<Xn.length;cn+=1)Yn[cn]=P_(C_(i,Xn,cn));let Kr=Object.keys(Wd),jn=[];for(let cn=0;cn<Kr.length;cn+=1)jn[cn]=M_(S_(i,Kr,cn));return{c(){Hi(e.$$.fragment),t=Xi(),o=ti("div"),l=ti("div"),u=Xi(),m=ti("div"),r=ti("header"),h=ti("p"),y=Cn("Export"),b=Xi(),v=ti("button"),w=Xi(),x=ti("section"),C=ti("div"),T=ti("label"),S=Cn("Paper Size"),M=Xi(),O=ti("div"),V=ti("div"),X=ti("select");for(let cn=0;cn<fn.length;cn+=1)fn[cn].c();Z=Xi(),ee=ti("div"),J=ti("i"),ie=Xi(),ke=ti("div"),Le=ti("label"),fe=Cn("Page Orientation"),Te=Xi(),_e=ti("div");for(let cn=0;cn<en.length;cn+=1)en[cn].c();ve=Xi(),rt=ti("div"),nt=ti("label"),Tt=Cn("Format"),We=Xi(),be=ti("div"),Ce=ti("div"),Be=ti("select");for(let cn=0;cn<Yn.length;cn+=1)Yn[cn].c();le=Xi(),Ee=ti("div"),he=ti("i"),me=Xi(),Fe=ti("div"),Xe=ti("label"),lt=Cn("DPI"),Ye=Xi(),Ke=ti("div"),Lt=ti("div"),$t=ti("select");for(let cn=0;cn<jn.length;cn+=1)jn[cn].c();dt=Xi(),wt=ti("div"),bt=ti("i"),$e=Xi(),Yt=ti("footer"),li=ti("button"),Zt=ti("span"),Ci=ti("i"),Li=Xi(),Vt=ti("span"),mi=Cn("Cancel"),Qi=Xi(),xi=ti("button"),Jt=ti("span"),Me=ti("i"),Q=Xi(),ae=ti("span"),et=Cn("Export"),this.h()},l(cn){$i(e.$$.fragment,cn),t=Yi(cn),o=ii(cn,"DIV",{class:!0});var mn=si(o);l=ii(mn,"DIV",{class:!0}),si(l).forEach(Oe),u=Yi(mn),m=ii(mn,"DIV",{class:!0});var er=si(m);r=ii(er,"HEADER",{class:!0});var yn=si(r);h=ii(yn,"P",{class:!0});var Ln=si(h);y=En(Ln,"Export"),Ln.forEach(Oe),b=Yi(yn),v=ii(yn,"BUTTON",{class:!0,"aria-label":!0}),si(v).forEach(Oe),yn.forEach(Oe),w=Yi(er),x=ii(er,"SECTION",{class:!0});var lr=si(x);C=ii(lr,"DIV",{class:!0});var oo=si(C);T=ii(oo,"LABEL",{class:!0});var ln=si(T);S=En(ln,"Paper Size"),ln.forEach(Oe),M=Yi(oo),O=ii(oo,"DIV",{class:!0});var qe=si(O);V=ii(qe,"DIV",{class:!0});var To=si(V);X=ii(To,"SELECT",{});var bo=si(X);for(let Er=0;Er<fn.length;Er+=1)fn[Er].l(bo);bo.forEach(Oe),To.forEach(Oe),Z=Yi(qe),ee=ii(qe,"DIV",{class:!0});var co=si(ee);J=ii(co,"I",{class:!0}),si(J).forEach(Oe),co.forEach(Oe),qe.forEach(Oe),oo.forEach(Oe),ie=Yi(lr),ke=ii(lr,"DIV",{class:!0});var Pe=si(ke);Le=ii(Pe,"LABEL",{class:!0});var Ie=si(Le);fe=En(Ie,"Page Orientation"),Ie.forEach(Oe),Te=Yi(Pe),_e=ii(Pe,"DIV",{class:!0});var He=si(_e);for(let Er=0;Er<en.length;Er+=1)en[Er].l(He);He.forEach(Oe),Pe.forEach(Oe),ve=Yi(lr),rt=ii(lr,"DIV",{class:!0});var ct=si(rt);nt=ii(ct,"LABEL",{class:!0});var gt=si(nt);Tt=En(gt,"Format"),gt.forEach(Oe),We=Yi(ct),be=ii(ct,"DIV",{class:!0});var Rt=si(be);Ce=ii(Rt,"DIV",{class:!0});var Ge=si(Ce);Be=ii(Ge,"SELECT",{});var Ht=si(Be);for(let Er=0;Er<Yn.length;Er+=1)Yn[Er].l(Ht);Ht.forEach(Oe),Ge.forEach(Oe),le=Yi(Rt),Ee=ii(Rt,"DIV",{class:!0});var Bt=si(Ee);he=ii(Bt,"I",{class:!0}),si(he).forEach(Oe),Bt.forEach(Oe),Rt.forEach(Oe),ct.forEach(Oe),me=Yi(lr),Fe=ii(lr,"DIV",{class:!0});var ei=si(Fe);Xe=ii(ei,"LABEL",{class:!0});var _t=si(Xe);lt=En(_t,"DPI"),_t.forEach(Oe),Ye=Yi(ei),Ke=ii(ei,"DIV",{class:!0});var Ri=si(Ke);Lt=ii(Ri,"DIV",{class:!0});var Ii=si(Lt);$t=ii(Ii,"SELECT",{});var In=si($t);for(let Er=0;Er<jn.length;Er+=1)jn[Er].l(In);In.forEach(Oe),Ii.forEach(Oe),dt=Yi(Ri),wt=ii(Ri,"DIV",{class:!0});var kn=si(wt);bt=ii(kn,"I",{class:!0}),si(bt).forEach(Oe),kn.forEach(Oe),Ri.forEach(Oe),ei.forEach(Oe),lr.forEach(Oe),$e=Yi(er),Yt=ii(er,"FOOTER",{class:!0});var xt=si(Yt);li=ii(xt,"BUTTON",{class:!0});var Pn=si(li);Zt=ii(Pn,"SPAN",{class:!0});var $n=si(Zt);Ci=ii($n,"I",{class:!0}),si(Ci).forEach(Oe),$n.forEach(Oe),Li=Yi(Pn),Vt=ii(Pn,"SPAN",{});var Pr=si(Vt);mi=En(Pr,"Cancel"),Pr.forEach(Oe),Pn.forEach(Oe),Qi=Yi(xt),xi=ii(xt,"BUTTON",{class:!0});var cr=si(xi);Jt=ii(cr,"SPAN",{class:!0});var Cr=si(Jt);Me=ii(Cr,"I",{class:!0}),si(Me).forEach(Oe),Cr.forEach(Oe),Q=Yi(cr),ae=ii(cr,"SPAN",{});var Or=si(ae);et=En(Or,"Export"),Or.forEach(Oe),cr.forEach(Oe),xt.forEach(Oe),er.forEach(Oe),mn.forEach(Oe),this.h()},h(){oi(l,"class","modal-background"),oi(h,"class","modal-card-title"),oi(v,"class","delete"),oi(v,"aria-label","close"),oi(r,"class","modal-card-head"),oi(T,"class","label"),i[0]===void 0&&ic(()=>i[8].call(X)),oi(V,"class","select is-fullwidth"),oi(J,"class","fas fa-file"),oi(ee,"class","icon is-small is-left"),oi(O,"class","control has-icons-left"),oi(C,"class","field"),oi(Le,"class","label"),oi(_e,"class","control"),oi(ke,"class","field"),oi(nt,"class","label"),i[2]===void 0&&ic(()=>i[10].call(Be)),oi(Ce,"class","select is-fullwidth"),oi(he,"class","fas fa-file-pdf"),oi(Ee,"class","icon is-small is-left"),oi(be,"class","control has-icons-left"),oi(rt,"class","field"),oi(Xe,"class","label"),i[1]===void 0&&ic(()=>i[11].call($t)),oi(Lt,"class","select is-fullwidth"),oi(bt,"class","fas fa-braille"),oi(wt,"class","icon is-small is-left"),oi(Ke,"class","control has-icons-left"),oi(Fe,"class","field"),oi(x,"class","modal-card-body"),oi(Ci,"class","fas fa-xmark"),oi(Zt,"class","icon"),oi(li,"class","button"),oi(Me,"class","fas fa-download"),oi(Jt,"class","icon"),oi(xi,"class","button is-success"),oi(Yt,"class","modal-card-foot"),oi(m,"class","modal-card"),oi(o,"class",vt=`modal ${i[4]?"is-active":""}`)},m(cn,mn){Gi(e,cn,mn),Dt(cn,t,mn),Dt(cn,o,mn),Kt(o,l),Kt(o,u),Kt(o,m),Kt(m,r),Kt(r,h),Kt(h,y),Kt(r,b),Kt(r,v),Kt(m,w),Kt(m,x),Kt(x,C),Kt(C,T),Kt(T,S),Kt(C,M),Kt(C,O),Kt(O,V),Kt(V,X);for(let er=0;er<fn.length;er+=1)fn[er].m(X,null);ec(X,i[0]),Kt(O,Z),Kt(O,ee),Kt(ee,J),Kt(x,ie),Kt(x,ke),Kt(ke,Le),Kt(Le,fe),Kt(ke,Te),Kt(ke,_e);for(let er=0;er<en.length;er+=1)en[er].m(_e,null);Kt(x,ve),Kt(x,rt),Kt(rt,nt),Kt(nt,Tt),Kt(rt,We),Kt(rt,be),Kt(be,Ce),Kt(Ce,Be);for(let er=0;er<Yn.length;er+=1)Yn[er].m(Be,null);ec(Be,i[2]),Kt(be,le),Kt(be,Ee),Kt(Ee,he),Kt(x,me),Kt(x,Fe),Kt(Fe,Xe),Kt(Xe,lt),Kt(Fe,Ye),Kt(Fe,Ke),Kt(Ke,Lt),Kt(Lt,$t);for(let er=0;er<jn.length;er+=1)jn[er].m($t,null);ec($t,i[1]),Kt(Ke,dt),Kt(Ke,wt),Kt(wt,bt),Kt(m,$e),Kt(m,Yt),Kt(Yt,li),Kt(li,Zt),Kt(Zt,Ci),Kt(li,Li),Kt(li,Vt),Kt(Vt,mi),Kt(Yt,Qi),Kt(Yt,xi),Kt(xi,Jt),Kt(Jt,Me),Kt(xi,Q),Kt(xi,ae),Kt(ae,et),Wt=!0,di||(xn=[qn(l,"click",i[7]),qn(v,"click",i[7]),qn(X,"change",i[8]),qn(Be,"change",i[10]),qn($t,"change",i[11]),qn(li,"click",i[7]),qn(xi,"click",i[5])],di=!0)},p(cn,[mn]){const er={};if(mn&16777216&&(er.$$scope={dirty:mn,ctx:cn}),e.$set(er),mn&0){Mn=Object.keys(id);let yn;for(yn=0;yn<Mn.length;yn+=1){const Ln=I_(cn,Mn,yn);fn[yn]?fn[yn].p(Ln,mn):(fn[yn]=T_(Ln),fn[yn].c(),fn[yn].m(X,null))}for(;yn<fn.length;yn+=1)fn[yn].d(1);fn.length=Mn.length}if(mn&1&&ec(X,cn[0]),mn&8){Bi=Object.keys(nh);let yn;for(yn=0;yn<Bi.length;yn+=1){const Ln=E_(cn,Bi,yn);en[yn]?en[yn].p(Ln,mn):(en[yn]=L_(Ln),en[yn].c(),en[yn].m(_e,null))}for(;yn<en.length;yn+=1)en[yn].d(1);en.length=Bi.length}if(mn&0){Xn=Object.keys(Jc);let yn;for(yn=0;yn<Xn.length;yn+=1){const Ln=C_(cn,Xn,yn);Yn[yn]?Yn[yn].p(Ln,mn):(Yn[yn]=P_(Ln),Yn[yn].c(),Yn[yn].m(Be,null))}for(;yn<Yn.length;yn+=1)Yn[yn].d(1);Yn.length=Xn.length}if(mn&4&&ec(Be,cn[2]),mn&0){Kr=Object.keys(Wd);let yn;for(yn=0;yn<Kr.length;yn+=1){const Ln=S_(cn,Kr,yn);jn[yn]?jn[yn].p(Ln,mn):(jn[yn]=M_(Ln),jn[yn].c(),jn[yn].m($t,null))}for(;yn<jn.length;yn+=1)jn[yn].d(1);jn.length=Kr.length}mn&2&&ec($t,cn[1]),(!Wt||mn&16&&vt!==(vt=`modal ${cn[4]?"is-active":""}`))&&oi(o,"class",vt)},i(cn){Wt||(yt(e.$$.fragment,cn),Wt=!0)},o(cn){At(e.$$.fragment,cn),Wt=!1},d(cn){Wi(e,cn),cn&&Oe(t),cn&&Oe(o),Ja(fn,cn),Ja(en,cn),Ja(Yn,cn),Ja(jn,cn),di=!1,Io(xn)}}}function hA(i,e,t){let o;Wo(i,Mu,O=>t(13,o=O));let l,u=id.A4,m=Wd[96],r=Jc.PNG,h=nh.Landscape,y=!1;Ss(async()=>{const{default:O}=await m1(()=>Promise.resolve().then(()=>lA),void 0,import.meta.url);l=new O});const b=()=>{let O=[u[0],u[1]];return h!==nh.Landscape&&(O=O.reverse()),O},v=()=>{const O=b();l.generate(o,O,m,r,v1.mm),x()},w=()=>{t(4,y=!0)},x=()=>{t(4,y=!1)};function C(){u=V0(this),t(0,u)}const T=O=>{t(3,h=nh[O])};function S(){r=V0(this),t(2,r)}function M(){m=V0(this),t(1,m)}return[u,m,r,h,y,v,w,x,C,T,S,M]}class fA extends xr{constructor(e){super(),Ar(this,e,hA,cA,br,{})}}const dA=async i=>{if("clipboard"in navigator)await navigator.clipboard.writeText(i);else{const e=document.createElement("input");e.type="text",e.disabled=!0,e.style.setProperty("position","fixed"),e.style.setProperty("z-index","-100"),e.style.setProperty("pointer-events","none"),e.style.setProperty("opacity","0"),e.value=i,document.body.appendChild(e),e.click(),e.select(),document.execCommand("copy"),document.body.removeChild(e)}},pA=(i,e)=>{async function t(){if(l)try{await dA(l),i.dispatchEvent(new CustomEvent("svelte-copy",{detail:l}))}catch(u){i.dispatchEvent(new CustomEvent("svelte-copy:error",{detail:u}))}}let o=typeof e=="string"?["click"]:[e.events].flat(1),l=typeof e=="string"?e:e.text;return o.forEach(u=>{i.addEventListener(u,t,!0)}),{update:u=>{const m=typeof u=="string"?["click"]:[u.events].flat(1),r=typeof u=="string"?u:u.text,h=m.filter(b=>!o.includes(b)),y=o.filter(b=>!m.includes(b));h.forEach(b=>{i.addEventListener(b,t,!0)}),y.forEach(b=>{i.removeEventListener(b,t,!0)}),o=m,l=r},destroy:()=>{o.forEach(u=>{i.removeEventListener(u,t,!0)})}}};function mA(i){let e;return{c(){e=Cn("share")},l(t){e=En(t,"share")},m(t,o){Dt(t,e,o)},d(t){t&&Oe(e)}}}function gA(i){let e,t,o,l,u,m,r,h,y,b,v,w,x,C,T,S,M,O,V,X,Z,ee,J,ie,ke,Le,fe,Te,_e,ve,rt,nt,Tt,We,be;return e=new Fh({props:{class:"material-icons","aria-label":"Share",$$slots:{default:[mA]},$$scope:{ctx:i}}}),e.$on("click",i[5]),{c(){Hi(e.$$.fragment),t=Xi(),o=ti("div"),l=ti("div"),u=Xi(),m=ti("div"),r=ti("header"),h=ti("p"),y=Cn("URL to share"),b=Xi(),v=ti("button"),w=Xi(),x=ti("section"),C=ti("div"),T=ti("input"),S=Xi(),M=ti("button"),O=ti("span"),V=ti("i"),X=Xi(),Z=ti("span"),ee=Cn(i[1]),ie=Xi(),ke=ti("footer"),Le=ti("button"),fe=ti("span"),Te=ti("i"),_e=Xi(),ve=ti("span"),rt=Cn("Cancel"),this.h()},l(Ce){$i(e.$$.fragment,Ce),t=Yi(Ce),o=ii(Ce,"DIV",{class:!0});var Be=si(o);l=ii(Be,"DIV",{class:!0}),si(l).forEach(Oe),u=Yi(Be),m=ii(Be,"DIV",{class:!0});var le=si(m);r=ii(le,"HEADER",{class:!0});var Ee=si(r);h=ii(Ee,"P",{class:!0});var he=si(h);y=En(he,"URL to share"),he.forEach(Oe),b=Yi(Ee),v=ii(Ee,"BUTTON",{class:!0,"aria-label":!0}),si(v).forEach(Oe),Ee.forEach(Oe),w=Yi(le),x=ii(le,"SECTION",{class:!0});var me=si(x);C=ii(me,"DIV",{class:!0});var Fe=si(C);T=ii(Fe,"INPUT",{class:!0,type:!0,placeholder:!0}),S=Yi(Fe),M=ii(Fe,"BUTTON",{class:!0});var Xe=si(M);O=ii(Xe,"SPAN",{class:!0});var lt=si(O);V=ii(lt,"I",{class:!0}),si(V).forEach(Oe),lt.forEach(Oe),X=Yi(Xe),Z=ii(Xe,"SPAN",{});var Ye=si(Z);ee=En(Ye,i[1]),Ye.forEach(Oe),Xe.forEach(Oe),Fe.forEach(Oe),me.forEach(Oe),ie=Yi(le),ke=ii(le,"FOOTER",{class:!0});var Ke=si(ke);Le=ii(Ke,"BUTTON",{class:!0});var Lt=si(Le);fe=ii(Lt,"SPAN",{class:!0});var $t=si(fe);Te=ii($t,"I",{class:!0}),si(Te).forEach(Oe),$t.forEach(Oe),_e=Yi(Lt),ve=ii(Lt,"SPAN",{});var dt=si(ve);rt=En(dt,"Cancel"),dt.forEach(Oe),Lt.forEach(Oe),Ke.forEach(Oe),le.forEach(Oe),Be.forEach(Oe),this.h()},h(){oi(l,"class","modal-background"),oi(h,"class","modal-card-title"),oi(v,"class","delete"),oi(v,"aria-label","close"),oi(r,"class","modal-card-head"),oi(T,"class","input is-success"),oi(T,"type","text"),oi(T,"placeholder","URL to share"),T.readOnly=!0,oi(V,"class","fas fa-copy"),oi(O,"class","icon"),oi(M,"class","button is-success ml-1"),oi(C,"class","copy-control svelte-667xy4"),oi(x,"class","modal-card-body"),oi(Te,"class","fas fa-xmark"),oi(fe,"class","icon"),oi(Le,"class","button"),oi(ke,"class","modal-card-foot"),oi(m,"class","modal-card"),oi(o,"class",nt=`modal ${i[0]?"is-active":""} svelte-667xy4`)},m(Ce,Be){Gi(e,Ce,Be),Dt(Ce,t,Be),Dt(Ce,o,Be),Kt(o,l),Kt(o,u),Kt(o,m),Kt(m,r),Kt(r,h),Kt(h,y),Kt(r,b),Kt(r,v),Kt(m,w),Kt(m,x),Kt(x,C),Kt(C,T),td(T,i[2]),Kt(C,S),Kt(C,M),Kt(M,O),Kt(O,V),Kt(M,X),Kt(M,Z),Kt(Z,ee),Kt(m,ie),Kt(m,ke),Kt(ke,Le),Kt(Le,fe),Kt(fe,Te),Kt(Le,_e),Kt(Le,ve),Kt(ve,rt),Tt=!0,We||(be=[qn(l,"click",i[4]),qn(v,"click",i[4]),qn(T,"input",i[6]),ir(J=pA.call(null,M,i[2])),qn(M,"click",i[3]),qn(Le,"click",i[4])],We=!0)},p(Ce,[Be]){const le={};Be&2048&&(le.$$scope={dirty:Be,ctx:Ce}),e.$set(le),Be&4&&T.value!==Ce[2]&&td(T,Ce[2]),(!Tt||Be&2)&&ks(ee,Ce[1]),J&&ro(J.update)&&Be&4&&J.update.call(null,Ce[2]),(!Tt||Be&1&&nt!==(nt=`modal ${Ce[0]?"is-active":""} svelte-667xy4`))&&oi(o,"class",nt)},i(Ce){Tt||(yt(e.$$.fragment,Ce),Tt=!0)},o(Ce){At(e.$$.fragment,Ce),Tt=!1},d(Ce){Wi(e,Ce),Ce&&Oe(t),Ce&&Oe(o),We=!1,Io(be)}}}function yA(i,e,t){let o,l,u,m;Wo(i,Xd,C=>t(7,l=C)),Wo(i,Mu,C=>t(8,u=C)),Wo(i,kx,C=>t(9,m=C));let r,h="Copy";const y=()=>{t(1,h="copied"),setTimeout(()=>{t(1,h="Copy")},2e3)},b=()=>{if(!u)return"";const C=`${m.url.protocol}//${m.url.host}`,T=`#${u.getZoom().toFixed(2)}`,S=`/${u.getCenter().lat.toFixed(6)}`,M=`/${u.getCenter().lng.toFixed(6)}`,O=u.getBearing()!==0?`/${u.getBearing().toFixed(1)}`:"",V=u.getPitch()!==0?`/${u.getPitch().toFixed()}`:"",X=`/?style=${l.title}`;return t(2,o=`${C}${X}${T}${S}${M}${O}${V}`),o},v=()=>{t(0,r=!1)},w=()=>t(0,r=!0);function x(){o=this.value,t(2,o)}return i.$$.update=()=>{i.$$.dirty&1&&r===!0&&b()},t(2,o=b()),[r,h,o,y,v,w,x]}class _A extends xr{constructor(e){super(),Ar(this,e,yA,gA,br,{})}}function vA(i){let e;return{c(){e=ti("link"),this.h()},l(t){e=ii(t,"LINK",{rel:!0,href:!0}),this.h()},h(){oi(e,"rel","stylesheet"),oi(e,"href",zr.basePath+"/smui.css")},m(t,o){Dt(t,e,o)},p:is,d(t){t&&Oe(e)}}}function bA(i){let e,t,o;return{c(){e=ti("link"),t=Xi(),o=ti("link"),this.h()},l(l){e=ii(l,"LINK",{rel:!0,href:!0,media:!0}),t=Yi(l),o=ii(l,"LINK",{rel:!0,href:!0,media:!0}),this.h()},h(){oi(e,"rel","stylesheet"),oi(e,"href",zr.basePath+"/smui.css"),oi(e,"media","print"),oi(o,"rel","stylesheet"),oi(o,"href",zr.basePath+"/smui-dark.css"),oi(o,"media","screen")},m(l,u){Dt(l,e,u),Dt(l,t,u),Dt(l,o,u)},p:is,d(l){l&&Oe(e),l&&Oe(t),l&&Oe(o)}}}function wA(i){let e,t,o;return{c(){e=ti("link"),t=Xi(),o=ti("link"),this.h()},l(l){e=ii(l,"LINK",{rel:!0,href:!0,media:!0}),t=Yi(l),o=ii(l,"LINK",{rel:!0,href:!0,media:!0}),this.h()},h(){oi(e,"rel","stylesheet"),oi(e,"href",zr.basePath+"/smui.css"),oi(e,"media","(prefers-color-scheme: light)"),oi(o,"rel","stylesheet"),oi(o,"href",zr.basePath+"/smui-dark.css"),oi(o,"media","screen and (prefers-color-scheme: dark)")},m(l,u){Dt(l,e,u),Dt(l,t,u),Dt(l,o,u)},p:is,d(l){l&&Oe(e),l&&Oe(t),l&&Oe(o)}}}function xA(i){let e;return{c(){e=Cn("close")},l(t){e=En(t,"close")},m(t,o){Dt(t,e,o)},d(t){t&&Oe(e)}}}function AA(i){let e;return{c(){e=Cn("menu")},l(t){e=En(t,"menu")},m(t,o){Dt(t,e,o)},d(t){t&&Oe(e)}}}function kA(i){let e;function t(u,m){return u[0]?xA:AA}let o=t(i),l=o(i);return{c(){l.c(),e=gn()},l(u){l.l(u),e=gn()},m(u,m){l.m(u,m),Dt(u,e,m)},p(u,m){o!==(o=t(u))&&(l.d(1),l=o(u),l&&(l.c(),l.m(e.parentNode,e)))},d(u){l.d(u),u&&Oe(e)}}}function SA(i){let e=zr.title+"",t;return{c(){t=Cn(e)},l(o){t=En(o,e)},m(o,l){Dt(o,t,l)},p:is,d(o){o&&Oe(t)}}}function CA(i){let e,t,o,l,u,m,r,h;return e=new Fh({props:{class:"material-icons",$$slots:{default:[kA]},$$scope:{ctx:i}}}),e.$on("click",i[6]),r=new z6({props:{$$slots:{default:[SA]},$$scope:{ctx:i}}}),{c(){Hi(e.$$.fragment),t=Xi(),o=ti("a"),l=ti("img"),m=Xi(),Hi(r.$$.fragment),this.h()},l(y){$i(e.$$.fragment,y),t=Yi(y),o=ii(y,"A",{href:!0});var b=si(o);l=ii(b,"IMG",{src:!0,alt:!0,class:!0}),b.forEach(Oe),m=Yi(y),$i(r.$$.fragment,y),this.h()},h(){h4(l.src,u=zr.logo)||oi(l,"src",u),oi(l,"alt","logo"),oi(l,"class","logo svelte-1cnjkz4"),oi(o,"href",zr.url)},m(y,b){Gi(e,y,b),Dt(y,t,b),Dt(y,o,b),Kt(o,l),Dt(y,m,b),Gi(r,y,b),h=!0},p(y,b){const v={};b&257&&(v.$$scope={dirty:b,ctx:y}),e.$set(v);const w={};b&256&&(w.$$scope={dirty:b,ctx:y}),r.$set(w)},i(y){h||(yt(e.$$.fragment,y),yt(r.$$.fragment,y),h=!0)},o(y){At(e.$$.fragment,y),At(r.$$.fragment,y),h=!1},d(y){Wi(e,y),y&&Oe(t),y&&Oe(o),y&&Oe(m),Wi(r,y)}}}function EA(i){let e;return{c(){e=Cn(i[3])},l(t){e=En(t,i[3])},m(t,o){Dt(t,e,o)},p(t,o){o&8&&ks(e,t[3])},d(t){t&&Oe(e)}}}function IA(i){let e,t,o,l,u,m;return e=new _A({}),o=new fA({}),u=new Fh({props:{"aria-label":i[4],class:"material-icons",title:i[4],$$slots:{default:[EA]},$$scope:{ctx:i}}}),u.$on("click",i[5]),{c(){Hi(e.$$.fragment),t=Xi(),Hi(o.$$.fragment),l=Xi(),Hi(u.$$.fragment)},l(r){$i(e.$$.fragment,r),t=Yi(r),$i(o.$$.fragment,r),l=Yi(r),$i(u.$$.fragment,r)},m(r,h){Gi(e,r,h),Dt(r,t,h),Gi(o,r,h),Dt(r,l,h),Gi(u,r,h),m=!0},p(r,h){const y={};h&16&&(y["aria-label"]=r[4]),h&16&&(y.title=r[4]),h&264&&(y.$$scope={dirty:h,ctx:r}),u.$set(y)},i(r){m||(yt(e.$$.fragment,r),yt(o.$$.fragment,r),yt(u.$$.fragment,r),m=!0)},o(r){At(e.$$.fragment,r),At(o.$$.fragment,r),At(u.$$.fragment,r),m=!1},d(r){Wi(e,r),r&&Oe(t),Wi(o,r),r&&Oe(l),Wi(u,r)}}}function TA(i){let e,t,o,l,u,m;return e=new i_({props:{$$slots:{default:[CA]},$$scope:{ctx:i}}}),u=new i_({props:{align:"end",toolbar:!0,$$slots:{default:[IA]},$$scope:{ctx:i}}}),{c(){Hi(e.$$.fragment),t=Xi(),o=ti("section"),l=Xi(),Hi(u.$$.fragment)},l(r){$i(e.$$.fragment,r),t=Yi(r),o=ii(r,"SECTION",{}),si(o).forEach(Oe),l=Yi(r),$i(u.$$.fragment,r)},m(r,h){Gi(e,r,h),Dt(r,t,h),Dt(r,o,h),Dt(r,l,h),Gi(u,r,h),m=!0},p(r,h){const y={};h&257&&(y.$$scope={dirty:h,ctx:r}),e.$set(y);const b={};h&280&&(b.$$scope={dirty:h,ctx:r}),u.$set(b)},i(r){m||(yt(e.$$.fragment,r),yt(u.$$.fragment,r),m=!0)},o(r){At(e.$$.fragment,r),At(u.$$.fragment,r),m=!1},d(r){Wi(e,r),r&&Oe(t),r&&Oe(o),r&&Oe(l),Wi(u,r)}}}function LA(i){let e,t;return e=new O6({props:{$$slots:{default:[TA]},$$scope:{ctx:i}}}),{c(){Hi(e.$$.fragment)},l(o){$i(e.$$.fragment,o)},m(o,l){Gi(e,o,l),t=!0},p(o,l){const u={};l&281&&(u.$$scope={dirty:l,ctx:o}),e.$set(u)},i(o){t||(yt(e.$$.fragment,o),t=!0)},o(o){At(e.$$.fragment,o),t=!1},d(o){Wi(e,o)}}}function PA(i){let e,t,o,l,u,m;function r(v,w){return v[1]===void 0?wA:v[1]?bA:vA}let h=r(i),y=h(i),b={variant:"fixed",$$slots:{default:[LA]},$$scope:{ctx:i}};return o=new jx({props:b}),i[7](o),u=new q6({props:{topAppBar:i[2]}}),{c(){y.c(),e=gn(),t=Xi(),Hi(o.$$.fragment),l=Xi(),Hi(u.$$.fragment)},l(v){const w=wx("svelte-7r4yyr",document.head);y.l(w),e=gn(),w.forEach(Oe),t=Yi(v),$i(o.$$.fragment,v),l=Yi(v),$i(u.$$.fragment,v)},m(v,w){y.m(document.head,null),Kt(document.head,e),Dt(v,t,w),Gi(o,v,w),Dt(v,l,w),Gi(u,v,w),m=!0},p(v,[w]){h===(h=r(v))&&y?y.p(v,w):(y.d(1),y=h(v),y&&(y.c(),y.m(e.parentNode,e)));const x={};w&281&&(x.$$scope={dirty:w,ctx:v}),o.$set(x);const C={};w&4&&(C.topAppBar=v[2]),u.$set(C)},i(v){m||(yt(o.$$.fragment,v),yt(u.$$.fragment,v),m=!0)},o(v){At(o.$$.fragment,v),At(u.$$.fragment,v),m=!1},d(v){y.d(v),Oe(e),v&&Oe(t),i[7](null),Wi(o,v),v&&Oe(l),Wi(u,v)}}}function MA(i,e,t){let o,l,{drawerOpen:u=!1}=e,m,r;Ss(async()=>{t(1,m=window.matchMedia("(prefers-color-scheme: dark)").matches)});const h=()=>{t(0,u=!1),t(1,m=!m)},y=()=>t(0,u=!u);function b(v){wn[v?"unshift":"push"](()=>{r=v,t(2,r)})}return i.$$set=v=>{"drawerOpen"in v&&t(0,u=v.drawerOpen)},i.$$.update=()=>{i.$$.dirty&2&&t(4,o=`switch to ${m?"light":"dark"} mode`),i.$$.dirty&2&&t(3,l=m?"light_mode":"dark_mode")},[u,m,r,l,o,h,y,b]}class DA extends xr{constructor(e){super(),Ar(this,e,MA,PA,br,{drawerOpen:0})}}const N4={name:"SplitterContext"};function OA(i){let e,t,o,l;return{c(){e=ti("div"),t=ti("div"),this.h()},l(u){e=ii(u,"DIV",{class:!0,tabindex:!0});var m=si(e);t=ii(m,"DIV",{class:!0,style:!0}),si(t).forEach(Oe),m.forEach(Oe),this.h()},h(){oi(t,"class","line svelte-16wga0t"),oi(t,"style",i[3]),oi(e,"class",o=qd(i[2])+" svelte-16wga0t"),oi(e,"tabindex","0"),ic(()=>i[13].call(e))},m(u,m){Dt(u,e,m),Kt(e,t),l=Ld(e,i[13].bind(e))},p(u,[m]){m&8&&oi(t,"style",u[3]),m&4&&o!==(o=qd(u[2])+" svelte-16wga0t")&&oi(e,"class",o)},i:is,o:is,d(u){u&&Oe(e),l()}}}function FA(i,e,t){let o,l,u,m,r,h,y,{color:b="silver"}=e,{hoverColor:v="gray"}=e,{dragColor:w="black"}=e,x=ds(N4);Wo(i,x,M=>t(12,y=M));let C,T;function S(){C=this.clientWidth,T=this.clientHeight,t(0,C),t(1,T)}return i.$$set=M=>{"color"in M&&t(5,b=M.color),"hoverColor"in M&&t(6,v=M.hoverColor),"dragColor"in M&&t(7,w=M.dragColor)},i.$$.update=()=>{i.$$.dirty&4096&&t(10,o=y.dragging),i.$$.dirty&4096&&t(8,l=y.horizontal),i.$$.dirty&259&&t(11,u=l?T:C),i.$$.dirty&3296&&t(9,m={"--splitter-line-margin":`${Math.max(0,Math.floor(u/2)-1)}px`,"--splitter-line-size":`${u%2===0?2:3}px`,"--splitter-line-color":o?w:b,"--splitter-line-hover-color":o?w:v}),i.$$.dirty&512&&t(3,r=Object.entries(m).map(([M,O])=>`${M}:${O}`).join(";")),i.$$.dirty&256&&t(2,h=l?"splitter horizontal":"splitter vertical")},[C,T,h,r,x,b,v,w,l,m,o,u,y,S]}class RA extends xr{constructor(e){super(),Ar(this,e,FA,OA,br,{color:5,hoverColor:6,dragColor:7})}}const BA=i=>({}),D_=i=>({}),zA=i=>({}),O_=i=>({}),NA=i=>({}),F_=i=>({});function jA(i){let e,t;return e=new RA({}),{c(){Hi(e.$$.fragment)},l(o){$i(e.$$.fragment,o)},m(o,l){Gi(e,o,l),t=!0},i(o){t||(yt(e.$$.fragment,o),t=!0)},o(o){At(e.$$.fragment,o),t=!1},d(o){Wi(e,o)}}}function UA(i){let e,t,o,l,u,m,r,h,y,b,v,w,x,C;const T=i[33].primary,S=fr(T,i,i[32],F_),M=i[33].splitter,O=fr(M,i,i[32],O_),V=O||jA(),X=i[33].secondary,Z=fr(X,i,i[32],D_);return{c(){e=ti("div"),t=ti("div"),S&&S.c(),l=Xi(),u=ti("div"),V&&V.c(),r=Xi(),h=ti("div"),Z&&Z.c(),this.h()},l(ee){e=ii(ee,"DIV",{class:!0,style:!0});var J=si(e);t=ii(J,"DIV",{class:!0});var ie=si(t);S&&S.l(ie),ie.forEach(Oe),l=Yi(J),u=ii(J,"DIV",{class:!0});var ke=si(u);V&&V.l(ke),ke.forEach(Oe),r=Yi(J),h=ii(J,"DIV",{class:!0});var Le=si(h);Z&&Z.l(Le),Le.forEach(Oe),J.forEach(Oe),this.h()},h(){oi(t,"class","primary svelte-603y9m"),ic(()=>i[34].call(t)),oi(u,"class","splitter svelte-603y9m"),ic(()=>i[35].call(u)),oi(h,"class","secondary svelte-603y9m"),ic(()=>i[36].call(h)),oi(e,"class",b=qd(i[8])+" svelte-603y9m"),oi(e,"style",i[9]),ic(()=>i[37].call(e))},m(ee,J){Dt(ee,e,J),Kt(e,t),S&&S.m(t,null),o=Ld(t,i[34].bind(t)),Kt(e,l),Kt(e,u),V&&V.m(u,null),m=Ld(u,i[35].bind(u)),Kt(e,r),Kt(e,h),Z&&Z.m(h,null),y=Ld(h,i[36].bind(h)),v=Ld(e,i[37].bind(e)),w=!0,x||(C=[qn(u,"pointerdown",i[10]),qn(u,"pointermove",i[11]),qn(u,"pointerup",i[12]),qn(u,"dblclick",i[13]),qn(u,"keydown",i[14])],x=!0)},p(ee,J){S&&S.p&&(!w||J[1]&2)&&dr(S,T,ee,ee[32],w?mr(T,ee[32],J,NA):pr(ee[32]),F_),O&&O.p&&(!w||J[1]&2)&&dr(O,M,ee,ee[32],w?mr(M,ee[32],J,zA):pr(ee[32]),O_),Z&&Z.p&&(!w||J[1]&2)&&dr(Z,X,ee,ee[32],w?mr(X,ee[32],J,BA):pr(ee[32]),D_),(!w||J[0]&256&&b!==(b=qd(ee[8])+" svelte-603y9m"))&&oi(e,"class",b),(!w||J[0]&512)&&oi(e,"style",ee[9])},i(ee){w||(yt(S,ee),yt(V,ee),yt(Z,ee),w=!0)},o(ee){At(S,ee),At(V,ee),At(Z,ee),w=!1},d(ee){ee&&Oe(e),S&&S.d(ee),o(),V&&V.d(ee),m(),Z&&Z.d(ee),y(),v(),x=!1,Io(C)}}}function VA(i,e,t){let o,l,u,m,r,h,y,b,v,{$$slots:w={},$$scope:x}=e,{horizontal:C=!1}=e,{initialPrimarySize:T="50%"}=e,{minPrimarySize:S="0"}=e,{minSecondarySize:M="0"}=e,{splitterSize:O="7px"}=e,{resetOnDoubleClick:V=!0}=e,X,Z,ee,J,ie,ke,Le,fe;const Te=Ke=>Math.max(0,Math.min(Ke,100));let _e,ve,rt,nt=!1;const Tt=()=>r,We=Ke=>{t(23,_e=Te(Ke))},be=Vl({horizontal:C,dragging:nt});$o(N4,be);const Ce=T1(),Be=Ke=>{Ke.currentTarget.setPointerCapture(Ke.pointerId),ve=C?Ke.clientY:Ke.clientX,rt=l,t(24,nt=!0)},le=Ke=>{if(Ke.currentTarget.hasPointerCapture(Ke.pointerId)){const Lt=C?Ke.clientY:Ke.clientX;let $t=rt+(Lt-ve);$t=Math.max(0,Math.min($t,o));const dt=$t/o*100;t(23,_e=dt)}},Ee=Ke=>{Ke.currentTarget.releasePointerCapture(Ke.pointerId),t(24,nt=!1)},he=()=>{V&&t(23,_e=void 0)},me=Ke=>{const Lt=_e||r;if(!Ke.ctrlKey&&!Ke.shiftKey&&!Ke.altKey){switch(Ke.code){case"Space":t(23,_e=void 0);return}if(C)switch(Ke.code){case"ArrowUp":t(23,_e=Te(Lt-1));return;case"ArrowDown":t(23,_e=Te(Lt+1));return}else switch(Ke.code){case"ArrowLeft":t(23,_e=Te(Lt-1));return;case"ArrowRight":t(23,_e=Te(Lt+1));return}}};function Fe(){ee=this.clientWidth,J=this.clientHeight,t(2,ee),t(3,J)}function Xe(){ie=this.clientWidth,ke=this.clientHeight,t(4,ie),t(5,ke)}function lt(){Le=this.clientWidth,fe=this.clientHeight,t(6,Le),t(7,fe)}function Ye(){X=this.clientWidth,Z=this.clientHeight,t(0,X),t(1,Z)}return i.$$set=Ke=>{"horizontal"in Ke&&t(15,C=Ke.horizontal),"initialPrimarySize"in Ke&&t(16,T=Ke.initialPrimarySize),"minPrimarySize"in Ke&&t(17,S=Ke.minPrimarySize),"minSecondarySize"in Ke&&t(18,M=Ke.minSecondarySize),"splitterSize"in Ke&&t(19,O=Ke.splitterSize),"resetOnDoubleClick"in Ke&&t(20,V=Ke.resetOnDoubleClick),"$$scope"in Ke&&t(32,x=Ke.$$scope)},i.$$.update=()=>{i.$$.dirty[0]&32771&&t(26,o=C?Z:X),i.$$.dirty[0]&32780&&t(27,l=C?J:ee),i.$$.dirty[0]&32816&&t(31,u=C?ke:ie),i.$$.dirty[0]&32960&&t(30,m=C?fe:Le),i.$$.dirty[0]&201326592|i.$$.dirty[1]&1&&t(25,r=Te(Math.ceil((l-u)/(o-u)*100))),i.$$.dirty[0]&16809984&&be.set({horizontal:C,dragging:nt}),i.$$.dirty[0]&1258291200|i.$$.dirty[1]&1&&Ce("changed",{percent:r,primarySize:l,splitterSize:u,secondarySize:m,dragging:nt}),i.$$.dirty[0]&8454144&&t(29,h=_e!==void 0?`${_e}%`:T),i.$$.dirty[0]&537788416&&t(28,y={"--primary-size":`${h}`,"--min-primary-size":`${S}`,"--min-secondary-size":`${M}`,"--splitter-size":`${O}`}),i.$$.dirty[0]&268435456&&t(9,b=Object.entries(y).map(([Ke,Lt])=>`${Ke}:${Lt}`).join(";")),i.$$.dirty[0]&32768&&t(8,v=C?"split horizontal":"split vertical")},[X,Z,ee,J,ie,ke,Le,fe,v,b,Be,le,Ee,he,me,C,T,S,M,O,V,Tt,We,_e,nt,r,o,l,y,h,m,u,x,w,Fe,Xe,lt,Ye]}class qA extends xr{constructor(e){super(),Ar(this,e,VA,UA,br,{horizontal:15,initialPrimarySize:16,minPrimarySize:17,minSecondarySize:18,splitterSize:19,resetOnDoubleClick:20,getPercent:21,setPercent:22},null,[-1,-1])}get getPercent(){return this.$$.ctx[21]}get setPercent(){return this.$$.ctx[22]}}class j4{constructor(){pl(this,"STYLE_PATHNAME","style")}getUrl(){const e=window.location,t=new URL(e.href);return t.hash=e.hash,t}updateUrl(e){history.replaceState("","",e.toString())}get(){return this.getUrl().searchParams.get(this.STYLE_PATHNAME)}set(e){const t=this.getUrl();t.searchParams.set(this.STYLE_PATHNAME,e),this.updateUrl(t)}delete(){const e=this.getUrl();e.searchParams.delete(this.STYLE_PATHNAME),this.updateUrl(e)}getMatchedStyleByTitle(e,t){for(const o of e)if(o.title===t)return o}getMatchedStyleByUrl(e,t){for(const o of e)if(o.uri===t)return o}}function R_(i,e,t){const o=i.slice();return o[7]=e[t],o}function B_(i){let e,t=i[7].title+"",o;return{c(){e=ti("option"),o=Cn(t),this.h()},l(l){e=ii(l,"OPTION",{});var u=si(e);o=En(u,t),u.forEach(Oe),this.h()},h(){e.__value=i[7].uri,e.value=e.__value},m(l,u){Dt(l,e,u),Kt(e,o)},p:is,d(l){l&&Oe(e)}}}function HA(i){let e,t,o,l,u=zr.styles,m=[];for(let r=0;r<u.length;r+=1)m[r]=B_(R_(i,u,r));return{c(){e=ti("div"),t=ti("select");for(let r=0;r<m.length;r+=1)m[r].c();this.h()},l(r){e=ii(r,"DIV",{class:!0});var h=si(e);t=ii(h,"SELECT",{});var y=si(t);for(let b=0;b<m.length;b+=1)m[b].l(y);y.forEach(Oe),h.forEach(Oe),this.h()},h(){i[0]===void 0&&ic(()=>i[2].call(t)),oi(e,"class","select is-link is-fullwidth mt-1")},m(r,h){Dt(r,e,h),Kt(e,t);for(let y=0;y<m.length;y+=1)m[y].m(t,null);ec(t,i[0]),o||(l=qn(t,"change",i[2]),o=!0)},p(r,[h]){if(h&0){u=zr.styles;let y;for(y=0;y<u.length;y+=1){const b=R_(r,u,y);m[y]?m[y].p(b,h):(m[y]=B_(b),m[y].c(),m[y].m(t,null))}for(;y<m.length;y+=1)m[y].d(1);m.length=u.length}h&1&&ec(t,r[0])},i:is,o:is,d(r){r&&Oe(e),Ja(m,r),o=!1,l()}}}function GA(i,e,t){let o,l;Wo(i,Xd,b=>t(1,o=b)),Wo(i,Mu,b=>t(3,l=b));const u=T1();let m=o.uri;const r=()=>{!l||m!==o.uri&&(l.setStyle(m),l.on("styledata",()=>{const b=new j4,v=b.getMatchedStyleByUrl(zr.styles,m);v?(b.set(v.title),Xd.update(()=>v)):b.delete(),u("change")}))},h=()=>{m!==o.uri&&t(0,m=o.uri)};function y(){m=V0(this),t(0,m)}return i.$$.update=()=>{i.$$.dirty&1&&r(),i.$$.dirty&2&&h()},[m,o,y]}class WA extends xr{constructor(e){super(),Ar(this,e,GA,HA,br,{})}}var XA=8,YA={version:{required:!0,type:"enum",values:[8],doc:"Style specification version number. Must be 8.",example:8},name:{type:"string",doc:"A human-readable name for the style.",example:"Bright"},metadata:{type:"*",doc:"Arbitrary properties useful to track with the stylesheet, but do not influence rendering. Properties should be prefixed to avoid collisions, like 'mapbox:'."},center:{type:"array",value:"number",doc:"Default map center in longitude and latitude.  The style center will be used only if the map has not been positioned by other means (e.g. map options or user interaction).",example:[-73.9749,40.7736]},zoom:{type:"number",doc:"Default zoom level.  The style zoom will be used only if the map has not been positioned by other means (e.g. map options or user interaction).",example:12.5},bearing:{type:"number",default:0,period:360,units:"degrees",doc:'Default bearing, in degrees. The bearing is the compass direction that is "up"; for example, a bearing of 90\xB0 orients the map so that east is up. This value will be used only if the map has not been positioned by other means (e.g. map options or user interaction).',example:29},pitch:{type:"number",default:0,units:"degrees",doc:"Default pitch, in degrees. Zero is perpendicular to the surface, for a look straight down at the map, while a greater value like 60 looks ahead towards the horizon. The style pitch will be used only if the map has not been positioned by other means (e.g. map options or user interaction).",example:50},light:{type:"light",doc:"The global light source.",example:{anchor:"viewport",color:"white",intensity:.4}},terrain:{type:"terrain",doc:"A global modifier that elevates layers and markers based on a DEM data source."},fog:{type:"fog",doc:"A global effect that fades layers and markers based on their distance to the camera. The fog can be used to approximate the effect of atmosphere on distant objects and enhance the depth perception of the map when used with terrain or 3D features. Note: fog is renamed to atmosphere in the Android and iOS SDKs and planned to be changed in GL-JS v.3.0.0."},sources:{required:!0,type:"sources",doc:"Data source specifications.",example:{"mapbox-streets":{type:"vector",url:"mapbox://mapbox.mapbox-streets-v6"}}},sprite:{type:"string",doc:"A base URL for retrieving the sprite image and metadata. The extensions `.png`, `.json` and scale factor `@2x.png` will be automatically appended. This property is required if any layer uses the `background-pattern`, `fill-pattern`, `line-pattern`, `fill-extrusion-pattern`, or `icon-image` properties. The URL must be absolute, containing the [scheme, authority and path components](https://en.wikipedia.org/wiki/URL#Syntax).",example:"mapbox://sprites/mapbox/bright-v8"},glyphs:{type:"string",doc:"A URL template for loading signed-distance-field glyph sets in PBF format. The URL must include `{fontstack}` and `{range}` tokens. This property is required if any layer uses the `text-field` layout property. The URL must be absolute, containing the [scheme, authority and path components](https://en.wikipedia.org/wiki/URL#Syntax).",example:"mapbox://fonts/mapbox/{fontstack}/{range}.pbf"},transition:{type:"transition",doc:"A global transition definition to use as a default across properties, to be used for timing transitions between one value and the next when no property-specific transition is set. Collision-based symbol fading is controlled independently of the style's `transition` property.",example:{duration:300,delay:0}},projection:{type:"projection",doc:"The projection the map should be rendered in. Supported projections are Mercator, Globe, Albers, Equal Earth, Equirectangular (WGS84), Lambert conformal conic, Natural Earth, and Winkel Tripel. Terrain, sky and fog are supported by only Mercator and globe. CustomLayerInterface is not supported outside of Mercator.",example:{name:"albers",center:[-154,50],parallels:[55,65]}},layers:{required:!0,type:"array",value:"layer",doc:"Layers will be drawn in the order of this array.",example:[{id:"water",source:"mapbox-streets","source-layer":"water",type:"fill",paint:{"fill-color":"#00ffff"}}]}},ZA={"*":{type:"source",doc:"Specification of a data source. For vector and raster sources, either TileJSON or a URL to a TileJSON must be provided. For image and video sources, a URL must be provided. For GeoJSON sources, a URL or inline GeoJSON must be provided."}},KA=["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],JA={type:{required:!0,type:"enum",values:{vector:{doc:"A vector tile source."}},doc:"The type of the source."},url:{type:"string",doc:"A URL to a TileJSON resource. Supported protocols are `http:`, `https:`, and `mapbox://<Tileset ID>`."},tiles:{type:"array",value:"string",doc:"An array of one or more tile source URLs, as in the TileJSON spec."},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129],doc:"An array containing the longitude and latitude of the southwest and northeast corners of the source's bounding box in the following order: `[sw.lng, sw.lat, ne.lng, ne.lat]`. When this property is included in a source, no tiles outside of the given bounds are requested by Mapbox GL."},scheme:{type:"enum",values:{xyz:{doc:"Slippy map tilenames scheme."},tms:{doc:"OSGeo spec scheme."}},default:"xyz",doc:"Influences the y direction of the tile coordinates. The global-mercator (aka Spherical Mercator) profile is assumed."},minzoom:{type:"number",default:0,doc:"Minimum zoom level for which tiles are available, as in the TileJSON spec."},maxzoom:{type:"number",default:22,doc:"Maximum zoom level for which tiles are available, as in the TileJSON spec. Data from tiles at the maxzoom are used when displaying the map at higher zoom levels."},attribution:{type:"string",doc:"Contains an attribution to be displayed when the map is shown to a user."},promoteId:{type:"promoteId",doc:"A property to use as a feature id (for feature state). Either a property name, or an object of the form `{<sourceLayer>: <propertyName>}`. If specified as a string for a vector tile source, the same property is used across all its source layers."},volatile:{type:"boolean",default:!1,doc:"A setting to determine whether a source's tiles are cached locally.","sdk-support":{"basic functionality":{android:"9.3.0",ios:"5.10.0"}}},"*":{type:"*",doc:"Other keys to configure the data source."}},QA={type:{required:!0,type:"enum",values:{raster:{doc:"A raster tile source."}},doc:"The type of the source."},url:{type:"string",doc:"A URL to a TileJSON resource. Supported protocols are `http:`, `https:`, and `mapbox://<Tileset ID>`."},tiles:{type:"array",value:"string",doc:"An array of one or more tile source URLs, as in the TileJSON spec."},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129],doc:"An array containing the longitude and latitude of the southwest and northeast corners of the source's bounding box in the following order: `[sw.lng, sw.lat, ne.lng, ne.lat]`. When this property is included in a source, no tiles outside of the given bounds are requested by Mapbox GL."},minzoom:{type:"number",default:0,doc:"Minimum zoom level for which tiles are available, as in the TileJSON spec."},maxzoom:{type:"number",default:22,doc:"Maximum zoom level for which tiles are available, as in the TileJSON spec. Data from tiles at the maxzoom are used when displaying the map at higher zoom levels."},tileSize:{type:"number",default:512,units:"pixels",doc:"The minimum visual size to display tiles for this layer. Only configurable for raster layers."},scheme:{type:"enum",values:{xyz:{doc:"Slippy map tilenames scheme."},tms:{doc:"OSGeo spec scheme."}},default:"xyz",doc:"Influences the y direction of the tile coordinates. The global-mercator (aka Spherical Mercator) profile is assumed."},attribution:{type:"string",doc:"Contains an attribution to be displayed when the map is shown to a user."},volatile:{type:"boolean",default:!1,doc:"A setting to determine whether a source's tiles are cached locally.","sdk-support":{"basic functionality":{android:"9.3.0",ios:"5.10.0"}}},"*":{type:"*",doc:"Other keys to configure the data source."}},$A={type:{required:!0,type:"enum",values:{"raster-dem":{doc:"A RGB-encoded raster DEM source"}},doc:"The type of the source."},url:{type:"string",doc:"A URL to a TileJSON resource. Supported protocols are `http:`, `https:`, and `mapbox://<Tileset ID>`."},tiles:{type:"array",value:"string",doc:"An array of one or more tile source URLs, as in the TileJSON spec."},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129],doc:"An array containing the longitude and latitude of the southwest and northeast corners of the source's bounding box in the following order: `[sw.lng, sw.lat, ne.lng, ne.lat]`. When this property is included in a source, no tiles outside of the given bounds are requested by Mapbox GL."},minzoom:{type:"number",default:0,doc:"Minimum zoom level for which tiles are available, as in the TileJSON spec."},maxzoom:{type:"number",default:22,doc:"Maximum zoom level for which tiles are available, as in the TileJSON spec. Data from tiles at the maxzoom are used when displaying the map at higher zoom levels."},tileSize:{type:"number",default:512,units:"pixels",doc:"The minimum visual size to display tiles for this layer. Only configurable for raster layers."},attribution:{type:"string",doc:"Contains an attribution to be displayed when the map is shown to a user."},encoding:{type:"enum",values:{terrarium:{doc:"Terrarium format PNG tiles. See https://aws.amazon.com/es/public-datasets/terrain/ for more info."},mapbox:{doc:"Mapbox Terrain RGB tiles. See https://www.mapbox.com/help/access-elevation-data/#mapbox-terrain-rgb for more info."}},default:"mapbox",doc:"The encoding used by this source. Mapbox Terrain RGB is used by default"},volatile:{type:"boolean",default:!1,doc:"A setting to determine whether a source's tiles are cached locally.","sdk-support":{"basic functionality":{android:"9.3.0",ios:"5.10.0"}}},"*":{type:"*",doc:"Other keys to configure the data source."}},ek={type:{required:!0,type:"enum",values:{geojson:{doc:"A GeoJSON data source."}},doc:"The data type of the GeoJSON source."},data:{type:"*",doc:"A URL to a GeoJSON file, or inline GeoJSON."},maxzoom:{type:"number",default:18,doc:"Maximum zoom level at which to create vector tiles (higher means greater detail at high zoom levels)."},attribution:{type:"string",doc:"Contains an attribution to be displayed when the map is shown to a user."},buffer:{type:"number",default:128,maximum:512,minimum:0,doc:"Size of the tile buffer on each side. A value of 0 produces no buffer. A value of 512 produces a buffer as wide as the tile itself. Larger values produce fewer rendering artifacts near tile edges and slower performance."},filter:{type:"*",doc:"An expression for filtering features prior to processing them for rendering."},tolerance:{type:"number",default:.375,doc:"Douglas-Peucker simplification tolerance (higher means simpler geometries and faster performance)."},cluster:{type:"boolean",default:!1,doc:"If the data is a collection of point features, setting this to true clusters the points by radius into groups. Cluster groups become new `Point` features in the source with additional properties:\n * `cluster` Is `true` if the point is a cluster \n * `cluster_id` A unqiue id for the cluster to be used in conjunction with the [cluster inspection methods](https://www.mapbox.com/mapbox-gl-js/api/#geojsonsource#getclusterexpansionzoom)\n * `point_count` Number of original points grouped into this cluster\n * `point_count_abbreviated` An abbreviated point count"},clusterRadius:{type:"number",default:50,minimum:0,doc:"Radius of each cluster if clustering is enabled. A value of 512 indicates a radius equal to the width of a tile."},clusterMaxZoom:{type:"number",doc:"Max zoom on which to cluster points if clustering is enabled. Defaults to one zoom less than maxzoom (so that last zoom features are not clustered). Clusters are re-evaluated at integer zoom levels so setting clusterMaxZoom to 14 means the clusters will be displayed until z15."},clusterMinPoints:{type:"number",doc:"Minimum number of points necessary to form a cluster if clustering is enabled. Defaults to `2`."},clusterProperties:{type:"*",doc:'An object defining custom properties on the generated clusters if clustering is enabled, aggregating values from clustered points. Has the form `{"property_name": [operator, map_expression]}`. `operator` is any expression function that accepts at least 2 operands (e.g. `"+"` or `"max"`) \u2014 it accumulates the property value from clusters/points the cluster contains; `map_expression` produces the value of a single point.\n\nExample: `{"sum": ["+", ["get", "scalerank"]]}`.\n\nFor more advanced use cases, in place of `operator`, you can use a custom reduce expression that references a special `["accumulated"]` value, e.g.:\n`{"sum": [["+", ["accumulated"], ["get", "sum"]], ["get", "scalerank"]]}`'},lineMetrics:{type:"boolean",default:!1,doc:"Whether to calculate line distance metrics. This is required for line layers that specify `line-gradient` values."},generateId:{type:"boolean",default:!1,doc:"Whether to generate ids for the geojson features. When enabled, the `feature.id` property will be auto assigned based on its index in the `features` array, over-writing any previous values."},promoteId:{type:"promoteId",doc:"A property to use as a feature id (for feature state). Either a property name, or an object of the form `{<sourceLayer>: <propertyName>}`."}},tk={type:{required:!0,type:"enum",values:{video:{doc:"A video data source."}},doc:"The data type of the video source."},urls:{required:!0,type:"array",value:"string",doc:"URLs to video content in order of preferred format."},coordinates:{required:!0,doc:"Corners of video specified in longitude, latitude pairs.",type:"array",length:4,value:{type:"array",length:2,value:"number",doc:"A single longitude, latitude pair."}}},ik={type:{required:!0,type:"enum",values:{image:{doc:"An image data source."}},doc:"The data type of the image source."},url:{required:!0,type:"string",doc:"URL that points to an image."},coordinates:{required:!0,doc:"Corners of image specified in longitude, latitude pairs.",type:"array",length:4,value:{type:"array",length:2,value:"number",doc:"A single longitude, latitude pair."}}},nk={id:{type:"string",doc:"Unique layer name.",required:!0},type:{type:"enum",values:{fill:{doc:"A filled polygon with an optional stroked border.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}}},line:{doc:"A stroked line.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}}},symbol:{doc:"An icon or a text label.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}}},circle:{doc:"A filled circle.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}}},heatmap:{doc:"A heatmap.","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"fill-extrusion":{doc:"An extruded (3D) polygon.","sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}}},raster:{doc:"Raster map textures such as satellite imagery.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}}},hillshade:{doc:"Client-side hillshading visualization based on DEM data. Currently, the implementation only supports Mapbox Terrain RGB and Mapzen Terrarium tiles.","sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},background:{doc:"The background color or pattern of the map.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}}},sky:{doc:"A spherical dome around the map that is always rendered behind all other layers.","sdk-support":{"basic functionality":{js:"2.0.0",ios:"10.0.0",android:"10.0.0"}}}},doc:"Rendering type of this layer.",required:!0},metadata:{type:"*",doc:"Arbitrary properties useful to track with the layer, but do not influence rendering. Properties should be prefixed to avoid collisions, like 'mapbox:'."},source:{type:"string",doc:"Name of a source description to be used for this layer. Required for all layer types except `background`."},"source-layer":{type:"string",doc:"Layer to use from a vector tile source. Required for vector tile sources; prohibited for all other source types, including GeoJSON sources."},minzoom:{type:"number",minimum:0,maximum:24,doc:"The minimum zoom level for the layer. At zoom levels less than the minzoom, the layer will be hidden."},maxzoom:{type:"number",minimum:0,maximum:24,doc:"The maximum zoom level for the layer. At zoom levels equal to or greater than the maxzoom, the layer will be hidden."},filter:{type:"filter",doc:'An expression specifying conditions on source features. Only features that match the filter are displayed. Zoom expressions in filters are only evaluated at integer zoom levels. The `["feature-state", ...]` expression is not supported in filter expressions.  The `["pitch"]` and `["distance-from-center"]` expressions are supported only for filter expressions on the symbol layer.'},layout:{type:"layout",doc:"Layout properties for the layer."},paint:{type:"paint",doc:"Default paint properties for this layer."}},rk=["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background","layout_sky"],ok={visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},"property-type":"constant"}},sk={visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"2.0.0",ios:"10.0.0",android:"10.0.0"}},"property-type":"constant"}},ak={"fill-sort-key":{type:"number",doc:"Sorts features in ascending order based on this value. Features with a higher sort key will appear above features with a lower sort key.","sdk-support":{"basic functionality":{js:"1.2.0",android:"9.1.0",ios:"5.8.0",macos:"0.15.0"},"data-driven styling":{js:"1.2.0",android:"9.1.0",ios:"5.8.0",macos:"0.15.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},"property-type":"constant"}},lk={"circle-sort-key":{type:"number",doc:"Sorts features in ascending order based on this value. Features with a higher sort key will appear above features with a lower sort key.","sdk-support":{"basic functionality":{js:"1.2.0",android:"9.2.0",ios:"5.9.0",macos:"0.16.0"},"data-driven styling":{js:"1.2.0",android:"9.2.0",ios:"5.9.0",macos:"0.16.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},"property-type":"constant"}},uk={visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},"property-type":"constant"}},ck={"line-cap":{type:"enum",values:{butt:{doc:"A cap with a squared-off end which is drawn to the exact endpoint of the line."},round:{doc:"A cap with a rounded end which is drawn beyond the endpoint of the line at a radius of one-half of the line's width and centered on the endpoint of the line."},square:{doc:"A cap with a squared-off end which is drawn beyond the endpoint of the line at a distance of one-half of the line's width."}},default:"butt",doc:"The display of line endings.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"2.3.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-join":{type:"enum",values:{bevel:{doc:"A join with a squared-off end which is drawn beyond the endpoint of the line at a distance of one-half of the line's width."},round:{doc:"A join with a rounded end which is drawn beyond the endpoint of the line at a radius of one-half of the line's width and centered on the endpoint of the line."},miter:{doc:"A join with a sharp, angled corner which is drawn with the outer sides beyond the endpoint of the path until they meet."}},default:"miter",doc:"The display of lines when joining.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.40.0",android:"5.2.0",ios:"3.7.0",macos:"0.6.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,doc:"Used to automatically convert miter joins to bevel joins for sharp angles.",requires:[{"line-join":"miter"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,doc:"Used to automatically convert round joins to miter joins for shallow angles.",requires:[{"line-join":"round"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",doc:"Sorts features in ascending order based on this value. Features with a higher sort key will appear above features with a lower sort key.","sdk-support":{"basic functionality":{js:"1.2.0",android:"9.1.0",ios:"5.8.0",macos:"0.15.0"},"data-driven styling":{js:"1.2.0",android:"9.1.0",ios:"5.8.0",macos:"0.15.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},"property-type":"constant"}},hk={"symbol-placement":{type:"enum",values:{point:{doc:"The label is placed at the point where the geometry is located."},line:{doc:"The label is placed along the line of the geometry. Can only be used on `LineString` and `Polygon` geometries."},"line-center":{doc:"The label is placed at the center of the line of the geometry. Can only be used on `LineString` and `Polygon` geometries. Note that a single feature in a vector tile may contain multiple line geometries."}},default:"point",doc:"Label placement relative to its geometry.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"`line-center` value":{js:"0.47.0",android:"6.4.0",ios:"4.3.0",macos:"0.10.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",doc:"Distance between two symbol anchors.",requires:[{"symbol-placement":"line"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,doc:"If true, the symbols will not cross tile edges to avoid mutual collisions. Recommended in layers that don't have enough padding in the vector tile to prevent collisions, or if it is a point symbol layer placed after a line symbol layer. When using a client that supports global collision detection, like Mapbox GL JS version 0.42.0 or greater, enabling this property is not needed to prevent clipped labels at tile boundaries.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",doc:"Sorts features in ascending order based on this value. Features with lower sort keys are drawn and placed first.  When `icon-allow-overlap` or `text-allow-overlap` is `false`, features with a lower sort key will have priority during placement. When `icon-allow-overlap` or `text-allow-overlap` is set to `true`, features with a higher sort key will overlap over features with a lower sort key.","sdk-support":{"basic functionality":{js:"0.53.0",android:"7.4.0",ios:"4.11.0",macos:"0.14.0"},"data-driven styling":{js:"0.53.0",android:"7.4.0",ios:"4.11.0",macos:"0.14.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{doc:"Sorts symbols by `symbol-sort-key` if set. Otherwise, sorts symbols by their y-position relative to the viewport if `icon-allow-overlap` or `text-allow-overlap` is set to `true` or `icon-ignore-placement` or `text-ignore-placement` is `false`."},"viewport-y":{doc:"Sorts symbols by their y-position relative to the viewport if `icon-allow-overlap` or `text-allow-overlap` is set to `true` or `icon-ignore-placement` or `text-ignore-placement` is `false`."},source:{doc:"Sorts symbols by `symbol-sort-key` if set. Otherwise, no sorting is applied; symbols are rendered in the same order as the source data."}},default:"auto",doc:"Determines whether overlapping symbols in the same layer are rendered in the order that they appear in the data source or by their y-position relative to the viewport. To control the order and prioritization of symbols otherwise, use `symbol-sort-key`.","sdk-support":{"basic functionality":{js:"0.49.0",android:"6.6.0",ios:"4.5.0",macos:"0.12.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,doc:"If true, the icon will be visible even if it collides with other previously drawn symbols.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,doc:"If true, other symbols can be visible even if they collide with the icon.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,doc:"If true, text will display without their corresponding icons when the icon collides with other symbols and the text does not.",requires:["icon-image","text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{doc:"When `symbol-placement` is set to `point`, aligns icons east-west. When `symbol-placement` is set to `line` or `line-center`, aligns icon x-axes with the line."},viewport:{doc:"Produces icons whose x-axes are aligned with the x-axis of the viewport, regardless of the value of `symbol-placement`."},auto:{doc:"When `symbol-placement` is set to `point`, this is equivalent to `viewport`. When `symbol-placement` is set to `line` or `line-center`, this is equivalent to `map`."}},default:"auto",doc:"In combination with `symbol-placement`, determines the rotation behavior of icons.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"`auto` value":{js:"0.25.0",android:"4.2.0",ios:"3.4.0",macos:"0.3.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",doc:"Scales the original size of the icon by the provided factor. The new pixel size of the image will be the original pixel size multiplied by `icon-size`. 1 is the original size; 3 triples the size of the image.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.35.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{doc:"The icon is displayed at its intrinsic aspect ratio."},width:{doc:"The icon is scaled in the x-dimension to fit the width of the text."},height:{doc:"The icon is scaled in the y-dimension to fit the height of the text."},both:{doc:"The icon is scaled in both x- and y-dimensions."}},default:"none",doc:"Scales the icon to fit around the associated text.",requires:["icon-image","text-field"],"sdk-support":{"basic functionality":{js:"0.21.0",android:"4.2.0",ios:"3.4.0",macos:"0.2.1"},"stretchable icons":{js:"1.6.0",android:"9.2.0",ios:"5.8.0",macos:"0.15.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",doc:"Size of the additional area added to dimensions determined by `icon-text-fit`, in clockwise order: top, right, bottom, left.",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],"sdk-support":{"basic functionality":{js:"0.21.0",android:"4.2.0",ios:"3.4.0",macos:"0.2.1"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",doc:"Name of image in sprite to use for drawing an image background.",tokens:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.35.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",doc:"Rotates the icon clockwise.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.21.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"number",default:2,minimum:0,units:"pixels",doc:"Size of the additional area around the icon bounding box used for detecting symbol collisions.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{type:"boolean",default:!1,doc:"If true, the icon may be flipped to prevent it from being rendered upside-down.",requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],doc:"Offset distance of icon from its anchor. Positive values indicate right and down, while negative values indicate left and up. Each component is multiplied by the value of `icon-size` to obtain the final offset in pixels. When combined with `icon-rotate` the offset will be as if the rotated direction was up.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.29.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{doc:"The center of the icon is placed closest to the anchor."},left:{doc:"The left side of the icon is placed closest to the anchor."},right:{doc:"The right side of the icon is placed closest to the anchor."},top:{doc:"The top of the icon is placed closest to the anchor."},bottom:{doc:"The bottom of the icon is placed closest to the anchor."},"top-left":{doc:"The top left corner of the icon is placed closest to the anchor."},"top-right":{doc:"The top right corner of the icon is placed closest to the anchor."},"bottom-left":{doc:"The bottom left corner of the icon is placed closest to the anchor."},"bottom-right":{doc:"The bottom right corner of the icon is placed closest to the anchor."}},default:"center",doc:"Part of the icon placed closest to the anchor.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.40.0",android:"5.2.0",ios:"3.7.0",macos:"0.6.0"},"data-driven styling":{js:"0.40.0",android:"5.2.0",ios:"3.7.0",macos:"0.6.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{doc:"The icon is aligned to the plane of the map."},viewport:{doc:"The icon is aligned to the plane of the viewport."},auto:{doc:"Automatically matches the value of `icon-rotation-alignment`."}},default:"auto",doc:"Orientation of icon when map is pitched.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.39.0",android:"5.2.0",ios:"3.7.0",macos:"0.6.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{doc:"The text is aligned to the plane of the map."},viewport:{doc:"The text is aligned to the plane of the viewport."},auto:{doc:"Automatically matches the value of `text-rotation-alignment`."}},default:"auto",doc:"Orientation of text when map is pitched.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.21.0",android:"4.2.0",ios:"3.4.0",macos:"0.2.1"},"`auto` value":{js:"0.25.0",android:"4.2.0",ios:"3.4.0",macos:"0.3.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{doc:"When `symbol-placement` is set to `point`, aligns text east-west. When `symbol-placement` is set to `line` or `line-center`, aligns text x-axes with the line."},viewport:{doc:"Produces glyphs whose x-axes are aligned with the x-axis of the viewport, regardless of the value of `symbol-placement`."},auto:{doc:"When `symbol-placement` is set to `point`, this is equivalent to `viewport`. When `symbol-placement` is set to `line` or `line-center`, this is equivalent to `map`."}},default:"auto",doc:"In combination with `symbol-placement`, determines the rotation behavior of the individual glyphs forming the text.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"`auto` value":{js:"0.25.0",android:"4.2.0",ios:"3.4.0",macos:"0.3.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,doc:"Value to use for a text label. If a plain `string` is provided, it will be treated as a `formatted` with default/inherited formatting options. SDF images are not supported in formatted text and will be ignored.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],doc:"Font stack to use for displaying text.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.43.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",doc:"Font size.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.35.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",doc:"The maximum line width for text wrapping.",requires:["text-field",{"symbol-placement":["point"]}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.40.0",android:"5.2.0",ios:"3.7.0",macos:"0.6.0"}},expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",doc:"Text leading value for multi-line text.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"2.3.0"}},expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-letter-spacing":{type:"number",default:0,units:"ems",doc:"Text tracking amount.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.40.0",android:"5.2.0",ios:"3.7.0",macos:"0.6.0"}},expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{doc:"The text is aligned towards the anchor position."},left:{doc:"The text is aligned to the left."},center:{doc:"The text is centered."},right:{doc:"The text is aligned to the right."}},default:"center",doc:"Text justification options.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.39.0",android:"5.2.0",ios:"3.7.0",macos:"0.6.0"},auto:{js:"0.54.0",android:"7.4.0",ios:"4.10.0",macos:"0.14.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,doc:"Radial offset of text, in the direction of the symbol's anchor. Useful in combination with `text-variable-anchor`, which defaults to using the two-dimensional `text-offset` if present.","sdk-support":{"basic functionality":{js:"0.54.0",android:"7.4.0",ios:"4.10.0",macos:"0.14.0"},"data-driven styling":{js:"0.54.0",android:"7.4.0",ios:"4.10.0",macos:"0.14.0"}},requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{doc:"The center of the text is placed closest to the anchor."},left:{doc:"The left side of the text is placed closest to the anchor."},right:{doc:"The right side of the text is placed closest to the anchor."},top:{doc:"The top of the text is placed closest to the anchor."},bottom:{doc:"The bottom of the text is placed closest to the anchor."},"top-left":{doc:"The top left corner of the text is placed closest to the anchor."},"top-right":{doc:"The top right corner of the text is placed closest to the anchor."},"bottom-left":{doc:"The bottom left corner of the text is placed closest to the anchor."},"bottom-right":{doc:"The bottom right corner of the text is placed closest to the anchor."}},requires:["text-field",{"symbol-placement":["point"]}],doc:"To increase the chance of placing high-priority labels on the map, you can provide an array of `text-anchor` locations: the renderer will attempt to place the label at each location, in order, before moving onto the next label. Use `text-justify: auto` to choose justification based on anchor position. To apply an offset, use the `text-radial-offset` or the two-dimensional `text-offset`.","sdk-support":{"basic functionality":{js:"0.54.0",android:"7.4.0",ios:"4.10.0",macos:"0.14.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{doc:"The center of the text is placed closest to the anchor."},left:{doc:"The left side of the text is placed closest to the anchor."},right:{doc:"The right side of the text is placed closest to the anchor."},top:{doc:"The top of the text is placed closest to the anchor."},bottom:{doc:"The bottom of the text is placed closest to the anchor."},"top-left":{doc:"The top left corner of the text is placed closest to the anchor."},"top-right":{doc:"The top right corner of the text is placed closest to the anchor."},"bottom-left":{doc:"The bottom left corner of the text is placed closest to the anchor."},"bottom-right":{doc:"The bottom right corner of the text is placed closest to the anchor."}},default:"center",doc:"Part of the text placed closest to the anchor.",requires:["text-field",{"!":"text-variable-anchor"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.39.0",android:"5.2.0",ios:"3.7.0",macos:"0.6.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",doc:"Maximum angle change between adjacent characters.",requires:["text-field",{"symbol-placement":["line","line-center"]}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{doc:"If a text's language supports horizontal writing mode, symbols would be laid out horizontally."},vertical:{doc:"If a text's language supports vertical writing mode, symbols would be laid out vertically."}},doc:"The property allows control over a symbol's orientation. Note that the property values act as a hint, so that a symbol whose language doesn\u2019t support the provided orientation will be laid out in its natural orientation. Example: English point symbol will be rendered horizontally even if array value contains single 'vertical' enum value. For symbol with point placement, the order of elements in an array define priority order for the placement of an orientation variant. For symbol with line placement, the default text writing mode is either ['horizontal', 'vertical'] or ['vertical', 'horizontal'], the order doesn't affect the placement.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"1.3.0",android:"8.3.0",ios:"5.3.0",macos:"0.15.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",doc:"Rotates the text clockwise.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.35.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",doc:"Size of the additional area around the text bounding box used for detecting symbol collisions.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,doc:"If true, the text may be flipped vertically to prevent it from being rendered upside-down.",requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{doc:"The text is not altered."},uppercase:{doc:"Forces all letters to be displayed in uppercase."},lowercase:{doc:"Forces all letters to be displayed in lowercase."}},default:"none",doc:"Specifies how to capitalize text, similar to the CSS `text-transform` property.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",doc:"Offset distance of text from its anchor. Positive values indicate right and down, while negative values indicate left and up. If used with text-variable-anchor, input values will be taken as absolute values. Offsets along the x- and y-axis will be applied automatically based on the anchor position.",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.35.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,doc:"If true, the text will be visible even if it collides with other previously drawn symbols.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,doc:"If true, other symbols can be visible even if they collide with the text.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,doc:"If true, icons will display without their corresponding text when the text collides with other symbols and the icon does not.",requires:["text-field","icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},"property-type":"constant"}},fk={visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},"property-type":"constant"}},dk={visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},"property-type":"constant"}},pk={type:"array",value:"*",doc:"A filter selects specific features from a layer."},mk={type:"boolean",doc:'Expression which determines whether or not to display a symbol. Symbols support dynamic filtering, meaning this expression can use the `["pitch"]` and `["distance-from-center"]` expressions to reference the current state of the view.',default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature","pitch","distance-from-center"]}},gk={type:"boolean",doc:'Expression which determines whether or not to display a polygon. Fill layer does NOT support dynamic filtering, meaning this expression can NOT use the `["pitch"]` and `["distance-from-center"]` expressions to reference the current state of the view.',default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}},yk={type:"boolean",doc:'Expression which determines whether or not to display a Polygon or LineString. Line layer does NOT support dynamic filtering, meaning this expression can NOT use the `["pitch"]` and `["distance-from-center"]` expressions to reference the current state of the view.',default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}},_k={type:"boolean",doc:'Expression which determines whether or not to display a circle. Circle layer does NOT support dynamic filtering, meaning this expression can NOT use the `["pitch"]` and `["distance-from-center"]` expressions to reference the current state of the view.',default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}},vk={type:"boolean",doc:'Expression used to determine whether a point is being displayed or not. Heatmap layer does NOT support dynamic filtering, meaning this expression can NOT use the `["pitch"]` and `["distance-from-center"]` expressions to reference the current state of the view.',default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}},bk={type:"enum",values:{"==":{doc:'`["==", key, value]` equality: `feature[key] = value`'},"!=":{doc:'`["!=", key, value]` inequality: `feature[key] \u2260 value`'},">":{doc:'`[">", key, value]` greater than: `feature[key] > value`'},">=":{doc:'`[">=", key, value]` greater than or equal: `feature[key] \u2265 value`'},"<":{doc:'`["<", key, value]` less than: `feature[key] < value`'},"<=":{doc:'`["<=", key, value]` less than or equal: `feature[key] \u2264 value`'},in:{doc:'`["in", key, v0, ..., vn]` set inclusion: `feature[key] \u2208 {v0, ..., vn}`'},"!in":{doc:'`["!in", key, v0, ..., vn]` set exclusion: `feature[key] \u2209 {v0, ..., vn}`'},all:{doc:'`["all", f0, ..., fn]` logical `AND`: `f0 \u2227 ... \u2227 fn`'},any:{doc:'`["any", f0, ..., fn]` logical `OR`: `f0 \u2228 ... \u2228 fn`'},none:{doc:'`["none", f0, ..., fn]` logical `NOR`: `\xACf0 \u2227 ... \u2227 \xACfn`'},has:{doc:'`["has", key]` `feature[key]` exists'},"!has":{doc:'`["!has", key]` `feature[key]` does not exist'},within:{doc:'`["within", object]` feature geometry is within object geometry'}},doc:"The filter operator."},wk={type:"enum",values:{Point:{doc:"Filter to point geometries."},LineString:{doc:"Filter to line geometries."},Polygon:{doc:"Filter to polygon geometries."}},doc:"The geometry type for the filter to select."},xk={type:"array",minimum:0,maximum:24,value:["number","color"],length:2,doc:"Zoom level and value pair."},Ak={type:"array",value:"*",minimum:1,doc:"An expression defines a function that can be used for data-driven style properties or feature filters."},kk={doc:"",type:"enum",values:{let:{doc:'Binds expressions to named variables, which can then be referenced in the result expression using ["var", "variable_name"].',group:"Variable binding","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},var:{doc:'References variable bound using "let".',group:"Variable binding","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},literal:{doc:"Provides a literal array or object value.",group:"Types","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},array:{doc:"Asserts that the input is an array (optionally with a specific item type and length).  If, when the input expression is evaluated, it is not of the asserted type, then this assertion will cause the whole expression to be aborted.",group:"Types","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},at:{doc:"Retrieves an item from an array.",group:"Lookup","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},in:{doc:"Determines whether an item exists in an array or a substring exists in a string. In the specific case when the second and third arguments are string literals, you must wrap at least one of them in a [`literal`](#types-literal) expression to hint correct interpretation to the [type system](#type-system).",group:"Lookup","sdk-support":{"basic functionality":{js:"1.6.0",android:"9.1.0",ios:"5.8.0",macos:"0.15.0"}}},"index-of":{doc:"Returns the first position at which an item can be found in an array or a substring can be found in a string, or `-1` if the input cannot be found. Accepts an optional index from where to begin the search.",group:"Lookup","sdk-support":{"basic functionality":{js:"1.10.0"}}},slice:{doc:"Returns an item from an array or a substring from a string from a specified start index, or between a start index and an end index if set. The return value is inclusive of the start index but not of the end index.",group:"Lookup","sdk-support":{"basic functionality":{js:"1.10.0"}}},case:{doc:"Selects the first output whose corresponding test condition evaluates to true, or the fallback value otherwise.",group:"Decision","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},match:{doc:'Selects the output for which the label value matches the input value, or the fallback value if no match is found. The input can be any expression (for example, `["get", "building_type"]`). Each label must be unique, and must be either:\n - a single literal value; or\n - an array of literal values, the values of which must be all strings or all numbers (for example `[100, 101]` or `["c", "b"]`).\n\nThe input matches if any of the values in the array matches using strict equality, similar to the `"in"` operator.\nIf the input type does not match the type of the labels, the result will be the fallback value.',group:"Decision","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},coalesce:{doc:"Evaluates each expression in turn until the first valid value is obtained. Invalid values are `null` and [`'image'`](#types-image) expressions that are unavailable in the style. If all values are invalid, `coalesce` returns the first value listed.",group:"Decision","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},step:{doc:'Produces discrete, stepped results by evaluating a piecewise-constant function defined by pairs of input and output values ("stops"). The `input` may be any numeric expression (e.g., `["get", "population"]`). Stop inputs must be numeric literals in strictly ascending order. Returns the output value of the stop just less than the input, or the first output if the input is less than the first stop.',group:"Ramps, scales, curves","sdk-support":{"basic functionality":{js:"0.42.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},interpolate:{doc:'Produces continuous, smooth results by interpolating between pairs of input and output values ("stops"). The `input` may be any numeric expression (e.g., `["get", "population"]`). Stop inputs must be numeric literals in strictly ascending order. The output type must be `number`, `array<number>`, or `color`.\n\nInterpolation types:\n- `["linear"]`: Interpolates linearly between the pair of stops just less than and just greater than the input.\n- `["exponential", base]`: Interpolates exponentially between the stops just less than and just greater than the input. `base` controls the rate at which the output increases: higher values make the output increase more towards the high end of the range. With values close to 1 the output increases linearly.\n- `["cubic-bezier", x1, y1, x2, y2]`: Interpolates using the cubic bezier curve defined by the given control points.',group:"Ramps, scales, curves","sdk-support":{"basic functionality":{js:"0.42.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"interpolate-hcl":{doc:'Produces continuous, smooth results by interpolating between pairs of input and output values ("stops"). Works like `interpolate`, but the output type must be `color`, and the interpolation is performed in the Hue-Chroma-Luminance color space.',group:"Ramps, scales, curves","sdk-support":{"basic functionality":{js:"0.49.0"}}},"interpolate-lab":{doc:'Produces continuous, smooth results by interpolating between pairs of input and output values ("stops"). Works like `interpolate`, but the output type must be `color`, and the interpolation is performed in the CIELAB color space.',group:"Ramps, scales, curves","sdk-support":{"basic functionality":{js:"0.49.0"}}},ln2:{doc:"Returns mathematical constant ln(2).",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},pi:{doc:"Returns the mathematical constant pi.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},e:{doc:"Returns the mathematical constant e.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},typeof:{doc:"Returns a string describing the type of the given value.",group:"Types","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},string:{doc:"Asserts that the input value is a string. If multiple values are provided, each one is evaluated in order until a string is obtained. If none of the inputs are strings, the expression is an error.",group:"Types","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},number:{doc:"Asserts that the input value is a number. If multiple values are provided, each one is evaluated in order until a number is obtained. If none of the inputs are numbers, the expression is an error.",group:"Types","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},boolean:{doc:"Asserts that the input value is a boolean. If multiple values are provided, each one is evaluated in order until a boolean is obtained. If none of the inputs are booleans, the expression is an error.",group:"Types","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},object:{doc:"Asserts that the input value is an object. If multiple values are provided, each one is evaluated in order until an object is obtained. If none of the inputs are objects, the expression is an error.",group:"Types","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},collator:{doc:"Returns a `collator` for use in locale-dependent comparison operations. The `case-sensitive` and `diacritic-sensitive` options default to `false`. The `locale` argument specifies the IETF language tag of the locale to use. If none is provided, the default locale is used. If the requested locale is not available, the `collator` will use a system-defined fallback locale. Use `resolved-locale` to test the results of locale fallback behavior.",group:"Types","sdk-support":{"basic functionality":{js:"0.45.0",android:"6.5.0",ios:"4.2.0",macos:"0.9.0"}}},format:{doc:'Returns a `formatted` string for displaying mixed-format text in the `text-field` property. The input may contain a string literal or expression, including an [`\'image\'`](#types-image) expression. Strings may be followed by a style override object that supports the following properties:\n- `"text-font"`: Overrides the font stack specified by the root layout property.\n- `"text-color"`: Overrides the color specified by the root paint property.\n- `"font-scale"`: Applies a scaling factor on `text-size` as specified by the root layout property.',group:"Types","sdk-support":{"basic functionality":{js:"0.48.0",android:"6.7.0",ios:"4.6.0",macos:"0.12.0"},"text-font":{js:"0.48.0",android:"6.7.0",ios:"4.6.0",macos:"0.12.0"},"font-scale":{js:"0.48.0",android:"6.7.0",ios:"4.6.0",macos:"0.12.0"},"text-color":{js:"1.3.0",android:"7.3.0",ios:"4.10.0",macos:"0.14.0"},image:{js:"1.6.0",android:"8.6.0",ios:"5.7.0",macos:"0.15.0"}}},image:{doc:"Returns a [`ResolvedImage`](/mapbox-gl-js/style-spec/types/#resolvedimage) for use in [`icon-image`](/mapbox-gl-js/style-spec/layers/#layout-symbol-icon-image), `*-pattern` entries, and as a section in the [`'format'`](#types-format) expression. A [`'coalesce'`](#coalesce) expression containing `image` expressions will evaluate to the first listed image that is currently in the style. This validation process is synchronous and requires the image to have been added to the style before requesting it in the `'image'` argument.",group:"Types","sdk-support":{"basic functionality":{js:"1.4.0",android:"8.6.0",ios:"5.7.0",macos:"0.15.0"}}},"number-format":{doc:"Converts the input number into a string representation using the providing formatting rules. If set, the `locale` argument specifies the locale to use, as a BCP 47 language tag. If set, the `currency` argument specifies an ISO 4217 code to use for currency-style formatting. If set, the `unit` argument specifies a [simple ECMAScript unit](https://tc39.es/proposal-unified-intl-numberformat/section6/locales-currencies-tz_proposed_out.html#sec-issanctionedsimpleunitidentifier) to use for unit-style formatting. If set, the `min-fraction-digits` and `max-fraction-digits` arguments specify the minimum and maximum number of fractional digits to include.",group:"Types","sdk-support":{"basic functionality":{js:"0.54.0",android:"8.4.0",ios:"5.4.0",macos:"0.15.0"}}},"to-string":{doc:'Converts the input value to a string. If the input is `null`, the result is `""`. If the input is a [`boolean`](#types-boolean), the result is `"true"` or `"false"`. If the input is a number, it is converted to a string as specified by the ["NumberToString" algorithm](https://tc39.github.io/ecma262/#sec-tostring-applied-to-the-number-type) of the ECMAScript Language Specification. If the input is a [`color`](#color), it is converted to a string of the form `"rgba(r,g,b,a)"`, where `r`, `g`, and `b` are numerals ranging from 0 to 255, and `a` ranges from 0 to 1. If the input is an [`\'image\'`](#types-image) expression, `\'to-string\'` returns the image name. Otherwise, the input is converted to a string in the format specified by the [`JSON.stringify`](https://tc39.github.io/ecma262/#sec-json.stringify) function of the ECMAScript Language Specification.',group:"Types","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"to-number":{doc:'Converts the input value to a number, if possible. If the input is `null` or `false`, the result is 0. If the input is `true`, the result is 1. If the input is a string, it is converted to a number as specified by the ["ToNumber Applied to the String Type" algorithm](https://tc39.github.io/ecma262/#sec-tonumber-applied-to-the-string-type) of the ECMAScript Language Specification. If multiple values are provided, each one is evaluated in order until the first successful conversion is obtained. If none of the inputs can be converted, the expression is an error.',group:"Types","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"to-boolean":{doc:"Converts the input value to a boolean. The result is `false` when then input is an empty string, 0, `false`, `null`, or `NaN`; otherwise it is `true`.",group:"Types","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"to-rgba":{doc:"Returns a four-element array containing the input color's red, green, blue, and alpha components, in that order.",group:"Color","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"to-color":{doc:"Converts the input value to a color. If multiple values are provided, each one is evaluated in order until the first successful conversion is obtained. If none of the inputs can be converted, the expression is an error.",group:"Types","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},rgb:{doc:"Creates a color value from red, green, and blue components, which must range between 0 and 255, and an alpha component of 1. If any component is out of range, the expression is an error.",group:"Color","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},rgba:{doc:"Creates a color value from red, green, blue components, which must range between 0 and 255, and an alpha component which must range between 0 and 1. If any component is out of range, the expression is an error.",group:"Color","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},get:{doc:"Retrieves a property value from the current feature's properties, or from another object if a second argument is provided. Returns `null` if the requested property is missing.",group:"Lookup","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},has:{doc:"Tests for the presence of an property value in the current feature's properties, or from another object if a second argument is provided.",group:"Lookup","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},length:{doc:"Returns the length of an array or string.",group:"Lookup","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},properties:{doc:'Returns the feature properties object.  Note that in some cases, it may be more efficient to use `["get", "property_name"]` directly.',group:"Feature data","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"feature-state":{doc:"Retrieves a property value from the current feature's state. Returns `null` if the requested property is not present on the feature's state. A feature's state is not part of the GeoJSON or vector tile data, and must be set programmatically on each feature. Features are identified by their `id` attribute, which must be an integer or a string that can be cast to an integer. Note that [\"feature-state\"] can only be used with paint properties that support data-driven styling.",group:"Feature data","sdk-support":{"basic functionality":{js:"0.46.0"}}},"geometry-type":{doc:"Returns the feature's geometry type: `Point`, `MultiPoint`, `LineString`, `MultiLineString`, `Polygon`, `MultiPolygon`. `Multi*` feature types are only returned in GeoJSON sources. When working with vector tile sources, use the singular forms.",group:"Feature data","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},id:{doc:"Returns the feature's id, if it has one.",group:"Feature data","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},zoom:{doc:'Returns the current zoom level.  Note that in style layout and paint properties, ["zoom"] may only appear as the input to a top-level "step" or "interpolate" expression.',group:"Camera","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},pitch:{doc:'Returns the current pitch in degrees. `["pitch"]` may only be used in the `filter` expression for a `symbol` layer.',group:"Camera","sdk-support":{"basic functionality":{js:"2.6.0"}}},"distance-from-center":{doc:'Returns the distance of a `symbol` instance from the center of the map. The distance is measured in pixels divided by the height of the map container. It measures 0 at the center, decreases towards the camera and increase away from the camera. For example, if the height of the map is 1000px, a value of -1 means 1000px away from the center towards the camera, and a value of 1 means a distance of 1000px away from the camera from the center. `["distance-from-center"]` may only be used in the `filter` expression for a `symbol` layer.',group:"Camera","sdk-support":{"basic functionality":{js:"2.6.0"}}},"heatmap-density":{doc:"Returns the kernel density estimation of a pixel in a heatmap layer, which is a relative measure of how many data points are crowded around a particular pixel. Can only be used in the `heatmap-color` property.",group:"Heatmap","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"line-progress":{doc:"Returns the progress along a gradient line. Can only be used in the `line-gradient` property.",group:"Feature data","sdk-support":{"basic functionality":{js:"0.45.0",android:"6.5.0",ios:"4.6.0",macos:"0.12.0"}}},"sky-radial-progress":{doc:"Returns the distance of a point on the sky from the sun position. Returns 0 at sun position and 1 when the distance reaches `sky-gradient-radius`. Can only be used in the `sky-gradient` property.",group:"sky","sdk-support":{"basic functionality":{js:"2.0.0",ios:"10.0.0",android:"10.0.0"}}},accumulated:{doc:"Returns the value of a cluster property accumulated so far. Can only be used in the `clusterProperties` option of a clustered GeoJSON source.",group:"Feature data","sdk-support":{"basic functionality":{js:"0.53.0",android:"8.4.0",ios:"5.5.0",macos:"0.15.0"}}},"+":{doc:"Returns the sum of the inputs.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"*":{doc:"Returns the product of the inputs.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"-":{doc:"For two inputs, returns the result of subtracting the second input from the first. For a single input, returns the result of subtracting it from 0.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"/":{doc:"Returns the result of floating point division of the first input by the second.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"%":{doc:"Returns the remainder after integer division of the first input by the second.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"^":{doc:"Returns the result of raising the first input to the power specified by the second.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},sqrt:{doc:"Returns the square root of the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.42.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},log10:{doc:"Returns the base-ten logarithm of the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},ln:{doc:"Returns the natural logarithm of the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},log2:{doc:"Returns the base-two logarithm of the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},sin:{doc:"Returns the sine of the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},cos:{doc:"Returns the cosine of the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},tan:{doc:"Returns the tangent of the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},asin:{doc:"Returns the arcsine of the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},acos:{doc:"Returns the arccosine of the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},atan:{doc:"Returns the arctangent of the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},min:{doc:"Returns the minimum value of the inputs.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},max:{doc:"Returns the maximum value of the inputs.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},round:{doc:'Rounds the input to the nearest integer. Halfway values are rounded away from zero. For example, `["round", -1.5]` evaluates to -2.',group:"Math","sdk-support":{"basic functionality":{js:"0.45.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},abs:{doc:"Returns the absolute value of the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.45.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},ceil:{doc:"Returns the smallest integer that is greater than or equal to the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.45.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},floor:{doc:"Returns the largest integer that is less than or equal to the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.45.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},distance:{doc:"Returns the shortest distance in meters between the evaluated feature and the input geometry. The input value can be a valid GeoJSON of type `Point`, `MultiPoint`, `LineString`, `MultiLineString`, `Polygon`, `MultiPolygon`, `Feature`, or `FeatureCollection`. Distance values returned may vary in precision due to loss in precision from encoding geometries, particularly below zoom level 13.",group:"Math","sdk-support":{"basic functionality":{android:"9.2.0",ios:"5.9.0",macos:"0.16.0"}}},"==":{doc:"Returns `true` if the input values are equal, `false` otherwise. The comparison is strictly typed: values of different runtime types are always considered unequal. Cases where the types are known to be different at parse time are considered invalid and will produce a parse error. Accepts an optional `collator` argument to control locale-dependent string comparisons.",group:"Decision","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"},collator:{js:"0.45.0",android:"6.5.0",ios:"4.2.0",macos:"0.9.0"}}},"!=":{doc:"Returns `true` if the input values are not equal, `false` otherwise. The comparison is strictly typed: values of different runtime types are always considered unequal. Cases where the types are known to be different at parse time are considered invalid and will produce a parse error. Accepts an optional `collator` argument to control locale-dependent string comparisons.",group:"Decision","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"},collator:{js:"0.45.0",android:"6.5.0",ios:"4.2.0",macos:"0.9.0"}}},">":{doc:"Returns `true` if the first input is strictly greater than the second, `false` otherwise. The arguments are required to be either both strings or both numbers; if during evaluation they are not, expression evaluation produces an error. Cases where this constraint is known not to hold at parse time are considered in valid and will produce a parse error. Accepts an optional `collator` argument to control locale-dependent string comparisons.",group:"Decision","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"},collator:{js:"0.45.0",android:"6.5.0",ios:"4.2.0",macos:"0.9.0"}}},"<":{doc:"Returns `true` if the first input is strictly less than the second, `false` otherwise. The arguments are required to be either both strings or both numbers; if during evaluation they are not, expression evaluation produces an error. Cases where this constraint is known not to hold at parse time are considered in valid and will produce a parse error. Accepts an optional `collator` argument to control locale-dependent string comparisons.",group:"Decision","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"},collator:{js:"0.45.0",android:"6.5.0",ios:"4.2.0",macos:"0.9.0"}}},">=":{doc:"Returns `true` if the first input is greater than or equal to the second, `false` otherwise. The arguments are required to be either both strings or both numbers; if during evaluation they are not, expression evaluation produces an error. Cases where this constraint is known not to hold at parse time are considered in valid and will produce a parse error. Accepts an optional `collator` argument to control locale-dependent string comparisons.",group:"Decision","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"},collator:{js:"0.45.0",android:"6.5.0",ios:"4.2.0",macos:"0.9.0"}}},"<=":{doc:"Returns `true` if the first input is less than or equal to the second, `false` otherwise. The arguments are required to be either both strings or both numbers; if during evaluation they are not, expression evaluation produces an error. Cases where this constraint is known not to hold at parse time are considered in valid and will produce a parse error. Accepts an optional `collator` argument to control locale-dependent string comparisons.",group:"Decision","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"},collator:{js:"0.45.0",android:"6.5.0",ios:"4.2.0",macos:"0.9.0"}}},all:{doc:"Returns `true` if all the inputs are `true`, `false` otherwise. The inputs are evaluated in order, and evaluation is short-circuiting: once an input expression evaluates to `false`, the result is `false` and no further input expressions are evaluated.",group:"Decision","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},any:{doc:"Returns `true` if any of the inputs are `true`, `false` otherwise. The inputs are evaluated in order, and evaluation is short-circuiting: once an input expression evaluates to `true`, the result is `true` and no further input expressions are evaluated.",group:"Decision","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"!":{doc:"Logical negation. Returns `true` if the input is `false`, and `false` if the input is `true`.",group:"Decision","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},within:{doc:"Returns `true` if the evaluated feature is fully contained inside a boundary of the input geometry, `false` otherwise. The input value can be a valid GeoJSON of type `Polygon`, `MultiPolygon`, `Feature`, or `FeatureCollection`. Supported features for evaluation:\n- `Point`: Returns `false` if a point is on the boundary or falls outside the boundary.\n- `LineString`: Returns `false` if any part of a line falls outside the boundary, the line intersects the boundary, or a line's endpoint is on the boundary.",group:"Decision","sdk-support":{"basic functionality":{js:"1.9.0",android:"9.1.0",ios:"5.8.0",macos:"0.15.0"}}},"is-supported-script":{doc:"Returns `true` if the input string is expected to render legibly. Returns `false` if the input string contains sections that cannot be rendered without potential loss of meaning (e.g. Indic scripts that require complex text shaping, or right-to-left scripts if the the `mapbox-gl-rtl-text` plugin is not in use in Mapbox GL JS).",group:"String","sdk-support":{"basic functionality":{js:"0.45.0",android:"6.6.0",ios:"4.1.0",macos:"0.8.0"}}},upcase:{doc:"Returns the input string converted to uppercase. Follows the Unicode Default Case Conversion algorithm and the locale-insensitive case mappings in the Unicode Character Database.",group:"String","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},downcase:{doc:"Returns the input string converted to lowercase. Follows the Unicode Default Case Conversion algorithm and the locale-insensitive case mappings in the Unicode Character Database.",group:"String","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},concat:{doc:"Returns a `string` consisting of the concatenation of the inputs. Each input is converted to a string as if by `to-string`.",group:"String","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"resolved-locale":{doc:"Returns the IETF language tag of the locale being used by the provided `collator`. This can be used to determine the default system locale, or to determine if a requested locale was successfully loaded.",group:"String","sdk-support":{"basic functionality":{js:"0.45.0",android:"6.5.0",ios:"4.2.0",macos:"0.9.0"}}}}},Sk={range:{type:"array",default:[.5,10],minimum:-20,maximum:20,length:2,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},doc:"The start and end distance range in which fog fades from fully transparent to fully opaque. The distance to the point at the center of the map is defined as zero, so that negative range values are closer to the camera, and positive values are farther away.",example:[.5,10],"sdk-support":{"basic functionality":{js:"2.3.0",android:"10.6.0",ios:"10.6.0"}}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0,doc:"The color of the atmosphere region immediately below the horizon and within the `range` and above the horizon and within `horizon-blend`. Using opacity is recommended only for smoothly transitioning fog on/off as anything less than 100% opacity results in more tiles loaded and drawn.","sdk-support":{"basic functionality":{js:"2.3.0",android:"10.6.0",ios:"10.6.0"}}},"high-color":{type:"color","property-type":"data-constant",default:"#245cdf",expression:{interpolated:!0,parameters:["zoom"]},transition:!0,doc:"The color of the atmosphere region above the horizon, `high-color` extends further above the horizon than the `color` property and its spread can be controlled with `horizon-blend`. The opacity can be set to `0` to remove the high atmosphere color contribution.","sdk-support":{"basic functionality":{js:"2.9.0",android:"10.6.0",ios:"10.6.0"}}},"space-color":{type:"color","property-type":"data-constant",default:["interpolate",["linear"],["zoom"],4,"#010b19",7,"#367ab9"],expression:{interpolated:!0,parameters:["zoom"]},transition:!0,doc:"The color of the region above the horizon and after the end of the `horizon-blend` contribution. The opacity can be set to `0` to have a transparent background.","sdk-support":{"basic functionality":{js:"2.9.0",android:"10.6.0",ios:"10.6.0"}}},"horizon-blend":{type:"number","property-type":"data-constant",default:["interpolate",["linear"],["zoom"],4,.2,7,.1],minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0,doc:"Horizon blend applies a smooth fade from the color of the atmosphere to the color of space. A value of zero leaves a sharp transition from atmosphere to space. Increasing the value blends the color of atmosphere into increasingly high angles of the sky.","sdk-support":{"basic functionality":{js:"2.3.0",android:"10.6.0",ios:"10.6.0"}}},"star-intensity":{type:"number","property-type":"data-constant",default:["interpolate",["linear"],["zoom"],5,.35,6,0],minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0,doc:"A value controlling the star intensity where `0` will show no stars and `1` will show stars at their maximum intensity.","sdk-support":{"basic functionality":{js:"2.9.0",android:"10.6.0",ios:"10.6.0"}}}},Ck={anchor:{type:"enum",default:"viewport",values:{map:{doc:"The position of the light source is aligned to the rotation of the map."},viewport:{doc:"The position of the light source is aligned to the rotation of the viewport."}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]},doc:"Whether extruded geometries are lit relative to the map or viewport.",example:"map","sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},doc:"Position of the light source relative to lit (extruded) geometries, in [r radial coordinate, a azimuthal angle, p polar angle] where r indicates the distance from the center of the base of an object to its light, a indicates the position of the light relative to 0\xB0 (0\xB0 when `light.anchor` is set to `viewport` corresponds to the top of the viewport, or 0\xB0 when `light.anchor` is set to `map` corresponds to due north, and degrees proceed clockwise), and p indicates the height of the light (from 0\xB0, directly above, to 180\xB0, directly below).",example:[1.5,90,80],"sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0,doc:"Color tint for lighting extruded geometries.","sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}}},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0,doc:"Intensity of lighting (on a scale from 0 to 1). Higher numbers will present as more extreme contrast.","sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}}}},Ek={name:{type:"enum",values:{albers:{doc:"An Albers equal-area projection centered on the continental United States. You can configure the projection for a different region by setting `center` and `parallels` properties. You may want to set max bounds to constrain the map to the relevant region."},equalEarth:{doc:"An Equal Earth projection."},equirectangular:{doc:"An Equirectangular projection. This projection is very similar to the Plate Carr\xE9e projection."},lambertConformalConic:{doc:"A Lambert conformal conic projection. You can configure the projection for a region by setting `center` and `parallels` properties. You may want to set max bounds to constrain the map to the relevant region."},mercator:{doc:"The Mercator projection is the default projection."},naturalEarth:{doc:"A Natural Earth projection."},winkelTripel:{doc:"A Winkel Tripel projection."},globe:{doc:"A globe projection."}},default:"mercator",doc:"The name of the projection to be used for rendering the map.",required:!0,"sdk-support":{"basic functionality":{js:"2.6.0"}}},center:{type:"array",length:2,value:"number","property-type":"data-constant",minimum:[-180,-90],maximum:[180,90],transition:!1,doc:"The reference longitude and latitude of the projection. `center` takes the form of [lng, lat]. This property is only configurable for conic projections (Albers and Lambert Conformal Conic). All other projections are centered on [0, 0].",example:[-96,37.5],requires:[{name:["albers","lambertConformalConic"]}],"sdk-support":{"basic functionality":{js:"2.6.0"}}},parallels:{type:"array",length:2,value:"number","property-type":"data-constant",minimum:[-90,-90],maximum:[90,90],transition:!1,doc:"The standard parallels of the projection, denoting the desired latitude range with minimal distortion. `parallels` takes the form of [lat0, lat1]. This property is only configurable for conic projections (Albers and Lambert Conformal Conic).",example:[29.5,45.5],requires:[{name:["albers","lambertConformalConic"]}],"sdk-support":{"basic functionality":{js:"2.6.0"}}}},Ik={source:{type:"string",doc:"Name of a source of `raster_dem` type to be used for terrain elevation.",required:!0,"sdk-support":{"basic functionality":{js:"2.0.0",ios:"10.0.0",android:"10.0.0"}}},exaggeration:{type:"number","property-type":"data-constant",default:1,minimum:0,maximum:1e3,expression:{interpolated:!0,parameters:["zoom"]},transition:!0,doc:"Exaggerates the elevation of the terrain by multiplying the data from the DEM with this value.",requires:["source"],"sdk-support":{"basic functionality":{js:"2.0.0",ios:"10.0.0",android:"10.0.0"}}}},Tk=["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background","paint_sky"],Lk={"fill-antialias":{type:"boolean",default:!0,doc:"Whether or not the fill should be antialiased.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,doc:"The opacity of the entire fill layer. In contrast to the `fill-color`, this value will also affect the 1px stroke around the fill, if the stroke is used.",transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.21.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",doc:"The color of the filled part of this layer. This color can be specified as `rgba` with an alpha component and the color's opacity will not affect the opacity of the 1px stroke, if it is used.",transition:!0,requires:[{"!":"fill-pattern"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.19.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",doc:"The outline color of the fill. Matches the value of `fill-color` if unspecified.",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.19.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",doc:"The geometry's offset. Values are [x, y] where negatives indicate left and up, respectively.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{doc:"The fill is translated relative to the map."},viewport:{doc:"The fill is translated relative to the viewport."}},doc:"Controls the frame of reference for `fill-translate`.",default:"map",requires:["fill-translate"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,doc:"Name of image in sprite to use for drawing image fills. For seamless patterns, image width and height must be a factor of two (2, 4, 8, ..., 512). Note that zoom-dependent expressions will be evaluated only at integer zoom levels.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.49.0",android:"6.5.0",macos:"0.11.0",ios:"4.4.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},Pk={"line-opacity":{type:"number",doc:"The opacity at which the line will be drawn.",default:1,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.29.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",doc:"The color with which the line will be drawn.",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.23.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",doc:"The geometry's offset. Values are [x, y] where negatives indicate left and up, respectively.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{doc:"The line is translated relative to the map."},viewport:{doc:"The line is translated relative to the viewport."}},doc:"Controls the frame of reference for `line-translate`.",default:"map",requires:["line-translate"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",doc:"Stroke thickness.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.39.0",android:"5.2.0",ios:"3.7.0",macos:"0.6.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,doc:"Draws a line casing outside of a line's actual path. Value indicates the width of the inner gap.",transition:!0,units:"pixels","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.29.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,doc:"The line's offset. For linear features, a positive value offsets the line to the right, relative to the direction of the line, and a negative value to the left. For polygon features, a positive value results in an inset, and a negative value results in an outset.",transition:!0,units:"pixels","sdk-support":{"basic functionality":{js:"0.12.1",android:"3.0.0",ios:"3.1.0",macos:"0.1.0"},"data-driven styling":{js:"0.29.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",doc:"Blur applied to the line, in pixels.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.29.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",doc:"Specifies the lengths of the alternating dashes and gaps that form the dash pattern. The lengths are later scaled by the line width. To convert a dash length to pixels, multiply the length by the current line width. Note that GeoJSON sources with `lineMetrics: true` specified won't render dashed lines to the expected scale. Also note that zoom-dependent expressions will be evaluated only at integer zoom levels.",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"2.3.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-pattern":{type:"resolvedImage",transition:!0,doc:"Name of image in sprite to use for drawing image lines. For seamless patterns, image width must be a factor of two (2, 4, 8, ..., 512). Note that zoom-dependent expressions will be evaluated only at integer zoom levels.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.49.0",android:"6.5.0",macos:"0.11.0",ios:"4.4.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",doc:'Defines a gradient with which to color a line feature. Can only be used with GeoJSON sources that specify `"lineMetrics": true`.',transition:!1,requires:[{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],"sdk-support":{"basic functionality":{js:"0.45.0",android:"6.5.0",ios:"4.4.0",macos:"0.11.0"},"data-driven styling":{}},expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"},"line-trim-offset":{type:"array",value:"number",doc:"The line part between [trim-start, trim-end] will be marked as transparent to make a route vanishing effect. The line trim-off offset is based on the whole line range [0.0, 1.0].",length:2,default:[0,0],minimum:[0,0],maximum:[1,1],transition:!1,requires:[{source:"geojson",has:{lineMetrics:!0}}],"sdk-support":{"basic functionality":{js:"2.9.0",android:"10.5.0",ios:"10.5.0",macos:"10.5.0"}},"property-type":"constant"}},Mk={"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",doc:"Circle radius.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.18.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",doc:"The fill color of the circle.",transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.18.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,doc:"Amount to blur the circle. 1 blurs the circle such that only the centerpoint is full opacity.",transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.20.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",doc:"The opacity at which the circle will be drawn.",default:1,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.20.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",doc:"The geometry's offset. Values are [x, y] where negatives indicate left and up, respectively.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{doc:"The circle is translated relative to the map."},viewport:{doc:"The circle is translated relative to the viewport."}},doc:"Controls the frame of reference for `circle-translate`.",default:"map",requires:["circle-translate"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{doc:"Circles are scaled according to their apparent distance to the camera."},viewport:{doc:"Circles are not scaled."}},default:"map",doc:"Controls the scaling behavior of the circle when the map is pitched.","sdk-support":{"basic functionality":{js:"0.21.0",android:"4.2.0",ios:"3.4.0",macos:"0.2.1"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{doc:"The circle is aligned to the plane of the map."},viewport:{doc:"The circle is aligned to the plane of the viewport."}},default:"viewport",doc:"Orientation of circle when map is pitched.","sdk-support":{"basic functionality":{js:"0.39.0",android:"5.2.0",ios:"3.7.0",macos:"0.6.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",doc:"The width of the circle's stroke. Strokes are placed outside of the `circle-radius`.","sdk-support":{"basic functionality":{js:"0.29.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"},"data-driven styling":{js:"0.29.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",doc:"The stroke color of the circle.",transition:!0,"sdk-support":{"basic functionality":{js:"0.29.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"},"data-driven styling":{js:"0.29.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",doc:"The opacity of the circle's stroke.",default:1,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.29.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"},"data-driven styling":{js:"0.29.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},Dk={"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",doc:"Radius of influence of one heatmap point in pixels. Increasing the value makes the heatmap smoother, but less detailed. `queryRenderedFeatures` on heatmap layers will return points within this radius.","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"},"data-driven styling":{js:"0.43.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,doc:"A measure of how much an individual point contributes to the heatmap. A value of 10 would be equivalent to having 10 points of weight 1 in the same spot. Especially useful when combined with clustering.","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"},"data-driven styling":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,doc:"Similar to `heatmap-weight` but controls the intensity of the heatmap globally. Primarily used for adjusting the heatmap based on zoom level.","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],doc:'Defines the color of each pixel based on its density value in a heatmap.  Should be an expression that uses `["heatmap-density"]` as input.',transition:!1,"sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"},"data-driven styling":{}},expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",doc:"The global opacity at which the heatmap layer will be drawn.",default:1,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},Ok={"icon-opacity":{doc:"The opacity at which the icon will be drawn.",type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,doc:"The color of the icon. This can only be used with [SDF icons](/help/troubleshooting/using-recolorable-images-in-mapbox-maps/).",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,doc:"The color of the icon's halo. Icon halos can only be used with [SDF icons](/help/troubleshooting/using-recolorable-images-in-mapbox-maps/).",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",doc:"Distance of halo to the icon outline.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",doc:"Fade out the halo towards the outside.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",doc:"Distance that the icon's anchor is moved from its original placement. Positive values indicate right and down, while negative values indicate left and up.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{doc:"Icons are translated relative to the map."},viewport:{doc:"Icons are translated relative to the viewport."}},doc:"Controls the frame of reference for `icon-translate`.",default:"map",requires:["icon-image","icon-translate"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",doc:"The opacity at which the text will be drawn.",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",doc:"The color with which the text will be drawn.",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,doc:"The color of the text's halo, which helps it stand out from backgrounds.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",doc:"Distance of halo to the font outline. Max text halo width is 1/4 of the font-size.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",doc:"The halo's fadeout distance towards the outside.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",doc:"Distance that the text's anchor is moved from its original placement. Positive values indicate right and down, while negative values indicate left and up.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{doc:"The text is translated relative to the map."},viewport:{doc:"The text is translated relative to the viewport."}},doc:"Controls the frame of reference for `text-translate`.",default:"map",requires:["text-field","text-translate"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},Fk={"raster-opacity":{type:"number",doc:"The opacity at which the image will be drawn.",default:1,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",doc:"Rotates hues around the color wheel.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",doc:"Increase or reduce the brightness of the image. The value is the minimum brightness.",default:0,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",doc:"Increase or reduce the brightness of the image. The value is the maximum brightness.",default:1,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",doc:"Increase or reduce the saturation of the image.",default:0,minimum:-1,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",doc:"Increase or reduce the contrast of the image.",default:0,minimum:-1,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",doc:"The resampling/interpolation method to use for overscaling, also known as texture magnification filter",values:{linear:{doc:"(Bi)linear filtering interpolates pixel values using the weighted average of the four closest original source pixels creating a smooth but blurry look when overscaled"},nearest:{doc:"Nearest neighbor filtering interpolates pixel values using the nearest original source pixel creating a sharp but pixelated look when overscaled"}},default:"linear","sdk-support":{"basic functionality":{js:"0.47.0",android:"6.3.0",ios:"4.2.0",macos:"0.9.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",doc:"Fade duration when a new tile is added.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},Rk={"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,doc:"The direction of the light source used to generate the hillshading with 0 as the top of the viewport if `hillshade-illumination-anchor` is set to `viewport` and due north if `hillshade-illumination-anchor` is set to `map`.",transition:!1,"sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{doc:"The hillshade illumination is relative to the north direction."},viewport:{doc:"The hillshade illumination is relative to the top of the viewport."}},default:"viewport",doc:"Direction of light source when map is rotated.","sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",doc:"Intensity of the hillshade",default:.5,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",doc:"The shading color of areas that face away from the light source.",transition:!0,"sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",doc:"The shading color of areas that faces towards the light source.",transition:!0,"sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",doc:"The shading color used to accentuate rugged terrain like sharp cliffs and gorges.",transition:!0,"sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},Bk={"background-color":{type:"color",default:"#000000",doc:"The color with which the background will be drawn.",transition:!0,requires:[{"!":"background-pattern"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,doc:"Name of image in sprite to use for drawing an image background. For seamless patterns, image width and height must be a factor of two (2, 4, 8, ..., 512). Note that zoom-dependent expressions will be evaluated only at integer zoom levels.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,doc:"The opacity at which the background will be drawn.",transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},zk={"sky-type":{type:"enum",values:{gradient:{doc:"Renders the sky with a gradient that can be configured with `sky-gradient-radius` and `sky-gradient`."},atmosphere:{doc:"Renders the sky with a simulated atmospheric scattering algorithm, the sun direction can be attached to the light position or explicitly set through `sky-atmosphere-sun`."}},default:"atmosphere",doc:"The type of the sky","sdk-support":{"basic functionality":{js:"2.0.0",ios:"10.0.0",android:"10.0.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun":{type:"array",value:"number",length:2,units:"degrees",minimum:[0,0],maximum:[360,180],transition:!1,doc:"Position of the sun center [a azimuthal angle, p polar angle]. The azimuthal angle indicates the position of the sun relative to 0\xB0 north, where degrees proceed clockwise. The polar angle indicates the height of the sun, where 0\xB0 is directly above, at zenith, and 90\xB0 at the horizon. When this property is ommitted, the sun center is directly inherited from the light position.","sdk-support":{"basic functionality":{js:"2.0.0",ios:"10.0.0",android:"10.0.0"}},requires:[{"sky-type":"atmosphere"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun-intensity":{type:"number",requires:[{"sky-type":"atmosphere"}],default:10,minimum:0,maximum:100,transition:!1,doc:"Intensity of the sun as a light source in the atmosphere (on a scale from 0 to a 100). Setting higher values will brighten up the sky.","sdk-support":{"basic functionality":{js:"2.0.0",ios:"10.0.0",android:"10.0.0"}},"property-type":"data-constant"},"sky-gradient-center":{type:"array",requires:[{"sky-type":"gradient"}],value:"number",default:[0,0],length:2,units:"degrees",minimum:[0,0],maximum:[360,180],transition:!1,doc:"Position of the gradient center [a azimuthal angle, p polar angle]. The azimuthal angle indicates the position of the gradient center relative to 0\xB0 north, where degrees proceed clockwise. The polar angle indicates the height of the gradient center, where 0\xB0 is directly above, at zenith, and 90\xB0 at the horizon.","sdk-support":{"basic functionality":{js:"2.0.0",ios:"10.0.0",android:"10.0.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"sky-gradient-radius":{type:"number",requires:[{"sky-type":"gradient"}],default:90,minimum:0,maximum:180,transition:!1,doc:"The angular distance (measured in degrees) from `sky-gradient-center` up to which the gradient extends. A value of 180 causes the gradient to wrap around to the opposite direction from `sky-gradient-center`.","sdk-support":{"basic functionality":{js:"2.0.0",ios:"10.0.0",android:"10.0.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"sky-gradient":{type:"color",default:["interpolate",["linear"],["sky-radial-progress"],.8,"#87ceeb",1,"white"],doc:"Defines a radial color gradient with which to color the sky. The color values can be interpolated with an expression using `sky-radial-progress`. The range [0, 1] for the interpolant covers a radial distance (in degrees) of [0, `sky-gradient-radius`] centered at the position specified by `sky-gradient-center`.",transition:!1,requires:[{"sky-type":"gradient"}],"sdk-support":{"basic functionality":{js:"2.0.0",ios:"10.0.0",android:"10.0.0"},"data-driven styling":{}},expression:{interpolated:!0,parameters:["sky-radial-progress"]},"property-type":"color-ramp"},"sky-atmosphere-halo-color":{type:"color",default:"white",doc:"A color applied to the atmosphere sun halo. The alpha channel describes how strongly the sun halo is represented in an atmosphere sky layer.",transition:!1,requires:[{"sky-type":"atmosphere"}],"sdk-support":{"basic functionality":{js:"2.0.0",ios:"10.0.0",android:"10.0.0"}},"property-type":"data-constant"},"sky-atmosphere-color":{type:"color",default:"white",doc:"A color used to tweak the main atmospheric scattering coefficients. Using white applies the default coefficients giving the natural blue color to the atmosphere. This color affects how heavily the corresponding wavelength is represented during scattering. The alpha channel describes the density of the atmosphere, with 1 maximum density and 0 no density.",transition:!1,requires:[{"sky-type":"atmosphere"}],"sdk-support":{"basic functionality":{js:"2.0.0",ios:"10.0.0",android:"10.0.0"}},"property-type":"data-constant"},"sky-opacity":{type:"number",default:1,minimum:0,maximum:1,doc:"The opacity of the entire sky layer.",transition:!0,"sdk-support":{"basic functionality":{js:"2.0.0",ios:"10.0.0",android:"10.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},Nk={duration:{type:"number",default:300,minimum:0,units:"milliseconds",doc:"Time allotted for transitions to complete."},delay:{type:"number",default:0,minimum:0,units:"milliseconds",doc:"Length of time before a transition begins."}},jk={"*":{type:"string",doc:"A name of a feature property to use as ID for feature state."}},Uk={$version:XA,$root:YA,sources:ZA,source:KA,source_vector:JA,source_raster:QA,source_raster_dem:$A,source_geojson:ek,source_video:tk,source_image:ik,layer:nk,layout:rk,layout_background:ok,layout_sky:sk,layout_fill:ak,layout_circle:lk,layout_heatmap:uk,"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}},"property-type":"constant"},"fill-extrusion-edge-radius":{type:"number",private:!0,default:0,minimum:0,maximum:1,doc:"Radius of a fill extrusion edge in meters. If not zero, rounds extrusion edges for a smoother appearance.","sdk-support":{"basic functionality":{js:"v2.10.0"}},"property-type":"constant"}},layout_line:ck,layout_symbol:hk,layout_raster:fk,layout_hillshade:dk,filter:pk,filter_symbol:mk,filter_fill:gk,filter_line:yk,filter_circle:_k,"filter_fill-extrusion":{type:"boolean",doc:'Expression which determines whether or not to display a Polygon. Fill-extrusion layer does NOT support dynamic filtering, meaning this expression can NOT use the `["pitch"]` and `["distance-from-center"]` expressions to reference the current state of the view.',default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}},filter_heatmap:vk,filter_operator:bk,geometry_type:wk,function:{expression:{type:"expression",doc:"An expression."},stops:{type:"array",doc:"An array of stops.",value:"function_stop"},base:{type:"number",default:1,minimum:0,doc:"The exponential base of the interpolation curve. It controls the rate at which the result increases. Higher values make the result increase more towards the high end of the range. With `1` the stops are interpolated linearly."},property:{type:"string",doc:"The name of a feature property to use as the function input.",default:"$zoom"},type:{type:"enum",values:{identity:{doc:"Return the input value as the output value."},exponential:{doc:"Generate an output by interpolating between stops just less than and just greater than the function input."},interval:{doc:"Return the output value of the stop just less than the function input."},categorical:{doc:"Return the output value of the stop equal to the function input."}},doc:"The interpolation strategy to use in function evaluation.",default:"exponential"},colorSpace:{type:"enum",values:{rgb:{doc:"Use the RGB color space to interpolate color values"},lab:{doc:"Use the LAB color space to interpolate color values."},hcl:{doc:"Use the HCL color space to interpolate color values, interpolating the Hue, Chroma, and Luminance channels individually."}},doc:"The color space in which colors interpolated. Interpolating colors in perceptual color spaces like LAB and HCL tend to produce color ramps that look more consistent and produce colors that can be differentiated more easily than those interpolated in RGB space.",default:"rgb"},default:{type:"*",required:!1,doc:`A value to serve as a fallback function result when a value isn't otherwise available. It is used in the following circumstances:
* In categorical functions, when the feature value does not match any of the stop domain values.
* In property and zoom-and-property functions, when a feature does not contain a value for the specified property.
* In identity functions, when the feature value is not valid for the style property (for example, if the function is being used for a \`circle-color\` property but the feature property value is not a string or not a valid color).
* In interval or exponential property and zoom-and-property functions, when the feature value is not numeric.
If no default is provided, the style property's default is used in these circumstances.`}},function_stop:xk,expression:Ak,expression_name:kk,fog:Sk,light:Ck,projection:Ek,terrain:Ik,paint:Tk,paint_fill:Lk,"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,doc:"The opacity of the entire fill extrusion layer. This is rendered on a per-layer, not per-feature, basis, and data-driven styling is not available.",transition:!0,"sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",doc:"The base color of the extruded fill. The extrusion's surfaces will be shaded differently based on this color in combination with the root `light` settings. If this color is specified as `rgba` with an alpha component, the alpha component will be ignored; use `fill-extrusion-opacity` to set layer opacity.",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],"sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"},"data-driven styling":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",doc:"The geometry's offset. Values are [x, y] where negatives indicate left and up (on the flat plane), respectively.","sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{doc:"The fill extrusion is translated relative to the map."},viewport:{doc:"The fill extrusion is translated relative to the viewport."}},doc:"Controls the frame of reference for `fill-extrusion-translate`.",default:"map",requires:["fill-extrusion-translate"],"sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,doc:"Name of image in sprite to use for drawing images on extruded fills. For seamless patterns, image width and height must be a factor of two (2, 4, 8, ..., 512). Note that zoom-dependent expressions will be evaluated only at integer zoom levels.","sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"},"data-driven styling":{js:"0.49.0",android:"6.5.0",macos:"0.11.0",ios:"4.4.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",doc:"The height with which to extrude this layer.",transition:!0,"sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"},"data-driven styling":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",doc:"The height with which to extrude the base of this layer. Must be less than or equal to `fill-extrusion-height`.",transition:!0,requires:["fill-extrusion-height"],"sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"},"data-driven styling":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,doc:"Whether to apply a vertical gradient to the sides of a fill-extrusion layer. If true, sides will be shaded slightly darker farther down.",transition:!1,"sdk-support":{"basic functionality":{js:"0.50.0",android:"7.0.0",ios:"4.7.0",macos:"0.13.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-ambient-occlusion-intensity":{"property-type":"data-constant",type:"number",private:!0,default:0,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0,doc:"Controls the intensity of ambient occlusion (AO) shading. Current AO implementation is a low-cost best-effort approach that shades area near ground and concave angles between walls. Default value 0.0 disables ambient occlusion and values around 0.3 provide the most plausible results for buildings.","sdk-support":{"basic functionality":{js:"2.10.0",android:"10.7.0",ios:"10.7.0"}}},"fill-extrusion-ambient-occlusion-radius":{"property-type":"data-constant",type:"number",private:!0,default:3,minimum:0,expression:{interpolated:!0,parameters:["zoom"]},transition:!0,doc:"The radius of ambient occlusion (AO) shading, in meters. Current AO implementation is a low-cost best-effort approach that shades area near ground and concave angles between walls where the radius defines only vertical impact. Default value 3.0 corresponds to hight of one floor and brings the most plausible results for buildings.","sdk-support":{"basic functionality":{js:"2.10.0",android:"10.7.0",ios:"10.7.0"}}}},paint_line:Pk,paint_circle:Mk,paint_heatmap:Dk,paint_symbol:Ok,paint_raster:Fk,paint_hillshade:Rk,paint_background:Bk,paint_sky:zk,transition:Nk,"property-type":{"data-driven":{type:"property-type",doc:"Property is interpolable and can be represented using a property expression."},"cross-faded":{type:"property-type",doc:"Property is non-interpolable; rather, its values will be cross-faded to smoothly transition between integer zooms."},"cross-faded-data-driven":{type:"property-type",doc:"Property is non-interpolable; rather, its values will be cross-faded to smoothly transition between integer zooms. It can be represented using a property expression."},"color-ramp":{type:"property-type",doc:"Property should be specified using a color ramp from which the output color can be sampled based on a property calculation."},"data-constant":{type:"property-type",doc:"Property is interpolable but cannot be represented using a property expression."},constant:{type:"property-type",doc:"Property is constant across all zoom levels and property values."}},promoteId:jk},Um=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function O1(i){var e={exports:{}};return i(e,e.exports),e.exports}function Vk(i){throw new Error('Could not dynamically require "'+i+'". Please configure the dynamicRequireTargets option of @rollup/plugin-commonjs appropriately for this require call to behave properly.')}/*! https://mths.be/punycode v1.3.2 by @mathias */O1(function(i,e){(function(t){var o=e&&!e.nodeType&&e,l=i&&!i.nodeType&&i,u=typeof Um=="object"&&Um;(u.global===u||u.window===u||u.self===u)&&(t=u);var m,r=2147483647,h=36,y=1,b=26,v=38,w=700,x=72,C=128,T="-",S=/^xn--/,M=/[^\x20-\x7E]/,O=/[\x2E\u3002\uFF0E\uFF61]/g,V={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},X=h-y,Z=Math.floor,ee=String.fromCharCode,J;function ie(Ce){throw RangeError(V[Ce])}function ke(Ce,Be){for(var le=Ce.length,Ee=[];le--;)Ee[le]=Be(Ce[le]);return Ee}function Le(Ce,Be){var le=Ce.split("@"),Ee="";le.length>1&&(Ee=le[0]+"@",Ce=le[1]),Ce=Ce.replace(O,".");var he=Ce.split("."),me=ke(he,Be).join(".");return Ee+me}function fe(Ce){for(var Be=[],le=0,Ee=Ce.length,he,me;le<Ee;)he=Ce.charCodeAt(le++),he>=55296&&he<=56319&&le<Ee?(me=Ce.charCodeAt(le++),(me&64512)==56320?Be.push(((he&1023)<<10)+(me&1023)+65536):(Be.push(he),le--)):Be.push(he);return Be}function Te(Ce){return ke(Ce,function(Be){var le="";return Be>65535&&(Be-=65536,le+=ee(Be>>>10&1023|55296),Be=56320|Be&1023),le+=ee(Be),le}).join("")}function _e(Ce){return Ce-48<10?Ce-22:Ce-65<26?Ce-65:Ce-97<26?Ce-97:h}function ve(Ce,Be){return Ce+22+75*(Ce<26)-((Be!=0)<<5)}function rt(Ce,Be,le){var Ee=0;for(Ce=le?Z(Ce/w):Ce>>1,Ce+=Z(Ce/Be);Ce>X*b>>1;Ee+=h)Ce=Z(Ce/X);return Z(Ee+(X+1)*Ce/(Ce+v))}function nt(Ce){var Be=[],le=Ce.length,Ee,he=0,me=C,Fe=x,Xe,lt,Ye,Ke,Lt,$t,dt,wt,bt;for(Xe=Ce.lastIndexOf(T),Xe<0&&(Xe=0),lt=0;lt<Xe;++lt)Ce.charCodeAt(lt)>=128&&ie("not-basic"),Be.push(Ce.charCodeAt(lt));for(Ye=Xe>0?Xe+1:0;Ye<le;){for(Ke=he,Lt=1,$t=h;Ye>=le&&ie("invalid-input"),dt=_e(Ce.charCodeAt(Ye++)),(dt>=h||dt>Z((r-he)/Lt))&&ie("overflow"),he+=dt*Lt,wt=$t<=Fe?y:$t>=Fe+b?b:$t-Fe,!(dt<wt);$t+=h)bt=h-wt,Lt>Z(r/bt)&&ie("overflow"),Lt*=bt;Ee=Be.length+1,Fe=rt(he-Ke,Ee,Ke==0),Z(he/Ee)>r-me&&ie("overflow"),me+=Z(he/Ee),he%=Ee,Be.splice(he++,0,me)}return Te(Be)}function Tt(Ce){var Be,le,Ee,he,me,Fe,Xe,lt,Ye,Ke,Lt,$t=[],dt,wt,bt,$e;for(Ce=fe(Ce),dt=Ce.length,Be=C,le=0,me=x,Fe=0;Fe<dt;++Fe)Lt=Ce[Fe],Lt<128&&$t.push(ee(Lt));for(Ee=he=$t.length,he&&$t.push(T);Ee<dt;){for(Xe=r,Fe=0;Fe<dt;++Fe)Lt=Ce[Fe],Lt>=Be&&Lt<Xe&&(Xe=Lt);for(wt=Ee+1,Xe-Be>Z((r-le)/wt)&&ie("overflow"),le+=(Xe-Be)*wt,Be=Xe,Fe=0;Fe<dt;++Fe)if(Lt=Ce[Fe],Lt<Be&&++le>r&&ie("overflow"),Lt==Be){for(lt=le,Ye=h;Ke=Ye<=me?y:Ye>=me+b?b:Ye-me,!(lt<Ke);Ye+=h)$e=lt-Ke,bt=h-Ke,$t.push(ee(ve(Ke+$e%bt,0))),lt=Z($e/bt);$t.push(ee(ve(lt,0))),me=rt(le,wt,Ee==he),le=0,++Ee}++le,++Be}return $t.join("")}function We(Ce){return Le(Ce,function(Be){return S.test(Be)?nt(Be.slice(4).toLowerCase()):Be})}function be(Ce){return Le(Ce,function(Be){return M.test(Be)?"xn--"+Tt(Be):Be})}if(m={version:"1.3.2",ucs2:{decode:fe,encode:Te},decode:nt,encode:Tt,toASCII:be,toUnicode:We},o&&l)if(i.exports==o)l.exports=m;else for(J in m)m.hasOwnProperty(J)&&(o[J]=m[J]);else t.punycode=m})(Um)});function qk(i,e){return Object.prototype.hasOwnProperty.call(i,e)}var Hk=function(i,e,t,o){e=e||"&",t=t||"=";var l={};if(typeof i!="string"||i.length===0)return l;var u=/\+/g;i=i.split(e);var m=1e3;o&&typeof o.maxKeys=="number"&&(m=o.maxKeys);var r=i.length;m>0&&r>m&&(r=m);for(var h=0;h<r;++h){var y=i[h].replace(u,"%20"),b=y.indexOf(t),v,w,x,C;b>=0?(v=y.substr(0,b),w=y.substr(b+1)):(v=y,w=""),x=decodeURIComponent(v),C=decodeURIComponent(w),qk(l,x)?Array.isArray(l[x])?l[x].push(C):l[x]=[l[x],C]:l[x]=C}return l},Cd=function(i){switch(typeof i){case"string":return i;case"boolean":return i?"true":"false";case"number":return isFinite(i)?i:"";default:return""}},Gk=function(i,e,t,o){return e=e||"&",t=t||"=",i===null&&(i=void 0),typeof i=="object"?Object.keys(i).map(function(l){var u=encodeURIComponent(Cd(l))+t;return Array.isArray(i[l])?i[l].map(function(m){return u+encodeURIComponent(Cd(m))}).join(e):u+encodeURIComponent(Cd(i[l]))}).join(e):o?encodeURIComponent(Cd(o))+t+encodeURIComponent(Cd(i)):""};O1(function(i,e){e.decode=e.parse=Hk,e.encode=e.stringify=Gk});function U4(i,...e){for(const t of e)for(const o in t)i[o]=t[o];return i}class Wk extends Error{constructor(e,t){super(t),this.message=t,this.key=e}}var Qc=Wk;class vg{constructor(e,t=[]){this.parent=e,this.bindings={};for(const[o,l]of t)this.bindings[o]=l}concat(e){return new vg(this,e)}get(e){if(this.bindings[e])return this.bindings[e];if(this.parent)return this.parent.get(e);throw new Error(`${e} not found in scope.`)}has(e){return this.bindings[e]?!0:this.parent?this.parent.has(e):!1}}var Xk=vg;const F1={kind:"null"},Vn={kind:"number"},ho={kind:"string"},io={kind:"boolean"},Mh={kind:"color"},X0={kind:"object"},no={kind:"value"},Yk={kind:"error"},R1={kind:"collator"},B1={kind:"formatted"},np={kind:"resolvedImage"};function tc(i,e){return{kind:"array",itemType:i,N:e}}function Os(i){if(i.kind==="array"){const e=Os(i.itemType);return typeof i.N=="number"?`array<${e}, ${i.N}>`:i.itemType.kind==="value"?"array":`array<${e}>`}else return i.kind}const Zk=[F1,Vn,ho,io,Mh,B1,X0,tc(no),np];function Yd(i,e){if(e.kind==="error")return null;if(i.kind==="array"){if(e.kind==="array"&&(e.N===0&&e.itemType.kind==="value"||!Yd(i.itemType,e.itemType))&&(typeof i.N!="number"||i.N===e.N))return null}else{if(i.kind===e.kind)return null;if(i.kind==="value"){for(const t of Zk)if(!Yd(t,e))return null}}return`Expected ${Os(i)} but found ${Os(e)} instead.`}function bg(i,e){return e.some(t=>t.kind===i.kind)}function Zd(i,e){return e.some(t=>t==="null"?i===null:t==="array"?Array.isArray(i):t==="object"?i&&!Array.isArray(i)&&typeof i=="object":t===typeof i)}var Kk=O1(function(i,e){var t={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function o(y){return y=Math.round(y),y<0?0:y>255?255:y}function l(y){return y<0?0:y>1?1:y}function u(y){return y[y.length-1]==="%"?o(parseFloat(y)/100*255):o(parseInt(y))}function m(y){return y[y.length-1]==="%"?l(parseFloat(y)/100):l(parseFloat(y))}function r(y,b,v){return v<0?v+=1:v>1&&(v-=1),v*6<1?y+(b-y)*v*6:v*2<1?b:v*3<2?y+(b-y)*(2/3-v)*6:y}function h(y){var b=y.replace(/ /g,"").toLowerCase();if(b in t)return t[b].slice();if(b[0]==="#"){if(b.length===4){var v=parseInt(b.substr(1),16);return v>=0&&v<=4095?[(v&3840)>>4|(v&3840)>>8,v&240|(v&240)>>4,v&15|(v&15)<<4,1]:null}else if(b.length===7){var v=parseInt(b.substr(1),16);return v>=0&&v<=16777215?[(v&16711680)>>16,(v&65280)>>8,v&255,1]:null}return null}var w=b.indexOf("("),x=b.indexOf(")");if(w!==-1&&x+1===b.length){var C=b.substr(0,w),T=b.substr(w+1,x-(w+1)).split(","),S=1;switch(C){case"rgba":if(T.length!==4)return null;S=m(T.pop());case"rgb":return T.length!==3?null:[u(T[0]),u(T[1]),u(T[2]),S];case"hsla":if(T.length!==4)return null;S=m(T.pop());case"hsl":if(T.length!==3)return null;var M=(parseFloat(T[0])%360+360)%360/360,O=m(T[1]),V=m(T[2]),X=V<=.5?V*(O+1):V+O-V*O,Z=V*2-X;return[o(r(Z,X,M+1/3)*255),o(r(Z,X,M)*255),o(r(Z,X,M-1/3)*255),S];default:return null}}return null}try{e.parseCSSColor=h}catch{}});class au{constructor(e,t,o,l=1){this.r=e,this.g=t,this.b=o,this.a=l}static parse(e){if(!e)return;if(e instanceof au)return e;if(typeof e!="string")return;const t=Kk.parseCSSColor(e);if(!!t)return new au(t[0]/255*t[3],t[1]/255*t[3],t[2]/255*t[3],t[3])}toString(){const[e,t,o,l]=this.toArray();return`rgba(${Math.round(e)},${Math.round(t)},${Math.round(o)},${l})`}toArray(){const{r:e,g:t,b:o,a:l}=this;return l===0?[0,0,0,0]:[e*255/l,t*255/l,o*255/l,l]}toArray01(){const{r:e,g:t,b:o,a:l}=this;return l===0?[0,0,0,0]:[e/l,t/l,o/l,l]}toArray01PremultipliedAlpha(){const{r:e,g:t,b:o,a:l}=this;return[e,t,o,l]}}au.black=new au(0,0,0,1);au.white=new au(1,1,1,1);au.transparent=new au(0,0,0,0);au.red=new au(1,0,0,1);au.blue=new au(0,0,1,1);var $a=au;class wg{constructor(e,t,o){e?this.sensitivity=t?"variant":"case":this.sensitivity=t?"accent":"base",this.locale=o,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(e,t){return this.collator.compare(e,t)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class X2{constructor(e,t,o,l,u){this.text=e.normalize?e.normalize():e,this.image=t,this.scale=o,this.fontStack=l,this.textColor=u}}class Ec{constructor(e){this.sections=e}static fromString(e){return new Ec([new X2(e,null,null,null,null)])}isEmpty(){return this.sections.length===0?!0:!this.sections.some(e=>e.text.length!==0||e.image&&e.image.name.length!==0)}static factory(e){return e instanceof Ec?e:Ec.fromString(e)}toString(){return this.sections.length===0?"":this.sections.map(e=>e.text).join("")}serialize(){const e=["format"];for(const t of this.sections){if(t.image){e.push(["image",t.image.name]);continue}e.push(t.text);const o={};t.fontStack&&(o["text-font"]=["literal",t.fontStack.split(",")]),t.scale&&(o["font-scale"]=t.scale),t.textColor&&(o["text-color"]=["rgba"].concat(t.textColor.toArray())),e.push(o)}return e}}class Rh{constructor(e){this.name=e.name,this.available=e.available}toString(){return this.name}static fromString(e){return e?new Rh({name:e,available:!1}):null}serialize(){return["image",this.name]}}function V4(i,e,t,o){return typeof i=="number"&&i>=0&&i<=255&&typeof e=="number"&&e>=0&&e<=255&&typeof t=="number"&&t>=0&&t<=255?typeof o>"u"||typeof o=="number"&&o>=0&&o<=1?null:`Invalid rgba value [${[i,e,t,o].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof o=="number"?[i,e,t,o]:[i,e,t]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function b1(i){if(i===null)return!0;if(typeof i=="string")return!0;if(typeof i=="boolean")return!0;if(typeof i=="number")return!0;if(i instanceof $a)return!0;if(i instanceof wg)return!0;if(i instanceof Ec)return!0;if(i instanceof Rh)return!0;if(Array.isArray(i)){for(const e of i)if(!b1(e))return!1;return!0}else if(typeof i=="object"){for(const e in i)if(!b1(i[e]))return!1;return!0}else return!1}function ka(i){if(i===null)return F1;if(typeof i=="string")return ho;if(typeof i=="boolean")return io;if(typeof i=="number")return Vn;if(i instanceof $a)return Mh;if(i instanceof wg)return R1;if(i instanceof Ec)return B1;if(i instanceof Rh)return np;if(Array.isArray(i)){const e=i.length;let t;for(const o of i){const l=ka(o);if(!t)t=l;else{if(t===l)continue;t=no;break}}return tc(t||no,e)}else return X0}function Rd(i){const e=typeof i;return i===null?"":e==="string"||e==="number"||e==="boolean"?String(i):i instanceof $a||i instanceof Ec||i instanceof Rh?i.toString():JSON.stringify(i)}class xg{constructor(e,t){this.type=e,this.value=t}static parse(e,t){if(e.length!==2)return t.error(`'literal' expression requires exactly one argument, but found ${e.length-1} instead.`);if(!b1(e[1]))return t.error("invalid value");const o=e[1];let l=ka(o);const u=t.expectedType;return l.kind==="array"&&l.N===0&&u&&u.kind==="array"&&(typeof u.N!="number"||u.N===0)&&(l=u),new xg(l,o)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}serialize(){return this.type.kind==="array"||this.type.kind==="object"?["literal",this.value]:this.value instanceof $a?["rgba"].concat(this.value.toArray()):this.value instanceof Ec?this.value.serialize():this.value}}var w1=xg;class Jk{constructor(e){this.name="ExpressionEvaluationError",this.message=e}toJSON(){return this.message}}var el=Jk;const Vm={string:ho,number:Vn,boolean:io,object:X0};class Ag{constructor(e,t){this.type=e,this.args=t}static parse(e,t){if(e.length<2)return t.error("Expected at least one argument.");let o=1,l;const u=e[0];if(u==="array"){let r;if(e.length>2){const y=e[1];if(typeof y!="string"||!(y in Vm)||y==="object")return t.error('The item type argument of "array" must be one of string, number, boolean',1);r=Vm[y],o++}else r=no;let h;if(e.length>3){if(e[2]!==null&&(typeof e[2]!="number"||e[2]<0||e[2]!==Math.floor(e[2])))return t.error('The length argument to "array" must be a positive integer literal',2);h=e[2],o++}l=tc(r,h)}else l=Vm[u];const m=[];for(;o<e.length;o++){const r=t.parse(e[o],o,no);if(!r)return null;m.push(r)}return new Ag(l,m)}evaluate(e){for(let t=0;t<this.args.length;t++){const o=this.args[t].evaluate(e);if(Yd(this.type,ka(o))){if(t===this.args.length-1)throw new el(`Expected value to be of type ${Os(this.type)}, but found ${Os(ka(o))} instead.`)}else return o}return null}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every(e=>e.outputDefined())}serialize(){const e=this.type,t=[e.kind];if(e.kind==="array"){const o=e.itemType;if(o.kind==="string"||o.kind==="number"||o.kind==="boolean"){t.push(o.kind);const l=e.N;(typeof l=="number"||this.args.length>1)&&t.push(l)}}return t.concat(this.args.map(o=>o.serialize()))}}var Lh=Ag;class z1{constructor(e){this.type=B1,this.sections=e}static parse(e,t){if(e.length<2)return t.error("Expected at least one argument.");const o=e[1];if(!Array.isArray(o)&&typeof o=="object")return t.error("First argument must be an image or text section.");const l=[];let u=!1;for(let m=1;m<=e.length-1;++m){const r=e[m];if(u&&typeof r=="object"&&!Array.isArray(r)){u=!1;let h=null;if(r["font-scale"]&&(h=t.parse(r["font-scale"],1,Vn),!h))return null;let y=null;if(r["text-font"]&&(y=t.parse(r["text-font"],1,tc(ho)),!y))return null;let b=null;if(r["text-color"]&&(b=t.parse(r["text-color"],1,Mh),!b))return null;const v=l[l.length-1];v.scale=h,v.font=y,v.textColor=b}else{const h=t.parse(e[m],1,no);if(!h)return null;const y=h.type.kind;if(y!=="string"&&y!=="value"&&y!=="null"&&y!=="resolvedImage")return t.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");u=!0,l.push({content:h,scale:null,font:null,textColor:null})}}return new z1(l)}evaluate(e){const t=o=>{const l=o.content.evaluate(e);return ka(l)===np?new X2("",l,null,null,null):new X2(Rd(l),null,o.scale?o.scale.evaluate(e):null,o.font?o.font.evaluate(e).join(","):null,o.textColor?o.textColor.evaluate(e):null)};return new Ec(this.sections.map(t))}eachChild(e){for(const t of this.sections)e(t.content),t.scale&&e(t.scale),t.font&&e(t.font),t.textColor&&e(t.textColor)}outputDefined(){return!1}serialize(){const e=["format"];for(const t of this.sections){e.push(t.content.serialize());const o={};t.scale&&(o["font-scale"]=t.scale.serialize()),t.font&&(o["text-font"]=t.font.serialize()),t.textColor&&(o["text-color"]=t.textColor.serialize()),e.push(o)}return e}}class N1{constructor(e){this.type=np,this.input=e}static parse(e,t){if(e.length!==2)return t.error("Expected two arguments.");const o=t.parse(e[1],1,ho);return o?new N1(o):t.error("No image name provided.")}evaluate(e){const t=this.input.evaluate(e),o=Rh.fromString(t);return o&&e.availableImages&&(o.available=e.availableImages.indexOf(t)>-1),o}eachChild(e){e(this.input)}outputDefined(){return!1}serialize(){return["image",this.input.serialize()]}}const Qk={"to-boolean":io,"to-color":Mh,"to-number":Vn,"to-string":ho};class kg{constructor(e,t){this.type=e,this.args=t}static parse(e,t){if(e.length<2)return t.error("Expected at least one argument.");const o=e[0];if((o==="to-boolean"||o==="to-string")&&e.length!==2)return t.error("Expected one argument.");const l=Qk[o],u=[];for(let m=1;m<e.length;m++){const r=t.parse(e[m],m,no);if(!r)return null;u.push(r)}return new kg(l,u)}evaluate(e){if(this.type.kind==="boolean")return Boolean(this.args[0].evaluate(e));if(this.type.kind==="color"){let t,o;for(const l of this.args){if(t=l.evaluate(e),o=null,t instanceof $a)return t;if(typeof t=="string"){const u=e.parseColor(t);if(u)return u}else if(Array.isArray(t)&&(t.length<3||t.length>4?o=`Invalid rbga value ${JSON.stringify(t)}: expected an array containing either three or four numeric values.`:o=V4(t[0],t[1],t[2],t[3]),!o))return new $a(t[0]/255,t[1]/255,t[2]/255,t[3])}throw new el(o||`Could not parse color from value '${typeof t=="string"?t:String(JSON.stringify(t))}'`)}else if(this.type.kind==="number"){let t=null;for(const o of this.args){if(t=o.evaluate(e),t===null)return 0;const l=Number(t);if(!isNaN(l))return l}throw new el(`Could not convert ${JSON.stringify(t)} to number.`)}else return this.type.kind==="formatted"?Ec.fromString(Rd(this.args[0].evaluate(e))):this.type.kind==="resolvedImage"?Rh.fromString(Rd(this.args[0].evaluate(e))):Rd(this.args[0].evaluate(e))}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every(e=>e.outputDefined())}serialize(){if(this.type.kind==="formatted")return new z1([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if(this.type.kind==="resolvedImage")return new N1(this.args[0]).serialize();const e=[`to-${this.type.kind}`];return this.eachChild(t=>{e.push(t.serialize())}),e}}var z0=kg;const $k=["Unknown","Point","LineString","Polygon"];class eS{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null,this.featureTileCoord=null,this.featureDistanceData=null}id(){return this.feature&&this.feature.id!==void 0?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?$k[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}distanceFromCenter(){if(this.featureTileCoord&&this.featureDistanceData){const e=this.featureDistanceData.center,t=this.featureDistanceData.scale,{x:o,y:l}=this.featureTileCoord,u=o*t-e[0],m=l*t-e[1],r=this.featureDistanceData.bearing[0],h=this.featureDistanceData.bearing[1];return r*u+h*m}return 0}parseColor(e){let t=this._parseColorCache[e];return t||(t=this._parseColorCache[e]=$a.parse(e)),t}}var q4=eS;class N0{constructor(e,t,o,l){this.name=e,this.type=t,this._evaluate=o,this.args=l}evaluate(e){return this._evaluate(e,this.args)}eachChild(e){this.args.forEach(e)}outputDefined(){return!1}serialize(){return[this.name].concat(this.args.map(e=>e.serialize()))}static parse(e,t){const o=e[0],l=N0.definitions[o];if(!l)return t.error(`Unknown expression "${o}". If you wanted a literal array, use ["literal", [...]].`,0);const u=Array.isArray(l)?l[0]:l.type,m=Array.isArray(l)?[[l[1],l[2]]]:l.overloads,r=m.filter(([y])=>!Array.isArray(y)||y.length===e.length-1);let h=null;for(const[y,b]of r){h=new Y4(t.registry,t.path,null,t.scope);const v=[];let w=!1;for(let x=1;x<e.length;x++){const C=e[x],T=Array.isArray(y)?y[x-1]:y.type,S=h.parse(C,1+v.length,T);if(!S){w=!0;break}v.push(S)}if(!w){if(Array.isArray(y)&&y.length!==v.length){h.error(`Expected ${y.length} arguments, but found ${v.length} instead.`);continue}for(let x=0;x<v.length;x++){const C=Array.isArray(y)?y[x]:y.type,T=v[x];h.concat(x+1).checkSubtype(C,T.type)}if(h.errors.length===0)return new N0(o,u,b,v)}}if(r.length===1)t.errors.push(...h.errors);else{const b=(r.length?r:m).map(([w])=>tS(w)).join(" | "),v=[];for(let w=1;w<e.length;w++){const x=t.parse(e[w],1+v.length);if(!x)return null;v.push(Os(x.type))}t.error(`Expected arguments of type ${b}, but found (${v.join(", ")}) instead.`)}return null}static register(e,t){N0.definitions=t;for(const o in t)e[o]=N0}}function tS(i){return Array.isArray(i)?`(${i.map(Os).join(", ")})`:`(${Os(i.type)}...)`}var nd=N0;class j1{constructor(e,t,o){this.type=R1,this.locale=o,this.caseSensitive=e,this.diacriticSensitive=t}static parse(e,t){if(e.length!==2)return t.error("Expected one argument.");const o=e[1];if(typeof o!="object"||Array.isArray(o))return t.error("Collator options argument must be an object.");const l=t.parse(o["case-sensitive"]===void 0?!1:o["case-sensitive"],1,io);if(!l)return null;const u=t.parse(o["diacritic-sensitive"]===void 0?!1:o["diacritic-sensitive"],1,io);if(!u)return null;let m=null;return o.locale&&(m=t.parse(o.locale,1,ho),!m)?null:new j1(l,u,m)}evaluate(e){return new wg(this.caseSensitive.evaluate(e),this.diacriticSensitive.evaluate(e),this.locale?this.locale.evaluate(e):null)}eachChild(e){e(this.caseSensitive),e(this.diacriticSensitive),this.locale&&e(this.locale)}outputDefined(){return!1}serialize(){const e={};return e["case-sensitive"]=this.caseSensitive.serialize(),e["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(e.locale=this.locale.serialize()),["collator",e]}}const ff=8192;function Sg(i,e){i[0]=Math.min(i[0],e[0]),i[1]=Math.min(i[1],e[1]),i[2]=Math.max(i[2],e[0]),i[3]=Math.max(i[3],e[1])}function iS(i){return(180+i)/360}function nS(i){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+i*Math.PI/360)))/360}function x1(i,e){return!(i[0]<=e[0]||i[2]>=e[2]||i[1]<=e[1]||i[3]>=e[3])}function rS(i,e){const t=iS(i[0]),o=nS(i[1]),l=Math.pow(2,e.z);return[Math.round(t*l*ff),Math.round(o*l*ff)]}function oS(i,e,t){const o=i[0]-e[0],l=i[1]-e[1],u=i[0]-t[0],m=i[1]-t[1];return o*m-u*l===0&&o*u<=0&&l*m<=0}function sS(i,e,t){return e[1]>i[1]!=t[1]>i[1]&&i[0]<(t[0]-e[0])*(i[1]-e[1])/(t[1]-e[1])+e[0]}function Cg(i,e){let t=!1;for(let o=0,l=e.length;o<l;o++){const u=e[o];for(let m=0,r=u.length;m<r-1;m++){if(oS(i,u[m],u[m+1]))return!1;sS(i,u[m],u[m+1])&&(t=!t)}}return t}function aS(i,e){for(let t=0;t<e.length;t++)if(Cg(i,e[t]))return!0;return!1}function lS(i,e){return i[0]*e[1]-i[1]*e[0]}function z_(i,e,t,o){const l=i[0]-t[0],u=i[1]-t[1],m=e[0]-t[0],r=e[1]-t[1],h=o[0]-t[0],y=o[1]-t[1],b=l*y-h*u,v=m*y-h*r;return b>0&&v<0||b<0&&v>0}function uS(i,e,t,o){const l=[e[0]-i[0],e[1]-i[1]],u=[o[0]-t[0],o[1]-t[1]];return lS(u,l)===0?!1:!!(z_(i,e,t,o)&&z_(t,o,i,e))}function cS(i,e,t){for(const o of t)for(let l=0;l<o.length-1;++l)if(uS(i,e,o[l],o[l+1]))return!0;return!1}function H4(i,e){for(let t=0;t<i.length;++t)if(!Cg(i[t],e))return!1;for(let t=0;t<i.length-1;++t)if(cS(i[t],i[t+1],e))return!1;return!0}function hS(i,e){for(let t=0;t<e.length;t++)if(H4(i,e[t]))return!0;return!1}function Eg(i,e,t){const o=[];for(let l=0;l<i.length;l++){const u=[];for(let m=0;m<i[l].length;m++){const r=rS(i[l][m],t);Sg(e,r),u.push(r)}o.push(u)}return o}function G4(i,e,t){const o=[];for(let l=0;l<i.length;l++){const u=Eg(i[l],e,t);o.push(u)}return o}function W4(i,e,t,o){if(i[0]<t[0]||i[0]>t[2]){const l=o*.5;let u=i[0]-t[0]>l?-o:t[0]-i[0]>l?o:0;u===0&&(u=i[0]-t[2]>l?-o:t[2]-i[0]>l?o:0),i[0]+=u}Sg(e,i)}function fS(i){i[0]=i[1]=1/0,i[2]=i[3]=-1/0}function N_(i,e,t,o){const l=Math.pow(2,o.z)*ff,u=[o.x*ff,o.y*ff],m=[];if(!i)return m;for(const r of i)for(const h of r){const y=[h.x+u[0],h.y+u[1]];W4(y,e,t,l),m.push(y)}return m}function j_(i,e,t,o){const l=Math.pow(2,o.z)*ff,u=[o.x*ff,o.y*ff],m=[];if(!i)return m;for(const r of i){const h=[];for(const y of r){const b=[y.x+u[0],y.y+u[1]];Sg(e,b),h.push(b)}m.push(h)}if(e[2]-e[0]<=l/2){fS(e);for(const r of m)for(const h of r)W4(h,e,t,l)}return m}function dS(i,e){const t=[1/0,1/0,-1/0,-1/0],o=[1/0,1/0,-1/0,-1/0],l=i.canonicalID();if(!l)return!1;if(e.type==="Polygon"){const u=Eg(e.coordinates,o,l),m=N_(i.geometry(),t,o,l);if(!x1(t,o))return!1;for(const r of m)if(!Cg(r,u))return!1}if(e.type==="MultiPolygon"){const u=G4(e.coordinates,o,l),m=N_(i.geometry(),t,o,l);if(!x1(t,o))return!1;for(const r of m)if(!aS(r,u))return!1}return!0}function pS(i,e){const t=[1/0,1/0,-1/0,-1/0],o=[1/0,1/0,-1/0,-1/0],l=i.canonicalID();if(!l)return!1;if(e.type==="Polygon"){const u=Eg(e.coordinates,o,l),m=j_(i.geometry(),t,o,l);if(!x1(t,o))return!1;for(const r of m)if(!H4(r,u))return!1}if(e.type==="MultiPolygon"){const u=G4(e.coordinates,o,l),m=j_(i.geometry(),t,o,l);if(!x1(t,o))return!1;for(const r of m)if(!hS(r,u))return!1}return!0}class Bd{constructor(e,t){this.type=io,this.geojson=e,this.geometries=t}static parse(e,t){if(e.length!==2)return t.error(`'within' expression requires exactly one argument, but found ${e.length-1} instead.`);if(b1(e[1])){const o=e[1];if(o.type==="FeatureCollection")for(let l=0;l<o.features.length;++l){const u=o.features[l].geometry.type;if(u==="Polygon"||u==="MultiPolygon")return new Bd(o,o.features[l].geometry)}else if(o.type==="Feature"){const l=o.geometry.type;if(l==="Polygon"||l==="MultiPolygon")return new Bd(o,o.geometry)}else if(o.type==="Polygon"||o.type==="MultiPolygon")return new Bd(o,o)}return t.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(e){if(e.geometry()!=null&&e.canonicalID()!=null){if(e.geometryType()==="Point")return dS(e,this.geometries);if(e.geometryType()==="LineString")return pS(e,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}serialize(){return["within",this.geojson]}}var Ig=Bd;function Tg(i){if(i instanceof nd){if(i.name==="get"&&i.args.length===1)return!1;if(i.name==="feature-state")return!1;if(i.name==="has"&&i.args.length===1)return!1;if(i.name==="properties"||i.name==="geometry-type"||i.name==="id")return!1;if(/^filter-/.test(i.name))return!1}if(i instanceof Ig)return!1;let e=!0;return i.eachChild(t=>{e&&!Tg(t)&&(e=!1)}),e}function Lg(i){if(i instanceof nd&&i.name==="feature-state")return!1;let e=!0;return i.eachChild(t=>{e&&!Lg(t)&&(e=!1)}),e}function Pg(i,e){if(i instanceof nd&&e.indexOf(i.name)>=0)return!1;let t=!0;return i.eachChild(o=>{t&&!Pg(o,e)&&(t=!1)}),t}class Mg{constructor(e,t){this.type=t.type,this.name=e,this.boundExpression=t}static parse(e,t){if(e.length!==2||typeof e[1]!="string")return t.error("'var' expression requires exactly one string literal argument.");const o=e[1];return t.scope.has(o)?new Mg(o,t.scope.get(o)):t.error(`Unknown variable "${o}". Make sure "${o}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(e){return this.boundExpression.evaluate(e)}eachChild(){}outputDefined(){return!1}serialize(){return["var",this.name]}}var X4=Mg;class Dg{constructor(e,t=[],o,l=new Xk,u=[]){this.registry=e,this.path=t,this.key=t.map(m=>`[${m}]`).join(""),this.scope=l,this.errors=u,this.expectedType=o}parse(e,t,o,l,u={}){return t?this.concat(t,o,l)._parse(e,u):this._parse(e,u)}_parse(e,t){(e===null||typeof e=="string"||typeof e=="boolean"||typeof e=="number")&&(e=["literal",e]);function o(l,u,m){return m==="assert"?new Lh(u,[l]):m==="coerce"?new z0(u,[l]):l}if(Array.isArray(e)){if(e.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const l=e[0];if(typeof l!="string")return this.error(`Expression name must be a string, but found ${typeof l} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const u=this.registry[l];if(u){let m=u.parse(e,this);if(!m)return null;if(this.expectedType){const r=this.expectedType,h=m.type;if((r.kind==="string"||r.kind==="number"||r.kind==="boolean"||r.kind==="object"||r.kind==="array")&&h.kind==="value")m=o(m,r,t.typeAnnotation||"assert");else if((r.kind==="color"||r.kind==="formatted"||r.kind==="resolvedImage")&&(h.kind==="value"||h.kind==="string"))m=o(m,r,t.typeAnnotation||"coerce");else if(this.checkSubtype(r,h))return null}if(!(m instanceof w1)&&m.type.kind!=="resolvedImage"&&Y2(m)){const r=new q4;try{m=new w1(m.type,m.evaluate(r))}catch(h){return this.error(h.message),null}}return m}return this.error(`Unknown expression "${l}". If you wanted a literal array, use ["literal", [...]].`,0)}else return typeof e>"u"?this.error("'undefined' value invalid. Use null instead."):typeof e=="object"?this.error('Bare objects invalid. Use ["literal", {...}] instead.'):this.error(`Expected an array, but found ${typeof e} instead.`)}concat(e,t,o){const l=typeof e=="number"?this.path.concat(e):this.path,u=o?this.scope.concat(o):this.scope;return new Dg(this.registry,l,t||null,u,this.errors)}error(e,...t){const o=`${this.key}${t.map(l=>`[${l}]`).join("")}`;this.errors.push(new Qc(o,e))}checkSubtype(e,t){const o=Yd(e,t);return o&&this.error(o),o}}var Y4=Dg;function Y2(i){if(i instanceof X4)return Y2(i.boundExpression);if(i instanceof nd&&i.name==="error")return!1;if(i instanceof j1)return!1;if(i instanceof Ig)return!1;const e=i instanceof z0||i instanceof Lh;let t=!0;return i.eachChild(o=>{e?t=t&&Y2(o):t=t&&o instanceof w1}),t?Tg(i)&&Pg(i,["zoom","heatmap-density","line-progress","sky-radial-progress","accumulated","is-supported-script","pitch","distance-from-center"]):!1}function U1(i,e){const t=i.length-1;let o=0,l=t,u=0,m,r;for(;o<=l;)if(u=Math.floor((o+l)/2),m=i[u],r=i[u+1],m<=e){if(u===t||e<r)return u;o=u+1}else if(m>e)l=u-1;else throw new el("Input is not a number.");return 0}class Og{constructor(e,t,o){this.type=e,this.input=t,this.labels=[],this.outputs=[];for(const[l,u]of o)this.labels.push(l),this.outputs.push(u)}static parse(e,t){if(e.length-1<4)return t.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if((e.length-1)%2!==0)return t.error("Expected an even number of arguments.");const o=t.parse(e[1],1,Vn);if(!o)return null;const l=[];let u=null;t.expectedType&&t.expectedType.kind!=="value"&&(u=t.expectedType);for(let m=1;m<e.length;m+=2){const r=m===1?-1/0:e[m],h=e[m+1],y=m,b=m+1;if(typeof r!="number")return t.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',y);if(l.length&&l[l.length-1][0]>=r)return t.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',y);const v=t.parse(h,b,u);if(!v)return null;u=u||v.type,l.push([r,v])}return new Og(u,o,l)}evaluate(e){const t=this.labels,o=this.outputs;if(t.length===1)return o[0].evaluate(e);const l=this.input.evaluate(e);if(l<=t[0])return o[0].evaluate(e);const u=t.length;if(l>=t[u-1])return o[u-1].evaluate(e);const m=U1(t,l);return o[m].evaluate(e)}eachChild(e){e(this.input);for(const t of this.outputs)e(t)}outputDefined(){return this.outputs.every(e=>e.outputDefined())}serialize(){const e=["step",this.input.serialize()];for(let t=0;t<this.labels.length;t++)t>0&&e.push(this.labels[t]),e.push(this.outputs[t].serialize());return e}}var Z4=Og,mS=rd;function rd(i,e,t,o){this.cx=3*i,this.bx=3*(t-i)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*e,this.by=3*(o-e)-this.cy,this.ay=1-this.cy-this.by,this.p1x=i,this.p1y=o,this.p2x=t,this.p2y=o}rd.prototype.sampleCurveX=function(i){return((this.ax*i+this.bx)*i+this.cx)*i};rd.prototype.sampleCurveY=function(i){return((this.ay*i+this.by)*i+this.cy)*i};rd.prototype.sampleCurveDerivativeX=function(i){return(3*this.ax*i+2*this.bx)*i+this.cx};rd.prototype.solveCurveX=function(i,e){typeof e>"u"&&(e=1e-6);var t,o,l,u,m;for(l=i,m=0;m<8;m++){if(u=this.sampleCurveX(l)-i,Math.abs(u)<e)return l;var r=this.sampleCurveDerivativeX(l);if(Math.abs(r)<1e-6)break;l=l-u/r}if(t=0,o=1,l=i,l<t)return t;if(l>o)return o;for(;t<o;){if(u=this.sampleCurveX(l),Math.abs(u-i)<e)return l;i>u?t=l:o=l,l=(o-t)*.5+t}return l};rd.prototype.solve=function(i,e){return this.sampleCurveY(this.solveCurveX(i,e))};function Du(i,e,t){return i*(1-t)+e*t}function gS(i,e,t){return new $a(Du(i.r,e.r,t),Du(i.g,e.g,t),Du(i.b,e.b,t),Du(i.a,e.a,t))}function yS(i,e,t){return i.map((o,l)=>Du(o,e[l],t))}var K4=Object.freeze({__proto__:null,number:Du,color:gS,array:yS});const J4=.95047,Q4=1,$4=1.08883,ew=4/29,Y0=6/29,tw=3*Y0*Y0,_S=Y0*Y0*Y0,vS=Math.PI/180,bS=180/Math.PI;function qm(i){return i>_S?Math.pow(i,1/3):i/tw+ew}function Hm(i){return i>Y0?i*i*i:tw*(i-ew)}function Gm(i){return 255*(i<=.0031308?12.92*i:1.055*Math.pow(i,1/2.4)-.055)}function Wm(i){return i/=255,i<=.04045?i/12.92:Math.pow((i+.055)/1.055,2.4)}function iw(i){const e=Wm(i.r),t=Wm(i.g),o=Wm(i.b),l=qm((.4124564*e+.3575761*t+.1804375*o)/J4),u=qm((.2126729*e+.7151522*t+.072175*o)/Q4),m=qm((.0193339*e+.119192*t+.9503041*o)/$4);return{l:116*u-16,a:500*(l-u),b:200*(u-m),alpha:i.a}}function nw(i){let e=(i.l+16)/116,t=isNaN(i.a)?e:e+i.a/500,o=isNaN(i.b)?e:e-i.b/200;return e=Q4*Hm(e),t=J4*Hm(t),o=$4*Hm(o),new $a(Gm(3.2404542*t-1.5371385*e-.4985314*o),Gm(-.969266*t+1.8760108*e+.041556*o),Gm(.0556434*t-.2040259*e+1.0572252*o),i.alpha)}function wS(i,e,t){return{l:Du(i.l,e.l,t),a:Du(i.a,e.a,t),b:Du(i.b,e.b,t),alpha:Du(i.alpha,e.alpha,t)}}function xS(i){const{l:e,a:t,b:o}=iw(i),l=Math.atan2(o,t)*bS;return{h:l<0?l+360:l,c:Math.sqrt(t*t+o*o),l:e,alpha:i.a}}function AS(i){const e=i.h*vS,t=i.c,o=i.l;return nw({l:o,a:Math.cos(e)*t,b:Math.sin(e)*t,alpha:i.alpha})}function kS(i,e,t){const o=e-i;return i+t*(o>180||o<-180?o-360*Math.round(o/360):o)}function SS(i,e,t){return{h:kS(i.h,e.h,t),c:Du(i.c,e.c,t),l:Du(i.l,e.l,t),alpha:Du(i.alpha,e.alpha,t)}}const Pd={forward:iw,reverse:nw,interpolate:wS},Md={forward:xS,reverse:AS,interpolate:SS};var rw=Object.freeze({__proto__:null,lab:Pd,hcl:Md});class A1{constructor(e,t,o,l,u){this.type=e,this.operator=t,this.interpolation=o,this.input=l,this.labels=[],this.outputs=[];for(const[m,r]of u)this.labels.push(m),this.outputs.push(r)}static interpolationFactor(e,t,o,l){let u=0;if(e.name==="exponential")u=Xm(t,e.base,o,l);else if(e.name==="linear")u=Xm(t,1,o,l);else if(e.name==="cubic-bezier"){const m=e.controlPoints;u=new mS(m[0],m[1],m[2],m[3]).solve(Xm(t,1,o,l))}return u}static parse(e,t){let[o,l,u,...m]=e;if(!Array.isArray(l)||l.length===0)return t.error("Expected an interpolation type expression.",1);if(l[0]==="linear")l={name:"linear"};else if(l[0]==="exponential"){const y=l[1];if(typeof y!="number")return t.error("Exponential interpolation requires a numeric base.",1,1);l={name:"exponential",base:y}}else if(l[0]==="cubic-bezier"){const y=l.slice(1);if(y.length!==4||y.some(b=>typeof b!="number"||b<0||b>1))return t.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);l={name:"cubic-bezier",controlPoints:y}}else return t.error(`Unknown interpolation type ${String(l[0])}`,1,0);if(e.length-1<4)return t.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if((e.length-1)%2!==0)return t.error("Expected an even number of arguments.");if(u=t.parse(u,2,Vn),!u)return null;const r=[];let h=null;o==="interpolate-hcl"||o==="interpolate-lab"?h=Mh:t.expectedType&&t.expectedType.kind!=="value"&&(h=t.expectedType);for(let y=0;y<m.length;y+=2){const b=m[y],v=m[y+1],w=y+3,x=y+4;if(typeof b!="number")return t.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',w);if(r.length&&r[r.length-1][0]>=b)return t.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',w);const C=t.parse(v,x,h);if(!C)return null;h=h||C.type,r.push([b,C])}return h.kind!=="number"&&h.kind!=="color"&&!(h.kind==="array"&&h.itemType.kind==="number"&&typeof h.N=="number")?t.error(`Type ${Os(h)} is not interpolatable.`):new A1(h,o,l,u,r)}evaluate(e){const t=this.labels,o=this.outputs;if(t.length===1)return o[0].evaluate(e);const l=this.input.evaluate(e);if(l<=t[0])return o[0].evaluate(e);const u=t.length;if(l>=t[u-1])return o[u-1].evaluate(e);const m=U1(t,l),r=t[m],h=t[m+1],y=A1.interpolationFactor(this.interpolation,l,r,h),b=o[m].evaluate(e),v=o[m+1].evaluate(e);return this.operator==="interpolate"?K4[this.type.kind.toLowerCase()](b,v,y):this.operator==="interpolate-hcl"?Md.reverse(Md.interpolate(Md.forward(b),Md.forward(v),y)):Pd.reverse(Pd.interpolate(Pd.forward(b),Pd.forward(v),y))}eachChild(e){e(this.input);for(const t of this.outputs)e(t)}outputDefined(){return this.outputs.every(e=>e.outputDefined())}serialize(){let e;this.interpolation.name==="linear"?e=["linear"]:this.interpolation.name==="exponential"?this.interpolation.base===1?e=["linear"]:e=["exponential",this.interpolation.base]:e=["cubic-bezier"].concat(this.interpolation.controlPoints);const t=[this.operator,e,this.input.serialize()];for(let o=0;o<this.labels.length;o++)t.push(this.labels[o],this.outputs[o].serialize());return t}}function Xm(i,e,t,o){const l=o-t,u=i-t;return l===0?0:e===1?u/l:(Math.pow(e,u)-1)/(Math.pow(e,l)-1)}var Dh=A1;class k1{constructor(e,t){this.type=e,this.args=t}static parse(e,t){if(e.length<2)return t.error("Expectected at least one argument.");let o=null;const l=t.expectedType;l&&l.kind!=="value"&&(o=l);const u=[];for(const r of e.slice(1)){const h=t.parse(r,1+u.length,o,void 0,{typeAnnotation:"omit"});if(!h)return null;o=o||h.type,u.push(h)}return l&&u.some(r=>Yd(l,r.type))?new k1(no,u):new k1(o,u)}evaluate(e){let t=null,o=0,l;for(const u of this.args){if(o++,t=u.evaluate(e),t&&t instanceof Rh&&!t.available&&(l||(l=t),t=null,o===this.args.length))return l;if(t!==null)break}return t}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every(e=>e.outputDefined())}serialize(){const e=["coalesce"];return this.eachChild(t=>{e.push(t.serialize())}),e}}var ow=k1;class Fg{constructor(e,t){this.type=t.type,this.bindings=[].concat(e),this.result=t}evaluate(e){return this.result.evaluate(e)}eachChild(e){for(const t of this.bindings)e(t[1]);e(this.result)}static parse(e,t){if(e.length<4)return t.error(`Expected at least 3 arguments, but found ${e.length-1} instead.`);const o=[];for(let u=1;u<e.length-1;u+=2){const m=e[u];if(typeof m!="string")return t.error(`Expected string, but found ${typeof m} instead.`,u);if(/[^a-zA-Z0-9_]/.test(m))return t.error("Variable names must contain only alphanumeric characters or '_'.",u);const r=t.parse(e[u+1],u+1);if(!r)return null;o.push([m,r])}const l=t.parse(e[e.length-1],e.length-1,t.expectedType,o);return l?new Fg(o,l):null}outputDefined(){return this.result.outputDefined()}serialize(){const e=["let"];for(const[t,o]of this.bindings)e.push(t,o.serialize());return e.push(this.result.serialize()),e}}var sw=Fg;class Rg{constructor(e,t,o){this.type=e,this.index=t,this.input=o}static parse(e,t){if(e.length!==3)return t.error(`Expected 2 arguments, but found ${e.length-1} instead.`);const o=t.parse(e[1],1,Vn),l=t.parse(e[2],2,tc(t.expectedType||no));if(!o||!l)return null;const u=l.type;return new Rg(u.itemType,o,l)}evaluate(e){const t=this.index.evaluate(e),o=this.input.evaluate(e);if(t<0)throw new el(`Array index out of bounds: ${t} < 0.`);if(t>=o.length)throw new el(`Array index out of bounds: ${t} > ${o.length-1}.`);if(t!==Math.floor(t))throw new el(`Array index must be an integer, but found ${t} instead.`);return o[t]}eachChild(e){e(this.index),e(this.input)}outputDefined(){return!1}serialize(){return["at",this.index.serialize(),this.input.serialize()]}}var CS=Rg;class Bg{constructor(e,t){this.type=io,this.needle=e,this.haystack=t}static parse(e,t){if(e.length!==3)return t.error(`Expected 2 arguments, but found ${e.length-1} instead.`);const o=t.parse(e[1],1,no),l=t.parse(e[2],2,no);return!o||!l?null:bg(o.type,[io,ho,Vn,F1,no])?new Bg(o,l):t.error(`Expected first argument to be of type boolean, string, number or null, but found ${Os(o.type)} instead`)}evaluate(e){const t=this.needle.evaluate(e),o=this.haystack.evaluate(e);if(o==null)return!1;if(!Zd(t,["boolean","string","number","null"]))throw new el(`Expected first argument to be of type boolean, string, number or null, but found ${Os(ka(t))} instead.`);if(!Zd(o,["string","array"]))throw new el(`Expected second argument to be of type array or string, but found ${Os(ka(o))} instead.`);return o.indexOf(t)>=0}eachChild(e){e(this.needle),e(this.haystack)}outputDefined(){return!0}serialize(){return["in",this.needle.serialize(),this.haystack.serialize()]}}var ES=Bg;class S1{constructor(e,t,o){this.type=Vn,this.needle=e,this.haystack=t,this.fromIndex=o}static parse(e,t){if(e.length<=2||e.length>=5)return t.error(`Expected 3 or 4 arguments, but found ${e.length-1} instead.`);const o=t.parse(e[1],1,no),l=t.parse(e[2],2,no);if(!o||!l)return null;if(!bg(o.type,[io,ho,Vn,F1,no]))return t.error(`Expected first argument to be of type boolean, string, number or null, but found ${Os(o.type)} instead`);if(e.length===4){const u=t.parse(e[3],3,Vn);return u?new S1(o,l,u):null}else return new S1(o,l)}evaluate(e){const t=this.needle.evaluate(e),o=this.haystack.evaluate(e);if(!Zd(t,["boolean","string","number","null"]))throw new el(`Expected first argument to be of type boolean, string, number or null, but found ${Os(ka(t))} instead.`);if(!Zd(o,["string","array"]))throw new el(`Expected second argument to be of type array or string, but found ${Os(ka(o))} instead.`);if(this.fromIndex){const l=this.fromIndex.evaluate(e);return o.indexOf(t,l)}return o.indexOf(t)}eachChild(e){e(this.needle),e(this.haystack),this.fromIndex&&e(this.fromIndex)}outputDefined(){return!1}serialize(){if(this.fromIndex!=null&&this.fromIndex!==void 0){const e=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),e]}return["index-of",this.needle.serialize(),this.haystack.serialize()]}}var IS=S1;class zg{constructor(e,t,o,l,u,m){this.inputType=e,this.type=t,this.input=o,this.cases=l,this.outputs=u,this.otherwise=m}static parse(e,t){if(e.length<5)return t.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if(e.length%2!==1)return t.error("Expected an even number of arguments.");let o,l;t.expectedType&&t.expectedType.kind!=="value"&&(l=t.expectedType);const u={},m=[];for(let y=2;y<e.length-1;y+=2){let b=e[y];const v=e[y+1];Array.isArray(b)||(b=[b]);const w=t.concat(y);if(b.length===0)return w.error("Expected at least one branch label.");for(const C of b){if(typeof C!="number"&&typeof C!="string")return w.error("Branch labels must be numbers or strings.");if(typeof C=="number"&&Math.abs(C)>Number.MAX_SAFE_INTEGER)return w.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof C=="number"&&Math.floor(C)!==C)return w.error("Numeric branch labels must be integer values.");if(!o)o=ka(C);else if(w.checkSubtype(o,ka(C)))return null;if(typeof u[String(C)]<"u")return w.error("Branch labels must be unique.");u[String(C)]=m.length}const x=t.parse(v,y,l);if(!x)return null;l=l||x.type,m.push(x)}const r=t.parse(e[1],1,no);if(!r)return null;const h=t.parse(e[e.length-1],e.length-1,l);return!h||r.type.kind!=="value"&&t.concat(1).checkSubtype(o,r.type)?null:new zg(o,l,r,u,m,h)}evaluate(e){const t=this.input.evaluate(e);return(ka(t)===this.inputType&&this.outputs[this.cases[t]]||this.otherwise).evaluate(e)}eachChild(e){e(this.input),this.outputs.forEach(e),e(this.otherwise)}outputDefined(){return this.outputs.every(e=>e.outputDefined())&&this.otherwise.outputDefined()}serialize(){const e=["match",this.input.serialize()],t=Object.keys(this.cases).sort(),o=[],l={};for(const m of t){const r=l[this.cases[m]];r===void 0?(l[this.cases[m]]=o.length,o.push([this.cases[m],[m]])):o[r][1].push(m)}const u=m=>this.inputType.kind==="number"?Number(m):m;for(const[m,r]of o)r.length===1?e.push(u(r[0])):e.push(r.map(u)),e.push(this.outputs[m].serialize());return e.push(this.otherwise.serialize()),e}}var TS=zg;class Ng{constructor(e,t,o){this.type=e,this.branches=t,this.otherwise=o}static parse(e,t){if(e.length<4)return t.error(`Expected at least 3 arguments, but found only ${e.length-1}.`);if(e.length%2!==0)return t.error("Expected an odd number of arguments.");let o;t.expectedType&&t.expectedType.kind!=="value"&&(o=t.expectedType);const l=[];for(let m=1;m<e.length-1;m+=2){const r=t.parse(e[m],m,io);if(!r)return null;const h=t.parse(e[m+1],m+1,o);if(!h)return null;l.push([r,h]),o=o||h.type}const u=t.parse(e[e.length-1],e.length-1,o);return u?new Ng(o,l,u):null}evaluate(e){for(const[t,o]of this.branches)if(t.evaluate(e))return o.evaluate(e);return this.otherwise.evaluate(e)}eachChild(e){for(const[t,o]of this.branches)e(t),e(o);e(this.otherwise)}outputDefined(){return this.branches.every(([e,t])=>t.outputDefined())&&this.otherwise.outputDefined()}serialize(){const e=["case"];return this.eachChild(t=>{e.push(t.serialize())}),e}}var LS=Ng;class C1{constructor(e,t,o,l){this.type=e,this.input=t,this.beginIndex=o,this.endIndex=l}static parse(e,t){if(e.length<=2||e.length>=5)return t.error(`Expected 3 or 4 arguments, but found ${e.length-1} instead.`);const o=t.parse(e[1],1,no),l=t.parse(e[2],2,Vn);if(!o||!l)return null;if(!bg(o.type,[tc(no),ho,no]))return t.error(`Expected first argument to be of type array or string, but found ${Os(o.type)} instead`);if(e.length===4){const u=t.parse(e[3],3,Vn);return u?new C1(o.type,o,l,u):null}else return new C1(o.type,o,l)}evaluate(e){const t=this.input.evaluate(e),o=this.beginIndex.evaluate(e);if(!Zd(t,["string","array"]))throw new el(`Expected first argument to be of type array or string, but found ${Os(ka(t))} instead.`);if(this.endIndex){const l=this.endIndex.evaluate(e);return t.slice(o,l)}return t.slice(o)}eachChild(e){e(this.input),e(this.beginIndex),this.endIndex&&e(this.endIndex)}outputDefined(){return!1}serialize(){if(this.endIndex!=null&&this.endIndex!==void 0){const e=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),e]}return["slice",this.input.serialize(),this.beginIndex.serialize()]}}var PS=C1;function U_(i,e){return i==="=="||i==="!="?e.kind==="boolean"||e.kind==="string"||e.kind==="number"||e.kind==="null"||e.kind==="value":e.kind==="string"||e.kind==="number"||e.kind==="value"}function MS(i,e,t){return e===t}function DS(i,e,t){return e!==t}function OS(i,e,t){return e<t}function FS(i,e,t){return e>t}function RS(i,e,t){return e<=t}function BS(i,e,t){return e>=t}function aw(i,e,t,o){return o.compare(e,t)===0}function zS(i,e,t,o){return!aw(i,e,t,o)}function NS(i,e,t,o){return o.compare(e,t)<0}function jS(i,e,t,o){return o.compare(e,t)>0}function US(i,e,t,o){return o.compare(e,t)<=0}function VS(i,e,t,o){return o.compare(e,t)>=0}function od(i,e,t){const o=i!=="=="&&i!=="!=";return class lw{constructor(u,m,r){this.type=io,this.lhs=u,this.rhs=m,this.collator=r,this.hasUntypedArgument=u.type.kind==="value"||m.type.kind==="value"}static parse(u,m){if(u.length!==3&&u.length!==4)return m.error("Expected two or three arguments.");const r=u[0];let h=m.parse(u[1],1,no);if(!h)return null;if(!U_(r,h.type))return m.concat(1).error(`"${r}" comparisons are not supported for type '${Os(h.type)}'.`);let y=m.parse(u[2],2,no);if(!y)return null;if(!U_(r,y.type))return m.concat(2).error(`"${r}" comparisons are not supported for type '${Os(y.type)}'.`);if(h.type.kind!==y.type.kind&&h.type.kind!=="value"&&y.type.kind!=="value")return m.error(`Cannot compare types '${Os(h.type)}' and '${Os(y.type)}'.`);o&&(h.type.kind==="value"&&y.type.kind!=="value"?h=new Lh(y.type,[h]):h.type.kind!=="value"&&y.type.kind==="value"&&(y=new Lh(h.type,[y])));let b=null;if(u.length===4){if(h.type.kind!=="string"&&y.type.kind!=="string"&&h.type.kind!=="value"&&y.type.kind!=="value")return m.error("Cannot use collator to compare non-string types.");if(b=m.parse(u[3],3,R1),!b)return null}return new lw(h,y,b)}evaluate(u){const m=this.lhs.evaluate(u),r=this.rhs.evaluate(u);if(o&&this.hasUntypedArgument){const h=ka(m),y=ka(r);if(h.kind!==y.kind||!(h.kind==="string"||h.kind==="number"))throw new el(`Expected arguments for "${i}" to be (string, string) or (number, number), but found (${h.kind}, ${y.kind}) instead.`)}if(this.collator&&!o&&this.hasUntypedArgument){const h=ka(m),y=ka(r);if(h.kind!=="string"||y.kind!=="string")return e(u,m,r)}return this.collator?t(u,m,r,this.collator.evaluate(u)):e(u,m,r)}eachChild(u){u(this.lhs),u(this.rhs),this.collator&&u(this.collator)}outputDefined(){return!0}serialize(){const u=[i];return this.eachChild(m=>{u.push(m.serialize())}),u}}}const qS=od("==",MS,aw),HS=od("!=",DS,zS),GS=od("<",OS,NS),WS=od(">",FS,jS),XS=od("<=",RS,US),YS=od(">=",BS,VS);class jg{constructor(e,t,o,l,u,m){this.type=ho,this.number=e,this.locale=t,this.currency=o,this.unit=l,this.minFractionDigits=u,this.maxFractionDigits=m}static parse(e,t){if(e.length!==3)return t.error("Expected two arguments.");const o=t.parse(e[1],1,Vn);if(!o)return null;const l=e[2];if(typeof l!="object"||Array.isArray(l))return t.error("NumberFormat options argument must be an object.");let u=null;if(l.locale&&(u=t.parse(l.locale,1,ho),!u))return null;let m=null;if(l.currency&&(m=t.parse(l.currency,1,ho),!m))return null;let r=null;if(l.unit&&(r=t.parse(l.unit,1,ho),!r))return null;let h=null;if(l["min-fraction-digits"]&&(h=t.parse(l["min-fraction-digits"],1,Vn),!h))return null;let y=null;return l["max-fraction-digits"]&&(y=t.parse(l["max-fraction-digits"],1,Vn),!y)?null:new jg(o,u,m,r,h,y)}evaluate(e){return new Intl.NumberFormat(this.locale?this.locale.evaluate(e):[],{style:this.currency&&"currency"||this.unit&&"unit"||"decimal",currency:this.currency?this.currency.evaluate(e):void 0,unit:this.unit?this.unit.evaluate(e):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(e):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(e):void 0}).format(this.number.evaluate(e))}eachChild(e){e(this.number),this.locale&&e(this.locale),this.currency&&e(this.currency),this.unit&&e(this.unit),this.minFractionDigits&&e(this.minFractionDigits),this.maxFractionDigits&&e(this.maxFractionDigits)}outputDefined(){return!1}serialize(){const e={};return this.locale&&(e.locale=this.locale.serialize()),this.currency&&(e.currency=this.currency.serialize()),this.unit&&(e.unit=this.unit.serialize()),this.minFractionDigits&&(e["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(e["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),e]}}class Ug{constructor(e){this.type=Vn,this.input=e}static parse(e,t){if(e.length!==2)return t.error(`Expected 1 argument, but found ${e.length-1} instead.`);const o=t.parse(e[1],1);return o?o.type.kind!=="array"&&o.type.kind!=="string"&&o.type.kind!=="value"?t.error(`Expected argument of type string or array, but found ${Os(o.type)} instead.`):new Ug(o):null}evaluate(e){const t=this.input.evaluate(e);if(typeof t=="string")return t.length;if(Array.isArray(t))return t.length;throw new el(`Expected value to be of type string or array, but found ${Os(ka(t))} instead.`)}eachChild(e){e(this.input)}outputDefined(){return!1}serialize(){const e=["length"];return this.eachChild(t=>{e.push(t.serialize())}),e}}var ZS=Ug;const uw={"==":qS,"!=":HS,">":WS,"<":GS,">=":YS,"<=":XS,array:Lh,at:CS,boolean:Lh,case:LS,coalesce:ow,collator:j1,format:z1,image:N1,in:ES,"index-of":IS,interpolate:Dh,"interpolate-hcl":Dh,"interpolate-lab":Dh,length:ZS,let:sw,literal:w1,match:TS,number:Lh,"number-format":jg,object:Lh,slice:PS,step:Z4,string:Lh,"to-boolean":z0,"to-color":z0,"to-number":z0,"to-string":z0,var:X4,within:Ig};function V_(i,[e,t,o,l]){e=e.evaluate(i),t=t.evaluate(i),o=o.evaluate(i);const u=l?l.evaluate(i):1,m=V4(e,t,o,u);if(m)throw new el(m);return new $a(e/255*u,t/255*u,o/255*u,u)}function q_(i,e){return i in e}function Ym(i,e){const t=e[i];return typeof t>"u"?null:t}function KS(i,e,t,o){for(;t<=o;){const l=t+o>>1;if(e[l]===i)return!0;e[l]>i?o=l-1:t=l+1}return!1}function Rf(i){return{type:i}}nd.register(uw,{error:[Yk,[ho],(i,[e])=>{throw new el(e.evaluate(i))}],typeof:[ho,[no],(i,[e])=>Os(ka(e.evaluate(i)))],"to-rgba":[tc(Vn,4),[Mh],(i,[e])=>e.evaluate(i).toArray()],rgb:[Mh,[Vn,Vn,Vn],V_],rgba:[Mh,[Vn,Vn,Vn,Vn],V_],has:{type:io,overloads:[[[ho],(i,[e])=>q_(e.evaluate(i),i.properties())],[[ho,X0],(i,[e,t])=>q_(e.evaluate(i),t.evaluate(i))]]},get:{type:no,overloads:[[[ho],(i,[e])=>Ym(e.evaluate(i),i.properties())],[[ho,X0],(i,[e,t])=>Ym(e.evaluate(i),t.evaluate(i))]]},"feature-state":[no,[ho],(i,[e])=>Ym(e.evaluate(i),i.featureState||{})],properties:[X0,[],i=>i.properties()],"geometry-type":[ho,[],i=>i.geometryType()],id:[no,[],i=>i.id()],zoom:[Vn,[],i=>i.globals.zoom],pitch:[Vn,[],i=>i.globals.pitch||0],"distance-from-center":[Vn,[],i=>i.distanceFromCenter()],"heatmap-density":[Vn,[],i=>i.globals.heatmapDensity||0],"line-progress":[Vn,[],i=>i.globals.lineProgress||0],"sky-radial-progress":[Vn,[],i=>i.globals.skyRadialProgress||0],accumulated:[no,[],i=>i.globals.accumulated===void 0?null:i.globals.accumulated],"+":[Vn,Rf(Vn),(i,e)=>{let t=0;for(const o of e)t+=o.evaluate(i);return t}],"*":[Vn,Rf(Vn),(i,e)=>{let t=1;for(const o of e)t*=o.evaluate(i);return t}],"-":{type:Vn,overloads:[[[Vn,Vn],(i,[e,t])=>e.evaluate(i)-t.evaluate(i)],[[Vn],(i,[e])=>-e.evaluate(i)]]},"/":[Vn,[Vn,Vn],(i,[e,t])=>e.evaluate(i)/t.evaluate(i)],"%":[Vn,[Vn,Vn],(i,[e,t])=>e.evaluate(i)%t.evaluate(i)],ln2:[Vn,[],()=>Math.LN2],pi:[Vn,[],()=>Math.PI],e:[Vn,[],()=>Math.E],"^":[Vn,[Vn,Vn],(i,[e,t])=>Math.pow(e.evaluate(i),t.evaluate(i))],sqrt:[Vn,[Vn],(i,[e])=>Math.sqrt(e.evaluate(i))],log10:[Vn,[Vn],(i,[e])=>Math.log(e.evaluate(i))/Math.LN10],ln:[Vn,[Vn],(i,[e])=>Math.log(e.evaluate(i))],log2:[Vn,[Vn],(i,[e])=>Math.log(e.evaluate(i))/Math.LN2],sin:[Vn,[Vn],(i,[e])=>Math.sin(e.evaluate(i))],cos:[Vn,[Vn],(i,[e])=>Math.cos(e.evaluate(i))],tan:[Vn,[Vn],(i,[e])=>Math.tan(e.evaluate(i))],asin:[Vn,[Vn],(i,[e])=>Math.asin(e.evaluate(i))],acos:[Vn,[Vn],(i,[e])=>Math.acos(e.evaluate(i))],atan:[Vn,[Vn],(i,[e])=>Math.atan(e.evaluate(i))],min:[Vn,Rf(Vn),(i,e)=>Math.min(...e.map(t=>t.evaluate(i)))],max:[Vn,Rf(Vn),(i,e)=>Math.max(...e.map(t=>t.evaluate(i)))],abs:[Vn,[Vn],(i,[e])=>Math.abs(e.evaluate(i))],round:[Vn,[Vn],(i,[e])=>{const t=e.evaluate(i);return t<0?-Math.round(-t):Math.round(t)}],floor:[Vn,[Vn],(i,[e])=>Math.floor(e.evaluate(i))],ceil:[Vn,[Vn],(i,[e])=>Math.ceil(e.evaluate(i))],"filter-==":[io,[ho,no],(i,[e,t])=>i.properties()[e.value]===t.value],"filter-id-==":[io,[no],(i,[e])=>i.id()===e.value],"filter-type-==":[io,[ho],(i,[e])=>i.geometryType()===e.value],"filter-<":[io,[ho,no],(i,[e,t])=>{const o=i.properties()[e.value],l=t.value;return typeof o==typeof l&&o<l}],"filter-id-<":[io,[no],(i,[e])=>{const t=i.id(),o=e.value;return typeof t==typeof o&&t<o}],"filter->":[io,[ho,no],(i,[e,t])=>{const o=i.properties()[e.value],l=t.value;return typeof o==typeof l&&o>l}],"filter-id->":[io,[no],(i,[e])=>{const t=i.id(),o=e.value;return typeof t==typeof o&&t>o}],"filter-<=":[io,[ho,no],(i,[e,t])=>{const o=i.properties()[e.value],l=t.value;return typeof o==typeof l&&o<=l}],"filter-id-<=":[io,[no],(i,[e])=>{const t=i.id(),o=e.value;return typeof t==typeof o&&t<=o}],"filter->=":[io,[ho,no],(i,[e,t])=>{const o=i.properties()[e.value],l=t.value;return typeof o==typeof l&&o>=l}],"filter-id->=":[io,[no],(i,[e])=>{const t=i.id(),o=e.value;return typeof t==typeof o&&t>=o}],"filter-has":[io,[no],(i,[e])=>e.value in i.properties()],"filter-has-id":[io,[],i=>i.id()!==null&&i.id()!==void 0],"filter-type-in":[io,[tc(ho)],(i,[e])=>e.value.indexOf(i.geometryType())>=0],"filter-id-in":[io,[tc(no)],(i,[e])=>e.value.indexOf(i.id())>=0],"filter-in-small":[io,[ho,tc(no)],(i,[e,t])=>t.value.indexOf(i.properties()[e.value])>=0],"filter-in-large":[io,[ho,tc(no)],(i,[e,t])=>KS(i.properties()[e.value],t.value,0,t.value.length-1)],all:{type:io,overloads:[[[io,io],(i,[e,t])=>e.evaluate(i)&&t.evaluate(i)],[Rf(io),(i,e)=>{for(const t of e)if(!t.evaluate(i))return!1;return!0}]]},any:{type:io,overloads:[[[io,io],(i,[e,t])=>e.evaluate(i)||t.evaluate(i)],[Rf(io),(i,e)=>{for(const t of e)if(t.evaluate(i))return!0;return!1}]]},"!":[io,[io],(i,[e])=>!e.evaluate(i)],"is-supported-script":[io,[ho],(i,[e])=>{const t=i.globals&&i.globals.isSupportedScript;return t?t(e.evaluate(i)):!0}],upcase:[ho,[ho],(i,[e])=>e.evaluate(i).toUpperCase()],downcase:[ho,[ho],(i,[e])=>e.evaluate(i).toLowerCase()],concat:[ho,Rf(no),(i,e)=>e.map(t=>Rd(t.evaluate(i))).join("")],"resolved-locale":[ho,[R1],(i,[e])=>e.evaluate(i).resolvedLocale()]});var cw=uw;function Z2(i){return{result:"success",value:i}}function F0(i){return{result:"error",value:i}}function JS(i){return i["property-type"]==="data-driven"||i["property-type"]==="cross-faded-data-driven"}function QS(i){return!!i.expression&&i.expression.parameters.indexOf("zoom")>-1}function hw(i){return!!i.expression&&i.expression.interpolated}function Vg(i){return i instanceof Number?"number":i instanceof String?"string":i instanceof Boolean?"boolean":Array.isArray(i)?"array":i===null?"null":typeof i}function qg(i){return typeof i=="object"&&i!==null&&!Array.isArray(i)}function $S(i){return i}function Hg(i,e){const t=e.type==="color",o=i.stops&&typeof i.stops[0][0]=="object",l=o||i.property!==void 0,u=o||!l,m=i.type||(hw(e)?"exponential":"interval");if(t&&(i=U4({},i),i.stops&&(i.stops=i.stops.map(b=>[b[0],$a.parse(b[1])])),i.default?i.default=$a.parse(i.default):i.default=$a.parse(e.default)),i.colorSpace&&i.colorSpace!=="rgb"&&!rw[i.colorSpace])throw new Error(`Unknown color space: ${i.colorSpace}`);let r,h,y;if(m==="exponential")r=H_;else if(m==="interval")r=tC;else if(m==="categorical"){r=eC,h=Object.create(null);for(const b of i.stops)h[b[0]]=b[1];y=typeof i.stops[0][0]}else if(m==="identity")r=iC;else throw new Error(`Unknown function type "${m}"`);if(o){const b={},v=[];for(let C=0;C<i.stops.length;C++){const T=i.stops[C],S=T[0].zoom;b[S]===void 0&&(b[S]={zoom:S,type:i.type,property:i.property,default:i.default,stops:[]},v.push(S)),b[S].stops.push([T[0].value,T[1]])}const w=[];for(const C of v)w.push([b[C].zoom,Hg(b[C],e)]);const x={name:"linear"};return{kind:"composite",interpolationType:x,interpolationFactor:Dh.interpolationFactor.bind(void 0,x),zoomStops:w.map(C=>C[0]),evaluate({zoom:C},T){return H_({stops:w,base:i.base},e,C).evaluate(C,T)}}}else if(u){const b=m==="exponential"?{name:"exponential",base:i.base!==void 0?i.base:1}:null;return{kind:"camera",interpolationType:b,interpolationFactor:Dh.interpolationFactor.bind(void 0,b),zoomStops:i.stops.map(v=>v[0]),evaluate:({zoom:v})=>r(i,e,v,h,y)}}else return{kind:"source",evaluate(b,v){const w=v&&v.properties?v.properties[i.property]:void 0;return w===void 0?rp(i.default,e.default):r(i,e,w,h,y)}}}function rp(i,e,t){if(i!==void 0)return i;if(e!==void 0)return e;if(t!==void 0)return t}function eC(i,e,t,o,l){const u=typeof t===l?o[t]:void 0;return rp(u,i.default,e.default)}function tC(i,e,t){if(Vg(t)!=="number")return rp(i.default,e.default);const o=i.stops.length;if(o===1||t<=i.stops[0][0])return i.stops[0][1];if(t>=i.stops[o-1][0])return i.stops[o-1][1];const l=U1(i.stops.map(u=>u[0]),t);return i.stops[l][1]}function H_(i,e,t){const o=i.base!==void 0?i.base:1;if(Vg(t)!=="number")return rp(i.default,e.default);const l=i.stops.length;if(l===1||t<=i.stops[0][0])return i.stops[0][1];if(t>=i.stops[l-1][0])return i.stops[l-1][1];const u=U1(i.stops.map(b=>b[0]),t),m=nC(t,o,i.stops[u][0],i.stops[u+1][0]),r=i.stops[u][1],h=i.stops[u+1][1];let y=K4[e.type]||$S;if(i.colorSpace&&i.colorSpace!=="rgb"){const b=rw[i.colorSpace];y=(v,w)=>b.reverse(b.interpolate(b.forward(v),b.forward(w),m))}return typeof r.evaluate=="function"?{evaluate(...b){const v=r.evaluate.apply(void 0,b),w=h.evaluate.apply(void 0,b);if(!(v===void 0||w===void 0))return y(v,w,m)}}:y(r,h,m)}function iC(i,e,t){return e.type==="color"?t=$a.parse(t):e.type==="formatted"?t=Ec.fromString(t.toString()):e.type==="resolvedImage"?t=Rh.fromString(t.toString()):Vg(t)!==e.type&&(e.type!=="enum"||!e.values[t])&&(t=void 0),rp(t,i.default,e.default)}function nC(i,e,t,o){const l=o-t,u=i-t;return l===0?0:e===1?u/l:(Math.pow(e,u)-1)/(Math.pow(e,l)-1)}class fw{constructor(e,t){this.expression=e,this._warningHistory={},this._evaluator=new q4,this._defaultValue=t?sC(t):null,this._enumValues=t&&t.type==="enum"?t.values:null}evaluateWithoutErrorHandling(e,t,o,l,u,m,r,h){return this._evaluator.globals=e,this._evaluator.feature=t,this._evaluator.featureState=o,this._evaluator.canonical=l||null,this._evaluator.availableImages=u||null,this._evaluator.formattedSection=m,this._evaluator.featureTileCoord=r||null,this._evaluator.featureDistanceData=h||null,this.expression.evaluate(this._evaluator)}evaluate(e,t,o,l,u,m,r,h){this._evaluator.globals=e,this._evaluator.feature=t||null,this._evaluator.featureState=o||null,this._evaluator.canonical=l||null,this._evaluator.availableImages=u||null,this._evaluator.formattedSection=m||null,this._evaluator.featureTileCoord=r||null,this._evaluator.featureDistanceData=h||null;try{const y=this.expression.evaluate(this._evaluator);if(y==null||typeof y=="number"&&y!==y)return this._defaultValue;if(this._enumValues&&!(y in this._enumValues))throw new el(`Expected value to be one of ${Object.keys(this._enumValues).map(b=>JSON.stringify(b)).join(", ")}, but found ${JSON.stringify(y)} instead.`);return y}catch(y){return this._warningHistory[y.message]||(this._warningHistory[y.message]=!0,typeof console<"u"&&console.warn(y.message)),this._defaultValue}}}function dw(i){return Array.isArray(i)&&i.length>0&&typeof i[0]=="string"&&i[0]in cw}function pw(i,e){const t=new Y4(cw,[],e?oC(e):void 0),o=t.parse(i,void 0,void 0,void 0,e&&e.type==="string"?{typeAnnotation:"coerce"}:void 0);return o?Z2(new fw(o,e)):F0(t.errors)}class K2{constructor(e,t){this.kind=e,this._styleExpression=t,this.isStateDependent=e!=="constant"&&!Lg(t.expression)}evaluateWithoutErrorHandling(e,t,o,l,u,m){return this._styleExpression.evaluateWithoutErrorHandling(e,t,o,l,u,m)}evaluate(e,t,o,l,u,m){return this._styleExpression.evaluate(e,t,o,l,u,m)}}class J2{constructor(e,t,o,l){this.kind=e,this.zoomStops=o,this._styleExpression=t,this.isStateDependent=e!=="camera"&&!Lg(t.expression),this.interpolationType=l}evaluateWithoutErrorHandling(e,t,o,l,u,m){return this._styleExpression.evaluateWithoutErrorHandling(e,t,o,l,u,m)}evaluate(e,t,o,l,u,m){return this._styleExpression.evaluate(e,t,o,l,u,m)}interpolationFactor(e,t,o){return this.interpolationType?Dh.interpolationFactor(this.interpolationType,e,t,o):0}}function mw(i,e){if(i=pw(i,e),i.result==="error")return i;const t=i.value.expression,o=Tg(t);if(!o&&!JS(e))return F0([new Qc("","data expressions not supported")]);const l=Pg(t,["zoom","pitch","distance-from-center"]);if(!l&&!QS(e))return F0([new Qc("","zoom expressions not supported")]);const u=a1(t);if(!u&&!l)return F0([new Qc("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')]);if(u instanceof Qc)return F0([u]);if(u instanceof Dh&&!hw(e))return F0([new Qc("",'"interpolate" expressions cannot be used with this property')]);if(!u)return Z2(o?new K2("constant",i.value):new K2("source",i.value));const m=u instanceof Dh?u.interpolation:void 0;return Z2(o?new J2("camera",i.value,u.labels,m):new J2("composite",i.value,u.labels,m))}class V1{constructor(e,t){this._parameters=e,this._specification=t,U4(this,Hg(this._parameters,this._specification))}static deserialize(e){return new V1(e._parameters,e._specification)}static serialize(e){return{_parameters:e._parameters,_specification:e._specification}}}function rC(i,e){if(qg(i))return new V1(i,e);if(dw(i)){const t=mw(i,e);if(t.result==="error")throw new Error(t.value.map(o=>`${o.key}: ${o.message}`).join(", "));return t.value}else{let t=i;return typeof i=="string"&&e.type==="color"&&(t=$a.parse(i)),{kind:"constant",evaluate:()=>t}}}function a1(i){let e=null;if(i instanceof sw)e=a1(i.result);else if(i instanceof ow){for(const t of i.args)if(e=a1(t),e)break}else(i instanceof Z4||i instanceof Dh)&&i.input instanceof nd&&i.input.name==="zoom"&&(e=i);return e instanceof Qc||i.eachChild(t=>{const o=a1(t);o instanceof Qc?e=o:!e&&o?e=new Qc("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):e&&o&&e!==o&&(e=new Qc("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),e}function oC(i){const e={color:Mh,string:ho,number:Vn,enum:ho,boolean:io,formatted:B1,resolvedImage:np};return i.type==="array"?tc(e[i.value]||no,i.length):e[i.type]}function sC(i){return i.type==="color"&&(qg(i.default)||Array.isArray(i.default))?new $a(0,0,0,0):i.type==="color"?$a.parse(i.default)||null:i.default===void 0?null:i.default}function Kd(i){return typeof i=="object"?["literal",i]:i}function aC(i,e){let t=i.stops;if(!t)return lC(i,e);const o=t&&typeof t[0][0]=="object",l=o||i.property!==void 0,u=o||!l;return t=t.map(m=>!l&&e.tokens&&typeof m[1]=="string"?[m[0],fC(m[1])]:[m[0],Kd(m[1])]),o?uC(i,e,t):u?hC(i,e,t):Q2(i,e,t)}function lC(i,e){const t=["get",i.property];if(i.default===void 0)return e.type==="string"?["string",t]:t;if(e.type==="enum")return["match",t,Object.keys(e.values),t,i.default];{const o=[e.type==="color"?"to-color":e.type,t,Kd(i.default)];return e.type==="array"&&o.splice(1,0,e.value,e.length||null),o}}function Gg(i){switch(i.colorSpace){case"hcl":return"interpolate-hcl";case"lab":return"interpolate-lab";default:return"interpolate"}}function uC(i,e,t){const o={},l={},u=[];for(let r=0;r<t.length;r++){const h=t[r],y=h[0].zoom;o[y]===void 0&&(o[y]={zoom:y,type:i.type,property:i.property,default:i.default},l[y]=[],u.push(y)),l[y].push([h[0].value,h[1]])}if(Xg({},e)==="exponential"){const r=[Gg(i),["linear"],["zoom"]];for(const h of u){const y=Q2(o[h],e,l[h]);Z0(r,h,y,!1)}return r}else{const r=["step",["zoom"]];for(const h of u){const y=Q2(o[h],e,l[h]);Z0(r,h,y,!0)}return Wg(r),r}}function cC(i,e){if(i!==void 0)return i;if(e!==void 0)return e}function G_(i,e){const t=Kd(cC(i.default,e.default));return t===void 0&&e.type==="resolvedImage"?"":t}function Q2(i,e,t){const o=Xg(i,e),l=["get",i.property];if(o==="categorical"&&typeof t[0][0]=="boolean"){const u=["case"];for(const m of t)u.push(["==",l,m[0]],m[1]);return u.push(G_(i,e)),u}else if(o==="categorical"){const u=["match",l];for(const m of t)Z0(u,m[0],m[1],!1);return u.push(G_(i,e)),u}else if(o==="interval"){const u=["step",["number",l]];for(const m of t)Z0(u,m[0],m[1],!0);return Wg(u),i.default===void 0?u:["case",["==",["typeof",l],"number"],u,Kd(i.default)]}else if(o==="exponential"){const u=i.base!==void 0?i.base:1,m=[Gg(i),u===1?["linear"]:["exponential",u],["number",l]];for(const r of t)Z0(m,r[0],r[1],!1);return i.default===void 0?m:["case",["==",["typeof",l],"number"],m,Kd(i.default)]}else throw new Error(`Unknown property function type ${o}`)}function hC(i,e,t,o=["zoom"]){const l=Xg(i,e);let u,m=!1;if(l==="interval")u=["step",o],m=!0;else if(l==="exponential"){const r=i.base!==void 0?i.base:1;u=[Gg(i),r===1?["linear"]:["exponential",r],o]}else throw new Error(`Unknown zoom function type "${l}"`);for(const r of t)Z0(u,r[0],r[1],m);return Wg(u),u}function Wg(i){i[0]==="step"&&i.length===3&&(i.push(0),i.push(i[3]))}function Z0(i,e,t,o){i.length>3&&e===i[i.length-2]||(o&&i.length===2||i.push(e),i.push(t))}function Xg(i,e){return i.type?i.type:e.expression.interpolated?"exponential":"interval"}function fC(i){const e=["concat"],t=/{([^{}]+)}/g;let o=0;for(let l=t.exec(i);l!==null;l=t.exec(i)){const u=i.slice(o,t.lastIndex-l[0].length);o=t.lastIndex,u.length>0&&e.push(u),e.push(["get",l[1]])}if(e.length===1)return i;if(o<i.length)e.push(i.slice(o));else if(e.length===2)return["to-string",e[1]];return e}function gw(i){if(i===!0||i===!1)return!0;if(!Array.isArray(i)||i.length===0)return!1;switch(i[0]){case"has":return i.length>=2&&i[1]!=="$id"&&i[1]!=="$type";case"in":return i.length>=3&&(typeof i[1]!="string"||Array.isArray(i[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return i.length!==3||Array.isArray(i[1])||Array.isArray(i[2]);case"any":case"all":for(const e of i.slice(1))if(!gw(e)&&typeof e!="boolean")return!1;return!0;default:return!0}}O1(function(i,e){var t=function(){var o=function(M,O,V,X){for(V=V||{},X=M.length;X--;V[M[X]]=O);return V},l=[1,12],u=[1,13],m=[1,9],r=[1,10],h=[1,11],y=[1,14],b=[1,15],v=[14,18,22,24],w=[18,22],x=[22,24],C={trace:function(){},yy:{},symbols_:{error:2,JSONString:3,STRING:4,JSONNumber:5,NUMBER:6,JSONNullLiteral:7,NULL:8,JSONBooleanLiteral:9,TRUE:10,FALSE:11,JSONText:12,JSONValue:13,EOF:14,JSONObject:15,JSONArray:16,"{":17,"}":18,JSONMemberList:19,JSONMember:20,":":21,",":22,"[":23,"]":24,JSONElementList:25,$accept:0,$end:1},terminals_:{2:"error",4:"STRING",6:"NUMBER",8:"NULL",10:"TRUE",11:"FALSE",14:"EOF",17:"{",18:"}",21:":",22:",",23:"[",24:"]"},productions_:[0,[3,1],[5,1],[7,1],[9,1],[9,1],[12,2],[13,1],[13,1],[13,1],[13,1],[13,1],[13,1],[15,2],[15,3],[20,3],[19,1],[19,3],[16,2],[16,3],[25,1],[25,3]],performAction:function(O,V,X,Z,ee,J,ie){var ke=J.length-1;switch(ee){case 1:this.$=new String(O.replace(/\\(\\|")/g,"$1").replace(/\\n/g,`
`).replace(/\\r/g,"\r").replace(/\\t/g,"	").replace(/\\v/g,"\v").replace(/\\f/g,"\f").replace(/\\b/g,"\b")),this.$.__line__=this._$.first_line;break;case 2:this.$=new Number(O),this.$.__line__=this._$.first_line;break;case 3:this.$=null;break;case 4:this.$=new Boolean(!0),this.$.__line__=this._$.first_line;break;case 5:this.$=new Boolean(!1),this.$.__line__=this._$.first_line;break;case 6:return this.$=J[ke-1];case 13:this.$={},Object.defineProperty(this.$,"__line__",{value:this._$.first_line,enumerable:!1});break;case 14:case 19:this.$=J[ke-1],Object.defineProperty(this.$,"__line__",{value:this._$.first_line,enumerable:!1});break;case 15:this.$=[J[ke-2],J[ke]];break;case 16:this.$={},this.$[J[ke][0]]=J[ke][1];break;case 17:this.$=J[ke-2],J[ke-2][J[ke][0]]=J[ke][1];break;case 18:this.$=[],Object.defineProperty(this.$,"__line__",{value:this._$.first_line,enumerable:!1});break;case 20:this.$=[J[ke]];break;case 21:this.$=J[ke-2],J[ke-2].push(J[ke]);break}},table:[{3:5,4:l,5:6,6:u,7:3,8:m,9:4,10:r,11:h,12:1,13:2,15:7,16:8,17:y,23:b},{1:[3]},{14:[1,16]},o(v,[2,7]),o(v,[2,8]),o(v,[2,9]),o(v,[2,10]),o(v,[2,11]),o(v,[2,12]),o(v,[2,3]),o(v,[2,4]),o(v,[2,5]),o([14,18,21,22,24],[2,1]),o(v,[2,2]),{3:20,4:l,18:[1,17],19:18,20:19},{3:5,4:l,5:6,6:u,7:3,8:m,9:4,10:r,11:h,13:23,15:7,16:8,17:y,23:b,24:[1,21],25:22},{1:[2,6]},o(v,[2,13]),{18:[1,24],22:[1,25]},o(w,[2,16]),{21:[1,26]},o(v,[2,18]),{22:[1,28],24:[1,27]},o(x,[2,20]),o(v,[2,14]),{3:20,4:l,20:29},{3:5,4:l,5:6,6:u,7:3,8:m,9:4,10:r,11:h,13:30,15:7,16:8,17:y,23:b},o(v,[2,19]),{3:5,4:l,5:6,6:u,7:3,8:m,9:4,10:r,11:h,13:31,15:7,16:8,17:y,23:b},o(w,[2,17]),o(w,[2,15]),o(x,[2,21])],defaultActions:{16:[2,6]},parseError:function(O,V){if(V.recoverable)this.trace(O);else throw new Error(O)},parse:function(O){var V=this,X=[0],Z=[null],ee=[],J=this.table,ie="",ke=0,Le=0,fe=2,Te=1,_e=ee.slice.call(arguments,1),ve=Object.create(this.lexer),rt={yy:{}};for(var nt in this.yy)Object.prototype.hasOwnProperty.call(this.yy,nt)&&(rt.yy[nt]=this.yy[nt]);ve.setInput(O,rt.yy),rt.yy.lexer=ve,rt.yy.parser=this,typeof ve.yylloc>"u"&&(ve.yylloc={});var Tt=ve.yylloc;ee.push(Tt);var We=ve.options&&ve.options.ranges;typeof rt.yy.parseError=="function"?this.parseError=rt.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;function be(){var Ke;return Ke=ve.lex()||Te,typeof Ke!="number"&&(Ke=V.symbols_[Ke]||Ke),Ke}for(var Ce,Be,le,Ee,he={},me,Fe,Xe,lt;;){if(Be=X[X.length-1],this.defaultActions[Be]?le=this.defaultActions[Be]:((Ce===null||typeof Ce>"u")&&(Ce=be()),le=J[Be]&&J[Be][Ce]),typeof le>"u"||!le.length||!le[0]){var Ye="";lt=[];for(me in J[Be])this.terminals_[me]&&me>fe&&lt.push("'"+this.terminals_[me]+"'");ve.showPosition?Ye="Parse error on line "+(ke+1)+`:
`+ve.showPosition()+`
Expecting `+lt.join(", ")+", got '"+(this.terminals_[Ce]||Ce)+"'":Ye="Parse error on line "+(ke+1)+": Unexpected "+(Ce==Te?"end of input":"'"+(this.terminals_[Ce]||Ce)+"'"),this.parseError(Ye,{text:ve.match,token:this.terminals_[Ce]||Ce,line:ve.yylineno,loc:Tt,expected:lt})}if(le[0]instanceof Array&&le.length>1)throw new Error("Parse Error: multiple actions possible at state: "+Be+", token: "+Ce);switch(le[0]){case 1:X.push(Ce),Z.push(ve.yytext),ee.push(ve.yylloc),X.push(le[1]),Ce=null,Le=ve.yyleng,ie=ve.yytext,ke=ve.yylineno,Tt=ve.yylloc;break;case 2:if(Fe=this.productions_[le[1]][1],he.$=Z[Z.length-Fe],he._$={first_line:ee[ee.length-(Fe||1)].first_line,last_line:ee[ee.length-1].last_line,first_column:ee[ee.length-(Fe||1)].first_column,last_column:ee[ee.length-1].last_column},We&&(he._$.range=[ee[ee.length-(Fe||1)].range[0],ee[ee.length-1].range[1]]),Ee=this.performAction.apply(he,[ie,Le,ke,rt.yy,le[1],Z,ee].concat(_e)),typeof Ee<"u")return Ee;Fe&&(X=X.slice(0,-1*Fe*2),Z=Z.slice(0,-1*Fe),ee=ee.slice(0,-1*Fe)),X.push(this.productions_[le[1]][0]),Z.push(he.$),ee.push(he._$),Xe=J[X[X.length-2]][X[X.length-1]],X.push(Xe);break;case 3:return!0}}return!0}},T=function(){var M={EOF:1,parseError:function(V,X){if(this.yy.parser)this.yy.parser.parseError(V,X);else throw new Error(V)},setInput:function(O,V){return this.yy=V||this.yy||{},this._input=O,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var O=this._input[0];this.yytext+=O,this.yyleng++,this.offset++,this.match+=O,this.matched+=O;var V=O.match(/(?:\r\n?|\n).*/g);return V?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),O},unput:function(O){var V=O.length,X=O.split(/(?:\r\n?|\n)/g);this._input=O+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-V),this.offset-=V;var Z=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),X.length-1&&(this.yylineno-=X.length-1);var ee=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:X?(X.length===Z.length?this.yylloc.first_column:0)+Z[Z.length-X.length].length-X[0].length:this.yylloc.first_column-V},this.options.ranges&&(this.yylloc.range=[ee[0],ee[0]+this.yyleng-V]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},less:function(O){this.unput(this.match.slice(O))},pastInput:function(){var O=this.matched.substr(0,this.matched.length-this.match.length);return(O.length>20?"...":"")+O.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var O=this.match;return O.length<20&&(O+=this._input.substr(0,20-O.length)),(O.substr(0,20)+(O.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var O=this.pastInput(),V=new Array(O.length+1).join("-");return O+this.upcomingInput()+`
`+V+"^"},test_match:function(O,V){var X,Z,ee;if(this.options.backtrack_lexer&&(ee={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(ee.yylloc.range=this.yylloc.range.slice(0))),Z=O[0].match(/(?:\r\n?|\n).*/g),Z&&(this.yylineno+=Z.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:Z?Z[Z.length-1].length-Z[Z.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+O[0].length},this.yytext+=O[0],this.match+=O[0],this.matches=O,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(O[0].length),this.matched+=O[0],X=this.performAction.call(this,this.yy,this,V,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),X)return X;if(this._backtrack){for(var J in ee)this[J]=ee[J];return!1}return!1},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var O,V,X,Z;this._more||(this.yytext="",this.match="");for(var ee=this._currentRules(),J=0;J<ee.length;J++)if(X=this._input.match(this.rules[ee[J]]),X&&(!V||X[0].length>V[0].length)){if(V=X,Z=J,this.options.backtrack_lexer){if(O=this.test_match(X,ee[J]),O!==!1)return O;if(this._backtrack){V=!1;continue}else return!1}else if(!this.options.flex)break}return V?(O=this.test_match(V,ee[Z]),O!==!1?O:!1):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var V=this.next();return V||this.lex()},begin:function(V){this.conditionStack.push(V)},popState:function(){var V=this.conditionStack.length-1;return V>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(V){return V=this.conditionStack.length-1-Math.abs(V||0),V>=0?this.conditionStack[V]:"INITIAL"},pushState:function(V){this.begin(V)},stateStackSize:function(){return this.conditionStack.length},options:{},performAction:function(V,X,Z,ee){switch(Z){case 0:break;case 1:return 6;case 2:return X.yytext=X.yytext.substr(1,X.yyleng-2),4;case 3:return 17;case 4:return 18;case 5:return 23;case 6:return 24;case 7:return 22;case 8:return 21;case 9:return 10;case 10:return 11;case 11:return 8;case 12:return 14;case 13:return"INVALID"}},rules:[/^(?:\s+)/,/^(?:(-?([0-9]|[1-9][0-9]+))(\.[0-9]+)?([eE][-+]?[0-9]+)?\b)/,/^(?:"(?:\\[\\"bfnrt/]|\\u[a-fA-F0-9]{4}|[^\\\0-\x09\x0a-\x1f"])*")/,/^(?:\{)/,/^(?:\})/,/^(?:\[)/,/^(?:\])/,/^(?:,)/,/^(?::)/,/^(?:true\b)/,/^(?:false\b)/,/^(?:null\b)/,/^(?:$)/,/^(?:.)/],conditions:{INITIAL:{rules:[0,1,2,3,4,5,6,7,8,9,10,11,12,13],inclusive:!0}}};return M}();C.lexer=T;function S(){this.yy={}}return S.prototype=C,C.Parser=S,new S}();typeof Vk<"u"&&(e.parser=t,e.Parser=t.Parser,e.parse=function(){return t.parse.apply(t,arguments)})});const dC={StyleExpression:fw,isExpression:dw,isExpressionFilter:gw,createExpression:pw,createPropertyExpression:mw,normalizePropertyExpression:rC,ZoomConstantExpression:K2,ZoomDependentExpression:J2,StylePropertyFunction:V1},pC={convertFunction:aC,createFunction:Hg,isFunction:qg};function mC(i){var e=i.expr,t=i.layer,o=Math.min(e(t,"paint","circle-radius"),8),l=Math.min(e(t,"paint","circle-stroke-width"),4),u=e(t,"paint","circle-color"),m=e(t,"paint","circle-opacity"),r=e(t,"paint","circle-stroke-color"),h=e(t,"paint","circle-stroke-opacity"),y=o-l/2;return{element:"svg",attributes:{viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",style:{filter:"blur("+e(t,"paint","circle-blur")*y+"px)"}},children:[{element:"circle",attributes:{key:"l1",cx:10,cy:10,fill:u,opacity:m,r:y}},{element:"circle",attributes:{key:"l2",cx:10,cy:10,fill:"transparent",opacity:h,r:o,"stroke-width":l,stroke:r}}]}}function gC(i){var e=i.expr,t=i.layer;return{element:"div",attributes:{style:{width:"100%",height:"100%",backgroundImage:"url("+(0,i.image)(e(t,"paint","fill-pattern"))+")",backgroundColor:e(t,"paint","fill-color"),opacity:e(t,"paint","fill-opacity"),backgroundSize:"66% 66%",backgroundPosition:"center"}}}}function yC(i){var e=i.layer,t=i.expr,o=(0,i.image)(t(e,"paint","line-pattern")),l={stroke:o?"url(#img1)":t(e,"paint","line-color"),strokeWidth:Math.max(2,Math.min(t(e,"paint","line-width"),8)),strokeOpacity:t(e,"paint","line-opacity")},u=l.strokeWidth;return{element:"svg",attributes:{viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},children:[{element:"defs",attributes:{key:"defs"},children:[{element:"pattern",attributes:{key:"pattern",id:"img1",x:0,y:0,width:l.strokeWidth,height:l.strokeWidth,patternUnits:"userSpaceOnUse",patternTransform:"translate("+-u/2+" "+-u/2+") rotate(45)"},children:[{element:"image",attributes:{key:"img",xlinkHref:o,x:0,y:0,width:l.strokeWidth,height:l.strokeWidth}}]}]},{element:"path",attributes:{key:"path",style:l,stroke:l.stroke,d:"M0 20 L 20 0"}}]}}function _C(i){return function(r){var h=r.image,y=(0,r.expr)(r.layer,"layout","icon-image");if(!y)return null;var b=h(y);return b?{element:"div",attributes:{style:{backgroundImage:"url("+b+")",backgroundSize:"contain",backgroundPosition:"center",backgroundRepeat:"no-repeat",width:"100%",height:"100%"}}}:null}(i)||(l=(t=(e=i).expr)(o=e.layer,"paint","text-color"),u=t(o,"paint","text-opacity"),{element:"svg",attributes:{viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},children:[{element:"path",attributes:{key:"l1",d:m="M 4,4 L 16,4 L 16,7 L 11.5 7 L 11.5 16 L 8.5 16 L 8.5 7 L 4 7 Z",stroke:t(o,"paint","text-halo-color"),"stroke-width":2*t(o,"paint","text-halo-width"),fill:"transparent","stroke-linejoin":"round"}},{element:"path",attributes:{key:"l2",d:m,fill:"white"}},{element:"path",attributes:{key:"l3",d:m,fill:l,opacity:u}}]});var e,t,o,l,u,m}var vC=[["background"],["circle"],["fill-extrusion"],["fill"],["heatmap"],["hillshade"],["line"],["raster"],["icon","symbol"],["text","symbol"]];function bC(i){var e,t=i.sprite,o=i.layer,l={circle:mC,symbol:_C,line:yC,fill:gC}[o.type],u=(e=i.zoom,function(m,r,h){var y=function(C){var T=vC.find(function(S){return C.startsWith(S[0])});return T?T[1]||T[0]:null}(h),b=Uk[r+"_"+y][h];if(!m[r])return b.default;var v=m[r][h];if(v===void 0)return b.default;if(typeof v=="object"){var w;if(!(w=Array.isArray(v)?dC.createExpression(v).value:pC.createFunction(v,b)).evaluate)return null;var x=w.evaluate({zoom:e},{});return x?x.name||x:null}return v});return l?l({layer:o,expr:u,image:function(m){if(t&&t.json){var r=t.json[m];if(r)return h=t.image,b=(y=r).x,v=y.y,w=y.width,x=y.height,(C=document.createElement("canvas")).width=2*w,C.height=2*x,C.getContext("2d").drawImage(h,2*b,2*v,2*w,2*x,0,0,2*w,2*x),C.toDataURL()}var h,y,b,v,w,x,C;return null}}):null}function wC(i){let e,t=i[0].innerHTML+"";return{c(){e=ti("div"),this.h()},l(o){e=ii(o,"DIV",{class:!0});var l=si(e);l.forEach(Oe),this.h()},h(){oi(e,"class","legend svelte-1dizgfa")},m(o,l){Dt(o,e,l),e.innerHTML=t},p(o,[l]){l&1&&t!==(t=o[0].innerHTML+"")&&(e.innerHTML=t)},i:is,o:is,d(o){o&&Oe(e)}}}function xC(i,e,t){let{map:o}=e,{layer:l}=e,{spriteLoader:u}=e,m=document.createElement("div");const r=async()=>{const h=o.getZoom(),y=bC({zoom:h,layer:l});if(t(0,m.innerText="",m),y){let v,w,x;switch(y.element){case"div":if(y.attributes.style.backgroundImage&&!["url(undefined)","url(null)"].includes(y.attributes.style.backgroundImage)){var b=document.createElement("img");b.src=y.attributes.style.backgroundImage.replace("url(","").replace(")",""),b.alt=l.id,b.style.cssText="height: 24px;",m.appendChild(b)}v=document.createElement("div"),v.style.height="24px",v.style.width="50px",v.style.backgroundColor=y.attributes.style.backgroundColor,v.style.backgroundPosition=y.attributes.style.backgroundPosition,v.style.backgroundSize=y.attributes.style.backgroundSize,v.style.backgroundRepeat=y.attributes.style.backgroundRepeat,v.style.opacity=y.attributes.style.opacity,m.appendChild(v);break;case"svg":if(u&&(x=u.getIconDataUrl(l),x)){const C=document.createElement("img");C.src=x,C.alt=l.id,C.style.cssText="height: 24px;",m.appendChild(C);break}w=document.createElementNS("http://www.w3.org/2000/svg","svg"),w.style.cssText="height: 24px;",w.setAttributeNS(null,"version","1.1"),Object.keys(y.attributes).forEach(C=>{w.setAttribute(C,y.attributes[C]);let T=document.createElementNS("http://www.w3.org/2000/svg","g");y.children.forEach(S=>{var M=document.createElementNS("http://www.w3.org/2000/svg",S.element);Object.keys(S.attributes).forEach(O=>{M.setAttributeNS(null,O,S.attributes[O])}),T.appendChild(M)}),w.appendChild(T)}),m.appendChild(w);break;default:console.log(y.element);return}}else{const v=document.createElementNS("http://www.w3.org/2000/svg","svg"),w=document.createElementNS("http://www.w3.org/2000/svg","path"),x=document.createElementNS("http://www.w3.org/2000/svg","path");v.setAttribute("fill","none"),v.setAttribute("viewBox","0 0 24 24"),v.setAttribute("stroke","black"),v.classList.add("post-icon"),w.setAttribute("d","M21,0H3A3,3,0,0,0,0,3V21a3,3,0,0,0,3,3H21a3,3,0,0,0,3-3V3A3,3,0,0,0,21,0ZM3,2H21a1,1,0,0,1,1,1V15.86L14.18,9.35a5.06,5.06,0,0,0-6.39-.06L2,13.92V3A1,1,0,0,1,3,2ZM21,22H3a1,1,0,0,1-1-1V16.48l7-5.63a3.06,3.06,0,0,1,3.86,0L22,18.47V21A1,1,0,0,1,21,22Z"),w.setAttribute("stroke-linecap","round"),w.setAttribute("stroke-linejoin","round"),w.setAttribute("stroke-width","2"),x.setAttribute("d","M18,9a3,3,0,1,0-3-3A3,3,0,0,0,18,9Zm0-4a1,1,0,1,1-1,1A1,1,0,0,1,18,5Z"),x.setAttribute("stroke-linecap","round"),x.setAttribute("stroke-linejoin","round"),x.setAttribute("stroke-width","2"),v.appendChild(w),v.appendChild(x),m.appendChild(v)}};return o.on("moveend",r),o.on("zoom",r),i.$$set=h=>{"map"in h&&t(1,o=h.map),"layer"in h&&t(2,l=h.layer),"spriteLoader"in h&&t(3,u=h.spriteLoader)},i.$$.update=()=>{i.$$.dirty&4&&r()},[m,o,l,u]}class AC extends xr{constructor(e){super(),Ar(this,e,xC,wC,br,{map:1,layer:2,spriteLoader:3})}}function kC(i){let e;return{c(){e=ti("i"),this.h()},l(t){e=ii(t,"I",{class:!0}),si(e).forEach(Oe),this.h()},h(){oi(e,"class","fas fa-eye-slash svelte-1p0eu1v")},m(t,o){Dt(t,e,o)},d(t){t&&Oe(e)}}}function SC(i){let e;return{c(){e=ti("i"),this.h()},l(t){e=ii(t,"I",{class:!0}),si(e).forEach(Oe),this.h()},h(){oi(e,"class","fas fa-eye svelte-1p0eu1v")},m(t,o){Dt(t,e,o)},d(t){t&&Oe(e)}}}function CC(i){let e,t,o,l,u,m,r,h,y,b=(i[3]&&i[3][i[1].id]?i[3][i[1].id]:i[1].id)+"",v,w,x,C;function T(O,V){return O[4]?SC:kC}let S=T(i),M=S(i);return r=new AC({props:{map:i[0],layer:i[1],spriteLoader:i[2]}}),{c(){e=ti("div"),t=ti("div"),o=ti("button"),l=ti("span"),M.c(),u=Xi(),m=ti("div"),Hi(r.$$.fragment),h=Xi(),y=ti("div"),v=Cn(b),this.h()},l(O){e=ii(O,"DIV",{class:!0});var V=si(e);t=ii(V,"DIV",{class:!0});var X=si(t);o=ii(X,"BUTTON",{class:!0});var Z=si(o);l=ii(Z,"SPAN",{class:!0});var ee=si(l);M.l(ee),ee.forEach(Oe),Z.forEach(Oe),X.forEach(Oe),u=Yi(V),m=ii(V,"DIV",{class:!0});var J=si(m);$i(r.$$.fragment,J),J.forEach(Oe),h=Yi(V),y=ii(V,"DIV",{class:!0});var ie=si(y);v=En(ie,b),ie.forEach(Oe),V.forEach(Oe),this.h()},h(){oi(l,"class","icon is-small"),oi(o,"class","button is-text is-narrow"),oi(t,"class","column .is-marginless is-paddingless"),oi(m,"class","column is-narrow .is-marginless is-paddingless"),oi(y,"class","column is-narrow .is-marginless pl-2 has-text-left"),oi(e,"class","columns is-vcentered is-mobile")},m(O,V){Dt(O,e,V),Kt(e,t),Kt(t,o),Kt(o,l),M.m(l,null),Kt(e,u),Kt(e,m),Gi(r,m,null),Kt(e,h),Kt(e,y),Kt(y,v),w=!0,x||(C=qn(o,"click",i[5]),x=!0)},p(O,[V]){S!==(S=T(O))&&(M.d(1),M=S(O),M&&(M.c(),M.m(l,null)));const X={};V&1&&(X.map=O[0]),V&2&&(X.layer=O[1]),V&4&&(X.spriteLoader=O[2]),r.$set(X),(!w||V&10)&&b!==(b=(O[3]&&O[3][O[1].id]?O[3][O[1].id]:O[1].id)+"")&&ks(v,b)},i(O){w||(yt(r.$$.fragment,O),w=!0)},o(O){At(r.$$.fragment,O),w=!1},d(O){O&&Oe(e),M.d(),Wi(r),x=!1,C()}}}function EC(i,e,t){const o=T1();let{map:l}=e,{layer:u}=e,{spriteLoader:m}=e,{relativeLayers:r={}}=e,y=l.getLayer(u.id).visibility!=="none";const b=()=>{const w=y===!0?"visible":"none";l.setLayoutProperty(u.id,"visibility",w),o("visibilityChanged",{layer:u,visibility:w})},v=()=>t(4,y=!y);return i.$$set=w=>{"map"in w&&t(0,l=w.map),"layer"in w&&t(1,u=w.layer),"spriteLoader"in w&&t(2,m=w.spriteLoader),"relativeLayers"in w&&t(3,r=w.relativeLayers)},i.$$.update=()=>{i.$$.dirty&16&&b()},[l,u,m,r,y,v]}class q1 extends xr{constructor(e){super(),Ar(this,e,EC,CC,br,{map:0,layer:1,spriteLoader:2,relativeLayers:3})}}class IC{constructor(e){pl(this,"spriteUrl");pl(this,"sprite");this.spriteUrl=e}async load(){const e=await Promise.all([this.loadImage(`${this.spriteUrl}@2x.png`),this.fetchUrl(`${this.spriteUrl}@2x.json`)]);return this.sprite={image:e[0],json:e[1]},this.sprite}loadImage(e){let t=!1;const o=new Promise((l,u)=>{const m=new Image;m.crossOrigin="Anonymous",m.onload=()=>{t||l(m)},m.onerror=r=>{t||u(r)},m.src=e});return o.cancel=()=>{t=!0},o}async fetchUrl(e){return(await fetch(e)).json()}getIconDataUrl(e){var o;let t;if(e.layout&&e.layout["icon-image"]){let l=e.layout["icon-image"];if(Array.isArray(l)&&(l=l[l.length-1]),(o=this.sprite)!=null&&o.json){let u;Object.keys(this.sprite.json).forEach(m=>{m===l&&(u=this.sprite.json[m])}),u&&(t=this.extractPartOfImage(this.sprite.image,u))}}return t}extractPartOfImage(e,t){const l=document.createElement("canvas");return l.width=t.width*1,l.height=t.height*1,l.getContext("2d").drawImage(e,t.x*1,t.y*1,t.width*1,t.height*1,0,0,t.width*1,t.height*1),l.toDataURL()}}const W_=Vl({});function X_(i,e,t){const o=i.slice();return o[14]=e[t],o}function Y_(i){let e,t,o,l,u,m,r;return{c(){e=ti("li"),t=ti("a"),o=ti("span"),l=Cn("Show related"),this.h()},l(h){e=ii(h,"LI",{class:!0});var y=si(e);t=ii(y,"A",{});var b=si(t);o=ii(b,"SPAN",{});var v=si(o);l=En(v,"Show related"),v.forEach(Oe),b.forEach(Oe),y.forEach(Oe),this.h()},h(){oi(e,"class",u=i[4]?"is-active":"")},m(h,y){Dt(h,e,y),Kt(e,t),Kt(t,o),Kt(o,l),m||(r=qn(e,"click",i[10]),m=!0)},p(h,y){y&16&&u!==(u=h[4]?"is-active":"")&&oi(e,"class",u)},d(h){h&&Oe(e),m=!1,r()}}}function Z_(i){let e=i[1],t,o,l=ev(i);return{c(){l.c(),t=gn()},l(u){l.l(u),t=gn()},m(u,m){l.m(u,m),Dt(u,t,m),o=!0},p(u,m){m&2&&br(e,e=u[1])?(Dr(),At(l,1,1,is),Mr(),l=ev(u),l.c(),yt(l,1),l.m(t.parentNode,t)):l.p(u,m)},i(u){o||(yt(l),o=!0)},o(u){At(l),o=!1},d(u){u&&Oe(t),l.d(u)}}}function TC(i){let e,t,o;return t=new q1({props:{map:i[0],layer:i[14],spriteLoader:i[5],relativeLayers:i[2]}}),t.$on("visibilityChanged",i[8]),{c(){e=ti("a"),Hi(t.$$.fragment),this.h()},l(l){e=ii(l,"A",{class:!0});var u=si(e);$i(t.$$.fragment,u),u.forEach(Oe),this.h()},h(){oi(e,"class","panel-block")},m(l,u){Dt(l,e,u),Gi(t,e,null),o=!0},p(l,u){const m={};u&1&&(m.map=l[0]),u&128&&(m.layer=l[14]),u&32&&(m.spriteLoader=l[5]),u&4&&(m.relativeLayers=l[2]),t.$set(m)},i(l){o||(yt(t.$$.fragment,l),o=!0)},o(l){At(t.$$.fragment,l),o=!1},d(l){l&&Oe(e),Wi(t)}}}function LC(i){let e,t,o=i[2][i[14].id]&&K_(i);return{c(){o&&o.c(),e=gn()},l(l){o&&o.l(l),e=gn()},m(l,u){o&&o.m(l,u),Dt(l,e,u),t=!0},p(l,u){l[2][l[14].id]?o?(o.p(l,u),u&132&&yt(o,1)):(o=K_(l),o.c(),yt(o,1),o.m(e.parentNode,e)):o&&(Dr(),At(o,1,1,()=>{o=null}),Mr())},i(l){t||(yt(o),t=!0)},o(l){At(o),t=!1},d(l){o&&o.d(l),l&&Oe(e)}}}function PC(i){let e,t,o=i[6][i[14].id]&&J_(i);return{c(){o&&o.c(),e=gn()},l(l){o&&o.l(l),e=gn()},m(l,u){o&&o.m(l,u),Dt(l,e,u),t=!0},p(l,u){l[6][l[14].id]?o?(o.p(l,u),u&192&&yt(o,1)):(o=J_(l),o.c(),yt(o,1),o.m(e.parentNode,e)):o&&(Dr(),At(o,1,1,()=>{o=null}),Mr())},i(l){t||(yt(o),t=!0)},o(l){At(o),t=!1},d(l){o&&o.d(l),l&&Oe(e)}}}function K_(i){let e,t,o;return t=new q1({props:{map:i[0],layer:i[14],spriteLoader:i[5],relativeLayers:i[2]}}),t.$on("visibilityChanged",i[8]),{c(){e=ti("a"),Hi(t.$$.fragment),this.h()},l(l){e=ii(l,"A",{class:!0});var u=si(e);$i(t.$$.fragment,u),u.forEach(Oe),this.h()},h(){oi(e,"class","panel-block")},m(l,u){Dt(l,e,u),Gi(t,e,null),o=!0},p(l,u){const m={};u&1&&(m.map=l[0]),u&128&&(m.layer=l[14]),u&32&&(m.spriteLoader=l[5]),u&4&&(m.relativeLayers=l[2]),t.$set(m)},i(l){o||(yt(t.$$.fragment,l),o=!0)},o(l){At(t.$$.fragment,l),o=!1},d(l){l&&Oe(e),Wi(t)}}}function J_(i){let e,t,o,l;const u=[DC,MC],m=[];function r(h,y){return h[4]===!0?0:1}return e=r(i),t=m[e]=u[e](i),{c(){t.c(),o=gn()},l(h){t.l(h),o=gn()},m(h,y){m[e].m(h,y),Dt(h,o,y),l=!0},p(h,y){let b=e;e=r(h),e===b?m[e].p(h,y):(Dr(),At(m[b],1,1,()=>{m[b]=null}),Mr(),t=m[e],t?t.p(h,y):(t=m[e]=u[e](h),t.c()),yt(t,1),t.m(o.parentNode,o))},i(h){l||(yt(t),l=!0)},o(h){At(t),l=!1},d(h){m[e].d(h),h&&Oe(o)}}}function MC(i){let e,t,o;return t=new q1({props:{map:i[0],layer:i[14],spriteLoader:i[5],relativeLayers:i[2]}}),t.$on("visibilityChanged",i[8]),{c(){e=ti("a"),Hi(t.$$.fragment),this.h()},l(l){e=ii(l,"A",{class:!0});var u=si(e);$i(t.$$.fragment,u),u.forEach(Oe),this.h()},h(){oi(e,"class","panel-block")},m(l,u){Dt(l,e,u),Gi(t,e,null),o=!0},p(l,u){const m={};u&1&&(m.map=l[0]),u&128&&(m.layer=l[14]),u&32&&(m.spriteLoader=l[5]),u&4&&(m.relativeLayers=l[2]),t.$set(m)},i(l){o||(yt(t.$$.fragment,l),o=!0)},o(l){At(t.$$.fragment,l),o=!1},d(l){l&&Oe(e),Wi(t)}}}function DC(i){let e,t,o=i[2][i[14].id]&&Q_(i);return{c(){o&&o.c(),e=gn()},l(l){o&&o.l(l),e=gn()},m(l,u){o&&o.m(l,u),Dt(l,e,u),t=!0},p(l,u){l[2][l[14].id]?o?(o.p(l,u),u&132&&yt(o,1)):(o=Q_(l),o.c(),yt(o,1),o.m(e.parentNode,e)):o&&(Dr(),At(o,1,1,()=>{o=null}),Mr())},i(l){t||(yt(o),t=!0)},o(l){At(o),t=!1},d(l){o&&o.d(l),l&&Oe(e)}}}function Q_(i){let e,t,o;return t=new q1({props:{map:i[0],layer:i[14],spriteLoader:i[5],relativeLayers:i[2]}}),t.$on("visibilityChanged",i[8]),{c(){e=ti("a"),Hi(t.$$.fragment),this.h()},l(l){e=ii(l,"A",{class:!0});var u=si(e);$i(t.$$.fragment,u),u.forEach(Oe),this.h()},h(){oi(e,"class","panel-block")},m(l,u){Dt(l,e,u),Gi(t,e,null),o=!0},p(l,u){const m={};u&1&&(m.map=l[0]),u&128&&(m.layer=l[14]),u&32&&(m.spriteLoader=l[5]),u&4&&(m.relativeLayers=l[2]),t.$set(m)},i(l){o||(yt(t.$$.fragment,l),o=!0)},o(l){At(t.$$.fragment,l),o=!1},d(l){l&&Oe(e),Wi(t)}}}function $_(i){let e,t,o,l;const u=[PC,LC,TC],m=[];function r(h,y){return h[3]===!0?0:h[4]===!0?1:2}return e=r(i),t=m[e]=u[e](i),{c(){t.c(),o=gn()},l(h){t.l(h),o=gn()},m(h,y){m[e].m(h,y),Dt(h,o,y),l=!0},p(h,y){let b=e;e=r(h),e===b?m[e].p(h,y):(Dr(),At(m[b],1,1,()=>{m[b]=null}),Mr(),t=m[e],t?t.p(h,y):(t=m[e]=u[e](h),t.c()),yt(t,1),t.m(o.parentNode,o))},i(h){l||(yt(t),l=!0)},o(h){At(t),l=!1},d(h){m[e].d(h),h&&Oe(o)}}}function ev(i){let e,t,o=i[7],l=[];for(let m=0;m<o.length;m+=1)l[m]=$_(X_(i,o,m));const u=m=>At(l[m],1,1,()=>{l[m]=null});return{c(){for(let m=0;m<l.length;m+=1)l[m].c();e=gn()},l(m){for(let r=0;r<l.length;r+=1)l[r].l(m);e=gn()},m(m,r){for(let h=0;h<l.length;h+=1)l[h].m(m,r);Dt(m,e,r),t=!0},p(m,r){if(r&509){o=m[7];let h;for(h=0;h<o.length;h+=1){const y=X_(m,o,h);l[h]?(l[h].p(y,r),yt(l[h],1)):(l[h]=$_(y),l[h].c(),yt(l[h],1),l[h].m(e.parentNode,e))}for(Dr(),h=o.length;h<l.length;h+=1)u(h);Mr()}},i(m){if(!t){for(let r=0;r<o.length;r+=1)yt(l[r]);t=!0}},o(m){l=l.filter(Boolean);for(let r=0;r<l.length;r+=1)At(l[r]);t=!1},d(m){Ja(l,m),m&&Oe(e)}}}function OC(i){let e,t,o,l,u,m,r,h,y,b=i[2]&&Object.keys(i[2]).length>0,v,w,x,C,T,S=b&&Y_(i),M=i[5]&&Z_(i);return{c(){e=ti("nav"),t=ti("div"),o=ti("ul"),l=ti("li"),u=ti("a"),m=ti("span"),r=Cn("Show rendered"),y=Xi(),S&&S.c(),v=Xi(),w=ti("nav"),M&&M.c(),this.h()},l(O){e=ii(O,"NAV",{class:!0});var V=si(e);t=ii(V,"DIV",{class:!0});var X=si(t);o=ii(X,"UL",{});var Z=si(o);l=ii(Z,"LI",{class:!0});var ee=si(l);u=ii(ee,"A",{});var J=si(u);m=ii(J,"SPAN",{});var ie=si(m);r=En(ie,"Show rendered"),ie.forEach(Oe),J.forEach(Oe),ee.forEach(Oe),y=Yi(Z),S&&S.l(Z),Z.forEach(Oe),X.forEach(Oe),v=Yi(V),w=ii(V,"NAV",{class:!0});var ke=si(w);M&&M.l(ke),ke.forEach(Oe),V.forEach(Oe),this.h()},h(){oi(l,"class",h=i[3]?"is-active":""),oi(t,"class","tabs is-toggle is-fullwidth m-2 legend-header"),oi(w,"class","panel legend-content svelte-1ezzpaq"),oi(e,"class","panel")},m(O,V){Dt(O,e,V),Kt(e,t),Kt(t,o),Kt(o,l),Kt(l,u),Kt(u,m),Kt(m,r),Kt(o,y),S&&S.m(o,null),Kt(e,v),Kt(e,w),M&&M.m(w,null),x=!0,C||(T=qn(l,"click",i[9]),C=!0)},p(O,[V]){(!x||V&8&&h!==(h=O[3]?"is-active":""))&&oi(l,"class",h),V&4&&(b=O[2]&&Object.keys(O[2]).length>0),b?S?S.p(O,V):(S=Y_(O),S.c(),S.m(o,null)):S&&(S.d(1),S=null),O[5]?M?(M.p(O,V),V&32&&yt(M,1)):(M=Z_(O),M.c(),yt(M,1),M.m(w,null)):M&&(Dr(),At(M,1,1,()=>{M=null}),Mr())},i(O){x||(yt(M),x=!0)},o(O){At(M),x=!1},d(O){O&&Oe(e),S&&S.d(),M&&M.d(),C=!1,T()}}}function FC(i,e,t){let o,l;Wo(i,W_,M=>t(11,l=M));let{map:u}=e,{style:m}=e,r=!0,h=!0,y,b={},{relativeLayers:v={}}=e;const w=async()=>{if(!u||!m)return;const M=m.sprite;!M||(t(5,y=new IC(M)),await y.load(),x())},x=()=>{!u||!m||setTimeout(()=>{if(t(6,b={}),r===!0){Object.keys(l).forEach(O=>{t(6,b[O]=l[O],b)});const M=u.queryRenderedFeatures();o.forEach(O=>{M.filter(X=>X.layer.id===O.id).length>0&&t(6,b[O.id]=O,b)})}else o.forEach(M=>{t(6,b[M.id]=M,b)})},500)},C=M=>{const O=M.detail.layer;M.detail.visibility==="none"?bl(W_,l[O.id]=O,l):l[O.id]&&delete l[O.id]},T=()=>t(3,r=!r),S=()=>t(4,h=!h);return i.$$set=M=>{"map"in M&&t(0,u=M.map),"style"in M&&t(1,m=M.style),"relativeLayers"in M&&t(2,v=M.relativeLayers)},i.$$.update=()=>{i.$$.dirty&2&&t(7,o=m?m.layers:[]),i.$$.dirty&5&&(u&&(u.on("moveend",x),u.on("styledata",x),u.on("load",()=>{x()})),v&&Object.keys(v).length===0&&t(4,h=!1)),i.$$.dirty&8&&x(),i.$$.dirty&16&&x(),i.$$.dirty&2&&w()},[u,m,v,r,h,y,b,o,C,T,S]}class RC extends xr{constructor(e){super(),Ar(this,e,FC,OC,br,{map:0,style:1,relativeLayers:2})}}function tv(i){let e,t,o,l,u,m,r,h;o=new WA({}),o.$on("change",i[4]);function y(w){i[5](w)}function b(w){i[6](w)}let v={relativeLayers:i[3]};return i[1]!==void 0&&(v.map=i[1]),i[2]!==void 0&&(v.style=i[2]),u=new RC({props:v}),wn.push(()=>Vo(u,"map",y)),wn.push(()=>Vo(u,"style",b)),{c(){e=ti("nav"),t=ti("div"),Hi(o.$$.fragment),l=Xi(),Hi(u.$$.fragment),this.h()},l(w){e=ii(w,"NAV",{class:!0});var x=si(e);t=ii(x,"DIV",{class:!0});var C=si(t);$i(o.$$.fragment,C),C.forEach(Oe),l=Yi(x),$i(u.$$.fragment,x),x.forEach(Oe),this.h()},h(){oi(t,"class","panel-header m-1 p-0"),oi(e,"class","panel")},m(w,x){Dt(w,e,x),Kt(e,t),Gi(o,t,null),Kt(e,l),Gi(u,e,null),h=!0},p(w,x){const C={};x&8&&(C.relativeLayers=w[3]),!m&&x&2&&(m=!0,C.map=w[1],qo(()=>m=!1)),!r&&x&4&&(r=!0,C.style=w[2],qo(()=>r=!1)),u.$set(C)},i(w){h||(yt(o.$$.fragment,w),yt(u.$$.fragment,w),h=!0)},o(w){At(o.$$.fragment,w),At(u.$$.fragment,w),h=!1},d(w){w&&Oe(e),Wi(o),Wi(u)}}}function BC(i){let e,t,o=i[0]&&tv(i);return{c(){o&&o.c(),e=gn()},l(l){o&&o.l(l),e=gn()},m(l,u){o&&o.m(l,u),Dt(l,e,u),t=!0},p(l,[u]){l[0]?o?(o.p(l,u),u&1&&yt(o,1)):(o=tv(l),o.c(),yt(o,1),o.m(e.parentNode,e)):o&&(Dr(),At(o,1,1,()=>{o=null}),Mr())},i(l){t||(yt(o),t=!0)},o(l){At(o),t=!1},d(l){o&&o.d(l),l&&Oe(e)}}}function zC(i,e,t){let o;Wo(i,Mu,b=>t(1,o=b));let l,u={},{isLayersTabVisible:m=!1}=e;zr.legend&&zr.legend.targets&&(u=zr.legend.targets);const r=()=>{!o||t(2,l=o.getStyle())};function h(b){o=b,Mu.set(o)}function y(b){l=b,t(2,l),t(1,o)}return i.$$set=b=>{"isLayersTabVisible"in b&&t(0,m=b.isLayersTabVisible)},i.$$.update=()=>{i.$$.dirty&2&&o&&o.on("load",()=>{t(2,l=o.getStyle())})},[m,o,l,u,r,h,y]}class NC extends xr{constructor(e){super(),Ar(this,e,zC,BC,br,{isLayersTabVisible:0})}}const{Marker:jC}=rA,K0={Walking:"pedestrian",Bicycle:"bicycle",Car:"auto"},Pu={Time:"time",Distance:"distance"};class UC{constructor(e,t,o){pl(this,"map");pl(this,"url");pl(this,"contourSources",[]);pl(this,"contourLayers",[]);pl(this,"contourMaker");pl(this,"contours",[{time:5,distance:1,color:"ff0000"},{time:10,distance:3,color:"ffff00"},{time:15,distance:5,color:"0000ff"}]);this.map=e,this.url=t,o&&(this.contours=o)}clearFeatures(){this.contourLayers&&this.contourLayers.length>0&&(this.contourLayers.forEach(e=>{var t;(t=this.map)==null||t.removeLayer(e)}),this.contourLayers=[]),this.contourSources&&this.contourSources.length>0&&(this.contourSources.forEach(e=>{var t;(t=this.map)==null||t.removeSource(e)}),this.contourSources=[]),this.contourMaker&&(this.contourMaker.remove(),this.contourMaker=void 0)}getIsochrone(e,t,o,l,u){this.clearFeatures();let m=JSON.parse(JSON.stringify(this.contours));u&&(m=u),m.forEach(h=>{o===Pu.Time?delete h.distance:delete h.time});let r="km";return o===Pu.Time&&(r="min"),new Promise((h,y)=>{const b={locations:[{lat:t,lon:e}],costing:l,contours:m,polygons:!0},v=`${this.url}/isochrone?json=${JSON.stringify(b)}`;fetch(v).then(w=>w.json()).then(w=>{w.features.forEach(x=>{var T,S,M,O;const C=`isochrone-${x.properties.contour}-${o}`;(T=this.map)==null||T.addSource(C,{type:"geojson",data:x}),this.contourSources.push(C),(S=this.map)==null||S.addLayer({id:`pg-${C}-${o}`,type:"fill",source:C,layout:{},paint:{"fill-color":x.properties.fillColor,"fill-opacity":.1}}),this.contourLayers.push(`pg-${C}-${o}`),(M=this.map)==null||M.addLayer({id:`ls-${C}-${o}`,type:"line",source:C,layout:{"line-join":"round","line-cap":"round"},paint:{"line-color":x.properties.fillColor,"line-width":3}}),this.contourLayers.push(`ls-${C}-${o}`),(O=this.map)==null||O.addLayer({id:`symbol-${C}-${o}`,type:"symbol",source:C,layout:{"symbol-placement":"line","text-pitch-alignment":"viewport","text-font":["Roboto Bold"],"text-field":["concat",["get","contour"],` ${r}`],"text-size":16},paint:{"text-color":"#000000","text-halo-width":1,"text-halo-color":"#FFFFFF"}}),this.contourLayers.push(`symbol-${C}-${o}`)}),this.map&&(this.contourMaker=new jC().setLngLat([e,t]).addTo(this.map)),h()}).catch(w=>y(w))})}getContoursOption(){return this.contours}}function VC(i){let e,t,o,l,u,m;const r=i[13].default,h=fr(r,i,i[12],null);let y=[{class:t=rr({[i[1]]:!0,"smui-accordion":!0,"smui-accordion--multiple":i[2],"smui-accordion--with-open-dialog":i[4]})},i[10]],b={};for(let v=0;v<y.length;v+=1)b=qi(b,y[v]);return{c(){e=ti("div"),h&&h.c(),this.h()},l(v){e=ii(v,"DIV",{class:!0});var w=si(e);h&&h.l(w),w.forEach(Oe),this.h()},h(){or(e,b)},m(v,w){Dt(v,e,w),h&&h.m(e,null),i[14](e),l=!0,u||(m=[ir(o=Eo.call(null,e,i[0])),ir(i[5].call(null,e)),qn(e,"SMUIAccordionPanel:mount",i[6]),qn(e,"SMUIAccordionPanel:unmount",i[7]),qn(e,"SMUIAccordionPanel:activate",i[8]),qn(e,"SMUIAccordionPanel:opening",i[9]),qn(e,"SMUIDialog:opening",i[15],!0),qn(e,"SMUIDialog:closed",i[16],!0)],u=!0)},p(v,[w]){h&&h.p&&(!l||w&4096)&&dr(h,r,v,v[12],l?mr(r,v[12],w,null):pr(v[12]),null),or(e,b=wr(y,[(!l||w&22&&t!==(t=rr({[v[1]]:!0,"smui-accordion":!0,"smui-accordion--multiple":v[2],"smui-accordion--with-open-dialog":v[4]})))&&{class:t},w&1024&&v[10]])),o&&ro(o.update)&&w&1&&o.update.call(null,v[0])},i(v){l||(yt(h,v),l=!0)},o(v){At(h,v),l=!1},d(v){v&&Oe(e),h&&h.d(v),i[14](null),u=!1,Io(m)}}}function qC(i,e,t){const o=["use","class","multiple","getElement"];let l=Zn(e,o),{$$slots:u={},$$scope:m}=e;const r=go(mo());let{use:h=[]}=e,{class:y=""}=e,{multiple:b=!1}=e,v,w=new Set,x=!1;function C(ee){const J=ee.detail;if(ee.stopPropagation(),!b&&J.open){const ie=Array.from(w).find(ke=>ke.open);ie&&ie.setOpen(!1)}w.add(J)}function T(ee){const J=ee.detail;!w.has(J)||(ee.stopPropagation(),w.delete(J))}function S(ee){const{accessor:J}=ee.detail;if(!!w.has(J)){if(!b&&!J.open){const ie=Array.from(w).find(ke=>ke.open);ie&&ie.setOpen(!1)}J.setOpen(!J.open)}}function M(ee){const{accessor:J}=ee.detail;!w.has(J)||b||Array.from(w).filter(ke=>ke!==J&&ke.open).forEach(ke=>ke.setOpen(!1))}function O(){return v}function V(ee){wn[ee?"unshift":"push"](()=>{v=ee,t(3,v)})}const X=()=>t(4,x=!0),Z=()=>t(4,x=!1);return i.$$set=ee=>{e=qi(qi({},e),uo(ee)),t(10,l=Zn(e,o)),"use"in ee&&t(0,h=ee.use),"class"in ee&&t(1,y=ee.class),"multiple"in ee&&t(2,b=ee.multiple),"$$scope"in ee&&t(12,m=ee.$$scope)},[h,y,b,v,x,r,C,T,S,M,l,O,m,u,V,X,Z]}class HC extends xr{constructor(e){super(),Ar(this,e,qC,VC,br,{use:0,class:1,multiple:2,getElement:11})}get getElement(){return this.$$.ctx[11]}}function GC(i){let e,t,o,l,u,m;const r=i[12].default,h=fr(r,i,i[11],null);let y=[{class:t=rr({[i[1]]:!0,"smui-paper":!0,"smui-paper--raised":i[2]==="raised","smui-paper--unelevated":i[2]==="unelevated","smui-paper--outlined":i[2]==="outlined",["smui-paper--elevation-z"+i[5]]:i[5]!==0&&i[2]==="raised","smui-paper--rounded":!i[3],["smui-paper--color-"+i[4]]:i[4]!=="default","smui-paper-transition":i[6]})},i[9]],b={};for(let v=0;v<y.length;v+=1)b=qi(b,y[v]);return{c(){e=ti("div"),h&&h.c(),this.h()},l(v){e=ii(v,"DIV",{class:!0});var w=si(e);h&&h.l(w),w.forEach(Oe),this.h()},h(){or(e,b)},m(v,w){Dt(v,e,w),h&&h.m(e,null),i[13](e),l=!0,u||(m=[ir(o=Eo.call(null,e,i[0])),ir(i[8].call(null,e))],u=!0)},p(v,[w]){h&&h.p&&(!l||w&2048)&&dr(h,r,v,v[11],l?mr(r,v[11],w,null):pr(v[11]),null),or(e,b=wr(y,[(!l||w&126&&t!==(t=rr({[v[1]]:!0,"smui-paper":!0,"smui-paper--raised":v[2]==="raised","smui-paper--unelevated":v[2]==="unelevated","smui-paper--outlined":v[2]==="outlined",["smui-paper--elevation-z"+v[5]]:v[5]!==0&&v[2]==="raised","smui-paper--rounded":!v[3],["smui-paper--color-"+v[4]]:v[4]!=="default","smui-paper-transition":v[6]})))&&{class:t},w&512&&v[9]])),o&&ro(o.update)&&w&1&&o.update.call(null,v[0])},i(v){l||(yt(h,v),l=!0)},o(v){At(h,v),l=!1},d(v){v&&Oe(e),h&&h.d(v),i[13](null),u=!1,Io(m)}}}function WC(i,e,t){const o=["use","class","variant","square","color","elevation","transition","getElement"];let l=Zn(e,o),{$$slots:u={},$$scope:m}=e;const r=go(mo());let{use:h=[]}=e,{class:y=""}=e,{variant:b="raised"}=e,{square:v=!1}=e,{color:w="default"}=e,{elevation:x=1}=e,{transition:C=!1}=e,T;function S(){return T}function M(O){wn[O?"unshift":"push"](()=>{T=O,t(7,T)})}return i.$$set=O=>{e=qi(qi({},e),uo(O)),t(9,l=Zn(e,o)),"use"in O&&t(0,h=O.use),"class"in O&&t(1,y=O.class),"variant"in O&&t(2,b=O.variant),"square"in O&&t(3,v=O.square),"color"in O&&t(4,w=O.color),"elevation"in O&&t(5,x=O.elevation),"transition"in O&&t(6,C=O.transition),"$$scope"in O&&t(11,m=O.$$scope)},[h,y,b,v,w,x,C,T,r,l,S,m,u,M]}class XC extends xr{constructor(e){super(),Ar(this,e,WC,GC,br,{use:0,class:1,variant:2,square:3,color:4,elevation:5,transition:6,getElement:10})}get getElement(){return this.$$.ctx[10]}}const H1=Al({class:"smui-paper__content",component:ip});Al({class:"smui-paper__title",component:I6});Al({class:"smui-paper__subtitle",component:T6});function YC(i){let e;const t=i[23].default,o=fr(t,i,i[25],null);return{c(){o&&o.c()},l(l){o&&o.l(l)},m(l,u){o&&o.m(l,u),e=!0},p(l,u){o&&o.p&&(!e||u&33554432)&&dr(o,t,l,l[25],e?mr(t,l[25],u,null):pr(l[25]),null)},i(l){e||(yt(o,l),e=!0)},o(l){At(o,l),e=!1},d(l){o&&o.d(l)}}}function ZC(i){let e,t;const o=[{use:i[11]},{class:rr({[i[1]]:!0,"smui-accordion__panel":!0,"smui-accordion__panel--open":i[0],"smui-accordion__panel--opened":i[10],"smui-accordion__panel--disabled":i[5],"smui-accordion__panel--non-interactive":i[6],"smui-accordion__panel--raised":i[2]==="raised","smui-accordion__panel--extend":i[7],["smui-accordion__panel--elevation-z"+(i[7]&&i[0]?i[8]:i[4])]:i[4]!==0&&i[2]==="raised"||i[8]!==0&&i[2]==="raised"&&i[7]&&i[0]})},{color:i[3]},{variant:i[2]==="raised"?"unelevated":i[2]},i[16]];let l={$$slots:{default:[YC]},$$scope:{ctx:i}};for(let u=0;u<o.length;u+=1)l=qi(l,o[u]);return e=new XC({props:l}),i[24](e),e.$on("SMUIAccordionHeader:activate",i[15]),{c(){Hi(e.$$.fragment)},l(u){$i(e.$$.fragment,u)},m(u,m){Gi(e,u,m),t=!0},p(u,[m]){const r=m&69119?wr(o,[m&2048&&{use:u[11]},m&1527&&{class:rr({[u[1]]:!0,"smui-accordion__panel":!0,"smui-accordion__panel--open":u[0],"smui-accordion__panel--opened":u[10],"smui-accordion__panel--disabled":u[5],"smui-accordion__panel--non-interactive":u[6],"smui-accordion__panel--raised":u[2]==="raised","smui-accordion__panel--extend":u[7],["smui-accordion__panel--elevation-z"+(u[7]&&u[0]?u[8]:u[4])]:u[4]!==0&&u[2]==="raised"||u[8]!==0&&u[2]==="raised"&&u[7]&&u[0]})},m&8&&{color:u[3]},m&4&&{variant:u[2]==="raised"?"unelevated":u[2]},m&65536&&po(u[16])]):{};m&33554432&&(r.$$scope={dirty:m,ctx:u}),e.$set(r)},i(u){t||(yt(e.$$.fragment,u),t=!0)},o(u){At(e.$$.fragment,u),t=!1},d(u){i[24](null),Wi(e,u)}}}function KC(i,e,t){let o;const l=["use","class","variant","color","elevation","open","disabled","nonInteractive","extend","extendedElevation","isOpen","setOpen","getElement"];let u=Zn(e,l),m,r,h,{$$slots:y={},$$scope:b}=e;const v=go(mo());let{use:w=[]}=e,{class:x=""}=e,{variant:C="raised"}=e,{color:T="default"}=e,{elevation:S=1}=e,{open:M=!1}=e,{disabled:O=!1}=e,{nonInteractive:V=!1}=e,{extend:X=!1}=e,{extendedElevation:Z=3}=e,ee,J,ie=M;const ke=Vl(O);Wo(i,ke,We=>t(28,h=We)),$o("SMUI:accordion:panel:disabled",ke);const Le=Vl(V);Wo(i,Le,We=>t(27,r=We)),$o("SMUI:accordion:panel:nonInteractive",Le);const fe=Vl(M);Wo(i,fe,We=>t(26,m=We)),$o("SMUI:accordion:panel:open",fe);let Te=M;Ss(()=>(t(21,J={get open(){return M},setOpen:rt}),Array.from(nt().children).forEach(We=>{We.classList.contains("smui-paper__content")&&We.setAttribute("aria-hidden",M?"false":"true")}),So(nt(),"SMUIAccordionPanel:mount",J),()=>{So(nt(),"SMUIAccordionPanel:unmount",J)}));function _e(We){We.stopPropagation(),!(O||V)&&So(nt(),"SMUIAccordionPanel:activate",{accessor:J,event:We})}function ve(){return M}function rt(We){t(0,M=We)}function nt(){return ee.getElement()}function Tt(We){wn[We?"unshift":"push"](()=>{ee=We,t(9,ee)})}return i.$$set=We=>{e=qi(qi({},e),uo(We)),t(16,u=Zn(e,l)),"use"in We&&t(17,w=We.use),"class"in We&&t(1,x=We.class),"variant"in We&&t(2,C=We.variant),"color"in We&&t(3,T=We.color),"elevation"in We&&t(4,S=We.elevation),"open"in We&&t(0,M=We.open),"disabled"in We&&t(5,O=We.disabled),"nonInteractive"in We&&t(6,V=We.nonInteractive),"extend"in We&&t(7,X=We.extend),"extendedElevation"in We&&t(8,Z=We.extendedElevation),"$$scope"in We&&t(25,b=We.$$scope)},i.$$.update=()=>{i.$$.dirty&131072&&t(11,o=[v,...w]),i.$$.dirty&32&&bl(ke,h=O,h),i.$$.dirty&64&&bl(Le,r=V,r),i.$$.dirty&1&&bl(fe,m=M,m),i.$$.dirty&6291457&&Te!==M&&(t(22,Te=M),Array.from(nt().children).forEach(We=>{if(We.classList.contains("smui-paper__content")){const be=We;if(M){be.classList.add("smui-accordion__content--no-transition"),be.classList.add("smui-accordion__content--force-open");const{height:Ce}=be.getBoundingClientRect();be.classList.remove("smui-accordion__content--force-open"),be.getBoundingClientRect(),be.classList.remove("smui-accordion__content--no-transition"),be.style.height=Ce+"px",be.addEventListener("transitionend",()=>{be&&(be.style.height=""),t(10,ie=M),So(nt(),"SMUIAccordionPanel:opened",{accessor:J})},{once:!0})}else be.style.height=be.getBoundingClientRect().height+"px",be.getBoundingClientRect(),requestAnimationFrame(()=>{be&&(be.style.height=""),So(nt(),"SMUIAccordionPanel:closed",{accessor:J})}),t(10,ie=!1);be.setAttribute("aria-hidden",M?"false":"true")}}),So(nt(),M?"SMUIAccordionPanel:opening":"SMUIAccordionPanel:closing",{accessor:J}))},[M,x,C,T,S,O,V,X,Z,ee,ie,o,ke,Le,fe,_e,u,w,ve,rt,nt,J,Te,y,Tt,b]}class JC extends xr{constructor(e){super(),Ar(this,e,KC,ZC,br,{use:17,class:1,variant:2,color:3,elevation:4,open:0,disabled:5,nonInteractive:6,extend:7,extendedElevation:8,isOpen:18,setOpen:19,getElement:20})}get isOpen(){return this.$$.ctx[18]}get setOpen(){return this.$$.ctx[19]}get getElement(){return this.$$.ctx[20]}}const QC=i=>({}),iv=i=>({}),$C=i=>({}),nv=i=>({});function rv(i){let e;return{c(){e=ti("div"),this.h()},l(t){e=ii(t,"DIV",{class:!0}),si(e).forEach(Oe),this.h()},h(){oi(e,"class","smui-accordion__header__ripple")},m(t,o){Dt(t,e,o)},d(t){t&&Oe(e)}}}function ov(i){let e,t;const o=i[23].description,l=fr(o,i,i[22],nv);return{c(){e=ti("div"),l&&l.c(),this.h()},l(u){e=ii(u,"DIV",{class:!0});var m=si(e);l&&l.l(m),m.forEach(Oe),this.h()},h(){oi(e,"class","smui-accordion__header__description")},m(u,m){Dt(u,e,m),l&&l.m(e,null),t=!0},p(u,m){l&&l.p&&(!t||m&4194304)&&dr(l,o,u,u[22],t?mr(o,u[22],m,$C):pr(u[22]),nv)},i(u){t||(yt(l,u),t=!0)},o(u){At(l,u),t=!1},d(u){u&&Oe(e),l&&l.d(u)}}}function sv(i){let e,t;const o=i[23].icon,l=fr(o,i,i[22],iv);return{c(){e=ti("div"),l&&l.c(),this.h()},l(u){e=ii(u,"DIV",{class:!0});var m=si(e);l&&l.l(m),m.forEach(Oe),this.h()},h(){oi(e,"class","smui-accordion__header__icon")},m(u,m){Dt(u,e,m),l&&l.m(e,null),t=!0},p(u,m){l&&l.p&&(!t||m&4194304)&&dr(l,o,u,u[22],t?mr(o,u[22],m,QC):pr(u[22]),iv)},i(u){t||(yt(l,u),t=!0)},o(u){At(l,u),t=!1},d(u){u&&Oe(e),l&&l.d(u)}}}function eE(i){let e,t,o,l,u,m,r,h,y,b,v,w,x,C,T,S=i[3]&&rv();const M=i[23].default,O=fr(M,i,i[22],null);let V=i[20].description&&ov(i),X=i[20].icon&&sv(i),Z=[{class:r=rr({[i[1]]:!0,"smui-accordion__header":!0,...i[5]})},{style:h=Object.entries(i[6]).map(av).concat([i[2]]).join(" ")},{role:"button"},{tabindex:y=i[7]?-1:0},{"aria-expanded":b=i[9]?"true":"false"},i[19]],ee={};for(let J=0;J<Z.length;J+=1)ee=qi(ee,Z[J]);return{c(){e=ti("div"),S&&S.c(),t=Xi(),o=ti("div"),O&&O.c(),u=Xi(),V&&V.c(),m=Xi(),X&&X.c(),this.h()},l(J){e=ii(J,"DIV",{class:!0,style:!0,role:!0,tabindex:!0,"aria-expanded":!0});var ie=si(e);S&&S.l(ie),t=Yi(ie),o=ii(ie,"DIV",{class:!0});var ke=si(o);O&&O.l(ke),ke.forEach(Oe),u=Yi(ie),V&&V.l(ie),m=Yi(ie),X&&X.l(ie),ie.forEach(Oe),this.h()},h(){oi(o,"class",l=rr({"smui-accordion__header__title":!0,"smui-accordion__header__title--with-description":i[20].description})),or(e,ee)},m(J,ie){Dt(J,e,ie),S&&S.m(e,null),Kt(e,t),Kt(e,o),O&&O.m(o,null),Kt(e,u),V&&V.m(e,null),Kt(e,m),X&&X.m(e,null),i[24](e),x=!0,C||(T=[ir(v=Eo.call(null,e,i[0])),ir(i[10].call(null,e)),ir(w=oh.call(null,e,{ripple:i[3],unbounded:!1,surface:!i[7],disabled:i[8]||i[7],addClass:i[16],removeClass:i[17],addStyle:i[18]})),qn(e,"click",i[14]),qn(e,"keydown",i[15])],C=!0)},p(J,[ie]){J[3]?S||(S=rv(),S.c(),S.m(e,t)):S&&(S.d(1),S=null),O&&O.p&&(!x||ie&4194304)&&dr(O,M,J,J[22],x?mr(M,J[22],ie,null):pr(J[22]),null),(!x||ie&1048576&&l!==(l=rr({"smui-accordion__header__title":!0,"smui-accordion__header__title--with-description":J[20].description})))&&oi(o,"class",l),J[20].description?V?(V.p(J,ie),ie&1048576&&yt(V,1)):(V=ov(J),V.c(),yt(V,1),V.m(e,m)):V&&(Dr(),At(V,1,1,()=>{V=null}),Mr()),J[20].icon?X?(X.p(J,ie),ie&1048576&&yt(X,1)):(X=sv(J),X.c(),yt(X,1),X.m(e,null)):X&&(Dr(),At(X,1,1,()=>{X=null}),Mr()),or(e,ee=wr(Z,[(!x||ie&34&&r!==(r=rr({[J[1]]:!0,"smui-accordion__header":!0,...J[5]})))&&{class:r},(!x||ie&68&&h!==(h=Object.entries(J[6]).map(av).concat([J[2]]).join(" ")))&&{style:h},{role:"button"},(!x||ie&128&&y!==(y=J[7]?-1:0))&&{tabindex:y},(!x||ie&512&&b!==(b=J[9]?"true":"false"))&&{"aria-expanded":b},ie&524288&&J[19]])),v&&ro(v.update)&&ie&1&&v.update.call(null,J[0]),w&&ro(w.update)&&ie&392&&w.update.call(null,{ripple:J[3],unbounded:!1,surface:!J[7],disabled:J[8]||J[7],addClass:J[16],removeClass:J[17],addStyle:J[18]})},i(J){x||(yt(O,J),yt(V),yt(X),x=!0)},o(J){At(O,J),At(V),At(X),x=!1},d(J){J&&Oe(e),S&&S.d(),O&&O.d(J),V&&V.d(),X&&X.d(),i[24](null),C=!1,Io(T)}}}const av=([i,e])=>`${i}: ${e};`;function tE(i,e,t){const o=["use","class","style","ripple","getElement"];let l=Zn(e,o),u,m,r,{$$slots:h={},$$scope:y}=e;const b=pg(h),v=go(mo());let{use:w=[]}=e,{class:x=""}=e,{style:C=""}=e,{ripple:T=!0}=e,S,M={},O={};const V=ds("SMUI:accordion:panel:disabled");Wo(i,V,_e=>t(8,m=_e));const X=ds("SMUI:accordion:panel:nonInteractive");Wo(i,X,_e=>t(7,u=_e));const Z=ds("SMUI:accordion:panel:open");Wo(i,Z,_e=>t(9,r=_e));function ee(_e){_e=_e,_e.button===0&&So(fe(),"SMUIAccordionHeader:activate",{event:_e})}function J(_e){_e=_e,_e.key==="Enter"&&So(fe(),"SMUIAccordionHeader:activate",{event:_e})}function ie(_e){M[_e]||t(5,M[_e]=!0,M)}function ke(_e){(!(_e in M)||M[_e])&&t(5,M[_e]=!1,M)}function Le(_e,ve){O[_e]!=ve&&(ve===""||ve==null?(delete O[_e],t(6,O)):t(6,O[_e]=ve,O))}function fe(){return S}function Te(_e){wn[_e?"unshift":"push"](()=>{S=_e,t(4,S)})}return i.$$set=_e=>{e=qi(qi({},e),uo(_e)),t(19,l=Zn(e,o)),"use"in _e&&t(0,w=_e.use),"class"in _e&&t(1,x=_e.class),"style"in _e&&t(2,C=_e.style),"ripple"in _e&&t(3,T=_e.ripple),"$$scope"in _e&&t(22,y=_e.$$scope)},[w,x,C,T,S,M,O,u,m,r,v,V,X,Z,ee,J,ie,ke,Le,l,b,fe,y,h,Te]}class iE extends xr{constructor(e){super(),Ar(this,e,tE,eE,br,{use:0,class:1,style:2,ripple:3,getElement:21})}get getElement(){return this.$$.ctx[21]}}const qp=JC,G1=iE;function lv(i){let e;return{c(){e=ti("div"),this.h()},l(t){e=ii(t,"DIV",{class:!0}),si(e).forEach(Oe),this.h()},h(){oi(e,"class","mdc-button__touch")},m(t,o){Dt(t,e,o)},d(t){t&&Oe(e)}}}function nE(i){let e,t,o,l;const u=i[27].default,m=fr(u,i,i[29],null);let r=i[6]&&lv();return{c(){e=ti("div"),t=Xi(),m&&m.c(),r&&r.c(),o=gn(),this.h()},l(h){e=ii(h,"DIV",{class:!0}),si(e).forEach(Oe),t=Yi(h),m&&m.l(h),r&&r.l(h),o=gn(),this.h()},h(){oi(e,"class","mdc-button__ripple")},m(h,y){Dt(h,e,y),Dt(h,t,y),m&&m.m(h,y),r&&r.m(h,y),Dt(h,o,y),l=!0},p(h,y){m&&m.p&&(!l||y&536870912)&&dr(m,u,h,h[29],l?mr(u,h[29],y,null):pr(h[29]),null),h[6]?r||(r=lv(),r.c(),r.m(o.parentNode,o)):r&&(r.d(1),r=null)},i(h){l||(yt(m,h),l=!0)},o(h){At(m,h),l=!1},d(h){h&&Oe(e),h&&Oe(t),m&&m.d(h),r&&r.d(h),h&&Oe(o)}}}function rE(i){let e,t,o;const l=[{use:[[oh,{ripple:i[3],unbounded:!1,color:i[4],disabled:!!i[22].disabled,addClass:i[18],removeClass:i[19],addStyle:i[20]}],i[16],...i[0]]},{class:rr({[i[1]]:!0,"mdc-button":!0,"mdc-button--raised":i[5]==="raised","mdc-button--unelevated":i[5]==="unelevated","mdc-button--outlined":i[5]==="outlined","smui-button--color-secondary":i[4]==="secondary","mdc-button--touch":i[6],"mdc-card__action":i[17]==="card:action","mdc-card__action--button":i[17]==="card:action","mdc-dialog__button":i[17]==="dialog:action","mdc-top-app-bar__navigation-icon":i[17]==="top-app-bar:navigation","mdc-top-app-bar__action-item":i[17]==="top-app-bar:action","mdc-snackbar__action":i[17]==="snackbar:actions","mdc-banner__secondary-action":i[17]==="banner"&&i[8],"mdc-banner__primary-action":i[17]==="banner"&&!i[8],"mdc-tooltip__action":i[17]==="tooltip:rich-actions",...i[11]})},{style:Object.entries(i[12]).map(uv).concat([i[2]]).join(" ")},i[15],i[14],i[13],{href:i[7]},i[22]];var u=i[9];function m(r){let h={$$slots:{default:[nE]},$$scope:{ctx:r}};for(let y=0;y<l.length;y+=1)h=qi(h,l[y]);return{props:h}}return u&&(e=wl(u,m(i)),i[28](e),e.$on("click",i[21])),{c(){e&&Hi(e.$$.fragment),t=gn()},l(r){e&&$i(e.$$.fragment,r),t=gn()},m(r,h){e&&Gi(e,r,h),Dt(r,t,h),o=!0},p(r,[h]){const y=h&6289919?wr(l,[h&6094873&&{use:[[oh,{ripple:r[3],unbounded:!1,color:r[4],disabled:!!r[22].disabled,addClass:r[18],removeClass:r[19],addStyle:r[20]}],r[16],...r[0]]},h&133490&&{class:rr({[r[1]]:!0,"mdc-button":!0,"mdc-button--raised":r[5]==="raised","mdc-button--unelevated":r[5]==="unelevated","mdc-button--outlined":r[5]==="outlined","smui-button--color-secondary":r[4]==="secondary","mdc-button--touch":r[6],"mdc-card__action":r[17]==="card:action","mdc-card__action--button":r[17]==="card:action","mdc-dialog__button":r[17]==="dialog:action","mdc-top-app-bar__navigation-icon":r[17]==="top-app-bar:navigation","mdc-top-app-bar__action-item":r[17]==="top-app-bar:action","mdc-snackbar__action":r[17]==="snackbar:actions","mdc-banner__secondary-action":r[17]==="banner"&&r[8],"mdc-banner__primary-action":r[17]==="banner"&&!r[8],"mdc-tooltip__action":r[17]==="tooltip:rich-actions",...r[11]})},h&4100&&{style:Object.entries(r[12]).map(uv).concat([r[2]]).join(" ")},h&32768&&po(r[15]),h&16384&&po(r[14]),h&8192&&po(r[13]),h&128&&{href:r[7]},h&4194304&&po(r[22])]):{};if(h&536870976&&(y.$$scope={dirty:h,ctx:r}),u!==(u=r[9])){if(e){Dr();const b=e;At(b.$$.fragment,1,0,()=>{Wi(b,1)}),Mr()}u?(e=wl(u,m(r)),r[28](e),e.$on("click",r[21]),Hi(e.$$.fragment),yt(e.$$.fragment,1),Gi(e,t.parentNode,t)):e=null}else u&&e.$set(y)},i(r){o||(e&&yt(e.$$.fragment,r),o=!0)},o(r){e&&At(e.$$.fragment,r),o=!1},d(r){i[28](null),r&&Oe(t),e&&Wi(e,r)}}}const uv=([i,e])=>`${i}: ${e};`;function oE(i,e,t){let o,l,u;const m=["use","class","style","ripple","color","variant","touch","href","action","defaultAction","secondary","component","getElement"];let r=Zn(e,m),{$$slots:h={},$$scope:y}=e;const b=go(mo());let{use:v=[]}=e,{class:w=""}=e,{style:x=""}=e,{ripple:C=!0}=e,{color:T="primary"}=e,{variant:S="text"}=e,{touch:M=!1}=e,{href:O=void 0}=e,{action:V="close"}=e,{defaultAction:X=!1}=e,{secondary:Z=!1}=e,ee,J={},ie={},ke=ds("SMUI:button:context"),{component:Le=O==null?v4:gg}=e,fe=r.disabled;$o("SMUI:label:context","button"),$o("SMUI:icon:context","button");function Te(We){J[We]||t(11,J[We]=!0,J)}function _e(We){(!(We in J)||J[We])&&t(11,J[We]=!1,J)}function ve(We,be){ie[We]!=be&&(be===""||be==null?(delete ie[We],t(12,ie)):t(12,ie[We]=be,ie))}function rt(){ke==="banner"&&So(nt(),Z?"SMUIBannerButton:secondaryActionClick":"SMUIBannerButton:primaryActionClick")}function nt(){return ee.getElement()}function Tt(We){wn[We?"unshift":"push"](()=>{ee=We,t(10,ee)})}return i.$$set=We=>{t(30,e=qi(qi({},e),uo(We))),t(22,r=Zn(e,m)),"use"in We&&t(0,v=We.use),"class"in We&&t(1,w=We.class),"style"in We&&t(2,x=We.style),"ripple"in We&&t(3,C=We.ripple),"color"in We&&t(4,T=We.color),"variant"in We&&t(5,S=We.variant),"touch"in We&&t(6,M=We.touch),"href"in We&&t(7,O=We.href),"action"in We&&t(23,V=We.action),"defaultAction"in We&&t(24,X=We.defaultAction),"secondary"in We&&t(8,Z=We.secondary),"component"in We&&t(9,Le=We.component),"$$scope"in We&&t(29,y=We.$$scope)},i.$$.update=()=>{t(15,o=ke==="dialog:action"&&V!=null?{"data-mdc-dialog-action":V}:{action:e.action}),t(14,l=ke==="dialog:action"&&X?{"data-mdc-dialog-button-default":""}:{default:e.default}),t(13,u=ke==="banner"?{}:{secondary:e.secondary}),fe!==r.disabled&&(nt().blur(),t(26,fe=r.disabled))},e=uo(e),[v,w,x,C,T,S,M,O,Z,Le,ee,J,ie,u,l,o,b,ke,Te,_e,ve,rt,r,V,X,nt,fe,h,Tt,y]}class Oh extends xr{constructor(e){super(),Ar(this,e,oE,rE,br,{use:0,class:1,style:2,ripple:3,color:4,variant:5,touch:6,href:7,action:23,defaultAction:24,secondary:8,component:9,getElement:25})}get getElement(){return this.$$.ctx[25]}}var yw={exports:{}},Yg={exports:{}},_w=function(e,t){return function(){for(var l=new Array(arguments.length),u=0;u<l.length;u++)l[u]=arguments[u];return e.apply(t,l)}},sE=_w,n0=Object.prototype.toString;function Zg(i){return n0.call(i)==="[object Array]"}function $2(i){return typeof i>"u"}function aE(i){return i!==null&&!$2(i)&&i.constructor!==null&&!$2(i.constructor)&&typeof i.constructor.isBuffer=="function"&&i.constructor.isBuffer(i)}function lE(i){return n0.call(i)==="[object ArrayBuffer]"}function uE(i){return typeof FormData<"u"&&i instanceof FormData}function cE(i){var e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(i):e=i&&i.buffer&&i.buffer instanceof ArrayBuffer,e}function hE(i){return typeof i=="string"}function fE(i){return typeof i=="number"}function vw(i){return i!==null&&typeof i=="object"}function l1(i){if(n0.call(i)!=="[object Object]")return!1;var e=Object.getPrototypeOf(i);return e===null||e===Object.prototype}function dE(i){return n0.call(i)==="[object Date]"}function pE(i){return n0.call(i)==="[object File]"}function mE(i){return n0.call(i)==="[object Blob]"}function bw(i){return n0.call(i)==="[object Function]"}function gE(i){return vw(i)&&bw(i.pipe)}function yE(i){return typeof URLSearchParams<"u"&&i instanceof URLSearchParams}function _E(i){return i.trim?i.trim():i.replace(/^\s+|\s+$/g,"")}function vE(){return typeof navigator<"u"&&(navigator.product==="ReactNative"||navigator.product==="NativeScript"||navigator.product==="NS")?!1:typeof window<"u"&&typeof document<"u"}function Kg(i,e){if(!(i===null||typeof i>"u"))if(typeof i!="object"&&(i=[i]),Zg(i))for(var t=0,o=i.length;t<o;t++)e.call(null,i[t],t,i);else for(var l in i)Object.prototype.hasOwnProperty.call(i,l)&&e.call(null,i[l],l,i)}function eg(){var i={};function e(l,u){l1(i[u])&&l1(l)?i[u]=eg(i[u],l):l1(l)?i[u]=eg({},l):Zg(l)?i[u]=l.slice():i[u]=l}for(var t=0,o=arguments.length;t<o;t++)Kg(arguments[t],e);return i}function bE(i,e,t){return Kg(e,function(l,u){t&&typeof l=="function"?i[u]=sE(l,t):i[u]=l}),i}function wE(i){return i.charCodeAt(0)===65279&&(i=i.slice(1)),i}var Ru={isArray:Zg,isArrayBuffer:lE,isBuffer:aE,isFormData:uE,isArrayBufferView:cE,isString:hE,isNumber:fE,isObject:vw,isPlainObject:l1,isUndefined:$2,isDate:dE,isFile:pE,isBlob:mE,isFunction:bw,isStream:gE,isURLSearchParams:yE,isStandardBrowserEnv:vE,forEach:Kg,merge:eg,extend:bE,trim:_E,stripBOM:wE},A0=Ru;function cv(i){return encodeURIComponent(i).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var ww=function(e,t,o){if(!t)return e;var l;if(o)l=o(t);else if(A0.isURLSearchParams(t))l=t.toString();else{var u=[];A0.forEach(t,function(h,y){h===null||typeof h>"u"||(A0.isArray(h)?y=y+"[]":h=[h],A0.forEach(h,function(v){A0.isDate(v)?v=v.toISOString():A0.isObject(v)&&(v=JSON.stringify(v)),u.push(cv(y)+"="+cv(v))}))}),l=u.join("&")}if(l){var m=e.indexOf("#");m!==-1&&(e=e.slice(0,m)),e+=(e.indexOf("?")===-1?"?":"&")+l}return e},xE=Ru;function W1(){this.handlers=[]}W1.prototype.use=function(e,t,o){return this.handlers.push({fulfilled:e,rejected:t,synchronous:o?o.synchronous:!1,runWhen:o?o.runWhen:null}),this.handlers.length-1};W1.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)};W1.prototype.forEach=function(e){xE.forEach(this.handlers,function(o){o!==null&&e(o)})};var AE=W1,kE=Ru,SE=function(e,t){kE.forEach(e,function(l,u){u!==t&&u.toUpperCase()===t.toUpperCase()&&(e[t]=l,delete e[u])})},xw=function(e,t,o,l,u){return e.config=t,o&&(e.code=o),e.request=l,e.response=u,e.isAxiosError=!0,e.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},e},Zm,hv;function Aw(){if(hv)return Zm;hv=1;var i=xw;return Zm=function(t,o,l,u,m){var r=new Error(t);return i(r,o,l,u,m)},Zm}var Km,fv;function CE(){if(fv)return Km;fv=1;var i=Aw();return Km=function(t,o,l){var u=l.config.validateStatus;!l.status||!u||u(l.status)?t(l):o(i("Request failed with status code "+l.status,l.config,null,l.request,l))},Km}var Jm,dv;function EE(){if(dv)return Jm;dv=1;var i=Ru;return Jm=i.isStandardBrowserEnv()?function(){return{write:function(o,l,u,m,r,h){var y=[];y.push(o+"="+encodeURIComponent(l)),i.isNumber(u)&&y.push("expires="+new Date(u).toGMTString()),i.isString(m)&&y.push("path="+m),i.isString(r)&&y.push("domain="+r),h===!0&&y.push("secure"),document.cookie=y.join("; ")},read:function(o){var l=document.cookie.match(new RegExp("(^|;\\s*)("+o+")=([^;]*)"));return l?decodeURIComponent(l[3]):null},remove:function(o){this.write(o,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}(),Jm}var Qm,pv;function IE(){return pv||(pv=1,Qm=function(e){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(e)}),Qm}var $m,mv;function TE(){return mv||(mv=1,$m=function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}),$m}var e2,gv;function LE(){if(gv)return e2;gv=1;var i=IE(),e=TE();return e2=function(o,l){return o&&!i(l)?e(o,l):l},e2}var t2,yv;function PE(){if(yv)return t2;yv=1;var i=Ru,e=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];return t2=function(o){var l={},u,m,r;return o&&i.forEach(o.split(`
`),function(y){if(r=y.indexOf(":"),u=i.trim(y.substr(0,r)).toLowerCase(),m=i.trim(y.substr(r+1)),u){if(l[u]&&e.indexOf(u)>=0)return;u==="set-cookie"?l[u]=(l[u]?l[u]:[]).concat([m]):l[u]=l[u]?l[u]+", "+m:m}}),l},t2}var i2,_v;function ME(){if(_v)return i2;_v=1;var i=Ru;return i2=i.isStandardBrowserEnv()?function(){var t=/(msie|trident)/i.test(navigator.userAgent),o=document.createElement("a"),l;function u(m){var r=m;return t&&(o.setAttribute("href",r),r=o.href),o.setAttribute("href",r),{href:o.href,protocol:o.protocol?o.protocol.replace(/:$/,""):"",host:o.host,search:o.search?o.search.replace(/^\?/,""):"",hash:o.hash?o.hash.replace(/^#/,""):"",hostname:o.hostname,port:o.port,pathname:o.pathname.charAt(0)==="/"?o.pathname:"/"+o.pathname}}return l=u(window.location.href),function(r){var h=i.isString(r)?u(r):r;return h.protocol===l.protocol&&h.host===l.host}}():function(){return function(){return!0}}(),i2}var n2,vv;function bv(){if(vv)return n2;vv=1;var i=Ru,e=CE(),t=EE(),o=ww,l=LE(),u=PE(),m=ME(),r=Aw();return n2=function(y){return new Promise(function(v,w){var x=y.data,C=y.headers,T=y.responseType;i.isFormData(x)&&delete C["Content-Type"];var S=new XMLHttpRequest;if(y.auth){var M=y.auth.username||"",O=y.auth.password?unescape(encodeURIComponent(y.auth.password)):"";C.Authorization="Basic "+btoa(M+":"+O)}var V=l(y.baseURL,y.url);S.open(y.method.toUpperCase(),o(V,y.params,y.paramsSerializer),!0),S.timeout=y.timeout;function X(){if(!!S){var ee="getAllResponseHeaders"in S?u(S.getAllResponseHeaders()):null,J=!T||T==="text"||T==="json"?S.responseText:S.response,ie={data:J,status:S.status,statusText:S.statusText,headers:ee,config:y,request:S};e(v,w,ie),S=null}}if("onloadend"in S?S.onloadend=X:S.onreadystatechange=function(){!S||S.readyState!==4||S.status===0&&!(S.responseURL&&S.responseURL.indexOf("file:")===0)||setTimeout(X)},S.onabort=function(){!S||(w(r("Request aborted",y,"ECONNABORTED",S)),S=null)},S.onerror=function(){w(r("Network Error",y,null,S)),S=null},S.ontimeout=function(){var J="timeout of "+y.timeout+"ms exceeded";y.timeoutErrorMessage&&(J=y.timeoutErrorMessage),w(r(J,y,y.transitional&&y.transitional.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",S)),S=null},i.isStandardBrowserEnv()){var Z=(y.withCredentials||m(V))&&y.xsrfCookieName?t.read(y.xsrfCookieName):void 0;Z&&(C[y.xsrfHeaderName]=Z)}"setRequestHeader"in S&&i.forEach(C,function(J,ie){typeof x>"u"&&ie.toLowerCase()==="content-type"?delete C[ie]:S.setRequestHeader(ie,J)}),i.isUndefined(y.withCredentials)||(S.withCredentials=!!y.withCredentials),T&&T!=="json"&&(S.responseType=y.responseType),typeof y.onDownloadProgress=="function"&&S.addEventListener("progress",y.onDownloadProgress),typeof y.onUploadProgress=="function"&&S.upload&&S.upload.addEventListener("progress",y.onUploadProgress),y.cancelToken&&y.cancelToken.promise.then(function(J){!S||(S.abort(),w(J),S=null)}),x||(x=null),S.send(x)})},n2}var Ka=Ru,wv=SE,DE=xw,OE={"Content-Type":"application/x-www-form-urlencoded"};function xv(i,e){!Ka.isUndefined(i)&&Ka.isUndefined(i["Content-Type"])&&(i["Content-Type"]=e)}function FE(){var i;return(typeof XMLHttpRequest<"u"||typeof process<"u"&&Object.prototype.toString.call(process)==="[object process]")&&(i=bv()),i}function RE(i,e,t){if(Ka.isString(i))try{return(e||JSON.parse)(i),Ka.trim(i)}catch(o){if(o.name!=="SyntaxError")throw o}return(t||JSON.stringify)(i)}var X1={transitional:{silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},adapter:FE(),transformRequest:[function(e,t){return wv(t,"Accept"),wv(t,"Content-Type"),Ka.isFormData(e)||Ka.isArrayBuffer(e)||Ka.isBuffer(e)||Ka.isStream(e)||Ka.isFile(e)||Ka.isBlob(e)?e:Ka.isArrayBufferView(e)?e.buffer:Ka.isURLSearchParams(e)?(xv(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):Ka.isObject(e)||t&&t["Content-Type"]==="application/json"?(xv(t,"application/json"),RE(e)):e}],transformResponse:[function(e){var t=this.transitional,o=t&&t.silentJSONParsing,l=t&&t.forcedJSONParsing,u=!o&&this.responseType==="json";if(u||l&&Ka.isString(e)&&e.length)try{return JSON.parse(e)}catch(m){if(u)throw m.name==="SyntaxError"?DE(m,this,"E_JSON_PARSE"):m}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(e){return e>=200&&e<300}};X1.headers={common:{Accept:"application/json, text/plain, */*"}};Ka.forEach(["delete","get","head"],function(e){X1.headers[e]={}});Ka.forEach(["post","put","patch"],function(e){X1.headers[e]=Ka.merge(OE)});var Jg=X1,BE=Ru,zE=Jg,NE=function(e,t,o){var l=this||zE;return BE.forEach(o,function(m){e=m.call(l,e,t)}),e},r2,Av;function kw(){return Av||(Av=1,r2=function(e){return!!(e&&e.__CANCEL__)}),r2}var kv=Ru,o2=NE,jE=kw(),UE=Jg;function s2(i){i.cancelToken&&i.cancelToken.throwIfRequested()}var VE=function(e){s2(e),e.headers=e.headers||{},e.data=o2.call(e,e.data,e.headers,e.transformRequest),e.headers=kv.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),kv.forEach(["delete","get","head","post","put","patch","common"],function(l){delete e.headers[l]});var t=e.adapter||UE.adapter;return t(e).then(function(l){return s2(e),l.data=o2.call(e,l.data,l.headers,e.transformResponse),l},function(l){return jE(l)||(s2(e),l&&l.response&&(l.response.data=o2.call(e,l.response.data,l.response.headers,e.transformResponse))),Promise.reject(l)})},vl=Ru,Sw=function(e,t){t=t||{};var o={},l=["url","method","data"],u=["headers","auth","proxy","params"],m=["baseURL","transformRequest","transformResponse","paramsSerializer","timeout","timeoutMessage","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","decompress","maxContentLength","maxBodyLength","maxRedirects","transport","httpAgent","httpsAgent","cancelToken","socketPath","responseEncoding"],r=["validateStatus"];function h(w,x){return vl.isPlainObject(w)&&vl.isPlainObject(x)?vl.merge(w,x):vl.isPlainObject(x)?vl.merge({},x):vl.isArray(x)?x.slice():x}function y(w){vl.isUndefined(t[w])?vl.isUndefined(e[w])||(o[w]=h(void 0,e[w])):o[w]=h(e[w],t[w])}vl.forEach(l,function(x){vl.isUndefined(t[x])||(o[x]=h(void 0,t[x]))}),vl.forEach(u,y),vl.forEach(m,function(x){vl.isUndefined(t[x])?vl.isUndefined(e[x])||(o[x]=h(void 0,e[x])):o[x]=h(void 0,t[x])}),vl.forEach(r,function(x){x in t?o[x]=h(e[x],t[x]):x in e&&(o[x]=h(void 0,e[x]))});var b=l.concat(u).concat(m).concat(r),v=Object.keys(e).concat(Object.keys(t)).filter(function(x){return b.indexOf(x)===-1});return vl.forEach(v,y),o};const qE="axios",HE="0.21.4",GE="Promise based HTTP client for the browser and node.js",WE="index.js",XE={test:"grunt test",start:"node ./sandbox/server.js",build:"NODE_ENV=production grunt build",preversion:"npm test",version:"npm run build && grunt version && git add -A dist && git add CHANGELOG.md bower.json package.json",postversion:"git push && git push --tags",examples:"node ./examples/server.js",coveralls:"cat coverage/lcov.info | ./node_modules/coveralls/bin/coveralls.js",fix:"eslint --fix lib/**/*.js"},YE={type:"git",url:"https://github.com/axios/axios.git"},ZE=["xhr","http","ajax","promise","node"],KE="Matt Zabriskie",JE="MIT",QE={url:"https://github.com/axios/axios/issues"},$E="https://axios-http.com",eI={coveralls:"^3.0.0","es6-promise":"^4.2.4",grunt:"^1.3.0","grunt-banner":"^0.6.0","grunt-cli":"^1.2.0","grunt-contrib-clean":"^1.1.0","grunt-contrib-watch":"^1.0.0","grunt-eslint":"^23.0.0","grunt-karma":"^4.0.0","grunt-mocha-test":"^0.13.3","grunt-ts":"^6.0.0-beta.19","grunt-webpack":"^4.0.2","istanbul-instrumenter-loader":"^1.0.0","jasmine-core":"^2.4.1",karma:"^6.3.2","karma-chrome-launcher":"^3.1.0","karma-firefox-launcher":"^2.1.0","karma-jasmine":"^1.1.1","karma-jasmine-ajax":"^0.1.13","karma-safari-launcher":"^1.0.0","karma-sauce-launcher":"^4.3.6","karma-sinon":"^1.0.5","karma-sourcemap-loader":"^0.3.8","karma-webpack":"^4.0.2","load-grunt-tasks":"^3.5.2",minimist:"^1.2.0",mocha:"^8.2.1",sinon:"^4.5.0","terser-webpack-plugin":"^4.2.3",typescript:"^4.0.5","url-search-params":"^0.10.0",webpack:"^4.44.2","webpack-dev-server":"^3.11.0"},tI={"./lib/adapters/http.js":"./lib/adapters/xhr.js"},iI="dist/axios.min.js",nI="dist/axios.min.js",rI="./index.d.ts",oI={"follow-redirects":"^1.14.0"},sI=[{path:"./dist/axios.min.js",threshold:"5kB"}],aI={name:qE,version:HE,description:GE,main:WE,scripts:XE,repository:YE,keywords:ZE,author:KE,license:JE,bugs:QE,homepage:$E,devDependencies:eI,browser:tI,jsdelivr:iI,unpkg:nI,typings:rI,dependencies:oI,bundlesize:sI};var Cw=aI,Qg={};["object","boolean","number","function","string","symbol"].forEach(function(i,e){Qg[i]=function(o){return typeof o===i||"a"+(e<1?"n ":" ")+i}});var Sv={},lI=Cw.version.split(".");function Ew(i,e){for(var t=e?e.split("."):lI,o=i.split("."),l=0;l<3;l++){if(t[l]>o[l])return!0;if(t[l]<o[l])return!1}return!1}Qg.transitional=function(e,t,o){var l=t&&Ew(t);function u(m,r){return"[Axios v"+Cw.version+"] Transitional option '"+m+"'"+r+(o?". "+o:"")}return function(m,r,h){if(e===!1)throw new Error(u(r," has been removed in "+t));return l&&!Sv[r]&&(Sv[r]=!0,console.warn(u(r," has been deprecated since v"+t+" and will be removed in the near future"))),e?e(m,r,h):!0}};function uI(i,e,t){if(typeof i!="object")throw new TypeError("options must be an object");for(var o=Object.keys(i),l=o.length;l-- >0;){var u=o[l],m=e[u];if(m){var r=i[u],h=r===void 0||m(r,u,i);if(h!==!0)throw new TypeError("option "+u+" must be "+h);continue}if(t!==!0)throw Error("Unknown option "+u)}}var cI={isOlderVersion:Ew,assertOptions:uI,validators:Qg},Iw=Ru,hI=ww,Cv=AE,Ev=VE,Y1=Sw,Tw=cI,k0=Tw.validators;function op(i){this.defaults=i,this.interceptors={request:new Cv,response:new Cv}}op.prototype.request=function(e){typeof e=="string"?(e=arguments[1]||{},e.url=arguments[0]):e=e||{},e=Y1(this.defaults,e),e.method?e.method=e.method.toLowerCase():this.defaults.method?e.method=this.defaults.method.toLowerCase():e.method="get";var t=e.transitional;t!==void 0&&Tw.assertOptions(t,{silentJSONParsing:k0.transitional(k0.boolean,"1.0.0"),forcedJSONParsing:k0.transitional(k0.boolean,"1.0.0"),clarifyTimeoutError:k0.transitional(k0.boolean,"1.0.0")},!1);var o=[],l=!0;this.interceptors.request.forEach(function(w){typeof w.runWhen=="function"&&w.runWhen(e)===!1||(l=l&&w.synchronous,o.unshift(w.fulfilled,w.rejected))});var u=[];this.interceptors.response.forEach(function(w){u.push(w.fulfilled,w.rejected)});var m;if(!l){var r=[Ev,void 0];for(Array.prototype.unshift.apply(r,o),r=r.concat(u),m=Promise.resolve(e);r.length;)m=m.then(r.shift(),r.shift());return m}for(var h=e;o.length;){var y=o.shift(),b=o.shift();try{h=y(h)}catch(v){b(v);break}}try{m=Ev(h)}catch(v){return Promise.reject(v)}for(;u.length;)m=m.then(u.shift(),u.shift());return m};op.prototype.getUri=function(e){return e=Y1(this.defaults,e),hI(e.url,e.params,e.paramsSerializer).replace(/^\?/,"")};Iw.forEach(["delete","get","head","options"],function(e){op.prototype[e]=function(t,o){return this.request(Y1(o||{},{method:e,url:t,data:(o||{}).data}))}});Iw.forEach(["post","put","patch"],function(e){op.prototype[e]=function(t,o,l){return this.request(Y1(l||{},{method:e,url:t,data:o}))}});var fI=op,a2,Iv;function Lw(){if(Iv)return a2;Iv=1;function i(e){this.message=e}return i.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},i.prototype.__CANCEL__=!0,a2=i,a2}var l2,Tv;function dI(){if(Tv)return l2;Tv=1;var i=Lw();function e(t){if(typeof t!="function")throw new TypeError("executor must be a function.");var o;this.promise=new Promise(function(m){o=m});var l=this;t(function(m){l.reason||(l.reason=new i(m),o(l.reason))})}return e.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},e.source=function(){var o,l=new e(function(m){o=m});return{token:l,cancel:o}},l2=e,l2}var u2,Lv;function pI(){return Lv||(Lv=1,u2=function(e){return function(o){return e.apply(null,o)}}),u2}var c2,Pv;function mI(){return Pv||(Pv=1,c2=function(e){return typeof e=="object"&&e.isAxiosError===!0}),c2}var Mv=Ru,gI=_w,u1=fI,yI=Sw,_I=Jg;function Pw(i){var e=new u1(i),t=gI(u1.prototype.request,e);return Mv.extend(t,u1.prototype,e),Mv.extend(t,e),t}var Tc=Pw(_I);Tc.Axios=u1;Tc.create=function(e){return Pw(yI(Tc.defaults,e))};Tc.Cancel=Lw();Tc.CancelToken=dI();Tc.isCancel=kw();Tc.all=function(e){return Promise.all(e)};Tc.spread=pI();Tc.isAxiosError=mI();Yg.exports=Tc;Yg.exports.default=Tc;(function(i){i.exports=Yg.exports})(yw);const vI=iA(yw.exports);var Bh={};(function(i){var e=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";function t(u,m){return Object.prototype.hasOwnProperty.call(u,m)}i.assign=function(u){for(var m=Array.prototype.slice.call(arguments,1);m.length;){var r=m.shift();if(!!r){if(typeof r!="object")throw new TypeError(r+"must be non-object");for(var h in r)t(r,h)&&(u[h]=r[h])}}return u},i.shrinkBuf=function(u,m){return u.length===m?u:u.subarray?u.subarray(0,m):(u.length=m,u)};var o={arraySet:function(u,m,r,h,y){if(m.subarray&&u.subarray){u.set(m.subarray(r,r+h),y);return}for(var b=0;b<h;b++)u[y+b]=m[r+b]},flattenChunks:function(u){var m,r,h,y,b,v;for(h=0,m=0,r=u.length;m<r;m++)h+=u[m].length;for(v=new Uint8Array(h),y=0,m=0,r=u.length;m<r;m++)b=u[m],v.set(b,y),y+=b.length;return v}},l={arraySet:function(u,m,r,h,y){for(var b=0;b<h;b++)u[y+b]=m[r+b]},flattenChunks:function(u){return[].concat.apply([],u)}};i.setTyped=function(u){u?(i.Buf8=Uint8Array,i.Buf16=Uint16Array,i.Buf32=Int32Array,i.assign(i,o)):(i.Buf8=Array,i.Buf16=Array,i.Buf32=Array,i.assign(i,l))},i.setTyped(e)})(Bh);var sp={},lh={},sd={},bI=Bh,wI=4,Dv=0,Ov=1,xI=2;function ad(i){for(var e=i.length;--e>=0;)i[e]=0}var AI=0,Mw=1,kI=2,SI=3,CI=258,$g=29,ap=256,Jd=ap+1+$g,J0=30,ey=19,Dw=2*Jd+1,Wf=15,h2=16,EI=7,ty=256,Ow=16,Fw=17,Rw=18,tg=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],c1=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],II=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],Bw=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],TI=512,Ih=new Array((Jd+2)*2);ad(Ih);var zd=new Array(J0*2);ad(zd);var Qd=new Array(TI);ad(Qd);var $d=new Array(CI-SI+1);ad($d);var iy=new Array($g);ad(iy);var E1=new Array(J0);ad(E1);function f2(i,e,t,o,l){this.static_tree=i,this.extra_bits=e,this.extra_base=t,this.elems=o,this.max_length=l,this.has_stree=i&&i.length}var zw,Nw,jw;function d2(i,e){this.dyn_tree=i,this.max_code=0,this.stat_desc=e}function Uw(i){return i<256?Qd[i]:Qd[256+(i>>>7)]}function ep(i,e){i.pending_buf[i.pending++]=e&255,i.pending_buf[i.pending++]=e>>>8&255}function su(i,e,t){i.bi_valid>h2-t?(i.bi_buf|=e<<i.bi_valid&65535,ep(i,i.bi_buf),i.bi_buf=e>>h2-i.bi_valid,i.bi_valid+=t-h2):(i.bi_buf|=e<<i.bi_valid&65535,i.bi_valid+=t)}function $c(i,e,t){su(i,t[e*2],t[e*2+1])}function Vw(i,e){var t=0;do t|=i&1,i>>>=1,t<<=1;while(--e>0);return t>>>1}function LI(i){i.bi_valid===16?(ep(i,i.bi_buf),i.bi_buf=0,i.bi_valid=0):i.bi_valid>=8&&(i.pending_buf[i.pending++]=i.bi_buf&255,i.bi_buf>>=8,i.bi_valid-=8)}function PI(i,e){var t=e.dyn_tree,o=e.max_code,l=e.stat_desc.static_tree,u=e.stat_desc.has_stree,m=e.stat_desc.extra_bits,r=e.stat_desc.extra_base,h=e.stat_desc.max_length,y,b,v,w,x,C,T=0;for(w=0;w<=Wf;w++)i.bl_count[w]=0;for(t[i.heap[i.heap_max]*2+1]=0,y=i.heap_max+1;y<Dw;y++)b=i.heap[y],w=t[t[b*2+1]*2+1]+1,w>h&&(w=h,T++),t[b*2+1]=w,!(b>o)&&(i.bl_count[w]++,x=0,b>=r&&(x=m[b-r]),C=t[b*2],i.opt_len+=C*(w+x),u&&(i.static_len+=C*(l[b*2+1]+x)));if(T!==0){do{for(w=h-1;i.bl_count[w]===0;)w--;i.bl_count[w]--,i.bl_count[w+1]+=2,i.bl_count[h]--,T-=2}while(T>0);for(w=h;w!==0;w--)for(b=i.bl_count[w];b!==0;)v=i.heap[--y],!(v>o)&&(t[v*2+1]!==w&&(i.opt_len+=(w-t[v*2+1])*t[v*2],t[v*2+1]=w),b--)}}function qw(i,e,t){var o=new Array(Wf+1),l=0,u,m;for(u=1;u<=Wf;u++)o[u]=l=l+t[u-1]<<1;for(m=0;m<=e;m++){var r=i[m*2+1];r!==0&&(i[m*2]=Vw(o[r]++,r))}}function MI(){var i,e,t,o,l,u=new Array(Wf+1);for(t=0,o=0;o<$g-1;o++)for(iy[o]=t,i=0;i<1<<tg[o];i++)$d[t++]=o;for($d[t-1]=o,l=0,o=0;o<16;o++)for(E1[o]=l,i=0;i<1<<c1[o];i++)Qd[l++]=o;for(l>>=7;o<J0;o++)for(E1[o]=l<<7,i=0;i<1<<c1[o]-7;i++)Qd[256+l++]=o;for(e=0;e<=Wf;e++)u[e]=0;for(i=0;i<=143;)Ih[i*2+1]=8,i++,u[8]++;for(;i<=255;)Ih[i*2+1]=9,i++,u[9]++;for(;i<=279;)Ih[i*2+1]=7,i++,u[7]++;for(;i<=287;)Ih[i*2+1]=8,i++,u[8]++;for(qw(Ih,Jd+1,u),i=0;i<J0;i++)zd[i*2+1]=5,zd[i*2]=Vw(i,5);zw=new f2(Ih,tg,ap+1,Jd,Wf),Nw=new f2(zd,c1,0,J0,Wf),jw=new f2(new Array(0),II,0,ey,EI)}function Hw(i){var e;for(e=0;e<Jd;e++)i.dyn_ltree[e*2]=0;for(e=0;e<J0;e++)i.dyn_dtree[e*2]=0;for(e=0;e<ey;e++)i.bl_tree[e*2]=0;i.dyn_ltree[ty*2]=1,i.opt_len=i.static_len=0,i.last_lit=i.matches=0}function Gw(i){i.bi_valid>8?ep(i,i.bi_buf):i.bi_valid>0&&(i.pending_buf[i.pending++]=i.bi_buf),i.bi_buf=0,i.bi_valid=0}function DI(i,e,t,o){Gw(i),o&&(ep(i,t),ep(i,~t)),bI.arraySet(i.pending_buf,i.window,e,t,i.pending),i.pending+=t}function Fv(i,e,t,o){var l=e*2,u=t*2;return i[l]<i[u]||i[l]===i[u]&&o[e]<=o[t]}function p2(i,e,t){for(var o=i.heap[t],l=t<<1;l<=i.heap_len&&(l<i.heap_len&&Fv(e,i.heap[l+1],i.heap[l],i.depth)&&l++,!Fv(e,o,i.heap[l],i.depth));)i.heap[t]=i.heap[l],t=l,l<<=1;i.heap[t]=o}function Rv(i,e,t){var o,l,u=0,m,r;if(i.last_lit!==0)do o=i.pending_buf[i.d_buf+u*2]<<8|i.pending_buf[i.d_buf+u*2+1],l=i.pending_buf[i.l_buf+u],u++,o===0?$c(i,l,e):(m=$d[l],$c(i,m+ap+1,e),r=tg[m],r!==0&&(l-=iy[m],su(i,l,r)),o--,m=Uw(o),$c(i,m,t),r=c1[m],r!==0&&(o-=E1[m],su(i,o,r)));while(u<i.last_lit);$c(i,ty,e)}function ig(i,e){var t=e.dyn_tree,o=e.stat_desc.static_tree,l=e.stat_desc.has_stree,u=e.stat_desc.elems,m,r,h=-1,y;for(i.heap_len=0,i.heap_max=Dw,m=0;m<u;m++)t[m*2]!==0?(i.heap[++i.heap_len]=h=m,i.depth[m]=0):t[m*2+1]=0;for(;i.heap_len<2;)y=i.heap[++i.heap_len]=h<2?++h:0,t[y*2]=1,i.depth[y]=0,i.opt_len--,l&&(i.static_len-=o[y*2+1]);for(e.max_code=h,m=i.heap_len>>1;m>=1;m--)p2(i,t,m);y=u;do m=i.heap[1],i.heap[1]=i.heap[i.heap_len--],p2(i,t,1),r=i.heap[1],i.heap[--i.heap_max]=m,i.heap[--i.heap_max]=r,t[y*2]=t[m*2]+t[r*2],i.depth[y]=(i.depth[m]>=i.depth[r]?i.depth[m]:i.depth[r])+1,t[m*2+1]=t[r*2+1]=y,i.heap[1]=y++,p2(i,t,1);while(i.heap_len>=2);i.heap[--i.heap_max]=i.heap[1],PI(i,e),qw(t,h,i.bl_count)}function Bv(i,e,t){var o,l=-1,u,m=e[0*2+1],r=0,h=7,y=4;for(m===0&&(h=138,y=3),e[(t+1)*2+1]=65535,o=0;o<=t;o++)u=m,m=e[(o+1)*2+1],!(++r<h&&u===m)&&(r<y?i.bl_tree[u*2]+=r:u!==0?(u!==l&&i.bl_tree[u*2]++,i.bl_tree[Ow*2]++):r<=10?i.bl_tree[Fw*2]++:i.bl_tree[Rw*2]++,r=0,l=u,m===0?(h=138,y=3):u===m?(h=6,y=3):(h=7,y=4))}function zv(i,e,t){var o,l=-1,u,m=e[0*2+1],r=0,h=7,y=4;for(m===0&&(h=138,y=3),o=0;o<=t;o++)if(u=m,m=e[(o+1)*2+1],!(++r<h&&u===m)){if(r<y)do $c(i,u,i.bl_tree);while(--r!==0);else u!==0?(u!==l&&($c(i,u,i.bl_tree),r--),$c(i,Ow,i.bl_tree),su(i,r-3,2)):r<=10?($c(i,Fw,i.bl_tree),su(i,r-3,3)):($c(i,Rw,i.bl_tree),su(i,r-11,7));r=0,l=u,m===0?(h=138,y=3):u===m?(h=6,y=3):(h=7,y=4)}}function OI(i){var e;for(Bv(i,i.dyn_ltree,i.l_desc.max_code),Bv(i,i.dyn_dtree,i.d_desc.max_code),ig(i,i.bl_desc),e=ey-1;e>=3&&i.bl_tree[Bw[e]*2+1]===0;e--);return i.opt_len+=3*(e+1)+5+5+4,e}function FI(i,e,t,o){var l;for(su(i,e-257,5),su(i,t-1,5),su(i,o-4,4),l=0;l<o;l++)su(i,i.bl_tree[Bw[l]*2+1],3);zv(i,i.dyn_ltree,e-1),zv(i,i.dyn_dtree,t-1)}function RI(i){var e=4093624447,t;for(t=0;t<=31;t++,e>>>=1)if(e&1&&i.dyn_ltree[t*2]!==0)return Dv;if(i.dyn_ltree[9*2]!==0||i.dyn_ltree[10*2]!==0||i.dyn_ltree[13*2]!==0)return Ov;for(t=32;t<ap;t++)if(i.dyn_ltree[t*2]!==0)return Ov;return Dv}var Nv=!1;function BI(i){Nv||(MI(),Nv=!0),i.l_desc=new d2(i.dyn_ltree,zw),i.d_desc=new d2(i.dyn_dtree,Nw),i.bl_desc=new d2(i.bl_tree,jw),i.bi_buf=0,i.bi_valid=0,Hw(i)}function Ww(i,e,t,o){su(i,(AI<<1)+(o?1:0),3),DI(i,e,t,!0)}function zI(i){su(i,Mw<<1,3),$c(i,ty,Ih),LI(i)}function NI(i,e,t,o){var l,u,m=0;i.level>0?(i.strm.data_type===xI&&(i.strm.data_type=RI(i)),ig(i,i.l_desc),ig(i,i.d_desc),m=OI(i),l=i.opt_len+3+7>>>3,u=i.static_len+3+7>>>3,u<=l&&(l=u)):l=u=t+5,t+4<=l&&e!==-1?Ww(i,e,t,o):i.strategy===wI||u===l?(su(i,(Mw<<1)+(o?1:0),3),Rv(i,Ih,zd)):(su(i,(kI<<1)+(o?1:0),3),FI(i,i.l_desc.max_code+1,i.d_desc.max_code+1,m+1),Rv(i,i.dyn_ltree,i.dyn_dtree)),Hw(i),o&&Gw(i)}function jI(i,e,t){return i.pending_buf[i.d_buf+i.last_lit*2]=e>>>8&255,i.pending_buf[i.d_buf+i.last_lit*2+1]=e&255,i.pending_buf[i.l_buf+i.last_lit]=t&255,i.last_lit++,e===0?i.dyn_ltree[t*2]++:(i.matches++,e--,i.dyn_ltree[($d[t]+ap+1)*2]++,i.dyn_dtree[Uw(e)*2]++),i.last_lit===i.lit_bufsize-1}sd._tr_init=BI;sd._tr_stored_block=Ww;sd._tr_flush_block=NI;sd._tr_tally=jI;sd._tr_align=zI;function UI(i,e,t,o){for(var l=i&65535|0,u=i>>>16&65535|0,m=0;t!==0;){m=t>2e3?2e3:t,t-=m;do l=l+e[o++]|0,u=u+l|0;while(--m);l%=65521,u%=65521}return l|u<<16|0}var Xw=UI;function VI(){for(var i,e=[],t=0;t<256;t++){i=t;for(var o=0;o<8;o++)i=i&1?3988292384^i>>>1:i>>>1;e[t]=i}return e}var qI=VI();function HI(i,e,t,o){var l=qI,u=o+t;i^=-1;for(var m=o;m<u;m++)i=i>>>8^l[(i^e[m])&255];return i^-1}var Yw=HI,ny={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},Nl=Bh,nc=sd,Zw=Xw,of=Yw,GI=ny,r0=0,WI=1,XI=3,df=4,jv=5,eh=0,Uv=1,rc=-2,YI=-3,m2=-5,ZI=-1,KI=1,Hp=2,JI=3,QI=4,$I=0,eT=2,Z1=8,tT=9,iT=15,nT=8,rT=29,oT=256,ng=oT+1+rT,sT=30,aT=19,lT=2*ng+1,uT=15,Po=3,cf=258,Ic=cf+Po+1,cT=32,K1=42,rg=69,h1=73,f1=91,d1=103,Xf=113,Dd=666,Aa=1,lp=2,Jf=3,ld=4,hT=3;function hf(i,e){return i.msg=GI[e],e}function Vv(i){return(i<<1)-(i>4?9:0)}function lf(i){for(var e=i.length;--e>=0;)i[e]=0}function sf(i){var e=i.state,t=e.pending;t>i.avail_out&&(t=i.avail_out),t!==0&&(Nl.arraySet(i.output,e.pending_buf,e.pending_out,t,i.next_out),i.next_out+=t,e.pending_out+=t,i.total_out+=t,i.avail_out-=t,e.pending-=t,e.pending===0&&(e.pending_out=0))}function Qa(i,e){nc._tr_flush_block(i,i.block_start>=0?i.block_start:-1,i.strstart-i.block_start,e),i.block_start=i.strstart,sf(i.strm)}function Uo(i,e){i.pending_buf[i.pending++]=e}function Ed(i,e){i.pending_buf[i.pending++]=e>>>8&255,i.pending_buf[i.pending++]=e&255}function fT(i,e,t,o){var l=i.avail_in;return l>o&&(l=o),l===0?0:(i.avail_in-=l,Nl.arraySet(e,i.input,i.next_in,l,t),i.state.wrap===1?i.adler=Zw(i.adler,e,l,t):i.state.wrap===2&&(i.adler=of(i.adler,e,l,t)),i.next_in+=l,i.total_in+=l,l)}function Kw(i,e){var t=i.max_chain_length,o=i.strstart,l,u,m=i.prev_length,r=i.nice_match,h=i.strstart>i.w_size-Ic?i.strstart-(i.w_size-Ic):0,y=i.window,b=i.w_mask,v=i.prev,w=i.strstart+cf,x=y[o+m-1],C=y[o+m];i.prev_length>=i.good_match&&(t>>=2),r>i.lookahead&&(r=i.lookahead);do if(l=e,!(y[l+m]!==C||y[l+m-1]!==x||y[l]!==y[o]||y[++l]!==y[o+1])){o+=2,l++;do;while(y[++o]===y[++l]&&y[++o]===y[++l]&&y[++o]===y[++l]&&y[++o]===y[++l]&&y[++o]===y[++l]&&y[++o]===y[++l]&&y[++o]===y[++l]&&y[++o]===y[++l]&&o<w);if(u=cf-(w-o),o=w-cf,u>m){if(i.match_start=e,m=u,u>=r)break;x=y[o+m-1],C=y[o+m]}}while((e=v[e&b])>h&&--t!==0);return m<=i.lookahead?m:i.lookahead}function Qf(i){var e=i.w_size,t,o,l,u,m;do{if(u=i.window_size-i.lookahead-i.strstart,i.strstart>=e+(e-Ic)){Nl.arraySet(i.window,i.window,e,e,0),i.match_start-=e,i.strstart-=e,i.block_start-=e,o=i.hash_size,t=o;do l=i.head[--t],i.head[t]=l>=e?l-e:0;while(--o);o=e,t=o;do l=i.prev[--t],i.prev[t]=l>=e?l-e:0;while(--o);u+=e}if(i.strm.avail_in===0)break;if(o=fT(i.strm,i.window,i.strstart+i.lookahead,u),i.lookahead+=o,i.lookahead+i.insert>=Po)for(m=i.strstart-i.insert,i.ins_h=i.window[m],i.ins_h=(i.ins_h<<i.hash_shift^i.window[m+1])&i.hash_mask;i.insert&&(i.ins_h=(i.ins_h<<i.hash_shift^i.window[m+Po-1])&i.hash_mask,i.prev[m&i.w_mask]=i.head[i.ins_h],i.head[i.ins_h]=m,m++,i.insert--,!(i.lookahead+i.insert<Po)););}while(i.lookahead<Ic&&i.strm.avail_in!==0)}function dT(i,e){var t=65535;for(t>i.pending_buf_size-5&&(t=i.pending_buf_size-5);;){if(i.lookahead<=1){if(Qf(i),i.lookahead===0&&e===r0)return Aa;if(i.lookahead===0)break}i.strstart+=i.lookahead,i.lookahead=0;var o=i.block_start+t;if((i.strstart===0||i.strstart>=o)&&(i.lookahead=i.strstart-o,i.strstart=o,Qa(i,!1),i.strm.avail_out===0)||i.strstart-i.block_start>=i.w_size-Ic&&(Qa(i,!1),i.strm.avail_out===0))return Aa}return i.insert=0,e===df?(Qa(i,!0),i.strm.avail_out===0?Jf:ld):(i.strstart>i.block_start&&(Qa(i,!1),i.strm.avail_out===0),Aa)}function g2(i,e){for(var t,o;;){if(i.lookahead<Ic){if(Qf(i),i.lookahead<Ic&&e===r0)return Aa;if(i.lookahead===0)break}if(t=0,i.lookahead>=Po&&(i.ins_h=(i.ins_h<<i.hash_shift^i.window[i.strstart+Po-1])&i.hash_mask,t=i.prev[i.strstart&i.w_mask]=i.head[i.ins_h],i.head[i.ins_h]=i.strstart),t!==0&&i.strstart-t<=i.w_size-Ic&&(i.match_length=Kw(i,t)),i.match_length>=Po)if(o=nc._tr_tally(i,i.strstart-i.match_start,i.match_length-Po),i.lookahead-=i.match_length,i.match_length<=i.max_lazy_match&&i.lookahead>=Po){i.match_length--;do i.strstart++,i.ins_h=(i.ins_h<<i.hash_shift^i.window[i.strstart+Po-1])&i.hash_mask,t=i.prev[i.strstart&i.w_mask]=i.head[i.ins_h],i.head[i.ins_h]=i.strstart;while(--i.match_length!==0);i.strstart++}else i.strstart+=i.match_length,i.match_length=0,i.ins_h=i.window[i.strstart],i.ins_h=(i.ins_h<<i.hash_shift^i.window[i.strstart+1])&i.hash_mask;else o=nc._tr_tally(i,0,i.window[i.strstart]),i.lookahead--,i.strstart++;if(o&&(Qa(i,!1),i.strm.avail_out===0))return Aa}return i.insert=i.strstart<Po-1?i.strstart:Po-1,e===df?(Qa(i,!0),i.strm.avail_out===0?Jf:ld):i.last_lit&&(Qa(i,!1),i.strm.avail_out===0)?Aa:lp}function S0(i,e){for(var t,o,l;;){if(i.lookahead<Ic){if(Qf(i),i.lookahead<Ic&&e===r0)return Aa;if(i.lookahead===0)break}if(t=0,i.lookahead>=Po&&(i.ins_h=(i.ins_h<<i.hash_shift^i.window[i.strstart+Po-1])&i.hash_mask,t=i.prev[i.strstart&i.w_mask]=i.head[i.ins_h],i.head[i.ins_h]=i.strstart),i.prev_length=i.match_length,i.prev_match=i.match_start,i.match_length=Po-1,t!==0&&i.prev_length<i.max_lazy_match&&i.strstart-t<=i.w_size-Ic&&(i.match_length=Kw(i,t),i.match_length<=5&&(i.strategy===KI||i.match_length===Po&&i.strstart-i.match_start>4096)&&(i.match_length=Po-1)),i.prev_length>=Po&&i.match_length<=i.prev_length){l=i.strstart+i.lookahead-Po,o=nc._tr_tally(i,i.strstart-1-i.prev_match,i.prev_length-Po),i.lookahead-=i.prev_length-1,i.prev_length-=2;do++i.strstart<=l&&(i.ins_h=(i.ins_h<<i.hash_shift^i.window[i.strstart+Po-1])&i.hash_mask,t=i.prev[i.strstart&i.w_mask]=i.head[i.ins_h],i.head[i.ins_h]=i.strstart);while(--i.prev_length!==0);if(i.match_available=0,i.match_length=Po-1,i.strstart++,o&&(Qa(i,!1),i.strm.avail_out===0))return Aa}else if(i.match_available){if(o=nc._tr_tally(i,0,i.window[i.strstart-1]),o&&Qa(i,!1),i.strstart++,i.lookahead--,i.strm.avail_out===0)return Aa}else i.match_available=1,i.strstart++,i.lookahead--}return i.match_available&&(o=nc._tr_tally(i,0,i.window[i.strstart-1]),i.match_available=0),i.insert=i.strstart<Po-1?i.strstart:Po-1,e===df?(Qa(i,!0),i.strm.avail_out===0?Jf:ld):i.last_lit&&(Qa(i,!1),i.strm.avail_out===0)?Aa:lp}function pT(i,e){for(var t,o,l,u,m=i.window;;){if(i.lookahead<=cf){if(Qf(i),i.lookahead<=cf&&e===r0)return Aa;if(i.lookahead===0)break}if(i.match_length=0,i.lookahead>=Po&&i.strstart>0&&(l=i.strstart-1,o=m[l],o===m[++l]&&o===m[++l]&&o===m[++l])){u=i.strstart+cf;do;while(o===m[++l]&&o===m[++l]&&o===m[++l]&&o===m[++l]&&o===m[++l]&&o===m[++l]&&o===m[++l]&&o===m[++l]&&l<u);i.match_length=cf-(u-l),i.match_length>i.lookahead&&(i.match_length=i.lookahead)}if(i.match_length>=Po?(t=nc._tr_tally(i,1,i.match_length-Po),i.lookahead-=i.match_length,i.strstart+=i.match_length,i.match_length=0):(t=nc._tr_tally(i,0,i.window[i.strstart]),i.lookahead--,i.strstart++),t&&(Qa(i,!1),i.strm.avail_out===0))return Aa}return i.insert=0,e===df?(Qa(i,!0),i.strm.avail_out===0?Jf:ld):i.last_lit&&(Qa(i,!1),i.strm.avail_out===0)?Aa:lp}function mT(i,e){for(var t;;){if(i.lookahead===0&&(Qf(i),i.lookahead===0)){if(e===r0)return Aa;break}if(i.match_length=0,t=nc._tr_tally(i,0,i.window[i.strstart]),i.lookahead--,i.strstart++,t&&(Qa(i,!1),i.strm.avail_out===0))return Aa}return i.insert=0,e===df?(Qa(i,!0),i.strm.avail_out===0?Jf:ld):i.last_lit&&(Qa(i,!1),i.strm.avail_out===0)?Aa:lp}function Xc(i,e,t,o,l){this.good_length=i,this.max_lazy=e,this.nice_length=t,this.max_chain=o,this.func=l}var j0;j0=[new Xc(0,0,0,0,dT),new Xc(4,4,8,4,g2),new Xc(4,5,16,8,g2),new Xc(4,6,32,32,g2),new Xc(4,4,16,16,S0),new Xc(8,16,32,32,S0),new Xc(8,16,128,128,S0),new Xc(8,32,128,256,S0),new Xc(32,128,258,1024,S0),new Xc(32,258,258,4096,S0)];function gT(i){i.window_size=2*i.w_size,lf(i.head),i.max_lazy_match=j0[i.level].max_lazy,i.good_match=j0[i.level].good_length,i.nice_match=j0[i.level].nice_length,i.max_chain_length=j0[i.level].max_chain,i.strstart=0,i.block_start=0,i.lookahead=0,i.insert=0,i.match_length=i.prev_length=Po-1,i.match_available=0,i.ins_h=0}function yT(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=Z1,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Nl.Buf16(lT*2),this.dyn_dtree=new Nl.Buf16((2*sT+1)*2),this.bl_tree=new Nl.Buf16((2*aT+1)*2),lf(this.dyn_ltree),lf(this.dyn_dtree),lf(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Nl.Buf16(uT+1),this.heap=new Nl.Buf16(2*ng+1),lf(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Nl.Buf16(2*ng+1),lf(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function Jw(i){var e;return!i||!i.state?hf(i,rc):(i.total_in=i.total_out=0,i.data_type=eT,e=i.state,e.pending=0,e.pending_out=0,e.wrap<0&&(e.wrap=-e.wrap),e.status=e.wrap?K1:Xf,i.adler=e.wrap===2?0:1,e.last_flush=r0,nc._tr_init(e),eh)}function Qw(i){var e=Jw(i);return e===eh&&gT(i.state),e}function _T(i,e){return!i||!i.state||i.state.wrap!==2?rc:(i.state.gzhead=e,eh)}function $w(i,e,t,o,l,u){if(!i)return rc;var m=1;if(e===ZI&&(e=6),o<0?(m=0,o=-o):o>15&&(m=2,o-=16),l<1||l>tT||t!==Z1||o<8||o>15||e<0||e>9||u<0||u>QI)return hf(i,rc);o===8&&(o=9);var r=new yT;return i.state=r,r.strm=i,r.wrap=m,r.gzhead=null,r.w_bits=o,r.w_size=1<<r.w_bits,r.w_mask=r.w_size-1,r.hash_bits=l+7,r.hash_size=1<<r.hash_bits,r.hash_mask=r.hash_size-1,r.hash_shift=~~((r.hash_bits+Po-1)/Po),r.window=new Nl.Buf8(r.w_size*2),r.head=new Nl.Buf16(r.hash_size),r.prev=new Nl.Buf16(r.w_size),r.lit_bufsize=1<<l+6,r.pending_buf_size=r.lit_bufsize*4,r.pending_buf=new Nl.Buf8(r.pending_buf_size),r.d_buf=1*r.lit_bufsize,r.l_buf=(1+2)*r.lit_bufsize,r.level=e,r.strategy=u,r.method=t,Qw(i)}function vT(i,e){return $w(i,e,Z1,iT,nT,$I)}function bT(i,e){var t,o,l,u;if(!i||!i.state||e>jv||e<0)return i?hf(i,rc):rc;if(o=i.state,!i.output||!i.input&&i.avail_in!==0||o.status===Dd&&e!==df)return hf(i,i.avail_out===0?m2:rc);if(o.strm=i,t=o.last_flush,o.last_flush=e,o.status===K1)if(o.wrap===2)i.adler=0,Uo(o,31),Uo(o,139),Uo(o,8),o.gzhead?(Uo(o,(o.gzhead.text?1:0)+(o.gzhead.hcrc?2:0)+(o.gzhead.extra?4:0)+(o.gzhead.name?8:0)+(o.gzhead.comment?16:0)),Uo(o,o.gzhead.time&255),Uo(o,o.gzhead.time>>8&255),Uo(o,o.gzhead.time>>16&255),Uo(o,o.gzhead.time>>24&255),Uo(o,o.level===9?2:o.strategy>=Hp||o.level<2?4:0),Uo(o,o.gzhead.os&255),o.gzhead.extra&&o.gzhead.extra.length&&(Uo(o,o.gzhead.extra.length&255),Uo(o,o.gzhead.extra.length>>8&255)),o.gzhead.hcrc&&(i.adler=of(i.adler,o.pending_buf,o.pending,0)),o.gzindex=0,o.status=rg):(Uo(o,0),Uo(o,0),Uo(o,0),Uo(o,0),Uo(o,0),Uo(o,o.level===9?2:o.strategy>=Hp||o.level<2?4:0),Uo(o,hT),o.status=Xf);else{var m=Z1+(o.w_bits-8<<4)<<8,r=-1;o.strategy>=Hp||o.level<2?r=0:o.level<6?r=1:o.level===6?r=2:r=3,m|=r<<6,o.strstart!==0&&(m|=cT),m+=31-m%31,o.status=Xf,Ed(o,m),o.strstart!==0&&(Ed(o,i.adler>>>16),Ed(o,i.adler&65535)),i.adler=1}if(o.status===rg)if(o.gzhead.extra){for(l=o.pending;o.gzindex<(o.gzhead.extra.length&65535)&&!(o.pending===o.pending_buf_size&&(o.gzhead.hcrc&&o.pending>l&&(i.adler=of(i.adler,o.pending_buf,o.pending-l,l)),sf(i),l=o.pending,o.pending===o.pending_buf_size));)Uo(o,o.gzhead.extra[o.gzindex]&255),o.gzindex++;o.gzhead.hcrc&&o.pending>l&&(i.adler=of(i.adler,o.pending_buf,o.pending-l,l)),o.gzindex===o.gzhead.extra.length&&(o.gzindex=0,o.status=h1)}else o.status=h1;if(o.status===h1)if(o.gzhead.name){l=o.pending;do{if(o.pending===o.pending_buf_size&&(o.gzhead.hcrc&&o.pending>l&&(i.adler=of(i.adler,o.pending_buf,o.pending-l,l)),sf(i),l=o.pending,o.pending===o.pending_buf_size)){u=1;break}o.gzindex<o.gzhead.name.length?u=o.gzhead.name.charCodeAt(o.gzindex++)&255:u=0,Uo(o,u)}while(u!==0);o.gzhead.hcrc&&o.pending>l&&(i.adler=of(i.adler,o.pending_buf,o.pending-l,l)),u===0&&(o.gzindex=0,o.status=f1)}else o.status=f1;if(o.status===f1)if(o.gzhead.comment){l=o.pending;do{if(o.pending===o.pending_buf_size&&(o.gzhead.hcrc&&o.pending>l&&(i.adler=of(i.adler,o.pending_buf,o.pending-l,l)),sf(i),l=o.pending,o.pending===o.pending_buf_size)){u=1;break}o.gzindex<o.gzhead.comment.length?u=o.gzhead.comment.charCodeAt(o.gzindex++)&255:u=0,Uo(o,u)}while(u!==0);o.gzhead.hcrc&&o.pending>l&&(i.adler=of(i.adler,o.pending_buf,o.pending-l,l)),u===0&&(o.status=d1)}else o.status=d1;if(o.status===d1&&(o.gzhead.hcrc?(o.pending+2>o.pending_buf_size&&sf(i),o.pending+2<=o.pending_buf_size&&(Uo(o,i.adler&255),Uo(o,i.adler>>8&255),i.adler=0,o.status=Xf)):o.status=Xf),o.pending!==0){if(sf(i),i.avail_out===0)return o.last_flush=-1,eh}else if(i.avail_in===0&&Vv(e)<=Vv(t)&&e!==df)return hf(i,m2);if(o.status===Dd&&i.avail_in!==0)return hf(i,m2);if(i.avail_in!==0||o.lookahead!==0||e!==r0&&o.status!==Dd){var h=o.strategy===Hp?mT(o,e):o.strategy===JI?pT(o,e):j0[o.level].func(o,e);if((h===Jf||h===ld)&&(o.status=Dd),h===Aa||h===Jf)return i.avail_out===0&&(o.last_flush=-1),eh;if(h===lp&&(e===WI?nc._tr_align(o):e!==jv&&(nc._tr_stored_block(o,0,0,!1),e===XI&&(lf(o.head),o.lookahead===0&&(o.strstart=0,o.block_start=0,o.insert=0))),sf(i),i.avail_out===0))return o.last_flush=-1,eh}return e!==df?eh:o.wrap<=0?Uv:(o.wrap===2?(Uo(o,i.adler&255),Uo(o,i.adler>>8&255),Uo(o,i.adler>>16&255),Uo(o,i.adler>>24&255),Uo(o,i.total_in&255),Uo(o,i.total_in>>8&255),Uo(o,i.total_in>>16&255),Uo(o,i.total_in>>24&255)):(Ed(o,i.adler>>>16),Ed(o,i.adler&65535)),sf(i),o.wrap>0&&(o.wrap=-o.wrap),o.pending!==0?eh:Uv)}function wT(i){var e;return!i||!i.state?rc:(e=i.state.status,e!==K1&&e!==rg&&e!==h1&&e!==f1&&e!==d1&&e!==Xf&&e!==Dd?hf(i,rc):(i.state=null,e===Xf?hf(i,YI):eh))}function xT(i,e){var t=e.length,o,l,u,m,r,h,y,b;if(!i||!i.state||(o=i.state,m=o.wrap,m===2||m===1&&o.status!==K1||o.lookahead))return rc;for(m===1&&(i.adler=Zw(i.adler,e,t,0)),o.wrap=0,t>=o.w_size&&(m===0&&(lf(o.head),o.strstart=0,o.block_start=0,o.insert=0),b=new Nl.Buf8(o.w_size),Nl.arraySet(b,e,t-o.w_size,o.w_size,0),e=b,t=o.w_size),r=i.avail_in,h=i.next_in,y=i.input,i.avail_in=t,i.next_in=0,i.input=e,Qf(o);o.lookahead>=Po;){l=o.strstart,u=o.lookahead-(Po-1);do o.ins_h=(o.ins_h<<o.hash_shift^o.window[l+Po-1])&o.hash_mask,o.prev[l&o.w_mask]=o.head[o.ins_h],o.head[o.ins_h]=l,l++;while(--u);o.strstart=l,o.lookahead=Po-1,Qf(o)}return o.strstart+=o.lookahead,o.block_start=o.strstart,o.insert=o.lookahead,o.lookahead=0,o.match_length=o.prev_length=Po-1,o.match_available=0,i.next_in=h,i.input=y,i.avail_in=r,o.wrap=m,eh}lh.deflateInit=vT;lh.deflateInit2=$w;lh.deflateReset=Qw;lh.deflateResetKeep=Jw;lh.deflateSetHeader=_T;lh.deflate=bT;lh.deflateEnd=wT;lh.deflateSetDictionary=xT;lh.deflateInfo="pako deflate (from Nodeca project)";var o0={},J1=Bh,e3=!0,t3=!0;try{String.fromCharCode.apply(null,[0])}catch{e3=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{t3=!1}var tp=new J1.Buf8(256);for(var tf=0;tf<256;tf++)tp[tf]=tf>=252?6:tf>=248?5:tf>=240?4:tf>=224?3:tf>=192?2:1;tp[254]=tp[254]=1;o0.string2buf=function(i){var e,t,o,l,u,m=i.length,r=0;for(l=0;l<m;l++)t=i.charCodeAt(l),(t&64512)===55296&&l+1<m&&(o=i.charCodeAt(l+1),(o&64512)===56320&&(t=65536+(t-55296<<10)+(o-56320),l++)),r+=t<128?1:t<2048?2:t<65536?3:4;for(e=new J1.Buf8(r),u=0,l=0;u<r;l++)t=i.charCodeAt(l),(t&64512)===55296&&l+1<m&&(o=i.charCodeAt(l+1),(o&64512)===56320&&(t=65536+(t-55296<<10)+(o-56320),l++)),t<128?e[u++]=t:t<2048?(e[u++]=192|t>>>6,e[u++]=128|t&63):t<65536?(e[u++]=224|t>>>12,e[u++]=128|t>>>6&63,e[u++]=128|t&63):(e[u++]=240|t>>>18,e[u++]=128|t>>>12&63,e[u++]=128|t>>>6&63,e[u++]=128|t&63);return e};function i3(i,e){if(e<65534&&(i.subarray&&t3||!i.subarray&&e3))return String.fromCharCode.apply(null,J1.shrinkBuf(i,e));for(var t="",o=0;o<e;o++)t+=String.fromCharCode(i[o]);return t}o0.buf2binstring=function(i){return i3(i,i.length)};o0.binstring2buf=function(i){for(var e=new J1.Buf8(i.length),t=0,o=e.length;t<o;t++)e[t]=i.charCodeAt(t);return e};o0.buf2string=function(i,e){var t,o,l,u,m=e||i.length,r=new Array(m*2);for(o=0,t=0;t<m;){if(l=i[t++],l<128){r[o++]=l;continue}if(u=tp[l],u>4){r[o++]=65533,t+=u-1;continue}for(l&=u===2?31:u===3?15:7;u>1&&t<m;)l=l<<6|i[t++]&63,u--;if(u>1){r[o++]=65533;continue}l<65536?r[o++]=l:(l-=65536,r[o++]=55296|l>>10&1023,r[o++]=56320|l&1023)}return i3(r,o)};o0.utf8border=function(i,e){var t;for(e=e||i.length,e>i.length&&(e=i.length),t=e-1;t>=0&&(i[t]&192)===128;)t--;return t<0||t===0?e:t+tp[i[t]]>e?t:e};function AT(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var n3=AT,Nd=lh,jd=Bh,og=o0,sg=ny,kT=n3,r3=Object.prototype.toString,ST=0,y2=4,Q0=0,qv=1,Hv=2,CT=-1,ET=0,IT=8;function $f(i){if(!(this instanceof $f))return new $f(i);this.options=jd.assign({level:CT,method:IT,chunkSize:16384,windowBits:15,memLevel:8,strategy:ET,to:""},i||{});var e=this.options;e.raw&&e.windowBits>0?e.windowBits=-e.windowBits:e.gzip&&e.windowBits>0&&e.windowBits<16&&(e.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new kT,this.strm.avail_out=0;var t=Nd.deflateInit2(this.strm,e.level,e.method,e.windowBits,e.memLevel,e.strategy);if(t!==Q0)throw new Error(sg[t]);if(e.header&&Nd.deflateSetHeader(this.strm,e.header),e.dictionary){var o;if(typeof e.dictionary=="string"?o=og.string2buf(e.dictionary):r3.call(e.dictionary)==="[object ArrayBuffer]"?o=new Uint8Array(e.dictionary):o=e.dictionary,t=Nd.deflateSetDictionary(this.strm,o),t!==Q0)throw new Error(sg[t]);this._dict_set=!0}}$f.prototype.push=function(i,e){var t=this.strm,o=this.options.chunkSize,l,u;if(this.ended)return!1;u=e===~~e?e:e===!0?y2:ST,typeof i=="string"?t.input=og.string2buf(i):r3.call(i)==="[object ArrayBuffer]"?t.input=new Uint8Array(i):t.input=i,t.next_in=0,t.avail_in=t.input.length;do{if(t.avail_out===0&&(t.output=new jd.Buf8(o),t.next_out=0,t.avail_out=o),l=Nd.deflate(t,u),l!==qv&&l!==Q0)return this.onEnd(l),this.ended=!0,!1;(t.avail_out===0||t.avail_in===0&&(u===y2||u===Hv))&&(this.options.to==="string"?this.onData(og.buf2binstring(jd.shrinkBuf(t.output,t.next_out))):this.onData(jd.shrinkBuf(t.output,t.next_out)))}while((t.avail_in>0||t.avail_out===0)&&l!==qv);return u===y2?(l=Nd.deflateEnd(this.strm),this.onEnd(l),this.ended=!0,l===Q0):(u===Hv&&(this.onEnd(Q0),t.avail_out=0),!0)};$f.prototype.onData=function(i){this.chunks.push(i)};$f.prototype.onEnd=function(i){i===Q0&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=jd.flattenChunks(this.chunks)),this.chunks=[],this.err=i,this.msg=this.strm.msg};function ry(i,e){var t=new $f(e);if(t.push(i,!0),t.err)throw t.msg||sg[t.err];return t.result}function TT(i,e){return e=e||{},e.raw=!0,ry(i,e)}function LT(i,e){return e=e||{},e.gzip=!0,ry(i,e)}sp.Deflate=$f;sp.deflate=ry;sp.deflateRaw=TT;sp.gzip=LT;var up={},Dc={},Gp=30,PT=12,MT=function(e,t){var o,l,u,m,r,h,y,b,v,w,x,C,T,S,M,O,V,X,Z,ee,J,ie,ke,Le,fe;o=e.state,l=e.next_in,Le=e.input,u=l+(e.avail_in-5),m=e.next_out,fe=e.output,r=m-(t-e.avail_out),h=m+(e.avail_out-257),y=o.dmax,b=o.wsize,v=o.whave,w=o.wnext,x=o.window,C=o.hold,T=o.bits,S=o.lencode,M=o.distcode,O=(1<<o.lenbits)-1,V=(1<<o.distbits)-1;e:do{T<15&&(C+=Le[l++]<<T,T+=8,C+=Le[l++]<<T,T+=8),X=S[C&O];t:for(;;){if(Z=X>>>24,C>>>=Z,T-=Z,Z=X>>>16&255,Z===0)fe[m++]=X&65535;else if(Z&16){ee=X&65535,Z&=15,Z&&(T<Z&&(C+=Le[l++]<<T,T+=8),ee+=C&(1<<Z)-1,C>>>=Z,T-=Z),T<15&&(C+=Le[l++]<<T,T+=8,C+=Le[l++]<<T,T+=8),X=M[C&V];i:for(;;){if(Z=X>>>24,C>>>=Z,T-=Z,Z=X>>>16&255,Z&16){if(J=X&65535,Z&=15,T<Z&&(C+=Le[l++]<<T,T+=8,T<Z&&(C+=Le[l++]<<T,T+=8)),J+=C&(1<<Z)-1,J>y){e.msg="invalid distance too far back",o.mode=Gp;break e}if(C>>>=Z,T-=Z,Z=m-r,J>Z){if(Z=J-Z,Z>v&&o.sane){e.msg="invalid distance too far back",o.mode=Gp;break e}if(ie=0,ke=x,w===0){if(ie+=b-Z,Z<ee){ee-=Z;do fe[m++]=x[ie++];while(--Z);ie=m-J,ke=fe}}else if(w<Z){if(ie+=b+w-Z,Z-=w,Z<ee){ee-=Z;do fe[m++]=x[ie++];while(--Z);if(ie=0,w<ee){Z=w,ee-=Z;do fe[m++]=x[ie++];while(--Z);ie=m-J,ke=fe}}}else if(ie+=w-Z,Z<ee){ee-=Z;do fe[m++]=x[ie++];while(--Z);ie=m-J,ke=fe}for(;ee>2;)fe[m++]=ke[ie++],fe[m++]=ke[ie++],fe[m++]=ke[ie++],ee-=3;ee&&(fe[m++]=ke[ie++],ee>1&&(fe[m++]=ke[ie++]))}else{ie=m-J;do fe[m++]=fe[ie++],fe[m++]=fe[ie++],fe[m++]=fe[ie++],ee-=3;while(ee>2);ee&&(fe[m++]=fe[ie++],ee>1&&(fe[m++]=fe[ie++]))}}else if((Z&64)===0){X=M[(X&65535)+(C&(1<<Z)-1)];continue i}else{e.msg="invalid distance code",o.mode=Gp;break e}break}}else if((Z&64)===0){X=S[(X&65535)+(C&(1<<Z)-1)];continue t}else if(Z&32){o.mode=PT;break e}else{e.msg="invalid literal/length code",o.mode=Gp;break e}break}}while(l<u&&m<h);ee=T>>3,l-=ee,T-=ee<<3,C&=(1<<T)-1,e.next_in=l,e.next_out=m,e.avail_in=l<u?5+(u-l):5-(l-u),e.avail_out=m<h?257+(h-m):257-(m-h),o.hold=C,o.bits=T},Gv=Bh,C0=15,Wv=852,Xv=592,Yv=0,_2=1,Zv=2,DT=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],OT=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],FT=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],RT=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64],BT=function(e,t,o,l,u,m,r,h){var y=h.bits,b=0,v=0,w=0,x=0,C=0,T=0,S=0,M=0,O=0,V=0,X,Z,ee,J,ie,ke=null,Le=0,fe,Te=new Gv.Buf16(C0+1),_e=new Gv.Buf16(C0+1),ve=null,rt=0,nt,Tt,We;for(b=0;b<=C0;b++)Te[b]=0;for(v=0;v<l;v++)Te[t[o+v]]++;for(C=y,x=C0;x>=1&&Te[x]===0;x--);if(C>x&&(C=x),x===0)return u[m++]=1<<24|64<<16|0,u[m++]=1<<24|64<<16|0,h.bits=1,0;for(w=1;w<x&&Te[w]===0;w++);for(C<w&&(C=w),M=1,b=1;b<=C0;b++)if(M<<=1,M-=Te[b],M<0)return-1;if(M>0&&(e===Yv||x!==1))return-1;for(_e[1]=0,b=1;b<C0;b++)_e[b+1]=_e[b]+Te[b];for(v=0;v<l;v++)t[o+v]!==0&&(r[_e[t[o+v]]++]=v);if(e===Yv?(ke=ve=r,fe=19):e===_2?(ke=DT,Le-=257,ve=OT,rt-=257,fe=256):(ke=FT,ve=RT,fe=-1),V=0,v=0,b=w,ie=m,T=C,S=0,ee=-1,O=1<<C,J=O-1,e===_2&&O>Wv||e===Zv&&O>Xv)return 1;for(;;){nt=b-S,r[v]<fe?(Tt=0,We=r[v]):r[v]>fe?(Tt=ve[rt+r[v]],We=ke[Le+r[v]]):(Tt=32+64,We=0),X=1<<b-S,Z=1<<T,w=Z;do Z-=X,u[ie+(V>>S)+Z]=nt<<24|Tt<<16|We|0;while(Z!==0);for(X=1<<b-1;V&X;)X>>=1;if(X!==0?(V&=X-1,V+=X):V=0,v++,--Te[b]===0){if(b===x)break;b=t[o+r[v]]}if(b>C&&(V&J)!==ee){for(S===0&&(S=C),ie+=w,T=b-S,M=1<<T;T+S<x&&(M-=Te[T+S],!(M<=0));)T++,M<<=1;if(O+=1<<T,e===_2&&O>Wv||e===Zv&&O>Xv)return 1;ee=V&J,u[ee]=C<<24|T<<16|ie-m|0}}return V!==0&&(u[ie+V]=b-S<<24|64<<16|0),h.bits=C,0},Ou=Bh,ag=Xw,Yc=Yw,zT=MT,Ud=BT,NT=0,o3=1,s3=2,Kv=4,jT=5,Wp=6,e0=0,UT=1,VT=2,sc=-2,a3=-3,l3=-4,qT=-5,Jv=8,u3=1,Qv=2,$v=3,eb=4,tb=5,ib=6,nb=7,rb=8,ob=9,sb=10,I1=11,Ch=12,v2=13,ab=14,b2=15,lb=16,ub=17,cb=18,hb=19,Xp=20,Yp=21,fb=22,db=23,pb=24,mb=25,gb=26,w2=27,yb=28,_b=29,Ds=30,c3=31,HT=32,GT=852,WT=592,XT=15,YT=XT;function vb(i){return(i>>>24&255)+(i>>>8&65280)+((i&65280)<<8)+((i&255)<<24)}function ZT(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Ou.Buf16(320),this.work=new Ou.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function h3(i){var e;return!i||!i.state?sc:(e=i.state,i.total_in=i.total_out=e.total=0,i.msg="",e.wrap&&(i.adler=e.wrap&1),e.mode=u3,e.last=0,e.havedict=0,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new Ou.Buf32(GT),e.distcode=e.distdyn=new Ou.Buf32(WT),e.sane=1,e.back=-1,e0)}function f3(i){var e;return!i||!i.state?sc:(e=i.state,e.wsize=0,e.whave=0,e.wnext=0,h3(i))}function d3(i,e){var t,o;return!i||!i.state||(o=i.state,e<0?(t=0,e=-e):(t=(e>>4)+1,e<48&&(e&=15)),e&&(e<8||e>15))?sc:(o.window!==null&&o.wbits!==e&&(o.window=null),o.wrap=t,o.wbits=e,f3(i))}function p3(i,e){var t,o;return i?(o=new ZT,i.state=o,o.window=null,t=d3(i,e),t!==e0&&(i.state=null),t):sc}function KT(i){return p3(i,YT)}var bb=!0,x2,A2;function JT(i){if(bb){var e;for(x2=new Ou.Buf32(512),A2=new Ou.Buf32(32),e=0;e<144;)i.lens[e++]=8;for(;e<256;)i.lens[e++]=9;for(;e<280;)i.lens[e++]=7;for(;e<288;)i.lens[e++]=8;for(Ud(o3,i.lens,0,288,x2,0,i.work,{bits:9}),e=0;e<32;)i.lens[e++]=5;Ud(s3,i.lens,0,32,A2,0,i.work,{bits:5}),bb=!1}i.lencode=x2,i.lenbits=9,i.distcode=A2,i.distbits=5}function m3(i,e,t,o){var l,u=i.state;return u.window===null&&(u.wsize=1<<u.wbits,u.wnext=0,u.whave=0,u.window=new Ou.Buf8(u.wsize)),o>=u.wsize?(Ou.arraySet(u.window,e,t-u.wsize,u.wsize,0),u.wnext=0,u.whave=u.wsize):(l=u.wsize-u.wnext,l>o&&(l=o),Ou.arraySet(u.window,e,t-o,l,u.wnext),o-=l,o?(Ou.arraySet(u.window,e,t-o,o,0),u.wnext=o,u.whave=u.wsize):(u.wnext+=l,u.wnext===u.wsize&&(u.wnext=0),u.whave<u.wsize&&(u.whave+=l))),0}function QT(i,e){var t,o,l,u,m,r,h,y,b,v,w,x,C,T,S=0,M,O,V,X,Z,ee,J,ie,ke=new Ou.Buf8(4),Le,fe,Te=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!i||!i.state||!i.output||!i.input&&i.avail_in!==0)return sc;t=i.state,t.mode===Ch&&(t.mode=v2),m=i.next_out,l=i.output,h=i.avail_out,u=i.next_in,o=i.input,r=i.avail_in,y=t.hold,b=t.bits,v=r,w=h,ie=e0;e:for(;;)switch(t.mode){case u3:if(t.wrap===0){t.mode=v2;break}for(;b<16;){if(r===0)break e;r--,y+=o[u++]<<b,b+=8}if(t.wrap&2&&y===35615){t.check=0,ke[0]=y&255,ke[1]=y>>>8&255,t.check=Yc(t.check,ke,2,0),y=0,b=0,t.mode=Qv;break}if(t.flags=0,t.head&&(t.head.done=!1),!(t.wrap&1)||(((y&255)<<8)+(y>>8))%31){i.msg="incorrect header check",t.mode=Ds;break}if((y&15)!==Jv){i.msg="unknown compression method",t.mode=Ds;break}if(y>>>=4,b-=4,J=(y&15)+8,t.wbits===0)t.wbits=J;else if(J>t.wbits){i.msg="invalid window size",t.mode=Ds;break}t.dmax=1<<J,i.adler=t.check=1,t.mode=y&512?sb:Ch,y=0,b=0;break;case Qv:for(;b<16;){if(r===0)break e;r--,y+=o[u++]<<b,b+=8}if(t.flags=y,(t.flags&255)!==Jv){i.msg="unknown compression method",t.mode=Ds;break}if(t.flags&57344){i.msg="unknown header flags set",t.mode=Ds;break}t.head&&(t.head.text=y>>8&1),t.flags&512&&(ke[0]=y&255,ke[1]=y>>>8&255,t.check=Yc(t.check,ke,2,0)),y=0,b=0,t.mode=$v;case $v:for(;b<32;){if(r===0)break e;r--,y+=o[u++]<<b,b+=8}t.head&&(t.head.time=y),t.flags&512&&(ke[0]=y&255,ke[1]=y>>>8&255,ke[2]=y>>>16&255,ke[3]=y>>>24&255,t.check=Yc(t.check,ke,4,0)),y=0,b=0,t.mode=eb;case eb:for(;b<16;){if(r===0)break e;r--,y+=o[u++]<<b,b+=8}t.head&&(t.head.xflags=y&255,t.head.os=y>>8),t.flags&512&&(ke[0]=y&255,ke[1]=y>>>8&255,t.check=Yc(t.check,ke,2,0)),y=0,b=0,t.mode=tb;case tb:if(t.flags&1024){for(;b<16;){if(r===0)break e;r--,y+=o[u++]<<b,b+=8}t.length=y,t.head&&(t.head.extra_len=y),t.flags&512&&(ke[0]=y&255,ke[1]=y>>>8&255,t.check=Yc(t.check,ke,2,0)),y=0,b=0}else t.head&&(t.head.extra=null);t.mode=ib;case ib:if(t.flags&1024&&(x=t.length,x>r&&(x=r),x&&(t.head&&(J=t.head.extra_len-t.length,t.head.extra||(t.head.extra=new Array(t.head.extra_len)),Ou.arraySet(t.head.extra,o,u,x,J)),t.flags&512&&(t.check=Yc(t.check,o,x,u)),r-=x,u+=x,t.length-=x),t.length))break e;t.length=0,t.mode=nb;case nb:if(t.flags&2048){if(r===0)break e;x=0;do J=o[u+x++],t.head&&J&&t.length<65536&&(t.head.name+=String.fromCharCode(J));while(J&&x<r);if(t.flags&512&&(t.check=Yc(t.check,o,x,u)),r-=x,u+=x,J)break e}else t.head&&(t.head.name=null);t.length=0,t.mode=rb;case rb:if(t.flags&4096){if(r===0)break e;x=0;do J=o[u+x++],t.head&&J&&t.length<65536&&(t.head.comment+=String.fromCharCode(J));while(J&&x<r);if(t.flags&512&&(t.check=Yc(t.check,o,x,u)),r-=x,u+=x,J)break e}else t.head&&(t.head.comment=null);t.mode=ob;case ob:if(t.flags&512){for(;b<16;){if(r===0)break e;r--,y+=o[u++]<<b,b+=8}if(y!==(t.check&65535)){i.msg="header crc mismatch",t.mode=Ds;break}y=0,b=0}t.head&&(t.head.hcrc=t.flags>>9&1,t.head.done=!0),i.adler=t.check=0,t.mode=Ch;break;case sb:for(;b<32;){if(r===0)break e;r--,y+=o[u++]<<b,b+=8}i.adler=t.check=vb(y),y=0,b=0,t.mode=I1;case I1:if(t.havedict===0)return i.next_out=m,i.avail_out=h,i.next_in=u,i.avail_in=r,t.hold=y,t.bits=b,VT;i.adler=t.check=1,t.mode=Ch;case Ch:if(e===jT||e===Wp)break e;case v2:if(t.last){y>>>=b&7,b-=b&7,t.mode=w2;break}for(;b<3;){if(r===0)break e;r--,y+=o[u++]<<b,b+=8}switch(t.last=y&1,y>>>=1,b-=1,y&3){case 0:t.mode=ab;break;case 1:if(JT(t),t.mode=Xp,e===Wp){y>>>=2,b-=2;break e}break;case 2:t.mode=ub;break;case 3:i.msg="invalid block type",t.mode=Ds}y>>>=2,b-=2;break;case ab:for(y>>>=b&7,b-=b&7;b<32;){if(r===0)break e;r--,y+=o[u++]<<b,b+=8}if((y&65535)!==(y>>>16^65535)){i.msg="invalid stored block lengths",t.mode=Ds;break}if(t.length=y&65535,y=0,b=0,t.mode=b2,e===Wp)break e;case b2:t.mode=lb;case lb:if(x=t.length,x){if(x>r&&(x=r),x>h&&(x=h),x===0)break e;Ou.arraySet(l,o,u,x,m),r-=x,u+=x,h-=x,m+=x,t.length-=x;break}t.mode=Ch;break;case ub:for(;b<14;){if(r===0)break e;r--,y+=o[u++]<<b,b+=8}if(t.nlen=(y&31)+257,y>>>=5,b-=5,t.ndist=(y&31)+1,y>>>=5,b-=5,t.ncode=(y&15)+4,y>>>=4,b-=4,t.nlen>286||t.ndist>30){i.msg="too many length or distance symbols",t.mode=Ds;break}t.have=0,t.mode=cb;case cb:for(;t.have<t.ncode;){for(;b<3;){if(r===0)break e;r--,y+=o[u++]<<b,b+=8}t.lens[Te[t.have++]]=y&7,y>>>=3,b-=3}for(;t.have<19;)t.lens[Te[t.have++]]=0;if(t.lencode=t.lendyn,t.lenbits=7,Le={bits:t.lenbits},ie=Ud(NT,t.lens,0,19,t.lencode,0,t.work,Le),t.lenbits=Le.bits,ie){i.msg="invalid code lengths set",t.mode=Ds;break}t.have=0,t.mode=hb;case hb:for(;t.have<t.nlen+t.ndist;){for(;S=t.lencode[y&(1<<t.lenbits)-1],M=S>>>24,O=S>>>16&255,V=S&65535,!(M<=b);){if(r===0)break e;r--,y+=o[u++]<<b,b+=8}if(V<16)y>>>=M,b-=M,t.lens[t.have++]=V;else{if(V===16){for(fe=M+2;b<fe;){if(r===0)break e;r--,y+=o[u++]<<b,b+=8}if(y>>>=M,b-=M,t.have===0){i.msg="invalid bit length repeat",t.mode=Ds;break}J=t.lens[t.have-1],x=3+(y&3),y>>>=2,b-=2}else if(V===17){for(fe=M+3;b<fe;){if(r===0)break e;r--,y+=o[u++]<<b,b+=8}y>>>=M,b-=M,J=0,x=3+(y&7),y>>>=3,b-=3}else{for(fe=M+7;b<fe;){if(r===0)break e;r--,y+=o[u++]<<b,b+=8}y>>>=M,b-=M,J=0,x=11+(y&127),y>>>=7,b-=7}if(t.have+x>t.nlen+t.ndist){i.msg="invalid bit length repeat",t.mode=Ds;break}for(;x--;)t.lens[t.have++]=J}}if(t.mode===Ds)break;if(t.lens[256]===0){i.msg="invalid code -- missing end-of-block",t.mode=Ds;break}if(t.lenbits=9,Le={bits:t.lenbits},ie=Ud(o3,t.lens,0,t.nlen,t.lencode,0,t.work,Le),t.lenbits=Le.bits,ie){i.msg="invalid literal/lengths set",t.mode=Ds;break}if(t.distbits=6,t.distcode=t.distdyn,Le={bits:t.distbits},ie=Ud(s3,t.lens,t.nlen,t.ndist,t.distcode,0,t.work,Le),t.distbits=Le.bits,ie){i.msg="invalid distances set",t.mode=Ds;break}if(t.mode=Xp,e===Wp)break e;case Xp:t.mode=Yp;case Yp:if(r>=6&&h>=258){i.next_out=m,i.avail_out=h,i.next_in=u,i.avail_in=r,t.hold=y,t.bits=b,zT(i,w),m=i.next_out,l=i.output,h=i.avail_out,u=i.next_in,o=i.input,r=i.avail_in,y=t.hold,b=t.bits,t.mode===Ch&&(t.back=-1);break}for(t.back=0;S=t.lencode[y&(1<<t.lenbits)-1],M=S>>>24,O=S>>>16&255,V=S&65535,!(M<=b);){if(r===0)break e;r--,y+=o[u++]<<b,b+=8}if(O&&(O&240)===0){for(X=M,Z=O,ee=V;S=t.lencode[ee+((y&(1<<X+Z)-1)>>X)],M=S>>>24,O=S>>>16&255,V=S&65535,!(X+M<=b);){if(r===0)break e;r--,y+=o[u++]<<b,b+=8}y>>>=X,b-=X,t.back+=X}if(y>>>=M,b-=M,t.back+=M,t.length=V,O===0){t.mode=gb;break}if(O&32){t.back=-1,t.mode=Ch;break}if(O&64){i.msg="invalid literal/length code",t.mode=Ds;break}t.extra=O&15,t.mode=fb;case fb:if(t.extra){for(fe=t.extra;b<fe;){if(r===0)break e;r--,y+=o[u++]<<b,b+=8}t.length+=y&(1<<t.extra)-1,y>>>=t.extra,b-=t.extra,t.back+=t.extra}t.was=t.length,t.mode=db;case db:for(;S=t.distcode[y&(1<<t.distbits)-1],M=S>>>24,O=S>>>16&255,V=S&65535,!(M<=b);){if(r===0)break e;r--,y+=o[u++]<<b,b+=8}if((O&240)===0){for(X=M,Z=O,ee=V;S=t.distcode[ee+((y&(1<<X+Z)-1)>>X)],M=S>>>24,O=S>>>16&255,V=S&65535,!(X+M<=b);){if(r===0)break e;r--,y+=o[u++]<<b,b+=8}y>>>=X,b-=X,t.back+=X}if(y>>>=M,b-=M,t.back+=M,O&64){i.msg="invalid distance code",t.mode=Ds;break}t.offset=V,t.extra=O&15,t.mode=pb;case pb:if(t.extra){for(fe=t.extra;b<fe;){if(r===0)break e;r--,y+=o[u++]<<b,b+=8}t.offset+=y&(1<<t.extra)-1,y>>>=t.extra,b-=t.extra,t.back+=t.extra}if(t.offset>t.dmax){i.msg="invalid distance too far back",t.mode=Ds;break}t.mode=mb;case mb:if(h===0)break e;if(x=w-h,t.offset>x){if(x=t.offset-x,x>t.whave&&t.sane){i.msg="invalid distance too far back",t.mode=Ds;break}x>t.wnext?(x-=t.wnext,C=t.wsize-x):C=t.wnext-x,x>t.length&&(x=t.length),T=t.window}else T=l,C=m-t.offset,x=t.length;x>h&&(x=h),h-=x,t.length-=x;do l[m++]=T[C++];while(--x);t.length===0&&(t.mode=Yp);break;case gb:if(h===0)break e;l[m++]=t.length,h--,t.mode=Yp;break;case w2:if(t.wrap){for(;b<32;){if(r===0)break e;r--,y|=o[u++]<<b,b+=8}if(w-=h,i.total_out+=w,t.total+=w,w&&(i.adler=t.check=t.flags?Yc(t.check,l,w,m-w):ag(t.check,l,w,m-w)),w=h,(t.flags?y:vb(y))!==t.check){i.msg="incorrect data check",t.mode=Ds;break}y=0,b=0}t.mode=yb;case yb:if(t.wrap&&t.flags){for(;b<32;){if(r===0)break e;r--,y+=o[u++]<<b,b+=8}if(y!==(t.total&4294967295)){i.msg="incorrect length check",t.mode=Ds;break}y=0,b=0}t.mode=_b;case _b:ie=UT;break e;case Ds:ie=a3;break e;case c3:return l3;case HT:default:return sc}return i.next_out=m,i.avail_out=h,i.next_in=u,i.avail_in=r,t.hold=y,t.bits=b,(t.wsize||w!==i.avail_out&&t.mode<Ds&&(t.mode<w2||e!==Kv))&&m3(i,i.output,i.next_out,w-i.avail_out),v-=i.avail_in,w-=i.avail_out,i.total_in+=v,i.total_out+=w,t.total+=w,t.wrap&&w&&(i.adler=t.check=t.flags?Yc(t.check,l,w,i.next_out-w):ag(t.check,l,w,i.next_out-w)),i.data_type=t.bits+(t.last?64:0)+(t.mode===Ch?128:0)+(t.mode===Xp||t.mode===b2?256:0),(v===0&&w===0||e===Kv)&&ie===e0&&(ie=qT),ie}function $T(i){if(!i||!i.state)return sc;var e=i.state;return e.window&&(e.window=null),i.state=null,e0}function e7(i,e){var t;return!i||!i.state||(t=i.state,(t.wrap&2)===0)?sc:(t.head=e,e.done=!1,e0)}function t7(i,e){var t=e.length,o,l,u;return!i||!i.state||(o=i.state,o.wrap!==0&&o.mode!==I1)?sc:o.mode===I1&&(l=1,l=ag(l,e,t,0),l!==o.check)?a3:(u=m3(i,e,t,t),u?(o.mode=c3,l3):(o.havedict=1,e0))}Dc.inflateReset=f3;Dc.inflateReset2=d3;Dc.inflateResetKeep=h3;Dc.inflateInit=KT;Dc.inflateInit2=p3;Dc.inflate=QT;Dc.inflateEnd=$T;Dc.inflateGetHeader=e7;Dc.inflateSetDictionary=t7;Dc.inflateInfo="pako inflate (from Nodeca project)";var g3={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};function i7(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var n7=i7,$0=Dc,Vd=Bh,p1=o0,ea=g3,lg=ny,r7=n3,o7=n7,y3=Object.prototype.toString;function t0(i){if(!(this instanceof t0))return new t0(i);this.options=Vd.assign({chunkSize:16384,windowBits:0,to:""},i||{});var e=this.options;e.raw&&e.windowBits>=0&&e.windowBits<16&&(e.windowBits=-e.windowBits,e.windowBits===0&&(e.windowBits=-15)),e.windowBits>=0&&e.windowBits<16&&!(i&&i.windowBits)&&(e.windowBits+=32),e.windowBits>15&&e.windowBits<48&&(e.windowBits&15)===0&&(e.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new r7,this.strm.avail_out=0;var t=$0.inflateInit2(this.strm,e.windowBits);if(t!==ea.Z_OK)throw new Error(lg[t]);if(this.header=new o7,$0.inflateGetHeader(this.strm,this.header),e.dictionary&&(typeof e.dictionary=="string"?e.dictionary=p1.string2buf(e.dictionary):y3.call(e.dictionary)==="[object ArrayBuffer]"&&(e.dictionary=new Uint8Array(e.dictionary)),e.raw&&(t=$0.inflateSetDictionary(this.strm,e.dictionary),t!==ea.Z_OK)))throw new Error(lg[t])}t0.prototype.push=function(i,e){var t=this.strm,o=this.options.chunkSize,l=this.options.dictionary,u,m,r,h,y,b=!1;if(this.ended)return!1;m=e===~~e?e:e===!0?ea.Z_FINISH:ea.Z_NO_FLUSH,typeof i=="string"?t.input=p1.binstring2buf(i):y3.call(i)==="[object ArrayBuffer]"?t.input=new Uint8Array(i):t.input=i,t.next_in=0,t.avail_in=t.input.length;do{if(t.avail_out===0&&(t.output=new Vd.Buf8(o),t.next_out=0,t.avail_out=o),u=$0.inflate(t,ea.Z_NO_FLUSH),u===ea.Z_NEED_DICT&&l&&(u=$0.inflateSetDictionary(this.strm,l)),u===ea.Z_BUF_ERROR&&b===!0&&(u=ea.Z_OK,b=!1),u!==ea.Z_STREAM_END&&u!==ea.Z_OK)return this.onEnd(u),this.ended=!0,!1;t.next_out&&(t.avail_out===0||u===ea.Z_STREAM_END||t.avail_in===0&&(m===ea.Z_FINISH||m===ea.Z_SYNC_FLUSH))&&(this.options.to==="string"?(r=p1.utf8border(t.output,t.next_out),h=t.next_out-r,y=p1.buf2string(t.output,r),t.next_out=h,t.avail_out=o-h,h&&Vd.arraySet(t.output,t.output,r,h,0),this.onData(y)):this.onData(Vd.shrinkBuf(t.output,t.next_out))),t.avail_in===0&&t.avail_out===0&&(b=!0)}while((t.avail_in>0||t.avail_out===0)&&u!==ea.Z_STREAM_END);return u===ea.Z_STREAM_END&&(m=ea.Z_FINISH),m===ea.Z_FINISH?(u=$0.inflateEnd(this.strm),this.onEnd(u),this.ended=!0,u===ea.Z_OK):(m===ea.Z_SYNC_FLUSH&&(this.onEnd(ea.Z_OK),t.avail_out=0),!0)};t0.prototype.onData=function(i){this.chunks.push(i)};t0.prototype.onEnd=function(i){i===ea.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=Vd.flattenChunks(this.chunks)),this.chunks=[],this.err=i,this.msg=this.strm.msg};function oy(i,e){var t=new t0(e);if(t.push(i,!0),t.err)throw t.msg||lg[t.err];return t.result}function s7(i,e){return e=e||{},e.raw=!0,oy(i,e)}up.Inflate=t0;up.inflate=oy;up.inflateRaw=s7;up.ungzip=oy;var a7=Bh.assign,l7=sp,u7=up,c7=g3,_3={};a7(_3,l7,u7,c7);var h7=_3,f7=function(){function i(e){var t=this;this.decode=function(){var x=new Uint8Array(t.width*t.height*4),C=t.decodePixels();return t.copyImageDataToBuffer(x,C),x},this.copyImageDataToBuffer=function(x,C){var T=t.colors,S,M=t.hasAlphaChannel;t.palette.length&&(S=t.decodePalette(),T=4,M=!0);var O=x,V=O.length,X=S||C,Z=0,ee=0;if(T===1)for(;Z<V;){var J=S?C[Z/4]*4:ee,ie=X[J++];O[Z++]=ie,O[Z++]=ie,O[Z++]=ie,O[Z++]=M?X[J++]:255,ee=J}else for(;Z<V;){var J=S?C[Z/4]*4:ee;O[Z++]=X[J++],O[Z++]=X[J++],O[Z++]=X[J++],O[Z++]=M?X[J++]:255,ee=J}},this.decodePixels=function(){for(var x=h7.inflate(t.imgData),C=t.pixelBitlength/8,T=C*t.width,S=new Uint8Array(T*t.height),M=x.length,O=0,V=0,X=0;V<M;){switch(x[V++]){case 0:{for(var Z=0;Z<T;Z++)S[X++]=x[V++];break}case 1:{for(var Z=0;Z<T;Z++){var ee=x[V++],J=Z<C?0:S[X-C];S[X++]=(ee+J)%256}break}case 2:{for(var Z=0;Z<T;Z++){var ee=x[V++],ie=(Z-Z%C)/C,ke=(O-1)*T+ie*C+Z%C,Le=O&&S[ke];S[X++]=(Le+ee)%256}break}case 3:{for(var Z=0;Z<T;Z++){var ee=x[V++],ie=(Z-Z%C)/C,J=Z<C?0:S[X-C],ke=(O-1)*T+ie*C+Z%C,Le=O&&S[ke];S[X++]=(ee+Math.floor((J+Le)/2))%256}break}case 4:{for(var Z=0;Z<T;Z++){var ee=x[V++],ie=(Z-Z%C)/C,J=Z<C?0:S[X-C],Le=void 0,fe=void 0;if(O===0)Le=fe=0;else{var Te=(O-1)*T+ie*C+Z%C,_e=(O-1)*T+(ie-1)*C+Z%C;Le=S[Te],fe=ie&&S[_e]}var ve=J+Le-fe,rt=Math.abs(ve-J),nt=Math.abs(ve-Le),Tt=Math.abs(ve-fe),We=void 0;rt<=nt&&rt<=Tt?We=J:nt<=Tt?We=Le:We=fe,S[X++]=(ee+We)%256}break}default:throw new Error("Invalid filter algorithm: "+x[V-1])}O++}return S},this.read=function(x){for(var C=[],T=0;T<x;T++)C[T]=t.data[t.pos++];return C},this.readUInt32=function(){var x=t.data[t.pos++]<<24,C=t.data[t.pos++]<<16,T=t.data[t.pos++]<<8,S=t.data[t.pos++];return x|C|T|S},this.decodePalette=function(){for(var x=t.palette,C=t.transparency.indexed||[],T=new Uint8Array(C.length+x.length),S=0,M=0,O=0;O<x.length;O++){T[S++]=x[O],T[S++]=x[O+1],T[S++]=x[O+2];var V=C[M++];T[S++]=V!==void 0?V:255}return T},this.data=e,this.pos=8,this.palette=[];var o=[];for(this.transparency={},this.text={};;){for(var l=this.readUInt32(),u="",m=0;m<4;m++)u+=String.fromCharCode(this.data[this.pos++]);switch(u){case"IHDR":{this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break}case"PLTE":{this.palette=this.read(l);break}case"IDAT":{for(var m=0;m<l;m++)o.push(this.data[this.pos++]);break}case"tRNS":{switch(this.transparency={},this.colorType){case 3:{this.transparency.indexed=this.read(l);var r=255-this.transparency.indexed.length;if(r>0)for(var m=0;m<255;m++)this.transparency.indexed.push(255);break}case 0:{this.transparency.grayscale=this.read(l)[0];break}case 2:{this.transparency.rgb=this.read(l);break}}break}case"tEXt":{var h=this.read(l),y=h.indexOf(0),b=String.fromCharCode.apply(String,h.slice(0,y));this.text[b]=String.fromCharCode.apply(String,h.slice(y+1));break}case"IEND":{var v={0:1,3:1,4:1,2:3,6:3};this.colors=v[this.colorType],this.hasAlphaChannel=[4,6].includes(this.colorType);var w=this.colors+(this.hasAlphaChannel?1:0);this.pixelBitlength=this.bits*w,this.colorSpace={1:"DeviceGray",3:"DeviceRGB"}[this.colors],this.imgData=new Uint8Array(o);return}default:this.pos+=l}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}return i.load=function(e){return new i(e)},i}();const ug=";base64,",d7=i=>i.indexOf(ug)>-1,p7=i=>{const e=i.indexOf(ug)+ug.length,t=i.substring(e),o=window.atob(t),l=o.length,u=new Uint8Array(new ArrayBuffer(l));for(let m=0;m<l;m++)u[m]=o.charCodeAt(m);return u};async function m7(){const i=["data:image/webp;base64,UklGRjIAAABXRUJQVlA4ICYAAACyAgCdASoCAAEALmk0mk0iIiIiIgBoSygABc6zbAAA/v56QAAAAA==","data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA="],e=o=>new Promise((l,u)=>{var m=document.createElement("img");m.onerror=r=>l(!1),m.onload=()=>l(!0),m.src=o});return(await Promise.all(i.map(e))).every(o=>!!o)}class g7 extends Error{}async function v3(i){return new Promise((e,t)=>{const o=new XMLHttpRequest;o.open("GET",i),o.responseType="arraybuffer";const l=()=>{t(new g7(`failed to load binary data, code "${o.status}" from "${i}"`))};o.onerror=l,o.onreadystatechange=()=>{o.readyState==4&&(o.status==200?e(new Uint8Array(o.response)):l())},o.send()})}function y7(){var i=typeof i<"u"?i:{},e=function(){function U(){}function $(yi,_i){return function(){yi.apply(_i,arguments)}}function ge(yi){if(!(this instanceof ge))throw new TypeError("Promises must be constructed via new");if(typeof yi!="function")throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],bi(yi,this)}function De(yi,_i){for(;yi._state===3;)yi=yi._value;if(yi._state===0){yi._deferreds.push(_i);return}yi._handled=!0,ge._immediateFn(function(){var ui=yi._state===1?_i.onFulfilled:_i.onRejected;if(ui===null){(yi._state===1?ot:Et)(_i.promise,yi._value);return}var ji;try{ji=ui(yi._value)}catch(an){Et(_i.promise,an);return}ot(_i.promise,ji)})}function ot(yi,_i){try{if(_i===yi)throw new TypeError("A promise cannot be resolved with itself.");if(_i&&(typeof _i=="object"||typeof _i=="function")){var ui=_i.then;if(_i instanceof ge){yi._state=3,yi._value=_i,Nt(yi);return}else if(typeof ui=="function"){bi($(ui,_i),yi);return}}yi._state=1,yi._value=_i,Nt(yi)}catch(ji){Et(yi,ji)}}function Et(yi,_i){yi._state=2,yi._value=_i,Nt(yi)}function Nt(yi){yi._state===2&&yi._deferreds.length===0&&ge._immediateFn(function(){yi._handled||ge._unhandledRejectionFn(yi._value)});for(var _i=0,ui=yi._deferreds.length;_i<ui;_i++)De(yi,yi._deferreds[_i]);yi._deferreds=null}function zt(yi,_i,ui){this.onFulfilled=typeof yi=="function"?yi:null,this.onRejected=typeof _i=="function"?_i:null,this.promise=ui}function bi(yi,_i){var ui=!1;try{yi(function(ji){ui||(ui=!0,ot(_i,ji))},function(ji){ui||(ui=!0,Et(_i,ji))})}catch(ji){if(ui)return;ui=!0,Et(_i,ji)}}return ge.prototype.catch=function(yi){return this.then(null,yi)},ge.prototype.then=function(yi,_i){var ui=new this.constructor(U);return De(this,new zt(yi,_i,ui)),ui},ge.all=function(yi){return new ge(function(_i,ui){if(!Array.isArray(yi))return ui(new TypeError("Promise.all accepts an array"));var ji=Array.prototype.slice.call(yi);if(ji.length===0)return _i([]);var an=ji.length;function Tn(p,Di){try{if(Di&&(typeof Di=="object"||typeof Di=="function")){var c=Di.then;if(typeof c=="function"){c.call(Di,function(F){Tn(p,F)},ui);return}}ji[p]=Di,--an===0&&_i(ji)}catch(F){ui(F)}}for(var ft=0;ft<ji.length;ft++)Tn(ft,ji[ft])})},ge.resolve=function(yi){return yi&&typeof yi=="object"&&yi.constructor===ge?yi:new ge(function(_i){_i(yi)})},ge.reject=function(yi){return new ge(function(_i,ui){ui(yi)})},ge.race=function(yi){return new ge(function(_i,ui){if(!Array.isArray(yi))return ui(new TypeError("Promise.race accepts an array"));for(var ji=0,an=yi.length;ji<an;ji++)ge.resolve(yi[ji]).then(_i,ui)})},ge._immediateFn=typeof setImmediate=="function"&&function(yi){setImmediate(yi)}||function(yi){setTimeout(yi,0)},ge._unhandledRejectionFn=function(_i){typeof console<"u"&&console&&console.warn("Possible Unhandled Promise Rejection:",_i)},ge}(),t={},o;for(o in i)i.hasOwnProperty(o)&&(t[o]=i[o]);var l=!0,u="";function m(U){return i.locateFile?i.locateFile(U,u):u+U}var r,h,y;document.currentScript&&(u=document.currentScript.src),u.indexOf("blob:")!==0?u=u.substr(0,u.lastIndexOf("/")+1):u="",r=function($){try{var ge=new XMLHttpRequest;return ge.open("GET",$,!1),ge.send(null),ge.responseText}catch(ot){var De=Vs($);if(De)return Oo(De);throw ot}},h=function($,ge,De){var ot=new XMLHttpRequest;ot.open("GET",$,!0),ot.responseType="arraybuffer",ot.onload=function(){if(ot.status==200||ot.status==0&&ot.response){ge(ot.response);return}var Nt=Vs($);if(Nt){ge(Nt.buffer);return}De()},ot.onerror=De,ot.send(null)};var b=i.print||console.log.bind(console),v=i.printErr||console.warn.bind(console);for(o in t)t.hasOwnProperty(o)&&(i[o]=t[o]);t=null,i.arguments&&i.arguments,i.thisProgram&&i.thisProgram,i.quit&&i.quit;var w=16;function x(U,$){return $||($=w),Math.ceil(U/$)*$}function C(U){C.shown||(C.shown={}),C.shown[U]||(C.shown[U]=1,v(U))}var T=0,S=function(U){T=U},M=function(){return T},O;i.wasmBinary&&(O=i.wasmBinary),i.noExitRuntime&&i.noExitRuntime;var V={Memory:function(U){this.buffer=new ArrayBuffer(U.initial*65536),this.grow=function($){var ge=ha($);return ge}},Table:function(U){var $=new Array(U.initial);return $.set=function(ge,De){$[ge]=De},$.get=function(ge){return $[ge]},$},Module:function(U){},Instance:function(U,$){this.exports=function(De,ot,Et){function Nt(ui,ji,an){var Tn=ji.memory,ft=Et,p=new ui.Int8Array(an),Di=new ui.Int16Array(an),c=new ui.Int32Array(an),F=new ui.Uint8Array(an),pn=new ui.Uint16Array(an),Qn=new ui.Uint32Array(an);new ui.Float32Array(an);var wo=new ui.Float64Array(an),re=ui.Math.imul;ui.Math.fround,ui.Math.abs;var Br=ui.Math.clz32;ui.Math.min,ui.Math.max,ui.Math.floor,ui.Math.ceil,ui.Math.sqrt;var da=ji.abort;ui.NaN,ui.Infinity;var Na=ji.SDL_Init,Oc=ji.SDL_SetVideoMode,Cl=ji.SDL_CreateRGBSurface,Hs=ji.SDL_LockSurface,ac=ji.SDL_UnlockSurface,fu=ji.SDL_UpperBlit,uh=ji.SDL_Flip,du=ji.SDL_FreeSurface,ch=ji.fd_close,Bu=ji.fd_write,pu=ji.emscripten_resize_heap,mu=ji.emscripten_memcpy_big,Gl=ji.setTempRet0,gu=ji.fd_seek,Un=5255072,Bn=0;function zu(n,s){var a=0,g=0,k=0,E=0,L=0,R=0,G=0,H=0,te=0,ce=0,Ae=0,Ne=0,Ze=0,mt=0,Pt=0,Ft=0,ni=0,ci=0,Mi=0,Si=0,Ji=0,sn=0,bn=0,ar=0;g=c[s>>2],ce=c[s+4>>2],a=c[n+2264>>2],p[a+823|0]=129,p[a+807|0]=129,p[a+791|0]=129,p[a+775|0]=129,p[a+759|0]=129,p[a+743|0]=129,p[a+727|0]=129,p[a+711|0]=129,p[a+695|0]=129,p[a+679|0]=129,p[a+663|0]=129,p[a+647|0]=129,p[a+631|0]=129,p[a+615|0]=129,p[a+599|0]=129,p[a+583|0]=129,p[a+519|0]=129,p[a+487|0]=129,p[a+455|0]=129,p[a+423|0]=129,p[a+391|0]=129,p[a+359|0]=129,p[a+327|0]=129,p[a+295|0]=129,p[a+263|0]=129,p[a+231|0]=129,p[a+199|0]=129,p[a+167|0]=129,p[a+135|0]=129,p[a+103|0]=129,p[a+71|0]=129,p[a+39|0]=129;e:{if((ce|0)>=1){p[a+551|0]=129,p[a+567|0]=129,p[a+7|0]=129;break e}p[a+7|0]=2139062143,p[a+8|0]=8355711,p[a+9|0]=32639,p[a+10|0]=127,p[a+11|0]=2139062143,p[a+12|0]=8355711,p[a+13|0]=32639,p[a+14|0]=127,p[a+551|0]=2139062143,p[a+552|0]=8355711,p[a+553|0]=32639,p[a+554|0]=127,p[a+555|0]=2139062143,p[a+556|0]=8355711,p[a+557|0]=32639,p[a+558|0]=127,p[a+567|0]=2139062143,p[a+568|0]=8355711,p[a+569|0]=32639,p[a+570|0]=127,p[a+571|0]=2139062143,p[a+572|0]=8355711,p[a+573|0]=32639,p[a+574|0]=127,p[a+20|0]=2139062143,p[a+21|0]=8355711,p[a+22|0]=32639,p[a+23|0]=127,p[a+24|0]=2139062143,p[a+25|0]=8355711,p[a+26|0]=32639,p[a+27|0]=127,p[a+15|0]=2139062143,p[a+16|0]=8355711,p[a+17|0]=32639,p[a+18|0]=127,p[a+19|0]=2139062143,p[a+20|0]=8355711,p[a+21|0]=32639,p[a+22|0]=127,p[a+559|0]=127,p[a+575|0]=127}if(c[n+288>>2]>=1)for(Ne=a+600|0,Ze=a+584|0,Ae=a+40|0,Pt=ce?5:6,ni=g<<3,ci=g<<4,Mi=a+520|0,Si=a+8|0,mt=a+24|0,Ft=!ce<<2,Ji=(ce|0)<1;;){L=c[s+16>>2],te&&(g=F[a+20|0]|F[a+21|0]<<8|(F[a+22|0]<<16|F[a+23|0]<<24),p[a+4|0]=g,p[a+5|0]=g>>>8,p[a+6|0]=g>>>16,p[a+7|0]=g>>>24,g=F[a+52|0]|F[a+53|0]<<8|(F[a+54|0]<<16|F[a+55|0]<<24),p[a+36|0]=g,p[a+37|0]=g>>>8,p[a+38|0]=g>>>16,p[a+39|0]=g>>>24,g=F[a+84|0]|F[a+85|0]<<8|(F[a+86|0]<<16|F[a+87|0]<<24),p[a+68|0]=g,p[a+69|0]=g>>>8,p[a+70|0]=g>>>16,p[a+71|0]=g>>>24,g=F[a+116|0]|F[a+117|0]<<8|(F[a+118|0]<<16|F[a+119|0]<<24),p[a+100|0]=g,p[a+101|0]=g>>>8,p[a+102|0]=g>>>16,p[a+103|0]=g>>>24,g=F[a+148|0]|F[a+149|0]<<8|(F[a+150|0]<<16|F[a+151|0]<<24),p[a+132|0]=g,p[a+133|0]=g>>>8,p[a+134|0]=g>>>16,p[a+135|0]=g>>>24,g=F[a+180|0]|F[a+181|0]<<8|(F[a+182|0]<<16|F[a+183|0]<<24),p[a+164|0]=g,p[a+165|0]=g>>>8,p[a+166|0]=g>>>16,p[a+167|0]=g>>>24,g=F[a+212|0]|F[a+213|0]<<8|(F[a+214|0]<<16|F[a+215|0]<<24),p[a+196|0]=g,p[a+197|0]=g>>>8,p[a+198|0]=g>>>16,p[a+199|0]=g>>>24,g=F[a+244|0]|F[a+245|0]<<8|(F[a+246|0]<<16|F[a+247|0]<<24),p[a+228|0]=g,p[a+229|0]=g>>>8,p[a+230|0]=g>>>16,p[a+231|0]=g>>>24,g=F[a+276|0]|F[a+277|0]<<8|(F[a+278|0]<<16|F[a+279|0]<<24),p[a+260|0]=g,p[a+261|0]=g>>>8,p[a+262|0]=g>>>16,p[a+263|0]=g>>>24,g=F[a+308|0]|F[a+309|0]<<8|(F[a+310|0]<<16|F[a+311|0]<<24),p[a+292|0]=g,p[a+293|0]=g>>>8,p[a+294|0]=g>>>16,p[a+295|0]=g>>>24,g=F[a+340|0]|F[a+341|0]<<8|(F[a+342|0]<<16|F[a+343|0]<<24),p[a+324|0]=g,p[a+325|0]=g>>>8,p[a+326|0]=g>>>16,p[a+327|0]=g>>>24,g=F[a+372|0]|F[a+373|0]<<8|(F[a+374|0]<<16|F[a+375|0]<<24),p[a+356|0]=g,p[a+357|0]=g>>>8,p[a+358|0]=g>>>16,p[a+359|0]=g>>>24,g=F[a+404|0]|F[a+405|0]<<8|(F[a+406|0]<<16|F[a+407|0]<<24),p[a+388|0]=g,p[a+389|0]=g>>>8,p[a+390|0]=g>>>16,p[a+391|0]=g>>>24,g=F[a+436|0]|F[a+437|0]<<8|(F[a+438|0]<<16|F[a+439|0]<<24),p[a+420|0]=g,p[a+421|0]=g>>>8,p[a+422|0]=g>>>16,p[a+423|0]=g>>>24,g=F[a+468|0]|F[a+469|0]<<8|(F[a+470|0]<<16|F[a+471|0]<<24),p[a+452|0]=g,p[a+453|0]=g>>>8,p[a+454|0]=g>>>16,p[a+455|0]=g>>>24,g=F[a+500|0]|F[a+501|0]<<8|(F[a+502|0]<<16|F[a+503|0]<<24),p[a+484|0]=g,p[a+485|0]=g>>>8,p[a+486|0]=g>>>16,p[a+487|0]=g>>>24,g=F[a+532|0]|F[a+533|0]<<8|(F[a+534|0]<<16|F[a+535|0]<<24),p[a+516|0]=g,p[a+517|0]=g>>>8,p[a+518|0]=g>>>16,p[a+519|0]=g>>>24,g=F[a+556|0]|F[a+557|0]<<8|(F[a+558|0]<<16|F[a+559|0]<<24),p[a+548|0]=g,p[a+549|0]=g>>>8,p[a+550|0]=g>>>16,p[a+551|0]=g>>>24,g=F[a+572|0]|F[a+573|0]<<8|(F[a+574|0]<<16|F[a+575|0]<<24),p[a+564|0]=g,p[a+565|0]=g>>>8,p[a+566|0]=g>>>16,p[a+567|0]=g>>>24,g=F[a+588|0]|F[a+589|0]<<8|(F[a+590|0]<<16|F[a+591|0]<<24),p[a+580|0]=g,p[a+581|0]=g>>>8,p[a+582|0]=g>>>16,p[a+583|0]=g>>>24,g=F[a+604|0]|F[a+605|0]<<8|(F[a+606|0]<<16|F[a+607|0]<<24),p[a+596|0]=g,p[a+597|0]=g>>>8,p[a+598|0]=g>>>16,p[a+599|0]=g>>>24,g=F[a+620|0]|F[a+621|0]<<8|(F[a+622|0]<<16|F[a+623|0]<<24),p[a+612|0]=g,p[a+613|0]=g>>>8,p[a+614|0]=g>>>16,p[a+615|0]=g>>>24,g=F[a+636|0]|F[a+637|0]<<8|(F[a+638|0]<<16|F[a+639|0]<<24),p[a+628|0]=g,p[a+629|0]=g>>>8,p[a+630|0]=g>>>16,p[a+631|0]=g>>>24,g=F[a+652|0]|F[a+653|0]<<8|(F[a+654|0]<<16|F[a+655|0]<<24),p[a+644|0]=g,p[a+645|0]=g>>>8,p[a+646|0]=g>>>16,p[a+647|0]=g>>>24,g=F[a+668|0]|F[a+669|0]<<8|(F[a+670|0]<<16|F[a+671|0]<<24),p[a+660|0]=g,p[a+661|0]=g>>>8,p[a+662|0]=g>>>16,p[a+663|0]=g>>>24,g=F[a+684|0]|F[a+685|0]<<8|(F[a+686|0]<<16|F[a+687|0]<<24),p[a+676|0]=g,p[a+677|0]=g>>>8,p[a+678|0]=g>>>16,p[a+679|0]=g>>>24,g=F[a+700|0]|F[a+701|0]<<8|(F[a+702|0]<<16|F[a+703|0]<<24),p[a+692|0]=g,p[a+693|0]=g>>>8,p[a+694|0]=g>>>16,p[a+695|0]=g>>>24,g=F[a+716|0]|F[a+717|0]<<8|(F[a+718|0]<<16|F[a+719|0]<<24),p[a+708|0]=g,p[a+709|0]=g>>>8,p[a+710|0]=g>>>16,p[a+711|0]=g>>>24,g=F[a+732|0]|F[a+733|0]<<8|(F[a+734|0]<<16|F[a+735|0]<<24),p[a+724|0]=g,p[a+725|0]=g>>>8,p[a+726|0]=g>>>16,p[a+727|0]=g>>>24,g=F[a+748|0]|F[a+749|0]<<8|(F[a+750|0]<<16|F[a+751|0]<<24),p[a+740|0]=g,p[a+741|0]=g>>>8,p[a+742|0]=g>>>16,p[a+743|0]=g>>>24,g=F[a+764|0]|F[a+765|0]<<8|(F[a+766|0]<<16|F[a+767|0]<<24),p[a+756|0]=g,p[a+757|0]=g>>>8,p[a+758|0]=g>>>16,p[a+759|0]=g>>>24,g=F[a+780|0]|F[a+781|0]<<8|(F[a+782|0]<<16|F[a+783|0]<<24),p[a+772|0]=g,p[a+773|0]=g>>>8,p[a+774|0]=g>>>16,p[a+775|0]=g>>>24,g=F[a+796|0]|F[a+797|0]<<8|(F[a+798|0]<<16|F[a+799|0]<<24),p[a+788|0]=g,p[a+789|0]=g>>>8,p[a+790|0]=g>>>16,p[a+791|0]=g>>>24,g=F[a+812|0]|F[a+813|0]<<8|(F[a+814|0]<<16|F[a+815|0]<<24),p[a+804|0]=g,p[a+805|0]=g>>>8,p[a+806|0]=g>>>16,p[a+807|0]=g>>>24,g=F[a+828|0]|F[a+829|0]<<8|(F[a+830|0]<<16|F[a+831|0]<<24),p[a+820|0]=g,p[a+821|0]=g>>>8,p[a+822|0]=g>>>16,p[a+823|0]=g>>>24),g=c[n+2252>>2]+(te<<5)|0,E=L+re(te,800)|0,R=c[E+788>>2];e:{t:{i:{n:{if(!Ji){if(G=F[g+4|0]|F[g+5|0]<<8|(F[g+6|0]<<16|F[g+7|0]<<24),k=Si,H=F[g|0]|F[g+1|0]<<8|(F[g+2|0]<<16|F[g+3|0]<<24),p[k|0]=H,p[k+1|0]=H>>>8,p[k+2|0]=H>>>16,p[k+3|0]=H>>>24,p[k+4|0]=G,p[k+5|0]=G>>>8,p[k+6|0]=G>>>16,p[k+7|0]=G>>>24,G=F[g+12|0]|F[g+13|0]<<8|(F[g+14|0]<<16|F[g+15|0]<<24),H=F[g+8|0]|F[g+9|0]<<8|(F[g+10|0]<<16|F[g+11|0]<<24),p[k+8|0]=H,p[k+9|0]=H>>>8,p[k+10|0]=H>>>16,p[k+11|0]=H>>>24,p[k+12|0]=G,p[k+13|0]=G>>>8,p[k+14|0]=G>>>16,p[k+15|0]=G>>>24,k=F[g+20|0]|F[g+21|0]<<8|(F[g+22|0]<<16|F[g+23|0]<<24),G=F[g+16|0]|F[g+17|0]<<8|(F[g+18|0]<<16|F[g+19|0]<<24),p[a+552|0]=G,p[a+553|0]=G>>>8,p[a+554|0]=G>>>16,p[a+555|0]=G>>>24,p[a+556|0]=k,p[a+557|0]=k>>>8,p[a+558|0]=k>>>16,p[a+559|0]=k>>>24,k=F[g+28|0]|F[g+29|0]<<8|(F[g+30|0]<<16|F[g+31|0]<<24),L=F[g+24|0]|F[g+25|0]<<8|(F[g+26|0]<<16|F[g+27|0]<<24),p[a+568|0]=L,p[a+569|0]=L>>>8,p[a+570|0]=L>>>16,p[a+571|0]=L>>>24,p[a+572|0]=k,p[a+573|0]=k>>>8,p[a+574|0]=k>>>16,p[a+575|0]=k>>>24,F[E+768|0])break n;break t}if(!F[E+768|0])break t;L=c[mt>>2];break i}if((te|0)>=(c[n+288>>2]+-1|0)){L=F[g+15|0],c[mt>>2]=re(L,16843009),L=L|L<<8,L=L<<16|L;break i}L=F[g+32|0]|F[g+33|0]<<8|(F[g+34|0]<<16|F[g+35|0]<<24),c[mt>>2]=L}for(c[a+280>>2]=L,c[a+408>>2]=L,c[a+152>>2]=L,L=0;;){k=pn[(L<<1)+4880>>1]+Ae|0,ft[c[(F[(E+L|0)+769|0]<<2)+10736>>2]](k),G=E+(L<<5)|0;i:{n:switch((R>>>30|0)+-1|0){case 2:ft[c[2703]](G,k,0);break i;case 1:ft[c[2704]](G,k);break i;case 0:break n;default:break i}ft[c[2706]](G,k)}if(R=R<<2,L=L+1|0,(L|0)==16)break}H=te?Ft:Pt;break e}if(L=F[E+769|0],H=te?Ft:Pt,ft[c[((L||H)<<2)+10704>>2]](Ae),L=0,!R)break e;for(;;){k=E+(L<<5)|0,G=pn[(L<<1)+4880>>1]+Ae|0;t:{i:switch((R>>>30|0)+-1|0){case 2:ft[c[2703]](k,G,0);break t;case 1:ft[c[2704]](k,G);break t;case 0:break i;default:break t}ft[c[2706]](k,G)}if(R=R<<2,L=L+1|0,(L|0)==16)break}}L=c[E+792>>2],k=F[E+785|0],k=((k||H)<<2)+10784|0,ft[c[k>>2]](Ze),ft[c[k>>2]](Ne);e:{if(!(L&255))break e;if(k=E+512|0,L&170){ft[c[2705]](k,Ze);break e}ft[c[2707]](k,Ze)}e:{if(!(L&65280))break e;if(k=E+640|0,L&43520){ft[c[2705]](k,Ne);break e}ft[c[2707]](k,Ne)}for((ce|0)<(c[n+292>>2]+-1|0)&&(L=Mi,k=F[L+4|0]|F[L+5|0]<<8|(F[L+6|0]<<16|F[L+7|0]<<24),E=F[L|0]|F[L+1|0]<<8|(F[L+2|0]<<16|F[L+3|0]<<24),p[g|0]=E,p[g+1|0]=E>>>8,p[g+2|0]=E>>>16,p[g+3|0]=E>>>24,p[g+4|0]=k,p[g+5|0]=k>>>8,p[g+6|0]=k>>>16,p[g+7|0]=k>>>24,k=F[L+12|0]|F[L+13|0]<<8|(F[L+14|0]<<16|F[L+15|0]<<24),L=F[L+8|0]|F[L+9|0]<<8|(F[L+10|0]<<16|F[L+11|0]<<24),p[g+8|0]=L,p[g+9|0]=L>>>8,p[g+10|0]=L>>>16,p[g+11|0]=L>>>24,p[g+12|0]=k,p[g+13|0]=k>>>8,p[g+14|0]=k>>>16,p[g+15|0]=k>>>24,L=F[a+812|0]|F[a+813|0]<<8|(F[a+814|0]<<16|F[a+815|0]<<24),k=F[a+808|0]|F[a+809|0]<<8|(F[a+810|0]<<16|F[a+811|0]<<24),p[g+16|0]=k,p[g+17|0]=k>>>8,p[g+18|0]=k>>>16,p[g+19|0]=k>>>24,p[g+20|0]=L,p[g+21|0]=L>>>8,p[g+22|0]=L>>>16,p[g+23|0]=L>>>24,L=F[a+828|0]|F[a+829|0]<<8|(F[a+830|0]<<16|F[a+831|0]<<24),k=F[a+824|0]|F[a+825|0]<<8|(F[a+826|0]<<16|F[a+827|0]<<24),p[g+24|0]=k,p[g+25|0]=k>>>8,p[g+26|0]=k>>>16,p[g+27|0]=k>>>24,p[g+28|0]=L,p[g+29|0]=L>>>8,p[g+30|0]=L>>>16,p[g+31|0]=L>>>24),sn=c[n+2284>>2],G=c[n+2272>>2],H=c[n+2276>>2],g=Ae,E=F[g+4|0]|F[g+5|0]<<8|(F[g+6|0]<<16|F[g+7|0]<<24),k=(c[n+2268>>2]+(te<<4)|0)+re(c[n+2280>>2],ci)|0,R=F[g|0]|F[g+1|0]<<8|(F[g+2|0]<<16|F[g+3|0]<<24),p[k|0]=R,p[k+1|0]=R>>>8,p[k+2|0]=R>>>16,p[k+3|0]=R>>>24,p[k+4|0]=E,p[k+5|0]=E>>>8,p[k+6|0]=E>>>16,p[k+7|0]=E>>>24,E=F[g+12|0]|F[g+13|0]<<8|(F[g+14|0]<<16|F[g+15|0]<<24),g=F[g+8|0]|F[g+9|0]<<8|(F[g+10|0]<<16|F[g+11|0]<<24),p[k+8|0]=g,p[k+9|0]=g>>>8,p[k+10|0]=g>>>16,p[k+11|0]=g>>>24,p[k+12|0]=E,p[k+13|0]=E>>>8,p[k+14|0]=E>>>16,p[k+15|0]=E>>>24,g=te<<3,bn=g+H|0,ar=g+G|0,L=1;E=(L<<5)+Ae|0,G=F[E+4|0]|F[E+5|0]<<8|(F[E+6|0]<<16|F[E+7|0]<<24),g=k+re(c[n+2280>>2],L)|0,H=F[E|0]|F[E+1|0]<<8|(F[E+2|0]<<16|F[E+3|0]<<24),p[g|0]=H,p[g+1|0]=H>>>8,p[g+2|0]=H>>>16,p[g+3|0]=H>>>24,p[g+4|0]=G,p[g+5|0]=G>>>8,p[g+6|0]=G>>>16,p[g+7|0]=G>>>24,R=F[E+12|0]|F[E+13|0]<<8|(F[E+14|0]<<16|F[E+15|0]<<24),E=F[E+8|0]|F[E+9|0]<<8|(F[E+10|0]<<16|F[E+11|0]<<24),p[g+8|0]=E,p[g+9|0]=E>>>8,p[g+10|0]=E>>>16,p[g+11|0]=E>>>24,p[g+12|0]=R,p[g+13|0]=R>>>8,p[g+14|0]=R>>>16,p[g+15|0]=R>>>24,L=L+1|0,(L|0)!=16;);if(k=F[a+588|0]|F[a+589|0]<<8|(F[a+590|0]<<16|F[a+591|0]<<24),R=re(ni,sn),g=R+ar|0,E=F[a+584|0]|F[a+585|0]<<8|(F[a+586|0]<<16|F[a+587|0]<<24),p[g|0]=E,p[g+1|0]=E>>>8,p[g+2|0]=E>>>16,p[g+3|0]=E>>>24,p[g+4|0]=k,p[g+5|0]=k>>>8,p[g+6|0]=k>>>16,p[g+7|0]=k>>>24,L=R+bn|0,k=L,E=F[a+604|0]|F[a+605|0]<<8|(F[a+606|0]<<16|F[a+607|0]<<24),R=F[a+600|0]|F[a+601|0]<<8|(F[a+602|0]<<16|F[a+603|0]<<24),p[k|0]=R,p[k+1|0]=R>>>8,p[k+2|0]=R>>>16,p[k+3|0]=R>>>24,p[k+4|0]=E,p[k+5|0]=E>>>8,p[k+6|0]=E>>>16,p[k+7|0]=E>>>24,E=F[a+620|0]|F[a+621|0]<<8|(F[a+622|0]<<16|F[a+623|0]<<24),k=g+c[n+2284>>2]|0,R=F[a+616|0]|F[a+617|0]<<8|(F[a+618|0]<<16|F[a+619|0]<<24),p[k|0]=R,p[k+1|0]=R>>>8,p[k+2|0]=R>>>16,p[k+3|0]=R>>>24,p[k+4|0]=E,p[k+5|0]=E>>>8,p[k+6|0]=E>>>16,p[k+7|0]=E>>>24,E=F[a+636|0]|F[a+637|0]<<8|(F[a+638|0]<<16|F[a+639|0]<<24),k=L+c[n+2284>>2]|0,R=F[a+632|0]|F[a+633|0]<<8|(F[a+634|0]<<16|F[a+635|0]<<24),p[k|0]=R,p[k+1|0]=R>>>8,p[k+2|0]=R>>>16,p[k+3|0]=R>>>24,p[k+4|0]=E,p[k+5|0]=E>>>8,p[k+6|0]=E>>>16,p[k+7|0]=E>>>24,E=F[a+652|0]|F[a+653|0]<<8|(F[a+654|0]<<16|F[a+655|0]<<24),k=g+(c[n+2284>>2]<<1)|0,R=F[a+648|0]|F[a+649|0]<<8|(F[a+650|0]<<16|F[a+651|0]<<24),p[k|0]=R,p[k+1|0]=R>>>8,p[k+2|0]=R>>>16,p[k+3|0]=R>>>24,p[k+4|0]=E,p[k+5|0]=E>>>8,p[k+6|0]=E>>>16,p[k+7|0]=E>>>24,E=F[a+668|0]|F[a+669|0]<<8|(F[a+670|0]<<16|F[a+671|0]<<24),k=L+(c[n+2284>>2]<<1)|0,R=F[a+664|0]|F[a+665|0]<<8|(F[a+666|0]<<16|F[a+667|0]<<24),p[k|0]=R,p[k+1|0]=R>>>8,p[k+2|0]=R>>>16,p[k+3|0]=R>>>24,p[k+4|0]=E,p[k+5|0]=E>>>8,p[k+6|0]=E>>>16,p[k+7|0]=E>>>24,E=F[a+684|0]|F[a+685|0]<<8|(F[a+686|0]<<16|F[a+687|0]<<24),k=g+re(c[n+2284>>2],3)|0,R=F[a+680|0]|F[a+681|0]<<8|(F[a+682|0]<<16|F[a+683|0]<<24),p[k|0]=R,p[k+1|0]=R>>>8,p[k+2|0]=R>>>16,p[k+3|0]=R>>>24,p[k+4|0]=E,p[k+5|0]=E>>>8,p[k+6|0]=E>>>16,p[k+7|0]=E>>>24,E=F[a+700|0]|F[a+701|0]<<8|(F[a+702|0]<<16|F[a+703|0]<<24),k=L+re(c[n+2284>>2],3)|0,R=F[a+696|0]|F[a+697|0]<<8|(F[a+698|0]<<16|F[a+699|0]<<24),p[k|0]=R,p[k+1|0]=R>>>8,p[k+2|0]=R>>>16,p[k+3|0]=R>>>24,p[k+4|0]=E,p[k+5|0]=E>>>8,p[k+6|0]=E>>>16,p[k+7|0]=E>>>24,E=F[a+716|0]|F[a+717|0]<<8|(F[a+718|0]<<16|F[a+719|0]<<24),k=g+(c[n+2284>>2]<<2)|0,R=F[a+712|0]|F[a+713|0]<<8|(F[a+714|0]<<16|F[a+715|0]<<24),p[k|0]=R,p[k+1|0]=R>>>8,p[k+2|0]=R>>>16,p[k+3|0]=R>>>24,p[k+4|0]=E,p[k+5|0]=E>>>8,p[k+6|0]=E>>>16,p[k+7|0]=E>>>24,E=F[a+732|0]|F[a+733|0]<<8|(F[a+734|0]<<16|F[a+735|0]<<24),k=L+(c[n+2284>>2]<<2)|0,R=F[a+728|0]|F[a+729|0]<<8|(F[a+730|0]<<16|F[a+731|0]<<24),p[k|0]=R,p[k+1|0]=R>>>8,p[k+2|0]=R>>>16,p[k+3|0]=R>>>24,p[k+4|0]=E,p[k+5|0]=E>>>8,p[k+6|0]=E>>>16,p[k+7|0]=E>>>24,E=F[a+748|0]|F[a+749|0]<<8|(F[a+750|0]<<16|F[a+751|0]<<24),k=g+re(c[n+2284>>2],5)|0,R=F[a+744|0]|F[a+745|0]<<8|(F[a+746|0]<<16|F[a+747|0]<<24),p[k|0]=R,p[k+1|0]=R>>>8,p[k+2|0]=R>>>16,p[k+3|0]=R>>>24,p[k+4|0]=E,p[k+5|0]=E>>>8,p[k+6|0]=E>>>16,p[k+7|0]=E>>>24,E=F[a+764|0]|F[a+765|0]<<8|(F[a+766|0]<<16|F[a+767|0]<<24),k=L+re(c[n+2284>>2],5)|0,R=F[a+760|0]|F[a+761|0]<<8|(F[a+762|0]<<16|F[a+763|0]<<24),p[k|0]=R,p[k+1|0]=R>>>8,p[k+2|0]=R>>>16,p[k+3|0]=R>>>24,p[k+4|0]=E,p[k+5|0]=E>>>8,p[k+6|0]=E>>>16,p[k+7|0]=E>>>24,E=F[a+780|0]|F[a+781|0]<<8|(F[a+782|0]<<16|F[a+783|0]<<24),k=g+re(c[n+2284>>2],6)|0,R=F[a+776|0]|F[a+777|0]<<8|(F[a+778|0]<<16|F[a+779|0]<<24),p[k|0]=R,p[k+1|0]=R>>>8,p[k+2|0]=R>>>16,p[k+3|0]=R>>>24,p[k+4|0]=E,p[k+5|0]=E>>>8,p[k+6|0]=E>>>16,p[k+7|0]=E>>>24,E=F[a+796|0]|F[a+797|0]<<8|(F[a+798|0]<<16|F[a+799|0]<<24),k=L+re(c[n+2284>>2],6)|0,R=F[a+792|0]|F[a+793|0]<<8|(F[a+794|0]<<16|F[a+795|0]<<24),p[k|0]=R,p[k+1|0]=R>>>8,p[k+2|0]=R>>>16,p[k+3|0]=R>>>24,p[k+4|0]=E,p[k+5|0]=E>>>8,p[k+6|0]=E>>>16,p[k+7|0]=E>>>24,k=F[a+812|0]|F[a+813|0]<<8|(F[a+814|0]<<16|F[a+815|0]<<24),g=g+re(c[n+2284>>2],7)|0,E=F[a+808|0]|F[a+809|0]<<8|(F[a+810|0]<<16|F[a+811|0]<<24),p[g|0]=E,p[g+1|0]=E>>>8,p[g+2|0]=E>>>16,p[g+3|0]=E>>>24,p[g+4|0]=k,p[g+5|0]=k>>>8,p[g+6|0]=k>>>16,p[g+7|0]=k>>>24,g=L+re(c[n+2284>>2],7)|0,L=F[a+828|0]|F[a+829|0]<<8|(F[a+830|0]<<16|F[a+831|0]<<24),k=F[a+824|0]|F[a+825|0]<<8|(F[a+826|0]<<16|F[a+827|0]<<24),p[g|0]=k,p[g+1|0]=k>>>8,p[g+2|0]=k>>>16,p[g+3|0]=k>>>24,p[g+4|0]=L,p[g+5|0]=L>>>8,p[g+6|0]=L>>>16,p[g+7|0]=L>>>24,te=te+1|0,!((te|0)<c[n+288>>2]))break}}function ja(n){n=n|0;var s=0,a=0,g=0,k=0,E=0,L=0,R=0,G=0,H=0,te=0,ce=0,Ae=0,Ne=0,Ze=0;Ae=Un-16|0,Un=Ae;e:{t:{i:{n:{o:{l:{r:{u:{s:{a:{f:{c:{if(n>>>0<=244){if(L=c[2884],R=n>>>0<11?16:n+11&-8,s=R>>>3|0,n=L>>>s|0,n&3){g=s+((n^-1)&1)|0,s=g<<3,k=c[s+11584>>2],n=k+8|0,a=c[k+8>>2],s=s+11576|0;h:{if((a|0)==(s|0)){Ne=11536,Ze=ba(-2,g)&L,c[Ne>>2]=Ze;break h}c[a+12>>2]=s,c[s+8>>2]=a}s=g<<3,c[k+4>>2]=s|3,s=s+k|0,c[s+4>>2]=c[s+4>>2]|1;break e}if(ce=c[2886],R>>>0<=ce>>>0)break c;if(n){a=n<<s,n=2<<s,n=a&(0-n|n),s=(0-n&n)+-1|0,n=s>>>12&16,a=n,s=s>>>n|0,n=s>>>5&8,a=a|n,s=s>>>n|0,n=s>>>2&4,a=a|n,s=s>>>n|0,n=s>>>1&2,a=a|n,s=s>>>n|0,n=s>>>1&1,a=(a|n)+(s>>>n|0)|0,n=a<<3,E=c[n+11584>>2],s=c[E+8>>2],n=n+11576|0;h:{if((s|0)==(n|0)){L=ba(-2,a)&L,c[2884]=L;break h}c[s+12>>2]=n,c[n+8>>2]=s}if(n=E+8|0,c[E+4>>2]=R|3,g=E+R|0,s=a<<3,k=s-R|0,c[g+4>>2]=k|1,c[s+E>>2]=k,ce){s=ce>>>3|0,a=(s<<3)+11576|0,R=c[2889],s=1<<s;h:{if(!(s&L)){c[2884]=s|L,s=a;break h}s=c[a+8>>2]}c[a+8>>2]=R,c[s+12>>2]=R,c[R+12>>2]=a,c[R+8>>2]=s}c[2889]=g,c[2886]=k;break e}if(G=c[2885],!G)break c;for(s=(G&0-G)+-1|0,n=s>>>12&16,a=n,s=s>>>n|0,n=s>>>5&8,a=a|n,s=s>>>n|0,n=s>>>2&4,a=a|n,s=s>>>n|0,n=s>>>1&2,a=a|n,s=s>>>n|0,n=s>>>1&1,s=c[((a|n)+(s>>>n|0)<<2)+11840>>2],k=(c[s+4>>2]&-8)-R|0,a=s;;){h:{if(n=c[a+16>>2],!n&&(n=c[a+20>>2],!n))break h;a=(c[n+4>>2]&-8)-R|0,g=a>>>0<k>>>0,k=g?a:k,s=g?n:s,a=n;continue}break}if(H=s+R|0,H>>>0<=s>>>0)break f;if(te=c[s+24>>2],g=c[s+12>>2],(g|0)!=(s|0)){n=c[s+8>>2],c[n+12>>2]=g,c[g+8>>2]=n;break t}if(a=s+20|0,n=c[a>>2],!n){if(n=c[s+16>>2],!n)break a;a=s+16|0}for(;E=a,g=n,a=n+20|0,n=c[a>>2],!(!n&&(a=g+16|0,n=c[g+16>>2],!n)););c[E>>2]=0;break t}if(R=-1,n>>>0>4294967231||(n=n+11|0,R=n&-8,G=c[2885],!G))break c;n=n>>>8|0,E=0;h:{if(!n||(E=31,R>>>0>16777215))break h;s=n+1048320>>>16&8,n=n<<s,k=n+520192>>>16&4,n=n<<k,a=n+245760>>>16&2,n=(n<<a>>>15|0)-(a|(s|k))|0,E=(n<<1|R>>>n+21&1)+28|0}k=0-R|0,a=c[(E<<2)+11840>>2];h:{d:{p:{if(!a){n=0;break p}for(n=0,s=R<<((E|0)==31?0:25-(E>>>1|0)|0);;){m:{if(L=(c[a+4>>2]&-8)-R|0,L>>>0>=k>>>0||(g=a,k=L,k))break m;k=0,n=a;break d}if(L=c[a+20>>2],a=c[((s>>>29&4)+a|0)+16>>2],n=L?(L|0)==(a|0)?n:L:n,s=s<<1,!a)break}}if(!(n|g)){if(n=2<<E,n=(0-n|n)&G,!n)break c;s=(n&0-n)+-1|0,n=s>>>12&16,a=n,s=s>>>n|0,n=s>>>5&8,a=a|n,s=s>>>n|0,n=s>>>2&4,a=a|n,s=s>>>n|0,n=s>>>1&2,a=a|n,s=s>>>n|0,n=s>>>1&1,n=c[((a|n)+(s>>>n|0)<<2)+11840>>2]}if(!n)break h}for(;s=(c[n+4>>2]&-8)-R|0,a=s>>>0<k>>>0,k=a?s:k,g=a?n:g,s=c[n+16>>2],s?n=s:n=c[n+20>>2],!!n;);}if(!g|k>>>0>=c[2886]-R>>>0)break c;if(E=g+R|0,E>>>0<=g>>>0)break f;if(H=c[g+24>>2],s=c[g+12>>2],(g|0)!=(s|0)){n=c[g+8>>2],c[n+12>>2]=s,c[s+8>>2]=n;break i}if(a=g+20|0,n=c[a>>2],!n){if(n=c[g+16>>2],!n)break s;a=g+16|0}for(;L=a,s=n,a=n+20|0,n=c[a>>2],!(!n&&(a=s+16|0,n=c[s+16>>2],!n)););c[L>>2]=0;break i}if(a=c[2886],a>>>0>=R>>>0){g=c[2889],s=a-R|0;c:{if(s>>>0>=16){c[2886]=s,n=g+R|0,c[2889]=n,c[n+4>>2]=s|1,c[a+g>>2]=s,c[g+4>>2]=R|3;break c}c[2889]=0,c[2886]=0,c[g+4>>2]=a|3,n=a+g|0,c[n+4>>2]=c[n+4>>2]|1}n=g+8|0;break e}if(G=c[2887],G>>>0>R>>>0){s=G-R|0,c[2887]=s,a=c[2890],n=a+R|0,c[2890]=n,c[n+4>>2]=s|1,c[a+4>>2]=R|3,n=a+8|0;break e}if(n=0,H=R+47|0,s=H,c[3002]?a=c[3004]:(c[3005]=-1,c[3006]=-1,c[3003]=4096,c[3004]=4096,c[3002]=Ae+12&-16^1431655768,c[3007]=0,c[2995]=0,a=4096),E=s+a|0,L=0-a|0,a=E&L,a>>>0<=R>>>0||(k=c[2994],k&&(g=c[2992],s=g+a|0,s>>>0<=g>>>0|s>>>0>k>>>0)))break e;if(F[11980]&4)break l;c:{h:{if(g=c[2890],g)for(n=11984;;){if(s=c[n>>2],s+c[n+4>>2]>>>0>g>>>0&&s>>>0<=g>>>0)break h;if(n=c[n+8>>2],!n)break}if(s=Wa(0),(s|0)==-1||(L=a,g=c[3003],n=g+-1|0,n&s&&(L=(a-s|0)+(n+s&0-g)|0),L>>>0<=R>>>0|L>>>0>2147483646)||(k=c[2994],k&&(g=c[2992],n=g+L|0,n>>>0<=g>>>0|n>>>0>k>>>0)))break r;if(n=Wa(L),(s|0)!=(n|0))break c;break o}if(L=L&E-G,L>>>0>2147483646)break r;if(s=Wa(L),(s|0)==(c[n>>2]+c[n+4>>2]|0))break u;n=s}if(!((n|0)==-1|R+48>>>0<=L>>>0)){if(s=c[3004],s=s+(H-L|0)&0-s,s>>>0>2147483646){s=n;break o}if((Wa(s)|0)!=-1){L=s+L|0,s=n;break o}Wa(0-L|0);break r}if(s=n,(n|0)!=-1)break o;break r}da()}g=0;break t}s=0;break i}if((s|0)!=-1)break o}c[2995]=c[2995]|4}if(a>>>0>2147483646||(s=Wa(a),n=Wa(0),s>>>0>=n>>>0|(s|0)==-1|(n|0)==-1)||(L=n-s|0,L>>>0<=R+40>>>0))break n}n=c[2992]+L|0,c[2992]=n,n>>>0>Qn[2993]&&(c[2993]=n);o:{l:{r:{if(k=c[2890],k){for(n=11984;;){if(g=c[n>>2],a=c[n+4>>2],(g+a|0)==(s|0))break r;if(n=c[n+8>>2],!n)break}break l}for(n=c[2888],s>>>0>=n>>>0&&n||(c[2888]=s),n=0,c[2997]=L,c[2996]=s,c[2892]=-1,c[2893]=c[3002],c[2999]=0;g=n<<3,a=g+11576|0,c[g+11584>>2]=a,c[g+11588>>2]=a,n=n+1|0,(n|0)!=32;);g=L+-40|0,n=s+8&7?-8-s&7:0,a=g-n|0,c[2887]=a,n=n+s|0,c[2890]=n,c[n+4>>2]=a|1,c[(s+g|0)+4>>2]=40,c[2891]=c[3006];break o}if(F[n+12|0]&8|s>>>0<=k>>>0|g>>>0>k>>>0)break l;c[n+4>>2]=a+L,n=k+8&7?-8-k&7:0,a=n+k|0,c[2890]=a,s=c[2887]+L|0,n=s-n|0,c[2887]=n,c[a+4>>2]=n|1,c[(s+k|0)+4>>2]=40,c[2891]=c[3006];break o}g=c[2888],s>>>0<g>>>0&&(c[2888]=s,g=0),a=s+L|0,n=11984;l:{r:{u:{s:{a:{f:{for(;;){if((a|0)!=c[n>>2]){if(n=c[n+8>>2],n)continue;break f}break}if(!(F[n+12|0]&8))break a}for(n=11984;;){if(a=c[n>>2],a>>>0<=k>>>0&&(E=a+c[n+4>>2]|0,E>>>0>k>>>0))break s;n=c[n+8>>2]}}if(c[n>>2]=s,c[n+4>>2]=c[n+4>>2]+L,G=(s+8&7?-8-s&7:0)+s|0,c[G+4>>2]=R|3,s=a+(a+8&7?-8-a&7:0)|0,n=(s-G|0)-R|0,E=R+G|0,(s|0)==(k|0)){c[2890]=E,n=c[2887]+n|0,c[2887]=n,c[E+4>>2]=n|1;break r}if(c[2889]==(s|0)){c[2889]=E,n=c[2886]+n|0,c[2886]=n,c[E+4>>2]=n|1,c[n+E>>2]=n;break r}if(a=c[s+4>>2],(a&3)==1){H=a&-8;a:{if(a>>>0<=255){if(k=c[s+8>>2],a=a>>>3|0,g=c[s+12>>2],(g|0)==(k|0)){Ne=11536,Ze=c[2884]&ba(-2,a),c[Ne>>2]=Ze;break a}c[k+12>>2]=g,c[g+8>>2]=k;break a}te=c[s+24>>2],L=c[s+12>>2];f:{if((L|0)!=(s|0)){a=c[s+8>>2],c[a+12>>2]=L,c[L+8>>2]=a;break f}c:{if(k=s+20|0,R=c[k>>2],R||(k=s+16|0,R=c[k>>2],R))break c;L=0;break f}for(;a=k,L=R,k=L+20|0,R=c[k>>2],!(!R&&(k=L+16|0,R=c[L+16>>2],!R)););c[a>>2]=0}if(!te)break a;g=c[s+28>>2],a=(g<<2)+11840|0;f:{if(c[a>>2]==(s|0)){if(c[a>>2]=L,L)break f;Ne=11540,Ze=c[2885]&ba(-2,g),c[Ne>>2]=Ze;break a}if(c[te+(c[te+16>>2]==(s|0)?16:20)>>2]=L,!L)break a}if(c[L+24>>2]=te,a=c[s+16>>2],a&&(c[L+16>>2]=a,c[a+24>>2]=L),a=c[s+20>>2],!a)break a;c[L+20>>2]=a,c[a+24>>2]=L}s=s+H|0,n=n+H|0}if(c[s+4>>2]=c[s+4>>2]&-2,c[E+4>>2]=n|1,c[n+E>>2]=n,n>>>0<=255){n=n>>>3|0,s=(n<<3)+11576|0,a=c[2884],n=1<<n;a:{if(!(a&n)){c[2884]=n|a,n=s;break a}n=c[s+8>>2]}c[s+8>>2]=E,c[n+12>>2]=E,c[E+12>>2]=s,c[E+8>>2]=n;break r}s=E,g=n>>>8|0,a=0;a:{if(!g||(a=31,n>>>0>16777215))break a;a=g,g=g+1048320>>>16&8,a=a<<g,L=a+520192>>>16&4,a=a<<L,k=a+245760>>>16&2,a=(a<<k>>>15|0)-(k|(g|L))|0,a=(a<<1|n>>>a+21&1)+28|0}c[s+28>>2]=a,c[E+16>>2]=0,c[E+20>>2]=0,L=(a<<2)+11840|0,g=c[2885],s=1<<a;a:{if(!(g&s)){c[2885]=s|g,c[L>>2]=E,c[E+24>>2]=L;break a}for(k=n<<((a|0)==31?0:25-(a>>>1|0)|0),s=c[L>>2];;){if(a=s,(c[s+4>>2]&-8)==(n|0))break u;if(s=k>>>29|0,k=k<<1,g=(a+(s&4)|0)+16|0,s=c[g>>2],!s)break}c[g>>2]=E,c[E+24>>2]=a}c[E+12>>2]=E,c[E+8>>2]=E;break r}for(g=L+-40|0,n=s+8&7?-8-s&7:0,a=g-n|0,c[2887]=a,n=n+s|0,c[2890]=n,c[n+4>>2]=a|1,c[(s+g|0)+4>>2]=40,c[2891]=c[3006],n=(E+(E+-39&7?39-E&7:0)|0)+-47|0,a=n>>>0<k+16>>>0?k:n,c[a+4>>2]=27,n=c[2999],c[a+16>>2]=c[2998],c[a+20>>2]=n,n=c[2997],c[a+8>>2]=c[2996],c[a+12>>2]=n,c[2998]=a+8,c[2997]=L,c[2996]=s,c[2999]=0,n=a+24|0;c[n+4>>2]=7,s=n+8|0,n=n+4|0,E>>>0>s>>>0;);if((a|0)==(k|0))break o;if(c[a+4>>2]=c[a+4>>2]&-2,E=a-k|0,c[k+4>>2]=E|1,c[a>>2]=E,E>>>0<=255){n=E>>>3|0,s=(n<<3)+11576|0,a=c[2884],n=1<<n;s:{if(!(a&n)){c[2884]=n|a,n=s;break s}n=c[s+8>>2]}c[s+8>>2]=k,c[n+12>>2]=k,c[k+12>>2]=s,c[k+8>>2]=n;break o}c[k+16>>2]=0,c[k+20>>2]=0,n=k,a=E>>>8|0,s=0;s:{if(!a||(s=31,E>>>0>16777215))break s;s=a,a=a+1048320>>>16&8,s=s<<a,L=s+520192>>>16&4,s=s<<L,g=s+245760>>>16&2,s=(s<<g>>>15|0)-(g|(a|L))|0,s=(s<<1|E>>>s+21&1)+28|0}c[n+28>>2]=s,g=(s<<2)+11840|0,a=c[2885],n=1<<s;s:{if(!(a&n)){c[2885]=n|a,c[g>>2]=k,c[k+24>>2]=g;break s}for(n=E<<((s|0)==31?0:25-(s>>>1|0)|0),s=c[g>>2];;){if(a=s,(E|0)==(c[s+4>>2]&-8))break l;if(s=n>>>29|0,n=n<<1,g=(a+(s&4)|0)+16|0,s=c[g>>2],!s)break}c[g>>2]=k,c[k+24>>2]=a}c[k+12>>2]=k,c[k+8>>2]=k;break o}n=c[a+8>>2],c[n+12>>2]=E,c[a+8>>2]=E,c[E+24>>2]=0,c[E+12>>2]=a,c[E+8>>2]=n}n=G+8|0;break e}n=c[a+8>>2],c[n+12>>2]=k,c[a+8>>2]=k,c[k+24>>2]=0,c[k+12>>2]=a,c[k+8>>2]=n}if(n=c[2887],n>>>0<=R>>>0)break n;s=n-R|0,c[2887]=s,a=c[2890],n=a+R|0,c[2890]=n,c[n+4>>2]=s|1,c[a+4>>2]=R|3,n=a+8|0;break e}c[2865]=48,n=0;break e}i:{if(!H)break i;a=c[g+28>>2],n=(a<<2)+11840|0;n:{if(c[n>>2]==(g|0)){if(c[n>>2]=s,s)break n;G=ba(-2,a)&G,c[2885]=G;break i}if(c[H+(c[H+16>>2]==(g|0)?16:20)>>2]=s,!s)break i}if(c[s+24>>2]=H,n=c[g+16>>2],n&&(c[s+16>>2]=n,c[n+24>>2]=s),n=c[g+20>>2],!n)break i;c[s+20>>2]=n,c[n+24>>2]=s}i:{if(k>>>0<=15){n=k+R|0,c[g+4>>2]=n|3,n=n+g|0,c[n+4>>2]=c[n+4>>2]|1;break i}if(c[g+4>>2]=R|3,c[E+4>>2]=k|1,c[k+E>>2]=k,k>>>0<=255){n=k>>>3|0,s=(n<<3)+11576|0,a=c[2884],n=1<<n;n:{if(!(a&n)){c[2884]=n|a,n=s;break n}n=c[s+8>>2]}c[s+8>>2]=E,c[n+12>>2]=E,c[E+12>>2]=s,c[E+8>>2]=n;break i}n=E,a=k>>>8|0,s=0;n:{if(!a||(s=31,k>>>0>16777215))break n;s=a,a=a+1048320>>>16&8,s=s<<a,R=s+520192>>>16&4,s=s<<R,L=s+245760>>>16&2,s=(s<<L>>>15|0)-(L|(a|R))|0,s=(s<<1|k>>>s+21&1)+28|0}c[n+28>>2]=s,c[E+16>>2]=0,c[E+20>>2]=0,a=(s<<2)+11840|0;n:{n=1<<s;o:{if(!(n&G)){c[2885]=n|G,c[a>>2]=E,c[E+24>>2]=a;break o}for(n=k<<((s|0)==31?0:25-(s>>>1|0)|0),R=c[a>>2];;){if(s=R,(c[s+4>>2]&-8)==(k|0))break n;if(a=n>>>29|0,n=n<<1,a=(s+(a&4)|0)+16|0,R=c[a>>2],!R)break}c[a>>2]=E,c[E+24>>2]=s}c[E+12>>2]=E,c[E+8>>2]=E;break i}n=c[s+8>>2],c[n+12>>2]=E,c[s+8>>2]=E,c[E+24>>2]=0,c[E+12>>2]=s,c[E+8>>2]=n}n=g+8|0;break e}t:{if(!te)break t;a=c[s+28>>2],n=(a<<2)+11840|0;i:{if(c[n>>2]==(s|0)){if(c[n>>2]=g,g)break i;Ne=11540,Ze=ba(-2,a)&G,c[Ne>>2]=Ze;break t}if(c[(c[te+16>>2]==(s|0)?16:20)+te>>2]=g,!g)break t}if(c[g+24>>2]=te,n=c[s+16>>2],n&&(c[g+16>>2]=n,c[n+24>>2]=g),n=c[s+20>>2],!n)break t;c[g+20>>2]=n,c[n+24>>2]=g}t:{if(k>>>0<=15){n=k+R|0,c[s+4>>2]=n|3,n=n+s|0,c[n+4>>2]=c[n+4>>2]|1;break t}if(c[s+4>>2]=R|3,c[H+4>>2]=k|1,c[k+H>>2]=k,ce){n=ce>>>3|0,a=(n<<3)+11576|0,g=c[2889],n=1<<n;i:{if(!(n&L)){c[2884]=n|L,n=a;break i}n=c[a+8>>2]}c[a+8>>2]=g,c[n+12>>2]=g,c[g+12>>2]=a,c[g+8>>2]=n}c[2889]=H,c[2886]=k}n=s+8|0}return Un=Ae+16|0,n|0}function pa(n,s){var a=0,g=0,k=0,E=0,L=0,R=0,G=0,H=0,te=0,ce=0,Ae=0,Ne=0,Ze=0,mt=0,Pt=0,Ft=0,ni=0,ci=0,Mi=0,Si=0,Ji=0;if(c[s+288>>2]>=1)for(Ji=s+2248|0;;){if(H=c[s+2244>>2],ce=c[s+2304>>2],E=0,c[s+108>>2]){R=c[n+4>>2],k=F[s+904|0],g=c[n+8>>2];e:{if((g|0)>-1)break e;if(a=c[n+12>>2],a>>>0<Qn[n+20>>2]){L=F[a|0]|F[a+1|0]<<8|(F[a+2|0]<<16|F[a+3|0]<<24),c[n+12>>2]=a+3,g=g+24|0,c[n+8>>2]=g,c[n>>2]=c[n>>2]<<24|(L>>>8&65280|(L<<8&16711680|L<<24))>>>8;break e}Rr(n),g=c[n+8>>2]}L=n,te=g,E=c[n>>2],G=E>>>g|0,k=re(k,R)>>>8|0;e:{if(G>>>0>k>>>0){E=((k^-1)<<g)+E|0,c[n>>2]=E,R=R-k|0;break e}R=k+1|0}a=Br(R)^24,g=te-a|0,c[L+8>>2]=g,L=(R<<a)+-1|0,c[n+4>>2]=L;e:{if(G>>>0<=k>>>0){R=F[s+905|0];t:{if((g|0)>-1)break t;if(a=c[n+12>>2],a>>>0<Qn[n+20>>2]){k=F[a|0]|F[a+1|0]<<8|(F[a+2|0]<<16|F[a+3|0]<<24),g=g+24|0,c[n+8>>2]=g,c[n+12>>2]=a+3,E=E<<24|(k>>>8&65280|(k<<8&16711680|k<<24))>>>8,c[n>>2]=E;break t}Rr(n),E=c[n>>2],g=c[n+8>>2]}k=E>>>g|0,a=re(L,R)>>>8|0;t:{if(k>>>0>a>>>0){c[n>>2]=((a^-1)<<g)+E,L=L-a|0;break t}L=a+1|0}E=k>>>0>a>>>0,a=Br(L)^24,g=g-a|0,a=L<<a;break e}R=F[s+906|0];t:{if((g|0)>-1)break t;if(a=c[n+12>>2],a>>>0<Qn[n+20>>2]){k=F[a|0]|F[a+1|0]<<8|(F[a+2|0]<<16|F[a+3|0]<<24),g=g+24|0,c[n+8>>2]=g,c[n+12>>2]=a+3,E=E<<24|(k>>>8&65280|(k<<8&16711680|k<<24))>>>8,c[n>>2]=E;break t}Rr(n),E=c[n>>2],g=c[n+8>>2]}a=g,G=a,k=re(L,R)>>>8|0;t:{if(E>>>a>>>0>k>>>0){c[n>>2]=((k^-1)<<g)+E,E=3,L=L-k|0;break t}E=2,L=k+1|0}a=Br(L)^24,g=G-a|0,a=L<<a}c[n+8>>2]=g,c[n+4>>2]=a+-1}ce=ce+re(Ae,800)|0,p[ce+798|0]=E;e:{if(!c[s+2236>>2]){g=c[n+8>>2],R=c[n+4>>2];break e}k=c[n+4>>2],E=F[s+2240|0],g=c[n+8>>2];t:{if((g|0)>-1)break t;if(a=c[n+12>>2],a>>>0<Qn[n+20>>2]){L=F[a|0]|F[a+1|0]<<8|(F[a+2|0]<<16|F[a+3|0]<<24),c[n+12>>2]=a+3,g=g+24|0,c[n+8>>2]=g,c[n>>2]=c[n>>2]<<24|(L>>>8&65280|(L<<8&16711680|L<<24))>>>8;break t}Rr(n),g=c[n+8>>2]}L=n,te=g,R=c[n>>2],G=R>>>g|0,E=re(k,E)>>>8|0;t:{if(G>>>0>E>>>0){c[n>>2]=R+((E^-1)<<g),k=k-E|0;break t}k=E+1|0}a=Br(k)^24,g=te-a|0,c[L+8>>2]=g,R=(k<<a)+-1|0,c[n+4>>2]=R,p[ce+797|0]=G>>>0>E>>>0}e:{if((g|0)>-1)break e;if(a=c[n+12>>2],a>>>0<Qn[n+20>>2]){L=F[a|0]|F[a+1|0]<<8|(F[a+2|0]<<16|F[a+3|0]<<24),c[n+12>>2]=a+3,g=g+24|0,c[n+8>>2]=g,c[n>>2]=c[n>>2]<<24|(L>>>8&65280|(L<<8&16711680|L<<24))>>>8;break e}Rr(n),g=c[n+8>>2]}H=H+(Ae<<2)|0,L=n,te=g,E=c[n>>2],k=re(R,145)>>>8|0,G=E>>>g>>>0<=k>>>0;e:{if(!G){E=((k^-1)<<g)+E|0,c[n>>2]=E,k=R-k|0;break e}k=k+1|0}a=Br(k)^24,g=te-a|0,c[L+8>>2]=g,R=(k<<a)+-1|0,c[n+4>>2]=R,p[ce+768|0]=G;e:{if(!G){t:{if((g|0)>-1)break t;if(a=c[n+12>>2],a>>>0<Qn[n+20>>2]){L=F[a|0]|F[a+1|0]<<8|(F[a+2|0]<<16|F[a+3|0]<<24),g=g+24|0,c[n+8>>2]=g,c[n+12>>2]=a+3,E=E<<24|(L>>>8&65280|(L<<8&16711680|L<<24))>>>8,c[n>>2]=E;break t}Rr(n),E=c[n>>2],g=c[n+8>>2]}L=n,te=g,k=re(R,156)>>>8|0,G=E>>>g>>>0<=k>>>0;t:{if(!G){E=((k^-1)<<g)+E|0,c[n>>2]=E,k=R-k|0;break t}k=k+1|0}a=Br(k)^24,g=te-a|0,c[L+8>>2]=g,L=(k<<a)+-1|0,c[n+4>>2]=L;t:{if(!G){i:{if((g|0)>-1)break i;if(a=c[n+12>>2],a>>>0<Qn[n+20>>2]){k=F[a|0]|F[a+1|0]<<8|(F[a+2|0]<<16|F[a+3|0]<<24),g=g+24|0,c[n+8>>2]=g,c[n+12>>2]=a+3,E=E<<24|(k>>>8&65280|(k<<8&16711680|k<<24))>>>8,c[n>>2]=E;break i}Rr(n),E=c[n>>2],g=c[n+8>>2]}a=g,R=a,k=L>>>1&16777215;i:{if(E>>>a>>>0>k>>>0){c[n>>2]=((k^-1)<<g)+E,E=1,L=L-k|0;break i}E=3,L=k+1|0}a=Br(L)^24,g=R-a|0,a=L<<a;break t}i:{if((g|0)>-1)break i;if(a=c[n+12>>2],a>>>0<Qn[n+20>>2]){k=F[a|0]|F[a+1|0]<<8|(F[a+2|0]<<16|F[a+3|0]<<24),g=g+24|0,c[n+8>>2]=g,c[n+12>>2]=a+3,E=E<<24|(k>>>8&65280|(k<<8&16711680|k<<24))>>>8,c[n>>2]=E;break i}Rr(n),E=c[n>>2],g=c[n+8>>2]}a=g,R=a,k=re(L,163)>>>8|0;i:{if(E>>>a>>>0>k>>>0){c[n>>2]=((k^-1)<<g)+E,E=2,L=L-k|0;break i}E=0,L=k+1|0}a=Br(L)^24,g=R-a|0,a=L<<a}c[n+8>>2]=g,c[n+4>>2]=a+-1,p[ce+769|0]=E,a=re(E,16843009),p[H|0]=a,p[H+1|0]=a>>>8,p[H+2|0]=a>>>16,p[H+3|0]=a>>>24,g=Ji,p[g|0]=a,p[g+1|0]=a>>>8,p[g+2|0]=a>>>16,p[g+3|0]=a>>>24;break e}for(L=ce+769|0,Ne=0;;){for(Ft=(s+Ne|0)+2248|0,g=F[Ft|0],Ze=0;;){ni=re(g,9),ci=H+Ze|0,Mi=re(F[ci|0],90),k=F[ni+(Mi+3504|0)|0],G=c[n+4>>2],g=c[n+8>>2];t:{if((g|0)>-1)break t;if(a=c[n+12>>2],a>>>0<Qn[n+20>>2]){E=F[a|0]|F[a+1|0]<<8|(F[a+2|0]<<16|F[a+3|0]<<24),c[n+12>>2]=a+3,g=g+24|0,c[n+8>>2]=g,c[n>>2]=c[n>>2]<<24|(E>>>8&65280|(E<<8&16711680|E<<24))>>>8;break t}Rr(n),g=c[n+8>>2]}te=n,Pt=g,R=c[n>>2],mt=R>>>g|0,k=re(k,G)>>>8|0;t:{if(mt>>>0>k>>>0){R=((k^-1)<<g)+R|0,c[n>>2]=R,G=G-k|0;break t}G=k+1|0}if(a=Br(G)^24,g=Pt-a|0,c[te+8>>2]=g,a=(G<<a)+-1|0,c[n+4>>2]=a,k=mt>>>0>k>>>0,E=p[k+4416|0],41706>>>k&1)for(;;){mt=F[((Mi+3504|0)+ni|0)+E|0];t:{if((g|0)>-1)break t;if(k=c[n+12>>2],k>>>0<Qn[n+20>>2]){G=F[k|0]|F[k+1|0]<<8|(F[k+2|0]<<16|F[k+3|0]<<24),g=g+24|0,c[n+8>>2]=g,c[n+12>>2]=k+3,R=R<<24|(G>>>8&65280|(G<<8&16711680|G<<24))>>>8,c[n>>2]=R;break t}Rr(n),R=c[n>>2],g=c[n+8>>2]}k=E<<1,te=n,Pt=g,Si=R>>>g|0,G=re(a,mt)>>>8|0;t:{if(Si>>>0>G>>>0){R=((G^-1)<<g)+R|0,c[n>>2]=R,a=a-G|0;break t}a=G+1|0}if(E=Br(a)^24,g=Pt-E|0,c[te+8>>2]=g,a=(a<<E)+-1|0,c[n+4>>2]=a,k=k|Si>>>0>G>>>0,E=p[k+4416|0],!(41706>>>k&1))break}if(g=0-E|0,p[ci|0]=g,Ze=Ze+1|0,(Ze|0)==4)break}if(a=L,L=F[H|0]|F[H+1|0]<<8|(F[H+2|0]<<16|F[H+3|0]<<24),p[a|0]=L,p[a+1|0]=L>>>8,p[a+2|0]=L>>>16,p[a+3|0]=L>>>24,p[Ft|0]=g,L=a+4|0,Ne=Ne+1|0,(Ne|0)==4)break}}R=c[n+4>>2],g=c[n+8>>2];e:{if((g|0)>-1)break e;if(a=c[n+12>>2],a>>>0<Qn[n+20>>2]){L=F[a|0]|F[a+1|0]<<8|(F[a+2|0]<<16|F[a+3|0]<<24),c[n+12>>2]=a+3,g=g+24|0,c[n+8>>2]=g,c[n>>2]=c[n>>2]<<24|(L>>>8&65280|(L<<8&16711680|L<<24))>>>8;break e}Rr(n),g=c[n+8>>2]}L=n,G=g,E=c[n>>2],k=re(R,142)>>>8|0,H=E>>>g>>>0<=k>>>0;e:{if(!H){E=((k^-1)<<g)+E|0,c[n>>2]=E,k=R-k|0;break e}k=k+1|0}a=Br(k)^24,g=G-a|0,c[L+8>>2]=g,R=(k<<a)+-1|0,c[n+4>>2]=R,a=0;e:{if(H)break e;t:{if((g|0)>-1)break t;if(a=c[n+12>>2],a>>>0<Qn[n+20>>2]){L=F[a|0]|F[a+1|0]<<8|(F[a+2|0]<<16|F[a+3|0]<<24),g=g+24|0,c[n+8>>2]=g,c[n+12>>2]=a+3,E=E<<24|(L>>>8&65280|(L<<8&16711680|L<<24))>>>8,c[n>>2]=E;break t}Rr(n),E=c[n>>2],g=c[n+8>>2]}L=n,G=g,k=re(R,114)>>>8|0,H=E>>>g>>>0<=k>>>0;t:{if(!H){E=((k^-1)<<g)+E|0,c[n>>2]=E,k=R-k|0;break t}k=k+1|0}if(a=Br(k)^24,g=G-a|0,c[L+8>>2]=g,k=(k<<a)+-1|0,c[n+4>>2]=k,a=2,H)break e;t:{if((g|0)>-1)break t;if(a=c[n+12>>2],a>>>0<Qn[n+20>>2]){L=F[a|0]|F[a+1|0]<<8|(F[a+2|0]<<16|F[a+3|0]<<24),g=g+24|0,c[n+8>>2]=g,c[n+12>>2]=a+3,E=E<<24|(L>>>8&65280|(L<<8&16711680|L<<24))>>>8,c[n>>2]=E;break t}Rr(n),E=c[n>>2],g=c[n+8>>2]}a=re(k,183)>>>8|0;t:{if(E>>>g>>>0>a>>>0){c[n>>2]=((a^-1)<<g)+E,E=k-a|0,a=1;break t}E=a+1|0,a=3}k=g,g=Br(E)^24,c[n+8>>2]=k-g,c[n+4>>2]=(E<<g)+-1}if(p[ce+785|0]=a,Ae=Ae+1|0,!((Ae|0)<c[s+288>>2]))break}return!c[s+36>>2]}function Wl(n,s,a,g,k,E){var L=0,R=0,G=0,H=0,te=0,ce=0,Ae=0,Ne=0,Ze=0,mt=0,Pt=0,Ft=0,ni=0,ci=0,Mi=0,Si=0,Ji=0,sn=0,bn=0,ar=0,Tr=0,ys=0,wa=0,fl=0,Ku=0,Kh=0;ar=n+124|0,L=c[n+112>>2],Ze=(L|0)/(a|0)|0,Ne=n+24|0,Tr=(re(a,g)<<2)+s|0,g=(L<<2)+s|0;e:{t:{mt=re(a,k);i:{if((L|0)>=(mt|0))break i;for(Ae=mt<<2,Ft=L-re(a,Ze)|0,ys=c[n+148>>2],mt=0,bn=c[n+120>>2],sn=(bn|0)>0?ar:0,wa=c[n+56>>2]?Ze:16777216,fl=bn+280|0,Ku=s+Ae|0,ce=c[n+168>>2],L=c[n+152>>2],L&&(mt=c[c[n+160>>2]+(re(c[n+156>>2],Ze>>L)+(Ft>>L)<<2)>>2]),ni=ce+re(mt,548)|0,Kh=n+136|0,Si=n- -64|0,mt=g;;){(Ze|0)>=(wa|0)&&(L=c[Ne+4>>2],c[Si>>2]=c[Ne>>2],c[Si+4>>2]=L,L=c[Ne+28>>2],c[Si+24>>2]=c[Ne+24>>2],c[Si+28>>2]=L,L=c[Ne+20>>2],c[Si+16>>2]=c[Ne+16>>2],c[Si+20>>2]=L,L=c[Ne+12>>2],c[Si+8>>2]=c[Ne+8>>2],c[Si+12>>2]=L,c[n+96>>2]=g-s>>2,c[n+120>>2]>=1&&m0(ar,Kh),wa=Ze+8|0);n:{o:{l:{if(!(Ft&ys)){L=c[n+168>>2],G=c[n+152>>2],ce=0;r:{if(!G)break r;ce=c[c[n+160>>2]+(re(c[n+156>>2],Ze>>G)+(Ft>>G)<<2)>>2]}ni=L+re(ce,548)|0}if(c[ni+28>>2]){H=c[ni+24>>2];break l}c[n+44>>2]>=32&&Se(Ne);r:{if(c[ni+32>>2]){L=c[n+28>>2],H=c[n+44>>2],R=H&63,G=R&31,Pt=c[n+24>>2],Ae=(((32<=(R&63)>>>0?L>>>G|0:((1<<G)-1&L)<<32-G|Pt>>>G)&63)<<3)+ni|0,G=c[Ae+36>>2],ce=H+G|0,H=c[Ae+40>>2];u:{if((G|0)<=255){c[n+44>>2]=ce,c[g>>2]=H,H=0;break u}c[n+44>>2]=ce+-256}if(c[n+48>>2]|(c[n+44>>2]>64?c[n+40>>2]==c[n+36>>2]:0))break i;if(H)break r;break o}if(Ae=n,L=c[n+28>>2],H=c[n+44>>2],te=H&63,G=te&31,Pt=c[n+24>>2],R=c[ni>>2]+(((32<=(te&63)>>>0?L>>>G|0:((1<<G)-1&L)<<32-G|Pt>>>G)&255)<<2)|0,G=F[R|0],G>>>0>=9&&(H=H+8|0,c[n+44>>2]=H,ce=(pn[R+2>>1]<<2)+R|0,ci=H&63,R=ci&31,R=ce+(((-1<<G+-8^-1)&(32<=(ci&63)>>>0?L>>>R|0:((1<<R)-1&L)<<32-R|Pt>>>R))<<2)|0,G=F[R|0]),c[Ae+44>>2]=(G&255)+H,c[n+48>>2])break i;H=pn[R+2>>1]}if(c[n+44>>2]>64&&c[n+40>>2]==c[n+36>>2])break i;if((H|0)<=255){if(c[ni+20>>2]){H=c[ni+24>>2]|H<<8;break l}if(Ae=n,R=c[n+44>>2],ci=R&63,ce=ci&31,te=c[ni+4>>2]+(((32<=(ci&63)>>>0?L>>>ce|0:((1<<ce)-1&L)<<32-ce|Pt>>>ce)&255)<<2)|0,G=F[te|0],G>>>0>=9&&(R=R+8|0,c[n+44>>2]=R,ce=(pn[te+2>>1]<<2)+te|0,Ji=R&63,te=Ji&31,te=ce+(((-1<<G+-8^-1)&(32<=(Ji&63)>>>0?L>>>te|0:((1<<te)-1&L)<<32-te|Pt>>>te))<<2)|0,G=F[te|0]),R=(G&255)+R|0,c[Ae+44>>2]=R,ci=pn[te+2>>1],(R|0)>=32&&(Se(Ne),Pt=c[n+24>>2],R=c[n+44>>2],L=c[n+28>>2]),Ji=R&63,ce=Ji&31,te=c[ni+8>>2]+(((32<=(Ji&63)>>>0?L>>>ce|0:((1<<ce)-1&L)<<32-ce|Pt>>>ce)&255)<<2)|0,G=F[te|0],G>>>0>=9&&(R=R+8|0,c[n+44>>2]=R,ce=(pn[te+2>>1]<<2)+te|0,Mi=R&63,te=Mi&31,te=ce+(((-1<<G+-8^-1)&(32<=Mi>>>0?L>>>te|0:((1<<te)-1&L)<<32-te|Pt>>>te))<<2)|0,G=F[te|0]),R=(G&255)+R|0,c[Ae+44>>2]=R,Ji=pn[te+2>>1],ce=n,Mi=R&63,Ae=Mi&31,te=c[ni+12>>2]+(((32<=Mi>>>0?L>>>Ae|0:((1<<Ae)-1&L)<<32-Ae|Pt>>>Ae)&255)<<2)|0,G=F[te|0],G>>>0>=9&&(R=R+8|0,c[n+44>>2]=R,Mi=(pn[te+2>>1]<<2)+te|0,te=R&63,Ae=te&31,te=Mi+(((-1<<G+-8^-1)&(32<=(te&63)>>>0?L>>>Ae|0:((1<<Ae)-1&L)<<32-Ae|Pt>>>Ae))<<2)|0,G=F[te|0]),L=(G&255)+R|0,c[ce+44>>2]=L,c[n+48>>2]||(G=pn[te+2>>1],c[n+40>>2]==c[n+36>>2]&&(L|0)>=65))break i;H=Ji|(ci<<16|H<<8)|G<<24;break l}r:{u:{if((H|0)<=279){ce=H+-256|0,(H|0)>=260&&(L=H+-258>>1,ce=eo(Ne,L)+((ce&1|2)<<L)|0,Pt=c[Ne>>2],L=c[Ne+4>>2]),Ae=n,H=c[n+44>>2],ci=H&63,R=ci&31,R=c[ni+16>>2]+(((32<=(ci&63)>>>0?L>>>R|0:((1<<R)-1&L)<<32-R|Pt>>>R)&255)<<2)|0,G=F[R|0],G>>>0>=9&&(H=H+8|0,c[n+44>>2]=H,Mi=(pn[R+2>>1]<<2)+R|0,te=H&63,R=te&31,R=Mi+(((-1<<G+-8^-1)&(32<=(te&63)>>>0?L>>>R|0:((1<<R)-1&L)<<32-R|Pt>>>R))<<2)|0,G=F[R|0]),L=(G&255)+H|0,c[Ae+44>>2]=L,H=pn[R+2>>1],(L|0)>=32&&Se(Ne),H>>>0>=4&&(L=H+-2>>1,H=eo(Ne,L)+((H&1|2)<<L)|0);s:{if((H+1|0)>=121){L=H+-119|0;break s}L=F[H+1264|0],L=(re(L>>>4|0,a)-(L&15)|0)+8|0,L=(L|0)>1?L:1}if(c[n+48>>2]|(c[n+44>>2]>64?c[n+40>>2]==c[n+36>>2]:0))break i;if(g-s>>2<(L|0)||(Ae=ce+1|0,Tr-g>>2<(Ae|0)))break t;if(R=g-(L<<2)|0,!(g&3|(Ae|0)<4|(L|0)>2)){s:{if((L|0)==1){H=c[R>>2],G=H,L=G,Pt=L;break s}L=c[R+4>>2],Pt=c[R>>2],H=Pt}s:{if(!(g&4)){ce=Ae,G=g;break s}c[g>>2]=H,Pt=_p(Pt,L),L=Bn,R=R+4|0,G=g+4|0}for(H=ce>>>1|0,te=H>>>0>1?H:1,H=0;ci=G+(H<<3)|0,c[ci>>2]=Pt,c[ci+4>>2]=L,H=H+1|0,(te|0)!=(H|0););if(!(ce&1))break r;L=te<<3,c[L+G>>2]=c[L+R>>2];break r}if((L|0)>=(Ae|0))break u;if(H=0,(Ae|0)<=0)break r;for(;L=H<<2,c[L+g>>2]=c[L+R>>2],L=(H|0)!=(ce|0),H=H+1|0,!!L;);break r}if((H|0)>=(fl|0))break t;if(G=H+-280|0,L=c[sn>>2],mt>>>0<g>>>0)for(;ce=c[mt>>2],c[L+(re(ce,506832829)>>>c[sn+4>>2]<<2)>>2]=ce,mt=mt+4|0,mt>>>0<g>>>0;);H=c[L+(G<<2)>>2];break l}Yr(g,R,Ae<<2)}if(Ft=Ae+Ft|0,(Ft|0)>=(a|0))for(;Ft=Ft-a|0,L=Ze,Ze=L+1|0,Ze&15|(!E|(L|0)>=(k|0))||ft[E|0](n,Ze),(Ft|0)>=(a|0););if(ce=Ae<<2,Ft&ys){L=c[n+168>>2],G=c[n+152>>2],Ae=0;r:{if(!G)break r;Ae=c[c[n+160>>2]+(re(c[n+156>>2],Ze>>G)+(Ft>>G)<<2)>>2]}ni=L+re(Ae,548)|0}if(g=g+ce|0,(bn|0)<1|mt>>>0>=g>>>0)break n;for(L=c[sn>>2];G=c[mt>>2],c[L+(re(G,506832829)>>>c[sn+4>>2]<<2)>>2]=G,mt=mt+4|0,mt>>>0<g>>>0;);break n}c[g>>2]=H}if(L=g+4|0,Ft=Ft+1|0,(Ft|0)<(a|0)){g=L;break n}if(G=Ze+1|0,G&15|(!E|(Ze|0)>=(k|0))||ft[E|0](n,G),Ft=0,!((bn|0)<1|mt>>>0>=L>>>0)){for(ce=c[sn>>2];Ze=c[mt>>2],c[ce+(re(Ze,506832829)>>>c[sn+4>>2]<<2)>>2]=Ze,Ae=mt>>>0<g>>>0,Ze=mt+4|0,mt=Ze,!!Ae;);mt=Ze}g=L,Ze=G}if(!(g>>>0<Ku>>>0))break}}L=n,a=1;i:{if(c[n+48>>2]||(a=0,c[n+40>>2]!=c[n+36>>2]))break i;a=c[n+44>>2]>64}if(c[L+48>>2]=a,!(!c[n+56>>2]|(!a|g>>>0>=Tr>>>0))){if(c[n>>2]=5,s=c[n+68>>2],c[Ne>>2]=c[n+64>>2],c[Ne+4>>2]=s,s=c[n+92>>2],c[Ne+24>>2]=c[n+88>>2],c[Ne+28>>2]=s,s=c[n+84>>2],c[Ne+16>>2]=c[n+80>>2],c[Ne+20>>2]=s,s=c[n+76>>2],c[Ne+8>>2]=c[n+72>>2],c[Ne+12>>2]=s,c[n+112>>2]=c[n+96>>2],s=1,c[n+120>>2]<1)break e;return m0(n+136|0,ar),1}if(a)break t;return E&&ft[E|0](n,(Ze|0)>(k|0)?k:Ze),c[n>>2]=0,c[n+112>>2]=g-s>>2,1}c[n>>2]=3,s=0}return s}function ma(n){n=n|0;var s=0,a=0;a=_r(F[n+31|0],0,16843009,16843009),s=a,p[n+32|0]=s,p[n+33|0]=s>>>8,p[n+34|0]=s>>>16,p[n+35|0]=s>>>24,s=Bn,p[n+36|0]=s,p[n+37|0]=s>>>8,p[n+38|0]=s>>>16,p[n+39|0]=s>>>24,p[n+40|0]=a,p[n+41|0]=a>>>8,p[n+42|0]=a>>>16,p[n+43|0]=a>>>24,p[n+44|0]=s,p[n+45|0]=s>>>8,p[n+46|0]=s>>>16,p[n+47|0]=s>>>24,a=_r(F[n+63|0],0,16843009,16843009),s=a,p[n+64|0]=s,p[n+65|0]=s>>>8,p[n+66|0]=s>>>16,p[n+67|0]=s>>>24,s=Bn,p[n+68|0]=s,p[n+69|0]=s>>>8,p[n+70|0]=s>>>16,p[n+71|0]=s>>>24,p[n+72|0]=a,p[n+73|0]=a>>>8,p[n+74|0]=a>>>16,p[n+75|0]=a>>>24,p[n+76|0]=s,p[n+77|0]=s>>>8,p[n+78|0]=s>>>16,p[n+79|0]=s>>>24,a=_r(F[n+95|0],0,16843009,16843009),s=a,p[n+96|0]=s,p[n+97|0]=s>>>8,p[n+98|0]=s>>>16,p[n+99|0]=s>>>24,s=Bn,p[n+100|0]=s,p[n+101|0]=s>>>8,p[n+102|0]=s>>>16,p[n+103|0]=s>>>24,p[n+104|0]=a,p[n+105|0]=a>>>8,p[n+106|0]=a>>>16,p[n+107|0]=a>>>24,p[n+108|0]=s,p[n+109|0]=s>>>8,p[n+110|0]=s>>>16,p[n+111|0]=s>>>24,a=_r(F[n+127|0],0,16843009,16843009),s=a,p[n+128|0]=s,p[n+129|0]=s>>>8,p[n+130|0]=s>>>16,p[n+131|0]=s>>>24,s=Bn,p[n+132|0]=s,p[n+133|0]=s>>>8,p[n+134|0]=s>>>16,p[n+135|0]=s>>>24,p[n+136|0]=a,p[n+137|0]=a>>>8,p[n+138|0]=a>>>16,p[n+139|0]=a>>>24,p[n+140|0]=s,p[n+141|0]=s>>>8,p[n+142|0]=s>>>16,p[n+143|0]=s>>>24,a=_r(F[n+159|0],0,16843009,16843009),s=a,p[n+168|0]=s,p[n+169|0]=s>>>8,p[n+170|0]=s>>>16,p[n+171|0]=s>>>24,s=Bn,p[n+172|0]=s,p[n+173|0]=s>>>8,p[n+174|0]=s>>>16,p[n+175|0]=s>>>24,p[n+160|0]=a,p[n+161|0]=a>>>8,p[n+162|0]=a>>>16,p[n+163|0]=a>>>24,p[n+164|0]=s,p[n+165|0]=s>>>8,p[n+166|0]=s>>>16,p[n+167|0]=s>>>24,a=_r(F[n+-1|0],0,16843009,16843009),s=a,p[n|0]=s,p[n+1|0]=s>>>8,p[n+2|0]=s>>>16,p[n+3|0]=s>>>24,s=Bn,p[n+4|0]=s,p[n+5|0]=s>>>8,p[n+6|0]=s>>>16,p[n+7|0]=s>>>24,p[n+8|0]=a,p[n+9|0]=a>>>8,p[n+10|0]=a>>>16,p[n+11|0]=a>>>24,p[n+12|0]=s,p[n+13|0]=s>>>8,p[n+14|0]=s>>>16,p[n+15|0]=s>>>24,a=_r(F[n+191|0],0,16843009,16843009),s=a,p[n+200|0]=s,p[n+201|0]=s>>>8,p[n+202|0]=s>>>16,p[n+203|0]=s>>>24,s=Bn,p[n+204|0]=s,p[n+205|0]=s>>>8,p[n+206|0]=s>>>16,p[n+207|0]=s>>>24,p[n+192|0]=a,p[n+193|0]=a>>>8,p[n+194|0]=a>>>16,p[n+195|0]=a>>>24,p[n+196|0]=s,p[n+197|0]=s>>>8,p[n+198|0]=s>>>16,p[n+199|0]=s>>>24,a=_r(F[n+223|0],0,16843009,16843009),s=a,p[n+232|0]=s,p[n+233|0]=s>>>8,p[n+234|0]=s>>>16,p[n+235|0]=s>>>24,s=Bn,p[n+236|0]=s,p[n+237|0]=s>>>8,p[n+238|0]=s>>>16,p[n+239|0]=s>>>24,p[n+224|0]=a,p[n+225|0]=a>>>8,p[n+226|0]=a>>>16,p[n+227|0]=a>>>24,p[n+228|0]=s,p[n+229|0]=s>>>8,p[n+230|0]=s>>>16,p[n+231|0]=s>>>24,a=_r(F[n+255|0],0,16843009,16843009),s=a,p[n+264|0]=s,p[n+265|0]=s>>>8,p[n+266|0]=s>>>16,p[n+267|0]=s>>>24,s=Bn,p[n+268|0]=s,p[n+269|0]=s>>>8,p[n+270|0]=s>>>16,p[n+271|0]=s>>>24,p[n+256|0]=a,p[n+257|0]=a>>>8,p[n+258|0]=a>>>16,p[n+259|0]=a>>>24,p[n+260|0]=s,p[n+261|0]=s>>>8,p[n+262|0]=s>>>16,p[n+263|0]=s>>>24,a=_r(F[n+287|0],0,16843009,16843009),s=a,p[n+296|0]=s,p[n+297|0]=s>>>8,p[n+298|0]=s>>>16,p[n+299|0]=s>>>24,s=Bn,p[n+300|0]=s,p[n+301|0]=s>>>8,p[n+302|0]=s>>>16,p[n+303|0]=s>>>24,p[n+288|0]=a,p[n+289|0]=a>>>8,p[n+290|0]=a>>>16,p[n+291|0]=a>>>24,p[n+292|0]=s,p[n+293|0]=s>>>8,p[n+294|0]=s>>>16,p[n+295|0]=s>>>24,a=_r(F[n+319|0],0,16843009,16843009),s=a,p[n+328|0]=s,p[n+329|0]=s>>>8,p[n+330|0]=s>>>16,p[n+331|0]=s>>>24,s=Bn,p[n+332|0]=s,p[n+333|0]=s>>>8,p[n+334|0]=s>>>16,p[n+335|0]=s>>>24,p[n+320|0]=a,p[n+321|0]=a>>>8,p[n+322|0]=a>>>16,p[n+323|0]=a>>>24,p[n+324|0]=s,p[n+325|0]=s>>>8,p[n+326|0]=s>>>16,p[n+327|0]=s>>>24,a=_r(F[n+351|0],0,16843009,16843009),s=a,p[n+360|0]=s,p[n+361|0]=s>>>8,p[n+362|0]=s>>>16,p[n+363|0]=s>>>24,s=Bn,p[n+364|0]=s,p[n+365|0]=s>>>8,p[n+366|0]=s>>>16,p[n+367|0]=s>>>24,p[n+352|0]=a,p[n+353|0]=a>>>8,p[n+354|0]=a>>>16,p[n+355|0]=a>>>24,p[n+356|0]=s,p[n+357|0]=s>>>8,p[n+358|0]=s>>>16,p[n+359|0]=s>>>24,a=_r(F[n+383|0],0,16843009,16843009),s=a,p[n+392|0]=s,p[n+393|0]=s>>>8,p[n+394|0]=s>>>16,p[n+395|0]=s>>>24,s=Bn,p[n+396|0]=s,p[n+397|0]=s>>>8,p[n+398|0]=s>>>16,p[n+399|0]=s>>>24,p[n+384|0]=a,p[n+385|0]=a>>>8,p[n+386|0]=a>>>16,p[n+387|0]=a>>>24,p[n+388|0]=s,p[n+389|0]=s>>>8,p[n+390|0]=s>>>16,p[n+391|0]=s>>>24,a=_r(F[n+415|0],0,16843009,16843009),s=a,p[n+424|0]=s,p[n+425|0]=s>>>8,p[n+426|0]=s>>>16,p[n+427|0]=s>>>24,s=Bn,p[n+428|0]=s,p[n+429|0]=s>>>8,p[n+430|0]=s>>>16,p[n+431|0]=s>>>24,p[n+416|0]=a,p[n+417|0]=a>>>8,p[n+418|0]=a>>>16,p[n+419|0]=a>>>24,p[n+420|0]=s,p[n+421|0]=s>>>8,p[n+422|0]=s>>>16,p[n+423|0]=s>>>24,a=_r(F[n+447|0],0,16843009,16843009),s=a,p[n+456|0]=s,p[n+457|0]=s>>>8,p[n+458|0]=s>>>16,p[n+459|0]=s>>>24,s=Bn,p[n+460|0]=s,p[n+461|0]=s>>>8,p[n+462|0]=s>>>16,p[n+463|0]=s>>>24,p[n+448|0]=a,p[n+449|0]=a>>>8,p[n+450|0]=a>>>16,p[n+451|0]=a>>>24,p[n+452|0]=s,p[n+453|0]=s>>>8,p[n+454|0]=s>>>16,p[n+455|0]=s>>>24,a=_r(F[n+479|0],0,16843009,16843009),s=a,p[n+488|0]=s,p[n+489|0]=s>>>8,p[n+490|0]=s>>>16,p[n+491|0]=s>>>24,s=Bn,p[n+492|0]=s,p[n+493|0]=s>>>8,p[n+494|0]=s>>>16,p[n+495|0]=s>>>24,p[n+480|0]=a,p[n+481|0]=a>>>8,p[n+482|0]=a>>>16,p[n+483|0]=a>>>24,p[n+484|0]=s,p[n+485|0]=s>>>8,p[n+486|0]=s>>>16,p[n+487|0]=s>>>24}function xo(n,s){var a=0,g=0,k=0,E=0,L=0,R=0,G=0,H=0,te=0,ce=0;R=c[n+4>>2],E=F[s+3|0],a=c[n+8>>2];e:{if((a|0)>-1)break e;if(k=c[n+12>>2],k>>>0<Qn[n+20>>2]){L=F[k|0]|F[k+1|0]<<8|(F[k+2|0]<<16|F[k+3|0]<<24),c[n+12>>2]=k+3,a=a+24|0,c[n+8>>2]=a,c[n>>2]=c[n>>2]<<24|(L>>>8&65280|(L<<8&16711680|L<<24))>>>8;break e}Rr(n),a=c[n+8>>2]}L=n,H=a,g=c[n>>2],G=g>>>a|0,E=re(E,R)>>>8|0;e:{if(G>>>0>E>>>0){g=((E^-1)<<a)+g|0,c[n>>2]=g,R=R-E|0;break e}R=E+1|0}k=Br(R)^24,a=H-k|0,c[L+8>>2]=a,R=(R<<k)+-1|0,c[n+4>>2]=R;e:{if(G>>>0<=E>>>0){E=F[s+4|0];t:{if((a|0)>-1)break t;if(k=c[n+12>>2],k>>>0<Qn[n+20>>2]){L=F[k|0]|F[k+1|0]<<8|(F[k+2|0]<<16|F[k+3|0]<<24),a=a+24|0,c[n+8>>2]=a,c[n+12>>2]=k+3,g=g<<24|(L>>>8&65280|(L<<8&16711680|L<<24))>>>8,c[n>>2]=g;break t}Rr(n),g=c[n>>2],a=c[n+8>>2]}L=n,H=a,E=re(E,R)>>>8|0,G=g>>>a>>>0<=E>>>0;t:{if(!G){g=((E^-1)<<a)+g|0,c[n>>2]=g,E=R-E|0;break t}E=E+1|0}if(k=Br(E)^24,a=H-k|0,c[L+8>>2]=a,R=(E<<k)+-1|0,c[n+4>>2]=R,E=2,G)break e;L=F[s+5|0];t:{if((a|0)>-1)break t;if(s=c[n+12>>2],s>>>0<Qn[n+20>>2]){k=F[s|0]|F[s+1|0]<<8|(F[s+2|0]<<16|F[s+3|0]<<24),a=a+24|0,c[n+8>>2]=a,c[n+12>>2]=s+3,g=g<<24|(k>>>8&65280|(k<<8&16711680|k<<24))>>>8,c[n>>2]=g;break t}Rr(n),g=c[n>>2],a=c[n+8>>2]}H=n,k=a,E=re(L,R)>>>8|0;t:{if(g>>>a>>>0>E>>>0){c[n>>2]=((E^-1)<<a)+g,L=4,a=R-E|0;break t}L=3,a=E+1|0}return s=Br(a)^24,c[H+8>>2]=k-s,c[n+4>>2]=(a<<s)+-1,L}E=F[s+6|0];t:{if((a|0)>-1)break t;if(k=c[n+12>>2],k>>>0<Qn[n+20>>2]){L=F[k|0]|F[k+1|0]<<8|(F[k+2|0]<<16|F[k+3|0]<<24),a=a+24|0,c[n+8>>2]=a,c[n+12>>2]=k+3,g=g<<24|(L>>>8&65280|(L<<8&16711680|L<<24))>>>8,c[n>>2]=g;break t}Rr(n),g=c[n>>2],a=c[n+8>>2]}L=n,H=a,G=g>>>a|0,E=re(E,R)>>>8|0;t:{if(G>>>0>E>>>0){g=((E^-1)<<a)+g|0,c[n>>2]=g,R=R-E|0;break t}R=E+1|0}if(k=Br(R)^24,a=H-k|0,c[L+8>>2]=a,R=(R<<k)+-1|0,c[n+4>>2]=R,G>>>0<=E>>>0){L=F[s+7|0];t:{if((a|0)>-1)break t;if(s=c[n+12>>2],s>>>0<Qn[n+20>>2]){k=F[s|0]|F[s+1|0]<<8|(F[s+2|0]<<16|F[s+3|0]<<24),a=a+24|0,c[n+8>>2]=a,c[n+12>>2]=s+3,g=g<<24|(k>>>8&65280|(k<<8&16711680|k<<24))>>>8,c[n>>2]=g;break t}Rr(n),g=c[n>>2],a=c[n+8>>2]}H=n,k=a,G=g>>>a|0,L=re(L,R)>>>8|0;t:{if(G>>>0>L>>>0){g=((L^-1)<<a)+g|0,c[n>>2]=g,E=R-L|0;break t}E=L+1|0}if(s=Br(E)^24,a=k-s|0,c[H+8>>2]=a,R=(E<<s)+-1|0,c[n+4>>2]=R,G>>>0<=L>>>0){t:{if((a|0)>-1)break t;if(s=c[n+12>>2],s>>>0<Qn[n+20>>2]){k=F[s|0]|F[s+1|0]<<8|(F[s+2|0]<<16|F[s+3|0]<<24),a=a+24|0,c[n+8>>2]=a,c[n+12>>2]=s+3,g=g<<24|(k>>>8&65280|(k<<8&16711680|k<<24))>>>8,c[n>>2]=g;break t}Rr(n),g=c[n>>2],a=c[n+8>>2]}s=re(R,159)>>>8|0;t:{if(g>>>a>>>0>s>>>0){c[n>>2]=((s^-1)<<a)+g,g=R-s|0,s=6;break t}g=s+1|0,s=5}return E=a,a=Br(g)^24,c[n+8>>2]=E-a,c[n+4>>2]=(g<<a)+-1,s}t:{if((a|0)>-1)break t;if(s=c[n+12>>2],s>>>0<Qn[n+20>>2]){k=F[s|0]|F[s+1|0]<<8|(F[s+2|0]<<16|F[s+3|0]<<24),a=a+24|0,c[n+8>>2]=a,c[n+12>>2]=s+3,g=g<<24|(k>>>8&65280|(k<<8&16711680|k<<24))>>>8,c[n>>2]=g;break t}Rr(n),g=c[n>>2],a=c[n+8>>2]}H=n,k=a,L=re(R,165)>>>8|0;t:{if(g>>>a>>>0>L>>>0){g=((L^-1)<<a)+g|0,c[n>>2]=g,E=9,L=R-L|0;break t}E=7,L=L+1|0}s=Br(L)^24,a=k-s|0,c[H+8>>2]=a,R=(L<<s)+-1|0,c[n+4>>2]=R;t:{if((a|0)>-1)break t;if(s=c[n+12>>2],s>>>0<Qn[n+20>>2]){k=F[s|0]|F[s+1|0]<<8|(F[s+2|0]<<16|F[s+3|0]<<24),a=a+24|0,c[n+8>>2]=a,c[n+12>>2]=s+3,g=g<<24|(k>>>8&65280|(k<<8&16711680|k<<24))>>>8,c[n>>2]=g;break t}Rr(n),g=c[n>>2],a=c[n+8>>2]}H=n,k=a,G=g>>>a|0,L=re(R,145)>>>8|0;t:{if(G>>>0>L>>>0){c[n>>2]=((L^-1)<<a)+g,a=R-L|0;break t}a=L+1|0}return s=Br(a)^24,c[H+8>>2]=k-s,c[n+4>>2]=(a<<s)+-1,(G>>>0>L>>>0)+E|0}E=F[s+8|0];t:{if((a|0)>-1)break t;if(k=c[n+12>>2],k>>>0<Qn[n+20>>2]){L=F[k|0]|F[k+1|0]<<8|(F[k+2|0]<<16|F[k+3|0]<<24),a=a+24|0,c[n+8>>2]=a,c[n+12>>2]=k+3,g=g<<24|(L>>>8&65280|(L<<8&16711680|L<<24))>>>8,c[n>>2]=g;break t}Rr(n),g=c[n>>2],a=c[n+8>>2]}L=n,H=a,te=g>>>a|0,G=re(E,R)>>>8|0;t:{if(te>>>0>G>>>0){g=((G^-1)<<a)+g|0,c[n>>2]=g,ce=10,E=R-G|0;break t}ce=9,E=G+1|0}k=Br(E)^24,a=H-k|0,c[L+8>>2]=a,E=(E<<k)+-1|0,c[n+4>>2]=E,L=F[s+ce|0];t:{if((a|0)>-1)break t;if(s=c[n+12>>2],s>>>0<Qn[n+20>>2]){k=F[s|0]|F[s+1|0]<<8|(F[s+2|0]<<16|F[s+3|0]<<24),a=a+24|0,c[n+8>>2]=a,c[n+12>>2]=s+3,g=g<<24|(k>>>8&65280|(k<<8&16711680|k<<24))>>>8,c[n>>2]=g;break t}Rr(n),g=c[n>>2],a=c[n+8>>2]}H=n,k=a,R=g>>>a|0,L=re(L,E)>>>8|0;t:{if(R>>>0>L>>>0){g=((L^-1)<<a)+g|0,c[n>>2]=g,E=E-L|0;break t}E=L+1|0}s=Br(E)^24,a=k-s|0,c[H+8>>2]=a,E=(E<<s)+-1|0,c[n+4>>2]=E,ce=(te>>>0>G>>>0)<<1|R>>>0>L>>>0,L=c[(ce<<2)+10160>>2],s=F[L|0];t:{if(!s){R=0;break t}for(R=0;;){G=s&255;i:{if((a|0)>-1)break i;if(s=c[n+12>>2],s>>>0<Qn[n+20>>2]){k=F[s|0]|F[s+1|0]<<8|(F[s+2|0]<<16|F[s+3|0]<<24),a=a+24|0,c[n+8>>2]=a,c[n+12>>2]=s+3,g=g<<24|(k>>>8&65280|(k<<8&16711680|k<<24))>>>8,c[n>>2]=g;break i}Rr(n),g=c[n>>2],a=c[n+8>>2]}H=n,k=a,te=g>>>a|0,G=re(E,G)>>>8|0;i:{if(te>>>0>G>>>0){g=((G^-1)<<a)+g|0,c[n>>2]=g,E=E-G|0;break i}E=G+1|0}if(s=Br(E)^24,a=k-s|0,c[H+8>>2]=a,E=(E<<s)+-1|0,c[n+4>>2]=E,R=R<<1|te>>>0>G>>>0,s=F[L+1|0],L=L+1|0,!s)break}}E=(8<<ce|3)+R|0}return E}function se(n){n=n|0,p[n|0]=-2139062144,p[n+1|0]=8421504,p[n+2|0]=32896,p[n+3|0]=128,p[n+4|0]=-2139062144,p[n+5|0]=8421504,p[n+6|0]=32896,p[n+7|0]=128,p[n+32|0]=-2139062144,p[n+33|0]=8421504,p[n+34|0]=32896,p[n+35|0]=128,p[n+36|0]=-2139062144,p[n+37|0]=8421504,p[n+38|0]=32896,p[n+39|0]=128,p[n+64|0]=-2139062144,p[n+65|0]=8421504,p[n+66|0]=32896,p[n+67|0]=128,p[n+68|0]=-2139062144,p[n+69|0]=8421504,p[n+70|0]=32896,p[n+71|0]=128,p[n+96|0]=-2139062144,p[n+97|0]=8421504,p[n+98|0]=32896,p[n+99|0]=128,p[n+100|0]=-2139062144,p[n+101|0]=8421504,p[n+102|0]=32896,p[n+103|0]=128,p[n+128|0]=-2139062144,p[n+129|0]=8421504,p[n+130|0]=32896,p[n+131|0]=128,p[n+132|0]=-2139062144,p[n+133|0]=8421504,p[n+134|0]=32896,p[n+135|0]=128,p[n+160|0]=-2139062144,p[n+161|0]=8421504,p[n+162|0]=32896,p[n+163|0]=128,p[n+164|0]=-2139062144,p[n+165|0]=8421504,p[n+166|0]=32896,p[n+167|0]=128,p[n+192|0]=-2139062144,p[n+193|0]=8421504,p[n+194|0]=32896,p[n+195|0]=128,p[n+196|0]=-2139062144,p[n+197|0]=8421504,p[n+198|0]=32896,p[n+199|0]=128,p[n+224|0]=-2139062144,p[n+225|0]=8421504,p[n+226|0]=32896,p[n+227|0]=128,p[n+228|0]=-2139062144,p[n+229|0]=8421504,p[n+230|0]=32896,p[n+231|0]=128,p[n+256|0]=-2139062144,p[n+257|0]=8421504,p[n+258|0]=32896,p[n+259|0]=128,p[n+260|0]=-2139062144,p[n+261|0]=8421504,p[n+262|0]=32896,p[n+263|0]=128,p[n+8|0]=-2139062144,p[n+9|0]=8421504,p[n+10|0]=32896,p[n+11|0]=128,p[n+12|0]=-2139062144,p[n+13|0]=8421504,p[n+14|0]=32896,p[n+15|0]=128,p[n+40|0]=-2139062144,p[n+41|0]=8421504,p[n+42|0]=32896,p[n+43|0]=128,p[n+44|0]=-2139062144,p[n+45|0]=8421504,p[n+46|0]=32896,p[n+47|0]=128,p[n+72|0]=-2139062144,p[n+73|0]=8421504,p[n+74|0]=32896,p[n+75|0]=128,p[n+76|0]=-2139062144,p[n+77|0]=8421504,p[n+78|0]=32896,p[n+79|0]=128,p[n+104|0]=-2139062144,p[n+105|0]=8421504,p[n+106|0]=32896,p[n+107|0]=128,p[n+108|0]=-2139062144,p[n+109|0]=8421504,p[n+110|0]=32896,p[n+111|0]=128,p[n+136|0]=-2139062144,p[n+137|0]=8421504,p[n+138|0]=32896,p[n+139|0]=128,p[n+140|0]=-2139062144,p[n+141|0]=8421504,p[n+142|0]=32896,p[n+143|0]=128,p[n+168|0]=-2139062144,p[n+169|0]=8421504,p[n+170|0]=32896,p[n+171|0]=128,p[n+172|0]=-2139062144,p[n+173|0]=8421504,p[n+174|0]=32896,p[n+175|0]=128,p[n+200|0]=-2139062144,p[n+201|0]=8421504,p[n+202|0]=32896,p[n+203|0]=128,p[n+204|0]=-2139062144,p[n+205|0]=8421504,p[n+206|0]=32896,p[n+207|0]=128,p[n+232|0]=-2139062144,p[n+233|0]=8421504,p[n+234|0]=32896,p[n+235|0]=128,p[n+236|0]=-2139062144,p[n+237|0]=8421504,p[n+238|0]=32896,p[n+239|0]=128,p[n+264|0]=-2139062144,p[n+265|0]=8421504,p[n+266|0]=32896,p[n+267|0]=128,p[n+268|0]=-2139062144,p[n+269|0]=8421504,p[n+270|0]=32896,p[n+271|0]=128,p[n+296|0]=-2139062144,p[n+297|0]=8421504,p[n+298|0]=32896,p[n+299|0]=128,p[n+300|0]=-2139062144,p[n+301|0]=8421504,p[n+302|0]=32896,p[n+303|0]=128,p[n+288|0]=-2139062144,p[n+289|0]=8421504,p[n+290|0]=32896,p[n+291|0]=128,p[n+292|0]=-2139062144,p[n+293|0]=8421504,p[n+294|0]=32896,p[n+295|0]=128,p[n+328|0]=-2139062144,p[n+329|0]=8421504,p[n+330|0]=32896,p[n+331|0]=128,p[n+332|0]=-2139062144,p[n+333|0]=8421504,p[n+334|0]=32896,p[n+335|0]=128,p[n+320|0]=-2139062144,p[n+321|0]=8421504,p[n+322|0]=32896,p[n+323|0]=128,p[n+324|0]=-2139062144,p[n+325|0]=8421504,p[n+326|0]=32896,p[n+327|0]=128,p[n+360|0]=-2139062144,p[n+361|0]=8421504,p[n+362|0]=32896,p[n+363|0]=128,p[n+364|0]=-2139062144,p[n+365|0]=8421504,p[n+366|0]=32896,p[n+367|0]=128,p[n+352|0]=-2139062144,p[n+353|0]=8421504,p[n+354|0]=32896,p[n+355|0]=128,p[n+356|0]=-2139062144,p[n+357|0]=8421504,p[n+358|0]=32896,p[n+359|0]=128,p[n+392|0]=-2139062144,p[n+393|0]=8421504,p[n+394|0]=32896,p[n+395|0]=128,p[n+396|0]=-2139062144,p[n+397|0]=8421504,p[n+398|0]=32896,p[n+399|0]=128,p[n+384|0]=-2139062144,p[n+385|0]=8421504,p[n+386|0]=32896,p[n+387|0]=128,p[n+388|0]=-2139062144,p[n+389|0]=8421504,p[n+390|0]=32896,p[n+391|0]=128,p[n+424|0]=-2139062144,p[n+425|0]=8421504,p[n+426|0]=32896,p[n+427|0]=128,p[n+428|0]=-2139062144,p[n+429|0]=8421504,p[n+430|0]=32896,p[n+431|0]=128,p[n+416|0]=-2139062144,p[n+417|0]=8421504,p[n+418|0]=32896,p[n+419|0]=128,p[n+420|0]=-2139062144,p[n+421|0]=8421504,p[n+422|0]=32896,p[n+423|0]=128,p[n+456|0]=-2139062144,p[n+457|0]=8421504,p[n+458|0]=32896,p[n+459|0]=128,p[n+460|0]=-2139062144,p[n+461|0]=8421504,p[n+462|0]=32896,p[n+463|0]=128,p[n+448|0]=-2139062144,p[n+449|0]=8421504,p[n+450|0]=32896,p[n+451|0]=128,p[n+452|0]=-2139062144,p[n+453|0]=8421504,p[n+454|0]=32896,p[n+455|0]=128,p[n+488|0]=-2139062144,p[n+489|0]=8421504,p[n+490|0]=32896,p[n+491|0]=128,p[n+492|0]=-2139062144,p[n+493|0]=8421504,p[n+494|0]=32896,p[n+495|0]=128,p[n+480|0]=-2139062144,p[n+481|0]=8421504,p[n+482|0]=32896,p[n+483|0]=128,p[n+484|0]=-2139062144,p[n+485|0]=8421504,p[n+486|0]=32896,p[n+487|0]=128}function Ue(n){n=n|0;var s=0,a=0,g=0,k=0,E=0,L=0;s=n,E=s+-32|0,g=E,k=F[g+4|0]|F[g+5|0]<<8|(F[g+6|0]<<16|F[g+7|0]<<24),n=F[g|0]|F[g+1|0]<<8|(F[g+2|0]<<16|F[g+3|0]<<24),a=n,p[s|0]=a,p[s+1|0]=a>>>8,p[s+2|0]=a>>>16,p[s+3|0]=a>>>24,p[s+4|0]=k,p[s+5|0]=k>>>8,p[s+6|0]=k>>>16,p[s+7|0]=k>>>24,p[s+32|0]=a,p[s+33|0]=a>>>8,p[s+34|0]=a>>>16,p[s+35|0]=a>>>24,p[s+36|0]=k,p[s+37|0]=k>>>8,p[s+38|0]=k>>>16,p[s+39|0]=k>>>24,p[s+64|0]=a,p[s+65|0]=a>>>8,p[s+66|0]=a>>>16,p[s+67|0]=a>>>24,p[s+68|0]=k,p[s+69|0]=k>>>8,p[s+70|0]=k>>>16,p[s+71|0]=k>>>24,p[s+96|0]=a,p[s+97|0]=a>>>8,p[s+98|0]=a>>>16,p[s+99|0]=a>>>24,p[s+100|0]=k,p[s+101|0]=k>>>8,p[s+102|0]=k>>>16,p[s+103|0]=k>>>24,p[s+128|0]=a,p[s+129|0]=a>>>8,p[s+130|0]=a>>>16,p[s+131|0]=a>>>24,p[s+132|0]=k,p[s+133|0]=k>>>8,p[s+134|0]=k>>>16,p[s+135|0]=k>>>24,p[s+160|0]=a,p[s+161|0]=a>>>8,p[s+162|0]=a>>>16,p[s+163|0]=a>>>24,p[s+164|0]=k,p[s+165|0]=k>>>8,p[s+166|0]=k>>>16,p[s+167|0]=k>>>24,p[s+192|0]=a,p[s+193|0]=a>>>8,p[s+194|0]=a>>>16,p[s+195|0]=a>>>24,p[s+196|0]=k,p[s+197|0]=k>>>8,p[s+198|0]=k>>>16,p[s+199|0]=k>>>24,p[s+224|0]=a,p[s+225|0]=a>>>8,p[s+226|0]=a>>>16,p[s+227|0]=a>>>24,p[s+228|0]=k,p[s+229|0]=k>>>8,p[s+230|0]=k>>>16,p[s+231|0]=k>>>24,k=g+8|0,g=F[k+4|0]|F[k+5|0]<<8|(F[k+6|0]<<16|F[k+7|0]<<24),n=F[k|0]|F[k+1|0]<<8|(F[k+2|0]<<16|F[k+3|0]<<24),a=n,p[s+8|0]=a,p[s+9|0]=a>>>8,p[s+10|0]=a>>>16,p[s+11|0]=a>>>24,p[s+12|0]=g,p[s+13|0]=g>>>8,p[s+14|0]=g>>>16,p[s+15|0]=g>>>24,p[s+40|0]=a,p[s+41|0]=a>>>8,p[s+42|0]=a>>>16,p[s+43|0]=a>>>24,p[s+44|0]=g,p[s+45|0]=g>>>8,p[s+46|0]=g>>>16,p[s+47|0]=g>>>24,p[s+72|0]=a,p[s+73|0]=a>>>8,p[s+74|0]=a>>>16,p[s+75|0]=a>>>24,p[s+76|0]=g,p[s+77|0]=g>>>8,p[s+78|0]=g>>>16,p[s+79|0]=g>>>24,p[s+104|0]=a,p[s+105|0]=a>>>8,p[s+106|0]=a>>>16,p[s+107|0]=a>>>24,p[s+108|0]=g,p[s+109|0]=g>>>8,p[s+110|0]=g>>>16,p[s+111|0]=g>>>24,p[s+136|0]=a,p[s+137|0]=a>>>8,p[s+138|0]=a>>>16,p[s+139|0]=a>>>24,p[s+140|0]=g,p[s+141|0]=g>>>8,p[s+142|0]=g>>>16,p[s+143|0]=g>>>24,p[s+168|0]=a,p[s+169|0]=a>>>8,p[s+170|0]=a>>>16,p[s+171|0]=a>>>24,p[s+172|0]=g,p[s+173|0]=g>>>8,p[s+174|0]=g>>>16,p[s+175|0]=g>>>24,p[s+200|0]=a,p[s+201|0]=a>>>8,p[s+202|0]=a>>>16,p[s+203|0]=a>>>24,p[s+204|0]=g,p[s+205|0]=g>>>8,p[s+206|0]=g>>>16,p[s+207|0]=g>>>24,p[s+232|0]=a,p[s+233|0]=a>>>8,p[s+234|0]=a>>>16,p[s+235|0]=a>>>24,p[s+236|0]=g,p[s+237|0]=g>>>8,p[s+238|0]=g>>>16,p[s+239|0]=g>>>24,g=F[k+4|0]|F[k+5|0]<<8|(F[k+6|0]<<16|F[k+7|0]<<24),L=g,a=F[k|0]|F[k+1|0]<<8|(F[k+2|0]<<16|F[k+3|0]<<24),p[s+264|0]=a,p[s+265|0]=a>>>8,p[s+266|0]=a>>>16,p[s+267|0]=a>>>24,p[s+268|0]=g,p[s+269|0]=g>>>8,p[s+270|0]=g>>>16,p[s+271|0]=g>>>24,g=F[E+4|0]|F[E+5|0]<<8|(F[E+6|0]<<16|F[E+7|0]<<24),n=F[E|0]|F[E+1|0]<<8|(F[E+2|0]<<16|F[E+3|0]<<24),E=n,p[s+256|0]=E,p[s+257|0]=E>>>8,p[s+258|0]=E>>>16,p[s+259|0]=E>>>24,p[s+260|0]=g,p[s+261|0]=g>>>8,p[s+262|0]=g>>>16,p[s+263|0]=g>>>24,p[s+296|0]=a,p[s+297|0]=a>>>8,p[s+298|0]=a>>>16,p[s+299|0]=a>>>24,p[s+300|0]=L,p[s+301|0]=L>>>8,p[s+302|0]=L>>>16,p[s+303|0]=L>>>24,p[s+288|0]=E,p[s+289|0]=E>>>8,p[s+290|0]=E>>>16,p[s+291|0]=E>>>24,p[s+292|0]=g,p[s+293|0]=g>>>8,p[s+294|0]=g>>>16,p[s+295|0]=g>>>24,p[s+328|0]=a,p[s+329|0]=a>>>8,p[s+330|0]=a>>>16,p[s+331|0]=a>>>24,p[s+332|0]=L,p[s+333|0]=L>>>8,p[s+334|0]=L>>>16,p[s+335|0]=L>>>24,p[s+320|0]=E,p[s+321|0]=E>>>8,p[s+322|0]=E>>>16,p[s+323|0]=E>>>24,p[s+324|0]=g,p[s+325|0]=g>>>8,p[s+326|0]=g>>>16,p[s+327|0]=g>>>24,p[s+360|0]=a,p[s+361|0]=a>>>8,p[s+362|0]=a>>>16,p[s+363|0]=a>>>24,p[s+364|0]=L,p[s+365|0]=L>>>8,p[s+366|0]=L>>>16,p[s+367|0]=L>>>24,p[s+352|0]=E,p[s+353|0]=E>>>8,p[s+354|0]=E>>>16,p[s+355|0]=E>>>24,p[s+356|0]=g,p[s+357|0]=g>>>8,p[s+358|0]=g>>>16,p[s+359|0]=g>>>24,p[s+384|0]=E,p[s+385|0]=E>>>8,p[s+386|0]=E>>>16,p[s+387|0]=E>>>24,p[s+388|0]=g,p[s+389|0]=g>>>8,p[s+390|0]=g>>>16,p[s+391|0]=g>>>24,p[s+392|0]=a,p[s+393|0]=a>>>8,p[s+394|0]=a>>>16,p[s+395|0]=a>>>24,p[s+396|0]=L,p[s+397|0]=L>>>8,p[s+398|0]=L>>>16,p[s+399|0]=L>>>24,p[s+424|0]=a,p[s+425|0]=a>>>8,p[s+426|0]=a>>>16,p[s+427|0]=a>>>24,p[s+428|0]=L,p[s+429|0]=L>>>8,p[s+430|0]=L>>>16,p[s+431|0]=L>>>24,p[s+416|0]=E,p[s+417|0]=E>>>8,p[s+418|0]=E>>>16,p[s+419|0]=E>>>24,p[s+420|0]=g,p[s+421|0]=g>>>8,p[s+422|0]=g>>>16,p[s+423|0]=g>>>24,p[s+448|0]=E,p[s+449|0]=E>>>8,p[s+450|0]=E>>>16,p[s+451|0]=E>>>24,p[s+452|0]=g,p[s+453|0]=g>>>8,p[s+454|0]=g>>>16,p[s+455|0]=g>>>24,p[s+456|0]=a,p[s+457|0]=a>>>8,p[s+458|0]=a>>>16,p[s+459|0]=a>>>24,p[s+460|0]=L,p[s+461|0]=L>>>8,p[s+462|0]=L>>>16,p[s+463|0]=L>>>24,p[s+488|0]=a,p[s+489|0]=a>>>8,p[s+490|0]=a>>>16,p[s+491|0]=a>>>24,p[s+492|0]=L,p[s+493|0]=L>>>8,p[s+494|0]=L>>>16,p[s+495|0]=L>>>24,p[s+480|0]=E,p[s+481|0]=E>>>8,p[s+482|0]=E>>>16,p[s+483|0]=E>>>24,p[s+484|0]=g,p[s+485|0]=g>>>8,p[s+486|0]=g>>>16,p[s+487|0]=g>>>24}function kt(n,s,a,g,k){var E=0,L=0,R=0,G=0,H=0,te=0,ce=0,Ae=0,Ne=0,Ze=0,mt=0,Pt=0,Ft=0,ni=0,ci=0;E=Un-80|0,Un=E,c[E+76>>2]=s,ci=E+55|0,Pt=E+56|0,s=0;e:{t:for(;;){i:{if((Ne|0)<0)break i;if((s|0)>(2147483647-Ne|0)){c[2865]=61,Ne=-1;break i}Ne=s+Ne|0}i:{n:{o:{if(G=c[E+76>>2],s=G,L=F[s|0],L)for(;;){l:{L=L&255;r:{if(!L){L=s;break r}if((L|0)!=37)break l;for(L=s;;){if(F[s+1|0]!=37)break r;if(R=s+2|0,c[E+76>>2]=R,L=L+1|0,H=F[s+2|0],s=R,(H|0)!=37)break}}if(s=L-G|0,n&&Yh(n,G,s),s)continue t;L=E,R=!Pf(p[c[E+76>>2]+1|0]),s=c[E+76>>2];r:{if(!(R|F[s+2|0]!=36)){mt=p[s+1|0]+-48|0,Ft=1,s=s+3|0;break r}mt=-1,s=s+1|0}c[L+76>>2]=s,te=0,Ze=p[s|0],R=Ze+-32|0;r:{if(R>>>0>31){L=s;break r}if(L=s,R=1<<R,!(R&75913))break r;for(;;){if(L=s+1|0,c[E+76>>2]=L,te=R|te,Ze=p[s+1|0],R=Ze+-32|0,R>>>0>=32)break r;if(s=L,R=1<<R,!(R&75913))break}}r:{if((Ze|0)==42){R=E;u:{s:{if(!Pf(p[L+1|0])||(s=c[E+76>>2],F[s+2|0]!=36))break s;c[((p[s+1|0]<<2)+k|0)+-192>>2]=10,ce=c[((p[s+1|0]<<3)+g|0)+-384>>2],Ft=1,s=s+3|0;break u}if(Ft)break o;Ft=0,ce=0,n&&(s=c[a>>2],c[a>>2]=s+4,ce=c[s>>2]),s=c[E+76>>2]+1|0}if(c[R+76>>2]=s,(ce|0)>-1)break r;ce=0-ce|0,te=te|8192;break r}if(ce=Js(E+76|0),(ce|0)<0)break o;s=c[E+76>>2]}H=-1;r:{if(F[s|0]!=46)break r;if(F[s+1|0]==42){u:{if(!Pf(p[s+2|0])||(s=c[E+76>>2],F[s+3|0]!=36))break u;c[((p[s+2|0]<<2)+k|0)+-192>>2]=10,H=c[((p[s+2|0]<<3)+g|0)+-384>>2],s=s+4|0,c[E+76>>2]=s;break r}if(Ft)break o;n?(s=c[a>>2],c[a>>2]=s+4,H=c[s>>2]):H=0,s=c[E+76>>2]+2|0,c[E+76>>2]=s;break r}c[E+76>>2]=s+1,H=Js(E+76|0),s=c[E+76>>2]}for(L=0;;){if(ni=L,Ae=-1,p[s|0]+-65>>>0>57)break e;if(Ze=s+1|0,c[E+76>>2]=Ze,L=p[s|0],s=Ze,L=F[(L+re(ni,58)|0)+9599|0],!(L+-1>>>0<8))break}r:{u:{if((L|0)!=19){if(!L)break e;if((mt|0)>=0){c[(mt<<2)+k>>2]=L,s=(mt<<3)+g|0,L=c[s+4>>2],c[E+64>>2]=c[s>>2],c[E+68>>2]=L;break u}if(!n)break i;xu(E- -64|0,L,a),Ze=c[E+76>>2];break r}if((mt|0)>-1)break e}if(s=0,!n)continue t}R=te&-65537,L=te&8192?R:te,Ae=0,mt=9644,te=Pt;r:{u:{s:{a:{f:{c:{h:{d:{p:{m:{_:{v:{b:{g:{w:{y:switch(s=p[Ze+-1|0],s=ni&&(s&15)==3?s&-33:s,s+-88|0){case 11:break r;case 9:case 13:case 14:case 15:break u;case 27:break h;case 12:case 17:break m;case 23:break _;case 0:case 32:break v;case 24:break b;case 22:break g;case 29:break w;case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 10:case 16:case 18:case 19:case 20:case 21:case 25:case 26:case 28:case 30:case 31:break n;default:break y}y:switch(s+-65|0){case 0:case 4:case 5:case 6:break u;case 2:break f;case 1:case 3:break n;default:break y}if((s|0)==83)break c;break n}s=c[E+64>>2],G=c[E+68>>2],mt=9644;break p}s=0;g:switch(ni&255){case 0:c[c[E+64>>2]>>2]=Ne;continue t;case 1:c[c[E+64>>2]>>2]=Ne;continue t;case 2:L=c[E+64>>2],c[L>>2]=Ne,c[L+4>>2]=Ne>>31;continue t;case 3:Di[c[E+64>>2]>>1]=Ne;continue t;case 4:p[c[E+64>>2]]=Ne;continue t;case 6:c[c[E+64>>2]>>2]=Ne;continue t;case 7:break g;default:continue t}L=c[E+64>>2],c[L>>2]=Ne,c[L+4>>2]=Ne>>31;continue t}H=H>>>0>8?H:8,L=L|8,s=120}if(G=mh(c[E+64>>2],c[E+68>>2],Pt,s&32),!(L&8)|!(c[E+64>>2]|c[E+68>>2]))break d;mt=(s>>>4|0)+9644|0,Ae=2;break d}if(G=u0(c[E+64>>2],c[E+68>>2],Pt),!(L&8))break d;s=Pt-G|0,H=(H|0)>(s|0)?H:s+1|0;break d}if(R=c[E+68>>2],G=R,s=c[E+64>>2],(R|0)<-1||(R|0)<=-1){G=0-(G+(0<s>>>0)|0)|0,s=0-s|0,c[E+64>>2]=s,c[E+68>>2]=G,Ae=1,mt=9644;break p}if(L&2048){Ae=1,mt=9645;break p}Ae=L&1,mt=Ae?9646:9644}G=Ki(s,G,Pt)}if(L=(H|0)>-1?L&-65537:L,s=c[E+64>>2],R=c[E+68>>2],!(!!(s|R)|H)){H=0,G=Pt;break n}s=!(s|R)+(Pt-G|0)|0,H=(H|0)>(s|0)?H:s;break n}s=c[E+64>>2],G=s||9654,s=Ai(G,H),te=s||H+G|0,L=R,H=s?s-G|0:H;break n}if(R=c[E+64>>2],H)break a;s=0,zo(n,32,ce,0,L);break s}c[E+12>>2]=0,c[E+8>>2]=c[E+64>>2],c[E+64>>2]=E+8,H=-1,R=E+8|0}s=0;a:{for(;;){if(G=c[R>>2],!G)break a;if(G=pp(E+4|0,G),te=(G|0)<0,!(te|G>>>0>H-s>>>0)){if(R=R+4|0,s=s+G|0,H>>>0>s>>>0)continue;break a}break}if(Ae=-1,te)break e}if(zo(n,32,ce,s,L),!s){s=0;break s}for(Ze=0,R=c[E+64>>2];;){if(G=c[R>>2],!G||(G=pp(E+4|0,G),Ze=G+Ze|0,(Ze|0)>(s|0)))break s;if(Yh(n,E+4|0,G),R=R+4|0,!(Ze>>>0<s>>>0))break}}zo(n,32,ce,s,L^8192),s=(ce|0)>(s|0)?ce:s;continue t}s=ft[0](n,wo[E+64>>3],ce,H,L,s)|0;continue t}p[E+55|0]=c[E+64>>2],H=1,G=ci,L=R;break n}R=s+1|0,c[E+76>>2]=R,L=F[s+1|0],s=R}if(Ae=Ne,n)break e;if(!Ft)break i;for(s=1;;){if(n=c[(s<<2)+k>>2],n){if(xu((s<<3)+g|0,n,a),Ae=1,s=s+1|0,(s|0)!=10)continue;break e}break}if(Ae=1,s>>>0>=10)break e;for(;;){if(c[(s<<2)+k>>2])break o;if(s=s+1|0,(s|0)==10)break}break e}Ae=-1;break e}te=te-G|0,H=(H|0)<(te|0)?te:H,R=H+Ae|0,s=(ce|0)<(R|0)?R:ce,zo(n,32,s,R,L),Yh(n,mt,Ae),zo(n,48,s,R,L^65536),zo(n,48,H,te,0),Yh(n,G,te),zo(n,32,s,R,L^8192);continue}break}Ae=0}return Un=E+80|0,Ae}function Xt(n){n=n|0;var s=0,a=0;s=n,n=_r((F[s+-17|0]+(F[s+-18|0]+(F[s+-19|0]+(F[s+-20|0]+(F[s+-21|0]+(F[s+-22|0]+(F[s+-23|0]+(F[s+-24|0]+(F[s+-25|0]+(F[s+-26|0]+(F[s+-27|0]+(F[s+-28|0]+(F[s+-29|0]+(F[s+-30|0]+(F[s+-32|0]+F[s+-31|0]|0)|0)|0)|0)|0)|0)|0)|0)|0)|0)|0)|0)|0)|0)|0)+8>>>4&255,0,16843009,16843009),p[s|0]=n,p[s+1|0]=n>>>8,p[s+2|0]=n>>>16,p[s+3|0]=n>>>24,a=Bn,p[s+4|0]=a,p[s+5|0]=a>>>8,p[s+6|0]=a>>>16,p[s+7|0]=a>>>24,p[s+8|0]=n,p[s+9|0]=n>>>8,p[s+10|0]=n>>>16,p[s+11|0]=n>>>24,p[s+12|0]=a,p[s+13|0]=a>>>8,p[s+14|0]=a>>>16,p[s+15|0]=a>>>24,p[s+40|0]=n,p[s+41|0]=n>>>8,p[s+42|0]=n>>>16,p[s+43|0]=n>>>24,p[s+44|0]=a,p[s+45|0]=a>>>8,p[s+46|0]=a>>>16,p[s+47|0]=a>>>24,p[s+32|0]=n,p[s+33|0]=n>>>8,p[s+34|0]=n>>>16,p[s+35|0]=n>>>24,p[s+36|0]=a,p[s+37|0]=a>>>8,p[s+38|0]=a>>>16,p[s+39|0]=a>>>24,p[s+72|0]=n,p[s+73|0]=n>>>8,p[s+74|0]=n>>>16,p[s+75|0]=n>>>24,p[s+76|0]=a,p[s+77|0]=a>>>8,p[s+78|0]=a>>>16,p[s+79|0]=a>>>24,p[s+64|0]=n,p[s+65|0]=n>>>8,p[s+66|0]=n>>>16,p[s+67|0]=n>>>24,p[s+68|0]=a,p[s+69|0]=a>>>8,p[s+70|0]=a>>>16,p[s+71|0]=a>>>24,p[s+104|0]=n,p[s+105|0]=n>>>8,p[s+106|0]=n>>>16,p[s+107|0]=n>>>24,p[s+108|0]=a,p[s+109|0]=a>>>8,p[s+110|0]=a>>>16,p[s+111|0]=a>>>24,p[s+96|0]=n,p[s+97|0]=n>>>8,p[s+98|0]=n>>>16,p[s+99|0]=n>>>24,p[s+100|0]=a,p[s+101|0]=a>>>8,p[s+102|0]=a>>>16,p[s+103|0]=a>>>24,p[s+136|0]=n,p[s+137|0]=n>>>8,p[s+138|0]=n>>>16,p[s+139|0]=n>>>24,p[s+140|0]=a,p[s+141|0]=a>>>8,p[s+142|0]=a>>>16,p[s+143|0]=a>>>24,p[s+128|0]=n,p[s+129|0]=n>>>8,p[s+130|0]=n>>>16,p[s+131|0]=n>>>24,p[s+132|0]=a,p[s+133|0]=a>>>8,p[s+134|0]=a>>>16,p[s+135|0]=a>>>24,p[s+168|0]=n,p[s+169|0]=n>>>8,p[s+170|0]=n>>>16,p[s+171|0]=n>>>24,p[s+172|0]=a,p[s+173|0]=a>>>8,p[s+174|0]=a>>>16,p[s+175|0]=a>>>24,p[s+160|0]=n,p[s+161|0]=n>>>8,p[s+162|0]=n>>>16,p[s+163|0]=n>>>24,p[s+164|0]=a,p[s+165|0]=a>>>8,p[s+166|0]=a>>>16,p[s+167|0]=a>>>24,p[s+200|0]=n,p[s+201|0]=n>>>8,p[s+202|0]=n>>>16,p[s+203|0]=n>>>24,p[s+204|0]=a,p[s+205|0]=a>>>8,p[s+206|0]=a>>>16,p[s+207|0]=a>>>24,p[s+192|0]=n,p[s+193|0]=n>>>8,p[s+194|0]=n>>>16,p[s+195|0]=n>>>24,p[s+196|0]=a,p[s+197|0]=a>>>8,p[s+198|0]=a>>>16,p[s+199|0]=a>>>24,p[s+232|0]=n,p[s+233|0]=n>>>8,p[s+234|0]=n>>>16,p[s+235|0]=n>>>24,p[s+236|0]=a,p[s+237|0]=a>>>8,p[s+238|0]=a>>>16,p[s+239|0]=a>>>24,p[s+224|0]=n,p[s+225|0]=n>>>8,p[s+226|0]=n>>>16,p[s+227|0]=n>>>24,p[s+228|0]=a,p[s+229|0]=a>>>8,p[s+230|0]=a>>>16,p[s+231|0]=a>>>24,p[s+264|0]=n,p[s+265|0]=n>>>8,p[s+266|0]=n>>>16,p[s+267|0]=n>>>24,p[s+268|0]=a,p[s+269|0]=a>>>8,p[s+270|0]=a>>>16,p[s+271|0]=a>>>24,p[s+256|0]=n,p[s+257|0]=n>>>8,p[s+258|0]=n>>>16,p[s+259|0]=n>>>24,p[s+260|0]=a,p[s+261|0]=a>>>8,p[s+262|0]=a>>>16,p[s+263|0]=a>>>24,p[s+296|0]=n,p[s+297|0]=n>>>8,p[s+298|0]=n>>>16,p[s+299|0]=n>>>24,p[s+300|0]=a,p[s+301|0]=a>>>8,p[s+302|0]=a>>>16,p[s+303|0]=a>>>24,p[s+288|0]=n,p[s+289|0]=n>>>8,p[s+290|0]=n>>>16,p[s+291|0]=n>>>24,p[s+292|0]=a,p[s+293|0]=a>>>8,p[s+294|0]=a>>>16,p[s+295|0]=a>>>24,p[s+328|0]=n,p[s+329|0]=n>>>8,p[s+330|0]=n>>>16,p[s+331|0]=n>>>24,p[s+332|0]=a,p[s+333|0]=a>>>8,p[s+334|0]=a>>>16,p[s+335|0]=a>>>24,p[s+320|0]=n,p[s+321|0]=n>>>8,p[s+322|0]=n>>>16,p[s+323|0]=n>>>24,p[s+324|0]=a,p[s+325|0]=a>>>8,p[s+326|0]=a>>>16,p[s+327|0]=a>>>24,p[s+360|0]=n,p[s+361|0]=n>>>8,p[s+362|0]=n>>>16,p[s+363|0]=n>>>24,p[s+364|0]=a,p[s+365|0]=a>>>8,p[s+366|0]=a>>>16,p[s+367|0]=a>>>24,p[s+352|0]=n,p[s+353|0]=n>>>8,p[s+354|0]=n>>>16,p[s+355|0]=n>>>24,p[s+356|0]=a,p[s+357|0]=a>>>8,p[s+358|0]=a>>>16,p[s+359|0]=a>>>24,p[s+392|0]=n,p[s+393|0]=n>>>8,p[s+394|0]=n>>>16,p[s+395|0]=n>>>24,p[s+396|0]=a,p[s+397|0]=a>>>8,p[s+398|0]=a>>>16,p[s+399|0]=a>>>24,p[s+384|0]=n,p[s+385|0]=n>>>8,p[s+386|0]=n>>>16,p[s+387|0]=n>>>24,p[s+388|0]=a,p[s+389|0]=a>>>8,p[s+390|0]=a>>>16,p[s+391|0]=a>>>24,p[s+424|0]=n,p[s+425|0]=n>>>8,p[s+426|0]=n>>>16,p[s+427|0]=n>>>24,p[s+428|0]=a,p[s+429|0]=a>>>8,p[s+430|0]=a>>>16,p[s+431|0]=a>>>24,p[s+416|0]=n,p[s+417|0]=n>>>8,p[s+418|0]=n>>>16,p[s+419|0]=n>>>24,p[s+420|0]=a,p[s+421|0]=a>>>8,p[s+422|0]=a>>>16,p[s+423|0]=a>>>24,p[s+456|0]=n,p[s+457|0]=n>>>8,p[s+458|0]=n>>>16,p[s+459|0]=n>>>24,p[s+460|0]=a,p[s+461|0]=a>>>8,p[s+462|0]=a>>>16,p[s+463|0]=a>>>24,p[s+448|0]=n,p[s+449|0]=n>>>8,p[s+450|0]=n>>>16,p[s+451|0]=n>>>24,p[s+452|0]=a,p[s+453|0]=a>>>8,p[s+454|0]=a>>>16,p[s+455|0]=a>>>24,p[s+488|0]=n,p[s+489|0]=n>>>8,p[s+490|0]=n>>>16,p[s+491|0]=n>>>24,p[s+492|0]=a,p[s+493|0]=a>>>8,p[s+494|0]=a>>>16,p[s+495|0]=a>>>24,p[s+480|0]=n,p[s+481|0]=n>>>8,p[s+482|0]=n>>>16,p[s+483|0]=n>>>24,p[s+484|0]=a,p[s+485|0]=a>>>8,p[s+486|0]=a>>>16,p[s+487|0]=a>>>24}function hi(n){n=n|0;var s=0,a=0;s=n,n=_r((F[s+479|0]+(F[s+447|0]+(F[s+415|0]+(F[s+383|0]+(F[s+351|0]+(F[s+319|0]+(F[s+287|0]+(F[s+255|0]+(F[s+223|0]+(F[s+191|0]+(F[s+159|0]+(F[s+127|0]+(F[s+95|0]+(F[s+63|0]+(F[s+-1|0]+F[s+31|0]|0)|0)|0)|0)|0)|0)|0)|0)|0)|0)|0)|0)|0)|0)|0)+8>>>4&255,0,16843009,16843009),p[s|0]=n,p[s+1|0]=n>>>8,p[s+2|0]=n>>>16,p[s+3|0]=n>>>24,a=Bn,p[s+4|0]=a,p[s+5|0]=a>>>8,p[s+6|0]=a>>>16,p[s+7|0]=a>>>24,p[s+8|0]=n,p[s+9|0]=n>>>8,p[s+10|0]=n>>>16,p[s+11|0]=n>>>24,p[s+12|0]=a,p[s+13|0]=a>>>8,p[s+14|0]=a>>>16,p[s+15|0]=a>>>24,p[s+40|0]=n,p[s+41|0]=n>>>8,p[s+42|0]=n>>>16,p[s+43|0]=n>>>24,p[s+44|0]=a,p[s+45|0]=a>>>8,p[s+46|0]=a>>>16,p[s+47|0]=a>>>24,p[s+32|0]=n,p[s+33|0]=n>>>8,p[s+34|0]=n>>>16,p[s+35|0]=n>>>24,p[s+36|0]=a,p[s+37|0]=a>>>8,p[s+38|0]=a>>>16,p[s+39|0]=a>>>24,p[s+72|0]=n,p[s+73|0]=n>>>8,p[s+74|0]=n>>>16,p[s+75|0]=n>>>24,p[s+76|0]=a,p[s+77|0]=a>>>8,p[s+78|0]=a>>>16,p[s+79|0]=a>>>24,p[s+64|0]=n,p[s+65|0]=n>>>8,p[s+66|0]=n>>>16,p[s+67|0]=n>>>24,p[s+68|0]=a,p[s+69|0]=a>>>8,p[s+70|0]=a>>>16,p[s+71|0]=a>>>24,p[s+104|0]=n,p[s+105|0]=n>>>8,p[s+106|0]=n>>>16,p[s+107|0]=n>>>24,p[s+108|0]=a,p[s+109|0]=a>>>8,p[s+110|0]=a>>>16,p[s+111|0]=a>>>24,p[s+96|0]=n,p[s+97|0]=n>>>8,p[s+98|0]=n>>>16,p[s+99|0]=n>>>24,p[s+100|0]=a,p[s+101|0]=a>>>8,p[s+102|0]=a>>>16,p[s+103|0]=a>>>24,p[s+136|0]=n,p[s+137|0]=n>>>8,p[s+138|0]=n>>>16,p[s+139|0]=n>>>24,p[s+140|0]=a,p[s+141|0]=a>>>8,p[s+142|0]=a>>>16,p[s+143|0]=a>>>24,p[s+128|0]=n,p[s+129|0]=n>>>8,p[s+130|0]=n>>>16,p[s+131|0]=n>>>24,p[s+132|0]=a,p[s+133|0]=a>>>8,p[s+134|0]=a>>>16,p[s+135|0]=a>>>24,p[s+168|0]=n,p[s+169|0]=n>>>8,p[s+170|0]=n>>>16,p[s+171|0]=n>>>24,p[s+172|0]=a,p[s+173|0]=a>>>8,p[s+174|0]=a>>>16,p[s+175|0]=a>>>24,p[s+160|0]=n,p[s+161|0]=n>>>8,p[s+162|0]=n>>>16,p[s+163|0]=n>>>24,p[s+164|0]=a,p[s+165|0]=a>>>8,p[s+166|0]=a>>>16,p[s+167|0]=a>>>24,p[s+200|0]=n,p[s+201|0]=n>>>8,p[s+202|0]=n>>>16,p[s+203|0]=n>>>24,p[s+204|0]=a,p[s+205|0]=a>>>8,p[s+206|0]=a>>>16,p[s+207|0]=a>>>24,p[s+192|0]=n,p[s+193|0]=n>>>8,p[s+194|0]=n>>>16,p[s+195|0]=n>>>24,p[s+196|0]=a,p[s+197|0]=a>>>8,p[s+198|0]=a>>>16,p[s+199|0]=a>>>24,p[s+232|0]=n,p[s+233|0]=n>>>8,p[s+234|0]=n>>>16,p[s+235|0]=n>>>24,p[s+236|0]=a,p[s+237|0]=a>>>8,p[s+238|0]=a>>>16,p[s+239|0]=a>>>24,p[s+224|0]=n,p[s+225|0]=n>>>8,p[s+226|0]=n>>>16,p[s+227|0]=n>>>24,p[s+228|0]=a,p[s+229|0]=a>>>8,p[s+230|0]=a>>>16,p[s+231|0]=a>>>24,p[s+264|0]=n,p[s+265|0]=n>>>8,p[s+266|0]=n>>>16,p[s+267|0]=n>>>24,p[s+268|0]=a,p[s+269|0]=a>>>8,p[s+270|0]=a>>>16,p[s+271|0]=a>>>24,p[s+256|0]=n,p[s+257|0]=n>>>8,p[s+258|0]=n>>>16,p[s+259|0]=n>>>24,p[s+260|0]=a,p[s+261|0]=a>>>8,p[s+262|0]=a>>>16,p[s+263|0]=a>>>24,p[s+296|0]=n,p[s+297|0]=n>>>8,p[s+298|0]=n>>>16,p[s+299|0]=n>>>24,p[s+300|0]=a,p[s+301|0]=a>>>8,p[s+302|0]=a>>>16,p[s+303|0]=a>>>24,p[s+288|0]=n,p[s+289|0]=n>>>8,p[s+290|0]=n>>>16,p[s+291|0]=n>>>24,p[s+292|0]=a,p[s+293|0]=a>>>8,p[s+294|0]=a>>>16,p[s+295|0]=a>>>24,p[s+328|0]=n,p[s+329|0]=n>>>8,p[s+330|0]=n>>>16,p[s+331|0]=n>>>24,p[s+332|0]=a,p[s+333|0]=a>>>8,p[s+334|0]=a>>>16,p[s+335|0]=a>>>24,p[s+320|0]=n,p[s+321|0]=n>>>8,p[s+322|0]=n>>>16,p[s+323|0]=n>>>24,p[s+324|0]=a,p[s+325|0]=a>>>8,p[s+326|0]=a>>>16,p[s+327|0]=a>>>24,p[s+360|0]=n,p[s+361|0]=n>>>8,p[s+362|0]=n>>>16,p[s+363|0]=n>>>24,p[s+364|0]=a,p[s+365|0]=a>>>8,p[s+366|0]=a>>>16,p[s+367|0]=a>>>24,p[s+352|0]=n,p[s+353|0]=n>>>8,p[s+354|0]=n>>>16,p[s+355|0]=n>>>24,p[s+356|0]=a,p[s+357|0]=a>>>8,p[s+358|0]=a>>>16,p[s+359|0]=a>>>24,p[s+392|0]=n,p[s+393|0]=n>>>8,p[s+394|0]=n>>>16,p[s+395|0]=n>>>24,p[s+396|0]=a,p[s+397|0]=a>>>8,p[s+398|0]=a>>>16,p[s+399|0]=a>>>24,p[s+384|0]=n,p[s+385|0]=n>>>8,p[s+386|0]=n>>>16,p[s+387|0]=n>>>24,p[s+388|0]=a,p[s+389|0]=a>>>8,p[s+390|0]=a>>>16,p[s+391|0]=a>>>24,p[s+424|0]=n,p[s+425|0]=n>>>8,p[s+426|0]=n>>>16,p[s+427|0]=n>>>24,p[s+428|0]=a,p[s+429|0]=a>>>8,p[s+430|0]=a>>>16,p[s+431|0]=a>>>24,p[s+416|0]=n,p[s+417|0]=n>>>8,p[s+418|0]=n>>>16,p[s+419|0]=n>>>24,p[s+420|0]=a,p[s+421|0]=a>>>8,p[s+422|0]=a>>>16,p[s+423|0]=a>>>24,p[s+456|0]=n,p[s+457|0]=n>>>8,p[s+458|0]=n>>>16,p[s+459|0]=n>>>24,p[s+460|0]=a,p[s+461|0]=a>>>8,p[s+462|0]=a>>>16,p[s+463|0]=a>>>24,p[s+448|0]=n,p[s+449|0]=n>>>8,p[s+450|0]=n>>>16,p[s+451|0]=n>>>24,p[s+452|0]=a,p[s+453|0]=a>>>8,p[s+454|0]=a>>>16,p[s+455|0]=a>>>24,p[s+488|0]=n,p[s+489|0]=n>>>8,p[s+490|0]=n>>>16,p[s+491|0]=n>>>24,p[s+492|0]=a,p[s+493|0]=a>>>8,p[s+494|0]=a>>>16,p[s+495|0]=a>>>24,p[s+480|0]=n,p[s+481|0]=n>>>8,p[s+482|0]=n>>>16,p[s+483|0]=n>>>24,p[s+484|0]=a,p[s+485|0]=a>>>8,p[s+486|0]=a>>>16,p[s+487|0]=a>>>24}function Zi(n){n=n|0;var s=0,a=0;for(a=16;a=F[(n+s|0)+-32|0]+(F[((s<<5)+n|0)+-1|0]+a|0)|0,s=s+1|0,(s|0)!=16;);s=n,n=_r(a>>>5&255,0,16843009,16843009),a=n,p[s+8|0]=a,p[s+9|0]=a>>>8,p[s+10|0]=a>>>16,p[s+11|0]=a>>>24,n=Bn,p[s+12|0]=n,p[s+13|0]=n>>>8,p[s+14|0]=n>>>16,p[s+15|0]=n>>>24,p[s|0]=a,p[s+1|0]=a>>>8,p[s+2|0]=a>>>16,p[s+3|0]=a>>>24,p[s+4|0]=n,p[s+5|0]=n>>>8,p[s+6|0]=n>>>16,p[s+7|0]=n>>>24,p[s+32|0]=a,p[s+33|0]=a>>>8,p[s+34|0]=a>>>16,p[s+35|0]=a>>>24,p[s+36|0]=n,p[s+37|0]=n>>>8,p[s+38|0]=n>>>16,p[s+39|0]=n>>>24,p[s+40|0]=a,p[s+41|0]=a>>>8,p[s+42|0]=a>>>16,p[s+43|0]=a>>>24,p[s+44|0]=n,p[s+45|0]=n>>>8,p[s+46|0]=n>>>16,p[s+47|0]=n>>>24,p[s+64|0]=a,p[s+65|0]=a>>>8,p[s+66|0]=a>>>16,p[s+67|0]=a>>>24,p[s+68|0]=n,p[s+69|0]=n>>>8,p[s+70|0]=n>>>16,p[s+71|0]=n>>>24,p[s+72|0]=a,p[s+73|0]=a>>>8,p[s+74|0]=a>>>16,p[s+75|0]=a>>>24,p[s+76|0]=n,p[s+77|0]=n>>>8,p[s+78|0]=n>>>16,p[s+79|0]=n>>>24,p[s+96|0]=a,p[s+97|0]=a>>>8,p[s+98|0]=a>>>16,p[s+99|0]=a>>>24,p[s+100|0]=n,p[s+101|0]=n>>>8,p[s+102|0]=n>>>16,p[s+103|0]=n>>>24,p[s+104|0]=a,p[s+105|0]=a>>>8,p[s+106|0]=a>>>16,p[s+107|0]=a>>>24,p[s+108|0]=n,p[s+109|0]=n>>>8,p[s+110|0]=n>>>16,p[s+111|0]=n>>>24,p[s+128|0]=a,p[s+129|0]=a>>>8,p[s+130|0]=a>>>16,p[s+131|0]=a>>>24,p[s+132|0]=n,p[s+133|0]=n>>>8,p[s+134|0]=n>>>16,p[s+135|0]=n>>>24,p[s+136|0]=a,p[s+137|0]=a>>>8,p[s+138|0]=a>>>16,p[s+139|0]=a>>>24,p[s+140|0]=n,p[s+141|0]=n>>>8,p[s+142|0]=n>>>16,p[s+143|0]=n>>>24,p[s+160|0]=a,p[s+161|0]=a>>>8,p[s+162|0]=a>>>16,p[s+163|0]=a>>>24,p[s+164|0]=n,p[s+165|0]=n>>>8,p[s+166|0]=n>>>16,p[s+167|0]=n>>>24,p[s+168|0]=a,p[s+169|0]=a>>>8,p[s+170|0]=a>>>16,p[s+171|0]=a>>>24,p[s+172|0]=n,p[s+173|0]=n>>>8,p[s+174|0]=n>>>16,p[s+175|0]=n>>>24,p[s+192|0]=a,p[s+193|0]=a>>>8,p[s+194|0]=a>>>16,p[s+195|0]=a>>>24,p[s+196|0]=n,p[s+197|0]=n>>>8,p[s+198|0]=n>>>16,p[s+199|0]=n>>>24,p[s+200|0]=a,p[s+201|0]=a>>>8,p[s+202|0]=a>>>16,p[s+203|0]=a>>>24,p[s+204|0]=n,p[s+205|0]=n>>>8,p[s+206|0]=n>>>16,p[s+207|0]=n>>>24,p[s+232|0]=a,p[s+233|0]=a>>>8,p[s+234|0]=a>>>16,p[s+235|0]=a>>>24,p[s+236|0]=n,p[s+237|0]=n>>>8,p[s+238|0]=n>>>16,p[s+239|0]=n>>>24,p[s+224|0]=a,p[s+225|0]=a>>>8,p[s+226|0]=a>>>16,p[s+227|0]=a>>>24,p[s+228|0]=n,p[s+229|0]=n>>>8,p[s+230|0]=n>>>16,p[s+231|0]=n>>>24,p[s+264|0]=a,p[s+265|0]=a>>>8,p[s+266|0]=a>>>16,p[s+267|0]=a>>>24,p[s+268|0]=n,p[s+269|0]=n>>>8,p[s+270|0]=n>>>16,p[s+271|0]=n>>>24,p[s+256|0]=a,p[s+257|0]=a>>>8,p[s+258|0]=a>>>16,p[s+259|0]=a>>>24,p[s+260|0]=n,p[s+261|0]=n>>>8,p[s+262|0]=n>>>16,p[s+263|0]=n>>>24,p[s+296|0]=a,p[s+297|0]=a>>>8,p[s+298|0]=a>>>16,p[s+299|0]=a>>>24,p[s+300|0]=n,p[s+301|0]=n>>>8,p[s+302|0]=n>>>16,p[s+303|0]=n>>>24,p[s+288|0]=a,p[s+289|0]=a>>>8,p[s+290|0]=a>>>16,p[s+291|0]=a>>>24,p[s+292|0]=n,p[s+293|0]=n>>>8,p[s+294|0]=n>>>16,p[s+295|0]=n>>>24,p[s+328|0]=a,p[s+329|0]=a>>>8,p[s+330|0]=a>>>16,p[s+331|0]=a>>>24,p[s+332|0]=n,p[s+333|0]=n>>>8,p[s+334|0]=n>>>16,p[s+335|0]=n>>>24,p[s+320|0]=a,p[s+321|0]=a>>>8,p[s+322|0]=a>>>16,p[s+323|0]=a>>>24,p[s+324|0]=n,p[s+325|0]=n>>>8,p[s+326|0]=n>>>16,p[s+327|0]=n>>>24,p[s+360|0]=a,p[s+361|0]=a>>>8,p[s+362|0]=a>>>16,p[s+363|0]=a>>>24,p[s+364|0]=n,p[s+365|0]=n>>>8,p[s+366|0]=n>>>16,p[s+367|0]=n>>>24,p[s+352|0]=a,p[s+353|0]=a>>>8,p[s+354|0]=a>>>16,p[s+355|0]=a>>>24,p[s+356|0]=n,p[s+357|0]=n>>>8,p[s+358|0]=n>>>16,p[s+359|0]=n>>>24,p[s+392|0]=a,p[s+393|0]=a>>>8,p[s+394|0]=a>>>16,p[s+395|0]=a>>>24,p[s+396|0]=n,p[s+397|0]=n>>>8,p[s+398|0]=n>>>16,p[s+399|0]=n>>>24,p[s+384|0]=a,p[s+385|0]=a>>>8,p[s+386|0]=a>>>16,p[s+387|0]=a>>>24,p[s+388|0]=n,p[s+389|0]=n>>>8,p[s+390|0]=n>>>16,p[s+391|0]=n>>>24,p[s+424|0]=a,p[s+425|0]=a>>>8,p[s+426|0]=a>>>16,p[s+427|0]=a>>>24,p[s+428|0]=n,p[s+429|0]=n>>>8,p[s+430|0]=n>>>16,p[s+431|0]=n>>>24,p[s+416|0]=a,p[s+417|0]=a>>>8,p[s+418|0]=a>>>16,p[s+419|0]=a>>>24,p[s+420|0]=n,p[s+421|0]=n>>>8,p[s+422|0]=n>>>16,p[s+423|0]=n>>>24,p[s+456|0]=a,p[s+457|0]=a>>>8,p[s+458|0]=a>>>16,p[s+459|0]=a>>>24,p[s+460|0]=n,p[s+461|0]=n>>>8,p[s+462|0]=n>>>16,p[s+463|0]=n>>>24,p[s+448|0]=a,p[s+449|0]=a>>>8,p[s+450|0]=a>>>16,p[s+451|0]=a>>>24,p[s+452|0]=n,p[s+453|0]=n>>>8,p[s+454|0]=n>>>16,p[s+455|0]=n>>>24,p[s+488|0]=a,p[s+489|0]=a>>>8,p[s+490|0]=a>>>16,p[s+491|0]=a>>>24,p[s+492|0]=n,p[s+493|0]=n>>>8,p[s+494|0]=n>>>16,p[s+495|0]=n>>>24,p[s+480|0]=a,p[s+481|0]=a>>>8,p[s+482|0]=a>>>16,p[s+483|0]=a>>>24,p[s+484|0]=n,p[s+485|0]=n>>>8,p[s+486|0]=n>>>16,p[s+487|0]=n>>>24}function hn(n,s,a,g,k){var E=0,L=0,R=0,G=0,H=0,te=0,ce=0,Ae=0,Ne=0,Ze=0,mt=0,Pt=0,Ft=0,ni=0,ci=0,Mi=0,Si=0,Ji=0,sn=0,bn=0,ar=0,Tr=0,ys=0,wa=0,fl=0,Ku=0,Kh=0;ni=Un-16|0,Un=ni,mt=g+120|0,ce=g+24|0;e:{t:{i:{n:{o:{l:{r:{if(!a)break r;for(;;){if(!eo(ce,1))break r;if(E=c[g+176>>2],Ze=eo(ce,2),H=c[g+260>>2],R=1<<Ze,H&R)break l;c[g+260>>2]=R|H,E=re(E,20)+g|0,te=E+196|0,c[te>>2]=0,H=E+192|0,c[H>>2]=s,R=E+188|0,c[R>>2]=n,c[E+180>>2]=Ze,Ae=1,c[g+176>>2]=c[g+176>>2]+1;u:switch(Ze|0){case 0:case 1:if(Si=E,E=eo(ce,3)+2|0,c[Si+184>>2]=E,Si=c[R>>2],R=-1<<E^-1,hn(Si+R>>>E|0,R+c[H>>2]>>>E|0,0,g,te))continue;break l;case 3:L=eo(ce,8)+1|0,n=0;s:{if((L|0)>16||(n=1,(L|0)>4))break s;n=(L|0)>2?2:3}if(H=c[R>>2],R=E+184|0,c[R>>2]=n,!hn(L,1,0,g,te))break l;if(Ze=(H+(1<<n)|0)+-1|0,E=1<<(8>>>c[R>>2]),G=Ps(E,0,4),G){if(H=c[te>>2],c[G>>2]=c[H>>2],Ae=4,(L|0)>=2)for(R=L<<2,Ae=(R|0)>5?R:5,L=4;R=L+G|0,p[R|0]=F[R+-4|0]+F[L+H|0],L=L+1|0,(Ae|0)!=(L|0););R=E<<2,(R|0)>(Ae|0)&&Zo(G+Ae|0,0,R-Ae|0),Ur(c[te>>2]),c[te>>2]=G}n=Ze>>>n|0,Ae=(G|0)!=0;break;default:break u}if(!Ae)break}break l}r:{if(!eo(ce,1)||(ci=eo(ce,4),ci+-1>>>0<11))break r;c[g>>2]=3,L=0;break n}c[ni+12>>2]=0;r:{u:{s:{if(!a){Ze=1,R=1;break s}if(Ze=1,R=1,!eo(ce,1))break s;if(Mi=1,E=eo(ce,3)+2|0,R=1<<E,H=(R+n|0)+-1>>>E|0,R=(s+R|0)+-1>>>E|0,!hn(H,R,0,g,ni+12|0))break u;if(c[g+152>>2]=E,Pt=re(R,H),(Pt|0)>=1)for(L=0,R=c[ni+12>>2];H=R+(L<<2)|0,E=F[H+1|0]|F[H+2|0]<<8,c[H>>2]=E,Ze=(E|0)<(Ze|0)?Ze:E+1|0,L=L+1|0,(Pt|0)!=(L|0););if(!((Ze|0)>1e3|(Ze|0)>(re(n,s)|0))){R=Ze;break s}if(bn=Ps(Ze,0,4),!bn){c[g>>2]=1,bn=0;break u}if(ce=Zo(bn,255,Ze<<2),(Pt|0)<1){R=0;break s}for(L=0,te=c[ni+12>>2],R=0;G=te+(L<<2)|0,H=ce+(c[G>>2]<<2)|0,E=c[H>>2],(E|0)==-1&&(c[H>>2]=R,E=R,R=E+1|0),c[G>>2]=E,L=L+1|0,(Pt|0)!=(L|0););}if(c[g+48>>2]){Mi=1;break u}if(Mi=1,Kh=1<<ci,Ku=(ci|0)>0?Kh+280|0:280,Ae=tu((Ku|0)>256?Ku:256,0,4),Ji=re(pn[(ci<<1)+1184>>1],R),Ji=Ps(Ji,Ji>>31,4),fl=Ps(R,R>>31,548),!(!fl|(!Ji|!Ae))){for(H=Ji;;){L=ar;s:{a:{if(!bn||(L=c[(ar<<2)+bn>>2],(L|0)!=-1))break a;if(Mi=1,!oa(Ku,g,Ae,0)||!oa(256,g,Ae,0)||!oa(256,g,Ae,0)||!oa(256,g,Ae,0))break r;if(oa(40,g,Ae,0))break s;break r}for(Ne=re(L,548)+fl|0,Mi=1,Ft=0,Tr=0,sn=1,ys=0;;){if(c[(Ft<<2)+Ne>>2]=H,Pt=pn[(Ft<<1)+1208>>1]+((ci|0)>0?Ft?0:Kh:0)|0,E=oa(Pt,g,Ae,H),!E)break r;a:{if(!sn){sn=0;break a}if(!(Ft&2147483643))break a;sn=!F[H|0]}if(ce=E<<2,te=F[H|0],Ft>>>0<=3){if(L=c[Ae>>2],E=1,(Pt|0)>=2)for(;G=c[(E<<2)+Ae>>2],L=(G|0)>(L|0)?G:L,E=E+1|0,(Pt|0)!=(E|0););Tr=L+Tr|0}if(H=H+ce|0,ys=te+ys|0,Ft=Ft+1|0,(Ft|0)==5)break}c[Ne+28>>2]=0,c[Ne+20>>2]=sn;a:{if(!sn||(L=pn[c[Ne+8>>2]+2>>1]|pn[c[Ne+4>>2]+2>>1]<<16|pn[c[Ne+12>>2]+2>>1]<<24,c[Ne+24>>2]=L,ys)||(E=pn[c[Ne>>2]+2>>1],E>>>0>255))break a;c[Ne+28>>2]=1,c[Ne+24>>2]=L|E<<8,c[Ne+32>>2]=0;break s}if(c[Ne+32>>2]=(Tr|0)<6,(Tr|0)>5)break s;for(Mi=Ne+12|0,sn=Ne+8|0,Tr=Ne+4|0,ys=c[Ne>>2],L=0;;){te=(L<<3)+Ne|0,wa=te+36|0,E=ys+(L<<2)|0,G=pn[E>>1]|pn[E+2>>1]<<16,E=G>>>16|0;a:{if(E>>>0>=256){c[wa>>2]=G&255|256,c[te+40>>2]=E;break a}G=G&255,c[wa>>2]=G,Ft=te+40|0,Pt=E<<8,c[Ft>>2]=Pt,ce=L>>>G|0,E=c[Tr>>2]+(ce<<2)|0,te=F[E+2|0]|F[E+3|0]<<8,Si=G,G=F[E|0],E=Si+G|0,c[wa>>2]=E,Pt=Pt|te<<16,c[Ft>>2]=Pt,ce=ce>>>G|0,te=c[sn>>2]+(ce<<2)|0,G=F[te+2|0]|F[te+3|0]<<8,Si=E,E=F[te|0],te=Si+E|0,c[wa>>2]=te,G=G|Pt,c[Ft>>2]=G,ce=c[Mi>>2]+(ce>>>E<<2)|0,E=F[ce+2|0]|F[ce+3|0]<<8,c[wa>>2]=te+F[ce|0],c[Ft>>2]=G|E<<24}if(L=L+1|0,(L|0)==64)break}}if(ar=ar+1|0,(ar|0)==(Ze|0))break}ar=c[ni+12>>2],c[g+172>>2]=Ji,c[g+168>>2]=fl,c[g+164>>2]=R,c[g+160>>2]=ar,Mi=0;break r}c[g>>2]=1;break r}Ae=0}if(Ur(Ae),Ur(bn),!Mi)break o;Ur(c[ni+12>>2]),Ur(Ji),Mf(fl)}c[g>>2]=3,L=0;break n}o:{if((ci|0)>=1){if(c[g+120>>2]=1<<ci,iu(g+124|0,ci))break o;c[g>>2]=1,L=0;break n}c[mt>>2]=0}if(c[g+104>>2]=s,c[g+100>>2]=n,R=c[g+152>>2],c[g+148>>2]=R?-1<<R^-1:-1,c[g+156>>2]=((1<<R)+n|0)+-1>>>R,a){c[g+4>>2]=1,L=0;break i}if(L=Ps(_r(n,n>>31,s,s>>31),Bn,4),!L){c[g>>2]=1,L=0;break n}if(!Wl(g,L,n,s,s,0))break n;if(!c[g+48>>2])break i}Ur(L),L=0;break t}if(k&&(c[k>>2]=L),c[g+112>>2]=0,L=1,a)break e}Ur(c[g+160>>2]),Ur(c[g+172>>2]),Mf(c[g+168>>2]),wc(g+124|0),wc(g+136|0),c[mt+48>>2]=0,c[mt+52>>2]=0,c[mt+40>>2]=0,c[mt+44>>2]=0,c[mt+32>>2]=0,c[mt+36>>2]=0,c[mt+24>>2]=0,c[mt+28>>2]=0,c[mt+16>>2]=0,c[mt+20>>2]=0,c[mt+8>>2]=0,c[mt+12>>2]=0,c[mt>>2]=0,c[mt+4>>2]=0}return Un=ni+16|0,L}function Jn(n,s,a,g,k,E,L,R,G){n=n|0,s=s|0,a=a|0,g=g|0,k=k|0,E=E|0,L=L|0,R=R|0,G=G|0;var H=0,te=0,ce=0,Ae=0,Ne=0,Ze=0,mt=0,Pt=0,Ft=0,ni=0,ci=0,Mi=0,Si=0,Ji=0,sn=0,bn=0,ar=0,Tr=0;ce=F[n|0],te=F[a|0],Ae=F[g|0],Ne=F[k|0],Pt=F[E|0],p[L|0]=255,ce=re(ce,19077)>>>8|0,Ne=Ne|Pt<<16,te=te|Ae<<16,Ae=(Ne+re(te,3)|0)+131074|0,Pt=Ae>>>2&255,Ft=ce+(re(Pt,33050)>>>8|0)|0,H=Ft+-17685|0,p[L+3|0]=H>>>0<16384?H>>>6|0:Ft>>>0<17685?0:255,Ae=Ae>>>18&255,Ft=ce+(re(Ae,26149)>>>8|0)|0,H=Ft+-14234|0,p[L+1|0]=H>>>0<16384?H>>>6|0:Ft>>>0<14234?0:255,ce=ce-(re(Pt,6419)>>>8|0)-(re(Ae,13320)>>>8)|0,Ae=ce+8708|0,p[L+2|0]=Ae>>>0<16384?Ae>>>6|0:(ce|0)<-8708?0:255,s&&(ce=F[s|0],p[R|0]=255,ce=re(ce,19077)>>>8|0,Ae=(re(Ne,3)+te|0)+131074|0,Pt=Ae>>>2&255,Ft=ce+(re(Pt,33050)>>>8|0)|0,H=Ft+-17685|0,p[R+3|0]=H>>>0<16384?H>>>6|0:Ft>>>0<17685?0:255,Ae=Ae>>>18&255,Ft=ce+(re(Ae,26149)>>>8|0)|0,H=Ft+-14234|0,p[R+1|0]=H>>>0<16384?H>>>6|0:Ft>>>0<14234?0:255,ce=ce-(re(Pt,6419)>>>8|0)-(re(Ae,13320)>>>8)|0,Ae=ce+8708|0,p[R+2|0]=Ae>>>0<16384?Ae>>>6|0:(ce|0)<-8708?0:255),Ft=G+-1|0;e:{if((G|0)<3){ce=Ne,Ae=te;break e}for(ce=Ft>>1,Tr=(ce|0)>1?ce:1,Pt=1;bn=Pt<<1,ci=bn+-1|0,Ze=F[ci+n|0],Ae=F[a+Pt|0],ni=F[g+Pt|0],ce=F[k+Pt|0],sn=F[E+Pt|0],ar=ci<<2,H=ar+L|0,p[H|0]=255,ce=ce|sn<<16,Ae=Ae|ni<<16,sn=Ne+Ae|0,ni=(ce+(sn+te|0)|0)+524296|0,Ze=re(Ze,19077)>>>8|0,sn=ni+(sn<<1)>>>3|0,Mi=sn+te|0,Si=Mi>>>1&255,Ji=Ze+(re(Si,33050)>>>8|0)|0,mt=Ji+-17685|0,p[H+3|0]=mt>>>0<16384?mt>>>6|0:Ji>>>0<17685?0:255,Mi=Mi>>>17&255,Ji=Ze+(re(Mi,26149)>>>8|0)|0,mt=Ji+-14234|0,p[H+1|0]=mt>>>0<16384?mt>>>6|0:Ji>>>0<14234?0:255,mt=H,H=Ze-(re(Si,6419)>>>8|0)-(re(Mi,13320)>>>8)|0,Ze=H+8708|0,p[mt+2|0]=Ze>>>0<16384?Ze>>>6|0:(H|0)<-8708?0:255,Ze=F[n+bn|0],Mi=Pt<<3,H=Mi+L|0,p[H|0]=255,ni=ni+(te+ce<<1)>>>3|0,Si=ni+Ae|0,Ji=Si>>>1&255,te=re(Ze,19077)>>>8|0,Ze=(re(Ji,33050)>>>8|0)+te|0,mt=Ze+-17685|0,p[H+3|0]=mt>>>0<16384?mt>>>6|0:Ze>>>0<17685?0:255,Ze=Si>>>17&255,Si=te+(re(Ze,26149)>>>8|0)|0,mt=Si+-14234|0,p[H+1|0]=mt>>>0<16384?mt>>>6|0:Si>>>0<14234?0:255,mt=H,te=te-(re(Ji,6419)>>>8|0)-(re(Ze,13320)>>>8)|0,H=te+8708|0,p[mt+2|0]=H>>>0<16384?H>>>6|0:(te|0)<-8708?0:255,s&&(H=F[s+ci|0],te=R+ar|0,p[te|0]=255,ci=Ne+ni|0,ni=ci>>>1&255,Ne=re(H,19077)>>>8|0,H=(re(ni,33050)>>>8|0)+Ne|0,Ze=H+-17685|0,p[te+3|0]=Ze>>>0<16384?Ze>>>6|0:H>>>0<17685?0:255,H=ci>>>17&255,ci=Ne+(re(H,26149)>>>8|0)|0,Ze=ci+-14234|0,p[te+1|0]=Ze>>>0<16384?Ze>>>6|0:ci>>>0<14234?0:255,mt=te,te=Ne-(re(ni,6419)>>>8|0)-(re(H,13320)>>>8)|0,Ne=te+8708|0,p[mt+2|0]=Ne>>>0<16384?Ne>>>6|0:(te|0)<-8708?0:255,Ne=F[s+bn|0],te=R+Mi|0,p[te|0]=255,Ne=re(Ne,19077)>>>8|0,H=ce+sn|0,bn=H>>>1&255,ci=Ne+(re(bn,33050)>>>8|0)|0,ni=ci+-17685|0,p[te+3|0]=ni>>>0<16384?ni>>>6|0:ci>>>0<17685?0:255,H=H>>>17&255,ci=Ne+(re(H,26149)>>>8|0)|0,ni=ci+-14234|0,p[te+1|0]=ni>>>0<16384?ni>>>6|0:ci>>>0<14234?0:255,mt=te,te=Ne-(re(bn,6419)>>>8|0)-(re(H,13320)>>>8)|0,Ne=te+8708|0,p[mt+2|0]=Ne>>>0<16384?Ne>>>6|0:(te|0)<-8708?0:255),H=(Pt|0)!=(Tr|0),Pt=Pt+1|0,te=Ae,Ne=ce,!!H;);}e:{if(G&1||(a=F[n+Ft|0],g=Ft<<2,n=g+L|0,p[n|0]=255,a=re(a,19077)>>>8|0,k=(re(Ae,3)+ce|0)+131074|0,E=k>>>2&255,L=a+(re(E,33050)>>>8|0)|0,G=L+-17685|0,p[n+3|0]=G>>>0<16384?G>>>6|0:L>>>0<17685?0:255,k=k>>>18&255,L=a+(re(k,26149)>>>8|0)|0,G=L+-14234|0,p[n+1|0]=G>>>0<16384?G>>>6|0:L>>>0<14234?0:255,L=n,n=a-(re(E,6419)>>>8|0)-(re(k,13320)>>>8)|0,a=n+8708|0,p[L+2|0]=a>>>0<16384?a>>>6|0:(n|0)<-8708?0:255,!s))break e;s=F[s+Ft|0],n=g+R|0,p[n|0]=255,s=re(s,19077)>>>8|0,a=(re(ce,3)+Ae|0)+131074|0,g=a>>>2&255,k=s+(re(g,33050)>>>8|0)|0,E=k+-17685|0,p[n+3|0]=E>>>0<16384?E>>>6|0:k>>>0<17685?0:255,a=a>>>18&255,k=s+(re(a,26149)>>>8|0)|0,E=k+-14234|0,p[n+1|0]=E>>>0<16384?E>>>6|0:k>>>0<14234?0:255,k=n,n=s-(re(g,6419)>>>8|0)-(re(a,13320)>>>8)|0,s=n+8708|0,p[k+2|0]=s>>>0<16384?s>>>6|0:(n|0)<-8708?0:255}}function kr(n,s,a,g,k,E,L,R,G){n=n|0,s=s|0,a=a|0,g=g|0,k=k|0,E=E|0,L=L|0,R=R|0,G=G|0;var H=0,te=0,ce=0,Ae=0,Ne=0,Ze=0,mt=0,Pt=0,Ft=0,ni=0,ci=0,Mi=0,Si=0,Ji=0,sn=0,bn=0,ar=0,Tr=0;ce=F[n|0],te=F[a|0],Ae=F[g|0],Ne=F[k|0],Pt=F[E|0],p[L+3|0]=255,ce=re(ce,19077)>>>8|0,Ne=Ne|Pt<<16,te=te|Ae<<16,Ae=(Ne+re(te,3)|0)+131074|0,Pt=Ae>>>2&255,Ft=ce+(re(Pt,33050)>>>8|0)|0,H=Ft+-17685|0,p[L+2|0]=H>>>0<16384?H>>>6|0:Ft>>>0<17685?0:255,Ae=Ae>>>18&255,Ft=ce+(re(Ae,26149)>>>8|0)|0,H=Ft+-14234|0,p[L|0]=H>>>0<16384?H>>>6|0:Ft>>>0<14234?0:255,ce=ce-(re(Pt,6419)>>>8|0)-(re(Ae,13320)>>>8)|0,Ae=ce+8708|0,p[L+1|0]=Ae>>>0<16384?Ae>>>6|0:(ce|0)<-8708?0:255,s&&(ce=F[s|0],p[R+3|0]=255,ce=re(ce,19077)>>>8|0,Ae=(re(Ne,3)+te|0)+131074|0,Pt=Ae>>>2&255,Ft=ce+(re(Pt,33050)>>>8|0)|0,H=Ft+-17685|0,p[R+2|0]=H>>>0<16384?H>>>6|0:Ft>>>0<17685?0:255,Ae=Ae>>>18&255,Ft=ce+(re(Ae,26149)>>>8|0)|0,H=Ft+-14234|0,p[R|0]=H>>>0<16384?H>>>6|0:Ft>>>0<14234?0:255,ce=ce-(re(Pt,6419)>>>8|0)-(re(Ae,13320)>>>8)|0,Ae=ce+8708|0,p[R+1|0]=Ae>>>0<16384?Ae>>>6|0:(ce|0)<-8708?0:255),Ft=G+-1|0;e:{if((G|0)<3){ce=Ne,Ae=te;break e}for(ce=Ft>>1,Tr=(ce|0)>1?ce:1,Pt=1;bn=Pt<<1,ci=bn+-1|0,Ze=F[ci+n|0],Ae=F[a+Pt|0],ni=F[g+Pt|0],ce=F[k+Pt|0],sn=F[E+Pt|0],ar=ci<<2,H=ar+L|0,p[H+3|0]=255,ce=ce|sn<<16,Ae=Ae|ni<<16,sn=Ne+Ae|0,ni=(ce+(sn+te|0)|0)+524296|0,Ze=re(Ze,19077)>>>8|0,sn=ni+(sn<<1)>>>3|0,Mi=sn+te|0,Si=Mi>>>1&255,Ji=Ze+(re(Si,33050)>>>8|0)|0,mt=Ji+-17685|0,p[H+2|0]=mt>>>0<16384?mt>>>6|0:Ji>>>0<17685?0:255,Mi=Mi>>>17&255,Ji=Ze+(re(Mi,26149)>>>8|0)|0,mt=Ji+-14234|0,p[H|0]=mt>>>0<16384?mt>>>6|0:Ji>>>0<14234?0:255,mt=H,H=Ze-(re(Si,6419)>>>8|0)-(re(Mi,13320)>>>8)|0,Ze=H+8708|0,p[mt+1|0]=Ze>>>0<16384?Ze>>>6|0:(H|0)<-8708?0:255,Ze=F[n+bn|0],Mi=Pt<<3,H=Mi+L|0,p[H+3|0]=255,ni=ni+(te+ce<<1)>>>3|0,Si=ni+Ae|0,Ji=Si>>>1&255,te=re(Ze,19077)>>>8|0,Ze=(re(Ji,33050)>>>8|0)+te|0,mt=Ze+-17685|0,p[H+2|0]=mt>>>0<16384?mt>>>6|0:Ze>>>0<17685?0:255,Ze=Si>>>17&255,Si=te+(re(Ze,26149)>>>8|0)|0,mt=Si+-14234|0,p[H|0]=mt>>>0<16384?mt>>>6|0:Si>>>0<14234?0:255,mt=H,te=te-(re(Ji,6419)>>>8|0)-(re(Ze,13320)>>>8)|0,H=te+8708|0,p[mt+1|0]=H>>>0<16384?H>>>6|0:(te|0)<-8708?0:255,s&&(H=F[s+ci|0],te=R+ar|0,p[te+3|0]=255,ci=Ne+ni|0,ni=ci>>>1&255,Ne=re(H,19077)>>>8|0,H=(re(ni,33050)>>>8|0)+Ne|0,Ze=H+-17685|0,p[te+2|0]=Ze>>>0<16384?Ze>>>6|0:H>>>0<17685?0:255,H=ci>>>17&255,ci=Ne+(re(H,26149)>>>8|0)|0,Ze=ci+-14234|0,p[te|0]=Ze>>>0<16384?Ze>>>6|0:ci>>>0<14234?0:255,mt=te,te=Ne-(re(ni,6419)>>>8|0)-(re(H,13320)>>>8)|0,Ne=te+8708|0,p[mt+1|0]=Ne>>>0<16384?Ne>>>6|0:(te|0)<-8708?0:255,Ne=F[s+bn|0],te=R+Mi|0,p[te+3|0]=255,Ne=re(Ne,19077)>>>8|0,H=ce+sn|0,bn=H>>>1&255,ci=Ne+(re(bn,33050)>>>8|0)|0,ni=ci+-17685|0,p[te+2|0]=ni>>>0<16384?ni>>>6|0:ci>>>0<17685?0:255,H=H>>>17&255,ci=Ne+(re(H,26149)>>>8|0)|0,ni=ci+-14234|0,p[te|0]=ni>>>0<16384?ni>>>6|0:ci>>>0<14234?0:255,mt=te,te=Ne-(re(bn,6419)>>>8|0)-(re(H,13320)>>>8)|0,Ne=te+8708|0,p[mt+1|0]=Ne>>>0<16384?Ne>>>6|0:(te|0)<-8708?0:255),H=(Pt|0)!=(Tr|0),Pt=Pt+1|0,te=Ae,Ne=ce,!!H;);}e:{if(G&1||(a=F[n+Ft|0],g=Ft<<2,n=g+L|0,p[n+3|0]=255,a=re(a,19077)>>>8|0,k=(re(Ae,3)+ce|0)+131074|0,E=k>>>2&255,L=a+(re(E,33050)>>>8|0)|0,G=L+-17685|0,p[n+2|0]=G>>>0<16384?G>>>6|0:L>>>0<17685?0:255,k=k>>>18&255,L=a+(re(k,26149)>>>8|0)|0,G=L+-14234|0,p[n|0]=G>>>0<16384?G>>>6|0:L>>>0<14234?0:255,L=n,n=a-(re(E,6419)>>>8|0)-(re(k,13320)>>>8)|0,a=n+8708|0,p[L+1|0]=a>>>0<16384?a>>>6|0:(n|0)<-8708?0:255,!s))break e;s=F[s+Ft|0],n=g+R|0,p[n+3|0]=255,s=re(s,19077)>>>8|0,a=(re(ce,3)+Ae|0)+131074|0,g=a>>>2&255,k=s+(re(g,33050)>>>8|0)|0,E=k+-17685|0,p[n+2|0]=E>>>0<16384?E>>>6|0:k>>>0<17685?0:255,a=a>>>18&255,k=s+(re(a,26149)>>>8|0)|0,E=k+-14234|0,p[n|0]=E>>>0<16384?E>>>6|0:k>>>0<14234?0:255,k=n,n=s-(re(g,6419)>>>8|0)-(re(a,13320)>>>8)|0,s=n+8708|0,p[k+1|0]=s>>>0<16384?s>>>6|0:(n|0)<-8708?0:255}}function jr(n,s,a,g,k,E,L,R,G){n=n|0,s=s|0,a=a|0,g=g|0,k=k|0,E=E|0,L=L|0,R=R|0,G=G|0;var H=0,te=0,ce=0,Ae=0,Ne=0,Ze=0,mt=0,Pt=0,Ft=0,ni=0,ci=0,Mi=0,Si=0,Ji=0,sn=0,bn=0,ar=0,Tr=0;ce=F[n|0],te=F[a|0],Ae=F[g|0],Ne=F[k|0],Pt=F[E|0],p[L+3|0]=255,ce=re(ce,19077)>>>8|0,Ne=Ne|Pt<<16,te=te|Ae<<16,Ae=(Ne+re(te,3)|0)+131074|0,Pt=Ae>>>18&255,Ft=ce+(re(Pt,26149)>>>8|0)|0,H=Ft+-14234|0,p[L+2|0]=H>>>0<16384?H>>>6|0:Ft>>>0<14234?0:255,Ae=Ae>>>2&255,Ft=ce+(re(Ae,33050)>>>8|0)|0,H=Ft+-17685|0,p[L|0]=H>>>0<16384?H>>>6|0:Ft>>>0<17685?0:255,ce=ce-(re(Ae,6419)>>>8|0)-(re(Pt,13320)>>>8)|0,Ae=ce+8708|0,p[L+1|0]=Ae>>>0<16384?Ae>>>6|0:(ce|0)<-8708?0:255,s&&(ce=F[s|0],p[R+3|0]=255,ce=re(ce,19077)>>>8|0,Ae=(re(Ne,3)+te|0)+131074|0,Pt=Ae>>>18&255,Ft=ce+(re(Pt,26149)>>>8|0)|0,H=Ft+-14234|0,p[R+2|0]=H>>>0<16384?H>>>6|0:Ft>>>0<14234?0:255,Ae=Ae>>>2&255,Ft=ce+(re(Ae,33050)>>>8|0)|0,H=Ft+-17685|0,p[R|0]=H>>>0<16384?H>>>6|0:Ft>>>0<17685?0:255,ce=ce-(re(Ae,6419)>>>8|0)-(re(Pt,13320)>>>8)|0,Ae=ce+8708|0,p[R+1|0]=Ae>>>0<16384?Ae>>>6|0:(ce|0)<-8708?0:255),Ft=G+-1|0;e:{if((G|0)<3){ce=Ne,Ae=te;break e}for(ce=Ft>>1,Tr=(ce|0)>1?ce:1,Pt=1;bn=Pt<<1,ci=bn+-1|0,Ze=F[ci+n|0],Ae=F[a+Pt|0],ni=F[g+Pt|0],ce=F[k+Pt|0],sn=F[E+Pt|0],ar=ci<<2,H=ar+L|0,p[H+3|0]=255,ce=ce|sn<<16,Ae=Ae|ni<<16,sn=Ne+Ae|0,ni=(ce+(sn+te|0)|0)+524296|0,Ze=re(Ze,19077)>>>8|0,sn=ni+(sn<<1)>>>3|0,Mi=sn+te|0,Si=Mi>>>17&255,Ji=Ze+(re(Si,26149)>>>8|0)|0,mt=Ji+-14234|0,p[H+2|0]=mt>>>0<16384?mt>>>6|0:Ji>>>0<14234?0:255,Mi=Mi>>>1&255,Ji=Ze+(re(Mi,33050)>>>8|0)|0,mt=Ji+-17685|0,p[H|0]=mt>>>0<16384?mt>>>6|0:Ji>>>0<17685?0:255,mt=H,H=Ze-(re(Mi,6419)>>>8|0)-(re(Si,13320)>>>8)|0,Ze=H+8708|0,p[mt+1|0]=Ze>>>0<16384?Ze>>>6|0:(H|0)<-8708?0:255,Ze=F[n+bn|0],Mi=Pt<<3,H=Mi+L|0,p[H+3|0]=255,ni=ni+(te+ce<<1)>>>3|0,Si=ni+Ae|0,Ji=Si>>>17&255,te=re(Ze,19077)>>>8|0,Ze=(re(Ji,26149)>>>8|0)+te|0,mt=Ze+-14234|0,p[H+2|0]=mt>>>0<16384?mt>>>6|0:Ze>>>0<14234?0:255,Ze=Si>>>1&255,Si=te+(re(Ze,33050)>>>8|0)|0,mt=Si+-17685|0,p[H|0]=mt>>>0<16384?mt>>>6|0:Si>>>0<17685?0:255,mt=H,te=te-(re(Ze,6419)>>>8|0)-(re(Ji,13320)>>>8)|0,H=te+8708|0,p[mt+1|0]=H>>>0<16384?H>>>6|0:(te|0)<-8708?0:255,s&&(H=F[s+ci|0],te=R+ar|0,p[te+3|0]=255,ci=Ne+ni|0,ni=ci>>>17&255,Ne=re(H,19077)>>>8|0,H=(re(ni,26149)>>>8|0)+Ne|0,Ze=H+-14234|0,p[te+2|0]=Ze>>>0<16384?Ze>>>6|0:H>>>0<14234?0:255,H=ci>>>1&255,ci=Ne+(re(H,33050)>>>8|0)|0,Ze=ci+-17685|0,p[te|0]=Ze>>>0<16384?Ze>>>6|0:ci>>>0<17685?0:255,mt=te,te=Ne-(re(H,6419)>>>8|0)-(re(ni,13320)>>>8)|0,Ne=te+8708|0,p[mt+1|0]=Ne>>>0<16384?Ne>>>6|0:(te|0)<-8708?0:255,Ne=F[s+bn|0],te=R+Mi|0,p[te+3|0]=255,Ne=re(Ne,19077)>>>8|0,H=ce+sn|0,bn=H>>>17&255,ci=Ne+(re(bn,26149)>>>8|0)|0,ni=ci+-14234|0,p[te+2|0]=ni>>>0<16384?ni>>>6|0:ci>>>0<14234?0:255,H=H>>>1&255,ci=Ne+(re(H,33050)>>>8|0)|0,ni=ci+-17685|0,p[te|0]=ni>>>0<16384?ni>>>6|0:ci>>>0<17685?0:255,mt=te,te=Ne-(re(H,6419)>>>8|0)-(re(bn,13320)>>>8)|0,Ne=te+8708|0,p[mt+1|0]=Ne>>>0<16384?Ne>>>6|0:(te|0)<-8708?0:255),H=(Pt|0)!=(Tr|0),Pt=Pt+1|0,te=Ae,Ne=ce,!!H;);}e:{if(G&1||(a=F[n+Ft|0],g=Ft<<2,n=g+L|0,p[n+3|0]=255,a=re(a,19077)>>>8|0,k=(re(Ae,3)+ce|0)+131074|0,E=k>>>18&255,L=a+(re(E,26149)>>>8|0)|0,G=L+-14234|0,p[n+2|0]=G>>>0<16384?G>>>6|0:L>>>0<14234?0:255,k=k>>>2&255,L=a+(re(k,33050)>>>8|0)|0,G=L+-17685|0,p[n|0]=G>>>0<16384?G>>>6|0:L>>>0<17685?0:255,L=n,n=a-(re(k,6419)>>>8|0)-(re(E,13320)>>>8)|0,a=n+8708|0,p[L+1|0]=a>>>0<16384?a>>>6|0:(n|0)<-8708?0:255,!s))break e;s=F[s+Ft|0],n=g+R|0,p[n+3|0]=255,s=re(s,19077)>>>8|0,a=(re(ce,3)+Ae|0)+131074|0,g=a>>>18&255,k=s+(re(g,26149)>>>8|0)|0,E=k+-14234|0,p[n+2|0]=E>>>0<16384?E>>>6|0:k>>>0<14234?0:255,a=a>>>2&255,k=s+(re(a,33050)>>>8|0)|0,E=k+-17685|0,p[n|0]=E>>>0<16384?E>>>6|0:k>>>0<17685?0:255,k=n,n=s-(re(a,6419)>>>8|0)-(re(g,13320)>>>8)|0,s=n+8708|0,p[k+1|0]=s>>>0<16384?s>>>6|0:(n|0)<-8708?0:255}}function Xr(n,s,a,g,k,E,L,R,G){n=n|0,s=s|0,a=a|0,g=g|0,k=k|0,E=E|0,L=L|0,R=R|0,G=G|0;var H=0,te=0,ce=0,Ae=0,Ne=0,Ze=0,mt=0,Pt=0,Ft=0,ni=0,ci=0,Mi=0,Si=0,Ji=0,sn=0,bn=0,ar=0,Tr=0;Ae=re(F[n|0],19077)>>>8|0,Ne=F[k|0]|F[E|0]<<16,H=F[a|0]|F[g|0]<<16,ce=(Ne+re(H,3)|0)+131074|0,Pt=ce>>>2&255,ce=ce>>>18|0,mt=Ae-(re(Pt,6419)>>>8|0)-(re(ce,13320)>>>8)|0,te=mt+8708|0,mt=te>>>0<16384?te>>6:(mt|0)<-8708?0:255,ce=Ae+(re(ce,26149)>>>8|0)|0,te=ce+-14234|0,p[L|0]=mt>>>5|(te>>>0<16384?te>>>6|0:ce>>>0<14234?0:248)&248,Ae=Ae+(re(Pt,33050)>>>8|0)|0,ce=Ae+-17685|0,p[L+1|0]=mt<<3&224|(ce>>>0<16384?ce>>>9|0:Ae>>>0<17685?0:31),s&&(Ae=re(F[s|0],19077)>>>8|0,ce=(re(Ne,3)+H|0)+131074|0,Pt=ce>>>2&255,ce=ce>>>18|0,mt=Ae-(re(Pt,6419)>>>8|0)-(re(ce,13320)>>>8)|0,te=mt+8708|0,mt=te>>>0<16384?te>>6:(mt|0)<-8708?0:255,ce=Ae+(re(ce,26149)>>>8|0)|0,te=ce+-14234|0,p[R|0]=mt>>>5|(te>>>0<16384?te>>>6|0:ce>>>0<14234?0:248)&248,Ae=Ae+(re(Pt,33050)>>>8|0)|0,ce=Ae+-17685|0,p[R+1|0]=mt<<3&224|(ce>>>0<16384?ce>>>9|0:Ae>>>0<17685?0:31)),mt=G+-1|0;e:{if((G|0)<3){Ae=Ne,ce=H;break e}for(Ae=mt>>1,Tr=(Ae|0)>1?Ae:1,Pt=1;Ae=F[k+Pt|0]|F[E+Pt|0]<<16,ce=F[a+Pt|0]|F[g+Pt|0]<<16,bn=ce+Ne|0,te=(Ae+(bn+H|0)|0)+524296|0,sn=Pt<<1,Ft=sn+-1|0,Si=Ft<<1,Ji=Si+L|0,Ze=re(F[n+Ft|0],19077)>>>8|0,bn=te+(bn<<1)>>>3|0,ci=bn+H|0,ar=ci>>>1&255,ci=ci>>>17|0,Mi=Ze-(re(ar,6419)>>>8|0)-(re(ci,13320)>>>8)|0,ni=Mi+8708|0,Mi=ni>>>0<16384?ni>>6:(Mi|0)<-8708?0:255,ci=Ze+(re(ci,26149)>>>8|0)|0,ni=ci+-14234|0,p[Ji|0]=Mi>>>5|(ni>>>0<16384?ni>>>6|0:ci>>>0<14234?0:248)&248,ni=Ji,Ze=Ze+(re(ar,33050)>>>8|0)|0,Ji=Ze+-17685|0,p[ni+1|0]=Mi<<3&224|(Ji>>>0<16384?Ji>>>9|0:Ze>>>0<17685?0:31),Ji=Pt<<2,ci=Ji+L|0,Ze=re(F[n+sn|0],19077)>>>8|0,te=te+(H+Ae<<1)>>>3|0,H=te+ce|0,ar=H>>>1&255,H=H>>>17|0,Mi=Ze-(re(ar,6419)>>>8|0)-(re(H,13320)>>>8)|0,ni=Mi+8708|0,Mi=ni>>>0<16384?ni>>6:(Mi|0)<-8708?0:255,H=Ze+(re(H,26149)>>>8|0)|0,ni=H+-14234|0,p[ci|0]=Mi>>>5|(ni>>>0<16384?ni>>>6|0:H>>>0<14234?0:248)&248,H=Ze+(re(ar,33050)>>>8|0)|0,Ze=H+-17685|0,p[ci+1|0]=Mi<<3&224|(Ze>>>0<16384?Ze>>>9|0:H>>>0<17685?0:31),s&&(Ze=R+Si|0,H=re(F[s+Ft|0],19077)>>>8|0,Ne=te+Ne|0,te=Ne>>>1&255,Ne=Ne>>>17|0,Ft=H-(re(te,6419)>>>8|0)-(re(Ne,13320)>>>8)|0,Si=Ft+8708|0,Ft=Si>>>0<16384?Si>>6:(Ft|0)<-8708?0:255,Ne=H+(re(Ne,26149)>>>8|0)|0,Si=Ne+-14234|0,p[Ze|0]=Ft>>>5|(Si>>>0<16384?Si>>>6|0:Ne>>>0<14234?0:248)&248,H=H+(re(te,33050)>>>8|0)|0,Ne=H+-17685|0,p[Ze+1|0]=Ft<<3&224|(Ne>>>0<16384?Ne>>>9|0:H>>>0<17685?0:31),Ne=R+Ji|0,H=re(F[s+sn|0],19077)>>>8|0,te=Ae+bn|0,sn=te>>>1&255,te=te>>>17|0,Ft=H-(re(sn,6419)>>>8|0)-(re(te,13320)>>>8)|0,Ze=Ft+8708|0,Ft=Ze>>>0<16384?Ze>>6:(Ft|0)<-8708?0:255,te=H+(re(te,26149)>>>8|0)|0,Ze=te+-14234|0,p[Ne|0]=Ft>>>5|(Ze>>>0<16384?Ze>>>6|0:te>>>0<14234?0:248)&248,ni=Ne,H=H+(re(sn,33050)>>>8|0)|0,Ne=H+-17685|0,p[ni+1|0]=Ft<<3&224|(Ne>>>0<16384?Ne>>>9|0:H>>>0<17685?0:31)),te=(Pt|0)!=(Tr|0),Pt=Pt+1|0,H=ce,Ne=Ae,!!te;);}e:{if(G&1||(a=mt<<1,g=a+L|0,n=re(F[n+mt|0],19077)>>>8|0,k=(re(ce,3)+Ae|0)+131074|0,E=k>>>2&255,k=k>>>18|0,L=n-(re(E,6419)>>>8|0)-(re(k,13320)>>>8)|0,G=L+8708|0,L=G>>>0<16384?G>>6:(L|0)<-8708?0:255,k=n+(re(k,26149)>>>8|0)|0,G=k+-14234|0,p[g|0]=L>>>5|(G>>>0<16384?G>>>6|0:k>>>0<14234?0:248)&248,k=g,n=n+(re(E,33050)>>>8|0)|0,g=n+-17685|0,p[k+1|0]=L<<3&224|(g>>>0<16384?g>>>9|0:n>>>0<17685?0:31),!s))break e;a=a+R|0,n=re(F[s+mt|0],19077)>>>8|0,s=(re(Ae,3)+ce|0)+131074|0,g=s>>>2&255,s=s>>>18|0,k=n-(re(g,6419)>>>8|0)-(re(s,13320)>>>8)|0,E=k+8708|0,k=E>>>0<16384?E>>6:(k|0)<-8708?0:255,s=n+(re(s,26149)>>>8|0)|0,E=s+-14234|0,p[a|0]=k>>>5|(E>>>0<16384?E>>>6|0:s>>>0<14234?0:248)&248,n=n+(re(g,33050)>>>8|0)|0,s=n+-17685|0,p[a+1|0]=k<<3&224|(s>>>0<16384?s>>>9|0:n>>>0<17685?0:31)}}function $r(n,s,a,g,k,E,L,R,G){n=n|0,s=s|0,a=a|0,g=g|0,k=k|0,E=E|0,L=L|0,R=R|0,G=G|0;var H=0,te=0,ce=0,Ae=0,Ne=0,Ze=0,mt=0,Pt=0,Ft=0,ni=0,ci=0,Mi=0,Si=0,Ji=0,sn=0,bn=0,ar=0,Tr=0;ce=re(F[n|0],19077)>>>8|0,Ae=F[k|0]|F[E|0]<<16,H=F[a|0]|F[g|0]<<16,Ne=(Ae+re(H,3)|0)+131074|0,mt=Ne>>>2&255,Pt=ce+(re(mt,33050)>>>8|0)|0,te=Pt+-17685|0,p[L+1|0]=(te>>>0<16384?te>>>6|0:Pt>>>0<17685?0:240)|15,Ne=Ne>>>18|0,mt=ce-(re(mt,6419)>>>8|0)-(re(Ne,13320)>>>8)|0,Pt=mt+8708|0,ce=ce+(re(Ne,26149)>>>8|0)|0,Ne=ce+-14234|0,p[L|0]=(Pt>>>0<16384?Pt>>>10|0:(mt|0)<-8708?0:15)|(Ne>>>0<16384?Ne>>>6|0:ce>>>0<14234?0:240)&240,s&&(ce=re(F[s|0],19077)>>>8|0,Ne=(re(Ae,3)+H|0)+131074|0,mt=Ne>>>2&255,Pt=ce+(re(mt,33050)>>>8|0)|0,te=Pt+-17685|0,p[R+1|0]=(te>>>0<16384?te>>>6|0:Pt>>>0<17685?0:240)|15,Ne=Ne>>>18|0,Pt=ce+(re(Ne,26149)>>>8|0)|0,te=Pt+-14234|0,ce=ce-(re(mt,6419)>>>8|0)-(re(Ne,13320)>>>8)|0,Ne=ce+8708|0,p[R|0]=(te>>>0<16384?te>>>6|0:Pt>>>0<14234?0:240)&240|(Ne>>>0<16384?Ne>>>10|0:(ce|0)<-8708?0:15)),Pt=G+-1|0;e:{if((G|0)<3){ce=Ae,Ne=H;break e}for(ce=Pt>>1,Tr=(ce|0)>1?ce:1,mt=1;ce=F[k+mt|0]|F[E+mt|0]<<16,Ne=F[a+mt|0]|F[g+mt|0]<<16,Ft=Ne+Ae|0,te=(ce+(Ft+H|0)|0)+524296|0,Si=mt<<1,ni=Si+-1|0,sn=ni<<1,Ze=sn+L|0,ar=te+(Ft<<1)>>>3|0,ci=ar+H|0,Mi=ci>>>1&255,Ft=re(F[n+ni|0],19077)>>>8|0,bn=(re(Mi,33050)>>>8|0)+Ft|0,Ji=bn+-17685|0,p[Ze+1|0]=(Ji>>>0<16384?Ji>>>6|0:bn>>>0<17685?0:240)|15,Ji=Ze,Ze=ci>>>17|0,ci=Ft-(re(Mi,6419)>>>8|0)-(re(Ze,13320)>>>8)|0,Mi=ci+8708|0,Ft=Ft+(re(Ze,26149)>>>8|0)|0,Ze=Ft+-14234|0,p[Ji|0]=(Mi>>>0<16384?Mi>>>10|0:(ci|0)<-8708?0:15)|(Ze>>>0<16384?Ze>>>6|0:Ft>>>0<14234?0:240)&240,Ft=mt<<2,Ze=Ft+L|0,te=te+(H+ce<<1)>>>3|0,ci=te+Ne|0,Mi=ci>>>1&255,H=re(F[n+Si|0],19077)>>>8|0,bn=(re(Mi,33050)>>>8|0)+H|0,Ji=bn+-17685|0,p[Ze+1|0]=(Ji>>>0<16384?Ji>>>6|0:bn>>>0<17685?0:240)|15,Ji=Ze,Ze=ci>>>17|0,ci=H-(re(Mi,6419)>>>8|0)-(re(Ze,13320)>>>8)|0,Mi=ci+8708|0,H=H+(re(Ze,26149)>>>8|0)|0,Ze=H+-14234|0,p[Ji|0]=(Mi>>>0<16384?Mi>>>10|0:(ci|0)<-8708?0:15)|(Ze>>>0<16384?Ze>>>6|0:H>>>0<14234?0:240)&240,s&&(sn=R+sn|0,H=re(F[s+ni|0],19077)>>>8|0,Ae=te+Ae|0,te=Ae>>>1&255,ni=H+(re(te,33050)>>>8|0)|0,Ze=ni+-17685|0,p[sn+1|0]=(Ze>>>0<16384?Ze>>>6|0:ni>>>0<17685?0:240)|15,Ze=sn,Ae=Ae>>>17|0,ni=H+(re(Ae,26149)>>>8|0)|0,sn=ni+-14234|0,H=H-(re(te,6419)>>>8|0)-(re(Ae,13320)>>>8)|0,Ae=H+8708|0,p[Ze|0]=(sn>>>0<16384?sn>>>6|0:ni>>>0<14234?0:240)&240|(Ae>>>0<16384?Ae>>>10|0:(H|0)<-8708?0:15),Ae=R+Ft|0,H=re(F[s+Si|0],19077)>>>8|0,te=ce+ar|0,ni=te>>>1&255,Si=H+(re(ni,33050)>>>8|0)|0,Ft=Si+-17685|0,p[Ae+1|0]=(Ft>>>0<16384?Ft>>>6|0:Si>>>0<17685?0:240)|15,Ze=Ae,Ae=te>>>17|0,te=H+(re(Ae,26149)>>>8|0)|0,Si=te+-14234|0,H=H-(re(ni,6419)>>>8|0)-(re(Ae,13320)>>>8)|0,Ae=H+8708|0,p[Ze|0]=(Si>>>0<16384?Si>>>6|0:te>>>0<14234?0:240)&240|(Ae>>>0<16384?Ae>>>10|0:(H|0)<-8708?0:15)),te=(mt|0)!=(Tr|0),mt=mt+1|0,H=Ne,Ae=ce,!!te;);}e:{if(G&1||(a=Pt<<1,g=a+L|0,n=re(F[n+Pt|0],19077)>>>8|0,k=(re(Ne,3)+ce|0)+131074|0,E=k>>>2&255,L=n+(re(E,33050)>>>8|0)|0,G=L+-17685|0,p[g+1|0]=(G>>>0<16384?G>>>6|0:L>>>0<17685?0:240)|15,G=g,g=k>>>18|0,k=n+(re(g,26149)>>>8|0)|0,L=k+-14234|0,n=n-(re(E,6419)>>>8|0)-(re(g,13320)>>>8)|0,g=n+8708|0,p[G|0]=(L>>>0<16384?L>>>6|0:k>>>0<14234?0:240)&240|(g>>>0<16384?g>>>10|0:(n|0)<-8708?0:15),!s))break e;a=a+R|0,n=re(F[s+Pt|0],19077)>>>8|0,g=(re(ce,3)+Ne|0)+131074|0,k=g>>>2&255,s=n+(re(k,33050)>>>8|0)|0,E=s+-17685|0,p[a+1|0]=(E>>>0<16384?E>>>6|0:s>>>0<17685?0:240)|15,E=a,s=g>>>18|0,a=n+(re(s,26149)>>>8|0)|0,g=a+-14234|0,n=n-(re(k,6419)>>>8|0)-(re(s,13320)>>>8)|0,s=n+8708|0,p[E|0]=(g>>>0<16384?g>>>6|0:a>>>0<14234?0:240)&240|(s>>>0<16384?s>>>10|0:(n|0)<-8708?0:15)}}function Fo(n,s,a,g,k,E,L,R,G){n=n|0,s=s|0,a=a|0,g=g|0,k=k|0,E=E|0,L=L|0,R=R|0,G=G|0;var H=0,te=0,ce=0,Ae=0,Ne=0,Ze=0,mt=0,Pt=0,Ft=0,ni=0,ci=0,Mi=0,Si=0,Ji=0,sn=0,bn=0,ar=0,Tr=0;ce=re(F[n|0],19077)>>>8|0,Ze=F[k|0]|F[E|0]<<16,te=F[a|0]|F[g|0]<<16,Ae=(Ze+re(te,3)|0)+131074|0,Ft=Ae>>>18|0,Pt=ce+(re(Ft,26149)>>>8|0)|0,H=Pt+-14234|0,p[L|0]=H>>>0<16384?H>>>6|0:Pt>>>0<14234?0:255,Ae=Ae>>>2&255,Pt=ce+(re(Ae,33050)>>>8|0)|0,H=Pt+-17685|0,p[L+2|0]=H>>>0<16384?H>>>6|0:Pt>>>0<17685?0:255,ce=ce-(re(Ae,6419)>>>8|0)-(re(Ft,13320)>>>8)|0,Ae=ce+8708|0,p[L+1|0]=Ae>>>0<16384?Ae>>>6|0:(ce|0)<-8708?0:255,s&&(ce=re(F[s|0],19077)>>>8|0,Ae=(re(Ze,3)+te|0)+131074|0,Ft=Ae>>>18|0,Pt=ce+(re(Ft,26149)>>>8|0)|0,H=Pt+-14234|0,p[R|0]=H>>>0<16384?H>>>6|0:Pt>>>0<14234?0:255,Ae=Ae>>>2&255,Pt=ce+(re(Ae,33050)>>>8|0)|0,H=Pt+-17685|0,p[R+2|0]=H>>>0<16384?H>>>6|0:Pt>>>0<17685?0:255,ce=ce-(re(Ae,6419)>>>8|0)-(re(Ft,13320)>>>8)|0,Ae=ce+8708|0,p[R+1|0]=Ae>>>0<16384?Ae>>>6|0:(ce|0)<-8708?0:255),Pt=G+-1|0;e:{if((G|0)<3){ce=Ze,Ae=te;break e}for(ce=Pt>>1,Tr=(ce|0)>1?ce:1,Ft=1;ce=F[k+Ft|0]|F[E+Ft|0]<<16,Ae=F[a+Ft|0]|F[g+Ft|0]<<16,ni=Ae+Ze|0,H=(ce+(ni+te|0)|0)+524296|0,Ji=Ft<<1,ci=Ji+-1|0,sn=re(ci,3),Ne=sn+L|0,ar=H+(ni<<1)>>>3|0,Mi=ar+te|0,bn=Mi>>>17|0,ni=re(F[n+ci|0],19077)>>>8|0,mt=(re(bn,26149)>>>8|0)+ni|0,Si=mt+-14234|0,p[Ne|0]=Si>>>0<16384?Si>>>6|0:mt>>>0<14234?0:255,Mi=Mi>>>1&255,mt=ni+(re(Mi,33050)>>>8|0)|0,Si=mt+-17685|0,p[Ne+2|0]=Si>>>0<16384?Si>>>6|0:mt>>>0<17685?0:255,mt=Ne,Ne=ni-(re(Mi,6419)>>>8|0)-(re(bn,13320)>>>8)|0,ni=Ne+8708|0,p[mt+1|0]=ni>>>0<16384?ni>>>6|0:(Ne|0)<-8708?0:255,ni=re(Ft,6),Ne=ni+L|0,H=H+(te+ce<<1)>>>3|0,Mi=H+Ae|0,bn=Mi>>>1&255,te=re(F[n+Ji|0],19077)>>>8|0,mt=(re(bn,33050)>>>8|0)+te|0,Si=mt+-17685|0,p[Ne+2|0]=Si>>>0<16384?Si>>>6|0:mt>>>0<17685?0:255,Mi=Mi>>>17|0,mt=te+(re(Mi,26149)>>>8|0)|0,Si=mt+-14234|0,p[Ne|0]=Si>>>0<16384?Si>>>6|0:mt>>>0<14234?0:255,mt=Ne,te=te-(re(bn,6419)>>>8|0)-(re(Mi,13320)>>>8)|0,Ne=te+8708|0,p[mt+1|0]=Ne>>>0<16384?Ne>>>6|0:(te|0)<-8708?0:255,s&&(te=R+sn|0,H=H+Ze|0,Ne=H>>>17|0,Ze=re(F[s+ci|0],19077)>>>8|0,ci=(re(Ne,26149)>>>8|0)+Ze|0,sn=ci+-14234|0,p[te|0]=sn>>>0<16384?sn>>>6|0:ci>>>0<14234?0:255,H=H>>>1&255,ci=Ze+(re(H,33050)>>>8|0)|0,sn=ci+-17685|0,p[te+2|0]=sn>>>0<16384?sn>>>6|0:ci>>>0<17685?0:255,mt=te,te=Ze-(re(H,6419)>>>8|0)-(re(Ne,13320)>>>8)|0,Ze=te+8708|0,p[mt+1|0]=Ze>>>0<16384?Ze>>>6|0:(te|0)<-8708?0:255,te=R+ni|0,Ze=re(F[s+Ji|0],19077)>>>8|0,H=ce+ar|0,ci=H>>>1&255,Ji=Ze+(re(ci,33050)>>>8|0)|0,Ne=Ji+-17685|0,p[te+2|0]=Ne>>>0<16384?Ne>>>6|0:Ji>>>0<17685?0:255,H=H>>>17|0,Ji=Ze+(re(H,26149)>>>8|0)|0,Ne=Ji+-14234|0,p[te|0]=Ne>>>0<16384?Ne>>>6|0:Ji>>>0<14234?0:255,Ne=te,te=Ze-(re(ci,6419)>>>8|0)-(re(H,13320)>>>8)|0,Ze=te+8708|0,p[Ne+1|0]=Ze>>>0<16384?Ze>>>6|0:(te|0)<-8708?0:255),H=(Ft|0)!=(Tr|0),Ft=Ft+1|0,te=Ae,Ze=ce,!!H;);}e:{if(G&1||(g=re(Pt,3),a=g+L|0,n=re(F[n+Pt|0],19077)>>>8|0,k=(re(Ae,3)+ce|0)+131074|0,E=k>>>18|0,L=n+(re(E,26149)>>>8|0)|0,G=L+-14234|0,p[a|0]=G>>>0<16384?G>>>6|0:L>>>0<14234?0:255,k=k>>>2&255,L=n+(re(k,33050)>>>8|0)|0,G=L+-17685|0,p[a+2|0]=G>>>0<16384?G>>>6|0:L>>>0<17685?0:255,L=a,n=n-(re(k,6419)>>>8|0)-(re(E,13320)>>>8)|0,a=n+8708|0,p[L+1|0]=a>>>0<16384?a>>>6|0:(n|0)<-8708?0:255,!s))break e;n=g+R|0,s=re(F[s+Pt|0],19077)>>>8|0,a=(re(ce,3)+Ae|0)+131074|0,g=a>>>18|0,k=s+(re(g,26149)>>>8|0)|0,E=k+-14234|0,p[n|0]=E>>>0<16384?E>>>6|0:k>>>0<14234?0:255,a=a>>>2&255,k=s+(re(a,33050)>>>8|0)|0,E=k+-17685|0,p[n+2|0]=E>>>0<16384?E>>>6|0:k>>>0<17685?0:255,k=n,n=s-(re(a,6419)>>>8|0)-(re(g,13320)>>>8)|0,s=n+8708|0,p[k+1|0]=s>>>0<16384?s>>>6|0:(n|0)<-8708?0:255}}function No(n,s,a,g,k,E,L,R,G){n=n|0,s=s|0,a=a|0,g=g|0,k=k|0,E=E|0,L=L|0,R=R|0,G=G|0;var H=0,te=0,ce=0,Ae=0,Ne=0,Ze=0,mt=0,Pt=0,Ft=0,ni=0,ci=0,Mi=0,Si=0,Ji=0,sn=0,bn=0,ar=0,Tr=0;ce=re(F[n|0],19077)>>>8|0,Ze=F[k|0]|F[E|0]<<16,te=F[a|0]|F[g|0]<<16,Ae=(Ze+re(te,3)|0)+131074|0,Ft=Ae>>>18|0,Pt=ce+(re(Ft,26149)>>>8|0)|0,H=Pt+-14234|0,p[L+2|0]=H>>>0<16384?H>>>6|0:Pt>>>0<14234?0:255,Ae=Ae>>>2&255,Pt=ce+(re(Ae,33050)>>>8|0)|0,H=Pt+-17685|0,p[L|0]=H>>>0<16384?H>>>6|0:Pt>>>0<17685?0:255,ce=ce-(re(Ae,6419)>>>8|0)-(re(Ft,13320)>>>8)|0,Ae=ce+8708|0,p[L+1|0]=Ae>>>0<16384?Ae>>>6|0:(ce|0)<-8708?0:255,s&&(ce=re(F[s|0],19077)>>>8|0,Ae=(re(Ze,3)+te|0)+131074|0,Ft=Ae>>>18|0,Pt=ce+(re(Ft,26149)>>>8|0)|0,H=Pt+-14234|0,p[R+2|0]=H>>>0<16384?H>>>6|0:Pt>>>0<14234?0:255,Ae=Ae>>>2&255,Pt=ce+(re(Ae,33050)>>>8|0)|0,H=Pt+-17685|0,p[R|0]=H>>>0<16384?H>>>6|0:Pt>>>0<17685?0:255,ce=ce-(re(Ae,6419)>>>8|0)-(re(Ft,13320)>>>8)|0,Ae=ce+8708|0,p[R+1|0]=Ae>>>0<16384?Ae>>>6|0:(ce|0)<-8708?0:255),Pt=G+-1|0;e:{if((G|0)<3){ce=Ze,Ae=te;break e}for(ce=Pt>>1,Tr=(ce|0)>1?ce:1,Ft=1;ce=F[k+Ft|0]|F[E+Ft|0]<<16,Ae=F[a+Ft|0]|F[g+Ft|0]<<16,ni=Ae+Ze|0,H=(ce+(ni+te|0)|0)+524296|0,Ji=Ft<<1,ci=Ji+-1|0,sn=re(ci,3),Ne=sn+L|0,ar=H+(ni<<1)>>>3|0,Mi=ar+te|0,bn=Mi>>>17|0,ni=re(F[n+ci|0],19077)>>>8|0,mt=(re(bn,26149)>>>8|0)+ni|0,Si=mt+-14234|0,p[Ne+2|0]=Si>>>0<16384?Si>>>6|0:mt>>>0<14234?0:255,Mi=Mi>>>1&255,mt=ni+(re(Mi,33050)>>>8|0)|0,Si=mt+-17685|0,p[Ne|0]=Si>>>0<16384?Si>>>6|0:mt>>>0<17685?0:255,mt=Ne,Ne=ni-(re(Mi,6419)>>>8|0)-(re(bn,13320)>>>8)|0,ni=Ne+8708|0,p[mt+1|0]=ni>>>0<16384?ni>>>6|0:(Ne|0)<-8708?0:255,ni=re(Ft,6),Ne=ni+L|0,H=H+(te+ce<<1)>>>3|0,Mi=H+Ae|0,bn=Mi>>>17|0,te=re(F[n+Ji|0],19077)>>>8|0,mt=(re(bn,26149)>>>8|0)+te|0,Si=mt+-14234|0,p[Ne+2|0]=Si>>>0<16384?Si>>>6|0:mt>>>0<14234?0:255,Mi=Mi>>>1&255,mt=te+(re(Mi,33050)>>>8|0)|0,Si=mt+-17685|0,p[Ne|0]=Si>>>0<16384?Si>>>6|0:mt>>>0<17685?0:255,mt=Ne,te=te-(re(Mi,6419)>>>8|0)-(re(bn,13320)>>>8)|0,Ne=te+8708|0,p[mt+1|0]=Ne>>>0<16384?Ne>>>6|0:(te|0)<-8708?0:255,s&&(te=R+sn|0,H=H+Ze|0,Ne=H>>>17|0,Ze=re(F[s+ci|0],19077)>>>8|0,ci=(re(Ne,26149)>>>8|0)+Ze|0,sn=ci+-14234|0,p[te+2|0]=sn>>>0<16384?sn>>>6|0:ci>>>0<14234?0:255,H=H>>>1&255,ci=Ze+(re(H,33050)>>>8|0)|0,sn=ci+-17685|0,p[te|0]=sn>>>0<16384?sn>>>6|0:ci>>>0<17685?0:255,mt=te,te=Ze-(re(H,6419)>>>8|0)-(re(Ne,13320)>>>8)|0,Ze=te+8708|0,p[mt+1|0]=Ze>>>0<16384?Ze>>>6|0:(te|0)<-8708?0:255,te=R+ni|0,Ze=re(F[s+Ji|0],19077)>>>8|0,H=ce+ar|0,ci=H>>>17|0,Ji=Ze+(re(ci,26149)>>>8|0)|0,Ne=Ji+-14234|0,p[te+2|0]=Ne>>>0<16384?Ne>>>6|0:Ji>>>0<14234?0:255,H=H>>>1&255,Ji=Ze+(re(H,33050)>>>8|0)|0,Ne=Ji+-17685|0,p[te|0]=Ne>>>0<16384?Ne>>>6|0:Ji>>>0<17685?0:255,Ne=te,te=Ze-(re(H,6419)>>>8|0)-(re(ci,13320)>>>8)|0,Ze=te+8708|0,p[Ne+1|0]=Ze>>>0<16384?Ze>>>6|0:(te|0)<-8708?0:255),H=(Ft|0)!=(Tr|0),Ft=Ft+1|0,te=Ae,Ze=ce,!!H;);}e:{if(G&1||(g=re(Pt,3),a=g+L|0,n=re(F[n+Pt|0],19077)>>>8|0,k=(re(Ae,3)+ce|0)+131074|0,E=k>>>18|0,L=n+(re(E,26149)>>>8|0)|0,G=L+-14234|0,p[a+2|0]=G>>>0<16384?G>>>6|0:L>>>0<14234?0:255,k=k>>>2&255,L=n+(re(k,33050)>>>8|0)|0,G=L+-17685|0,p[a|0]=G>>>0<16384?G>>>6|0:L>>>0<17685?0:255,L=a,n=n-(re(k,6419)>>>8|0)-(re(E,13320)>>>8)|0,a=n+8708|0,p[L+1|0]=a>>>0<16384?a>>>6|0:(n|0)<-8708?0:255,!s))break e;n=g+R|0,s=re(F[s+Pt|0],19077)>>>8|0,a=(re(ce,3)+Ae|0)+131074|0,g=a>>>18|0,k=s+(re(g,26149)>>>8|0)|0,E=k+-14234|0,p[n+2|0]=E>>>0<16384?E>>>6|0:k>>>0<14234?0:255,a=a>>>2&255,k=s+(re(a,33050)>>>8|0)|0,E=k+-17685|0,p[n|0]=E>>>0<16384?E>>>6|0:k>>>0<17685?0:255,k=n,n=s-(re(a,6419)>>>8|0)-(re(g,13320)>>>8)|0,s=n+8708|0,p[k+1|0]=s>>>0<16384?s>>>6|0:(n|0)<-8708?0:255}}function Ho(n,s){var a=0,g=0,k=0,E=0,L=0,R=0,G=0,H=0,te=0,ce=0,Ae=0;e:{if(!n)break e;if(c[n>>2]=0,c[n+8>>2]=5010,!s){c[n>>2]=2,c[n+4>>2]=0,c[n+8>>2]=5013;break e}if(R=c[s+60>>2],R>>>0<=3){c[n>>2]=7,c[n+4>>2]=0,c[n+8>>2]=5050;break e}if(a=c[s+64>>2],k=F[a+1|0],E=F[a+2|0],g=F[a|0],L=g>>>4&1,p[n+42|0]=L,G=g>>>1&7,p[n+41|0]=G,H=(g^-1)&1,p[n+40|0]=H,g=(g|k<<8|E<<16)>>>5|0,c[n+44>>2]=g,G>>>0>=4){c[n>>2]=3,c[n+4>>2]=0,c[n+8>>2]=5068;break e}if(!L){c[n>>2]=4,c[n+4>>2]=0,c[n+8>>2]=5099;break e}if(k=R+-3|0,E=a+3|0,H){if(k>>>0<=6){c[n>>2]=7,c[n+4>>2]=0,c[n+8>>2]=5122;break e}if(!(F[a+5|0]==42&&!(F[E|0]!=157|F[a+4|0]!=1))){c[n>>2]=3,c[n+4>>2]=0,c[n+8>>2]=5150;break e}g=F[a+6|0]|F[a+7|0]<<8&16128,Di[n+48>>1]=g,p[n+52|0]=F[a+7|0]>>>6,k=F[a+8|0]|F[a+9|0]<<8&16128,Di[n+50>>1]=k,E=F[a+9|0],c[n+292>>2]=k+15>>>4,c[n+288>>2]=g+15>>>4,p[n+53|0]=E>>>6,c[s+84>>2]=0,c[s+4>>2]=k,c[s>>2]=g,c[s+100>>2]=k,c[s+96>>2]=g,c[s+92>>2]=0,c[s+88>>2]=k,c[s+80>>2]=g,c[s+72>>2]=0,c[s+76>>2]=0,c[s+16>>2]=k,c[s+12>>2]=g,s=n+904|0,Di[s>>1]=-1,p[s+2|0]=-1,c[n+120>>2]=0,c[n+112>>2]=1,c[n+116>>2]=0,c[n+104>>2]=0,c[n+108>>2]=0,k=R+-10|0,E=a+10|0,g=c[n+44>>2]}t:{if(g>>>0>k>>>0){if(s=0,c[n>>2])break t;c[n>>2]=7,c[n+4>>2]=0,c[n+8>>2]=5164;break e}a=n+12|0,Ir(a,E,g),L=c[n+44>>2],F[n+40|0]&&(ce=n,Ae=Lr(a,1),p[ce+54|0]=Ae,ce=n,Ae=Lr(a,1),p[ce+55|0]=Ae),s=Lr(a,1),c[n+104>>2]=s;i:{if(s){if(ce=n,Ae=Lr(a,1),c[ce+108>>2]=Ae,Lr(a,1)&&(ce=n,Ae=Lr(a,1),c[ce+112>>2]=Ae,s=n,Lr(a,1)?g=js(a,7):g=0,p[s+116|0]=g,s=n,Lr(a,1)?g=js(a,7):g=0,p[s+117|0]=g,s=n,Lr(a,1)?g=js(a,7):g=0,p[s+118|0]=g,s=n,Lr(a,1)?g=js(a,7):g=0,p[s+119|0]=g,s=n,Lr(a,1)?g=js(a,6):g=0,p[s+120|0]=g,s=n,Lr(a,1)?g=js(a,6):g=0,p[s+121|0]=g,s=n,Lr(a,1)?g=js(a,6):g=0,p[s+122|0]=g,s=n,Lr(a,1)?g=js(a,6):g=0,p[s+123|0]=g),!c[n+108>>2])break i;s=n,Lr(a,1)?g=Lr(a,8):g=255,p[s+904|0]=g,s=n,Lr(a,1)?g=Lr(a,8):g=255,p[s+905|0]=g,s=n,g=255;n:{if(!Lr(a,1))break n;g=Lr(a,8)}p[s+906|0]=g;break i}c[n+108>>2]=0}if(c[n+36>>2]){if(s=0,c[n>>2])break t;c[n>>2]=3,c[n+4>>2]=0,c[n+8>>2]=5185;break e}ce=n,Ae=Lr(a,1),c[ce+56>>2]=Ae,ce=n,Ae=Lr(a,6),c[ce+60>>2]=Ae,ce=n- -64|0,Ae=Lr(a,3),c[ce>>2]=Ae,s=Lr(a,1),c[n+68>>2]=s;i:{if(!s||!Lr(a,1)||(Lr(a,1)&&(ce=n,Ae=js(a,6),c[ce+72>>2]=Ae),Lr(a,1)&&(ce=n,Ae=js(a,6),c[ce+76>>2]=Ae),Lr(a,1)&&(ce=n,Ae=js(a,6),c[ce+80>>2]=Ae),Lr(a,1)&&(ce=n,Ae=js(a,6),c[ce+84>>2]=Ae),Lr(a,1)&&(ce=n,Ae=js(a,6),c[ce+88>>2]=Ae),Lr(a,1)&&(ce=n,Ae=js(a,6),c[ce+92>>2]=Ae),Lr(a,1)&&(ce=n,Ae=js(a,6),c[ce+96>>2]=Ae),!Lr(a,1)))break i;ce=n,Ae=js(a,6),c[ce+100>>2]=Ae}if(s=n,c[n+60>>2]?g=c[n+56>>2]?1:2:g=0,c[s+2308>>2]=g,c[n+36>>2]){if(s=0,c[n>>2])break t;c[n>>2]=3,c[n+4>>2]=0,c[n+8>>2]=5213;break e}H=Lr(a,2),R=-1<<H^-1,c[n+312>>2]=R,g=7;i:{if(s=k-L|0,G=re(R,3),s>>>0>=G>>>0){if(te=k+E|0,g=s-G|0,s=E+L|0,E=G+s|0,H)for(G=R>>>0>1?R:1,k=0;L=F[s|0]|F[s+1|0]<<8|F[s+2|0]<<16,L=L>>>0>g>>>0?g:L,Ir((re(k,28)+n|0)+316|0,E,L),g=g-L|0,E=E+L|0,s=s+3|0,k=k+1|0,(G|0)!=(k|0););if(Ir((re(R,28)+n|0)+316|0,E,g),g=5,E>>>0<te>>>0)break i}if(s=0,c[n>>2])break t;c[n>>2]=g,c[n+4>>2]=0,c[n+8>>2]=5240;break e}if(bu(n),!F[n+40|0]){if(s=0,c[n>>2])break t;c[n>>2]=4,c[n+4>>2]=0,c[n+8>>2]=5264;break e}Lr(a,1),Ta(a,n),c[n+4>>2]=1,s=1}return s}return 0}function Es(n,s){var a=0,g=0,k=0,E=0,L=0,R=0,G=0,H=0,te=0,ce=0,Ae=0,Ne=0,Ze=0,mt=0,Pt=0,Ft=0,ni=0,ci=0,Mi=0,Si=0,Ji=0;if(k=c[n+20>>2],c[k+108>>2]<(s|0)){e:{if(!c[n+132>>2]&&(fc(),!c[n+132>>2]))break e;Ae=c[k+100>>2],ci=re(Ae,c[k+104>>2]),G=c[k+112>>2],n=(G|0)/(Ae|0)|0,ni=re(s,Ae);t:{i:{if((G|0)>=(ni|0)){Ze=k+48|0;break i}H=G-re(n,Ae)|0,L=c[k+152>>2],E=0;n:{if(!L)break n;E=c[c[k+160>>2]+(re(c[k+156>>2],n>>L)+(H>>L)<<2)>>2]}if(Ze=k+48|0,c[Ze>>2])break i;for(Mi=c[k+148>>2],Si=c[k+16>>2],mt=k+24|0,Ft=c[k+168>>2]+re(E,548)|0;;){if(!(H&Mi)){a=c[k+168>>2],L=c[k+152>>2],E=0;n:{if(!L)break n;E=c[c[k+160>>2]+(re(c[k+156>>2],n>>L)+(H>>L)<<2)>>2]}Ft=a+re(E,548)|0}g=c[k+44>>2],(g|0)>=32&&(Se(mt),g=c[k+44>>2]),te=k,E=c[mt+4>>2],a=E,R=g&63,L=R&31,Pt=c[mt>>2],a=c[Ft>>2]+(((32<=(R&63)>>>0?a>>>L|0:((1<<L)-1&a)<<32-L|Pt>>>L)&255)<<2)|0,L=F[a|0],L>>>0>=9&&(g=g+8|0,c[k+44>>2]=g,R=(pn[a+2>>1]<<2)+a|0,a=E,Ne=g&63,ce=Ne&31,a=R+(((-1<<L+-8^-1)&(32<=Ne>>>0?a>>>ce|0:((1<<ce)-1&a)<<32-ce|Pt>>>ce))<<2)|0,L=F[a|0]),R=(L&255)+g|0,c[te+44>>2]=R,a=pn[a+2>>1];n:{if(a>>>0<=255){if(p[G+Si|0]=a,G=G+1|0,H=H+1|0,(H|0)<(Ae|0))break n;if(E=n+1|0,H=0,(n|0)>=(s|0)){n=E;break n}if(E&15){n=E;break n}B(k,E),n=E;break n}if(te=1,a>>>0>279)break t;L=a+-256|0,a>>>0>=260&&(E=a+-258>>1,L=eo(mt,E)+((L&1|2)<<E)|0,Pt=c[k+24>>2],R=c[k+44>>2],E=c[k+28>>2]),ce=k,a=E,Ne=R&63,g=Ne&31,g=c[Ft+16>>2]+(((32<=Ne>>>0?a>>>g|0:((1<<g)-1&a)<<32-g|Pt>>>g)&255)<<2)|0,a=F[g|0],a>>>0>=9&&(R=R+8|0,c[k+44>>2]=R,Ji=(pn[g+2>>1]<<2)+g|0,Ne=R&63,g=Ne&31,g=Ji+(((-1<<a+-8^-1)&(32<=Ne>>>0?E>>>g|0:((1<<g)-1&E)<<32-g|Pt>>>g))<<2)|0,a=F[g|0]),E=(a&255)+R|0,c[ce+44>>2]=E,g=pn[g+2>>1],(E|0)>=32&&Se(mt),E=L+1|0,g>>>0>=4&&(a=g+-2>>1,g=eo(mt,a)+((g&1|2)<<a)|0);o:{if((g+1|0)>=121){a=g+-119|0;break o}a=F[g+1264|0],a=(re(a>>>4|0,Ae)-(a&15)|0)+8|0,a=(a|0)>1?a:1}if((ci-G|0)<(E|0)|(G|0)<(a|0))break t;g=G+Si|0,R=g-a|0;o:{l:{if((E|0)<8)break l;r:{u:switch(a+-1|0){case 0:a=F[R|0],te=re(a,16843009);break r;case 1:a=F[R|0]|F[R+1|0]<<8,te=re(a,65537);break r;case 3:break u;default:break l}a=F[R|0]|F[R+1|0]<<8|(F[R+2|0]<<16|F[R+3|0]<<24),te=a}r:{u:{s:{if(g&3){if(p[g|0]=a,te=ba(te,24),R=R+1|0,g=g+1|0,g&3)break s;a=L>>>2|0;break u}L=E,a=L>>>2|0;break u}for(;p[g|0]=F[R|0],ce=L,L=L+-1|0,te=ba(te,24),R=R+1|0,g=g+1|0,!!(g&3););if(a=0,(ce|0)<5)break r;a=L>>2}for(ce=(a|0)>1?a:1,a=0;c[(a<<2)+g>>2]=te,a=a+1|0,(ce|0)!=(a|0););a=ce<<2}if((a|0)>=(L|0))break o;for(;p[a+g|0]=F[a+R|0],a=a+1|0,(L|0)!=(a|0););break o}if((a|0)<(E|0)){if(a=0,(E|0)<=0)break o;for(;p[a+g|0]=F[a+R|0],te=(a|0)!=(L|0),a=a+1|0,!!te;);break o}Yr(g,R,E)}if(G=E+G|0,H=E+H|0,(H|0)>=(Ae|0))for(;H=H-Ae|0,E=n,n=E+1|0,n&15|(E|0)>=(s|0)||B(k,n),(H|0)>=(Ae|0););if(!(H&Mi)|(G|0)>=(ni|0))break n;a=c[k+168>>2],L=c[k+152>>2],E=0;o:{if(!L)break o;E=c[c[k+160>>2]+(re(c[k+156>>2],n>>L)+(H>>L)<<2)>>2]}Ft=a+re(E,548)|0}if(c[Ze>>2]){c[Ze>>2]=1;break i}if(g=0,g=c[k+40>>2]==c[k+36>>2]?c[k+44>>2]>64:g,c[Ze>>2]=g,(G|0)>=(ni|0))break i;if(!!g)break}}B(k,(n|0)>(s|0)?s:n),te=0}s=Ze,E=s,n=1;t:{if(c[s>>2]||(n=0,c[k+40>>2]!=c[k+36>>2]))break t;n=c[k+44>>2]>64}return c[E>>2]=n,!n|(ci|0)<=(G|0)&&!te?(c[k+112>>2]=G,1):(c[k>>2]=n?5:3,0)}n=Wl(k,c[k+16>>2],c[k+100>>2],c[k+104>>2],s,1)}else n=1;return n}function ps(n,s){n=n|0,s=s|0;var a=0,g=0,k=0,E=0,L=0,R=0,G=0,H=0,te=0,ce=0,Ae=0,Ne=0,Ze=0,mt=0,Pt=0,Ft=0,ni=0,ci=0,Mi=0,Si=0,Ji=0,sn=0,bn=0,ar=0,Tr=0;ci=Un+-64|0,Un=ci,k=c[n+2280>>2],bn=c[n+160>>2],Pt=c[n+2268>>2],E=c[n+2284>>2],Ji=F[c[n+2308>>2]+4863|0],a=Ji>>>1|0,Ne=c[n+2276>>2],Mi=c[n+2272>>2],Tr=c[n+308>>2],sn=c[n+164>>2],c[n+148>>2]==2&&zu(n,n+160|0),L=re(k,bn),ar=re(k,Ji),g=re(E,bn),Si=re(a,E);e:{if(!c[n+168>>2]||(a=c[n+296>>2],(a|0)>=c[n+304>>2]))break e;for(Ze=c[n+164>>2];;){ce=c[n+172>>2]+(a<<2)|0,R=F[ce|0];t:{if(!R)break t;if(E=c[n+160>>2],H=c[n+2280>>2],G=(c[n+2268>>2]+(re(E,H)<<4)|0)+(a<<4)|0,c[n+2308>>2]==1){if((a|0)>=1&&ft[c[2717]](G,H,R+4|0),F[ce+2|0]&&ft[c[2719]](G,H,R),E=ce+2|0,(Ze|0)>=1&&ft[c[2716]](G,H,R+4|0),!F[E|0])break t;ft[c[2718]](G,H,R);break t}if(te=F[ce+1|0],Ft=c[n+2284>>2],k=re(Ft,E)<<3,E=a<<3,ni=(k+c[n+2276>>2]|0)+E|0,mt=E+(k+c[n+2272>>2]|0)|0,Ae=F[ce+3|0],(a|0)>=1&&(E=R+4|0,ft[c[2709]](G,H,E,te,Ae),ft[c[2711]](mt,ni,Ft,E,te,Ae)),F[ce+2|0]&&(ft[c[2713]](G,H,R,te,Ae),ft[c[2715]](mt,ni,Ft,R,te,Ae)),k=ce+2|0,(Ze|0)>=1&&(E=R+4|0,ft[c[2708]](G,H,E,te,Ae),ft[c[2710]](mt,ni,Ft,E,te,Ae)),!F[k|0])break t;ft[c[2712]](G,H,R,te,Ae),ft[c[2714]](mt,ni,Ft,R,te,Ae)}if(a=a+1|0,!((a|0)<c[n+304>>2]))break}}Ae=L<<4,mt=Pt-ar|0,H=g<<3,Ze=Ne-Si|0,Pt=Mi-Si|0;e:{if(!c[n+540>>2]||(G=c[n+296>>2],g=c[n+304>>2],(G|0)>=(g|0)))break e;for(te=n+552|0;;){if(a=c[n+176>>2]+re(G,800)|0,k=F[a+796|0],k>>>0>=4){for(Ne=a+796|0,ce=c[n+2284>>2],Ft=re(ce,c[n+160>>2])<<3,Mi=c[n+2276>>2],E=c[n+2272>>2],R=c[n+548>>2],L=c[n+544>>2],g=0;a=te+(L<<2)|0,ni=c[a>>2]-c[te+(R<<2)>>2]|0,c[a>>2]=ni&2147483647,a=c[n+544>>2]+1|0,L=(a|0)==55?0:a,c[n+544>>2]=L,a=c[n+548>>2]+1|0,R=(a|0)==55?0:a,c[n+548>>2]=R,p[g+ci|0]=re(k,ni<<1>>24)>>>8^128,g=g+1|0,(g|0)!=64;);for(k=G<<3,ft[c[2720]](ci,k+(E+Ft|0)|0,ce),E=F[Ne|0],R=c[n+548>>2],L=c[n+544>>2],g=0;a=te+(L<<2)|0,Ne=c[a>>2]-c[te+(R<<2)>>2]|0,c[a>>2]=Ne&2147483647,a=c[n+544>>2]+1|0,L=(a|0)==55?0:a,c[n+544>>2]=L,a=c[n+548>>2]+1|0,R=(a|0)==55?0:a,c[n+548>>2]=R,p[g+ci|0]=re(E,Ne<<1>>24)>>>8^128,g=g+1|0,(g|0)!=64;);ft[c[2720]](ci,k+(Ft+Mi|0)|0,ce),g=c[n+304>>2]}if(G=G+1|0,!((G|0)<(g|0)))break}}mt=Ae+mt|0,E=H+Ze|0,Ne=H+Pt|0,Mi=Tr+-1|0;e:{t:{g=1;i:{if(!c[s+44>>2])break i;a=sn<<4,k=a+16|0;n:{if(sn){c[s+24>>2]=Ne,c[s+20>>2]=mt,L=E,a=a-Ji|0;break n}c[s+20>>2]=Ae+c[n+2268>>2],c[s+24>>2]=H+c[n+2272>>2],L=H+c[n+2276>>2]|0,a=0}if(c[s+28>>2]=L,L=0,c[s+104>>2]=0,g=c[s+88>>2],k=k-((sn|0)>=(Mi|0)?0:Ji)|0,Ze=(k|0)>(g|0)?g:k,!(!c[n+2348>>2]|(Ze|0)<=(a|0))&&(L=Fs(n,s,a,Ze-a|0),c[s+104>>2]=L,!L))break t;if(k=c[s+84>>2],(k|0)>(a|0)){g=k-a|0,c[s+20>>2]=c[s+20>>2]+re(g,c[n+2280>>2]),a=re(c[n+2284>>2],g>>1),c[s+24>>2]=a+c[s+24>>2],c[s+28>>2]=a+c[s+28>>2];n:{if(!L){L=0;break n}L=re(g,c[s>>2])+L|0,c[s+104>>2]=L}a=k}if(g=1,(Ze|0)<=(a|0))break i;Pt=c[s+76>>2],c[s+20>>2]=Pt+c[s+20>>2],g=Pt>>1,c[s+24>>2]=g+c[s+24>>2],c[s+28>>2]=g+c[s+28>>2],L&&(c[s+104>>2]=L+Pt),c[s+8>>2]=a-k,c[s+16>>2]=Ze-a,c[s+12>>2]=c[s+80>>2]-Pt,g=ft[c[s+44>>2]](s)|0}if(c[n+156>>2]!=(bn+1|0)|(sn|0)>=(Mi|0))break e;Yr(c[n+2268>>2]-ar|0,mt+(c[n+2280>>2]<<4)|0,ar),s=0-Si|0,Yr(s+c[n+2272>>2]|0,Ne+(c[n+2284>>2]<<3)|0,Si),Yr(s+c[n+2276>>2]|0,E+(c[n+2284>>2]<<3)|0,Si);break e}g=Ko(n,3,4912)}return Un=ci- -64|0,g|0}function Ur(n){n=n|0;var s=0,a=0,g=0,k=0,E=0,L=0,R=0,G=0,H=0;e:{if(!n)break e;g=n+-8|0,a=c[n+-4>>2],n=a&-8,E=g+n|0;t:{if(a&1)break t;if(!(a&3)||(a=c[g>>2],g=g-a|0,g>>>0<Qn[2888]))break e;if(n=n+a|0,c[2889]!=(g|0)){if(a>>>0<=255){if(k=c[g+8>>2],a=a>>>3|0,s=c[g+12>>2],(s|0)==(k|0)){G=11536,H=c[2884]&ba(-2,a),c[G>>2]=H;break t}c[k+12>>2]=s,c[s+8>>2]=k;break t}R=c[g+24>>2],a=c[g+12>>2];i:{if((a|0)!=(g|0)){s=c[g+8>>2],c[s+12>>2]=a,c[a+8>>2]=s;break i}n:{if(k=g+20|0,s=c[k>>2],s||(k=g+16|0,s=c[k>>2],s))break n;a=0;break i}for(;L=k,a=s,k=a+20|0,s=c[k>>2],!(!s&&(k=a+16|0,s=c[a+16>>2],!s)););c[L>>2]=0}if(!R)break t;k=c[g+28>>2],s=(k<<2)+11840|0;i:{if(c[s>>2]==(g|0)){if(c[s>>2]=a,a)break i;G=11540,H=c[2885]&ba(-2,k),c[G>>2]=H;break t}if(c[R+(c[R+16>>2]==(g|0)?16:20)>>2]=a,!a)break t}if(c[a+24>>2]=R,s=c[g+16>>2],s&&(c[a+16>>2]=s,c[s+24>>2]=a),s=c[g+20>>2],!s)break t;c[a+20>>2]=s,c[s+24>>2]=a;break t}if(a=c[E+4>>2],(a&3)!=3)break t;c[2886]=n,c[E+4>>2]=a&-2,c[g+4>>2]=n|1,c[n+g>>2]=n;return}if(E>>>0<=g>>>0||(a=c[E+4>>2],!(a&1)))break e;t:{if(!(a&2)){if((E|0)==c[2890]){if(c[2890]=g,n=c[2887]+n|0,c[2887]=n,c[g+4>>2]=n|1,c[2889]!=(g|0))break e;c[2886]=0,c[2889]=0;return}if((E|0)==c[2889]){c[2889]=g,n=c[2886]+n|0,c[2886]=n,c[g+4>>2]=n|1,c[n+g>>2]=n;return}n=(a&-8)+n|0;i:{if(a>>>0<=255){if(s=c[E+8>>2],a=a>>>3|0,k=c[E+12>>2],(s|0)==(k|0)){G=11536,H=c[2884]&ba(-2,a),c[G>>2]=H;break i}c[s+12>>2]=k,c[k+8>>2]=s;break i}R=c[E+24>>2],a=c[E+12>>2];n:{if((E|0)!=(a|0)){s=c[E+8>>2],c[s+12>>2]=a,c[a+8>>2]=s;break n}o:{if(k=E+20|0,s=c[k>>2],s||(k=E+16|0,s=c[k>>2],s))break o;a=0;break n}for(;L=k,a=s,k=a+20|0,s=c[k>>2],!(!s&&(k=a+16|0,s=c[a+16>>2],!s)););c[L>>2]=0}if(!R)break i;k=c[E+28>>2],s=(k<<2)+11840|0;n:{if((E|0)==c[s>>2]){if(c[s>>2]=a,a)break n;G=11540,H=c[2885]&ba(-2,k),c[G>>2]=H;break i}if(c[R+((E|0)==c[R+16>>2]?16:20)>>2]=a,!a)break i}if(c[a+24>>2]=R,s=c[E+16>>2],s&&(c[a+16>>2]=s,c[s+24>>2]=a),s=c[E+20>>2],!s)break i;c[a+20>>2]=s,c[s+24>>2]=a}if(c[g+4>>2]=n|1,c[n+g>>2]=n,c[2889]!=(g|0))break t;c[2886]=n;return}c[E+4>>2]=a&-2,c[g+4>>2]=n|1,c[n+g>>2]=n}if(n>>>0<=255){n=n>>>3|0,a=(n<<3)+11576|0,s=c[2884],n=1<<n;t:{if(!(s&n)){c[2884]=n|s,n=a;break t}n=c[a+8>>2]}c[a+8>>2]=g,c[n+12>>2]=g,c[g+12>>2]=a,c[g+8>>2]=n;return}c[g+16>>2]=0,c[g+20>>2]=0,E=g,k=n>>>8|0,s=0;t:{if(!k||(s=31,n>>>0>16777215))break t;a=k,k=k+1048320>>>16&8,s=a<<k,R=s+520192>>>16&4,s=s<<R,L=s+245760>>>16&2,s=(s<<L>>>15|0)-(L|(k|R))|0,s=(s<<1|n>>>s+21&1)+28|0}c[E+28>>2]=s,L=(s<<2)+11840|0;t:{i:{k=c[2885],a=1<<s;n:{if(!(k&a)){c[2885]=a|k,c[L>>2]=g,c[g+24>>2]=L;break n}for(k=n<<((s|0)==31?0:25-(s>>>1|0)|0),a=c[L>>2];;){if(s=a,(c[a+4>>2]&-8)==(n|0))break i;if(a=k>>>29|0,k=k<<1,L=(s+(a&4)|0)+16|0,a=c[L>>2],!a)break}c[L>>2]=g,c[g+24>>2]=s}c[g+12>>2]=g,c[g+8>>2]=g;break t}n=c[s+8>>2],c[n+12>>2]=g,c[s+8>>2]=g,c[g+24>>2]=0,c[g+12>>2]=s,c[g+8>>2]=n}if(n=c[2892]+-1|0,c[2892]=n,n)break e;for(g=11992;n=c[g>>2],g=n+8|0,!!n;);c[2892]=-1}}function Is(n,s,a,g,k){var E=0,L=0,R=0,G=0,H=0,te=0,ce=0,Ae=0,Ne=0,Ze=0,mt=0,Pt=0,Ft=0,ni=0,ci=0,Mi=0,Si=0,Ji=0,sn=0,bn=0,ar=0;R=Un-128|0,c[R+120>>2]=0,c[R+124>>2]=0,c[R+112>>2]=0,c[R+116>>2]=0,c[R+104>>2]=0,c[R+108>>2]=0,c[R+96>>2]=0,c[R+100>>2]=0,c[R+88>>2]=0,c[R+92>>2]=0,c[R+80>>2]=0,c[R+84>>2]=0,c[R+72>>2]=0,c[R+76>>2]=0,c[R+64>>2]=0,c[R+68>>2]=0;e:{if((g|0)>=1){for(;;){if(L=c[(E<<2)+a>>2],(L|0)>15)break e;if(L=(R- -64|0)+(L<<2)|0,c[L>>2]=c[L>>2]+1,E=E+1|0,(E|0)==(g|0))break}E=c[R+64>>2]}else E=0;if((E|0)==(g|0)||(c[R+4>>2]=0,E=c[R+68>>2],(E|0)>2)||(c[R+8>>2]=E,L=c[R+72>>2],(L|0)>4)||(E=E+L|0,c[R+12>>2]=E,L=c[R+76>>2],(L|0)>8)||(E=E+L|0,c[R+16>>2]=E,L=c[R+80>>2],(L|0)>16)||(E=E+L|0,c[R+20>>2]=E,L=c[R+84>>2],(L|0)>32)||(E=E+L|0,c[R+24>>2]=E,L=c[R+88>>2],(L|0)>64)||(E=E+L|0,c[R+28>>2]=E,L=c[R+92>>2],(L|0)>128)||(E=E+L|0,c[R+32>>2]=E,L=c[R+96>>2],(L|0)>256)||(E=E+L|0,c[R+36>>2]=E,L=c[R+100>>2],(L|0)>512)||(E=E+L|0,c[R+40>>2]=E,L=c[R+104>>2],(L|0)>1024)||(E=E+L|0,c[R+44>>2]=E,L=c[R+108>>2],(L|0)>2048)||(E=E+L|0,c[R+48>>2]=E,L=c[R+112>>2],(L|0)>4096)||(E=E+L|0,c[R+52>>2]=E,L=c[R+116>>2],(L|0)>8192)||(E=E+L|0,c[R+56>>2]=E,L=c[R+120>>2],(L|0)>16384))break e;if(c[R+60>>2]=E+L,E=0,(g|0)>0)for(;;){L=c[(E<<2)+a>>2];t:{if((L|0)<1)break t;if(k){G=R+(L<<2)|0,L=c[G>>2],c[G>>2]=L+1,Di[(L<<1)+k>>1]=E;break t}L=R+(L<<2)|0,c[L>>2]=c[L>>2]+1}if(E=E+1|0,(E|0)==(g|0))break}if(L=1<<s,mt=1,ce=c[R+60>>2],(ce|0)==1){if(!k)return L;for(a=pn[k>>1]<<16,E=L;s=E+-1|0,g=(s<<2)+n|0,Di[g>>1]=a,Di[g+2>>1]=a>>>16,g=(E|0)>1,E=s,!!g;);return L}ni=1;t:{i:{if((s|0)<1)break i;for(Ne=2,E=1;;){if(Ze=mt<<1,ci=(R- -64|0)+(E<<2)|0,g=c[ci>>2],mt=Ze-g|0,(mt|0)<0)break e;if(a=E,!(!n|(g|0)<1)){for(G=g+Ae|0,Mi=a&255,te=1<<a+-1;;){for(Si=(H<<2)+n|0,g=Mi|pn[(Ae<<1)+k>>1]<<16,E=L;E=E-Ne|0,Pt=Si+(E<<2)|0,Di[Pt>>1]=g,Di[Pt+2>>1]=g>>>16,(E|0)>0;);for(g=te;E=g,g=E>>>1|0,!!(E&H););if(H=E?E+(E+-1&H)|0:H,Ae=Ae+1|0,(G|0)==(Ae|0))break}c[ci>>2]=0,Ae=G}if(ni=Ze+ni|0,Ne=Ne<<1,E=a+1|0,(s|0)==(a|0))break}if((s|0)<=14)break i;Ze=L;break t}for(bn=L+-1|0,G=s,te=-1,Ne=2,ce=n,Ze=L;;){if(Ft=0,ci=G,Ji=mt<<1,G=G+1|0,Pt=(R- -64|0)+(G<<2)|0,a=c[Pt>>2],mt=Ji-a|0,(mt|0)<0)break e;if(!(!n|(a|0)<1))for(Si=1<<ci,Ft=G-s|0,ar=Ft&255,Mi=1<<Ft,E=te;;){te=H&bn;i:{if((te|0)==(E|0)){te=E;break i}if(ce=(L<<2)+ce|0,L=Mi,E=Ft,(ci|0)<=13){E=G,g=E,a=Mi-a|0;n:{if((a|0)<1)break n;for(;;){if(g=15,E=E+1|0,(E|0)==15)break n;if(g=E,a=(a<<1)-c[(R- -64|0)+(E<<2)>>2]|0,!((a|0)>0))break}}E=g-s|0,L=1<<E}a=(te<<2)+n|0,p[a|0]=s+E,Di[a+2>>1]=(ce-n>>>2|0)-te,Ze=L+Ze|0}for(g=(H>>>s<<2)+ce|0,a=ar|pn[(Ae<<1)+k>>1]<<16,E=L;E=E-Ne|0,sn=g+(E<<2)|0,Di[sn>>1]=a,Di[sn+2>>1]=a>>>16,(E|0)>0;);for(g=Si;E=g,g=E>>>1|0,!!(E&H););if(g=c[Pt>>2],a=g+-1|0,c[Pt>>2]=a,H=E?E+(E+-1&H)|0:H,Ae=Ae+1|0,E=te,!((g|0)>1))break}if(ni=ni+Ji|0,Ne=Ne<<1,(G|0)==15)break}ce=c[R+60>>2]}Ft=((ce<<1)+-1|0)==(ni|0)?Ze:0}return Ft}function bs(n,s){var a=0,g=0,k=0,E=0,L=0,R=0,G=0,H=0,te=0,ce=0,Ae=0,Ne=0,Ze=0,mt=0,Pt=0,Ft=0,ni=0,ci=0,Mi=0,Si=0,Ji=0,sn=0,bn=0,ar=0;Ft=Un-32|0,Un=Ft,L=c[n+2256>>2],ce=c[n+2296>>2],ni=L+(ce<<1)|0,mt=c[n+2304>>2];e:{t:{if(c[n+2236>>2]&&(a=re(ce,800)+mt|0,F[a+797|0]))break t;if(k=re(ce,800)+mt|0,ci=F[k+798|0],G=3,g=Zo(k,0,768),!F[g+768|0]){a=Ft,c[a+24>>2]=0,c[a+28>>2]=0,c[a+16>>2]=0,c[a+20>>2]=0,c[a+8>>2]=0,c[a+12>>2]=0,c[a>>2]=0,c[a+4>>2]=0,E=L+-1|0,G=L+(ce<<1)|0,H=ft[c[2661]](s,n+2032|0,F[E|0]+F[G+1|0]|0,((ci<<5)+n|0)+784|0,0,a)|0,a=(H|0)>0,p[E|0]=a,p[G+1|0]=a;i:{if((H|0)>=2){ft[c[2674]](Ft,g);break i}a=re(ce,800)+mt|0,g=Di[Ft>>1]+3>>>3|0,Di[a+480>>1]=g,Di[a+448>>1]=g,Di[a+416>>1]=g,Di[a+384>>1]=g,Di[a+352>>1]=g,Di[a+320>>1]=g,Di[a+288>>1]=g,Di[a+256>>1]=g,Di[a+224>>1]=g,Di[a+192>>1]=g,Di[a+160>>1]=g,Di[a+128>>1]=g,Di[a+96>>1]=g,Di[a+64>>1]=g,Di[a+32>>1]=g,Di[a>>1]=g}G=0,E=1}for(a=F[ni|0]&15,g=((ci<<5)+n|0)+776|0,Si=L+-2|0,L=F[Si|0]&15,G=(re(G,68)+n|0)+1964|0;H=ft[c[2661]](s,G,(L&1)+(a&1)|0,g,E,k)|0,Ae=pn[k>>1],R=(H|0)>(E|0),te=a>>>1|0,a=ft[c[2661]](s,G,R+(te&1)|0,g,E,k+32|0)|0,Ne=pn[k+32>>1],Ze=(a|0)>(E|0),R=(te&126|R<<7)>>>1|0,te=ft[c[2661]](s,G,Ze+(R&1)|0,g,E,k- -64|0)|0,Ji=pn[k+64>>1],Mi=(te|0)>(E|0),Ze=(R|Ze<<7)>>>1|0,R=ft[c[2661]](s,G,Mi+(Ze&1)|0,g,E,k+96|0)|0,sn=(((a|0)>3?3:(a|0)<2?(Ne|0)!=0:2)|((H|0)>3?12:(H|0)<2?((Ae|0)!=0)<<2:8))<<4|sn<<8|((te|0)>3?12:(te|0)<2?((Ji|0)!=0)<<2:8)|((R|0)>3?3:(R|0)<2?pn[k+96>>1]!=0:2),H=(R|0)>(E|0),a=H<<3|(Ze|Mi<<7)>>>5,L=H<<7|(L&254)>>>1,k=k+128|0,Pt=Pt+1|0,(Pt|0)!=4;);for(G=n+2100|0,Pt=L>>>4|0,te=a&255,H=((ci<<5)+n|0)+792|0,L=0,a=1,E=0;g=E|4,Ae=F[Si|0]>>>g|0,R=F[ni|0]>>>g|0,g=ft[c[2661]](s,G,(Ae&1)+(R&1)|0,H,0,k)|0,Ze=pn[k>>1],Ne=(g|0)>0,R=ft[c[2661]](s,G,Ne+(R>>>1&1)|0,H,0,k+32|0)|0,Ji=pn[k+32>>1],Ae=ft[c[2661]](s,G,Ne+(Ae>>>1&1)|0,H,0,k- -64|0)|0,Mi=pn[k+64>>1],bn=(Ae|0)>0,ar=(R|0)>0,Ne=ft[c[2661]](s,G,bn+ar|0,H,0,k+96|0)|0,L=((((R|0)>3?3:(R|0)<2?(Ji|0)!=0:2)|((g|0)>3?12:(g|0)<2?((Ze|0)!=0)<<2:8))<<4|((Ae|0)>3?12:(Ae|0)<2?((Mi|0)!=0)<<2:8)|((Ne|0)>3?3:(Ne|0)<2?pn[k+96>>1]!=0:2))<<(E<<2)|L,g=(Ne|0)>0,Pt=(g<<5|ar<<4)<<E|Pt,te=(g<<1|bn)<<4<<E|te,k=k+128|0,g=a,a=0,E=2,!!g;);p[ni|0]=te,p[Si|0]=Pt,a=re(ce,800)+mt|0,c[a+792>>2]=L,c[a+788>>2]=sn,p[a+796|0]=L&43690?0:c[((ci<<5)+n|0)+804>>2],E=(L|sn)!=0;break e}p[ni|0]=0,p[L+-2|0]=0,F[a+768|0]||(p[(L+(ce<<1)|0)+1|0]=0,p[L+-1|0]=0),a=re(ce,800)+mt|0,c[a+788>>2]=0,c[a+792>>2]=0,p[a+796|0]=0}return c[n+2308>>2]>=1&&(a=c[n+2260>>2]+(c[n+2296>>2]<<2)|0,g=n,n=re(ce,800)+mt|0,n=c[((g+(F[n+798|0]<<3)|0)+(F[n+768|0]<<2)|0)+2312>>2],p[a|0]=n,p[a+1|0]=n>>>8,p[a+2|0]=n>>>16,p[a+3|0]=n>>>24,p[a+2|0]=F[a+2|0]|E),Un=Ft+32|0,!c[s+24>>2]}function Xl(n,s,a,g,k){var E=0,L=0,R=0,G=0,H=0,te=0,ce=0,Ae=0,Ne=0,Ze=0,mt=0,Pt=0,Ft=0,ni=0,ci=0,Mi=0,Si=0;Ne=Un-16|0,Un=Ne,L=c[n+8>>2];e:{t:switch(c[n>>2]){case 2:ft[c[2733]](g,re(L,a-s|0),k);break e;case 0:i:{if(s){ce=L+-1|0,te=k,E=s;break i}if(E=c[g>>2],E=E+-16777216&-16711936|E&16711935,c[k>>2]=E,ce=L+-1|0,(L|0)>=2)for(te=k+4|0,H=g+4|0;Ae=G<<2,R=c[Ae+H>>2],E=(R&-16711936)+(E&-16711936)&-16711936|(R&16711935)+(E&16711935)&16711935,c[te+Ae>>2]=E,G=G+1|0,(ce|0)!=(G|0););E=L<<2,te=E+k|0,g=g+E|0,E=1}if(H=E,(H|0)<(a|0))for(E=c[n+4>>2],Ft=1<<E,Mi=Ft+-1|0,Ze=0-Ft|0,mt=0-L|0,Pt=ce+Ft>>>E|0,Ae=c[n+16>>2]+(re(Pt,H>>E)<<2)|0;;){if(R=c[g>>2],ce=mt<<2,E=c[ce+te>>2],c[te>>2]=(R&-16711936)+(E&-16711936)&-16711936|(R&16711935)+(E&16711935)&16711935,E=1,G=Ae,(L|0)>=2)for(;R=E<<2,ci=R+te|0,Si=g+R|0,ni=Ft+(E&Ze)|0,R=(ni|0)>(L|0)?L:ni,ft[c[(c[G>>2]>>>6&60)+10960>>2]](Si,ce+ci|0,R-E|0,ci),G=G+4|0,E=R,(L|0)>(ni|0););if(H=H+1|0,Ae=Mi&H?Ae:(Pt<<2)+Ae|0,E=L<<2,te=E+te|0,g=g+E|0,(a|0)==(H|0))break}if(c[n+12>>2]==(a|0))break e;n=L<<2,Yr(k-n|0,(re(L,(s^-1)+a|0)<<2)+k|0,n);break e;case 1:if((a|0)<=(s|0))break e;for(E=c[n+4>>2],Ze=1<<E,mt=L&0-Ze,Pt=L-mt|0,ce=Ze+-1|0,G=ce+L>>>E|0,n=c[n+16>>2]+(re(G,s>>E)<<2)|0,te=(mt|0)<1;;){p[Ne+10|0]=0,Di[Ne+8>>1]=0,H=(L<<2)+g|0;i:{if(te){E=n;break i}for(Ae=(mt<<2)+g|0,E=n;R=c[E>>2],p[Ne+8|0]=R,p[Ne+10|0]=R>>>16,p[Ne+9|0]=R>>>8,ft[c[2804]](Ne+8|0,g,Ze,k),E=E+4|0,R=Ze<<2,k=R+k|0,g=g+R|0,g>>>0<Ae>>>0;);}if(g>>>0<H>>>0&&(E=c[E>>2],p[Ne+8|0]=E,p[Ne+10|0]=E>>>16,p[Ne+9|0]=E>>>8,ft[c[2804]](Ne+8|0,g,Pt,k),E=Pt<<2,k=E+k|0,g=g+E|0),s=s+1|0,n=ce&s?n:(G<<2)+n|0,(s|0)==(a|0))break}break e;case 3:break t;default:break e}if(E=c[n+4>>2],!((g|0)!=(k|0)|(E|0)<1)){if(k=a-s|0,E=re(k,(L+(1<<E)|0)+-1>>>E|0)<<2,G=((re(k,L)<<2)+g|0)-E|0,k=zc(G,g,E),te=c[n+16>>2],ce=c[n+8>>2],n=c[n+4>>2],H=8>>>n|0,(H|0)<=7){if((a|0)<=(s|0))break e;for(Ae=-1<<H^-1,R=-1<<n^-1,n=(ce|0)<1;;){if(E=0,k=0,!n)for(;E&R||(k=F[G+1|0],G=G+4|0),c[g>>2]=c[te+((k&Ae)<<2)>>2],k=k>>>H|0,g=g+4|0,E=E+1|0,(ce|0)!=(E|0););if(s=s+1|0,(a|0)==(s|0))break}break e}ft[c[2805]](k,te,g,s,a,ce);break e}if(te=c[n+16>>2],H=8>>>E|0,(H|0)<=7){if((a|0)<=(s|0))break e;for(Ae=-1<<H^-1,R=-1<<E^-1,n=(L|0)<1;;){if(G=0,E=0,!n)for(;G&R||(E=F[g+1|0],g=g+4|0),c[k>>2]=c[te+((E&Ae)<<2)>>2],E=E>>>H|0,k=k+4|0,G=G+1|0,(L|0)!=(G|0););if(s=s+1|0,(a|0)==(s|0))break}break e}ft[c[2805]](g,te,k,s,a,L)}Un=Ne+16|0}function El(n,s,a,g,k,E,L,R){var G=0,H=0,te=0,ce=0,Ae=0,Ne=0,Ze=0,mt=0,Pt=0,Ft=0,ni=0,ci=0,Mi=0,Si=0,Ji=0,sn=0;ce=Un-16|0,Un=ce,c[ce+12>>2]=0,c[ce+8>>2]=0,Ji=R?c[R+8>>2]:0;e:{if(!n){te=7;break e}if(s>>>0<12){te=7;break e}if(H=s,G=n,Pt=Vc(G,5463),!Pt){if(te=3,(F[n+8|0]|F[n+9|0]<<8|(F[n+10|0]<<16|F[n+11|0]<<24))!=1346520407||(Ze=F[n+4|0]|F[n+5|0]<<8|(F[n+6|0]<<16|F[n+7|0]<<24),Ze+-12>>>0>4294967274))break e;if(!(!Ji|Ze>>>0<=s+-8>>>0)){te=7;break e}if(H=s+-12|0,H>>>0<8){te=7;break e}G=n+12|0}mt=Vc(G,5468);t:{if(mt){te=0;break t}if(te=3,(F[G+4|0]|F[G+5|0]<<8|(F[G+6|0]<<16|F[G+7|0]<<24))!=10)break e;if(H>>>0<18){te=7;break e}if(Ae=1,ni=(F[G+12|0]|F[G+13|0]<<8|F[G+14|0]<<16)+1|0,ci=(F[G+15|0]|F[G+16|0]<<8|F[G+17|0]<<16)+1|0,_r(ni,0,ci,0),Pt|Bn)break e;te=F[G+8|0],H=H+-18|0,G=G+18|0,Mi=(te&2)>>>1|0}k&&(c[k>>2]=te>>>4&1),E&&(c[E>>2]=Mi),L&&(c[L>>2]=0),c[ce+8>>2]=ci,c[ce+12>>2]=ni;t:{if(!R&&(E=0,!mt&Mi))break t;E=0;i:{if(H>>>0<4)break i;n:{if(Ae|Ze|(F[G|0]|F[G+1|0]<<8|(F[G+2|0]<<16|F[G+3|0]<<24))!=1213221953&&mt|Pt)break n;if(H>>>0<8)break i;for(Si=22;;){if(te=3,Ne=F[G+4|0]|F[G+5|0]<<8|(F[G+6|0]<<16|F[G+7|0]<<24),Ne>>>0>4294967286||(Ft=Ne+9&-2,Si=Ft+Si|0,Si>>>0>Ze>>>0&&!Pt))break e;if((F[G|0]|F[G+1|0]<<8|(F[G+2|0]<<16|F[G+3|0]<<24))==540561494|(F[G|0]|F[G+1|0]<<8|(F[G+2|0]<<16|F[G+3|0]<<24))==1278758998)break n;if(H>>>0<Ft>>>0)break i;if(Ae=(F[G|0]|F[G+1|0]<<8|(F[G+2|0]<<16|F[G+3|0]<<24))==1213221953,E=Ae?G+8|0:E,sn=Ae?Ne:sn,G=G+Ft|0,H=H-Ft|0,!(H>>>0>=8))break}break i}if(H>>>0<8)break i;Ne=F[G|0]|F[G+1|0]<<8|(F[G+2|0]<<16|F[G+3|0]<<24);n:{if(!((F[G|0]|F[G+1|0]<<8|(F[G+2|0]<<16|F[G+3|0]<<24))!=540561494&&(Ne|0)!=1278758998)){if(Ae=F[G+4|0]|F[G+5|0]<<8|(F[G+6|0]<<16|F[G+7|0]<<24),Ze>>>0>=12&&(te=3,Ae>>>0>Ze+-12>>>0))break e;if(H=H+-8|0,Ae>>>0>H>>>0&&Ji)break i;G=G+8|0,Ne=(Ne|0)==1278758998;break n}Ae=H,Ne=F[G|0]!=47|H>>>0<5?0:F[G+4|0]<32}if(te=3,Ae>>>0>4294967286)break e;Mi|!L||(c[L>>2]=Ne?2:1);n:{if(!Ne){if(H>>>0<10)break i;if(Ct(G,H,Ae,ce+12|0,ce+8|0))break n;break e}if(H>>>0<5)break i;if(!Ui(G,H,ce+12|0,ce+8|0,k))break e}if(c[ce+12>>2]!=(ni|0)|c[ce+8>>2]!=(ci|0)&&!mt)break e;if(!R)break t;c[R+8>>2]=0,c[R+12>>2]=0,c[R+4>>2]=s,c[R>>2]=n,c[R+32>>2]=Ne,c[R+28>>2]=Ze,c[R+24>>2]=Ae,c[R+20>>2]=sn,c[R+16>>2]=E,c[R+12>>2]=G-n;break t}if(R){te=7;break e}if(te=7,mt)break e}if(k&&(c[k>>2]=c[k>>2]|(E|0)!=0),a&&(c[a>>2]=c[ce+12>>2]),te=0,!g)break e;c[g>>2]=c[ce+8>>2]}return Un=ce+16|0,te}function Nu(n,s){n=n|0,s=s|0;var a=0,g=0,k=0,E=0,L=0,R=0,G=0,H=0,te=0,ce=0,Ae=0,Ne=0,Ze=0,mt=0;e:{R=c[n+108>>2],a=s-R|0;t:{if((a|0)<1)break t;L=c[n+8>>2],Ne=c[L>>2],g=c[n+100>>2],H=c[n+16>>2]+(re(g,R)<<2)|0,G=c[n+20>>2],ce=c[n+176>>2];i:{if((ce|0)>=1){if(a=ce+-1|0,Xl((re(a,20)+n|0)+180|0,R,s,H,G),(ce|0)<2)break i;for(;g=a+-1|0,Xl((re(g,20)+n|0)+180|0,R,s,G,G),ce=(a|0)>1,a=g,!!ce;);break i}if((G|0)==(H|0))break i;Yr(G,H,re(a,g)<<2)}if(R=c[L+84>>2],H=c[n+108>>2],ce=(R|0)>(H|0),g=c[L+88>>2],g=(g|0)<(s|0)?g:s,a=ce?R:H,(g|0)<=(a|0))break t;if(g=g-a|0,c[L+16>>2]=g,c[L+8>>2]=a-R,a=c[L+76>>2],k=c[L+80>>2]-a|0,c[L+12>>2]=k,Ze=Ne<<2,Ae=(a<<2)+(ce?G+re(Ze,R-H|0)|0:G)|0,a=c[n+12>>2],R=c[a>>2],R>>>0>10)break e;G=c[a+20>>2],mt=c[a+16>>2]+re(G,c[n+116>>2])|0;i:{if(c[L+92>>2]){if((g|0)<1)break i;for(;;){Ne=g-te|0,ce=vc(c[n+268>>2],Ne),a=re(te,Ze)+Ae|0,_c(a,Ze,c[c[n+268>>2]+44>>2],ce),te=ws(c[n+268>>2],Ne,a,Ze)+te|0,a=0,k=c[n+268>>2];n:{if(c[k+64>>2]>=c[k+56>>2])break n;for(ce=re(E,G)+mt|0,H=c[k+52>>2],Ne=c[k+68>>2];;){if(c[k+24>>2]>0)break n;if(Ni(k),ft[c[2662]](Ne,H,1),Lo(Ne,H,R,ce+re(a,G)|0),a=a+1|0,!(c[k+64>>2]<c[k+56>>2]))break}}if(E=a+E|0,!((te|0)<(g|0)))break}break i}if((g|0)>=1)for(a=g;Lo(Ae,k,R,mt),mt=G+mt|0,Ae=Ae+Ze|0,E=(a|0)>1,a=a+-1|0,!!E;);E=g}c[n+116>>2]=c[n+116>>2]+E}c[n+108>>2]=s;return}te=c[n+116>>2];e:{if(c[L+92>>2]){if((g|0)<1)break e;for(;;){a=g-mt|0,E=vc(c[n+268>>2],a),_c(Ae,Ze,c[c[n+268>>2]+44>>2],E),Ne=re(E,Ze),mt=ws(c[n+268>>2],a,Ae,Ze)+mt|0,R=0,L=c[n+268>>2];t:{if(c[L+64>>2]>=c[L+56>>2])break t;for(G=c[L+52>>2],H=c[L+68>>2],ce=H+3|0,a=te;;){if(c[L+24>>2]>0)break t;if(Ni(L),ft[c[2662]](H,G,1),k=c[n+12>>2],ft[c[2860]](H,c[k+16>>2]+re(c[k+32>>2],a)|0,G),E=a>>1,ft[c[2861]](H,c[k+20>>2]+re(E,c[k+36>>2])|0,c[k+24>>2]+re(E,c[k+40>>2])|0,G,(a^-1)&1),E=c[k+28>>2],E&&ft[c[2668]](ce,0,G,1,E+re(c[k+44>>2],a)|0,0)|0,R=R+1|0,a=a+1|0,!(c[L+64>>2]<c[L+56>>2]))break}}if(Ae=Ae+Ne|0,te=te+R|0,!((mt|0)<(g|0)))break}break e}if((g|0)<1)break e;for(;;){if(ft[c[2860]](Ae,c[a+16>>2]+re(c[a+32>>2],te)|0,k),E=te>>1,ft[c[2861]](Ae,c[a+20>>2]+re(E,c[a+36>>2])|0,c[a+24>>2]+re(E,c[a+40>>2])|0,k,(te^-1)&1),E=c[a+28>>2],E&&ft[c[2668]](Ae+3|0,0,k,1,E+re(c[a+44>>2],te)|0,0)|0,te=te+1|0,(g|0)<2)break e;g=g+-1|0,Ae=Ae+Ze|0,a=c[n+12>>2]}}c[n+116>>2]=te,c[n+108>>2]=s}function Ia(n){n=n|0;var s=0,a=0,g=0,k=0,E=0,L=0,R=0,G=0,H=0,te=0,ce=0,Ae=0,Ne=0,Ze=0,mt=0;s=c[n+40>>2],g=c[c[s>>2]>>2],k=g+-1|0;e:{if(k>>>0<12&&(a=0,2077>>>(k&65535)&1))break e;a=g+-7>>>0>3}c[s+40>>2]=0,c[s+44>>2]=0,c[s+48>>2]=0,c[s+52>>2]=0;e:{if(!Da(c[s+20>>2],n,a?12:11))break e;a|g+-7>>>0>3||hl(),E=s+40|0;t:{i:{n:{o:{l:{if(c[n+92>>2]){if(a=c[s>>2],R=c[a>>2],L=R+-1|0,g>>>0<=10){if(L>>>0>=12||(k=0,!(2077>>>(L&65535)&1)))break n;break i}if(L>>>0>=12||(g=0,!(2077>>>(L&65535)&1)))break l;break o}r:{if(g>>>0<=10){if($l(),c[s+44>>2]=6,!c[n+56>>2])break r;if(k=c[n+12>>2],L=k+1|0,k=Ps(1,0,(L&-2)+k|0),c[E>>2]=k,!k)break e;c[s+4>>2]=k,n=c[n+12>>2],c[s+44>>2]=7,n=n+k|0,c[s+8>>2]=n,c[s+12>>2]=n+(L>>1),hl();break r}c[s+44>>2]=8}if(G=1,a)break e;n=9;r:switch(g+-5|0){default:n=g>>>0<11?10:11;break;case 0:case 5:break r}if(c[s+48>>2]=n,g>>>0>10)break e;break t}g=R+-7>>>0>3}if(R=c[n+100>>2],H=c[n+12>>2],te=c[n+16>>2],ce=E,k=c[n+96>>2],E=k+1|0,Ae=E&-2,Ne=Ae<<1,Ze=k<<1,mt=(Ne+Ze<<2)+(g?0:k<<3)|0,L=Ps(1,0,mt+(g?283:367)|0),c[ce>>2]=L,!L||(G=(L+mt|0)+31&-32,c[s+24>>2]=G,c[s+32>>2]=G+168,c[s+28>>2]=G+84,c[s+36>>2]=g?0:G+252|0,al(G,c[n+12>>2],c[n+16>>2],c[a+16>>2],k,R,c[a+32>>2],1,L),G=H+1>>1,H=te+1>>1,E=E>>1,te=R+1>>1,L=L+(Ze<<2)|0,al(c[s+28>>2],G,H,c[a+20>>2],E,te,c[a+36>>2],1,L),al(c[s+32>>2],G,H,c[a+24>>2],E,te,c[a+40>>2],1,L+(Ae<<2)|0),c[s+44>>2]=12,G=1,g))break e;al(c[s+36>>2],c[n+12>>2],c[n+16>>2],c[a+28>>2],k,R,c[a+44>>2],1,L+(Ne<<2)|0),c[s+48>>2]=13;break t}k=R+-7>>>0>3}if(L=c[n+100>>2],H=c[n+12>>2],te=c[n+16>>2],a=c[n+96>>2],Ae=re(a,6),R=(k?Ae:a<<3)<<2,ce=E,Ne=re(a,3),Ze=a<<2,E=R+(k?Ne:Ze)|0,g=Ps(1,0,E+(k?283:367)|0),c[ce>>2]=g,!g||(G=1,E=(g+E|0)+31&-32,c[s+24>>2]=E,c[s+32>>2]=E+168,c[s+28>>2]=E+84,c[s+36>>2]=k?0:E+252|0,ce=E,E=g+R|0,al(ce,c[n+12>>2],c[n+16>>2],E,a,L,0,1,g),R=H+1>>1,H=te+1>>1,te=a<<1,al(c[s+28>>2],R,H,a+E|0,a,L,0,1,g+(te<<2)|0),al(c[s+32>>2],R,H,E+te|0,a,L,0,1,g+(Ze<<2)|0),c[s+44>>2]=14,Ha(),k))break e;al(c[s+36>>2],c[n+12>>2],c[n+16>>2],E+Ne|0,a,L,0,1,g+(Ae<<2)|0),c[s+48>>2]=15,n=16;i:switch(c[c[s>>2]>>2]+-5|0){default:n=17;break;case 0:case 5:break i}c[s+52>>2]=n}fc()}return G|0}function Il(n,s,a,g,k){var E=0,L=0,R=0,G=0,H=0,te=0,ce=0,Ae=0,Ne=0,Ze=0,mt=0,Pt=0,Ft=0,ni=0,ci=0,Mi=0,Si=0,Ji=0,sn=0,bn=0,ar=0,Tr=0,ys=0,wa=0,fl=0;Ji=Un-256|0,Un=Ji,E=(k|0)/25|0;e:{if(!n|k>>>0>100|((s|0)<1|(a|0)<1)||(L=1,ar=a+-1|0,Ze=s+-1|0,k=(E<<1|1)>(s|0)?Ze>>1:E,te=(k<<1|1)>(a|0)?ar>>1:k,(te|0)<1)||(L=0,H=s<<1,E=te<<1,k=re(H,E+2|0),ci=Ps(1,0,(k+H|0)+4094|0),!ci))break e;for(Ft=0-te|0,E=E|1,Ae=(re(E,s)<<1)+ci|0,G=Ae-H|0,Zo(G,0,H),mt=Zo(Ji,0,256),Si=k+ci|0,Mi=re(E,E),sn=255,ce=255,E=n;;){for(L=0;k=F[L+E|0],p[k+mt|0]=1,Ne=(R|0)<(k|0),R=Ne?k:R,Tr=Ne?k:Tr,Ne=(ce|0)>(k|0),ce=Ne?k:ce,sn=Ne?k:sn,L=L+1|0,(L|0)!=(s|0););if(E=g+E|0,Pt=Pt+1|0,(Pt|0)==(a|0))break}for(R=R-ce|0,Ne=262144/(Mi>>>0)|0,E=H+Si|0,L=-1,ce=0,k=0;F[k+mt|0]&&(ce=ce+1|0,(L|0)>=0&&(L=k-L|0,R=(L|0)<(R|0)?L:R),L=k),k=k+1|0,(k|0)!=256;);for(L=R<<2,mt=re(R,12)>>2,R=L-mt|0,Mi=E+2046|0,k=1;;){Pt=k<<1,ni=Pt+Mi|0,E=k;t:{if((k|0)<=(mt|0)||(E=0,(L|0)<=(k|0)))break t;E=(re(mt,L-k|0)|0)/(R|0)|0}if(E=E>>>2|0,Di[ni>>1]=E,Di[Mi-Pt>>1]=0-E,k=k+1|0,(k|0)==1024)break}if(Di[Mi>>1]=0,!((ce|0)<3|(Ft|0)>=(a|0)))for(Pt=te^-1,ce=s-te|0,mt=te+1|0,ys=te+-1|0,wa=(H-te|0)+-2|0,fl=(Ze<<1)+Ae|0,L=ci,E=n;;){if(R=0,k=0,ni=(s|0)<1,!ni)for(;R=F[k+E|0]+(R&65535)|0,H=k<<1,Ze=R+pn[H+G>>1]|0,bn=H+Ae|0,H=L+H|0,Di[bn>>1]=Ze-pn[H>>1],Di[H>>1]=Ze,k=k+1|0,(k|0)!=(s|0););if(R=(Ft|0)<(ar|0)?g+E|0:E,H=(Ft|0)>-1,Ze=(s<<1)+L|0,bn=(Ze|0)==(Ae|0),(Ft|0)>=(te|0)){if(k=0,(te|0)>-1){for(;Di[(k<<1)+Si>>1]=re(Ne,pn[(te-k<<1)+Ae>>1]+pn[(k+ys<<1)+Ae>>1]&65535)>>>16,G=(k|0)==(te|0),k=k+1|0,!G;);k=mt}if((k|0)<(ce|0)){for(;Di[(k<<1)+Si>>1]=re(Ne,pn[(k+te<<1)+Ae>>1]-pn[(k+Pt<<1)+Ae>>1]&65535)>>>16,k=k+1|0,(ce|0)!=(k|0););k=ce}if((k|0)<(s|0))for(;Di[(k<<1)+Si>>1]=re(Ne,((pn[fl>>1]<<1)-pn[(wa-k<<1)+Ae>>1]|0)-pn[(k+Pt<<1)+Ae>>1]&65535)>>>16,k=k+1|0,(k|0)!=(s|0););if(k=0,!ni)for(;ni=n+k|0,G=F[ni|0],(Tr|0)<=(G|0)|(sn|0)>=(G|0)||(G=G+Di[(pn[(k<<1)+Si>>1]-(G<<2)<<1)+Mi>>1]|0,G=(G|0)>0?G:0,p[ni|0]=(G|0)<255?G:255),k=k+1|0,(k|0)!=(s|0););n=n+g|0}if(E=H?R:E,G=L,L=bn?ci:Ze,Ft=Ft+1|0,(Ft|0)==(a|0))break}Ur(ci),L=1}return Un=Ji+256|0,L}function rl(n,s,a,g,k,E){n=n|0,s=s|0,a=a|0,g=g|0,k=k|0,E=E|0;var L=0,R=0,G=0,H=0,te=0,ce=0,Ae=0,Ne=0,Ze=0,mt=0;e:{if((k|0)<=15)for(Ne=c[(k<<2)+s>>2]+re(a,11)|0,a=c[n+8>>2],G=c[n+4>>2];;){L=F[Ne|0];t:{if((a|0)>-1)break t;if(ce=c[n+12>>2],ce>>>0<Qn[n+20>>2]){R=F[ce|0]|F[ce+1|0]<<8|(F[ce+2|0]<<16|F[ce+3|0]<<24),c[n+12>>2]=ce+3,a=a+24|0,c[n+8>>2]=a,c[n>>2]=c[n>>2]<<24|(R>>>8&65280|(R<<8&16711680|R<<24))>>>8;break t}Rr(n),a=c[n+8>>2]}Ae=n,R=a,H=c[n>>2],te=H>>>a|0,L=re(L,G)>>>8|0;t:{if(te>>>0>L>>>0){H=((L^-1)<<a)+H|0,c[n>>2]=H,G=G-L|0;break t}G=L+1|0}if(ce=Br(G)^24,a=R-ce|0,c[Ae+8>>2]=a,G=(G<<ce)+-1|0,c[n+4>>2]=G,ce=k,Ae=k,te>>>0<=L>>>0)break e;for(;;){L=F[Ne+1|0];t:{if((a|0)>-1)break t;if(k=c[n+12>>2],k>>>0<Qn[n+20>>2]){R=F[k|0]|F[k+1|0]<<8|(F[k+2|0]<<16|F[k+3|0]<<24),a=a+24|0,c[n+8>>2]=a,c[n+12>>2]=k+3,H=H<<24|(R>>>8&65280|(R<<8&16711680|R<<24))>>>8,c[n>>2]=H;break t}Rr(n),H=c[n>>2],a=c[n+8>>2]}Ae=n,R=a,te=H>>>a|0,L=re(L,G)>>>8|0;t:{if(te>>>0>L>>>0){H=((L^-1)<<a)+H|0,c[n>>2]=H,G=G-L|0;break t}G=L+1|0}if(k=Br(G)^24,a=R-k|0,c[Ae+8>>2]=a,G=(G<<k)+-1|0,c[n+4>>2]=G,k=ce+1|0,te>>>0<=L>>>0){if(Ae=16,(k|0)==16)break e;Ne=c[(k<<2)+s>>2],ce=k;continue}break}Ze=c[(k<<2)+s>>2],te=F[Ne+2|0];t:{if((a|0)>-1)break t;if(R=c[n+12>>2],R>>>0<Qn[n+20>>2]){L=F[R|0]|F[R+1|0]<<8|(F[R+2|0]<<16|F[R+3|0]<<24),a=a+24|0,c[n+8>>2]=a,c[n+12>>2]=R+3,H=H<<24|(L>>>8&65280|(L<<8&16711680|L<<24))>>>8,c[n>>2]=H;break t}Rr(n),H=c[n>>2],a=c[n+8>>2]}Ae=n,R=a,mt=H>>>a|0,te=re(G,te)>>>8|0;t:{if(mt>>>0>te>>>0){c[n>>2]=((te^-1)<<a)+H,a=G-te|0;break t}a=te+1|0}L=Br(a)^24,R=R-L|0,c[Ae+8>>2]=R,c[n+4>>2]=(a<<L)+-1;t:{if(mt>>>0<=te>>>0){H=1,Ne=Ze+11|0;break t}H=xo(n,Ne),R=c[n+8>>2],Ne=Ze+22|0}t:{if((R|0)>-1)break t;if(a=c[n+12>>2],a>>>0<Qn[n+20>>2]){L=F[a|0]|F[a+1|0]<<8|(F[a+2|0]<<16|F[a+3|0]<<24),c[n+12>>2]=a+3,R=R+24|0,c[n+8>>2]=R,c[n>>2]=c[n>>2]<<24|(L>>>8&65280|(L<<8&16711680|L<<24))>>>8;break t}Rr(n),R=c[n+8>>2]}if(a=R+-1|0,c[n+8>>2]=a,G=c[n+4>>2],te=G>>>1|0,Ze=c[n>>2],L=te-(Ze>>>R|0)>>31,G=L+G|1,c[n+4>>2]=G,c[n>>2]=Ze-((L&te+1)<<R),Di[(F[ce+5328|0]<<1)+E>>1]=re(c[(((ce|0)>0)<<2)+g>>2],(L^H)-L|0),!((ce|0)<15))break}Ae=16}return Ae|0}function ju(n,s,a,g,k,E){n=n|0,s=s|0,a=a|0,g=g|0,k=k|0,E=E|0;var L=0,R=0,G=0,H=0,te=0,ce=0,Ae=0,Ne=0,Ze=0;e:{if((k|0)<=15)for(Ne=c[(k<<2)+s>>2]+re(a,11)|0,R=c[n+8>>2],L=c[n+4>>2];;){H=F[Ne|0];t:{if((R|0)>-1)break t;if(a=c[n+12>>2],a>>>0<Qn[n+20>>2]){ce=F[a|0]|F[a+1|0]<<8|(F[a+2|0]<<16|F[a+3|0]<<24),c[n+12>>2]=a+3,R=R+24|0,c[n+8>>2]=R,c[n>>2]=c[n>>2]<<24|(ce>>>8&65280|(ce<<8&16711680|ce<<24))>>>8;break t}Rr(n),R=c[n+8>>2]}if(G=c[n>>2],a=re(L,H)>>>8|0,H=G>>>R>>>0<=a>>>0,H||(a=a+1|0,G=G-(a<<R)|0,c[n>>2]=G,a=L-a|0),a>>>0<=126&&(R=R-F[a+9056|0]|0,c[n+8>>2]=R,a=F[a+9184|0]),c[n+4>>2]=a,ce=k,L=k,H)break e;for(;;){H=F[Ne+1|0];t:{if((R|0)>-1)break t;if(k=c[n+12>>2],k>>>0<Qn[n+20>>2]){L=F[k|0]|F[k+1|0]<<8|(F[k+2|0]<<16|F[k+3|0]<<24),R=R+24|0,c[n+8>>2]=R,c[n+12>>2]=k+3,G=G<<24|(L>>>8&65280|(L<<8&16711680|L<<24))>>>8,c[n>>2]=G;break t}Rr(n),G=c[n>>2],R=c[n+8>>2]}te=G>>>R|0,L=re(a,H)>>>8|0;t:{if(te>>>0<=L>>>0){a=L;break t}k=L+1|0,G=G-(k<<R)|0,c[n>>2]=G,a=a-k|0}if(a>>>0<=126&&(R=R-F[a+9056|0]|0,c[n+8>>2]=R,a=F[a+9184|0]),c[n+4>>2]=a,k=ce+1|0,H=c[(k<<2)+s>>2],te>>>0<=L>>>0){if(L=16,ce=k,Ne=H,(k|0)!=16)continue;break e}break}Ae=F[Ne+2|0];t:{if((R|0)>-1)break t;if(L=c[n+12>>2],L>>>0<Qn[n+20>>2]){te=F[L|0]|F[L+1|0]<<8|(F[L+2|0]<<16|F[L+3|0]<<24),R=R+24|0,c[n+8>>2]=R,c[n+12>>2]=L+3,G=G<<24|(te>>>8&65280|(te<<8&16711680|te<<24))>>>8,c[n>>2]=G;break t}Rr(n),G=c[n>>2],R=c[n+8>>2]}te=n,Ze=G>>>R|0,Ae=re(a,Ae)>>>8|0,L=Ae,Ze>>>0>L>>>0&&(L=Ae+1|0,c[n>>2]=G-(L<<R),L=a-L|0),L>>>0<=126&&(R=R-F[L+9056|0]|0,c[n+8>>2]=R,L=F[L+9184|0]),c[te+4>>2]=L;t:{if(Ze>>>0<=Ae>>>0){te=1,Ne=H+11|0;break t}te=xo(n,Ne),R=c[n+8>>2],Ne=H+22|0}t:{if((R|0)>-1){a=R;break t}if(a=c[n+12>>2],a>>>0<Qn[n+20>>2]){L=F[a|0]|F[a+1|0]<<8|(F[a+2|0]<<16|F[a+3|0]<<24),c[n+12>>2]=a+3,a=R+24|0,c[n+8>>2]=a,c[n>>2]=c[n>>2]<<24|(L>>>8&65280|(L<<8&16711680|L<<24))>>>8;break t}Rr(n),a=c[n+8>>2]}if(R=a+-1|0,c[n+8>>2]=R,L=c[n+4>>2],G=L>>>1|0,Ae=c[n>>2],H=G-(Ae>>>a|0)>>31,L=L+H|1,c[n+4>>2]=L,c[n>>2]=Ae-((H&G+1)<<a),Di[(F[ce+5328|0]<<1)+E>>1]=re(c[(((ce|0)>0)<<2)+g>>2],(H^te)-H|0),!((ce|0)<15))break}L=16}return L|0}function Fs(n,s,a,g){var k=0,E=0,L=0,R=0,G=0,H=0,te=0,ce=0;e:{if((a|0)<0|(g|0)<1||(G=c[s+88>>2],(a+g|0)>(G|0)))break e;te=c[s>>2];t:{i:{if(c[n+2356>>2])break i;E=c[n+2344>>2];n:{if(E)break n;if(k=tu(1,0,144),c[n+2344>>2]=k,!k)break e;if(k=c[s+88>>2],L=k,E=k>>31,k=c[s>>2],E=Ps(_r(L,E,k,k>>31),Bn,1),c[n+2360>>2]=E,!E||(c[n+2368>>2]=0,c[n+2364>>2]=E,L=c[n+2348>>2],R=c[n+2352>>2],k=c[n+2344>>2],a0(),c[k+136>>2]=E,c[k>>2]=c[s>>2],c[k+4>>2]=c[s+4>>2],R>>>0<2)||(E=F[L|0]&3,c[k+8>>2]=E,c[k+12>>2]=F[L|0]>>>2&3,H=F[L|0]>>>4&3,c[k+16>>2]=H,E>>>0>1|H>>>0>1|F[L|0]>63)||(E=R+-1|0,R=k+24|0,yp(R),Xh(0,R),c[k- -64>>2]=k,c[k+24>>2]=c[s>>2],c[k+28>>2]=c[s+4>>2],c[k+96>>2]=c[s+72>>2],c[k+100>>2]=c[s+76>>2],c[k+104>>2]=c[s+80>>2],c[k+108>>2]=c[s+84>>2],c[k+112>>2]=c[s+88>>2],c[k+8>>2]?k=Ml(k,L+1|0,E):k=E>>>0>=re(c[k+4>>2],c[k>>2])>>>0,!k))break t;if(E=c[n+2344>>2],c[E+16>>2]!=1){c[n+2372>>2]=0;break n}g=G-a|0}ce=c[E+112>>2];n:{if(!c[E+8>>2]){R=c[E>>2],L=re(R,a),k=L+c[n+2364>>2]|0,G=(L+c[n+2348>>2]|0)+1|0,L=c[n+2368>>2];o:{l:{if(H=c[E+12>>2],H){if((g|0)<1)break o;if(ft[c[(H<<2)+10912>>2]](L,G,k,R),H=1,(g|0)!=1)break l;L=k;break o}if(E=0,(g|0)<=0)break o;for(;L=k,k=Yr(k,G,R),G=R+G|0,k=k+R|0,E=E+1|0,(E|0)!=(g|0););break o}for(;G=R+G|0,L=k+R|0,ft[c[(c[E+12>>2]<<2)+10912>>2]](k,G,L,R),k=L,H=H+1|0,(H|0)!=(g|0););}c[n+2368>>2]=L,g=a+g|0;break n}if(g=a+g|0,!Es(E,g))break t}n:{if((g|0)>=(ce|0)){c[n+2356>>2]=1;break n}if(!c[n+2356>>2])break i}if(g=c[n+2344>>2],g&&(g0(c[g+20>>2]),c[g+20>>2]=0,Ur(g)),c[n+2344>>2]=0,g=c[n+2372>>2],(g|0)<1)break i;if(L=c[s+76>>2],k=c[s+84>>2],!Il(L+(c[n+2364>>2]+re(k,te)|0)|0,c[s+80>>2]-L|0,c[s+88>>2]-k|0,te,g))break t}return c[n+2364>>2]+re(a,te)|0}Ur(c[n+2360>>2]),c[n+2360>>2]=0,c[n+2364>>2]=0,s=c[n+2344>>2],s&&(g0(c[s+20>>2]),c[s+20>>2]=0,Ur(s)),c[n+2344>>2]=0}return 0}function yu(n,s){var a=0,g=0,k=0,E=0,L=0,R=0,G=0,H=0,te=0,ce=0,Ae=0,Ne=0,Ze=0,mt=0,Pt=0,Ft=0,ni=0,ci=0;c[n+152>>2]=0,G=1;e:{t:{if(c[n+148>>2]>=1){if(!(ft[c[2558]](n+124|0)|0))break t;c[n+140>>2]=n+180,c[n+136>>2]=n,c[n+132>>2]=18,G=c[n+2308>>2]>0?3:2}c[n+156>>2]=G;break e}if(!Ko(n,1,4941))return 0}L=c[n+288>>2],te=L<<2,a=c[n+148>>2],H=c[n+2308>>2],Ae=(H|0)>0?re(te,(a|0)<1?1:2):0,Ne=L<<5,mt=G<<4,Pt=re(Ne,(re(mt+F[H+4863|0]|0,3)|0)/2|0),Ze=(L<<1)+2|0,Ft=re(re(L,(a|0)==2?2:1),800),E=0;e:{if(!c[n+2348>>2])break e;ni=_r(pn[n+50>>1],0,pn[n+48>>1],0),E=Bn}ci=E,a=0,g=te,k=g+Ne|0,k>>>0<g>>>0&&(a=1),g=k,k=g+Ze|0,k>>>0<g>>>0&&(a=a+1|0),g=k,k=g+Ae|0,k>>>0<g>>>0&&(a=a+1|0),g=k,k=g+Ft|0,k>>>0<g>>>0&&(a=a+1|0),g=k,k=g+Pt|0,k>>>0<g>>>0&&(a=a+1|0),g=k,k=g+ni|0,a=a+E|0,E=k,a=k>>>0<g>>>0?a+1|0:a,g=a,k=k+832|0,k>>>0<832&&(a=a+1|0);e:{if(!a&k>>>0>4294967264|a>>>0>0)break e;R=c[n+2288>>2];t:{i:{if(a=g,g=E+863|0,g>>>0<863&&(a=a+1|0),E=g,k=g,g=a,!a&k>>>0>Qn[n+2292>>2]|a>>>0>0){if(Ur(R),c[n+2292>>2]=0,R=Ps(E,g,1),c[n+2288>>2]=R,!R)break i;c[n+2292>>2]=E,H=c[n+2308>>2]}c[n+2244>>2]=R,c[n+160>>2]=0,a=R+te|0,c[n+2252>>2]=a,a=a+Ne|0,ce=a+2|0,c[n+2256>>2]=ce,a=a+Ze|0,k=Ae?a:0,c[n+2260>>2]=k,c[n+172>>2]=k,a=a+Ae|0,g=c[n+148>>2],(H|0)<1|(g|0)<1||(c[n+172>>2]=k+(L<<2)),a=a+31&-32,c[n+2264>>2]=a,a=a+832|0,c[n+2304>>2]=a,c[n+176>>2]=a,(g|0)==2&&(c[n+176>>2]=a+re(L,800)),c[n+152>>2]=0,E=L<<3,c[n+2284>>2]=E,k=L<<4,c[n+2280>>2]=k,a=a+Ft|0,c[n+2364>>2]=ni|ci?a+Pt|0:0,g=F[H+4863|0],a=a+re(g,k)|0,c[n+2268>>2]=a,g=re(E,g>>>1|0),a=g+(a+re(k,mt)|0)|0,c[n+2272>>2]=a,c[n+2276>>2]=g+(a+(re(E,G)<<3)|0),Zo(ce+-2|0,0,Ze),a=c[n+2256>>2]+-2|0,p[a|0]=0,p[a+1|0]=0,c[n+2296>>2]=0,c[n+2248>>2]=0,Zo(c[n+2244>>2],0,te);break t}if(!Ko(n,1,4971))break e}c[s+8>>2]=0,c[s+20>>2]=c[n+2268>>2],c[s+24>>2]=c[n+2272>>2],c[s+28>>2]=c[n+2276>>2],c[s+32>>2]=c[n+2280>>2],n=c[n+2284>>2],c[s+104>>2]=0,c[s+36>>2]=n,Jl(),ce=1}return ce}function Yl(n,s,a,g){var k=0,E=0,L=0,R=0,G=0,H=0,te=0,ce=0,Ae=0,Ne=0,Ze=0,mt=0;G=Un-16|0,Un=G,H=2;e:{if(!g|((s|0)<1|(n|0)<1))break e;t:{if(!a)break t;i:{if(!c[a+8>>2]){k=s,E=n;break i}if(k=c[a+24>>2],(k|0)<1||(E=c[a+20>>2],(E|0)<1)||(L=c[a+16>>2],R=c[a+12>>2],(L|R)<0|((R&-2)+E|0)>(n|0)|((L&-2)+k|0)>(s|0)))break e}if(!c[a+28>>2]){s=k,n=E;break t}if(c[G+12>>2]=c[a+32>>2],c[G+8>>2]=c[a+36>>2],!tt(E,k,G+12|0,G+8|0))break e;s=c[G+8>>2],n=c[G+12>>2]}if(c[g+8>>2]=s,c[g+4>>2]=n,(s|0)<1|(n|0)<1||(R=c[g>>2],R>>>0>12))break e;t:{if(c[g+80>>2]|c[g+12>>2]>0)break t;if(E=n,k=F[R+1157|0],_r(n,0,k,0),Bn)break e;L=s,Ne=re(n,k),k=Ne,k=_r(s,0,k,k>>31),te=Bn,H=1;i:{if(R>>>0<11){s=0,L=0,n=0;break i}E=_r(E,0,L,0),L=(R|0)==12,mt=L?E:0,ce=L?Bn:0,Ze=(n+1|0)/2|0,E=Ze,s=(s+1|0)/2|0,s=_r(E,E>>31,s,s>>31),L=L?n:0,n=Bn}if(Ae=s,n=n<<1|s>>>31,ce=ce+te|0,te=k+mt|0,te>>>0<k>>>0&&(ce=ce+1|0),Ae=Ae<<1,E=Ae+te|0,n=n+ce|0,n=Ps(E,E>>>0<te>>>0?n+1|0:n,1),!n)break e;if(c[g+16>>2]=n,c[g+80>>2]=n,R>>>0>=11){c[g+48>>2]=k,c[g+32>>2]=Ne,c[g+52>>2]=s,c[g+36>>2]=Ze,c[g+56>>2]=s,c[g+40>>2]=Ze,n=n+k|0,c[g+20>>2]=n,c[g+24>>2]=n+s,(R|0)==12&&(c[g+28>>2]=n+Ae),c[g+44>>2]=L,c[g+60>>2]=mt;break t}c[g+24>>2]=k,c[g+20>>2]=Ne}if(H=Yo(g),H|!a)break e;if(!c[a+48>>2]){H=0;break e}if(n=c[g+8>>2]+-1|0,Qn[g>>2]<=10){H=0,a=g+20|0,s=c[a>>2],c[a>>2]=0-s,c[g+16>>2]=c[g+16>>2]+re(n,s);break e}if(H=0,a=g+32|0,s=c[a>>2],c[a>>2]=0-s,k=g+36|0,a=c[k>>2],c[k>>2]=0-a,E=g+40|0,k=c[E>>2],c[E>>2]=0-k,c[g+16>>2]=c[g+16>>2]+re(n,s),s=g+20|0,E=s,L=c[s>>2],s=n>>1,c[E>>2]=L+re(s,a),a=g+24|0,c[a>>2]=c[a>>2]+re(s,k),a=c[g+28>>2],!a)break e;k=g+44|0,s=c[k>>2],c[k>>2]=0-s,c[g+28>>2]=a+re(n,s)}return Un=G+16|0,H}function Ua(n,s){var a=0,g=0,k=0,E=0,L=0,R=0,G=0,H=0;for(L=Un+-64|0,k=Di[n+16>>1],E=Di[n>>1],R=k+E|0,a=Di[n+8>>1],g=Di[n+24>>1],G=((re(a,20091)>>16)+a|0)+(re(g,35468)>>16)|0,c[L+12>>2]=R-G,k=E-k|0,a=((re(a,35468)>>16)-g|0)-(re(g,20091)>>16)|0,c[L+8>>2]=k-a,c[L+4>>2]=a+k,c[L>>2]=R+G,k=Di[n+18>>1],E=Di[n+2>>1],R=k+E|0,a=Di[n+10>>1],g=Di[n+26>>1],G=((re(a,20091)>>16)+a|0)+(re(g,35468)>>16)|0,c[L+28>>2]=R-G,k=E-k|0,a=((re(a,35468)>>16)-g|0)-(re(g,20091)>>16)|0,c[L+24>>2]=k-a,c[L+20>>2]=a+k,a=R+G|0,c[L+16>>2]=a,E=Di[n+20>>1],R=Di[n+4>>1],G=E+R|0,g=Di[n+12>>1],k=Di[n+28>>1],H=((re(g,20091)>>16)+g|0)+(re(k,35468)>>16)|0,c[L+44>>2]=G-H,E=R-E|0,g=((re(g,35468)>>16)-k|0)-(re(k,20091)>>16)|0,c[L+40>>2]=E-g,c[L+36>>2]=g+E,c[L+32>>2]=G+H,k=Di[n+22>>1],E=Di[n+6>>1],R=k+E|0,g=Di[n+14>>1],n=Di[n+30>>1],G=((re(g,20091)>>16)+g|0)+(re(n,35468)>>16)|0,c[L+60>>2]=R-G,k=E-k|0,n=((re(g,35468)>>16)-n|0)-(re(n,20091)>>16)|0,c[L+56>>2]=k-n,c[L+52>>2]=n+k,c[L+48>>2]=R+G,n=L,L=0;;){if(g=c[n+48>>2],k=((re(a,20091)>>16)+a|0)+(re(g,35468)>>16)|0,E=c[n>>2]+4|0,R=c[n+32>>2],G=E+R|0,H=F[s|0]+(k+G>>3)|0,H=(H|0)>0?H:0,p[s|0]=(H|0)<255?H:255,a=((re(a,35468)>>16)-g|0)-(re(g,20091)>>16)|0,g=E-R|0,E=F[s+1|0]+(a+g>>3)|0,E=(E|0)>0?E:0,p[s+1|0]=(E|0)<255?E:255,a=F[s+2|0]+(g-a>>3)|0,a=(a|0)>0?a:0,p[s+2|0]=(a|0)<255?a:255,a=F[s+3|0]+(G-k>>3)|0,a=(a|0)>0?a:0,p[s+3|0]=(a|0)<255?a:255,L=L+1|0,(L|0)!=4){s=s+32|0,a=c[n+20>>2],n=n+4|0;continue}break}}function _u(n){n=n|0;var s=0;s=_r(F[n+31|0],0,16843009,16843009),p[n+32|0]=s,p[n+33|0]=s>>>8,p[n+34|0]=s>>>16,p[n+35|0]=s>>>24,s=Bn,p[n+36|0]=s,p[n+37|0]=s>>>8,p[n+38|0]=s>>>16,p[n+39|0]=s>>>24,s=_r(F[n+63|0],0,16843009,16843009),p[n+64|0]=s,p[n+65|0]=s>>>8,p[n+66|0]=s>>>16,p[n+67|0]=s>>>24,s=Bn,p[n+68|0]=s,p[n+69|0]=s>>>8,p[n+70|0]=s>>>16,p[n+71|0]=s>>>24,s=_r(F[n+95|0],0,16843009,16843009),p[n+96|0]=s,p[n+97|0]=s>>>8,p[n+98|0]=s>>>16,p[n+99|0]=s>>>24,s=Bn,p[n+100|0]=s,p[n+101|0]=s>>>8,p[n+102|0]=s>>>16,p[n+103|0]=s>>>24,s=_r(F[n+127|0],0,16843009,16843009),p[n+128|0]=s,p[n+129|0]=s>>>8,p[n+130|0]=s>>>16,p[n+131|0]=s>>>24,s=Bn,p[n+132|0]=s,p[n+133|0]=s>>>8,p[n+134|0]=s>>>16,p[n+135|0]=s>>>24,s=_r(F[n+159|0],0,16843009,16843009),p[n+160|0]=s,p[n+161|0]=s>>>8,p[n+162|0]=s>>>16,p[n+163|0]=s>>>24,s=Bn,p[n+164|0]=s,p[n+165|0]=s>>>8,p[n+166|0]=s>>>16,p[n+167|0]=s>>>24,s=_r(F[n+191|0],0,16843009,16843009),p[n+192|0]=s,p[n+193|0]=s>>>8,p[n+194|0]=s>>>16,p[n+195|0]=s>>>24,s=Bn,p[n+196|0]=s,p[n+197|0]=s>>>8,p[n+198|0]=s>>>16,p[n+199|0]=s>>>24,s=_r(F[n+223|0],0,16843009,16843009),p[n+224|0]=s,p[n+225|0]=s>>>8,p[n+226|0]=s>>>16,p[n+227|0]=s>>>24,s=Bn,p[n+228|0]=s,p[n+229|0]=s>>>8,p[n+230|0]=s>>>16,p[n+231|0]=s>>>24,s=_r(F[n+-1|0],0,16843009,16843009),p[n|0]=s,p[n+1|0]=s>>>8,p[n+2|0]=s>>>16,p[n+3|0]=s>>>24,s=Bn,p[n+4|0]=s,p[n+5|0]=s>>>8,p[n+6|0]=s>>>16,p[n+7|0]=s>>>24}function Rs(n,s,a){n=n|0,s=s|0,a=a|0;var g=0,k=0,E=0;e:{if((a|0)!=1){for(;g=F[s|0]+(F[n|0]+-120>>4)|0,g=(g|0)>0?g:0,p[s|0]=(g|0)<255?g:255,g=F[s+1|0]+(F[n+1|0]+-120>>4)|0,g=(g|0)>0?g:0,p[s+1|0]=(g|0)<255?g:255,g=F[s+2|0]+(F[n+2|0]+-120>>4)|0,g=(g|0)>0?g:0,p[s+2|0]=(g|0)<255?g:255,g=F[s+3|0]+(F[n+3|0]+-120>>4)|0,g=(g|0)>0?g:0,p[s+3|0]=(g|0)<255?g:255,g=F[s+4|0]+(F[n+4|0]+-120>>4)|0,g=(g|0)>0?g:0,p[s+4|0]=(g|0)<255?g:255,g=F[s+5|0]+(F[n+5|0]+-120>>4)|0,g=(g|0)>0?g:0,p[s+5|0]=(g|0)<255?g:255,g=F[s+6|0]+(F[n+6|0]+-120>>4)|0,g=(g|0)>0?g:0,p[s+6|0]=(g|0)<255?g:255,g=F[s+7|0]+(F[n+7|0]+-120>>4)|0,g=(g|0)>0?g:0,p[s+7|0]=(g|0)<255?g:255,n=n+8|0,s=s+a|0,k=k+1|0,(k|0)!=8;);break e}for(k=F[s+6|0];g=F[s|0]+(F[n|0]+-120>>4)|0,g=(g|0)>0?g:0,p[s|0]=(g|0)<255?g:255,g=F[s+1|0]+(F[n+1|0]+-120>>4)|0,g=(g|0)>0?g:0,p[s+1|0]=(g|0)<255?g:255,g=F[s+2|0]+(F[n+2|0]+-120>>4)|0,g=(g|0)>0?g:0,p[s+2|0]=(g|0)<255?g:255,g=F[s+3|0]+(F[n+3|0]+-120>>4)|0,g=(g|0)>0?g:0,p[s+3|0]=(g|0)<255?g:255,g=F[s+4|0]+(F[n+4|0]+-120>>4)|0,g=(g|0)>0?g:0,p[s+4|0]=(g|0)<255?g:255,g=F[s+5|0]+(F[n+5|0]+-120>>4)|0,g=(g|0)>0?g:0,p[s+5|0]=(g|0)<255?g:255,k=(k&255)+(F[n+6|0]+-120>>4)|0,k=(k|0)>0?k:0,p[s+6|0]=(k|0)<255?k:255,k=F[s+7|0]+(F[n+7|0]+-120>>4)|0,k=(k|0)>0?k:0,k=(k|0)<255?k:255,p[s+7|0]=k,n=n+8|0,s=s+a|0,E=E+1|0,(E|0)!=8;);}}function vu(n){n=n|0;var s=0,a=0;s=_r((F[n+223|0]+(F[n+-25|0]+(F[n+191|0]+(F[n+-26|0]+(F[n+159|0]+(F[n+-27|0]+(F[n+127|0]+(F[n+-28|0]+(F[n+95|0]+(F[n+-29|0]+(F[n+63|0]+(F[n+-30|0]+(F[n+31|0]+(F[n+-31|0]+(F[n+-32|0]+F[n+-1|0]|0)|0)|0)|0)|0)|0)|0)|0)|0)|0)|0)|0)|0)|0)|0)+8>>>4&255,0,16843009,16843009),p[n+224|0]=s,p[n+225|0]=s>>>8,p[n+226|0]=s>>>16,p[n+227|0]=s>>>24,a=Bn,p[n+228|0]=a,p[n+229|0]=a>>>8,p[n+230|0]=a>>>16,p[n+231|0]=a>>>24,p[n+192|0]=s,p[n+193|0]=s>>>8,p[n+194|0]=s>>>16,p[n+195|0]=s>>>24,p[n+196|0]=a,p[n+197|0]=a>>>8,p[n+198|0]=a>>>16,p[n+199|0]=a>>>24,p[n+160|0]=s,p[n+161|0]=s>>>8,p[n+162|0]=s>>>16,p[n+163|0]=s>>>24,p[n+164|0]=a,p[n+165|0]=a>>>8,p[n+166|0]=a>>>16,p[n+167|0]=a>>>24,p[n+128|0]=s,p[n+129|0]=s>>>8,p[n+130|0]=s>>>16,p[n+131|0]=s>>>24,p[n+132|0]=a,p[n+133|0]=a>>>8,p[n+134|0]=a>>>16,p[n+135|0]=a>>>24,p[n+96|0]=s,p[n+97|0]=s>>>8,p[n+98|0]=s>>>16,p[n+99|0]=s>>>24,p[n+100|0]=a,p[n+101|0]=a>>>8,p[n+102|0]=a>>>16,p[n+103|0]=a>>>24,p[n+64|0]=s,p[n+65|0]=s>>>8,p[n+66|0]=s>>>16,p[n+67|0]=s>>>24,p[n+68|0]=a,p[n+69|0]=a>>>8,p[n+70|0]=a>>>16,p[n+71|0]=a>>>24,p[n+32|0]=s,p[n+33|0]=s>>>8,p[n+34|0]=s>>>16,p[n+35|0]=s>>>24,p[n+36|0]=a,p[n+37|0]=a>>>8,p[n+38|0]=a>>>16,p[n+39|0]=a>>>24,p[n|0]=s,p[n+1|0]=s>>>8,p[n+2|0]=s>>>16,p[n+3|0]=s>>>24,p[n+4|0]=a,p[n+5|0]=a>>>8,p[n+6|0]=a>>>16,p[n+7|0]=a>>>24}function ol(n,s){var a=0,g=0,k=0,E=0,L=0,R=0,G=0,H=0,te=0;e:{if(a=c[s+48>>2],!a||ft[a|0](s)|0)break e;return Ko(n,6,4844),c[n>>2]}e:{t:{i:{n:{if(c[s+68>>2]){c[n+2308>>2]=0,a=0;break n}if(a=2,E=c[n+2308>>2],g=F[E+4863|0],(E|0)==2)break i;a=E}if(E=c[s+76>>2]-g|0,c[n+296>>2]=E>>4,k=c[s+84>>2]-g|0,c[n+300>>2]=k>>4,(E|0)<=-1&&(c[n+296>>2]=0),(k|0)>-1)break e;E=n+300|0;break t}c[n+296>>2]=0,E=n+300|0}c[E>>2]=0}if(g=g+15|0,E=g+c[s+88>>2]>>4,c[n+308>>2]=E,k=c[n+288>>2],s=g+c[s+80>>2]>>4,c[n+304>>2]=(s|0)>(k|0)?k:s,s=c[n+292>>2],(E|0)>(s|0)&&(c[n+308>>2]=s),(a|0)>=1)for(H=c[n+68>>2],te=c[n+104>>2],E=0;;){s=(E<<3)+n|0;e:{if(te){if(a=p[(n+E|0)+120|0],g=a,c[n+112>>2])break e;g=a+c[n+60>>2]|0;break e}g=c[n+60>>2]}a=g,L=s+2312|0,a=H?c[n+72>>2]+a|0:a;e:{if((a|0)>=1){k=(a|0)<63?a:63,a=(a|0)>0?k:0,G=s+2313|0,R=c[n+64>>2],(R|0)>=1&&(k=9-R|0,R=a>>>((R|0)>4?2:1)|0,k=(R|0)>(k|0)?k:R),k=(k|0)>1?k:1,p[G|0]=k,p[L|0]=k+(a<<1),p[s+2315|0]=(a|0)>39?2:(a|0)>14;break e}p[L|0]=0}p[s+2314|0]=0,k=s+2316|0,g=H?c[n+88>>2]+(c[n+72>>2]+g|0)|0:g,L=(g|0)>0;e:{if(!L){p[k|0]=0;break e}a=(g|0)<63?g:63,g=L?a:0,G=s+2317|0,L=c[n+64>>2],(L|0)>=1&&(a=9-L|0,L=g>>>((L|0)>4?2:1)|0,a=(L|0)>(a|0)?a:L),a=(a|0)>1?a:1,p[G|0]=a,p[k|0]=a+(g<<1),p[s+2319|0]=(g|0)>39?2:(g|0)>14}if(p[s+2318|0]=1,E=E+1|0,(E|0)==4)break}return 0}function Zl(n,s){n=n|0,s=s|0;var a=0,g=0,k=0,E=0,L=0,R=0,G=0,H=0,te=0,ce=0,Ae=0,Ne=0,Ze=0,mt=0;g=Un+-64|0,k=Di[n+24>>1],a=Di[n>>1],E=k+a|0,R=Di[n+16>>1],G=Di[n+8>>1],L=R+G|0,c[g+32>>2]=E-L,k=a-k|0,a=G-R|0,c[g+48>>2]=k-a,c[g+16>>2]=a+k,Ae=E+L|0,c[g>>2]=Ae,k=Di[n+26>>1],a=Di[n+2>>1],E=k+a|0,R=Di[n+18>>1],G=Di[n+10>>1],L=R+G|0,c[g+36>>2]=E-L,k=a-k|0,a=G-R|0,c[g+52>>2]=k-a,k=a+k|0,c[g+20>>2]=k,a=E+L|0,c[g+4>>2]=a,E=Di[n+4>>1],R=Di[n+28>>1],G=E-R|0,L=Di[n+12>>1],H=Di[n+20>>1],te=L-H|0,c[g+56>>2]=G-te,L=L+H|0,R=E+R|0,E=L+R|0,c[g+8>>2]=E,R=R-L|0,c[g+40>>2]=R,G=G+te|0,c[g+24>>2]=G,L=Di[n+30>>1],H=Di[n+6>>1],te=L+H|0,ce=Di[n+22>>1],Ne=Di[n+14>>1],Ze=ce+Ne|0,n=te+Ze|0,c[g+12>>2]=n,mt=H-L|0,ce=Ne-ce|0,L=mt-ce|0,c[g+60>>2]=L,H=te-Ze|0,c[g+44>>2]=H,te=ce+mt|0,c[g+28>>2]=te,Ae=Ae+3|0,ce=Ae-n|0,Ne=a-E|0,Di[s+96>>1]=ce-Ne>>>3,n=n+Ae|0,a=a+E|0,Di[s+64>>1]=n-a>>>3,Di[s+32>>1]=ce+Ne>>>3,Di[s>>1]=n+a>>>3,n=c[g+16>>2]+3|0,a=n-te|0,E=k-G|0,Di[s+224>>1]=a-E>>>3,n=n+te|0,k=k+G|0,Di[s+192>>1]=n-k>>>3,Di[s+160>>1]=a+E>>>3,Di[s+128>>1]=n+k>>>3,n=c[g+32>>2]+3|0,k=n-H|0,a=c[g+36>>2],E=a-R|0,Di[s+352>>1]=k-E>>>3,n=n+H|0,a=a+R|0,Di[s+320>>1]=n-a>>>3,Di[s+288>>1]=k+E>>>3,Di[s+256>>1]=n+a>>>3,n=c[g+48>>2]+3|0,k=n-L|0,a=c[g+52>>2],g=c[g+56>>2],E=a-g|0,Di[s+480>>1]=k-E>>>3,n=n+L|0,g=g+a|0,Di[s+448>>1]=n-g>>>3,Di[s+416>>1]=k+E>>>3,Di[s+384>>1]=n+g>>>3}function Ta(n,s){var a=0,g=0,k=0,E=0,L=0,R=0,G=0,H=0,te=0,ce=0,Ae=0,Ne=0,Ze=0,mt=0,Pt=0,Ft=0,ni=0;for(Ze=s+904|0;;){for(R=0;;){for(G=0;;){for(E=0;;){ce=re(G,11),Ae=re(R,33),te=re(H,264),L=F[(ce+(Ae+(te+1392|0)|0)|0)+E|0],mt=c[n+4>>2],a=c[n+8>>2];e:{if((a|0)>-1)break e;if(g=c[n+12>>2],g>>>0<Qn[n+20>>2]){k=F[g|0]|F[g+1|0]<<8|(F[g+2|0]<<16|F[g+3|0]<<24),c[n+12>>2]=g+3,a=a+24|0,c[n+8>>2]=a,c[n>>2]=c[n>>2]<<24|(k>>>8&65280|(k<<8&16711680|k<<24))>>>8;break e}Rr(n),a=c[n+8>>2]}Ne=n,Pt=a,g=c[n>>2],L=re(L,mt)>>>8|0,k=g>>>a>>>0<=L>>>0;e:{if(!k){c[n>>2]=g+((L^-1)<<a),a=mt-L|0;break e}a=L+1|0}g=Br(a)^24,c[Ne+8>>2]=Pt-g,c[n+4>>2]=(a<<g)+-1,Ne=(((s+te|0)+Ae|0)+ce|0)+E|0;e:{if(!k){a=Lr(n,8);break e}a=F[(((te+2448|0)+Ae|0)+ce|0)+E|0]}if(p[Ne+907|0]=a,E=E+1|0,(E|0)==11)break}if(G=G+1|0,(G|0)==3)break}if(R=R+1|0,(R|0)==8)break}if(a=re(H,68)+Ze|0,k=te+Ze|0,E=k+3|0,c[a+1124>>2]=E,c[a+1120>>2]=k+234,g=k+201|0,c[a+1116>>2]=g,c[a+1112>>2]=g,c[a+1108>>2]=g,c[a+1104>>2]=g,c[a+1100>>2]=g,c[a+1096>>2]=g,c[a+1092>>2]=g,c[a+1088>>2]=g,c[a+1084>>2]=k+168,c[a+1080>>2]=k+135,c[a+1076>>2]=g,c[a+1072>>2]=k+102,c[a+1068>>2]=k+69,c[a+1064>>2]=k+36,c[a+1060>>2]=E,H=H+1|0,(H|0)==4)break}a=Lr(n,1),c[s+2236>>2]=a,a&&(Ft=s,ni=Lr(n,8),p[Ft+2240|0]=ni)}function Tl(n){n=n|0;var s=0,a=0;s=n,n=_r((F[s+-25|0]+(F[s+-26|0]+(F[s+-27|0]+(F[s+-28|0]+(F[s+-29|0]+(F[s+-30|0]+(F[s+-32|0]+F[s+-31|0]|0)|0)|0)|0)|0)|0)|0)+4>>>3&255,0,16843009,16843009),p[s+224|0]=n,p[s+225|0]=n>>>8,p[s+226|0]=n>>>16,p[s+227|0]=n>>>24,a=Bn,p[s+228|0]=a,p[s+229|0]=a>>>8,p[s+230|0]=a>>>16,p[s+231|0]=a>>>24,p[s+192|0]=n,p[s+193|0]=n>>>8,p[s+194|0]=n>>>16,p[s+195|0]=n>>>24,p[s+196|0]=a,p[s+197|0]=a>>>8,p[s+198|0]=a>>>16,p[s+199|0]=a>>>24,p[s+160|0]=n,p[s+161|0]=n>>>8,p[s+162|0]=n>>>16,p[s+163|0]=n>>>24,p[s+164|0]=a,p[s+165|0]=a>>>8,p[s+166|0]=a>>>16,p[s+167|0]=a>>>24,p[s+128|0]=n,p[s+129|0]=n>>>8,p[s+130|0]=n>>>16,p[s+131|0]=n>>>24,p[s+132|0]=a,p[s+133|0]=a>>>8,p[s+134|0]=a>>>16,p[s+135|0]=a>>>24,p[s+96|0]=n,p[s+97|0]=n>>>8,p[s+98|0]=n>>>16,p[s+99|0]=n>>>24,p[s+100|0]=a,p[s+101|0]=a>>>8,p[s+102|0]=a>>>16,p[s+103|0]=a>>>24,p[s+64|0]=n,p[s+65|0]=n>>>8,p[s+66|0]=n>>>16,p[s+67|0]=n>>>24,p[s+68|0]=a,p[s+69|0]=a>>>8,p[s+70|0]=a>>>16,p[s+71|0]=a>>>24,p[s+32|0]=n,p[s+33|0]=n>>>8,p[s+34|0]=n>>>16,p[s+35|0]=n>>>24,p[s+36|0]=a,p[s+37|0]=a>>>8,p[s+38|0]=a>>>16,p[s+39|0]=a>>>24,p[s|0]=n,p[s+1|0]=n>>>8,p[s+2|0]=n>>>16,p[s+3|0]=n>>>24,p[s+4|0]=a,p[s+5|0]=a>>>8,p[s+6|0]=a>>>16,p[s+7|0]=a>>>24}function Fc(n){n=n|0;var s=0,a=0;s=n,n=_r((F[s+223|0]+(F[s+191|0]+(F[s+159|0]+(F[s+127|0]+(F[s+95|0]+(F[s+63|0]+(F[s+-1|0]+F[s+31|0]|0)|0)|0)|0)|0)|0)|0)+4>>>3&255,0,16843009,16843009),p[s+224|0]=n,p[s+225|0]=n>>>8,p[s+226|0]=n>>>16,p[s+227|0]=n>>>24,a=Bn,p[s+228|0]=a,p[s+229|0]=a>>>8,p[s+230|0]=a>>>16,p[s+231|0]=a>>>24,p[s+192|0]=n,p[s+193|0]=n>>>8,p[s+194|0]=n>>>16,p[s+195|0]=n>>>24,p[s+196|0]=a,p[s+197|0]=a>>>8,p[s+198|0]=a>>>16,p[s+199|0]=a>>>24,p[s+160|0]=n,p[s+161|0]=n>>>8,p[s+162|0]=n>>>16,p[s+163|0]=n>>>24,p[s+164|0]=a,p[s+165|0]=a>>>8,p[s+166|0]=a>>>16,p[s+167|0]=a>>>24,p[s+128|0]=n,p[s+129|0]=n>>>8,p[s+130|0]=n>>>16,p[s+131|0]=n>>>24,p[s+132|0]=a,p[s+133|0]=a>>>8,p[s+134|0]=a>>>16,p[s+135|0]=a>>>24,p[s+96|0]=n,p[s+97|0]=n>>>8,p[s+98|0]=n>>>16,p[s+99|0]=n>>>24,p[s+100|0]=a,p[s+101|0]=a>>>8,p[s+102|0]=a>>>16,p[s+103|0]=a>>>24,p[s+64|0]=n,p[s+65|0]=n>>>8,p[s+66|0]=n>>>16,p[s+67|0]=n>>>24,p[s+68|0]=a,p[s+69|0]=a>>>8,p[s+70|0]=a>>>16,p[s+71|0]=a>>>24,p[s+32|0]=n,p[s+33|0]=n>>>8,p[s+34|0]=n>>>16,p[s+35|0]=n>>>24,p[s+36|0]=a,p[s+37|0]=a>>>8,p[s+38|0]=a>>>16,p[s+39|0]=a>>>24,p[s|0]=n,p[s+1|0]=n>>>8,p[s+2|0]=n>>>16,p[s+3|0]=n>>>24,p[s+4|0]=a,p[s+5|0]=a>>>8,p[s+6|0]=a>>>16,p[s+7|0]=a>>>24}function Rc(n){var s=0,a=0,g=0,k=0,E=0,L=0,R=0,G=0,H=0,te=0,ce=0;e:{t:{if(n){if(E=c[n+8>>2],te=c[E+40>>2],c[n+4>>2]){if(c[n+12>>2]=c[te>>2],!Da(c[te+20>>2],E,3))return c[n>>2]=2,jo(n),0;if(s=c[n+104>>2],a=s,k=s>>31,s=c[n+100>>2],L=_r(a,k,s,s>>31),a=Bn,G=c[E>>2],k=G,s=k>>31,s=s<<4|k>>>28,k=k<<4,H=n,R=s,s=k,k=G&65535,g=k,s=s+g|0,s>>>0<g>>>0&&(R=R+1|0),g=s+L|0,a=a+R|0,s=Ps(g,g>>>0<s>>>0?a+1|0:a,4),c[H+16>>2]=s,!s){c[n+20>>2]=0;break e}c[n+20>>2]=(s+(L<<2)|0)+(k<<2);i:{n:{if(c[E+92>>2]){if(ce=c[E+100>>2],G=c[E+16>>2],k=c[E+12>>2],L=c[E+96>>2],a=L,s=a>>31,g=a,a=s,s=s<<5|g>>>27,R=a<<2|g>>>30,H=g<<5,a=g<<2,g=H+a|0,s=s+R|0,s=g>>>0<a>>>0?s+1|0:s,a=g+84|0,a>>>0<84&&(s=s+1|0),s=Ps(a,s,1),!s){c[n>>2]=1;break t}if(c[n+268>>2]=s,c[n+264>>2]=s,a=s,s=s+84|0,al(a,k,G,s+H|0,L,ce,0,4,s),c[E+92>>2])break n}if(s=c[c[n+12>>2]>>2],s+-7>>>0>3)break i}fc(),s=c[c[n+12>>2]>>2]}i:{if(s>>>0<11||(aa(),!c[c[n+12>>2]+28>>2]))break i;fc()}i:{if(!c[n+56>>2]|c[n+120>>2]<1||(s=n+136|0,c[s>>2])||iu(s,c[n+132>>2]))break i;break e}c[n+4>>2]=0}if(!Wl(n,c[n+16>>2],c[n+100>>2],c[n+104>>2],c[E+88>>2],2))break t;c[te+16>>2]=c[n+116>>2],n=1}else n=0;return n}return jo(n),0}return c[n>>2]=1,jo(n),0}function Ll(n,s){n=n|0,s=s|0;var a=0,g=0,k=0,E=0,L=0,R=0;k=Di[n+2>>1],L=(re(k,20091)>>16)+k|0,g=Di[n+8>>1],R=re(g,35468)>>16,E=Di[n>>1]+4|0,a=R+E|0,n=F[s+32|0]+(L+a>>3)|0,n=(n|0)>0?n:0,p[s+32|0]=(n|0)<255?n:255,n=re(k,35468)>>16,k=F[s+33|0]+(n+a>>3)|0,k=(k|0)>0?k:0,p[s+33|0]=(k|0)<255?k:255,k=F[s+34|0]+(a-n>>3)|0,k=(k|0)>0?k:0,p[s+34|0]=(k|0)<255?k:255,a=F[s+35|0]+(a-L>>3)|0,a=(a|0)>0?a:0,p[s+35|0]=(a|0)<255?a:255,k=g+(re(g,20091)>>16)|0,a=k+E|0,g=F[s|0]+(a+L>>3)|0,g=(g|0)>0?g:0,p[s|0]=(g|0)<255?g:255,g=F[s+1|0]+(n+a>>3)|0,g=(g|0)>0?g:0,p[s+1|0]=(g|0)<255?g:255,g=F[s+2|0]+(a-n>>3)|0,g=(g|0)>0?g:0,p[s+2|0]=(g|0)<255?g:255,a=F[s+3|0]+(a-L>>3)|0,a=(a|0)>0?a:0,p[s+3|0]=(a|0)<255?a:255,a=E-R|0,g=F[s+64|0]+(a+L>>3)|0,g=(g|0)>0?g:0,p[s+64|0]=(g|0)<255?g:255,g=F[s+65|0]+(n+a>>3)|0,g=(g|0)>0?g:0,p[s+65|0]=(g|0)<255?g:255,g=F[s+66|0]+(a-n>>3)|0,g=(g|0)>0?g:0,p[s+66|0]=(g|0)<255?g:255,a=F[s+67|0]+(a-L>>3)|0,a=(a|0)>0?a:0,p[s+67|0]=(a|0)<255?a:255,E=E-k|0,a=F[s+96|0]+(E+L>>3)|0,a=(a|0)>0?a:0,p[s+96|0]=(a|0)<255?a:255,a=F[s+97|0]+(n+E>>3)|0,a=(a|0)>0?a:0,p[s+97|0]=(a|0)<255?a:255,n=F[s+98|0]+(E-n>>3)|0,n=(n|0)>0?n:0,p[s+98|0]=(n|0)<255?n:255,n=F[s+99|0]+(E-L>>3)|0,n=(n|0)>0?n:0,p[s+99|0]=(n|0)<255?n:255}function Bs(n,s,a,g,k){n=n|0,s=s|0,a=a|0,g=g|0,k=k|0;var E=0,L=0,R=0,G=0,H=0,te=0;if(H=k<<1&-4,H){for(H=g+H|0;R=re(F[n|0],19077)>>>8|0,E=F[a|0],G=R+(re(E,26149)>>>8|0)|0,L=G+-14234|0,te=(L>>>0<16384?L>>>6|0:G>>>0<14234?0:248)&248,G=F[s|0],E=R-(re(G,6419)>>>8|0)-(re(E,13320)>>>8)|0,L=E+8708|0,E=L>>>0<16384?L>>6:(E|0)<-8708?0:255,p[g|0]=te|E>>>5,L=E<<3&224,R=R+(re(G,33050)>>>8|0)|0,E=R+-17685|0,p[g+1|0]=L|(E>>>0<16384?E>>>9|0:R>>>0<17685?0:31),R=re(F[n+1|0],19077)>>>8|0,E=F[a|0],G=R+(re(E,26149)>>>8|0)|0,L=G+-14234|0,te=(L>>>0<16384?L>>>6|0:G>>>0<14234?0:248)&248,G=F[s|0],E=R-(re(G,6419)>>>8|0)-(re(E,13320)>>>8)|0,L=E+8708|0,E=L>>>0<16384?L>>6:(E|0)<-8708?0:255,p[g+2|0]=te|E>>>5,L=E<<3&224,R=R+(re(G,33050)>>>8|0)|0,E=R+-17685|0,p[g+3|0]=L|(E>>>0<16384?E>>>9|0:R>>>0<17685?0:31),a=a+1|0,s=s+1|0,n=n+2|0,g=g+4|0,(H|0)!=(g|0););g=H}k&1&&(n=re(F[n|0],19077)>>>8|0,a=F[a|0],k=n+(re(a,26149)>>>8|0)|0,H=k+-14234|0,H=(H>>>0<16384?H>>>6|0:k>>>0<14234?0:248)&248,s=F[s|0],a=n-(re(s,6419)>>>8|0)-(re(a,13320)>>>8)|0,k=a+8708|0,a=k>>>0<16384?k>>6:(a|0)<-8708?0:255,p[g|0]=H|a>>>5,n=n+(re(s,33050)>>>8|0)|0,s=n+-17685|0,p[g+1|0]=a<<3&224|(s>>>0<16384?s>>>9|0:n>>>0<17685?0:31))}function La(n,s,a,g,k){n=n|0,s=s|0,a=a|0,g=g|0,k=k|0;var E=0,L=0,R=0,G=0,H=0,te=0;if(E=k<<2&-8,E){for(E=g+E|0;L=F[a|0],R=F[s|0],G=F[n|0],p[g+3|0]=255,G=re(G,19077)>>>8|0,H=G+(re(R,33050)>>>8|0)|0,te=H+-17685|0,p[g+2|0]=te>>>0<16384?te>>>6|0:H>>>0<17685?0:255,H=G+(re(L,26149)>>>8|0)|0,te=H+-14234|0,p[g|0]=te>>>0<16384?te>>>6|0:H>>>0<14234?0:255,L=G-(re(R,6419)>>>8|0)-(re(L,13320)>>>8)|0,R=L+8708|0,p[g+1|0]=R>>>0<16384?R>>>6|0:(L|0)<-8708?0:255,L=F[a|0],R=F[s|0],G=F[n+1|0],p[g+7|0]=255,G=re(G,19077)>>>8|0,H=G+(re(R,33050)>>>8|0)|0,te=H+-17685|0,p[g+6|0]=te>>>0<16384?te>>>6|0:H>>>0<17685?0:255,H=G+(re(L,26149)>>>8|0)|0,te=H+-14234|0,p[g+4|0]=te>>>0<16384?te>>>6|0:H>>>0<14234?0:255,L=G-(re(R,6419)>>>8|0)-(re(L,13320)>>>8)|0,R=L+8708|0,p[g+5|0]=R>>>0<16384?R>>>6|0:(L|0)<-8708?0:255,a=a+1|0,s=s+1|0,n=n+2|0,g=g+8|0,(E|0)!=(g|0););g=E}k&1&&(a=F[a|0],s=F[s|0],n=F[n|0],p[g+3|0]=255,n=re(n,19077)>>>8|0,k=n+(re(s,33050)>>>8|0)|0,E=k+-17685|0,p[g+2|0]=E>>>0<16384?E>>>6|0:k>>>0<17685?0:255,k=n+(re(a,26149)>>>8|0)|0,E=k+-14234|0,p[g|0]=E>>>0<16384?E>>>6|0:k>>>0<14234?0:255,n=n-(re(s,6419)>>>8|0)-(re(a,13320)>>>8)|0,s=n+8708|0,p[g+1|0]=s>>>0<16384?s>>>6|0:(n|0)<-8708?0:255)}function Pa(n,s,a,g,k){n=n|0,s=s|0,a=a|0,g=g|0,k=k|0;var E=0,L=0,R=0,G=0,H=0,te=0;if(E=k<<2&-8,E){for(E=g+E|0;L=F[s|0],R=F[a|0],G=F[n|0],p[g+3|0]=255,G=re(G,19077)>>>8|0,H=G+(re(R,26149)>>>8|0)|0,te=H+-14234|0,p[g+2|0]=te>>>0<16384?te>>>6|0:H>>>0<14234?0:255,H=G+(re(L,33050)>>>8|0)|0,te=H+-17685|0,p[g|0]=te>>>0<16384?te>>>6|0:H>>>0<17685?0:255,L=G-(re(L,6419)>>>8|0)-(re(R,13320)>>>8)|0,R=L+8708|0,p[g+1|0]=R>>>0<16384?R>>>6|0:(L|0)<-8708?0:255,L=F[s|0],R=F[a|0],G=F[n+1|0],p[g+7|0]=255,G=re(G,19077)>>>8|0,H=G+(re(R,26149)>>>8|0)|0,te=H+-14234|0,p[g+6|0]=te>>>0<16384?te>>>6|0:H>>>0<14234?0:255,H=G+(re(L,33050)>>>8|0)|0,te=H+-17685|0,p[g+4|0]=te>>>0<16384?te>>>6|0:H>>>0<17685?0:255,L=G-(re(L,6419)>>>8|0)-(re(R,13320)>>>8)|0,R=L+8708|0,p[g+5|0]=R>>>0<16384?R>>>6|0:(L|0)<-8708?0:255,a=a+1|0,s=s+1|0,n=n+2|0,g=g+8|0,(E|0)!=(g|0););g=E}k&1&&(s=F[s|0],a=F[a|0],n=F[n|0],p[g+3|0]=255,n=re(n,19077)>>>8|0,k=n+(re(a,26149)>>>8|0)|0,E=k+-14234|0,p[g+2|0]=E>>>0<16384?E>>>6|0:k>>>0<14234?0:255,k=n+(re(s,33050)>>>8|0)|0,E=k+-17685|0,p[g|0]=E>>>0<16384?E>>>6|0:k>>>0<17685?0:255,n=n-(re(s,6419)>>>8|0)-(re(a,13320)>>>8)|0,s=n+8708|0,p[g+1|0]=s>>>0<16384?s>>>6|0:(n|0)<-8708?0:255)}function ra(n,s,a,g,k){n=n|0,s=s|0,a=a|0,g=g|0,k=k|0;var E=0,L=0,R=0,G=0,H=0,te=0;if(E=k<<2&-8,E){for(E=g+E|0;L=F[a|0],R=F[s|0],G=F[n|0],p[g|0]=255,G=re(G,19077)>>>8|0,H=G+(re(R,33050)>>>8|0)|0,te=H+-17685|0,p[g+3|0]=te>>>0<16384?te>>>6|0:H>>>0<17685?0:255,H=G+(re(L,26149)>>>8|0)|0,te=H+-14234|0,p[g+1|0]=te>>>0<16384?te>>>6|0:H>>>0<14234?0:255,L=G-(re(R,6419)>>>8|0)-(re(L,13320)>>>8)|0,R=L+8708|0,p[g+2|0]=R>>>0<16384?R>>>6|0:(L|0)<-8708?0:255,L=F[a|0],R=F[s|0],G=F[n+1|0],p[g+4|0]=255,G=re(G,19077)>>>8|0,H=G+(re(R,33050)>>>8|0)|0,te=H+-17685|0,p[g+7|0]=te>>>0<16384?te>>>6|0:H>>>0<17685?0:255,H=G+(re(L,26149)>>>8|0)|0,te=H+-14234|0,p[g+5|0]=te>>>0<16384?te>>>6|0:H>>>0<14234?0:255,L=G-(re(R,6419)>>>8|0)-(re(L,13320)>>>8)|0,R=L+8708|0,p[g+6|0]=R>>>0<16384?R>>>6|0:(L|0)<-8708?0:255,a=a+1|0,s=s+1|0,n=n+2|0,g=g+8|0,(E|0)!=(g|0););g=E}k&1&&(a=F[a|0],s=F[s|0],n=F[n|0],p[g|0]=255,n=re(n,19077)>>>8|0,k=n+(re(s,33050)>>>8|0)|0,E=k+-17685|0,p[g+3|0]=E>>>0<16384?E>>>6|0:k>>>0<17685?0:255,k=n+(re(a,26149)>>>8|0)|0,E=k+-14234|0,p[g+1|0]=E>>>0<16384?E>>>6|0:k>>>0<14234?0:255,n=n-(re(s,6419)>>>8|0)-(re(a,13320)>>>8)|0,s=n+8708|0,p[g+2|0]=s>>>0<16384?s>>>6|0:(n|0)<-8708?0:255)}function us(n){n=n|0,p[n+224|0]=-2139062144,p[n+225|0]=8421504,p[n+226|0]=32896,p[n+227|0]=128,p[n+228|0]=-2139062144,p[n+229|0]=8421504,p[n+230|0]=32896,p[n+231|0]=128,p[n+192|0]=-2139062144,p[n+193|0]=8421504,p[n+194|0]=32896,p[n+195|0]=128,p[n+196|0]=-2139062144,p[n+197|0]=8421504,p[n+198|0]=32896,p[n+199|0]=128,p[n+160|0]=-2139062144,p[n+161|0]=8421504,p[n+162|0]=32896,p[n+163|0]=128,p[n+164|0]=-2139062144,p[n+165|0]=8421504,p[n+166|0]=32896,p[n+167|0]=128,p[n+128|0]=-2139062144,p[n+129|0]=8421504,p[n+130|0]=32896,p[n+131|0]=128,p[n+132|0]=-2139062144,p[n+133|0]=8421504,p[n+134|0]=32896,p[n+135|0]=128,p[n+96|0]=-2139062144,p[n+97|0]=8421504,p[n+98|0]=32896,p[n+99|0]=128,p[n+100|0]=-2139062144,p[n+101|0]=8421504,p[n+102|0]=32896,p[n+103|0]=128,p[n+64|0]=-2139062144,p[n+65|0]=8421504,p[n+66|0]=32896,p[n+67|0]=128,p[n+68|0]=-2139062144,p[n+69|0]=8421504,p[n+70|0]=32896,p[n+71|0]=128,p[n+32|0]=-2139062144,p[n+33|0]=8421504,p[n+34|0]=32896,p[n+35|0]=128,p[n+36|0]=-2139062144,p[n+37|0]=8421504,p[n+38|0]=32896,p[n+39|0]=128,p[n|0]=-2139062144,p[n+1|0]=8421504,p[n+2|0]=32896,p[n+3|0]=128,p[n+4|0]=-2139062144,p[n+5|0]=8421504,p[n+6|0]=32896,p[n+7|0]=128}function sl(n){n=n|0;var s=0,a=0;s=n,n=s+-32|0,a=F[n|0]|F[n+1|0]<<8|(F[n+2|0]<<16|F[n+3|0]<<24),n=F[n+4|0]|F[n+5|0]<<8|(F[n+6|0]<<16|F[n+7|0]<<24),p[s+224|0]=a,p[s+225|0]=a>>>8,p[s+226|0]=a>>>16,p[s+227|0]=a>>>24,p[s+228|0]=n,p[s+229|0]=n>>>8,p[s+230|0]=n>>>16,p[s+231|0]=n>>>24,p[s+192|0]=a,p[s+193|0]=a>>>8,p[s+194|0]=a>>>16,p[s+195|0]=a>>>24,p[s+196|0]=n,p[s+197|0]=n>>>8,p[s+198|0]=n>>>16,p[s+199|0]=n>>>24,p[s+160|0]=a,p[s+161|0]=a>>>8,p[s+162|0]=a>>>16,p[s+163|0]=a>>>24,p[s+164|0]=n,p[s+165|0]=n>>>8,p[s+166|0]=n>>>16,p[s+167|0]=n>>>24,p[s+128|0]=a,p[s+129|0]=a>>>8,p[s+130|0]=a>>>16,p[s+131|0]=a>>>24,p[s+132|0]=n,p[s+133|0]=n>>>8,p[s+134|0]=n>>>16,p[s+135|0]=n>>>24,p[s+96|0]=a,p[s+97|0]=a>>>8,p[s+98|0]=a>>>16,p[s+99|0]=a>>>24,p[s+100|0]=n,p[s+101|0]=n>>>8,p[s+102|0]=n>>>16,p[s+103|0]=n>>>24,p[s+64|0]=a,p[s+65|0]=a>>>8,p[s+66|0]=a>>>16,p[s+67|0]=a>>>24,p[s+68|0]=n,p[s+69|0]=n>>>8,p[s+70|0]=n>>>16,p[s+71|0]=n>>>24,p[s+32|0]=a,p[s+33|0]=a>>>8,p[s+34|0]=a>>>16,p[s+35|0]=a>>>24,p[s+36|0]=n,p[s+37|0]=n>>>8,p[s+38|0]=n>>>16,p[s+39|0]=n>>>24,p[s|0]=a,p[s+1|0]=a>>>8,p[s+2|0]=a>>>16,p[s+3|0]=a>>>24,p[s+4|0]=n,p[s+5|0]=n>>>8,p[s+6|0]=n>>>16,p[s+7|0]=n>>>24}function Yo(n){var s=0,a=0,g=0,k=0,E=0,L=0,R=0,G=0,H=0,te=0,ce=0,Ae=0,Ne=0,Ze=0,mt=0,Pt=0,Ft=0,ni=0,ci=0;Ae=2,G=c[n>>2];e:{if(G>>>0>12)break e;L=c[n+8>>2],k=c[n+4>>2];t:{i:{if(G>>>0>=11){if(a=c[n+40>>2],g=a>>31,R=c[n+36>>2],s=R>>31,te=c[n+32>>2],E=te>>31,Ne=g^a+g,a=(k+1|0)/2|0,Ft=(Ne|0)>=(a|0),R=s^s+R,ni=(R|0)>=(a|0),s=E^E+te,ci=(s|0)>=(k|0),g=k,E=L+-1|0,te=E,Ze=E>>31,H=_r(E,Ze,s,0),E=g+H|0,mt=g>>31,s=mt+Bn|0,s=E>>>0<H>>>0?s+1|0:s,ce=!s&E>>>0<=Qn[n+48>>2]|s>>>0<0,s=a,L=((L+1|0)/2|0)+-1|0,E=L,H=E>>31,R=_r(E,H,R,0),L=s+R|0,Pt=s>>31,a=Pt+Bn|0,a=L>>>0<R>>>0?a+1|0:a,ce=ce&(!a&L>>>0<=Qn[n+52>>2]|a>>>0<0),L=_r(Ne,0,E,H)+s|0,a=Pt+Bn|0,a=L>>>0<s>>>0?a+1|0:a,s=L,s=Ft&(ni&(ci&(ce&(!a&s>>>0<=Qn[n+56>>2]|a>>>0<0))))&c[n+16>>2]!=0&c[n+20>>2]!=0&c[n+24>>2]!=0,(G|0)!=12)break i;if(!c[n+28>>2]||(G=c[n+44>>2],a=G>>31,a=a^a+G,!(s&(a|0)>=(k|0))))break e;if(k=_r(a,0,te,Ze)+g|0,s=mt+Bn|0,s=k>>>0<g>>>0?s+1|0:s,g=k,!s&g>>>0<=Qn[n+60>>2]|s>>>0<0)break t;break e}if(!c[n+16>>2]||(s=c[n+20>>2],g=s>>31,s=g^s+g,g=re(F[G+1157|0],k),(s|0)<(g|0)))break e;if(k=L+-1|0,k=_r(k,k>>31,s,0),s=k+g|0,g=Bn+(g>>31)|0,g=s>>>0<k>>>0?g+1|0:g,!g&s>>>0<=Qn[n+24>>2]|g>>>0<0)break t;break e}if(!s)break e}Ae=0}return Ae}function Uu(n,s,a,g){var k=0,E=0,L=0,R=0,G=0,H=0,te=0,ce=0,Ae=0,Ne=0,Ze=0;e:{t:{i:{n:{o:{l:{r:{u:{s:{a:{if(L=s,L){if(k=a,!k)break a;if(E=g,!E)break s;if(E=Br(E)-Br(L)|0,E>>>0<=31)break u;break t}if((g|0)==1&a>>>0>=0|g>>>0>1)break t;return s=(n>>>0)/(a>>>0)|0,Bn=0,s}if(k=g,!n)break r;if(!k||k+-1&k)break l;return n=L>>>(dp(k)&31)|0,Bn=0,n}if(!(k+-1&k))break o;H=(Br(k)+33|0)-Br(L)|0,R=0-H|0;break i}H=E+1|0,R=63-E|0;break i}return n=(L>>>0)/(k>>>0)|0,Bn=0,n}if(E=Br(k)-Br(L)|0,E>>>0<31)break n;break t}if((k|0)==1)break e;return a=n,n=dp(k),g=n&31,32<=(n&63)>>>0?(E=0,n=s>>>g|0):(E=s>>>g|0,n=((1<<g)-1&s)<<32-g|a>>>g),Bn=E,n}H=E+1|0,R=63-E|0}if(k=s,L=n,E=H&63,G=E&31,32<=(E&63)>>>0?(E=0,ce=k>>>G|0):(E=k>>>G|0,ce=((1<<G)-1&k)<<32-G|L>>>G),n=R&63,R=n&31,32<=(n&63)>>>0?(k=L<<R,n=0):(k=(1<<R)-1&L>>>32-R|s<<R,n=L<<R),s=k,H)for(L=g+-1|0,k=a+-1|0,(k|0)!=-1&&(L=L+1|0),R=k;k=ce,te=E<<1|k>>>31,E=k<<1|s>>>31,Ae=te,k=te,te=E,G=L-((R>>>0<E>>>0)+k|0)|0,k=G>>31,G=G>>31,E=a&G,ce=te-E|0,E=Ae-((g&k)+(te>>>0<E>>>0)|0)|0,k=s<<1|n>>>31,n=Ne|n<<1,s=k|Ze,Ae=0,te=G&1,Ne=te,H=H+-1|0,!!H;);return Bn=Ae|(s<<1|n>>>31),te|n<<1}n=0,s=0}return Bn=s,n}function Ma(n,s,a,g,k){n=n|0,s=s|0,a=a|0,g=g|0,k=k|0;var E=0,L=0,R=0,G=0,H=0,te=0;if(H=k<<1&-4,H){for(H=g+H|0;L=F[a|0],E=re(F[n|0],19077)>>>8|0,te=F[s|0],R=E+(re(te,33050)>>>8|0)|0,G=R+-17685|0,p[g+1|0]=(G>>>0<16384?G>>>6|0:R>>>0<17685?0:240)|15,R=E+(re(L,26149)>>>8|0)|0,G=R+-14234|0,L=E-(re(te,6419)>>>8|0)-(re(L,13320)>>>8)|0,E=L+8708|0,p[g|0]=(G>>>0<16384?G>>>6|0:R>>>0<14234?0:240)&240|(E>>>0<16384?E>>>10|0:(L|0)<-8708?0:15),L=F[a|0],E=re(F[n+1|0],19077)>>>8|0,te=F[s|0],R=E+(re(te,33050)>>>8|0)|0,G=R+-17685|0,p[g+3|0]=(G>>>0<16384?G>>>6|0:R>>>0<17685?0:240)|15,R=E+(re(L,26149)>>>8|0)|0,G=R+-14234|0,L=E-(re(te,6419)>>>8|0)-(re(L,13320)>>>8)|0,E=L+8708|0,p[g+2|0]=(G>>>0<16384?G>>>6|0:R>>>0<14234?0:240)&240|(E>>>0<16384?E>>>10|0:(L|0)<-8708?0:15),a=a+1|0,s=s+1|0,n=n+2|0,g=g+4|0,(H|0)!=(g|0););g=H}k&1&&(a=F[a|0],n=re(F[n|0],19077)>>>8|0,s=F[s|0],k=n+(re(s,33050)>>>8|0)|0,H=k+-17685|0,p[g+1|0]=(H>>>0<16384?H>>>6|0:k>>>0<17685?0:240)|15,H=g,g=n+(re(a,26149)>>>8|0)|0,k=g+-14234|0,n=n-(re(s,6419)>>>8|0)-(re(a,13320)>>>8)|0,s=n+8708|0,p[H|0]=(k>>>0<16384?k>>>6|0:g>>>0<14234?0:240)&240|(s>>>0<16384?s>>>10|0:(n|0)<-8708?0:15))}function oa(n,s,a,g){var k=0,E=0,L=0,R=0,G=0,H=0,te=0,ce=0,Ae=0,Ne=0,Ze=0,mt=0;ce=Un-592|0,Un=ce,E=s+24|0,L=eo(E,1),G=Zo(a,0,n<<2);e:{t:{i:{n:{if(L){if(a=eo(E,1),Ze=(eo(E,eo(E,1)?8:1)<<2)+G|0,mt=1,c[Ze>>2]=mt,(a|0)!=1)break n;Ze=(eo(E,8)<<2)+G|0,mt=1,c[Ze>>2]=mt;break n}if(te=Zo(ce,0,76),L=eo(E,4)+4|0,(L|0)>19)break t;if(a=0,(L|0)>0)for(;Ze=(F[a+1232|0]<<2)+te|0,mt=eo(E,3),c[Ze>>2]=mt,a=a+1|0,(L|0)!=(a|0););if(!xs(te+80|0,7,te,19)||(L=n,eo(E,1)&&(L=eo(E,(eo(E,3)<<1)+2|0)+2|0,(L|0)>(n|0))))break i;if((n|0)<1)break n;for(Ae=8,a=0;;){if(!L)break n;k=c[s+44>>2],(k|0)>=32&&(Se(E),k=c[s+44>>2]),Ne=k,R=c[s+28>>2],H=k&63,k=H&31,k=(te+80|0)+(((32<=(H&63)>>>0?R>>>k|0:((1<<k)-1&R)<<32-k|c[s+24>>2]>>>k)&127)<<2)|0,c[s+44>>2]=Ne+F[k|0],R=pn[k+2>>1];o:{if(R>>>0<=15){c[(a<<2)+G>>2]=R,Ae=R||Ae,a=a+1|0;break o}if(k=R+-16|0,H=eo(E,F[k+1251|0])+F[k+1254|0]|0,k=H+a|0,(k|0)>(n|0))break i;if((H|0)<1)break o;for(R=(R|0)==16?Ae:0;c[(a<<2)+G>>2]=R,a=a+1|0,(k|0)!=(a|0););a=k}if(L=L+-1|0,!((a|0)<(n|0)))break}}if(c[s+48>>2])break t;if(a=xs(g,8,G,n),a)break e;break t}c[s>>2]=3}c[s>>2]=3,a=0}return Un=ce+592|0,a}function Yr(n,s,a){n=n|0,s=s|0,a=a|0;var g=0,k=0,E=0;if(a>>>0>=512)return mu(n|0,s|0,a|0)|0,n|0;k=n+a|0;e:{if(!((n^s)&3)){t:{if((a|0)<1){a=n;break t}if(!(n&3)){a=n;break t}for(a=n;;){if(p[a|0]=F[s|0],s=s+1|0,a=a+1|0,a>>>0>=k>>>0)break t;if(!(a&3))break}}g=k&-4;t:{if(g>>>0<64||(E=g+-64|0,a>>>0>E>>>0))break t;for(;c[a>>2]=c[s>>2],c[a+4>>2]=c[s+4>>2],c[a+8>>2]=c[s+8>>2],c[a+12>>2]=c[s+12>>2],c[a+16>>2]=c[s+16>>2],c[a+20>>2]=c[s+20>>2],c[a+24>>2]=c[s+24>>2],c[a+28>>2]=c[s+28>>2],c[a+32>>2]=c[s+32>>2],c[a+36>>2]=c[s+36>>2],c[a+40>>2]=c[s+40>>2],c[a+44>>2]=c[s+44>>2],c[a+48>>2]=c[s+48>>2],c[a+52>>2]=c[s+52>>2],c[a+56>>2]=c[s+56>>2],c[a+60>>2]=c[s+60>>2],s=s- -64|0,a=a- -64|0,a>>>0<=E>>>0;);}if(a>>>0>=g>>>0)break e;for(;c[a>>2]=c[s>>2],s=s+4|0,a=a+4|0,a>>>0<g>>>0;);break e}if(k>>>0<4){a=n;break e}if(g=k+-4|0,g>>>0<n>>>0){a=n;break e}for(a=n;p[a|0]=F[s|0],p[a+1|0]=F[s+1|0],p[a+2|0]=F[s+2|0],p[a+3|0]=F[s+3|0],s=s+4|0,a=a+4|0,a>>>0<=g>>>0;);}if(a>>>0<k>>>0)for(;p[a|0]=F[s|0],s=s+1|0,a=a+1|0,(k|0)!=(a|0););return n|0}function ga(n,s,a,g,k){n=n|0,s=s|0,a=a|0,g=g|0,k=k|0;var E=0,L=0,R=0,G=0,H=0,te=0;if(L=k&-2,L){for(L=re(L,3)+g|0;R=F[a|0],E=re(F[n|0],19077)>>>8|0,te=F[s|0],G=E+(re(te,33050)>>>8|0)|0,H=G+-17685|0,p[g+2|0]=H>>>0<16384?H>>>6|0:G>>>0<17685?0:255,G=E+(re(R,26149)>>>8|0)|0,H=G+-14234|0,p[g|0]=H>>>0<16384?H>>>6|0:G>>>0<14234?0:255,R=E-(re(te,6419)>>>8|0)-(re(R,13320)>>>8)|0,E=R+8708|0,p[g+1|0]=E>>>0<16384?E>>>6|0:(R|0)<-8708?0:255,R=F[a|0],E=re(F[n+1|0],19077)>>>8|0,te=F[s|0],G=E+(re(te,33050)>>>8|0)|0,H=G+-17685|0,p[g+5|0]=H>>>0<16384?H>>>6|0:G>>>0<17685?0:255,G=E+(re(R,26149)>>>8|0)|0,H=G+-14234|0,p[g+3|0]=H>>>0<16384?H>>>6|0:G>>>0<14234?0:255,R=E-(re(te,6419)>>>8|0)-(re(R,13320)>>>8)|0,E=R+8708|0,p[g+4|0]=E>>>0<16384?E>>>6|0:(R|0)<-8708?0:255,a=a+1|0,s=s+1|0,n=n+2|0,g=g+6|0,(L|0)!=(g|0););g=L}k&1&&(a=F[a|0],n=re(F[n|0],19077)>>>8|0,s=F[s|0],k=n+(re(s,33050)>>>8|0)|0,L=k+-17685|0,p[g+2|0]=L>>>0<16384?L>>>6|0:k>>>0<17685?0:255,k=n+(re(a,26149)>>>8|0)|0,L=k+-14234|0,p[g|0]=L>>>0<16384?L>>>6|0:k>>>0<14234?0:255,n=n-(re(s,6419)>>>8|0)-(re(a,13320)>>>8)|0,s=n+8708|0,p[g+1|0]=s>>>0<16384?s>>>6|0:(n|0)<-8708?0:255)}function Pl(n,s,a,g,k){n=n|0,s=s|0,a=a|0,g=g|0,k=k|0;var E=0,L=0,R=0,G=0,H=0,te=0;if(L=k&-2,L){for(L=re(L,3)+g|0;R=F[s|0],E=re(F[n|0],19077)>>>8|0,te=F[a|0],G=E+(re(te,26149)>>>8|0)|0,H=G+-14234|0,p[g+2|0]=H>>>0<16384?H>>>6|0:G>>>0<14234?0:255,G=E+(re(R,33050)>>>8|0)|0,H=G+-17685|0,p[g|0]=H>>>0<16384?H>>>6|0:G>>>0<17685?0:255,R=E-(re(R,6419)>>>8|0)-(re(te,13320)>>>8)|0,E=R+8708|0,p[g+1|0]=E>>>0<16384?E>>>6|0:(R|0)<-8708?0:255,R=F[s|0],E=re(F[n+1|0],19077)>>>8|0,te=F[a|0],G=E+(re(te,26149)>>>8|0)|0,H=G+-14234|0,p[g+5|0]=H>>>0<16384?H>>>6|0:G>>>0<14234?0:255,G=E+(re(R,33050)>>>8|0)|0,H=G+-17685|0,p[g+3|0]=H>>>0<16384?H>>>6|0:G>>>0<17685?0:255,R=E-(re(R,6419)>>>8|0)-(re(te,13320)>>>8)|0,E=R+8708|0,p[g+4|0]=E>>>0<16384?E>>>6|0:(R|0)<-8708?0:255,a=a+1|0,s=s+1|0,n=n+2|0,g=g+6|0,(L|0)!=(g|0););g=L}k&1&&(s=F[s|0],n=re(F[n|0],19077)>>>8|0,a=F[a|0],k=n+(re(a,26149)>>>8|0)|0,L=k+-14234|0,p[g+2|0]=L>>>0<16384?L>>>6|0:k>>>0<14234?0:255,k=n+(re(s,33050)>>>8|0)|0,L=k+-17685|0,p[g|0]=L>>>0<16384?L>>>6|0:k>>>0<17685?0:255,n=n-(re(s,6419)>>>8|0)-(re(a,13320)>>>8)|0,s=n+8708|0,p[g+1|0]=s>>>0<16384?s>>>6|0:(n|0)<-8708?0:255)}function Vu(n,s){var a=0,g=0,k=0;e:{if(!n)break e;if(!s){if(c[n>>2])break e;return c[n>>2]=2,c[n+4>>2]=0,c[n+8>>2]=5281,0}if(!c[n+4>>2]&&!Ho(n,s))break e;t:{if(!ol(n,s)){i:{if(!yu(n,s))break i;c[n+2300>>2]=0;n:{if(c[n+308>>2]>=1)for(k=n+12|0;;){if(g=c[n+312>>2],!pa(k,n))break n;if(c[n+2296>>2]<c[n+288>>2])for(a=(re(a&g,28)+n|0)+316|0;;){if(!bs(n,a)){if(a=0,c[n>>2])break i;c[n>>2]=7,c[n+4>>2]=0,c[n+8>>2]=5412;break i}if(g=c[n+2296>>2]+1|0,c[n+2296>>2]=g,!((g|0)<c[n+288>>2]))break}if(a=c[n+2256>>2]+-2|0,p[a|0]=0,p[a+1|0]=0,c[n+2296>>2]=0,c[n+2248>>2]=0,!Nc(n,s)){if(a=0,c[n>>2])break i;c[n>>2]=6,c[n+4>>2]=0,c[n+8>>2]=5447;break i}if(a=c[n+2300>>2]+1|0,c[n+2300>>2]=a,!((a|0)<c[n+308>>2]))break}o:{if(c[n+148>>2]<1||ft[c[2559]](n+124|0)|0)break o;a=0;break i}a=1;break i}if(a=0,c[n>>2])break i;c[n>>2]=7,c[n+4>>2]=0,c[n+8>>2]=5371}if(c0(n,s)&a)break t}return ft[c[2562]](n+124|0),l0(n),Ur(c[n+2288>>2]),c[n+2288>>2]=0,c[n+2292>>2]=0,c[n+12>>2]=0,c[n+16>>2]=0,c[n+20>>2]=0,c[n+24>>2]=0,c[n+28>>2]=0,c[n+32>>2]=0,c[n+36>>2]=0,c[n+4>>2]=0,0}c[n+4>>2]=0,a=1}return a}function bu(n){var s=0,a=0,g=0,k=0,E=0,L=0,R=0,G=0,H=0,te=0,ce=0,Ae=0,Ne=0,Ze=0,mt=0,Pt=0;for(s=n+12|0,R=Lr(s,7),Lr(s,1)&&(ce=js(s,4)),Lr(s,1)&&(Ae=js(s,4)),Lr(s,1)&&(Ne=js(s,4)),Lr(s,1)&&(Ze=js(s,4)),Lr(s,1)&&(mt=js(s,4)),Pt=c[n+104>>2],L=n+776|0,G=L+24|0,H=L+16|0,te=L+8|0;;){e:{t:{if(Pt){s=p[(n+E|0)+116|0]+(c[n+112>>2]?0:R)|0;break t}if(s=R,!E)break t;a=c[G+4>>2],s=(E<<5)+n|0,c[s+800>>2]=c[G>>2],c[s+804>>2]=a,a=c[H+4>>2],c[s+792>>2]=c[H>>2],c[s+796>>2]=a,a=c[te+4>>2],c[s+784>>2]=c[te>>2],c[s+788>>2]=a,a=c[L+4>>2],c[s+776>>2]=c[L>>2],c[s+780>>2]=a;break e}a=(E<<5)+n|0,k=s+mt|0,c[a+800>>2]=k,g=s+Ze|0,g=(g|0)<117?g:117,c[a+792>>2]=F[((g|0)>0?g:0)+4448|0],g=(s|0)<127?s:127,c[a+780>>2]=pn[(((g|0)>0?g:0)<<1)+4576>>1],g=s+ce|0,g=(g|0)<127?g:127,c[a+776>>2]=F[((g|0)>0?g:0)+4448|0],k=(k|0)<127?k:127,c[a+796>>2]=pn[(((k|0)>0?k:0)<<1)+4576>>1],k=s+Ae|0,k=(k|0)<127?k:127,c[a+784>>2]=F[((k|0)>0?k:0)+4448|0]<<1,s=s+Ne|0,s=(s|0)<127?s:127,s=re(pn[(((s|0)>0?s:0)<<1)+4576>>1],101581),c[a+788>>2]=s>>>0<524288?8:s>>>16|0}if(E=E+1|0,(E|0)==4)break}}function Gs(n,s,a,g,k,E,L){var R=0,G=0,H=0,te=0,ce=0,Ae=0,Ne=0,Ze=0,mt=0,Pt=0,Ft=0,ni=0,ci=0,Mi=0,Si=0,Ji=0,sn=0,bn=0,ar=0,Tr=0,ys=0,wa=0,fl=0,Ku=0;if((g|0)>=1)for(ar=k<<1|1,Tr=re(s,3),ys=0-s|0,wa=re(s,-3),fl=0-(s<<2)|0,Ft=s<<1,Ku=0-Ft|0,ni=c[2547],H=c[2548],ci=c[2546],te=c[2549];;){k=g,Mi=n+Ku|0,G=F[Mi|0],Si=n+s|0,Ze=F[Si|0],R=G-Ze|0,mt=n+ys|0,g=F[mt|0],Ne=F[n|0];e:{if((F[R+te|0]+(F[te+(g-Ne|0)|0]<<2)|0)>(ar|0)||(Ji=n+wa|0,Ae=F[Ji|0],F[te+(F[n+fl|0]-Ae|0)|0]>(E|0)|F[te+(Ae-G|0)|0]>(E|0))||(ce=F[te+(G-g|0)|0],(ce|0)>(E|0))||(sn=n+Ft|0,Pt=F[sn|0],F[te+(F[n+Tr|0]-Pt|0)|0]>(E|0)|F[te+(Pt-Ze|0)|0]>(E|0))||(bn=F[te+(Ze-Ne|0)|0],(bn|0)>(E|0)))break e;if(R=p[R+ci|0]+re(Ne-g|0,3)|0,!((bn|0)<=(L|0)&&(ce|0)<=(L|0))){G=p[(R+4>>3)+ni|0],p[mt|0]=F[(p[(R+3>>3)+ni|0]+g|0)+H|0],p[n|0]=F[(Ne-G|0)+H|0];break e}ce=Ae,R=p[R+ci|0],Ae=re(R,9)+63>>7,p[Ji|0]=F[(ce+Ae|0)+H|0],ce=G,G=re(R,18)+63>>7,p[Mi|0]=F[(ce+G|0)+H|0],ce=g,g=re(R,27)+63>>7,p[mt|0]=F[(ce+g|0)+H|0],p[n|0]=F[(Ne-g|0)+H|0],p[Si|0]=F[(Ze-G|0)+H|0],p[sn|0]=F[(Pt-Ae|0)+H|0]}if(g=k+-1|0,n=n+a|0,!((k|0)>1))break}}function Ml(n,s,a){var g=0,k=0,E=0,L=0,R=0,G=0;if(g=tu(1,0,272),!g)return 0;c[g>>2]=0,c[g+4>>2]=2,_n(),E=c[n>>2],c[g+100>>2]=E,k=c[n+4>>2],c[g+8>>2]=n+24,c[g+104>>2]=k,c[n+28>>2]=k,c[n+24>>2]=E,c[n- -64>>2]=n,c[g>>2]=0,we(g+24|0,s,a);e:{t:{i:{if(!hn(c[n>>2],c[n+4>>2],1,g,0))break i;n:{o:{if(c[g+176>>2]!=1|c[g+180>>2]!=3|c[g+120>>2]>0)break o;if(a=c[g+164>>2],(a|0)<1)break n;for(s=c[g+168>>2],k=0;;){if(E=s+re(k,548)|0,F[c[E+4>>2]]|F[c[E+8>>2]]|F[c[E+12>>2]])break o;if(k=k+1|0,(a|0)==(k|0))break}break n}if(c[n+132>>2]=0,s=c[g+104>>2],a=s,k=s>>31,s=c[g+100>>2],L=_r(a,k,s,s>>31),a=Bn,G=g,k=c[n>>2],s=k>>31,s=s<<4|k>>>28,E=k<<4,R=k&65535,k=R,E=E+k|0,E>>>0<k>>>0&&(s=s+1|0),k=E+L|0,s=s+a|0,s=Ps(k,k>>>0<E>>>0?s+1|0:s,4),c[G+16>>2]=s,s)break t;c[g+20>>2]=0,c[g>>2]=1;break i}if(c[n+132>>2]=1,c[g+20>>2]=0,s=c[g+104>>2],a=s,k=s>>31,s=c[g+100>>2],s=Ps(_r(a,k,s,s>>31),Bn,1),c[g+16>>2]=s,s)break e;c[g>>2]=1}return jo(g),Ur(g),0}c[g+20>>2]=(s+(L<<2)|0)+(R<<2)}return c[n+20>>2]=g,1}function ms(n,s,a){n=n|0,s=s|0,a=a|0;var g=0,k=0,E=0,L=0,R=0,G=0,H=0,te=0,ce=0,Ae=0,Ne=0,Ze=0,mt=0,Pt=0;for(Ae=0-s|0,te=s<<2,G=te+n|0,Ne=0-(s<<1)|0,Ze=a<<1|1,n=c[2548],a=c[2547],mt=c[2546],ce=c[2549];g=k+G|0,L=g+Ae|0,H=F[L|0],R=F[g|0],E=F[g+Ne|0]-F[s+g|0]|0,((F[ce+(H-R|0)|0]<<2)+F[E+ce|0]|0)<=(Ze|0)&&(E=p[E+mt|0]+re(R-H|0,3)|0,Pt=p[(E+4>>3)+a|0],p[L|0]=F[(H+p[(E+3>>3)+a|0]|0)+n|0],p[g|0]=F[(R-Pt|0)+n|0]),k=k+1|0,(k|0)!=16;);for(G=G+te|0,k=0;g=k+G|0,L=g+Ae|0,H=F[L|0],R=F[g|0],E=F[g+Ne|0]-F[s+g|0]|0,((F[ce+(H-R|0)|0]<<2)+F[E+ce|0]|0)<=(Ze|0)&&(E=p[E+mt|0]+re(R-H|0,3)|0,Pt=p[(E+4>>3)+a|0],p[L|0]=F[(H+p[(E+3>>3)+a|0]|0)+n|0],p[g|0]=F[(R-Pt|0)+n|0]),k=k+1|0,(k|0)!=16;);for(H=G+te|0,k=0;g=k+H|0,R=g+Ae|0,te=F[R|0],G=F[g|0],L=F[g+Ne|0]-F[s+g|0]|0,((F[ce+(te-G|0)|0]<<2)+F[L+ce|0]|0)<=(Ze|0)&&(L=p[L+mt|0]+re(G-te|0,3)|0,E=p[(L+4>>3)+a|0],p[R|0]=F[(te+p[(L+3>>3)+a|0]|0)+n|0],p[g|0]=F[(G-E|0)+n|0]),k=k+1|0,(k|0)!=16;);}function Dn(n,s,a){n=n|0,s=s|0,a=a|0;var g=0,k=0,E=0,L=0,R=0,G=0,H=0,te=0,ce=0,Ae=0,Ne=0,Ze=0;for(H=n+4|0,Ae=a<<1|1,a=c[2548],te=c[2547],Ne=c[2546],ce=c[2549];g=H+re(s,k)|0,L=g+-1|0,R=F[L|0],G=F[g|0],E=F[g+-2|0]-F[g+1|0]|0,((F[ce+(R-G|0)|0]<<2)+F[E+ce|0]|0)<=(Ae|0)&&(E=p[E+Ne|0]+re(G-R|0,3)|0,Ze=p[(E+4>>3)+te|0],p[L|0]=F[(R+p[(E+3>>3)+te|0]|0)+a|0],p[g|0]=F[(G-Ze|0)+a|0]),k=k+1|0,(k|0)!=16;);for(H=n+8|0,k=0;g=H+re(s,k)|0,L=g+-1|0,R=F[L|0],G=F[g|0],E=F[g+-2|0]-F[g+1|0]|0,((F[ce+(R-G|0)|0]<<2)+F[E+ce|0]|0)<=(Ae|0)&&(E=p[E+Ne|0]+re(G-R|0,3)|0,Ze=p[(E+4>>3)+te|0],p[L|0]=F[(R+p[(E+3>>3)+te|0]|0)+a|0],p[g|0]=F[(G-Ze|0)+a|0]),k=k+1|0,(k|0)!=16;);for(G=n+12|0,k=0;n=G+re(s,k)|0,H=n+-1|0,g=F[H|0],R=F[n|0],L=F[n+-2|0]-F[n+1|0]|0,((F[ce+(g-R|0)|0]<<2)+F[L+ce|0]|0)<=(Ae|0)&&(L=p[L+Ne|0]+re(R-g|0,3)|0,E=p[(L+4>>3)+te|0],p[H|0]=F[(g+p[(L+3>>3)+te|0]|0)+a|0],p[n|0]=F[(R-E|0)+a|0]),k=k+1|0,(k|0)!=16;);}function Ro(n,s){n=n|0,s=s|0;var a=0;n=Di[n>>1]+4>>3,a=n+F[s|0]|0,a=(a|0)>0?a:0,p[s|0]=(a|0)<255?a:255,a=n+F[s+1|0]|0,a=(a|0)>0?a:0,p[s+1|0]=(a|0)<255?a:255,a=n+F[s+2|0]|0,a=(a|0)>0?a:0,p[s+2|0]=(a|0)<255?a:255,a=n+F[s+3|0]|0,a=(a|0)>0?a:0,p[s+3|0]=(a|0)<255?a:255,a=n+F[s+32|0]|0,a=(a|0)>0?a:0,p[s+32|0]=(a|0)<255?a:255,a=n+F[s+33|0]|0,a=(a|0)>0?a:0,p[s+33|0]=(a|0)<255?a:255,a=n+F[s+34|0]|0,a=(a|0)>0?a:0,p[s+34|0]=(a|0)<255?a:255,a=n+F[s+35|0]|0,a=(a|0)>0?a:0,p[s+35|0]=(a|0)<255?a:255,a=n+F[s+64|0]|0,a=(a|0)>0?a:0,p[s+64|0]=(a|0)<255?a:255,a=n+F[s+65|0]|0,a=(a|0)>0?a:0,p[s+65|0]=(a|0)<255?a:255,a=n+F[s+66|0]|0,a=(a|0)>0?a:0,p[s+66|0]=(a|0)<255?a:255,a=n+F[s+67|0]|0,a=(a|0)>0?a:0,p[s+67|0]=(a|0)<255?a:255,a=n+F[s+96|0]|0,a=(a|0)>0?a:0,p[s+96|0]=(a|0)<255?a:255,a=n+F[s+97|0]|0,a=(a|0)>0?a:0,p[s+97|0]=(a|0)<255?a:255,a=n+F[s+98|0]|0,a=(a|0)>0?a:0,p[s+98|0]=(a|0)<255?a:255,n=n+F[s+99|0]|0,n=(n|0)>0?n:0,p[s+99|0]=(n|0)<255?n:255}function Gr(n,s,a,g,k,E,L){var R=0,G=0,H=0,te=0,ce=0,Ae=0,Ne=0,Ze=0,mt=0,Pt=0,Ft=0,ni=0,ci=0,Mi=0,Si=0,Ji=0,sn=0,bn=0,ar=0,Tr=0,ys=0;if((g|0)>=1)for(Si=k<<1|1,Ji=re(s,3),sn=0-s|0,bn=re(s,-3),ar=0-(s<<2)|0,Ft=s<<1,Tr=0-Ft|0,ys=c[2546],te=c[2548],Ne=c[2547],H=c[2549];;){k=g,ni=n+Tr|0,G=F[ni|0],ci=n+s|0,ce=F[ci|0],Ze=G-ce|0,Pt=n+sn|0,g=F[Pt|0],Ae=F[n|0];e:{if((F[Ze+H|0]+(F[H+(g-Ae|0)|0]<<2)|0)>(Si|0)||(R=F[n+bn|0],F[H+(F[n+ar|0]-R|0)|0]>(E|0)|F[H+(R-G|0)|0]>(E|0))||(mt=F[H+(G-g|0)|0],(mt|0)>(E|0))||(R=F[n+Ft|0],F[H+(F[n+Ji|0]-R|0)|0]>(E|0)|F[H+(R-ce|0)|0]>(E|0))||(Mi=F[H+(ce-Ae|0)|0],(Mi|0)>(E|0)))break e;if(R=re(Ae-g|0,3),!((Mi|0)<=(L|0)&&(mt|0)<=(L|0))){G=p[Ze+ys|0]+R|0,ce=p[(G+4>>3)+Ne|0],p[Pt|0]=F[(p[(G+3>>3)+Ne|0]+g|0)+te|0],p[n|0]=F[(Ae-ce|0)+te|0];break e}Ze=p[(R+3>>3)+Ne|0],mt=G,G=p[(R+4>>3)+Ne|0],R=G+1>>1,p[ni|0]=F[(mt+R|0)+te|0],p[Pt|0]=F[(g+Ze|0)+te|0],p[n|0]=F[(Ae-G|0)+te|0],p[ci|0]=F[(ce-R|0)+te|0]}if(g=k+-1|0,n=n+a|0,!((k|0)>1))break}}function Lo(n,s,a,g){var k=0,E=0,L=0,R=0,G=0,H=0,te=0,ce=0;e:{t:switch(a|0){case 0:ft[c[2734]](n,s,g);return;case 1:ft[c[2735]](n,s,g);return;case 7:ft[c[2735]](n,s,g),ft[c[2664]](g,0,s,1,0);return;case 2:ft[c[2736]](n,s,g);return;case 3:Yr(g,n,s<<2);return;case 8:R=Yr(g,n,s<<2),G=0,H=s,te=1,ce=0,L=c[2664],ft[L](R|0,G|0,H|0,te|0,ce|0);return;case 4:if((s|0)<1)break e;for(a=(s<<2)+n|0;s=c[n>>2],s=s<<24|s<<8&16711680|(s>>>8&65280|s>>>24),p[g|0]=s,p[g+1|0]=s>>>8,p[g+2|0]=s>>>16,p[g+3|0]=s>>>24,g=g+4|0,n=n+4|0,n>>>0<a>>>0;);break e;case 9:if((s|0)>=1)for(E=(s<<2)+n|0,a=g;k=c[n>>2],k=k<<24|k<<8&16711680|(k>>>8&65280|k>>>24),p[a|0]=k,p[a+1|0]=k>>>8,p[a+2|0]=k>>>16,p[a+3|0]=k>>>24,a=a+4|0,n=n+4|0,n>>>0<E>>>0;);ft[c[2664]](g,1,s,1,0);return;case 5:ft[c[2737]](n,s,g);return;case 10:ft[c[2737]](n,s,g),ft[c[2665]](g,s,1,0);return;case 6:break t;default:break e}ft[c[2738]](n,s,g)}}function rs(n,s,a){var g=0,k=0,E=0;g=Un-160|0,Un=g,c[g+16>>2]=1,c[g+12>>2]=s,c[g+8>>2]=n,c[g+156>>2]=0,k=g,E=El(n,s,0,0,0,g+156|0,0,g+8|0),c[k+48>>2]=E,!c[g+156>>2]|(c[g+48>>2]!=7?c[g+48>>2]:0)||(c[g+48>>2]=4),n=c[g+48>>2];e:{if(n)break e;yp(g+48|0),n=c[g+20>>2],c[g+112>>2]=n+c[g+8>>2],c[g+108>>2]=c[g+12>>2]-n,Xh(a,g+48|0);t:{if(!c[g+40>>2]){if(s=ko(),!s){n=1;break e}c[s+2348>>2]=c[g+24>>2],c[s+2352>>2]=c[g+28>>2];i:{if(Ho(s,g+48|0)&&(n=Yl(c[g+48>>2],c[g+52>>2],c[a+20>>2],c[a>>2]),n||(c[s+148>>2]=0,zh(c[a+20>>2],s),n=0,Vu(s,g+48|0))))break i;n=c[s>>2]}Ns(s);break t}s=tu(1,0,272),n=0;i:{if(!s)break i;c[s>>2]=0,c[s+4>>2]=2,_n(),n=s}if(s=n,!s){n=1;break e}i:{if(je(s,g+48|0)&&(n=Yl(c[g+48>>2],c[g+52>>2],c[a+20>>2],c[a>>2]),n||(n=0,Rc(s))))break i;n=c[s>>2]}g0(s)}if(n){If(c[a>>2]);break e}if(n=0,s=c[a+20>>2],!s|!c[s+48>>2])break e;n=Qe(c[a>>2])}return Un=g+160|0,n}function _n(){var n=0;n=c[2673],(n|0)!=c[2551]&&(c[2771]=81,c[2770]=81,c[2769]=82,c[2768]=83,c[2767]=84,c[2766]=85,c[2765]=86,c[2764]=87,c[2763]=88,c[2762]=89,c[2761]=90,c[2760]=91,c[2759]=92,c[2758]=93,c[2757]=94,c[2756]=81,c[2803]=81,c[2802]=81,c[2801]=82,c[2800]=83,c[2799]=84,c[2798]=85,c[2797]=86,c[2796]=87,c[2795]=88,c[2794]=89,c[2793]=90,c[2792]=91,c[2791]=92,c[2790]=93,c[2789]=94,c[2788]=81,c[2755]=95,c[2754]=95,c[2753]=96,c[2752]=97,c[2751]=98,c[2750]=99,c[2749]=100,c[2748]=101,c[2747]=102,c[2746]=103,c[2745]=104,c[2744]=105,c[2743]=106,c[2742]=107,c[2741]=108,c[2740]=95,c[2787]=95,c[2786]=95,c[2785]=96,c[2784]=97,c[2783]=98,c[2782]=99,c[2781]=100,c[2780]=101,c[2779]=102,c[2778]=103,c[2777]=104,c[2776]=105,c[2775]=106,c[2774]=107,c[2773]=108,c[2772]=95,c[2733]=109,c[2804]=110,c[2735]=111,c[2734]=112,c[2736]=113,c[2737]=114,c[2738]=115,c[2805]=116,c[2732]=117,c[2551]=n)}function Da(n,s,a){var g=0,k=0,E=0,L=0,R=0,G=0,H=0,te=0;k=Un-16|0,Un=k,G=c[s+4>>2],H=c[s>>2];e:{t:{if(!n){c[s+72>>2]=0,g=H,E=G;break t}if(L=c[n+8>>2],c[s+72>>2]=(L|0)>0,g=H,E=G,(L|0)<1)break t;if(L=0,g=c[n+16>>2],a=a>>>0>10,R=a?g&-2:g,E=c[n+24>>2],(R+E|0)>(G|0)||(g=c[n+12>>2],te=a?g&-2:g,g=c[n+20>>2],(E|0)<1|(te+g|0)>(H|0)|((g|0)<1|(R|te)<0)))break e}if(c[s+84>>2]=R,c[s+76>>2]=te,c[s+16>>2]=E,c[s+12>>2]=g,c[s+88>>2]=R+E,c[s+80>>2]=g+te,n){a=c[n+28>>2],c[s+92>>2]=(a|0)>0,L=1,R=1;t:{if((a|0)>=1){if(c[k+12>>2]=c[n+32>>2],c[k+8>>2]=c[n+36>>2],!tt(g,E,k+12|0,k+8|0))break t;c[s+96>>2]=c[k+12>>2],c[s+100>>2]=c[k+8>>2],R=!c[s+92>>2]}if(c[s+68>>2]=c[n>>2]!=0,c[s+56>>2]=!c[n+4>>2],R)break e;n=0,n=c[s+96>>2]<((re(H,3)|0)/4|0)?c[s+100>>2]<((re(G,3)|0)/4|0):n,c[s+56>>2]=0,c[s+68>>2]=n;break e}L=0;break e}c[s+68>>2]=0,c[s+92>>2]=0,L=1,c[s+56>>2]=1}return Un=k+16|0,L}function qu(n,s){n=n|0,s=s|0;var a=0,g=0,k=0,E=0,L=0,R=0,G=0,H=0,te=0,ce=0,Ae=0,Ne=0,Ze=0;if(g=c[n+108>>2],L=s-g|0,(L|0)>=1)for(a=c[n+100>>2],H=c[n+16>>2]+(re(a,g)<<2)|0;;){R=(L|0)<16?L:16,Ae=R+g|0,k=c[n+8>>2],te=c[k>>2],Ne=re(te,R),ce=c[k+40>>2],k=c[ce+136>>2]+re(g,te)|0,G=c[n+20>>2],E=c[n+176>>2];e:{if((E|0)>=1){if(a=E+-1|0,Xl((re(a,20)+n|0)+180|0,g,Ae,H,G),(E|0)<2)break e;for(;E=a+-1|0,Xl((re(E,20)+n|0)+180|0,g,Ae,G,G),Ze=(a|0)>1,a=E,!!Ze;);break e}if((G|0)==(H|0))break e;Yr(G,H,re(a,R)<<2)}if(ft[c[2669]](G,k,Ne),E=c[ce+12>>2],E){a=c[ce+140>>2];e:{if((L|0)<1)break e;if(ft[c[(E<<2)+10912>>2]](a,k,k,te),(R|0)==1){a=k;break e}for(g=g+1|0;a=k+te|0,ft[c[(c[ce+12>>2]<<2)+10912>>2]](k,a,a,te),k=a,g=g+1|0,(Ae|0)!=(g|0););}c[ce+140>>2]=a}if(a=c[n+100>>2],H=(re(a,R)<<2)+H|0,g=Ae,L=L-R|0,!((L|0)>0))break}c[n+108>>2]=s,c[n+116>>2]=s}function Hu(n,s){n=n|0,s=s|0;var a=0,g=0,k=0,E=0,L=0,R=0,G=0,H=0,te=0,ce=0,Ae=0;if(L=c[n+16>>2],(L|0)<1)return 0;for(ce=L+1>>1,a=c[s+24>>2];;){g=a,a=c[n+32>>2],E=ws(g,L-R|0,c[n+20>>2]+re(a,R)|0,a),a=ce-G|0,vc(c[s+28>>2],a)&&(k=c[n+36>>2],k=ws(c[s+28>>2],a,c[n+24>>2]+re(k,G)|0,k),g=a,a=c[n+36>>2],ws(c[s+32>>2],g,c[n+28>>2]+re(a,G)|0,a),G=k+G|0),R=E+R|0,E=c[s>>2],g=c[E>>2],k=0,a=c[s+24>>2];e:{if(c[a+64>>2]>=c[a+56>>2])break e;for(Ae=c[(g<<2)+11312>>2],g=c[E+16>>2]+re(c[E+20>>2],c[s+16>>2]+H|0)|0;;){if(c[a+24>>2]>0||(te=c[s+28>>2],c[te+64>>2]>=c[te+56>>2]|c[te+24>>2]>0))break e;if(Ni(a),Ni(c[s+28>>2]),Ni(c[s+32>>2]),a=c[s+24>>2],ft[Ae|0](c[a+68>>2],c[c[s+28>>2]+68>>2],c[c[s+32>>2]+68>>2],g,c[a+52>>2]),k=k+1|0,g=c[E+20>>2]+g|0,a=c[s+24>>2],!(c[a+64>>2]<c[a+56>>2]))break}}if(H=k+H|0,!((L|0)>(R|0)))break}return H|0}function Bc(n,s){n=n|0,s=s|0;var a=0,g=0,k=0,E=0,L=0,R=0;a=Un-240|0,Un=a,k=a+40|0,k?(Zh(Zo(k,0,200)+40|0),k=1):k=0;e:{if(!k){Gh(c[2536]);break e}F[10640]||(Na(32)|0,p[10640]=1),k=a+80|0;t:{if(Wr(n,s,a+40|0))break t;if(E=Oc(c[a+40>>2],c[a+44>>2],32,0)|0,!E){n=c[a+44>>2],c[a>>2]=c[a+40>>2],c[a+4>>2]=n,Zu(c[2536],1051,a),E=0;break t}if(g=Cl(0,c[a+40>>2],c[a+44>>2],32,255,65280,16711680,-16777216)|0,!g){n=c[a+44>>2],c[a+16>>2]=c[a+40>>2],c[a+20>>2]=n,Zu(c[2536],1092,a+16|0),g=0;break t}if(Hs(g|0)|0,c[a+80>>2]=1,c[a+84>>2]=c[g+8>>2],c[a+88>>2]=c[g+12>>2],c[a+96>>2]=c[g+20>>2],c[a+100>>2]=c[g+16>>2],L=c[g+12>>2],R=c[g+16>>2],c[a+92>>2]=1,c[a+104>>2]=re(L,R),n=Ks(n,s,a+40|0),n){c[a+32>>2]=n,L=0,Zu(c[2536],1130,a+32|0);break t}if(ac(g|0),L=0,fu(g|0,0,E|0,0)|0)break t;L=!(uh(E|0)|0)}du(g|0),du(E|0),If(k)}return Un=a+240|0,L|0}function hh(n,s,a,g,k){n=n|0,s=s|0,a=a|0,g=g|0,k=k|0;var E=0,L=0,R=0,G=0,H=0,te=0;if((g|0)>=2)for(L=g>>1,G=(L|0)>1?L:1,L=0;;){E=L<<3,R=c[(E|4)+n>>2],E=c[n+E>>2],H=(R>>>7&510)+(E>>>7&510)|0,te=(R>>>15&510)+(E>>>15&510)|0,E=(R<<1&510)+(E<<1&510)|0,R=((re(H,-24116)+re(te,28800)|0)+re(E,-4684)|0)+33685504>>18,E=((re(H,-19081)+re(te,-9719)|0)+re(E,28800)|0)+33685504>>18;e:{if(k){p[s+L|0]=E,p[a+L|0]=R;break e}H=s+L|0,p[H|0]=(E+F[H|0]|0)+1>>>1,E=a+L|0,p[E|0]=(R+F[E|0]|0)+1>>>1}if(L=L+1|0,(G|0)==(L|0))break}if(g&1){if(n=c[(G<<3)+n>>2],g=n>>>6&1020,L=n>>>14&1020,R=n<<2&1020,n=((re(g,-24116)+re(L,28800)|0)+re(R,-4684)|0)+33685504>>18,g=((re(g,-19081)+re(L,-9719)|0)+re(R,28800)|0)+33685504>>18,k){p[s+G|0]=g,p[a+G|0]=n;return}s=s+G|0,p[s|0]=(g+F[s|0]|0)+1>>>1,s=a+G|0,p[s|0]=(n+F[s|0]|0)+1>>>1}}function fh(n,s){n=n|0,s=s|0;var a=0,g=0,k=0,E=0,L=0,R=0,G=0,H=0,te=0,ce=0,Ae=0,Ne=0,Ze=0,mt=0,Pt=0,Ft=0;k=c[n+16>>2],H=c[n+12>>2],Ne=(H+1|0)/2|0,te=c[s>>2],a=c[te+20>>2],L=c[n+8>>2],R=c[te+16>>2]+re(L,a)|0,ce=c[(c[te>>2]<<2)+11248>>2],g=c[n+28>>2],E=c[n+24>>2],G=c[n+20>>2];e:{if(!L){ft[ce|0](G,0,E,g,E,g,R,0,H),a=k;break e}ft[ce|0](c[s+4>>2],G,c[s+8>>2],c[s+12>>2],E,g,R-a|0,R,H),a=k+1|0}Ze=a,Ae=k+L|0;e:{if((k|0)<3){a=E,k=g;break e}for(L=L+2|0;a=c[n+32>>2],G=(a<<1)+G|0,Pt=G-a|0,mt=E,Ft=g,E=c[n+36>>2],a=mt+E|0,k=g+E|0,g=c[te+20>>2],R=(g<<1)+R|0,ft[ce|0](Pt,G,mt,Ft,a,k,R-g|0,R,H),g=k,E=a,L=L+2|0,(L|0)<(Ae|0););}return g=c[n+32>>2]+G|0,(c[n+84>>2]+Ae|0)<c[n+88>>2]?(Yr(c[s+4>>2],g,H),Yr(c[s+8>>2],a,Ne),Yr(c[s+12>>2],k,Ne),Ze+-1|0):(Ae&1||ft[ce|0](g,0,a,k,a,k,c[te+20>>2]+R|0,0,H),Ze|0)}function zh(n,s){var a=0,g=0,k=0;e:{if(!n)break e;a=c[n+44>>2];t:{if((a|0)<0||(g=255,(a|0)<=100&&(a=re(a,255),g=(a|0)/100|0,(a|0)<100)))break t;a=c[s+800>>2];i:{if((a|0)>=12){k=c[s+804>>2];break i}k=re(F[((a|0)>0?a:0)+4832|0],g)>>3,c[s+804>>2]=k}a=c[s+832>>2];i:{if((a|0)>=12){a=c[s+836>>2];break i}a=re(F[((a|0)>0?a:0)+4832|0],g)>>3,c[s+836>>2]=a}k=a|k,a=c[s+864>>2];i:{if((a|0)>=12){a=c[s+868>>2];break i}a=re(F[((a|0)>0?a:0)+4832|0],g)>>3,c[s+868>>2]=a}k=a|k,a=c[s+896>>2];i:{if((a|0)>=12){g=c[s+900>>2];break i}g=re(F[((a|0)>0?a:0)+4832|0],g)>>3,c[s+900>>2]=g}if(!(g|k))break t;g=s+544|0,Yr(g+8|0,9424,220),c[g>>2]=0,c[g+4>>2]=31,c[g+228>>2]=256,c[s+540>>2]=1}if(n=c[n+52>>2],c[s+2372>>2]=n,(n|0)>=101){c[s+2372>>2]=100;return}if((n|0)>-1)break e;c[s+2372>>2]=0}}function Lr(n,s){var a=0,g=0,k=0,E=0,L=0,R=0,G=0,H=0,te=0,ce=0;if((s|0)<1)return 0;for(a=c[n+8>>2],R=c[n+4>>2];;){e:{if((a|0)>-1)break e;if(g=c[n+12>>2],g>>>0<Qn[n+20>>2]){k=F[g|0]|F[g+1|0]<<8|(F[g+2|0]<<16|F[g+3|0]<<24),c[n+12>>2]=g+3,a=a+24|0,c[n+8>>2]=a,c[n>>2]=c[n>>2]<<24|(k>>>8&65280|(k<<8&16711680|k<<24))>>>8;break e}if(g>>>0<Qn[n+16>>2]){c[n+12>>2]=g+1,a=a+8|0,c[n+8>>2]=a,c[n>>2]=F[g|0]|c[n>>2]<<8;break e}if(!c[n+24>>2]){c[n+24>>2]=1,a=a+8|0,c[n+8>>2]=a,c[n>>2]=c[n>>2]<<8;break e}a=0,c[n+8>>2]=0}g=s+-1|0,te=n,ce=a,E=c[n>>2],G=E>>>a|0,L=R>>>1&16777215;e:{if(G>>>0>L>>>0){c[n>>2]=E+((L^-1)<<a),E=R-L|0;break e}E=L+1|0}if(k=Br(E)^24,a=ce-k|0,c[te+8>>2]=a,R=(E<<k)+-1|0,c[n+4>>2]=R,H=(G>>>0>L>>>0)<<g|H,k=(s|0)>1,s=g,!k)break}return H}function zc(n,s,a){var g=0;e:{if((n|0)==(s|0))break e;if((s-n|0)-a>>>0<=0-(a<<1)>>>0)return Yr(n,s,a);g=(n^s)&3;t:{i:{if(n>>>0<s>>>0){if(g){g=n;break t}if(!(n&3)){g=n;break i}for(g=n;;){if(!a)break e;if(p[g|0]=F[s|0],s=s+1|0,a=a+-1|0,g=g+1|0,!(g&3))break}break i}n:{if(g)break n;if(n+a&3)for(;;){if(!a)break e;if(a=a+-1|0,g=a+n|0,p[g|0]=F[s+a|0],!(g&3))break}if(a>>>0<=3)break n;for(;a=a+-4|0,c[a+n>>2]=c[s+a>>2],a>>>0>3;);}if(!a)break e;for(;a=a+-1|0,p[a+n|0]=F[s+a|0],!!a;);break e}if(a>>>0<=3)break t;for(;c[g>>2]=c[s>>2],s=s+4|0,g=g+4|0,a=a+-4|0,a>>>0>3;);}if(!a)break e;for(;p[g|0]=F[s|0],g=g+1|0,s=s+1|0,a=a+-1|0,!!a;);}return n}function lc(n){n=n|0;var s=0,a=0,g=0,k=0,E=0,L=0,R=0,G=0,H=0,te=0,ce=0,Ae=0,Ne=0,Ze=0,mt=0,Pt=0,Ft=0,ni=0,ci=0;for(g=n+-17|0,k=n+-18|0,E=n+-19|0,L=n+-20|0,R=n+-21|0,G=n+-22|0,H=n+-23|0,te=n+-24|0,ce=n+-25|0,Ae=n+-26|0,Ne=n+-27|0,Ze=n+-28|0,mt=n+-29|0,Pt=n+-30|0,Ft=n+-31|0,ni=n+-32|0,ci=c[2548]-F[n+-33|0]|0;s=F[n+-1|0]+ci|0,p[n|0]=F[s+F[ni|0]|0],p[n+1|0]=F[F[Ft|0]+s|0],p[n+2|0]=F[F[Pt|0]+s|0],p[n+3|0]=F[F[mt|0]+s|0],p[n+4|0]=F[F[Ze|0]+s|0],p[n+5|0]=F[F[Ne|0]+s|0],p[n+6|0]=F[F[Ae|0]+s|0],p[n+7|0]=F[F[ce|0]+s|0],p[n+8|0]=F[F[te|0]+s|0],p[n+9|0]=F[F[H|0]+s|0],p[n+10|0]=F[F[G|0]+s|0],p[n+11|0]=F[F[R|0]+s|0],p[n+12|0]=F[F[L|0]+s|0],p[n+13|0]=F[F[E|0]+s|0],p[n+14|0]=F[F[k|0]+s|0],p[n+15|0]=F[F[g|0]+s|0],n=n+32|0,a=a+1|0,(a|0)!=16;);}function Zo(n,s,a){n=n|0,s=s|0,a=a|0;var g=0,k=0,E=0,L=0;e:{if(!a||(g=n+a|0,p[g+-1|0]=s,p[n|0]=s,a>>>0<3)||(p[g+-2|0]=s,p[n+1|0]=s,p[g+-3|0]=s,p[n+2|0]=s,a>>>0<7)||(p[g+-4|0]=s,p[n+3|0]=s,a>>>0<9)||(g=0-n&3,k=g+n|0,s=re(s&255,16843009),c[k>>2]=s,a=a-g&-4,g=a+k|0,c[g+-4>>2]=s,a>>>0<9)||(c[k+8>>2]=s,c[k+4>>2]=s,c[g+-8>>2]=s,c[g+-12>>2]=s,a>>>0<25)||(c[k+24>>2]=s,c[k+20>>2]=s,c[k+16>>2]=s,c[k+12>>2]=s,c[g+-16>>2]=s,c[g+-20>>2]=s,c[g+-24>>2]=s,c[g+-28>>2]=s,L=k&4|24,a=a-L|0,a>>>0<32))break e;for(g=s,E=s,s=k+L|0;c[s+24>>2]=E,c[s+28>>2]=g,c[s+16>>2]=E,c[s+20>>2]=g,c[s+8>>2]=E,c[s+12>>2]=g,c[s>>2]=E,c[s+4>>2]=g,s=s+32|0,a=a+-32|0,a>>>0>31;);}return n|0}function Ks(n,s,a){var g=0,k=0,E=0,L=0;g=Un-144|0,Un=g;e:{if(!a){E=2;break e}t:{if(!n){k=2;break t}c[a>>2]=0,c[a+4>>2]=0,c[a+32>>2]=0,c[a+36>>2]=0,c[a+24>>2]=0,c[a+28>>2]=0,L=a+16|0,E=L,c[E>>2]=0,c[E+4>>2]=0,k=a+8|0,c[k>>2]=0,c[k+4>>2]=0,E=3;i:switch(k=El(n,s,a,a+4|0,k,a+12|0,L,0),k|0){case 7:break e;case 0:break i;default:break t}if(c[g+140>>2]=0,c[g+132>>2]=0,c[g+136>>2]=0,c[g+124>>2]=0,c[g+128>>2]=0,c[g+116>>2]=0,c[g+120>>2]=0,c[g+100>>2]=0,c[g+104>>2]=0,c[g+108>>2]=0,c[g+112>>2]=0,c[g+92>>2]=0,c[g+96>>2]=0,c[g+108>>2]=a+124,k=a+40|0,c[g+88>>2]=k,cd(k,a)){Zh(g),c[g>>2]=c[a+40>>2],c[g+4>>2]=c[a>>2],c[g+8>>2]=c[a+4>>2],c[g+88>>2]=g,E=rs(n,s,g+88|0),E||(E=ku(g,k)),If(g);break e}E=rs(n,s,g+88|0);break e}E=k}return Un=g+144|0,E}function Go(n,s,a){n=n|0,s=s|0,a=a|0;var g=0,k=0,E=0,L=0,R=0,G=0,H=0;g=Un-32|0,Un=g,k=c[n+28>>2],c[g+16>>2]=k,E=c[n+20>>2],c[g+28>>2]=a,c[g+24>>2]=s,s=E-k|0,c[g+20>>2]=s,k=s+a|0,H=2,s=g+16|0;e:{t:{i:{if(!Lf(Bu(c[n+60>>2],g+16|0,2,g+12|0)|0))for(;;){if(E=c[g+12>>2],(E|0)==(k|0))break i;if((E|0)<=-1)break t;if(L=c[s+4>>2],R=E>>>0>L>>>0,G=(R<<3)+s|0,L=E-(R?L:0)|0,c[G>>2]=L+c[G>>2],G=(R?12:4)+s|0,c[G>>2]=c[G>>2]-L,k=k-E|0,s=R?s+8|0:s,H=H-R|0,!!Lf(Bu(c[n+60>>2],s|0,H|0,g+12|0)|0))break}if(c[g+12>>2]=-1,(k|0)!=-1)break t}s=c[n+44>>2],c[n+28>>2]=s,c[n+20>>2]=s,c[n+16>>2]=s+c[n+48>>2],n=a;break e}if(c[n+28>>2]=0,c[n+16>>2]=0,c[n+20>>2]=0,c[n>>2]=c[n>>2]|32,n=0,(H|0)==2)break e;n=a-c[s+4>>2]|0}return Un=g+32|0,n|0}function Va(n){n=n|0;var s=0,a=0,g=0,k=0,E=0,L=0,R=0,G=0,H=0,te=0,ce=0,Ae=0,Ne=0,Ze=0;E=re(c[n+8>>2],c[n+52>>2]),L=c[n+80>>2],R=c[n+68>>2],s=c[n+24>>2];e:{if(!s){if((E|0)<1)break e;for(;a=_r(c[n+16>>2],0,c[(g<<2)+L>>2],0)+-2147483648|0,s=Bn,s=a>>>0<2147483648?s+1|0:s,p[g+R|0]=(s|0)>255?-1:s,g=g+1|0,(E|0)!=(g|0););break e}if(a=0-s|0,s=c[n+32>>2],s=bc(0,a,s,s>>31),(E|0)<1)break e;for(G=c[n+76>>2],H=s,te=0-s|0;s=c[n+16>>2],a=g<<2,k=_r(te,Ne,c[a+L>>2],0),ce=Bn,Ae=s,s=k,k=_r(H,Ze,c[a+G>>2],0),a=s+k|0,s=Bn+ce|0,s=a>>>0<k>>>0?s+1|0:s,k=a+-2147483648|0,a=_r(Ae,0,k>>>0<2147483648?s+1|0:s,0)+-2147483648|0,s=Bn,s=a>>>0<2147483648?s+1|0:s,p[g+R|0]=(s|0)>255?-1:s,g=g+1|0,(E|0)!=(g|0););}}function uc(n,s,a,g){n=n|0,s=s|0,a=a|0,g=g|0;var k=0,E=0,L=0,R=0,G=0,H=0,te=0,ce=0,Ae=0,Ne=0,Ze=0,mt=0,Pt=0,Ft=0,ni=0,ci=0,Mi=0;if((a|0)>=1)for(k=c[g+-4>>2];te=H<<2,E=te+s|0,L=c[E>>2],E=c[E+-4>>2],G=E&255,ce=(L&255)-G|0,Ae=(k&255)-G|0,G=Ae>>31,Ne=E>>>24|0,Ze=(k>>>24|0)-Ne|0,mt=Ze>>31,Pt=E>>>8&255,Ft=(k>>>8&255)-Pt|0,R=Ft>>31,ni=E>>>16&255,ci=(k>>>16&255)-ni|0,E=ci>>31,Mi=k,k=(L>>>24|0)-Ne|0,R=((((G^G+Ae)+((ce|0)<0?ce:0-ce|0)|0)+(mt^mt+Ze)|0)+((k|0)<0?k:0-k|0)|0)+(R^R+Ft)|0,k=(L>>>8&255)-Pt|0,R=(R+((k|0)<0?k:0-k|0)|0)+(E^E+ci)|0,k=(L>>>16&255)-ni|0,k=(R+((k|0)<0?k:0-k|0)|0)<1?L:Mi,L=c[n+te>>2],k=(k&-16711936)+(L&-16711936)&-16711936|(k&16711935)+(L&16711935)&16711935,c[g+te>>2]=k,H=H+1|0,(H|0)!=(a|0););}function wu(n,s,a){n=n|0,s=s|0,a=a|0;var g=0,k=0,E=0,L=0,R=0,G=0,H=0,te=0,ce=0,Ae=0,Ne=0;E=c[n+104>>2];e:{if(!E)break e;k=c[n+16>>2],g=c[n+8>>2],L=c[s>>2];t:{if(!c[n+56>>2]){s=g;break t}i:{if(!g){a=k+-1|0,s=0;break i}E=E-c[n>>2]|0,a=k,s=g+-1|0}if(g=g+k|0,k=c[n+84>>2],g=g+k|0,(g|0)!=c[n+88>>2]){k=a;break t}k=g-(s+k|0)|0}if((k|0)<1)break e;for(R=c[n+12>>2],ce=c[L>>2],a=c[L+20>>2],H=c[L+16>>2]+re(a,s)|0,G=H+1|0,s=15;;){if(g=0,(R|0)>=1){for(;a=(g<<1)+G|0,Ae=a,Ne=F[a|0]&240,a=F[g+E|0]>>>4|0,p[Ae|0]=Ne|a,s=s&a,g=g+1|0,(R|0)!=(g|0););a=c[L+20>>2]}if(G=a+G|0,E=c[n>>2]+E|0,te=te+1|0,(te|0)==(k|0))break}if((s|0)==15|ce+-7>>>0>3)break e;ft[c[2665]](H,R,k,a)}return 0}function xu(n,s,a){e:{t:{if(s>>>0>20)break t;i:switch(s+-9|0){case 0:s=c[a>>2],c[a>>2]=s+4,c[n>>2]=c[s>>2];return;case 1:s=c[a>>2],c[a>>2]=s+4,s=c[s>>2],c[n>>2]=s,c[n+4>>2]=s>>31;return;case 2:s=c[a>>2],c[a>>2]=s+4,c[n>>2]=c[s>>2],c[n+4>>2]=0;return;case 4:s=c[a>>2],c[a>>2]=s+4,s=Di[s>>1],c[n>>2]=s,c[n+4>>2]=s>>31;return;case 5:s=c[a>>2],c[a>>2]=s+4,c[n>>2]=pn[s>>1],c[n+4>>2]=0;return;case 6:s=c[a>>2],c[a>>2]=s+4,s=p[s|0],c[n>>2]=s,c[n+4>>2]=s>>31;return;case 7:s=c[a>>2],c[a>>2]=s+4,c[n>>2]=F[s|0],c[n+4>>2]=0;return;case 3:case 8:break e;case 9:break i;default:break t}ft[0](n,a)}return}s=c[a>>2]+7&-8,c[a>>2]=s+8,a=c[s+4>>2],c[n>>2]=c[s>>2],c[n+4>>2]=a}function Kl(n,s){n=n|0,s=s|0;var a=0,g=0,k=0,E=0,L=0,R=0,G=0,H=0;k=c[n+16>>2],E=c[s+24>>2],a=c[c[s>>2]>>2];e:{if(a+-7>>>0>3&&!(1<<a&4154&&a>>>0<=12)||(a=c[n+104>>2],!a))break e;qc(c[n+20>>2],c[n+32>>2],a,c[n>>2],c[n+12>>2],k,0)}if((k|0)<1)return 0;for(L=k+1>>1,R=c[n+32>>2],g=c[n+20>>2],a=k;G=ws(E,a,g,R),g=re(G,R)+g|0,H=yc(E)+H|0,a=a-G|0,(a|0)>0;);if((k|0)>=1){for(k=c[s+28>>2],E=c[n+36>>2],g=c[n+24>>2],a=L;R=ws(k,a,g,E),yc(k),g=re(E,R)+g|0,a=a-R|0,(a|0)>0;);for(g=c[n+28>>2],s=c[s+32>>2],n=c[n+36>>2];a=ws(s,L,g,n),yc(s),g=re(n,a)+g|0,L=L-a|0,(L|0)>0;);}return H|0}function eo(n,s){var a=0,g=0,k=0,E=0,L=0,R=0,G=0,H=0;e:{if(!(c[n+24>>2]|(s|0)>24)){if(a=c[n+20>>2],k=a+s|0,c[n+20>>2]=k,R=c[(s<<2)+9312>>2],L=c[n+4>>2],g=L,s=a&63,a=s&31,E=c[n>>2],H=R&(32<=(s&63)>>>0?g>>>a|0:((1<<a)-1&g)<<32-a|E>>>a),(k|0)<8)break e;for(s=c[n+16>>2],G=c[n+12>>2],R=s>>>0>G>>>0?s:G;;){t:{if((s|0)==(R|0)){s=R,g=k;break t}if(g=L,E=(g&255)<<24|E>>>8,g=g>>>8|0,L=g,c[n>>2]=E,c[n+4>>2]=g,a=F[c[n+8>>2]+s|0],g=k+-8|0,c[n+20>>2]=g,s=s+1|0,c[n+16>>2]=s,a=L|a<<24,L=a,c[n>>2]=E,c[n+4>>2]=a,a=(k|0)>15,k=g,a)continue}break}if((s|0)!=(G|0)|(g|0)<65)break e;return c[n+20>>2]=0,c[n+24>>2]=1,H}c[n+20>>2]=0,c[n+24>>2]=1}return H}function ya(n){n=n|0;var s=0,a=0,g=0,k=0,E=0,L=0,R=0,G=0,H=0,te=0,ce=0;k=re(c[n+8>>2],c[n+52>>2]),L=c[n+76>>2],R=c[n+68>>2],s=re(c[n+24>>2],c[n+16>>2]);e:{if(s){if((k|0)<1)break e;for(E=c[n+80>>2],te=0-s|0,s=0;g=c[n+20>>2],a=s<<2,G=a+L|0,ce=c[G>>2],_r(c[a+E>>2],0,te,0),H=Bn,g=_r(g,0,ce-H|0,0)+-2147483648|0,a=Bn,a=g>>>0<2147483648?a+1|0:a,p[s+R|0]=(a|0)>255?-1:a,c[G>>2]=H,s=s+1|0,(k|0)!=(s|0););break e}if((k|0)<1)break e;for(s=0;E=(s<<2)+L|0,g=_r(c[n+20>>2],0,c[E>>2],0)+-2147483648|0,a=Bn,a=g>>>0<2147483648?a+1|0:a,p[s+R|0]=(a|0)>255?-1:a,c[E>>2]=0,s=s+1|0,(k|0)!=(s|0););}}function Bo(n,s,a,g){n=n|0,s=s|0,a=a|0,g=g|0;var k=0,E=0,L=0,R=0,G=0,H=0;if((a|0)>=1)for(E=c[g+-4>>2];G=R<<2,L=G+s|0,k=c[L>>2],E=((k^E)>>>1&2139062143)+(k&E)|0,k=E&255,L=c[L+-4>>2],k=((k-(L&255)|0)/2|0)+k|0,H=k>>>0<256?k:(k^-1)>>>24|0,k=E>>>24|0,k=((k-(L>>>24|0)|0)/2|0)+k|0,H=H|(k>>>0<256?k:k>>>24^-1)<<24,k=E>>>16&255,k=((k-(L>>>16&255)|0)/2|0)+k|0,E=E>>>8&255,E=((E-(L>>>8&255)|0)/2|0)+E|0,E=H|(k>>>0<256?k:(k^-1)>>>24|0)<<16|(E>>>0<256?E:(E^-1)>>>24|0)<<8,L=c[n+G>>2],E=(E&-16711936)+(L&-16711936)&-16711936|(E&16711935)+(L&16711935)&16711935,c[g+G>>2]=E,R=R+1|0,(R|0)!=(a|0););}function Au(n,s,a){n=n|0,s=s|0,a=a|0;var g=0,k=0,E=0,L=0,R=0,G=0,H=0,te=0,ce=0,Ae=0;g=c[n+36>>2];e:{if(c[g+64>>2]>=c[g+56>>2])break e;E=c[n>>2],te=c[E>>2]+-7|0,k=c[E+20>>2],H=c[E+16>>2]+re(k,s)|0,R=c[g+52>>2],s=15;t:{if((a|0)<1|c[g+24>>2]>0)break t;for(G=H+1|0;;){if(Ni(g),g=0,(R|0)>=1)for(;k=(g<<1)+G|0,ce=k,Ae=F[k|0]&240,k=F[c[c[n+36>>2]+68>>2]+g|0]>>>4|0,p[ce|0]=Ae|k,s=s&k,g=g+1|0,(R|0)!=(g|0););if(k=c[E+20>>2],g=c[n+36>>2],L=L+1|0,c[g+64>>2]>=c[g+56>>2]|(L|0)>=(a|0))break t;if(G=k+G|0,!(c[g+24>>2]<=0))break}}if((s|0)==15|te>>>0>3)break e;ft[c[2665]](H,R,L,k)}return L|0}function ku(n,s){var a=0,g=0;c[s+4>>2]=c[n+4>>2],c[s+8>>2]=c[n+8>>2],a=2;e:{if(Yo(s))break e;a=c[n+16>>2],g=c[n>>2];t:{if(g>>>0<=10){Dl(a,c[n+20>>2],c[s+16>>2],c[s+20>>2],re(c[n+4>>2],F[g+1157|0]),c[n+8>>2]);break t}if(Dl(a,c[n+32>>2],c[s+16>>2],c[s+32>>2],c[n+4>>2],c[n+8>>2]),Dl(c[n+20>>2],c[n+36>>2],c[s+20>>2],c[s+36>>2],(c[n+4>>2]+1|0)/2|0,(c[n+8>>2]+1|0)/2|0),Dl(c[n+24>>2],c[n+40>>2],c[s+24>>2],c[s+40>>2],(c[n+4>>2]+1|0)/2|0,(c[n+8>>2]+1|0)/2|0),g=c[n>>2],!(1<<g&4154&&g>>>0<=12)&&(a=0,g+-7>>>0>3))break e;Dl(c[n+28>>2],c[n+44>>2],c[s+28>>2],c[s+44>>2],c[n+4>>2],c[n+8>>2])}a=0}return a}function Nc(n,s){var a=0,g=0,k=0,E=0;e:{if(c[n+2308>>2]<1||(a=c[n+2300>>2],(a|0)<c[n+300>>2]))break e;g=(a|0)<=c[n+308>>2]}a=n+160|0;e:{if(!c[n+148>>2]){c[n+168>>2]=g,c[n+164>>2]=c[n+2300>>2],zu(n,a),E=ps(n,s);break e}if(k=n+124|0,!(ft[c[2559]](k)&1))break e;Yr(n+180|0,s,108),c[n+168>>2]=g,c[n+160>>2]=c[n+152>>2],c[n+164>>2]=c[n+2300>>2];t:{if(c[n+148>>2]==2){s=c[n+2304>>2],a=n+176|0,c[n+2304>>2]=c[a>>2],c[a>>2]=s;break t}zu(n,a)}return g&&(s=c[n+2260>>2],g=n+172|0,c[n+2260>>2]=c[g>>2],c[g>>2]=s),ft[c[2560]](k),s=c[n+152>>2]+1|0,c[n+152>>2]=(s|0)==c[n+156>>2]?0:s,1}return E}function Nh(n,s,a,g){n=n|0,s=s|0,a=a|0,g=g|0;var k=0,E=0,L=0,R=0,G=0,H=0,te=0;if((a|0)>=1)for(k=c[g+-4>>2];H=G<<2,L=H+s|0,R=c[L>>2],L=c[L+-4>>2],E=((R&255)+(k&255)|0)-(L&255)|0,te=E>>>0<256?E:(E^-1)>>>24|0,E=(R>>>24)+(k>>>24)-(L>>>24)|0,te=te|(E>>>0<256?E:E>>>24^-1)<<24,E=((R>>>16&255)+(k>>>16&255)|0)-(L>>>16&255)|0,k=((R>>>8&255)+(k>>>8&255)|0)-(L>>>8&255)|0,k=te|(E>>>0<256?E:(E^-1)>>>24|0)<<16|(k>>>0<256?k:(k^-1)>>>24|0)<<8,R=c[n+H>>2],k=(k&-16711936)+(R&-16711936)&-16711936|(k&16711935)+(R&16711935)&16711935,c[g+H>>2]=k,G=G+1|0,(G|0)!=(a|0););}function al(n,s,a,g,k,E,L,R,G){var H=0,te=0,ce=0,Ae=0;c[n+72>>2]=L,c[n+68>>2]=g,c[n+60>>2]=0,c[n+64>>2]=0,c[n+56>>2]=E,c[n+52>>2]=k,c[n+48>>2]=a,c[n+44>>2]=s,c[n+8>>2]=R,L=(a|0)<(E|0),c[n+4>>2]=L,H=(s|0)<(k|0),c[n>>2]=H,te=H?s+-1|0:k,c[n+40>>2]=te,g=H?k+-1|0:s,c[n+36>>2]=g,H||(ce=n,Ae=bc(0,1,te,te>>31),c[ce+12>>2]=Ae),s=E-L|0,c[n+32>>2]=s,a=a-L|0,c[n+28>>2]=a;e:{if(!L){c[n+24>>2]=a,a=re(a,g),a=bc(0,E,a,a>>31),g=Bn,c[n+20>>2]=(g|0)==1&a>>>0<0|g>>>0<1?a:0;break e}c[n+24>>2]=s,s=g}c[n+76>>2]=G,ce=n,Ae=bc(0,1,s,s>>31),c[ce+16>>2]=Ae,s=n,n=re(k,R),c[s+80>>2]=(n<<2)+G,Zo(G,0,n<<3),va()}function jh(n){n=n|0;var s=0,a=0,g=0,k=0,E=0,L=0,R=0;E=F[n+-31|0],s=E+1|0,a=F[n+-30|0],k=s+a>>>1|0,p[n+64|0]=k,R=F[n+-32|0],p[n|0]=R+s>>>1,s=F[n+-29|0],g=(s+a|0)+1>>>1|0,p[n+65|0]=g,p[n+1|0]=k,k=F[n+-28|0],L=(k+s|0)+1>>>1|0,p[n+66|0]=L,p[n+2|0]=g,p[n+3|0]=L,g=s+2|0,L=(g+E|0)+(a<<1)>>>2|0,p[n+96|0]=L,a=a+2|0,p[n+32|0]=(a+R|0)+(E<<1)>>>2,E=k+(a+(s<<1)|0)>>>2|0,p[n+97|0]=E,p[n+33|0]=L,R=F[n+-25|0],a=F[n+-26|0],s=F[n+-27|0],g=s+(g+(k<<1)|0)>>>2|0,p[n+98|0]=g,p[n+34|0]=E,p[n+99|0]=(R+(s+(a<<1)|0)|0)+2>>>2,p[n+67|0]=(a+(k+(s<<1)|0)|0)+2>>>2,p[n+35|0]=g}function ll(n){n=n|0;var s=0,a=0,g=0,k=0,E=0,L=0,R=0,G=0,H=0;L=F[n+63|0],g=F[n+31|0],a=(L+g|0)+1>>>1|0,p[n+98|0]=a,R=F[n+95|0],p[n+96|0]=(R+L|0)+1>>>1,p[n+64|0]=a,k=F[n+-1|0],s=k+1|0,a=F[n+-33|0],E=s+a>>>1|0,p[n+34|0]=E,s=s+g>>>1|0,p[n+66|0]=s,p[n|0]=E,p[n+32|0]=s,s=F[n+-32|0],E=k+2|0,G=s+(E+(a<<1)|0)>>>2|0,p[n+35|0]=G,H=F[n+-31|0],p[n+3|0]=(F[n+-30|0]+(s+(H<<1)|0)|0)+2>>>2,p[n+2|0]=((a+(s<<1)|0)+H|0)+2>>>2,s=k<<1,k=g+2|0,a=a+(s+k|0)>>>2|0,p[n+67|0]=a,p[n+1|0]=G,g=(L+E|0)+(g<<1)>>>2|0,p[n+99|0]=g,p[n+33|0]=a,p[n+97|0]=(k+R|0)+(L<<1)>>>2,p[n+65|0]=g}function cc(n){n=n|0;var s=0,a=0,g=0,k=0,E=0,L=0,R=0,G=0;g=F[n+-32|0],k=g+1|0,s=F[n+-33|0],a=k+s>>>1|0,p[n+65|0]=a,E=F[n+-31|0],L=k+E>>>1|0,p[n+66|0]=L,p[n|0]=a,k=F[n+-30|0],a=(k+E|0)+1>>>1|0,p[n+67|0]=a,p[n+1|0]=L,L=F[n+-29|0],p[n+3|0]=(L+k|0)+1>>>1,p[n+2|0]=a,a=F[n+-1|0],R=a+2|0,G=F[n+31|0],p[n+96|0]=(R+F[n+63|0]|0)+(G<<1)>>>2,R=g+(R+(s<<1)|0)>>>2|0,p[n+97|0]=R,s=s+2|0,p[n+64|0]=(s+G|0)+(a<<1)>>>2,s=(s+(g<<1)|0)+E>>>2|0,p[n+98|0]=s,p[n+32|0]=R,g=(k+(g+(E<<1)|0)|0)+2>>>2|0,p[n+99|0]=g,p[n+33|0]=s,p[n+35|0]=(L+((k<<1)+E|0)|0)+2>>>2,p[n+34|0]=g}function tr(n,s,a){n=n|0,s=s|0,a=a|0;var g=0,k=0,E=0,L=0,R=0,G=0,H=0,te=0,ce=0;g=c[n+36>>2];e:{if(c[g+64>>2]>=c[g+56>>2])break e;E=c[n>>2],k=c[E>>2],R=(k|0)==4|(k|0)==9,ce=k+-7|0,L=c[E+20>>2],G=c[E+16>>2]+re(L,s)|0,H=c[g+52>>2],k=0,s=0;t:{if((a|0)<1||(s=0,c[g+24>>2]>0))break t;for(s=(R?0:3)+G|0;;){i:{if(Ni(g),te=ft[c[2666]](c[c[n+36>>2]+68>>2],0,H,1,s,0)|te,L=c[E+20>>2],g=c[n+36>>2],k=k+1|0,c[g+64>>2]>=c[g+56>>2]|(k|0)>=(a|0))break i;if(s=s+L|0,c[g+24>>2]<=0)continue}break}s=(te|0)!=0}if(!s|ce>>>0>3)break e;ft[c[2664]](G,R,H,k,L)}return k|0}function yr(n,s,a){var g=0,k=0,E=0;g=Un-208|0,Un=g,c[g+204>>2]=a,a=0,Zo(g+160|0,0,40),c[g+200>>2]=c[g+204>>2];e:{if((kt(0,s,g+200|0,g+80|0,g+160|0)|0)<0)break e;a=c[n+76>>2]>=0?1:a,k=c[n>>2],p[n+74|0]<=0&&(c[n>>2]=k&-33),E=k&32;t:{if(c[n+48>>2]){kt(n,s,g+200|0,g+80|0,g+160|0);break t}if(c[n+48>>2]=80,c[n+16>>2]=g+80,c[n+28>>2]=g,c[n+20>>2]=g,k=c[n+44>>2],c[n+44>>2]=g,kt(n,s,g+200|0,g+80|0,g+160|0),!k)break t;ft[c[n+36>>2]](n,0,0)|0,c[n+48>>2]=0,c[n+44>>2]=k,c[n+28>>2]=0,c[n+16>>2]=0,c[n+20>>2]=0}if(c[n>>2]=E|c[n>>2],!a)break e}Un=g+208|0}function Gu(n,s,a){n=n|0,s=s|0,a=a|0;var g=0,k=0,E=0,L=0,R=0,G=0,H=0,te=0,ce=0;k=c[s>>2],E=c[k+28>>2],G=c[s+16>>2],L=c[k+44>>2],R=E+re(G,L)|0,g=c[n+104>>2];e:{if(g){if(a=c[n+16>>2],(a|0)<1)break e;for(te=c[k+32>>2],E=c[s+36>>2],L=c[n>>2],ce=c[k+16>>2],n=0;H=ws(E,a,g,L),g=re(L,H)+g|0,n=yc(E)+n|0,a=a-H|0,(a|0)>0;);if((n|0)<1)break e;return qc(re(G,te)+ce|0,c[k+32>>2],R,c[k+44>>2],c[c[s+36>>2]+52>>2],n,1),0}if(!E|(a|0)<1)break e;for(n=c[n+96>>2],g=0;R=Zo(R,255,n)+L|0,g=g+1|0,(g|0)!=(a|0););}return 0}function hc(n){n=n|0;var s=0,a=0,g=0,k=0,E=0;a=F[n+31|0],g=a+2|0,s=F[n+63|0],p[n+96|0]=F[n+95|0]+(g+(s<<1)|0)>>>2,E=a<<1,a=F[n+-1|0],k=a+2|0,s=s+(E+k|0)>>>2|0,p[n+97|0]=s,p[n+64|0]=s,s=g+(a<<1)|0,a=F[n+-33|0],s=s+a>>>2|0,p[n+98|0]=s,p[n+65|0]=s,p[n+32|0]=s,g=F[n+-32|0],s=(g+k|0)+(a<<1)>>>2|0,p[n+99|0]=s,p[n+66|0]=s,p[n+33|0]=s,p[n|0]=s,E=F[n+-29|0],s=F[n+-30|0],k=a,a=F[n+-31|0],k=((k+a|0)+(g<<1)|0)+2>>>2|0,p[n+67|0]=k,p[n+34|0]=k,p[n+1|0]=k,g=((s+g|0)+(a<<1)|0)+2>>>2|0,p[n+35|0]=g,p[n+2|0]=g,p[n+3|0]=((a+E|0)+(s<<1)|0)+2>>>2}function ws(n,s,a,g){var k=0,E=0,L=0,R=0,G=0,H=0,te=0,ce=0;e:{if((s|0)<1)break e;for(;;){if(c[n+24>>2]<1&&c[n+64>>2]<c[n+56>>2])break e;if(c[n+4>>2]&&(te=n,ce=_p(c[n+76>>2],c[n+80>>2]),c[te+76>>2]=ce,c[n+80>>2]=Bn),cp(n,a),!(c[n+4>>2]|(re(c[n+52>>2],c[n+8>>2])|0)<1))for(G=c[n+76>>2],H=c[n+80>>2],k=0;L=k<<2,R=L+G|0,c[R>>2]=c[R>>2]+c[H+L>>2],k=k+1|0,(k|0)<(re(c[n+52>>2],c[n+8>>2])|0););if(c[n+60>>2]=c[n+60>>2]+1,c[n+24>>2]=c[n+24>>2]-c[n+32>>2],a=a+g|0,E=E+1|0,(E|0)==(s|0))break}E=s}return E}function jo(n){var s=0,a=0,g=0;if(n){if(s=n+160|0,Ur(c[s>>2]),Ur(c[n+172>>2]),a=n+168|0,Mf(c[a>>2]),wc(n+124|0),g=n+136|0,wc(g),c[a>>2]=0,c[a+4>>2]=0,c[s>>2]=0,c[s+4>>2]=0,c[n+152>>2]=0,c[n+156>>2]=0,c[n+144>>2]=0,c[n+148>>2]=0,c[g>>2]=0,c[g+4>>2]=0,c[n+128>>2]=0,c[n+132>>2]=0,c[n+120>>2]=0,c[n+124>>2]=0,Ur(c[n+16>>2]),s=0,c[n+16>>2]=0,c[n+176>>2]>=1)for(;a=(re(s,20)+n|0)+196|0,Ur(c[a>>2]),c[a>>2]=0,s=s+1|0,(s|0)<c[n+176>>2];);c[n+260>>2]=0,c[n+176>>2]=0,Ur(c[n+264>>2]),c[n+12>>2]=0,c[n+264>>2]=0}}function Jl(){c[2545]!=c[2673]&&(c[2703]=32,c[2674]=33,c[2706]=34,c[2704]=35,c[2705]=36,c[2707]=37,c[2708]=38,c[2712]=39,c[2709]=40,c[2710]=41,c[2714]=42,c[2716]=43,c[2717]=44,c[2718]=45,c[2719]=46,c[2713]=47,c[2711]=48,c[2715]=49,c[2690]=50,c[2688]=51,c[2686]=52,c[2685]=53,c[2684]=54,c[2693]=55,c[2692]=56,c[2691]=57,c[2689]=58,c[2687]=59,c[2682]=60,c[2681]=61,c[2680]=62,c[2679]=63,c[2678]=64,c[2677]=65,c[2676]=66,c[2702]=67,c[2701]=68,c[2700]=69,c[2699]=70,c[2698]=71,c[2697]=72,c[2696]=73,c[2720]=74,c[2545]=c[2673])}function ul(n){n=n|0;var s=0,a=0,g=0,k=0,E=0;s=F[n+-29|0],k=s+2|0,g=F[n+-31|0],a=F[n+-30|0],E=(k+g|0)+(a<<1)>>>2|0,p[n+32|0]=E,a=a+2|0,p[n|0]=(a+F[n+-32|0]|0)+(g<<1)>>>2,g=F[n+-28|0],a=g+(a+(s<<1)|0)>>>2|0,p[n+64|0]=a,p[n+1|0]=E,p[n+33|0]=a,s=k+(g<<1)|0,k=F[n+-27|0],s=s+k>>>2|0,p[n+96|0]=s,p[n+2|0]=a,p[n+65|0]=s,p[n+34|0]=s,p[n+3|0]=s,s=F[n+-26|0],g=(s+(g+(k<<1)|0)|0)+2>>>2|0,p[n+97|0]=g,a=F[n+-25|0],k=(a+(k+(s<<1)|0)|0)+2>>>2|0,p[n+98|0]=k,p[n+35|0]=g,p[n+66|0]=g,p[n+99|0]=((a+s|0)+(a<<1)|0)+2>>>2,p[n+67|0]=k}function dh(n){n=n|0;var s=0,a=0,g=0,k=0,E=0;a=F[n+63|0],s=a+2|0,E=F[n+95|0],g=re((s+E|0)+(E<<1)>>>2|0,16843009),p[n+96|0]=g,p[n+97|0]=g>>>8,p[n+98|0]=g>>>16,p[n+99|0]=g>>>24,k=F[n+31|0],g=k+2|0,a=re(E+(g+(a<<1)|0)>>>2|0,16843009),p[n+64|0]=a,p[n+65|0]=a>>>8,p[n+66|0]=a>>>16,p[n+67|0]=a>>>24,E=s,s=F[n+-1|0],k=re((E+s|0)+(k<<1)>>>2|0,16843009),p[n+32|0]=k,p[n+33|0]=k>>>8,p[n+34|0]=k>>>16,p[n+35|0]=k>>>24,s=re((F[n+-33|0]+g|0)+(s<<1)>>>2|0,16843009),p[n|0]=s,p[n+1|0]=s>>>8,p[n+2|0]=s>>>16,p[n+3|0]=s>>>24}function Ql(n,s,a,g,k){n=n|0,s=s|0,a=a|0,g=g|0,k=k|0;var E=0,L=0,R=0,G=0,H=0,te=0,ce=0;if(p[k|0]=F[n|0],(s|0)>=2)for(R=s+-1|0,G=k+1|0,L=n+1|0;p[E+G|0]=F[E+L|0]-F[n+E|0],E=E+1|0,(R|0)!=(E|0););if((a|0)>=2)for(te=g^-1,ce=(s|0)<2,G=1;;){if(k=g+k|0,R=n+g|0,p[k|0]=F[R|0]-F[n|0],E=1,!ce)for(;H=E+R|0,L=(F[n+E|0]+F[H+-1|0]|0)-F[R+(E+te|0)|0]|0,L=(L|0)>0?L:0,p[k+E|0]=F[H|0]-((L|0)<255?L:255),E=E+1|0,(E|0)!=(s|0););if(n=R,G=G+1|0,(G|0)==(a|0))break}}function os(n,s,a,g,k){n=n|0,s=s|0,a=a|0,g=g|0,k=k|0;var E=0,L=0,R=0,G=0,H=0,te=0,ce=0;if((k|0)>=1)for(;G=F[a+R|0],ce=F[s+R|0],H=F[n+R|0],E=(R<<2)+g|0,p[E|0]=255,H=re(H,19077)>>>8|0,te=H+(re(ce,33050)>>>8|0)|0,L=te+-17685|0,p[E+3|0]=L>>>0<16384?L>>>6|0:te>>>0<17685?0:255,te=H+(re(G,26149)>>>8|0)|0,L=te+-14234|0,p[E+1|0]=L>>>0<16384?L>>>6|0:te>>>0<14234?0:255,L=E,E=H-(re(ce,6419)>>>8|0)-(re(G,13320)>>>8)|0,G=E+8708|0,p[L+2|0]=G>>>0<16384?G>>>6|0:(E|0)<-8708?0:255,R=R+1|0,(R|0)!=(k|0););}function gs(n,s,a,g,k){n=n|0,s=s|0,a=a|0,g=g|0,k=k|0;var E=0,L=0,R=0,G=0,H=0,te=0,ce=0;if((k|0)>=1)for(;G=F[s+R|0],ce=F[a+R|0],H=F[n+R|0],E=(R<<2)+g|0,p[E+3|0]=255,H=re(H,19077)>>>8|0,te=H+(re(ce,26149)>>>8|0)|0,L=te+-14234|0,p[E+2|0]=L>>>0<16384?L>>>6|0:te>>>0<14234?0:255,te=H+(re(G,33050)>>>8|0)|0,L=te+-17685|0,p[E|0]=L>>>0<16384?L>>>6|0:te>>>0<17685?0:255,L=E,E=H-(re(G,6419)>>>8|0)-(re(ce,13320)>>>8)|0,G=E+8708|0,p[L+1|0]=G>>>0<16384?G>>>6|0:(E|0)<-8708?0:255,R=R+1|0,(R|0)!=(k|0););}function ph(n,s,a,g,k){n=n|0,s=s|0,a=a|0,g=g|0,k=k|0;var E=0,L=0,R=0,G=0,H=0,te=0,ce=0;if((k|0)>=1)for(;G=F[a+R|0],ce=F[s+R|0],H=F[n+R|0],E=(R<<2)+g|0,p[E+3|0]=255,H=re(H,19077)>>>8|0,te=H+(re(ce,33050)>>>8|0)|0,L=te+-17685|0,p[E+2|0]=L>>>0<16384?L>>>6|0:te>>>0<17685?0:255,te=H+(re(G,26149)>>>8|0)|0,L=te+-14234|0,p[E|0]=L>>>0<16384?L>>>6|0:te>>>0<14234?0:255,L=E,E=H-(re(ce,6419)>>>8|0)-(re(G,13320)>>>8)|0,G=E+8708|0,p[L+1|0]=G>>>0<16384?G>>>6|0:(E|0)<-8708?0:255,R=R+1|0,(R|0)!=(k|0););}function sa(n,s,a,g,k){n=n|0,s=s|0,a=a|0,g=g|0,k=k|0;var E=0,L=0,R=0,G=0,H=0,te=0,ce=0;if((k|0)>=1)for(;H=(R<<1)+g|0,G=re(F[n+R|0],19077)>>>8|0,E=F[a+R|0],te=G+(re(E,26149)>>>8|0)|0,L=te+-14234|0,ce=(L>>>0<16384?L>>>6|0:te>>>0<14234?0:248)&248,te=F[s+R|0],E=G-(re(te,6419)>>>8|0)-(re(E,13320)>>>8)|0,L=E+8708|0,E=L>>>0<16384?L>>6:(E|0)<-8708?0:255,p[H|0]=ce|E>>>5,L=H,G=G+(re(te,33050)>>>8|0)|0,H=G+-17685|0,p[L+1|0]=E<<3&224|(H>>>0<16384?H>>>9|0:G>>>0<17685?0:31),R=R+1|0,(R|0)!=(k|0););}function B(n,s){var a=0,g=0,k=0,E=0,L=0;g=c[n+8>>2],L=c[g+40>>2],a=c[(Qn[L+12>>2]<2?g+84|0:n+108|0)>>2],k=c[n+108>>2],a=(k|0)<(a|0)?a:k;e:{if((a|0)>=(s|0)||(k=c[g>>2],g=c[L+136>>2]+re(k,a)|0,zi(n+180|0,a,s,c[n+16>>2]+re(a,c[n+100>>2])|0,g),E=c[L+12>>2],!E))break e;ft[c[(E<<2)+10912>>2]](c[L+140>>2],g,g,k),E=a+1|0;t:{if((E|0)==(s|0)){a=g;break t}for(;a=g+k|0,ft[c[(c[L+12>>2]<<2)+10912>>2]](g,a,a,k),g=a,E=E+1|0,(E|0)!=(s|0););}c[L+140>>2]=a}c[n+108>>2]=s,c[n+116>>2]=s}function d(n,s){n=n|0,s=s|0;var a=0,g=0,k=0,E=0,L=0,R=0,G=0,H=0,te=0,ce=0,Ae=0;if(E=c[n+8>>2],(E|0)>=1)for(te=re(c[n+52>>2],E);;){if((L|0)<(te|0))for(Ae=c[n+80>>2],g=0,k=0,R=L,G=L;;){if(ce=c[n+40>>2],H=0,g=c[n+36>>2]+g|0,(g|0)>=1){for(;H=F[s+G|0],k=H+k|0,a=G+E|0,G=a,g=g-ce|0,(g|0)>0;);G=a}if(a=re(g,H),c[(R<<2)+Ae>>2]=a+re(k,ce),k=_r(c[n+12>>2],0,0-a|0,0)+-2147483648|0,a=Bn,k=k>>>0<2147483648?a+1|0:a,R=E+R|0,!((R|0)<(te|0)))break}if(L=L+1|0,(E|0)==(L|0))break}}function I(n){n=n|0;var s=0,a=0,g=0,k=0,E=0,L=0;a=F[n+-32|0],g=c[2548]-F[n+-33|0]|0,s=g+F[n+-1|0]|0,p[n|0]=F[a+s|0],k=F[n+-31|0],p[n+1|0]=F[s+k|0],E=F[n+-30|0],p[n+2|0]=F[s+E|0],L=F[n+-29|0],p[n+3|0]=F[s+L|0],s=g+F[n+31|0]|0,p[n+32|0]=F[s+a|0],p[n+33|0]=F[s+k|0],p[n+34|0]=F[s+E|0],p[n+35|0]=F[s+L|0],s=g+F[n+63|0]|0,p[n+64|0]=F[s+a|0],p[n+65|0]=F[s+k|0],p[n+66|0]=F[s+E|0],p[n+67|0]=F[s+L|0],s=a,a=g+F[n+95|0]|0,p[n+96|0]=F[s+a|0],p[n+97|0]=F[a+k|0],p[n+98|0]=F[a+E|0],p[n+99|0]=F[a+L|0]}function D(n,s,a,g,k){n=n|0,s=s|0,a=a|0,g=g|0,k=k|0;var E=0,L=0,R=0,G=0,H=0,te=0,ce=0;if((k|0)>=1)for(;R=F[a+E|0],G=(E<<1)+g|0,L=re(F[n+E|0],19077)>>>8|0,ce=F[s+E|0],H=L+(re(ce,33050)>>>8|0)|0,te=H+-17685|0,p[G+1|0]=(te>>>0<16384?te>>>6|0:H>>>0<17685?0:240)|15,te=G,G=L+(re(R,26149)>>>8|0)|0,H=G+-14234|0,R=L-(re(ce,6419)>>>8|0)-(re(R,13320)>>>8)|0,L=R+8708|0,p[te|0]=(H>>>0<16384?H>>>6|0:G>>>0<14234?0:240)&240|(L>>>0<16384?L>>>10|0:(R|0)<-8708?0:15),E=E+1|0,(E|0)!=(k|0););}function z(n,s,a){n=n|0,s=s|0,a=a|0;var g=0,k=0,E=0,L=0,R=0,G=0,H=0;k=c[n+104>>2];e:{if(!k)break e;E=c[s>>2],L=c[E>>2],G=(L|0)==4|(L|0)==9,s=c[n+16>>2],g=c[n+8>>2],H=c[n+12>>2];t:{if(!c[n+56>>2]){R=g;break t}if(g?(R=g+-1|0,k=k-c[n>>2]|0,a=s):a=s+-1|0,s=s+g|0,g=c[n+84>>2],s=s+g|0,(s|0)!=c[n+88>>2]){s=a;break t}s=s-(g+R|0)|0}if(g=c[n>>2],n=c[E+20>>2],a=c[E+16>>2]+re(n,R)|0,!(ft[c[2666]](k,g,H,s,a+(G?0:3)|0,n)|0)|L+-7>>>0>3)break e;ft[c[2664]](a,G,H,s,c[E+20>>2])}return 0}function W(n,s,a,g,k){n=n|0,s=s|0,a=a|0,g=g|0,k=k|0;var E=0,L=0,R=0,G=0,H=0,te=0,ce=0;if((k|0)>=1)for(;G=F[s+L|0],R=re(L,3)+g|0,te=re(F[n+L|0],19077)>>>8|0,ce=F[a+L|0],E=te+(re(ce,26149)>>>8|0)|0,H=E+-14234|0,p[R+2|0]=H>>>0<16384?H>>>6|0:E>>>0<14234?0:255,E=te+(re(G,33050)>>>8|0)|0,H=E+-17685|0,p[R|0]=H>>>0<16384?H>>>6|0:E>>>0<17685?0:255,E=R,G=te-(re(G,6419)>>>8|0)-(re(ce,13320)>>>8)|0,R=G+8708|0,p[E+1|0]=R>>>0<16384?R>>>6|0:(G|0)<-8708?0:255,L=L+1|0,(L|0)!=(k|0););}function ne(n,s,a,g,k){n=n|0,s=s|0,a=a|0,g=g|0,k=k|0;var E=0,L=0,R=0,G=0,H=0,te=0,ce=0;if((k|0)>=1)for(;G=F[a+L|0],R=re(L,3)+g|0,te=re(F[n+L|0],19077)>>>8|0,ce=F[s+L|0],E=te+(re(ce,33050)>>>8|0)|0,H=E+-17685|0,p[R+2|0]=H>>>0<16384?H>>>6|0:E>>>0<17685?0:255,E=te+(re(G,26149)>>>8|0)|0,H=E+-14234|0,p[R|0]=H>>>0<16384?H>>>6|0:E>>>0<14234?0:255,E=R,G=te-(re(ce,6419)>>>8|0)-(re(G,13320)>>>8)|0,R=G+8708|0,p[E+1|0]=R>>>0<16384?R>>>6|0:(G|0)<-8708?0:255,L=L+1|0,(L|0)!=(k|0););}function pe(n,s){n=n|0,s=s|0;var a=0,g=0,k=0,E=0,L=0,R=0,G=0,H=0,te=0,ce=0,Ae=0,Ne=0,Ze=0;return g=c[s>>2],s=c[s+-4>>2],a=s&255,k=(g&255)-a|0,E=(n&255)-a|0,a=E>>31,L=s>>>24|0,R=(n>>>24|0)-L|0,G=R>>31,H=s>>>8&255,te=(n>>>8&255)-H|0,ce=te>>31,Ae=s>>>16&255,Ne=(n>>>16&255)-Ae|0,s=Ne>>31,Ze=n,n=(g>>>24|0)-L|0,a=((((a^a+E)+((k|0)<0?k:0-k|0)|0)+(G^G+R)|0)+((n|0)<0?n:0-n|0)|0)+(ce^ce+te)|0,n=(g>>>8&255)-H|0,s=(a+((n|0)<0?n:0-n|0)|0)+(s^s+Ne)|0,n=(g>>>16&255)-Ae|0,((s+((n|0)<0?n:0-n|0)|0)<1?g:Ze)|0}function ye(n,s){n=n|0,s=s|0;var a=0,g=0,k=0,E=0,L=0,R=0,G=0,H=0,te=0,ce=0;if(k=c[n+8>>2],(k|0)>=1)for(te=re(c[n+52>>2],k),ce=c[n+80>>2];;){if(a=k+L|0,g=c[n+36>>2],R=F[s+L|0],E=R,E=c[n+44>>2]>=2?F[s+a|0]:E,c[(L<<2)+ce>>2]=re(g,R),G=a,(a|0)<(te|0))for(;;){g=g-c[n+40>>2]|0;e:{if((g|0)>=0){H=c[n+36>>2];break e}H=c[n+36>>2],g=H+g|0,R=E,G=k+G|0,E=F[G+s|0]}if(c[(a<<2)+ce>>2]=re(E,H)+re(R-E|0,g),a=a+k|0,!((a|0)<(te|0)))break}if(L=L+1|0,(L|0)==(k|0))break}}function Se(n){var s=0,a=0,g=0,k=0,E=0,L=0,R=0;g=c[n+20>>2];e:{if((g|0)<8){s=g;break e}for(a=c[n+16>>2],s=c[n+12>>2],R=a>>>0>s>>>0?a:s;;){if((a|0)==(R|0)){s=g;break e}if(E=c[n+4>>2],k=E>>>8|0,L=(E&255)<<24|c[n>>2]>>>8,E=k,c[n>>2]=L,c[n+4>>2]=k,k=F[c[n+8>>2]+a|0],s=g+-8|0,c[n+20>>2]=s,a=a+1|0,c[n+16>>2]=a,c[n>>2]=L,c[n+4>>2]=E|k<<24,k=(g|0)>15,g=s,!k)break}}c[n+16>>2]!=c[n+12>>2]|(s|0)<65&&!c[n+24>>2]||(c[n+20>>2]=0,c[n+24>>2]=1)}function ze(n,s){e:{if(n){if(s>>>0<=127)break e;t:{if(!c[c[2607]>>2]){if((s&-128)==57216)break e;break t}if(s>>>0<=2047)return p[n+1|0]=s&63|128,p[n|0]=s>>>6|192,2;if(!((s&-8192)!=57344&&s>>>0>=55296))return p[n+2|0]=s&63|128,p[n|0]=s>>>12|224,p[n+1|0]=s>>>6&63|128,3;if(s+-65536>>>0<=1048575)return p[n+3|0]=s&63|128,p[n|0]=s>>>18|240,p[n+2|0]=s>>>6&63|128,p[n+1|0]=s>>>12&63|128,4}c[2865]=25,n=-1}else n=1;return n}return p[n|0]=s,1}function Qe(n){var s=0,a=0,g=0,k=0,E=0,L=0;return n?(k=c[n+8>>2]+-1|0,Qn[n>>2]<=10?(s=n+20|0,a=c[s>>2],c[s>>2]=0-a,c[n+16>>2]=c[n+16>>2]+re(a,k),0):(s=n+32|0,a=c[s>>2],c[s>>2]=0-a,g=n+36|0,s=c[g>>2],c[g>>2]=0-s,E=n+40|0,g=c[E>>2],c[E>>2]=0-g,c[n+16>>2]=c[n+16>>2]+re(a,k),a=n+20|0,E=a,L=c[a>>2],a=k>>1,c[E>>2]=L+re(a,s),s=n+24|0,c[s>>2]=c[s>>2]+re(a,g),s=c[n+28>>2],s&&(g=n+44|0,a=c[g>>2],c[g>>2]=0-a,c[n+28>>2]=s+re(a,k)),0)):2}function st(n){n=n|0;var s=0,a=0,g=0,k=0,E=0,L=0,R=0,G=0,H=0,te=0,ce=0;for(g=n+-25|0,k=n+-26|0,E=n+-27|0,L=n+-28|0,R=n+-29|0,G=n+-30|0,H=n+-31|0,te=n+-32|0,ce=c[2548]-F[n+-33|0]|0;s=F[n+-1|0]+ce|0,p[n|0]=F[s+F[te|0]|0],p[n+1|0]=F[F[H|0]+s|0],p[n+2|0]=F[F[G|0]+s|0],p[n+3|0]=F[F[R|0]+s|0],p[n+4|0]=F[F[L|0]+s|0],p[n+5|0]=F[F[E|0]+s|0],p[n+6|0]=F[F[k|0]+s|0],p[n+7|0]=F[F[g|0]+s|0],n=n+32|0,a=a+1|0,(a|0)!=8;);}function Mt(n){n=n|0;var s=0,a=0,g=0,k=0,E=0,L=0;a=F[n+95|0],p[n+67|0]=a,p[n+66|0]=a,s=re(a,16843009),p[n+96|0]=s,p[n+97|0]=s>>>8,p[n+98|0]=s>>>16,p[n+99|0]=s>>>24,k=F[n+31|0],g=k+1|0,s=F[n+63|0],E=g+s>>>1|0,p[n+32|0]=E,L=F[n+-1|0],p[n|0]=g+L>>>1,g=(s+a|0)+1>>>1|0,p[n+64|0]=g,p[n+2|0]=E,p[n+34|0]=g,g=((a+k|0)+(s<<1)|0)+2>>>2|0,p[n+33|0]=g,s=s+2|0,p[n+1|0]=(s+L|0)+(k<<1)>>>2,a=(s+a|0)+(a<<1)>>>2|0,p[n+65|0]=a,p[n+3|0]=g,p[n+35|0]=a}function St(n,s,a,g,k){n=n|0,s=s|0,a=a|0,g=g|0,k=k|0;var E=0,L=0,R=0,G=0,H=0;if(p[k|0]=F[n|0],H=s+-1|0,L=1,(s|0)>=2)for(R=k+1|0,G=n+1|0;p[E+R|0]=F[E+G|0]-F[n+E|0],E=E+1|0,(H|0)!=(E|0););if((a|0)>=2)for(R=(s|0)<2;;){if(k=g+k|0,s=n+g|0,p[k|0]=F[s|0]-F[n|0],!R)for(n=k+1|0,G=s+1|0,E=0;p[n+E|0]=F[E+G|0]-F[s+E|0],E=E+1|0,(H|0)!=(E|0););if(n=s,L=L+1|0,(L|0)==(a|0))break}}function It(n){n=n|0;var s=0,a=0,g=0,k=0,E=0,L=0;a=F[n+-30|0],s=a+2|0,g=F[n+-29|0],k=F[n+-28|0]+(s+(g<<1)|0)>>>2|0,p[n+99|0]=k,E=F[n+-31|0],L=E+2|0,g=g+(L+(a<<1)|0)>>>2|0,p[n+98|0]=g,a=s,s=F[n+-32|0],a=(a+s|0)+(E<<1)>>>2|0,p[n+97|0]=a,s=(F[n+-33|0]+L|0)+(s<<1)>>>2|0,p[n+96|0]=s,p[n+67|0]=k,p[n+66|0]=g,p[n+65|0]=a,p[n+64|0]=s,p[n+35|0]=k,p[n+34|0]=g,p[n+33|0]=a,p[n+32|0]=s,p[n+3|0]=k,p[n+2|0]=g,p[n+1|0]=a,p[n|0]=s}function ri(n,s){n=n|0,s=s|0;var a=0,g=0,k=0,E=0,L=0,R=0,G=0,H=0,te=0,ce=0;return s=c[s>>2],H=c[s+24>>2],E=s+40|0,te=c[E>>2],g=c[s+20>>2],L=s+36|0,k=c[L>>2],a=c[s+16>>2],R=c[n+8>>2],s=c[s+32>>2],ce=a+re(R,s)|0,a=s,s=c[n+12>>2],G=c[n+16>>2],Dl(c[n+20>>2],c[n+32>>2],ce,a,s,G),a=k,k=R>>1,a=g+re(a,k)|0,s=(s+1|0)/2|0,g=(G+1|0)/2|0,Dl(c[n+24>>2],c[n+36>>2],a,c[L>>2],s,g),Dl(c[n+28>>2],c[n+36>>2],re(k,te)+H|0,c[E>>2],s,g),c[n+16>>2]}function fi(n,s,a,g,k){n=n|0,s=s|0,a=a|0,g=g|0,k=k|0;var E=0,L=0,R=0,G=0,H=0,te=0,ce=0,Ae=0;if((g|0)>=1)for(H=s?0:3,te=(s|0)!=0,ce=(a|0)<1;;){if(!ce)for(Ae=n+H|0,G=n+te|0,s=0;E=s<<2,L=F[E+Ae|0],(L|0)!=255&&(R=E+G|0,L=re(L,32897),p[R|0]=re(L,F[R|0])>>>23,R=(E|1)+G|0,p[R|0]=re(L,F[R|0])>>>23,E=(E|2)+G|0,p[E|0]=re(L,F[E|0])>>>23),s=s+1|0,(a|0)!=(s|0););if(n=n+k|0,s=(g|0)>1,g=g+-1|0,!s)break}}function Ai(n,s){var a=0;a=(s|0)!=0;e:{t:{i:{if(!s|!(n&3))break i;for(;;){if(!F[n|0])break t;if(n=n+1|0,s=s+-1|0,a=(s|0)!=0,!s)break i;if(!(n&3))break}}if(!a)break e}t:{if(!F[n|0]|s>>>0<4)break t;for(;;){if(a=c[n>>2],(a^-1)&a+-16843009&-2139062144)break t;if(n=n+4|0,s=s+-4|0,!(s>>>0>3))break}}if(!s)break e;for(;;){if(!F[n|0])return n;if(n=n+1|0,s=s+-1|0,!s)break}}return 0}function jt(n){n=n|0;var s=0;s=re((F[n+95|0]+(F[n+-29|0]+(F[n+63|0]+(F[n+-30|0]+(F[n+31|0]+(F[n+-31|0]+(F[n+-32|0]+F[n+-1|0]|0)|0)|0)|0)|0)|0)|0)+4>>>3&255,16843009),p[n+96|0]=s,p[n+97|0]=s>>>8,p[n+98|0]=s>>>16,p[n+99|0]=s>>>24,p[n+64|0]=s,p[n+65|0]=s>>>8,p[n+66|0]=s>>>16,p[n+67|0]=s>>>24,p[n+32|0]=s,p[n+33|0]=s>>>8,p[n+34|0]=s>>>16,p[n+35|0]=s>>>24,p[n|0]=s,p[n+1|0]=s>>>8,p[n+2|0]=s>>>16,p[n+3|0]=s>>>24}function Pi(n,s,a,g){n=n|0,s=s|0,a=a|0,g=g|0;var k=0,E=0,L=0,R=0,G=0,H=0,te=0;if((a|0)>=1)for(k=c[g+-4>>2];E=G<<2,L=E+s|0,R=c[L+4>>2],te=g+E|0,H=c[L>>2],R=((R^H)>>>1&2139062143)+(R&H)|0,L=c[L+-4>>2],k=((L^k)>>>1&2139062143)+(k&L)|0,k=((R^k)>>>1&2139062143)+(k&R)|0,E=c[n+E>>2],k=(k&-16711936)+(E&-16711936)&-16711936|(k&16711935)+(E&16711935)&16711935,c[te>>2]=k,G=G+1|0,(G|0)!=(a|0););}function Ei(n,s,a){n=n|0,s=s|0,a=a|0;var g=0,k=0,E=0,L=0,R=0,G=0,H=0,te=0,ce=0,Ae=0,Ne=0,Ze=0,mt=0;for(ce=0-s|0,Ae=0-(s<<1)|0,Ne=a<<1|1,R=c[2548],G=c[2547],Ze=c[2546],H=c[2549];a=n+k|0,te=a+ce|0,E=F[te|0],L=F[a|0],g=F[a+Ae|0]-F[s+a|0]|0,((F[(E-L|0)+H|0]<<2)+F[g+H|0]|0)<=(Ne|0)&&(g=p[g+Ze|0]+re(L-E|0,3)|0,mt=p[(g+4>>3)+G|0],p[te|0]=F[(p[(g+3>>3)+G|0]+E|0)+R|0],p[a|0]=F[(L-mt|0)+R|0]),k=k+1|0,(k|0)!=16;);}function Vi(n,s,a,g,k){n=n|0,s=s|0,a=a|0,g=g|0,k=k|0;var E=0,L=0,R=0,G=0,H=0,te=0,ce=0;if((a|0)>=1)for(;E=R<<2,G=Di[s+2>>1],H=Di[n>>1],te=Di[s>>1],ce=Di[n+2>>1],L=pn[E+g>>1]+(((G+re(H,9)|0)+re(te+ce|0,3)|0)+8>>4)|0,L=(L|0)<1023?L:1023,Di[k+E>>1]=(L|0)>0?L:0,L=E|2,E=pn[L+g>>1]+(((re(ce,9)+te|0)+re(G+H|0,3)|0)+8>>4)|0,E=(E|0)<1023?E:1023,Di[k+L>>1]=(E|0)>0?E:0,s=s+2|0,n=n+2|0,R=R+1|0,(R|0)!=(a|0););}function Ni(n){var s=0,a=0,g=0;if(c[n+24>>2]<=0){e:{if(c[n+4>>2]){ft[c[2808]](n);break e}if(!c[n+20>>2]){if((re(c[n+52>>2],c[n+8>>2])|0)<1)break e;for(a=c[n+76>>2];g=s<<2,p[c[n+68>>2]+s|0]=c[g+a>>2],a=c[n+76>>2],c[g+a>>2]=0,s=s+1|0,(s|0)<(re(c[n+52>>2],c[n+8>>2])|0););break e}ft[c[2809]](n)}c[n+24>>2]=c[n+24>>2]+c[n+28>>2],c[n+68>>2]=c[n+68>>2]+c[n+72>>2],c[n+64>>2]=c[n+64>>2]+1}}function un(n,s,a,g){n=n|0,s=s|0,a=a|0,g=g|0;var k=0,E=0,L=0,R=0,G=0,H=0;if((g|0)>=1)for(;k=pn[n+2>>1],E=pn[n>>1],R=pn[n+4>>1],G=(re(k,-19081)+re(E,-9719)|0)+re(R,28800)|0,H=G+33685504>>18,p[s+L|0]=H>>>0<256?H:(G|0)<-33685504?-33685504:255,k=(re(k,-24116)+re(E,28800)|0)+re(R,-4684)|0,E=k+33685504>>18,p[a+L|0]=E>>>0<256?E:(k|0)<-33685504?-33685504:255,n=n+8|0,L=L+1|0,(L|0)!=(g|0););}function zi(n,s,a,g,k){var E=0,L=0,R=0,G=0,H=0,te=0,ce=0;G=c[n+16>>2],L=c[n+8>>2],n=c[n+4>>2],R=8>>>n|0;e:{if((R|0)<=7){if((s|0)>=(a|0))break e;for(H=-1<<R^-1,te=-1<<n^-1,ce=(L|0)<1;;){if(E=0,n=0,!ce)for(;E&te||(n=F[g|0],g=g+1|0),p[k|0]=c[((n&H)<<2)+G>>2]>>>8,n=n>>>R|0,k=k+1|0,E=E+1|0,(E|0)!=(L|0););if(s=s+1|0,(a|0)==(s|0))break}break e}ft[c[2732]](g,G,k,s,a,L)}}function zn(n,s,a){n=n|0,s=s|0,a=a|0;var g=0,k=0,E=0,L=0,R=0;E=c[s>>2],a=c[E+28>>2],L=c[E+44>>2],g=a+re(L,c[n+8>>2])|0,k=c[n+16>>2],R=c[n+12>>2],s=c[n+104>>2];e:{if(s){if((k|0)<1)break e;for(a=0;g=Yr(g,s,R)+c[E+44>>2]|0,s=c[n>>2]+s|0,a=a+1|0,(k|0)!=(a|0););break e}if(!a|(k|0)<1)break e;for(s=0;g=Zo(g,255,R)+L|0,s=s+1|0,(k|0)!=(s|0););}return 0}function vn(n,s,a){n=n|0,s=s|0,a=a|0;var g=0,k=0,E=0,L=0,R=0,G=0,H=0,te=0,ce=0,Ae=0,Ne=0;for(ce=a<<1|1,R=c[2548],G=c[2547],Ae=c[2546],H=c[2549];a=re(s,k)+n|0,te=a+-1|0,E=F[te|0],L=F[a|0],g=F[a+-2|0]-F[a+1|0]|0,((F[(E-L|0)+H|0]<<2)+F[g+H|0]|0)<=(ce|0)&&(g=p[g+Ae|0]+re(L-E|0,3)|0,Ne=p[(g+4>>3)+G|0],p[te|0]=F[(p[(g+3>>3)+G|0]+E|0)+R|0],p[a|0]=F[(L-Ne|0)+R|0]),k=k+1|0,(k|0)!=16;);}function Wn(n,s){n=n|0,s=s|0;var a=0,g=0;return a=c[s>>2],n=((a^n)>>>1&2139062143)+(n&a)|0,a=n&255,s=c[s+-4>>2],a=((a-(s&255)|0)/2|0)+a|0,g=a>>>0<256?a:(a^-1)>>>24|0,a=n>>>24|0,a=((a-(s>>>24|0)|0)/2|0)+a|0,g=g|(a>>>0<256?a:a>>>24^-1)<<24,a=n>>>16&255,a=((a-(s>>>16&255)|0)/2|0)+a|0,n=n>>>8&255,n=((n-(s>>>8&255)|0)/2|0)+n|0,g|(a>>>0<256?a:(a^-1)>>>24|0)<<16|(n>>>0<256?n:(n^-1)>>>24|0)<<8}function Ir(n,s,a){var g=0;if(c[n+24>>2]=0,c[n+8>>2]=-8,c[n>>2]=0,c[n+4>>2]=254,c[n+12>>2]=s,g=s+a|0,c[n+16>>2]=g,g=a>>>0>3?g+-3|0:s,c[n+20>>2]=g,g>>>0>s>>>0){a=F[s|0]|F[s+1|0]<<8|(F[s+2|0]<<16|F[s+3|0]<<24),c[n+8>>2]=16,c[n+12>>2]=s+3,c[n>>2]=(a>>>8&65280|(a<<8&16711680|a<<24))>>>8;return}if((a|0)>=1){c[n+8>>2]=0,c[n+12>>2]=s+1,c[n>>2]=F[s|0];return}c[n+24>>2]=1,c[n+8>>2]=0,c[n>>2]=0}function Fr(n,s,a){var g=0,k=0,E=0,L=0;g=c[a+16>>2];e:{if(!g){if(as(a))break e;g=c[a+16>>2]}if(E=c[a+20>>2],g-E>>>0<s>>>0)return ft[c[a+36>>2]](a,n,s)|0;t:{if(p[a+75|0]<0)break t;for(k=s;;){if(g=k,!g)break t;if(k=g+-1|0,F[k+n|0]==10)break}if(k=ft[c[a+36>>2]](a,n,g)|0,k>>>0<g>>>0)break e;n=n+g|0,s=s-g|0,E=c[a+20>>2],L=g}Yr(E,n,s),c[a+20>>2]=c[a+20>>2]+s,k=s+L|0}return k}function j(n,s,a,g){n=n|0,s=s|0,a=a|0,g=g|0;var k=0,E=0,L=0,R=0,G=0,H=0,te=0,ce=0;if((a|0)>=1)for(te=(s|0)<1;;){if(L=0,!te)for(;k=L<<1,E=k+n|0,ce=E,H=(k|1)+n|0,R=F[H|0],k=R&15,G=re(k,4369),E=F[E|0],p[ce|0]=re(G,E&240|E>>>4)>>>16&240|re((E&15|E<<4)&255,G)>>>20,p[H|0]=re(R&240|R>>>4,G)>>>16&240|k,L=L+1|0,(L|0)!=(s|0););if(n=n+g|0,k=(a|0)>1,a=a+-1|0,!k)break}}function K(n,s,a,g,k){n=n|0,s=s|0,a=a|0,g=g|0,k=k|0;var E=0,L=0,R=0,G=0;if(p[k|0]=F[n|0],(s|0)>=2)for(R=s+-1|0,L=k+1|0,G=n+1|0;p[E+L|0]=F[E+G|0]-F[n+E|0],E=E+1|0,(R|0)!=(E|0););if((a|0)>=2)for(L=1;;){if(k=g+k|0,R=n+g|0,E=0,(s|0)>=1)for(;p[k+E|0]=F[E+R|0]-F[n+E|0],E=E+1|0,(E|0)!=(s|0););if(n=R,L=L+1|0,(L|0)==(a|0))break}}function ue(n,s,a){n=n|0,s=s|0,a=a|0;var g=0,k=0,E=0,L=0;if((s|0)>=1)for(;g=(E<<2)+n|0,k=c[g>>2],k>>>0<=4278190079&&(L=g,k>>>0>=16777216?(g=k>>>24|0,a?g=4278190080/(g>>>0)|0:g=re(g,65793),g=re(g,k>>>16&255)+8388608>>>8&16711680|(re(g,k>>>8&255)+8388608>>>16&65280|(k&-16777216|re(g,k&255)+8388608>>>24))):g=0,c[L>>2]=g),E=E+1|0,(E|0)!=(s|0););}function we(n,s,a){var g=0,k=0,E=0,L=0,R=0,G=0,H=0,te=0,ce=0;if(c[n+20>>2]=0,c[n+24>>2]=0,c[n>>2]=0,c[n+4>>2]=0,c[n+12>>2]=a,E=a>>>0<8?a:8,E)for(ce=E,a=0;L=F[s+a|0],k=R<<3,g=k&31,32<=(k&63)>>>0?(k=L<<g,g=0):(k=(1<<g)-1&L>>>32-g,g=L<<g),G=g|G,H=k|H,a=a+1|0,g=R+1|0,g>>>0<1&&(te=te+1|0),R=g,!!((ce|0)!=(g|0)|te););c[n+16>>2]=E,c[n>>2]=G,c[n+4>>2]=H,c[n+8>>2]=s}function je(n,s){var a=0,g=0,k=0;a=0;e:{if(!n)break e;if(!s)return c[n>>2]=2,0;c[n>>2]=0,c[n+8>>2]=s,a=n+24|0,we(a,c[s+64>>2],c[s+60>>2]);t:{i:{n:{if((eo(a,8)|0)!=47||(k=eo(a,14),g=eo(a,14),eo(a,1),eo(a,3)))break n;if(!c[n+48>>2])break i}c[n>>2]=3;break t}if(c[n+4>>2]=2,g=g+1|0,c[s+4>>2]=g,a=s,s=k+1|0,c[a>>2]=s,a=1,hn(s,g,1,n,0))break e}jo(n),a=0}return a}function Je(n,s,a,g){n=n|0,s=s|0,a=a|0,g=g|0;var k=0,E=0,L=0,R=0;e:{if(!n){if((g|0)<1)break e;for(;k=F[s+E|0]+k|0,p[a+E|0]=k,E=E+1|0,(E|0)!=(g|0););break e}if((g|0)<1)break e;for(k=F[n|0],L=k,R=k;;){if(L=(L&255)-(R&255)|0,R=k,k=(k&255)+L|0,k=(k|0)>0?k:0,L=F[s+E|0]+((k|0)<255?k:255)|0,p[a+E|0]=L,E=E+1|0,(E|0)==(g|0))break e;k=F[n+E|0]}}}function tt(n,s,a,g){var k=0,E=0,L=0,R=0;return k=c[g>>2],E=c[a>>2],E|(s|0)<1||(R=_r(k,k>>31,n,n>>31),E=s+R|0,L=Bn,L=E>>>0<R>>>0?L+1|0:L,E=E+-1|0,L=L+-1|0,E=bc(E,(E|0)!=-1?L+1|0:L,s,0)),k|(n|0)<1||(L=_r(E,E>>31,s,s>>31),k=L+n|0,s=Bn,s=k>>>0<L>>>0?s+1|0:s,k=k+-1|0,s=s+-1|0,k=bc(k,(k|0)!=-1?s+1|0:s,n,0)),n=0,(E|0)<1|(k|0)<1||(c[a>>2]=E,c[g>>2]=k,n=1),n}function at(n,s,a,g){n=n|0,s=s|0,a=a|0,g=g|0;var k=0,E=0,L=0,R=0,G=0;if((a|0)>=1)for(k=c[g+-4>>2];E=G<<2,L=E+s|0,R=c[L+4>>2],k=((R^k)>>>1&2139062143)+(k&R)|0,R=g+E|0,L=c[L>>2],k=((L^k)>>>1&2139062143)+(k&L)|0,E=c[n+E>>2],k=(k&-16711936)+(E&-16711936)&-16711936|(k&16711935)+(E&16711935)&16711935,c[R>>2]=k,G=G+1|0,(G|0)!=(a|0););}function pt(n,s){n=n|0,s=s|0;var a=0,g=0,k=0;return g=c[s>>2],s=c[s+-4>>2],a=((g&255)+(n&255)|0)-(s&255)|0,k=a>>>0<256?a:(a^-1)>>>24|0,a=(g>>>24)+(n>>>24)-(s>>>24)|0,k=k|(a>>>0<256?a:a>>>24^-1)<<24,a=((g>>>16&255)+(n>>>16&255)|0)-(s>>>16&255)|0,n=((g>>>8&255)+(n>>>8&255)|0)-(s>>>8&255)|0,k|(a>>>0<256?a:(a^-1)>>>24|0)<<16|(n>>>0<256?n:(n^-1)>>>24|0)<<8}function Ct(n,s,a,g,k){var E=0;e:{if(!n|s>>>0<10|(F[n+3|0]!=157|F[n+4|0]!=1)||F[n+5|0]!=42||(s=F[n|0],(s&25)!=16|(s|F[n+1|0]<<8|F[n+2|0]<<16)>>>5>>>0>=a>>>0)||(s=F[n+6|0]|F[n+7|0]<<8&16128,!s)||(n=F[n+8|0]|F[n+9|0]<<8&16128,!n)||(g&&(c[g>>2]=s),E=1,!k))break e;c[k>>2]=n}return E}function ai(n,s,a){n=n|0,s=s|0,a=a|0;var g=0,k=0,E=0,L=0,R=0,G=0;e:{if(g=c[n+104>>2],!g|(a|0)<1)break e;for(R=c[s+16>>2]+a|0,k=c[s+36>>2];;){if(E=c[n+8>>2],L=c[k+60>>2],G=g,g=c[n>>2],ws(k,c[n+16>>2]+(E-L|0)|0,G+re(g,L-E|0)|0,g),a=a-(ft[c[s+52>>2]](s,R-a|0,a)|0)|0,(a|0)<1)break e;g=c[n+104>>2]}}return 0}function ki(n,s,a,g){n=n|0,s=s|0,a=a|0,g=g|0;var k=0,E=0,L=0,R=0,G=0,H=0,te=0;if((a|0)>=1)for(G=p[n+2|0],H=p[n+1|0],te=p[n|0];E=k<<2,n=c[E+s>>2],L=n<<16>>24,R=(re(L,te)>>5)+(n>>>16|0)|0,c[g+E>>2]=n+(re(H,L)>>>5|0)+(re(R<<24>>24,G)>>>5)&255|(R<<16&16711680|n&-16711936),k=k+1|0,(k|0)!=(a|0););}function wi(n,s,a,g){n=n|0,s=s|0,a=a|0,g=g|0;var k=0,E=0,L=0,R=0;if((a|0)>=1)for(R=s+-4|0,s=c[g+-4>>2];k=L<<2,E=c[k+R>>2],s=((E^s)>>>1&2139062143)+(s&E)|0,E=g+k|0,k=c[n+k>>2],s=(s&-16711936)+(k&-16711936)&-16711936|(s&16711935)+(k&16711935)&16711935,c[E>>2]=s,L=L+1|0,(L|0)!=(a|0););}function pi(n,s,a,g){n=n|0,s=s|0,a=a|0,g=g|0;var k=0,E=0,L=0,R=0,G=0;if((a|0)>=1)for(;k=R<<2,E=k+s|0,L=c[E>>2],G=g+k|0,E=c[E+-4>>2],L=((E^L)>>>1&2139062143)+(L&E)|0,k=c[n+k>>2],c[G>>2]=(L&-16711936)+(k&-16711936)&-16711936|(L&16711935)+(k&16711935)&16711935,R=R+1|0,(R|0)!=(a|0););}function on(n,s,a,g){n=n|0,s=s|0,a=a|0,g=g|0;var k=0,E=0,L=0,R=0,G=0;if((a|0)>=1)for(;k=R<<2,E=k+s|0,L=c[E+4>>2],G=g+k|0,E=c[E>>2],L=((E^L)>>>1&2139062143)+(L&E)|0,k=c[n+k>>2],c[G>>2]=(L&-16711936)+(k&-16711936)&-16711936|(L&16711935)+(k&16711935)&16711935,R=R+1|0,(R|0)!=(a|0););}function Oi(n,s,a,g){n=n|0,s=s|0,a=a|0,g=g|0;var k=0,E=0,L=0,R=0;if((a|0)>=1)for(k=c[g+-4>>2];E=R<<2,L=c[E+s>>2],k=((L^k)>>>1&2139062143)+(k&L)|0,L=g+E|0,E=c[n+E>>2],k=(k&-16711936)+(E&-16711936)&-16711936|(k&16711935)+(E&16711935)&16711935,c[L>>2]=k,R=R+1|0,(R|0)!=(a|0););}function qt(n,s,a,g){n=n|0,s=s|0,a=a|0,g=g|0;var k=0,E=0,L=0,R=0,G=0,H=0;if((g|0)>=1)for(;E=L<<1,k=E+a|0,H=k,E=pn[n+E>>1]-pn[s+E>>1]|0,k=E+pn[k>>1]|0,k=(k|0)<1023?k:1023,Di[H>>1]=(k|0)>0?k:0,k=E>>31,E=k+E^k,k=R+E|0,k>>>0<E>>>0&&(G=G+1|0),R=k,L=L+1|0,(L|0)!=(g|0););return Bn=G,R|0}function Qt(n,s,a,g,k,E){n=n|0,s=s|0,a=a|0,g=g|0,k=k|0,E=E|0;var L=0,R=0,G=0,H=0,te=0;if(R=255,(g|0)>=1)for(te=(a|0)<1;;){if(L=0,!te)for(;G=F[(L<<2)+n|0],p[k+L|0]=G,R=R&G,L=L+1|0,(L|0)!=(a|0););if(k=k+E|0,n=n+s|0,H=H+1|0,(H|0)==(g|0))break}return(R&255)==255|0}function Ki(n,s,a){var g=0,k=0,E=0;e:{if((s|0)==1&n>>>0<0|s>>>0<1){g=n;break e}for(;g=bc(n,s,10,0),k=Bn,E=k,k=_r(g,k,10,0),a=a+-1|0,p[a|0]=n-k|48,k=s>>>0>9,n=g,s=E,!!k;);}if(g)for(;a=a+-1|0,n=(g>>>0)/10|0,p[a|0]=g-re(n,10)|48,s=g>>>0>9,g=n,!!s;);return a}function tn(n,s,a,g,k,E){n=n|0,s=s|0,a=a|0,g=g|0,k=k|0,E=E|0;var L=0,R=0,G=0,H=0,te=0;if(R=255,(g|0)>=1)for(te=(a|0)<1;;){if(L=0,!te)for(;G=F[n+L|0],p[(L<<2)+k|0]=G,R=R&G,L=L+1|0,(L|0)!=(a|0););if(k=k+E|0,n=n+s|0,H=H+1|0,(H|0)==(g|0))break}return(R|0)!=255|0}function Ui(n,s,a,g,k){var E=0,L=0,R=0;E=Un-32|0,Un=E;e:{if(!n|s>>>0<5|(F[n|0]!=47|F[n+4|0]>31)||(we(E,n,s),(eo(E,8)|0)!=47)||(n=eo(E,14),s=eo(E,14),L=eo(E,1),eo(E,3)|c[E+24>>2])||(a&&(c[a>>2]=n+1),g&&(c[g>>2]=s+1),R=1,!k))break e;c[k>>2]=L}return Un=E+32|0,R}function Fn(n,s,a,g){n=n|0,s=s|0,a=a|0,g=g|0;var k=0,E=0,L=0,R=0;if((a|0)>=1)for(;;){k=F[s+E|0];e:{if((k|0)==255)break e;if(!k){p[n+E|0]=0;break e}L=n+E|0,R=L,g?k=4278190080/(k>>>0)|0:k=re(k,65793),p[R|0]=re(k,F[L|0])+8388608>>>24}if(E=E+1|0,(E|0)==(a|0))break}}function Sn(n,s,a,g){n=n|0,s=s|0,a=a|0,g=g|0;var k=0;e:{if(n){if((g|0)<=0)break e;for(;p[a+k|0]=F[s+k|0]+F[n+k|0],k=k+1|0,(k|0)!=(g|0););break e}if((g|0)<1)break e;for(n=0;n=F[s+k|0]+n|0,p[a+k|0]=n,k=k+1|0,(k|0)!=(g|0););}}function Sr(n,s,a,g){n=n|0,s=s|0,a=a|0,g=g|0;var k=0,E=0,L=0,R=0;if((a|0)>=1)for(L=s+-4|0,s=0;k=s<<2,E=c[k+n>>2],R=g+k|0,k=c[k+L>>2],c[R>>2]=(E&-16711936)+(k&-16711936)&-16711936|(E&16711935)+(k&16711935)&16711935,s=s+1|0,(a|0)!=(s|0););}function Rn(n,s,a,g,k,E){n=n|0,s=s|0,a=a|0,g=g|0,k=k|0,E=E|0;var L=0,R=0,G=0;if((g|0)>=1)for(R=(a|0)<1,G=E<<2;;){if(E=0,!R)for(;c[(E<<2)+k>>2]=F[n+E|0]<<8,E=E+1|0,(E|0)!=(a|0););if(n=n+s|0,k=k+G|0,L=L+1|0,(L|0)==(g|0))break}}function vo(n,s,a,g,k,E){n=n|0,s=s|0,a=a|0,g=g|0,k=k|0,E=E|0;var L=0,R=0;if((g|0)<(k|0))for(R=(E|0)<1;;){if(L=0,!R)for(;c[a>>2]=c[(c[n>>2]>>>6&1020)+s>>2],a=a+4|0,n=n+4|0,L=L+1|0,(L|0)!=(E|0););if(g=g+1|0,(k|0)==(g|0))break}}function Ao(n,s,a,g){n=n|0,s=s|0,a=a|0,g=g|0;var k=0,E=0,L=0,R=0;if((a|0)>=1)for(L=s+4|0,s=0;k=s<<2,E=c[k+n>>2],R=g+k|0,k=c[k+L>>2],c[R>>2]=(E&-16711936)+(k&-16711936)&-16711936|(E&16711935)+(k&16711935)&16711935,s=s+1|0,(a|0)!=(s|0););}function Zr(n,s,a,g,k,E){n=n|0,s=s|0,a=a|0,g=g|0,k=k|0,E=E|0;var L=0,R=0;if((g|0)<(k|0))for(R=(E|0)<1;;){if(L=0,!R)for(;p[a|0]=c[(F[n|0]<<2)+s>>2]>>>8,a=a+1|0,n=n+1|0,L=L+1|0,(L|0)!=(E|0););if(g=g+1|0,(k|0)==(g|0))break}}function Hr(n,s,a,g){n=n|0,s=s|0,a=a|0,g=g|0;var k=0,E=0,L=0,R=0;if((a|0)>=1)for(;k=E<<2,L=c[k+n>>2],R=g+k|0,k=c[s+k>>2],c[R>>2]=(L&-16711936)+(k&-16711936)&-16711936|(L&16711935)+(k&16711935)&16711935,E=E+1|0,(E|0)!=(a|0););}function yo(n,s,a,g){n=n|0,s=s|0,a=a|0,g=g|0;var k=0,E=0,L=0;if((a|0)>=1)for(s=c[g+-4>>2];E=k<<2,L=c[E+n>>2],s=(L&-16711936)+(s&-16711936)&-16711936|(L&16711935)+(s&16711935)&16711935,c[g+E>>2]=s,k=k+1|0,(k|0)!=(a|0););}function ko(){var n=0,s=0;n=tu(1,0,2376);e:{if(!n||(c[n>>2]=0,c[n+8>>2]=5010,ft[c[2557]](n+124|0),c[n+312>>2]=0,c[n+4>>2]=0,c[2661]))break e;t:{if(s=c[2673],!s||!(ft[s|0](2)|0))break t;return c[2661]=19,n}c[2661]=20}return n}function Wr(n,s,a){var g=0,k=0;return g=2,!n|!a||(c[a>>2]=0,c[a+4>>2]=0,c[a+32>>2]=0,c[a+36>>2]=0,c[a+24>>2]=0,c[a+28>>2]=0,k=a+16|0,g=k,c[g>>2]=0,c[g+4>>2]=0,g=a+8|0,c[g>>2]=0,c[g+4>>2]=0,g=El(n,s,a,a+4|0,g,a+12|0,k,0)),g}function Ts(n,s,a,g){var k=0,E=0,L=0,R=0,G=0,H=0;return k=a>>>16|0,E=n>>>16|0,H=re(k,E),L=a&65535,R=n&65535,G=re(L,R),E=(G>>>16|0)+re(E,L)|0,k=(E&65535)+re(k,R)|0,n=(re(s,a)+H|0)+re(n,g)+(E>>>16)+(k>>>16)|0,s=G&65535|k<<16,Bn=n,s}function Rr(n){var s=0;if(s=c[n+12>>2],s>>>0<Qn[n+16>>2]){c[n+12>>2]=s+1,c[n+8>>2]=c[n+8>>2]+8,c[n>>2]=F[s|0]|c[n>>2]<<8;return}if(!c[n+24>>2]){c[n+24>>2]=1,c[n>>2]=c[n>>2]<<8,c[n+8>>2]=c[n+8>>2]+8;return}c[n+8>>2]=0}function ss(n,s){n=n|0,s=s|0;var a=0;return s=c[s>>2],a=c[s+20>>2],qh(c[n+20>>2],c[n+32>>2],c[n+24>>2],c[n+28>>2],c[n+36>>2],re(a,c[n+8>>2])+c[s+16>>2]|0,a,c[n+12>>2],c[n+16>>2],c[(c[s>>2]<<2)+11376>>2]),c[n+16>>2]}function zs(n,s,a){n=n|0,s=s|0,a=a|0;var g=0,k=0;if((a|0)>=1)for(;k=c[(g<<2)+n>>2],p[s+g|0]=((re(k&255,6420)+re(k>>>16&255,16839)|0)+re(k>>>8&255,33059)|0)+1081344>>>16,g=g+1|0,(g|0)!=(a|0););}function so(n,s,a,g){n=n|0,s=s|0,a=a|0,g=g|0;var k=0;k=Un-16|0,Un=k;e:{if(!Lf(gu(c[n+60>>2],s|0,a|0,g&255,k+8|0)|0)){s=c[k+12>>2],n=c[k+8>>2];break e}c[k+8>>2]=-1,c[k+12>>2]=-1,s=-1,n=-1}return Un=k+16|0,Bn=s,n|0}function cs(n,s,a,g,k,E){n=n|0,s=s|0,a=a|0,g=g|0,k=k|0,E=E|0;var L=0,R=0;if((g|0)>=1)for(;c[(R<<2)+E>>2]=F[a+L|0]|(F[n+L|0]<<16|F[s+L|0]<<8)|-16777216,L=k+L|0,R=R+1|0,(R|0)!=(g|0););}function Ls(n,s,a){n=n|0,s=s|0,a=a|0;var g=0,k=0,E=0,L=0;if((s|0)>=1)for(;E=g<<2,k=c[E+n>>2],L=k>>>8&255,c[a+E>>2]=(k&16711935)+(L<<16|L)&16711935|k&-16711936,g=g+1|0,(g|0)!=(s|0););}function Ns(n){n&&(ft[c[2562]](n+124|0),l0(n),Ur(c[n+2288>>2]),c[n+2288>>2]=0,c[n+2292>>2]=0,c[n+12>>2]=0,c[n+16>>2]=0,c[n+20>>2]=0,c[n+24>>2]=0,c[n+28>>2]=0,c[n+32>>2]=0,c[n+36>>2]=0,c[n+4>>2]=0,Ur(n))}function zo(n,s,a,g,k){var E=0;if(E=Un-256|0,Un=E,!(k&73728|(a|0)<=(g|0))){if(a=a-g|0,g=a>>>0<256,Zo(E,s&255,g?a:256),!g)for(;Yh(n,E,256),a=a+-256|0,a>>>0>255;);Yh(n,E,a)}Un=E+256|0}function _a(n,s,a){n=n|0,s=s|0,a=a|0;var g=0;if((a|0)>=1)for(;p[s+g|0]=((re(F[n+2|0],16839)+re(F[n+1|0],33059)|0)+re(F[n|0],6420)|0)+1081344>>>16,n=n+3|0,g=g+1|0,(g|0)!=(a|0););}function qa(n,s,a){n=n|0,s=s|0,a=a|0;var g=0;if((a|0)>=1)for(;p[s+g|0]=((re(F[n|0],16839)+re(F[n+1|0],33059)|0)+re(F[n+2|0],6420)|0)+1081344>>>16,n=n+3|0,g=g+1|0,(g|0)!=(a|0););}function Mo(n,s,a){n=n|0,s=s|0,a=a|0;var g=0;if((s|0)>=1)for(g=(s<<2)+n|0;s=c[n>>2],p[a+2|0]=s,p[a+3|0]=s>>>24,p[a+1|0]=s>>>8,p[a|0]=s>>>16,a=a+4|0,n=n+4|0,n>>>0<g>>>0;);}function xs(n,s,a,g){var k=0,E=0;k=Un-1024|0,Un=k;e:{if(!n){g=Is(0,s,a,g,0);break e}if((g|0)<=512){g=Is(n,s,a,g,k);break e}if(E=Ps(g,0,2),!E){g=0;break e}g=Is(n,s,a,g,E),Ur(E)}return Un=k+1024|0,g}function $l(){var n=0;n=c[2673],(n|0)!=c[2555]&&(c[2854]=136,c[2853]=137,c[2852]=138,c[2851]=139,c[2850]=140,c[2849]=136,c[2848]=137,c[2847]=138,c[2846]=141,c[2845]=139,c[2844]=142,c[2555]=n)}function Ha(){var n=0;n=c[2673],(n|0)!=c[2553]&&(c[2831]=129,c[2829]=130,c[2838]=131,c[2837]=132,c[2836]=129,c[2835]=130,c[2834]=133,c[2833]=131,c[2832]=132,c[2830]=134,c[2828]=135,c[2553]=n)}function cl(n,s,a){n=n|0,s=s|0,a=a|0;var g=0;if((s|0)>=1)for(g=(s<<2)+n|0;s=c[n>>2],p[a+1|0]=s>>>5&224|s>>>3&31,p[a|0]=s>>>16&248|s>>>13&7,a=a+2|0,n=n+4|0,n>>>0<g>>>0;);}function hl(){var n=0;n=c[2673],(n|0)!=c[2554]&&(c[2820]=122,c[2819]=123,c[2815]=122,c[2813]=123,c[2822]=124,c[2821]=125,c[2818]=126,c[2817]=124,c[2816]=125,c[2814]=127,c[2812]=128,c[2554]=n)}function as(n){var s=0;return s=F[n+74|0],p[n+74|0]=s+-1|s,s=c[n>>2],s&8?(c[n>>2]=s|32,-1):(c[n+4>>2]=0,c[n+8>>2]=0,s=c[n+44>>2],c[n+28>>2]=s,c[n+20>>2]=s,c[n+16>>2]=s+c[n+48>>2],0)}function Uh(n,s,a){n=n|0,s=s|0,a=a|0;var g=0;if((s|0)>=1)for(g=(s<<2)+n|0;s=c[n>>2],p[a+1|0]=s&240|s>>>28,p[a|0]=s>>>16&240|s>>>12&15,a=a+2|0,n=n+4|0,n>>>0<g>>>0;);}function s0(n,s,a,g){n=n|0,s=s|0,a=a|0,g=g|0;var k=0,E=0;if((a|0)>=1)for(s=0;k=s<<2,E=c[k+n>>2],c[g+k>>2]=E+-16777216&-16711936|E&16711935,s=s+1|0,(a|0)!=(s|0););}function wf(n,s){n=n|0,s=s|0,pn[n>>1]&&ft[c[2706]](n,s),pn[n+32>>1]&&ft[c[2706]](n+32|0,s+4|0),pn[n+64>>1]&&ft[c[2706]](n- -64|0,s+128|0),pn[n+96>>1]&&ft[c[2706]](n+96|0,s+132|0)}function fc(){var n=0;n=c[2673],(n|0)!=c[2544]&&(c[2663]=21,c[2662]=22,c[2665]=23,c[2670]=24,c[2664]=25,c[2666]=26,c[2667]=27,c[2668]=28,c[2669]=29,c[2671]=30,c[2672]=31,c[2544]=n)}function dc(n,s){n=n|0,s=s|0;var a=0,g=0;return a=c[s>>2],g=c[s+4>>2],a=((a^g)>>>1&2139062143)+(a&g)|0,s=c[s+-4>>2],n=((s^n)>>>1&2139062143)+(n&s)|0,((a^n)>>>1&2139062143)+(n&a)|0}function Vh(n){n=n|0;var s=0,a=0,g=0;return c[n+12>>2]<1|c[n+16>>2]<1||(s=c[n+40>>2],a=ft[c[s+44>>2]](n,s)|0,g=c[s+48>>2],g&&ft[g|0](n,s,a)|0,c[s+16>>2]=c[s+16>>2]+a,s=1),s|0}function Ga(n,s,a,g){n=n|0,s=s|0,a=a|0,g=g|0;var k=0,E=0,L=0;if((g|0)>=1)for(;E=k<<1,L=E+a|0,Di[L>>1]=pn[L>>1]+(pn[n+E>>1]-pn[s+E>>1]|0),k=k+1|0,(k|0)!=(g|0););}function Wa(n){var s=0,a=0;s=c[3008],a=n+3&-4,n=s+a|0;e:{if(n>>>0<=s>>>0&&(a|0)>=1||n>>>0>bp()<<16>>>0&&!(pu(n|0)|0))break e;return c[3008]=n,s}return c[2865]=48,-1}function pc(n,s,a){n=n|0,s=s|0,a=a|0;var g=0;if((s|0)>=1)for(g=(s<<2)+n|0;s=c[n>>2],p[a|0]=s,p[a+2|0]=s>>>16,p[a+1|0]=s>>>8,a=a+3|0,n=n+4|0,n>>>0<g>>>0;);}function mc(n,s,a){n=n|0,s=s|0,a=a|0;var g=0;if((s|0)>=1)for(g=(s<<2)+n|0;s=c[n>>2],p[a+2|0]=s,p[a+1|0]=s>>>8,p[a|0]=s>>>16,a=a+3|0,n=n+4|0,n>>>0<g>>>0;);}function qh(n,s,a,g,k,E,L,R,G,H){var te=0,ce=0;if((G|0)>=1)for(;ft[H|0](n,a,g,E,R),ce=te&1,a=ce?a+k|0:a,g=ce?g+k|0:g,E=E+L|0,n=n+s|0,te=te+1|0,(te|0)!=(G|0););}function jc(n,s){var a=0,g=0,k=0;a=0;e:{if(!n||(g=_r(n,0,s,0),k=Bn,a=g,(n|s)>>>0<65536))break e;a=k?-1:g}return s=a,n=ja(s),!n|!(F[n+-4|0]&3)||Zo(n,0,s),n}function gc(n,s){n=n|0,s=s|0;var a=0,g=0,k=0;e:{if((s|0)<=0)break e;for(;;){if(F[n+a|0]==255){if(a=a+4|0,g=(s|0)<2,s=s+-1|0,!g)continue;break e}break}k=1}return k|0}function Uc(n,s,a,g){n=n|0,s=s|0,a=a|0,g=g|0;var k=0,E=0;if(k=n?F[n|0]:k,(g|0)>=1)for(;k=F[s+E|0]+k|0,p[a+E|0]=k,E=E+1|0,(E|0)!=(g|0););}function yc(n){var s=0;e:{if(c[n+64>>2]>=c[n+56>>2])break e;for(;;){if(c[n+24>>2]>0)break e;if(s=s+1|0,Ni(n),!(c[n+64>>2]<c[n+56>>2]))break}}return s}function Vc(n,s){var a=0,g=0,k=0,E=0;a=4;e:{for(;;){if(g=F[n|0],k=F[s|0],(g|0)==(k|0)){if(s=s+1|0,n=n+1|0,a=a+-1|0,a)continue;break e}break}E=g-k|0}return E}function aa(){var n=0;n=c[2673],(n|0)!=c[2556]&&(c[2861]=143,c[2860]=144,c[2857]=145,c[2858]=146,c[2859]=147,c[2862]=148,c[2863]=149,c[2864]=150,c[2556]=n)}function Js(n){var s=0,a=0,g=0;if(Pf(p[c[n>>2]]))for(;s=c[n>>2],g=p[s|0],c[n>>2]=s+1,a=(re(a,10)+g|0)+-48|0,!!Pf(p[s+1|0]););return a}function Ps(n,s,a){var g=0,k=0,E=0;e:{if(n|s&&(k=bc(2147418112,0,n,s),g=Bn,_r(a,0,n,s),!g&k>>>0<a>>>0|g>>>0<0|Bn>>>0>0))break e;E=ja(re(n,a))}return E}function eu(n,s,a,g,k){n=n|0,s=s|0,a=a|0,g=g|0,k=k|0;var E=0;E=n,n=s<<2,E=E+n|0,Gr(E,s,1,16,a,g,k),E=n+E|0,Gr(E,s,1,16,a,g,k),Gr(n+E|0,s,1,16,a,g,k)}function a0(){var n=0;n=c[2673],(n|0)!=c[2550]&&(c[2731]=75,c[2730]=76,c[2729]=77,c[2728]=0,c[2727]=78,c[2726]=79,c[2725]=80,c[2724]=0,c[2550]=n)}function tu(n,s,a){var g=0,k=0,E=0;e:{if(n|s&&(k=bc(2147418112,0,n,s),g=Bn,_r(a,0,n,s),!g&k>>>0<a>>>0|g>>>0<0|Bn>>>0>0))break e;E=jc(n,a)}return E}function l0(n){var s=0;Ur(c[n+2360>>2]),c[n+2360>>2]=0,c[n+2364>>2]=0,s=c[n+2344>>2],s&&(g0(c[s+20>>2]),c[s+20>>2]=0,Ur(s)),c[n+2344>>2]=0}function xf(n,s,a){n=n|0,s=s|0,a=a|0;var g=0;if((a|0)>=1)for(;p[s+g|0]=c[(g<<2)+n>>2]>>>8,g=g+1|0,(g|0)!=(a|0););}function mh(n,s,a,g){if(n|s)for(;a=a+-1|0,p[a|0]=F[(n&15)+10128|0]|g,n=(s&15)<<28|n>>>4,s=s>>>4|0,!!(n|s););return a}function qc(n,s,a,g,k,E,L){var R=0;if((E|0)>=1)for(;ft[c[2663]](n,a,k,L),a=a+g|0,n=n+s|0,R=R+1|0,(R|0)!=(E|0););}function Af(n,s){n=n|0,s=s|0;for(var a=0;;){if((s|0)<1)return 0;if(s=s+-1|0,a=F[n|0],n=n+1|0,(a|0)!=255)break}return 1}function gh(n,s){n=n|0,s=s|0;var a=0;return a=c[s+4>>2],n=((a^n)>>>1&2139062143)+(n&a)|0,s=c[s>>2],((n^s)>>>1&2139062143)+(n&s)|0}function Hh(n,s,a,g,k,E){n=n|0,s=s|0,a=a|0,g=g|0,k=k|0,E=E|0;var L=0;L=n,n=a<<2,Gr(L+n|0,a,1,8,g,k,E),Gr(n+s|0,a,1,8,g,k,E)}function yh(n,s,a,g,k){n=n|0,s=s|0,a=a|0,g=g|0,k=k|0,Gr(n+4|0,1,s,16,a,g,k),Gr(n+8|0,1,s,16,a,g,k),Gr(n+12|0,1,s,16,a,g,k)}function Dl(n,s,a,g,k,E){var L=0;if((E|0)>=1)for(;a=Yr(a,n,k)+g|0,n=n+s|0,L=(E|0)>1,E=E+-1|0,!!L;);}function u0(n,s,a){if(n|s)for(;a=a+-1|0,p[a|0]=n&7|48,n=(s&7)<<29|n>>>3,s=s>>>3|0,!!(n|s););return a}function Hc(n,s,a,g,k,E,L,R,G,H){n=n|0,s=s|0,a=a|0,g=g|0,k=k|0,E=E|0,L=L|0,R=R|0,G=G|0,H=H|0,ft[n|0](s,a,g,k,E,L,R,G,H)}function _c(n,s,a,g){var k=0;if((g|0)>=1)for(;ft[c[2662]](n,a,0),n=n+s|0,k=k+1|0,(k|0)!=(g|0););}function va(){var n=0;n=c[2673],(n|0)!=c[2552]&&(c[2809]=118,c[2808]=119,c[2807]=120,c[2806]=121,c[2552]=n)}function iu(n,s){var a=0;return a=1<<s,a=tu(a,a>>31,4),c[n>>2]=a,a?(c[n+8>>2]=s,c[n+4>>2]=32-s,1):0}function c0(n,s){var a=0;return a=1,c[n+148>>2]>=1&&(a=ft[c[2559]](n+124|0)|0),n=c[s+52>>2],n&&ft[n|0](s),a}function kf(n){n=n|0;var s=0;s=c[n+8>>2],s&&(s=ft[s|0](c[n+12>>2],c[n+16>>2])|0,c[n+20>>2]=c[n+20>>2]|!s)}function ud(n,s,a,g,k,E){n=n|0,s=s|0,a=a|0,g=g|0,k=k|0,E=E|0,Gr(n+4|0,1,a,8,g,k,E),Gr(s+4|0,1,a,8,g,k,E)}function vc(n,s){var a=0;return a=c[n+24>>2],n=c[n+32>>2],n=((a+n|0)+-1|0)/(n|0)|0,(n|0)>(s|0)?s:n}function Su(n,s,a,g,k,E,L){return n=n|0,s=s|0,a=a|0,g=g|0,k=k|0,E=E|0,L=L|0,ft[n|0](s,a,g,k,E,L)|0}function h0(n,s,a,g,k,E){n=n|0,s=s|0,a=a|0,g=g|0,k=k|0,E=E|0,Gs(n,1,a,8,g,k,E),Gs(s,1,a,8,g,k,E)}function Wu(n,s,a,g,k,E){n=n|0,s=s|0,a=a|0,g=g|0,k=k|0,E=E|0,Gs(n,a,1,8,g,k,E),Gs(s,a,1,8,g,k,E)}function _h(n){n=n|0,c[n>>2]=0,c[n+4>>2]=0,c[n+16>>2]=0,c[n+20>>2]=0,c[n+8>>2]=0,c[n+12>>2]=0}function Sf(n,s,a,g,k){return n=n|0,s=s|0,a=a|0,g=g|0,k=k|0,n=ft[n|0](s,a,g,k)|0,Gl(Bn|0),n|0}function cd(n,s){var a=0;return!s|c[n+12>>2]<2|c[n>>2]+-7>>>0>3||(a=c[s+8>>2]!=0),a}function vh(n,s){return n=n|0,s=s|0,n=c[s>>2],s=c[s+-4>>2],((n^s)>>>1&2139062143)+(n&s)|0}function Cf(n,s,a,g,k,E,L){n=n|0,s=s|0,a=a|0,g=g|0,k=k|0,E=E|0,L=L|0,ft[n|0](s,a,g,k,E,L)}function ba(n,s){var a=0,g=0;return a=s&31,g=(-1>>>a&n)<<a,a=n,n=0-s&31,g|(a&-1<<n)>>>n}function Cu(n,s){return n=n|0,s=s|0,n=c[s+4>>2],s=c[s>>2],((n^s)>>>1&2139062143)+(n&s)|0}function Xu(n,s){return n=n|0,s=s|0,s=c[s+-4>>2],((s^n)>>>1&2139062143)+(n&s)|0}function nu(n,s,a,g,k,E){n=n|0,s=s|0,a=a|0,g=g|0,k=k|0,E=E|0,ft[n|0](s,a,g,k,E)}function Gh(n){e:{if(c[n+76>>2]<=-1){n=Fr(1024,26,n);break e}n=Fr(1024,26,n)}}function Yu(n,s){n=n|0,s=s|0,ft[c[2703]](n,s,1),ft[c[2703]](n- -64|0,s+128|0,1)}function f0(n,s){return n=n|0,s=s|0,s=c[s>>2],((s^n)>>>1&2139062143)+(n&s)|0}function Ko(n,s,a){return c[n>>2]||(c[n+8>>2]=a,c[n>>2]=s,c[n+4>>2]=0),0}function Zu(n,s,a){var g=0;g=Un-16|0,Un=g,c[g+12>>2]=a,yr(n,s,a),Un=g+16|0}function Wh(n,s,a,g,k){n=n|0,s=s|0,a=a|0,g=g|0,k=k|0,Gs(n,1,s,16,a,g,k)}function d0(n,s,a,g,k){n=n|0,s=s|0,a=a|0,g=g|0,k=k|0,Gs(n,s,1,16,a,g,k)}function p0(n){return n=n|0,c[n+20>>2]=0,c[n+4>>2]||(c[n+4>>2]=1),1}function Xh(n,s){c[s+40>>2]=n,c[s+52>>2]=3,c[s+48>>2]=4,c[s+44>>2]=5}function cp(n,s){if(!c[n>>2]){ft[c[2806]](n,s);return}ft[c[2807]](n,s)}function hp(n,s,a,g,k){n=n|0,s=s|0,a=a|0,g=g|0,k=k|0,ft[n|0](s,a,g,k)}function Ef(n,s,a){n=n|0,s=s|0,a=a|0,Ua(n,s),a&&Ua(n+32|0,s+4|0)}function hd(n,s,a,g){return n=n|0,s=s|0,a=a|0,g=g|0,ft[n|0](s,a,g)|0}function If(n){n&&(c[n+12>>2]<=0&&Ur(c[n+80>>2]),c[n+80>>2]=0)}function tm(n){n=n|0,n=c[n+40>>2],Ur(c[n+40>>2]),c[n+40>>2]=0}function fp(n,s,a,g){n=n|0,s=s|0,a=a|0,g=g|0,ft[n|0](s,a,g)}function Tf(n,s,a){return n=n|0,s=s|0,a=a|0,ft[n|0](s,a)|0}function dp(n){return n?31-Br(n+-1^n)|0:32}function m0(n,s){Yr(c[s>>2],c[n>>2],4<<c[s+8>>2])}function js(n,s){return s=Lr(n,s),Lr(n,1)?0-s|0:s}function Lf(n){return n?(c[2865]=n,-1):0}function fd(n,s,a){n=n|0,s=s|0,a=a|0,ft[n|0](s,a)}function dd(n,s){return n=n|0,s=s|0,ft[n|0](s)|0}function im(n,s){return s=s|0,c[s+-4>>2]}function pp(n,s){return n?ze(n,s):0}function Yh(n,s,a){F[n|0]&32||Fr(s,a,n)}function nm(n){return n=n|0,n=Un-n&-16,Un=n,n|0}function rm(n,s){return s=s|0,c[s+4>>2]}function Gc(n,s){return-16777216}function bc(n,s,a,g){return n=Uu(n,s,a,g),n}function _r(n,s,a,g){return n=Ts(n,s,a,g),n}function wc(n){n&&(Ur(c[n>>2]),c[n>>2]=0)}function om(n,s){return s=s|0,c[s>>2]}function sm(n){return n=n|0,ch(c[n+60>>2])|0}function am(n){return n=n|0,!c[n+20>>2]|0}function mp(n,s){return n=n|0,n|0}function gp(n,s){n=n|0,s=s|0,ft[n|0](s)}function lm(n){return n=n|0,hm(n|0)|0}function Pf(n){return n+-48>>>0<10}function g0(n){n&&(jo(n),Ur(n))}function yp(n){n&&Zo(n,0,108)}function pd(n){n=n|0,c[n+4>>2]=0}function Zh(n){n&&Zo(n,0,84)}function Mf(n){n&&Ur(n)}function _p(n,s){return Bn=n,s}function um(){return 11460}function cm(n){n=n|0,Un=n}function Df(){return Un|0}function vp(){}ft[1]=qu,ft[2]=Nu,ft[3]=tm,ft[4]=Ia,ft[5]=Vh,ft[6]=ss,ft[7]=fh,ft[8]=ri,ft[9]=wu,ft[10]=z,ft[11]=zn,ft[12]=Kl,ft[13]=Gu,ft[14]=Hu,ft[15]=ai,ft[16]=Au,ft[17]=tr,ft[18]=ps,ft[19]=ju,ft[20]=rl,ft[21]=Fn,ft[22]=ue,ft[23]=j,ft[24]=cs,ft[25]=fi,ft[26]=tn,ft[27]=Rn,ft[28]=Qt,ft[29]=xf,ft[30]=Af,ft[31]=gc,ft[32]=Ef,ft[33]=Zl,ft[34]=Ro,ft[35]=Ll,ft[36]=Yu,ft[37]=wf,ft[38]=d0,ft[39]=eu,ft[40]=Wh,ft[41]=Wu,ft[42]=Hh,ft[43]=Ei,ft[44]=vn,ft[45]=ms,ft[46]=Dn,ft[47]=yh,ft[48]=h0,ft[49]=ud,ft[50]=ul,ft[51]=hc,ft[52]=It,ft[53]=I,ft[54]=jt,ft[55]=Mt,ft[56]=ll,ft[57]=jh,ft[58]=cc,ft[59]=dh,ft[60]=se,ft[61]=Xt,ft[62]=hi,ft[63]=ma,ft[64]=Ue,ft[65]=lc,ft[66]=Zi,ft[67]=us,ft[68]=Tl,ft[69]=Fc,ft[70]=_u,ft[71]=sl,ft[72]=st,ft[73]=vu,ft[74]=Rs,ft[75]=Je,ft[76]=Sn,ft[77]=Uc,ft[78]=Ql,ft[79]=K,ft[80]=St,ft[81]=Gc,ft[82]=Wn,ft[83]=pt,ft[84]=pe,ft[85]=dc,ft[86]=Cu,ft[87]=vh,ft[88]=f0,ft[89]=Xu,ft[90]=gh,ft[91]=im,ft[92]=rm,ft[93]=om,ft[94]=mp,ft[95]=s0,ft[96]=Bo,ft[97]=Nh,ft[98]=uc,ft[99]=Pi,ft[100]=on,ft[101]=pi,ft[102]=Oi,ft[103]=wi,ft[104]=at,ft[105]=Sr,ft[106]=Ao,ft[107]=Hr,ft[108]=yo,ft[109]=Ls,ft[110]=ki,ft[111]=Mo,ft[112]=mc,ft[113]=pc,ft[114]=Uh,ft[115]=cl,ft[116]=vo,ft[117]=Zr,ft[118]=ya,ft[119]=Va,ft[120]=ye,ft[121]=d,ft[122]=jr,ft[123]=kr,ft[124]=$r,ft[125]=Jn,ft[126]=Xr,ft[127]=No,ft[128]=Fo,ft[129]=gs,ft[130]=ph,ft[131]=D,ft[132]=os,ft[133]=sa,ft[134]=W,ft[135]=ne,ft[136]=Ma,ft[137]=ra,ft[138]=Pa,ft[139]=La,ft[140]=Bs,ft[141]=Pl,ft[142]=ga,ft[143]=hh,ft[144]=zs,ft[145]=qa,ft[146]=_a,ft[147]=un,ft[148]=qt,ft[149]=Ga,ft[150]=Vi,ft[151]=_h,ft[152]=p0,ft[153]=am,ft[154]=kf,ft[155]=kf,ft[156]=pd,ft[157]=sm,ft[158]=Go,ft[159]=so;function bp(){return an.byteLength/65536|0}function hm(n){n=n|0;var s=bp()|0,a=s+n|0;if(s<a&&a<65536){var g=new ArrayBuffer(re(a,65536)),k=new ui.Int8Array(g);k.set(p),p=k,p=new ui.Int8Array(g),Di=new ui.Int16Array(g),c=new ui.Int32Array(g),F=new ui.Uint8Array(g),pn=new ui.Uint16Array(g),Qn=new ui.Uint32Array(g),new ui.Float32Array(g),wo=new ui.Float64Array(g),an=g,Tn.buffer=g}return s}return{__wasm_call_ctors:vp,WebpToSDL:Bc,memset:Zo,memcpy:Yr,malloc:ja,free:Ur,__errno_location:um,stackSave:Df,stackRestore:cm,stackAlloc:nm,dynCall_vii:fd,dynCall_vi:gp,dynCall_ii:dd,dynCall_iii:Tf,dynCall_iiii:hd,dynCall_iiiiiii:Su,dynCall_viiii:hp,dynCall_viii:fp,dynCall_viiiiii:Cf,dynCall_viiiii:nu,dynCall_viiiiiiiii:Hc,dynCall_jiiii:Sf,dynCall_jiji:Sf,__growWasmMemory:lm}}for(var zt=new Uint8Array(ot.buffer),bi=new Uint8Array(123),yi=25;yi>=0;--yi)bi[48+yi]=52+yi,bi[65+yi]=yi,bi[97+yi]=26+yi;bi[43]=62,bi[47]=63;function _i(ui,ji,an){for(var Tn,ft,p=0,Di=ji,c=an.length,F=ji+(c*3>>2)-(an[c-2]=="=")-(an[c-1]=="=");p<c;p+=4)Tn=bi[an.charCodeAt(p+1)],ft=bi[an.charCodeAt(p+2)],ui[Di++]=bi[an.charCodeAt(p)]<<2|Tn>>4,Di<F&&(ui[Di++]=Tn<<4|ft>>2),Di<F&&(ui[Di++]=ft<<6|bi[an.charCodeAt(p+3)])}return _i(zt,1024,"TGlicmFyeSB2ZXJzaW9uIG1pc21hdGNoIQoAVW5hYmxlIHRvIHNldCB2aWRlbyBtb2RlICgzMmJwcCAlZHglZCkhCgBVbmFibGUgdG8gY3JlYXRlICVkeCVkIFJHQkEgc3VyZmFjZSEKAEVycm9yIGRlY29kaW5nIGltYWdlICglZCkKAAMEAwQEAgIEBAQCAQE="),_i(zt,1184,"iguMC44LkguaC6oLygsKDIwMjA2MD4wTGAEAAQABAAEo"),_i(zt,1232,"ERIAAQIDBAUQBgcICQoLDA0ODwIDBwMDCwAAAAAAAAAYBxcZKAYnKRYaJio4BTc5FRs2OiUrSARHSRQcNTtGSiQsWEVLNDwDV1kTHVZaIy1ETFVbMz1oAmdpEh5maiIuVFxDTWVrMj54AXd5U10RH2RsQk52eiEvdXsxP2NtUl4AdHxBTxAgYm4wc31RX0ByfmFvUHF/YHAAAAAAAAAAAP///////////////////////////////////////////7D2////////////3/H8///////////5/f3////////////0/P//////////6v7+///////////9///////////////2/v//////////7/3+///////////+//7////////////4/v//////////+//+///////////////////////////9/v//////////+/7+///////////+//7////////////+/f/+////////+v/+//7////////+/////////////////////////////////////////////////////////9n/////////////4fzx/f///v/////q+vH6/f/9/v/////+////////////3/7+///////////u/f7+///////////4/v//////////+f7////////////////////////////9////////////9/7////////////////////////////9/v///////////P/////////////////////////////+/v///////////f/////////////////////////////+/f//////////+v/////////////+/////////////////////////////////////////////////////////7r7+v//////////6vv0/v/////////7+/P9/v/+///////9/v//////////7P3+///////////7/f3+/v/////////+/v///////////v7+///////////////////////////+/////////////v7////////////+/////////////////////////////v////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////j/////////////+v78/v/////////4/vn9///////////9/f//////////9v39///////////8/vv+/v/////////+/P//////////+P79///////////9//7+///////////7/v//////////9fv+///////////9/f7////////////7/f///////////P3+/////////////v/////////////8////////////+f/+//////////////7//////////////f//////////+v///////////////////////////////////////////v///////////////////////////4CAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgP2I/v/k24CAgICAvYHy/+PV/9uAgIBqfuP81tH//4CAgAFi+P/s4v//gICAtYXu/t3q/5qAgIBOhsr3xrT/24CAgAG5+f/z/4CAgICAuJb3/+zggICAgIBNbtj/7OaAgICAgAFl+//x/4CAgICAqovx/OzR//+AgIAldMTz5P///4CAgAHM/v/1/4CAgICAz6D6/+6AgICAgIBmZ+f/06uAgICAgAGY/P/w/4CAgICAsYfz/+rhgICAgIBQgdP/wuCAgICAgAEB/4CAgICAgICA9gH/gICAgICAgID/gICAgICAgICAgMYj7d/Bu6KgkZs+gy3G3ayw3J383QFEL5LQlafdov/fgAGV8f/d4P//gICAuI3q/d7c/8eAgIBRY7XysL75yv//gAGB6P3WxfLE//+AY3nS+snG/8qAgIAXW6Pyqrv30v//gAHI9v/q/4CAgICAbbLx/+f1//+AgIAsgsn9zcD//4CAgAGE7/vb0f+lgICAXojh+9q+//+AgIAWZK71uqH/x4CAgAG2+f/o64CAgICAfI/x/+PqgICAgIAjTbX7wdP/zYCAgAGd9//s5///gICAeY3r/+Hj//+AgIAtY7z7w9n/4ICAgAEB+//V/4CAgICAywH4//+AgICAgICJAbH/4P+AgICAgP0J+PvP0P/AgICArw3g88G5+cb//4BJEavdobPsp//qgAFf9/3Ut///gICA71r0+tPR//+AgICbTcP4vMP//4CAgAEY7/va2//NgICAyTPb/8S6gICAgIBFLr7vydr/5ICAgAG/+///gICAgICA36X5/9X/gICAgICNfPj//4CAgICAgAEQ+P//gICAgICAviTm/+z/gICAgICVAf+AgICAgICAgAHi/4CAgICAgICA98D/gICAgICAgIDwgP+AgICAgICAgAGG/P//gICAgICA1T76//+AgICAgIA3Xf+AgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgMoY1eu6v9yg8K//fia26Km45K7/u4A9Lorbl7Lwqv/YgAFw5vrHv/ef//+Apm3k/NPX/66AgIAnTaLorLT1sv//gAE03PbGx/nc//+AfEq/87fB+t3//4AYR4Lbmqrztv//gAG24fnb8P/ggICAlZbi/NjN/6uAgIAcbKryt8L+3///gAFR5vzMy//AgICAe2bR97zE/+mAgIAUX5nzpK3/y4CAgAHe+P/Y1YCAgICAqK/2/OvN//+AgIAvdNf/09T//4CAgAF57P3U1v//gICAjVTV/MnK/9uAgIAqUKDworn/zYCAgAEB/4CAgICAgICA9AH/gICAgICAgIDuAf+AgICAgICAgOd4MFlzcXiYcJizQH6qdi5GX69Fj1BVUkibZzg6CqvavRENmHIaEaMswxUKrXkYUMMaPixAVZBHCiar1ZAiGqouNxOIoCHORz8UCHJy0AwJ4lEoC2C2VB0QJIa3WYliZWqllEi7ZIKdbyBLUEJmp2NKPijqgCk1CbLxjRoIa0orGpJJpjEXnUEmaaAzNB9zgGhPDBvZ/1cRB1dERyxyMw+6Fy8pDm62txURwkItGWbFvRcSFlhYk5YqLi3EzStht3VVJiOzPSc1yFcaFSvoqzgiM2hyZh1dTSccVas6pVpiQCIWdM4XIiumSWs2IBozAVErH0QZahZAqyThciITFWaEvBBMfD4STl9VOTIwM8FlI5/Xb1kubzyUH6zb5BUSb3BxTVWz/yZ4cigqAcT10QoZbVgrHYym1SUrmj0/HptDLUQB0WRQCCuaATMaR45OThD/gCLFqykoBWbTtwQB3TMyEajRwBcZUoofJKsbpiYs5UNXOqlScxo7sz87WrQ7pl1JmigoFXSP0SInry8PELci3zEtty4RIbcGYg8gtzkuFhiAATYRJUEgSXMcgBeAzSgDCXMzwBIG31clCXM7TUAVL2g3LNoJNjWC4kBaRs0oKRcaOTY5cLgFKSam1R4iGoWYdAoghicTNd0aciBJ/x8JQeoCDwF2SUsgDDPA/6ArM1gfI0NmVTe6VTgVF287zS0lwDcmRnxJZgEiYn1iKlhoVXWvUl9UNVmAZHFlLUtPey8zgFGrATkRBUdmOTUpMSYhDXk5SRoBVSkKQ4pNblovcnMVAgpm/6YXBmUdEApVgGXEGjkSCmZm1SIUK3UUDySjgEQBGmY9RyUiNR/zwEU8RyZJdxzeJUQtgCIBLwv1qz4RE0aSVTc+RiUrJZpko1WgAT8JXIgcQCDJVUsPCQlA/7h3EFYGHAVA/xn4ATgIEYSJ/zd0gDoPFFKHORp5KKQyH4mahRkj2jNnLIODex8GnlYoQIeU4C23gBYaEYPwmg4B0S0QFVtA3gcBxTgVJ5s8ihdm1VMMDTbA/0QvHFUaVVWAgCCSqxILBz+QqwQE9iMbCpKuqwwagL5QI2O0UH42LVV+L1ewMykUIGVLgIt2knSAVTgpD7DsVSUJPkceEXd2/xESimUmPIo3RisajpIkEx6r/2EbFIotPT7bAVG8QCApFHWXjhQVo3ATDD3DgDAEGA=="),_i(zt,4417,"Af8C/gMEBv0F/Pv6B/kI+Pc="),_i(zt,4448,"BAUGBwgJCgoLDA0ODxARERITFBQVFRYWFxcYGRkaGxwdHh8gISIjJCUlJicoKSorLC0uLi8wMTIzNDU2Nzg5Ojs8PT4/QEFCQ0RFRkdISUpLTExNTk9QUVJTVFVWV1hZW11fYGJkZWZoamxucHJ0dnp8foCChIaIioyPkZSXmp0EAAUABgAHAAgACQAKAAsADAANAA4ADwAQABEAEgATABQAFQAWABcAGAAZABoAGwAcAB0AHgAfACAAIQAiACMAJAAlACYAJwAoACkAKgArACwALQAuAC8AMAAxADIAMwA0ADUANgA3ADgAOQA6ADwAPgBAAEIARABGAEgASgBMAE4AUABSAFQAVgBYAFoAXABeAGAAYgBkAGYAaABqAGwAbgBwAHIAdAB3AHoAfQCAAIMAhgCJAIwAjwCSAJUAmACbAJ4AoQCkAKcAqgCtALEAtQC5AL0AwQDFAMkAzQDRANUA2QDdAOEA5QDqAO8A9QD5AP4AAwEIAQ0BEgEXARwBCAcGBAQCAgIBAQEBRnJhbWUgc2V0dXAgZmFpbGVkAAACCA=="),_i(zt,4882,"BAAIAAwAgACEAIgAjAAAAQQBCAEMAYABhAGIAYwBQ291bGQgbm90IGRlY29kZSBhbHBoYSBkYXRhLgB0aHJlYWQgaW5pdGlhbGl6YXRpb24gZmFpbGVkLgBubyBtZW1vcnkgZHVyaW5nIGZyYW1lIGluaXRpYWxpemF0aW9uLgBPSwBudWxsIFZQOElvIHBhc3NlZCB0byBWUDhHZXRIZWFkZXJzKCkAVHJ1bmNhdGVkIGhlYWRlci4ASW5jb3JyZWN0IGtleWZyYW1lIHBhcmFtZXRlcnMuAEZyYW1lIG5vdCBkaXNwbGF5YWJsZS4AY2Fubm90IHBhcnNlIHBpY3R1cmUgaGVhZGVyAEJhZCBjb2RlIHdvcmQAYmFkIHBhcnRpdGlvbiBsZW5ndGgAY2Fubm90IHBhcnNlIHNlZ21lbnQgaGVhZGVyAGNhbm5vdCBwYXJzZSBmaWx0ZXIgaGVhZGVyAGNhbm5vdCBwYXJzZSBwYXJ0aXRpb25zAE5vdCBhIGtleSBmcmFtZS4ATlVMTCBWUDhJbyBwYXJhbWV0ZXIgaW4gVlA4RGVjb2RlKCku"),_i(zt,5329,"AQQIBQIDBgkMDQoHCw4PrZSMALCbjIcAtJ2NhoIA/v7z5sSxmYyFgoEAUHJlbWF0dXJlIGVuZC1vZi1wYXJ0aXRpb24wIGVuY291bnRlcmVkLgBQcmVtYXR1cmUgZW5kLW9mLWZpbGUgZW5jb3VudGVyZWQuAE91dHB1dCBhYm9ydGVkLgBSSUZGAFZQOFg="),_i(zt,5488,"gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBgoOEhYaHiImKi4yNjo+QkZKTlJWWl5iZmpucnZ6foKGio6SlpqeoqaqrrK2ur7CxsrO0tba3uLm6u7y9vr/AwcLDxMXGx8jJysvMzc7P0NHS09TV1tfY2drb3N3e3+Dh4uPk5ebn6Onq6+zt7u/w8fLz9PX29/j5+vv8/f7/AAECAwQFBgcICQoLDA0ODxAREhMUFRYXGBkaGxwdHh8gISIjJCUmJygpKissLS4vMDEyMzQ1Njc4OTo7PD0+P0BBQkNERUZHSElKS0xNTk9QUVJTVFVWV1hZWltcXV5fYGFiY2RlZmdoaWprbG1ub3BxcnN0dXZ3eHl6e3x9fn9/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/AAAAAAAAAADw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8fLz9PX29/j5+vv8/f7/AAECAwQFBgcICQoLDA0ODw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw=="),_i(zt,8032,"AQIDBAUGBwgJCgsMDQ4PEBESExQVFhcYGRobHB0eHyAhIiMkJSYnKCkqKywtLi8wMTIzNDU2Nzg5Ojs8PT4/QEFCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaW1xdXl9gYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXp7fH1+f4CBgoOEhYaHiImKi4yNjo+QkZKTlJWWl5iZmpucnZ6foKGio6SlpqeoqaqrrK2ur7CxsrO0tba3uLm6u7y9vr/AwcLDxMXGx8jJysvMzc7P0NHS09TV1tfY2drb3N3e3+Dh4uPk5ebn6Onq6+zt7u/w8fLz9PX29/j5+vv8/f7/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////AAD//v38+/r5+Pf29fTz8vHw7+7t7Ovq6ejn5uXk4+Lh4N/e3dzb2tnY19bV1NPS0dDPzs3My8rJyMfGxcTDwsHAv769vLu6ubi3trW0s7KxsK+urayrqqmop6alpKOioaCfnp2cm5qZmJeWlZSTkpGQj46NjIuKiYiHhoWEg4KBgH9+fXx7enl4d3Z1dHNycXBvbm1sa2ppaGdmZWRjYmFgX15dXFtaWVhXVlVUU1JRUE9OTUxLSklIR0ZFRENCQUA/Pj08Ozo5ODc2NTQzMjEwLy4tLCsqKSgnJiUkIyIhIB8eHRwbGhkYFxYVFBMSERAPDg0MCwoJCAcGBQQDAgEAAQIDBAUGBwgJCgsMDQ4PEBESExQVFhcYGRobHB0eHyAhIiMkJSYnKCkqKywtLi8wMTIzNDU2Nzg5Ojs8PT4/QEFCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaW1xdXl9gYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXp7fH1+f4CBgoOEhYaHiImKi4yNjo+QkZKTlJWWl5iZmpucnZ6foKGio6SlpqeoqaqrrK2ur7CxsrO0tba3uLm6u7y9vr/AwcLDxMXGx8jJysvMzc7P0NHS09TV1tfY2drb3N3e3+Dh4uPk5ebn6Onq6+zt7u/w8fLz9PX29/j5+vv8/f7/AAcGBgUFBQUEBAQEBAQEBAMDAwMDAwMDAwMDAwMDAwMCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEAf3+/f5+/33+Pn6+/z9/vf4ePl5+nr7e/x8/X3+fv93+Dh4uPk5ebn6Onq6+zt7u/w8fLz9PX29/j5+vv8/f7f4GDhYeJi42PkZOVl5mbnZ+ho6Wnqautr7Gztbe5u72/wcPFx8nLzc/R09XX2dvd3+Hj5efp6+3v8fP19/n7/X8AAAAAAQAAAAMAAAAHAAAADwAAAB8AAAA/AAAAfwAAAP8AAAD/AQAA/wMAAP8HAAD/DwAA/x8AAP8/AAD/fwAA//8AAP//AQD//wMA//8HAP//DwD//x8A//8/AP//fwD///8="),_i(zt,9424,"MFLhDYYYswPLrF93amKIHFVcOGgouLMU+P6FSku43UmX8/xkiQJVXAAAKUrawX4Nq7dAWX1XklRyyhlOaYzTOGXuAQxfdaEyUvY3VDIsu1qxV6oP5zP1c9ruX2jizGN1gw6Zbu2nMEfG2cBPPBVrSfoDFE8M+xpUMguZcxzL1yYGN8xv2He7LCovdnXdzCVkYVSzJBWHfQqoFAQiZ78eFIMVtFbjAuVzb7HKREJNJij7rrpz7etQCvu2ah0L1DoNaDvbNYMeCCuVa8538OWBUbw7hXiUlJ8APO3lJy0rICAgMFgweAAobnVsbCkAAAAAEQAKABEREQAAAAAFAAAAAAAACQAAAAALAAAAAAAAAAARAA8KERERAwoHAAEACQsLAAAJBgsAAAsABhEAAAARERE="),_i(zt,9745,"CwAAAAAAAAAAEQAKChEREQAKAAACAAkLAAAACQALAAAL"),_i(zt,9803,"DA=="),_i(zt,9815,"DAAAAAAMAAAAAAkMAAAAAAAMAAAM"),_i(zt,9861,"Dg=="),_i(zt,9873,"DQAAAAQNAAAAAAkOAAAAAAAOAAAO"),_i(zt,9919,"EA=="),_i(zt,9931,"DwAAAAAPAAAAAAkQAAAAAAAQAAAQAAASAAAAEhIS"),_i(zt,9986,"EgAAABISEgAAAAAAAAk="),_i(zt,10035,"Cw=="),_i(zt,10047,"CgAAAAAKAAAAAAkLAAAAAAALAAAL"),_i(zt,10093,"DA=="),_i(zt,10105,"DAAAAAAMAAAAAAkMAAAAAAAMAAAMAAAwMTIzNDU2Nzg5QUJDREVG+Cg="),_i(zt,10160,"4BQAAOQUAADpFAAA7xQAAMAnAADEJwAAbBkAAOAdAABfHwAAXyIAANgnAADcJwAA4CcAAOQnAADoJwAA7CcAAPAnAACXAAAAmAAAAJkAAACaAAAAmwAAAJw="),_i(zt,10428,"8Cw="),_i(zt,10488,"BQ=="),_i(zt,10500,"nQ=="),_i(zt,10524,"ngAAAJ8AAAAQLQ=="),_i(zt,10548,"Ag=="),_i(zt,10563,"//////8="),Nt({Int8Array,Int16Array,Int32Array,Uint8Array,Uint16Array,Uint32Array,Float32Array,Float64Array,NaN:NaN,Infinity:1/0,Math},De,ot.buffer)}(vs,X,Z)},instantiate:function(U,$){return{then:function(ge){var De=new V.Module(U);ge({instance:new V.Instance(De)})}}},RuntimeError:Error};O=[],typeof V!="object"&&Wt("no native wasm support detected");var X,Z=new V.Table({initial:160,maximum:160,element:"anyfunc"}),ee=!1;function J(U,$){U||Wt("Assertion failed: "+$)}function ie(U){var $=i["_"+U];return J($,"Cannot call unknown function "+U+", make sure it is exported"),$}function ke(U,$,ge,De,ot){var Et={string:function(an){var Tn=0;if(an!=null&&an!==0){var ft=(an.length<<2)+1;Tn=hu(ft),rt(an,Tn,ft)}return Tn},array:function(an){var Tn=hu(an.length);return Tt(an,Tn),Tn}};function Nt(an){return $==="string"?_e(an):$==="boolean"?Boolean(an):an}var zt=ie(U),bi=[],yi=0;if(De)for(var _i=0;_i<De.length;_i++){var ui=Et[ge[_i]];ui?(yi===0&&(yi=cu()),bi[_i]=ui(De[_i])):bi[_i]=De[_i]}var ji=zt.apply(null,bi);return ji=Nt(ji),yi!==0&&Sl(yi),ji}function Le(U,$,ge,De){ge=ge||[];var ot=ge.every(function(Nt){return Nt==="number"}),Et=$!=="string";return Et&&ot&&!De?ie(U):function(){return ke(U,$,ge,arguments)}}var fe=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0;function Te(U,$,ge){for(var De=$+ge,ot=$;U[ot]&&!(ot>=De);)++ot;if(ot-$>16&&U.subarray&&fe)return fe.decode(U.subarray($,ot));for(var Et="";$<ot;){var Nt=U[$++];if(!(Nt&128)){Et+=String.fromCharCode(Nt);continue}var zt=U[$++]&63;if((Nt&224)==192){Et+=String.fromCharCode((Nt&31)<<6|zt);continue}var bi=U[$++]&63;if((Nt&240)==224?Nt=(Nt&15)<<12|zt<<6|bi:Nt=(Nt&7)<<18|zt<<12|bi<<6|U[$++]&63,Nt<65536)Et+=String.fromCharCode(Nt);else{var yi=Nt-65536;Et+=String.fromCharCode(55296|yi>>10,56320|yi&1023)}}return Et}function _e(U,$){return U?Te(le,U,$):""}function ve(U,$,ge,De){if(!(De>0))return 0;for(var ot=ge,Et=ge+De-1,Nt=0;Nt<U.length;++Nt){var zt=U.charCodeAt(Nt);if(zt>=55296&&zt<=57343){var bi=U.charCodeAt(++Nt);zt=65536+((zt&1023)<<10)|bi&1023}if(zt<=127){if(ge>=Et)break;$[ge++]=zt}else if(zt<=2047){if(ge+1>=Et)break;$[ge++]=192|zt>>6,$[ge++]=128|zt&63}else if(zt<=65535){if(ge+2>=Et)break;$[ge++]=224|zt>>12,$[ge++]=128|zt>>6&63,$[ge++]=128|zt&63}else{if(ge+3>=Et)break;$[ge++]=240|zt>>18,$[ge++]=128|zt>>12&63,$[ge++]=128|zt>>6&63,$[ge++]=128|zt&63}}return $[ge]=0,ge-ot}function rt(U,$,ge){return ve(U,le,$,ge)}function nt(U){for(var $=0,ge=0;ge<U.length;++ge){var De=U.charCodeAt(ge);De>=55296&&De<=57343&&(De=65536+((De&1023)<<10)|U.charCodeAt(++ge)&1023),De<=127?++$:De<=2047?$+=2:De<=65535?$+=3:$+=4}return $}typeof TextDecoder<"u"&&new TextDecoder("utf-16le");function Tt(U,$){Be.set(U,$)}var We=65536;function be(U,$){return U%$>0&&(U+=$-U%$),U}var Ce,Be,le,Ee,he,me,Fe;function Xe(U){Ce=U,i.HEAP8=Be=new Int8Array(U),i.HEAP16=Ee=new Int16Array(U),i.HEAP32=he=new Int32Array(U),i.HEAPU8=le=new Uint8Array(U),i.HEAPU16=new Uint16Array(U),i.HEAPU32=me=new Uint32Array(U),i.HEAPF32=Fe=new Float32Array(U),i.HEAPF64=new Float64Array(U)}var lt=5255072,Ye=12032,Ke=i.INITIAL_MEMORY||67108864;i.wasmMemory?X=i.wasmMemory:X=new V.Memory({initial:Ke/We,maximum:2147483648/We}),X&&(Ce=X.buffer),Ke=Ce.byteLength,Xe(Ce),he[Ye>>2]=lt;function Lt(U){for(;U.length>0;){var $=U.shift();if(typeof $=="function"){$(i);continue}var ge=$.func;typeof ge=="number"?$.arg===void 0?i.dynCall_v(ge):i.dynCall_vi(ge,$.arg):ge($.arg===void 0?null:$.arg)}}var $t=[],dt=[],wt=[],bt=[];function $e(){if(i.preRun)for(typeof i.preRun=="function"&&(i.preRun=[i.preRun]);i.preRun.length;)Ci(i.preRun.shift());Lt($t)}function Yt(){!i.noFSInit&&!qe.init.initialized&&qe.init(),Lt(dt)}function li(){qe.ignorePermissions=!1,Lt(wt)}function Zt(){if(i.postRun)for(typeof i.postRun=="function"&&(i.postRun=[i.postRun]);i.postRun.length;)Li(i.postRun.shift());Lt(bt)}function Ci(U){$t.unshift(U)}function Li(U){bt.unshift(U)}if((!Math.imul||Math.imul(4294967295,5)!==-5)&&(Math.imul=function($,ge){var De=$>>>16,ot=$&65535,Et=ge>>>16,Nt=ge&65535;return ot*Nt+(De*Nt+ot*Et<<16)|0}),!Math.fround){var Vt=new Float32Array(1);Math.fround=function(U){return Vt[0]=U,Vt[0]}}Math.clz32||(Math.clz32=function(U){var $=32,ge=U>>16;return ge&&($-=16,U=ge),ge=U>>8,ge&&($-=8,U=ge),ge=U>>4,ge&&($-=4,U=ge),ge=U>>2,ge&&($-=2,U=ge),ge=U>>1,ge?$-2:$-U}),Math.trunc||(Math.trunc=function(U){return U<0?Math.ceil(U):Math.floor(U)});var mi=Math.abs,Qi=Math.ceil,xi=Math.floor,Jt=Math.min,Me=0,Q=null;function ae(U){return U}function et(U){Me++,i.monitorRunDependencies&&i.monitorRunDependencies(Me)}function vt(U){if(Me--,i.monitorRunDependencies&&i.monitorRunDependencies(Me),Me==0&&Q){var $=Q;Q=null,$()}}i.preloadedImages={},i.preloadedAudios={};function Wt(U){i.onAbort&&i.onAbort(U),U+="",v(U),ee=!0,U="abort("+U+"). Build with -s ASSERTIONS=1 for more info.";var $=new V.RuntimeError(U);throw $}function di(U,$){return String.prototype.startsWith?U.startsWith($):U.indexOf($)===0}var xn="data:application/octet-stream;base64,";function Mn(U){return di(U,xn)}var fn="webp.wasm";Mn(fn)||(fn=m(fn));function Bi(){try{if(O)return new Uint8Array(O);var U=Vs(fn);if(U)return U;if(!y)throw"both async and sync fetching of the wasm failed"}catch($){Wt($)}}function en(){return!O&&l&&typeof fetch=="function"?fetch(fn,{credentials:"same-origin"}).then(function(U){if(!U.ok)throw"failed to load wasm binary file at '"+fn+"'";return U.arrayBuffer()}).catch(function(){return Bi()}):e.resolve().then(Bi)}function Xn(){var U={env:vs,wasi_snapshot_preview1:vs};function $(Nt,zt){var bi=Nt.exports;i.asm=bi,vt()}et();function ge(Nt){$(Nt.instance)}function De(Nt){return en().then(function(zt){return V.instantiate(zt,U)}).then(Nt,function(zt){v("failed to asynchronously prepare wasm: "+zt),Wt(zt)})}function ot(){if(!O&&typeof V.instantiateStreaming=="function"&&!Mn(fn)&&typeof fetch=="function")fetch(fn,{credentials:"same-origin"}).then(function(Nt){var zt=V.instantiateStreaming(Nt,U);return zt.then(ge,function(bi){return v("wasm streaming compile failed: "+bi),v("falling back to ArrayBuffer instantiation"),De(ge)})});else return De(ge)}if(i.instantiateWasm)try{var Et=i.instantiateWasm(U,$);return Et}catch(Nt){return v("Module.instantiateWasm callback failed with error: "+Nt),!1}return ot(),{}}var Yn,Kr;dt.push({func:function(){Ca()}});function jn(U){return U}function cn(U){var $=/\b_Z[\w\d_]+/g;return U.replace($,function(ge){var De=ge;return ge===De?ge:De+" ["+ge+"]"})}function mn(){var U=new Error;if(!U.stack){try{throw new Error}catch($){U=$}if(!U.stack)return"(no stack trace available)"}return U.stack.toString()}function er(){var U=mn();return i.extraStackTrace&&(U+=`
`+i.extraStackTrace()),cn(U)}function yn(U){return he[kl()>>2]=U,U}var Ln={splitPath:function(U){var $=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/;return $.exec(U).slice(1)},normalizeArray:function(U,$){for(var ge=0,De=U.length-1;De>=0;De--){var ot=U[De];ot==="."?U.splice(De,1):ot===".."?(U.splice(De,1),ge++):ge&&(U.splice(De,1),ge--)}if($)for(;ge;ge--)U.unshift("..");return U},normalize:function(U){var $=U.charAt(0)==="/",ge=U.substr(-1)==="/";return U=Ln.normalizeArray(U.split("/").filter(function(De){return!!De}),!$).join("/"),!U&&!$&&(U="."),U&&ge&&(U+="/"),($?"/":"")+U},dirname:function(U){var $=Ln.splitPath(U),ge=$[0],De=$[1];return!ge&&!De?".":(De&&(De=De.substr(0,De.length-1)),ge+De)},basename:function(U){if(U==="/")return"/";U=Ln.normalize(U),U=U.replace(/\/$/,"");var $=U.lastIndexOf("/");return $===-1?U:U.substr($+1)},extname:function(U){return Ln.splitPath(U)[3]},join:function(){var U=Array.prototype.slice.call(arguments,0);return Ln.normalize(U.join("/"))},join2:function(U,$){return Ln.normalize(U+"/"+$)}},lr={resolve:function(){for(var U="",$=!1,ge=arguments.length-1;ge>=-1&&!$;ge--){var De=ge>=0?arguments[ge]:qe.cwd();if(typeof De!="string")throw new TypeError("Arguments to path.resolve must be strings");if(!De)return"";U=De+"/"+U,$=De.charAt(0)==="/"}return U=Ln.normalizeArray(U.split("/").filter(function(ot){return!!ot}),!$).join("/"),($?"/":"")+U||"."},relative:function(U,$){U=lr.resolve(U).substr(1),$=lr.resolve($).substr(1);function ge(yi){for(var _i=0;_i<yi.length&&yi[_i]==="";_i++);for(var ui=yi.length-1;ui>=0&&yi[ui]==="";ui--);return _i>ui?[]:yi.slice(_i,ui-_i+1)}for(var De=ge(U.split("/")),ot=ge($.split("/")),Et=Math.min(De.length,ot.length),Nt=Et,zt=0;zt<Et;zt++)if(De[zt]!==ot[zt]){Nt=zt;break}for(var bi=[],zt=Nt;zt<De.length;zt++)bi.push("..");return bi=bi.concat(ot.slice(Nt)),bi.join("/")}},oo={ttys:[],init:function(){},shutdown:function(){},register:function(U,$){oo.ttys[U]={input:[],output:[],ops:$},qe.registerDevice(U,oo.stream_ops)},stream_ops:{open:function(U){var $=oo.ttys[U.node.rdev];if(!$)throw new qe.ErrnoError(43);U.tty=$,U.seekable=!1},close:function(U){U.tty.ops.flush(U.tty)},flush:function(U){U.tty.ops.flush(U.tty)},read:function(U,$,ge,De,ot){if(!U.tty||!U.tty.ops.get_char)throw new qe.ErrnoError(60);for(var Et=0,Nt=0;Nt<De;Nt++){var zt;try{zt=U.tty.ops.get_char(U.tty)}catch{throw new qe.ErrnoError(29)}if(zt===void 0&&Et===0)throw new qe.ErrnoError(6);if(zt==null)break;Et++,$[ge+Nt]=zt}return Et&&(U.node.timestamp=Date.now()),Et},write:function(U,$,ge,De,ot){if(!U.tty||!U.tty.ops.put_char)throw new qe.ErrnoError(60);try{for(var Et=0;Et<De;Et++)U.tty.ops.put_char(U.tty,$[ge+Et])}catch{throw new qe.ErrnoError(29)}return De&&(U.node.timestamp=Date.now()),Et}},default_tty_ops:{get_char:function(U){if(!U.input.length){var $=null;if(typeof window<"u"&&typeof window.prompt=="function"?($=window.prompt("Input: "),$!==null&&($+=`
`)):typeof readline=="function"&&($=readline(),$!==null&&($+=`
`)),!$)return null;U.input=Xo($,!0)}return U.input.shift()},put_char:function(U,$){$===null||$===10?(b(Te(U.output,0)),U.output=[]):$!=0&&U.output.push($)},flush:function(U){U.output&&U.output.length>0&&(b(Te(U.output,0)),U.output=[])}},default_tty1_ops:{put_char:function(U,$){$===null||$===10?(v(Te(U.output,0)),U.output=[]):$!=0&&U.output.push($)},flush:function(U){U.output&&U.output.length>0&&(v(Te(U.output,0)),U.output=[])}}},ln={ops_table:null,mount:function(U){return ln.createNode(null,"/",16895,0)},createNode:function(U,$,ge,De){if(qe.isBlkdev(ge)||qe.isFIFO(ge))throw new qe.ErrnoError(63);ln.ops_table||(ln.ops_table={dir:{node:{getattr:ln.node_ops.getattr,setattr:ln.node_ops.setattr,lookup:ln.node_ops.lookup,mknod:ln.node_ops.mknod,rename:ln.node_ops.rename,unlink:ln.node_ops.unlink,rmdir:ln.node_ops.rmdir,readdir:ln.node_ops.readdir,symlink:ln.node_ops.symlink},stream:{llseek:ln.stream_ops.llseek}},file:{node:{getattr:ln.node_ops.getattr,setattr:ln.node_ops.setattr},stream:{llseek:ln.stream_ops.llseek,read:ln.stream_ops.read,write:ln.stream_ops.write,allocate:ln.stream_ops.allocate,mmap:ln.stream_ops.mmap,msync:ln.stream_ops.msync}},link:{node:{getattr:ln.node_ops.getattr,setattr:ln.node_ops.setattr,readlink:ln.node_ops.readlink},stream:{}},chrdev:{node:{getattr:ln.node_ops.getattr,setattr:ln.node_ops.setattr},stream:qe.chrdev_stream_ops}});var ot=qe.createNode(U,$,ge,De);return qe.isDir(ot.mode)?(ot.node_ops=ln.ops_table.dir.node,ot.stream_ops=ln.ops_table.dir.stream,ot.contents={}):qe.isFile(ot.mode)?(ot.node_ops=ln.ops_table.file.node,ot.stream_ops=ln.ops_table.file.stream,ot.usedBytes=0,ot.contents=null):qe.isLink(ot.mode)?(ot.node_ops=ln.ops_table.link.node,ot.stream_ops=ln.ops_table.link.stream):qe.isChrdev(ot.mode)&&(ot.node_ops=ln.ops_table.chrdev.node,ot.stream_ops=ln.ops_table.chrdev.stream),ot.timestamp=Date.now(),U&&(U.contents[$]=ot),ot},getFileDataAsRegularArray:function(U){if(U.contents&&U.contents.subarray){for(var $=[],ge=0;ge<U.usedBytes;++ge)$.push(U.contents[ge]);return $}return U.contents},getFileDataAsTypedArray:function(U){return U.contents?U.contents.subarray?U.contents.subarray(0,U.usedBytes):new Uint8Array(U.contents):new Uint8Array(0)},expandFileStorage:function(U,$){var ge=U.contents?U.contents.length:0;if(!(ge>=$)){var De=1024*1024;$=Math.max($,ge*(ge<De?2:1.125)>>>0),ge!=0&&($=Math.max($,256));var ot=U.contents;U.contents=new Uint8Array($),U.usedBytes>0&&U.contents.set(ot.subarray(0,U.usedBytes),0)}},resizeFileStorage:function(U,$){if(U.usedBytes!=$){if($==0){U.contents=null,U.usedBytes=0;return}if(!U.contents||U.contents.subarray){var ge=U.contents;U.contents=new Uint8Array($),ge&&U.contents.set(ge.subarray(0,Math.min($,U.usedBytes))),U.usedBytes=$;return}if(U.contents||(U.contents=[]),U.contents.length>$)U.contents.length=$;else for(;U.contents.length<$;)U.contents.push(0);U.usedBytes=$}},node_ops:{getattr:function(U){var $={};return $.dev=qe.isChrdev(U.mode)?U.id:1,$.ino=U.id,$.mode=U.mode,$.nlink=1,$.uid=0,$.gid=0,$.rdev=U.rdev,qe.isDir(U.mode)?$.size=4096:qe.isFile(U.mode)?$.size=U.usedBytes:qe.isLink(U.mode)?$.size=U.link.length:$.size=0,$.atime=new Date(U.timestamp),$.mtime=new Date(U.timestamp),$.ctime=new Date(U.timestamp),$.blksize=4096,$.blocks=Math.ceil($.size/$.blksize),$},setattr:function(U,$){$.mode!==void 0&&(U.mode=$.mode),$.timestamp!==void 0&&(U.timestamp=$.timestamp),$.size!==void 0&&ln.resizeFileStorage(U,$.size)},lookup:function(U,$){throw qe.genericErrors[44]},mknod:function(U,$,ge,De){return ln.createNode(U,$,ge,De)},rename:function(U,$,ge){if(qe.isDir(U.mode)){var De;try{De=qe.lookupNode($,ge)}catch{}if(De)for(var ot in De.contents)throw new qe.ErrnoError(55)}delete U.parent.contents[U.name],U.name=ge,$.contents[ge]=U,U.parent=$},unlink:function(U,$){delete U.contents[$]},rmdir:function(U,$){var ge=qe.lookupNode(U,$);for(var De in ge.contents)throw new qe.ErrnoError(55);delete U.contents[$]},readdir:function(U){var $=[".",".."];for(var ge in U.contents)!U.contents.hasOwnProperty(ge)||$.push(ge);return $},symlink:function(U,$,ge){var De=ln.createNode(U,$,41471,0);return De.link=ge,De},readlink:function(U){if(!qe.isLink(U.mode))throw new qe.ErrnoError(28);return U.link}},stream_ops:{read:function(U,$,ge,De,ot){var Et=U.node.contents;if(ot>=U.node.usedBytes)return 0;var Nt=Math.min(U.node.usedBytes-ot,De);if(Nt>8&&Et.subarray)$.set(Et.subarray(ot,ot+Nt),ge);else for(var zt=0;zt<Nt;zt++)$[ge+zt]=Et[ot+zt];return Nt},write:function(U,$,ge,De,ot,Et){if($.buffer===Be.buffer&&(Et=!1),!De)return 0;var Nt=U.node;if(Nt.timestamp=Date.now(),$.subarray&&(!Nt.contents||Nt.contents.subarray)){if(Et)return Nt.contents=$.subarray(ge,ge+De),Nt.usedBytes=De,De;if(Nt.usedBytes===0&&ot===0)return Nt.contents=$.slice(ge,ge+De),Nt.usedBytes=De,De;if(ot+De<=Nt.usedBytes)return Nt.contents.set($.subarray(ge,ge+De),ot),De}if(ln.expandFileStorage(Nt,ot+De),Nt.contents.subarray&&$.subarray)Nt.contents.set($.subarray(ge,ge+De),ot);else for(var zt=0;zt<De;zt++)Nt.contents[ot+zt]=$[ge+zt];return Nt.usedBytes=Math.max(Nt.usedBytes,ot+De),De},llseek:function(U,$,ge){var De=$;if(ge===1?De+=U.position:ge===2&&qe.isFile(U.node.mode)&&(De+=U.node.usedBytes),De<0)throw new qe.ErrnoError(28);return De},allocate:function(U,$,ge){ln.expandFileStorage(U.node,$+ge),U.node.usedBytes=Math.max(U.node.usedBytes,$+ge)},mmap:function(U,$,ge,De,ot,Et){if(J($===0),!qe.isFile(U.node.mode))throw new qe.ErrnoError(43);var Nt,zt,bi=U.node.contents;if(!(Et&2)&&bi.buffer===Ce)zt=!1,Nt=bi.byteOffset;else{if((De>0||De+ge<bi.length)&&(bi.subarray?bi=bi.subarray(De,De+ge):bi=Array.prototype.slice.call(bi,De,De+ge)),zt=!0,Nt=qe.mmapAlloc(ge),!Nt)throw new qe.ErrnoError(48);Be.set(bi,Nt)}return{ptr:Nt,allocated:zt}},msync:function(U,$,ge,De,ot){if(!qe.isFile(U.node.mode))throw new qe.ErrnoError(43);return ot&2||ln.stream_ops.write(U,$,0,De,ge,!1),0}}},qe={root:null,mounts:[],devices:{},streams:[],nextInode:1,nameTable:null,currentPath:"/",initialized:!1,ignorePermissions:!0,trackingDelegate:{},tracking:{openFlags:{READ:1,WRITE:2}},ErrnoError:null,genericErrors:{},filesystems:null,syncFSRequests:0,handleFSError:function(U){if(!(U instanceof qe.ErrnoError))throw U+" : "+er();return yn(U.errno)},lookupPath:function(U,$){if(U=lr.resolve(qe.cwd(),U),$=$||{},!U)return{path:"",node:null};var ge={follow_mount:!0,recurse_count:0};for(var De in ge)$[De]===void 0&&($[De]=ge[De]);if($.recurse_count>8)throw new qe.ErrnoError(32);for(var ot=Ln.normalizeArray(U.split("/").filter(function(ji){return!!ji}),!1),Et=qe.root,Nt="/",zt=0;zt<ot.length;zt++){var bi=zt===ot.length-1;if(bi&&$.parent)break;if(Et=qe.lookupNode(Et,ot[zt]),Nt=Ln.join2(Nt,ot[zt]),qe.isMountpoint(Et)&&(!bi||bi&&$.follow_mount)&&(Et=Et.mounted.root),!bi||$.follow)for(var yi=0;qe.isLink(Et.mode);){var _i=qe.readlink(Nt);Nt=lr.resolve(Ln.dirname(Nt),_i);var ui=qe.lookupPath(Nt,{recurse_count:$.recurse_count});if(Et=ui.node,yi++>40)throw new qe.ErrnoError(32)}}return{path:Nt,node:Et}},getPath:function(U){for(var $;;){if(qe.isRoot(U)){var ge=U.mount.mountpoint;return $?ge[ge.length-1]!=="/"?ge+"/"+$:ge+$:ge}$=$?U.name+"/"+$:U.name,U=U.parent}},hashName:function(U,$){for(var ge=0,De=0;De<$.length;De++)ge=(ge<<5)-ge+$.charCodeAt(De)|0;return(U+ge>>>0)%qe.nameTable.length},hashAddNode:function(U){var $=qe.hashName(U.parent.id,U.name);U.name_next=qe.nameTable[$],qe.nameTable[$]=U},hashRemoveNode:function(U){var $=qe.hashName(U.parent.id,U.name);if(qe.nameTable[$]===U)qe.nameTable[$]=U.name_next;else for(var ge=qe.nameTable[$];ge;){if(ge.name_next===U){ge.name_next=U.name_next;break}ge=ge.name_next}},lookupNode:function(U,$){var ge=qe.mayLookup(U);if(ge)throw new qe.ErrnoError(ge,U);for(var De=qe.hashName(U.id,$),ot=qe.nameTable[De];ot;ot=ot.name_next){var Et=ot.name;if(ot.parent.id===U.id&&Et===$)return ot}return qe.lookup(U,$)},createNode:function(U,$,ge,De){var ot=new qe.FSNode(U,$,ge,De);return qe.hashAddNode(ot),ot},destroyNode:function(U){qe.hashRemoveNode(U)},isRoot:function(U){return U===U.parent},isMountpoint:function(U){return!!U.mounted},isFile:function(U){return(U&61440)===32768},isDir:function(U){return(U&61440)===16384},isLink:function(U){return(U&61440)===40960},isChrdev:function(U){return(U&61440)===8192},isBlkdev:function(U){return(U&61440)===24576},isFIFO:function(U){return(U&61440)===4096},isSocket:function(U){return(U&49152)===49152},flagModes:{r:0,rs:1052672,"r+":2,w:577,wx:705,xw:705,"w+":578,"wx+":706,"xw+":706,a:1089,ax:1217,xa:1217,"a+":1090,"ax+":1218,"xa+":1218},modeStringToFlags:function(U){var $=qe.flagModes[U];if(typeof $>"u")throw new Error("Unknown file open mode: "+U);return $},flagsToPermissionString:function(U){var $=["r","w","rw"][U&3];return U&512&&($+="w"),$},nodePermissions:function(U,$){return qe.ignorePermissions?0:$.indexOf("r")!==-1&&!(U.mode&292)||$.indexOf("w")!==-1&&!(U.mode&146)||$.indexOf("x")!==-1&&!(U.mode&73)?2:0},mayLookup:function(U){var $=qe.nodePermissions(U,"x");return $||(U.node_ops.lookup?0:2)},mayCreate:function(U,$){try{var ge=qe.lookupNode(U,$);return 20}catch{}return qe.nodePermissions(U,"wx")},mayDelete:function(U,$,ge){var De;try{De=qe.lookupNode(U,$)}catch(Et){return Et.errno}var ot=qe.nodePermissions(U,"wx");if(ot)return ot;if(ge){if(!qe.isDir(De.mode))return 54;if(qe.isRoot(De)||qe.getPath(De)===qe.cwd())return 10}else if(qe.isDir(De.mode))return 31;return 0},mayOpen:function(U,$){return U?qe.isLink(U.mode)?32:qe.isDir(U.mode)&&(qe.flagsToPermissionString($)!=="r"||$&512)?31:qe.nodePermissions(U,qe.flagsToPermissionString($)):44},MAX_OPEN_FDS:4096,nextfd:function(U,$){U=U||0,$=$||qe.MAX_OPEN_FDS;for(var ge=U;ge<=$;ge++)if(!qe.streams[ge])return ge;throw new qe.ErrnoError(33)},getStream:function(U){return qe.streams[U]},createStream:function(U,$,ge){qe.FSStream||(qe.FSStream=function(){},qe.FSStream.prototype={object:{get:function(){return this.node},set:function(Nt){this.node=Nt}},isRead:{get:function(){return(this.flags&2097155)!==1}},isWrite:{get:function(){return(this.flags&2097155)!==0}},isAppend:{get:function(){return this.flags&1024}}});var De=new qe.FSStream;for(var ot in U)De[ot]=U[ot];U=De;var Et=qe.nextfd($,ge);return U.fd=Et,qe.streams[Et]=U,U},closeStream:function(U){qe.streams[U]=null},chrdev_stream_ops:{open:function(U){var $=qe.getDevice(U.node.rdev);U.stream_ops=$.stream_ops,U.stream_ops.open&&U.stream_ops.open(U)},llseek:function(){throw new qe.ErrnoError(70)}},major:function(U){return U>>8},minor:function(U){return U&255},makedev:function(U,$){return U<<8|$},registerDevice:function(U,$){qe.devices[U]={stream_ops:$}},getDevice:function(U){return qe.devices[U]},getMounts:function(U){for(var $=[],ge=[U];ge.length;){var De=ge.pop();$.push(De),ge.push.apply(ge,De.mounts)}return $},syncfs:function(U,$){typeof U=="function"&&($=U,U=!1),qe.syncFSRequests++,qe.syncFSRequests>1&&v("warning: "+qe.syncFSRequests+" FS.syncfs operations in flight at once, probably just doing extra work");var ge=qe.getMounts(qe.root.mount),De=0;function ot(Nt){return qe.syncFSRequests--,$(Nt)}function Et(Nt){if(Nt)return Et.errored?void 0:(Et.errored=!0,ot(Nt));++De>=ge.length&&ot(null)}ge.forEach(function(Nt){if(!Nt.type.syncfs)return Et(null);Nt.type.syncfs(Nt,U,Et)})},mount:function(U,$,ge){var De=ge==="/",ot=!ge,Et;if(De&&qe.root)throw new qe.ErrnoError(10);if(!De&&!ot){var Nt=qe.lookupPath(ge,{follow_mount:!1});if(ge=Nt.path,Et=Nt.node,qe.isMountpoint(Et))throw new qe.ErrnoError(10);if(!qe.isDir(Et.mode))throw new qe.ErrnoError(54)}var zt={type:U,opts:$,mountpoint:ge,mounts:[]},bi=U.mount(zt);return bi.mount=zt,zt.root=bi,De?qe.root=bi:Et&&(Et.mounted=zt,Et.mount&&Et.mount.mounts.push(zt)),bi},unmount:function(U){var $=qe.lookupPath(U,{follow_mount:!1});if(!qe.isMountpoint($.node))throw new qe.ErrnoError(28);var ge=$.node,De=ge.mounted,ot=qe.getMounts(De);Object.keys(qe.nameTable).forEach(function(Nt){for(var zt=qe.nameTable[Nt];zt;){var bi=zt.name_next;ot.indexOf(zt.mount)!==-1&&qe.destroyNode(zt),zt=bi}}),ge.mounted=null;var Et=ge.mount.mounts.indexOf(De);ge.mount.mounts.splice(Et,1)},lookup:function(U,$){return U.node_ops.lookup(U,$)},mknod:function(U,$,ge){var De=qe.lookupPath(U,{parent:!0}),ot=De.node,Et=Ln.basename(U);if(!Et||Et==="."||Et==="..")throw new qe.ErrnoError(28);var Nt=qe.mayCreate(ot,Et);if(Nt)throw new qe.ErrnoError(Nt);if(!ot.node_ops.mknod)throw new qe.ErrnoError(63);return ot.node_ops.mknod(ot,Et,$,ge)},create:function(U,$){return $=$!==void 0?$:438,$&=4095,$|=32768,qe.mknod(U,$,0)},mkdir:function(U,$){return $=$!==void 0?$:511,$&=1023,$|=16384,qe.mknod(U,$,0)},mkdirTree:function(U,$){for(var ge=U.split("/"),De="",ot=0;ot<ge.length;++ot)if(!!ge[ot]){De+="/"+ge[ot];try{qe.mkdir(De,$)}catch(Et){if(Et.errno!=20)throw Et}}},mkdev:function(U,$,ge){return typeof ge>"u"&&(ge=$,$=438),$|=8192,qe.mknod(U,$,ge)},symlink:function(U,$){if(!lr.resolve(U))throw new qe.ErrnoError(44);var ge=qe.lookupPath($,{parent:!0}),De=ge.node;if(!De)throw new qe.ErrnoError(44);var ot=Ln.basename($),Et=qe.mayCreate(De,ot);if(Et)throw new qe.ErrnoError(Et);if(!De.node_ops.symlink)throw new qe.ErrnoError(63);return De.node_ops.symlink(De,ot,U)},rename:function(U,$){var ge=Ln.dirname(U),De=Ln.dirname($),ot=Ln.basename(U),Et=Ln.basename($),Nt,zt,bi;if(Nt=qe.lookupPath(U,{parent:!0}),zt=Nt.node,Nt=qe.lookupPath($,{parent:!0}),bi=Nt.node,!zt||!bi)throw new qe.ErrnoError(44);if(zt.mount!==bi.mount)throw new qe.ErrnoError(75);var yi=qe.lookupNode(zt,ot),_i=lr.relative(U,De);if(_i.charAt(0)!==".")throw new qe.ErrnoError(28);if(_i=lr.relative($,ge),_i.charAt(0)!==".")throw new qe.ErrnoError(55);var ui;try{ui=qe.lookupNode(bi,Et)}catch{}if(yi!==ui){var ji=qe.isDir(yi.mode),an=qe.mayDelete(zt,ot,ji);if(an)throw new qe.ErrnoError(an);if(an=ui?qe.mayDelete(bi,Et,ji):qe.mayCreate(bi,Et),an)throw new qe.ErrnoError(an);if(!zt.node_ops.rename)throw new qe.ErrnoError(63);if(qe.isMountpoint(yi)||ui&&qe.isMountpoint(ui))throw new qe.ErrnoError(10);if(bi!==zt&&(an=qe.nodePermissions(zt,"w"),an))throw new qe.ErrnoError(an);try{qe.trackingDelegate.willMovePath&&qe.trackingDelegate.willMovePath(U,$)}catch(Tn){v("FS.trackingDelegate['willMovePath']('"+U+"', '"+$+"') threw an exception: "+Tn.message)}qe.hashRemoveNode(yi);try{zt.node_ops.rename(yi,bi,Et)}catch(Tn){throw Tn}finally{qe.hashAddNode(yi)}try{qe.trackingDelegate.onMovePath&&qe.trackingDelegate.onMovePath(U,$)}catch(Tn){v("FS.trackingDelegate['onMovePath']('"+U+"', '"+$+"') threw an exception: "+Tn.message)}}},rmdir:function(U){var $=qe.lookupPath(U,{parent:!0}),ge=$.node,De=Ln.basename(U),ot=qe.lookupNode(ge,De),Et=qe.mayDelete(ge,De,!0);if(Et)throw new qe.ErrnoError(Et);if(!ge.node_ops.rmdir)throw new qe.ErrnoError(63);if(qe.isMountpoint(ot))throw new qe.ErrnoError(10);try{qe.trackingDelegate.willDeletePath&&qe.trackingDelegate.willDeletePath(U)}catch(Nt){v("FS.trackingDelegate['willDeletePath']('"+U+"') threw an exception: "+Nt.message)}ge.node_ops.rmdir(ge,De),qe.destroyNode(ot);try{qe.trackingDelegate.onDeletePath&&qe.trackingDelegate.onDeletePath(U)}catch(Nt){v("FS.trackingDelegate['onDeletePath']('"+U+"') threw an exception: "+Nt.message)}},readdir:function(U){var $=qe.lookupPath(U,{follow:!0}),ge=$.node;if(!ge.node_ops.readdir)throw new qe.ErrnoError(54);return ge.node_ops.readdir(ge)},unlink:function(U){var $=qe.lookupPath(U,{parent:!0}),ge=$.node,De=Ln.basename(U),ot=qe.lookupNode(ge,De),Et=qe.mayDelete(ge,De,!1);if(Et)throw new qe.ErrnoError(Et);if(!ge.node_ops.unlink)throw new qe.ErrnoError(63);if(qe.isMountpoint(ot))throw new qe.ErrnoError(10);try{qe.trackingDelegate.willDeletePath&&qe.trackingDelegate.willDeletePath(U)}catch(Nt){v("FS.trackingDelegate['willDeletePath']('"+U+"') threw an exception: "+Nt.message)}ge.node_ops.unlink(ge,De),qe.destroyNode(ot);try{qe.trackingDelegate.onDeletePath&&qe.trackingDelegate.onDeletePath(U)}catch(Nt){v("FS.trackingDelegate['onDeletePath']('"+U+"') threw an exception: "+Nt.message)}},readlink:function(U){var $=qe.lookupPath(U),ge=$.node;if(!ge)throw new qe.ErrnoError(44);if(!ge.node_ops.readlink)throw new qe.ErrnoError(28);return lr.resolve(qe.getPath(ge.parent),ge.node_ops.readlink(ge))},stat:function(U,$){var ge=qe.lookupPath(U,{follow:!$}),De=ge.node;if(!De)throw new qe.ErrnoError(44);if(!De.node_ops.getattr)throw new qe.ErrnoError(63);return De.node_ops.getattr(De)},lstat:function(U){return qe.stat(U,!0)},chmod:function(U,$,ge){var De;if(typeof U=="string"){var ot=qe.lookupPath(U,{follow:!ge});De=ot.node}else De=U;if(!De.node_ops.setattr)throw new qe.ErrnoError(63);De.node_ops.setattr(De,{mode:$&4095|De.mode&-4096,timestamp:Date.now()})},lchmod:function(U,$){qe.chmod(U,$,!0)},fchmod:function(U,$){var ge=qe.getStream(U);if(!ge)throw new qe.ErrnoError(8);qe.chmod(ge.node,$)},chown:function(U,$,ge,De){var ot;if(typeof U=="string"){var Et=qe.lookupPath(U,{follow:!De});ot=Et.node}else ot=U;if(!ot.node_ops.setattr)throw new qe.ErrnoError(63);ot.node_ops.setattr(ot,{timestamp:Date.now()})},lchown:function(U,$,ge){qe.chown(U,$,ge,!0)},fchown:function(U,$,ge){var De=qe.getStream(U);if(!De)throw new qe.ErrnoError(8);qe.chown(De.node,$,ge)},truncate:function(U,$){if($<0)throw new qe.ErrnoError(28);var ge;if(typeof U=="string"){var De=qe.lookupPath(U,{follow:!0});ge=De.node}else ge=U;if(!ge.node_ops.setattr)throw new qe.ErrnoError(63);if(qe.isDir(ge.mode))throw new qe.ErrnoError(31);if(!qe.isFile(ge.mode))throw new qe.ErrnoError(28);var ot=qe.nodePermissions(ge,"w");if(ot)throw new qe.ErrnoError(ot);ge.node_ops.setattr(ge,{size:$,timestamp:Date.now()})},ftruncate:function(U,$){var ge=qe.getStream(U);if(!ge)throw new qe.ErrnoError(8);if((ge.flags&2097155)===0)throw new qe.ErrnoError(28);qe.truncate(ge.node,$)},utime:function(U,$,ge){var De=qe.lookupPath(U,{follow:!0}),ot=De.node;ot.node_ops.setattr(ot,{timestamp:Math.max($,ge)})},open:function(U,$,ge,De,ot){if(U==="")throw new qe.ErrnoError(44);$=typeof $=="string"?qe.modeStringToFlags($):$,ge=typeof ge>"u"?438:ge,$&64?ge=ge&4095|32768:ge=0;var Et;if(typeof U=="object")Et=U;else{U=Ln.normalize(U);try{var Nt=qe.lookupPath(U,{follow:!($&131072)});Et=Nt.node}catch{}}var zt=!1;if($&64)if(Et){if($&128)throw new qe.ErrnoError(20)}else Et=qe.mknod(U,ge,0),zt=!0;if(!Et)throw new qe.ErrnoError(44);if(qe.isChrdev(Et.mode)&&($&=-513),$&65536&&!qe.isDir(Et.mode))throw new qe.ErrnoError(54);if(!zt){var bi=qe.mayOpen(Et,$);if(bi)throw new qe.ErrnoError(bi)}$&512&&qe.truncate(Et,0),$&=-131713;var yi=qe.createStream({node:Et,path:qe.getPath(Et),flags:$,seekable:!0,position:0,stream_ops:Et.stream_ops,ungotten:[],error:!1},De,ot);yi.stream_ops.open&&yi.stream_ops.open(yi),i.logReadFiles&&!($&1)&&(qe.readFiles||(qe.readFiles={}),U in qe.readFiles||(qe.readFiles[U]=1,v("FS.trackingDelegate error on read file: "+U)));try{if(qe.trackingDelegate.onOpenFile){var _i=0;($&2097155)!==1&&(_i|=qe.tracking.openFlags.READ),($&2097155)!==0&&(_i|=qe.tracking.openFlags.WRITE),qe.trackingDelegate.onOpenFile(U,_i)}}catch(ui){v("FS.trackingDelegate['onOpenFile']('"+U+"', flags) threw an exception: "+ui.message)}return yi},close:function(U){if(qe.isClosed(U))throw new qe.ErrnoError(8);U.getdents&&(U.getdents=null);try{U.stream_ops.close&&U.stream_ops.close(U)}catch($){throw $}finally{qe.closeStream(U.fd)}U.fd=null},isClosed:function(U){return U.fd===null},llseek:function(U,$,ge){if(qe.isClosed(U))throw new qe.ErrnoError(8);if(!U.seekable||!U.stream_ops.llseek)throw new qe.ErrnoError(70);if(ge!=0&&ge!=1&&ge!=2)throw new qe.ErrnoError(28);return U.position=U.stream_ops.llseek(U,$,ge),U.ungotten=[],U.position},read:function(U,$,ge,De,ot){if(De<0||ot<0)throw new qe.ErrnoError(28);if(qe.isClosed(U))throw new qe.ErrnoError(8);if((U.flags&2097155)===1)throw new qe.ErrnoError(8);if(qe.isDir(U.node.mode))throw new qe.ErrnoError(31);if(!U.stream_ops.read)throw new qe.ErrnoError(28);var Et=typeof ot<"u";if(!Et)ot=U.position;else if(!U.seekable)throw new qe.ErrnoError(70);var Nt=U.stream_ops.read(U,$,ge,De,ot);return Et||(U.position+=Nt),Nt},write:function(U,$,ge,De,ot,Et){if(De<0||ot<0)throw new qe.ErrnoError(28);if(qe.isClosed(U))throw new qe.ErrnoError(8);if((U.flags&2097155)===0)throw new qe.ErrnoError(8);if(qe.isDir(U.node.mode))throw new qe.ErrnoError(31);if(!U.stream_ops.write)throw new qe.ErrnoError(28);U.seekable&&U.flags&1024&&qe.llseek(U,0,2);var Nt=typeof ot<"u";if(!Nt)ot=U.position;else if(!U.seekable)throw new qe.ErrnoError(70);var zt=U.stream_ops.write(U,$,ge,De,ot,Et);Nt||(U.position+=zt);try{U.path&&qe.trackingDelegate.onWriteToFile&&qe.trackingDelegate.onWriteToFile(U.path)}catch(bi){v("FS.trackingDelegate['onWriteToFile']('"+U.path+"') threw an exception: "+bi.message)}return zt},allocate:function(U,$,ge){if(qe.isClosed(U))throw new qe.ErrnoError(8);if($<0||ge<=0)throw new qe.ErrnoError(28);if((U.flags&2097155)===0)throw new qe.ErrnoError(8);if(!qe.isFile(U.node.mode)&&!qe.isDir(U.node.mode))throw new qe.ErrnoError(43);if(!U.stream_ops.allocate)throw new qe.ErrnoError(138);U.stream_ops.allocate(U,$,ge)},mmap:function(U,$,ge,De,ot,Et){if((ot&2)!==0&&(Et&2)===0&&(U.flags&2097155)!==2)throw new qe.ErrnoError(2);if((U.flags&2097155)===1)throw new qe.ErrnoError(2);if(!U.stream_ops.mmap)throw new qe.ErrnoError(43);return U.stream_ops.mmap(U,$,ge,De,ot,Et)},msync:function(U,$,ge,De,ot){return!U||!U.stream_ops.msync?0:U.stream_ops.msync(U,$,ge,De,ot)},munmap:function(U){return 0},ioctl:function(U,$,ge){if(!U.stream_ops.ioctl)throw new qe.ErrnoError(59);return U.stream_ops.ioctl(U,$,ge)},readFile:function(U,$){if($=$||{},$.flags=$.flags||"r",$.encoding=$.encoding||"binary",$.encoding!=="utf8"&&$.encoding!=="binary")throw new Error('Invalid encoding type "'+$.encoding+'"');var ge,De=qe.open(U,$.flags),ot=qe.stat(U),Et=ot.size,Nt=new Uint8Array(Et);return qe.read(De,Nt,0,Et,0),$.encoding==="utf8"?ge=Te(Nt,0):$.encoding==="binary"&&(ge=Nt),qe.close(De),ge},writeFile:function(U,$,ge){ge=ge||{},ge.flags=ge.flags||"w";var De=qe.open(U,ge.flags,ge.mode);if(typeof $=="string"){var ot=new Uint8Array(nt($)+1),Et=ve($,ot,0,ot.length);qe.write(De,ot,0,Et,void 0,ge.canOwn)}else if(ArrayBuffer.isView($))qe.write(De,$,0,$.byteLength,void 0,ge.canOwn);else throw new Error("Unsupported data type");qe.close(De)},cwd:function(){return qe.currentPath},chdir:function(U){var $=qe.lookupPath(U,{follow:!0});if($.node===null)throw new qe.ErrnoError(44);if(!qe.isDir($.node.mode))throw new qe.ErrnoError(54);var ge=qe.nodePermissions($.node,"x");if(ge)throw new qe.ErrnoError(ge);qe.currentPath=$.path},createDefaultDirectories:function(){qe.mkdir("/tmp"),qe.mkdir("/home"),qe.mkdir("/home/web_user")},createDefaultDevices:function(){qe.mkdir("/dev"),qe.registerDevice(qe.makedev(1,3),{read:function(){return 0},write:function(ge,De,ot,Et,Nt){return Et}}),qe.mkdev("/dev/null",qe.makedev(1,3)),oo.register(qe.makedev(5,0),oo.default_tty_ops),oo.register(qe.makedev(6,0),oo.default_tty1_ops),qe.mkdev("/dev/tty",qe.makedev(5,0)),qe.mkdev("/dev/tty1",qe.makedev(6,0));var U;if(typeof crypto=="object"&&typeof crypto.getRandomValues=="function"){var $=new Uint8Array(1);U=function(){return crypto.getRandomValues($),$[0]}}U||(U=function(){Wt("random_device")}),qe.createDevice("/dev","random",U),qe.createDevice("/dev","urandom",U),qe.mkdir("/dev/shm"),qe.mkdir("/dev/shm/tmp")},createSpecialDirectories:function(){qe.mkdir("/proc"),qe.mkdir("/proc/self"),qe.mkdir("/proc/self/fd"),qe.mount({mount:function(){var U=qe.createNode("/proc/self","fd",16895,73);return U.node_ops={lookup:function($,ge){var De=+ge,ot=qe.getStream(De);if(!ot)throw new qe.ErrnoError(8);var Et={parent:null,mount:{mountpoint:"fake"},node_ops:{readlink:function(){return ot.path}}};return Et.parent=Et,Et}},U}},{},"/proc/self/fd")},createStandardStreams:function(){i.stdin?qe.createDevice("/dev","stdin",i.stdin):qe.symlink("/dev/tty","/dev/stdin"),i.stdout?qe.createDevice("/dev","stdout",null,i.stdout):qe.symlink("/dev/tty","/dev/stdout"),i.stderr?qe.createDevice("/dev","stderr",null,i.stderr):qe.symlink("/dev/tty1","/dev/stderr"),qe.open("/dev/stdin","r"),qe.open("/dev/stdout","w"),qe.open("/dev/stderr","w")},ensureErrnoError:function(){qe.ErrnoError||(qe.ErrnoError=function($,ge){this.node=ge,this.setErrno=function(De){this.errno=De},this.setErrno($),this.message="FS error"},qe.ErrnoError.prototype=new Error,qe.ErrnoError.prototype.constructor=qe.ErrnoError,[44].forEach(function(U){qe.genericErrors[U]=new qe.ErrnoError(U),qe.genericErrors[U].stack="<generic error, no stack>"}))},staticInit:function(){qe.ensureErrnoError(),qe.nameTable=new Array(4096),qe.mount(ln,{},"/"),qe.createDefaultDirectories(),qe.createDefaultDevices(),qe.createSpecialDirectories(),qe.filesystems={MEMFS:ln}},init:function(U,$,ge){qe.init.initialized=!0,qe.ensureErrnoError(),i.stdin=U||i.stdin,i.stdout=$||i.stdout,i.stderr=ge||i.stderr,qe.createStandardStreams()},quit:function(){qe.init.initialized=!1;var U=i._fflush;U&&U(0);for(var $=0;$<qe.streams.length;$++){var ge=qe.streams[$];!ge||qe.close(ge)}},getMode:function(U,$){var ge=0;return U&&(ge|=365),$&&(ge|=146),ge},joinPath:function(U,$){var ge=Ln.join.apply(null,U);return $&&ge[0]=="/"&&(ge=ge.substr(1)),ge},absolutePath:function(U,$){return lr.resolve($,U)},standardizePath:function(U){return Ln.normalize(U)},findObject:function(U,$){var ge=qe.analyzePath(U,$);return ge.exists?ge.object:(yn(ge.error),null)},analyzePath:function(U,$){try{var ge=qe.lookupPath(U,{follow:!$});U=ge.path}catch{}var De={isRoot:!1,exists:!1,error:0,name:null,path:null,object:null,parentExists:!1,parentPath:null,parentObject:null};try{var ge=qe.lookupPath(U,{parent:!0});De.parentExists=!0,De.parentPath=ge.path,De.parentObject=ge.node,De.name=Ln.basename(U),ge=qe.lookupPath(U,{follow:!$}),De.exists=!0,De.path=ge.path,De.object=ge.node,De.name=ge.node.name,De.isRoot=ge.path==="/"}catch(ot){De.error=ot.errno}return De},createFolder:function(U,$,ge,De){var ot=Ln.join2(typeof U=="string"?U:qe.getPath(U),$),Et=qe.getMode(ge,De);return qe.mkdir(ot,Et)},createPath:function(U,$,ge,De){U=typeof U=="string"?U:qe.getPath(U);for(var ot=$.split("/").reverse();ot.length;){var Et=ot.pop();if(!!Et){var Nt=Ln.join2(U,Et);try{qe.mkdir(Nt)}catch{}U=Nt}}return Nt},createFile:function(U,$,ge,De,ot){var Et=Ln.join2(typeof U=="string"?U:qe.getPath(U),$),Nt=qe.getMode(De,ot);return qe.create(Et,Nt)},createDataFile:function(U,$,ge,De,ot,Et){var Nt=$?Ln.join2(typeof U=="string"?U:qe.getPath(U),$):U,zt=qe.getMode(De,ot),bi=qe.create(Nt,zt);if(ge){if(typeof ge=="string"){for(var yi=new Array(ge.length),_i=0,ui=ge.length;_i<ui;++_i)yi[_i]=ge.charCodeAt(_i);ge=yi}qe.chmod(bi,zt|146);var ji=qe.open(bi,"w");qe.write(ji,ge,0,ge.length,0,Et),qe.close(ji),qe.chmod(bi,zt)}return bi},createDevice:function(U,$,ge,De){var ot=Ln.join2(typeof U=="string"?U:qe.getPath(U),$),Et=qe.getMode(!!ge,!!De);qe.createDevice.major||(qe.createDevice.major=64);var Nt=qe.makedev(qe.createDevice.major++,0);return qe.registerDevice(Nt,{open:function(zt){zt.seekable=!1},close:function(zt){De&&De.buffer&&De.buffer.length&&De(10)},read:function(zt,bi,yi,_i,ui){for(var ji=0,an=0;an<_i;an++){var Tn;try{Tn=ge()}catch{throw new qe.ErrnoError(29)}if(Tn===void 0&&ji===0)throw new qe.ErrnoError(6);if(Tn==null)break;ji++,bi[yi+an]=Tn}return ji&&(zt.node.timestamp=Date.now()),ji},write:function(zt,bi,yi,_i,ui){for(var ji=0;ji<_i;ji++)try{De(bi[yi+ji])}catch{throw new qe.ErrnoError(29)}return _i&&(zt.node.timestamp=Date.now()),ji}}),qe.mkdev(ot,Et,Nt)},createLink:function(U,$,ge,De,ot){var Et=Ln.join2(typeof U=="string"?U:qe.getPath(U),$);return qe.symlink(ge,Et)},forceLoadFile:function(U){if(U.isDevice||U.isFolder||U.link||U.contents)return!0;var $=!0;if(typeof XMLHttpRequest<"u")throw new Error("Lazy loading should have been performed (contents set) in createLazyFile, but it was not. Lazy loading only works in web workers. Use --embed-file or --preload-file in emcc on the main thread.");if(r)try{U.contents=Xo(r(U.url),!0),U.usedBytes=U.contents.length}catch{$=!1}else throw new Error("Cannot load without read() or XMLHttpRequest.");return $||yn(29),$},createLazyFile:function(U,$,ge,De,ot){function Et(){this.lengthKnown=!1,this.chunks=[]}if(Et.prototype.get=function(ji){if(!(ji>this.length-1||ji<0)){var an=ji%this.chunkSize,Tn=ji/this.chunkSize|0;return this.getter(Tn)[an]}},Et.prototype.setDataGetter=function(ji){this.getter=ji},Et.prototype.cacheLength=function(){var ji=new XMLHttpRequest;if(ji.open("HEAD",ge,!1),ji.send(null),!(ji.status>=200&&ji.status<300||ji.status===304))throw new Error("Couldn't load "+ge+". Status: "+ji.status);var an=Number(ji.getResponseHeader("Content-length")),Tn,ft=(Tn=ji.getResponseHeader("Accept-Ranges"))&&Tn==="bytes",p=(Tn=ji.getResponseHeader("Content-Encoding"))&&Tn==="gzip",Di=1024*1024;ft||(Di=an);var c=function(pn,Qn){if(pn>Qn)throw new Error("invalid range ("+pn+", "+Qn+") or no bytes requested!");if(Qn>an-1)throw new Error("only "+an+" bytes available! programmer error!");var wo=new XMLHttpRequest;if(wo.open("GET",ge,!1),an!==Di&&wo.setRequestHeader("Range","bytes="+pn+"-"+Qn),typeof Uint8Array<"u"&&(wo.responseType="arraybuffer"),wo.overrideMimeType&&wo.overrideMimeType("text/plain; charset=x-user-defined"),wo.send(null),!(wo.status>=200&&wo.status<300||wo.status===304))throw new Error("Couldn't load "+ge+". Status: "+wo.status);return wo.response!==void 0?new Uint8Array(wo.response||[]):Xo(wo.responseText||"",!0)},F=this;F.setDataGetter(function(pn){var Qn=pn*Di,wo=(pn+1)*Di-1;if(wo=Math.min(wo,an-1),typeof F.chunks[pn]>"u"&&(F.chunks[pn]=c(Qn,wo)),typeof F.chunks[pn]>"u")throw new Error("doXHR failed!");return F.chunks[pn]}),(p||!an)&&(Di=an=1,an=this.getter(0).length,Di=an,b("LazyFiles on gzip forces download of the whole file when length is accessed")),this._length=an,this._chunkSize=Di,this.lengthKnown=!0},typeof XMLHttpRequest<"u"){throw"Cannot do synchronous binary XHRs outside webworkers in modern browsers. Use --embed-file or --preload-file in emcc";var Nt,zt}else var zt={isDevice:!1,url:ge};var bi=qe.createFile(U,$,zt,De,ot);zt.contents?bi.contents=zt.contents:zt.url&&(bi.contents=null,bi.url=zt.url),Object.defineProperties(bi,{usedBytes:{get:function(){return this.contents.length}}});var yi={},_i=Object.keys(bi.stream_ops);return _i.forEach(function(ui){var ji=bi.stream_ops[ui];yi[ui]=function(){if(!qe.forceLoadFile(bi))throw new qe.ErrnoError(29);return ji.apply(null,arguments)}}),yi.read=function(ji,an,Tn,ft,p){if(!qe.forceLoadFile(bi))throw new qe.ErrnoError(29);var Di=ji.node.contents;if(p>=Di.length)return 0;var c=Math.min(Di.length-p,ft);if(Di.slice)for(var F=0;F<c;F++)an[Tn+F]=Di[p+F];else for(var F=0;F<c;F++)an[Tn+F]=Di.get(p+F);return c},bi.stream_ops=yi,bi},createPreloadedFile:function(U,$,ge,De,ot,Et,Nt,zt,bi,yi){Pe.init();var _i=$?lr.resolve(Ln.join2(U,$)):U;function ui(ji){function an(ft){yi&&yi(),zt||qe.createDataFile(U,$,ft,De,ot,bi),Et&&Et(),vt()}var Tn=!1;i.preloadPlugins.forEach(function(ft){Tn||ft.canHandle(_i)&&(ft.handle(ji,_i,an,function(){Nt&&Nt(),vt()}),Tn=!0)}),Tn||an(ji)}et(),typeof ge=="string"?Pe.asyncLoad(ge,function(ji){ui(ji)},Nt):ui(ge)},indexedDB:function(){return window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB},DB_NAME:function(){return"EM_FS_"+window.location.pathname},DB_VERSION:20,DB_STORE_NAME:"FILE_DATA",saveFilesToDB:function(U,$,ge){$=$||function(){},ge=ge||function(){};var De=qe.indexedDB();try{var ot=De.open(qe.DB_NAME(),qe.DB_VERSION)}catch(Et){return ge(Et)}ot.onupgradeneeded=function(){b("creating db");var Nt=ot.result;Nt.createObjectStore(qe.DB_STORE_NAME)},ot.onsuccess=function(){var Nt=ot.result,zt=Nt.transaction([qe.DB_STORE_NAME],"readwrite"),bi=zt.objectStore(qe.DB_STORE_NAME),yi=0,_i=0,ui=U.length;function ji(){_i==0?$():ge()}U.forEach(function(an){var Tn=bi.put(qe.analyzePath(an).object.contents,an);Tn.onsuccess=function(){yi++,yi+_i==ui&&ji()},Tn.onerror=function(){_i++,yi+_i==ui&&ji()}}),zt.onerror=ge},ot.onerror=ge},loadFilesFromDB:function(U,$,ge){$=$||function(){},ge=ge||function(){};var De=qe.indexedDB();try{var ot=De.open(qe.DB_NAME(),qe.DB_VERSION)}catch(Et){return ge(Et)}ot.onupgradeneeded=ge,ot.onsuccess=function(){var Nt=ot.result;try{var zt=Nt.transaction([qe.DB_STORE_NAME],"readonly")}catch(an){ge(an);return}var bi=zt.objectStore(qe.DB_STORE_NAME),yi=0,_i=0,ui=U.length;function ji(){_i==0?$():ge()}U.forEach(function(an){var Tn=bi.get(an);Tn.onsuccess=function(){qe.analyzePath(an).exists&&qe.unlink(an),qe.createDataFile(Ln.dirname(an),Ln.basename(an),Tn.result,!0,!0,!0),yi++,yi+_i==ui&&ji()},Tn.onerror=function(){_i++,yi+_i==ui&&ji()}}),zt.onerror=ge},ot.onerror=ge},mmapAlloc:function(U){for(var $=x(U,16384),ge=qs($);U<$;)Be[ge+U++]=0;return ge}};function To(U,$){if(Pe.mainLoop.timingMode=U,Pe.mainLoop.timingValue=$,!Pe.mainLoop.func)return 1;if(U==0)Pe.mainLoop.scheduler=function(){var Nt=Math.max(0,Pe.mainLoop.tickStartTime+$-bo())|0;setTimeout(Pe.mainLoop.runner,Nt)},Pe.mainLoop.method="timeout";else if(U==1)Pe.mainLoop.scheduler=function(){Pe.requestAnimationFrame(Pe.mainLoop.runner)},Pe.mainLoop.method="rAF";else if(U==2){if(typeof setImmediate>"u"){var ge=[],De="setimmediate",ot=function(Et){(Et.data===De||Et.data.target===De)&&(Et.stopPropagation(),ge.shift()())};addEventListener("message",ot,!0),setImmediate=function(Nt){ge.push(Nt),postMessage(De,"*")}}Pe.mainLoop.scheduler=function(){setImmediate(Pe.mainLoop.runner)},Pe.mainLoop.method="immediate"}return 0}var bo;typeof performance<"u"&&performance.now?bo=function(){return performance.now()}:bo=Date.now;function co(U,$,ge,De,ot){J(!Pe.mainLoop.func,"emscripten_set_main_loop: there can only be one main loop function at once: call emscripten_cancel_main_loop to cancel the previous one before setting a new one with different parameters."),Pe.mainLoop.func=U,Pe.mainLoop.arg=De;var Et;typeof De<"u"?Et=function(){i.dynCall_vi(U,De)}:Et=function(){i.dynCall_v(U)};var Nt=Pe.mainLoop.currentlyRunningMainloop;if(Pe.mainLoop.runner=function(){if(!ee){if(Pe.mainLoop.queue.length>0){var bi=Date.now(),yi=Pe.mainLoop.queue.shift();if(yi.func(yi.arg),Pe.mainLoop.remainingBlockers){var _i=Pe.mainLoop.remainingBlockers,ui=_i%1==0?_i-1:Math.floor(_i);yi.counted?Pe.mainLoop.remainingBlockers=ui:(ui=ui+.5,Pe.mainLoop.remainingBlockers=(8*_i+ui)/9)}if(console.log('main loop blocker "'+yi.name+'" took '+(Date.now()-bi)+" ms"),Pe.mainLoop.updateStatus(),Nt<Pe.mainLoop.currentlyRunningMainloop)return;setTimeout(Pe.mainLoop.runner,0);return}if(!(Nt<Pe.mainLoop.currentlyRunningMainloop)){if(Pe.mainLoop.currentFrameNumber=Pe.mainLoop.currentFrameNumber+1|0,Pe.mainLoop.timingMode==1&&Pe.mainLoop.timingValue>1&&Pe.mainLoop.currentFrameNumber%Pe.mainLoop.timingValue!=0){Pe.mainLoop.scheduler();return}else Pe.mainLoop.timingMode==0&&(Pe.mainLoop.tickStartTime=bo());Pe.mainLoop.runIter(Et),!(Nt<Pe.mainLoop.currentlyRunningMainloop)&&(typeof Ge=="object"&&Ge.audio&&Ge.audio.queueNewAudioData&&Ge.audio.queueNewAudioData(),Pe.mainLoop.scheduler())}}},ot||($&&$>0?To(0,1e3/$):To(1,1),Pe.mainLoop.scheduler()),ge)throw"unwind"}var Pe={mainLoop:{scheduler:null,method:"",currentlyRunningMainloop:0,func:null,arg:0,timingMode:0,timingValue:0,currentFrameNumber:0,queue:[],pause:function(){Pe.mainLoop.scheduler=null,Pe.mainLoop.currentlyRunningMainloop++},resume:function(){Pe.mainLoop.currentlyRunningMainloop++;var U=Pe.mainLoop.timingMode,$=Pe.mainLoop.timingValue,ge=Pe.mainLoop.func;Pe.mainLoop.func=null,co(ge,0,!1,Pe.mainLoop.arg,!0),To(U,$),Pe.mainLoop.scheduler()},updateStatus:function(){if(i.setStatus){var U=i.statusMessage||"Please wait...",$=Pe.mainLoop.remainingBlockers,ge=Pe.mainLoop.expectedBlockers;$?$<ge?i.setStatus(U+" ("+(ge-$)+"/"+ge+")"):i.setStatus(U):i.setStatus("")}},runIter:function(U){if(!ee){if(i.preMainLoop){var $=i.preMainLoop();if($===!1)return}try{U()}catch(ge){if(ge instanceof Co)return;if(ge=="unwind")return;throw ge&&typeof ge=="object"&&ge.stack&&v("exception thrown: "+[ge,ge.stack]),ge}i.postMainLoop&&i.postMainLoop()}}},isFullscreen:!1,pointerLock:!1,moduleContextCreatedCallbacks:[],workers:[],init:function(){if(i.preloadPlugins||(i.preloadPlugins=[]),Pe.initted)return;Pe.initted=!0;try{new Blob,Pe.hasBlobConstructor=!0}catch{Pe.hasBlobConstructor=!1,console.log("warning: no blob constructor, cannot create blobs with mimetypes")}Pe.BlobBuilder=typeof MozBlobBuilder<"u"?MozBlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:Pe.hasBlobConstructor?null:console.log("warning: no BlobBuilder"),Pe.URLObject=typeof window<"u"?window.URL?window.URL:window.webkitURL:void 0,!i.noImageDecoding&&typeof Pe.URLObject>"u"&&(console.log("warning: Browser does not support creating object URLs. Built-in browser image decoding will not be available."),i.noImageDecoding=!0);var U={};U.canHandle=function(Et){return!i.noImageDecoding&&/\.(jpg|jpeg|png|bmp)$/i.test(Et)},U.handle=function(Et,Nt,zt,bi){var yi=null;if(Pe.hasBlobConstructor)try{yi=new Blob([Et],{type:Pe.getMimetype(Nt)}),yi.size!==Et.length&&(yi=new Blob([new Uint8Array(Et).buffer],{type:Pe.getMimetype(Nt)}))}catch(an){C("Blob constructor present but fails: "+an+"; falling back to blob builder")}if(!yi){var _i=new Pe.BlobBuilder;_i.append(new Uint8Array(Et).buffer),yi=_i.getBlob()}var ui=Pe.URLObject.createObjectURL(yi),ji=new Image;ji.onload=function(){J(ji.complete,"Image "+Nt+" could not be decoded");var Tn=document.createElement("canvas");Tn.width=ji.width,Tn.height=ji.height;var ft=Tn.getContext("2d");ft.drawImage(ji,0,0),i.preloadedImages[Nt]=Tn,Pe.URLObject.revokeObjectURL(ui),zt&&zt(Et)},ji.onerror=function(Tn){console.log("Image "+ui+" could not be decoded"),bi&&bi()},ji.src=ui},i.preloadPlugins.push(U);var $={};$.canHandle=function(Et){return!i.noAudioDecoding&&Et.substr(-4)in{".ogg":1,".wav":1,".mp3":1}},$.handle=function(Et,Nt,zt,bi){var yi=!1;function _i(ft){yi||(yi=!0,i.preloadedAudios[Nt]=ft,zt&&zt(Et))}function ui(){yi||(yi=!0,i.preloadedAudios[Nt]=new Audio,bi&&bi())}if(Pe.hasBlobConstructor){try{var ji=new Blob([Et],{type:Pe.getMimetype(Nt)})}catch{return ui()}var an=Pe.URLObject.createObjectURL(ji),Tn=new Audio;Tn.addEventListener("canplaythrough",function(){_i(Tn)},!1),Tn.onerror=function(p){if(yi)return;console.log("warning: browser could not fully decode audio "+Nt+", trying slower base64 approach");function Di(c){for(var F="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",pn="=",Qn="",wo=0,re=0,Br=0;Br<c.length;Br++)for(wo=wo<<8|c[Br],re+=8;re>=6;){var da=wo>>re-6&63;re-=6,Qn+=F[da]}return re==2?(Qn+=F[(wo&3)<<4],Qn+=pn+pn):re==4&&(Qn+=F[(wo&15)<<2],Qn+=pn),Qn}Tn.src="data:audio/x-"+Nt.substr(-3)+";base64,"+Di(Et),_i(Tn)},Tn.src=an,Pe.safeSetTimeout(function(){_i(Tn)},1e4)}else return ui()},i.preloadPlugins.push($);function ge(){Pe.pointerLock=document.pointerLockElement===i.canvas||document.mozPointerLockElement===i.canvas||document.webkitPointerLockElement===i.canvas||document.msPointerLockElement===i.canvas}var De=i.canvas;De&&(De.requestPointerLock=De.requestPointerLock||De.mozRequestPointerLock||De.webkitRequestPointerLock||De.msRequestPointerLock||function(){},De.exitPointerLock=document.exitPointerLock||document.mozExitPointerLock||document.webkitExitPointerLock||document.msExitPointerLock||function(){},De.exitPointerLock=De.exitPointerLock.bind(document),document.addEventListener("pointerlockchange",ge,!1),document.addEventListener("mozpointerlockchange",ge,!1),document.addEventListener("webkitpointerlockchange",ge,!1),document.addEventListener("mspointerlockchange",ge,!1),i.elementPointerLock&&De.addEventListener("click",function(ot){!Pe.pointerLock&&i.canvas.requestPointerLock&&(i.canvas.requestPointerLock(),ot.preventDefault())},!1))},createContext:function(U,$,ge,De){if($&&i.ctx&&U==i.canvas)return i.ctx;var ot,Et;if($){var Nt={antialias:!1,alpha:!1,majorVersion:1};if(De)for(var zt in De)Nt[zt]=De[zt];typeof xt<"u"&&(Et=xt.createContext(U,Nt),Et&&(ot=xt.getContext(Et).GLctx))}else ot=U.getContext("2d");return ot?(ge&&($||J(typeof Nr>"u","cannot set in module if GLctx is used, but we are a non-GL context that would replace it"),i.ctx=ot,$&&xt.makeContextCurrent(Et),i.useWebGL=$,Pe.moduleContextCreatedCallbacks.forEach(function(bi){bi()}),Pe.init()),ot):null},destroyContext:function(U,$,ge){},fullscreenHandlersInstalled:!1,lockPointer:void 0,resizeCanvas:void 0,requestFullscreen:function(U,$){Pe.lockPointer=U,Pe.resizeCanvas=$,typeof Pe.lockPointer>"u"&&(Pe.lockPointer=!0),typeof Pe.resizeCanvas>"u"&&(Pe.resizeCanvas=!1);var ge=i.canvas;function De(){Pe.isFullscreen=!1;var Et=ge.parentNode;(document.fullscreenElement||document.mozFullScreenElement||document.msFullscreenElement||document.webkitFullscreenElement||document.webkitCurrentFullScreenElement)===Et?(ge.exitFullscreen=Pe.exitFullscreen,Pe.lockPointer&&ge.requestPointerLock(),Pe.isFullscreen=!0,Pe.resizeCanvas?Pe.setFullscreenCanvasSize():Pe.updateCanvasDimensions(ge)):(Et.parentNode.insertBefore(ge,Et),Et.parentNode.removeChild(Et),Pe.resizeCanvas?Pe.setWindowedCanvasSize():Pe.updateCanvasDimensions(ge)),i.onFullScreen&&i.onFullScreen(Pe.isFullscreen),i.onFullscreen&&i.onFullscreen(Pe.isFullscreen)}Pe.fullscreenHandlersInstalled||(Pe.fullscreenHandlersInstalled=!0,document.addEventListener("fullscreenchange",De,!1),document.addEventListener("mozfullscreenchange",De,!1),document.addEventListener("webkitfullscreenchange",De,!1),document.addEventListener("MSFullscreenChange",De,!1));var ot=document.createElement("div");ge.parentNode.insertBefore(ot,ge),ot.appendChild(ge),ot.requestFullscreen=ot.requestFullscreen||ot.mozRequestFullScreen||ot.msRequestFullscreen||(ot.webkitRequestFullscreen?function(){ot.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT)}:null)||(ot.webkitRequestFullScreen?function(){ot.webkitRequestFullScreen(Element.ALLOW_KEYBOARD_INPUT)}:null),ot.requestFullscreen()},exitFullscreen:function(){if(!Pe.isFullscreen)return!1;var U=document.exitFullscreen||document.cancelFullScreen||document.mozCancelFullScreen||document.msExitFullscreen||document.webkitCancelFullScreen||function(){};return U.apply(document,[]),!0},nextRAF:0,fakeRequestAnimationFrame:function(U){var $=Date.now();if(Pe.nextRAF===0)Pe.nextRAF=$+1e3/60;else for(;$+2>=Pe.nextRAF;)Pe.nextRAF+=1e3/60;var ge=Math.max(Pe.nextRAF-$,0);setTimeout(U,ge)},requestAnimationFrame:function(U){if(typeof requestAnimationFrame=="function"){requestAnimationFrame(U);return}var $=Pe.fakeRequestAnimationFrame;typeof window<"u"&&($=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame||window.oRequestAnimationFrame||$),$(U)},safeCallback:function(U){return function(){if(!ee)return U.apply(null,arguments)}},allowAsyncCallbacks:!0,queuedAsyncCallbacks:[],pauseAsyncCallbacks:function(){Pe.allowAsyncCallbacks=!1},resumeAsyncCallbacks:function(){if(Pe.allowAsyncCallbacks=!0,Pe.queuedAsyncCallbacks.length>0){var U=Pe.queuedAsyncCallbacks;Pe.queuedAsyncCallbacks=[],U.forEach(function($){$()})}},safeRequestAnimationFrame:function(U){return Pe.requestAnimationFrame(function(){ee||(Pe.allowAsyncCallbacks?U():Pe.queuedAsyncCallbacks.push(U))})},safeSetTimeout:function(U,$){return setTimeout(function(){ee||(Pe.allowAsyncCallbacks?U():Pe.queuedAsyncCallbacks.push(U))},$)},safeSetInterval:function(U,$){return setInterval(function(){ee||Pe.allowAsyncCallbacks&&U()},$)},getMimetype:function(U){return{jpg:"image/jpeg",jpeg:"image/jpeg",png:"image/png",bmp:"image/bmp",ogg:"audio/ogg",wav:"audio/wav",mp3:"audio/mpeg"}[U.substr(U.lastIndexOf(".")+1)]},getUserMedia:function(U){window.getUserMedia||(window.getUserMedia=navigator.getUserMedia||navigator.mozGetUserMedia),window.getUserMedia(U)},getMovementX:function(U){return U.movementX||U.mozMovementX||U.webkitMovementX||0},getMovementY:function(U){return U.movementY||U.mozMovementY||U.webkitMovementY||0},getMouseWheelDelta:function(U){var $=0;switch(U.type){case"DOMMouseScroll":$=U.detail/3;break;case"mousewheel":$=U.wheelDelta/120;break;case"wheel":switch($=U.deltaY,U.deltaMode){case 0:$/=100;break;case 1:$/=3;break;case 2:$*=80;break;default:throw"unrecognized mouse wheel delta mode: "+U.deltaMode}break;default:throw"unrecognized mouse wheel event: "+U.type}return $},mouseX:0,mouseY:0,mouseMovementX:0,mouseMovementY:0,touches:{},lastTouches:{},calculateMouseEvent:function(U){if(Pe.pointerLock)U.type!="mousemove"&&"mozMovementX"in U?Pe.mouseMovementX=Pe.mouseMovementY=0:(Pe.mouseMovementX=Pe.getMovementX(U),Pe.mouseMovementY=Pe.getMovementY(U)),typeof Ge<"u"?(Pe.mouseX=Ge.mouseX+Pe.mouseMovementX,Pe.mouseY=Ge.mouseY+Pe.mouseMovementY):(Pe.mouseX+=Pe.mouseMovementX,Pe.mouseY+=Pe.mouseMovementY);else{var $=i.canvas.getBoundingClientRect(),ge=i.canvas.width,De=i.canvas.height,ot=typeof window.scrollX<"u"?window.scrollX:window.pageXOffset,Et=typeof window.scrollY<"u"?window.scrollY:window.pageYOffset;if(U.type==="touchstart"||U.type==="touchend"||U.type==="touchmove"){var Nt=U.touch;if(Nt===void 0)return;var zt=Nt.pageX-(ot+$.left),bi=Nt.pageY-(Et+$.top);zt=zt*(ge/$.width),bi=bi*(De/$.height);var yi={x:zt,y:bi};if(U.type==="touchstart")Pe.lastTouches[Nt.identifier]=yi,Pe.touches[Nt.identifier]=yi;else if(U.type==="touchend"||U.type==="touchmove"){var _i=Pe.touches[Nt.identifier];_i||(_i=yi),Pe.lastTouches[Nt.identifier]=_i,Pe.touches[Nt.identifier]=yi}return}var ui=U.pageX-(ot+$.left),ji=U.pageY-(Et+$.top);ui=ui*(ge/$.width),ji=ji*(De/$.height),Pe.mouseMovementX=ui-Pe.mouseX,Pe.mouseMovementY=ji-Pe.mouseY,Pe.mouseX=ui,Pe.mouseY=ji}},asyncLoad:function(U,$,ge,De){var ot=De?"":"al "+U;h(U,function(Et){J(Et,'Loading data file "'+U+'" failed (no arrayBuffer).'),$(new Uint8Array(Et)),ot&&vt()},function(Et){if(ge)ge();else throw'Loading data file "'+U+'" failed.'}),ot&&et()},resizeListeners:[],updateResizeListeners:function(){var U=i.canvas;Pe.resizeListeners.forEach(function($){$(U.width,U.height)})},setCanvasSize:function(U,$,ge){var De=i.canvas;Pe.updateCanvasDimensions(De,U,$),ge||Pe.updateResizeListeners()},windowedWidth:0,windowedHeight:0,setFullscreenCanvasSize:function(){if(typeof Ge<"u"){var U=me[Ge.screen>>2];U=U|8388608,he[Ge.screen>>2]=U}Pe.updateCanvasDimensions(i.canvas),Pe.updateResizeListeners()},setWindowedCanvasSize:function(){if(typeof Ge<"u"){var U=me[Ge.screen>>2];U=U&-8388609,he[Ge.screen>>2]=U}Pe.updateCanvasDimensions(i.canvas),Pe.updateResizeListeners()},updateCanvasDimensions:function(U,$,ge){$&&ge?(U.widthNative=$,U.heightNative=ge):($=U.widthNative,ge=U.heightNative);var De=$,ot=ge;if(i.forcedAspectRatio&&i.forcedAspectRatio>0&&(De/ot<i.forcedAspectRatio?De=Math.round(ot*i.forcedAspectRatio):ot=Math.round(De/i.forcedAspectRatio)),(document.fullscreenElement||document.mozFullScreenElement||document.msFullscreenElement||document.webkitFullscreenElement||document.webkitCurrentFullScreenElement)===U.parentNode&&typeof screen<"u"){var Et=Math.min(screen.width/De,screen.height/ot);De=Math.round(De*Et),ot=Math.round(ot*Et)}Pe.resizeCanvas?(U.width!=De&&(U.width=De),U.height!=ot&&(U.height=ot),typeof U.style<"u"&&(U.style.removeProperty("width"),U.style.removeProperty("height"))):(U.width!=$&&(U.width=$),U.height!=ge&&(U.height=ge),typeof U.style<"u"&&(De!=$||ot!=ge?(U.style.setProperty("width",De+"px","important"),U.style.setProperty("height",ot+"px","important")):(U.style.removeProperty("width"),U.style.removeProperty("height"))))},wgetRequests:{},nextWgetRequestHandle:0,getNextWgetRequestHandle:function(){var U=Pe.nextWgetRequestHandle;return Pe.nextWgetRequestHandle++,U}};function Ie(){return Date.now()-Ge.startTime|0}function He(U){var $=Ge.surfaces[U];if($.locked++,$.locked>1||($.buffer||($.buffer=qs($.width*$.height*4),he[U+20>>2]=$.buffer),he[U+20>>2]=$.buffer,U==Ge.screen&&i.screenIsReadOnly&&$.image))return 0;if($.image=$.ctx.getImageData(0,0,$.width,$.height),U==Ge.screen&&Ge.defaults.opaqueFrontBuffer)for(var ge=$.image.data,De=ge.length,ot=0;ot<De/4;ot++)ge[ot*4+3]=255;{if($.isFlagSet(2097152))throw"CopyOnLock is not supported for SDL_LockSurface with SDL_HWPALETTE flag set"+new Error().stack;le.set($.image.data,$.buffer)}return 0}function ct(){return Ge.unicode}function gt(){return Ge.ttfContext}function Rt(){return Ge.audio}var Ge={defaults:{width:320,height:200,copyOnLock:!0,discardOnLock:!1,opaqueFrontBuffer:!0},version:null,surfaces:{},canvasPool:[],events:[],fonts:[null],audios:[null],rwops:[null],music:{audio:null,volume:1},mixerFrequency:22050,mixerFormat:32784,mixerNumChannels:2,mixerChunkSize:1024,channelMinimumNumber:0,GL:!1,glAttributes:{0:3,1:3,2:2,3:0,4:0,5:1,6:16,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:1,16:0,17:0,18:0},keyboardState:null,keyboardMap:{},canRequestFullscreen:!1,isRequestingFullscreen:!1,textInput:!1,startTime:null,initFlags:0,buttonState:0,modState:0,DOMButtons:[0,0,0],DOMEventToSDLEvent:{},TOUCH_DEFAULT_ID:0,eventHandler:null,eventHandlerContext:null,eventHandlerTemp:0,keyCodes:{16:1249,17:1248,18:1250,20:1081,33:1099,34:1102,35:1101,36:1098,37:1104,38:1106,39:1103,40:1105,44:316,45:1097,46:127,91:1251,93:1125,96:1122,97:1113,98:1114,99:1115,100:1116,101:1117,102:1118,103:1119,104:1120,105:1121,106:1109,107:1111,109:1110,110:1123,111:1108,112:1082,113:1083,114:1084,115:1085,116:1086,117:1087,118:1088,119:1089,120:1090,121:1091,122:1092,123:1093,124:1128,125:1129,126:1130,127:1131,128:1132,129:1133,130:1134,131:1135,132:1136,133:1137,134:1138,135:1139,144:1107,160:94,161:33,162:34,163:35,164:36,165:37,166:38,167:95,168:40,169:41,170:42,171:43,172:124,173:45,174:123,175:125,176:126,181:127,182:129,183:128,188:44,190:46,191:47,192:96,219:91,220:92,221:93,222:39,224:1251},scanCodes:{8:42,9:43,13:40,27:41,32:44,35:204,39:53,44:54,46:55,47:56,48:39,49:30,50:31,51:32,52:33,53:34,54:35,55:36,56:37,57:38,58:203,59:51,61:46,91:47,92:49,93:48,96:52,97:4,98:5,99:6,100:7,101:8,102:9,103:10,104:11,105:12,106:13,107:14,108:15,109:16,110:17,111:18,112:19,113:20,114:21,115:22,116:23,117:24,118:25,119:26,120:27,121:28,122:29,127:76,305:224,308:226,316:70},loadRect:function(U){return{x:he[U+0>>2],y:he[U+4>>2],w:he[U+8>>2],h:he[U+12>>2]}},updateRect:function(U,$){he[U>>2]=$.x,he[U+4>>2]=$.y,he[U+8>>2]=$.w,he[U+12>>2]=$.h},intersectionOfRects:function(U,$){var ge=Math.max(U.x,$.x),De=Math.max(U.y,$.y),ot=Math.min(U.x+U.w,$.x+$.w),Et=Math.min(U.y+U.h,$.y+$.h);return{x:ge,y:De,w:Math.max(ge,ot)-ge,h:Math.max(De,Et)-De}},checkPixelFormat:function(U){},loadColorToCSSRGB:function(U){var $=he[U>>2];return"rgb("+($&255)+","+($>>8&255)+","+($>>16&255)+")"},loadColorToCSSRGBA:function(U){var $=he[U>>2];return"rgba("+($&255)+","+($>>8&255)+","+($>>16&255)+","+($>>24&255)/255+")"},translateColorToCSSRGBA:function(U){return"rgba("+(U&255)+","+(U>>8&255)+","+(U>>16&255)+","+(U>>>24)/255+")"},translateRGBAToCSSRGBA:function(U,$,ge,De){return"rgba("+(U&255)+","+($&255)+","+(ge&255)+","+(De&255)/255+")"},translateRGBAToColor:function(U,$,ge,De){return U|$<<8|ge<<16|De<<24},makeSurface:function(U,$,ge,De,ot,Et,Nt,zt,bi){ge=ge||0;var yi=ge&1,_i=ge&2097152,ui=ge&67108864,ji=qs(60),an=qs(44),Tn=_i?1:4,ft=0;!yi&&!ui&&(ft=qs(U*$*4)),he[ji>>2]=ge,he[ji+4>>2]=an,he[ji+8>>2]=U,he[ji+12>>2]=$,he[ji+16>>2]=U*Tn,he[ji+20>>2]=ft,he[ji+36>>2]=0,he[ji+40>>2]=0,he[ji+44>>2]=i.canvas.width,he[ji+48>>2]=i.canvas.height,he[ji+56>>2]=1,he[an>>2]=-2042224636,he[an+4>>2]=0,Be[an+8>>0]=Tn*8,Be[an+9>>0]=Tn,he[an+12>>2]=Et||255,he[an+16>>2]=Nt||65280,he[an+20>>2]=zt||16711680,he[an+24>>2]=bi||4278190080,Ge.GL=Ge.GL||ui;var p;De?p=i.canvas:(Ge.canvasPool.length>0?p=Ge.canvasPool.pop():p=document.createElement("canvas"),p.width=U,p.height=$);var Di={antialias:Ge.glAttributes[13]!=0,depth:Ge.glAttributes[6]>0,stencil:Ge.glAttributes[7]>0,alpha:Ge.glAttributes[3]>0},c=Pe.createContext(p,ui,De,Di);return Ge.surfaces[ji]={width:U,height:$,canvas:p,ctx:c,surf:ji,buffer:ft,pixelFormat:an,alpha:255,flags:ge,locked:0,usePageCanvas:De,source:ot,isFlagSet:function(F){return ge&F}},ji},copyIndexedColorData:function(U,$,ge,De,ot){if(!!U.colors){var Et=i.canvas.width,Nt=i.canvas.height,zt=$||0,bi=ge||0,yi=(De||Et-zt)+zt,_i=(ot||Nt-bi)+bi,ui=U.buffer;U.image.data32||(U.image.data32=new Uint32Array(U.image.data.buffer));for(var ji=U.image.data32,an=U.colors32,Tn=bi;Tn<_i;++Tn)for(var ft=Tn*Et,p=zt;p<yi;++p)ji[ft+p]=an[le[ui+ft+p>>0]]}},freeSurface:function(U){var $=U+56,ge=he[$>>2];if(ge>1){he[$>>2]=ge-1;return}var De=Ge.surfaces[U];!De.usePageCanvas&&De.canvas&&Ge.canvasPool.push(De.canvas),De.buffer&&Ea(De.buffer),Ea(De.pixelFormat),Ea(U),Ge.surfaces[U]=null,U===Ge.screen&&(Ge.screen=null)},blitSurface:function(U,$,ge,De,ot){var Et=Ge.surfaces[U],Nt=Ge.surfaces[ge],zt,bi;if($?zt=Ge.loadRect($):zt={x:0,y:0,w:Et.width,h:Et.height},De?bi=Ge.loadRect(De):bi={x:0,y:0,w:Et.width,h:Et.height},Nt.clipRect){var yi=!ot||zt.w===0?1:zt.w/bi.w,_i=!ot||zt.h===0?1:zt.h/bi.h;bi=Ge.intersectionOfRects(Nt.clipRect,bi),zt.w=bi.w*yi,zt.h=bi.h*_i,De&&Ge.updateRect(De,bi)}var ui,ji;if(ot?(ui=bi.w,ji=bi.h):(ui=zt.w,ji=zt.h),zt.w===0||zt.h===0||ui===0||ji===0)return 0;var an=Nt.ctx.globalAlpha;return Nt.ctx.globalAlpha=Et.alpha/255,Nt.ctx.drawImage(Et.canvas,zt.x,zt.y,zt.w,zt.h,bi.x,bi.y,ui,ji),Nt.ctx.globalAlpha=an,ge!=Ge.screen&&(C("WARNING: copying canvas data to memory for compatibility"),He(ge),Nt.locked--),0},downFingers:{},savedKeydown:null,receiveEvent:function(U){function $(){for(var _i in Ge.keyboardMap)Ge.events.push({type:"keyup",keyCode:Ge.keyboardMap[_i]})}switch(U.type){case"touchstart":case"touchmove":{U.preventDefault();var ge=[];if(U.type==="touchstart")for(var De=0;De<U.touches.length;De++){var ot=U.touches[De];Ge.downFingers[ot.identifier]!=!0&&(Ge.downFingers[ot.identifier]=!0,ge.push(ot))}else ge=U.touches;var Et=ge[0];if(Et){U.type=="touchstart"&&(Ge.DOMButtons[0]=1);var Nt;switch(U.type){case"touchstart":Nt="mousedown";break;case"touchmove":Nt="mousemove";break}var zt={type:Nt,button:0,pageX:Et.clientX,pageY:Et.clientY};Ge.events.push(zt)}for(var De=0;De<ge.length;De++){var ot=ge[De];Ge.events.push({type:U.type,touch:ot})}break}case"touchend":{U.preventDefault();for(var De=0;De<U.changedTouches.length;De++){var ot=U.changedTouches[De];Ge.downFingers[ot.identifier]===!0&&delete Ge.downFingers[ot.identifier]}var zt={type:"mouseup",button:0,pageX:U.changedTouches[0].clientX,pageY:U.changedTouches[0].clientY};Ge.DOMButtons[0]=0,Ge.events.push(zt);for(var De=0;De<U.changedTouches.length;De++){var ot=U.changedTouches[De];Ge.events.push({type:"touchend",touch:ot})}break}case"DOMMouseScroll":case"mousewheel":case"wheel":var bi=-Pe.getMouseWheelDelta(U);bi=bi==0?0:bi>0?Math.max(bi,1):Math.min(bi,-1);var yi=bi>0?3:4;Ge.events.push({type:"mousedown",button:yi,pageX:U.pageX,pageY:U.pageY}),Ge.events.push({type:"mouseup",button:yi,pageX:U.pageX,pageY:U.pageY}),Ge.events.push({type:"wheel",deltaX:0,deltaY:bi}),U.preventDefault();break;case"mousemove":if(Ge.DOMButtons[0]===1&&Ge.events.push({type:"touchmove",touch:{identifier:0,deviceID:-1,pageX:U.pageX,pageY:U.pageY}}),Pe.pointerLock&&("mozMovementX"in U&&(U.movementX=U.mozMovementX,U.movementY=U.mozMovementY),U.movementX==0&&U.movementY==0)){U.preventDefault();return}case"keydown":case"keyup":case"keypress":case"mousedown":case"mouseup":if((U.type!=="keydown"||!ct()&&!Ge.textInput||U.keyCode===8||U.keyCode===9)&&U.preventDefault(),U.type=="mousedown")Ge.DOMButtons[U.button]=1,Ge.events.push({type:"touchstart",touch:{identifier:0,deviceID:-1,pageX:U.pageX,pageY:U.pageY}});else if(U.type=="mouseup"){if(!Ge.DOMButtons[U.button])return;Ge.events.push({type:"touchend",touch:{identifier:0,deviceID:-1,pageX:U.pageX,pageY:U.pageY}}),Ge.DOMButtons[U.button]=0}U.type==="keydown"||U.type==="mousedown"?Ge.canRequestFullscreen=!0:(U.type==="keyup"||U.type==="mouseup")&&(Ge.canRequestFullscreen=!1),U.type==="keypress"&&Ge.savedKeydown?(Ge.savedKeydown.keypressCharCode=U.charCode,Ge.savedKeydown=null):U.type==="keydown"&&(Ge.savedKeydown=U),(U.type!=="keypress"||Ge.textInput)&&Ge.events.push(U);break;case"mouseout":for(var De=0;De<3;De++)Ge.DOMButtons[De]&&(Ge.events.push({type:"mouseup",button:De,pageX:U.pageX,pageY:U.pageY}),Ge.DOMButtons[De]=0);U.preventDefault();break;case"focus":Ge.events.push(U),U.preventDefault();break;case"blur":Ge.events.push(U),$(),U.preventDefault();break;case"visibilitychange":Ge.events.push({type:"visibilitychange",visible:!document.hidden}),$(),U.preventDefault();break;case"unload":Pe.mainLoop.runner&&(Ge.events.push(U),Pe.mainLoop.runner());return;case"resize":Ge.events.push(U),U.preventDefault&&U.preventDefault();break}Ge.events.length>=1e4&&(v("SDL event queue full, dropping events"),Ge.events=Ge.events.slice(0,1e4))},lookupKeyCodeForEvent:function(U){var $=U.keyCode;return $>=65&&$<=90?$+=32:($=Ge.keyCodes[U.keyCode]||U.keyCode,U.location===2&&$>=(224|1<<10)&&$<=(227|1<<10)&&($+=4)),$},handleEvent:function(U){if(!U.handled)switch(U.handled=!0,U.type){case"touchstart":case"touchend":case"touchmove":{Pe.calculateMouseEvent(U);break}case"keydown":case"keyup":{var $=U.type==="keydown",ge=Ge.lookupKeyCodeForEvent(U);Be[Ge.keyboardState+ge>>0]=$,Ge.modState=(Be[Ge.keyboardState+1248>>0]?64:0)|(Be[Ge.keyboardState+1249>>0]?1:0)|(Be[Ge.keyboardState+1250>>0]?256:0)|(Be[Ge.keyboardState+1252>>0]?128:0)|(Be[Ge.keyboardState+1253>>0]?2:0)|(Be[Ge.keyboardState+1254>>0]?512:0),$?Ge.keyboardMap[ge]=U.keyCode:delete Ge.keyboardMap[ge];break}case"mousedown":case"mouseup":U.type=="mousedown"?Ge.buttonState|=1<<U.button:U.type=="mouseup"&&(Ge.buttonState&=~(1<<U.button));case"mousemove":{Pe.calculateMouseEvent(U);break}}},flushEventsToHandler:function(){},pollEvent:function(U){if(Ge.initFlags&512&&Ge.joystickEventState&&Ge.queryJoysticks(),U){for(;Ge.events.length>0;)if(Ge.makeCEvent(Ge.events.shift(),U)!==!1)return 1;return 0}else return Ge.events.length>0},makeCEvent:function(U,$){if(typeof U=="number"){Zs($,U,28),Ea(U);return}switch(Ge.handleEvent(U),U.type){case"keydown":case"keyup":{var ge=U.type==="keydown",De=Ge.lookupKeyCodeForEvent(U),ot;De>=1024?ot=De-1024:ot=Ge.scanCodes[De]||De,he[$>>2]=Ge.DOMEventToSDLEvent[U.type],Be[$+8>>0]=ge?1:0,Be[$+9>>0]=0,he[$+12>>2]=ot,he[$+16>>2]=De,Ee[$+20>>1]=Ge.modState,he[$+24>>2]=U.keypressCharCode||De;break}case"keypress":{he[$>>2]=Ge.DOMEventToSDLEvent[U.type];for(var Et=Xo(String.fromCharCode(U.charCode)),Nt=0;Nt<Et.length;++Nt)Be[$+(8+Nt)>>0]=Et[Nt];break}case"mousedown":case"mouseup":case"mousemove":{if(U.type!="mousemove"){var ge=U.type==="mousedown";he[$>>2]=Ge.DOMEventToSDLEvent[U.type],he[$+4>>2]=0,he[$+8>>2]=0,he[$+12>>2]=0,Be[$+16>>0]=U.button+1,Be[$+17>>0]=ge?1:0,he[$+20>>2]=Pe.mouseX,he[$+24>>2]=Pe.mouseY}else he[$>>2]=Ge.DOMEventToSDLEvent[U.type],he[$+4>>2]=0,he[$+8>>2]=0,he[$+12>>2]=0,he[$+16>>2]=Ge.buttonState,he[$+20>>2]=Pe.mouseX,he[$+24>>2]=Pe.mouseY,he[$+28>>2]=Pe.mouseMovementX,he[$+32>>2]=Pe.mouseMovementY;break}case"wheel":{he[$>>2]=Ge.DOMEventToSDLEvent[U.type],he[$+16>>2]=U.deltaX,he[$+20>>2]=U.deltaY;break}case"touchstart":case"touchend":case"touchmove":{var zt=U.touch;if(!Pe.touches[zt.identifier])break;var bi=i.canvas.width,yi=i.canvas.height,_i=Pe.touches[zt.identifier].x/bi,ui=Pe.touches[zt.identifier].y/yi,ji=Pe.lastTouches[zt.identifier].x/bi,an=Pe.lastTouches[zt.identifier].y/yi,Tn=_i-ji,ft=ui-an;if(zt.deviceID===void 0&&(zt.deviceID=Ge.TOUCH_DEFAULT_ID),Tn===0&&ft===0&&U.type==="touchmove")return!1;he[$>>2]=Ge.DOMEventToSDLEvent[U.type],he[$+4>>2]=Ie(),Kr=[zt.deviceID>>>0,(Yn=zt.deviceID,+mi(Yn)>=1?Yn>0?(Jt(+xi(Yn/4294967296),4294967295)|0)>>>0:~~+Qi((Yn-+(~~Yn>>>0))/4294967296)>>>0:0)],he[$+8>>2]=Kr[0],he[$+12>>2]=Kr[1],Kr=[zt.identifier>>>0,(Yn=zt.identifier,+mi(Yn)>=1?Yn>0?(Jt(+xi(Yn/4294967296),4294967295)|0)>>>0:~~+Qi((Yn-+(~~Yn>>>0))/4294967296)>>>0:0)],he[$+16>>2]=Kr[0],he[$+20>>2]=Kr[1],Fe[$+24>>2]=_i,Fe[$+28>>2]=ui,Fe[$+32>>2]=Tn,Fe[$+36>>2]=ft,zt.force!==void 0?Fe[$+40>>2]=zt.force:Fe[$+40>>2]=U.type=="touchend"?0:1;break}case"unload":{he[$>>2]=Ge.DOMEventToSDLEvent[U.type];break}case"resize":{he[$>>2]=Ge.DOMEventToSDLEvent[U.type],he[$+4>>2]=U.w,he[$+8>>2]=U.h;break}case"joystick_button_up":case"joystick_button_down":{var p=U.type==="joystick_button_up"?0:1;he[$>>2]=Ge.DOMEventToSDLEvent[U.type],Be[$+4>>0]=U.index,Be[$+5>>0]=U.button,Be[$+6>>0]=p;break}case"joystick_axis_motion":{he[$>>2]=Ge.DOMEventToSDLEvent[U.type],Be[$+4>>0]=U.index,Be[$+5>>0]=U.axis,he[$+8>>2]=Ge.joystickAxisValueConversion(U.value);break}case"focus":{var Di=12;he[$>>2]=Ge.DOMEventToSDLEvent[U.type],he[$+4>>2]=0,Be[$+8>>0]=Di;break}case"blur":{var c=13;he[$>>2]=Ge.DOMEventToSDLEvent[U.type],he[$+4>>2]=0,Be[$+8>>0]=c;break}case"visibilitychange":{var F=1,pn=2,Qn=U.visible?F:pn;he[$>>2]=Ge.DOMEventToSDLEvent[U.type],he[$+4>>2]=0,Be[$+8>>0]=Qn;break}default:throw"Unhandled SDL event: "+U.type}},makeFontString:function(U,$){return $.charAt(0)!="'"&&$.charAt(0)!='"'&&($='"'+$+'"'),U+"px "+$+", serif"},estimateTextWidth:function(U,$){var ge=U.size,De=Ge.makeFontString(ge,U.name),ot=gt();ot.font=De;var Et=ot.measureText($).width|0;return Et},allocateChannels:function(U){if(!(Ge.numChannels&&Ge.numChannels>=U&&U!=0)){Ge.numChannels=U,Ge.channels=[];for(var $=0;$<U;$++)Ge.channels[$]={audio:null,volume:1}}},setGetVolume:function(U,$){if(!U)return 0;var ge=U.volume*128;if($!=-1&&(U.volume=Math.min(Math.max($,0),128)/128,U.audio))try{U.audio.volume=U.volume,U.audio.webAudioGainNode&&(U.audio.webAudioGainNode.gain.value=U.volume)}catch(De){v("setGetVolume failed to set audio volume: "+De)}return ge},setPannerPosition:function(U,$,ge,De){!U||U.audio&&U.audio.webAudioPannerNode&&U.audio.webAudioPannerNode.setPosition($,ge,De)},playWebAudio:function(U){if(!!U&&!U.webAudioNode&&!!Ge.webAudioAvailable())try{var $=U.resource.webAudio;if(U.paused=!1,!$.decodedBuffer){$.onDecodeComplete===void 0&&Wt("Cannot play back audio object that was not loaded"),$.onDecodeComplete.push(function(){U.paused||Ge.playWebAudio(U)});return}U.webAudioNode=Ge.audioContext.createBufferSource(),U.webAudioNode.buffer=$.decodedBuffer,U.webAudioNode.loop=U.loop,U.webAudioNode.onended=function(){U.onended()},U.webAudioPannerNode=Ge.audioContext.createPanner(),U.webAudioPannerNode.setPosition(0,0,-.5),U.webAudioPannerNode.panningModel="equalpower",U.webAudioGainNode=Ge.audioContext.createGain(),U.webAudioGainNode.gain.value=U.volume,U.webAudioNode.connect(U.webAudioPannerNode),U.webAudioPannerNode.connect(U.webAudioGainNode),U.webAudioGainNode.connect(Ge.audioContext.destination),U.webAudioNode.start(0,U.currentPosition),U.startTime=Ge.audioContext.currentTime-U.currentPosition}catch(ge){v("playWebAudio failed: "+ge)}},pauseWebAudio:function(U){if(!!U){if(U.webAudioNode)try{U.currentPosition=(Ge.audioContext.currentTime-U.startTime)%U.resource.webAudio.decodedBuffer.duration,U.webAudioNode.onended=void 0,U.webAudioNode.stop(0),U.webAudioNode=void 0}catch($){v("pauseWebAudio failed: "+$)}U.paused=!0}},openAudioContext:function(){Ge.audioContext||(typeof AudioContext<"u"?Ge.audioContext=new AudioContext:typeof webkitAudioContext<"u"&&(Ge.audioContext=new webkitAudioContext))},webAudioAvailable:function(){return!!Ge.audioContext},fillWebAudioBufferFromHeap:function(U,$,ge){for(var De=Rt(),ot=De.channels,Et=0;Et<ot;++Et){var Nt=ge.getChannelData(Et);if(Nt.length!=$)throw"Web Audio output buffer length mismatch! Destination size: "+Nt.length+" samples vs expected "+$+" samples!";if(De.format==32784)for(var zt=0;zt<$;++zt)Nt[zt]=Ee[U+(zt*ot+Et)*2>>1]/32768;else if(De.format==8)for(var zt=0;zt<$;++zt){var bi=Be[U+(zt*ot+Et)>>0];Nt[zt]=(bi>=0?bi-128:bi+128)/128}else if(De.format==33056)for(var zt=0;zt<$;++zt)Nt[zt]=Fe[U+(zt*ot+Et)*4>>2];else throw"Invalid SDL audio format "+De.format+"!"}},debugSurface:function(U){console.log("dumping surface "+[U.surf,U.source,U.width,U.height]);for(var $=U.ctx.getImageData(0,0,U.width,U.height),ge=$.data,De=Math.min(U.width,U.height),ot=0;ot<De;ot++)console.log("   diagonal "+ot+":"+[ge[ot*U.width*4+ot*4+0],ge[ot*U.width*4+ot*4+1],ge[ot*U.width*4+ot*4+2],ge[ot*U.width*4+ot*4+3]])},joystickEventState:1,lastJoystickState:{},joystickNamePool:{},recordJoystickState:function(U,$){for(var ge=new Array($.buttons.length),De=0;De<$.buttons.length;De++)ge[De]=Ge.getJoystickButtonState($.buttons[De]);Ge.lastJoystickState[U]={buttons:ge,axes:$.axes.slice(0),timestamp:$.timestamp,index:$.index,id:$.id}},getJoystickButtonState:function(U){return typeof U=="object"?U.pressed:U>0},queryJoysticks:function(){for(var U in Ge.lastJoystickState){var $=Ge.getGamepad(U-1),ge=Ge.lastJoystickState[U];if(typeof $>"u"||$===null)return;if(typeof $.timestamp!="number"||$.timestamp!==ge.timestamp||!$.timestamp){var De;for(De=0;De<$.buttons.length;De++){var ot=Ge.getJoystickButtonState($.buttons[De]);ot!==ge.buttons[De]&&Ge.events.push({type:ot?"joystick_button_down":"joystick_button_up",joystick:U,index:U-1,button:De})}for(De=0;De<$.axes.length;De++)$.axes[De]!==ge.axes[De]&&Ge.events.push({type:"joystick_axis_motion",joystick:U,index:U-1,axis:De,value:$.axes[De]});Ge.recordJoystickState(U,$)}}},joystickAxisValueConversion:function(U){return U=Math.min(1,Math.max(U,-1)),Math.ceil((U+1)*32767.5-32768)},getGamepads:function(){var U=navigator.getGamepads||navigator.webkitGamepads||navigator.mozGamepads||navigator.gamepads||navigator.webkitGetGamepads;return U!==void 0?U.apply(navigator):[]},getGamepad:function(U){var $=Ge.getGamepads();return $.length>U&&U>=0?$[U]:null}};function Ht(U,$,ge,De,ot,Et,Nt,zt){return Ge.makeSurface($,ge,U,!1,"CreateRGBSurface",ot,Et,Nt,zt)}function Bt(U){}function ei(U){U&&Ge.freeSurface(U)}function _t(U){if(Ge.startTime=Date.now(),Ge.initFlags=U,!i.doNotCaptureKeyboard){var $=i.keyboardListeningElement||document;$.addEventListener("keydown",Ge.receiveEvent),$.addEventListener("keyup",Ge.receiveEvent),$.addEventListener("keypress",Ge.receiveEvent),window.addEventListener("focus",Ge.receiveEvent),window.addEventListener("blur",Ge.receiveEvent),document.addEventListener("visibilitychange",Ge.receiveEvent)}return window.addEventListener("unload",Ge.receiveEvent),Ge.keyboardState=qs(65536),Cs(Ge.keyboardState,0,65536),Ge.DOMEventToSDLEvent.keydown=768,Ge.DOMEventToSDLEvent.keyup=769,Ge.DOMEventToSDLEvent.keypress=771,Ge.DOMEventToSDLEvent.mousedown=1025,Ge.DOMEventToSDLEvent.mouseup=1026,Ge.DOMEventToSDLEvent.mousemove=1024,Ge.DOMEventToSDLEvent.wheel=1027,Ge.DOMEventToSDLEvent.touchstart=1792,Ge.DOMEventToSDLEvent.touchend=1793,Ge.DOMEventToSDLEvent.touchmove=1794,Ge.DOMEventToSDLEvent.unload=256,Ge.DOMEventToSDLEvent.resize=28673,Ge.DOMEventToSDLEvent.visibilitychange=512,Ge.DOMEventToSDLEvent.focus=512,Ge.DOMEventToSDLEvent.blur=512,Ge.DOMEventToSDLEvent.joystick_axis_motion=1536,Ge.DOMEventToSDLEvent.joystick_button_down=1539,Ge.DOMEventToSDLEvent.joystick_button_up=1540,0}function Ri(U){var $=U.getExtension("ANGLE_instanced_arrays");if($)return U.vertexAttribDivisor=function(ge,De){$.vertexAttribDivisorANGLE(ge,De)},U.drawArraysInstanced=function(ge,De,ot,Et){$.drawArraysInstancedANGLE(ge,De,ot,Et)},U.drawElementsInstanced=function(ge,De,ot,Et,Nt){$.drawElementsInstancedANGLE(ge,De,ot,Et,Nt)},1}function Ii(U){var $=U.getExtension("OES_vertex_array_object");if($)return U.createVertexArray=function(){return $.createVertexArrayOES()},U.deleteVertexArray=function(ge){$.deleteVertexArrayOES(ge)},U.bindVertexArray=function(ge){$.bindVertexArrayOES(ge)},U.isVertexArray=function(ge){return $.isVertexArrayOES(ge)},1}function In(U){var $=U.getExtension("WEBGL_draw_buffers");if($)return U.drawBuffers=function(ge,De){$.drawBuffersWEBGL(ge,De)},1}function kn(U){return!!(U.multiDrawWebgl=U.getExtension("WEBGL_multi_draw"))}var xt={counter:1,buffers:[],programs:[],framebuffers:[],renderbuffers:[],textures:[],uniforms:[],shaders:[],vaos:[],contexts:[],offscreenCanvases:{},timerQueriesEXT:[],programInfos:{},stringCache:{},unpackAlignment:4,recordError:function($){xt.lastError||(xt.lastError=$)},getNewId:function(U){for(var $=xt.counter++,ge=U.length;ge<$;ge++)U[ge]=null;return $},getSource:function(U,$,ge,De){for(var ot="",Et=0;Et<$;++Et){var Nt=De?he[De+Et*4>>2]:-1;ot+=_e(he[ge+Et*4>>2],Nt<0?void 0:Nt)}return ot},createContext:function(U,$){var ge=U.getContext("webgl",$)||U.getContext("experimental-webgl",$);if(!ge)return 0;var De=xt.registerContext(ge,$);return De},registerContext:function(U,$){var ge=xt.getNewId(xt.contexts),De={handle:ge,attributes:$,version:$.majorVersion,GLctx:U};return De.cannotHandleOffsetsInUniformArrayViews=function(ot){function Et(yi,_i){var ui=ot.createShader(_i);return ot.shaderSource(ui,yi),ot.compileShader(ui),ui}try{var Nt=ot.createProgram();ot.attachShader(Nt,Et("attribute vec4 p;void main(){gl_Position=p;}",35633)),ot.attachShader(Nt,Et("precision lowp float;uniform vec4 u;void main(){gl_FragColor=u;}",35632)),ot.linkProgram(Nt);var zt=new Float32Array(8);zt[4]=1,ot.useProgram(Nt);var bi=ot.getUniformLocation(Nt,"u");return ot.uniform4fv(bi,zt.subarray(4,8)),!ot.getUniform(Nt,bi)[0]}catch{return!1}}(),U.canvas&&(U.canvas.GLctxObject=De),xt.contexts[ge]=De,(typeof $.enableExtensionsByDefault>"u"||$.enableExtensionsByDefault)&&xt.initExtensions(De),ge},makeContextCurrent:function(U){return xt.currentContext=xt.contexts[U],i.ctx=Nr=xt.currentContext&&xt.currentContext.GLctx,!(U&&!Nr)},getContext:function(U){return xt.contexts[U]},deleteContext:function(U){xt.currentContext===xt.contexts[U]&&(xt.currentContext=null),typeof JSEvents=="object"&&JSEvents.removeAllHandlersOnTarget(xt.contexts[U].GLctx.canvas),xt.contexts[U]&&xt.contexts[U].GLctx.canvas&&(xt.contexts[U].GLctx.canvas.GLctxObject=void 0),xt.contexts[U]=null},initExtensions:function(U){if(U||(U=xt.currentContext),!U.initExtensionsDone){U.initExtensionsDone=!0;var $=U.GLctx;Ri($),Ii($),In($),$.disjointTimerQueryExt=$.getExtension("EXT_disjoint_timer_query"),kn($);var ge=["OES_texture_float","OES_texture_half_float","OES_standard_derivatives","OES_vertex_array_object","WEBGL_compressed_texture_s3tc","WEBGL_depth_texture","OES_element_index_uint","EXT_texture_filter_anisotropic","EXT_frag_depth","WEBGL_draw_buffers","ANGLE_instanced_arrays","OES_texture_float_linear","OES_texture_half_float_linear","EXT_blend_minmax","EXT_shader_texture_lod","EXT_texture_norm16","WEBGL_compressed_texture_pvrtc","EXT_color_buffer_half_float","WEBGL_color_buffer_float","EXT_sRGB","WEBGL_compressed_texture_etc1","EXT_disjoint_timer_query","WEBGL_compressed_texture_etc","WEBGL_compressed_texture_astc","EXT_color_buffer_float","WEBGL_compressed_texture_s3tc_srgb","EXT_disjoint_timer_query_webgl2","WEBKIT_WEBGL_compressed_texture_pvrtc"],De=$.getSupportedExtensions()||[];De.forEach(function(ot){ge.indexOf(ot)!=-1&&$.getExtension(ot)})}},populateUniformTable:function(U){for(var $=xt.programs[U],ge=xt.programInfos[U]={uniforms:{},maxUniformLength:0,maxAttributeLength:-1,maxUniformBlockNameLength:-1},De=ge.uniforms,ot=Nr.getProgramParameter($,35718),Et=0;Et<ot;++Et){var Nt=Nr.getActiveUniform($,Et),zt=Nt.name;ge.maxUniformLength=Math.max(ge.maxUniformLength,zt.length+1),zt.slice(-1)=="]"&&(zt=zt.slice(0,zt.lastIndexOf("[")));var bi=Nr.getUniformLocation($,zt);if(bi){var yi=xt.getNewId(xt.uniforms);De[zt]=[Nt.size,yi],xt.uniforms[yi]=bi;for(var _i=1;_i<Nt.size;++_i){var ui=zt+"["+_i+"]";bi=Nr.getUniformLocation($,ui),yi=xt.getNewId(xt.uniforms),xt.uniforms[yi]=bi}}}}};function Pn(U,$,ge,De){["touchstart","touchend","touchmove","mousedown","mouseup","mousemove","DOMMouseScroll","mousewheel","wheel","mouseout"].forEach(function(Et){i.canvas.addEventListener(Et,Ge.receiveEvent,!0)});var ot=i.canvas;return U==0&&$==0&&(U=ot.width,$=ot.height),Ge.addedResizeListener||(Ge.addedResizeListener=!0,Pe.resizeListeners.push(function(Et,Nt){Ge.settingVideoMode||Ge.receiveEvent({type:"resize",w:Et,h:Nt})})),Ge.settingVideoMode=!0,Pe.setCanvasSize(U,$),Ge.settingVideoMode=!1,Ge.screen&&(Ge.freeSurface(Ge.screen),J(!Ge.screen)),Ge.GL&&(De=De|67108864),Ge.screen=Ge.makeSurface(U,$,De,!0,"screen"),Ge.screen}function $n(U){J(!Ge.GL);var $=Ge.surfaces[U];if(!(!$.locked||--$.locked>0)){if($.isFlagSet(2097152))Ge.copyIndexedColorData($);else if($.colors)for(var an=i.canvas.width,Tn=i.canvas.height,ft=$.buffer,ge=$.image.data,p=$.colors,Di=0;Di<Tn;Di++){for(var c=Di*an*4,F=0;F<an;F++){var bi=le[ft++>>0]*4,pn=c+F*4;ge[pn]=p[bi],ge[pn+1]=p[bi+1],ge[pn+2]=p[bi+2]}ft+=an*3}else{var ge=$.image.data,De=$.buffer;J(De%4==0,"Invalid buffer offset: "+De);var ot=De>>2,Et=0,Nt=U==Ge.screen,zt;if(typeof CanvasPixelArray<"u"&&ge instanceof CanvasPixelArray)for(zt=ge.length;Et<zt;){var bi=he[ot];ge[Et]=bi&255,ge[Et+1]=bi>>8&255,ge[Et+2]=bi>>16&255,ge[Et+3]=Nt?255:bi>>24&255,ot++,Et+=4}else{var yi=new Uint32Array(ge.buffer);if(Nt&&Ge.defaults.opaqueFrontBuffer){zt=yi.length,yi.set(he.subarray(ot,ot+zt));var _i=new Uint8Array(ge.buffer),ui=3,ji=ui+4*zt;if(zt%8==0)for(;ui<ji;)_i[ui]=255,ui=ui+4|0,_i[ui]=255,ui=ui+4|0,_i[ui]=255,ui=ui+4|0,_i[ui]=255,ui=ui+4|0,_i[ui]=255,ui=ui+4|0,_i[ui]=255,ui=ui+4|0,_i[ui]=255,ui=ui+4|0,_i[ui]=255,ui=ui+4|0;else for(;ui<ji;)_i[ui]=255,ui=ui+4|0}else yi.set(he.subarray(ot,ot+yi.length))}}$.ctx.putImageData($.image,0,0)}}function Pr(U,$,ge,De){return Ge.blitSurface(U,$,ge,De,!1)}function cr(){return 12032}var Cr=Uint8Array.prototype.copyWithin?function(U,$,ge){le.copyWithin(U,$,$+ge)}:function(U,$,ge){le.set(le.subarray($,$+ge),U)};function Or(){return le.length}function Er(U){try{return X.grow(U-Ce.byteLength+65535>>>16),Xe(X.buffer),1}catch{}}function Jo(U){U=U>>>0;var $=Or(),ge=65536,De=2147483648;if(U>De)return!1;for(var ot=16777216,Et=1;Et<=4;Et*=2){var Nt=$*(1+.2/Et);Nt=Math.min(Nt,U+100663296);var zt=Math.min(De,be(Math.max(ot,U,Nt),ge)),bi=Er(zt);if(bi)return!0}return!1}var _o={mappings:{},buffers:[null,[],[]],printChar:function(U,$){var ge=_o.buffers[U];$===0||$===10?((U===1?b:v)(Te(ge,0)),ge.length=0):ge.push($)},varargs:void 0,get:function(){_o.varargs+=4;var U=he[_o.varargs-4>>2];return U},getStr:function(U){var $=_e(U);return $},get64:function(U,$){return U}};function Qo(U){return 0}function il(U,$,ge,De,ot){}function Do(U,$,ge,De){for(var ot=0,Et=0;Et<ge;Et++){for(var Nt=he[$+Et*8>>2],zt=he[$+(Et*8+4)>>2],bi=0;bi<zt;bi++)_o.printChar(U,le[Nt+bi]);ot+=zt}return he[De>>2]=ot,0}var Ot=function(U,$,ge,De){U||(U=this),this.parent=U,this.mount=U.mount,this.mounted=null,this.id=qe.nextInode++,this.name=$,this.mode=ge,this.node_ops={},this.stream_ops={},this.rdev=De},sr=365,hr=146;Object.defineProperties(Ot.prototype,{read:{get:function(){return(this.mode&sr)===sr},set:function(U){U?this.mode|=sr:this.mode&=~sr}},write:{get:function(){return(this.mode&hr)===hr},set:function(U){U?this.mode|=hr:this.mode&=~hr}},isFolder:{get:function(){return qe.isDir(this.mode)}},isDevice:{get:function(){return qe.isChrdev(this.mode)}}}),qe.FSNode=Ot,qe.staticInit(),i.requestFullscreen=function($,ge){Pe.requestFullscreen($,ge)},i.requestAnimationFrame=function($){Pe.requestAnimationFrame($)},i.setCanvasSize=function($,ge,De){Pe.setCanvasSize($,ge,De)},i.pauseMainLoop=function(){Pe.mainLoop.pause()},i.resumeMainLoop=function(){Pe.mainLoop.resume()},i.getUserMedia=function(){Pe.getUserMedia()},i.createContext=function($,ge,De,ot){return Pe.createContext($,ge,De,ot)};var Nr;function Xo(U,$,ge){var De=ge>0?ge:nt(U)+1,ot=new Array(De),Et=ve(U,ot,0,ot.length);return $&&(ot.length=Et),ot}function Oo(U){for(var $=[],ge=0;ge<U.length;ge++){var De=U[ge];De>255&&(De&=255),$.push(String.fromCharCode(De))}return $.join("")}var Sa=typeof atob=="function"?atob:function(U){var $="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",ge="",De,ot,Et,Nt,zt,bi,yi,_i=0;U=U.replace(/[^A-Za-z0-9\+\/\=]/g,"");do Nt=$.indexOf(U.charAt(_i++)),zt=$.indexOf(U.charAt(_i++)),bi=$.indexOf(U.charAt(_i++)),yi=$.indexOf(U.charAt(_i++)),De=Nt<<2|zt>>4,ot=(zt&15)<<4|bi>>2,Et=(bi&3)<<6|yi,ge=ge+String.fromCharCode(De),bi!==64&&(ge=ge+String.fromCharCode(ot)),yi!==64&&(ge=ge+String.fromCharCode(Et));while(_i<U.length);return ge};function ns(U){try{for(var $=Sa(U),ge=new Uint8Array($.length),De=0;De<$.length;++De)ge[De]=$.charCodeAt(De);return ge}catch{throw new Error("Converting base64 string to bytes failed.")}}function Vs(U){if(!!Mn(U))return ns(U.slice(xn.length))}var vs={SDL_CreateRGBSurface:Ht,SDL_Flip:Bt,SDL_FreeSurface:ei,SDL_Init:_t,SDL_LockSurface:He,SDL_SetVideoMode:Pn,SDL_UnlockSurface:$n,SDL_UpperBlit:Pr,emscripten_get_sbrk_ptr:cr,emscripten_memcpy_big:Cr,emscripten_resize_heap:Jo,fd_close:Qo,fd_seek:il,fd_write:Do,getTempRet0:M,memory:X,setTempRet0:S,table:Z};Xn();var Ca=i.___wasm_call_ctors=function(){return(Ca=i.___wasm_call_ctors=i.asm.__wasm_call_ctors).apply(null,arguments)};i._WebpToSDL=function(){return(i._WebpToSDL=i.asm.WebpToSDL).apply(null,arguments)};var Cs=i._memset=function(){return(Cs=i._memset=i.asm.memset).apply(null,arguments)},Zs=i._memcpy=function(){return(Zs=i._memcpy=i.asm.memcpy).apply(null,arguments)},qs=i._malloc=function(){return(qs=i._malloc=i.asm.malloc).apply(null,arguments)},Ea=i._free=function(){return(Ea=i._free=i.asm.free).apply(null,arguments)},kl=i.___errno_location=function(){return(kl=i.___errno_location=i.asm.__errno_location).apply(null,arguments)},cu=i.stackSave=function(){return(cu=i.stackSave=i.asm.stackSave).apply(null,arguments)},Sl=i.stackRestore=function(){return(Sl=i.stackRestore=i.asm.stackRestore).apply(null,arguments)},hu=i.stackAlloc=function(){return(hu=i.stackAlloc=i.asm.stackAlloc).apply(null,arguments)};i.dynCall_vii=function(){return(i.dynCall_vii=i.asm.dynCall_vii).apply(null,arguments)},i.dynCall_vi=function(){return(i.dynCall_vi=i.asm.dynCall_vi).apply(null,arguments)},i.dynCall_ii=function(){return(i.dynCall_ii=i.asm.dynCall_ii).apply(null,arguments)},i.dynCall_iii=function(){return(i.dynCall_iii=i.asm.dynCall_iii).apply(null,arguments)},i.dynCall_iiii=function(){return(i.dynCall_iiii=i.asm.dynCall_iiii).apply(null,arguments)},i.dynCall_iiiiiii=function(){return(i.dynCall_iiiiiii=i.asm.dynCall_iiiiiii).apply(null,arguments)},i.dynCall_viiii=function(){return(i.dynCall_viiii=i.asm.dynCall_viiii).apply(null,arguments)},i.dynCall_viii=function(){return(i.dynCall_viii=i.asm.dynCall_viii).apply(null,arguments)},i.dynCall_viiiiii=function(){return(i.dynCall_viiiiii=i.asm.dynCall_viiiiii).apply(null,arguments)},i.dynCall_viiiii=function(){return(i.dynCall_viiiii=i.asm.dynCall_viiiii).apply(null,arguments)},i.dynCall_viiiiiiiii=function(){return(i.dynCall_viiiiiiiii=i.asm.dynCall_viiiiiiiii).apply(null,arguments)},i.dynCall_jiiii=function(){return(i.dynCall_jiiii=i.asm.dynCall_jiiii).apply(null,arguments)},i.dynCall_jiji=function(){return(i.dynCall_jiji=i.asm.dynCall_jiji).apply(null,arguments)};var ha=i.__growWasmMemory=function(){return(ha=i.__growWasmMemory=i.asm.__growWasmMemory).apply(null,arguments)};i.cwrap=Le;var fa;function Co(U){this.name="ExitStatus",this.message="Program terminated with exit("+U+")",this.status=U}Q=function U(){fa||nl(),fa||(Q=U)};function nl(U){if(Me>0||($e(),Me>0))return;function $(){fa||(fa=!0,i.calledRun=!0,!ee&&(Yt(),li(),i.onRuntimeInitialized&&i.onRuntimeInitialized(),Zt()))}i.setStatus?(i.setStatus("Running..."),setTimeout(function(){setTimeout(function(){i.setStatus("")},1),$()},1)):$()}if(i.run=nl,i.preInit)for(typeof i.preInit=="function"&&(i.preInit=[i.preInit]);i.preInit.length>0;)i.preInit.pop()();nl(),this.Module=i,this.webpToSdl=i.cwrap("WebpToSDL","number",["array","number"]),this.setCanvas=function(U){i.canvas=U},this.Module.doNotCaptureKeyboard=!0}const _7=()=>new Promise(i=>requestAnimationFrame(i));class Zp extends Error{}const v7=i=>/\.webp.*$/i.test(i.src);class b7{constructor({webp:e=new y7,webpSupport:t=m7(),detectWebpImage:o=v7}={}){this.busy=!1,this.cache={},this.webp=e,this.webpSupport=t,this.detectWebpImage=o}async decode(e){if(this.busy)throw new Zp("cannot decode when already busy");this.busy=!0;try{await _7();const t=document.createElement("canvas");return this.webp.setCanvas(t),this.webp.webpToSdl(e,e.length),this.busy=!1,t.toDataURL()}catch(t){throw this.busy=!1,t.name=Zp.name,t.message=`failed to decode webp image: ${t.message}`,t}}async polyfillImage(e){if(await this.webpSupport)return;const{src:t}=e;if(this.detectWebpImage(e)){if(this.cache[t]){e.src=this.cache[t];return}try{const o=d7(t)?p7(t):await v3(t),l=await this.decode(o);e.src=this.cache[t]=l}catch(o){throw o.name=Zp.name,o.message=`failed to polyfill image "${t}": ${o.message}`,o}}}async polyfillDocument({document:e=window.document}={}){if(await this.webpSupport)return null;for(const t of Array.from(e.querySelectorAll("img")))try{await this.polyfillImage(t)}catch(o){throw o.name=Zp.name,o.message=`webp image polyfill failed for url "${t.src}": ${o}`,o}}clearCache(){this.cache={}}}var b3={},Q1={};Q1.byteLength=A7;Q1.toByteArray=S7;Q1.fromByteArray=I7;var th=[],$u=[],w7=typeof Uint8Array<"u"?Uint8Array:Array,k2="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var E0=0,x7=k2.length;E0<x7;++E0)th[E0]=k2[E0],$u[k2.charCodeAt(E0)]=E0;$u["-".charCodeAt(0)]=62;$u["_".charCodeAt(0)]=63;function w3(i){var e=i.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var t=i.indexOf("=");t===-1&&(t=e);var o=t===e?0:4-t%4;return[t,o]}function A7(i){var e=w3(i),t=e[0],o=e[1];return(t+o)*3/4-o}function k7(i,e,t){return(e+t)*3/4-t}function S7(i){var e,t=w3(i),o=t[0],l=t[1],u=new w7(k7(i,o,l)),m=0,r=l>0?o-4:o,h;for(h=0;h<r;h+=4)e=$u[i.charCodeAt(h)]<<18|$u[i.charCodeAt(h+1)]<<12|$u[i.charCodeAt(h+2)]<<6|$u[i.charCodeAt(h+3)],u[m++]=e>>16&255,u[m++]=e>>8&255,u[m++]=e&255;return l===2&&(e=$u[i.charCodeAt(h)]<<2|$u[i.charCodeAt(h+1)]>>4,u[m++]=e&255),l===1&&(e=$u[i.charCodeAt(h)]<<10|$u[i.charCodeAt(h+1)]<<4|$u[i.charCodeAt(h+2)]>>2,u[m++]=e>>8&255,u[m++]=e&255),u}function C7(i){return th[i>>18&63]+th[i>>12&63]+th[i>>6&63]+th[i&63]}function E7(i,e,t){for(var o,l=[],u=e;u<t;u+=3)o=(i[u]<<16&16711680)+(i[u+1]<<8&65280)+(i[u+2]&255),l.push(C7(o));return l.join("")}function I7(i){for(var e,t=i.length,o=t%3,l=[],u=16383,m=0,r=t-o;m<r;m+=u)l.push(E7(i,m,m+u>r?r:m+u));return o===1?(e=i[t-1],l.push(th[e>>2]+th[e<<4&63]+"==")):o===2&&(e=(i[t-2]<<8)+i[t-1],l.push(th[e>>10]+th[e>>4&63]+th[e<<2&63]+"=")),l.join("")}var sy={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */sy.read=function(i,e,t,o,l){var u,m,r=l*8-o-1,h=(1<<r)-1,y=h>>1,b=-7,v=t?l-1:0,w=t?-1:1,x=i[e+v];for(v+=w,u=x&(1<<-b)-1,x>>=-b,b+=r;b>0;u=u*256+i[e+v],v+=w,b-=8);for(m=u&(1<<-b)-1,u>>=-b,b+=o;b>0;m=m*256+i[e+v],v+=w,b-=8);if(u===0)u=1-y;else{if(u===h)return m?NaN:(x?-1:1)*(1/0);m=m+Math.pow(2,o),u=u-y}return(x?-1:1)*m*Math.pow(2,u-o)};sy.write=function(i,e,t,o,l,u){var m,r,h,y=u*8-l-1,b=(1<<y)-1,v=b>>1,w=l===23?Math.pow(2,-24)-Math.pow(2,-77):0,x=o?0:u-1,C=o?1:-1,T=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(r=isNaN(e)?1:0,m=b):(m=Math.floor(Math.log(e)/Math.LN2),e*(h=Math.pow(2,-m))<1&&(m--,h*=2),m+v>=1?e+=w/h:e+=w*Math.pow(2,1-v),e*h>=2&&(m++,h/=2),m+v>=b?(r=0,m=b):m+v>=1?(r=(e*h-1)*Math.pow(2,l),m=m+v):(r=e*Math.pow(2,v-1)*Math.pow(2,l),m=0));l>=8;i[t+x]=r&255,x+=C,r/=256,l-=8);for(m=m<<l|r,y+=l;y>0;i[t+x]=m&255,x+=C,m/=256,y-=8);i[t+x-C]|=T*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(i){const e=Q1,t=sy,o=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;i.Buffer=r,i.SlowBuffer=O,i.INSPECT_MAX_BYTES=50;const l=2147483647;i.kMaxLength=l,r.TYPED_ARRAY_SUPPORT=u(),!r.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function u(){try{const Me=new Uint8Array(1),Q={foo:function(){return 42}};return Object.setPrototypeOf(Q,Uint8Array.prototype),Object.setPrototypeOf(Me,Q),Me.foo()===42}catch{return!1}}Object.defineProperty(r.prototype,"parent",{enumerable:!0,get:function(){if(!!r.isBuffer(this))return this.buffer}}),Object.defineProperty(r.prototype,"offset",{enumerable:!0,get:function(){if(!!r.isBuffer(this))return this.byteOffset}});function m(Me){if(Me>l)throw new RangeError('The value "'+Me+'" is invalid for option "size"');const Q=new Uint8Array(Me);return Object.setPrototypeOf(Q,r.prototype),Q}function r(Me,Q,ae){if(typeof Me=="number"){if(typeof Q=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return v(Me)}return h(Me,Q,ae)}r.poolSize=8192;function h(Me,Q,ae){if(typeof Me=="string")return w(Me,Q);if(ArrayBuffer.isView(Me))return C(Me);if(Me==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof Me);if(Vt(Me,ArrayBuffer)||Me&&Vt(Me.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(Vt(Me,SharedArrayBuffer)||Me&&Vt(Me.buffer,SharedArrayBuffer)))return T(Me,Q,ae);if(typeof Me=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const et=Me.valueOf&&Me.valueOf();if(et!=null&&et!==Me)return r.from(et,Q,ae);const vt=S(Me);if(vt)return vt;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof Me[Symbol.toPrimitive]=="function")return r.from(Me[Symbol.toPrimitive]("string"),Q,ae);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof Me)}r.from=function(Me,Q,ae){return h(Me,Q,ae)},Object.setPrototypeOf(r.prototype,Uint8Array.prototype),Object.setPrototypeOf(r,Uint8Array);function y(Me){if(typeof Me!="number")throw new TypeError('"size" argument must be of type number');if(Me<0)throw new RangeError('The value "'+Me+'" is invalid for option "size"')}function b(Me,Q,ae){return y(Me),Me<=0?m(Me):Q!==void 0?typeof ae=="string"?m(Me).fill(Q,ae):m(Me).fill(Q):m(Me)}r.alloc=function(Me,Q,ae){return b(Me,Q,ae)};function v(Me){return y(Me),m(Me<0?0:M(Me)|0)}r.allocUnsafe=function(Me){return v(Me)},r.allocUnsafeSlow=function(Me){return v(Me)};function w(Me,Q){if((typeof Q!="string"||Q==="")&&(Q="utf8"),!r.isEncoding(Q))throw new TypeError("Unknown encoding: "+Q);const ae=V(Me,Q)|0;let et=m(ae);const vt=et.write(Me,Q);return vt!==ae&&(et=et.slice(0,vt)),et}function x(Me){const Q=Me.length<0?0:M(Me.length)|0,ae=m(Q);for(let et=0;et<Q;et+=1)ae[et]=Me[et]&255;return ae}function C(Me){if(Vt(Me,Uint8Array)){const Q=new Uint8Array(Me);return T(Q.buffer,Q.byteOffset,Q.byteLength)}return x(Me)}function T(Me,Q,ae){if(Q<0||Me.byteLength<Q)throw new RangeError('"offset" is outside of buffer bounds');if(Me.byteLength<Q+(ae||0))throw new RangeError('"length" is outside of buffer bounds');let et;return Q===void 0&&ae===void 0?et=new Uint8Array(Me):ae===void 0?et=new Uint8Array(Me,Q):et=new Uint8Array(Me,Q,ae),Object.setPrototypeOf(et,r.prototype),et}function S(Me){if(r.isBuffer(Me)){const Q=M(Me.length)|0,ae=m(Q);return ae.length===0||Me.copy(ae,0,0,Q),ae}if(Me.length!==void 0)return typeof Me.length!="number"||mi(Me.length)?m(0):x(Me);if(Me.type==="Buffer"&&Array.isArray(Me.data))return x(Me.data)}function M(Me){if(Me>=l)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+l.toString(16)+" bytes");return Me|0}function O(Me){return+Me!=Me&&(Me=0),r.alloc(+Me)}r.isBuffer=function(Q){return Q!=null&&Q._isBuffer===!0&&Q!==r.prototype},r.compare=function(Q,ae){if(Vt(Q,Uint8Array)&&(Q=r.from(Q,Q.offset,Q.byteLength)),Vt(ae,Uint8Array)&&(ae=r.from(ae,ae.offset,ae.byteLength)),!r.isBuffer(Q)||!r.isBuffer(ae))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(Q===ae)return 0;let et=Q.length,vt=ae.length;for(let Wt=0,di=Math.min(et,vt);Wt<di;++Wt)if(Q[Wt]!==ae[Wt]){et=Q[Wt],vt=ae[Wt];break}return et<vt?-1:vt<et?1:0},r.isEncoding=function(Q){switch(String(Q).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},r.concat=function(Q,ae){if(!Array.isArray(Q))throw new TypeError('"list" argument must be an Array of Buffers');if(Q.length===0)return r.alloc(0);let et;if(ae===void 0)for(ae=0,et=0;et<Q.length;++et)ae+=Q[et].length;const vt=r.allocUnsafe(ae);let Wt=0;for(et=0;et<Q.length;++et){let di=Q[et];if(Vt(di,Uint8Array))Wt+di.length>vt.length?(r.isBuffer(di)||(di=r.from(di)),di.copy(vt,Wt)):Uint8Array.prototype.set.call(vt,di,Wt);else if(r.isBuffer(di))di.copy(vt,Wt);else throw new TypeError('"list" argument must be an Array of Buffers');Wt+=di.length}return vt};function V(Me,Q){if(r.isBuffer(Me))return Me.length;if(ArrayBuffer.isView(Me)||Vt(Me,ArrayBuffer))return Me.byteLength;if(typeof Me!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof Me);const ae=Me.length,et=arguments.length>2&&arguments[2]===!0;if(!et&&ae===0)return 0;let vt=!1;for(;;)switch(Q){case"ascii":case"latin1":case"binary":return ae;case"utf8":case"utf-8":return Yt(Me).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ae*2;case"hex":return ae>>>1;case"base64":return Ci(Me).length;default:if(vt)return et?-1:Yt(Me).length;Q=(""+Q).toLowerCase(),vt=!0}}r.byteLength=V;function X(Me,Q,ae){let et=!1;if((Q===void 0||Q<0)&&(Q=0),Q>this.length||((ae===void 0||ae>this.length)&&(ae=this.length),ae<=0)||(ae>>>=0,Q>>>=0,ae<=Q))return"";for(Me||(Me="utf8");;)switch(Me){case"hex":return be(this,Q,ae);case"utf8":case"utf-8":return ve(this,Q,ae);case"ascii":return Tt(this,Q,ae);case"latin1":case"binary":return We(this,Q,ae);case"base64":return _e(this,Q,ae);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Ce(this,Q,ae);default:if(et)throw new TypeError("Unknown encoding: "+Me);Me=(Me+"").toLowerCase(),et=!0}}r.prototype._isBuffer=!0;function Z(Me,Q,ae){const et=Me[Q];Me[Q]=Me[ae],Me[ae]=et}r.prototype.swap16=function(){const Q=this.length;if(Q%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let ae=0;ae<Q;ae+=2)Z(this,ae,ae+1);return this},r.prototype.swap32=function(){const Q=this.length;if(Q%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let ae=0;ae<Q;ae+=4)Z(this,ae,ae+3),Z(this,ae+1,ae+2);return this},r.prototype.swap64=function(){const Q=this.length;if(Q%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let ae=0;ae<Q;ae+=8)Z(this,ae,ae+7),Z(this,ae+1,ae+6),Z(this,ae+2,ae+5),Z(this,ae+3,ae+4);return this},r.prototype.toString=function(){const Q=this.length;return Q===0?"":arguments.length===0?ve(this,0,Q):X.apply(this,arguments)},r.prototype.toLocaleString=r.prototype.toString,r.prototype.equals=function(Q){if(!r.isBuffer(Q))throw new TypeError("Argument must be a Buffer");return this===Q?!0:r.compare(this,Q)===0},r.prototype.inspect=function(){let Q="";const ae=i.INSPECT_MAX_BYTES;return Q=this.toString("hex",0,ae).replace(/(.{2})/g,"$1 ").trim(),this.length>ae&&(Q+=" ... "),"<Buffer "+Q+">"},o&&(r.prototype[o]=r.prototype.inspect),r.prototype.compare=function(Q,ae,et,vt,Wt){if(Vt(Q,Uint8Array)&&(Q=r.from(Q,Q.offset,Q.byteLength)),!r.isBuffer(Q))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof Q);if(ae===void 0&&(ae=0),et===void 0&&(et=Q?Q.length:0),vt===void 0&&(vt=0),Wt===void 0&&(Wt=this.length),ae<0||et>Q.length||vt<0||Wt>this.length)throw new RangeError("out of range index");if(vt>=Wt&&ae>=et)return 0;if(vt>=Wt)return-1;if(ae>=et)return 1;if(ae>>>=0,et>>>=0,vt>>>=0,Wt>>>=0,this===Q)return 0;let di=Wt-vt,xn=et-ae;const Mn=Math.min(di,xn),fn=this.slice(vt,Wt),Bi=Q.slice(ae,et);for(let en=0;en<Mn;++en)if(fn[en]!==Bi[en]){di=fn[en],xn=Bi[en];break}return di<xn?-1:xn<di?1:0};function ee(Me,Q,ae,et,vt){if(Me.length===0)return-1;if(typeof ae=="string"?(et=ae,ae=0):ae>2147483647?ae=2147483647:ae<-2147483648&&(ae=-2147483648),ae=+ae,mi(ae)&&(ae=vt?0:Me.length-1),ae<0&&(ae=Me.length+ae),ae>=Me.length){if(vt)return-1;ae=Me.length-1}else if(ae<0)if(vt)ae=0;else return-1;if(typeof Q=="string"&&(Q=r.from(Q,et)),r.isBuffer(Q))return Q.length===0?-1:J(Me,Q,ae,et,vt);if(typeof Q=="number")return Q=Q&255,typeof Uint8Array.prototype.indexOf=="function"?vt?Uint8Array.prototype.indexOf.call(Me,Q,ae):Uint8Array.prototype.lastIndexOf.call(Me,Q,ae):J(Me,[Q],ae,et,vt);throw new TypeError("val must be string, number or Buffer")}function J(Me,Q,ae,et,vt){let Wt=1,di=Me.length,xn=Q.length;if(et!==void 0&&(et=String(et).toLowerCase(),et==="ucs2"||et==="ucs-2"||et==="utf16le"||et==="utf-16le")){if(Me.length<2||Q.length<2)return-1;Wt=2,di/=2,xn/=2,ae/=2}function Mn(Bi,en){return Wt===1?Bi[en]:Bi.readUInt16BE(en*Wt)}let fn;if(vt){let Bi=-1;for(fn=ae;fn<di;fn++)if(Mn(Me,fn)===Mn(Q,Bi===-1?0:fn-Bi)){if(Bi===-1&&(Bi=fn),fn-Bi+1===xn)return Bi*Wt}else Bi!==-1&&(fn-=fn-Bi),Bi=-1}else for(ae+xn>di&&(ae=di-xn),fn=ae;fn>=0;fn--){let Bi=!0;for(let en=0;en<xn;en++)if(Mn(Me,fn+en)!==Mn(Q,en)){Bi=!1;break}if(Bi)return fn}return-1}r.prototype.includes=function(Q,ae,et){return this.indexOf(Q,ae,et)!==-1},r.prototype.indexOf=function(Q,ae,et){return ee(this,Q,ae,et,!0)},r.prototype.lastIndexOf=function(Q,ae,et){return ee(this,Q,ae,et,!1)};function ie(Me,Q,ae,et){ae=Number(ae)||0;const vt=Me.length-ae;et?(et=Number(et),et>vt&&(et=vt)):et=vt;const Wt=Q.length;et>Wt/2&&(et=Wt/2);let di;for(di=0;di<et;++di){const xn=parseInt(Q.substr(di*2,2),16);if(mi(xn))return di;Me[ae+di]=xn}return di}function ke(Me,Q,ae,et){return Li(Yt(Q,Me.length-ae),Me,ae,et)}function Le(Me,Q,ae,et){return Li(li(Q),Me,ae,et)}function fe(Me,Q,ae,et){return Li(Ci(Q),Me,ae,et)}function Te(Me,Q,ae,et){return Li(Zt(Q,Me.length-ae),Me,ae,et)}r.prototype.write=function(Q,ae,et,vt){if(ae===void 0)vt="utf8",et=this.length,ae=0;else if(et===void 0&&typeof ae=="string")vt=ae,et=this.length,ae=0;else if(isFinite(ae))ae=ae>>>0,isFinite(et)?(et=et>>>0,vt===void 0&&(vt="utf8")):(vt=et,et=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const Wt=this.length-ae;if((et===void 0||et>Wt)&&(et=Wt),Q.length>0&&(et<0||ae<0)||ae>this.length)throw new RangeError("Attempt to write outside buffer bounds");vt||(vt="utf8");let di=!1;for(;;)switch(vt){case"hex":return ie(this,Q,ae,et);case"utf8":case"utf-8":return ke(this,Q,ae,et);case"ascii":case"latin1":case"binary":return Le(this,Q,ae,et);case"base64":return fe(this,Q,ae,et);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Te(this,Q,ae,et);default:if(di)throw new TypeError("Unknown encoding: "+vt);vt=(""+vt).toLowerCase(),di=!0}},r.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function _e(Me,Q,ae){return Q===0&&ae===Me.length?e.fromByteArray(Me):e.fromByteArray(Me.slice(Q,ae))}function ve(Me,Q,ae){ae=Math.min(Me.length,ae);const et=[];let vt=Q;for(;vt<ae;){const Wt=Me[vt];let di=null,xn=Wt>239?4:Wt>223?3:Wt>191?2:1;if(vt+xn<=ae){let Mn,fn,Bi,en;switch(xn){case 1:Wt<128&&(di=Wt);break;case 2:Mn=Me[vt+1],(Mn&192)===128&&(en=(Wt&31)<<6|Mn&63,en>127&&(di=en));break;case 3:Mn=Me[vt+1],fn=Me[vt+2],(Mn&192)===128&&(fn&192)===128&&(en=(Wt&15)<<12|(Mn&63)<<6|fn&63,en>2047&&(en<55296||en>57343)&&(di=en));break;case 4:Mn=Me[vt+1],fn=Me[vt+2],Bi=Me[vt+3],(Mn&192)===128&&(fn&192)===128&&(Bi&192)===128&&(en=(Wt&15)<<18|(Mn&63)<<12|(fn&63)<<6|Bi&63,en>65535&&en<1114112&&(di=en))}}di===null?(di=65533,xn=1):di>65535&&(di-=65536,et.push(di>>>10&1023|55296),di=56320|di&1023),et.push(di),vt+=xn}return nt(et)}const rt=4096;function nt(Me){const Q=Me.length;if(Q<=rt)return String.fromCharCode.apply(String,Me);let ae="",et=0;for(;et<Q;)ae+=String.fromCharCode.apply(String,Me.slice(et,et+=rt));return ae}function Tt(Me,Q,ae){let et="";ae=Math.min(Me.length,ae);for(let vt=Q;vt<ae;++vt)et+=String.fromCharCode(Me[vt]&127);return et}function We(Me,Q,ae){let et="";ae=Math.min(Me.length,ae);for(let vt=Q;vt<ae;++vt)et+=String.fromCharCode(Me[vt]);return et}function be(Me,Q,ae){const et=Me.length;(!Q||Q<0)&&(Q=0),(!ae||ae<0||ae>et)&&(ae=et);let vt="";for(let Wt=Q;Wt<ae;++Wt)vt+=Qi[Me[Wt]];return vt}function Ce(Me,Q,ae){const et=Me.slice(Q,ae);let vt="";for(let Wt=0;Wt<et.length-1;Wt+=2)vt+=String.fromCharCode(et[Wt]+et[Wt+1]*256);return vt}r.prototype.slice=function(Q,ae){const et=this.length;Q=~~Q,ae=ae===void 0?et:~~ae,Q<0?(Q+=et,Q<0&&(Q=0)):Q>et&&(Q=et),ae<0?(ae+=et,ae<0&&(ae=0)):ae>et&&(ae=et),ae<Q&&(ae=Q);const vt=this.subarray(Q,ae);return Object.setPrototypeOf(vt,r.prototype),vt};function Be(Me,Q,ae){if(Me%1!==0||Me<0)throw new RangeError("offset is not uint");if(Me+Q>ae)throw new RangeError("Trying to access beyond buffer length")}r.prototype.readUintLE=r.prototype.readUIntLE=function(Q,ae,et){Q=Q>>>0,ae=ae>>>0,et||Be(Q,ae,this.length);let vt=this[Q],Wt=1,di=0;for(;++di<ae&&(Wt*=256);)vt+=this[Q+di]*Wt;return vt},r.prototype.readUintBE=r.prototype.readUIntBE=function(Q,ae,et){Q=Q>>>0,ae=ae>>>0,et||Be(Q,ae,this.length);let vt=this[Q+--ae],Wt=1;for(;ae>0&&(Wt*=256);)vt+=this[Q+--ae]*Wt;return vt},r.prototype.readUint8=r.prototype.readUInt8=function(Q,ae){return Q=Q>>>0,ae||Be(Q,1,this.length),this[Q]},r.prototype.readUint16LE=r.prototype.readUInt16LE=function(Q,ae){return Q=Q>>>0,ae||Be(Q,2,this.length),this[Q]|this[Q+1]<<8},r.prototype.readUint16BE=r.prototype.readUInt16BE=function(Q,ae){return Q=Q>>>0,ae||Be(Q,2,this.length),this[Q]<<8|this[Q+1]},r.prototype.readUint32LE=r.prototype.readUInt32LE=function(Q,ae){return Q=Q>>>0,ae||Be(Q,4,this.length),(this[Q]|this[Q+1]<<8|this[Q+2]<<16)+this[Q+3]*16777216},r.prototype.readUint32BE=r.prototype.readUInt32BE=function(Q,ae){return Q=Q>>>0,ae||Be(Q,4,this.length),this[Q]*16777216+(this[Q+1]<<16|this[Q+2]<<8|this[Q+3])},r.prototype.readBigUInt64LE=xi(function(Q){Q=Q>>>0,dt(Q,"offset");const ae=this[Q],et=this[Q+7];(ae===void 0||et===void 0)&&wt(Q,this.length-8);const vt=ae+this[++Q]*2**8+this[++Q]*2**16+this[++Q]*2**24,Wt=this[++Q]+this[++Q]*2**8+this[++Q]*2**16+et*2**24;return BigInt(vt)+(BigInt(Wt)<<BigInt(32))}),r.prototype.readBigUInt64BE=xi(function(Q){Q=Q>>>0,dt(Q,"offset");const ae=this[Q],et=this[Q+7];(ae===void 0||et===void 0)&&wt(Q,this.length-8);const vt=ae*2**24+this[++Q]*2**16+this[++Q]*2**8+this[++Q],Wt=this[++Q]*2**24+this[++Q]*2**16+this[++Q]*2**8+et;return(BigInt(vt)<<BigInt(32))+BigInt(Wt)}),r.prototype.readIntLE=function(Q,ae,et){Q=Q>>>0,ae=ae>>>0,et||Be(Q,ae,this.length);let vt=this[Q],Wt=1,di=0;for(;++di<ae&&(Wt*=256);)vt+=this[Q+di]*Wt;return Wt*=128,vt>=Wt&&(vt-=Math.pow(2,8*ae)),vt},r.prototype.readIntBE=function(Q,ae,et){Q=Q>>>0,ae=ae>>>0,et||Be(Q,ae,this.length);let vt=ae,Wt=1,di=this[Q+--vt];for(;vt>0&&(Wt*=256);)di+=this[Q+--vt]*Wt;return Wt*=128,di>=Wt&&(di-=Math.pow(2,8*ae)),di},r.prototype.readInt8=function(Q,ae){return Q=Q>>>0,ae||Be(Q,1,this.length),this[Q]&128?(255-this[Q]+1)*-1:this[Q]},r.prototype.readInt16LE=function(Q,ae){Q=Q>>>0,ae||Be(Q,2,this.length);const et=this[Q]|this[Q+1]<<8;return et&32768?et|4294901760:et},r.prototype.readInt16BE=function(Q,ae){Q=Q>>>0,ae||Be(Q,2,this.length);const et=this[Q+1]|this[Q]<<8;return et&32768?et|4294901760:et},r.prototype.readInt32LE=function(Q,ae){return Q=Q>>>0,ae||Be(Q,4,this.length),this[Q]|this[Q+1]<<8|this[Q+2]<<16|this[Q+3]<<24},r.prototype.readInt32BE=function(Q,ae){return Q=Q>>>0,ae||Be(Q,4,this.length),this[Q]<<24|this[Q+1]<<16|this[Q+2]<<8|this[Q+3]},r.prototype.readBigInt64LE=xi(function(Q){Q=Q>>>0,dt(Q,"offset");const ae=this[Q],et=this[Q+7];(ae===void 0||et===void 0)&&wt(Q,this.length-8);const vt=this[Q+4]+this[Q+5]*2**8+this[Q+6]*2**16+(et<<24);return(BigInt(vt)<<BigInt(32))+BigInt(ae+this[++Q]*2**8+this[++Q]*2**16+this[++Q]*2**24)}),r.prototype.readBigInt64BE=xi(function(Q){Q=Q>>>0,dt(Q,"offset");const ae=this[Q],et=this[Q+7];(ae===void 0||et===void 0)&&wt(Q,this.length-8);const vt=(ae<<24)+this[++Q]*2**16+this[++Q]*2**8+this[++Q];return(BigInt(vt)<<BigInt(32))+BigInt(this[++Q]*2**24+this[++Q]*2**16+this[++Q]*2**8+et)}),r.prototype.readFloatLE=function(Q,ae){return Q=Q>>>0,ae||Be(Q,4,this.length),t.read(this,Q,!0,23,4)},r.prototype.readFloatBE=function(Q,ae){return Q=Q>>>0,ae||Be(Q,4,this.length),t.read(this,Q,!1,23,4)},r.prototype.readDoubleLE=function(Q,ae){return Q=Q>>>0,ae||Be(Q,8,this.length),t.read(this,Q,!0,52,8)},r.prototype.readDoubleBE=function(Q,ae){return Q=Q>>>0,ae||Be(Q,8,this.length),t.read(this,Q,!1,52,8)};function le(Me,Q,ae,et,vt,Wt){if(!r.isBuffer(Me))throw new TypeError('"buffer" argument must be a Buffer instance');if(Q>vt||Q<Wt)throw new RangeError('"value" argument is out of bounds');if(ae+et>Me.length)throw new RangeError("Index out of range")}r.prototype.writeUintLE=r.prototype.writeUIntLE=function(Q,ae,et,vt){if(Q=+Q,ae=ae>>>0,et=et>>>0,!vt){const xn=Math.pow(2,8*et)-1;le(this,Q,ae,et,xn,0)}let Wt=1,di=0;for(this[ae]=Q&255;++di<et&&(Wt*=256);)this[ae+di]=Q/Wt&255;return ae+et},r.prototype.writeUintBE=r.prototype.writeUIntBE=function(Q,ae,et,vt){if(Q=+Q,ae=ae>>>0,et=et>>>0,!vt){const xn=Math.pow(2,8*et)-1;le(this,Q,ae,et,xn,0)}let Wt=et-1,di=1;for(this[ae+Wt]=Q&255;--Wt>=0&&(di*=256);)this[ae+Wt]=Q/di&255;return ae+et},r.prototype.writeUint8=r.prototype.writeUInt8=function(Q,ae,et){return Q=+Q,ae=ae>>>0,et||le(this,Q,ae,1,255,0),this[ae]=Q&255,ae+1},r.prototype.writeUint16LE=r.prototype.writeUInt16LE=function(Q,ae,et){return Q=+Q,ae=ae>>>0,et||le(this,Q,ae,2,65535,0),this[ae]=Q&255,this[ae+1]=Q>>>8,ae+2},r.prototype.writeUint16BE=r.prototype.writeUInt16BE=function(Q,ae,et){return Q=+Q,ae=ae>>>0,et||le(this,Q,ae,2,65535,0),this[ae]=Q>>>8,this[ae+1]=Q&255,ae+2},r.prototype.writeUint32LE=r.prototype.writeUInt32LE=function(Q,ae,et){return Q=+Q,ae=ae>>>0,et||le(this,Q,ae,4,4294967295,0),this[ae+3]=Q>>>24,this[ae+2]=Q>>>16,this[ae+1]=Q>>>8,this[ae]=Q&255,ae+4},r.prototype.writeUint32BE=r.prototype.writeUInt32BE=function(Q,ae,et){return Q=+Q,ae=ae>>>0,et||le(this,Q,ae,4,4294967295,0),this[ae]=Q>>>24,this[ae+1]=Q>>>16,this[ae+2]=Q>>>8,this[ae+3]=Q&255,ae+4};function Ee(Me,Q,ae,et,vt){$t(Q,et,vt,Me,ae,7);let Wt=Number(Q&BigInt(4294967295));Me[ae++]=Wt,Wt=Wt>>8,Me[ae++]=Wt,Wt=Wt>>8,Me[ae++]=Wt,Wt=Wt>>8,Me[ae++]=Wt;let di=Number(Q>>BigInt(32)&BigInt(4294967295));return Me[ae++]=di,di=di>>8,Me[ae++]=di,di=di>>8,Me[ae++]=di,di=di>>8,Me[ae++]=di,ae}function he(Me,Q,ae,et,vt){$t(Q,et,vt,Me,ae,7);let Wt=Number(Q&BigInt(4294967295));Me[ae+7]=Wt,Wt=Wt>>8,Me[ae+6]=Wt,Wt=Wt>>8,Me[ae+5]=Wt,Wt=Wt>>8,Me[ae+4]=Wt;let di=Number(Q>>BigInt(32)&BigInt(4294967295));return Me[ae+3]=di,di=di>>8,Me[ae+2]=di,di=di>>8,Me[ae+1]=di,di=di>>8,Me[ae]=di,ae+8}r.prototype.writeBigUInt64LE=xi(function(Q,ae=0){return Ee(this,Q,ae,BigInt(0),BigInt("0xffffffffffffffff"))}),r.prototype.writeBigUInt64BE=xi(function(Q,ae=0){return he(this,Q,ae,BigInt(0),BigInt("0xffffffffffffffff"))}),r.prototype.writeIntLE=function(Q,ae,et,vt){if(Q=+Q,ae=ae>>>0,!vt){const Mn=Math.pow(2,8*et-1);le(this,Q,ae,et,Mn-1,-Mn)}let Wt=0,di=1,xn=0;for(this[ae]=Q&255;++Wt<et&&(di*=256);)Q<0&&xn===0&&this[ae+Wt-1]!==0&&(xn=1),this[ae+Wt]=(Q/di>>0)-xn&255;return ae+et},r.prototype.writeIntBE=function(Q,ae,et,vt){if(Q=+Q,ae=ae>>>0,!vt){const Mn=Math.pow(2,8*et-1);le(this,Q,ae,et,Mn-1,-Mn)}let Wt=et-1,di=1,xn=0;for(this[ae+Wt]=Q&255;--Wt>=0&&(di*=256);)Q<0&&xn===0&&this[ae+Wt+1]!==0&&(xn=1),this[ae+Wt]=(Q/di>>0)-xn&255;return ae+et},r.prototype.writeInt8=function(Q,ae,et){return Q=+Q,ae=ae>>>0,et||le(this,Q,ae,1,127,-128),Q<0&&(Q=255+Q+1),this[ae]=Q&255,ae+1},r.prototype.writeInt16LE=function(Q,ae,et){return Q=+Q,ae=ae>>>0,et||le(this,Q,ae,2,32767,-32768),this[ae]=Q&255,this[ae+1]=Q>>>8,ae+2},r.prototype.writeInt16BE=function(Q,ae,et){return Q=+Q,ae=ae>>>0,et||le(this,Q,ae,2,32767,-32768),this[ae]=Q>>>8,this[ae+1]=Q&255,ae+2},r.prototype.writeInt32LE=function(Q,ae,et){return Q=+Q,ae=ae>>>0,et||le(this,Q,ae,4,2147483647,-2147483648),this[ae]=Q&255,this[ae+1]=Q>>>8,this[ae+2]=Q>>>16,this[ae+3]=Q>>>24,ae+4},r.prototype.writeInt32BE=function(Q,ae,et){return Q=+Q,ae=ae>>>0,et||le(this,Q,ae,4,2147483647,-2147483648),Q<0&&(Q=4294967295+Q+1),this[ae]=Q>>>24,this[ae+1]=Q>>>16,this[ae+2]=Q>>>8,this[ae+3]=Q&255,ae+4},r.prototype.writeBigInt64LE=xi(function(Q,ae=0){return Ee(this,Q,ae,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),r.prototype.writeBigInt64BE=xi(function(Q,ae=0){return he(this,Q,ae,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function me(Me,Q,ae,et,vt,Wt){if(ae+et>Me.length)throw new RangeError("Index out of range");if(ae<0)throw new RangeError("Index out of range")}function Fe(Me,Q,ae,et,vt){return Q=+Q,ae=ae>>>0,vt||me(Me,Q,ae,4),t.write(Me,Q,ae,et,23,4),ae+4}r.prototype.writeFloatLE=function(Q,ae,et){return Fe(this,Q,ae,!0,et)},r.prototype.writeFloatBE=function(Q,ae,et){return Fe(this,Q,ae,!1,et)};function Xe(Me,Q,ae,et,vt){return Q=+Q,ae=ae>>>0,vt||me(Me,Q,ae,8),t.write(Me,Q,ae,et,52,8),ae+8}r.prototype.writeDoubleLE=function(Q,ae,et){return Xe(this,Q,ae,!0,et)},r.prototype.writeDoubleBE=function(Q,ae,et){return Xe(this,Q,ae,!1,et)},r.prototype.copy=function(Q,ae,et,vt){if(!r.isBuffer(Q))throw new TypeError("argument should be a Buffer");if(et||(et=0),!vt&&vt!==0&&(vt=this.length),ae>=Q.length&&(ae=Q.length),ae||(ae=0),vt>0&&vt<et&&(vt=et),vt===et||Q.length===0||this.length===0)return 0;if(ae<0)throw new RangeError("targetStart out of bounds");if(et<0||et>=this.length)throw new RangeError("Index out of range");if(vt<0)throw new RangeError("sourceEnd out of bounds");vt>this.length&&(vt=this.length),Q.length-ae<vt-et&&(vt=Q.length-ae+et);const Wt=vt-et;return this===Q&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(ae,et,vt):Uint8Array.prototype.set.call(Q,this.subarray(et,vt),ae),Wt},r.prototype.fill=function(Q,ae,et,vt){if(typeof Q=="string"){if(typeof ae=="string"?(vt=ae,ae=0,et=this.length):typeof et=="string"&&(vt=et,et=this.length),vt!==void 0&&typeof vt!="string")throw new TypeError("encoding must be a string");if(typeof vt=="string"&&!r.isEncoding(vt))throw new TypeError("Unknown encoding: "+vt);if(Q.length===1){const di=Q.charCodeAt(0);(vt==="utf8"&&di<128||vt==="latin1")&&(Q=di)}}else typeof Q=="number"?Q=Q&255:typeof Q=="boolean"&&(Q=Number(Q));if(ae<0||this.length<ae||this.length<et)throw new RangeError("Out of range index");if(et<=ae)return this;ae=ae>>>0,et=et===void 0?this.length:et>>>0,Q||(Q=0);let Wt;if(typeof Q=="number")for(Wt=ae;Wt<et;++Wt)this[Wt]=Q;else{const di=r.isBuffer(Q)?Q:r.from(Q,vt),xn=di.length;if(xn===0)throw new TypeError('The value "'+Q+'" is invalid for argument "value"');for(Wt=0;Wt<et-ae;++Wt)this[Wt+ae]=di[Wt%xn]}return this};const lt={};function Ye(Me,Q,ae){lt[Me]=class extends ae{constructor(){super(),Object.defineProperty(this,"message",{value:Q.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${Me}]`,this.stack,delete this.name}get code(){return Me}set code(vt){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:vt,writable:!0})}toString(){return`${this.name} [${Me}]: ${this.message}`}}}Ye("ERR_BUFFER_OUT_OF_BOUNDS",function(Me){return Me?`${Me} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),Ye("ERR_INVALID_ARG_TYPE",function(Me,Q){return`The "${Me}" argument must be of type number. Received type ${typeof Q}`},TypeError),Ye("ERR_OUT_OF_RANGE",function(Me,Q,ae){let et=`The value of "${Me}" is out of range.`,vt=ae;return Number.isInteger(ae)&&Math.abs(ae)>2**32?vt=Ke(String(ae)):typeof ae=="bigint"&&(vt=String(ae),(ae>BigInt(2)**BigInt(32)||ae<-(BigInt(2)**BigInt(32)))&&(vt=Ke(vt)),vt+="n"),et+=` It must be ${Q}. Received ${vt}`,et},RangeError);function Ke(Me){let Q="",ae=Me.length;const et=Me[0]==="-"?1:0;for(;ae>=et+4;ae-=3)Q=`_${Me.slice(ae-3,ae)}${Q}`;return`${Me.slice(0,ae)}${Q}`}function Lt(Me,Q,ae){dt(Q,"offset"),(Me[Q]===void 0||Me[Q+ae]===void 0)&&wt(Q,Me.length-(ae+1))}function $t(Me,Q,ae,et,vt,Wt){if(Me>ae||Me<Q){const di=typeof Q=="bigint"?"n":"";let xn;throw Wt>3?Q===0||Q===BigInt(0)?xn=`>= 0${di} and < 2${di} ** ${(Wt+1)*8}${di}`:xn=`>= -(2${di} ** ${(Wt+1)*8-1}${di}) and < 2 ** ${(Wt+1)*8-1}${di}`:xn=`>= ${Q}${di} and <= ${ae}${di}`,new lt.ERR_OUT_OF_RANGE("value",xn,Me)}Lt(et,vt,Wt)}function dt(Me,Q){if(typeof Me!="number")throw new lt.ERR_INVALID_ARG_TYPE(Q,"number",Me)}function wt(Me,Q,ae){throw Math.floor(Me)!==Me?(dt(Me,ae),new lt.ERR_OUT_OF_RANGE(ae||"offset","an integer",Me)):Q<0?new lt.ERR_BUFFER_OUT_OF_BOUNDS:new lt.ERR_OUT_OF_RANGE(ae||"offset",`>= ${ae?1:0} and <= ${Q}`,Me)}const bt=/[^+/0-9A-Za-z-_]/g;function $e(Me){if(Me=Me.split("=")[0],Me=Me.trim().replace(bt,""),Me.length<2)return"";for(;Me.length%4!==0;)Me=Me+"=";return Me}function Yt(Me,Q){Q=Q||1/0;let ae;const et=Me.length;let vt=null;const Wt=[];for(let di=0;di<et;++di){if(ae=Me.charCodeAt(di),ae>55295&&ae<57344){if(!vt){if(ae>56319){(Q-=3)>-1&&Wt.push(239,191,189);continue}else if(di+1===et){(Q-=3)>-1&&Wt.push(239,191,189);continue}vt=ae;continue}if(ae<56320){(Q-=3)>-1&&Wt.push(239,191,189),vt=ae;continue}ae=(vt-55296<<10|ae-56320)+65536}else vt&&(Q-=3)>-1&&Wt.push(239,191,189);if(vt=null,ae<128){if((Q-=1)<0)break;Wt.push(ae)}else if(ae<2048){if((Q-=2)<0)break;Wt.push(ae>>6|192,ae&63|128)}else if(ae<65536){if((Q-=3)<0)break;Wt.push(ae>>12|224,ae>>6&63|128,ae&63|128)}else if(ae<1114112){if((Q-=4)<0)break;Wt.push(ae>>18|240,ae>>12&63|128,ae>>6&63|128,ae&63|128)}else throw new Error("Invalid code point")}return Wt}function li(Me){const Q=[];for(let ae=0;ae<Me.length;++ae)Q.push(Me.charCodeAt(ae)&255);return Q}function Zt(Me,Q){let ae,et,vt;const Wt=[];for(let di=0;di<Me.length&&!((Q-=2)<0);++di)ae=Me.charCodeAt(di),et=ae>>8,vt=ae%256,Wt.push(vt),Wt.push(et);return Wt}function Ci(Me){return e.toByteArray($e(Me))}function Li(Me,Q,ae,et){let vt;for(vt=0;vt<et&&!(vt+ae>=Q.length||vt>=Me.length);++vt)Q[vt+ae]=Me[vt];return vt}function Vt(Me,Q){return Me instanceof Q||Me!=null&&Me.constructor!=null&&Me.constructor.name!=null&&Me.constructor.name===Q.name}function mi(Me){return Me!==Me}const Qi=function(){const Me="0123456789abcdef",Q=new Array(256);for(let ae=0;ae<16;++ae){const et=ae*16;for(let vt=0;vt<16;++vt)Q[et+vt]=Me[ae]+Me[vt]}return Q}();function xi(Me){return typeof BigInt>"u"?Jt:Me}function Jt(){throw new Error("BigInt not supported")}})(b3);const T7=Math.PI/180,L7=180/Math.PI,P7=i=>{const e=wb(i[0]+1,i[2]),t=wb(i[0],i[2]),o=xb(i[1]+1,i[2]),l=xb(i[1],i[2]);return[t,o,e,l]},wb=(i,e)=>i/Math.pow(2,e)*360-180,xb=(i,e)=>{const t=Math.PI-2*Math.PI*i/Math.pow(2,e);return L7*Math.atan(.5*(Math.exp(t)-Math.exp(-t)))},M7=(i,e,t)=>{const o=D7(i,e,t);return o[0]=Math.floor(o[0]),o[1]=Math.floor(o[1]),o},D7=(i,e,t)=>{const o=Math.sin(e*T7),l=Math.pow(2,t);let u=l*(i/360+.5);const m=l*(.5-.25*Math.log((1+o)/(1-o))/Math.PI);return u=u%l,u<0&&(u=u+l),[u,m,t]};class O7{constructor(e,t,o,l){this.url=e,this.tileSize=t,this.minzoom=o,this.maxzoom=l}getValue(e,t){return new Promise((o,l)=>{const u=e[0],m=e[1];let r=t;t>this.maxzoom?r=this.maxzoom:t<this.minzoom&&(r=this.minzoom);const h=M7(u,m,r),y=this.url.replace(/{x}/g,h[0].toString()).replace(/{y}/g,h[1].toString()).replace(/{z}/g,h[2].toString());let b=this.getUrlExtension(y);switch(b||(b="png"),b){case"png":vI.get(y,{responseType:"arraybuffer"}).then(v=>{const w=b3.Buffer.from(v.data,"binary"),x=this.getValueFromPNG(w,h,u,m);o(x)}).catch(v=>l(v));break;case"webp":v3(y).then(v=>{this.getValueFromWEBP(v,h,u,m).then(w=>{o(w)}).catch(w=>l(w))}).catch(v=>l(v));break;default:l(new Error(`Invalid file extension: ${b}`));break}})}getValueFromPNG(e,t,o,l){const m=f7.load(e).decodePixels(),r=this.pixels2rgba(m,t,o,l);return this.calc(r[0],r[1],r[2],r[3])}getValueFromWEBP(e,t,o,l){return new Promise((u,m)=>{new b7().decode(e).then(h=>{const y=this.dataURIConverter(h),b=this.getValueFromPNG(y,t,o,l);u(b)}).catch(h=>m(h))})}pixels2rgba(e,t,o,l){const u=[];for(let b=0;b<e.length;b+=4){const v=e[b],w=e[b+1],x=e[b+2],C=e[b+3],T=[v,w,x,C];u.push(T)}const m=P7(t),r=this.getPixelPosition(o,l,m),h=r[0]+r[1]*this.tileSize;return u[h]}getPixelPosition(e,t,o){const l=this.tileSize,u=this.tileSize,m=o[2]-o[0],r=o[3]-o[1],h=(e-o[0])/m,y=(t-o[1])/r,b=Math.floor(l*h),v=Math.floor(u*(1-y));return[b,v]}getUrlExtension(e){let t=e.split(/[#?]/)[0].split(".").pop();return t&&(t=t.trim()),t}dataURIConverter(e){const t=atob(e.split(",")[1]),o=new Uint8Array(t.length);for(let l=0;l<t.length;l+=1)o[l]=t.charCodeAt(l);return o}}var F7=globalThis&&globalThis.__awaiter||function(i,e,t,o){function l(u){return u instanceof t?u:new t(function(m){m(u)})}return new(t||(t=Promise))(function(u,m){function r(b){try{y(o.next(b))}catch(v){m(v)}}function h(b){try{y(o.throw(b))}catch(v){m(v)}}function y(b){b.done?u(b.value):l(b.value).then(r,h)}y((o=o.apply(i,e||[])).next())})};class R7 extends O7{constructor(e,t,o=5,l=15){super(e,t,o,l)}getElevation(e,t){return F7(this,void 0,void 0,function*(){return yield this.getValue(e,t)})}calc(e,t,o){return-1e4+(e*256*256+t*256+o)*.1}}var ou=63710088e-1,B7={centimeters:ou*100,centimetres:ou*100,degrees:ou/111325,feet:ou*3.28084,inches:ou*39.37,kilometers:ou/1e3,kilometres:ou/1e3,meters:ou,metres:ou,miles:ou/1609.344,millimeters:ou*1e3,millimetres:ou*1e3,nauticalmiles:ou/1852,radians:1,yards:ou*1.0936};function z7(i,e){e===void 0&&(e="kilometers");var t=B7[e];if(!t)throw new Error(e+" units is invalid");return i*t}function Kp(i){var e=i%360;return e*Math.PI/180}function Ab(i){if(!i)throw new Error("coord is required");if(!Array.isArray(i)){if(i.type==="Feature"&&i.geometry!==null&&i.geometry.type==="Point")return i.geometry.coordinates;if(i.type==="Point")return i.coordinates}if(Array.isArray(i)&&i.length>=2&&!Array.isArray(i[0])&&!Array.isArray(i[1]))return i;throw new Error("coord must be GeoJSON Point or an Array of numbers")}function N7(i,e,t){t===void 0&&(t={});var o=Ab(i),l=Ab(e),u=Kp(l[1]-o[1]),m=Kp(l[0]-o[0]),r=Kp(o[1]),h=Kp(l[1]),y=Math.pow(Math.sin(u/2),2)+Math.pow(Math.sin(m/2),2)*Math.cos(r)*Math.cos(h);return z7(2*Math.atan2(Math.sqrt(y),Math.sqrt(1-y)),t.units)}function j7(i){let e,t,o,l,u;t=new Oh({props:{variant:"raised",color:"primary",style:"width:100%",$$slots:{default:[X7]},$$scope:{ctx:i}}}),t.$on("click",i[5]);let m=i[1]&&kb(i);return{c(){e=ti("div"),Hi(t.$$.fragment),o=Xi(),m&&m.c(),l=gn(),this.h()},l(r){e=ii(r,"DIV",{class:!0});var h=si(e);$i(t.$$.fragment,h),h.forEach(Oe),o=Yi(r),m&&m.l(r),l=gn(),this.h()},h(){oi(e,"class","tool-button svelte-7hbpus")},m(r,h){Dt(r,e,h),Gi(t,e,null),Dt(r,o,h),m&&m.m(r,h),Dt(r,l,h),u=!0},p(r,h){const y={};h&524289&&(y.$$scope={dirty:h,ctx:r}),t.$set(y),r[1]?m?(m.p(r,h),h&2&&yt(m,1)):(m=kb(r),m.c(),yt(m,1),m.m(l.parentNode,l)):m&&(Dr(),At(m,1,1,()=>{m=null}),Mr())},i(r){u||(yt(t.$$.fragment,r),yt(m),u=!0)},o(r){At(t.$$.fragment,r),At(m),u=!1},d(r){r&&Oe(e),Wi(t),r&&Oe(o),m&&m.d(r),r&&Oe(l)}}}function U7(i){let e;return{c(){e=Cn("straighten")},l(t){e=En(t,"straighten")},m(t,o){Dt(t,e,o)},d(t){t&&Oe(e)}}}function V7(i){let e;return{c(){e=Cn("stop_circle")},l(t){e=En(t,"stop_circle")},m(t,o){Dt(t,e,o)},d(t){t&&Oe(e)}}}function q7(i){let e;function t(u,m){return u[0]?V7:U7}let o=t(i),l=o(i);return{c(){l.c(),e=gn()},l(u){l.l(u),e=gn()},m(u,m){l.m(u,m),Dt(u,e,m)},p(u,m){o!==(o=t(u))&&(l.d(1),l=o(u),l&&(l.c(),l.m(e.parentNode,e)))},d(u){l.d(u),u&&Oe(e)}}}function H7(i){let e;return{c(){e=Cn("Start measure")},l(t){e=En(t,"Start measure")},m(t,o){Dt(t,e,o)},d(t){t&&Oe(e)}}}function G7(i){let e;return{c(){e=Cn("Stop measure")},l(t){e=En(t,"Stop measure")},m(t,o){Dt(t,e,o)},d(t){t&&Oe(e)}}}function W7(i){let e;function t(u,m){return u[0]?G7:H7}let o=t(i),l=o(i);return{c(){l.c(),e=gn()},l(u){l.l(u),e=gn()},m(u,m){l.m(u,m),Dt(u,e,m)},p(u,m){o!==(o=t(u))&&(l.d(1),l=o(u),l&&(l.c(),l.m(e.parentNode,e)))},d(u){l.d(u),u&&Oe(e)}}}function X7(i){let e,t,o,l;return e=new tl({props:{class:"material-icons",$$slots:{default:[q7]},$$scope:{ctx:i}}}),o=new sh({props:{$$slots:{default:[W7]},$$scope:{ctx:i}}}),{c(){Hi(e.$$.fragment),t=Xi(),Hi(o.$$.fragment)},l(u){$i(e.$$.fragment,u),t=Yi(u),$i(o.$$.fragment,u)},m(u,m){Gi(e,u,m),Dt(u,t,m),Gi(o,u,m),l=!0},p(u,m){const r={};m&524289&&(r.$$scope={dirty:m,ctx:u}),e.$set(r);const h={};m&524289&&(h.$$scope={dirty:m,ctx:u}),o.$set(h)},i(u){l||(yt(e.$$.fragment,u),yt(o.$$.fragment,u),l=!0)},o(u){At(e.$$.fragment,u),At(o.$$.fragment,u),l=!1},d(u){Wi(e,u),u&&Oe(t),Wi(o,u)}}}function kb(i){let e,t,o,l,u,m,r;return o=new Oh({props:{variant:"raised",color:"secondary",style:"width:100%",$$slots:{default:[K7]},$$scope:{ctx:i}}}),o.$on("click",i[6]),m=new Oh({props:{variant:"raised",color:"secondary",style:"width:100%",$$slots:{default:[$7]},$$scope:{ctx:i}}}),m.$on("click",i[7]),{c(){e=ti("div"),t=ti("div"),Hi(o.$$.fragment),l=Xi(),u=ti("div"),Hi(m.$$.fragment),this.h()},l(h){e=ii(h,"DIV",{style:!0});var y=si(e);t=ii(y,"DIV",{class:!0});var b=si(t);$i(o.$$.fragment,b),b.forEach(Oe),l=Yi(y),u=ii(y,"DIV",{class:!0});var v=si(u);$i(m.$$.fragment,v),v.forEach(Oe),y.forEach(Oe),this.h()},h(){oi(t,"class","sub-button svelte-7hbpus"),oi(u,"class","sub-button svelte-7hbpus"),oc(e,"display","inline-flex"),oc(e,"width","100%")},m(h,y){Dt(h,e,y),Kt(e,t),Gi(o,t,null),Kt(e,l),Kt(e,u),Gi(m,u,null),r=!0},p(h,y){const b={};y&524288&&(b.$$scope={dirty:y,ctx:h}),o.$set(b);const v={};y&524288&&(v.$$scope={dirty:y,ctx:h}),m.$set(v)},i(h){r||(yt(o.$$.fragment,h),yt(m.$$.fragment,h),r=!0)},o(h){At(o.$$.fragment,h),At(m.$$.fragment,h),r=!1},d(h){h&&Oe(e),Wi(o),Wi(m)}}}function Y7(i){let e;return{c(){e=Cn("delete")},l(t){e=En(t,"delete")},m(t,o){Dt(t,e,o)},d(t){t&&Oe(e)}}}function Z7(i){let e;return{c(){e=Cn("Clear")},l(t){e=En(t,"Clear")},m(t,o){Dt(t,e,o)},d(t){t&&Oe(e)}}}function K7(i){let e,t,o,l;return e=new tl({props:{class:"material-icons",$$slots:{default:[Y7]},$$scope:{ctx:i}}}),o=new sh({props:{$$slots:{default:[Z7]},$$scope:{ctx:i}}}),{c(){Hi(e.$$.fragment),t=Xi(),Hi(o.$$.fragment)},l(u){$i(e.$$.fragment,u),t=Yi(u),$i(o.$$.fragment,u)},m(u,m){Gi(e,u,m),Dt(u,t,m),Gi(o,u,m),l=!0},p(u,m){const r={};m&524288&&(r.$$scope={dirty:m,ctx:u}),e.$set(r);const h={};m&524288&&(h.$$scope={dirty:m,ctx:u}),o.$set(h)},i(u){l||(yt(e.$$.fragment,u),yt(o.$$.fragment,u),l=!0)},o(u){At(e.$$.fragment,u),At(o.$$.fragment,u),l=!1},d(u){Wi(e,u),u&&Oe(t),Wi(o,u)}}}function J7(i){let e;return{c(){e=Cn("file_download")},l(t){e=En(t,"file_download")},m(t,o){Dt(t,e,o)},d(t){t&&Oe(e)}}}function Q7(i){let e;return{c(){e=Cn("GeoJSON")},l(t){e=En(t,"GeoJSON")},m(t,o){Dt(t,e,o)},d(t){t&&Oe(e)}}}function $7(i){let e,t,o,l;return e=new tl({props:{class:"material-icons",$$slots:{default:[J7]},$$scope:{ctx:i}}}),o=new sh({props:{$$slots:{default:[Q7]},$$scope:{ctx:i}}}),{c(){Hi(e.$$.fragment),t=Xi(),Hi(o.$$.fragment)},l(u){$i(e.$$.fragment,u),t=Yi(u),$i(o.$$.fragment,u)},m(u,m){Gi(e,u,m),Dt(u,t,m),Gi(o,u,m),l=!0},p(u,m){const r={};m&524288&&(r.$$scope={dirty:m,ctx:u}),e.$set(r);const h={};m&524288&&(h.$$scope={dirty:m,ctx:u}),o.$set(h)},i(u){l||(yt(e.$$.fragment,u),yt(o.$$.fragment,u),l=!0)},o(u){At(e.$$.fragment,u),At(o.$$.fragment,u),l=!1},d(u){Wi(e,u),u&&Oe(t),Wi(o,u)}}}function eL(i){let e,t,o=zr.elevation&&j7(i);return{c(){o&&o.c(),e=gn()},l(l){o&&o.l(l),e=gn()},m(l,u){o&&o.m(l,u),Dt(l,e,u),t=!0},p(l,[u]){zr.elevation&&o.p(l,u)},i(l){t||(yt(o),t=!0)},o(l){At(o),t=!1},d(l){o&&o.d(l),l&&Oe(e)}}}const I0="elev-controls-source-line",S2="elev-controls-layer-line",C2="elev-controls-layer-symbol",T0="elev-controls-source-symbol";function tL(i,e,t){let o,l;Wo(i,Ad,ee=>t(8,o=ee)),Wo(i,Mu,ee=>t(9,l=ee));let u,m=zr.elevation.options.units||"kilometers",r=!1;Ss(()=>{if(o)o.coordinates.length>0&&t(1,r=!0);else{const ee={markers:[],coordinates:[],elevations:[]};Ad.update(()=>ee)}}),Lc(()=>{u===!0&&b()});const h=()=>{u?b():y()},y=()=>{l&&(l.getCanvas().style.cursor="crosshair",t(0,u=!0),l.on("click",w),l.fire("elevation.on"))},b=()=>{t(0,u=!1),l&&(l.getCanvas().style.cursor="",l.off("click",w),l.fire("elevation.off"))},v=()=>{l&&(l.getLayer(S2)&&l.removeLayer(S2),l.getLayer(C2)&&l.removeLayer(C2),l.getSource(I0)&&l.removeSource(I0),l.getSource(T0)&&l.removeSource(T0)),o.markers.forEach(ee=>ee.remove()),t(1,r=!1)},w=ee=>{(!(l!=null&&l.getSource(I0))||!(l!=null&&l.getSource(T0)))&&(v(),x());let J=l==null?void 0:l.getZoom();J||(J=15),J=Math.round(J);const ie=[ee.lngLat.lng,ee.lngLat.lat];new R7(zr.elevation.url,zr.elevation.options.tileSize).getElevation(ie,J).then(Le=>{if(Le||(Le=-1),l){const fe=new Lu.exports.Marker({draggable:!0}).setLngLat(ee.lngLat).addTo(l);o.markers.push(fe),o.coordinates.push([ie[0],ie[1],Le]),o.elevations.push(Le),l.getSource(I0).setData(T(o.coordinates)),l.getSource(T0).setData(S(o.coordinates)),t(1,r=!0)}})},x=()=>{bl(Ad,o.markers=[],o),bl(Ad,o.coordinates=[],o),bl(Ad,o.elevations=[],o),l&&(l.addSource(I0,{type:"geojson",data:T(o.coordinates)}),l.addSource(T0,{type:"geojson",data:S(o.coordinates)}),l.addLayer({id:S2,type:"line",source:I0,paint:{"line-color":zr.elevation.options.mainColor,"line-width":2}}),l.addLayer({id:C2,type:"symbol",source:T0,layout:{"text-field":"{text}","text-font":zr.elevation.options.font,"text-size":zr.elevation.options.fontSize,"text-variable-anchor":["top","bottom","left","right"],"text-radial-offset":.8,"text-justify":"auto"},paint:{"text-color":zr.elevation.options.mainColor,"text-halo-color":zr.elevation.options.haloColor,"text-halo-width":zr.elevation.options.fontHalo}}))},C=(ee,J)=>{let ie=`${ee.toFixed(2)} km`;ee<1&&(ie=`${(ee*1e3).toFixed()} m`);let ke="";return J>0&&(ke=`
alt.${J}m`),`${ie}${ke}`},T=(ee=[])=>({type:"Feature",properties:{},geometry:{type:"LineString",coordinates:ee}}),S=(ee=[])=>{let J=0;return{type:"FeatureCollection",features:ee.map((ie,ke)=>(ke>0&&(J+=N7(ee[ke-1],ee[ke],{units:m})),{type:"Feature",properties:{id:ke+1,text:C(J,ie[2]),elevation:ie[2],length:(J*1e3).toFixed()},geometry:{type:"Point",coordinates:ie}}))}},M=()=>{if(o.coordinates.length===0)return;const ee=S(o.coordinates);if(ee.features.forEach(ke=>{delete ke.properties.text}),o.coordinates.length>1){const ke=T(o.coordinates);ee.features.push(ke)}const J="measure_result.geojson",ie=JSON.stringify(ee);O(J,ie)},O=(ee,J)=>{const ie=new Blob([J],{type:"text/plain"}),ke=document.createElement("a");ke.href=URL.createObjectURL(ie),ke.setAttribute("download",ee),ke.dispatchEvent(new MouseEvent("click"))};return[u,r,h,v,M,()=>h(),()=>v(),()=>M()]}class iL extends xr{constructor(e){super(),Ar(this,e,tL,eL,br,{})}}/**
 * @license
 * Copyright 2016 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var nL={LABEL_FLOAT_ABOVE:"mdc-floating-label--float-above",LABEL_REQUIRED:"mdc-floating-label--required",LABEL_SHAKE:"mdc-floating-label--shake",ROOT:"mdc-floating-label"};/**
 * @license
 * Copyright 2016 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var rL=function(i){xl(e,i);function e(t){var o=i.call(this,ts(ts({},e.defaultAdapter),t))||this;return o.shakeAnimationEndHandler=function(){o.handleShakeAnimationEnd()},o}return Object.defineProperty(e,"cssClasses",{get:function(){return nL},enumerable:!1,configurable:!0}),Object.defineProperty(e,"defaultAdapter",{get:function(){return{addClass:function(){},removeClass:function(){},getWidth:function(){return 0},registerInteractionHandler:function(){},deregisterInteractionHandler:function(){}}},enumerable:!1,configurable:!0}),e.prototype.init=function(){this.adapter.registerInteractionHandler("animationend",this.shakeAnimationEndHandler)},e.prototype.destroy=function(){this.adapter.deregisterInteractionHandler("animationend",this.shakeAnimationEndHandler)},e.prototype.getWidth=function(){return this.adapter.getWidth()},e.prototype.shake=function(t){var o=e.cssClasses.LABEL_SHAKE;t?this.adapter.addClass(o):this.adapter.removeClass(o)},e.prototype.float=function(t){var o=e.cssClasses,l=o.LABEL_FLOAT_ABOVE,u=o.LABEL_SHAKE;t?this.adapter.addClass(l):(this.adapter.removeClass(l),this.adapter.removeClass(u))},e.prototype.setRequired=function(t){var o=e.cssClasses.LABEL_REQUIRED;t?this.adapter.addClass(o):this.adapter.removeClass(o)},e.prototype.handleShakeAnimationEnd=function(){var t=e.cssClasses.LABEL_SHAKE;this.adapter.removeClass(t)},e}(Fu);/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var Bf={LINE_RIPPLE_ACTIVE:"mdc-line-ripple--active",LINE_RIPPLE_DEACTIVATING:"mdc-line-ripple--deactivating"};/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var oL=function(i){xl(e,i);function e(t){var o=i.call(this,ts(ts({},e.defaultAdapter),t))||this;return o.transitionEndHandler=function(l){o.handleTransitionEnd(l)},o}return Object.defineProperty(e,"cssClasses",{get:function(){return Bf},enumerable:!1,configurable:!0}),Object.defineProperty(e,"defaultAdapter",{get:function(){return{addClass:function(){},removeClass:function(){},hasClass:function(){return!1},setStyle:function(){},registerEventHandler:function(){},deregisterEventHandler:function(){}}},enumerable:!1,configurable:!0}),e.prototype.init=function(){this.adapter.registerEventHandler("transitionend",this.transitionEndHandler)},e.prototype.destroy=function(){this.adapter.deregisterEventHandler("transitionend",this.transitionEndHandler)},e.prototype.activate=function(){this.adapter.removeClass(Bf.LINE_RIPPLE_DEACTIVATING),this.adapter.addClass(Bf.LINE_RIPPLE_ACTIVE)},e.prototype.setRippleCenter=function(t){this.adapter.setStyle("transform-origin",t+"px center")},e.prototype.deactivate=function(){this.adapter.addClass(Bf.LINE_RIPPLE_DEACTIVATING)},e.prototype.handleTransitionEnd=function(t){var o=this.adapter.hasClass(Bf.LINE_RIPPLE_DEACTIVATING);t.propertyName==="opacity"&&o&&(this.adapter.removeClass(Bf.LINE_RIPPLE_ACTIVE),this.adapter.removeClass(Bf.LINE_RIPPLE_DEACTIVATING))},e}(Fu);/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var sL={ANCHOR:"mdc-menu-surface--anchor",ANIMATING_CLOSED:"mdc-menu-surface--animating-closed",ANIMATING_OPEN:"mdc-menu-surface--animating-open",FIXED:"mdc-menu-surface--fixed",IS_OPEN_BELOW:"mdc-menu-surface--is-open-below",OPEN:"mdc-menu-surface--open",ROOT:"mdc-menu-surface"},aL={CLOSED_EVENT:"MDCMenuSurface:closed",CLOSING_EVENT:"MDCMenuSurface:closing",OPENED_EVENT:"MDCMenuSurface:opened",FOCUSABLE_ELEMENTS:["button:not(:disabled)",'[href]:not([aria-disabled="true"])',"input:not(:disabled)","select:not(:disabled)","textarea:not(:disabled)",'[tabindex]:not([tabindex="-1"]):not([aria-disabled="true"])'].join(", ")},Id={TRANSITION_OPEN_DURATION:120,TRANSITION_CLOSE_DURATION:75,MARGIN_TO_EDGE:32,ANCHOR_TO_MENU_SURFACE_WIDTH_RATIO:.67,TOUCH_EVENT_WAIT_MS:30},$s;(function(i){i[i.BOTTOM=1]="BOTTOM",i[i.CENTER=2]="CENTER",i[i.RIGHT=4]="RIGHT",i[i.FLIP_RTL=8]="FLIP_RTL"})($s||($s={}));var Zf;(function(i){i[i.TOP_LEFT=0]="TOP_LEFT",i[i.TOP_RIGHT=4]="TOP_RIGHT",i[i.BOTTOM_LEFT=1]="BOTTOM_LEFT",i[i.BOTTOM_RIGHT=5]="BOTTOM_RIGHT",i[i.TOP_START=8]="TOP_START",i[i.TOP_END=12]="TOP_END",i[i.BOTTOM_START=9]="BOTTOM_START",i[i.BOTTOM_END=13]="BOTTOM_END"})(Zf||(Zf={}));/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var nf,Eh,ao={LIST_ITEM_ACTIVATED_CLASS:"mdc-list-item--activated",LIST_ITEM_CLASS:"mdc-list-item",LIST_ITEM_DISABLED_CLASS:"mdc-list-item--disabled",LIST_ITEM_SELECTED_CLASS:"mdc-list-item--selected",LIST_ITEM_TEXT_CLASS:"mdc-list-item__text",LIST_ITEM_PRIMARY_TEXT_CLASS:"mdc-list-item__primary-text",ROOT:"mdc-list"};nf={},nf[""+ao.LIST_ITEM_ACTIVATED_CLASS]="mdc-list-item--activated",nf[""+ao.LIST_ITEM_CLASS]="mdc-list-item",nf[""+ao.LIST_ITEM_DISABLED_CLASS]="mdc-list-item--disabled",nf[""+ao.LIST_ITEM_SELECTED_CLASS]="mdc-list-item--selected",nf[""+ao.LIST_ITEM_PRIMARY_TEXT_CLASS]="mdc-list-item__primary-text",nf[""+ao.ROOT]="mdc-list";var L0=(Eh={},Eh[""+ao.LIST_ITEM_ACTIVATED_CLASS]="mdc-deprecated-list-item--activated",Eh[""+ao.LIST_ITEM_CLASS]="mdc-deprecated-list-item",Eh[""+ao.LIST_ITEM_DISABLED_CLASS]="mdc-deprecated-list-item--disabled",Eh[""+ao.LIST_ITEM_SELECTED_CLASS]="mdc-deprecated-list-item--selected",Eh[""+ao.LIST_ITEM_TEXT_CLASS]="mdc-deprecated-list-item__text",Eh[""+ao.LIST_ITEM_PRIMARY_TEXT_CLASS]="mdc-deprecated-list-item__primary-text",Eh[""+ao.ROOT]="mdc-deprecated-list",Eh),rf={ACTION_EVENT:"MDCList:action",ARIA_CHECKED:"aria-checked",ARIA_CHECKED_CHECKBOX_SELECTOR:'[role="checkbox"][aria-checked="true"]',ARIA_CHECKED_RADIO_SELECTOR:'[role="radio"][aria-checked="true"]',ARIA_CURRENT:"aria-current",ARIA_DISABLED:"aria-disabled",ARIA_ORIENTATION:"aria-orientation",ARIA_ORIENTATION_HORIZONTAL:"horizontal",ARIA_ROLE_CHECKBOX_SELECTOR:'[role="checkbox"]',ARIA_SELECTED:"aria-selected",ARIA_INTERACTIVE_ROLES_SELECTOR:'[role="listbox"], [role="menu"]',ARIA_MULTI_SELECTABLE_SELECTOR:'[aria-multiselectable="true"]',CHECKBOX_RADIO_SELECTOR:'input[type="checkbox"], input[type="radio"]',CHECKBOX_SELECTOR:'input[type="checkbox"]',CHILD_ELEMENTS_TO_TOGGLE_TABINDEX:`
    .`+ao.LIST_ITEM_CLASS+` button:not(:disabled),
    .`+ao.LIST_ITEM_CLASS+` a,
    .`+L0[ao.LIST_ITEM_CLASS]+` button:not(:disabled),
    .`+L0[ao.LIST_ITEM_CLASS]+` a
  `,DEPRECATED_SELECTOR:".mdc-deprecated-list",FOCUSABLE_CHILD_ELEMENTS:`
    .`+ao.LIST_ITEM_CLASS+` button:not(:disabled),
    .`+ao.LIST_ITEM_CLASS+` a,
    .`+ao.LIST_ITEM_CLASS+` input[type="radio"]:not(:disabled),
    .`+ao.LIST_ITEM_CLASS+` input[type="checkbox"]:not(:disabled),
    .`+L0[ao.LIST_ITEM_CLASS]+` button:not(:disabled),
    .`+L0[ao.LIST_ITEM_CLASS]+` a,
    .`+L0[ao.LIST_ITEM_CLASS]+` input[type="radio"]:not(:disabled),
    .`+L0[ao.LIST_ITEM_CLASS]+` input[type="checkbox"]:not(:disabled)
  `,RADIO_SELECTOR:'input[type="radio"]',SELECTED_ITEM_SELECTOR:'[aria-selected="true"], [aria-current="true"]'},xa={UNSET_INDEX:-1,TYPEAHEAD_BUFFER_CLEAR_TIMEOUT_MS:300};/**
 * @license
 * Copyright 2020 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var lL=["input","button","textarea","select"],Hf=function(i){var e=i.target;if(!!e){var t=(""+e.tagName).toLowerCase();lL.indexOf(t)===-1&&i.preventDefault()}};/**
 * @license
 * Copyright 2020 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */function uL(){var i={bufferClearTimeout:0,currentFirstChar:"",sortedIndexCursor:0,typeaheadBuffer:""};return i}function cL(i,e){for(var t=new Map,o=0;o<i;o++){var l=e(o).trim();if(!!l){var u=l[0].toLowerCase();t.has(u)||t.set(u,[]),t.get(u).push({text:l.toLowerCase(),index:o})}}return t.forEach(function(m){m.sort(function(r,h){return r.index-h.index})}),t}function cg(i,e){var t=i.nextChar,o=i.focusItemAtIndex,l=i.sortedIndexByFirstChar,u=i.focusedItemIndex,m=i.skipFocus,r=i.isItemAtIndexDisabled;clearTimeout(e.bufferClearTimeout),e.bufferClearTimeout=setTimeout(function(){A3(e)},xa.TYPEAHEAD_BUFFER_CLEAR_TIMEOUT_MS),e.typeaheadBuffer=e.typeaheadBuffer+t;var h;return e.typeaheadBuffer.length===1?h=hL(l,u,r,e):h=fL(l,r,e),h!==-1&&!m&&o(h),h}function hL(i,e,t,o){var l=o.typeaheadBuffer[0],u=i.get(l);if(!u)return-1;if(l===o.currentFirstChar&&u[o.sortedIndexCursor].index===e){o.sortedIndexCursor=(o.sortedIndexCursor+1)%u.length;var m=u[o.sortedIndexCursor].index;if(!t(m))return m}o.currentFirstChar=l;var r=-1,h;for(h=0;h<u.length;h++)if(!t(u[h].index)){r=h;break}for(;h<u.length;h++)if(u[h].index>e&&!t(u[h].index)){r=h;break}return r!==-1?(o.sortedIndexCursor=r,u[o.sortedIndexCursor].index):-1}function fL(i,e,t){var o=t.typeaheadBuffer[0],l=i.get(o);if(!l)return-1;var u=l[t.sortedIndexCursor];if(u.text.lastIndexOf(t.typeaheadBuffer,0)===0&&!e(u.index))return u.index;for(var m=(t.sortedIndexCursor+1)%l.length,r=-1;m!==t.sortedIndexCursor;){var h=l[m],y=h.text.lastIndexOf(t.typeaheadBuffer,0)===0,b=!e(h.index);if(y&&b){r=m;break}m=(m+1)%l.length}return r!==-1?(t.sortedIndexCursor=r,l[t.sortedIndexCursor].index):-1}function x3(i){return i.typeaheadBuffer.length>0}function A3(i){i.typeaheadBuffer=""}function Sb(i,e){var t=i.event,o=i.isTargetListItem,l=i.focusedItemIndex,u=i.focusItemAtIndex,m=i.sortedIndexByFirstChar,r=i.isItemAtIndexDisabled,h=ca(t)==="ArrowLeft",y=ca(t)==="ArrowUp",b=ca(t)==="ArrowRight",v=ca(t)==="ArrowDown",w=ca(t)==="Home",x=ca(t)==="End",C=ca(t)==="Enter",T=ca(t)==="Spacebar";if(t.ctrlKey||t.metaKey||h||y||b||v||w||x||C)return-1;var S=!T&&t.key.length===1;if(S){Hf(t);var M={focusItemAtIndex:u,focusedItemIndex:l,nextChar:t.key.toLowerCase(),sortedIndexByFirstChar:m,skipFocus:!1,isItemAtIndexDisabled:r};return cg(M,e)}if(!T)return-1;o&&Hf(t);var O=o&&x3(e);if(O){var M={focusItemAtIndex:u,focusedItemIndex:l,nextChar:" ",sortedIndexByFirstChar:m,skipFocus:!1,isItemAtIndexDisabled:r};return cg(M,e)}return-1}/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */function dL(i){return i instanceof Array}var pL=function(i){xl(e,i);function e(t){var o=i.call(this,ts(ts({},e.defaultAdapter),t))||this;return o.wrapFocus=!1,o.isVertical=!0,o.isSingleSelectionList=!1,o.selectedIndex=xa.UNSET_INDEX,o.focusedItemIndex=xa.UNSET_INDEX,o.useActivatedClass=!1,o.useSelectedAttr=!1,o.ariaCurrentAttrValue=null,o.isCheckboxList=!1,o.isRadioList=!1,o.hasTypeahead=!1,o.typeaheadState=uL(),o.sortedIndexByFirstChar=new Map,o}return Object.defineProperty(e,"strings",{get:function(){return rf},enumerable:!1,configurable:!0}),Object.defineProperty(e,"cssClasses",{get:function(){return ao},enumerable:!1,configurable:!0}),Object.defineProperty(e,"numbers",{get:function(){return xa},enumerable:!1,configurable:!0}),Object.defineProperty(e,"defaultAdapter",{get:function(){return{addClassForElementIndex:function(){},focusItemAtIndex:function(){},getAttributeForElementIndex:function(){return null},getFocusedElementIndex:function(){return 0},getListItemCount:function(){return 0},hasCheckboxAtIndex:function(){return!1},hasRadioAtIndex:function(){return!1},isCheckboxCheckedAtIndex:function(){return!1},isFocusInsideList:function(){return!1},isRootFocused:function(){return!1},listItemAtIndexHasClass:function(){return!1},notifyAction:function(){},removeClassForElementIndex:function(){},setAttributeForElementIndex:function(){},setCheckedCheckboxOrRadioAtIndex:function(){},setTabIndexForListItemChildren:function(){},getPrimaryTextAtIndex:function(){return""}}},enumerable:!1,configurable:!0}),e.prototype.layout=function(){this.adapter.getListItemCount()!==0&&(this.adapter.hasCheckboxAtIndex(0)?this.isCheckboxList=!0:this.adapter.hasRadioAtIndex(0)?this.isRadioList=!0:this.maybeInitializeSingleSelection(),this.hasTypeahead&&(this.sortedIndexByFirstChar=this.typeaheadInitSortedIndex()))},e.prototype.getFocusedItemIndex=function(){return this.focusedItemIndex},e.prototype.setWrapFocus=function(t){this.wrapFocus=t},e.prototype.setVerticalOrientation=function(t){this.isVertical=t},e.prototype.setSingleSelection=function(t){this.isSingleSelectionList=t,t&&(this.maybeInitializeSingleSelection(),this.selectedIndex=this.getSelectedIndexFromDOM())},e.prototype.maybeInitializeSingleSelection=function(){var t=this.getSelectedIndexFromDOM();if(t!==xa.UNSET_INDEX){var o=this.adapter.listItemAtIndexHasClass(t,ao.LIST_ITEM_ACTIVATED_CLASS);o&&this.setUseActivatedClass(!0),this.isSingleSelectionList=!0,this.selectedIndex=t}},e.prototype.getSelectedIndexFromDOM=function(){for(var t=xa.UNSET_INDEX,o=this.adapter.getListItemCount(),l=0;l<o;l++){var u=this.adapter.listItemAtIndexHasClass(l,ao.LIST_ITEM_SELECTED_CLASS),m=this.adapter.listItemAtIndexHasClass(l,ao.LIST_ITEM_ACTIVATED_CLASS);if(!!(u||m)){t=l;break}}return t},e.prototype.setHasTypeahead=function(t){this.hasTypeahead=t,t&&(this.sortedIndexByFirstChar=this.typeaheadInitSortedIndex())},e.prototype.isTypeaheadInProgress=function(){return this.hasTypeahead&&x3(this.typeaheadState)},e.prototype.setUseActivatedClass=function(t){this.useActivatedClass=t},e.prototype.setUseSelectedAttribute=function(t){this.useSelectedAttr=t},e.prototype.getSelectedIndex=function(){return this.selectedIndex},e.prototype.setSelectedIndex=function(t,o){var l=o===void 0?{}:o,u=l.forceUpdate;!this.isIndexValid(t)||(this.isCheckboxList?this.setCheckboxAtIndex(t):this.isRadioList?this.setRadioAtIndex(t):this.setSingleSelectionAtIndex(t,{forceUpdate:u}))},e.prototype.handleFocusIn=function(t){t>=0&&(this.focusedItemIndex=t,this.adapter.setAttributeForElementIndex(t,"tabindex","0"),this.adapter.setTabIndexForListItemChildren(t,"0"))},e.prototype.handleFocusOut=function(t){var o=this;t>=0&&(this.adapter.setAttributeForElementIndex(t,"tabindex","-1"),this.adapter.setTabIndexForListItemChildren(t,"-1")),setTimeout(function(){o.adapter.isFocusInsideList()||o.setTabindexToFirstSelectedOrFocusedItem()},0)},e.prototype.handleKeydown=function(t,o,l){var u=this,m=ca(t)==="ArrowLeft",r=ca(t)==="ArrowUp",h=ca(t)==="ArrowRight",y=ca(t)==="ArrowDown",b=ca(t)==="Home",v=ca(t)==="End",w=ca(t)==="Enter",x=ca(t)==="Spacebar",C=t.key==="A"||t.key==="a";if(this.adapter.isRootFocused()){if(r||v?(t.preventDefault(),this.focusLastElement()):(y||b)&&(t.preventDefault(),this.focusFirstElement()),this.hasTypeahead){var T={event:t,focusItemAtIndex:function(O){u.focusItemAtIndex(O)},focusedItemIndex:-1,isTargetListItem:o,sortedIndexByFirstChar:this.sortedIndexByFirstChar,isItemAtIndexDisabled:function(O){return u.adapter.listItemAtIndexHasClass(O,ao.LIST_ITEM_DISABLED_CLASS)}};Sb(T,this.typeaheadState)}return}var S=this.adapter.getFocusedElementIndex();if(!(S===-1&&(S=l,S<0))){if(this.isVertical&&y||!this.isVertical&&h)Hf(t),this.focusNextElement(S);else if(this.isVertical&&r||!this.isVertical&&m)Hf(t),this.focusPrevElement(S);else if(b)Hf(t),this.focusFirstElement();else if(v)Hf(t),this.focusLastElement();else if(C&&t.ctrlKey&&this.isCheckboxList)t.preventDefault(),this.toggleAll(this.selectedIndex===xa.UNSET_INDEX?[]:this.selectedIndex);else if((w||x)&&o){var M=t.target;if(M&&M.tagName==="A"&&w||(Hf(t),this.adapter.listItemAtIndexHasClass(S,ao.LIST_ITEM_DISABLED_CLASS)))return;this.isTypeaheadInProgress()||(this.isSelectableList()&&this.setSelectedIndexOnAction(S),this.adapter.notifyAction(S))}if(this.hasTypeahead){var T={event:t,focusItemAtIndex:function(V){u.focusItemAtIndex(V)},focusedItemIndex:this.focusedItemIndex,isTargetListItem:o,sortedIndexByFirstChar:this.sortedIndexByFirstChar,isItemAtIndexDisabled:function(V){return u.adapter.listItemAtIndexHasClass(V,ao.LIST_ITEM_DISABLED_CLASS)}};Sb(T,this.typeaheadState)}}},e.prototype.handleClick=function(t,o){t!==xa.UNSET_INDEX&&(this.adapter.listItemAtIndexHasClass(t,ao.LIST_ITEM_DISABLED_CLASS)||(this.isSelectableList()&&this.setSelectedIndexOnAction(t,o),this.adapter.notifyAction(t)))},e.prototype.focusNextElement=function(t){var o=this.adapter.getListItemCount(),l=t+1;if(l>=o)if(this.wrapFocus)l=0;else return t;return this.focusItemAtIndex(l),l},e.prototype.focusPrevElement=function(t){var o=t-1;if(o<0)if(this.wrapFocus)o=this.adapter.getListItemCount()-1;else return t;return this.focusItemAtIndex(o),o},e.prototype.focusFirstElement=function(){return this.focusItemAtIndex(0),0},e.prototype.focusLastElement=function(){var t=this.adapter.getListItemCount()-1;return this.focusItemAtIndex(t),t},e.prototype.focusInitialElement=function(){var t=this.getFirstSelectedOrFocusedItemIndex();return this.focusItemAtIndex(t),t},e.prototype.setEnabled=function(t,o){!this.isIndexValid(t)||(o?(this.adapter.removeClassForElementIndex(t,ao.LIST_ITEM_DISABLED_CLASS),this.adapter.setAttributeForElementIndex(t,rf.ARIA_DISABLED,"false")):(this.adapter.addClassForElementIndex(t,ao.LIST_ITEM_DISABLED_CLASS),this.adapter.setAttributeForElementIndex(t,rf.ARIA_DISABLED,"true")))},e.prototype.setSingleSelectionAtIndex=function(t,o){var l=o===void 0?{}:o,u=l.forceUpdate;if(!(this.selectedIndex===t&&!u)){var m=ao.LIST_ITEM_SELECTED_CLASS;this.useActivatedClass&&(m=ao.LIST_ITEM_ACTIVATED_CLASS),this.selectedIndex!==xa.UNSET_INDEX&&this.adapter.removeClassForElementIndex(this.selectedIndex,m),this.setAriaForSingleSelectionAtIndex(t),this.setTabindexAtIndex(t),t!==xa.UNSET_INDEX&&this.adapter.addClassForElementIndex(t,m),this.selectedIndex=t}},e.prototype.setAriaForSingleSelectionAtIndex=function(t){this.selectedIndex===xa.UNSET_INDEX&&(this.ariaCurrentAttrValue=this.adapter.getAttributeForElementIndex(t,rf.ARIA_CURRENT));var o=this.ariaCurrentAttrValue!==null,l=o?rf.ARIA_CURRENT:rf.ARIA_SELECTED;if(this.selectedIndex!==xa.UNSET_INDEX&&this.adapter.setAttributeForElementIndex(this.selectedIndex,l,"false"),t!==xa.UNSET_INDEX){var u=o?this.ariaCurrentAttrValue:"true";this.adapter.setAttributeForElementIndex(t,l,u)}},e.prototype.getSelectionAttribute=function(){return this.useSelectedAttr?rf.ARIA_SELECTED:rf.ARIA_CHECKED},e.prototype.setRadioAtIndex=function(t){var o=this.getSelectionAttribute();this.adapter.setCheckedCheckboxOrRadioAtIndex(t,!0),this.selectedIndex!==xa.UNSET_INDEX&&this.adapter.setAttributeForElementIndex(this.selectedIndex,o,"false"),this.adapter.setAttributeForElementIndex(t,o,"true"),this.selectedIndex=t},e.prototype.setCheckboxAtIndex=function(t){for(var o=this.getSelectionAttribute(),l=0;l<this.adapter.getListItemCount();l++){var u=!1;t.indexOf(l)>=0&&(u=!0),this.adapter.setCheckedCheckboxOrRadioAtIndex(l,u),this.adapter.setAttributeForElementIndex(l,o,u?"true":"false")}this.selectedIndex=t},e.prototype.setTabindexAtIndex=function(t){this.focusedItemIndex===xa.UNSET_INDEX&&t!==0?this.adapter.setAttributeForElementIndex(0,"tabindex","-1"):this.focusedItemIndex>=0&&this.focusedItemIndex!==t&&this.adapter.setAttributeForElementIndex(this.focusedItemIndex,"tabindex","-1"),!(this.selectedIndex instanceof Array)&&this.selectedIndex!==t&&this.adapter.setAttributeForElementIndex(this.selectedIndex,"tabindex","-1"),t!==xa.UNSET_INDEX&&this.adapter.setAttributeForElementIndex(t,"tabindex","0")},e.prototype.isSelectableList=function(){return this.isSingleSelectionList||this.isCheckboxList||this.isRadioList},e.prototype.setTabindexToFirstSelectedOrFocusedItem=function(){var t=this.getFirstSelectedOrFocusedItemIndex();this.setTabindexAtIndex(t)},e.prototype.getFirstSelectedOrFocusedItemIndex=function(){return this.isSelectableList()?typeof this.selectedIndex=="number"&&this.selectedIndex!==xa.UNSET_INDEX?this.selectedIndex:dL(this.selectedIndex)&&this.selectedIndex.length>0?this.selectedIndex.reduce(function(t,o){return Math.min(t,o)}):0:Math.max(this.focusedItemIndex,0)},e.prototype.isIndexValid=function(t){var o=this;if(t instanceof Array){if(!this.isCheckboxList)throw new Error("MDCListFoundation: Array of index is only supported for checkbox based list");return t.length===0?!0:t.some(function(l){return o.isIndexInRange(l)})}else if(typeof t=="number"){if(this.isCheckboxList)throw new Error("MDCListFoundation: Expected array of index for checkbox based list but got number: "+t);return this.isIndexInRange(t)||this.isSingleSelectionList&&t===xa.UNSET_INDEX}else return!1},e.prototype.isIndexInRange=function(t){var o=this.adapter.getListItemCount();return t>=0&&t<o},e.prototype.setSelectedIndexOnAction=function(t,o){o===void 0&&(o=!0),this.isCheckboxList?this.toggleCheckboxAtIndex(t,o):this.setSelectedIndex(t)},e.prototype.toggleCheckboxAtIndex=function(t,o){var l=this.getSelectionAttribute(),u=this.adapter.isCheckboxCheckedAtIndex(t);o&&(u=!u,this.adapter.setCheckedCheckboxOrRadioAtIndex(t,u)),this.adapter.setAttributeForElementIndex(t,l,u?"true":"false");var m=this.selectedIndex===xa.UNSET_INDEX?[]:this.selectedIndex.slice();u?m.push(t):m=m.filter(function(r){return r!==t}),this.selectedIndex=m},e.prototype.focusItemAtIndex=function(t){this.adapter.focusItemAtIndex(t),this.focusedItemIndex=t},e.prototype.toggleAll=function(t){var o=this.adapter.getListItemCount();if(t.length===o)this.setCheckboxAtIndex([]);else{for(var l=[],u=0;u<o;u++)(!this.adapter.listItemAtIndexHasClass(u,ao.LIST_ITEM_DISABLED_CLASS)||t.indexOf(u)>-1)&&l.push(u);this.setCheckboxAtIndex(l)}},e.prototype.typeaheadMatchItem=function(t,o,l){var u=this;l===void 0&&(l=!1);var m={focusItemAtIndex:function(r){u.focusItemAtIndex(r)},focusedItemIndex:o||this.focusedItemIndex,nextChar:t,sortedIndexByFirstChar:this.sortedIndexByFirstChar,skipFocus:l,isItemAtIndexDisabled:function(r){return u.adapter.listItemAtIndexHasClass(r,ao.LIST_ITEM_DISABLED_CLASS)}};return cg(m,this.typeaheadState)},e.prototype.typeaheadInitSortedIndex=function(){return cL(this.adapter.getListItemCount(),this.adapter.getPrimaryTextAtIndex)},e.prototype.clearTypeaheadBuffer=function(){A3(this.typeaheadState)},e}(Fu);/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var k3=function(i){xl(e,i);function e(t){var o=i.call(this,ts(ts({},e.defaultAdapter),t))||this;return o.isSurfaceOpen=!1,o.isQuickOpen=!1,o.isHoistedElement=!1,o.isFixedPosition=!1,o.isHorizontallyCenteredOnViewport=!1,o.maxHeight=0,o.openAnimationEndTimerId=0,o.closeAnimationEndTimerId=0,o.animationRequestId=0,o.anchorCorner=Zf.TOP_START,o.originCorner=Zf.TOP_START,o.anchorMargin={top:0,right:0,bottom:0,left:0},o.position={x:0,y:0},o}return Object.defineProperty(e,"cssClasses",{get:function(){return sL},enumerable:!1,configurable:!0}),Object.defineProperty(e,"strings",{get:function(){return aL},enumerable:!1,configurable:!0}),Object.defineProperty(e,"numbers",{get:function(){return Id},enumerable:!1,configurable:!0}),Object.defineProperty(e,"Corner",{get:function(){return Zf},enumerable:!1,configurable:!0}),Object.defineProperty(e,"defaultAdapter",{get:function(){return{addClass:function(){},removeClass:function(){},hasClass:function(){return!1},hasAnchor:function(){return!1},isElementInContainer:function(){return!1},isFocused:function(){return!1},isRtl:function(){return!1},getInnerDimensions:function(){return{height:0,width:0}},getAnchorDimensions:function(){return null},getWindowDimensions:function(){return{height:0,width:0}},getBodyDimensions:function(){return{height:0,width:0}},getWindowScroll:function(){return{x:0,y:0}},setPosition:function(){},setMaxHeight:function(){},setTransformOrigin:function(){},saveFocus:function(){},restoreFocus:function(){},notifyClose:function(){},notifyOpen:function(){},notifyClosing:function(){}}},enumerable:!1,configurable:!0}),e.prototype.init=function(){var t=e.cssClasses,o=t.ROOT,l=t.OPEN;if(!this.adapter.hasClass(o))throw new Error(o+" class required in root element.");this.adapter.hasClass(l)&&(this.isSurfaceOpen=!0)},e.prototype.destroy=function(){clearTimeout(this.openAnimationEndTimerId),clearTimeout(this.closeAnimationEndTimerId),cancelAnimationFrame(this.animationRequestId)},e.prototype.setAnchorCorner=function(t){this.anchorCorner=t},e.prototype.flipCornerHorizontally=function(){this.originCorner=this.originCorner^$s.RIGHT},e.prototype.setAnchorMargin=function(t){this.anchorMargin.top=t.top||0,this.anchorMargin.right=t.right||0,this.anchorMargin.bottom=t.bottom||0,this.anchorMargin.left=t.left||0},e.prototype.setIsHoisted=function(t){this.isHoistedElement=t},e.prototype.setFixedPosition=function(t){this.isFixedPosition=t},e.prototype.isFixed=function(){return this.isFixedPosition},e.prototype.setAbsolutePosition=function(t,o){this.position.x=this.isFinite(t)?t:0,this.position.y=this.isFinite(o)?o:0},e.prototype.setIsHorizontallyCenteredOnViewport=function(t){this.isHorizontallyCenteredOnViewport=t},e.prototype.setQuickOpen=function(t){this.isQuickOpen=t},e.prototype.setMaxHeight=function(t){this.maxHeight=t},e.prototype.isOpen=function(){return this.isSurfaceOpen},e.prototype.open=function(){var t=this;this.isSurfaceOpen||(this.adapter.saveFocus(),this.isQuickOpen?(this.isSurfaceOpen=!0,this.adapter.addClass(e.cssClasses.OPEN),this.dimensions=this.adapter.getInnerDimensions(),this.autoposition(),this.adapter.notifyOpen()):(this.adapter.addClass(e.cssClasses.ANIMATING_OPEN),this.animationRequestId=requestAnimationFrame(function(){t.dimensions=t.adapter.getInnerDimensions(),t.autoposition(),t.adapter.addClass(e.cssClasses.OPEN),t.openAnimationEndTimerId=setTimeout(function(){t.openAnimationEndTimerId=0,t.adapter.removeClass(e.cssClasses.ANIMATING_OPEN),t.adapter.notifyOpen()},Id.TRANSITION_OPEN_DURATION)}),this.isSurfaceOpen=!0))},e.prototype.close=function(t){var o=this;if(t===void 0&&(t=!1),!!this.isSurfaceOpen){if(this.adapter.notifyClosing(),this.isQuickOpen){this.isSurfaceOpen=!1,t||this.maybeRestoreFocus(),this.adapter.removeClass(e.cssClasses.OPEN),this.adapter.removeClass(e.cssClasses.IS_OPEN_BELOW),this.adapter.notifyClose();return}this.adapter.addClass(e.cssClasses.ANIMATING_CLOSED),requestAnimationFrame(function(){o.adapter.removeClass(e.cssClasses.OPEN),o.adapter.removeClass(e.cssClasses.IS_OPEN_BELOW),o.closeAnimationEndTimerId=setTimeout(function(){o.closeAnimationEndTimerId=0,o.adapter.removeClass(e.cssClasses.ANIMATING_CLOSED),o.adapter.notifyClose()},Id.TRANSITION_CLOSE_DURATION)}),this.isSurfaceOpen=!1,t||this.maybeRestoreFocus()}},e.prototype.handleBodyClick=function(t){var o=t.target;this.adapter.isElementInContainer(o)||this.close()},e.prototype.handleKeydown=function(t){var o=t.keyCode,l=t.key,u=l==="Escape"||o===27;u&&this.close()},e.prototype.autoposition=function(){var t;this.measurements=this.getAutoLayoutmeasurements();var o=this.getoriginCorner(),l=this.getMenuSurfaceMaxHeight(o),u=this.hasBit(o,$s.BOTTOM)?"bottom":"top",m=this.hasBit(o,$s.RIGHT)?"right":"left",r=this.getHorizontalOriginOffset(o),h=this.getVerticalOriginOffset(o),y=this.measurements,b=y.anchorSize,v=y.surfaceSize,w=(t={},t[m]=r,t[u]=h,t);b.width/v.width>Id.ANCHOR_TO_MENU_SURFACE_WIDTH_RATIO&&(m="center"),(this.isHoistedElement||this.isFixedPosition)&&this.adjustPositionForHoistedElement(w),this.adapter.setTransformOrigin(m+" "+u),this.adapter.setPosition(w),this.adapter.setMaxHeight(l?l+"px":""),this.hasBit(o,$s.BOTTOM)||this.adapter.addClass(e.cssClasses.IS_OPEN_BELOW)},e.prototype.getAutoLayoutmeasurements=function(){var t=this.adapter.getAnchorDimensions(),o=this.adapter.getBodyDimensions(),l=this.adapter.getWindowDimensions(),u=this.adapter.getWindowScroll();return t||(t={top:this.position.y,right:this.position.x,bottom:this.position.y,left:this.position.x,width:0,height:0}),{anchorSize:t,bodySize:o,surfaceSize:this.dimensions,viewportDistance:{top:t.top,right:l.width-t.right,bottom:l.height-t.bottom,left:t.left},viewportSize:l,windowScroll:u}},e.prototype.getoriginCorner=function(){var t=this.originCorner,o=this.measurements,l=o.viewportDistance,u=o.anchorSize,m=o.surfaceSize,r=e.numbers.MARGIN_TO_EDGE,h=this.hasBit(this.anchorCorner,$s.BOTTOM),y,b;h?(y=l.top-r+this.anchorMargin.bottom,b=l.bottom-r-this.anchorMargin.bottom):(y=l.top-r+this.anchorMargin.top,b=l.bottom-r+u.height-this.anchorMargin.top);var v=b-m.height>0;!v&&y>b&&(t=this.setBit(t,$s.BOTTOM));var w=this.adapter.isRtl(),x=this.hasBit(this.anchorCorner,$s.FLIP_RTL),C=this.hasBit(this.anchorCorner,$s.RIGHT)||this.hasBit(t,$s.RIGHT),T=!1;w&&x?T=!C:T=C;var S,M;T?(S=l.left+u.width+this.anchorMargin.right,M=l.right-this.anchorMargin.right):(S=l.left+this.anchorMargin.left,M=l.right+u.width-this.anchorMargin.left);var O=S-m.width>0,V=M-m.width>0,X=this.hasBit(t,$s.FLIP_RTL)&&this.hasBit(t,$s.RIGHT);return V&&X&&w||!O&&X?t=this.unsetBit(t,$s.RIGHT):(O&&T&&w||O&&!T&&C||!V&&S>=M)&&(t=this.setBit(t,$s.RIGHT)),t},e.prototype.getMenuSurfaceMaxHeight=function(t){if(this.maxHeight>0)return this.maxHeight;var o=this.measurements.viewportDistance,l=0,u=this.hasBit(t,$s.BOTTOM),m=this.hasBit(this.anchorCorner,$s.BOTTOM),r=e.numbers.MARGIN_TO_EDGE;return u?(l=o.top+this.anchorMargin.top-r,m||(l+=this.measurements.anchorSize.height)):(l=o.bottom-this.anchorMargin.bottom+this.measurements.anchorSize.height-r,m&&(l-=this.measurements.anchorSize.height)),l},e.prototype.getHorizontalOriginOffset=function(t){var o=this.measurements.anchorSize,l=this.hasBit(t,$s.RIGHT),u=this.hasBit(this.anchorCorner,$s.RIGHT);if(l){var m=u?o.width-this.anchorMargin.left:this.anchorMargin.right;return this.isHoistedElement||this.isFixedPosition?m-(this.measurements.viewportSize.width-this.measurements.bodySize.width):m}return u?o.width-this.anchorMargin.right:this.anchorMargin.left},e.prototype.getVerticalOriginOffset=function(t){var o=this.measurements.anchorSize,l=this.hasBit(t,$s.BOTTOM),u=this.hasBit(this.anchorCorner,$s.BOTTOM),m=0;return l?m=u?o.height-this.anchorMargin.top:-this.anchorMargin.bottom:m=u?o.height+this.anchorMargin.bottom:this.anchorMargin.top,m},e.prototype.adjustPositionForHoistedElement=function(t){var o,l,u=this.measurements,m=u.windowScroll,r=u.viewportDistance,h=u.surfaceSize,y=u.viewportSize,b=Object.keys(t);try{for(var v=Ph(b),w=v.next();!w.done;w=v.next()){var x=w.value,C=t[x]||0;if(this.isHorizontallyCenteredOnViewport&&(x==="left"||x==="right")){t[x]=(y.width-h.width)/2;continue}C+=r[x],this.isFixedPosition||(x==="top"?C+=m.y:x==="bottom"?C-=m.y:x==="left"?C+=m.x:C-=m.x),t[x]=C}}catch(T){o={error:T}}finally{try{w&&!w.done&&(l=v.return)&&l.call(v)}finally{if(o)throw o.error}}},e.prototype.maybeRestoreFocus=function(){var t=this,o=this.adapter.isFocused(),l=document.activeElement&&this.adapter.isElementInContainer(document.activeElement);(o||l)&&setTimeout(function(){t.adapter.restoreFocus()},Id.TOUCH_EVENT_WAIT_MS)},e.prototype.hasBit=function(t,o){return Boolean(t&o)},e.prototype.setBit=function(t,o){return t|o},e.prototype.unsetBit=function(t,o){return t^o},e.prototype.isFinite=function(t){return typeof t=="number"&&isFinite(t)},e}(Fu);/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var ed={MENU_SELECTED_LIST_ITEM:"mdc-menu-item--selected",MENU_SELECTION_GROUP:"mdc-menu__selection-group",ROOT:"mdc-menu"},P0={ARIA_CHECKED_ATTR:"aria-checked",ARIA_DISABLED_ATTR:"aria-disabled",CHECKBOX_SELECTOR:'input[type="checkbox"]',LIST_SELECTOR:".mdc-list,.mdc-deprecated-list",SELECTED_EVENT:"MDCMenu:selected",SKIP_RESTORE_FOCUS:"data-menu-item-skip-restore-focus"},mL={FOCUS_ROOT_INDEX:-1},U0;(function(i){i[i.NONE=0]="NONE",i[i.LIST_ROOT=1]="LIST_ROOT",i[i.FIRST_ITEM=2]="FIRST_ITEM",i[i.LAST_ITEM=3]="LAST_ITEM"})(U0||(U0={}));/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var gL=function(i){xl(e,i);function e(t){var o=i.call(this,ts(ts({},e.defaultAdapter),t))||this;return o.closeAnimationEndTimerId=0,o.defaultFocusState=U0.LIST_ROOT,o.selectedIndex=-1,o}return Object.defineProperty(e,"cssClasses",{get:function(){return ed},enumerable:!1,configurable:!0}),Object.defineProperty(e,"strings",{get:function(){return P0},enumerable:!1,configurable:!0}),Object.defineProperty(e,"numbers",{get:function(){return mL},enumerable:!1,configurable:!0}),Object.defineProperty(e,"defaultAdapter",{get:function(){return{addClassToElementAtIndex:function(){},removeClassFromElementAtIndex:function(){},addAttributeToElementAtIndex:function(){},removeAttributeFromElementAtIndex:function(){},getAttributeFromElementAtIndex:function(){return null},elementContainsClass:function(){return!1},closeSurface:function(){},getElementIndex:function(){return-1},notifySelected:function(){},getMenuItemCount:function(){return 0},focusItemAtIndex:function(){},focusListRoot:function(){},getSelectedSiblingOfItemAtIndex:function(){return-1},isSelectableItemAtIndex:function(){return!1}}},enumerable:!1,configurable:!0}),e.prototype.destroy=function(){this.closeAnimationEndTimerId&&clearTimeout(this.closeAnimationEndTimerId),this.adapter.closeSurface()},e.prototype.handleKeydown=function(t){var o=t.key,l=t.keyCode,u=o==="Tab"||l===9;u&&this.adapter.closeSurface(!0)},e.prototype.handleItemAction=function(t){var o=this,l=this.adapter.getElementIndex(t);if(!(l<0)){this.adapter.notifySelected({index:l});var u=this.adapter.getAttributeFromElementAtIndex(l,P0.SKIP_RESTORE_FOCUS)==="true";this.adapter.closeSurface(u),this.closeAnimationEndTimerId=setTimeout(function(){var m=o.adapter.getElementIndex(t);m>=0&&o.adapter.isSelectableItemAtIndex(m)&&o.setSelectedIndex(m)},k3.numbers.TRANSITION_CLOSE_DURATION)}},e.prototype.handleMenuSurfaceOpened=function(){switch(this.defaultFocusState){case U0.FIRST_ITEM:this.adapter.focusItemAtIndex(0);break;case U0.LAST_ITEM:this.adapter.focusItemAtIndex(this.adapter.getMenuItemCount()-1);break;case U0.NONE:break;default:this.adapter.focusListRoot();break}},e.prototype.setDefaultFocusState=function(t){this.defaultFocusState=t},e.prototype.getSelectedIndex=function(){return this.selectedIndex},e.prototype.setSelectedIndex=function(t){if(this.validatedIndex(t),!this.adapter.isSelectableItemAtIndex(t))throw new Error("MDCMenuFoundation: No selection group at specified index.");var o=this.adapter.getSelectedSiblingOfItemAtIndex(t);o>=0&&(this.adapter.removeAttributeFromElementAtIndex(o,P0.ARIA_CHECKED_ATTR),this.adapter.removeClassFromElementAtIndex(o,ed.MENU_SELECTED_LIST_ITEM)),this.adapter.addClassToElementAtIndex(t,ed.MENU_SELECTED_LIST_ITEM),this.adapter.addAttributeToElementAtIndex(t,P0.ARIA_CHECKED_ATTR,"true"),this.selectedIndex=t},e.prototype.setEnabled=function(t,o){this.validatedIndex(t),o?(this.adapter.removeClassFromElementAtIndex(t,ao.LIST_ITEM_DISABLED_CLASS),this.adapter.addAttributeToElementAtIndex(t,P0.ARIA_DISABLED_ATTR,"false")):(this.adapter.addClassToElementAtIndex(t,ao.LIST_ITEM_DISABLED_CLASS),this.adapter.addAttributeToElementAtIndex(t,P0.ARIA_DISABLED_ATTR,"true"))},e.prototype.validatedIndex=function(t){var o=this.adapter.getMenuItemCount(),l=t>=0&&t<o;if(!l)throw new Error("MDCMenuFoundation: No list item at specified index.")},e}(Fu);/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var yL={NOTCH_ELEMENT_SELECTOR:".mdc-notched-outline__notch"},Cb={NOTCH_ELEMENT_PADDING:8},_L={NO_LABEL:"mdc-notched-outline--no-label",OUTLINE_NOTCHED:"mdc-notched-outline--notched",OUTLINE_UPGRADED:"mdc-notched-outline--upgraded"};/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var vL=function(i){xl(e,i);function e(t){return i.call(this,ts(ts({},e.defaultAdapter),t))||this}return Object.defineProperty(e,"strings",{get:function(){return yL},enumerable:!1,configurable:!0}),Object.defineProperty(e,"cssClasses",{get:function(){return _L},enumerable:!1,configurable:!0}),Object.defineProperty(e,"numbers",{get:function(){return Cb},enumerable:!1,configurable:!0}),Object.defineProperty(e,"defaultAdapter",{get:function(){return{addClass:function(){},removeClass:function(){},setNotchWidthProperty:function(){},removeNotchWidthProperty:function(){}}},enumerable:!1,configurable:!0}),e.prototype.notch=function(t){var o=e.cssClasses.OUTLINE_NOTCHED;t>0&&(t+=Cb.NOTCH_ELEMENT_PADDING),this.adapter.setNotchWidthProperty(t),this.adapter.addClass(o)},e.prototype.closeNotch=function(){var t=e.cssClasses.OUTLINE_NOTCHED;this.adapter.removeClass(t),this.adapter.removeNotchWidthProperty()},e}(Fu);/**
 * @license
 * Copyright 2016 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var Us={ACTIVATED:"mdc-select--activated",DISABLED:"mdc-select--disabled",FOCUSED:"mdc-select--focused",INVALID:"mdc-select--invalid",MENU_INVALID:"mdc-select__menu--invalid",OUTLINED:"mdc-select--outlined",REQUIRED:"mdc-select--required",ROOT:"mdc-select",WITH_LEADING_ICON:"mdc-select--with-leading-icon"},E2={ARIA_CONTROLS:"aria-controls",ARIA_DESCRIBEDBY:"aria-describedby",ARIA_SELECTED_ATTR:"aria-selected",CHANGE_EVENT:"MDCSelect:change",HIDDEN_INPUT_SELECTOR:'input[type="hidden"]',LABEL_SELECTOR:".mdc-floating-label",LEADING_ICON_SELECTOR:".mdc-select__icon",LINE_RIPPLE_SELECTOR:".mdc-line-ripple",MENU_SELECTOR:".mdc-select__menu",OUTLINE_SELECTOR:".mdc-notched-outline",SELECTED_TEXT_SELECTOR:".mdc-select__selected-text",SELECT_ANCHOR_SELECTOR:".mdc-select__anchor",VALUE_ATTR:"data-value"},zf={LABEL_SCALE:.75,UNSET_INDEX:-1,CLICK_DEBOUNCE_TIMEOUT_MS:330};/**
 * @license
 * Copyright 2016 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var bL=function(i){xl(e,i);function e(t,o){o===void 0&&(o={});var l=i.call(this,ts(ts({},e.defaultAdapter),t))||this;return l.disabled=!1,l.isMenuOpen=!1,l.useDefaultValidation=!0,l.customValidity=!0,l.lastSelectedIndex=zf.UNSET_INDEX,l.clickDebounceTimeout=0,l.recentlyClicked=!1,l.leadingIcon=o.leadingIcon,l.helperText=o.helperText,l}return Object.defineProperty(e,"cssClasses",{get:function(){return Us},enumerable:!1,configurable:!0}),Object.defineProperty(e,"numbers",{get:function(){return zf},enumerable:!1,configurable:!0}),Object.defineProperty(e,"strings",{get:function(){return E2},enumerable:!1,configurable:!0}),Object.defineProperty(e,"defaultAdapter",{get:function(){return{addClass:function(){},removeClass:function(){},hasClass:function(){return!1},activateBottomLine:function(){},deactivateBottomLine:function(){},getSelectedIndex:function(){return-1},setSelectedIndex:function(){},hasLabel:function(){return!1},floatLabel:function(){},getLabelWidth:function(){return 0},setLabelRequired:function(){},hasOutline:function(){return!1},notchOutline:function(){},closeOutline:function(){},setRippleCenter:function(){},notifyChange:function(){},setSelectedText:function(){},isSelectAnchorFocused:function(){return!1},getSelectAnchorAttr:function(){return""},setSelectAnchorAttr:function(){},removeSelectAnchorAttr:function(){},addMenuClass:function(){},removeMenuClass:function(){},openMenu:function(){},closeMenu:function(){},getAnchorElement:function(){return null},setMenuAnchorElement:function(){},setMenuAnchorCorner:function(){},setMenuWrapFocus:function(){},focusMenuItemAtIndex:function(){},getMenuItemCount:function(){return 0},getMenuItemValues:function(){return[]},getMenuItemTextAtIndex:function(){return""},isTypeaheadInProgress:function(){return!1},typeaheadMatchItem:function(){return-1}}},enumerable:!1,configurable:!0}),e.prototype.getSelectedIndex=function(){return this.adapter.getSelectedIndex()},e.prototype.setSelectedIndex=function(t,o,l){o===void 0&&(o=!1),l===void 0&&(l=!1),!(t>=this.adapter.getMenuItemCount())&&(t===zf.UNSET_INDEX?this.adapter.setSelectedText(""):this.adapter.setSelectedText(this.adapter.getMenuItemTextAtIndex(t).trim()),this.adapter.setSelectedIndex(t),o&&this.adapter.closeMenu(),!l&&this.lastSelectedIndex!==t&&this.handleChange(),this.lastSelectedIndex=t)},e.prototype.setValue=function(t,o){o===void 0&&(o=!1);var l=this.adapter.getMenuItemValues().indexOf(t);this.setSelectedIndex(l,!1,o)},e.prototype.getValue=function(){var t=this.adapter.getSelectedIndex(),o=this.adapter.getMenuItemValues();return t!==zf.UNSET_INDEX?o[t]:""},e.prototype.getDisabled=function(){return this.disabled},e.prototype.setDisabled=function(t){this.disabled=t,this.disabled?(this.adapter.addClass(Us.DISABLED),this.adapter.closeMenu()):this.adapter.removeClass(Us.DISABLED),this.leadingIcon&&this.leadingIcon.setDisabled(this.disabled),this.disabled?this.adapter.removeSelectAnchorAttr("tabindex"):this.adapter.setSelectAnchorAttr("tabindex","0"),this.adapter.setSelectAnchorAttr("aria-disabled",this.disabled.toString())},e.prototype.openMenu=function(){this.adapter.addClass(Us.ACTIVATED),this.adapter.openMenu(),this.isMenuOpen=!0,this.adapter.setSelectAnchorAttr("aria-expanded","true")},e.prototype.setHelperTextContent=function(t){this.helperText&&this.helperText.setContent(t)},e.prototype.layout=function(){if(this.adapter.hasLabel()){var t=this.getValue().length>0,o=this.adapter.hasClass(Us.FOCUSED),l=t||o,u=this.adapter.hasClass(Us.REQUIRED);this.notchOutline(l),this.adapter.floatLabel(l),this.adapter.setLabelRequired(u)}},e.prototype.layoutOptions=function(){var t=this.adapter.getMenuItemValues(),o=t.indexOf(this.getValue());this.setSelectedIndex(o,!1,!0)},e.prototype.handleMenuOpened=function(){if(this.adapter.getMenuItemValues().length!==0){var t=this.getSelectedIndex(),o=t>=0?t:0;this.adapter.focusMenuItemAtIndex(o)}},e.prototype.handleMenuClosing=function(){this.adapter.setSelectAnchorAttr("aria-expanded","false")},e.prototype.handleMenuClosed=function(){this.adapter.removeClass(Us.ACTIVATED),this.isMenuOpen=!1,this.adapter.isSelectAnchorFocused()||this.blur()},e.prototype.handleChange=function(){this.layout(),this.adapter.notifyChange(this.getValue());var t=this.adapter.hasClass(Us.REQUIRED);t&&this.useDefaultValidation&&this.setValid(this.isValid())},e.prototype.handleMenuItemAction=function(t){this.setSelectedIndex(t,!0)},e.prototype.handleFocus=function(){this.adapter.addClass(Us.FOCUSED),this.layout(),this.adapter.activateBottomLine()},e.prototype.handleBlur=function(){this.isMenuOpen||this.blur()},e.prototype.handleClick=function(t){if(!(this.disabled||this.recentlyClicked)){if(this.setClickDebounceTimeout(),this.isMenuOpen){this.adapter.closeMenu();return}this.adapter.setRippleCenter(t),this.openMenu()}},e.prototype.handleKeydown=function(t){if(!(this.isMenuOpen||!this.adapter.hasClass(Us.FOCUSED))){var o=ca(t)===lo.ENTER,l=ca(t)===lo.SPACEBAR,u=ca(t)===lo.ARROW_UP,m=ca(t)===lo.ARROW_DOWN,r=t.ctrlKey||t.metaKey;if(!r&&(!l&&t.key&&t.key.length===1||l&&this.adapter.isTypeaheadInProgress())){var h=l?" ":t.key,y=this.adapter.typeaheadMatchItem(h,this.getSelectedIndex());y>=0&&this.setSelectedIndex(y),t.preventDefault();return}!o&&!l&&!u&&!m||(u&&this.getSelectedIndex()>0?this.setSelectedIndex(this.getSelectedIndex()-1):m&&this.getSelectedIndex()<this.adapter.getMenuItemCount()-1&&this.setSelectedIndex(this.getSelectedIndex()+1),this.openMenu(),t.preventDefault())}},e.prototype.notchOutline=function(t){if(!!this.adapter.hasOutline()){var o=this.adapter.hasClass(Us.FOCUSED);if(t){var l=zf.LABEL_SCALE,u=this.adapter.getLabelWidth()*l;this.adapter.notchOutline(u)}else o||this.adapter.closeOutline()}},e.prototype.setLeadingIconAriaLabel=function(t){this.leadingIcon&&this.leadingIcon.setAriaLabel(t)},e.prototype.setLeadingIconContent=function(t){this.leadingIcon&&this.leadingIcon.setContent(t)},e.prototype.getUseDefaultValidation=function(){return this.useDefaultValidation},e.prototype.setUseDefaultValidation=function(t){this.useDefaultValidation=t},e.prototype.setValid=function(t){this.useDefaultValidation||(this.customValidity=t),this.adapter.setSelectAnchorAttr("aria-invalid",(!t).toString()),t?(this.adapter.removeClass(Us.INVALID),this.adapter.removeMenuClass(Us.MENU_INVALID)):(this.adapter.addClass(Us.INVALID),this.adapter.addMenuClass(Us.MENU_INVALID)),this.syncHelperTextValidity(t)},e.prototype.isValid=function(){return this.useDefaultValidation&&this.adapter.hasClass(Us.REQUIRED)&&!this.adapter.hasClass(Us.DISABLED)?this.getSelectedIndex()!==zf.UNSET_INDEX&&(this.getSelectedIndex()!==0||Boolean(this.getValue())):this.customValidity},e.prototype.setRequired=function(t){t?this.adapter.addClass(Us.REQUIRED):this.adapter.removeClass(Us.REQUIRED),this.adapter.setSelectAnchorAttr("aria-required",t.toString()),this.adapter.setLabelRequired(t)},e.prototype.getRequired=function(){return this.adapter.getSelectAnchorAttr("aria-required")==="true"},e.prototype.init=function(){var t=this.adapter.getAnchorElement();t&&(this.adapter.setMenuAnchorElement(t),this.adapter.setMenuAnchorCorner(Zf.BOTTOM_START)),this.adapter.setMenuWrapFocus(!1),this.setDisabled(this.adapter.hasClass(Us.DISABLED)),this.syncHelperTextValidity(!this.adapter.hasClass(Us.INVALID)),this.layout(),this.layoutOptions()},e.prototype.blur=function(){this.adapter.removeClass(Us.FOCUSED),this.layout(),this.adapter.deactivateBottomLine();var t=this.adapter.hasClass(Us.REQUIRED);t&&this.useDefaultValidation&&this.setValid(this.isValid())},e.prototype.syncHelperTextValidity=function(t){if(!!this.helperText){this.helperText.setValidity(t);var o=this.helperText.isVisible(),l=this.helperText.getId();o&&l?this.adapter.setSelectAnchorAttr(E2.ARIA_DESCRIBEDBY,l):this.adapter.removeSelectAnchorAttr(E2.ARIA_DESCRIBEDBY)}},e.prototype.setClickDebounceTimeout=function(){var t=this;clearTimeout(this.clickDebounceTimeout),this.clickDebounceTimeout=setTimeout(function(){t.recentlyClicked=!1},zf.CLICK_DEBOUNCE_TIMEOUT_MS),this.recentlyClicked=!0},e}(Fu);/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var Nf={ARIA_HIDDEN:"aria-hidden",ROLE:"role"},jf={HELPER_TEXT_VALIDATION_MSG:"mdc-select-helper-text--validation-msg",HELPER_TEXT_VALIDATION_MSG_PERSISTENT:"mdc-select-helper-text--validation-msg-persistent"};/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var wL=function(i){xl(e,i);function e(t){return i.call(this,ts(ts({},e.defaultAdapter),t))||this}return Object.defineProperty(e,"cssClasses",{get:function(){return jf},enumerable:!1,configurable:!0}),Object.defineProperty(e,"strings",{get:function(){return Nf},enumerable:!1,configurable:!0}),Object.defineProperty(e,"defaultAdapter",{get:function(){return{addClass:function(){},removeClass:function(){},hasClass:function(){return!1},setAttr:function(){},getAttr:function(){return null},removeAttr:function(){},setContent:function(){}}},enumerable:!1,configurable:!0}),e.prototype.getId=function(){return this.adapter.getAttr("id")},e.prototype.isVisible=function(){return this.adapter.getAttr(Nf.ARIA_HIDDEN)!=="true"},e.prototype.setContent=function(t){this.adapter.setContent(t)},e.prototype.setValidation=function(t){t?this.adapter.addClass(jf.HELPER_TEXT_VALIDATION_MSG):this.adapter.removeClass(jf.HELPER_TEXT_VALIDATION_MSG)},e.prototype.setValidationMsgPersistent=function(t){t?this.adapter.addClass(jf.HELPER_TEXT_VALIDATION_MSG_PERSISTENT):this.adapter.removeClass(jf.HELPER_TEXT_VALIDATION_MSG_PERSISTENT)},e.prototype.setValidity=function(t){var o=this.adapter.hasClass(jf.HELPER_TEXT_VALIDATION_MSG);if(!!o){var l=this.adapter.hasClass(jf.HELPER_TEXT_VALIDATION_MSG_PERSISTENT),u=!t||l;if(u){this.showToScreenReader(),t?this.adapter.removeAttr(Nf.ROLE):this.adapter.setAttr(Nf.ROLE,"alert");return}this.adapter.removeAttr(Nf.ROLE),this.hide()}},e.prototype.showToScreenReader=function(){this.adapter.removeAttr(Nf.ARIA_HIDDEN)},e.prototype.hide=function(){this.adapter.setAttr(Nf.ARIA_HIDDEN,"true")},e}(Fu);const{document:xL}=dg;function AL(i){let e,t,o,l,u,m,r,h;const y=i[31].default,b=fr(y,i,i[30],null);let v=[{class:o=rr({[i[2]]:!0,"mdc-menu-surface":!0,"mdc-menu-surface--fixed":i[5],"mdc-menu-surface--open":i[4],"smui-menu-surface--static":i[4],"mdc-menu-surface--fullwidth":i[7],...i[10]})},{style:l=Object.entries(i[11]).map(Eb).concat([i[3]]).join(" ")},i[13]],w={};for(let x=0;x<v.length;x+=1)w=qi(w,v[x]);return{c(){e=Xi(),t=ti("div"),b&&b.c(),this.h()},l(x){e=Yi(x),t=ii(x,"DIV",{class:!0,style:!0});var C=si(t);b&&b.l(C),C.forEach(Oe),this.h()},h(){or(t,w)},m(x,C){Dt(x,e,C),Dt(x,t,C),b&&b.m(t,null),i[33](t),m=!0,r||(h=[qn(xL.body,"click",i[32],!0),ir(u=Eo.call(null,t,i[1])),ir(i[12].call(null,t)),qn(t,"keydown",i[34])],r=!0)},p(x,C){b&&b.p&&(!m||C[0]&1073741824)&&dr(b,y,x,x[30],m?mr(y,x[30],C,null):pr(x[30]),null),or(t,w=wr(v,[(!m||C[0]&1204&&o!==(o=rr({[x[2]]:!0,"mdc-menu-surface":!0,"mdc-menu-surface--fixed":x[5],"mdc-menu-surface--open":x[4],"smui-menu-surface--static":x[4],"mdc-menu-surface--fullwidth":x[7],...x[10]})))&&{class:o},(!m||C[0]&2056&&l!==(l=Object.entries(x[11]).map(Eb).concat([x[3]]).join(" ")))&&{style:l},C[0]&8192&&x[13]])),u&&ro(u.update)&&C[0]&2&&u.update.call(null,x[1])},i(x){m||(yt(b,x),m=!0)},o(x){At(b,x),m=!1},d(x){x&&Oe(e),x&&Oe(t),b&&b.d(x),i[33](null),r=!1,Io(h)}}}const Eb=([i,e])=>`${i}: ${e};`;function kL(i,e,t){const o=["use","class","style","static","anchor","fixed","open","managed","fullWidth","quickOpen","anchorElement","anchorCorner","anchorMargin","maxHeight","horizontallyCenteredOnViewport","isOpen","setOpen","setAbsolutePosition","setIsHoisted","isFixed","getElement"];let l=Zn(e,o),{$$slots:u={},$$scope:m}=e;var r,h,y;const b=go(mo());let{use:v=[]}=e,{class:w=""}=e,{style:x=""}=e,{static:C=!1}=e,{anchor:T=!0}=e,{fixed:S=!1}=e,{open:M=C}=e,{managed:O=!1}=e,{fullWidth:V=!1}=e,{quickOpen:X=!1}=e,{anchorElement:Z=void 0}=e,{anchorCorner:ee=void 0}=e,{anchorMargin:J={top:0,right:0,bottom:0,left:0}}=e,{maxHeight:ie=0}=e,{horizontallyCenteredOnViewport:ke=!1}=e,Le,fe,Te={},_e={},ve;$o("SMUI:list:role","menu"),$o("SMUI:list:item:role","menuitem");const rt=Zf;Ss(()=>(t(9,fe=new k3({addClass:Tt,removeClass:We,hasClass:nt,hasAnchor:()=>!!Z,notifyClose:()=>{O||t(0,M=C),M||So(Le,"SMUIMenuSurface:closed",void 0,void 0,!0)},notifyClosing:()=>{O||t(0,M=C),M||So(Le,"SMUIMenuSurface:closing",void 0,void 0,!0)},notifyOpen:()=>{O||t(0,M=!0),M&&So(Le,"SMUIMenuSurface:opened",void 0,void 0,!0)},isElementInContainer:Ke=>Le.contains(Ke),isRtl:()=>getComputedStyle(Le).getPropertyValue("direction")==="rtl",setTransformOrigin:Ke=>{t(11,_e["transform-origin"]=Ke,_e)},isFocused:()=>document.activeElement===Le,saveFocus:()=>{var Ke;ve=(Ke=document.activeElement)!==null&&Ke!==void 0?Ke:void 0},restoreFocus:()=>{(!Le||Le.contains(document.activeElement))&&ve&&document.contains(ve)&&"focus"in ve&&ve.focus()},getInnerDimensions:()=>({width:Le.offsetWidth,height:Le.offsetHeight}),getAnchorDimensions:()=>Z?Z.getBoundingClientRect():null,getWindowDimensions:()=>({width:window.innerWidth,height:window.innerHeight}),getBodyDimensions:()=>({width:document.body.clientWidth,height:document.body.clientHeight}),getWindowScroll:()=>({x:window.pageXOffset,y:window.pageYOffset}),setPosition:Ke=>{t(11,_e.left="left"in Ke?`${Ke.left}px`:"",_e),t(11,_e.right="right"in Ke?`${Ke.right}px`:"",_e),t(11,_e.top="top"in Ke?`${Ke.top}px`:"",_e),t(11,_e.bottom="bottom"in Ke?`${Ke.bottom}px`:"",_e)},setMaxHeight:Ke=>{t(11,_e["max-height"]=Ke,_e)}})),So(Le,"SMUIMenuSurface:mount",{get open(){return M},set open(Ke){t(0,M=Ke)},closeProgrammatic:be}),fe.init(),()=>{var Ke;const Lt=fe.isHoistedElement;fe.destroy(),Lt&&((Ke=Le.parentNode)===null||Ke===void 0||Ke.removeChild(Le))})),Lc(()=>{var Ye;T&&Le&&((Ye=Le.parentElement)===null||Ye===void 0||Ye.classList.remove("mdc-menu-surface--anchor"))});function nt(Ye){return Ye in Te?Te[Ye]:me().classList.contains(Ye)}function Tt(Ye){Te[Ye]||t(10,Te[Ye]=!0,Te)}function We(Ye){(!(Ye in Te)||Te[Ye])&&t(10,Te[Ye]=!1,Te)}function be(Ye){fe.close(Ye),t(0,M=!1)}function Ce(){return M}function Be(Ye){t(0,M=Ye)}function le(Ye,Ke){return fe.setAbsolutePosition(Ye,Ke)}function Ee(Ye){return fe.setIsHoisted(Ye)}function he(){return fe.isFixed()}function me(){return Le}const Fe=Ye=>fe&&M&&!O&&fe.handleBodyClick(Ye);function Xe(Ye){wn[Ye?"unshift":"push"](()=>{Le=Ye,t(8,Le)})}const lt=Ye=>fe&&fe.handleKeydown(Ye);return i.$$set=Ye=>{e=qi(qi({},e),uo(Ye)),t(13,l=Zn(e,o)),"use"in Ye&&t(1,v=Ye.use),"class"in Ye&&t(2,w=Ye.class),"style"in Ye&&t(3,x=Ye.style),"static"in Ye&&t(4,C=Ye.static),"anchor"in Ye&&t(15,T=Ye.anchor),"fixed"in Ye&&t(5,S=Ye.fixed),"open"in Ye&&t(0,M=Ye.open),"managed"in Ye&&t(6,O=Ye.managed),"fullWidth"in Ye&&t(7,V=Ye.fullWidth),"quickOpen"in Ye&&t(16,X=Ye.quickOpen),"anchorElement"in Ye&&t(14,Z=Ye.anchorElement),"anchorCorner"in Ye&&t(17,ee=Ye.anchorCorner),"anchorMargin"in Ye&&t(18,J=Ye.anchorMargin),"maxHeight"in Ye&&t(19,ie=Ye.maxHeight),"horizontallyCenteredOnViewport"in Ye&&t(20,ke=Ye.horizontallyCenteredOnViewport),"$$scope"in Ye&&t(30,m=Ye.$$scope)},i.$$.update=()=>{i.$$.dirty[0]&939557120&&Le&&T&&!(!(t(27,r=Le.parentElement)===null||r===void 0)&&r.classList.contains("mdc-menu-surface--anchor"))&&(t(28,h=Le.parentElement)===null||h===void 0||h.classList.add("mdc-menu-surface--anchor"),t(14,Z=t(29,y=Le.parentElement)!==null&&y!==void 0?y:void 0)),i.$$.dirty[0]&513&&fe&&fe.isOpen()!==M&&(M?fe.open():fe.close()),i.$$.dirty[0]&66048&&fe&&fe.setQuickOpen(X),i.$$.dirty[0]&544&&fe&&fe.setFixedPosition(S),i.$$.dirty[0]&524800&&fe&&fe.setMaxHeight(ie),i.$$.dirty[0]&1049088&&fe&&fe.setIsHorizontallyCenteredOnViewport(ke),i.$$.dirty[0]&131584&&fe&&ee!=null&&(typeof ee=="string"?fe.setAnchorCorner(rt[ee]):fe.setAnchorCorner(ee)),i.$$.dirty[0]&262656&&fe&&fe.setAnchorMargin(J)},[M,v,w,x,C,S,O,V,Le,fe,Te,_e,b,l,Z,T,X,ee,J,ie,ke,Ce,Be,le,Ee,he,me,r,h,y,m,u,Fe,Xe,lt]}class SL extends xr{constructor(e){super(),Ar(this,e,kL,AL,br,{use:1,class:2,style:3,static:4,anchor:15,fixed:5,open:0,managed:6,fullWidth:7,quickOpen:16,anchorElement:14,anchorCorner:17,anchorMargin:18,maxHeight:19,horizontallyCenteredOnViewport:20,isOpen:21,setOpen:22,setAbsolutePosition:23,setIsHoisted:24,isFixed:25,getElement:26},null,[-1,-1])}get isOpen(){return this.$$.ctx[21]}get setOpen(){return this.$$.ctx[22]}get setAbsolutePosition(){return this.$$.ctx[23]}get setIsHoisted(){return this.$$.ctx[24]}get isFixed(){return this.$$.ctx[25]}get getElement(){return this.$$.ctx[26]}}function CL(i,{addClass:e=o=>i.classList.add(o),removeClass:t=o=>i.classList.remove(o)}={}){return e("mdc-menu-surface--anchor"),{destroy(){t("mdc-menu-surface--anchor")}}}function EL(i){let e;const t=i[17].default,o=fr(t,i,i[22],null);return{c(){o&&o.c()},l(l){o&&o.l(l)},m(l,u){o&&o.m(l,u),e=!0},p(l,u){o&&o.p&&(!e||u&4194304)&&dr(o,t,l,l[22],e?mr(t,l[22],u,null):pr(l[22]),null)},i(l){e||(yt(o,l),e=!0)},o(l){At(o,l),e=!1},d(l){o&&o.d(l)}}}function IL(i){let e,t,o;const l=[{use:i[5]},{class:rr({[i[1]]:!0,"mdc-menu":!0})},i[9]];function u(r){i[19](r)}let m={$$slots:{default:[EL]},$$scope:{ctx:i}};for(let r=0;r<l.length;r+=1)m=qi(m,l[r]);return i[0]!==void 0&&(m.open=i[0]),e=new SL({props:m}),i[18](e),wn.push(()=>Vo(e,"open",u)),e.$on("SMUIMenuSurface:mount",i[7]),e.$on("SMUIList:mount",i[8]),e.$on("SMUIMenuSurface:opened",i[20]),e.$on("keydown",i[6]),e.$on("SMUIList:action",i[21]),{c(){Hi(e.$$.fragment)},l(r){$i(e.$$.fragment,r)},m(r,h){Gi(e,r,h),o=!0},p(r,[h]){const y=h&546?wr(l,[h&32&&{use:r[5]},h&2&&{class:rr({[r[1]]:!0,"mdc-menu":!0})},h&512&&po(r[9])]):{};h&4194304&&(y.$$scope={dirty:h,ctx:r}),!t&&h&1&&(t=!0,y.open=r[0],qo(()=>t=!1)),e.$set(y)},i(r){o||(yt(e.$$.fragment,r),o=!0)},o(r){At(e.$$.fragment,r),o=!1},d(r){i[18](null),Wi(e,r)}}}function TL(i,e,t){let o;const l=["use","class","open","isOpen","setOpen","setDefaultFocusState","getSelectedIndex","getMenuSurface","getElement"];let u=Zn(e,l),{$$slots:m={},$$scope:r}=e;const{closest:h}=L1,y=go(mo());let{use:b=[]}=e,{class:v=""}=e,{open:w=!1}=e,x,C,T,S;Ss(()=>(t(3,C=new gL({addClassToElementAtIndex:(ve,rt)=>{S.addClassForElementIndex(ve,rt)},removeClassFromElementAtIndex:(ve,rt)=>{S.removeClassForElementIndex(ve,rt)},addAttributeToElementAtIndex:(ve,rt,nt)=>{S.setAttributeForElementIndex(ve,rt,nt)},removeAttributeFromElementAtIndex:(ve,rt)=>{S.removeAttributeForElementIndex(ve,rt)},getAttributeFromElementAtIndex:(ve,rt)=>S.getAttributeFromElementIndex(ve,rt),elementContainsClass:(ve,rt)=>ve.classList.contains(rt),closeSurface:ve=>T.closeProgrammatic(ve),getElementIndex:ve=>S.getOrderedList().map(rt=>rt.element).indexOf(ve),notifySelected:ve=>So(ke(),"SMUIMenu:selected",{index:ve.index,item:S.getOrderedList()[ve.index].element},void 0,!0),getMenuItemCount:()=>S.items.length,focusItemAtIndex:ve=>S.focusItemAtIndex(ve),focusListRoot:()=>"focus"in S.element&&S.element.focus(),isSelectableItemAtIndex:ve=>!!h(S.getOrderedList()[ve].element,`.${ed.MENU_SELECTION_GROUP}`),getSelectedSiblingOfItemAtIndex:ve=>{const rt=S.getOrderedList(),nt=h(rt[ve].element,`.${ed.MENU_SELECTION_GROUP}`),Tt=nt==null?void 0:nt.querySelector(`.${ed.MENU_SELECTED_LIST_ITEM}`);return Tt?rt.map(We=>We.element).indexOf(Tt):-1}})),So(ke(),"SMUIMenu:mount",C),C.init(),()=>{C.destroy()}));function M(ve){C&&C.handleKeydown(ve)}function O(ve){T||(T=ve.detail)}function V(ve){S||t(4,S=ve.detail)}function X(){return w}function Z(ve){t(0,w=ve)}function ee(ve){C.setDefaultFocusState(ve)}function J(){return C.getSelectedIndex()}function ie(){return x}function ke(){return x.getElement()}function Le(ve){wn[ve?"unshift":"push"](()=>{x=ve,t(2,x)})}function fe(ve){w=ve,t(0,w)}const Te=()=>C&&C.handleMenuSurfaceOpened(),_e=ve=>C&&C.handleItemAction(S.getOrderedList()[ve.detail.index].element);return i.$$set=ve=>{e=qi(qi({},e),uo(ve)),t(9,u=Zn(e,l)),"use"in ve&&t(10,b=ve.use),"class"in ve&&t(1,v=ve.class),"open"in ve&&t(0,w=ve.open),"$$scope"in ve&&t(22,r=ve.$$scope)},i.$$.update=()=>{i.$$.dirty&1024&&t(5,o=[y,...b])},[w,v,x,C,S,o,M,O,V,u,b,X,Z,ee,J,ie,ke,m,Le,fe,Te,_e,r]}class LL extends xr{constructor(e){super(),Ar(this,e,TL,IL,br,{use:10,class:1,open:0,isOpen:11,setOpen:12,setDefaultFocusState:13,getSelectedIndex:14,getMenuSurface:15,getElement:16})}get isOpen(){return this.$$.ctx[11]}get setOpen(){return this.$$.ctx[12]}get setDefaultFocusState(){return this.$$.ctx[13]}get getSelectedIndex(){return this.$$.ctx[14]}get getMenuSurface(){return this.$$.ctx[15]}get getElement(){return this.$$.ctx[16]}}function PL(i){let e;const t=i[37].default,o=fr(t,i,i[43],null);return{c(){o&&o.c()},l(l){o&&o.l(l)},m(l,u){o&&o.m(l,u),e=!0},p(l,u){o&&o.p&&(!e||u[1]&4096)&&dr(o,t,l,l[43],e?mr(t,l[43],u,null):pr(l[43]),null)},i(l){e||(yt(o,l),e=!0)},o(l){At(o,l),e=!1},d(l){o&&o.d(l)}}}function ML(i){let e,t,o;const l=[{use:[i[17],...i[0]]},{class:rr({[i[1]]:!0,"mdc-deprecated-list":!0,"mdc-deprecated-list--non-interactive":i[2],"mdc-deprecated-list--dense":i[3],"mdc-deprecated-list--textual-list":i[4],"mdc-deprecated-list--avatar-list":i[5]||i[18],"mdc-deprecated-list--icon-list":i[6],"mdc-deprecated-list--image-list":i[7],"mdc-deprecated-list--thumbnail-list":i[8],"mdc-deprecated-list--video-list":i[9],"mdc-deprecated-list--two-line":i[10],"smui-list--three-line":i[11]&&!i[10]})},{role:i[15]},i[23]];var u=i[12];function m(r){let h={$$slots:{default:[PL]},$$scope:{ctx:r}};for(let y=0;y<l.length;y+=1)h=qi(h,l[y]);return{props:h}}return u&&(e=wl(u,m(i)),i[38](e),e.$on("keydown",i[39]),e.$on("focusin",i[40]),e.$on("focusout",i[41]),e.$on("click",i[42]),e.$on("SMUIListItem:mount",i[19]),e.$on("SMUIListItem:unmount",i[20]),e.$on("SMUI:action",i[21])),{c(){e&&Hi(e.$$.fragment),t=gn()},l(r){e&&$i(e.$$.fragment,r),t=gn()},m(r,h){e&&Gi(e,r,h),Dt(r,t,h),o=!0},p(r,h){const y=h[0]&8818687?wr(l,[h[0]&131073&&{use:[r[17],...r[0]]},h[0]&266238&&{class:rr({[r[1]]:!0,"mdc-deprecated-list":!0,"mdc-deprecated-list--non-interactive":r[2],"mdc-deprecated-list--dense":r[3],"mdc-deprecated-list--textual-list":r[4],"mdc-deprecated-list--avatar-list":r[5]||r[18],"mdc-deprecated-list--icon-list":r[6],"mdc-deprecated-list--image-list":r[7],"mdc-deprecated-list--thumbnail-list":r[8],"mdc-deprecated-list--video-list":r[9],"mdc-deprecated-list--two-line":r[10],"smui-list--three-line":r[11]&&!r[10]})},h[0]&32768&&{role:r[15]},h[0]&8388608&&po(r[23])]):{};if(h[1]&4096&&(y.$$scope={dirty:h,ctx:r}),u!==(u=r[12])){if(e){Dr();const b=e;At(b.$$.fragment,1,0,()=>{Wi(b,1)}),Mr()}u?(e=wl(u,m(r)),r[38](e),e.$on("keydown",r[39]),e.$on("focusin",r[40]),e.$on("focusout",r[41]),e.$on("click",r[42]),e.$on("SMUIListItem:mount",r[19]),e.$on("SMUIListItem:unmount",r[20]),e.$on("SMUI:action",r[21]),Hi(e.$$.fragment),yt(e.$$.fragment,1),Gi(e,t.parentNode,t)):e=null}else u&&e.$set(y)},i(r){o||(e&&yt(e.$$.fragment,r),o=!0)},o(r){e&&At(e.$$.fragment,r),o=!1},d(r){i[38](null),r&&Oe(t),e&&Wi(e,r)}}}function DL(i,e,t){const o=["use","class","nonInteractive","dense","textualList","avatarList","iconList","imageList","thumbnailList","videoList","twoLine","threeLine","vertical","wrapFocus","singleSelection","selectedIndex","radioList","checkList","hasTypeahead","component","layout","setEnabled","getTypeaheadInProgress","getSelectedIndex","getFocusedItemIndex","getElement"];let l=Zn(e,o),{$$slots:u={},$$scope:m}=e;var r;const{closest:h,matches:y}=L1,b=go(mo());let{use:v=[]}=e,{class:w=""}=e,{nonInteractive:x=!1}=e,{dense:C=!1}=e,{textualList:T=!1}=e,{avatarList:S=!1}=e,{iconList:M=!1}=e,{imageList:O=!1}=e,{thumbnailList:V=!1}=e,{videoList:X=!1}=e,{twoLine:Z=!1}=e,{threeLine:ee=!1}=e,{vertical:J=!0}=e,{wrapFocus:ie=(r=ds("SMUI:list:wrapFocus"))!==null&&r!==void 0?r:!1}=e,{singleSelection:ke=!1}=e,{selectedIndex:Le=-1}=e,{radioList:fe=!1}=e,{checkList:Te=!1}=e,{hasTypeahead:_e=!1}=e,ve,rt,nt=[],Tt=ds("SMUI:list:role"),We=ds("SMUI:list:nav");const be=new WeakMap;let Ce=ds("SMUI:dialog:selection"),Be=ds("SMUI:addLayoutListener"),le,{component:Ee=We?M6:D6}=e;$o("SMUI:list:nonInteractive",x),$o("SMUI:separator:context","list"),Tt||(ke?(Tt="listbox",$o("SMUI:list:item:role","option")):fe?(Tt="radiogroup",$o("SMUI:list:item:role","radio")):Te?(Tt="group",$o("SMUI:list:item:role","checkbox")):(Tt="list",$o("SMUI:list:item:role",void 0))),Be&&(le=Be(Yt)),Ss(()=>{t(13,rt=new pL({addClassForElementIndex:Ke,focusItemAtIndex:lt,getAttributeForElementIndex:(ae,et)=>{var vt,Wt;return(Wt=(vt=Xe()[ae])===null||vt===void 0?void 0:vt.getAttr(et))!==null&&Wt!==void 0?Wt:null},getFocusedElementIndex:()=>document.activeElement?Xe().map(ae=>ae.element).indexOf(document.activeElement):-1,getListItemCount:()=>nt.length,getPrimaryTextAtIndex:bt,hasCheckboxAtIndex:ae=>{var et,vt;return(vt=(et=Xe()[ae])===null||et===void 0?void 0:et.hasCheckbox)!==null&&vt!==void 0?vt:!1},hasRadioAtIndex:ae=>{var et,vt;return(vt=(et=Xe()[ae])===null||et===void 0?void 0:et.hasRadio)!==null&&vt!==void 0?vt:!1},isCheckboxCheckedAtIndex:ae=>{var et;const vt=Xe()[ae];return(et=(vt==null?void 0:vt.hasCheckbox)&&vt.checked)!==null&&et!==void 0?et:!1},isFocusInsideList:()=>ve!=null&&Vt()!==document.activeElement&&Vt().contains(document.activeElement),isRootFocused:()=>ve!=null&&document.activeElement===Vt(),listItemAtIndexHasClass:Ye,notifyAction:ae=>{t(24,Le=ae),ve!=null&&So(Vt(),"SMUIList:action",{index:ae},void 0,!0)},removeClassForElementIndex:Lt,setAttributeForElementIndex:$t,setCheckedCheckboxOrRadioAtIndex:(ae,et)=>{Xe()[ae].checked=et},setTabIndexForListItemChildren:(ae,et)=>{const vt=Xe()[ae],Wt="button:not(:disabled), a";Array.prototype.forEach.call(vt.element.querySelectorAll(Wt),di=>{di.setAttribute("tabindex",et)})}}));const Q={get element(){return Vt()},get items(){return nt},get typeaheadInProgress(){return rt.isTypeaheadInProgress()},typeaheadMatchItem(ae,et){return rt.typeaheadMatchItem(ae,et,!0)},getOrderedList:Xe,focusItemAtIndex:lt,addClassForElementIndex:Ke,removeClassForElementIndex:Lt,setAttributeForElementIndex:$t,removeAttributeForElementIndex:dt,getAttributeFromElementIndex:wt,getPrimaryTextAtIndex:bt};return So(Vt(),"SMUIList:mount",Q),rt.init(),()=>{rt.destroy()}}),Lc(()=>{le&&le()});function he(Q){nt.push(Q.detail),be.set(Q.detail.element,Q.detail),ke&&Q.detail.selected&&t(24,Le=$e(Q.detail.element)),Q.stopPropagation()}function me(Q){var ae;const et=(ae=Q.detail&&nt.indexOf(Q.detail))!==null&&ae!==void 0?ae:-1;et!==-1&&(nt.splice(et,1),nt=nt,be.delete(Q.detail.element)),Q.stopPropagation()}function Fe(Q){if(fe||Te){const ae=$e(Q.target);if(ae!==-1){const et=Xe()[ae];et&&(fe&&!et.checked||Te)&&(et.checked=!et.checked,et.activateRipple(),window.requestAnimationFrame(()=>{et.deactivateRipple()}))}}}function Xe(){return ve==null?[]:[...Vt().children].map(Q=>be.get(Q)).filter(Q=>Q&&Q._smui_list_item_accessor)}function lt(Q){const ae=Xe()[Q];ae&&"focus"in ae.element&&ae.element.focus()}function Ye(Q,ae){var et;const vt=Xe()[Q];return(et=vt&&vt.hasClass(ae))!==null&&et!==void 0?et:!1}function Ke(Q,ae){const et=Xe()[Q];et&&et.addClass(ae)}function Lt(Q,ae){const et=Xe()[Q];et&&et.removeClass(ae)}function $t(Q,ae,et){const vt=Xe()[Q];vt&&vt.addAttr(ae,et)}function dt(Q,ae){const et=Xe()[Q];et&&et.removeAttr(ae)}function wt(Q,ae){const et=Xe()[Q];return et?et.getAttr(ae):null}function bt(Q){var ae;const et=Xe()[Q];return(ae=et&&et.getPrimaryText())!==null&&ae!==void 0?ae:""}function $e(Q){const ae=h(Q,".mdc-deprecated-list-item, .mdc-deprecated-list");return ae&&y(ae,".mdc-deprecated-list-item")?Xe().map(et=>et==null?void 0:et.element).indexOf(ae):-1}function Yt(){return rt.layout()}function li(Q,ae){return rt.setEnabled(Q,ae)}function Zt(){return rt.isTypeaheadInProgress()}function Ci(){return rt.getSelectedIndex()}function Li(){return rt.getFocusedItemIndex()}function Vt(){return ve.getElement()}function mi(Q){wn[Q?"unshift":"push"](()=>{ve=Q,t(14,ve)})}const Qi=Q=>rt&&rt.handleKeydown(Q,Q.target.classList.contains("mdc-deprecated-list-item"),$e(Q.target)),xi=Q=>rt&&rt.handleFocusIn($e(Q.target)),Jt=Q=>rt&&rt.handleFocusOut($e(Q.target)),Me=Q=>rt&&rt.handleClick($e(Q.target),!y(Q.target,'input[type="checkbox"], input[type="radio"]'));return i.$$set=Q=>{e=qi(qi({},e),uo(Q)),t(23,l=Zn(e,o)),"use"in Q&&t(0,v=Q.use),"class"in Q&&t(1,w=Q.class),"nonInteractive"in Q&&t(2,x=Q.nonInteractive),"dense"in Q&&t(3,C=Q.dense),"textualList"in Q&&t(4,T=Q.textualList),"avatarList"in Q&&t(5,S=Q.avatarList),"iconList"in Q&&t(6,M=Q.iconList),"imageList"in Q&&t(7,O=Q.imageList),"thumbnailList"in Q&&t(8,V=Q.thumbnailList),"videoList"in Q&&t(9,X=Q.videoList),"twoLine"in Q&&t(10,Z=Q.twoLine),"threeLine"in Q&&t(11,ee=Q.threeLine),"vertical"in Q&&t(25,J=Q.vertical),"wrapFocus"in Q&&t(26,ie=Q.wrapFocus),"singleSelection"in Q&&t(27,ke=Q.singleSelection),"selectedIndex"in Q&&t(24,Le=Q.selectedIndex),"radioList"in Q&&t(28,fe=Q.radioList),"checkList"in Q&&t(29,Te=Q.checkList),"hasTypeahead"in Q&&t(30,_e=Q.hasTypeahead),"component"in Q&&t(12,Ee=Q.component),"$$scope"in Q&&t(43,m=Q.$$scope)},i.$$.update=()=>{i.$$.dirty[0]&33562624&&rt&&rt.setVerticalOrientation(J),i.$$.dirty[0]&67117056&&rt&&rt.setWrapFocus(ie),i.$$.dirty[0]&1073750016&&rt&&rt.setHasTypeahead(_e),i.$$.dirty[0]&134225920&&rt&&rt.setSingleSelection(ke),i.$$.dirty[0]&151003136&&rt&&ke&&Ci()!==Le&&rt.setSelectedIndex(Le)},[v,w,x,C,T,S,M,O,V,X,Z,ee,Ee,rt,ve,Tt,y,b,Ce,he,me,Fe,$e,l,Le,J,ie,ke,fe,Te,_e,Yt,li,Zt,Ci,Li,Vt,u,mi,Qi,xi,Jt,Me,m]}class OL extends xr{constructor(e){super(),Ar(this,e,DL,ML,br,{use:0,class:1,nonInteractive:2,dense:3,textualList:4,avatarList:5,iconList:6,imageList:7,thumbnailList:8,videoList:9,twoLine:10,threeLine:11,vertical:25,wrapFocus:26,singleSelection:27,selectedIndex:24,radioList:28,checkList:29,hasTypeahead:30,component:12,layout:31,setEnabled:32,getTypeaheadInProgress:33,getSelectedIndex:34,getFocusedItemIndex:35,getElement:36},null,[-1,-1])}get layout(){return this.$$.ctx[31]}get setEnabled(){return this.$$.ctx[32]}get getTypeaheadInProgress(){return this.$$.ctx[33]}get getSelectedIndex(){return this.$$.ctx[34]}get getFocusedItemIndex(){return this.$$.ctx[35]}get getElement(){return this.$$.ctx[36]}}function Ib(i){let e;return{c(){e=ti("span"),this.h()},l(t){e=ii(t,"SPAN",{class:!0}),si(e).forEach(Oe),this.h()},h(){oi(e,"class","mdc-deprecated-list-item__ripple")},m(t,o){Dt(t,e,o)},d(t){t&&Oe(e)}}}function FL(i){let e,t,o=i[7]&&Ib();const l=i[32].default,u=fr(l,i,i[35],null);return{c(){o&&o.c(),e=gn(),u&&u.c()},l(m){o&&o.l(m),e=gn(),u&&u.l(m)},m(m,r){o&&o.m(m,r),Dt(m,e,r),u&&u.m(m,r),t=!0},p(m,r){m[7]?o||(o=Ib(),o.c(),o.m(e.parentNode,e)):o&&(o.d(1),o=null),u&&u.p&&(!t||r[1]&16)&&dr(u,l,m,m[35],t?mr(l,m[35],r,null):pr(m[35]),null)},i(m){t||(yt(u,m),t=!0)},o(m){At(u,m),t=!1},d(m){o&&o.d(m),m&&Oe(e),u&&u.d(m)}}}function RL(i){let e,t,o;const l=[{use:[...i[6]?[]:[[oh,{ripple:!i[14],unbounded:!1,color:(i[1]||i[0])&&i[5]==null?"primary":i[5],disabled:i[9],addClass:i[22],removeClass:i[23],addStyle:i[24]}]],i[20],...i[2]]},{class:rr({[i[3]]:!0,"mdc-deprecated-list-item":!0,"mdc-deprecated-list-item--activated":i[1],"mdc-deprecated-list-item--selected":i[0],"mdc-deprecated-list-item--disabled":i[9],"mdc-menu-item--selected":!i[21]&&i[8]==="menuitem"&&i[0],"smui-menu-item--non-interactive":i[6],...i[16]})},{style:Object.entries(i[17]).map(Tb).concat([i[4]]).join(" ")},i[21]&&i[1]?{"aria-current":"page"}:{},i[21]?{}:{role:i[8]},!i[21]&&i[8]==="option"?{"aria-selected":i[0]?"true":"false"}:{},!i[21]&&(i[8]==="radio"||i[8]==="checkbox")?{"aria-checked":i[14]&&i[14].checked?"true":"false"}:{},i[21]?{}:{"aria-disabled":i[9]?"true":"false"},{"data-menu-item-skip-restore-focus":i[10]||void 0},{tabindex:i[19]},{href:i[11]},i[18],i[27]];var u=i[12];function m(r){let h={$$slots:{default:[FL]},$$scope:{ctx:r}};for(let y=0;y<l.length;y+=1)h=qi(h,l[y]);return{props:h}}return u&&(e=wl(u,m(i)),i[33](e),e.$on("click",i[13]),e.$on("keydown",i[25]),e.$on("SMUIGenericInput:mount",i[26]),e.$on("SMUIGenericInput:unmount",i[34])),{c(){e&&Hi(e.$$.fragment),t=gn()},l(r){e&&$i(e.$$.fragment,r),t=gn()},m(r,h){e&&Gi(e,r,h),Dt(r,t,h),o=!0},p(r,h){const y=h[0]&167726975?wr(l,[h[0]&30425703&&{use:[...r[6]?[]:[[oh,{ripple:!r[14],unbounded:!1,color:(r[1]||r[0])&&r[5]==null?"primary":r[5],disabled:r[9],addClass:r[22],removeClass:r[23],addStyle:r[24]}]],r[20],...r[2]]},h[0]&2163531&&{class:rr({[r[3]]:!0,"mdc-deprecated-list-item":!0,"mdc-deprecated-list-item--activated":r[1],"mdc-deprecated-list-item--selected":r[0],"mdc-deprecated-list-item--disabled":r[9],"mdc-menu-item--selected":!r[21]&&r[8]==="menuitem"&&r[0],"smui-menu-item--non-interactive":r[6],...r[16]})},h[0]&131088&&{style:Object.entries(r[17]).map(Tb).concat([r[4]]).join(" ")},h[0]&2097154&&po(r[21]&&r[1]?{"aria-current":"page"}:{}),h[0]&2097408&&po(r[21]?{}:{role:r[8]}),h[0]&2097409&&po(!r[21]&&r[8]==="option"?{"aria-selected":r[0]?"true":"false"}:{}),h[0]&2113792&&po(!r[21]&&(r[8]==="radio"||r[8]==="checkbox")?{"aria-checked":r[14]&&r[14].checked?"true":"false"}:{}),h[0]&2097664&&po(r[21]?{}:{"aria-disabled":r[9]?"true":"false"}),h[0]&1024&&{"data-menu-item-skip-restore-focus":r[10]||void 0},h[0]&524288&&{tabindex:r[19]},h[0]&2048&&{href:r[11]},h[0]&262144&&po(r[18]),h[0]&134217728&&po(r[27])]):{};if(h[0]&128|h[1]&16&&(y.$$scope={dirty:h,ctx:r}),u!==(u=r[12])){if(e){Dr();const b=e;At(b.$$.fragment,1,0,()=>{Wi(b,1)}),Mr()}u?(e=wl(u,m(r)),r[33](e),e.$on("click",r[13]),e.$on("keydown",r[25]),e.$on("SMUIGenericInput:mount",r[26]),e.$on("SMUIGenericInput:unmount",r[34]),Hi(e.$$.fragment),yt(e.$$.fragment,1),Gi(e,t.parentNode,t)):e=null}else u&&e.$set(y)},i(r){o||(e&&yt(e.$$.fragment,r),o=!0)},o(r){e&&At(e.$$.fragment,r),o=!1},d(r){i[33](null),r&&Oe(t),e&&Wi(e,r)}}}let BL=0;const Tb=([i,e])=>`${i}: ${e};`;function zL(i,e,t){let o;const l=["use","class","style","color","nonInteractive","ripple","activated","role","selected","disabled","skipRestoreFocus","tabindex","inputId","href","component","action","getPrimaryText","getElement"];let u=Zn(e,l),{$$slots:m={},$$scope:r}=e;var h;const y=go(mo());let b=()=>{};function v(dt){return dt===b}let{use:w=[]}=e,{class:x=""}=e,{style:C=""}=e,{color:T=void 0}=e,{nonInteractive:S=(h=ds("SMUI:list:nonInteractive"))!==null&&h!==void 0?h:!1}=e;$o("SMUI:list:nonInteractive",void 0);let{ripple:M=!S}=e,{activated:O=!1}=e,{role:V=ds("SMUI:list:item:role")}=e;$o("SMUI:list:item:role",void 0);let{selected:X=!1}=e,{disabled:Z=!1}=e,{skipRestoreFocus:ee=!1}=e,{tabindex:J=b}=e,{inputId:ie="SMUI-form-field-list-"+BL++}=e,{href:ke=void 0}=e,Le,fe={},Te={},_e={},ve,rt,nt=ds("SMUI:list:item:nav"),{component:Tt=nt?ke?gg:vf:L6}=e;$o("SMUI:generic:input:props",{id:ie}),$o("SMUI:separator:context",void 0),Ss(()=>{if(!X&&!S){let wt=!0,bt=Le;for(;bt.previousSibling;)if(bt=bt.previousSibling,bt.nodeType===1&&bt.classList.contains("mdc-deprecated-list-item")&&!bt.classList.contains("mdc-deprecated-list-item--disabled")){wt=!1;break}wt&&(rt=window.requestAnimationFrame(me))}const dt={_smui_list_item_accessor:!0,get element(){return Ke()},get selected(){return X},set selected(wt){t(0,X=wt)},hasClass:We,addClass:be,removeClass:Ce,getAttr:le,addAttr:Ee,removeAttr:he,getPrimaryText:Ye,get checked(){var wt;return(wt=ve&&ve.checked)!==null&&wt!==void 0?wt:!1},set checked(wt){ve&&t(14,ve.checked=!!wt,ve)},get hasCheckbox(){return!!(ve&&"_smui_checkbox_accessor"in ve)},get hasRadio(){return!!(ve&&"_smui_radio_accessor"in ve)},activateRipple(){ve&&ve.activateRipple()},deactivateRipple(){ve&&ve.deactivateRipple()},getValue(){return u.value},action:lt,get tabindex(){return o},set tabindex(wt){t(28,J=wt)},get disabled(){return Z},get activated(){return O},set activated(wt){t(1,O=wt)}};return So(Ke(),"SMUIListItem:mount",dt),()=>{So(Ke(),"SMUIListItem:unmount",dt)}}),Lc(()=>{rt&&window.cancelAnimationFrame(rt)});function We(dt){return dt in fe?fe[dt]:Ke().classList.contains(dt)}function be(dt){fe[dt]||t(16,fe[dt]=!0,fe)}function Ce(dt){(!(dt in fe)||fe[dt])&&t(16,fe[dt]=!1,fe)}function Be(dt,wt){Te[dt]!=wt&&(wt===""||wt==null?(delete Te[dt],t(17,Te)):t(17,Te[dt]=wt,Te))}function le(dt){var wt;return dt in _e?(wt=_e[dt])!==null&&wt!==void 0?wt:null:Ke().getAttribute(dt)}function Ee(dt,wt){_e[dt]!==wt&&t(18,_e[dt]=wt,_e)}function he(dt){(!(dt in _e)||_e[dt]!=null)&&t(18,_e[dt]=void 0,_e)}function me(){let dt=!0,wt=Le.getElement();for(;wt.nextElementSibling;)if(wt=wt.nextElementSibling,wt.nodeType===1&&wt.classList.contains("mdc-deprecated-list-item")){const bt=wt.attributes.getNamedItem("tabindex");if(bt&&bt.value==="0"){dt=!1;break}}dt&&t(19,o=0)}function Fe(dt){const wt=dt.key==="Enter",bt=dt.key==="Space";(wt||bt)&&lt(dt)}function Xe(dt){("_smui_checkbox_accessor"in dt.detail||"_smui_radio_accessor"in dt.detail)&&t(14,ve=dt.detail)}function lt(dt){Z||So(Ke(),"SMUI:action",dt)}function Ye(){var dt,wt,bt;const $e=Ke(),Yt=$e.querySelector(".mdc-deprecated-list-item__primary-text");if(Yt)return(dt=Yt.textContent)!==null&&dt!==void 0?dt:"";const li=$e.querySelector(".mdc-deprecated-list-item__text");return li?(wt=li.textContent)!==null&&wt!==void 0?wt:"":(bt=$e.textContent)!==null&&bt!==void 0?bt:""}function Ke(){return Le.getElement()}function Lt(dt){wn[dt?"unshift":"push"](()=>{Le=dt,t(15,Le)})}const $t=()=>t(14,ve=void 0);return i.$$set=dt=>{e=qi(qi({},e),uo(dt)),t(27,u=Zn(e,l)),"use"in dt&&t(2,w=dt.use),"class"in dt&&t(3,x=dt.class),"style"in dt&&t(4,C=dt.style),"color"in dt&&t(5,T=dt.color),"nonInteractive"in dt&&t(6,S=dt.nonInteractive),"ripple"in dt&&t(7,M=dt.ripple),"activated"in dt&&t(1,O=dt.activated),"role"in dt&&t(8,V=dt.role),"selected"in dt&&t(0,X=dt.selected),"disabled"in dt&&t(9,Z=dt.disabled),"skipRestoreFocus"in dt&&t(10,ee=dt.skipRestoreFocus),"tabindex"in dt&&t(28,J=dt.tabindex),"inputId"in dt&&t(29,ie=dt.inputId),"href"in dt&&t(11,ke=dt.href),"component"in dt&&t(12,Tt=dt.component),"$$scope"in dt&&t(35,r=dt.$$scope)},i.$$.update=()=>{i.$$.dirty[0]&268452417&&t(19,o=v(J)?!S&&!Z&&(X||ve&&ve.checked)?0:-1:J)},[X,O,w,x,C,T,S,M,V,Z,ee,ke,Tt,lt,ve,Le,fe,Te,_e,o,y,nt,be,Ce,Be,Fe,Xe,u,J,ie,Ye,Ke,m,Lt,$t,r]}class NL extends xr{constructor(e){super(),Ar(this,e,zL,RL,br,{use:2,class:3,style:4,color:5,nonInteractive:6,ripple:7,activated:1,role:8,selected:0,disabled:9,skipRestoreFocus:10,tabindex:28,inputId:29,href:11,component:12,action:13,getPrimaryText:30,getElement:31},null,[-1,-1])}get action(){return this.$$.ctx[13]}get getPrimaryText(){return this.$$.ctx[30]}get getElement(){return this.$$.ctx[31]}}Al({class:"mdc-deprecated-list-item__text",component:vf});Al({class:"mdc-deprecated-list-item__primary-text",component:vf});Al({class:"mdc-deprecated-list-item__secondary-text",component:vf});function jL(i){let e,t,o,l,u,m;const r=i[8].default,h=fr(r,i,i[7],null);let y=[{class:t=rr({[i[1]]:!0,"mdc-deprecated-list-item__graphic":!0,"mdc-menu__selection-group-icon":i[4]})},i[5]],b={};for(let v=0;v<y.length;v+=1)b=qi(b,y[v]);return{c(){e=ti("span"),h&&h.c(),this.h()},l(v){e=ii(v,"SPAN",{class:!0});var w=si(e);h&&h.l(w),w.forEach(Oe),this.h()},h(){or(e,b)},m(v,w){Dt(v,e,w),h&&h.m(e,null),i[9](e),l=!0,u||(m=[ir(o=Eo.call(null,e,i[0])),ir(i[3].call(null,e))],u=!0)},p(v,[w]){h&&h.p&&(!l||w&128)&&dr(h,r,v,v[7],l?mr(r,v[7],w,null):pr(v[7]),null),or(e,b=wr(y,[(!l||w&2&&t!==(t=rr({[v[1]]:!0,"mdc-deprecated-list-item__graphic":!0,"mdc-menu__selection-group-icon":v[4]})))&&{class:t},w&32&&v[5]])),o&&ro(o.update)&&w&1&&o.update.call(null,v[0])},i(v){l||(yt(h,v),l=!0)},o(v){At(h,v),l=!1},d(v){v&&Oe(e),h&&h.d(v),i[9](null),u=!1,Io(m)}}}function UL(i,e,t){const o=["use","class","getElement"];let l=Zn(e,o),{$$slots:u={},$$scope:m}=e;const r=go(mo());let{use:h=[]}=e,{class:y=""}=e,b,v=ds("SMUI:list:graphic:menu-selection-group");function w(){return b}function x(C){wn[C?"unshift":"push"](()=>{b=C,t(2,b)})}return i.$$set=C=>{e=qi(qi({},e),uo(C)),t(5,l=Zn(e,o)),"use"in C&&t(0,h=C.use),"class"in C&&t(1,y=C.class),"$$scope"in C&&t(7,m=C.$$scope)},[h,y,b,r,v,l,w,m,u,x]}class VL extends xr{constructor(e){super(),Ar(this,e,UL,jL,br,{use:0,class:1,getElement:6})}get getElement(){return this.$$.ctx[6]}}Al({class:"mdc-deprecated-list-item__meta",component:vf});Al({class:"mdc-deprecated-list-group",component:ip});Al({class:"mdc-deprecated-list-group__subheader",component:E6});const qL=NL,HL=VL;Al({class:"mdc-menu__selection-group-icon",component:HL});function GL(i){let e,t,o,l,u,m,r,h;const y=i[22].default,b=fr(y,i,i[21],null);let v=[{class:t=rr({[i[3]]:!0,"mdc-floating-label":!0,"mdc-floating-label--float-above":i[0],"mdc-floating-label--required":i[1],...i[8]})},{style:o=Object.entries(i[9]).map(Pb).concat([i[4]]).join(" ")},{for:l=i[5]||(i[11]?i[11].id:void 0)},i[12]],w={};for(let x=0;x<v.length;x+=1)w=qi(w,v[x]);return{c(){e=ti("label"),b&&b.c(),this.h()},l(x){e=ii(x,"LABEL",{class:!0,style:!0,for:!0});var C=si(e);b&&b.l(C),C.forEach(Oe),this.h()},h(){or(e,w)},m(x,C){Dt(x,e,C),b&&b.m(e,null),i[24](e),m=!0,r||(h=[ir(u=Eo.call(null,e,i[2])),ir(i[10].call(null,e))],r=!0)},p(x,C){b&&b.p&&(!m||C&2097152)&&dr(b,y,x,x[21],m?mr(y,x[21],C,null):pr(x[21]),null),or(e,w=wr(v,[(!m||C&267&&t!==(t=rr({[x[3]]:!0,"mdc-floating-label":!0,"mdc-floating-label--float-above":x[0],"mdc-floating-label--required":x[1],...x[8]})))&&{class:t},(!m||C&528&&o!==(o=Object.entries(x[9]).map(Pb).concat([x[4]]).join(" ")))&&{style:o},(!m||C&32&&l!==(l=x[5]||(x[11]?x[11].id:void 0)))&&{for:l},C&4096&&x[12]])),u&&ro(u.update)&&C&4&&u.update.call(null,x[2])},i(x){m||(yt(b,x),m=!0)},o(x){At(b,x),m=!1},d(x){x&&Oe(e),b&&b.d(x),i[24](null),r=!1,Io(h)}}}function WL(i){let e,t,o,l,u,m,r;const h=i[22].default,y=fr(h,i,i[21],null);let b=[{class:t=rr({[i[3]]:!0,"mdc-floating-label":!0,"mdc-floating-label--float-above":i[0],"mdc-floating-label--required":i[1],...i[8]})},{style:o=Object.entries(i[9]).map(Lb).concat([i[4]]).join(" ")},i[12]],v={};for(let w=0;w<b.length;w+=1)v=qi(v,b[w]);return{c(){e=ti("span"),y&&y.c(),this.h()},l(w){e=ii(w,"SPAN",{class:!0,style:!0});var x=si(e);y&&y.l(x),x.forEach(Oe),this.h()},h(){or(e,v)},m(w,x){Dt(w,e,x),y&&y.m(e,null),i[23](e),u=!0,m||(r=[ir(l=Eo.call(null,e,i[2])),ir(i[10].call(null,e))],m=!0)},p(w,x){y&&y.p&&(!u||x&2097152)&&dr(y,h,w,w[21],u?mr(h,w[21],x,null):pr(w[21]),null),or(e,v=wr(b,[(!u||x&267&&t!==(t=rr({[w[3]]:!0,"mdc-floating-label":!0,"mdc-floating-label--float-above":w[0],"mdc-floating-label--required":w[1],...w[8]})))&&{class:t},(!u||x&528&&o!==(o=Object.entries(w[9]).map(Lb).concat([w[4]]).join(" ")))&&{style:o},x&4096&&w[12]])),l&&ro(l.update)&&x&4&&l.update.call(null,w[2])},i(w){u||(yt(y,w),u=!0)},o(w){At(y,w),u=!1},d(w){w&&Oe(e),y&&y.d(w),i[23](null),m=!1,Io(r)}}}function XL(i){let e,t,o,l;const u=[WL,GL],m=[];function r(h,y){return h[6]?0:1}return e=r(i),t=m[e]=u[e](i),{c(){t.c(),o=gn()},l(h){t.l(h),o=gn()},m(h,y){m[e].m(h,y),Dt(h,o,y),l=!0},p(h,[y]){let b=e;e=r(h),e===b?m[e].p(h,y):(Dr(),At(m[b],1,1,()=>{m[b]=null}),Mr(),t=m[e],t?t.p(h,y):(t=m[e]=u[e](h),t.c()),yt(t,1),t.m(o.parentNode,o))},i(h){l||(yt(t),l=!0)},o(h){At(t),l=!1},d(h){m[e].d(h),h&&Oe(o)}}}const Lb=([i,e])=>`${i}: ${e};`,Pb=([i,e])=>`${i}: ${e};`;function YL(i,e,t){const o=["use","class","style","for","floatAbove","required","wrapped","shake","float","setRequired","getWidth","getElement"];let l=Zn(e,o),{$$slots:u={},$$scope:m}=e;var r;const h=go(mo());let{use:y=[]}=e,{class:b=""}=e,{style:v=""}=e,{for:w=void 0}=e,{floatAbove:x=!1}=e,{required:C=!1}=e,{wrapped:T=!1}=e,S,M,O={},V={},X=(r=ds("SMUI:generic:input:props"))!==null&&r!==void 0?r:{},Z=x,ee=C;Ss(()=>{t(18,M=new rL({addClass:J,removeClass:ie,getWidth:()=>{var be,Ce;const Be=rt(),le=Be.cloneNode(!0);(be=Be.parentNode)===null||be===void 0||be.appendChild(le),le.classList.add("smui-floating-label--remove-transition"),le.classList.add("smui-floating-label--force-size"),le.classList.remove("mdc-floating-label--float-above");const Ee=le.scrollWidth;return(Ce=Be.parentNode)===null||Ce===void 0||Ce.removeChild(le),Ee},registerInteractionHandler:(be,Ce)=>rt().addEventListener(be,Ce),deregisterInteractionHandler:(be,Ce)=>rt().removeEventListener(be,Ce)}));const We={get element(){return rt()},addStyle:ke,removeStyle:Le};return So(S,"SMUIFloatingLabel:mount",We),M.init(),()=>{So(S,"SMUIFloatingLabel:unmount",We),M.destroy()}});function J(We){O[We]||t(8,O[We]=!0,O)}function ie(We){(!(We in O)||O[We])&&t(8,O[We]=!1,O)}function ke(We,be){V[We]!=be&&(be===""||be==null?(delete V[We],t(9,V)):t(9,V[We]=be,V))}function Le(We){We in V&&(delete V[We],t(9,V))}function fe(We){M.shake(We)}function Te(We){t(0,x=We)}function _e(We){t(1,C=We)}function ve(){return M.getWidth()}function rt(){return S}function nt(We){wn[We?"unshift":"push"](()=>{S=We,t(7,S)})}function Tt(We){wn[We?"unshift":"push"](()=>{S=We,t(7,S)})}return i.$$set=We=>{e=qi(qi({},e),uo(We)),t(12,l=Zn(e,o)),"use"in We&&t(2,y=We.use),"class"in We&&t(3,b=We.class),"style"in We&&t(4,v=We.style),"for"in We&&t(5,w=We.for),"floatAbove"in We&&t(0,x=We.floatAbove),"required"in We&&t(1,C=We.required),"wrapped"in We&&t(6,T=We.wrapped),"$$scope"in We&&t(21,m=We.$$scope)},i.$$.update=()=>{i.$$.dirty&786433&&M&&Z!==x&&(t(19,Z=x),M.float(x)),i.$$.dirty&1310722&&M&&ee!==C&&(t(20,ee=C),M.setRequired(C))},[x,C,y,b,v,w,T,S,O,V,h,X,l,fe,Te,_e,ve,rt,M,Z,ee,m,u,nt,Tt]}class $1 extends xr{constructor(e){super(),Ar(this,e,YL,XL,br,{use:2,class:3,style:4,for:5,floatAbove:0,required:1,wrapped:6,shake:13,float:14,setRequired:15,getWidth:16,getElement:17})}get shake(){return this.$$.ctx[13]}get float(){return this.$$.ctx[14]}get setRequired(){return this.$$.ctx[15]}get getWidth(){return this.$$.ctx[16]}get getElement(){return this.$$.ctx[17]}}function ZL(i){let e,t,o,l,u,m,r=[{class:t=rr({[i[1]]:!0,"mdc-line-ripple":!0,"mdc-line-ripple--active":i[3],...i[5]})},{style:o=Object.entries(i[6]).map(Mb).concat([i[2]]).join(" ")},i[8]],h={};for(let y=0;y<r.length;y+=1)h=qi(h,r[y]);return{c(){e=ti("div"),this.h()},l(y){e=ii(y,"DIV",{class:!0,style:!0}),si(e).forEach(Oe),this.h()},h(){or(e,h)},m(y,b){Dt(y,e,b),i[13](e),u||(m=[ir(l=Eo.call(null,e,i[0])),ir(i[7].call(null,e))],u=!0)},p(y,[b]){or(e,h=wr(r,[b&42&&t!==(t=rr({[y[1]]:!0,"mdc-line-ripple":!0,"mdc-line-ripple--active":y[3],...y[5]}))&&{class:t},b&68&&o!==(o=Object.entries(y[6]).map(Mb).concat([y[2]]).join(" "))&&{style:o},b&256&&y[8]])),l&&ro(l.update)&&b&1&&l.update.call(null,y[0])},i:is,o:is,d(y){y&&Oe(e),i[13](null),u=!1,Io(m)}}}const Mb=([i,e])=>`${i}: ${e};`;function KL(i,e,t){const o=["use","class","style","active","activate","deactivate","setRippleCenter","getElement"];let l=Zn(e,o);const u=go(mo());let{use:m=[]}=e,{class:r=""}=e,{style:h=""}=e,{active:y=!1}=e,b,v,w={},x={};Ss(()=>(v=new oL({addClass:T,removeClass:S,hasClass:C,setStyle:M,registerEventHandler:(J,ie)=>Z().addEventListener(J,ie),deregisterEventHandler:(J,ie)=>Z().removeEventListener(J,ie)}),v.init(),()=>{v.destroy()}));function C(J){return J in w?w[J]:Z().classList.contains(J)}function T(J){w[J]||t(5,w[J]=!0,w)}function S(J){(!(J in w)||w[J])&&t(5,w[J]=!1,w)}function M(J,ie){x[J]!=ie&&(ie===""||ie==null?(delete x[J],t(6,x)):t(6,x[J]=ie,x))}function O(){v.activate()}function V(){v.deactivate()}function X(J){v.setRippleCenter(J)}function Z(){return b}function ee(J){wn[J?"unshift":"push"](()=>{b=J,t(4,b)})}return i.$$set=J=>{e=qi(qi({},e),uo(J)),t(8,l=Zn(e,o)),"use"in J&&t(0,m=J.use),"class"in J&&t(1,r=J.class),"style"in J&&t(2,h=J.style),"active"in J&&t(3,y=J.active)},[m,r,h,y,b,w,x,u,l,O,V,X,Z,ee]}class S3 extends xr{constructor(e){super(),Ar(this,e,KL,ZL,br,{use:0,class:1,style:2,active:3,activate:9,deactivate:10,setRippleCenter:11,getElement:12})}get activate(){return this.$$.ctx[9]}get deactivate(){return this.$$.ctx[10]}get setRippleCenter(){return this.$$.ctx[11]}get getElement(){return this.$$.ctx[12]}}function Db(i){let e,t,o;const l=i[14].default,u=fr(l,i,i[13],null);return{c(){e=ti("div"),u&&u.c(),this.h()},l(m){e=ii(m,"DIV",{class:!0,style:!0});var r=si(e);u&&u.l(r),r.forEach(Oe),this.h()},h(){oi(e,"class","mdc-notched-outline__notch"),oi(e,"style",t=Object.entries(i[7]).map(Ob).join(" "))},m(m,r){Dt(m,e,r),u&&u.m(e,null),o=!0},p(m,r){u&&u.p&&(!o||r&8192)&&dr(u,l,m,m[13],o?mr(l,m[13],r,null):pr(m[13]),null),(!o||r&128&&t!==(t=Object.entries(m[7]).map(Ob).join(" ")))&&oi(e,"style",t)},i(m){o||(yt(u,m),o=!0)},o(m){At(u,m),o=!1},d(m){m&&Oe(e),u&&u.d(m)}}}function JL(i){let e,t,o,l,u,m,r,h,y,b,v=!i[3]&&Db(i),w=[{class:m=rr({[i[1]]:!0,"mdc-notched-outline":!0,"mdc-notched-outline--notched":i[2],"mdc-notched-outline--no-label":i[3],...i[6]})},i[9]],x={};for(let C=0;C<w.length;C+=1)x=qi(x,w[C]);return{c(){e=ti("div"),t=ti("div"),o=Xi(),v&&v.c(),l=Xi(),u=ti("div"),this.h()},l(C){e=ii(C,"DIV",{class:!0});var T=si(e);t=ii(T,"DIV",{class:!0}),si(t).forEach(Oe),o=Yi(T),v&&v.l(T),l=Yi(T),u=ii(T,"DIV",{class:!0}),si(u).forEach(Oe),T.forEach(Oe),this.h()},h(){oi(t,"class","mdc-notched-outline__leading"),oi(u,"class","mdc-notched-outline__trailing"),or(e,x)},m(C,T){Dt(C,e,T),Kt(e,t),Kt(e,o),v&&v.m(e,null),Kt(e,l),Kt(e,u),i[15](e),h=!0,y||(b=[ir(r=Eo.call(null,e,i[0])),ir(i[8].call(null,e)),qn(e,"SMUIFloatingLabel:mount",i[16]),qn(e,"SMUIFloatingLabel:unmount",i[17])],y=!0)},p(C,[T]){C[3]?v&&(Dr(),At(v,1,1,()=>{v=null}),Mr()):v?(v.p(C,T),T&8&&yt(v,1)):(v=Db(C),v.c(),yt(v,1),v.m(e,l)),or(e,x=wr(w,[(!h||T&78&&m!==(m=rr({[C[1]]:!0,"mdc-notched-outline":!0,"mdc-notched-outline--notched":C[2],"mdc-notched-outline--no-label":C[3],...C[6]})))&&{class:m},T&512&&C[9]])),r&&ro(r.update)&&T&1&&r.update.call(null,C[0])},i(C){h||(yt(v),h=!0)},o(C){At(v),h=!1},d(C){C&&Oe(e),v&&v.d(),i[15](null),y=!1,Io(b)}}}const Ob=([i,e])=>`${i}: ${e};`;function QL(i,e,t){const o=["use","class","notched","noLabel","notch","closeNotch","getElement"];let l=Zn(e,o),{$$slots:u={},$$scope:m}=e;const r=go(mo());let{use:h=[]}=e,{class:y=""}=e,{notched:b=!1}=e,{noLabel:v=!1}=e,w,x,C,T={},S={};Ss(()=>(x=new vL({addClass:M,removeClass:O,setNotchWidthProperty:fe=>V("width",fe+"px"),removeNotchWidthProperty:()=>X("width")}),x.init(),()=>{x.destroy()}));function M(fe){T[fe]||t(6,T[fe]=!0,T)}function O(fe){(!(fe in T)||T[fe])&&t(6,T[fe]=!1,T)}function V(fe,Te){S[fe]!=Te&&(Te===""||Te==null?(delete S[fe],t(7,S)):t(7,S[fe]=Te,S))}function X(fe){fe in S&&(delete S[fe],t(7,S))}function Z(fe){x.notch(fe)}function ee(){x.closeNotch()}function J(){return w}function ie(fe){wn[fe?"unshift":"push"](()=>{w=fe,t(5,w)})}const ke=fe=>t(4,C=fe.detail),Le=()=>t(4,C=void 0);return i.$$set=fe=>{e=qi(qi({},e),uo(fe)),t(9,l=Zn(e,o)),"use"in fe&&t(0,h=fe.use),"class"in fe&&t(1,y=fe.class),"notched"in fe&&t(2,b=fe.notched),"noLabel"in fe&&t(3,v=fe.noLabel),"$$scope"in fe&&t(13,m=fe.$$scope)},i.$$.update=()=>{i.$$.dirty&16&&(C?(C.addStyle("transition-duration","0s"),M("mdc-notched-outline--upgraded"),requestAnimationFrame(()=>{C&&C.removeStyle("transition-duration")})):O("mdc-notched-outline--upgraded"))},[h,y,b,v,C,w,T,S,r,l,Z,ee,J,m,u,ie,ke,Le]}class C3 extends xr{constructor(e){super(),Ar(this,e,QL,JL,br,{use:0,class:1,notched:2,noLabel:3,notch:10,closeNotch:11,getElement:12})}get notch(){return this.$$.ctx[10]}get closeNotch(){return this.$$.ctx[11]}get getElement(){return this.$$.ctx[12]}}function $L(i){let e;return{c(){e=Cn(i[8])},l(t){e=En(t,i[8])},m(t,o){Dt(t,e,o)},p(t,o){o&256&&ks(e,t[8])},i:is,o:is,d(t){t&&Oe(e)}}}function e9(i){let e;const t=i[13].default,o=fr(t,i,i[12],null);return{c(){o&&o.c()},l(l){o&&o.l(l)},m(l,u){o&&o.m(l,u),e=!0},p(l,u){o&&o.p&&(!e||u&4096)&&dr(o,t,l,l[12],e?mr(t,l[12],u,null):pr(l[12]),null)},i(l){e||(yt(o,l),e=!0)},o(l){At(o,l),e=!1},d(l){o&&o.d(l)}}}function t9(i){let e,t,o,l,u,m,r,h,y;const b=[e9,$L],v=[];function w(T,S){return T[8]==null?0:1}t=w(i),o=v[t]=b[t](i);let x=[{class:l=rr({[i[1]]:!0,"mdc-select-helper-text":!0,"mdc-select-helper-text--validation-msg":i[4],"mdc-select-helper-text--validation-msg-persistent":i[3],...i[6]})},{"aria-hidden":u=i[3]?void 0:"true"},{id:i[2]},i[7],i[10]],C={};for(let T=0;T<x.length;T+=1)C=qi(C,x[T]);return{c(){e=ti("div"),o.c(),this.h()},l(T){e=ii(T,"DIV",{class:!0,"aria-hidden":!0,id:!0});var S=si(e);o.l(S),S.forEach(Oe),this.h()},h(){or(e,C)},m(T,S){Dt(T,e,S),v[t].m(e,null),i[14](e),r=!0,h||(y=[ir(m=Eo.call(null,e,i[0])),ir(i[9].call(null,e))],h=!0)},p(T,[S]){let M=t;t=w(T),t===M?v[t].p(T,S):(Dr(),At(v[M],1,1,()=>{v[M]=null}),Mr(),o=v[t],o?o.p(T,S):(o=v[t]=b[t](T),o.c()),yt(o,1),o.m(e,null)),or(e,C=wr(x,[(!r||S&90&&l!==(l=rr({[T[1]]:!0,"mdc-select-helper-text":!0,"mdc-select-helper-text--validation-msg":T[4],"mdc-select-helper-text--validation-msg-persistent":T[3],...T[6]})))&&{class:l},(!r||S&8&&u!==(u=T[3]?void 0:"true"))&&{"aria-hidden":u},(!r||S&4)&&{id:T[2]},S&128&&T[7],S&1024&&T[10]])),m&&ro(m.update)&&S&1&&m.update.call(null,T[0])},i(T){r||(yt(o),r=!0)},o(T){At(o),r=!1},d(T){T&&Oe(e),v[t].d(),i[14](null),h=!1,Io(y)}}}let i9=0;function n9(i,e,t){const o=["use","class","id","persistent","validationMsg","getElement"];let l=Zn(e,o),{$$slots:u={},$$scope:m}=e;const r=go(mo());let{use:h=[]}=e,{class:y=""}=e,{id:b="SMUI-select-helper-text-"+i9++}=e,{persistent:v=!1}=e,{validationMsg:w=!1}=e,x,C,T={},S={},M;Ss(()=>(C=new wL({addClass:V,removeClass:X,hasClass:O,getAttr:Z,setAttr:ee,removeAttr:J,setContent:Le=>{t(8,M=Le)}}),b.startsWith("SMUI-select-helper-text-")&&So(ie(),"SMUISelectHelperText:id",b),So(ie(),"SMUISelectHelperText:mount",C),C.init(),()=>{So(ie(),"SMUISelectHelperText:unmount",C),C.destroy()}));function O(Le){return Le in T?T[Le]:ie().classList.contains(Le)}function V(Le){T[Le]||t(6,T[Le]=!0,T)}function X(Le){(!(Le in T)||T[Le])&&t(6,T[Le]=!1,T)}function Z(Le){var fe;return Le in S?(fe=S[Le])!==null&&fe!==void 0?fe:null:ie().getAttribute(Le)}function ee(Le,fe){S[Le]!==fe&&t(7,S[Le]=fe,S)}function J(Le){(!(Le in S)||S[Le]!=null)&&t(7,S[Le]=void 0,S)}function ie(){return x}function ke(Le){wn[Le?"unshift":"push"](()=>{x=Le,t(5,x)})}return i.$$set=Le=>{e=qi(qi({},e),uo(Le)),t(10,l=Zn(e,o)),"use"in Le&&t(0,h=Le.use),"class"in Le&&t(1,y=Le.class),"id"in Le&&t(2,b=Le.id),"persistent"in Le&&t(3,v=Le.persistent),"validationMsg"in Le&&t(4,w=Le.validationMsg),"$$scope"in Le&&t(12,m=Le.$$scope)},[h,y,b,v,w,x,T,S,M,r,l,ie,m,u,ke]}class r9 extends xr{constructor(e){super(),Ar(this,e,n9,t9,br,{use:0,class:1,id:2,persistent:3,validationMsg:4,getElement:11})}get getElement(){return this.$$.ctx[11]}}const o9=i=>({}),Fb=i=>({}),s9=i=>({}),Rb=i=>({}),a9=i=>({}),Bb=i=>({}),l9=i=>({}),zb=i=>({});function Nb(i){let e,t=[{type:"hidden"},{required:i[10]},{disabled:i[6]},{value:i[0]},fo(i[53],"input$")],o={};for(let l=0;l<t.length;l+=1)o=qi(o,t[l]);return{c(){e=ti("input"),this.h()},l(l){e=ii(l,"INPUT",{type:!0}),this.h()},h(){or(e,o)},m(l,u){Dt(l,e,u),e.autofocus&&e.focus()},p(l,u){or(e,o=wr(t,[{type:"hidden"},u[0]&1024&&{required:l[10]},u[0]&64&&{disabled:l[6]},u[0]&1&&{value:l[0]},u[1]&4194304&&fo(l[53],"input$")]))},d(l){l&&Oe(e)}}}function jb(i){let e;return{c(){e=ti("span"),this.h()},l(t){e=ii(t,"SPAN",{class:!0}),si(e).forEach(Oe),this.h()},h(){oi(e,"class","mdc-select__ripple")},m(t,o){Dt(t,e,o)},d(t){t&&Oe(e)}}}function Ub(i){let e,t;const o=[{id:i[11]+"-smui-label"},{floatAbove:i[43]!==""},{required:i[10]},fo(i[53],"label$")];let l={$$slots:{default:[u9]},$$scope:{ctx:i}};for(let u=0;u<o.length;u+=1)l=qi(l,o[u]);return e=new $1({props:l}),i[66](e),{c(){Hi(e.$$.fragment)},l(u){$i(e.$$.fragment,u)},m(u,m){Gi(e,u,m),t=!0},p(u,m){const r=m[0]&3072|m[1]&4198400?wr(o,[m[0]&2048&&{id:u[11]+"-smui-label"},m[1]&4096&&{floatAbove:u[43]!==""},m[0]&1024&&{required:u[10]},m[1]&4194304&&po(fo(u[53],"label$"))]):{};m[0]&512|m[2]&134217728&&(r.$$scope={dirty:m,ctx:u}),e.$set(r)},i(u){t||(yt(e.$$.fragment,u),t=!0)},o(u){At(e.$$.fragment,u),t=!1},d(u){i[66](null),Wi(e,u)}}}function u9(i){let e=(i[9]==null?"":i[9])+"",t,o;const l=i[63].label,u=fr(l,i,i[89],zb);return{c(){t=Cn(e),u&&u.c()},l(m){t=En(m,e),u&&u.l(m)},m(m,r){Dt(m,t,r),u&&u.m(m,r),o=!0},p(m,r){(!o||r[0]&512)&&e!==(e=(m[9]==null?"":m[9])+"")&&ks(t,e),u&&u.p&&(!o||r[2]&134217728)&&dr(u,l,m,m[89],o?mr(l,m[89],r,l9):pr(m[89]),zb)},i(m){o||(yt(u,m),o=!0)},o(m){At(u,m),o=!1},d(m){m&&Oe(t),u&&u.d(m)}}}function Vb(i){let e,t;const o=[{noLabel:i[8]||i[9]==null&&!i[52].label},fo(i[53],"outline$")];let l={$$slots:{default:[h9]},$$scope:{ctx:i}};for(let u=0;u<o.length;u+=1)l=qi(l,o[u]);return e=new C3({props:l}),i[68](e),{c(){Hi(e.$$.fragment)},l(u){$i(e.$$.fragment,u)},m(u,m){Gi(e,u,m),t=!0},p(u,m){const r=m[0]&768|m[1]&6291456?wr(o,[m[0]&768|m[1]&2097152&&{noLabel:u[8]||u[9]==null&&!u[52].label},m[1]&4194304&&po(fo(u[53],"outline$"))]):{};m[0]&3840|m[1]&6296064|m[2]&134217728&&(r.$$scope={dirty:m,ctx:u}),e.$set(r)},i(u){t||(yt(e.$$.fragment,u),t=!0)},o(u){At(e.$$.fragment,u),t=!1},d(u){i[68](null),Wi(e,u)}}}function qb(i){let e,t;const o=[{id:i[11]+"-smui-label"},{floatAbove:i[43]!==""},{required:i[10]},fo(i[53],"label$")];let l={$$slots:{default:[c9]},$$scope:{ctx:i}};for(let u=0;u<o.length;u+=1)l=qi(l,o[u]);return e=new $1({props:l}),i[67](e),{c(){Hi(e.$$.fragment)},l(u){$i(e.$$.fragment,u)},m(u,m){Gi(e,u,m),t=!0},p(u,m){const r=m[0]&3072|m[1]&4198400?wr(o,[m[0]&2048&&{id:u[11]+"-smui-label"},m[1]&4096&&{floatAbove:u[43]!==""},m[0]&1024&&{required:u[10]},m[1]&4194304&&po(fo(u[53],"label$"))]):{};m[0]&512|m[2]&134217728&&(r.$$scope={dirty:m,ctx:u}),e.$set(r)},i(u){t||(yt(e.$$.fragment,u),t=!0)},o(u){At(e.$$.fragment,u),t=!1},d(u){i[67](null),Wi(e,u)}}}function c9(i){let e=(i[9]==null?"":i[9])+"",t,o;const l=i[63].label,u=fr(l,i,i[89],Bb);return{c(){t=Cn(e),u&&u.c()},l(m){t=En(m,e),u&&u.l(m)},m(m,r){Dt(m,t,r),u&&u.m(m,r),o=!0},p(m,r){(!o||r[0]&512)&&e!==(e=(m[9]==null?"":m[9])+"")&&ks(t,e),u&&u.p&&(!o||r[2]&134217728)&&dr(u,l,m,m[89],o?mr(l,m[89],r,a9):pr(m[89]),Bb)},i(m){o||(yt(u,m),o=!0)},o(m){At(u,m),o=!1},d(m){m&&Oe(t),u&&u.d(m)}}}function h9(i){let e,t,o=!i[8]&&(i[9]!=null||i[52].label)&&qb(i);return{c(){o&&o.c(),e=gn()},l(l){o&&o.l(l),e=gn()},m(l,u){o&&o.m(l,u),Dt(l,e,u),t=!0},p(l,u){!l[8]&&(l[9]!=null||l[52].label)?o?(o.p(l,u),u[0]&768|u[1]&2097152&&yt(o,1)):(o=qb(l),o.c(),yt(o,1),o.m(e.parentNode,e)):o&&(Dr(),At(o,1,1,()=>{o=null}),Mr())},i(l){t||(yt(o),t=!0)},o(l){At(o),t=!1},d(l){o&&o.d(l),l&&Oe(e)}}}function Hb(i){let e,t;const o=[fo(i[53],"ripple$")];let l={};for(let u=0;u<o.length;u+=1)l=qi(l,o[u]);return e=new S3({props:l}),i[70](e),{c(){Hi(e.$$.fragment)},l(u){$i(e.$$.fragment,u)},m(u,m){Gi(e,u,m),t=!0},p(u,m){const r=m[1]&4194304?wr(o,[po(fo(u[53],"ripple$"))]):{};e.$set(r)},i(u){t||(yt(e.$$.fragment,u),t=!0)},o(u){At(e.$$.fragment,u),t=!1},d(u){i[70](null),Wi(e,u)}}}function f9(i){let e;const t=i[63].default,o=fr(t,i,i[89],null);return{c(){o&&o.c()},l(l){o&&o.l(l)},m(l,u){o&&o.m(l,u),e=!0},p(l,u){o&&o.p&&(!e||u[2]&134217728)&&dr(o,t,l,l[89],e?mr(t,l[89],u,null):pr(l[89]),null)},i(l){e||(yt(o,l),e=!0)},o(l){At(o,l),e=!1},d(l){o&&o.d(l)}}}function d9(i){let e,t,o;const l=[{role:"listbox"},{wrapFocus:i[36]},fo(i[53],"list$")];function u(r){i[76](r)}let m={$$slots:{default:[f9]},$$scope:{ctx:i}};for(let r=0;r<l.length;r+=1)m=qi(m,l[r]);return i[24]!==void 0&&(m.selectedIndex=i[24]),e=new OL({props:m}),wn.push(()=>Vo(e,"selectedIndex",u)),e.$on("SMUIList:mount",i[77]),{c(){Hi(e.$$.fragment)},l(r){$i(e.$$.fragment,r)},m(r,h){Gi(e,r,h),o=!0},p(r,h){const y=h[1]&4194336?wr(l,[l[0],h[1]&32&&{wrapFocus:r[36]},h[1]&4194304&&po(fo(r[53],"list$"))]):{};h[2]&134217728&&(y.$$scope={dirty:h,ctx:r}),!t&&h[0]&16777216&&(t=!0,y.selectedIndex=r[24],qo(()=>t=!1)),e.$set(y)},i(r){o||(yt(e.$$.fragment,r),o=!0)},o(r){At(e.$$.fragment,r),o=!1},d(r){Wi(e,r)}}}function Gb(i){let e,t;const o=[fo(i[53],"helperText$")];let l={$$slots:{default:[p9]},$$scope:{ctx:i}};for(let u=0;u<o.length;u+=1)l=qi(l,o[u]);return e=new r9({props:l}),e.$on("SMUISelectHelperText:id",i[86]),e.$on("SMUISelectHelperText:mount",i[87]),e.$on("SMUISelectHelperText:unmount",i[88]),{c(){Hi(e.$$.fragment)},l(u){$i(e.$$.fragment,u)},m(u,m){Gi(e,u,m),t=!0},p(u,m){const r=m[1]&4194304?wr(o,[po(fo(u[53],"helperText$"))]):{};m[2]&134217728&&(r.$$scope={dirty:m,ctx:u}),e.$set(r)},i(u){t||(yt(e.$$.fragment,u),t=!0)},o(u){At(e.$$.fragment,u),t=!1},d(u){Wi(e,u)}}}function p9(i){let e;const t=i[63].helperText,o=fr(t,i,i[89],Fb);return{c(){o&&o.c()},l(l){o&&o.l(l)},m(l,u){o&&o.m(l,u),e=!0},p(l,u){o&&o.p&&(!e||u[2]&134217728)&&dr(o,t,l,l[89],e?mr(t,l[89],u,o9):pr(l[89]),Fb)},i(l){e||(yt(o,l),e=!0)},o(l){At(o,l),e=!1},d(l){o&&o.d(l)}}}function m9(i){let e,t,o,l,u,m,r,h,y,b,v,w,x,C,T,S,M,O,V,X,Z,ee,J,ie,ke,Le,fe,Te,_e,ve,rt,nt,Tt,We,be,Ce,Be,le,Ee,he,me=i[12]&&Nb(i),Fe=i[7]==="filled"&&jb(),Xe=i[7]!=="outlined"&&!i[8]&&(i[9]!=null||i[52].label)&&Ub(i),lt=i[7]==="outlined"&&Vb(i);const Ye=i[63].leadingIcon,Ke=fr(Ye,i,i[89],Rb);let Lt=[{id:v=i[11]+"-smui-selected-text"},{class:w=rr({[i[19]]:!0,"mdc-select__selected-text":!0})},{role:"button"},{"aria-haspopup":"listbox"},{"aria-labelledby":x=i[11]+"-smui-label"},fo(i[53],"selectedText$")],$t={};for(let Jt=0;Jt<Lt.length;Jt+=1)$t=qi($t,Lt[Jt]);let dt=[{class:T=rr({[i[17]]:!0,"mdc-select__selected-text-container":!0})},fo(i[53],"selectedTextContainer$")],wt={};for(let Jt=0;Jt<dt.length;Jt+=1)wt=qi(wt,dt[Jt]);let bt=[{class:ee=rr({[i[21]]:!0,"mdc-select__dropdown-icon":!0})},fo(i[53],"dropdownIcon$")],$e={};for(let Jt=0;Jt<bt.length;Jt+=1)$e=qi($e,bt[Jt]);let Yt=i[7]!=="outlined"&&i[5]&&Hb(i),li=[{class:ke=rr({[i[15]]:!0,"mdc-select__anchor":!0})},{"aria-required":Le=i[10]?"true":void 0},{"aria-disabled":fe=i[6]?"true":void 0},{"aria-controls":i[31]},{"aria-describedby":i[31]},i[29],fo(i[53],"anchor$")],Zt={};for(let Jt=0;Jt<li.length;Jt+=1)Zt=qi(Zt,li[Jt]);const Ci=[{class:rr({[i[22]]:!0,"mdc-select__menu":!0,...i[33]})},{fullWidth:!0},{anchor:!1},{anchorElement:i[34]},{anchorCorner:i[35]},fo(i[53],"menu$")];function Li(Jt){i[78](Jt)}let Vt={$$slots:{default:[d9]},$$scope:{ctx:i}};for(let Jt=0;Jt<Ci.length;Jt+=1)Vt=qi(Vt,Ci[Jt]);i[32]!==void 0&&(Vt.open=i[32]),ve=new LL({props:Vt}),wn.push(()=>Vo(ve,"open",Li)),ve.$on("SMUIMenu:selected",i[79]),ve.$on("SMUIMenuSurface:closing",i[80]),ve.$on("SMUIMenuSurface:closed",i[81]),ve.$on("SMUIMenuSurface:opened",i[82]);let mi=[{class:nt=rr({[i[3]]:!0,"mdc-select":!0,"mdc-select--required":i[10],"mdc-select--disabled":i[6],"mdc-select--filled":i[7]==="filled","mdc-select--outlined":i[7]==="outlined","smui-select--standard":i[7]==="standard","mdc-select--with-leading-icon":i[45](i[13])?i[52].leadingIcon:i[13],"mdc-select--no-label":i[8]||i[9]==null&&!i[52].label,"mdc-select--invalid":i[1],"mdc-select--activated":i[32],"mdc-data-table__pagination-rows-per-page-select":i[46]==="data-table:pagination",...i[26]})},{style:Tt=Object.entries(i[27]).map(Wb).concat([i[4]]).join(" ")},mf(i[53],["input$","anchor$","label$","outline$","selectedTextContainer$","selectedText$","dropdownIcon$","ripple$","menu$","list$","helperText$"])],Qi={};for(let Jt=0;Jt<mi.length;Jt+=1)Qi=qi(Qi,mi[Jt]);let xi=i[52].helperText&&Gb(i);return{c(){e=ti("div"),me&&me.c(),t=Xi(),o=ti("div"),Fe&&Fe.c(),l=Xi(),Xe&&Xe.c(),u=Xi(),lt&&lt.c(),m=Xi(),Ke&&Ke.c(),r=Xi(),h=ti("span"),y=ti("span"),b=Cn(i[43]),M=Xi(),O=ti("span"),V=$p("svg"),X=$p("polygon"),Z=$p("polygon"),ie=Xi(),Yt&&Yt.c(),_e=Xi(),Hi(ve.$$.fragment),Ce=Xi(),xi&&xi.c(),Be=gn(),this.h()},l(Jt){e=ii(Jt,"DIV",{class:!0,style:!0});var Me=si(e);me&&me.l(Me),t=Yi(Me),o=ii(Me,"DIV",{class:!0,"aria-required":!0,"aria-disabled":!0,"aria-controls":!0,"aria-describedby":!0});var Q=si(o);Fe&&Fe.l(Q),l=Yi(Q),Xe&&Xe.l(Q),u=Yi(Q),lt&&lt.l(Q),m=Yi(Q),Ke&&Ke.l(Q),r=Yi(Q),h=ii(Q,"SPAN",{class:!0});var ae=si(h);y=ii(ae,"SPAN",{id:!0,class:!0,role:!0,"aria-haspopup":!0,"aria-labelledby":!0});var et=si(y);b=En(et,i[43]),et.forEach(Oe),ae.forEach(Oe),M=Yi(Q),O=ii(Q,"SPAN",{class:!0});var vt=si(O);V=e1(vt,"svg",{class:!0,viewBox:!0,focusable:!0});var Wt=si(V);X=e1(Wt,"polygon",{class:!0,stroke:!0,"fill-rule":!0,points:!0}),si(X).forEach(Oe),Z=e1(Wt,"polygon",{class:!0,stroke:!0,"fill-rule":!0,points:!0}),si(Z).forEach(Oe),Wt.forEach(Oe),vt.forEach(Oe),ie=Yi(Q),Yt&&Yt.l(Q),Q.forEach(Oe),_e=Yi(Me),$i(ve.$$.fragment,Me),Me.forEach(Oe),Ce=Yi(Jt),xi&&xi.l(Jt),Be=gn(),this.h()},h(){or(y,$t),or(h,wt),oi(X,"class","mdc-select__dropdown-icon-inactive"),oi(X,"stroke","none"),oi(X,"fill-rule","evenodd"),oi(X,"points","7 10 12 15 17 10"),oi(Z,"class","mdc-select__dropdown-icon-active"),oi(Z,"stroke","none"),oi(Z,"fill-rule","evenodd"),oi(Z,"points","7 15 12 10 17 15"),oi(V,"class","mdc-select__dropdown-icon-graphic"),oi(V,"viewBox","7 10 10 5"),oi(V,"focusable","false"),or(O,$e),or(o,Zt),or(e,Qi)},m(Jt,Me){Dt(Jt,e,Me),me&&me.m(e,null),Kt(e,t),Kt(e,o),Fe&&Fe.m(o,null),Kt(o,l),Xe&&Xe.m(o,null),Kt(o,u),lt&&lt.m(o,null),Kt(o,m),Ke&&Ke.m(o,null),Kt(o,r),Kt(o,h),Kt(h,y),Kt(y,b),i[69](y),Kt(o,M),Kt(o,O),Kt(O,V),Kt(V,X),Kt(V,Z),Kt(o,ie),Yt&&Yt.m(o,null),i[71](o),Kt(e,_e),Gi(ve,e,null),i[83](e),Dt(Jt,Ce,Me),xi&&xi.m(Jt,Me),Dt(Jt,Be,Me),le=!0,Ee||(he=[ir(C=Eo.call(null,y,i[18])),ir(S=Eo.call(null,h,i[16])),ir(J=Eo.call(null,O,i[20])),ir(Te=Eo.call(null,o,i[14])),qn(o,"focus",i[72]),qn(o,"blur",i[73]),qn(o,"click",i[74]),qn(o,"keydown",i[75]),qn(o,"focus",i[64]),qn(o,"blur",i[65]),ir(We=oh.call(null,e,{ripple:i[7]==="filled",unbounded:!1,addClass:i[49],removeClass:i[50],addStyle:i[51]})),ir(CL.call(null,e,{addClass:i[49],removeClass:i[50]})),ir(be=Eo.call(null,e,i[2])),ir(i[44].call(null,e)),qn(e,"SMUISelectLeadingIcon:mount",i[84]),qn(e,"SMUISelectLeadingIcon:unmount",i[85])],Ee=!0)},p(Jt,Me){Jt[12]?me?me.p(Jt,Me):(me=Nb(Jt),me.c(),me.m(e,t)):me&&(me.d(1),me=null),Jt[7]==="filled"?Fe||(Fe=jb(),Fe.c(),Fe.m(o,l)):Fe&&(Fe.d(1),Fe=null),Jt[7]!=="outlined"&&!Jt[8]&&(Jt[9]!=null||Jt[52].label)?Xe?(Xe.p(Jt,Me),Me[0]&896|Me[1]&2097152&&yt(Xe,1)):(Xe=Ub(Jt),Xe.c(),yt(Xe,1),Xe.m(o,u)):Xe&&(Dr(),At(Xe,1,1,()=>{Xe=null}),Mr()),Jt[7]==="outlined"?lt?(lt.p(Jt,Me),Me[0]&128&&yt(lt,1)):(lt=Vb(Jt),lt.c(),yt(lt,1),lt.m(o,m)):lt&&(Dr(),At(lt,1,1,()=>{lt=null}),Mr()),Ke&&Ke.p&&(!le||Me[2]&134217728)&&dr(Ke,Ye,Jt,Jt[89],le?mr(Ye,Jt[89],Me,s9):pr(Jt[89]),Rb),(!le||Me[1]&4096)&&ks(b,Jt[43]),or(y,$t=wr(Lt,[(!le||Me[0]&2048&&v!==(v=Jt[11]+"-smui-selected-text"))&&{id:v},(!le||Me[0]&524288&&w!==(w=rr({[Jt[19]]:!0,"mdc-select__selected-text":!0})))&&{class:w},{role:"button"},{"aria-haspopup":"listbox"},(!le||Me[0]&2048&&x!==(x=Jt[11]+"-smui-label"))&&{"aria-labelledby":x},Me[1]&4194304&&fo(Jt[53],"selectedText$")])),C&&ro(C.update)&&Me[0]&262144&&C.update.call(null,Jt[18]),or(h,wt=wr(dt,[(!le||Me[0]&131072&&T!==(T=rr({[Jt[17]]:!0,"mdc-select__selected-text-container":!0})))&&{class:T},Me[1]&4194304&&fo(Jt[53],"selectedTextContainer$")])),S&&ro(S.update)&&Me[0]&65536&&S.update.call(null,Jt[16]),or(O,$e=wr(bt,[(!le||Me[0]&2097152&&ee!==(ee=rr({[Jt[21]]:!0,"mdc-select__dropdown-icon":!0})))&&{class:ee},Me[1]&4194304&&fo(Jt[53],"dropdownIcon$")])),J&&ro(J.update)&&Me[0]&1048576&&J.update.call(null,Jt[20]),Jt[7]!=="outlined"&&Jt[5]?Yt?(Yt.p(Jt,Me),Me[0]&160&&yt(Yt,1)):(Yt=Hb(Jt),Yt.c(),yt(Yt,1),Yt.m(o,null)):Yt&&(Dr(),At(Yt,1,1,()=>{Yt=null}),Mr()),or(o,Zt=wr(li,[(!le||Me[0]&32768&&ke!==(ke=rr({[Jt[15]]:!0,"mdc-select__anchor":!0})))&&{class:ke},(!le||Me[0]&1024&&Le!==(Le=Jt[10]?"true":void 0))&&{"aria-required":Le},(!le||Me[0]&64&&fe!==(fe=Jt[6]?"true":void 0))&&{"aria-disabled":fe},(!le||Me[1]&1)&&{"aria-controls":Jt[31]},(!le||Me[1]&1)&&{"aria-describedby":Jt[31]},Me[0]&536870912&&Jt[29],Me[1]&4194304&&fo(Jt[53],"anchor$")])),Te&&ro(Te.update)&&Me[0]&16384&&Te.update.call(null,Jt[14]);const Q=Me[0]&4194304|Me[1]&4194332?wr(Ci,[Me[0]&4194304|Me[1]&4&&{class:rr({[Jt[22]]:!0,"mdc-select__menu":!0,...Jt[33]})},Ci[1],Ci[2],Me[1]&8&&{anchorElement:Jt[34]},Me[1]&16&&{anchorCorner:Jt[35]},Me[1]&4194304&&po(fo(Jt[53],"menu$"))]):{};Me[0]&16777216|Me[1]&4194400|Me[2]&134217728&&(Q.$$scope={dirty:Me,ctx:Jt}),!rt&&Me[1]&2&&(rt=!0,Q.open=Jt[32],qo(()=>rt=!1)),ve.$set(Q),or(e,Qi=wr(mi,[(!le||Me[0]&67119050|Me[1]&2097154&&nt!==(nt=rr({[Jt[3]]:!0,"mdc-select":!0,"mdc-select--required":Jt[10],"mdc-select--disabled":Jt[6],"mdc-select--filled":Jt[7]==="filled","mdc-select--outlined":Jt[7]==="outlined","smui-select--standard":Jt[7]==="standard","mdc-select--with-leading-icon":Jt[45](Jt[13])?Jt[52].leadingIcon:Jt[13],"mdc-select--no-label":Jt[8]||Jt[9]==null&&!Jt[52].label,"mdc-select--invalid":Jt[1],"mdc-select--activated":Jt[32],"mdc-data-table__pagination-rows-per-page-select":Jt[46]==="data-table:pagination",...Jt[26]})))&&{class:nt},(!le||Me[0]&134217744&&Tt!==(Tt=Object.entries(Jt[27]).map(Wb).concat([Jt[4]]).join(" ")))&&{style:Tt},Me[1]&4194304&&mf(Jt[53],["input$","anchor$","label$","outline$","selectedTextContainer$","selectedText$","dropdownIcon$","ripple$","menu$","list$","helperText$"])])),We&&ro(We.update)&&Me[0]&128&&We.update.call(null,{ripple:Jt[7]==="filled",unbounded:!1,addClass:Jt[49],removeClass:Jt[50],addStyle:Jt[51]}),be&&ro(be.update)&&Me[0]&4&&be.update.call(null,Jt[2]),Jt[52].helperText?xi?(xi.p(Jt,Me),Me[1]&2097152&&yt(xi,1)):(xi=Gb(Jt),xi.c(),yt(xi,1),xi.m(Be.parentNode,Be)):xi&&(Dr(),At(xi,1,1,()=>{xi=null}),Mr())},i(Jt){le||(yt(Xe),yt(lt),yt(Ke,Jt),yt(Yt),yt(ve.$$.fragment,Jt),yt(xi),le=!0)},o(Jt){At(Xe),At(lt),At(Ke,Jt),At(Yt),At(ve.$$.fragment,Jt),At(xi),le=!1},d(Jt){Jt&&Oe(e),me&&me.d(),Fe&&Fe.d(),Xe&&Xe.d(),lt&&lt.d(),Ke&&Ke.d(Jt),i[69](null),Yt&&Yt.d(),i[71](null),Wi(ve),i[83](null),Jt&&Oe(Ce),xi&&xi.d(Jt),Jt&&Oe(Be),Ee=!1,Io(he)}}}let g9=0;function y9(i){const e=i.currentTarget.getBoundingClientRect();return(_9(i)?i.touches[0].clientX:i.clientX)-e.left}function _9(i){return"touches"in i}const Wb=([i,e])=>`${i}: ${e};`;function v9(i,e,t){const o=["use","class","style","ripple","disabled","variant","noLabel","label","value","key","dirty","invalid","updateInvalid","required","inputId","hiddenInput","withLeadingIcon","anchor$use","anchor$class","selectedTextContainer$use","selectedTextContainer$class","selectedText$use","selectedText$class","dropdownIcon$use","dropdownIcon$class","menu$class","getUseDefaultValidation","setUseDefaultValidation","focus","layout","getElement"];let l=Zn(e,o),u,m,{$$slots:r={},$$scope:h}=e;const y=pg(r),b=go(mo());let v=()=>{};function w(xt){return xt===v}let{use:x=[]}=e,{class:C=""}=e,{style:T=""}=e,{ripple:S=!0}=e,{disabled:M=!1}=e,{variant:O="standard"}=e,{noLabel:V=!1}=e,{label:X=void 0}=e,{value:Z=""}=e,{key:ee=xt=>xt}=e,{dirty:J=!1}=e,{invalid:ie=v}=e,{updateInvalid:ke=w(ie)}=e;const Le=w(ie);w(ie)&&(ie=!1);let{required:fe=!1}=e,{inputId:Te="SMUI-select-"+g9++}=e,{hiddenInput:_e=!1}=e,{withLeadingIcon:ve=v}=e,{anchor$use:rt=[]}=e,{anchor$class:nt=""}=e,{selectedTextContainer$use:Tt=[]}=e,{selectedTextContainer$class:We=""}=e,{selectedText$use:be=[]}=e,{selectedText$class:Ce=""}=e,{dropdownIcon$use:Be=[]}=e,{dropdownIcon$class:le=""}=e,{menu$class:Ee=""}=e,he,me,Fe={},Xe={},lt,Ye={},Ke,Lt=-1,$t,dt=ds("SMUI:addLayoutListener"),wt,bt=!1,$e={},Yt,li,Zt=!1,Ci,Li=ds("SMUI:select:context"),Vt,mi,Qi,xi,Jt;$o("SMUI:list:role",""),$o("SMUI:list:nav",!1);const Me=Vl("");Wo(i,Me,xt=>t(43,u=xt)),$o("SMUI:select:selectedText",Me);const Q=Vl(Z);Wo(i,Q,xt=>t(91,m=xt)),$o("SMUI:select:value",Q);let ae=Lt;dt&&(wt=dt(cn)),Ss(()=>(t(23,me=new bL({setSelectedText:xt=>{bl(Me,u=xt,u)},isSelectAnchorFocused:()=>document.activeElement===lt,getSelectAnchorAttr:fn,setSelectAnchorAttr:Bi,removeSelectAnchorAttr:en,addMenuClass:xn,removeMenuClass:Mn,openMenu:()=>{t(32,bt=!0)},closeMenu:()=>{t(32,bt=!1)},getAnchorElement:()=>lt,setMenuAnchorElement:xt=>{t(34,Yt=xt)},setMenuAnchorCorner:xt=>{t(35,li=xt)},setMenuWrapFocus:xt=>{t(36,Zt=xt)},getSelectedIndex:()=>Lt,setSelectedIndex:xt=>{t(62,ae=xt),t(24,Lt=xt),t(0,Z=Xn()[Lt])},focusMenuItemAtIndex:xt=>{Ci.focusItemAtIndex(xt)},getMenuItemCount:()=>Ci.items.length,getMenuItemValues:()=>Xn().map(ee),getMenuItemTextAtIndex:xt=>Ci.getPrimaryTextAtIndex(xt),isTypeaheadInProgress:()=>Ci.typeaheadInProgress,typeaheadMatchItem:(xt,Pn)=>Ci.typeaheadMatchItem(xt,Pn),addClass:vt,removeClass:Wt,hasClass:et,setRippleCenter:xt=>xi&&xi.setRippleCenter(xt),activateBottomLine:()=>xi&&xi.activate(),deactivateBottomLine:()=>xi&&xi.deactivate(),notifyChange:xt=>{t(54,J=!0),ke&&t(1,ie=!me.isValid()),So(mn(),"SMUISelect:change",{value:Z,index:Lt},void 0,!0)},hasOutline:()=>!!Jt,notchOutline:xt=>Jt&&Jt.notch(xt),closeOutline:()=>Jt&&Jt.closeNotch(),hasLabel:()=>!!Qi,floatLabel:xt=>Qi&&Qi.float(xt),getLabelWidth:()=>Qi?Qi.getWidth():0,setLabelRequired:xt=>Qi&&Qi.setRequired(xt)},{get helperText(){return mi},get leadingIcon(){return Vt}})),t(24,Lt=Xn().indexOf(Z)),me.init(),Kr(Le),()=>{me.destroy()})),Lc(()=>{wt&&wt()});function et(xt){return xt in Fe?Fe[xt]:mn().classList.contains(xt)}function vt(xt){Fe[xt]||t(26,Fe[xt]=!0,Fe)}function Wt(xt){(!(xt in Fe)||Fe[xt])&&t(26,Fe[xt]=!1,Fe)}function di(xt,Pn){Xe[xt]!=Pn&&(Pn===""||Pn==null?(delete Xe[xt],t(27,Xe)):t(27,Xe[xt]=Pn,Xe))}function xn(xt){$e[xt]||t(33,$e[xt]=!0,$e)}function Mn(xt){(!(xt in $e)||$e[xt])&&t(33,$e[xt]=!1,$e)}function fn(xt){var Pn;return xt in Ye?(Pn=Ye[xt])!==null&&Pn!==void 0?Pn:null:mn().getAttribute(xt)}function Bi(xt,Pn){Ye[xt]!==Pn&&t(29,Ye[xt]=Pn,Ye)}function en(xt){(!(xt in Ye)||Ye[xt]!=null)&&t(29,Ye[xt]=void 0,Ye)}function Xn(){return Ci.getOrderedList().map(xt=>xt.getValue())}function Yn(){return me.getUseDefaultValidation()}function Kr(xt){me.setUseDefaultValidation(xt)}function jn(){lt.focus()}function cn(){me.layout()}function mn(){return he}function er(xt){Kf.call(this,i,xt)}function yn(xt){Kf.call(this,i,xt)}function Ln(xt){wn[xt?"unshift":"push"](()=>{Qi=xt,t(40,Qi)})}function lr(xt){wn[xt?"unshift":"push"](()=>{Qi=xt,t(40,Qi)})}function oo(xt){wn[xt?"unshift":"push"](()=>{Jt=xt,t(42,Jt)})}function ln(xt){wn[xt?"unshift":"push"](()=>{Ke=xt,t(30,Ke)})}function qe(xt){wn[xt?"unshift":"push"](()=>{xi=xt,t(41,xi)})}function To(xt){wn[xt?"unshift":"push"](()=>{lt=xt,t(28,lt)})}const bo=()=>me&&me.handleFocus(),co=()=>me&&me.handleBlur(),Pe=xt=>{lt.focus(),me&&me.handleClick(y9(xt))},Ie=xt=>me&&me.handleKeydown(xt);function He(xt){Lt=xt,t(24,Lt)}const ct=xt=>t(37,Ci=xt.detail);function gt(xt){bt=xt,t(32,bt)}const Rt=xt=>me&&me.handleMenuItemAction(xt.detail.index),Ge=()=>me&&me.handleMenuClosing(),Ht=()=>me&&me.handleMenuClosed(),Bt=()=>me&&me.handleMenuOpened();function ei(xt){wn[xt?"unshift":"push"](()=>{he=xt,t(25,he)})}const _t=xt=>t(38,Vt=xt.detail),Ri=()=>t(38,Vt=void 0),Ii=xt=>t(31,$t=xt.detail),In=xt=>t(39,mi=xt.detail),kn=()=>{t(31,$t=void 0),t(39,mi=void 0)};return i.$$set=xt=>{e=qi(qi({},e),uo(xt)),t(53,l=Zn(e,o)),"use"in xt&&t(2,x=xt.use),"class"in xt&&t(3,C=xt.class),"style"in xt&&t(4,T=xt.style),"ripple"in xt&&t(5,S=xt.ripple),"disabled"in xt&&t(6,M=xt.disabled),"variant"in xt&&t(7,O=xt.variant),"noLabel"in xt&&t(8,V=xt.noLabel),"label"in xt&&t(9,X=xt.label),"value"in xt&&t(0,Z=xt.value),"key"in xt&&t(55,ee=xt.key),"dirty"in xt&&t(54,J=xt.dirty),"invalid"in xt&&t(1,ie=xt.invalid),"updateInvalid"in xt&&t(56,ke=xt.updateInvalid),"required"in xt&&t(10,fe=xt.required),"inputId"in xt&&t(11,Te=xt.inputId),"hiddenInput"in xt&&t(12,_e=xt.hiddenInput),"withLeadingIcon"in xt&&t(13,ve=xt.withLeadingIcon),"anchor$use"in xt&&t(14,rt=xt.anchor$use),"anchor$class"in xt&&t(15,nt=xt.anchor$class),"selectedTextContainer$use"in xt&&t(16,Tt=xt.selectedTextContainer$use),"selectedTextContainer$class"in xt&&t(17,We=xt.selectedTextContainer$class),"selectedText$use"in xt&&t(18,be=xt.selectedText$use),"selectedText$class"in xt&&t(19,Ce=xt.selectedText$class),"dropdownIcon$use"in xt&&t(20,Be=xt.dropdownIcon$use),"dropdownIcon$class"in xt&&t(21,le=xt.dropdownIcon$class),"menu$class"in xt&&t(22,Ee=xt.menu$class),"$$scope"in xt&&t(89,h=xt.$$scope)},i.$$.update=()=>{if(i.$$.dirty[0]&25165825|i.$$.dirty[2]&1&&ae!==Lt)if(t(62,ae=Lt),me)me.setSelectedIndex(Lt,!1,!0);else{const xt=Xn();Z!==xt[Lt]&&t(0,Z=xt[Lt])}i.$$.dirty[0]&1&&bl(Q,m=Z,m),i.$$.dirty[0]&8388609|i.$$.dirty[1]&16777216&&me&&me.getValue()!==ee(Z)&&me.setValue(ee(Z)),i.$$.dirty[0]&8388672&&me&&me.getDisabled()!==M&&me.setDisabled(M),i.$$.dirty[0]&8388610|i.$$.dirty[1]&41943040&&me&&J&&me.isValid()!==!ie&&(ke?t(1,ie=!me.isValid()):me.setValid(!ie)),i.$$.dirty[0]&8389632&&me&&me.getRequired()!==fe&&me.setRequired(fe)},[Z,ie,x,C,T,S,M,O,V,X,fe,Te,_e,ve,rt,nt,Tt,We,be,Ce,Be,le,Ee,me,Lt,he,Fe,Xe,lt,Ye,Ke,$t,bt,$e,Yt,li,Zt,Ci,Vt,mi,Qi,xi,Jt,u,b,w,Li,Me,Q,vt,Wt,di,y,l,J,ee,ke,Yn,Kr,jn,cn,mn,ae,r,er,yn,Ln,lr,oo,ln,qe,To,bo,co,Pe,Ie,He,ct,gt,Rt,Ge,Ht,Bt,ei,_t,Ri,Ii,In,kn,h]}class E3 extends xr{constructor(e){super(),Ar(this,e,v9,m9,br,{use:2,class:3,style:4,ripple:5,disabled:6,variant:7,noLabel:8,label:9,value:0,key:55,dirty:54,invalid:1,updateInvalid:56,required:10,inputId:11,hiddenInput:12,withLeadingIcon:13,anchor$use:14,anchor$class:15,selectedTextContainer$use:16,selectedTextContainer$class:17,selectedText$use:18,selectedText$class:19,dropdownIcon$use:20,dropdownIcon$class:21,menu$class:22,getUseDefaultValidation:57,setUseDefaultValidation:58,focus:59,layout:60,getElement:61},null,[-1,-1,-1,-1])}get getUseDefaultValidation(){return this.$$.ctx[57]}get setUseDefaultValidation(){return this.$$.ctx[58]}get focus(){return this.$$.ctx[59]}get layout(){return this.$$.ctx[60]}get getElement(){return this.$$.ctx[61]}}function b9(i){let e;const t=i[11].default,o=fr(t,i,i[13],null);return{c(){o&&o.c()},l(l){o&&o.l(l)},m(l,u){o&&o.m(l,u),e=!0},p(l,u){o&&o.p&&(!e||u&8192)&&dr(o,t,l,l[13],e?mr(t,l[13],u,null):pr(l[13]),null)},i(l){e||(yt(o,l),e=!0)},o(l){At(o,l),e=!1},d(l){o&&o.d(l)}}}function w9(i){let e,t;const o=[{use:i[3]},{"data-value":i[0]},{value:i[0]},{selected:i[2]},i[6]];let l={$$slots:{default:[b9]},$$scope:{ctx:i}};for(let u=0;u<o.length;u+=1)l=qi(l,o[u]);return e=new qL({props:l}),i[12](e),{c(){Hi(e.$$.fragment)},l(u){$i(e.$$.fragment,u)},m(u,m){Gi(e,u,m),t=!0},p(u,[m]){const r=m&77?wr(o,[m&8&&{use:u[3]},m&1&&{"data-value":u[0]},m&1&&{value:u[0]},m&4&&{selected:u[2]},m&64&&po(u[6])]):{};m&8192&&(r.$$scope={dirty:m,ctx:u}),e.$set(r)},i(u){t||(yt(e.$$.fragment,u),t=!0)},o(u){At(e.$$.fragment,u),t=!1},d(u){i[12](null),Wi(e,u)}}}function x9(i,e,t){let o,l;const u=["use","class","value","getElement"];let m=Zn(e,u),r,h,{$$slots:y={},$$scope:b}=e;const v=go(mo());let{use:w=[]}=e;const x="";let{value:C=""}=e,T;const S=ds("SMUI:select:selectedText");Wo(i,S,Z=>t(14,r=Z));const M=ds("SMUI:select:value");Wo(i,M,Z=>t(10,h=Z)),$o("SMUI:list:item:role","option"),Ss(O),Lc(O);function O(){l&&T&&bl(S,r=T.getPrimaryText(),r)}function V(){return T.getElement()}function X(Z){wn[Z?"unshift":"push"](()=>{T=Z,t(1,T)})}return i.$$set=Z=>{e=qi(qi({},e),uo(Z)),t(6,m=Zn(e,u)),"use"in Z&&t(7,w=Z.use),"value"in Z&&t(0,C=Z.value),"$$scope"in Z&&t(13,b=Z.$$scope)},i.$$.update=()=>{i.$$.dirty&128&&t(3,o=[v,...w]),i.$$.dirty&1025&&t(2,l=C!=null&&C!==""&&h===C)},[C,T,l,o,S,M,m,w,x,V,h,y,X,b]}class A9 extends xr{constructor(e){super(),Ar(this,e,x9,w9,br,{use:7,class:8,value:0,getElement:9})}get class(){return this.$$.ctx[8]}get getElement(){return this.$$.ctx[9]}}const I3=A9;/**
 * @license
 * Copyright 2016 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var I2={ARIA_CONTROLS:"aria-controls",ARIA_DESCRIBEDBY:"aria-describedby",INPUT_SELECTOR:".mdc-text-field__input",LABEL_SELECTOR:".mdc-floating-label",LEADING_ICON_SELECTOR:".mdc-text-field__icon--leading",LINE_RIPPLE_SELECTOR:".mdc-line-ripple",OUTLINE_SELECTOR:".mdc-notched-outline",PREFIX_SELECTOR:".mdc-text-field__affix--prefix",SUFFIX_SELECTOR:".mdc-text-field__affix--suffix",TRAILING_ICON_SELECTOR:".mdc-text-field__icon--trailing"},k9={DISABLED:"mdc-text-field--disabled",FOCUSED:"mdc-text-field--focused",HELPER_LINE:"mdc-text-field-helper-line",INVALID:"mdc-text-field--invalid",LABEL_FLOATING:"mdc-text-field--label-floating",NO_LABEL:"mdc-text-field--no-label",OUTLINED:"mdc-text-field--outlined",ROOT:"mdc-text-field",TEXTAREA:"mdc-text-field--textarea",WITH_LEADING_ICON:"mdc-text-field--with-leading-icon",WITH_TRAILING_ICON:"mdc-text-field--with-trailing-icon",WITH_INTERNAL_COUNTER:"mdc-text-field--with-internal-counter"},Xb={LABEL_SCALE:.75},S9=["pattern","min","max","required","step","minlength","maxlength"],C9=["color","date","datetime-local","month","range","time","week"];/**
 * @license
 * Copyright 2016 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var Yb=["mousedown","touchstart"],Zb=["click","keydown"],E9=function(i){xl(e,i);function e(t,o){o===void 0&&(o={});var l=i.call(this,ts(ts({},e.defaultAdapter),t))||this;return l.isFocused=!1,l.receivedUserInput=!1,l.valid=!0,l.useNativeValidation=!0,l.validateOnValueChange=!0,l.helperText=o.helperText,l.characterCounter=o.characterCounter,l.leadingIcon=o.leadingIcon,l.trailingIcon=o.trailingIcon,l.inputFocusHandler=function(){l.activateFocus()},l.inputBlurHandler=function(){l.deactivateFocus()},l.inputInputHandler=function(){l.handleInput()},l.setPointerXOffset=function(u){l.setTransformOrigin(u)},l.textFieldInteractionHandler=function(){l.handleTextFieldInteraction()},l.validationAttributeChangeHandler=function(u){l.handleValidationAttributeChange(u)},l}return Object.defineProperty(e,"cssClasses",{get:function(){return k9},enumerable:!1,configurable:!0}),Object.defineProperty(e,"strings",{get:function(){return I2},enumerable:!1,configurable:!0}),Object.defineProperty(e,"numbers",{get:function(){return Xb},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"shouldAlwaysFloat",{get:function(){var t=this.getNativeInput().type;return C9.indexOf(t)>=0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"shouldFloat",{get:function(){return this.shouldAlwaysFloat||this.isFocused||!!this.getValue()||this.isBadInput()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"shouldShake",{get:function(){return!this.isFocused&&!this.isValid()&&!!this.getValue()},enumerable:!1,configurable:!0}),Object.defineProperty(e,"defaultAdapter",{get:function(){return{addClass:function(){},removeClass:function(){},hasClass:function(){return!0},setInputAttr:function(){},removeInputAttr:function(){},registerTextFieldInteractionHandler:function(){},deregisterTextFieldInteractionHandler:function(){},registerInputInteractionHandler:function(){},deregisterInputInteractionHandler:function(){},registerValidationAttributeChangeHandler:function(){return new MutationObserver(function(){})},deregisterValidationAttributeChangeHandler:function(){},getNativeInput:function(){return null},isFocused:function(){return!1},activateLineRipple:function(){},deactivateLineRipple:function(){},setLineRippleTransformOrigin:function(){},shakeLabel:function(){},floatLabel:function(){},setLabelRequired:function(){},hasLabel:function(){return!1},getLabelWidth:function(){return 0},hasOutline:function(){return!1},notchOutline:function(){},closeOutline:function(){}}},enumerable:!1,configurable:!0}),e.prototype.init=function(){var t,o,l,u;this.adapter.hasLabel()&&this.getNativeInput().required&&this.adapter.setLabelRequired(!0),this.adapter.isFocused()?this.inputFocusHandler():this.adapter.hasLabel()&&this.shouldFloat&&(this.notchOutline(!0),this.adapter.floatLabel(!0),this.styleFloating(!0)),this.adapter.registerInputInteractionHandler("focus",this.inputFocusHandler),this.adapter.registerInputInteractionHandler("blur",this.inputBlurHandler),this.adapter.registerInputInteractionHandler("input",this.inputInputHandler);try{for(var m=Ph(Yb),r=m.next();!r.done;r=m.next()){var h=r.value;this.adapter.registerInputInteractionHandler(h,this.setPointerXOffset)}}catch(v){t={error:v}}finally{try{r&&!r.done&&(o=m.return)&&o.call(m)}finally{if(t)throw t.error}}try{for(var y=Ph(Zb),b=y.next();!b.done;b=y.next()){var h=b.value;this.adapter.registerTextFieldInteractionHandler(h,this.textFieldInteractionHandler)}}catch(v){l={error:v}}finally{try{b&&!b.done&&(u=y.return)&&u.call(y)}finally{if(l)throw l.error}}this.validationObserver=this.adapter.registerValidationAttributeChangeHandler(this.validationAttributeChangeHandler),this.setcharacterCounter(this.getValue().length)},e.prototype.destroy=function(){var t,o,l,u;this.adapter.deregisterInputInteractionHandler("focus",this.inputFocusHandler),this.adapter.deregisterInputInteractionHandler("blur",this.inputBlurHandler),this.adapter.deregisterInputInteractionHandler("input",this.inputInputHandler);try{for(var m=Ph(Yb),r=m.next();!r.done;r=m.next()){var h=r.value;this.adapter.deregisterInputInteractionHandler(h,this.setPointerXOffset)}}catch(v){t={error:v}}finally{try{r&&!r.done&&(o=m.return)&&o.call(m)}finally{if(t)throw t.error}}try{for(var y=Ph(Zb),b=y.next();!b.done;b=y.next()){var h=b.value;this.adapter.deregisterTextFieldInteractionHandler(h,this.textFieldInteractionHandler)}}catch(v){l={error:v}}finally{try{b&&!b.done&&(u=y.return)&&u.call(y)}finally{if(l)throw l.error}}this.adapter.deregisterValidationAttributeChangeHandler(this.validationObserver)},e.prototype.handleTextFieldInteraction=function(){var t=this.adapter.getNativeInput();t&&t.disabled||(this.receivedUserInput=!0)},e.prototype.handleValidationAttributeChange=function(t){var o=this;t.some(function(l){return S9.indexOf(l)>-1?(o.styleValidity(!0),o.adapter.setLabelRequired(o.getNativeInput().required),!0):!1}),t.indexOf("maxlength")>-1&&this.setcharacterCounter(this.getValue().length)},e.prototype.notchOutline=function(t){if(!(!this.adapter.hasOutline()||!this.adapter.hasLabel()))if(t){var o=this.adapter.getLabelWidth()*Xb.LABEL_SCALE;this.adapter.notchOutline(o)}else this.adapter.closeOutline()},e.prototype.activateFocus=function(){this.isFocused=!0,this.styleFocused(this.isFocused),this.adapter.activateLineRipple(),this.adapter.hasLabel()&&(this.notchOutline(this.shouldFloat),this.adapter.floatLabel(this.shouldFloat),this.styleFloating(this.shouldFloat),this.adapter.shakeLabel(this.shouldShake)),this.helperText&&(this.helperText.isPersistent()||!this.helperText.isValidation()||!this.valid)&&this.helperText.showToScreenReader()},e.prototype.setTransformOrigin=function(t){if(!(this.isDisabled()||this.adapter.hasOutline())){var o=t.touches,l=o?o[0]:t,u=l.target.getBoundingClientRect(),m=l.clientX-u.left;this.adapter.setLineRippleTransformOrigin(m)}},e.prototype.handleInput=function(){this.autoCompleteFocus(),this.setcharacterCounter(this.getValue().length)},e.prototype.autoCompleteFocus=function(){this.receivedUserInput||this.activateFocus()},e.prototype.deactivateFocus=function(){this.isFocused=!1,this.adapter.deactivateLineRipple();var t=this.isValid();this.styleValidity(t),this.styleFocused(this.isFocused),this.adapter.hasLabel()&&(this.notchOutline(this.shouldFloat),this.adapter.floatLabel(this.shouldFloat),this.styleFloating(this.shouldFloat),this.adapter.shakeLabel(this.shouldShake)),this.shouldFloat||(this.receivedUserInput=!1)},e.prototype.getValue=function(){return this.getNativeInput().value},e.prototype.setValue=function(t){if(this.getValue()!==t&&(this.getNativeInput().value=t),this.setcharacterCounter(t.length),this.validateOnValueChange){var o=this.isValid();this.styleValidity(o)}this.adapter.hasLabel()&&(this.notchOutline(this.shouldFloat),this.adapter.floatLabel(this.shouldFloat),this.styleFloating(this.shouldFloat),this.validateOnValueChange&&this.adapter.shakeLabel(this.shouldShake))},e.prototype.isValid=function(){return this.useNativeValidation?this.isNativeInputValid():this.valid},e.prototype.setValid=function(t){this.valid=t,this.styleValidity(t);var o=!t&&!this.isFocused&&!!this.getValue();this.adapter.hasLabel()&&this.adapter.shakeLabel(o)},e.prototype.setValidateOnValueChange=function(t){this.validateOnValueChange=t},e.prototype.getValidateOnValueChange=function(){return this.validateOnValueChange},e.prototype.setUseNativeValidation=function(t){this.useNativeValidation=t},e.prototype.isDisabled=function(){return this.getNativeInput().disabled},e.prototype.setDisabled=function(t){this.getNativeInput().disabled=t,this.styleDisabled(t)},e.prototype.setHelperTextContent=function(t){this.helperText&&this.helperText.setContent(t)},e.prototype.setLeadingIconAriaLabel=function(t){this.leadingIcon&&this.leadingIcon.setAriaLabel(t)},e.prototype.setLeadingIconContent=function(t){this.leadingIcon&&this.leadingIcon.setContent(t)},e.prototype.setTrailingIconAriaLabel=function(t){this.trailingIcon&&this.trailingIcon.setAriaLabel(t)},e.prototype.setTrailingIconContent=function(t){this.trailingIcon&&this.trailingIcon.setContent(t)},e.prototype.setcharacterCounter=function(t){if(!!this.characterCounter){var o=this.getNativeInput().maxLength;if(o===-1)throw new Error("MDCTextFieldFoundation: Expected maxlength html property on text input or textarea.");this.characterCounter.setCounterValue(t,o)}},e.prototype.isBadInput=function(){return this.getNativeInput().validity.badInput||!1},e.prototype.isNativeInputValid=function(){return this.getNativeInput().validity.valid},e.prototype.styleValidity=function(t){var o=e.cssClasses.INVALID;if(t?this.adapter.removeClass(o):this.adapter.addClass(o),this.helperText){this.helperText.setValidity(t);var l=this.helperText.isValidation();if(!l)return;var u=this.helperText.isVisible(),m=this.helperText.getId();u&&m?this.adapter.setInputAttr(I2.ARIA_DESCRIBEDBY,m):this.adapter.removeInputAttr(I2.ARIA_DESCRIBEDBY)}},e.prototype.styleFocused=function(t){var o=e.cssClasses.FOCUSED;t?this.adapter.addClass(o):this.adapter.removeClass(o)},e.prototype.styleDisabled=function(t){var o=e.cssClasses,l=o.DISABLED,u=o.INVALID;t?(this.adapter.addClass(l),this.adapter.removeClass(u)):this.adapter.removeClass(l),this.leadingIcon&&this.leadingIcon.setDisabled(t),this.trailingIcon&&this.trailingIcon.setDisabled(t)},e.prototype.styleFloating=function(t){var o=e.cssClasses.LABEL_FLOATING;t?this.adapter.addClass(o):this.adapter.removeClass(o)},e.prototype.getNativeInput=function(){var t=this.adapter?this.adapter.getNativeInput():null;return t||{disabled:!1,maxLength:-1,required:!1,type:"input",validity:{badInput:!1,valid:!0},value:""}},e}(Fu);const I9=Al({class:"mdc-text-field-helper-line",component:ip}),T9=Al({class:"mdc-text-field__affix mdc-text-field__affix--prefix",component:vf}),L9=Al({class:"mdc-text-field__affix mdc-text-field__affix--suffix",component:vf});function P9(i){let e,t,o,l,u,m=[{class:t=rr({[i[1]]:!0,"mdc-text-field__input":!0})},{type:i[2]},{placeholder:i[3]},i[4],i[6],i[10]],r={};for(let h=0;h<m.length;h+=1)r=qi(r,m[h]);return{c(){e=ti("input"),this.h()},l(h){e=ii(h,"INPUT",{class:!0,type:!0,placeholder:!0}),this.h()},h(){or(e,r)},m(h,y){Dt(h,e,y),e.autofocus&&e.focus(),i[26](e),l||(u=[ir(o=Eo.call(null,e,i[0])),ir(i[7].call(null,e)),qn(e,"input",i[27]),qn(e,"change",i[9]),qn(e,"blur",i[24]),qn(e,"focus",i[25])],l=!0)},p(h,[y]){or(e,r=wr(m,[y&2&&t!==(t=rr({[h[1]]:!0,"mdc-text-field__input":!0}))&&{class:t},y&4&&{type:h[2]},y&8&&{placeholder:h[3]},y&16&&h[4],y&64&&h[6],y&1024&&h[10]])),o&&ro(o.update)&&y&1&&o.update.call(null,h[0])},i:is,o:is,d(h){h&&Oe(e),i[26](null),l=!1,Io(u)}}}function M9(i){if(i===""){const e=new Number(Number.NaN);return e.length=0,e}return+i}function D9(i,e,t){const o=["use","class","type","placeholder","value","files","dirty","invalid","updateInvalid","emptyValueNull","emptyValueUndefined","getAttr","addAttr","removeAttr","focus","blur","getElement"];let l=Zn(e,o);const u=go(mo());let m=()=>{};function r(be){return be===m}let{use:h=[]}=e,{class:y=""}=e,{type:b="text"}=e,{placeholder:v=" "}=e,{value:w=m}=e;const x=r(w);x&&(w="");let{files:C=null}=e,{dirty:T=!1}=e,{invalid:S=!1}=e,{updateInvalid:M=!0}=e,{emptyValueNull:O=w===null}=e;x&&O&&(w=null);let{emptyValueUndefined:V=w===void 0}=e;x&&V&&(w=void 0);let X,Z={},ee={};Ss(()=>{M&&t(14,S=X.matches(":invalid"))});function J(be){if(b==="file"){t(12,C=be.currentTarget.files);return}if(be.currentTarget.value===""&&O){t(11,w=null);return}if(be.currentTarget.value===""&&V){t(11,w=void 0);return}switch(b){case"number":case"range":t(11,w=M9(be.currentTarget.value));break;default:t(11,w=be.currentTarget.value);break}}function ie(be){(b==="file"||b==="range")&&J(be),t(13,T=!0),M&&t(14,S=X.matches(":invalid"))}function ke(be){var Ce;return be in Z?(Ce=Z[be])!==null&&Ce!==void 0?Ce:null:ve().getAttribute(be)}function Le(be,Ce){Z[be]!==Ce&&t(6,Z[be]=Ce,Z)}function fe(be){(!(be in Z)||Z[be]!=null)&&t(6,Z[be]=void 0,Z)}function Te(){ve().focus()}function _e(){ve().blur()}function ve(){return X}function rt(be){Kf.call(this,i,be)}function nt(be){Kf.call(this,i,be)}function Tt(be){wn[be?"unshift":"push"](()=>{X=be,t(5,X)})}const We=be=>b!=="file"&&J(be);return i.$$set=be=>{e=qi(qi({},e),uo(be)),t(10,l=Zn(e,o)),"use"in be&&t(0,h=be.use),"class"in be&&t(1,y=be.class),"type"in be&&t(2,b=be.type),"placeholder"in be&&t(3,v=be.placeholder),"value"in be&&t(11,w=be.value),"files"in be&&t(12,C=be.files),"dirty"in be&&t(13,T=be.dirty),"invalid"in be&&t(14,S=be.invalid),"updateInvalid"in be&&t(15,M=be.updateInvalid),"emptyValueNull"in be&&t(16,O=be.emptyValueNull),"emptyValueUndefined"in be&&t(17,V=be.emptyValueUndefined)},i.$$.update=()=>{i.$$.dirty&2068&&(b==="file"?(delete ee.value,t(4,ee),t(2,b),t(11,w)):t(4,ee.value=w==null?"":w,ee))},[h,y,b,v,ee,X,Z,u,J,ie,l,w,C,T,S,M,O,V,ke,Le,fe,Te,_e,ve,rt,nt,Tt,We]}class O9 extends xr{constructor(e){super(),Ar(this,e,D9,P9,br,{use:0,class:1,type:2,placeholder:3,value:11,files:12,dirty:13,invalid:14,updateInvalid:15,emptyValueNull:16,emptyValueUndefined:17,getAttr:18,addAttr:19,removeAttr:20,focus:21,blur:22,getElement:23})}get getAttr(){return this.$$.ctx[18]}get addAttr(){return this.$$.ctx[19]}get removeAttr(){return this.$$.ctx[20]}get focus(){return this.$$.ctx[21]}get blur(){return this.$$.ctx[22]}get getElement(){return this.$$.ctx[23]}}function F9(i){let e,t,o,l,u,m,r=[{class:t=rr({[i[2]]:!0,"mdc-text-field__input":!0})},{style:o=`${i[4]?"":"resize: none; "}${i[3]}`},i[6],i[9]],h={};for(let y=0;y<r.length;y+=1)h=qi(h,r[y]);return{c(){e=ti("textarea"),this.h()},l(y){e=ii(y,"TEXTAREA",{class:!0,style:!0}),si(e).forEach(Oe),this.h()},h(){or(e,h)},m(y,b){Dt(y,e,b),e.autofocus&&e.focus(),i[21](e),td(e,i[0]),u||(m=[ir(l=Eo.call(null,e,i[1])),ir(i[7].call(null,e)),qn(e,"change",i[8]),qn(e,"blur",i[19]),qn(e,"focus",i[20]),qn(e,"input",i[22])],u=!0)},p(y,[b]){or(e,h=wr(r,[b&4&&t!==(t=rr({[y[2]]:!0,"mdc-text-field__input":!0}))&&{class:t},b&24&&o!==(o=`${y[4]?"":"resize: none; "}${y[3]}`)&&{style:o},b&64&&y[6],b&512&&y[9]])),l&&ro(l.update)&&b&2&&l.update.call(null,y[1]),b&1&&td(e,y[0])},i:is,o:is,d(y){y&&Oe(e),i[21](null),u=!1,Io(m)}}}function R9(i,e,t){const o=["use","class","style","value","dirty","invalid","updateInvalid","resizable","getAttr","addAttr","removeAttr","focus","blur","getElement"];let l=Zn(e,o);const u=go(mo());let{use:m=[]}=e,{class:r=""}=e,{style:h=""}=e,{value:y=""}=e,{dirty:b=!1}=e,{invalid:v=!1}=e,{updateInvalid:w=!0}=e,{resizable:x=!0}=e,C,T={};Ss(()=>{w&&t(11,v=C.matches(":invalid"))});function S(){t(10,b=!0),w&&t(11,v=C.matches(":invalid"))}function M(fe){var Te;return fe in T?(Te=T[fe])!==null&&Te!==void 0?Te:null:ee().getAttribute(fe)}function O(fe,Te){T[fe]!==Te&&t(6,T[fe]=Te,T)}function V(fe){(!(fe in T)||T[fe]!=null)&&t(6,T[fe]=void 0,T)}function X(){ee().focus()}function Z(){ee().blur()}function ee(){return C}function J(fe){Kf.call(this,i,fe)}function ie(fe){Kf.call(this,i,fe)}function ke(fe){wn[fe?"unshift":"push"](()=>{C=fe,t(5,C)})}function Le(){y=this.value,t(0,y)}return i.$$set=fe=>{e=qi(qi({},e),uo(fe)),t(9,l=Zn(e,o)),"use"in fe&&t(1,m=fe.use),"class"in fe&&t(2,r=fe.class),"style"in fe&&t(3,h=fe.style),"value"in fe&&t(0,y=fe.value),"dirty"in fe&&t(10,b=fe.dirty),"invalid"in fe&&t(11,v=fe.invalid),"updateInvalid"in fe&&t(12,w=fe.updateInvalid),"resizable"in fe&&t(4,x=fe.resizable)},[y,m,r,h,x,C,T,u,S,l,b,v,w,M,O,V,X,Z,ee,J,ie,ke,Le]}class B9 extends xr{constructor(e){super(),Ar(this,e,R9,F9,br,{use:1,class:2,style:3,value:0,dirty:10,invalid:11,updateInvalid:12,resizable:4,getAttr:13,addAttr:14,removeAttr:15,focus:16,blur:17,getElement:18})}get getAttr(){return this.$$.ctx[13]}get addAttr(){return this.$$.ctx[14]}get removeAttr(){return this.$$.ctx[15]}get focus(){return this.$$.ctx[16]}get blur(){return this.$$.ctx[17]}get getElement(){return this.$$.ctx[18]}}const z9=i=>({}),Kb=i=>({}),N9=i=>({}),Jb=i=>({}),j9=i=>({}),Qb=i=>({}),U9=i=>({}),$b=i=>({}),V9=i=>({}),e5=i=>({}),q9=i=>({}),t5=i=>({}),H9=i=>({}),i5=i=>({}),G9=i=>({}),n5=i=>({}),W9=i=>({}),r5=i=>({}),X9=i=>({}),o5=i=>({}),Y9=i=>({}),s5=i=>({}),Z9=i=>({}),a5=i=>({});function K9(i){let e,t,o,l,u,m,r,h,y,b,v,w,x,C;const T=i[51].label,S=fr(T,i,i[90],e5);o=new g1({props:{key:"SMUI:textfield:icon:leading",value:!0,$$slots:{default:[Q9]},$$scope:{ctx:i}}});const M=i[51].default,O=fr(M,i,i[90],null);m=new g1({props:{key:"SMUI:textfield:icon:leading",value:!1,$$slots:{default:[$9]},$$scope:{ctx:i}}});const V=i[51].ripple,X=fr(V,i,i[90],Jb);let Z=[{class:h=rr({[i[9]]:!0,"mdc-text-field":!0,"mdc-text-field--disabled":i[12],"mdc-text-field--textarea":i[14],"mdc-text-field--filled":i[15]==="filled","mdc-text-field--outlined":i[15]==="outlined","smui-text-field--standard":i[15]==="standard"&&!i[14],"mdc-text-field--no-label":i[16]||!i[42].label,"mdc-text-field--with-leading-icon":i[42].leadingIcon,"mdc-text-field--with-trailing-icon":i[42].trailingIcon,"mdc-text-field--invalid":i[1],...i[25]})},{style:y=Object.entries(i[26]).map(_5).concat([i[10]]).join(" ")},mf(i[41],["input$","label$","ripple$","outline$","helperLine$"])],ee={};for(let J=0;J<Z.length;J+=1)ee=qi(ee,Z[J]);return{c(){e=ti("div"),S&&S.c(),t=Xi(),Hi(o.$$.fragment),l=Xi(),O&&O.c(),u=Xi(),Hi(m.$$.fragment),r=Xi(),X&&X.c(),this.h()},l(J){e=ii(J,"DIV",{class:!0,style:!0});var ie=si(e);S&&S.l(ie),t=Yi(ie),$i(o.$$.fragment,ie),l=Yi(ie),O&&O.l(ie),u=Yi(ie),$i(m.$$.fragment,ie),r=Yi(ie),X&&X.l(ie),ie.forEach(Oe),this.h()},h(){or(e,ee)},m(J,ie){Dt(J,e,ie),S&&S.m(e,null),Kt(e,t),Gi(o,e,null),Kt(e,l),O&&O.m(e,null),Kt(e,u),Gi(m,e,null),Kt(e,r),X&&X.m(e,null),i[80](e),w=!0,x||(C=[ir(b=oh.call(null,e,{ripple:i[11],unbounded:!1,addClass:i[38],removeClass:i[39],addStyle:i[40]})),ir(v=Eo.call(null,e,i[8])),ir(i[34].call(null,e)),qn(e,"SMUITextfieldLeadingIcon:mount",i[81]),qn(e,"SMUITextfieldLeadingIcon:unmount",i[82]),qn(e,"SMUITextfieldTrailingIcon:mount",i[83]),qn(e,"SMUITextfieldTrailingIcon:unmount",i[84])],x=!0)},p(J,ie){S&&S.p&&(!w||ie[2]&268435456)&&dr(S,T,J,J[90],w?mr(T,J[90],ie,V9):pr(J[90]),e5);const ke={};ie[2]&268435456&&(ke.$$scope={dirty:ie,ctx:J}),o.$set(ke),O&&O.p&&(!w||ie[2]&268435456)&&dr(O,M,J,J[90],w?mr(M,J[90],ie,null):pr(J[90]),null);const Le={};ie[2]&268435456&&(Le.$$scope={dirty:ie,ctx:J}),m.$set(Le),X&&X.p&&(!w||ie[2]&268435456)&&dr(X,V,J,J[90],w?mr(V,J[90],ie,N9):pr(J[90]),Jb),or(e,ee=wr(Z,[(!w||ie[0]&33673730|ie[1]&2048&&h!==(h=rr({[J[9]]:!0,"mdc-text-field":!0,"mdc-text-field--disabled":J[12],"mdc-text-field--textarea":J[14],"mdc-text-field--filled":J[15]==="filled","mdc-text-field--outlined":J[15]==="outlined","smui-text-field--standard":J[15]==="standard"&&!J[14],"mdc-text-field--no-label":J[16]||!J[42].label,"mdc-text-field--with-leading-icon":J[42].leadingIcon,"mdc-text-field--with-trailing-icon":J[42].trailingIcon,"mdc-text-field--invalid":J[1],...J[25]})))&&{class:h},(!w||ie[0]&67109888&&y!==(y=Object.entries(J[26]).map(_5).concat([J[10]]).join(" ")))&&{style:y},ie[1]&1024&&mf(J[41],["input$","label$","ripple$","outline$","helperLine$"])])),b&&ro(b.update)&&ie[0]&2048&&b.update.call(null,{ripple:J[11],unbounded:!1,addClass:J[38],removeClass:J[39],addStyle:J[40]}),v&&ro(v.update)&&ie[0]&256&&v.update.call(null,J[8])},i(J){w||(yt(S,J),yt(o.$$.fragment,J),yt(O,J),yt(m.$$.fragment,J),yt(X,J),w=!0)},o(J){At(S,J),At(o.$$.fragment,J),At(O,J),At(m.$$.fragment,J),At(X,J),w=!1},d(J){J&&Oe(e),S&&S.d(J),Wi(o),O&&O.d(J),Wi(m),X&&X.d(J),i[80](null),x=!1,Io(C)}}}function J9(i){let e,t,o,l,u,m,r,h,y,b,v,w,x,C,T,S,M,O,V=!i[14]&&i[15]!=="outlined"&&l5(i),X=(i[14]||i[15]==="outlined")&&h5(i);l=new g1({props:{key:"SMUI:textfield:icon:leading",value:!0,$$slots:{default:[nP]},$$scope:{ctx:i}}});const Z=i[51].default,ee=fr(Z,i,i[90],null),J=[oP,rP],ie=[];function ke(_e,ve){return _e[14]&&typeof _e[0]=="string"?0:1}r=ke(i),h=ie[r]=J[r](i),b=new g1({props:{key:"SMUI:textfield:icon:leading",value:!1,$$slots:{default:[lP]},$$scope:{ctx:i}}});let Le=!i[14]&&i[15]!=="outlined"&&i[11]&&m5(i),fe=[{class:w=rr({[i[9]]:!0,"mdc-text-field":!0,"mdc-text-field--disabled":i[12],"mdc-text-field--textarea":i[14],"mdc-text-field--filled":i[15]==="filled","mdc-text-field--outlined":i[15]==="outlined","smui-text-field--standard":i[15]==="standard"&&!i[14],"mdc-text-field--no-label":i[16]||i[17]==null&&!i[42].label,"mdc-text-field--label-floating":i[28]||i[0]!=null&&i[0]!=="","mdc-text-field--with-leading-icon":i[35](i[22])?i[42].leadingIcon:i[22],"mdc-text-field--with-trailing-icon":i[35](i[23])?i[42].trailingIcon:i[23],"mdc-text-field--with-internal-counter":i[14]&&i[42].internalCounter,"mdc-text-field--invalid":i[1],...i[25]})},{style:x=Object.entries(i[26]).map(y5).concat([i[10]]).join(" ")},{for:void 0},mf(i[41],["input$","label$","ripple$","outline$","helperLine$"])],Te={};for(let _e=0;_e<fe.length;_e+=1)Te=qi(Te,fe[_e]);return{c(){e=ti("label"),V&&V.c(),t=Xi(),X&&X.c(),o=Xi(),Hi(l.$$.fragment),u=Xi(),ee&&ee.c(),m=Xi(),h.c(),y=Xi(),Hi(b.$$.fragment),v=Xi(),Le&&Le.c(),this.h()},l(_e){e=ii(_e,"LABEL",{class:!0,style:!0,for:!0});var ve=si(e);V&&V.l(ve),t=Yi(ve),X&&X.l(ve),o=Yi(ve),$i(l.$$.fragment,ve),u=Yi(ve),ee&&ee.l(ve),m=Yi(ve),h.l(ve),y=Yi(ve),$i(b.$$.fragment,ve),v=Yi(ve),Le&&Le.l(ve),ve.forEach(Oe),this.h()},h(){or(e,Te)},m(_e,ve){Dt(_e,e,ve),V&&V.m(e,null),Kt(e,t),X&&X.m(e,null),Kt(e,o),Gi(l,e,null),Kt(e,u),ee&&ee.m(e,null),Kt(e,m),ie[r].m(e,null),Kt(e,y),Gi(b,e,null),Kt(e,v),Le&&Le.m(e,null),i[73](e),S=!0,M||(O=[ir(C=oh.call(null,e,{ripple:!i[14]&&i[15]==="filled",unbounded:!1,addClass:i[38],removeClass:i[39],addStyle:i[40],eventTarget:i[33],activeTarget:i[33],initPromise:i[37]})),ir(T=Eo.call(null,e,i[8])),ir(i[34].call(null,e)),qn(e,"SMUITextfieldLeadingIcon:mount",i[74]),qn(e,"SMUITextfieldLeadingIcon:unmount",i[75]),qn(e,"SMUITextfieldTrailingIcon:mount",i[76]),qn(e,"SMUITextfieldTrailingIcon:unmount",i[77]),qn(e,"SMUITextfieldCharacterCounter:mount",i[78]),qn(e,"SMUITextfieldCharacterCounter:unmount",i[79])],M=!0)},p(_e,ve){!_e[14]&&_e[15]!=="outlined"?V?(V.p(_e,ve),ve[0]&49152&&yt(V,1)):(V=l5(_e),V.c(),yt(V,1),V.m(e,t)):V&&(Dr(),At(V,1,1,()=>{V=null}),Mr()),_e[14]||_e[15]==="outlined"?X?(X.p(_e,ve),ve[0]&49152&&yt(X,1)):(X=h5(_e),X.c(),yt(X,1),X.m(e,o)):X&&(Dr(),At(X,1,1,()=>{X=null}),Mr());const rt={};ve[2]&268435456&&(rt.$$scope={dirty:ve,ctx:_e}),l.$set(rt),ee&&ee.p&&(!S||ve[2]&268435456)&&dr(ee,Z,_e,_e[90],S?mr(Z,_e[90],ve,null):pr(_e[90]),null);let nt=r;r=ke(_e),r===nt?ie[r].p(_e,ve):(Dr(),At(ie[nt],1,1,()=>{ie[nt]=null}),Mr(),h=ie[r],h?h.p(_e,ve):(h=ie[r]=J[r](_e),h.c()),yt(h,1),h.m(e,y));const Tt={};ve[2]&268435456&&(Tt.$$scope={dirty:ve,ctx:_e}),b.$set(Tt),!_e[14]&&_e[15]!=="outlined"&&_e[11]?Le?(Le.p(_e,ve),ve[0]&51200&&yt(Le,1)):(Le=m5(_e),Le.c(),yt(Le,1),Le.m(e,null)):Le&&(Dr(),At(Le,1,1,()=>{Le=null}),Mr()),or(e,Te=wr(fe,[(!S||ve[0]&314823171|ve[1]&2048&&w!==(w=rr({[_e[9]]:!0,"mdc-text-field":!0,"mdc-text-field--disabled":_e[12],"mdc-text-field--textarea":_e[14],"mdc-text-field--filled":_e[15]==="filled","mdc-text-field--outlined":_e[15]==="outlined","smui-text-field--standard":_e[15]==="standard"&&!_e[14],"mdc-text-field--no-label":_e[16]||_e[17]==null&&!_e[42].label,"mdc-text-field--label-floating":_e[28]||_e[0]!=null&&_e[0]!=="","mdc-text-field--with-leading-icon":_e[35](_e[22])?_e[42].leadingIcon:_e[22],"mdc-text-field--with-trailing-icon":_e[35](_e[23])?_e[42].trailingIcon:_e[23],"mdc-text-field--with-internal-counter":_e[14]&&_e[42].internalCounter,"mdc-text-field--invalid":_e[1],..._e[25]})))&&{class:w},(!S||ve[0]&67109888&&x!==(x=Object.entries(_e[26]).map(y5).concat([_e[10]]).join(" ")))&&{style:x},{for:void 0},ve[1]&1024&&mf(_e[41],["input$","label$","ripple$","outline$","helperLine$"])])),C&&ro(C.update)&&ve[0]&49152|ve[1]&4&&C.update.call(null,{ripple:!_e[14]&&_e[15]==="filled",unbounded:!1,addClass:_e[38],removeClass:_e[39],addStyle:_e[40],eventTarget:_e[33],activeTarget:_e[33],initPromise:_e[37]}),T&&ro(T.update)&&ve[0]&256&&T.update.call(null,_e[8])},i(_e){S||(yt(V),yt(X),yt(l.$$.fragment,_e),yt(ee,_e),yt(h),yt(b.$$.fragment,_e),yt(Le),S=!0)},o(_e){At(V),At(X),At(l.$$.fragment,_e),At(ee,_e),At(h),At(b.$$.fragment,_e),At(Le),S=!1},d(_e){_e&&Oe(e),V&&V.d(),X&&X.d(),Wi(l),ee&&ee.d(_e),ie[r].d(),Wi(b),Le&&Le.d(),i[73](null),M=!1,Io(O)}}}function Q9(i){let e;const t=i[51].leadingIcon,o=fr(t,i,i[90],$b);return{c(){o&&o.c()},l(l){o&&o.l(l)},m(l,u){o&&o.m(l,u),e=!0},p(l,u){o&&o.p&&(!e||u[2]&268435456)&&dr(o,t,l,l[90],e?mr(t,l[90],u,U9):pr(l[90]),$b)},i(l){e||(yt(o,l),e=!0)},o(l){At(o,l),e=!1},d(l){o&&o.d(l)}}}function $9(i){let e;const t=i[51].trailingIcon,o=fr(t,i,i[90],Qb);return{c(){o&&o.c()},l(l){o&&o.l(l)},m(l,u){o&&o.m(l,u),e=!0},p(l,u){o&&o.p&&(!e||u[2]&268435456)&&dr(o,t,l,l[90],e?mr(t,l[90],u,j9):pr(l[90]),Qb)},i(l){e||(yt(o,l),e=!0)},o(l){At(o,l),e=!1},d(l){o&&o.d(l)}}}function l5(i){let e,t,o,l=i[15]==="filled"&&u5(),u=!i[16]&&(i[17]!=null||i[42].label)&&c5(i);return{c(){l&&l.c(),e=Xi(),u&&u.c(),t=gn()},l(m){l&&l.l(m),e=Yi(m),u&&u.l(m),t=gn()},m(m,r){l&&l.m(m,r),Dt(m,e,r),u&&u.m(m,r),Dt(m,t,r),o=!0},p(m,r){m[15]==="filled"?l||(l=u5(),l.c(),l.m(e.parentNode,e)):l&&(l.d(1),l=null),!m[16]&&(m[17]!=null||m[42].label)?u?(u.p(m,r),r[0]&196608|r[1]&2048&&yt(u,1)):(u=c5(m),u.c(),yt(u,1),u.m(t.parentNode,t)):u&&(Dr(),At(u,1,1,()=>{u=null}),Mr())},i(m){o||(yt(u),o=!0)},o(m){At(u),o=!1},d(m){l&&l.d(m),m&&Oe(e),u&&u.d(m),m&&Oe(t)}}}function u5(i){let e;return{c(){e=ti("span"),this.h()},l(t){e=ii(t,"SPAN",{class:!0}),si(e).forEach(Oe),this.h()},h(){oi(e,"class","mdc-text-field__ripple")},m(t,o){Dt(t,e,o)},d(t){t&&Oe(e)}}}function c5(i){let e,t;const o=[{floatAbove:i[28]||i[0]!=null&&i[0]!==""},{required:i[13]},{wrapped:!0},fo(i[41],"label$")];let l={$$slots:{default:[eP]},$$scope:{ctx:i}};for(let u=0;u<o.length;u+=1)l=qi(l,o[u]);return e=new $1({props:l}),i[52](e),{c(){Hi(e.$$.fragment)},l(u){$i(e.$$.fragment,u)},m(u,m){Gi(e,u,m),t=!0},p(u,m){const r=m[0]&268443649|m[1]&1024?wr(o,[m[0]&268435457&&{floatAbove:u[28]||u[0]!=null&&u[0]!==""},m[0]&8192&&{required:u[13]},o[2],m[1]&1024&&po(fo(u[41],"label$"))]):{};m[0]&131072|m[2]&268435456&&(r.$$scope={dirty:m,ctx:u}),e.$set(r)},i(u){t||(yt(e.$$.fragment,u),t=!0)},o(u){At(e.$$.fragment,u),t=!1},d(u){i[52](null),Wi(e,u)}}}function eP(i){let e=(i[17]==null?"":i[17])+"",t,o;const l=i[51].label,u=fr(l,i,i[90],a5);return{c(){t=Cn(e),u&&u.c()},l(m){t=En(m,e),u&&u.l(m)},m(m,r){Dt(m,t,r),u&&u.m(m,r),o=!0},p(m,r){(!o||r[0]&131072)&&e!==(e=(m[17]==null?"":m[17])+"")&&ks(t,e),u&&u.p&&(!o||r[2]&268435456)&&dr(u,l,m,m[90],o?mr(l,m[90],r,Z9):pr(m[90]),a5)},i(m){o||(yt(u,m),o=!0)},o(m){At(u,m),o=!1},d(m){m&&Oe(t),u&&u.d(m)}}}function h5(i){let e,t;const o=[{noLabel:i[16]||i[17]==null&&!i[42].label},fo(i[41],"outline$")];let l={$$slots:{default:[iP]},$$scope:{ctx:i}};for(let u=0;u<o.length;u+=1)l=qi(l,o[u]);return e=new C3({props:l}),i[54](e),{c(){Hi(e.$$.fragment)},l(u){$i(e.$$.fragment,u)},m(u,m){Gi(e,u,m),t=!0},p(u,m){const r=m[0]&196608|m[1]&3072?wr(o,[m[0]&196608|m[1]&2048&&{noLabel:u[16]||u[17]==null&&!u[42].label},m[1]&1024&&po(fo(u[41],"outline$"))]):{};m[0]&268640289|m[1]&3072|m[2]&268435456&&(r.$$scope={dirty:m,ctx:u}),e.$set(r)},i(u){t||(yt(e.$$.fragment,u),t=!0)},o(u){At(e.$$.fragment,u),t=!1},d(u){i[54](null),Wi(e,u)}}}function f5(i){let e,t;const o=[{floatAbove:i[28]||i[0]!=null&&i[0]!==""},{required:i[13]},{wrapped:!0},fo(i[41],"label$")];let l={$$slots:{default:[tP]},$$scope:{ctx:i}};for(let u=0;u<o.length;u+=1)l=qi(l,o[u]);return e=new $1({props:l}),i[53](e),{c(){Hi(e.$$.fragment)},l(u){$i(e.$$.fragment,u)},m(u,m){Gi(e,u,m),t=!0},p(u,m){const r=m[0]&268443649|m[1]&1024?wr(o,[m[0]&268435457&&{floatAbove:u[28]||u[0]!=null&&u[0]!==""},m[0]&8192&&{required:u[13]},o[2],m[1]&1024&&po(fo(u[41],"label$"))]):{};m[0]&131072|m[2]&268435456&&(r.$$scope={dirty:m,ctx:u}),e.$set(r)},i(u){t||(yt(e.$$.fragment,u),t=!0)},o(u){At(e.$$.fragment,u),t=!1},d(u){i[53](null),Wi(e,u)}}}function tP(i){let e=(i[17]==null?"":i[17])+"",t,o;const l=i[51].label,u=fr(l,i,i[90],s5);return{c(){t=Cn(e),u&&u.c()},l(m){t=En(m,e),u&&u.l(m)},m(m,r){Dt(m,t,r),u&&u.m(m,r),o=!0},p(m,r){(!o||r[0]&131072)&&e!==(e=(m[17]==null?"":m[17])+"")&&ks(t,e),u&&u.p&&(!o||r[2]&268435456)&&dr(u,l,m,m[90],o?mr(l,m[90],r,Y9):pr(m[90]),s5)},i(m){o||(yt(u,m),o=!0)},o(m){At(u,m),o=!1},d(m){m&&Oe(t),u&&u.d(m)}}}function iP(i){let e,t,o=!i[16]&&(i[17]!=null||i[42].label)&&f5(i);return{c(){o&&o.c(),e=gn()},l(l){o&&o.l(l),e=gn()},m(l,u){o&&o.m(l,u),Dt(l,e,u),t=!0},p(l,u){!l[16]&&(l[17]!=null||l[42].label)?o?(o.p(l,u),u[0]&196608|u[1]&2048&&yt(o,1)):(o=f5(l),o.c(),yt(o,1),o.m(e.parentNode,e)):o&&(Dr(),At(o,1,1,()=>{o=null}),Mr())},i(l){t||(yt(o),t=!0)},o(l){At(o),t=!1},d(l){o&&o.d(l),l&&Oe(e)}}}function nP(i){let e;const t=i[51].leadingIcon,o=fr(t,i,i[90],o5);return{c(){o&&o.c()},l(l){o&&o.l(l)},m(l,u){o&&o.m(l,u),e=!0},p(l,u){o&&o.p&&(!e||u[2]&268435456)&&dr(o,t,l,l[90],e?mr(t,l[90],u,X9):pr(l[90]),o5)},i(l){e||(yt(o,l),e=!0)},o(l){At(o,l),e=!1},d(l){o&&o.d(l)}}}function rP(i){let e,t,o,l,u,m,r,h,y,b;const v=i[51].prefix,w=fr(v,i,i[90],n5);let x=i[20]!=null&&d5(i);const C=[{type:i[18]},{disabled:i[12]},{required:i[13]},{updateInvalid:i[19]},{"aria-controls":i[27]},{"aria-describedby":i[27]},i[16]&&i[17]!=null?{placeholder:i[17]}:{},fo(i[41],"input$")];function T(J){i[64](J)}function S(J){i[65](J)}function M(J){i[66](J)}function O(J){i[67](J)}let V={};for(let J=0;J<C.length;J+=1)V=qi(V,C[J]);i[0]!==void 0&&(V.value=i[0]),i[3]!==void 0&&(V.files=i[3]),i[4]!==void 0&&(V.dirty=i[4]),i[1]!==void 0&&(V.invalid=i[1]),o=new O9({props:V}),i[63](o),wn.push(()=>Vo(o,"value",T)),wn.push(()=>Vo(o,"files",S)),wn.push(()=>Vo(o,"dirty",M)),wn.push(()=>Vo(o,"invalid",O)),o.$on("blur",i[68]),o.$on("focus",i[69]),o.$on("blur",i[70]),o.$on("focus",i[71]);let X=i[21]!=null&&p5(i);const Z=i[51].suffix,ee=fr(Z,i,i[90],i5);return{c(){w&&w.c(),e=Xi(),x&&x.c(),t=Xi(),Hi(o.$$.fragment),h=Xi(),X&&X.c(),y=Xi(),ee&&ee.c()},l(J){w&&w.l(J),e=Yi(J),x&&x.l(J),t=Yi(J),$i(o.$$.fragment,J),h=Yi(J),X&&X.l(J),y=Yi(J),ee&&ee.l(J)},m(J,ie){w&&w.m(J,ie),Dt(J,e,ie),x&&x.m(J,ie),Dt(J,t,ie),Gi(o,J,ie),Dt(J,h,ie),X&&X.m(J,ie),Dt(J,y,ie),ee&&ee.m(J,ie),b=!0},p(J,ie){w&&w.p&&(!b||ie[2]&268435456)&&dr(w,v,J,J[90],b?mr(v,J[90],ie,G9):pr(J[90]),n5),J[20]!=null?x?(x.p(J,ie),ie[0]&1048576&&yt(x,1)):(x=d5(J),x.c(),yt(x,1),x.m(t.parentNode,t)):x&&(Dr(),At(x,1,1,()=>{x=null}),Mr());const ke=ie[0]&135213056|ie[1]&1024?wr(C,[ie[0]&262144&&{type:J[18]},ie[0]&4096&&{disabled:J[12]},ie[0]&8192&&{required:J[13]},ie[0]&524288&&{updateInvalid:J[19]},ie[0]&134217728&&{"aria-controls":J[27]},ie[0]&134217728&&{"aria-describedby":J[27]},ie[0]&196608&&po(J[16]&&J[17]!=null?{placeholder:J[17]}:{}),ie[1]&1024&&po(fo(J[41],"input$"))]):{};!l&&ie[0]&1&&(l=!0,ke.value=J[0],qo(()=>l=!1)),!u&&ie[0]&8&&(u=!0,ke.files=J[3],qo(()=>u=!1)),!m&&ie[0]&16&&(m=!0,ke.dirty=J[4],qo(()=>m=!1)),!r&&ie[0]&2&&(r=!0,ke.invalid=J[1],qo(()=>r=!1)),o.$set(ke),J[21]!=null?X?(X.p(J,ie),ie[0]&2097152&&yt(X,1)):(X=p5(J),X.c(),yt(X,1),X.m(y.parentNode,y)):X&&(Dr(),At(X,1,1,()=>{X=null}),Mr()),ee&&ee.p&&(!b||ie[2]&268435456)&&dr(ee,Z,J,J[90],b?mr(Z,J[90],ie,H9):pr(J[90]),i5)},i(J){b||(yt(w,J),yt(x),yt(o.$$.fragment,J),yt(X),yt(ee,J),b=!0)},o(J){At(w,J),At(x),At(o.$$.fragment,J),At(X),At(ee,J),b=!1},d(J){w&&w.d(J),J&&Oe(e),x&&x.d(J),J&&Oe(t),i[63](null),Wi(o,J),J&&Oe(h),X&&X.d(J),J&&Oe(y),ee&&ee.d(J)}}}function oP(i){let e,t,o,l,u,m,r,h;const y=[{disabled:i[12]},{required:i[13]},{updateInvalid:i[19]},{"aria-controls":i[27]},{"aria-describedby":i[27]},fo(i[41],"input$")];function b(S){i[56](S)}function v(S){i[57](S)}function w(S){i[58](S)}let x={};for(let S=0;S<y.length;S+=1)x=qi(x,y[S]);i[0]!==void 0&&(x.value=i[0]),i[4]!==void 0&&(x.dirty=i[4]),i[1]!==void 0&&(x.invalid=i[1]),t=new B9({props:x}),i[55](t),wn.push(()=>Vo(t,"value",b)),wn.push(()=>Vo(t,"dirty",v)),wn.push(()=>Vo(t,"invalid",w)),t.$on("blur",i[59]),t.$on("focus",i[60]),t.$on("blur",i[61]),t.$on("focus",i[62]);const C=i[51].internalCounter,T=fr(C,i,i[90],r5);return{c(){e=ti("span"),Hi(t.$$.fragment),m=Xi(),T&&T.c(),this.h()},l(S){e=ii(S,"SPAN",{class:!0});var M=si(e);$i(t.$$.fragment,M),m=Yi(M),T&&T.l(M),M.forEach(Oe),this.h()},h(){oi(e,"class",r=rr({"mdc-text-field__resizer":!("input$resizable"in i[41])||i[41].input$resizable}))},m(S,M){Dt(S,e,M),Gi(t,e,null),Kt(e,m),T&&T.m(e,null),h=!0},p(S,M){const O=M[0]&134754304|M[1]&1024?wr(y,[M[0]&4096&&{disabled:S[12]},M[0]&8192&&{required:S[13]},M[0]&524288&&{updateInvalid:S[19]},M[0]&134217728&&{"aria-controls":S[27]},M[0]&134217728&&{"aria-describedby":S[27]},M[1]&1024&&po(fo(S[41],"input$"))]):{};!o&&M[0]&1&&(o=!0,O.value=S[0],qo(()=>o=!1)),!l&&M[0]&16&&(l=!0,O.dirty=S[4],qo(()=>l=!1)),!u&&M[0]&2&&(u=!0,O.invalid=S[1],qo(()=>u=!1)),t.$set(O),T&&T.p&&(!h||M[2]&268435456)&&dr(T,C,S,S[90],h?mr(C,S[90],M,W9):pr(S[90]),r5),(!h||M[1]&1024&&r!==(r=rr({"mdc-text-field__resizer":!("input$resizable"in S[41])||S[41].input$resizable})))&&oi(e,"class",r)},i(S){h||(yt(t.$$.fragment,S),yt(T,S),h=!0)},o(S){At(t.$$.fragment,S),At(T,S),h=!1},d(S){S&&Oe(e),i[55](null),Wi(t),T&&T.d(S)}}}function d5(i){let e,t;return e=new T9({props:{$$slots:{default:[sP]},$$scope:{ctx:i}}}),{c(){Hi(e.$$.fragment)},l(o){$i(e.$$.fragment,o)},m(o,l){Gi(e,o,l),t=!0},p(o,l){const u={};l[0]&1048576|l[2]&268435456&&(u.$$scope={dirty:l,ctx:o}),e.$set(u)},i(o){t||(yt(e.$$.fragment,o),t=!0)},o(o){At(e.$$.fragment,o),t=!1},d(o){Wi(e,o)}}}function sP(i){let e;return{c(){e=Cn(i[20])},l(t){e=En(t,i[20])},m(t,o){Dt(t,e,o)},p(t,o){o[0]&1048576&&ks(e,t[20])},d(t){t&&Oe(e)}}}function p5(i){let e,t;return e=new L9({props:{$$slots:{default:[aP]},$$scope:{ctx:i}}}),{c(){Hi(e.$$.fragment)},l(o){$i(e.$$.fragment,o)},m(o,l){Gi(e,o,l),t=!0},p(o,l){const u={};l[0]&2097152|l[2]&268435456&&(u.$$scope={dirty:l,ctx:o}),e.$set(u)},i(o){t||(yt(e.$$.fragment,o),t=!0)},o(o){At(e.$$.fragment,o),t=!1},d(o){Wi(e,o)}}}function aP(i){let e;return{c(){e=Cn(i[21])},l(t){e=En(t,i[21])},m(t,o){Dt(t,e,o)},p(t,o){o[0]&2097152&&ks(e,t[21])},d(t){t&&Oe(e)}}}function lP(i){let e;const t=i[51].trailingIcon,o=fr(t,i,i[90],t5);return{c(){o&&o.c()},l(l){o&&o.l(l)},m(l,u){o&&o.m(l,u),e=!0},p(l,u){o&&o.p&&(!e||u[2]&268435456)&&dr(o,t,l,l[90],e?mr(t,l[90],u,q9):pr(l[90]),t5)},i(l){e||(yt(o,l),e=!0)},o(l){At(o,l),e=!1},d(l){o&&o.d(l)}}}function m5(i){let e,t;const o=[fo(i[41],"ripple$")];let l={};for(let u=0;u<o.length;u+=1)l=qi(l,o[u]);return e=new S3({props:l}),i[72](e),{c(){Hi(e.$$.fragment)},l(u){$i(e.$$.fragment,u)},m(u,m){Gi(e,u,m),t=!0},p(u,m){const r=m[1]&1024?wr(o,[po(fo(u[41],"ripple$"))]):{};e.$set(r)},i(u){t||(yt(e.$$.fragment,u),t=!0)},o(u){At(e.$$.fragment,u),t=!1},d(u){i[72](null),Wi(e,u)}}}function g5(i){let e,t;const o=[fo(i[41],"helperLine$")];let l={$$slots:{default:[uP]},$$scope:{ctx:i}};for(let u=0;u<o.length;u+=1)l=qi(l,o[u]);return e=new I9({props:l}),e.$on("SMUITextfieldHelperText:id",i[85]),e.$on("SMUITextfieldHelperText:mount",i[86]),e.$on("SMUITextfieldHelperText:unmount",i[87]),e.$on("SMUITextfieldCharacterCounter:mount",i[88]),e.$on("SMUITextfieldCharacterCounter:unmount",i[89]),{c(){Hi(e.$$.fragment)},l(u){$i(e.$$.fragment,u)},m(u,m){Gi(e,u,m),t=!0},p(u,m){const r=m[1]&1024?wr(o,[po(fo(u[41],"helperLine$"))]):{};m[2]&268435456&&(r.$$scope={dirty:m,ctx:u}),e.$set(r)},i(u){t||(yt(e.$$.fragment,u),t=!0)},o(u){At(e.$$.fragment,u),t=!1},d(u){Wi(e,u)}}}function uP(i){let e;const t=i[51].helper,o=fr(t,i,i[90],Kb);return{c(){o&&o.c()},l(l){o&&o.l(l)},m(l,u){o&&o.m(l,u),e=!0},p(l,u){o&&o.p&&(!e||u[2]&268435456)&&dr(o,t,l,l[90],e?mr(t,l[90],u,z9):pr(l[90]),Kb)},i(l){e||(yt(o,l),e=!0)},o(l){At(o,l),e=!1},d(l){o&&o.d(l)}}}function cP(i){let e,t,o,l,u;const m=[J9,K9],r=[];function h(b,v){return b[36]?0:1}e=h(i),t=r[e]=m[e](i);let y=i[42].helper&&g5(i);return{c(){t.c(),o=Xi(),y&&y.c(),l=gn()},l(b){t.l(b),o=Yi(b),y&&y.l(b),l=gn()},m(b,v){r[e].m(b,v),Dt(b,o,v),y&&y.m(b,v),Dt(b,l,v),u=!0},p(b,v){t.p(b,v),b[42].helper?y?(y.p(b,v),v[1]&2048&&yt(y,1)):(y=g5(b),y.c(),yt(y,1),y.m(l.parentNode,l)):y&&(Dr(),At(y,1,1,()=>{y=null}),Mr())},i(b){u||(yt(t),yt(y),u=!0)},o(b){At(t),At(y),u=!1},d(b){r[e].d(b),b&&Oe(o),y&&y.d(b),b&&Oe(l)}}}const y5=([i,e])=>`${i}: ${e};`,_5=([i,e])=>`${i}: ${e};`;function hP(i,e,t){let o;const l=["use","class","style","ripple","disabled","required","textarea","variant","noLabel","label","type","value","files","invalid","updateInvalid","dirty","prefix","suffix","validateOnValueChange","useNativeValidation","withLeadingIcon","withTrailingIcon","input","floatingLabel","lineRipple","notchedOutline","focus","blur","layout","getElement"];let u=Zn(e,l),{$$slots:m={},$$scope:r}=e;const h=pg(m),{applyPassive:y}=p4,b=go(mo());let v=()=>{};function w(_t){return _t===v}let{use:x=[]}=e,{class:C=""}=e,{style:T=""}=e,{ripple:S=!0}=e,{disabled:M=!1}=e,{required:O=!1}=e,{textarea:V=!1}=e,{variant:X=V?"outlined":"standard"}=e,{noLabel:Z=!1}=e,{label:ee=void 0}=e,{type:J="text"}=e,{value:ie=u.input$emptyValueUndefined?void 0:v}=e,{files:ke=v}=e;const Le=!w(ie)||!w(ke);w(ie)&&(ie=void 0),w(ke)&&(ke=null);let{invalid:fe=v}=e,{updateInvalid:Te=w(fe)}=e;w(fe)&&(fe=!1);let{dirty:_e=!1}=e,{prefix:ve=void 0}=e,{suffix:rt=void 0}=e,{validateOnValueChange:nt=Te}=e,{useNativeValidation:Tt=Te}=e,{withLeadingIcon:We=v}=e,{withTrailingIcon:be=v}=e,{input:Ce=void 0}=e,{floatingLabel:Be=void 0}=e,{lineRipple:le=void 0}=e,{notchedOutline:Ee=void 0}=e,he,me,Fe={},Xe={},lt,Ye=!1,Ke=ds("SMUI:addLayoutListener"),Lt,$t,dt=new Promise(_t=>$t=_t),wt,bt,$e,Yt,li=ie;Ke&&(Lt=Ke(xi)),Ss(()=>{if(t(49,me=new E9({addClass:Ci,removeClass:Li,hasClass:Zt,registerTextFieldInteractionHandler:(_t,Ri)=>Jt().addEventListener(_t,Ri),deregisterTextFieldInteractionHandler:(_t,Ri)=>Jt().removeEventListener(_t,Ri),registerValidationAttributeChangeHandler:_t=>{const Ri=kn=>kn.map(xt=>xt.attributeName).filter(xt=>xt),Ii=new MutationObserver(kn=>{Tt&&_t(Ri(kn))}),In={attributes:!0};return Ce&&Ii.observe(Ce.getElement(),In),Ii},deregisterValidationAttributeChangeHandler:_t=>{_t.disconnect()},getNativeInput:()=>{var _t;return(_t=Ce==null?void 0:Ce.getElement())!==null&&_t!==void 0?_t:null},setInputAttr:(_t,Ri)=>{Ce==null||Ce.addAttr(_t,Ri)},removeInputAttr:_t=>{Ce==null||Ce.removeAttr(_t)},isFocused:()=>document.activeElement===(Ce==null?void 0:Ce.getElement()),registerInputInteractionHandler:(_t,Ri)=>{Ce==null||Ce.getElement().addEventListener(_t,Ri,y())},deregisterInputInteractionHandler:(_t,Ri)=>{Ce==null||Ce.getElement().removeEventListener(_t,Ri,y())},floatLabel:_t=>Be&&Be.float(_t),getLabelWidth:()=>Be?Be.getWidth():0,hasLabel:()=>!!Be,shakeLabel:_t=>Be&&Be.shake(_t),setLabelRequired:_t=>Be&&Be.setRequired(_t),activateLineRipple:()=>le&&le.activate(),deactivateLineRipple:()=>le&&le.deactivate(),setLineRippleTransformOrigin:_t=>le&&le.setRippleCenter(_t),closeOutline:()=>Ee&&Ee.closeNotch(),hasOutline:()=>!!Ee,notchOutline:_t=>Ee&&Ee.notch(_t)},{get helperText(){return $e},get characterCounter(){return Yt},get leadingIcon(){return wt},get trailingIcon(){return bt}})),Le){if(Ce==null)throw new Error("SMUI Textfield initialized without Input component.");me.init()}else xx().then(()=>{if(Ce==null)throw new Error("SMUI Textfield initialized without Input component.");me.init()});return $t(),()=>{me.destroy()}}),Lc(()=>{Lt&&Lt()});function Zt(_t){var Ri;return _t in Fe?(Ri=Fe[_t])!==null&&Ri!==void 0?Ri:null:Jt().classList.contains(_t)}function Ci(_t){Fe[_t]||t(25,Fe[_t]=!0,Fe)}function Li(_t){(!(_t in Fe)||Fe[_t])&&t(25,Fe[_t]=!1,Fe)}function Vt(_t,Ri){Xe[_t]!=Ri&&(Ri===""||Ri==null?(delete Xe[_t],t(26,Xe)):t(26,Xe[_t]=Ri,Xe))}function mi(){Ce==null||Ce.focus()}function Qi(){Ce==null||Ce.blur()}function xi(){if(me){const _t=me.shouldFloat;me.notchOutline(_t)}}function Jt(){return he}function Me(_t){wn[_t?"unshift":"push"](()=>{Be=_t,t(5,Be)})}function Q(_t){wn[_t?"unshift":"push"](()=>{Be=_t,t(5,Be)})}function ae(_t){wn[_t?"unshift":"push"](()=>{Ee=_t,t(7,Ee)})}function et(_t){wn[_t?"unshift":"push"](()=>{Ce=_t,t(2,Ce)})}function vt(_t){ie=_t,t(0,ie)}function Wt(_t){_e=_t,t(4,_e)}function di(_t){fe=_t,t(1,fe),t(49,me),t(19,Te)}const xn=()=>t(28,Ye=!1),Mn=()=>t(28,Ye=!0),fn=_t=>So(he,"blur",_t),Bi=_t=>So(he,"focus",_t);function en(_t){wn[_t?"unshift":"push"](()=>{Ce=_t,t(2,Ce)})}function Xn(_t){ie=_t,t(0,ie)}function Yn(_t){ke=_t,t(3,ke)}function Kr(_t){_e=_t,t(4,_e)}function jn(_t){fe=_t,t(1,fe),t(49,me),t(19,Te)}const cn=()=>t(28,Ye=!1),mn=()=>t(28,Ye=!0),er=_t=>So(he,"blur",_t),yn=_t=>So(he,"focus",_t);function Ln(_t){wn[_t?"unshift":"push"](()=>{le=_t,t(6,le)})}function lr(_t){wn[_t?"unshift":"push"](()=>{he=_t,t(24,he)})}const oo=_t=>t(29,wt=_t.detail),ln=()=>t(29,wt=void 0),qe=_t=>t(30,bt=_t.detail),To=()=>t(30,bt=void 0),bo=_t=>t(32,Yt=_t.detail),co=()=>t(32,Yt=void 0);function Pe(_t){wn[_t?"unshift":"push"](()=>{he=_t,t(24,he)})}const Ie=_t=>t(29,wt=_t.detail),He=()=>t(29,wt=void 0),ct=_t=>t(30,bt=_t.detail),gt=()=>t(30,bt=void 0),Rt=_t=>t(27,lt=_t.detail),Ge=_t=>t(31,$e=_t.detail),Ht=()=>{t(27,lt=void 0),t(31,$e=void 0)},Bt=_t=>t(32,Yt=_t.detail),ei=()=>t(32,Yt=void 0);return i.$$set=_t=>{e=qi(qi({},e),uo(_t)),t(41,u=Zn(e,l)),"use"in _t&&t(8,x=_t.use),"class"in _t&&t(9,C=_t.class),"style"in _t&&t(10,T=_t.style),"ripple"in _t&&t(11,S=_t.ripple),"disabled"in _t&&t(12,M=_t.disabled),"required"in _t&&t(13,O=_t.required),"textarea"in _t&&t(14,V=_t.textarea),"variant"in _t&&t(15,X=_t.variant),"noLabel"in _t&&t(16,Z=_t.noLabel),"label"in _t&&t(17,ee=_t.label),"type"in _t&&t(18,J=_t.type),"value"in _t&&t(0,ie=_t.value),"files"in _t&&t(3,ke=_t.files),"invalid"in _t&&t(1,fe=_t.invalid),"updateInvalid"in _t&&t(19,Te=_t.updateInvalid),"dirty"in _t&&t(4,_e=_t.dirty),"prefix"in _t&&t(20,ve=_t.prefix),"suffix"in _t&&t(21,rt=_t.suffix),"validateOnValueChange"in _t&&t(43,nt=_t.validateOnValueChange),"useNativeValidation"in _t&&t(44,Tt=_t.useNativeValidation),"withLeadingIcon"in _t&&t(22,We=_t.withLeadingIcon),"withTrailingIcon"in _t&&t(23,be=_t.withTrailingIcon),"input"in _t&&t(2,Ce=_t.input),"floatingLabel"in _t&&t(5,Be=_t.floatingLabel),"lineRipple"in _t&&t(6,le=_t.lineRipple),"notchedOutline"in _t&&t(7,Ee=_t.notchedOutline),"$$scope"in _t&&t(90,r=_t.$$scope)},i.$$.update=()=>{if(i.$$.dirty[0]&4&&t(33,o=Ce&&Ce.getElement()),i.$$.dirty[0]&524290|i.$$.dirty[1]&262144&&me&&me.isValid()!==!fe&&(Te?t(1,fe=!me.isValid()):me.setValid(!fe)),i.$$.dirty[1]&266240&&me&&me.getValidateOnValueChange()!==nt&&me.setValidateOnValueChange(w(nt)?!1:nt),i.$$.dirty[1]&270336&&me&&me.setUseNativeValidation(w(Tt)?!0:Tt),i.$$.dirty[0]&4096|i.$$.dirty[1]&262144&&me&&me.setDisabled(M),i.$$.dirty[0]&1|i.$$.dirty[1]&786432&&me&&Le&&li!==ie){t(50,li=ie);const _t=`${ie}`;me.getValue()!==_t&&me.setValue(_t)}},[ie,fe,Ce,ke,_e,Be,le,Ee,x,C,T,S,M,O,V,X,Z,ee,J,Te,ve,rt,We,be,he,Fe,Xe,lt,Ye,wt,bt,$e,Yt,o,b,w,Le,dt,Ci,Li,Vt,u,h,nt,Tt,mi,Qi,xi,Jt,me,li,m,Me,Q,ae,et,vt,Wt,di,xn,Mn,fn,Bi,en,Xn,Yn,Kr,jn,cn,mn,er,yn,Ln,lr,oo,ln,qe,To,bo,co,Pe,Ie,He,ct,gt,Rt,Ge,Ht,Bt,ei,r]}class _f extends xr{constructor(e){super(),Ar(this,e,hP,cP,br,{use:8,class:9,style:10,ripple:11,disabled:12,required:13,textarea:14,variant:15,noLabel:16,label:17,type:18,value:0,files:3,invalid:1,updateInvalid:19,dirty:4,prefix:20,suffix:21,validateOnValueChange:43,useNativeValidation:44,withLeadingIcon:22,withTrailingIcon:23,input:2,floatingLabel:5,lineRipple:6,notchedOutline:7,focus:45,blur:46,layout:47,getElement:48},null,[-1,-1,-1,-1])}get focus(){return this.$$.ctx[45]}get blur(){return this.$$.ctx[46]}get layout(){return this.$$.ctx[47]}get getElement(){return this.$$.ctx[48]}}function v5(i,e,t){const o=i.slice();return o[19]=e[t],o[22]=e,o[23]=t,o}function b5(i,e,t){const o=i.slice();return o[19]=e[t],o[20]=e,o[21]=t,o}function w5(i,e,t){const o=i.slice();return o[24]=e[t],o}function fP(i){let e,t,o,l,u,m,r,h,y,b,v,w,x,C,T,S;function M(Le){i[10](Le)}let O={label:"Means of Transport",style:"width:100%",$$slots:{default:[pP]},$$scope:{ctx:i}};i[4]!==void 0&&(O.value=i[4]),o=new E3({props:O}),wn.push(()=>Vo(o,"value",M));function V(Le){i[11](Le)}let X={label:"Longitude",readonly:!0};i[1]!==void 0&&(X.value=i[1]),r=new _f({props:X}),wn.push(()=>Vo(r,"value",V));function Z(Le){i[12](Le)}let ee={label:"Latitude",readonly:!0};i[2]!==void 0&&(ee.value=i[2]),b=new _f({props:ee}),wn.push(()=>Vo(b,"value",Z));const J=[gP,mP],ie=[];function ke(Le,fe){return Le[0]===Pu.Time?0:Le[0]===Pu.Distance?1:-1}return~(x=ke(i))&&(C=ie[x]=J[x](i)),{c(){e=ti("div"),t=ti("div"),Hi(o.$$.fragment),u=Xi(),m=ti("div"),Hi(r.$$.fragment),y=Xi(),Hi(b.$$.fragment),w=Xi(),C&&C.c(),T=gn(),this.h()},l(Le){e=ii(Le,"DIV",{class:!0});var fe=si(e);t=ii(fe,"DIV",{});var Te=si(t);$i(o.$$.fragment,Te),Te.forEach(Oe),u=Yi(fe),m=ii(fe,"DIV",{style:!0});var _e=si(m);$i(r.$$.fragment,_e),y=Yi(_e),$i(b.$$.fragment,_e),_e.forEach(Oe),fe.forEach(Oe),w=Yi(Le),C&&C.l(Le),T=gn(),this.h()},h(){oc(m,"display","inline-flex"),oi(e,"class","transport-select svelte-1dgq3qf")},m(Le,fe){Dt(Le,e,fe),Kt(e,t),Gi(o,t,null),Kt(e,u),Kt(e,m),Gi(r,m,null),Kt(m,y),Gi(b,m,null),Dt(Le,w,fe),~x&&ie[x].m(Le,fe),Dt(Le,T,fe),S=!0},p(Le,fe){const Te={};fe&134217728&&(Te.$$scope={dirty:fe,ctx:Le}),!l&&fe&16&&(l=!0,Te.value=Le[4],qo(()=>l=!1)),o.$set(Te);const _e={};!h&&fe&2&&(h=!0,_e.value=Le[1],qo(()=>h=!1)),r.$set(_e);const ve={};!v&&fe&4&&(v=!0,ve.value=Le[2],qo(()=>v=!1)),b.$set(ve);let rt=x;x=ke(Le),x===rt?~x&&ie[x].p(Le,fe):(C&&(Dr(),At(ie[rt],1,1,()=>{ie[rt]=null}),Mr()),~x?(C=ie[x],C?C.p(Le,fe):(C=ie[x]=J[x](Le),C.c()),yt(C,1),C.m(T.parentNode,T)):C=null)},i(Le){S||(yt(o.$$.fragment,Le),yt(r.$$.fragment,Le),yt(b.$$.fragment,Le),yt(C),S=!0)},o(Le){At(o.$$.fragment,Le),At(r.$$.fragment,Le),At(b.$$.fragment,Le),At(C),S=!1},d(Le){Le&&Oe(e),Wi(o),Wi(r),Wi(b),Le&&Oe(w),~x&&ie[x].d(Le),Le&&Oe(T)}}}function dP(i){let e=i[24].label+"",t;return{c(){t=Cn(e)},l(o){t=En(o,e)},m(o,l){Dt(o,t,l)},p:is,d(o){o&&Oe(t)}}}function x5(i){let e,t;return e=new I3({props:{value:i[24].value,$$slots:{default:[dP]},$$scope:{ctx:i}}}),{c(){Hi(e.$$.fragment)},l(o){$i(e.$$.fragment,o)},m(o,l){Gi(e,o,l),t=!0},p(o,l){const u={};l&134217728&&(u.$$scope={dirty:l,ctx:o}),e.$set(u)},i(o){t||(yt(e.$$.fragment,o),t=!0)},o(o){At(e.$$.fragment,o),t=!1},d(o){Wi(e,o)}}}function pP(i){let e,t,o=i[5],l=[];for(let m=0;m<o.length;m+=1)l[m]=x5(w5(i,o,m));const u=m=>At(l[m],1,1,()=>{l[m]=null});return{c(){for(let m=0;m<l.length;m+=1)l[m].c();e=gn()},l(m){for(let r=0;r<l.length;r+=1)l[r].l(m);e=gn()},m(m,r){for(let h=0;h<l.length;h+=1)l[h].m(m,r);Dt(m,e,r),t=!0},p(m,r){if(r&32){o=m[5];let h;for(h=0;h<o.length;h+=1){const y=w5(m,o,h);l[h]?(l[h].p(y,r),yt(l[h],1)):(l[h]=x5(y),l[h].c(),yt(l[h],1),l[h].m(e.parentNode,e))}for(Dr(),h=o.length;h<l.length;h+=1)u(h);Mr()}},i(m){if(!t){for(let r=0;r<o.length;r+=1)yt(l[r]);t=!0}},o(m){l=l.filter(Boolean);for(let r=0;r<l.length;r+=1)At(l[r]);t=!1},d(m){Ja(l,m),m&&Oe(e)}}}function mP(i){let e,t,o,l,u,m,r,h,y,b,v,w=i[3],x=[];for(let T=0;T<w.length;T+=1)x[T]=A5(v5(i,w,T));const C=T=>At(x[T],1,1,()=>{x[T]=null});return r=new Oh({props:{variant:"raised",color:"secondary",style:"width:100%",$$slots:{default:[vP]},$$scope:{ctx:i}}}),r.$on("click",i[17]),b=new Oh({props:{variant:"raised",color:"primary",style:"width:100%",$$slots:{default:[xP]},$$scope:{ctx:i}}}),b.$on("click",i[18]),{c(){e=ti("p"),t=Cn("Distance Isochrone"),o=Xi(),l=ti("div");for(let T=0;T<x.length;T+=1)x[T].c();u=Xi(),m=ti("div"),Hi(r.$$.fragment),h=Xi(),y=ti("div"),Hi(b.$$.fragment),this.h()},l(T){e=ii(T,"P",{});var S=si(e);t=En(S,"Distance Isochrone"),S.forEach(Oe),o=Yi(T),l=ii(T,"DIV",{style:!0});var M=si(l);for(let X=0;X<x.length;X+=1)x[X].l(M);M.forEach(Oe),u=Yi(T),m=ii(T,"DIV",{class:!0});var O=si(m);$i(r.$$.fragment,O),O.forEach(Oe),h=Yi(T),y=ii(T,"DIV",{class:!0});var V=si(y);$i(b.$$.fragment,V),V.forEach(Oe),this.h()},h(){oc(l,"display","inline-flex"),oi(m,"class","tool-button svelte-1dgq3qf"),oi(y,"class","tool-button svelte-1dgq3qf")},m(T,S){Dt(T,e,S),Kt(e,t),Dt(T,o,S),Dt(T,l,S);for(let M=0;M<x.length;M+=1)x[M].m(l,null);Dt(T,u,S),Dt(T,m,S),Gi(r,m,null),Dt(T,h,S),Dt(T,y,S),Gi(b,y,null),v=!0},p(T,S){if(S&8){w=T[3];let V;for(V=0;V<w.length;V+=1){const X=v5(T,w,V);x[V]?(x[V].p(X,S),yt(x[V],1)):(x[V]=A5(X),x[V].c(),yt(x[V],1),x[V].m(l,null))}for(Dr(),V=w.length;V<x.length;V+=1)C(V);Mr()}const M={};S&134217728&&(M.$$scope={dirty:S,ctx:T}),r.$set(M);const O={};S&134217728&&(O.$$scope={dirty:S,ctx:T}),b.$set(O)},i(T){if(!v){for(let S=0;S<w.length;S+=1)yt(x[S]);yt(r.$$.fragment,T),yt(b.$$.fragment,T),v=!0}},o(T){x=x.filter(Boolean);for(let S=0;S<x.length;S+=1)At(x[S]);At(r.$$.fragment,T),At(b.$$.fragment,T),v=!1},d(T){T&&Oe(e),T&&Oe(o),T&&Oe(l),Ja(x,T),T&&Oe(u),T&&Oe(m),Wi(r),T&&Oe(h),T&&Oe(y),Wi(b)}}}function gP(i){let e,t,o,l,u,m,r,h,y=i[3],b=[];for(let w=0;w<y.length;w+=1)b[w]=k5(b5(i,y,w));const v=w=>At(b[w],1,1,()=>{b[w]=null});return l=new Oh({props:{variant:"raised",color:"secondary",style:"width:100%",$$slots:{default:[SP]},$$scope:{ctx:i}}}),l.$on("click",i[14]),r=new Oh({props:{variant:"raised",color:"primary",style:"width:100%",$$slots:{default:[IP]},$$scope:{ctx:i}}}),r.$on("click",i[15]),{c(){e=ti("div");for(let w=0;w<b.length;w+=1)b[w].c();t=Xi(),o=ti("div"),Hi(l.$$.fragment),u=Xi(),m=ti("div"),Hi(r.$$.fragment),this.h()},l(w){e=ii(w,"DIV",{style:!0});var x=si(e);for(let S=0;S<b.length;S+=1)b[S].l(x);x.forEach(Oe),t=Yi(w),o=ii(w,"DIV",{class:!0});var C=si(o);$i(l.$$.fragment,C),C.forEach(Oe),u=Yi(w),m=ii(w,"DIV",{class:!0});var T=si(m);$i(r.$$.fragment,T),T.forEach(Oe),this.h()},h(){oc(e,"display","inline-flex"),oi(o,"class","tool-button svelte-1dgq3qf"),oi(m,"class","tool-button svelte-1dgq3qf")},m(w,x){Dt(w,e,x);for(let C=0;C<b.length;C+=1)b[C].m(e,null);Dt(w,t,x),Dt(w,o,x),Gi(l,o,null),Dt(w,u,x),Dt(w,m,x),Gi(r,m,null),h=!0},p(w,x){if(x&8){y=w[3];let S;for(S=0;S<y.length;S+=1){const M=b5(w,y,S);b[S]?(b[S].p(M,x),yt(b[S],1)):(b[S]=k5(M),b[S].c(),yt(b[S],1),b[S].m(e,null))}for(Dr(),S=y.length;S<b.length;S+=1)v(S);Mr()}const C={};x&134217728&&(C.$$scope={dirty:x,ctx:w}),l.$set(C);const T={};x&134217728&&(T.$$scope={dirty:x,ctx:w}),r.$set(T)},i(w){if(!h){for(let x=0;x<y.length;x+=1)yt(b[x]);yt(l.$$.fragment,w),yt(r.$$.fragment,w),h=!0}},o(w){b=b.filter(Boolean);for(let x=0;x<b.length;x+=1)At(b[x]);At(l.$$.fragment,w),At(r.$$.fragment,w),h=!1},d(w){w&&Oe(e),Ja(b,w),w&&Oe(t),w&&Oe(o),Wi(l),w&&Oe(u),w&&Oe(m),Wi(r)}}}function A5(i){let e,t,o;function l(m){i[16](m,i[19])}let u={label:i[19].distance+" km",type:"number"};return i[19].distance!==void 0&&(u.value=i[19].distance),e=new _f({props:u}),wn.push(()=>Vo(e,"value",l)),{c(){Hi(e.$$.fragment)},l(m){$i(e.$$.fragment,m)},m(m,r){Gi(e,m,r),o=!0},p(m,r){i=m;const h={};r&8&&(h.label=i[19].distance+" km"),!t&&r&8&&(t=!0,h.value=i[19].distance,qo(()=>t=!1)),e.$set(h)},i(m){o||(yt(e.$$.fragment,m),o=!0)},o(m){At(e.$$.fragment,m),o=!1},d(m){Wi(e,m)}}}function yP(i){let e;return{c(){e=Cn("delete")},l(t){e=En(t,"delete")},m(t,o){Dt(t,e,o)},d(t){t&&Oe(e)}}}function _P(i){let e;return{c(){e=Cn("Clear")},l(t){e=En(t,"Clear")},m(t,o){Dt(t,e,o)},d(t){t&&Oe(e)}}}function vP(i){let e,t,o,l;return e=new tl({props:{class:"material-icons",$$slots:{default:[yP]},$$scope:{ctx:i}}}),o=new sh({props:{$$slots:{default:[_P]},$$scope:{ctx:i}}}),{c(){Hi(e.$$.fragment),t=Xi(),Hi(o.$$.fragment)},l(u){$i(e.$$.fragment,u),t=Yi(u),$i(o.$$.fragment,u)},m(u,m){Gi(e,u,m),Dt(u,t,m),Gi(o,u,m),l=!0},p(u,m){const r={};m&134217728&&(r.$$scope={dirty:m,ctx:u}),e.$set(r);const h={};m&134217728&&(h.$$scope={dirty:m,ctx:u}),o.$set(h)},i(u){l||(yt(e.$$.fragment,u),yt(o.$$.fragment,u),l=!0)},o(u){At(e.$$.fragment,u),At(o.$$.fragment,u),l=!1},d(u){Wi(e,u),u&&Oe(t),Wi(o,u)}}}function bP(i){let e;return{c(){e=Cn("straighten")},l(t){e=En(t,"straighten")},m(t,o){Dt(t,e,o)},d(t){t&&Oe(e)}}}function wP(i){let e;return{c(){e=Cn("Calculate")},l(t){e=En(t,"Calculate")},m(t,o){Dt(t,e,o)},d(t){t&&Oe(e)}}}function xP(i){let e,t,o,l;return e=new tl({props:{class:"material-icons",$$slots:{default:[bP]},$$scope:{ctx:i}}}),o=new sh({props:{$$slots:{default:[wP]},$$scope:{ctx:i}}}),{c(){Hi(e.$$.fragment),t=Xi(),Hi(o.$$.fragment)},l(u){$i(e.$$.fragment,u),t=Yi(u),$i(o.$$.fragment,u)},m(u,m){Gi(e,u,m),Dt(u,t,m),Gi(o,u,m),l=!0},p(u,m){const r={};m&134217728&&(r.$$scope={dirty:m,ctx:u}),e.$set(r);const h={};m&134217728&&(h.$$scope={dirty:m,ctx:u}),o.$set(h)},i(u){l||(yt(e.$$.fragment,u),yt(o.$$.fragment,u),l=!0)},o(u){At(e.$$.fragment,u),At(o.$$.fragment,u),l=!1},d(u){Wi(e,u),u&&Oe(t),Wi(o,u)}}}function k5(i){let e,t,o;function l(m){i[13](m,i[19])}let u={label:i[19].time+" min",type:"number"};return i[19].time!==void 0&&(u.value=i[19].time),e=new _f({props:u}),wn.push(()=>Vo(e,"value",l)),{c(){Hi(e.$$.fragment)},l(m){$i(e.$$.fragment,m)},m(m,r){Gi(e,m,r),o=!0},p(m,r){i=m;const h={};r&8&&(h.label=i[19].time+" min"),!t&&r&8&&(t=!0,h.value=i[19].time,qo(()=>t=!1)),e.$set(h)},i(m){o||(yt(e.$$.fragment,m),o=!0)},o(m){At(e.$$.fragment,m),o=!1},d(m){Wi(e,m)}}}function AP(i){let e;return{c(){e=Cn("delete")},l(t){e=En(t,"delete")},m(t,o){Dt(t,e,o)},d(t){t&&Oe(e)}}}function kP(i){let e;return{c(){e=Cn("Clear")},l(t){e=En(t,"Clear")},m(t,o){Dt(t,e,o)},d(t){t&&Oe(e)}}}function SP(i){let e,t,o,l;return e=new tl({props:{class:"material-icons",$$slots:{default:[AP]},$$scope:{ctx:i}}}),o=new sh({props:{$$slots:{default:[kP]},$$scope:{ctx:i}}}),{c(){Hi(e.$$.fragment),t=Xi(),Hi(o.$$.fragment)},l(u){$i(e.$$.fragment,u),t=Yi(u),$i(o.$$.fragment,u)},m(u,m){Gi(e,u,m),Dt(u,t,m),Gi(o,u,m),l=!0},p(u,m){const r={};m&134217728&&(r.$$scope={dirty:m,ctx:u}),e.$set(r);const h={};m&134217728&&(h.$$scope={dirty:m,ctx:u}),o.$set(h)},i(u){l||(yt(e.$$.fragment,u),yt(o.$$.fragment,u),l=!0)},o(u){At(e.$$.fragment,u),At(o.$$.fragment,u),l=!1},d(u){Wi(e,u),u&&Oe(t),Wi(o,u)}}}function CP(i){let e;return{c(){e=Cn("access_time")},l(t){e=En(t,"access_time")},m(t,o){Dt(t,e,o)},d(t){t&&Oe(e)}}}function EP(i){let e;return{c(){e=Cn("Calculate")},l(t){e=En(t,"Calculate")},m(t,o){Dt(t,e,o)},d(t){t&&Oe(e)}}}function IP(i){let e,t,o,l;return e=new tl({props:{class:"material-icons",$$slots:{default:[CP]},$$scope:{ctx:i}}}),o=new sh({props:{$$slots:{default:[EP]},$$scope:{ctx:i}}}),{c(){Hi(e.$$.fragment),t=Xi(),Hi(o.$$.fragment)},l(u){$i(e.$$.fragment,u),t=Yi(u),$i(o.$$.fragment,u)},m(u,m){Gi(e,u,m),Dt(u,t,m),Gi(o,u,m),l=!0},p(u,m){const r={};m&134217728&&(r.$$scope={dirty:m,ctx:u}),e.$set(r);const h={};m&134217728&&(h.$$scope={dirty:m,ctx:u}),o.$set(h)},i(u){l||(yt(e.$$.fragment,u),yt(o.$$.fragment,u),l=!0)},o(u){At(e.$$.fragment,u),At(o.$$.fragment,u),l=!1},d(u){Wi(e,u),u&&Oe(t),Wi(o,u)}}}function TP(i){let e,t,o=zr.valhalla&&fP(i);return{c(){o&&o.c(),e=gn()},l(l){o&&o.l(l),e=gn()},m(l,u){o&&o.m(l,u),Dt(l,e,u),t=!0},p(l,[u]){zr.valhalla&&o.p(l,u)},i(l){t||(yt(o),t=!0)},o(l){At(o),t=!1},d(l){o&&o.d(l),l&&Oe(e)}}}function LP(i,e,t){var ee;let o,l;Wo(i,jm,J=>t(8,o=J)),Wo(i,Mu,J=>t(9,l=J));let{contourType:u}=e,m,r,h=(ee=zr.valhalla)==null?void 0:ee.options.Contours;h||(h=[{time:5,distance:1,color:"ff0000"},{time:10,distance:3,color:"ffff00"},{time:15,distance:5,color:"0000ff"}]);let y=[{value:K0.Walking,label:"Walking"},{value:K0.Bicycle,label:"Bicycle"},{value:K0.Car,label:"Car"}],b=y[0].value;const v=J=>{o[J].getIsochrone(Number(m),Number(r),J,b,JSON.parse(JSON.stringify(h)))},w=()=>{o[u].clearFeatures()};function x(J){b=J,t(4,b)}function C(J){m=J,t(1,m),t(9,l),t(8,o),t(0,u)}function T(J){r=J,t(2,r),t(9,l),t(8,o),t(0,u)}function S(J,ie){i.$$.not_equal(ie.time,J)&&(ie.time=J,t(3,h))}const M=()=>w(),O=()=>v(Pu.Time);function V(J,ie){i.$$.not_equal(ie.distance,J)&&(ie.distance=J,t(3,h))}const X=()=>w(),Z=()=>v(Pu.Distance);return i.$$set=J=>{"contourType"in J&&t(0,u=J.contourType)},i.$$.update=()=>{if(i.$$.dirty&769&&l){if(!o){const J={};jm.update(()=>J)}o[u]||bl(jm,o[u]=new UC(l,zr.valhalla.url),o),t(1,m=l.getCenter().lng),t(2,r=l.getCenter().lat),l.on("moveend",()=>{t(1,m=l.getCenter().lng),t(2,r=l.getCenter().lat)})}},[u,m,r,h,b,y,v,w,o,l,x,C,T,S,M,O,V,X,Z]}class T3 extends xr{constructor(e){super(),Ar(this,e,LP,TP,br,{contourType:0})}}function S5(i,e,t){const o=i.slice();return o[19]=e[t],o}function PP(i){let e,t,o,l,u,m,r,h,y;function b(x){i[7](x)}let v={label:"Means of Transport",style:"width:100%",$$slots:{default:[DP]},$$scope:{ctx:i}};i[0]!==void 0&&(v.value=i[0]),t=new E3({props:v}),wn.push(()=>Vo(t,"value",b)),m=new Oh({props:{color:"primary",variant:"raised",style:"width:100%",$$slots:{default:[jP]},$$scope:{ctx:i}}}),m.$on("click",i[5]);let w=i[1]&&i[1].length>0&&E5(i);return{c(){e=ti("div"),Hi(t.$$.fragment),l=Xi(),u=ti("div"),Hi(m.$$.fragment),r=Xi(),w&&w.c(),h=gn(),this.h()},l(x){e=ii(x,"DIV",{});var C=si(e);$i(t.$$.fragment,C),C.forEach(Oe),l=Yi(x),u=ii(x,"DIV",{class:!0,style:!0});var T=si(u);$i(m.$$.fragment,T),T.forEach(Oe),r=Yi(x),w&&w.l(x),h=gn(),this.h()},h(){oi(u,"class","tool-button svelte-1ul6seo"),oc(u,"display","flex"),oc(u,"align-items","center")},m(x,C){Dt(x,e,C),Gi(t,e,null),Dt(x,l,C),Dt(x,u,C),Gi(m,u,null),Dt(x,r,C),w&&w.m(x,C),Dt(x,h,C),y=!0},p(x,C){const T={};C&4194304&&(T.$$scope={dirty:C,ctx:x}),!o&&C&1&&(o=!0,T.value=x[0],qo(()=>o=!1)),t.$set(T);const S={};C&4194308&&(S.$$scope={dirty:C,ctx:x}),m.$set(S),x[1]&&x[1].length>0?w?(w.p(x,C),C&2&&yt(w,1)):(w=E5(x),w.c(),yt(w,1),w.m(h.parentNode,h)):w&&(Dr(),At(w,1,1,()=>{w=null}),Mr())},i(x){y||(yt(t.$$.fragment,x),yt(m.$$.fragment,x),yt(w),y=!0)},o(x){At(t.$$.fragment,x),At(m.$$.fragment,x),At(w),y=!1},d(x){x&&Oe(e),Wi(t),x&&Oe(l),x&&Oe(u),Wi(m),x&&Oe(r),w&&w.d(x),x&&Oe(h)}}}function MP(i){let e=i[19].label+"",t;return{c(){t=Cn(e)},l(o){t=En(o,e)},m(o,l){Dt(o,t,l)},p:is,d(o){o&&Oe(t)}}}function C5(i){let e,t;return e=new I3({props:{value:i[19].value,$$slots:{default:[MP]},$$scope:{ctx:i}}}),{c(){Hi(e.$$.fragment)},l(o){$i(e.$$.fragment,o)},m(o,l){Gi(e,o,l),t=!0},p(o,l){const u={};l&4194304&&(u.$$scope={dirty:l,ctx:o}),e.$set(u)},i(o){t||(yt(e.$$.fragment,o),t=!0)},o(o){At(e.$$.fragment,o),t=!1},d(o){Wi(e,o)}}}function DP(i){let e,t,o=i[4],l=[];for(let m=0;m<o.length;m+=1)l[m]=C5(S5(i,o,m));const u=m=>At(l[m],1,1,()=>{l[m]=null});return{c(){for(let m=0;m<l.length;m+=1)l[m].c();e=gn()},l(m){for(let r=0;r<l.length;r+=1)l[r].l(m);e=gn()},m(m,r){for(let h=0;h<l.length;h+=1)l[h].m(m,r);Dt(m,e,r),t=!0},p(m,r){if(r&16){o=m[4];let h;for(h=0;h<o.length;h+=1){const y=S5(m,o,h);l[h]?(l[h].p(y,r),yt(l[h],1)):(l[h]=C5(y),l[h].c(),yt(l[h],1),l[h].m(e.parentNode,e))}for(Dr(),h=o.length;h<l.length;h+=1)u(h);Mr()}},i(m){if(!t){for(let r=0;r<o.length;r+=1)yt(l[r]);t=!0}},o(m){l=l.filter(Boolean);for(let r=0;r<l.length;r+=1)At(l[r]);t=!1},d(m){Ja(l,m),m&&Oe(e)}}}function OP(i){let e;return{c(){e=Cn("route")},l(t){e=En(t,"route")},m(t,o){Dt(t,e,o)},d(t){t&&Oe(e)}}}function FP(i){let e;return{c(){e=Cn("close")},l(t){e=En(t,"close")},m(t,o){Dt(t,e,o)},d(t){t&&Oe(e)}}}function RP(i){let e;function t(u,m){return u[2]?FP:OP}let o=t(i),l=o(i);return{c(){l.c(),e=gn()},l(u){l.l(u),e=gn()},m(u,m){l.m(u,m),Dt(u,e,m)},p(u,m){o!==(o=t(u))&&(l.d(1),l=o(u),l&&(l.c(),l.m(e.parentNode,e)))},d(u){l.d(u),u&&Oe(e)}}}function BP(i){let e;return{c(){e=Cn("Start routing")},l(t){e=En(t,"Start routing")},m(t,o){Dt(t,e,o)},d(t){t&&Oe(e)}}}function zP(i){let e;return{c(){e=Cn("Stop routing")},l(t){e=En(t,"Stop routing")},m(t,o){Dt(t,e,o)},d(t){t&&Oe(e)}}}function NP(i){let e;function t(u,m){return u[2]?zP:BP}let o=t(i),l=o(i);return{c(){l.c(),e=gn()},l(u){l.l(u),e=gn()},m(u,m){l.m(u,m),Dt(u,e,m)},p(u,m){o!==(o=t(u))&&(l.d(1),l=o(u),l&&(l.c(),l.m(e.parentNode,e)))},d(u){l.d(u),u&&Oe(e)}}}function jP(i){let e,t,o,l;return e=new tl({props:{class:"material-icons",$$slots:{default:[RP]},$$scope:{ctx:i}}}),o=new sh({props:{$$slots:{default:[NP]},$$scope:{ctx:i}}}),{c(){Hi(e.$$.fragment),t=Xi(),Hi(o.$$.fragment)},l(u){$i(e.$$.fragment,u),t=Yi(u),$i(o.$$.fragment,u)},m(u,m){Gi(e,u,m),Dt(u,t,m),Gi(o,u,m),l=!0},p(u,m){const r={};m&4194308&&(r.$$scope={dirty:m,ctx:u}),e.$set(r);const h={};m&4194308&&(h.$$scope={dirty:m,ctx:u}),o.$set(h)},i(u){l||(yt(e.$$.fragment,u),yt(o.$$.fragment,u),l=!0)},o(u){At(e.$$.fragment,u),At(o.$$.fragment,u),l=!1},d(u){Wi(e,u),u&&Oe(t),Wi(o,u)}}}function E5(i){let e,t,o,l,u,m,r,h,y;t=new Oh({props:{variant:"raised",color:"secondary",style:"width:100%",$$slots:{default:[qP]},$$scope:{ctx:i}}}),t.$on("click",i[8]),u=new _f({props:{value:`${i[1][0].lng.toFixed(6)}, ${i[1][0].lat.toFixed(6)}`,label:"From",readonly:!0,style:"width: 50%"}});let b=i[1].length>1&&I5(i),v=i[3]&&T5(i);return{c(){e=ti("div"),Hi(t.$$.fragment),o=Xi(),l=ti("div"),Hi(u.$$.fragment),m=Xi(),b&&b.c(),r=Xi(),v&&v.c(),h=gn(),this.h()},l(w){e=ii(w,"DIV",{class:!0});var x=si(e);$i(t.$$.fragment,x),x.forEach(Oe),o=Yi(w),l=ii(w,"DIV",{style:!0});var C=si(l);$i(u.$$.fragment,C),m=Yi(C),b&&b.l(C),C.forEach(Oe),r=Yi(w),v&&v.l(w),h=gn(),this.h()},h(){oi(e,"class","sub-button tool-button svelte-1ul6seo"),oc(l,"display","inline-flex"),oc(l,"width","100%")},m(w,x){Dt(w,e,x),Gi(t,e,null),Dt(w,o,x),Dt(w,l,x),Gi(u,l,null),Kt(l,m),b&&b.m(l,null),Dt(w,r,x),v&&v.m(w,x),Dt(w,h,x),y=!0},p(w,x){const C={};x&4194304&&(C.$$scope={dirty:x,ctx:w}),t.$set(C);const T={};x&2&&(T.value=`${w[1][0].lng.toFixed(6)}, ${w[1][0].lat.toFixed(6)}`),u.$set(T),w[1].length>1?b?(b.p(w,x),x&2&&yt(b,1)):(b=I5(w),b.c(),yt(b,1),b.m(l,null)):b&&(Dr(),At(b,1,1,()=>{b=null}),Mr()),w[3]?v?(v.p(w,x),x&8&&yt(v,1)):(v=T5(w),v.c(),yt(v,1),v.m(h.parentNode,h)):v&&(Dr(),At(v,1,1,()=>{v=null}),Mr())},i(w){y||(yt(t.$$.fragment,w),yt(u.$$.fragment,w),yt(b),yt(v),y=!0)},o(w){At(t.$$.fragment,w),At(u.$$.fragment,w),At(b),At(v),y=!1},d(w){w&&Oe(e),Wi(t),w&&Oe(o),w&&Oe(l),Wi(u),b&&b.d(),w&&Oe(r),v&&v.d(w),w&&Oe(h)}}}function UP(i){let e;return{c(){e=Cn("delete")},l(t){e=En(t,"delete")},m(t,o){Dt(t,e,o)},d(t){t&&Oe(e)}}}function VP(i){let e;return{c(){e=Cn("Clear")},l(t){e=En(t,"Clear")},m(t,o){Dt(t,e,o)},d(t){t&&Oe(e)}}}function qP(i){let e,t,o,l;return e=new tl({props:{class:"material-icons",$$slots:{default:[UP]},$$scope:{ctx:i}}}),o=new sh({props:{$$slots:{default:[VP]},$$scope:{ctx:i}}}),{c(){Hi(e.$$.fragment),t=Xi(),Hi(o.$$.fragment)},l(u){$i(e.$$.fragment,u),t=Yi(u),$i(o.$$.fragment,u)},m(u,m){Gi(e,u,m),Dt(u,t,m),Gi(o,u,m),l=!0},p(u,m){const r={};m&4194304&&(r.$$scope={dirty:m,ctx:u}),e.$set(r);const h={};m&4194304&&(h.$$scope={dirty:m,ctx:u}),o.$set(h)},i(u){l||(yt(e.$$.fragment,u),yt(o.$$.fragment,u),l=!0)},o(u){At(e.$$.fragment,u),At(o.$$.fragment,u),l=!1},d(u){Wi(e,u),u&&Oe(t),Wi(o,u)}}}function I5(i){let e,t;return e=new _f({props:{value:`${i[1][i[1].length-1].lng.toFixed(6)}, ${i[1][i[1].length-1].lat.toFixed(6)}`,label:"To",readonly:!0,style:"width: 50%"}}),{c(){Hi(e.$$.fragment)},l(o){$i(e.$$.fragment,o)},m(o,l){Gi(e,o,l),t=!0},p(o,l){const u={};l&2&&(u.value=`${o[1][o[1].length-1].lng.toFixed(6)}, ${o[1][o[1].length-1].lat.toFixed(6)}`),e.$set(u)},i(o){t||(yt(e.$$.fragment,o),t=!0)},o(o){At(e.$$.fragment,o),t=!1},d(o){Wi(e,o)}}}function T5(i){let e,t,o,l,u;return t=new _f({props:{value:`${i[3].length} km`,label:"Length",readonly:!0,style:"width: 50%"}}),l=new _f({props:{value:`${i[3].time} min`,label:"Time",readonly:!0,style:"width: 50%"}}),{c(){e=ti("div"),Hi(t.$$.fragment),o=Xi(),Hi(l.$$.fragment),this.h()},l(m){e=ii(m,"DIV",{style:!0});var r=si(e);$i(t.$$.fragment,r),o=Yi(r),$i(l.$$.fragment,r),r.forEach(Oe),this.h()},h(){oc(e,"display","inline-flex"),oc(e,"width","100%")},m(m,r){Dt(m,e,r),Gi(t,e,null),Kt(e,o),Gi(l,e,null),u=!0},p(m,r){const h={};r&8&&(h.value=`${m[3].length} km`),t.$set(h);const y={};r&8&&(y.value=`${m[3].time} min`),l.$set(y)},i(m){u||(yt(t.$$.fragment,m),yt(l.$$.fragment,m),u=!0)},o(m){At(t.$$.fragment,m),At(l.$$.fragment,m),u=!1},d(m){m&&Oe(e),Wi(t),Wi(l)}}}function HP(i){let e,t,o=zr.valhalla&&PP(i);return{c(){o&&o.c(),e=gn()},l(l){o&&o.l(l),e=gn()},m(l,u){o&&o.m(l,u),Dt(l,e,u),t=!0},p(l,[u]){zr.valhalla&&o.p(l,u)},i(l){t||(yt(o),t=!0)},o(l){At(o),t=!1},d(l){o&&o.d(l),l&&Oe(e)}}}const Uf="routing-controls-source-line",T2="routing-controls-layer-line",L2="routing-controls-layer-line-label",P2="routing-controls-layer-symbol",Td="routing-controls-source-symbol";function GP(i,e,t){let o,l,u;Wo(i,W2,ee=>t(9,o=ee)),Wo(i,Mu,ee=>t(10,l=ee)),Wo(i,kd,ee=>t(1,u=ee));const m=zr.valhalla.options.routing;let r=!1,h=[{value:K0.Walking,label:"Walking"},{value:K0.Bicycle,label:"Bicycle"},{value:K0.Car,label:"Car"}],y=h[0].value,b;Ss(()=>{u||kd.update(()=>[])}),Lc(()=>{r===!0&&x()});const v=()=>{r?x():w()},w=()=>{l&&(l.getCanvas().style.cursor="crosshair",t(2,r=!0),l.on("click",C),l.fire("routing.on"))},x=()=>{t(2,r=!1),l&&(l.getCanvas().style.cursor="",l.off("click",C),l.fire("routing.off"))},C=ee=>{const J=ee.lngLat;u||kd.update(()=>[]),kd.update(()=>[...u,J])},T=()=>{l&&(l.getLayer(T2)&&l.removeLayer(T2),l.getLayer(L2)&&l.removeLayer(L2),l.getLayer(P2)&&l.removeLayer(P2),l.getSource(Uf)&&l.removeSource(Uf),l.getSource(Td)&&l.removeSource(Td)),kd.update(()=>[])},S=()=>{if(!u||u&&u.length<2){t(3,b=void 0);return}const ee=`${zr.valhalla.url}/route`,J={locations:u.map(ke=>({lon:ke.lng,lat:ke.lat})),costing:y,costing_options:{auto:{country_crossing_penalty:2e3}},units:"kilometers",id:"my_work_route"},ie=`${ee}?json=${JSON.stringify(J)}`;fetch(ie).then(ke=>ke.json()).then(ke=>{if("error"in ke)throw u.pop(),new Error(`${ke.status} (${ke.status_code}): ${ke.error} (${ke.error_code})`);let Le=ke.trip.legs.map(ve=>V(ve.shape)),fe=[];Le.forEach(ve=>{fe=[...fe,...ve]}),t(3,b=ke.trip.summary),t(3,b.length=Number(b.length.toFixed(2)),b),t(3,b.time=Number((b.time/60).toFixed()),b);const Te={type:"FeatureCollection",features:ke.trip.legs.map(ve=>{const rt=V(ve.shape),nt={length:Number(ve.summary.length.toFixed(2)),time:Number((ve.summary.time/60).toFixed())};return M(rt,nt)})},_e=O(u.map(ve=>[ve.lng,ve.lat]));l&&(l.getSource(Uf)?(l.getSource(Uf).setData(Te),l.getSource(Td).setData(_e)):(l.addSource(Uf,{type:"geojson",data:Te}),l.addSource(Td,{type:"geojson",data:_e}),l.addLayer({id:T2,type:"line",source:Uf,paint:{"line-color":"rgb(255,0,0)","line-width":4}}),l.addLayer({id:L2,type:"symbol",source:Uf,layout:{"text-field":["concat",["to-string",["get","length"]]," km (",["to-string",["get","time"]]," min)"],"text-font":m.font,"text-size":m.fontSize,"symbol-placement":"line","text-allow-overlap":!0,"text-ignore-placement":!0},paint:{"text-color":m.fontColor,"text-halo-color":m.fontHaloColor,"text-halo-width":m.fontHalo}}),l.addLayer({id:P2,type:"symbol",source:Td,layout:{"icon-image":m.iconImage,"icon-size":m.iconSize,"text-field":["get","text"],"text-font":m.font,"text-size":m.fontSize,"text-variable-anchor":["top","bottom","left","right"],"text-radial-offset":.8,"text-justify":"auto"},paint:{"text-color":m.fontColor,"text-halo-color":m.fontHaloColor,"text-halo-width":m.fontHalo}})))}).catch(ke=>{W2.update(()=>[...o,ke.message])})},M=(ee=[],J={})=>({type:"Feature",properties:J,geometry:{type:"LineString",coordinates:ee}}),O=(ee=[])=>({type:"FeatureCollection",features:ee.map((J,ie)=>{let ke=(ie+1).toString();return ie===0?ke="From":ie===ee.length-1&&(ke="To"),{type:"Feature",properties:{text:ke},geometry:{type:"Point",coordinates:J}}})}),V=(ee,J=6)=>{let ie=0,ke=0,Le=0,fe=[],Te=0,_e=0,ve=null,rt,nt,Tt=Math.pow(10,J||6);for(;ie<ee.length;){ve=null,Te=0,_e=0;do ve=ee.charCodeAt(ie++)-63,_e|=(ve&31)<<Te,Te+=5;while(ve>=32);rt=_e&1?~(_e>>1):_e>>1,Te=_e=0;do ve=ee.charCodeAt(ie++)-63,_e|=(ve&31)<<Te,Te+=5;while(ve>=32);nt=_e&1?~(_e>>1):_e>>1,ke+=rt,Le+=nt,fe.push([Le/Tt,ke/Tt])}return fe};function X(ee){y=ee,t(0,y)}const Z=()=>T();return i.$$.update=()=>{i.$$.dirty&2&&S(),i.$$.dirty&1&&S()},[y,u,r,b,h,v,T,X,Z]}class WP extends xr{constructor(e){super(),Ar(this,e,GP,HP,br,{})}}function L5(i){let e,t,o;return t=new HC({props:{$$slots:{default:[wM]},$$scope:{ctx:i}}}),{c(){e=ti("div"),Hi(t.$$.fragment),this.h()},l(l){e=ii(l,"DIV",{class:!0});var u=si(e);$i(t.$$.fragment,u),u.forEach(Oe),this.h()},h(){oi(e,"class","accordion-container")},m(l,u){Dt(l,e,u),Gi(t,e,null),o=!0},p(l,u){const m={};u&8254&&(m.$$scope={dirty:u,ctx:l}),t.$set(m)},i(l){o||(yt(t.$$.fragment,l),o=!0)},o(l){At(t.$$.fragment,l),o=!1},d(l){l&&Oe(e),Wi(t)}}}function XP(i){let e;return{c(){e=Cn("Measuring tool")},l(t){e=En(t,"Measuring tool")},m(t,o){Dt(t,e,o)},d(t){t&&Oe(e)}}}function YP(i){let e;return{c(){e=Cn("expand_less")},l(t){e=En(t,"expand_less")},m(t,o){Dt(t,e,o)},d(t){t&&Oe(e)}}}function ZP(i){let e;return{c(){e=Cn("expand_more")},l(t){e=En(t,"expand_more")},m(t,o){Dt(t,e,o)},d(t){t&&Oe(e)}}}function KP(i){let e,t,o,l;return e=new tl({props:{class:"material-icons",on:!0,$$slots:{default:[YP]},$$scope:{ctx:i}}}),o=new tl({props:{class:"material-icons",$$slots:{default:[ZP]},$$scope:{ctx:i}}}),{c(){Hi(e.$$.fragment),t=Xi(),Hi(o.$$.fragment)},l(u){$i(e.$$.fragment,u),t=Yi(u),$i(o.$$.fragment,u)},m(u,m){Gi(e,u,m),Dt(u,t,m),Gi(o,u,m),l=!0},p(u,m){const r={};m&8192&&(r.$$scope={dirty:m,ctx:u}),e.$set(r);const h={};m&8192&&(h.$$scope={dirty:m,ctx:u}),o.$set(h)},i(u){l||(yt(e.$$.fragment,u),yt(o.$$.fragment,u),l=!0)},o(u){At(e.$$.fragment,u),At(o.$$.fragment,u),l=!1},d(u){Wi(e,u),u&&Oe(t),Wi(o,u)}}}function JP(i){let e,t;return e=new Fh({props:{slot:"icon",toggle:!0,pressed:i[1],$$slots:{default:[KP]},$$scope:{ctx:i}}}),{c(){Hi(e.$$.fragment)},l(o){$i(e.$$.fragment,o)},m(o,l){Gi(e,o,l),t=!0},p(o,l){const u={};l&2&&(u.pressed=o[1]),l&8192&&(u.$$scope={dirty:l,ctx:o}),e.$set(u)},i(o){t||(yt(e.$$.fragment,o),t=!0)},o(o){At(e.$$.fragment,o),t=!1},d(o){Wi(e,o)}}}function QP(i){let e,t;return e=new iL({}),{c(){Hi(e.$$.fragment)},l(o){$i(e.$$.fragment,o)},m(o,l){Gi(e,o,l),t=!0},i(o){t||(yt(e.$$.fragment,o),t=!0)},o(o){At(e.$$.fragment,o),t=!1},d(o){Wi(e,o)}}}function $P(i){let e,t,o,l;return e=new G1({props:{$$slots:{icon:[JP],default:[XP]},$$scope:{ctx:i}}}),o=new H1({props:{$$slots:{default:[QP]},$$scope:{ctx:i}}}),{c(){Hi(e.$$.fragment),t=Xi(),Hi(o.$$.fragment)},l(u){$i(e.$$.fragment,u),t=Yi(u),$i(o.$$.fragment,u)},m(u,m){Gi(e,u,m),Dt(u,t,m),Gi(o,u,m),l=!0},p(u,m){const r={};m&8194&&(r.$$scope={dirty:m,ctx:u}),e.$set(r);const h={};m&8192&&(h.$$scope={dirty:m,ctx:u}),o.$set(h)},i(u){l||(yt(e.$$.fragment,u),yt(o.$$.fragment,u),l=!0)},o(u){At(e.$$.fragment,u),At(o.$$.fragment,u),l=!1},d(u){Wi(e,u),u&&Oe(t),Wi(o,u)}}}function eM(i){let e;return{c(){e=Cn("Routing tool")},l(t){e=En(t,"Routing tool")},m(t,o){Dt(t,e,o)},d(t){t&&Oe(e)}}}function tM(i){let e;return{c(){e=Cn("expand_less")},l(t){e=En(t,"expand_less")},m(t,o){Dt(t,e,o)},d(t){t&&Oe(e)}}}function iM(i){let e;return{c(){e=Cn("expand_more")},l(t){e=En(t,"expand_more")},m(t,o){Dt(t,e,o)},d(t){t&&Oe(e)}}}function nM(i){let e,t,o,l;return e=new tl({props:{class:"material-icons",on:!0,$$slots:{default:[tM]},$$scope:{ctx:i}}}),o=new tl({props:{class:"material-icons",$$slots:{default:[iM]},$$scope:{ctx:i}}}),{c(){Hi(e.$$.fragment),t=Xi(),Hi(o.$$.fragment)},l(u){$i(e.$$.fragment,u),t=Yi(u),$i(o.$$.fragment,u)},m(u,m){Gi(e,u,m),Dt(u,t,m),Gi(o,u,m),l=!0},p(u,m){const r={};m&8192&&(r.$$scope={dirty:m,ctx:u}),e.$set(r);const h={};m&8192&&(h.$$scope={dirty:m,ctx:u}),o.$set(h)},i(u){l||(yt(e.$$.fragment,u),yt(o.$$.fragment,u),l=!0)},o(u){At(e.$$.fragment,u),At(o.$$.fragment,u),l=!1},d(u){Wi(e,u),u&&Oe(t),Wi(o,u)}}}function rM(i){let e,t;return e=new Fh({props:{slot:"icon",toggle:!0,pressed:i[2],$$slots:{default:[nM]},$$scope:{ctx:i}}}),{c(){Hi(e.$$.fragment)},l(o){$i(e.$$.fragment,o)},m(o,l){Gi(e,o,l),t=!0},p(o,l){const u={};l&4&&(u.pressed=o[2]),l&8192&&(u.$$scope={dirty:l,ctx:o}),e.$set(u)},i(o){t||(yt(e.$$.fragment,o),t=!0)},o(o){At(e.$$.fragment,o),t=!1},d(o){Wi(e,o)}}}function oM(i){let e,t;return e=new WP({}),{c(){Hi(e.$$.fragment)},l(o){$i(e.$$.fragment,o)},m(o,l){Gi(e,o,l),t=!0},i(o){t||(yt(e.$$.fragment,o),t=!0)},o(o){At(e.$$.fragment,o),t=!1},d(o){Wi(e,o)}}}function sM(i){let e,t,o,l;return e=new G1({props:{$$slots:{icon:[rM],default:[eM]},$$scope:{ctx:i}}}),o=new H1({props:{$$slots:{default:[oM]},$$scope:{ctx:i}}}),{c(){Hi(e.$$.fragment),t=Xi(),Hi(o.$$.fragment)},l(u){$i(e.$$.fragment,u),t=Yi(u),$i(o.$$.fragment,u)},m(u,m){Gi(e,u,m),Dt(u,t,m),Gi(o,u,m),l=!0},p(u,m){const r={};m&8196&&(r.$$scope={dirty:m,ctx:u}),e.$set(r);const h={};m&8192&&(h.$$scope={dirty:m,ctx:u}),o.$set(h)},i(u){l||(yt(e.$$.fragment,u),yt(o.$$.fragment,u),l=!0)},o(u){At(e.$$.fragment,u),At(o.$$.fragment,u),l=!1},d(u){Wi(e,u),u&&Oe(t),Wi(o,u)}}}function aM(i){let e;return{c(){e=Cn("Time Isochrone")},l(t){e=En(t,"Time Isochrone")},m(t,o){Dt(t,e,o)},d(t){t&&Oe(e)}}}function lM(i){let e;return{c(){e=Cn("expand_less")},l(t){e=En(t,"expand_less")},m(t,o){Dt(t,e,o)},d(t){t&&Oe(e)}}}function uM(i){let e;return{c(){e=Cn("expand_more")},l(t){e=En(t,"expand_more")},m(t,o){Dt(t,e,o)},d(t){t&&Oe(e)}}}function cM(i){let e,t,o,l;return e=new tl({props:{class:"material-icons",on:!0,$$slots:{default:[lM]},$$scope:{ctx:i}}}),o=new tl({props:{class:"material-icons",$$slots:{default:[uM]},$$scope:{ctx:i}}}),{c(){Hi(e.$$.fragment),t=Xi(),Hi(o.$$.fragment)},l(u){$i(e.$$.fragment,u),t=Yi(u),$i(o.$$.fragment,u)},m(u,m){Gi(e,u,m),Dt(u,t,m),Gi(o,u,m),l=!0},p(u,m){const r={};m&8192&&(r.$$scope={dirty:m,ctx:u}),e.$set(r);const h={};m&8192&&(h.$$scope={dirty:m,ctx:u}),o.$set(h)},i(u){l||(yt(e.$$.fragment,u),yt(o.$$.fragment,u),l=!0)},o(u){At(e.$$.fragment,u),At(o.$$.fragment,u),l=!1},d(u){Wi(e,u),u&&Oe(t),Wi(o,u)}}}function hM(i){let e,t;return e=new Fh({props:{slot:"icon",toggle:!0,pressed:i[3],$$slots:{default:[cM]},$$scope:{ctx:i}}}),{c(){Hi(e.$$.fragment)},l(o){$i(e.$$.fragment,o)},m(o,l){Gi(e,o,l),t=!0},p(o,l){const u={};l&8&&(u.pressed=o[3]),l&8192&&(u.$$scope={dirty:l,ctx:o}),e.$set(u)},i(o){t||(yt(e.$$.fragment,o),t=!0)},o(o){At(e.$$.fragment,o),t=!1},d(o){Wi(e,o)}}}function fM(i){let e,t,o;function l(m){i[8](m)}let u={};return i[5].Time!==void 0&&(u.contourType=i[5].Time),e=new T3({props:u}),wn.push(()=>Vo(e,"contourType",l)),{c(){Hi(e.$$.fragment)},l(m){$i(e.$$.fragment,m)},m(m,r){Gi(e,m,r),o=!0},p(m,r){const h={};!t&&r&32&&(t=!0,h.contourType=m[5].Time,qo(()=>t=!1)),e.$set(h)},i(m){o||(yt(e.$$.fragment,m),o=!0)},o(m){At(e.$$.fragment,m),o=!1},d(m){Wi(e,m)}}}function dM(i){let e,t,o,l;return e=new G1({props:{$$slots:{icon:[hM],default:[aM]},$$scope:{ctx:i}}}),o=new H1({props:{$$slots:{default:[fM]},$$scope:{ctx:i}}}),{c(){Hi(e.$$.fragment),t=Xi(),Hi(o.$$.fragment)},l(u){$i(e.$$.fragment,u),t=Yi(u),$i(o.$$.fragment,u)},m(u,m){Gi(e,u,m),Dt(u,t,m),Gi(o,u,m),l=!0},p(u,m){const r={};m&8200&&(r.$$scope={dirty:m,ctx:u}),e.$set(r);const h={};m&8224&&(h.$$scope={dirty:m,ctx:u}),o.$set(h)},i(u){l||(yt(e.$$.fragment,u),yt(o.$$.fragment,u),l=!0)},o(u){At(e.$$.fragment,u),At(o.$$.fragment,u),l=!1},d(u){Wi(e,u),u&&Oe(t),Wi(o,u)}}}function pM(i){let e;return{c(){e=Cn("Distance Isochrone")},l(t){e=En(t,"Distance Isochrone")},m(t,o){Dt(t,e,o)},d(t){t&&Oe(e)}}}function mM(i){let e;return{c(){e=Cn("expand_less")},l(t){e=En(t,"expand_less")},m(t,o){Dt(t,e,o)},d(t){t&&Oe(e)}}}function gM(i){let e;return{c(){e=Cn("expand_more")},l(t){e=En(t,"expand_more")},m(t,o){Dt(t,e,o)},d(t){t&&Oe(e)}}}function yM(i){let e,t,o,l;return e=new tl({props:{class:"material-icons",on:!0,$$slots:{default:[mM]},$$scope:{ctx:i}}}),o=new tl({props:{class:"material-icons",$$slots:{default:[gM]},$$scope:{ctx:i}}}),{c(){Hi(e.$$.fragment),t=Xi(),Hi(o.$$.fragment)},l(u){$i(e.$$.fragment,u),t=Yi(u),$i(o.$$.fragment,u)},m(u,m){Gi(e,u,m),Dt(u,t,m),Gi(o,u,m),l=!0},p(u,m){const r={};m&8192&&(r.$$scope={dirty:m,ctx:u}),e.$set(r);const h={};m&8192&&(h.$$scope={dirty:m,ctx:u}),o.$set(h)},i(u){l||(yt(e.$$.fragment,u),yt(o.$$.fragment,u),l=!0)},o(u){At(e.$$.fragment,u),At(o.$$.fragment,u),l=!1},d(u){Wi(e,u),u&&Oe(t),Wi(o,u)}}}function _M(i){let e,t;return e=new Fh({props:{slot:"icon",toggle:!0,pressed:i[4],$$slots:{default:[yM]},$$scope:{ctx:i}}}),{c(){Hi(e.$$.fragment)},l(o){$i(e.$$.fragment,o)},m(o,l){Gi(e,o,l),t=!0},p(o,l){const u={};l&16&&(u.pressed=o[4]),l&8192&&(u.$$scope={dirty:l,ctx:o}),e.$set(u)},i(o){t||(yt(e.$$.fragment,o),t=!0)},o(o){At(e.$$.fragment,o),t=!1},d(o){Wi(e,o)}}}function vM(i){let e,t,o;function l(m){i[10](m)}let u={};return i[5].Distance!==void 0&&(u.contourType=i[5].Distance),e=new T3({props:u}),wn.push(()=>Vo(e,"contourType",l)),{c(){Hi(e.$$.fragment)},l(m){$i(e.$$.fragment,m)},m(m,r){Gi(e,m,r),o=!0},p(m,r){const h={};!t&&r&32&&(t=!0,h.contourType=m[5].Distance,qo(()=>t=!1)),e.$set(h)},i(m){o||(yt(e.$$.fragment,m),o=!0)},o(m){At(e.$$.fragment,m),o=!1},d(m){Wi(e,m)}}}function bM(i){let e,t,o,l;return e=new G1({props:{$$slots:{icon:[_M],default:[pM]},$$scope:{ctx:i}}}),o=new H1({props:{$$slots:{default:[vM]},$$scope:{ctx:i}}}),{c(){Hi(e.$$.fragment),t=Xi(),Hi(o.$$.fragment)},l(u){$i(e.$$.fragment,u),t=Yi(u),$i(o.$$.fragment,u)},m(u,m){Gi(e,u,m),Dt(u,t,m),Gi(o,u,m),l=!0},p(u,m){const r={};m&8208&&(r.$$scope={dirty:m,ctx:u}),e.$set(r);const h={};m&8224&&(h.$$scope={dirty:m,ctx:u}),o.$set(h)},i(u){l||(yt(e.$$.fragment,u),yt(o.$$.fragment,u),l=!0)},o(u){At(e.$$.fragment,u),At(o.$$.fragment,u),l=!1},d(u){Wi(e,u),u&&Oe(t),Wi(o,u)}}}function wM(i){let e,t,o,l,u,m,r,h,y,b,v,w;function x(Z){i[6](Z)}let C={$$slots:{default:[$P]},$$scope:{ctx:i}};i[1]!==void 0&&(C.open=i[1]),e=new qp({props:C}),wn.push(()=>Vo(e,"open",x));function T(Z){i[7](Z)}let S={$$slots:{default:[sM]},$$scope:{ctx:i}};i[2]!==void 0&&(S.open=i[2]),l=new qp({props:S}),wn.push(()=>Vo(l,"open",T));function M(Z){i[9](Z)}let O={$$slots:{default:[dM]},$$scope:{ctx:i}};i[3]!==void 0&&(O.open=i[3]),r=new qp({props:O}),wn.push(()=>Vo(r,"open",M));function V(Z){i[11](Z)}let X={$$slots:{default:[bM]},$$scope:{ctx:i}};return i[4]!==void 0&&(X.open=i[4]),b=new qp({props:X}),wn.push(()=>Vo(b,"open",V)),{c(){Hi(e.$$.fragment),o=Xi(),Hi(l.$$.fragment),m=Xi(),Hi(r.$$.fragment),y=Xi(),Hi(b.$$.fragment)},l(Z){$i(e.$$.fragment,Z),o=Yi(Z),$i(l.$$.fragment,Z),m=Yi(Z),$i(r.$$.fragment,Z),y=Yi(Z),$i(b.$$.fragment,Z)},m(Z,ee){Gi(e,Z,ee),Dt(Z,o,ee),Gi(l,Z,ee),Dt(Z,m,ee),Gi(r,Z,ee),Dt(Z,y,ee),Gi(b,Z,ee),w=!0},p(Z,ee){const J={};ee&8194&&(J.$$scope={dirty:ee,ctx:Z}),!t&&ee&2&&(t=!0,J.open=Z[1],qo(()=>t=!1)),e.$set(J);const ie={};ee&8196&&(ie.$$scope={dirty:ee,ctx:Z}),!u&&ee&4&&(u=!0,ie.open=Z[2],qo(()=>u=!1)),l.$set(ie);const ke={};ee&8232&&(ke.$$scope={dirty:ee,ctx:Z}),!h&&ee&8&&(h=!0,ke.open=Z[3],qo(()=>h=!1)),r.$set(ke);const Le={};ee&8240&&(Le.$$scope={dirty:ee,ctx:Z}),!v&&ee&16&&(v=!0,Le.open=Z[4],qo(()=>v=!1)),b.$set(Le)},i(Z){w||(yt(e.$$.fragment,Z),yt(l.$$.fragment,Z),yt(r.$$.fragment,Z),yt(b.$$.fragment,Z),w=!0)},o(Z){At(e.$$.fragment,Z),At(l.$$.fragment,Z),At(r.$$.fragment,Z),At(b.$$.fragment,Z),w=!1},d(Z){Wi(e,Z),Z&&Oe(o),Wi(l,Z),Z&&Oe(m),Wi(r,Z),Z&&Oe(y),Wi(b,Z)}}}function xM(i){let e,t,o=i[0]&&L5(i);return{c(){o&&o.c(),e=gn()},l(l){o&&o.l(l),e=gn()},m(l,u){o&&o.m(l,u),Dt(l,e,u),t=!0},p(l,[u]){l[0]?o?(o.p(l,u),u&1&&yt(o,1)):(o=L5(l),o.c(),yt(o,1),o.m(e.parentNode,e)):o&&(Dr(),At(o,1,1,()=>{o=null}),Mr())},i(l){t||(yt(o),t=!0)},o(l){At(o),t=!1},d(l){o&&o.d(l),l&&Oe(e)}}}function AM(i,e,t){let o;Wo(i,Sd,T=>t(12,o=T));let{isAdvancedTabVisible:l=!1}=e,u=!0,m=!1,r=!1,h=!1;Ss(()=>{switch(o){case"Measure":t(1,u=!0);break;case"Routing":t(2,m=!0);break;case"TimeIsochrone":t(3,r=!0);break;case"DistanceIsochrone":t(4,h=!0);break}});function y(T){u=T,t(1,u)}function b(T){m=T,t(2,m)}function v(T){i.$$.not_equal(Pu.Time,T)&&(Pu.Time=T,t(5,Pu))}function w(T){r=T,t(3,r)}function x(T){i.$$.not_equal(Pu.Distance,T)&&(Pu.Distance=T,t(5,Pu))}function C(T){h=T,t(4,h)}return i.$$set=T=>{"isAdvancedTabVisible"in T&&t(0,l=T.isAdvancedTabVisible)},i.$$.update=()=>{i.$$.dirty&30&&(u===!0?bl(Sd,o="Measure",o):m===!0?bl(Sd,o="Routing",o):r===!0?bl(Sd,o="TimeIsochrone",o):h===!0&&bl(Sd,o="DistanceIsochrone",o))},[l,u,m,r,h,Pu,y,b,v,w,x,C]}class kM extends xr{constructor(e){super(),Ar(this,e,AM,xM,br,{isAdvancedTabVisible:0})}}var Od=(i=>(i.LAYERS="Layers",i.ADVANCED="Advanced",i))(Od||{});const{window:hg}=dg;function P5(i,e,t){const o=i.slice();return o[23]=e[t],o}function M5(i){let e,t,o,l,u,m,r=i[23].label+"",h,y,b,v,w,x;function C(){return i[13](i[23])}return{c(){e=ti("li"),t=ti("a"),o=ti("span"),l=ti("i"),u=Xi(),m=ti("span"),h=Cn(r),b=Xi(),v=ti("li"),this.h()},l(T){e=ii(T,"LI",{class:!0});var S=si(e);t=ii(S,"A",{});var M=si(t);o=ii(M,"SPAN",{class:!0});var O=si(o);l=ii(O,"I",{class:!0,"aria-hidden":!0}),si(l).forEach(Oe),O.forEach(Oe),u=Yi(M),m=ii(M,"SPAN",{});var V=si(m);h=En(V,r),V.forEach(Oe),M.forEach(Oe),S.forEach(Oe),b=Yi(T),v=ii(T,"LI",{}),si(v).forEach(Oe),this.h()},h(){oi(l,"class",qd(i[23].icon)+" svelte-1cz9ygz"),oi(l,"aria-hidden","true"),oi(o,"class","icon ml-2"),oi(e,"class",y=i[3].label===i[23].label?"is-active":"")},m(T,S){Dt(T,e,S),Kt(e,t),Kt(t,o),Kt(o,l),Kt(t,u),Kt(t,m),Kt(m,h),Dt(T,b,S),Dt(T,v,S),w||(x=qn(e,"click",C),w=!0)},p(T,S){i=T,S&8&&y!==(y=i[3].label===i[23].label?"is-active":"")&&oi(e,"class",y)},d(T){T&&Oe(e),T&&Oe(b),T&&Oe(v),w=!1,x()}}}function SM(i){let e,t,o,l,u,m,r,h,y=i[9],b=[];for(let v=0;v<y.length;v+=1)b[v]=M5(P5(i,y,v));return u=new NC({props:{isLayersTabVisible:i[5]}}),r=new kM({props:{isAdvancedTabVisible:i[6]}}),{c(){e=ti("div"),t=ti("div"),o=ti("ul");for(let v=0;v<b.length;v+=1)b[v].c();l=Xi(),Hi(u.$$.fragment),m=Xi(),Hi(r.$$.fragment),this.h()},l(v){e=ii(v,"DIV",{slot:!0,class:!0});var w=si(e);t=ii(w,"DIV",{class:!0});var x=si(t);o=ii(x,"UL",{});var C=si(o);for(let T=0;T<b.length;T+=1)b[T].l(C);C.forEach(Oe),x.forEach(Oe),l=Yi(w),$i(u.$$.fragment,w),m=Yi(w),$i(r.$$.fragment,w),w.forEach(Oe),this.h()},h(){oi(t,"class","tabs is-centered is-small mb-0"),oi(e,"slot","primary"),oi(e,"class","drawer-content svelte-1cz9ygz")},m(v,w){Dt(v,e,w),Kt(e,t),Kt(t,o);for(let x=0;x<b.length;x+=1)b[x].m(o,null);Kt(e,l),Gi(u,e,null),Kt(e,m),Gi(r,e,null),h=!0},p(v,w){if(w&520){y=v[9];let T;for(T=0;T<y.length;T+=1){const S=P5(v,y,T);b[T]?b[T].p(S,w):(b[T]=M5(S),b[T].c(),b[T].m(o,null))}for(;T<b.length;T+=1)b[T].d(1);b.length=y.length}const x={};w&32&&(x.isLayersTabVisible=v[5]),u.$set(x);const C={};w&64&&(C.isAdvancedTabVisible=v[6]),r.$set(C)},i(v){h||(yt(u.$$.fragment,v),yt(r.$$.fragment,v),h=!0)},o(v){At(u.$$.fragment,v),At(r.$$.fragment,v),h=!1},d(v){v&&Oe(e),Ja(b,v),Wi(u),Wi(r)}}}function CM(i){let e,t,o,l;const u=i[11].default,m=fr(u,i,i[15],null);return{c(){e=ti("div"),m&&m.c(),t=Xi(),o=ti("div"),this.h()},l(r){e=ii(r,"DIV",{slot:!0,class:!0});var h=si(e);m&&m.l(h),t=Yi(h),o=ii(h,"DIV",{}),si(o).forEach(Oe),h.forEach(Oe),this.h()},h(){oi(e,"slot","secondary"),oi(e,"class","main-content svelte-1cz9ygz")},m(r,h){Dt(r,e,h),m&&m.m(e,null),Kt(e,t),Kt(e,o),l=!0},p(r,h){m&&m.p&&(!l||h&32768)&&dr(m,u,r,r[15],l?mr(u,r[15],h,null):pr(r[15]),null)},i(r){l||(yt(m,r),l=!0)},o(r){At(m,r),l=!1},d(r){r&&Oe(e),m&&m.d(r)}}}function EM(i){let e,t,o,l;ic(i[12]);let u={initialPrimarySize:"0%",minPrimarySize:i[0]?"300px":"0px",minSecondarySize:i[4]?"0px":"50%",splitterSize:i[8],$$slots:{secondary:[CM],primary:[SM]},$$scope:{ctx:i}};return e=new qA({props:u}),i[14](e),e.$on("changed",i[10]),{c(){Hi(e.$$.fragment)},l(m){$i(e.$$.fragment,m)},m(m,r){Gi(e,m,r),t=!0,o||(l=qn(hg,"resize",i[12]),o=!0)},p(m,[r]){const h={};r&1&&(h.minPrimarySize=m[0]?"300px":"0px"),r&16&&(h.minSecondarySize=m[4]?"0px":"50%"),r&256&&(h.splitterSize=m[8]),r&32872&&(h.$$scope={dirty:r,ctx:m}),e.$set(h)},i(m){t||(yt(e.$$.fragment,m),t=!0)},o(m){At(e.$$.fragment,m),t=!1},d(m){i[14](null),Wi(e,m),o=!1,l()}}}function IM(i,e,t){let o;Wo(i,Mu,ke=>t(16,o=ke));let{$$slots:l={},$$scope:u}=e,m=0,r=0,h=m<760;const y=()=>{t(4,h=m<768)};Ss(()=>{t(4,h=window.matchMedia("only screen and (max-width: 768px)").matches)});let{open:b=!1}=e,v=[{icon:"fas fa-layer-group",label:Od.LAYERS},{icon:"fas fa-chart-simple",label:Od.ADVANCED}],w=v[0],x=!1,C=!1,T,S="0px";const M=()=>{switch(t(5,x=!1),t(6,C=!1),w.label){case Od.LAYERS:t(5,x=!0);break;case Od.ADVANCED:t(6,C=!0);break}},O=()=>{V()},V=()=>{if(!!T){if(b===!0)if(h)T.setPercent(100),t(8,S="0px");else{const ke=380/m*100;T.setPercent(ke),t(8,S="10px")}else T.setPercent(0),t(8,S="0px");X()}},X=()=>{!o||(o.triggerRepaint(),o.resize())},Z=()=>{X(),T.getPercent()===0?t(0,b=!1):t(0,b=!0)};V();function ee(){t(1,m=hg.innerWidth),t(2,r=hg.innerHeight)}const J=ke=>t(3,w=ke);function ie(ke){wn[ke?"unshift":"push"](()=>{T=ke,t(7,T)})}return i.$$set=ke=>{"open"in ke&&t(0,b=ke.open),"$$scope"in ke&&t(15,u=ke.$$scope)},i.$$.update=()=>{i.$$.dirty&2&&y(),i.$$.dirty&4&&y(),i.$$.dirty&8&&M(),i.$$.dirty&1&&O()},[b,m,r,w,h,x,C,T,S,v,Z,l,ee,J,ie,u]}class TM extends xr{constructor(e){super(),Ar(this,e,IM,EM,br,{open:0})}}const LM=i=>({noResultsText:i[0]&2048}),D5=i=>({noResultsText:i[11]}),PM=i=>({createText:i[0]&16384}),O5=i=>({createText:i[14]}),MM=i=>({loadingText:i[0]&4096}),F5=i=>({loadingText:i[12]});function R5(i,e,t){const o=i.slice();return o[116]=e[t],o[118]=t,o}const DM=i=>({item:i[1]&1,label:i[1]&1}),B5=i=>({item:i[116].item,label:i[116].highlighted?i[116].highlighted:i[116].label});function z5(i,e,t){const o=i.slice();return o[119]=e[t],o}const OM=i=>({label:i[0]&2,item:i[0]&2}),N5=i=>({label:i[38](i[119]),item:i[119],unselectItem:i[45]});function j5(i,e,t){const o=i.slice();return o[118]=e[t],o}function FM(i){let e,t=i[1],o=[];for(let l=0;l<t.length;l+=1)o[l]=U5(j5(i,t,l));return{c(){for(let l=0;l<o.length;l+=1)o[l].c();e=gn()},l(l){for(let u=0;u<o.length;u+=1)o[u].l(l);e=gn()},m(l,u){for(let m=0;m<o.length;m+=1)o[m].m(l,u);Dt(l,e,u)},p(l,u){if(u[0]&18|u[1]&128){t=l[1];let m;for(m=0;m<t.length;m+=1){const r=j5(l,t,m);o[m]?o[m].p(r,u):(o[m]=U5(r),o[m].c(),o[m].m(e.parentNode,e))}for(;m<o.length;m+=1)o[m].d(1);o.length=t.length}},d(l){Ja(o,l),l&&Oe(e)}}}function RM(i){let e,t;return{c(){e=ti("option"),t=Cn(i[3]),this.h()},l(o){e=ii(o,"OPTION",{class:!0});var l=si(e);t=En(l,i[3]),l.forEach(Oe),this.h()},h(){e.__value=i[2],e.value=e.__value,e.selected=!0,oi(e,"class","svelte-1nqq7zl")},m(o,l){Dt(o,e,l),Kt(e,t)},p(o,l){l[0]&8&&ks(t,o[3]),l[0]&4&&(e.__value=o[2],e.value=e.__value)},d(o){o&&Oe(e)}}}function U5(i){let e,t=i[38](i[118])+"",o,l,u;return{c(){e=ti("option"),o=Cn(t),l=Xi(),this.h()},l(m){e=ii(m,"OPTION",{class:!0});var r=si(e);o=En(r,t),l=Yi(r),r.forEach(Oe),this.h()},h(){e.__value=u=i[4](i[118],!0),e.value=e.__value,e.selected=!0,oi(e,"class","svelte-1nqq7zl")},m(m,r){Dt(m,e,r),Kt(e,o),Kt(e,l)},p(m,r){r[0]&2&&t!==(t=m[38](m[118])+"")&&ks(o,t),r[0]&18&&u!==(u=m[4](m[118],!0))&&(e.__value=u,e.value=e.__value)},d(m){m&&Oe(e)}}}function V5(i){let e,t,o=i[1],l=[];for(let m=0;m<o.length;m+=1)l[m]=q5(z5(i,o,m));const u=m=>At(l[m],1,1,()=>{l[m]=null});return{c(){for(let m=0;m<l.length;m+=1)l[m].c();e=gn()},l(m){for(let r=0;r<l.length;r+=1)l[r].l(m);e=gn()},m(m,r){for(let h=0;h<l.length;h+=1)l[h].m(m,r);Dt(m,e,r),t=!0},p(m,r){if(r[0]&2|r[1]&16512|r[2]&1048576){o=m[1];let h;for(h=0;h<o.length;h+=1){const y=z5(m,o,h);l[h]?(l[h].p(y,r),yt(l[h],1)):(l[h]=q5(y),l[h].c(),yt(l[h],1),l[h].m(e.parentNode,e))}for(Dr(),h=o.length;h<l.length;h+=1)u(h);Mr()}},i(m){if(!t){for(let r=0;r<o.length;r+=1)yt(l[r]);t=!0}},o(m){l=l.filter(Boolean);for(let r=0;r<l.length;r+=1)At(l[r]);t=!1},d(m){Ja(l,m),m&&Oe(e)}}}function BM(i){let e,t,o=i[38](i[119])+"",l,u,m,r,h,y;return{c(){e=ti("div"),t=ti("span"),l=Cn(o),u=Xi(),m=ti("span"),r=Xi(),this.h()},l(b){e=ii(b,"DIV",{class:!0});var v=si(e);t=ii(v,"SPAN",{class:!0});var w=si(t);l=En(w,o),w.forEach(Oe),u=Yi(v),m=ii(v,"SPAN",{class:!0}),si(m).forEach(Oe),v.forEach(Oe),r=Yi(b),this.h()},h(){oi(t,"class","tag svelte-1nqq7zl"),oi(m,"class","tag is-delete svelte-1nqq7zl"),oi(e,"class","tags has-addons svelte-1nqq7zl")},m(b,v){Dt(b,e,v),Kt(e,t),Kt(t,l),Kt(e,u),Kt(e,m),Dt(b,r,v),h||(y=qn(m,"click",c4(function(){ro(i[45](i[119]))&&i[45](i[119]).apply(this,arguments)})),h=!0)},p(b,v){i=b,v[0]&2&&o!==(o=i[38](i[119])+"")&&ks(l,o)},d(b){b&&Oe(e),b&&Oe(r),h=!1,y()}}}function q5(i){let e;const t=i[83].tag,o=fr(t,i,i[82],N5),l=o||BM(i);return{c(){l&&l.c()},l(u){l&&l.l(u)},m(u,m){l&&l.m(u,m),e=!0},p(u,m){o?o.p&&(!e||m[0]&2|m[2]&1048576)&&dr(o,t,u,u[82],e?mr(t,u[82],m,OM):pr(u[82]),N5):l&&l.p&&(!e||m[0]&2)&&l.p(u,e?m:[-1,-1,-1,-1])},i(u){e||(yt(l,u),e=!0)},o(u){At(l,u),e=!1},d(u){l&&l.d(u)}}}function H5(i){let e,t,o,l;return{c(){e=ti("span"),t=Cn("\u2716"),this.h()},l(u){e=ii(u,"SPAN",{class:!0});var m=si(e);t=En(m,"\u2716"),m.forEach(Oe),this.h()},h(){oi(e,"class","autocomplete-clear-button svelte-1nqq7zl")},m(u,m){Dt(u,e,m),Kt(e,t),o||(l=qn(e,"click",i[49]),o=!0)},p:is,d(u){u&&Oe(e),o=!1,l()}}}function zM(i){let e,t;const o=i[83]["no-results"],l=fr(o,i,i[82],D5),u=l||VM(i);return{c(){e=ti("div"),u&&u.c(),this.h()},l(m){e=ii(m,"DIV",{class:!0});var r=si(e);u&&u.l(r),r.forEach(Oe),this.h()},h(){oi(e,"class","autocomplete-list-item-no-results svelte-1nqq7zl")},m(m,r){Dt(m,e,r),u&&u.m(e,null),t=!0},p(m,r){l?l.p&&(!t||r[0]&2048|r[2]&1048576)&&dr(l,o,m,m[82],t?mr(o,m[82],r,LM):pr(m[82]),D5):u&&u.p&&(!t||r[0]&2048)&&u.p(m,t?r:[-1,-1,-1,-1])},i(m){t||(yt(u,m),t=!0)},o(m){At(u,m),t=!1},d(m){m&&Oe(e),u&&u.d(m)}}}function NM(i){let e,t,o,l;const u=i[83].create,m=fr(u,i,i[82],O5),r=m||qM(i);return{c(){e=ti("div"),r&&r.c(),this.h()},l(h){e=ii(h,"DIV",{class:!0});var y=si(e);r&&r.l(y),y.forEach(Oe),this.h()},h(){oi(e,"class","autocomplete-list-item-create svelte-1nqq7zl")},m(h,y){Dt(h,e,y),r&&r.m(e,null),t=!0,o||(l=qn(e,"click",i[39]),o=!0)},p(h,y){m?m.p&&(!t||y[0]&16384|y[2]&1048576)&&dr(m,u,h,h[82],t?mr(u,h[82],y,PM):pr(h[82]),O5):r&&r.p&&(!t||y[0]&16384)&&r.p(h,t?y:[-1,-1,-1,-1])},i(h){t||(yt(r,h),t=!0)},o(h){At(r,h),t=!1},d(h){h&&Oe(e),r&&r.d(h),o=!1,l()}}}function jM(i){let e,t;const o=i[83].loading,l=fr(o,i,i[82],F5),u=l||HM(i);return{c(){e=ti("div"),u&&u.c(),this.h()},l(m){e=ii(m,"DIV",{class:!0});var r=si(e);u&&u.l(r),r.forEach(Oe),this.h()},h(){oi(e,"class","autocomplete-list-item-loading svelte-1nqq7zl")},m(m,r){Dt(m,e,r),u&&u.m(e,null),t=!0},p(m,r){l?l.p&&(!t||r[0]&4096|r[2]&1048576)&&dr(l,o,m,m[82],t?mr(o,m[82],r,MM):pr(m[82]),F5):u&&u.p&&(!t||r[0]&4096)&&u.p(m,t?r:[-1,-1,-1,-1])},i(m){t||(yt(u,m),t=!0)},o(m){At(u,m),t=!1},d(m){m&&Oe(e),u&&u.d(m)}}}function UM(i){let e,t,o,l=i[31],u=[];for(let h=0;h<l.length;h+=1)u[h]=W5(R5(i,l,h));const m=h=>At(u[h],1,1,()=>{u[h]=null});let r=i[5]>0&&i[31].length>i[5]&&X5(i);return{c(){for(let h=0;h<u.length;h+=1)u[h].c();e=Xi(),r&&r.c(),t=gn()},l(h){for(let y=0;y<u.length;y+=1)u[y].l(h);e=Yi(h),r&&r.l(h),t=gn()},m(h,y){for(let b=0;b<u.length;b+=1)u[b].m(h,y);Dt(h,e,y),r&&r.m(h,y),Dt(h,t,y),o=!0},p(h,y){if(y[0]&1073741856|y[1]&524801|y[2]&1048576){l=h[31];let b;for(b=0;b<l.length;b+=1){const v=R5(h,l,b);u[b]?(u[b].p(v,y),yt(u[b],1)):(u[b]=W5(v),u[b].c(),yt(u[b],1),u[b].m(e.parentNode,e))}for(Dr(),b=l.length;b<u.length;b+=1)m(b);Mr()}h[5]>0&&h[31].length>h[5]?r?r.p(h,y):(r=X5(h),r.c(),r.m(t.parentNode,t)):r&&(r.d(1),r=null)},i(h){if(!o){for(let y=0;y<l.length;y+=1)yt(u[y]);o=!0}},o(h){u=u.filter(Boolean);for(let y=0;y<u.length;y+=1)At(u[y]);o=!1},d(h){Ja(u,h),h&&Oe(e),r&&r.d(h),h&&Oe(t)}}}function VM(i){let e;return{c(){e=Cn(i[11])},l(t){e=En(t,i[11])},m(t,o){Dt(t,e,o)},p(t,o){o[0]&2048&&ks(e,t[11])},d(t){t&&Oe(e)}}}function qM(i){let e;return{c(){e=Cn(i[14])},l(t){e=En(t,i[14])},m(t,o){Dt(t,e,o)},p(t,o){o[0]&16384&&ks(e,t[14])},d(t){t&&Oe(e)}}}function HM(i){let e;return{c(){e=Cn(i[12])},l(t){e=En(t,i[12])},m(t,o){Dt(t,e,o)},p(t,o){o[0]&4096&&ks(e,t[12])},d(t){t&&Oe(e)}}}function G5(i){let e,t,o,l,u;const m=i[83].item,r=fr(m,i,i[82],B5),h=r||XM(i);function y(){return i[86](i[116])}function b(){return i[87](i[118])}return{c(){e=ti("div"),h&&h.c(),this.h()},l(v){e=ii(v,"DIV",{class:!0});var w=si(e);h&&h.l(w),w.forEach(Oe),this.h()},h(){oi(e,"class",t="autocomplete-list-item "+(i[118]===i[30]?"selected":"")+" svelte-1nqq7zl"),R0(e,"confirmed",i[50](i[116].item))},m(v,w){Dt(v,e,w),h&&h.m(e,null),o=!0,l||(u=[qn(e,"click",y),qn(e,"pointerenter",b)],l=!0)},p(v,w){i=v,r?r.p&&(!o||w[1]&1|w[2]&1048576)&&dr(r,m,i,i[82],o?mr(m,i[82],w,DM):pr(i[82]),B5):h&&h.p&&(!o||w[1]&1)&&h.p(i,o?w:[-1,-1,-1,-1]),(!o||w[0]&1073741824&&t!==(t="autocomplete-list-item "+(i[118]===i[30]?"selected":"")+" svelte-1nqq7zl"))&&oi(e,"class",t),(!o||w[0]&1073741824|w[1]&524289)&&R0(e,"confirmed",i[50](i[116].item))},i(v){o||(yt(h,v),o=!0)},o(v){At(h,v),o=!1},d(v){v&&Oe(e),h&&h.d(v),l=!1,Io(u)}}}function GM(i){let e,t=i[116].label+"",o;return{c(){e=new f4(!1),o=gn(),this.h()},l(l){e=d4(l,!1),o=gn(),this.h()},h(){e.a=o},m(l,u){e.m(t,l,u),Dt(l,o,u)},p(l,u){u[1]&1&&t!==(t=l[116].label+"")&&e.p(t)},d(l){l&&Oe(o),l&&e.d()}}}function WM(i){let e,t=i[116].highlighted+"",o;return{c(){e=new f4(!1),o=gn(),this.h()},l(l){e=d4(l,!1),o=gn(),this.h()},h(){e.a=o},m(l,u){e.m(t,l,u),Dt(l,o,u)},p(l,u){u[1]&1&&t!==(t=l[116].highlighted+"")&&e.p(t)},d(l){l&&Oe(o),l&&e.d()}}}function XM(i){let e;function t(u,m){return u[116].highlighted?WM:GM}let o=t(i),l=o(i);return{c(){l.c(),e=gn()},l(u){l.l(u),e=gn()},m(u,m){l.m(u,m),Dt(u,e,m)},p(u,m){o===(o=t(u))&&l?l.p(u,m):(l.d(1),l=o(u),l&&(l.c(),l.m(e.parentNode,e)))},d(u){l.d(u),u&&Oe(e)}}}function W5(i){let e,t,o=i[116]&&(i[5]<=0||i[118]<i[5])&&G5(i);return{c(){o&&o.c(),e=gn()},l(l){o&&o.l(l),e=gn()},m(l,u){o&&o.m(l,u),Dt(l,e,u),t=!0},p(l,u){l[116]&&(l[5]<=0||l[118]<l[5])?o?(o.p(l,u),u[0]&32|u[1]&1&&yt(o,1)):(o=G5(l),o.c(),yt(o,1),o.m(e.parentNode,e)):o&&(Dr(),At(o,1,1,()=>{o=null}),Mr())},i(l){t||(yt(o),t=!0)},o(l){At(o),t=!1},d(l){o&&o.d(l),l&&Oe(e)}}}function X5(i){let e,t=i[13]&&Y5(i);return{c(){t&&t.c(),e=gn()},l(o){t&&t.l(o),e=gn()},m(o,l){t&&t.m(o,l),Dt(o,e,l)},p(o,l){o[13]?t?t.p(o,l):(t=Y5(o),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},d(o){t&&t.d(o),o&&Oe(e)}}}function Y5(i){let e,t,o=i[31].length-i[5]+"",l,u,m;return{c(){e=ti("div"),t=Cn("..."),l=Cn(o),u=Xi(),m=Cn(i[13]),this.h()},l(r){e=ii(r,"DIV",{class:!0});var h=si(e);t=En(h,"..."),l=En(h,o),u=Yi(h),m=En(h,i[13]),h.forEach(Oe),this.h()},h(){oi(e,"class","autocomplete-list-item-no-results svelte-1nqq7zl")},m(r,h){Dt(r,e,h),Kt(e,t),Kt(e,l),Kt(e,u),Kt(e,m)},p(r,h){h[0]&32|h[1]&1&&o!==(o=r[31].length-r[5]+"")&&ks(l,o),h[0]&8192&&ks(m,r[13])},d(r){r&&Oe(e)}}}function YM(i){let e,t,o,l,u,m,r,h,y,b,v,w,x,C,T,S,M,O,V,X;function Z(_e,ve){if(!_e[6]&&_e[2])return RM;if(_e[6]&&_e[1])return FM}let ee=Z(i),J=ee&&ee(i),ie=i[6]&&i[1]&&V5(i),ke=i[35]&&H5(i);const Le=[UM,jM,NM,zM],fe=[];function Te(_e,ve){return _e[31]&&_e[31].length>0?0:_e[34]&&_e[12]?1:_e[7]?2:_e[11]?3:-1}return~(C=Te(i))&&(T=fe[C]=Le[C](i)),{c(){e=ti("div"),t=ti("select"),J&&J.c(),o=Xi(),l=ti("div"),ie&&ie.c(),u=Xi(),m=ti("input"),v=Xi(),ke&&ke.c(),w=Xi(),x=ti("div"),T&&T.c(),this.h()},l(_e){e=ii(_e,"DIV",{class:!0});var ve=si(e);t=ii(ve,"SELECT",{name:!0,id:!0,class:!0});var rt=si(t);J&&J.l(rt),rt.forEach(Oe),o=Yi(ve),l=ii(ve,"DIV",{class:!0});var nt=si(l);ie&&ie.l(nt),u=Yi(nt),m=ii(nt,"INPUT",{type:!0,class:!0,id:!0,autocomplete:!0,placeholder:!0,name:!0,title:!0,tabindex:!0}),v=Yi(nt),ke&&ke.l(nt),nt.forEach(Oe),w=Yi(ve),x=ii(ve,"DIV",{class:!0});var Tt=si(x);T&&T.l(Tt),Tt.forEach(Oe),ve.forEach(Oe),this.h()},h(){oi(t,"name",i[20]),oi(t,"id",i[21]),t.multiple=i[6],oi(t,"class","svelte-1nqq7zl"),oi(m,"type","text"),oi(m,"class",r=(i[17]?i[17]:"")+" "+(i[27]?"":"input autocomplete-input")+" svelte-1nqq7zl"),oi(m,"id",h=i[18]?i[18]:""),oi(m,"autocomplete",y=i[23]?"on":"off"),oi(m,"placeholder",i[15]),oi(m,"name",i[19]),m.disabled=i[26],m.required=i[28],oi(m,"title",i[22]),m.readOnly=b=i[24]||i[8]&&i[1],oi(m,"tabindex",i[29]),oi(l,"class","input-container svelte-1nqq7zl"),oi(x,"class",S=(i[25]?i[25]:"")+" autocomplete-list "+(i[36]?"":"hidden")+" is-fullwidth svelte-1nqq7zl"),oi(e,"class",M=(i[16]?i[16]:"")+" "+(i[9]||!i[0].length?"hide-arrow":"")+" "+(i[6]?"is-multiple":"")+" autocomplete select is-fullwidth "+i[37]+" svelte-1nqq7zl"),R0(e,"show-clear",i[35]),R0(e,"is-loading",i[10]&&i[34])},m(_e,ve){Dt(_e,e,ve),Kt(e,t),J&&J.m(t,null),Kt(e,o),Kt(e,l),ie&&ie.m(l,null),Kt(l,u),Kt(l,m),i[84](m),td(m,i[3]),Kt(l,v),ke&&ke.m(l,null),Kt(e,w),Kt(e,x),~C&&fe[C].m(x,null),i[88](x),O=!0,V||(X=[qn(window,"click",i[41]),qn(m,"input",i[85]),qn(m,"input",i[44]),qn(m,"focus",i[47]),qn(m,"blur",i[48]),qn(m,"keydown",i[42]),qn(m,"click",i[46]),qn(m,"keypress",i[43])],V=!0)},p(_e,ve){ee===(ee=Z(_e))&&J?J.p(_e,ve):(J&&J.d(1),J=ee&&ee(_e),J&&(J.c(),J.m(t,null))),(!O||ve[0]&1048576)&&oi(t,"name",_e[20]),(!O||ve[0]&2097152)&&oi(t,"id",_e[21]),(!O||ve[0]&64)&&(t.multiple=_e[6]),_e[6]&&_e[1]?ie?(ie.p(_e,ve),ve[0]&66&&yt(ie,1)):(ie=V5(_e),ie.c(),yt(ie,1),ie.m(l,u)):ie&&(Dr(),At(ie,1,1,()=>{ie=null}),Mr()),(!O||ve[0]&134348800&&r!==(r=(_e[17]?_e[17]:"")+" "+(_e[27]?"":"input autocomplete-input")+" svelte-1nqq7zl"))&&oi(m,"class",r),(!O||ve[0]&262144&&h!==(h=_e[18]?_e[18]:""))&&oi(m,"id",h),(!O||ve[0]&8388608&&y!==(y=_e[23]?"on":"off"))&&oi(m,"autocomplete",y),(!O||ve[0]&32768)&&oi(m,"placeholder",_e[15]),(!O||ve[0]&524288)&&oi(m,"name",_e[19]),(!O||ve[0]&67108864)&&(m.disabled=_e[26]),(!O||ve[0]&268435456)&&(m.required=_e[28]),(!O||ve[0]&4194304)&&oi(m,"title",_e[22]),(!O||ve[0]&16777474&&b!==(b=_e[24]||_e[8]&&_e[1]))&&(m.readOnly=b),(!O||ve[0]&536870912)&&oi(m,"tabindex",_e[29]),ve[0]&8&&m.value!==_e[3]&&td(m,_e[3]),_e[35]?ke?ke.p(_e,ve):(ke=H5(_e),ke.c(),ke.m(l,null)):ke&&(ke.d(1),ke=null);let rt=C;C=Te(_e),C===rt?~C&&fe[C].p(_e,ve):(T&&(Dr(),At(fe[rt],1,1,()=>{fe[rt]=null}),Mr()),~C?(T=fe[C],T?T.p(_e,ve):(T=fe[C]=Le[C](_e),T.c()),yt(T,1),T.m(x,null)):T=null),(!O||ve[0]&33554432|ve[1]&32&&S!==(S=(_e[25]?_e[25]:"")+" autocomplete-list "+(_e[36]?"":"hidden")+" is-fullwidth svelte-1nqq7zl"))&&oi(x,"class",S),(!O||ve[0]&66113&&M!==(M=(_e[16]?_e[16]:"")+" "+(_e[9]||!_e[0].length?"hide-arrow":"")+" "+(_e[6]?"is-multiple":"")+" autocomplete select is-fullwidth "+_e[37]+" svelte-1nqq7zl"))&&oi(e,"class",M),(!O||ve[0]&66113|ve[1]&16)&&R0(e,"show-clear",_e[35]),(!O||ve[0]&67137|ve[1]&8)&&R0(e,"is-loading",_e[10]&&_e[34])},i(_e){O||(yt(ie),yt(T),O=!0)},o(_e){At(ie),At(T),O=!1},d(_e){_e&&Oe(e),J&&J.d(),ie&&ie.d(),i[84](null),ke&&ke.d(),~C&&fe[C].d(),i[88](null),V=!1,Io(X)}}}function ZM(i,e){if(typeof i!="function"){console.error("Not a function: "+i+", argument: "+e);return}let t;try{t=i(e)}catch{console.warn("Error executing Autocomplete function on value: "+e+" function: "+i)}return t}function Jp(i,e){let t=ZM(i,e);return t==null&&(t=""),typeof t!="string"&&(t=t.toString()),t}function fg(i,e){if(!i)return 0;const t=i.keywords;let o=0;return e.forEach(l=>{t.includes(l)&&o++}),o}function KM(i,e,t){return fg(e,t)-fg(i,t)}function Qp(i){return i.normalize("NFD").replace(/[\u0300-\u036f]/g,"")}function JM(i,e,t){let o,l,{$$slots:u={},$$scope:m}=e,{items:r=[]}=e,{searchFunction:h=!1}=e,{labelFieldName:y=void 0}=e,{keywordsFieldName:b=y}=e,{valueFieldName:v=void 0}=e,{labelFunction:w=function(Ot){return Ot==null?"":y?Ot[y]:Ot}}=e,{keywordsFunction:x=function(Ot){return Ot==null?"":b?Ot[b]:w(Ot)}}=e,{valueFunction:C=function(Ot,sr=!1){return Ot==null?Ot:!ke||sr?v?Ot[v]:Ot:Ot.map(hr=>v?hr[v]:hr)}}=e,{keywordsCleanFunction:T=function(Ot){return Ot}}=e,{textCleanFunction:S=function(Ot){return Ot}}=e,{beforeChange:M=function(Ot,sr){return!0}}=e,{onChange:O=function(Ot){}}=e,{onFocus:V=function(){}}=e,{onBlur:X=function(){}}=e,{onCreate:Z=function(Ot){mi&&console.log("onCreate: "+Ot)}}=e,{selectFirstIfEmpty:ee=!1}=e,{minCharactersToSearch:J=1}=e,{maxItemsToShowInList:ie=0}=e,{multiple:ke=!1}=e,{create:Le=!1}=e,{ignoreAccents:fe=!0}=e,{matchAllKeywords:Te=!0}=e,{sortByMatchedKeywords:_e=!1}=e,{itemFilterFunction:ve=void 0}=e,{itemSortFunction:rt=void 0}=e,{lock:nt=!1}=e,{delay:Tt=0}=e,{localFiltering:We=!0}=e,{localSorting:be=!0}=e,{cleanUserText:Ce=!0}=e,{closeOnBlur:Be=!1}=e,{hideArrow:le=!1}=e,{showClear:Ee=!1}=e,{showLoadingIndicator:he=!1}=e,{noResultsText:me="No results found"}=e,{loadingText:Fe="Loading results..."}=e,{moreItemsText:Xe="items not shown"}=e,{createText:lt="Not found, add anyway?"}=e,{placeholder:Ye=void 0}=e,{className:Ke=void 0}=e,{inputClassName:Lt=void 0}=e,{inputId:$t=void 0}=e,{name:dt=void 0}=e,{selectName:wt=void 0}=e,{selectId:bt=void 0}=e,{title:$e=void 0}=e,{html5autocomplete:Yt=void 0}=e,{readonly:li=void 0}=e,{dropdownClassName:Zt=void 0}=e,{disabled:Ci=!1}=e,{noInputStyles:Li=!1}=e,{required:Vt=null}=e,{debug:mi=!1}=e,{tabindex:Qi=0}=e,{selectedItem:xi=ke?[]:void 0}=e,{value:Jt=void 0}=e,{highlightedItem:Me=void 0}=e;const Q="sautocomplete-"+Math.floor(Math.random()*1e3);let ae,et,vt=!1,Wt=!1,di=-1,{text:xn}=e,Mn=0,fn,Bi=[],en=0,Xn=0,Yn;function Kr(Ot){return Jp(w,Ot)}function jn(Ot){const sr=Jp(x,Ot);let hr=Jp(T,sr);return hr=hr.toLowerCase().trim(),fe&&(hr=Qp(hr)),mi&&console.log("Extracted keywords: '"+hr+"' from item: "+JSON.stringify(Ot)),hr}function cn(){let Ot;mi&&(Ot=`Autocomplete prepare list ${$t?`(id: ${$t})`:""}`,console.time(Ot),console.log("Prepare items to search"),console.log("items: "+JSON.stringify(r))),Array.isArray(r)||(console.warn("Autocomplete items / search function did not return array but",r),t(0,r=[]));const sr=r?r.length:0;Bi=new Array(sr),sr>0&&r.forEach((hr,Nr)=>{const Xo=mn(hr);Xo===void 0&&console.log("Undefined item for: ",hr),Bi[Nr]=Xo}),t(31,fn=Bi),mi&&(console.log(Bi.length+" items to search"),console.timeEnd(Ot))}function mn(Ot){return{keywords:We?jn(Ot):[],label:Kr(Ot),item:Ot}}function er(){t(2,Jt=C(xi)),t(3,xn=ke?"":Kr(xi)),t(31,fn=Bi),O(xi)}function yn(Ot){if(Ot==null)return"";if(!Ce)return Ot;const sr=Ot.replace(/[&/\\#,+()$~%.'":*?<>{}]/g," ").trim();return Jp(S,sr).toLowerCase().trim()}async function Ln(){let Ot;mi&&(Ot=`Autocomplete search ${$t?`(id: ${$t})`:""}`,console.time(Ot),console.log("Searching user entered text: '"+xn+"'"));let sr=yn(xn);if(J>1&&sr.length<J&&(sr=""),t(81,Mn=sr.length),mi&&console.log("Changed user entered text '"+xn+"' into '"+sr+"'"),sr===""){h?(t(0,r=[]),mi&&console.log("User entered text is empty clear list of items")):(t(31,fn=Bi),mi&&console.log("User entered text is empty set the list of items to all items")),cr(),mi&&console.timeEnd(Ot);return}if(!h)oo(sr);else{en=en+1;const hr=en;if(t(34,Wt=!0),h.constructor.name==="AsyncGeneratorFunction"){for await(const Nr of h(sr,ie)){if(hr<Xn)return!1;hr>Xn&&t(0,r=[]),Xn=hr,t(0,r=[...r,...Nr]),oo(sr)}Xn<hr&&(Xn=hr,t(0,r=[]),oo(sr))}else{let Nr=await h(sr,ie);if(hr<Xn)return!1;Xn=hr,t(0,r=Nr),oo(sr)}t(34,Wt=!1)}mi&&(console.timeEnd(Ot),console.log("Search found "+fn.length+" items"))}function lr(Ot,sr){const hr=fg(Ot,sr);return Te?hr>=sr.length:hr>0}function oo(Ot){cn();const hr=(fe?Qp(Ot):Ot).split(/\s+/g).filter(Oo=>Oo!=="");let Nr;We?(ve?Nr=Bi.filter(Oo=>ve(Oo.item,hr)):Nr=Bi.filter(Oo=>lr(Oo,hr)),be&&(rt?Nr=Nr.sort((Oo,Sa)=>rt(Oo.item,Sa.item,hr)):_e&&(Nr=Nr.sort((Oo,Sa)=>KM(Oo,Sa,hr))))):Nr=Bi;const Xo=Or(hr,"label");return t(31,fn=Nr.map(Xo)),cr(),!0}function ln(Ot){let sr;if(mi&&console.log("createdItem",Ot),typeof Ot<"u"){cn(),t(31,fn=Bi);let hr=xt(Ot,fn);hr<=0&&(t(0,r=[Ot]),cn(),t(31,fn=Bi),hr=0),hr>=0&&(t(30,di=hr),sr=fn[di])}return sr}function qe(Ot){if(mi&&console.log("selectListItem",Ot),typeof Ot>"u"&&Le){const hr=Z(xn);if(typeof hr<"u"){if(typeof hr.then=="function")return hr.then(Nr=>{if(typeof Nr<"u"){const Xo=ln(Nr);typeof Xo<"u"&&qe(Xo)}}),!0;Ot=ln(hr)}}if(typeof Ot>"u")return mi&&console.log("listItem is undefined. Can not select."),!1;if(nt&&xi)return!0;const sr=Ot.item;return M(xi,sr)&&(ke?xi?xi.includes(sr)?t(1,xi=xi.filter(hr=>hr!==sr)):t(1,xi=[...xi,sr]):t(1,xi=[sr]):(t(1,xi=void 0),t(1,xi=sr))),!0}function To(){mi&&console.log("selectItem",di);const Ot=fn[di];qe(Ot)?(mi&&console.log("selectListItem true, closing"),$n(),ke&&ae.focus()):mi&&console.log("selectListItem false, not closing")}function bo(){mi&&console.log("up"),Pn(),di>0&&t(30,di--,di),Pe()}function co(){mi&&console.log("down"),Pn(),di<fn.length-1&&t(30,di++,di),Pe()}function Pe(){mi&&console.log("highlight");const Ot=".selected";mi&&console.log("Seaching DOM element: "+Ot+" in "+et);const sr=et&&et.querySelector(Ot);sr?typeof sr.scrollIntoViewIfNeeded=="function"?(mi&&console.log("Scrolling selected item into view"),sr.scrollIntoViewIfNeeded()):sr.scrollIntoView==="function"?(mi&&console.log("Scrolling selected item into view"),sr.scrollIntoView()):mi&&console.warn("Could not scroll selected item into view, scrollIntoViewIfNeeded not supported"):mi&&console.warn("Selected item not found to scroll into view")}function Ie(Ot){mi&&console.log("onListItemClick"),qe(Ot)&&($n(),ke&&ae.focus())}function He(Ot){mi&&console.log("onDocumentClick"),Ot.composedPath().some(sr=>sr.classList&&sr.classList.contains(Q))?(mi&&console.log("onDocumentClick inside"),Pe()):(mi&&console.log("onDocumentClick outside"),$n())}function ct(Ot){mi&&console.log("onKeyDown");let sr=Ot.key;sr==="Tab"&&Ot.shiftKey&&(sr="ShiftTab");const Nr={Tab:vt?$n():null,ShiftTab:vt?$n():null,ArrowDown:co.bind(this),ArrowUp:bo.bind(this),Escape:_t.bind(this),Backspace:ke&&xi&&xi.length&&!xn?Ri.bind(this):null}[sr];typeof Nr=="function"&&Nr(Ot)}function gt(Ot){mi&&console.log("onKeyPress"),Ot.key==="Enter"&&(Ot.preventDefault(),Rt())}function Rt(){To()}function Ge(Ot){mi&&console.log("onInput"),t(3,xn=Ot.target.value),Yn&&clearTimeout(Yn),Tt?Yn=setTimeout(Bt,Tt):Bt()}function Ht(Ot){mi&&console.log("unselectItem",Ot),t(1,xi=xi.filter(sr=>sr!==Ot)),ae.focus()}function Bt(){Ln()&&(t(30,di=0),Pn())}function ei(){mi&&console.log("onInputClick"),kn()}function _t(Ot){mi&&console.log("onEsc"),Ot.stopPropagation(),vt&&(ae.focus(),$n())}function Ri(Ot){mi&&console.log("onBackspace"),Ht(xi[xi.length-1])}function Ii(){mi&&console.log("onFocus"),V(),kn()}function In(){mi&&console.log("onBlur"),Be&&$n(),X()}function kn(){if(mi&&console.log("resetListToAllItemsAndOpen"),xn?!Bi.length&&xi&&h&&Ln():t(31,fn=Bi),Pn(),xi){mi&&console.log("Searching currently selected item: "+JSON.stringify(xi));const Ot=xt(xi,fn);Ot>=0&&(t(30,di=Ot),Pe())}}function xt(Ot,sr){mi&&console.log("Finding index for item",Ot);let hr=-1;for(let Nr=0;Nr<sr.length;Nr++){const Xo=sr[Nr];if(typeof Xo>"u"){mi&&console.log(`listItem ${Nr} is undefined. Skipping.`);continue}if(mi&&console.log("Item "+Nr+": "+JSON.stringify(Xo)),Ot===Xo.item){hr=Nr;break}}return mi&&(hr>=0?console.log("Found index for item: "+hr):console.warn("Not found index for item: "+Ot)),hr}function Pn(){mi&&console.log("open"),!Pr()&&t(80,vt=!0)}function $n(){mi&&console.log("close"),t(80,vt=!1),t(34,Wt=!1),!xn&&ee&&(t(30,di=0),To())}function Pr(){return J>1&&Mn<J}function cr(){Pr()&&$n()}function Cr(){mi&&console.log("clear"),t(3,xn=""),t(1,xi=ke?[]:void 0),setTimeout(()=>{ae.focus(),$n()})}function Or(Ot,sr){return hr=>{let Nr=hr[sr];const Xo=Object.assign({highlighted:void 0},hr);Xo.highlighted=Nr;const Oo=Nr.toLowerCase(),Sa=fe?Qp(Oo):Oo;if(Ot&&Ot.length){const ns=[];for(let Vs=0;Vs<Ot.length;Vs++){let vs=Ot[Vs];fe&&(vs=Qp(vs));const Ca=vs.length;let Cs=0;do if(Cs=Sa.indexOf(vs,Cs),Cs>=0){let Zs=Cs+Ca;ns.push([Cs,Zs]),Cs=Zs}while(Cs!==-1)}if(ns.length>0){const Vs=new Set;for(let vs=0;vs<ns.length;vs++){const Ca=ns[vs],Cs=Ca[0],Zs=Ca[1],qs=Oo.substring(Cs,Zs);Vs.add(qs)}for(let vs of Vs){if(vs==="b")continue;const Ca=new RegExp("("+vs+")","ig"),Cs=Xo.highlighted.replace(Ca,"<b>$1</b>");Xo.highlighted=Cs}}}return Xo}}function Er(Ot){return xi?ke?xi.includes(Ot):Ot===xi:!1}function Jo(Ot){wn[Ot?"unshift":"push"](()=>{ae=Ot,t(32,ae)})}function _o(){xn=this.value,t(3,xn)}const Qo=Ot=>Ie(Ot),il=Ot=>{t(30,di=Ot)};function Do(Ot){wn[Ot?"unshift":"push"](()=>{et=Ot,t(33,et)})}return i.$$set=Ot=>{"items"in Ot&&t(0,r=Ot.items),"searchFunction"in Ot&&t(52,h=Ot.searchFunction),"labelFieldName"in Ot&&t(53,y=Ot.labelFieldName),"keywordsFieldName"in Ot&&t(54,b=Ot.keywordsFieldName),"valueFieldName"in Ot&&t(55,v=Ot.valueFieldName),"labelFunction"in Ot&&t(56,w=Ot.labelFunction),"keywordsFunction"in Ot&&t(57,x=Ot.keywordsFunction),"valueFunction"in Ot&&t(4,C=Ot.valueFunction),"keywordsCleanFunction"in Ot&&t(58,T=Ot.keywordsCleanFunction),"textCleanFunction"in Ot&&t(59,S=Ot.textCleanFunction),"beforeChange"in Ot&&t(60,M=Ot.beforeChange),"onChange"in Ot&&t(61,O=Ot.onChange),"onFocus"in Ot&&t(62,V=Ot.onFocus),"onBlur"in Ot&&t(63,X=Ot.onBlur),"onCreate"in Ot&&t(64,Z=Ot.onCreate),"selectFirstIfEmpty"in Ot&&t(65,ee=Ot.selectFirstIfEmpty),"minCharactersToSearch"in Ot&&t(66,J=Ot.minCharactersToSearch),"maxItemsToShowInList"in Ot&&t(5,ie=Ot.maxItemsToShowInList),"multiple"in Ot&&t(6,ke=Ot.multiple),"create"in Ot&&t(7,Le=Ot.create),"ignoreAccents"in Ot&&t(67,fe=Ot.ignoreAccents),"matchAllKeywords"in Ot&&t(68,Te=Ot.matchAllKeywords),"sortByMatchedKeywords"in Ot&&t(69,_e=Ot.sortByMatchedKeywords),"itemFilterFunction"in Ot&&t(70,ve=Ot.itemFilterFunction),"itemSortFunction"in Ot&&t(71,rt=Ot.itemSortFunction),"lock"in Ot&&t(8,nt=Ot.lock),"delay"in Ot&&t(72,Tt=Ot.delay),"localFiltering"in Ot&&t(73,We=Ot.localFiltering),"localSorting"in Ot&&t(74,be=Ot.localSorting),"cleanUserText"in Ot&&t(75,Ce=Ot.cleanUserText),"closeOnBlur"in Ot&&t(76,Be=Ot.closeOnBlur),"hideArrow"in Ot&&t(9,le=Ot.hideArrow),"showClear"in Ot&&t(77,Ee=Ot.showClear),"showLoadingIndicator"in Ot&&t(10,he=Ot.showLoadingIndicator),"noResultsText"in Ot&&t(11,me=Ot.noResultsText),"loadingText"in Ot&&t(12,Fe=Ot.loadingText),"moreItemsText"in Ot&&t(13,Xe=Ot.moreItemsText),"createText"in Ot&&t(14,lt=Ot.createText),"placeholder"in Ot&&t(15,Ye=Ot.placeholder),"className"in Ot&&t(16,Ke=Ot.className),"inputClassName"in Ot&&t(17,Lt=Ot.inputClassName),"inputId"in Ot&&t(18,$t=Ot.inputId),"name"in Ot&&t(19,dt=Ot.name),"selectName"in Ot&&t(20,wt=Ot.selectName),"selectId"in Ot&&t(21,bt=Ot.selectId),"title"in Ot&&t(22,$e=Ot.title),"html5autocomplete"in Ot&&t(23,Yt=Ot.html5autocomplete),"readonly"in Ot&&t(24,li=Ot.readonly),"dropdownClassName"in Ot&&t(25,Zt=Ot.dropdownClassName),"disabled"in Ot&&t(26,Ci=Ot.disabled),"noInputStyles"in Ot&&t(27,Li=Ot.noInputStyles),"required"in Ot&&t(28,Vt=Ot.required),"debug"in Ot&&t(78,mi=Ot.debug),"tabindex"in Ot&&t(29,Qi=Ot.tabindex),"selectedItem"in Ot&&t(1,xi=Ot.selectedItem),"value"in Ot&&t(2,Jt=Ot.value),"highlightedItem"in Ot&&t(51,Me=Ot.highlightedItem),"text"in Ot&&t(3,xn=Ot.text),"$$scope"in Ot&&t(82,m=Ot.$$scope)},i.$$.update=()=>{i.$$.dirty[0]&1|i.$$.dirty[1]&2097152&&(h||cn()),i.$$.dirty[0]&2&&er(),i.$$.dirty[0]&1073741824|i.$$.dirty[1]&1&&t(51,Me=fn&&di&&di>=0&&di<fn.length?fn[di].item:null),i.$$.dirty[0]&1|i.$$.dirty[2]&786432&&t(36,o=vt&&(r&&r.length>0||Mn>0)),i.$$.dirty[0]&322|i.$$.dirty[2]&32768&&t(35,l=Ee||(nt||ke)&&xi)},[r,xi,Jt,xn,C,ie,ke,Le,nt,le,he,me,Fe,Xe,lt,Ye,Ke,Lt,$t,dt,wt,bt,$e,Yt,li,Zt,Ci,Li,Vt,Qi,di,fn,ae,et,Wt,l,o,Q,Kr,To,Ie,He,ct,gt,Ge,Ht,ei,Ii,In,Cr,Er,Me,h,y,b,v,w,x,T,S,M,O,V,X,Z,ee,J,fe,Te,_e,ve,rt,Tt,We,be,Ce,Be,Ee,mi,Or,vt,Mn,m,u,Jo,_o,Qo,il,Do]}class QM extends xr{constructor(e){super(),Ar(this,e,JM,YM,br,{items:0,searchFunction:52,labelFieldName:53,keywordsFieldName:54,valueFieldName:55,labelFunction:56,keywordsFunction:57,valueFunction:4,keywordsCleanFunction:58,textCleanFunction:59,beforeChange:60,onChange:61,onFocus:62,onBlur:63,onCreate:64,selectFirstIfEmpty:65,minCharactersToSearch:66,maxItemsToShowInList:5,multiple:6,create:7,ignoreAccents:67,matchAllKeywords:68,sortByMatchedKeywords:69,itemFilterFunction:70,itemSortFunction:71,lock:8,delay:72,localFiltering:73,localSorting:74,cleanUserText:75,closeOnBlur:76,hideArrow:9,showClear:77,showLoadingIndicator:10,noResultsText:11,loadingText:12,moreItemsText:13,createText:14,placeholder:15,className:16,inputClassName:17,inputId:18,name:19,selectName:20,selectId:21,title:22,html5autocomplete:23,readonly:24,dropdownClassName:25,disabled:26,noInputStyles:27,required:28,debug:78,tabindex:29,selectedItem:1,value:2,highlightedItem:51,text:3,highlightFilter:79},null,[-1,-1,-1,-1])}get highlightFilter(){return this.$$.ctx[79]}}function $M(i){let e,t,o,l,u;function m(y){i[9](y)}function r(y){i[10](y)}let h={items:i[4],placeholder:i[0].placeholder,hideArrow:!1,showClear:!0,showLoadingIndicator:!1,labelFunction:i[7],maxItemsToShowInList:"10"};return i[1]!==void 0&&(h.selectedItem=i[1]),i[3]!==void 0&&(h.onChange=i[3]),t=new QM({props:h}),i[8](t),wn.push(()=>Vo(t,"selectedItem",m)),wn.push(()=>Vo(t,"onChange",r)),{c(){e=ti("div"),Hi(t.$$.fragment),this.h()},l(y){e=ii(y,"DIV",{class:!0});var b=si(e);$i(t.$$.fragment,b),b.forEach(Oe),this.h()},h(){oi(e,"class","data-container")},m(y,b){Dt(y,e,b),Gi(t,e,null),i[11](e),u=!0},p(y,[b]){const v={};b&1&&(v.placeholder=y[0].placeholder),b&1&&(v.labelFunction=y[7]),!o&&b&2&&(o=!0,v.selectedItem=y[1],qo(()=>o=!1)),!l&&b&8&&(l=!0,v.onChange=y[3],qo(()=>l=!1)),t.$set(v)},i(y){u||(yt(t.$$.fragment,y),u=!0)},o(y){At(t.$$.fragment,y),u=!1},d(y){y&&Oe(e),i[8](null),Wi(t),i[11](null)}}}function eD(i,e,t){let{map:o}=e,{searchOption:l}=e,{position:u="top-left"}=e;const m=T1();let r=[],h={},y={},b,v;function w(){}w.prototype.onAdd=function(Z){return this.map=Z,this.controlContainer=document.createElement("div"),this.controlContainer.className="mapboxgl-ctrl",this.controlContainer.appendChild(v),this.controlContainer},w.prototype.onRemove=function(){!this.controlContainer||!this.controlContainer.parentNode||!this.map||(this.controlContainer.parentNode.removeChild(this.controlContainer),this.map=void 0)};const x=()=>{if(!(h&&Object.keys(h).length>0)||!(y&&Object.keys(y).length>0&&y.key))return;const Z=h[y.key];if(!Z)return;const ee=Z.geometry.coordinates;o.flyTo({center:ee,zoom:l.zoom,curve:1}),b&&(b.remove(),b=null),b=new Lu.exports.Marker({draggable:!0}).setLngLat(ee).addTo(o),m("zoomed")};let C=()=>{y||b&&(b.remove(),b=null)},T=null;Ss(async()=>{T=new w,o.hasControl(T)===!1&&o.addControl(T,u),(await(await fetch(l.url)).json()).features.forEach(J=>{const ie=J.geometry.coordinates.join(","),ke=JSON.parse(JSON.stringify(J));ke.properties={},l.target.forEach(Le=>{J.properties[Le]&&(ke.properties[Le]=J.properties[Le])}),Object.keys(ke.properties).length!==0&&(ke.properties.key=ie,r.push(ke.properties),h[ie]=JSON.parse(JSON.stringify(J)))})});const S=Z=>Z?l.format(Z):"";function M(Z){wn[Z?"unshift":"push"](()=>{v=Z,t(2,v)})}function O(Z){y=Z,t(1,y)}function V(Z){C=Z,t(3,C)}function X(Z){wn[Z?"unshift":"push"](()=>{v=Z,t(2,v)})}return i.$$set=Z=>{"map"in Z&&t(5,o=Z.map),"searchOption"in Z&&t(0,l=Z.searchOption),"position"in Z&&t(6,u=Z.position)},i.$$.update=()=>{i.$$.dirty&2&&x()},[l,y,v,C,r,o,u,S,M,O,V,X]}class tD extends xr{constructor(e){super(),Ar(this,e,eD,$M,br,{map:5,searchOption:0,position:6})}}var L3={};Object.defineProperty(L3,"__esModule",{value:!0});class pf{constructor(e,t){this.areas=e||pf.DEFAULT_AREAS,this.limit_no_areas=t||pf.DEFAULT_NO_AREAS,this.onDocumentClick=this.onDocumentClick.bind(this)}getDefaultPosition(){return"top-right"}onAdd(e){this.map=e;const t=this;if(this.controlContainer=document.createElement("div"),this.controlContainer.classList.add("mapboxgl-ctrl"),this.controlContainer.classList.add("mapboxgl-ctrl-group"),this.areas.length<=this.limit_no_areas){this.mapAreaContainer=document.createElement("div"),this.areaButton=document.createElement("button"),this.mapAreaContainer.classList.add("mapboxgl-area-list");for(const o of this.areas){const l=document.createElement("button");l.innerText=o.title,l.classList.add(o.title.replace(/[^a-z0-9-]/gi,"_")),l.value=JSON.stringify({center:o.latlng,zoom:o.zoom}),l.addEventListener("click",u=>{const m=u.srcElement;this.map.jumpTo(JSON.parse(m.value)),this.mapAreaContainer.style.display="none",this.areaButton.style.display="block";const r=this.mapAreaContainer.getElementsByClassName("active");for(;r[0];)r[0].classList.remove("active");m.classList.add("active")}),o.title===pf.DEFAULT_AREA&&l.classList.add("active"),this.mapAreaContainer.appendChild(l)}this.areaButton.classList.add("mapboxgl-ctrl-icon"),this.areaButton.classList.add("mapboxgl-area-switcher"),this.areaButton.addEventListener("click",()=>{this.areaButton.style.display="none",this.mapAreaContainer.style.display="block"}),document.addEventListener("click",this.onDocumentClick),this.controlContainer.appendChild(this.areaButton),this.controlContainer.appendChild(this.mapAreaContainer)}else this.controlContainer.classList.add("mapboxgl-ctrl-area-switch"),this.select=document.createElement("select"),this.select.setAttribute("type","select"),this.select.addEventListener("change",function(o){!o.target||t.map.flyTo(JSON.parse(o.target[this.selectedIndex].value))}),this.controlContainer.appendChild(this.select),this.areas.forEach(function(o){var l=document.createElement("option");l.setAttribute("type","option"),l.text=o.title,l.value=JSON.stringify({center:o.latlng,zoom:o.zoom}),t.select.appendChild(l)});return this.controlContainer}onRemove(){!this.controlContainer||!this.controlContainer.parentNode||!this.map||!this.areaButton||(this.areaButton.removeEventListener("click",this.onDocumentClick),this.controlContainer.parentNode.removeChild(this.controlContainer),document.removeEventListener("click",this.onDocumentClick),this.map=void 0)}onDocumentClick(e){this.controlContainer&&!this.controlContainer.contains(e.target)&&this.mapAreaContainer&&this.areaButton&&(this.mapAreaContainer.style.display="none",this.areaButton.style.display="block")}}var iD=L3.default=pf;pf.DEFAULT_AREA="Narok";pf.DEFAULT_AREAS=[{title:"Narok",latlng:[35.86974,-1.08707],zoom:13},{title:"Nairobi",latlng:[36.8034,-1.2809],zoom:11},{title:"Mombasa",latlng:[39.65449,-4.05099],zoom:12}];pf.DEFAULT_NO_AREAS=5;function Z5(i,e,t){const o=i.slice();return o[12]=e[t],o}function K5(i,e,t){const o=i.slice();return o[15]=e[t],o}function J5(i,e,t){const o=i.slice();return o[15]=e[t],o}function Q5(i){let e;function t(u,m){return u[3]?rD:nD}let o=t(i),l=o(i);return{c(){e=ti("div"),l.c(),this.h()},l(u){e=ii(u,"DIV",{class:!0});var m=si(e);l.l(m),m.forEach(Oe),this.h()},h(){oi(e,"class","select is-fullwidth mb-2 is-success")},m(u,m){Dt(u,e,m),l.m(e,null)},p(u,m){o===(o=t(u))&&l?l.p(u,m):(l.d(1),l=o(u),l&&(l.c(),l.m(e,null)))},d(u){u&&Oe(e),l.d()}}}function nD(i){let e,t,o,l=i[0],u=[];for(let m=0;m<l.length;m+=1)u[m]=$5(K5(i,l,m));return{c(){e=ti("select");for(let m=0;m<u.length;m+=1)u[m].c();this.h()},l(m){e=ii(m,"SELECT",{class:!0});var r=si(e);for(let h=0;h<u.length;h+=1)u[h].l(r);r.forEach(Oe),this.h()},h(){oi(e,"class","is-focused"),i[2]===void 0&&ic(()=>i[8].call(e))},m(m,r){Dt(m,e,r);for(let h=0;h<u.length;h+=1)u[h].m(e,null);ec(e,i[2]),t||(o=qn(e,"change",i[8]),t=!0)},p(m,r){if(r&1){l=m[0];let h;for(h=0;h<l.length;h+=1){const y=K5(m,l,h);u[h]?u[h].p(y,r):(u[h]=$5(y),u[h].c(),u[h].m(e,null))}for(;h<u.length;h+=1)u[h].d(1);u.length=l.length}r&5&&ec(e,m[2])},d(m){m&&Oe(e),Ja(u,m),t=!1,o()}}}function rD(i){let e,t,o,l=i[0],u=[];for(let m=0;m<l.length;m+=1)u[m]=e4(J5(i,l,m));return{c(){e=ti("select");for(let m=0;m<u.length;m+=1)u[m].c();this.h()},l(m){e=ii(m,"SELECT",{class:!0});var r=si(e);for(let h=0;h<u.length;h+=1)u[h].l(r);r.forEach(Oe),this.h()},h(){oi(e,"class","is-focused"),e.disabled=!0,i[2]===void 0&&ic(()=>i[7].call(e))},m(m,r){Dt(m,e,r);for(let h=0;h<u.length;h+=1)u[h].m(e,null);ec(e,i[2]),t||(o=qn(e,"change",i[7]),t=!0)},p(m,r){if(r&1){l=m[0];let h;for(h=0;h<l.length;h+=1){const y=J5(m,l,h);u[h]?u[h].p(y,r):(u[h]=e4(y),u[h].c(),u[h].m(e,null))}for(;h<u.length;h+=1)u[h].d(1);u.length=l.length}r&5&&ec(e,m[2])},d(m){m&&Oe(e),Ja(u,m),t=!1,o()}}}function $5(i){let e,t=`${i[15].sourceLayer} (${i[15].source})`,o,l;return{c(){e=ti("option"),o=Cn(t),this.h()},l(u){e=ii(u,"OPTION",{});var m=si(e);o=En(m,t),m.forEach(Oe),this.h()},h(){e.__value=l=i[15],e.value=e.__value},m(u,m){Dt(u,e,m),Kt(e,o)},p(u,m){m&1&&t!==(t=`${u[15].sourceLayer} (${u[15].source})`)&&ks(o,t),m&1&&l!==(l=u[15])&&(e.__value=l,e.value=e.__value)},d(u){u&&Oe(e)}}}function e4(i){let e,t=`${i[15].sourceLayer} (${i[15].source})`,o,l;return{c(){e=ti("option"),o=Cn(t),this.h()},l(u){e=ii(u,"OPTION",{});var m=si(e);o=En(m,t),m.forEach(Oe),this.h()},h(){e.__value=l=i[15],e.value=e.__value},m(u,m){Dt(u,e,m),Kt(e,o)},p(u,m){m&1&&t!==(t=`${u[15].sourceLayer} (${u[15].source})`)&&ks(o,t),m&1&&l!==(l=u[15])&&(e.__value=l,e.value=e.__value)},d(u){u&&Oe(e)}}}function t4(i){let e,t;function o(m,r){return r&4&&(t=null),t==null&&(t=Object.keys(m[2].properties).length>0),t?sD:oD}let l=o(i,-1),u=l(i);return{c(){e=ti("div"),u.c(),this.h()},l(m){e=ii(m,"DIV",{class:!0});var r=si(e);u.l(r),r.forEach(Oe),this.h()},h(){oi(e,"class","popup-table svelte-15dh02j")},m(m,r){Dt(m,e,r),u.m(e,null)},p(m,r){l===(l=o(m,r))&&u?u.p(m,r):(u.d(1),u=l(m),u&&(u.c(),u.m(e,null)))},d(m){m&&Oe(e),u.d()}}}function oD(i){let e,t,o=i[2].sourceLayer+"",l,u;return{c(){e=ti("div"),t=Cn("No attributes in the selected layer '"),l=Cn(o),u=Cn("'"),this.h()},l(m){e=ii(m,"DIV",{class:!0});var r=si(e);t=En(r,"No attributes in the selected layer '"),l=En(r,o),u=En(r,"'"),r.forEach(Oe),this.h()},h(){oi(e,"class","notification is-info is-light")},m(m,r){Dt(m,e,r),Kt(e,t),Kt(e,l),Kt(e,u)},p(m,r){r&4&&o!==(o=m[2].sourceLayer+"")&&ks(l,o)},d(m){m&&Oe(e)}}}function sD(i){let e,t=Object.keys(i[2].properties),o=[];for(let l=0;l<t.length;l+=1)o[l]=i4(Z5(i,t,l));return{c(){e=ti("table");for(let l=0;l<o.length;l+=1)o[l].c();this.h()},l(l){e=ii(l,"TABLE",{class:!0});var u=si(e);for(let m=0;m<o.length;m+=1)o[m].l(u);u.forEach(Oe),this.h()},h(){oi(e,"class","table is-bordered is-striped is-narrow is-hoverable is-fullwidth")},m(l,u){Dt(l,e,u);for(let m=0;m<o.length;m+=1)o[m].m(e,null)},p(l,u){if(u&4){t=Object.keys(l[2].properties);let m;for(m=0;m<t.length;m+=1){const r=Z5(l,t,m);o[m]?o[m].p(r,u):(o[m]=i4(r),o[m].c(),o[m].m(e,null))}for(;m<o.length;m+=1)o[m].d(1);o.length=t.length}},d(l){l&&Oe(e),Ja(o,l)}}}function i4(i){let e,t,o=i[12]+"",l,u,m=i[2].properties[i[12]]+"",r;return{c(){e=ti("tr"),t=ti("th"),l=Cn(o),u=ti("td"),r=Cn(m)},l(h){e=ii(h,"TR",{});var y=si(e);t=ii(y,"TH",{});var b=si(t);l=En(b,o),b.forEach(Oe),u=ii(y,"TD",{});var v=si(u);r=En(v,m),v.forEach(Oe),y.forEach(Oe)},m(h,y){Dt(h,e,y),Kt(e,t),Kt(t,l),Kt(e,u),Kt(u,r)},p(h,y){y&4&&o!==(o=h[12]+"")&&ks(l,o),y&4&&m!==(m=h[2].properties[h[12]]+"")&&ks(r,m)},d(h){h&&Oe(e)}}}function aD(i){let e,t,o=i[0]&&i[0].length>0&&Q5(i),l=i[2]&&t4(i);return{c(){e=ti("div"),o&&o.c(),t=Xi(),l&&l.c()},l(u){e=ii(u,"DIV",{});var m=si(e);o&&o.l(m),t=Yi(m),l&&l.l(m),m.forEach(Oe)},m(u,m){Dt(u,e,m),o&&o.m(e,null),Kt(e,t),l&&l.m(e,null),i[9](e)},p(u,[m]){u[0]&&u[0].length>0?o?o.p(u,m):(o=Q5(u),o.c(),o.m(e,t)):o&&(o.d(1),o=null),u[2]?l?l.p(u,m):(l=t4(u),l.c(),l.m(e,null)):l&&(l.d(1),l=null)},i:is,o:is,d(u){u&&Oe(e),o&&o.d(),l&&l.d(),i[9](null)}}}function lD(i,e,t){let o,{map:l}=e,{targetLayers:u=[]}=e,m,r,h=[],y;function b(){}b.prototype.onAdd=function(T){return this.map=T,this.controlContainer=document.createElement("div"),this.controlContainer.className="mapboxgl-ctrl mapboxgl-ctrl-group",this.button=document.createElement("button"),this.button.className="maplibre-identify-icon",this.button.type="button",this.button.addEventListener("click",()=>{this.changeButtonCondition()}),this.controlContainer.appendChild(this.button),this.button.dispatchEvent(new Event("click")),this.controlContainer},b.prototype.changeButtonCondition=function(){this.isActive?(this.button.classList.remove("-active"),this.isActive=!1,this.map.off("click",this.onClick.bind(this)),t(0,h=[]),t(2,y=void 0),m&&(m.remove(),m=void 0)):(this.button.classList.add("-active"),this.isActive=!0,this.map.on("click",this.onClick.bind(this)))},b.prototype.onClick=function(T){if(!this.isActive){t(0,h=[]),t(2,y=void 0);return}let S=[];u.length>0?u.forEach(O=>{this.map.getLayer(O)&&S.push(O)}):S=l.getStyle().layers.map(O=>O.id);const M=this.map.queryRenderedFeatures(T.point,{layers:S});t(0,h=M),t(2,y=h[0]),h.length>0?m=new Lu.exports.Popup().setLngLat(T.lngLat).setDOMContent(r).setMaxWidth("300px").addTo(l):m&&(m.remove(),m=void 0)},b.prototype.onRemove=function(){!this.controlContainer||!this.controlContainer.parentNode||!this.map||!this.button||(this.controlContainer.parentNode.removeChild(this.controlContainer),this.map.off("click",this.onClick.bind(this)),this.map=void 0)};let v=null;Ss(async()=>{t(6,v=new b)});function w(){y=V0(this),t(2,y),t(0,h)}function x(){y=V0(this),t(2,y),t(0,h)}function C(T){wn[T?"unshift":"push"](()=>{r=T,t(1,r)})}return i.$$set=T=>{"map"in T&&t(4,l=T.map),"targetLayers"in T&&t(5,u=T.targetLayers)},i.$$.update=()=>{i.$$.dirty&1&&t(3,o=h.length===1),i.$$.dirty&80&&l&&v!==null&&l.hasControl(v)===!1&&l.addControl(v,"top-right")},[h,r,y,o,l,u,v,w,x,C]}class uD extends xr{constructor(e){super(),Ar(this,e,lD,aD,br,{map:4,targetLayers:5})}}/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var Th={CLOSING:"mdc-snackbar--closing",OPEN:"mdc-snackbar--open",OPENING:"mdc-snackbar--opening"},em={ACTION_SELECTOR:".mdc-snackbar__action",ARIA_LIVE_LABEL_TEXT_ATTR:"data-mdc-snackbar-label-text",CLOSED_EVENT:"MDCSnackbar:closed",CLOSING_EVENT:"MDCSnackbar:closing",DISMISS_SELECTOR:".mdc-snackbar__dismiss",LABEL_SELECTOR:".mdc-snackbar__label",OPENED_EVENT:"MDCSnackbar:opened",OPENING_EVENT:"MDCSnackbar:opening",REASON_ACTION:"action",REASON_DISMISS:"dismiss",SURFACE_SELECTOR:".mdc-snackbar__surface"},Kc={DEFAULT_AUTO_DISMISS_TIMEOUT_MS:5e3,INDETERMINATE:-1,MAX_AUTO_DISMISS_TIMEOUT_MS:1e4,MIN_AUTO_DISMISS_TIMEOUT_MS:4e3,SNACKBAR_ANIMATION_CLOSE_TIME_MS:75,SNACKBAR_ANIMATION_OPEN_TIME_MS:150,ARIA_LIVE_DELAY_MS:1e3};/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var cD=Kc.ARIA_LIVE_DELAY_MS,n4=em.ARIA_LIVE_LABEL_TEXT_ATTR;function hD(i,e){e===void 0&&(e=i);var t=i.getAttribute("aria-live"),o=e.textContent.trim();!o||!t||(i.setAttribute("aria-live","off"),e.textContent="",e.innerHTML='<span style="display: inline-block; width: 0; height: 1px;">&nbsp;</span>',e.setAttribute(n4,o),setTimeout(function(){i.setAttribute("aria-live",t),e.removeAttribute(n4),e.textContent=o},cD))}/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var r4=Th.OPENING,o4=Th.OPEN,s4=Th.CLOSING,fD=em.REASON_ACTION,M2=em.REASON_DISMISS,dD=function(i){xl(e,i);function e(t){var o=i.call(this,ts(ts({},e.defaultAdapter),t))||this;return o.opened=!1,o.animationFrame=0,o.animationTimer=0,o.autoDismissTimer=0,o.autoDismissTimeoutMs=Kc.DEFAULT_AUTO_DISMISS_TIMEOUT_MS,o.closeOnEscape=!0,o}return Object.defineProperty(e,"cssClasses",{get:function(){return Th},enumerable:!1,configurable:!0}),Object.defineProperty(e,"strings",{get:function(){return em},enumerable:!1,configurable:!0}),Object.defineProperty(e,"numbers",{get:function(){return Kc},enumerable:!1,configurable:!0}),Object.defineProperty(e,"defaultAdapter",{get:function(){return{addClass:function(){},announce:function(){},notifyClosed:function(){},notifyClosing:function(){},notifyOpened:function(){},notifyOpening:function(){},removeClass:function(){}}},enumerable:!1,configurable:!0}),e.prototype.destroy=function(){this.clearAutoDismissTimer(),cancelAnimationFrame(this.animationFrame),this.animationFrame=0,clearTimeout(this.animationTimer),this.animationTimer=0,this.adapter.removeClass(r4),this.adapter.removeClass(o4),this.adapter.removeClass(s4)},e.prototype.open=function(){var t=this;this.clearAutoDismissTimer(),this.opened=!0,this.adapter.notifyOpening(),this.adapter.removeClass(s4),this.adapter.addClass(r4),this.adapter.announce(),this.runNextAnimationFrame(function(){t.adapter.addClass(o4),t.animationTimer=setTimeout(function(){var o=t.getTimeoutMs();t.handleAnimationTimerEnd(),t.adapter.notifyOpened(),o!==Kc.INDETERMINATE&&(t.autoDismissTimer=setTimeout(function(){t.close(M2)},o))},Kc.SNACKBAR_ANIMATION_OPEN_TIME_MS)})},e.prototype.close=function(t){var o=this;t===void 0&&(t=""),this.opened&&(cancelAnimationFrame(this.animationFrame),this.animationFrame=0,this.clearAutoDismissTimer(),this.opened=!1,this.adapter.notifyClosing(t),this.adapter.addClass(Th.CLOSING),this.adapter.removeClass(Th.OPEN),this.adapter.removeClass(Th.OPENING),clearTimeout(this.animationTimer),this.animationTimer=setTimeout(function(){o.handleAnimationTimerEnd(),o.adapter.notifyClosed(t)},Kc.SNACKBAR_ANIMATION_CLOSE_TIME_MS))},e.prototype.isOpen=function(){return this.opened},e.prototype.getTimeoutMs=function(){return this.autoDismissTimeoutMs},e.prototype.setTimeoutMs=function(t){var o=Kc.MIN_AUTO_DISMISS_TIMEOUT_MS,l=Kc.MAX_AUTO_DISMISS_TIMEOUT_MS,u=Kc.INDETERMINATE;if(t===Kc.INDETERMINATE||t<=l&&t>=o)this.autoDismissTimeoutMs=t;else throw new Error(`
        timeoutMs must be an integer in the range `+o+"\u2013"+l+`
        (or `+u+" to disable), but got '"+t+"'")},e.prototype.getCloseOnEscape=function(){return this.closeOnEscape},e.prototype.setCloseOnEscape=function(t){this.closeOnEscape=t},e.prototype.handleKeyDown=function(t){var o=t.key==="Escape"||t.keyCode===27;o&&this.getCloseOnEscape()&&this.close(M2)},e.prototype.handleActionButtonClick=function(t){this.close(fD)},e.prototype.handleActionIconClick=function(t){this.close(M2)},e.prototype.clearAutoDismissTimer=function(){clearTimeout(this.autoDismissTimer),this.autoDismissTimer=0},e.prototype.handleAnimationTimerEnd=function(){this.animationTimer=0,this.adapter.removeClass(Th.OPENING),this.adapter.removeClass(Th.CLOSING)},e.prototype.runNextAnimationFrame=function(t){var o=this;cancelAnimationFrame(this.animationFrame),this.animationFrame=requestAnimationFrame(function(){o.animationFrame=0,clearTimeout(o.animationTimer),o.animationTimer=setTimeout(t,0)})},e}(Fu);function pD(i){let e,t,o,l,u,m,r,h,y;const b=i[25].default,v=fr(b,i,i[24],null);let w=[{class:o=rr({[i[4]]:!0,"mdc-snackbar__surface":!0})},{role:"status"},{"aria-relevant":"additions"},fo(i[12],"surface$")],x={};for(let S=0;S<w.length;S+=1)x=qi(x,w[S]);let C=[{class:u=rr({[i[1]]:!0,"mdc-snackbar":!0,"mdc-snackbar--stacked":i[2]==="stacked","mdc-snackbar--leading":i[3],...i[8]})},mf(i[12],["surface$"])],T={};for(let S=0;S<C.length;S+=1)T=qi(T,C[S]);return{c(){e=ti("aside"),t=ti("div"),v&&v.c(),this.h()},l(S){e=ii(S,"ASIDE",{class:!0});var M=si(e);t=ii(M,"DIV",{class:!0,role:!0,"aria-relevant":!0});var O=si(t);v&&v.l(O),O.forEach(Oe),M.forEach(Oe),this.h()},h(){or(t,x),or(e,T)},m(S,M){Dt(S,e,M),Kt(e,t),v&&v.m(t,null),i[26](e),r=!0,h||(y=[ir(l=Eo.call(null,t,i[5])),qn(t,"click",i[10]),ir(m=Eo.call(null,e,i[0])),ir(i[9].call(null,e)),qn(e,"SMUISnackbar:closed",i[11]),qn(e,"keydown",i[27])],h=!0)},p(S,M){v&&v.p&&(!r||M[0]&16777216)&&dr(v,b,S,S[24],r?mr(b,S[24],M,null):pr(S[24]),null),or(t,x=wr(w,[(!r||M[0]&16&&o!==(o=rr({[S[4]]:!0,"mdc-snackbar__surface":!0})))&&{class:o},{role:"status"},{"aria-relevant":"additions"},M[0]&4096&&fo(S[12],"surface$")])),l&&ro(l.update)&&M[0]&32&&l.update.call(null,S[5]),or(e,T=wr(C,[(!r||M[0]&270&&u!==(u=rr({[S[1]]:!0,"mdc-snackbar":!0,"mdc-snackbar--stacked":S[2]==="stacked","mdc-snackbar--leading":S[3],...S[8]})))&&{class:u},M[0]&4096&&mf(S[12],["surface$"])])),m&&ro(m.update)&&M[0]&1&&m.update.call(null,S[0])},i(S){r||(yt(v,S),r=!0)},o(S){At(v,S),r=!1},d(S){S&&Oe(e),v&&v.d(S),i[26](null),h=!1,Io(y)}}}let a4=Promise.resolve();function mD(i,e,t){const o=["use","class","variant","leading","timeoutMs","closeOnEscape","labelText","actionButtonText","surface$class","surface$use","open","forceOpen","close","isOpen","getLabelElement","getActionButtonElement","getElement"];let l=Zn(e,o),{$$slots:u={},$$scope:m}=e;const{closest:r}=L1,h=go(mo());let y=()=>{};function b(Ee){return Ee===y}let{use:v=[]}=e,{class:w=""}=e,{variant:x=""}=e,{leading:C=!1}=e,{timeoutMs:T=5e3}=e,{closeOnEscape:S=!0}=e,{labelText:M=y}=e,{actionButtonText:O=y}=e,{surface$class:V=""}=e,{surface$use:X=[]}=e,Z,ee,J={},ie,ke=new Promise(Ee=>ie=Ee);$o("SMUI:label:context","snackbar"),Ss(()=>(t(6,ee=new dD({addClass:Le,announce:()=>hD(We()),notifyClosed:Ee=>So(Ce(),"SMUISnackbar:closed",Ee?{reason:Ee}:{},void 0,!0),notifyClosing:Ee=>So(Ce(),"SMUISnackbar:closing",Ee?{reason:Ee}:{},void 0,!0),notifyOpened:()=>So(Ce(),"SMUISnackbar:opened",void 0,void 0,!0),notifyOpening:()=>So(Ce(),"SMUISnackbar:opening",void 0,void 0,!0),removeClass:fe})),ee.init(),()=>{ee.destroy()}));function Le(Ee){J[Ee]||t(8,J[Ee]=!0,J)}function fe(Ee){(!(Ee in J)||J[Ee])&&t(8,J[Ee]=!1,J)}function Te(Ee){const he=Ee.target;ee&&(r(he,".mdc-snackbar__action")?ee.handleActionButtonClick(Ee):r(he,".mdc-snackbar__dismiss")&&ee.handleActionIconClick(Ee))}function _e(){ie(),ke=new Promise(Ee=>ie=Ee)}function ve(){a4=a4.then(()=>(ee.open(),ke))}function rt(){return ee.open()}function nt(Ee){return ee.close(Ee)}function Tt(){return ee.isOpen()}function We(){var Ee;return(Ee=Ce().querySelector(".mdc-snackbar__label"))!==null&&Ee!==void 0?Ee:document.createElement("div")}function be(){var Ee;return(Ee=Ce().querySelector(".mdc-snackbar__action"))!==null&&Ee!==void 0?Ee:document.createElement("button")}function Ce(){return Z}function Be(Ee){wn[Ee?"unshift":"push"](()=>{Z=Ee,t(7,Z)})}const le=Ee=>ee&&ee.handleKeyDown(Ee);return i.$$set=Ee=>{e=qi(qi({},e),uo(Ee)),t(12,l=Zn(e,o)),"use"in Ee&&t(0,v=Ee.use),"class"in Ee&&t(1,w=Ee.class),"variant"in Ee&&t(2,x=Ee.variant),"leading"in Ee&&t(3,C=Ee.leading),"timeoutMs"in Ee&&t(13,T=Ee.timeoutMs),"closeOnEscape"in Ee&&t(14,S=Ee.closeOnEscape),"labelText"in Ee&&t(15,M=Ee.labelText),"actionButtonText"in Ee&&t(16,O=Ee.actionButtonText),"surface$class"in Ee&&t(4,V=Ee.surface$class),"surface$use"in Ee&&t(5,X=Ee.surface$use),"$$scope"in Ee&&t(24,m=Ee.$$scope)},i.$$.update=()=>{i.$$.dirty[0]&8256&&ee&&ee.getTimeoutMs()!==T&&ee.setTimeoutMs(T),i.$$.dirty[0]&16448&&ee&&ee.getCloseOnEscape()!==S&&ee.setCloseOnEscape(S),i.$$.dirty[0]&32832&&ee&&!b(M)&&We().textContent!==M&&(We().textContent=M),i.$$.dirty[0]&65600&&ee&&!b(O)&&be().textContent!==O&&(be().textContent=O)},[v,w,x,C,V,X,ee,Z,J,h,Te,_e,l,T,S,M,O,ve,rt,nt,Tt,We,be,Ce,m,u,Be,le]}class gD extends xr{constructor(e){super(),Ar(this,e,mD,pD,br,{use:0,class:1,variant:2,leading:3,timeoutMs:13,closeOnEscape:14,labelText:15,actionButtonText:16,surface$class:4,surface$use:5,open:17,forceOpen:18,close:19,isOpen:20,getLabelElement:21,getActionButtonElement:22,getElement:23},null,[-1,-1])}get open(){return this.$$.ctx[17]}get forceOpen(){return this.$$.ctx[18]}get close(){return this.$$.ctx[19]}get isOpen(){return this.$$.ctx[20]}get getLabelElement(){return this.$$.ctx[21]}get getActionButtonElement(){return this.$$.ctx[22]}get getElement(){return this.$$.ctx[23]}}const yD=Al({class:"mdc-snackbar__actions",props:{"aria-atomic":"true"},contexts:{"SMUI:button:context":"snackbar:actions","SMUI:icon-button:context":"snackbar:actions","SMUI:label:context":void 0},component:ip});function _D(i){let e;return{c(){e=Cn(i[1])},l(t){e=En(t,i[1])},m(t,o){Dt(t,e,o)},p(t,o){o&2&&ks(e,t[1])},d(t){t&&Oe(e)}}}function vD(i){let e;return{c(){e=Cn("close")},l(t){e=En(t,"close")},m(t,o){Dt(t,e,o)},d(t){t&&Oe(e)}}}function bD(i){let e,t;return e=new Fh({props:{class:"material-icons",title:"Dismiss",$$slots:{default:[vD]},$$scope:{ctx:i}}}),{c(){Hi(e.$$.fragment)},l(o){$i(e.$$.fragment,o)},m(o,l){Gi(e,o,l),t=!0},p(o,l){const u={};l&16&&(u.$$scope={dirty:l,ctx:o}),e.$set(u)},i(o){t||(yt(e.$$.fragment,o),t=!0)},o(o){At(e.$$.fragment,o),t=!1},d(o){Wi(e,o)}}}function wD(i){let e,t,o,l;return e=new sh({props:{$$slots:{default:[_D]},$$scope:{ctx:i}}}),o=new yD({props:{$$slots:{default:[bD]},$$scope:{ctx:i}}}),{c(){Hi(e.$$.fragment),t=Xi(),Hi(o.$$.fragment)},l(u){$i(e.$$.fragment,u),t=Yi(u),$i(o.$$.fragment,u)},m(u,m){Gi(e,u,m),Dt(u,t,m),Gi(o,u,m),l=!0},p(u,m){const r={};m&18&&(r.$$scope={dirty:m,ctx:u}),e.$set(r);const h={};m&16&&(h.$$scope={dirty:m,ctx:u}),o.$set(h)},i(u){l||(yt(e.$$.fragment,u),yt(o.$$.fragment,u),l=!0)},o(u){At(e.$$.fragment,u),At(o.$$.fragment,u),l=!1},d(u){Wi(e,u),u&&Oe(t),Wi(o,u)}}}function xD(i){let e,t,o={$$slots:{default:[wD]},$$scope:{ctx:i}};return e=new gD({props:o}),i[3](e),{c(){Hi(e.$$.fragment)},l(l){$i(e.$$.fragment,l)},m(l,u){Gi(e,l,u),t=!0},p(l,[u]){const m={};u&18&&(m.$$scope={dirty:u,ctx:l}),e.$set(m)},i(l){t||(yt(e.$$.fragment,l),t=!0)},o(l){At(e.$$.fragment,l),t=!1},d(l){i[3](null),Wi(e,l)}}}function AD(i,e,t){let o;Wo(i,W2,r=>t(2,o=r));let l,u;function m(r){wn[r?"unshift":"push"](()=>{l=r,t(0,l)})}return i.$$.update=()=>{i.$$.dirty&5&&o&&o.length>0&&l&&(t(1,u=o.shift()),l.open())},[l,u,o,m]}class kD extends xr{constructor(e){super(),Ar(this,e,AD,xD,br,{})}}function l4(i){let e,t,o,l,u,m=i[0].search&&u4(i);function r(b){i[7](b)}function h(b){i[8](b)}let y={};return i[3]!==void 0&&(y.map=i[3]),i[0].popup.target!==void 0&&(y.targetLayers=i[0].popup.target),t=new uD({props:y}),wn.push(()=>Vo(t,"map",r)),wn.push(()=>Vo(t,"targetLayers",h)),{c(){m&&m.c(),e=Xi(),Hi(t.$$.fragment)},l(b){m&&m.l(b),e=Yi(b),$i(t.$$.fragment,b)},m(b,v){m&&m.m(b,v),Dt(b,e,v),Gi(t,b,v),u=!0},p(b,v){b[0].search?m?(m.p(b,v),v&1&&yt(m,1)):(m=u4(b),m.c(),yt(m,1),m.m(e.parentNode,e)):m&&(Dr(),At(m,1,1,()=>{m=null}),Mr());const w={};!o&&v&8&&(o=!0,w.map=b[3],qo(()=>o=!1)),!l&&v&1&&(l=!0,w.targetLayers=b[0].popup.target,qo(()=>l=!1)),t.$set(w)},i(b){u||(yt(m),yt(t.$$.fragment,b),u=!0)},o(b){At(m),At(t.$$.fragment,b),u=!1},d(b){m&&m.d(b),b&&Oe(e),Wi(t,b)}}}function u4(i){let e,t,o,l;function u(h){i[5](h)}function m(h){i[6](h)}let r={};return i[3]!==void 0&&(r.map=i[3]),i[0].search!==void 0&&(r.searchOption=i[0].search),e=new tD({props:r}),wn.push(()=>Vo(e,"map",u)),wn.push(()=>Vo(e,"searchOption",m)),{c(){Hi(e.$$.fragment)},l(h){$i(e.$$.fragment,h)},m(h,y){Gi(e,h,y),l=!0},p(h,y){const b={};!t&&y&8&&(t=!0,b.map=h[3],qo(()=>t=!1)),!o&&y&1&&(o=!0,b.searchOption=h[0].search,qo(()=>o=!1)),e.$set(b)},i(h){l||(yt(e.$$.fragment,h),l=!0)},o(h){At(e.$$.fragment,h),l=!1},d(h){Wi(e,h)}}}function SD(i){let e,t,o,l,u,m,r=i[2]&&l4(i);return u=new kD({}),{c(){e=ti("div"),t=ti("div"),o=Xi(),r&&r.c(),l=Xi(),Hi(u.$$.fragment),this.h()},l(h){e=ii(h,"DIV",{class:!0});var y=si(e);t=ii(y,"DIV",{class:!0,id:!0}),si(t).forEach(Oe),o=Yi(y),r&&r.l(y),y.forEach(Oe),l=Yi(h),$i(u.$$.fragment,h),this.h()},h(){oi(t,"class","map svelte-1bahl15"),oi(t,"id","map"),oi(e,"class","map-wrap svelte-1bahl15")},m(h,y){Dt(h,e,y),Kt(e,t),i[4](t),Kt(e,o),r&&r.m(e,null),Dt(h,l,y),Gi(u,h,y),m=!0},p(h,[y]){h[2]?r?(r.p(h,y),y&4&&yt(r,1)):(r=l4(h),r.c(),yt(r,1),r.m(e,null)):r&&(Dr(),At(r,1,1,()=>{r=null}),Mr())},i(h){m||(yt(r),yt(u.$$.fragment,h),m=!0)},o(h){At(r),At(u.$$.fragment,h),m=!1},d(h){h&&Oe(e),i[4](null),r&&r.d(),h&&Oe(l),Wi(u,h)}}}function CD(i,e,t){let o;Wo(i,Mu,w=>t(3,o=w));let l,u,m=!1;Ss(async()=>{const w=new j4,x=zr.styles[0],C=w.get();let T=x;if(C){const O=w.getMatchedStyleByTitle(zr.styles,C);O&&(T=O)}Xd.update(()=>T);const S=new Lu.exports.Map({container:l,style:T.uri,center:zr.center,zoom:zr.zoom,hash:!0,attributionControl:!1});S.addControl(new Lu.exports.NavigationControl({visualizePitch:!0,showZoom:!0,showCompass:!0}),"top-right"),S.addControl(new Lu.exports.GeolocateControl({positionOptions:{enableHighAccuracy:!0},trackUserLocation:!0}),"top-right"),S.addControl(new Lu.exports.FullscreenControl({container:document.querySelector("body")})),S.addControl(new Lu.exports.ScaleControl({maxWidth:80,unit:"metric"}),"bottom-left"),S.addControl(new Lu.exports.AttributionControl({compact:!0}),"bottom-right"),zr.terrain&&(S.setMaxPitch(85),S.addControl(new Lu.exports.TerrainControl(zr.terrain))),zr.areaSwitcher&&S.addControl(new iD(zr.areaSwitcher.areas),"top-right");const M=()=>{S.loadImage(`${zr.basePath}/map-center.png`,(O,V)=>{if(O)throw O;S.hasImage("map-center")||S.addImage("map-center",V),S.getSource("center")||(u={type:"geojson",data:{type:"FeatureCollection",features:[{type:"Feature",geometry:{type:"Point",coordinates:[S.getCenter().lng,S.getCenter().lat]}}]}},S.addSource("center",u)),S.getLayer("points")||S.addLayer({id:"points",type:"symbol",source:"center",layout:{"icon-image":"map-center","icon-size":.3}})})};S.on("load",()=>{t(2,m=!0),M(),S.on("moveend",()=>{S.getSource("center")?(u.data.features[0].geometry.coordinates=[S.getCenter().lng,S.getCenter().lat],S.getSource("center").setData(u.data)):M()})}),Mu.update(()=>S)});function r(w){wn[w?"unshift":"push"](()=>{l=w,t(1,l)})}function h(w){o=w,Mu.set(o)}function y(w){i.$$.not_equal(zr.search,w)&&(zr.search=w,t(0,zr))}function b(w){o=w,Mu.set(o)}function v(w){i.$$.not_equal(zr.popup.target,w)&&(zr.popup.target=w,t(0,zr))}return[zr,l,m,o,r,h,y,b,v]}class ED extends xr{constructor(e){super(),Ar(this,e,CD,SD,br,{})}}function ID(i){let e,t;return e=new ED({}),{c(){Hi(e.$$.fragment)},l(o){$i(e.$$.fragment,o)},m(o,l){Gi(e,o,l),t=!0},i(o){t||(yt(e.$$.fragment,o),t=!0)},o(o){At(e.$$.fragment,o),t=!1},d(o){Wi(e,o)}}}function TD(i){let e,t,o=zr.title+"",l,u,m,r,h,y,b,v,w,x,C,T,S,M,O,V;function X(ie){i[1](ie)}let Z={};i[0]!==void 0&&(Z.drawerOpen=i[0]),C=new DA({props:Z}),wn.push(()=>Vo(C,"drawerOpen",X));function ee(ie){i[2](ie)}let J={$$slots:{default:[ID]},$$scope:{ctx:i}};return i[0]!==void 0&&(J.open=i[0]),M=new TM({props:J}),wn.push(()=>Vo(M,"open",ee)),{c(){e=ti("sveltekit:head"),t=ti("title"),l=Cn(o),u=Xi(),m=ti("script"),h=Xi(),y=ti("script"),b=Cn(`window.dataLayer = window.dataLayer || [];
		function gtag() {
			dataLayer.push(arguments);
		}
		gtag('js', new Date());

		gtag('config', 'UA-170080825-7');`),v=Xi(),w=ti("link"),x=Xi(),Hi(C.$$.fragment),S=Xi(),Hi(M.$$.fragment),this.h()},l(ie){e=ii(ie,"SVELTEKIT:HEAD",{});var ke=si(e);t=ii(ke,"TITLE",{});var Le=si(t);l=En(Le,o),Le.forEach(Oe),u=Yi(ke),m=ii(ke,"SCRIPT",{src:!0});var fe=si(m);fe.forEach(Oe),h=Yi(ke),y=ii(ke,"SCRIPT",{});var Te=si(y);b=En(Te,`window.dataLayer = window.dataLayer || [];
		function gtag() {
			dataLayer.push(arguments);
		}
		gtag('js', new Date());

		gtag('config', 'UA-170080825-7');`),Te.forEach(Oe),v=Yi(ke),w=ii(ke,"LINK",{rel:!0,href:!0,integrity:!0,crossorigin:!0,referrerpolicy:!0}),ke.forEach(Oe),x=Yi(ie),$i(C.$$.fragment,ie),S=Yi(ie),$i(M.$$.fragment,ie),this.h()},h(){m.async=!0,h4(m.src,r="https://www.googletagmanager.com/gtag/js?id=UA-170080825-7")||oi(m,"src",r),oi(w,"rel","stylesheet"),oi(w,"href","https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.0/css/all.min.css"),oi(w,"integrity","sha512-xh6O/CkQoPOWDdYTDqeRdPCVd1SpvCA9XXcUnZS2FmJNp1coAFzvtCN9BmamE+4aHK8yyUHUSCcJHgXloTyT2A=="),oi(w,"crossorigin","anonymous"),oi(w,"referrerpolicy","no-referrer")},m(ie,ke){Dt(ie,e,ke),Kt(e,t),Kt(t,l),Kt(e,u),Kt(e,m),Kt(e,h),Kt(e,y),Kt(y,b),Kt(e,v),Kt(e,w),Dt(ie,x,ke),Gi(C,ie,ke),Dt(ie,S,ke),Gi(M,ie,ke),V=!0},p(ie,[ke]){const Le={};!T&&ke&1&&(T=!0,Le.drawerOpen=ie[0],qo(()=>T=!1)),C.$set(Le);const fe={};ke&16&&(fe.$$scope={dirty:ke,ctx:ie}),!O&&ke&1&&(O=!0,fe.open=ie[0],qo(()=>O=!1)),M.$set(fe)},i(ie){V||(yt(C.$$.fragment,ie),yt(M.$$.fragment,ie),V=!0)},o(ie){At(C.$$.fragment,ie),At(M.$$.fragment,ie),V=!1},d(ie){ie&&Oe(e),ie&&Oe(x),Wi(C,ie),ie&&Oe(S),Wi(M,ie)}}}function LD(i,e,t){let o=!1;const l=zr.styles[0];Xd.update(()=>l);function u(r){o=r,t(0,o)}function m(r){o=r,t(0,o)}return[o,u,m]}class BD extends xr{constructor(e){super(),Ar(this,e,LD,TD,br,{})}}export{BD as P,O0 as c};
