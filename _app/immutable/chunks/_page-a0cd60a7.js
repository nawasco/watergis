var hx=Object.defineProperty;var fx=(i,e,t)=>e in i?hx(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t;var dl=(i,e,t)=>(fx(i,typeof e!="symbol"?e+"":e,t),t);import{I as xn,J as Yf,K as r4,L as dx,S as br,i as wr,s as mr,C as ur,M as Yi,k as Ht,l as Gt,m as $t,h as De,N as nr,b as jt,O as tr,D as cr,E as hr,F as fr,P as xr,Q as so,f as vt,t as Lt,R as Lo,T as Yn,U as yo,o as ks,V as po,W as cg,X as bn,v as ou,w as en,e as kn,x as un,y as tn,Y as Eo,d as Or,z as nn,Z as xs,_ as as,$ as nh,g as Fr,a0 as Jp,a1 as Qp,a2 as qy,B as go,a3 as px,a as Wi,q as Kn,c as Xi,r as Jn,n as qt,a4 as tc,G as Ut,a5 as $u,a6 as Ja,H as Yo,p as Ou,a7 as j0,a8 as $0,u as Os,a9 as mx,aa as ep,ab as Uo,ac as o4,ad as Vo,ae as Ud,af as Id,ag as vl,ah as hg,A as gx,ai as O0,aj as s4,ak as a4}from"./index-6dd75127.js";import{r as yx,w as Nl}from"./singletons-4221d4bf.js";import{_ as d1}from"./preload-helper-aa6bc0ce.js";import{p as _x}from"./stores-abebb1e8.js";var L2=function(i,e){return L2=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,o){t.__proto__=o}||function(t,o){for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&(t[l]=o[l])},L2(i,e)};function jl(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");L2(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var fs=function(){return fs=Object.assign||function(e){for(var t,o=1,l=arguments.length;o<l;o++){t=arguments[o];for(var u in t)Object.prototype.hasOwnProperty.call(t,u)&&(e[u]=t[u])}return e},fs.apply(this,arguments)};function Ih(i){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&i[e],o=0;if(t)return t.call(i);if(i&&typeof i.length=="number")return{next:function(){return i&&o>=i.length&&(i=void 0),{value:i&&i[o++],done:!i}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}/**
 * @license
 * Copyright 2016 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var oc=function(){function i(e){e===void 0&&(e={}),this.adapter=e}return Object.defineProperty(i,"cssClasses",{get:function(){return{}},enumerable:!1,configurable:!0}),Object.defineProperty(i,"strings",{get:function(){return{}},enumerable:!1,configurable:!0}),Object.defineProperty(i,"numbers",{get:function(){return{}},enumerable:!1,configurable:!0}),Object.defineProperty(i,"defaultAdapter",{get:function(){return{}},enumerable:!1,configurable:!0}),i.prototype.init=function(){},i.prototype.destroy=function(){},i}();/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */function vx(i){return i===void 0&&(i=window),bx(i)?{passive:!0}:!1}function bx(i){i===void 0&&(i=window);var e=!1;try{var t={get passive(){return e=!0,!1}},o=function(){};i.document.addEventListener("test",o,t),i.document.removeEventListener("test",o,t)}catch{e=!1}return e}const l4=Object.freeze(Object.defineProperty({__proto__:null,applyPassive:vx},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */function wx(i,e){if(i.closest)return i.closest(e);for(var t=i;t;){if(u4(t,e))return t;t=t.parentElement}return null}function u4(i,e){var t=i.matches||i.webkitMatchesSelector||i.msMatchesSelector;return t.call(i,e)}function xx(i){var e=i;if(e.offsetParent!==null)return e.scrollWidth;var t=e.cloneNode(!0);t.style.setProperty("position","absolute"),t.style.setProperty("transform","translate(-9999px, -9999px)"),document.documentElement.appendChild(t);var o=t.scrollWidth;return document.documentElement.removeChild(t),o}const E1=Object.freeze(Object.defineProperty({__proto__:null,closest:wx,matches:u4,estimateScrollWidth:xx},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2016 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var Ax={BG_FOCUSED:"mdc-ripple-upgraded--background-focused",FG_ACTIVATION:"mdc-ripple-upgraded--foreground-activation",FG_DEACTIVATION:"mdc-ripple-upgraded--foreground-deactivation",ROOT:"mdc-ripple-upgraded",UNBOUNDED:"mdc-ripple-upgraded--unbounded"},kx={VAR_FG_SCALE:"--mdc-ripple-fg-scale",VAR_FG_SIZE:"--mdc-ripple-fg-size",VAR_FG_TRANSLATE_END:"--mdc-ripple-fg-translate-end",VAR_FG_TRANSLATE_START:"--mdc-ripple-fg-translate-start",VAR_LEFT:"--mdc-ripple-left",VAR_TOP:"--mdc-ripple-top"},Hy={DEACTIVATION_TIMEOUT_MS:225,FG_DEACTIVATION_MS:150,INITIAL_ORIGIN_SCALE:.6,PADDING:10,TAP_DELAY_MS:300},Dp;function Sx(i,e){e===void 0&&(e=!1);var t=i.CSS,o=Dp;if(typeof Dp=="boolean"&&!e)return Dp;var l=t&&typeof t.supports=="function";if(!l)return!1;var u=t.supports("--css-vars","yes"),m=t.supports("(--css-vars: yes)")&&t.supports("color","#00000000");return o=u||m,e||(Dp=o),o}function Cx(i,e,t){if(!i)return{x:0,y:0};var o=e.x,l=e.y,u=o+t.left,m=l+t.top,r,f;if(i.type==="touchstart"){var _=i;r=_.changedTouches[0].pageX-u,f=_.changedTouches[0].pageY-m}else{var b=i;r=b.pageX-u,f=b.pageY-m}return{x:r,y:f}}/**
 * @license
 * Copyright 2016 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var Gy=["touchstart","pointerdown","mousedown","keydown"],Wy=["touchend","pointerup","mouseup","contextmenu"],Op=[],Ex=function(i){jl(e,i);function e(t){var o=i.call(this,fs(fs({},e.defaultAdapter),t))||this;return o.activationAnimationHasEnded=!1,o.activationTimer=0,o.fgDeactivationRemovalTimer=0,o.fgScale="0",o.frame={width:0,height:0},o.initialSize=0,o.layoutFrame=0,o.maxRadius=0,o.unboundedCoords={left:0,top:0},o.activationState=o.defaultActivationState(),o.activationTimerCallback=function(){o.activationAnimationHasEnded=!0,o.runDeactivationUXLogicIfReady()},o.activateHandler=function(l){o.activateImpl(l)},o.deactivateHandler=function(){o.deactivateImpl()},o.focusHandler=function(){o.handleFocus()},o.blurHandler=function(){o.handleBlur()},o.resizeHandler=function(){o.layout()},o}return Object.defineProperty(e,"cssClasses",{get:function(){return Ax},enumerable:!1,configurable:!0}),Object.defineProperty(e,"strings",{get:function(){return kx},enumerable:!1,configurable:!0}),Object.defineProperty(e,"numbers",{get:function(){return Hy},enumerable:!1,configurable:!0}),Object.defineProperty(e,"defaultAdapter",{get:function(){return{addClass:function(){},browserSupportsCssVars:function(){return!0},computeBoundingRect:function(){return{top:0,right:0,bottom:0,left:0,width:0,height:0}},containsEventTarget:function(){return!0},deregisterDocumentInteractionHandler:function(){},deregisterInteractionHandler:function(){},deregisterResizeHandler:function(){},getWindowPageOffset:function(){return{x:0,y:0}},isSurfaceActive:function(){return!0},isSurfaceDisabled:function(){return!0},isUnbounded:function(){return!0},registerDocumentInteractionHandler:function(){},registerInteractionHandler:function(){},registerResizeHandler:function(){},removeClass:function(){},updateCssVariable:function(){}}},enumerable:!1,configurable:!0}),e.prototype.init=function(){var t=this,o=this.supportsPressRipple();if(this.registerRootHandlers(o),o){var l=e.cssClasses,u=l.ROOT,m=l.UNBOUNDED;requestAnimationFrame(function(){t.adapter.addClass(u),t.adapter.isUnbounded()&&(t.adapter.addClass(m),t.layoutInternal())})}},e.prototype.destroy=function(){var t=this;if(this.supportsPressRipple()){this.activationTimer&&(clearTimeout(this.activationTimer),this.activationTimer=0,this.adapter.removeClass(e.cssClasses.FG_ACTIVATION)),this.fgDeactivationRemovalTimer&&(clearTimeout(this.fgDeactivationRemovalTimer),this.fgDeactivationRemovalTimer=0,this.adapter.removeClass(e.cssClasses.FG_DEACTIVATION));var o=e.cssClasses,l=o.ROOT,u=o.UNBOUNDED;requestAnimationFrame(function(){t.adapter.removeClass(l),t.adapter.removeClass(u),t.removeCssVars()})}this.deregisterRootHandlers(),this.deregisterDeactivationHandlers()},e.prototype.activate=function(t){this.activateImpl(t)},e.prototype.deactivate=function(){this.deactivateImpl()},e.prototype.layout=function(){var t=this;this.layoutFrame&&cancelAnimationFrame(this.layoutFrame),this.layoutFrame=requestAnimationFrame(function(){t.layoutInternal(),t.layoutFrame=0})},e.prototype.setUnbounded=function(t){var o=e.cssClasses.UNBOUNDED;t?this.adapter.addClass(o):this.adapter.removeClass(o)},e.prototype.handleFocus=function(){var t=this;requestAnimationFrame(function(){return t.adapter.addClass(e.cssClasses.BG_FOCUSED)})},e.prototype.handleBlur=function(){var t=this;requestAnimationFrame(function(){return t.adapter.removeClass(e.cssClasses.BG_FOCUSED)})},e.prototype.supportsPressRipple=function(){return this.adapter.browserSupportsCssVars()},e.prototype.defaultActivationState=function(){return{activationEvent:void 0,hasDeactivationUXRun:!1,isActivated:!1,isProgrammatic:!1,wasActivatedByPointer:!1,wasElementMadeActive:!1}},e.prototype.registerRootHandlers=function(t){var o,l;if(t){try{for(var u=Ih(Gy),m=u.next();!m.done;m=u.next()){var r=m.value;this.adapter.registerInteractionHandler(r,this.activateHandler)}}catch(f){o={error:f}}finally{try{m&&!m.done&&(l=u.return)&&l.call(u)}finally{if(o)throw o.error}}this.adapter.isUnbounded()&&this.adapter.registerResizeHandler(this.resizeHandler)}this.adapter.registerInteractionHandler("focus",this.focusHandler),this.adapter.registerInteractionHandler("blur",this.blurHandler)},e.prototype.registerDeactivationHandlers=function(t){var o,l;if(t.type==="keydown")this.adapter.registerInteractionHandler("keyup",this.deactivateHandler);else try{for(var u=Ih(Wy),m=u.next();!m.done;m=u.next()){var r=m.value;this.adapter.registerDocumentInteractionHandler(r,this.deactivateHandler)}}catch(f){o={error:f}}finally{try{m&&!m.done&&(l=u.return)&&l.call(u)}finally{if(o)throw o.error}}},e.prototype.deregisterRootHandlers=function(){var t,o;try{for(var l=Ih(Gy),u=l.next();!u.done;u=l.next()){var m=u.value;this.adapter.deregisterInteractionHandler(m,this.activateHandler)}}catch(r){t={error:r}}finally{try{u&&!u.done&&(o=l.return)&&o.call(l)}finally{if(t)throw t.error}}this.adapter.deregisterInteractionHandler("focus",this.focusHandler),this.adapter.deregisterInteractionHandler("blur",this.blurHandler),this.adapter.isUnbounded()&&this.adapter.deregisterResizeHandler(this.resizeHandler)},e.prototype.deregisterDeactivationHandlers=function(){var t,o;this.adapter.deregisterInteractionHandler("keyup",this.deactivateHandler);try{for(var l=Ih(Wy),u=l.next();!u.done;u=l.next()){var m=u.value;this.adapter.deregisterDocumentInteractionHandler(m,this.deactivateHandler)}}catch(r){t={error:r}}finally{try{u&&!u.done&&(o=l.return)&&o.call(l)}finally{if(t)throw t.error}}},e.prototype.removeCssVars=function(){var t=this,o=e.strings,l=Object.keys(o);l.forEach(function(u){u.indexOf("VAR_")===0&&t.adapter.updateCssVariable(o[u],null)})},e.prototype.activateImpl=function(t){var o=this;if(!this.adapter.isSurfaceDisabled()){var l=this.activationState;if(!l.isActivated){var u=this.previousActivationEvent,m=u&&t!==void 0&&u.type!==t.type;if(!m){l.isActivated=!0,l.isProgrammatic=t===void 0,l.activationEvent=t,l.wasActivatedByPointer=l.isProgrammatic?!1:t!==void 0&&(t.type==="mousedown"||t.type==="touchstart"||t.type==="pointerdown");var r=t!==void 0&&Op.length>0&&Op.some(function(f){return o.adapter.containsEventTarget(f)});if(r){this.resetActivationState();return}t!==void 0&&(Op.push(t.target),this.registerDeactivationHandlers(t)),l.wasElementMadeActive=this.checkElementMadeActive(t),l.wasElementMadeActive&&this.animateActivation(),requestAnimationFrame(function(){Op=[],!l.wasElementMadeActive&&t!==void 0&&(t.key===" "||t.keyCode===32)&&(l.wasElementMadeActive=o.checkElementMadeActive(t),l.wasElementMadeActive&&o.animateActivation()),l.wasElementMadeActive||(o.activationState=o.defaultActivationState())})}}}},e.prototype.checkElementMadeActive=function(t){return t!==void 0&&t.type==="keydown"?this.adapter.isSurfaceActive():!0},e.prototype.animateActivation=function(){var t=this,o=e.strings,l=o.VAR_FG_TRANSLATE_START,u=o.VAR_FG_TRANSLATE_END,m=e.cssClasses,r=m.FG_DEACTIVATION,f=m.FG_ACTIVATION,_=e.numbers.DEACTIVATION_TIMEOUT_MS;this.layoutInternal();var b="",v="";if(!this.adapter.isUnbounded()){var w=this.getFgTranslationCoordinates(),x=w.startPoint,C=w.endPoint;b=x.x+"px, "+x.y+"px",v=C.x+"px, "+C.y+"px"}this.adapter.updateCssVariable(l,b),this.adapter.updateCssVariable(u,v),clearTimeout(this.activationTimer),clearTimeout(this.fgDeactivationRemovalTimer),this.rmBoundedActivationClasses(),this.adapter.removeClass(r),this.adapter.computeBoundingRect(),this.adapter.addClass(f),this.activationTimer=setTimeout(function(){t.activationTimerCallback()},_)},e.prototype.getFgTranslationCoordinates=function(){var t=this.activationState,o=t.activationEvent,l=t.wasActivatedByPointer,u;l?u=Cx(o,this.adapter.getWindowPageOffset(),this.adapter.computeBoundingRect()):u={x:this.frame.width/2,y:this.frame.height/2},u={x:u.x-this.initialSize/2,y:u.y-this.initialSize/2};var m={x:this.frame.width/2-this.initialSize/2,y:this.frame.height/2-this.initialSize/2};return{startPoint:u,endPoint:m}},e.prototype.runDeactivationUXLogicIfReady=function(){var t=this,o=e.cssClasses.FG_DEACTIVATION,l=this.activationState,u=l.hasDeactivationUXRun,m=l.isActivated,r=u||!m;r&&this.activationAnimationHasEnded&&(this.rmBoundedActivationClasses(),this.adapter.addClass(o),this.fgDeactivationRemovalTimer=setTimeout(function(){t.adapter.removeClass(o)},Hy.FG_DEACTIVATION_MS))},e.prototype.rmBoundedActivationClasses=function(){var t=e.cssClasses.FG_ACTIVATION;this.adapter.removeClass(t),this.activationAnimationHasEnded=!1,this.adapter.computeBoundingRect()},e.prototype.resetActivationState=function(){var t=this;this.previousActivationEvent=this.activationState.activationEvent,this.activationState=this.defaultActivationState(),setTimeout(function(){return t.previousActivationEvent=void 0},e.numbers.TAP_DELAY_MS)},e.prototype.deactivateImpl=function(){var t=this,o=this.activationState;if(!!o.isActivated){var l=fs({},o);o.isProgrammatic?(requestAnimationFrame(function(){t.animateDeactivation(l)}),this.resetActivationState()):(this.deregisterDeactivationHandlers(),requestAnimationFrame(function(){t.activationState.hasDeactivationUXRun=!0,t.animateDeactivation(l),t.resetActivationState()}))}},e.prototype.animateDeactivation=function(t){var o=t.wasActivatedByPointer,l=t.wasElementMadeActive;(o||l)&&this.runDeactivationUXLogicIfReady()},e.prototype.layoutInternal=function(){var t=this;this.frame=this.adapter.computeBoundingRect();var o=Math.max(this.frame.height,this.frame.width),l=function(){var m=Math.sqrt(Math.pow(t.frame.width,2)+Math.pow(t.frame.height,2));return m+e.numbers.PADDING};this.maxRadius=this.adapter.isUnbounded()?o:l();var u=Math.floor(o*e.numbers.INITIAL_ORIGIN_SCALE);this.adapter.isUnbounded()&&u%2!==0?this.initialSize=u-1:this.initialSize=u,this.fgScale=""+this.maxRadius/this.initialSize,this.updateLayoutCssVars()},e.prototype.updateLayoutCssVars=function(){var t=e.strings,o=t.VAR_FG_SIZE,l=t.VAR_LEFT,u=t.VAR_TOP,m=t.VAR_FG_SCALE;this.adapter.updateCssVariable(o,this.initialSize+"px"),this.adapter.updateCssVariable(m,this.fgScale),this.adapter.isUnbounded()&&(this.unboundedCoords={left:Math.round(this.frame.width/2-this.initialSize/2),top:Math.round(this.frame.height/2-this.initialSize/2)},this.adapter.updateCssVariable(l,this.unboundedCoords.left+"px"),this.adapter.updateCssVariable(u,this.unboundedCoords.top+"px"))},e}(oc);/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var qf={FIXED_CLASS:"mdc-top-app-bar--fixed",FIXED_SCROLLED_CLASS:"mdc-top-app-bar--fixed-scrolled",SHORT_CLASS:"mdc-top-app-bar--short",SHORT_COLLAPSED_CLASS:"mdc-top-app-bar--short-collapsed",SHORT_HAS_ACTION_ITEM_CLASS:"mdc-top-app-bar--short-has-action-item"},$p={DEBOUNCE_THROTTLE_RESIZE_TIME_MS:100,MAX_TOP_APP_BAR_HEIGHT:128},Ix={ACTION_ITEM_SELECTOR:".mdc-top-app-bar__action-item",NAVIGATION_EVENT:"MDCTopAppBar:nav",NAVIGATION_ICON_SELECTOR:".mdc-top-app-bar__navigation-icon",ROOT_SELECTOR:".mdc-top-app-bar",TITLE_SELECTOR:".mdc-top-app-bar__title"};/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var fg=function(i){jl(e,i);function e(t){return i.call(this,fs(fs({},e.defaultAdapter),t))||this}return Object.defineProperty(e,"strings",{get:function(){return Ix},enumerable:!1,configurable:!0}),Object.defineProperty(e,"cssClasses",{get:function(){return qf},enumerable:!1,configurable:!0}),Object.defineProperty(e,"numbers",{get:function(){return $p},enumerable:!1,configurable:!0}),Object.defineProperty(e,"defaultAdapter",{get:function(){return{addClass:function(){},removeClass:function(){},hasClass:function(){return!1},setStyle:function(){},getTopAppBarHeight:function(){return 0},notifyNavigationIconClicked:function(){},getViewportScrollY:function(){return 0},getTotalActionItems:function(){return 0}}},enumerable:!1,configurable:!0}),e.prototype.handleTargetScroll=function(){},e.prototype.handleWindowResize=function(){},e.prototype.handleNavigationClick=function(){this.adapter.notifyNavigationIconClicked()},e}(oc);/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var Fp=0,c4=function(i){jl(e,i);function e(t){var o=i.call(this,t)||this;return o.wasDocked=!0,o.isDockedShowing=!0,o.currentAppBarOffsetTop=0,o.isCurrentlyBeingResized=!1,o.resizeThrottleId=Fp,o.resizeDebounceId=Fp,o.lastScrollPosition=o.adapter.getViewportScrollY(),o.topAppBarHeight=o.adapter.getTopAppBarHeight(),o}return e.prototype.destroy=function(){i.prototype.destroy.call(this),this.adapter.setStyle("top","")},e.prototype.handleTargetScroll=function(){var t=Math.max(this.adapter.getViewportScrollY(),0),o=t-this.lastScrollPosition;this.lastScrollPosition=t,this.isCurrentlyBeingResized||(this.currentAppBarOffsetTop-=o,this.currentAppBarOffsetTop>0?this.currentAppBarOffsetTop=0:Math.abs(this.currentAppBarOffsetTop)>this.topAppBarHeight&&(this.currentAppBarOffsetTop=-this.topAppBarHeight),this.moveTopAppBar())},e.prototype.handleWindowResize=function(){var t=this;this.resizeThrottleId||(this.resizeThrottleId=setTimeout(function(){t.resizeThrottleId=Fp,t.throttledResizeHandler()},$p.DEBOUNCE_THROTTLE_RESIZE_TIME_MS)),this.isCurrentlyBeingResized=!0,this.resizeDebounceId&&clearTimeout(this.resizeDebounceId),this.resizeDebounceId=setTimeout(function(){t.handleTargetScroll(),t.isCurrentlyBeingResized=!1,t.resizeDebounceId=Fp},$p.DEBOUNCE_THROTTLE_RESIZE_TIME_MS)},e.prototype.checkForUpdate=function(){var t=-this.topAppBarHeight,o=this.currentAppBarOffsetTop<0,l=this.currentAppBarOffsetTop>t,u=o&&l;if(u)this.wasDocked=!1;else if(this.wasDocked){if(this.isDockedShowing!==l)return this.isDockedShowing=l,!0}else return this.wasDocked=!0,!0;return u},e.prototype.moveTopAppBar=function(){if(this.checkForUpdate()){var t=this.currentAppBarOffsetTop;Math.abs(t)>=this.topAppBarHeight&&(t=-$p.MAX_TOP_APP_BAR_HEIGHT),this.adapter.setStyle("top",t+"px")}},e.prototype.throttledResizeHandler=function(){var t=this.adapter.getTopAppBarHeight();this.topAppBarHeight!==t&&(this.wasDocked=!1,this.currentAppBarOffsetTop-=this.topAppBarHeight-t,this.topAppBarHeight=t),this.handleTargetScroll()},e}(fg);/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var Tx=function(i){jl(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.wasScrolled=!1,t}return e.prototype.handleTargetScroll=function(){var t=this.adapter.getViewportScrollY();t<=0?this.wasScrolled&&(this.adapter.removeClass(qf.FIXED_SCROLLED_CLASS),this.wasScrolled=!1):this.wasScrolled||(this.adapter.addClass(qf.FIXED_SCROLLED_CLASS),this.wasScrolled=!0)},e}(c4);/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var Lx=function(i){jl(e,i);function e(t){var o=i.call(this,t)||this;return o.collapsed=!1,o.isAlwaysCollapsed=!1,o}return Object.defineProperty(e.prototype,"isCollapsed",{get:function(){return this.collapsed},enumerable:!1,configurable:!0}),e.prototype.init=function(){i.prototype.init.call(this),this.adapter.getTotalActionItems()>0&&this.adapter.addClass(qf.SHORT_HAS_ACTION_ITEM_CLASS),this.setAlwaysCollapsed(this.adapter.hasClass(qf.SHORT_COLLAPSED_CLASS))},e.prototype.setAlwaysCollapsed=function(t){this.isAlwaysCollapsed=!!t,this.isAlwaysCollapsed?this.collapse():this.maybeCollapseBar()},e.prototype.getAlwaysCollapsed=function(){return this.isAlwaysCollapsed},e.prototype.handleTargetScroll=function(){this.maybeCollapseBar()},e.prototype.maybeCollapseBar=function(){if(!this.isAlwaysCollapsed){var t=this.adapter.getViewportScrollY();t<=0?this.collapsed&&this.uncollapse():this.collapsed||this.collapse()}},e.prototype.uncollapse=function(){this.adapter.removeClass(qf.SHORT_COLLAPSED_CLASS),this.collapsed=!1},e.prototype.collapse=function(){this.adapter.addClass(qf.SHORT_COLLAPSED_CLASS),this.collapsed=!0},e}(fg);function sr(i){return Object.entries(i).filter(([e,t])=>e!==""&&t).map(([e])=>e).join(" ")}function Do(i,e,t,o={bubbles:!0},l=!1){if(typeof Event<"u"&&i){const u=new CustomEvent(e,Object.assign(Object.assign({},o),{detail:t}));if(i==null||i.dispatchEvent(u),l&&e.startsWith("SMUI")){const m=new CustomEvent(e.replace(/^SMUI/g,()=>"MDC"),Object.assign(Object.assign({},o),{detail:t}));i==null||i.dispatchEvent(m),m.defaultPrevented&&u.preventDefault()}return u}}function ff(i,e){let t=Object.getOwnPropertyNames(i);const o={};for(let l=0;l<t.length;l++){const u=t[l],m=u.indexOf("$");m!==-1&&e.indexOf(u.substring(0,m+1))!==-1||e.indexOf(u)===-1&&(o[u]=i[u])}return o}const Xy=/^[a-z]+(?::(?:preventDefault|stopPropagation|passive|nonpassive|capture|once|self))+$/,Px=/^[^$]+(?:\$(?:preventDefault|stopPropagation|passive|nonpassive|capture|once|self))+$/;function _o(i){let e,t=[];i.$on=(l,u)=>{let m=l,r=()=>{};return e?r=e(m,u):t.push([m,u]),m.match(Xy)&&console&&console.warn('Event modifiers in SMUI now use "$" instead of ":", so that all events can be bound with modifiers. Please update your event binding: ',m),()=>{r()}};function o(l){Yf(i,l)}return l=>{const u=[],m={};e=(r,f)=>{let _=r,b=f,v=!1;const w=_.match(Xy),x=_.match(Px),C=w||x;if(_.match(/^SMUI:\w+:/)){const M=_.split(":");let O="";for(let V=0;V<M.length;V++)O+=V===M.length-1?":"+M[V]:M[V].split("-").map(X=>X.slice(0,1).toUpperCase()+X.slice(1)).join("");console.warn(`The event ${_.split("$")[0]} has been renamed to ${O.split("$")[0]}.`),_=O}if(C){const M=_.split(w?":":"$");_=M[0];const O=Object.fromEntries(M.slice(1).map(V=>[V,!0]));O.passive&&(v=v||{},v.passive=!0),O.nonpassive&&(v=v||{},v.passive=!1),O.capture&&(v=v||{},v.capture=!0),O.once&&(v=v||{},v.once=!0),O.preventDefault&&(b=r4(b)),O.stopPropagation&&(b=dx(b))}const T=xn(l,_,b,v),S=()=>{T();const M=u.indexOf(S);M>-1&&u.splice(M,1)};return u.push(S),_ in m||(m[_]=xn(l,_,o)),S};for(let r=0;r<t.length;r++)e(t[r][0],t[r][1]);return{destroy:()=>{for(let r=0;r<u.length;r++)u[r]();for(let r of Object.entries(m))r[1]()}}}}function fo(i,e){let t=Object.getOwnPropertyNames(i);const o={};for(let l=0;l<t.length;l++){const u=t[l];u.substring(0,e.length)===e&&(o[u.substring(e.length)]=i[u])}return o}function To(i,e){let t=[];if(e)for(let o=0;o<e.length;o++){const l=e[o],u=Array.isArray(l)?l[0]:l;Array.isArray(l)&&l.length>1?t.push(u(i,l[1])):t.push(u(i))}return{update(o){if((o&&o.length||0)!=t.length)throw new Error("You must not change the length of an actions array.");if(o)for(let l=0;l<o.length;l++){const u=t[l];if(u&&u.update){const m=o[l];Array.isArray(m)&&m.length>1?u.update(m[1]):u.update()}}},destroy(){for(let o=0;o<t.length;o++){const l=t[o];l&&l.destroy&&l.destroy()}}}}const{window:Yy}=cg;function Mx(i){let e,t,o,l,u,m,r;const f=i[22].default,_=ur(f,i,i[21],null);let b=[{class:t=sr({[i[2]]:!0,"mdc-top-app-bar":!0,"mdc-top-app-bar--short":i[4]==="short","mdc-top-app-bar--short-collapsed":i[0],"mdc-top-app-bar--fixed":i[4]==="fixed","smui-top-app-bar--static":i[4]==="static","smui-top-app-bar--color-secondary":i[5]==="secondary","mdc-top-app-bar--prominent":i[6],"mdc-top-app-bar--dense":i[7],...i[11]})},{style:o=Object.entries(i[12]).map(Zy).concat([i[3]]).join(" ")},i[15]],v={};for(let w=0;w<b.length;w+=1)v=Yi(v,b[w]);return{c(){e=Ht("header"),_&&_.c(),this.h()},l(w){e=Gt(w,"HEADER",{class:!0,style:!0});var x=$t(e);_&&_.l(x),x.forEach(De),this.h()},h(){nr(e,v)},m(w,x){jt(w,e,x),_&&_.m(e,null),i[25](e),u=!0,m||(r=[xn(Yy,"resize",i[23]),xn(Yy,"scroll",i[24]),tr(l=To.call(null,e,i[1])),tr(i[13].call(null,e)),xn(e,"SMUITopAppBarIconButton:nav",i[26])],m=!0)},p(w,x){_&&_.p&&(!u||x[0]&2097152)&&cr(_,f,w,w[21],u?fr(f,w[21],x,null):hr(w[21]),null),nr(e,v=xr(b,[(!u||x[0]&2293&&t!==(t=sr({[w[2]]:!0,"mdc-top-app-bar":!0,"mdc-top-app-bar--short":w[4]==="short","mdc-top-app-bar--short-collapsed":w[0],"mdc-top-app-bar--fixed":w[4]==="fixed","smui-top-app-bar--static":w[4]==="static","smui-top-app-bar--color-secondary":w[5]==="secondary","mdc-top-app-bar--prominent":w[6],"mdc-top-app-bar--dense":w[7],...w[11]})))&&{class:t},(!u||x[0]&4104&&o!==(o=Object.entries(w[12]).map(Zy).concat([w[3]]).join(" ")))&&{style:o},x[0]&32768&&w[15]])),l&&so(l.update)&&x[0]&2&&l.update.call(null,w[1])},i(w){u||(vt(_,w),u=!0)},o(w){Lt(_,w),u=!1},d(w){w&&De(e),_&&_.d(w),i[25](null),m=!1,Lo(r)}}}const Zy=([i,e])=>`${i}: ${e};`;function Dx(i,e,t){const o=["use","class","style","variant","color","collapsed","prominent","dense","scrollTarget","getPropStore","getElement"];let l=Yn(e,o),{$$slots:u={},$$scope:m}=e;const r=_o(yo());let f=()=>{};function _(he){return he===f}let{use:b=[]}=e,{class:v=""}=e,{style:w=""}=e,{variant:x="standard"}=e,{color:C="primary"}=e,{collapsed:T=f}=e;const S=!_(T)&&!!T;_(T)&&(T=!1);let{prominent:M=!1}=e,{dense:O=!1}=e,{scrollTarget:V=void 0}=e,X,Z,te={},J={},ie,Ee=yx({variant:x,prominent:M,dense:O},he=>{t(18,ie=he)}),Pe,de=x;ks(()=>(t(9,Z=Te()),Z.init(),()=>{Z.destroy()}));function Te(){const he={static:fg,short:Lx,fixed:Tx}[x]||c4;return new he({hasClass:ve,addClass:_e,removeClass:ot,setStyle:it,getTopAppBarHeight:()=>X.clientHeight,notifyNavigationIconClicked:()=>Do(X,"SMUITopAppBar:nav",void 0,void 0,!0),getViewportScrollY:()=>V==null?window.pageYOffset:V.scrollTop,getTotalActionItems:()=>X.querySelectorAll(".mdc-top-app-bar__action-item").length})}function ve(he){return he in te?te[he]:we().classList.contains(he)}function _e(he){te[he]||t(11,te[he]=!0,te)}function ot(he){(!(he in te)||te[he])&&t(11,te[he]=!1,te)}function it(he,me){J[he]!=me&&(me===""||me==null?(delete J[he],t(12,J),t(20,de),t(4,x),t(9,Z)):t(12,J[he]=me,J))}function It(){Z&&(Z.handleTargetScroll(),x==="short"&&t(0,T="isCollapsed"in Z&&Z.isCollapsed))}function Xe(){return Ee}function we(){return X}const Ce=()=>x!=="short"&&x!=="fixed"&&Z&&Z.handleWindowResize(),Re=()=>V==null&&It();function le(he){bn[he?"unshift":"push"](()=>{X=he,t(10,X)})}const Se=()=>Z&&Z.handleNavigationClick();return i.$$set=he=>{e=Yi(Yi({},e),po(he)),t(15,l=Yn(e,o)),"use"in he&&t(1,b=he.use),"class"in he&&t(2,v=he.class),"style"in he&&t(3,w=he.style),"variant"in he&&t(4,x=he.variant),"color"in he&&t(5,C=he.color),"collapsed"in he&&t(0,T=he.collapsed),"prominent"in he&&t(6,M=he.prominent),"dense"in he&&t(7,O=he.dense),"scrollTarget"in he&&t(8,V=he.scrollTarget),"$$scope"in he&&t(21,m=he.$$scope)},i.$$.update=()=>{i.$$.dirty[0]&262352&&ie&&ie({variant:x,prominent:M,dense:O}),i.$$.dirty[0]&1049104&&de!==x&&Z&&(t(20,de=x),Z.destroy(),t(11,te={}),t(12,J={}),t(9,Z=Te()),Z.init()),i.$$.dirty[0]&528&&Z&&x==="short"&&"setAlwaysCollapsed"in Z&&Z.setAlwaysCollapsed(S),i.$$.dirty[0]&524544&&Pe!==V&&(Pe&&Pe.removeEventListener("scroll",It),V&&V.addEventListener("scroll",It),t(19,Pe=V))},[T,b,v,w,x,C,M,O,V,Z,X,te,J,r,It,l,Xe,we,ie,Pe,de,m,u,Ce,Re,le,Se]}class Ox extends br{constructor(e){super(),wr(this,e,Dx,Mx,mr,{use:1,class:2,style:3,variant:4,color:5,collapsed:0,prominent:6,dense:7,scrollTarget:8,getPropStore:16,getElement:17},null,[-1,-1])}get getPropStore(){return this.$$.ctx[16]}get getElement(){return this.$$.ctx[17]}}function Fx(i){let e,t,o,l,u;const m=i[6].default,r=ur(m,i,i[5],null);let f=[i[3]],_={};for(let b=0;b<f.length;b+=1)_=Yi(_,f[b]);return{c(){e=Ht("div"),r&&r.c(),this.h()},l(b){e=Gt(b,"DIV",{});var v=$t(e);r&&r.l(v),v.forEach(De),this.h()},h(){nr(e,_)},m(b,v){jt(b,e,v),r&&r.m(e,null),i[7](e),o=!0,l||(u=[tr(t=To.call(null,e,i[0])),tr(i[2].call(null,e))],l=!0)},p(b,[v]){r&&r.p&&(!o||v&32)&&cr(r,m,b,b[5],o?fr(m,b[5],v,null):hr(b[5]),null),nr(e,_=xr(f,[v&8&&b[3]])),t&&so(t.update)&&v&1&&t.update.call(null,b[0])},i(b){o||(vt(r,b),o=!0)},o(b){Lt(r,b),o=!1},d(b){b&&De(e),r&&r.d(b),i[7](null),l=!1,Lo(u)}}}function Rx(i,e,t){const o=["use","getElement"];let l=Yn(e,o),{$$slots:u={},$$scope:m}=e,{use:r=[]}=e;const f=_o(yo());let _;function b(){return _}function v(w){bn[w?"unshift":"push"](()=>{_=w,t(1,_)})}return i.$$set=w=>{e=Yi(Yi({},e),po(w)),t(3,l=Yn(e,o)),"use"in w&&t(0,r=w.use),"$$scope"in w&&t(5,m=w.$$scope)},[r,_,f,l,b,m,u,v]}class h4 extends br{constructor(e){super(),wr(this,e,Rx,Fx,mr,{use:0,getElement:4})}get getElement(){return this.$$.ctx[4]}}function Bx(i){let e;const t=i[10].default,o=ur(t,i,i[12],null);return{c(){o&&o.c()},l(l){o&&o.l(l)},m(l,u){o&&o.m(l,u),e=!0},p(l,u){o&&o.p&&(!e||u&4096)&&cr(o,t,l,l[12],e?fr(t,l[12],u,null):hr(l[12]),null)},i(l){e||(vt(o,l),e=!0)},o(l){Lt(o,l),e=!1},d(l){o&&o.d(l)}}}function zx(i){let e,t,o;const l=[{use:[i[7],...i[0]]},{class:sr({[i[1]]:!0,[i[5]]:!0,...i[4]})},i[6],i[8]];var u=i[2];function m(r){let f={$$slots:{default:[Bx]},$$scope:{ctx:r}};for(let _=0;_<l.length;_+=1)f=Yi(f,l[_]);return{props:f}}return u&&(e=ou(u,m(i)),i[11](e)),{c(){e&&en(e.$$.fragment),t=kn()},l(r){e&&un(e.$$.fragment,r),t=kn()},m(r,f){e&&tn(e,r,f),jt(r,t,f),o=!0},p(r,[f]){const _=f&499?xr(l,[f&129&&{use:[r[7],...r[0]]},f&50&&{class:sr({[r[1]]:!0,[r[5]]:!0,...r[4]})},f&64&&Eo(r[6]),f&256&&Eo(r[8])]):{};if(f&4096&&(_.$$scope={dirty:f,ctx:r}),u!==(u=r[2])){if(e){Fr();const b=e;Lt(b.$$.fragment,1,0,()=>{nn(b,1)}),Or()}u?(e=ou(u,m(r)),r[11](e),en(e.$$.fragment),vt(e.$$.fragment,1),tn(e,t.parentNode,t)):e=null}else u&&e.$set(_)},i(r){o||(e&&vt(e.$$.fragment,r),o=!0)},o(r){e&&Lt(e.$$.fragment,r),o=!1},d(r){i[11](null),r&&De(t),e&&nn(e,r)}}}const rf={component:h4,class:"",classMap:{},contexts:{},props:{}};function Nx(i,e,t){const o=["use","class","component","getElement"];let l=Yn(e,o),{$$slots:u={},$$scope:m}=e,{use:r=[]}=e,{class:f=""}=e,_;const b=rf.class,v={},w=[],x=rf.contexts,C=rf.props;let{component:T=rf.component}=e;Object.entries(rf.classMap).forEach(([V,X])=>{const Z=xs(X);Z&&"subscribe"in Z&&w.push(Z.subscribe(te=>{t(4,v[V]=te,v)}))});const S=_o(yo());for(let V in x)x.hasOwnProperty(V)&&as(V,x[V]);nh(()=>{for(const V of w)V()});function M(){return _.getElement()}function O(V){bn[V?"unshift":"push"](()=>{_=V,t(3,_)})}return i.$$set=V=>{e=Yi(Yi({},e),po(V)),t(8,l=Yn(e,o)),"use"in V&&t(0,r=V.use),"class"in V&&t(1,f=V.class),"component"in V&&t(2,T=V.component),"$$scope"in V&&t(12,m=V.$$scope)},[r,f,T,_,v,b,C,S,l,M,u,O,m]}class jx extends br{constructor(e){super(),wr(this,e,Nx,zx,mr,{use:0,class:1,component:2,getElement:9})}get getElement(){return this.$$.ctx[9]}}const Ky=Object.assign({},rf);function bl(i){return new Proxy(jx,{construct:function(e,t){return Object.assign(rf,Ky,i),new e(...t)},get:function(e,t){return Object.assign(rf,Ky,i),e[t]}})}function Ux(i){let e,t,o,l,u;const m=i[7].default,r=ur(m,i,i[6],null);let f=[{href:i[1]},i[4]],_={};for(let b=0;b<f.length;b+=1)_=Yi(_,f[b]);return{c(){e=Ht("a"),r&&r.c(),this.h()},l(b){e=Gt(b,"A",{href:!0});var v=$t(e);r&&r.l(v),v.forEach(De),this.h()},h(){nr(e,_)},m(b,v){jt(b,e,v),r&&r.m(e,null),i[8](e),o=!0,l||(u=[tr(t=To.call(null,e,i[0])),tr(i[3].call(null,e))],l=!0)},p(b,[v]){r&&r.p&&(!o||v&64)&&cr(r,m,b,b[6],o?fr(m,b[6],v,null):hr(b[6]),null),nr(e,_=xr(f,[(!o||v&2)&&{href:b[1]},v&16&&b[4]])),t&&so(t.update)&&v&1&&t.update.call(null,b[0])},i(b){o||(vt(r,b),o=!0)},o(b){Lt(r,b),o=!1},d(b){b&&De(e),r&&r.d(b),i[8](null),l=!1,Lo(u)}}}function Vx(i,e,t){const o=["use","href","getElement"];let l=Yn(e,o),{$$slots:u={},$$scope:m}=e,{use:r=[]}=e,{href:f="javascript:void(0);"}=e;const _=_o(yo());let b;function v(){return b}function w(x){bn[x?"unshift":"push"](()=>{b=x,t(2,b)})}return i.$$set=x=>{e=Yi(Yi({},e),po(x)),t(4,l=Yn(e,o)),"use"in x&&t(0,r=x.use),"href"in x&&t(1,f=x.href),"$$scope"in x&&t(6,m=x.$$scope)},[r,f,b,_,l,v,m,u,w]}class qx extends br{constructor(e){super(),wr(this,e,Vx,Ux,mr,{use:0,href:1,getElement:5})}get getElement(){return this.$$.ctx[5]}}function Hx(i){let e,t,o,l,u;const m=i[6].default,r=ur(m,i,i[5],null);let f=[i[3]],_={};for(let b=0;b<f.length;b+=1)_=Yi(_,f[b]);return{c(){e=Ht("button"),r&&r.c(),this.h()},l(b){e=Gt(b,"BUTTON",{});var v=$t(e);r&&r.l(v),v.forEach(De),this.h()},h(){nr(e,_)},m(b,v){jt(b,e,v),r&&r.m(e,null),e.autofocus&&e.focus(),i[7](e),o=!0,l||(u=[tr(t=To.call(null,e,i[0])),tr(i[2].call(null,e))],l=!0)},p(b,[v]){r&&r.p&&(!o||v&32)&&cr(r,m,b,b[5],o?fr(m,b[5],v,null):hr(b[5]),null),nr(e,_=xr(f,[v&8&&b[3]])),t&&so(t.update)&&v&1&&t.update.call(null,b[0])},i(b){o||(vt(r,b),o=!0)},o(b){Lt(r,b),o=!1},d(b){b&&De(e),r&&r.d(b),i[7](null),l=!1,Lo(u)}}}function Gx(i,e,t){const o=["use","getElement"];let l=Yn(e,o),{$$slots:u={},$$scope:m}=e,{use:r=[]}=e;const f=_o(yo());let _;function b(){return _}function v(w){bn[w?"unshift":"push"](()=>{_=w,t(1,_)})}return i.$$set=w=>{e=Yi(Yi({},e),po(w)),t(3,l=Yn(e,o)),"use"in w&&t(0,r=w.use),"$$scope"in w&&t(5,m=w.$$scope)},[r,_,f,l,b,m,u,v]}class Wx extends br{constructor(e){super(),wr(this,e,Gx,Hx,mr,{use:0,getElement:4})}get getElement(){return this.$$.ctx[4]}}function Xx(i){let e,t,o,l,u;const m=i[6].default,r=ur(m,i,i[5],null);let f=[i[3]],_={};for(let b=0;b<f.length;b+=1)_=Yi(_,f[b]);return{c(){e=Ht("h3"),r&&r.c(),this.h()},l(b){e=Gt(b,"H3",{});var v=$t(e);r&&r.l(v),v.forEach(De),this.h()},h(){nr(e,_)},m(b,v){jt(b,e,v),r&&r.m(e,null),i[7](e),o=!0,l||(u=[tr(t=To.call(null,e,i[0])),tr(i[2].call(null,e))],l=!0)},p(b,[v]){r&&r.p&&(!o||v&32)&&cr(r,m,b,b[5],o?fr(m,b[5],v,null):hr(b[5]),null),nr(e,_=xr(f,[v&8&&b[3]])),t&&so(t.update)&&v&1&&t.update.call(null,b[0])},i(b){o||(vt(r,b),o=!0)},o(b){Lt(r,b),o=!1},d(b){b&&De(e),r&&r.d(b),i[7](null),l=!1,Lo(u)}}}function Yx(i,e,t){const o=["use","getElement"];let l=Yn(e,o),{$$slots:u={},$$scope:m}=e,{use:r=[]}=e;const f=_o(yo());let _;function b(){return _}function v(w){bn[w?"unshift":"push"](()=>{_=w,t(1,_)})}return i.$$set=w=>{e=Yi(Yi({},e),po(w)),t(3,l=Yn(e,o)),"use"in w&&t(0,r=w.use),"$$scope"in w&&t(5,m=w.$$scope)},[r,_,f,l,b,m,u,v]}class Zx extends br{constructor(e){super(),wr(this,e,Yx,Xx,mr,{use:0,getElement:4})}get getElement(){return this.$$.ctx[4]}}function Kx(i){let e,t,o,l,u;const m=i[6].default,r=ur(m,i,i[5],null);let f=[i[3]],_={};for(let b=0;b<f.length;b+=1)_=Yi(_,f[b]);return{c(){e=Ht("h5"),r&&r.c(),this.h()},l(b){e=Gt(b,"H5",{});var v=$t(e);r&&r.l(v),v.forEach(De),this.h()},h(){nr(e,_)},m(b,v){jt(b,e,v),r&&r.m(e,null),i[7](e),o=!0,l||(u=[tr(t=To.call(null,e,i[0])),tr(i[2].call(null,e))],l=!0)},p(b,[v]){r&&r.p&&(!o||v&32)&&cr(r,m,b,b[5],o?fr(m,b[5],v,null):hr(b[5]),null),nr(e,_=xr(f,[v&8&&b[3]])),t&&so(t.update)&&v&1&&t.update.call(null,b[0])},i(b){o||(vt(r,b),o=!0)},o(b){Lt(r,b),o=!1},d(b){b&&De(e),r&&r.d(b),i[7](null),l=!1,Lo(u)}}}function Jx(i,e,t){const o=["use","getElement"];let l=Yn(e,o),{$$slots:u={},$$scope:m}=e,{use:r=[]}=e;const f=_o(yo());let _;function b(){return _}function v(w){bn[w?"unshift":"push"](()=>{_=w,t(1,_)})}return i.$$set=w=>{e=Yi(Yi({},e),po(w)),t(3,l=Yn(e,o)),"use"in w&&t(0,r=w.use),"$$scope"in w&&t(5,m=w.$$scope)},[r,_,f,l,b,m,u,v]}class Qx extends br{constructor(e){super(),wr(this,e,Jx,Kx,mr,{use:0,getElement:4})}get getElement(){return this.$$.ctx[4]}}function $x(i){let e,t,o,l,u;const m=i[6].default,r=ur(m,i,i[5],null);let f=[i[3]],_={};for(let b=0;b<f.length;b+=1)_=Yi(_,f[b]);return{c(){e=Ht("h6"),r&&r.c(),this.h()},l(b){e=Gt(b,"H6",{});var v=$t(e);r&&r.l(v),v.forEach(De),this.h()},h(){nr(e,_)},m(b,v){jt(b,e,v),r&&r.m(e,null),i[7](e),o=!0,l||(u=[tr(t=To.call(null,e,i[0])),tr(i[2].call(null,e))],l=!0)},p(b,[v]){r&&r.p&&(!o||v&32)&&cr(r,m,b,b[5],o?fr(m,b[5],v,null):hr(b[5]),null),nr(e,_=xr(f,[v&8&&b[3]])),t&&so(t.update)&&v&1&&t.update.call(null,b[0])},i(b){o||(vt(r,b),o=!0)},o(b){Lt(r,b),o=!1},d(b){b&&De(e),r&&r.d(b),i[7](null),l=!1,Lo(u)}}}function e6(i,e,t){const o=["use","getElement"];let l=Yn(e,o),{$$slots:u={},$$scope:m}=e,{use:r=[]}=e;const f=_o(yo());let _;function b(){return _}function v(w){bn[w?"unshift":"push"](()=>{_=w,t(1,_)})}return i.$$set=w=>{e=Yi(Yi({},e),po(w)),t(3,l=Yn(e,o)),"use"in w&&t(0,r=w.use),"$$scope"in w&&t(5,m=w.$$scope)},[r,_,f,l,b,m,u,v]}class t6 extends br{constructor(e){super(),wr(this,e,e6,$x,mr,{use:0,getElement:4})}get getElement(){return this.$$.ctx[4]}}function i6(i){let e,t,o,l,u;const m=i[6].default,r=ur(m,i,i[5],null);let f=[i[3]],_={};for(let b=0;b<f.length;b+=1)_=Yi(_,f[b]);return{c(){e=Ht("i"),r&&r.c(),this.h()},l(b){e=Gt(b,"I",{});var v=$t(e);r&&r.l(v),v.forEach(De),this.h()},h(){nr(e,_)},m(b,v){jt(b,e,v),r&&r.m(e,null),i[7](e),o=!0,l||(u=[tr(t=To.call(null,e,i[0])),tr(i[2].call(null,e))],l=!0)},p(b,[v]){r&&r.p&&(!o||v&32)&&cr(r,m,b,b[5],o?fr(m,b[5],v,null):hr(b[5]),null),nr(e,_=xr(f,[v&8&&b[3]])),t&&so(t.update)&&v&1&&t.update.call(null,b[0])},i(b){o||(vt(r,b),o=!0)},o(b){Lt(r,b),o=!1},d(b){b&&De(e),r&&r.d(b),i[7](null),l=!1,Lo(u)}}}function n6(i,e,t){const o=["use","getElement"];let l=Yn(e,o),{$$slots:u={},$$scope:m}=e,{use:r=[]}=e;const f=_o(yo());let _;function b(){return _}function v(w){bn[w?"unshift":"push"](()=>{_=w,t(1,_)})}return i.$$set=w=>{e=Yi(Yi({},e),po(w)),t(3,l=Yn(e,o)),"use"in w&&t(0,r=w.use),"$$scope"in w&&t(5,m=w.$$scope)},[r,_,f,l,b,m,u,v]}class r6 extends br{constructor(e){super(),wr(this,e,n6,i6,mr,{use:0,getElement:4})}get getElement(){return this.$$.ctx[4]}}function o6(i){let e,t,o,l,u;const m=i[6].default,r=ur(m,i,i[5],null);let f=[i[3]],_={};for(let b=0;b<f.length;b+=1)_=Yi(_,f[b]);return{c(){e=Ht("li"),r&&r.c(),this.h()},l(b){e=Gt(b,"LI",{});var v=$t(e);r&&r.l(v),v.forEach(De),this.h()},h(){nr(e,_)},m(b,v){jt(b,e,v),r&&r.m(e,null),i[7](e),o=!0,l||(u=[tr(t=To.call(null,e,i[0])),tr(i[2].call(null,e))],l=!0)},p(b,[v]){r&&r.p&&(!o||v&32)&&cr(r,m,b,b[5],o?fr(m,b[5],v,null):hr(b[5]),null),nr(e,_=xr(f,[v&8&&b[3]])),t&&so(t.update)&&v&1&&t.update.call(null,b[0])},i(b){o||(vt(r,b),o=!0)},o(b){Lt(r,b),o=!1},d(b){b&&De(e),r&&r.d(b),i[7](null),l=!1,Lo(u)}}}function s6(i,e,t){const o=["use","getElement"];let l=Yn(e,o),{$$slots:u={},$$scope:m}=e,{use:r=[]}=e;const f=_o(yo());let _;function b(){return _}function v(w){bn[w?"unshift":"push"](()=>{_=w,t(1,_)})}return i.$$set=w=>{e=Yi(Yi({},e),po(w)),t(3,l=Yn(e,o)),"use"in w&&t(0,r=w.use),"$$scope"in w&&t(5,m=w.$$scope)},[r,_,f,l,b,m,u,v]}class a6 extends br{constructor(e){super(),wr(this,e,s6,o6,mr,{use:0,getElement:4})}get getElement(){return this.$$.ctx[4]}}function l6(i){let e,t,o,l,u;const m=i[6].default,r=ur(m,i,i[5],null);let f=[i[3]],_={};for(let b=0;b<f.length;b+=1)_=Yi(_,f[b]);return{c(){e=Ht("main"),r&&r.c(),this.h()},l(b){e=Gt(b,"MAIN",{});var v=$t(e);r&&r.l(v),v.forEach(De),this.h()},h(){nr(e,_)},m(b,v){jt(b,e,v),r&&r.m(e,null),i[7](e),o=!0,l||(u=[tr(t=To.call(null,e,i[0])),tr(i[2].call(null,e))],l=!0)},p(b,[v]){r&&r.p&&(!o||v&32)&&cr(r,m,b,b[5],o?fr(m,b[5],v,null):hr(b[5]),null),nr(e,_=xr(f,[v&8&&b[3]])),t&&so(t.update)&&v&1&&t.update.call(null,b[0])},i(b){o||(vt(r,b),o=!0)},o(b){Lt(r,b),o=!1},d(b){b&&De(e),r&&r.d(b),i[7](null),l=!1,Lo(u)}}}function u6(i,e,t){const o=["use","getElement"];let l=Yn(e,o),{$$slots:u={},$$scope:m}=e,{use:r=[]}=e;const f=_o(yo());let _;function b(){return _}function v(w){bn[w?"unshift":"push"](()=>{_=w,t(1,_)})}return i.$$set=w=>{e=Yi(Yi({},e),po(w)),t(3,l=Yn(e,o)),"use"in w&&t(0,r=w.use),"$$scope"in w&&t(5,m=w.$$scope)},[r,_,f,l,b,m,u,v]}class c6 extends br{constructor(e){super(),wr(this,e,u6,l6,mr,{use:0,getElement:4})}get getElement(){return this.$$.ctx[4]}}function h6(i){let e,t,o,l,u;const m=i[6].default,r=ur(m,i,i[5],null);let f=[i[3]],_={};for(let b=0;b<f.length;b+=1)_=Yi(_,f[b]);return{c(){e=Ht("nav"),r&&r.c(),this.h()},l(b){e=Gt(b,"NAV",{});var v=$t(e);r&&r.l(v),v.forEach(De),this.h()},h(){nr(e,_)},m(b,v){jt(b,e,v),r&&r.m(e,null),i[7](e),o=!0,l||(u=[tr(t=To.call(null,e,i[0])),tr(i[2].call(null,e))],l=!0)},p(b,[v]){r&&r.p&&(!o||v&32)&&cr(r,m,b,b[5],o?fr(m,b[5],v,null):hr(b[5]),null),nr(e,_=xr(f,[v&8&&b[3]])),t&&so(t.update)&&v&1&&t.update.call(null,b[0])},i(b){o||(vt(r,b),o=!0)},o(b){Lt(r,b),o=!1},d(b){b&&De(e),r&&r.d(b),i[7](null),l=!1,Lo(u)}}}function f6(i,e,t){const o=["use","getElement"];let l=Yn(e,o),{$$slots:u={},$$scope:m}=e,{use:r=[]}=e;const f=_o(yo());let _;function b(){return _}function v(w){bn[w?"unshift":"push"](()=>{_=w,t(1,_)})}return i.$$set=w=>{e=Yi(Yi({},e),po(w)),t(3,l=Yn(e,o)),"use"in w&&t(0,r=w.use),"$$scope"in w&&t(5,m=w.$$scope)},[r,_,f,l,b,m,u,v]}class d6 extends br{constructor(e){super(),wr(this,e,f6,h6,mr,{use:0,getElement:4})}get getElement(){return this.$$.ctx[4]}}function p6(i){let e,t,o,l,u;const m=i[6].default,r=ur(m,i,i[5],null);let f=[i[3]],_={};for(let b=0;b<f.length;b+=1)_=Yi(_,f[b]);return{c(){e=Ht("span"),r&&r.c(),this.h()},l(b){e=Gt(b,"SPAN",{});var v=$t(e);r&&r.l(v),v.forEach(De),this.h()},h(){nr(e,_)},m(b,v){jt(b,e,v),r&&r.m(e,null),i[7](e),o=!0,l||(u=[tr(t=To.call(null,e,i[0])),tr(i[2].call(null,e))],l=!0)},p(b,[v]){r&&r.p&&(!o||v&32)&&cr(r,m,b,b[5],o?fr(m,b[5],v,null):hr(b[5]),null),nr(e,_=xr(f,[v&8&&b[3]])),t&&so(t.update)&&v&1&&t.update.call(null,b[0])},i(b){o||(vt(r,b),o=!0)},o(b){Lt(r,b),o=!1},d(b){b&&De(e),r&&r.d(b),i[7](null),l=!1,Lo(u)}}}function m6(i,e,t){const o=["use","getElement"];let l=Yn(e,o),{$$slots:u={},$$scope:m}=e,{use:r=[]}=e;const f=_o(yo());let _;function b(){return _}function v(w){bn[w?"unshift":"push"](()=>{_=w,t(1,_)})}return i.$$set=w=>{e=Yi(Yi({},e),po(w)),t(3,l=Yn(e,o)),"use"in w&&t(0,r=w.use),"$$scope"in w&&t(5,m=w.$$scope)},[r,_,f,l,b,m,u,v]}class f4 extends br{constructor(e){super(),wr(this,e,m6,p6,mr,{use:0,getElement:4})}get getElement(){return this.$$.ctx[4]}}function g6(i){let e,t,o,l,u;const m=i[6].default,r=ur(m,i,i[5],null);let f=[i[3]],_={};for(let b=0;b<f.length;b+=1)_=Yi(_,f[b]);return{c(){e=Jp("svg"),r&&r.c(),this.h()},l(b){e=Qp(b,"svg",{});var v=$t(e);r&&r.l(v),v.forEach(De),this.h()},h(){qy(e,_)},m(b,v){jt(b,e,v),r&&r.m(e,null),i[7](e),o=!0,l||(u=[tr(t=To.call(null,e,i[0])),tr(i[2].call(null,e))],l=!0)},p(b,[v]){r&&r.p&&(!o||v&32)&&cr(r,m,b,b[5],o?fr(m,b[5],v,null):hr(b[5]),null),qy(e,_=xr(f,[v&8&&b[3]])),t&&so(t.update)&&v&1&&t.update.call(null,b[0])},i(b){o||(vt(r,b),o=!0)},o(b){Lt(r,b),o=!1},d(b){b&&De(e),r&&r.d(b),i[7](null),l=!1,Lo(u)}}}function y6(i,e,t){const o=["use","getElement"];let l=Yn(e,o),{$$slots:u={},$$scope:m}=e,{use:r=[]}=e;const f=_o(yo());let _;function b(){return _}function v(w){bn[w?"unshift":"push"](()=>{_=w,t(1,_)})}return i.$$set=w=>{e=Yi(Yi({},e),po(w)),t(3,l=Yn(e,o)),"use"in w&&t(0,r=w.use),"$$scope"in w&&t(5,m=w.$$scope)},[r,_,f,l,b,m,u,v]}class Jy extends br{constructor(e){super(),wr(this,e,y6,g6,mr,{use:0,getElement:4})}get getElement(){return this.$$.ctx[4]}}function _6(i){let e,t,o,l,u;const m=i[6].default,r=ur(m,i,i[5],null);let f=[i[3]],_={};for(let b=0;b<f.length;b+=1)_=Yi(_,f[b]);return{c(){e=Ht("ul"),r&&r.c(),this.h()},l(b){e=Gt(b,"UL",{});var v=$t(e);r&&r.l(v),v.forEach(De),this.h()},h(){nr(e,_)},m(b,v){jt(b,e,v),r&&r.m(e,null),i[7](e),o=!0,l||(u=[tr(t=To.call(null,e,i[0])),tr(i[2].call(null,e))],l=!0)},p(b,[v]){r&&r.p&&(!o||v&32)&&cr(r,m,b,b[5],o?fr(m,b[5],v,null):hr(b[5]),null),nr(e,_=xr(f,[v&8&&b[3]])),t&&so(t.update)&&v&1&&t.update.call(null,b[0])},i(b){o||(vt(r,b),o=!0)},o(b){Lt(r,b),o=!1},d(b){b&&De(e),r&&r.d(b),i[7](null),l=!1,Lo(u)}}}function v6(i,e,t){const o=["use","getElement"];let l=Yn(e,o),{$$slots:u={},$$scope:m}=e,{use:r=[]}=e;const f=_o(yo());let _;function b(){return _}function v(w){bn[w?"unshift":"push"](()=>{_=w,t(1,_)})}return i.$$set=w=>{e=Yi(Yi({},e),po(w)),t(3,l=Yn(e,o)),"use"in w&&t(0,r=w.use),"$$scope"in w&&t(5,m=w.$$scope)},[r,_,f,l,b,m,u,v]}class b6 extends br{constructor(e){super(),wr(this,e,v6,_6,mr,{use:0,getElement:4})}get getElement(){return this.$$.ctx[4]}}const d4=qx,w6=Wx,tp=h4,x6=Zx,A6=Qx,k6=t6,S6=a6,C6=c6,E6=d6,yf=f4,I6=b6,T6=bl({class:"mdc-top-app-bar__row",component:tp});function L6(i){let e,t,o,l,u,m;const r=i[9].default,f=ur(r,i,i[8],null);let _=[{class:t=sr({[i[1]]:!0,"mdc-top-app-bar__section":!0,"mdc-top-app-bar__section--align-start":i[2]==="start","mdc-top-app-bar__section--align-end":i[2]==="end"})},i[3]?{role:"toolbar"}:{},i[6]],b={};for(let v=0;v<_.length;v+=1)b=Yi(b,_[v]);return{c(){e=Ht("section"),f&&f.c(),this.h()},l(v){e=Gt(v,"SECTION",{class:!0});var w=$t(e);f&&f.l(w),w.forEach(De),this.h()},h(){nr(e,b)},m(v,w){jt(v,e,w),f&&f.m(e,null),i[10](e),l=!0,u||(m=[tr(o=To.call(null,e,i[0])),tr(i[5].call(null,e))],u=!0)},p(v,[w]){f&&f.p&&(!l||w&256)&&cr(f,r,v,v[8],l?fr(r,v[8],w,null):hr(v[8]),null),nr(e,b=xr(_,[(!l||w&6&&t!==(t=sr({[v[1]]:!0,"mdc-top-app-bar__section":!0,"mdc-top-app-bar__section--align-start":v[2]==="start","mdc-top-app-bar__section--align-end":v[2]==="end"})))&&{class:t},w&8&&(v[3]?{role:"toolbar"}:{}),w&64&&v[6]])),o&&so(o.update)&&w&1&&o.update.call(null,v[0])},i(v){l||(vt(f,v),l=!0)},o(v){Lt(f,v),l=!1},d(v){v&&De(e),f&&f.d(v),i[10](null),u=!1,Lo(m)}}}function P6(i,e,t){const o=["use","class","align","toolbar","getElement"];let l=Yn(e,o),{$$slots:u={},$$scope:m}=e;const r=_o(yo());let{use:f=[]}=e,{class:_=""}=e,{align:b="start"}=e,{toolbar:v=!1}=e,w;as("SMUI:icon-button:context",v?"top-app-bar:action":"top-app-bar:navigation"),as("SMUI:button:context",v?"top-app-bar:action":"top-app-bar:navigation");function x(){return w}function C(T){bn[T?"unshift":"push"](()=>{w=T,t(4,w)})}return i.$$set=T=>{e=Yi(Yi({},e),po(T)),t(6,l=Yn(e,o)),"use"in T&&t(0,f=T.use),"class"in T&&t(1,_=T.class),"align"in T&&t(2,b=T.align),"toolbar"in T&&t(3,v=T.toolbar),"$$scope"in T&&t(8,m=T.$$scope)},[f,_,b,v,w,r,l,x,m,u,C]}class M6 extends br{constructor(e){super(),wr(this,e,P6,L6,mr,{use:0,class:1,align:2,toolbar:3,getElement:7})}get getElement(){return this.$$.ctx[7]}}const D6=bl({class:"mdc-top-app-bar__title",component:yf});function O6(i){let e;const t=i[11].default,o=ur(t,i,i[13],null);return{c(){o&&o.c()},l(l){o&&o.l(l)},m(l,u){o&&o.m(l,u),e=!0},p(l,u){o&&o.p&&(!e||u&8192)&&cr(o,t,l,l[13],e?fr(t,l[13],u,null):hr(l[13]),null)},i(l){e||(vt(o,l),e=!0)},o(l){Lt(o,l),e=!1},d(l){o&&o.d(l)}}}function F6(i){let e,t,o;const l=[{use:[i[6],...i[0]]},{class:sr({[i[1]]:!0,[i[5]]:!0})},i[7]];var u=i[2];function m(r){let f={$$slots:{default:[O6]},$$scope:{ctx:r}};for(let _=0;_<l.length;_+=1)f=Yi(f,l[_]);return{props:f}}return u&&(e=ou(u,m(i)),i[12](e)),{c(){e&&en(e.$$.fragment),t=kn()},l(r){e&&un(e.$$.fragment,r),t=kn()},m(r,f){e&&tn(e,r,f),jt(r,t,f),o=!0},p(r,[f]){const _=f&227?xr(l,[f&65&&{use:[r[6],...r[0]]},f&34&&{class:sr({[r[1]]:!0,[r[5]]:!0})},f&128&&Eo(r[7])]):{};if(f&8192&&(_.$$scope={dirty:f,ctx:r}),u!==(u=r[2])){if(e){Fr();const b=e;Lt(b.$$.fragment,1,0,()=>{nn(b,1)}),Or()}u?(e=ou(u,m(r)),r[12](e),en(e.$$.fragment),vt(e.$$.fragment,1),tn(e,t.parentNode,t)):e=null}else u&&e.$set(_)},i(r){o||(e&&vt(e.$$.fragment,r),o=!0)},o(r){e&&Lt(e.$$.fragment,r),o=!1},d(r){i[12](null),r&&De(t),e&&nn(e,r)}}}function R6(i,e,t){let o,l;const u=["use","class","topAppBar","component","getElement"];let m=Yn(e,u),r,f=go,_=()=>(f(),f=px(o,X=>t(10,r=X)),o);i.$$.on_destroy.push(()=>f());let{$$slots:b={},$$scope:v}=e;const w=_o(yo());let{use:x=[]}=e,{class:C=""}=e,{topAppBar:T}=e,S,{component:M=C6}=e;function O(){return S.getElement()}function V(X){bn[X?"unshift":"push"](()=>{S=X,t(4,S)})}return i.$$set=X=>{e=Yi(Yi({},e),po(X)),t(7,m=Yn(e,u)),"use"in X&&t(0,x=X.use),"class"in X&&t(1,C=X.class),"topAppBar"in X&&t(8,T=X.topAppBar),"component"in X&&t(2,M=X.component),"$$scope"in X&&t(13,v=X.$$scope)},i.$$.update=()=>{i.$$.dirty&256&&_(t(3,o=T&&T.getPropStore())),i.$$.dirty&1032&&t(5,l=(()=>!o||r.variant==="static"?"":r.variant==="short"?"mdc-top-app-bar--short-fixed-adjust":r.prominent&&r.dense?"mdc-top-app-bar--dense-prominent-fixed-adjust":r.prominent?"mdc-top-app-bar--prominent-fixed-adjust":r.dense?"mdc-top-app-bar--dense-fixed-adjust":"mdc-top-app-bar--fixed-adjust")())},[x,C,M,o,S,l,w,m,T,O,r,b,V,v]}class B6 extends br{constructor(e){super(),wr(this,e,R6,F6,mr,{use:0,class:1,topAppBar:8,component:2,getElement:9})}get getElement(){return this.$$.ctx[9]}}const Qy=M6,z6=B6,Br={title:"Water Supply Map for Nanyuki Water",url:"https://nawasco.co.ke",logo:"/favicon.png",basePath:"/watergis",attribution:"\xA9Nanyuki Water and Serwerage Co., Ltd.",styles:[{title:"Satellite(water)",uri:"https://nawasco.github.io/mapbox-stylefiles/unvt/style-aerial-water.json"},{title:"UNVT Buildings(water)",uri:"https://nawasco.github.io/mapbox-stylefiles/unvt/style-buildings-water.json"},{title:"Satellite(sewer)",uri:"https://nawasco.github.io/mapbox-stylefiles/unvt/style-aerial-sewer.json"},{title:"UNVT Buildings(sewer)",uri:"https://nawasco.github.io/mapbox-stylefiles/unvt/style-buildings-sewer.json"},{title:"UN Vector Tile",uri:"https://nawasco.github.io/mapbox-stylefiles/unvt/style.json"},{title:"UNVT Buildings",uri:"https://nawasco.github.io/mapbox-stylefiles/unvt/style-buildings.json"}],center:[37.119039,-.024493],zoom:13,search:{url:"https://nawasco.github.io/vt/meter.geojson",target:["accountno","serialno"],format:i=>{const e=[];return["accountno","serialno","category"].forEach(o=>{if(i[o]){let l=i[o];switch(o){case"accountno":l=`A/C: ${l}`;break;case"serialno":l=`S/N: ${l}`;break}e.push(l)}}),e.length>0?e.join(", "):""},place_type:["meter"],placeholder:"Account No or S/N",zoom:16},popup:{target:["pipeline","sewerline","meter","kiosks","borehole","tank","booster-pump","chambers","manholes","pg-building"]},legend:{targets:{cadastral:"Cadastral","cadastral-annotation":"Cadastral Label",blocks:"Blocks","blocks-annotation":"Blocks Label",waterworks:"Waterworks",pipeline:"Pipeline",pipeline_annotation:"Pipeline Label",sewerline:"Sewer Pipeline",sewerline_annotation:"Sewer Pipeline Label",meter:"Consumer Meter",kiosks:"Water Kiosk",borehole:"Borehole",tank:"Tank","booster-pump":"Booster Pump",chambers:"Chamber",manholes:"Manhole"}},elevation:{url:"https://nawasco.github.io/ke-central-terrain/tiles/{z}/{x}/{y}.png",options:{tileSize:512,font:["Roboto Medium"],fontSize:12,fontHalo:1,mainColor:"#263238",haloColor:"#fff",units:"kilometers"}},valhalla:{url:"https://valhalla.water-gis.com",options:{Contours:[{time:3,distance:1,color:"ff0000"},{time:5,distance:2,color:"ffff00"},{time:10,distance:3,color:"0000ff"},{time:15,distance:4,color:"ff00ff"}],routing:{font:["Roboto Medium"],fontSize:14,fontHalo:3,fontColor:"#263238",fontHaloColor:"#fff",iconImage:"marker",iconSize:1}}},terrain:{source:"nanyuki-dem",exaggeration:1}};function es(i){return es=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},es(i)}var Bl=Uint8Array,zl=Uint16Array,Vd=Uint32Array,I1=new Bl([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),T1=new Bl([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),P2=new Bl([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),p4=function(i,e){for(var t=new zl(31),o=0;o<31;++o)t[o]=e+=1<<i[o-1];for(var l=new Vd(t[30]),o=1;o<30;++o)for(var u=t[o];u<t[o+1];++u)l[u]=u-t[o]<<5|o;return[t,l]},m4=p4(I1,2),g4=m4[0],M2=m4[1];g4[28]=258,M2[258]=28;var y4=p4(T1,0),N6=y4[0],$y=y4[1],D2=new zl(32768);for(var As=0;As<32768;++As){var Kh=(As&43690)>>>1|(As&21845)<<1;Kh=(Kh&52428)>>>2|(Kh&13107)<<2,Kh=(Kh&61680)>>>4|(Kh&3855)<<4,D2[As]=((Kh&65280)>>>8|(Kh&255)<<8)>>>1}var ih=function(i,e,t){for(var o=i.length,l=0,u=new zl(e);l<o;++l)++u[i[l]-1];var m=new zl(e);for(l=0;l<e;++l)m[l]=m[l-1]+u[l-1]<<1;var r;if(t){r=new zl(1<<e);var f=15-e;for(l=0;l<o;++l)if(i[l])for(var _=l<<4|i[l],b=e-i[l],v=m[i[l]-1]++<<b,w=v|(1<<b)-1;v<=w;++v)r[D2[v]>>>f]=_}else for(r=new zl(o),l=0;l<o;++l)r[l]=D2[m[i[l]-1]++]>>>15-i[l];return r},df=new Bl(288);for(var As=0;As<144;++As)df[As]=8;for(var As=144;As<256;++As)df[As]=9;for(var As=256;As<280;++As)df[As]=7;for(var As=280;As<288;++As)df[As]=8;var qd=new Bl(32);for(var As=0;As<32;++As)qd[As]=5;var j6=ih(df,9,0),U6=ih(df,9,1),V6=ih(qd,5,0),q6=ih(qd,5,1),Em=function(i){for(var e=i[0],t=1;t<i.length;++t)i[t]>e&&(e=i[t]);return e},kc=function(i,e,t){var o=e/8>>0;return(i[o]|i[o+1]<<8)>>>(e&7)&t},Im=function(i,e){var t=e/8>>0;return(i[t]|i[t+1]<<8|i[t+2]<<16)>>>(e&7)},dg=function(i){return(i/8>>0)+(i&7&&1)},_4=function(i,e,t){(e==null||e<0)&&(e=0),(t==null||t>i.length)&&(t=i.length);var o=new(i instanceof zl?zl:i instanceof Vd?Vd:Bl)(t-e);return o.set(i.subarray(e,t)),o},H6=function(i,e,t){var o=i.length,l=!e||t,u=!t||t.i;t||(t={}),e||(e=new Bl(o*3));var m=function(Be){var We=e.length;if(Be>We){var st=new Bl(Math.max(We*2,Be));st.set(e),e=st}},r=t.f||0,f=t.p||0,_=t.b||0,b=t.l,v=t.d,w=t.m,x=t.n,C=o*8;do{if(!b){t.f=r=kc(i,f,1);var T=kc(i,f+1,3);if(f+=3,T)if(T==1)b=U6,v=q6,w=9,x=5;else if(T==2){var V=kc(i,f,31)+257,X=kc(i,f+10,15)+4,Z=V+kc(i,f+5,31)+1;f+=14;for(var te=new Bl(Z),J=new Bl(19),ie=0;ie<X;++ie)J[P2[ie]]=kc(i,f+ie*3,7);f+=X*3;var Ee=Em(J),Pe=(1<<Ee)-1;if(!u&&f+Z*(Ee+7)>C)break;for(var de=ih(J,Ee,1),ie=0;ie<Z;){var Te=de[kc(i,f,Pe)];f+=Te&15;var S=Te>>>4;if(S<16)te[ie++]=S;else{var ve=0,_e=0;for(S==16?(_e=3+kc(i,f,3),f+=2,ve=te[ie-1]):S==17?(_e=3+kc(i,f,7),f+=3):S==18&&(_e=11+kc(i,f,127),f+=7);_e--;)te[ie++]=ve}}var ot=te.subarray(0,V),it=te.subarray(V);w=Em(ot),x=Em(it),b=ih(ot,w,1),v=ih(it,x,1)}else throw"invalid block type";else{var S=dg(f)+4,M=i[S-4]|i[S-3]<<8,O=S+M;if(O>o){if(u)throw"unexpected EOF";break}l&&m(_+M),e.set(i.subarray(S,O),_),t.b=_+=M,t.p=f=O*8;continue}if(f>C)throw"unexpected EOF"}l&&m(_+131072);for(var It=(1<<w)-1,Xe=(1<<x)-1,we=w+x+18;u||f+we<C;){var ve=b[Im(i,f)&It],Ce=ve>>>4;if(f+=ve&15,f>C)throw"unexpected EOF";if(!ve)throw"invalid length/literal";if(Ce<256)e[_++]=Ce;else if(Ce==256){b=null;break}else{var Re=Ce-254;if(Ce>264){var ie=Ce-257,le=I1[ie];Re=kc(i,f,(1<<le)-1)+g4[ie],f+=le}var Se=v[Im(i,f)&Xe],he=Se>>>4;if(!Se)throw"invalid distance";f+=Se&15;var it=N6[he];if(he>3){var le=T1[he];it+=Im(i,f)&(1<<le)-1,f+=le}if(f>C)throw"unexpected EOF";l&&m(_+131072);for(var me=_+Re;_<me;_+=4)e[_]=e[_-it],e[_+1]=e[_+1-it],e[_+2]=e[_+2-it],e[_+3]=e[_+3-it];_=me}}t.l=b,t.p=f,t.b=_,b&&(r=1,t.m=w,t.d=v,t.n=x)}while(!r);return _==e.length?e:_4(e,0,_)},xh=function(i,e,t){t<<=e&7;var o=e/8>>0;i[o]|=t,i[o+1]|=t>>>8},vd=function(i,e,t){t<<=e&7;var o=e/8>>0;i[o]|=t,i[o+1]|=t>>>8,i[o+2]|=t>>>16},Tm=function(i,e){for(var t=[],o=0;o<i.length;++o)i[o]&&t.push({s:o,f:i[o]});var l=t.length,u=t.slice();if(!l)return[new Bl(0),0];if(l==1){var m=new Bl(t[0].s+1);return m[t[0].s]=1,[m,1]}t.sort(function(Z,te){return Z.f-te.f}),t.push({s:-1,f:25001});var r=t[0],f=t[1],_=0,b=1,v=2;for(t[0]={s:-1,f:r.f+f.f,l:r,r:f};b!=l-1;)r=t[t[_].f<t[v].f?_++:v++],f=t[_!=b&&t[_].f<t[v].f?_++:v++],t[b++]={s:-1,f:r.f+f.f,l:r,r:f};for(var w=u[0].s,o=1;o<l;++o)u[o].s>w&&(w=u[o].s);var x=new zl(w+1),C=O2(t[b-1],x,0);if(C>e){var o=0,T=0,S=C-e,M=1<<S;for(u.sort(function(te,J){return x[J.s]-x[te.s]||te.f-J.f});o<l;++o){var O=u[o].s;if(x[O]>e)T+=M-(1<<C-x[O]),x[O]=e;else break}for(T>>>=S;T>0;){var V=u[o].s;x[V]<e?T-=1<<e-x[V]++-1:++o}for(;o>=0&&T;--o){var X=u[o].s;x[X]==e&&(--x[X],++T)}C=e}return[new Bl(x),C]},O2=function(i,e,t){return i.s==-1?Math.max(O2(i.l,e,t+1),O2(i.r,e,t+1)):e[i.s]=t},e_=function(i){for(var e=i.length;e&&!i[--e];);for(var t=new zl(++e),o=0,l=i[0],u=1,m=function(f){t[o++]=f},r=1;r<=e;++r)if(i[r]==l&&r!=e)++u;else{if(!l&&u>2){for(;u>138;u-=138)m(32754);u>2&&(m(u>10?u-11<<5|28690:u-3<<5|12305),u=0)}else if(u>3){for(m(l),--u;u>6;u-=6)m(8304);u>2&&(m(u-3<<5|8208),u=0)}for(;u--;)m(l);u=1,l=i[r]}return[t.subarray(0,o),e]},bd=function(i,e){for(var t=0,o=0;o<e.length;++o)t+=i[o]*e[o];return t},e1=function(i,e,t){var o=t.length,l=dg(e+2);i[l]=o&255,i[l+1]=o>>>8,i[l+2]=i[l]^255,i[l+3]=i[l+1]^255;for(var u=0;u<o;++u)i[l+u+4]=t[u];return(l+4+o)*8},t_=function(i,e,t,o,l,u,m,r,f,_,b){xh(e,b++,t),++l[256];for(var v=Tm(l,15),w=v[0],x=v[1],C=Tm(u,15),T=C[0],S=C[1],M=e_(w),O=M[0],V=M[1],X=e_(T),Z=X[0],te=X[1],J=new zl(19),ie=0;ie<O.length;++ie)J[O[ie]&31]++;for(var ie=0;ie<Z.length;++ie)J[Z[ie]&31]++;for(var Ee=Tm(J,7),Pe=Ee[0],de=Ee[1],Te=19;Te>4&&!Pe[P2[Te-1]];--Te);var ve=_+5<<3,_e=bd(l,df)+bd(u,qd)+m,ot=bd(l,w)+bd(u,T)+m+14+3*Te+bd(J,Pe)+(2*J[16]+3*J[17]+7*J[18]);if(ve<=_e&&ve<=ot)return e1(e,b,i.subarray(f,f+_));var it,It,Xe,we;if(xh(e,b,1+(ot<_e)),b+=2,ot<_e){it=ih(w,x,0),It=w,Xe=ih(T,S,0),we=T;var Ce=ih(Pe,de,0);xh(e,b,V-257),xh(e,b+5,te-1),xh(e,b+10,Te-4),b+=14;for(var ie=0;ie<Te;++ie)xh(e,b+3*ie,Pe[P2[ie]]);b+=3*Te;for(var Re=[O,Z],le=0;le<2;++le)for(var Se=Re[le],ie=0;ie<Se.length;++ie){var he=Se[ie]&31;xh(e,b,Ce[he]),b+=Pe[he],he>15&&(xh(e,b,Se[ie]>>>5&127),b+=Se[ie]>>>12)}}else it=j6,It=df,Xe=V6,we=qd;for(var ie=0;ie<r;++ie)if(o[ie]>255){var he=o[ie]>>>18&31;vd(e,b,it[he+257]),b+=It[he+257],he>7&&(xh(e,b,o[ie]>>>23&31),b+=I1[he]);var me=o[ie]&31;vd(e,b,Xe[me]),b+=we[me],me>3&&(vd(e,b,o[ie]>>>5&8191),b+=T1[me])}else vd(e,b,it[o[ie]]),b+=It[o[ie]];return vd(e,b,it[256]),b+It[256]},G6=new Vd([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),W6=new Bl(0),X6=function(i,e,t,o,l,u){var m=i.length,r=new Bl(o+m+5*(1+Math.floor(m/7e3))+l),f=r.subarray(o,r.length-l),_=0;if(!e||m<8)for(var b=0;b<=m;b+=65535){var v=b+65535;v<m?_=e1(f,_,i.subarray(b,v)):(f[b]=u,_=e1(f,_,i.subarray(b,m)))}else{for(var w=G6[e-1],x=w>>>13,C=w&8191,T=(1<<t)-1,S=new zl(32768),M=new zl(T+1),O=Math.ceil(t/3),V=2*O,X=function(wt){return(i[wt]^i[wt+1]<<O^i[wt+2]<<V)&T},Z=new Vd(25e3),te=new zl(288),J=new zl(32),ie=0,Ee=0,b=0,Pe=0,de=0,Te=0;b<m;++b){var ve=X(b),_e=b&32767,ot=M[ve];if(S[_e]=ot,M[ve]=_e,de<=b){var it=m-b;if((ie>7e3||Pe>24576)&&it>423){_=t_(i,f,0,Z,te,J,Ee,Pe,Te,b-Te,_),Pe=ie=Ee=0,Te=b;for(var It=0;It<286;++It)te[It]=0;for(var It=0;It<30;++It)J[It]=0}var Xe=2,we=0,Ce=C,Re=_e-ot&32767;if(it>2&&ve==X(b-Re))for(var le=Math.min(x,it)-1,Se=Math.min(32767,b),he=Math.min(258,it);Re<=Se&&--Ce&&_e!=ot;){if(i[b+Xe]==i[b+Xe-Re]){for(var me=0;me<he&&i[b+me]==i[b+me-Re];++me);if(me>Xe){if(Xe=me,we=Re,me>le)break;for(var Be=Math.min(Re,me-2),We=0,It=0;It<Be;++It){var st=b-Re+It+32768&32767,Ye=S[st],gt=st-Ye+32768&32767;gt>We&&(We=gt,ot=st)}}}_e=ot,ot=S[_e],Re+=_e-ot+32768&32767}if(we){Z[Pe++]=268435456|M2[Xe]<<18|$y[we];var Mt=M2[Xe]&31,ri=$y[we]&31;Ee+=I1[Mt]+T1[ri],++te[257+Mt],++J[ri],de=b+Xe,++ie}else Z[Pe++]=i[b],++te[i[b]]}}_=t_(i,f,u,Z,te,J,Ee,Pe,Te,b-Te,_),u||(_=e1(f,_,W6))}return _4(r,0,o+dg(_)+l)},Y6=function(){var i=1,e=0;return{p:function(t){for(var o=i,l=e,u=t.length,m=0;m!=u;){for(var r=Math.min(m+5552,u);m<r;++m)o+=t[m],l+=o;o%=65521,l%=65521}i=o,e=l},d:function(){return(i>>>8<<16|(e&255)<<8|e>>>8)+((i&255)<<23)*2}}},Z6=function(i,e,t,o,l){return X6(i,e.level==null?6:e.level,e.mem==null?Math.ceil(Math.max(8,Math.min(13,Math.log(i.length)))*1.5):12+e.mem,t,o,!l)},K6=function(i,e,t){for(;t;++e)i[e]=t,t>>>=8},J6=function(i,e){var t=e.level,o=t==0?0:t<6?1:t==9?3:2;i[0]=120,i[1]=o<<6|(o?32-2*o:1)},Q6=function(i){if((i[0]&15)!=8||i[0]>>>4>7||(i[0]<<8|i[1])%31)throw"invalid zlib data";if(i[1]&32)throw"invalid zlib data: preset dictionaries not supported"};function F2(i,e){e===void 0&&(e={});var t=Y6();t.p(i);var o=Z6(i,e,2,4);return J6(o,e),K6(o,o.length-4,t.d()),o}function $6(i,e){return H6((Q6(i),i.subarray(2,-4)),e)}var Vr=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function Lm(){Vr.console&&typeof Vr.console.log=="function"&&Vr.console.log.apply(Vr.console,arguments)}var hs={log:Lm,warn:function(i){Vr.console&&(typeof Vr.console.warn=="function"?Vr.console.warn.apply(Vr.console,arguments):Lm.call(null,arguments))},error:function(i){Vr.console&&(typeof Vr.console.error=="function"?Vr.console.error.apply(Vr.console,arguments):Lm(i))}};function Pm(i,e,t){var o=new XMLHttpRequest;o.open("GET",i),o.responseType="blob",o.onload=function(){jf(o.response,e,t)},o.onerror=function(){hs.error("could not download file")},o.send()}function i_(i){var e=new XMLHttpRequest;e.open("HEAD",i,!1);try{e.send()}catch{}return e.status>=200&&e.status<=299}function Rp(i){try{i.dispatchEvent(new MouseEvent("click"))}catch{var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),i.dispatchEvent(e)}}var Dd,R2,jf=Vr.saveAs||((typeof window>"u"?"undefined":es(window))!=="object"||window!==Vr?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(i,e,t){var o=Vr.URL||Vr.webkitURL,l=document.createElement("a");e=e||i.name||"download",l.download=e,l.rel="noopener",typeof i=="string"?(l.href=i,l.origin!==location.origin?i_(l.href)?Pm(i,e,t):Rp(l,l.target="_blank"):Rp(l)):(l.href=o.createObjectURL(i),setTimeout(function(){o.revokeObjectURL(l.href)},4e4),setTimeout(function(){Rp(l)},0))}:"msSaveOrOpenBlob"in navigator?function(i,e,t){if(e=e||i.name||"download",typeof i=="string")if(i_(i))Pm(i,e,t);else{var o=document.createElement("a");o.href=i,o.target="_blank",setTimeout(function(){Rp(o)})}else navigator.msSaveOrOpenBlob(function(l,u){return u===void 0?u={autoBom:!1}:es(u)!=="object"&&(hs.warn("Deprecated: Expected third argument to be a object"),u={autoBom:!u}),u.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(l.type)?new Blob([String.fromCharCode(65279),l],{type:l.type}):l}(i,t),e)}:function(i,e,t,o){if((o=o||open("","_blank"))&&(o.document.title=o.document.body.innerText="downloading..."),typeof i=="string")return Pm(i,e,t);var l=i.type==="application/octet-stream",u=/constructor/i.test(Vr.HTMLElement)||Vr.safari,m=/CriOS\/[\d]+/.test(navigator.userAgent);if((m||l&&u)&&(typeof FileReader>"u"?"undefined":es(FileReader))==="object"){var r=new FileReader;r.onloadend=function(){var b=r.result;b=m?b:b.replace(/^data:[^;]*;/,"data:attachment/file;"),o?o.location.href=b:location=b,o=null},r.readAsDataURL(i)}else{var f=Vr.URL||Vr.webkitURL,_=f.createObjectURL(i);o?o.location=_:location.href=_,o=null,setTimeout(function(){f.revokeObjectURL(_)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function v4(i){var e;i=i||"",this.ok=!1,i.charAt(0)=="#"&&(i=i.substr(1,6)),i={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[i=(i=i.replace(/ /g,"")).toLowerCase()]||i;for(var t=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(r){return[parseInt(r[1]),parseInt(r[2]),parseInt(r[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(r){return[parseInt(r[1],16),parseInt(r[2],16),parseInt(r[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(r){return[parseInt(r[1]+r[1],16),parseInt(r[2]+r[2],16),parseInt(r[3]+r[3],16)]}}],o=0;o<t.length;o++){var l=t[o].re,u=t[o].process,m=l.exec(i);m&&(e=u(m),this.r=e[0],this.g=e[1],this.b=e[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var r=this.r.toString(16),f=this.g.toString(16),_=this.b.toString(16);return r.length==1&&(r="0"+r),f.length==1&&(f="0"+f),_.length==1&&(_="0"+_),"#"+r+f+_}}/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function Mm(i,e){var t=i[0],o=i[1],l=i[2],u=i[3];t=pl(t,o,l,u,e[0],7,-680876936),u=pl(u,t,o,l,e[1],12,-389564586),l=pl(l,u,t,o,e[2],17,606105819),o=pl(o,l,u,t,e[3],22,-1044525330),t=pl(t,o,l,u,e[4],7,-176418897),u=pl(u,t,o,l,e[5],12,1200080426),l=pl(l,u,t,o,e[6],17,-1473231341),o=pl(o,l,u,t,e[7],22,-45705983),t=pl(t,o,l,u,e[8],7,1770035416),u=pl(u,t,o,l,e[9],12,-1958414417),l=pl(l,u,t,o,e[10],17,-42063),o=pl(o,l,u,t,e[11],22,-1990404162),t=pl(t,o,l,u,e[12],7,1804603682),u=pl(u,t,o,l,e[13],12,-40341101),l=pl(l,u,t,o,e[14],17,-1502002290),t=ml(t,o=pl(o,l,u,t,e[15],22,1236535329),l,u,e[1],5,-165796510),u=ml(u,t,o,l,e[6],9,-1069501632),l=ml(l,u,t,o,e[11],14,643717713),o=ml(o,l,u,t,e[0],20,-373897302),t=ml(t,o,l,u,e[5],5,-701558691),u=ml(u,t,o,l,e[10],9,38016083),l=ml(l,u,t,o,e[15],14,-660478335),o=ml(o,l,u,t,e[4],20,-405537848),t=ml(t,o,l,u,e[9],5,568446438),u=ml(u,t,o,l,e[14],9,-1019803690),l=ml(l,u,t,o,e[3],14,-187363961),o=ml(o,l,u,t,e[8],20,1163531501),t=ml(t,o,l,u,e[13],5,-1444681467),u=ml(u,t,o,l,e[2],9,-51403784),l=ml(l,u,t,o,e[7],14,1735328473),t=gl(t,o=ml(o,l,u,t,e[12],20,-1926607734),l,u,e[5],4,-378558),u=gl(u,t,o,l,e[8],11,-2022574463),l=gl(l,u,t,o,e[11],16,1839030562),o=gl(o,l,u,t,e[14],23,-35309556),t=gl(t,o,l,u,e[1],4,-1530992060),u=gl(u,t,o,l,e[4],11,1272893353),l=gl(l,u,t,o,e[7],16,-155497632),o=gl(o,l,u,t,e[10],23,-1094730640),t=gl(t,o,l,u,e[13],4,681279174),u=gl(u,t,o,l,e[0],11,-358537222),l=gl(l,u,t,o,e[3],16,-722521979),o=gl(o,l,u,t,e[6],23,76029189),t=gl(t,o,l,u,e[9],4,-640364487),u=gl(u,t,o,l,e[12],11,-421815835),l=gl(l,u,t,o,e[15],16,530742520),t=yl(t,o=gl(o,l,u,t,e[2],23,-995338651),l,u,e[0],6,-198630844),u=yl(u,t,o,l,e[7],10,1126891415),l=yl(l,u,t,o,e[14],15,-1416354905),o=yl(o,l,u,t,e[5],21,-57434055),t=yl(t,o,l,u,e[12],6,1700485571),u=yl(u,t,o,l,e[3],10,-1894986606),l=yl(l,u,t,o,e[10],15,-1051523),o=yl(o,l,u,t,e[1],21,-2054922799),t=yl(t,o,l,u,e[8],6,1873313359),u=yl(u,t,o,l,e[15],10,-30611744),l=yl(l,u,t,o,e[6],15,-1560198380),o=yl(o,l,u,t,e[13],21,1309151649),t=yl(t,o,l,u,e[4],6,-145523070),u=yl(u,t,o,l,e[11],10,-1120210379),l=yl(l,u,t,o,e[2],15,718787259),o=yl(o,l,u,t,e[9],21,-343485551),i[0]=sf(t,i[0]),i[1]=sf(o,i[1]),i[2]=sf(l,i[2]),i[3]=sf(u,i[3])}function L1(i,e,t,o,l,u){return e=sf(sf(e,i),sf(o,u)),sf(e<<l|e>>>32-l,t)}function pl(i,e,t,o,l,u,m){return L1(e&t|~e&o,i,e,l,u,m)}function ml(i,e,t,o,l,u,m){return L1(e&o|t&~o,i,e,l,u,m)}function gl(i,e,t,o,l,u,m){return L1(e^t^o,i,e,l,u,m)}function yl(i,e,t,o,l,u,m){return L1(t^(e|~o),i,e,l,u,m)}function b4(i){var e,t=i.length,o=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=i.length;e+=64)Mm(o,e8(i.substring(e-64,e)));i=i.substring(e-64);var l=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<i.length;e++)l[e>>2]|=i.charCodeAt(e)<<(e%4<<3);if(l[e>>2]|=128<<(e%4<<3),e>55)for(Mm(o,l),e=0;e<16;e++)l[e]=0;return l[14]=8*t,Mm(o,l),o}function e8(i){var e,t=[];for(e=0;e<64;e+=4)t[e>>2]=i.charCodeAt(e)+(i.charCodeAt(e+1)<<8)+(i.charCodeAt(e+2)<<16)+(i.charCodeAt(e+3)<<24);return t}Dd=Vr.atob.bind(Vr),R2=Vr.btoa.bind(Vr);var n_="0123456789abcdef".split("");function t8(i){for(var e="",t=0;t<4;t++)e+=n_[i>>8*t+4&15]+n_[i>>8*t&15];return e}function i8(i){return String.fromCharCode((255&i)>>0,(65280&i)>>8,(16711680&i)>>16,(4278190080&i)>>24)}function B2(i){return b4(i).map(i8).join("")}var n8=function(i){for(var e=0;e<i.length;e++)i[e]=t8(i[e]);return i.join("")}(b4("hello"))!="5d41402abc4b2a76b9719d911017c592";function sf(i,e){if(n8){var t=(65535&i)+(65535&e);return(i>>16)+(e>>16)+(t>>16)<<16|65535&t}return i+e&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function z2(i,e){var t,o,l,u;if(i!==t){for(var m=(l=i,u=1+(256/i.length>>0),new Array(u+1).join(l)),r=[],f=0;f<256;f++)r[f]=f;var _=0;for(f=0;f<256;f++){var b=r[f];_=(_+b+m.charCodeAt(f))%256,r[f]=r[_],r[_]=b}t=i,o=r}else r=o;var v=e.length,w=0,x=0,C="";for(f=0;f<v;f++)x=(x+(b=r[w=(w+1)%256]))%256,r[w]=r[x],r[x]=b,m=r[(r[w]+r[x])%256],C+=String.fromCharCode(e.charCodeAt(f)^m);return C}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var r_={print:4,modify:8,copy:16,"annot-forms":32};function L0(i,e,t,o){this.v=1,this.r=2;var l=192;i.forEach(function(r){if(r_.perm!==void 0)throw new Error("Invalid permission: "+r);l+=r_[r]}),this.padding="(\xBFN^Nu\x8AAd\0NV\xFF\xFA\b..\0\xB6\xD0h>\x80/\f\xA9\xFEdSiz";var u=(e+this.padding).substr(0,32),m=(t+this.padding).substr(0,32);this.O=this.processOwnerPassword(u,m),this.P=-(1+(255^l)),this.encryptionKey=B2(u+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(o)).substr(0,5),this.U=z2(this.encryptionKey,this.padding)}function P0(i){if(/[^\u0000-\u00ff]/.test(i))throw new Error("Invalid PDF Name Object: "+i+", Only accept ASCII characters.");for(var e="",t=i.length,o=0;o<t;o++){var l=i.charCodeAt(o);l<33||l===35||l===37||l===40||l===41||l===47||l===60||l===62||l===91||l===93||l===123||l===125||l>126?e+="#"+("0"+l.toString(16)).slice(-2):e+=i[o]}return e}function o_(i){if(es(i)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var e={};this.subscribe=function(t,o,l){if(l=l||!1,typeof t!="string"||typeof o!="function"||typeof l!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");e.hasOwnProperty(t)||(e[t]={});var u=Math.random().toString(35);return e[t][u]=[o,!!l],u},this.unsubscribe=function(t){for(var o in e)if(e[o][t])return delete e[o][t],Object.keys(e[o]).length===0&&delete e[o],!0;return!1},this.publish=function(t){if(e.hasOwnProperty(t)){var o=Array.prototype.slice.call(arguments,1),l=[];for(var u in e[t]){var m=e[t][u];try{m[0].apply(i,o)}catch(r){Vr.console&&hs.error("jsPDF PubSub Error",r.message,r)}m[1]&&l.push(u)}l.length&&l.forEach(this.unsubscribe)}},this.getTopics=function(){return e}}function p1(i){if(!(this instanceof p1))return new p1(i);var e="opacity,stroke-opacity".split(",");for(var t in i)i.hasOwnProperty(t)&&e.indexOf(t)>=0&&(this[t]=i[t]);this.id="",this.objectNumber=-1}function w4(i,e){this.gState=i,this.matrix=e,this.id="",this.objectNumber=-1}function Uf(i,e,t,o,l){if(!(this instanceof Uf))return new Uf(i,e,t,o,l);this.type=i==="axial"?2:3,this.coords=e,this.colors=t,w4.call(this,o,l)}function F0(i,e,t,o,l){if(!(this instanceof F0))return new F0(i,e,t,o,l);this.boundingBox=i,this.xStep=e,this.yStep=t,this.stream="",this.cloneIndex=0,w4.call(this,o,l)}function Ur(i){var e,t=typeof arguments[0]=="string"?arguments[0]:"p",o=arguments[1],l=arguments[2],u=arguments[3],m=[],r=1,f=16,_="S",b=null;es(i=i||{})==="object"&&(t=i.orientation,o=i.unit||o,l=i.format||l,u=i.compress||i.compressPdf||u,(b=i.encryption||null)!==null&&(b.userPassword=b.userPassword||"",b.ownerPassword=b.ownerPassword||"",b.userPermissions=b.userPermissions||[]),r=typeof i.userUnit=="number"?Math.abs(i.userUnit):1,i.precision!==void 0&&(e=i.precision),i.floatPrecision!==void 0&&(f=i.floatPrecision),_=i.defaultPathOperation||"S"),m=i.filters||(u===!0?["FlateEncode"]:m),o=o||"mm",t=(""+(t||"P")).toLowerCase();var v=i.putOnlyUsedFonts||!1,w={},x={internal:{},__private__:{}};x.__private__.PubSub=o_;var C="1.3",T=x.__private__.getPdfVersion=function(){return C};x.__private__.setPdfVersion=function(se){C=se};var S={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};x.__private__.getPageFormats=function(){return S};var M=x.__private__.getPageFormat=function(se){return S[se]};l=l||"a4";var O={COMPAT:"compat",ADVANCED:"advanced"},V=O.COMPAT;function X(){this.saveGraphicsState(),Je(new an(_t,0,0,-_t,0,ma()*_t).toString()+" cm"),this.setFontSize(this.getFontSize()/_t),_="n",V=O.ADVANCED}function Z(){this.restoreGraphicsState(),_="S",V=O.COMPAT}var te=x.__private__.combineFontStyleAndFontWeight=function(se,Ue){if(se=="bold"&&Ue=="normal"||se=="bold"&&Ue==400||se=="normal"&&Ue=="italic"||se=="bold"&&Ue=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return Ue&&(se=Ue==400||Ue==="normal"?se==="italic"?"italic":"normal":Ue!=700&&Ue!=="bold"||se!=="normal"?(Ue==700?"bold":Ue)+""+se:"bold"),se};x.advancedAPI=function(se){var Ue=V===O.COMPAT;return Ue&&X.call(this),typeof se!="function"||(se(this),Ue&&Z.call(this)),this},x.compatAPI=function(se){var Ue=V===O.ADVANCED;return Ue&&Z.call(this),typeof se!="function"||(se(this),Ue&&X.call(this)),this},x.isAdvancedAPI=function(){return V===O.ADVANCED};var J,ie=function(se){if(V!==O.ADVANCED)throw new Error(se+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},Ee=x.roundToPrecision=x.__private__.roundToPrecision=function(se,Ue){var At=e||Ue;if(isNaN(se)||isNaN(At))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return se.toFixed(At).replace(/0+$/,"")};J=x.hpf=x.__private__.hpf=typeof f=="number"?function(se){if(isNaN(se))throw new Error("Invalid argument passed to jsPDF.hpf");return Ee(se,f)}:f==="smart"?function(se){if(isNaN(se))throw new Error("Invalid argument passed to jsPDF.hpf");return Ee(se,se>-1&&se<1?16:5)}:function(se){if(isNaN(se))throw new Error("Invalid argument passed to jsPDF.hpf");return Ee(se,16)};var Pe=x.f2=x.__private__.f2=function(se){if(isNaN(se))throw new Error("Invalid argument passed to jsPDF.f2");return Ee(se,2)},de=x.__private__.f3=function(se){if(isNaN(se))throw new Error("Invalid argument passed to jsPDF.f3");return Ee(se,3)},Te=x.scale=x.__private__.scale=function(se){if(isNaN(se))throw new Error("Invalid argument passed to jsPDF.scale");return V===O.COMPAT?se*_t:V===O.ADVANCED?se:void 0},ve=function(se){return V===O.COMPAT?ma()-se:V===O.ADVANCED?se:void 0},_e=function(se){return Te(ve(se))};x.__private__.setPrecision=x.setPrecision=function(se){typeof parseInt(se,10)=="number"&&(e=parseInt(se,10))};var ot,it="00000000000000000000000000000000",It=x.__private__.getFileId=function(){return it},Xe=x.__private__.setFileId=function(se){return it=se!==void 0&&/^[a-fA-F0-9]{32}$/.test(se)?se.toUpperCase():it.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),b!==null&&(U=new L0(b.userPermissions,b.userPassword,b.ownerPassword,it)),it};x.setFileId=function(se){return Xe(se),this},x.getFileId=function(){return It()};var we=x.__private__.convertDateToPDFDate=function(se){var Ue=se.getTimezoneOffset(),At=Ue<0?"+":"-",Jt=Math.floor(Math.abs(Ue/60)),hi=Math.abs(Ue%60),qi=[At,he(Jt),"'",he(hi),"'"].join("");return["D:",se.getFullYear(),he(se.getMonth()+1),he(se.getDate()),he(se.getHours()),he(se.getMinutes()),he(se.getSeconds()),qi].join("")},Ce=x.__private__.convertPDFDateToDate=function(se){var Ue=parseInt(se.substr(2,4),10),At=parseInt(se.substr(6,2),10)-1,Jt=parseInt(se.substr(8,2),10),hi=parseInt(se.substr(10,2),10),qi=parseInt(se.substr(12,2),10),hn=parseInt(se.substr(14,2),10);return new Date(Ue,At,Jt,hi,qi,hn,0)},Re=x.__private__.setCreationDate=function(se){var Ue;if(se===void 0&&(se=new Date),se instanceof Date)Ue=we(se);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(se))throw new Error("Invalid argument passed to jsPDF.setCreationDate");Ue=se}return ot=Ue},le=x.__private__.getCreationDate=function(se){var Ue=ot;return se==="jsDate"&&(Ue=Ce(ot)),Ue};x.setCreationDate=function(se){return Re(se),this},x.getCreationDate=function(se){return le(se)};var Se,he=x.__private__.padd2=function(se){return("0"+parseInt(se)).slice(-2)},me=x.__private__.padd2Hex=function(se){return("00"+(se=se.toString())).substr(se.length)},Be=0,We=[],st=[],Ye=0,gt=[],Mt=[],ri=!1,ut=st,wt=function(){Be=0,Ye=0,st=[],We=[],gt=[],ct=Le(),dt=Le()};x.__private__.setCustomOutputDestination=function(se){ri=!0,ut=se};var bt=function(se){ri||(ut=se)};x.__private__.resetCustomOutputDestination=function(){ri=!1,ut=st};var Je=x.__private__.out=function(se){return se=se.toString(),Ye+=se.length+1,ut.push(se),ut},ei=x.__private__.write=function(se){return Je(arguments.length===1?se.toString():Array.prototype.join.call(arguments," "))},li=x.__private__.getArrayBuffer=function(se){for(var Ue=se.length,At=new ArrayBuffer(Ue),Jt=new Uint8Array(At);Ue--;)Jt[Ue]=se.charCodeAt(Ue);return At},Qt=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];x.__private__.getStandardFonts=function(){return Qt};var Si=i.fontSize||16;x.__private__.setFontSize=x.setFontSize=function(se){return Si=V===O.ADVANCED?se/_t:se,this};var Ti,Xt=x.__private__.getFontSize=x.getFontSize=function(){return V===O.COMPAT?Si:Si*_t},mi=i.R2L||!1;x.__private__.setR2L=x.setR2L=function(se){return mi=se,this},x.__private__.getR2L=x.getR2L=function(){return mi};var Zi,Ci=x.__private__.setZoomMode=function(se){var Ue=[void 0,null,"fullwidth","fullheight","fullpage","original"];if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(se))Ti=se;else if(isNaN(se)){if(Ue.indexOf(se)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+se+'" is not recognized.');Ti=se}else Ti=parseInt(se,10)};x.__private__.getZoomMode=function(){return Ti};var ti,Me=x.__private__.setPageMode=function(se){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(se)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+se+'" is not recognized.');Zi=se};x.__private__.getPageMode=function(){return Zi};var Q=x.__private__.setLayoutMode=function(se){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(se)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+se+'" is not recognized.');ti=se};x.__private__.getLayoutMode=function(){return ti},x.__private__.setDisplayMode=x.setDisplayMode=function(se,Ue,At){return Ci(se),Q(Ue),Me(At),this};var ae={title:"",subject:"",author:"",keywords:"",creator:""};x.__private__.getDocumentProperty=function(se){if(Object.keys(ae).indexOf(se)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return ae[se]},x.__private__.getDocumentProperties=function(){return ae},x.__private__.setDocumentProperties=x.setProperties=x.setDocumentProperties=function(se){for(var Ue in ae)ae.hasOwnProperty(Ue)&&se[Ue]&&(ae[Ue]=se[Ue]);return this},x.__private__.setDocumentProperty=function(se,Ue){if(Object.keys(ae).indexOf(se)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return ae[se]=Ue};var $e,_t,Kt,di,wn,Ln={},fn={},Bi=[],Ki={},Hn={},Gn={},Zr={},zn=null,dn=0,gn=[],on=new o_(x),Sr=i.hotfixes||[],Wn={},gr={},Kr=[],an=function se(Ue,At,Jt,hi,qi,hn){if(!(this instanceof se))return new se(Ue,At,Jt,hi,qi,hn);isNaN(Ue)&&(Ue=1),isNaN(At)&&(At=0),isNaN(Jt)&&(Jt=0),isNaN(hi)&&(hi=1),isNaN(qi)&&(qi=0),isNaN(hn)&&(hn=0),this._matrix=[Ue,At,Jt,hi,qi,hn]};Object.defineProperty(an.prototype,"sx",{get:function(){return this._matrix[0]},set:function(se){this._matrix[0]=se}}),Object.defineProperty(an.prototype,"shy",{get:function(){return this._matrix[1]},set:function(se){this._matrix[1]=se}}),Object.defineProperty(an.prototype,"shx",{get:function(){return this._matrix[2]},set:function(se){this._matrix[2]=se}}),Object.defineProperty(an.prototype,"sy",{get:function(){return this._matrix[3]},set:function(se){this._matrix[3]=se}}),Object.defineProperty(an.prototype,"tx",{get:function(){return this._matrix[4]},set:function(se){this._matrix[4]=se}}),Object.defineProperty(an.prototype,"ty",{get:function(){return this._matrix[5]},set:function(se){this._matrix[5]=se}}),Object.defineProperty(an.prototype,"a",{get:function(){return this._matrix[0]},set:function(se){this._matrix[0]=se}}),Object.defineProperty(an.prototype,"b",{get:function(){return this._matrix[1]},set:function(se){this._matrix[1]=se}}),Object.defineProperty(an.prototype,"c",{get:function(){return this._matrix[2]},set:function(se){this._matrix[2]=se}}),Object.defineProperty(an.prototype,"d",{get:function(){return this._matrix[3]},set:function(se){this._matrix[3]=se}}),Object.defineProperty(an.prototype,"e",{get:function(){return this._matrix[4]},set:function(se){this._matrix[4]=se}}),Object.defineProperty(an.prototype,"f",{get:function(){return this._matrix[5]},set:function(se){this._matrix[5]=se}}),Object.defineProperty(an.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(an.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(an.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(an.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),an.prototype.join=function(se){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(J).join(se)},an.prototype.multiply=function(se){var Ue=se.sx*this.sx+se.shy*this.shx,At=se.sx*this.shy+se.shy*this.sy,Jt=se.shx*this.sx+se.sy*this.shx,hi=se.shx*this.shy+se.sy*this.sy,qi=se.tx*this.sx+se.ty*this.shx+this.tx,hn=se.tx*this.shy+se.ty*this.sy+this.ty;return new an(Ue,At,Jt,hi,qi,hn)},an.prototype.decompose=function(){var se=this.sx,Ue=this.shy,At=this.shx,Jt=this.sy,hi=this.tx,qi=this.ty,hn=Math.sqrt(se*se+Ue*Ue),Zn=(se/=hn)*At+(Ue/=hn)*Jt;At-=se*Zn,Jt-=Ue*Zn;var Ar=Math.sqrt(At*At+Jt*Jt);return Zn/=Ar,se*(Jt/=Ar)<Ue*(At/=Ar)&&(se=-se,Ue=-Ue,Zn=-Zn,hn=-hn),{scale:new an(hn,0,0,Ar,0,0),translate:new an(1,0,0,1,hi,qi),rotate:new an(se,Ue,-Ue,se,0,0),skew:new an(1,0,Zn,1,0,0)}},an.prototype.toString=function(se){return this.join(" ")},an.prototype.inversed=function(){var se=this.sx,Ue=this.shy,At=this.shx,Jt=this.sy,hi=this.tx,qi=this.ty,hn=1/(se*Jt-Ue*At),Zn=Jt*hn,Ar=-Ue*hn,Nr=-At*hn,Wr=se*hn;return new an(Zn,Ar,Nr,Wr,-Zn*hi-Nr*qi,-Ar*hi-Wr*qi)},an.prototype.applyToPoint=function(se){var Ue=se.x*this.sx+se.y*this.shx+this.tx,At=se.x*this.shy+se.y*this.sy+this.ty;return new ql(Ue,At)},an.prototype.applyToRectangle=function(se){var Ue=this.applyToPoint(se),At=this.applyToPoint(new ql(se.x+se.w,se.y+se.h));return new mu(Ue.x,Ue.y,At.x-Ue.x,At.y-Ue.y)},an.prototype.clone=function(){var se=this.sx,Ue=this.shy,At=this.shx,Jt=this.sy,hi=this.tx,qi=this.ty;return new an(se,Ue,At,Jt,hi,qi)},x.Matrix=an;var He=x.matrixMult=function(se,Ue){return Ue.multiply(se)},wo=new an(1,0,0,1,0,0);x.unitMatrix=x.identityMatrix=wo;var xo=function(se,Ue){if(!Hn[se]){var At=(Ue instanceof Uf?"Sh":"P")+(Object.keys(Ki).length+1).toString(10);Ue.id=At,Hn[se]=At,Ki[At]=Ue,on.publish("addPattern",Ue)}};x.ShadingPattern=Uf,x.TilingPattern=F0,x.addShadingPattern=function(se,Ue){return ie("addShadingPattern()"),xo(se,Ue),this},x.beginTilingPattern=function(se){ie("beginTilingPattern()"),Fn(se.boundingBox[0],se.boundingBox[1],se.boundingBox[2]-se.boundingBox[0],se.boundingBox[3]-se.boundingBox[1],se.matrix)},x.endTilingPattern=function(se,Ue){ie("endTilingPattern()"),Ue.stream=Mt[Se].join(`
`),xo(se,Ue),on.publish("endTilingPattern",Ue),Kr.pop().restore()};var co=x.__private__.newObject=function(){var se=Le();return Ie(se,!0),se},Le=x.__private__.newObjectDeferred=function(){return Be++,We[Be]=function(){return Ye},Be},Ie=function(se,Ue){return Ue=typeof Ue=="boolean"&&Ue,We[se]=Ye,Ue&&Je(se+" 0 obj"),se},qe=x.__private__.newAdditionalObject=function(){var se={objId:Le(),content:""};return gt.push(se),se},ct=Le(),dt=Le(),Bt=x.__private__.decodeColorString=function(se){var Ue=se.split(" ");if(Ue.length!==2||Ue[1]!=="g"&&Ue[1]!=="G")Ue.length===5&&(Ue[4]==="k"||Ue[4]==="K")&&(Ue=[(1-Ue[0])*(1-Ue[3]),(1-Ue[1])*(1-Ue[3]),(1-Ue[2])*(1-Ue[3]),"r"]);else{var At=parseFloat(Ue[0]);Ue=[At,At,At,"r"]}for(var Jt="#",hi=0;hi<3;hi++)Jt+=("0"+Math.floor(255*parseFloat(Ue[hi])).toString(16)).slice(-2);return Jt},Ge=x.__private__.encodeColorString=function(se){var Ue;typeof se=="string"&&(se={ch1:se});var At=se.ch1,Jt=se.ch2,hi=se.ch3,qi=se.ch4,hn=se.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof At=="string"&&At.charAt(0)!=="#"){var Zn=new v4(At);if(Zn.ok)At=Zn.toHex();else if(!/^\d*\.?\d*$/.test(At))throw new Error('Invalid color "'+At+'" passed to jsPDF.encodeColorString.')}if(typeof At=="string"&&/^#[0-9A-Fa-f]{3}$/.test(At)&&(At="#"+At[1]+At[1]+At[2]+At[2]+At[3]+At[3]),typeof At=="string"&&/^#[0-9A-Fa-f]{6}$/.test(At)){var Ar=parseInt(At.substr(1),16);At=Ar>>16&255,Jt=Ar>>8&255,hi=255&Ar}if(Jt===void 0||qi===void 0&&At===Jt&&Jt===hi)if(typeof At=="string")Ue=At+" "+hn[0];else switch(se.precision){case 2:Ue=Pe(At/255)+" "+hn[0];break;case 3:default:Ue=de(At/255)+" "+hn[0]}else if(qi===void 0||es(qi)==="object"){if(qi&&!isNaN(qi.a)&&qi.a===0)return Ue=["1.","1.","1.",hn[1]].join(" ");if(typeof At=="string")Ue=[At,Jt,hi,hn[1]].join(" ");else switch(se.precision){case 2:Ue=[Pe(At/255),Pe(Jt/255),Pe(hi/255),hn[1]].join(" ");break;default:case 3:Ue=[de(At/255),de(Jt/255),de(hi/255),hn[1]].join(" ")}}else if(typeof At=="string")Ue=[At,Jt,hi,qi,hn[2]].join(" ");else switch(se.precision){case 2:Ue=[Pe(At),Pe(Jt),Pe(hi),Pe(qi),hn[2]].join(" ");break;case 3:default:Ue=[de(At),de(Jt),de(hi),de(qi),hn[2]].join(" ")}return Ue},Yt=x.__private__.getFilters=function(){return m},Ft=x.__private__.putStream=function(se){var Ue=(se=se||{}).data||"",At=se.filters||Yt(),Jt=se.alreadyAppliedFilters||[],hi=se.addLength1||!1,qi=Ue.length,hn=se.objectId,Zn=function(Cs){return Cs};if(b!==null&&hn===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");b!==null&&(Zn=U.encryptor(hn,0));var Ar={};At===!0&&(At=["FlateEncode"]);var Nr=se.additionalKeyValues||[],Wr=(Ar=Ur.API.processDataByFilters!==void 0?Ur.API.processDataByFilters(Ue,At):{data:Ue,reverseChain:[]}).reverseChain+(Array.isArray(Jt)?Jt.join(" "):Jt.toString());if(Ar.data.length!==0&&(Nr.push({key:"Length",value:Ar.data.length}),hi===!0&&Nr.push({key:"Length1",value:qi})),Wr.length!=0)if(Wr.split("/").length-1==1)Nr.push({key:"Filter",value:Wr});else{Nr.push({key:"Filter",value:"["+Wr+"]"});for(var eo=0;eo<Nr.length;eo+=1)if(Nr[eo].key==="DecodeParms"){for(var Bo=[],qo=0;qo<Ar.reverseChain.split("/").length-1;qo+=1)Bo.push("null");Bo.push(Nr[eo].value),Nr[eo].value="["+Bo.join(" ")+"]"}}Je("<<");for(var Wo=0;Wo<Nr.length;Wo++)Je("/"+Nr[Wo].key+" "+Nr[Wo].value);Je(">>"),Ar.data.length!==0&&(Je("stream"),Je(Zn(Ar.data)),Je("endstream"))},oi=x.__private__.putPage=function(se){var Ue=se.number,At=se.data,Jt=se.objId,hi=se.contentsObjId;Ie(Jt,!0),Je("<</Type /Page"),Je("/Parent "+se.rootDictionaryObjId+" 0 R"),Je("/Resources "+se.resourceDictionaryObjId+" 0 R"),Je("/MediaBox ["+parseFloat(J(se.mediaBox.bottomLeftX))+" "+parseFloat(J(se.mediaBox.bottomLeftY))+" "+J(se.mediaBox.topRightX)+" "+J(se.mediaBox.topRightY)+"]"),se.cropBox!==null&&Je("/CropBox ["+J(se.cropBox.bottomLeftX)+" "+J(se.cropBox.bottomLeftY)+" "+J(se.cropBox.topRightX)+" "+J(se.cropBox.topRightY)+"]"),se.bleedBox!==null&&Je("/BleedBox ["+J(se.bleedBox.bottomLeftX)+" "+J(se.bleedBox.bottomLeftY)+" "+J(se.bleedBox.topRightX)+" "+J(se.bleedBox.topRightY)+"]"),se.trimBox!==null&&Je("/TrimBox ["+J(se.trimBox.bottomLeftX)+" "+J(se.trimBox.bottomLeftY)+" "+J(se.trimBox.topRightX)+" "+J(se.trimBox.topRightY)+"]"),se.artBox!==null&&Je("/ArtBox ["+J(se.artBox.bottomLeftX)+" "+J(se.artBox.bottomLeftY)+" "+J(se.artBox.topRightX)+" "+J(se.artBox.topRightY)+"]"),typeof se.userUnit=="number"&&se.userUnit!==1&&Je("/UserUnit "+se.userUnit),on.publish("putPage",{objId:Jt,pageContext:gn[Ue],pageNumber:Ue,page:At}),Je("/Contents "+hi+" 0 R"),Je(">>"),Je("endobj");var qi=At.join(`
`);return V===O.ADVANCED&&(qi+=`
Q`),Ie(hi,!0),Ft({data:qi,filters:Yt(),objectId:hi}),Je("endobj"),Jt},yt=x.__private__.putPages=function(){var se,Ue,At=[];for(se=1;se<=dn;se++)gn[se].objId=Le(),gn[se].contentsObjId=Le();for(se=1;se<=dn;se++)At.push(oi({number:se,data:Mt[se],objId:gn[se].objId,contentsObjId:gn[se].contentsObjId,mediaBox:gn[se].mediaBox,cropBox:gn[se].cropBox,bleedBox:gn[se].bleedBox,trimBox:gn[se].trimBox,artBox:gn[se].artBox,userUnit:gn[se].userUnit,rootDictionaryObjId:ct,resourceDictionaryObjId:dt}));Ie(ct,!0),Je("<</Type /Pages");var Jt="/Kids [";for(Ue=0;Ue<dn;Ue++)Jt+=At[Ue]+" 0 R ";Je(Jt+"]"),Je("/Count "+dn),Je(">>"),Je("endobj"),on.publish("postPutPages")},Ri=function(se){on.publish("putFont",{font:se,out:Je,newObject:co,putStream:Ft}),se.isAlreadyPutted!==!0&&(se.objectNumber=co(),Je("<<"),Je("/Type /Font"),Je("/BaseFont /"+P0(se.postScriptName)),Je("/Subtype /Type1"),typeof se.encoding=="string"&&Je("/Encoding /"+se.encoding),Je("/FirstChar 32"),Je("/LastChar 255"),Je(">>"),Je("endobj"))},Ii=function(){for(var se in Ln)Ln.hasOwnProperty(se)&&(v===!1||v===!0&&w.hasOwnProperty(se))&&Ri(Ln[se])},En=function(se){se.objectNumber=co();var Ue=[];Ue.push({key:"Type",value:"/XObject"}),Ue.push({key:"Subtype",value:"/Form"}),Ue.push({key:"BBox",value:"["+[J(se.x),J(se.y),J(se.x+se.width),J(se.y+se.height)].join(" ")+"]"}),Ue.push({key:"Matrix",value:"["+se.matrix.toString()+"]"});var At=se.pages[1].join(`
`);Ft({data:At,additionalKeyValues:Ue,objectId:se.objectNumber}),Je("endobj")},Sn=function(){for(var se in Wn)Wn.hasOwnProperty(se)&&En(Wn[se])},xt=function(se,Ue){var At,Jt=[],hi=1/(Ue-1);for(At=0;At<1;At+=hi)Jt.push(At);if(Jt.push(1),se[0].offset!=0){var qi={offset:0,color:se[0].color};se.unshift(qi)}if(se[se.length-1].offset!=1){var hn={offset:1,color:se[se.length-1].color};se.push(hn)}for(var Zn="",Ar=0,Nr=0;Nr<Jt.length;Nr++){for(At=Jt[Nr];At>se[Ar+1].offset;)Ar++;var Wr=se[Ar].offset,eo=(At-Wr)/(se[Ar+1].offset-Wr),Bo=se[Ar].color,qo=se[Ar+1].color;Zn+=me(Math.round((1-eo)*Bo[0]+eo*qo[0]).toString(16))+me(Math.round((1-eo)*Bo[1]+eo*qo[1]).toString(16))+me(Math.round((1-eo)*Bo[2]+eo*qo[2]).toString(16))}return Zn.trim()},Tn=function(se,Ue){Ue||(Ue=21);var At=co(),Jt=xt(se.colors,Ue),hi=[];hi.push({key:"FunctionType",value:"0"}),hi.push({key:"Domain",value:"[0.0 1.0]"}),hi.push({key:"Size",value:"["+Ue+"]"}),hi.push({key:"BitsPerSample",value:"8"}),hi.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),hi.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Ft({data:Jt,additionalKeyValues:hi,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:At}),Je("endobj"),se.objectNumber=co(),Je("<< /ShadingType "+se.type),Je("/ColorSpace /DeviceRGB");var qi="/Coords ["+J(parseFloat(se.coords[0]))+" "+J(parseFloat(se.coords[1]))+" ";se.type===2?qi+=J(parseFloat(se.coords[2]))+" "+J(parseFloat(se.coords[3])):qi+=J(parseFloat(se.coords[2]))+" "+J(parseFloat(se.coords[3]))+" "+J(parseFloat(se.coords[4]))+" "+J(parseFloat(se.coords[5])),Je(qi+="]"),se.matrix&&Je("/Matrix ["+se.matrix.toString()+"]"),Je("/Function "+At+" 0 R"),Je("/Extend [true true]"),Je(">>"),Je("endobj")},Qn=function(se,Ue){var At=Le(),Jt=co();Ue.push({resourcesOid:At,objectOid:Jt}),se.objectNumber=Jt;var hi=[];hi.push({key:"Type",value:"/Pattern"}),hi.push({key:"PatternType",value:"1"}),hi.push({key:"PaintType",value:"1"}),hi.push({key:"TilingType",value:"1"}),hi.push({key:"BBox",value:"["+se.boundingBox.map(J).join(" ")+"]"}),hi.push({key:"XStep",value:J(se.xStep)}),hi.push({key:"YStep",value:J(se.yStep)}),hi.push({key:"Resources",value:At+" 0 R"}),se.matrix&&hi.push({key:"Matrix",value:"["+se.matrix.toString()+"]"}),Ft({data:se.stream,additionalKeyValues:hi,objectId:se.objectNumber}),Je("endobj")},Lr=function(se){var Ue;for(Ue in Ki)Ki.hasOwnProperty(Ue)&&(Ki[Ue]instanceof Uf?Tn(Ki[Ue]):Ki[Ue]instanceof F0&&Qn(Ki[Ue],se))},dr=function(se){for(var Ue in se.objectNumber=co(),Je("<<"),se)switch(Ue){case"opacity":Je("/ca "+Pe(se[Ue]));break;case"stroke-opacity":Je("/CA "+Pe(se[Ue]))}Je(">>"),Je("endobj")},Cr=function(){var se;for(se in Gn)Gn.hasOwnProperty(se)&&dr(Gn[se])},Pr=function(){for(var se in Je("/XObject <<"),Wn)Wn.hasOwnProperty(se)&&Wn[se].objectNumber>=0&&Je("/"+se+" "+Wn[se].objectNumber+" 0 R");on.publish("putXobjectDict"),Je(">>")},to=function(){U.oid=co(),Je("<<"),Je("/Filter /Standard"),Je("/V "+U.v),Je("/R "+U.r),Je("/U <"+U.toHexString(U.U)+">"),Je("/O <"+U.toHexString(U.O)+">"),Je("/P "+U.P),Je(">>"),Je("endobj")},Jr=function(){for(var se in Je("/Font <<"),Ln)Ln.hasOwnProperty(se)&&(v===!1||v===!0&&w.hasOwnProperty(se))&&Je("/"+se+" "+Ln[se].objectNumber+" 0 R");Je(">>")},vo=function(){if(Object.keys(Ki).length>0){for(var se in Je("/Shading <<"),Ki)Ki.hasOwnProperty(se)&&Ki[se]instanceof Uf&&Ki[se].objectNumber>=0&&Je("/"+se+" "+Ki[se].objectNumber+" 0 R");on.publish("putShadingPatternDict"),Je(">>")}},$o=function(se){if(Object.keys(Ki).length>0){for(var Ue in Je("/Pattern <<"),Ki)Ki.hasOwnProperty(Ue)&&Ki[Ue]instanceof x.TilingPattern&&Ki[Ue].objectNumber>=0&&Ki[Ue].objectNumber<se&&Je("/"+Ue+" "+Ki[Ue].objectNumber+" 0 R");on.publish("putTilingPatternDict"),Je(">>")}},tl=function(){if(Object.keys(Gn).length>0){var se;for(se in Je("/ExtGState <<"),Gn)Gn.hasOwnProperty(se)&&Gn[se].objectNumber>=0&&Je("/"+se+" "+Gn[se].objectNumber+" 0 R");on.publish("putGStateDict"),Je(">>")}},Fo=function(se){Ie(se.resourcesOid,!0),Je("<<"),Je("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),Jr(),vo(),$o(se.objectOid),tl(),Pr(),Je(">>"),Je("endobj")},Dt=function(){var se=[];Ii(),Cr(),Sn(),Lr(se),on.publish("putResources"),se.forEach(Fo),Fo({resourcesOid:dt,objectOid:Number.MAX_SAFE_INTEGER}),on.publish("postPutResources")},rr=function(){on.publish("putAdditionalObjects");for(var se=0;se<gt.length;se++){var Ue=gt[se];Ie(Ue.objId,!0),Je(Ue.content),Je("endobj")}on.publish("postPutAdditionalObjects")},lr=function(se){fn[se.fontName]=fn[se.fontName]||{},fn[se.fontName][se.fontStyle]=se.id},zr=function(se,Ue,At,Jt,hi){var qi={id:"F"+(Object.keys(Ln).length+1).toString(10),postScriptName:se,fontName:Ue,fontStyle:At,encoding:Jt,isStandardFont:hi||!1,metadata:{}};return on.publish("addFont",{font:qi,instance:this}),Ln[qi.id]=qi,lr(qi),qi.id},Zo=function(se){for(var Ue=0,At=Qt.length;Ue<At;Ue++){var Jt=zr.call(this,se[Ue][0],se[Ue][1],se[Ue][2],Qt[Ue][3],!0);v===!1&&(w[Jt]=!0);var hi=se[Ue][0].split("-");lr({id:Jt,fontName:hi[0],fontStyle:hi[1]||""})}on.publish("addFonts",{fonts:Ln,dictionary:fn})},Ro=function(se){return se.foo=function(){try{return se.apply(this,arguments)}catch(Jt){var Ue=Jt.stack||"";~Ue.indexOf(" at ")&&(Ue=Ue.split(" at ")[1]);var At="Error in function "+Ue.split(`
`)[0].split("<")[0]+": "+Jt.message;if(!Vr.console)throw new Error(At);Vr.console.error(At,Jt),Vr.alert&&alert(At)}},se.foo.bar=se,se.foo},Sa=function(se,Ue){var At,Jt,hi,qi,hn,Zn,Ar,Nr,Wr;if(hi=(Ue=Ue||{}).sourceEncoding||"Unicode",hn=Ue.outputEncoding,(Ue.autoencode||hn)&&Ln[$e].metadata&&Ln[$e].metadata[hi]&&Ln[$e].metadata[hi].encoding&&(qi=Ln[$e].metadata[hi].encoding,!hn&&Ln[$e].encoding&&(hn=Ln[$e].encoding),!hn&&qi.codePages&&(hn=qi.codePages[0]),typeof hn=="string"&&(hn=qi[hn]),hn)){for(Ar=!1,Zn=[],At=0,Jt=se.length;At<Jt;At++)(Nr=hn[se.charCodeAt(At)])?Zn.push(String.fromCharCode(Nr)):Zn.push(se[At]),Zn[At].charCodeAt(0)>>8&&(Ar=!0);se=Zn.join("")}for(At=se.length;Ar===void 0&&At!==0;)se.charCodeAt(At-1)>>8&&(Ar=!0),At--;if(!Ar)return se;for(Zn=Ue.noBOM?[]:[254,255],At=0,Jt=se.length;At<Jt;At++){if((Wr=(Nr=se.charCodeAt(At))>>8)>>8)throw new Error("Character at position "+At+" of string '"+se+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");Zn.push(Wr),Zn.push(Nr-(Wr<<8))}return String.fromCharCode.apply(void 0,Zn)},ts=x.__private__.pdfEscape=x.pdfEscape=function(se,Ue){return Sa(se,Ue).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Vs=x.__private__.beginPage=function(se){Mt[++dn]=[],gn[dn]={objId:0,contentsObjId:0,userUnit:Number(r),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(se[0]),topRightY:Number(se[1])}},Ss(dn),bt(Mt[Se])},_s=function(se,Ue){var At,Jt,hi;switch(t=Ue||t,typeof se=="string"&&(At=M(se.toLowerCase()),Array.isArray(At)&&(Jt=At[0],hi=At[1])),Array.isArray(se)&&(Jt=se[0]*_t,hi=se[1]*_t),isNaN(Jt)&&(Jt=l[0],hi=l[1]),(Jt>14400||hi>14400)&&(hs.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),Jt=Math.min(14400,Jt),hi=Math.min(14400,hi)),l=[Jt,hi],t.substr(0,1)){case"l":hi>Jt&&(l=[hi,Jt]);break;case"p":Jt>hi&&(l=[hi,Jt])}Vs(l),$n(F),Je(Hs),Ru!==0&&Je(Ru+" J"),du!==0&&Je(du+" j"),on.publish("addPage",{pageNumber:dn})},Ca=function(se){se>0&&se<=dn&&(Mt.splice(se,1),gn.splice(se,1),dn--,Se>dn&&(Se=dn),this.setPage(Se))},Ss=function(se){se>0&&se<=dn&&(Se=se)},Zs=x.__private__.getNumberOfPages=x.getNumberOfPages=function(){return Mt.length-1},qs=function(se,Ue,At){var Jt,hi=void 0;return At=At||{},se=se!==void 0?se:Ln[$e].fontName,Ue=Ue!==void 0?Ue:Ln[$e].fontStyle,Jt=se.toLowerCase(),fn[Jt]!==void 0&&fn[Jt][Ue]!==void 0?hi=fn[Jt][Ue]:fn[se]!==void 0&&fn[se][Ue]!==void 0?hi=fn[se][Ue]:At.disableWarning===!1&&hs.warn("Unable to look up font label for font '"+se+"', '"+Ue+"'. Refer to getFontList() for available fonts."),hi||At.noFallback||(hi=fn.times[Ue])==null&&(hi=fn.times.normal),hi},Ea=x.__private__.putInfo=function(){var se=co(),Ue=function(Jt){return Jt};for(var At in b!==null&&(Ue=U.encryptor(se,0)),Je("<<"),Je("/Producer ("+ts(Ue("jsPDF "+Ur.version))+")"),ae)ae.hasOwnProperty(At)&&ae[At]&&Je("/"+At.substr(0,1).toUpperCase()+At.substr(1)+" ("+ts(Ue(ae[At]))+")");Je("/CreationDate ("+ts(Ue(ot))+")"),Je(">>"),Je("endobj")},wl=x.__private__.putCatalog=function(se){var Ue=(se=se||{}).rootDictionaryObjId||ct;switch(co(),Je("<<"),Je("/Type /Catalog"),Je("/Pages "+Ue+" 0 R"),Ti||(Ti="fullwidth"),Ti){case"fullwidth":Je("/OpenAction [3 0 R /FitH null]");break;case"fullheight":Je("/OpenAction [3 0 R /FitV null]");break;case"fullpage":Je("/OpenAction [3 0 R /Fit]");break;case"original":Je("/OpenAction [3 0 R /XYZ null null 1]");break;default:var At=""+Ti;At.substr(At.length-1)==="%"&&(Ti=parseInt(Ti)/100),typeof Ti=="number"&&Je("/OpenAction [3 0 R /XYZ null null "+Pe(Ti)+"]")}switch(ti||(ti="continuous"),ti){case"continuous":Je("/PageLayout /OneColumn");break;case"single":Je("/PageLayout /SinglePage");break;case"two":case"twoleft":Je("/PageLayout /TwoColumnLeft");break;case"tworight":Je("/PageLayout /TwoColumnRight")}Zi&&Je("/PageMode /"+Zi),on.publish("putCatalog"),Je(">>"),Je("endobj")},uu=x.__private__.putTrailer=function(){Je("trailer"),Je("<<"),Je("/Size "+(Be+1)),Je("/Root "+Be+" 0 R"),Je("/Info "+(Be-1)+" 0 R"),b!==null&&Je("/Encrypt "+U.oid+" 0 R"),Je("/ID [ <"+it+"> <"+it+"> ]"),Je(">>")},xl=x.__private__.putHeader=function(){Je("%PDF-"+C),Je("%\xBA\xDF\xAC\xE0")},cu=x.__private__.putXRef=function(){var se="0000000000";Je("xref"),Je("0 "+(Be+1)),Je("0000000000 65535 f ");for(var Ue=1;Ue<=Be;Ue++)typeof We[Ue]=="function"?Je((se+We[Ue]()).slice(-10)+" 00000 n "):We[Ue]!==void 0?Je((se+We[Ue]).slice(-10)+" 00000 n "):Je("0000000000 00000 n ")},ha=x.__private__.buildDocument=function(){wt(),bt(st),on.publish("buildDocument"),xl(),yt(),rr(),Dt(),b!==null&&to(),Ea(),wl();var se=Ye;return cu(),uu(),Je("startxref"),Je(""+se),Je("%%EOF"),bt(Mt[Se]),st.join(`
`)},fa=x.__private__.getBlob=function(se){return new Blob([li(se)],{type:"application/pdf"})},Io=x.output=x.__private__.output=Ro(function(se,Ue){switch(typeof(Ue=Ue||{})=="string"?Ue={filename:Ue}:Ue.filename=Ue.filename||"generated.pdf",se){case void 0:return ha();case"save":x.save(Ue.filename);break;case"arraybuffer":return li(ha());case"blob":return fa(ha());case"bloburi":case"bloburl":if(Vr.URL!==void 0&&typeof Vr.URL.createObjectURL=="function")return Vr.URL&&Vr.URL.createObjectURL(fa(ha()))||void 0;hs.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var At="",Jt=ha();try{At=R2(Jt)}catch{At=R2(unescape(encodeURIComponent(Jt)))}return"data:application/pdf;filename="+Ue.filename+";base64,"+At;case"pdfobjectnewwindow":if(Object.prototype.toString.call(Vr)==="[object Window]"){var hi="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",qi=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';Ue.pdfObjectUrl&&(hi=Ue.pdfObjectUrl,qi="");var hn='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+hi+'"'+qi+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(Ue)+");<\/script></body></html>",Zn=Vr.open();return Zn!==null&&Zn.document.write(hn),Zn}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(Vr)==="[object Window]"){var Ar='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(Ue.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+Ue.filename+'" width="500px" height="400px" /></body></html>',Nr=Vr.open();if(Nr!==null){Nr.document.write(Ar);var Wr=this;Nr.document.documentElement.querySelector("#pdfViewer").onload=function(){Nr.document.title=Ue.filename,Nr.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(Wr.output("bloburl"))}}return Nr}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(Vr)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var eo='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",Ue)+'"></iframe></body></html>',Bo=Vr.open();if(Bo!==null&&(Bo.document.write(eo),Bo.document.title=Ue.filename),Bo||typeof safari>"u")return Bo;break;case"datauri":case"dataurl":return Vr.document.location.href=this.output("datauristring",Ue);default:return null}}),il=function(se){return Array.isArray(Sr)===!0&&Sr.indexOf(se)>-1};switch(o){case"pt":_t=1;break;case"mm":_t=72/25.4;break;case"cm":_t=72/2.54;break;case"in":_t=72;break;case"px":_t=il("px_scaling")==1?.75:96/72;break;case"pc":case"em":_t=12;break;case"ex":_t=6;break;default:if(typeof o!="number")throw new Error("Invalid unit: "+o);_t=o}var U=null;Re(),Xe();var $=function(se){return b!==null?U.encryptor(se,0):function(Ue){return Ue}},ge=x.__private__.getPageInfo=x.getPageInfo=function(se){if(isNaN(se)||se%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:gn[se].objId,pageNumber:se,pageContext:gn[se]}},Oe=x.__private__.getPageInfoByObjId=function(se){if(isNaN(se)||se%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var Ue in gn)if(gn[Ue].objId===se)break;return ge(Ue)},nt=x.__private__.getCurrentPageInfo=x.getCurrentPageInfo=function(){return{objId:gn[Se].objId,pageNumber:Se,pageContext:gn[Se]}};x.addPage=function(){return _s.apply(this,arguments),this},x.setPage=function(){return Ss.apply(this,arguments),bt.call(this,Mt[Se]),this},x.insertPage=function(se){return this.addPage(),this.movePage(Se,se),this},x.movePage=function(se,Ue){var At,Jt;if(se>Ue){At=Mt[se],Jt=gn[se];for(var hi=se;hi>Ue;hi--)Mt[hi]=Mt[hi-1],gn[hi]=gn[hi-1];Mt[Ue]=At,gn[Ue]=Jt,this.setPage(Ue)}else if(se<Ue){At=Mt[se],Jt=gn[se];for(var qi=se;qi<Ue;qi++)Mt[qi]=Mt[qi+1],gn[qi]=gn[qi+1];Mt[Ue]=At,gn[Ue]=Jt,this.setPage(Ue)}return this},x.deletePage=function(){return Ca.apply(this,arguments),this},x.__private__.text=x.text=function(se,Ue,At,Jt,hi){var qi,hn,Zn,Ar,Nr,Wr,eo,Bo,qo,Wo=(Jt=Jt||{}).scope||this;if(typeof se=="number"&&typeof Ue=="number"&&(typeof At=="string"||Array.isArray(At))){var Cs=At;At=Ue,Ue=se,se=Cs}if(arguments[3]instanceof an?(ie("The transform parameter of text() with a Matrix value"),qo=hi):(Zn=arguments[4],Ar=arguments[5],es(eo=arguments[3])==="object"&&eo!==null||(typeof Zn=="string"&&(Ar=Zn,Zn=null),typeof eo=="string"&&(Ar=eo,eo=null),typeof eo=="number"&&(Zn=eo,eo=null),Jt={flags:eo,angle:Zn,align:Ar})),isNaN(Ue)||isNaN(At)||se==null)throw new Error("Invalid arguments passed to jsPDF.text");if(se.length===0)return Wo;var ds="",jr=!1,Es=typeof Jt.lineHeightFactor=="number"?Jt.lineHeightFactor:c,vs=Wo.internal.scaleFactor;function Gl(zo){return zo=zo.split("	").join(Array(Jt.TabLen||9).join(" ")),ts(zo,eo)}function kl(zo){for(var Hr,Po=zo.concat(),is=[],yn=Po.length;yn--;)typeof(Hr=Po.shift())=="string"?is.push(Hr):Array.isArray(zo)&&(Hr.length===1||Hr[1]===void 0&&Hr[2]===void 0)?is.push(Hr[0]):is.push([Hr[0],Hr[1],Hr[2]]);return is}function zu(zo,Hr){var Po;if(typeof zo=="string")Po=Hr(zo)[0];else if(Array.isArray(zo)){for(var is,yn,Da=zo.concat(),Vu=[],qu=Da.length;qu--;)typeof(is=Da.shift())=="string"?Vu.push(Hr(is)[0]):Array.isArray(is)&&typeof is[0]=="string"&&(yn=Hr(is[0],is[1],is[2]),Vu.push([yn[0],yn[1],yn[2]]));Po=Vu}return Po}var Ia=!1,Sl=!0;if(typeof se=="string")Ia=!0;else if(Array.isArray(se)){var nl=se.concat();hn=[];for(var Nu,Fs=nl.length;Fs--;)(typeof(Nu=nl.shift())!="string"||Array.isArray(Nu)&&typeof Nu[0]!="string")&&(Sl=!1);Ia=Sl}if(Ia===!1)throw new Error('Type of text must be string or Array. "'+se+'" is not recognized.');typeof se=="string"&&(se=se.match(/[\r?\n]/)?se.split(/\r\n|\r|\n/g):[se]);var gu=Si/Wo.internal.scaleFactor,Wl=gu*(Es-1);switch(Jt.baseline){case"bottom":At-=Wl;break;case"top":At+=gu-Wl;break;case"hanging":At+=gu-2*Wl;break;case"middle":At+=gu/2-Wl}if((Wr=Jt.maxWidth||0)>0&&(typeof se=="string"?se=Wo.splitTextToSize(se,Wr):Object.prototype.toString.call(se)==="[object Array]"&&(se=se.reduce(function(zo,Hr){return zo.concat(Wo.splitTextToSize(Hr,Wr))},[]))),qi={text:se,x:Ue,y:At,options:Jt,mutex:{pdfEscape:ts,activeFontKey:$e,fonts:Ln,activeFontSize:Si}},on.publish("preProcessText",qi),se=qi.text,Zn=(Jt=qi.options).angle,!(qo instanceof an)&&Zn&&typeof Zn=="number"){Zn*=Math.PI/180,Jt.rotationDirection===0&&(Zn=-Zn),V===O.ADVANCED&&(Zn=-Zn);var Ua=Math.cos(Zn),yu=Math.sin(Zn);qo=new an(Ua,yu,-yu,Ua,0,0)}else Zn&&Zn instanceof an&&(qo=Zn);V!==O.ADVANCED||qo||(qo=wo),(Nr=Jt.charSpace||fu)!==void 0&&(ds+=J(Te(Nr))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(Bo=Jt.horizontalScale)!==void 0&&(ds+=J(100*Bo)+` Tz
`),Jt.lang;var Rs=-1,_u=Jt.renderingMode!==void 0?Jt.renderingMode:Jt.stroke,rl=Wo.internal.getCurrentPageInfo().pageContext;switch(_u){case 0:case!1:case"fill":Rs=0;break;case 1:case!0:case"stroke":Rs=1;break;case 2:case"fillThenStroke":Rs=2;break;case 3:case"invisible":Rs=3;break;case 4:case"fillAndAddForClipping":Rs=4;break;case 5:case"strokeAndAddPathForClipping":Rs=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":Rs=6;break;case 7:case"addToPathForClipping":Rs=7}var Xl=rl.usedRenderingMode!==void 0?rl.usedRenderingMode:-1;Rs!==-1?ds+=Rs+` Tr
`:Xl!==-1&&(ds+=`0 Tr
`),Rs!==-1&&(rl.usedRenderingMode=Rs),Ar=Jt.align||"left";var Ta,Cl=Si*Es,Dc=Wo.internal.pageSize.getWidth(),Oc=Ln[$e];Nr=Jt.charSpace||fu,Wr=Jt.maxWidth||0,eo=Object.assign({autoencode:!0,noBOM:!0},Jt.flags);var El=[];if(Object.prototype.toString.call(se)==="[object Array]"){var Bs;hn=kl(se),Ar!=="left"&&(Ta=hn.map(function(zo){return Wo.getStringUnitWidth(zo,{font:Oc,charSpace:Nr,fontSize:Si,doKerning:!1})*Si/vs}));var La,Pa=0;if(Ar==="right"){Ue-=Ta[0],se=[],Fs=hn.length;for(var ra=0;ra<Fs;ra++)ra===0?(La=da(Ue),Bs=Na(At)):(La=Te(Pa-Ta[ra]),Bs=-Cl),se.push([hn[ra],La,Bs]),Pa=Ta[ra]}else if(Ar==="center"){Ue-=Ta[0]/2,se=[],Fs=hn.length;for(var ls=0;ls<Fs;ls++)ls===0?(La=da(Ue),Bs=Na(At)):(La=Te((Pa-Ta[ls])/2),Bs=-Cl),se.push([hn[ls],La,Bs]),Pa=Ta[ls]}else if(Ar==="left"){se=[],Fs=hn.length;for(var ol=0;ol<Fs;ol++)se.push(hn[ol])}else{if(Ar!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');se=[],Fs=hn.length,Wr=Wr!==0?Wr:Dc;for(var Ko=0;Ko<Fs;Ko++)Bs=Ko===0?Na(At):-Cl,La=Ko===0?da(Ue):0,Ko<Fs-1?El.push(J(Te((Wr-Ta[Ko])/(hn[Ko].split(" ").length-1)))):El.push(0),se.push([hn[Ko],La,Bs])}}var ju=typeof Jt.R2L=="boolean"?Jt.R2L:mi;ju===!0&&(se=zu(se,function(zo,Hr,Po){return[zo.split("").reverse().join(""),Hr,Po]})),qi={text:se,x:Ue,y:At,options:Jt,mutex:{pdfEscape:ts,activeFontKey:$e,fonts:Ln,activeFontSize:Si}},on.publish("postProcessText",qi),se=qi.text,jr=qi.mutex.isHex||!1;var Ma=Ln[$e].encoding;Ma!=="WinAnsiEncoding"&&Ma!=="StandardEncoding"||(se=zu(se,function(zo,Hr,Po){return[Gl(zo),Hr,Po]})),hn=kl(se),se=[];for(var oa,Xr,ga,Il=0,Uu=1,vu=Array.isArray(hn[0])?Uu:Il,Gs="",Tl=function(zo,Hr,Po){var is="";return Po instanceof an?(Po=typeof Jt.angle=="number"?He(Po,new an(1,0,0,1,zo,Hr)):He(new an(1,0,0,1,zo,Hr),Po),V===O.ADVANCED&&(Po=He(new an(1,0,0,-1,0,0),Po)),is=Po.join(" ")+` Tm
`):is=J(zo)+" "+J(Hr)+` Td
`,is},ps=0;ps<hn.length;ps++){switch(Gs="",vu){case Uu:ga=(jr?"<":"(")+hn[ps][0]+(jr?">":")"),oa=parseFloat(hn[ps][1]),Xr=parseFloat(hn[ps][2]);break;case Il:ga=(jr?"<":"(")+hn[ps]+(jr?">":")"),oa=da(Ue),Xr=Na(At)}El!==void 0&&El[ps]!==void 0&&(Gs=El[ps]+` Tw
`),ps===0?se.push(Gs+Tl(oa,Xr,qo)+ga):vu===Il?se.push(Gs+ga):vu===Uu&&se.push(Gs+Tl(oa,Xr,qo)+ga)}se=vu===Il?se.join(` Tj
T* `):se.join(` Tj
`),se+=` Tj
`;var Pn=`BT
/`;return Pn+=$e+" "+Si+` Tf
`,Pn+=J(Si*Es)+` TL
`,Pn+=hu+`
`,Pn+=ds,Pn+=se,Je(Pn+="ET"),w[$e]=!0,Wo};var Ct=x.__private__.clip=x.clip=function(se){return Je(se==="evenodd"?"W*":"W"),this};x.clipEvenOdd=function(){return Ct("evenodd")},x.__private__.discardPath=x.discardPath=function(){return Je("n"),this};var zt=x.__private__.isValidStyle=function(se){var Ue=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(se)!==-1&&(Ue=!0),Ue};x.__private__.setDefaultPathOperation=x.setDefaultPathOperation=function(se){return zt(se)&&(_=se),this};var Rt=x.__private__.getStyle=x.getStyle=function(se){var Ue=_;switch(se){case"D":case"S":Ue="S";break;case"F":Ue="f";break;case"FD":case"DF":Ue="B";break;case"f":case"f*":case"B":case"B*":Ue=se}return Ue},bi=x.close=function(){return Je("h"),this};x.stroke=function(){return Je("S"),this},x.fill=function(se){return yi("f",se),this},x.fillEvenOdd=function(se){return yi("f*",se),this},x.fillStroke=function(se){return yi("B",se),this},x.fillStrokeEvenOdd=function(se){return yi("B*",se),this};var yi=function(se,Ue){es(Ue)==="object"?ji(Ue,se):Je(se)},_i=function(se){se===null||V===O.ADVANCED&&se===void 0||(se=Rt(se),Je(se))};function ui(se,Ue,At,Jt,hi){var qi=new F0(Ue||this.boundingBox,At||this.xStep,Jt||this.yStep,this.gState,hi||this.matrix);qi.stream=this.stream;var hn=se+"$$"+this.cloneIndex+++"$$";return xo(hn,qi),qi}var ji=function(se,Ue){var At=Hn[se.key],Jt=Ki[At];if(Jt instanceof Uf)Je("q"),Je(ln(Ue)),Jt.gState&&x.setGState(Jt.gState),Je(se.matrix.toString()+" cm"),Je("/"+At+" sh"),Je("Q");else if(Jt instanceof F0){var hi=new an(1,0,0,-1,0,ma());se.matrix&&(hi=hi.multiply(se.matrix||wo),At=ui.call(Jt,se.key,se.boundingBox,se.xStep,se.yStep,hi).id),Je("q"),Je("/Pattern cs"),Je("/"+At+" scn"),Jt.gState&&x.setGState(Jt.gState),Je(Ue),Je("Q")}},ln=function(se){switch(se){case"f":case"F":return"W n";case"f*":return"W* n";case"B":return"W S";case"B*":return"W* S";case"S":return"W S";case"n":return"W n"}},In=x.moveTo=function(se,Ue){return Je(J(Te(se))+" "+J(_e(Ue))+" m"),this},ft=x.lineTo=function(se,Ue){return Je(J(Te(se))+" "+J(_e(Ue))+" l"),this},p=x.curveTo=function(se,Ue,At,Jt,hi,qi){return Je([J(Te(se)),J(_e(Ue)),J(Te(At)),J(_e(Jt)),J(Te(hi)),J(_e(qi)),"c"].join(" ")),this};x.__private__.line=x.line=function(se,Ue,At,Jt,hi){if(isNaN(se)||isNaN(Ue)||isNaN(At)||isNaN(Jt)||!zt(hi))throw new Error("Invalid arguments passed to jsPDF.line");return V===O.COMPAT?this.lines([[At-se,Jt-Ue]],se,Ue,[1,1],hi||"S"):this.lines([[At-se,Jt-Ue]],se,Ue,[1,1]).stroke()},x.__private__.lines=x.lines=function(se,Ue,At,Jt,hi,qi){var hn,Zn,Ar,Nr,Wr,eo,Bo,qo,Wo,Cs,ds,jr;if(typeof se=="number"&&(jr=At,At=Ue,Ue=se,se=jr),Jt=Jt||[1,1],qi=qi||!1,isNaN(Ue)||isNaN(At)||!Array.isArray(se)||!Array.isArray(Jt)||!zt(hi)||typeof qi!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(In(Ue,At),hn=Jt[0],Zn=Jt[1],Nr=se.length,Cs=Ue,ds=At,Ar=0;Ar<Nr;Ar++)(Wr=se[Ar]).length===2?(Cs=Wr[0]*hn+Cs,ds=Wr[1]*Zn+ds,ft(Cs,ds)):(eo=Wr[0]*hn+Cs,Bo=Wr[1]*Zn+ds,qo=Wr[2]*hn+Cs,Wo=Wr[3]*Zn+ds,Cs=Wr[4]*hn+Cs,ds=Wr[5]*Zn+ds,p(eo,Bo,qo,Wo,Cs,ds));return qi&&bi(),_i(hi),this},x.path=function(se){for(var Ue=0;Ue<se.length;Ue++){var At=se[Ue],Jt=At.c;switch(At.op){case"m":In(Jt[0],Jt[1]);break;case"l":ft(Jt[0],Jt[1]);break;case"c":p.apply(this,Jt);break;case"h":bi()}}return this},x.__private__.rect=x.rect=function(se,Ue,At,Jt,hi){if(isNaN(se)||isNaN(Ue)||isNaN(At)||isNaN(Jt)||!zt(hi))throw new Error("Invalid arguments passed to jsPDF.rect");return V===O.COMPAT&&(Jt=-Jt),Je([J(Te(se)),J(_e(Ue)),J(Te(At)),J(Te(Jt)),"re"].join(" ")),_i(hi),this},x.__private__.triangle=x.triangle=function(se,Ue,At,Jt,hi,qi,hn){if(isNaN(se)||isNaN(Ue)||isNaN(At)||isNaN(Jt)||isNaN(hi)||isNaN(qi)||!zt(hn))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[At-se,Jt-Ue],[hi-At,qi-Jt],[se-hi,Ue-qi]],se,Ue,[1,1],hn,!0),this},x.__private__.roundedRect=x.roundedRect=function(se,Ue,At,Jt,hi,qi,hn){if(isNaN(se)||isNaN(Ue)||isNaN(At)||isNaN(Jt)||isNaN(hi)||isNaN(qi)||!zt(hn))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var Zn=4/3*(Math.SQRT2-1);return hi=Math.min(hi,.5*At),qi=Math.min(qi,.5*Jt),this.lines([[At-2*hi,0],[hi*Zn,0,hi,qi-qi*Zn,hi,qi],[0,Jt-2*qi],[0,qi*Zn,-hi*Zn,qi,-hi,qi],[2*hi-At,0],[-hi*Zn,0,-hi,-qi*Zn,-hi,-qi],[0,2*qi-Jt],[0,-qi*Zn,hi*Zn,-qi,hi,-qi]],se+hi,Ue,[1,1],hn,!0),this},x.__private__.ellipse=x.ellipse=function(se,Ue,At,Jt,hi){if(isNaN(se)||isNaN(Ue)||isNaN(At)||isNaN(Jt)||!zt(hi))throw new Error("Invalid arguments passed to jsPDF.ellipse");var qi=4/3*(Math.SQRT2-1)*At,hn=4/3*(Math.SQRT2-1)*Jt;return In(se+At,Ue),p(se+At,Ue-hn,se+qi,Ue-Jt,se,Ue-Jt),p(se-qi,Ue-Jt,se-At,Ue-hn,se-At,Ue),p(se-At,Ue+hn,se-qi,Ue+Jt,se,Ue+Jt),p(se+qi,Ue+Jt,se+At,Ue+hn,se+At,Ue),_i(hi),this},x.__private__.circle=x.circle=function(se,Ue,At,Jt){if(isNaN(se)||isNaN(Ue)||isNaN(At)||!zt(Jt))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(se,Ue,At,At,Jt)},x.setFont=function(se,Ue,At){return At&&(Ue=te(Ue,At)),$e=qs(se,Ue,{disableWarning:!1}),this};var Di=x.__private__.getFont=x.getFont=function(){return Ln[qs.apply(x,arguments)]};x.__private__.getFontList=x.getFontList=function(){var se,Ue,At={};for(se in fn)if(fn.hasOwnProperty(se))for(Ue in At[se]=[],fn[se])fn[se].hasOwnProperty(Ue)&&At[se].push(Ue);return At},x.addFont=function(se,Ue,At,Jt,hi){var qi=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&qi.indexOf(arguments[3])!==-1?hi=arguments[3]:arguments[3]&&qi.indexOf(arguments[3])==-1&&(At=te(At,Jt)),hi=hi||"Identity-H",zr.call(this,se,Ue,At,hi)};var c,F=i.lineWidth||.200025,mn=x.__private__.getLineWidth=x.getLineWidth=function(){return F},$n=x.__private__.setLineWidth=x.setLineWidth=function(se){return F=se,Je(J(Te(se))+" w"),this};x.__private__.setLineDash=Ur.API.setLineDash=Ur.API.setLineDashPattern=function(se,Ue){if(se=se||[],Ue=Ue||0,isNaN(Ue)||!Array.isArray(se))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return se=se.map(function(At){return J(Te(At))}).join(" "),Ue=J(Te(Ue)),Je("["+se+"] "+Ue+" d"),this};var Ao=x.__private__.getLineHeight=x.getLineHeight=function(){return Si*c};x.__private__.getLineHeight=x.getLineHeight=function(){return Si*c};var re=x.__private__.setLineHeightFactor=x.setLineHeightFactor=function(se){return typeof(se=se||1.15)=="number"&&(c=se),this},Rr=x.__private__.getLineHeightFactor=x.getLineHeightFactor=function(){return c};re(i.lineHeight);var da=x.__private__.getHorizontalCoordinate=function(se){return Te(se)},Na=x.__private__.getVerticalCoordinate=function(se){return V===O.ADVANCED?se:gn[Se].mediaBox.topRightY-gn[Se].mediaBox.bottomLeftY-Te(se)},Mc=x.__private__.getHorizontalCoordinateString=x.getHorizontalCoordinateString=function(se){return J(da(se))},Al=x.__private__.getVerticalCoordinateString=x.getVerticalCoordinateString=function(se){return J(Na(se))},Hs=i.strokeColor||"0 G";x.__private__.getStrokeColor=x.getDrawColor=function(){return Bt(Hs)},x.__private__.setStrokeColor=x.setDrawColor=function(se,Ue,At,Jt){return Hs=Ge({ch1:se,ch2:Ue,ch3:At,ch4:Jt,pdfColorType:"draw",precision:2}),Je(Hs),this};var sc=i.fillColor||"0 g";x.__private__.getFillColor=x.getFillColor=function(){return Bt(sc)},x.__private__.setFillColor=x.setFillColor=function(se,Ue,At,Jt){return sc=Ge({ch1:se,ch2:Ue,ch3:At,ch4:Jt,pdfColorType:"fill",precision:2}),Je(sc),this};var hu=i.textColor||"0 g",ah=x.__private__.getTextColor=x.getTextColor=function(){return Bt(hu)};x.__private__.setTextColor=x.setTextColor=function(se,Ue,At,Jt){return hu=Ge({ch1:se,ch2:Ue,ch3:At,ch4:Jt,pdfColorType:"text",precision:3}),this};var fu=i.charSpace,lh=x.__private__.getCharSpace=x.getCharSpace=function(){return parseFloat(fu||0)};x.__private__.setCharSpace=x.setCharSpace=function(se){if(isNaN(se))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return fu=se,this};var Ru=0;x.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},x.__private__.setLineCap=x.setLineCap=function(se){var Ue=x.CapJoinStyles[se];if(Ue===void 0)throw new Error("Line cap style of '"+se+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Ru=Ue,Je(Ue+" J"),this};var du=0;x.__private__.setLineJoin=x.setLineJoin=function(se){var Ue=x.CapJoinStyles[se];if(Ue===void 0)throw new Error("Line join style of '"+se+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return du=Ue,Je(Ue+" j"),this},x.__private__.setLineMiterLimit=x.__private__.setMiterLimit=x.setLineMiterLimit=x.setMiterLimit=function(se){if(se=se||0,isNaN(se))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return Je(J(Te(se))+" M"),this},x.GState=p1,x.setGState=function(se){(se=typeof se=="string"?Gn[Zr[se]]:pu(null,se)).equals(zn)||(Je("/"+se.id+" gs"),zn=se)};var pu=function(se,Ue){if(!se||!Zr[se]){var At=!1;for(var Jt in Gn)if(Gn.hasOwnProperty(Jt)&&Gn[Jt].equals(Ue)){At=!0;break}if(At)Ue=Gn[Jt];else{var hi="GS"+(Object.keys(Gn).length+1).toString(10);Gn[hi]=Ue,Ue.id=hi}return se&&(Zr[se]=Ue.id),on.publish("addGState",Ue),Ue}};x.addGState=function(se,Ue){return pu(se,Ue),this},x.saveGraphicsState=function(){return Je("q"),Bi.push({key:$e,size:Si,color:hu}),this},x.restoreGraphicsState=function(){Je("Q");var se=Bi.pop();return $e=se.key,Si=se.size,hu=se.color,zn=null,this},x.setCurrentTransformationMatrix=function(se){return Je(se.toString()+" cm"),this},x.comment=function(se){return Je("#"+se),this};var ql=function(se,Ue){var At=se||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return At},set:function(qi){isNaN(qi)||(At=parseFloat(qi))}});var Jt=Ue||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return Jt},set:function(qi){isNaN(qi)||(Jt=parseFloat(qi))}});var hi="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return hi},set:function(qi){hi=qi.toString()}}),this},mu=function(se,Ue,At,Jt){ql.call(this,se,Ue),this.type="rect";var hi=At||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return hi},set:function(hn){isNaN(hn)||(hi=parseFloat(hn))}});var qi=Jt||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return qi},set:function(hn){isNaN(hn)||(qi=parseFloat(hn))}}),this},Nn=function(){this.page=dn,this.currentPage=Se,this.pages=Mt.slice(0),this.pagesContext=gn.slice(0),this.x=Kt,this.y=di,this.matrix=wn,this.width=pa(Se),this.height=ma(Se),this.outputDestination=ut,this.id="",this.objectNumber=-1};Nn.prototype.restore=function(){dn=this.page,Se=this.currentPage,gn=this.pagesContext,Mt=this.pages,Kt=this.x,di=this.y,wn=this.matrix,Hl(Se,this.width),ko(Se,this.height),ut=this.outputDestination};var Fn=function(se,Ue,At,Jt,hi){Kr.push(new Nn),dn=Se=0,Mt=[],Kt=se,di=Ue,wn=hi,Vs([At,Jt])},Bu=function(se){if(gr[se])Kr.pop().restore();else{var Ue=new Nn,At="Xo"+(Object.keys(Wn).length+1).toString(10);Ue.id=At,gr[se]=At,Wn[At]=Ue,on.publish("addFormObject",Ue),Kr.pop().restore()}};for(var ja in x.beginFormObject=function(se,Ue,At,Jt,hi){return Fn(se,Ue,At,Jt,hi),this},x.endFormObject=function(se){return Bu(se),this},x.doFormObject=function(se,Ue){var At=Wn[gr[se]];return Je("q"),Je(Ue.toString()+" cm"),Je("/"+At.id+" Do"),Je("Q"),this},x.getFormObject=function(se){var Ue=Wn[gr[se]];return{x:Ue.x,y:Ue.y,width:Ue.width,height:Ue.height,matrix:Ue.matrix}},x.save=function(se,Ue){return se=se||"generated.pdf",(Ue=Ue||{}).returnPromise=Ue.returnPromise||!1,Ue.returnPromise===!1?(jf(fa(ha()),se),typeof jf.unload=="function"&&Vr.setTimeout&&setTimeout(jf.unload,911),this):new Promise(function(At,Jt){try{var hi=jf(fa(ha()),se);typeof jf.unload=="function"&&Vr.setTimeout&&setTimeout(jf.unload,911),At(hi)}catch(qi){Jt(qi.message)}})},Ur.API)Ur.API.hasOwnProperty(ja)&&(ja==="events"&&Ur.API.events.length?function(se,Ue){var At,Jt,hi;for(hi=Ue.length-1;hi!==-1;hi--)At=Ue[hi][0],Jt=Ue[hi][1],se.subscribe.apply(se,[At].concat(typeof Jt=="function"?[Jt]:Jt))}(on,Ur.API.events):x[ja]=Ur.API[ja]);var pa=x.getPageWidth=function(se){return(gn[se=se||Se].mediaBox.topRightX-gn[se].mediaBox.bottomLeftX)/_t},Hl=x.setPageWidth=function(se,Ue){gn[se].mediaBox.topRightX=Ue*_t+gn[se].mediaBox.bottomLeftX},ma=x.getPageHeight=function(se){return(gn[se=se||Se].mediaBox.topRightY-gn[se].mediaBox.bottomLeftY)/_t},ko=x.setPageHeight=function(se,Ue){gn[se].mediaBox.topRightY=Ue*_t+gn[se].mediaBox.bottomLeftY};return x.internal={pdfEscape:ts,getStyle:Rt,getFont:Di,getFontSize:Xt,getCharSpace:lh,getTextColor:ah,getLineHeight:Ao,getLineHeightFactor:Rr,getLineWidth:mn,write:ei,getHorizontalCoordinate:da,getVerticalCoordinate:Na,getCoordinateString:Mc,getVerticalCoordinateString:Al,collections:{},newObject:co,newAdditionalObject:qe,newObjectDeferred:Le,newObjectDeferredBegin:Ie,getFilters:Yt,putStream:Ft,events:on,scaleFactor:_t,pageSize:{getWidth:function(){return pa(Se)},setWidth:function(se){Hl(Se,se)},getHeight:function(){return ma(Se)},setHeight:function(se){ko(Se,se)}},encryptionOptions:b,encryption:U,getEncryptor:$,output:Io,getNumberOfPages:Zs,pages:Mt,out:Je,f2:Pe,f3:de,getPageInfo:ge,getPageInfoByObjId:Oe,getCurrentPageInfo:nt,getPDFVersion:T,Point:ql,Rectangle:mu,Matrix:an,hasHotfix:il},Object.defineProperty(x.internal.pageSize,"width",{get:function(){return pa(Se)},set:function(se){Hl(Se,se)},enumerable:!0,configurable:!0}),Object.defineProperty(x.internal.pageSize,"height",{get:function(){return ma(Se)},set:function(se){ko(Se,se)},enumerable:!0,configurable:!0}),Zo.call(x,Qt),$e="F1",_s(l,t),on.publish("initialized"),x}L0.prototype.lsbFirstWord=function(i){return String.fromCharCode(i>>0&255,i>>8&255,i>>16&255,i>>24&255)},L0.prototype.toHexString=function(i){return i.split("").map(function(e){return("0"+(255&e.charCodeAt(0)).toString(16)).slice(-2)}).join("")},L0.prototype.hexToBytes=function(i){for(var e=[],t=0;t<i.length;t+=2)e.push(String.fromCharCode(parseInt(i.substr(t,2),16)));return e.join("")},L0.prototype.processOwnerPassword=function(i,e){return z2(B2(e).substr(0,5),i)},L0.prototype.encryptor=function(i,e){var t=B2(this.encryptionKey+String.fromCharCode(255&i,i>>8&255,i>>16&255,255&e,e>>8&255)).substr(0,10);return function(o){return z2(t,o)}},p1.prototype.equals=function(i){var e,t="id,objectNumber,equals";if(!i||es(i)!==es(this))return!1;var o=0;for(e in this)if(!(t.indexOf(e)>=0)){if(this.hasOwnProperty(e)&&!i.hasOwnProperty(e)||this[e]!==i[e])return!1;o++}for(e in i)i.hasOwnProperty(e)&&t.indexOf(e)<0&&o--;return o===0},Ur.API={events:[]},Ur.version="2.5.1";var Ys=Ur.API,pg=1,e0=function(i){return i.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},v0=function(i){return i.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},$r=function(i){return i.toFixed(2)},Jh=function(i){return i.toFixed(5)};Ys.__acroform__={};var au=function(i,e){i.prototype=Object.create(e.prototype),i.prototype.constructor=i},s_=function(i){return i*pg},Xc=function(i){var e=new A4,t=pr.internal.getHeight(i)||0,o=pr.internal.getWidth(i)||0;return e.BBox=[0,0,Number($r(o)),Number($r(t))],e},r8=Ys.__acroform__.setBit=function(i,e){if(i=i||0,e=e||0,isNaN(i)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return i|=1<<e},o8=Ys.__acroform__.clearBit=function(i,e){if(i=i||0,e=e||0,isNaN(i)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return i&=~(1<<e)},s8=Ys.__acroform__.getBit=function(i,e){if(isNaN(i)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return(i&1<<e)==0?0:1},ta=Ys.__acroform__.getBitForPdf=function(i,e){if(isNaN(i)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return s8(i,e-1)},ia=Ys.__acroform__.setBitForPdf=function(i,e){if(isNaN(i)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return r8(i,e-1)},na=Ys.__acroform__.clearBitForPdf=function(i,e){if(isNaN(i)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return o8(i,e-1)},a8=Ys.__acroform__.calculateCoordinates=function(i,e){var t=e.internal.getHorizontalCoordinate,o=e.internal.getVerticalCoordinate,l=i[0],u=i[1],m=i[2],r=i[3],f={};return f.lowerLeft_X=t(l)||0,f.lowerLeft_Y=o(u+r)||0,f.upperRight_X=t(l+m)||0,f.upperRight_Y=o(u)||0,[Number($r(f.lowerLeft_X)),Number($r(f.lowerLeft_Y)),Number($r(f.upperRight_X)),Number($r(f.upperRight_Y))]},l8=function(i){if(i.appearanceStreamContent)return i.appearanceStreamContent;if(i.V||i.DV){var e=[],t=i._V||i.DV,o=N2(i,t),l=i.scope.internal.getFont(i.fontName,i.fontStyle).id;e.push("/Tx BMC"),e.push("q"),e.push("BT"),e.push(i.scope.__private__.encodeColorString(i.color)),e.push("/"+l+" "+$r(o.fontSize)+" Tf"),e.push("1 0 0 1 0 0 Tm"),e.push(o.text),e.push("ET"),e.push("Q"),e.push("EMC");var u=Xc(i);return u.scope=i.scope,u.stream=e.join(`
`),u}},N2=function(i,e){var t=i.fontSize===0?i.maxFontSize:i.fontSize,o={text:"",fontSize:""},l=(e=(e=e.substr(0,1)=="("?e.substr(1):e).substr(e.length-1)==")"?e.substr(0,e.length-1):e).split(" ");l=i.multiline?l.map(function(de){return de.split(`
`)}):l.map(function(de){return[de]});var u=t,m=pr.internal.getHeight(i)||0;m=m<0?-m:m;var r=pr.internal.getWidth(i)||0;r=r<0?-r:r;var f=function(de,Te,ve){if(de+1<l.length){var _e=Te+" "+l[de+1][0];return Bp(_e,i,ve).width<=r-4}return!1};u++;e:for(;u>0;){e="",u--;var _,b,v=Bp("3",i,u).height,w=i.multiline?m-u:(m-v)/2,x=w+=2,C=0,T=0,S=0;if(u<=0){e=`(...) Tj
`,e+="% Width of Text: "+Bp(e,i,u=12).width+", FieldWidth:"+r+`
`;break}for(var M="",O=0,V=0;V<l.length;V++)if(l.hasOwnProperty(V)){var X=!1;if(l[V].length!==1&&S!==l[V].length-1){if((v+2)*(O+2)+2>m)continue e;M+=l[V][S],X=!0,T=V,V--}else{M=(M+=l[V][S]+" ").substr(M.length-1)==" "?M.substr(0,M.length-1):M;var Z=parseInt(V),te=f(Z,M,u),J=V>=l.length-1;if(te&&!J){M+=" ",S=0;continue}if(te||J){if(J)T=Z;else if(i.multiline&&(v+2)*(O+2)+2>m)continue e}else{if(!i.multiline||(v+2)*(O+2)+2>m)continue e;T=Z}}for(var ie="",Ee=C;Ee<=T;Ee++){var Pe=l[Ee];if(i.multiline){if(Ee===T){ie+=Pe[S]+" ",S=(S+1)%Pe.length;continue}if(Ee===C){ie+=Pe[Pe.length-1]+" ";continue}}ie+=Pe[0]+" "}switch(ie=ie.substr(ie.length-1)==" "?ie.substr(0,ie.length-1):ie,b=Bp(ie,i,u).width,i.textAlign){case"right":_=r-b-2;break;case"center":_=(r-b)/2;break;case"left":default:_=2}e+=$r(_)+" "+$r(x)+` Td
`,e+="("+e0(ie)+`) Tj
`,e+=-$r(_)+` 0 Td
`,x=-(u+2),b=0,C=X?T:T+1,O++,M=""}break}return o.text=e,o.fontSize=u,o},Bp=function(i,e,t){var o=e.scope.internal.getFont(e.fontName,e.fontStyle),l=e.scope.getStringUnitWidth(i,{font:o,fontSize:parseFloat(t),charSpace:0})*parseFloat(t);return{height:e.scope.getStringUnitWidth("3",{font:o,fontSize:parseFloat(t),charSpace:0})*parseFloat(t)*1.5,width:l}},u8={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},c8=function(i,e){var t={type:"reference",object:i};e.internal.getPageInfo(i.page).pageContext.annotations.find(function(o){return o.type===t.type&&o.object===t.object})===void 0&&e.internal.getPageInfo(i.page).pageContext.annotations.push(t)},h8=function(i,e){for(var t in i)if(i.hasOwnProperty(t)){var o=t,l=i[t];e.internal.newObjectDeferredBegin(l.objId,!0),es(l)==="object"&&typeof l.putStream=="function"&&l.putStream(),delete i[o]}},f8=function(i,e){if(e.scope=i,i.internal!==void 0&&(i.internal.acroformPlugin===void 0||i.internal.acroformPlugin.isInitialized===!1)){if(Tc.FieldNum=0,i.internal.acroformPlugin=JSON.parse(JSON.stringify(u8)),i.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");pg=i.internal.scaleFactor,i.internal.acroformPlugin.acroFormDictionaryRoot=new k4,i.internal.acroformPlugin.acroFormDictionaryRoot.scope=i,i.internal.acroformPlugin.acroFormDictionaryRoot._eventID=i.internal.events.subscribe("postPutResources",function(){(function(t){t.internal.events.unsubscribe(t.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete t.internal.acroformPlugin.acroFormDictionaryRoot._eventID,t.internal.acroformPlugin.printedOut=!0})(i)}),i.internal.events.subscribe("buildDocument",function(){(function(t){t.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var o=t.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var l in o)if(o.hasOwnProperty(l)){var u=o[l];u.objId=void 0,u.hasAnnotation&&c8(u,t)}})(i)}),i.internal.events.subscribe("putCatalog",function(){(function(t){if(t.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");t.internal.write("/AcroForm "+t.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(i)}),i.internal.events.subscribe("postPutPages",function(t){(function(o,l){var u=!o;for(var m in o||(l.internal.newObjectDeferredBegin(l.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),l.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),o=o||l.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(o.hasOwnProperty(m)){var r=o[m],f=[],_=r.Rect;if(r.Rect&&(r.Rect=a8(r.Rect,l)),l.internal.newObjectDeferredBegin(r.objId,!0),r.DA=pr.createDefaultAppearanceStream(r),es(r)==="object"&&typeof r.getKeyValueListForStream=="function"&&(f=r.getKeyValueListForStream()),r.Rect=_,r.hasAppearanceStream&&!r.appearanceStreamContent){var b=l8(r);f.push({key:"AP",value:"<</N "+b+">>"}),l.internal.acroformPlugin.xForms.push(b)}if(r.appearanceStreamContent){var v="";for(var w in r.appearanceStreamContent)if(r.appearanceStreamContent.hasOwnProperty(w)){var x=r.appearanceStreamContent[w];if(v+="/"+w+" ",v+="<<",Object.keys(x).length>=1||Array.isArray(x)){for(var m in x)if(x.hasOwnProperty(m)){var C=x[m];typeof C=="function"&&(C=C.call(l,r)),v+="/"+m+" "+C+" ",l.internal.acroformPlugin.xForms.indexOf(C)>=0||l.internal.acroformPlugin.xForms.push(C)}}else typeof(C=x)=="function"&&(C=C.call(l,r)),v+="/"+m+" "+C,l.internal.acroformPlugin.xForms.indexOf(C)>=0||l.internal.acroformPlugin.xForms.push(C);v+=">>"}f.push({key:"AP",value:`<<
`+v+">>"})}l.internal.putStream({additionalKeyValues:f,objectId:r.objId}),l.internal.out("endobj")}u&&h8(l.internal.acroformPlugin.xForms,l)})(t,i)}),i.internal.acroformPlugin.isInitialized=!0}},x4=Ys.__acroform__.arrayToPdfArray=function(i,e,t){var o=function(m){return m};if(Array.isArray(i)){for(var l="[",u=0;u<i.length;u++)switch(u!==0&&(l+=" "),es(i[u])){case"boolean":case"number":case"object":l+=i[u].toString();break;case"string":i[u].substr(0,1)!=="/"?(e!==void 0&&t&&(o=t.internal.getEncryptor(e)),l+="("+e0(o(i[u].toString()))+")"):l+=i[u].toString()}return l+="]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},Dm=function(i,e,t){var o=function(l){return l};return e!==void 0&&t&&(o=t.internal.getEncryptor(e)),(i=i||"").toString(),i="("+e0(o(i))+")"},eh=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(i){this._objId=i}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};eh.prototype.toString=function(){return this.objId+" 0 R"},eh.prototype.putStream=function(){var i=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:i,objectId:this.objId}),this.scope.internal.out("endobj")},eh.prototype.getKeyValueListForStream=function(){var i=[],e=Object.getOwnPropertyNames(this).filter(function(u){return u!="content"&&u!="appearanceStreamContent"&&u!="scope"&&u!="objId"&&u.substring(0,1)!="_"});for(var t in e)if(Object.getOwnPropertyDescriptor(this,e[t]).configurable===!1){var o=e[t],l=this[o];l&&(Array.isArray(l)?i.push({key:o,value:x4(l,this.objId,this.scope)}):l instanceof eh?(l.scope=this.scope,i.push({key:o,value:l.objId+" 0 R"})):typeof l!="function"&&i.push({key:o,value:l}))}return i};var A4=function(){eh.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var i,e=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(t){i=t.trim()},get:function(){return i||null}})};au(A4,eh);var k4=function(){eh.call(this);var i,e=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return e.length>0?e:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return e}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(i){var t=function(o){return o};return this.scope&&(t=this.scope.internal.getEncryptor(this.objId)),"("+e0(t(i))+")"}},set:function(t){i=t}})};au(k4,eh);var Tc=function i(){eh.call(this);var e=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return e},set:function(M){if(isNaN(M))throw new Error('Invalid value "'+M+'" for attribute F supplied.');e=M}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return Boolean(ta(e,3))},set:function(M){Boolean(M)===!0?this.F=ia(e,3):this.F=na(e,3)}});var t=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return t},set:function(M){if(isNaN(M))throw new Error('Invalid value "'+M+'" for attribute Ff supplied.');t=M}});var o=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(o.length!==0)return o},set:function(M){o=M!==void 0?M:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!o||isNaN(o[0])?0:o[0]},set:function(M){o[0]=M}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!o||isNaN(o[1])?0:o[1]},set:function(M){o[1]=M}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!o||isNaN(o[2])?0:o[2]},set:function(M){o[2]=M}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!o||isNaN(o[3])?0:o[3]},set:function(M){o[3]=M}});var l="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return l},set:function(M){switch(M){case"/Btn":case"/Tx":case"/Ch":case"/Sig":l=M;break;default:throw new Error('Invalid value "'+M+'" for attribute FT supplied.')}}});var u=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!u||u.length<1){if(this instanceof m1)return;u="FieldObject"+i.FieldNum++}var M=function(O){return O};return this.scope&&(M=this.scope.internal.getEncryptor(this.objId)),"("+e0(M(u))+")"},set:function(M){u=M.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return u},set:function(M){u=M}});var m="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return m},set:function(M){m=M}});var r="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return r},set:function(M){r=M}});var f=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return f},set:function(M){f=M}});var _=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return _===void 0?50/pg:_},set:function(M){_=M}});var b="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return b},set:function(M){b=M}});var v="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!v||this instanceof m1||this instanceof Wf))return Dm(v,this.objId,this.scope)},set:function(M){M=M.toString(),v=M}});var w=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(w)return this instanceof za?w:Dm(w,this.objId,this.scope)},set:function(M){M=M.toString(),w=this instanceof za?M:M.substr(0,1)==="("?v0(M.substr(1,M.length-2)):v0(M)}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof za?v0(w.substr(1,w.length-1)):w},set:function(M){M=M.toString(),w=this instanceof za?"/"+M:M}});var x=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(x)return x},set:function(M){this.V=M}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(x)return this instanceof za?x:Dm(x,this.objId,this.scope)},set:function(M){M=M.toString(),x=this instanceof za?M:M.substr(0,1)==="("?v0(M.substr(1,M.length-2)):v0(M)}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof za?v0(x.substr(1,x.length-1)):x},set:function(M){M=M.toString(),x=this instanceof za?"/"+M:M}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var C,T=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return T},set:function(M){M=Boolean(M),T=M}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(C)return C},set:function(M){C=M}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return Boolean(ta(this.Ff,1))},set:function(M){Boolean(M)===!0?this.Ff=ia(this.Ff,1):this.Ff=na(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return Boolean(ta(this.Ff,2))},set:function(M){Boolean(M)===!0?this.Ff=ia(this.Ff,2):this.Ff=na(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return Boolean(ta(this.Ff,3))},set:function(M){Boolean(M)===!0?this.Ff=ia(this.Ff,3):this.Ff=na(this.Ff,3)}});var S=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(S!==null)return S},set:function(M){if([0,1,2].indexOf(M)===-1)throw new Error('Invalid value "'+M+'" for attribute Q supplied.');S=M}}),Object.defineProperty(this,"textAlign",{get:function(){var M;switch(S){case 0:default:M="left";break;case 1:M="center";break;case 2:M="right"}return M},configurable:!0,enumerable:!0,set:function(M){switch(M){case"right":case 2:S=2;break;case"center":case 1:S=1;break;case"left":case 0:default:S=0}}})};au(Tc,eh);var U0=function(){Tc.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var i=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return i},set:function(t){i=t}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return i},set:function(t){i=t}});var e=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return x4(e,this.objId,this.scope)},set:function(t){var o,l;l=[],typeof(o=t)=="string"&&(l=function(u,m,r){r||(r=1);for(var f,_=[];f=m.exec(u);)_.push(f[r]);return _}(o,/\((.*?)\)/g)),e=l}}),this.getOptions=function(){return e},this.setOptions=function(t){e=t,this.sort&&e.sort()},this.addOption=function(t){t=(t=t||"").toString(),e.push(t),this.sort&&e.sort()},this.removeOption=function(t,o){for(o=o||!1,t=(t=t||"").toString();e.indexOf(t)!==-1&&(e.splice(e.indexOf(t),1),o!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return Boolean(ta(this.Ff,18))},set:function(t){Boolean(t)===!0?this.Ff=ia(this.Ff,18):this.Ff=na(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return Boolean(ta(this.Ff,19))},set:function(t){this.combo===!0&&(Boolean(t)===!0?this.Ff=ia(this.Ff,19):this.Ff=na(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return Boolean(ta(this.Ff,20))},set:function(t){Boolean(t)===!0?(this.Ff=ia(this.Ff,20),e.sort()):this.Ff=na(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return Boolean(ta(this.Ff,22))},set:function(t){Boolean(t)===!0?this.Ff=ia(this.Ff,22):this.Ff=na(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return Boolean(ta(this.Ff,23))},set:function(t){Boolean(t)===!0?this.Ff=ia(this.Ff,23):this.Ff=na(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return Boolean(ta(this.Ff,27))},set:function(t){Boolean(t)===!0?this.Ff=ia(this.Ff,27):this.Ff=na(this.Ff,27)}}),this.hasAppearanceStream=!1};au(U0,Tc);var V0=function(){U0.call(this),this.fontName="helvetica",this.combo=!1};au(V0,U0);var q0=function(){V0.call(this),this.combo=!0};au(q0,V0);var t1=function(){q0.call(this),this.edit=!0};au(t1,q0);var za=function(){Tc.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return Boolean(ta(this.Ff,15))},set:function(t){Boolean(t)===!0?this.Ff=ia(this.Ff,15):this.Ff=na(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return Boolean(ta(this.Ff,16))},set:function(t){Boolean(t)===!0?this.Ff=ia(this.Ff,16):this.Ff=na(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return Boolean(ta(this.Ff,17))},set:function(t){Boolean(t)===!0?this.Ff=ia(this.Ff,17):this.Ff=na(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return Boolean(ta(this.Ff,26))},set:function(t){Boolean(t)===!0?this.Ff=ia(this.Ff,26):this.Ff=na(this.Ff,26)}});var i,e={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var t=function(u){return u};if(this.scope&&(t=this.scope.internal.getEncryptor(this.objId)),Object.keys(e).length!==0){var o,l=[];for(o in l.push("<<"),e)l.push("/"+o+" ("+e0(t(e[o]))+")");return l.push(">>"),l.join(`
`)}},set:function(t){es(t)==="object"&&(e=t)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return e.CA||""},set:function(t){typeof t=="string"&&(e.CA=t)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return i},set:function(t){i=t}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return i.substr(1,i.length-1)},set:function(t){i="/"+t}})};au(za,Tc);var i1=function(){za.call(this),this.pushButton=!0};au(i1,za);var H0=function(){za.call(this),this.radio=!0,this.pushButton=!1;var i=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return i},set:function(e){i=e!==void 0?e:[]}})};au(H0,za);var m1=function(){var i,e;Tc.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return i},set:function(l){i=l}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return e},set:function(l){e=l}});var t,o={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var l=function(r){return r};this.scope&&(l=this.scope.internal.getEncryptor(this.objId));var u,m=[];for(u in m.push("<<"),o)m.push("/"+u+" ("+e0(l(o[u]))+")");return m.push(">>"),m.join(`
`)},set:function(l){es(l)==="object"&&(o=l)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return o.CA||""},set:function(l){typeof l=="string"&&(o.CA=l)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return t},set:function(l){t=l}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return t.substr(1,t.length-1)},set:function(l){t="/"+l}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=pr.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};au(m1,Tc),H0.prototype.setAppearance=function(i){if(!("createAppearanceStream"in i)||!("getCA"in i))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var e in this.Kids)if(this.Kids.hasOwnProperty(e)){var t=this.Kids[e];t.appearanceStreamContent=i.createAppearanceStream(t.optionName),t.caption=i.getCA()}},H0.prototype.createOption=function(i){var e=new m1;return e.Parent=this,e.optionName=i,this.Kids.push(e),d8.call(this.scope,e),e};var n1=function(){za.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=pr.CheckBox.createAppearanceStream()};au(n1,za);var Wf=function(){Tc.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return Boolean(ta(this.Ff,13))},set:function(e){Boolean(e)===!0?this.Ff=ia(this.Ff,13):this.Ff=na(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return Boolean(ta(this.Ff,21))},set:function(e){Boolean(e)===!0?this.Ff=ia(this.Ff,21):this.Ff=na(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return Boolean(ta(this.Ff,23))},set:function(e){Boolean(e)===!0?this.Ff=ia(this.Ff,23):this.Ff=na(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return Boolean(ta(this.Ff,24))},set:function(e){Boolean(e)===!0?this.Ff=ia(this.Ff,24):this.Ff=na(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return Boolean(ta(this.Ff,25))},set:function(e){Boolean(e)===!0?this.Ff=ia(this.Ff,25):this.Ff=na(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return Boolean(ta(this.Ff,26))},set:function(e){Boolean(e)===!0?this.Ff=ia(this.Ff,26):this.Ff=na(this.Ff,26)}});var i=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return i},set:function(e){i=e}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return i},set:function(e){Number.isInteger(e)&&(i=e)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};au(Wf,Tc);var r1=function(){Wf.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return Boolean(ta(this.Ff,14))},set:function(i){Boolean(i)===!0?this.Ff=ia(this.Ff,14):this.Ff=na(this.Ff,14)}}),this.password=!0};au(r1,Wf);var pr={CheckBox:{createAppearanceStream:function(){return{N:{On:pr.CheckBox.YesNormal},D:{On:pr.CheckBox.YesPushDown,Off:pr.CheckBox.OffPushDown}}},YesPushDown:function(i){var e=Xc(i);e.scope=i.scope;var t=[],o=i.scope.internal.getFont(i.fontName,i.fontStyle).id,l=i.scope.__private__.encodeColorString(i.color),u=N2(i,i.caption);return t.push("0.749023 g"),t.push("0 0 "+$r(pr.internal.getWidth(i))+" "+$r(pr.internal.getHeight(i))+" re"),t.push("f"),t.push("BMC"),t.push("q"),t.push("0 0 1 rg"),t.push("/"+o+" "+$r(u.fontSize)+" Tf "+l),t.push("BT"),t.push(u.text),t.push("ET"),t.push("Q"),t.push("EMC"),e.stream=t.join(`
`),e},YesNormal:function(i){var e=Xc(i);e.scope=i.scope;var t=i.scope.internal.getFont(i.fontName,i.fontStyle).id,o=i.scope.__private__.encodeColorString(i.color),l=[],u=pr.internal.getHeight(i),m=pr.internal.getWidth(i),r=N2(i,i.caption);return l.push("1 g"),l.push("0 0 "+$r(m)+" "+$r(u)+" re"),l.push("f"),l.push("q"),l.push("0 0 1 rg"),l.push("0 0 "+$r(m-1)+" "+$r(u-1)+" re"),l.push("W"),l.push("n"),l.push("0 g"),l.push("BT"),l.push("/"+t+" "+$r(r.fontSize)+" Tf "+o),l.push(r.text),l.push("ET"),l.push("Q"),e.stream=l.join(`
`),e},OffPushDown:function(i){var e=Xc(i);e.scope=i.scope;var t=[];return t.push("0.749023 g"),t.push("0 0 "+$r(pr.internal.getWidth(i))+" "+$r(pr.internal.getHeight(i))+" re"),t.push("f"),e.stream=t.join(`
`),e}},RadioButton:{Circle:{createAppearanceStream:function(i){var e={D:{Off:pr.RadioButton.Circle.OffPushDown},N:{}};return e.N[i]=pr.RadioButton.Circle.YesNormal,e.D[i]=pr.RadioButton.Circle.YesPushDown,e},getCA:function(){return"l"},YesNormal:function(i){var e=Xc(i);e.scope=i.scope;var t=[],o=pr.internal.getWidth(i)<=pr.internal.getHeight(i)?pr.internal.getWidth(i)/4:pr.internal.getHeight(i)/4;o=Number((.9*o).toFixed(5));var l=pr.internal.Bezier_C,u=Number((o*l).toFixed(5));return t.push("q"),t.push("1 0 0 1 "+Jh(pr.internal.getWidth(i)/2)+" "+Jh(pr.internal.getHeight(i)/2)+" cm"),t.push(o+" 0 m"),t.push(o+" "+u+" "+u+" "+o+" 0 "+o+" c"),t.push("-"+u+" "+o+" -"+o+" "+u+" -"+o+" 0 c"),t.push("-"+o+" -"+u+" -"+u+" -"+o+" 0 -"+o+" c"),t.push(u+" -"+o+" "+o+" -"+u+" "+o+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e},YesPushDown:function(i){var e=Xc(i);e.scope=i.scope;var t=[],o=pr.internal.getWidth(i)<=pr.internal.getHeight(i)?pr.internal.getWidth(i)/4:pr.internal.getHeight(i)/4;o=Number((.9*o).toFixed(5));var l=Number((2*o).toFixed(5)),u=Number((l*pr.internal.Bezier_C).toFixed(5)),m=Number((o*pr.internal.Bezier_C).toFixed(5));return t.push("0.749023 g"),t.push("q"),t.push("1 0 0 1 "+Jh(pr.internal.getWidth(i)/2)+" "+Jh(pr.internal.getHeight(i)/2)+" cm"),t.push(l+" 0 m"),t.push(l+" "+u+" "+u+" "+l+" 0 "+l+" c"),t.push("-"+u+" "+l+" -"+l+" "+u+" -"+l+" 0 c"),t.push("-"+l+" -"+u+" -"+u+" -"+l+" 0 -"+l+" c"),t.push(u+" -"+l+" "+l+" -"+u+" "+l+" 0 c"),t.push("f"),t.push("Q"),t.push("0 g"),t.push("q"),t.push("1 0 0 1 "+Jh(pr.internal.getWidth(i)/2)+" "+Jh(pr.internal.getHeight(i)/2)+" cm"),t.push(o+" 0 m"),t.push(o+" "+m+" "+m+" "+o+" 0 "+o+" c"),t.push("-"+m+" "+o+" -"+o+" "+m+" -"+o+" 0 c"),t.push("-"+o+" -"+m+" -"+m+" -"+o+" 0 -"+o+" c"),t.push(m+" -"+o+" "+o+" -"+m+" "+o+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e},OffPushDown:function(i){var e=Xc(i);e.scope=i.scope;var t=[],o=pr.internal.getWidth(i)<=pr.internal.getHeight(i)?pr.internal.getWidth(i)/4:pr.internal.getHeight(i)/4;o=Number((.9*o).toFixed(5));var l=Number((2*o).toFixed(5)),u=Number((l*pr.internal.Bezier_C).toFixed(5));return t.push("0.749023 g"),t.push("q"),t.push("1 0 0 1 "+Jh(pr.internal.getWidth(i)/2)+" "+Jh(pr.internal.getHeight(i)/2)+" cm"),t.push(l+" 0 m"),t.push(l+" "+u+" "+u+" "+l+" 0 "+l+" c"),t.push("-"+u+" "+l+" -"+l+" "+u+" -"+l+" 0 c"),t.push("-"+l+" -"+u+" -"+u+" -"+l+" 0 -"+l+" c"),t.push(u+" -"+l+" "+l+" -"+u+" "+l+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e}},Cross:{createAppearanceStream:function(i){var e={D:{Off:pr.RadioButton.Cross.OffPushDown},N:{}};return e.N[i]=pr.RadioButton.Cross.YesNormal,e.D[i]=pr.RadioButton.Cross.YesPushDown,e},getCA:function(){return"8"},YesNormal:function(i){var e=Xc(i);e.scope=i.scope;var t=[],o=pr.internal.calculateCross(i);return t.push("q"),t.push("1 1 "+$r(pr.internal.getWidth(i)-2)+" "+$r(pr.internal.getHeight(i)-2)+" re"),t.push("W"),t.push("n"),t.push($r(o.x1.x)+" "+$r(o.x1.y)+" m"),t.push($r(o.x2.x)+" "+$r(o.x2.y)+" l"),t.push($r(o.x4.x)+" "+$r(o.x4.y)+" m"),t.push($r(o.x3.x)+" "+$r(o.x3.y)+" l"),t.push("s"),t.push("Q"),e.stream=t.join(`
`),e},YesPushDown:function(i){var e=Xc(i);e.scope=i.scope;var t=pr.internal.calculateCross(i),o=[];return o.push("0.749023 g"),o.push("0 0 "+$r(pr.internal.getWidth(i))+" "+$r(pr.internal.getHeight(i))+" re"),o.push("f"),o.push("q"),o.push("1 1 "+$r(pr.internal.getWidth(i)-2)+" "+$r(pr.internal.getHeight(i)-2)+" re"),o.push("W"),o.push("n"),o.push($r(t.x1.x)+" "+$r(t.x1.y)+" m"),o.push($r(t.x2.x)+" "+$r(t.x2.y)+" l"),o.push($r(t.x4.x)+" "+$r(t.x4.y)+" m"),o.push($r(t.x3.x)+" "+$r(t.x3.y)+" l"),o.push("s"),o.push("Q"),e.stream=o.join(`
`),e},OffPushDown:function(i){var e=Xc(i);e.scope=i.scope;var t=[];return t.push("0.749023 g"),t.push("0 0 "+$r(pr.internal.getWidth(i))+" "+$r(pr.internal.getHeight(i))+" re"),t.push("f"),e.stream=t.join(`
`),e}}},createDefaultAppearanceStream:function(i){var e=i.scope.internal.getFont(i.fontName,i.fontStyle).id,t=i.scope.__private__.encodeColorString(i.color);return"/"+e+" "+i.fontSize+" Tf "+t}};pr.internal={Bezier_C:.551915024494,calculateCross:function(i){var e=pr.internal.getWidth(i),t=pr.internal.getHeight(i),o=Math.min(e,t);return{x1:{x:(e-o)/2,y:(t-o)/2+o},x2:{x:(e-o)/2+o,y:(t-o)/2},x3:{x:(e-o)/2,y:(t-o)/2},x4:{x:(e-o)/2+o,y:(t-o)/2+o}}}},pr.internal.getWidth=function(i){var e=0;return es(i)==="object"&&(e=s_(i.Rect[2])),e},pr.internal.getHeight=function(i){var e=0;return es(i)==="object"&&(e=s_(i.Rect[3])),e};var d8=Ys.addField=function(i){if(f8(this,i),!(i instanceof Tc))throw new Error("Invalid argument passed to jsPDF.addField.");var e;return(e=i).scope.internal.acroformPlugin.printedOut&&(e.scope.internal.acroformPlugin.printedOut=!1,e.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),e.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(e),i.page=i.scope.internal.getCurrentPageInfo().pageNumber,this};Ys.AcroFormChoiceField=U0,Ys.AcroFormListBox=V0,Ys.AcroFormComboBox=q0,Ys.AcroFormEditBox=t1,Ys.AcroFormButton=za,Ys.AcroFormPushButton=i1,Ys.AcroFormRadioButton=H0,Ys.AcroFormCheckBox=n1,Ys.AcroFormTextField=Wf,Ys.AcroFormPasswordField=r1,Ys.AcroFormAppearance=pr,Ys.AcroForm={ChoiceField:U0,ListBox:V0,ComboBox:q0,EditBox:t1,Button:za,PushButton:i1,RadioButton:H0,CheckBox:n1,TextField:Wf,PasswordField:r1,Appearance:pr},Ur.AcroForm={ChoiceField:U0,ListBox:V0,ComboBox:q0,EditBox:t1,Button:za,PushButton:i1,RadioButton:H0,CheckBox:n1,TextField:Wf,PasswordField:r1,Appearance:pr};Ur.AcroForm;function S4(i){return i.reduce(function(e,t,o){return e[t]=o,e},{})}(function(i){i.__addimage__={};var e="UNKNOWN",t={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},o=i.__addimage__.getImageFileTypeByImageData=function(de,Te){var ve,_e,ot,it,It,Xe=e;if((Te=Te||e)==="RGBA"||de.data!==void 0&&de.data instanceof Uint8ClampedArray&&"height"in de&&"width"in de)return"RGBA";if(te(de))for(It in t)for(ot=t[It],ve=0;ve<ot.length;ve+=1){for(it=!0,_e=0;_e<ot[ve].length;_e+=1)if(ot[ve][_e]!==void 0&&ot[ve][_e]!==de[_e]){it=!1;break}if(it===!0){Xe=It;break}}else for(It in t)for(ot=t[It],ve=0;ve<ot.length;ve+=1){for(it=!0,_e=0;_e<ot[ve].length;_e+=1)if(ot[ve][_e]!==void 0&&ot[ve][_e]!==de.charCodeAt(_e)){it=!1;break}if(it===!0){Xe=It;break}}return Xe===e&&Te!==e&&(Xe=Te),Xe},l=function de(Te){for(var ve=this.internal.write,_e=this.internal.putStream,ot=(0,this.internal.getFilters)();ot.indexOf("FlateEncode")!==-1;)ot.splice(ot.indexOf("FlateEncode"),1);Te.objectId=this.internal.newObject();var it=[];if(it.push({key:"Type",value:"/XObject"}),it.push({key:"Subtype",value:"/Image"}),it.push({key:"Width",value:Te.width}),it.push({key:"Height",value:Te.height}),Te.colorSpace===S.INDEXED?it.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(Te.palette.length/3-1)+" "+("sMask"in Te&&Te.sMask!==void 0?Te.objectId+2:Te.objectId+1)+" 0 R]"}):(it.push({key:"ColorSpace",value:"/"+Te.colorSpace}),Te.colorSpace===S.DEVICE_CMYK&&it.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),it.push({key:"BitsPerComponent",value:Te.bitsPerComponent}),"decodeParameters"in Te&&Te.decodeParameters!==void 0&&it.push({key:"DecodeParms",value:"<<"+Te.decodeParameters+">>"}),"transparency"in Te&&Array.isArray(Te.transparency)){for(var It="",Xe=0,we=Te.transparency.length;Xe<we;Xe++)It+=Te.transparency[Xe]+" "+Te.transparency[Xe]+" ";it.push({key:"Mask",value:"["+It+"]"})}Te.sMask!==void 0&&it.push({key:"SMask",value:Te.objectId+1+" 0 R"});var Ce=Te.filter!==void 0?["/"+Te.filter]:void 0;if(_e({data:Te.data,additionalKeyValues:it,alreadyAppliedFilters:Ce,objectId:Te.objectId}),ve("endobj"),"sMask"in Te&&Te.sMask!==void 0){var Re="/Predictor "+Te.predictor+" /Colors 1 /BitsPerComponent "+Te.bitsPerComponent+" /Columns "+Te.width,le={width:Te.width,height:Te.height,colorSpace:"DeviceGray",bitsPerComponent:Te.bitsPerComponent,decodeParameters:Re,data:Te.sMask};"filter"in Te&&(le.filter=Te.filter),de.call(this,le)}if(Te.colorSpace===S.INDEXED){var Se=this.internal.newObject();_e({data:ie(new Uint8Array(Te.palette)),objectId:Se}),ve("endobj")}},u=function(){var de=this.internal.collections.addImage_images;for(var Te in de)l.call(this,de[Te])},m=function(){var de,Te=this.internal.collections.addImage_images,ve=this.internal.write;for(var _e in Te)ve("/I"+(de=Te[_e]).index,de.objectId,"0","R")},r=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",u),this.internal.events.subscribe("putXobjectDict",m))},f=function(){var de=this.internal.collections.addImage_images;return r.call(this),de},_=function(){return Object.keys(this.internal.collections.addImage_images).length},b=function(de){return typeof i["process"+de.toUpperCase()]=="function"},v=function(de){return es(de)==="object"&&de.nodeType===1},w=function(de,Te){if(de.nodeName==="IMG"&&de.hasAttribute("src")){var ve=""+de.getAttribute("src");if(ve.indexOf("data:image/")===0)return Dd(unescape(ve).split("base64,").pop());var _e=i.loadFile(ve,!0);if(_e!==void 0)return _e}if(de.nodeName==="CANVAS"){if(de.width===0||de.height===0)throw new Error("Given canvas must have data. Canvas width: "+de.width+", height: "+de.height);var ot;switch(Te){case"PNG":ot="image/png";break;case"WEBP":ot="image/webp";break;case"JPEG":case"JPG":default:ot="image/jpeg"}return Dd(de.toDataURL(ot,1).split("base64,").pop())}},x=function(de){var Te=this.internal.collections.addImage_images;if(Te){for(var ve in Te)if(de===Te[ve].alias)return Te[ve]}},C=function(de,Te,ve){return de||Te||(de=-96,Te=-96),de<0&&(de=-1*ve.width*72/de/this.internal.scaleFactor),Te<0&&(Te=-1*ve.height*72/Te/this.internal.scaleFactor),de===0&&(de=Te*ve.width/ve.height),Te===0&&(Te=de*ve.height/ve.width),[de,Te]},T=function(de,Te,ve,_e,ot,it){var It=C.call(this,ve,_e,ot),Xe=this.internal.getCoordinateString,we=this.internal.getVerticalCoordinateString,Ce=f.call(this);if(ve=It[0],_e=It[1],Ce[ot.index]=ot,it){it*=Math.PI/180;var Re=Math.cos(it),le=Math.sin(it),Se=function(me){return me.toFixed(4)},he=[Se(Re),Se(le),Se(-1*le),Se(Re),0,0,"cm"]}this.internal.write("q"),it?(this.internal.write([1,"0","0",1,Xe(de),we(Te+_e),"cm"].join(" ")),this.internal.write(he.join(" ")),this.internal.write([Xe(ve),"0","0",Xe(_e),"0","0","cm"].join(" "))):this.internal.write([Xe(ve),"0","0",Xe(_e),Xe(de),we(Te+_e),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+ot.index+" Do"),this.internal.write("Q")},S=i.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};i.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var M=i.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},O=i.__addimage__.sHashCode=function(de){var Te,ve,_e=0;if(typeof de=="string")for(ve=de.length,Te=0;Te<ve;Te++)_e=(_e<<5)-_e+de.charCodeAt(Te),_e|=0;else if(te(de))for(ve=de.byteLength/2,Te=0;Te<ve;Te++)_e=(_e<<5)-_e+de[Te],_e|=0;return _e},V=i.__addimage__.validateStringAsBase64=function(de){(de=de||"").toString().trim();var Te=!0;return de.length===0&&(Te=!1),de.length%4!=0&&(Te=!1),/^[A-Za-z0-9+/]+$/.test(de.substr(0,de.length-2))===!1&&(Te=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(de.substr(-2))===!1&&(Te=!1),Te},X=i.__addimage__.extractImageFromDataUrl=function(de){var Te=(de=de||"").split("base64,"),ve=null;if(Te.length===2){var _e=/^data:(\w*\/\w*);*(charset=(?!charset=)[\w=-]*)*;*$/.exec(Te[0]);Array.isArray(_e)&&(ve={mimeType:_e[1],charset:_e[2],data:Te[1]})}return ve},Z=i.__addimage__.supportsArrayBuffer=function(){return typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"};i.__addimage__.isArrayBuffer=function(de){return Z()&&de instanceof ArrayBuffer};var te=i.__addimage__.isArrayBufferView=function(de){return Z()&&typeof Uint32Array<"u"&&(de instanceof Int8Array||de instanceof Uint8Array||typeof Uint8ClampedArray<"u"&&de instanceof Uint8ClampedArray||de instanceof Int16Array||de instanceof Uint16Array||de instanceof Int32Array||de instanceof Uint32Array||de instanceof Float32Array||de instanceof Float64Array)},J=i.__addimage__.binaryStringToUint8Array=function(de){for(var Te=de.length,ve=new Uint8Array(Te),_e=0;_e<Te;_e++)ve[_e]=de.charCodeAt(_e);return ve},ie=i.__addimage__.arrayBufferToBinaryString=function(de){for(var Te="",ve=te(de)?de:new Uint8Array(de),_e=0;_e<ve.length;_e+=8192)Te+=String.fromCharCode.apply(null,ve.subarray(_e,_e+8192));return Te};i.addImage=function(){var de,Te,ve,_e,ot,it,It,Xe,we;if(typeof arguments[1]=="number"?(Te=e,ve=arguments[1],_e=arguments[2],ot=arguments[3],it=arguments[4],It=arguments[5],Xe=arguments[6],we=arguments[7]):(Te=arguments[1],ve=arguments[2],_e=arguments[3],ot=arguments[4],it=arguments[5],It=arguments[6],Xe=arguments[7],we=arguments[8]),es(de=arguments[0])==="object"&&!v(de)&&"imageData"in de){var Ce=de;de=Ce.imageData,Te=Ce.format||Te||e,ve=Ce.x||ve||0,_e=Ce.y||_e||0,ot=Ce.w||Ce.width||ot,it=Ce.h||Ce.height||it,It=Ce.alias||It,Xe=Ce.compression||Xe,we=Ce.rotation||Ce.angle||we}var Re=this.internal.getFilters();if(Xe===void 0&&Re.indexOf("FlateEncode")!==-1&&(Xe="SLOW"),isNaN(ve)||isNaN(_e))throw new Error("Invalid coordinates passed to jsPDF.addImage");r.call(this);var le=Ee.call(this,de,Te,It,Xe);return T.call(this,ve,_e,ot,it,le,we),this};var Ee=function(de,Te,ve,_e){var ot,it,It;if(typeof de=="string"&&o(de)===e){de=unescape(de);var Xe=Pe(de,!1);(Xe!==""||(Xe=i.loadFile(de,!0))!==void 0)&&(de=Xe)}if(v(de)&&(de=w(de,Te)),Te=o(de,Te),!b(Te))throw new Error("addImage does not support files of type '"+Te+"', please ensure that a plugin for '"+Te+"' support is added.");if(((It=ve)==null||It.length===0)&&(ve=function(we){return typeof we=="string"||te(we)?O(we):te(we.data)?O(we.data):null}(de)),(ot=x.call(this,ve))||(Z()&&(de instanceof Uint8Array||Te==="RGBA"||(it=de,de=J(de))),ot=this["process"+Te.toUpperCase()](de,_.call(this),ve,function(we){return we&&typeof we=="string"&&(we=we.toUpperCase()),we in i.image_compression?we:M.NONE}(_e),it)),!ot)throw new Error("An unknown error occurred whilst processing the image.");return ot},Pe=i.__addimage__.convertBase64ToBinaryString=function(de,Te){var ve;Te=typeof Te!="boolean"||Te;var _e,ot="";if(typeof de=="string"){_e=(ve=X(de))!==null?ve.data:de;try{ot=Dd(_e)}catch(it){if(Te)throw V(_e)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+it.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return ot};i.getImageProperties=function(de){var Te,ve,_e="";if(v(de)&&(de=w(de)),typeof de=="string"&&o(de)===e&&((_e=Pe(de,!1))===""&&(_e=i.loadFile(de)||""),de=_e),ve=o(de),!b(ve))throw new Error("addImage does not support files of type '"+ve+"', please ensure that a plugin for '"+ve+"' support is added.");if(!Z()||de instanceof Uint8Array||(de=J(de)),!(Te=this["process"+ve.toUpperCase()](de)))throw new Error("An unknown error occurred whilst processing the image");return Te.fileType=ve,Te}})(Ur.API),function(i){var e=function(t){if(t!==void 0&&t!="")return!0};Ur.API.events.push(["addPage",function(t){this.internal.getPageInfo(t.pageNumber).pageContext.annotations=[]}]),i.events.push(["putPage",function(t){for(var o,l,u,m=this.internal.getCoordinateString,r=this.internal.getVerticalCoordinateString,f=this.internal.getPageInfoByObjId(t.objId),_=t.pageContext.annotations,b=!1,v=0;v<_.length&&!b;v++)switch((o=_[v]).type){case"link":(e(o.options.url)||e(o.options.pageNumber))&&(b=!0);break;case"reference":case"text":case"freetext":b=!0}if(b!=0){this.internal.write("/Annots [");for(var w=0;w<_.length;w++){o=_[w];var x=this.internal.pdfEscape,C=this.internal.getEncryptor(t.objId);switch(o.type){case"reference":this.internal.write(" "+o.object.objId+" 0 R ");break;case"text":var T=this.internal.newAdditionalObject(),S=this.internal.newAdditionalObject(),M=this.internal.getEncryptor(T.objId),O=o.title||"Note";u="<</Type /Annot /Subtype /Text "+(l="/Rect ["+m(o.bounds.x)+" "+r(o.bounds.y+o.bounds.h)+" "+m(o.bounds.x+o.bounds.w)+" "+r(o.bounds.y)+"] ")+"/Contents ("+x(M(o.contents))+")",u+=" /Popup "+S.objId+" 0 R",u+=" /P "+f.objId+" 0 R",u+=" /T ("+x(M(O))+") >>",T.content=u;var V=T.objId+" 0 R";u="<</Type /Annot /Subtype /Popup "+(l="/Rect ["+m(o.bounds.x+30)+" "+r(o.bounds.y+o.bounds.h)+" "+m(o.bounds.x+o.bounds.w+30)+" "+r(o.bounds.y)+"] ")+" /Parent "+V,o.open&&(u+=" /Open true"),u+=" >>",S.content=u,this.internal.write(T.objId,"0 R",S.objId,"0 R");break;case"freetext":l="/Rect ["+m(o.bounds.x)+" "+r(o.bounds.y)+" "+m(o.bounds.x+o.bounds.w)+" "+r(o.bounds.y+o.bounds.h)+"] ";var X=o.color||"#000000";u="<</Type /Annot /Subtype /FreeText "+l+"/Contents ("+x(C(o.contents))+")",u+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+X+")",u+=" /Border [0 0 0]",u+=" >>",this.internal.write(u);break;case"link":if(o.options.name){var Z=this.annotations._nameMap[o.options.name];o.options.pageNumber=Z.page,o.options.top=Z.y}else o.options.top||(o.options.top=0);if(l="/Rect ["+o.finalBounds.x+" "+o.finalBounds.y+" "+o.finalBounds.w+" "+o.finalBounds.h+"] ",u="",o.options.url)u="<</Type /Annot /Subtype /Link "+l+"/Border [0 0 0] /A <</S /URI /URI ("+x(C(o.options.url))+") >>";else if(o.options.pageNumber)switch(u="<</Type /Annot /Subtype /Link "+l+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(o.options.pageNumber).objId+" 0 R",o.options.magFactor=o.options.magFactor||"XYZ",o.options.magFactor){case"Fit":u+=" /Fit]";break;case"FitH":u+=" /FitH "+o.options.top+"]";break;case"FitV":o.options.left=o.options.left||0,u+=" /FitV "+o.options.left+"]";break;case"XYZ":default:var te=r(o.options.top);o.options.left=o.options.left||0,o.options.zoom===void 0&&(o.options.zoom=0),u+=" /XYZ "+o.options.left+" "+te+" "+o.options.zoom+"]"}u!=""&&(u+=" >>",this.internal.write(u))}}this.internal.write("]")}}]),i.createAnnotation=function(t){var o=this.internal.getCurrentPageInfo();switch(t.type){case"link":this.link(t.bounds.x,t.bounds.y,t.bounds.w,t.bounds.h,t);break;case"text":case"freetext":o.pageContext.annotations.push(t)}},i.link=function(t,o,l,u,m){var r=this.internal.getCurrentPageInfo(),f=this.internal.getCoordinateString,_=this.internal.getVerticalCoordinateString;r.pageContext.annotations.push({finalBounds:{x:f(t),y:_(o),w:f(t+l),h:_(o+u)},options:m,type:"link"})},i.textWithLink=function(t,o,l,u){var m,r,f=this.getTextWidth(t),_=this.internal.getLineHeight()/this.internal.scaleFactor;if(u.maxWidth!==void 0){r=u.maxWidth;var b=this.splitTextToSize(t,r).length;m=Math.ceil(_*b)}else r=f,m=_;return this.text(t,o,l,u),l+=.2*_,u.align==="center"&&(o-=f/2),u.align==="right"&&(o-=f),this.link(o,l-_,r,m,u),f},i.getTextWidth=function(t){var o=this.internal.getFontSize();return this.getStringUnitWidth(t)*o/this.internal.scaleFactor}}(Ur.API),function(i){var e={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},t={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},o={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},l=[1570,1571,1573,1575];i.__arabicParser__={};var u=i.__arabicParser__.isInArabicSubstitutionA=function(T){return e[T.charCodeAt(0)]!==void 0},m=i.__arabicParser__.isArabicLetter=function(T){return typeof T=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(T)},r=i.__arabicParser__.isArabicEndLetter=function(T){return m(T)&&u(T)&&e[T.charCodeAt(0)].length<=2},f=i.__arabicParser__.isArabicAlfLetter=function(T){return m(T)&&l.indexOf(T.charCodeAt(0))>=0};i.__arabicParser__.arabicLetterHasIsolatedForm=function(T){return m(T)&&u(T)&&e[T.charCodeAt(0)].length>=1};var _=i.__arabicParser__.arabicLetterHasFinalForm=function(T){return m(T)&&u(T)&&e[T.charCodeAt(0)].length>=2};i.__arabicParser__.arabicLetterHasInitialForm=function(T){return m(T)&&u(T)&&e[T.charCodeAt(0)].length>=3};var b=i.__arabicParser__.arabicLetterHasMedialForm=function(T){return m(T)&&u(T)&&e[T.charCodeAt(0)].length==4},v=i.__arabicParser__.resolveLigatures=function(T){var S=0,M=t,O="",V=0;for(S=0;S<T.length;S+=1)M[T.charCodeAt(S)]!==void 0?(V++,typeof(M=M[T.charCodeAt(S)])=="number"&&(O+=String.fromCharCode(M),M=t,V=0),S===T.length-1&&(M=t,O+=T.charAt(S-(V-1)),S-=V-1,V=0)):(M=t,O+=T.charAt(S-V),S-=V,V=0);return O};i.__arabicParser__.isArabicDiacritic=function(T){return T!==void 0&&o[T.charCodeAt(0)]!==void 0};var w=i.__arabicParser__.getCorrectForm=function(T,S,M){return m(T)?u(T)===!1?-1:!_(T)||!m(S)&&!m(M)||!m(M)&&r(S)||r(T)&&!m(S)||r(T)&&f(S)||r(T)&&r(S)?0:b(T)&&m(S)&&!r(S)&&m(M)&&_(M)?3:r(T)||!m(M)?1:2:-1},x=function(T){var S=0,M=0,O=0,V="",X="",Z="",te=(T=T||"").split("\\s+"),J=[];for(S=0;S<te.length;S+=1){for(J.push(""),M=0;M<te[S].length;M+=1)V=te[S][M],X=te[S][M-1],Z=te[S][M+1],m(V)?(O=w(V,X,Z),J[S]+=O!==-1?String.fromCharCode(e[V.charCodeAt(0)][O]):V):J[S]+=V;J[S]=v(J[S])}return J.join(" ")},C=i.__arabicParser__.processArabic=i.processArabic=function(){var T,S=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,M=[];if(Array.isArray(S)){var O=0;for(M=[],O=0;O<S.length;O+=1)Array.isArray(S[O])?M.push([x(S[O][0]),S[O][1],S[O][2]]):M.push([x(S[O])]);T=M}else T=x(S);return typeof arguments[0]=="string"?T:(arguments[0].text=T,arguments[0])};i.events.push(["preProcessText",C])}(Ur.API),Ur.API.autoPrint=function(i){var e;switch((i=i||{}).variant=i.variant||"non-conform",i.variant){case"javascript":this.addJS("print({});");break;case"non-conform":default:this.internal.events.subscribe("postPutResources",function(){e=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+e+" 0 R")})}return this},function(i){var e=function(){var t=void 0;Object.defineProperty(this,"pdf",{get:function(){return t},set:function(r){t=r}});var o=150;Object.defineProperty(this,"width",{get:function(){return o},set:function(r){o=isNaN(r)||Number.isInteger(r)===!1||r<0?150:r,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=o+1)}});var l=300;Object.defineProperty(this,"height",{get:function(){return l},set:function(r){l=isNaN(r)||Number.isInteger(r)===!1||r<0?300:r,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=l+1)}});var u=[];Object.defineProperty(this,"childNodes",{get:function(){return u},set:function(r){u=r}});var m={};Object.defineProperty(this,"style",{get:function(){return m},set:function(r){m=r}}),Object.defineProperty(this,"parentNode",{})};e.prototype.getContext=function(t,o){var l;if((t=t||"2d")!=="2d")return null;for(l in o)this.pdf.context2d.hasOwnProperty(l)&&(this.pdf.context2d[l]=o[l]);return this.pdf.context2d._canvas=this,this.pdf.context2d},e.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},i.events.push(["initialized",function(){this.canvas=new e,this.canvas.pdf=this}])}(Ur.API),function(i){var e={left:0,top:0,bottom:0,right:0},t=!1,o=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},e),this.internal.__cell__.margins.width=this.getPageWidth(),l.call(this))},l=function(){this.internal.__cell__.lastCell=new u,this.internal.__cell__.pages=1},u=function(){var f=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return f},set:function(T){f=T}});var _=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return _},set:function(T){_=T}});var b=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return b},set:function(T){b=T}});var v=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return v},set:function(T){v=T}});var w=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return w},set:function(T){w=T}});var x=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return x},set:function(T){x=T}});var C=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return C},set:function(T){C=T}}),this};u.prototype.clone=function(){return new u(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},u.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},i.setHeaderFunction=function(f){return o.call(this),this.internal.__cell__.headerFunction=typeof f=="function"?f:void 0,this},i.getTextDimensions=function(f,_){o.call(this);var b=(_=_||{}).fontSize||this.getFontSize(),v=_.font||this.getFont(),w=_.scaleFactor||this.internal.scaleFactor,x=0,C=0,T=0,S=this;if(!Array.isArray(f)&&typeof f!="string"){if(typeof f!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");f=String(f)}var M=_.maxWidth;M>0?typeof f=="string"?f=this.splitTextToSize(f,M):Object.prototype.toString.call(f)==="[object Array]"&&(f=f.reduce(function(V,X){return V.concat(S.splitTextToSize(X,M))},[])):f=Array.isArray(f)?f:[f];for(var O=0;O<f.length;O++)x<(T=this.getStringUnitWidth(f[O],{font:v})*b)&&(x=T);return x!==0&&(C=f.length),{w:x/=w,h:Math.max((C*b*this.getLineHeightFactor()-b*(this.getLineHeightFactor()-1))/w,0)}},i.cellAddPage=function(){o.call(this),this.addPage();var f=this.internal.__cell__.margins||e;return this.internal.__cell__.lastCell=new u(f.left,f.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var m=i.cell=function(){var f;f=arguments[0]instanceof u?arguments[0]:new u(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),o.call(this);var _=this.internal.__cell__.lastCell,b=this.internal.__cell__.padding,v=this.internal.__cell__.margins||e,w=this.internal.__cell__.tableHeaderRow,x=this.internal.__cell__.printHeaders;return _.lineNumber!==void 0&&(_.lineNumber===f.lineNumber?(f.x=(_.x||0)+(_.width||0),f.y=_.y||0):_.y+_.height+f.height+v.bottom>this.getPageHeight()?(this.cellAddPage(),f.y=v.top,x&&w&&(this.printHeaderRow(f.lineNumber,!0),f.y+=w[0].height)):f.y=_.y+_.height||f.y),f.text[0]!==void 0&&(this.rect(f.x,f.y,f.width,f.height,t===!0?"FD":void 0),f.align==="right"?this.text(f.text,f.x+f.width-b,f.y+b,{align:"right",baseline:"top"}):f.align==="center"?this.text(f.text,f.x+f.width/2,f.y+b,{align:"center",baseline:"top",maxWidth:f.width-b-b}):this.text(f.text,f.x+b,f.y+b,{align:"left",baseline:"top",maxWidth:f.width-b-b})),this.internal.__cell__.lastCell=f,this};i.table=function(f,_,b,v,w){if(o.call(this),!b)throw new Error("No data for PDF table.");var x,C,T,S,M=[],O=[],V=[],X={},Z={},te=[],J=[],ie=(w=w||{}).autoSize||!1,Ee=w.printHeaders!==!1,Pe=w.css&&w.css["font-size"]!==void 0?16*w.css["font-size"]:w.fontSize||12,de=w.margins||Object.assign({width:this.getPageWidth()},e),Te=typeof w.padding=="number"?w.padding:3,ve=w.headerBackgroundColor||"#c8c8c8",_e=w.headerTextColor||"#000";if(l.call(this),this.internal.__cell__.printHeaders=Ee,this.internal.__cell__.margins=de,this.internal.__cell__.table_font_size=Pe,this.internal.__cell__.padding=Te,this.internal.__cell__.headerBackgroundColor=ve,this.internal.__cell__.headerTextColor=_e,this.setFontSize(Pe),v==null)O=M=Object.keys(b[0]),V=M.map(function(){return"left"});else if(Array.isArray(v)&&es(v[0])==="object")for(M=v.map(function(Ce){return Ce.name}),O=v.map(function(Ce){return Ce.prompt||Ce.name||""}),V=v.map(function(Ce){return Ce.align||"left"}),x=0;x<v.length;x+=1)Z[v[x].name]=v[x].width*(19.049976/25.4);else Array.isArray(v)&&typeof v[0]=="string"&&(O=M=v,V=M.map(function(){return"left"}));if(ie||Array.isArray(v)&&typeof v[0]=="string")for(x=0;x<M.length;x+=1){for(X[S=M[x]]=b.map(function(Ce){return Ce[S]}),this.setFont(void 0,"bold"),te.push(this.getTextDimensions(O[x],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),C=X[S],this.setFont(void 0,"normal"),T=0;T<C.length;T+=1)te.push(this.getTextDimensions(C[T],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);Z[S]=Math.max.apply(null,te)+Te+Te,te=[]}if(Ee){var ot={};for(x=0;x<M.length;x+=1)ot[M[x]]={},ot[M[x]].text=O[x],ot[M[x]].align=V[x];var it=r.call(this,ot,Z);J=M.map(function(Ce){return new u(f,_,Z[Ce],it,ot[Ce].text,void 0,ot[Ce].align)}),this.setTableHeaderRow(J),this.printHeaderRow(1,!1)}var It=v.reduce(function(Ce,Re){return Ce[Re.name]=Re.align,Ce},{});for(x=0;x<b.length;x+=1){"rowStart"in w&&w.rowStart instanceof Function&&w.rowStart({row:x,data:b[x]},this);var Xe=r.call(this,b[x],Z);for(T=0;T<M.length;T+=1){var we=b[x][M[T]];"cellStart"in w&&w.cellStart instanceof Function&&w.cellStart({row:x,col:T,data:we},this),m.call(this,new u(f,_,Z[M[T]],Xe,we,x+2,It[M[T]]))}}return this.internal.__cell__.table_x=f,this.internal.__cell__.table_y=_,this};var r=function(f,_){var b=this.internal.__cell__.padding,v=this.internal.__cell__.table_font_size,w=this.internal.scaleFactor;return Object.keys(f).map(function(x){var C=f[x];return this.splitTextToSize(C.hasOwnProperty("text")?C.text:C,_[x]-b-b)},this).map(function(x){return this.getLineHeightFactor()*x.length*v/w+b+b},this).reduce(function(x,C){return Math.max(x,C)},0)};i.setTableHeaderRow=function(f){o.call(this),this.internal.__cell__.tableHeaderRow=f},i.printHeaderRow=function(f,_){if(o.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var b;if(t=!0,typeof this.internal.__cell__.headerFunction=="function"){var v=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new u(v[0],v[1],v[2],v[3],void 0,-1)}this.setFont(void 0,"bold");for(var w=[],x=0;x<this.internal.__cell__.tableHeaderRow.length;x+=1){b=this.internal.__cell__.tableHeaderRow[x].clone(),_&&(b.y=this.internal.__cell__.margins.top||0,w.push(b)),b.lineNumber=f;var C=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),m.call(this,b),this.setTextColor(C)}w.length>0&&this.setTableHeaderRow(w),this.setFont(void 0,"normal"),t=!1}}(Ur.API);var C4={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},E4=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],j2=S4(E4),I4=[100,200,300,400,500,600,700,800,900],p8=S4(I4);function U2(i){var e=i.family.replace(/"|'/g,"").toLowerCase(),t=function(u){return C4[u=u||"normal"]?u:"normal"}(i.style),o=function(u){if(!u)return 400;if(typeof u=="number")return u>=100&&u<=900&&u%100==0?u:400;if(/^\d00$/.test(u))return parseInt(u);switch(u){case"bold":return 700;case"normal":default:return 400}}(i.weight),l=function(u){return typeof j2[u=u||"normal"]=="number"?u:"normal"}(i.stretch);return{family:e,style:t,weight:o,stretch:l,src:i.src||[],ref:i.ref||{name:e,style:[l,t,o].join(" ")}}}function a_(i,e,t,o){var l;for(l=t;l>=0&&l<e.length;l+=o)if(i[e[l]])return i[e[l]];for(l=t;l>=0&&l<e.length;l-=o)if(i[e[l]])return i[e[l]]}var m8={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},l_={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function u_(i){return[i.stretch,i.style,i.weight,i.family].join(" ")}function g8(i,e,t){for(var o=(t=t||{}).defaultFontFamily||"times",l=Object.assign({},m8,t.genericFontFamilies||{}),u=null,m=null,r=0;r<e.length;++r)if(l[(u=U2(e[r])).family]&&(u.family=l[u.family]),i.hasOwnProperty(u.family)){m=i[u.family];break}if(!(m=m||i[o]))throw new Error("Could not find a font-family for the rule '"+u_(u)+"' and default family '"+o+"'.");if(m=function(f,_){if(_[f])return _[f];var b=j2[f],v=b<=j2.normal?-1:1,w=a_(_,E4,b,v);if(!w)throw new Error("Could not find a matching font-stretch value for "+f);return w}(u.stretch,m),m=function(f,_){if(_[f])return _[f];for(var b=C4[f],v=0;v<b.length;++v)if(_[b[v]])return _[b[v]];throw new Error("Could not find a matching font-style for "+f)}(u.style,m),!(m=function(f,_){if(_[f])return _[f];if(f===400&&_[500])return _[500];if(f===500&&_[400])return _[400];var b=p8[f],v=a_(_,I4,b,f<400?-1:1);if(!v)throw new Error("Could not find a matching font-weight for value "+f);return v}(u.weight,m)))throw new Error("Failed to resolve a font for the rule '"+u_(u)+"'.");return m}function c_(i){return i.trimLeft()}function y8(i,e){for(var t=0;t<i.length;){if(i.charAt(t)===e)return[i.substring(0,t),i.substring(t+1)];t+=1}return null}function _8(i){var e=i.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return e===null?null:[e[0],i.substring(e[0].length)]}var zp,h_,f_,Om=["times"];(function(i){var e,t,o,l,u,m,r,f,_,b=function(le){return le=le||{},this.isStrokeTransparent=le.isStrokeTransparent||!1,this.strokeOpacity=le.strokeOpacity||1,this.strokeStyle=le.strokeStyle||"#000000",this.fillStyle=le.fillStyle||"#000000",this.isFillTransparent=le.isFillTransparent||!1,this.fillOpacity=le.fillOpacity||1,this.font=le.font||"10px sans-serif",this.textBaseline=le.textBaseline||"alphabetic",this.textAlign=le.textAlign||"left",this.lineWidth=le.lineWidth||1,this.lineJoin=le.lineJoin||"miter",this.lineCap=le.lineCap||"butt",this.path=le.path||[],this.transform=le.transform!==void 0?le.transform.clone():new f,this.globalCompositeOperation=le.globalCompositeOperation||"normal",this.globalAlpha=le.globalAlpha||1,this.clip_path=le.clip_path||[],this.currentPoint=le.currentPoint||new m,this.miterLimit=le.miterLimit||10,this.lastPoint=le.lastPoint||new m,this.lineDashOffset=le.lineDashOffset||0,this.lineDash=le.lineDash||[],this.margin=le.margin||[0,0,0,0],this.prevPageLastElemOffset=le.prevPageLastElemOffset||0,this.ignoreClearRect=typeof le.ignoreClearRect!="boolean"||le.ignoreClearRect,this};i.events.push(["initialized",function(){this.context2d=new v(this),e=this.internal.f2,t=this.internal.getCoordinateString,o=this.internal.getVerticalCoordinateString,l=this.internal.getHorizontalCoordinate,u=this.internal.getVerticalCoordinate,m=this.internal.Point,r=this.internal.Rectangle,f=this.internal.Matrix,_=new b}]);var v=function(le){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var Se=le;Object.defineProperty(this,"pdf",{get:function(){return Se}});var he=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return he},set:function(bt){he=Boolean(bt)}});var me=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return me},set:function(bt){me=Boolean(bt)}});var Be=0;Object.defineProperty(this,"posX",{get:function(){return Be},set:function(bt){isNaN(bt)||(Be=bt)}});var We=0;Object.defineProperty(this,"posY",{get:function(){return We},set:function(bt){isNaN(bt)||(We=bt)}}),Object.defineProperty(this,"margin",{get:function(){return _.margin},set:function(bt){var Je;typeof bt=="number"?Je=[bt,bt,bt,bt]:((Je=new Array(4))[0]=bt[0],Je[1]=bt.length>=2?bt[1]:Je[0],Je[2]=bt.length>=3?bt[2]:Je[0],Je[3]=bt.length>=4?bt[3]:Je[1]),_.margin=Je}});var st=!1;Object.defineProperty(this,"autoPaging",{get:function(){return st},set:function(bt){st=bt}});var Ye=0;Object.defineProperty(this,"lastBreak",{get:function(){return Ye},set:function(bt){Ye=bt}});var gt=[];Object.defineProperty(this,"pageBreaks",{get:function(){return gt},set:function(bt){gt=bt}}),Object.defineProperty(this,"ctx",{get:function(){return _},set:function(bt){bt instanceof b&&(_=bt)}}),Object.defineProperty(this,"path",{get:function(){return _.path},set:function(bt){_.path=bt}});var Mt=[];Object.defineProperty(this,"ctxStack",{get:function(){return Mt},set:function(bt){Mt=bt}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(bt){var Je;Je=w(bt),this.ctx.fillStyle=Je.style,this.ctx.isFillTransparent=Je.a===0,this.ctx.fillOpacity=Je.a,this.pdf.setFillColor(Je.r,Je.g,Je.b,{a:Je.a}),this.pdf.setTextColor(Je.r,Je.g,Je.b,{a:Je.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(bt){var Je=w(bt);this.ctx.strokeStyle=Je.style,this.ctx.isStrokeTransparent=Je.a===0,this.ctx.strokeOpacity=Je.a,Je.a===0?this.pdf.setDrawColor(255,255,255):(Je.a,this.pdf.setDrawColor(Je.r,Je.g,Je.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(bt){["butt","round","square"].indexOf(bt)!==-1&&(this.ctx.lineCap=bt,this.pdf.setLineCap(bt))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(bt){isNaN(bt)||(this.ctx.lineWidth=bt,this.pdf.setLineWidth(bt))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(bt){["bevel","round","miter"].indexOf(bt)!==-1&&(this.ctx.lineJoin=bt,this.pdf.setLineJoin(bt))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(bt){isNaN(bt)||(this.ctx.miterLimit=bt,this.pdf.setMiterLimit(bt))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(bt){this.ctx.textBaseline=bt}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(bt){["right","end","center","left","start"].indexOf(bt)!==-1&&(this.ctx.textAlign=bt)}});var ri=null;function ut(bt,Je){if(ri===null){var ei=function(li){var Qt=[];return Object.keys(li).forEach(function(Si){li[Si].forEach(function(Ti){var Xt=null;switch(Ti){case"bold":Xt={family:Si,weight:"bold"};break;case"italic":Xt={family:Si,style:"italic"};break;case"bolditalic":Xt={family:Si,weight:"bold",style:"italic"};break;case"":case"normal":Xt={family:Si}}Xt!==null&&(Xt.ref={name:Si,style:Ti},Qt.push(Xt))})}),Qt}(bt.getFontList());ri=function(li){for(var Qt={},Si=0;Si<li.length;++Si){var Ti=U2(li[Si]),Xt=Ti.family,mi=Ti.stretch,Zi=Ti.style,Ci=Ti.weight;Qt[Xt]=Qt[Xt]||{},Qt[Xt][mi]=Qt[Xt][mi]||{},Qt[Xt][mi][Zi]=Qt[Xt][mi][Zi]||{},Qt[Xt][mi][Zi][Ci]=Ti}return Qt}(ei.concat(Je))}return ri}var wt=null;Object.defineProperty(this,"fontFaces",{get:function(){return wt},set:function(bt){ri=null,wt=bt}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(bt){var Je;if(this.ctx.font=bt,(Je=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(bt))!==null){var ei=Je[1],li=(Je[2],Je[3]),Qt=Je[4],Si=(Je[5],Je[6]),Ti=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(Qt)[2];Qt=Math.floor(Ti==="px"?parseFloat(Qt)*this.pdf.internal.scaleFactor:Ti==="em"?parseFloat(Qt)*this.pdf.getFontSize():parseFloat(Qt)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(Qt);var Xt=function(ae){var $e,_t,Kt=[],di=ae.trim();if(di==="")return Om;if(di in l_)return[l_[di]];for(;di!=="";){switch(_t=null,$e=(di=c_(di)).charAt(0)){case'"':case"'":_t=y8(di.substring(1),$e);break;default:_t=_8(di)}if(_t===null||(Kt.push(_t[0]),(di=c_(_t[1]))!==""&&di.charAt(0)!==","))return Om;di=di.replace(/^,/,"")}return Kt}(Si);if(this.fontFaces){var mi=g8(ut(this.pdf,this.fontFaces),Xt.map(function(ae){return{family:ae,stretch:"normal",weight:li,style:ei}}));this.pdf.setFont(mi.ref.name,mi.ref.style)}else{var Zi="";(li==="bold"||parseInt(li,10)>=700||ei==="bold")&&(Zi="bold"),ei==="italic"&&(Zi+="italic"),Zi.length===0&&(Zi="normal");for(var Ci="",ti={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},Me=0;Me<Xt.length;Me++){if(this.pdf.internal.getFont(Xt[Me],Zi,{noFallback:!0,disableWarning:!0})!==void 0){Ci=Xt[Me];break}if(Zi==="bolditalic"&&this.pdf.internal.getFont(Xt[Me],"bold",{noFallback:!0,disableWarning:!0})!==void 0)Ci=Xt[Me],Zi="bold";else if(this.pdf.internal.getFont(Xt[Me],"normal",{noFallback:!0,disableWarning:!0})!==void 0){Ci=Xt[Me],Zi="normal";break}}if(Ci===""){for(var Q=0;Q<Xt.length;Q++)if(ti[Xt[Q]]){Ci=ti[Xt[Q]];break}}Ci=Ci===""?"Times":Ci,this.pdf.setFont(Ci,Zi)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(bt){this.ctx.globalCompositeOperation=bt}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(bt){this.ctx.globalAlpha=bt}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(bt){this.ctx.lineDashOffset=bt,Re.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(bt){this.ctx.lineDash=bt,Re.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(bt){this.ctx.ignoreClearRect=Boolean(bt)}})};v.prototype.setLineDash=function(le){this.lineDash=le},v.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},v.prototype.fill=function(){X.call(this,"fill",!1)},v.prototype.stroke=function(){X.call(this,"stroke",!1)},v.prototype.beginPath=function(){this.path=[{type:"begin"}]},v.prototype.moveTo=function(le,Se){if(isNaN(le)||isNaN(Se))throw hs.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var he=this.ctx.transform.applyToPoint(new m(le,Se));this.path.push({type:"mt",x:he.x,y:he.y}),this.ctx.lastPoint=new m(le,Se)},v.prototype.closePath=function(){var le=new m(0,0),Se=0;for(Se=this.path.length-1;Se!==-1;Se--)if(this.path[Se].type==="begin"&&es(this.path[Se+1])==="object"&&typeof this.path[Se+1].x=="number"){le=new m(this.path[Se+1].x,this.path[Se+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new m(le.x,le.y)},v.prototype.lineTo=function(le,Se){if(isNaN(le)||isNaN(Se))throw hs.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var he=this.ctx.transform.applyToPoint(new m(le,Se));this.path.push({type:"lt",x:he.x,y:he.y}),this.ctx.lastPoint=new m(he.x,he.y)},v.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),X.call(this,null,!0)},v.prototype.quadraticCurveTo=function(le,Se,he,me){if(isNaN(he)||isNaN(me)||isNaN(le)||isNaN(Se))throw hs.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var Be=this.ctx.transform.applyToPoint(new m(he,me)),We=this.ctx.transform.applyToPoint(new m(le,Se));this.path.push({type:"qct",x1:We.x,y1:We.y,x:Be.x,y:Be.y}),this.ctx.lastPoint=new m(Be.x,Be.y)},v.prototype.bezierCurveTo=function(le,Se,he,me,Be,We){if(isNaN(Be)||isNaN(We)||isNaN(le)||isNaN(Se)||isNaN(he)||isNaN(me))throw hs.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var st=this.ctx.transform.applyToPoint(new m(Be,We)),Ye=this.ctx.transform.applyToPoint(new m(le,Se)),gt=this.ctx.transform.applyToPoint(new m(he,me));this.path.push({type:"bct",x1:Ye.x,y1:Ye.y,x2:gt.x,y2:gt.y,x:st.x,y:st.y}),this.ctx.lastPoint=new m(st.x,st.y)},v.prototype.arc=function(le,Se,he,me,Be,We){if(isNaN(le)||isNaN(Se)||isNaN(he)||isNaN(me)||isNaN(Be))throw hs.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(We=Boolean(We),!this.ctx.transform.isIdentity){var st=this.ctx.transform.applyToPoint(new m(le,Se));le=st.x,Se=st.y;var Ye=this.ctx.transform.applyToPoint(new m(0,he)),gt=this.ctx.transform.applyToPoint(new m(0,0));he=Math.sqrt(Math.pow(Ye.x-gt.x,2)+Math.pow(Ye.y-gt.y,2))}Math.abs(Be-me)>=2*Math.PI&&(me=0,Be=2*Math.PI),this.path.push({type:"arc",x:le,y:Se,radius:he,startAngle:me,endAngle:Be,counterclockwise:We})},v.prototype.arcTo=function(le,Se,he,me,Be){throw new Error("arcTo not implemented.")},v.prototype.rect=function(le,Se,he,me){if(isNaN(le)||isNaN(Se)||isNaN(he)||isNaN(me))throw hs.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(le,Se),this.lineTo(le+he,Se),this.lineTo(le+he,Se+me),this.lineTo(le,Se+me),this.lineTo(le,Se),this.lineTo(le+he,Se),this.lineTo(le,Se)},v.prototype.fillRect=function(le,Se,he,me){if(isNaN(le)||isNaN(Se)||isNaN(he)||isNaN(me))throw hs.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!x.call(this)){var Be={};this.lineCap!=="butt"&&(Be.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(Be.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(le,Se,he,me),this.fill(),Be.hasOwnProperty("lineCap")&&(this.lineCap=Be.lineCap),Be.hasOwnProperty("lineJoin")&&(this.lineJoin=Be.lineJoin)}},v.prototype.strokeRect=function(le,Se,he,me){if(isNaN(le)||isNaN(Se)||isNaN(he)||isNaN(me))throw hs.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");C.call(this)||(this.beginPath(),this.rect(le,Se,he,me),this.stroke())},v.prototype.clearRect=function(le,Se,he,me){if(isNaN(le)||isNaN(Se)||isNaN(he)||isNaN(me))throw hs.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(le,Se,he,me))},v.prototype.save=function(le){le=typeof le!="boolean"||le;for(var Se=this.pdf.internal.getCurrentPageInfo().pageNumber,he=0;he<this.pdf.internal.getNumberOfPages();he++)this.pdf.setPage(he+1),this.pdf.internal.out("q");if(this.pdf.setPage(Se),le){this.ctx.fontSize=this.pdf.internal.getFontSize();var me=new b(this.ctx);this.ctxStack.push(this.ctx),this.ctx=me}},v.prototype.restore=function(le){le=typeof le!="boolean"||le;for(var Se=this.pdf.internal.getCurrentPageInfo().pageNumber,he=0;he<this.pdf.internal.getNumberOfPages();he++)this.pdf.setPage(he+1),this.pdf.internal.out("Q");this.pdf.setPage(Se),le&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},v.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var w=function(le){var Se,he,me,Be;if(le.isCanvasGradient===!0&&(le=le.getColor()),!le)return{r:0,g:0,b:0,a:0,style:le};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(le))Se=0,he=0,me=0,Be=0;else{var We=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(le);if(We!==null)Se=parseInt(We[1]),he=parseInt(We[2]),me=parseInt(We[3]),Be=1;else if((We=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(le))!==null)Se=parseInt(We[1]),he=parseInt(We[2]),me=parseInt(We[3]),Be=parseFloat(We[4]);else{if(Be=1,typeof le=="string"&&le.charAt(0)!=="#"){var st=new v4(le);le=st.ok?st.toHex():"#000000"}le.length===4?(Se=le.substring(1,2),Se+=Se,he=le.substring(2,3),he+=he,me=le.substring(3,4),me+=me):(Se=le.substring(1,3),he=le.substring(3,5),me=le.substring(5,7)),Se=parseInt(Se,16),he=parseInt(he,16),me=parseInt(me,16)}}return{r:Se,g:he,b:me,a:Be,style:le}},x=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},C=function(){return Boolean(this.ctx.isStrokeTransparent||this.globalAlpha==0)};v.prototype.fillText=function(le,Se,he,me){if(isNaN(Se)||isNaN(he)||typeof le!="string")throw hs.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(me=isNaN(me)?void 0:me,!x.call(this)){var Be=Xe(this.ctx.transform.rotation),We=this.ctx.transform.scaleX;Te.call(this,{text:le,x:Se,y:he,scale:We,angle:Be,align:this.textAlign,maxWidth:me})}},v.prototype.strokeText=function(le,Se,he,me){if(isNaN(Se)||isNaN(he)||typeof le!="string")throw hs.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!C.call(this)){me=isNaN(me)?void 0:me;var Be=Xe(this.ctx.transform.rotation),We=this.ctx.transform.scaleX;Te.call(this,{text:le,x:Se,y:he,scale:We,renderingMode:"stroke",angle:Be,align:this.textAlign,maxWidth:me})}},v.prototype.measureText=function(le){if(typeof le!="string")throw hs.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var Se=this.pdf,he=this.pdf.internal.scaleFactor,me=Se.internal.getFontSize(),Be=Se.getStringUnitWidth(le)*me/Se.internal.scaleFactor,We=function(st){var Ye=(st=st||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return Ye}}),this};return new We({width:Be*=Math.round(96*he/72*1e4)/1e4})},v.prototype.scale=function(le,Se){if(isNaN(le)||isNaN(Se))throw hs.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var he=new f(le,0,0,Se,0,0);this.ctx.transform=this.ctx.transform.multiply(he)},v.prototype.rotate=function(le){if(isNaN(le))throw hs.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var Se=new f(Math.cos(le),Math.sin(le),-Math.sin(le),Math.cos(le),0,0);this.ctx.transform=this.ctx.transform.multiply(Se)},v.prototype.translate=function(le,Se){if(isNaN(le)||isNaN(Se))throw hs.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var he=new f(1,0,0,1,le,Se);this.ctx.transform=this.ctx.transform.multiply(he)},v.prototype.transform=function(le,Se,he,me,Be,We){if(isNaN(le)||isNaN(Se)||isNaN(he)||isNaN(me)||isNaN(Be)||isNaN(We))throw hs.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var st=new f(le,Se,he,me,Be,We);this.ctx.transform=this.ctx.transform.multiply(st)},v.prototype.setTransform=function(le,Se,he,me,Be,We){le=isNaN(le)?1:le,Se=isNaN(Se)?0:Se,he=isNaN(he)?0:he,me=isNaN(me)?1:me,Be=isNaN(Be)?0:Be,We=isNaN(We)?0:We,this.ctx.transform=new f(le,Se,he,me,Be,We)};var T=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};v.prototype.drawImage=function(le,Se,he,me,Be,We,st,Ye,gt){var Mt=this.pdf.getImageProperties(le),ri=1,ut=1,wt=1,bt=1;me!==void 0&&Ye!==void 0&&(wt=Ye/me,bt=gt/Be,ri=Mt.width/me*Ye/me,ut=Mt.height/Be*gt/Be),We===void 0&&(We=Se,st=he,Se=0,he=0),me!==void 0&&Ye===void 0&&(Ye=me,gt=Be),me===void 0&&Ye===void 0&&(Ye=Mt.width,gt=Mt.height);for(var Je,ei=this.ctx.transform.decompose(),li=Xe(ei.rotate.shx),Qt=new f,Si=(Qt=(Qt=(Qt=Qt.multiply(ei.translate)).multiply(ei.skew)).multiply(ei.scale)).applyToRectangle(new r(We-Se*wt,st-he*bt,me*ri,Be*ut)),Ti=S.call(this,Si),Xt=[],mi=0;mi<Ti.length;mi+=1)Xt.indexOf(Ti[mi])===-1&&Xt.push(Ti[mi]);if(V(Xt),this.autoPaging)for(var Zi=Xt[0],Ci=Xt[Xt.length-1],ti=Zi;ti<Ci+1;ti++){this.pdf.setPage(ti);var Me=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Q=ti===1?this.posY+this.margin[0]:this.margin[0],ae=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],$e=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],_t=ti===1?0:ae+(ti-2)*$e;if(this.ctx.clip_path.length!==0){var Kt=this.path;Je=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=O(Je,this.posX+this.margin[3],-_t+Q+this.ctx.prevPageLastElemOffset),Z.call(this,"fill",!0),this.path=Kt}var di=JSON.parse(JSON.stringify(Si));di=O([di],this.posX+this.margin[3],-_t+Q+this.ctx.prevPageLastElemOffset)[0];var wn=(ti>Zi||ti<Ci)&&T.call(this);wn&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Me,$e,null).clip().discardPath()),this.pdf.addImage(le,"JPEG",di.x,di.y,di.w,di.h,null,null,li),wn&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(le,"JPEG",Si.x,Si.y,Si.w,Si.h,null,null,li)};var S=function(le,Se,he){var me=[];Se=Se||this.pdf.internal.pageSize.width,he=he||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var Be=this.posY+this.ctx.prevPageLastElemOffset;switch(le.type){default:case"mt":case"lt":me.push(Math.floor((le.y+Be)/he)+1);break;case"arc":me.push(Math.floor((le.y+Be-le.radius)/he)+1),me.push(Math.floor((le.y+Be+le.radius)/he)+1);break;case"qct":var We=we(this.ctx.lastPoint.x,this.ctx.lastPoint.y,le.x1,le.y1,le.x,le.y);me.push(Math.floor((We.y+Be)/he)+1),me.push(Math.floor((We.y+We.h+Be)/he)+1);break;case"bct":var st=Ce(this.ctx.lastPoint.x,this.ctx.lastPoint.y,le.x1,le.y1,le.x2,le.y2,le.x,le.y);me.push(Math.floor((st.y+Be)/he)+1),me.push(Math.floor((st.y+st.h+Be)/he)+1);break;case"rect":me.push(Math.floor((le.y+Be)/he)+1),me.push(Math.floor((le.y+le.h+Be)/he)+1)}for(var Ye=0;Ye<me.length;Ye+=1)for(;this.pdf.internal.getNumberOfPages()<me[Ye];)M.call(this);return me},M=function(){var le=this.fillStyle,Se=this.strokeStyle,he=this.font,me=this.lineCap,Be=this.lineWidth,We=this.lineJoin;this.pdf.addPage(),this.fillStyle=le,this.strokeStyle=Se,this.font=he,this.lineCap=me,this.lineWidth=Be,this.lineJoin=We},O=function(le,Se,he){for(var me=0;me<le.length;me++)switch(le[me].type){case"bct":le[me].x2+=Se,le[me].y2+=he;case"qct":le[me].x1+=Se,le[me].y1+=he;case"mt":case"lt":case"arc":default:le[me].x+=Se,le[me].y+=he}return le},V=function(le){return le.sort(function(Se,he){return Se-he})},X=function(le,Se){for(var he,me,Be=this.fillStyle,We=this.strokeStyle,st=this.lineCap,Ye=this.lineWidth,gt=Math.abs(Ye*this.ctx.transform.scaleX),Mt=this.lineJoin,ri=JSON.parse(JSON.stringify(this.path)),ut=JSON.parse(JSON.stringify(this.path)),wt=[],bt=0;bt<ut.length;bt++)if(ut[bt].x!==void 0)for(var Je=S.call(this,ut[bt]),ei=0;ei<Je.length;ei+=1)wt.indexOf(Je[ei])===-1&&wt.push(Je[ei]);for(var li=0;li<wt.length;li++)for(;this.pdf.internal.getNumberOfPages()<wt[li];)M.call(this);if(V(wt),this.autoPaging)for(var Qt=wt[0],Si=wt[wt.length-1],Ti=Qt;Ti<Si+1;Ti++){this.pdf.setPage(Ti),this.fillStyle=Be,this.strokeStyle=We,this.lineCap=st,this.lineWidth=gt,this.lineJoin=Mt;var Xt=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],mi=Ti===1?this.posY+this.margin[0]:this.margin[0],Zi=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Ci=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],ti=Ti===1?0:Zi+(Ti-2)*Ci;if(this.ctx.clip_path.length!==0){var Me=this.path;he=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=O(he,this.posX+this.margin[3],-ti+mi+this.ctx.prevPageLastElemOffset),Z.call(this,le,!0),this.path=Me}if(me=JSON.parse(JSON.stringify(ri)),this.path=O(me,this.posX+this.margin[3],-ti+mi+this.ctx.prevPageLastElemOffset),Se===!1||Ti===0){var Q=(Ti>Qt||Ti<Si)&&T.call(this);Q&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Xt,Ci,null).clip().discardPath()),Z.call(this,le,Se),Q&&this.pdf.restoreGraphicsState()}this.lineWidth=Ye}else this.lineWidth=gt,Z.call(this,le,Se),this.lineWidth=Ye;this.path=ri},Z=function(le,Se){if((le!=="stroke"||Se||!C.call(this))&&(le==="stroke"||Se||!x.call(this))){for(var he,me,Be=[],We=this.path,st=0;st<We.length;st++){var Ye=We[st];switch(Ye.type){case"begin":Be.push({begin:!0});break;case"close":Be.push({close:!0});break;case"mt":Be.push({start:Ye,deltas:[],abs:[]});break;case"lt":var gt=Be.length;if(We[st-1]&&!isNaN(We[st-1].x)&&(he=[Ye.x-We[st-1].x,Ye.y-We[st-1].y],gt>0)){for(;gt>=0;gt--)if(Be[gt-1].close!==!0&&Be[gt-1].begin!==!0){Be[gt-1].deltas.push(he),Be[gt-1].abs.push(Ye);break}}break;case"bct":he=[Ye.x1-We[st-1].x,Ye.y1-We[st-1].y,Ye.x2-We[st-1].x,Ye.y2-We[st-1].y,Ye.x-We[st-1].x,Ye.y-We[st-1].y],Be[Be.length-1].deltas.push(he);break;case"qct":var Mt=We[st-1].x+2/3*(Ye.x1-We[st-1].x),ri=We[st-1].y+2/3*(Ye.y1-We[st-1].y),ut=Ye.x+2/3*(Ye.x1-Ye.x),wt=Ye.y+2/3*(Ye.y1-Ye.y),bt=Ye.x,Je=Ye.y;he=[Mt-We[st-1].x,ri-We[st-1].y,ut-We[st-1].x,wt-We[st-1].y,bt-We[st-1].x,Je-We[st-1].y],Be[Be.length-1].deltas.push(he);break;case"arc":Be.push({deltas:[],abs:[],arc:!0}),Array.isArray(Be[Be.length-1].abs)&&Be[Be.length-1].abs.push(Ye)}}me=Se?null:le==="stroke"?"stroke":"fill";for(var ei=!1,li=0;li<Be.length;li++)if(Be[li].arc)for(var Qt=Be[li].abs,Si=0;Si<Qt.length;Si++){var Ti=Qt[Si];Ti.type==="arc"?ie.call(this,Ti.x,Ti.y,Ti.radius,Ti.startAngle,Ti.endAngle,Ti.counterclockwise,void 0,Se,!ei):ve.call(this,Ti.x,Ti.y),ei=!0}else if(Be[li].close===!0)this.pdf.internal.out("h"),ei=!1;else if(Be[li].begin!==!0){var Xt=Be[li].start.x,mi=Be[li].start.y;_e.call(this,Be[li].deltas,Xt,mi),ei=!0}me&&Ee.call(this,me),Se&&Pe.call(this)}},te=function(le){var Se=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,he=Se*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return le-he;case"top":return le+Se-he;case"hanging":return le+Se-2*he;case"middle":return le+Se/2-he;case"ideographic":return le;case"alphabetic":default:return le}},J=function(le){return le+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};v.prototype.createLinearGradient=function(){var le=function(){};return le.colorStops=[],le.addColorStop=function(Se,he){this.colorStops.push([Se,he])},le.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},le.isCanvasGradient=!0,le},v.prototype.createPattern=function(){return this.createLinearGradient()},v.prototype.createRadialGradient=function(){return this.createLinearGradient()};var ie=function(le,Se,he,me,Be,We,st,Ye,gt){for(var Mt=it.call(this,he,me,Be,We),ri=0;ri<Mt.length;ri++){var ut=Mt[ri];ri===0&&(gt?de.call(this,ut.x1+le,ut.y1+Se):ve.call(this,ut.x1+le,ut.y1+Se)),ot.call(this,le,Se,ut.x2,ut.y2,ut.x3,ut.y3,ut.x4,ut.y4)}Ye?Pe.call(this):Ee.call(this,st)},Ee=function(le){switch(le){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},Pe=function(){this.pdf.clip(),this.pdf.discardPath()},de=function(le,Se){this.pdf.internal.out(t(le)+" "+o(Se)+" m")},Te=function(le){var Se;switch(le.align){case"right":case"end":Se="right";break;case"center":Se="center";break;case"left":case"start":default:Se="left"}var he=this.pdf.getTextDimensions(le.text),me=te.call(this,le.y),Be=J.call(this,me)-he.h,We=this.ctx.transform.applyToPoint(new m(le.x,me)),st=this.ctx.transform.decompose(),Ye=new f;Ye=(Ye=(Ye=Ye.multiply(st.translate)).multiply(st.skew)).multiply(st.scale);for(var gt,Mt,ri,ut=this.ctx.transform.applyToRectangle(new r(le.x,me,he.w,he.h)),wt=Ye.applyToRectangle(new r(le.x,Be,he.w,he.h)),bt=S.call(this,wt),Je=[],ei=0;ei<bt.length;ei+=1)Je.indexOf(bt[ei])===-1&&Je.push(bt[ei]);if(V(Je),this.autoPaging)for(var li=Je[0],Qt=Je[Je.length-1],Si=li;Si<Qt+1;Si++){this.pdf.setPage(Si);var Ti=Si===1?this.posY+this.margin[0]:this.margin[0],Xt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],mi=this.pdf.internal.pageSize.height-this.margin[2],Zi=mi-this.margin[0],Ci=this.pdf.internal.pageSize.width-this.margin[1],ti=Ci-this.margin[3],Me=Si===1?0:Xt+(Si-2)*Zi;if(this.ctx.clip_path.length!==0){var Q=this.path;gt=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=O(gt,this.posX+this.margin[3],-1*Me+Ti),Z.call(this,"fill",!0),this.path=Q}var ae=O([JSON.parse(JSON.stringify(wt))],this.posX+this.margin[3],-Me+Ti+this.ctx.prevPageLastElemOffset)[0];le.scale>=.01&&(Mt=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Mt*le.scale),ri=this.lineWidth,this.lineWidth=ri*le.scale);var $e=this.autoPaging!=="text";if($e||ae.y+ae.h<=mi){if($e||ae.y>=Ti&&ae.x<=Ci){var _t=$e?le.text:this.pdf.splitTextToSize(le.text,le.maxWidth||Ci-ae.x)[0],Kt=O([JSON.parse(JSON.stringify(ut))],this.posX+this.margin[3],-Me+Ti+this.ctx.prevPageLastElemOffset)[0],di=$e&&(Si>li||Si<Qt)&&T.call(this);di&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],ti,Zi,null).clip().discardPath()),this.pdf.text(_t,Kt.x,Kt.y,{angle:le.angle,align:Se,renderingMode:le.renderingMode}),di&&this.pdf.restoreGraphicsState()}}else ae.y<mi&&(this.ctx.prevPageLastElemOffset+=mi-ae.y);le.scale>=.01&&(this.pdf.setFontSize(Mt),this.lineWidth=ri)}else le.scale>=.01&&(Mt=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Mt*le.scale),ri=this.lineWidth,this.lineWidth=ri*le.scale),this.pdf.text(le.text,We.x+this.posX,We.y+this.posY,{angle:le.angle,align:Se,renderingMode:le.renderingMode,maxWidth:le.maxWidth}),le.scale>=.01&&(this.pdf.setFontSize(Mt),this.lineWidth=ri)},ve=function(le,Se,he,me){he=he||0,me=me||0,this.pdf.internal.out(t(le+he)+" "+o(Se+me)+" l")},_e=function(le,Se,he){return this.pdf.lines(le,Se,he,null,null)},ot=function(le,Se,he,me,Be,We,st,Ye){this.pdf.internal.out([e(l(he+le)),e(u(me+Se)),e(l(Be+le)),e(u(We+Se)),e(l(st+le)),e(u(Ye+Se)),"c"].join(" "))},it=function(le,Se,he,me){for(var Be=2*Math.PI,We=Math.PI/2;Se>he;)Se-=Be;var st=Math.abs(he-Se);st<Be&&me&&(st=Be-st);for(var Ye=[],gt=me?-1:1,Mt=Se;st>1e-5;){var ri=Mt+gt*Math.min(st,We);Ye.push(It.call(this,le,Mt,ri)),st-=Math.abs(ri-Mt),Mt=ri}return Ye},It=function(le,Se,he){var me=(he-Se)/2,Be=le*Math.cos(me),We=le*Math.sin(me),st=Be,Ye=-We,gt=st*st+Ye*Ye,Mt=gt+st*Be+Ye*We,ri=4/3*(Math.sqrt(2*gt*Mt)-Mt)/(st*We-Ye*Be),ut=st-ri*Ye,wt=Ye+ri*st,bt=ut,Je=-wt,ei=me+Se,li=Math.cos(ei),Qt=Math.sin(ei);return{x1:le*Math.cos(Se),y1:le*Math.sin(Se),x2:ut*li-wt*Qt,y2:ut*Qt+wt*li,x3:bt*li-Je*Qt,y3:bt*Qt+Je*li,x4:le*Math.cos(he),y4:le*Math.sin(he)}},Xe=function(le){return 180*le/Math.PI},we=function(le,Se,he,me,Be,We){var st=le+.5*(he-le),Ye=Se+.5*(me-Se),gt=Be+.5*(he-Be),Mt=We+.5*(me-We),ri=Math.min(le,Be,st,gt),ut=Math.max(le,Be,st,gt),wt=Math.min(Se,We,Ye,Mt),bt=Math.max(Se,We,Ye,Mt);return new r(ri,wt,ut-ri,bt-wt)},Ce=function(le,Se,he,me,Be,We,st,Ye){var gt,Mt,ri,ut,wt,bt,Je,ei,li,Qt,Si,Ti,Xt,mi,Zi=he-le,Ci=me-Se,ti=Be-he,Me=We-me,Q=st-Be,ae=Ye-We;for(Mt=0;Mt<41;Mt++)li=(Je=(ri=le+(gt=Mt/40)*Zi)+gt*((wt=he+gt*ti)-ri))+gt*(wt+gt*(Be+gt*Q-wt)-Je),Qt=(ei=(ut=Se+gt*Ci)+gt*((bt=me+gt*Me)-ut))+gt*(bt+gt*(We+gt*ae-bt)-ei),Mt==0?(Si=li,Ti=Qt,Xt=li,mi=Qt):(Si=Math.min(Si,li),Ti=Math.min(Ti,Qt),Xt=Math.max(Xt,li),mi=Math.max(mi,Qt));return new r(Math.round(Si),Math.round(Ti),Math.round(Xt-Si),Math.round(mi-Ti))},Re=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var le,Se,he=(le=this.ctx.lineDash,Se=this.ctx.lineDashOffset,JSON.stringify({lineDash:le,lineDashOffset:Se}));this.prevLineDash!==he&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=he)}}})(Ur.API),function(i){var e=function(u){var m,r,f,_,b,v,w,x,C,T;for(/[^\x00-\xFF]/.test(u),r=[],f=0,_=(u+=m="\0\0\0\0".slice(u.length%4||4)).length;_>f;f+=4)(b=(u.charCodeAt(f)<<24)+(u.charCodeAt(f+1)<<16)+(u.charCodeAt(f+2)<<8)+u.charCodeAt(f+3))!==0?(v=(b=((b=((b=((b=(b-(T=b%85))/85)-(C=b%85))/85)-(x=b%85))/85)-(w=b%85))/85)%85,r.push(v+33,w+33,x+33,C+33,T+33)):r.push(122);return function(S,M){for(var O=M;O>0;O--)S.pop()}(r,m.length),String.fromCharCode.apply(String,r)+"~>"},t=function(u){var m,r,f,_,b,v=String,w="length",x=255,C="charCodeAt",T="slice",S="replace";for(u[T](-2),u=u[T](0,-2)[S](/\s/g,"")[S]("z","!!!!!"),f=[],_=0,b=(u+=m="uuuuu"[T](u[w]%5||5))[w];b>_;_+=5)r=52200625*(u[C](_)-33)+614125*(u[C](_+1)-33)+7225*(u[C](_+2)-33)+85*(u[C](_+3)-33)+(u[C](_+4)-33),f.push(x&r>>24,x&r>>16,x&r>>8,x&r);return function(M,O){for(var V=O;V>0;V--)M.pop()}(f,m[w]),v.fromCharCode.apply(v,f)},o=function(u){var m=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((u=u.replace(/\s/g,"")).indexOf(">")!==-1&&(u=u.substr(0,u.indexOf(">"))),u.length%2&&(u+="0"),m.test(u)===!1)return"";for(var r="",f=0;f<u.length;f+=2)r+=String.fromCharCode("0x"+(u[f]+u[f+1]));return r},l=function(u){for(var m=new Uint8Array(u.length),r=u.length;r--;)m[r]=u.charCodeAt(r);return u=(m=F2(m)).reduce(function(f,_){return f+String.fromCharCode(_)},"")};i.processDataByFilters=function(u,m){var r=0,f=u||"",_=[];for(typeof(m=m||[])=="string"&&(m=[m]),r=0;r<m.length;r+=1)switch(m[r]){case"ASCII85Decode":case"/ASCII85Decode":f=t(f),_.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":f=e(f),_.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":f=o(f),_.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":f=f.split("").map(function(b){return("0"+b.charCodeAt().toString(16)).slice(-2)}).join("")+">",_.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":f=l(f),_.push("/FlateDecode");break;default:throw new Error('The filter: "'+m[r]+'" is not implemented')}return{data:f,reverseChain:_.reverse().join(" ")}}}(Ur.API),function(i){i.loadFile=function(e,t,o){return function(l,u,m){u=u!==!1,m=typeof m=="function"?m:function(){};var r=void 0;try{r=function(f,_,b){var v=new XMLHttpRequest,w=0,x=function(C){var T=C.length,S=[],M=String.fromCharCode;for(w=0;w<T;w+=1)S.push(M(255&C.charCodeAt(w)));return S.join("")};if(v.open("GET",f,!_),v.overrideMimeType("text/plain; charset=x-user-defined"),_===!1&&(v.onload=function(){v.status===200?b(x(this.responseText)):b(void 0)}),v.send(null),_&&v.status===200)return x(v.responseText)}(l,u,m)}catch{}return r}(e,t,o)},i.loadImageFile=i.loadFile}(Ur.API),function(i){function e(){return(Vr.html2canvas?Promise.resolve(Vr.html2canvas):d1(()=>import("./html2canvas.esm-fb42d204.js"),[],import.meta.url)).catch(function(m){return Promise.reject(new Error("Could not load html2canvas: "+m))}).then(function(m){return m.default?m.default:m})}function t(){return(Vr.DOMPurify?Promise.resolve(Vr.DOMPurify):d1(()=>import("./purify.es-20117e50.js"),[],import.meta.url)).catch(function(m){return Promise.reject(new Error("Could not load dompurify: "+m))}).then(function(m){return m.default?m.default:m})}var o=function(m){var r=es(m);return r==="undefined"?"undefined":r==="string"||m instanceof String?"string":r==="number"||m instanceof Number?"number":r==="function"||m instanceof Function?"function":m&&m.constructor===Array?"array":m&&m.nodeType===1?"element":r==="object"?"object":"unknown"},l=function(m,r){var f=document.createElement(m);for(var _ in r.className&&(f.className=r.className),r.innerHTML&&r.dompurify&&(f.innerHTML=r.dompurify.sanitize(r.innerHTML)),r.style)f.style[_]=r.style[_];return f},u=function m(r){var f=Object.assign(m.convert(Promise.resolve()),JSON.parse(JSON.stringify(m.template))),_=m.convert(Promise.resolve(),f);return _=(_=_.setProgress(1,m,1,[m])).set(r)};(u.prototype=Object.create(Promise.prototype)).constructor=u,u.convert=function(m,r){return m.__proto__=r||u.prototype,m},u.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},u.prototype.from=function(m,r){return this.then(function(){switch(r=r||function(f){switch(o(f)){case"string":return"string";case"element":return f.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(m)){case"string":return this.then(t).then(function(f){return this.set({src:l("div",{innerHTML:m,dompurify:f})})});case"element":return this.set({src:m});case"canvas":return this.set({canvas:m});case"img":return this.set({img:m});default:return this.error("Unknown source type.")}})},u.prototype.to=function(m){switch(m){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},u.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var m={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},r=function f(_,b){for(var v=_.nodeType===3?document.createTextNode(_.nodeValue):_.cloneNode(!1),w=_.firstChild;w;w=w.nextSibling)b!==!0&&w.nodeType===1&&w.nodeName==="SCRIPT"||v.appendChild(f(w,b));return _.nodeType===1&&(_.nodeName==="CANVAS"?(v.width=_.width,v.height=_.height,v.getContext("2d").drawImage(_,0,0)):_.nodeName!=="TEXTAREA"&&_.nodeName!=="SELECT"||(v.value=_.value),v.addEventListener("load",function(){v.scrollTop=_.scrollTop,v.scrollLeft=_.scrollLeft},!0)),v}(this.prop.src,this.opt.html2canvas.javascriptEnabled);r.tagName==="BODY"&&(m.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=l("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=l("div",{className:"html2pdf__container",style:m}),this.prop.container.appendChild(r),this.prop.container.firstChild.appendChild(l("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},u.prototype.toCanvas=function(){var m=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(m).then(e).then(function(r){var f=Object.assign({},this.opt.html2canvas);return delete f.onrendered,r(this.prop.container,f)}).then(function(r){(this.opt.html2canvas.onrendered||function(){})(r),this.prop.canvas=r,document.body.removeChild(this.prop.overlay)})},u.prototype.toContext2d=function(){var m=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(m).then(e).then(function(r){var f=this.opt.jsPDF,_=this.opt.fontFaces,b=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,v=Object.assign({async:!0,allowTaint:!0,scale:b,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete v.onrendered,f.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,f.context2d.posX=this.opt.x,f.context2d.posY=this.opt.y,f.context2d.margin=this.opt.margin,f.context2d.fontFaces=_,_)for(var w=0;w<_.length;++w){var x=_[w],C=x.src.find(function(T){return T.format==="truetype"});C&&f.addFont(C.url,x.ref.name,x.ref.style)}return v.windowHeight=v.windowHeight||0,v.windowHeight=v.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):v.windowHeight,f.context2d.save(!0),r(this.prop.container,v)}).then(function(r){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(r),this.prop.canvas=r,document.body.removeChild(this.prop.overlay)})},u.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var m=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=m})},u.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},u.prototype.output=function(m,r,f){return(f=f||"pdf").toLowerCase()==="img"||f.toLowerCase()==="image"?this.outputImg(m,r):this.outputPdf(m,r)},u.prototype.outputPdf=function(m,r){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(m,r)})},u.prototype.outputImg=function(m){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(m){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+m+'" is not supported.'}})},u.prototype.save=function(m){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(m?{filename:m}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},u.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},u.prototype.set=function(m){if(o(m)!=="object")return this;var r=Object.keys(m||{}).map(function(f){if(f in u.template.prop)return function(){this.prop[f]=m[f]};switch(f){case"margin":return this.setMargin.bind(this,m.margin);case"jsPDF":return function(){return this.opt.jsPDF=m.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,m.pageSize);default:return function(){this.opt[f]=m[f]}}},this);return this.then(function(){return this.thenList(r)})},u.prototype.get=function(m,r){return this.then(function(){var f=m in u.template.prop?this.prop[m]:this.opt[m];return r?r(f):f})},u.prototype.setMargin=function(m){return this.then(function(){switch(o(m)){case"number":m=[m,m,m,m];case"array":if(m.length===2&&(m=[m[0],m[1],m[0],m[1]]),m.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=m}).then(this.setPageSize)},u.prototype.setPageSize=function(m){function r(f,_){return Math.floor(f*_/72*96)}return this.then(function(){(m=m||Ur.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(m.inner={width:m.width-this.opt.margin[1]-this.opt.margin[3],height:m.height-this.opt.margin[0]-this.opt.margin[2]},m.inner.px={width:r(m.inner.width,m.k),height:r(m.inner.height,m.k)},m.inner.ratio=m.inner.height/m.inner.width),this.prop.pageSize=m})},u.prototype.setProgress=function(m,r,f,_){return m!=null&&(this.progress.val=m),r!=null&&(this.progress.state=r),f!=null&&(this.progress.n=f),_!=null&&(this.progress.stack=_),this.progress.ratio=this.progress.val/this.progress.state,this},u.prototype.updateProgress=function(m,r,f,_){return this.setProgress(m?this.progress.val+m:null,r||null,f?this.progress.n+f:null,_?this.progress.stack.concat(_):null)},u.prototype.then=function(m,r){var f=this;return this.thenCore(m,r,function(_,b){return f.updateProgress(null,null,1,[_]),Promise.prototype.then.call(this,function(v){return f.updateProgress(null,_),v}).then(_,b).then(function(v){return f.updateProgress(1),v})})},u.prototype.thenCore=function(m,r,f){f=f||Promise.prototype.then,m&&(m=m.bind(this)),r&&(r=r.bind(this));var _=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?this:u.convert(Object.assign({},this),Promise.prototype),b=f.call(_,m,r);return u.convert(b,this.__proto__)},u.prototype.thenExternal=function(m,r){return Promise.prototype.then.call(this,m,r)},u.prototype.thenList=function(m){var r=this;return m.forEach(function(f){r=r.thenCore(f)}),r},u.prototype.catch=function(m){m&&(m=m.bind(this));var r=Promise.prototype.catch.call(this,m);return u.convert(r,this)},u.prototype.catchExternal=function(m){return Promise.prototype.catch.call(this,m)},u.prototype.error=function(m){return this.then(function(){throw new Error(m)})},u.prototype.using=u.prototype.set,u.prototype.saveAs=u.prototype.save,u.prototype.export=u.prototype.output,u.prototype.run=u.prototype.then,Ur.getPageSize=function(m,r,f){if(es(m)==="object"){var _=m;m=_.orientation,r=_.unit||r,f=_.format||f}r=r||"mm",f=f||"a4",m=(""+(m||"P")).toLowerCase();var b,v=(""+f).toLowerCase(),w={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(r){case"pt":b=1;break;case"mm":b=72/25.4;break;case"cm":b=72/2.54;break;case"in":b=72;break;case"px":b=.75;break;case"pc":case"em":b=12;break;case"ex":b=6;break;default:throw"Invalid unit: "+r}var x,C=0,T=0;if(w.hasOwnProperty(v))C=w[v][1]/b,T=w[v][0]/b;else try{C=f[1],T=f[0]}catch{throw new Error("Invalid format: "+f)}if(m==="p"||m==="portrait")m="p",T>C&&(x=T,T=C,C=x);else{if(m!=="l"&&m!=="landscape")throw"Invalid orientation: "+m;m="l",C>T&&(x=T,T=C,C=x)}return{width:T,height:C,unit:r,k:b,orientation:m}},i.html=function(m,r){(r=r||{}).callback=r.callback||function(){},r.html2canvas=r.html2canvas||{},r.html2canvas.canvas=r.html2canvas.canvas||this.canvas,r.jsPDF=r.jsPDF||this,r.fontFaces=r.fontFaces?r.fontFaces.map(U2):null;var f=new u(r);return r.worker?f:f.from(m).doCallback()}}(Ur.API),Ur.API.addJS=function(i){return f_=i,this.internal.events.subscribe("postPutResources",function(){zp=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(zp+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),h_=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+f_+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){zp!==void 0&&h_!==void 0&&this.internal.out("/Names <</JavaScript "+zp+" 0 R>>")}),this},function(i){var e;i.events.push(["postPutResources",function(){var t=this,o=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var l=t.outline.render().split(/\r\n/),u=0;u<l.length;u++){var m=l[u],r=o.exec(m);if(r!=null){var f=r[1];t.internal.newObjectDeferredBegin(f,!1)}t.internal.write(m)}if(this.outline.createNamedDestinations){var _=this.internal.pages.length,b=[];for(u=0;u<_;u++){var v=t.internal.newObject();b.push(v);var w=t.internal.getPageInfo(u+1);t.internal.write("<< /D["+w.objId+" 0 R /XYZ null null null]>> endobj")}var x=t.internal.newObject();for(t.internal.write("<< /Names [ "),u=0;u<b.length;u++)t.internal.write("(page_"+(u+1)+")"+b[u]+" 0 R");t.internal.write(" ] >>","endobj"),e=t.internal.newObject(),t.internal.write("<< /Dests "+x+" 0 R"),t.internal.write(">>","endobj")}}]),i.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+e+" 0 R"))}]),i.events.push(["initialized",function(){var t=this;t.outline={createNamedDestinations:!1,root:{children:[]}},t.outline.add=function(o,l,u){var m={title:l,options:u,children:[]};return o==null&&(o=this.root),o.children.push(m),m},t.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=t,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},t.outline.genIds_r=function(o){o.id=t.internal.newObjectDeferred();for(var l=0;l<o.children.length;l++)this.genIds_r(o.children[l])},t.outline.renderRoot=function(o){this.objStart(o),this.line("/Type /Outlines"),o.children.length>0&&(this.line("/First "+this.makeRef(o.children[0])),this.line("/Last "+this.makeRef(o.children[o.children.length-1]))),this.line("/Count "+this.count_r({count:0},o)),this.objEnd()},t.outline.renderItems=function(o){for(var l=this.ctx.pdf.internal.getVerticalCoordinateString,u=0;u<o.children.length;u++){var m=o.children[u];this.objStart(m),this.line("/Title "+this.makeString(m.title)),this.line("/Parent "+this.makeRef(o)),u>0&&this.line("/Prev "+this.makeRef(o.children[u-1])),u<o.children.length-1&&this.line("/Next "+this.makeRef(o.children[u+1])),m.children.length>0&&(this.line("/First "+this.makeRef(m.children[0])),this.line("/Last "+this.makeRef(m.children[m.children.length-1])));var r=this.count=this.count_r({count:0},m);if(r>0&&this.line("/Count "+r),m.options&&m.options.pageNumber){var f=t.internal.getPageInfo(m.options.pageNumber);this.line("/Dest ["+f.objId+" 0 R /XYZ 0 "+l(0)+" 0]")}this.objEnd()}for(var _=0;_<o.children.length;_++)this.renderItems(o.children[_])},t.outline.line=function(o){this.ctx.val+=o+`\r
`},t.outline.makeRef=function(o){return o.id+" 0 R"},t.outline.makeString=function(o){return"("+t.internal.pdfEscape(o)+")"},t.outline.objStart=function(o){this.ctx.val+=`\r
`+o.id+` 0 obj\r
<<\r
`},t.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},t.outline.count_r=function(o,l){for(var u=0;u<l.children.length;u++)o.count++,this.count_r(o,l.children[u]);return o.count}}])}(Ur.API),function(i){var e=[192,193,194,195,196,197,198,199];i.processJPEG=function(t,o,l,u,m,r){var f,_=this.decode.DCT_DECODE,b=null;if(typeof t=="string"||this.__addimage__.isArrayBuffer(t)||this.__addimage__.isArrayBufferView(t)){switch(t=m||t,t=this.__addimage__.isArrayBuffer(t)?new Uint8Array(t):t,(f=function(v){for(var w,x=256*v.charCodeAt(4)+v.charCodeAt(5),C=v.length,T={width:0,height:0,numcomponents:1},S=4;S<C;S+=2){if(S+=x,e.indexOf(v.charCodeAt(S+1))!==-1){w=256*v.charCodeAt(S+5)+v.charCodeAt(S+6),T={width:256*v.charCodeAt(S+7)+v.charCodeAt(S+8),height:w,numcomponents:v.charCodeAt(S+9)};break}x=256*v.charCodeAt(S+2)+v.charCodeAt(S+3)}return T}(t=this.__addimage__.isArrayBufferView(t)?this.__addimage__.arrayBufferToBinaryString(t):t)).numcomponents){case 1:r=this.color_spaces.DEVICE_GRAY;break;case 4:r=this.color_spaces.DEVICE_CMYK;break;case 3:r=this.color_spaces.DEVICE_RGB}b={data:t,width:f.width,height:f.height,colorSpace:r,bitsPerComponent:8,filter:_,index:o,alias:l}}return b}}(Ur.API);var b0,Np,d_,p_,m_,v8=function(){var i,e,t;function o(u){var m,r,f,_,b,v,w,x,C,T,S,M,O,V;for(this.data=u,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},v=null;;){switch(m=this.readUInt32(),C=function(){var X,Z;for(Z=[],X=0;X<4;++X)Z.push(String.fromCharCode(this.data[this.pos++]));return Z}.call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(m);break;case"fcTL":v&&this.animation.frames.push(v),this.pos+=4,v={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},b=this.readUInt16(),_=this.readUInt16()||100,v.delay=1e3*b/_,v.disposeOp=this.data[this.pos++],v.blendOp=this.data[this.pos++],v.data=[];break;case"IDAT":case"fdAT":for(C==="fdAT"&&(this.pos+=4,m-=4),u=(v!=null?v.data:void 0)||this.imgData,M=0;0<=m?M<m:M>m;0<=m?++M:--M)u.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(f=this.palette.length/3,this.transparency.indexed=this.read(m),this.transparency.indexed.length>f)throw new Error("More transparent colors than palette size");if((T=f-this.transparency.indexed.length)>0)for(O=0;0<=T?O<T:O>T;0<=T?++O:--O)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(m)[0];break;case 2:this.transparency.rgb=this.read(m)}break;case"tEXt":w=(S=this.read(m)).indexOf(0),x=String.fromCharCode.apply(String,S.slice(0,w)),this.text[x]=String.fromCharCode.apply(String,S.slice(w+1));break;case"IEND":return v&&this.animation.frames.push(v),this.colors=function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}.call(this),this.hasAlphaChannel=(V=this.colorType)===4||V===6,r=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*r,this.colorSpace=function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}.call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=m}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}o.prototype.read=function(u){var m,r;for(r=[],m=0;0<=u?m<u:m>u;0<=u?++m:--m)r.push(this.data[this.pos++]);return r},o.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},o.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},o.prototype.decodePixels=function(u){var m=this.pixelBitlength/8,r=new Uint8Array(this.width*this.height*m),f=0,_=this;if(u==null&&(u=this.imgData),u.length===0)return new Uint8Array(0);function b(v,w,x,C){var T,S,M,O,V,X,Z,te,J,ie,Ee,Pe,de,Te,ve,_e,ot,it,It,Xe,we,Ce=Math.ceil((_.width-v)/x),Re=Math.ceil((_.height-w)/C),le=_.width==Ce&&_.height==Re;for(Te=m*Ce,Pe=le?r:new Uint8Array(Te*Re),X=u.length,de=0,S=0;de<Re&&f<X;){switch(u[f++]){case 0:for(O=ot=0;ot<Te;O=ot+=1)Pe[S++]=u[f++];break;case 1:for(O=it=0;it<Te;O=it+=1)T=u[f++],V=O<m?0:Pe[S-m],Pe[S++]=(T+V)%256;break;case 2:for(O=It=0;It<Te;O=It+=1)T=u[f++],M=(O-O%m)/m,ve=de&&Pe[(de-1)*Te+M*m+O%m],Pe[S++]=(ve+T)%256;break;case 3:for(O=Xe=0;Xe<Te;O=Xe+=1)T=u[f++],M=(O-O%m)/m,V=O<m?0:Pe[S-m],ve=de&&Pe[(de-1)*Te+M*m+O%m],Pe[S++]=(T+Math.floor((V+ve)/2))%256;break;case 4:for(O=we=0;we<Te;O=we+=1)T=u[f++],M=(O-O%m)/m,V=O<m?0:Pe[S-m],de===0?ve=_e=0:(ve=Pe[(de-1)*Te+M*m+O%m],_e=M&&Pe[(de-1)*Te+(M-1)*m+O%m]),Z=V+ve-_e,te=Math.abs(Z-V),ie=Math.abs(Z-ve),Ee=Math.abs(Z-_e),J=te<=ie&&te<=Ee?V:ie<=Ee?ve:_e,Pe[S++]=(T+J)%256;break;default:throw new Error("Invalid filter algorithm: "+u[f-1])}if(!le){var Se=((w+de*C)*_.width+v)*m,he=de*Te;for(O=0;O<Ce;O+=1){for(var me=0;me<m;me+=1)r[Se++]=Pe[he++];Se+=(x-1)*m}}de++}}return u=$6(u),_.interlaceMethod==1?(b(0,0,8,8),b(4,0,8,8),b(0,4,4,8),b(2,0,4,4),b(0,2,2,4),b(1,0,2,2),b(0,1,1,2)):b(0,0,1,1),r},o.prototype.decodePalette=function(){var u,m,r,f,_,b,v,w,x;for(r=this.palette,b=this.transparency.indexed||[],_=new Uint8Array((b.length||0)+r.length),f=0,u=0,m=v=0,w=r.length;v<w;m=v+=3)_[f++]=r[m],_[f++]=r[m+1],_[f++]=r[m+2],_[f++]=(x=b[u++])!=null?x:255;return _},o.prototype.copyToImageData=function(u,m){var r,f,_,b,v,w,x,C,T,S,M;if(f=this.colors,T=null,r=this.hasAlphaChannel,this.palette.length&&(T=(M=this._decodedPalette)!=null?M:this._decodedPalette=this.decodePalette(),f=4,r=!0),C=(_=u.data||u).length,v=T||m,b=w=0,f===1)for(;b<C;)x=T?4*m[b/4]:w,S=v[x++],_[b++]=S,_[b++]=S,_[b++]=S,_[b++]=r?v[x++]:255,w=x;else for(;b<C;)x=T?4*m[b/4]:w,_[b++]=v[x++],_[b++]=v[x++],_[b++]=v[x++],_[b++]=r?v[x++]:255,w=x},o.prototype.decode=function(){var u;return u=new Uint8Array(this.width*this.height*4),this.copyToImageData(u,this.decodePixels()),u};var l=function(){if(Object.prototype.toString.call(Vr)==="[object Window]"){try{e=Vr.document.createElement("canvas"),t=e.getContext("2d")}catch{return!1}return!0}return!1};return l(),i=function(u){var m;if(l()===!0)return t.width=u.width,t.height=u.height,t.clearRect(0,0,u.width,u.height),t.putImageData(u,0,0),(m=new Image).src=e.toDataURL(),m;throw new Error("This method requires a Browser with Canvas-capability.")},o.prototype.decodeFrames=function(u){var m,r,f,_,b,v,w,x;if(this.animation){for(x=[],r=b=0,v=(w=this.animation.frames).length;b<v;r=++b)m=w[r],f=u.createImageData(m.width,m.height),_=this.decodePixels(new Uint8Array(m.data)),this.copyToImageData(f,_),m.imageData=f,x.push(m.image=i(f));return x}},o.prototype.renderFrame=function(u,m){var r,f,_;return r=(f=this.animation.frames)[m],_=f[m-1],m===0&&u.clearRect(0,0,this.width,this.height),(_!=null?_.disposeOp:void 0)===1?u.clearRect(_.xOffset,_.yOffset,_.width,_.height):(_!=null?_.disposeOp:void 0)===2&&u.putImageData(_.imageData,_.xOffset,_.yOffset),r.blendOp===0&&u.clearRect(r.xOffset,r.yOffset,r.width,r.height),u.drawImage(r.image,r.xOffset,r.yOffset)},o.prototype.animate=function(u){var m,r,f,_,b,v,w=this;return r=0,v=this.animation,_=v.numFrames,f=v.frames,b=v.numPlays,(m=function(){var x,C;if(x=r++%_,C=f[x],w.renderFrame(u,x),_>1&&r/_<b)return w.animation._timeout=setTimeout(m,C.delay)})()},o.prototype.stopAnimation=function(){var u;return clearTimeout((u=this.animation)!=null?u._timeout:void 0)},o.prototype.render=function(u){var m,r;return u._png&&u._png.stopAnimation(),u._png=this,u.width=this.width,u.height=this.height,m=u.getContext("2d"),this.animation?(this.decodeFrames(m),this.animate(m)):(r=m.createImageData(this.width,this.height),this.copyToImageData(r,this.decodePixels()),m.putImageData(r,0,0))},o}();/**
 * @license
 *
 * Copyright (c) 2014 James Robb, https://github.com/jamesbrobb
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * ====================================================================
 *//**
 * @license
 * (c) Dean McNamee <dean@gmail.com>, 2013.
 *
 * https://github.com/deanm/omggif
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to
 * deal in the Software without restriction, including without limitation the
 * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
 * sell copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
 * IN THE SOFTWARE.
 *
 * omggif is a JavaScript implementation of a GIF 89a encoder and decoder,
 * including animation and compression.  It does not rely on any specific
 * underlying system, so should run in the browser, Node, or Plask.
 */function b8(i){var e=0;if(i[e++]!==71||i[e++]!==73||i[e++]!==70||i[e++]!==56||(i[e++]+1&253)!=56||i[e++]!==97)throw new Error("Invalid GIF 87a/89a header.");var t=i[e++]|i[e++]<<8,o=i[e++]|i[e++]<<8,l=i[e++],u=l>>7,m=1<<(7&l)+1;i[e++],i[e++];var r=null,f=null;u&&(r=e,f=m,e+=3*m);var _=!0,b=[],v=0,w=null,x=0,C=null;for(this.width=t,this.height=o;_&&e<i.length;)switch(i[e++]){case 33:switch(i[e++]){case 255:if(i[e]!==11||i[e+1]==78&&i[e+2]==69&&i[e+3]==84&&i[e+4]==83&&i[e+5]==67&&i[e+6]==65&&i[e+7]==80&&i[e+8]==69&&i[e+9]==50&&i[e+10]==46&&i[e+11]==48&&i[e+12]==3&&i[e+13]==1&&i[e+16]==0)e+=14,C=i[e++]|i[e++]<<8,e++;else for(e+=12;;){if(!((de=i[e++])>=0))throw Error("Invalid block size");if(de===0)break;e+=de}break;case 249:if(i[e++]!==4||i[e+4]!==0)throw new Error("Invalid graphics extension block.");var T=i[e++];v=i[e++]|i[e++]<<8,w=i[e++],(1&T)==0&&(w=null),x=T>>2&7,e++;break;case 254:for(;;){if(!((de=i[e++])>=0))throw Error("Invalid block size");if(de===0)break;e+=de}break;default:throw new Error("Unknown graphic control label: 0x"+i[e-1].toString(16))}break;case 44:var S=i[e++]|i[e++]<<8,M=i[e++]|i[e++]<<8,O=i[e++]|i[e++]<<8,V=i[e++]|i[e++]<<8,X=i[e++],Z=X>>6&1,te=1<<(7&X)+1,J=r,ie=f,Ee=!1;X>>7&&(Ee=!0,J=e,ie=te,e+=3*te);var Pe=e;for(e++;;){var de;if(!((de=i[e++])>=0))throw Error("Invalid block size");if(de===0)break;e+=de}b.push({x:S,y:M,width:O,height:V,has_local_palette:Ee,palette_offset:J,palette_size:ie,data_offset:Pe,data_length:e-Pe,transparent_index:w,interlaced:!!Z,delay:v,disposal:x});break;case 59:_=!1;break;default:throw new Error("Unknown gif block: 0x"+i[e-1].toString(16))}this.numFrames=function(){return b.length},this.loopCount=function(){return C},this.frameInfo=function(Te){if(Te<0||Te>=b.length)throw new Error("Frame index out of range.");return b[Te]},this.decodeAndBlitFrameBGRA=function(Te,ve){var _e=this.frameInfo(Te),ot=_e.width*_e.height,it=new Uint8Array(ot);g_(i,_e.data_offset,it,ot);var It=_e.palette_offset,Xe=_e.transparent_index;Xe===null&&(Xe=256);var we=_e.width,Ce=t-we,Re=we,le=4*(_e.y*t+_e.x),Se=4*((_e.y+_e.height)*t+_e.x),he=le,me=4*Ce;_e.interlaced===!0&&(me+=4*t*7);for(var Be=8,We=0,st=it.length;We<st;++We){var Ye=it[We];if(Re===0&&(Re=we,(he+=me)>=Se&&(me=4*Ce+4*t*(Be-1),he=le+(we+Ce)*(Be<<1),Be>>=1)),Ye===Xe)he+=4;else{var gt=i[It+3*Ye],Mt=i[It+3*Ye+1],ri=i[It+3*Ye+2];ve[he++]=ri,ve[he++]=Mt,ve[he++]=gt,ve[he++]=255}--Re}},this.decodeAndBlitFrameRGBA=function(Te,ve){var _e=this.frameInfo(Te),ot=_e.width*_e.height,it=new Uint8Array(ot);g_(i,_e.data_offset,it,ot);var It=_e.palette_offset,Xe=_e.transparent_index;Xe===null&&(Xe=256);var we=_e.width,Ce=t-we,Re=we,le=4*(_e.y*t+_e.x),Se=4*((_e.y+_e.height)*t+_e.x),he=le,me=4*Ce;_e.interlaced===!0&&(me+=4*t*7);for(var Be=8,We=0,st=it.length;We<st;++We){var Ye=it[We];if(Re===0&&(Re=we,(he+=me)>=Se&&(me=4*Ce+4*t*(Be-1),he=le+(we+Ce)*(Be<<1),Be>>=1)),Ye===Xe)he+=4;else{var gt=i[It+3*Ye],Mt=i[It+3*Ye+1],ri=i[It+3*Ye+2];ve[he++]=gt,ve[he++]=Mt,ve[he++]=ri,ve[he++]=255}--Re}}}function g_(i,e,t,o){for(var l=i[e++],u=1<<l,m=u+1,r=m+1,f=l+1,_=(1<<f)-1,b=0,v=0,w=0,x=i[e++],C=new Int32Array(4096),T=null;;){for(;b<16&&x!==0;)v|=i[e++]<<b,b+=8,x===1?x=i[e++]:--x;if(b<f)break;var S=v&_;if(v>>=f,b-=f,S!==u){if(S===m)break;for(var M=S<r?S:T,O=0,V=M;V>u;)V=C[V]>>8,++O;var X=V;if(w+O+(M!==S?1:0)>o)return void hs.log("Warning, gif stream longer than expected.");t[w++]=X;var Z=w+=O;for(M!==S&&(t[w++]=X),V=M;O--;)V=C[V],t[--Z]=255&V,V>>=8;T!==null&&r<4096&&(C[r++]=T<<8|X,r>=_+1&&f<12&&(++f,_=_<<1|1)),T=S}else r=m+1,_=(1<<(f=l+1))-1,T=null}return w!==o&&hs.log("Warning, gif stream shorter than expected."),t}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function Fm(i){var e,t,o,l,u,m=Math.floor,r=new Array(64),f=new Array(64),_=new Array(64),b=new Array(64),v=new Array(65535),w=new Array(65535),x=new Array(64),C=new Array(64),T=[],S=0,M=7,O=new Array(64),V=new Array(64),X=new Array(64),Z=new Array(256),te=new Array(2048),J=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],ie=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],Ee=[0,1,2,3,4,5,6,7,8,9,10,11],Pe=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],de=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],Te=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],ve=[0,1,2,3,4,5,6,7,8,9,10,11],_e=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],ot=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function it(le,Se){for(var he=0,me=0,Be=new Array,We=1;We<=16;We++){for(var st=1;st<=le[We];st++)Be[Se[me]]=[],Be[Se[me]][0]=he,Be[Se[me]][1]=We,me++,he++;he*=2}return Be}function It(le){for(var Se=le[0],he=le[1]-1;he>=0;)Se&1<<he&&(S|=1<<M),he--,--M<0&&(S==255?(Xe(255),Xe(0)):Xe(S),M=7,S=0)}function Xe(le){T.push(le)}function we(le){Xe(le>>8&255),Xe(255&le)}function Ce(le,Se,he,me,Be){for(var We,st=Be[0],Ye=Be[240],gt=function(Qt,Si){var Ti,Xt,mi,Zi,Ci,ti,Me,Q,ae,$e,_t=0;for(ae=0;ae<8;++ae){Ti=Qt[_t],Xt=Qt[_t+1],mi=Qt[_t+2],Zi=Qt[_t+3],Ci=Qt[_t+4],ti=Qt[_t+5],Me=Qt[_t+6];var Kt=Ti+(Q=Qt[_t+7]),di=Ti-Q,wn=Xt+Me,Ln=Xt-Me,fn=mi+ti,Bi=mi-ti,Ki=Zi+Ci,Hn=Zi-Ci,Gn=Kt+Ki,Zr=Kt-Ki,zn=wn+fn,dn=wn-fn;Qt[_t]=Gn+zn,Qt[_t+4]=Gn-zn;var gn=.707106781*(dn+Zr);Qt[_t+2]=Zr+gn,Qt[_t+6]=Zr-gn;var on=.382683433*((Gn=Hn+Bi)-(dn=Ln+di)),Sr=.5411961*Gn+on,Wn=1.306562965*dn+on,gr=.707106781*(zn=Bi+Ln),Kr=di+gr,an=di-gr;Qt[_t+5]=an+Sr,Qt[_t+3]=an-Sr,Qt[_t+1]=Kr+Wn,Qt[_t+7]=Kr-Wn,_t+=8}for(_t=0,ae=0;ae<8;++ae){Ti=Qt[_t],Xt=Qt[_t+8],mi=Qt[_t+16],Zi=Qt[_t+24],Ci=Qt[_t+32],ti=Qt[_t+40],Me=Qt[_t+48];var He=Ti+(Q=Qt[_t+56]),wo=Ti-Q,xo=Xt+Me,co=Xt-Me,Le=mi+ti,Ie=mi-ti,qe=Zi+Ci,ct=Zi-Ci,dt=He+qe,Bt=He-qe,Ge=xo+Le,Yt=xo-Le;Qt[_t]=dt+Ge,Qt[_t+32]=dt-Ge;var Ft=.707106781*(Yt+Bt);Qt[_t+16]=Bt+Ft,Qt[_t+48]=Bt-Ft;var oi=.382683433*((dt=ct+Ie)-(Yt=co+wo)),yt=.5411961*dt+oi,Ri=1.306562965*Yt+oi,Ii=.707106781*(Ge=Ie+co),En=wo+Ii,Sn=wo-Ii;Qt[_t+40]=Sn+yt,Qt[_t+24]=Sn-yt,Qt[_t+8]=En+Ri,Qt[_t+56]=En-Ri,_t++}for(ae=0;ae<64;++ae)$e=Qt[ae]*Si[ae],x[ae]=$e>0?$e+.5|0:$e-.5|0;return x}(le,Se),Mt=0;Mt<64;++Mt)C[J[Mt]]=gt[Mt];var ri=C[0]-he;he=C[0],ri==0?It(me[0]):(It(me[w[We=32767+ri]]),It(v[We]));for(var ut=63;ut>0&&C[ut]==0;)ut--;if(ut==0)return It(st),he;for(var wt,bt=1;bt<=ut;){for(var Je=bt;C[bt]==0&&bt<=ut;)++bt;var ei=bt-Je;if(ei>=16){wt=ei>>4;for(var li=1;li<=wt;++li)It(Ye);ei&=15}We=32767+C[bt],It(Be[(ei<<4)+w[We]]),It(v[We]),bt++}return ut!=63&&It(st),he}function Re(le){le=Math.min(Math.max(le,1),100),u!=le&&(function(Se){for(var he=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],me=0;me<64;me++){var Be=m((he[me]*Se+50)/100);Be=Math.min(Math.max(Be,1),255),r[J[me]]=Be}for(var We=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],st=0;st<64;st++){var Ye=m((We[st]*Se+50)/100);Ye=Math.min(Math.max(Ye,1),255),f[J[st]]=Ye}for(var gt=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],Mt=0,ri=0;ri<8;ri++)for(var ut=0;ut<8;ut++)_[Mt]=1/(r[J[Mt]]*gt[ri]*gt[ut]*8),b[Mt]=1/(f[J[Mt]]*gt[ri]*gt[ut]*8),Mt++}(le<50?Math.floor(5e3/le):Math.floor(200-2*le)),u=le)}this.encode=function(le,Se){Se&&Re(Se),T=new Array,S=0,M=7,we(65496),we(65504),we(16),Xe(74),Xe(70),Xe(73),Xe(70),Xe(0),Xe(1),Xe(1),Xe(0),we(1),we(1),Xe(0),Xe(0),function(){we(65499),we(132),Xe(0);for(var Xt=0;Xt<64;Xt++)Xe(r[Xt]);Xe(1);for(var mi=0;mi<64;mi++)Xe(f[mi])}(),function(Xt,mi){we(65472),we(17),Xe(8),we(mi),we(Xt),Xe(3),Xe(1),Xe(17),Xe(0),Xe(2),Xe(17),Xe(1),Xe(3),Xe(17),Xe(1)}(le.width,le.height),function(){we(65476),we(418),Xe(0);for(var Xt=0;Xt<16;Xt++)Xe(ie[Xt+1]);for(var mi=0;mi<=11;mi++)Xe(Ee[mi]);Xe(16);for(var Zi=0;Zi<16;Zi++)Xe(Pe[Zi+1]);for(var Ci=0;Ci<=161;Ci++)Xe(de[Ci]);Xe(1);for(var ti=0;ti<16;ti++)Xe(Te[ti+1]);for(var Me=0;Me<=11;Me++)Xe(ve[Me]);Xe(17);for(var Q=0;Q<16;Q++)Xe(_e[Q+1]);for(var ae=0;ae<=161;ae++)Xe(ot[ae])}(),we(65498),we(12),Xe(3),Xe(1),Xe(0),Xe(2),Xe(17),Xe(3),Xe(17),Xe(0),Xe(63),Xe(0);var he=0,me=0,Be=0;S=0,M=7,this.encode.displayName="_encode_";for(var We,st,Ye,gt,Mt,ri,ut,wt,bt,Je=le.data,ei=le.width,li=le.height,Qt=4*ei,Si=0;Si<li;){for(We=0;We<Qt;){for(Mt=Qt*Si+We,ut=-1,wt=0,bt=0;bt<64;bt++)ri=Mt+(wt=bt>>3)*Qt+(ut=4*(7&bt)),Si+wt>=li&&(ri-=Qt*(Si+1+wt-li)),We+ut>=Qt&&(ri-=We+ut-Qt+4),st=Je[ri++],Ye=Je[ri++],gt=Je[ri++],O[bt]=(te[st]+te[Ye+256>>0]+te[gt+512>>0]>>16)-128,V[bt]=(te[st+768>>0]+te[Ye+1024>>0]+te[gt+1280>>0]>>16)-128,X[bt]=(te[st+1280>>0]+te[Ye+1536>>0]+te[gt+1792>>0]>>16)-128;he=Ce(O,_,he,e,o),me=Ce(V,b,me,t,l),Be=Ce(X,b,Be,t,l),We+=32}Si+=8}if(M>=0){var Ti=[];Ti[1]=M+1,Ti[0]=(1<<M+1)-1,It(Ti)}return we(65497),new Uint8Array(T)},i=i||50,function(){for(var le=String.fromCharCode,Se=0;Se<256;Se++)Z[Se]=le(Se)}(),e=it(ie,Ee),t=it(Te,ve),o=it(Pe,de),l=it(_e,ot),function(){for(var le=1,Se=2,he=1;he<=15;he++){for(var me=le;me<Se;me++)w[32767+me]=he,v[32767+me]=[],v[32767+me][1]=he,v[32767+me][0]=me;for(var Be=-(Se-1);Be<=-le;Be++)w[32767+Be]=he,v[32767+Be]=[],v[32767+Be][1]=he,v[32767+Be][0]=Se-1+Be;le<<=1,Se<<=1}}(),function(){for(var le=0;le<256;le++)te[le]=19595*le,te[le+256>>0]=38470*le,te[le+512>>0]=7471*le+32768,te[le+768>>0]=-11059*le,te[le+1024>>0]=-21709*le,te[le+1280>>0]=32768*le+8421375,te[le+1536>>0]=-27439*le,te[le+1792>>0]=-5329*le}(),Re(i)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function Sc(i,e){if(this.pos=0,this.buffer=i,this.datav=new DataView(i.buffer),this.is_with_alpha=!!e,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function y_(i){function e(ie){if(!ie)throw Error("assert :P")}function t(ie,Ee,Pe){for(var de=0;4>de;de++)if(ie[Ee+de]!=Pe.charCodeAt(de))return!0;return!1}function o(ie,Ee,Pe,de,Te){for(var ve=0;ve<Te;ve++)ie[Ee+ve]=Pe[de+ve]}function l(ie,Ee,Pe,de){for(var Te=0;Te<de;Te++)ie[Ee+Te]=Pe}function u(ie){return new Int32Array(ie)}function m(ie,Ee){for(var Pe=[],de=0;de<ie;de++)Pe.push(new Ee);return Pe}function r(ie,Ee){var Pe=[];return function de(Te,ve,_e){for(var ot=_e[ve],it=0;it<ot&&(Te.push(_e.length>ve+1?[]:new Ee),!(_e.length<ve+1));it++)de(Te[it],ve+1,_e)}(Pe,0,ie),Pe}var f=function(){var ie=this;function Ee(j,K){for(var ue=1<<K-1>>>0;j&ue;)ue>>>=1;return ue?(j&ue-1)+ue:j}function Pe(j,K,ue,be,je){e(!(be%ue));do j[K+(be-=ue)]=je;while(0<be)}function de(j,K,ue,be,je){if(e(2328>=je),512>=je)var Ke=u(512);else if((Ke=u(je))==null)return 0;return function(et,at,pt,St,ai,Ai){var wi,pi,rn=at,Oi=1<<pt,Wt=u(16),ii=u(16);for(e(ai!=0),e(St!=null),e(et!=null),e(0<pt),pi=0;pi<ai;++pi){if(15<St[pi])return 0;++Wt[St[pi]]}if(Wt[0]==ai)return 0;for(ii[1]=0,wi=1;15>wi;++wi){if(Wt[wi]>1<<wi)return 0;ii[wi+1]=ii[wi]+Wt[wi]}for(pi=0;pi<ai;++pi)wi=St[pi],0<St[pi]&&(Ai[ii[wi]++]=pi);if(ii[15]==1)return(St=new Te).g=0,St.value=Ai[0],Pe(et,rn,1,Oi,St),Oi;var Hi,Ji=-1,Ui=Oi-1,Dn=0,Cn=1,kr=1,On=1<<pt;for(pi=0,wi=1,ai=2;wi<=pt;++wi,ai<<=1){if(Cn+=kr<<=1,0>(kr-=Wt[wi]))return 0;for(;0<Wt[wi];--Wt[wi])(St=new Te).g=wi,St.value=Ai[pi++],Pe(et,rn+Dn,ai,On,St),Dn=Ee(Dn,wi)}for(wi=pt+1,ai=2;15>=wi;++wi,ai<<=1){if(Cn+=kr<<=1,0>(kr-=Wt[wi]))return 0;for(;0<Wt[wi];--Wt[wi]){if(St=new Te,(Dn&Ui)!=Ji){for(rn+=On,Hi=1<<(Ji=wi)-pt;15>Ji&&!(0>=(Hi-=Wt[Ji]));)++Ji,Hi<<=1;Oi+=On=1<<(Hi=Ji-pt),et[at+(Ji=Dn&Ui)].g=Hi+pt,et[at+Ji].value=rn-at-Ji}St.g=wi-pt,St.value=Ai[pi++],Pe(et,rn+(Dn>>pt),ai,On,St),Dn=Ee(Dn,wi)}}return Cn!=2*ii[15]-1?0:Oi}(j,K,ue,be,je,Ke)}function Te(){this.value=this.g=0}function ve(){this.value=this.g=0}function _e(){this.G=m(5,Te),this.H=u(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=m(Fs,ve)}function ot(j,K,ue,be){e(j!=null),e(K!=null),e(2147483648>be),j.Ca=254,j.I=0,j.b=-8,j.Ka=0,j.oa=K,j.pa=ue,j.Jd=K,j.Yc=ue+be,j.Zc=4<=be?ue+be-4+1:ue,We(j)}function it(j,K){for(var ue=0;0<K--;)ue|=Ye(j,128)<<K;return ue}function It(j,K){var ue=it(j,K);return st(j)?-ue:ue}function Xe(j,K,ue,be){var je,Ke=0;for(e(j!=null),e(K!=null),e(4294967288>be),j.Sb=be,j.Ra=0,j.u=0,j.h=0,4<be&&(be=4),je=0;je<be;++je)Ke+=K[ue+je]<<8*je;j.Ra=Ke,j.bb=be,j.oa=K,j.pa=ue}function we(j){for(;8<=j.u&&j.bb<j.Sb;)j.Ra>>>=8,j.Ra+=j.oa[j.pa+j.bb]<<Ua-8>>>0,++j.bb,j.u-=8;he(j)&&(j.h=1,j.u=0)}function Ce(j,K){if(e(0<=K),!j.h&&K<=Wl){var ue=Se(j)&gu[K];return j.u+=K,we(j),ue}return j.h=1,j.u=0}function Re(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function le(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function Se(j){return j.Ra>>>(j.u&Ua-1)>>>0}function he(j){return e(j.bb<=j.Sb),j.h||j.bb==j.Sb&&j.u>Ua}function me(j,K){j.u=K,j.h=he(j)}function Be(j){j.u>=yu&&(e(j.u>=yu),we(j))}function We(j){e(j!=null&&j.oa!=null),j.pa<j.Zc?(j.I=(j.oa[j.pa++]|j.I<<8)>>>0,j.b+=8):(e(j!=null&&j.oa!=null),j.pa<j.Yc?(j.b+=8,j.I=j.oa[j.pa++]|j.I<<8):j.Ka?j.b=0:(j.I<<=8,j.b+=8,j.Ka=1))}function st(j){return it(j,1)}function Ye(j,K){var ue=j.Ca;0>j.b&&We(j);var be=j.b,je=ue*K>>>8,Ke=(j.I>>>be>je)+0;for(Ke?(ue-=je,j.I-=je+1<<be>>>0):ue=je+1,be=ue,je=0;256<=be;)je+=8,be>>=8;return be=7^je+Rs[be],j.b-=be,j.Ca=(ue<<be)-1,Ke}function gt(j,K,ue){j[K+0]=ue>>24&255,j[K+1]=ue>>16&255,j[K+2]=ue>>8&255,j[K+3]=ue>>0&255}function Mt(j,K){return j[K+0]<<0|j[K+1]<<8}function ri(j,K){return Mt(j,K)|j[K+2]<<16}function ut(j,K){return Mt(j,K)|Mt(j,K+2)<<16}function wt(j,K){var ue=1<<K;return e(j!=null),e(0<K),j.X=u(ue),j.X==null?0:(j.Mb=32-K,j.Xa=K,1)}function bt(j,K){e(j!=null),e(K!=null),e(j.Xa==K.Xa),o(K.X,0,j.X,0,1<<K.Xa)}function Je(){this.X=[],this.Xa=this.Mb=0}function ei(j,K,ue,be){e(ue!=null),e(be!=null);var je=ue[0],Ke=be[0];return je==0&&(je=(j*Ke+K/2)/K),Ke==0&&(Ke=(K*je+j/2)/j),0>=je||0>=Ke?0:(ue[0]=je,be[0]=Ke,1)}function li(j,K){return j+(1<<K)-1>>>K}function Qt(j,K){return((4278255360&j)+(4278255360&K)>>>0&4278255360)+((16711935&j)+(16711935&K)>>>0&16711935)>>>0}function Si(j,K){ie[K]=function(ue,be,je,Ke,et,at,pt){var St;for(St=0;St<et;++St){var ai=ie[j](at[pt+St-1],je,Ke+St);at[pt+St]=Qt(ue[be+St],ai)}}}function Ti(){this.ud=this.hd=this.jd=0}function Xt(j,K){return((4278124286&(j^K))>>>1)+(j&K)>>>0}function mi(j){return 0<=j&&256>j?j:0>j?0:255<j?255:void 0}function Zi(j,K){return mi(j+(j-K+.5>>1))}function Ci(j,K,ue){return Math.abs(K-ue)-Math.abs(j-ue)}function ti(j,K,ue,be,je,Ke,et){for(be=Ke[et-1],ue=0;ue<je;++ue)Ke[et+ue]=be=Qt(j[K+ue],be)}function Me(j,K,ue,be,je){var Ke;for(Ke=0;Ke<ue;++Ke){var et=j[K+Ke],at=et>>8&255,pt=16711935&(pt=(pt=16711935&et)+((at<<16)+at));be[je+Ke]=(4278255360&et)+pt>>>0}}function Q(j,K){K.jd=j>>0&255,K.hd=j>>8&255,K.ud=j>>16&255}function ae(j,K,ue,be,je,Ke){var et;for(et=0;et<be;++et){var at=K[ue+et],pt=at>>>8,St=at,ai=255&(ai=(ai=at>>>16)+((j.jd<<24>>24)*(pt<<24>>24)>>>5));St=255&(St=(St=St+((j.hd<<24>>24)*(pt<<24>>24)>>>5))+((j.ud<<24>>24)*(ai<<24>>24)>>>5)),je[Ke+et]=(4278255360&at)+(ai<<16)+St}}function $e(j,K,ue,be,je){ie[K]=function(Ke,et,at,pt,St,ai,Ai,wi,pi){for(pt=Ai;pt<wi;++pt)for(Ai=0;Ai<pi;++Ai)St[ai++]=je(at[be(Ke[et++])])},ie[j]=function(Ke,et,at,pt,St,ai,Ai){var wi=8>>Ke.b,pi=Ke.Ea,rn=Ke.K[0],Oi=Ke.w;if(8>wi)for(Ke=(1<<Ke.b)-1,Oi=(1<<wi)-1;et<at;++et){var Wt,ii=0;for(Wt=0;Wt<pi;++Wt)Wt&Ke||(ii=be(pt[St++])),ai[Ai++]=je(rn[ii&Oi]),ii>>=wi}else ie["VP8LMapColor"+ue](pt,St,rn,Oi,ai,Ai,et,at,pi)}}function _t(j,K,ue,be,je){for(ue=K+ue;K<ue;){var Ke=j[K++];be[je++]=Ke>>16&255,be[je++]=Ke>>8&255,be[je++]=Ke>>0&255}}function Kt(j,K,ue,be,je){for(ue=K+ue;K<ue;){var Ke=j[K++];be[je++]=Ke>>16&255,be[je++]=Ke>>8&255,be[je++]=Ke>>0&255,be[je++]=Ke>>24&255}}function di(j,K,ue,be,je){for(ue=K+ue;K<ue;){var Ke=(et=j[K++])>>16&240|et>>12&15,et=et>>0&240|et>>28&15;be[je++]=Ke,be[je++]=et}}function wn(j,K,ue,be,je){for(ue=K+ue;K<ue;){var Ke=(et=j[K++])>>16&248|et>>13&7,et=et>>5&224|et>>3&31;be[je++]=Ke,be[je++]=et}}function Ln(j,K,ue,be,je){for(ue=K+ue;K<ue;){var Ke=j[K++];be[je++]=Ke>>0&255,be[je++]=Ke>>8&255,be[je++]=Ke>>16&255}}function fn(j,K,ue,be,je,Ke){if(Ke==0)for(ue=K+ue;K<ue;)gt(be,((Ke=j[K++])[0]>>24|Ke[1]>>8&65280|Ke[2]<<8&16711680|Ke[3]<<24)>>>0),je+=32;else o(be,je,j,K,ue)}function Bi(j,K){ie[K][0]=ie[j+"0"],ie[K][1]=ie[j+"1"],ie[K][2]=ie[j+"2"],ie[K][3]=ie[j+"3"],ie[K][4]=ie[j+"4"],ie[K][5]=ie[j+"5"],ie[K][6]=ie[j+"6"],ie[K][7]=ie[j+"7"],ie[K][8]=ie[j+"8"],ie[K][9]=ie[j+"9"],ie[K][10]=ie[j+"10"],ie[K][11]=ie[j+"11"],ie[K][12]=ie[j+"12"],ie[K][13]=ie[j+"13"],ie[K][14]=ie[j+"0"],ie[K][15]=ie[j+"0"]}function Ki(j){return j==No||j==xu||j==Au||j==Bc}function Hn(){this.eb=[],this.size=this.A=this.fb=0}function Gn(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function Zr(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new Hn,this.f.kb=new Gn,this.sd=null}function zn(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function dn(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function gn(j){return alert("todo:WebPSamplerProcessPlane"),j.T}function on(j,K){var ue=j.T,be=K.ba.f.RGBA,je=be.eb,Ke=be.fb+j.ka*be.A,et=W[K.ba.S],at=j.y,pt=j.O,St=j.f,ai=j.N,Ai=j.ea,wi=j.W,pi=K.cc,rn=K.dc,Oi=K.Mc,Wt=K.Nc,ii=j.ka,Hi=j.ka+j.T,Ji=j.U,Ui=Ji+1>>1;for(ii==0?et(at,pt,null,null,St,ai,Ai,wi,St,ai,Ai,wi,je,Ke,null,null,Ji):(et(K.ec,K.fc,at,pt,pi,rn,Oi,Wt,St,ai,Ai,wi,je,Ke-be.A,je,Ke,Ji),++ue);ii+2<Hi;ii+=2)pi=St,rn=ai,Oi=Ai,Wt=wi,ai+=j.Rc,wi+=j.Rc,Ke+=2*be.A,et(at,(pt+=2*j.fa)-j.fa,at,pt,pi,rn,Oi,Wt,St,ai,Ai,wi,je,Ke-be.A,je,Ke,Ji);return pt+=j.fa,j.j+Hi<j.o?(o(K.ec,K.fc,at,pt,Ji),o(K.cc,K.dc,St,ai,Ui),o(K.Mc,K.Nc,Ai,wi,Ui),ue--):1&Hi||et(at,pt,null,null,St,ai,Ai,wi,St,ai,Ai,wi,je,Ke+be.A,null,null,Ji),ue}function Sr(j,K,ue){var be=j.F,je=[j.J];if(be!=null){var Ke=j.U,et=K.ba.S,at=et==Yl||et==Au;K=K.ba.f.RGBA;var pt=[0],St=j.ka;pt[0]=j.T,j.Kb&&(St==0?--pt[0]:(--St,je[0]-=j.width),j.j+j.ka+j.T==j.o&&(pt[0]=j.o-j.j-St));var ai=K.eb;St=K.fb+St*K.A,j=qu(be,je[0],j.width,Ke,pt,ai,St+(at?0:3),K.A),e(ue==pt),j&&Ki(et)&&Da(ai,St,at,Ke,pt,K.A)}return 0}function Wn(j){var K=j.ma,ue=K.ba.S,be=11>ue,je=ue==lc||ue==wu||ue==Yl||ue==io||ue==12||Ki(ue);if(K.memory=null,K.Ib=null,K.Jb=null,K.Nd=null,!Sl(K.Oa,j,je?11:12))return 0;if(je&&Ki(ue)&&hn(),j.da)alert("todo:use_scaling");else{if(be){if(K.Ib=gn,j.Kb){if(ue=j.U+1>>1,K.memory=u(j.U+2*ue),K.memory==null)return 0;K.ec=K.memory,K.fc=0,K.cc=K.ec,K.dc=K.fc+j.U,K.Mc=K.cc,K.Nc=K.dc+ue,K.Ib=on,hn()}}else alert("todo:EmitYUV");je&&(K.Jb=Sr,be&&hi())}if(be&&!Nt){for(j=0;256>j;++j)Pi[j]=89858*(j-128)+kt>>Pt,Ni[j]=-22014*(j-128)+kt,Vi[j]=-45773*(j-128),Ei[j]=113618*(j-128)+kt>>Pt;for(j=Et;j<si;++j)K=76283*(j-16)+kt>>Pt,cn[j-Et]=Es(K,255),zi[j-Et]=Es(K+8>>4,15);Nt=1}return 1}function gr(j){var K=j.ma,ue=j.U,be=j.T;return e(!(1&j.ka)),0>=ue||0>=be?0:(ue=K.Ib(j,K),K.Jb!=null&&K.Jb(j,K,ue),K.Dc+=ue,1)}function Kr(j){j.ma.memory=null}function an(j,K,ue,be){return Ce(j,8)!=47?0:(K[0]=Ce(j,14)+1,ue[0]=Ce(j,14)+1,be[0]=Ce(j,1),Ce(j,3)!=0?0:!j.h)}function He(j,K){if(4>j)return j+1;var ue=j-2>>1;return(2+(1&j)<<ue)+Ce(K,ue)+1}function wo(j,K){return 120<K?K-120:1<=(ue=((ue=er[K-1])>>4)*j+(8-(15&ue)))?ue:1;var ue}function xo(j,K,ue){var be=Se(ue),je=j[K+=255&be].g-8;return 0<je&&(me(ue,ue.u+8),be=Se(ue),K+=j[K].value,K+=be&(1<<je)-1),me(ue,ue.u+j[K].g),j[K].value}function co(j,K,ue){return ue.g+=j.g,ue.value+=j.value<<K>>>0,e(8>=ue.g),j.g}function Le(j,K,ue){var be=j.xc;return e((K=be==0?0:j.vc[j.md*(ue>>be)+(K>>be)])<j.Wb),j.Ya[K]}function Ie(j,K,ue,be){var je=j.ab,Ke=j.c*K,et=j.C;K=et+K;var at=ue,pt=be;for(be=j.Ta,ue=j.Ua;0<je--;){var St=j.gc[je],ai=et,Ai=K,wi=at,pi=pt,rn=(pt=be,at=ue,St.Ea);switch(e(ai<Ai),e(Ai<=St.nc),St.hc){case 2:Xl(wi,pi,(Ai-ai)*rn,pt,at);break;case 0:var Oi=ai,Wt=Ai,ii=pt,Hi=at,Ji=(On=St).Ea;Oi==0&&(_u(wi,pi,null,null,1,ii,Hi),ti(wi,pi+1,0,0,Ji-1,ii,Hi+1),pi+=Ji,Hi+=Ji,++Oi);for(var Ui=1<<On.b,Dn=Ui-1,Cn=li(Ji,On.b),kr=On.K,On=On.w+(Oi>>On.b)*Cn;Oi<Wt;){var bo=kr,So=On,Yr=1;for(rl(wi,pi,ii,Hi-Ji,1,ii,Hi);Yr<Ji;){var qr=(Yr&~Dn)+Ui;qr>Ji&&(qr=Ji),(0,El[bo[So++]>>8&15])(wi,pi+ +Yr,ii,Hi+Yr-Ji,qr-Yr,ii,Hi+Yr),Yr=qr}pi+=Ji,Hi+=Ji,++Oi&Dn||(On+=Cn)}Ai!=St.nc&&o(pt,at-rn,pt,at+(Ai-ai-1)*rn,rn);break;case 1:for(rn=wi,Wt=pi,Ji=(wi=St.Ea)-(Hi=wi&~(ii=(pi=1<<St.b)-1)),Oi=li(wi,St.b),Ui=St.K,St=St.w+(ai>>St.b)*Oi;ai<Ai;){for(Dn=Ui,Cn=St,kr=new Ti,On=Wt+Hi,bo=Wt+wi;Wt<On;)Q(Dn[Cn++],kr),Bs(kr,rn,Wt,pi,pt,at),Wt+=pi,at+=pi;Wt<bo&&(Q(Dn[Cn++],kr),Bs(kr,rn,Wt,Ji,pt,at),Wt+=Ji,at+=Ji),++ai&ii||(St+=Oi)}break;case 3:if(wi==pt&&pi==at&&0<St.b){for(Wt=pt,wi=rn=at+(Ai-ai)*rn-(Hi=(Ai-ai)*li(St.Ea,St.b)),pi=pt,ii=at,Oi=[],Hi=(Ji=Hi)-1;0<=Hi;--Hi)Oi[Hi]=pi[ii+Hi];for(Hi=Ji-1;0<=Hi;--Hi)Wt[wi+Hi]=Oi[Hi];Ta(St,ai,Ai,pt,rn,pt,at)}else Ta(St,ai,Ai,wi,pi,pt,at)}at=be,pt=ue}pt!=ue&&o(be,ue,at,pt,Ke)}function qe(j,K){var ue=j.V,be=j.Ba+j.c*j.C,je=K-j.C;if(e(K<=j.l.o),e(16>=je),0<je){var Ke=j.l,et=j.Ta,at=j.Ua,pt=Ke.width;if(Ie(j,je,ue,be),je=at=[at],e((ue=j.C)<(be=K)),e(Ke.v<Ke.va),be>Ke.o&&(be=Ke.o),ue<Ke.j){var St=Ke.j-ue;ue=Ke.j,je[0]+=St*pt}if(ue>=be?ue=0:(je[0]+=4*Ke.v,Ke.ka=ue-Ke.j,Ke.U=Ke.va-Ke.v,Ke.T=be-ue,ue=1),ue){if(at=at[0],11>(ue=j.ca).S){var ai=ue.f.RGBA,Ai=(be=ue.S,je=Ke.U,Ke=Ke.T,St=ai.eb,ai.A),wi=Ke;for(ai=ai.fb+j.Ma*ai.A;0<wi--;){var pi=et,rn=at,Oi=je,Wt=St,ii=ai;switch(be){case Va:La(pi,rn,Oi,Wt,ii);break;case lc:Pa(pi,rn,Oi,Wt,ii);break;case No:Pa(pi,rn,Oi,Wt,ii),Da(Wt,ii,0,Oi,1,0);break;case bu:ol(pi,rn,Oi,Wt,ii);break;case wu:fn(pi,rn,Oi,Wt,ii,1);break;case xu:fn(pi,rn,Oi,Wt,ii,1),Da(Wt,ii,0,Oi,1,0);break;case Yl:fn(pi,rn,Oi,Wt,ii,0);break;case Au:fn(pi,rn,Oi,Wt,ii,0),Da(Wt,ii,1,Oi,1,0);break;case io:ra(pi,rn,Oi,Wt,ii);break;case Bc:ra(pi,rn,Oi,Wt,ii),Vu(Wt,ii,Oi,1,0);break;case ya:ls(pi,rn,Oi,Wt,ii);break;default:e(0)}at+=pt,ai+=Ai}j.Ma+=Ke}else alert("todo:EmitRescaledRowsYUVA");e(j.Ma<=ue.height)}}j.C=K,e(j.C<=j.i)}function ct(j){var K;if(0<j.ua)return 0;for(K=0;K<j.Wb;++K){var ue=j.Ya[K].G,be=j.Ya[K].H;if(0<ue[1][be[1]+0].g||0<ue[2][be[2]+0].g||0<ue[3][be[3]+0].g)return 0}return 1}function dt(j,K,ue,be,je,Ke){if(j.Z!=0){var et=j.qd,at=j.rd;for(e(z[j.Z]!=null);K<ue;++K)z[j.Z](et,at,be,je,be,je,Ke),et=be,at=je,je+=Ke;j.qd=et,j.rd=at}}function Bt(j,K){var ue=j.l.ma,be=ue.Z==0||ue.Z==1?j.l.j:j.C;if(be=j.C<be?be:j.C,e(K<=j.l.o),K>be){var je=j.l.width,Ke=ue.ca,et=ue.tb+je*be,at=j.V,pt=j.Ba+j.c*be,St=j.gc;e(j.ab==1),e(St[0].hc==3),Dc(St[0],be,K,at,pt,Ke,et),dt(ue,be,K,Ke,et,je)}j.C=j.Ma=K}function Ge(j,K,ue,be,je,Ke,et){var at=j.$/be,pt=j.$%be,St=j.m,ai=j.s,Ai=ue+j.$,wi=Ai;je=ue+be*je;var pi=ue+be*Ke,rn=280+ai.ua,Oi=j.Pb?at:16777216,Wt=0<ai.ua?ai.Wa:null,ii=ai.wc,Hi=Ai<pi?Le(ai,pt,at):null;e(j.C<Ke),e(pi<=je);var Ji=!1;e:for(;;){for(;Ji||Ai<pi;){var Ui=0;if(at>=Oi){var Dn=Ai-ue;e((Oi=j).Pb),Oi.wd=Oi.m,Oi.xd=Dn,0<Oi.s.ua&&bt(Oi.s.Wa,Oi.s.vb),Oi=at+Hu}if(pt&ii||(Hi=Le(ai,pt,at)),e(Hi!=null),Hi.Qb&&(K[Ai]=Hi.qb,Ji=!0),!Ji)if(Be(St),Hi.jc){Ui=St,Dn=K;var Cn=Ai,kr=Hi.pd[Se(Ui)&Fs-1];e(Hi.jc),256>kr.g?(me(Ui,Ui.u+kr.g),Dn[Cn]=kr.value,Ui=0):(me(Ui,Ui.u+kr.g-256),e(256<=kr.value),Ui=kr.value),Ui==0&&(Ji=!0)}else Ui=xo(Hi.G[0],Hi.H[0],St);if(St.h)break;if(Ji||256>Ui){if(!Ji)if(Hi.nd)K[Ai]=(Hi.qb|Ui<<8)>>>0;else{if(Be(St),Ji=xo(Hi.G[1],Hi.H[1],St),Be(St),Dn=xo(Hi.G[2],Hi.H[2],St),Cn=xo(Hi.G[3],Hi.H[3],St),St.h)break;K[Ai]=(Cn<<24|Ji<<16|Ui<<8|Dn)>>>0}if(Ji=!1,++Ai,++pt>=be&&(pt=0,++at,et!=null&&at<=Ke&&!(at%16)&&et(j,at),Wt!=null))for(;wi<Ai;)Ui=K[wi++],Wt.X[(506832829*Ui&4294967295)>>>Wt.Mb]=Ui}else if(280>Ui){if(Ui=He(Ui-256,St),Dn=xo(Hi.G[4],Hi.H[4],St),Be(St),Dn=wo(be,Dn=He(Dn,St)),St.h)break;if(Ai-ue<Dn||je-Ai<Ui)break e;for(Cn=0;Cn<Ui;++Cn)K[Ai+Cn]=K[Ai+Cn-Dn];for(Ai+=Ui,pt+=Ui;pt>=be;)pt-=be,++at,et!=null&&at<=Ke&&!(at%16)&&et(j,at);if(e(Ai<=je),pt&ii&&(Hi=Le(ai,pt,at)),Wt!=null)for(;wi<Ai;)Ui=K[wi++],Wt.X[(506832829*Ui&4294967295)>>>Wt.Mb]=Ui}else{if(!(Ui<rn))break e;for(Ji=Ui-280,e(Wt!=null);wi<Ai;)Ui=K[wi++],Wt.X[(506832829*Ui&4294967295)>>>Wt.Mb]=Ui;Ui=Ai,e(!(Ji>>>(Dn=Wt).Xa)),K[Ui]=Dn.X[Ji],Ji=!0}Ji||e(St.h==he(St))}if(j.Pb&&St.h&&Ai<je)e(j.m.h),j.a=5,j.m=j.wd,j.$=j.xd,0<j.s.ua&&bt(j.s.vb,j.s.Wa);else{if(St.h)break e;et!=null&&et(j,at>Ke?Ke:at),j.a=0,j.$=Ai-ue}return 1}return j.a=3,0}function Yt(j){e(j!=null),j.vc=null,j.yc=null,j.Ya=null;var K=j.Wa;K!=null&&(K.X=null),j.vb=null,e(j!=null)}function Ft(){var j=new Bu;return j==null?null:(j.a=0,j.xb=D,Bi("Predictor","VP8LPredictors"),Bi("Predictor","VP8LPredictors_C"),Bi("PredictorAdd","VP8LPredictorsAdd"),Bi("PredictorAdd","VP8LPredictorsAdd_C"),Xl=Me,Bs=ae,La=_t,Pa=Kt,ra=di,ls=wn,ol=Ln,ie.VP8LMapColor32b=Cl,ie.VP8LMapColor8b=Oc,j)}function oi(j,K,ue,be,je){var Ke=1,et=[j],at=[K],pt=be.m,St=be.s,ai=null,Ai=0;e:for(;;){if(ue)for(;Ke&&Ce(pt,1);){var wi=et,pi=at,rn=be,Oi=1,Wt=rn.m,ii=rn.gc[rn.ab],Hi=Ce(Wt,2);if(rn.Oc&1<<Hi)Ke=0;else{switch(rn.Oc|=1<<Hi,ii.hc=Hi,ii.Ea=wi[0],ii.nc=pi[0],ii.K=[null],++rn.ab,e(4>=rn.ab),Hi){case 0:case 1:ii.b=Ce(Wt,3)+2,Oi=oi(li(ii.Ea,ii.b),li(ii.nc,ii.b),0,rn,ii.K),ii.K=ii.K[0];break;case 3:var Ji,Ui=Ce(Wt,8)+1,Dn=16<Ui?0:4<Ui?1:2<Ui?2:3;if(wi[0]=li(ii.Ea,Dn),ii.b=Dn,Ji=Oi=oi(Ui,1,0,rn,ii.K)){var Cn,kr=Ui,On=ii,bo=1<<(8>>On.b),So=u(bo);if(So==null)Ji=0;else{var Yr=On.K[0],qr=On.w;for(So[0]=On.K[0][0],Cn=1;Cn<1*kr;++Cn)So[Cn]=Qt(Yr[qr+Cn],So[Cn-1]);for(;Cn<4*bo;++Cn)So[Cn]=0;On.K[0]=null,On.K[0]=So,Ji=1}}Oi=Ji;break;case 2:break;default:e(0)}Ke=Oi}}if(et=et[0],at=at[0],Ke&&Ce(pt,1)&&!(Ke=1<=(Ai=Ce(pt,4))&&11>=Ai)){be.a=3;break e}var mo;if(mo=Ke)t:{var Co,Gr,Is,Dr=be,rs=et,zs=at,ao=Ai,us=ue,Ts=Dr.m,Ns=Dr.s,jo=[null],_a=1,qa=0,Oo=yr[ao];i:for(;;){if(us&&Ce(Ts,1)){var ws=Ce(Ts,3)+2,Jl=li(rs,ws),Ha=li(zs,ws),ul=Jl*Ha;if(!oi(Jl,Ha,0,Dr,jo))break i;for(jo=jo[0],Ns.xc=ws,Co=0;Co<ul;++Co){var cl=jo[Co]>>8&65535;jo[Co]=cl,cl>=_a&&(_a=cl+1)}}if(Ts.h)break i;for(Gr=0;5>Gr;++Gr){var os=Bh[Gr];!Gr&&0<ao&&(os+=1<<ao),qa<os&&(qa=os)}var zh=m(_a*Oo,Te),r0=_a,vf=m(r0,_e);if(vf==null)var hc=null;else e(65536>=r0),hc=vf;var fc=u(qa);if(hc==null||fc==null||zh==null){Dr.a=1;break i}var Nh=zh;for(Co=Is=0;Co<_a;++Co){var Ga=hc[Co],Wa=Ga.G,dc=Ga.H,pc=0,jh=1,zc=0;for(Gr=0;5>Gr;++Gr){os=Bh[Gr],Wa[Gr]=Nh,dc[Gr]=Is,!Gr&&0<ao&&(os+=1<<ao);n:{var mc,Nc=os,gc=Dr,jc=fc,aa=Nh,Js=Is,Ls=0,Ql=gc.m,o0=Ce(Ql,1);if(l(jc,0,0,Nc),o0){var $l=Ce(Ql,1)+1,s0=Ce(Ql,1),bf=Ce(Ql,s0==0?1:8);jc[bf]=1,$l==2&&(jc[bf=Ce(Ql,8)]=1);var dh=1}else{var Uc=u(19),wf=Ce(Ql,4)+4;if(19<wf){gc.a=3;var ph=0;break n}for(mc=0;mc<wf;++mc)Uc[uc[mc]]=Ce(Ql,3);var Uh=void 0,mh=void 0,Ll=gc,a0=Uc,Vc=Nc,yc=jc,va=0,eu=Ll.m,l0=8,xf=m(128,Te);o:for(;de(xf,0,7,a0,19);){if(Ce(eu,1)){var ad=2+2*Ce(eu,3);if((Uh=2+Ce(eu,ad))>Vc)break o}else Uh=Vc;for(mh=0;mh<Vc&&Uh--;){Be(eu);var _c=xf[0+(127&Se(eu))];me(eu,eu.u+_c.g);var ku=_c.value;if(16>ku)yc[mh++]=ku,ku!=0&&(l0=ku);else{var u0=ku==16,Gu=ku-16,gh=sl[Gu],Af=Ce(eu,Rh[Gu])+gh;if(mh+Af>Vc)break o;for(var ld=u0?l0:0;0<Af--;)yc[mh++]=ld}}va=1;break o}va||(Ll.a=3),dh=va}(dh=dh&&!Ql.h)&&(Ls=de(aa,Js,8,jc,Nc)),dh&&Ls!=0?ph=Ls:(gc.a=3,ph=0)}if(ph==0)break i;if(jh&&al[Gr]==1&&(jh=Nh[Is].g==0),pc+=Nh[Is].g,Is+=ph,3>=Gr){var yh,kf=fc[0];for(yh=1;yh<os;++yh)fc[yh]>kf&&(kf=fc[yh]);zc+=kf}}if(Ga.nd=jh,Ga.Qb=0,jh&&(Ga.qb=(Wa[3][dc[3]+0].value<<24|Wa[1][dc[1]+0].value<<16|Wa[2][dc[2]+0].value)>>>0,pc==0&&256>Wa[0][dc[0]+0].value&&(Ga.Qb=1,Ga.qb+=Wa[0][dc[0]+0].value<<8)),Ga.jc=!Ga.Qb&&6>zc,Ga.jc){var ba,Su=Ga;for(ba=0;ba<Fs;++ba){var Wu=ba,tu=Su.pd[Wu],Vh=Su.G[0][Su.H[0]+Wu];256<=Vh.value?(tu.g=Vh.g+256,tu.value=Vh.value):(tu.g=0,tu.value=0,Wu>>=co(Vh,8,tu),Wu>>=co(Su.G[1][Su.H[1]+Wu],16,tu),Wu>>=co(Su.G[2][Su.H[2]+Wu],0,tu),co(Su.G[3][Su.H[3]+Wu],24,tu))}}}Ns.vc=jo,Ns.Wb=_a,Ns.Ya=hc,Ns.yc=zh,mo=1;break t}mo=0}if(!(Ke=mo)){be.a=3;break e}if(0<Ai){if(St.ua=1<<Ai,!wt(St.Wa,Ai)){be.a=1,Ke=0;break e}}else St.ua=0;var Xu=be,c0=et,Qo=at,Yu=Xu.s,qh=Yu.xc;if(Xu.c=c0,Xu.i=Qo,Yu.md=li(c0,qh),Yu.wc=qh==0?-1:(1<<qh)-1,ue){be.xb=I;break e}if((ai=u(et*at))==null){be.a=1,Ke=0;break e}Ke=(Ke=Ge(be,ai,0,et,at,at,null))&&!pt.h;break e}return Ke?(je!=null?je[0]=ai:(e(ai==null),e(ue)),be.$=0,ue||Yt(St)):Yt(St),Ke}function yt(j,K){var ue=j.c*j.i,be=ue+K+16*K;return e(j.c<=K),j.V=u(be),j.V==null?(j.Ta=null,j.Ua=0,j.a=1,0):(j.Ta=j.V,j.Ua=j.Ba+ue+K,1)}function Ri(j,K){var ue=j.C,be=K-ue,je=j.V,Ke=j.Ba+j.c*ue;for(e(K<=j.l.o);0<be;){var et=16<be?16:be,at=j.l.ma,pt=j.l.width,St=pt*et,ai=at.ca,Ai=at.tb+pt*ue,wi=j.Ta,pi=j.Ua;Ie(j,et,je,Ke),Fc(wi,pi,ai,Ai,St),dt(at,ue,ue+et,ai,Ai,pt),be-=et,je+=et*j.c,ue+=et}e(ue==K),j.C=j.Ma=K}function Ii(){this.ub=this.yd=this.td=this.Rb=0}function En(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function Sn(){this.Fb=this.Bb=this.Cb=0,this.Zb=u(4),this.Lb=u(4)}function xt(){this.Yb=function(){var j=[];return function K(ue,be,je){for(var Ke=je[be],et=0;et<Ke&&(ue.push(je.length>be+1?[]:0),!(je.length<be+1));et++)K(ue[et],be+1,je)}(j,0,[3,11]),j}()}function Tn(){this.jb=u(3),this.Wc=r([4,8],xt),this.Xc=r([4,17],xt)}function Qn(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new u(4),this.od=new u(4)}function Lr(){this.ld=this.La=this.dd=this.tc=0}function dr(){this.Na=this.la=0}function Cr(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function Pr(){this.ad=u(384),this.Za=0,this.Ob=u(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function to(){this.uc=this.M=this.Nb=0,this.wa=Array(new Lr),this.Y=0,this.ya=Array(new Pr),this.aa=0,this.l=new $o}function Jr(){this.y=u(16),this.f=u(8),this.ea=u(8)}function vo(){this.cb=this.a=0,this.sc="",this.m=new Re,this.Od=new Ii,this.Kc=new En,this.ed=new Qn,this.Qa=new Sn,this.Ic=this.$c=this.Aa=0,this.D=new to,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=m(8,Re),this.ia=0,this.pb=m(4,Cr),this.Pa=new Tn,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new Jr),this.Hd=0,this.rb=Array(new dr),this.sb=0,this.wa=Array(new Lr),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new Pr),this.L=this.aa=0,this.gd=r([4,2],Lr),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function $o(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function tl(){var j=new vo;return j!=null&&(j.a=0,j.sc="OK",j.cb=0,j.Xb=0,Ho||(Ho=lr)),j}function Fo(j,K,ue){return j.a==0&&(j.a=K,j.sc=ue,j.cb=0),0}function Dt(j,K,ue){return 3<=ue&&j[K+0]==157&&j[K+1]==1&&j[K+2]==42}function rr(j,K){if(j==null)return 0;if(j.a=0,j.sc="OK",K==null)return Fo(j,2,"null VP8Io passed to VP8GetHeaders()");var ue=K.data,be=K.w,je=K.ha;if(4>je)return Fo(j,7,"Truncated header.");var Ke=ue[be+0]|ue[be+1]<<8|ue[be+2]<<16,et=j.Od;if(et.Rb=!(1&Ke),et.td=Ke>>1&7,et.yd=Ke>>4&1,et.ub=Ke>>5,3<et.td)return Fo(j,3,"Incorrect keyframe parameters.");if(!et.yd)return Fo(j,4,"Frame not displayable.");be+=3,je-=3;var at=j.Kc;if(et.Rb){if(7>je)return Fo(j,7,"cannot parse picture header");if(!Dt(ue,be,je))return Fo(j,3,"Bad code word");at.c=16383&(ue[be+4]<<8|ue[be+3]),at.Td=ue[be+4]>>6,at.i=16383&(ue[be+6]<<8|ue[be+5]),at.Ud=ue[be+6]>>6,be+=7,je-=7,j.za=at.c+15>>4,j.Ub=at.i+15>>4,K.width=at.c,K.height=at.i,K.Da=0,K.j=0,K.v=0,K.va=K.width,K.o=K.height,K.da=0,K.ib=K.width,K.hb=K.height,K.U=K.width,K.T=K.height,l((Ke=j.Pa).jb,0,255,Ke.jb.length),e((Ke=j.Qa)!=null),Ke.Cb=0,Ke.Bb=0,Ke.Fb=1,l(Ke.Zb,0,0,Ke.Zb.length),l(Ke.Lb,0,0,Ke.Lb)}if(et.ub>je)return Fo(j,7,"bad partition length");ot(Ke=j.m,ue,be,et.ub),be+=et.ub,je-=et.ub,et.Rb&&(at.Ld=st(Ke),at.Kd=st(Ke)),at=j.Qa;var pt,St=j.Pa;if(e(Ke!=null),e(at!=null),at.Cb=st(Ke),at.Cb){if(at.Bb=st(Ke),st(Ke)){for(at.Fb=st(Ke),pt=0;4>pt;++pt)at.Zb[pt]=st(Ke)?It(Ke,7):0;for(pt=0;4>pt;++pt)at.Lb[pt]=st(Ke)?It(Ke,6):0}if(at.Bb)for(pt=0;3>pt;++pt)St.jb[pt]=st(Ke)?it(Ke,8):255}else at.Bb=0;if(Ke.Ka)return Fo(j,3,"cannot parse segment header");if((at=j.ed).zd=st(Ke),at.Tb=it(Ke,6),at.wb=it(Ke,3),at.Pc=st(Ke),at.Pc&&st(Ke)){for(St=0;4>St;++St)st(Ke)&&(at.vd[St]=It(Ke,6));for(St=0;4>St;++St)st(Ke)&&(at.od[St]=It(Ke,6))}if(j.L=at.Tb==0?0:at.zd?1:2,Ke.Ka)return Fo(j,3,"cannot parse filter header");var ai=je;if(je=pt=be,be=pt+ai,at=ai,j.Xb=(1<<it(j.m,2))-1,ai<3*(St=j.Xb))ue=7;else{for(pt+=3*St,at-=3*St,ai=0;ai<St;++ai){var Ai=ue[je+0]|ue[je+1]<<8|ue[je+2]<<16;Ai>at&&(Ai=at),ot(j.Jc[+ai],ue,pt,Ai),pt+=Ai,at-=Ai,je+=3}ot(j.Jc[+St],ue,pt,at),ue=pt<be?0:5}if(ue!=0)return Fo(j,ue,"cannot parse partitions");for(ue=it(pt=j.m,7),je=st(pt)?It(pt,4):0,be=st(pt)?It(pt,4):0,at=st(pt)?It(pt,4):0,St=st(pt)?It(pt,4):0,pt=st(pt)?It(pt,4):0,ai=j.Qa,Ai=0;4>Ai;++Ai){if(ai.Cb){var wi=ai.Zb[Ai];ai.Fb||(wi+=ue)}else{if(0<Ai){j.pb[Ai]=j.pb[0];continue}wi=ue}var pi=j.pb[Ai];pi.Sc[0]=cc[Es(wi+je,127)],pi.Sc[1]=bs[Es(wi+0,127)],pi.Eb[0]=2*cc[Es(wi+be,127)],pi.Eb[1]=101581*bs[Es(wi+at,127)]>>16,8>pi.Eb[1]&&(pi.Eb[1]=8),pi.Qc[0]=cc[Es(wi+St,117)],pi.Qc[1]=bs[Es(wi+pt,127)],pi.lc=wi+pt}if(!et.Rb)return Fo(j,4,"Not a key frame.");for(st(Ke),et=j.Pa,ue=0;4>ue;++ue){for(je=0;8>je;++je)for(be=0;3>be;++be)for(at=0;11>at;++at)St=Ye(Ke,ms[ue][je][be][at])?it(Ke,8):Kl[ue][je][be][at],et.Wc[ue][je].Yb[be][at]=St;for(je=0;17>je;++je)et.Xc[ue][je]=et.Wc[ue][fh[je]]}return j.kc=st(Ke),j.kc&&(j.Bd=it(Ke,8)),j.cb=1}function lr(j,K,ue,be,je,Ke,et){var at=K[je].Yb[ue];for(ue=0;16>je;++je){if(!Ye(j,at[ue+0]))return je;for(;!Ye(j,at[ue+1]);)if(at=K[++je].Yb[0],ue=0,je==16)return 16;var pt=K[je+1].Yb;if(Ye(j,at[ue+2])){var St=j,ai=0;if(Ye(St,(wi=at)[(Ai=ue)+3]))if(Ye(St,wi[Ai+6])){for(at=0,Ai=2*(ai=Ye(St,wi[Ai+8]))+(wi=Ye(St,wi[Ai+9+ai])),ai=0,wi=Zl[Ai];wi[at];++at)ai+=ai+Ye(St,wi[at]);ai+=3+(8<<Ai)}else Ye(St,wi[Ai+7])?(ai=7+2*Ye(St,165),ai+=Ye(St,145)):ai=5+Ye(St,159);else ai=Ye(St,wi[Ai+4])?3+Ye(St,wi[Ai+5]):2;at=pt[2]}else ai=1,at=pt[1];pt=et+ll[je],0>(St=j).b&&We(St);var Ai,wi=St.b,pi=(Ai=St.Ca>>1)-(St.I>>wi)>>31;--St.b,St.Ca+=pi,St.Ca|=1,St.I-=(Ai+1&pi)<<wi,Ke[pt]=((ai^pi)-pi)*be[(0<je)+0]}return 16}function zr(j){var K=j.rb[j.sb-1];K.la=0,K.Na=0,l(j.zc,0,0,j.zc.length),j.ja=0}function Zo(j,K){if(j==null)return 0;if(K==null)return Fo(j,2,"NULL VP8Io parameter in VP8Decode().");if(!j.cb&&!rr(j,K))return 0;if(e(j.cb),K.ac==null||K.ac(K)){K.ob&&(j.L=0);var ue=_n[j.L];if(j.L==2?(j.yb=0,j.zb=0):(j.yb=K.v-ue>>4,j.zb=K.j-ue>>4,0>j.yb&&(j.yb=0),0>j.zb&&(j.zb=0)),j.Va=K.o+15+ue>>4,j.Hb=K.va+15+ue>>4,j.Hb>j.za&&(j.Hb=j.za),j.Va>j.Ub&&(j.Va=j.Ub),0<j.L){var be=j.ed;for(ue=0;4>ue;++ue){var je;if(j.Qa.Cb){var Ke=j.Qa.Lb[ue];j.Qa.Fb||(Ke+=be.Tb)}else Ke=be.Tb;for(je=0;1>=je;++je){var et=j.gd[ue][je],at=Ke;if(be.Pc&&(at+=be.vd[0],je&&(at+=be.od[0])),0<(at=0>at?0:63<at?63:at)){var pt=at;0<be.wb&&(pt=4<be.wb?pt>>2:pt>>1)>9-be.wb&&(pt=9-be.wb),1>pt&&(pt=1),et.dd=pt,et.tc=2*at+pt,et.ld=40<=at?2:15<=at?1:0}else et.tc=0;et.La=je}}}ue=0}else Fo(j,6,"Frame setup failed"),ue=j.a;if(ue=ue==0){if(ue){j.$c=0,0<j.Aa||(j.Ic=Er);e:{ue=j.Ic,be=4*(pt=j.za);var St=32*pt,ai=pt+1,Ai=0<j.L?pt*(0<j.Aa?2:1):0,wi=(j.Aa==2?2:1)*pt;if((et=be+832+(je=3*(16*ue+_n[j.L])/2*St)+(Ke=j.Fa!=null&&0<j.Fa.length?j.Kc.c*j.Kc.i:0))!=et)ue=0;else{if(et>j.Vb){if(j.Vb=0,j.Ec=u(et),j.Fc=0,j.Ec==null){ue=Fo(j,1,"no memory during frame initialization.");break e}j.Vb=et}et=j.Ec,at=j.Fc,j.Ac=et,j.Bc=at,at+=be,j.Gd=m(St,Jr),j.Hd=0,j.rb=m(ai+1,dr),j.sb=1,j.wa=Ai?m(Ai,Lr):null,j.Y=0,j.D.Nb=0,j.D.wa=j.wa,j.D.Y=j.Y,0<j.Aa&&(j.D.Y+=pt),e(!0),j.oc=et,j.pc=at,at+=832,j.ya=m(wi,Pr),j.aa=0,j.D.ya=j.ya,j.D.aa=j.aa,j.Aa==2&&(j.D.aa+=pt),j.R=16*pt,j.B=8*pt,pt=(St=_n[j.L])*j.R,St=St/2*j.B,j.sa=et,j.ta=at+pt,j.qa=j.sa,j.ra=j.ta+16*ue*j.R+St,j.Ha=j.qa,j.Ia=j.ra+8*ue*j.B+St,j.$c=0,at+=je,j.mb=Ke?et:null,j.nb=Ke?at:null,e(at+Ke<=j.Fc+j.Vb),zr(j),l(j.Ac,j.Bc,0,be),ue=1}}if(ue){if(K.ka=0,K.y=j.sa,K.O=j.ta,K.f=j.qa,K.N=j.ra,K.ea=j.Ha,K.Vd=j.Ia,K.fa=j.R,K.Rc=j.B,K.F=null,K.J=0,!Rc){for(ue=-255;255>=ue;++ue)uh[255+ue]=0>ue?-ue:ue;for(ue=-1020;1020>=ue;++ue)ch[1020+ue]=-128>ue?-128:127<ue?127:ue;for(ue=-112;112>=ue;++ue)Fh[112+ue]=-16>ue?-16:15<ue?15:ue;for(ue=-255;510>=ue;++ue)Tr[255+ue]=0>ue?0:255<ue?255:ue;Rc=1}Ko=Ea,ju=Ca,oa=Ss,Xr=Zs,ga=qs,Ma=_s,Il=sc,Uu=hu,vu=lh,Gs=Ru,Tl=ah,ps=fu,Pn=du,zo=pu,Hr=Rr,Po=da,is=Na,yn=Mc,B[0]=zt,B[1]=uu,B[2]=nt,B[3]=Ct,B[4]=Rt,B[5]=yi,B[6]=bi,B[7]=_i,B[8]=ji,B[9]=ui,sa[0]=il,sa[1]=cu,sa[2]=ha,sa[3]=fa,sa[4]=U,sa[5]=$,sa[6]=ge,d[0]=p,d[1]=xl,d[2]=ln,d[3]=In,d[4]=c,d[5]=Di,d[6]=F,ue=1}else ue=0}ue&&(ue=function(pi,rn){for(pi.M=0;pi.M<pi.Va;++pi.M){var Oi,Wt=pi.Jc[pi.M&pi.Xb],ii=pi.m,Hi=pi;for(Oi=0;Oi<Hi.za;++Oi){var Ji=ii,Ui=Hi,Dn=Ui.Ac,Cn=Ui.Bc+4*Oi,kr=Ui.zc,On=Ui.ya[Ui.aa+Oi];if(Ui.Qa.Bb?On.$b=Ye(Ji,Ui.Pa.jb[0])?2+Ye(Ji,Ui.Pa.jb[2]):Ye(Ji,Ui.Pa.jb[1]):On.$b=0,Ui.kc&&(On.Ad=Ye(Ji,Ui.Bd)),On.Za=!Ye(Ji,145)+0,On.Za){var bo=On.Ob,So=0;for(Ui=0;4>Ui;++Ui){var Yr,qr=kr[0+Ui];for(Yr=0;4>Yr;++Yr){qr=ns[Dn[Cn+Yr]][qr];for(var mo=hh[Ye(Ji,qr[0])];0<mo;)mo=hh[2*mo+Ye(Ji,qr[mo])];qr=-mo,Dn[Cn+Yr]=qr}o(bo,So,Dn,Cn,4),So+=4,kr[0+Ui]=qr}}else qr=Ye(Ji,156)?Ye(Ji,128)?1:3:Ye(Ji,163)?2:0,On.Ob[0]=qr,l(Dn,Cn,qr,4),l(kr,0,qr,4);On.Dd=Ye(Ji,142)?Ye(Ji,114)?Ye(Ji,183)?1:3:2:0}if(Hi.m.Ka)return Fo(pi,7,"Premature end-of-partition0 encountered.");for(;pi.ja<pi.za;++pi.ja){if(Hi=Wt,Ji=(ii=pi).rb[ii.sb-1],Dn=ii.rb[ii.sb+ii.ja],Oi=ii.ya[ii.aa+ii.ja],Cn=ii.kc?Oi.Ad:0)Ji.la=Dn.la=0,Oi.Za||(Ji.Na=Dn.Na=0),Oi.Hc=0,Oi.Gc=0,Oi.ia=0;else{var Co,Gr;if(Ji=Dn,Dn=Hi,Cn=ii.Pa.Xc,kr=ii.ya[ii.aa+ii.ja],On=ii.pb[kr.$b],Ui=kr.ad,bo=0,So=ii.rb[ii.sb-1],qr=Yr=0,l(Ui,bo,0,384),kr.Za)var Is=0,Dr=Cn[3];else{mo=u(16);var rs=Ji.Na+So.Na;if(rs=Ho(Dn,Cn[1],rs,On.Eb,0,mo,0),Ji.Na=So.Na=(0<rs)+0,1<rs)Ko(mo,0,Ui,bo);else{var zs=mo[0]+3>>3;for(mo=0;256>mo;mo+=16)Ui[bo+mo]=zs}Is=1,Dr=Cn[0]}var ao=15&Ji.la,us=15&So.la;for(mo=0;4>mo;++mo){var Ts=1&us;for(zs=Gr=0;4>zs;++zs)ao=ao>>1|(Ts=(rs=Ho(Dn,Dr,rs=Ts+(1&ao),On.Sc,Is,Ui,bo))>Is)<<7,Gr=Gr<<2|(3<rs?3:1<rs?2:Ui[bo+0]!=0),bo+=16;ao>>=4,us=us>>1|Ts<<7,Yr=(Yr<<8|Gr)>>>0}for(Dr=ao,Is=us>>4,Co=0;4>Co;Co+=2){for(Gr=0,ao=Ji.la>>4+Co,us=So.la>>4+Co,mo=0;2>mo;++mo){for(Ts=1&us,zs=0;2>zs;++zs)rs=Ts+(1&ao),ao=ao>>1|(Ts=0<(rs=Ho(Dn,Cn[2],rs,On.Qc,0,Ui,bo)))<<3,Gr=Gr<<2|(3<rs?3:1<rs?2:Ui[bo+0]!=0),bo+=16;ao>>=2,us=us>>1|Ts<<5}qr|=Gr<<4*Co,Dr|=ao<<4<<Co,Is|=(240&us)<<Co}Ji.la=Dr,So.la=Is,kr.Hc=Yr,kr.Gc=qr,kr.ia=43690&qr?0:On.ia,Cn=!(Yr|qr)}if(0<ii.L&&(ii.wa[ii.Y+ii.ja]=ii.gd[Oi.$b][Oi.Za],ii.wa[ii.Y+ii.ja].La|=!Cn),Hi.Ka)return Fo(pi,7,"Premature end-of-file encountered.")}if(zr(pi),ii=rn,Hi=1,Oi=(Wt=pi).D,Ji=0<Wt.L&&Wt.M>=Wt.zb&&Wt.M<=Wt.Va,Wt.Aa==0)e:{if(Oi.M=Wt.M,Oi.uc=Ji,zu(Wt,Oi),Hi=1,Oi=(Gr=Wt.D).Nb,Ji=(qr=_n[Wt.L])*Wt.R,Dn=qr/2*Wt.B,mo=16*Oi*Wt.R,zs=8*Oi*Wt.B,Cn=Wt.sa,kr=Wt.ta-Ji+mo,On=Wt.qa,Ui=Wt.ra-Dn+zs,bo=Wt.Ha,So=Wt.Ia-Dn+zs,us=(ao=Gr.M)==0,Yr=ao>=Wt.Va-1,Wt.Aa==2&&zu(Wt,Gr),Gr.uc)for(Ts=(rs=Wt).D.M,e(rs.D.uc),Gr=rs.yb;Gr<rs.Hb;++Gr){Is=Gr,Dr=Ts;var Ns=(jo=(os=rs).D).Nb;Co=os.R;var jo=jo.wa[jo.Y+Is],_a=os.sa,qa=os.ta+16*Ns*Co+16*Is,Oo=jo.dd,ws=jo.tc;if(ws!=0)if(e(3<=ws),os.L==1)0<Is&&Po(_a,qa,Co,ws+4),jo.La&&yn(_a,qa,Co,ws),0<Dr&&Hr(_a,qa,Co,ws+4),jo.La&&is(_a,qa,Co,ws);else{var Jl=os.B,Ha=os.qa,ul=os.ra+8*Ns*Jl+8*Is,cl=os.Ha,os=os.Ia+8*Ns*Jl+8*Is;Ns=jo.ld,0<Is&&(Uu(_a,qa,Co,ws+4,Oo,Ns),Gs(Ha,ul,cl,os,Jl,ws+4,Oo,Ns)),jo.La&&(ps(_a,qa,Co,ws,Oo,Ns),zo(Ha,ul,cl,os,Jl,ws,Oo,Ns)),0<Dr&&(Il(_a,qa,Co,ws+4,Oo,Ns),vu(Ha,ul,cl,os,Jl,ws+4,Oo,Ns)),jo.La&&(Tl(_a,qa,Co,ws,Oo,Ns),Pn(Ha,ul,cl,os,Jl,ws,Oo,Ns))}}if(Wt.ia&&alert("todo:DitherRow"),ii.put!=null){if(Gr=16*ao,ao=16*(ao+1),us?(ii.y=Wt.sa,ii.O=Wt.ta+mo,ii.f=Wt.qa,ii.N=Wt.ra+zs,ii.ea=Wt.Ha,ii.W=Wt.Ia+zs):(Gr-=qr,ii.y=Cn,ii.O=kr,ii.f=On,ii.N=Ui,ii.ea=bo,ii.W=So),Yr||(ao-=qr),ao>ii.o&&(ao=ii.o),ii.F=null,ii.J=null,Wt.Fa!=null&&0<Wt.Fa.length&&Gr<ao&&(ii.J=ko(Wt,ii,Gr,ao-Gr),ii.F=Wt.mb,ii.F==null&&ii.F.length==0)){Hi=Fo(Wt,3,"Could not decode alpha data.");break e}Gr<ii.j&&(qr=ii.j-Gr,Gr=ii.j,e(!(1&qr)),ii.O+=Wt.R*qr,ii.N+=Wt.B*(qr>>1),ii.W+=Wt.B*(qr>>1),ii.F!=null&&(ii.J+=ii.width*qr)),Gr<ao&&(ii.O+=ii.v,ii.N+=ii.v>>1,ii.W+=ii.v>>1,ii.F!=null&&(ii.J+=ii.v),ii.ka=Gr-ii.j,ii.U=ii.va-ii.v,ii.T=ao-Gr,Hi=ii.put(ii))}Oi+1!=Wt.Ic||Yr||(o(Wt.sa,Wt.ta-Ji,Cn,kr+16*Wt.R,Ji),o(Wt.qa,Wt.ra-Dn,On,Ui+8*Wt.B,Dn),o(Wt.Ha,Wt.Ia-Dn,bo,So+8*Wt.B,Dn))}if(!Hi)return Fo(pi,6,"Output aborted.")}return 1}(j,K)),K.bc!=null&&K.bc(K),ue&=1}return ue?(j.cb=0,ue):0}function Ro(j,K,ue,be,je){je=j[K+ue+32*be]+(je>>3),j[K+ue+32*be]=-256&je?0>je?0:255:je}function Sa(j,K,ue,be,je,Ke){Ro(j,K,0,ue,be+je),Ro(j,K,1,ue,be+Ke),Ro(j,K,2,ue,be-Ke),Ro(j,K,3,ue,be-je)}function ts(j){return(20091*j>>16)+j}function Vs(j,K,ue,be){var je,Ke=0,et=u(16);for(je=0;4>je;++je){var at=j[K+0]+j[K+8],pt=j[K+0]-j[K+8],St=(35468*j[K+4]>>16)-ts(j[K+12]),ai=ts(j[K+4])+(35468*j[K+12]>>16);et[Ke+0]=at+ai,et[Ke+1]=pt+St,et[Ke+2]=pt-St,et[Ke+3]=at-ai,Ke+=4,K++}for(je=Ke=0;4>je;++je)at=(j=et[Ke+0]+4)+et[Ke+8],pt=j-et[Ke+8],St=(35468*et[Ke+4]>>16)-ts(et[Ke+12]),Ro(ue,be,0,0,at+(ai=ts(et[Ke+4])+(35468*et[Ke+12]>>16))),Ro(ue,be,1,0,pt+St),Ro(ue,be,2,0,pt-St),Ro(ue,be,3,0,at-ai),Ke++,be+=32}function _s(j,K,ue,be){var je=j[K+0]+4,Ke=35468*j[K+4]>>16,et=ts(j[K+4]),at=35468*j[K+1]>>16;Sa(ue,be,0,je+et,j=ts(j[K+1]),at),Sa(ue,be,1,je+Ke,j,at),Sa(ue,be,2,je-Ke,j,at),Sa(ue,be,3,je-et,j,at)}function Ca(j,K,ue,be,je){Vs(j,K,ue,be),je&&Vs(j,K+16,ue,be+4)}function Ss(j,K,ue,be){ju(j,K+0,ue,be,1),ju(j,K+32,ue,be+128,1)}function Zs(j,K,ue,be){var je;for(j=j[K+0]+4,je=0;4>je;++je)for(K=0;4>K;++K)Ro(ue,be,K,je,j)}function qs(j,K,ue,be){j[K+0]&&Xr(j,K+0,ue,be),j[K+16]&&Xr(j,K+16,ue,be+4),j[K+32]&&Xr(j,K+32,ue,be+128),j[K+48]&&Xr(j,K+48,ue,be+128+4)}function Ea(j,K,ue,be){var je,Ke=u(16);for(je=0;4>je;++je){var et=j[K+0+je]+j[K+12+je],at=j[K+4+je]+j[K+8+je],pt=j[K+4+je]-j[K+8+je],St=j[K+0+je]-j[K+12+je];Ke[0+je]=et+at,Ke[8+je]=et-at,Ke[4+je]=St+pt,Ke[12+je]=St-pt}for(je=0;4>je;++je)et=(j=Ke[0+4*je]+3)+Ke[3+4*je],at=Ke[1+4*je]+Ke[2+4*je],pt=Ke[1+4*je]-Ke[2+4*je],St=j-Ke[3+4*je],ue[be+0]=et+at>>3,ue[be+16]=St+pt>>3,ue[be+32]=et-at>>3,ue[be+48]=St-pt>>3,be+=64}function wl(j,K,ue){var be,je=K-32,Ke=Ks,et=255-j[je-1];for(be=0;be<ue;++be){var at,pt=Ke,St=et+j[K-1];for(at=0;at<ue;++at)j[K+at]=pt[St+j[je+at]];K+=32}}function uu(j,K){wl(j,K,4)}function xl(j,K){wl(j,K,8)}function cu(j,K){wl(j,K,16)}function ha(j,K){var ue;for(ue=0;16>ue;++ue)o(j,K+32*ue,j,K-32,16)}function fa(j,K){var ue;for(ue=16;0<ue;--ue)l(j,K,j[K-1],16),K+=32}function Io(j,K,ue){var be;for(be=0;16>be;++be)l(K,ue+32*be,j,16)}function il(j,K){var ue,be=16;for(ue=0;16>ue;++ue)be+=j[K-1+32*ue]+j[K+ue-32];Io(be>>5,j,K)}function U(j,K){var ue,be=8;for(ue=0;16>ue;++ue)be+=j[K-1+32*ue];Io(be>>4,j,K)}function $(j,K){var ue,be=8;for(ue=0;16>ue;++ue)be+=j[K+ue-32];Io(be>>4,j,K)}function ge(j,K){Io(128,j,K)}function Oe(j,K,ue){return j+2*K+ue+2>>2}function nt(j,K){var ue,be=K-32;for(be=new Uint8Array([Oe(j[be-1],j[be+0],j[be+1]),Oe(j[be+0],j[be+1],j[be+2]),Oe(j[be+1],j[be+2],j[be+3]),Oe(j[be+2],j[be+3],j[be+4])]),ue=0;4>ue;++ue)o(j,K+32*ue,be,0,be.length)}function Ct(j,K){var ue=j[K-1],be=j[K-1+32],je=j[K-1+64],Ke=j[K-1+96];gt(j,K+0,16843009*Oe(j[K-1-32],ue,be)),gt(j,K+32,16843009*Oe(ue,be,je)),gt(j,K+64,16843009*Oe(be,je,Ke)),gt(j,K+96,16843009*Oe(je,Ke,Ke))}function zt(j,K){var ue,be=4;for(ue=0;4>ue;++ue)be+=j[K+ue-32]+j[K-1+32*ue];for(be>>=3,ue=0;4>ue;++ue)l(j,K+32*ue,be,4)}function Rt(j,K){var ue=j[K-1+0],be=j[K-1+32],je=j[K-1+64],Ke=j[K-1-32],et=j[K+0-32],at=j[K+1-32],pt=j[K+2-32],St=j[K+3-32];j[K+0+96]=Oe(be,je,j[K-1+96]),j[K+1+96]=j[K+0+64]=Oe(ue,be,je),j[K+2+96]=j[K+1+64]=j[K+0+32]=Oe(Ke,ue,be),j[K+3+96]=j[K+2+64]=j[K+1+32]=j[K+0+0]=Oe(et,Ke,ue),j[K+3+64]=j[K+2+32]=j[K+1+0]=Oe(at,et,Ke),j[K+3+32]=j[K+2+0]=Oe(pt,at,et),j[K+3+0]=Oe(St,pt,at)}function bi(j,K){var ue=j[K+1-32],be=j[K+2-32],je=j[K+3-32],Ke=j[K+4-32],et=j[K+5-32],at=j[K+6-32],pt=j[K+7-32];j[K+0+0]=Oe(j[K+0-32],ue,be),j[K+1+0]=j[K+0+32]=Oe(ue,be,je),j[K+2+0]=j[K+1+32]=j[K+0+64]=Oe(be,je,Ke),j[K+3+0]=j[K+2+32]=j[K+1+64]=j[K+0+96]=Oe(je,Ke,et),j[K+3+32]=j[K+2+64]=j[K+1+96]=Oe(Ke,et,at),j[K+3+64]=j[K+2+96]=Oe(et,at,pt),j[K+3+96]=Oe(at,pt,pt)}function yi(j,K){var ue=j[K-1+0],be=j[K-1+32],je=j[K-1+64],Ke=j[K-1-32],et=j[K+0-32],at=j[K+1-32],pt=j[K+2-32],St=j[K+3-32];j[K+0+0]=j[K+1+64]=Ke+et+1>>1,j[K+1+0]=j[K+2+64]=et+at+1>>1,j[K+2+0]=j[K+3+64]=at+pt+1>>1,j[K+3+0]=pt+St+1>>1,j[K+0+96]=Oe(je,be,ue),j[K+0+64]=Oe(be,ue,Ke),j[K+0+32]=j[K+1+96]=Oe(ue,Ke,et),j[K+1+32]=j[K+2+96]=Oe(Ke,et,at),j[K+2+32]=j[K+3+96]=Oe(et,at,pt),j[K+3+32]=Oe(at,pt,St)}function _i(j,K){var ue=j[K+0-32],be=j[K+1-32],je=j[K+2-32],Ke=j[K+3-32],et=j[K+4-32],at=j[K+5-32],pt=j[K+6-32],St=j[K+7-32];j[K+0+0]=ue+be+1>>1,j[K+1+0]=j[K+0+64]=be+je+1>>1,j[K+2+0]=j[K+1+64]=je+Ke+1>>1,j[K+3+0]=j[K+2+64]=Ke+et+1>>1,j[K+0+32]=Oe(ue,be,je),j[K+1+32]=j[K+0+96]=Oe(be,je,Ke),j[K+2+32]=j[K+1+96]=Oe(je,Ke,et),j[K+3+32]=j[K+2+96]=Oe(Ke,et,at),j[K+3+64]=Oe(et,at,pt),j[K+3+96]=Oe(at,pt,St)}function ui(j,K){var ue=j[K-1+0],be=j[K-1+32],je=j[K-1+64],Ke=j[K-1+96];j[K+0+0]=ue+be+1>>1,j[K+2+0]=j[K+0+32]=be+je+1>>1,j[K+2+32]=j[K+0+64]=je+Ke+1>>1,j[K+1+0]=Oe(ue,be,je),j[K+3+0]=j[K+1+32]=Oe(be,je,Ke),j[K+3+32]=j[K+1+64]=Oe(je,Ke,Ke),j[K+3+64]=j[K+2+64]=j[K+0+96]=j[K+1+96]=j[K+2+96]=j[K+3+96]=Ke}function ji(j,K){var ue=j[K-1+0],be=j[K-1+32],je=j[K-1+64],Ke=j[K-1+96],et=j[K-1-32],at=j[K+0-32],pt=j[K+1-32],St=j[K+2-32];j[K+0+0]=j[K+2+32]=ue+et+1>>1,j[K+0+32]=j[K+2+64]=be+ue+1>>1,j[K+0+64]=j[K+2+96]=je+be+1>>1,j[K+0+96]=Ke+je+1>>1,j[K+3+0]=Oe(at,pt,St),j[K+2+0]=Oe(et,at,pt),j[K+1+0]=j[K+3+32]=Oe(ue,et,at),j[K+1+32]=j[K+3+64]=Oe(be,ue,et),j[K+1+64]=j[K+3+96]=Oe(je,be,ue),j[K+1+96]=Oe(Ke,je,be)}function ln(j,K){var ue;for(ue=0;8>ue;++ue)o(j,K+32*ue,j,K-32,8)}function In(j,K){var ue;for(ue=0;8>ue;++ue)l(j,K,j[K-1],8),K+=32}function ft(j,K,ue){var be;for(be=0;8>be;++be)l(K,ue+32*be,j,8)}function p(j,K){var ue,be=8;for(ue=0;8>ue;++ue)be+=j[K+ue-32]+j[K-1+32*ue];ft(be>>4,j,K)}function Di(j,K){var ue,be=4;for(ue=0;8>ue;++ue)be+=j[K+ue-32];ft(be>>3,j,K)}function c(j,K){var ue,be=4;for(ue=0;8>ue;++ue)be+=j[K-1+32*ue];ft(be>>3,j,K)}function F(j,K){ft(128,j,K)}function mn(j,K,ue){var be=j[K-ue],je=j[K+0],Ke=3*(je-be)+ac[1020+j[K-2*ue]-j[K+ue]],et=Jo[112+(Ke+4>>3)];j[K-ue]=Ks[255+be+Jo[112+(Ke+3>>3)]],j[K+0]=Ks[255+je-et]}function $n(j,K,ue,be){var je=j[K+0],Ke=j[K+ue];return Xo[255+j[K-2*ue]-j[K-ue]]>be||Xo[255+Ke-je]>be}function Ao(j,K,ue,be){return 4*Xo[255+j[K-ue]-j[K+0]]+Xo[255+j[K-2*ue]-j[K+ue]]<=be}function re(j,K,ue,be,je){var Ke=j[K-3*ue],et=j[K-2*ue],at=j[K-ue],pt=j[K+0],St=j[K+ue],ai=j[K+2*ue],Ai=j[K+3*ue];return 4*Xo[255+at-pt]+Xo[255+et-St]>be?0:Xo[255+j[K-4*ue]-Ke]<=je&&Xo[255+Ke-et]<=je&&Xo[255+et-at]<=je&&Xo[255+Ai-ai]<=je&&Xo[255+ai-St]<=je&&Xo[255+St-pt]<=je}function Rr(j,K,ue,be){var je=2*be+1;for(be=0;16>be;++be)Ao(j,K+be,ue,je)&&mn(j,K+be,ue)}function da(j,K,ue,be){var je=2*be+1;for(be=0;16>be;++be)Ao(j,K+be*ue,1,je)&&mn(j,K+be*ue,1)}function Na(j,K,ue,be){var je;for(je=3;0<je;--je)Rr(j,K+=4*ue,ue,be)}function Mc(j,K,ue,be){var je;for(je=3;0<je;--je)da(j,K+=4,ue,be)}function Al(j,K,ue,be,je,Ke,et,at){for(Ke=2*Ke+1;0<je--;){if(re(j,K,ue,Ke,et))if($n(j,K,ue,at))mn(j,K,ue);else{var pt=j,St=K,ai=ue,Ai=pt[St-2*ai],wi=pt[St-ai],pi=pt[St+0],rn=pt[St+ai],Oi=pt[St+2*ai],Wt=27*(Hi=ac[1020+3*(pi-wi)+ac[1020+Ai-rn]])+63>>7,ii=18*Hi+63>>7,Hi=9*Hi+63>>7;pt[St-3*ai]=Ks[255+pt[St-3*ai]+Hi],pt[St-2*ai]=Ks[255+Ai+ii],pt[St-ai]=Ks[255+wi+Wt],pt[St+0]=Ks[255+pi-Wt],pt[St+ai]=Ks[255+rn-ii],pt[St+2*ai]=Ks[255+Oi-Hi]}K+=be}}function Hs(j,K,ue,be,je,Ke,et,at){for(Ke=2*Ke+1;0<je--;){if(re(j,K,ue,Ke,et))if($n(j,K,ue,at))mn(j,K,ue);else{var pt=j,St=K,ai=ue,Ai=pt[St-ai],wi=pt[St+0],pi=pt[St+ai],rn=Jo[112+((Oi=3*(wi-Ai))+4>>3)],Oi=Jo[112+(Oi+3>>3)],Wt=rn+1>>1;pt[St-2*ai]=Ks[255+pt[St-2*ai]+Wt],pt[St-ai]=Ks[255+Ai+Oi],pt[St+0]=Ks[255+wi-rn],pt[St+ai]=Ks[255+pi-Wt]}K+=be}}function sc(j,K,ue,be,je,Ke){Al(j,K,ue,1,16,be,je,Ke)}function hu(j,K,ue,be,je,Ke){Al(j,K,1,ue,16,be,je,Ke)}function ah(j,K,ue,be,je,Ke){var et;for(et=3;0<et;--et)Hs(j,K+=4*ue,ue,1,16,be,je,Ke)}function fu(j,K,ue,be,je,Ke){var et;for(et=3;0<et;--et)Hs(j,K+=4,1,ue,16,be,je,Ke)}function lh(j,K,ue,be,je,Ke,et,at){Al(j,K,je,1,8,Ke,et,at),Al(ue,be,je,1,8,Ke,et,at)}function Ru(j,K,ue,be,je,Ke,et,at){Al(j,K,1,je,8,Ke,et,at),Al(ue,be,1,je,8,Ke,et,at)}function du(j,K,ue,be,je,Ke,et,at){Hs(j,K+4*je,je,1,8,Ke,et,at),Hs(ue,be+4*je,je,1,8,Ke,et,at)}function pu(j,K,ue,be,je,Ke,et,at){Hs(j,K+4,1,je,8,Ke,et,at),Hs(ue,be+4,1,je,8,Ke,et,at)}function ql(){this.ba=new Zr,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new dn,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function mu(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function Nn(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function Fn(){this.ua=0,this.Wa=new Je,this.vb=new Je,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new _e,this.yc=new Te}function Bu(){this.xb=this.a=0,this.l=new $o,this.ca=new Zr,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new le,this.Pb=0,this.wd=new le,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new Fn,this.ab=0,this.gc=m(4,Nn),this.Oc=0}function ja(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new $o,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function pa(j,K,ue,be,je,Ke,et){for(j=j==null?0:j[K+0],K=0;K<et;++K)je[Ke+K]=j+ue[be+K]&255,j=je[Ke+K]}function Hl(j,K,ue,be,je,Ke,et){var at;if(j==null)pa(null,null,ue,be,je,Ke,et);else for(at=0;at<et;++at)je[Ke+at]=j[K+at]+ue[be+at]&255}function ma(j,K,ue,be,je,Ke,et){if(j==null)pa(null,null,ue,be,je,Ke,et);else{var at,pt=j[K+0],St=pt,ai=pt;for(at=0;at<et;++at)St=ai+(pt=j[K+at])-St,ai=ue[be+at]+(-256&St?0>St?0:255:St)&255,St=pt,je[Ke+at]=ai}}function ko(j,K,ue,be){var je=K.width,Ke=K.o;if(e(j!=null&&K!=null),0>ue||0>=be||ue+be>Ke)return null;if(!j.Cc){if(j.ga==null){var et;if(j.ga=new ja,(et=j.ga==null)||(et=K.width*K.o,e(j.Gb.length==0),j.Gb=u(et),j.Uc=0,j.Gb==null?et=0:(j.mb=j.Gb,j.nb=j.Uc,j.rc=null,et=1),et=!et),!et){et=j.ga;var at=j.Fa,pt=j.P,St=j.qc,ai=j.mb,Ai=j.nb,wi=pt+1,pi=St-1,rn=et.l;if(e(at!=null&&ai!=null&&K!=null),z[0]=null,z[1]=pa,z[2]=Hl,z[3]=ma,et.ca=ai,et.tb=Ai,et.c=K.width,et.i=K.height,e(0<et.c&&0<et.i),1>=St)K=0;else if(et.$a=at[pt+0]>>0&3,et.Z=at[pt+0]>>2&3,et.Lc=at[pt+0]>>4&3,pt=at[pt+0]>>6&3,0>et.$a||1<et.$a||4<=et.Z||1<et.Lc||pt)K=0;else if(rn.put=gr,rn.ac=Wn,rn.bc=Kr,rn.ma=et,rn.width=K.width,rn.height=K.height,rn.Da=K.Da,rn.v=K.v,rn.va=K.va,rn.j=K.j,rn.o=K.o,et.$a)e:{e(et.$a==1),K=Ft();t:for(;;){if(K==null){K=0;break e}if(e(et!=null),et.mc=K,K.c=et.c,K.i=et.i,K.l=et.l,K.l.ma=et,K.l.width=et.c,K.l.height=et.i,K.a=0,Xe(K.m,at,wi,pi),!oi(et.c,et.i,1,K,null)||(K.ab==1&&K.gc[0].hc==3&&ct(K.s)?(et.ic=1,at=K.c*K.i,K.Ta=null,K.Ua=0,K.V=u(at),K.Ba=0,K.V==null?(K.a=1,K=0):K=1):(et.ic=0,K=yt(K,et.c)),!K))break t;K=1;break e}et.mc=null,K=0}else K=pi>=et.c*et.i;et=!K}if(et)return null;j.ga.Lc!=1?j.Ga=0:be=Ke-ue}e(j.ga!=null),e(ue+be<=Ke);e:{if(K=(at=j.ga).c,Ke=at.l.o,at.$a==0){if(wi=j.rc,pi=j.Vc,rn=j.Fa,pt=j.P+1+ue*K,St=j.mb,ai=j.nb+ue*K,e(pt<=j.P+j.qc),at.Z!=0)for(e(z[at.Z]!=null),et=0;et<be;++et)z[at.Z](wi,pi,rn,pt,St,ai,K),wi=St,pi=ai,ai+=K,pt+=K;else for(et=0;et<be;++et)o(St,ai,rn,pt,K),wi=St,pi=ai,ai+=K,pt+=K;j.rc=wi,j.Vc=pi}else{if(e(at.mc!=null),K=ue+be,e((et=at.mc)!=null),e(K<=et.i),et.C>=K)K=1;else if(at.ic||hi(),at.ic){at=et.V,wi=et.Ba,pi=et.c;var Oi=et.i,Wt=(rn=1,pt=et.$/pi,St=et.$%pi,ai=et.m,Ai=et.s,et.$),ii=pi*Oi,Hi=pi*K,Ji=Ai.wc,Ui=Wt<Hi?Le(Ai,St,pt):null;e(Wt<=ii),e(K<=Oi),e(ct(Ai));t:for(;;){for(;!ai.h&&Wt<Hi;){if(St&Ji||(Ui=Le(Ai,St,pt)),e(Ui!=null),Be(ai),256>(Oi=xo(Ui.G[0],Ui.H[0],ai)))at[wi+Wt]=Oi,++Wt,++St>=pi&&(St=0,++pt<=K&&!(pt%16)&&Bt(et,pt));else{if(!(280>Oi)){rn=0;break t}Oi=He(Oi-256,ai);var Dn,Cn=xo(Ui.G[4],Ui.H[4],ai);if(Be(ai),!(Wt>=(Cn=wo(pi,Cn=He(Cn,ai)))&&ii-Wt>=Oi)){rn=0;break t}for(Dn=0;Dn<Oi;++Dn)at[wi+Wt+Dn]=at[wi+Wt+Dn-Cn];for(Wt+=Oi,St+=Oi;St>=pi;)St-=pi,++pt<=K&&!(pt%16)&&Bt(et,pt);Wt<Hi&&St&Ji&&(Ui=Le(Ai,St,pt))}e(ai.h==he(ai))}Bt(et,pt>K?K:pt);break t}!rn||ai.h&&Wt<ii?(rn=0,et.a=ai.h?5:3):et.$=Wt,K=rn}else K=Ge(et,et.V,et.Ba,et.c,et.i,K,Ri);if(!K){be=0;break e}}ue+be>=Ke&&(j.Cc=1),be=1}if(!be)return null;if(j.Cc&&((be=j.ga)!=null&&(be.mc=null),j.ga=null,0<j.Ga))return alert("todo:WebPDequantizeLevels"),null}return j.nb+ue*je}function se(j,K,ue,be,je,Ke){for(;0<je--;){var et,at=j,pt=K+(ue?1:0),St=j,ai=K+(ue?0:3);for(et=0;et<be;++et){var Ai=St[ai+4*et];Ai!=255&&(Ai*=32897,at[pt+4*et+0]=at[pt+4*et+0]*Ai>>23,at[pt+4*et+1]=at[pt+4*et+1]*Ai>>23,at[pt+4*et+2]=at[pt+4*et+2]*Ai>>23)}K+=Ke}}function Ue(j,K,ue,be,je){for(;0<be--;){var Ke;for(Ke=0;Ke<ue;++Ke){var et=j[K+2*Ke+0],at=15&(St=j[K+2*Ke+1]),pt=4369*at,St=(240&St|St>>4)*pt>>16;j[K+2*Ke+0]=(240&et|et>>4)*pt>>16&240|(15&et|et<<4)*pt>>16>>4&15,j[K+2*Ke+1]=240&St|at}K+=je}}function At(j,K,ue,be,je,Ke,et,at){var pt,St,ai=255;for(St=0;St<je;++St){for(pt=0;pt<be;++pt){var Ai=j[K+pt];Ke[et+4*pt]=Ai,ai&=Ai}K+=ue,et+=at}return ai!=255}function Jt(j,K,ue,be,je){var Ke;for(Ke=0;Ke<je;++Ke)ue[be+Ke]=j[K+Ke]>>8}function hi(){Da=se,Vu=Ue,qu=At,Fc=Jt}function qi(j,K,ue){ie[j]=function(be,je,Ke,et,at,pt,St,ai,Ai,wi,pi,rn,Oi,Wt,ii,Hi,Ji){var Ui,Dn=Ji-1>>1,Cn=at[pt+0]|St[ai+0]<<16,kr=Ai[wi+0]|pi[rn+0]<<16;e(be!=null);var On=3*Cn+kr+131074>>2;for(K(be[je+0],255&On,On>>16,Oi,Wt),Ke!=null&&(On=3*kr+Cn+131074>>2,K(Ke[et+0],255&On,On>>16,ii,Hi)),Ui=1;Ui<=Dn;++Ui){var bo=at[pt+Ui]|St[ai+Ui]<<16,So=Ai[wi+Ui]|pi[rn+Ui]<<16,Yr=Cn+bo+kr+So+524296,qr=Yr+2*(bo+kr)>>3;On=qr+Cn>>1,Cn=(Yr=Yr+2*(Cn+So)>>3)+bo>>1,K(be[je+2*Ui-1],255&On,On>>16,Oi,Wt+(2*Ui-1)*ue),K(be[je+2*Ui-0],255&Cn,Cn>>16,Oi,Wt+(2*Ui-0)*ue),Ke!=null&&(On=Yr+kr>>1,Cn=qr+So>>1,K(Ke[et+2*Ui-1],255&On,On>>16,ii,Hi+(2*Ui-1)*ue),K(Ke[et+2*Ui+0],255&Cn,Cn>>16,ii,Hi+(2*Ui+0)*ue)),Cn=bo,kr=So}1&Ji||(On=3*Cn+kr+131074>>2,K(be[je+Ji-1],255&On,On>>16,Oi,Wt+(Ji-1)*ue),Ke!=null&&(On=3*kr+Cn+131074>>2,K(Ke[et+Ji-1],255&On,On>>16,ii,Hi+(Ji-1)*ue)))}}function hn(){W[Va]=ne,W[lc]=ye,W[bu]=pe,W[wu]=ke,W[Yl]=ze,W[io]=Qe,W[ya]=rt,W[No]=ye,W[xu]=ke,W[Au]=ze,W[Bc]=Qe}function Zn(j){return j&~xi?0>j?0:255:j>>fi}function Ar(j,K){return Zn((19077*j>>8)+(26149*K>>8)-14234)}function Nr(j,K,ue){return Zn((19077*j>>8)-(6419*K>>8)-(13320*ue>>8)+8708)}function Wr(j,K){return Zn((19077*j>>8)+(33050*K>>8)-17685)}function eo(j,K,ue,be,je){be[je+0]=Ar(j,ue),be[je+1]=Nr(j,K,ue),be[je+2]=Wr(j,K)}function Bo(j,K,ue,be,je){be[je+0]=Wr(j,K),be[je+1]=Nr(j,K,ue),be[je+2]=Ar(j,ue)}function qo(j,K,ue,be,je){var Ke=Nr(j,K,ue);K=Ke<<3&224|Wr(j,K)>>3,be[je+0]=248&Ar(j,ue)|Ke>>5,be[je+1]=K}function Wo(j,K,ue,be,je){var Ke=240&Wr(j,K)|15;be[je+0]=240&Ar(j,ue)|Nr(j,K,ue)>>4,be[je+1]=Ke}function Cs(j,K,ue,be,je){be[je+0]=255,eo(j,K,ue,be,je+1)}function ds(j,K,ue,be,je){Bo(j,K,ue,be,je),be[je+3]=255}function jr(j,K,ue,be,je){eo(j,K,ue,be,je),be[je+3]=255}function Es(j,K){return 0>j?0:j>K?K:j}function vs(j,K,ue){ie[j]=function(be,je,Ke,et,at,pt,St,ai,Ai){for(var wi=ai+(-2&Ai)*ue;ai!=wi;)K(be[je+0],Ke[et+0],at[pt+0],St,ai),K(be[je+1],Ke[et+0],at[pt+0],St,ai+ue),je+=2,++et,++pt,ai+=2*ue;1&Ai&&K(be[je+0],Ke[et+0],at[pt+0],St,ai)}}function Gl(j,K,ue){return ue==0?j==0?K==0?6:5:K==0?4:0:ue}function kl(j,K,ue,be,je){switch(j>>>30){case 3:ju(K,ue,be,je,0);break;case 2:Ma(K,ue,be,je);break;case 1:Xr(K,ue,be,je)}}function zu(j,K){var ue,be,je=K.M,Ke=K.Nb,et=j.oc,at=j.pc+40,pt=j.oc,St=j.pc+584,ai=j.oc,Ai=j.pc+600;for(ue=0;16>ue;++ue)et[at+32*ue-1]=129;for(ue=0;8>ue;++ue)pt[St+32*ue-1]=129,ai[Ai+32*ue-1]=129;for(0<je?et[at-1-32]=pt[St-1-32]=ai[Ai-1-32]=129:(l(et,at-32-1,127,21),l(pt,St-32-1,127,9),l(ai,Ai-32-1,127,9)),be=0;be<j.za;++be){var wi=K.ya[K.aa+be];if(0<be){for(ue=-1;16>ue;++ue)o(et,at+32*ue-4,et,at+32*ue+12,4);for(ue=-1;8>ue;++ue)o(pt,St+32*ue-4,pt,St+32*ue+4,4),o(ai,Ai+32*ue-4,ai,Ai+32*ue+4,4)}var pi=j.Gd,rn=j.Hd+be,Oi=wi.ad,Wt=wi.Hc;if(0<je&&(o(et,at-32,pi[rn].y,0,16),o(pt,St-32,pi[rn].f,0,8),o(ai,Ai-32,pi[rn].ea,0,8)),wi.Za){var ii=et,Hi=at-32+16;for(0<je&&(be>=j.za-1?l(ii,Hi,pi[rn].y[15],4):o(ii,Hi,pi[rn+1].y,0,4)),ue=0;4>ue;ue++)ii[Hi+128+ue]=ii[Hi+256+ue]=ii[Hi+384+ue]=ii[Hi+0+ue];for(ue=0;16>ue;++ue,Wt<<=2)ii=et,Hi=at+Rn[ue],B[wi.Ob[ue]](ii,Hi),kl(Wt,Oi,16*+ue,ii,Hi)}else if(ii=Gl(be,je,wi.Ob[0]),sa[ii](et,at),Wt!=0)for(ue=0;16>ue;++ue,Wt<<=2)kl(Wt,Oi,16*+ue,et,at+Rn[ue]);for(ue=wi.Gc,ii=Gl(be,je,wi.Dd),d[ii](pt,St),d[ii](ai,Ai),Wt=Oi,ii=pt,Hi=St,255&(wi=ue>>0)&&(170&wi?oa(Wt,256,ii,Hi):ga(Wt,256,ii,Hi)),wi=ai,Wt=Ai,255&(ue>>=8)&&(170&ue?oa(Oi,320,wi,Wt):ga(Oi,320,wi,Wt)),je<j.Ub-1&&(o(pi[rn].y,0,et,at+480,16),o(pi[rn].f,0,pt,St+224,8),o(pi[rn].ea,0,ai,Ai+224,8)),ue=8*Ke*j.B,pi=j.sa,rn=j.ta+16*be+16*Ke*j.R,Oi=j.qa,wi=j.ra+8*be+ue,Wt=j.Ha,ii=j.Ia+8*be+ue,ue=0;16>ue;++ue)o(pi,rn+ue*j.R,et,at+32*ue,16);for(ue=0;8>ue;++ue)o(Oi,wi+ue*j.B,pt,St+32*ue,8),o(Wt,ii+ue*j.B,ai,Ai+32*ue,8)}}function Ia(j,K,ue,be,je,Ke,et,at,pt){var St=[0],ai=[0],Ai=0,wi=pt!=null?pt.kd:0,pi=pt!=null?pt:new mu;if(j==null||12>ue)return 7;pi.data=j,pi.w=K,pi.ha=ue,K=[K],ue=[ue],pi.gb=[pi.gb];e:{var rn=K,Oi=ue,Wt=pi.gb;if(e(j!=null),e(Oi!=null),e(Wt!=null),Wt[0]=0,12<=Oi[0]&&!t(j,rn[0],"RIFF")){if(t(j,rn[0]+8,"WEBP")){Wt=3;break e}var ii=ut(j,rn[0]+4);if(12>ii||4294967286<ii){Wt=3;break e}if(wi&&ii>Oi[0]-8){Wt=7;break e}Wt[0]=ii,rn[0]+=12,Oi[0]-=12}Wt=0}if(Wt!=0)return Wt;for(ii=0<pi.gb[0],ue=ue[0];;){e:{var Hi=j;Oi=K,Wt=ue;var Ji=St,Ui=ai,Dn=rn=[0];if((On=Ai=[Ai])[0]=0,8>Wt[0])Wt=7;else{if(!t(Hi,Oi[0],"VP8X")){if(ut(Hi,Oi[0]+4)!=10){Wt=3;break e}if(18>Wt[0]){Wt=7;break e}var Cn=ut(Hi,Oi[0]+8),kr=1+ri(Hi,Oi[0]+12);if(2147483648<=kr*(Hi=1+ri(Hi,Oi[0]+15))){Wt=3;break e}Dn!=null&&(Dn[0]=Cn),Ji!=null&&(Ji[0]=kr),Ui!=null&&(Ui[0]=Hi),Oi[0]+=18,Wt[0]-=18,On[0]=1}Wt=0}}if(Ai=Ai[0],rn=rn[0],Wt!=0)return Wt;if(Oi=!!(2&rn),!ii&&Ai)return 3;if(Ke!=null&&(Ke[0]=!!(16&rn)),et!=null&&(et[0]=Oi),at!=null&&(at[0]=0),et=St[0],rn=ai[0],Ai&&Oi&&pt==null){Wt=0;break}if(4>ue){Wt=7;break}if(ii&&Ai||!ii&&!Ai&&!t(j,K[0],"ALPH")){ue=[ue],pi.na=[pi.na],pi.P=[pi.P],pi.Sa=[pi.Sa];e:{Cn=j,Wt=K,ii=ue;var On=pi.gb;Ji=pi.na,Ui=pi.P,Dn=pi.Sa,kr=22,e(Cn!=null),e(ii!=null),Hi=Wt[0];var bo=ii[0];for(e(Ji!=null),e(Dn!=null),Ji[0]=null,Ui[0]=null,Dn[0]=0;;){if(Wt[0]=Hi,ii[0]=bo,8>bo){Wt=7;break e}var So=ut(Cn,Hi+4);if(4294967286<So){Wt=3;break e}var Yr=8+So+1&-2;if(kr+=Yr,0<On&&kr>On){Wt=3;break e}if(!t(Cn,Hi,"VP8 ")||!t(Cn,Hi,"VP8L")){Wt=0;break e}if(bo[0]<Yr){Wt=7;break e}t(Cn,Hi,"ALPH")||(Ji[0]=Cn,Ui[0]=Hi+8,Dn[0]=So),Hi+=Yr,bo-=Yr}}if(ue=ue[0],pi.na=pi.na[0],pi.P=pi.P[0],pi.Sa=pi.Sa[0],Wt!=0)break}ue=[ue],pi.Ja=[pi.Ja],pi.xa=[pi.xa];e:if(On=j,Wt=K,ii=ue,Ji=pi.gb[0],Ui=pi.Ja,Dn=pi.xa,Cn=Wt[0],Hi=!t(On,Cn,"VP8 "),kr=!t(On,Cn,"VP8L"),e(On!=null),e(ii!=null),e(Ui!=null),e(Dn!=null),8>ii[0])Wt=7;else{if(Hi||kr){if(On=ut(On,Cn+4),12<=Ji&&On>Ji-12){Wt=3;break e}if(wi&&On>ii[0]-8){Wt=7;break e}Ui[0]=On,Wt[0]+=8,ii[0]-=8,Dn[0]=kr}else Dn[0]=5<=ii[0]&&On[Cn+0]==47&&!(On[Cn+4]>>5),Ui[0]=ii[0];Wt=0}if(ue=ue[0],pi.Ja=pi.Ja[0],pi.xa=pi.xa[0],K=K[0],Wt!=0)break;if(4294967286<pi.Ja)return 3;if(at==null||Oi||(at[0]=pi.xa?2:1),et=[et],rn=[rn],pi.xa){if(5>ue){Wt=7;break}at=et,wi=rn,Oi=Ke,j==null||5>ue?j=0:5<=ue&&j[K+0]==47&&!(j[K+4]>>5)?(ii=[0],On=[0],Ji=[0],Xe(Ui=new le,j,K,ue),an(Ui,ii,On,Ji)?(at!=null&&(at[0]=ii[0]),wi!=null&&(wi[0]=On[0]),Oi!=null&&(Oi[0]=Ji[0]),j=1):j=0):j=0}else{if(10>ue){Wt=7;break}at=rn,j==null||10>ue||!Dt(j,K+3,ue-3)?j=0:(wi=j[K+0]|j[K+1]<<8|j[K+2]<<16,Oi=16383&(j[K+7]<<8|j[K+6]),j=16383&(j[K+9]<<8|j[K+8]),1&wi||3<(wi>>1&7)||!(wi>>4&1)||wi>>5>=pi.Ja||!Oi||!j?j=0:(et&&(et[0]=Oi),at&&(at[0]=j),j=1))}if(!j||(et=et[0],rn=rn[0],Ai&&(St[0]!=et||ai[0]!=rn)))return 3;pt!=null&&(pt[0]=pi,pt.offset=K-pt.w,e(4294967286>K-pt.w),e(pt.offset==pt.ha-ue));break}return Wt==0||Wt==7&&Ai&&pt==null?(Ke!=null&&(Ke[0]|=pi.na!=null&&0<pi.na.length),be!=null&&(be[0]=et),je!=null&&(je[0]=rn),0):Wt}function Sl(j,K,ue){var be=K.width,je=K.height,Ke=0,et=0,at=be,pt=je;if(K.Da=j!=null&&0<j.Da,K.Da&&(at=j.cd,pt=j.bd,Ke=j.v,et=j.j,11>ue||(Ke&=-2,et&=-2),0>Ke||0>et||0>=at||0>=pt||Ke+at>be||et+pt>je))return 0;if(K.v=Ke,K.j=et,K.va=Ke+at,K.o=et+pt,K.U=at,K.T=pt,K.da=j!=null&&0<j.da,K.da){if(!ei(at,pt,ue=[j.ib],Ke=[j.hb]))return 0;K.ib=ue[0],K.hb=Ke[0]}return K.ob=j!=null&&j.ob,K.Kb=j==null||!j.Sd,K.da&&(K.ob=K.ib<3*be/4&&K.hb<3*je/4,K.Kb=0),1}function nl(j){if(j==null)return 2;if(11>j.S){var K=j.f.RGBA;K.fb+=(j.height-1)*K.A,K.A=-K.A}else K=j.f.kb,j=j.height,K.O+=(j-1)*K.fa,K.fa=-K.fa,K.N+=(j-1>>1)*K.Ab,K.Ab=-K.Ab,K.W+=(j-1>>1)*K.Db,K.Db=-K.Db,K.F!=null&&(K.J+=(j-1)*K.lb,K.lb=-K.lb);return 0}function Nu(j,K,ue,be){if(be==null||0>=j||0>=K)return 2;if(ue!=null){if(ue.Da){var je=ue.cd,Ke=ue.bd,et=-2&ue.v,at=-2&ue.j;if(0>et||0>at||0>=je||0>=Ke||et+je>j||at+Ke>K)return 2;j=je,K=Ke}if(ue.da){if(!ei(j,K,je=[ue.ib],Ke=[ue.hb]))return 2;j=je[0],K=Ke[0]}}be.width=j,be.height=K;e:{var pt=be.width,St=be.height;if(j=be.S,0>=pt||0>=St||!(j>=Va&&13>j))j=2;else{if(0>=be.Rd&&be.sd==null){et=Ke=je=K=0;var ai=(at=pt*Mr[j])*St;if(11>j||(Ke=(St+1)/2*(K=(pt+1)/2),j==12&&(et=(je=pt)*St)),(St=u(ai+2*Ke+et))==null){j=1;break e}be.sd=St,11>j?((pt=be.f.RGBA).eb=St,pt.fb=0,pt.A=at,pt.size=ai):((pt=be.f.kb).y=St,pt.O=0,pt.fa=at,pt.Fd=ai,pt.f=St,pt.N=0+ai,pt.Ab=K,pt.Cd=Ke,pt.ea=St,pt.W=0+ai+Ke,pt.Db=K,pt.Ed=Ke,j==12&&(pt.F=St,pt.J=0+ai+2*Ke),pt.Tc=et,pt.lb=je)}if(K=1,je=be.S,Ke=be.width,et=be.height,je>=Va&&13>je)if(11>je)j=be.f.RGBA,K&=(at=Math.abs(j.A))*(et-1)+Ke<=j.size,K&=at>=Ke*Mr[je],K&=j.eb!=null;else{j=be.f.kb,at=(Ke+1)/2,ai=(et+1)/2,pt=Math.abs(j.fa),St=Math.abs(j.Ab);var Ai=Math.abs(j.Db),wi=Math.abs(j.lb),pi=wi*(et-1)+Ke;K&=pt*(et-1)+Ke<=j.Fd,K&=St*(ai-1)+at<=j.Cd,K=(K&=Ai*(ai-1)+at<=j.Ed)&pt>=Ke&St>=at&Ai>=at,K&=j.y!=null,K&=j.f!=null,K&=j.ea!=null,je==12&&(K&=wi>=Ke,K&=pi<=j.Tc,K&=j.F!=null)}else K=0;j=K?0:2}}return j!=0||ue!=null&&ue.fd&&(j=nl(be)),j}var Fs=64,gu=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],Wl=24,Ua=32,yu=8,Rs=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];Si("Predictor0","PredictorAdd0"),ie.Predictor0=function(){return 4278190080},ie.Predictor1=function(j){return j},ie.Predictor2=function(j,K,ue){return K[ue+0]},ie.Predictor3=function(j,K,ue){return K[ue+1]},ie.Predictor4=function(j,K,ue){return K[ue-1]},ie.Predictor5=function(j,K,ue){return Xt(Xt(j,K[ue+1]),K[ue+0])},ie.Predictor6=function(j,K,ue){return Xt(j,K[ue-1])},ie.Predictor7=function(j,K,ue){return Xt(j,K[ue+0])},ie.Predictor8=function(j,K,ue){return Xt(K[ue-1],K[ue+0])},ie.Predictor9=function(j,K,ue){return Xt(K[ue+0],K[ue+1])},ie.Predictor10=function(j,K,ue){return Xt(Xt(j,K[ue-1]),Xt(K[ue+0],K[ue+1]))},ie.Predictor11=function(j,K,ue){var be=K[ue+0];return 0>=Ci(be>>24&255,j>>24&255,(K=K[ue-1])>>24&255)+Ci(be>>16&255,j>>16&255,K>>16&255)+Ci(be>>8&255,j>>8&255,K>>8&255)+Ci(255&be,255&j,255&K)?be:j},ie.Predictor12=function(j,K,ue){var be=K[ue+0];return(mi((j>>24&255)+(be>>24&255)-((K=K[ue-1])>>24&255))<<24|mi((j>>16&255)+(be>>16&255)-(K>>16&255))<<16|mi((j>>8&255)+(be>>8&255)-(K>>8&255))<<8|mi((255&j)+(255&be)-(255&K)))>>>0},ie.Predictor13=function(j,K,ue){var be=K[ue-1];return(Zi((j=Xt(j,K[ue+0]))>>24&255,be>>24&255)<<24|Zi(j>>16&255,be>>16&255)<<16|Zi(j>>8&255,be>>8&255)<<8|Zi(j>>0&255,be>>0&255))>>>0};var _u=ie.PredictorAdd0;ie.PredictorAdd1=ti,Si("Predictor2","PredictorAdd2"),Si("Predictor3","PredictorAdd3"),Si("Predictor4","PredictorAdd4"),Si("Predictor5","PredictorAdd5"),Si("Predictor6","PredictorAdd6"),Si("Predictor7","PredictorAdd7"),Si("Predictor8","PredictorAdd8"),Si("Predictor9","PredictorAdd9"),Si("Predictor10","PredictorAdd10"),Si("Predictor11","PredictorAdd11"),Si("Predictor12","PredictorAdd12"),Si("Predictor13","PredictorAdd13");var rl=ie.PredictorAdd2;$e("ColorIndexInverseTransform","MapARGB","32b",function(j){return j>>8&255},function(j){return j}),$e("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(j){return j},function(j){return j>>8&255});var Xl,Ta=ie.ColorIndexInverseTransform,Cl=ie.MapARGB,Dc=ie.VP8LColorIndexInverseTransformAlpha,Oc=ie.MapAlpha,El=ie.VP8LPredictorsAdd=[];El.length=16,(ie.VP8LPredictors=[]).length=16,(ie.VP8LPredictorsAdd_C=[]).length=16,(ie.VP8LPredictors_C=[]).length=16;var Bs,La,Pa,ra,ls,ol,Ko,ju,Ma,oa,Xr,ga,Il,Uu,vu,Gs,Tl,ps,Pn,zo,Hr,Po,is,yn,Da,Vu,qu,Fc,uh=u(511),ch=u(2041),Fh=u(225),Tr=u(767),Rc=0,ac=ch,Jo=Fh,Ks=Tr,Xo=uh,Va=0,lc=1,bu=2,wu=3,Yl=4,io=5,ya=6,No=7,xu=8,Au=9,Bc=10,Rh=[2,3,7],sl=[3,3,11],Bh=[280,256,256,256,40],al=[0,1,1,1,0],uc=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],er=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],yr=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],Hu=8,cc=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],bs=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],Ho=null,Zl=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],ll=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],hh=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],Kl=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],ns=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],ms=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],fh=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],sa=[],B=[],d=[],I=1,D=2,z=[],W=[];qi("UpsampleRgbLinePair",eo,3),qi("UpsampleBgrLinePair",Bo,3),qi("UpsampleRgbaLinePair",jr,4),qi("UpsampleBgraLinePair",ds,4),qi("UpsampleArgbLinePair",Cs,4),qi("UpsampleRgba4444LinePair",Wo,2),qi("UpsampleRgb565LinePair",qo,2);var ne=ie.UpsampleRgbLinePair,pe=ie.UpsampleBgrLinePair,ye=ie.UpsampleRgbaLinePair,ke=ie.UpsampleBgraLinePair,ze=ie.UpsampleArgbLinePair,Qe=ie.UpsampleRgba4444LinePair,rt=ie.UpsampleRgb565LinePair,Pt=16,kt=1<<Pt-1,Et=-227,si=482,fi=6,xi=(256<<fi)-1,Nt=0,Pi=u(256),Ei=u(256),Vi=u(256),Ni=u(256),cn=u(si-Et),zi=u(si-Et);vs("YuvToRgbRow",eo,3),vs("YuvToBgrRow",Bo,3),vs("YuvToRgbaRow",jr,4),vs("YuvToBgraRow",ds,4),vs("YuvToArgbRow",Cs,4),vs("YuvToRgba4444Row",Wo,2),vs("YuvToRgb565Row",qo,2);var Rn=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],_n=[0,2,8],qn=[8,7,6,4,4,2,2,2,1,1,1,1],Er=1;this.WebPDecodeRGBA=function(j,K,ue,be,je){var Ke=lc,et=new ql,at=new Zr;et.ba=at,at.S=Ke,at.width=[at.width],at.height=[at.height];var pt=at.width,St=at.height,ai=new zn;if(ai==null||j==null)var Ai=2;else e(ai!=null),Ai=Ia(j,K,ue,ai.width,ai.height,ai.Pd,ai.Qd,ai.format,null);if(Ai!=0?pt=0:(pt!=null&&(pt[0]=ai.width[0]),St!=null&&(St[0]=ai.height[0]),pt=1),pt){at.width=at.width[0],at.height=at.height[0],be!=null&&(be[0]=at.width),je!=null&&(je[0]=at.height);e:{if(be=new $o,(je=new mu).data=j,je.w=K,je.ha=ue,je.kd=1,K=[0],e(je!=null),((j=Ia(je.data,je.w,je.ha,null,null,null,K,null,je))==0||j==7)&&K[0]&&(j=4),(K=j)==0){if(e(et!=null),be.data=je.data,be.w=je.w+je.offset,be.ha=je.ha-je.offset,be.put=gr,be.ac=Wn,be.bc=Kr,be.ma=et,je.xa){if((j=Ft())==null){et=1;break e}if(function(wi,pi){var rn=[0],Oi=[0],Wt=[0];t:for(;;){if(wi==null)return 0;if(pi==null)return wi.a=2,0;if(wi.l=pi,wi.a=0,Xe(wi.m,pi.data,pi.w,pi.ha),!an(wi.m,rn,Oi,Wt)){wi.a=3;break t}if(wi.xb=D,pi.width=rn[0],pi.height=Oi[0],!oi(rn[0],Oi[0],1,wi,null))break t;return 1}return e(wi.a!=0),0}(j,be)){if(be=(K=Nu(be.width,be.height,et.Oa,et.ba))==0){t:{be=j;i:for(;;){if(be==null){be=0;break t}if(e(be.s.yc!=null),e(be.s.Ya!=null),e(0<be.s.Wb),e((ue=be.l)!=null),e((je=ue.ma)!=null),be.xb!=0){if(be.ca=je.ba,be.tb=je.tb,e(be.ca!=null),!Sl(je.Oa,ue,wu)){be.a=2;break i}if(!yt(be,ue.width)||ue.da)break i;if((ue.da||Ki(be.ca.S))&&hi(),11>be.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),be.ca.f.kb.F!=null&&hi()),be.Pb&&0<be.s.ua&&be.s.vb.X==null&&!wt(be.s.vb,be.s.Wa.Xa)){be.a=1;break i}be.xb=0}if(!Ge(be,be.V,be.Ba,be.c,be.i,ue.o,qe))break i;je.Dc=be.Ma,be=1;break t}e(be.a!=0),be=0}be=!be}be&&(K=j.a)}else K=j.a}else{if((j=new tl)==null){et=1;break e}if(j.Fa=je.na,j.P=je.P,j.qc=je.Sa,rr(j,be)){if((K=Nu(be.width,be.height,et.Oa,et.ba))==0){if(j.Aa=0,ue=et.Oa,e((je=j)!=null),ue!=null){if(0<(pt=0>(pt=ue.Md)?0:100<pt?255:255*pt/100)){for(St=ai=0;4>St;++St)12>(Ai=je.pb[St]).lc&&(Ai.ia=pt*qn[0>Ai.lc?0:Ai.lc]>>3),ai|=Ai.ia;ai&&(alert("todo:VP8InitRandom"),je.ia=1)}je.Ga=ue.Id,100<je.Ga?je.Ga=100:0>je.Ga&&(je.Ga=0)}Zo(j,be)||(K=j.a)}}else K=j.a}K==0&&et.Oa!=null&&et.Oa.fd&&(K=nl(et.ba))}et=K}Ke=et!=0?null:11>Ke?at.f.RGBA.eb:at.f.kb.y}else Ke=null;return Ke};var Mr=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function _(ie,Ee){for(var Pe="",de=0;de<4;de++)Pe+=String.fromCharCode(ie[Ee++]);return Pe}function b(ie,Ee){return(ie[Ee+0]<<0|ie[Ee+1]<<8|ie[Ee+2]<<16)>>>0}function v(ie,Ee){return(ie[Ee+0]<<0|ie[Ee+1]<<8|ie[Ee+2]<<16|ie[Ee+3]<<24)>>>0}new f;var w=[0],x=[0],C=[],T=new f,S=i,M=function(ie,Ee){var Pe={},de=0,Te=!1,ve=0,_e=0;if(Pe.frames=[],!function(Se,he,me,Be){for(var We=0;We<Be;We++)if(Se[he+We]!=me.charCodeAt(We))return!0;return!1}(ie,Ee,"RIFF",4)){var ot,it;for(v(ie,Ee+=4),Ee+=8;Ee<ie.length;){var It=_(ie,Ee),Xe=v(ie,Ee+=4);Ee+=4;var we=Xe+(1&Xe);switch(It){case"VP8 ":case"VP8L":Pe.frames[de]===void 0&&(Pe.frames[de]={}),(le=Pe.frames[de]).src_off=Te?_e:Ee-8,le.src_size=ve+Xe+8,de++,Te&&(Te=!1,ve=0,_e=0);break;case"VP8X":(le=Pe.header={}).feature_flags=ie[Ee];var Ce=Ee+4;le.canvas_width=1+b(ie,Ce),Ce+=3,le.canvas_height=1+b(ie,Ce),Ce+=3;break;case"ALPH":Te=!0,ve=we+8,_e=Ee-8;break;case"ANIM":(le=Pe.header).bgcolor=v(ie,Ee),Ce=Ee+4,le.loop_count=(ot=ie)[(it=Ce)+0]<<0|ot[it+1]<<8,Ce+=2;break;case"ANMF":var Re,le;(le=Pe.frames[de]={}).offset_x=2*b(ie,Ee),Ee+=3,le.offset_y=2*b(ie,Ee),Ee+=3,le.width=1+b(ie,Ee),Ee+=3,le.height=1+b(ie,Ee),Ee+=3,le.duration=b(ie,Ee),Ee+=3,Re=ie[Ee++],le.dispose=1&Re,le.blend=Re>>1&1}It!="ANMF"&&(Ee+=we)}return Pe}}(S,0);M.response=S,M.rgbaoutput=!0,M.dataurl=!1;var O=M.header?M.header:null,V=M.frames?M.frames:null;if(O){O.loop_counter=O.loop_count,w=[O.canvas_height],x=[O.canvas_width];for(var X=0;X<V.length&&V[X].blend!=0;X++);}var Z=V[0],te=T.WebPDecodeRGBA(S,Z.src_off,Z.src_size,x,w);Z.rgba=te,Z.imgwidth=x[0],Z.imgheight=w[0];for(var J=0;J<x[0]*w[0]*4;J++)C[J]=te[J];return this.width=x,this.height=w,this.data=C,this}(function(i){var e=function(){return typeof F2=="function"},t=function(w,x,C,T){var S=4,M=m;switch(T){case i.image_compression.FAST:S=1,M=u;break;case i.image_compression.MEDIUM:S=6,M=r;break;case i.image_compression.SLOW:S=9,M=f}w=o(w,x,C,M);var O=F2(w,{level:S});return i.__addimage__.arrayBufferToBinaryString(O)},o=function(w,x,C,T){for(var S,M,O,V=w.length/x,X=new Uint8Array(w.length+V),Z=b(),te=0;te<V;te+=1){if(O=te*x,S=w.subarray(O,O+x),T)X.set(T(S,C,M),O+te);else{for(var J,ie=Z.length,Ee=[];J<ie;J+=1)Ee[J]=Z[J](S,C,M);var Pe=v(Ee.concat());X.set(Ee[Pe],O+te)}M=S}return X},l=function(w){var x=Array.apply([],w);return x.unshift(0),x},u=function(w,x){var C,T=[],S=w.length;T[0]=1;for(var M=0;M<S;M+=1)C=w[M-x]||0,T[M+1]=w[M]-C+256&255;return T},m=function(w,x,C){var T,S=[],M=w.length;S[0]=2;for(var O=0;O<M;O+=1)T=C&&C[O]||0,S[O+1]=w[O]-T+256&255;return S},r=function(w,x,C){var T,S,M=[],O=w.length;M[0]=3;for(var V=0;V<O;V+=1)T=w[V-x]||0,S=C&&C[V]||0,M[V+1]=w[V]+256-(T+S>>>1)&255;return M},f=function(w,x,C){var T,S,M,O,V=[],X=w.length;V[0]=4;for(var Z=0;Z<X;Z+=1)T=w[Z-x]||0,S=C&&C[Z]||0,M=C&&C[Z-x]||0,O=_(T,S,M),V[Z+1]=w[Z]-O+256&255;return V},_=function(w,x,C){if(w===x&&x===C)return w;var T=Math.abs(x-C),S=Math.abs(w-C),M=Math.abs(w+x-C-C);return T<=S&&T<=M?w:S<=M?x:C},b=function(){return[l,u,m,r,f]},v=function(w){var x=w.map(function(C){return C.reduce(function(T,S){return T+Math.abs(S)},0)});return x.indexOf(Math.min.apply(null,x))};i.processPNG=function(w,x,C,T){var S,M,O,V,X,Z,te,J,ie,Ee,Pe,de,Te,ve,_e,ot=this.decode.FLATE_DECODE,it="";if(this.__addimage__.isArrayBuffer(w)&&(w=new Uint8Array(w)),this.__addimage__.isArrayBufferView(w)){if(w=(O=new v8(w)).imgData,M=O.bits,S=O.colorSpace,X=O.colors,[4,6].indexOf(O.colorType)!==-1){if(O.bits===8){ie=(J=O.pixelBitlength==32?new Uint32Array(O.decodePixels().buffer):O.pixelBitlength==16?new Uint16Array(O.decodePixels().buffer):new Uint8Array(O.decodePixels().buffer)).length,Pe=new Uint8Array(ie*O.colors),Ee=new Uint8Array(ie);var It,Xe=O.pixelBitlength-O.bits;for(ve=0,_e=0;ve<ie;ve++){for(Te=J[ve],It=0;It<Xe;)Pe[_e++]=Te>>>It&255,It+=O.bits;Ee[ve]=Te>>>It&255}}if(O.bits===16){ie=(J=new Uint32Array(O.decodePixels().buffer)).length,Pe=new Uint8Array(ie*(32/O.pixelBitlength)*O.colors),Ee=new Uint8Array(ie*(32/O.pixelBitlength)),de=O.colors>1,ve=0,_e=0;for(var we=0;ve<ie;)Te=J[ve++],Pe[_e++]=Te>>>0&255,de&&(Pe[_e++]=Te>>>16&255,Te=J[ve++],Pe[_e++]=Te>>>0&255),Ee[we++]=Te>>>16&255;M=8}T!==i.image_compression.NONE&&e()?(w=t(Pe,O.width*O.colors,O.colors,T),te=t(Ee,O.width,1,T)):(w=Pe,te=Ee,ot=void 0)}if(O.colorType===3&&(S=this.color_spaces.INDEXED,Z=O.palette,O.transparency.indexed)){var Ce=O.transparency.indexed,Re=0;for(ve=0,ie=Ce.length;ve<ie;++ve)Re+=Ce[ve];if((Re/=255)===ie-1&&Ce.indexOf(0)!==-1)V=[Ce.indexOf(0)];else if(Re!==ie){for(J=O.decodePixels(),Ee=new Uint8Array(J.length),ve=0,ie=J.length;ve<ie;ve++)Ee[ve]=Ce[J[ve]];te=t(Ee,O.width,1)}}var le=function(Se){var he;switch(Se){case i.image_compression.FAST:he=11;break;case i.image_compression.MEDIUM:he=13;break;case i.image_compression.SLOW:he=14;break;default:he=12}return he}(T);return ot===this.decode.FLATE_DECODE&&(it="/Predictor "+le+" "),it+="/Colors "+X+" /BitsPerComponent "+M+" /Columns "+O.width,(this.__addimage__.isArrayBuffer(w)||this.__addimage__.isArrayBufferView(w))&&(w=this.__addimage__.arrayBufferToBinaryString(w)),(te&&this.__addimage__.isArrayBuffer(te)||this.__addimage__.isArrayBufferView(te))&&(te=this.__addimage__.arrayBufferToBinaryString(te)),{alias:C,data:w,index:x,filter:ot,decodeParameters:it,transparency:V,palette:Z,sMask:te,predictor:le,width:O.width,height:O.height,bitsPerComponent:M,colorSpace:S}}}})(Ur.API),function(i){i.processGIF89A=function(e,t,o,l){var u=new b8(e),m=u.width,r=u.height,f=[];u.decodeAndBlitFrameRGBA(0,f);var _={data:f,width:m,height:r},b=new Fm(100).encode(_,100);return i.processJPEG.call(this,b,t,o,l)},i.processGIF87A=i.processGIF89A}(Ur.API),Sc.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var i=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(i);for(var e=0;e<i;e++){var t=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),l=this.datav.getUint8(this.pos++,!0),u=this.datav.getUint8(this.pos++,!0);this.palette[e]={red:l,green:o,blue:t,quad:u}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},Sc.prototype.parseBGR=function(){this.pos=this.offset;try{var i="bit"+this.bitPP,e=this.width*this.height*4;this.data=new Uint8Array(e),this[i]()}catch(t){hs.log("bit decode error:"+t)}},Sc.prototype.bit1=function(){var i,e=Math.ceil(this.width/8),t=e%4;for(i=this.height-1;i>=0;i--){for(var o=this.bottom_up?i:this.height-1-i,l=0;l<e;l++)for(var u=this.datav.getUint8(this.pos++,!0),m=o*this.width*4+8*l*4,r=0;r<8&&8*l+r<this.width;r++){var f=this.palette[u>>7-r&1];this.data[m+4*r]=f.blue,this.data[m+4*r+1]=f.green,this.data[m+4*r+2]=f.red,this.data[m+4*r+3]=255}t!==0&&(this.pos+=4-t)}},Sc.prototype.bit4=function(){for(var i=Math.ceil(this.width/2),e=i%4,t=this.height-1;t>=0;t--){for(var o=this.bottom_up?t:this.height-1-t,l=0;l<i;l++){var u=this.datav.getUint8(this.pos++,!0),m=o*this.width*4+2*l*4,r=u>>4,f=15&u,_=this.palette[r];if(this.data[m]=_.blue,this.data[m+1]=_.green,this.data[m+2]=_.red,this.data[m+3]=255,2*l+1>=this.width)break;_=this.palette[f],this.data[m+4]=_.blue,this.data[m+4+1]=_.green,this.data[m+4+2]=_.red,this.data[m+4+3]=255}e!==0&&(this.pos+=4-e)}},Sc.prototype.bit8=function(){for(var i=this.width%4,e=this.height-1;e>=0;e--){for(var t=this.bottom_up?e:this.height-1-e,o=0;o<this.width;o++){var l=this.datav.getUint8(this.pos++,!0),u=t*this.width*4+4*o;if(l<this.palette.length){var m=this.palette[l];this.data[u]=m.red,this.data[u+1]=m.green,this.data[u+2]=m.blue,this.data[u+3]=255}else this.data[u]=255,this.data[u+1]=255,this.data[u+2]=255,this.data[u+3]=255}i!==0&&(this.pos+=4-i)}},Sc.prototype.bit15=function(){for(var i=this.width%3,e=parseInt("11111",2),t=this.height-1;t>=0;t--){for(var o=this.bottom_up?t:this.height-1-t,l=0;l<this.width;l++){var u=this.datav.getUint16(this.pos,!0);this.pos+=2;var m=(u&e)/e*255|0,r=(u>>5&e)/e*255|0,f=(u>>10&e)/e*255|0,_=u>>15?255:0,b=o*this.width*4+4*l;this.data[b]=f,this.data[b+1]=r,this.data[b+2]=m,this.data[b+3]=_}this.pos+=i}},Sc.prototype.bit16=function(){for(var i=this.width%3,e=parseInt("11111",2),t=parseInt("111111",2),o=this.height-1;o>=0;o--){for(var l=this.bottom_up?o:this.height-1-o,u=0;u<this.width;u++){var m=this.datav.getUint16(this.pos,!0);this.pos+=2;var r=(m&e)/e*255|0,f=(m>>5&t)/t*255|0,_=(m>>11)/e*255|0,b=l*this.width*4+4*u;this.data[b]=_,this.data[b+1]=f,this.data[b+2]=r,this.data[b+3]=255}this.pos+=i}},Sc.prototype.bit24=function(){for(var i=this.height-1;i>=0;i--){for(var e=this.bottom_up?i:this.height-1-i,t=0;t<this.width;t++){var o=this.datav.getUint8(this.pos++,!0),l=this.datav.getUint8(this.pos++,!0),u=this.datav.getUint8(this.pos++,!0),m=e*this.width*4+4*t;this.data[m]=u,this.data[m+1]=l,this.data[m+2]=o,this.data[m+3]=255}this.pos+=this.width%4}},Sc.prototype.bit32=function(){for(var i=this.height-1;i>=0;i--)for(var e=this.bottom_up?i:this.height-1-i,t=0;t<this.width;t++){var o=this.datav.getUint8(this.pos++,!0),l=this.datav.getUint8(this.pos++,!0),u=this.datav.getUint8(this.pos++,!0),m=this.datav.getUint8(this.pos++,!0),r=e*this.width*4+4*t;this.data[r]=u,this.data[r+1]=l,this.data[r+2]=o,this.data[r+3]=m}},Sc.prototype.getData=function(){return this.data},function(i){i.processBMP=function(e,t,o,l){var u=new Sc(e,!1),m=u.width,r=u.height,f={data:u.getData(),width:m,height:r},_=new Fm(100).encode(f,100);return i.processJPEG.call(this,_,t,o,l)}}(Ur.API),y_.prototype.getData=function(){return this.data},function(i){i.processWEBP=function(e,t,o,l){var u=new y_(e),m=u.width,r=u.height,f={data:u.getData(),width:m,height:r},_=new Fm(100).encode(f,100);return i.processJPEG.call(this,_,t,o,l)}}(Ur.API),Ur.API.processRGBA=function(i,e,t){for(var o=i.data,l=o.length,u=new Uint8Array(l/4*3),m=new Uint8Array(l/4),r=0,f=0,_=0;_<l;_+=4){var b=o[_],v=o[_+1],w=o[_+2],x=o[_+3];u[r++]=b,u[r++]=v,u[r++]=w,m[f++]=x}var C=this.__addimage__.arrayBufferToBinaryString(u);return{alpha:this.__addimage__.arrayBufferToBinaryString(m),data:C,index:e,alias:t,colorSpace:"DeviceRGB",bitsPerComponent:8,width:i.width,height:i.height}},Ur.API.setLanguage=function(i){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[i]!==void 0&&(this.internal.languageSettings.languageCode=i,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},b0=Ur.API,Np=b0.getCharWidthsArray=function(i,e){var t,o,l=(e=e||{}).font||this.internal.getFont(),u=e.fontSize||this.internal.getFontSize(),m=e.charSpace||this.internal.getCharSpace(),r=e.widths?e.widths:l.metadata.Unicode.widths,f=r.fof?r.fof:1,_=e.kerning?e.kerning:l.metadata.Unicode.kerning,b=_.fof?_.fof:1,v=e.doKerning!==!1,w=0,x=i.length,C=0,T=r[0]||f,S=[];for(t=0;t<x;t++)o=i.charCodeAt(t),typeof l.metadata.widthOfString=="function"?S.push((l.metadata.widthOfGlyph(l.metadata.characterToGlyph(o))+m*(1e3/u)||0)/1e3):(w=v&&es(_[o])==="object"&&!isNaN(parseInt(_[o][C],10))?_[o][C]/b:0,S.push((r[o]||T)/f+w)),C=o;return S},d_=b0.getStringUnitWidth=function(i,e){var t=(e=e||{}).fontSize||this.internal.getFontSize(),o=e.font||this.internal.getFont(),l=e.charSpace||this.internal.getCharSpace();return b0.processArabic&&(i=b0.processArabic(i)),typeof o.metadata.widthOfString=="function"?o.metadata.widthOfString(i,t,l)/t:Np.apply(this,arguments).reduce(function(u,m){return u+m},0)},p_=function(i,e,t,o){for(var l=[],u=0,m=i.length,r=0;u!==m&&r+e[u]<t;)r+=e[u],u++;l.push(i.slice(0,u));var f=u;for(r=0;u!==m;)r+e[u]>o&&(l.push(i.slice(f,u)),r=0,f=u),r+=e[u],u++;return f!==u&&l.push(i.slice(f,u)),l},m_=function(i,e,t){t||(t={});var o,l,u,m,r,f,_,b=[],v=[b],w=t.textIndent||0,x=0,C=0,T=i.split(" "),S=Np.apply(this,[" ",t])[0];if(f=t.lineIndent===-1?T[0].length+2:t.lineIndent||0){var M=Array(f).join(" "),O=[];T.map(function(X){(X=X.split(/\s*\n/)).length>1?O=O.concat(X.map(function(Z,te){return(te&&Z.length?`
`:"")+Z})):O.push(X[0])}),T=O,f=d_.apply(this,[M,t])}for(u=0,m=T.length;u<m;u++){var V=0;if(o=T[u],f&&o[0]==`
`&&(o=o.substr(1),V=1),w+x+(C=(l=Np.apply(this,[o,t])).reduce(function(X,Z){return X+Z},0))>e||V){if(C>e){for(r=p_.apply(this,[o,l,e-(w+x),e]),b.push(r.shift()),b=[r.pop()];r.length;)v.push([r.shift()]);C=l.slice(o.length-(b[0]?b[0].length:0)).reduce(function(X,Z){return X+Z},0)}else b=[o];v.push(b),w=C+f,x=S}else b.push(o),w+=x+C,x=S}return _=f?function(X,Z){return(Z?M:"")+X.join(" ")}:function(X){return X.join(" ")},v.map(_)},b0.splitTextToSize=function(i,e,t){var o,l=(t=t||{}).fontSize||this.internal.getFontSize(),u=function(b){if(b.widths&&b.kerning)return{widths:b.widths,kerning:b.kerning};var v=this.internal.getFont(b.fontName,b.fontStyle);return v.metadata.Unicode?{widths:v.metadata.Unicode.widths||{0:1},kerning:v.metadata.Unicode.kerning||{}}:{font:v.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}.call(this,t);o=Array.isArray(i)?i:String(i).split(/\r?\n/);var m=1*this.internal.scaleFactor*e/l;u.textIndent=t.textIndent?1*t.textIndent*this.internal.scaleFactor/l:0,u.lineIndent=t.lineIndent;var r,f,_=[];for(r=0,f=o.length;r<f;r++)_=_.concat(m_.apply(this,[o[r],m,u]));return _},function(i){i.__fontmetrics__=i.__fontmetrics__||{};for(var e="klmnopqrstuvwxyz",t={},o={},l=0;l<e.length;l++)t[e[l]]="0123456789abcdef"[l],o["0123456789abcdef"[l]]=e[l];var u=function(v){return"0x"+parseInt(v,10).toString(16)},m=i.__fontmetrics__.compress=function(v){var w,x,C,T,S=["{"];for(var M in v){if(w=v[M],isNaN(parseInt(M,10))?x="'"+M+"'":(M=parseInt(M,10),x=(x=u(M).slice(2)).slice(0,-1)+o[x.slice(-1)]),typeof w=="number")w<0?(C=u(w).slice(3),T="-"):(C=u(w).slice(2),T=""),C=T+C.slice(0,-1)+o[C.slice(-1)];else{if(es(w)!=="object")throw new Error("Don't know what to do with value type "+es(w)+".");C=m(w)}S.push(x+C)}return S.push("}"),S.join("")},r=i.__fontmetrics__.uncompress=function(v){if(typeof v!="string")throw new Error("Invalid argument passed to uncompress.");for(var w,x,C,T,S={},M=1,O=S,V=[],X="",Z="",te=v.length-1,J=1;J<te;J+=1)(T=v[J])=="'"?w?(C=w.join(""),w=void 0):w=[]:w?w.push(T):T=="{"?(V.push([O,C]),O={},C=void 0):T=="}"?((x=V.pop())[0][x[1]]=O,C=void 0,O=x[0]):T=="-"?M=-1:C===void 0?t.hasOwnProperty(T)?(X+=t[T],C=parseInt(X,16)*M,M=1,X=""):X+=T:t.hasOwnProperty(T)?(Z+=t[T],O[C]=parseInt(Z,16)*M,M=1,C=void 0,Z=""):Z+=T;return S},f={codePages:["WinAnsiEncoding"],WinAnsiEncoding:r("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},_={Unicode:{Courier:f,"Courier-Bold":f,"Courier-BoldOblique":f,"Courier-Oblique":f,Helvetica:f,"Helvetica-Bold":f,"Helvetica-BoldOblique":f,"Helvetica-Oblique":f,"Times-Roman":f,"Times-Bold":f,"Times-BoldItalic":f,"Times-Italic":f}},b={Unicode:{"Courier-Oblique":r("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":r("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":r("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:r("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":r("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":r("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:r("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:r("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":r("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:r("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":r("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":r("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":r("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":r("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};i.events.push(["addFont",function(v){var w=v.font,x=b.Unicode[w.postScriptName];x&&(w.metadata.Unicode={},w.metadata.Unicode.widths=x.widths,w.metadata.Unicode.kerning=x.kerning);var C=_.Unicode[w.postScriptName];C&&(w.metadata.Unicode.encoding=C,w.encoding=C.codePages[0])}])}(Ur.API),function(i){var e=function(t){for(var o=t.length,l=new Uint8Array(o),u=0;u<o;u++)l[u]=t.charCodeAt(u);return l};i.API.events.push(["addFont",function(t){var o=void 0,l=t.font,u=t.instance;if(!l.isStandardFont){if(u===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+l.postScriptName+"').");if(typeof(o=u.existsFileInVFS(l.postScriptName)===!1?u.loadFile(l.postScriptName):u.getFileFromVFS(l.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+l.postScriptName+"').");(function(m,r){r=/^\x00\x01\x00\x00/.test(r)?e(r):e(Dd(r)),m.metadata=i.API.TTFFont.open(r),m.metadata.Unicode=m.metadata.Unicode||{encoding:{},kerning:{},widths:[]},m.metadata.glyIdsUsed=[0]})(l,o)}}])}(Ur),function(i){function e(){return(Vr.canvg?Promise.resolve(Vr.canvg):d1(()=>import("./index.es-42fdf3a0.js"),[],import.meta.url)).catch(function(t){return Promise.reject(new Error("Could not load canvg: "+t))}).then(function(t){return t.default?t.default:t})}Ur.API.addSvgAsImage=function(t,o,l,u,m,r,f,_){if(isNaN(o)||isNaN(l))throw hs.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(u)||isNaN(m))throw hs.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var b=document.createElement("canvas");b.width=u,b.height=m;var v=b.getContext("2d");v.fillStyle="#fff",v.fillRect(0,0,b.width,b.height);var w={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},x=this;return e().then(function(C){return C.fromString(v,t,w)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(C){return C.render(w)}).then(function(){x.addImage(b.toDataURL("image/jpeg",1),o,l,u,m,f,_)})}}(),Ur.API.putTotalPages=function(i){var e,t=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(e=new RegExp(i,"g"),t=this.internal.getNumberOfPages()):(e=new RegExp(this.pdfEscape16(i,this.internal.getFont()),"g"),t=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var o=1;o<=this.internal.getNumberOfPages();o++)for(var l=0;l<this.internal.pages[o].length;l++)this.internal.pages[o][l]=this.internal.pages[o][l].replace(e,t);return this},Ur.API.viewerPreferences=function(i,e){var t;i=i||{},e=e||!1;var o,l,u,m={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},r=Object.keys(m),f=[],_=0,b=0,v=0;function w(C,T){var S,M=!1;for(S=0;S<C.length;S+=1)C[S]===T&&(M=!0);return M}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(m)),this.internal.viewerpreferences.isSubscribed=!1),t=this.internal.viewerpreferences.configuration,i==="reset"||e===!0){var x=r.length;for(v=0;v<x;v+=1)t[r[v]].value=t[r[v]].defaultValue,t[r[v]].explicitSet=!1}if(es(i)==="object"){for(l in i)if(u=i[l],w(r,l)&&u!==void 0){if(t[l].type==="boolean"&&typeof u=="boolean")t[l].value=u;else if(t[l].type==="name"&&w(t[l].valueSet,u))t[l].value=u;else if(t[l].type==="integer"&&Number.isInteger(u))t[l].value=u;else if(t[l].type==="array"){for(_=0;_<u.length;_+=1)if(o=!0,u[_].length===1&&typeof u[_][0]=="number")f.push(String(u[_]-1));else if(u[_].length>1){for(b=0;b<u[_].length;b+=1)typeof u[_][b]!="number"&&(o=!1);o===!0&&f.push([u[_][0]-1,u[_][1]-1].join(" "))}t[l].value="["+f.join(" ")+"]"}else t[l].value=t[l].defaultValue;t[l].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var C,T=[];for(C in t)t[C].explicitSet===!0&&(t[C].type==="name"?T.push("/"+C+" /"+t[C].value):T.push("/"+C+" "+t[C].value));T.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+T.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=t,this},function(i){var e=function(){var o='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',l=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),u=unescape(encodeURIComponent(o)),m=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),r=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),f=unescape(encodeURIComponent("</x:xmpmeta>")),_=u.length+m.length+r.length+l.length+f.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+_+" >>"),this.internal.write("stream"),this.internal.write(l+u+m+r+f),this.internal.write("endstream"),this.internal.write("endobj")},t=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};i.addMetadata=function(o,l){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:o,namespaceuri:l||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",t),this.internal.events.subscribe("postPutResources",e)),this}}(Ur.API),function(i){var e=i.API,t=e.pdfEscape16=function(u,m){for(var r,f=m.metadata.Unicode.widths,_=["","0","00","000","0000"],b=[""],v=0,w=u.length;v<w;++v){if(r=m.metadata.characterToGlyph(u.charCodeAt(v)),m.metadata.glyIdsUsed.push(r),m.metadata.toUnicode[r]=u.charCodeAt(v),f.indexOf(r)==-1&&(f.push(r),f.push([parseInt(m.metadata.widthOfGlyph(r),10)])),r=="0")return b.join("");r=r.toString(16),b.push(_[4-r.length],r)}return b.join("")},o=function(u){var m,r,f,_,b,v,w;for(b=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,f=[],v=0,w=(r=Object.keys(u).sort(function(x,C){return x-C})).length;v<w;v++)m=r[v],f.length>=100&&(b+=`
`+f.length+` beginbfchar
`+f.join(`
`)+`
endbfchar`,f=[]),u[m]!==void 0&&u[m]!==null&&typeof u[m].toString=="function"&&(_=("0000"+u[m].toString(16)).slice(-4),m=("0000"+(+m).toString(16)).slice(-4),f.push("<"+m+"><"+_+">"));return f.length&&(b+=`
`+f.length+` beginbfchar
`+f.join(`
`)+`
endbfchar
`),b+=`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};e.events.push(["putFont",function(u){(function(m){var r=m.font,f=m.out,_=m.newObject,b=m.putStream;if(r.metadata instanceof i.API.TTFFont&&r.encoding==="Identity-H"){for(var v=r.metadata.Unicode.widths,w=r.metadata.subset.encode(r.metadata.glyIdsUsed,1),x="",C=0;C<w.length;C++)x+=String.fromCharCode(w[C]);var T=_();b({data:x,addLength1:!0,objectId:T}),f("endobj");var S=_();b({data:o(r.metadata.toUnicode),addLength1:!0,objectId:S}),f("endobj");var M=_();f("<<"),f("/Type /FontDescriptor"),f("/FontName /"+P0(r.fontName)),f("/FontFile2 "+T+" 0 R"),f("/FontBBox "+i.API.PDFObject.convert(r.metadata.bbox)),f("/Flags "+r.metadata.flags),f("/StemV "+r.metadata.stemV),f("/ItalicAngle "+r.metadata.italicAngle),f("/Ascent "+r.metadata.ascender),f("/Descent "+r.metadata.decender),f("/CapHeight "+r.metadata.capHeight),f(">>"),f("endobj");var O=_();f("<<"),f("/Type /Font"),f("/BaseFont /"+P0(r.fontName)),f("/FontDescriptor "+M+" 0 R"),f("/W "+i.API.PDFObject.convert(v)),f("/CIDToGIDMap /Identity"),f("/DW 1000"),f("/Subtype /CIDFontType2"),f("/CIDSystemInfo"),f("<<"),f("/Supplement 0"),f("/Registry (Adobe)"),f("/Ordering ("+r.encoding+")"),f(">>"),f(">>"),f("endobj"),r.objectNumber=_(),f("<<"),f("/Type /Font"),f("/Subtype /Type0"),f("/ToUnicode "+S+" 0 R"),f("/BaseFont /"+P0(r.fontName)),f("/Encoding /"+r.encoding),f("/DescendantFonts ["+O+" 0 R]"),f(">>"),f("endobj"),r.isAlreadyPutted=!0}})(u)}]),e.events.push(["putFont",function(u){(function(m){var r=m.font,f=m.out,_=m.newObject,b=m.putStream;if(r.metadata instanceof i.API.TTFFont&&r.encoding==="WinAnsiEncoding"){for(var v=r.metadata.rawData,w="",x=0;x<v.length;x++)w+=String.fromCharCode(v[x]);var C=_();b({data:w,addLength1:!0,objectId:C}),f("endobj");var T=_();b({data:o(r.metadata.toUnicode),addLength1:!0,objectId:T}),f("endobj");var S=_();f("<<"),f("/Descent "+r.metadata.decender),f("/CapHeight "+r.metadata.capHeight),f("/StemV "+r.metadata.stemV),f("/Type /FontDescriptor"),f("/FontFile2 "+C+" 0 R"),f("/Flags 96"),f("/FontBBox "+i.API.PDFObject.convert(r.metadata.bbox)),f("/FontName /"+P0(r.fontName)),f("/ItalicAngle "+r.metadata.italicAngle),f("/Ascent "+r.metadata.ascender),f(">>"),f("endobj"),r.objectNumber=_();for(var M=0;M<r.metadata.hmtx.widths.length;M++)r.metadata.hmtx.widths[M]=parseInt(r.metadata.hmtx.widths[M]*(1e3/r.metadata.head.unitsPerEm));f("<</Subtype/TrueType/Type/Font/ToUnicode "+T+" 0 R/BaseFont/"+P0(r.fontName)+"/FontDescriptor "+S+" 0 R/Encoding/"+r.encoding+" /FirstChar 29 /LastChar 255 /Widths "+i.API.PDFObject.convert(r.metadata.hmtx.widths)+">>"),f("endobj"),r.isAlreadyPutted=!0}})(u)}]);var l=function(u){var m,r=u.text||"",f=u.x,_=u.y,b=u.options||{},v=u.mutex||{},w=v.pdfEscape,x=v.activeFontKey,C=v.fonts,T=x,S="",M=0,O="",V=C[T].encoding;if(C[T].encoding!=="Identity-H")return{text:r,x:f,y:_,options:b,mutex:v};for(O=r,T=x,Array.isArray(r)&&(O=r[0]),M=0;M<O.length;M+=1)C[T].metadata.hasOwnProperty("cmap")&&(m=C[T].metadata.cmap.unicode.codeMap[O[M].charCodeAt(0)]),m||O[M].charCodeAt(0)<256&&C[T].metadata.hasOwnProperty("Unicode")?S+=O[M]:S+="";var X="";return parseInt(T.slice(1))<14||V==="WinAnsiEncoding"?X=w(S,T).split("").map(function(Z){return Z.charCodeAt(0).toString(16)}).join(""):V==="Identity-H"&&(X=t(S,C[T])),v.isHex=!0,{text:X,x:f,y:_,options:b,mutex:v}};e.events.push(["postProcessText",function(u){var m=u.text||"",r=[],f={text:m,x:u.x,y:u.y,options:u.options,mutex:u.mutex};if(Array.isArray(m)){var _=0;for(_=0;_<m.length;_+=1)Array.isArray(m[_])&&m[_].length===3?r.push([l(Object.assign({},f,{text:m[_][0]})).text,m[_][1],m[_][2]]):r.push(l(Object.assign({},f,{text:m[_]})).text);u.text=r}else u.text=l(Object.assign({},f,{text:m})).text}])}(Ur),function(i){var e=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};i.existsFileInVFS=function(t){return e.call(this),this.internal.vFS[t]!==void 0},i.addFileToVFS=function(t,o){return e.call(this),this.internal.vFS[t]=o,this},i.getFileFromVFS=function(t){return e.call(this),this.internal.vFS[t]!==void 0?this.internal.vFS[t]:null}}(Ur.API),function(i){i.__bidiEngine__=i.prototype.__bidiEngine__=function(o){var l,u,m,r,f,_,b,v=e,w=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],x=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],C={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},T={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},S=["(",")","(","<",">","<","[","]","[","{","}","{","\xAB","\xBB","\xAB","\u2039","\u203A","\u2039","\u2045","\u2046","\u2045","\u207D","\u207E","\u207D","\u208D","\u208E","\u208D","\u2264","\u2265","\u2264","\u2329","\u232A","\u2329","\uFE59","\uFE5A","\uFE59","\uFE5B","\uFE5C","\uFE5B","\uFE5D","\uFE5E","\uFE5D","\uFE64","\uFE65","\uFE64"],M=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),O=!1,V=0;this.__bidiEngine__={};var X=function(de){var Te=de.charCodeAt(),ve=Te>>8,_e=T[ve];return _e!==void 0?v[256*_e+(255&Te)]:ve===252||ve===253?"AL":M.test(ve)?"L":ve===8?"R":"N"},Z=function(de){for(var Te,ve=0;ve<de.length;ve++){if((Te=X(de.charAt(ve)))==="L")return!1;if(Te==="R")return!0}return!1},te=function(de,Te,ve,_e){var ot,it,It,Xe,we=Te[_e];switch(we){case"L":case"R":O=!1;break;case"N":case"AN":break;case"EN":O&&(we="AN");break;case"AL":O=!0,we="R";break;case"WS":we="N";break;case"CS":_e<1||_e+1>=Te.length||(ot=ve[_e-1])!=="EN"&&ot!=="AN"||(it=Te[_e+1])!=="EN"&&it!=="AN"?we="N":O&&(it="AN"),we=it===ot?it:"N";break;case"ES":we=(ot=_e>0?ve[_e-1]:"B")==="EN"&&_e+1<Te.length&&Te[_e+1]==="EN"?"EN":"N";break;case"ET":if(_e>0&&ve[_e-1]==="EN"){we="EN";break}if(O){we="N";break}for(It=_e+1,Xe=Te.length;It<Xe&&Te[It]==="ET";)It++;we=It<Xe&&Te[It]==="EN"?"EN":"N";break;case"NSM":if(m&&!r){for(Xe=Te.length,It=_e+1;It<Xe&&Te[It]==="NSM";)It++;if(It<Xe){var Ce=de[_e],Re=Ce>=1425&&Ce<=2303||Ce===64286;if(ot=Te[It],Re&&(ot==="R"||ot==="AL")){we="R";break}}}we=_e<1||(ot=Te[_e-1])==="B"?"N":ve[_e-1];break;case"B":O=!1,l=!0,we=V;break;case"S":u=!0,we="N";break;case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":O=!1;break;case"BN":we="N"}return we},J=function(de,Te,ve){var _e=de.split("");return ve&&ie(_e,ve,{hiLevel:V}),_e.reverse(),Te&&Te.reverse(),_e.join("")},ie=function(de,Te,ve){var _e,ot,it,It,Xe,we=-1,Ce=de.length,Re=0,le=[],Se=V?x:w,he=[];for(O=!1,l=!1,u=!1,ot=0;ot<Ce;ot++)he[ot]=X(de[ot]);for(it=0;it<Ce;it++){if(Xe=Re,le[it]=te(de,he,le,it),_e=240&(Re=Se[Xe][C[le[it]]]),Re&=15,Te[it]=It=Se[Re][5],_e>0)if(_e===16){for(ot=we;ot<it;ot++)Te[ot]=1;we=-1}else we=-1;if(Se[Re][6])we===-1&&(we=it);else if(we>-1){for(ot=we;ot<it;ot++)Te[ot]=It;we=-1}he[it]==="B"&&(Te[it]=0),ve.hiLevel|=It}u&&function(me,Be,We){for(var st=0;st<We;st++)if(me[st]==="S"){Be[st]=V;for(var Ye=st-1;Ye>=0&&me[Ye]==="WS";Ye--)Be[Ye]=V}}(he,Te,Ce)},Ee=function(de,Te,ve,_e,ot){if(!(ot.hiLevel<de)){if(de===1&&V===1&&!l)return Te.reverse(),void(ve&&ve.reverse());for(var it,It,Xe,we,Ce=Te.length,Re=0;Re<Ce;){if(_e[Re]>=de){for(Xe=Re+1;Xe<Ce&&_e[Xe]>=de;)Xe++;for(we=Re,It=Xe-1;we<It;we++,It--)it=Te[we],Te[we]=Te[It],Te[It]=it,ve&&(it=ve[we],ve[we]=ve[It],ve[It]=it);Re=Xe}Re++}}},Pe=function(de,Te,ve){var _e=de.split(""),ot={hiLevel:V};return ve||(ve=[]),ie(_e,ve,ot),function(it,It,Xe){if(Xe.hiLevel!==0&&b)for(var we,Ce=0;Ce<it.length;Ce++)It[Ce]===1&&(we=S.indexOf(it[Ce]))>=0&&(it[Ce]=S[we+1])}(_e,ve,ot),Ee(2,_e,Te,ve,ot),Ee(1,_e,Te,ve,ot),_e.join("")};return this.__bidiEngine__.doBidiReorder=function(de,Te,ve){if(function(ot,it){if(it)for(var It=0;It<ot.length;It++)it[It]=It;r===void 0&&(r=Z(ot)),_===void 0&&(_=Z(ot))}(de,Te),m||!f||_)if(m&&f&&r^_)V=r?1:0,de=J(de,Te,ve);else if(!m&&f&&_)V=r?1:0,de=Pe(de,Te,ve),de=J(de,Te);else if(!m||r||f||_){if(m&&!f&&r^_)de=J(de,Te),r?(V=0,de=Pe(de,Te,ve)):(V=1,de=Pe(de,Te,ve),de=J(de,Te));else if(m&&r&&!f&&_)V=1,de=Pe(de,Te,ve),de=J(de,Te);else if(!m&&!f&&r^_){var _e=b;r?(V=1,de=Pe(de,Te,ve),V=0,b=!1,de=Pe(de,Te,ve),b=_e):(V=0,de=Pe(de,Te,ve),de=J(de,Te),V=1,b=!1,de=Pe(de,Te,ve),b=_e,de=J(de,Te))}}else V=0,de=Pe(de,Te,ve);else V=r?1:0,de=Pe(de,Te,ve);return de},this.__bidiEngine__.setOptions=function(de){de&&(m=de.isInputVisual,f=de.isOutputVisual,r=de.isInputRtl,_=de.isOutputRtl,b=de.isSymmetricSwapping)},this.__bidiEngine__.setOptions(o),this.__bidiEngine__};var e=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],t=new i.__bidiEngine__({isInputVisual:!0});i.API.events.push(["postProcessText",function(o){var l=o.text,u=(o.x,o.y,o.options||{}),m=(o.mutex,u.lang,[]);if(u.isInputVisual=typeof u.isInputVisual!="boolean"||u.isInputVisual,t.setOptions(u),Object.prototype.toString.call(l)==="[object Array]"){var r=0;for(m=[],r=0;r<l.length;r+=1)Object.prototype.toString.call(l[r])==="[object Array]"?m.push([t.doBidiReorder(l[r][0]),l[r][1],l[r][2]]):m.push([t.doBidiReorder(l[r])]);o.text=m}else o.text=t.doBidiReorder(l);t.setOptions({isInputVisual:!0})}])}(Ur),Ur.API.TTFFont=function(){function i(e){var t;if(this.rawData=e,t=this.contents=new pf(e),this.contents.pos=4,t.readString(4)==="ttcf")throw new Error("TTCF not supported.");t.pos=0,this.parse(),this.subset=new F8(this),this.registerTTF()}return i.open=function(e){return new i(e)},i.prototype.parse=function(){return this.directory=new w8(this.contents),this.head=new A8(this),this.name=new I8(this),this.cmap=new T4(this),this.toUnicode={},this.hhea=new k8(this),this.maxp=new T8(this),this.hmtx=new L8(this),this.post=new C8(this),this.os2=new S8(this),this.loca=new O8(this),this.glyf=new P8(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},i.prototype.registerTTF=function(){var e,t,o,l,u;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=function(){var m,r,f,_;for(_=[],m=0,r=(f=this.bbox).length;m<r;m++)e=f[m],_.push(Math.round(e*this.scaleFactor));return _}.call(this),this.stemV=0,this.post.exists?(o=255&(l=this.post.italic_angle),(32768&(t=l>>16))!=0&&(t=-(1+(65535^t))),this.italicAngle=+(t+"."+o)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(u=this.familyClass)===1||u===2||u===3||u===4||u===5||u===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},i.prototype.characterToGlyph=function(e){var t;return((t=this.cmap.unicode)!=null?t.codeMap[e]:void 0)||0},i.prototype.widthOfGlyph=function(e){var t;return t=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(e).advance*t},i.prototype.widthOfString=function(e,t,o){var l,u,m,r;for(m=0,u=0,r=(e=""+e).length;0<=r?u<r:u>r;u=0<=r?++u:--u)l=e.charCodeAt(u),m+=this.widthOfGlyph(this.characterToGlyph(l))+o*(1e3/t)||0;return m*(t/1e3)},i.prototype.lineHeight=function(e,t){var o;return t==null&&(t=!1),o=t?this.lineGap:0,(this.ascender+o-this.decender)/1e3*e},i}();var Lc,pf=function(){function i(e){this.data=e!=null?e:[],this.pos=0,this.length=this.data.length}return i.prototype.readByte=function(){return this.data[this.pos++]},i.prototype.writeByte=function(e){return this.data[this.pos++]=e},i.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},i.prototype.writeUInt32=function(e){return this.writeByte(e>>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e)},i.prototype.readInt32=function(){var e;return(e=this.readUInt32())>=2147483648?e-4294967296:e},i.prototype.writeInt32=function(e){return e<0&&(e+=4294967296),this.writeUInt32(e)},i.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},i.prototype.writeUInt16=function(e){return this.writeByte(e>>8&255),this.writeByte(255&e)},i.prototype.readInt16=function(){var e;return(e=this.readUInt16())>=32768?e-65536:e},i.prototype.writeInt16=function(e){return e<0&&(e+=65536),this.writeUInt16(e)},i.prototype.readString=function(e){var t,o;for(o=[],t=0;0<=e?t<e:t>e;t=0<=e?++t:--t)o[t]=String.fromCharCode(this.readByte());return o.join("")},i.prototype.writeString=function(e){var t,o,l;for(l=[],t=0,o=e.length;0<=o?t<o:t>o;t=0<=o?++t:--t)l.push(this.writeByte(e.charCodeAt(t)));return l},i.prototype.readShort=function(){return this.readInt16()},i.prototype.writeShort=function(e){return this.writeInt16(e)},i.prototype.readLongLong=function(){var e,t,o,l,u,m,r,f;return e=this.readByte(),t=this.readByte(),o=this.readByte(),l=this.readByte(),u=this.readByte(),m=this.readByte(),r=this.readByte(),f=this.readByte(),128&e?-1*(72057594037927940*(255^e)+281474976710656*(255^t)+1099511627776*(255^o)+4294967296*(255^l)+16777216*(255^u)+65536*(255^m)+256*(255^r)+(255^f)+1):72057594037927940*e+281474976710656*t+1099511627776*o+4294967296*l+16777216*u+65536*m+256*r+f},i.prototype.writeLongLong=function(e){var t,o;return t=Math.floor(e/4294967296),o=4294967295&e,this.writeByte(t>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t),this.writeByte(o>>24&255),this.writeByte(o>>16&255),this.writeByte(o>>8&255),this.writeByte(255&o)},i.prototype.readInt=function(){return this.readInt32()},i.prototype.writeInt=function(e){return this.writeInt32(e)},i.prototype.read=function(e){var t,o;for(t=[],o=0;0<=e?o<e:o>e;o=0<=e?++o:--o)t.push(this.readByte());return t},i.prototype.write=function(e){var t,o,l,u;for(u=[],o=0,l=e.length;o<l;o++)t=e[o],u.push(this.writeByte(t));return u},i}(),w8=function(){var i;function e(t){var o,l,u;for(this.scalarType=t.readInt(),this.tableCount=t.readShort(),this.searchRange=t.readShort(),this.entrySelector=t.readShort(),this.rangeShift=t.readShort(),this.tables={},l=0,u=this.tableCount;0<=u?l<u:l>u;l=0<=u?++l:--l)o={tag:t.readString(4),checksum:t.readInt(),offset:t.readInt(),length:t.readInt()},this.tables[o.tag]=o}return e.prototype.encode=function(t){var o,l,u,m,r,f,_,b,v,w,x,C,T;for(T in x=Object.keys(t).length,f=Math.log(2),v=16*Math.floor(Math.log(x)/f),m=Math.floor(v/f),b=16*x-v,(l=new pf).writeInt(this.scalarType),l.writeShort(x),l.writeShort(v),l.writeShort(m),l.writeShort(b),u=16*x,_=l.pos+u,r=null,C=[],t)for(w=t[T],l.writeString(T),l.writeInt(i(w)),l.writeInt(_),l.writeInt(w.length),C=C.concat(w),T==="head"&&(r=_),_+=w.length;_%4;)C.push(0),_++;return l.write(C),o=2981146554-i(l.data),l.pos=r+8,l.writeUInt32(o),l.data},i=function(t){var o,l,u,m;for(t=L4.call(t);t.length%4;)t.push(0);for(u=new pf(t),l=0,o=0,m=t.length;o<m;o=o+=4)l+=u.readUInt32();return 4294967295&l},e}(),x8={}.hasOwnProperty,rh=function(i,e){for(var t in e)x8.call(e,t)&&(i[t]=e[t]);function o(){this.constructor=i}return o.prototype=e.prototype,i.prototype=new o,i.__super__=e.prototype,i};Lc=function(){function i(e){var t;this.file=e,t=this.file.directory.tables[this.tag],this.exists=!!t,t&&(this.offset=t.offset,this.length=t.length,this.parse(this.file.contents))}return i.prototype.parse=function(){},i.prototype.encode=function(){},i.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},i}();var A8=function(i){function e(){return e.__super__.constructor.apply(this,arguments)}return rh(e,Lc),e.prototype.tag="head",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.revision=t.readInt(),this.checkSumAdjustment=t.readInt(),this.magicNumber=t.readInt(),this.flags=t.readShort(),this.unitsPerEm=t.readShort(),this.created=t.readLongLong(),this.modified=t.readLongLong(),this.xMin=t.readShort(),this.yMin=t.readShort(),this.xMax=t.readShort(),this.yMax=t.readShort(),this.macStyle=t.readShort(),this.lowestRecPPEM=t.readShort(),this.fontDirectionHint=t.readShort(),this.indexToLocFormat=t.readShort(),this.glyphDataFormat=t.readShort()},e.prototype.encode=function(t){var o;return(o=new pf).writeInt(this.version),o.writeInt(this.revision),o.writeInt(this.checkSumAdjustment),o.writeInt(this.magicNumber),o.writeShort(this.flags),o.writeShort(this.unitsPerEm),o.writeLongLong(this.created),o.writeLongLong(this.modified),o.writeShort(this.xMin),o.writeShort(this.yMin),o.writeShort(this.xMax),o.writeShort(this.yMax),o.writeShort(this.macStyle),o.writeShort(this.lowestRecPPEM),o.writeShort(this.fontDirectionHint),o.writeShort(t),o.writeShort(this.glyphDataFormat),o.data},e}(),__=function(){function i(e,t){var o,l,u,m,r,f,_,b,v,w,x,C,T,S,M,O,V;switch(this.platformID=e.readUInt16(),this.encodingID=e.readShort(),this.offset=t+e.readInt(),v=e.pos,e.pos=this.offset,this.format=e.readUInt16(),this.length=e.readUInt16(),this.language=e.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(f=0;f<256;++f)this.codeMap[f]=e.readByte();break;case 4:for(x=e.readUInt16(),w=x/2,e.pos+=6,u=function(){var X,Z;for(Z=[],f=X=0;0<=w?X<w:X>w;f=0<=w?++X:--X)Z.push(e.readUInt16());return Z}(),e.pos+=2,T=function(){var X,Z;for(Z=[],f=X=0;0<=w?X<w:X>w;f=0<=w?++X:--X)Z.push(e.readUInt16());return Z}(),_=function(){var X,Z;for(Z=[],f=X=0;0<=w?X<w:X>w;f=0<=w?++X:--X)Z.push(e.readUInt16());return Z}(),b=function(){var X,Z;for(Z=[],f=X=0;0<=w?X<w:X>w;f=0<=w?++X:--X)Z.push(e.readUInt16());return Z}(),l=(this.length-e.pos+this.offset)/2,r=function(){var X,Z;for(Z=[],f=X=0;0<=l?X<l:X>l;f=0<=l?++X:--X)Z.push(e.readUInt16());return Z}(),f=M=0,V=u.length;M<V;f=++M)for(S=u[f],o=O=C=T[f];C<=S?O<=S:O>=S;o=C<=S?++O:--O)b[f]===0?m=o+_[f]:(m=r[b[f]/2+(o-C)-(w-f)]||0)!==0&&(m+=_[f]),this.codeMap[o]=65535&m}e.pos=v}return i.encode=function(e,t){var o,l,u,m,r,f,_,b,v,w,x,C,T,S,M,O,V,X,Z,te,J,ie,Ee,Pe,de,Te,ve,_e,ot,it,It,Xe,we,Ce,Re,le,Se,he,me,Be,We,st,Ye,gt,Mt,ri;switch(_e=new pf,m=Object.keys(e).sort(function(ut,wt){return ut-wt}),t){case"macroman":for(T=0,S=function(){var ut=[];for(C=0;C<256;++C)ut.push(0);return ut}(),O={0:0},u={},ot=0,we=m.length;ot<we;ot++)O[Ye=e[l=m[ot]]]==null&&(O[Ye]=++T),u[l]={old:e[l],new:O[e[l]]},S[l]=O[e[l]];return _e.writeUInt16(1),_e.writeUInt16(0),_e.writeUInt32(12),_e.writeUInt16(0),_e.writeUInt16(262),_e.writeUInt16(0),_e.write(S),{charMap:u,subtable:_e.data,maxGlyphID:T+1};case"unicode":for(Te=[],v=[],V=0,O={},o={},M=_=null,it=0,Ce=m.length;it<Ce;it++)O[Z=e[l=m[it]]]==null&&(O[Z]=++V),o[l]={old:Z,new:O[Z]},r=O[Z]-l,M!=null&&r===_||(M&&v.push(M),Te.push(l),_=r),M=l;for(M&&v.push(M),v.push(65535),Te.push(65535),Pe=2*(Ee=Te.length),ie=2*Math.pow(Math.log(Ee)/Math.LN2,2),w=Math.log(ie/2)/Math.LN2,J=2*Ee-ie,f=[],te=[],x=[],C=It=0,Re=Te.length;It<Re;C=++It){if(de=Te[C],b=v[C],de===65535){f.push(0),te.push(0);break}if(de-(ve=o[de].new)>=32768)for(f.push(0),te.push(2*(x.length+Ee-C)),l=Xe=de;de<=b?Xe<=b:Xe>=b;l=de<=b?++Xe:--Xe)x.push(o[l].new);else f.push(ve-de),te.push(0)}for(_e.writeUInt16(3),_e.writeUInt16(1),_e.writeUInt32(12),_e.writeUInt16(4),_e.writeUInt16(16+8*Ee+2*x.length),_e.writeUInt16(0),_e.writeUInt16(Pe),_e.writeUInt16(ie),_e.writeUInt16(w),_e.writeUInt16(J),We=0,le=v.length;We<le;We++)l=v[We],_e.writeUInt16(l);for(_e.writeUInt16(0),st=0,Se=Te.length;st<Se;st++)l=Te[st],_e.writeUInt16(l);for(gt=0,he=f.length;gt<he;gt++)r=f[gt],_e.writeUInt16(r);for(Mt=0,me=te.length;Mt<me;Mt++)X=te[Mt],_e.writeUInt16(X);for(ri=0,Be=x.length;ri<Be;ri++)T=x[ri],_e.writeUInt16(T);return{charMap:o,subtable:_e.data,maxGlyphID:V+1}}},i}(),T4=function(i){function e(){return e.__super__.constructor.apply(this,arguments)}return rh(e,Lc),e.prototype.tag="cmap",e.prototype.parse=function(t){var o,l,u;for(t.pos=this.offset,this.version=t.readUInt16(),u=t.readUInt16(),this.tables=[],this.unicode=null,l=0;0<=u?l<u:l>u;l=0<=u?++l:--l)o=new __(t,this.offset),this.tables.push(o),o.isUnicode&&this.unicode==null&&(this.unicode=o);return!0},e.encode=function(t,o){var l,u;return o==null&&(o="macroman"),l=__.encode(t,o),(u=new pf).writeUInt16(0),u.writeUInt16(1),l.table=u.data.concat(l.subtable),l},e}(),k8=function(i){function e(){return e.__super__.constructor.apply(this,arguments)}return rh(e,Lc),e.prototype.tag="hhea",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.ascender=t.readShort(),this.decender=t.readShort(),this.lineGap=t.readShort(),this.advanceWidthMax=t.readShort(),this.minLeftSideBearing=t.readShort(),this.minRightSideBearing=t.readShort(),this.xMaxExtent=t.readShort(),this.caretSlopeRise=t.readShort(),this.caretSlopeRun=t.readShort(),this.caretOffset=t.readShort(),t.pos+=8,this.metricDataFormat=t.readShort(),this.numberOfMetrics=t.readUInt16()},e}(),S8=function(i){function e(){return e.__super__.constructor.apply(this,arguments)}return rh(e,Lc),e.prototype.tag="OS/2",e.prototype.parse=function(t){if(t.pos=this.offset,this.version=t.readUInt16(),this.averageCharWidth=t.readShort(),this.weightClass=t.readUInt16(),this.widthClass=t.readUInt16(),this.type=t.readShort(),this.ySubscriptXSize=t.readShort(),this.ySubscriptYSize=t.readShort(),this.ySubscriptXOffset=t.readShort(),this.ySubscriptYOffset=t.readShort(),this.ySuperscriptXSize=t.readShort(),this.ySuperscriptYSize=t.readShort(),this.ySuperscriptXOffset=t.readShort(),this.ySuperscriptYOffset=t.readShort(),this.yStrikeoutSize=t.readShort(),this.yStrikeoutPosition=t.readShort(),this.familyClass=t.readShort(),this.panose=function(){var o,l;for(l=[],o=0;o<10;++o)l.push(t.readByte());return l}(),this.charRange=function(){var o,l;for(l=[],o=0;o<4;++o)l.push(t.readInt());return l}(),this.vendorID=t.readString(4),this.selection=t.readShort(),this.firstCharIndex=t.readShort(),this.lastCharIndex=t.readShort(),this.version>0&&(this.ascent=t.readShort(),this.descent=t.readShort(),this.lineGap=t.readShort(),this.winAscent=t.readShort(),this.winDescent=t.readShort(),this.codePageRange=function(){var o,l;for(l=[],o=0;o<2;o=++o)l.push(t.readInt());return l}(),this.version>1))return this.xHeight=t.readShort(),this.capHeight=t.readShort(),this.defaultChar=t.readShort(),this.breakChar=t.readShort(),this.maxContext=t.readShort()},e}(),C8=function(i){function e(){return e.__super__.constructor.apply(this,arguments)}return rh(e,Lc),e.prototype.tag="post",e.prototype.parse=function(t){var o,l,u;switch(t.pos=this.offset,this.format=t.readInt(),this.italicAngle=t.readInt(),this.underlinePosition=t.readShort(),this.underlineThickness=t.readShort(),this.isFixedPitch=t.readInt(),this.minMemType42=t.readInt(),this.maxMemType42=t.readInt(),this.minMemType1=t.readInt(),this.maxMemType1=t.readInt(),this.format){case 65536:break;case 131072:var m;for(l=t.readUInt16(),this.glyphNameIndex=[],m=0;0<=l?m<l:m>l;m=0<=l?++m:--m)this.glyphNameIndex.push(t.readUInt16());for(this.names=[],u=[];t.pos<this.offset+this.length;)o=t.readByte(),u.push(this.names.push(t.readString(o)));return u;case 151552:return l=t.readUInt16(),this.offsets=t.read(l);case 196608:break;case 262144:return this.map=function(){var r,f,_;for(_=[],m=r=0,f=this.file.maxp.numGlyphs;0<=f?r<f:r>f;m=0<=f?++r:--r)_.push(t.readUInt32());return _}.call(this)}},e}(),E8=function(i,e){this.raw=i,this.length=i.length,this.platformID=e.platformID,this.encodingID=e.encodingID,this.languageID=e.languageID},I8=function(i){function e(){return e.__super__.constructor.apply(this,arguments)}return rh(e,Lc),e.prototype.tag="name",e.prototype.parse=function(t){var o,l,u,m,r,f,_,b,v,w,x;for(t.pos=this.offset,t.readShort(),o=t.readShort(),f=t.readShort(),l=[],m=0;0<=o?m<o:m>o;m=0<=o?++m:--m)l.push({platformID:t.readShort(),encodingID:t.readShort(),languageID:t.readShort(),nameID:t.readShort(),length:t.readShort(),offset:this.offset+f+t.readShort()});for(_={},m=v=0,w=l.length;v<w;m=++v)u=l[m],t.pos=u.offset,b=t.readString(u.length),r=new E8(b,u),_[x=u.nameID]==null&&(_[x]=[]),_[u.nameID].push(r);this.strings=_,this.copyright=_[0],this.fontFamily=_[1],this.fontSubfamily=_[2],this.uniqueSubfamily=_[3],this.fontName=_[4],this.version=_[5];try{this.postscriptName=_[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=_[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=_[7],this.manufacturer=_[8],this.designer=_[9],this.description=_[10],this.vendorUrl=_[11],this.designerUrl=_[12],this.license=_[13],this.licenseUrl=_[14],this.preferredFamily=_[15],this.preferredSubfamily=_[17],this.compatibleFull=_[18],this.sampleText=_[19]},e}(),T8=function(i){function e(){return e.__super__.constructor.apply(this,arguments)}return rh(e,Lc),e.prototype.tag="maxp",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.numGlyphs=t.readUInt16(),this.maxPoints=t.readUInt16(),this.maxContours=t.readUInt16(),this.maxCompositePoints=t.readUInt16(),this.maxComponentContours=t.readUInt16(),this.maxZones=t.readUInt16(),this.maxTwilightPoints=t.readUInt16(),this.maxStorage=t.readUInt16(),this.maxFunctionDefs=t.readUInt16(),this.maxInstructionDefs=t.readUInt16(),this.maxStackElements=t.readUInt16(),this.maxSizeOfInstructions=t.readUInt16(),this.maxComponentElements=t.readUInt16(),this.maxComponentDepth=t.readUInt16()},e}(),L8=function(i){function e(){return e.__super__.constructor.apply(this,arguments)}return rh(e,Lc),e.prototype.tag="hmtx",e.prototype.parse=function(t){var o,l,u,m,r,f,_;for(t.pos=this.offset,this.metrics=[],o=0,f=this.file.hhea.numberOfMetrics;0<=f?o<f:o>f;o=0<=f?++o:--o)this.metrics.push({advance:t.readUInt16(),lsb:t.readInt16()});for(u=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var b,v;for(v=[],o=b=0;0<=u?b<u:b>u;o=0<=u?++b:--b)v.push(t.readInt16());return v}(),this.widths=function(){var b,v,w,x;for(x=[],b=0,v=(w=this.metrics).length;b<v;b++)m=w[b],x.push(m.advance);return x}.call(this),l=this.widths[this.widths.length-1],_=[],o=r=0;0<=u?r<u:r>u;o=0<=u?++r:--r)_.push(this.widths.push(l));return _},e.prototype.forGlyph=function(t){return t in this.metrics?this.metrics[t]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[t-this.metrics.length]}},e}(),L4=[].slice,P8=function(i){function e(){return e.__super__.constructor.apply(this,arguments)}return rh(e,Lc),e.prototype.tag="glyf",e.prototype.parse=function(){return this.cache={}},e.prototype.glyphFor=function(t){var o,l,u,m,r,f,_,b,v,w;return t in this.cache?this.cache[t]:(m=this.file.loca,o=this.file.contents,l=m.indexOf(t),(u=m.lengthOf(t))===0?this.cache[t]=null:(o.pos=this.offset+l,r=(f=new pf(o.read(u))).readShort(),b=f.readShort(),w=f.readShort(),_=f.readShort(),v=f.readShort(),this.cache[t]=r===-1?new D8(f,b,w,_,v):new M8(f,r,b,w,_,v),this.cache[t]))},e.prototype.encode=function(t,o,l){var u,m,r,f,_;for(r=[],m=[],f=0,_=o.length;f<_;f++)u=t[o[f]],m.push(r.length),u&&(r=r.concat(u.encode(l)));return m.push(r.length),{table:r,offsets:m}},e}(),M8=function(){function i(e,t,o,l,u,m){this.raw=e,this.numberOfContours=t,this.xMin=o,this.yMin=l,this.xMax=u,this.yMax=m,this.compound=!1}return i.prototype.encode=function(){return this.raw.data},i}(),D8=function(){function i(e,t,o,l,u){var m,r;for(this.raw=e,this.xMin=t,this.yMin=o,this.xMax=l,this.yMax=u,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],m=this.raw;r=m.readShort(),this.glyphOffsets.push(m.pos),this.glyphIDs.push(m.readUInt16()),32&r;)m.pos+=1&r?4:2,128&r?m.pos+=8:64&r?m.pos+=4:8&r&&(m.pos+=2)}return i.prototype.encode=function(){var e,t,o;for(t=new pf(L4.call(this.raw.data)),e=0,o=this.glyphIDs.length;e<o;++e)t.pos=this.glyphOffsets[e];return t.data},i}(),O8=function(i){function e(){return e.__super__.constructor.apply(this,arguments)}return rh(e,Lc),e.prototype.tag="loca",e.prototype.parse=function(t){var o,l;return t.pos=this.offset,o=this.file.head.indexToLocFormat,this.offsets=o===0?function(){var u,m;for(m=[],l=0,u=this.length;l<u;l+=2)m.push(2*t.readUInt16());return m}.call(this):function(){var u,m;for(m=[],l=0,u=this.length;l<u;l+=4)m.push(t.readUInt32());return m}.call(this)},e.prototype.indexOf=function(t){return this.offsets[t]},e.prototype.lengthOf=function(t){return this.offsets[t+1]-this.offsets[t]},e.prototype.encode=function(t,o){for(var l=new Uint32Array(this.offsets.length),u=0,m=0,r=0;r<l.length;++r)if(l[r]=u,m<o.length&&o[m]==r){++m,l[r]=u;var f=this.offsets[r],_=this.offsets[r+1]-f;_>0&&(u+=_)}for(var b=new Array(4*l.length),v=0;v<l.length;++v)b[4*v+3]=255&l[v],b[4*v+2]=(65280&l[v])>>8,b[4*v+1]=(16711680&l[v])>>16,b[4*v]=(4278190080&l[v])>>24;return b},e}(),F8=function(){function i(e){this.font=e,this.subset={},this.unicodes={},this.next=33}return i.prototype.generateCmap=function(){var e,t,o,l,u;for(t in l=this.font.cmap.tables[0].codeMap,e={},u=this.subset)o=u[t],e[t]=l[o];return e},i.prototype.glyphsFor=function(e){var t,o,l,u,m,r,f;for(l={},m=0,r=e.length;m<r;m++)l[u=e[m]]=this.font.glyf.glyphFor(u);for(u in t=[],l)(o=l[u])!=null&&o.compound&&t.push.apply(t,o.glyphIDs);if(t.length>0)for(u in f=this.glyphsFor(t))o=f[u],l[u]=o;return l},i.prototype.encode=function(e,t){var o,l,u,m,r,f,_,b,v,w,x,C,T,S,M;for(l in o=T4.encode(this.generateCmap(),"unicode"),m=this.glyphsFor(e),x={0:0},M=o.charMap)x[(f=M[l]).old]=f.new;for(C in w=o.maxGlyphID,m)C in x||(x[C]=w++);return b=function(O){var V,X;for(V in X={},O)X[O[V]]=V;return X}(x),v=Object.keys(b).sort(function(O,V){return O-V}),T=function(){var O,V,X;for(X=[],O=0,V=v.length;O<V;O++)r=v[O],X.push(b[r]);return X}(),u=this.font.glyf.encode(m,T,x),_=this.font.loca.encode(u.offsets,T),S={cmap:this.font.cmap.raw(),glyf:u.table,loca:_,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(t)},this.font.os2.exists&&(S["OS/2"]=this.font.os2.raw()),this.font.directory.encode(S)},i}();Ur.API.PDFObject=function(){var i;function e(){}return i=function(t,o){return(Array(o+1).join("0")+t).slice(-o)},e.convert=function(t){var o,l,u,m;if(Array.isArray(t))return"["+function(){var r,f,_;for(_=[],r=0,f=t.length;r<f;r++)o=t[r],_.push(e.convert(o));return _}().join(" ")+"]";if(typeof t=="string")return"/"+t;if(t!=null&&t.isString)return"("+t+")";if(t instanceof Date)return"(D:"+i(t.getUTCFullYear(),4)+i(t.getUTCMonth(),2)+i(t.getUTCDate(),2)+i(t.getUTCHours(),2)+i(t.getUTCMinutes(),2)+i(t.getUTCSeconds(),2)+"Z)";if({}.toString.call(t)==="[object Object]"){for(l in u=["<<"],t)m=t[l],u.push("/"+l+" "+e.convert(m));return u.push(">>"),u.join(`
`)}return""+t},e}();var M0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function R8(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}function B8(i){var e=i.default;if(typeof e=="function"){var t=function(){return e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(i).forEach(function(o){var l=Object.getOwnPropertyDescriptor(i,o);Object.defineProperty(t,o,l.get?l:{enumerable:!0,get:function(){return i[o]}})}),t}var P4={exports:{}};(function(i,e){(function(t,o){o()})(M0,function(){function t(_,b){return typeof b>"u"?b={autoBom:!1}:typeof b!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),b={autoBom:!b}),b.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(_.type)?new Blob(["\uFEFF",_],{type:_.type}):_}function o(_,b,v){var w=new XMLHttpRequest;w.open("GET",_),w.responseType="blob",w.onload=function(){f(w.response,b,v)},w.onerror=function(){console.error("could not download file")},w.send()}function l(_){var b=new XMLHttpRequest;b.open("HEAD",_,!1);try{b.send()}catch{}return 200<=b.status&&299>=b.status}function u(_){try{_.dispatchEvent(new MouseEvent("click"))}catch{var b=document.createEvent("MouseEvents");b.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),_.dispatchEvent(b)}}var m=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof M0=="object"&&M0.global===M0?M0:void 0,r=m.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),f=m.saveAs||(typeof window!="object"||window!==m?function(){}:"download"in HTMLAnchorElement.prototype&&!r?function(_,b,v){var w=m.URL||m.webkitURL,x=document.createElement("a");b=b||_.name||"download",x.download=b,x.rel="noopener",typeof _=="string"?(x.href=_,x.origin===location.origin?u(x):l(x.href)?o(_,b,v):u(x,x.target="_blank")):(x.href=w.createObjectURL(_),setTimeout(function(){w.revokeObjectURL(x.href)},4e4),setTimeout(function(){u(x)},0))}:"msSaveOrOpenBlob"in navigator?function(_,b,v){if(b=b||_.name||"download",typeof _!="string")navigator.msSaveOrOpenBlob(t(_,v),b);else if(l(_))o(_,b,v);else{var w=document.createElement("a");w.href=_,w.target="_blank",setTimeout(function(){u(w)})}}:function(_,b,v,w){if(w=w||open("","_blank"),w&&(w.document.title=w.document.body.innerText="downloading..."),typeof _=="string")return o(_,b,v);var x=_.type==="application/octet-stream",C=/constructor/i.test(m.HTMLElement)||m.safari,T=/CriOS\/[\d]+/.test(navigator.userAgent);if((T||x&&C||r)&&typeof FileReader<"u"){var S=new FileReader;S.onloadend=function(){var V=S.result;V=T?V:V.replace(/^data:[^;]*;/,"data:attachment/file;"),w?w.location.href=V:location=V,w=null},S.readAsDataURL(_)}else{var M=m.URL||m.webkitURL,O=M.createObjectURL(_);w?w.location=O:location.href=O,w=null,setTimeout(function(){M.revokeObjectURL(O)},4e4)}});m.saveAs=f.saveAs=f,i.exports=f})})(P4);var Tu={exports:{}};(function(i,e){(function(t,o){i.exports=o()})(M0,function(){var t,o,l;function u(r,f){if(!t)t=f;else if(!o)o=f;else{var _="var sharedChunk = {}; ("+t+")(sharedChunk); ("+o+")(sharedChunk);",b={};t(b),l=f(b),typeof window<"u"&&(l.workerUrl=window.URL.createObjectURL(new Blob([_],{type:"text/javascript"})))}}u(["exports"],function(r){var f=_;function _(y,h,A,P){this.cx=3*y,this.bx=3*(A-y)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*h,this.by=3*(P-h)-this.cy,this.ay=1-this.cy-this.by,this.p1x=y,this.p1y=h,this.p2x=A,this.p2y=P}function b(y,h,A,P){const N=new f(y,h,A,P);return function(q){return N.solve(q)}}_.prototype={sampleCurveX:function(y){return((this.ax*y+this.bx)*y+this.cx)*y},sampleCurveY:function(y){return((this.ay*y+this.by)*y+this.cy)*y},sampleCurveDerivativeX:function(y){return(3*this.ax*y+2*this.bx)*y+this.cx},solveCurveX:function(y,h){if(h===void 0&&(h=1e-6),y<0)return 0;if(y>1)return 1;for(var A=y,P=0;P<8;P++){var N=this.sampleCurveX(A)-y;if(Math.abs(N)<h)return A;var q=this.sampleCurveDerivativeX(A);if(Math.abs(q)<1e-6)break;A-=N/q}var Y=0,oe=1;for(A=y,P=0;P<20&&(N=this.sampleCurveX(A),!(Math.abs(N-y)<h));P++)y>N?Y=A:oe=A,A=.5*(oe-Y)+Y;return A},solve:function(y,h){return this.sampleCurveY(this.solveCurveX(y,h))}};const v=b(.25,.1,.25,1);function w(y,h,A){return Math.min(A,Math.max(h,y))}function x(y,h,A){const P=A-h,N=((y-h)%P+P)%P+h;return N===h?A:N}function C(y,...h){for(const A of h)for(const P in A)y[P]=A[P];return y}let T=1;function S(y,h){y.forEach(A=>{h[A]&&(h[A]=h[A].bind(h))})}function M(y,h,A){const P={};for(const N in y)P[N]=h.call(A||this,y[N],N,y);return P}function O(y,h,A){const P={};for(const N in y)h.call(A||this,y[N],N,y)&&(P[N]=y[N]);return P}function V(y){return Array.isArray(y)?y.map(V):typeof y=="object"&&y?M(y,V):y}const X={};function Z(y){X[y]||(typeof console<"u"&&console.warn(y),X[y]=!0)}function te(y,h,A){return(A.y-y.y)*(h.x-y.x)>(h.y-y.y)*(A.x-y.x)}function J(y){let h=0;for(let A,P,N=0,q=y.length,Y=q-1;N<q;Y=N++)A=y[N],P=y[Y],h+=(P.x-A.x)*(A.y+P.y);return h}function ie(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function Ee(y){const h={};if(y.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(A,P,N,q)=>{const Y=N||q;return h[P]=!Y||Y.toLowerCase(),""}),h["max-age"]){const A=parseInt(h["max-age"],10);isNaN(A)?delete h["max-age"]:h["max-age"]=A}return h}let Pe,de,Te=null;function ve(y){if(Te==null){const h=y.navigator?y.navigator.userAgent:null;Te=!!y.safari||!(!h||!(/\b(iPad|iPhone|iPod)\b/.test(h)||h.match("Safari")&&!h.match("Chrome")))}return Te}function _e(y){return typeof ImageBitmap<"u"&&y instanceof ImageBitmap}const ot={now:typeof performance<"u"&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),frame(y){const h=requestAnimationFrame(y);return{cancel:()=>cancelAnimationFrame(h)}},getImageData(y,h=0){const A=window.document.createElement("canvas"),P=A.getContext("2d");if(!P)throw new Error("failed to create canvas 2d context");return A.width=y.width,A.height=y.height,P.drawImage(y,0,0,y.width,y.height),P.getImageData(-h,-h,y.width+2*h,y.height+2*h)},resolveURL:y=>(Pe||(Pe=document.createElement("a")),Pe.href=y,Pe.href),hardwareConcurrency:typeof navigator<"u"&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return!!matchMedia&&(de==null&&(de=matchMedia("(prefers-reduced-motion: reduce)")),de.matches)}};var it=It;function It(y,h){this.x=y,this.y=h}It.prototype={clone:function(){return new It(this.x,this.y)},add:function(y){return this.clone()._add(y)},sub:function(y){return this.clone()._sub(y)},multByPoint:function(y){return this.clone()._multByPoint(y)},divByPoint:function(y){return this.clone()._divByPoint(y)},mult:function(y){return this.clone()._mult(y)},div:function(y){return this.clone()._div(y)},rotate:function(y){return this.clone()._rotate(y)},rotateAround:function(y,h){return this.clone()._rotateAround(y,h)},matMult:function(y){return this.clone()._matMult(y)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(y){return this.x===y.x&&this.y===y.y},dist:function(y){return Math.sqrt(this.distSqr(y))},distSqr:function(y){var h=y.x-this.x,A=y.y-this.y;return h*h+A*A},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(y){return Math.atan2(this.y-y.y,this.x-y.x)},angleWith:function(y){return this.angleWithSep(y.x,y.y)},angleWithSep:function(y,h){return Math.atan2(this.x*h-this.y*y,this.x*y+this.y*h)},_matMult:function(y){var h=y[2]*this.x+y[3]*this.y;return this.x=y[0]*this.x+y[1]*this.y,this.y=h,this},_add:function(y){return this.x+=y.x,this.y+=y.y,this},_sub:function(y){return this.x-=y.x,this.y-=y.y,this},_mult:function(y){return this.x*=y,this.y*=y,this},_div:function(y){return this.x/=y,this.y/=y,this},_multByPoint:function(y){return this.x*=y.x,this.y*=y.y,this},_divByPoint:function(y){return this.x/=y.x,this.y/=y.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var y=this.y;return this.y=this.x,this.x=-y,this},_rotate:function(y){var h=Math.cos(y),A=Math.sin(y),P=A*this.x+h*this.y;return this.x=h*this.x-A*this.y,this.y=P,this},_rotateAround:function(y,h){var A=Math.cos(y),P=Math.sin(y),N=h.y+P*(this.x-h.x)+A*(this.y-h.y);return this.x=h.x+A*(this.x-h.x)-P*(this.y-h.y),this.y=N,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},It.convert=function(y){return y instanceof It?y:Array.isArray(y)?new It(y[0],y[1]):y};const Xe={MAX_PARALLEL_IMAGE_REQUESTS:16,REGISTERED_PROTOCOLS:{}},we="mapbox-tiles";let Ce,Re,le=500,Se=50;function he(){typeof caches>"u"||Ce||(Ce=caches.open(we))}let me=1/0;const Be={supported:!1,testSupport:function(y){!Ye&&st&&(gt?Mt(y):We=y)}};let We,st,Ye=!1,gt=!1;function Mt(y){const h=y.createTexture();y.bindTexture(y.TEXTURE_2D,h);try{if(y.texImage2D(y.TEXTURE_2D,0,y.RGBA,y.RGBA,y.UNSIGNED_BYTE,st),y.isContextLost())return;Be.supported=!0}catch{}y.deleteTexture(h),Ye=!0}typeof document<"u"&&(st=document.createElement("img"),st.onload=function(){We&&Mt(We),We=null,gt=!0},st.onerror=function(){Ye=!0,We=null},st.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");const ri={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};typeof Object.freeze=="function"&&Object.freeze(ri);class ut extends Error{constructor(h,A,P,N){super(`AJAXError: ${A} (${h}): ${P}`),this.status=h,this.statusText=A,this.url=P,this.body=N}}const wt=ie()?()=>self.worker&&self.worker.referrer:()=>(window.location.protocol==="blob:"?window.parent:window).location.href;function bt(y,h){const A=new AbortController,P=new Request(y.url,{method:y.method||"GET",body:y.body,credentials:y.credentials,headers:y.headers,referrer:wt(),signal:A.signal});let N=!1,q=!1;return y.type==="json"&&P.headers.set("Accept","application/json"),((Y,oe,fe)=>{if(q)return;const xe=Date.now();fetch(P).then(Fe=>Fe.ok?((Ve,tt,lt)=>{(y.type==="arrayBuffer"?Ve.arrayBuffer():y.type==="json"?Ve.json():Ve.text()).then(ht=>{q||(tt&&lt&&function(Zt,Vt,vi){if(he(),!Ce)return;const Fi={status:Vt.status,statusText:Vt.statusText,headers:new Headers};Vt.headers.forEach((Li,$i)=>Fi.headers.set($i,Li));const gi=Ee(Vt.headers.get("Cache-Control")||"");gi["no-store"]||(gi["max-age"]&&Fi.headers.set("Expires",new Date(vi+1e3*gi["max-age"]).toUTCString()),new Date(Fi.headers.get("Expires")).getTime()-vi<42e4||function(Li,$i){if(Re===void 0)try{new Response(new ReadableStream),Re=!0}catch{Re=!1}Re?$i(Li.body):Li.blob().then($i)}(Vt,Li=>{const $i=new Response(Li,Fi);he(),Ce&&Ce.then(Qi=>Qi.put(function(Xn){const ir=Xn.indexOf("?");return ir<0?Xn:Xn.slice(0,ir)}(Zt.url),$i)).catch(Qi=>Z(Qi.message))}))}(P,tt,lt),N=!0,h(null,ht,Ve.headers.get("Cache-Control"),Ve.headers.get("Expires")))}).catch(ht=>{q||h(new Error(ht.message))})})(Fe,null,xe):Fe.blob().then(Ve=>h(new ut(Fe.status,Fe.statusText,y.url,Ve)))).catch(Fe=>{Fe.code!==20&&h(new Error(Fe.message))})})(),{cancel:()=>{q=!0,N||A.abort()}}}const Je=function(y,h){if(/:\/\//.test(y.url)&&!/^https?:|^file:/.test(y.url)){if(ie()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",y,h);if(!ie()){const P=y.url.substring(0,y.url.indexOf("://"));return(Xe.REGISTERED_PROTOCOLS[P]||bt)(y,h)}}if(!(/^file:/.test(A=y.url)||/^file:/.test(wt())&&!/^\w+:/.test(A))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return bt(y,h);if(ie()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",y,h,void 0,!0)}var A;return function(P,N){const q=new XMLHttpRequest;q.open(P.method||"GET",P.url,!0),P.type==="arrayBuffer"&&(q.responseType="arraybuffer");for(const Y in P.headers)q.setRequestHeader(Y,P.headers[Y]);return P.type==="json"&&(q.responseType="text",q.setRequestHeader("Accept","application/json")),q.withCredentials=P.credentials==="include",q.onerror=()=>{N(new Error(q.statusText))},q.onload=()=>{if((q.status>=200&&q.status<300||q.status===0)&&q.response!==null){let Y=q.response;if(P.type==="json")try{Y=JSON.parse(q.response)}catch(oe){return N(oe)}N(null,Y,q.getResponseHeader("Cache-Control"),q.getResponseHeader("Expires"))}else{const Y=new Blob([q.response],{type:q.getResponseHeader("Content-Type")});N(new ut(q.status,q.statusText,P.url,Y))}},q.send(P.body),{cancel:()=>q.abort()}}(y,h)},ei=function(y,h){return Je(C(y,{type:"arrayBuffer"}),h)};function li(y){const h=window.document.createElement("a");return h.href=y,h.protocol===window.document.location.protocol&&h.host===window.document.location.host}const Qt="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";let Si,Ti;Si=[],Ti=0;const Xt=function(y,h){if(Be.supported&&(y.headers||(y.headers={}),y.headers.accept="image/webp,*/*"),Ti>=Xe.MAX_PARALLEL_IMAGE_REQUESTS){const q={requestParameters:y,callback:h,cancelled:!1,cancel(){this.cancelled=!0}};return Si.push(q),q}Ti++;let A=!1;const P=()=>{if(!A)for(A=!0,Ti--;Si.length&&Ti<Xe.MAX_PARALLEL_IMAGE_REQUESTS;){const q=Si.shift(),{requestParameters:Y,callback:oe,cancelled:fe}=q;fe||(q.cancel=Xt(Y,oe).cancel)}},N=ei(y,(q,Y,oe,fe)=>{P(),q?h(q):Y&&function(xe,Fe){typeof createImageBitmap=="function"?function(Ve,tt){const lt=new Blob([new Uint8Array(Ve)],{type:"image/png"});createImageBitmap(lt).then(ht=>{tt(null,ht)}).catch(ht=>{tt(new Error(`Could not load image because of ${ht.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`))})}(xe,Fe):function(Ve,tt){const lt=new Image;lt.onload=()=>{tt(null,lt),URL.revokeObjectURL(lt.src),lt.onload=null,window.requestAnimationFrame(()=>{lt.src=Qt})},lt.onerror=()=>tt(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const ht=new Blob([new Uint8Array(Ve)],{type:"image/png"});lt.src=Ve.byteLength?URL.createObjectURL(ht):Qt}(xe,Fe)}(Y,(xe,Fe)=>{xe!=null?h(xe):Fe!=null&&h(null,Fe,{cacheControl:oe,expires:fe})})});return{cancel:()=>{N.cancel(),P()}}};function mi(y,h,A){A[y]&&A[y].indexOf(h)!==-1||(A[y]=A[y]||[],A[y].push(h))}function Zi(y,h,A){if(A&&A[y]){const P=A[y].indexOf(h);P!==-1&&A[y].splice(P,1)}}class Ci{constructor(h,A={}){C(this,A),this.type=h}}class ti extends Ci{constructor(h,A={}){super("error",C({error:h},A))}}class Me{on(h,A){return this._listeners=this._listeners||{},mi(h,A,this._listeners),this}off(h,A){return Zi(h,A,this._listeners),Zi(h,A,this._oneTimeListeners),this}once(h,A){return this._oneTimeListeners=this._oneTimeListeners||{},mi(h,A,this._oneTimeListeners),this}fire(h,A){typeof h=="string"&&(h=new Ci(h,A||{}));const P=h.type;if(this.listens(P)){h.target=this;const N=this._listeners&&this._listeners[P]?this._listeners[P].slice():[];for(const oe of N)oe.call(this,h);const q=this._oneTimeListeners&&this._oneTimeListeners[P]?this._oneTimeListeners[P].slice():[];for(const oe of q)Zi(P,oe,this._oneTimeListeners),oe.call(this,h);const Y=this._eventedParent;Y&&(C(h,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),Y.fire(h))}else h instanceof ti&&console.error(h.error);return this}listens(h){return this._listeners&&this._listeners[h]&&this._listeners[h].length>0||this._oneTimeListeners&&this._oneTimeListeners[h]&&this._oneTimeListeners[h].length>0||this._eventedParent&&this._eventedParent.listens(h)}setEventedParent(h,A){return this._eventedParent=h,this._eventedParentData=A,this}}var Q={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1},elevationOffset:{type:"number",default:450}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};class ae{constructor(h,A,P,N){this.message=(h?`${h}: `:"")+P,N&&(this.identifier=N),A!=null&&A.__line__&&(this.line=A.__line__)}}function $e(y){const h=y.value;return h?[new ae(y.key,h,"constants have been deprecated as of v8")]:[]}function _t(y,...h){for(const A of h)for(const P in A)y[P]=A[P];return y}function Kt(y){return y instanceof Number||y instanceof String||y instanceof Boolean?y.valueOf():y}function di(y){if(Array.isArray(y))return y.map(di);if(y instanceof Object&&!(y instanceof Number||y instanceof String||y instanceof Boolean)){const h={};for(const A in y)h[A]=di(y[A]);return h}return Kt(y)}class wn extends Error{constructor(h,A){super(A),this.message=A,this.key=h}}class Ln{constructor(h,A=[]){this.parent=h,this.bindings={};for(const[P,N]of A)this.bindings[P]=N}concat(h){return new Ln(this,h)}get(h){if(this.bindings[h])return this.bindings[h];if(this.parent)return this.parent.get(h);throw new Error(`${h} not found in scope.`)}has(h){return!!this.bindings[h]||!!this.parent&&this.parent.has(h)}}const fn={kind:"null"},Bi={kind:"number"},Ki={kind:"string"},Hn={kind:"boolean"},Gn={kind:"color"},Zr={kind:"object"},zn={kind:"value"},dn={kind:"collator"},gn={kind:"formatted"},on={kind:"padding"},Sr={kind:"resolvedImage"};function Wn(y,h){return{kind:"array",itemType:y,N:h}}function gr(y){if(y.kind==="array"){const h=gr(y.itemType);return typeof y.N=="number"?`array<${h}, ${y.N}>`:y.itemType.kind==="value"?"array":`array<${h}>`}return y.kind}const Kr=[fn,Bi,Ki,Hn,Gn,gn,Zr,Wn(zn),on,Sr];function an(y,h){if(h.kind==="error")return null;if(y.kind==="array"){if(h.kind==="array"&&(h.N===0&&h.itemType.kind==="value"||!an(y.itemType,h.itemType))&&(typeof y.N!="number"||y.N===h.N))return null}else{if(y.kind===h.kind)return null;if(y.kind==="value"){for(const A of Kr)if(!an(A,h))return null}}return`Expected ${gr(y)} but found ${gr(h)} instead.`}function He(y,h){return h.some(A=>A.kind===y.kind)}function wo(y,h){return h.some(A=>A==="null"?y===null:A==="array"?Array.isArray(y):A==="object"?y&&!Array.isArray(y)&&typeof y=="object":A===typeof y)}var xo,co={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function Le(y){return(y=Math.round(y))<0?0:y>255?255:y}function Ie(y){return Le(y[y.length-1]==="%"?parseFloat(y)/100*255:parseInt(y))}function qe(y){return(h=y[y.length-1]==="%"?parseFloat(y)/100:parseFloat(y))<0?0:h>1?1:h;var h}function ct(y,h,A){return A<0?A+=1:A>1&&(A-=1),6*A<1?y+(h-y)*A*6:2*A<1?h:3*A<2?y+(h-y)*(2/3-A)*6:y}try{xo={}.parseCSSColor=function(y){var h,A=y.replace(/ /g,"").toLowerCase();if(A in co)return co[A].slice();if(A[0]==="#")return A.length===4?(h=parseInt(A.substr(1),16))>=0&&h<=4095?[(3840&h)>>4|(3840&h)>>8,240&h|(240&h)>>4,15&h|(15&h)<<4,1]:null:A.length===7&&(h=parseInt(A.substr(1),16))>=0&&h<=16777215?[(16711680&h)>>16,(65280&h)>>8,255&h,1]:null;var P=A.indexOf("("),N=A.indexOf(")");if(P!==-1&&N+1===A.length){var q=A.substr(0,P),Y=A.substr(P+1,N-(P+1)).split(","),oe=1;switch(q){case"rgba":if(Y.length!==4)return null;oe=qe(Y.pop());case"rgb":return Y.length!==3?null:[Ie(Y[0]),Ie(Y[1]),Ie(Y[2]),oe];case"hsla":if(Y.length!==4)return null;oe=qe(Y.pop());case"hsl":if(Y.length!==3)return null;var fe=(parseFloat(Y[0])%360+360)%360/360,xe=qe(Y[1]),Fe=qe(Y[2]),Ve=Fe<=.5?Fe*(xe+1):Fe+xe-Fe*xe,tt=2*Fe-Ve;return[Le(255*ct(tt,Ve,fe+1/3)),Le(255*ct(tt,Ve,fe)),Le(255*ct(tt,Ve,fe-1/3)),oe];default:return null}}return null}}catch{}class dt{constructor(h,A,P,N=1){this.r=h,this.g=A,this.b=P,this.a=N}static parse(h){if(!h)return;if(h instanceof dt)return h;if(typeof h!="string")return;const A=xo(h);return A?new dt(A[0]/255*A[3],A[1]/255*A[3],A[2]/255*A[3],A[3]):void 0}toString(){const[h,A,P,N]=this.toArray();return`rgba(${Math.round(h)},${Math.round(A)},${Math.round(P)},${N})`}toArray(){const{r:h,g:A,b:P,a:N}=this;return N===0?[0,0,0,0]:[255*h/N,255*A/N,255*P/N,N]}}dt.black=new dt(0,0,0,1),dt.white=new dt(1,1,1,1),dt.transparent=new dt(0,0,0,0),dt.red=new dt(1,0,0,1);class Bt{constructor(h,A,P){this.sensitivity=h?A?"variant":"case":A?"accent":"base",this.locale=P,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(h,A){return this.collator.compare(h,A)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class Ge{constructor(h,A,P,N,q){this.text=h,this.image=A,this.scale=P,this.fontStack=N,this.textColor=q}}class Yt{constructor(h){this.sections=h}static fromString(h){return new Yt([new Ge(h,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some(h=>h.text.length!==0||h.image&&h.image.name.length!==0)}static factory(h){return h instanceof Yt?h:Yt.fromString(h)}toString(){return this.sections.length===0?"":this.sections.map(h=>h.text).join("")}}class Ft{constructor(h){this.values=h.slice()}static parse(h){if(h instanceof Ft)return h;if(typeof h=="number")return new Ft([h,h,h,h]);if(Array.isArray(h)&&!(h.length<1||h.length>4)){for(const A of h)if(typeof A!="number")return;switch(h.length){case 1:h=[h[0],h[0],h[0],h[0]];break;case 2:h=[h[0],h[1],h[0],h[1]];break;case 3:h=[h[0],h[1],h[2],h[1]]}return new Ft(h)}}toString(){return JSON.stringify(this.values)}}class oi{constructor(h){this.name=h.name,this.available=h.available}toString(){return this.name}static fromString(h){return h?new oi({name:h,available:!1}):null}}function yt(y,h,A,P){return typeof y=="number"&&y>=0&&y<=255&&typeof h=="number"&&h>=0&&h<=255&&typeof A=="number"&&A>=0&&A<=255?P===void 0||typeof P=="number"&&P>=0&&P<=1?null:`Invalid rgba value [${[y,h,A,P].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof P=="number"?[y,h,A,P]:[y,h,A]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function Ri(y){if(y===null||typeof y=="string"||typeof y=="boolean"||typeof y=="number"||y instanceof dt||y instanceof Bt||y instanceof Yt||y instanceof Ft||y instanceof oi)return!0;if(Array.isArray(y)){for(const h of y)if(!Ri(h))return!1;return!0}if(typeof y=="object"){for(const h in y)if(!Ri(y[h]))return!1;return!0}return!1}function Ii(y){if(y===null)return fn;if(typeof y=="string")return Ki;if(typeof y=="boolean")return Hn;if(typeof y=="number")return Bi;if(y instanceof dt)return Gn;if(y instanceof Bt)return dn;if(y instanceof Yt)return gn;if(y instanceof Ft)return on;if(y instanceof oi)return Sr;if(Array.isArray(y)){const h=y.length;let A;for(const P of y){const N=Ii(P);if(A){if(A===N)continue;A=zn;break}A=N}return Wn(A||zn,h)}return Zr}function En(y){const h=typeof y;return y===null?"":h==="string"||h==="number"||h==="boolean"?String(y):y instanceof dt||y instanceof Yt||y instanceof Ft||y instanceof oi?y.toString():JSON.stringify(y)}class Sn{constructor(h,A){this.type=h,this.value=A}static parse(h,A){if(h.length!==2)return A.error(`'literal' expression requires exactly one argument, but found ${h.length-1} instead.`);if(!Ri(h[1]))return A.error("invalid value");const P=h[1];let N=Ii(P);const q=A.expectedType;return N.kind!=="array"||N.N!==0||!q||q.kind!=="array"||typeof q.N=="number"&&q.N!==0||(N=q),new Sn(N,P)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}class xt{constructor(h){this.name="ExpressionEvaluationError",this.message=h}toJSON(){return this.message}}const Tn={string:Ki,number:Bi,boolean:Hn,object:Zr};class Qn{constructor(h,A){this.type=h,this.args=A}static parse(h,A){if(h.length<2)return A.error("Expected at least one argument.");let P,N=1;const q=h[0];if(q==="array"){let oe,fe;if(h.length>2){const xe=h[1];if(typeof xe!="string"||!(xe in Tn)||xe==="object")return A.error('The item type argument of "array" must be one of string, number, boolean',1);oe=Tn[xe],N++}else oe=zn;if(h.length>3){if(h[2]!==null&&(typeof h[2]!="number"||h[2]<0||h[2]!==Math.floor(h[2])))return A.error('The length argument to "array" must be a positive integer literal',2);fe=h[2],N++}P=Wn(oe,fe)}else{if(!Tn[q])throw new Error(`Types doesn't contain name = ${q}`);P=Tn[q]}const Y=[];for(;N<h.length;N++){const oe=A.parse(h[N],N,zn);if(!oe)return null;Y.push(oe)}return new Qn(P,Y)}evaluate(h){for(let A=0;A<this.args.length;A++){const P=this.args[A].evaluate(h);if(!an(this.type,Ii(P)))return P;if(A===this.args.length-1)throw new xt(`Expected value to be of type ${gr(this.type)}, but found ${gr(Ii(P))} instead.`)}throw new Error}eachChild(h){this.args.forEach(h)}outputDefined(){return this.args.every(h=>h.outputDefined())}}const Lr={"to-boolean":Hn,"to-color":Gn,"to-number":Bi,"to-string":Ki};class dr{constructor(h,A){this.type=h,this.args=A}static parse(h,A){if(h.length<2)return A.error("Expected at least one argument.");const P=h[0];if(!Lr[P])throw new Error(`Can't parse ${P} as it is not part of the known types`);if((P==="to-boolean"||P==="to-string")&&h.length!==2)return A.error("Expected one argument.");const N=Lr[P],q=[];for(let Y=1;Y<h.length;Y++){const oe=A.parse(h[Y],Y,zn);if(!oe)return null;q.push(oe)}return new dr(N,q)}evaluate(h){if(this.type.kind==="boolean")return Boolean(this.args[0].evaluate(h));if(this.type.kind==="color"){let A,P;for(const N of this.args){if(A=N.evaluate(h),P=null,A instanceof dt)return A;if(typeof A=="string"){const q=h.parseColor(A);if(q)return q}else if(Array.isArray(A)&&(P=A.length<3||A.length>4?`Invalid rbga value ${JSON.stringify(A)}: expected an array containing either three or four numeric values.`:yt(A[0],A[1],A[2],A[3]),!P))return new dt(A[0]/255,A[1]/255,A[2]/255,A[3])}throw new xt(P||`Could not parse color from value '${typeof A=="string"?A:JSON.stringify(A)}'`)}if(this.type.kind==="padding"){let A;for(const P of this.args){A=P.evaluate(h);const N=Ft.parse(A);if(N)return N}throw new xt(`Could not parse padding from value '${typeof A=="string"?A:JSON.stringify(A)}'`)}if(this.type.kind==="number"){let A=null;for(const P of this.args){if(A=P.evaluate(h),A===null)return 0;const N=Number(A);if(!isNaN(N))return N}throw new xt(`Could not convert ${JSON.stringify(A)} to number.`)}return this.type.kind==="formatted"?Yt.fromString(En(this.args[0].evaluate(h))):this.type.kind==="resolvedImage"?oi.fromString(En(this.args[0].evaluate(h))):En(this.args[0].evaluate(h))}eachChild(h){this.args.forEach(h)}outputDefined(){return this.args.every(h=>h.outputDefined())}}const Cr=["Unknown","Point","LineString","Polygon"];class Pr{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?Cr[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(h){let A=this._parseColorCache[h];return A||(A=this._parseColorCache[h]=dt.parse(h)),A}}class to{constructor(h,A,P,N){this.name=h,this.type=A,this._evaluate=P,this.args=N}evaluate(h){return this._evaluate(h,this.args)}eachChild(h){this.args.forEach(h)}outputDefined(){return!1}static parse(h,A){const P=h[0],N=to.definitions[P];if(!N)return A.error(`Unknown expression "${P}". If you wanted a literal array, use ["literal", [...]].`,0);const q=Array.isArray(N)?N[0]:N.type,Y=Array.isArray(N)?[[N[1],N[2]]]:N.overloads,oe=Y.filter(([xe])=>!Array.isArray(xe)||xe.length===h.length-1);let fe=null;for(const[xe,Fe]of oe){fe=new xl(A.registry,A.path,null,A.scope);const Ve=[];let tt=!1;for(let lt=1;lt<h.length;lt++){const ht=h[lt],Zt=Array.isArray(xe)?xe[lt-1]:xe.type,Vt=fe.parse(ht,1+Ve.length,Zt);if(!Vt){tt=!0;break}Ve.push(Vt)}if(!tt)if(Array.isArray(xe)&&xe.length!==Ve.length)fe.error(`Expected ${xe.length} arguments, but found ${Ve.length} instead.`);else{for(let lt=0;lt<Ve.length;lt++){const ht=Array.isArray(xe)?xe[lt]:xe.type,Zt=Ve[lt];fe.concat(lt+1).checkSubtype(ht,Zt.type)}if(fe.errors.length===0)return new to(P,q,Fe,Ve)}}if(oe.length===1)A.errors.push(...fe.errors);else{const xe=(oe.length?oe:Y).map(([Ve])=>{return tt=Ve,Array.isArray(tt)?`(${tt.map(gr).join(", ")})`:`(${gr(tt.type)}...)`;var tt}).join(" | "),Fe=[];for(let Ve=1;Ve<h.length;Ve++){const tt=A.parse(h[Ve],1+Fe.length);if(!tt)return null;Fe.push(gr(tt.type))}A.error(`Expected arguments of type ${xe}, but found (${Fe.join(", ")}) instead.`)}return null}static register(h,A){to.definitions=A;for(const P in A)h[P]=to}}class Jr{constructor(h,A,P){this.type=dn,this.locale=P,this.caseSensitive=h,this.diacriticSensitive=A}static parse(h,A){if(h.length!==2)return A.error("Expected one argument.");const P=h[1];if(typeof P!="object"||Array.isArray(P))return A.error("Collator options argument must be an object.");const N=A.parse(P["case-sensitive"]!==void 0&&P["case-sensitive"],1,Hn);if(!N)return null;const q=A.parse(P["diacritic-sensitive"]!==void 0&&P["diacritic-sensitive"],1,Hn);if(!q)return null;let Y=null;return P.locale&&(Y=A.parse(P.locale,1,Ki),!Y)?null:new Jr(N,q,Y)}evaluate(h){return new Bt(this.caseSensitive.evaluate(h),this.diacriticSensitive.evaluate(h),this.locale?this.locale.evaluate(h):null)}eachChild(h){h(this.caseSensitive),h(this.diacriticSensitive),this.locale&&h(this.locale)}outputDefined(){return!1}}const vo=8192;function $o(y,h){y[0]=Math.min(y[0],h[0]),y[1]=Math.min(y[1],h[1]),y[2]=Math.max(y[2],h[0]),y[3]=Math.max(y[3],h[1])}function tl(y,h){return!(y[0]<=h[0]||y[2]>=h[2]||y[1]<=h[1]||y[3]>=h[3])}function Fo(y,h){const A=(180+y[0])/360,P=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+y[1]*Math.PI/360)))/360,N=Math.pow(2,h.z);return[Math.round(A*N*vo),Math.round(P*N*vo)]}function Dt(y,h,A){const P=y[0]-h[0],N=y[1]-h[1],q=y[0]-A[0],Y=y[1]-A[1];return P*Y-q*N==0&&P*q<=0&&N*Y<=0}function rr(y,h){let A=!1;for(let Y=0,oe=h.length;Y<oe;Y++){const fe=h[Y];for(let xe=0,Fe=fe.length;xe<Fe-1;xe++){if(Dt(y,fe[xe],fe[xe+1]))return!1;(N=fe[xe])[1]>(P=y)[1]!=(q=fe[xe+1])[1]>P[1]&&P[0]<(q[0]-N[0])*(P[1]-N[1])/(q[1]-N[1])+N[0]&&(A=!A)}}var P,N,q;return A}function lr(y,h){for(let A=0;A<h.length;A++)if(rr(y,h[A]))return!0;return!1}function zr(y,h,A,P){const N=P[0]-A[0],q=P[1]-A[1],Y=(y[0]-A[0])*q-N*(y[1]-A[1]),oe=(h[0]-A[0])*q-N*(h[1]-A[1]);return Y>0&&oe<0||Y<0&&oe>0}function Zo(y,h,A){for(const xe of A)for(let Fe=0;Fe<xe.length-1;++Fe)if((oe=[(Y=xe[Fe+1])[0]-(q=xe[Fe])[0],Y[1]-q[1]])[0]*(fe=[(N=h)[0]-(P=y)[0],N[1]-P[1]])[1]-oe[1]*fe[0]!=0&&zr(P,N,q,Y)&&zr(q,Y,P,N))return!0;var P,N,q,Y,oe,fe;return!1}function Ro(y,h){for(let A=0;A<y.length;++A)if(!rr(y[A],h))return!1;for(let A=0;A<y.length-1;++A)if(Zo(y[A],y[A+1],h))return!1;return!0}function Sa(y,h){for(let A=0;A<h.length;A++)if(Ro(y,h[A]))return!0;return!1}function ts(y,h,A){const P=[];for(let N=0;N<y.length;N++){const q=[];for(let Y=0;Y<y[N].length;Y++){const oe=Fo(y[N][Y],A);$o(h,oe),q.push(oe)}P.push(q)}return P}function Vs(y,h,A){const P=[];for(let N=0;N<y.length;N++){const q=ts(y[N],h,A);P.push(q)}return P}function _s(y,h,A,P){if(y[0]<A[0]||y[0]>A[2]){const N=.5*P;let q=y[0]-A[0]>N?-P:A[0]-y[0]>N?P:0;q===0&&(q=y[0]-A[2]>N?-P:A[2]-y[0]>N?P:0),y[0]+=q}$o(h,y)}function Ca(y,h,A,P){const N=Math.pow(2,P.z)*vo,q=[P.x*vo,P.y*vo],Y=[];for(const oe of y)for(const fe of oe){const xe=[fe.x+q[0],fe.y+q[1]];_s(xe,h,A,N),Y.push(xe)}return Y}function Ss(y,h,A,P){const N=Math.pow(2,P.z)*vo,q=[P.x*vo,P.y*vo],Y=[];for(const fe of y){const xe=[];for(const Fe of fe){const Ve=[Fe.x+q[0],Fe.y+q[1]];$o(h,Ve),xe.push(Ve)}Y.push(xe)}if(h[2]-h[0]<=N/2){(oe=h)[0]=oe[1]=1/0,oe[2]=oe[3]=-1/0;for(const fe of Y)for(const xe of fe)_s(xe,h,A,N)}var oe;return Y}class Zs{constructor(h,A){this.type=Hn,this.geojson=h,this.geometries=A}static parse(h,A){if(h.length!==2)return A.error(`'within' expression requires exactly one argument, but found ${h.length-1} instead.`);if(Ri(h[1])){const P=h[1];if(P.type==="FeatureCollection")for(let N=0;N<P.features.length;++N){const q=P.features[N].geometry.type;if(q==="Polygon"||q==="MultiPolygon")return new Zs(P,P.features[N].geometry)}else if(P.type==="Feature"){const N=P.geometry.type;if(N==="Polygon"||N==="MultiPolygon")return new Zs(P,P.geometry)}else if(P.type==="Polygon"||P.type==="MultiPolygon")return new Zs(P,P)}return A.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(h){if(h.geometry()!=null&&h.canonicalID()!=null){if(h.geometryType()==="Point")return function(A,P){const N=[1/0,1/0,-1/0,-1/0],q=[1/0,1/0,-1/0,-1/0],Y=A.canonicalID();if(P.type==="Polygon"){const oe=ts(P.coordinates,q,Y),fe=Ca(A.geometry(),N,q,Y);if(!tl(N,q))return!1;for(const xe of fe)if(!rr(xe,oe))return!1}if(P.type==="MultiPolygon"){const oe=Vs(P.coordinates,q,Y),fe=Ca(A.geometry(),N,q,Y);if(!tl(N,q))return!1;for(const xe of fe)if(!lr(xe,oe))return!1}return!0}(h,this.geometries);if(h.geometryType()==="LineString")return function(A,P){const N=[1/0,1/0,-1/0,-1/0],q=[1/0,1/0,-1/0,-1/0],Y=A.canonicalID();if(P.type==="Polygon"){const oe=ts(P.coordinates,q,Y),fe=Ss(A.geometry(),N,q,Y);if(!tl(N,q))return!1;for(const xe of fe)if(!Ro(xe,oe))return!1}if(P.type==="MultiPolygon"){const oe=Vs(P.coordinates,q,Y),fe=Ss(A.geometry(),N,q,Y);if(!tl(N,q))return!1;for(const xe of fe)if(!Sa(xe,oe))return!1}return!0}(h,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}function qs(y){if(y instanceof to&&(y.name==="get"&&y.args.length===1||y.name==="feature-state"||y.name==="has"&&y.args.length===1||y.name==="properties"||y.name==="geometry-type"||y.name==="id"||/^filter-/.test(y.name))||y instanceof Zs)return!1;let h=!0;return y.eachChild(A=>{h&&!qs(A)&&(h=!1)}),h}function Ea(y){if(y instanceof to&&y.name==="feature-state")return!1;let h=!0;return y.eachChild(A=>{h&&!Ea(A)&&(h=!1)}),h}function wl(y,h){if(y instanceof to&&h.indexOf(y.name)>=0)return!1;let A=!0;return y.eachChild(P=>{A&&!wl(P,h)&&(A=!1)}),A}class uu{constructor(h,A){this.type=A.type,this.name=h,this.boundExpression=A}static parse(h,A){if(h.length!==2||typeof h[1]!="string")return A.error("'var' expression requires exactly one string literal argument.");const P=h[1];return A.scope.has(P)?new uu(P,A.scope.get(P)):A.error(`Unknown variable "${P}". Make sure "${P}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(h){return this.boundExpression.evaluate(h)}eachChild(){}outputDefined(){return!1}}class xl{constructor(h,A=[],P,N=new Ln,q=[]){this.registry=h,this.path=A,this.key=A.map(Y=>`[${Y}]`).join(""),this.scope=N,this.errors=q,this.expectedType=P}parse(h,A,P,N,q={}){return A?this.concat(A,P,N)._parse(h,q):this._parse(h,q)}_parse(h,A){function P(N,q,Y){return Y==="assert"?new Qn(q,[N]):Y==="coerce"?new dr(q,[N]):N}if(h!==null&&typeof h!="string"&&typeof h!="boolean"&&typeof h!="number"||(h=["literal",h]),Array.isArray(h)){if(h.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const N=h[0];if(typeof N!="string")return this.error(`Expression name must be a string, but found ${typeof N} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const q=this.registry[N];if(q){let Y=q.parse(h,this);if(!Y)return null;if(this.expectedType){const oe=this.expectedType,fe=Y.type;if(oe.kind!=="string"&&oe.kind!=="number"&&oe.kind!=="boolean"&&oe.kind!=="object"&&oe.kind!=="array"||fe.kind!=="value")if(oe.kind!=="color"&&oe.kind!=="formatted"&&oe.kind!=="resolvedImage"||fe.kind!=="value"&&fe.kind!=="string")if(oe.kind!=="padding"||fe.kind!=="value"&&fe.kind!=="number"&&fe.kind!=="array"){if(this.checkSubtype(oe,fe))return null}else Y=P(Y,oe,A.typeAnnotation||"coerce");else Y=P(Y,oe,A.typeAnnotation||"coerce");else Y=P(Y,oe,A.typeAnnotation||"assert")}if(!(Y instanceof Sn)&&Y.type.kind!=="resolvedImage"&&cu(Y)){const oe=new Pr;try{Y=new Sn(Y.type,Y.evaluate(oe))}catch(fe){return this.error(fe.message),null}}return Y}return this.error(`Unknown expression "${N}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(h===void 0?"'undefined' value invalid. Use null instead.":typeof h=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof h} instead.`)}concat(h,A,P){const N=typeof h=="number"?this.path.concat(h):this.path,q=P?this.scope.concat(P):this.scope;return new xl(this.registry,N,A||null,q,this.errors)}error(h,...A){const P=`${this.key}${A.map(N=>`[${N}]`).join("")}`;this.errors.push(new wn(P,h))}checkSubtype(h,A){const P=an(h,A);return P&&this.error(P),P}}function cu(y){if(y instanceof uu)return cu(y.boundExpression);if(y instanceof to&&y.name==="error"||y instanceof Jr||y instanceof Zs)return!1;const h=y instanceof dr||y instanceof Qn;let A=!0;return y.eachChild(P=>{A=h?A&&cu(P):A&&P instanceof Sn}),!!A&&qs(y)&&wl(y,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}function ha(y,h){const A=y.length-1;let P,N,q=0,Y=A,oe=0;for(;q<=Y;)if(oe=Math.floor((q+Y)/2),P=y[oe],N=y[oe+1],P<=h){if(oe===A||h<N)return oe;q=oe+1}else{if(!(P>h))throw new xt("Input is not a number.");Y=oe-1}return 0}class fa{constructor(h,A,P){this.type=h,this.input=A,this.labels=[],this.outputs=[];for(const[N,q]of P)this.labels.push(N),this.outputs.push(q)}static parse(h,A){if(h.length-1<4)return A.error(`Expected at least 4 arguments, but found only ${h.length-1}.`);if((h.length-1)%2!=0)return A.error("Expected an even number of arguments.");const P=A.parse(h[1],1,Bi);if(!P)return null;const N=[];let q=null;A.expectedType&&A.expectedType.kind!=="value"&&(q=A.expectedType);for(let Y=1;Y<h.length;Y+=2){const oe=Y===1?-1/0:h[Y],fe=h[Y+1],xe=Y,Fe=Y+1;if(typeof oe!="number")return A.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',xe);if(N.length&&N[N.length-1][0]>=oe)return A.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',xe);const Ve=A.parse(fe,Fe,q);if(!Ve)return null;q=q||Ve.type,N.push([oe,Ve])}return new fa(q,P,N)}evaluate(h){const A=this.labels,P=this.outputs;if(A.length===1)return P[0].evaluate(h);const N=this.input.evaluate(h);if(N<=A[0])return P[0].evaluate(h);const q=A.length;return N>=A[q-1]?P[q-1].evaluate(h):P[ha(A,N)].evaluate(h)}eachChild(h){h(this.input);for(const A of this.outputs)h(A)}outputDefined(){return this.outputs.every(h=>h.outputDefined())}}function Io(y,h,A){return y*(1-A)+h*A}var il=Object.freeze({__proto__:null,number:Io,color:function(y,h,A){return new dt(Io(y.r,h.r,A),Io(y.g,h.g,A),Io(y.b,h.b,A),Io(y.a,h.a,A))},array:function(y,h,A){return y.map((P,N)=>Io(P,h[N],A))},padding:function(y,h,A){const P=y.values,N=h.values;return new Ft([Io(P[0],N[0],A),Io(P[1],N[1],A),Io(P[2],N[2],A),Io(P[3],N[3],A)])}});const U=.95047,$=1.08883,ge=4/29,Oe=6/29,nt=3*Oe*Oe,Ct=Math.PI/180,zt=180/Math.PI;function Rt(y){return y>.008856451679035631?Math.pow(y,1/3):y/nt+ge}function bi(y){return y>Oe?y*y*y:nt*(y-ge)}function yi(y){return 255*(y<=.0031308?12.92*y:1.055*Math.pow(y,1/2.4)-.055)}function _i(y){return(y/=255)<=.04045?y/12.92:Math.pow((y+.055)/1.055,2.4)}function ui(y){const h=_i(y.r),A=_i(y.g),P=_i(y.b),N=Rt((.4124564*h+.3575761*A+.1804375*P)/U),q=Rt((.2126729*h+.7151522*A+.072175*P)/1);return{l:116*q-16,a:500*(N-q),b:200*(q-Rt((.0193339*h+.119192*A+.9503041*P)/$)),alpha:y.a}}function ji(y){let h=(y.l+16)/116,A=isNaN(y.a)?h:h+y.a/500,P=isNaN(y.b)?h:h-y.b/200;return h=1*bi(h),A=U*bi(A),P=$*bi(P),new dt(yi(3.2404542*A-1.5371385*h-.4985314*P),yi(-.969266*A+1.8760108*h+.041556*P),yi(.0556434*A-.2040259*h+1.0572252*P),y.alpha)}function ln(y,h,A){const P=h-y;return y+A*(P>180||P<-180?P-360*Math.round(P/360):P)}const In={forward:ui,reverse:ji,interpolate:function(y,h,A){return{l:Io(y.l,h.l,A),a:Io(y.a,h.a,A),b:Io(y.b,h.b,A),alpha:Io(y.alpha,h.alpha,A)}}},ft={forward:function(y){const{l:h,a:A,b:P}=ui(y),N=Math.atan2(P,A)*zt;return{h:N<0?N+360:N,c:Math.sqrt(A*A+P*P),l:h,alpha:y.a}},reverse:function(y){const h=y.h*Ct,A=y.c;return ji({l:y.l,a:Math.cos(h)*A,b:Math.sin(h)*A,alpha:y.alpha})},interpolate:function(y,h,A){return{h:ln(y.h,h.h,A),c:Io(y.c,h.c,A),l:Io(y.l,h.l,A),alpha:Io(y.alpha,h.alpha,A)}}};var p=Object.freeze({__proto__:null,lab:In,hcl:ft});class Di{constructor(h,A,P,N,q){this.type=h,this.operator=A,this.interpolation=P,this.input=N,this.labels=[],this.outputs=[];for(const[Y,oe]of q)this.labels.push(Y),this.outputs.push(oe)}static interpolationFactor(h,A,P,N){let q=0;if(h.name==="exponential")q=c(A,h.base,P,N);else if(h.name==="linear")q=c(A,1,P,N);else if(h.name==="cubic-bezier"){const Y=h.controlPoints;q=new f(Y[0],Y[1],Y[2],Y[3]).solve(c(A,1,P,N))}return q}static parse(h,A){let[P,N,q,...Y]=h;if(!Array.isArray(N)||N.length===0)return A.error("Expected an interpolation type expression.",1);if(N[0]==="linear")N={name:"linear"};else if(N[0]==="exponential"){const xe=N[1];if(typeof xe!="number")return A.error("Exponential interpolation requires a numeric base.",1,1);N={name:"exponential",base:xe}}else{if(N[0]!=="cubic-bezier")return A.error(`Unknown interpolation type ${String(N[0])}`,1,0);{const xe=N.slice(1);if(xe.length!==4||xe.some(Fe=>typeof Fe!="number"||Fe<0||Fe>1))return A.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);N={name:"cubic-bezier",controlPoints:xe}}}if(h.length-1<4)return A.error(`Expected at least 4 arguments, but found only ${h.length-1}.`);if((h.length-1)%2!=0)return A.error("Expected an even number of arguments.");if(q=A.parse(q,2,Bi),!q)return null;const oe=[];let fe=null;P==="interpolate-hcl"||P==="interpolate-lab"?fe=Gn:A.expectedType&&A.expectedType.kind!=="value"&&(fe=A.expectedType);for(let xe=0;xe<Y.length;xe+=2){const Fe=Y[xe],Ve=Y[xe+1],tt=xe+3,lt=xe+4;if(typeof Fe!="number")return A.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',tt);if(oe.length&&oe[oe.length-1][0]>=Fe)return A.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',tt);const ht=A.parse(Ve,lt,fe);if(!ht)return null;fe=fe||ht.type,oe.push([Fe,ht])}return fe.kind==="number"||fe.kind==="color"||fe.kind==="padding"||fe.kind==="array"&&fe.itemType.kind==="number"&&typeof fe.N=="number"?new Di(fe,P,N,q,oe):A.error(`Type ${gr(fe)} is not interpolatable.`)}evaluate(h){const A=this.labels,P=this.outputs;if(A.length===1)return P[0].evaluate(h);const N=this.input.evaluate(h);if(N<=A[0])return P[0].evaluate(h);const q=A.length;if(N>=A[q-1])return P[q-1].evaluate(h);const Y=ha(A,N),oe=Di.interpolationFactor(this.interpolation,N,A[Y],A[Y+1]),fe=P[Y].evaluate(h),xe=P[Y+1].evaluate(h);return this.operator==="interpolate"?il[this.type.kind.toLowerCase()](fe,xe,oe):this.operator==="interpolate-hcl"?ft.reverse(ft.interpolate(ft.forward(fe),ft.forward(xe),oe)):In.reverse(In.interpolate(In.forward(fe),In.forward(xe),oe))}eachChild(h){h(this.input);for(const A of this.outputs)h(A)}outputDefined(){return this.outputs.every(h=>h.outputDefined())}}function c(y,h,A,P){const N=P-A,q=y-A;return N===0?0:h===1?q/N:(Math.pow(h,q)-1)/(Math.pow(h,N)-1)}class F{constructor(h,A){this.type=h,this.args=A}static parse(h,A){if(h.length<2)return A.error("Expectected at least one argument.");let P=null;const N=A.expectedType;N&&N.kind!=="value"&&(P=N);const q=[];for(const oe of h.slice(1)){const fe=A.parse(oe,1+q.length,P,void 0,{typeAnnotation:"omit"});if(!fe)return null;P=P||fe.type,q.push(fe)}if(!P)throw new Error("No output type");const Y=N&&q.some(oe=>an(N,oe.type));return new F(Y?zn:P,q)}evaluate(h){let A,P=null,N=0;for(const q of this.args)if(N++,P=q.evaluate(h),P&&P instanceof oi&&!P.available&&(A||(A=P.name),P=null,N===this.args.length&&(P=A)),P!==null)break;return P}eachChild(h){this.args.forEach(h)}outputDefined(){return this.args.every(h=>h.outputDefined())}}class mn{constructor(h,A){this.type=A.type,this.bindings=[].concat(h),this.result=A}evaluate(h){return this.result.evaluate(h)}eachChild(h){for(const A of this.bindings)h(A[1]);h(this.result)}static parse(h,A){if(h.length<4)return A.error(`Expected at least 3 arguments, but found ${h.length-1} instead.`);const P=[];for(let q=1;q<h.length-1;q+=2){const Y=h[q];if(typeof Y!="string")return A.error(`Expected string, but found ${typeof Y} instead.`,q);if(/[^a-zA-Z0-9_]/.test(Y))return A.error("Variable names must contain only alphanumeric characters or '_'.",q);const oe=A.parse(h[q+1],q+1);if(!oe)return null;P.push([Y,oe])}const N=A.parse(h[h.length-1],h.length-1,A.expectedType,P);return N?new mn(P,N):null}outputDefined(){return this.result.outputDefined()}}class $n{constructor(h,A,P){this.type=h,this.index=A,this.input=P}static parse(h,A){if(h.length!==3)return A.error(`Expected 2 arguments, but found ${h.length-1} instead.`);const P=A.parse(h[1],1,Bi),N=A.parse(h[2],2,Wn(A.expectedType||zn));return P&&N?new $n(N.type.itemType,P,N):null}evaluate(h){const A=this.index.evaluate(h),P=this.input.evaluate(h);if(A<0)throw new xt(`Array index out of bounds: ${A} < 0.`);if(A>=P.length)throw new xt(`Array index out of bounds: ${A} > ${P.length-1}.`);if(A!==Math.floor(A))throw new xt(`Array index must be an integer, but found ${A} instead.`);return P[A]}eachChild(h){h(this.index),h(this.input)}outputDefined(){return!1}}class Ao{constructor(h,A){this.type=Hn,this.needle=h,this.haystack=A}static parse(h,A){if(h.length!==3)return A.error(`Expected 2 arguments, but found ${h.length-1} instead.`);const P=A.parse(h[1],1,zn),N=A.parse(h[2],2,zn);return P&&N?He(P.type,[Hn,Ki,Bi,fn,zn])?new Ao(P,N):A.error(`Expected first argument to be of type boolean, string, number or null, but found ${gr(P.type)} instead`):null}evaluate(h){const A=this.needle.evaluate(h),P=this.haystack.evaluate(h);if(!P)return!1;if(!wo(A,["boolean","string","number","null"]))throw new xt(`Expected first argument to be of type boolean, string, number or null, but found ${gr(Ii(A))} instead.`);if(!wo(P,["string","array"]))throw new xt(`Expected second argument to be of type array or string, but found ${gr(Ii(P))} instead.`);return P.indexOf(A)>=0}eachChild(h){h(this.needle),h(this.haystack)}outputDefined(){return!0}}class re{constructor(h,A,P){this.type=Bi,this.needle=h,this.haystack=A,this.fromIndex=P}static parse(h,A){if(h.length<=2||h.length>=5)return A.error(`Expected 3 or 4 arguments, but found ${h.length-1} instead.`);const P=A.parse(h[1],1,zn),N=A.parse(h[2],2,zn);if(!P||!N)return null;if(!He(P.type,[Hn,Ki,Bi,fn,zn]))return A.error(`Expected first argument to be of type boolean, string, number or null, but found ${gr(P.type)} instead`);if(h.length===4){const q=A.parse(h[3],3,Bi);return q?new re(P,N,q):null}return new re(P,N)}evaluate(h){const A=this.needle.evaluate(h),P=this.haystack.evaluate(h);if(!wo(A,["boolean","string","number","null"]))throw new xt(`Expected first argument to be of type boolean, string, number or null, but found ${gr(Ii(A))} instead.`);if(!wo(P,["string","array"]))throw new xt(`Expected second argument to be of type array or string, but found ${gr(Ii(P))} instead.`);if(this.fromIndex){const N=this.fromIndex.evaluate(h);return P.indexOf(A,N)}return P.indexOf(A)}eachChild(h){h(this.needle),h(this.haystack),this.fromIndex&&h(this.fromIndex)}outputDefined(){return!1}}class Rr{constructor(h,A,P,N,q,Y){this.inputType=h,this.type=A,this.input=P,this.cases=N,this.outputs=q,this.otherwise=Y}static parse(h,A){if(h.length<5)return A.error(`Expected at least 4 arguments, but found only ${h.length-1}.`);if(h.length%2!=1)return A.error("Expected an even number of arguments.");let P,N;A.expectedType&&A.expectedType.kind!=="value"&&(N=A.expectedType);const q={},Y=[];for(let xe=2;xe<h.length-1;xe+=2){let Fe=h[xe];const Ve=h[xe+1];Array.isArray(Fe)||(Fe=[Fe]);const tt=A.concat(xe);if(Fe.length===0)return tt.error("Expected at least one branch label.");for(const ht of Fe){if(typeof ht!="number"&&typeof ht!="string")return tt.error("Branch labels must be numbers or strings.");if(typeof ht=="number"&&Math.abs(ht)>Number.MAX_SAFE_INTEGER)return tt.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof ht=="number"&&Math.floor(ht)!==ht)return tt.error("Numeric branch labels must be integer values.");if(P){if(tt.checkSubtype(P,Ii(ht)))return null}else P=Ii(ht);if(q[String(ht)]!==void 0)return tt.error("Branch labels must be unique.");q[String(ht)]=Y.length}const lt=A.parse(Ve,xe,N);if(!lt)return null;N=N||lt.type,Y.push(lt)}const oe=A.parse(h[1],1,zn);if(!oe)return null;const fe=A.parse(h[h.length-1],h.length-1,N);return fe?oe.type.kind!=="value"&&A.concat(1).checkSubtype(P,oe.type)?null:new Rr(P,N,oe,q,Y,fe):null}evaluate(h){const A=this.input.evaluate(h);return(Ii(A)===this.inputType&&this.outputs[this.cases[A]]||this.otherwise).evaluate(h)}eachChild(h){h(this.input),this.outputs.forEach(h),h(this.otherwise)}outputDefined(){return this.outputs.every(h=>h.outputDefined())&&this.otherwise.outputDefined()}}class da{constructor(h,A,P){this.type=h,this.branches=A,this.otherwise=P}static parse(h,A){if(h.length<4)return A.error(`Expected at least 3 arguments, but found only ${h.length-1}.`);if(h.length%2!=0)return A.error("Expected an odd number of arguments.");let P;A.expectedType&&A.expectedType.kind!=="value"&&(P=A.expectedType);const N=[];for(let Y=1;Y<h.length-1;Y+=2){const oe=A.parse(h[Y],Y,Hn);if(!oe)return null;const fe=A.parse(h[Y+1],Y+1,P);if(!fe)return null;N.push([oe,fe]),P=P||fe.type}const q=A.parse(h[h.length-1],h.length-1,P);if(!q)return null;if(!P)throw new Error("Can't infer output type");return new da(P,N,q)}evaluate(h){for(const[A,P]of this.branches)if(A.evaluate(h))return P.evaluate(h);return this.otherwise.evaluate(h)}eachChild(h){for(const[A,P]of this.branches)h(A),h(P);h(this.otherwise)}outputDefined(){return this.branches.every(([h,A])=>A.outputDefined())&&this.otherwise.outputDefined()}}class Na{constructor(h,A,P,N){this.type=h,this.input=A,this.beginIndex=P,this.endIndex=N}static parse(h,A){if(h.length<=2||h.length>=5)return A.error(`Expected 3 or 4 arguments, but found ${h.length-1} instead.`);const P=A.parse(h[1],1,zn),N=A.parse(h[2],2,Bi);if(!P||!N)return null;if(!He(P.type,[Wn(zn),Ki,zn]))return A.error(`Expected first argument to be of type array or string, but found ${gr(P.type)} instead`);if(h.length===4){const q=A.parse(h[3],3,Bi);return q?new Na(P.type,P,N,q):null}return new Na(P.type,P,N)}evaluate(h){const A=this.input.evaluate(h),P=this.beginIndex.evaluate(h);if(!wo(A,["string","array"]))throw new xt(`Expected first argument to be of type array or string, but found ${gr(Ii(A))} instead.`);if(this.endIndex){const N=this.endIndex.evaluate(h);return A.slice(P,N)}return A.slice(P)}eachChild(h){h(this.input),h(this.beginIndex),this.endIndex&&h(this.endIndex)}outputDefined(){return!1}}function Mc(y,h){return y==="=="||y==="!="?h.kind==="boolean"||h.kind==="string"||h.kind==="number"||h.kind==="null"||h.kind==="value":h.kind==="string"||h.kind==="number"||h.kind==="value"}function Al(y,h,A,P){return P.compare(h,A)===0}function Hs(y,h,A){const P=y!=="=="&&y!=="!=";return class M4{constructor(q,Y,oe){this.type=Hn,this.lhs=q,this.rhs=Y,this.collator=oe,this.hasUntypedArgument=q.type.kind==="value"||Y.type.kind==="value"}static parse(q,Y){if(q.length!==3&&q.length!==4)return Y.error("Expected two or three arguments.");const oe=q[0];let fe=Y.parse(q[1],1,zn);if(!fe)return null;if(!Mc(oe,fe.type))return Y.concat(1).error(`"${oe}" comparisons are not supported for type '${gr(fe.type)}'.`);let xe=Y.parse(q[2],2,zn);if(!xe)return null;if(!Mc(oe,xe.type))return Y.concat(2).error(`"${oe}" comparisons are not supported for type '${gr(xe.type)}'.`);if(fe.type.kind!==xe.type.kind&&fe.type.kind!=="value"&&xe.type.kind!=="value")return Y.error(`Cannot compare types '${gr(fe.type)}' and '${gr(xe.type)}'.`);P&&(fe.type.kind==="value"&&xe.type.kind!=="value"?fe=new Qn(xe.type,[fe]):fe.type.kind!=="value"&&xe.type.kind==="value"&&(xe=new Qn(fe.type,[xe])));let Fe=null;if(q.length===4){if(fe.type.kind!=="string"&&xe.type.kind!=="string"&&fe.type.kind!=="value"&&xe.type.kind!=="value")return Y.error("Cannot use collator to compare non-string types.");if(Fe=Y.parse(q[3],3,dn),!Fe)return null}return new M4(fe,xe,Fe)}evaluate(q){const Y=this.lhs.evaluate(q),oe=this.rhs.evaluate(q);if(P&&this.hasUntypedArgument){const fe=Ii(Y),xe=Ii(oe);if(fe.kind!==xe.kind||fe.kind!=="string"&&fe.kind!=="number")throw new xt(`Expected arguments for "${y}" to be (string, string) or (number, number), but found (${fe.kind}, ${xe.kind}) instead.`)}if(this.collator&&!P&&this.hasUntypedArgument){const fe=Ii(Y),xe=Ii(oe);if(fe.kind!=="string"||xe.kind!=="string")return h(q,Y,oe)}return this.collator?A(q,Y,oe,this.collator.evaluate(q)):h(q,Y,oe)}eachChild(q){q(this.lhs),q(this.rhs),this.collator&&q(this.collator)}outputDefined(){return!0}}}const sc=Hs("==",function(y,h,A){return h===A},Al),hu=Hs("!=",function(y,h,A){return h!==A},function(y,h,A,P){return!Al(0,h,A,P)}),ah=Hs("<",function(y,h,A){return h<A},function(y,h,A,P){return P.compare(h,A)<0}),fu=Hs(">",function(y,h,A){return h>A},function(y,h,A,P){return P.compare(h,A)>0}),lh=Hs("<=",function(y,h,A){return h<=A},function(y,h,A,P){return P.compare(h,A)<=0}),Ru=Hs(">=",function(y,h,A){return h>=A},function(y,h,A,P){return P.compare(h,A)>=0});class du{constructor(h,A,P,N,q){this.type=Ki,this.number=h,this.locale=A,this.currency=P,this.minFractionDigits=N,this.maxFractionDigits=q}static parse(h,A){if(h.length!==3)return A.error("Expected two arguments.");const P=A.parse(h[1],1,Bi);if(!P)return null;const N=h[2];if(typeof N!="object"||Array.isArray(N))return A.error("NumberFormat options argument must be an object.");let q=null;if(N.locale&&(q=A.parse(N.locale,1,Ki),!q))return null;let Y=null;if(N.currency&&(Y=A.parse(N.currency,1,Ki),!Y))return null;let oe=null;if(N["min-fraction-digits"]&&(oe=A.parse(N["min-fraction-digits"],1,Bi),!oe))return null;let fe=null;return N["max-fraction-digits"]&&(fe=A.parse(N["max-fraction-digits"],1,Bi),!fe)?null:new du(P,q,Y,oe,fe)}evaluate(h){return new Intl.NumberFormat(this.locale?this.locale.evaluate(h):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(h):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(h):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(h):void 0}).format(this.number.evaluate(h))}eachChild(h){h(this.number),this.locale&&h(this.locale),this.currency&&h(this.currency),this.minFractionDigits&&h(this.minFractionDigits),this.maxFractionDigits&&h(this.maxFractionDigits)}outputDefined(){return!1}}class pu{constructor(h){this.type=gn,this.sections=h}static parse(h,A){if(h.length<2)return A.error("Expected at least one argument.");const P=h[1];if(!Array.isArray(P)&&typeof P=="object")return A.error("First argument must be an image or text section.");const N=[];let q=!1;for(let Y=1;Y<=h.length-1;++Y){const oe=h[Y];if(q&&typeof oe=="object"&&!Array.isArray(oe)){q=!1;let fe=null;if(oe["font-scale"]&&(fe=A.parse(oe["font-scale"],1,Bi),!fe))return null;let xe=null;if(oe["text-font"]&&(xe=A.parse(oe["text-font"],1,Wn(Ki)),!xe))return null;let Fe=null;if(oe["text-color"]&&(Fe=A.parse(oe["text-color"],1,Gn),!Fe))return null;const Ve=N[N.length-1];Ve.scale=fe,Ve.font=xe,Ve.textColor=Fe}else{const fe=A.parse(h[Y],1,zn);if(!fe)return null;const xe=fe.type.kind;if(xe!=="string"&&xe!=="value"&&xe!=="null"&&xe!=="resolvedImage")return A.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");q=!0,N.push({content:fe,scale:null,font:null,textColor:null})}}return new pu(N)}evaluate(h){return new Yt(this.sections.map(A=>{const P=A.content.evaluate(h);return Ii(P)===Sr?new Ge("",P,null,null,null):new Ge(En(P),null,A.scale?A.scale.evaluate(h):null,A.font?A.font.evaluate(h).join(","):null,A.textColor?A.textColor.evaluate(h):null)}))}eachChild(h){for(const A of this.sections)h(A.content),A.scale&&h(A.scale),A.font&&h(A.font),A.textColor&&h(A.textColor)}outputDefined(){return!1}}class ql{constructor(h){this.type=Sr,this.input=h}static parse(h,A){if(h.length!==2)return A.error("Expected two arguments.");const P=A.parse(h[1],1,Ki);return P?new ql(P):A.error("No image name provided.")}evaluate(h){const A=this.input.evaluate(h),P=oi.fromString(A);return P&&h.availableImages&&(P.available=h.availableImages.indexOf(A)>-1),P}eachChild(h){h(this.input)}outputDefined(){return!1}}class mu{constructor(h){this.type=Bi,this.input=h}static parse(h,A){if(h.length!==2)return A.error(`Expected 1 argument, but found ${h.length-1} instead.`);const P=A.parse(h[1],1);return P?P.type.kind!=="array"&&P.type.kind!=="string"&&P.type.kind!=="value"?A.error(`Expected argument of type string or array, but found ${gr(P.type)} instead.`):new mu(P):null}evaluate(h){const A=this.input.evaluate(h);if(typeof A=="string"||Array.isArray(A))return A.length;throw new xt(`Expected value to be of type string or array, but found ${gr(Ii(A))} instead.`)}eachChild(h){h(this.input)}outputDefined(){return!1}}const Nn={"==":sc,"!=":hu,">":fu,"<":ah,">=":Ru,"<=":lh,array:Qn,at:$n,boolean:Qn,case:da,coalesce:F,collator:Jr,format:pu,image:ql,in:Ao,"index-of":re,interpolate:Di,"interpolate-hcl":Di,"interpolate-lab":Di,length:mu,let:mn,literal:Sn,match:Rr,number:Qn,"number-format":du,object:Qn,slice:Na,step:fa,string:Qn,"to-boolean":dr,"to-color":dr,"to-number":dr,"to-string":dr,var:uu,within:Zs};function Fn(y,[h,A,P,N]){h=h.evaluate(y),A=A.evaluate(y),P=P.evaluate(y);const q=N?N.evaluate(y):1,Y=yt(h,A,P,q);if(Y)throw new xt(Y);return new dt(h/255*q,A/255*q,P/255*q,q)}function Bu(y,h){return y in h}function ja(y,h){const A=h[y];return A===void 0?null:A}function pa(y){return{type:y}}function Hl(y){return{result:"success",value:y}}function ma(y){return{result:"error",value:y}}function ko(y){return y["property-type"]==="data-driven"||y["property-type"]==="cross-faded-data-driven"}function se(y){return!!y.expression&&y.expression.parameters.indexOf("zoom")>-1}function Ue(y){return!!y.expression&&y.expression.interpolated}function At(y){return y instanceof Number?"number":y instanceof String?"string":y instanceof Boolean?"boolean":Array.isArray(y)?"array":y===null?"null":typeof y}function Jt(y){return typeof y=="object"&&y!==null&&!Array.isArray(y)}function hi(y){return y}function qi(y,h){const A=h.type==="color",P=y.stops&&typeof y.stops[0][0]=="object",N=P||!(P||y.property!==void 0),q=y.type||(Ue(h)?"exponential":"interval");if(A||h.type==="padding"){const xe=A?dt.parse:Ft.parse;(y=_t({},y)).stops&&(y.stops=y.stops.map(Fe=>[Fe[0],xe(Fe[1])])),y.default=xe(y.default?y.default:h.default)}if(y.colorSpace&&y.colorSpace!=="rgb"&&!p[y.colorSpace])throw new Error(`Unknown color space: ${y.colorSpace}`);let Y,oe,fe;if(q==="exponential")Y=Nr;else if(q==="interval")Y=Ar;else if(q==="categorical"){Y=Zn,oe=Object.create(null);for(const xe of y.stops)oe[xe[0]]=xe[1];fe=typeof y.stops[0][0]}else{if(q!=="identity")throw new Error(`Unknown function type "${q}"`);Y=Wr}if(P){const xe={},Fe=[];for(let lt=0;lt<y.stops.length;lt++){const ht=y.stops[lt],Zt=ht[0].zoom;xe[Zt]===void 0&&(xe[Zt]={zoom:Zt,type:y.type,property:y.property,default:y.default,stops:[]},Fe.push(Zt)),xe[Zt].stops.push([ht[0].value,ht[1]])}const Ve=[];for(const lt of Fe)Ve.push([xe[lt].zoom,qi(xe[lt],h)]);const tt={name:"linear"};return{kind:"composite",interpolationType:tt,interpolationFactor:Di.interpolationFactor.bind(void 0,tt),zoomStops:Ve.map(lt=>lt[0]),evaluate:({zoom:lt},ht)=>Nr({stops:Ve,base:y.base},h,lt).evaluate(lt,ht)}}if(N){const xe=q==="exponential"?{name:"exponential",base:y.base!==void 0?y.base:1}:null;return{kind:"camera",interpolationType:xe,interpolationFactor:Di.interpolationFactor.bind(void 0,xe),zoomStops:y.stops.map(Fe=>Fe[0]),evaluate:({zoom:Fe})=>Y(y,h,Fe,oe,fe)}}return{kind:"source",evaluate(xe,Fe){const Ve=Fe&&Fe.properties?Fe.properties[y.property]:void 0;return Ve===void 0?hn(y.default,h.default):Y(y,h,Ve,oe,fe)}}}function hn(y,h,A){return y!==void 0?y:h!==void 0?h:A!==void 0?A:void 0}function Zn(y,h,A,P,N){return hn(typeof A===N?P[A]:void 0,y.default,h.default)}function Ar(y,h,A){if(At(A)!=="number")return hn(y.default,h.default);const P=y.stops.length;if(P===1||A<=y.stops[0][0])return y.stops[0][1];if(A>=y.stops[P-1][0])return y.stops[P-1][1];const N=ha(y.stops.map(q=>q[0]),A);return y.stops[N][1]}function Nr(y,h,A){const P=y.base!==void 0?y.base:1;if(At(A)!=="number")return hn(y.default,h.default);const N=y.stops.length;if(N===1||A<=y.stops[0][0])return y.stops[0][1];if(A>=y.stops[N-1][0])return y.stops[N-1][1];const q=ha(y.stops.map(Fe=>Fe[0]),A),Y=function(Fe,Ve,tt,lt){const ht=lt-tt,Zt=Fe-tt;return ht===0?0:Ve===1?Zt/ht:(Math.pow(Ve,Zt)-1)/(Math.pow(Ve,ht)-1)}(A,P,y.stops[q][0],y.stops[q+1][0]),oe=y.stops[q][1],fe=y.stops[q+1][1];let xe=il[h.type]||hi;if(y.colorSpace&&y.colorSpace!=="rgb"){const Fe=p[y.colorSpace];xe=(Ve,tt)=>Fe.reverse(Fe.interpolate(Fe.forward(Ve),Fe.forward(tt),Y))}return typeof oe.evaluate=="function"?{evaluate(...Fe){const Ve=oe.evaluate.apply(void 0,Fe),tt=fe.evaluate.apply(void 0,Fe);if(Ve!==void 0&&tt!==void 0)return xe(Ve,tt,Y)}}:xe(oe,fe,Y)}function Wr(y,h,A){switch(h.type){case"color":A=dt.parse(A);break;case"formatted":A=Yt.fromString(A.toString());break;case"resolvedImage":A=oi.fromString(A.toString());break;case"padding":A=Ft.parse(A);break;default:At(A)===h.type||h.type==="enum"&&h.values[A]||(A=void 0)}return hn(A,y.default,h.default)}to.register(Nn,{error:[{kind:"error"},[Ki],(y,[h])=>{throw new xt(h.evaluate(y))}],typeof:[Ki,[zn],(y,[h])=>gr(Ii(h.evaluate(y)))],"to-rgba":[Wn(Bi,4),[Gn],(y,[h])=>h.evaluate(y).toArray()],rgb:[Gn,[Bi,Bi,Bi],Fn],rgba:[Gn,[Bi,Bi,Bi,Bi],Fn],has:{type:Hn,overloads:[[[Ki],(y,[h])=>Bu(h.evaluate(y),y.properties())],[[Ki,Zr],(y,[h,A])=>Bu(h.evaluate(y),A.evaluate(y))]]},get:{type:zn,overloads:[[[Ki],(y,[h])=>ja(h.evaluate(y),y.properties())],[[Ki,Zr],(y,[h,A])=>ja(h.evaluate(y),A.evaluate(y))]]},"feature-state":[zn,[Ki],(y,[h])=>ja(h.evaluate(y),y.featureState||{})],properties:[Zr,[],y=>y.properties()],"geometry-type":[Ki,[],y=>y.geometryType()],id:[zn,[],y=>y.id()],zoom:[Bi,[],y=>y.globals.zoom],"heatmap-density":[Bi,[],y=>y.globals.heatmapDensity||0],"line-progress":[Bi,[],y=>y.globals.lineProgress||0],accumulated:[zn,[],y=>y.globals.accumulated===void 0?null:y.globals.accumulated],"+":[Bi,pa(Bi),(y,h)=>{let A=0;for(const P of h)A+=P.evaluate(y);return A}],"*":[Bi,pa(Bi),(y,h)=>{let A=1;for(const P of h)A*=P.evaluate(y);return A}],"-":{type:Bi,overloads:[[[Bi,Bi],(y,[h,A])=>h.evaluate(y)-A.evaluate(y)],[[Bi],(y,[h])=>-h.evaluate(y)]]},"/":[Bi,[Bi,Bi],(y,[h,A])=>h.evaluate(y)/A.evaluate(y)],"%":[Bi,[Bi,Bi],(y,[h,A])=>h.evaluate(y)%A.evaluate(y)],ln2:[Bi,[],()=>Math.LN2],pi:[Bi,[],()=>Math.PI],e:[Bi,[],()=>Math.E],"^":[Bi,[Bi,Bi],(y,[h,A])=>Math.pow(h.evaluate(y),A.evaluate(y))],sqrt:[Bi,[Bi],(y,[h])=>Math.sqrt(h.evaluate(y))],log10:[Bi,[Bi],(y,[h])=>Math.log(h.evaluate(y))/Math.LN10],ln:[Bi,[Bi],(y,[h])=>Math.log(h.evaluate(y))],log2:[Bi,[Bi],(y,[h])=>Math.log(h.evaluate(y))/Math.LN2],sin:[Bi,[Bi],(y,[h])=>Math.sin(h.evaluate(y))],cos:[Bi,[Bi],(y,[h])=>Math.cos(h.evaluate(y))],tan:[Bi,[Bi],(y,[h])=>Math.tan(h.evaluate(y))],asin:[Bi,[Bi],(y,[h])=>Math.asin(h.evaluate(y))],acos:[Bi,[Bi],(y,[h])=>Math.acos(h.evaluate(y))],atan:[Bi,[Bi],(y,[h])=>Math.atan(h.evaluate(y))],min:[Bi,pa(Bi),(y,h)=>Math.min(...h.map(A=>A.evaluate(y)))],max:[Bi,pa(Bi),(y,h)=>Math.max(...h.map(A=>A.evaluate(y)))],abs:[Bi,[Bi],(y,[h])=>Math.abs(h.evaluate(y))],round:[Bi,[Bi],(y,[h])=>{const A=h.evaluate(y);return A<0?-Math.round(-A):Math.round(A)}],floor:[Bi,[Bi],(y,[h])=>Math.floor(h.evaluate(y))],ceil:[Bi,[Bi],(y,[h])=>Math.ceil(h.evaluate(y))],"filter-==":[Hn,[Ki,zn],(y,[h,A])=>y.properties()[h.value]===A.value],"filter-id-==":[Hn,[zn],(y,[h])=>y.id()===h.value],"filter-type-==":[Hn,[Ki],(y,[h])=>y.geometryType()===h.value],"filter-<":[Hn,[Ki,zn],(y,[h,A])=>{const P=y.properties()[h.value],N=A.value;return typeof P==typeof N&&P<N}],"filter-id-<":[Hn,[zn],(y,[h])=>{const A=y.id(),P=h.value;return typeof A==typeof P&&A<P}],"filter->":[Hn,[Ki,zn],(y,[h,A])=>{const P=y.properties()[h.value],N=A.value;return typeof P==typeof N&&P>N}],"filter-id->":[Hn,[zn],(y,[h])=>{const A=y.id(),P=h.value;return typeof A==typeof P&&A>P}],"filter-<=":[Hn,[Ki,zn],(y,[h,A])=>{const P=y.properties()[h.value],N=A.value;return typeof P==typeof N&&P<=N}],"filter-id-<=":[Hn,[zn],(y,[h])=>{const A=y.id(),P=h.value;return typeof A==typeof P&&A<=P}],"filter->=":[Hn,[Ki,zn],(y,[h,A])=>{const P=y.properties()[h.value],N=A.value;return typeof P==typeof N&&P>=N}],"filter-id->=":[Hn,[zn],(y,[h])=>{const A=y.id(),P=h.value;return typeof A==typeof P&&A>=P}],"filter-has":[Hn,[zn],(y,[h])=>h.value in y.properties()],"filter-has-id":[Hn,[],y=>y.id()!==null&&y.id()!==void 0],"filter-type-in":[Hn,[Wn(Ki)],(y,[h])=>h.value.indexOf(y.geometryType())>=0],"filter-id-in":[Hn,[Wn(zn)],(y,[h])=>h.value.indexOf(y.id())>=0],"filter-in-small":[Hn,[Ki,Wn(zn)],(y,[h,A])=>A.value.indexOf(y.properties()[h.value])>=0],"filter-in-large":[Hn,[Ki,Wn(zn)],(y,[h,A])=>function(P,N,q,Y){for(;q<=Y;){const oe=q+Y>>1;if(N[oe]===P)return!0;N[oe]>P?Y=oe-1:q=oe+1}return!1}(y.properties()[h.value],A.value,0,A.value.length-1)],all:{type:Hn,overloads:[[[Hn,Hn],(y,[h,A])=>h.evaluate(y)&&A.evaluate(y)],[pa(Hn),(y,h)=>{for(const A of h)if(!A.evaluate(y))return!1;return!0}]]},any:{type:Hn,overloads:[[[Hn,Hn],(y,[h,A])=>h.evaluate(y)||A.evaluate(y)],[pa(Hn),(y,h)=>{for(const A of h)if(A.evaluate(y))return!0;return!1}]]},"!":[Hn,[Hn],(y,[h])=>!h.evaluate(y)],"is-supported-script":[Hn,[Ki],(y,[h])=>{const A=y.globals&&y.globals.isSupportedScript;return!A||A(h.evaluate(y))}],upcase:[Ki,[Ki],(y,[h])=>h.evaluate(y).toUpperCase()],downcase:[Ki,[Ki],(y,[h])=>h.evaluate(y).toLowerCase()],concat:[Ki,pa(zn),(y,h)=>h.map(A=>En(A.evaluate(y))).join("")],"resolved-locale":[Ki,[dn],(y,[h])=>h.evaluate(y).resolvedLocale()]});class eo{constructor(h,A){this.expression=h,this._warningHistory={},this._evaluator=new Pr,this._defaultValue=A?function(P){return P.type==="color"&&Jt(P.default)?new dt(0,0,0,0):P.type==="color"?dt.parse(P.default)||null:P.type==="padding"?Ft.parse(P.default)||null:P.default===void 0?null:P.default}(A):null,this._enumValues=A&&A.type==="enum"?A.values:null}evaluateWithoutErrorHandling(h,A,P,N,q,Y){return this._evaluator.globals=h,this._evaluator.feature=A,this._evaluator.featureState=P,this._evaluator.canonical=N,this._evaluator.availableImages=q||null,this._evaluator.formattedSection=Y,this.expression.evaluate(this._evaluator)}evaluate(h,A,P,N,q,Y){this._evaluator.globals=h,this._evaluator.feature=A||null,this._evaluator.featureState=P||null,this._evaluator.canonical=N,this._evaluator.availableImages=q||null,this._evaluator.formattedSection=Y||null;try{const oe=this.expression.evaluate(this._evaluator);if(oe==null||typeof oe=="number"&&oe!=oe)return this._defaultValue;if(this._enumValues&&!(oe in this._enumValues))throw new xt(`Expected value to be one of ${Object.keys(this._enumValues).map(fe=>JSON.stringify(fe)).join(", ")}, but found ${JSON.stringify(oe)} instead.`);return oe}catch(oe){return this._warningHistory[oe.message]||(this._warningHistory[oe.message]=!0,typeof console<"u"&&console.warn(oe.message)),this._defaultValue}}}function Bo(y){return Array.isArray(y)&&y.length>0&&typeof y[0]=="string"&&y[0]in Nn}function qo(y,h){const A=new xl(Nn,[],h?function(N){const q={color:Gn,string:Ki,number:Bi,enum:Ki,boolean:Hn,formatted:gn,padding:on,resolvedImage:Sr};return N.type==="array"?Wn(q[N.value]||zn,N.length):q[N.type]}(h):void 0),P=A.parse(y,void 0,void 0,void 0,h&&h.type==="string"?{typeAnnotation:"coerce"}:void 0);return P?Hl(new eo(P,h)):ma(A.errors)}class Wo{constructor(h,A){this.kind=h,this._styleExpression=A,this.isStateDependent=h!=="constant"&&!Ea(A.expression)}evaluateWithoutErrorHandling(h,A,P,N,q,Y){return this._styleExpression.evaluateWithoutErrorHandling(h,A,P,N,q,Y)}evaluate(h,A,P,N,q,Y){return this._styleExpression.evaluate(h,A,P,N,q,Y)}}class Cs{constructor(h,A,P,N){this.kind=h,this.zoomStops=P,this._styleExpression=A,this.isStateDependent=h!=="camera"&&!Ea(A.expression),this.interpolationType=N}evaluateWithoutErrorHandling(h,A,P,N,q,Y){return this._styleExpression.evaluateWithoutErrorHandling(h,A,P,N,q,Y)}evaluate(h,A,P,N,q,Y){return this._styleExpression.evaluate(h,A,P,N,q,Y)}interpolationFactor(h,A,P){return this.interpolationType?Di.interpolationFactor(this.interpolationType,h,A,P):0}}function ds(y,h){const A=qo(y,h);if(A.result==="error")return A;const P=A.value.expression,N=qs(P);if(!N&&!ko(h))return ma([new wn("","data expressions not supported")]);const q=wl(P,["zoom"]);if(!q&&!se(h))return ma([new wn("","zoom expressions not supported")]);const Y=Es(P);return Y||q?Y instanceof wn?ma([Y]):Y instanceof Di&&!Ue(h)?ma([new wn("",'"interpolate" expressions cannot be used with this property')]):Hl(Y?new Cs(N?"camera":"composite",A.value,Y.labels,Y instanceof Di?Y.interpolation:void 0):new Wo(N?"constant":"source",A.value)):ma([new wn("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class jr{constructor(h,A){this._parameters=h,this._specification=A,_t(this,qi(this._parameters,this._specification))}static deserialize(h){return new jr(h._parameters,h._specification)}static serialize(h){return{_parameters:h._parameters,_specification:h._specification}}}function Es(y){let h=null;if(y instanceof mn)h=Es(y.result);else if(y instanceof F){for(const A of y.args)if(h=Es(A),h)break}else(y instanceof fa||y instanceof Di)&&y.input instanceof to&&y.input.name==="zoom"&&(h=y);return h instanceof wn||y.eachChild(A=>{const P=Es(A);P instanceof wn?h=P:!h&&P?h=new wn("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):h&&P&&h!==P&&(h=new wn("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),h}function vs(y){const h=y.key,A=y.value,P=y.valueSpec||{},N=y.objectElementValidators||{},q=y.style,Y=y.styleSpec;let oe=[];const fe=At(A);if(fe!=="object")return[new ae(h,A,`object expected, ${fe} found`)];for(const xe in A){const Fe=xe.split(".")[0],Ve=P[Fe]||P["*"];let tt;if(N[Fe])tt=N[Fe];else if(P[Fe])tt=Ko;else if(N["*"])tt=N["*"];else{if(!P["*"]){oe.push(new ae(h,A[xe],`unknown property "${xe}"`));continue}tt=Ko}oe=oe.concat(tt({key:(h&&`${h}.`)+xe,value:A[xe],valueSpec:Ve,style:q,styleSpec:Y,object:A,objectKey:xe},A))}for(const xe in P)N[xe]||P[xe].required&&P[xe].default===void 0&&A[xe]===void 0&&oe.push(new ae(h,A,`missing required property "${xe}"`));return oe}function Gl(y){const h=y.value,A=y.valueSpec,P=y.style,N=y.styleSpec,q=y.key,Y=y.arrayElementValidator||Ko;if(At(h)!=="array")return[new ae(q,h,`array expected, ${At(h)} found`)];if(A.length&&h.length!==A.length)return[new ae(q,h,`array length ${A.length} expected, length ${h.length} found`)];if(A["min-length"]&&h.length<A["min-length"])return[new ae(q,h,`array length at least ${A["min-length"]} expected, length ${h.length} found`)];let oe={type:A.value,values:A.values};N.$version<7&&(oe.function=A.function),At(A.value)==="object"&&(oe=A.value);let fe=[];for(let xe=0;xe<h.length;xe++)fe=fe.concat(Y({array:h,arrayIndex:xe,value:h[xe],valueSpec:oe,style:P,styleSpec:N,key:`${q}[${xe}]`}));return fe}function kl(y){const h=y.key,A=y.value,P=y.valueSpec;let N=At(A);return N==="number"&&A!=A&&(N="NaN"),N!=="number"?[new ae(h,A,`number expected, ${N} found`)]:"minimum"in P&&A<P.minimum?[new ae(h,A,`${A} is less than the minimum value ${P.minimum}`)]:"maximum"in P&&A>P.maximum?[new ae(h,A,`${A} is greater than the maximum value ${P.maximum}`)]:[]}function zu(y){const h=y.valueSpec,A=Kt(y.value.type);let P,N,q,Y={};const oe=A!=="categorical"&&y.value.property===void 0,fe=!oe,xe=At(y.value.stops)==="array"&&At(y.value.stops[0])==="array"&&At(y.value.stops[0][0])==="object",Fe=vs({key:y.key,value:y.value,valueSpec:y.styleSpec.function,style:y.style,styleSpec:y.styleSpec,objectElementValidators:{stops:function(lt){if(A==="identity")return[new ae(lt.key,lt.value,'identity function may not have a "stops" property')];let ht=[];const Zt=lt.value;return ht=ht.concat(Gl({key:lt.key,value:Zt,valueSpec:lt.valueSpec,style:lt.style,styleSpec:lt.styleSpec,arrayElementValidator:Ve})),At(Zt)==="array"&&Zt.length===0&&ht.push(new ae(lt.key,Zt,"array must have at least one stop")),ht},default:function(lt){return Ko({key:lt.key,value:lt.value,valueSpec:h,style:lt.style,styleSpec:lt.styleSpec})}}});return A==="identity"&&oe&&Fe.push(new ae(y.key,y.value,'missing required property "property"')),A==="identity"||y.value.stops||Fe.push(new ae(y.key,y.value,'missing required property "stops"')),A==="exponential"&&y.valueSpec.expression&&!Ue(y.valueSpec)&&Fe.push(new ae(y.key,y.value,"exponential functions not supported")),y.styleSpec.$version>=8&&(fe&&!ko(y.valueSpec)?Fe.push(new ae(y.key,y.value,"property functions not supported")):oe&&!se(y.valueSpec)&&Fe.push(new ae(y.key,y.value,"zoom functions not supported"))),A!=="categorical"&&!xe||y.value.property!==void 0||Fe.push(new ae(y.key,y.value,'"property" property is required')),Fe;function Ve(lt){let ht=[];const Zt=lt.value,Vt=lt.key;if(At(Zt)!=="array")return[new ae(Vt,Zt,`array expected, ${At(Zt)} found`)];if(Zt.length!==2)return[new ae(Vt,Zt,`array length 2 expected, length ${Zt.length} found`)];if(xe){if(At(Zt[0])!=="object")return[new ae(Vt,Zt,`object expected, ${At(Zt[0])} found`)];if(Zt[0].zoom===void 0)return[new ae(Vt,Zt,"object stop key must have zoom")];if(Zt[0].value===void 0)return[new ae(Vt,Zt,"object stop key must have value")];if(q&&q>Kt(Zt[0].zoom))return[new ae(Vt,Zt[0].zoom,"stop zoom values must appear in ascending order")];Kt(Zt[0].zoom)!==q&&(q=Kt(Zt[0].zoom),N=void 0,Y={}),ht=ht.concat(vs({key:`${Vt}[0]`,value:Zt[0],valueSpec:{zoom:{}},style:lt.style,styleSpec:lt.styleSpec,objectElementValidators:{zoom:kl,value:tt}}))}else ht=ht.concat(tt({key:`${Vt}[0]`,value:Zt[0],valueSpec:{},style:lt.style,styleSpec:lt.styleSpec},Zt));return Bo(di(Zt[1]))?ht.concat([new ae(`${Vt}[1]`,Zt[1],"expressions are not allowed in function stops.")]):ht.concat(Ko({key:`${Vt}[1]`,value:Zt[1],valueSpec:h,style:lt.style,styleSpec:lt.styleSpec}))}function tt(lt,ht){const Zt=At(lt.value),Vt=Kt(lt.value),vi=lt.value!==null?lt.value:ht;if(P){if(Zt!==P)return[new ae(lt.key,vi,`${Zt} stop domain type must match previous stop domain type ${P}`)]}else P=Zt;if(Zt!=="number"&&Zt!=="string"&&Zt!=="boolean")return[new ae(lt.key,vi,"stop domain value must be a number, string, or boolean")];if(Zt!=="number"&&A!=="categorical"){let Fi=`number expected, ${Zt} found`;return ko(h)&&A===void 0&&(Fi+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new ae(lt.key,vi,Fi)]}return A!=="categorical"||Zt!=="number"||isFinite(Vt)&&Math.floor(Vt)===Vt?A!=="categorical"&&Zt==="number"&&N!==void 0&&Vt<N?[new ae(lt.key,vi,"stop domain values must appear in ascending order")]:(N=Vt,A==="categorical"&&Vt in Y?[new ae(lt.key,vi,"stop domain values must be unique")]:(Y[Vt]=!0,[])):[new ae(lt.key,vi,`integer expected, found ${Vt}`)]}}function Ia(y){const h=(y.expressionContext==="property"?ds:qo)(di(y.value),y.valueSpec);if(h.result==="error")return h.value.map(P=>new ae(`${y.key}${P.key}`,y.value,P.message));const A=h.value.expression||h.value._styleExpression.expression;if(y.expressionContext==="property"&&y.propertyKey==="text-font"&&!A.outputDefined())return[new ae(y.key,y.value,`Invalid data expression for "${y.propertyKey}". Output values must be contained as literals within the expression.`)];if(y.expressionContext==="property"&&y.propertyType==="layout"&&!Ea(A))return[new ae(y.key,y.value,'"feature-state" data expressions are not supported with layout properties.')];if(y.expressionContext==="filter"&&!Ea(A))return[new ae(y.key,y.value,'"feature-state" data expressions are not supported with filters.')];if(y.expressionContext&&y.expressionContext.indexOf("cluster")===0){if(!wl(A,["zoom","feature-state"]))return[new ae(y.key,y.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(y.expressionContext==="cluster-initial"&&!qs(A))return[new ae(y.key,y.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function Sl(y){const h=y.key,A=y.value,P=y.valueSpec,N=[];return Array.isArray(P.values)?P.values.indexOf(Kt(A))===-1&&N.push(new ae(h,A,`expected one of [${P.values.join(", ")}], ${JSON.stringify(A)} found`)):Object.keys(P.values).indexOf(Kt(A))===-1&&N.push(new ae(h,A,`expected one of [${Object.keys(P.values).join(", ")}], ${JSON.stringify(A)} found`)),N}function nl(y){if(y===!0||y===!1)return!0;if(!Array.isArray(y)||y.length===0)return!1;switch(y[0]){case"has":return y.length>=2&&y[1]!=="$id"&&y[1]!=="$type";case"in":return y.length>=3&&(typeof y[1]!="string"||Array.isArray(y[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return y.length!==3||Array.isArray(y[1])||Array.isArray(y[2]);case"any":case"all":for(const h of y.slice(1))if(!nl(h)&&typeof h!="boolean")return!1;return!0;default:return!0}}const Nu={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function Fs(y){if(y==null)return{filter:()=>!0,needGeometry:!1};nl(y)||(y=Ua(y));const h=qo(y,Nu);if(h.result==="error")throw new Error(h.value.map(A=>`${A.key}: ${A.message}`).join(", "));return{filter:(A,P,N)=>h.value.evaluate(A,P,{},N),needGeometry:Wl(y)}}function gu(y,h){return y<h?-1:y>h?1:0}function Wl(y){if(!Array.isArray(y))return!1;if(y[0]==="within")return!0;for(let h=1;h<y.length;h++)if(Wl(y[h]))return!0;return!1}function Ua(y){if(!y)return!0;const h=y[0];return y.length<=1?h!=="any":h==="=="?yu(y[1],y[2],"=="):h==="!="?rl(yu(y[1],y[2],"==")):h==="<"||h===">"||h==="<="||h===">="?yu(y[1],y[2],h):h==="any"?(A=y.slice(1),["any"].concat(A.map(Ua))):h==="all"?["all"].concat(y.slice(1).map(Ua)):h==="none"?["all"].concat(y.slice(1).map(Ua).map(rl)):h==="in"?Rs(y[1],y.slice(2)):h==="!in"?rl(Rs(y[1],y.slice(2))):h==="has"?_u(y[1]):h==="!has"?rl(_u(y[1])):h!=="within"||y;var A}function yu(y,h,A){switch(y){case"$type":return[`filter-type-${A}`,h];case"$id":return[`filter-id-${A}`,h];default:return[`filter-${A}`,y,h]}}function Rs(y,h){if(h.length===0)return!1;switch(y){case"$type":return["filter-type-in",["literal",h]];case"$id":return["filter-id-in",["literal",h]];default:return h.length>200&&!h.some(A=>typeof A!=typeof h[0])?["filter-in-large",y,["literal",h.sort(gu)]]:["filter-in-small",y,["literal",h]]}}function _u(y){switch(y){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",y]}}function rl(y){return["!",y]}function Xl(y){return nl(di(y.value))?Ia(_t({},y,{expressionContext:"filter",valueSpec:{value:"boolean"}})):Ta(y)}function Ta(y){const h=y.value,A=y.key;if(At(h)!=="array")return[new ae(A,h,`array expected, ${At(h)} found`)];const P=y.styleSpec;let N,q=[];if(h.length<1)return[new ae(A,h,"filter array must have at least 1 element")];switch(q=q.concat(Sl({key:`${A}[0]`,value:h[0],valueSpec:P.filter_operator,style:y.style,styleSpec:y.styleSpec})),Kt(h[0])){case"<":case"<=":case">":case">=":h.length>=2&&Kt(h[1])==="$type"&&q.push(new ae(A,h,`"$type" cannot be use with operator "${h[0]}"`));case"==":case"!=":h.length!==3&&q.push(new ae(A,h,`filter array for operator "${h[0]}" must have 3 elements`));case"in":case"!in":h.length>=2&&(N=At(h[1]),N!=="string"&&q.push(new ae(`${A}[1]`,h[1],`string expected, ${N} found`)));for(let Y=2;Y<h.length;Y++)N=At(h[Y]),Kt(h[1])==="$type"?q=q.concat(Sl({key:`${A}[${Y}]`,value:h[Y],valueSpec:P.geometry_type,style:y.style,styleSpec:y.styleSpec})):N!=="string"&&N!=="number"&&N!=="boolean"&&q.push(new ae(`${A}[${Y}]`,h[Y],`string, number, or boolean expected, ${N} found`));break;case"any":case"all":case"none":for(let Y=1;Y<h.length;Y++)q=q.concat(Ta({key:`${A}[${Y}]`,value:h[Y],style:y.style,styleSpec:y.styleSpec}));break;case"has":case"!has":N=At(h[1]),h.length!==2?q.push(new ae(A,h,`filter array for "${h[0]}" operator must have 2 elements`)):N!=="string"&&q.push(new ae(`${A}[1]`,h[1],`string expected, ${N} found`));break;case"within":N=At(h[1]),h.length!==2?q.push(new ae(A,h,`filter array for "${h[0]}" operator must have 2 elements`)):N!=="object"&&q.push(new ae(`${A}[1]`,h[1],`object expected, ${N} found`))}return q}function Cl(y,h){const A=y.key,P=y.style,N=y.styleSpec,q=y.value,Y=y.objectKey,oe=N[`${h}_${y.layerType}`];if(!oe)return[];const fe=Y.match(/^(.*)-transition$/);if(h==="paint"&&fe&&oe[fe[1]]&&oe[fe[1]].transition)return Ko({key:A,value:q,valueSpec:N.transition,style:P,styleSpec:N});const xe=y.valueSpec||oe[Y];if(!xe)return[new ae(A,q,`unknown property "${Y}"`)];let Fe;if(At(q)==="string"&&ko(xe)&&!xe.tokens&&(Fe=/^{([^}]+)}$/.exec(q)))return[new ae(A,q,`"${Y}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(Fe[1])} }\`.`)];const Ve=[];return y.layerType==="symbol"&&(Y==="text-field"&&P&&!P.glyphs&&Ve.push(new ae(A,q,'use of "text-field" requires a style "glyphs" property')),Y==="text-font"&&Jt(di(q))&&Kt(q.type)==="identity"&&Ve.push(new ae(A,q,'"text-font" does not support identity functions'))),Ve.concat(Ko({key:y.key,value:q,valueSpec:xe,style:P,styleSpec:N,expressionContext:"property",propertyType:h,propertyKey:Y}))}function Dc(y){return Cl(y,"paint")}function Oc(y){return Cl(y,"layout")}function El(y){let h=[];const A=y.value,P=y.key,N=y.style,q=y.styleSpec;A.type||A.ref||h.push(new ae(P,A,'either "type" or "ref" is required'));let Y=Kt(A.type);const oe=Kt(A.ref);if(A.id){const fe=Kt(A.id);for(let xe=0;xe<y.arrayIndex;xe++){const Fe=N.layers[xe];Kt(Fe.id)===fe&&h.push(new ae(P,A.id,`duplicate layer id "${A.id}", previously used at line ${Fe.id.__line__}`))}}if("ref"in A){let fe;["type","source","source-layer","filter","layout"].forEach(xe=>{xe in A&&h.push(new ae(P,A[xe],`"${xe}" is prohibited for ref layers`))}),N.layers.forEach(xe=>{Kt(xe.id)===oe&&(fe=xe)}),fe?fe.ref?h.push(new ae(P,A.ref,"ref cannot reference another ref layer")):Y=Kt(fe.type):h.push(new ae(P,A.ref,`ref layer "${oe}" not found`))}else if(Y!=="background")if(A.source){const fe=N.sources&&N.sources[A.source],xe=fe&&Kt(fe.type);fe?xe==="vector"&&Y==="raster"?h.push(new ae(P,A.source,`layer "${A.id}" requires a raster source`)):xe==="raster"&&Y!=="raster"?h.push(new ae(P,A.source,`layer "${A.id}" requires a vector source`)):xe!=="vector"||A["source-layer"]?xe==="raster-dem"&&Y!=="hillshade"?h.push(new ae(P,A.source,"raster-dem source can only be used with layer type 'hillshade'.")):Y!=="line"||!A.paint||!A.paint["line-gradient"]||xe==="geojson"&&fe.lineMetrics||h.push(new ae(P,A,`layer "${A.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):h.push(new ae(P,A,`layer "${A.id}" must specify a "source-layer"`)):h.push(new ae(P,A.source,`source "${A.source}" not found`))}else h.push(new ae(P,A,'missing required property "source"'));return h=h.concat(vs({key:P,value:A,valueSpec:q.layer,style:y.style,styleSpec:y.styleSpec,objectElementValidators:{"*":()=>[],type:()=>Ko({key:`${P}.type`,value:A.type,valueSpec:q.layer.type,style:y.style,styleSpec:y.styleSpec,object:A,objectKey:"type"}),filter:Xl,layout:fe=>vs({layer:A,key:fe.key,value:fe.value,style:fe.style,styleSpec:fe.styleSpec,objectElementValidators:{"*":xe=>Oc(_t({layerType:Y},xe))}}),paint:fe=>vs({layer:A,key:fe.key,value:fe.value,style:fe.style,styleSpec:fe.styleSpec,objectElementValidators:{"*":xe=>Dc(_t({layerType:Y},xe))}})}})),h}function Bs(y){const h=y.value,A=y.key,P=At(h);return P!=="string"?[new ae(A,h,`string expected, ${P} found`)]:[]}const La={promoteId:function({key:y,value:h}){if(At(h)==="string")return Bs({key:y,value:h});{const A=[];for(const P in h)A.push(...Bs({key:`${y}.${P}`,value:h[P]}));return A}}};function Pa(y){const h=y.value,A=y.key,P=y.styleSpec,N=y.style;if(!h.type)return[new ae(A,h,'"type" is required')];const q=Kt(h.type);let Y;switch(q){case"vector":case"raster":case"raster-dem":return Y=vs({key:A,value:h,valueSpec:P[`source_${q.replace("-","_")}`],style:y.style,styleSpec:P,objectElementValidators:La}),Y;case"geojson":if(Y=vs({key:A,value:h,valueSpec:P.source_geojson,style:N,styleSpec:P,objectElementValidators:La}),h.cluster)for(const oe in h.clusterProperties){const[fe,xe]=h.clusterProperties[oe],Fe=typeof fe=="string"?[fe,["accumulated"],["get",oe]]:fe;Y.push(...Ia({key:`${A}.${oe}.map`,value:xe,expressionContext:"cluster-map"})),Y.push(...Ia({key:`${A}.${oe}.reduce`,value:Fe,expressionContext:"cluster-reduce"}))}return Y;case"video":return vs({key:A,value:h,valueSpec:P.source_video,style:N,styleSpec:P});case"image":return vs({key:A,value:h,valueSpec:P.source_image,style:N,styleSpec:P});case"canvas":return[new ae(A,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return Sl({key:`${A}.type`,value:h.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:N,styleSpec:P})}}function ra(y){const h=y.value,A=y.styleSpec,P=A.light,N=y.style;let q=[];const Y=At(h);if(h===void 0)return q;if(Y!=="object")return q=q.concat([new ae("light",h,`object expected, ${Y} found`)]),q;for(const oe in h){const fe=oe.match(/^(.*)-transition$/);q=q.concat(fe&&P[fe[1]]&&P[fe[1]].transition?Ko({key:oe,value:h[oe],valueSpec:A.transition,style:N,styleSpec:A}):P[oe]?Ko({key:oe,value:h[oe],valueSpec:P[oe],style:N,styleSpec:A}):[new ae(oe,h[oe],`unknown property "${oe}"`)])}return q}function ls(y){const h=y.value,A=y.styleSpec,P=A.terrain,N=y.style;let q=[];const Y=At(h);if(h===void 0)return q;if(Y!=="object")return q=q.concat([new ae("terrain",h,`object expected, ${Y} found`)]),q;for(const oe in h)q=q.concat(P[oe]?Ko({key:oe,value:h[oe],valueSpec:P[oe],style:N,styleSpec:A}):[new ae(oe,h[oe],`unknown property "${oe}"`)]);return q}const ol={"*":()=>[],array:Gl,boolean:function(y){const h=y.value,A=y.key,P=At(h);return P!=="boolean"?[new ae(A,h,`boolean expected, ${P} found`)]:[]},number:kl,color:function(y){const h=y.key,A=y.value,P=At(A);return P!=="string"?[new ae(h,A,`color expected, ${P} found`)]:xo(A)===null?[new ae(h,A,`color expected, "${A}" found`)]:[]},constants:$e,enum:Sl,filter:Xl,function:zu,layer:El,object:vs,source:Pa,light:ra,terrain:ls,string:Bs,formatted:function(y){return Bs(y).length===0?[]:Ia(y)},resolvedImage:function(y){return Bs(y).length===0?[]:Ia(y)},padding:function(y){const h=y.key,A=y.value;if(At(A)==="array"){if(A.length<1||A.length>4)return[new ae(h,A,`padding requires 1 to 4 values; ${A.length} values found`)];const P={type:"number"};let N=[];for(let q=0;q<A.length;q++)N=N.concat(Ko({key:`${h}[${q}]`,value:A[q],valueSpec:P}));return N}return kl({key:h,value:A,valueSpec:{}})}};function Ko(y){const h=y.value,A=y.valueSpec,P=y.styleSpec;return A.expression&&Jt(Kt(h))?zu(y):A.expression&&Bo(di(h))?Ia(y):A.type&&ol[A.type]?ol[A.type](y):vs(_t({},y,{valueSpec:A.type?P[A.type]:A}))}function ju(y){const h=y.value,A=y.key,P=Bs(y);return P.length||(h.indexOf("{fontstack}")===-1&&P.push(new ae(A,h,'"glyphs" url must include a "{fontstack}" token')),h.indexOf("{range}")===-1&&P.push(new ae(A,h,'"glyphs" url must include a "{range}" token'))),P}function Ma(y,h=Q){let A=[];return A=A.concat(Ko({key:"",value:y,valueSpec:h.$root,styleSpec:h,style:y,objectElementValidators:{glyphs:ju,"*":()=>[]}})),y.constants&&(A=A.concat($e({key:"constants",value:y.constants,style:y,styleSpec:h}))),oa(A)}function oa(y){return[].concat(y).sort((h,A)=>h.line-A.line)}function Xr(y){return function(...h){return oa(y.apply(this,h))}}Ma.source=Xr(Pa),Ma.light=Xr(ra),Ma.terrain=Xr(ls),Ma.layer=Xr(El),Ma.filter=Xr(Xl),Ma.paintProperty=Xr(Dc),Ma.layoutProperty=Xr(Oc);const ga=Ma,Il=ga.light,Uu=ga.paintProperty,vu=ga.layoutProperty;function Gs(y,h){let A=!1;if(h&&h.length)for(const P of h)y.fire(new ti(new Error(P.message))),A=!0;return A}class Tl{constructor(h,A,P){const N=this.cells=[];if(h instanceof ArrayBuffer){this.arrayBuffer=h;const Y=new Int32Array(this.arrayBuffer);h=Y[0],this.d=(A=Y[1])+2*(P=Y[2]);for(let fe=0;fe<this.d*this.d;fe++){const xe=Y[3+fe],Fe=Y[3+fe+1];N.push(xe===Fe?null:Y.subarray(xe,Fe))}const oe=Y[3+N.length+1];this.keys=Y.subarray(Y[3+N.length],oe),this.bboxes=Y.subarray(oe),this.insert=this._insertReadonly}else{this.d=A+2*P;for(let Y=0;Y<this.d*this.d;Y++)N.push([]);this.keys=[],this.bboxes=[]}this.n=A,this.extent=h,this.padding=P,this.scale=A/h,this.uid=0;const q=P/A*h;this.min=-q,this.max=h+q}insert(h,A,P,N,q){this._forEachCell(A,P,N,q,this._insertCell,this.uid++,void 0,void 0),this.keys.push(h),this.bboxes.push(A),this.bboxes.push(P),this.bboxes.push(N),this.bboxes.push(q)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(h,A,P,N,q,Y){this.cells[q].push(Y)}query(h,A,P,N,q){const Y=this.min,oe=this.max;if(h<=Y&&A<=Y&&oe<=P&&oe<=N&&!q)return Array.prototype.slice.call(this.keys);{const fe=[];return this._forEachCell(h,A,P,N,this._queryCell,fe,{},q),fe}}_queryCell(h,A,P,N,q,Y,oe,fe){const xe=this.cells[q];if(xe!==null){const Fe=this.keys,Ve=this.bboxes;for(let tt=0;tt<xe.length;tt++){const lt=xe[tt];if(oe[lt]===void 0){const ht=4*lt;(fe?fe(Ve[ht+0],Ve[ht+1],Ve[ht+2],Ve[ht+3]):h<=Ve[ht+2]&&A<=Ve[ht+3]&&P>=Ve[ht+0]&&N>=Ve[ht+1])?(oe[lt]=!0,Y.push(Fe[lt])):oe[lt]=!1}}}}_forEachCell(h,A,P,N,q,Y,oe,fe){const xe=this._convertToCellCoord(h),Fe=this._convertToCellCoord(A),Ve=this._convertToCellCoord(P),tt=this._convertToCellCoord(N);for(let lt=xe;lt<=Ve;lt++)for(let ht=Fe;ht<=tt;ht++){const Zt=this.d*ht+lt;if((!fe||fe(this._convertFromCellCoord(lt),this._convertFromCellCoord(ht),this._convertFromCellCoord(lt+1),this._convertFromCellCoord(ht+1)))&&q.call(this,h,A,P,N,Zt,Y,oe,fe))return}}_convertFromCellCoord(h){return(h-this.padding)/this.scale}_convertToCellCoord(h){return Math.max(0,Math.min(this.d-1,Math.floor(h*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;const h=this.cells,A=3+this.cells.length+1+1;let P=0;for(let Y=0;Y<this.cells.length;Y++)P+=this.cells[Y].length;const N=new Int32Array(A+P+this.keys.length+this.bboxes.length);N[0]=this.extent,N[1]=this.n,N[2]=this.padding;let q=A;for(let Y=0;Y<h.length;Y++){const oe=h[Y];N[3+Y]=q,N.set(oe,q),q+=oe.length}return N[3+h.length]=q,N.set(this.keys,q),q+=this.keys.length,N[3+h.length+1]=q,N.set(this.bboxes,q),q+=this.bboxes.length,N.buffer}static serialize(h,A){const P=h.toArrayBuffer();return A&&A.push(P),{buffer:P}}static deserialize(h){return new Tl(h.buffer)}}const ps={};function Pn(y,h,A={}){if(ps[y])throw new Error(`${y} is already registered.`);Object.defineProperty(h,"_classRegistryKey",{value:y,writeable:!1}),ps[y]={klass:h,omit:A.omit||[],shallow:A.shallow||[]}}Pn("Object",Object),Pn("TransferableGridIndex",Tl),Pn("Color",dt),Pn("Error",Error),Pn("AJAXError",ut),Pn("ResolvedImage",oi),Pn("StylePropertyFunction",jr),Pn("StyleExpression",eo,{omit:["_evaluator"]}),Pn("ZoomDependentExpression",Cs),Pn("ZoomConstantExpression",Wo),Pn("CompoundExpression",to,{omit:["_evaluate"]});for(const y in Nn)Nn[y]._classRegistryKey||Pn(`Expression_${y}`,Nn[y]);function zo(y){return y&&typeof ArrayBuffer<"u"&&(y instanceof ArrayBuffer||y.constructor&&y.constructor.name==="ArrayBuffer")}function Hr(y,h){if(y==null||typeof y=="boolean"||typeof y=="number"||typeof y=="string"||y instanceof Boolean||y instanceof Number||y instanceof String||y instanceof Date||y instanceof RegExp||y instanceof Blob)return y;if(zo(y)||_e(y))return h&&h.push(y),y;if(ArrayBuffer.isView(y)){const A=y;return h&&h.push(A.buffer),A}if(y instanceof ImageData)return h&&h.push(y.data.buffer),y;if(Array.isArray(y)){const A=[];for(const P of y)A.push(Hr(P,h));return A}if(typeof y=="object"){const A=y.constructor,P=A._classRegistryKey;if(!P)throw new Error("can't serialize object of unregistered class");if(!ps[P])throw new Error(`${P} is not registered.`);const N=A.serialize?A.serialize(y,h):{};if(A.serialize){if(h&&N===h[h.length-1])throw new Error("statically serialized object won't survive transfer of $name property")}else{for(const q in y){if(!y.hasOwnProperty(q)||ps[P].omit.indexOf(q)>=0)continue;const Y=y[q];N[q]=ps[P].shallow.indexOf(q)>=0?Y:Hr(Y,h)}y instanceof Error&&(N.message=y.message)}if(N.$name)throw new Error("$name property is reserved for worker serialization logic.");return P!=="Object"&&(N.$name=P),N}throw new Error("can't serialize object of type "+typeof y)}function Po(y){if(y==null||typeof y=="boolean"||typeof y=="number"||typeof y=="string"||y instanceof Boolean||y instanceof Number||y instanceof String||y instanceof Date||y instanceof RegExp||y instanceof Blob||zo(y)||_e(y)||ArrayBuffer.isView(y)||y instanceof ImageData)return y;if(Array.isArray(y))return y.map(Po);if(typeof y=="object"){const h=y.$name||"Object";if(!ps[h])throw new Error(`can't deserialize unregistered class ${h}`);const{klass:A}=ps[h];if(!A)throw new Error(`can't deserialize unregistered class ${h}`);if(A.deserialize)return A.deserialize(y);const P=Object.create(A.prototype);for(const N of Object.keys(y)){if(N==="$name")continue;const q=y[N];P[N]=ps[h].shallow.indexOf(N)>=0?q:Po(q)}return P}throw new Error("can't deserialize object of type "+typeof y)}class is{constructor(){this.first=!0}update(h,A){const P=Math.floor(h);return this.first?(this.first=!1,this.lastIntegerZoom=P,this.lastIntegerZoomTime=0,this.lastZoom=h,this.lastFloorZoom=P,!0):(this.lastFloorZoom>P?(this.lastIntegerZoom=P+1,this.lastIntegerZoomTime=A):this.lastFloorZoom<P&&(this.lastIntegerZoom=P,this.lastIntegerZoomTime=A),h!==this.lastZoom&&(this.lastZoom=h,this.lastFloorZoom=P,!0))}}const yn={"Latin-1 Supplement":y=>y>=128&&y<=255,Arabic:y=>y>=1536&&y<=1791,"Arabic Supplement":y=>y>=1872&&y<=1919,"Arabic Extended-A":y=>y>=2208&&y<=2303,"Hangul Jamo":y=>y>=4352&&y<=4607,"Unified Canadian Aboriginal Syllabics":y=>y>=5120&&y<=5759,Khmer:y=>y>=6016&&y<=6143,"Unified Canadian Aboriginal Syllabics Extended":y=>y>=6320&&y<=6399,"General Punctuation":y=>y>=8192&&y<=8303,"Letterlike Symbols":y=>y>=8448&&y<=8527,"Number Forms":y=>y>=8528&&y<=8591,"Miscellaneous Technical":y=>y>=8960&&y<=9215,"Control Pictures":y=>y>=9216&&y<=9279,"Optical Character Recognition":y=>y>=9280&&y<=9311,"Enclosed Alphanumerics":y=>y>=9312&&y<=9471,"Geometric Shapes":y=>y>=9632&&y<=9727,"Miscellaneous Symbols":y=>y>=9728&&y<=9983,"Miscellaneous Symbols and Arrows":y=>y>=11008&&y<=11263,"CJK Radicals Supplement":y=>y>=11904&&y<=12031,"Kangxi Radicals":y=>y>=12032&&y<=12255,"Ideographic Description Characters":y=>y>=12272&&y<=12287,"CJK Symbols and Punctuation":y=>y>=12288&&y<=12351,Hiragana:y=>y>=12352&&y<=12447,Katakana:y=>y>=12448&&y<=12543,Bopomofo:y=>y>=12544&&y<=12591,"Hangul Compatibility Jamo":y=>y>=12592&&y<=12687,Kanbun:y=>y>=12688&&y<=12703,"Bopomofo Extended":y=>y>=12704&&y<=12735,"CJK Strokes":y=>y>=12736&&y<=12783,"Katakana Phonetic Extensions":y=>y>=12784&&y<=12799,"Enclosed CJK Letters and Months":y=>y>=12800&&y<=13055,"CJK Compatibility":y=>y>=13056&&y<=13311,"CJK Unified Ideographs Extension A":y=>y>=13312&&y<=19903,"Yijing Hexagram Symbols":y=>y>=19904&&y<=19967,"CJK Unified Ideographs":y=>y>=19968&&y<=40959,"Yi Syllables":y=>y>=40960&&y<=42127,"Yi Radicals":y=>y>=42128&&y<=42191,"Hangul Jamo Extended-A":y=>y>=43360&&y<=43391,"Hangul Syllables":y=>y>=44032&&y<=55215,"Hangul Jamo Extended-B":y=>y>=55216&&y<=55295,"Private Use Area":y=>y>=57344&&y<=63743,"CJK Compatibility Ideographs":y=>y>=63744&&y<=64255,"Arabic Presentation Forms-A":y=>y>=64336&&y<=65023,"Vertical Forms":y=>y>=65040&&y<=65055,"CJK Compatibility Forms":y=>y>=65072&&y<=65103,"Small Form Variants":y=>y>=65104&&y<=65135,"Arabic Presentation Forms-B":y=>y>=65136&&y<=65279,"Halfwidth and Fullwidth Forms":y=>y>=65280&&y<=65519};function Da(y){for(const h of y)if(Fc(h.charCodeAt(0)))return!0;return!1}function Vu(y){for(const h of y)if(!qu(h.charCodeAt(0)))return!1;return!0}function qu(y){return!(yn.Arabic(y)||yn["Arabic Supplement"](y)||yn["Arabic Extended-A"](y)||yn["Arabic Presentation Forms-A"](y)||yn["Arabic Presentation Forms-B"](y))}function Fc(y){return!(y!==746&&y!==747&&(y<4352||!(yn["Bopomofo Extended"](y)||yn.Bopomofo(y)||yn["CJK Compatibility Forms"](y)&&!(y>=65097&&y<=65103)||yn["CJK Compatibility Ideographs"](y)||yn["CJK Compatibility"](y)||yn["CJK Radicals Supplement"](y)||yn["CJK Strokes"](y)||!(!yn["CJK Symbols and Punctuation"](y)||y>=12296&&y<=12305||y>=12308&&y<=12319||y===12336)||yn["CJK Unified Ideographs Extension A"](y)||yn["CJK Unified Ideographs"](y)||yn["Enclosed CJK Letters and Months"](y)||yn["Hangul Compatibility Jamo"](y)||yn["Hangul Jamo Extended-A"](y)||yn["Hangul Jamo Extended-B"](y)||yn["Hangul Jamo"](y)||yn["Hangul Syllables"](y)||yn.Hiragana(y)||yn["Ideographic Description Characters"](y)||yn.Kanbun(y)||yn["Kangxi Radicals"](y)||yn["Katakana Phonetic Extensions"](y)||yn.Katakana(y)&&y!==12540||!(!yn["Halfwidth and Fullwidth Forms"](y)||y===65288||y===65289||y===65293||y>=65306&&y<=65310||y===65339||y===65341||y===65343||y>=65371&&y<=65503||y===65507||y>=65512&&y<=65519)||!(!yn["Small Form Variants"](y)||y>=65112&&y<=65118||y>=65123&&y<=65126)||yn["Unified Canadian Aboriginal Syllabics"](y)||yn["Unified Canadian Aboriginal Syllabics Extended"](y)||yn["Vertical Forms"](y)||yn["Yijing Hexagram Symbols"](y)||yn["Yi Syllables"](y)||yn["Yi Radicals"](y))))}function uh(y){return!(Fc(y)||function(h){return!!(yn["Latin-1 Supplement"](h)&&(h===167||h===169||h===174||h===177||h===188||h===189||h===190||h===215||h===247)||yn["General Punctuation"](h)&&(h===8214||h===8224||h===8225||h===8240||h===8241||h===8251||h===8252||h===8258||h===8263||h===8264||h===8265||h===8273)||yn["Letterlike Symbols"](h)||yn["Number Forms"](h)||yn["Miscellaneous Technical"](h)&&(h>=8960&&h<=8967||h>=8972&&h<=8991||h>=8996&&h<=9e3||h===9003||h>=9085&&h<=9114||h>=9150&&h<=9165||h===9167||h>=9169&&h<=9179||h>=9186&&h<=9215)||yn["Control Pictures"](h)&&h!==9251||yn["Optical Character Recognition"](h)||yn["Enclosed Alphanumerics"](h)||yn["Geometric Shapes"](h)||yn["Miscellaneous Symbols"](h)&&!(h>=9754&&h<=9759)||yn["Miscellaneous Symbols and Arrows"](h)&&(h>=11026&&h<=11055||h>=11088&&h<=11097||h>=11192&&h<=11243)||yn["CJK Symbols and Punctuation"](h)||yn.Katakana(h)||yn["Private Use Area"](h)||yn["CJK Compatibility Forms"](h)||yn["Small Form Variants"](h)||yn["Halfwidth and Fullwidth Forms"](h)||h===8734||h===8756||h===8757||h>=9984&&h<=10087||h>=10102&&h<=10131||h===65532||h===65533)}(y))}function ch(y){return y>=1424&&y<=2303||yn["Arabic Presentation Forms-A"](y)||yn["Arabic Presentation Forms-B"](y)}function Fh(y,h){return!(!h&&ch(y)||y>=2304&&y<=3583||y>=3840&&y<=4255||yn.Khmer(y))}function Tr(y){for(const h of y)if(ch(h.charCodeAt(0)))return!0;return!1}const Rc="deferred",ac="loading",Jo="loaded";let Ks=null,Xo="unavailable",Va=null;const lc=function(y){y&&typeof y=="string"&&y.indexOf("NetworkError")>-1&&(Xo="error"),Ks&&Ks(y)};function bu(){wu.fire(new Ci("pluginStateChange",{pluginStatus:Xo,pluginURL:Va}))}const wu=new Me,Yl=function(){return Xo},io=function(){if(Xo!==Rc||!Va)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");Xo=ac,bu(),Va&&ei({url:Va},y=>{y?lc(y):(Xo=Jo,bu())})},ya={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:()=>Xo===Jo||ya.applyArabicShaping!=null,isLoading:()=>Xo===ac,setState(y){if(!ie())throw new Error("Cannot set the state of the rtl-text-plugin when not in the web-worker context");Xo=y.pluginStatus,Va=y.pluginURL},isParsed(){if(!ie())throw new Error("rtl-text-plugin is only parsed on the worker-threads");return ya.applyArabicShaping!=null&&ya.processBidirectionalText!=null&&ya.processStyledBidirectionalText!=null},getPluginURL(){if(!ie())throw new Error("rtl-text-plugin url can only be queried from the worker threads");return Va}};class No{constructor(h,A){this.zoom=h,A?(this.now=A.now,this.fadeDuration=A.fadeDuration,this.zoomHistory=A.zoomHistory,this.transition=A.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new is,this.transition={})}isSupportedScript(h){return function(A,P){for(const N of A)if(!Fh(N.charCodeAt(0),P))return!1;return!0}(h,ya.isLoaded())}crossFadingFactor(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const h=this.zoom,A=h-Math.floor(h),P=this.crossFadingFactor();return h>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:A+(1-A)*P}:{fromScale:.5,toScale:1,t:1-(1-P)*A}}}class xu{constructor(h,A){this.property=h,this.value=A,this.expression=function(P,N){if(Jt(P))return new jr(P,N);if(Bo(P)){const q=ds(P,N);if(q.result==="error")throw new Error(q.value.map(Y=>`${Y.key}: ${Y.message}`).join(", "));return q.value}{let q=P;return N.type==="color"&&typeof P=="string"?q=dt.parse(P):N.type!=="padding"||typeof P!="number"&&!Array.isArray(P)||(q=Ft.parse(P)),{kind:"constant",evaluate:()=>q}}}(A===void 0?h.specification.default:A,h.specification)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}possiblyEvaluate(h,A,P){return this.property.possiblyEvaluate(this,h,A,P)}}class Au{constructor(h){this.property=h,this.value=new xu(h,void 0)}transitioned(h,A){return new Rh(this.property,this.value,A,C({},h.transition,this.transition),h.now)}untransitioned(){return new Rh(this.property,this.value,null,{},0)}}class Bc{constructor(h){this._properties=h,this._values=Object.create(h.defaultTransitionablePropertyValues)}getValue(h){return V(this._values[h].value.value)}setValue(h,A){Object.prototype.hasOwnProperty.call(this._values,h)||(this._values[h]=new Au(this._values[h].property)),this._values[h].value=new xu(this._values[h].property,A===null?void 0:V(A))}getTransition(h){return V(this._values[h].transition)}setTransition(h,A){Object.prototype.hasOwnProperty.call(this._values,h)||(this._values[h]=new Au(this._values[h].property)),this._values[h].transition=V(A)||void 0}serialize(){const h={};for(const A of Object.keys(this._values)){const P=this.getValue(A);P!==void 0&&(h[A]=P);const N=this.getTransition(A);N!==void 0&&(h[`${A}-transition`]=N)}return h}transitioned(h,A){const P=new sl(this._properties);for(const N of Object.keys(this._values))P._values[N]=this._values[N].transitioned(h,A._values[N]);return P}untransitioned(){const h=new sl(this._properties);for(const A of Object.keys(this._values))h._values[A]=this._values[A].untransitioned();return h}}class Rh{constructor(h,A,P,N,q){this.property=h,this.value=A,this.begin=q+N.delay||0,this.end=this.begin+N.duration||0,h.specification.transition&&(N.delay||N.duration)&&(this.prior=P)}possiblyEvaluate(h,A,P){const N=h.now||0,q=this.value.possiblyEvaluate(h,A,P),Y=this.prior;if(Y){if(N>this.end)return this.prior=null,q;if(this.value.isDataDriven())return this.prior=null,q;if(N<this.begin)return Y.possiblyEvaluate(h,A,P);{const oe=(N-this.begin)/(this.end-this.begin);return this.property.interpolate(Y.possiblyEvaluate(h,A,P),q,function(fe){if(fe<=0)return 0;if(fe>=1)return 1;const xe=fe*fe,Fe=xe*fe;return 4*(fe<.5?Fe:3*(fe-xe)+Fe-.75)}(oe))}}return q}}class sl{constructor(h){this._properties=h,this._values=Object.create(h.defaultTransitioningPropertyValues)}possiblyEvaluate(h,A,P){const N=new uc(this._properties);for(const q of Object.keys(this._values))N._values[q]=this._values[q].possiblyEvaluate(h,A,P);return N}hasTransition(){for(const h of Object.keys(this._values))if(this._values[h].prior)return!0;return!1}}class Bh{constructor(h){this._properties=h,this._values=Object.create(h.defaultPropertyValues)}getValue(h){return V(this._values[h].value)}setValue(h,A){this._values[h]=new xu(this._values[h].property,A===null?void 0:V(A))}serialize(){const h={};for(const A of Object.keys(this._values)){const P=this.getValue(A);P!==void 0&&(h[A]=P)}return h}possiblyEvaluate(h,A,P){const N=new uc(this._properties);for(const q of Object.keys(this._values))N._values[q]=this._values[q].possiblyEvaluate(h,A,P);return N}}class al{constructor(h,A,P){this.property=h,this.value=A,this.parameters=P}isConstant(){return this.value.kind==="constant"}constantOr(h){return this.value.kind==="constant"?this.value.value:h}evaluate(h,A,P,N){return this.property.evaluate(this.value,this.parameters,h,A,P,N)}}class uc{constructor(h){this._properties=h,this._values=Object.create(h.defaultPossiblyEvaluatedValues)}get(h){return this._values[h]}}class er{constructor(h){this.specification=h}possiblyEvaluate(h,A){if(h.isDataDriven())throw new Error("Value should not be data driven");return h.expression.evaluate(A)}interpolate(h,A,P){const N=il[this.specification.type];return N?N(h,A,P):h}}class yr{constructor(h,A){this.specification=h,this.overrides=A}possiblyEvaluate(h,A,P,N){return new al(this,h.expression.kind==="constant"||h.expression.kind==="camera"?{kind:"constant",value:h.expression.evaluate(A,null,{},P,N)}:h.expression,A)}interpolate(h,A,P){if(h.value.kind!=="constant"||A.value.kind!=="constant")return h;if(h.value.value===void 0||A.value.value===void 0)return new al(this,{kind:"constant",value:void 0},h.parameters);const N=il[this.specification.type];return N?new al(this,{kind:"constant",value:N(h.value.value,A.value.value,P)},h.parameters):h}evaluate(h,A,P,N,q,Y){return h.kind==="constant"?h.value:h.evaluate(A,P,N,q,Y)}}class Hu extends yr{possiblyEvaluate(h,A,P,N){if(h.value===void 0)return new al(this,{kind:"constant",value:void 0},A);if(h.expression.kind==="constant"){const q=h.expression.evaluate(A,null,{},P,N),Y=h.property.specification.type==="resolvedImage"&&typeof q!="string"?q.name:q,oe=this._calculate(Y,Y,Y,A);return new al(this,{kind:"constant",value:oe},A)}if(h.expression.kind==="camera"){const q=this._calculate(h.expression.evaluate({zoom:A.zoom-1}),h.expression.evaluate({zoom:A.zoom}),h.expression.evaluate({zoom:A.zoom+1}),A);return new al(this,{kind:"constant",value:q},A)}return new al(this,h.expression,A)}evaluate(h,A,P,N,q,Y){if(h.kind==="source"){const oe=h.evaluate(A,P,N,q,Y);return this._calculate(oe,oe,oe,A)}return h.kind==="composite"?this._calculate(h.evaluate({zoom:Math.floor(A.zoom)-1},P,N),h.evaluate({zoom:Math.floor(A.zoom)},P,N),h.evaluate({zoom:Math.floor(A.zoom)+1},P,N),A):h.value}_calculate(h,A,P,N){return N.zoom>N.zoomHistory.lastIntegerZoom?{from:h,to:A}:{from:P,to:A}}interpolate(h){return h}}class cc{constructor(h){this.specification=h}possiblyEvaluate(h,A,P,N){if(h.value!==void 0){if(h.expression.kind==="constant"){const q=h.expression.evaluate(A,null,{},P,N);return this._calculate(q,q,q,A)}return this._calculate(h.expression.evaluate(new No(Math.floor(A.zoom-1),A)),h.expression.evaluate(new No(Math.floor(A.zoom),A)),h.expression.evaluate(new No(Math.floor(A.zoom+1),A)),A)}}_calculate(h,A,P,N){return N.zoom>N.zoomHistory.lastIntegerZoom?{from:h,to:A}:{from:P,to:A}}interpolate(h){return h}}class bs{constructor(h){this.specification=h}possiblyEvaluate(h,A,P,N){return!!h.expression.evaluate(A,null,{},P,N)}interpolate(){return!1}}class Ho{constructor(h){this.properties=h,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(const A in h){const P=h[A];P.specification.overridable&&this.overridableProperties.push(A);const N=this.defaultPropertyValues[A]=new xu(P,void 0),q=this.defaultTransitionablePropertyValues[A]=new Au(P);this.defaultTransitioningPropertyValues[A]=q.untransitioned(),this.defaultPossiblyEvaluatedValues[A]=N.possiblyEvaluate({})}}}Pn("DataDrivenProperty",yr),Pn("DataConstantProperty",er),Pn("CrossFadedDataDrivenProperty",Hu),Pn("CrossFadedProperty",cc),Pn("ColorRampProperty",bs);const Zl="-transition";class ll extends Me{constructor(h,A){if(super(),this.id=h.id,this.type=h.type,this._featureFilter={filter:()=>!0,needGeometry:!1},h.type!=="custom"&&(this.metadata=h.metadata,this.minzoom=h.minzoom,this.maxzoom=h.maxzoom,h.type!=="background"&&(this.source=h.source,this.sourceLayer=h["source-layer"],this.filter=h.filter),A.layout&&(this._unevaluatedLayout=new Bh(A.layout)),A.paint)){this._transitionablePaint=new Bc(A.paint);for(const P in h.paint)this.setPaintProperty(P,h.paint[P],{validate:!1});for(const P in h.layout)this.setLayoutProperty(P,h.layout[P],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new uc(A.paint)}}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(h){return h==="visibility"?this.visibility:this._unevaluatedLayout.getValue(h)}setLayoutProperty(h,A,P={}){A!=null&&this._validate(vu,`layers.${this.id}.layout.${h}`,h,A,P)||(h!=="visibility"?this._unevaluatedLayout.setValue(h,A):this.visibility=A)}getPaintProperty(h){return h.endsWith(Zl)?this._transitionablePaint.getTransition(h.slice(0,-Zl.length)):this._transitionablePaint.getValue(h)}setPaintProperty(h,A,P={}){if(A!=null&&this._validate(Uu,`layers.${this.id}.paint.${h}`,h,A,P))return!1;if(h.endsWith(Zl))return this._transitionablePaint.setTransition(h.slice(0,-Zl.length),A||void 0),!1;{const N=this._transitionablePaint._values[h],q=N.property.specification["property-type"]==="cross-faded-data-driven",Y=N.value.isDataDriven(),oe=N.value;this._transitionablePaint.setValue(h,A),this._handleSpecialPaintPropertyUpdate(h);const fe=this._transitionablePaint._values[h].value;return fe.isDataDriven()||Y||q||this._handleOverridablePaintPropertyUpdate(h,oe,fe)}}_handleSpecialPaintPropertyUpdate(h){}_handleOverridablePaintPropertyUpdate(h,A,P){return!1}isHidden(h){return!!(this.minzoom&&h<this.minzoom)||!!(this.maxzoom&&h>=this.maxzoom)||this.visibility==="none"}updateTransitions(h){this._transitioningPaint=this._transitionablePaint.transitioned(h,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(h,A){h.getCrossfadeParameters&&(this._crossfadeParameters=h.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(h,void 0,A)),this.paint=this._transitioningPaint.possiblyEvaluate(h,void 0,A)}serialize(){const h={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(h.layout=h.layout||{},h.layout.visibility=this.visibility),O(h,(A,P)=>!(A===void 0||P==="layout"&&!Object.keys(A).length||P==="paint"&&!Object.keys(A).length))}_validate(h,A,P,N,q={}){return(!q||q.validate!==!1)&&Gs(this,h.call(ga,{key:A,layerType:this.type,objectKey:P,value:N,styleSpec:Q,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const h in this.paint._values){const A=this.paint.get(h);if(A instanceof al&&ko(A.property.specification)&&(A.value.kind==="source"||A.value.kind==="composite")&&A.value.isStateDependent)return!0}return!1}}const hh={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class Kl{constructor(h,A){this._structArray=h,this._pos1=A*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class ns{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(h,A){return h._trim(),A&&(h.isTransferred=!0,A.push(h.arrayBuffer)),{length:h.length,arrayBuffer:h.arrayBuffer}}static deserialize(h){const A=Object.create(this.prototype);return A.arrayBuffer=h.arrayBuffer,A.length=h.length,A.capacity=h.arrayBuffer.byteLength/A.bytesPerElement,A._refreshViews(),A}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(h){this.reserve(h),this.length=h}reserve(h){if(h>this.capacity){this.capacity=Math.max(h,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const A=this.uint8;this._refreshViews(),A&&this.uint8.set(A)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function ms(y,h=1){let A=0,P=0;return{members:y.map(N=>{const q=hh[N.type].BYTES_PER_ELEMENT,Y=A=fh(A,Math.max(h,q)),oe=N.components||1;return P=Math.max(P,q),A+=q*oe,{name:N.name,type:N.type,components:oe,offset:Y}}),size:fh(A,Math.max(P,h)),alignment:h}}function fh(y,h){return Math.ceil(y/h)*h}class sa extends ns{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(h,A){const P=this.length;return this.resize(P+1),this.emplace(P,h,A)}emplace(h,A,P){const N=2*h;return this.int16[N+0]=A,this.int16[N+1]=P,h}}sa.prototype.bytesPerElement=4,Pn("StructArrayLayout2i4",sa);class B extends ns{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(h,A,P,N){const q=this.length;return this.resize(q+1),this.emplace(q,h,A,P,N)}emplace(h,A,P,N,q){const Y=4*h;return this.int16[Y+0]=A,this.int16[Y+1]=P,this.int16[Y+2]=N,this.int16[Y+3]=q,h}}B.prototype.bytesPerElement=8,Pn("StructArrayLayout4i8",B);class d extends ns{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(h,A,P,N,q,Y){const oe=this.length;return this.resize(oe+1),this.emplace(oe,h,A,P,N,q,Y)}emplace(h,A,P,N,q,Y,oe){const fe=6*h;return this.int16[fe+0]=A,this.int16[fe+1]=P,this.int16[fe+2]=N,this.int16[fe+3]=q,this.int16[fe+4]=Y,this.int16[fe+5]=oe,h}}d.prototype.bytesPerElement=12,Pn("StructArrayLayout2i4i12",d);class I extends ns{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(h,A,P,N,q,Y){const oe=this.length;return this.resize(oe+1),this.emplace(oe,h,A,P,N,q,Y)}emplace(h,A,P,N,q,Y,oe){const fe=4*h,xe=8*h;return this.int16[fe+0]=A,this.int16[fe+1]=P,this.uint8[xe+4]=N,this.uint8[xe+5]=q,this.uint8[xe+6]=Y,this.uint8[xe+7]=oe,h}}I.prototype.bytesPerElement=8,Pn("StructArrayLayout2i4ub8",I);class D extends ns{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(h,A){const P=this.length;return this.resize(P+1),this.emplace(P,h,A)}emplace(h,A,P){const N=2*h;return this.float32[N+0]=A,this.float32[N+1]=P,h}}D.prototype.bytesPerElement=8,Pn("StructArrayLayout2f8",D);class z extends ns{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(h,A,P,N,q,Y,oe,fe,xe,Fe){const Ve=this.length;return this.resize(Ve+1),this.emplace(Ve,h,A,P,N,q,Y,oe,fe,xe,Fe)}emplace(h,A,P,N,q,Y,oe,fe,xe,Fe,Ve){const tt=10*h;return this.uint16[tt+0]=A,this.uint16[tt+1]=P,this.uint16[tt+2]=N,this.uint16[tt+3]=q,this.uint16[tt+4]=Y,this.uint16[tt+5]=oe,this.uint16[tt+6]=fe,this.uint16[tt+7]=xe,this.uint16[tt+8]=Fe,this.uint16[tt+9]=Ve,h}}z.prototype.bytesPerElement=20,Pn("StructArrayLayout10ui20",z);class W extends ns{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(h,A,P,N,q,Y,oe,fe,xe,Fe,Ve,tt){const lt=this.length;return this.resize(lt+1),this.emplace(lt,h,A,P,N,q,Y,oe,fe,xe,Fe,Ve,tt)}emplace(h,A,P,N,q,Y,oe,fe,xe,Fe,Ve,tt,lt){const ht=12*h;return this.int16[ht+0]=A,this.int16[ht+1]=P,this.int16[ht+2]=N,this.int16[ht+3]=q,this.uint16[ht+4]=Y,this.uint16[ht+5]=oe,this.uint16[ht+6]=fe,this.uint16[ht+7]=xe,this.int16[ht+8]=Fe,this.int16[ht+9]=Ve,this.int16[ht+10]=tt,this.int16[ht+11]=lt,h}}W.prototype.bytesPerElement=24,Pn("StructArrayLayout4i4ui4i24",W);class ne extends ns{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(h,A,P){const N=this.length;return this.resize(N+1),this.emplace(N,h,A,P)}emplace(h,A,P,N){const q=3*h;return this.float32[q+0]=A,this.float32[q+1]=P,this.float32[q+2]=N,h}}ne.prototype.bytesPerElement=12,Pn("StructArrayLayout3f12",ne);class pe extends ns{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(h){const A=this.length;return this.resize(A+1),this.emplace(A,h)}emplace(h,A){return this.uint32[1*h+0]=A,h}}pe.prototype.bytesPerElement=4,Pn("StructArrayLayout1ul4",pe);class ye extends ns{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(h,A,P,N,q,Y,oe,fe,xe){const Fe=this.length;return this.resize(Fe+1),this.emplace(Fe,h,A,P,N,q,Y,oe,fe,xe)}emplace(h,A,P,N,q,Y,oe,fe,xe,Fe){const Ve=10*h,tt=5*h;return this.int16[Ve+0]=A,this.int16[Ve+1]=P,this.int16[Ve+2]=N,this.int16[Ve+3]=q,this.int16[Ve+4]=Y,this.int16[Ve+5]=oe,this.uint32[tt+3]=fe,this.uint16[Ve+8]=xe,this.uint16[Ve+9]=Fe,h}}ye.prototype.bytesPerElement=20,Pn("StructArrayLayout6i1ul2ui20",ye);class ke extends ns{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(h,A,P,N,q,Y){const oe=this.length;return this.resize(oe+1),this.emplace(oe,h,A,P,N,q,Y)}emplace(h,A,P,N,q,Y,oe){const fe=6*h;return this.int16[fe+0]=A,this.int16[fe+1]=P,this.int16[fe+2]=N,this.int16[fe+3]=q,this.int16[fe+4]=Y,this.int16[fe+5]=oe,h}}ke.prototype.bytesPerElement=12,Pn("StructArrayLayout2i2i2i12",ke);class ze extends ns{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(h,A,P,N,q){const Y=this.length;return this.resize(Y+1),this.emplace(Y,h,A,P,N,q)}emplace(h,A,P,N,q,Y){const oe=4*h,fe=8*h;return this.float32[oe+0]=A,this.float32[oe+1]=P,this.float32[oe+2]=N,this.int16[fe+6]=q,this.int16[fe+7]=Y,h}}ze.prototype.bytesPerElement=16,Pn("StructArrayLayout2f1f2i16",ze);class Qe extends ns{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(h,A,P,N){const q=this.length;return this.resize(q+1),this.emplace(q,h,A,P,N)}emplace(h,A,P,N,q){const Y=12*h,oe=3*h;return this.uint8[Y+0]=A,this.uint8[Y+1]=P,this.float32[oe+1]=N,this.float32[oe+2]=q,h}}Qe.prototype.bytesPerElement=12,Pn("StructArrayLayout2ub2f12",Qe);class rt extends ns{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(h,A,P){const N=this.length;return this.resize(N+1),this.emplace(N,h,A,P)}emplace(h,A,P,N){const q=3*h;return this.uint16[q+0]=A,this.uint16[q+1]=P,this.uint16[q+2]=N,h}}rt.prototype.bytesPerElement=6,Pn("StructArrayLayout3ui6",rt);class Pt extends ns{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(h,A,P,N,q,Y,oe,fe,xe,Fe,Ve,tt,lt,ht,Zt,Vt,vi){const Fi=this.length;return this.resize(Fi+1),this.emplace(Fi,h,A,P,N,q,Y,oe,fe,xe,Fe,Ve,tt,lt,ht,Zt,Vt,vi)}emplace(h,A,P,N,q,Y,oe,fe,xe,Fe,Ve,tt,lt,ht,Zt,Vt,vi,Fi){const gi=24*h,Li=12*h,$i=48*h;return this.int16[gi+0]=A,this.int16[gi+1]=P,this.uint16[gi+2]=N,this.uint16[gi+3]=q,this.uint32[Li+2]=Y,this.uint32[Li+3]=oe,this.uint32[Li+4]=fe,this.uint16[gi+10]=xe,this.uint16[gi+11]=Fe,this.uint16[gi+12]=Ve,this.float32[Li+7]=tt,this.float32[Li+8]=lt,this.uint8[$i+36]=ht,this.uint8[$i+37]=Zt,this.uint8[$i+38]=Vt,this.uint32[Li+10]=vi,this.int16[gi+22]=Fi,h}}Pt.prototype.bytesPerElement=48,Pn("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",Pt);class kt extends ns{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(h,A,P,N,q,Y,oe,fe,xe,Fe,Ve,tt,lt,ht,Zt,Vt,vi,Fi,gi,Li,$i,Qi,Xn,ir,Un,Mn,An,Vn){const Bn=this.length;return this.resize(Bn+1),this.emplace(Bn,h,A,P,N,q,Y,oe,fe,xe,Fe,Ve,tt,lt,ht,Zt,Vt,vi,Fi,gi,Li,$i,Qi,Xn,ir,Un,Mn,An,Vn)}emplace(h,A,P,N,q,Y,oe,fe,xe,Fe,Ve,tt,lt,ht,Zt,Vt,vi,Fi,gi,Li,$i,Qi,Xn,ir,Un,Mn,An,Vn,Bn){const pn=34*h,vr=17*h;return this.int16[pn+0]=A,this.int16[pn+1]=P,this.int16[pn+2]=N,this.int16[pn+3]=q,this.int16[pn+4]=Y,this.int16[pn+5]=oe,this.int16[pn+6]=fe,this.int16[pn+7]=xe,this.uint16[pn+8]=Fe,this.uint16[pn+9]=Ve,this.uint16[pn+10]=tt,this.uint16[pn+11]=lt,this.uint16[pn+12]=ht,this.uint16[pn+13]=Zt,this.uint16[pn+14]=Vt,this.uint16[pn+15]=vi,this.uint16[pn+16]=Fi,this.uint16[pn+17]=gi,this.uint16[pn+18]=Li,this.uint16[pn+19]=$i,this.uint16[pn+20]=Qi,this.uint16[pn+21]=Xn,this.uint16[pn+22]=ir,this.uint32[vr+12]=Un,this.float32[vr+13]=Mn,this.float32[vr+14]=An,this.float32[vr+15]=Vn,this.float32[vr+16]=Bn,h}}kt.prototype.bytesPerElement=68,Pn("StructArrayLayout8i15ui1ul4f68",kt);class Et extends ns{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(h){const A=this.length;return this.resize(A+1),this.emplace(A,h)}emplace(h,A){return this.float32[1*h+0]=A,h}}Et.prototype.bytesPerElement=4,Pn("StructArrayLayout1f4",Et);class si extends ns{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(h,A,P){const N=this.length;return this.resize(N+1),this.emplace(N,h,A,P)}emplace(h,A,P,N){const q=3*h;return this.int16[q+0]=A,this.int16[q+1]=P,this.int16[q+2]=N,h}}si.prototype.bytesPerElement=6,Pn("StructArrayLayout3i6",si);class fi extends ns{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(h,A,P){const N=this.length;return this.resize(N+1),this.emplace(N,h,A,P)}emplace(h,A,P,N){const q=4*h;return this.uint32[2*h+0]=A,this.uint16[q+2]=P,this.uint16[q+3]=N,h}}fi.prototype.bytesPerElement=8,Pn("StructArrayLayout1ul2ui8",fi);class xi extends ns{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(h,A){const P=this.length;return this.resize(P+1),this.emplace(P,h,A)}emplace(h,A,P){const N=2*h;return this.uint16[N+0]=A,this.uint16[N+1]=P,h}}xi.prototype.bytesPerElement=4,Pn("StructArrayLayout2ui4",xi);class Nt extends ns{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(h){const A=this.length;return this.resize(A+1),this.emplace(A,h)}emplace(h,A){return this.uint16[1*h+0]=A,h}}Nt.prototype.bytesPerElement=2,Pn("StructArrayLayout1ui2",Nt);class Pi extends ns{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(h,A,P,N){const q=this.length;return this.resize(q+1),this.emplace(q,h,A,P,N)}emplace(h,A,P,N,q){const Y=4*h;return this.float32[Y+0]=A,this.float32[Y+1]=P,this.float32[Y+2]=N,this.float32[Y+3]=q,h}}Pi.prototype.bytesPerElement=16,Pn("StructArrayLayout4f16",Pi);class Ei extends Kl{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new it(this.anchorPointX,this.anchorPointY)}}Ei.prototype.size=20;class Vi extends ye{get(h){return new Ei(this,h)}}Pn("CollisionBoxArray",Vi);class Ni extends Kl{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(h){this._structArray.uint8[this._pos1+37]=h}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(h){this._structArray.uint8[this._pos1+38]=h}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(h){this._structArray.uint32[this._pos4+10]=h}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}Ni.prototype.size=48;class cn extends Pt{get(h){return new Ni(this,h)}}Pn("PlacedSymbolArray",cn);class zi extends Kl{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(h){this._structArray.uint32[this._pos4+12]=h}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get textOffset0(){return this._structArray.float32[this._pos4+14]}get textOffset1(){return this._structArray.float32[this._pos4+15]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+16]}}zi.prototype.size=68;class Rn extends kt{get(h){return new zi(this,h)}}Pn("SymbolInstanceArray",Rn);class _n extends Et{getoffsetX(h){return this.float32[1*h+0]}}Pn("GlyphOffsetArray",_n);class qn extends si{getx(h){return this.int16[3*h+0]}gety(h){return this.int16[3*h+1]}gettileUnitDistanceFromAnchor(h){return this.int16[3*h+2]}}Pn("SymbolLineVertexArray",qn);class Er extends Kl{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}Er.prototype.size=8;class Mr extends fi{get(h){return new Er(this,h)}}Pn("FeatureIndexArray",Mr);class j extends sa{}class K extends sa{}class ue extends sa{}class be extends d{}class je extends I{}class Ke extends D{}class et extends z{}class at extends W{}class pt extends ne{}class St extends pe{}class ai extends ke{}class Ai extends Qe{}class wi extends rt{}class pi extends xi{}const rn=ms([{name:"a_pos",components:2,type:"Int16"}],4),{members:Oi}=rn;class Wt{constructor(h=[]){this.segments=h}prepareSegment(h,A,P,N){let q=this.segments[this.segments.length-1];return h>Wt.MAX_VERTEX_ARRAY_LENGTH&&Z(`Max vertices per segment is ${Wt.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${h}`),(!q||q.vertexLength+h>Wt.MAX_VERTEX_ARRAY_LENGTH||q.sortKey!==N)&&(q={vertexOffset:A.length,primitiveOffset:P.length,vertexLength:0,primitiveLength:0},N!==void 0&&(q.sortKey=N),this.segments.push(q)),q}get(){return this.segments}destroy(){for(const h of this.segments)for(const A in h.vaos)h.vaos[A].destroy()}static simpleSegment(h,A,P,N){return new Wt([{vertexOffset:h,primitiveOffset:A,vertexLength:P,primitiveLength:N,vaos:{},sortKey:0}])}}function ii(y,h){return 256*(y=w(Math.floor(y),0,255))+w(Math.floor(h),0,255)}Wt.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,Pn("SegmentVector",Wt);const Hi=ms([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]);var Ji={exports:{}},Ui={exports:{}};Ui.exports=function(y,h){var A,P,N,q,Y,oe,fe,xe;for(P=y.length-(A=3&y.length),N=h,Y=3432918353,oe=461845907,xe=0;xe<P;)fe=255&y.charCodeAt(xe)|(255&y.charCodeAt(++xe))<<8|(255&y.charCodeAt(++xe))<<16|(255&y.charCodeAt(++xe))<<24,++xe,N=27492+(65535&(q=5*(65535&(N=(N^=fe=(65535&(fe=(fe=(65535&fe)*Y+(((fe>>>16)*Y&65535)<<16)&4294967295)<<15|fe>>>17))*oe+(((fe>>>16)*oe&65535)<<16)&4294967295)<<13|N>>>19))+((5*(N>>>16)&65535)<<16)&4294967295))+((58964+(q>>>16)&65535)<<16);switch(fe=0,A){case 3:fe^=(255&y.charCodeAt(xe+2))<<16;case 2:fe^=(255&y.charCodeAt(xe+1))<<8;case 1:N^=fe=(65535&(fe=(fe=(65535&(fe^=255&y.charCodeAt(xe)))*Y+(((fe>>>16)*Y&65535)<<16)&4294967295)<<15|fe>>>17))*oe+(((fe>>>16)*oe&65535)<<16)&4294967295}return N^=y.length,N=2246822507*(65535&(N^=N>>>16))+((2246822507*(N>>>16)&65535)<<16)&4294967295,N=3266489909*(65535&(N^=N>>>13))+((3266489909*(N>>>16)&65535)<<16)&4294967295,(N^=N>>>16)>>>0};var Dn={exports:{}};Dn.exports=function(y,h){for(var A,P=y.length,N=h^P,q=0;P>=4;)A=1540483477*(65535&(A=255&y.charCodeAt(q)|(255&y.charCodeAt(++q))<<8|(255&y.charCodeAt(++q))<<16|(255&y.charCodeAt(++q))<<24))+((1540483477*(A>>>16)&65535)<<16),N=1540483477*(65535&N)+((1540483477*(N>>>16)&65535)<<16)^(A=1540483477*(65535&(A^=A>>>24))+((1540483477*(A>>>16)&65535)<<16)),P-=4,++q;switch(P){case 3:N^=(255&y.charCodeAt(q+2))<<16;case 2:N^=(255&y.charCodeAt(q+1))<<8;case 1:N=1540483477*(65535&(N^=255&y.charCodeAt(q)))+((1540483477*(N>>>16)&65535)<<16)}return N=1540483477*(65535&(N^=N>>>13))+((1540483477*(N>>>16)&65535)<<16),(N^=N>>>15)>>>0};var Cn=Ui.exports,kr=Dn.exports;Ji.exports=Cn,Ji.exports.murmur3=Cn,Ji.exports.murmur2=kr;class On{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(h,A,P,N){this.ids.push(bo(h)),this.positions.push(A,P,N)}getPositions(h){if(!this.indexed)throw new Error("Trying to get index, but feature positions are not indexed");const A=bo(h);let P=0,N=this.ids.length-1;for(;P<N;){const Y=P+N>>1;this.ids[Y]>=A?N=Y:P=Y+1}const q=[];for(;this.ids[P]===A;)q.push({index:this.positions[3*P],start:this.positions[3*P+1],end:this.positions[3*P+2]}),P++;return q}static serialize(h,A){const P=new Float64Array(h.ids),N=new Uint32Array(h.positions);return So(P,N,0,P.length-1),A&&A.push(P.buffer,N.buffer),{ids:P,positions:N}}static deserialize(h){const A=new On;return A.ids=h.ids,A.positions=h.positions,A.indexed=!0,A}}function bo(y){const h=+y;return!isNaN(h)&&h<=Number.MAX_SAFE_INTEGER?h:Ji.exports(String(y))}function So(y,h,A,P){for(;A<P;){const N=y[A+P>>1];let q=A-1,Y=P+1;for(;;){do q++;while(y[q]<N);do Y--;while(y[Y]>N);if(q>=Y)break;Yr(y,q,Y),Yr(h,3*q,3*Y),Yr(h,3*q+1,3*Y+1),Yr(h,3*q+2,3*Y+2)}Y-A<P-Y?(So(y,h,A,Y),A=Y+1):(So(y,h,Y+1,P),P=Y)}}function Yr(y,h,A){const P=y[h];y[h]=y[A],y[A]=P}Pn("FeaturePositionMap",On);class qr{constructor(h,A){this.gl=h.gl,this.location=A}}class mo extends qr{constructor(h,A){super(h,A),this.current=0}set(h){this.current!==h&&(this.current=h,this.gl.uniform1f(this.location,h))}}class Co extends qr{constructor(h,A){super(h,A),this.current=[0,0,0,0]}set(h){h[0]===this.current[0]&&h[1]===this.current[1]&&h[2]===this.current[2]&&h[3]===this.current[3]||(this.current=h,this.gl.uniform4f(this.location,h[0],h[1],h[2],h[3]))}}class Gr extends qr{constructor(h,A){super(h,A),this.current=dt.transparent}set(h){h.r===this.current.r&&h.g===this.current.g&&h.b===this.current.b&&h.a===this.current.a||(this.current=h,this.gl.uniform4f(this.location,h.r,h.g,h.b,h.a))}}const Is=new Float32Array(16);function Dr(y){return[ii(255*y.r,255*y.g),ii(255*y.b,255*y.a)]}class rs{constructor(h,A,P){this.value=h,this.uniformNames=A.map(N=>`u_${N}`),this.type=P}setUniform(h,A,P){h.set(P.constantOr(this.value))}getBinding(h,A,P){return this.type==="color"?new Gr(h,A):new mo(h,A)}}class zs{constructor(h,A){this.uniformNames=A.map(P=>`u_${P}`),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(h,A){this.pixelRatioFrom=A.pixelRatio,this.pixelRatioTo=h.pixelRatio,this.patternFrom=A.tlbr,this.patternTo=h.tlbr}setUniform(h,A,P,N){const q=N==="u_pattern_to"?this.patternTo:N==="u_pattern_from"?this.patternFrom:N==="u_pixel_ratio_to"?this.pixelRatioTo:N==="u_pixel_ratio_from"?this.pixelRatioFrom:null;q&&h.set(q)}getBinding(h,A,P){return P.substr(0,9)==="u_pattern"?new Co(h,A):new mo(h,A)}}class ao{constructor(h,A,P,N){this.expression=h,this.type=P,this.maxValue=0,this.paintVertexAttributes=A.map(q=>({name:`a_${q}`,type:"Float32",components:P==="color"?2:1,offset:0})),this.paintVertexArray=new N}populatePaintArray(h,A,P,N,q){const Y=this.paintVertexArray.length,oe=this.expression.evaluate(new No(0),A,{},N,[],q);this.paintVertexArray.resize(h),this._setPaintValue(Y,h,oe)}updatePaintArray(h,A,P,N){const q=this.expression.evaluate({zoom:0},P,N);this._setPaintValue(h,A,q)}_setPaintValue(h,A,P){if(this.type==="color"){const N=Dr(P);for(let q=h;q<A;q++)this.paintVertexArray.emplace(q,N[0],N[1])}else{for(let N=h;N<A;N++)this.paintVertexArray.emplace(N,P);this.maxValue=Math.max(this.maxValue,Math.abs(P))}}upload(h){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=h.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class us{constructor(h,A,P,N,q,Y){this.expression=h,this.uniformNames=A.map(oe=>`u_${oe}_t`),this.type=P,this.useIntegerZoom=N,this.zoom=q,this.maxValue=0,this.paintVertexAttributes=A.map(oe=>({name:`a_${oe}`,type:"Float32",components:P==="color"?4:2,offset:0})),this.paintVertexArray=new Y}populatePaintArray(h,A,P,N,q){const Y=this.expression.evaluate(new No(this.zoom),A,{},N,[],q),oe=this.expression.evaluate(new No(this.zoom+1),A,{},N,[],q),fe=this.paintVertexArray.length;this.paintVertexArray.resize(h),this._setPaintValue(fe,h,Y,oe)}updatePaintArray(h,A,P,N){const q=this.expression.evaluate({zoom:this.zoom},P,N),Y=this.expression.evaluate({zoom:this.zoom+1},P,N);this._setPaintValue(h,A,q,Y)}_setPaintValue(h,A,P,N){if(this.type==="color"){const q=Dr(P),Y=Dr(N);for(let oe=h;oe<A;oe++)this.paintVertexArray.emplace(oe,q[0],q[1],Y[0],Y[1])}else{for(let q=h;q<A;q++)this.paintVertexArray.emplace(q,P,N);this.maxValue=Math.max(this.maxValue,Math.abs(P),Math.abs(N))}}upload(h){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=h.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(h,A){const P=this.useIntegerZoom?Math.floor(A.zoom):A.zoom,N=w(this.expression.interpolationFactor(P,this.zoom,this.zoom+1),0,1);h.set(N)}getBinding(h,A,P){return new mo(h,A)}}class Ts{constructor(h,A,P,N,q,Y){this.expression=h,this.type=A,this.useIntegerZoom=P,this.zoom=N,this.layerId=Y,this.zoomInPaintVertexArray=new q,this.zoomOutPaintVertexArray=new q}populatePaintArray(h,A,P){const N=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(h),this.zoomOutPaintVertexArray.resize(h),this._setPaintValues(N,h,A.patterns&&A.patterns[this.layerId],P)}updatePaintArray(h,A,P,N,q){this._setPaintValues(h,A,P.patterns&&P.patterns[this.layerId],q)}_setPaintValues(h,A,P,N){if(!N||!P)return;const{min:q,mid:Y,max:oe}=P,fe=N[q],xe=N[Y],Fe=N[oe];if(fe&&xe&&Fe)for(let Ve=h;Ve<A;Ve++)this.zoomInPaintVertexArray.emplace(Ve,xe.tl[0],xe.tl[1],xe.br[0],xe.br[1],fe.tl[0],fe.tl[1],fe.br[0],fe.br[1],xe.pixelRatio,fe.pixelRatio),this.zoomOutPaintVertexArray.emplace(Ve,xe.tl[0],xe.tl[1],xe.br[0],xe.br[1],Fe.tl[0],Fe.tl[1],Fe.br[0],Fe.br[1],xe.pixelRatio,Fe.pixelRatio)}upload(h){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=h.createVertexBuffer(this.zoomInPaintVertexArray,Hi.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=h.createVertexBuffer(this.zoomOutPaintVertexArray,Hi.members,this.expression.isStateDependent))}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class Ns{constructor(h,A,P){this.binders={},this._buffers=[];const N=[];for(const q in h.paint._values){if(!P(q))continue;const Y=h.paint.get(q);if(!(Y instanceof al&&ko(Y.property.specification)))continue;const oe=_a(q,h.type),fe=Y.value,xe=Y.property.specification.type,Fe=Y.property.useIntegerZoom,Ve=Y.property.specification["property-type"],tt=Ve==="cross-faded"||Ve==="cross-faded-data-driven";if(fe.kind==="constant")this.binders[q]=tt?new zs(fe.value,oe):new rs(fe.value,oe,xe),N.push(`/u_${q}`);else if(fe.kind==="source"||tt){const lt=qa(q,xe,"source");this.binders[q]=tt?new Ts(fe,xe,Fe,A,lt,h.id):new ao(fe,oe,xe,lt),N.push(`/a_${q}`)}else{const lt=qa(q,xe,"composite");this.binders[q]=new us(fe,oe,xe,Fe,A,lt),N.push(`/z_${q}`)}}this.cacheKey=N.sort().join("")}getMaxValue(h){const A=this.binders[h];return A instanceof ao||A instanceof us?A.maxValue:0}populatePaintArrays(h,A,P,N,q){for(const Y in this.binders){const oe=this.binders[Y];(oe instanceof ao||oe instanceof us||oe instanceof Ts)&&oe.populatePaintArray(h,A,P,N,q)}}setConstantPatternPositions(h,A){for(const P in this.binders){const N=this.binders[P];N instanceof zs&&N.setConstantPatternPositions(h,A)}}updatePaintArrays(h,A,P,N,q){let Y=!1;for(const oe in h){const fe=A.getPositions(oe);for(const xe of fe){const Fe=P.feature(xe.index);for(const Ve in this.binders){const tt=this.binders[Ve];if((tt instanceof ao||tt instanceof us||tt instanceof Ts)&&tt.expression.isStateDependent===!0){const lt=N.paint.get(Ve);tt.expression=lt.value,tt.updatePaintArray(xe.start,xe.end,Fe,h[oe],q),Y=!0}}}}return Y}defines(){const h=[];for(const A in this.binders){const P=this.binders[A];(P instanceof rs||P instanceof zs)&&h.push(...P.uniformNames.map(N=>`#define HAS_UNIFORM_${N}`))}return h}getBinderAttributes(){const h=[];for(const A in this.binders){const P=this.binders[A];if(P instanceof ao||P instanceof us)for(let N=0;N<P.paintVertexAttributes.length;N++)h.push(P.paintVertexAttributes[N].name);else if(P instanceof Ts)for(let N=0;N<Hi.members.length;N++)h.push(Hi.members[N].name)}return h}getBinderUniforms(){const h=[];for(const A in this.binders){const P=this.binders[A];if(P instanceof rs||P instanceof zs||P instanceof us)for(const N of P.uniformNames)h.push(N)}return h}getPaintVertexBuffers(){return this._buffers}getUniforms(h,A){const P=[];for(const N in this.binders){const q=this.binders[N];if(q instanceof rs||q instanceof zs||q instanceof us){for(const Y of q.uniformNames)if(A[Y]){const oe=q.getBinding(h,A[Y],Y);P.push({name:Y,property:N,binding:oe})}}}return P}setUniforms(h,A,P,N){for(const{name:q,property:Y,binding:oe}of A)this.binders[Y].setUniform(oe,N,P.get(Y),q)}updatePaintBuffers(h){this._buffers=[];for(const A in this.binders){const P=this.binders[A];if(h&&P instanceof Ts){const N=h.fromScale===2?P.zoomInPaintVertexBuffer:P.zoomOutPaintVertexBuffer;N&&this._buffers.push(N)}else(P instanceof ao||P instanceof us)&&P.paintVertexBuffer&&this._buffers.push(P.paintVertexBuffer)}}upload(h){for(const A in this.binders){const P=this.binders[A];(P instanceof ao||P instanceof us||P instanceof Ts)&&P.upload(h)}this.updatePaintBuffers()}destroy(){for(const h in this.binders){const A=this.binders[h];(A instanceof ao||A instanceof us||A instanceof Ts)&&A.destroy()}}}class jo{constructor(h,A,P=()=>!0){this.programConfigurations={};for(const N of h)this.programConfigurations[N.id]=new Ns(N,A,P);this.needsUpload=!1,this._featureMap=new On,this._bufferOffset=0}populatePaintArrays(h,A,P,N,q,Y){for(const oe in this.programConfigurations)this.programConfigurations[oe].populatePaintArrays(h,A,N,q,Y);A.id!==void 0&&this._featureMap.add(A.id,P,this._bufferOffset,h),this._bufferOffset=h,this.needsUpload=!0}updatePaintArrays(h,A,P,N){for(const q of P)this.needsUpload=this.programConfigurations[q.id].updatePaintArrays(h,this._featureMap,A,q,N)||this.needsUpload}get(h){return this.programConfigurations[h]}upload(h){if(this.needsUpload){for(const A in this.programConfigurations)this.programConfigurations[A].upload(h);this.needsUpload=!1}}destroy(){for(const h in this.programConfigurations)this.programConfigurations[h].destroy()}}function _a(y,h){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[y]||[y.replace(`${h}-`,"").replace(/-/g,"_")]}function qa(y,h,A){const P={color:{source:D,composite:Pi},number:{source:Et,composite:D}},N=function(q){return{"line-pattern":{source:et,composite:et},"fill-pattern":{source:et,composite:et},"fill-extrusion-pattern":{source:et,composite:et}}[q]}(y);return N&&N[A]||P[h][A]}Pn("ConstantBinder",rs),Pn("CrossFadedConstantBinder",zs),Pn("SourceExpressionBinder",ao),Pn("CrossFadedCompositeBinder",Ts),Pn("CompositeExpressionBinder",us),Pn("ProgramConfiguration",Ns,{omit:["_buffers"]}),Pn("ProgramConfigurationSet",jo);var Oo=8192;const ws=Math.pow(2,14)-1,Jl=-ws-1;function Ha(y){const h=Oo/y.extent,A=y.loadGeometry();for(let P=0;P<A.length;P++){const N=A[P];for(let q=0;q<N.length;q++){const Y=N[q],oe=Math.round(Y.x*h),fe=Math.round(Y.y*h);Y.x=w(oe,Jl,ws),Y.y=w(fe,Jl,ws),(oe<Y.x||oe>Y.x+1||fe<Y.y||fe>Y.y+1)&&Z("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return A}function ul(y,h){return{type:y.type,id:y.id,properties:y.properties,geometry:h?Ha(y):[]}}function cl(y,h,A,P,N){y.emplaceBack(2*h+(P+1)/2,2*A+(N+1)/2)}class os{constructor(h){this.zoom=h.zoom,this.overscaling=h.overscaling,this.layers=h.layers,this.layerIds=this.layers.map(A=>A.id),this.index=h.index,this.hasPattern=!1,this.layoutVertexArray=new K,this.indexArray=new wi,this.segments=new Wt,this.programConfigurations=new jo(h.layers,h.zoom),this.stateDependentLayerIds=this.layers.filter(A=>A.isStateDependent()).map(A=>A.id)}populate(h,A,P){const N=this.layers[0],q=[];let Y=null,oe=!1;N.type==="circle"&&(Y=N.layout.get("circle-sort-key"),oe=!Y.isConstant());for(const{feature:fe,id:xe,index:Fe,sourceLayerIndex:Ve}of h){const tt=this.layers[0]._featureFilter.needGeometry,lt=ul(fe,tt);if(!this.layers[0]._featureFilter.filter(new No(this.zoom),lt,P))continue;const ht=oe?Y.evaluate(lt,{},P):void 0,Zt={id:xe,properties:fe.properties,type:fe.type,sourceLayerIndex:Ve,index:Fe,geometry:tt?lt.geometry:Ha(fe),patterns:{},sortKey:ht};q.push(Zt)}oe&&q.sort((fe,xe)=>fe.sortKey-xe.sortKey);for(const fe of q){const{geometry:xe,index:Fe,sourceLayerIndex:Ve}=fe,tt=h[Fe].feature;this.addFeature(fe,xe,Fe,P),A.featureIndex.insert(tt,xe,Fe,Ve,this.index)}}update(h,A,P){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(h,A,this.stateDependentLayers,P)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(h){this.uploaded||(this.layoutVertexBuffer=h.createVertexBuffer(this.layoutVertexArray,Oi),this.indexBuffer=h.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(h),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(h,A,P,N){for(const q of A)for(const Y of q){const oe=Y.x,fe=Y.y;if(oe<0||oe>=Oo||fe<0||fe>=Oo)continue;const xe=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,h.sortKey),Fe=xe.vertexLength;cl(this.layoutVertexArray,oe,fe,-1,-1),cl(this.layoutVertexArray,oe,fe,1,-1),cl(this.layoutVertexArray,oe,fe,1,1),cl(this.layoutVertexArray,oe,fe,-1,1),this.indexArray.emplaceBack(Fe,Fe+1,Fe+2),this.indexArray.emplaceBack(Fe,Fe+3,Fe+2),xe.vertexLength+=4,xe.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,h,P,{},N)}}function zh(y,h){for(let A=0;A<y.length;A++)if(pc(h,y[A]))return!0;for(let A=0;A<h.length;A++)if(pc(y,h[A]))return!0;return!!fc(y,h)}function r0(y,h,A){return!!pc(y,h)||!!Ga(h,y,A)}function vf(y,h){if(y.length===1)return dc(h,y[0]);for(let A=0;A<h.length;A++){const P=h[A];for(let N=0;N<P.length;N++)if(pc(y,P[N]))return!0}for(let A=0;A<y.length;A++)if(dc(h,y[A]))return!0;for(let A=0;A<h.length;A++)if(fc(y,h[A]))return!0;return!1}function hc(y,h,A){if(y.length>1){if(fc(y,h))return!0;for(let P=0;P<h.length;P++)if(Ga(h[P],y,A))return!0}for(let P=0;P<y.length;P++)if(Ga(y[P],h,A))return!0;return!1}function fc(y,h){if(y.length===0||h.length===0)return!1;for(let A=0;A<y.length-1;A++){const P=y[A],N=y[A+1];for(let q=0;q<h.length-1;q++)if(Nh(P,N,h[q],h[q+1]))return!0}return!1}function Nh(y,h,A,P){return te(y,A,P)!==te(h,A,P)&&te(y,h,A)!==te(y,h,P)}function Ga(y,h,A){const P=A*A;if(h.length===1)return y.distSqr(h[0])<P;for(let N=1;N<h.length;N++)if(Wa(y,h[N-1],h[N])<P)return!0;return!1}function Wa(y,h,A){const P=h.distSqr(A);if(P===0)return y.distSqr(h);const N=((y.x-h.x)*(A.x-h.x)+(y.y-h.y)*(A.y-h.y))/P;return y.distSqr(N<0?h:N>1?A:A.sub(h)._mult(N)._add(h))}function dc(y,h){let A,P,N,q=!1;for(let Y=0;Y<y.length;Y++){A=y[Y];for(let oe=0,fe=A.length-1;oe<A.length;fe=oe++)P=A[oe],N=A[fe],P.y>h.y!=N.y>h.y&&h.x<(N.x-P.x)*(h.y-P.y)/(N.y-P.y)+P.x&&(q=!q)}return q}function pc(y,h){let A=!1;for(let P=0,N=y.length-1;P<y.length;N=P++){const q=y[P],Y=y[N];q.y>h.y!=Y.y>h.y&&h.x<(Y.x-q.x)*(h.y-q.y)/(Y.y-q.y)+q.x&&(A=!A)}return A}function jh(y,h,A){const P=A[0],N=A[2];if(y.x<P.x&&h.x<P.x||y.x>N.x&&h.x>N.x||y.y<P.y&&h.y<P.y||y.y>N.y&&h.y>N.y)return!1;const q=te(y,h,A[0]);return q!==te(y,h,A[1])||q!==te(y,h,A[2])||q!==te(y,h,A[3])}function zc(y,h,A){const P=h.paint.get(y).value;return P.kind==="constant"?P.value:A.programConfigurations.get(h.id).getMaxValue(y)}function mc(y){return Math.sqrt(y[0]*y[0]+y[1]*y[1])}function Nc(y,h,A,P,N){if(!h[0]&&!h[1])return y;const q=it.convert(h)._mult(N);A==="viewport"&&q._rotate(-P);const Y=[];for(let oe=0;oe<y.length;oe++)Y.push(y[oe].sub(q));return Y}Pn("CircleBucket",os,{omit:["layers"]});const gc=new Ho({"circle-sort-key":new yr(Q.layout_circle["circle-sort-key"])});var jc={paint:new Ho({"circle-radius":new yr(Q.paint_circle["circle-radius"]),"circle-color":new yr(Q.paint_circle["circle-color"]),"circle-blur":new yr(Q.paint_circle["circle-blur"]),"circle-opacity":new yr(Q.paint_circle["circle-opacity"]),"circle-translate":new er(Q.paint_circle["circle-translate"]),"circle-translate-anchor":new er(Q.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new er(Q.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new er(Q.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new yr(Q.paint_circle["circle-stroke-width"]),"circle-stroke-color":new yr(Q.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new yr(Q.paint_circle["circle-stroke-opacity"])}),layout:gc},aa=1e-6,Js=typeof Float32Array<"u"?Float32Array:Array;function Ls(){var y=new Js(9);return Js!=Float32Array&&(y[1]=0,y[2]=0,y[3]=0,y[5]=0,y[6]=0,y[7]=0),y[0]=1,y[4]=1,y[8]=1,y}function Ql(y){return y[0]=1,y[1]=0,y[2]=0,y[3]=0,y[4]=0,y[5]=1,y[6]=0,y[7]=0,y[8]=0,y[9]=0,y[10]=1,y[11]=0,y[12]=0,y[13]=0,y[14]=0,y[15]=1,y}function o0(y,h,A){var P=h[0],N=h[1],q=h[2],Y=h[3],oe=h[4],fe=h[5],xe=h[6],Fe=h[7],Ve=h[8],tt=h[9],lt=h[10],ht=h[11],Zt=h[12],Vt=h[13],vi=h[14],Fi=h[15],gi=A[0],Li=A[1],$i=A[2],Qi=A[3];return y[0]=gi*P+Li*oe+$i*Ve+Qi*Zt,y[1]=gi*N+Li*fe+$i*tt+Qi*Vt,y[2]=gi*q+Li*xe+$i*lt+Qi*vi,y[3]=gi*Y+Li*Fe+$i*ht+Qi*Fi,y[4]=(gi=A[4])*P+(Li=A[5])*oe+($i=A[6])*Ve+(Qi=A[7])*Zt,y[5]=gi*N+Li*fe+$i*tt+Qi*Vt,y[6]=gi*q+Li*xe+$i*lt+Qi*vi,y[7]=gi*Y+Li*Fe+$i*ht+Qi*Fi,y[8]=(gi=A[8])*P+(Li=A[9])*oe+($i=A[10])*Ve+(Qi=A[11])*Zt,y[9]=gi*N+Li*fe+$i*tt+Qi*Vt,y[10]=gi*q+Li*xe+$i*lt+Qi*vi,y[11]=gi*Y+Li*Fe+$i*ht+Qi*Fi,y[12]=(gi=A[12])*P+(Li=A[13])*oe+($i=A[14])*Ve+(Qi=A[15])*Zt,y[13]=gi*N+Li*fe+$i*tt+Qi*Vt,y[14]=gi*q+Li*xe+$i*lt+Qi*vi,y[15]=gi*Y+Li*Fe+$i*ht+Qi*Fi,y}Math.hypot||(Math.hypot=function(){for(var y=0,h=arguments.length;h--;)y+=arguments[h]*arguments[h];return Math.sqrt(y)});var $l,s0=o0;function bf(){var y=new Js(3);return Js!=Float32Array&&(y[0]=0,y[1]=0,y[2]=0),y}function dh(y,h,A){var P=new Js(3);return P[0]=y,P[1]=h,P[2]=A,P}function Uc(y,h,A){var P=h[0],N=h[1],q=h[2],Y=h[3];return y[0]=A[0]*P+A[4]*N+A[8]*q+A[12]*Y,y[1]=A[1]*P+A[5]*N+A[9]*q+A[13]*Y,y[2]=A[2]*P+A[6]*N+A[10]*q+A[14]*Y,y[3]=A[3]*P+A[7]*N+A[11]*q+A[15]*Y,y}function wf(){var y=new Js(4);return Js!=Float32Array&&(y[0]=0,y[1]=0,y[2]=0),y[3]=1,y}function ph(y,h){const A=Uc([],[y.x,y.y,0,1],h);return new it(A[0]/A[3],A[1]/A[3])}bf(),$l=new Js(4),Js!=Float32Array&&($l[0]=0,$l[1]=0,$l[2]=0,$l[3]=0),bf(),dh(1,0,0),dh(0,1,0),wf(),wf(),Ls(),function(){var y;y=new Js(2),Js!=Float32Array&&(y[0]=0,y[1]=0)}();class Uh extends os{}Pn("HeatmapBucket",Uh,{omit:["layers"]});var mh={paint:new Ho({"heatmap-radius":new yr(Q.paint_heatmap["heatmap-radius"]),"heatmap-weight":new yr(Q.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new er(Q.paint_heatmap["heatmap-intensity"]),"heatmap-color":new bs(Q.paint_heatmap["heatmap-color"]),"heatmap-opacity":new er(Q.paint_heatmap["heatmap-opacity"])})};function Ll(y,{width:h,height:A},P,N){if(N){if(N instanceof Uint8ClampedArray)N=new Uint8Array(N.buffer);else if(N.length!==h*A*P)throw new RangeError(`mismatched image size. expected: ${N.length} but got: ${h*A*P}`)}else N=new Uint8Array(h*A*P);return y.width=h,y.height=A,y.data=N,y}function a0(y,{width:h,height:A},P){if(h===y.width&&A===y.height)return;const N=Ll({},{width:h,height:A},P);Vc(y,N,{x:0,y:0},{x:0,y:0},{width:Math.min(y.width,h),height:Math.min(y.height,A)},P),y.width=h,y.height=A,y.data=N.data}function Vc(y,h,A,P,N,q){if(N.width===0||N.height===0)return h;if(N.width>y.width||N.height>y.height||A.x>y.width-N.width||A.y>y.height-N.height)throw new RangeError("out of range source coordinates for image copy");if(N.width>h.width||N.height>h.height||P.x>h.width-N.width||P.y>h.height-N.height)throw new RangeError("out of range destination coordinates for image copy");const Y=y.data,oe=h.data;if(Y===oe)throw new Error("srcData equals dstData, so image is already copied");for(let fe=0;fe<N.height;fe++){const xe=((A.y+fe)*y.width+A.x)*q,Fe=((P.y+fe)*h.width+P.x)*q;for(let Ve=0;Ve<N.width*q;Ve++)oe[Fe+Ve]=Y[xe+Ve]}return h}class yc{constructor(h,A){Ll(this,h,1,A)}resize(h){a0(this,h,1)}clone(){return new yc({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(h,A,P,N,q){Vc(h,A,P,N,q,1)}}class va{constructor(h,A){Ll(this,h,4,A)}resize(h){a0(this,h,4)}replace(h,A){A?this.data.set(h):this.data=h instanceof Uint8ClampedArray?new Uint8Array(h.buffer):h}clone(){return new va({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(h,A,P,N,q){Vc(h,A,P,N,q,4)}}function eu(y){const h={},A=y.resolution||256,P=y.clips?y.clips.length:1,N=y.image||new va({width:A,height:P});if(Math.log(A)/Math.LN2%1!=0)throw new Error(`width is not a power of 2 - ${A}`);const q=(Y,oe,fe)=>{h[y.evaluationKey]=fe;const xe=y.expression.evaluate(h);N.data[Y+oe+0]=Math.floor(255*xe.r/xe.a),N.data[Y+oe+1]=Math.floor(255*xe.g/xe.a),N.data[Y+oe+2]=Math.floor(255*xe.b/xe.a),N.data[Y+oe+3]=Math.floor(255*xe.a)};if(y.clips)for(let Y=0,oe=0;Y<P;++Y,oe+=4*A)for(let fe=0,xe=0;fe<A;fe++,xe+=4){const Fe=fe/(A-1),{start:Ve,end:tt}=y.clips[Y];q(oe,xe,Ve*(1-Fe)+tt*Fe)}else for(let Y=0,oe=0;Y<A;Y++,oe+=4)q(0,oe,Y/(A-1));return N}Pn("AlphaImage",yc),Pn("RGBAImage",va);var l0={paint:new Ho({"hillshade-illumination-direction":new er(Q.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new er(Q.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new er(Q.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new er(Q.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new er(Q.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new er(Q.paint_hillshade["hillshade-accent-color"])})};const xf=ms([{name:"a_pos",components:2,type:"Int16"}],4),{members:ad}=xf;var _c={exports:{}};function ku(y,h,A){A=A||2;var P,N,q,Y,oe,fe,xe,Fe=h&&h.length,Ve=Fe?h[0]*A:y.length,tt=u0(y,0,Ve,A,!0),lt=[];if(!tt||tt.next===tt.prev)return lt;if(Fe&&(tt=function(Zt,Vt,vi,Fi){var gi,Li,$i,Qi=[];for(gi=0,Li=Vt.length;gi<Li;gi++)($i=u0(Zt,Vt[gi]*Fi,gi<Li-1?Vt[gi+1]*Fi:Zt.length,Fi,!1))===$i.next&&($i.steiner=!0),Qi.push(Vh($i));for(Qi.sort(ba),gi=0;gi<Qi.length;gi++)vi=Su(Qi[gi],vi);return vi}(y,h,tt,A)),y.length>80*A){P=q=y[0],N=Y=y[1];for(var ht=A;ht<Ve;ht+=A)(oe=y[ht])<P&&(P=oe),(fe=y[ht+1])<N&&(N=fe),oe>q&&(q=oe),fe>Y&&(Y=fe);xe=(xe=Math.max(q-P,Y-N))!==0?32767/xe:0}return gh(tt,lt,A,P,N,xe,0),lt}function u0(y,h,A,P,N){var q,Y;if(N===Cf(y,h,A,P)>0)for(q=h;q<A;q+=P)Y=cp(q,y[q],y[q+1],Y);else for(q=A-P;q>=h;q-=P)Y=cp(q,y[q],y[q+1],Y);return Y&&Yu(Y,Y.next)&&(Sf(Y),Y=Y.next),Y}function Gu(y,h){if(!y)return y;h||(h=y);var A,P=y;do if(A=!1,P.steiner||!Yu(P,P.next)&&Qo(P.prev,P,P.next)!==0)P=P.next;else{if(Sf(P),(P=h=P.prev)===P.next)break;A=!0}while(A||P!==h);return h}function gh(y,h,A,P,N,q,Y){if(y){!Y&&q&&function(Fe,Ve,tt,lt){var ht=Fe;do ht.z===0&&(ht.z=tu(ht.x,ht.y,Ve,tt,lt)),ht.prevZ=ht.prev,ht.nextZ=ht.next,ht=ht.next;while(ht!==Fe);ht.prevZ.nextZ=null,ht.prevZ=null,function(Zt){var Vt,vi,Fi,gi,Li,$i,Qi,Xn,ir=1;do{for(vi=Zt,Zt=null,Li=null,$i=0;vi;){for($i++,Fi=vi,Qi=0,Vt=0;Vt<ir&&(Qi++,Fi=Fi.nextZ);Vt++);for(Xn=ir;Qi>0||Xn>0&&Fi;)Qi!==0&&(Xn===0||!Fi||vi.z<=Fi.z)?(gi=vi,vi=vi.nextZ,Qi--):(gi=Fi,Fi=Fi.nextZ,Xn--),Li?Li.nextZ=gi:Zt=gi,gi.prevZ=Li,Li=gi;vi=Fi}Li.nextZ=null,ir*=2}while($i>1)}(ht)}(y,P,N,q);for(var oe,fe,xe=y;y.prev!==y.next;)if(oe=y.prev,fe=y.next,q?ld(y,P,N,q):Af(y))h.push(oe.i/A|0),h.push(y.i/A|0),h.push(fe.i/A|0),Sf(y),y=fe.next,xe=fe.next;else if((y=fe)===xe){Y?Y===1?gh(y=yh(Gu(y),h,A),h,A,P,N,q,2):Y===2&&kf(y,h,A,P,N,q):gh(Gu(y),h,A,P,N,q,1);break}}}function Af(y){var h=y.prev,A=y,P=y.next;if(Qo(h,A,P)>=0)return!1;for(var N=h.x,q=A.x,Y=P.x,oe=h.y,fe=A.y,xe=P.y,Fe=N<q?N<Y?N:Y:q<Y?q:Y,Ve=oe<fe?oe<xe?oe:xe:fe<xe?fe:xe,tt=N>q?N>Y?N:Y:q>Y?q:Y,lt=oe>fe?oe>xe?oe:xe:fe>xe?fe:xe,ht=P.next;ht!==h;){if(ht.x>=Fe&&ht.x<=tt&&ht.y>=Ve&&ht.y<=lt&&Xu(N,oe,q,fe,Y,xe,ht.x,ht.y)&&Qo(ht.prev,ht,ht.next)>=0)return!1;ht=ht.next}return!0}function ld(y,h,A,P){var N=y.prev,q=y,Y=y.next;if(Qo(N,q,Y)>=0)return!1;for(var oe=N.x,fe=q.x,xe=Y.x,Fe=N.y,Ve=q.y,tt=Y.y,lt=oe<fe?oe<xe?oe:xe:fe<xe?fe:xe,ht=Fe<Ve?Fe<tt?Fe:tt:Ve<tt?Ve:tt,Zt=oe>fe?oe>xe?oe:xe:fe>xe?fe:xe,Vt=Fe>Ve?Fe>tt?Fe:tt:Ve>tt?Ve:tt,vi=tu(lt,ht,h,A,P),Fi=tu(Zt,Vt,h,A,P),gi=y.prevZ,Li=y.nextZ;gi&&gi.z>=vi&&Li&&Li.z<=Fi;){if(gi.x>=lt&&gi.x<=Zt&&gi.y>=ht&&gi.y<=Vt&&gi!==N&&gi!==Y&&Xu(oe,Fe,fe,Ve,xe,tt,gi.x,gi.y)&&Qo(gi.prev,gi,gi.next)>=0||(gi=gi.prevZ,Li.x>=lt&&Li.x<=Zt&&Li.y>=ht&&Li.y<=Vt&&Li!==N&&Li!==Y&&Xu(oe,Fe,fe,Ve,xe,tt,Li.x,Li.y)&&Qo(Li.prev,Li,Li.next)>=0))return!1;Li=Li.nextZ}for(;gi&&gi.z>=vi;){if(gi.x>=lt&&gi.x<=Zt&&gi.y>=ht&&gi.y<=Vt&&gi!==N&&gi!==Y&&Xu(oe,Fe,fe,Ve,xe,tt,gi.x,gi.y)&&Qo(gi.prev,gi,gi.next)>=0)return!1;gi=gi.prevZ}for(;Li&&Li.z<=Fi;){if(Li.x>=lt&&Li.x<=Zt&&Li.y>=ht&&Li.y<=Vt&&Li!==N&&Li!==Y&&Xu(oe,Fe,fe,Ve,xe,tt,Li.x,Li.y)&&Qo(Li.prev,Li,Li.next)>=0)return!1;Li=Li.nextZ}return!0}function yh(y,h,A){var P=y;do{var N=P.prev,q=P.next.next;!Yu(N,q)&&qh(N,P,P.next,q)&&Hh(N,q)&&Hh(q,N)&&(h.push(N.i/A|0),h.push(P.i/A|0),h.push(q.i/A|0),Sf(P),Sf(P.next),P=y=q),P=P.next}while(P!==y);return Gu(P)}function kf(y,h,A,P,N,q){var Y=y;do{for(var oe=Y.next.next;oe!==Y.prev;){if(Y.i!==oe.i&&c0(Y,oe)){var fe=up(Y,oe);return Y=Gu(Y,Y.next),fe=Gu(fe,fe.next),gh(Y,h,A,P,N,q,0),void gh(fe,h,A,P,N,q,0)}oe=oe.next}Y=Y.next}while(Y!==y)}function ba(y,h){return y.x-h.x}function Su(y,h){var A=function(N,q){var Y,oe=q,fe=N.x,xe=N.y,Fe=-1/0;do{if(xe<=oe.y&&xe>=oe.next.y&&oe.next.y!==oe.y){var Ve=oe.x+(xe-oe.y)*(oe.next.x-oe.x)/(oe.next.y-oe.y);if(Ve<=fe&&Ve>Fe&&(Fe=Ve,Y=oe.x<oe.next.x?oe:oe.next,Ve===fe))return Y}oe=oe.next}while(oe!==q);if(!Y)return null;var tt,lt=Y,ht=Y.x,Zt=Y.y,Vt=1/0;oe=Y;do fe>=oe.x&&oe.x>=ht&&fe!==oe.x&&Xu(xe<Zt?fe:Fe,xe,ht,Zt,xe<Zt?Fe:fe,xe,oe.x,oe.y)&&(tt=Math.abs(xe-oe.y)/(fe-oe.x),Hh(oe,N)&&(tt<Vt||tt===Vt&&(oe.x>Y.x||oe.x===Y.x&&Wu(Y,oe)))&&(Y=oe,Vt=tt)),oe=oe.next;while(oe!==lt);return Y}(y,h);if(!A)return h;var P=up(A,y);return Gu(P,P.next),Gu(A,A.next)}function Wu(y,h){return Qo(y.prev,y,h.prev)<0&&Qo(h.next,y,y.next)<0}function tu(y,h,A,P,N){return(y=1431655765&((y=858993459&((y=252645135&((y=16711935&((y=(y-A)*N|0)|y<<8))|y<<4))|y<<2))|y<<1))|(h=1431655765&((h=858993459&((h=252645135&((h=16711935&((h=(h-P)*N|0)|h<<8))|h<<4))|h<<2))|h<<1))<<1}function Vh(y){var h=y,A=y;do(h.x<A.x||h.x===A.x&&h.y<A.y)&&(A=h),h=h.next;while(h!==y);return A}function Xu(y,h,A,P,N,q,Y,oe){return(N-Y)*(h-oe)>=(y-Y)*(q-oe)&&(y-Y)*(P-oe)>=(A-Y)*(h-oe)&&(A-Y)*(q-oe)>=(N-Y)*(P-oe)}function c0(y,h){return y.next.i!==h.i&&y.prev.i!==h.i&&!function(A,P){var N=A;do{if(N.i!==A.i&&N.next.i!==A.i&&N.i!==P.i&&N.next.i!==P.i&&qh(N,N.next,A,P))return!0;N=N.next}while(N!==A);return!1}(y,h)&&(Hh(y,h)&&Hh(h,y)&&function(A,P){var N=A,q=!1,Y=(A.x+P.x)/2,oe=(A.y+P.y)/2;do N.y>oe!=N.next.y>oe&&N.next.y!==N.y&&Y<(N.next.x-N.x)*(oe-N.y)/(N.next.y-N.y)+N.x&&(q=!q),N=N.next;while(N!==A);return q}(y,h)&&(Qo(y.prev,y,h.prev)||Qo(y,h.prev,h))||Yu(y,h)&&Qo(y.prev,y,y.next)>0&&Qo(h.prev,h,h.next)>0)}function Qo(y,h,A){return(h.y-y.y)*(A.x-h.x)-(h.x-y.x)*(A.y-h.y)}function Yu(y,h){return y.x===h.x&&y.y===h.y}function qh(y,h,A,P){var N=f0(Qo(y,h,A)),q=f0(Qo(y,h,P)),Y=f0(Qo(A,P,y)),oe=f0(Qo(A,P,h));return N!==q&&Y!==oe||!(N!==0||!h0(y,A,h))||!(q!==0||!h0(y,P,h))||!(Y!==0||!h0(A,y,P))||!(oe!==0||!h0(A,h,P))}function h0(y,h,A){return h.x<=Math.max(y.x,A.x)&&h.x>=Math.min(y.x,A.x)&&h.y<=Math.max(y.y,A.y)&&h.y>=Math.min(y.y,A.y)}function f0(y){return y>0?1:y<0?-1:0}function Hh(y,h){return Qo(y.prev,y,y.next)<0?Qo(y,h,y.next)>=0&&Qo(y,y.prev,h)>=0:Qo(y,h,y.prev)<0||Qo(y,y.next,h)<0}function up(y,h){var A=new ud(y.i,y.x,y.y),P=new ud(h.i,h.x,h.y),N=y.next,q=h.prev;return y.next=h,h.prev=y,A.next=N,N.prev=A,P.next=A,A.prev=P,q.next=P,P.prev=q,P}function cp(y,h,A,P){var N=new ud(y,h,A);return P?(N.next=P.next,N.prev=P,P.next.prev=N,P.next=N):(N.prev=N,N.next=N),N}function Sf(y){y.next.prev=y.prev,y.prev.next=y.next,y.prevZ&&(y.prevZ.nextZ=y.nextZ),y.nextZ&&(y.nextZ.prevZ=y.prevZ)}function ud(y,h,A){this.i=y,this.x=h,this.y=A,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Cf(y,h,A,P){for(var N=0,q=h,Y=A-P;q<A;q+=P)N+=(y[Y]-y[q])*(y[q+1]+y[Y+1]),Y=q;return N}function Q1(y,h,A,P,N){hp(y,h,A||0,P||y.length-1,N||fp)}function hp(y,h,A,P,N){for(;P>A;){if(P-A>600){var q=P-A+1,Y=h-A+1,oe=Math.log(q),fe=.5*Math.exp(2*oe/3),xe=.5*Math.sqrt(oe*fe*(q-fe)/q)*(Y-q/2<0?-1:1);hp(y,h,Math.max(A,Math.floor(h-Y*fe/q+xe)),Math.min(P,Math.floor(h+(q-Y)*fe/q+xe)),N)}var Fe=y[h],Ve=A,tt=P;for(Ef(y,A,h),N(y[P],Fe)>0&&Ef(y,A,P);Ve<tt;){for(Ef(y,Ve,tt),Ve++,tt--;N(y[Ve],Fe)<0;)Ve++;for(;N(y[tt],Fe)>0;)tt--}N(y[A],Fe)===0?Ef(y,A,tt):Ef(y,++tt,P),tt<=h&&(A=tt+1),h<=tt&&(P=tt-1)}}function Ef(y,h,A){var P=y[h];y[h]=y[A],y[A]=P}function fp(y,h){return y<h?-1:y>h?1:0}function d0(y,h){const A=y.length;if(A<=1)return[y];const P=[];let N,q;for(let Y=0;Y<A;Y++){const oe=J(y[Y]);oe!==0&&(y[Y].area=Math.abs(oe),q===void 0&&(q=oe<0),q===oe<0?(N&&P.push(N),N=[y[Y]]):N.push(y[Y]))}if(N&&P.push(N),h>1)for(let Y=0;Y<P.length;Y++)P[Y].length<=h||(Q1(P[Y],h,1,P[Y].length-1,js),P[Y]=P[Y].slice(0,h));return P}function js(y,h){return h.area-y.area}function If(y,h,A){const P=A.patternDependencies;let N=!1;for(const q of h){const Y=q.paint.get(`${y}-pattern`);Y.isConstant()||(N=!0);const oe=Y.constantOr(null);oe&&(N=!0,P[oe.to]=!0,P[oe.from]=!0)}return N}function cd(y,h,A,P,N){const q=N.patternDependencies;for(const Y of h){const oe=Y.paint.get(`${y}-pattern`).value;if(oe.kind!=="constant"){let fe=oe.evaluate({zoom:P-1},A,{},N.availableImages),xe=oe.evaluate({zoom:P},A,{},N.availableImages),Fe=oe.evaluate({zoom:P+1},A,{},N.availableImages);fe=fe&&fe.name?fe.name:fe,xe=xe&&xe.name?xe.name:xe,Fe=Fe&&Fe.name?Fe.name:Fe,q[fe]=!0,q[xe]=!0,q[Fe]=!0,A.patterns[Y.id]={min:fe,mid:xe,max:Fe}}}return A}_c.exports=ku,_c.exports.default=ku,ku.deviation=function(y,h,A,P){var N=h&&h.length,q=Math.abs(Cf(y,0,N?h[0]*A:y.length,A));if(N)for(var Y=0,oe=h.length;Y<oe;Y++)q-=Math.abs(Cf(y,h[Y]*A,Y<oe-1?h[Y+1]*A:y.length,A));var fe=0;for(Y=0;Y<P.length;Y+=3){var xe=P[Y]*A,Fe=P[Y+1]*A,Ve=P[Y+2]*A;fe+=Math.abs((y[xe]-y[Ve])*(y[Fe+1]-y[xe+1])-(y[xe]-y[Fe])*(y[Ve+1]-y[xe+1]))}return q===0&&fe===0?0:Math.abs((fe-q)/q)},ku.flatten=function(y){for(var h=y[0][0].length,A={vertices:[],holes:[],dimensions:h},P=0,N=0;N<y.length;N++){for(var q=0;q<y[N].length;q++)for(var Y=0;Y<h;Y++)A.vertices.push(y[N][q][Y]);N>0&&A.holes.push(P+=y[N-1].length)}return A};class hd{constructor(h){this.zoom=h.zoom,this.overscaling=h.overscaling,this.layers=h.layers,this.layerIds=this.layers.map(A=>A.id),this.index=h.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new ue,this.indexArray=new wi,this.indexArray2=new pi,this.programConfigurations=new jo(h.layers,h.zoom),this.segments=new Wt,this.segments2=new Wt,this.stateDependentLayerIds=this.layers.filter(A=>A.isStateDependent()).map(A=>A.id)}populate(h,A,P){this.hasPattern=If("fill",this.layers,A);const N=this.layers[0].layout.get("fill-sort-key"),q=!N.isConstant(),Y=[];for(const{feature:oe,id:fe,index:xe,sourceLayerIndex:Fe}of h){const Ve=this.layers[0]._featureFilter.needGeometry,tt=ul(oe,Ve);if(!this.layers[0]._featureFilter.filter(new No(this.zoom),tt,P))continue;const lt=q?N.evaluate(tt,{},P,A.availableImages):void 0,ht={id:fe,properties:oe.properties,type:oe.type,sourceLayerIndex:Fe,index:xe,geometry:Ve?tt.geometry:Ha(oe),patterns:{},sortKey:lt};Y.push(ht)}q&&Y.sort((oe,fe)=>oe.sortKey-fe.sortKey);for(const oe of Y){const{geometry:fe,index:xe,sourceLayerIndex:Fe}=oe;if(this.hasPattern){const Ve=cd("fill",this.layers,oe,this.zoom,A);this.patternFeatures.push(Ve)}else this.addFeature(oe,fe,xe,P,{});A.featureIndex.insert(h[xe].feature,fe,xe,Fe,this.index)}}update(h,A,P){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(h,A,this.stateDependentLayers,P)}addFeatures(h,A,P){for(const N of this.patternFeatures)this.addFeature(N,N.geometry,N.index,A,P)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(h){this.uploaded||(this.layoutVertexBuffer=h.createVertexBuffer(this.layoutVertexArray,ad),this.indexBuffer=h.createIndexBuffer(this.indexArray),this.indexBuffer2=h.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(h),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(h,A,P,N,q){for(const Y of d0(A,500)){let oe=0;for(const lt of Y)oe+=lt.length;const fe=this.segments.prepareSegment(oe,this.layoutVertexArray,this.indexArray),xe=fe.vertexLength,Fe=[],Ve=[];for(const lt of Y){if(lt.length===0)continue;lt!==Y[0]&&Ve.push(Fe.length/2);const ht=this.segments2.prepareSegment(lt.length,this.layoutVertexArray,this.indexArray2),Zt=ht.vertexLength;this.layoutVertexArray.emplaceBack(lt[0].x,lt[0].y),this.indexArray2.emplaceBack(Zt+lt.length-1,Zt),Fe.push(lt[0].x),Fe.push(lt[0].y);for(let Vt=1;Vt<lt.length;Vt++)this.layoutVertexArray.emplaceBack(lt[Vt].x,lt[Vt].y),this.indexArray2.emplaceBack(Zt+Vt-1,Zt+Vt),Fe.push(lt[Vt].x),Fe.push(lt[Vt].y);ht.vertexLength+=lt.length,ht.primitiveLength+=lt.length}const tt=_c.exports(Fe,Ve);for(let lt=0;lt<tt.length;lt+=3)this.indexArray.emplaceBack(xe+tt[lt],xe+tt[lt+1],xe+tt[lt+2]);fe.vertexLength+=oe,fe.primitiveLength+=tt.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,h,P,q,N)}}Pn("FillBucket",hd,{omit:["layers","patternFeatures"]});const $1=new Ho({"fill-sort-key":new yr(Q.layout_fill["fill-sort-key"])});var dp={paint:new Ho({"fill-antialias":new er(Q.paint_fill["fill-antialias"]),"fill-opacity":new yr(Q.paint_fill["fill-opacity"]),"fill-color":new yr(Q.paint_fill["fill-color"]),"fill-outline-color":new yr(Q.paint_fill["fill-outline-color"]),"fill-translate":new er(Q.paint_fill["fill-translate"]),"fill-translate-anchor":new er(Q.paint_fill["fill-translate-anchor"]),"fill-pattern":new Hu(Q.paint_fill["fill-pattern"])}),layout:$1};const Gh=ms([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),em=ms([{name:"a_centroid",components:2,type:"Int16"}],4),{members:tm}=Gh;var qc={},vc=it,_r=bc;function bc(y,h,A,P,N){this.properties={},this.extent=A,this.type=0,this._pbf=y,this._geometry=-1,this._keys=P,this._values=N,y.readFields(im,this,h)}function im(y,h,A){y==1?h.id=A.readVarint():y==2?function(P,N){for(var q=P.readVarint()+P.pos;P.pos<q;){var Y=N._keys[P.readVarint()],oe=N._values[P.readVarint()];N.properties[Y]=oe}}(A,h):y==3?h.type=A.readVarint():y==4&&(h._geometry=A.pos)}function nm(y){for(var h,A,P=0,N=0,q=y.length,Y=q-1;N<q;Y=N++)P+=((A=y[Y]).x-(h=y[N]).x)*(h.y+A.y);return P}bc.types=["Unknown","Point","LineString","Polygon"],bc.prototype.loadGeometry=function(){var y=this._pbf;y.pos=this._geometry;for(var h,A=y.readVarint()+y.pos,P=1,N=0,q=0,Y=0,oe=[];y.pos<A;){if(N<=0){var fe=y.readVarint();P=7&fe,N=fe>>3}if(N--,P===1||P===2)q+=y.readSVarint(),Y+=y.readSVarint(),P===1&&(h&&oe.push(h),h=[]),h.push(new vc(q,Y));else{if(P!==7)throw new Error("unknown command "+P);h&&h.push(h[0].clone())}}return h&&oe.push(h),oe},bc.prototype.bbox=function(){var y=this._pbf;y.pos=this._geometry;for(var h=y.readVarint()+y.pos,A=1,P=0,N=0,q=0,Y=1/0,oe=-1/0,fe=1/0,xe=-1/0;y.pos<h;){if(P<=0){var Fe=y.readVarint();A=7&Fe,P=Fe>>3}if(P--,A===1||A===2)(N+=y.readSVarint())<Y&&(Y=N),N>oe&&(oe=N),(q+=y.readSVarint())<fe&&(fe=q),q>xe&&(xe=q);else if(A!==7)throw new Error("unknown command "+A)}return[Y,fe,oe,xe]},bc.prototype.toGeoJSON=function(y,h,A){var P,N,q=this.extent*Math.pow(2,A),Y=this.extent*y,oe=this.extent*h,fe=this.loadGeometry(),xe=bc.types[this.type];function Fe(lt){for(var ht=0;ht<lt.length;ht++){var Zt=lt[ht];lt[ht]=[360*(Zt.x+Y)/q-180,360/Math.PI*Math.atan(Math.exp((180-360*(Zt.y+oe)/q)*Math.PI/180))-90]}}switch(this.type){case 1:var Ve=[];for(P=0;P<fe.length;P++)Ve[P]=fe[P][0];Fe(fe=Ve);break;case 2:for(P=0;P<fe.length;P++)Fe(fe[P]);break;case 3:for(fe=function(lt){var ht=lt.length;if(ht<=1)return[lt];for(var Zt,Vt,vi=[],Fi=0;Fi<ht;Fi++){var gi=nm(lt[Fi]);gi!==0&&(Vt===void 0&&(Vt=gi<0),Vt===gi<0?(Zt&&vi.push(Zt),Zt=[lt[Fi]]):Zt.push(lt[Fi]))}return Zt&&vi.push(Zt),vi}(fe),P=0;P<fe.length;P++)for(N=0;N<fe[P].length;N++)Fe(fe[P][N])}fe.length===1?fe=fe[0]:xe="Multi"+xe;var tt={type:"Feature",geometry:{type:xe,coordinates:fe},properties:this.properties};return"id"in this&&(tt.id=this.id),tt};var rm=_r,pp=mp;function mp(y,h){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=y,this._keys=[],this._values=[],this._features=[],y.readFields(om,this,h),this.length=this._features.length}function om(y,h,A){y===15?h.version=A.readVarint():y===1?h.name=A.readString():y===5?h.extent=A.readVarint():y===2?h._features.push(A.pos):y===3?h._keys.push(A.readString()):y===4&&h._values.push(function(P){for(var N=null,q=P.readVarint()+P.pos;P.pos<q;){var Y=P.readVarint()>>3;N=Y===1?P.readString():Y===2?P.readFloat():Y===3?P.readDouble():Y===4?P.readVarint64():Y===5?P.readVarint():Y===6?P.readSVarint():Y===7?P.readBoolean():null}return N}(A))}mp.prototype.feature=function(y){if(y<0||y>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[y];var h=this._pbf.readVarint()+this._pbf.pos;return new rm(this._pbf,h,this.extent,this._keys,this._values)};var Tf=pp;function p0(y,h,A){if(y===3){var P=new Tf(A,A.readVarint()+A.pos);P.length&&(h[P.name]=P)}}qc.VectorTile=function(y,h){this.layers=y.readFields(p0,{},h)},qc.VectorTileFeature=_r,qc.VectorTileLayer=pp;const gp=qc.VectorTileFeature.types,fd=Math.pow(2,13);function Wh(y,h,A,P,N,q,Y,oe){y.emplaceBack(h,A,2*Math.floor(P*fd)+Y,N*fd*2,q*fd*2,Math.round(oe))}class Lf{constructor(h){this.zoom=h.zoom,this.overscaling=h.overscaling,this.layers=h.layers,this.layerIds=this.layers.map(A=>A.id),this.index=h.index,this.hasPattern=!1,this.layoutVertexArray=new be,this.centroidVertexArray=new j,this.indexArray=new wi,this.programConfigurations=new jo(h.layers,h.zoom),this.segments=new Wt,this.stateDependentLayerIds=this.layers.filter(A=>A.isStateDependent()).map(A=>A.id)}populate(h,A,P){this.features=[],this.hasPattern=If("fill-extrusion",this.layers,A);for(const{feature:N,id:q,index:Y,sourceLayerIndex:oe}of h){const fe=this.layers[0]._featureFilter.needGeometry,xe=ul(N,fe);if(!this.layers[0]._featureFilter.filter(new No(this.zoom),xe,P))continue;const Fe={id:q,sourceLayerIndex:oe,index:Y,geometry:fe?xe.geometry:Ha(N),properties:N.properties,type:N.type,patterns:{}};this.hasPattern?this.features.push(cd("fill-extrusion",this.layers,Fe,this.zoom,A)):this.addFeature(Fe,Fe.geometry,Y,P,{}),A.featureIndex.insert(N,Fe.geometry,Y,oe,this.index,!0)}}addFeatures(h,A,P){for(const N of this.features){const{geometry:q}=N;this.addFeature(N,q,N.index,A,P)}}update(h,A,P){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(h,A,this.stateDependentLayers,P)}isEmpty(){return this.layoutVertexArray.length===0&&this.centroidVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(h){this.uploaded||(this.layoutVertexBuffer=h.createVertexBuffer(this.layoutVertexArray,tm),this.centroidVertexBuffer=h.createVertexBuffer(this.centroidVertexArray,em.members,!0),this.indexBuffer=h.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(h),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.centroidVertexBuffer.destroy())}addFeature(h,A,P,N,q){const Y={x:0,y:0,vertexCount:0};for(const oe of d0(A,500)){let fe=0;for(const ht of oe)fe+=ht.length;let xe=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray);for(const ht of oe){if(ht.length===0||sm(ht))continue;let Zt=0;for(let Vt=0;Vt<ht.length;Vt++){const vi=ht[Vt];if(Vt>=1){const Fi=ht[Vt-1];if(!yp(vi,Fi)){xe.vertexLength+4>Wt.MAX_VERTEX_ARRAY_LENGTH&&(xe=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));const gi=vi.sub(Fi)._perp()._unit(),Li=Fi.dist(vi);Zt+Li>32768&&(Zt=0),Wh(this.layoutVertexArray,vi.x,vi.y,gi.x,gi.y,0,0,Zt),Wh(this.layoutVertexArray,vi.x,vi.y,gi.x,gi.y,0,1,Zt),Y.x+=2*vi.x,Y.y+=2*vi.y,Y.vertexCount+=2,Zt+=Li,Wh(this.layoutVertexArray,Fi.x,Fi.y,gi.x,gi.y,0,0,Zt),Wh(this.layoutVertexArray,Fi.x,Fi.y,gi.x,gi.y,0,1,Zt),Y.x+=2*Fi.x,Y.y+=2*Fi.y,Y.vertexCount+=2;const $i=xe.vertexLength;this.indexArray.emplaceBack($i,$i+2,$i+1),this.indexArray.emplaceBack($i+1,$i+2,$i+3),xe.vertexLength+=4,xe.primitiveLength+=2}}}}if(xe.vertexLength+fe>Wt.MAX_VERTEX_ARRAY_LENGTH&&(xe=this.segments.prepareSegment(fe,this.layoutVertexArray,this.indexArray)),gp[h.type]!=="Polygon")continue;const Fe=[],Ve=[],tt=xe.vertexLength;for(const ht of oe)if(ht.length!==0){ht!==oe[0]&&Ve.push(Fe.length/2);for(let Zt=0;Zt<ht.length;Zt++){const Vt=ht[Zt];Wh(this.layoutVertexArray,Vt.x,Vt.y,0,0,1,1,0),Y.x+=Vt.x,Y.y+=Vt.y,Y.vertexCount+=1,Fe.push(Vt.x),Fe.push(Vt.y)}}const lt=_c.exports(Fe,Ve);for(let ht=0;ht<lt.length;ht+=3)this.indexArray.emplaceBack(tt+lt[ht],tt+lt[ht+2],tt+lt[ht+1]);xe.primitiveLength+=lt.length/3,xe.vertexLength+=fe}for(let oe=0;oe<Y.vertexCount;oe++)this.centroidVertexArray.emplaceBack(Math.floor(Y.x/Y.vertexCount),Math.floor(Y.y/Y.vertexCount));this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,h,P,q,N)}}function yp(y,h){return y.x===h.x&&(y.x<0||y.x>Oo)||y.y===h.y&&(y.y<0||y.y>Oo)}function sm(y){return y.every(h=>h.x<0)||y.every(h=>h.x>Oo)||y.every(h=>h.y<0)||y.every(h=>h.y>Oo)}Pn("FillExtrusionBucket",Lf,{omit:["layers","features"]});var am={paint:new Ho({"fill-extrusion-opacity":new er(Q["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new yr(Q["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new er(Q["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new er(Q["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new Hu(Q["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new yr(Q["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new yr(Q["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new er(Q["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})};function Pf(y,h){return y.x*h.x+y.y*h.y}function _p(y,h){if(y.length===1){let A=0;const P=h[A++];let N;for(;!N||P.equals(N);)if(N=h[A++],!N)return 1/0;for(;A<h.length;A++){const q=h[A],Y=y[0],oe=N.sub(P),fe=q.sub(P),xe=Y.sub(P),Fe=Pf(oe,oe),Ve=Pf(oe,fe),tt=Pf(fe,fe),lt=Pf(xe,oe),ht=Pf(xe,fe),Zt=Fe*tt-Ve*Ve,Vt=(tt*lt-Ve*ht)/Zt,vi=(Fe*ht-Ve*lt)/Zt,Fi=P.z*(1-Vt-vi)+N.z*Vt+q.z*vi;if(isFinite(Fi))return Fi}return 1/0}{let A=1/0;for(const P of h)A=Math.min(A,P.z);return A}}const vp=ms([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:lm}=vp,n=ms([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:s}=n,a=qc.VectorTileFeature.types,g=Math.cos(Math.PI/180*37.5),k=Math.pow(2,14)/.5;class E{constructor(h){this.zoom=h.zoom,this.overscaling=h.overscaling,this.layers=h.layers,this.layerIds=this.layers.map(A=>A.id),this.index=h.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(A=>{this.gradients[A.id]={}}),this.layoutVertexArray=new je,this.layoutVertexArray2=new Ke,this.indexArray=new wi,this.programConfigurations=new jo(h.layers,h.zoom),this.segments=new Wt,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(A=>A.isStateDependent()).map(A=>A.id)}populate(h,A,P){this.hasPattern=If("line",this.layers,A);const N=this.layers[0].layout.get("line-sort-key"),q=!N.isConstant(),Y=[];for(const{feature:oe,id:fe,index:xe,sourceLayerIndex:Fe}of h){const Ve=this.layers[0]._featureFilter.needGeometry,tt=ul(oe,Ve);if(!this.layers[0]._featureFilter.filter(new No(this.zoom),tt,P))continue;const lt=q?N.evaluate(tt,{},P):void 0,ht={id:fe,properties:oe.properties,type:oe.type,sourceLayerIndex:Fe,index:xe,geometry:Ve?tt.geometry:Ha(oe),patterns:{},sortKey:lt};Y.push(ht)}q&&Y.sort((oe,fe)=>oe.sortKey-fe.sortKey);for(const oe of Y){const{geometry:fe,index:xe,sourceLayerIndex:Fe}=oe;if(this.hasPattern){const Ve=cd("line",this.layers,oe,this.zoom,A);this.patternFeatures.push(Ve)}else this.addFeature(oe,fe,xe,P,{});A.featureIndex.insert(h[xe].feature,fe,xe,Fe,this.index)}}update(h,A,P){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(h,A,this.stateDependentLayers,P)}addFeatures(h,A,P){for(const N of this.patternFeatures)this.addFeature(N,N.geometry,N.index,A,P)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(h){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=h.createVertexBuffer(this.layoutVertexArray2,s)),this.layoutVertexBuffer=h.createVertexBuffer(this.layoutVertexArray,lm),this.indexBuffer=h.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(h),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(h){if(h.properties&&Object.prototype.hasOwnProperty.call(h.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(h.properties,"mapbox_clip_end"))return{start:+h.properties.mapbox_clip_start,end:+h.properties.mapbox_clip_end}}addFeature(h,A,P,N,q){const Y=this.layers[0].layout,oe=Y.get("line-join").evaluate(h,{}),fe=Y.get("line-cap"),xe=Y.get("line-miter-limit"),Fe=Y.get("line-round-limit");this.lineClips=this.lineFeatureClips(h);for(const Ve of A)this.addLine(Ve,h,oe,fe,xe,Fe);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,h,P,q,N)}addLine(h,A,P,N,q,Y){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let vi=0;vi<h.length-1;vi++)this.totalDistance+=h[vi].dist(h[vi+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const oe=a[A.type]==="Polygon";let fe=h.length;for(;fe>=2&&h[fe-1].equals(h[fe-2]);)fe--;let xe=0;for(;xe<fe-1&&h[xe].equals(h[xe+1]);)xe++;if(fe<(oe?3:2))return;P==="bevel"&&(q=1.05);const Fe=this.overscaling<=16?122880/(512*this.overscaling):0,Ve=this.segments.prepareSegment(10*fe,this.layoutVertexArray,this.indexArray);let tt,lt,ht,Zt,Vt;this.e1=this.e2=-1,oe&&(tt=h[fe-2],Vt=h[xe].sub(tt)._unit()._perp());for(let vi=xe;vi<fe;vi++){if(ht=vi===fe-1?oe?h[xe+1]:void 0:h[vi+1],ht&&h[vi].equals(ht))continue;Vt&&(Zt=Vt),tt&&(lt=tt),tt=h[vi],Vt=ht?ht.sub(tt)._unit()._perp():Zt,Zt=Zt||Vt;let Fi=Zt.add(Vt);Fi.x===0&&Fi.y===0||Fi._unit();const gi=Zt.x*Vt.x+Zt.y*Vt.y,Li=Fi.x*Vt.x+Fi.y*Vt.y,$i=Li!==0?1/Li:1/0,Qi=2*Math.sqrt(2-2*Li),Xn=Li<g&&lt&&ht,ir=Zt.x*Vt.y-Zt.y*Vt.x>0;if(Xn&&vi>xe){const An=tt.dist(lt);if(An>2*Fe){const Vn=tt.sub(tt.sub(lt)._mult(Fe/An)._round());this.updateDistance(lt,Vn),this.addCurrentVertex(Vn,Zt,0,0,Ve),lt=Vn}}const Un=lt&&ht;let Mn=Un?P:oe?"butt":N;if(Un&&Mn==="round"&&($i<Y?Mn="miter":$i<=2&&(Mn="fakeround")),Mn==="miter"&&$i>q&&(Mn="bevel"),Mn==="bevel"&&($i>2&&(Mn="flipbevel"),$i<q&&(Mn="miter")),lt&&this.updateDistance(lt,tt),Mn==="miter")Fi._mult($i),this.addCurrentVertex(tt,Fi,0,0,Ve);else if(Mn==="flipbevel"){if($i>100)Fi=Vt.mult(-1);else{const An=$i*Zt.add(Vt).mag()/Zt.sub(Vt).mag();Fi._perp()._mult(An*(ir?-1:1))}this.addCurrentVertex(tt,Fi,0,0,Ve),this.addCurrentVertex(tt,Fi.mult(-1),0,0,Ve)}else if(Mn==="bevel"||Mn==="fakeround"){const An=-Math.sqrt($i*$i-1),Vn=ir?An:0,Bn=ir?0:An;if(lt&&this.addCurrentVertex(tt,Zt,Vn,Bn,Ve),Mn==="fakeround"){const pn=Math.round(180*Qi/Math.PI/20);for(let vr=1;vr<pn;vr++){let ar=vr/pn;if(ar!==.5){const ss=ar-.5;ar+=ar*ss*(ar-1)*((1.0904+gi*(gi*(3.55645-1.43519*gi)-3.2452))*ss*ss+(.848013+gi*(.215638*gi-1.06021)))}const Qr=Vt.sub(Zt)._mult(ar)._add(Zt)._unit()._mult(ir?-1:1);this.addHalfVertex(tt,Qr.x,Qr.y,!1,ir,0,Ve)}}ht&&this.addCurrentVertex(tt,Vt,-Vn,-Bn,Ve)}else if(Mn==="butt")this.addCurrentVertex(tt,Fi,0,0,Ve);else if(Mn==="square"){const An=lt?1:-1;this.addCurrentVertex(tt,Fi,An,An,Ve)}else Mn==="round"&&(lt&&(this.addCurrentVertex(tt,Zt,0,0,Ve),this.addCurrentVertex(tt,Zt,1,1,Ve,!0)),ht&&(this.addCurrentVertex(tt,Vt,-1,-1,Ve,!0),this.addCurrentVertex(tt,Vt,0,0,Ve)));if(Xn&&vi<fe-1){const An=tt.dist(ht);if(An>2*Fe){const Vn=tt.add(ht.sub(tt)._mult(Fe/An)._round());this.updateDistance(tt,Vn),this.addCurrentVertex(Vn,Vt,0,0,Ve),tt=Vn}}}}addCurrentVertex(h,A,P,N,q,Y=!1){const oe=A.y*N-A.x,fe=-A.y-A.x*N;this.addHalfVertex(h,A.x+A.y*P,A.y-A.x*P,Y,!1,P,q),this.addHalfVertex(h,oe,fe,Y,!0,-N,q),this.distance>k/2&&this.totalDistance===0&&(this.distance=0,this.addCurrentVertex(h,A,P,N,q,Y))}addHalfVertex({x:h,y:A},P,N,q,Y,oe,fe){const xe=.5*(this.lineClips?this.scaledDistance*(k-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((h<<1)+(q?1:0),(A<<1)+(Y?1:0),Math.round(63*P)+128,Math.round(63*N)+128,1+(oe===0?0:oe<0?-1:1)|(63&xe)<<2,xe>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);const Fe=fe.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,Fe),fe.primitiveLength++),Y?this.e2=Fe:this.e1=Fe}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(h,A){this.distance+=h.dist(A),this.updateScaledDistance()}}Pn("LineBucket",E,{omit:["layers","patternFeatures"]});const L=new Ho({"line-cap":new er(Q.layout_line["line-cap"]),"line-join":new yr(Q.layout_line["line-join"]),"line-miter-limit":new er(Q.layout_line["line-miter-limit"]),"line-round-limit":new er(Q.layout_line["line-round-limit"]),"line-sort-key":new yr(Q.layout_line["line-sort-key"])});var R={paint:new Ho({"line-opacity":new yr(Q.paint_line["line-opacity"]),"line-color":new yr(Q.paint_line["line-color"]),"line-translate":new er(Q.paint_line["line-translate"]),"line-translate-anchor":new er(Q.paint_line["line-translate-anchor"]),"line-width":new yr(Q.paint_line["line-width"]),"line-gap-width":new yr(Q.paint_line["line-gap-width"]),"line-offset":new yr(Q.paint_line["line-offset"]),"line-blur":new yr(Q.paint_line["line-blur"]),"line-dasharray":new cc(Q.paint_line["line-dasharray"]),"line-pattern":new Hu(Q.paint_line["line-pattern"]),"line-gradient":new bs(Q.paint_line["line-gradient"])}),layout:L};const G=new class extends yr{possiblyEvaluate(y,h){return h=new No(Math.floor(h.zoom),{now:h.now,fadeDuration:h.fadeDuration,zoomHistory:h.zoomHistory,transition:h.transition}),super.possiblyEvaluate(y,h)}evaluate(y,h,A,P){return h=C({},h,{zoom:Math.floor(h.zoom)}),super.evaluate(y,h,A,P)}}(R.paint.properties["line-width"].specification);function H(y,h){return h>0?h+2*y:y}G.useIntegerZoom=!0;const ee=ms([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),ce=ms([{name:"a_projected_pos",components:3,type:"Float32"}],4);ms([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const Ae=ms([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}]);ms([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const Ne=ms([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),Ze=ms([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function mt(y,h,A){return y.sections.forEach(P=>{P.text=function(N,q,Y){const oe=q.layout.get("text-transform").evaluate(Y,{});return oe==="uppercase"?N=N.toLocaleUpperCase():oe==="lowercase"&&(N=N.toLocaleLowerCase()),ya.applyArabicShaping&&(N=ya.applyArabicShaping(N)),N}(P.text,h,A)}),y}ms([{name:"triangle",components:3,type:"Uint16"}]),ms([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),ms([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),ms([{type:"Float32",name:"offsetX"}]),ms([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);const Tt={"!":"\uFE15","#":"\uFF03",$:"\uFF04","%":"\uFF05","&":"\uFF06","(":"\uFE35",")":"\uFE36","*":"\uFF0A","+":"\uFF0B",",":"\uFE10","-":"\uFE32",".":"\u30FB","/":"\uFF0F",":":"\uFE13",";":"\uFE14","<":"\uFE3F","=":"\uFF1D",">":"\uFE40","?":"\uFE16","@":"\uFF20","[":"\uFE47","\\":"\uFF3C","]":"\uFE48","^":"\uFF3E",_:"\uFE33","`":"\uFF40","{":"\uFE37","|":"\u2015","}":"\uFE38","~":"\uFF5E","\xA2":"\uFFE0","\xA3":"\uFFE1","\xA5":"\uFFE5","\xA6":"\uFFE4","\xAC":"\uFFE2","\xAF":"\uFFE3","\u2013":"\uFE32","\u2014":"\uFE31","\u2018":"\uFE43","\u2019":"\uFE44","\u201C":"\uFE41","\u201D":"\uFE42","\u2026":"\uFE19","\u2027":"\u30FB","\u20A9":"\uFFE6","\u3001":"\uFE11","\u3002":"\uFE12","\u3008":"\uFE3F","\u3009":"\uFE40","\u300A":"\uFE3D","\u300B":"\uFE3E","\u300C":"\uFE41","\u300D":"\uFE42","\u300E":"\uFE43","\u300F":"\uFE44","\u3010":"\uFE3B","\u3011":"\uFE3C","\u3014":"\uFE39","\u3015":"\uFE3A","\u3016":"\uFE17","\u3017":"\uFE18","\uFF01":"\uFE15","\uFF08":"\uFE35","\uFF09":"\uFE36","\uFF0C":"\uFE10","\uFF0D":"\uFE32","\uFF0E":"\u30FB","\uFF1A":"\uFE13","\uFF1B":"\uFE14","\uFF1C":"\uFE3F","\uFF1E":"\uFE40","\uFF1F":"\uFE16","\uFF3B":"\uFE47","\uFF3D":"\uFE48","\uFF3F":"\uFE33","\uFF5B":"\uFE37","\uFF5C":"\u2015","\uFF5D":"\uFE38","\uFF5F":"\uFE35","\uFF60":"\uFE36","\uFF61":"\uFE12","\uFF62":"\uFE41","\uFF63":"\uFE42"};var Ot=24,ni=ki,ci=function(y,h,A,P,N){var q,Y,oe=8*N-P-1,fe=(1<<oe)-1,xe=fe>>1,Fe=-7,Ve=A?N-1:0,tt=A?-1:1,lt=y[h+Ve];for(Ve+=tt,q=lt&(1<<-Fe)-1,lt>>=-Fe,Fe+=oe;Fe>0;q=256*q+y[h+Ve],Ve+=tt,Fe-=8);for(Y=q&(1<<-Fe)-1,q>>=-Fe,Fe+=P;Fe>0;Y=256*Y+y[h+Ve],Ve+=tt,Fe-=8);if(q===0)q=1-xe;else{if(q===fe)return Y?NaN:1/0*(lt?-1:1);Y+=Math.pow(2,P),q-=xe}return(lt?-1:1)*Y*Math.pow(2,q-P)},Mi=function(y,h,A,P,N,q){var Y,oe,fe,xe=8*q-N-1,Fe=(1<<xe)-1,Ve=Fe>>1,tt=N===23?Math.pow(2,-24)-Math.pow(2,-77):0,lt=P?0:q-1,ht=P?1:-1,Zt=h<0||h===0&&1/h<0?1:0;for(h=Math.abs(h),isNaN(h)||h===1/0?(oe=isNaN(h)?1:0,Y=Fe):(Y=Math.floor(Math.log(h)/Math.LN2),h*(fe=Math.pow(2,-Y))<1&&(Y--,fe*=2),(h+=Y+Ve>=1?tt/fe:tt*Math.pow(2,1-Ve))*fe>=2&&(Y++,fe/=2),Y+Ve>=Fe?(oe=0,Y=Fe):Y+Ve>=1?(oe=(h*fe-1)*Math.pow(2,N),Y+=Ve):(oe=h*Math.pow(2,Ve-1)*Math.pow(2,N),Y=0));N>=8;y[A+lt]=255&oe,lt+=ht,oe/=256,N-=8);for(Y=Y<<N|oe,xe+=N;xe>0;y[A+lt]=255&Y,lt+=ht,Y/=256,xe-=8);y[A+lt-ht]|=128*Zt};function ki(y){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(y)?y:new Uint8Array(y||0),this.pos=0,this.type=0,this.length=this.buf.length}ki.Varint=0,ki.Fixed64=1,ki.Bytes=2,ki.Fixed32=5;var Gi,sn=4294967296,vn=1/sn,or=typeof TextDecoder>"u"?null:new TextDecoder("utf8");function Ir(y){return y.type===ki.Bytes?y.readVarint()+y.pos:y.pos+1}function gs(y,h,A){return A?4294967296*h+(y>>>0):4294967296*(h>>>0)+(y>>>0)}function wa(y,h,A){var P=h<=16383?1:h<=2097151?2:h<=268435455?3:Math.floor(Math.log(h)/(7*Math.LN2));A.realloc(P);for(var N=A.pos-1;N>=y;N--)A.buf[N+P]=A.buf[N]}function hl(y,h){for(var A=0;A<y.length;A++)h.writeVarint(y[A])}function Zu(y,h){for(var A=0;A<y.length;A++)h.writeSVarint(y[A])}function Xh(y,h){for(var A=0;A<y.length;A++)h.writeFloat(y[A])}function S3(y,h){for(var A=0;A<y.length;A++)h.writeDouble(y[A])}function C3(y,h){for(var A=0;A<y.length;A++)h.writeBoolean(y[A])}function E3(y,h){for(var A=0;A<y.length;A++)h.writeFixed32(y[A])}function I3(y,h){for(var A=0;A<y.length;A++)h.writeSFixed32(y[A])}function T3(y,h){for(var A=0;A<y.length;A++)h.writeFixed64(y[A])}function L3(y,h){for(var A=0;A<y.length;A++)h.writeSFixed64(y[A])}function bp(y,h){return(y[h]|y[h+1]<<8|y[h+2]<<16)+16777216*y[h+3]}function m0(y,h,A){y[A]=h,y[A+1]=h>>>8,y[A+2]=h>>>16,y[A+3]=h>>>24}function ny(y,h){return(y[h]|y[h+1]<<8|y[h+2]<<16)+(y[h+3]<<24)}function P3(y,h,A){y===1&&A.readMessage(M3,h)}function M3(y,h,A){if(y===3){const{id:P,bitmap:N,width:q,height:Y,left:oe,top:fe,advance:xe}=A.readMessage(D3,{});h.push({id:P,bitmap:new yc({width:q+6,height:Y+6},N),metrics:{width:q,height:Y,left:oe,top:fe,advance:xe}})}}function D3(y,h,A){y===1?h.id=A.readVarint():y===2?h.bitmap=A.readBytes():y===3?h.width=A.readVarint():y===4?h.height=A.readVarint():y===5?h.left=A.readSVarint():y===6?h.top=A.readSVarint():y===7&&(h.advance=A.readVarint())}function ry(y){let h=0,A=0;for(const Y of y)h+=Y.w*Y.h,A=Math.max(A,Y.w);y.sort((Y,oe)=>oe.h-Y.h);const P=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(h/.95)),A),h:1/0}];let N=0,q=0;for(const Y of y)for(let oe=P.length-1;oe>=0;oe--){const fe=P[oe];if(!(Y.w>fe.w||Y.h>fe.h)){if(Y.x=fe.x,Y.y=fe.y,q=Math.max(q,Y.y+Y.h),N=Math.max(N,Y.x+Y.w),Y.w===fe.w&&Y.h===fe.h){const xe=P.pop();oe<P.length&&(P[oe]=xe)}else Y.h===fe.h?(fe.x+=Y.w,fe.w-=Y.w):Y.w===fe.w?(fe.y+=Y.h,fe.h-=Y.h):(P.push({x:fe.x+Y.w,y:fe.y,w:fe.w-Y.w,h:Y.h}),fe.y+=Y.h,fe.h-=Y.h);break}}return{w:N,h:q,fill:h/(N*q)||0}}ki.prototype={destroy:function(){this.buf=null},readFields:function(y,h,A){for(A=A||this.length;this.pos<A;){var P=this.readVarint(),N=P>>3,q=this.pos;this.type=7&P,y(N,h,this),this.pos===q&&this.skip(P)}return h},readMessage:function(y,h){return this.readFields(y,h,this.readVarint()+this.pos)},readFixed32:function(){var y=bp(this.buf,this.pos);return this.pos+=4,y},readSFixed32:function(){var y=ny(this.buf,this.pos);return this.pos+=4,y},readFixed64:function(){var y=bp(this.buf,this.pos)+bp(this.buf,this.pos+4)*sn;return this.pos+=8,y},readSFixed64:function(){var y=bp(this.buf,this.pos)+ny(this.buf,this.pos+4)*sn;return this.pos+=8,y},readFloat:function(){var y=ci(this.buf,this.pos,!0,23,4);return this.pos+=4,y},readDouble:function(){var y=ci(this.buf,this.pos,!0,52,8);return this.pos+=8,y},readVarint:function(y){var h,A,P=this.buf;return h=127&(A=P[this.pos++]),A<128?h:(h|=(127&(A=P[this.pos++]))<<7,A<128?h:(h|=(127&(A=P[this.pos++]))<<14,A<128?h:(h|=(127&(A=P[this.pos++]))<<21,A<128?h:function(N,q,Y){var oe,fe,xe=Y.buf;if(oe=(112&(fe=xe[Y.pos++]))>>4,fe<128||(oe|=(127&(fe=xe[Y.pos++]))<<3,fe<128)||(oe|=(127&(fe=xe[Y.pos++]))<<10,fe<128)||(oe|=(127&(fe=xe[Y.pos++]))<<17,fe<128)||(oe|=(127&(fe=xe[Y.pos++]))<<24,fe<128)||(oe|=(1&(fe=xe[Y.pos++]))<<31,fe<128))return gs(N,oe,q);throw new Error("Expected varint not more than 10 bytes")}(h|=(15&(A=P[this.pos]))<<28,y,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var y=this.readVarint();return y%2==1?(y+1)/-2:y/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var y=this.readVarint()+this.pos,h=this.pos;return this.pos=y,y-h>=12&&or?function(A,P,N){return or.decode(A.subarray(P,N))}(this.buf,h,y):function(A,P,N){for(var q="",Y=P;Y<N;){var oe,fe,xe,Fe=A[Y],Ve=null,tt=Fe>239?4:Fe>223?3:Fe>191?2:1;if(Y+tt>N)break;tt===1?Fe<128&&(Ve=Fe):tt===2?(192&(oe=A[Y+1]))==128&&(Ve=(31&Fe)<<6|63&oe)<=127&&(Ve=null):tt===3?(fe=A[Y+2],(192&(oe=A[Y+1]))==128&&(192&fe)==128&&((Ve=(15&Fe)<<12|(63&oe)<<6|63&fe)<=2047||Ve>=55296&&Ve<=57343)&&(Ve=null)):tt===4&&(fe=A[Y+2],xe=A[Y+3],(192&(oe=A[Y+1]))==128&&(192&fe)==128&&(192&xe)==128&&((Ve=(15&Fe)<<18|(63&oe)<<12|(63&fe)<<6|63&xe)<=65535||Ve>=1114112)&&(Ve=null)),Ve===null?(Ve=65533,tt=1):Ve>65535&&(Ve-=65536,q+=String.fromCharCode(Ve>>>10&1023|55296),Ve=56320|1023&Ve),q+=String.fromCharCode(Ve),Y+=tt}return q}(this.buf,h,y)},readBytes:function(){var y=this.readVarint()+this.pos,h=this.buf.subarray(this.pos,y);return this.pos=y,h},readPackedVarint:function(y,h){if(this.type!==ki.Bytes)return y.push(this.readVarint(h));var A=Ir(this);for(y=y||[];this.pos<A;)y.push(this.readVarint(h));return y},readPackedSVarint:function(y){if(this.type!==ki.Bytes)return y.push(this.readSVarint());var h=Ir(this);for(y=y||[];this.pos<h;)y.push(this.readSVarint());return y},readPackedBoolean:function(y){if(this.type!==ki.Bytes)return y.push(this.readBoolean());var h=Ir(this);for(y=y||[];this.pos<h;)y.push(this.readBoolean());return y},readPackedFloat:function(y){if(this.type!==ki.Bytes)return y.push(this.readFloat());var h=Ir(this);for(y=y||[];this.pos<h;)y.push(this.readFloat());return y},readPackedDouble:function(y){if(this.type!==ki.Bytes)return y.push(this.readDouble());var h=Ir(this);for(y=y||[];this.pos<h;)y.push(this.readDouble());return y},readPackedFixed32:function(y){if(this.type!==ki.Bytes)return y.push(this.readFixed32());var h=Ir(this);for(y=y||[];this.pos<h;)y.push(this.readFixed32());return y},readPackedSFixed32:function(y){if(this.type!==ki.Bytes)return y.push(this.readSFixed32());var h=Ir(this);for(y=y||[];this.pos<h;)y.push(this.readSFixed32());return y},readPackedFixed64:function(y){if(this.type!==ki.Bytes)return y.push(this.readFixed64());var h=Ir(this);for(y=y||[];this.pos<h;)y.push(this.readFixed64());return y},readPackedSFixed64:function(y){if(this.type!==ki.Bytes)return y.push(this.readSFixed64());var h=Ir(this);for(y=y||[];this.pos<h;)y.push(this.readSFixed64());return y},skip:function(y){var h=7&y;if(h===ki.Varint)for(;this.buf[this.pos++]>127;);else if(h===ki.Bytes)this.pos=this.readVarint()+this.pos;else if(h===ki.Fixed32)this.pos+=4;else{if(h!==ki.Fixed64)throw new Error("Unimplemented type: "+h);this.pos+=8}},writeTag:function(y,h){this.writeVarint(y<<3|h)},realloc:function(y){for(var h=this.length||16;h<this.pos+y;)h*=2;if(h!==this.length){var A=new Uint8Array(h);A.set(this.buf),this.buf=A,this.length=h}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(y){this.realloc(4),m0(this.buf,y,this.pos),this.pos+=4},writeSFixed32:function(y){this.realloc(4),m0(this.buf,y,this.pos),this.pos+=4},writeFixed64:function(y){this.realloc(8),m0(this.buf,-1&y,this.pos),m0(this.buf,Math.floor(y*vn),this.pos+4),this.pos+=8},writeSFixed64:function(y){this.realloc(8),m0(this.buf,-1&y,this.pos),m0(this.buf,Math.floor(y*vn),this.pos+4),this.pos+=8},writeVarint:function(y){(y=+y||0)>268435455||y<0?function(h,A){var P,N;if(h>=0?(P=h%4294967296|0,N=h/4294967296|0):(N=~(-h/4294967296),4294967295^(P=~(-h%4294967296))?P=P+1|0:(P=0,N=N+1|0)),h>=18446744073709552e3||h<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");A.realloc(10),function(q,Y,oe){oe.buf[oe.pos++]=127&q|128,q>>>=7,oe.buf[oe.pos++]=127&q|128,q>>>=7,oe.buf[oe.pos++]=127&q|128,q>>>=7,oe.buf[oe.pos++]=127&q|128,oe.buf[oe.pos]=127&(q>>>=7)}(P,0,A),function(q,Y){var oe=(7&q)<<4;Y.buf[Y.pos++]|=oe|((q>>>=3)?128:0),q&&(Y.buf[Y.pos++]=127&q|((q>>>=7)?128:0),q&&(Y.buf[Y.pos++]=127&q|((q>>>=7)?128:0),q&&(Y.buf[Y.pos++]=127&q|((q>>>=7)?128:0),q&&(Y.buf[Y.pos++]=127&q|((q>>>=7)?128:0),q&&(Y.buf[Y.pos++]=127&q)))))}(N,A)}(y,this):(this.realloc(4),this.buf[this.pos++]=127&y|(y>127?128:0),y<=127||(this.buf[this.pos++]=127&(y>>>=7)|(y>127?128:0),y<=127||(this.buf[this.pos++]=127&(y>>>=7)|(y>127?128:0),y<=127||(this.buf[this.pos++]=y>>>7&127))))},writeSVarint:function(y){this.writeVarint(y<0?2*-y-1:2*y)},writeBoolean:function(y){this.writeVarint(Boolean(y))},writeString:function(y){y=String(y),this.realloc(4*y.length),this.pos++;var h=this.pos;this.pos=function(P,N,q){for(var Y,oe,fe=0;fe<N.length;fe++){if((Y=N.charCodeAt(fe))>55295&&Y<57344){if(!oe){Y>56319||fe+1===N.length?(P[q++]=239,P[q++]=191,P[q++]=189):oe=Y;continue}if(Y<56320){P[q++]=239,P[q++]=191,P[q++]=189,oe=Y;continue}Y=oe-55296<<10|Y-56320|65536,oe=null}else oe&&(P[q++]=239,P[q++]=191,P[q++]=189,oe=null);Y<128?P[q++]=Y:(Y<2048?P[q++]=Y>>6|192:(Y<65536?P[q++]=Y>>12|224:(P[q++]=Y>>18|240,P[q++]=Y>>12&63|128),P[q++]=Y>>6&63|128),P[q++]=63&Y|128)}return q}(this.buf,y,this.pos);var A=this.pos-h;A>=128&&wa(h,A,this),this.pos=h-1,this.writeVarint(A),this.pos+=A},writeFloat:function(y){this.realloc(4),Mi(this.buf,y,this.pos,!0,23,4),this.pos+=4},writeDouble:function(y){this.realloc(8),Mi(this.buf,y,this.pos,!0,52,8),this.pos+=8},writeBytes:function(y){var h=y.length;this.writeVarint(h),this.realloc(h);for(var A=0;A<h;A++)this.buf[this.pos++]=y[A]},writeRawMessage:function(y,h){this.pos++;var A=this.pos;y(h,this);var P=this.pos-A;P>=128&&wa(A,P,this),this.pos=A-1,this.writeVarint(P),this.pos+=P},writeMessage:function(y,h,A){this.writeTag(y,ki.Bytes),this.writeRawMessage(h,A)},writePackedVarint:function(y,h){h.length&&this.writeMessage(y,hl,h)},writePackedSVarint:function(y,h){h.length&&this.writeMessage(y,Zu,h)},writePackedBoolean:function(y,h){h.length&&this.writeMessage(y,C3,h)},writePackedFloat:function(y,h){h.length&&this.writeMessage(y,Xh,h)},writePackedDouble:function(y,h){h.length&&this.writeMessage(y,S3,h)},writePackedFixed32:function(y,h){h.length&&this.writeMessage(y,E3,h)},writePackedSFixed32:function(y,h){h.length&&this.writeMessage(y,I3,h)},writePackedFixed64:function(y,h){h.length&&this.writeMessage(y,T3,h)},writePackedSFixed64:function(y,h){h.length&&this.writeMessage(y,L3,h)},writeBytesField:function(y,h){this.writeTag(y,ki.Bytes),this.writeBytes(h)},writeFixed32Field:function(y,h){this.writeTag(y,ki.Fixed32),this.writeFixed32(h)},writeSFixed32Field:function(y,h){this.writeTag(y,ki.Fixed32),this.writeSFixed32(h)},writeFixed64Field:function(y,h){this.writeTag(y,ki.Fixed64),this.writeFixed64(h)},writeSFixed64Field:function(y,h){this.writeTag(y,ki.Fixed64),this.writeSFixed64(h)},writeVarintField:function(y,h){this.writeTag(y,ki.Varint),this.writeVarint(h)},writeSVarintField:function(y,h){this.writeTag(y,ki.Varint),this.writeSVarint(h)},writeStringField:function(y,h){this.writeTag(y,ki.Bytes),this.writeString(h)},writeFloatField:function(y,h){this.writeTag(y,ki.Fixed32),this.writeFloat(h)},writeDoubleField:function(y,h){this.writeTag(y,ki.Fixed64),this.writeDouble(h)},writeBooleanField:function(y,h){this.writeVarintField(y,Boolean(h))}};class um{constructor(h,{pixelRatio:A,version:P,stretchX:N,stretchY:q,content:Y}){this.paddedRect=h,this.pixelRatio=A,this.stretchX=N,this.stretchY=q,this.content=Y,this.version=P}get tl(){return[this.paddedRect.x+1,this.paddedRect.y+1]}get br(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]}}class oy{constructor(h,A){const P={},N={};this.haveRenderCallbacks=[];const q=[];this.addImages(h,P,q),this.addImages(A,N,q);const{w:Y,h:oe}=ry(q),fe=new va({width:Y||1,height:oe||1});for(const xe in h){const Fe=h[xe],Ve=P[xe].paddedRect;va.copy(Fe.data,fe,{x:0,y:0},{x:Ve.x+1,y:Ve.y+1},Fe.data)}for(const xe in A){const Fe=A[xe],Ve=N[xe].paddedRect,tt=Ve.x+1,lt=Ve.y+1,ht=Fe.data.width,Zt=Fe.data.height;va.copy(Fe.data,fe,{x:0,y:0},{x:tt,y:lt},Fe.data),va.copy(Fe.data,fe,{x:0,y:Zt-1},{x:tt,y:lt-1},{width:ht,height:1}),va.copy(Fe.data,fe,{x:0,y:0},{x:tt,y:lt+Zt},{width:ht,height:1}),va.copy(Fe.data,fe,{x:ht-1,y:0},{x:tt-1,y:lt},{width:1,height:Zt}),va.copy(Fe.data,fe,{x:0,y:0},{x:tt+ht,y:lt},{width:1,height:Zt})}this.image=fe,this.iconPositions=P,this.patternPositions=N}addImages(h,A,P){for(const N in h){const q=h[N],Y={x:0,y:0,w:q.data.width+2,h:q.data.height+2};P.push(Y),A[N]=new um(Y,q),q.hasRenderCallback&&this.haveRenderCallbacks.push(N)}}patchUpdatedImages(h,A){h.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const P in h.updatedImages)this.patchUpdatedImage(this.iconPositions[P],h.getImage(P),A),this.patchUpdatedImage(this.patternPositions[P],h.getImage(P),A)}patchUpdatedImage(h,A,P){if(!h||!A||h.version===A.version)return;h.version=A.version;const[N,q]=h.tl;P.update(A.data,void 0,{x:N,y:q})}}Pn("ImagePosition",um),Pn("ImageAtlas",oy),r.WritingMode=void 0,(Gi=r.WritingMode||(r.WritingMode={}))[Gi.none=0]="none",Gi[Gi.horizontal=1]="horizontal",Gi[Gi.vertical=2]="vertical",Gi[Gi.horizontalOnly=3]="horizontalOnly";const wp=-17;class dd{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(h,A){const P=new dd;return P.scale=h||1,P.fontStack=A,P}static forImage(h){const A=new dd;return A.imageName=h,A}}class g0{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(h,A){const P=new g0;for(let N=0;N<h.sections.length;N++){const q=h.sections[N];q.image?P.addImageSection(q):P.addTextSection(q,A)}return P}length(){return this.text.length}getSection(h){return this.sections[this.sectionIndex[h]]}getSectionIndex(h){return this.sectionIndex[h]}getCharCode(h){return this.text.charCodeAt(h)}verticalizePunctuation(){this.text=function(h){let A="";for(let P=0;P<h.length;P++){const N=h.charCodeAt(P+1)||null,q=h.charCodeAt(P-1)||null;A+=N&&uh(N)&&!Tt[h[P+1]]||q&&uh(q)&&!Tt[h[P-1]]||!Tt[h[P]]?h[P]:Tt[h[P]]}return A}(this.text)}trim(){let h=0;for(let P=0;P<this.text.length&&Ap[this.text.charCodeAt(P)];P++)h++;let A=this.text.length;for(let P=this.text.length-1;P>=0&&P>=h&&Ap[this.text.charCodeAt(P)];P--)A--;this.text=this.text.substring(h,A),this.sectionIndex=this.sectionIndex.slice(h,A)}substring(h,A){const P=new g0;return P.text=this.text.substring(h,A),P.sectionIndex=this.sectionIndex.slice(h,A),P.sections=this.sections,P}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((h,A)=>Math.max(h,this.sections[A].scale),0)}addTextSection(h,A){this.text+=h.text,this.sections.push(dd.forText(h.scale,h.fontStack||A));const P=this.sections.length-1;for(let N=0;N<h.text.length;++N)this.sectionIndex.push(P)}addImageSection(h){const A=h.image?h.image.name:"";if(A.length===0)return void Z("Can't add FormattedSection with an empty image.");const P=this.getNextImageSectionCharCode();P?(this.text+=String.fromCharCode(P),this.sections.push(dd.forImage(A)),this.sectionIndex.push(this.sections.length-1)):Z("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function xp(y,h,A,P,N,q,Y,oe,fe,xe,Fe,Ve,tt,lt,ht,Zt){const Vt=g0.fromFeature(y,N);let vi;Ve===r.WritingMode.vertical&&Vt.verticalizePunctuation();const{processBidirectionalText:Fi,processStyledBidirectionalText:gi}=ya;if(Fi&&Vt.sections.length===1){vi=[];const Qi=Fi(Vt.toString(),cm(Vt,xe,q,h,P,lt,ht));for(const Xn of Qi){const ir=new g0;ir.text=Xn,ir.sections=Vt.sections;for(let Un=0;Un<Xn.length;Un++)ir.sectionIndex.push(0);vi.push(ir)}}else if(gi){vi=[];const Qi=gi(Vt.text,Vt.sectionIndex,cm(Vt,xe,q,h,P,lt,ht));for(const Xn of Qi){const ir=new g0;ir.text=Xn[0],ir.sectionIndex=Xn[1],ir.sections=Vt.sections,vi.push(ir)}}else vi=function(Qi,Xn){const ir=[],Un=Qi.text;let Mn=0;for(const An of Xn)ir.push(Qi.substring(Mn,An)),Mn=An;return Mn<Un.length&&ir.push(Qi.substring(Mn,Un.length)),ir}(Vt,cm(Vt,xe,q,h,P,lt,ht));const Li=[],$i={positionedLines:Li,text:Vt.toString(),top:Fe[1],bottom:Fe[1],left:Fe[0],right:Fe[0],writingMode:Ve,iconsInText:!1,verticalizable:!1};return function(Qi,Xn,ir,Un,Mn,An,Vn,Bn,pn,vr,ar,Qr){let ss=0,cs=wp,Qs=0,Eu=0;const Oa=Bn==="right"?1:Bn==="left"?0:.5;let Ws=0;for(const Xs of Mn){Xs.trim();const Ra=Xs.getMaxScale(),Ya=(Ra-1)*Ot,fl={positionedGlyphs:[],lineOffset:0};Qi.positionedLines[Ws]=fl;const Ml=fl.positionedGlyphs;let Dl=0;if(!Xs.length()){cs+=An,++Ws;continue}for(let ua=0;ua<Xs.length();ua++){const no=Xs.getSection(ua),iu=Xs.getSectionIndex(ua),Ba=Xs.getCharCode(ua);let Za=0,Ku=null,wc=null,xc=null,vh=Ot;const Ju=!(pn===r.WritingMode.horizontal||!ar&&!Fc(Ba)||ar&&(Ap[Ba]||(la=Ba,yn.Arabic(la)||yn["Arabic Supplement"](la)||yn["Arabic Extended-A"](la)||yn["Arabic Presentation Forms-A"](la)||yn["Arabic Presentation Forms-B"](la))));if(no.imageName){const Iu=Un[no.imageName];if(!Iu)continue;xc=no.imageName,Qi.iconsInText=Qi.iconsInText||!0,wc=Iu.paddedRect;const Ol=Iu.displaySize;no.scale=no.scale*Ot/Qr,Ku={width:Ol[0],height:Ol[1],left:1,top:-3,advance:Ju?Ol[1]:Ol[0]},Za=Ya+(Ot-Ol[1]*no.scale),vh=Ku.advance;const bh=Ju?Ol[0]*no.scale-Ot*Ra:Ol[1]*no.scale-Ot*Ra;bh>0&&bh>Dl&&(Dl=bh)}else{const Iu=ir[no.fontStack],Ol=Iu&&Iu[Ba];if(Ol&&Ol.rect)wc=Ol.rect,Ku=Ol.metrics;else{const bh=Xn[no.fontStack],gd=bh&&bh[Ba];if(!gd)continue;Ku=gd.metrics}Za=(Ra-no.scale)*Ot}Ju?(Qi.verticalizable=!0,Ml.push({glyph:Ba,imageName:xc,x:ss,y:cs+Za,vertical:Ju,scale:no.scale,fontStack:no.fontStack,sectionIndex:iu,metrics:Ku,rect:wc}),ss+=vh*no.scale+vr):(Ml.push({glyph:Ba,imageName:xc,x:ss,y:cs+Za,vertical:Ju,scale:no.scale,fontStack:no.fontStack,sectionIndex:iu,metrics:Ku,rect:wc}),ss+=Ku.advance*no.scale+vr)}Ml.length!==0&&(Qs=Math.max(ss-vr,Qs),R3(Ml,0,Ml.length-1,Oa,Dl)),ss=0;const ys=An*Ra+Dl;fl.lineOffset=Math.max(Dl,Ya),cs+=ys,Eu=Math.max(ys,Eu),++Ws}var la;const Fa=cs-wp,{horizontalAlign:Xa,verticalAlign:Pl}=hm(Vn);(function(Xs,Ra,Ya,fl,Ml,Dl,ys,ua,no){const iu=(Ra-Ya)*Ml;let Ba=0;Ba=Dl!==ys?-ua*fl-wp:(-fl*no+.5)*ys;for(const Za of Xs)for(const Ku of Za.positionedGlyphs)Ku.x+=iu,Ku.y+=Ba})(Qi.positionedLines,Oa,Xa,Pl,Qs,Eu,An,Fa,Mn.length),Qi.top+=-Pl*Fa,Qi.bottom=Qi.top+Fa,Qi.left+=-Xa*Qs,Qi.right=Qi.left+Qs}($i,h,A,P,vi,Y,oe,fe,Ve,xe,tt,Zt),!function(Qi){for(const Xn of Qi)if(Xn.positionedGlyphs.length!==0)return!1;return!0}(Li)&&$i}const Ap={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},O3={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0};function sy(y,h,A,P,N,q){if(h.imageName){const Y=P[h.imageName];return Y?Y.displaySize[0]*h.scale*Ot/q+N:0}{const Y=A[h.fontStack],oe=Y&&Y[y];return oe?oe.metrics.advance*h.scale+N:0}}function ay(y,h,A,P){const N=Math.pow(y-h,2);return P?y<h?N/2:2*N:N+Math.abs(A)*A}function F3(y,h,A){let P=0;return y===10&&(P-=1e4),A&&(P+=150),y!==40&&y!==65288||(P+=50),h!==41&&h!==65289||(P+=50),P}function ly(y,h,A,P,N,q){let Y=null,oe=ay(h,A,N,q);for(const fe of P){const xe=ay(h-fe.x,A,N,q)+fe.badness;xe<=oe&&(Y=fe,oe=xe)}return{index:y,x:h,priorBreak:Y,badness:oe}}function uy(y){return y?uy(y.priorBreak).concat(y.index):[]}function cm(y,h,A,P,N,q,Y){if(q!=="point")return[];if(!y)return[];const oe=[],fe=function(tt,lt,ht,Zt,Vt,vi){let Fi=0;for(let gi=0;gi<tt.length();gi++){const Li=tt.getSection(gi);Fi+=sy(tt.getCharCode(gi),Li,Zt,Vt,lt,vi)}return Fi/Math.max(1,Math.ceil(Fi/ht))}(y,h,A,P,N,Y),xe=y.text.indexOf("\u200B")>=0;let Fe=0;for(let tt=0;tt<y.length();tt++){const lt=y.getSection(tt),ht=y.getCharCode(tt);if(Ap[ht]||(Fe+=sy(ht,lt,P,N,h,Y)),tt<y.length()-1){const Zt=!((Ve=ht)<11904||!(yn["Bopomofo Extended"](Ve)||yn.Bopomofo(Ve)||yn["CJK Compatibility Forms"](Ve)||yn["CJK Compatibility Ideographs"](Ve)||yn["CJK Compatibility"](Ve)||yn["CJK Radicals Supplement"](Ve)||yn["CJK Strokes"](Ve)||yn["CJK Symbols and Punctuation"](Ve)||yn["CJK Unified Ideographs Extension A"](Ve)||yn["CJK Unified Ideographs"](Ve)||yn["Enclosed CJK Letters and Months"](Ve)||yn["Halfwidth and Fullwidth Forms"](Ve)||yn.Hiragana(Ve)||yn["Ideographic Description Characters"](Ve)||yn["Kangxi Radicals"](Ve)||yn["Katakana Phonetic Extensions"](Ve)||yn.Katakana(Ve)||yn["Vertical Forms"](Ve)||yn["Yi Radicals"](Ve)||yn["Yi Syllables"](Ve)));(O3[ht]||Zt||lt.imageName)&&oe.push(ly(tt+1,Fe,fe,oe,F3(ht,y.getCharCode(tt+1),Zt&&xe),!1))}}var Ve;return uy(ly(y.length(),Fe,fe,oe,0,!0))}function hm(y){let h=.5,A=.5;switch(y){case"right":case"top-right":case"bottom-right":h=1;break;case"left":case"top-left":case"bottom-left":h=0}switch(y){case"bottom":case"bottom-right":case"bottom-left":A=1;break;case"top":case"top-right":case"top-left":A=0}return{horizontalAlign:h,verticalAlign:A}}function R3(y,h,A,P,N){if(!P&&!N)return;const q=y[A],Y=(y[A].x+q.metrics.advance*q.scale)*P;for(let oe=h;oe<=A;oe++)y[oe].x-=Y,y[oe].y+=N}function B3(y,h,A){const{horizontalAlign:P,verticalAlign:N}=hm(A),q=h[0]-y.displaySize[0]*P,Y=h[1]-y.displaySize[1]*N;return{image:y,top:Y,bottom:Y+y.displaySize[1],left:q,right:q+y.displaySize[0]}}function cy(y,h,A,P,N,q){const Y=y.image;let oe;if(Y.content){const Vt=Y.content,vi=Y.pixelRatio||1;oe=[Vt[0]/vi,Vt[1]/vi,Y.displaySize[0]-Vt[2]/vi,Y.displaySize[1]-Vt[3]/vi]}const fe=h.left*q,xe=h.right*q;let Fe,Ve,tt,lt;A==="width"||A==="both"?(lt=N[0]+fe-P[3],Ve=N[0]+xe+P[1]):(lt=N[0]+(fe+xe-Y.displaySize[0])/2,Ve=lt+Y.displaySize[0]);const ht=h.top*q,Zt=h.bottom*q;return A==="height"||A==="both"?(Fe=N[1]+ht-P[0],tt=N[1]+Zt+P[2]):(Fe=N[1]+(ht+Zt-Y.displaySize[1])/2,tt=Fe+Y.displaySize[1]),{image:Y,top:Fe,right:Ve,bottom:tt,left:lt,collisionPadding:oe}}const _h=128;function hy(y,h){const{expression:A}=h;if(A.kind==="constant")return{kind:"constant",layoutSize:A.evaluate(new No(y+1))};if(A.kind==="source")return{kind:"source"};{const{zoomStops:P,interpolationType:N}=A;let q=0;for(;q<P.length&&P[q]<=y;)q++;q=Math.max(0,q-1);let Y=q;for(;Y<P.length&&P[Y]<y+1;)Y++;Y=Math.min(P.length-1,Y);const oe=P[q],fe=P[Y];return A.kind==="composite"?{kind:"composite",minZoom:oe,maxZoom:fe,interpolationType:N}:{kind:"camera",minZoom:oe,maxZoom:fe,minSize:A.evaluate(new No(oe)),maxSize:A.evaluate(new No(fe)),interpolationType:N}}}class Yh extends it{constructor(h,A,P,N){super(h,A),this.angle=P,N!==void 0&&(this.segment=N)}clone(){return new Yh(this.x,this.y,this.angle,this.segment)}}function fy(y,h,A,P,N){if(h.segment===void 0)return!0;let q=h,Y=h.segment+1,oe=0;for(;oe>-A/2;){if(Y--,Y<0)return!1;oe-=y[Y].dist(q),q=y[Y]}oe+=y[Y].dist(y[Y+1]),Y++;const fe=[];let xe=0;for(;oe<A/2;){const Fe=y[Y],Ve=y[Y+1];if(!Ve)return!1;let tt=y[Y-1].angleTo(Fe)-Fe.angleTo(Ve);for(tt=Math.abs((tt+3*Math.PI)%(2*Math.PI)-Math.PI),fe.push({distance:oe,angleDelta:tt}),xe+=tt;oe-fe[0].distance>P;)xe-=fe.shift().angleDelta;if(xe>N)return!1;Y++,oe+=Fe.dist(Ve)}return!0}function dy(y){let h=0;for(let A=0;A<y.length-1;A++)h+=y[A].dist(y[A+1]);return h}function py(y,h,A){return y?.6*h*A:0}function my(y,h){return Math.max(y?y.right-y.left:0,h?h.right-h.left:0)}function z3(y,h,A,P,N,q){const Y=py(A,N,q),oe=my(A,P)*q;let fe=0;const xe=dy(y)/2;for(let Fe=0;Fe<y.length-1;Fe++){const Ve=y[Fe],tt=y[Fe+1],lt=Ve.dist(tt);if(fe+lt>xe){const ht=(xe-fe)/lt,Zt=Io(Ve.x,tt.x,ht),Vt=Io(Ve.y,tt.y,ht),vi=new Yh(Zt,Vt,tt.angleTo(Ve),Fe);return vi._round(),!Y||fy(y,vi,oe,Y,h)?vi:void 0}fe+=lt}}function N3(y,h,A,P,N,q,Y,oe,fe){const xe=py(P,q,Y),Fe=my(P,N),Ve=Fe*Y,tt=y[0].x===0||y[0].x===fe||y[0].y===0||y[0].y===fe;return h-Ve<h/4&&(h=Ve+h/4),gy(y,tt?h/2*oe%h:(Fe/2+2*q)*Y*oe%h,h,xe,A,Ve,tt,!1,fe)}function gy(y,h,A,P,N,q,Y,oe,fe){const xe=q/2,Fe=dy(y);let Ve=0,tt=h-A,lt=[];for(let ht=0;ht<y.length-1;ht++){const Zt=y[ht],Vt=y[ht+1],vi=Zt.dist(Vt),Fi=Vt.angleTo(Zt);for(;tt+A<Ve+vi;){tt+=A;const gi=(tt-Ve)/vi,Li=Io(Zt.x,Vt.x,gi),$i=Io(Zt.y,Vt.y,gi);if(Li>=0&&Li<fe&&$i>=0&&$i<fe&&tt-xe>=0&&tt+xe<=Fe){const Qi=new Yh(Li,$i,Fi,ht);Qi._round(),P&&!fy(y,Qi,q,P,N)||lt.push(Qi)}}Ve+=vi}return oe||lt.length||Y||(lt=gy(y,Ve/2,A,P,N,q,Y,!0,fe)),lt}function yy(y,h,A,P,N){const q=[];for(let Y=0;Y<y.length;Y++){const oe=y[Y];let fe;for(let xe=0;xe<oe.length-1;xe++){let Fe=oe[xe],Ve=oe[xe+1];Fe.x<h&&Ve.x<h||(Fe.x<h?Fe=new it(h,Fe.y+(h-Fe.x)/(Ve.x-Fe.x)*(Ve.y-Fe.y))._round():Ve.x<h&&(Ve=new it(h,Fe.y+(h-Fe.x)/(Ve.x-Fe.x)*(Ve.y-Fe.y))._round()),Fe.y<A&&Ve.y<A||(Fe.y<A?Fe=new it(Fe.x+(A-Fe.y)/(Ve.y-Fe.y)*(Ve.x-Fe.x),A)._round():Ve.y<A&&(Ve=new it(Fe.x+(A-Fe.y)/(Ve.y-Fe.y)*(Ve.x-Fe.x),A)._round()),Fe.x>=P&&Ve.x>=P||(Fe.x>=P?Fe=new it(P,Fe.y+(P-Fe.x)/(Ve.x-Fe.x)*(Ve.y-Fe.y))._round():Ve.x>=P&&(Ve=new it(P,Fe.y+(P-Fe.x)/(Ve.x-Fe.x)*(Ve.y-Fe.y))._round()),Fe.y>=N&&Ve.y>=N||(Fe.y>=N?Fe=new it(Fe.x+(N-Fe.y)/(Ve.y-Fe.y)*(Ve.x-Fe.x),N)._round():Ve.y>=N&&(Ve=new it(Fe.x+(N-Fe.y)/(Ve.y-Fe.y)*(Ve.x-Fe.x),N)._round()),fe&&Fe.equals(fe[fe.length-1])||(fe=[Fe],q.push(fe)),fe.push(Ve)))))}}return q}function _y(y,h,A,P){const N=[],q=y.image,Y=q.pixelRatio,oe=q.paddedRect.w-2,fe=q.paddedRect.h-2,xe=y.right-y.left,Fe=y.bottom-y.top,Ve=q.stretchX||[[0,oe]],tt=q.stretchY||[[0,fe]],lt=(An,Vn)=>An+Vn[1]-Vn[0],ht=Ve.reduce(lt,0),Zt=tt.reduce(lt,0),Vt=oe-ht,vi=fe-Zt;let Fi=0,gi=ht,Li=0,$i=Zt,Qi=0,Xn=Vt,ir=0,Un=vi;if(q.content&&P){const An=q.content;Fi=kp(Ve,0,An[0]),Li=kp(tt,0,An[1]),gi=kp(Ve,An[0],An[2]),$i=kp(tt,An[1],An[3]),Qi=An[0]-Fi,ir=An[1]-Li,Xn=An[2]-An[0]-gi,Un=An[3]-An[1]-$i}const Mn=(An,Vn,Bn,pn)=>{const vr=Sp(An.stretch-Fi,gi,xe,y.left),ar=Cp(An.fixed-Qi,Xn,An.stretch,ht),Qr=Sp(Vn.stretch-Li,$i,Fe,y.top),ss=Cp(Vn.fixed-ir,Un,Vn.stretch,Zt),cs=Sp(Bn.stretch-Fi,gi,xe,y.left),Qs=Cp(Bn.fixed-Qi,Xn,Bn.stretch,ht),Eu=Sp(pn.stretch-Li,$i,Fe,y.top),Oa=Cp(pn.fixed-ir,Un,pn.stretch,Zt),Ws=new it(vr,Qr),la=new it(cs,Qr),Fa=new it(cs,Eu),Xa=new it(vr,Eu),Pl=new it(ar/Y,ss/Y),Xs=new it(Qs/Y,Oa/Y),Ra=h*Math.PI/180;if(Ra){const Ml=Math.sin(Ra),Dl=Math.cos(Ra),ys=[Dl,-Ml,Ml,Dl];Ws._matMult(ys),la._matMult(ys),Xa._matMult(ys),Fa._matMult(ys)}const Ya=An.stretch+An.fixed,fl=Vn.stretch+Vn.fixed;return{tl:Ws,tr:la,bl:Xa,br:Fa,tex:{x:q.paddedRect.x+1+Ya,y:q.paddedRect.y+1+fl,w:Bn.stretch+Bn.fixed-Ya,h:pn.stretch+pn.fixed-fl},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:Pl,pixelOffsetBR:Xs,minFontScaleX:Xn/Y/xe,minFontScaleY:Un/Y/Fe,isSDF:A}};if(P&&(q.stretchX||q.stretchY)){const An=vy(Ve,Vt,ht),Vn=vy(tt,vi,Zt);for(let Bn=0;Bn<An.length-1;Bn++){const pn=An[Bn],vr=An[Bn+1];for(let ar=0;ar<Vn.length-1;ar++)N.push(Mn(pn,Vn[ar],vr,Vn[ar+1]))}}else N.push(Mn({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:oe+1},{fixed:0,stretch:fe+1}));return N}function kp(y,h,A){let P=0;for(const N of y)P+=Math.max(h,Math.min(A,N[1]))-Math.max(h,Math.min(A,N[0]));return P}function vy(y,h,A){const P=[{fixed:-1,stretch:0}];for(const[N,q]of y){const Y=P[P.length-1];P.push({fixed:N-Y.stretch,stretch:Y.stretch}),P.push({fixed:N-Y.stretch,stretch:Y.stretch+(q-N)})}return P.push({fixed:h+1,stretch:A}),P}function Sp(y,h,A,P){return y/h*A+P}function Cp(y,h,A,P){return y-h*A/P}Pn("Anchor",Yh);class Ep{constructor(h,A,P,N,q,Y,oe,fe,xe,Fe){if(this.boxStartIndex=h.length,xe){let Ve=Y.top,tt=Y.bottom;const lt=Y.collisionPadding;lt&&(Ve-=lt[1],tt+=lt[3]);let ht=tt-Ve;ht>0&&(ht=Math.max(10,ht),this.circleDiameter=ht)}else{let Ve=Y.top*oe-fe[0],tt=Y.bottom*oe+fe[2],lt=Y.left*oe-fe[3],ht=Y.right*oe+fe[1];const Zt=Y.collisionPadding;if(Zt&&(lt-=Zt[0]*oe,Ve-=Zt[1]*oe,ht+=Zt[2]*oe,tt+=Zt[3]*oe),Fe){const Vt=new it(lt,Ve),vi=new it(ht,Ve),Fi=new it(lt,tt),gi=new it(ht,tt),Li=Fe*Math.PI/180;Vt._rotate(Li),vi._rotate(Li),Fi._rotate(Li),gi._rotate(Li),lt=Math.min(Vt.x,vi.x,Fi.x,gi.x),ht=Math.max(Vt.x,vi.x,Fi.x,gi.x),Ve=Math.min(Vt.y,vi.y,Fi.y,gi.y),tt=Math.max(Vt.y,vi.y,Fi.y,gi.y)}h.emplaceBack(A.x,A.y,lt,Ve,ht,tt,P,N,q)}this.boxEndIndex=h.length}}class j3{constructor(h=[],A=U3){if(this.data=h,this.length=this.data.length,this.compare=A,this.length>0)for(let P=(this.length>>1)-1;P>=0;P--)this._down(P)}push(h){this.data.push(h),this.length++,this._up(this.length-1)}pop(){if(this.length===0)return;const h=this.data[0],A=this.data.pop();return this.length--,this.length>0&&(this.data[0]=A,this._down(0)),h}peek(){return this.data[0]}_up(h){const{data:A,compare:P}=this,N=A[h];for(;h>0;){const q=h-1>>1,Y=A[q];if(P(N,Y)>=0)break;A[h]=Y,h=q}A[h]=N}_down(h){const{data:A,compare:P}=this,N=this.length>>1,q=A[h];for(;h<N;){let Y=1+(h<<1),oe=A[Y];const fe=Y+1;if(fe<this.length&&P(A[fe],oe)<0&&(Y=fe,oe=A[fe]),P(oe,q)>=0)break;A[h]=oe,h=Y}A[h]=q}}function U3(y,h){return y<h?-1:y>h?1:0}function V3(y,h=1,A=!1){let P=1/0,N=1/0,q=-1/0,Y=-1/0;const oe=y[0];for(let lt=0;lt<oe.length;lt++){const ht=oe[lt];(!lt||ht.x<P)&&(P=ht.x),(!lt||ht.y<N)&&(N=ht.y),(!lt||ht.x>q)&&(q=ht.x),(!lt||ht.y>Y)&&(Y=ht.y)}const fe=Math.min(q-P,Y-N);let xe=fe/2;const Fe=new j3([],q3);if(fe===0)return new it(P,N);for(let lt=P;lt<q;lt+=fe)for(let ht=N;ht<Y;ht+=fe)Fe.push(new y0(lt+xe,ht+xe,xe,y));let Ve=function(lt){let ht=0,Zt=0,Vt=0;const vi=lt[0];for(let Fi=0,gi=vi.length,Li=gi-1;Fi<gi;Li=Fi++){const $i=vi[Fi],Qi=vi[Li],Xn=$i.x*Qi.y-Qi.x*$i.y;Zt+=($i.x+Qi.x)*Xn,Vt+=($i.y+Qi.y)*Xn,ht+=3*Xn}return new y0(Zt/ht,Vt/ht,0,lt)}(y),tt=Fe.length;for(;Fe.length;){const lt=Fe.pop();(lt.d>Ve.d||!Ve.d)&&(Ve=lt,A&&console.log("found best %d after %d probes",Math.round(1e4*lt.d)/1e4,tt)),lt.max-Ve.d<=h||(xe=lt.h/2,Fe.push(new y0(lt.p.x-xe,lt.p.y-xe,xe,y)),Fe.push(new y0(lt.p.x+xe,lt.p.y-xe,xe,y)),Fe.push(new y0(lt.p.x-xe,lt.p.y+xe,xe,y)),Fe.push(new y0(lt.p.x+xe,lt.p.y+xe,xe,y)),tt+=4)}return A&&(console.log(`num probes: ${tt}`),console.log(`best distance: ${Ve.d}`)),Ve.p}function q3(y,h){return h.max-y.max}function y0(y,h,A,P){this.p=new it(y,h),this.h=A,this.d=function(N,q){let Y=!1,oe=1/0;for(let fe=0;fe<q.length;fe++){const xe=q[fe];for(let Fe=0,Ve=xe.length,tt=Ve-1;Fe<Ve;tt=Fe++){const lt=xe[Fe],ht=xe[tt];lt.y>N.y!=ht.y>N.y&&N.x<(ht.x-lt.x)*(N.y-lt.y)/(ht.y-lt.y)+lt.x&&(Y=!Y),oe=Math.min(oe,Wa(N,lt,ht))}}return(Y?1:-1)*Math.sqrt(oe)}(this.p,P),this.max=this.d+this.h*Math.SQRT2}const fm=Number.POSITIVE_INFINITY;function by(y,h){return h[1]!==fm?function(A,P,N){let q=0,Y=0;switch(P=Math.abs(P),N=Math.abs(N),A){case"top-right":case"top-left":case"top":Y=N-7;break;case"bottom-right":case"bottom-left":case"bottom":Y=7-N}switch(A){case"top-right":case"bottom-right":case"right":q=-P;break;case"top-left":case"bottom-left":case"left":q=P}return[q,Y]}(y,h[0],h[1]):function(A,P){let N=0,q=0;P<0&&(P=0);const Y=P/Math.sqrt(2);switch(A){case"top-right":case"top-left":q=Y-7;break;case"bottom-right":case"bottom-left":q=7-Y;break;case"bottom":q=7-P;break;case"top":q=P-7}switch(A){case"top-right":case"bottom-right":N=-Y;break;case"top-left":case"bottom-left":N=Y;break;case"left":N=P;break;case"right":N=-P}return[N,q]}(y,h[0])}function dm(y){switch(y){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function H3(y,h,A,P,N,q,Y,oe,fe,xe,Fe){let Ve=q.textMaxSize.evaluate(h,{});Ve===void 0&&(Ve=Y);const tt=y.layers[0].layout,lt=tt.get("icon-offset").evaluate(h,{},Fe),ht=xy(A.horizontal),Zt=Y/24,Vt=y.tilePixelRatio*Zt,vi=y.tilePixelRatio*Ve/24,Fi=y.tilePixelRatio*oe,gi=y.tilePixelRatio*tt.get("symbol-spacing"),Li=tt.get("text-padding")*y.tilePixelRatio,$i=function(pn,vr,ar,Qr=1){const ss=pn.get("icon-padding").evaluate(vr,{},ar),cs=ss&&ss.values;return[cs[0]*Qr,cs[1]*Qr,cs[2]*Qr,cs[3]*Qr]}(tt,h,Fe,y.tilePixelRatio),Qi=tt.get("text-max-angle")/180*Math.PI,Xn=tt.get("text-rotation-alignment")!=="viewport"&&tt.get("symbol-placement")!=="point",ir=tt.get("icon-rotation-alignment")==="map"&&tt.get("symbol-placement")!=="point",Un=tt.get("symbol-placement"),Mn=gi/2,An=tt.get("icon-text-fit");let Vn;P&&An!=="none"&&(y.allowVerticalPlacement&&A.vertical&&(Vn=cy(P,A.vertical,An,tt.get("icon-text-fit-padding"),lt,Zt)),ht&&(P=cy(P,ht,An,tt.get("icon-text-fit-padding"),lt,Zt)));const Bn=(pn,vr)=>{vr.x<0||vr.x>=Oo||vr.y<0||vr.y>=Oo||function(ar,Qr,ss,cs,Qs,Eu,Oa,Ws,la,Fa,Xa,Pl,Xs,Ra,Ya,fl,Ml,Dl,ys,ua,no,iu,Ba,Za,Ku){const wc=ar.addToLineVertexArray(Qr,ss);let xc,vh,Ju,Iu,Ol=0,bh=0,gd=0,zy=0,Am=-1,km=-1;const wh={};let Ny=Ji.exports(""),Sm=0,Cm=0;if(Ws._unevaluatedLayout.getValue("text-radial-offset")===void 0?[Sm,Cm]=Ws.layout.get("text-offset").evaluate(no,{},Za).map(Fl=>Fl*Ot):(Sm=Ws.layout.get("text-radial-offset").evaluate(no,{},Za)*Ot,Cm=fm),ar.allowVerticalPlacement&&cs.vertical){const Fl=Ws.layout.get("text-rotate").evaluate(no,{},Za)+90;Ju=new Ep(la,Qr,Fa,Xa,Pl,cs.vertical,Xs,Ra,Ya,Fl),Oa&&(Iu=new Ep(la,Qr,Fa,Xa,Pl,Oa,Ml,Dl,Ya,Fl))}if(Qs){const Fl=Ws.layout.get("icon-rotate").evaluate(no,{}),Hc=Ws.layout.get("icon-text-fit")!=="none",yd=_y(Qs,Fl,Ba,Hc),_d=Oa?_y(Oa,Fl,Ba,Hc):void 0;vh=new Ep(la,Qr,Fa,Xa,Pl,Qs,Ml,Dl,!1,Fl),Ol=4*yd.length;const Vy=ar.iconSizeData;let Df=null;Vy.kind==="source"?(Df=[_h*Ws.layout.get("icon-size").evaluate(no,{})],Df[0]>Zh&&Z(`${ar.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)):Vy.kind==="composite"&&(Df=[_h*iu.compositeIconSizes[0].evaluate(no,{},Za),_h*iu.compositeIconSizes[1].evaluate(no,{},Za)],(Df[0]>Zh||Df[1]>Zh)&&Z(`${ar.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)),ar.addSymbols(ar.icon,yd,Df,ua,ys,no,r.WritingMode.none,Qr,wc.lineStartIndex,wc.lineLength,-1,Za),Am=ar.icon.placedSymbolArray.length-1,_d&&(bh=4*_d.length,ar.addSymbols(ar.icon,_d,Df,ua,ys,no,r.WritingMode.vertical,Qr,wc.lineStartIndex,wc.lineLength,-1,Za),km=ar.icon.placedSymbolArray.length-1)}const jy=Object.keys(cs.horizontal);for(const Fl of jy){const Hc=cs.horizontal[Fl];if(!xc){Ny=Ji.exports(Hc.text);const _d=Ws.layout.get("text-rotate").evaluate(no,{},Za);xc=new Ep(la,Qr,Fa,Xa,Pl,Hc,Xs,Ra,Ya,_d)}const yd=Hc.positionedLines.length===1;if(gd+=wy(ar,Qr,Hc,Eu,Ws,Ya,no,fl,wc,cs.vertical?r.WritingMode.horizontal:r.WritingMode.horizontalOnly,yd?jy:[Fl],wh,Am,iu,Za),yd)break}cs.vertical&&(zy+=wy(ar,Qr,cs.vertical,Eu,Ws,Ya,no,fl,wc,r.WritingMode.vertical,["vertical"],wh,km,iu,Za));const nx=xc?xc.boxStartIndex:ar.collisionBoxArray.length,rx=xc?xc.boxEndIndex:ar.collisionBoxArray.length,ox=Ju?Ju.boxStartIndex:ar.collisionBoxArray.length,sx=Ju?Ju.boxEndIndex:ar.collisionBoxArray.length,ax=vh?vh.boxStartIndex:ar.collisionBoxArray.length,lx=vh?vh.boxEndIndex:ar.collisionBoxArray.length,ux=Iu?Iu.boxStartIndex:ar.collisionBoxArray.length,cx=Iu?Iu.boxEndIndex:ar.collisionBoxArray.length;let Ac=-1;const Mp=(Fl,Hc)=>Fl&&Fl.circleDiameter?Math.max(Fl.circleDiameter,Hc):Hc;Ac=Mp(xc,Ac),Ac=Mp(Ju,Ac),Ac=Mp(vh,Ac),Ac=Mp(Iu,Ac);const Uy=Ac>-1?1:0;Uy&&(Ac*=Ku/Ot),ar.glyphOffsetArray.length>=_0.MAX_GLYPHS&&Z("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),no.sortKey!==void 0&&ar.addToSortKeyRanges(ar.symbolInstances.length,no.sortKey),ar.symbolInstances.emplaceBack(Qr.x,Qr.y,wh.right>=0?wh.right:-1,wh.center>=0?wh.center:-1,wh.left>=0?wh.left:-1,wh.vertical||-1,Am,km,Ny,nx,rx,ox,sx,ax,lx,ux,cx,Fa,gd,zy,Ol,bh,Uy,0,Xs,Sm,Cm,Ac)}(y,vr,pn,A,P,N,Vn,y.layers[0],y.collisionBoxArray,h.index,h.sourceLayerIndex,y.index,Vt,[Li,Li,Li,Li],Xn,fe,Fi,$i,ir,lt,h,q,xe,Fe,Y)};if(Un==="line")for(const pn of yy(h.geometry,0,0,Oo,Oo)){const vr=N3(pn,gi,Qi,A.vertical||ht,P,24,vi,y.overscaling,Oo);for(const ar of vr){const Qr=ht;Qr&&G3(y,Qr.text,Mn,ar)||Bn(pn,ar)}}else if(Un==="line-center"){for(const pn of h.geometry)if(pn.length>1){const vr=z3(pn,Qi,A.vertical||ht,P,24,vi);vr&&Bn(pn,vr)}}else if(h.type==="Polygon")for(const pn of d0(h.geometry,0)){const vr=V3(pn,16);Bn(pn[0],new Yh(vr.x,vr.y,0))}else if(h.type==="LineString")for(const pn of h.geometry)Bn(pn,new Yh(pn[0].x,pn[0].y,0));else if(h.type==="Point")for(const pn of h.geometry)for(const vr of pn)Bn([vr],new Yh(vr.x,vr.y,0))}const Zh=32640;function wy(y,h,A,P,N,q,Y,oe,fe,xe,Fe,Ve,tt,lt,ht){const Zt=function(Fi,gi,Li,$i,Qi,Xn,ir,Un){const Mn=$i.layout.get("text-rotate").evaluate(Xn,{})*Math.PI/180,An=[];for(const Vn of gi.positionedLines)for(const Bn of Vn.positionedGlyphs){if(!Bn.rect)continue;const pn=Bn.rect||{};let vr=4,ar=!0,Qr=1,ss=0;const cs=(Qi||Un)&&Bn.vertical,Qs=Bn.metrics.advance*Bn.scale/2;if(Un&&gi.verticalizable){const ys=(Bn.scale-1)*Ot,ua=(Ot-Bn.metrics.width*Bn.scale)/2;ss=Vn.lineOffset/2-(Bn.imageName?-ua:ys)}if(Bn.imageName){const ys=ir[Bn.imageName];ar=ys.sdf,Qr=ys.pixelRatio,vr=1/Qr}const Eu=Qi?[Bn.x+Qs,Bn.y]:[0,0];let Oa=Qi?[0,0]:[Bn.x+Qs+Li[0],Bn.y+Li[1]-ss],Ws=[0,0];cs&&(Ws=Oa,Oa=[0,0]);const la=(Bn.metrics.left-vr)*Bn.scale-Qs+Oa[0],Fa=(-Bn.metrics.top-vr)*Bn.scale+Oa[1],Xa=la+pn.w*Bn.scale/Qr,Pl=Fa+pn.h*Bn.scale/Qr,Xs=new it(la,Fa),Ra=new it(Xa,Fa),Ya=new it(la,Pl),fl=new it(Xa,Pl);if(cs){const ys=new it(-Qs,Qs-wp),ua=-Math.PI/2,no=12-Qs,iu=new it(22-no,-(Bn.imageName?no:0)),Ba=new it(...Ws);Xs._rotateAround(ua,ys)._add(iu)._add(Ba),Ra._rotateAround(ua,ys)._add(iu)._add(Ba),Ya._rotateAround(ua,ys)._add(iu)._add(Ba),fl._rotateAround(ua,ys)._add(iu)._add(Ba)}if(Mn){const ys=Math.sin(Mn),ua=Math.cos(Mn),no=[ua,-ys,ys,ua];Xs._matMult(no),Ra._matMult(no),Ya._matMult(no),fl._matMult(no)}const Ml=new it(0,0),Dl=new it(0,0);An.push({tl:Xs,tr:Ra,bl:Ya,br:fl,tex:pn,writingMode:gi.writingMode,glyphOffset:Eu,sectionIndex:Bn.sectionIndex,isSDF:ar,pixelOffsetTL:Ml,pixelOffsetBR:Dl,minFontScaleX:0,minFontScaleY:0})}return An}(0,A,oe,N,q,Y,P,y.allowVerticalPlacement),Vt=y.textSizeData;let vi=null;Vt.kind==="source"?(vi=[_h*N.layout.get("text-size").evaluate(Y,{})],vi[0]>Zh&&Z(`${y.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)):Vt.kind==="composite"&&(vi=[_h*lt.compositeTextSizes[0].evaluate(Y,{},ht),_h*lt.compositeTextSizes[1].evaluate(Y,{},ht)],(vi[0]>Zh||vi[1]>Zh)&&Z(`${y.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)),y.addSymbols(y.text,Zt,vi,oe,q,Y,xe,h,fe.lineStartIndex,fe.lineLength,tt,ht);for(const Fi of Fe)Ve[Fi]=y.text.placedSymbolArray.length-1;return 4*Zt.length}function xy(y){for(const h in y)return y[h];return null}function G3(y,h,A,P){const N=y.compareText;if(h in N){const q=N[h];for(let Y=q.length-1;Y>=0;Y--)if(P.dist(q[Y])<A)return!0}else N[h]=[];return N[h].push(P),!1}const W3=qc.VectorTileFeature.types,X3=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function Ip(y,h,A,P,N,q,Y,oe,fe,xe,Fe,Ve,tt){const lt=oe?Math.min(Zh,Math.round(oe[0])):0,ht=oe?Math.min(Zh,Math.round(oe[1])):0;y.emplaceBack(h,A,Math.round(32*P),Math.round(32*N),q,Y,(lt<<1)+(fe?1:0),ht,16*xe,16*Fe,256*Ve,256*tt)}function pm(y,h,A){y.emplaceBack(h.x,h.y,A),y.emplaceBack(h.x,h.y,A),y.emplaceBack(h.x,h.y,A),y.emplaceBack(h.x,h.y,A)}function Y3(y){for(const h of y.sections)if(Tr(h.text))return!0;return!1}class mm{constructor(h){this.layoutVertexArray=new at,this.indexArray=new wi,this.programConfigurations=h,this.segments=new Wt,this.dynamicLayoutVertexArray=new pt,this.opacityVertexArray=new St,this.placedSymbolArray=new cn}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(h,A,P,N){this.isEmpty()||(P&&(this.layoutVertexBuffer=h.createVertexBuffer(this.layoutVertexArray,ee.members),this.indexBuffer=h.createIndexBuffer(this.indexArray,A),this.dynamicLayoutVertexBuffer=h.createVertexBuffer(this.dynamicLayoutVertexArray,ce.members,!0),this.opacityVertexBuffer=h.createVertexBuffer(this.opacityVertexArray,X3,!0),this.opacityVertexBuffer.itemSize=1),(P||N)&&this.programConfigurations.upload(h))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}Pn("SymbolBuffers",mm);class gm{constructor(h,A,P){this.layoutVertexArray=new h,this.layoutAttributes=A,this.indexArray=new P,this.segments=new Wt,this.collisionVertexArray=new Ai}upload(h){this.layoutVertexBuffer=h.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=h.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=h.createVertexBuffer(this.collisionVertexArray,Ae.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}Pn("CollisionBuffers",gm);class _0{constructor(h){this.collisionBoxArray=h.collisionBoxArray,this.zoom=h.zoom,this.overscaling=h.overscaling,this.layers=h.layers,this.layerIds=this.layers.map(Y=>Y.id),this.index=h.index,this.pixelRatio=h.pixelRatio,this.sourceLayerIndex=h.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=Ql([]),this.placementViewportMatrix=Ql([]);const A=this.layers[0]._unevaluatedLayout._values;this.textSizeData=hy(this.zoom,A["text-size"]),this.iconSizeData=hy(this.zoom,A["icon-size"]);const P=this.layers[0].layout,N=P.get("symbol-sort-key"),q=P.get("symbol-z-order");this.canOverlap=_m(P,"text-overlap","text-allow-overlap")!=="never"||_m(P,"icon-overlap","icon-allow-overlap")!=="never"||P.get("text-ignore-placement")||P.get("icon-ignore-placement"),this.sortFeaturesByKey=q!=="viewport-y"&&!N.isConstant(),this.sortFeaturesByY=(q==="viewport-y"||q==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,P.get("symbol-placement")==="point"&&(this.writingModes=P.get("text-writing-mode").map(Y=>r.WritingMode[Y])),this.stateDependentLayerIds=this.layers.filter(Y=>Y.isStateDependent()).map(Y=>Y.id),this.sourceID=h.sourceID}createArrays(){this.text=new mm(new jo(this.layers,this.zoom,h=>/^text/.test(h))),this.icon=new mm(new jo(this.layers,this.zoom,h=>/^icon/.test(h))),this.glyphOffsetArray=new _n,this.lineVertexArray=new qn,this.symbolInstances=new Rn}calculateGlyphDependencies(h,A,P,N,q){for(let Y=0;Y<h.length;Y++)if(A[h.charCodeAt(Y)]=!0,(P||N)&&q){const oe=Tt[h.charAt(Y)];oe&&(A[oe.charCodeAt(0)]=!0)}}populate(h,A,P){const N=this.layers[0],q=N.layout,Y=q.get("text-font"),oe=q.get("text-field"),fe=q.get("icon-image"),xe=(oe.value.kind!=="constant"||oe.value.value instanceof Yt&&!oe.value.value.isEmpty()||oe.value.value.toString().length>0)&&(Y.value.kind!=="constant"||Y.value.value.length>0),Fe=fe.value.kind!=="constant"||!!fe.value.value||Object.keys(fe.parameters).length>0,Ve=q.get("symbol-sort-key");if(this.features=[],!xe&&!Fe)return;const tt=A.iconDependencies,lt=A.glyphDependencies,ht=A.availableImages,Zt=new No(this.zoom);for(const{feature:Vt,id:vi,index:Fi,sourceLayerIndex:gi}of h){const Li=N._featureFilter.needGeometry,$i=ul(Vt,Li);if(!N._featureFilter.filter(Zt,$i,P))continue;let Qi,Xn;if(Li||($i.geometry=Ha(Vt)),xe){const Un=N.getValueAndResolveTokens("text-field",$i,P,ht),Mn=Yt.factory(Un);Y3(Mn)&&(this.hasRTLText=!0),(!this.hasRTLText||Yl()==="unavailable"||this.hasRTLText&&ya.isParsed())&&(Qi=mt(Mn,N,$i))}if(Fe){const Un=N.getValueAndResolveTokens("icon-image",$i,P,ht);Xn=Un instanceof oi?Un:oi.fromString(Un)}if(!Qi&&!Xn)continue;const ir=this.sortFeaturesByKey?Ve.evaluate($i,{},P):void 0;if(this.features.push({id:vi,text:Qi,icon:Xn,index:Fi,sourceLayerIndex:gi,geometry:$i.geometry,properties:Vt.properties,type:W3[Vt.type],sortKey:ir}),Xn&&(tt[Xn.name]=!0),Qi){const Un=Y.evaluate($i,{},P).join(","),Mn=q.get("text-rotation-alignment")!=="viewport"&&q.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(r.WritingMode.vertical)>=0;for(const An of Qi.sections)if(An.image)tt[An.image.name]=!0;else{const Vn=Da(Qi.toString()),Bn=An.fontStack||Un,pn=lt[Bn]=lt[Bn]||{};this.calculateGlyphDependencies(An.text,pn,Mn,this.allowVerticalPlacement,Vn)}}}q.get("symbol-placement")==="line"&&(this.features=function(Vt){const vi={},Fi={},gi=[];let Li=0;function $i(Un){gi.push(Vt[Un]),Li++}function Qi(Un,Mn,An){const Vn=Fi[Un];return delete Fi[Un],Fi[Mn]=Vn,gi[Vn].geometry[0].pop(),gi[Vn].geometry[0]=gi[Vn].geometry[0].concat(An[0]),Vn}function Xn(Un,Mn,An){const Vn=vi[Mn];return delete vi[Mn],vi[Un]=Vn,gi[Vn].geometry[0].shift(),gi[Vn].geometry[0]=An[0].concat(gi[Vn].geometry[0]),Vn}function ir(Un,Mn,An){const Vn=An?Mn[0][Mn[0].length-1]:Mn[0][0];return`${Un}:${Vn.x}:${Vn.y}`}for(let Un=0;Un<Vt.length;Un++){const Mn=Vt[Un],An=Mn.geometry,Vn=Mn.text?Mn.text.toString():null;if(!Vn){$i(Un);continue}const Bn=ir(Vn,An),pn=ir(Vn,An,!0);if(Bn in Fi&&pn in vi&&Fi[Bn]!==vi[pn]){const vr=Xn(Bn,pn,An),ar=Qi(Bn,pn,gi[vr].geometry);delete vi[Bn],delete Fi[pn],Fi[ir(Vn,gi[ar].geometry,!0)]=ar,gi[vr].geometry=null}else Bn in Fi?Qi(Bn,pn,An):pn in vi?Xn(Bn,pn,An):($i(Un),vi[Bn]=Li-1,Fi[pn]=Li-1)}return gi.filter(Un=>Un.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((Vt,vi)=>Vt.sortKey-vi.sortKey)}update(h,A,P){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(h,A,this.layers,P),this.icon.programConfigurations.updatePaintArrays(h,A,this.layers,P))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(h){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(h),this.iconCollisionBox.upload(h)),this.text.upload(h,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(h,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(h,A){const P=this.lineVertexArray.length;if(h.segment!==void 0){let N=h.dist(A[h.segment+1]),q=h.dist(A[h.segment]);const Y={};for(let oe=h.segment+1;oe<A.length;oe++)Y[oe]={x:A[oe].x,y:A[oe].y,tileUnitDistanceFromAnchor:N},oe<A.length-1&&(N+=A[oe+1].dist(A[oe]));for(let oe=h.segment||0;oe>=0;oe--)Y[oe]={x:A[oe].x,y:A[oe].y,tileUnitDistanceFromAnchor:q},oe>0&&(q+=A[oe-1].dist(A[oe]));for(let oe=0;oe<A.length;oe++){const fe=Y[oe];this.lineVertexArray.emplaceBack(fe.x,fe.y,fe.tileUnitDistanceFromAnchor)}}return{lineStartIndex:P,lineLength:this.lineVertexArray.length-P}}addSymbols(h,A,P,N,q,Y,oe,fe,xe,Fe,Ve,tt){const lt=h.indexArray,ht=h.layoutVertexArray,Zt=h.segments.prepareSegment(4*A.length,ht,lt,this.canOverlap?Y.sortKey:void 0),Vt=this.glyphOffsetArray.length,vi=Zt.vertexLength,Fi=this.allowVerticalPlacement&&oe===r.WritingMode.vertical?Math.PI/2:0,gi=Y.text&&Y.text.sections;for(let Li=0;Li<A.length;Li++){const{tl:$i,tr:Qi,bl:Xn,br:ir,tex:Un,pixelOffsetTL:Mn,pixelOffsetBR:An,minFontScaleX:Vn,minFontScaleY:Bn,glyphOffset:pn,isSDF:vr,sectionIndex:ar}=A[Li],Qr=Zt.vertexLength,ss=pn[1];Ip(ht,fe.x,fe.y,$i.x,ss+$i.y,Un.x,Un.y,P,vr,Mn.x,Mn.y,Vn,Bn),Ip(ht,fe.x,fe.y,Qi.x,ss+Qi.y,Un.x+Un.w,Un.y,P,vr,An.x,Mn.y,Vn,Bn),Ip(ht,fe.x,fe.y,Xn.x,ss+Xn.y,Un.x,Un.y+Un.h,P,vr,Mn.x,An.y,Vn,Bn),Ip(ht,fe.x,fe.y,ir.x,ss+ir.y,Un.x+Un.w,Un.y+Un.h,P,vr,An.x,An.y,Vn,Bn),pm(h.dynamicLayoutVertexArray,fe,Fi),lt.emplaceBack(Qr,Qr+1,Qr+2),lt.emplaceBack(Qr+1,Qr+2,Qr+3),Zt.vertexLength+=4,Zt.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(pn[0]),Li!==A.length-1&&ar===A[Li+1].sectionIndex||h.programConfigurations.populatePaintArrays(ht.length,Y,Y.index,{},tt,gi&&gi[ar])}h.placedSymbolArray.emplaceBack(fe.x,fe.y,Vt,this.glyphOffsetArray.length-Vt,vi,xe,Fe,fe.segment,P?P[0]:0,P?P[1]:0,N[0],N[1],oe,0,!1,0,Ve)}_addCollisionDebugVertex(h,A,P,N,q,Y){return A.emplaceBack(0,0),h.emplaceBack(P.x,P.y,N,q,Math.round(Y.x),Math.round(Y.y))}addCollisionDebugVertices(h,A,P,N,q,Y,oe){const fe=q.segments.prepareSegment(4,q.layoutVertexArray,q.indexArray),xe=fe.vertexLength,Fe=q.layoutVertexArray,Ve=q.collisionVertexArray,tt=oe.anchorX,lt=oe.anchorY;this._addCollisionDebugVertex(Fe,Ve,Y,tt,lt,new it(h,A)),this._addCollisionDebugVertex(Fe,Ve,Y,tt,lt,new it(P,A)),this._addCollisionDebugVertex(Fe,Ve,Y,tt,lt,new it(P,N)),this._addCollisionDebugVertex(Fe,Ve,Y,tt,lt,new it(h,N)),fe.vertexLength+=4;const ht=q.indexArray;ht.emplaceBack(xe,xe+1),ht.emplaceBack(xe+1,xe+2),ht.emplaceBack(xe+2,xe+3),ht.emplaceBack(xe+3,xe),fe.primitiveLength+=4}addDebugCollisionBoxes(h,A,P,N){for(let q=h;q<A;q++){const Y=this.collisionBoxArray.get(q);this.addCollisionDebugVertices(Y.x1,Y.y1,Y.x2,Y.y2,N?this.textCollisionBox:this.iconCollisionBox,Y.anchorPoint,P)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new gm(ai,Ne.members,pi),this.iconCollisionBox=new gm(ai,Ne.members,pi);for(let h=0;h<this.symbolInstances.length;h++){const A=this.symbolInstances.get(h);this.addDebugCollisionBoxes(A.textBoxStartIndex,A.textBoxEndIndex,A,!0),this.addDebugCollisionBoxes(A.verticalTextBoxStartIndex,A.verticalTextBoxEndIndex,A,!0),this.addDebugCollisionBoxes(A.iconBoxStartIndex,A.iconBoxEndIndex,A,!1),this.addDebugCollisionBoxes(A.verticalIconBoxStartIndex,A.verticalIconBoxEndIndex,A,!1)}}_deserializeCollisionBoxesForSymbol(h,A,P,N,q,Y,oe,fe,xe){const Fe={};for(let Ve=A;Ve<P;Ve++){const tt=h.get(Ve);Fe.textBox={x1:tt.x1,y1:tt.y1,x2:tt.x2,y2:tt.y2,anchorPointX:tt.anchorPointX,anchorPointY:tt.anchorPointY},Fe.textFeatureIndex=tt.featureIndex;break}for(let Ve=N;Ve<q;Ve++){const tt=h.get(Ve);Fe.verticalTextBox={x1:tt.x1,y1:tt.y1,x2:tt.x2,y2:tt.y2,anchorPointX:tt.anchorPointX,anchorPointY:tt.anchorPointY},Fe.verticalTextFeatureIndex=tt.featureIndex;break}for(let Ve=Y;Ve<oe;Ve++){const tt=h.get(Ve);Fe.iconBox={x1:tt.x1,y1:tt.y1,x2:tt.x2,y2:tt.y2,anchorPointX:tt.anchorPointX,anchorPointY:tt.anchorPointY},Fe.iconFeatureIndex=tt.featureIndex;break}for(let Ve=fe;Ve<xe;Ve++){const tt=h.get(Ve);Fe.verticalIconBox={x1:tt.x1,y1:tt.y1,x2:tt.x2,y2:tt.y2,anchorPointX:tt.anchorPointX,anchorPointY:tt.anchorPointY},Fe.verticalIconFeatureIndex=tt.featureIndex;break}return Fe}deserializeCollisionBoxes(h){this.collisionArrays=[];for(let A=0;A<this.symbolInstances.length;A++){const P=this.symbolInstances.get(A);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(h,P.textBoxStartIndex,P.textBoxEndIndex,P.verticalTextBoxStartIndex,P.verticalTextBoxEndIndex,P.iconBoxStartIndex,P.iconBoxEndIndex,P.verticalIconBoxStartIndex,P.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(h,A){const P=h.placedSymbolArray.get(A),N=P.vertexStartIndex+4*P.numGlyphs;for(let q=P.vertexStartIndex;q<N;q+=4)h.indexArray.emplaceBack(q,q+1,q+2),h.indexArray.emplaceBack(q+1,q+2,q+3)}getSortedSymbolIndexes(h){if(this.sortedAngle===h&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const A=Math.sin(h),P=Math.cos(h),N=[],q=[],Y=[];for(let oe=0;oe<this.symbolInstances.length;++oe){Y.push(oe);const fe=this.symbolInstances.get(oe);N.push(0|Math.round(A*fe.anchorX+P*fe.anchorY)),q.push(fe.featureIndex)}return Y.sort((oe,fe)=>N[oe]-N[fe]||q[fe]-q[oe]),Y}addToSortKeyRanges(h,A){const P=this.sortKeyRanges[this.sortKeyRanges.length-1];P&&P.sortKey===A?P.symbolInstanceEnd=h+1:this.sortKeyRanges.push({sortKey:A,symbolInstanceStart:h,symbolInstanceEnd:h+1})}sortFeatures(h){if(this.sortFeaturesByY&&this.sortedAngle!==h&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(h),this.sortedAngle=h,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const A of this.symbolInstanceIndexes){const P=this.symbolInstances.get(A);this.featureSortOrder.push(P.featureIndex),[P.rightJustifiedTextSymbolIndex,P.centerJustifiedTextSymbolIndex,P.leftJustifiedTextSymbolIndex].forEach((N,q,Y)=>{N>=0&&Y.indexOf(N)===q&&this.addIndicesForPlacedSymbol(this.text,N)}),P.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,P.verticalPlacedTextSymbolIndex),P.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,P.placedIconSymbolIndex),P.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,P.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}Pn("SymbolBucket",_0,{omit:["layers","collisionBoxArray","features","compareText"]}),_0.MAX_GLYPHS=65535,_0.addDynamicAttributes=pm;const Z3=new Ho({"symbol-placement":new er(Q.layout_symbol["symbol-placement"]),"symbol-spacing":new er(Q.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new er(Q.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new yr(Q.layout_symbol["symbol-sort-key"]),"symbol-z-order":new er(Q.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new er(Q.layout_symbol["icon-allow-overlap"]),"icon-overlap":new er(Q.layout_symbol["icon-overlap"]),"icon-ignore-placement":new er(Q.layout_symbol["icon-ignore-placement"]),"icon-optional":new er(Q.layout_symbol["icon-optional"]),"icon-rotation-alignment":new er(Q.layout_symbol["icon-rotation-alignment"]),"icon-size":new yr(Q.layout_symbol["icon-size"]),"icon-text-fit":new er(Q.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new er(Q.layout_symbol["icon-text-fit-padding"]),"icon-image":new yr(Q.layout_symbol["icon-image"]),"icon-rotate":new yr(Q.layout_symbol["icon-rotate"]),"icon-padding":new yr(Q.layout_symbol["icon-padding"]),"icon-keep-upright":new er(Q.layout_symbol["icon-keep-upright"]),"icon-offset":new yr(Q.layout_symbol["icon-offset"]),"icon-anchor":new yr(Q.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new er(Q.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new er(Q.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new er(Q.layout_symbol["text-rotation-alignment"]),"text-field":new yr(Q.layout_symbol["text-field"]),"text-font":new yr(Q.layout_symbol["text-font"]),"text-size":new yr(Q.layout_symbol["text-size"]),"text-max-width":new yr(Q.layout_symbol["text-max-width"]),"text-line-height":new er(Q.layout_symbol["text-line-height"]),"text-letter-spacing":new yr(Q.layout_symbol["text-letter-spacing"]),"text-justify":new yr(Q.layout_symbol["text-justify"]),"text-radial-offset":new yr(Q.layout_symbol["text-radial-offset"]),"text-variable-anchor":new er(Q.layout_symbol["text-variable-anchor"]),"text-anchor":new yr(Q.layout_symbol["text-anchor"]),"text-max-angle":new er(Q.layout_symbol["text-max-angle"]),"text-writing-mode":new er(Q.layout_symbol["text-writing-mode"]),"text-rotate":new yr(Q.layout_symbol["text-rotate"]),"text-padding":new er(Q.layout_symbol["text-padding"]),"text-keep-upright":new er(Q.layout_symbol["text-keep-upright"]),"text-transform":new yr(Q.layout_symbol["text-transform"]),"text-offset":new yr(Q.layout_symbol["text-offset"]),"text-allow-overlap":new er(Q.layout_symbol["text-allow-overlap"]),"text-overlap":new er(Q.layout_symbol["text-overlap"]),"text-ignore-placement":new er(Q.layout_symbol["text-ignore-placement"]),"text-optional":new er(Q.layout_symbol["text-optional"])});var ym={paint:new Ho({"icon-opacity":new yr(Q.paint_symbol["icon-opacity"]),"icon-color":new yr(Q.paint_symbol["icon-color"]),"icon-halo-color":new yr(Q.paint_symbol["icon-halo-color"]),"icon-halo-width":new yr(Q.paint_symbol["icon-halo-width"]),"icon-halo-blur":new yr(Q.paint_symbol["icon-halo-blur"]),"icon-translate":new er(Q.paint_symbol["icon-translate"]),"icon-translate-anchor":new er(Q.paint_symbol["icon-translate-anchor"]),"text-opacity":new yr(Q.paint_symbol["text-opacity"]),"text-color":new yr(Q.paint_symbol["text-color"],{runtimeType:Gn,getOverride:y=>y.textColor,hasOverride:y=>!!y.textColor}),"text-halo-color":new yr(Q.paint_symbol["text-halo-color"]),"text-halo-width":new yr(Q.paint_symbol["text-halo-width"]),"text-halo-blur":new yr(Q.paint_symbol["text-halo-blur"]),"text-translate":new er(Q.paint_symbol["text-translate"]),"text-translate-anchor":new er(Q.paint_symbol["text-translate-anchor"])}),layout:Z3};class Ay{constructor(h){if(h.property.overrides===void 0)throw new Error("overrides must be provided to instantiate FormatSectionOverride class");this.type=h.property.overrides?h.property.overrides.runtimeType:fn,this.defaultValue=h}evaluate(h){if(h.formattedSection){const A=this.defaultValue.property.overrides;if(A&&A.hasOverride(h.formattedSection))return A.getOverride(h.formattedSection)}return h.feature&&h.featureState?this.defaultValue.evaluate(h.feature,h.featureState):this.defaultValue.property.specification.default}eachChild(h){this.defaultValue.isConstant()||h(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}Pn("FormatSectionOverride",Ay,{omit:["defaultValue"]});class Tp extends ll{constructor(h){super(h,ym)}recalculate(h,A){if(super.recalculate(h,A),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")==="map"?"map":"viewport"),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){const P=this.layout.get("text-writing-mode");if(P){const N=[];for(const q of P)N.indexOf(q)<0&&N.push(q);this.layout._values["text-writing-mode"]=N}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(h,A,P,N){const q=this.layout.get(h).evaluate(A,{},P,N),Y=this._unevaluatedLayout._values[h];return Y.isDataDriven()||Bo(Y.value)||!q?q:function(oe,fe){return fe.replace(/{([^{}]+)}/g,(xe,Fe)=>Fe in oe?String(oe[Fe]):"")}(A.properties,q)}createBucket(h){return new _0(h)}queryRadius(){return 0}queryIntersectsFeature(){throw new Error("Should take a different path in FeatureIndex")}_setPaintOverrides(){for(const h of ym.paint.overridableProperties){if(!Tp.hasPaintOverride(this.layout,h))continue;const A=this.paint.get(h),P=new Ay(A),N=new eo(P,A.property.specification);let q=null;q=A.value.kind==="constant"||A.value.kind==="source"?new Wo("source",N):new Cs("composite",N,A.value.zoomStops),this.paint._values[h]=new al(A.property,q,A.parameters)}}_handleOverridablePaintPropertyUpdate(h,A,P){return!(!this.layout||A.isDataDriven()||P.isDataDriven())&&Tp.hasPaintOverride(this.layout,h)}static hasPaintOverride(h,A){const P=h.get("text-field"),N=ym.paint.properties[A];let q=!1;const Y=oe=>{for(const fe of oe)if(N.overrides&&N.overrides.hasOverride(fe))return void(q=!0)};if(P.value.kind==="constant"&&P.value.value instanceof Yt)Y(P.value.value.sections);else if(P.value.kind==="source"){const oe=xe=>{q||(xe instanceof Sn&&Ii(xe.value)===gn?Y(xe.value.sections):xe instanceof pu?Y(xe.sections):xe.eachChild(oe))},fe=P.value;fe._styleExpression&&oe(fe._styleExpression.expression)}return q}}function _m(y,h,A){let P="never";const N=y.get(h);return N?P=N:y.get(A)&&(P="always"),P}var K3={paint:new Ho({"background-color":new er(Q.paint_background["background-color"]),"background-pattern":new cc(Q.paint_background["background-pattern"]),"background-opacity":new er(Q.paint_background["background-opacity"])})},J3={paint:new Ho({"raster-opacity":new er(Q.paint_raster["raster-opacity"]),"raster-hue-rotate":new er(Q.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new er(Q.paint_raster["raster-brightness-min"]),"raster-brightness-max":new er(Q.paint_raster["raster-brightness-max"]),"raster-saturation":new er(Q.paint_raster["raster-saturation"]),"raster-contrast":new er(Q.paint_raster["raster-contrast"]),"raster-resampling":new er(Q.paint_raster["raster-resampling"]),"raster-fade-duration":new er(Q.paint_raster["raster-fade-duration"])})};class Q3 extends ll{constructor(h){super(h,{}),this.onAdd=A=>{this.implementation.onAdd&&this.implementation.onAdd(A,A.painter.context.gl)},this.onRemove=A=>{this.implementation.onRemove&&this.implementation.onRemove(A,A.painter.context.gl)},this.implementation=h}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){throw new Error("Custom layers cannot be serialized")}}const $3={circle:class extends ll{constructor(y){super(y,jc)}createBucket(y){return new os(y)}queryRadius(y){const h=y;return zc("circle-radius",this,h)+zc("circle-stroke-width",this,h)+mc(this.paint.get("circle-translate"))}queryIntersectsFeature(y,h,A,P,N,q,Y,oe){const fe=Nc(y,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),q.angle,Y),xe=this.paint.get("circle-radius").evaluate(h,A)+this.paint.get("circle-stroke-width").evaluate(h,A),Fe=this.paint.get("circle-pitch-alignment")==="map",Ve=Fe?fe:function(lt,ht){return lt.map(Zt=>ph(Zt,ht))}(fe,oe),tt=Fe?xe*Y:xe;for(const lt of P)for(const ht of lt){const Zt=Fe?ht:ph(ht,oe);let Vt=tt;const vi=Uc([],[ht.x,ht.y,0,1],oe);if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?Vt*=vi[3]/q.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(Vt*=q.cameraToCenterDistance/vi[3]),r0(Ve,Zt,Vt))return!0}return!1}},heatmap:class extends ll{constructor(y){super(y,mh),this._updateColorRamp()}createBucket(y){return new Uh(y)}_handleSpecialPaintPropertyUpdate(y){y==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=eu({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)}queryRadius(){return 0}queryIntersectsFeature(){return!1}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}},hillshade:class extends ll{constructor(y){super(y,l0)}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}},fill:class extends ll{constructor(y){super(y,dp)}recalculate(y,h){super.recalculate(y,h);const A=this.paint._values["fill-outline-color"];A.value.kind==="constant"&&A.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(y){return new hd(y)}queryRadius(){return mc(this.paint.get("fill-translate"))}queryIntersectsFeature(y,h,A,P,N,q,Y){return vf(Nc(y,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),q.angle,Y),P)}isTileClipped(){return!0}},"fill-extrusion":class extends ll{constructor(y){super(y,am)}createBucket(y){return new Lf(y)}queryRadius(){return mc(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature(y,h,A,P,N,q,Y,oe){const fe=Nc(y,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),q.angle,Y),xe=this.paint.get("fill-extrusion-height").evaluate(h,A),Fe=this.paint.get("fill-extrusion-base").evaluate(h,A),Ve=function(lt,ht,Zt,Vt){const vi=[];for(const Fi of lt){const gi=[Fi.x,Fi.y,0,1];Uc(gi,gi,ht),vi.push(new it(gi[0]/gi[3],gi[1]/gi[3]))}return vi}(fe,oe),tt=function(lt,ht,Zt,Vt){const vi=[],Fi=[],gi=Vt[8]*ht,Li=Vt[9]*ht,$i=Vt[10]*ht,Qi=Vt[11]*ht,Xn=Vt[8]*Zt,ir=Vt[9]*Zt,Un=Vt[10]*Zt,Mn=Vt[11]*Zt;for(const An of lt){const Vn=[],Bn=[];for(const pn of An){const vr=pn.x,ar=pn.y,Qr=Vt[0]*vr+Vt[4]*ar+Vt[12],ss=Vt[1]*vr+Vt[5]*ar+Vt[13],cs=Vt[2]*vr+Vt[6]*ar+Vt[14],Qs=Vt[3]*vr+Vt[7]*ar+Vt[15],Eu=cs+$i,Oa=Qs+Qi,Ws=Qr+Xn,la=ss+ir,Fa=cs+Un,Xa=Qs+Mn,Pl=new it((Qr+gi)/Oa,(ss+Li)/Oa);Pl.z=Eu/Oa,Vn.push(Pl);const Xs=new it(Ws/Xa,la/Xa);Xs.z=Fa/Xa,Bn.push(Xs)}vi.push(Vn),Fi.push(Bn)}return[vi,Fi]}(P,Fe,xe,oe);return function(lt,ht,Zt){let Vt=1/0;vf(Zt,ht)&&(Vt=_p(Zt,ht[0]));for(let vi=0;vi<ht.length;vi++){const Fi=ht[vi],gi=lt[vi];for(let Li=0;Li<Fi.length-1;Li++){const $i=Fi[Li],Qi=[$i,Fi[Li+1],gi[Li+1],gi[Li],$i];zh(Zt,Qi)&&(Vt=Math.min(Vt,_p(Zt,Qi)))}}return Vt!==1/0&&Vt}(tt[0],tt[1],Ve)}},line:class extends ll{constructor(y){super(y,R),this.gradientVersion=0}_handleSpecialPaintPropertyUpdate(y){y==="line-gradient"&&(this.stepInterpolant=this._transitionablePaint._values["line-gradient"].value.expression._styleExpression.expression instanceof fa,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER)}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(y,h){super.recalculate(y,h),this.paint._values["line-floorwidth"]=G.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,y)}createBucket(y){return new E(y)}queryRadius(y){const h=y,A=H(zc("line-width",this,h),zc("line-gap-width",this,h)),P=zc("line-offset",this,h);return A/2+Math.abs(P)+mc(this.paint.get("line-translate"))}queryIntersectsFeature(y,h,A,P,N,q,Y){const oe=Nc(y,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),q.angle,Y),fe=Y/2*H(this.paint.get("line-width").evaluate(h,A),this.paint.get("line-gap-width").evaluate(h,A)),xe=this.paint.get("line-offset").evaluate(h,A);return xe&&(P=function(Fe,Ve){const tt=[];for(let lt=0;lt<Fe.length;lt++){const ht=Fe[lt],Zt=[];for(let Vt=0;Vt<ht.length;Vt++){const vi=ht[Vt-1],Fi=ht[Vt],gi=ht[Vt+1],Li=Vt===0?new it(0,0):Fi.sub(vi)._unit()._perp(),$i=Vt===ht.length-1?new it(0,0):gi.sub(Fi)._unit()._perp(),Qi=Li._add($i)._unit(),Xn=Qi.x*$i.x+Qi.y*$i.y;Xn!==0&&Qi._mult(1/Xn),Zt.push(Qi._mult(Ve)._add(Fi))}tt.push(Zt)}return tt}(P,xe*Y)),function(Fe,Ve,tt){for(let lt=0;lt<Ve.length;lt++){const ht=Ve[lt];if(Fe.length>=3){for(let Zt=0;Zt<ht.length;Zt++)if(pc(Fe,ht[Zt]))return!0}if(hc(Fe,ht,tt))return!0}return!1}(oe,P,fe)}isTileClipped(){return!0}},symbol:Tp,background:class extends ll{constructor(y){super(y,K3)}},raster:class extends ll{constructor(y){super(y,J3)}}};class ex{constructor(h){this._callback=h,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._callback()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._callback()},0))}remove(){delete this._channel,this._callback=()=>{}}}const ky=63710088e-1;class Ps{constructor(h,A){if(isNaN(h)||isNaN(A))throw new Error(`Invalid LngLat object: (${h}, ${A})`);if(this.lng=+h,this.lat=+A,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new Ps(x(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(h){const A=Math.PI/180,P=this.lat*A,N=h.lat*A,q=Math.sin(P)*Math.sin(N)+Math.cos(P)*Math.cos(N)*Math.cos((h.lng-this.lng)*A);return ky*Math.acos(Math.min(q,1))}toBounds(h=0){const A=360*h/40075017,P=A/Math.cos(Math.PI/180*this.lat);return new Mf(new Ps(this.lng-P,this.lat-A),new Ps(this.lng+P,this.lat+A))}static convert(h){if(h instanceof Ps)return h;if(Array.isArray(h)&&(h.length===2||h.length===3))return new Ps(Number(h[0]),Number(h[1]));if(!Array.isArray(h)&&typeof h=="object"&&h!==null)return new Ps(Number("lng"in h?h.lng:h.lon),Number(h.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}class Mf{constructor(h,A){h&&(A?this.setSouthWest(h).setNorthEast(A):h.length===4?this.setSouthWest([h[0],h[1]]).setNorthEast([h[2],h[3]]):this.setSouthWest(h[0]).setNorthEast(h[1]))}setNorthEast(h){return this._ne=h instanceof Ps?new Ps(h.lng,h.lat):Ps.convert(h),this}setSouthWest(h){return this._sw=h instanceof Ps?new Ps(h.lng,h.lat):Ps.convert(h),this}extend(h){const A=this._sw,P=this._ne;let N,q;if(h instanceof Ps)N=h,q=h;else{if(!(h instanceof Mf))return Array.isArray(h)?h.length===4||h.every(Array.isArray)?this.extend(Mf.convert(h)):this.extend(Ps.convert(h)):this;if(N=h._sw,q=h._ne,!N||!q)return this}return A||P?(A.lng=Math.min(N.lng,A.lng),A.lat=Math.min(N.lat,A.lat),P.lng=Math.max(q.lng,P.lng),P.lat=Math.max(q.lat,P.lat)):(this._sw=new Ps(N.lng,N.lat),this._ne=new Ps(q.lng,q.lat)),this}getCenter(){return new Ps((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new Ps(this.getWest(),this.getNorth())}getSouthEast(){return new Ps(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(h){const{lng:A,lat:P}=Ps.convert(h);let N=this._sw.lng<=A&&A<=this._ne.lng;return this._sw.lng>this._ne.lng&&(N=this._sw.lng>=A&&A>=this._ne.lng),this._sw.lat<=P&&P<=this._ne.lat&&N}static convert(h){return h instanceof Mf?h:h&&new Mf(h)}}const Sy=2*Math.PI*ky;function Cy(y){return Sy*Math.cos(y*Math.PI/180)}function Ey(y){return(180+y)/360}function Iy(y){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+y*Math.PI/360)))/360}function Ty(y,h){return y/Cy(h)}function vm(y){return 360/Math.PI*Math.atan(Math.exp((180-360*y)*Math.PI/180))-90}class Lp{constructor(h,A,P=0){this.x=+h,this.y=+A,this.z=+P}static fromLngLat(h,A=0){const P=Ps.convert(h);return new Lp(Ey(P.lng),Iy(P.lat),Ty(A,P.lat))}toLngLat(){return new Ps(360*this.x-180,vm(this.y))}toAltitude(){return this.z*Cy(vm(this.y))}meterInMercatorCoordinateUnits(){return 1/Sy*(h=vm(this.y),1/Math.cos(h*Math.PI/180));var h}}function Ly(y,h,A){var P=2*Math.PI*6378137/256/Math.pow(2,A);return[y*P-2*Math.PI*6378137/2,h*P-2*Math.PI*6378137/2]}class bm{constructor(h,A,P){if(h<0||h>25||P<0||P>=Math.pow(2,h)||A<0||A>=Math.pow(2,h))throw new Error(`x=${A}, y=${P}, z=${h} outside of bounds. 0<=x<${Math.pow(2,h)}, 0<=y<${Math.pow(2,h)} 0<=z<=25 `);this.z=h,this.x=A,this.y=P,this.key=pd(0,h,h,A,P)}equals(h){return this.z===h.z&&this.x===h.x&&this.y===h.y}url(h,A,P){const N=(Y=this.y,oe=this.z,fe=Ly(256*(q=this.x),256*(Y=Math.pow(2,oe)-Y-1),oe),xe=Ly(256*(q+1),256*(Y+1),oe),fe[0]+","+fe[1]+","+xe[0]+","+xe[1]);var q,Y,oe,fe,xe;const Fe=function(Ve,tt,lt){let ht,Zt="";for(let Vt=Ve;Vt>0;Vt--)ht=1<<Vt-1,Zt+=(tt&ht?1:0)+(lt&ht?2:0);return Zt}(this.z,this.x,this.y);return h[(this.x+this.y)%h.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(P==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,A>1?"@2x":"").replace(/{quadkey}/g,Fe).replace(/{bbox-epsg-3857}/g,N)}isChildOf(h){const A=this.z-h.z;return A>0&&h.x===this.x>>A&&h.y===this.y>>A}getTilePoint(h){const A=Math.pow(2,this.z);return new it((h.x*A-this.x)*Oo,(h.y*A-this.y)*Oo)}toString(){return`${this.z}/${this.x}/${this.y}`}}class Py{constructor(h,A){this.wrap=h,this.canonical=A,this.key=pd(h,A.z,A.z,A.x,A.y)}}class Cu{constructor(h,A,P,N,q){if(h<P)throw new Error(`overscaledZ should be >= z; overscaledZ = ${h}; z = ${P}`);this.overscaledZ=h,this.wrap=A,this.canonical=new bm(P,+N,+q),this.key=pd(A,h,P,N,q)}clone(){return new Cu(this.overscaledZ,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)}equals(h){return this.overscaledZ===h.overscaledZ&&this.wrap===h.wrap&&this.canonical.equals(h.canonical)}scaledTo(h){if(h>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${h}; overscaledZ = ${this.overscaledZ}`);const A=this.canonical.z-h;return h>this.canonical.z?new Cu(h,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new Cu(h,this.wrap,h,this.canonical.x>>A,this.canonical.y>>A)}calculateScaledKey(h,A){if(h>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${h}; overscaledZ = ${this.overscaledZ}`);const P=this.canonical.z-h;return h>this.canonical.z?pd(this.wrap*+A,h,this.canonical.z,this.canonical.x,this.canonical.y):pd(this.wrap*+A,h,h,this.canonical.x>>P,this.canonical.y>>P)}isChildOf(h){if(h.wrap!==this.wrap)return!1;const A=this.canonical.z-h.canonical.z;return h.overscaledZ===0||h.overscaledZ<this.overscaledZ&&h.canonical.x===this.canonical.x>>A&&h.canonical.y===this.canonical.y>>A}children(h){if(this.overscaledZ>=h)return[new Cu(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const A=this.canonical.z+1,P=2*this.canonical.x,N=2*this.canonical.y;return[new Cu(A,this.wrap,A,P,N),new Cu(A,this.wrap,A,P+1,N),new Cu(A,this.wrap,A,P,N+1),new Cu(A,this.wrap,A,P+1,N+1)]}isLessThan(h){return this.wrap<h.wrap||!(this.wrap>h.wrap)&&(this.overscaledZ<h.overscaledZ||!(this.overscaledZ>h.overscaledZ)&&(this.canonical.x<h.canonical.x||!(this.canonical.x>h.canonical.x)&&this.canonical.y<h.canonical.y))}wrapped(){return new Cu(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(h){return new Cu(this.overscaledZ,h,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new Py(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(h){return this.canonical.getTilePoint(new Lp(h.x-this.wrap,h.y))}}function pd(y,h,A,P,N){(y*=2)<0&&(y=-1*y-1);const q=1<<A;return(q*q*y+q*N+P).toString(36)+A.toString(36)+h.toString(36)}Pn("CanonicalTileID",bm),Pn("OverscaledTileID",Cu,{omit:["posMatrix"]});class My{constructor(h,A,P){if(this.uid=h,A.height!==A.width)throw new RangeError("DEM tiles must be square");if(P&&P!=="mapbox"&&P!=="terrarium")return void Z(`"${P}" is not a valid encoding type. Valid types include "mapbox" and "terrarium".`);this.stride=A.height;const N=this.dim=A.height-2;this.data=new Uint32Array(A.data.buffer),this.encoding=P||"mapbox";for(let q=0;q<N;q++)this.data[this._idx(-1,q)]=this.data[this._idx(0,q)],this.data[this._idx(N,q)]=this.data[this._idx(N-1,q)],this.data[this._idx(q,-1)]=this.data[this._idx(q,0)],this.data[this._idx(q,N)]=this.data[this._idx(q,N-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(N,-1)]=this.data[this._idx(N-1,0)],this.data[this._idx(-1,N)]=this.data[this._idx(0,N-1)],this.data[this._idx(N,N)]=this.data[this._idx(N-1,N-1)],this.min=Number.MAX_SAFE_INTEGER,this.max=Number.MIN_SAFE_INTEGER;for(let q=0;q<N;q++)for(let Y=0;Y<N;Y++){const oe=this.get(q,Y);oe>this.max&&(this.max=oe),oe<this.min&&(this.min=oe)}}get(h,A){const P=new Uint8Array(this.data.buffer),N=4*this._idx(h,A);return(this.encoding==="terrarium"?this._unpackTerrarium:this._unpackMapbox)(P[N],P[N+1],P[N+2])}getUnpackVector(){return this.encoding==="terrarium"?[256,1,1/256,32768]:[6553.6,25.6,.1,1e4]}_idx(h,A){if(h<-1||h>=this.dim+1||A<-1||A>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(A+1)*this.stride+(h+1)}_unpackMapbox(h,A,P){return(256*h*256+256*A+P)/10-1e4}_unpackTerrarium(h,A,P){return 256*h+A+P/256-32768}getPixels(){return new va({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(h,A,P){if(this.dim!==h.dim)throw new Error("dem dimension mismatch");let N=A*this.dim,q=A*this.dim+this.dim,Y=P*this.dim,oe=P*this.dim+this.dim;switch(A){case-1:N=q-1;break;case 1:q=N+1}switch(P){case-1:Y=oe-1;break;case 1:oe=Y+1}const fe=-A*this.dim,xe=-P*this.dim;for(let Fe=Y;Fe<oe;Fe++)for(let Ve=N;Ve<q;Ve++)this.data[this._idx(Ve,Fe)]=h.data[this._idx(Ve+fe,Fe+xe)]}}Pn("DEMData",My);class Dy{constructor(h){this._stringToNumber={},this._numberToString=[];for(let A=0;A<h.length;A++){const P=h[A];this._stringToNumber[P]=A,this._numberToString[A]=P}}encode(h){return this._stringToNumber[h]}decode(h){if(h>=this._numberToString.length)throw new Error(`Out of bounds. Index requested n=${h} can't be >= this._numberToString.length ${this._numberToString.length}`);return this._numberToString[h]}}class Oy{constructor(h,A,P,N,q){this.type="Feature",this._vectorTileFeature=h,h._z=A,h._x=P,h._y=N,this.properties=h.properties,this.id=q}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry}set geometry(h){this._geometry=h}toJSON(){const h={geometry:this.geometry};for(const A in this)A!=="_geometry"&&A!=="_vectorTileFeature"&&(h[A]=this[A]);return h}}class Fy{constructor(h,A){this.tileID=h,this.x=h.canonical.x,this.y=h.canonical.y,this.z=h.canonical.z,this.grid=new Tl(Oo,16,0),this.grid3D=new Tl(Oo,16,0),this.featureIndexArray=new Mr,this.promoteId=A}insert(h,A,P,N,q,Y){const oe=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(P,N,q);const fe=Y?this.grid3D:this.grid;for(let xe=0;xe<A.length;xe++){const Fe=A[xe],Ve=[1/0,1/0,-1/0,-1/0];for(let tt=0;tt<Fe.length;tt++){const lt=Fe[tt];Ve[0]=Math.min(Ve[0],lt.x),Ve[1]=Math.min(Ve[1],lt.y),Ve[2]=Math.max(Ve[2],lt.x),Ve[3]=Math.max(Ve[3],lt.y)}Ve[0]<Oo&&Ve[1]<Oo&&Ve[2]>=0&&Ve[3]>=0&&fe.insert(oe,Ve[0],Ve[1],Ve[2],Ve[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=new qc.VectorTile(new ni(this.rawTileData)).layers,this.sourceLayerCoder=new Dy(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers}query(h,A,P,N){this.loadVTLayers();const q=h.params||{},Y=Oo/h.tileSize/h.scale,oe=Fs(q.filter),fe=h.queryGeometry,xe=h.queryPadding*Y,Fe=By(fe),Ve=this.grid.query(Fe.minX-xe,Fe.minY-xe,Fe.maxX+xe,Fe.maxY+xe),tt=By(h.cameraQueryGeometry),lt=this.grid3D.query(tt.minX-xe,tt.minY-xe,tt.maxX+xe,tt.maxY+xe,(Vt,vi,Fi,gi)=>function(Li,$i,Qi,Xn,ir){for(const Mn of Li)if($i<=Mn.x&&Qi<=Mn.y&&Xn>=Mn.x&&ir>=Mn.y)return!0;const Un=[new it($i,Qi),new it($i,ir),new it(Xn,ir),new it(Xn,Qi)];if(Li.length>2){for(const Mn of Un)if(pc(Li,Mn))return!0}for(let Mn=0;Mn<Li.length-1;Mn++)if(jh(Li[Mn],Li[Mn+1],Un))return!0;return!1}(h.cameraQueryGeometry,Vt-xe,vi-xe,Fi+xe,gi+xe));for(const Vt of lt)Ve.push(Vt);Ve.sort(tx);const ht={};let Zt;for(let Vt=0;Vt<Ve.length;Vt++){const vi=Ve[Vt];if(vi===Zt)continue;Zt=vi;const Fi=this.featureIndexArray.get(vi);let gi=null;this.loadMatchingFeature(ht,Fi.bucketIndex,Fi.sourceLayerIndex,Fi.featureIndex,oe,q.layers,q.availableImages,A,P,N,(Li,$i,Qi)=>(gi||(gi=Ha(Li)),$i.queryIntersectsFeature(fe,Li,Qi,gi,this.z,h.transform,Y,h.pixelPosMatrix)))}return ht}loadMatchingFeature(h,A,P,N,q,Y,oe,fe,xe,Fe,Ve){const tt=this.bucketLayerIDs[A];if(Y&&!function(Vt,vi){for(let Fi=0;Fi<Vt.length;Fi++)if(vi.indexOf(Vt[Fi])>=0)return!0;return!1}(Y,tt))return;const lt=this.sourceLayerCoder.decode(P),ht=this.vtLayers[lt].feature(N);if(q.needGeometry){const Vt=ul(ht,!0);if(!q.filter(new No(this.tileID.overscaledZ),Vt,this.tileID.canonical))return}else if(!q.filter(new No(this.tileID.overscaledZ),ht))return;const Zt=this.getId(ht,lt);for(let Vt=0;Vt<tt.length;Vt++){const vi=tt[Vt];if(Y&&Y.indexOf(vi)<0)continue;const Fi=fe[vi];if(!Fi)continue;let gi={};Zt&&Fe&&(gi=Fe.getState(Fi.sourceLayer||"_geojsonTileLayer",Zt));const Li=C({},xe[vi]);Li.paint=Ry(Li.paint,Fi.paint,ht,gi,oe),Li.layout=Ry(Li.layout,Fi.layout,ht,gi,oe);const $i=!Ve||Ve(ht,Fi,gi);if(!$i)continue;const Qi=new Oy(ht,this.z,this.x,this.y,Zt);Qi.layer=Li;let Xn=h[vi];Xn===void 0&&(Xn=h[vi]=[]),Xn.push({featureIndex:N,feature:Qi,intersectionZ:$i})}}lookupSymbolFeatures(h,A,P,N,q,Y,oe,fe){const xe={};this.loadVTLayers();const Fe=Fs(q);for(const Ve of h)this.loadMatchingFeature(xe,P,N,Ve,Fe,Y,oe,fe,A);return xe}hasLayer(h){for(const A of this.bucketLayerIDs)for(const P of A)if(h===P)return!0;return!1}getId(h,A){let P=h.id;return this.promoteId&&(P=h.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[A]],typeof P=="boolean"&&(P=Number(P))),P}}function Ry(y,h,A,P,N){return M(y,(q,Y)=>{const oe=h instanceof uc?h.get(Y):null;return oe&&oe.evaluate?oe.evaluate(A,P,N):oe})}function By(y){let h=1/0,A=1/0,P=-1/0,N=-1/0;for(const q of y)h=Math.min(h,q.x),A=Math.min(A,q.y),P=Math.max(P,q.x),N=Math.max(N,q.y);return{minX:h,minY:A,maxX:P,maxY:N}}function tx(y,h){return h-y}var wm;Pn("FeatureIndex",Fy,{omit:["rawTileData","sourceLayerCoder"]}),r.PerformanceMarkers=void 0,(wm=r.PerformanceMarkers||(r.PerformanceMarkers={})).create="create",wm.load="load",wm.fullLoad="fullLoad";let Pp=null,md=[];const xm=1e3/30,ix={mark(y){performance.mark(y)},frame(y){const h=y;Pp!=null&&md.push(h-Pp),Pp=h},clearMetrics(){Pp=null,md=[],performance.clearMeasures("loadTime"),performance.clearMeasures("fullLoadTime");for(const y in r.PerformanceMarkers)performance.clearMarks(r.PerformanceMarkers[y])},getPerformanceMetrics(){performance.measure("loadTime",r.PerformanceMarkers.create,r.PerformanceMarkers.load),performance.measure("fullLoadTime",r.PerformanceMarkers.create,r.PerformanceMarkers.fullLoad);const y=performance.getEntriesByName("loadTime")[0].duration,h=performance.getEntriesByName("fullLoadTime")[0].duration,A=md.length,P=1/(md.reduce((q,Y)=>q+Y,0)/A/1e3),N=md.filter(q=>q>xm).reduce((q,Y)=>q+(Y-xm)/xm,0);return{loadTime:y,fullLoadTime:h,fps:P,percentDroppedFrames:N/(A+N)*100}}};r.AJAXError=ut,r.ARRAY_TYPE=Js,r.Actor=class{constructor(y,h,A){this.target=y,this.parent=h,this.mapId=A,this.callbacks={},this.tasks={},this.taskQueue=[],this.cancelCallbacks={},S(["receive","process"],this),this.invoker=new ex(this.process),this.target.addEventListener("message",this.receive,!1),this.globalScope=ie()?y:window}send(y,h,A,P,N=!1){const q=Math.round(1e18*Math.random()).toString(36).substring(0,10);A&&(this.callbacks[q]=A);const Y=ve(this.globalScope)?void 0:[];return this.target.postMessage({id:q,type:y,hasCallback:!!A,targetMapId:P,mustQueue:N,sourceMapId:this.mapId,data:Hr(h,Y)},Y),{cancel:()=>{A&&delete this.callbacks[q],this.target.postMessage({id:q,type:"<cancel>",targetMapId:P,sourceMapId:this.mapId})}}}receive(y){const h=y.data,A=h.id;if(A&&(!h.targetMapId||this.mapId===h.targetMapId))if(h.type==="<cancel>"){delete this.tasks[A];const P=this.cancelCallbacks[A];delete this.cancelCallbacks[A],P&&P()}else ie()||h.mustQueue?(this.tasks[A]=h,this.taskQueue.push(A),this.invoker.trigger()):this.processTask(A,h)}process(){if(!this.taskQueue.length)return;const y=this.taskQueue.shift(),h=this.tasks[y];delete this.tasks[y],this.taskQueue.length&&this.invoker.trigger(),h&&this.processTask(y,h)}processTask(y,h){if(h.type==="<response>"){const A=this.callbacks[y];delete this.callbacks[y],A&&(h.error?A(Po(h.error)):A(null,Po(h.data)))}else{let A=!1;const P=ve(this.globalScope)?void 0:[],N=h.hasCallback?(oe,fe)=>{A=!0,delete this.cancelCallbacks[y],this.target.postMessage({id:y,type:"<response>",sourceMapId:this.mapId,error:oe?Hr(oe):null,data:Hr(fe,P)},P)}:oe=>{A=!0};let q=null;const Y=Po(h.data);if(this.parent[h.type])q=this.parent[h.type](h.sourceMapId,Y,N);else if(this.parent.getWorkerSource){const oe=h.type.split(".");q=this.parent.getWorkerSource(h.sourceMapId,oe[0],Y.source)[oe[1]](Y,N)}else N(new Error(`Could not find function ${h.type}`));!A&&q&&q.cancel&&(this.cancelCallbacks[y]=q.cancel)}}remove(){this.invoker.remove(),this.target.removeEventListener("message",this.receive,!1)}},r.AlphaImage=yc,r.CanonicalTileID=bm,r.CollisionBoxArray=Vi,r.CollisionCircleLayoutArray=class extends ze{},r.Color=dt,r.DEMData=My,r.DataConstantProperty=er,r.DictionaryCoder=Dy,r.EXTENT=Oo,r.ErrorEvent=ti,r.EvaluationParameters=No,r.Event=Ci,r.Evented=Me,r.FeatureIndex=Fy,r.FillBucket=hd,r.FillExtrusionBucket=Lf,r.GeoJSONFeature=Oy,r.ImageAtlas=oy,r.ImagePosition=um,r.LineBucket=E,r.LineStripIndexArray=class extends Nt{},r.LngLat=Ps,r.LngLatBounds=Mf,r.MercatorCoordinate=Lp,r.ONE_EM=Ot,r.OverscaledTileID=Cu,r.PerformanceUtils=ix,r.PosArray=j,r.Properties=Ho,r.QuadTriangleArray=class extends rt{},r.RGBAImage=va,r.RasterBoundsArray=class extends B{},r.RequestPerformance=class{constructor(y){this._marks={start:[y.url,"start"].join("#"),end:[y.url,"end"].join("#"),measure:y.url.toString()},performance.mark(this._marks.start)}finish(){performance.mark(this._marks.end);let y=performance.getEntriesByName(this._marks.measure);return y.length===0&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),y=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),y}},r.ResourceType=ri,r.SegmentVector=Wt,r.SymbolBucket=_0,r.Transitionable=Bc,r.TriangleIndexArray=wi,r.Uniform1f=mo,r.Uniform1i=class extends qr{constructor(y,h){super(y,h),this.current=0}set(y){this.current!==y&&(this.current=y,this.gl.uniform1i(this.location,y))}},r.Uniform2f=class extends qr{constructor(y,h){super(y,h),this.current=[0,0]}set(y){y[0]===this.current[0]&&y[1]===this.current[1]||(this.current=y,this.gl.uniform2f(this.location,y[0],y[1]))}},r.Uniform3f=class extends qr{constructor(y,h){super(y,h),this.current=[0,0,0]}set(y){y[0]===this.current[0]&&y[1]===this.current[1]&&y[2]===this.current[2]||(this.current=y,this.gl.uniform3f(this.location,y[0],y[1],y[2]))}},r.Uniform4f=Co,r.UniformColor=Gr,r.UniformMatrix4f=class extends qr{constructor(y,h){super(y,h),this.current=Is}set(y){if(y[12]!==this.current[12]||y[0]!==this.current[0])return this.current=y,void this.gl.uniformMatrix4fv(this.location,!1,y);for(let h=1;h<16;h++)if(y[h]!==this.current[h]){this.current=y,this.gl.uniformMatrix4fv(this.location,!1,y);break}}},r.UnwrappedTileID=Py,r.ValidationError=ae,r.ZoomHistory=is,r.add=function(y,h,A){return y[0]=h[0]+A[0],y[1]=h[1]+A[1],y[2]=h[2]+A[2],y},r.addDynamicAttributes=pm,r.asyncAll=function(y,h,A){if(!y.length)return A(null,[]);let P=y.length;const N=new Array(y.length);let q=null;y.forEach((Y,oe)=>{h(Y,(fe,xe)=>{fe&&(q=fe),N[oe]=xe,--P==0&&A(q,N)})})},r.bezier=b,r.bindAll=S,r.cacheEntryPossiblyAdded=function(y){me++,me>Se&&(y.getActor().send("enforceCacheSizeLimit",le),me=0)},r.clamp=w,r.clearTileCache=function(y){const h=caches.delete(we);y&&h.catch(y).then(()=>y())},r.clipLine=yy,r.clone=function(y){var h=new Js(16);return h[0]=y[0],h[1]=y[1],h[2]=y[2],h[3]=y[3],h[4]=y[4],h[5]=y[5],h[6]=y[6],h[7]=y[7],h[8]=y[8],h[9]=y[9],h[10]=y[10],h[11]=y[11],h[12]=y[12],h[13]=y[13],h[14]=y[14],h[15]=y[15],h},r.clone$1=V,r.clone$2=function(y){var h=new Js(3);return h[0]=y[0],h[1]=y[1],h[2]=y[2],h},r.collisionCircleLayout=Ze,r.config=Xe,r.copy=function(y,h){return y[0]=h[0],y[1]=h[1],y[2]=h[2],y[3]=h[3],y[4]=h[4],y[5]=h[5],y[6]=h[6],y[7]=h[7],y[8]=h[8],y[9]=h[9],y[10]=h[10],y[11]=h[11],y[12]=h[12],y[13]=h[13],y[14]=h[14],y[15]=h[15],y},r.create=function(){var y=new Js(16);return Js!=Float32Array&&(y[1]=0,y[2]=0,y[3]=0,y[4]=0,y[6]=0,y[7]=0,y[8]=0,y[9]=0,y[11]=0,y[12]=0,y[13]=0,y[14]=0),y[0]=1,y[5]=1,y[10]=1,y[15]=1,y},r.create$1=Ls,r.createExpression=qo,r.createFilter=Fs,r.createLayout=ms,r.createStyleLayer=function(y){return y.type==="custom"?new Q3(y):new $3[y.type](y)},r.cross=function(y,h,A){var P=h[0],N=h[1],q=h[2],Y=A[0],oe=A[1],fe=A[2];return y[0]=N*fe-q*oe,y[1]=q*Y-P*fe,y[2]=P*oe-N*Y,y},r.dot=function(y,h){return y[0]*h[0]+y[1]*h[1]+y[2]*h[2]},r.dot$1=function(y,h){return y[0]*h[0]+y[1]*h[1]+y[2]*h[2]+y[3]*h[3]},r.ease=v,r.emitValidationErrors=Gs,r.enforceCacheSizeLimit=function(y){he(),Ce&&Ce.then(h=>{h.keys().then(A=>{for(let P=0;P<A.length-y;P++)h.delete(A[P])})})},r.equals=function(y,h){var A=y[0],P=y[1],N=y[2],q=y[3],Y=y[4],oe=y[5],fe=y[6],xe=y[7],Fe=y[8],Ve=y[9],tt=y[10],lt=y[11],ht=y[12],Zt=y[13],Vt=y[14],vi=y[15],Fi=h[0],gi=h[1],Li=h[2],$i=h[3],Qi=h[4],Xn=h[5],ir=h[6],Un=h[7],Mn=h[8],An=h[9],Vn=h[10],Bn=h[11],pn=h[12],vr=h[13],ar=h[14],Qr=h[15];return Math.abs(A-Fi)<=aa*Math.max(1,Math.abs(A),Math.abs(Fi))&&Math.abs(P-gi)<=aa*Math.max(1,Math.abs(P),Math.abs(gi))&&Math.abs(N-Li)<=aa*Math.max(1,Math.abs(N),Math.abs(Li))&&Math.abs(q-$i)<=aa*Math.max(1,Math.abs(q),Math.abs($i))&&Math.abs(Y-Qi)<=aa*Math.max(1,Math.abs(Y),Math.abs(Qi))&&Math.abs(oe-Xn)<=aa*Math.max(1,Math.abs(oe),Math.abs(Xn))&&Math.abs(fe-ir)<=aa*Math.max(1,Math.abs(fe),Math.abs(ir))&&Math.abs(xe-Un)<=aa*Math.max(1,Math.abs(xe),Math.abs(Un))&&Math.abs(Fe-Mn)<=aa*Math.max(1,Math.abs(Fe),Math.abs(Mn))&&Math.abs(Ve-An)<=aa*Math.max(1,Math.abs(Ve),Math.abs(An))&&Math.abs(tt-Vn)<=aa*Math.max(1,Math.abs(tt),Math.abs(Vn))&&Math.abs(lt-Bn)<=aa*Math.max(1,Math.abs(lt),Math.abs(Bn))&&Math.abs(ht-pn)<=aa*Math.max(1,Math.abs(ht),Math.abs(pn))&&Math.abs(Zt-vr)<=aa*Math.max(1,Math.abs(Zt),Math.abs(vr))&&Math.abs(Vt-ar)<=aa*Math.max(1,Math.abs(Vt),Math.abs(ar))&&Math.abs(vi-Qr)<=aa*Math.max(1,Math.abs(vi),Math.abs(Qr))},r.evaluateSizeForFeature=function(y,{uSize:h,uSizeT:A},{lowerSize:P,upperSize:N}){return y.kind==="source"?P/_h:y.kind==="composite"?Io(P/_h,N/_h,A):h},r.evaluateSizeForZoom=function(y,h){let A=0,P=0;if(y.kind==="constant")P=y.layoutSize;else if(y.kind!=="source"){const{interpolationType:N,minZoom:q,maxZoom:Y}=y,oe=N?w(Di.interpolationFactor(N,h,q,Y),0,1):0;y.kind==="camera"?P=Io(y.minSize,y.maxSize,oe):A=oe}return{uSizeT:A,uSize:P}},r.evaluateVariableOffset=by,r.evented=wu,r.exported=ot,r.exported$1=Be,r.extend=C,r.filterObject=O,r.fromRotation=function(y,h){var A=Math.sin(h),P=Math.cos(h);return y[0]=P,y[1]=A,y[2]=0,y[3]=-A,y[4]=P,y[5]=0,y[6]=0,y[7]=0,y[8]=1,y},r.fromScaling=function(y,h){return y[0]=h[0],y[1]=0,y[2]=0,y[3]=0,y[4]=0,y[5]=h[1],y[6]=0,y[7]=0,y[8]=0,y[9]=0,y[10]=h[2],y[11]=0,y[12]=0,y[13]=0,y[14]=0,y[15]=1,y},r.getAnchorAlignment=hm,r.getAnchorJustification=dm,r.getArrayBuffer=ei,r.getImage=Xt,r.getJSON=function(y,h){return Je(C(y,{type:"json"}),h)},r.getOverlapMode=_m,r.getRTLTextPluginStatus=Yl,r.getReferrer=wt,r.getVideo=function(y,h){const A=window.document.createElement("video");A.muted=!0,A.onloadstart=function(){h(null,A)};for(let P=0;P<y.length;P++){const N=window.document.createElement("source");li(y[P])||(A.crossOrigin="Anonymous"),N.src=y[P],A.appendChild(N)}return{cancel:()=>{}}},r.identity=Ql,r.invert=function(y,h){var A=h[0],P=h[1],N=h[2],q=h[3],Y=h[4],oe=h[5],fe=h[6],xe=h[7],Fe=h[8],Ve=h[9],tt=h[10],lt=h[11],ht=h[12],Zt=h[13],Vt=h[14],vi=h[15],Fi=A*oe-P*Y,gi=A*fe-N*Y,Li=A*xe-q*Y,$i=P*fe-N*oe,Qi=P*xe-q*oe,Xn=N*xe-q*fe,ir=Fe*Zt-Ve*ht,Un=Fe*Vt-tt*ht,Mn=Fe*vi-lt*ht,An=Ve*Vt-tt*Zt,Vn=Ve*vi-lt*Zt,Bn=tt*vi-lt*Vt,pn=Fi*Bn-gi*Vn+Li*An+$i*Mn-Qi*Un+Xn*ir;return pn?(y[0]=(oe*Bn-fe*Vn+xe*An)*(pn=1/pn),y[1]=(N*Vn-P*Bn-q*An)*pn,y[2]=(Zt*Xn-Vt*Qi+vi*$i)*pn,y[3]=(tt*Qi-Ve*Xn-lt*$i)*pn,y[4]=(fe*Mn-Y*Bn-xe*Un)*pn,y[5]=(A*Bn-N*Mn+q*Un)*pn,y[6]=(Vt*Li-ht*Xn-vi*gi)*pn,y[7]=(Fe*Xn-tt*Li+lt*gi)*pn,y[8]=(Y*Vn-oe*Mn+xe*ir)*pn,y[9]=(P*Mn-A*Vn-q*ir)*pn,y[10]=(ht*Qi-Zt*Li+vi*Fi)*pn,y[11]=(Ve*Li-Fe*Qi-lt*Fi)*pn,y[12]=(oe*Un-Y*An-fe*ir)*pn,y[13]=(A*An-P*Un+N*ir)*pn,y[14]=(Zt*gi-ht*$i-Vt*Fi)*pn,y[15]=(Fe*$i-Ve*gi+tt*Fi)*pn,y):null},r.isImageBitmap=_e,r.isSafari=ve,r.isWorker=ie,r.keysDifference=function(y,h){const A=[];for(const P in y)P in h||A.push(P);return A},r.lazyLoadRTLTextPlugin=function(){ya.isLoading()||ya.isLoaded()||Yl()!=="deferred"||io()},r.makeRequest=Je,r.mapObject=M,r.mercatorXfromLng=Ey,r.mercatorYfromLat=Iy,r.mercatorZfromAltitude=Ty,r.mul=s0,r.mul$1=function(y,h,A){return y[0]=h[0]*A[0],y[1]=h[1]*A[1],y[2]=h[2]*A[2],y[3]=h[3]*A[3],y},r.multiply=o0,r.nextPowerOfTwo=function(y){return y<=1?1:Math.pow(2,Math.ceil(Math.log(y)/Math.LN2))},r.normalize=function(y,h){var A=h[0],P=h[1],N=h[2],q=A*A+P*P+N*N;return q>0&&(q=1/Math.sqrt(q)),y[0]=h[0]*q,y[1]=h[1]*q,y[2]=h[2]*q,y},r.number=Io,r.ortho=function(y,h,A,P,N,q,Y){var oe=1/(h-A),fe=1/(P-N),xe=1/(q-Y);return y[0]=-2*oe,y[1]=0,y[2]=0,y[3]=0,y[4]=0,y[5]=-2*fe,y[6]=0,y[7]=0,y[8]=0,y[9]=0,y[10]=2*xe,y[11]=0,y[12]=(h+A)*oe,y[13]=(N+P)*fe,y[14]=(Y+q)*xe,y[15]=1,y},r.parseCacheControl=Ee,r.parseGlyphPbf=function(y){return new ni(y).readFields(P3,[])},r.pbf=ni,r.performSymbolLayout=function(y){y.bucket.createArrays(),y.bucket.tilePixelRatio=Oo/(512*y.bucket.overscaling),y.bucket.compareText={},y.bucket.iconsNeedLinear=!1;const h=y.bucket.layers[0].layout,A=y.bucket.layers[0]._unevaluatedLayout._values,P={layoutIconSize:A["icon-size"].possiblyEvaluate(new No(y.bucket.zoom+1),y.canonical),layoutTextSize:A["text-size"].possiblyEvaluate(new No(y.bucket.zoom+1),y.canonical),textMaxSize:A["text-size"].possiblyEvaluate(new No(18))};if(y.bucket.textSizeData.kind==="composite"){const{minZoom:fe,maxZoom:xe}=y.bucket.textSizeData;P.compositeTextSizes=[A["text-size"].possiblyEvaluate(new No(fe),y.canonical),A["text-size"].possiblyEvaluate(new No(xe),y.canonical)]}if(y.bucket.iconSizeData.kind==="composite"){const{minZoom:fe,maxZoom:xe}=y.bucket.iconSizeData;P.compositeIconSizes=[A["icon-size"].possiblyEvaluate(new No(fe),y.canonical),A["icon-size"].possiblyEvaluate(new No(xe),y.canonical)]}const N=h.get("text-line-height")*Ot,q=h.get("text-rotation-alignment")!=="viewport"&&h.get("symbol-placement")!=="point",Y=h.get("text-keep-upright"),oe=h.get("text-size");for(const fe of y.bucket.features){const xe=h.get("text-font").evaluate(fe,{},y.canonical).join(","),Fe=oe.evaluate(fe,{},y.canonical),Ve=P.layoutTextSize.evaluate(fe,{},y.canonical),tt=P.layoutIconSize.evaluate(fe,{},y.canonical),lt={horizontal:{},vertical:void 0},ht=fe.text;let Zt,Vt=[0,0];if(ht){const gi=ht.toString(),Li=h.get("text-letter-spacing").evaluate(fe,{},y.canonical)*Ot,$i=Vu(gi)?Li:0,Qi=h.get("text-anchor").evaluate(fe,{},y.canonical),Xn=h.get("text-variable-anchor");if(!Xn){const Vn=h.get("text-radial-offset").evaluate(fe,{},y.canonical);Vt=Vn?by(Qi,[Vn*Ot,fm]):h.get("text-offset").evaluate(fe,{},y.canonical).map(Bn=>Bn*Ot)}let ir=q?"center":h.get("text-justify").evaluate(fe,{},y.canonical);const Un=h.get("symbol-placement"),Mn=Un==="point"?h.get("text-max-width").evaluate(fe,{},y.canonical)*Ot:0,An=()=>{y.bucket.allowVerticalPlacement&&Da(gi)&&(lt.vertical=xp(ht,y.glyphMap,y.glyphPositions,y.imagePositions,xe,Mn,N,Qi,"left",$i,Vt,r.WritingMode.vertical,!0,Un,Ve,Fe))};if(!q&&Xn){const Vn=ir==="auto"?Xn.map(pn=>dm(pn)):[ir];let Bn=!1;for(let pn=0;pn<Vn.length;pn++){const vr=Vn[pn];if(!lt.horizontal[vr])if(Bn)lt.horizontal[vr]=lt.horizontal[0];else{const ar=xp(ht,y.glyphMap,y.glyphPositions,y.imagePositions,xe,Mn,N,"center",vr,$i,Vt,r.WritingMode.horizontal,!1,Un,Ve,Fe);ar&&(lt.horizontal[vr]=ar,Bn=ar.positionedLines.length===1)}}An()}else{ir==="auto"&&(ir=dm(Qi));const Vn=xp(ht,y.glyphMap,y.glyphPositions,y.imagePositions,xe,Mn,N,Qi,ir,$i,Vt,r.WritingMode.horizontal,!1,Un,Ve,Fe);Vn&&(lt.horizontal[ir]=Vn),An(),Da(gi)&&q&&Y&&(lt.vertical=xp(ht,y.glyphMap,y.glyphPositions,y.imagePositions,xe,Mn,N,Qi,ir,$i,Vt,r.WritingMode.vertical,!1,Un,Ve,Fe))}}let vi=!1;if(fe.icon&&fe.icon.name){const gi=y.imageMap[fe.icon.name];gi&&(Zt=B3(y.imagePositions[fe.icon.name],h.get("icon-offset").evaluate(fe,{},y.canonical),h.get("icon-anchor").evaluate(fe,{},y.canonical)),vi=!!gi.sdf,y.bucket.sdfIcons===void 0?y.bucket.sdfIcons=vi:y.bucket.sdfIcons!==vi&&Z("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(gi.pixelRatio!==y.bucket.pixelRatio||h.get("icon-rotate").constantOr(1)!==0)&&(y.bucket.iconsNeedLinear=!0))}const Fi=xy(lt.horizontal)||lt.vertical;y.bucket.iconsInText=!!Fi&&Fi.iconsInText,(Fi||Zt)&&H3(y.bucket,fe,lt,Zt,y.imageMap,P,Ve,tt,Vt,vi,y.canonical)}y.showCollisionBoxes&&y.bucket.generateCollisionDebugBuffers()},r.perspective=function(y,h,A,P,N){var q,Y=1/Math.tan(h/2);return y[0]=Y/A,y[1]=0,y[2]=0,y[3]=0,y[4]=0,y[5]=Y,y[6]=0,y[7]=0,y[8]=0,y[9]=0,y[11]=-1,y[12]=0,y[13]=0,y[15]=0,N!=null&&N!==1/0?(y[10]=(N+P)*(q=1/(P-N)),y[14]=2*N*P*q):(y[10]=-1,y[14]=-2*P),y},r.pick=function(y,h){const A={};for(let P=0;P<h.length;P++){const N=h[P];N in y&&(A[N]=y[N])}return A},r.plugin=ya,r.pointGeometry=it,r.polygonIntersectsPolygon=zh,r.potpack=ry,r.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],r.register=Pn,r.registerForPluginStateChange=function(y){return y({pluginStatus:Xo,pluginURL:Va}),wu.on("pluginStateChange",y),y},r.renderColorRamp=eu,r.rotateX=function(y,h,A){var P=Math.sin(A),N=Math.cos(A),q=h[4],Y=h[5],oe=h[6],fe=h[7],xe=h[8],Fe=h[9],Ve=h[10],tt=h[11];return h!==y&&(y[0]=h[0],y[1]=h[1],y[2]=h[2],y[3]=h[3],y[12]=h[12],y[13]=h[13],y[14]=h[14],y[15]=h[15]),y[4]=q*N+xe*P,y[5]=Y*N+Fe*P,y[6]=oe*N+Ve*P,y[7]=fe*N+tt*P,y[8]=xe*N-q*P,y[9]=Fe*N-Y*P,y[10]=Ve*N-oe*P,y[11]=tt*N-fe*P,y},r.rotateZ=function(y,h,A){var P=Math.sin(A),N=Math.cos(A),q=h[0],Y=h[1],oe=h[2],fe=h[3],xe=h[4],Fe=h[5],Ve=h[6],tt=h[7];return h!==y&&(y[8]=h[8],y[9]=h[9],y[10]=h[10],y[11]=h[11],y[12]=h[12],y[13]=h[13],y[14]=h[14],y[15]=h[15]),y[0]=q*N+xe*P,y[1]=Y*N+Fe*P,y[2]=oe*N+Ve*P,y[3]=fe*N+tt*P,y[4]=xe*N-q*P,y[5]=Fe*N-Y*P,y[6]=Ve*N-oe*P,y[7]=tt*N-fe*P,y},r.scale=function(y,h,A){var P=A[0],N=A[1],q=A[2];return y[0]=h[0]*P,y[1]=h[1]*P,y[2]=h[2]*P,y[3]=h[3]*P,y[4]=h[4]*N,y[5]=h[5]*N,y[6]=h[6]*N,y[7]=h[7]*N,y[8]=h[8]*q,y[9]=h[9]*q,y[10]=h[10]*q,y[11]=h[11]*q,y[12]=h[12],y[13]=h[13],y[14]=h[14],y[15]=h[15],y},r.scale$1=function(y,h,A){return y[0]=h[0]*A,y[1]=h[1]*A,y[2]=h[2]*A,y},r.setCacheLimits=function(y,h){le=y,Se=h},r.setRTLTextPlugin=function(y,h,A=!1){if(Xo===Rc||Xo===ac||Xo===Jo)throw new Error("setRTLTextPlugin cannot be called multiple times.");Va=ot.resolveURL(y),Xo=Rc,Ks=h,bu(),A||io()},r.spec=Q,r.sphericalToCartesian=function([y,h,A]){return h+=90,h*=Math.PI/180,A*=Math.PI/180,{x:y*Math.cos(h)*Math.sin(A),y:y*Math.sin(h)*Math.sin(A),z:y*Math.cos(A)}},r.sqrLen=function(y){var h=y[0],A=y[1];return h*h+A*A},r.sub=function(y,h,A){return y[0]=h[0]-A[0],y[1]=h[1]-A[1],y[2]=h[2]-A[2],y},r.toEvaluationFeature=ul,r.transformMat3=function(y,h,A){var P=h[0],N=h[1],q=h[2];return y[0]=P*A[0]+N*A[3]+q*A[6],y[1]=P*A[1]+N*A[4]+q*A[7],y[2]=P*A[2]+N*A[5]+q*A[8],y},r.transformMat4=Uc,r.transformMat4$1=function(y,h,A){var P=h[0],N=h[1];return y[0]=A[0]*P+A[4]*N+A[12],y[1]=A[1]*P+A[5]*N+A[13],y},r.translate=function(y,h,A){var P,N,q,Y,oe,fe,xe,Fe,Ve,tt,lt,ht,Zt=A[0],Vt=A[1],vi=A[2];return h===y?(y[12]=h[0]*Zt+h[4]*Vt+h[8]*vi+h[12],y[13]=h[1]*Zt+h[5]*Vt+h[9]*vi+h[13],y[14]=h[2]*Zt+h[6]*Vt+h[10]*vi+h[14],y[15]=h[3]*Zt+h[7]*Vt+h[11]*vi+h[15]):(N=h[1],q=h[2],Y=h[3],oe=h[4],fe=h[5],xe=h[6],Fe=h[7],Ve=h[8],tt=h[9],lt=h[10],ht=h[11],y[0]=P=h[0],y[1]=N,y[2]=q,y[3]=Y,y[4]=oe,y[5]=fe,y[6]=xe,y[7]=Fe,y[8]=Ve,y[9]=tt,y[10]=lt,y[11]=ht,y[12]=P*Zt+oe*Vt+Ve*vi+h[12],y[13]=N*Zt+fe*Vt+tt*vi+h[13],y[14]=q*Zt+xe*Vt+lt*vi+h[14],y[15]=Y*Zt+Fe*Vt+ht*vi+h[15]),y},r.triggerPluginCompletionEvent=lc,r.unicodeBlockLookup=yn,r.uniqueId=function(){return T++},r.validateCustomStyleLayer=function(y){const h=[],A=y.id;return A===void 0&&h.push({message:`layers.${A}: missing required property "id"`}),y.render===void 0&&h.push({message:`layers.${A}: missing required method "render"`}),y.renderingMode&&y.renderingMode!=="2d"&&y.renderingMode!=="3d"&&h.push({message:`layers.${A}: property "renderingMode" must be either "2d" or "3d"`}),h},r.validateLight=Il,r.validateStyle=ga,r.vectorTile=qc,r.warnOnce=Z,r.wrap=x}),u(["./shared"],function(r){function f(Le){const Ie=typeof Le;if(Ie==="number"||Ie==="boolean"||Ie==="string"||Le==null)return JSON.stringify(Le);if(Array.isArray(Le)){let dt="[";for(const Bt of Le)dt+=`${f(Bt)},`;return`${dt}]`}const qe=Object.keys(Le).sort();let ct="{";for(let dt=0;dt<qe.length;dt++)ct+=`${JSON.stringify(qe[dt])}:${f(Le[qe[dt]])},`;return`${ct}}`}function _(Le){let Ie="";for(const qe of r.refProperties)Ie+=`/${f(Le[qe])}`;return Ie}class b{constructor(Ie){this.keyCache={},Ie&&this.replace(Ie)}replace(Ie){this._layerConfigs={},this._layers={},this.update(Ie,[])}update(Ie,qe){for(const dt of Ie){this._layerConfigs[dt.id]=dt;const Bt=this._layers[dt.id]=r.createStyleLayer(dt);Bt._featureFilter=r.createFilter(Bt.filter),this.keyCache[dt.id]&&delete this.keyCache[dt.id]}for(const dt of qe)delete this.keyCache[dt],delete this._layerConfigs[dt],delete this._layers[dt];this.familiesBySource={};const ct=function(dt,Bt){const Ge={};for(let Ft=0;Ft<dt.length;Ft++){const oi=Bt&&Bt[dt[Ft].id]||_(dt[Ft]);Bt&&(Bt[dt[Ft].id]=oi);let yt=Ge[oi];yt||(yt=Ge[oi]=[]),yt.push(dt[Ft])}const Yt=[];for(const Ft in Ge)Yt.push(Ge[Ft]);return Yt}(Object.values(this._layerConfigs),this.keyCache);for(const dt of ct){const Bt=dt.map(Ri=>this._layers[Ri.id]),Ge=Bt[0];if(Ge.visibility==="none")continue;const Yt=Ge.source||"";let Ft=this.familiesBySource[Yt];Ft||(Ft=this.familiesBySource[Yt]={});const oi=Ge.sourceLayer||"_geojsonTileLayer";let yt=Ft[oi];yt||(yt=Ft[oi]=[]),yt.push(Bt)}}}class v{constructor(Ie){const qe={},ct=[];for(const Yt in Ie){const Ft=Ie[Yt],oi=qe[Yt]={};for(const yt in Ft){const Ri=Ft[+yt];if(!Ri||Ri.bitmap.width===0||Ri.bitmap.height===0)continue;const Ii={x:0,y:0,w:Ri.bitmap.width+2,h:Ri.bitmap.height+2};ct.push(Ii),oi[yt]={rect:Ii,metrics:Ri.metrics}}}const{w:dt,h:Bt}=r.potpack(ct),Ge=new r.AlphaImage({width:dt||1,height:Bt||1});for(const Yt in Ie){const Ft=Ie[Yt];for(const oi in Ft){const yt=Ft[+oi];if(!yt||yt.bitmap.width===0||yt.bitmap.height===0)continue;const Ri=qe[Yt][oi].rect;r.AlphaImage.copy(yt.bitmap,Ge,{x:0,y:0},{x:Ri.x+1,y:Ri.y+1},yt.bitmap)}}this.image=Ge,this.positions=qe}}r.register("GlyphAtlas",v);class w{constructor(Ie){this.tileID=new r.OverscaledTileID(Ie.tileID.overscaledZ,Ie.tileID.wrap,Ie.tileID.canonical.z,Ie.tileID.canonical.x,Ie.tileID.canonical.y),this.uid=Ie.uid,this.zoom=Ie.zoom,this.pixelRatio=Ie.pixelRatio,this.tileSize=Ie.tileSize,this.source=Ie.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=Ie.showCollisionBoxes,this.collectResourceTiming=!!Ie.collectResourceTiming,this.returnDependencies=!!Ie.returnDependencies,this.promoteId=Ie.promoteId}parse(Ie,qe,ct,dt,Bt){this.status="parsing",this.data=Ie,this.collisionBoxArray=new r.CollisionBoxArray;const Ge=new r.DictionaryCoder(Object.keys(Ie.layers).sort()),Yt=new r.FeatureIndex(this.tileID,this.promoteId);Yt.bucketLayerIDs=[];const Ft={},oi={featureIndex:Yt,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:ct},yt=qe.familiesBySource[this.source];for(const dr in yt){const Cr=Ie.layers[dr];if(!Cr)continue;Cr.version===1&&r.warnOnce(`Vector tile source "${this.source}" layer "${dr}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const Pr=Ge.encode(dr),to=[];for(let Jr=0;Jr<Cr.length;Jr++){const vo=Cr.feature(Jr),$o=Yt.getId(vo,dr);to.push({feature:vo,id:$o,index:Jr,sourceLayerIndex:Pr})}for(const Jr of yt[dr]){const vo=Jr[0];vo.source!==this.source&&r.warnOnce(`layer.source = ${vo.source} does not equal this.source = ${this.source}`),vo.minzoom&&this.zoom<Math.floor(vo.minzoom)||vo.maxzoom&&this.zoom>=vo.maxzoom||vo.visibility!=="none"&&(x(Jr,this.zoom,ct),(Ft[vo.id]=vo.createBucket({index:Yt.bucketLayerIDs.length,layers:Jr,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:Pr,sourceID:this.source})).populate(to,oi,this.tileID.canonical),Yt.bucketLayerIDs.push(Jr.map($o=>$o.id)))}}let Ri,Ii,En,Sn;const xt=r.mapObject(oi.glyphDependencies,dr=>Object.keys(dr).map(Number));Object.keys(xt).length?dt.send("getGlyphs",{uid:this.uid,stacks:xt},(dr,Cr)=>{Ri||(Ri=dr,Ii=Cr,Lr.call(this))}):Ii={};const Tn=Object.keys(oi.iconDependencies);Tn.length?dt.send("getImages",{icons:Tn,source:this.source,tileID:this.tileID,type:"icons"},(dr,Cr)=>{Ri||(Ri=dr,En=Cr,Lr.call(this))}):En={};const Qn=Object.keys(oi.patternDependencies);function Lr(){if(Ri)return Bt(Ri);if(Ii&&En&&Sn){const dr=new v(Ii),Cr=new r.ImageAtlas(En,Sn);for(const Pr in Ft){const to=Ft[Pr];to instanceof r.SymbolBucket?(x(to.layers,this.zoom,ct),r.performSymbolLayout({bucket:to,glyphMap:Ii,glyphPositions:dr.positions,imageMap:En,imagePositions:Cr.iconPositions,showCollisionBoxes:this.showCollisionBoxes,canonical:this.tileID.canonical})):to.hasPattern&&(to instanceof r.LineBucket||to instanceof r.FillBucket||to instanceof r.FillExtrusionBucket)&&(x(to.layers,this.zoom,ct),to.addFeatures(oi,this.tileID.canonical,Cr.patternPositions))}this.status="done",Bt(null,{buckets:Object.values(Ft).filter(Pr=>!Pr.isEmpty()),featureIndex:Yt,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:dr.image,imageAtlas:Cr,glyphMap:this.returnDependencies?Ii:null,iconMap:this.returnDependencies?En:null,glyphPositions:this.returnDependencies?dr.positions:null})}}Qn.length?dt.send("getImages",{icons:Qn,source:this.source,tileID:this.tileID,type:"patterns"},(dr,Cr)=>{Ri||(Ri=dr,Sn=Cr,Lr.call(this))}):Sn={},Lr.call(this)}}function x(Le,Ie,qe){const ct=new r.EvaluationParameters(Ie);for(const dt of Le)dt.recalculate(ct,qe)}function C(Le,Ie){const qe=r.getArrayBuffer(Le.request,(ct,dt,Bt,Ge)=>{ct?Ie(ct):dt&&Ie(null,{vectorTile:new r.vectorTile.VectorTile(new r.pbf(dt)),rawData:dt,cacheControl:Bt,expires:Ge})});return()=>{qe.cancel(),Ie()}}class T{constructor(Ie,qe,ct,dt){this.actor=Ie,this.layerIndex=qe,this.availableImages=ct,this.loadVectorData=dt||C,this.loading={},this.loaded={}}loadTile(Ie,qe){const ct=Ie.uid;this.loading||(this.loading={});const dt=!!(Ie&&Ie.request&&Ie.request.collectResourceTiming)&&new r.RequestPerformance(Ie.request),Bt=this.loading[ct]=new w(Ie);Bt.abort=this.loadVectorData(Ie,(Ge,Yt)=>{if(delete this.loading[ct],Ge||!Yt)return Bt.status="done",this.loaded[ct]=Bt,qe(Ge);const Ft=Yt.rawData,oi={};Yt.expires&&(oi.expires=Yt.expires),Yt.cacheControl&&(oi.cacheControl=Yt.cacheControl);const yt={};if(dt){const Ri=dt.finish();Ri&&(yt.resourceTiming=JSON.parse(JSON.stringify(Ri)))}Bt.vectorTile=Yt.vectorTile,Bt.parse(Yt.vectorTile,this.layerIndex,this.availableImages,this.actor,(Ri,Ii)=>{if(Ri||!Ii)return qe(Ri);qe(null,r.extend({rawTileData:Ft.slice(0)},Ii,oi,yt))}),this.loaded=this.loaded||{},this.loaded[ct]=Bt})}reloadTile(Ie,qe){const ct=this.loaded,dt=Ie.uid,Bt=this;if(ct&&ct[dt]){const Ge=ct[dt];Ge.showCollisionBoxes=Ie.showCollisionBoxes;const Yt=(Ft,oi)=>{const yt=Ge.reloadCallback;yt&&(delete Ge.reloadCallback,Ge.parse(Ge.vectorTile,Bt.layerIndex,this.availableImages,Bt.actor,yt)),qe(Ft,oi)};Ge.status==="parsing"?Ge.reloadCallback=Yt:Ge.status==="done"&&(Ge.vectorTile?Ge.parse(Ge.vectorTile,this.layerIndex,this.availableImages,this.actor,Yt):Yt())}}abortTile(Ie,qe){const ct=this.loading,dt=Ie.uid;ct&&ct[dt]&&ct[dt].abort&&(ct[dt].abort(),delete ct[dt]),qe()}removeTile(Ie,qe){const ct=this.loaded,dt=Ie.uid;ct&&ct[dt]&&delete ct[dt],qe()}}class S{constructor(){this.loaded={}}loadTile(Ie,qe){const{uid:ct,encoding:dt,rawImageData:Bt}=Ie,Ge=r.isImageBitmap(Bt)?this.getImageData(Bt):Bt,Yt=new r.DEMData(ct,Ge,dt);this.loaded=this.loaded||{},this.loaded[ct]=Yt,qe(null,Yt)}getImageData(Ie){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(Ie.width,Ie.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d")),this.offscreenCanvas.width=Ie.width,this.offscreenCanvas.height=Ie.height,this.offscreenCanvasContext.drawImage(Ie,0,0,Ie.width,Ie.height);const qe=this.offscreenCanvasContext.getImageData(-1,-1,Ie.width+2,Ie.height+2);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),new r.RGBAImage({width:qe.width,height:qe.height},qe.data)}removeTile(Ie){const qe=this.loaded,ct=Ie.uid;qe&&qe[ct]&&delete qe[ct]}}var M=function Le(Ie,qe){var ct,dt=Ie&&Ie.type;if(dt==="FeatureCollection")for(ct=0;ct<Ie.features.length;ct++)Le(Ie.features[ct],qe);else if(dt==="GeometryCollection")for(ct=0;ct<Ie.geometries.length;ct++)Le(Ie.geometries[ct],qe);else if(dt==="Feature")Le(Ie.geometry,qe);else if(dt==="Polygon")O(Ie.coordinates,qe);else if(dt==="MultiPolygon")for(ct=0;ct<Ie.coordinates.length;ct++)O(Ie.coordinates[ct],qe);return Ie};function O(Le,Ie){if(Le.length!==0){V(Le[0],Ie);for(var qe=1;qe<Le.length;qe++)V(Le[qe],!Ie)}}function V(Le,Ie){for(var qe=0,ct=0,dt=0,Bt=Le.length,Ge=Bt-1;dt<Bt;Ge=dt++){var Yt=(Le[dt][0]-Le[Ge][0])*(Le[Ge][1]+Le[dt][1]),Ft=qe+Yt;ct+=Math.abs(qe)>=Math.abs(Yt)?qe-Ft+Yt:Yt-Ft+qe,qe=Ft}qe+ct>=0!=!!Ie&&Le.reverse()}const X=r.vectorTile.VectorTileFeature.prototype.toGeoJSON;class Z{constructor(Ie){this._feature=Ie,this.extent=r.EXTENT,this.type=Ie.type,this.properties=Ie.tags,"id"in Ie&&!isNaN(Ie.id)&&(this.id=parseInt(Ie.id,10))}loadGeometry(){if(this._feature.type===1){const Ie=[];for(const qe of this._feature.geometry)Ie.push([new r.pointGeometry(qe[0],qe[1])]);return Ie}{const Ie=[];for(const qe of this._feature.geometry){const ct=[];for(const dt of qe)ct.push(new r.pointGeometry(dt[0],dt[1]));Ie.push(ct)}return Ie}}toGeoJSON(Ie,qe,ct){return X.call(this,Ie,qe,ct)}}class te{constructor(Ie){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=r.EXTENT,this.length=Ie.length,this._features=Ie}feature(Ie){return new Z(this._features[Ie])}}var J={exports:{}},ie=r.pointGeometry,Ee=r.vectorTile.VectorTileFeature,Pe=de;function de(Le,Ie){this.options=Ie||{},this.features=Le,this.length=Le.length}function Te(Le,Ie){this.id=typeof Le.id=="number"?Le.id:void 0,this.type=Le.type,this.rawGeometry=Le.type===1?[Le.geometry]:Le.geometry,this.properties=Le.tags,this.extent=Ie||4096}de.prototype.feature=function(Le){return new Te(this.features[Le],this.options.extent)},Te.prototype.loadGeometry=function(){var Le=this.rawGeometry;this.geometry=[];for(var Ie=0;Ie<Le.length;Ie++){for(var qe=Le[Ie],ct=[],dt=0;dt<qe.length;dt++)ct.push(new ie(qe[dt][0],qe[dt][1]));this.geometry.push(ct)}return this.geometry},Te.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var Le=this.geometry,Ie=1/0,qe=-1/0,ct=1/0,dt=-1/0,Bt=0;Bt<Le.length;Bt++)for(var Ge=Le[Bt],Yt=0;Yt<Ge.length;Yt++){var Ft=Ge[Yt];Ie=Math.min(Ie,Ft.x),qe=Math.max(qe,Ft.x),ct=Math.min(ct,Ft.y),dt=Math.max(dt,Ft.y)}return[Ie,ct,qe,dt]},Te.prototype.toGeoJSON=Ee.prototype.toGeoJSON;var ve=r.pbf,_e=Pe;function ot(Le){var Ie=new ve;return function(qe,ct){for(var dt in qe.layers)ct.writeMessage(3,it,qe.layers[dt])}(Le,Ie),Ie.finish()}function it(Le,Ie){var qe;Ie.writeVarintField(15,Le.version||1),Ie.writeStringField(1,Le.name||""),Ie.writeVarintField(5,Le.extent||4096);var ct={keys:[],values:[],keycache:{},valuecache:{}};for(qe=0;qe<Le.length;qe++)ct.feature=Le.feature(qe),Ie.writeMessage(2,It,ct);var dt=ct.keys;for(qe=0;qe<dt.length;qe++)Ie.writeStringField(3,dt[qe]);var Bt=ct.values;for(qe=0;qe<Bt.length;qe++)Ie.writeMessage(4,le,Bt[qe])}function It(Le,Ie){var qe=Le.feature;qe.id!==void 0&&Ie.writeVarintField(1,qe.id),Ie.writeMessage(2,Xe,Le),Ie.writeVarintField(3,qe.type),Ie.writeMessage(4,Re,qe)}function Xe(Le,Ie){var qe=Le.feature,ct=Le.keys,dt=Le.values,Bt=Le.keycache,Ge=Le.valuecache;for(var Yt in qe.properties){var Ft=qe.properties[Yt],oi=Bt[Yt];if(Ft!==null){oi===void 0&&(ct.push(Yt),Bt[Yt]=oi=ct.length-1),Ie.writeVarint(oi);var yt=typeof Ft;yt!=="string"&&yt!=="boolean"&&yt!=="number"&&(Ft=JSON.stringify(Ft));var Ri=yt+":"+Ft,Ii=Ge[Ri];Ii===void 0&&(dt.push(Ft),Ge[Ri]=Ii=dt.length-1),Ie.writeVarint(Ii)}}}function we(Le,Ie){return(Ie<<3)+(7&Le)}function Ce(Le){return Le<<1^Le>>31}function Re(Le,Ie){for(var qe=Le.loadGeometry(),ct=Le.type,dt=0,Bt=0,Ge=qe.length,Yt=0;Yt<Ge;Yt++){var Ft=qe[Yt],oi=1;ct===1&&(oi=Ft.length),Ie.writeVarint(we(1,oi));for(var yt=ct===3?Ft.length-1:Ft.length,Ri=0;Ri<yt;Ri++){Ri===1&&ct!==1&&Ie.writeVarint(we(2,yt-1));var Ii=Ft[Ri].x-dt,En=Ft[Ri].y-Bt;Ie.writeVarint(Ce(Ii)),Ie.writeVarint(Ce(En)),dt+=Ii,Bt+=En}ct===3&&Ie.writeVarint(we(7,1))}}function le(Le,Ie){var qe=typeof Le;qe==="string"?Ie.writeStringField(1,Le):qe==="boolean"?Ie.writeBooleanField(7,Le):qe==="number"&&(Le%1!=0?Ie.writeDoubleField(3,Le):Le<0?Ie.writeSVarintField(6,Le):Ie.writeVarintField(5,Le))}function Se(Le,Ie,qe,ct,dt,Bt){if(dt-ct<=qe)return;const Ge=ct+dt>>1;he(Le,Ie,Ge,ct,dt,Bt%2),Se(Le,Ie,qe,ct,Ge-1,Bt+1),Se(Le,Ie,qe,Ge+1,dt,Bt+1)}function he(Le,Ie,qe,ct,dt,Bt){for(;dt>ct;){if(dt-ct>600){const oi=dt-ct+1,yt=qe-ct+1,Ri=Math.log(oi),Ii=.5*Math.exp(2*Ri/3),En=.5*Math.sqrt(Ri*Ii*(oi-Ii)/oi)*(yt-oi/2<0?-1:1);he(Le,Ie,qe,Math.max(ct,Math.floor(qe-yt*Ii/oi+En)),Math.min(dt,Math.floor(qe+(oi-yt)*Ii/oi+En)),Bt)}const Ge=Ie[2*qe+Bt];let Yt=ct,Ft=dt;for(me(Le,Ie,ct,qe),Ie[2*dt+Bt]>Ge&&me(Le,Ie,ct,dt);Yt<Ft;){for(me(Le,Ie,Yt,Ft),Yt++,Ft--;Ie[2*Yt+Bt]<Ge;)Yt++;for(;Ie[2*Ft+Bt]>Ge;)Ft--}Ie[2*ct+Bt]===Ge?me(Le,Ie,ct,Ft):(Ft++,me(Le,Ie,Ft,dt)),Ft<=qe&&(ct=Ft+1),qe<=Ft&&(dt=Ft-1)}}function me(Le,Ie,qe,ct){Be(Le,qe,ct),Be(Ie,2*qe,2*ct),Be(Ie,2*qe+1,2*ct+1)}function Be(Le,Ie,qe){const ct=Le[Ie];Le[Ie]=Le[qe],Le[qe]=ct}function We(Le,Ie,qe,ct){const dt=Le-qe,Bt=Ie-ct;return dt*dt+Bt*Bt}J.exports=ot,J.exports.fromVectorTileJs=ot,J.exports.fromGeojsonVt=function(Le,Ie){Ie=Ie||{};var qe={};for(var ct in Le)qe[ct]=new _e(Le[ct].features,Ie),qe[ct].name=ct,qe[ct].version=Ie.version,qe[ct].extent=Ie.extent;return ot({layers:qe})},J.exports.GeoJSONWrapper=_e;const st=Le=>Le[0],Ye=Le=>Le[1];class gt{constructor(Ie,qe=st,ct=Ye,dt=64,Bt=Float64Array){this.nodeSize=dt,this.points=Ie;const Ge=Ie.length<65536?Uint16Array:Uint32Array,Yt=this.ids=new Ge(Ie.length),Ft=this.coords=new Bt(2*Ie.length);for(let oi=0;oi<Ie.length;oi++)Yt[oi]=oi,Ft[2*oi]=qe(Ie[oi]),Ft[2*oi+1]=ct(Ie[oi]);Se(Yt,Ft,dt,0,Yt.length-1,0)}range(Ie,qe,ct,dt){return function(Bt,Ge,Yt,Ft,oi,yt,Ri){const Ii=[0,Bt.length-1,0],En=[];let Sn,xt;for(;Ii.length;){const Tn=Ii.pop(),Qn=Ii.pop(),Lr=Ii.pop();if(Qn-Lr<=Ri){for(let Pr=Lr;Pr<=Qn;Pr++)Sn=Ge[2*Pr],xt=Ge[2*Pr+1],Sn>=Yt&&Sn<=oi&&xt>=Ft&&xt<=yt&&En.push(Bt[Pr]);continue}const dr=Math.floor((Lr+Qn)/2);Sn=Ge[2*dr],xt=Ge[2*dr+1],Sn>=Yt&&Sn<=oi&&xt>=Ft&&xt<=yt&&En.push(Bt[dr]);const Cr=(Tn+1)%2;(Tn===0?Yt<=Sn:Ft<=xt)&&(Ii.push(Lr),Ii.push(dr-1),Ii.push(Cr)),(Tn===0?oi>=Sn:yt>=xt)&&(Ii.push(dr+1),Ii.push(Qn),Ii.push(Cr))}return En}(this.ids,this.coords,Ie,qe,ct,dt,this.nodeSize)}within(Ie,qe,ct){return function(dt,Bt,Ge,Yt,Ft,oi){const yt=[0,dt.length-1,0],Ri=[],Ii=Ft*Ft;for(;yt.length;){const En=yt.pop(),Sn=yt.pop(),xt=yt.pop();if(Sn-xt<=oi){for(let Cr=xt;Cr<=Sn;Cr++)We(Bt[2*Cr],Bt[2*Cr+1],Ge,Yt)<=Ii&&Ri.push(dt[Cr]);continue}const Tn=Math.floor((xt+Sn)/2),Qn=Bt[2*Tn],Lr=Bt[2*Tn+1];We(Qn,Lr,Ge,Yt)<=Ii&&Ri.push(dt[Tn]);const dr=(En+1)%2;(En===0?Ge-Ft<=Qn:Yt-Ft<=Lr)&&(yt.push(xt),yt.push(Tn-1),yt.push(dr)),(En===0?Ge+Ft>=Qn:Yt+Ft>=Lr)&&(yt.push(Tn+1),yt.push(Sn),yt.push(dr))}return Ri}(this.ids,this.coords,Ie,qe,ct,this.nodeSize)}}const Mt={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:Le=>Le},ri=Math.fround||(ut=new Float32Array(1),Le=>(ut[0]=+Le,ut[0]));var ut;class wt{constructor(Ie){this.options=Xt(Object.create(Mt),Ie),this.trees=new Array(this.options.maxZoom+1)}load(Ie){const{log:qe,minZoom:ct,maxZoom:dt,nodeSize:Bt}=this.options;qe&&console.time("total time");const Ge=`prepare ${Ie.length} points`;qe&&console.time(Ge),this.points=Ie;let Yt=[];for(let Ft=0;Ft<Ie.length;Ft++)Ie[Ft].geometry&&Yt.push(Je(Ie[Ft],Ft));this.trees[dt+1]=new gt(Yt,mi,Zi,Bt,Float32Array),qe&&console.timeEnd(Ge);for(let Ft=dt;Ft>=ct;Ft--){const oi=+Date.now();Yt=this._cluster(Yt,Ft),this.trees[Ft]=new gt(Yt,mi,Zi,Bt,Float32Array),qe&&console.log("z%d: %d clusters in %dms",Ft,Yt.length,+Date.now()-oi)}return qe&&console.timeEnd("total time"),this}getClusters(Ie,qe){let ct=((Ie[0]+180)%360+360)%360-180;const dt=Math.max(-90,Math.min(90,Ie[1]));let Bt=Ie[2]===180?180:((Ie[2]+180)%360+360)%360-180;const Ge=Math.max(-90,Math.min(90,Ie[3]));if(Ie[2]-Ie[0]>=360)ct=-180,Bt=180;else if(ct>Bt){const yt=this.getClusters([ct,dt,180,Ge],qe),Ri=this.getClusters([-180,dt,Bt,Ge],qe);return yt.concat(Ri)}const Yt=this.trees[this._limitZoom(qe)],Ft=Yt.range(Qt(ct),Si(Ge),Qt(Bt),Si(dt)),oi=[];for(const yt of Ft){const Ri=Yt.points[yt];oi.push(Ri.numPoints?ei(Ri):this.points[Ri.index])}return oi}getChildren(Ie){const qe=this._getOriginId(Ie),ct=this._getOriginZoom(Ie),dt="No cluster with the specified id.",Bt=this.trees[ct];if(!Bt)throw new Error(dt);const Ge=Bt.points[qe];if(!Ge)throw new Error(dt);const Yt=this.options.radius/(this.options.extent*Math.pow(2,ct-1)),Ft=Bt.within(Ge.x,Ge.y,Yt),oi=[];for(const yt of Ft){const Ri=Bt.points[yt];Ri.parentId===Ie&&oi.push(Ri.numPoints?ei(Ri):this.points[Ri.index])}if(oi.length===0)throw new Error(dt);return oi}getLeaves(Ie,qe,ct){const dt=[];return this._appendLeaves(dt,Ie,qe=qe||10,ct=ct||0,0),dt}getTile(Ie,qe,ct){const dt=this.trees[this._limitZoom(Ie)],Bt=Math.pow(2,Ie),{extent:Ge,radius:Yt}=this.options,Ft=Yt/Ge,oi=(ct-Ft)/Bt,yt=(ct+1+Ft)/Bt,Ri={features:[]};return this._addTileFeatures(dt.range((qe-Ft)/Bt,oi,(qe+1+Ft)/Bt,yt),dt.points,qe,ct,Bt,Ri),qe===0&&this._addTileFeatures(dt.range(1-Ft/Bt,oi,1,yt),dt.points,Bt,ct,Bt,Ri),qe===Bt-1&&this._addTileFeatures(dt.range(0,oi,Ft/Bt,yt),dt.points,-1,ct,Bt,Ri),Ri.features.length?Ri:null}getClusterExpansionZoom(Ie){let qe=this._getOriginZoom(Ie)-1;for(;qe<=this.options.maxZoom;){const ct=this.getChildren(Ie);if(qe++,ct.length!==1)break;Ie=ct[0].properties.cluster_id}return qe}_appendLeaves(Ie,qe,ct,dt,Bt){const Ge=this.getChildren(qe);for(const Yt of Ge){const Ft=Yt.properties;if(Ft&&Ft.cluster?Bt+Ft.point_count<=dt?Bt+=Ft.point_count:Bt=this._appendLeaves(Ie,Ft.cluster_id,ct,dt,Bt):Bt<dt?Bt++:Ie.push(Yt),Ie.length===ct)break}return Bt}_addTileFeatures(Ie,qe,ct,dt,Bt,Ge){for(const Yt of Ie){const Ft=qe[Yt],oi=Ft.numPoints;let yt,Ri,Ii;if(oi)yt=li(Ft),Ri=Ft.x,Ii=Ft.y;else{const xt=this.points[Ft.index];yt=xt.properties,Ri=Qt(xt.geometry.coordinates[0]),Ii=Si(xt.geometry.coordinates[1])}const En={type:1,geometry:[[Math.round(this.options.extent*(Ri*Bt-ct)),Math.round(this.options.extent*(Ii*Bt-dt))]],tags:yt};let Sn;oi?Sn=Ft.id:this.options.generateId?Sn=Ft.index:this.points[Ft.index].id&&(Sn=this.points[Ft.index].id),Sn!==void 0&&(En.id=Sn),Ge.features.push(En)}}_limitZoom(Ie){return Math.max(this.options.minZoom,Math.min(Math.floor(+Ie),this.options.maxZoom+1))}_cluster(Ie,qe){const ct=[],{radius:dt,extent:Bt,reduce:Ge,minPoints:Yt}=this.options,Ft=dt/(Bt*Math.pow(2,qe));for(let oi=0;oi<Ie.length;oi++){const yt=Ie[oi];if(yt.zoom<=qe)continue;yt.zoom=qe;const Ri=this.trees[qe+1],Ii=Ri.within(yt.x,yt.y,Ft),En=yt.numPoints||1;let Sn=En;for(const xt of Ii){const Tn=Ri.points[xt];Tn.zoom>qe&&(Sn+=Tn.numPoints||1)}if(Sn>En&&Sn>=Yt){let xt=yt.x*En,Tn=yt.y*En,Qn=Ge&&En>1?this._map(yt,!0):null;const Lr=(oi<<5)+(qe+1)+this.points.length;for(const dr of Ii){const Cr=Ri.points[dr];if(Cr.zoom<=qe)continue;Cr.zoom=qe;const Pr=Cr.numPoints||1;xt+=Cr.x*Pr,Tn+=Cr.y*Pr,Cr.parentId=Lr,Ge&&(Qn||(Qn=this._map(yt,!0)),Ge(Qn,this._map(Cr)))}yt.parentId=Lr,ct.push(bt(xt/Sn,Tn/Sn,Lr,Sn,Qn))}else if(ct.push(yt),Sn>1)for(const xt of Ii){const Tn=Ri.points[xt];Tn.zoom<=qe||(Tn.zoom=qe,ct.push(Tn))}}return ct}_getOriginId(Ie){return Ie-this.points.length>>5}_getOriginZoom(Ie){return(Ie-this.points.length)%32}_map(Ie,qe){if(Ie.numPoints)return qe?Xt({},Ie.properties):Ie.properties;const ct=this.points[Ie.index].properties,dt=this.options.map(ct);return qe&&dt===ct?Xt({},dt):dt}}function bt(Le,Ie,qe,ct,dt){return{x:ri(Le),y:ri(Ie),zoom:1/0,id:qe,parentId:-1,numPoints:ct,properties:dt}}function Je(Le,Ie){const[qe,ct]=Le.geometry.coordinates;return{x:ri(Qt(qe)),y:ri(Si(ct)),zoom:1/0,index:Ie,parentId:-1}}function ei(Le){return{type:"Feature",id:Le.id,properties:li(Le),geometry:{type:"Point",coordinates:[(Ie=Le.x,360*(Ie-.5)),Ti(Le.y)]}};var Ie}function li(Le){const Ie=Le.numPoints,qe=Ie>=1e4?`${Math.round(Ie/1e3)}k`:Ie>=1e3?Math.round(Ie/100)/10+"k":Ie;return Xt(Xt({},Le.properties),{cluster:!0,cluster_id:Le.id,point_count:Ie,point_count_abbreviated:qe})}function Qt(Le){return Le/360+.5}function Si(Le){const Ie=Math.sin(Le*Math.PI/180),qe=.5-.25*Math.log((1+Ie)/(1-Ie))/Math.PI;return qe<0?0:qe>1?1:qe}function Ti(Le){const Ie=(180-360*Le)*Math.PI/180;return 360*Math.atan(Math.exp(Ie))/Math.PI-90}function Xt(Le,Ie){for(const qe in Ie)Le[qe]=Ie[qe];return Le}function mi(Le){return Le.x}function Zi(Le){return Le.y}function Ci(Le,Ie,qe,ct){for(var dt,Bt=ct,Ge=qe-Ie>>1,Yt=qe-Ie,Ft=Le[Ie],oi=Le[Ie+1],yt=Le[qe],Ri=Le[qe+1],Ii=Ie+3;Ii<qe;Ii+=3){var En=ti(Le[Ii],Le[Ii+1],Ft,oi,yt,Ri);if(En>Bt)dt=Ii,Bt=En;else if(En===Bt){var Sn=Math.abs(Ii-Ge);Sn<Yt&&(dt=Ii,Yt=Sn)}}Bt>ct&&(dt-Ie>3&&Ci(Le,Ie,dt,ct),Le[dt+2]=Bt,qe-dt>3&&Ci(Le,dt,qe,ct))}function ti(Le,Ie,qe,ct,dt,Bt){var Ge=dt-qe,Yt=Bt-ct;if(Ge!==0||Yt!==0){var Ft=((Le-qe)*Ge+(Ie-ct)*Yt)/(Ge*Ge+Yt*Yt);Ft>1?(qe=dt,ct=Bt):Ft>0&&(qe+=Ge*Ft,ct+=Yt*Ft)}return(Ge=Le-qe)*Ge+(Yt=Ie-ct)*Yt}function Me(Le,Ie,qe,ct){var dt={id:Le===void 0?null:Le,type:Ie,geometry:qe,tags:ct,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(Bt){var Ge=Bt.geometry,Yt=Bt.type;if(Yt==="Point"||Yt==="MultiPoint"||Yt==="LineString")Q(Bt,Ge);else if(Yt==="Polygon"||Yt==="MultiLineString")for(var Ft=0;Ft<Ge.length;Ft++)Q(Bt,Ge[Ft]);else if(Yt==="MultiPolygon")for(Ft=0;Ft<Ge.length;Ft++)for(var oi=0;oi<Ge[Ft].length;oi++)Q(Bt,Ge[Ft][oi])}(dt),dt}function Q(Le,Ie){for(var qe=0;qe<Ie.length;qe+=3)Le.minX=Math.min(Le.minX,Ie[qe]),Le.minY=Math.min(Le.minY,Ie[qe+1]),Le.maxX=Math.max(Le.maxX,Ie[qe]),Le.maxY=Math.max(Le.maxY,Ie[qe+1])}function ae(Le,Ie,qe,ct){if(Ie.geometry){var dt=Ie.geometry.coordinates,Bt=Ie.geometry.type,Ge=Math.pow(qe.tolerance/((1<<qe.maxZoom)*qe.extent),2),Yt=[],Ft=Ie.id;if(qe.promoteId?Ft=Ie.properties[qe.promoteId]:qe.generateId&&(Ft=ct||0),Bt==="Point")$e(dt,Yt);else if(Bt==="MultiPoint")for(var oi=0;oi<dt.length;oi++)$e(dt[oi],Yt);else if(Bt==="LineString")_t(dt,Yt,Ge,!1);else if(Bt==="MultiLineString"){if(qe.lineMetrics){for(oi=0;oi<dt.length;oi++)_t(dt[oi],Yt=[],Ge,!1),Le.push(Me(Ft,"LineString",Yt,Ie.properties));return}Kt(dt,Yt,Ge,!1)}else if(Bt==="Polygon")Kt(dt,Yt,Ge,!0);else{if(Bt!=="MultiPolygon"){if(Bt==="GeometryCollection"){for(oi=0;oi<Ie.geometry.geometries.length;oi++)ae(Le,{id:Ft,geometry:Ie.geometry.geometries[oi],properties:Ie.properties},qe,ct);return}throw new Error("Input data is not a valid GeoJSON object.")}for(oi=0;oi<dt.length;oi++){var yt=[];Kt(dt[oi],yt,Ge,!0),Yt.push(yt)}}Le.push(Me(Ft,Bt,Yt,Ie.properties))}}function $e(Le,Ie){Ie.push(di(Le[0])),Ie.push(wn(Le[1])),Ie.push(0)}function _t(Le,Ie,qe,ct){for(var dt,Bt,Ge=0,Yt=0;Yt<Le.length;Yt++){var Ft=di(Le[Yt][0]),oi=wn(Le[Yt][1]);Ie.push(Ft),Ie.push(oi),Ie.push(0),Yt>0&&(Ge+=ct?(dt*oi-Ft*Bt)/2:Math.sqrt(Math.pow(Ft-dt,2)+Math.pow(oi-Bt,2))),dt=Ft,Bt=oi}var yt=Ie.length-3;Ie[2]=1,Ci(Ie,0,yt,qe),Ie[yt+2]=1,Ie.size=Math.abs(Ge),Ie.start=0,Ie.end=Ie.size}function Kt(Le,Ie,qe,ct){for(var dt=0;dt<Le.length;dt++){var Bt=[];_t(Le[dt],Bt,qe,ct),Ie.push(Bt)}}function di(Le){return Le/360+.5}function wn(Le){var Ie=Math.sin(Le*Math.PI/180),qe=.5-.25*Math.log((1+Ie)/(1-Ie))/Math.PI;return qe<0?0:qe>1?1:qe}function Ln(Le,Ie,qe,ct,dt,Bt,Ge,Yt){if(ct/=Ie,Bt>=(qe/=Ie)&&Ge<ct)return Le;if(Ge<qe||Bt>=ct)return null;for(var Ft=[],oi=0;oi<Le.length;oi++){var yt=Le[oi],Ri=yt.geometry,Ii=yt.type,En=dt===0?yt.minX:yt.minY,Sn=dt===0?yt.maxX:yt.maxY;if(En>=qe&&Sn<ct)Ft.push(yt);else if(!(Sn<qe||En>=ct)){var xt=[];if(Ii==="Point"||Ii==="MultiPoint")fn(Ri,xt,qe,ct,dt);else if(Ii==="LineString")Bi(Ri,xt,qe,ct,dt,!1,Yt.lineMetrics);else if(Ii==="MultiLineString")Hn(Ri,xt,qe,ct,dt,!1);else if(Ii==="Polygon")Hn(Ri,xt,qe,ct,dt,!0);else if(Ii==="MultiPolygon")for(var Tn=0;Tn<Ri.length;Tn++){var Qn=[];Hn(Ri[Tn],Qn,qe,ct,dt,!0),Qn.length&&xt.push(Qn)}if(xt.length){if(Yt.lineMetrics&&Ii==="LineString"){for(Tn=0;Tn<xt.length;Tn++)Ft.push(Me(yt.id,Ii,xt[Tn],yt.tags));continue}Ii!=="LineString"&&Ii!=="MultiLineString"||(xt.length===1?(Ii="LineString",xt=xt[0]):Ii="MultiLineString"),Ii!=="Point"&&Ii!=="MultiPoint"||(Ii=xt.length===3?"Point":"MultiPoint"),Ft.push(Me(yt.id,Ii,xt,yt.tags))}}}return Ft.length?Ft:null}function fn(Le,Ie,qe,ct,dt){for(var Bt=0;Bt<Le.length;Bt+=3){var Ge=Le[Bt+dt];Ge>=qe&&Ge<=ct&&(Ie.push(Le[Bt]),Ie.push(Le[Bt+1]),Ie.push(Le[Bt+2]))}}function Bi(Le,Ie,qe,ct,dt,Bt,Ge){for(var Yt,Ft,oi=Ki(Le),yt=dt===0?Zr:zn,Ri=Le.start,Ii=0;Ii<Le.length-3;Ii+=3){var En=Le[Ii],Sn=Le[Ii+1],xt=Le[Ii+2],Tn=Le[Ii+3],Qn=Le[Ii+4],Lr=dt===0?En:Sn,dr=dt===0?Tn:Qn,Cr=!1;Ge&&(Yt=Math.sqrt(Math.pow(En-Tn,2)+Math.pow(Sn-Qn,2))),Lr<qe?dr>qe&&(Ft=yt(oi,En,Sn,Tn,Qn,qe),Ge&&(oi.start=Ri+Yt*Ft)):Lr>ct?dr<ct&&(Ft=yt(oi,En,Sn,Tn,Qn,ct),Ge&&(oi.start=Ri+Yt*Ft)):Gn(oi,En,Sn,xt),dr<qe&&Lr>=qe&&(Ft=yt(oi,En,Sn,Tn,Qn,qe),Cr=!0),dr>ct&&Lr<=ct&&(Ft=yt(oi,En,Sn,Tn,Qn,ct),Cr=!0),!Bt&&Cr&&(Ge&&(oi.end=Ri+Yt*Ft),Ie.push(oi),oi=Ki(Le)),Ge&&(Ri+=Yt)}var Pr=Le.length-3;En=Le[Pr],Sn=Le[Pr+1],xt=Le[Pr+2],(Lr=dt===0?En:Sn)>=qe&&Lr<=ct&&Gn(oi,En,Sn,xt),Pr=oi.length-3,Bt&&Pr>=3&&(oi[Pr]!==oi[0]||oi[Pr+1]!==oi[1])&&Gn(oi,oi[0],oi[1],oi[2]),oi.length&&Ie.push(oi)}function Ki(Le){var Ie=[];return Ie.size=Le.size,Ie.start=Le.start,Ie.end=Le.end,Ie}function Hn(Le,Ie,qe,ct,dt,Bt){for(var Ge=0;Ge<Le.length;Ge++)Bi(Le[Ge],Ie,qe,ct,dt,Bt,!1)}function Gn(Le,Ie,qe,ct){Le.push(Ie),Le.push(qe),Le.push(ct)}function Zr(Le,Ie,qe,ct,dt,Bt){var Ge=(Bt-Ie)/(ct-Ie);return Le.push(Bt),Le.push(qe+(dt-qe)*Ge),Le.push(1),Ge}function zn(Le,Ie,qe,ct,dt,Bt){var Ge=(Bt-qe)/(dt-qe);return Le.push(Ie+(ct-Ie)*Ge),Le.push(Bt),Le.push(1),Ge}function dn(Le,Ie){for(var qe=[],ct=0;ct<Le.length;ct++){var dt,Bt=Le[ct],Ge=Bt.type;if(Ge==="Point"||Ge==="MultiPoint"||Ge==="LineString")dt=gn(Bt.geometry,Ie);else if(Ge==="MultiLineString"||Ge==="Polygon"){dt=[];for(var Yt=0;Yt<Bt.geometry.length;Yt++)dt.push(gn(Bt.geometry[Yt],Ie))}else if(Ge==="MultiPolygon")for(dt=[],Yt=0;Yt<Bt.geometry.length;Yt++){for(var Ft=[],oi=0;oi<Bt.geometry[Yt].length;oi++)Ft.push(gn(Bt.geometry[Yt][oi],Ie));dt.push(Ft)}qe.push(Me(Bt.id,Ge,dt,Bt.tags))}return qe}function gn(Le,Ie){var qe=[];qe.size=Le.size,Le.start!==void 0&&(qe.start=Le.start,qe.end=Le.end);for(var ct=0;ct<Le.length;ct+=3)qe.push(Le[ct]+Ie,Le[ct+1],Le[ct+2]);return qe}function on(Le,Ie){if(Le.transformed)return Le;var qe,ct,dt,Bt=1<<Le.z,Ge=Le.x,Yt=Le.y;for(qe=0;qe<Le.features.length;qe++){var Ft=Le.features[qe],oi=Ft.geometry,yt=Ft.type;if(Ft.geometry=[],yt===1)for(ct=0;ct<oi.length;ct+=2)Ft.geometry.push(Sr(oi[ct],oi[ct+1],Ie,Bt,Ge,Yt));else for(ct=0;ct<oi.length;ct++){var Ri=[];for(dt=0;dt<oi[ct].length;dt+=2)Ri.push(Sr(oi[ct][dt],oi[ct][dt+1],Ie,Bt,Ge,Yt));Ft.geometry.push(Ri)}}return Le.transformed=!0,Le}function Sr(Le,Ie,qe,ct,dt,Bt){return[Math.round(qe*(Le*ct-dt)),Math.round(qe*(Ie*ct-Bt))]}function Wn(Le,Ie,qe,ct,dt){for(var Bt=Ie===dt.maxZoom?0:dt.tolerance/((1<<Ie)*dt.extent),Ge={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:qe,y:ct,z:Ie,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},Yt=0;Yt<Le.length;Yt++){Ge.numFeatures++,gr(Ge,Le[Yt],Bt,dt);var Ft=Le[Yt].minX,oi=Le[Yt].minY,yt=Le[Yt].maxX,Ri=Le[Yt].maxY;Ft<Ge.minX&&(Ge.minX=Ft),oi<Ge.minY&&(Ge.minY=oi),yt>Ge.maxX&&(Ge.maxX=yt),Ri>Ge.maxY&&(Ge.maxY=Ri)}return Ge}function gr(Le,Ie,qe,ct){var dt=Ie.geometry,Bt=Ie.type,Ge=[];if(Bt==="Point"||Bt==="MultiPoint")for(var Yt=0;Yt<dt.length;Yt+=3)Ge.push(dt[Yt]),Ge.push(dt[Yt+1]),Le.numPoints++,Le.numSimplified++;else if(Bt==="LineString")Kr(Ge,dt,Le,qe,!1,!1);else if(Bt==="MultiLineString"||Bt==="Polygon")for(Yt=0;Yt<dt.length;Yt++)Kr(Ge,dt[Yt],Le,qe,Bt==="Polygon",Yt===0);else if(Bt==="MultiPolygon")for(var Ft=0;Ft<dt.length;Ft++){var oi=dt[Ft];for(Yt=0;Yt<oi.length;Yt++)Kr(Ge,oi[Yt],Le,qe,!0,Yt===0)}if(Ge.length){var yt=Ie.tags||null;if(Bt==="LineString"&&ct.lineMetrics){for(var Ri in yt={},Ie.tags)yt[Ri]=Ie.tags[Ri];yt.mapbox_clip_start=dt.start/dt.size,yt.mapbox_clip_end=dt.end/dt.size}var Ii={geometry:Ge,type:Bt==="Polygon"||Bt==="MultiPolygon"?3:Bt==="LineString"||Bt==="MultiLineString"?2:1,tags:yt};Ie.id!==null&&(Ii.id=Ie.id),Le.features.push(Ii)}}function Kr(Le,Ie,qe,ct,dt,Bt){var Ge=ct*ct;if(ct>0&&Ie.size<(dt?Ge:ct))qe.numPoints+=Ie.length/3;else{for(var Yt=[],Ft=0;Ft<Ie.length;Ft+=3)(ct===0||Ie[Ft+2]>Ge)&&(qe.numSimplified++,Yt.push(Ie[Ft]),Yt.push(Ie[Ft+1])),qe.numPoints++;dt&&function(oi,yt){for(var Ri=0,Ii=0,En=oi.length,Sn=En-2;Ii<En;Sn=Ii,Ii+=2)Ri+=(oi[Ii]-oi[Sn])*(oi[Ii+1]+oi[Sn+1]);if(Ri>0===yt)for(Ii=0,En=oi.length;Ii<En/2;Ii+=2){var xt=oi[Ii],Tn=oi[Ii+1];oi[Ii]=oi[En-2-Ii],oi[Ii+1]=oi[En-1-Ii],oi[En-2-Ii]=xt,oi[En-1-Ii]=Tn}}(Yt,Bt),Le.push(Yt)}}function an(Le,Ie){var qe=(Ie=this.options=function(dt,Bt){for(var Ge in Bt)dt[Ge]=Bt[Ge];return dt}(Object.create(this.options),Ie)).debug;if(qe&&console.time("preprocess data"),Ie.maxZoom<0||Ie.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(Ie.promoteId&&Ie.generateId)throw new Error("promoteId and generateId cannot be used together.");var ct=function(dt,Bt){var Ge=[];if(dt.type==="FeatureCollection")for(var Yt=0;Yt<dt.features.length;Yt++)ae(Ge,dt.features[Yt],Bt,Yt);else ae(Ge,dt.type==="Feature"?dt:{geometry:dt},Bt);return Ge}(Le,Ie);this.tiles={},this.tileCoords=[],qe&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",Ie.indexMaxZoom,Ie.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),ct=function(dt,Bt){var Ge=Bt.buffer/Bt.extent,Yt=dt,Ft=Ln(dt,1,-1-Ge,Ge,0,-1,2,Bt),oi=Ln(dt,1,1-Ge,2+Ge,0,-1,2,Bt);return(Ft||oi)&&(Yt=Ln(dt,1,-Ge,1+Ge,0,-1,2,Bt)||[],Ft&&(Yt=dn(Ft,1).concat(Yt)),oi&&(Yt=Yt.concat(dn(oi,-1)))),Yt}(ct,Ie),ct.length&&this.splitTile(ct,0,0,0),qe&&(ct.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function He(Le,Ie,qe){return 32*((1<<Le)*qe+Ie)+Le}function wo(Le,Ie){const qe=Le.tileID.canonical;if(!this._geoJSONIndex)return Ie(null,null);const ct=this._geoJSONIndex.getTile(qe.z,qe.x,qe.y);if(!ct)return Ie(null,null);const dt=new te(ct.features);let Bt=J.exports(dt);Bt.byteOffset===0&&Bt.byteLength===Bt.buffer.byteLength||(Bt=new Uint8Array(Bt)),Ie(null,{vectorTile:dt,rawData:Bt.buffer})}an.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},an.prototype.splitTile=function(Le,Ie,qe,ct,dt,Bt,Ge){for(var Yt=[Le,Ie,qe,ct],Ft=this.options,oi=Ft.debug;Yt.length;){ct=Yt.pop(),qe=Yt.pop(),Ie=Yt.pop(),Le=Yt.pop();var yt=1<<Ie,Ri=He(Ie,qe,ct),Ii=this.tiles[Ri];if(!Ii&&(oi>1&&console.time("creation"),Ii=this.tiles[Ri]=Wn(Le,Ie,qe,ct,Ft),this.tileCoords.push({z:Ie,x:qe,y:ct}),oi)){oi>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",Ie,qe,ct,Ii.numFeatures,Ii.numPoints,Ii.numSimplified),console.timeEnd("creation"));var En="z"+Ie;this.stats[En]=(this.stats[En]||0)+1,this.total++}if(Ii.source=Le,dt){if(Ie===Ft.maxZoom||Ie===dt)continue;var Sn=1<<dt-Ie;if(qe!==Math.floor(Bt/Sn)||ct!==Math.floor(Ge/Sn))continue}else if(Ie===Ft.indexMaxZoom||Ii.numPoints<=Ft.indexMaxPoints)continue;if(Ii.source=null,Le.length!==0){oi>1&&console.time("clipping");var xt,Tn,Qn,Lr,dr,Cr,Pr=.5*Ft.buffer/Ft.extent,to=.5-Pr,Jr=.5+Pr,vo=1+Pr;xt=Tn=Qn=Lr=null,dr=Ln(Le,yt,qe-Pr,qe+Jr,0,Ii.minX,Ii.maxX,Ft),Cr=Ln(Le,yt,qe+to,qe+vo,0,Ii.minX,Ii.maxX,Ft),Le=null,dr&&(xt=Ln(dr,yt,ct-Pr,ct+Jr,1,Ii.minY,Ii.maxY,Ft),Tn=Ln(dr,yt,ct+to,ct+vo,1,Ii.minY,Ii.maxY,Ft),dr=null),Cr&&(Qn=Ln(Cr,yt,ct-Pr,ct+Jr,1,Ii.minY,Ii.maxY,Ft),Lr=Ln(Cr,yt,ct+to,ct+vo,1,Ii.minY,Ii.maxY,Ft),Cr=null),oi>1&&console.timeEnd("clipping"),Yt.push(xt||[],Ie+1,2*qe,2*ct),Yt.push(Tn||[],Ie+1,2*qe,2*ct+1),Yt.push(Qn||[],Ie+1,2*qe+1,2*ct),Yt.push(Lr||[],Ie+1,2*qe+1,2*ct+1)}}},an.prototype.getTile=function(Le,Ie,qe){var ct=this.options,dt=ct.extent,Bt=ct.debug;if(Le<0||Le>24)return null;var Ge=1<<Le,Yt=He(Le,Ie=(Ie%Ge+Ge)%Ge,qe);if(this.tiles[Yt])return on(this.tiles[Yt],dt);Bt>1&&console.log("drilling down to z%d-%d-%d",Le,Ie,qe);for(var Ft,oi=Le,yt=Ie,Ri=qe;!Ft&&oi>0;)oi--,yt=Math.floor(yt/2),Ri=Math.floor(Ri/2),Ft=this.tiles[He(oi,yt,Ri)];return Ft&&Ft.source?(Bt>1&&console.log("found parent tile z%d-%d-%d",oi,yt,Ri),Bt>1&&console.time("drilling down"),this.splitTile(Ft.source,oi,yt,Ri,Le,Ie,qe),Bt>1&&console.timeEnd("drilling down"),this.tiles[Yt]?on(this.tiles[Yt],dt):null):null};class xo extends T{constructor(Ie,qe,ct,dt){super(Ie,qe,ct,wo),dt&&(this.loadGeoJSON=dt)}loadData(Ie,qe){var ct;(ct=this._pendingRequest)===null||ct===void 0||ct.cancel(),this._pendingCallback&&this._pendingCallback(null,{abandoned:!0});const dt=!!(Ie&&Ie.request&&Ie.request.collectResourceTiming)&&new r.RequestPerformance(Ie.request);this._pendingCallback=qe,this._pendingRequest=this.loadGeoJSON(Ie,(Bt,Ge)=>{if(delete this._pendingCallback,delete this._pendingRequest,Bt||!Ge)return qe(Bt);if(typeof Ge!="object")return qe(new Error(`Input data given to '${Ie.source}' is not a valid GeoJSON object.`));{M(Ge,!0);try{if(Ie.filter){const Ft=r.createExpression(Ie.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(Ft.result==="error")throw new Error(Ft.value.map(yt=>`${yt.key}: ${yt.message}`).join(", "));const oi=Ge.features.filter(yt=>Ft.value.evaluate({zoom:0},yt));Ge={type:"FeatureCollection",features:oi}}this._geoJSONIndex=Ie.cluster?new wt(function({superclusterOptions:Ft,clusterProperties:oi}){if(!oi||!Ft)return Ft;const yt={},Ri={},Ii={accumulated:null,zoom:0},En={properties:null},Sn=Object.keys(oi);for(const xt of Sn){const[Tn,Qn]=oi[xt],Lr=r.createExpression(Qn),dr=r.createExpression(typeof Tn=="string"?[Tn,["accumulated"],["get",xt]]:Tn);yt[xt]=Lr.value,Ri[xt]=dr.value}return Ft.map=xt=>{En.properties=xt;const Tn={};for(const Qn of Sn)Tn[Qn]=yt[Qn].evaluate(Ii,En);return Tn},Ft.reduce=(xt,Tn)=>{En.properties=Tn;for(const Qn of Sn)Ii.accumulated=xt[Qn],xt[Qn]=Ri[Qn].evaluate(Ii,En)},Ft}(Ie)).load(Ge.features):function(Ft,oi){return new an(Ft,oi)}(Ge,Ie.geojsonVtOptions)}catch(Ft){return qe(Ft)}this.loaded={};const Yt={};if(dt){const Ft=dt.finish();Ft&&(Yt.resourceTiming={},Yt.resourceTiming[Ie.source]=JSON.parse(JSON.stringify(Ft)))}qe(null,Yt)}})}reloadTile(Ie,qe){const ct=this.loaded;return ct&&ct[Ie.uid]?super.reloadTile(Ie,qe):this.loadTile(Ie,qe)}loadGeoJSON(Ie,qe){if(Ie.request)return r.getJSON(Ie.request,qe);if(typeof Ie.data=="string")try{qe(null,JSON.parse(Ie.data))}catch{qe(new Error(`Input data given to '${Ie.source}' is not a valid GeoJSON object.`))}else qe(new Error(`Input data given to '${Ie.source}' is not a valid GeoJSON object.`));return{cancel:()=>{}}}removeSource(Ie,qe){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),qe()}getClusterExpansionZoom(Ie,qe){try{qe(null,this._geoJSONIndex.getClusterExpansionZoom(Ie.clusterId))}catch(ct){qe(ct)}}getClusterChildren(Ie,qe){try{qe(null,this._geoJSONIndex.getChildren(Ie.clusterId))}catch(ct){qe(ct)}}getClusterLeaves(Ie,qe){try{qe(null,this._geoJSONIndex.getLeaves(Ie.clusterId,Ie.limit,Ie.offset))}catch(ct){qe(ct)}}}class co{constructor(Ie){this.self=Ie,this.actor=new r.Actor(Ie,this),this.layerIndexes={},this.availableImages={},this.workerSourceTypes={vector:T,geojson:xo},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=(qe,ct)=>{if(this.workerSourceTypes[qe])throw new Error(`Worker source with name "${qe}" already registered.`);this.workerSourceTypes[qe]=ct},this.self.registerRTLTextPlugin=qe=>{if(r.plugin.isParsed())throw new Error("RTL text plugin already registered.");r.plugin.applyArabicShaping=qe.applyArabicShaping,r.plugin.processBidirectionalText=qe.processBidirectionalText,r.plugin.processStyledBidirectionalText=qe.processStyledBidirectionalText}}setReferrer(Ie,qe){this.referrer=qe}setImages(Ie,qe,ct){this.availableImages[Ie]=qe;for(const dt in this.workerSources[Ie]){const Bt=this.workerSources[Ie][dt];for(const Ge in Bt)Bt[Ge].availableImages=qe}ct()}setLayers(Ie,qe,ct){this.getLayerIndex(Ie).replace(qe),ct()}updateLayers(Ie,qe,ct){this.getLayerIndex(Ie).update(qe.layers,qe.removedIds),ct()}loadTile(Ie,qe,ct){this.getWorkerSource(Ie,qe.type,qe.source).loadTile(qe,ct)}loadDEMTile(Ie,qe,ct){this.getDEMWorkerSource(Ie,qe.source).loadTile(qe,ct)}reloadTile(Ie,qe,ct){this.getWorkerSource(Ie,qe.type,qe.source).reloadTile(qe,ct)}abortTile(Ie,qe,ct){this.getWorkerSource(Ie,qe.type,qe.source).abortTile(qe,ct)}removeTile(Ie,qe,ct){this.getWorkerSource(Ie,qe.type,qe.source).removeTile(qe,ct)}removeDEMTile(Ie,qe){this.getDEMWorkerSource(Ie,qe.source).removeTile(qe)}removeSource(Ie,qe,ct){if(!this.workerSources[Ie]||!this.workerSources[Ie][qe.type]||!this.workerSources[Ie][qe.type][qe.source])return;const dt=this.workerSources[Ie][qe.type][qe.source];delete this.workerSources[Ie][qe.type][qe.source],dt.removeSource!==void 0?dt.removeSource(qe,ct):ct()}loadWorkerSource(Ie,qe,ct){try{this.self.importScripts(qe.url),ct()}catch(dt){ct(dt.toString())}}syncRTLPluginState(Ie,qe,ct){try{r.plugin.setState(qe);const dt=r.plugin.getPluginURL();if(r.plugin.isLoaded()&&!r.plugin.isParsed()&&dt!=null){this.self.importScripts(dt);const Bt=r.plugin.isParsed();ct(Bt?void 0:new Error(`RTL Text Plugin failed to import scripts from ${dt}`),Bt)}}catch(dt){ct(dt.toString())}}getAvailableImages(Ie){let qe=this.availableImages[Ie];return qe||(qe=[]),qe}getLayerIndex(Ie){let qe=this.layerIndexes[Ie];return qe||(qe=this.layerIndexes[Ie]=new b),qe}getWorkerSource(Ie,qe,ct){if(this.workerSources[Ie]||(this.workerSources[Ie]={}),this.workerSources[Ie][qe]||(this.workerSources[Ie][qe]={}),!this.workerSources[Ie][qe][ct]){const dt={send:(Bt,Ge,Yt)=>{this.actor.send(Bt,Ge,Yt,Ie)}};this.workerSources[Ie][qe][ct]=new this.workerSourceTypes[qe](dt,this.getLayerIndex(Ie),this.getAvailableImages(Ie))}return this.workerSources[Ie][qe][ct]}getDEMWorkerSource(Ie,qe){return this.demWorkerSources[Ie]||(this.demWorkerSources[Ie]={}),this.demWorkerSources[Ie][qe]||(this.demWorkerSources[Ie][qe]=new S),this.demWorkerSources[Ie][qe]}enforceCacheSizeLimit(Ie,qe){r.enforceCacheSizeLimit(qe)}}return r.isWorker()&&(self.worker=new co(self)),co}),u(["./shared"],function(r){var f=_;function _(B){return!function(d){return typeof window>"u"||typeof document>"u"?"not a browser":Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray?Function.prototype&&Function.prototype.bind?Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions?"JSON"in window&&"parse"in JSON&&"stringify"in JSON?function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var D,z,W=new Blob([""],{type:"text/javascript"}),ne=URL.createObjectURL(W);try{z=new Worker(ne),D=!0}catch{D=!1}return z&&z.terminate(),URL.revokeObjectURL(ne),D}()?"Uint8ClampedArray"in window?ArrayBuffer.isView?function(){var D=document.createElement("canvas");D.width=D.height=1;var z=D.getContext("2d");if(!z)return!1;var W=z.getImageData(0,0,1,1);return W&&W.width===D.width}()?(b[I=d&&d.failIfMajorPerformanceCaveat]===void 0&&(b[I]=function(D){var z,W=function(ne){var pe=document.createElement("canvas"),ye=Object.create(_.webGLContextAttributes);return ye.failIfMajorPerformanceCaveat=ne,pe.getContext("webgl",ye)||pe.getContext("experimental-webgl",ye)}(D);if(!W)return!1;try{z=W.createShader(W.VERTEX_SHADER)}catch{return!1}return!(!z||W.isContextLost())&&(W.shaderSource(z,"void main() {}"),W.compileShader(z),W.getShaderParameter(z,W.COMPILE_STATUS)===!0)}(I)),b[I]?document.documentMode?"insufficient ECMAScript 6 support":void 0:"insufficient WebGL support"):"insufficient Canvas/getImageData support":"insufficient ArrayBuffer support":"insufficient Uint8ClampedArray support":"insufficient worker support":"insufficient JSON support":"insufficient Object support":"insufficient Function support":"insufficent Array support";var I}(B)}var b={};function v(B,d){if(Array.isArray(B)){if(!Array.isArray(d)||B.length!==d.length)return!1;for(let I=0;I<B.length;I++)if(!v(B[I],d[I]))return!1;return!0}if(typeof B=="object"&&B!==null&&d!==null){if(typeof d!="object"||Object.keys(B).length!==Object.keys(d).length)return!1;for(const I in B)if(!v(B[I],d[I]))return!1;return!0}return B===d}_.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0};class w{static testProp(d){if(!w.docStyle)return d[0];for(let I=0;I<d.length;I++)if(d[I]in w.docStyle)return d[I];return d[0]}static create(d,I,D){const z=window.document.createElement(d);return I!==void 0&&(z.className=I),D&&D.appendChild(z),z}static createNS(d,I){return window.document.createElementNS(d,I)}static disableDrag(){w.docStyle&&w.selectProp&&(w.userSelect=w.docStyle[w.selectProp],w.docStyle[w.selectProp]="none")}static enableDrag(){w.docStyle&&w.selectProp&&(w.docStyle[w.selectProp]=w.userSelect)}static setTransform(d,I){d.style[w.transformProp]=I}static addEventListener(d,I,D,z={}){d.addEventListener(I,D,"passive"in z?z:z.capture)}static removeEventListener(d,I,D,z={}){d.removeEventListener(I,D,"passive"in z?z:z.capture)}static suppressClickInternal(d){d.preventDefault(),d.stopPropagation(),window.removeEventListener("click",w.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",w.suppressClickInternal,!0),window.setTimeout(()=>{window.removeEventListener("click",w.suppressClickInternal,!0)},0)}static mousePos(d,I){const D=d.getBoundingClientRect();return new r.pointGeometry(I.clientX-D.left-d.clientLeft,I.clientY-D.top-d.clientTop)}static touchPos(d,I){const D=d.getBoundingClientRect(),z=[];for(let W=0;W<I.length;W++)z.push(new r.pointGeometry(I[W].clientX-D.left-d.clientLeft,I[W].clientY-D.top-d.clientTop));return z}static mouseButton(d){return d.button}static remove(d){d.parentNode&&d.parentNode.removeChild(d)}}w.docStyle=typeof window<"u"&&window.document&&window.document.documentElement.style,w.selectProp=w.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),w.transformProp=w.testProp(["transform","WebkitTransform"]);class x{constructor(d){this._transformRequestFn=d}transformRequest(d,I){return this._transformRequestFn&&this._transformRequestFn(d,I)||{url:d}}normalizeSpriteURL(d,I,D){const z=function(W){const ne=W.match(C);if(!ne)throw new Error(`Unable to parse URL "${W}"`);return{protocol:ne[1],authority:ne[2],path:ne[3]||"/",params:ne[4]?ne[4].split("&"):[]}}(d);return z.path+=`${I}${D}`,function(W){const ne=W.params.length?`?${W.params.join("&")}`:"";return`${W.protocol}://${W.authority}${W.path}${ne}`}(z)}setTransformRequest(d){this._transformRequestFn=d}}const C=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;class T{constructor(d,I,D,z){this.context=d,this.format=D,this.texture=d.gl.createTexture(),this.update(I,z)}update(d,I,D){const{width:z,height:W}=d,ne=!(this.size&&this.size[0]===z&&this.size[1]===W||D),{context:pe}=this,{gl:ye}=pe;if(this.useMipmap=Boolean(I&&I.useMipmap),ye.bindTexture(ye.TEXTURE_2D,this.texture),pe.pixelStoreUnpackFlipY.set(!1),pe.pixelStoreUnpack.set(1),pe.pixelStoreUnpackPremultiplyAlpha.set(this.format===ye.RGBA&&(!I||I.premultiply!==!1)),ne)this.size=[z,W],d instanceof HTMLImageElement||d instanceof HTMLCanvasElement||d instanceof HTMLVideoElement||d instanceof ImageData||r.isImageBitmap(d)?ye.texImage2D(ye.TEXTURE_2D,0,this.format,this.format,ye.UNSIGNED_BYTE,d):ye.texImage2D(ye.TEXTURE_2D,0,this.format,z,W,0,this.format,ye.UNSIGNED_BYTE,d.data);else{const{x:ke,y:ze}=D||{x:0,y:0};d instanceof HTMLImageElement||d instanceof HTMLCanvasElement||d instanceof HTMLVideoElement||d instanceof ImageData||r.isImageBitmap(d)?ye.texSubImage2D(ye.TEXTURE_2D,0,ke,ze,ye.RGBA,ye.UNSIGNED_BYTE,d):ye.texSubImage2D(ye.TEXTURE_2D,0,ke,ze,z,W,ye.RGBA,ye.UNSIGNED_BYTE,d.data)}this.useMipmap&&this.isSizePowerOfTwo()&&ye.generateMipmap(ye.TEXTURE_2D)}bind(d,I,D){const{context:z}=this,{gl:W}=z;W.bindTexture(W.TEXTURE_2D,this.texture),D!==W.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(D=W.LINEAR),d!==this.filter&&(W.texParameteri(W.TEXTURE_2D,W.TEXTURE_MAG_FILTER,d),W.texParameteri(W.TEXTURE_2D,W.TEXTURE_MIN_FILTER,D||d),this.filter=d),I!==this.wrap&&(W.texParameteri(W.TEXTURE_2D,W.TEXTURE_WRAP_S,I),W.texParameteri(W.TEXTURE_2D,W.TEXTURE_WRAP_T,I),this.wrap=I)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:d}=this.context;d.deleteTexture(this.texture),this.texture=null}}function S(B){const{userImage:d}=B;return!!(d&&d.render&&d.render())&&(B.data.replace(new Uint8Array(d.data.buffer)),!0)}class M extends r.Evented{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new r.RGBAImage({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(d){if(this.loaded!==d&&(this.loaded=d,d)){for(const{ids:I,callback:D}of this.requestors)this._notify(I,D);this.requestors=[]}}getImage(d){return this.images[d]}addImage(d,I){if(this.images[d])throw new Error(`Image id ${d} already exist, use updateImage instead`);this._validate(d,I)&&(this.images[d]=I)}_validate(d,I){let D=!0;return this._validateStretch(I.stretchX,I.data&&I.data.width)||(this.fire(new r.ErrorEvent(new Error(`Image "${d}" has invalid "stretchX" value`))),D=!1),this._validateStretch(I.stretchY,I.data&&I.data.height)||(this.fire(new r.ErrorEvent(new Error(`Image "${d}" has invalid "stretchY" value`))),D=!1),this._validateContent(I.content,I)||(this.fire(new r.ErrorEvent(new Error(`Image "${d}" has invalid "content" value`))),D=!1),D}_validateStretch(d,I){if(!d)return!0;let D=0;for(const z of d){if(z[0]<D||z[1]<z[0]||I<z[1])return!1;D=z[1]}return!0}_validateContent(d,I){return!(d&&(d.length!==4||d[0]<0||I.data.width<d[0]||d[1]<0||I.data.height<d[1]||d[2]<0||I.data.width<d[2]||d[3]<0||I.data.height<d[3]||d[2]<d[0]||d[3]<d[1]))}updateImage(d,I){const D=this.images[d];if(D.data.width!==I.data.width||D.data.height!==I.data.height)throw new Error(`size mismatch between old image (${D.data.width}x${D.data.height}) and new image (${I.data.width}x${I.data.height}).`);I.version=D.version+1,this.images[d]=I,this.updatedImages[d]=!0}removeImage(d){const I=this.images[d];delete this.images[d],delete this.patterns[d],I.userImage&&I.userImage.onRemove&&I.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(d,I){let D=!0;if(!this.isLoaded())for(const z of d)this.images[z]||(D=!1);this.isLoaded()||D?this._notify(d,I):this.requestors.push({ids:d,callback:I})}_notify(d,I){const D={};for(const z of d){this.images[z]||this.fire(new r.Event("styleimagemissing",{id:z}));const W=this.images[z];W?D[z]={data:W.data.clone(),pixelRatio:W.pixelRatio,sdf:W.sdf,version:W.version,stretchX:W.stretchX,stretchY:W.stretchY,content:W.content,hasRenderCallback:Boolean(W.userImage&&W.userImage.render)}:r.warnOnce(`Image "${z}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}I(null,D)}getPixelSize(){const{width:d,height:I}=this.atlasImage;return{width:d,height:I}}getPattern(d){const I=this.patterns[d],D=this.getImage(d);if(!D)return null;if(I&&I.position.version===D.version)return I.position;if(I)I.position.version=D.version;else{const z={w:D.data.width+2,h:D.data.height+2,x:0,y:0},W=new r.ImagePosition(z,D);this.patterns[d]={bin:z,position:W}}return this._updatePatternAtlas(),this.patterns[d].position}bind(d){const I=d.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new T(d,this.atlasImage,I.RGBA),this.atlasTexture.bind(I.LINEAR,I.CLAMP_TO_EDGE)}_updatePatternAtlas(){const d=[];for(const W in this.patterns)d.push(this.patterns[W].bin);const{w:I,h:D}=r.potpack(d),z=this.atlasImage;z.resize({width:I||1,height:D||1});for(const W in this.patterns){const{bin:ne}=this.patterns[W],pe=ne.x+1,ye=ne.y+1,ke=this.images[W].data,ze=ke.width,Qe=ke.height;r.RGBAImage.copy(ke,z,{x:0,y:0},{x:pe,y:ye},{width:ze,height:Qe}),r.RGBAImage.copy(ke,z,{x:0,y:Qe-1},{x:pe,y:ye-1},{width:ze,height:1}),r.RGBAImage.copy(ke,z,{x:0,y:0},{x:pe,y:ye+Qe},{width:ze,height:1}),r.RGBAImage.copy(ke,z,{x:ze-1,y:0},{x:pe-1,y:ye},{width:1,height:Qe}),r.RGBAImage.copy(ke,z,{x:0,y:0},{x:pe+ze,y:ye},{width:1,height:Qe})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(d){for(const I of d){if(this.callbackDispatchedThisFrame[I])continue;this.callbackDispatchedThisFrame[I]=!0;const D=this.images[I];D||r.warnOnce(`Image with ID: "${I}" was not found`),S(D)&&this.updateImage(I,D)}}}const O=1e20;function V(B,d,I,D,z,W,ne,pe,ye){for(let ke=d;ke<d+D;ke++)X(B,I*W+ke,W,z,ne,pe,ye);for(let ke=I;ke<I+z;ke++)X(B,ke*W+d,1,D,ne,pe,ye)}function X(B,d,I,D,z,W,ne){W[0]=0,ne[0]=-O,ne[1]=O,z[0]=B[d];for(let pe=1,ye=0,ke=0;pe<D;pe++){z[pe]=B[d+pe*I];const ze=pe*pe;do{const Qe=W[ye];ke=(z[pe]-z[Qe]+ze-Qe*Qe)/(pe-Qe)/2}while(ke<=ne[ye]&&--ye>-1);ye++,W[ye]=pe,ne[ye]=ke,ne[ye+1]=O}for(let pe=0,ye=0;pe<D;pe++){for(;ne[ye+1]<pe;)ye++;const ke=W[ye],ze=pe-ke;B[d+pe*I]=z[ke]+ze*ze}}class Z{constructor(d,I){this.requestManager=d,this.localIdeographFontFamily=I,this.entries={}}setURL(d){this.url=d}getGlyphs(d,I){const D=[];for(const z in d)for(const W of d[z])D.push({stack:z,id:W});r.asyncAll(D,({stack:z,id:W},ne)=>{let pe=this.entries[z];pe||(pe=this.entries[z]={glyphs:{},requests:{},ranges:{}});let ye=pe.glyphs[W];if(ye!==void 0)return void ne(null,{stack:z,id:W,glyph:ye});if(ye=this._tinySDF(pe,z,W),ye)return pe.glyphs[W]=ye,void ne(null,{stack:z,id:W,glyph:ye});const ke=Math.floor(W/256);if(256*ke>65535)return void ne(new Error("glyphs > 65535 not supported"));if(pe.ranges[ke])return void ne(null,{stack:z,id:W,glyph:ye});let ze=pe.requests[ke];ze||(ze=pe.requests[ke]=[],Z.loadGlyphRange(z,ke,this.url,this.requestManager,(Qe,rt)=>{if(rt){for(const Pt in rt)this._doesCharSupportLocalGlyph(+Pt)||(pe.glyphs[+Pt]=rt[+Pt]);pe.ranges[ke]=!0}for(const Pt of ze)Pt(Qe,rt);delete pe.requests[ke]})),ze.push((Qe,rt)=>{Qe?ne(Qe):rt&&ne(null,{stack:z,id:W,glyph:rt[W]||null})})},(z,W)=>{if(z)I(z);else if(W){const ne={};for(const{stack:pe,id:ye,glyph:ke}of W)(ne[pe]||(ne[pe]={}))[ye]=ke&&{id:ke.id,bitmap:ke.bitmap.clone(),metrics:ke.metrics};I(null,ne)}})}_doesCharSupportLocalGlyph(d){return!!this.localIdeographFontFamily&&(r.unicodeBlockLookup["CJK Unified Ideographs"](d)||r.unicodeBlockLookup["Hangul Syllables"](d)||r.unicodeBlockLookup.Hiragana(d)||r.unicodeBlockLookup.Katakana(d))}_tinySDF(d,I,D){const z=this.localIdeographFontFamily;if(!z||!this._doesCharSupportLocalGlyph(D))return;let W=d.tinySDF;if(!W){let pe="400";/bold/i.test(I)?pe="900":/medium/i.test(I)?pe="500":/light/i.test(I)&&(pe="200"),W=d.tinySDF=new Z.TinySDF({fontSize:24,buffer:3,radius:8,cutoff:.25,fontFamily:z,fontWeight:pe})}const ne=W.draw(String.fromCharCode(D));return{id:D,bitmap:new r.AlphaImage({width:ne.width||30,height:ne.height||30},ne.data),metrics:{width:ne.glyphWidth||24,height:ne.glyphHeight||24,left:ne.glyphLeft||0,top:ne.glyphTop-27||-8,advance:ne.glyphAdvance||24}}}}Z.loadGlyphRange=function(B,d,I,D,z){const W=256*d,ne=W+255,pe=D.transformRequest(I.replace("{fontstack}",B).replace("{range}",`${W}-${ne}`),r.ResourceType.Glyphs);r.getArrayBuffer(pe,(ye,ke)=>{if(ye)z(ye);else if(ke){const ze={};for(const Qe of r.parseGlyphPbf(ke))ze[Qe.id]=Qe;z(null,ze)}})},Z.TinySDF=class{constructor({fontSize:B=24,buffer:d=3,radius:I=8,cutoff:D=.25,fontFamily:z="sans-serif",fontWeight:W="normal",fontStyle:ne="normal"}={}){this.buffer=d,this.cutoff=D,this.radius=I;const pe=this.size=B+4*d,ye=this._createCanvas(pe),ke=this.ctx=ye.getContext("2d",{willReadFrequently:!0});ke.font=`${ne} ${W} ${B}px ${z}`,ke.textBaseline="alphabetic",ke.textAlign="left",ke.fillStyle="black",this.gridOuter=new Float64Array(pe*pe),this.gridInner=new Float64Array(pe*pe),this.f=new Float64Array(pe),this.z=new Float64Array(pe+1),this.v=new Uint16Array(pe)}_createCanvas(B){const d=document.createElement("canvas");return d.width=d.height=B,d}draw(B){const{width:d,actualBoundingBoxAscent:I,actualBoundingBoxDescent:D,actualBoundingBoxLeft:z,actualBoundingBoxRight:W}=this.ctx.measureText(B),ne=Math.ceil(I),pe=Math.min(this.size-this.buffer,Math.ceil(W-z)),ye=Math.min(this.size-this.buffer,ne+Math.ceil(D)),ke=pe+2*this.buffer,ze=ye+2*this.buffer,Qe=Math.max(ke*ze,0),rt=new Uint8ClampedArray(Qe),Pt={data:rt,width:ke,height:ze,glyphWidth:pe,glyphHeight:ye,glyphTop:ne,glyphLeft:0,glyphAdvance:d};if(pe===0||ye===0)return Pt;const{ctx:kt,buffer:Et,gridInner:si,gridOuter:fi}=this;kt.clearRect(Et,Et,pe,ye),kt.fillText(B,Et,Et+ne);const xi=kt.getImageData(Et,Et,pe,ye);fi.fill(O,0,Qe),si.fill(0,0,Qe);for(let Nt=0;Nt<ye;Nt++)for(let Pi=0;Pi<pe;Pi++){const Ei=xi.data[4*(Nt*pe+Pi)+3]/255;if(Ei===0)continue;const Vi=(Nt+Et)*ke+Pi+Et;if(Ei===1)fi[Vi]=0,si[Vi]=O;else{const Ni=.5-Ei;fi[Vi]=Ni>0?Ni*Ni:0,si[Vi]=Ni<0?Ni*Ni:0}}V(fi,0,0,ke,ze,ke,this.f,this.v,this.z),V(si,Et,Et,pe,ye,ke,this.f,this.v,this.z);for(let Nt=0;Nt<Qe;Nt++){const Pi=Math.sqrt(fi[Nt])-Math.sqrt(si[Nt]);rt[Nt]=Math.round(255-255*(Pi/this.radius+this.cutoff))}return Pt}};const te=new r.Properties({anchor:new r.DataConstantProperty(r.spec.light.anchor),position:new class{constructor(){this.specification=r.spec.light.position}possiblyEvaluate(B,d){return r.sphericalToCartesian(B.expression.evaluate(d))}interpolate(B,d,I){return{x:r.number(B.x,d.x,I),y:r.number(B.y,d.y,I),z:r.number(B.z,d.z,I)}}},color:new r.DataConstantProperty(r.spec.light.color),intensity:new r.DataConstantProperty(r.spec.light.intensity)}),J="-transition";class ie extends r.Evented{constructor(d){super(),this._transitionable=new r.Transitionable(te),this.setLight(d),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(d,I={}){if(!this._validate(r.validateLight,d,I))for(const D in d){const z=d[D];D.endsWith(J)?this._transitionable.setTransition(D.slice(0,-J.length),z):this._transitionable.setValue(D,z)}}updateTransitions(d){this._transitioning=this._transitionable.transitioned(d,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(d){this.properties=this._transitioning.possiblyEvaluate(d)}_validate(d,I,D){return(!D||D.validate!==!1)&&r.emitValidationErrors(this,d.call(r.validateStyle,r.extend({value:I,style:{glyphs:!0,sprite:!0},styleSpec:r.spec})))}}class Ee{constructor(d,I){this.width=d,this.height=I,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(d,I){const D=d.join(",")+String(I);return this.dashEntry[D]||(this.dashEntry[D]=this.addDash(d,I)),this.dashEntry[D]}getDashRanges(d,I,D){const z=[];let W=d.length%2==1?-d[d.length-1]*D:0,ne=d[0]*D,pe=!0;z.push({left:W,right:ne,isDash:pe,zeroLength:d[0]===0});let ye=d[0];for(let ke=1;ke<d.length;ke++){pe=!pe;const ze=d[ke];W=ye*D,ye+=ze,ne=ye*D,z.push({left:W,right:ne,isDash:pe,zeroLength:ze===0})}return z}addRoundDash(d,I,D){const z=I/2;for(let W=-D;W<=D;W++){const ne=this.width*(this.nextRow+D+W);let pe=0,ye=d[pe];for(let ke=0;ke<this.width;ke++){ke/ye.right>1&&(ye=d[++pe]);const ze=Math.abs(ke-ye.left),Qe=Math.abs(ke-ye.right),rt=Math.min(ze,Qe);let Pt;const kt=W/D*(z+1);if(ye.isDash){const Et=z-Math.abs(kt);Pt=Math.sqrt(rt*rt+Et*Et)}else Pt=z-Math.sqrt(rt*rt+kt*kt);this.data[ne+ke]=Math.max(0,Math.min(255,Pt+128))}}}addRegularDash(d){for(let pe=d.length-1;pe>=0;--pe){const ye=d[pe],ke=d[pe+1];ye.zeroLength?d.splice(pe,1):ke&&ke.isDash===ye.isDash&&(ke.left=ye.left,d.splice(pe,1))}const I=d[0],D=d[d.length-1];I.isDash===D.isDash&&(I.left=D.left-this.width,D.right=I.right+this.width);const z=this.width*this.nextRow;let W=0,ne=d[W];for(let pe=0;pe<this.width;pe++){pe/ne.right>1&&(ne=d[++W]);const ye=Math.abs(pe-ne.left),ke=Math.abs(pe-ne.right),ze=Math.min(ye,ke);this.data[z+pe]=Math.max(0,Math.min(255,(ne.isDash?ze:-ze)+128))}}addDash(d,I){const D=I?7:0,z=2*D+1;if(this.nextRow+z>this.height)return r.warnOnce("LineAtlas out of space"),null;let W=0;for(let pe=0;pe<d.length;pe++)W+=d[pe];if(W!==0){const pe=this.width/W,ye=this.getDashRanges(d,this.width,pe);I?this.addRoundDash(ye,pe,D):this.addRegularDash(ye)}const ne={y:(this.nextRow+D+.5)/this.height,height:2*D/this.height,width:W};return this.nextRow+=z,this.dirty=!0,ne}bind(d){const I=d.gl;this.texture?(I.bindTexture(I.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,I.texSubImage2D(I.TEXTURE_2D,0,0,0,this.width,this.height,I.ALPHA,I.UNSIGNED_BYTE,this.data))):(this.texture=I.createTexture(),I.bindTexture(I.TEXTURE_2D,this.texture),I.texParameteri(I.TEXTURE_2D,I.TEXTURE_WRAP_S,I.REPEAT),I.texParameteri(I.TEXTURE_2D,I.TEXTURE_WRAP_T,I.REPEAT),I.texParameteri(I.TEXTURE_2D,I.TEXTURE_MIN_FILTER,I.LINEAR),I.texParameteri(I.TEXTURE_2D,I.TEXTURE_MAG_FILTER,I.LINEAR),I.texImage2D(I.TEXTURE_2D,0,I.ALPHA,this.width,this.height,0,I.ALPHA,I.UNSIGNED_BYTE,this.data))}}class Pe{constructor(d,I){this.workerPool=d,this.actors=[],this.currentActor=0,this.id=r.uniqueId();const D=this.workerPool.acquire(this.id);for(let z=0;z<D.length;z++){const W=new Pe.Actor(D[z],I,this.id);W.name=`Worker ${z}`,this.actors.push(W)}if(!this.actors.length)throw new Error("No actors found")}broadcast(d,I,D){r.asyncAll(this.actors,(z,W)=>{z.send(d,I,W)},D=D||function(){})}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(){this.actors.forEach(d=>{d.remove()}),this.actors=[],this.workerPool.release(this.id)}}function de(B,d,I){const D=function(z,W){if(z)return I(z);if(W){const ne=r.pick(r.extend(W,B),["tiles","minzoom","maxzoom","attribution","bounds","scheme","tileSize","encoding"]);W.vector_layers&&(ne.vectorLayers=W.vector_layers,ne.vectorLayerIds=ne.vectorLayers.map(pe=>pe.id)),I(null,ne)}};return B.url?r.getJSON(d.transformRequest(B.url,r.ResourceType.Source),D):r.exported.frame(()=>D(null,B))}Pe.Actor=r.Actor;class Te{constructor(d,I,D){this.bounds=r.LngLatBounds.convert(this.validateBounds(d)),this.minzoom=I||0,this.maxzoom=D||24}validateBounds(d){return Array.isArray(d)&&d.length===4?[Math.max(-180,d[0]),Math.max(-90,d[1]),Math.min(180,d[2]),Math.min(90,d[3])]:[-180,-90,180,90]}contains(d){const I=Math.pow(2,d.z),D=Math.floor(r.mercatorXfromLng(this.bounds.getWest())*I),z=Math.floor(r.mercatorYfromLat(this.bounds.getNorth())*I),W=Math.ceil(r.mercatorXfromLng(this.bounds.getEast())*I),ne=Math.ceil(r.mercatorYfromLat(this.bounds.getSouth())*I);return d.x>=D&&d.x<W&&d.y>=z&&d.y<ne}}class ve extends r.Evented{constructor(d,I,D,z){if(super(),this.id=d,this.dispatcher=D,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,r.extend(this,r.pick(I,["url","scheme","tileSize","promoteId"])),this._options=r.extend({type:"vector"},I),this._collectResourceTiming=I.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(z)}load(){this._loaded=!1,this.fire(new r.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=de(this._options,this.map._requestManager,(d,I)=>{this._tileJSONRequest=null,this._loaded=!0,this.map.style.sourceCaches[this.id].clearTiles(),d?this.fire(new r.ErrorEvent(d)):I&&(r.extend(this,I),I.bounds&&(this.tileBounds=new Te(I.bounds,this.minzoom,this.maxzoom)),this.fire(new r.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new r.Event("data",{dataType:"source",sourceDataType:"content"})))})}loaded(){return this._loaded}hasTile(d){return!this.tileBounds||this.tileBounds.contains(d.canonical)}onAdd(d){this.map=d,this.load()}setSourceProperty(d){this._tileJSONRequest&&this._tileJSONRequest.cancel(),d(),this.load()}setTiles(d){return this.setSourceProperty(()=>{this._options.tiles=d}),this}setUrl(d){return this.setSourceProperty(()=>{this.url=d,this._options.url=d}),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}serialize(){return r.extend({},this._options)}loadTile(d,I){const D=d.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),z={request:this.map._requestManager.transformRequest(D,r.ResourceType.Tile),uid:d.uid,tileID:d.tileID,zoom:d.tileID.overscaledZ,tileSize:this.tileSize*d.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};function W(ne,pe){return delete d.request,d.aborted?I(null):ne&&ne.status!==404?I(ne):(pe&&pe.resourceTiming&&(d.resourceTiming=pe.resourceTiming),this.map._refreshExpiredTiles&&pe&&d.setExpiryData(pe),d.loadVectorData(pe,this.map.painter),r.cacheEntryPossiblyAdded(this.dispatcher),I(null),void(d.reloadCallback&&(this.loadTile(d,d.reloadCallback),d.reloadCallback=null)))}z.request.collectResourceTiming=this._collectResourceTiming,d.actor&&d.state!=="expired"?d.state==="loading"?d.reloadCallback=I:d.request=d.actor.send("reloadTile",z,W.bind(this)):(d.actor=this.dispatcher.getActor(),d.request=d.actor.send("loadTile",z,W.bind(this)))}abortTile(d){d.request&&(d.request.cancel(),delete d.request),d.actor&&d.actor.send("abortTile",{uid:d.uid,type:this.type,source:this.id},void 0)}unloadTile(d){d.unloadVectorData(),d.actor&&d.actor.send("removeTile",{uid:d.uid,type:this.type,source:this.id},void 0)}hasTransition(){return!1}}class _e extends r.Evented{constructor(d,I,D,z){super(),this.id=d,this.dispatcher=D,this.setEventedParent(z),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=r.extend({type:"raster"},I),r.extend(this,r.pick(I,["url","scheme","tileSize"]))}load(){this._loaded=!1,this.fire(new r.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=de(this._options,this.map._requestManager,(d,I)=>{this._tileJSONRequest=null,this._loaded=!0,d?this.fire(new r.ErrorEvent(d)):I&&(r.extend(this,I),I.bounds&&(this.tileBounds=new Te(I.bounds,this.minzoom,this.maxzoom)),this.fire(new r.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new r.Event("data",{dataType:"source",sourceDataType:"content"})))})}loaded(){return this._loaded}onAdd(d){this.map=d,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}serialize(){return r.extend({},this._options)}hasTile(d){return!this.tileBounds||this.tileBounds.contains(d.canonical)}loadTile(d,I){const D=d.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);d.request=r.getImage(this.map._requestManager.transformRequest(D,r.ResourceType.Tile),(z,W,ne)=>{if(delete d.request,d.aborted)d.state="unloaded",I(null);else if(z)d.state="errored",I(z);else if(W){this.map._refreshExpiredTiles&&d.setExpiryData(ne);const pe=this.map.painter.context,ye=pe.gl;d.texture=this.map.painter.getTileTexture(W.width),d.texture?d.texture.update(W,{useMipmap:!0}):(d.texture=new T(pe,W,ye.RGBA,{useMipmap:!0}),d.texture.bind(ye.LINEAR,ye.CLAMP_TO_EDGE,ye.LINEAR_MIPMAP_NEAREST),pe.extTextureFilterAnisotropic&&ye.texParameterf(ye.TEXTURE_2D,pe.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,pe.extTextureFilterAnisotropicMax)),d.state="loaded",r.cacheEntryPossiblyAdded(this.dispatcher),I(null)}})}abortTile(d,I){d.request&&(d.request.cancel(),delete d.request),I()}unloadTile(d,I){d.texture&&this.map.painter.saveTileTexture(d.texture),I()}hasTransition(){return!1}}let ot;class it extends _e{constructor(d,I,D,z){super(d,I,D,z),this.type="raster-dem",this.maxzoom=22,this._options=r.extend({type:"raster-dem"},I),this.encoding=I.encoding||"mapbox"}serialize(){return{type:"raster-dem",url:this.url,tileSize:this.tileSize,tiles:this.tiles,bounds:this.bounds,encoding:this.encoding}}loadTile(d,I){const D=d.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);function z(W,ne){W&&(d.state="errored",I(W)),ne&&(d.dem=ne,d.needsHillshadePrepare=!0,d.needsTerrainPrepare=!0,d.state="loaded",I(null))}d.request=r.getImage(this.map._requestManager.transformRequest(D,r.ResourceType.Tile),function(W,ne){if(delete d.request,d.aborted)d.state="unloaded",I(null);else if(W)d.state="errored",I(W);else if(ne){this.map._refreshExpiredTiles&&d.setExpiryData(ne),delete ne.cacheControl,delete ne.expires;const pe=r.isImageBitmap(ne)&&(ot==null&&(ot=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")&&typeof createImageBitmap=="function"),ot)?ne:r.exported.getImageData(ne,1),ye={uid:d.uid,coord:d.tileID,source:this.id,rawImageData:pe,encoding:this.encoding};d.actor&&d.state!=="expired"||(d.actor=this.dispatcher.getActor(),d.actor.send("loadDEMTile",ye,z.bind(this)))}}.bind(this)),d.neighboringTiles=this._getNeighboringTiles(d.tileID)}_getNeighboringTiles(d){const I=d.canonical,D=Math.pow(2,I.z),z=(I.x-1+D)%D,W=I.x===0?d.wrap-1:d.wrap,ne=(I.x+1+D)%D,pe=I.x+1===D?d.wrap+1:d.wrap,ye={};return ye[new r.OverscaledTileID(d.overscaledZ,W,I.z,z,I.y).key]={backfilled:!1},ye[new r.OverscaledTileID(d.overscaledZ,pe,I.z,ne,I.y).key]={backfilled:!1},I.y>0&&(ye[new r.OverscaledTileID(d.overscaledZ,W,I.z,z,I.y-1).key]={backfilled:!1},ye[new r.OverscaledTileID(d.overscaledZ,d.wrap,I.z,I.x,I.y-1).key]={backfilled:!1},ye[new r.OverscaledTileID(d.overscaledZ,pe,I.z,ne,I.y-1).key]={backfilled:!1}),I.y+1<D&&(ye[new r.OverscaledTileID(d.overscaledZ,W,I.z,z,I.y+1).key]={backfilled:!1},ye[new r.OverscaledTileID(d.overscaledZ,d.wrap,I.z,I.x,I.y+1).key]={backfilled:!1},ye[new r.OverscaledTileID(d.overscaledZ,pe,I.z,ne,I.y+1).key]={backfilled:!1}),ye}unloadTile(d){d.demTexture&&this.map.painter.saveTileTexture(d.demTexture),d.fbo&&(d.fbo.destroy(),delete d.fbo),d.dem&&delete d.dem,delete d.neighboringTiles,d.state="unloaded",d.actor&&d.actor.send("removeDEMTile",{uid:d.uid,source:this.id})}}class It extends r.Evented{constructor(d,I,D,z){super(),this.id=d,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._pendingLoads=0,this.actor=D.getActor(),this.setEventedParent(z),this._data=I.data,this._options=r.extend({},I),this._collectResourceTiming=I.collectResourceTiming,I.maxzoom!==void 0&&(this.maxzoom=I.maxzoom),I.type&&(this.type=I.type),I.attribution&&(this.attribution=I.attribution),this.promoteId=I.promoteId;const W=r.EXTENT/this.tileSize;this.workerOptions=r.extend({source:this.id,cluster:I.cluster||!1,geojsonVtOptions:{buffer:(I.buffer!==void 0?I.buffer:128)*W,tolerance:(I.tolerance!==void 0?I.tolerance:.375)*W,extent:r.EXTENT,maxZoom:this.maxzoom,lineMetrics:I.lineMetrics||!1,generateId:I.generateId||!1},superclusterOptions:{maxZoom:I.clusterMaxZoom!==void 0?I.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,I.clusterMinPoints||2),extent:r.EXTENT,radius:(I.clusterRadius||50)*W,log:!1,generateId:I.generateId||!1},clusterProperties:I.clusterProperties,filter:I.filter},I.workerOptions)}load(){this._updateWorkerData("metadata")}onAdd(d){this.map=d,this.load()}setData(d){return this._data=d,this._updateWorkerData("content"),this}getClusterExpansionZoom(d,I){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:d,source:this.id},I),this}getClusterChildren(d,I){return this.actor.send("geojson.getClusterChildren",{clusterId:d,source:this.id},I),this}getClusterLeaves(d,I,D,z){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:d,limit:I,offset:D},z),this}_updateWorkerData(d){const I=r.extend({},this.workerOptions),D=this._data;typeof D=="string"?(I.request=this.map._requestManager.transformRequest(r.exported.resolveURL(D),r.ResourceType.Source),I.request.collectResourceTiming=this._collectResourceTiming):I.data=JSON.stringify(D),this._pendingLoads++,this.fire(new r.Event("dataloading",{dataType:"source"})),this.actor.send(`${this.type}.loadData`,I,(z,W)=>{if(this._pendingLoads--,this._removed||W&&W.abandoned)return void this.fire(new r.Event("dataabort",{dataType:"source",sourceDataType:d}));let ne=null;if(W&&W.resourceTiming&&W.resourceTiming[this.id]&&(ne=W.resourceTiming[this.id].slice(0)),z)return void this.fire(new r.ErrorEvent(z));const pe={dataType:"source",sourceDataType:d};this._collectResourceTiming&&ne&&ne.length>0&&r.extend(pe,{resourceTiming:ne}),this.fire(new r.Event("data",pe))})}loaded(){return this._pendingLoads===0}loadTile(d,I){const D=d.actor?"reloadTile":"loadTile";d.actor=this.actor;const z={type:this.type,uid:d.uid,tileID:d.tileID,zoom:d.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};d.request=this.actor.send(D,z,(W,ne)=>(delete d.request,d.unloadVectorData(),d.aborted?I(null):W?I(W):(d.loadVectorData(ne,this.map.painter,D==="reloadTile"),I(null))))}abortTile(d){d.request&&(d.request.cancel(),delete d.request),d.aborted=!0}unloadTile(d){d.unloadVectorData(),this.actor.send("removeTile",{uid:d.uid,type:this.type,source:this.id})}onRemove(){this._removed=!0,this.actor.send("removeSource",{type:this.type,source:this.id})}serialize(){return r.extend({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}}var Xe=r.createLayout([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class we extends r.Evented{constructor(d,I,D,z){super(),this.id=d,this.dispatcher=D,this.coordinates=I.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(z),this.options=I}load(d,I){this._loaded=!1,this.fire(new r.Event("dataloading",{dataType:"source"})),this.url=this.options.url,r.getImage(this.map._requestManager.transformRequest(this.url,r.ResourceType.Image),(D,z)=>{this._loaded=!0,D?this.fire(new r.ErrorEvent(D)):z&&(this.image=z,d&&(this.coordinates=d),I&&I(),this._finishLoading())})}loaded(){return this._loaded}updateImage(d){return this.image&&d.url?(this.options.url=d.url,this.load(d.coordinates,()=>{this.texture=null}),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new r.Event("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(d){this.map=d,this.load()}setCoordinates(d){this.coordinates=d;const I=d.map(r.MercatorCoordinate.fromLngLat);this.tileID=function(z){let W=1/0,ne=1/0,pe=-1/0,ye=-1/0;for(const rt of z)W=Math.min(W,rt.x),ne=Math.min(ne,rt.y),pe=Math.max(pe,rt.x),ye=Math.max(ye,rt.y);const ke=Math.max(pe-W,ye-ne),ze=Math.max(0,Math.floor(-Math.log(ke)/Math.LN2)),Qe=Math.pow(2,ze);return new r.CanonicalTileID(ze,Math.floor((W+pe)/2*Qe),Math.floor((ne+ye)/2*Qe))}(I),this.minzoom=this.maxzoom=this.tileID.z;const D=I.map(z=>this.tileID.getTilePoint(z)._round());return this._boundsArray=new r.RasterBoundsArray,this._boundsArray.emplaceBack(D[0].x,D[0].y,0,0),this._boundsArray.emplaceBack(D[1].x,D[1].y,r.EXTENT,0),this._boundsArray.emplaceBack(D[3].x,D[3].y,0,r.EXTENT),this._boundsArray.emplaceBack(D[2].x,D[2].y,r.EXTENT,r.EXTENT),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new r.Event("data",{dataType:"source",sourceDataType:"content"})),this}prepare(){if(Object.keys(this.tiles).length===0||!this.image)return;const d=this.map.painter.context,I=d.gl;this.boundsBuffer||(this.boundsBuffer=d.createVertexBuffer(this._boundsArray,Xe.members)),this.boundsSegments||(this.boundsSegments=r.SegmentVector.simpleSegment(0,0,4,2)),this.texture||(this.texture=new T(d,this.image,I.RGBA),this.texture.bind(I.LINEAR,I.CLAMP_TO_EDGE));for(const D in this.tiles){const z=this.tiles[D];z.state!=="loaded"&&(z.state="loaded",z.texture=this.texture)}}loadTile(d,I){this.tileID&&this.tileID.equals(d.tileID.canonical)?(this.tiles[String(d.tileID.wrap)]=d,d.buckets={},I(null)):(d.state="errored",I(null))}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}}class Ce extends we{constructor(d,I,D,z){super(d,I,D,z),this.roundZoom=!0,this.type="video",this.options=I}load(){this._loaded=!1;const d=this.options;this.urls=[];for(const I of d.urls)this.urls.push(this.map._requestManager.transformRequest(I,r.ResourceType.Source).url);r.getVideo(this.urls,(I,D)=>{this._loaded=!0,I?this.fire(new r.ErrorEvent(I)):D&&(this.video=D,this.video.loop=!0,this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading())})}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(d){if(this.video){const I=this.video.seekable;d<I.start(0)||d>I.end(0)?this.fire(new r.ErrorEvent(new r.ValidationError(`sources.${this.id}`,null,`Playback for this video can be set only between the ${I.start(0)} and ${I.end(0)}-second mark.`))):this.video.currentTime=d}}getVideo(){return this.video}onAdd(d){this.map||(this.map=d,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const d=this.map.painter.context,I=d.gl;this.boundsBuffer||(this.boundsBuffer=d.createVertexBuffer(this._boundsArray,Xe.members)),this.boundsSegments||(this.boundsSegments=r.SegmentVector.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(I.LINEAR,I.CLAMP_TO_EDGE),I.texSubImage2D(I.TEXTURE_2D,0,0,0,I.RGBA,I.UNSIGNED_BYTE,this.video)):(this.texture=new T(d,this.video,I.RGBA),this.texture.bind(I.LINEAR,I.CLAMP_TO_EDGE));for(const D in this.tiles){const z=this.tiles[D];z.state!=="loaded"&&(z.state="loaded",z.texture=this.texture)}}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}}class Re extends we{constructor(d,I,D,z){super(d,I,D,z),I.coordinates?Array.isArray(I.coordinates)&&I.coordinates.length===4&&!I.coordinates.some(W=>!Array.isArray(W)||W.length!==2||W.some(ne=>typeof ne!="number"))||this.fire(new r.ErrorEvent(new r.ValidationError(`sources.${d}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new r.ErrorEvent(new r.ValidationError(`sources.${d}`,null,'missing required property "coordinates"'))),I.animate&&typeof I.animate!="boolean"&&this.fire(new r.ErrorEvent(new r.ValidationError(`sources.${d}`,null,'optional "animate" property must be a boolean value'))),I.canvas?typeof I.canvas=="string"||I.canvas instanceof HTMLCanvasElement||this.fire(new r.ErrorEvent(new r.ValidationError(`sources.${d}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new r.ErrorEvent(new r.ValidationError(`sources.${d}`,null,'missing required property "canvas"'))),this.options=I,this.animate=I.animate===void 0||I.animate}load(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new r.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())}getCanvas(){return this.canvas}onAdd(d){this.map=d,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let d=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,d=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,d=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const I=this.map.painter.context,D=I.gl;this.boundsBuffer||(this.boundsBuffer=I.createVertexBuffer(this._boundsArray,Xe.members)),this.boundsSegments||(this.boundsSegments=r.SegmentVector.simpleSegment(0,0,4,2)),this.texture?(d||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new T(I,this.canvas,D.RGBA,{premultiply:!0});for(const z in this.tiles){const W=this.tiles[z];W.state!=="loaded"&&(W.state="loaded",W.texture=this.texture)}}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const d of[this.canvas.width,this.canvas.height])if(isNaN(d)||d<=0)return!0;return!1}}const le={vector:ve,raster:_e,"raster-dem":it,geojson:It,video:Ce,image:we,canvas:Re};function Se(B,d){const I=r.create();return r.translate(I,I,[1,1,0]),r.scale(I,I,[.5*B.width,.5*B.height,1]),r.multiply(I,I,B.calculatePosMatrix(d.toUnwrapped()))}function he(B,d,I,D,z,W){const ne=function(Qe,rt,Pt){if(Qe)for(const kt of Qe){const Et=rt[kt];if(Et&&Et.source===Pt&&Et.type==="fill-extrusion")return!0}else for(const kt in rt){const Et=rt[kt];if(Et.source===Pt&&Et.type==="fill-extrusion")return!0}return!1}(z&&z.layers,d,B.id),pe=W.maxPitchScaleFactor(),ye=B.tilesIn(D,pe,ne);ye.sort(me);const ke=[];for(const Qe of ye)ke.push({wrappedTileID:Qe.tileID.wrapped().key,queryResults:Qe.tile.queryRenderedFeatures(d,I,B._state,Qe.queryGeometry,Qe.cameraQueryGeometry,Qe.scale,z,W,pe,Se(B.transform,Qe.tileID))});const ze=function(Qe){const rt={},Pt={};for(const kt of Qe){const Et=kt.queryResults,si=kt.wrappedTileID,fi=Pt[si]=Pt[si]||{};for(const xi in Et){const Nt=Et[xi],Pi=fi[xi]=fi[xi]||{},Ei=rt[xi]=rt[xi]||[];for(const Vi of Nt)Pi[Vi.featureIndex]||(Pi[Vi.featureIndex]=!0,Ei.push(Vi))}}return rt}(ke);for(const Qe in ze)ze[Qe].forEach(rt=>{const Pt=rt.feature,kt=B.getFeatureState(Pt.layer["source-layer"],Pt.id);Pt.source=Pt.layer.source,Pt.layer["source-layer"]&&(Pt.sourceLayer=Pt.layer["source-layer"]),Pt.state=kt});return ze}function me(B,d){const I=B.tileID,D=d.tileID;return I.overscaledZ-D.overscaledZ||I.canonical.y-D.canonical.y||I.wrap-D.wrap||I.canonical.x-D.canonical.x}class Be{constructor(d,I){this.tileID=d,this.uid=r.uniqueId(),this.uses=0,this.tileSize=I,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.textures=[],this.textureCoords={},this.expiredRequestCount=0,this.state="loading"}registerFadeDuration(d){const I=d+this.timeAdded;I<r.exported.now()||this.fadeEndTime&&I<this.fadeEndTime||(this.fadeEndTime=I)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}clearTextures(d){this.demTexture&&d.saveTileTexture(this.demTexture),this.textures.forEach(I=>d.saveTileTexture(I)),this.demTexture=null,this.textures=[],this.textureCoords={}}loadVectorData(d,I,D){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",d){d.featureIndex&&(this.latestFeatureIndex=d.featureIndex,d.rawTileData?(this.latestRawTileData=d.rawTileData,this.latestFeatureIndex.rawTileData=d.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=d.collisionBoxArray,this.buckets=function(z,W){const ne={};if(!W)return ne;for(const pe of z){const ye=pe.layerIds.map(ke=>W.getLayer(ke)).filter(Boolean);if(ye.length!==0){pe.layers=ye,pe.stateDependentLayerIds&&(pe.stateDependentLayers=pe.stateDependentLayerIds.map(ke=>ye.filter(ze=>ze.id===ke)[0]));for(const ke of ye)ne[ke.id]=pe}}return ne}(d.buckets,I.style),this.hasSymbolBuckets=!1;for(const z in this.buckets){const W=this.buckets[z];if(W instanceof r.SymbolBucket){if(this.hasSymbolBuckets=!0,!D)break;W.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const z in this.buckets){const W=this.buckets[z];if(W instanceof r.SymbolBucket&&W.hasRTLText){this.hasRTLText=!0,r.lazyLoadRTLTextPlugin();break}}this.queryPadding=0;for(const z in this.buckets){const W=this.buckets[z];this.queryPadding=Math.max(this.queryPadding,I.style.getLayer(z).queryRadius(W))}d.imageAtlas&&(this.imageAtlas=d.imageAtlas),d.glyphAtlasImage&&(this.glyphAtlasImage=d.glyphAtlasImage)}else this.collisionBoxArray=new r.CollisionBoxArray}unloadVectorData(){for(const d in this.buckets)this.buckets[d].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(d){return this.buckets[d.id]}upload(d){for(const D in this.buckets){const z=this.buckets[D];z.uploadPending()&&z.upload(d)}const I=d.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new T(d,this.imageAtlas.image,I.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new T(d,this.glyphAtlasImage,I.ALPHA),this.glyphAtlasImage=null)}prepare(d){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(d,this.imageAtlasTexture)}queryRenderedFeatures(d,I,D,z,W,ne,pe,ye,ke,ze){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:z,cameraQueryGeometry:W,scale:ne,tileSize:this.tileSize,pixelPosMatrix:ze,transform:ye,params:pe,queryPadding:this.queryPadding*ke},d,I,D):{}}querySourceFeatures(d,I){const D=this.latestFeatureIndex;if(!D||!D.rawTileData)return;const z=D.loadVTLayers(),W=I?I.sourceLayer:"",ne=z._geojsonTileLayer||z[W];if(!ne)return;const pe=r.createFilter(I&&I.filter),{z:ye,x:ke,y:ze}=this.tileID.canonical,Qe={z:ye,x:ke,y:ze};for(let rt=0;rt<ne.length;rt++){const Pt=ne.feature(rt);if(pe.needGeometry){const si=r.toEvaluationFeature(Pt,!0);if(!pe.filter(new r.EvaluationParameters(this.tileID.overscaledZ),si,this.tileID.canonical))continue}else if(!pe.filter(new r.EvaluationParameters(this.tileID.overscaledZ),Pt))continue;const kt=D.getId(Pt,W),Et=new r.GeoJSONFeature(Pt,ye,ke,ze,kt);Et.tile=Qe,d.push(Et)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(d){const I=this.expirationTime;if(d.cacheControl){const D=r.parseCacheControl(d.cacheControl);D["max-age"]&&(this.expirationTime=Date.now()+1e3*D["max-age"])}else d.expires&&(this.expirationTime=new Date(d.expires).getTime());if(this.expirationTime){const D=Date.now();let z=!1;if(this.expirationTime>D)z=!1;else if(I)if(this.expirationTime<I)z=!0;else{const W=this.expirationTime-I;W?this.expirationTime=D+Math.max(W,3e4):z=!0}else z=!0;z?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(d,I){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(d).length===0)return;const D=this.latestFeatureIndex.loadVTLayers();for(const z in this.buckets){if(!I.style.hasLayer(z))continue;const W=this.buckets[z],ne=W.layers[0].sourceLayer||"_geojsonTileLayer",pe=D[ne],ye=d[ne];if(!pe||!ye||Object.keys(ye).length===0)continue;W.update(ye,pe,this.imageAtlas&&this.imageAtlas.patternPositions||{});const ke=I&&I.style&&I.style.getLayer(z);ke&&(this.queryPadding=Math.max(this.queryPadding,ke.queryRadius(W)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<r.exported.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(d){this.symbolFadeHoldUntil=r.exported.now()+d}setDependencies(d,I){const D={};for(const z of I)D[z]=!0;this.dependencies[d]=D}hasDependency(d,I){for(const D of d){const z=this.dependencies[D];if(z){for(const W of I)if(z[W])return!0}}return!1}}class We{constructor(d,I){this.max=d,this.onRemove=I,this.reset()}reset(){for(const d in this.data)for(const I of this.data[d])I.timeout&&clearTimeout(I.timeout),this.onRemove(I.value);return this.data={},this.order=[],this}add(d,I,D){const z=d.wrapped().key;this.data[z]===void 0&&(this.data[z]=[]);const W={value:I,timeout:void 0};if(D!==void 0&&(W.timeout=setTimeout(()=>{this.remove(d,W)},D)),this.data[z].push(W),this.order.push(z),this.order.length>this.max){const ne=this._getAndRemoveByKey(this.order[0]);ne&&this.onRemove(ne)}return this}has(d){return d.wrapped().key in this.data}getAndRemove(d){return this.has(d)?this._getAndRemoveByKey(d.wrapped().key):null}_getAndRemoveByKey(d){const I=this.data[d].shift();return I.timeout&&clearTimeout(I.timeout),this.data[d].length===0&&delete this.data[d],this.order.splice(this.order.indexOf(d),1),I.value}getByKey(d){const I=this.data[d];return I?I[0].value:null}get(d){return this.has(d)?this.data[d.wrapped().key][0].value:null}remove(d,I){if(!this.has(d))return this;const D=d.wrapped().key,z=I===void 0?0:this.data[D].indexOf(I),W=this.data[D][z];return this.data[D].splice(z,1),W.timeout&&clearTimeout(W.timeout),this.data[D].length===0&&delete this.data[D],this.onRemove(W.value),this.order.splice(this.order.indexOf(D),1),this}setMaxSize(d){for(this.max=d;this.order.length>this.max;){const I=this._getAndRemoveByKey(this.order[0]);I&&this.onRemove(I)}return this}filter(d){const I=[];for(const D in this.data)for(const z of this.data[D])d(z.value)||I.push(z);for(const D of I)this.remove(D.value.tileID,D)}}class st{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(d,I,D){const z=String(I);if(this.stateChanges[d]=this.stateChanges[d]||{},this.stateChanges[d][z]=this.stateChanges[d][z]||{},r.extend(this.stateChanges[d][z],D),this.deletedStates[d]===null){this.deletedStates[d]={};for(const W in this.state[d])W!==z&&(this.deletedStates[d][W]=null)}else if(this.deletedStates[d]&&this.deletedStates[d][z]===null){this.deletedStates[d][z]={};for(const W in this.state[d][z])D[W]||(this.deletedStates[d][z][W]=null)}else for(const W in D)this.deletedStates[d]&&this.deletedStates[d][z]&&this.deletedStates[d][z][W]===null&&delete this.deletedStates[d][z][W]}removeFeatureState(d,I,D){if(this.deletedStates[d]===null)return;const z=String(I);if(this.deletedStates[d]=this.deletedStates[d]||{},D&&I!==void 0)this.deletedStates[d][z]!==null&&(this.deletedStates[d][z]=this.deletedStates[d][z]||{},this.deletedStates[d][z][D]=null);else if(I!==void 0)if(this.stateChanges[d]&&this.stateChanges[d][z])for(D in this.deletedStates[d][z]={},this.stateChanges[d][z])this.deletedStates[d][z][D]=null;else this.deletedStates[d][z]=null;else this.deletedStates[d]=null}getState(d,I){const D=String(I),z=r.extend({},(this.state[d]||{})[D],(this.stateChanges[d]||{})[D]);if(this.deletedStates[d]===null)return{};if(this.deletedStates[d]){const W=this.deletedStates[d][I];if(W===null)return{};for(const ne in W)delete z[ne]}return z}initializeTileState(d,I){d.setFeatureState(this.state,I)}coalesceChanges(d,I){const D={};for(const z in this.stateChanges){this.state[z]=this.state[z]||{};const W={};for(const ne in this.stateChanges[z])this.state[z][ne]||(this.state[z][ne]={}),r.extend(this.state[z][ne],this.stateChanges[z][ne]),W[ne]=this.state[z][ne];D[z]=W}for(const z in this.deletedStates){this.state[z]=this.state[z]||{};const W={};if(this.deletedStates[z]===null)for(const ne in this.state[z])W[ne]={},this.state[z][ne]={};else for(const ne in this.deletedStates[z]){if(this.deletedStates[z][ne]===null)this.state[z][ne]={};else for(const pe of Object.keys(this.deletedStates[z][ne]))delete this.state[z][ne][pe];W[ne]=this.state[z][ne]}D[z]=D[z]||{},r.extend(D[z],W)}if(this.stateChanges={},this.deletedStates={},Object.keys(D).length!==0)for(const z in d)d[z].setFeatureState(D,I)}}class Ye extends r.Evented{constructor(d,I,D){super(),this.id=d,this.dispatcher=D,this.on("data",z=>{z.dataType==="source"&&z.sourceDataType==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&z.dataType==="source"&&z.sourceDataType==="content"&&(this.reload(),this.transform&&this.update(this.transform,this.terrain))}),this.on("dataloading",()=>{this._sourceErrored=!1}),this.on("error",()=>{this._sourceErrored=this._source.loaded()}),this._source=function(z,W,ne,pe){const ye=new le[W.type](z,W,ne,pe);if(ye.id!==z)throw new Error(`Expected Source id to be ${z} instead of ${ye.id}`);return r.bindAll(["load","abort","unload","serialize","prepare"],ye),ye}(d,I,D,this),this._tiles={},this._cache=new We(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new st}onAdd(d){this.map=d,this._maxTileCacheSize=d?d._maxTileCacheSize:null,this._source&&this._source.onAdd&&this._source.onAdd(d)}onRemove(d){this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(d)}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;for(const d in this._tiles){const I=this._tiles[d];if(I.state!=="loaded"&&I.state!=="errored")return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const d=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,d&&this.reload(),this.transform&&this.update(this.transform,this.terrain)}_loadTile(d,I){return this._source.loadTile(d,I)}_unloadTile(d){if(this._source.unloadTile)return this._source.unloadTile(d,()=>{})}_abortTile(d){this._source.abortTile&&this._source.abortTile(d,()=>{}),this._source.fire(new r.Event("dataabort",{tile:d,coord:d.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(d){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const I in this._tiles){const D=this._tiles[I];D.upload(d),D.prepare(this.map.style.imageManager)}}getIds(){return Object.values(this._tiles).map(d=>d.tileID).sort(gt).map(d=>d.key)}getRenderableIds(d){const I=[];for(const D in this._tiles)this._isIdRenderable(D,d)&&I.push(this._tiles[D]);return d?I.sort((D,z)=>{const W=D.tileID,ne=z.tileID,pe=new r.pointGeometry(W.canonical.x,W.canonical.y)._rotate(this.transform.angle),ye=new r.pointGeometry(ne.canonical.x,ne.canonical.y)._rotate(this.transform.angle);return W.overscaledZ-ne.overscaledZ||ye.y-pe.y||ye.x-pe.x}).map(D=>D.tileID.key):I.map(D=>D.tileID).sort(gt).map(D=>D.key)}hasRenderableParent(d){const I=this.findLoadedParent(d,0);return!!I&&this._isIdRenderable(I.tileID.key)}_isIdRenderable(d,I){return this._tiles[d]&&this._tiles[d].hasData()&&!this._coveredTiles[d]&&(I||!this._tiles[d].holdingForFade())}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const d in this._tiles)this._tiles[d].state!=="errored"&&this._reloadTile(d,"reloading")}}_reloadTile(d,I){const D=this._tiles[d];D&&(D.state!=="loading"&&(D.state=I),this._loadTile(D,this._tileLoaded.bind(this,D,d,I)))}_tileLoaded(d,I,D,z){if(z)return d.state="errored",void(z.status!==404?this._source.fire(new r.ErrorEvent(z,{tile:d})):this.update(this.transform,this.terrain));d.timeAdded=r.exported.now(),D==="expired"&&(d.refreshedUponExpiration=!0),this._setTileReloadTimer(I,d),this.getSource().type==="raster-dem"&&d.dem&&this._backfillDEM(d),this._state.initializeTileState(d,this.map?this.map.painter:null),d.aborted||this._source.fire(new r.Event("data",{dataType:"source",tile:d,coord:d.tileID}))}_backfillDEM(d){const I=this.getRenderableIds();for(let z=0;z<I.length;z++){const W=I[z];if(d.neighboringTiles&&d.neighboringTiles[W]){const ne=this.getTileByID(W);D(d,ne),D(ne,d)}}function D(z,W){z.needsHillshadePrepare=!0,z.needsTerrainPrepare=!0;let ne=W.tileID.canonical.x-z.tileID.canonical.x;const pe=W.tileID.canonical.y-z.tileID.canonical.y,ye=Math.pow(2,z.tileID.canonical.z),ke=W.tileID.key;ne===0&&pe===0||Math.abs(pe)>1||(Math.abs(ne)>1&&(Math.abs(ne+ye)===1?ne+=ye:Math.abs(ne-ye)===1&&(ne-=ye)),W.dem&&z.dem&&(z.dem.backfillBorder(W.dem,ne,pe),z.neighboringTiles&&z.neighboringTiles[ke]&&(z.neighboringTiles[ke].backfilled=!0)))}}getTile(d){return this.getTileByID(d.key)}getTileByID(d){return this._tiles[d]}_retainLoadedChildren(d,I,D,z){for(const W in this._tiles){let ne=this._tiles[W];if(z[W]||!ne.hasData()||ne.tileID.overscaledZ<=I||ne.tileID.overscaledZ>D)continue;let pe=ne.tileID;for(;ne&&ne.tileID.overscaledZ>I+1;){const ke=ne.tileID.scaledTo(ne.tileID.overscaledZ-1);ne=this._tiles[ke.key],ne&&ne.hasData()&&(pe=ke)}let ye=pe;for(;ye.overscaledZ>I;)if(ye=ye.scaledTo(ye.overscaledZ-1),d[ye.key]){z[pe.key]=pe;break}}}findLoadedParent(d,I){if(d.key in this._loadedParentTiles){const D=this._loadedParentTiles[d.key];return D&&D.tileID.overscaledZ>=I?D:null}for(let D=d.overscaledZ-1;D>=I;D--){const z=d.scaledTo(D),W=this._getLoadedTile(z);if(W)return W}}_getLoadedTile(d){const I=this._tiles[d.key];return I&&I.hasData()?I:this._cache.getByKey(d.wrapped().key)}updateCacheSize(d){const I=Math.ceil(d.width/this._source.tileSize)+1,D=Math.ceil(d.height/this._source.tileSize)+1,z=Math.floor(I*D*5),W=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,z):z;this._cache.setMaxSize(W)}handleWrapJump(d){const I=Math.round((d-(this._prevLng===void 0?d:this._prevLng))/360);if(this._prevLng=d,I){const D={};for(const z in this._tiles){const W=this._tiles[z];W.tileID=W.tileID.unwrapTo(W.tileID.wrap+I),D[W.tileID.key]=W}this._tiles=D;for(const z in this._timers)clearTimeout(this._timers[z]),delete this._timers[z];for(const z in this._tiles)this._setTileReloadTimer(z,this._tiles[z])}}update(d,I){if(this.transform=d,this.terrain=I,!this._sourceLoaded||this._paused)return;let D;this.updateCacheSize(d),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?D=d.getVisibleUnwrappedCoordinates(this._source.tileID).map(ke=>new r.OverscaledTileID(ke.canonical.z,ke.wrap,ke.canonical.z,ke.canonical.x,ke.canonical.y)):(D=d.coveringTiles({tileSize:this.usedForTerrain?this.tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:!this.usedForTerrain&&this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled,terrain:I}),this._source.hasTile&&(D=D.filter(ke=>this._source.hasTile(ke)))):D=[];const z=d.coveringZoomLevel(this._source),W=Math.max(z-Ye.maxOverzooming,this._source.minzoom),ne=Math.max(z+Ye.maxUnderzooming,this._source.minzoom);if(this.usedForTerrain){const ke={};for(const ze of D)if(ze.canonical.z>this._source.minzoom){const Qe=ze.scaledTo(ze.canonical.z-1);ke[Qe.key]=Qe;const rt=ze.scaledTo(Math.max(this._source.minzoom,Math.min(ze.canonical.z,5)));ke[rt.key]=rt}D=D.concat(Object.values(ke))}const pe=this._updateRetainedTiles(D,z);if(Mt(this._source.type)){const ke={},ze={},Qe=Object.keys(pe);for(const rt of Qe){const Pt=pe[rt],kt=this._tiles[rt];if(!kt||kt.fadeEndTime&&kt.fadeEndTime<=r.exported.now())continue;const Et=this.findLoadedParent(Pt,W);Et&&(this._addTile(Et.tileID),ke[Et.tileID.key]=Et.tileID),ze[rt]=Pt}this._retainLoadedChildren(ze,z,ne,pe);for(const rt in ke)pe[rt]||(this._coveredTiles[rt]=!0,pe[rt]=ke[rt]);if(I){const rt={},Pt={};for(const kt of D)this._tiles[kt.key].hasData()?rt[kt.key]=kt:Pt[kt.key]=kt;for(const kt in Pt){const Et=Pt[kt].children(this._source.maxzoom);this._tiles[Et[0].key]&&this._tiles[Et[1].key]&&this._tiles[Et[2].key]&&this._tiles[Et[3].key]&&(rt[Et[0].key]=pe[Et[0].key]=Et[0],rt[Et[1].key]=pe[Et[1].key]=Et[1],rt[Et[2].key]=pe[Et[2].key]=Et[2],rt[Et[3].key]=pe[Et[3].key]=Et[3],delete Pt[kt])}for(const kt in Pt){const Et=this.findLoadedParent(Pt[kt],this._source.minzoom);if(Et){rt[Et.tileID.key]=pe[Et.tileID.key]=Et.tileID;for(const si in rt)rt[si].isChildOf(Et.tileID)&&delete rt[si]}}for(const kt in this._tiles)rt[kt]||(this._coveredTiles[kt]=!0)}}for(const ke in pe)this._tiles[ke].clearFadeHold();const ye=r.keysDifference(this._tiles,pe);for(const ke of ye){const ze=this._tiles[ke];ze.hasSymbolBuckets&&!ze.holdingForFade()?ze.setHoldDuration(this.map._fadeDuration):ze.hasSymbolBuckets&&!ze.symbolFadeFinished()||this._removeTile(ke)}this._updateLoadedParentTileCache()}releaseSymbolFadeTiles(){for(const d in this._tiles)this._tiles[d].holdingForFade()&&this._removeTile(d)}_updateRetainedTiles(d,I){const D={},z={},W=Math.max(I-Ye.maxOverzooming,this._source.minzoom),ne=Math.max(I+Ye.maxUnderzooming,this._source.minzoom),pe={};for(const ye of d){const ke=this._addTile(ye);D[ye.key]=ye,ke.hasData()||I<this._source.maxzoom&&(pe[ye.key]=ye)}this._retainLoadedChildren(pe,I,ne,D);for(const ye of d){let ke=this._tiles[ye.key];if(ke.hasData())continue;if(I+1>this._source.maxzoom){const Qe=ye.children(this._source.maxzoom)[0],rt=this.getTile(Qe);if(rt&&rt.hasData()){D[Qe.key]=Qe;continue}}else{const Qe=ye.children(this._source.maxzoom);if(D[Qe[0].key]&&D[Qe[1].key]&&D[Qe[2].key]&&D[Qe[3].key])continue}let ze=ke.wasRequested();for(let Qe=ye.overscaledZ-1;Qe>=W;--Qe){const rt=ye.scaledTo(Qe);if(z[rt.key]||(z[rt.key]=!0,ke=this.getTile(rt),!ke&&ze&&(ke=this._addTile(rt)),ke&&(D[rt.key]=rt,ze=ke.wasRequested(),ke.hasData())))break}}return D}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const d in this._tiles){const I=[];let D,z=this._tiles[d].tileID;for(;z.overscaledZ>0;){if(z.key in this._loadedParentTiles){D=this._loadedParentTiles[z.key];break}I.push(z.key);const W=z.scaledTo(z.overscaledZ-1);if(D=this._getLoadedTile(W),D)break;z=W}for(const W of I)this._loadedParentTiles[W]=D}}_addTile(d){let I=this._tiles[d.key];if(I)return I;I=this._cache.getAndRemove(d),I&&(this._setTileReloadTimer(d.key,I),I.tileID=d,this._state.initializeTileState(I,this.map?this.map.painter:null),this._cacheTimers[d.key]&&(clearTimeout(this._cacheTimers[d.key]),delete this._cacheTimers[d.key],this._setTileReloadTimer(d.key,I)));const D=I;return I||(I=new Be(d,this._source.tileSize*d.overscaleFactor()),this._loadTile(I,this._tileLoaded.bind(this,I,d.key,I.state))),I.uses++,this._tiles[d.key]=I,D||this._source.fire(new r.Event("dataloading",{tile:I,coord:I.tileID,dataType:"source"})),I}_setTileReloadTimer(d,I){d in this._timers&&(clearTimeout(this._timers[d]),delete this._timers[d]);const D=I.getExpiryTimeout();D&&(this._timers[d]=setTimeout(()=>{this._reloadTile(d,"expired"),delete this._timers[d]},D))}_removeTile(d){const I=this._tiles[d];I&&(I.uses--,delete this._tiles[d],this._timers[d]&&(clearTimeout(this._timers[d]),delete this._timers[d]),I.uses>0||(I.hasData()&&I.state!=="reloading"?this._cache.add(I.tileID,I,I.getExpiryTimeout()):(I.aborted=!0,this._abortTile(I),this._unloadTile(I))))}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const d in this._tiles)this._removeTile(d);this._cache.reset()}tilesIn(d,I,D){const z=[],W=this.transform;if(!W)return z;const ne=D?W.getCameraQueryGeometry(d):d,pe=d.map(kt=>W.pointCoordinate(kt,this.terrain)),ye=ne.map(kt=>W.pointCoordinate(kt,this.terrain)),ke=this.getIds();let ze=1/0,Qe=1/0,rt=-1/0,Pt=-1/0;for(const kt of ye)ze=Math.min(ze,kt.x),Qe=Math.min(Qe,kt.y),rt=Math.max(rt,kt.x),Pt=Math.max(Pt,kt.y);for(let kt=0;kt<ke.length;kt++){const Et=this._tiles[ke[kt]];if(Et.holdingForFade())continue;const si=Et.tileID,fi=Math.pow(2,W.zoom-Et.tileID.overscaledZ),xi=I*Et.queryPadding*r.EXTENT/Et.tileSize/fi,Nt=[si.getTilePoint(new r.MercatorCoordinate(ze,Qe)),si.getTilePoint(new r.MercatorCoordinate(rt,Pt))];if(Nt[0].x-xi<r.EXTENT&&Nt[0].y-xi<r.EXTENT&&Nt[1].x+xi>=0&&Nt[1].y+xi>=0){const Pi=pe.map(Vi=>si.getTilePoint(Vi)),Ei=ye.map(Vi=>si.getTilePoint(Vi));z.push({tile:Et,tileID:si,queryGeometry:Pi,cameraQueryGeometry:Ei,scale:fi})}}return z}getVisibleCoordinates(d){const I=this.getRenderableIds(d).map(D=>this._tiles[D].tileID);for(const D of I)D.posMatrix=this.transform.calculatePosMatrix(D.toUnwrapped());return I}hasTransition(){if(this._source.hasTransition())return!0;if(Mt(this._source.type))for(const d in this._tiles){const I=this._tiles[d];if(I.fadeEndTime!==void 0&&I.fadeEndTime>=r.exported.now())return!0}return!1}setFeatureState(d,I,D){this._state.updateState(d=d||"_geojsonTileLayer",I,D)}removeFeatureState(d,I,D){this._state.removeFeatureState(d=d||"_geojsonTileLayer",I,D)}getFeatureState(d,I){return this._state.getState(d=d||"_geojsonTileLayer",I)}setDependencies(d,I,D){const z=this._tiles[d];z&&z.setDependencies(I,D)}reloadTilesForDependencies(d,I){for(const D in this._tiles)this._tiles[D].hasDependency(d,I)&&this._reloadTile(D,"reloading");this._cache.filter(D=>!D.hasDependency(d,I))}}function gt(B,d){const I=Math.abs(2*B.wrap)-+(B.wrap<0),D=Math.abs(2*d.wrap)-+(d.wrap<0);return B.overscaledZ-d.overscaledZ||D-I||d.canonical.y-B.canonical.y||d.canonical.x-B.canonical.x}function Mt(B){return B==="raster"||B==="image"||B==="video"}Ye.maxOverzooming=10,Ye.maxUnderzooming=3;const ri="mapboxgl_preloaded_worker_pool";class ut{constructor(){this.active={}}acquire(d){if(!this.workers)for(this.workers=[];this.workers.length<ut.workerCount;)this.workers.push(new Worker(sa.workerUrl));return this.active[d]=!0,this.workers.slice()}release(d){delete this.active[d],this.numActive()===0&&(this.workers.forEach(I=>{I.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[ri]}numActive(){return Object.keys(this.active).length}}const wt=Math.floor(r.exported.hardwareConcurrency/2);let bt;function Je(){return bt||(bt=new ut),bt}function ei(B,d){const I={};for(const D in B)D!=="ref"&&(I[D]=B[D]);return r.refProperties.forEach(D=>{D in d&&(I[D]=d[D])}),I}function li(B){B=B.slice();const d=Object.create(null);for(let I=0;I<B.length;I++)d[B[I].id]=B[I];for(let I=0;I<B.length;I++)"ref"in B[I]&&(B[I]=ei(B[I],d[B[I].ref]));return B}ut.workerCount=Math.max(Math.min(wt,6),1);const Qt={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};function Si(B,d,I){I.push({command:Qt.addSource,args:[B,d[B]]})}function Ti(B,d,I){d.push({command:Qt.removeSource,args:[B]}),I[B]=!0}function Xt(B,d,I,D){Ti(B,I,D),Si(B,d,I)}function mi(B,d,I){let D;for(D in B[I])if(Object.prototype.hasOwnProperty.call(B[I],D)&&D!=="data"&&!v(B[I][D],d[I][D]))return!1;for(D in d[I])if(Object.prototype.hasOwnProperty.call(d[I],D)&&D!=="data"&&!v(B[I][D],d[I][D]))return!1;return!0}function Zi(B,d,I,D,z,W){let ne;for(ne in d=d||{},B=B||{})Object.prototype.hasOwnProperty.call(B,ne)&&(v(B[ne],d[ne])||I.push({command:W,args:[D,ne,d[ne],z]}));for(ne in d)Object.prototype.hasOwnProperty.call(d,ne)&&!Object.prototype.hasOwnProperty.call(B,ne)&&(v(B[ne],d[ne])||I.push({command:W,args:[D,ne,d[ne],z]}))}function Ci(B){return B.id}function ti(B,d){return B[d.id]=d,B}class Me{constructor(d,I){this.reset(d,I)}reset(d,I){this.points=d||[],this._distances=[0];for(let D=1;D<this.points.length;D++)this._distances[D]=this._distances[D-1]+this.points[D].dist(this.points[D-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(I||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(d){if(this.points.length===1)return this.points[0];d=r.clamp(d,0,1);let I=1,D=this._distances[I];const z=d*this.paddedLength+this.padding;for(;D<z&&I<this._distances.length;)D=this._distances[++I];const W=I-1,ne=this._distances[W],pe=D-ne,ye=pe>0?(z-ne)/pe:0;return this.points[W].mult(1-ye).add(this.points[I].mult(ye))}}function Q(B,d){let I=!0;return B==="always"||B!=="never"&&d!=="never"||(I=!1),I}class ae{constructor(d,I,D){const z=this.boxCells=[],W=this.circleCells=[];this.xCellCount=Math.ceil(d/D),this.yCellCount=Math.ceil(I/D);for(let ne=0;ne<this.xCellCount*this.yCellCount;ne++)z.push([]),W.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=d,this.height=I,this.xScale=this.xCellCount/d,this.yScale=this.yCellCount/I,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(d,I,D,z,W){this._forEachCell(I,D,z,W,this._insertBoxCell,this.boxUid++),this.boxKeys.push(d),this.bboxes.push(I),this.bboxes.push(D),this.bboxes.push(z),this.bboxes.push(W)}insertCircle(d,I,D,z){this._forEachCell(I-z,D-z,I+z,D+z,this._insertCircleCell,this.circleUid++),this.circleKeys.push(d),this.circles.push(I),this.circles.push(D),this.circles.push(z)}_insertBoxCell(d,I,D,z,W,ne){this.boxCells[W].push(ne)}_insertCircleCell(d,I,D,z,W,ne){this.circleCells[W].push(ne)}_query(d,I,D,z,W,ne,pe){if(D<0||d>this.width||z<0||I>this.height)return[];const ye=[];if(d<=0&&I<=0&&this.width<=D&&this.height<=z){if(W)return[{key:null,x1:d,y1:I,x2:D,y2:z}];for(let ke=0;ke<this.boxKeys.length;ke++)ye.push({key:this.boxKeys[ke],x1:this.bboxes[4*ke],y1:this.bboxes[4*ke+1],x2:this.bboxes[4*ke+2],y2:this.bboxes[4*ke+3]});for(let ke=0;ke<this.circleKeys.length;ke++){const ze=this.circles[3*ke],Qe=this.circles[3*ke+1],rt=this.circles[3*ke+2];ye.push({key:this.circleKeys[ke],x1:ze-rt,y1:Qe-rt,x2:ze+rt,y2:Qe+rt})}}else this._forEachCell(d,I,D,z,this._queryCell,ye,{hitTest:W,overlapMode:ne,seenUids:{box:{},circle:{}}},pe);return ye}query(d,I,D,z){return this._query(d,I,D,z,!1,null)}hitTest(d,I,D,z,W,ne){return this._query(d,I,D,z,!0,W,ne).length>0}hitTestCircle(d,I,D,z,W){const ne=d-D,pe=d+D,ye=I-D,ke=I+D;if(pe<0||ne>this.width||ke<0||ye>this.height)return!1;const ze=[];return this._forEachCell(ne,ye,pe,ke,this._queryCellCircle,ze,{hitTest:!0,overlapMode:z,circle:{x:d,y:I,radius:D},seenUids:{box:{},circle:{}}},W),ze.length>0}_queryCell(d,I,D,z,W,ne,pe,ye){const{seenUids:ke,hitTest:ze,overlapMode:Qe}=pe,rt=this.boxCells[W];if(rt!==null){const kt=this.bboxes;for(const Et of rt)if(!ke.box[Et]){ke.box[Et]=!0;const si=4*Et,fi=this.boxKeys[Et];if(d<=kt[si+2]&&I<=kt[si+3]&&D>=kt[si+0]&&z>=kt[si+1]&&(!ye||ye(fi))&&(!ze||!Q(Qe,fi.overlapMode))&&(ne.push({key:fi,x1:kt[si],y1:kt[si+1],x2:kt[si+2],y2:kt[si+3]}),ze))return!0}}const Pt=this.circleCells[W];if(Pt!==null){const kt=this.circles;for(const Et of Pt)if(!ke.circle[Et]){ke.circle[Et]=!0;const si=3*Et,fi=this.circleKeys[Et];if(this._circleAndRectCollide(kt[si],kt[si+1],kt[si+2],d,I,D,z)&&(!ye||ye(fi))&&(!ze||!Q(Qe,fi.overlapMode))){const xi=kt[si],Nt=kt[si+1],Pi=kt[si+2];if(ne.push({key:fi,x1:xi-Pi,y1:Nt-Pi,x2:xi+Pi,y2:Nt+Pi}),ze)return!0}}}return!1}_queryCellCircle(d,I,D,z,W,ne,pe,ye){const{circle:ke,seenUids:ze,overlapMode:Qe}=pe,rt=this.boxCells[W];if(rt!==null){const kt=this.bboxes;for(const Et of rt)if(!ze.box[Et]){ze.box[Et]=!0;const si=4*Et,fi=this.boxKeys[Et];if(this._circleAndRectCollide(ke.x,ke.y,ke.radius,kt[si+0],kt[si+1],kt[si+2],kt[si+3])&&(!ye||ye(fi))&&!Q(Qe,fi.overlapMode))return ne.push(!0),!0}}const Pt=this.circleCells[W];if(Pt!==null){const kt=this.circles;for(const Et of Pt)if(!ze.circle[Et]){ze.circle[Et]=!0;const si=3*Et,fi=this.circleKeys[Et];if(this._circlesCollide(kt[si],kt[si+1],kt[si+2],ke.x,ke.y,ke.radius)&&(!ye||ye(fi))&&!Q(Qe,fi.overlapMode))return ne.push(!0),!0}}}_forEachCell(d,I,D,z,W,ne,pe,ye){const ke=this._convertToXCellCoord(d),ze=this._convertToYCellCoord(I),Qe=this._convertToXCellCoord(D),rt=this._convertToYCellCoord(z);for(let Pt=ke;Pt<=Qe;Pt++)for(let kt=ze;kt<=rt;kt++)if(W.call(this,d,I,D,z,this.xCellCount*kt+Pt,ne,pe,ye))return}_convertToXCellCoord(d){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(d*this.xScale)))}_convertToYCellCoord(d){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(d*this.yScale)))}_circlesCollide(d,I,D,z,W,ne){const pe=z-d,ye=W-I,ke=D+ne;return ke*ke>pe*pe+ye*ye}_circleAndRectCollide(d,I,D,z,W,ne,pe){const ye=(ne-z)/2,ke=Math.abs(d-(z+ye));if(ke>ye+D)return!1;const ze=(pe-W)/2,Qe=Math.abs(I-(W+ze));if(Qe>ze+D)return!1;if(ke<=ye||Qe<=ze)return!0;const rt=ke-ye,Pt=Qe-ze;return rt*rt+Pt*Pt<=D*D}}function $e(B,d,I,D,z){const W=r.create();return d?(r.scale(W,W,[1/z,1/z,1]),I||r.rotateZ(W,W,D.angle)):r.multiply(W,D.labelPlaneMatrix,B),W}function _t(B,d,I,D,z){if(d){const W=r.clone(B);return r.scale(W,W,[z,z,1]),I||r.rotateZ(W,W,-D.angle),W}return D.glCoordMatrix}function Kt(B,d,I){let D;I?(D=[B.x,B.y,I(B.x,B.y),1],r.transformMat4(D,D,d)):(D=[B.x,B.y,0,1],dn(D,D,d));const z=D[3];return{point:new r.pointGeometry(D[0]/z,D[1]/z),signedDistanceFromCamera:z}}function di(B,d){return .5+B/d*.5}function wn(B,d){const I=B[0]/B[3],D=B[1]/B[3];return I>=-d[0]&&I<=d[0]&&D>=-d[1]&&D<=d[1]}function Ln(B,d,I,D,z,W,ne,pe,ye,ke){const ze=D?B.textSizeData:B.iconSizeData,Qe=r.evaluateSizeForZoom(ze,I.transform.zoom),rt=[256/I.width*2+1,256/I.height*2+1],Pt=D?B.text.dynamicLayoutVertexArray:B.icon.dynamicLayoutVertexArray;Pt.clear();const kt=B.lineVertexArray,Et=D?B.text.placedSymbolArray:B.icon.placedSymbolArray,si=I.transform.width/I.transform.height;let fi=!1;for(let xi=0;xi<Et.length;xi++){const Nt=Et.get(xi);if(Nt.hidden||Nt.writingMode===r.WritingMode.vertical&&!fi){zn(Nt.numGlyphs,Pt);continue}let Pi;if(fi=!1,ke?(Pi=[Nt.anchorX,Nt.anchorY,ke(Nt.anchorX,Nt.anchorY),1],r.transformMat4(Pi,Pi,d)):(Pi=[Nt.anchorX,Nt.anchorY,0,1],dn(Pi,Pi,d)),!wn(Pi,rt)){zn(Nt.numGlyphs,Pt);continue}const Ei=di(I.transform.cameraToCenterDistance,Pi[3]),Vi=r.evaluateSizeForFeature(ze,Qe,Nt),Ni=ne?Vi/Ei:Vi*Ei,cn=new r.pointGeometry(Nt.anchorX,Nt.anchorY),zi=Kt(cn,z,ke).point,Rn={},_n=Ki(Nt,Ni,!1,pe,d,z,W,B.glyphOffsetArray,kt,Pt,zi,cn,Rn,si,ye,ke);fi=_n.useVertical,(_n.notEnoughRoom||fi||_n.needsFlipping&&Ki(Nt,Ni,!0,pe,d,z,W,B.glyphOffsetArray,kt,Pt,zi,cn,Rn,si,ye,ke).notEnoughRoom)&&zn(Nt.numGlyphs,Pt)}D?B.text.dynamicLayoutVertexBuffer.updateData(Pt):B.icon.dynamicLayoutVertexBuffer.updateData(Pt)}function fn(B,d,I,D,z,W,ne,pe,ye,ke,ze,Qe,rt){const Pt=pe.glyphStartIndex+pe.numGlyphs,kt=pe.lineStartIndex,Et=pe.lineStartIndex+pe.lineLength,si=d.getoffsetX(pe.glyphStartIndex),fi=d.getoffsetX(Pt-1),xi=Gn(B*si,I,D,z,W,ne,pe.segment,kt,Et,ye,ke,ze,Qe,rt);if(!xi)return null;const Nt=Gn(B*fi,I,D,z,W,ne,pe.segment,kt,Et,ye,ke,ze,Qe,rt);return Nt?{first:xi,last:Nt}:null}function Bi(B,d,I,D){return B===r.WritingMode.horizontal&&Math.abs(I.y-d.y)>Math.abs(I.x-d.x)*D?{useVertical:!0}:(B===r.WritingMode.vertical?d.y<I.y:d.x>I.x)?{needsFlipping:!0}:null}function Ki(B,d,I,D,z,W,ne,pe,ye,ke,ze,Qe,rt,Pt,kt,Et){const si=d/24,fi=B.lineOffsetX*si,xi=B.lineOffsetY*si;let Nt;if(B.numGlyphs>1){const Pi=B.glyphStartIndex+B.numGlyphs,Ei=B.lineStartIndex,Vi=B.lineStartIndex+B.lineLength,Ni=fn(si,pe,fi,xi,I,ze,Qe,B,ye,W,rt,kt,Et);if(!Ni)return{notEnoughRoom:!0};const cn=Kt(Ni.first.point,ne,Et).point,zi=Kt(Ni.last.point,ne,Et).point;if(D&&!I){const Rn=Bi(B.writingMode,cn,zi,Pt);if(Rn)return Rn}Nt=[Ni.first];for(let Rn=B.glyphStartIndex+1;Rn<Pi-1;Rn++)Nt.push(Gn(si*pe.getoffsetX(Rn),fi,xi,I,ze,Qe,B.segment,Ei,Vi,ye,W,rt,kt,Et));Nt.push(Ni.last)}else{if(D&&!I){const Ei=Kt(Qe,z,Et).point,Vi=B.lineStartIndex+B.segment+1,Ni=new r.pointGeometry(ye.getx(Vi),ye.gety(Vi)),cn=Kt(Ni,z,Et),zi=cn.signedDistanceFromCamera>0?cn.point:Hn(Qe,Ni,Ei,1,z,Et),Rn=Bi(B.writingMode,Ei,zi,Pt);if(Rn)return Rn}const Pi=Gn(si*pe.getoffsetX(B.glyphStartIndex),fi,xi,I,ze,Qe,B.segment,B.lineStartIndex,B.lineStartIndex+B.lineLength,ye,W,rt,kt,Et);if(!Pi)return{notEnoughRoom:!0};Nt=[Pi]}for(const Pi of Nt)r.addDynamicAttributes(ke,Pi.point,Pi.angle);return{}}function Hn(B,d,I,D,z,W){const ne=Kt(B.add(B.sub(d)._unit()),z,W).point,pe=I.sub(ne);return I.add(pe._mult(D/pe.mag()))}function Gn(B,d,I,D,z,W,ne,pe,ye,ke,ze,Qe,rt,Pt){const kt=D?B-d:B+d;let Et=kt>0?1:-1,si=0;D&&(Et*=-1,si=Math.PI),Et<0&&(si+=Math.PI);let fi=Et>0?pe+ne:pe+ne+1,xi=z,Nt=z,Pi=0,Ei=0;const Vi=Math.abs(kt),Ni=[];for(;Pi+Ei<=Vi;){if(fi+=Et,fi<pe||fi>=ye)return null;if(Nt=xi,Ni.push(xi),xi=Qe[fi],xi===void 0){const qn=new r.pointGeometry(ke.getx(fi),ke.gety(fi)),Er=Kt(qn,ze,Pt);if(Er.signedDistanceFromCamera>0)xi=Qe[fi]=Er.point;else{const Mr=fi-Et;xi=Hn(Pi===0?W:new r.pointGeometry(ke.getx(Mr),ke.gety(Mr)),qn,Nt,Vi-Pi+1,ze,Pt)}}Pi+=Ei,Ei=Nt.dist(xi)}const cn=(Vi-Pi)/Ei,zi=xi.sub(Nt),Rn=zi.mult(cn)._add(Nt);Rn._add(zi._unit()._perp()._mult(I*Et));const _n=si+Math.atan2(xi.y-Nt.y,xi.x-Nt.x);return Ni.push(Rn),{point:Rn,angle:rt?_n:0,path:Ni}}const Zr=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function zn(B,d){for(let I=0;I<B;I++){const D=d.length;d.resize(D+4),d.float32.set(Zr,3*D)}}function dn(B,d,I){const D=d[0],z=d[1];return B[0]=I[0]*D+I[4]*z+I[12],B[1]=I[1]*D+I[5]*z+I[13],B[3]=I[3]*D+I[7]*z+I[15],B}const gn=100;class on{constructor(d,I=new ae(d.width+200,d.height+200,25),D=new ae(d.width+200,d.height+200,25)){this.transform=d,this.grid=I,this.ignoredGrid=D,this.pitchfactor=Math.cos(d._pitch)*d.cameraToCenterDistance,this.screenRightBoundary=d.width+gn,this.screenBottomBoundary=d.height+gn,this.gridRightBoundary=d.width+200,this.gridBottomBoundary=d.height+200,this.perspectiveRatioCutoff=.6}placeCollisionBox(d,I,D,z,W,ne){const pe=this.projectAndGetPerspectiveRatio(z,d.anchorPointX,d.anchorPointY,ne),ye=D*pe.perspectiveRatio,ke=d.x1*ye+pe.point.x,ze=d.y1*ye+pe.point.y,Qe=d.x2*ye+pe.point.x,rt=d.y2*ye+pe.point.y;return!this.isInsideGrid(ke,ze,Qe,rt)||I!=="always"&&this.grid.hitTest(ke,ze,Qe,rt,I,W)||pe.perspectiveRatio<this.perspectiveRatioCutoff?{box:[],offscreen:!1}:{box:[ke,ze,Qe,rt],offscreen:this.isOffscreen(ke,ze,Qe,rt)}}placeCollisionCircles(d,I,D,z,W,ne,pe,ye,ke,ze,Qe,rt,Pt,kt){const Et=[],si=new r.pointGeometry(I.anchorX,I.anchorY),fi=Kt(si,ne,kt),xi=di(this.transform.cameraToCenterDistance,fi.signedDistanceFromCamera),Nt=(ze?W/xi:W*xi)/r.ONE_EM,Pi=Kt(si,pe,kt).point,Ei=fn(Nt,z,I.lineOffsetX*Nt,I.lineOffsetY*Nt,!1,Pi,si,I,D,pe,{},!1,kt);let Vi=!1,Ni=!1,cn=!0;if(Ei){const zi=.5*rt*xi+Pt,Rn=new r.pointGeometry(-100,-100),_n=new r.pointGeometry(this.screenRightBoundary,this.screenBottomBoundary),qn=new Me,Er=Ei.first,Mr=Ei.last;let j=[];for(let be=Er.path.length-1;be>=1;be--)j.push(Er.path[be]);for(let be=1;be<Mr.path.length;be++)j.push(Mr.path[be]);const K=2.5*zi;if(ye){const be=j.map(je=>Kt(je,ye,kt));j=be.some(je=>je.signedDistanceFromCamera<=0)?[]:be.map(je=>je.point)}let ue=[];if(j.length>0){const be=j[0].clone(),je=j[0].clone();for(let Ke=1;Ke<j.length;Ke++)be.x=Math.min(be.x,j[Ke].x),be.y=Math.min(be.y,j[Ke].y),je.x=Math.max(je.x,j[Ke].x),je.y=Math.max(je.y,j[Ke].y);ue=be.x>=Rn.x&&je.x<=_n.x&&be.y>=Rn.y&&je.y<=_n.y?[j]:je.x<Rn.x||be.x>_n.x||je.y<Rn.y||be.y>_n.y?[]:r.clipLine([j],Rn.x,Rn.y,_n.x,_n.y)}for(const be of ue){qn.reset(be,.25*zi);let je=0;je=qn.length<=.5*zi?1:Math.ceil(qn.paddedLength/K)+1;for(let Ke=0;Ke<je;Ke++){const et=Ke/Math.max(je-1,1),at=qn.lerp(et),pt=at.x+gn,St=at.y+gn;Et.push(pt,St,zi,0);const ai=pt-zi,Ai=St-zi,wi=pt+zi,pi=St+zi;if(cn=cn&&this.isOffscreen(ai,Ai,wi,pi),Ni=Ni||this.isInsideGrid(ai,Ai,wi,pi),d!=="always"&&this.grid.hitTestCircle(pt,St,zi,d,Qe)&&(Vi=!0,!ke))return{circles:[],offscreen:!1,collisionDetected:Vi}}}}return{circles:!ke&&Vi||!Ni||xi<this.perspectiveRatioCutoff?[]:Et,offscreen:cn,collisionDetected:Vi}}queryRenderedSymbols(d){if(d.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const I=[];let D=1/0,z=1/0,W=-1/0,ne=-1/0;for(const ze of d){const Qe=new r.pointGeometry(ze.x+gn,ze.y+gn);D=Math.min(D,Qe.x),z=Math.min(z,Qe.y),W=Math.max(W,Qe.x),ne=Math.max(ne,Qe.y),I.push(Qe)}const pe=this.grid.query(D,z,W,ne).concat(this.ignoredGrid.query(D,z,W,ne)),ye={},ke={};for(const ze of pe){const Qe=ze.key;if(ye[Qe.bucketInstanceId]===void 0&&(ye[Qe.bucketInstanceId]={}),ye[Qe.bucketInstanceId][Qe.featureIndex])continue;const rt=[new r.pointGeometry(ze.x1,ze.y1),new r.pointGeometry(ze.x2,ze.y1),new r.pointGeometry(ze.x2,ze.y2),new r.pointGeometry(ze.x1,ze.y2)];r.polygonIntersectsPolygon(I,rt)&&(ye[Qe.bucketInstanceId][Qe.featureIndex]=!0,ke[Qe.bucketInstanceId]===void 0&&(ke[Qe.bucketInstanceId]=[]),ke[Qe.bucketInstanceId].push(Qe.featureIndex))}return ke}insertCollisionBox(d,I,D,z,W,ne){(D?this.ignoredGrid:this.grid).insert({bucketInstanceId:z,featureIndex:W,collisionGroupID:ne,overlapMode:I},d[0],d[1],d[2],d[3])}insertCollisionCircles(d,I,D,z,W,ne){const pe=D?this.ignoredGrid:this.grid,ye={bucketInstanceId:z,featureIndex:W,collisionGroupID:ne,overlapMode:I};for(let ke=0;ke<d.length;ke+=4)pe.insertCircle(ye,d[ke],d[ke+1],d[ke+2])}projectAndGetPerspectiveRatio(d,I,D,z){let W;return z?(W=[I,D,z(I,D),1],r.transformMat4(W,W,d)):(W=[I,D,0,1],dn(W,W,d)),{point:new r.pointGeometry((W[0]/W[3]+1)/2*this.transform.width+gn,(-W[1]/W[3]+1)/2*this.transform.height+gn),perspectiveRatio:.5+this.transform.cameraToCenterDistance/W[3]*.5}}isOffscreen(d,I,D,z){return D<gn||d>=this.screenRightBoundary||z<gn||I>this.screenBottomBoundary}isInsideGrid(d,I,D,z){return D>=0&&d<this.gridRightBoundary&&z>=0&&I<this.gridBottomBoundary}getViewportMatrix(){const d=r.identity([]);return r.translate(d,d,[-100,-100,0]),d}}function Sr(B,d,I){return d*(r.EXTENT/(B.tileSize*Math.pow(2,I-B.tileID.overscaledZ)))}class Wn{constructor(d,I,D,z){this.opacity=d?Math.max(0,Math.min(1,d.opacity+(d.placed?I:-I))):z&&D?1:0,this.placed=D}isHidden(){return this.opacity===0&&!this.placed}}class gr{constructor(d,I,D,z,W){this.text=new Wn(d?d.text:null,I,D,W),this.icon=new Wn(d?d.icon:null,I,z,W)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class Kr{constructor(d,I,D){this.text=d,this.icon=I,this.skipFade=D}}class an{constructor(){this.invProjMatrix=r.create(),this.viewportMatrix=r.create(),this.circles=[]}}class He{constructor(d,I,D,z,W){this.bucketInstanceId=d,this.featureIndex=I,this.sourceLayerIndex=D,this.bucketIndex=z,this.tileID=W}}class wo{constructor(d){this.crossSourceCollisions=d,this.maxGroupID=0,this.collisionGroups={}}get(d){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[d]){const I=++this.maxGroupID;this.collisionGroups[d]={ID:I,predicate:D=>D.collisionGroupID===I}}return this.collisionGroups[d]}}function xo(B,d,I,D,z){const{horizontalAlign:W,verticalAlign:ne}=r.getAnchorAlignment(B),pe=-(W-.5)*d,ye=-(ne-.5)*I,ke=r.evaluateVariableOffset(B,D);return new r.pointGeometry(pe+ke[0]*z,ye+ke[1]*z)}function co(B,d,I,D,z,W){const{x1:ne,x2:pe,y1:ye,y2:ke,anchorPointX:ze,anchorPointY:Qe}=B,rt=new r.pointGeometry(d,I);return D&&rt._rotate(z?W:-W),{x1:ne+rt.x,y1:ye+rt.y,x2:pe+rt.x,y2:ke+rt.y,anchorPointX:ze,anchorPointY:Qe}}class Le{constructor(d,I,D,z,W){this.transform=d.clone(),this.terrain=I,this.collisionIndex=new on(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=D,this.retainedQueryData={},this.collisionGroups=new wo(z),this.collisionCircleArrays={},this.prevPlacement=W,W&&(W.prevPlacement=void 0),this.placedOrientations={}}getBucketParts(d,I,D,z){const W=D.getBucket(I),ne=D.latestFeatureIndex;if(!W||!ne||I.id!==W.layerIds[0])return;const pe=D.collisionBoxArray,ye=W.layers[0].layout,ke=Math.pow(2,this.transform.zoom-D.tileID.overscaledZ),ze=D.tileSize/r.EXTENT,Qe=this.transform.calculatePosMatrix(D.tileID.toUnwrapped()),rt=ye.get("text-pitch-alignment")==="map",Pt=ye.get("text-rotation-alignment")==="map",kt=Sr(D,1,this.transform.zoom),Et=$e(Qe,rt,Pt,this.transform,kt);let si=null;if(rt){const xi=_t(Qe,rt,Pt,this.transform,kt);si=r.multiply([],this.transform.labelPlaneMatrix,xi)}this.retainedQueryData[W.bucketInstanceId]=new He(W.bucketInstanceId,ne,W.sourceLayerIndex,W.index,D.tileID);const fi={bucket:W,layout:ye,posMatrix:Qe,textLabelPlaneMatrix:Et,labelToScreenMatrix:si,scale:ke,textPixelRatio:ze,holdingForFade:D.holdingForFade(),collisionBoxArray:pe,partiallyEvaluatedTextSize:r.evaluateSizeForZoom(W.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(W.sourceID)};if(z)for(const xi of W.sortKeyRanges){const{sortKey:Nt,symbolInstanceStart:Pi,symbolInstanceEnd:Ei}=xi;d.push({sortKey:Nt,symbolInstanceStart:Pi,symbolInstanceEnd:Ei,parameters:fi})}else d.push({symbolInstanceStart:0,symbolInstanceEnd:W.symbolInstances.length,parameters:fi})}attemptAnchorPlacement(d,I,D,z,W,ne,pe,ye,ke,ze,Qe,rt,Pt,kt,Et,si){const fi=[rt.textOffset0,rt.textOffset1],xi=xo(d,D,z,fi,W),Nt=this.collisionIndex.placeCollisionBox(co(I,xi.x,xi.y,ne,pe,this.transform.angle),Qe,ye,ke,ze.predicate,si);if((!Et||this.collisionIndex.placeCollisionBox(co(Et,xi.x,xi.y,ne,pe,this.transform.angle),Qe,ye,ke,ze.predicate,si).box.length!==0)&&Nt.box.length>0){let Pi;if(this.prevPlacement&&this.prevPlacement.variableOffsets[rt.crossTileID]&&this.prevPlacement.placements[rt.crossTileID]&&this.prevPlacement.placements[rt.crossTileID].text&&(Pi=this.prevPlacement.variableOffsets[rt.crossTileID].anchor),rt.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");return this.variableOffsets[rt.crossTileID]={textOffset:fi,width:D,height:z,anchor:d,textBoxScale:W,prevAnchor:Pi},this.markUsedJustification(Pt,d,rt,kt),Pt.allowVerticalPlacement&&(this.markUsedOrientation(Pt,kt,rt),this.placedOrientations[rt.crossTileID]=kt),{shift:xi,placedGlyphBoxes:Nt}}}placeLayerBucketPart(d,I,D){const{bucket:z,layout:W,posMatrix:ne,textLabelPlaneMatrix:pe,labelToScreenMatrix:ye,textPixelRatio:ke,holdingForFade:ze,collisionBoxArray:Qe,partiallyEvaluatedTextSize:rt,collisionGroup:Pt}=d.parameters,kt=W.get("text-optional"),Et=W.get("icon-optional"),si=r.getOverlapMode(W,"text-overlap","text-allow-overlap"),fi=si==="always",xi=r.getOverlapMode(W,"icon-overlap","icon-allow-overlap"),Nt=xi==="always",Pi=W.get("text-rotation-alignment")==="map",Ei=W.get("text-pitch-alignment")==="map",Vi=W.get("icon-text-fit")!=="none",Ni=W.get("symbol-z-order")==="viewport-y",cn=fi&&(Nt||!z.hasIconData()||Et),zi=Nt&&(fi||!z.hasTextData()||kt);!z.collisionArrays&&Qe&&z.deserializeCollisionBoxes(Qe);const Rn=(_n,qn)=>{if(I[_n.crossTileID])return;if(ze)return void(this.placements[_n.crossTileID]=new Kr(!1,!1,!1));let Er=!1,Mr=!1,j=!0,K=null,ue={box:null,offscreen:null},be={box:null,offscreen:null},je=null,Ke=null,et=null,at=0,pt=0,St=0;qn.textFeatureIndex?at=qn.textFeatureIndex:_n.useRuntimeCollisionCircles&&(at=_n.featureIndex),qn.verticalTextFeatureIndex&&(pt=qn.verticalTextFeatureIndex);const ai=this.retainedQueryData[z.bucketInstanceId].tileID,Ai=this.terrain?(Oi,Wt)=>this.terrain.getElevation(ai,Oi,Wt):null;for(const Oi of["textBox","verticalTextBox","iconBox","verticalIconBox"]){const Wt=qn[Oi];Wt&&(Wt.elevation=Ai?Ai(Wt.anchorPointX,Wt.anchorPointY):0)}const wi=qn.textBox;if(wi){const Oi=ii=>{let Hi=r.WritingMode.horizontal;if(z.allowVerticalPlacement&&!ii&&this.prevPlacement){const Ji=this.prevPlacement.placedOrientations[_n.crossTileID];Ji&&(this.placedOrientations[_n.crossTileID]=Ji,Hi=Ji,this.markUsedOrientation(z,Hi,_n))}return Hi},Wt=(ii,Hi)=>{if(z.allowVerticalPlacement&&_n.numVerticalGlyphVertices>0&&qn.verticalTextBox){for(const Ji of z.writingModes)if(Ji===r.WritingMode.vertical?(ue=Hi(),be=ue):ue=ii(),ue&&ue.box&&ue.box.length)break}else ue=ii()};if(W.get("text-variable-anchor")){let ii=W.get("text-variable-anchor");if(this.prevPlacement&&this.prevPlacement.variableOffsets[_n.crossTileID]){const Ui=this.prevPlacement.variableOffsets[_n.crossTileID];ii.indexOf(Ui.anchor)>0&&(ii=ii.filter(Dn=>Dn!==Ui.anchor),ii.unshift(Ui.anchor))}const Hi=(Ui,Dn,Cn)=>{const kr=Ui.x2-Ui.x1,On=Ui.y2-Ui.y1,bo=_n.textBoxScale,So=Vi&&xi==="never"?Dn:null;let Yr={box:[],offscreen:!1};const qr=si!=="never"?2*ii.length:ii.length;for(let mo=0;mo<qr;++mo){const Co=this.attemptAnchorPlacement(ii[mo%ii.length],Ui,kr,On,bo,Pi,Ei,ke,ne,Pt,mo>=ii.length?si:"never",_n,z,Cn,So,Ai);if(Co&&(Yr=Co.placedGlyphBoxes,Yr&&Yr.box&&Yr.box.length)){Er=!0,K=Co.shift;break}}return Yr};Wt(()=>Hi(wi,qn.iconBox,r.WritingMode.horizontal),()=>{const Ui=qn.verticalTextBox;return z.allowVerticalPlacement&&!(ue&&ue.box&&ue.box.length)&&_n.numVerticalGlyphVertices>0&&Ui?Hi(Ui,qn.verticalIconBox,r.WritingMode.vertical):{box:null,offscreen:null}}),ue&&(Er=ue.box,j=ue.offscreen);const Ji=Oi(ue&&ue.box);if(!Er&&this.prevPlacement){const Ui=this.prevPlacement.variableOffsets[_n.crossTileID];Ui&&(this.variableOffsets[_n.crossTileID]=Ui,this.markUsedJustification(z,Ui.anchor,_n,Ji))}}else{const ii=(Hi,Ji)=>{const Ui=this.collisionIndex.placeCollisionBox(Hi,si,ke,ne,Pt.predicate,Ai);return Ui&&Ui.box&&Ui.box.length&&(this.markUsedOrientation(z,Ji,_n),this.placedOrientations[_n.crossTileID]=Ji),Ui};Wt(()=>ii(wi,r.WritingMode.horizontal),()=>{const Hi=qn.verticalTextBox;return z.allowVerticalPlacement&&_n.numVerticalGlyphVertices>0&&Hi?ii(Hi,r.WritingMode.vertical):{box:null,offscreen:null}}),Oi(ue&&ue.box&&ue.box.length)}}if(je=ue,Er=je&&je.box&&je.box.length>0,j=je&&je.offscreen,_n.useRuntimeCollisionCircles){const Oi=z.text.placedSymbolArray.get(_n.centerJustifiedTextSymbolIndex),Wt=r.evaluateSizeForFeature(z.textSizeData,rt,Oi),ii=W.get("text-padding");Ke=this.collisionIndex.placeCollisionCircles(si,Oi,z.lineVertexArray,z.glyphOffsetArray,Wt,ne,pe,ye,D,Ei,Pt.predicate,_n.collisionCircleDiameter,ii,Ai),Ke.circles.length&&Ke.collisionDetected&&!D&&r.warnOnce("Collisions detected, but collision boxes are not shown"),Er=fi||Ke.circles.length>0&&!Ke.collisionDetected,j=j&&Ke.offscreen}if(qn.iconFeatureIndex&&(St=qn.iconFeatureIndex),qn.iconBox){const Oi=Wt=>{const ii=Vi&&K?co(Wt,K.x,K.y,Pi,Ei,this.transform.angle):Wt;return this.collisionIndex.placeCollisionBox(ii,xi,ke,ne,Pt.predicate,Ai)};be&&be.box&&be.box.length&&qn.verticalIconBox?(et=Oi(qn.verticalIconBox),Mr=et.box.length>0):(et=Oi(qn.iconBox),Mr=et.box.length>0),j=j&&et.offscreen}const pi=kt||_n.numHorizontalGlyphVertices===0&&_n.numVerticalGlyphVertices===0,rn=Et||_n.numIconVertices===0;if(pi||rn?rn?pi||(Mr=Mr&&Er):Er=Mr&&Er:Mr=Er=Mr&&Er,Er&&je&&je.box&&this.collisionIndex.insertCollisionBox(je.box,si,W.get("text-ignore-placement"),z.bucketInstanceId,be&&be.box&&pt?pt:at,Pt.ID),Mr&&et&&this.collisionIndex.insertCollisionBox(et.box,xi,W.get("icon-ignore-placement"),z.bucketInstanceId,St,Pt.ID),Ke&&(Er&&this.collisionIndex.insertCollisionCircles(Ke.circles,si,W.get("text-ignore-placement"),z.bucketInstanceId,at,Pt.ID),D)){const Oi=z.bucketInstanceId;let Wt=this.collisionCircleArrays[Oi];Wt===void 0&&(Wt=this.collisionCircleArrays[Oi]=new an);for(let ii=0;ii<Ke.circles.length;ii+=4)Wt.circles.push(Ke.circles[ii+0]),Wt.circles.push(Ke.circles[ii+1]),Wt.circles.push(Ke.circles[ii+2]),Wt.circles.push(Ke.collisionDetected?1:0)}if(_n.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");if(z.bucketInstanceId===0)throw new Error("bucket.bucketInstanceId can't be 0");this.placements[_n.crossTileID]=new Kr(Er||cn,Mr||zi,j||z.justReloaded),I[_n.crossTileID]=!0};if(Ni){if(d.symbolInstanceStart!==0)throw new Error("bucket.bucketInstanceId should be 0");const _n=z.getSortedSymbolIndexes(this.transform.angle);for(let qn=_n.length-1;qn>=0;--qn){const Er=_n[qn];Rn(z.symbolInstances.get(Er),z.collisionArrays[Er])}}else for(let _n=d.symbolInstanceStart;_n<d.symbolInstanceEnd;_n++)Rn(z.symbolInstances.get(_n),z.collisionArrays[_n]);if(D&&z.bucketInstanceId in this.collisionCircleArrays){const _n=this.collisionCircleArrays[z.bucketInstanceId];r.invert(_n.invProjMatrix,ne),_n.viewportMatrix=this.collisionIndex.getViewportMatrix()}z.justReloaded=!1}markUsedJustification(d,I,D,z){let W;W=z===r.WritingMode.vertical?D.verticalPlacedTextSymbolIndex:{left:D.leftJustifiedTextSymbolIndex,center:D.centerJustifiedTextSymbolIndex,right:D.rightJustifiedTextSymbolIndex}[r.getAnchorJustification(I)];const ne=[D.leftJustifiedTextSymbolIndex,D.centerJustifiedTextSymbolIndex,D.rightJustifiedTextSymbolIndex,D.verticalPlacedTextSymbolIndex];for(const pe of ne)pe>=0&&(d.text.placedSymbolArray.get(pe).crossTileID=W>=0&&pe!==W?0:D.crossTileID)}markUsedOrientation(d,I,D){const z=I===r.WritingMode.horizontal||I===r.WritingMode.horizontalOnly?I:0,W=I===r.WritingMode.vertical?I:0,ne=[D.leftJustifiedTextSymbolIndex,D.centerJustifiedTextSymbolIndex,D.rightJustifiedTextSymbolIndex];for(const pe of ne)d.text.placedSymbolArray.get(pe).placedOrientation=z;D.verticalPlacedTextSymbolIndex&&(d.text.placedSymbolArray.get(D.verticalPlacedTextSymbolIndex).placedOrientation=W)}commit(d){this.commitTime=d,this.zoomAtLastRecencyCheck=this.transform.zoom;const I=this.prevPlacement;let D=!1;this.prevZoomAdjustment=I?I.zoomAdjustment(this.transform.zoom):0;const z=I?I.symbolFadeChange(d):1,W=I?I.opacities:{},ne=I?I.variableOffsets:{},pe=I?I.placedOrientations:{};for(const ye in this.placements){const ke=this.placements[ye],ze=W[ye];ze?(this.opacities[ye]=new gr(ze,z,ke.text,ke.icon),D=D||ke.text!==ze.text.placed||ke.icon!==ze.icon.placed):(this.opacities[ye]=new gr(null,z,ke.text,ke.icon,ke.skipFade),D=D||ke.text||ke.icon)}for(const ye in W){const ke=W[ye];if(!this.opacities[ye]){const ze=new gr(ke,z,!1,!1);ze.isHidden()||(this.opacities[ye]=ze,D=D||ke.text.placed||ke.icon.placed)}}for(const ye in ne)this.variableOffsets[ye]||!this.opacities[ye]||this.opacities[ye].isHidden()||(this.variableOffsets[ye]=ne[ye]);for(const ye in pe)this.placedOrientations[ye]||!this.opacities[ye]||this.opacities[ye].isHidden()||(this.placedOrientations[ye]=pe[ye]);if(I&&I.lastPlacementChangeTime===void 0)throw new Error("Last placement time for previous placement is not defined");D?this.lastPlacementChangeTime=d:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=I?I.lastPlacementChangeTime:d)}updateLayerOpacities(d,I){const D={};for(const z of I){const W=z.getBucket(d);W&&z.latestFeatureIndex&&d.id===W.layerIds[0]&&this.updateBucketOpacities(W,D,z.collisionBoxArray)}}updateBucketOpacities(d,I,D){d.hasTextData()&&d.text.opacityVertexArray.clear(),d.hasIconData()&&d.icon.opacityVertexArray.clear(),d.hasIconCollisionBoxData()&&d.iconCollisionBox.collisionVertexArray.clear(),d.hasTextCollisionBoxData()&&d.textCollisionBox.collisionVertexArray.clear();const z=d.layers[0].layout,W=new gr(null,0,!1,!1,!0),ne=z.get("text-allow-overlap"),pe=z.get("icon-allow-overlap"),ye=z.get("text-variable-anchor"),ke=z.get("text-rotation-alignment")==="map",ze=z.get("text-pitch-alignment")==="map",Qe=z.get("icon-text-fit")!=="none",rt=new gr(null,0,ne&&(pe||!d.hasIconData()||z.get("icon-optional")),pe&&(ne||!d.hasTextData()||z.get("text-optional")),!0);!d.collisionArrays&&D&&(d.hasIconCollisionBoxData()||d.hasTextCollisionBoxData())&&d.deserializeCollisionBoxes(D);const Pt=(kt,Et,si)=>{for(let fi=0;fi<Et/4;fi++)kt.opacityVertexArray.emplaceBack(si)};for(let kt=0;kt<d.symbolInstances.length;kt++){const Et=d.symbolInstances.get(kt),{numHorizontalGlyphVertices:si,numVerticalGlyphVertices:fi,crossTileID:xi}=Et;let Nt=this.opacities[xi];I[xi]?Nt=W:Nt||(Nt=rt,this.opacities[xi]=Nt),I[xi]=!0;const Pi=Et.numIconVertices>0,Ei=this.placedOrientations[Et.crossTileID],Vi=Ei===r.WritingMode.vertical,Ni=Ei===r.WritingMode.horizontal||Ei===r.WritingMode.horizontalOnly;if(si>0||fi>0){const cn=oi(Nt.text);Pt(d.text,si,Vi?yt:cn),Pt(d.text,fi,Ni?yt:cn);const zi=Nt.text.isHidden();[Et.rightJustifiedTextSymbolIndex,Et.centerJustifiedTextSymbolIndex,Et.leftJustifiedTextSymbolIndex].forEach(qn=>{qn>=0&&(d.text.placedSymbolArray.get(qn).hidden=zi||Vi?1:0)}),Et.verticalPlacedTextSymbolIndex>=0&&(d.text.placedSymbolArray.get(Et.verticalPlacedTextSymbolIndex).hidden=zi||Ni?1:0);const Rn=this.variableOffsets[Et.crossTileID];Rn&&this.markUsedJustification(d,Rn.anchor,Et,Ei);const _n=this.placedOrientations[Et.crossTileID];_n&&(this.markUsedJustification(d,"left",Et,_n),this.markUsedOrientation(d,_n,Et))}if(Pi){const cn=oi(Nt.icon),zi=!(Qe&&Et.verticalPlacedIconSymbolIndex&&Vi);Et.placedIconSymbolIndex>=0&&(Pt(d.icon,Et.numIconVertices,zi?cn:yt),d.icon.placedSymbolArray.get(Et.placedIconSymbolIndex).hidden=Nt.icon.isHidden()),Et.verticalPlacedIconSymbolIndex>=0&&(Pt(d.icon,Et.numVerticalIconVertices,zi?yt:cn),d.icon.placedSymbolArray.get(Et.verticalPlacedIconSymbolIndex).hidden=Nt.icon.isHidden())}if(d.hasIconCollisionBoxData()||d.hasTextCollisionBoxData()){const cn=d.collisionArrays[kt];if(cn){let zi=new r.pointGeometry(0,0);if(cn.textBox||cn.verticalTextBox){let _n=!0;if(ye){const qn=this.variableOffsets[xi];qn?(zi=xo(qn.anchor,qn.width,qn.height,qn.textOffset,qn.textBoxScale),ke&&zi._rotate(ze?this.transform.angle:-this.transform.angle)):_n=!1}cn.textBox&&Ie(d.textCollisionBox.collisionVertexArray,Nt.text.placed,!_n||Vi,zi.x,zi.y),cn.verticalTextBox&&Ie(d.textCollisionBox.collisionVertexArray,Nt.text.placed,!_n||Ni,zi.x,zi.y)}const Rn=Boolean(!Ni&&cn.verticalIconBox);cn.iconBox&&Ie(d.iconCollisionBox.collisionVertexArray,Nt.icon.placed,Rn,Qe?zi.x:0,Qe?zi.y:0),cn.verticalIconBox&&Ie(d.iconCollisionBox.collisionVertexArray,Nt.icon.placed,!Rn,Qe?zi.x:0,Qe?zi.y:0)}}}if(d.sortFeatures(this.transform.angle),this.retainedQueryData[d.bucketInstanceId]&&(this.retainedQueryData[d.bucketInstanceId].featureSortOrder=d.featureSortOrder),d.hasTextData()&&d.text.opacityVertexBuffer&&d.text.opacityVertexBuffer.updateData(d.text.opacityVertexArray),d.hasIconData()&&d.icon.opacityVertexBuffer&&d.icon.opacityVertexBuffer.updateData(d.icon.opacityVertexArray),d.hasIconCollisionBoxData()&&d.iconCollisionBox.collisionVertexBuffer&&d.iconCollisionBox.collisionVertexBuffer.updateData(d.iconCollisionBox.collisionVertexArray),d.hasTextCollisionBoxData()&&d.textCollisionBox.collisionVertexBuffer&&d.textCollisionBox.collisionVertexBuffer.updateData(d.textCollisionBox.collisionVertexArray),d.text.opacityVertexArray.length!==d.text.layoutVertexArray.length/4)throw new Error(`bucket.text.opacityVertexArray.length (= ${d.text.opacityVertexArray.length}) !== bucket.text.layoutVertexArray.length (= ${d.text.layoutVertexArray.length}) / 4`);if(d.icon.opacityVertexArray.length!==d.icon.layoutVertexArray.length/4)throw new Error(`bucket.icon.opacityVertexArray.length (= ${d.icon.opacityVertexArray.length}) !== bucket.icon.layoutVertexArray.length (= ${d.icon.layoutVertexArray.length}) / 4`);if(d.bucketInstanceId in this.collisionCircleArrays){const kt=this.collisionCircleArrays[d.bucketInstanceId];d.placementInvProjMatrix=kt.invProjMatrix,d.placementViewportMatrix=kt.viewportMatrix,d.collisionCircleArray=kt.circles,delete this.collisionCircleArrays[d.bucketInstanceId]}}symbolFadeChange(d){return this.fadeDuration===0?1:(d-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(d){return Math.max(0,(this.transform.zoom-d)/1.5)}hasTransitions(d){return this.stale||d-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(d,I){const D=this.zoomAtLastRecencyCheck===I?1-this.zoomAdjustment(I):1;return this.zoomAtLastRecencyCheck=I,this.commitTime+this.fadeDuration*D>d}setStale(){this.stale=!0}}function Ie(B,d,I,D,z){B.emplaceBack(d?1:0,I?1:0,D||0,z||0),B.emplaceBack(d?1:0,I?1:0,D||0,z||0),B.emplaceBack(d?1:0,I?1:0,D||0,z||0),B.emplaceBack(d?1:0,I?1:0,D||0,z||0)}const qe=Math.pow(2,25),ct=Math.pow(2,24),dt=Math.pow(2,17),Bt=Math.pow(2,16),Ge=Math.pow(2,9),Yt=Math.pow(2,8),Ft=Math.pow(2,1);function oi(B){if(B.opacity===0&&!B.placed)return 0;if(B.opacity===1&&B.placed)return 4294967295;const d=B.placed?1:0,I=Math.floor(127*B.opacity);return I*qe+d*ct+I*dt+d*Bt+I*Ge+d*Yt+I*Ft+d}const yt=0;class Ri{constructor(d){this._sortAcrossTiles=d.layout.get("symbol-z-order")!=="viewport-y"&&!d.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(d,I,D,z,W){const ne=this._bucketParts;for(;this._currentTileIndex<d.length;)if(I.getBucketParts(ne,z,d[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,W())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,ne.sort((pe,ye)=>pe.sortKey-ye.sortKey));this._currentPartIndex<ne.length;)if(I.placeLayerBucketPart(ne[this._currentPartIndex],this._seenCrossTileIDs,D),this._currentPartIndex++,W())return!0;return!1}}class Ii{constructor(d,I,D,z,W,ne,pe,ye){this.placement=new Le(d,I,ne,pe,ye),this._currentPlacementIndex=D.length-1,this._forceFullPlacement=z,this._showCollisionBoxes=W,this._done=!1}isDone(){return this._done}continuePlacement(d,I,D){const z=r.exported.now(),W=()=>{const ne=r.exported.now()-z;return!this._forceFullPlacement&&ne>2};for(;this._currentPlacementIndex>=0;){const ne=I[d[this._currentPlacementIndex]],pe=this.placement.collisionIndex.transform.zoom;if(ne.type==="symbol"&&(!ne.minzoom||ne.minzoom<=pe)&&(!ne.maxzoom||ne.maxzoom>pe)){if(this._inProgressLayer||(this._inProgressLayer=new Ri(ne)),this._inProgressLayer.continuePlacement(D[ne.source],this.placement,this._showCollisionBoxes,ne,W))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(d){return this.placement.commit(d),this.placement}}const En=512/r.EXTENT/2;class Sn{constructor(d,I,D){this.tileID=d,this.indexedSymbolInstances={},this.bucketInstanceId=D;for(let z=0;z<I.length;z++){const W=I.get(z),ne=W.key;this.indexedSymbolInstances[ne]||(this.indexedSymbolInstances[ne]=[]),this.indexedSymbolInstances[ne].push({crossTileID:W.crossTileID,coord:this.getScaledCoordinates(W,d)})}}getScaledCoordinates(d,I){const D=En/Math.pow(2,I.canonical.z-this.tileID.canonical.z);return{x:Math.floor((I.canonical.x*r.EXTENT+d.anchorX)*D),y:Math.floor((I.canonical.y*r.EXTENT+d.anchorY)*D)}}findMatches(d,I,D){const z=this.tileID.canonical.z<I.canonical.z?1:Math.pow(2,this.tileID.canonical.z-I.canonical.z);for(let W=0;W<d.length;W++){const ne=d.get(W);if(ne.crossTileID)continue;const pe=this.indexedSymbolInstances[ne.key];if(!pe)continue;const ye=this.getScaledCoordinates(ne,I);for(const ke of pe)if(Math.abs(ke.coord.x-ye.x)<=z&&Math.abs(ke.coord.y-ye.y)<=z&&!D[ke.crossTileID]){D[ke.crossTileID]=!0,ne.crossTileID=ke.crossTileID;break}}}}class xt{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class Tn{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(d){const I=Math.round((d-this.lng)/360);if(I!==0)for(const D in this.indexes){const z=this.indexes[D],W={};for(const ne in z){const pe=z[ne];pe.tileID=pe.tileID.unwrapTo(pe.tileID.wrap+I),W[pe.tileID.key]=pe}this.indexes[D]=W}this.lng=d}addBucket(d,I,D){if(this.indexes[d.overscaledZ]&&this.indexes[d.overscaledZ][d.key]){if(this.indexes[d.overscaledZ][d.key].bucketInstanceId===I.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(d.overscaledZ,this.indexes[d.overscaledZ][d.key])}for(let W=0;W<I.symbolInstances.length;W++)I.symbolInstances.get(W).crossTileID=0;this.usedCrossTileIDs[d.overscaledZ]||(this.usedCrossTileIDs[d.overscaledZ]={});const z=this.usedCrossTileIDs[d.overscaledZ];for(const W in this.indexes){const ne=this.indexes[W];if(Number(W)>d.overscaledZ)for(const pe in ne){const ye=ne[pe];ye.tileID.isChildOf(d)&&ye.findMatches(I.symbolInstances,d,z)}else{const pe=ne[d.scaledTo(Number(W)).key];pe&&pe.findMatches(I.symbolInstances,d,z)}}for(let W=0;W<I.symbolInstances.length;W++){const ne=I.symbolInstances.get(W);ne.crossTileID||(ne.crossTileID=D.generate(),z[ne.crossTileID]=!0)}return this.indexes[d.overscaledZ]===void 0&&(this.indexes[d.overscaledZ]={}),this.indexes[d.overscaledZ][d.key]=new Sn(d,I.symbolInstances,I.bucketInstanceId),!0}removeBucketCrossTileIDs(d,I){for(const D in I.indexedSymbolInstances)for(const z of I.indexedSymbolInstances[D])delete this.usedCrossTileIDs[d][z.crossTileID]}removeStaleBuckets(d){let I=!1;for(const D in this.indexes){const z=this.indexes[D];for(const W in z)d[z[W].bucketInstanceId]||(this.removeBucketCrossTileIDs(D,z[W]),delete z[W],I=!0)}return I}}class Qn{constructor(){this.layerIndexes={},this.crossTileIDs=new xt,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(d,I,D){let z=this.layerIndexes[d.id];z===void 0&&(z=this.layerIndexes[d.id]=new Tn);let W=!1;const ne={};z.handleWrapJump(D);for(const pe of I){const ye=pe.getBucket(d);ye&&d.id===ye.layerIds[0]&&(ye.bucketInstanceId||(ye.bucketInstanceId=++this.maxBucketInstanceId),z.addBucket(pe.tileID,ye,this.crossTileIDs)&&(W=!0),ne[ye.bucketInstanceId]=!0)}return z.removeStaleBuckets(ne)&&(W=!0),W}pruneUnusedLayers(d){const I={};d.forEach(D=>{I[D]=!0});for(const D in this.layerIndexes)I[D]||delete this.layerIndexes[D]}}var Lr=r.createLayout([{name:"a_pos",type:"Int16",components:2}]);class dr extends r.Evented{constructor(d){super(),this.sourceCache=d,this._tiles={},this._renderableTilesKeys=[],this._sourceTileCache={},this.renderHistory=[],this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.deltaZoom=1,this.renderHistorySize=d._cache.max,d.usedForTerrain=!0,d.tileSize=this.tileSize*2**this.deltaZoom}destruct(){this.sourceCache.usedForTerrain=!1,this.sourceCache.tileSize=null;for(const d in this._tiles){const I=this._tiles[d];I.textures.forEach(D=>D.destroy()),I.textures=[]}}update(d,I){this.sourceCache.update(d,I),this._renderableTilesKeys=[];for(const D of d.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,reparseOverscaled:!1,terrain:I}))this._renderableTilesKeys.push(D.key),this._tiles[D.key]||(D.posMatrix=new Float64Array(16),r.ortho(D.posMatrix,0,r.EXTENT,0,r.EXTENT,0,1),this._tiles[D.key]=new Be(D,this.tileSize))}removeOutdated(d){const I={};this.renderHistory=this.renderHistory.filter((D,z)=>this.renderHistory.indexOf(D)===z).slice(0,this.renderHistorySize);for(const D of this._renderableTilesKeys)I[D]=!0;for(const D of this.renderHistory)I[D]=!0;for(const D in this._tiles)I[D]||(this._tiles[D].clearTextures(d),delete this._tiles[D])}getRenderableTiles(){return this._renderableTilesKeys.map(d=>this.getTileByID(d))}getTileByID(d){return this._tiles[d]}getTerrainCoords(d){const I={};for(const D of this._renderableTilesKeys){const z=this._tiles[D].tileID;if(z.canonical.equals(d.canonical)){const W=d.clone();W.posMatrix=new Float64Array(16),r.ortho(W.posMatrix,0,r.EXTENT,0,r.EXTENT,0,1),I[D]=W}else if(z.canonical.isChildOf(d.canonical)){const W=d.clone();W.posMatrix=new Float64Array(16);const ne=z.canonical.z-d.canonical.z,pe=z.canonical.x-(z.canonical.x>>ne<<ne),ye=z.canonical.y-(z.canonical.y>>ne<<ne),ke=r.EXTENT>>ne;r.ortho(W.posMatrix,0,ke,0,ke,0,1),r.translate(W.posMatrix,W.posMatrix,[-pe*ke,-ye*ke,0]),I[D]=W}else if(d.canonical.isChildOf(z.canonical)){const W=d.clone();W.posMatrix=new Float64Array(16);const ne=d.canonical.z-z.canonical.z,pe=d.canonical.x-(d.canonical.x>>ne<<ne),ye=d.canonical.y-(d.canonical.y>>ne<<ne),ke=r.EXTENT>>ne;r.ortho(W.posMatrix,0,r.EXTENT,0,r.EXTENT,0,1),r.translate(W.posMatrix,W.posMatrix,[pe*ke,ye*ke,0]),r.scale(W.posMatrix,W.posMatrix,[1/2**ne,1/2**ne,0]),I[D]=W}}return I}getSourceTile(d,I){const D=this.sourceCache._source;let z=d.overscaledZ-this.deltaZoom;if(z>D.maxzoom&&(z=D.maxzoom),z<D.minzoom)return null;this._sourceTileCache[d.key]||(this._sourceTileCache[d.key]=d.scaledTo(z).key);let W=this.sourceCache.getTileByID(this._sourceTileCache[d.key]);if((!W||!W.dem)&&I)for(;z>=D.minzoom&&(!W||!W.dem);)W=this.sourceCache.getTileByID(d.scaledTo(z--).key);return W}tilesAfterTime(d=Date.now()){return Object.values(this._tiles).filter(I=>I.timeLoaded>=d)}}class Cr{constructor(d,I,D){this.style=d,this.sourceCache=new dr(I),this.options=D,this.exaggeration=typeof D.exaggeration=="number"?D.exaggeration:1,this.elevationOffset=typeof D.elevationOffset=="number"?D.elevationOffset:450,this.qualityFactor=2,this.meshSize=128,this._demMatrixCache={},this.coordsIndex=[],this._coordsTextureSize=1024,this.clearRerenderCache()}getDEMElevation(d,I,D,z=r.EXTENT){if(!(I>=0&&I<z&&D>=0&&D<z))return this.elevationOffset;let W=0;const ne=this.getTerrainData(d);if(ne.tile&&ne.tile.dem){const pe=r.transformMat4$1([],[I/z*r.EXTENT,D/z*r.EXTENT],ne.u_terrain_matrix),ye=[pe[0]*ne.tile.dem.dim,pe[1]*ne.tile.dem.dim],ke=[Math.floor(ye[0]),Math.floor(ye[1])],ze=ne.tile.dem.get(ke[0],ke[1]),Qe=ne.tile.dem.get(ke[0],ke[1]+1),rt=ne.tile.dem.get(ke[0]+1,ke[1]),Pt=ne.tile.dem.get(ke[0]+1,ke[1]+1);W=r.number(r.number(ze,Qe,ye[0]-ke[0]),r.number(rt,Pt,ye[0]-ke[0]),ye[1]-ke[1])}return W}rememberForRerender(d,I){for(const D in this.sourceCache._tiles){const z=this.sourceCache._tiles[D];(z.tileID.equals(I)||z.tileID.isChildOf(I))&&(d===this.sourceCache.sourceCache.id&&(z.timeLoaded=Date.now()),this._rerender[d]=this._rerender[d]||{},this._rerender[d][z.tileID.key]=!0)}}needsRerender(d,I){return this._rerender[d]&&this._rerender[d][I.key]}clearRerenderCache(){this._rerender={}}getElevation(d,I,D,z=r.EXTENT){return(this.getDEMElevation(d,I,D,z)+this.elevationOffset)*this.exaggeration}getTerrainData(d){if(!this._emptyDemTexture){const z=this.style.map.painter.context,W=new r.RGBAImage({width:1,height:1},new Uint8Array(4));this._emptyDepthTexture=new T(z,W,z.gl.RGBA,{premultiply:!1}),this._emptyDemUnpack=[0,0,0,0],this._emptyDemTexture=new T(z,new r.RGBAImage({width:1,height:1}),z.gl.RGBA,{premultiply:!1}),this._emptyDemTexture.bind(z.gl.NEAREST,z.gl.CLAMP_TO_EDGE),this._emptyDemMatrix=r.identity([])}const I=this.sourceCache.getSourceTile(d,!0);if(I&&I.dem&&(!I.demTexture||I.needsTerrainPrepare)){const z=this.style.map.painter.context;I.demTexture=this.style.map.painter.getTileTexture(I.dem.stride),I.demTexture?I.demTexture.update(I.dem.getPixels(),{premultiply:!1}):I.demTexture=new T(z,I.dem.getPixels(),z.gl.RGBA,{premultiply:!1}),I.demTexture.bind(z.gl.NEAREST,z.gl.CLAMP_TO_EDGE),I.needsTerrainPrepare=!1}const D=I&&I+I.tileID.key+d.key;if(D&&!this._demMatrixCache[D]){const z=this.sourceCache.sourceCache._source.maxzoom;let W=d.canonical.z-I.tileID.canonical.z;d.overscaledZ>d.canonical.z&&(d.canonical.z>=z?W=d.canonical.z-z:r.warnOnce("cannot calculate elevation if elevation maxzoom > source.maxzoom"));const ne=d.canonical.x-(d.canonical.x>>W<<W),pe=d.canonical.y-(d.canonical.y>>W<<W),ye=r.fromScaling(new Float64Array(16),[1/(r.EXTENT<<W),1/(r.EXTENT<<W),0]);r.translate(ye,ye,[ne*r.EXTENT,pe*r.EXTENT,0]),this._demMatrixCache[d.key]={matrix:ye,coord:d}}return{u_depth:2,u_terrain:3,u_terrain_dim:I&&I.dem&&I.dem.dim||1,u_terrain_matrix:D?this._demMatrixCache[d.key].matrix:this._emptyDemMatrix,u_terrain_unpack:I&&I.dem&&I.dem.getUnpackVector()||this._emptyDemUnpack,u_terrain_offset:this.elevationOffset,u_terrain_exaggeration:this.exaggeration,texture:(I&&I.demTexture||this._emptyDemTexture).texture,depthTexture:(this._fboDepthTexture||this._emptyDepthTexture).texture,tile:I}}getRTTFramebuffer(){const d=this.style.map.painter;if(!this._rttFramebuffer){const I=this.sourceCache.tileSize*this.qualityFactor;this._rttFramebuffer=d.context.createFramebuffer(I,I,!0),this._rttFramebuffer.depthAttachment.set(d.context.createRenderbuffer(d.context.gl.DEPTH_COMPONENT16,I,I))}return this._rttFramebuffer}getFramebuffer(d){const I=this.style.map.painter,D=I.width/devicePixelRatio,z=I.height/devicePixelRatio;return!this._fbo||this._fbo.width===D&&this._fbo.height===z||(this._fbo.destroy(),this._fboCoordsTexture.destroy(),this._fboDepthTexture.destroy(),delete this._fbo,delete this._fboDepthTexture,delete this._fboCoordsTexture),this._fboCoordsTexture||(this._fboCoordsTexture=new T(I.context,{width:D,height:z,data:null},I.context.gl.RGBA,{premultiply:!1}),this._fboCoordsTexture.bind(I.context.gl.NEAREST,I.context.gl.CLAMP_TO_EDGE)),this._fboDepthTexture||(this._fboDepthTexture=new T(I.context,{width:D,height:z,data:null},I.context.gl.RGBA,{premultiply:!1}),this._fboDepthTexture.bind(I.context.gl.NEAREST,I.context.gl.CLAMP_TO_EDGE)),this._fbo||(this._fbo=I.context.createFramebuffer(D,z,!0),this._fbo.depthAttachment.set(I.context.createRenderbuffer(I.context.gl.DEPTH_COMPONENT16,D,z))),this._fbo.colorAttachment.set(d==="coords"?this._fboCoordsTexture.texture:this._fboDepthTexture.texture),this._fbo}getCoordsTexture(){const d=this.style.map.painter.context;if(this._coordsTexture)return this._coordsTexture;const I=new Uint8Array(this._coordsTextureSize*this._coordsTextureSize*4);for(let W=0,ne=0;W<this._coordsTextureSize;W++)for(let pe=0;pe<this._coordsTextureSize;pe++,ne+=4)I[ne+0]=255&pe,I[ne+1]=255&W,I[ne+2]=pe>>8<<4|W>>8,I[ne+3]=0;const D=new r.RGBAImage({width:this._coordsTextureSize,height:this._coordsTextureSize},new Uint8Array(I.buffer)),z=new T(d,D,d.gl.RGBA,{premultiply:!1});return z.bind(d.gl.NEAREST,d.gl.CLAMP_TO_EDGE),this._coordsTexture=z,z}pointCoordinate(d){const I=new Uint8Array(4),D=this.style.map.painter,z=D.context,W=z.gl;z.bindFramebuffer.set(this.getFramebuffer("coords").framebuffer),W.readPixels(d.x,D.height/devicePixelRatio-d.y-1,1,1,W.RGBA,W.UNSIGNED_BYTE,I),z.bindFramebuffer.set(null);const ne=I[0]+(I[2]>>4<<8),pe=I[1]+((15&I[2])<<8),ye=this.coordsIndex[255-I[3]],ke=ye&&this.sourceCache.getTileByID(ye);if(!ke)return null;const ze=this._coordsTextureSize,Qe=(1<<ke.tileID.canonical.z)*ze;return new r.MercatorCoordinate((ke.tileID.canonical.x*ze+ne)/Qe,(ke.tileID.canonical.y*ze+pe)/Qe,this.getElevation(ke.tileID,ne,pe,ze))}getTerrainMesh(){if(this._mesh)return this._mesh;const d=this.style.map.painter.context,I=new r.PosArray,D=new r.TriangleIndexArray,z=this.meshSize,W=r.EXTENT/z,ne=z*z;for(let pe=0;pe<=z;pe++)for(let ye=0;ye<=z;ye++)I.emplaceBack(ye*W,pe*W);for(let pe=0;pe<ne;pe+=z+1)for(let ye=0;ye<z;ye++)D.emplaceBack(ye+pe,z+ye+pe+1,z+ye+pe+2),D.emplaceBack(ye+pe,z+ye+pe+2,ye+pe+1);return this._mesh={indexBuffer:d.createIndexBuffer(D),vertexBuffer:d.createVertexBuffer(I,Lr.members),segments:r.SegmentVector.simpleSegment(0,0,I.length,D.length)},this._mesh}getMinMaxElevation(d){const I=this.getTerrainData(d).tile,D={minElevation:null,maxElevation:null};return I&&I.dem&&(D.minElevation=(I.dem.min+this.elevationOffset)*this.exaggeration,D.maxElevation=(I.dem.max+this.elevationOffset)*this.exaggeration),D}}const Pr=(B,d)=>r.emitValidationErrors(B,d&&d.filter(I=>I.identifier!=="source.canvas")),to=r.pick(Qt,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData"]),Jr=r.pick(Qt,["setCenter","setZoom","setBearing","setPitch"]),vo=function(){const B={},d=r.spec.$version;for(const I in r.spec.$root){const D=r.spec.$root[I];if(D.required){let z=null;z=I==="version"?d:D.type==="array"?[]:{},z!=null&&(B[I]=z)}}return B}();class $o extends r.Evented{constructor(d,I={}){super(),this.map=d,this.dispatcher=new Pe(Je(),this),this.imageManager=new M,this.imageManager.setEventedParent(this),this.glyphManager=new Z(d._requestManager,I.localIdeographFontFamily),this.lineAtlas=new Ee(256,512),this.crossTileSymbolIndex=new Qn,this._layers={},this._serializedLayers={},this._order=[],this.sourceCaches={},this.zoomHistory=new r.ZoomHistory,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("setReferrer",r.getReferrer());const D=this;this._rtlTextPluginCallback=$o.registerForPluginStateChange(z=>{D.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:z.pluginStatus,pluginURL:z.pluginURL},(W,ne)=>{if(r.triggerPluginCompletionEvent(W),ne&&ne.every(pe=>pe))for(const pe in D.sourceCaches)D.sourceCaches[pe].reload()})}),this.on("data",z=>{if(z.dataType!=="source"||z.sourceDataType!=="metadata")return;const W=this.sourceCaches[z.sourceId];if(!W)return;const ne=W.getSource();if(ne&&ne.vectorLayerIds)for(const pe in this._layers){const ye=this._layers[pe];ye.source===ne.id&&this._validateLayer(ye)}})}loadURL(d,I={}){this.fire(new r.Event("dataloading",{dataType:"style"}));const D=typeof I.validate!="boolean"||I.validate,z=this.map._requestManager.transformRequest(d,r.ResourceType.Style);this._request=r.getJSON(z,(W,ne)=>{this._request=null,W?this.fire(new r.ErrorEvent(W)):ne&&this._load(ne,D)})}loadJSON(d,I={}){this.fire(new r.Event("dataloading",{dataType:"style"})),this._request=r.exported.frame(()=>{this._request=null,this._load(d,I.validate!==!1)})}loadEmpty(){this.fire(new r.Event("dataloading",{dataType:"style"})),this._load(vo,!1)}_load(d,I){if(I&&Pr(this,r.validateStyle(d)))return;this._loaded=!0,this.stylesheet=d;for(const z in d.sources)this.addSource(z,d.sources[z],{validate:!1});d.sprite?this._loadSprite(d.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(d.glyphs);const D=li(this.stylesheet.layers);this._order=D.map(z=>z.id),this._layers={},this._serializedLayers={};for(let z of D)z=r.createStyleLayer(z),z.setEventedParent(this,{layer:{id:z.id}}),this._layers[z.id]=z,this._serializedLayers[z.id]=z.serialize();this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new ie(this.stylesheet.light),this.setTerrain(this.stylesheet.terrain),this.fire(new r.Event("data",{dataType:"style"})),this.fire(new r.Event("style.load"))}_loadSprite(d){this._spriteRequest=function(I,D,z,W){let ne,pe,ye;const ke=z>1?"@2x":"";let ze=r.getJSON(D.transformRequest(D.normalizeSpriteURL(I,ke,".json"),r.ResourceType.SpriteJSON),(Pt,kt)=>{ze=null,ye||(ye=Pt,ne=kt,rt())}),Qe=r.getImage(D.transformRequest(D.normalizeSpriteURL(I,ke,".png"),r.ResourceType.SpriteImage),(Pt,kt)=>{Qe=null,ye||(ye=Pt,pe=kt,rt())});function rt(){if(ye)W(ye);else if(ne&&pe){const Pt=r.exported.getImageData(pe),kt={};for(const Et in ne){const{width:si,height:fi,x:xi,y:Nt,sdf:Pi,pixelRatio:Ei,stretchX:Vi,stretchY:Ni,content:cn}=ne[Et],zi=new r.RGBAImage({width:si,height:fi});r.RGBAImage.copy(Pt,zi,{x:xi,y:Nt},{x:0,y:0},{width:si,height:fi}),kt[Et]={data:zi,pixelRatio:Ei,sdf:Pi,stretchX:Vi,stretchY:Ni,content:cn}}W(null,kt)}}return{cancel(){ze&&(ze.cancel(),ze=null),Qe&&(Qe.cancel(),Qe=null)}}}(d,this.map._requestManager,this.map.getPixelRatio(),(I,D)=>{if(this._spriteRequest=null,I)this.fire(new r.ErrorEvent(I));else if(D)for(const z in D)this.imageManager.addImage(z,D[z]);this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new r.Event("data",{dataType:"style"}))})}_validateLayer(d){const I=this.sourceCaches[d.source];if(!I)return;const D=d.sourceLayer;if(!D)return;const z=I.getSource();(z.type==="geojson"||z.vectorLayerIds&&z.vectorLayerIds.indexOf(D)===-1)&&this.fire(new r.ErrorEvent(new Error(`Source layer "${D}" does not exist on source "${z.id}" as specified by style layer "${d.id}".`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const d in this.sourceCaches)if(!this.sourceCaches[d].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeLayers(d){const I=[];for(const D of d){const z=this._layers[D];z.type!=="custom"&&I.push(z.serialize())}return I}hasTransitions(){if(this.light&&this.light.hasTransition())return!0;for(const d in this.sourceCaches)if(this.sourceCaches[d].hasTransition())return!0;for(const d in this._layers)if(this._layers[d].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(d){if(!this._loaded)return;const I=this._changed;if(this._changed){const z=Object.keys(this._updatedLayers),W=Object.keys(this._removedLayers);(z.length||W.length)&&this._updateWorkerLayers(z,W);for(const ne in this._updatedSources){const pe=this._updatedSources[ne];if(pe==="reload")this._reloadSource(ne);else{if(pe!=="clear")throw new Error(`Invalid action ${pe}`);this._clearSource(ne)}}this._updateTilesForChangedImages();for(const ne in this._updatedPaintProps)this._layers[ne].updateTransitions(d);this.light.updateTransitions(d),this._resetUpdates()}const D={};for(const z in this.sourceCaches){const W=this.sourceCaches[z];D[z]=W.used,W.used=!1}for(const z of this._order){const W=this._layers[z];W.recalculate(d,this._availableImages),!W.isHidden(d.zoom)&&W.source&&(this.sourceCaches[W.source].used=!0)}for(const z in D){const W=this.sourceCaches[z];D[z]!==W.used&&W.fire(new r.Event("data",{sourceDataType:"visibility",dataType:"source",sourceId:z}))}this.light.recalculate(d),this.z=d.zoom,I&&this.fire(new r.Event("data",{dataType:"style"}))}_updateTilesForChangedImages(){const d=Object.keys(this._changedImages);if(d.length){for(const I in this.sourceCaches)this.sourceCaches[I].reloadTilesForDependencies(["icons","patterns"],d);this._changedImages={}}}_updateWorkerLayers(d,I){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(d),removedIds:I})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}}setTerrain(d){if(this._checkLoaded(),this._terrainDataCallback&&this.off("data",this._terrainDataCallback),this._terrainfreezeElevationCallback&&this.map.off("freezeElevation",this._terrainfreezeElevationCallback),d){const I=this.sourceCaches[d.source];if(!I)throw new Error(`cannot load terrain, because there exists no source with ID: ${d.source}`);this.terrain=new Cr(this,I,d),this.map.transform.updateElevation(this.terrain),this._terrainfreezeElevationCallback=D=>{D.freeze?this.map.transform.freezeElevation=!0:(this.map.transform.freezeElevation=!1,this.map.transform.recalculateZoom(this.terrain))},this._terrainDataCallback=D=>{D.tile&&(D.sourceId===d.source?(this.map.transform.updateElevation(this.terrain),this.terrain.rememberForRerender(D.sourceId,D.tile.tileID)):D.source.type==="geojson"&&this.terrain.rememberForRerender(D.sourceId,D.tile.tileID))},this.on("data",this._terrainDataCallback),this.map.on("freezeElevation",this._terrainfreezeElevationCallback)}else this.terrain&&this.terrain.sourceCache.destruct(),this.terrain=null,this.map.transform.updateElevation(this.terrain);this.map.fire(new r.Event("terrain",{terrain:d}))}setState(d){if(this._checkLoaded(),Pr(this,r.validateStyle(d)))return!1;(d=r.clone$1(d)).layers=li(d.layers);const I=function(z,W){if(!z)return[{command:Qt.setStyle,args:[W]}];let ne=[];try{if(!v(z.version,W.version))return[{command:Qt.setStyle,args:[W]}];v(z.center,W.center)||ne.push({command:Qt.setCenter,args:[W.center]}),v(z.zoom,W.zoom)||ne.push({command:Qt.setZoom,args:[W.zoom]}),v(z.bearing,W.bearing)||ne.push({command:Qt.setBearing,args:[W.bearing]}),v(z.pitch,W.pitch)||ne.push({command:Qt.setPitch,args:[W.pitch]}),v(z.sprite,W.sprite)||ne.push({command:Qt.setSprite,args:[W.sprite]}),v(z.glyphs,W.glyphs)||ne.push({command:Qt.setGlyphs,args:[W.glyphs]}),v(z.transition,W.transition)||ne.push({command:Qt.setTransition,args:[W.transition]}),v(z.light,W.light)||ne.push({command:Qt.setLight,args:[W.light]});const pe={},ye=[];(function(ze,Qe,rt,Pt){let kt;for(kt in Qe=Qe||{},ze=ze||{})Object.prototype.hasOwnProperty.call(ze,kt)&&(Object.prototype.hasOwnProperty.call(Qe,kt)||Ti(kt,rt,Pt));for(kt in Qe)Object.prototype.hasOwnProperty.call(Qe,kt)&&(Object.prototype.hasOwnProperty.call(ze,kt)?v(ze[kt],Qe[kt])||(ze[kt].type==="geojson"&&Qe[kt].type==="geojson"&&mi(ze,Qe,kt)?rt.push({command:Qt.setGeoJSONSourceData,args:[kt,Qe[kt].data]}):Xt(kt,Qe,rt,Pt)):Si(kt,Qe,rt))})(z.sources,W.sources,ye,pe);const ke=[];z.layers&&z.layers.forEach(ze=>{pe[ze.source]?ne.push({command:Qt.removeLayer,args:[ze.id]}):ke.push(ze)}),ne=ne.concat(ye),function(ze,Qe,rt){Qe=Qe||[];const Pt=(ze=ze||[]).map(Ci),kt=Qe.map(Ci),Et=ze.reduce(ti,{}),si=Qe.reduce(ti,{}),fi=Pt.slice(),xi=Object.create(null);let Nt,Pi,Ei,Vi,Ni,cn,zi;for(Nt=0,Pi=0;Nt<Pt.length;Nt++)Ei=Pt[Nt],Object.prototype.hasOwnProperty.call(si,Ei)?Pi++:(rt.push({command:Qt.removeLayer,args:[Ei]}),fi.splice(fi.indexOf(Ei,Pi),1));for(Nt=0,Pi=0;Nt<kt.length;Nt++)Ei=kt[kt.length-1-Nt],fi[fi.length-1-Nt]!==Ei&&(Object.prototype.hasOwnProperty.call(Et,Ei)?(rt.push({command:Qt.removeLayer,args:[Ei]}),fi.splice(fi.lastIndexOf(Ei,fi.length-Pi),1)):Pi++,cn=fi[fi.length-Nt],rt.push({command:Qt.addLayer,args:[si[Ei],cn]}),fi.splice(fi.length-Nt,0,Ei),xi[Ei]=!0);for(Nt=0;Nt<kt.length;Nt++)if(Ei=kt[Nt],Vi=Et[Ei],Ni=si[Ei],!xi[Ei]&&!v(Vi,Ni))if(v(Vi.source,Ni.source)&&v(Vi["source-layer"],Ni["source-layer"])&&v(Vi.type,Ni.type)){for(zi in Zi(Vi.layout,Ni.layout,rt,Ei,null,Qt.setLayoutProperty),Zi(Vi.paint,Ni.paint,rt,Ei,null,Qt.setPaintProperty),v(Vi.filter,Ni.filter)||rt.push({command:Qt.setFilter,args:[Ei,Ni.filter]}),v(Vi.minzoom,Ni.minzoom)&&v(Vi.maxzoom,Ni.maxzoom)||rt.push({command:Qt.setLayerZoomRange,args:[Ei,Ni.minzoom,Ni.maxzoom]}),Vi)Object.prototype.hasOwnProperty.call(Vi,zi)&&zi!=="layout"&&zi!=="paint"&&zi!=="filter"&&zi!=="metadata"&&zi!=="minzoom"&&zi!=="maxzoom"&&(zi.indexOf("paint.")===0?Zi(Vi[zi],Ni[zi],rt,Ei,zi.slice(6),Qt.setPaintProperty):v(Vi[zi],Ni[zi])||rt.push({command:Qt.setLayerProperty,args:[Ei,zi,Ni[zi]]}));for(zi in Ni)Object.prototype.hasOwnProperty.call(Ni,zi)&&!Object.prototype.hasOwnProperty.call(Vi,zi)&&zi!=="layout"&&zi!=="paint"&&zi!=="filter"&&zi!=="metadata"&&zi!=="minzoom"&&zi!=="maxzoom"&&(zi.indexOf("paint.")===0?Zi(Vi[zi],Ni[zi],rt,Ei,zi.slice(6),Qt.setPaintProperty):v(Vi[zi],Ni[zi])||rt.push({command:Qt.setLayerProperty,args:[Ei,zi,Ni[zi]]}))}else rt.push({command:Qt.removeLayer,args:[Ei]}),cn=fi[fi.lastIndexOf(Ei)+1],rt.push({command:Qt.addLayer,args:[Ni,cn]})}(ke,W.layers,ne)}catch(pe){console.warn("Unable to compute style diff:",pe),ne=[{command:Qt.setStyle,args:[W]}]}return ne}(this.serialize(),d).filter(z=>!(z.command in Jr));if(I.length===0)return!1;const D=I.filter(z=>!(z.command in to));if(D.length>0)throw new Error(`Unimplemented: ${D.map(z=>z.command).join(", ")}.`);return I.forEach(z=>{z.command!=="setTransition"&&this[z.command].apply(this,z.args)}),this.stylesheet=d,!0}addImage(d,I){if(this.getImage(d))return this.fire(new r.ErrorEvent(new Error(`An image named "${d}" already exists.`)));this.imageManager.addImage(d,I),this._afterImageUpdated(d)}updateImage(d,I){this.imageManager.updateImage(d,I)}getImage(d){return this.imageManager.getImage(d)}removeImage(d){if(!this.getImage(d))return this.fire(new r.ErrorEvent(new Error(`An image named "${d}" does not exist.`)));this.imageManager.removeImage(d),this._afterImageUpdated(d)}_afterImageUpdated(d){this._availableImages=this.imageManager.listImages(),this._changedImages[d]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new r.Event("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(d,I,D={}){if(this._checkLoaded(),this.sourceCaches[d]!==void 0)throw new Error(`Source "${d}" already exists.`);if(!I.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(I).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(I.type)>=0&&this._validate(r.validateStyle.source,`sources.${d}`,I,null,D))return;this.map&&this.map._collectResourceTiming&&(I.collectResourceTiming=!0);const z=this.sourceCaches[d]=new Ye(d,I,this.dispatcher);z.style=this,z.setEventedParent(this,()=>({isSourceLoaded:this.loaded(),source:z.serialize(),sourceId:d})),z.onAdd(this.map),this._changed=!0}removeSource(d){if(this._checkLoaded(),this.sourceCaches[d]===void 0)throw new Error("There is no source with this ID");for(const D in this._layers)if(this._layers[D].source===d)return this.fire(new r.ErrorEvent(new Error(`Source "${d}" cannot be removed while layer "${D}" is using it.`)));const I=this.sourceCaches[d];delete this.sourceCaches[d],delete this._updatedSources[d],I.fire(new r.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:d})),I.setEventedParent(null),I.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(d,I){if(this._checkLoaded(),this.sourceCaches[d]===void 0)throw new Error(`There is no source with this ID=${d}`);const D=this.sourceCaches[d].getSource();if(D.type!=="geojson")throw new Error(`geojsonSource.type is ${D.type}, which is !== 'geojson`);D.setData(I),this._changed=!0}getSource(d){return this.sourceCaches[d]&&this.sourceCaches[d].getSource()}addLayer(d,I,D={}){this._checkLoaded();const z=d.id;if(this.getLayer(z))return void this.fire(new r.ErrorEvent(new Error(`Layer "${z}" already exists on this map.`)));let W;if(d.type==="custom"){if(Pr(this,r.validateCustomStyleLayer(d)))return;W=r.createStyleLayer(d)}else{if(typeof d.source=="object"&&(this.addSource(z,d.source),d=r.clone$1(d),d=r.extend(d,{source:z})),this._validate(r.validateStyle.layer,`layers.${z}`,d,{arrayIndex:-1},D))return;W=r.createStyleLayer(d),this._validateLayer(W),W.setEventedParent(this,{layer:{id:z}}),this._serializedLayers[W.id]=W.serialize()}const ne=I?this._order.indexOf(I):this._order.length;if(I&&ne===-1)this.fire(new r.ErrorEvent(new Error(`Cannot add layer "${z}" before non-existing layer "${I}".`)));else{if(this._order.splice(ne,0,z),this._layerOrderChanged=!0,this._layers[z]=W,this._removedLayers[z]&&W.source&&W.type!=="custom"){const pe=this._removedLayers[z];delete this._removedLayers[z],pe.type!==W.type?this._updatedSources[W.source]="clear":(this._updatedSources[W.source]="reload",this.sourceCaches[W.source].pause())}this._updateLayer(W),W.onAdd&&W.onAdd(this.map)}}moveLayer(d,I){if(this._checkLoaded(),this._changed=!0,!this._layers[d])return void this.fire(new r.ErrorEvent(new Error(`The layer '${d}' does not exist in the map's style and cannot be moved.`)));if(d===I)return;const D=this._order.indexOf(d);this._order.splice(D,1);const z=I?this._order.indexOf(I):this._order.length;I&&z===-1?this.fire(new r.ErrorEvent(new Error(`Cannot move layer "${d}" before non-existing layer "${I}".`))):(this._order.splice(z,0,d),this._layerOrderChanged=!0)}removeLayer(d){this._checkLoaded();const I=this._layers[d];if(!I)return void this.fire(new r.ErrorEvent(new Error(`Cannot remove non-existing layer "${d}".`)));I.setEventedParent(null);const D=this._order.indexOf(d);this._order.splice(D,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[d]=I,delete this._layers[d],delete this._serializedLayers[d],delete this._updatedLayers[d],delete this._updatedPaintProps[d],I.onRemove&&I.onRemove(this.map)}getLayer(d){return this._layers[d]}hasLayer(d){return d in this._layers}setLayerZoomRange(d,I,D){this._checkLoaded();const z=this.getLayer(d);z?z.minzoom===I&&z.maxzoom===D||(I!=null&&(z.minzoom=I),D!=null&&(z.maxzoom=D),this._updateLayer(z)):this.fire(new r.ErrorEvent(new Error(`Cannot set the zoom range of non-existing layer "${d}".`)))}setFilter(d,I,D={}){this._checkLoaded();const z=this.getLayer(d);if(z){if(!v(z.filter,I))return I==null?(z.filter=void 0,void this._updateLayer(z)):void(this._validate(r.validateStyle.filter,`layers.${z.id}.filter`,I,null,D)||(z.filter=r.clone$1(I),this._updateLayer(z)))}else this.fire(new r.ErrorEvent(new Error(`Cannot filter non-existing layer "${d}".`)))}getFilter(d){return r.clone$1(this.getLayer(d).filter)}setLayoutProperty(d,I,D,z={}){this._checkLoaded();const W=this.getLayer(d);W?v(W.getLayoutProperty(I),D)||(W.setLayoutProperty(I,D,z),this._updateLayer(W)):this.fire(new r.ErrorEvent(new Error(`Cannot style non-existing layer "${d}".`)))}getLayoutProperty(d,I){const D=this.getLayer(d);if(D)return D.getLayoutProperty(I);this.fire(new r.ErrorEvent(new Error(`Cannot get style of non-existing layer "${d}".`)))}setPaintProperty(d,I,D,z={}){this._checkLoaded();const W=this.getLayer(d);W?v(W.getPaintProperty(I),D)||(W.setPaintProperty(I,D,z)&&this._updateLayer(W),this._changed=!0,this._updatedPaintProps[d]=!0):this.fire(new r.ErrorEvent(new Error(`Cannot style non-existing layer "${d}".`)))}getPaintProperty(d,I){return this.getLayer(d).getPaintProperty(I)}setFeatureState(d,I){this._checkLoaded();const D=d.source,z=d.sourceLayer,W=this.sourceCaches[D];if(W===void 0)return void this.fire(new r.ErrorEvent(new Error(`The source '${D}' does not exist in the map's style.`)));const ne=W.getSource().type;ne==="geojson"&&z?this.fire(new r.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):ne!=="vector"||z?(d.id===void 0&&this.fire(new r.ErrorEvent(new Error("The feature id parameter must be provided."))),W.setFeatureState(z,d.id,I)):this.fire(new r.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(d,I){this._checkLoaded();const D=d.source,z=this.sourceCaches[D];if(z===void 0)return void this.fire(new r.ErrorEvent(new Error(`The source '${D}' does not exist in the map's style.`)));const W=z.getSource().type,ne=W==="vector"?d.sourceLayer:void 0;W!=="vector"||ne?I&&typeof d.id!="string"&&typeof d.id!="number"?this.fire(new r.ErrorEvent(new Error("A feature id is required to remove its specific state property."))):z.removeFeatureState(ne,d.id,I):this.fire(new r.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}getFeatureState(d){this._checkLoaded();const I=d.source,D=d.sourceLayer,z=this.sourceCaches[I];if(z!==void 0)return z.getSource().type!=="vector"||D?(d.id===void 0&&this.fire(new r.ErrorEvent(new Error("The feature id parameter must be provided."))),z.getFeatureState(D,d.id)):void this.fire(new r.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new r.ErrorEvent(new Error(`The source '${I}' does not exist in the map's style.`)))}getTransition(){return r.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){return r.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,sources:r.mapObject(this.sourceCaches,d=>d.serialize()),layers:this._serializeLayers(this._order)},d=>d!==void 0)}_updateLayer(d){this._updatedLayers[d.id]=!0,d.source&&!this._updatedSources[d.source]&&this.sourceCaches[d.source].getSource().type!=="raster"&&(this._updatedSources[d.source]="reload",this.sourceCaches[d.source].pause()),this._changed=!0}_flattenAndSortRenderedFeatures(d){const I=ne=>this._layers[ne].type==="fill-extrusion",D={},z=[];for(let ne=this._order.length-1;ne>=0;ne--){const pe=this._order[ne];if(I(pe)){D[pe]=ne;for(const ye of d){const ke=ye[pe];if(ke)for(const ze of ke)z.push(ze)}}}z.sort((ne,pe)=>pe.intersectionZ-ne.intersectionZ);const W=[];for(let ne=this._order.length-1;ne>=0;ne--){const pe=this._order[ne];if(I(pe))for(let ye=z.length-1;ye>=0;ye--){const ke=z[ye].feature;if(D[ke.layer.id]<ne)break;W.push(ke),z.pop()}else for(const ye of d){const ke=ye[pe];if(ke)for(const ze of ke)W.push(ze.feature)}}return W}queryRenderedFeatures(d,I,D){I&&I.filter&&this._validate(r.validateStyle.filter,"queryRenderedFeatures.filter",I.filter,null,I);const z={};if(I&&I.layers){if(!Array.isArray(I.layers))return this.fire(new r.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(const ne of I.layers){const pe=this._layers[ne];if(!pe)return this.fire(new r.ErrorEvent(new Error(`The layer '${ne}' does not exist in the map's style and cannot be queried for features.`))),[];z[pe.source]=!0}}const W=[];I.availableImages=this._availableImages;for(const ne in this.sourceCaches)I.layers&&!z[ne]||W.push(he(this.sourceCaches[ne],this._layers,this._serializedLayers,d,I,D));return this.placement&&W.push(function(ne,pe,ye,ke,ze,Qe,rt){const Pt={},kt=Qe.queryRenderedSymbols(ke),Et=[];for(const si of Object.keys(kt).map(Number))Et.push(rt[si]);Et.sort(me);for(const si of Et){const fi=si.featureIndex.lookupSymbolFeatures(kt[si.bucketInstanceId],pe,si.bucketIndex,si.sourceLayerIndex,ze.filter,ze.layers,ze.availableImages,ne);for(const xi in fi){const Nt=Pt[xi]=Pt[xi]||[],Pi=fi[xi];Pi.sort((Ei,Vi)=>{const Ni=si.featureSortOrder;if(Ni){const cn=Ni.indexOf(Ei.featureIndex);return Ni.indexOf(Vi.featureIndex)-cn}return Vi.featureIndex-Ei.featureIndex});for(const Ei of Pi)Nt.push(Ei)}}for(const si in Pt)Pt[si].forEach(fi=>{const xi=fi.feature,Nt=ye[ne[si].source].getFeatureState(xi.layer["source-layer"],xi.id);xi.source=xi.layer.source,xi.layer["source-layer"]&&(xi.sourceLayer=xi.layer["source-layer"]),xi.state=Nt});return Pt}(this._layers,this._serializedLayers,this.sourceCaches,d,I,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(W)}querySourceFeatures(d,I){I&&I.filter&&this._validate(r.validateStyle.filter,"querySourceFeatures.filter",I.filter,null,I);const D=this.sourceCaches[d];return D?function(z,W){const ne=z.getRenderableIds().map(ke=>z.getTileByID(ke)),pe=[],ye={};for(let ke=0;ke<ne.length;ke++){const ze=ne[ke],Qe=ze.tileID.canonical.key;ye[Qe]||(ye[Qe]=!0,ze.querySourceFeatures(pe,W))}return pe}(D,I):[]}addSourceType(d,I,D){return $o.getSourceType(d)?D(new Error(`A source type called "${d}" already exists.`)):($o.setSourceType(d,I),I.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:d,url:I.workerSourceURL},D):D(null,null))}getLight(){return this.light.getLight()}setLight(d,I={}){this._checkLoaded();const D=this.light.getLight();let z=!1;for(const ne in d)if(!v(d[ne],D[ne])){z=!0;break}if(!z)return;const W={now:r.exported.now(),transition:r.extend({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(d,I),this.light.updateTransitions(W)}_validate(d,I,D,z,W={}){return(!W||W.validate!==!1)&&Pr(this,d.call(r.validateStyle,r.extend({key:I,style:this.serialize(),value:D,styleSpec:r.spec},z)))}_remove(){this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),r.evented.off("pluginStateChange",this._rtlTextPluginCallback);for(const d in this._layers)this._layers[d].setEventedParent(null);for(const d in this.sourceCaches){const I=this.sourceCaches[d];I.setEventedParent(null),I.onRemove(this.map)}this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()}_clearSource(d){this.sourceCaches[d].clearTiles()}_reloadSource(d){this.sourceCaches[d].resume(),this.sourceCaches[d].reload()}_updateSources(d){for(const I in this.sourceCaches)this.sourceCaches[I].update(d,this.terrain)}_generateCollisionBoxes(){for(const d in this.sourceCaches)this._reloadSource(d)}_updatePlacement(d,I,D,z,W=!1){let ne=!1,pe=!1;const ye={};for(const ke of this._order){const ze=this._layers[ke];if(ze.type!=="symbol")continue;if(!ye[ze.source]){const rt=this.sourceCaches[ze.source];ye[ze.source]=rt.getRenderableIds(!0).map(Pt=>rt.getTileByID(Pt)).sort((Pt,kt)=>kt.tileID.overscaledZ-Pt.tileID.overscaledZ||(Pt.tileID.isLessThan(kt.tileID)?-1:1))}const Qe=this.crossTileSymbolIndex.addLayer(ze,ye[ze.source],d.center.lng);ne=ne||Qe}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((W=W||this._layerOrderChanged||D===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(r.exported.now(),d.zoom))&&(this.pauseablePlacement=new Ii(d,this.terrain,this._order,W,I,D,z,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,ye),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(r.exported.now()),pe=!0),ne&&this.pauseablePlacement.placement.setStale()),pe||ne)for(const ke of this._order){const ze=this._layers[ke];ze.type==="symbol"&&this.placement.updateLayerOpacities(ze,ye[ze.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(r.exported.now())}_releaseSymbolFadeTiles(){for(const d in this.sourceCaches)this.sourceCaches[d].releaseSymbolFadeTiles()}getImages(d,I,D){this.imageManager.getImages(I.icons,D),this._updateTilesForChangedImages();const z=this.sourceCaches[I.source];z&&z.setDependencies(I.tileID.key,I.type,I.icons)}getGlyphs(d,I,D){this.glyphManager.getGlyphs(I.stacks,D)}getResource(d,I,D){return r.makeRequest(I,D)}}$o.getSourceType=function(B){return le[B]},$o.setSourceType=function(B,d){le[B]=d},$o.registerForPluginStateChange=r.registerForPluginStateChange;var tl="attribute vec2 a_pos;uniform mat4 u_matrix;varying vec2 v_texture_pos;varying float v_depth;void main() {v_texture_pos=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos,get_elevation(a_pos),1.0);v_depth=gl_Position.z/gl_Position.w;}";const Fo={prelude:Dt(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}
#ifdef TERRAIN3D
uniform sampler2D u_terrain;uniform float u_terrain_dim;uniform mat4 u_terrain_matrix;uniform vec4 u_terrain_unpack;uniform float u_terrain_offset;uniform float u_terrain_exaggeration;uniform highp sampler2D u_depth;
#endif
const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitShifts=vec4(1.)/bitSh;highp float unpack(highp vec4 color) {return dot(color,bitShifts);}highp float depthOpacity(vec3 frag) {
#ifdef TERRAIN3D
highp float d=unpack(texture2D(u_depth,frag.xy*0.5+0.5))+0.0001-frag.z;return 1.0-max(0.0,min(1.0,-d*500.0));
#else
return 1.0;
#endif
}float calculate_visibility(vec4 pos) {
#ifdef TERRAIN3D
vec3 frag=pos.xyz/pos.w;highp float d=depthOpacity(frag);if (d > 0.95) return 1.0;return (d+depthOpacity(frag+vec3(0.0,0.01,0.0)))/2.0;
#else
return 1.0;
#endif
}float ele(vec2 pos) {
#ifdef TERRAIN3D
vec4 rgb=(texture2D(u_terrain,pos)*255.0)*u_terrain_unpack;return rgb.r+rgb.g+rgb.b-u_terrain_unpack.a;
#else
return 0.0;
#endif
}float get_elevation(vec2 pos) {
#ifdef TERRAIN3D
vec2 coord=(u_terrain_matrix*vec4(pos,0.0,1.0)).xy*u_terrain_dim+1.0;vec2 f=fract(coord);vec2 c=(floor(coord)+0.5)/(u_terrain_dim+2.0);float d=1.0/(u_terrain_dim+2.0);float tl=ele(c);float tr=ele(c+vec2(d,0.0));float bl=ele(c+vec2(0.0,d));float br=ele(c+vec2(d,d));float elevation=mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);return (elevation+u_terrain_offset)*u_terrain_exaggeration;
#else
return 0.0;
#endif
}`),background:Dt(`uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),backgroundPattern:Dt(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:Dt(`varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);float ele=get_elevation(circle_center);v_visibility=calculate_visibility(u_matrix*vec4(circle_center,ele,1.0));if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,ele,1);} else {gl_Position=u_matrix*vec4(circle_center,ele,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),clippingMask:Dt("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:Dt(`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}`),heatmapTexture:Dt(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:Dt("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,get_elevation(a_pos),1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:Dt("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),debug:Dt("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,get_elevation(a_pos),1);}"),fill:Dt(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_FragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);}`),fillOutline:Dt(`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillOutlinePattern:Dt(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillPattern:Dt(`#ifdef GL_ES
precision highp float;
#endif
uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),fillExtrusion:Dt(`varying vec4 v_color;void main() {gl_FragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;
#ifdef TERRAIN3D
float baseDelta=10.0;float ele=get_elevation(a_centroid);
#else
float baseDelta=0.0;float ele=0.0;
#endif
base=max(0.0,ele+base-baseDelta);height=max(0.0,ele+height);float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),fillExtrusionPattern:Dt(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;
#ifdef TERRAIN3D
float baseDelta=10.0;float ele=get_elevation(a_centroid);
#else
float baseDelta=0.0;float ele=0.0;
#endif
base=max(0.0,ele+base-baseDelta);height=max(0.0,ele+height);float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),hillshadePrepare:Dt(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:Dt(`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;
#define PI 3.141592653589793
void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),line:Dt(`uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),lineGradient:Dt(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),linePattern:Dt(`#ifdef GL_ES
precision highp float;
#endif
uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),lineSDF:Dt(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),raster:Dt(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),symbolIcon:Dt(`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),z,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float visibility=calculate_visibility(projectedPoint);v_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));}`),symbolSDF:Dt(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),z,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),symbolTextAndIcon:Dt(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),z,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`),terrain:Dt("uniform sampler2D u_texture;varying vec2 v_texture_pos;void main() {gl_FragColor=texture2D(u_texture,v_texture_pos);}",tl),terrainDepth:Dt("varying float v_depth;const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitMsk=vec4(0.,vec3(1./256.0));highp vec4 pack(highp float value) {highp vec4 comp=fract(value*bitSh);comp-=comp.xxyz*bitMsk;return comp;}void main() {gl_FragColor=pack(v_depth);}",tl),terrainCoords:Dt("precision mediump float;uniform sampler2D u_texture;uniform float u_terrain_coords_id;varying vec2 v_texture_pos;void main() {vec4 rgba=texture2D(u_texture,v_texture_pos);gl_FragColor=vec4(rgba.r,rgba.g,rgba.b,u_terrain_coords_id);}",tl)};function Dt(B,d){const I=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,D=d.match(/attribute ([\w]+) ([\w]+)/g),z=B.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),W=d.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),ne=W?W.concat(z):z,pe={};return{fragmentSource:B=B.replace(I,(ye,ke,ze,Qe,rt)=>(pe[rt]=!0,ke==="define"?`
#ifndef HAS_UNIFORM_u_${rt}
varying ${ze} ${Qe} ${rt};
#else
uniform ${ze} ${Qe} u_${rt};
#endif
`:`
#ifdef HAS_UNIFORM_u_${rt}
    ${ze} ${Qe} ${rt} = u_${rt};
#endif
`)),vertexSource:d=d.replace(I,(ye,ke,ze,Qe,rt)=>{const Pt=Qe==="float"?"vec2":"vec4",kt=rt.match(/color/)?"color":Pt;return pe[rt]?ke==="define"?`
#ifndef HAS_UNIFORM_u_${rt}
uniform lowp float u_${rt}_t;
attribute ${ze} ${Pt} a_${rt};
varying ${ze} ${Qe} ${rt};
#else
uniform ${ze} ${Qe} u_${rt};
#endif
`:kt==="vec4"?`
#ifndef HAS_UNIFORM_u_${rt}
    ${rt} = a_${rt};
#else
    ${ze} ${Qe} ${rt} = u_${rt};
#endif
`:`
#ifndef HAS_UNIFORM_u_${rt}
    ${rt} = unpack_mix_${kt}(a_${rt}, u_${rt}_t);
#else
    ${ze} ${Qe} ${rt} = u_${rt};
#endif
`:ke==="define"?`
#ifndef HAS_UNIFORM_u_${rt}
uniform lowp float u_${rt}_t;
attribute ${ze} ${Pt} a_${rt};
#else
uniform ${ze} ${Qe} u_${rt};
#endif
`:kt==="vec4"?`
#ifndef HAS_UNIFORM_u_${rt}
    ${ze} ${Qe} ${rt} = a_${rt};
#else
    ${ze} ${Qe} ${rt} = u_${rt};
#endif
`:`
#ifndef HAS_UNIFORM_u_${rt}
    ${ze} ${Qe} ${rt} = unpack_mix_${kt}(a_${rt}, u_${rt}_t);
#else
    ${ze} ${Qe} ${rt} = u_${rt};
#endif
`}),staticAttributes:D,staticUniforms:ne}}class rr{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(d,I,D,z,W,ne,pe,ye,ke){this.context=d;let ze=this.boundPaintVertexBuffers.length!==z.length;for(let Qe=0;!ze&&Qe<z.length;Qe++)this.boundPaintVertexBuffers[Qe]!==z[Qe]&&(ze=!0);d.extVertexArrayObject&&this.vao&&this.boundProgram===I&&this.boundLayoutVertexBuffer===D&&!ze&&this.boundIndexBuffer===W&&this.boundVertexOffset===ne&&this.boundDynamicVertexBuffer===pe&&this.boundDynamicVertexBuffer2===ye&&this.boundDynamicVertexBuffer3===ke?(d.bindVertexArrayOES.set(this.vao),pe&&pe.bind(),W&&W.dynamicDraw&&W.bind(),ye&&ye.bind(),ke&&ke.bind()):this.freshBind(I,D,z,W,ne,pe,ye,ke)}freshBind(d,I,D,z,W,ne,pe,ye){let ke;const ze=d.numAttributes,Qe=this.context,rt=Qe.gl;if(Qe.extVertexArrayObject)this.vao&&this.destroy(),this.vao=Qe.extVertexArrayObject.createVertexArrayOES(),Qe.bindVertexArrayOES.set(this.vao),ke=0,this.boundProgram=d,this.boundLayoutVertexBuffer=I,this.boundPaintVertexBuffers=D,this.boundIndexBuffer=z,this.boundVertexOffset=W,this.boundDynamicVertexBuffer=ne,this.boundDynamicVertexBuffer2=pe,this.boundDynamicVertexBuffer3=ye;else{ke=Qe.currentNumAttributes||0;for(let Pt=ze;Pt<ke;Pt++)rt.disableVertexAttribArray(Pt)}I.enableAttributes(rt,d);for(const Pt of D)Pt.enableAttributes(rt,d);ne&&ne.enableAttributes(rt,d),pe&&pe.enableAttributes(rt,d),ye&&ye.enableAttributes(rt,d),I.bind(),I.setVertexAttribPointers(rt,d,W);for(const Pt of D)Pt.bind(),Pt.setVertexAttribPointers(rt,d,W);ne&&(ne.bind(),ne.setVertexAttribPointers(rt,d,W)),z&&z.bind(),pe&&(pe.bind(),pe.setVertexAttribPointers(rt,d,W)),ye&&(ye.bind(),ye.setVertexAttribPointers(rt,d,W)),Qe.currentNumAttributes=ze}destroy(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)}}function lr(B){const d=[];for(let I=0;I<B.length;I++){if(B[I]===null)continue;const D=B[I].split(" ");d.push(D.pop())}return d}class zr{constructor(d,I,D,z,W,ne,pe){const ye=d.gl;this.program=ye.createProgram();const ke=lr(D.staticAttributes),ze=z?z.getBinderAttributes():[],Qe=ke.concat(ze),rt=Fo.prelude.staticUniforms?lr(Fo.prelude.staticUniforms):[],Pt=D.staticUniforms?lr(D.staticUniforms):[],kt=z?z.getBinderUniforms():[],Et=rt.concat(Pt).concat(kt),si=[];for(const Ni of Et)si.indexOf(Ni)<0&&si.push(Ni);const fi=z?z.defines():[];ne&&fi.push("#define OVERDRAW_INSPECTOR;"),pe&&fi.push("#define TERRAIN3D;");const xi=fi.concat(Fo.prelude.fragmentSource,D.fragmentSource).join(`
`),Nt=fi.concat(Fo.prelude.vertexSource,D.vertexSource).join(`
`),Pi=ye.createShader(ye.FRAGMENT_SHADER);if(ye.isContextLost())return void(this.failedToCreate=!0);ye.shaderSource(Pi,xi),ye.compileShader(Pi),ye.attachShader(this.program,Pi);const Ei=ye.createShader(ye.VERTEX_SHADER);if(ye.isContextLost())return void(this.failedToCreate=!0);ye.shaderSource(Ei,Nt),ye.compileShader(Ei),ye.attachShader(this.program,Ei),this.attributes={};const Vi={};this.numAttributes=Qe.length;for(let Ni=0;Ni<this.numAttributes;Ni++)Qe[Ni]&&(ye.bindAttribLocation(this.program,Ni,Qe[Ni]),this.attributes[Qe[Ni]]=Ni);ye.linkProgram(this.program),ye.deleteShader(Ei),ye.deleteShader(Pi);for(let Ni=0;Ni<si.length;Ni++){const cn=si[Ni];if(cn&&!Vi[cn]){const zi=ye.getUniformLocation(this.program,cn);zi&&(Vi[cn]=zi)}}this.fixedUniforms=W(d,Vi),this.terrainUniforms=((Ni,cn)=>({u_depth:new r.Uniform1i(Ni,cn.u_depth),u_terrain:new r.Uniform1i(Ni,cn.u_terrain),u_terrain_dim:new r.Uniform1f(Ni,cn.u_terrain_dim),u_terrain_matrix:new r.UniformMatrix4f(Ni,cn.u_terrain_matrix),u_terrain_unpack:new r.Uniform4f(Ni,cn.u_terrain_unpack),u_terrain_offset:new r.Uniform1f(Ni,cn.u_terrain_offset),u_terrain_exaggeration:new r.Uniform1f(Ni,cn.u_terrain_exaggeration)}))(d,Vi),this.binderUniforms=z?z.getUniforms(d,Vi):[]}draw(d,I,D,z,W,ne,pe,ye,ke,ze,Qe,rt,Pt,kt,Et,si,fi,xi){const Nt=d.gl;if(this.failedToCreate)return;if(d.program.set(this.program),d.setDepthMode(D),d.setStencilMode(z),d.setColorMode(W),d.setCullFace(ne),ye){d.activeTexture.set(Nt.TEXTURE2),Nt.bindTexture(Nt.TEXTURE_2D,ye.depthTexture),d.activeTexture.set(Nt.TEXTURE3),Nt.bindTexture(Nt.TEXTURE_2D,ye.texture);for(const Ei in this.terrainUniforms)this.terrainUniforms[Ei].set(ye[Ei])}for(const Ei in this.fixedUniforms)this.fixedUniforms[Ei].set(pe[Ei]);Et&&Et.setUniforms(d,this.binderUniforms,Pt,{zoom:kt});let Pi=0;switch(I){case Nt.LINES:Pi=2;break;case Nt.TRIANGLES:Pi=3;break;case Nt.LINE_STRIP:Pi=1}for(const Ei of rt.get()){const Vi=Ei.vaos||(Ei.vaos={});(Vi[ke]||(Vi[ke]=new rr)).bind(d,this,ze,Et?Et.getPaintVertexBuffers():[],Qe,Ei.vertexOffset,si,fi,xi),Nt.drawElements(I,Ei.primitiveLength*Pi,Nt.UNSIGNED_SHORT,Ei.primitiveOffset*Pi*2)}}}function Zo(B,d,I){const D=1/Sr(I,1,d.transform.tileZoom),z=Math.pow(2,I.tileID.overscaledZ),W=I.tileSize*Math.pow(2,d.transform.tileZoom)/z,ne=W*(I.tileID.canonical.x+I.tileID.wrap*z),pe=W*I.tileID.canonical.y;return{u_image:0,u_texsize:I.imageAtlasTexture.size,u_scale:[D,B.fromScale,B.toScale],u_fade:B.t,u_pixel_coord_upper:[ne>>16,pe>>16],u_pixel_coord_lower:[65535&ne,65535&pe]}}const Ro=(B,d,I,D)=>{const z=d.style.light,W=z.properties.get("position"),ne=[W.x,W.y,W.z],pe=r.create$1();z.properties.get("anchor")==="viewport"&&r.fromRotation(pe,-d.transform.angle),r.transformMat3(ne,ne,pe);const ye=z.properties.get("color");return{u_matrix:B,u_lightpos:ne,u_lightintensity:z.properties.get("intensity"),u_lightcolor:[ye.r,ye.g,ye.b],u_vertical_gradient:+I,u_opacity:D}},Sa=(B,d,I,D,z,W,ne)=>r.extend(Ro(B,d,I,D),Zo(W,d,ne),{u_height_factor:-Math.pow(2,z.overscaledZ)/ne.tileSize/8}),ts=B=>({u_matrix:B}),Vs=(B,d,I,D)=>r.extend(ts(B),Zo(I,d,D)),_s=(B,d)=>({u_matrix:B,u_world:d}),Ca=(B,d,I,D,z)=>r.extend(Vs(B,d,I,D),{u_world:z}),Ss=(B,d,I,D)=>{const z=B.transform;let W,ne;if(D.paint.get("circle-pitch-alignment")==="map"){const pe=Sr(I,1,z.zoom);W=!0,ne=[pe,pe]}else W=!1,ne=z.pixelsToGLUnits;return{u_camera_to_center_distance:z.cameraToCenterDistance,u_scale_with_map:+(D.paint.get("circle-pitch-scale")==="map"),u_matrix:B.translatePosMatrix(d.posMatrix,I,D.paint.get("circle-translate"),D.paint.get("circle-translate-anchor")),u_pitch_with_map:+W,u_device_pixel_ratio:B.pixelRatio,u_extrude_scale:ne}},Zs=(B,d,I)=>{const D=Sr(I,1,d.zoom),z=Math.pow(2,d.zoom-I.tileID.overscaledZ),W=I.tileID.overscaleFactor();return{u_matrix:B,u_camera_to_center_distance:d.cameraToCenterDistance,u_pixels_to_tile_units:D,u_extrude_scale:[d.pixelsToGLUnits[0]/(D*z),d.pixelsToGLUnits[1]/(D*z)],u_overscale_factor:W}},qs=(B,d,I=1)=>({u_matrix:B,u_color:d,u_overlay:0,u_overlay_scale:I}),Ea=B=>({u_matrix:B}),wl=(B,d,I,D)=>({u_matrix:B,u_extrude_scale:Sr(d,1,I),u_intensity:D});function uu(B,d){const I=Math.pow(2,d.canonical.z),D=d.canonical.y;return[new r.MercatorCoordinate(0,D/I).toLngLat().lat,new r.MercatorCoordinate(0,(D+1)/I).toLngLat().lat]}const xl=(B,d,I,D)=>{const z=B.transform;return{u_matrix:il(B,d,I,D),u_ratio:1/Sr(d,1,z.zoom),u_device_pixel_ratio:B.pixelRatio,u_units_to_pixels:[1/z.pixelsToGLUnits[0],1/z.pixelsToGLUnits[1]]}},cu=(B,d,I,D,z)=>r.extend(xl(B,d,I,z),{u_image:0,u_image_height:D}),ha=(B,d,I,D,z)=>{const W=B.transform,ne=Io(d,W);return{u_matrix:il(B,d,I,z),u_texsize:d.imageAtlasTexture.size,u_ratio:1/Sr(d,1,W.zoom),u_device_pixel_ratio:B.pixelRatio,u_image:0,u_scale:[ne,D.fromScale,D.toScale],u_fade:D.t,u_units_to_pixels:[1/W.pixelsToGLUnits[0],1/W.pixelsToGLUnits[1]]}},fa=(B,d,I,D,z,W)=>{const ne=B.lineAtlas,pe=Io(d,B.transform),ye=I.layout.get("line-cap")==="round",ke=ne.getDash(D.from,ye),ze=ne.getDash(D.to,ye),Qe=ke.width*z.fromScale,rt=ze.width*z.toScale;return r.extend(xl(B,d,I,W),{u_patternscale_a:[pe/Qe,-ke.height/2],u_patternscale_b:[pe/rt,-ze.height/2],u_sdfgamma:ne.width/(256*Math.min(Qe,rt)*B.pixelRatio)/2,u_image:0,u_tex_y_a:ke.y,u_tex_y_b:ze.y,u_mix:z.t})};function Io(B,d){return 1/Sr(B,1,d.tileZoom)}function il(B,d,I,D){return B.translatePosMatrix(D?D.posMatrix:d.tileID.posMatrix,d,I.paint.get("line-translate"),I.paint.get("line-translate-anchor"))}const U=(B,d,I,D,z)=>{return{u_matrix:B,u_tl_parent:d,u_scale_parent:I,u_buffer_scale:1,u_fade_t:D.mix,u_opacity:D.opacity*z.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:z.paint.get("raster-brightness-min"),u_brightness_high:z.paint.get("raster-brightness-max"),u_saturation_factor:(ne=z.paint.get("raster-saturation"),ne>0?1-1/(1.001-ne):-ne),u_contrast_factor:(W=z.paint.get("raster-contrast"),W>0?1/(1-W):1+W),u_spin_weights:$(z.paint.get("raster-hue-rotate"))};var W,ne};function $(B){B*=Math.PI/180;const d=Math.sin(B),I=Math.cos(B);return[(2*I+1)/3,(-Math.sqrt(3)*d-I+1)/3,(Math.sqrt(3)*d-I+1)/3]}const ge=(B,d,I,D,z,W,ne,pe,ye,ke)=>{const ze=z.transform;return{u_is_size_zoom_constant:+(B==="constant"||B==="source"),u_is_size_feature_constant:+(B==="constant"||B==="camera"),u_size_t:d?d.uSizeT:0,u_size:d?d.uSize:0,u_camera_to_center_distance:ze.cameraToCenterDistance,u_pitch:ze.pitch/360*2*Math.PI,u_rotate_symbol:+I,u_aspect_ratio:ze.width/ze.height,u_fade_change:z.options.fadeDuration?z.symbolFadeChange:1,u_matrix:W,u_label_plane_matrix:ne,u_coord_matrix:pe,u_is_text:+ye,u_pitch_with_map:+D,u_texsize:ke,u_texture:0}},Oe=(B,d,I,D,z,W,ne,pe,ye,ke,ze)=>{const Qe=z.transform;return r.extend(ge(B,d,I,D,z,W,ne,pe,ye,ke),{u_gamma_scale:D?Math.cos(Qe._pitch)*Qe.cameraToCenterDistance:1,u_device_pixel_ratio:z.pixelRatio,u_is_halo:+ze})},nt=(B,d,I,D,z,W,ne,pe,ye,ke)=>r.extend(Oe(B,d,I,D,z,W,ne,pe,!0,ye,!0),{u_texsize_icon:ke,u_texture_icon:1}),Ct=(B,d,I)=>({u_matrix:B,u_opacity:d,u_color:I}),zt=(B,d,I,D,z,W)=>r.extend(function(ne,pe,ye,ke){const ze=ye.imageManager.getPattern(ne.from.toString()),Qe=ye.imageManager.getPattern(ne.to.toString()),{width:rt,height:Pt}=ye.imageManager.getPixelSize(),kt=Math.pow(2,ke.tileID.overscaledZ),Et=ke.tileSize*Math.pow(2,ye.transform.tileZoom)/kt,si=Et*(ke.tileID.canonical.x+ke.tileID.wrap*kt),fi=Et*ke.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:ze.tl,u_pattern_br_a:ze.br,u_pattern_tl_b:Qe.tl,u_pattern_br_b:Qe.br,u_texsize:[rt,Pt],u_mix:pe.t,u_pattern_size_a:ze.displaySize,u_pattern_size_b:Qe.displaySize,u_scale_a:pe.fromScale,u_scale_b:pe.toScale,u_tile_units_to_pixels:1/Sr(ke,1,ye.transform.tileZoom),u_pixel_coord_upper:[si>>16,fi>>16],u_pixel_coord_lower:[65535&si,65535&fi]}}(D,W,I,z),{u_matrix:B,u_opacity:d}),Rt={fillExtrusion:(B,d)=>({u_matrix:new r.UniformMatrix4f(B,d.u_matrix),u_lightpos:new r.Uniform3f(B,d.u_lightpos),u_lightintensity:new r.Uniform1f(B,d.u_lightintensity),u_lightcolor:new r.Uniform3f(B,d.u_lightcolor),u_vertical_gradient:new r.Uniform1f(B,d.u_vertical_gradient),u_opacity:new r.Uniform1f(B,d.u_opacity)}),fillExtrusionPattern:(B,d)=>({u_matrix:new r.UniformMatrix4f(B,d.u_matrix),u_lightpos:new r.Uniform3f(B,d.u_lightpos),u_lightintensity:new r.Uniform1f(B,d.u_lightintensity),u_lightcolor:new r.Uniform3f(B,d.u_lightcolor),u_vertical_gradient:new r.Uniform1f(B,d.u_vertical_gradient),u_height_factor:new r.Uniform1f(B,d.u_height_factor),u_image:new r.Uniform1i(B,d.u_image),u_texsize:new r.Uniform2f(B,d.u_texsize),u_pixel_coord_upper:new r.Uniform2f(B,d.u_pixel_coord_upper),u_pixel_coord_lower:new r.Uniform2f(B,d.u_pixel_coord_lower),u_scale:new r.Uniform3f(B,d.u_scale),u_fade:new r.Uniform1f(B,d.u_fade),u_opacity:new r.Uniform1f(B,d.u_opacity)}),fill:(B,d)=>({u_matrix:new r.UniformMatrix4f(B,d.u_matrix)}),fillPattern:(B,d)=>({u_matrix:new r.UniformMatrix4f(B,d.u_matrix),u_image:new r.Uniform1i(B,d.u_image),u_texsize:new r.Uniform2f(B,d.u_texsize),u_pixel_coord_upper:new r.Uniform2f(B,d.u_pixel_coord_upper),u_pixel_coord_lower:new r.Uniform2f(B,d.u_pixel_coord_lower),u_scale:new r.Uniform3f(B,d.u_scale),u_fade:new r.Uniform1f(B,d.u_fade)}),fillOutline:(B,d)=>({u_matrix:new r.UniformMatrix4f(B,d.u_matrix),u_world:new r.Uniform2f(B,d.u_world)}),fillOutlinePattern:(B,d)=>({u_matrix:new r.UniformMatrix4f(B,d.u_matrix),u_world:new r.Uniform2f(B,d.u_world),u_image:new r.Uniform1i(B,d.u_image),u_texsize:new r.Uniform2f(B,d.u_texsize),u_pixel_coord_upper:new r.Uniform2f(B,d.u_pixel_coord_upper),u_pixel_coord_lower:new r.Uniform2f(B,d.u_pixel_coord_lower),u_scale:new r.Uniform3f(B,d.u_scale),u_fade:new r.Uniform1f(B,d.u_fade)}),circle:(B,d)=>({u_camera_to_center_distance:new r.Uniform1f(B,d.u_camera_to_center_distance),u_scale_with_map:new r.Uniform1i(B,d.u_scale_with_map),u_pitch_with_map:new r.Uniform1i(B,d.u_pitch_with_map),u_extrude_scale:new r.Uniform2f(B,d.u_extrude_scale),u_device_pixel_ratio:new r.Uniform1f(B,d.u_device_pixel_ratio),u_matrix:new r.UniformMatrix4f(B,d.u_matrix)}),collisionBox:(B,d)=>({u_matrix:new r.UniformMatrix4f(B,d.u_matrix),u_camera_to_center_distance:new r.Uniform1f(B,d.u_camera_to_center_distance),u_pixels_to_tile_units:new r.Uniform1f(B,d.u_pixels_to_tile_units),u_extrude_scale:new r.Uniform2f(B,d.u_extrude_scale),u_overscale_factor:new r.Uniform1f(B,d.u_overscale_factor)}),collisionCircle:(B,d)=>({u_matrix:new r.UniformMatrix4f(B,d.u_matrix),u_inv_matrix:new r.UniformMatrix4f(B,d.u_inv_matrix),u_camera_to_center_distance:new r.Uniform1f(B,d.u_camera_to_center_distance),u_viewport_size:new r.Uniform2f(B,d.u_viewport_size)}),debug:(B,d)=>({u_color:new r.UniformColor(B,d.u_color),u_matrix:new r.UniformMatrix4f(B,d.u_matrix),u_overlay:new r.Uniform1i(B,d.u_overlay),u_overlay_scale:new r.Uniform1f(B,d.u_overlay_scale)}),clippingMask:(B,d)=>({u_matrix:new r.UniformMatrix4f(B,d.u_matrix)}),heatmap:(B,d)=>({u_extrude_scale:new r.Uniform1f(B,d.u_extrude_scale),u_intensity:new r.Uniform1f(B,d.u_intensity),u_matrix:new r.UniformMatrix4f(B,d.u_matrix)}),heatmapTexture:(B,d)=>({u_matrix:new r.UniformMatrix4f(B,d.u_matrix),u_world:new r.Uniform2f(B,d.u_world),u_image:new r.Uniform1i(B,d.u_image),u_color_ramp:new r.Uniform1i(B,d.u_color_ramp),u_opacity:new r.Uniform1f(B,d.u_opacity)}),hillshade:(B,d)=>({u_matrix:new r.UniformMatrix4f(B,d.u_matrix),u_image:new r.Uniform1i(B,d.u_image),u_latrange:new r.Uniform2f(B,d.u_latrange),u_light:new r.Uniform2f(B,d.u_light),u_shadow:new r.UniformColor(B,d.u_shadow),u_highlight:new r.UniformColor(B,d.u_highlight),u_accent:new r.UniformColor(B,d.u_accent)}),hillshadePrepare:(B,d)=>({u_matrix:new r.UniformMatrix4f(B,d.u_matrix),u_image:new r.Uniform1i(B,d.u_image),u_dimension:new r.Uniform2f(B,d.u_dimension),u_zoom:new r.Uniform1f(B,d.u_zoom),u_unpack:new r.Uniform4f(B,d.u_unpack)}),line:(B,d)=>({u_matrix:new r.UniformMatrix4f(B,d.u_matrix),u_ratio:new r.Uniform1f(B,d.u_ratio),u_device_pixel_ratio:new r.Uniform1f(B,d.u_device_pixel_ratio),u_units_to_pixels:new r.Uniform2f(B,d.u_units_to_pixels)}),lineGradient:(B,d)=>({u_matrix:new r.UniformMatrix4f(B,d.u_matrix),u_ratio:new r.Uniform1f(B,d.u_ratio),u_device_pixel_ratio:new r.Uniform1f(B,d.u_device_pixel_ratio),u_units_to_pixels:new r.Uniform2f(B,d.u_units_to_pixels),u_image:new r.Uniform1i(B,d.u_image),u_image_height:new r.Uniform1f(B,d.u_image_height)}),linePattern:(B,d)=>({u_matrix:new r.UniformMatrix4f(B,d.u_matrix),u_texsize:new r.Uniform2f(B,d.u_texsize),u_ratio:new r.Uniform1f(B,d.u_ratio),u_device_pixel_ratio:new r.Uniform1f(B,d.u_device_pixel_ratio),u_image:new r.Uniform1i(B,d.u_image),u_units_to_pixels:new r.Uniform2f(B,d.u_units_to_pixels),u_scale:new r.Uniform3f(B,d.u_scale),u_fade:new r.Uniform1f(B,d.u_fade)}),lineSDF:(B,d)=>({u_matrix:new r.UniformMatrix4f(B,d.u_matrix),u_ratio:new r.Uniform1f(B,d.u_ratio),u_device_pixel_ratio:new r.Uniform1f(B,d.u_device_pixel_ratio),u_units_to_pixels:new r.Uniform2f(B,d.u_units_to_pixels),u_patternscale_a:new r.Uniform2f(B,d.u_patternscale_a),u_patternscale_b:new r.Uniform2f(B,d.u_patternscale_b),u_sdfgamma:new r.Uniform1f(B,d.u_sdfgamma),u_image:new r.Uniform1i(B,d.u_image),u_tex_y_a:new r.Uniform1f(B,d.u_tex_y_a),u_tex_y_b:new r.Uniform1f(B,d.u_tex_y_b),u_mix:new r.Uniform1f(B,d.u_mix)}),raster:(B,d)=>({u_matrix:new r.UniformMatrix4f(B,d.u_matrix),u_tl_parent:new r.Uniform2f(B,d.u_tl_parent),u_scale_parent:new r.Uniform1f(B,d.u_scale_parent),u_buffer_scale:new r.Uniform1f(B,d.u_buffer_scale),u_fade_t:new r.Uniform1f(B,d.u_fade_t),u_opacity:new r.Uniform1f(B,d.u_opacity),u_image0:new r.Uniform1i(B,d.u_image0),u_image1:new r.Uniform1i(B,d.u_image1),u_brightness_low:new r.Uniform1f(B,d.u_brightness_low),u_brightness_high:new r.Uniform1f(B,d.u_brightness_high),u_saturation_factor:new r.Uniform1f(B,d.u_saturation_factor),u_contrast_factor:new r.Uniform1f(B,d.u_contrast_factor),u_spin_weights:new r.Uniform3f(B,d.u_spin_weights)}),symbolIcon:(B,d)=>({u_is_size_zoom_constant:new r.Uniform1i(B,d.u_is_size_zoom_constant),u_is_size_feature_constant:new r.Uniform1i(B,d.u_is_size_feature_constant),u_size_t:new r.Uniform1f(B,d.u_size_t),u_size:new r.Uniform1f(B,d.u_size),u_camera_to_center_distance:new r.Uniform1f(B,d.u_camera_to_center_distance),u_pitch:new r.Uniform1f(B,d.u_pitch),u_rotate_symbol:new r.Uniform1i(B,d.u_rotate_symbol),u_aspect_ratio:new r.Uniform1f(B,d.u_aspect_ratio),u_fade_change:new r.Uniform1f(B,d.u_fade_change),u_matrix:new r.UniformMatrix4f(B,d.u_matrix),u_label_plane_matrix:new r.UniformMatrix4f(B,d.u_label_plane_matrix),u_coord_matrix:new r.UniformMatrix4f(B,d.u_coord_matrix),u_is_text:new r.Uniform1i(B,d.u_is_text),u_pitch_with_map:new r.Uniform1i(B,d.u_pitch_with_map),u_texsize:new r.Uniform2f(B,d.u_texsize),u_texture:new r.Uniform1i(B,d.u_texture)}),symbolSDF:(B,d)=>({u_is_size_zoom_constant:new r.Uniform1i(B,d.u_is_size_zoom_constant),u_is_size_feature_constant:new r.Uniform1i(B,d.u_is_size_feature_constant),u_size_t:new r.Uniform1f(B,d.u_size_t),u_size:new r.Uniform1f(B,d.u_size),u_camera_to_center_distance:new r.Uniform1f(B,d.u_camera_to_center_distance),u_pitch:new r.Uniform1f(B,d.u_pitch),u_rotate_symbol:new r.Uniform1i(B,d.u_rotate_symbol),u_aspect_ratio:new r.Uniform1f(B,d.u_aspect_ratio),u_fade_change:new r.Uniform1f(B,d.u_fade_change),u_matrix:new r.UniformMatrix4f(B,d.u_matrix),u_label_plane_matrix:new r.UniformMatrix4f(B,d.u_label_plane_matrix),u_coord_matrix:new r.UniformMatrix4f(B,d.u_coord_matrix),u_is_text:new r.Uniform1i(B,d.u_is_text),u_pitch_with_map:new r.Uniform1i(B,d.u_pitch_with_map),u_texsize:new r.Uniform2f(B,d.u_texsize),u_texture:new r.Uniform1i(B,d.u_texture),u_gamma_scale:new r.Uniform1f(B,d.u_gamma_scale),u_device_pixel_ratio:new r.Uniform1f(B,d.u_device_pixel_ratio),u_is_halo:new r.Uniform1i(B,d.u_is_halo)}),symbolTextAndIcon:(B,d)=>({u_is_size_zoom_constant:new r.Uniform1i(B,d.u_is_size_zoom_constant),u_is_size_feature_constant:new r.Uniform1i(B,d.u_is_size_feature_constant),u_size_t:new r.Uniform1f(B,d.u_size_t),u_size:new r.Uniform1f(B,d.u_size),u_camera_to_center_distance:new r.Uniform1f(B,d.u_camera_to_center_distance),u_pitch:new r.Uniform1f(B,d.u_pitch),u_rotate_symbol:new r.Uniform1i(B,d.u_rotate_symbol),u_aspect_ratio:new r.Uniform1f(B,d.u_aspect_ratio),u_fade_change:new r.Uniform1f(B,d.u_fade_change),u_matrix:new r.UniformMatrix4f(B,d.u_matrix),u_label_plane_matrix:new r.UniformMatrix4f(B,d.u_label_plane_matrix),u_coord_matrix:new r.UniformMatrix4f(B,d.u_coord_matrix),u_is_text:new r.Uniform1i(B,d.u_is_text),u_pitch_with_map:new r.Uniform1i(B,d.u_pitch_with_map),u_texsize:new r.Uniform2f(B,d.u_texsize),u_texsize_icon:new r.Uniform2f(B,d.u_texsize_icon),u_texture:new r.Uniform1i(B,d.u_texture),u_texture_icon:new r.Uniform1i(B,d.u_texture_icon),u_gamma_scale:new r.Uniform1f(B,d.u_gamma_scale),u_device_pixel_ratio:new r.Uniform1f(B,d.u_device_pixel_ratio),u_is_halo:new r.Uniform1i(B,d.u_is_halo)}),background:(B,d)=>({u_matrix:new r.UniformMatrix4f(B,d.u_matrix),u_opacity:new r.Uniform1f(B,d.u_opacity),u_color:new r.UniformColor(B,d.u_color)}),backgroundPattern:(B,d)=>({u_matrix:new r.UniformMatrix4f(B,d.u_matrix),u_opacity:new r.Uniform1f(B,d.u_opacity),u_image:new r.Uniform1i(B,d.u_image),u_pattern_tl_a:new r.Uniform2f(B,d.u_pattern_tl_a),u_pattern_br_a:new r.Uniform2f(B,d.u_pattern_br_a),u_pattern_tl_b:new r.Uniform2f(B,d.u_pattern_tl_b),u_pattern_br_b:new r.Uniform2f(B,d.u_pattern_br_b),u_texsize:new r.Uniform2f(B,d.u_texsize),u_mix:new r.Uniform1f(B,d.u_mix),u_pattern_size_a:new r.Uniform2f(B,d.u_pattern_size_a),u_pattern_size_b:new r.Uniform2f(B,d.u_pattern_size_b),u_scale_a:new r.Uniform1f(B,d.u_scale_a),u_scale_b:new r.Uniform1f(B,d.u_scale_b),u_pixel_coord_upper:new r.Uniform2f(B,d.u_pixel_coord_upper),u_pixel_coord_lower:new r.Uniform2f(B,d.u_pixel_coord_lower),u_tile_units_to_pixels:new r.Uniform1f(B,d.u_tile_units_to_pixels)}),terrain:(B,d)=>({u_matrix:new r.UniformMatrix4f(B,d.u_matrix),u_texture:new r.Uniform1i(B,d.u_texture)}),terrainDepth:(B,d)=>({u_matrix:new r.UniformMatrix4f(B,d.u_matrix)}),terrainCoords:(B,d)=>({u_matrix:new r.UniformMatrix4f(B,d.u_matrix),u_texture:new r.Uniform1i(B,d.u_texture),u_terrain_coords_id:new r.Uniform1f(B,d.u_terrain_coords_id)})};class bi{constructor(d,I,D){this.context=d;const z=d.gl;this.buffer=z.createBuffer(),this.dynamicDraw=Boolean(D),this.context.unbindVAO(),d.bindElementBuffer.set(this.buffer),z.bufferData(z.ELEMENT_ARRAY_BUFFER,I.arrayBuffer,this.dynamicDraw?z.DYNAMIC_DRAW:z.STATIC_DRAW),this.dynamicDraw||delete I.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(d){const I=this.context.gl;if(!this.dynamicDraw)throw new Error("Attempted to update data while not in dynamic mode.");this.context.unbindVAO(),this.bind(),I.bufferSubData(I.ELEMENT_ARRAY_BUFFER,0,d.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const yi={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class _i{constructor(d,I,D,z){this.length=I.length,this.attributes=D,this.itemSize=I.bytesPerElement,this.dynamicDraw=z,this.context=d;const W=d.gl;this.buffer=W.createBuffer(),d.bindVertexBuffer.set(this.buffer),W.bufferData(W.ARRAY_BUFFER,I.arrayBuffer,this.dynamicDraw?W.DYNAMIC_DRAW:W.STATIC_DRAW),this.dynamicDraw||delete I.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(d){if(d.length!==this.length)throw new Error(`Length of new data is ${d.length}, which doesn't match current length of ${this.length}`);const I=this.context.gl;this.bind(),I.bufferSubData(I.ARRAY_BUFFER,0,d.arrayBuffer)}enableAttributes(d,I){for(let D=0;D<this.attributes.length;D++){const z=I.attributes[this.attributes[D].name];z!==void 0&&d.enableVertexAttribArray(z)}}setVertexAttribPointers(d,I,D){for(let z=0;z<this.attributes.length;z++){const W=this.attributes[z],ne=I.attributes[W.name];ne!==void 0&&d.vertexAttribPointer(ne,W.components,d[yi[W.type]],!1,this.itemSize,W.offset+this.itemSize*(D||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}class ui{constructor(d){this.gl=d.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(d){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class ji extends ui{getDefault(){return r.Color.transparent}set(d){const I=this.current;(d.r!==I.r||d.g!==I.g||d.b!==I.b||d.a!==I.a||this.dirty)&&(this.gl.clearColor(d.r,d.g,d.b,d.a),this.current=d,this.dirty=!1)}}class ln extends ui{getDefault(){return 1}set(d){(d!==this.current||this.dirty)&&(this.gl.clearDepth(d),this.current=d,this.dirty=!1)}}class In extends ui{getDefault(){return 0}set(d){(d!==this.current||this.dirty)&&(this.gl.clearStencil(d),this.current=d,this.dirty=!1)}}class ft extends ui{getDefault(){return[!0,!0,!0,!0]}set(d){const I=this.current;(d[0]!==I[0]||d[1]!==I[1]||d[2]!==I[2]||d[3]!==I[3]||this.dirty)&&(this.gl.colorMask(d[0],d[1],d[2],d[3]),this.current=d,this.dirty=!1)}}class p extends ui{getDefault(){return!0}set(d){(d!==this.current||this.dirty)&&(this.gl.depthMask(d),this.current=d,this.dirty=!1)}}class Di extends ui{getDefault(){return 255}set(d){(d!==this.current||this.dirty)&&(this.gl.stencilMask(d),this.current=d,this.dirty=!1)}}class c extends ui{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(d){const I=this.current;(d.func!==I.func||d.ref!==I.ref||d.mask!==I.mask||this.dirty)&&(this.gl.stencilFunc(d.func,d.ref,d.mask),this.current=d,this.dirty=!1)}}class F extends ui{getDefault(){const d=this.gl;return[d.KEEP,d.KEEP,d.KEEP]}set(d){const I=this.current;(d[0]!==I[0]||d[1]!==I[1]||d[2]!==I[2]||this.dirty)&&(this.gl.stencilOp(d[0],d[1],d[2]),this.current=d,this.dirty=!1)}}class mn extends ui{getDefault(){return!1}set(d){if(d===this.current&&!this.dirty)return;const I=this.gl;d?I.enable(I.STENCIL_TEST):I.disable(I.STENCIL_TEST),this.current=d,this.dirty=!1}}class $n extends ui{getDefault(){return[0,1]}set(d){const I=this.current;(d[0]!==I[0]||d[1]!==I[1]||this.dirty)&&(this.gl.depthRange(d[0],d[1]),this.current=d,this.dirty=!1)}}class Ao extends ui{getDefault(){return!1}set(d){if(d===this.current&&!this.dirty)return;const I=this.gl;d?I.enable(I.DEPTH_TEST):I.disable(I.DEPTH_TEST),this.current=d,this.dirty=!1}}class re extends ui{getDefault(){return this.gl.LESS}set(d){(d!==this.current||this.dirty)&&(this.gl.depthFunc(d),this.current=d,this.dirty=!1)}}class Rr extends ui{getDefault(){return!1}set(d){if(d===this.current&&!this.dirty)return;const I=this.gl;d?I.enable(I.BLEND):I.disable(I.BLEND),this.current=d,this.dirty=!1}}class da extends ui{getDefault(){const d=this.gl;return[d.ONE,d.ZERO]}set(d){const I=this.current;(d[0]!==I[0]||d[1]!==I[1]||this.dirty)&&(this.gl.blendFunc(d[0],d[1]),this.current=d,this.dirty=!1)}}class Na extends ui{getDefault(){return r.Color.transparent}set(d){const I=this.current;(d.r!==I.r||d.g!==I.g||d.b!==I.b||d.a!==I.a||this.dirty)&&(this.gl.blendColor(d.r,d.g,d.b,d.a),this.current=d,this.dirty=!1)}}class Mc extends ui{getDefault(){return this.gl.FUNC_ADD}set(d){(d!==this.current||this.dirty)&&(this.gl.blendEquation(d),this.current=d,this.dirty=!1)}}class Al extends ui{getDefault(){return!1}set(d){if(d===this.current&&!this.dirty)return;const I=this.gl;d?I.enable(I.CULL_FACE):I.disable(I.CULL_FACE),this.current=d,this.dirty=!1}}class Hs extends ui{getDefault(){return this.gl.BACK}set(d){(d!==this.current||this.dirty)&&(this.gl.cullFace(d),this.current=d,this.dirty=!1)}}class sc extends ui{getDefault(){return this.gl.CCW}set(d){(d!==this.current||this.dirty)&&(this.gl.frontFace(d),this.current=d,this.dirty=!1)}}class hu extends ui{getDefault(){return null}set(d){(d!==this.current||this.dirty)&&(this.gl.useProgram(d),this.current=d,this.dirty=!1)}}class ah extends ui{getDefault(){return this.gl.TEXTURE0}set(d){(d!==this.current||this.dirty)&&(this.gl.activeTexture(d),this.current=d,this.dirty=!1)}}class fu extends ui{getDefault(){const d=this.gl;return[0,0,d.drawingBufferWidth,d.drawingBufferHeight]}set(d){const I=this.current;(d[0]!==I[0]||d[1]!==I[1]||d[2]!==I[2]||d[3]!==I[3]||this.dirty)&&(this.gl.viewport(d[0],d[1],d[2],d[3]),this.current=d,this.dirty=!1)}}class lh extends ui{getDefault(){return null}set(d){if(d===this.current&&!this.dirty)return;const I=this.gl;I.bindFramebuffer(I.FRAMEBUFFER,d),this.current=d,this.dirty=!1}}class Ru extends ui{getDefault(){return null}set(d){if(d===this.current&&!this.dirty)return;const I=this.gl;I.bindRenderbuffer(I.RENDERBUFFER,d),this.current=d,this.dirty=!1}}class du extends ui{getDefault(){return null}set(d){if(d===this.current&&!this.dirty)return;const I=this.gl;I.bindTexture(I.TEXTURE_2D,d),this.current=d,this.dirty=!1}}class pu extends ui{getDefault(){return null}set(d){if(d===this.current&&!this.dirty)return;const I=this.gl;I.bindBuffer(I.ARRAY_BUFFER,d),this.current=d,this.dirty=!1}}class ql extends ui{getDefault(){return null}set(d){const I=this.gl;I.bindBuffer(I.ELEMENT_ARRAY_BUFFER,d),this.current=d,this.dirty=!1}}class mu extends ui{constructor(d){super(d),this.vao=d.extVertexArrayObject}getDefault(){return null}set(d){this.vao&&(d!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(d),this.current=d,this.dirty=!1)}}class Nn extends ui{getDefault(){return 4}set(d){if(d===this.current&&!this.dirty)return;const I=this.gl;I.pixelStorei(I.UNPACK_ALIGNMENT,d),this.current=d,this.dirty=!1}}class Fn extends ui{getDefault(){return!1}set(d){if(d===this.current&&!this.dirty)return;const I=this.gl;I.pixelStorei(I.UNPACK_PREMULTIPLY_ALPHA_WEBGL,d),this.current=d,this.dirty=!1}}class Bu extends ui{getDefault(){return!1}set(d){if(d===this.current&&!this.dirty)return;const I=this.gl;I.pixelStorei(I.UNPACK_FLIP_Y_WEBGL,d),this.current=d,this.dirty=!1}}class ja extends ui{constructor(d,I){super(d),this.context=d,this.parent=I}getDefault(){return null}}class pa extends ja{setDirty(){this.dirty=!0}set(d){if(d===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const I=this.gl;I.framebufferTexture2D(I.FRAMEBUFFER,I.COLOR_ATTACHMENT0,I.TEXTURE_2D,d,0),this.current=d,this.dirty=!1}}class Hl extends ja{set(d){if(d===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const I=this.gl;I.framebufferRenderbuffer(I.FRAMEBUFFER,I.DEPTH_ATTACHMENT,I.RENDERBUFFER,d),this.current=d,this.dirty=!1}}class ma{constructor(d,I,D,z){this.context=d,this.width=I,this.height=D;const W=d.gl,ne=this.framebuffer=W.createFramebuffer();if(this.colorAttachment=new pa(d,ne),z&&(this.depthAttachment=new Hl(d,ne)),W.checkFramebufferStatus(W.FRAMEBUFFER)!==W.FRAMEBUFFER_COMPLETE)throw new Error("Framebuffer is not complete")}destroy(){const d=this.context.gl,I=this.colorAttachment.get();if(I&&d.deleteTexture(I),this.depthAttachment){const D=this.depthAttachment.get();D&&d.deleteRenderbuffer(D)}d.deleteFramebuffer(this.framebuffer)}}class ko{constructor(d,I,D){this.blendFunction=d,this.blendColor=I,this.mask=D}}ko.Replace=[1,0],ko.disabled=new ko(ko.Replace,r.Color.transparent,[!1,!1,!1,!1]),ko.unblended=new ko(ko.Replace,r.Color.transparent,[!0,!0,!0,!0]),ko.alphaBlended=new ko([1,771],r.Color.transparent,[!0,!0,!0,!0]);class se{constructor(d){this.gl=d,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),this.clearColor=new ji(this),this.clearDepth=new ln(this),this.clearStencil=new In(this),this.colorMask=new ft(this),this.depthMask=new p(this),this.stencilMask=new Di(this),this.stencilFunc=new c(this),this.stencilOp=new F(this),this.stencilTest=new mn(this),this.depthRange=new $n(this),this.depthTest=new Ao(this),this.depthFunc=new re(this),this.blend=new Rr(this),this.blendFunc=new da(this),this.blendColor=new Na(this),this.blendEquation=new Mc(this),this.cullFace=new Al(this),this.cullFaceSide=new Hs(this),this.frontFace=new sc(this),this.program=new hu(this),this.activeTexture=new ah(this),this.viewport=new fu(this),this.bindFramebuffer=new lh(this),this.bindRenderbuffer=new Ru(this),this.bindTexture=new du(this),this.bindVertexBuffer=new pu(this),this.bindElementBuffer=new ql(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new mu(this),this.pixelStoreUnpack=new Nn(this),this.pixelStoreUnpackPremultiplyAlpha=new Fn(this),this.pixelStoreUnpackFlipY=new Bu(this),this.extTextureFilterAnisotropic=d.getExtension("EXT_texture_filter_anisotropic")||d.getExtension("MOZ_EXT_texture_filter_anisotropic")||d.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=d.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureHalfFloat=d.getExtension("OES_texture_half_float"),this.extTextureHalfFloat&&(d.getExtension("OES_texture_half_float_linear"),this.extRenderToTextureHalfFloat=d.getExtension("EXT_color_buffer_half_float")),this.extTimerQuery=d.getExtension("EXT_disjoint_timer_query"),this.maxTextureSize=d.getParameter(d.MAX_TEXTURE_SIZE)}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(d,I){return new bi(this,d,I)}createVertexBuffer(d,I,D){return new _i(this,d,I,D)}createRenderbuffer(d,I,D){const z=this.gl,W=z.createRenderbuffer();return this.bindRenderbuffer.set(W),z.renderbufferStorage(z.RENDERBUFFER,d,I,D),this.bindRenderbuffer.set(null),W}createFramebuffer(d,I,D){return new ma(this,d,I,D)}clear({color:d,depth:I}){const D=this.gl;let z=0;d&&(z|=D.COLOR_BUFFER_BIT,this.clearColor.set(d),this.colorMask.set([!0,!0,!0,!0])),I!==void 0&&(z|=D.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(I),this.depthMask.set(!0)),D.clear(z)}setCullFace(d){d.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(d.mode),this.frontFace.set(d.frontFace))}setDepthMode(d){d.func!==this.gl.ALWAYS||d.mask?(this.depthTest.set(!0),this.depthFunc.set(d.func),this.depthMask.set(d.mask),this.depthRange.set(d.range)):this.depthTest.set(!1)}setStencilMode(d){d.test.func!==this.gl.ALWAYS||d.mask?(this.stencilTest.set(!0),this.stencilMask.set(d.mask),this.stencilOp.set([d.fail,d.depthFail,d.pass]),this.stencilFunc.set({func:d.test.func,ref:d.ref,mask:d.test.mask})):this.stencilTest.set(!1)}setColorMode(d){v(d.blendFunction,ko.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(d.blendFunction),this.blendColor.set(d.blendColor)),this.colorMask.set(d.mask)}unbindVAO(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)}}class Ue{constructor(d,I,D){this.func=d,this.mask=I,this.range=D}}Ue.ReadOnly=!1,Ue.ReadWrite=!0,Ue.disabled=new Ue(519,Ue.ReadOnly,[0,1]);const At=7680;class Jt{constructor(d,I,D,z,W,ne){this.test=d,this.ref=I,this.mask=D,this.fail=z,this.depthFail=W,this.pass=ne}}Jt.disabled=new Jt({func:519,mask:0},0,0,At,At,At);class hi{constructor(d,I,D){this.enable=d,this.mode=I,this.frontFace=D}}let qi;function hn(B,d,I,D,z,W,ne){const pe=B.context,ye=pe.gl,ke=B.useProgram("collisionBox"),ze=[];let Qe=0,rt=0;for(let Nt=0;Nt<D.length;Nt++){const Pi=D[Nt],Ei=d.getTile(Pi),Vi=Ei.getBucket(I);if(!Vi)continue;let Ni=Pi.posMatrix;z[0]===0&&z[1]===0||(Ni=B.translatePosMatrix(Pi.posMatrix,Ei,z,W));const cn=ne?Vi.textCollisionBox:Vi.iconCollisionBox,zi=Vi.collisionCircleArray;if(zi.length>0){const Rn=r.create(),_n=Ni;r.mul(Rn,Vi.placementInvProjMatrix,B.transform.glCoordMatrix),r.mul(Rn,Rn,Vi.placementViewportMatrix),ze.push({circleArray:zi,circleOffset:rt,transform:_n,invTransform:Rn,coord:Pi}),Qe+=zi.length/4,rt=Qe}cn&&ke.draw(pe,ye.LINES,Ue.disabled,Jt.disabled,B.colorModeForRenderPass(),hi.disabled,Zs(Ni,B.transform,Ei),B.style.terrain&&B.style.terrain.getTerrainData(Pi),I.id,cn.layoutVertexBuffer,cn.indexBuffer,cn.segments,null,B.transform.zoom,null,null,cn.collisionVertexBuffer)}if(!ne||!ze.length)return;const Pt=B.useProgram("collisionCircle"),kt=new r.CollisionCircleLayoutArray;kt.resize(4*Qe),kt._trim();let Et=0;for(const Nt of ze)for(let Pi=0;Pi<Nt.circleArray.length/4;Pi++){const Ei=4*Pi,Vi=Nt.circleArray[Ei+0],Ni=Nt.circleArray[Ei+1],cn=Nt.circleArray[Ei+2],zi=Nt.circleArray[Ei+3];kt.emplace(Et++,Vi,Ni,cn,zi,0),kt.emplace(Et++,Vi,Ni,cn,zi,1),kt.emplace(Et++,Vi,Ni,cn,zi,2),kt.emplace(Et++,Vi,Ni,cn,zi,3)}(!qi||qi.length<2*Qe)&&(qi=function(Nt){const Pi=2*Nt,Ei=new r.QuadTriangleArray;Ei.resize(Pi),Ei._trim();for(let Vi=0;Vi<Pi;Vi++){const Ni=6*Vi;Ei.uint16[Ni+0]=4*Vi+0,Ei.uint16[Ni+1]=4*Vi+1,Ei.uint16[Ni+2]=4*Vi+2,Ei.uint16[Ni+3]=4*Vi+2,Ei.uint16[Ni+4]=4*Vi+3,Ei.uint16[Ni+5]=4*Vi+0}return Ei}(Qe));const si=pe.createIndexBuffer(qi,!0),fi=pe.createVertexBuffer(kt,r.collisionCircleLayout.members,!0);for(const Nt of ze){const Pi={u_matrix:Nt.transform,u_inv_matrix:Nt.invTransform,u_camera_to_center_distance:(xi=B.transform).cameraToCenterDistance,u_viewport_size:[xi.width,xi.height]};Pt.draw(pe,ye.TRIANGLES,Ue.disabled,Jt.disabled,B.colorModeForRenderPass(),hi.disabled,Pi,B.style.terrain&&B.style.terrain.getTerrainData(Nt.coord),I.id,fi,si,r.SegmentVector.simpleSegment(0,2*Nt.circleOffset,Nt.circleArray.length,Nt.circleArray.length/2),null,B.transform.zoom,null,null,null)}var xi;fi.destroy(),si.destroy()}hi.disabled=new hi(!1,1029,2305),hi.backCCW=new hi(!0,1029,2305);const Zn=r.identity(new Float32Array(16));function Ar(B,d,I,D,z,W){const{horizontalAlign:ne,verticalAlign:pe}=r.getAnchorAlignment(B),ye=-(ne-.5)*d,ke=-(pe-.5)*I,ze=r.evaluateVariableOffset(B,D);return new r.pointGeometry((ye/z+ze[0])*W,(ke/z+ze[1])*W)}function Nr(B,d,I,D,z,W,ne,pe,ye,ke,ze){const Qe=B.text.placedSymbolArray,rt=B.text.dynamicLayoutVertexArray,Pt=B.icon.dynamicLayoutVertexArray,kt={};rt.clear();for(let Et=0;Et<Qe.length;Et++){const si=Qe.get(Et),fi=B.allowVerticalPlacement&&!si.placedOrientation,xi=si.hidden||!si.crossTileID||fi?null:D[si.crossTileID];if(xi){const Nt=new r.pointGeometry(si.anchorX,si.anchorY),Pi=Kt(Nt,I?ne:W,ze),Ei=di(z.cameraToCenterDistance,Pi.signedDistanceFromCamera);let Vi=r.evaluateSizeForFeature(B.textSizeData,ye,si)*Ei/r.ONE_EM;I&&(Vi*=B.tilePixelRatio/pe);const{width:Ni,height:cn,anchor:zi,textOffset:Rn,textBoxScale:_n}=xi,qn=Ar(zi,Ni,cn,Rn,_n,Vi),Er=I?Kt(Nt.add(qn),W,ze).point:Pi.point.add(d?qn.rotate(-z.angle):qn),Mr=B.allowVerticalPlacement&&si.placedOrientation===r.WritingMode.vertical?Math.PI/2:0;for(let j=0;j<si.numGlyphs;j++)r.addDynamicAttributes(rt,Er,Mr);ke&&si.associatedIconIndex>=0&&(kt[si.associatedIconIndex]={shiftedAnchor:Er,angle:Mr})}else zn(si.numGlyphs,rt)}if(ke){Pt.clear();const Et=B.icon.placedSymbolArray;for(let si=0;si<Et.length;si++){const fi=Et.get(si);if(fi.hidden)zn(fi.numGlyphs,Pt);else{const xi=kt[si];if(xi)for(let Nt=0;Nt<fi.numGlyphs;Nt++)r.addDynamicAttributes(Pt,xi.shiftedAnchor,xi.angle);else zn(fi.numGlyphs,Pt)}}B.icon.dynamicLayoutVertexBuffer.updateData(Pt)}B.text.dynamicLayoutVertexBuffer.updateData(rt)}function Wr(B,d,I){return I.iconsInText&&d?"symbolTextAndIcon":B?"symbolSDF":"symbolIcon"}function eo(B,d,I,D,z,W,ne,pe,ye,ke,ze,Qe){const rt=B.context,Pt=rt.gl,kt=B.transform,Et=pe==="map",si=ye==="map",fi=pe!=="viewport"&&I.layout.get("symbol-placement")!=="point",xi=Et&&!si&&!fi,Nt=!I.layout.get("symbol-sort-key").isConstant();let Pi=!1;const Ei=B.depthModeForSublayer(0,Ue.ReadOnly),Vi=I.layout.get("text-variable-anchor"),Ni=[];for(const cn of D){const zi=d.getTile(cn),Rn=zi.getBucket(I);if(!Rn)continue;const _n=z?Rn.text:Rn.icon;if(!_n||!_n.segments.get().length)continue;const qn=_n.programConfigurations.get(I.id),Er=z||Rn.sdfIcons,Mr=z?Rn.textSizeData:Rn.iconSizeData,j=si||kt.pitch!==0,K=B.useProgram(Wr(Er,z,Rn),qn),ue=r.evaluateSizeForZoom(Mr,kt.zoom),be=B.style.terrain&&B.style.terrain.getTerrainData(cn);let je,Ke,et,at,pt=[0,0],St=null;if(z){if(Ke=zi.glyphAtlasTexture,et=Pt.LINEAR,je=zi.glyphAtlasTexture.size,Rn.iconsInText){pt=zi.imageAtlasTexture.size,St=zi.imageAtlasTexture;const Dn=Mr.kind==="composite"||Mr.kind==="camera";at=j||B.options.rotating||B.options.zooming||Dn?Pt.LINEAR:Pt.NEAREST}}else{const Dn=I.layout.get("icon-size").constantOr(0)!==1||Rn.iconsNeedLinear;Ke=zi.imageAtlasTexture,et=Er||B.options.rotating||B.options.zooming||Dn||j?Pt.LINEAR:Pt.NEAREST,je=zi.imageAtlasTexture.size}const ai=Sr(zi,1,B.transform.zoom),Ai=$e(cn.posMatrix,si,Et,B.transform,ai),wi=_t(cn.posMatrix,si,Et,B.transform,ai),pi=Vi&&Rn.hasTextData(),rn=I.layout.get("icon-text-fit")!=="none"&&pi&&Rn.hasIconData();if(fi){const Dn=B.style.terrain?(kr,On)=>B.style.terrain.getElevation(cn,kr,On):null,Cn=I.layout.get("text-rotation-alignment")==="map";Ln(Rn,cn.posMatrix,B,z,Ai,wi,si,ke,Cn,Dn)}const Oi=B.translatePosMatrix(cn.posMatrix,zi,W,ne),Wt=fi||z&&Vi||rn?Zn:Ai,ii=B.translatePosMatrix(wi,zi,W,ne,!0),Hi=Er&&I.paint.get(z?"text-halo-width":"icon-halo-width").constantOr(1)!==0;let Ji;Ji=Er?Rn.iconsInText?nt(Mr.kind,ue,xi,si,B,Oi,Wt,ii,je,pt):Oe(Mr.kind,ue,xi,si,B,Oi,Wt,ii,z,je,!0):ge(Mr.kind,ue,xi,si,B,Oi,Wt,ii,z,je);const Ui={program:K,buffers:_n,uniformValues:Ji,atlasTexture:Ke,atlasTextureIcon:St,atlasInterpolation:et,atlasInterpolationIcon:at,isSDF:Er,hasHalo:Hi};if(Nt&&Rn.canOverlap){Pi=!0;const Dn=_n.segments.get();for(const Cn of Dn)Ni.push({segments:new r.SegmentVector([Cn]),sortKey:Cn.sortKey,state:Ui,terrainData:be})}else Ni.push({segments:_n.segments,sortKey:0,state:Ui,terrainData:be})}Pi&&Ni.sort((cn,zi)=>cn.sortKey-zi.sortKey);for(const cn of Ni){const zi=cn.state;if(rt.activeTexture.set(Pt.TEXTURE0),zi.atlasTexture.bind(zi.atlasInterpolation,Pt.CLAMP_TO_EDGE),zi.atlasTextureIcon&&(rt.activeTexture.set(Pt.TEXTURE1),zi.atlasTextureIcon&&zi.atlasTextureIcon.bind(zi.atlasInterpolationIcon,Pt.CLAMP_TO_EDGE)),zi.isSDF){const Rn=zi.uniformValues;zi.hasHalo&&(Rn.u_is_halo=1,Bo(zi.buffers,cn.segments,I,B,zi.program,Ei,ze,Qe,Rn,cn.terrainData)),Rn.u_is_halo=0}Bo(zi.buffers,cn.segments,I,B,zi.program,Ei,ze,Qe,zi.uniformValues,cn.terrainData)}}function Bo(B,d,I,D,z,W,ne,pe,ye,ke){const ze=D.context;z.draw(ze,ze.gl.TRIANGLES,W,ne,pe,hi.disabled,ye,ke,I.id,B.layoutVertexBuffer,B.indexBuffer,d,I.paint,D.transform.zoom,B.programConfigurations.get(I.id),B.dynamicLayoutVertexBuffer,B.opacityVertexBuffer)}function qo(B,d,I,D,z,W,ne){const pe=B.context.gl,ye=I.paint.get("fill-pattern"),ke=ye&&ye.constantOr(1),ze=I.getCrossfadeParameters();let Qe,rt,Pt,kt,Et;ne?(rt=ke&&!I.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",Qe=pe.LINES):(rt=ke?"fillPattern":"fill",Qe=pe.TRIANGLES);for(const si of D){const fi=d.getTile(si);if(ke&&!fi.patternsLoaded())continue;const xi=fi.getBucket(I);if(!xi)continue;const Nt=xi.programConfigurations.get(I.id),Pi=B.useProgram(rt,Nt),Ei=B.style.terrain&&B.style.terrain.getTerrainData(si);ke&&(B.context.activeTexture.set(pe.TEXTURE0),fi.imageAtlasTexture.bind(pe.LINEAR,pe.CLAMP_TO_EDGE),Nt.updatePaintBuffers(ze));const Vi=ye.constantOr(null);if(Vi&&fi.imageAtlas){const zi=fi.imageAtlas,Rn=zi.patternPositions[Vi.to.toString()],_n=zi.patternPositions[Vi.from.toString()];Rn&&_n&&Nt.setConstantPatternPositions(Rn,_n)}const Ni=Ei?si:null,cn=B.translatePosMatrix(Ni?Ni.posMatrix:si.posMatrix,fi,I.paint.get("fill-translate"),I.paint.get("fill-translate-anchor"));if(ne){kt=xi.indexBuffer2,Et=xi.segments2;const zi=[pe.drawingBufferWidth,pe.drawingBufferHeight];Pt=rt==="fillOutlinePattern"&&ke?Ca(cn,B,ze,fi,zi):_s(cn,zi)}else kt=xi.indexBuffer,Et=xi.segments,Pt=ke?Vs(cn,B,ze,fi):ts(cn);Pi.draw(B.context,Qe,z,B.stencilModeForClipping(si),W,hi.disabled,Pt,Ei,I.id,xi.layoutVertexBuffer,kt,Et,I.paint,B.transform.zoom,Nt)}}function Wo(B,d,I,D,z,W,ne){const pe=B.context,ye=pe.gl,ke=I.paint.get("fill-extrusion-pattern"),ze=ke.constantOr(1),Qe=I.getCrossfadeParameters(),rt=I.paint.get("fill-extrusion-opacity");for(const Pt of D){const kt=d.getTile(Pt),Et=kt.getBucket(I);if(!Et)continue;const si=B.style.terrain&&B.style.terrain.getTerrainData(Pt),fi=Et.programConfigurations.get(I.id),xi=B.useProgram(ze?"fillExtrusionPattern":"fillExtrusion",fi);ze&&(B.context.activeTexture.set(ye.TEXTURE0),kt.imageAtlasTexture.bind(ye.LINEAR,ye.CLAMP_TO_EDGE),fi.updatePaintBuffers(Qe));const Nt=ke.constantOr(null);if(Nt&&kt.imageAtlas){const Ni=kt.imageAtlas,cn=Ni.patternPositions[Nt.to.toString()],zi=Ni.patternPositions[Nt.from.toString()];cn&&zi&&fi.setConstantPatternPositions(cn,zi)}const Pi=B.translatePosMatrix(Pt.posMatrix,kt,I.paint.get("fill-extrusion-translate"),I.paint.get("fill-extrusion-translate-anchor")),Ei=I.paint.get("fill-extrusion-vertical-gradient"),Vi=ze?Sa(Pi,B,Ei,rt,Pt,Qe,kt):Ro(Pi,B,Ei,rt);xi.draw(pe,pe.gl.TRIANGLES,z,W,ne,hi.backCCW,Vi,si,I.id,Et.layoutVertexBuffer,Et.indexBuffer,Et.segments,I.paint,B.transform.zoom,fi,B.style.terrain&&Et.centroidVertexBuffer)}}function Cs(B,d,I,D,z,W,ne){const pe=B.context,ye=pe.gl,ke=I.fbo;if(!ke)return;const ze=B.useProgram("hillshade"),Qe=B.style.terrain&&B.style.terrain.getTerrainData(d);pe.activeTexture.set(ye.TEXTURE0),ye.bindTexture(ye.TEXTURE_2D,ke.colorAttachment.get()),ze.draw(pe,ye.TRIANGLES,z,W,ne,hi.disabled,((rt,Pt,kt,Et)=>{const si=kt.paint.get("hillshade-shadow-color"),fi=kt.paint.get("hillshade-highlight-color"),xi=kt.paint.get("hillshade-accent-color");let Nt=kt.paint.get("hillshade-illumination-direction")*(Math.PI/180);kt.paint.get("hillshade-illumination-anchor")==="viewport"&&(Nt-=rt.transform.angle);const Pi=!rt.options.moving;return{u_matrix:Et?Et.posMatrix:rt.transform.calculatePosMatrix(Pt.tileID.toUnwrapped(),Pi),u_image:0,u_latrange:uu(0,Pt.tileID),u_light:[kt.paint.get("hillshade-exaggeration"),Nt],u_shadow:si,u_highlight:fi,u_accent:xi}})(B,I,D,Qe?d:null),Qe,D.id,B.rasterBoundsBuffer,B.quadTriangleIndexBuffer,B.rasterBoundsSegments)}function ds(B,d,I,D,z,W){const ne=B.context,pe=ne.gl,ye=d.dem;if(ye&&ye.data){const ke=ye.dim,ze=ye.stride,Qe=ye.getPixels();if(ne.activeTexture.set(pe.TEXTURE1),ne.pixelStoreUnpackPremultiplyAlpha.set(!1),d.demTexture=d.demTexture||B.getTileTexture(ze),d.demTexture){const Pt=d.demTexture;Pt.update(Qe,{premultiply:!1}),Pt.bind(pe.NEAREST,pe.CLAMP_TO_EDGE)}else d.demTexture=new T(ne,Qe,pe.RGBA,{premultiply:!1}),d.demTexture.bind(pe.NEAREST,pe.CLAMP_TO_EDGE);ne.activeTexture.set(pe.TEXTURE0);let rt=d.fbo;if(!rt){const Pt=new T(ne,{width:ke,height:ke,data:null},pe.RGBA);Pt.bind(pe.LINEAR,pe.CLAMP_TO_EDGE),rt=d.fbo=ne.createFramebuffer(ke,ke,!0),rt.colorAttachment.set(Pt.texture)}ne.bindFramebuffer.set(rt.framebuffer),ne.viewport.set([0,0,ke,ke]),B.useProgram("hillshadePrepare").draw(ne,pe.TRIANGLES,D,z,W,hi.disabled,((Pt,kt)=>{const Et=kt.stride,si=r.create();return r.ortho(si,0,r.EXTENT,-r.EXTENT,0,0,1),r.translate(si,si,[0,-r.EXTENT,0]),{u_matrix:si,u_image:1,u_dimension:[Et,Et],u_zoom:Pt.overscaledZ,u_unpack:kt.getUnpackVector()}})(d.tileID,ye),null,I.id,B.rasterBoundsBuffer,B.quadTriangleIndexBuffer,B.rasterBoundsSegments),d.needsHillshadePrepare=!1}}function jr(B,d,I,D,z,W){const ne=D.paint.get("raster-fade-duration");if(!W&&ne>0){const pe=r.exported.now(),ye=(pe-B.timeAdded)/ne,ke=d?(pe-d.timeAdded)/ne:-1,ze=I.getSource(),Qe=z.coveringZoomLevel({tileSize:ze.tileSize,roundZoom:ze.roundZoom}),rt=!d||Math.abs(d.tileID.overscaledZ-Qe)>Math.abs(B.tileID.overscaledZ-Qe),Pt=rt&&B.refreshedUponExpiration?1:r.clamp(rt?ye:1-ke,0,1);return B.refreshedUponExpiration&&ye>=1&&(B.refreshedUponExpiration=!1),d?{opacity:1,mix:1-Pt}:{opacity:Pt,mix:0}}return{opacity:1,mix:0}}const Es=new r.Color(1,0,0,1),vs=new r.Color(0,1,0,1),Gl=new r.Color(0,0,1,1),kl=new r.Color(1,0,1,1),zu=new r.Color(0,1,1,1);function Ia(B,d,I,D){nl(B,0,d+I/2,B.transform.width,I,D)}function Sl(B,d,I,D){nl(B,d-I/2,0,I,B.transform.height,D)}function nl(B,d,I,D,z,W){const ne=B.context,pe=ne.gl;pe.enable(pe.SCISSOR_TEST),pe.scissor(d*B.pixelRatio,I*B.pixelRatio,D*B.pixelRatio,z*B.pixelRatio),ne.clear({color:W}),pe.disable(pe.SCISSOR_TEST)}function Nu(B,d,I){const D=B.context,z=D.gl,W=I.posMatrix,ne=B.useProgram("debug"),pe=Ue.disabled,ye=Jt.disabled,ke=B.colorModeForRenderPass(),ze="$debug",Qe=B.style.terrain&&B.style.terrain.getTerrainData(I);D.activeTexture.set(z.TEXTURE0),B.emptyTexture.bind(z.LINEAR,z.CLAMP_TO_EDGE);const rt=d.getTileByID(I.key).latestRawTileData,Pt=Math.floor((rt&&rt.byteLength||0)/1024),kt=d.getTile(I).tileSize,Et=512/Math.min(kt,512)*(I.overscaledZ/B.transform.zoom)*.5;let si=I.canonical.toString();I.overscaledZ!==I.canonical.z&&(si+=` => ${I.overscaledZ}`),function(fi,xi){fi.initDebugOverlayCanvas();const Nt=fi.debugOverlayCanvas,Pi=fi.context.gl,Ei=fi.debugOverlayCanvas.getContext("2d");Ei.clearRect(0,0,Nt.width,Nt.height),Ei.shadowColor="white",Ei.shadowBlur=2,Ei.lineWidth=1.5,Ei.strokeStyle="white",Ei.textBaseline="top",Ei.font="bold 36px Open Sans, sans-serif",Ei.fillText(xi,5,5),Ei.strokeText(xi,5,5),fi.debugOverlayTexture.update(Nt),fi.debugOverlayTexture.bind(Pi.LINEAR,Pi.CLAMP_TO_EDGE)}(B,`${si} ${Pt}kB`),ne.draw(D,z.TRIANGLES,pe,ye,ko.alphaBlended,hi.disabled,qs(W,r.Color.transparent,Et),null,ze,B.debugBuffer,B.quadTriangleIndexBuffer,B.debugSegments),ne.draw(D,z.LINE_STRIP,pe,ye,ke,hi.disabled,qs(W,r.Color.red),Qe,ze,B.debugBuffer,B.tileBorderIndexBuffer,B.debugSegments)}function Fs(B,d,I){const D=B.context,z=D.gl,W=B.colorModeForRenderPass(),ne=new Ue(z.LEQUAL,Ue.ReadWrite,B.depthRangeFor3D),pe=B.useProgram("terrain"),ye=d.getTerrainMesh(),ke=d.getTerrainData(I.tileID);D.bindFramebuffer.set(null),D.viewport.set([0,0,B.width,B.height]),D.activeTexture.set(z.TEXTURE0),z.bindTexture(z.TEXTURE_2D,d.getRTTFramebuffer().colorAttachment.get());const ze=B.transform.calculatePosMatrix(I.tileID.toUnwrapped());pe.draw(D,z.TRIANGLES,ne,Jt.disabled,W,hi.backCCW,{u_matrix:ze,u_texture:0},ke,"terrain",ye.vertexBuffer,ye.indexBuffer,ye.segments)}function gu(B,d,I,D){const z=B.context,W=I.tileSize*d.qualityFactor;I.textures[D]||(I.textures[D]=B.getTileTexture(W)||new T(z,{width:W,height:W,data:null},z.gl.RGBA),I.textures[D].bind(z.gl.LINEAR,z.gl.CLAMP_TO_EDGE),D===0&&d.sourceCache.renderHistory.unshift(I.tileID.key));const ne=d.getRTTFramebuffer();ne.colorAttachment.set(I.textures[D].texture),z.bindFramebuffer.set(ne.framebuffer),z.viewport.set([0,0,W,W])}class Wl{constructor(d){this._coordsDescendingInv={},this._coordsDescendingInvStr={},this.painter=d,this._renderToTexture={background:!0,fill:!0,line:!0,raster:!0},this._coordsDescendingInv={},this._coordsDescendingInvStr={},this._stacks=[],this._prevType=null,this._rerender={},this._renderableTiles=d.style.terrain.sourceCache.getRenderableTiles(),this._init()}_init(){const d=this.painter.style,I=d.terrain;for(const D in d.sourceCaches){this._coordsDescendingInv[D]={};const z=d.sourceCaches[D].getVisibleCoordinates();for(const W of z){const ne=I.sourceCache.getTerrainCoords(W);for(const pe in ne)this._coordsDescendingInv[D][pe]||(this._coordsDescendingInv[D][pe]=[]),this._coordsDescendingInv[D][pe].push(ne[pe])}}for(const D of d._order){const z=d._layers[D],W=z.source;if(this._renderToTexture[z.type]&&!this._coordsDescendingInvStr[W]){this._coordsDescendingInvStr[W]={};for(const ne in this._coordsDescendingInv[W])this._coordsDescendingInvStr[W][ne]=this._coordsDescendingInv[W][ne].map(pe=>pe.key).sort().join()}}return this._renderableTiles.forEach(D=>{for(const z in this._coordsDescendingInvStr){const W=this._coordsDescendingInvStr[z][D.tileID.key];W&&W!==D.textureCoords[z]&&D.clearTextures(this.painter),I.needsRerender(z,D.tileID)&&D.clearTextures(this.painter)}this._rerender[D.tileID.key]=!D.textures.length}),I.clearRerenderCache(),I.sourceCache.removeOutdated(this.painter),this}renderLayer(d){const I=d.type,D=this.painter,z=D.style._order,W=D.currentLayer,ne=W+1===z.length;if(this._renderToTexture[I]&&(this._prevType&&this._renderToTexture[this._prevType]||this._stacks.push([]),this._prevType=I,this._stacks[this._stacks.length-1].push(z[W]),!ne))return!0;if(this._renderToTexture[this._prevType]||I==="hillshade"||this._renderToTexture[I]&&ne){this._prevType=I;const pe=this._stacks.length-1,ye=this._stacks[pe]||[];for(const ke of this._renderableTiles){if(gu(D,D.style.terrain,ke,pe),this._rerender[ke.tileID.key]){D.context.clear({color:r.Color.transparent});for(let ze=0;ze<ye.length;ze++){const Qe=D.style._layers[ye[ze]],rt=Qe.source?this._coordsDescendingInv[Qe.source][ke.tileID.key]:[ke.tileID];D._renderTileClippingMasks(Qe,rt),D.renderLayer(D,D.style.sourceCaches[Qe.source],Qe,rt),Qe.source&&(ke.textureCoords[Qe.source]=this._coordsDescendingInvStr[Qe.source][ke.tileID.key])}}Fs(D,D.style.terrain,ke)}if(I==="hillshade"){this._stacks.push([z[W]]);for(const ke of this._renderableTiles){const ze=this._coordsDescendingInv[d.source][ke.tileID.key];gu(D,D.style.terrain,ke,this._stacks.length-1),D.context.clear({color:r.Color.transparent}),D._renderTileClippingMasks(d,ze),D.renderLayer(D,D.style.sourceCaches[d.source],d,ze),Fs(D,D.style.terrain,ke)}return!0}return this._renderToTexture[I]}return!1}}const Ua={symbol:function(B,d,I,D,z){if(B.renderPass!=="translucent")return;const W=Jt.disabled,ne=B.colorModeForRenderPass();I.layout.get("text-variable-anchor")&&function(pe,ye,ke,ze,Qe,rt,Pt){const kt=ye.transform,Et=Qe==="map",si=rt==="map";for(const fi of pe){const xi=ze.getTile(fi),Nt=xi.getBucket(ke);if(!Nt||!Nt.text||!Nt.text.segments.get().length)continue;const Pi=r.evaluateSizeForZoom(Nt.textSizeData,kt.zoom),Ei=Sr(xi,1,ye.transform.zoom),Vi=$e(fi.posMatrix,si,Et,ye.transform,Ei),Ni=ke.layout.get("icon-text-fit")!=="none"&&Nt.hasIconData();if(Pi){const cn=Math.pow(2,kt.zoom-xi.tileID.overscaledZ);Nr(Nt,Et,si,Pt,kt,Vi,fi.posMatrix,cn,Pi,Ni,ye.style.terrain?(zi,Rn)=>ye.style.terrain.getElevation(fi,zi,Rn):null)}}}(D,B,I,d,I.layout.get("text-rotation-alignment"),I.layout.get("text-pitch-alignment"),z),I.paint.get("icon-opacity").constantOr(1)!==0&&eo(B,d,I,D,!1,I.paint.get("icon-translate"),I.paint.get("icon-translate-anchor"),I.layout.get("icon-rotation-alignment"),I.layout.get("icon-pitch-alignment"),I.layout.get("icon-keep-upright"),W,ne),I.paint.get("text-opacity").constantOr(1)!==0&&eo(B,d,I,D,!0,I.paint.get("text-translate"),I.paint.get("text-translate-anchor"),I.layout.get("text-rotation-alignment"),I.layout.get("text-pitch-alignment"),I.layout.get("text-keep-upright"),W,ne),d.map.showCollisionBoxes&&(hn(B,d,I,D,I.paint.get("text-translate"),I.paint.get("text-translate-anchor"),!0),hn(B,d,I,D,I.paint.get("icon-translate"),I.paint.get("icon-translate-anchor"),!1))},circle:function(B,d,I,D){if(B.renderPass!=="translucent")return;const z=I.paint.get("circle-opacity"),W=I.paint.get("circle-stroke-width"),ne=I.paint.get("circle-stroke-opacity"),pe=!I.layout.get("circle-sort-key").isConstant();if(z.constantOr(1)===0&&(W.constantOr(1)===0||ne.constantOr(1)===0))return;const ye=B.context,ke=ye.gl,ze=B.depthModeForSublayer(0,Ue.ReadOnly),Qe=Jt.disabled,rt=B.colorModeForRenderPass(),Pt=[];for(let kt=0;kt<D.length;kt++){const Et=D[kt],si=d.getTile(Et),fi=si.getBucket(I);if(!fi)continue;const xi=fi.programConfigurations.get(I.id),Nt=B.useProgram("circle",xi),Pi=fi.layoutVertexBuffer,Ei=fi.indexBuffer,Vi=B.style.terrain&&B.style.terrain.getTerrainData(Et),Ni={programConfiguration:xi,program:Nt,layoutVertexBuffer:Pi,indexBuffer:Ei,uniformValues:Ss(B,Et,si,I),terrainData:Vi};if(pe){const cn=fi.segments.get();for(const zi of cn)Pt.push({segments:new r.SegmentVector([zi]),sortKey:zi.sortKey,state:Ni})}else Pt.push({segments:fi.segments,sortKey:0,state:Ni})}pe&&Pt.sort((kt,Et)=>kt.sortKey-Et.sortKey);for(const kt of Pt){const{programConfiguration:Et,program:si,layoutVertexBuffer:fi,indexBuffer:xi,uniformValues:Nt,terrainData:Pi}=kt.state;si.draw(ye,ke.TRIANGLES,ze,Qe,rt,hi.disabled,Nt,Pi,I.id,fi,xi,kt.segments,I.paint,B.transform.zoom,Et)}},heatmap:function(B,d,I,D){if(I.paint.get("heatmap-opacity")!==0)if(B.renderPass==="offscreen"){const z=B.context,W=z.gl,ne=Jt.disabled,pe=new ko([W.ONE,W.ONE],r.Color.transparent,[!0,!0,!0,!0]);(function(ye,ke,ze){const Qe=ye.gl;ye.activeTexture.set(Qe.TEXTURE1),ye.viewport.set([0,0,ke.width/4,ke.height/4]);let rt=ze.heatmapFbo;if(rt)Qe.bindTexture(Qe.TEXTURE_2D,rt.colorAttachment.get()),ye.bindFramebuffer.set(rt.framebuffer);else{const Pt=Qe.createTexture();Qe.bindTexture(Qe.TEXTURE_2D,Pt),Qe.texParameteri(Qe.TEXTURE_2D,Qe.TEXTURE_WRAP_S,Qe.CLAMP_TO_EDGE),Qe.texParameteri(Qe.TEXTURE_2D,Qe.TEXTURE_WRAP_T,Qe.CLAMP_TO_EDGE),Qe.texParameteri(Qe.TEXTURE_2D,Qe.TEXTURE_MIN_FILTER,Qe.LINEAR),Qe.texParameteri(Qe.TEXTURE_2D,Qe.TEXTURE_MAG_FILTER,Qe.LINEAR),rt=ze.heatmapFbo=ye.createFramebuffer(ke.width/4,ke.height/4,!1),function(kt,Et,si,fi){const xi=kt.gl;xi.texImage2D(xi.TEXTURE_2D,0,xi.RGBA,Et.width/4,Et.height/4,0,xi.RGBA,kt.extRenderToTextureHalfFloat?kt.extTextureHalfFloat.HALF_FLOAT_OES:xi.UNSIGNED_BYTE,null),fi.colorAttachment.set(si)}(ye,ke,Pt,rt)}})(z,B,I),z.clear({color:r.Color.transparent});for(let ye=0;ye<D.length;ye++){const ke=D[ye];if(d.hasRenderableParent(ke))continue;const ze=d.getTile(ke),Qe=ze.getBucket(I);if(!Qe)continue;const rt=Qe.programConfigurations.get(I.id),Pt=B.useProgram("heatmap",rt),{zoom:kt}=B.transform;Pt.draw(z,W.TRIANGLES,Ue.disabled,ne,pe,hi.disabled,wl(ke.posMatrix,ze,kt,I.paint.get("heatmap-intensity")),null,I.id,Qe.layoutVertexBuffer,Qe.indexBuffer,Qe.segments,I.paint,B.transform.zoom,rt)}z.viewport.set([0,0,B.width,B.height])}else B.renderPass==="translucent"&&(B.context.setColorMode(B.colorModeForRenderPass()),function(z,W){const ne=z.context,pe=ne.gl,ye=W.heatmapFbo;if(!ye)return;ne.activeTexture.set(pe.TEXTURE0),pe.bindTexture(pe.TEXTURE_2D,ye.colorAttachment.get()),ne.activeTexture.set(pe.TEXTURE1);let ke=W.colorRampTexture;ke||(ke=W.colorRampTexture=new T(ne,W.colorRamp,pe.RGBA)),ke.bind(pe.LINEAR,pe.CLAMP_TO_EDGE),z.useProgram("heatmapTexture").draw(ne,pe.TRIANGLES,Ue.disabled,Jt.disabled,z.colorModeForRenderPass(),hi.disabled,((ze,Qe,rt,Pt)=>{const kt=r.create();r.ortho(kt,0,ze.width,ze.height,0,0,1);const Et=ze.context.gl;return{u_matrix:kt,u_world:[Et.drawingBufferWidth,Et.drawingBufferHeight],u_image:0,u_color_ramp:1,u_opacity:Qe.paint.get("heatmap-opacity")}})(z,W),null,W.id,z.viewportBuffer,z.quadTriangleIndexBuffer,z.viewportSegments,W.paint,z.transform.zoom)}(B,I))},line:function(B,d,I,D){if(B.renderPass!=="translucent")return;const z=I.paint.get("line-opacity"),W=I.paint.get("line-width");if(z.constantOr(1)===0||W.constantOr(1)===0)return;const ne=B.depthModeForSublayer(0,Ue.ReadOnly),pe=B.colorModeForRenderPass(),ye=I.paint.get("line-dasharray"),ke=I.paint.get("line-pattern"),ze=ke.constantOr(1),Qe=I.paint.get("line-gradient"),rt=I.getCrossfadeParameters(),Pt=ze?"linePattern":ye?"lineSDF":Qe?"lineGradient":"line",kt=B.context,Et=kt.gl;let si=!0;for(const fi of D){const xi=d.getTile(fi);if(ze&&!xi.patternsLoaded())continue;const Nt=xi.getBucket(I);if(!Nt)continue;const Pi=Nt.programConfigurations.get(I.id),Ei=B.context.program.get(),Vi=B.useProgram(Pt,Pi),Ni=si||Vi.program!==Ei,cn=B.style.terrain&&B.style.terrain.getTerrainData(fi),zi=ke.constantOr(null);if(zi&&xi.imageAtlas){const qn=xi.imageAtlas,Er=qn.patternPositions[zi.to.toString()],Mr=qn.patternPositions[zi.from.toString()];Er&&Mr&&Pi.setConstantPatternPositions(Er,Mr)}const Rn=cn?fi:null,_n=ze?ha(B,xi,I,rt,Rn):ye?fa(B,xi,I,ye,rt,Rn):Qe?cu(B,xi,I,Nt.lineClipsArray.length,Rn):xl(B,xi,I,Rn);if(ze)kt.activeTexture.set(Et.TEXTURE0),xi.imageAtlasTexture.bind(Et.LINEAR,Et.CLAMP_TO_EDGE),Pi.updatePaintBuffers(rt);else if(ye&&(Ni||B.lineAtlas.dirty))kt.activeTexture.set(Et.TEXTURE0),B.lineAtlas.bind(kt);else if(Qe){const qn=Nt.gradients[I.id];let Er=qn.texture;if(I.gradientVersion!==qn.version){let Mr=256;if(I.stepInterpolant){const j=d.getSource().maxzoom,K=fi.canonical.z===j?Math.ceil(1<<B.transform.maxZoom-fi.canonical.z):1;Mr=r.clamp(r.nextPowerOfTwo(Nt.maxLineLength/r.EXTENT*1024*K),256,kt.maxTextureSize)}qn.gradient=r.renderColorRamp({expression:I.gradientExpression(),evaluationKey:"lineProgress",resolution:Mr,image:qn.gradient||void 0,clips:Nt.lineClipsArray}),qn.texture?qn.texture.update(qn.gradient):qn.texture=new T(kt,qn.gradient,Et.RGBA),qn.version=I.gradientVersion,Er=qn.texture}kt.activeTexture.set(Et.TEXTURE0),Er.bind(I.stepInterpolant?Et.NEAREST:Et.LINEAR,Et.CLAMP_TO_EDGE)}Vi.draw(kt,Et.TRIANGLES,ne,B.stencilModeForClipping(fi),pe,hi.disabled,_n,cn,I.id,Nt.layoutVertexBuffer,Nt.indexBuffer,Nt.segments,I.paint,B.transform.zoom,Pi,Nt.layoutVertexBuffer2),si=!1}},fill:function(B,d,I,D){const z=I.paint.get("fill-color"),W=I.paint.get("fill-opacity");if(W.constantOr(1)===0)return;const ne=B.colorModeForRenderPass(),pe=I.paint.get("fill-pattern"),ye=B.opaquePassEnabledForLayer()&&!pe.constantOr(1)&&z.constantOr(r.Color.transparent).a===1&&W.constantOr(0)===1?"opaque":"translucent";if(B.renderPass===ye){const ke=B.depthModeForSublayer(1,B.renderPass==="opaque"?Ue.ReadWrite:Ue.ReadOnly);qo(B,d,I,D,ke,ne,!1)}if(B.renderPass==="translucent"&&I.paint.get("fill-antialias")){const ke=B.depthModeForSublayer(I.getPaintProperty("fill-outline-color")?2:0,Ue.ReadOnly);qo(B,d,I,D,ke,ne,!0)}},"fill-extrusion":function(B,d,I,D){const z=I.paint.get("fill-extrusion-opacity");if(z!==0&&B.renderPass==="translucent"){const W=new Ue(B.context.gl.LEQUAL,Ue.ReadWrite,B.depthRangeFor3D);if(z!==1||I.paint.get("fill-extrusion-pattern").constantOr(1))Wo(B,d,I,D,W,Jt.disabled,ko.disabled),Wo(B,d,I,D,W,B.stencilModeFor3D(),B.colorModeForRenderPass());else{const ne=B.colorModeForRenderPass();Wo(B,d,I,D,W,Jt.disabled,ne)}}},hillshade:function(B,d,I,D){if(B.renderPass!=="offscreen"&&B.renderPass!=="translucent")return;const z=B.context,W=B.depthModeForSublayer(0,Ue.ReadOnly),ne=B.colorModeForRenderPass(),[pe,ye]=B.renderPass==="translucent"?B.stencilConfigForOverlap(D):[{},D];for(const ke of ye){const ze=d.getTile(ke);ze.needsHillshadePrepare!==void 0&&ze.needsHillshadePrepare&&B.renderPass==="offscreen"?ds(B,ze,I,W,Jt.disabled,ne):B.renderPass==="translucent"&&Cs(B,ke,ze,I,W,pe[ke.overscaledZ],ne)}z.viewport.set([0,0,B.width,B.height])},raster:function(B,d,I,D){if(B.renderPass!=="translucent"||I.paint.get("raster-opacity")===0||!D.length)return;const z=B.context,W=z.gl,ne=d.getSource(),pe=B.useProgram("raster"),ye=B.colorModeForRenderPass(),[ke,ze]=ne instanceof we?[{},D]:B.stencilConfigForOverlap(D),Qe=ze[ze.length-1].overscaledZ,rt=!B.options.moving;for(const Pt of ze){const kt=B.depthModeForSublayer(Pt.overscaledZ-Qe,I.paint.get("raster-opacity")===1?Ue.ReadWrite:Ue.ReadOnly,W.LESS),Et=d.getTile(Pt);Et.registerFadeDuration(I.paint.get("raster-fade-duration"));const si=d.findLoadedParent(Pt,0),fi=jr(Et,si,d,I,B.transform,B.style.terrain);let xi,Nt;const Pi=I.paint.get("raster-resampling")==="nearest"?W.NEAREST:W.LINEAR;z.activeTexture.set(W.TEXTURE0),Et.texture.bind(Pi,W.CLAMP_TO_EDGE,W.LINEAR_MIPMAP_NEAREST),z.activeTexture.set(W.TEXTURE1),si?(si.texture.bind(Pi,W.CLAMP_TO_EDGE,W.LINEAR_MIPMAP_NEAREST),xi=Math.pow(2,si.tileID.overscaledZ-Et.tileID.overscaledZ),Nt=[Et.tileID.canonical.x*xi%1,Et.tileID.canonical.y*xi%1]):Et.texture.bind(Pi,W.CLAMP_TO_EDGE,W.LINEAR_MIPMAP_NEAREST);const Ei=B.style.terrain&&B.style.terrain.getTerrainData(Pt),Vi=Ei?Pt:null,Ni=Vi?Vi.posMatrix:B.transform.calculatePosMatrix(Pt.toUnwrapped(),rt),cn=U(Ni,Nt||[0,0],xi||1,fi,I);ne instanceof we?pe.draw(z,W.TRIANGLES,kt,Jt.disabled,ye,hi.disabled,cn,Ei,I.id,ne.boundsBuffer,B.quadTriangleIndexBuffer,ne.boundsSegments):pe.draw(z,W.TRIANGLES,kt,ke[Pt.overscaledZ],ye,hi.disabled,cn,Ei,I.id,B.rasterBoundsBuffer,B.quadTriangleIndexBuffer,B.rasterBoundsSegments)}},background:function(B,d,I,D){const z=I.paint.get("background-color"),W=I.paint.get("background-opacity");if(W===0)return;const ne=B.context,pe=ne.gl,ye=B.transform,ke=ye.tileSize,ze=I.paint.get("background-pattern");if(B.isPatternMissing(ze))return;const Qe=!ze&&z.a===1&&W===1&&B.opaquePassEnabledForLayer()?"opaque":"translucent";if(B.renderPass!==Qe)return;const rt=Jt.disabled,Pt=B.depthModeForSublayer(0,Qe==="opaque"?Ue.ReadWrite:Ue.ReadOnly),kt=B.colorModeForRenderPass(),Et=B.useProgram(ze?"backgroundPattern":"background"),si=D||ye.coveringTiles({tileSize:ke,terrain:B.style.terrain});ze&&(ne.activeTexture.set(pe.TEXTURE0),B.imageManager.bind(B.context));const fi=I.getCrossfadeParameters();for(const xi of si){const Nt=D?xi.posMatrix:B.transform.calculatePosMatrix(xi.toUnwrapped()),Pi=ze?zt(Nt,W,B,ze,{tileID:xi,tileSize:ke},fi):Ct(Nt,W,z),Ei=B.style.terrain&&B.style.terrain.getTerrainData(xi);Et.draw(ne,pe.TRIANGLES,Pt,rt,kt,hi.disabled,Pi,Ei,I.id,B.tileExtentBuffer,B.quadTriangleIndexBuffer,B.tileExtentSegments)}},debug:function(B,d,I){for(let D=0;D<I.length;D++)Nu(B,d,I[D])},custom:function(B,d,I){const D=B.context,z=I.implementation;if(B.renderPass==="offscreen"){const W=z.prerender;W&&(B.setCustomLayerDefaults(),D.setColorMode(B.colorModeForRenderPass()),W.call(z,D.gl,B.transform.customLayerMatrix()),D.setDirty(),B.setBaseState())}else if(B.renderPass==="translucent"){B.setCustomLayerDefaults(),D.setColorMode(B.colorModeForRenderPass()),D.setStencilMode(Jt.disabled);const W=z.renderingMode==="3d"?new Ue(B.context.gl.LEQUAL,Ue.ReadWrite,B.depthRangeFor3D):B.depthModeForSublayer(0,Ue.ReadOnly);D.setDepthMode(W),z.render(D.gl,B.transform.customLayerMatrix()),D.setDirty(),B.setBaseState(),D.bindFramebuffer.set(null)}}};class yu{constructor(d,I){this.context=new se(d),this.transform=I,this._tileTextures={},this.terrainFacilitator={dirty:!0,matrix:r.create(),renderTime:0},this.setup(),this.numSublayers=Ye.maxUnderzooming+Ye.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new Qn,this.gpuTimers={}}resize(d,I,D){if(this.width=d*D,this.height=I*D,this.pixelRatio=D,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const z of this.style._order)this.style._layers[z].resize()}setup(){const d=this.context,I=new r.PosArray;I.emplaceBack(0,0),I.emplaceBack(r.EXTENT,0),I.emplaceBack(0,r.EXTENT),I.emplaceBack(r.EXTENT,r.EXTENT),this.tileExtentBuffer=d.createVertexBuffer(I,Lr.members),this.tileExtentSegments=r.SegmentVector.simpleSegment(0,0,4,2);const D=new r.PosArray;D.emplaceBack(0,0),D.emplaceBack(r.EXTENT,0),D.emplaceBack(0,r.EXTENT),D.emplaceBack(r.EXTENT,r.EXTENT),this.debugBuffer=d.createVertexBuffer(D,Lr.members),this.debugSegments=r.SegmentVector.simpleSegment(0,0,4,5);const z=new r.RasterBoundsArray;z.emplaceBack(0,0,0,0),z.emplaceBack(r.EXTENT,0,r.EXTENT,0),z.emplaceBack(0,r.EXTENT,0,r.EXTENT),z.emplaceBack(r.EXTENT,r.EXTENT,r.EXTENT,r.EXTENT),this.rasterBoundsBuffer=d.createVertexBuffer(z,Xe.members),this.rasterBoundsSegments=r.SegmentVector.simpleSegment(0,0,4,2);const W=new r.PosArray;W.emplaceBack(0,0),W.emplaceBack(1,0),W.emplaceBack(0,1),W.emplaceBack(1,1),this.viewportBuffer=d.createVertexBuffer(W,Lr.members),this.viewportSegments=r.SegmentVector.simpleSegment(0,0,4,2);const ne=new r.LineStripIndexArray;ne.emplaceBack(0),ne.emplaceBack(1),ne.emplaceBack(3),ne.emplaceBack(2),ne.emplaceBack(0),this.tileBorderIndexBuffer=d.createIndexBuffer(ne);const pe=new r.TriangleIndexArray;pe.emplaceBack(0,1,2),pe.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=d.createIndexBuffer(pe),this.emptyTexture=new T(d,{width:1,height:1,data:new Uint8Array([0,0,0,0])},d.gl.RGBA);const ye=this.context.gl;this.stencilClearMode=new Jt({func:ye.ALWAYS,mask:0},0,255,ye.ZERO,ye.ZERO,ye.ZERO)}clearStencil(){const d=this.context,I=d.gl;this.nextStencilID=1,this.currentStencilSource=void 0;const D=r.create();r.ortho(D,0,this.width,this.height,0,0,1),r.scale(D,D,[I.drawingBufferWidth,I.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(d,I.TRIANGLES,Ue.disabled,this.stencilClearMode,ko.disabled,hi.disabled,Ea(D),null,"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(d,I){if(this.currentStencilSource===d.source||!d.isTileClipped()||!I||!I.length)return;this.currentStencilSource=d.source;const D=this.context,z=D.gl;this.nextStencilID+I.length>256&&this.clearStencil(),D.setColorMode(ko.disabled),D.setDepthMode(Ue.disabled);const W=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(const ne of I){const pe=this._tileClippingMaskIDs[ne.key]=this.nextStencilID++,ye=this.style.terrain&&this.style.terrain.getTerrainData(ne);W.draw(D,z.TRIANGLES,Ue.disabled,new Jt({func:z.ALWAYS,mask:0},pe,255,z.KEEP,z.KEEP,z.REPLACE),ko.disabled,hi.disabled,Ea(ne.posMatrix),ye,"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const d=this.nextStencilID++,I=this.context.gl;return new Jt({func:I.NOTEQUAL,mask:255},d,255,I.KEEP,I.KEEP,I.REPLACE)}stencilModeForClipping(d){const I=this.context.gl;return new Jt({func:I.EQUAL,mask:255},this._tileClippingMaskIDs[d.key],0,I.KEEP,I.KEEP,I.REPLACE)}stencilConfigForOverlap(d){const I=this.context.gl,D=d.sort((ne,pe)=>pe.overscaledZ-ne.overscaledZ),z=D[D.length-1].overscaledZ,W=D[0].overscaledZ-z+1;if(W>1){this.currentStencilSource=void 0,this.nextStencilID+W>256&&this.clearStencil();const ne={};for(let pe=0;pe<W;pe++)ne[pe+z]=new Jt({func:I.GEQUAL,mask:255},pe+this.nextStencilID,255,I.KEEP,I.KEEP,I.REPLACE);return this.nextStencilID+=W,[ne,D]}return[{[z]:Jt.disabled},D]}colorModeForRenderPass(){const d=this.context.gl;return this._showOverdrawInspector?new ko([d.CONSTANT_COLOR,d.ONE],new r.Color(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?ko.unblended:ko.alphaBlended}depthModeForSublayer(d,I,D){if(!this.opaquePassEnabledForLayer())return Ue.disabled;const z=1-((1+this.currentLayer)*this.numSublayers+d)*this.depthEpsilon;return new Ue(D||this.context.gl.LEQUAL,I,[z,z])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(d,I){this.style=d,this.options=I,this.lineAtlas=d.lineAtlas,this.imageManager=d.imageManager,this.glyphManager=d.glyphManager,this.symbolFadeChange=d.placement.symbolFadeChange(r.exported.now()),this.imageManager.beginFrame();const D=this.style._order,z=this.style.sourceCaches,W=this.style.terrain&&new Wl(this);for(const ke in z){const ze=z[ke];ze.used&&ze.prepare(this.context)}const ne={},pe={},ye={};for(const ke in z){const ze=z[ke];ne[ke]=ze.getVisibleCoordinates(),pe[ke]=ne[ke].slice().reverse(),ye[ke]=ze.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let ke=0;ke<D.length;ke++)if(this.style._layers[D[ke]].is3D()){this.opaquePassCutoff=ke;break}if(W){this.opaquePassCutoff=0;const ke=this.style.terrain.sourceCache.tilesAfterTime(this.terrainFacilitator.renderTime);(this.terrainFacilitator.dirty||!r.equals(this.terrainFacilitator.matrix,this.transform.projMatrix)||ke.length)&&(r.copy(this.terrainFacilitator.matrix,this.transform.projMatrix),this.terrainFacilitator.renderTime=Date.now(),this.terrainFacilitator.dirty=!1,function(ze,Qe){const rt=ze.context,Pt=rt.gl,kt=ko.unblended,Et=new Ue(Pt.LEQUAL,Ue.ReadWrite,[0,1]),si=Qe.getTerrainMesh(),fi=Qe.sourceCache.getRenderableTiles(),xi=ze.useProgram("terrainDepth");rt.bindFramebuffer.set(Qe.getFramebuffer("depth").framebuffer),rt.viewport.set([0,0,ze.width/devicePixelRatio,ze.height/devicePixelRatio]),rt.clear({color:r.Color.transparent,depth:1});for(const Nt of fi){const Pi=Qe.getTerrainData(Nt.tileID),Ei=ze.transform.calculatePosMatrix(Nt.tileID.toUnwrapped());xi.draw(rt,Pt.TRIANGLES,Et,Jt.disabled,kt,hi.backCCW,{u_matrix:Ei},Pi,"terrain",si.vertexBuffer,si.indexBuffer,si.segments)}rt.bindFramebuffer.set(null),rt.viewport.set([0,0,ze.width,ze.height])}(this,this.style.terrain),function(ze,Qe){const rt=ze.context,Pt=rt.gl,kt=ko.unblended,Et=new Ue(Pt.LEQUAL,Ue.ReadWrite,[0,1]),si=Qe.getTerrainMesh(),fi=Qe.getCoordsTexture(),xi=Qe.sourceCache.getRenderableTiles(),Nt=ze.useProgram("terrainCoords");rt.bindFramebuffer.set(Qe.getFramebuffer("coords").framebuffer),rt.viewport.set([0,0,ze.width/devicePixelRatio,ze.height/devicePixelRatio]),rt.clear({color:r.Color.transparent,depth:1}),Qe.coordsIndex=[];for(const Pi of xi){const Ei=Qe.getTerrainData(Pi.tileID);rt.activeTexture.set(Pt.TEXTURE0),Pt.bindTexture(Pt.TEXTURE_2D,fi.texture);const Vi=ze.transform.calculatePosMatrix(Pi.tileID.toUnwrapped());Nt.draw(rt,Pt.TRIANGLES,Et,Jt.disabled,kt,hi.backCCW,{u_matrix:Vi,u_terrain_coords_id:(255-Qe.coordsIndex.length)/255,u_texture:0},Ei,"terrain",si.vertexBuffer,si.indexBuffer,si.segments),Qe.coordsIndex.push(Pi.tileID.key)}rt.bindFramebuffer.set(null),rt.viewport.set([0,0,ze.width,ze.height])}(this,this.style.terrain))}this.renderPass="offscreen";for(const ke of D){const ze=this.style._layers[ke];if(!ze.hasOffscreenPass()||ze.isHidden(this.transform.zoom))continue;const Qe=pe[ze.source];(ze.type==="custom"||Qe.length)&&this.renderLayer(this,z[ze.source],ze,Qe)}if(this.context.bindFramebuffer.set(null),this.context.clear({color:I.showOverdrawInspector?r.Color.black:r.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=I.showOverdrawInspector,this.depthRangeFor3D=[0,1-(d._order.length+2)*this.numSublayers*this.depthEpsilon],!W)for(this.renderPass="opaque",this.currentLayer=D.length-1;this.currentLayer>=0;this.currentLayer--){const ke=this.style._layers[D[this.currentLayer]],ze=z[ke.source],Qe=ne[ke.source];this._renderTileClippingMasks(ke,Qe),this.renderLayer(this,ze,ke,Qe)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<D.length;this.currentLayer++){const ke=this.style._layers[D[this.currentLayer]],ze=z[ke.source];if(W&&W.renderLayer(ke))continue;const Qe=(ke.type==="symbol"?ye:pe)[ke.source];this._renderTileClippingMasks(ke,ne[ke.source]),this.renderLayer(this,ze,ke,Qe)}if(this.options.showTileBoundaries){let ke,ze;Object.values(this.style._layers).forEach(Qe=>{Qe.source&&!Qe.isHidden(this.transform.zoom)&&(Qe.source!==(ze&&ze.id)&&(ze=this.style.sourceCaches[Qe.source]),(!ke||ke.getSource().maxzoom<ze.getSource().maxzoom)&&(ke=ze))}),ke&&Ua.debug(this,ke,ke.getVisibleCoordinates())}this.options.showPadding&&function(ke){const ze=ke.transform.padding;Ia(ke,ke.transform.height-(ze.top||0),3,Es),Ia(ke,ze.bottom||0,3,vs),Sl(ke,ze.left||0,3,Gl),Sl(ke,ke.transform.width-(ze.right||0),3,kl);const Qe=ke.transform.centerPoint;(function(rt,Pt,kt,Et){nl(rt,Pt-1,kt-10,2,20,Et),nl(rt,Pt-10,kt-1,20,2,Et)})(ke,Qe.x,ke.transform.height-Qe.y,zu)}(this),this.context.setDefault()}renderLayer(d,I,D,z){D.isHidden(this.transform.zoom)||(D.type==="background"||D.type==="custom"||(z||[]).length)&&(this.id=D.id,this.gpuTimingStart(D),Ua[D.type](d,I,D,z,this.style.placement.variableOffsets),this.gpuTimingEnd())}gpuTimingStart(d){if(!this.options.gpuTiming)return;const I=this.context.extTimerQuery;let D=this.gpuTimers[d.id];D||(D=this.gpuTimers[d.id]={calls:0,cpuTime:0,query:I.createQueryEXT()}),D.calls++,I.beginQueryEXT(I.TIME_ELAPSED_EXT,D.query)}gpuTimingEnd(){if(!this.options.gpuTiming)return;const d=this.context.extTimerQuery;d.endQueryEXT(d.TIME_ELAPSED_EXT)}collectGpuTimers(){const d=this.gpuTimers;return this.gpuTimers={},d}queryGpuTimers(d){const I={};for(const D in d){const z=d[D],W=this.context.extTimerQuery,ne=W.getQueryObjectEXT(z.query,W.QUERY_RESULT_EXT)/1e6;W.deleteQueryEXT(z.query),I[D]=ne}return I}translatePosMatrix(d,I,D,z,W){if(!D[0]&&!D[1])return d;const ne=W?z==="map"?this.transform.angle:0:z==="viewport"?-this.transform.angle:0;if(ne){const ke=Math.sin(ne),ze=Math.cos(ne);D=[D[0]*ze-D[1]*ke,D[0]*ke+D[1]*ze]}const pe=[W?D[0]:Sr(I,D[0],this.transform.zoom),W?D[1]:Sr(I,D[1],this.transform.zoom),0],ye=new Float32Array(16);return r.translate(ye,d,pe),ye}saveTileTexture(d){const I=this._tileTextures[d.size[0]];I?I.push(d):this._tileTextures[d.size[0]]=[d]}getTileTexture(d){const I=this._tileTextures[d];return I&&I.length>0?I.pop():null}isPatternMissing(d){if(!d)return!1;if(!d.from||!d.to)return!0;const I=this.imageManager.getPattern(d.from.toString()),D=this.imageManager.getPattern(d.to.toString());return!I||!D}useProgram(d,I){this.cache=this.cache||{};const D=d+(I?I.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"")+(this.style.terrain?"/terrain":"");return this.cache[D]||(this.cache[D]=new zr(this.context,d,Fo[d],I,Rt[d],this._showOverdrawInspector,this.style.terrain)),this.cache[D]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const d=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(d.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new T(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy()}}class Rs{constructor(d,I){this.points=d,this.planes=I}static fromInvProjectionMatrix(d,I,D){const z=Math.pow(2,D),W=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(pe=>{const ye=1/(pe=r.transformMat4([],pe,d))[3]/I*z;return r.mul$1(pe,pe,[ye,ye,1/pe[3],ye])}),ne=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(pe=>{const ye=r.sub([],W[pe[0]],W[pe[1]]),ke=r.sub([],W[pe[2]],W[pe[1]]),ze=r.normalize([],r.cross([],ye,ke)),Qe=-r.dot(ze,W[pe[1]]);return ze.concat(Qe)});return new Rs(W,ne)}}class _u{constructor(d,I){this.min=d,this.max=I,this.center=r.scale$1([],r.add([],this.min,this.max),.5)}quadrant(d){const I=[d%2==0,d<2],D=r.clone$2(this.min),z=r.clone$2(this.max);for(let W=0;W<I.length;W++)D[W]=I[W]?this.min[W]:this.center[W],z[W]=I[W]?this.center[W]:this.max[W];return z[2]=this.max[2],new _u(D,z)}distanceX(d){return Math.max(Math.min(this.max[0],d[0]),this.min[0])-d[0]}distanceY(d){return Math.max(Math.min(this.max[1],d[1]),this.min[1])-d[1]}intersects(d){const I=[[this.min[0],this.min[1],this.min[2],1],[this.max[0],this.min[1],this.min[2],1],[this.max[0],this.max[1],this.min[2],1],[this.min[0],this.max[1],this.min[2],1],[this.min[0],this.min[1],this.max[2],1],[this.max[0],this.min[1],this.max[2],1],[this.max[0],this.max[1],this.max[2],1],[this.min[0],this.max[1],this.max[2],1]];let D=!0;for(let z=0;z<d.planes.length;z++){const W=d.planes[z];let ne=0;for(let pe=0;pe<I.length;pe++)r.dot$1(W,I[pe])>=0&&ne++;if(ne===0)return 0;ne!==I.length&&(D=!1)}if(D)return 2;for(let z=0;z<3;z++){let W=Number.MAX_VALUE,ne=-Number.MAX_VALUE;for(let pe=0;pe<d.points.length;pe++){const ye=d.points[pe][z]-this.min[z];W=Math.min(W,ye),ne=Math.max(ne,ye)}if(ne<0||W>this.max[z]-this.min[z])return 0}return 1}}class rl{constructor(d=0,I=0,D=0,z=0){if(isNaN(d)||d<0||isNaN(I)||I<0||isNaN(D)||D<0||isNaN(z)||z<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=d,this.bottom=I,this.left=D,this.right=z}interpolate(d,I,D){return I.top!=null&&d.top!=null&&(this.top=r.number(d.top,I.top,D)),I.bottom!=null&&d.bottom!=null&&(this.bottom=r.number(d.bottom,I.bottom,D)),I.left!=null&&d.left!=null&&(this.left=r.number(d.left,I.left,D)),I.right!=null&&d.right!=null&&(this.right=r.number(d.right,I.right,D)),this}getCenter(d,I){const D=r.clamp((this.left+d-this.right)/2,0,d),z=r.clamp((this.top+I-this.bottom)/2,0,I);return new r.pointGeometry(D,z)}equals(d){return this.top===d.top&&this.bottom===d.bottom&&this.left===d.left&&this.right===d.right}clone(){return new rl(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}class Xl{constructor(d,I,D,z,W){this.tileSize=512,this.maxValidLatitude=85.051129,this.freezeElevation=!1,this._renderWorldCopies=W===void 0||!!W,this._minZoom=d||0,this._maxZoom=I||22,this._minPitch=D==null?0:D,this._maxPitch=z==null?60:z,this.setMaxBounds(),this.width=0,this.height=0,this._center=new r.LngLat(0,0),this._elevation=0,this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new rl,this._posMatrixCache={},this._alignedPosMatrixCache={}}clone(){const d=new Xl(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return d.tileSize=this.tileSize,d.latRange=this.latRange,d.width=this.width,d.height=this.height,d._center=this._center,d._elevation=this._elevation,d.zoom=this.zoom,d.angle=this.angle,d._fov=this._fov,d._pitch=this._pitch,d._unmodified=this._unmodified,d._edgeInsets=this._edgeInsets.clone(),d._calcMatrices(),d}get minZoom(){return this._minZoom}set minZoom(d){this._minZoom!==d&&(this._minZoom=d,this.zoom=Math.max(this.zoom,d))}get maxZoom(){return this._maxZoom}set maxZoom(d){this._maxZoom!==d&&(this._maxZoom=d,this.zoom=Math.min(this.zoom,d))}get minPitch(){return this._minPitch}set minPitch(d){this._minPitch!==d&&(this._minPitch=d,this.pitch=Math.max(this.pitch,d))}get maxPitch(){return this._maxPitch}set maxPitch(d){this._maxPitch!==d&&(this._maxPitch=d,this.pitch=Math.min(this.pitch,d))}get renderWorldCopies(){return this._renderWorldCopies}set renderWorldCopies(d){d===void 0?d=!0:d===null&&(d=!1),this._renderWorldCopies=d}get worldSize(){return this.tileSize*this.scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new r.pointGeometry(this.width,this.height)}get bearing(){return-this.angle/Math.PI*180}set bearing(d){const I=-r.wrap(d,-180,180)*Math.PI/180;var D;this.angle!==I&&(this._unmodified=!1,this.angle=I,this._calcMatrices(),this.rotationMatrix=(D=new r.ARRAY_TYPE(4),r.ARRAY_TYPE!=Float32Array&&(D[1]=0,D[2]=0),D[0]=1,D[3]=1,D),function(z,W,ne){var pe=W[0],ye=W[1],ke=W[2],ze=W[3],Qe=Math.sin(ne),rt=Math.cos(ne);z[0]=pe*rt+ke*Qe,z[1]=ye*rt+ze*Qe,z[2]=pe*-Qe+ke*rt,z[3]=ye*-Qe+ze*rt}(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(d){const I=r.clamp(d,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==I&&(this._unmodified=!1,this._pitch=I,this._calcMatrices())}get fov(){return this._fov/Math.PI*180}set fov(d){d=Math.max(.01,Math.min(60,d)),this._fov!==d&&(this._unmodified=!1,this._fov=d/180*Math.PI,this._calcMatrices())}get zoom(){return this._zoom}set zoom(d){const I=Math.min(Math.max(d,this.minZoom),this.maxZoom);this._zoom!==I&&(this._unmodified=!1,this._zoom=I,this.scale=this.zoomScale(I),this.tileZoom=Math.floor(I),this.zoomFraction=I-this.tileZoom,this._constrain(),this._calcMatrices())}get center(){return this._center}set center(d){d.lat===this._center.lat&&d.lng===this._center.lng||(this._unmodified=!1,this._center=d,this._constrain(),this._calcMatrices())}get elevation(){return this._elevation}set elevation(d){d!==this._elevation&&(this._elevation=d,this._constrain(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}set padding(d){this._edgeInsets.equals(d)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,d,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}isPaddingEqual(d){return this._edgeInsets.equals(d)}interpolatePadding(d,I,D){this._unmodified=!1,this._edgeInsets.interpolate(d,I,D),this._constrain(),this._calcMatrices()}coveringZoomLevel(d){const I=(d.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/d.tileSize));return Math.max(0,I)}getVisibleUnwrappedCoordinates(d){const I=[new r.UnwrappedTileID(0,d)];if(this._renderWorldCopies){const D=this.pointCoordinate(new r.pointGeometry(0,0)),z=this.pointCoordinate(new r.pointGeometry(this.width,0)),W=this.pointCoordinate(new r.pointGeometry(this.width,this.height)),ne=this.pointCoordinate(new r.pointGeometry(0,this.height)),pe=Math.floor(Math.min(D.x,z.x,W.x,ne.x)),ye=Math.floor(Math.max(D.x,z.x,W.x,ne.x)),ke=1;for(let ze=pe-ke;ze<=ye+ke;ze++)ze!==0&&I.push(new r.UnwrappedTileID(ze,d))}return I}coveringTiles(d){var I,D;let z=this.coveringZoomLevel(d);const W=z;if(d.minzoom!==void 0&&z<d.minzoom)return[];d.maxzoom!==void 0&&z>d.maxzoom&&(z=d.maxzoom);const ne=this.pointCoordinate(this.getCameraPoint()),pe=r.MercatorCoordinate.fromLngLat(this.center),ye=Math.pow(2,z),ke=[ye*ne.x,ye*ne.y,0],ze=[ye*pe.x,ye*pe.y,0],Qe=Rs.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,z);let rt=d.minzoom||0;!d.terrain&&this.pitch<=60&&this._edgeInsets.top<.1&&(rt=z);const Pt=d.terrain?2/Math.min(this.tileSize,d.tileSize)*this.tileSize:3,kt=Nt=>({aabb:new _u([Nt*ye,0,0],[(Nt+1)*ye,ye,0]),zoom:0,x:0,y:0,wrap:Nt,fullyVisible:!1}),Et=[],si=[],fi=z,xi=d.reparseOverscaled?W:z;if(this._renderWorldCopies)for(let Nt=1;Nt<=3;Nt++)Et.push(kt(-Nt)),Et.push(kt(Nt));for(Et.push(kt(0));Et.length>0;){const Nt=Et.pop(),Pi=Nt.x,Ei=Nt.y;let Vi=Nt.fullyVisible;if(!Vi){const qn=Nt.aabb.intersects(Qe);if(qn===0)continue;Vi=qn===2}const Ni=d.terrain?ke:ze,cn=Nt.aabb.distanceX(Ni),zi=Nt.aabb.distanceY(Ni),Rn=Math.max(Math.abs(cn),Math.abs(zi)),_n=Pt+(1<<fi-Nt.zoom)-2;if(Nt.zoom===fi||Rn>_n&&Nt.zoom>=rt){const qn=fi-Nt.zoom,Er=ke[0]-.5-(Pi<<qn),Mr=ke[1]-.5-(Ei<<qn);si.push({tileID:new r.OverscaledTileID(Nt.zoom===fi?xi:Nt.zoom,Nt.wrap,Nt.zoom,Pi,Ei),distanceSq:r.sqrLen([ze[0]-.5-Pi,ze[1]-.5-Ei]),tileDistanceToCamera:Math.sqrt(Er*Er+Mr*Mr)})}else for(let qn=0;qn<4;qn++){const Er=(Pi<<1)+qn%2,Mr=(Ei<<1)+(qn>>1),j=Nt.zoom+1;let K=Nt.aabb.quadrant(qn);if(d.terrain){const ue=new r.OverscaledTileID(j,Nt.wrap,j,Er,Mr),be=d.terrain.getMinMaxElevation(ue),je=(I=be.minElevation)!==null&&I!==void 0?I:this.elevation,Ke=(D=be.maxElevation)!==null&&D!==void 0?D:this.elevation;K=new _u([K.min[0],K.min[1],je],[K.max[0],K.max[1],Ke])}Et.push({aabb:K,zoom:j,x:Er,y:Mr,wrap:Nt.wrap,fullyVisible:Vi})}}return si.sort((Nt,Pi)=>Nt.distanceSq-Pi.distanceSq).map(Nt=>Nt.tileID)}resize(d,I){this.width=d,this.height=I,this.pixelsToGLUnits=[2/d,-2/I],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(d){return Math.pow(2,d)}scaleZoom(d){return Math.log(d)/Math.LN2}project(d){const I=r.clamp(d.lat,-this.maxValidLatitude,this.maxValidLatitude);return new r.pointGeometry(r.mercatorXfromLng(d.lng)*this.worldSize,r.mercatorYfromLat(I)*this.worldSize)}unproject(d){return new r.MercatorCoordinate(d.x/this.worldSize,d.y/this.worldSize).toLngLat()}get point(){return this.project(this.center)}updateElevation(d){this.freezeElevation||(this.elevation=d?this.getElevation(this._center,d):0)}getElevation(d,I){const D=r.MercatorCoordinate.fromLngLat(d),z=(1<<this.tileZoom)*r.EXTENT,W=D.x*z,ne=D.y*z,pe=Math.floor(W/r.EXTENT),ye=Math.floor(ne/r.EXTENT),ke=new r.OverscaledTileID(this.tileZoom,0,this.tileZoom,pe,ye);return I.getElevation(ke,W%r.EXTENT,ne%r.EXTENT,r.EXTENT)}getCameraPosition(){return{lngLat:this.pointLocation(this.getCameraPoint()),altitude:Math.cos(this._pitch)*this.cameraToCenterDistance/this._pixelPerMeter+this.elevation}}recalculateZoom(d){const I=this.pointLocation(this.centerPoint,d),D=this.getElevation(I,d);if(!(this.elevation-D))return;const z=this.getCameraPosition(),W=r.MercatorCoordinate.fromLngLat(z.lngLat,z.altitude),ne=r.MercatorCoordinate.fromLngLat(I,D),pe=W.x-ne.x,ye=W.y-ne.y,ke=W.z-ne.z,ze=Math.sqrt(pe*pe+ye*ye+ke*ke),Qe=this.scaleZoom(this.cameraToCenterDistance/ze/this.tileSize);this._elevation=D,this._center=I,this.zoom=Qe}setLocationAtPoint(d,I){const D=this.pointCoordinate(I),z=this.pointCoordinate(this.centerPoint),W=this.locationCoordinate(d),ne=new r.MercatorCoordinate(W.x-(D.x-z.x),W.y-(D.y-z.y));this.center=this.coordinateLocation(ne),this._renderWorldCopies&&(this.center=this.center.wrap())}locationPoint(d,I){return I?this.coordinatePoint(this.locationCoordinate(d),this.getElevation(d,I),this.pixelMatrix3D):this.coordinatePoint(this.locationCoordinate(d))}pointLocation(d,I){return this.coordinateLocation(this.pointCoordinate(d,I))}locationCoordinate(d){return r.MercatorCoordinate.fromLngLat(d)}coordinateLocation(d){return d&&d.toLngLat()}pointCoordinate(d,I){if(I){const rt=I.pointCoordinate(d);if(rt!=null)return rt}const D=[d.x,d.y,0,1],z=[d.x,d.y,1,1];r.transformMat4(D,D,this.pixelMatrixInverse),r.transformMat4(z,z,this.pixelMatrixInverse);const W=D[3],ne=z[3],pe=D[1]/W,ye=z[1]/ne,ke=D[2]/W,ze=z[2]/ne,Qe=ke===ze?0:(0-ke)/(ze-ke);return new r.MercatorCoordinate(r.number(D[0]/W,z[0]/ne,Qe)/this.worldSize,r.number(pe,ye,Qe)/this.worldSize)}coordinatePoint(d,I=0,D=this.pixelMatrix){const z=[d.x*this.worldSize,d.y*this.worldSize,I,1];return r.transformMat4(z,z,D),new r.pointGeometry(z[0]/z[3],z[1]/z[3])}getBounds(){const d=Math.max(0,this.height/2-this.getHorizon());return new r.LngLatBounds().extend(this.pointLocation(new r.pointGeometry(0,d))).extend(this.pointLocation(new r.pointGeometry(this.width,d))).extend(this.pointLocation(new r.pointGeometry(this.width,this.height))).extend(this.pointLocation(new r.pointGeometry(0,this.height)))}getMaxBounds(){return this.latRange&&this.latRange.length===2&&this.lngRange&&this.lngRange.length===2?new r.LngLatBounds([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null}getHorizon(){return Math.tan(Math.PI/2-this._pitch)*this.cameraToCenterDistance*.85}setMaxBounds(d){d?(this.lngRange=[d.getWest(),d.getEast()],this.latRange=[d.getSouth(),d.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])}calculatePosMatrix(d,I=!1){const D=d.key,z=I?this._alignedPosMatrixCache:this._posMatrixCache;if(z[D])return z[D];const W=d.canonical,ne=this.worldSize/this.zoomScale(W.z),pe=W.x+Math.pow(2,W.z)*d.wrap,ye=r.identity(new Float64Array(16));return r.translate(ye,ye,[pe*ne,W.y*ne,0]),r.scale(ye,ye,[ne/r.EXTENT,ne/r.EXTENT,1]),r.multiply(ye,I?this.alignedProjMatrix:this.projMatrix,ye),z[D]=new Float32Array(ye),z[D]}customLayerMatrix(){return this.mercatorMatrix.slice()}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;let d,I,D,z,W=-90,ne=90,pe=-180,ye=180;const ke=this.size,ze=this._unmodified;if(this.latRange){const Pt=this.latRange;W=r.mercatorYfromLat(Pt[1])*this.worldSize,ne=r.mercatorYfromLat(Pt[0])*this.worldSize,d=ne-W<ke.y?ke.y/(ne-W):0}if(this.lngRange){const Pt=this.lngRange;pe=r.wrap(r.mercatorXfromLng(Pt[0])*this.worldSize,0,this.worldSize),ye=r.wrap(r.mercatorXfromLng(Pt[1])*this.worldSize,0,this.worldSize),ye<pe&&(ye+=this.worldSize),I=ye-pe<ke.x?ke.x/(ye-pe):0}const Qe=this.point,rt=Math.max(I||0,d||0);if(rt)return this.center=this.unproject(new r.pointGeometry(I?(ye+pe)/2:Qe.x,d?(ne+W)/2:Qe.y)),this.zoom+=this.scaleZoom(rt),this._unmodified=ze,void(this._constraining=!1);if(this.latRange){const Pt=Qe.y,kt=ke.y/2;Pt-kt<W&&(z=W+kt),Pt+kt>ne&&(z=ne-kt)}if(this.lngRange){const Pt=(pe+ye)/2,kt=r.wrap(Qe.x,Pt-this.worldSize/2,Pt+this.worldSize/2),Et=ke.x/2;kt-Et<pe&&(D=pe+Et),kt+Et>ye&&(D=ye-Et)}D===void 0&&z===void 0||(this.center=this.unproject(new r.pointGeometry(D!==void 0?D:Qe.x,z!==void 0?z:Qe.y)).wrap()),this._unmodified=ze,this._constraining=!1}_calcMatrices(){if(!this.height)return;const d=this.centerOffset,I=this.point.x,D=this.point.y;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height,this._pixelPerMeter=r.mercatorZfromAltitude(1,this.center.lat)*this.worldSize;let z=r.identity(new Float64Array(16));r.scale(z,z,[this.width/2,-this.height/2,1]),r.translate(z,z,[1,-1,0]),this.labelPlaneMatrix=z,z=r.identity(new Float64Array(16)),r.scale(z,z,[1,-1,1]),r.translate(z,z,[-1,-1,0]),r.scale(z,z,[2/this.width,2/this.height,1]),this.glCoordMatrix=z,this.cameraToSeaLevelDistance=this.cameraToCenterDistance+this._elevation*this._pixelPerMeter/Math.cos(this._pitch);const W=Math.PI/2+this._pitch,ne=this._fov*(.5+d.y/this.height),pe=Math.sin(ne)*this.cameraToSeaLevelDistance/Math.sin(r.clamp(Math.PI-W-ne,.01,Math.PI-.01)),ye=this.getHorizon(),ke=2*Math.atan(ye/this.cameraToCenterDistance)*(.5+d.y/(2*ye)),ze=Math.sin(ke)*this.cameraToSeaLevelDistance/Math.sin(r.clamp(Math.PI-W-ke,.01,Math.PI-.01)),Qe=Math.cos(Math.PI/2-this._pitch)*pe+this.cameraToSeaLevelDistance,rt=Math.cos(Math.PI/2-this._pitch)*ze+this.cameraToSeaLevelDistance,Pt=1.01*Math.min(Qe,rt),kt=this.height/50;z=new Float64Array(16),r.perspective(z,this._fov,this.width/this.height,kt,Pt),z[8]=2*-d.x/this.width,z[9]=2*d.y/this.height,r.scale(z,z,[1,-1,1]),r.translate(z,z,[0,0,-this.cameraToCenterDistance]),r.rotateX(z,z,this._pitch),r.rotateZ(z,z,this.angle),r.translate(z,z,[-I,-D,0]),this.mercatorMatrix=r.scale([],z,[this.worldSize,this.worldSize,this.worldSize]),r.scale(z,z,[1,1,this._pixelPerMeter]),this.pixelMatrix=r.multiply(new Float64Array(16),this.labelPlaneMatrix,z),r.translate(z,z,[0,0,-this.elevation]),this.projMatrix=z,this.invProjMatrix=r.invert([],z),this.pixelMatrix3D=r.multiply(new Float64Array(16),this.labelPlaneMatrix,z);const Et=this.width%2/2,si=this.height%2/2,fi=Math.cos(this.angle),xi=Math.sin(this.angle),Nt=I-Math.round(I)+fi*Et+xi*si,Pi=D-Math.round(D)+fi*si+xi*Et,Ei=new Float64Array(z);if(r.translate(Ei,Ei,[Nt>.5?Nt-1:Nt,Pi>.5?Pi-1:Pi,0]),this.alignedProjMatrix=Ei,z=r.invert(new Float64Array(16),this.pixelMatrix),!z)throw new Error("failed to invert matrix");this.pixelMatrixInverse=z,this._posMatrixCache={},this._alignedPosMatrixCache={}}maxPitchScaleFactor(){if(!this.pixelMatrixInverse)return 1;const d=this.pointCoordinate(new r.pointGeometry(0,0)),I=[d.x*this.worldSize,d.y*this.worldSize,0,1];return r.transformMat4(I,I,this.pixelMatrix)[3]/this.cameraToCenterDistance}getCameraPoint(){const d=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new r.pointGeometry(0,d))}getCameraQueryGeometry(d){const I=this.getCameraPoint();if(d.length===1)return[d[0],I];{let D=I.x,z=I.y,W=I.x,ne=I.y;for(const pe of d)D=Math.min(D,pe.x),z=Math.min(z,pe.y),W=Math.max(W,pe.x),ne=Math.max(ne,pe.y);return[new r.pointGeometry(D,z),new r.pointGeometry(W,z),new r.pointGeometry(W,ne),new r.pointGeometry(D,ne),new r.pointGeometry(D,z)]}}}class Ta{constructor(d){this._hashName=d&&encodeURIComponent(d),r.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=function(I,D){let z=!1,W=null;const ne=()=>{W=null,z&&(I(),W=setTimeout(ne,300),z=!1)};return()=>(z=!0,W||ne(),W)}(this._updateHashUnthrottled.bind(this))}addTo(d){return this._map=d,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this}getHashString(d){const I=this._map.getCenter(),D=Math.round(100*this._map.getZoom())/100,z=Math.ceil((D*Math.LN2+Math.log(512/360/.5))/Math.LN10),W=Math.pow(10,z),ne=Math.round(I.lng*W)/W,pe=Math.round(I.lat*W)/W,ye=this._map.getBearing(),ke=this._map.getPitch();let ze="";if(ze+=d?`/${ne}/${pe}/${D}`:`${D}/${pe}/${ne}`,(ye||ke)&&(ze+="/"+Math.round(10*ye)/10),ke&&(ze+=`/${Math.round(ke)}`),this._hashName){const Qe=this._hashName;let rt=!1;const Pt=window.location.hash.slice(1).split("&").map(kt=>{const Et=kt.split("=")[0];return Et===Qe?(rt=!0,`${Et}=${ze}`):kt}).filter(kt=>kt);return rt||Pt.push(`${Qe}=${ze}`),`#${Pt.join("&")}`}return`#${ze}`}_getCurrentHash(){const d=window.location.hash.replace("#","");if(this._hashName){let I;return d.split("&").map(D=>D.split("=")).forEach(D=>{D[0]===this._hashName&&(I=D)}),(I&&I[1]||"").split("/")}return d.split("/")}_onHashChange(){const d=this._getCurrentHash();if(d.length>=3&&!d.some(I=>isNaN(I))){const I=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(d[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+d[2],+d[1]],zoom:+d[0],bearing:I,pitch:+(d[4]||0)}),!0}return!1}_updateHashUnthrottled(){const d=window.location.href.replace(/(#.+)?$/,this.getHashString());try{window.history.replaceState(window.history.state,null,d)}catch{}}}const Cl={linearity:.3,easing:r.bezier(0,0,.3,1)},Dc=r.extend({deceleration:2500,maxSpeed:1400},Cl),Oc=r.extend({deceleration:20,maxSpeed:1400},Cl),El=r.extend({deceleration:1e3,maxSpeed:360},Cl),Bs=r.extend({deceleration:1e3,maxSpeed:90},Cl);class La{constructor(d){this._map=d,this.clear()}clear(){this._inertiaBuffer=[]}record(d){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:r.exported.now(),settings:d})}_drainInertiaBuffer(){const d=this._inertiaBuffer,I=r.exported.now();for(;d.length>0&&I-d[0].time>160;)d.shift()}_onMoveEnd(d){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const I={zoom:0,bearing:0,pitch:0,pan:new r.pointGeometry(0,0),pinchAround:void 0,around:void 0};for(const{settings:W}of this._inertiaBuffer)I.zoom+=W.zoomDelta||0,I.bearing+=W.bearingDelta||0,I.pitch+=W.pitchDelta||0,W.panDelta&&I.pan._add(W.panDelta),W.around&&(I.around=W.around),W.pinchAround&&(I.pinchAround=W.pinchAround);const D=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,z={};if(I.pan.mag()){const W=ra(I.pan.mag(),D,r.extend({},Dc,d||{}));z.offset=I.pan.mult(W.amount/I.pan.mag()),z.center=this._map.transform.center,Pa(z,W)}if(I.zoom){const W=ra(I.zoom,D,Oc);z.zoom=this._map.transform.zoom+W.amount,Pa(z,W)}if(I.bearing){const W=ra(I.bearing,D,El);z.bearing=this._map.transform.bearing+r.clamp(W.amount,-179,179),Pa(z,W)}if(I.pitch){const W=ra(I.pitch,D,Bs);z.pitch=this._map.transform.pitch+W.amount,Pa(z,W)}if(z.zoom||z.bearing){const W=I.pinchAround===void 0?I.around:I.pinchAround;z.around=W?this._map.unproject(W):this._map.getCenter()}return this.clear(),r.extend(z,{noMoveStart:!0})}}function Pa(B,d){(!B.duration||B.duration<d.duration)&&(B.duration=d.duration,B.easing=d.easing)}function ra(B,d,I){const{maxSpeed:D,linearity:z,deceleration:W}=I,ne=r.clamp(B*z/(d/1e3),-D,D),pe=Math.abs(ne)/(W*z);return{easing:I.easing,duration:1e3*pe,amount:ne*(pe/2)}}class ls extends r.Event{constructor(d,I,D,z={}){const W=w.mousePos(I.getCanvasContainer(),D),ne=I.unproject(W);super(d,r.extend({point:W,lngLat:ne,originalEvent:D},z)),this._defaultPrevented=!1,this.target=I}preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}}class ol extends r.Event{constructor(d,I,D){const z=d==="touchend"?D.changedTouches:D.touches,W=w.touchPos(I.getCanvasContainer(),z),ne=W.map(ye=>I.unproject(ye)),pe=W.reduce((ye,ke,ze,Qe)=>ye.add(ke.div(Qe.length)),new r.pointGeometry(0,0));super(d,{points:W,point:pe,lngLats:ne,lngLat:I.unproject(pe),originalEvent:D}),this._defaultPrevented=!1}preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}}class Ko extends r.Event{constructor(d,I,D){super(d,{originalEvent:D}),this._defaultPrevented=!1}preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}}class ju{constructor(d,I){this._map=d,this._clickTolerance=I.clickTolerance}reset(){delete this._mousedownPos}wheel(d){return this._firePreventable(new Ko(d.type,this._map,d))}mousedown(d,I){return this._mousedownPos=I,this._firePreventable(new ls(d.type,this._map,d))}mouseup(d){this._map.fire(new ls(d.type,this._map,d))}click(d,I){this._mousedownPos&&this._mousedownPos.dist(I)>=this._clickTolerance||this._map.fire(new ls(d.type,this._map,d))}dblclick(d){return this._firePreventable(new ls(d.type,this._map,d))}mouseover(d){this._map.fire(new ls(d.type,this._map,d))}mouseout(d){this._map.fire(new ls(d.type,this._map,d))}touchstart(d){return this._firePreventable(new ol(d.type,this._map,d))}touchmove(d){this._map.fire(new ol(d.type,this._map,d))}touchend(d){this._map.fire(new ol(d.type,this._map,d))}touchcancel(d){this._map.fire(new ol(d.type,this._map,d))}_firePreventable(d){if(this._map.fire(d),d.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Ma{constructor(d){this._map=d}reset(){this._delayContextMenu=!1,this._ignoreContextMenu=!0,delete this._contextMenuEvent}mousemove(d){this._map.fire(new ls(d.type,this._map,d))}mousedown(){this._delayContextMenu=!0,this._ignoreContextMenu=!1}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new ls("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(d){this._delayContextMenu?this._contextMenuEvent=d:this._ignoreContextMenu||this._map.fire(new ls(d.type,this._map,d)),this._map.listens("contextmenu")&&d.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class oa{constructor(d,I){this._map=d,this._el=d.getCanvasContainer(),this._container=d.getContainer(),this._clickTolerance=I.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(d,I){this.isEnabled()&&d.shiftKey&&d.button===0&&(w.disableDrag(),this._startPos=this._lastPos=I,this._active=!0)}mousemoveWindow(d,I){if(!this._active)return;const D=I;if(this._lastPos.equals(D)||!this._box&&D.dist(this._startPos)<this._clickTolerance)return;const z=this._startPos;this._lastPos=D,this._box||(this._box=w.create("div","maplibregl-boxzoom mapboxgl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair","mapboxgl-crosshair"),this._fireEvent("boxzoomstart",d));const W=Math.min(z.x,D.x),ne=Math.max(z.x,D.x),pe=Math.min(z.y,D.y),ye=Math.max(z.y,D.y);w.setTransform(this._box,`translate(${W}px,${pe}px)`),this._box.style.width=ne-W+"px",this._box.style.height=ye-pe+"px"}mouseupWindow(d,I){if(!this._active||d.button!==0)return;const D=this._startPos,z=I;if(this.reset(),w.suppressClick(),D.x!==z.x||D.y!==z.y)return this._map.fire(new r.Event("boxzoomend",{originalEvent:d})),{cameraAnimation:W=>W.fitScreenCoordinates(D,z,this._map.getBearing(),{linear:!0})};this._fireEvent("boxzoomcancel",d)}keydown(d){this._active&&d.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",d))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair","mapboxgl-crosshair"),this._box&&(w.remove(this._box),this._box=null),w.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(d,I){return this._map.fire(new r.Event(d,{originalEvent:I}))}}function Xr(B,d){if(B.length!==d.length)throw new Error(`The number of touches and points are not equal - touches ${B.length}, points ${d.length}`);const I={};for(let D=0;D<B.length;D++)I[B[D].identifier]=d[D];return I}class ga{constructor(d){this.reset(),this.numTouches=d.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(d,I,D){(this.centroid||D.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=d.timeStamp),D.length===this.numTouches&&(this.centroid=function(z){const W=new r.pointGeometry(0,0);for(const ne of z)W._add(ne);return W.div(z.length)}(I),this.touches=Xr(D,I)))}touchmove(d,I,D){if(this.aborted||!this.centroid)return;const z=Xr(D,I);for(const W in this.touches){const ne=this.touches[W],pe=z[W];(!pe||pe.dist(ne)>30)&&(this.aborted=!0)}}touchend(d,I,D){if((!this.centroid||d.timeStamp-this.startTime>500)&&(this.aborted=!0),D.length===0){const z=!this.aborted&&this.centroid;if(this.reset(),z)return z}}}class Il{constructor(d){this.singleTap=new ga(d),this.numTaps=d.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(d,I,D){this.singleTap.touchstart(d,I,D)}touchmove(d,I,D){this.singleTap.touchmove(d,I,D)}touchend(d,I,D){const z=this.singleTap.touchend(d,I,D);if(z){const W=d.timeStamp-this.lastTime<500,ne=!this.lastTap||this.lastTap.dist(z)<30;if(W&&ne||this.reset(),this.count++,this.lastTime=d.timeStamp,this.lastTap=z,this.count===this.numTaps)return this.reset(),z}}}class Uu{constructor(){this._zoomIn=new Il({numTouches:1,numTaps:2}),this._zoomOut=new Il({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(d,I,D){this._zoomIn.touchstart(d,I,D),this._zoomOut.touchstart(d,I,D)}touchmove(d,I,D){this._zoomIn.touchmove(d,I,D),this._zoomOut.touchmove(d,I,D)}touchend(d,I,D){const z=this._zoomIn.touchend(d,I,D),W=this._zoomOut.touchend(d,I,D);return z?(this._active=!0,d.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:ne=>ne.easeTo({duration:300,zoom:ne.getZoom()+1,around:ne.unproject(z)},{originalEvent:d})}):W?(this._active=!0,d.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:ne=>ne.easeTo({duration:300,zoom:ne.getZoom()-1,around:ne.unproject(W)},{originalEvent:d})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}const vu={0:1,2:2};class Gs{constructor(d){this.reset(),this._clickTolerance=d.clickTolerance||1}reset(){this._active=!1,this._moved=!1,delete this._lastPoint,delete this._eventButton}_correctButton(d,I){return!1}_move(d,I){return{}}mousedown(d,I){if(this._lastPoint)return;const D=w.mouseButton(d);this._correctButton(d,D)&&(this._lastPoint=I,this._eventButton=D)}mousemoveWindow(d,I){const D=this._lastPoint;if(D){if(d.preventDefault(),function(z,W){const ne=vu[W];return z.buttons===void 0||(z.buttons&ne)!==ne}(d,this._eventButton))this.reset();else if(this._moved||!(I.dist(D)<this._clickTolerance))return this._moved=!0,this._lastPoint=I,this._move(D,I)}}mouseupWindow(d){this._lastPoint&&w.mouseButton(d)===this._eventButton&&(this._moved&&w.suppressClick(),this.reset())}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Tl extends Gs{mousedown(d,I){super.mousedown(d,I),this._lastPoint&&(this._active=!0)}_correctButton(d,I){return I===0&&!d.ctrlKey}_move(d,I){return{around:I,panDelta:I.sub(d)}}}class ps extends Gs{_correctButton(d,I){return I===0&&d.ctrlKey||I===2}_move(d,I){const D=.8*(I.x-d.x);if(D)return this._active=!0,{bearingDelta:D}}contextmenu(d){d.preventDefault()}}class Pn extends Gs{_correctButton(d,I){return I===0&&d.ctrlKey||I===2}_move(d,I){const D=-.5*(I.y-d.y);if(D)return this._active=!0,{pitchDelta:D}}contextmenu(d){d.preventDefault()}}class zo{constructor(d,I){this._minTouches=d.cooperativeGestures?2:1,this._clickTolerance=d.clickTolerance||1,this._map=I,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new r.pointGeometry(0,0),setTimeout(()=>{this._cancelCooperativeMessage=!1},200)}touchstart(d,I,D){return this._calculateTransform(d,I,D)}touchmove(d,I,D){if(this._map._cooperativeGestures&&(this._minTouches===2&&D.length<2&&!this._cancelCooperativeMessage?this._map._onCooperativeGesture(d,!1,D.length):this._cancelCooperativeMessage||(this._cancelCooperativeMessage=!0)),this._active&&!(D.length<this._minTouches))return d.preventDefault(),this._calculateTransform(d,I,D)}touchend(d,I,D){this._calculateTransform(d,I,D),this._active&&D.length<this._minTouches&&this.reset()}touchcancel(){this.reset()}_calculateTransform(d,I,D){D.length>0&&(this._active=!0);const z=Xr(D,I),W=new r.pointGeometry(0,0),ne=new r.pointGeometry(0,0);let pe=0;for(const ke in z){const ze=z[ke],Qe=this._touches[ke];Qe&&(W._add(ze),ne._add(ze.sub(Qe)),pe++,z[ke]=ze)}if(this._touches=z,pe<this._minTouches||!ne.mag())return;const ye=ne.div(pe);return this._sum._add(ye),this._sum.mag()<this._clickTolerance?void 0:{around:W.div(pe),panDelta:ye}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Hr{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}_start(d){}_move(d,I,D){return{}}touchstart(d,I,D){this._firstTwoTouches||D.length<2||(this._firstTwoTouches=[D[0].identifier,D[1].identifier],this._start([I[0],I[1]]))}touchmove(d,I,D){if(!this._firstTwoTouches)return;d.preventDefault();const[z,W]=this._firstTwoTouches,ne=Po(D,I,z),pe=Po(D,I,W);if(!ne||!pe)return;const ye=this._aroundCenter?null:ne.add(pe).div(2);return this._move([ne,pe],ye,d)}touchend(d,I,D){if(!this._firstTwoTouches)return;const[z,W]=this._firstTwoTouches,ne=Po(D,I,z),pe=Po(D,I,W);ne&&pe||(this._active&&w.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(d){this._enabled=!0,this._aroundCenter=!!d&&d.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}function Po(B,d,I){for(let D=0;D<B.length;D++)if(B[D].identifier===I)return d[D]}function is(B,d){return Math.log(B/d)/Math.LN2}class yn extends Hr{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(d){this._startDistance=this._distance=d[0].dist(d[1])}_move(d,I){const D=this._distance;if(this._distance=d[0].dist(d[1]),this._active||!(Math.abs(is(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:is(this._distance,D),pinchAround:I}}}function Da(B,d){return 180*B.angleWith(d)/Math.PI}class Vu extends Hr{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(d){this._startVector=this._vector=d[0].sub(d[1]),this._minDiameter=d[0].dist(d[1])}_move(d,I){const D=this._vector;if(this._vector=d[0].sub(d[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:Da(this._vector,D),pinchAround:I}}_isBelowThreshold(d){this._minDiameter=Math.min(this._minDiameter,d.mag());const I=25/(Math.PI*this._minDiameter)*360,D=Da(d,this._startVector);return Math.abs(D)<I}}function qu(B){return Math.abs(B.y)>Math.abs(B.x)}class Fc extends Hr{constructor(d){super(),this._map=d}reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}touchstart(d,I,D){super.touchstart(d,I,D),this._currentTouchCount=D.length}_start(d){this._lastPoints=d,qu(d[0].sub(d[1]))&&(this._valid=!1)}_move(d,I,D){if(this._map._cooperativeGestures&&this._currentTouchCount<3)return;const z=d[0].sub(this._lastPoints[0]),W=d[1].sub(this._lastPoints[1]);return this._valid=this.gestureBeginsVertically(z,W,D.timeStamp),this._valid?(this._lastPoints=d,this._active=!0,{pitchDelta:(z.y+W.y)/2*-.5}):void 0}gestureBeginsVertically(d,I,D){if(this._valid!==void 0)return this._valid;const z=d.mag()>=2,W=I.mag()>=2;if(!z&&!W)return;if(!z||!W)return this._firstMove===void 0&&(this._firstMove=D),D-this._firstMove<100&&void 0;const ne=d.y>0==I.y>0;return qu(d)&&qu(I)&&ne}}const uh={panStep:100,bearingStep:15,pitchStep:10};class ch{constructor(){const d=uh;this._panStep=d.panStep,this._bearingStep=d.bearingStep,this._pitchStep=d.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(d){if(d.altKey||d.ctrlKey||d.metaKey)return;let I=0,D=0,z=0,W=0,ne=0;switch(d.keyCode){case 61:case 107:case 171:case 187:I=1;break;case 189:case 109:case 173:I=-1;break;case 37:d.shiftKey?D=-1:(d.preventDefault(),W=-1);break;case 39:d.shiftKey?D=1:(d.preventDefault(),W=1);break;case 38:d.shiftKey?z=1:(d.preventDefault(),ne=-1);break;case 40:d.shiftKey?z=-1:(d.preventDefault(),ne=1);break;default:return}return this._rotationDisabled&&(D=0,z=0),{cameraAnimation:pe=>{const ye=pe.getZoom();pe.easeTo({duration:300,easeId:"keyboardHandler",easing:Fh,zoom:I?Math.round(ye)+I*(d.shiftKey?2:1):ye,bearing:pe.getBearing()+D*this._bearingStep,pitch:pe.getPitch()+z*this._pitchStep,offset:[-W*this._panStep,-ne*this._panStep],center:pe.getCenter()},{originalEvent:d})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function Fh(B){return B*(2-B)}const Tr=4.000244140625;class Rc{constructor(d,I){this._map=d,this._el=d.getCanvasContainer(),this._handler=I,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222,r.bindAll(["_onTimeout"],this)}setZoomRate(d){this._defaultZoomRate=d}setWheelZoomRate(d){this._wheelZoomRate=d}isEnabled(){return!!this._enabled}isActive(){return!!this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(d){this.isEnabled()||(this._enabled=!0,this._aroundCenter=d&&d.around==="center")}disable(){this.isEnabled()&&(this._enabled=!1)}wheel(d){if(!this.isEnabled())return;if(this._map._cooperativeGestures){if(!this._map._metaPress)return;d.preventDefault()}let I=d.deltaMode===WheelEvent.DOM_DELTA_LINE?40*d.deltaY:d.deltaY;const D=r.exported.now(),z=D-(this._lastWheelEventTime||0);this._lastWheelEventTime=D,I!==0&&I%Tr==0?this._type="wheel":I!==0&&Math.abs(I)<4?this._type="trackpad":z>400?(this._type=null,this._lastValue=I,this._timeout=setTimeout(this._onTimeout,40,d)):this._type||(this._type=Math.abs(z*I)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,I+=this._lastValue)),d.shiftKey&&I&&(I/=4),this._type&&(this._lastWheelEvent=d,this._delta-=I,this._active||this._start(d)),d.preventDefault()}_onTimeout(d){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(d)}_start(d){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const I=w.mousePos(this._el,d);this._around=r.LngLat.convert(this._aroundCenter?this._map.getCenter():this._map.unproject(I)),this._aroundPoint=this._map.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const d=this._map.transform;if(this._delta!==0){const pe=this._type==="wheel"&&Math.abs(this._delta)>Tr?this._wheelZoomRate:this._defaultZoomRate;let ye=2/(1+Math.exp(-Math.abs(this._delta*pe)));this._delta<0&&ye!==0&&(ye=1/ye);const ke=typeof this._targetZoom=="number"?d.zoomScale(this._targetZoom):d.scale;this._targetZoom=Math.min(d.maxZoom,Math.max(d.minZoom,d.scaleZoom(ke*ye))),this._type==="wheel"&&(this._startZoom=d.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}const I=typeof this._targetZoom=="number"?this._targetZoom:d.zoom,D=this._startZoom,z=this._easing;let W,ne=!1;if(this._type==="wheel"&&D&&z){const pe=Math.min((r.exported.now()-this._lastWheelEventTime)/200,1),ye=z(pe);W=r.number(D,I,ye),pe<1?this._frameId||(this._frameId=!0):ne=!0}else W=I,ne=!0;return this._active=!0,ne&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._handler._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!ne,zoomDelta:W-d.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(d){let I=r.ease;if(this._prevEase){const D=this._prevEase,z=(r.exported.now()-D.start)/D.duration,W=D.easing(z+.01)-D.easing(z),ne=.27/Math.sqrt(W*W+1e-4)*.01,pe=Math.sqrt(.0729-ne*ne);I=r.bezier(ne,pe,.25,1)}return this._prevEase={start:r.exported.now(),duration:d,easing:I},I}reset(){this._active=!1}}class ac{constructor(d,I){this._clickZoom=d,this._tapZoom=I}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class Jo{constructor(){this.reset()}reset(){this._active=!1}dblclick(d,I){return d.preventDefault(),{cameraAnimation:D=>{D.easeTo({duration:300,zoom:D.getZoom()+(d.shiftKey?-1:1),around:D.unproject(I)},{originalEvent:d})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Ks{constructor(){this._tap=new Il({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,this._tap.reset()}touchstart(d,I,D){this._swipePoint||(this._tapTime&&d.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?D.length>0&&(this._swipePoint=I[0],this._swipeTouch=D[0].identifier):this._tap.touchstart(d,I,D))}touchmove(d,I,D){if(this._tapTime){if(this._swipePoint){if(D[0].identifier!==this._swipeTouch)return;const z=I[0],W=z.y-this._swipePoint.y;return this._swipePoint=z,d.preventDefault(),this._active=!0,{zoomDelta:W/128}}}else this._tap.touchmove(d,I,D)}touchend(d,I,D){this._tapTime?this._swipePoint&&D.length===0&&this.reset():this._tap.touchend(d,I,D)&&(this._tapTime=d.timeStamp)}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Xo{constructor(d,I,D){this._el=d,this._mousePan=I,this._touchPan=D}enable(d){this._inertiaOptions=d||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan","mapboxgl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan","mapboxgl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class Va{constructor(d,I,D){this._pitchWithRotate=d.pitchWithRotate,this._mouseRotate=I,this._mousePitch=D}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class lc{constructor(d,I,D,z){this._el=d,this._touchZoom=I,this._touchRotate=D,this._tapDragZoom=z,this._rotationDisabled=!1,this._enabled=!0}enable(d){this._touchZoom.enable(d),this._rotationDisabled||this._touchRotate.enable(d),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate","mapboxgl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate","mapboxgl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}const bu=B=>B.zoom||B.drag||B.pitch||B.rotate;class wu extends r.Event{}function Yl(B){return B.panDelta&&B.panDelta.mag()||B.zoomDelta||B.bearingDelta||B.pitchDelta}class io{constructor(d,I){this._map=d,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new La(d),this._bearingSnap=I.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(I),r.bindAll(["handleEvent","handleWindowEvent"],this);const D=this._el;this._listeners=[[D,"touchstart",{passive:!0}],[D,"touchmove",{passive:!1}],[D,"touchend",void 0],[D,"touchcancel",void 0],[D,"mousedown",void 0],[D,"mousemove",void 0],[D,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[D,"mouseover",void 0],[D,"mouseout",void 0],[D,"dblclick",void 0],[D,"click",void 0],[D,"keydown",{capture:!1}],[D,"keyup",void 0],[D,"wheel",{passive:!1}],[D,"contextmenu",void 0],[window,"blur",void 0]];for(const[z,W,ne]of this._listeners)w.addEventListener(z,W,z===document?this.handleWindowEvent:this.handleEvent,ne)}destroy(){for(const[d,I,D]of this._listeners)w.removeEventListener(d,I,d===document?this.handleWindowEvent:this.handleEvent,D)}_addDefaultHandlers(d){const I=this._map,D=I.getCanvasContainer();this._add("mapEvent",new ju(I,d));const z=I.boxZoom=new oa(I,d);this._add("boxZoom",z);const W=new Uu,ne=new Jo;I.doubleClickZoom=new ac(ne,W),this._add("tapZoom",W),this._add("clickZoom",ne);const pe=new Ks;this._add("tapDragZoom",pe);const ye=I.touchPitch=new Fc(I);this._add("touchPitch",ye);const ke=new ps(d),ze=new Pn(d);I.dragRotate=new Va(d,ke,ze),this._add("mouseRotate",ke,["mousePitch"]),this._add("mousePitch",ze,["mouseRotate"]);const Qe=new Tl(d),rt=new zo(d,I);I.dragPan=new Xo(D,Qe,rt),this._add("mousePan",Qe),this._add("touchPan",rt,["touchZoom","touchRotate"]);const Pt=new Vu,kt=new yn;I.touchZoomRotate=new lc(D,kt,Pt,pe),this._add("touchRotate",Pt,["touchPan","touchZoom"]),this._add("touchZoom",kt,["touchPan","touchRotate"]);const Et=I.scrollZoom=new Rc(I,this);this._add("scrollZoom",Et,["mousePan"]);const si=I.keyboard=new ch;this._add("keyboard",si),this._add("blockableMapEvent",new Ma(I));for(const fi of["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"])d.interactive&&d[fi]&&I[fi].enable(d[fi])}_add(d,I,D){this._handlers.push({handlerName:d,handler:I,allowed:D}),this._handlersById[d]=I}stop(d){if(!this._updatingCamera){for(const{handler:I}of this._handlers)I.reset();this._inertia.clear(),this._fireEvents({},{},d),this._changes=[]}}isActive(){for(const{handler:d}of this._handlers)if(d.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return Boolean(bu(this._eventsInProgress))||this.isZooming()}_blockedByActive(d,I,D){for(const z in d)if(z!==D&&(!I||I.indexOf(z)<0))return!0;return!1}handleWindowEvent(d){this.handleEvent(d,`${d.type}Window`)}_getMapTouches(d){const I=[];for(const D of d)this._el.contains(D.target)&&I.push(D);return I}handleEvent(d,I){if(d.type==="blur")return void this.stop(!0);this._updatingCamera=!0;const D=d.type==="renderFrame"?void 0:d,z={needsRenderFrame:!1},W={},ne={},pe=d.touches,ye=pe?this._getMapTouches(pe):void 0,ke=ye?w.touchPos(this._el,ye):w.mousePos(this._el,d);for(const{handlerName:rt,handler:Pt,allowed:kt}of this._handlers){if(!Pt.isEnabled())continue;let Et;this._blockedByActive(ne,kt,rt)?Pt.reset():Pt[I||d.type]&&(Et=Pt[I||d.type](d,ke,ye),this.mergeHandlerResult(z,W,Et,rt,D),Et&&Et.needsRenderFrame&&this._triggerRenderFrame()),(Et||Pt.isActive())&&(ne[rt]=Pt)}const ze={};for(const rt in this._previousActiveHandlers)ne[rt]||(ze[rt]=D);this._previousActiveHandlers=ne,(Object.keys(ze).length||Yl(z))&&(this._changes.push([z,W,ze]),this._triggerRenderFrame()),(Object.keys(ne).length||Yl(z))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:Qe}=z;Qe&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],Qe(this._map))}mergeHandlerResult(d,I,D,z,W){if(!D)return;r.extend(d,D);const ne={handlerName:z,originalEvent:D.originalEvent||W};D.zoomDelta!==void 0&&(I.zoom=ne),D.panDelta!==void 0&&(I.drag=ne),D.pitchDelta!==void 0&&(I.pitch=ne),D.bearingDelta!==void 0&&(I.rotate=ne)}_applyChanges(){const d={},I={},D={};for(const[z,W,ne]of this._changes)z.panDelta&&(d.panDelta=(d.panDelta||new r.pointGeometry(0,0))._add(z.panDelta)),z.zoomDelta&&(d.zoomDelta=(d.zoomDelta||0)+z.zoomDelta),z.bearingDelta&&(d.bearingDelta=(d.bearingDelta||0)+z.bearingDelta),z.pitchDelta&&(d.pitchDelta=(d.pitchDelta||0)+z.pitchDelta),z.around!==void 0&&(d.around=z.around),z.pinchAround!==void 0&&(d.pinchAround=z.pinchAround),z.noInertia&&(d.noInertia=z.noInertia),r.extend(I,W),r.extend(D,ne);this._updateMapTransform(d,I,D),this._changes=[]}_updateMapTransform(d,I,D){const z=this._map,W=z.transform,ne=z.style&&z.style.terrain;if(!(Yl(d)||ne&&this._drag))return this._fireEvents(I,D,!0);let{panDelta:pe,zoomDelta:ye,bearingDelta:ke,pitchDelta:ze,around:Qe,pinchAround:rt}=d;rt!==void 0&&(Qe=rt),z._stop(!0),Qe=Qe||z.transform.centerPoint;const Pt=W.pointLocation(pe?Qe.sub(pe):Qe);ke&&(W.bearing+=ke),ze&&(W.pitch+=ze),ye&&(W.zoom+=ye),ne?I.drag&&!this._drag?(this._drag={center:W.centerPoint,lngLat:W.pointLocation(Qe),point:Qe,handlerName:I.drag.handlerName},z.fire(new r.Event("freezeElevation",{freeze:!0}))):this._drag&&D[this._drag.handlerName]?(z.fire(new r.Event("freezeElevation",{freeze:!1})),this._drag=null):I.drag&&this._drag&&(W.center=W.pointLocation(W.centerPoint.sub(pe))):W.setLocationAtPoint(Pt,Qe),this._map._update(),d.noInertia||this._inertia.record(d),this._fireEvents(I,D,!0)}_fireEvents(d,I,D){const z=bu(this._eventsInProgress),W=bu(d),ne={};for(const ze in d){const{originalEvent:Qe}=d[ze];this._eventsInProgress[ze]||(ne[`${ze}start`]=Qe),this._eventsInProgress[ze]=d[ze]}!z&&W&&this._fireEvent("movestart",W.originalEvent);for(const ze in ne)this._fireEvent(ze,ne[ze]);W&&this._fireEvent("move",W.originalEvent);for(const ze in d){const{originalEvent:Qe}=d[ze];this._fireEvent(ze,Qe)}const pe={};let ye;for(const ze in this._eventsInProgress){const{handlerName:Qe,originalEvent:rt}=this._eventsInProgress[ze];this._handlersById[Qe].isActive()||(delete this._eventsInProgress[ze],ye=I[Qe]||rt,pe[`${ze}end`]=ye)}for(const ze in pe)this._fireEvent(ze,pe[ze]);const ke=bu(this._eventsInProgress);if(D&&(z||W)&&!ke){this._updatingCamera=!0;const ze=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),Qe=rt=>rt!==0&&-this._bearingSnap<rt&&rt<this._bearingSnap;ze?(Qe(ze.bearing||this._map.getBearing())&&(ze.bearing=0),this._map.easeTo(ze,{originalEvent:ye})):(this._map.fire(new r.Event("moveend",{originalEvent:ye})),Qe(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}}_fireEvent(d,I){this._map.fire(new r.Event(d,I?{originalEvent:I}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(d=>{delete this._frameId,this.handleEvent(new wu("renderFrame",{timeStamp:d})),this._applyChanges()})}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}const ya={extend:(B,...d)=>r.extend(B,...d),run(B){B()},logToElement(B,d=!1,I="log"){const D=window.document.getElementById(I);D&&(d&&(D.innerHTML=""),D.innerHTML+=`<br>${B}`)}};class No extends r.Evented{constructor(d,I){super(),this._moving=!1,this._zooming=!1,this.transform=d,this._bearingSnap=I.bearingSnap,r.bindAll(["_renderFrameCallback"],this)}getCenter(){return new r.LngLat(this.transform.center.lng,this.transform.center.lat)}setCenter(d,I){return this.jumpTo({center:d},I)}panBy(d,I,D){return d=r.pointGeometry.convert(d).mult(-1),this.panTo(this.transform.center,r.extend({offset:d},I),D)}panTo(d,I,D){return this.easeTo(r.extend({center:d},I),D)}getZoom(){return this.transform.zoom}setZoom(d,I){return this.jumpTo({zoom:d},I),this}zoomTo(d,I,D){return this.easeTo(r.extend({zoom:d},I),D)}zoomIn(d,I){return this.zoomTo(this.getZoom()+1,d,I),this}zoomOut(d,I){return this.zoomTo(this.getZoom()-1,d,I),this}getBearing(){return this.transform.bearing}setBearing(d,I){return this.jumpTo({bearing:d},I),this}getPadding(){return this.transform.padding}setPadding(d,I){return this.jumpTo({padding:d},I),this}rotateTo(d,I,D){return this.easeTo(r.extend({bearing:d},I),D)}resetNorth(d,I){return this.rotateTo(0,r.extend({duration:1e3},d),I),this}resetNorthPitch(d,I){return this.easeTo(r.extend({bearing:0,pitch:0,duration:1e3},d),I),this}snapToNorth(d,I){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(d,I):this}getPitch(){return this.transform.pitch}setPitch(d,I){return this.jumpTo({pitch:d},I),this}cameraForBounds(d,I){d=r.LngLatBounds.convert(d);const D=I&&I.bearing||0;return this._cameraForBoxAndBearing(d.getNorthWest(),d.getSouthEast(),D,I)}_cameraForBoxAndBearing(d,I,D,z){const W={top:0,bottom:0,right:0,left:0};if(typeof(z=r.extend({padding:W,offset:[0,0],maxZoom:this.transform.maxZoom},z)).padding=="number"){const Ei=z.padding;z.padding={top:Ei,bottom:Ei,right:Ei,left:Ei}}z.padding=r.extend(W,z.padding);const ne=this.transform,pe=ne.padding,ye=ne.project(r.LngLat.convert(d)),ke=ne.project(r.LngLat.convert(I)),ze=ye.rotate(-D*Math.PI/180),Qe=ke.rotate(-D*Math.PI/180),rt=new r.pointGeometry(Math.max(ze.x,Qe.x),Math.max(ze.y,Qe.y)),Pt=new r.pointGeometry(Math.min(ze.x,Qe.x),Math.min(ze.y,Qe.y)),kt=rt.sub(Pt),Et=(ne.width-(pe.left+pe.right+z.padding.left+z.padding.right))/kt.x,si=(ne.height-(pe.top+pe.bottom+z.padding.top+z.padding.bottom))/kt.y;if(si<0||Et<0)return void r.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.");const fi=Math.min(ne.scaleZoom(ne.scale*Math.min(Et,si)),z.maxZoom),xi=r.pointGeometry.convert(z.offset),Nt=new r.pointGeometry((z.padding.left-z.padding.right)/2,(z.padding.top-z.padding.bottom)/2).rotate(D*Math.PI/180),Pi=xi.add(Nt).mult(ne.scale/ne.zoomScale(fi));return{center:ne.unproject(ye.add(ke).div(2).sub(Pi)),zoom:fi,bearing:D}}fitBounds(d,I,D){return this._fitInternal(this.cameraForBounds(d,I),I,D)}fitScreenCoordinates(d,I,D,z,W){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(r.pointGeometry.convert(d)),this.transform.pointLocation(r.pointGeometry.convert(I)),D,z),z,W)}_fitInternal(d,I,D){return d?(delete(I=r.extend(d,I)).padding,I.linear?this.easeTo(I,D):this.flyTo(I,D)):this}jumpTo(d,I){this.stop();const D=this.transform;let z=!1,W=!1,ne=!1;return"zoom"in d&&D.zoom!==+d.zoom&&(z=!0,D.zoom=+d.zoom),d.center!==void 0&&(D.center=r.LngLat.convert(d.center)),"bearing"in d&&D.bearing!==+d.bearing&&(W=!0,D.bearing=+d.bearing),"pitch"in d&&D.pitch!==+d.pitch&&(ne=!0,D.pitch=+d.pitch),d.padding==null||D.isPaddingEqual(d.padding)||(D.padding=d.padding),this.fire(new r.Event("movestart",I)).fire(new r.Event("move",I)),z&&this.fire(new r.Event("zoomstart",I)).fire(new r.Event("zoom",I)).fire(new r.Event("zoomend",I)),W&&this.fire(new r.Event("rotatestart",I)).fire(new r.Event("rotate",I)).fire(new r.Event("rotateend",I)),ne&&this.fire(new r.Event("pitchstart",I)).fire(new r.Event("pitch",I)).fire(new r.Event("pitchend",I)),this.fire(new r.Event("moveend",I))}calculateCameraOptionsFromTo(d,I,D,z=0){const W=r.MercatorCoordinate.fromLngLat(d,I),ne=r.MercatorCoordinate.fromLngLat(D,z),pe=ne.x-W.x,ye=ne.y-W.y,ke=ne.z-W.z,ze=Math.hypot(pe,ye,ke);if(ze===0)throw new Error("Can't calculate camera options with same From and To");const Qe=Math.hypot(pe,ye),rt=this.transform.scaleZoom(this.transform.cameraToCenterDistance/ze/this.transform.tileSize),Pt=180*Math.atan2(pe,-ye)/Math.PI;let kt=180*Math.acos(Qe/ze)/Math.PI;return kt=ke<0?90-kt:90+kt,{center:ne.toLngLat(),zoom:rt,pitch:kt,bearing:Pt}}easeTo(d,I){this._stop(!1,d.easeId),((d=r.extend({offset:[0,0],duration:500,easing:r.ease},d)).animate===!1||!d.essential&&r.exported.prefersReducedMotion)&&(d.duration=0);const D=this.transform,z=this.getZoom(),W=this.getBearing(),ne=this.getPitch(),pe=this.getPadding(),ye="zoom"in d?+d.zoom:z,ke="bearing"in d?this._normalizeBearing(d.bearing,W):W,ze="pitch"in d?+d.pitch:ne,Qe="padding"in d?d.padding:D.padding,rt=r.pointGeometry.convert(d.offset);let Pt=D.centerPoint.add(rt);const kt=D.pointLocation(Pt),Et=r.LngLat.convert(d.center||kt);this._normalizeCenter(Et);const si=D.project(kt),fi=D.project(Et).sub(si),xi=D.zoomScale(ye-z);let Nt,Pi;d.around&&(Nt=r.LngLat.convert(d.around),Pi=D.locationPoint(Nt));const Ei={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||ye!==z,this._rotating=this._rotating||W!==ke,this._pitching=this._pitching||ze!==ne,this._padding=!D.isPaddingEqual(Qe),this._easeId=d.easeId,this._prepareEase(I,d.noMoveStart,Ei),this._ease(Vi=>{if(this._zooming&&(D.zoom=r.number(z,ye,Vi)),this._rotating&&(D.bearing=r.number(W,ke,Vi)),this._pitching&&(D.pitch=r.number(ne,ze,Vi)),this._padding&&(D.interpolatePadding(pe,Qe,Vi),Pt=D.centerPoint.add(rt)),Nt)D.setLocationAtPoint(Nt,Pi);else{const Ni=D.zoomScale(D.zoom-z),cn=ye>z?Math.min(2,xi):Math.max(.5,xi),zi=Math.pow(cn,1-Vi),Rn=D.unproject(si.add(fi.mult(Vi*zi)).mult(Ni));D.setLocationAtPoint(D.renderWorldCopies?Rn.wrap():Rn,Pt)}this._fireMoveEvents(I)},Vi=>{this._afterEase(I,Vi)},d),this}_prepareEase(d,I,D={}){this._moving=!0,this.fire(new r.Event("freezeElevation",{freeze:!0})),I||D.moving||this.fire(new r.Event("movestart",d)),this._zooming&&!D.zooming&&this.fire(new r.Event("zoomstart",d)),this._rotating&&!D.rotating&&this.fire(new r.Event("rotatestart",d)),this._pitching&&!D.pitching&&this.fire(new r.Event("pitchstart",d))}_fireMoveEvents(d){this.fire(new r.Event("move",d)),this._zooming&&this.fire(new r.Event("zoom",d)),this._rotating&&this.fire(new r.Event("rotate",d)),this._pitching&&this.fire(new r.Event("pitch",d))}_afterEase(d,I){if(this._easeId&&I&&this._easeId===I)return;delete this._easeId,this.fire(new r.Event("freezeElevation",{freeze:!1}));const D=this._zooming,z=this._rotating,W=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,D&&this.fire(new r.Event("zoomend",d)),z&&this.fire(new r.Event("rotateend",d)),W&&this.fire(new r.Event("pitchend",d)),this.fire(new r.Event("moveend",d))}flyTo(d,I){if(!d.essential&&r.exported.prefersReducedMotion){const j=r.pick(d,["center","zoom","bearing","pitch","around"]);return this.jumpTo(j,I)}this.stop(),d=r.extend({offset:[0,0],speed:1.2,curve:1.42,easing:r.ease},d);const D=this.transform,z=this.getZoom(),W=this.getBearing(),ne=this.getPitch(),pe=this.getPadding(),ye="zoom"in d?r.clamp(+d.zoom,D.minZoom,D.maxZoom):z,ke="bearing"in d?this._normalizeBearing(d.bearing,W):W,ze="pitch"in d?+d.pitch:ne,Qe="padding"in d?d.padding:D.padding,rt=D.zoomScale(ye-z),Pt=r.pointGeometry.convert(d.offset);let kt=D.centerPoint.add(Pt);const Et=D.pointLocation(kt),si=r.LngLat.convert(d.center||Et);this._normalizeCenter(si);const fi=D.project(Et),xi=D.project(si).sub(fi);let Nt=d.curve;const Pi=Math.max(D.width,D.height),Ei=Pi/rt,Vi=xi.mag();if("minZoom"in d){const j=r.clamp(Math.min(d.minZoom,z,ye),D.minZoom,D.maxZoom),K=Pi/D.zoomScale(j-z);Nt=Math.sqrt(K/Vi*2)}const Ni=Nt*Nt;function cn(j){const K=(Ei*Ei-Pi*Pi+(j?-1:1)*Ni*Ni*Vi*Vi)/(2*(j?Ei:Pi)*Ni*Vi);return Math.log(Math.sqrt(K*K+1)-K)}function zi(j){return(Math.exp(j)-Math.exp(-j))/2}function Rn(j){return(Math.exp(j)+Math.exp(-j))/2}const _n=cn(0);let qn=function(j){return Rn(_n)/Rn(_n+Nt*j)},Er=function(j){return Pi*((Rn(_n)*(zi(K=_n+Nt*j)/Rn(K))-zi(_n))/Ni)/Vi;var K},Mr=(cn(1)-_n)/Nt;if(Math.abs(Vi)<1e-6||!isFinite(Mr)){if(Math.abs(Pi-Ei)<1e-6)return this.easeTo(d,I);const j=Ei<Pi?-1:1;Mr=Math.abs(Math.log(Ei/Pi))/Nt,Er=function(){return 0},qn=function(K){return Math.exp(j*Nt*K)}}return d.duration="duration"in d?+d.duration:1e3*Mr/("screenSpeed"in d?+d.screenSpeed/Nt:+d.speed),d.maxDuration&&d.duration>d.maxDuration&&(d.duration=0),this._zooming=!0,this._rotating=W!==ke,this._pitching=ze!==ne,this._padding=!D.isPaddingEqual(Qe),this._prepareEase(I,!1),this._ease(j=>{const K=j*Mr,ue=1/qn(K);D.zoom=j===1?ye:z+D.scaleZoom(ue),this._rotating&&(D.bearing=r.number(W,ke,j)),this._pitching&&(D.pitch=r.number(ne,ze,j)),this._padding&&(D.interpolatePadding(pe,Qe,j),kt=D.centerPoint.add(Pt));const be=j===1?si:D.unproject(fi.add(xi.mult(Er(K))).mult(ue));D.setLocationAtPoint(D.renderWorldCopies?be.wrap():be,kt),this._fireMoveEvents(I)},()=>this._afterEase(I),d),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(d,I){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){const D=this._onEaseEnd;delete this._onEaseEnd,D.call(this,I)}if(!d){const D=this.handlers;D&&D.stop(!1)}return this}_ease(d,I,D){D.animate===!1||D.duration===0?(d(1),I()):(this._easeStart=r.exported.now(),this._easeOptions=D,this._onEaseFrame=d,this._onEaseEnd=I,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_renderFrameCallback(){const d=Math.min((r.exported.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(d)),d<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()}_normalizeBearing(d,I){d=r.wrap(d,-180,180);const D=Math.abs(d-I);return Math.abs(d-360-I)<D&&(d-=360),Math.abs(d+360-I)<D&&(d+=360),d}_normalizeCenter(d){const I=this.transform;if(!I.renderWorldCopies||I.lngRange)return;const D=d.lng-I.center.lng;d.lng+=D>180?-360:D<-180?360:0}}class xu{constructor(d={}){this.options=d,r.bindAll(["_toggleAttribution","_updateData","_updateCompact","_updateCompactMinimize"],this)}getDefaultPosition(){return"bottom-right"}onAdd(d){return this._map=d,this._compact=this.options&&this.options.compact,this._container=w.create("details","maplibregl-ctrl maplibregl-ctrl-attrib mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._compactButton=w.create("summary","maplibregl-ctrl-attrib-button mapboxgl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=w.create("div","maplibregl-ctrl-attrib-inner mapboxgl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("terrain",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){w.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("terrain",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._attribHTML=void 0}_setElementTitle(d,I){const D=this._map._getUIString(`AttributionControl.${I}`);d.title=D,d.setAttribute("aria-label",D)}_toggleAttribution(){this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show","mapboxgl-compact-show")):(this._container.classList.add("maplibregl-compact-show","mapboxgl-compact-show"),this._container.removeAttribute("open")))}_updateData(d){!d||d.sourceDataType!=="metadata"&&d.sourceDataType!=="visibility"&&d.dataType!=="style"&&d.type!=="terrain"||this._updateAttributions()}_updateAttributions(){if(!this._map.style)return;let d=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?d=d.concat(this.options.customAttribution.map(z=>typeof z!="string"?"":z)):typeof this.options.customAttribution=="string"&&d.push(this.options.customAttribution)),this._map.style.stylesheet){const z=this._map.style.stylesheet;this.styleOwner=z.owner,this.styleId=z.id}const I=this._map.style.sourceCaches;for(const z in I){const W=I[z];if(W.used||W.usedForTerrain){const ne=W.getSource();ne.attribution&&d.indexOf(ne.attribution)<0&&d.push(ne.attribution)}}d=d.filter(z=>String(z).trim()),d.sort((z,W)=>z.length-W.length),d=d.filter((z,W)=>{for(let ne=W+1;ne<d.length;ne++)if(d[ne].indexOf(z)>=0)return!1;return!0});const D=d.join(" | ");D!==this._attribHTML&&(this._attribHTML=D,d.length?(this._innerContainer.innerHTML=D,this._container.classList.remove("maplibregl-attrib-empty","mapboxgl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty","mapboxgl-attrib-empty"),this._updateCompact(),this._editLink=null)}_updateCompact(){this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact===!1?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","mapboxgl-compact","maplibregl-compact-show","mapboxgl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show","mapboxgl-compact","mapboxgl-compact-show"))}_updateCompactMinimize(){this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show","mapboxgl-compact-show")}}class Au{constructor(d={}){this.options=d,r.bindAll(["_updateCompact"],this)}getDefaultPosition(){return"bottom-left"}onAdd(d){this._map=d,this._compact=this.options&&this.options.compact,this._container=w.create("div","maplibregl-ctrl mapboxgl-ctrl");const I=w.create("a","maplibregl-ctrl-logo mapboxgl-ctrl-logo");return I.target="_blank",I.rel="noopener nofollow",I.href="https://maplibre.org/",I.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),I.setAttribute("rel","noopener nofollow"),this._container.appendChild(I),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){w.remove(this._container),this._map.off("resize",this._updateCompact),this._map=void 0,this._compact=void 0}_updateCompact(){const d=this._container.children;if(d.length){const I=d[0];this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact!==!1&&I.classList.add("maplibregl-compact","mapboxgl-compact"):I.classList.remove("maplibregl-compact","mapboxgl-compact")}}}class Bc{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(d){const I=++this._id;return this._queue.push({callback:d,id:I,cancelled:!1}),I}remove(d){const I=this._currentlyRunning,D=I?this._queue.concat(I):this._queue;for(const z of D)if(z.id===d)return void(z.cancelled=!0)}run(d=0){if(this._currentlyRunning)throw new Error("Attempting to run(), but is already running.");const I=this._currentlyRunning=this._queue;this._queue=[];for(const D of I)if(!D.cancelled&&(D.callback(d),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}const Rh={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm","TerrainControl.enableTerrain":"Enable terrain","TerrainControl.disableTerrain":"Disable terrain"},sl={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:void 0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,maplibreLogo:!1,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",transformRequest:null,fadeDuration:300,crossSourceCollisions:!0},Bh={showCompass:!0,showZoom:!0,visualizePitch:!1};class al{constructor(d,I,D=!1){this._clickTolerance=10,this.element=I,this.mouseRotate=new ps({clickTolerance:d.dragRotate._mouseRotate._clickTolerance}),this.map=d,D&&(this.mousePitch=new Pn({clickTolerance:d.dragRotate._mousePitch._clickTolerance})),r.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),w.addEventListener(I,"mousedown",this.mousedown),w.addEventListener(I,"touchstart",this.touchstart,{passive:!1}),w.addEventListener(I,"touchmove",this.touchmove),w.addEventListener(I,"touchend",this.touchend),w.addEventListener(I,"touchcancel",this.reset)}down(d,I){this.mouseRotate.mousedown(d,I),this.mousePitch&&this.mousePitch.mousedown(d,I),w.disableDrag()}move(d,I){const D=this.map,z=this.mouseRotate.mousemoveWindow(d,I);if(z&&z.bearingDelta&&D.setBearing(D.getBearing()+z.bearingDelta),this.mousePitch){const W=this.mousePitch.mousemoveWindow(d,I);W&&W.pitchDelta&&D.setPitch(D.getPitch()+W.pitchDelta)}}off(){const d=this.element;w.removeEventListener(d,"mousedown",this.mousedown),w.removeEventListener(d,"touchstart",this.touchstart,{passive:!1}),w.removeEventListener(d,"touchmove",this.touchmove),w.removeEventListener(d,"touchend",this.touchend),w.removeEventListener(d,"touchcancel",this.reset),this.offTemp()}offTemp(){w.enableDrag(),w.removeEventListener(window,"mousemove",this.mousemove),w.removeEventListener(window,"mouseup",this.mouseup)}mousedown(d){this.down(r.extend({},d,{ctrlKey:!0,preventDefault:()=>d.preventDefault()}),w.mousePos(this.element,d)),w.addEventListener(window,"mousemove",this.mousemove),w.addEventListener(window,"mouseup",this.mouseup)}mousemove(d){this.move(d,w.mousePos(this.element,d))}mouseup(d){this.mouseRotate.mouseupWindow(d),this.mousePitch&&this.mousePitch.mouseupWindow(d),this.offTemp()}touchstart(d){d.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=w.touchPos(this.element,d.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:()=>d.preventDefault()},this._startPos))}touchmove(d){d.targetTouches.length!==1?this.reset():(this._lastPos=w.touchPos(this.element,d.targetTouches)[0],this.move({preventDefault:()=>d.preventDefault()},this._lastPos))}touchend(d){d.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()}reset(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()}}function uc(B,d,I){if(B=new r.LngLat(B.lng,B.lat),d){const D=new r.LngLat(B.lng-360,B.lat),z=new r.LngLat(B.lng+360,B.lat),W=I.locationPoint(B).distSqr(d);I.locationPoint(D).distSqr(d)<W?B=D:I.locationPoint(z).distSqr(d)<W&&(B=z)}for(;Math.abs(B.lng-I.center.lng)>180;){const D=I.locationPoint(B);if(D.x>=0&&D.y>=0&&D.x<=I.width&&D.y<=I.height)break;B.lng>I.center.lng?B.lng-=360:B.lng+=360}return B}const er={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function yr(B,d,I){const D=B.classList;for(const z in er)D.remove(`maplibregl-${I}-anchor-${z}`,`mapboxgl-${I}-anchor-${z}`);D.add(`maplibregl-${I}-anchor-${d}`,`mapboxgl-${I}-anchor-${d}`)}class Hu extends r.Evented{constructor(d,I){if(super(),(d instanceof HTMLElement||I)&&(d=r.extend({element:d},I)),r.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress"],this),this._anchor=d&&d.anchor||"center",this._color=d&&d.color||"#3FB1CE",this._scale=d&&d.scale||1,this._draggable=d&&d.draggable||!1,this._clickTolerance=d&&d.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=d&&d.rotation||0,this._rotationAlignment=d&&d.rotationAlignment||"auto",this._pitchAlignment=d&&d.pitchAlignment&&d.pitchAlignment!=="auto"?d.pitchAlignment:this._rotationAlignment,d&&d.element)this._element=d.element,this._offset=r.pointGeometry.convert(d&&d.offset||[0,0]);else{this._defaultMarker=!0,this._element=w.create("div"),this._element.setAttribute("aria-label","Map marker");const D=w.createNS("http://www.w3.org/2000/svg","svg"),z=41,W=27;D.setAttributeNS(null,"display","block"),D.setAttributeNS(null,"height",`${z}px`),D.setAttributeNS(null,"width",`${W}px`),D.setAttributeNS(null,"viewBox",`0 0 ${W} ${z}`);const ne=w.createNS("http://www.w3.org/2000/svg","g");ne.setAttributeNS(null,"stroke","none"),ne.setAttributeNS(null,"stroke-width","1"),ne.setAttributeNS(null,"fill","none"),ne.setAttributeNS(null,"fill-rule","evenodd");const pe=w.createNS("http://www.w3.org/2000/svg","g");pe.setAttributeNS(null,"fill-rule","nonzero");const ye=w.createNS("http://www.w3.org/2000/svg","g");ye.setAttributeNS(null,"transform","translate(3.0, 29.0)"),ye.setAttributeNS(null,"fill","#000000");const ke=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(const xi of ke){const Nt=w.createNS("http://www.w3.org/2000/svg","ellipse");Nt.setAttributeNS(null,"opacity","0.04"),Nt.setAttributeNS(null,"cx","10.5"),Nt.setAttributeNS(null,"cy","5.80029008"),Nt.setAttributeNS(null,"rx",xi.rx),Nt.setAttributeNS(null,"ry",xi.ry),ye.appendChild(Nt)}const ze=w.createNS("http://www.w3.org/2000/svg","g");ze.setAttributeNS(null,"fill",this._color);const Qe=w.createNS("http://www.w3.org/2000/svg","path");Qe.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),ze.appendChild(Qe);const rt=w.createNS("http://www.w3.org/2000/svg","g");rt.setAttributeNS(null,"opacity","0.25"),rt.setAttributeNS(null,"fill","#000000");const Pt=w.createNS("http://www.w3.org/2000/svg","path");Pt.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),rt.appendChild(Pt);const kt=w.createNS("http://www.w3.org/2000/svg","g");kt.setAttributeNS(null,"transform","translate(6.0, 7.0)"),kt.setAttributeNS(null,"fill","#FFFFFF");const Et=w.createNS("http://www.w3.org/2000/svg","g");Et.setAttributeNS(null,"transform","translate(8.0, 8.0)");const si=w.createNS("http://www.w3.org/2000/svg","circle");si.setAttributeNS(null,"fill","#000000"),si.setAttributeNS(null,"opacity","0.25"),si.setAttributeNS(null,"cx","5.5"),si.setAttributeNS(null,"cy","5.5"),si.setAttributeNS(null,"r","5.4999962");const fi=w.createNS("http://www.w3.org/2000/svg","circle");fi.setAttributeNS(null,"fill","#FFFFFF"),fi.setAttributeNS(null,"cx","5.5"),fi.setAttributeNS(null,"cy","5.5"),fi.setAttributeNS(null,"r","5.4999962"),Et.appendChild(si),Et.appendChild(fi),pe.appendChild(ye),pe.appendChild(ze),pe.appendChild(rt),pe.appendChild(kt),pe.appendChild(Et),D.appendChild(pe),D.setAttributeNS(null,"height",z*this._scale+"px"),D.setAttributeNS(null,"width",W*this._scale+"px"),this._element.appendChild(D),this._offset=r.pointGeometry.convert(d&&d.offset||[0,-14])}this._element.classList.add("maplibregl-marker","mapboxgl-marker"),this._element.addEventListener("dragstart",D=>{D.preventDefault()}),this._element.addEventListener("mousedown",D=>{D.preventDefault()}),yr(this._element,this._anchor,"marker"),this._popup=null}addTo(d){return this.remove(),this._map=d,d.getCanvasContainer().appendChild(this._element),d.on("move",this._update),d.on("moveend",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._opacityTimeout&&(clearTimeout(this._opacityTimeout),delete this._opacityTimeout),this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),w.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(d){return this._lngLat=r.LngLat.convert(d),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(d){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),d){if(!("offset"in d.options)){const z=Math.sqrt(Math.pow(13.5,2)/2);d.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[z,-1*(38.1-13.5+z)],"bottom-right":[-z,-1*(38.1-13.5+z)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=d,this._lngLat&&this._popup.setLngLat(this._lngLat),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}_onKeyPress(d){const I=d.code,D=d.charCode||d.keyCode;I!=="Space"&&I!=="Enter"&&D!==32&&D!==13||this.togglePopup()}_onMapClick(d){const I=d.originalEvent.target,D=this._element;this._popup&&(I===D||D.contains(I))&&this.togglePopup()}getPopup(){return this._popup}togglePopup(){const d=this._popup;return d?(d.isOpen()?d.remove():d.addTo(this._map),this):this}_update(d){if(!this._map)return;this._map.transform.renderWorldCopies&&(this._lngLat=uc(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset);let I="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?I=`rotateZ(${this._rotation}deg)`:this._rotationAlignment==="map"&&(I=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let D="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?D="rotateX(0deg)":this._pitchAlignment==="map"&&(D=`rotateX(${this._map.getPitch()}deg)`),d&&d.type!=="moveend"||(this._pos=this._pos.round()),w.setTransform(this._element,`${er[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${D} ${I}`),this._map.style&&this._map.style.terrain&&!this._opacityTimeout&&(this._opacityTimeout=setTimeout(()=>{const z=this._map.unproject(this._pos),W=40075016686e-3*Math.abs(Math.cos(this._lngLat.lat*Math.PI/180))/Math.pow(2,this._map.transform.tileZoom+8);this._element.style.opacity=z.distanceTo(this._lngLat)>20*W?"0.2":"1.0",this._opacityTimeout=null},100))}getOffset(){return this._offset}setOffset(d){return this._offset=r.pointGeometry.convert(d),this._update(),this}_onMove(d){if(!this._isDragging){const I=this._clickTolerance||this._map._clickTolerance;this._isDragging=d.point.dist(this._pointerdownPos)>=I}this._isDragging&&(this._pos=d.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new r.Event("dragstart"))),this.fire(new r.Event("drag")))}_onUp(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new r.Event("dragend")),this._state="inactive"}_addDragHandler(d){this._element.contains(d.originalEvent.target)&&(d.preventDefault(),this._positionDelta=d.point.sub(this._pos).add(this._offset),this._pointerdownPos=d.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))}setDraggable(d){return this._draggable=!!d,this._map&&(d?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(d){return this._rotation=d||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(d){return this._rotationAlignment=d||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(d){return this._pitchAlignment=d&&d!=="auto"?d:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}}const cc={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0};let bs,Ho=0,Zl=!1;const ll={maxWidth:100,unit:"metric"};function hh(B,d,I){const D=I&&I.maxWidth||100,z=B._container.clientHeight/2,W=B.unproject([0,z]),ne=B.unproject([D,z]),pe=W.distanceTo(ne);if(I&&I.unit==="imperial"){const ye=3.2808*pe;ye>5280?Kl(d,D,ye/5280,B._getUIString("ScaleControl.Miles")):Kl(d,D,ye,B._getUIString("ScaleControl.Feet"))}else I&&I.unit==="nautical"?Kl(d,D,pe/1852,B._getUIString("ScaleControl.NauticalMiles")):pe>=1e3?Kl(d,D,pe/1e3,B._getUIString("ScaleControl.Kilometers")):Kl(d,D,pe,B._getUIString("ScaleControl.Meters"))}function Kl(B,d,I,D){const z=function(W){const ne=Math.pow(10,`${Math.floor(W)}`.length-1);let pe=W/ne;return pe=pe>=10?10:pe>=5?5:pe>=3?3:pe>=2?2:pe>=1?1:function(ye){const ke=Math.pow(10,Math.ceil(-Math.log(ye)/Math.LN10));return Math.round(ye*ke)/ke}(pe),ne*pe}(I);B.style.width=d*(z/I)+"px",B.innerHTML=`${z}&nbsp;${D}`}const ns={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},ms=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function fh(B){if(B){if(typeof B=="number"){const d=Math.round(Math.sqrt(.5*Math.pow(B,2)));return{center:new r.pointGeometry(0,0),top:new r.pointGeometry(0,B),"top-left":new r.pointGeometry(d,d),"top-right":new r.pointGeometry(-d,d),bottom:new r.pointGeometry(0,-B),"bottom-left":new r.pointGeometry(d,-d),"bottom-right":new r.pointGeometry(-d,-d),left:new r.pointGeometry(B,0),right:new r.pointGeometry(-B,0)}}if(B instanceof r.pointGeometry||Array.isArray(B)){const d=r.pointGeometry.convert(B);return{center:d,top:d,"top-left":d,"top-right":d,bottom:d,"bottom-left":d,"bottom-right":d,left:d,right:d}}return{center:r.pointGeometry.convert(B.center||[0,0]),top:r.pointGeometry.convert(B.top||[0,0]),"top-left":r.pointGeometry.convert(B["top-left"]||[0,0]),"top-right":r.pointGeometry.convert(B["top-right"]||[0,0]),bottom:r.pointGeometry.convert(B.bottom||[0,0]),"bottom-left":r.pointGeometry.convert(B["bottom-left"]||[0,0]),"bottom-right":r.pointGeometry.convert(B["bottom-right"]||[0,0]),left:r.pointGeometry.convert(B.left||[0,0]),right:r.pointGeometry.convert(B.right||[0,0])}}return fh(new r.pointGeometry(0,0))}const sa={supported:f,setRTLTextPlugin:r.setRTLTextPlugin,getRTLTextPluginStatus:r.getRTLTextPluginStatus,Map:class extends No{constructor(B){var d;if(r.PerformanceUtils.mark(r.PerformanceMarkers.create),(B=r.extend({},sl,B)).minZoom!=null&&B.maxZoom!=null&&B.minZoom>B.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(B.minPitch!=null&&B.maxPitch!=null&&B.minPitch>B.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(B.minPitch!=null&&B.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(B.maxPitch!=null&&B.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(super(new Xl(B.minZoom,B.maxZoom,B.minPitch,B.maxPitch,B.renderWorldCopies),{bearingSnap:B.bearingSnap}),this._interactive=B.interactive,this._cooperativeGestures=B.cooperativeGestures,this._maxTileCacheSize=B.maxTileCacheSize,this._failIfMajorPerformanceCaveat=B.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=B.preserveDrawingBuffer,this._antialias=B.antialias,this._trackResize=B.trackResize,this._bearingSnap=B.bearingSnap,this._refreshExpiredTiles=B.refreshExpiredTiles,this._fadeDuration=B.fadeDuration,this._crossSourceCollisions=B.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=B.collectResourceTiming,this._renderTaskQueue=new Bc,this._controls=[],this._mapId=r.uniqueId(),this._locale=r.extend({},Rh,B.locale),this._clickTolerance=B.clickTolerance,this._pixelRatio=(d=B.pixelRatio)!==null&&d!==void 0?d:devicePixelRatio,this._requestManager=new x(B.transformRequest),typeof B.container=="string"){if(this._container=document.getElementById(B.container),!this._container)throw new Error(`Container '${B.container}' not found.`)}else{if(!(B.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=B.container}if(B.maxBounds&&this.setMaxBounds(B.maxBounds),r.bindAll(["_onWindowOnline","_onWindowResize","_onMapScroll","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),this.painter===void 0)throw new Error("Failed to initialize WebGL.");this.on("move",()=>this._update(!1)),this.on("moveend",()=>this._update(!1)),this.on("zoom",()=>this._update(!0)),this.on("terrain",()=>{this.painter.terrainFacilitator.dirty=!0,this._update(!0)}),typeof window<"u"&&(addEventListener("online",this._onWindowOnline,!1),addEventListener("resize",this._onWindowResize,!1),addEventListener("orientationchange",this._onWindowResize,!1)),this.handlers=new io(this,B),this._cooperativeGestures&&this._setupCooperativeGestures(),this._hash=B.hash&&new Ta(typeof B.hash=="string"&&B.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:B.center,zoom:B.zoom,bearing:B.bearing,pitch:B.pitch}),B.bounds&&(this.resize(),this.fitBounds(B.bounds,r.extend({},B.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=B.localIdeographFontFamily,B.style&&this.setStyle(B.style,{localIdeographFontFamily:B.localIdeographFontFamily}),B.attributionControl&&this.addControl(new xu({customAttribution:B.customAttribution})),B.maplibreLogo&&this.addControl(new Au,B.logoPosition),this.on("style.load",()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet)}),this.on("data",I=>{this._update(I.dataType==="style"),this.fire(new r.Event(`${I.dataType}data`,I))}),this.on("dataloading",I=>{this.fire(new r.Event(`${I.dataType}dataloading`,I))}),this.on("dataabort",I=>{this.fire(new r.Event("sourcedataabort",I))})}_getMapId(){return this._mapId}addControl(B,d){if(d===void 0&&(d=B.getDefaultPosition?B.getDefaultPosition():"top-right"),!B||!B.onAdd)return this.fire(new r.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const I=B.onAdd(this);this._controls.push(B);const D=this._controlPositions[d];return d.indexOf("bottom")!==-1?D.insertBefore(I,D.firstChild):D.appendChild(I),this}removeControl(B){if(!B||!B.onRemove)return this.fire(new r.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const d=this._controls.indexOf(B);return d>-1&&this._controls.splice(d,1),B.onRemove(this),this}hasControl(B){return this._controls.indexOf(B)>-1}calculateCameraOptionsFromTo(B,d,I,D){return D==null&&this.style.terrain&&(D=this.transform.getElevation(I,this.style.terrain)),super.calculateCameraOptionsFromTo(B,d,I,D)}resize(B){const d=this._containerDimensions(),I=d[0],D=d[1];this._resizeCanvas(I,D,this.getPixelRatio()),this.transform.resize(I,D),this.painter.resize(I,D,this.getPixelRatio());const z=!this._moving;return z&&(this.stop(),this.fire(new r.Event("movestart",B)).fire(new r.Event("move",B))),this.fire(new r.Event("resize",B)),z&&this.fire(new r.Event("moveend",B)),this}getPixelRatio(){return this._pixelRatio}setPixelRatio(B){const[d,I]=this._containerDimensions();this._pixelRatio=B,this._resizeCanvas(d,I,B),this.painter.resize(d,I,B)}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(B){return this.transform.setMaxBounds(r.LngLatBounds.convert(B)),this._update()}setMinZoom(B){if((B=B==null?-2:B)>=-2&&B<=this.transform.maxZoom)return this.transform.minZoom=B,this._update(),this.getZoom()<B&&this.setZoom(B),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(B){if((B=B==null?22:B)>=this.transform.minZoom)return this.transform.maxZoom=B,this._update(),this.getZoom()>B&&this.setZoom(B),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(B){if((B=B==null?0:B)<0)throw new Error("minPitch must be greater than or equal to 0");if(B>=0&&B<=this.transform.maxPitch)return this.transform.minPitch=B,this._update(),this.getPitch()<B&&this.setPitch(B),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(B){if((B=B==null?60:B)>85)throw new Error("maxPitch must be less than or equal to 85");if(B>=this.transform.minPitch)return this.transform.maxPitch=B,this._update(),this.getPitch()>B&&this.setPitch(B),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(B){return this.transform.renderWorldCopies=B,this._update()}project(B){return this.transform.locationPoint(r.LngLat.convert(B),this.style&&this.style.terrain)}unproject(B){return this.transform.pointLocation(r.pointGeometry.convert(B),this.style&&this.style.terrain)}isMoving(){return this._moving||this.handlers.isMoving()}isZooming(){return this._zooming||this.handlers.isZooming()}isRotating(){return this._rotating||this.handlers.isRotating()}_createDelegatedListener(B,d,I){if(B==="mouseenter"||B==="mouseover"){let D=!1;return{layer:d,listener:I,delegates:{mousemove:W=>{const ne=this.getLayer(d)?this.queryRenderedFeatures(W.point,{layers:[d]}):[];ne.length?D||(D=!0,I.call(this,new ls(B,this,W.originalEvent,{features:ne}))):D=!1},mouseout:()=>{D=!1}}}}if(B==="mouseleave"||B==="mouseout"){let D=!1;return{layer:d,listener:I,delegates:{mousemove:ne=>{(this.getLayer(d)?this.queryRenderedFeatures(ne.point,{layers:[d]}):[]).length?D=!0:D&&(D=!1,I.call(this,new ls(B,this,ne.originalEvent)))},mouseout:ne=>{D&&(D=!1,I.call(this,new ls(B,this,ne.originalEvent)))}}}}{const D=z=>{const W=this.getLayer(d)?this.queryRenderedFeatures(z.point,{layers:[d]}):[];W.length&&(z.features=W,I.call(this,z),delete z.features)};return{layer:d,listener:I,delegates:{[B]:D}}}}on(B,d,I){if(I===void 0)return super.on(B,d);const D=this._createDelegatedListener(B,d,I);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[B]=this._delegatedListeners[B]||[],this._delegatedListeners[B].push(D);for(const z in D.delegates)this.on(z,D.delegates[z]);return this}once(B,d,I){if(I===void 0)return super.once(B,d);const D=this._createDelegatedListener(B,d,I);for(const z in D.delegates)this.once(z,D.delegates[z]);return this}off(B,d,I){return I===void 0?super.off(B,d):(this._delegatedListeners&&this._delegatedListeners[B]&&(D=>{const z=this._delegatedListeners[B];for(let W=0;W<z.length;W++){const ne=z[W];if(ne.layer===d&&ne.listener===I){for(const pe in ne.delegates)this.off(pe,ne.delegates[pe]);return z.splice(W,1),this}}})(),this)}queryRenderedFeatures(B,d){if(!this.style)return[];let I;if(d!==void 0||B===void 0||B instanceof r.pointGeometry||Array.isArray(B)||(d=B,B=void 0),d=d||{},(B=B||[[0,0],[this.transform.width,this.transform.height]])instanceof r.pointGeometry||typeof B[0]=="number")I=[r.pointGeometry.convert(B)];else{const D=r.pointGeometry.convert(B[0]),z=r.pointGeometry.convert(B[1]);I=[D,new r.pointGeometry(z.x,D.y),z,new r.pointGeometry(D.x,z.y),D]}return this.style.queryRenderedFeatures(I,d,this.transform)}querySourceFeatures(B,d){return this.style.querySourceFeatures(B,d)}setStyle(B,d){return(d=r.extend({},{localIdeographFontFamily:this._localIdeographFontFamily},d)).diff!==!1&&d.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&B?(this._diffStyle(B,d),this):(this._localIdeographFontFamily=d.localIdeographFontFamily,this._updateStyle(B,d))}setTransformRequest(B){return this._requestManager.setTransformRequest(B),this}_getUIString(B){const d=this._locale[B];if(d==null)throw new Error(`Missing UI string '${B}'`);return d}_updateStyle(B,d){return this.style&&(this.style.setEventedParent(null),this.style._remove()),B?(this.style=new $o(this,d||{}),this.style.setEventedParent(this,{style:this.style}),typeof B=="string"?this.style.loadURL(B):this.style.loadJSON(B),this):(delete this.style,this)}_lazyInitEmptyStyle(){this.style||(this.style=new $o(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(B,d){if(typeof B=="string"){const I=this._requestManager.transformRequest(B,r.ResourceType.Style);r.getJSON(I,(D,z)=>{D?this.fire(new r.ErrorEvent(D)):z&&this._updateDiff(z,d)})}else typeof B=="object"&&this._updateDiff(B,d)}_updateDiff(B,d){try{this.style.setState(B)&&this._update(!0)}catch(I){r.warnOnce(`Unable to perform style diff: ${I.message||I.error||I}.  Rebuilding the style from scratch.`),this._updateStyle(B,d)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():r.warnOnce("There is no style added to the map.")}addSource(B,d){return this._lazyInitEmptyStyle(),this.style.addSource(B,d),this._update(!0)}isSourceLoaded(B){const d=this.style&&this.style.sourceCaches[B];if(d!==void 0)return d.loaded();this.fire(new r.ErrorEvent(new Error(`There is no source with ID '${B}'`)))}setTerrain(B){return this.style.setTerrain(B),this}getTerrain(){return this.style.terrain&&this.style.terrain.options}areTilesLoaded(){const B=this.style&&this.style.sourceCaches;for(const d in B){const I=B[d]._tiles;for(const D in I){const z=I[D];if(z.state!=="loaded"&&z.state!=="errored")return!1}}return!0}addSourceType(B,d,I){return this._lazyInitEmptyStyle(),this.style.addSourceType(B,d,I)}removeSource(B){return this.style.removeSource(B),this._update(!0)}getSource(B){return this.style.getSource(B)}addImage(B,d,{pixelRatio:I=1,sdf:D=!1,stretchX:z,stretchY:W,content:ne}={}){if(this._lazyInitEmptyStyle(),d instanceof HTMLImageElement||r.isImageBitmap(d)){const{width:pe,height:ye,data:ke}=r.exported.getImageData(d);this.style.addImage(B,{data:new r.RGBAImage({width:pe,height:ye},ke),pixelRatio:I,stretchX:z,stretchY:W,content:ne,sdf:D,version:0})}else{if(d.width===void 0||d.height===void 0)return this.fire(new r.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{const{width:pe,height:ye,data:ke}=d,ze=d;this.style.addImage(B,{data:new r.RGBAImage({width:pe,height:ye},new Uint8Array(ke)),pixelRatio:I,stretchX:z,stretchY:W,content:ne,sdf:D,version:0,userImage:ze}),ze.onAdd&&ze.onAdd(this,B)}}}updateImage(B,d){const I=this.style.getImage(B);if(!I)return this.fire(new r.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const D=d instanceof HTMLImageElement||r.isImageBitmap(d)?r.exported.getImageData(d):d,{width:z,height:W,data:ne}=D;if(z===void 0||W===void 0)return this.fire(new r.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(z!==I.data.width||W!==I.data.height)return this.fire(new r.ErrorEvent(new Error("The width and height of the updated image must be that same as the previous version of the image")));const pe=!(d instanceof HTMLImageElement||r.isImageBitmap(d));I.data.replace(ne,pe),this.style.updateImage(B,I)}hasImage(B){return B?!!this.style.getImage(B):(this.fire(new r.ErrorEvent(new Error("Missing required image id"))),!1)}removeImage(B){this.style.removeImage(B)}loadImage(B,d){r.getImage(this._requestManager.transformRequest(B,r.ResourceType.Image),d)}listImages(){return this.style.listImages()}addLayer(B,d){return this._lazyInitEmptyStyle(),this.style.addLayer(B,d),this._update(!0)}moveLayer(B,d){return this.style.moveLayer(B,d),this._update(!0)}removeLayer(B){return this.style.removeLayer(B),this._update(!0)}getLayer(B){return this.style.getLayer(B)}setLayerZoomRange(B,d,I){return this.style.setLayerZoomRange(B,d,I),this._update(!0)}setFilter(B,d,I={}){return this.style.setFilter(B,d,I),this._update(!0)}getFilter(B){return this.style.getFilter(B)}setPaintProperty(B,d,I,D={}){return this.style.setPaintProperty(B,d,I,D),this._update(!0)}getPaintProperty(B,d){return this.style.getPaintProperty(B,d)}setLayoutProperty(B,d,I,D={}){return this.style.setLayoutProperty(B,d,I,D),this._update(!0)}getLayoutProperty(B,d){return this.style.getLayoutProperty(B,d)}setLight(B,d={}){return this._lazyInitEmptyStyle(),this.style.setLight(B,d),this._update(!0)}getLight(){return this.style.getLight()}setFeatureState(B,d){return this.style.setFeatureState(B,d),this._update()}removeFeatureState(B,d){return this.style.removeFeatureState(B,d),this._update()}getFeatureState(B){return this.style.getFeatureState(B)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let B=0,d=0;return this._container&&(B=this._container.clientWidth||400,d=this._container.clientHeight||300),[B,d]}_setupContainer(){const B=this._container;B.classList.add("maplibregl-map","mapboxgl-map");const d=this._canvasContainer=w.create("div","maplibregl-canvas-container mapboxgl-canvas-container",B);this._interactive&&d.classList.add("maplibregl-interactive","mapboxgl-interactive"),this._canvas=w.create("canvas","maplibregl-canvas mapboxgl-canvas",d),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map"),this._canvas.setAttribute("role","region");const I=this._containerDimensions();this._resizeCanvas(I[0],I[1],this.getPixelRatio());const D=this._controlContainer=w.create("div","maplibregl-control-container mapboxgl-control-container",B),z=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(W=>{z[W]=w.create("div",`maplibregl-ctrl-${W} mapboxgl-ctrl-${W}`,D)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_setupCooperativeGestures(){const B=this._container;this._metaPress=!1,this._cooperativeGesturesScreen=w.create("div","maplibregl-cooperative-gesture-screen",B);let d="Control",I=typeof this._cooperativeGestures!="boolean"&&this._cooperativeGestures.windowsHelpText?this._cooperativeGestures.windowsHelpText:"Use Ctrl + scroll to zoom the map";navigator.platform.indexOf("Mac")===0&&(I=typeof this._cooperativeGestures!="boolean"&&this._cooperativeGestures.macHelpText?this._cooperativeGestures.macHelpText:"Use \u2318 + scroll to zoom the map",d="Meta"),this._cooperativeGesturesScreen.innerHTML=`
            <div class="maplibregl-desktop-message">${I}</div>
            <div class="maplibregl-mobile-message">${typeof this._cooperativeGestures!="boolean"&&this._cooperativeGestures.mobileHelpText?this._cooperativeGestures.mobileHelpText:"Use two fingers to move the map"}</div>
        `,document.addEventListener("keydown",D=>{D.key===d&&(this._metaPress=!0)}),document.addEventListener("keyup",D=>{D.key===d&&(this._metaPress=!1)}),this._canvasContainer.addEventListener("wheel",D=>{this._onCooperativeGesture(D,this._metaPress,1)},!1),this._canvasContainer.classList.remove("mapboxgl-touch-drag-pan","maplibregl-touch-drag-pan")}_resizeCanvas(B,d,I){this._canvas.width=I*B,this._canvas.height=I*d,this._canvas.style.width=`${B}px`,this._canvas.style.height=`${d}px`}_setupPainter(){const B=r.extend({},f.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),d=this._canvas.getContext("webgl",B)||this._canvas.getContext("experimental-webgl",B);d?(this.painter=new yu(d,this.transform),r.exported$1.testSupport(d)):this.fire(new r.ErrorEvent(new Error("Failed to initialize WebGL")))}_contextLost(B){B.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new r.Event("webglcontextlost",{originalEvent:B}))}_contextRestored(B){this._setupPainter(),this.resize(),this._update(),this.fire(new r.Event("webglcontextrestored",{originalEvent:B}))}_onMapScroll(B){if(B.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1}_onCooperativeGesture(B,d,I){return!d&&I<2&&(this._cooperativeGesturesScreen.classList.add("maplibregl-show"),setTimeout(()=>{this._cooperativeGesturesScreen.classList.remove("maplibregl-show")},100)),!1}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(B){return this.style?(this._styleDirty=this._styleDirty||B,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(B){return this._update(),this._renderTaskQueue.add(B)}_cancelRenderFrame(B){this._renderTaskQueue.remove(B)}_render(B){let d,I=0;const D=this.painter.context.extTimerQuery;if(this.listens("gpu-timing-frame")&&(d=D.createQueryEXT(),D.beginQueryEXT(D.TIME_ELAPSED_EXT,d),I=r.exported.now()),this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(B),this._removed)return;let z=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;const ne=this.transform.zoom,pe=r.exported.now();this.style.zoomHistory.update(ne,pe);const ye=new r.EvaluationParameters(ne,{now:pe,fadeDuration:this._fadeDuration,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),ke=ye.crossFadingFactor();ke===1&&ke===this._crossFadingFactor||(z=!0,this._crossFadingFactor=ke),this.style.update(ye)}if(this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.style.terrain&&this.style.terrain.sourceCache.update(this.transform,this.style.terrain),this.transform.updateElevation(this.style.terrain),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,this._fadeDuration,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:this._fadeDuration,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer")}),this.fire(new r.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,r.PerformanceUtils.mark(r.PerformanceMarkers.load),this.fire(new r.Event("load"))),this.style&&(this.style.hasTransitions()||z)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),this.listens("gpu-timing-frame")){const ne=r.exported.now()-I;D.endQueryEXT(D.TIME_ELAPSED_EXT,d),setTimeout(()=>{const pe=D.getQueryObjectEXT(d,D.QUERY_RESULT_EXT)/1e6;D.deleteQueryEXT(d),this.fire(new r.Event("gpu-timing-frame",{cpuTime:ne,gpuTime:pe}))},50)}if(this.listens("gpu-timing-layer")){const ne=this.painter.collectGpuTimers();setTimeout(()=>{const pe=this.painter.queryGpuTimers(ne);this.fire(new r.Event("gpu-timing-layer",{layerTimes:pe}))},50)}const W=this._sourcesDirty||this._styleDirty||this._placementDirty;return W||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new r.Event("idle")),!this._loaded||this._fullyLoaded||W||(this._fullyLoaded=!0,r.PerformanceUtils.mark(r.PerformanceMarkers.fullLoad)),this}redraw(){return this.style&&(this._frame&&(this._frame.cancel(),this._frame=null),this._render(0)),this}remove(){this._hash&&this._hash.remove();for(const d of this._controls)d.onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof window<"u"&&(removeEventListener("resize",this._onWindowResize,!1),removeEventListener("orientationchange",this._onWindowResize,!1),removeEventListener("online",this._onWindowOnline,!1));const B=this.painter.context.gl.getExtension("WEBGL_lose_context");B&&B.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),w.remove(this._canvasContainer),w.remove(this._controlContainer),this._cooperativeGestures&&w.remove(this._cooperativeGesturesScreen),this._container.classList.remove("maplibregl-map","mapboxgl-map"),r.PerformanceUtils.clearMetrics(),this._removed=!0,this.fire(new r.Event("remove"))}triggerRepaint(){this.style&&!this._frame&&(this._frame=r.exported.frame(B=>{r.PerformanceUtils.frame(B),this._frame=null,this._render(B)}))}_onWindowOnline(){this._update()}_onWindowResize(B){this._trackResize&&this.resize({originalEvent:B})._update()}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(B){this._showTileBoundaries!==B&&(this._showTileBoundaries=B,this._update())}get showPadding(){return!!this._showPadding}set showPadding(B){this._showPadding!==B&&(this._showPadding=B,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(B){this._showCollisionBoxes!==B&&(this._showCollisionBoxes=B,B?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(B){this._showOverdrawInspector!==B&&(this._showOverdrawInspector=B,this._update())}get repaint(){return!!this._repaint}set repaint(B){this._repaint!==B&&(this._repaint=B,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(B){this._vertices=B,this._update()}_setCacheLimits(B,d){r.setCacheLimits(B,d)}get version(){return"2.4.0"}},NavigationControl:class{constructor(B){this.options=r.extend({},Bh,B),this._container=w.create("div","maplibregl-ctrl maplibregl-ctrl-group mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",d=>d.preventDefault()),this.options.showZoom&&(r.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in mapboxgl-ctrl-zoom-in",d=>this._map.zoomIn({},{originalEvent:d})),w.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out mapboxgl-ctrl-zoom-out",d=>this._map.zoomOut({},{originalEvent:d})),w.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(r.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("maplibregl-ctrl-compass mapboxgl-ctrl-compass",d=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:d}):this._map.resetNorth({},{originalEvent:d})}),this._compassIcon=w.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}_updateZoomButtons(){const B=this._map.getZoom(),d=B===this._map.getMaxZoom(),I=B===this._map.getMinZoom();this._zoomInButton.disabled=d,this._zoomOutButton.disabled=I,this._zoomInButton.setAttribute("aria-disabled",d.toString()),this._zoomOutButton.setAttribute("aria-disabled",I.toString())}_rotateCompassArrow(){const B=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${this._map.transform.angle*(180/Math.PI)}deg)`:`rotate(${this._map.transform.angle*(180/Math.PI)}deg)`;this._compassIcon.style.transform=B}onAdd(B){return this._map=B,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new al(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){w.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(B,d){const I=w.create("button",B,this._container);return I.type="button",I.addEventListener("click",d),I}_setButtonTitle(B,d){const I=this._map._getUIString(`NavigationControl.${d}`);B.title=I,B.setAttribute("aria-label",I)}},GeolocateControl:class extends r.Evented{constructor(B){super(),this.options=r.extend({},cc,B),r.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker"],this)}onAdd(B){var d;return this._map=B,this._container=w.create("div","maplibregl-ctrl maplibregl-ctrl-group mapboxgl-ctrl mapboxgl-ctrl-group"),d=this._setupUI,bs!==void 0?d(bs):window.navigator.permissions!==void 0?window.navigator.permissions.query({name:"geolocation"}).then(I=>{bs=I.state!=="denied",d(bs)}):(bs=!!window.navigator.geolocation,d(bs)),this._container}onRemove(){this._geolocationWatchID!==void 0&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),w.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,Ho=0,Zl=!1}_isOutOfMapMaxBounds(B){const d=this._map.getMaxBounds(),I=B.coords;return d&&(I.longitude<d.getWest()||I.longitude>d.getEast()||I.latitude<d.getSouth()||I.latitude>d.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error","mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting");break;case"ACTIVE_ERROR":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}}_onSuccess(B){if(this._map){if(this._isOutOfMapMaxBounds(B))return this._setErrorState(),this.fire(new r.Event("outofmaxbounds",B)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=B,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error","mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background");break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(B),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(B),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale","mapboxgl-user-location-dot-stale"),this.fire(new r.Event("geolocate",B)),this._finish()}}_updateCamera(B){const d=new r.LngLat(B.coords.longitude,B.coords.latitude),I=B.coords.accuracy,D=this._map.getBearing(),z=r.extend({bearing:D},this.options.fitBoundsOptions);this._map.fitBounds(d.toBounds(I),z,{geolocateSource:!0})}_updateMarker(B){if(B){const d=new r.LngLat(B.coords.longitude,B.coords.latitude);this._accuracyCircleMarker.setLngLat(d).addTo(this._map),this._userLocationDotMarker.setLngLat(d).addTo(this._map),this._accuracy=B.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()}_updateCircleRadius(){const B=this._map._container.clientHeight/2,d=this._map.unproject([0,B]),I=this._map.unproject([1,B]),D=d.distanceTo(I),z=Math.ceil(2*this._accuracy/D);this._circleElement.style.width=`${z}px`,this._circleElement.style.height=`${z}px`}_onZoom(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}_onError(B){if(this._map){if(this.options.trackUserLocation)if(B.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error","mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const d=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=d,this._geolocateButton.setAttribute("aria-label",d),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(B.code===3&&Zl)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale","mapboxgl-user-location-dot-stale"),this.fire(new r.Event("error",B)),this._finish()}}_finish(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0}_setupUI(B){if(this._container.addEventListener("contextmenu",d=>d.preventDefault()),this._geolocateButton=w.create("button","maplibregl-ctrl-geolocate mapboxgl-ctrl-geolocate",this._container),w.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",B===!1){r.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");const d=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=d,this._geolocateButton.setAttribute("aria-label",d)}else{const d=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=d,this._geolocateButton.setAttribute("aria-label",d)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=w.create("div","maplibregl-user-location-dot mapboxgl-user-location-dot"),this._userLocationDotMarker=new Hu(this._dotElement),this._circleElement=w.create("div","maplibregl-user-location-accuracy-circle mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new Hu({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",d=>{d.geolocateSource||this._watchState!=="ACTIVE_LOCK"||d.originalEvent&&d.originalEvent.type==="resize"||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this.fire(new r.Event("trackuserlocationend")))})}trigger(){if(!this._setup)return r.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new r.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":Ho--,Zl=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error","mapboxgl-ctrl-geolocate-background-error"),this.fire(new r.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new r.Event("trackuserlocationstart"));break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active");break;case"OFF":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let B;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),Ho++,Ho>1?(B={maximumAge:6e5,timeout:0},Zl=!0):(B=this.options.positionOptions,Zl=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,B)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},AttributionControl:xu,LogoControl:Au,ScaleControl:class{constructor(B){this.options=r.extend({},ll,B),r.bindAll(["_onMove","setUnit"],this)}getDefaultPosition(){return"bottom-left"}_onMove(){hh(this._map,this._container,this.options)}onAdd(B){return this._map=B,this._container=w.create("div","maplibregl-ctrl maplibregl-ctrl-scale mapboxgl-ctrl mapboxgl-ctrl-scale",B.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){w.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}setUnit(B){this.options.unit=B,hh(this._map,this._container,this.options)}},FullscreenControl:class{constructor(B){this._fullscreen=!1,B&&B.container&&(B.container instanceof HTMLElement?this._container=B.container:r.warnOnce("Full screen control 'container' must be a DOM element.")),r.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(B){return this._map=B,this._container||(this._container=this._map.getContainer()),this._controlContainer=w.create("div","maplibregl-ctrl maplibregl-ctrl-group mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",r.warnOnce("This device does not support fullscreen mode.")),this._controlContainer}onRemove(){w.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._changeIcon)}_checkFullscreenSupport(){return!!(document.fullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled||document.webkitFullscreenEnabled)}_setupUI(){const B=this._fullscreenButton=w.create("button","maplibregl-ctrl-fullscreen mapboxgl-ctrl-fullscreen",this._controlContainer);w.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",B).setAttribute("aria-hidden","true"),B.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._changeIcon)}_updateTitle(){const B=this._getTitle();this._fullscreenButton.setAttribute("aria-label",B),this._fullscreenButton.title=B}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_changeIcon(){(window.document.fullscreenElement||window.document.mozFullScreenElement||window.document.webkitFullscreenElement||window.document.msFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())}_onClickFullscreen(){this._isFullscreen()?window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.msExitFullscreen?window.document.msExitFullscreen():window.document.webkitCancelFullScreen&&window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()}},TerrainControl:class{constructor(B){this.options=B,r.bindAll(["_toggleTerrain","_updateTerrainIcon"],this)}onAdd(B){return this._map=B,this._container=w.create("div","maplibregl-ctrl maplibregl-ctrl-group mapboxgl-ctrl mapboxgl-ctrl-group"),this._terrainButton=w.create("button","maplibregl-ctrl-terrain mapboxgl-ctrl-terrain",this._container),w.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){w.remove(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}_toggleTerrain(){this._map.getTerrain()?this._map.setTerrain(null):this._map.setTerrain(this.options),this._updateTerrainIcon()}_updateTerrainIcon(){this._terrainButton.classList.remove("maplibregl-ctrl-terrain","mapboxgl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled","mapboxgl-ctrl-terrain-enabled"),this._map.style.terrain?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled","mapboxgl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.disableTerrain")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain","mapboxgl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.enableTerrain"))}},Popup:class extends r.Evented{constructor(B){super(),this.options=r.extend(Object.create(ns),B),r.bindAll(["_update","_onClose","remove","_onMouseMove","_onMouseUp","_onDrag"],this)}addTo(B){return this._map&&this.remove(),this._map=B,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer","mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer","mapboxgl-track-pointer")):this._map.on("move",this._update),this.fire(new r.Event("open")),this}isOpen(){return!!this._map}remove(){return this._content&&w.remove(this._content),this._container&&(w.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),delete this._map),this.fire(new r.Event("close")),this}getLngLat(){return this._lngLat}setLngLat(B){return this._lngLat=r.LngLat.convert(B),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer","mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer","mapboxgl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer","mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer","mapboxgl-track-pointer")),this}getElement(){return this._container}setText(B){return this.setDOMContent(document.createTextNode(B))}setHTML(B){const d=document.createDocumentFragment(),I=document.createElement("body");let D;for(I.innerHTML=B;D=I.firstChild,D;)d.appendChild(D);return this.setDOMContent(d)}getMaxWidth(){return this._container&&this._container.style.maxWidth}setMaxWidth(B){return this.options.maxWidth=B,this._update(),this}setDOMContent(B){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=w.create("div","maplibregl-popup-content mapboxgl-popup-content",this._container);return this._content.appendChild(B),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(B){this._container&&this._container.classList.add(B)}removeClassName(B){this._container&&this._container.classList.remove(B)}setOffset(B){return this.options.offset=B,this._update(),this}toggleClassName(B){if(this._container)return this._container.classList.toggle(B)}_createCloseButton(){this.options.closeButton&&(this._closeButton=w.create("button","maplibregl-popup-close-button mapboxgl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_onMouseUp(B){this._update(B.point)}_onMouseMove(B){this._update(B.point)}_onDrag(B){this._update(B.point)}_update(B){if(!this._map||!this._lngLat&&!this._trackPointer||!this._content||(this._container||(this._container=w.create("div","maplibregl-popup mapboxgl-popup",this._map.getContainer()),this._tip=w.create("div","maplibregl-popup-tip mapboxgl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className&&this.options.className.split(" ").forEach(W=>this._container.classList.add(W)),this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer","mapboxgl-popup-track-pointer")),this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=uc(this._lngLat,this._pos,this._map.transform)),this._trackPointer&&!B))return;const d=this._pos=this._trackPointer&&B?B:this._map.project(this._lngLat);let I=this.options.anchor;const D=fh(this.options.offset);if(!I){const W=this._container.offsetWidth,ne=this._container.offsetHeight;let pe;pe=d.y+D.bottom.y<ne?["top"]:d.y>this._map.transform.height-ne?["bottom"]:[],d.x<W/2?pe.push("left"):d.x>this._map.transform.width-W/2&&pe.push("right"),I=pe.length===0?"bottom":pe.join("-")}const z=d.add(D[I]).round();w.setTransform(this._container,`${er[I]} translate(${z.x}px,${z.y}px)`),yr(this._container,I,"popup")}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const B=this._container.querySelector(ms);B&&B.focus()}_onClose(){this.remove()}},Marker:Hu,Style:$o,LngLat:r.LngLat,LngLatBounds:r.LngLatBounds,Point:r.pointGeometry,MercatorCoordinate:r.MercatorCoordinate,Evented:r.Evented,AJAXError:r.AJAXError,config:r.config,CanvasSource:Re,GeoJSONSource:It,ImageSource:we,RasterDEMTileSource:it,RasterTileSource:_e,VectorTileSource:ve,VideoSource:Ce,prewarm:function(){Je().acquire(ri)},clearPrewarmedResources:function(){const B=bt;B&&(B.isPreloaded()&&B.numActive()===1?(B.release(ri),bt=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},get version(){return"2.4.0"},get workerCount(){return ut.workerCount},set workerCount(B){ut.workerCount=B},get maxParallelImageRequests(){return r.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(B){r.config.MAX_PARALLEL_IMAGE_REQUESTS=B},clearStorage(B){r.clearTileCache(B)},workerUrl:"",addProtocol(B,d){r.config.REGISTERED_PROTOCOLS[B]=d},removeProtocol(B){delete r.config.REGISTERED_PROTOCOLS[B]}};return ya.extend(sa,{isSafari:r.isSafari,getPerformanceMetrics:r.PerformanceUtils.getPerformanceMetrics}),sa});var m=l;return m})})(Tu);const z8=Tu.exports;var V2={};const N8={},j8=Object.freeze(Object.defineProperty({__proto__:null,default:N8},Symbol.toStringTag,{value:"Module"})),Rm=B8(j8);(function(i){/*! Fabric.js Copyright 2008-2015, Printio (Juriy Zaytsev, Maxim Chernyak) */var e=e||{version:"5.2.4"};if(i.fabric=e,typeof document<"u"&&typeof window<"u")document instanceof(typeof HTMLDocument<"u"?HTMLDocument:Document)?e.document=document:e.document=document.implementation.createHTMLDocument(""),e.window=window;else{var t=Rm,o=new t.JSDOM(decodeURIComponent("%3C!DOCTYPE%20html%3E%3Chtml%3E%3Chead%3E%3C%2Fhead%3E%3Cbody%3E%3C%2Fbody%3E%3C%2Fhtml%3E"),{features:{FetchExternalResources:["img"]},resources:"usable"}).window;e.document=o.document,e.jsdomImplForWrapper=Rm.implForWrapper,e.nodeCanvas=Rm.Canvas,e.window=o,DOMParser=e.window.DOMParser}e.isTouchSupported="ontouchstart"in e.window||"ontouchstart"in e.document||e.window&&e.window.navigator&&e.window.navigator.maxTouchPoints>0,e.isLikelyNode=typeof Buffer<"u"&&typeof window>"u",e.SHARED_ATTRIBUTES=["display","transform","fill","fill-opacity","fill-rule","opacity","stroke","stroke-dasharray","stroke-linecap","stroke-dashoffset","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","id","paint-order","vector-effect","instantiated_by_use","clip-path"],e.DPI=96,e.reNum="(?:[-+]?(?:\\d+|\\d*\\.\\d+)(?:[eE][-+]?\\d+)?)",e.commaWsp="(?:\\s+,?\\s*|,\\s*)",e.rePathCommand=/([-+]?((\d+\.\d+)|((\d+)|(\.\d+)))(?:[eE][-+]?\d+)?)/ig,e.reNonWord=/[ \n\.,;!\?\-]/,e.fontPaths={},e.iMatrix=[1,0,0,1,0,0],e.svgNS="http://www.w3.org/2000/svg",e.perfLimitSizeTotal=2097152,e.maxCacheSideLimit=4096,e.minCacheSideLimit=256,e.charWidthsCache={},e.textureSize=2048,e.disableStyleCopyPaste=!1,e.enableGLFiltering=!0,e.devicePixelRatio=e.window.devicePixelRatio||e.window.webkitDevicePixelRatio||e.window.mozDevicePixelRatio||1,e.browserShadowBlurConstant=1,e.arcToSegmentsCache={},e.boundsOfCurveCache={},e.cachesBoundsOfCurve=!0,e.forceGLPutImageData=!1,e.initFilterBackend=function(){if(e.enableGLFiltering&&e.isWebglSupported&&e.isWebglSupported(e.textureSize))return console.log("max texture size: "+e.maxTextureSize),new e.WebglFilterBackend({tileSize:e.textureSize});if(e.Canvas2dFilterBackend)return new e.Canvas2dFilterBackend},typeof document<"u"&&typeof window<"u"&&(window.fabric=e),function(){function r(x,C){if(!!this.__eventListeners[x]){var T=this.__eventListeners[x];C?T[T.indexOf(C)]=!1:e.util.array.fill(T,!1)}}function f(x,C){if(this.__eventListeners||(this.__eventListeners={}),arguments.length===1)for(var T in x)this.on(T,x[T]);else this.__eventListeners[x]||(this.__eventListeners[x]=[]),this.__eventListeners[x].push(C);return this}function _(x,C){var T=function(){C.apply(this,arguments),this.off(x,T)}.bind(this);this.on(x,T)}function b(x,C){if(arguments.length===1)for(var T in x)_.call(this,T,x[T]);else _.call(this,x,C);return this}function v(x,C){if(!this.__eventListeners)return this;if(arguments.length===0)for(x in this.__eventListeners)r.call(this,x);else if(arguments.length===1&&typeof arguments[0]=="object")for(var T in x)r.call(this,T,x[T]);else r.call(this,x,C);return this}function w(x,C){if(!this.__eventListeners)return this;var T=this.__eventListeners[x];if(!T)return this;for(var S=0,M=T.length;S<M;S++)T[S]&&T[S].call(this,C||{});return this.__eventListeners[x]=T.filter(function(O){return O!==!1}),this}e.Observable={fire:w,on:f,once:b,off:v}}(),e.Collection={_objects:[],add:function(){if(this._objects.push.apply(this._objects,arguments),this._onObjectAdded)for(var r=0,f=arguments.length;r<f;r++)this._onObjectAdded(arguments[r]);return this.renderOnAddRemove&&this.requestRenderAll(),this},insertAt:function(r,f,_){var b=this._objects;return _?b[f]=r:b.splice(f,0,r),this._onObjectAdded&&this._onObjectAdded(r),this.renderOnAddRemove&&this.requestRenderAll(),this},remove:function(){for(var r=this._objects,f,_=!1,b=0,v=arguments.length;b<v;b++)f=r.indexOf(arguments[b]),f!==-1&&(_=!0,r.splice(f,1),this._onObjectRemoved&&this._onObjectRemoved(arguments[b]));return this.renderOnAddRemove&&_&&this.requestRenderAll(),this},forEachObject:function(r,f){for(var _=this.getObjects(),b=0,v=_.length;b<v;b++)r.call(f,_[b],b,_);return this},getObjects:function(r){return typeof r>"u"?this._objects.concat():this._objects.filter(function(f){return f.type===r})},item:function(r){return this._objects[r]},isEmpty:function(){return this._objects.length===0},size:function(){return this._objects.length},contains:function(r,f){return this._objects.indexOf(r)>-1?!0:f?this._objects.some(function(_){return typeof _.contains=="function"&&_.contains(r,!0)}):!1},complexity:function(){return this._objects.reduce(function(r,f){return r+=f.complexity?f.complexity():0,r},0)}},e.CommonMethods={_setOptions:function(r){for(var f in r)this.set(f,r[f])},_initGradient:function(r,f){r&&r.colorStops&&!(r instanceof e.Gradient)&&this.set(f,new e.Gradient(r))},_initPattern:function(r,f,_){r&&r.source&&!(r instanceof e.Pattern)?this.set(f,new e.Pattern(r,_)):_&&_()},_setObject:function(r){for(var f in r)this._set(f,r[f])},set:function(r,f){return typeof r=="object"?this._setObject(r):this._set(r,f),this},_set:function(r,f){this[r]=f},toggle:function(r){var f=this.get(r);return typeof f=="boolean"&&this.set(r,!f),this},get:function(r){return this[r]}},function(r){var f=Math.sqrt,_=Math.atan2,b=Math.pow,v=Math.PI/180,w=Math.PI/2;e.util={cos:function(x){if(x===0)return 1;x<0&&(x=-x);var C=x/w;switch(C){case 1:case 3:return 0;case 2:return-1}return Math.cos(x)},sin:function(x){if(x===0)return 0;var C=x/w,T=1;switch(x<0&&(T=-1),C){case 1:return T;case 2:return 0;case 3:return-T}return Math.sin(x)},removeFromArray:function(x,C){var T=x.indexOf(C);return T!==-1&&x.splice(T,1),x},getRandomInt:function(x,C){return Math.floor(Math.random()*(C-x+1))+x},degreesToRadians:function(x){return x*v},radiansToDegrees:function(x){return x/v},rotatePoint:function(x,C,T){var S=new e.Point(x.x-C.x,x.y-C.y),M=e.util.rotateVector(S,T);return new e.Point(M.x,M.y).addEquals(C)},rotateVector:function(x,C){var T=e.util.sin(C),S=e.util.cos(C),M=x.x*S-x.y*T,O=x.x*T+x.y*S;return{x:M,y:O}},createVector:function(x,C){return new e.Point(C.x-x.x,C.y-x.y)},calcAngleBetweenVectors:function(x,C){return Math.acos((x.x*C.x+x.y*C.y)/(Math.hypot(x.x,x.y)*Math.hypot(C.x,C.y)))},getHatVector:function(x){return new e.Point(x.x,x.y).multiply(1/Math.hypot(x.x,x.y))},getBisector:function(x,C,T){var S=e.util.createVector(x,C),M=e.util.createVector(x,T),O=e.util.calcAngleBetweenVectors(S,M),V=e.util.calcAngleBetweenVectors(e.util.rotateVector(S,O),M),X=O*(V===0?1:-1)/2;return{vector:e.util.getHatVector(e.util.rotateVector(S,X)),angle:O}},projectStrokeOnPoints:function(x,C,T){var S=[],M=C.strokeWidth/2,O=C.strokeUniform?new e.Point(1/C.scaleX,1/C.scaleY):new e.Point(1,1),V=function(X){var Z=M/Math.hypot(X.x,X.y);return new e.Point(X.x*Z*O.x,X.y*Z*O.y)};return x.length<=1||x.forEach(function(X,Z){var te=new e.Point(X.x,X.y),J,ie;Z===0?(ie=x[Z+1],J=T?V(e.util.createVector(ie,te)).addEquals(te):x[x.length-1]):Z===x.length-1?(J=x[Z-1],ie=T?V(e.util.createVector(J,te)).addEquals(te):x[0]):(J=x[Z-1],ie=x[Z+1]);var Ee=e.util.getBisector(te,J,ie),Pe=Ee.vector,de=Ee.angle,Te,ve;if(C.strokeLineJoin==="miter"&&(Te=-M/Math.sin(de/2),ve=new e.Point(Pe.x*Te*O.x,Pe.y*Te*O.y),Math.hypot(ve.x,ve.y)/M<=C.strokeMiterLimit)){S.push(te.add(ve)),S.push(te.subtract(ve));return}Te=-M*Math.SQRT2,ve=new e.Point(Pe.x*Te*O.x,Pe.y*Te*O.y),S.push(te.add(ve)),S.push(te.subtract(ve))}),S},transformPoint:function(x,C,T){return T?new e.Point(C[0]*x.x+C[2]*x.y,C[1]*x.x+C[3]*x.y):new e.Point(C[0]*x.x+C[2]*x.y+C[4],C[1]*x.x+C[3]*x.y+C[5])},makeBoundingBoxFromPoints:function(x,C){if(C)for(var T=0;T<x.length;T++)x[T]=e.util.transformPoint(x[T],C);var S=[x[0].x,x[1].x,x[2].x,x[3].x],M=e.util.array.min(S),O=e.util.array.max(S),V=O-M,X=[x[0].y,x[1].y,x[2].y,x[3].y],Z=e.util.array.min(X),te=e.util.array.max(X),J=te-Z;return{left:M,top:Z,width:V,height:J}},invertTransform:function(x){var C=1/(x[0]*x[3]-x[1]*x[2]),T=[C*x[3],-C*x[1],-C*x[2],C*x[0]],S=e.util.transformPoint({x:x[4],y:x[5]},T,!0);return T[4]=-S.x,T[5]=-S.y,T},toFixed:function(x,C){return parseFloat(Number(x).toFixed(C))},parseUnit:function(x,C){var T=/\D{0,2}$/.exec(x),S=parseFloat(x);switch(C||(C=e.Text.DEFAULT_SVG_FONT_SIZE),T[0]){case"mm":return S*e.DPI/25.4;case"cm":return S*e.DPI/2.54;case"in":return S*e.DPI;case"pt":return S*e.DPI/72;case"pc":return S*e.DPI/72*12;case"em":return S*C;default:return S}},falseFunction:function(){return!1},getKlass:function(x,C){return x=e.util.string.camelize(x.charAt(0).toUpperCase()+x.slice(1)),e.util.resolveNamespace(C)[x]},getSvgAttributes:function(x){var C=["instantiated_by_use","style","id","class"];switch(x){case"linearGradient":C=C.concat(["x1","y1","x2","y2","gradientUnits","gradientTransform"]);break;case"radialGradient":C=C.concat(["gradientUnits","gradientTransform","cx","cy","r","fx","fy","fr"]);break;case"stop":C=C.concat(["offset","stop-color","stop-opacity"]);break}return C},resolveNamespace:function(x){if(!x)return e;var C=x.split("."),T=C.length,S,M=r||e.window;for(S=0;S<T;++S)M=M[C[S]];return M},loadImage:function(x,C,T,S){if(!x){C&&C.call(T,x);return}var M=e.util.createImage(),O=function(){C&&C.call(T,M,!1),M=M.onload=M.onerror=null};M.onload=O,M.onerror=function(){e.log("Error loading "+M.src),C&&C.call(T,null,!0),M=M.onload=M.onerror=null},x.indexOf("data")!==0&&S!==void 0&&S!==null&&(M.crossOrigin=S),x.substring(0,14)==="data:image/svg"&&(M.onload=null,e.util.loadImageInDom(M,O)),M.src=x},loadImageInDom:function(x,C){var T=e.document.createElement("div");T.style.width=T.style.height="1px",T.style.left=T.style.top="-100%",T.style.position="absolute",T.appendChild(x),e.document.querySelector("body").appendChild(T),x.onload=function(){C(),T.parentNode.removeChild(T),T=null}},enlivenObjects:function(x,C,T,S){x=x||[];var M=[],O=0,V=x.length;function X(){++O===V&&C&&C(M.filter(function(Z){return Z}))}if(!V){C&&C(M);return}x.forEach(function(Z,te){if(!Z||!Z.type){X();return}var J=e.util.getKlass(Z.type,T);J.fromObject(Z,function(ie,Ee){Ee||(M[te]=ie),S&&S(Z,ie,Ee),X()})})},enlivenObjectEnlivables:function(x,C,T){var S=e.Object.ENLIVEN_PROPS.filter(function(M){return!!x[M]});e.util.enlivenObjects(S.map(function(M){return x[M]}),function(M){var O={};S.forEach(function(V,X){O[V]=M[X],C&&(C[V]=M[X])}),T&&T(O)})},enlivenPatterns:function(x,C){x=x||[];function T(){++M===O&&C&&C(S)}var S=[],M=0,O=x.length;if(!O){C&&C(S);return}x.forEach(function(V,X){V&&V.source?new e.Pattern(V,function(Z){S[X]=Z,T()}):(S[X]=V,T())})},groupSVGElements:function(x,C,T){var S;return x&&x.length===1?(typeof T<"u"&&(x[0].sourcePath=T),x[0]):(C&&(C.width&&C.height?C.centerPoint={x:C.width/2,y:C.height/2}:(delete C.width,delete C.height)),S=new e.Group(x,C),typeof T<"u"&&(S.sourcePath=T),S)},populateWithProperties:function(x,C,T){if(T&&Array.isArray(T))for(var S=0,M=T.length;S<M;S++)T[S]in x&&(C[T[S]]=x[T[S]])},createCanvasElement:function(){return e.document.createElement("canvas")},copyCanvasElement:function(x){var C=e.util.createCanvasElement();return C.width=x.width,C.height=x.height,C.getContext("2d").drawImage(x,0,0),C},toDataURL:function(x,C,T){return x.toDataURL("image/"+C,T)},createImage:function(){return e.document.createElement("img")},multiplyTransformMatrices:function(x,C,T){return[x[0]*C[0]+x[2]*C[1],x[1]*C[0]+x[3]*C[1],x[0]*C[2]+x[2]*C[3],x[1]*C[2]+x[3]*C[3],T?0:x[0]*C[4]+x[2]*C[5]+x[4],T?0:x[1]*C[4]+x[3]*C[5]+x[5]]},qrDecompose:function(x){var C=_(x[1],x[0]),T=b(x[0],2)+b(x[1],2),S=f(T),M=(x[0]*x[3]-x[2]*x[1])/S,O=_(x[0]*x[2]+x[1]*x[3],T);return{angle:C/v,scaleX:S,scaleY:M,skewX:O/v,skewY:0,translateX:x[4],translateY:x[5]}},calcRotateMatrix:function(x){if(!x.angle)return e.iMatrix.concat();var C=e.util.degreesToRadians(x.angle),T=e.util.cos(C),S=e.util.sin(C);return[T,S,-S,T,0,0]},calcDimensionsMatrix:function(x){var C=typeof x.scaleX>"u"?1:x.scaleX,T=typeof x.scaleY>"u"?1:x.scaleY,S=[x.flipX?-C:C,0,0,x.flipY?-T:T,0,0],M=e.util.multiplyTransformMatrices,O=e.util.degreesToRadians;return x.skewX&&(S=M(S,[1,0,Math.tan(O(x.skewX)),1],!0)),x.skewY&&(S=M(S,[1,Math.tan(O(x.skewY)),0,1],!0)),S},composeMatrix:function(x){var C=[1,0,0,1,x.translateX||0,x.translateY||0],T=e.util.multiplyTransformMatrices;return x.angle&&(C=T(C,e.util.calcRotateMatrix(x))),(x.scaleX!==1||x.scaleY!==1||x.skewX||x.skewY||x.flipX||x.flipY)&&(C=T(C,e.util.calcDimensionsMatrix(x))),C},resetObjectTransform:function(x){x.scaleX=1,x.scaleY=1,x.skewX=0,x.skewY=0,x.flipX=!1,x.flipY=!1,x.rotate(0)},saveObjectTransform:function(x){return{scaleX:x.scaleX,scaleY:x.scaleY,skewX:x.skewX,skewY:x.skewY,angle:x.angle,left:x.left,flipX:x.flipX,flipY:x.flipY,top:x.top}},isTransparent:function(x,C,T,S){S>0&&(C>S?C-=S:C=0,T>S?T-=S:T=0);var M=!0,O,V,X=x.getImageData(C,T,S*2||1,S*2||1),Z=X.data.length;for(O=3;O<Z&&(V=X.data[O],M=V<=0,M!==!1);O+=4);return X=null,M},parsePreserveAspectRatioAttribute:function(x){var C="meet",T="Mid",S="Mid",M=x.split(" "),O;return M&&M.length&&(C=M.pop(),C!=="meet"&&C!=="slice"?(O=C,C="meet"):M.length&&(O=M.pop())),T=O!=="none"?O.slice(1,4):"none",S=O!=="none"?O.slice(5,8):"none",{meetOrSlice:C,alignX:T,alignY:S}},clearFabricFontCache:function(x){x=(x||"").toLowerCase(),x?e.charWidthsCache[x]&&delete e.charWidthsCache[x]:e.charWidthsCache={}},limitDimsByArea:function(x,C){var T=Math.sqrt(C*x),S=Math.floor(C/T);return{x:Math.floor(T),y:S}},capValue:function(x,C,T){return Math.max(x,Math.min(C,T))},findScaleToFit:function(x,C){return Math.min(C.width/x.width,C.height/x.height)},findScaleToCover:function(x,C){return Math.max(C.width/x.width,C.height/x.height)},matrixToSVG:function(x){return"matrix("+x.map(function(C){return e.util.toFixed(C,e.Object.NUM_FRACTION_DIGITS)}).join(" ")+")"},removeTransformFromObject:function(x,C){var T=e.util.invertTransform(C),S=e.util.multiplyTransformMatrices(T,x.calcOwnMatrix());e.util.applyTransformToObject(x,S)},addTransformToObject:function(x,C){e.util.applyTransformToObject(x,e.util.multiplyTransformMatrices(C,x.calcOwnMatrix()))},applyTransformToObject:function(x,C){var T=e.util.qrDecompose(C),S=new e.Point(T.translateX,T.translateY);x.flipX=!1,x.flipY=!1,x.set("scaleX",T.scaleX),x.set("scaleY",T.scaleY),x.skewX=T.skewX,x.skewY=T.skewY,x.angle=T.angle,x.setPositionByOrigin(S,"center","center")},sizeAfterTransform:function(x,C,T){var S=x/2,M=C/2,O=[{x:-S,y:-M},{x:S,y:-M},{x:-S,y:M},{x:S,y:M}],V=e.util.calcDimensionsMatrix(T),X=e.util.makeBoundingBoxFromPoints(O,V);return{x:X.width,y:X.height}},mergeClipPaths:function(x,C){var T=x,S=C;T.inverted&&!S.inverted&&(T=C,S=x),e.util.applyTransformToObject(S,e.util.multiplyTransformMatrices(e.util.invertTransform(T.calcTransformMatrix()),S.calcTransformMatrix()));var M=T.inverted&&S.inverted;return M&&(T.inverted=S.inverted=!1),new e.Group([T],{clipPath:S,inverted:M})},hasStyleChanged:function(x,C,T){return T=T||!1,x.fill!==C.fill||x.stroke!==C.stroke||x.strokeWidth!==C.strokeWidth||x.fontSize!==C.fontSize||x.fontFamily!==C.fontFamily||x.fontWeight!==C.fontWeight||x.fontStyle!==C.fontStyle||x.deltaY!==C.deltaY||T&&(x.overline!==C.overline||x.underline!==C.underline||x.linethrough!==C.linethrough)},stylesToArray:function(T,C){for(var T=e.util.object.clone(T,!0),S=C.split(`
`),M=-1,O={},V=[],X=0;X<S.length;X++){if(!T[X]){M+=S[X].length;continue}for(var Z=0;Z<S[X].length;Z++){M++;var te=T[X][Z];if(te){var J=e.util.hasStyleChanged(O,te,!0);J?V.push({start:M,end:M+1,style:te}):V[V.length-1].end++}O=te||{}}}return V},stylesFromArray:function(x,C){if(!Array.isArray(x))return x;for(var T=C.split(`
`),S=-1,M=0,O={},V=0;V<T.length;V++)for(var X=0;X<T[V].length;X++)S++,x[M]&&x[M].start<=S&&S<x[M].end&&(O[V]=O[V]||{},O[V][X]=Object.assign({},x[M].style),S===x[M].end-1&&M++);return O}}}(i),function(){var r=Array.prototype.join,f={m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7},_={m:"l",M:"L"};function b(we,Ce,Re,le,Se,he,me,Be,We,st,Ye){var gt=e.util.cos(we),Mt=e.util.sin(we),ri=e.util.cos(Ce),ut=e.util.sin(Ce),wt=Re*Se*ri-le*he*ut+me,bt=le*Se*ri+Re*he*ut+Be,Je=st+We*(-Re*Se*Mt-le*he*gt),ei=Ye+We*(-le*Se*Mt+Re*he*gt),li=wt+We*(Re*Se*ut+le*he*ri),Qt=bt+We*(le*Se*ut-Re*he*ri);return["C",Je,ei,li,Qt,wt,bt]}function v(we,Ce,Re,le,Se,he,me){var Be=Math.PI,We=me*Be/180,st=e.util.sin(We),Ye=e.util.cos(We),gt=0,Mt=0;Re=Math.abs(Re),le=Math.abs(le);var ri=-Ye*we*.5-st*Ce*.5,ut=-Ye*Ce*.5+st*we*.5,wt=Re*Re,bt=le*le,Je=ut*ut,ei=ri*ri,li=wt*bt-wt*Je-bt*ei,Qt=0;if(li<0){var Si=Math.sqrt(1-li/(wt*bt));Re*=Si,le*=Si}else Qt=(Se===he?-1:1)*Math.sqrt(li/(wt*Je+bt*ei));var Ti=Qt*Re*ut/le,Xt=-Qt*le*ri/Re,mi=Ye*Ti-st*Xt+we*.5,Zi=st*Ti+Ye*Xt+Ce*.5,Ci=w(1,0,(ri-Ti)/Re,(ut-Xt)/le),ti=w((ri-Ti)/Re,(ut-Xt)/le,(-ri-Ti)/Re,(-ut-Xt)/le);he===0&&ti>0?ti-=2*Be:he===1&&ti<0&&(ti+=2*Be);for(var Me=Math.ceil(Math.abs(ti/Be*2)),Q=[],ae=ti/Me,$e=8/3*Math.sin(ae/4)*Math.sin(ae/4)/Math.sin(ae/2),_t=Ci+ae,Kt=0;Kt<Me;Kt++)Q[Kt]=b(Ci,_t,Ye,st,Re,le,mi,Zi,$e,gt,Mt),gt=Q[Kt][5],Mt=Q[Kt][6],Ci=_t,_t+=ae;return Q}function w(we,Ce,Re,le){var Se=Math.atan2(Ce,we),he=Math.atan2(le,Re);return he>=Se?he-Se:2*Math.PI-(Se-he)}function x(we,Ce,Re,le,Se,he,me,Be){var We;if(e.cachesBoundsOfCurve&&(We=r.call(arguments),e.boundsOfCurveCache[We]))return e.boundsOfCurveCache[We];var st=Math.sqrt,Ye=Math.min,gt=Math.max,Mt=Math.abs,ri=[],ut=[[],[]],wt,bt,Je,ei,li,Qt,Si,Ti;bt=6*we-12*Re+6*Se,wt=-3*we+9*Re-9*Se+3*me,Je=3*Re-3*we;for(var Xt=0;Xt<2;++Xt){if(Xt>0&&(bt=6*Ce-12*le+6*he,wt=-3*Ce+9*le-9*he+3*Be,Je=3*le-3*Ce),Mt(wt)<1e-12){if(Mt(bt)<1e-12)continue;ei=-Je/bt,0<ei&&ei<1&&ri.push(ei);continue}Si=bt*bt-4*Je*wt,!(Si<0)&&(Ti=st(Si),li=(-bt+Ti)/(2*wt),0<li&&li<1&&ri.push(li),Qt=(-bt-Ti)/(2*wt),0<Qt&&Qt<1&&ri.push(Qt))}for(var mi,Zi,Ci=ri.length,ti=Ci,Me;Ci--;)ei=ri[Ci],Me=1-ei,mi=Me*Me*Me*we+3*Me*Me*ei*Re+3*Me*ei*ei*Se+ei*ei*ei*me,ut[0][Ci]=mi,Zi=Me*Me*Me*Ce+3*Me*Me*ei*le+3*Me*ei*ei*he+ei*ei*ei*Be,ut[1][Ci]=Zi;ut[0][ti]=we,ut[1][ti]=Ce,ut[0][ti+1]=me,ut[1][ti+1]=Be;var Q=[{x:Ye.apply(null,ut[0]),y:Ye.apply(null,ut[1])},{x:gt.apply(null,ut[0]),y:gt.apply(null,ut[1])}];return e.cachesBoundsOfCurve&&(e.boundsOfCurveCache[We]=Q),Q}function C(we,Ce,Re){for(var le=Re[1],Se=Re[2],he=Re[3],me=Re[4],Be=Re[5],We=Re[6],st=Re[7],Ye=v(We-we,st-Ce,le,Se,me,Be,he),gt=0,Mt=Ye.length;gt<Mt;gt++)Ye[gt][1]+=we,Ye[gt][2]+=Ce,Ye[gt][3]+=we,Ye[gt][4]+=Ce,Ye[gt][5]+=we,Ye[gt][6]+=Ce;return Ye}function T(we){var Ce=0,Re=0,le=we.length,Se=0,he=0,me,Be,We,st=[],Ye,gt,Mt;for(Be=0;Be<le;++Be){switch(We=!1,me=we[Be].slice(0),me[0]){case"l":me[0]="L",me[1]+=Ce,me[2]+=Re;case"L":Ce=me[1],Re=me[2];break;case"h":me[1]+=Ce;case"H":me[0]="L",me[2]=Re,Ce=me[1];break;case"v":me[1]+=Re;case"V":me[0]="L",Re=me[1],me[1]=Ce,me[2]=Re;break;case"m":me[0]="M",me[1]+=Ce,me[2]+=Re;case"M":Ce=me[1],Re=me[2],Se=me[1],he=me[2];break;case"c":me[0]="C",me[1]+=Ce,me[2]+=Re,me[3]+=Ce,me[4]+=Re,me[5]+=Ce,me[6]+=Re;case"C":gt=me[3],Mt=me[4],Ce=me[5],Re=me[6];break;case"s":me[0]="S",me[1]+=Ce,me[2]+=Re,me[3]+=Ce,me[4]+=Re;case"S":Ye==="C"?(gt=2*Ce-gt,Mt=2*Re-Mt):(gt=Ce,Mt=Re),Ce=me[3],Re=me[4],me[0]="C",me[5]=me[3],me[6]=me[4],me[3]=me[1],me[4]=me[2],me[1]=gt,me[2]=Mt,gt=me[3],Mt=me[4];break;case"q":me[0]="Q",me[1]+=Ce,me[2]+=Re,me[3]+=Ce,me[4]+=Re;case"Q":gt=me[1],Mt=me[2],Ce=me[3],Re=me[4];break;case"t":me[0]="T",me[1]+=Ce,me[2]+=Re;case"T":Ye==="Q"?(gt=2*Ce-gt,Mt=2*Re-Mt):(gt=Ce,Mt=Re),me[0]="Q",Ce=me[1],Re=me[2],me[1]=gt,me[2]=Mt,me[3]=Ce,me[4]=Re;break;case"a":me[0]="A",me[6]+=Ce,me[7]+=Re;case"A":We=!0,st=st.concat(C(Ce,Re,me)),Ce=me[6],Re=me[7];break;case"z":case"Z":Ce=Se,Re=he;break}We||st.push(me),Ye=me[0]}return st}function S(we,Ce,Re,le){return Math.sqrt((Re-we)*(Re-we)+(le-Ce)*(le-Ce))}function M(we){return we*we*we}function O(we){return 3*we*we*(1-we)}function V(we){return 3*we*(1-we)*(1-we)}function X(we){return(1-we)*(1-we)*(1-we)}function Z(we,Ce,Re,le,Se,he,me,Be){return function(We){var st=M(We),Ye=O(We),gt=V(We),Mt=X(We);return{x:me*st+Se*Ye+Re*gt+we*Mt,y:Be*st+he*Ye+le*gt+Ce*Mt}}}function te(we,Ce,Re,le,Se,he,me,Be){return function(We){var st=1-We,Ye=3*st*st*(Re-we)+6*st*We*(Se-Re)+3*We*We*(me-Se),gt=3*st*st*(le-Ce)+6*st*We*(he-le)+3*We*We*(Be-he);return Math.atan2(gt,Ye)}}function J(we){return we*we}function ie(we){return 2*we*(1-we)}function Ee(we){return(1-we)*(1-we)}function Pe(we,Ce,Re,le,Se,he){return function(me){var Be=J(me),We=ie(me),st=Ee(me);return{x:Se*Be+Re*We+we*st,y:he*Be+le*We+Ce*st}}}function de(we,Ce,Re,le,Se,he){return function(me){var Be=1-me,We=2*Be*(Re-we)+2*me*(Se-Re),st=2*Be*(le-Ce)+2*me*(he-le);return Math.atan2(st,We)}}function Te(we,Ce,Re){var le={x:Ce,y:Re},Se,he=0,me;for(me=1;me<=100;me+=1)Se=we(me/100),he+=S(le.x,le.y,Se.x,Se.y),le=Se;return he}function ve(we,Ce){for(var Re=0,le=0,Se=we.iterator,he={x:we.x,y:we.y},me,Be,We=.01,st=we.angleFinder,Ye;le<Ce&&We>1e-4;)me=Se(Re),Ye=Re,Be=S(he.x,he.y,me.x,me.y),Be+le>Ce?(Re-=We,We/=2):(he=me,Re+=We,le+=Be);return me.angle=st(Ye),me}function _e(we){for(var Ce=0,Re=we.length,le,Se=0,he=0,me=0,Be=0,We=[],st,Ye,gt,Mt=0;Mt<Re;Mt++){switch(le=we[Mt],Ye={x:Se,y:he,command:le[0]},le[0]){case"M":Ye.length=0,me=Se=le[1],Be=he=le[2];break;case"L":Ye.length=S(Se,he,le[1],le[2]),Se=le[1],he=le[2];break;case"C":st=Z(Se,he,le[1],le[2],le[3],le[4],le[5],le[6]),gt=te(Se,he,le[1],le[2],le[3],le[4],le[5],le[6]),Ye.iterator=st,Ye.angleFinder=gt,Ye.length=Te(st,Se,he),Se=le[5],he=le[6];break;case"Q":st=Pe(Se,he,le[1],le[2],le[3],le[4]),gt=de(Se,he,le[1],le[2],le[3],le[4]),Ye.iterator=st,Ye.angleFinder=gt,Ye.length=Te(st,Se,he),Se=le[3],he=le[4];break;case"Z":case"z":Ye.destX=me,Ye.destY=Be,Ye.length=S(Se,he,me,Be),Se=me,he=Be;break}Ce+=Ye.length,We.push(Ye)}return We.push({length:Ce,x:Se,y:he}),We}function ot(we,Ce,Re){Re||(Re=_e(we));for(var le=0;Ce-Re[le].length>0&&le<Re.length-2;)Ce-=Re[le].length,le++;var Se=Re[le],he=Ce/Se.length,me=Se.command,Be=we[le],We;switch(me){case"M":return{x:Se.x,y:Se.y,angle:0};case"Z":case"z":return We=new e.Point(Se.x,Se.y).lerp(new e.Point(Se.destX,Se.destY),he),We.angle=Math.atan2(Se.destY-Se.y,Se.destX-Se.x),We;case"L":return We=new e.Point(Se.x,Se.y).lerp(new e.Point(Be[1],Be[2]),he),We.angle=Math.atan2(Be[2]-Se.y,Be[1]-Se.x),We;case"C":return ve(Se,Ce);case"Q":return ve(Se,Ce)}}function it(we){var Ce=[],Re=[],le,Se,he=e.rePathCommand,me="[-+]?(?:\\d*\\.\\d+|\\d+\\.?)(?:[eE][-+]?\\d+)?\\s*",Be="("+me+")"+e.commaWsp,We="([01])"+e.commaWsp+"?",st=Be+"?"+Be+"?"+Be+We+We+Be+"?("+me+")",Ye=new RegExp(st,"g"),gt,Mt,ri;if(!we||!we.match)return Ce;ri=we.match(/[mzlhvcsqta][^mzlhvcsqta]*/gi);for(var ut=0,wt,bt=ri.length;ut<bt;ut++){le=ri[ut],Mt=le.slice(1).trim(),Re.length=0;var Je=le.charAt(0);if(wt=[Je],Je.toLowerCase()==="a")for(var ei;ei=Ye.exec(Mt);)for(var li=1;li<ei.length;li++)Re.push(ei[li]);else for(;gt=he.exec(Mt);)Re.push(gt[0]);for(var li=0,Qt=Re.length;li<Qt;li++)Se=parseFloat(Re[li]),isNaN(Se)||wt.push(Se);var Si=f[Je.toLowerCase()],Ti=_[Je]||Je;if(wt.length-1>Si)for(var Xt=1,mi=wt.length;Xt<mi;Xt+=Si)Ce.push([Je].concat(wt.slice(Xt,Xt+Si))),Je=Ti;else Ce.push(wt)}return Ce}function It(we,Ce){var Re=[],le,Se=new e.Point(we[0].x,we[0].y),he=new e.Point(we[1].x,we[1].y),me=we.length,Be=1,We=0,st=me>2;for(Ce=Ce||0,st&&(Be=we[2].x<he.x?-1:we[2].x===he.x?0:1,We=we[2].y<he.y?-1:we[2].y===he.y?0:1),Re.push(["M",Se.x-Be*Ce,Se.y-We*Ce]),le=1;le<me;le++){if(!Se.eq(he)){var Ye=Se.midPointFrom(he);Re.push(["Q",Se.x,Se.y,Ye.x,Ye.y])}Se=we[le],le+1<we.length&&(he=we[le+1])}return st&&(Be=Se.x>we[le-2].x?1:Se.x===we[le-2].x?0:-1,We=Se.y>we[le-2].y?1:Se.y===we[le-2].y?0:-1),Re.push(["L",Se.x+Be*Ce,Se.y+We*Ce]),Re}function Xe(we,Ce,Re){return Re&&(Ce=e.util.multiplyTransformMatrices(Ce,[1,0,0,1,-Re.x,-Re.y])),we.map(function(le){for(var Se=le.slice(0),he={},me=1;me<le.length-1;me+=2)he.x=le[me],he.y=le[me+1],he=e.util.transformPoint(he,Ce),Se[me]=he.x,Se[me+1]=he.y;return Se})}e.util.joinPath=function(we){return we.map(function(Ce){return Ce.join(" ")}).join(" ")},e.util.parsePath=it,e.util.makePathSimpler=T,e.util.getSmoothPathFromPoints=It,e.util.getPathSegmentsInfo=_e,e.util.getBoundsOfCurve=x,e.util.getPointOnPath=ot,e.util.transformPath=Xe}(),function(){var r=Array.prototype.slice;function f(x,C){for(var T=r.call(arguments,2),S=[],M=0,O=x.length;M<O;M++)S[M]=T.length?x[M][C].apply(x[M],T):x[M][C].call(x[M]);return S}function _(x,C){return w(x,C,function(T,S){return T>=S})}function b(x,C){return w(x,C,function(T,S){return T<S})}function v(x,C){for(var T=x.length;T--;)x[T]=C;return x}function w(x,C,T){if(!(!x||x.length===0)){var S=x.length-1,M=C?x[S][C]:x[S];if(C)for(;S--;)T(x[S][C],M)&&(M=x[S][C]);else for(;S--;)T(x[S],M)&&(M=x[S]);return M}}e.util.array={fill:v,invoke:f,min:b,max:_}}(),function(){function r(_,b,v){if(v)if(!e.isLikelyNode&&b instanceof Element)_=b;else if(b instanceof Array){_=[];for(var w=0,x=b.length;w<x;w++)_[w]=r({},b[w],v)}else if(b&&typeof b=="object")for(var C in b)C==="canvas"||C==="group"?_[C]=null:b.hasOwnProperty(C)&&(_[C]=r({},b[C],v));else _=b;else for(var C in b)_[C]=b[C];return _}function f(_,b){return r({},_,b)}e.util.object={extend:r,clone:f},e.util.object.extend(e.util,e.Observable)}(),function(){function r(w){return w.replace(/-+(.)?/g,function(x,C){return C?C.toUpperCase():""})}function f(w,x){return w.charAt(0).toUpperCase()+(x?w.slice(1):w.slice(1).toLowerCase())}function _(w){return w.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&apos;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function b(w){var x=0,C,T=[];for(x=0,C;x<w.length;x++)(C=v(w,x))!==!1&&T.push(C);return T}function v(w,x){var C=w.charCodeAt(x);if(isNaN(C))return"";if(C<55296||C>57343)return w.charAt(x);if(55296<=C&&C<=56319){if(w.length<=x+1)throw"High surrogate without following low surrogate";var T=w.charCodeAt(x+1);if(56320>T||T>57343)throw"High surrogate without following low surrogate";return w.charAt(x)+w.charAt(x+1)}if(x===0)throw"Low surrogate without preceding high surrogate";var S=w.charCodeAt(x-1);if(55296>S||S>56319)throw"Low surrogate without preceding high surrogate";return!1}e.util.string={camelize:r,capitalize:f,escapeXml:_,graphemeSplit:b}}(),function(){var r=Array.prototype.slice,f=function(){},_=function(){for(var C in{toString:1})if(C==="toString")return!1;return!0}(),b=function(C,T,S){for(var M in T)M in C.prototype&&typeof C.prototype[M]=="function"&&(T[M]+"").indexOf("callSuper")>-1?C.prototype[M]=function(O){return function(){var V=this.constructor.superclass;this.constructor.superclass=S;var X=T[O].apply(this,arguments);if(this.constructor.superclass=V,O!=="initialize")return X}}(M):C.prototype[M]=T[M],_&&(T.toString!==Object.prototype.toString&&(C.prototype.toString=T.toString),T.valueOf!==Object.prototype.valueOf&&(C.prototype.valueOf=T.valueOf))};function v(){}function w(C){for(var T=null,S=this;S.constructor.superclass;){var M=S.constructor.superclass.prototype[C];if(S[C]!==M){T=M;break}S=S.constructor.superclass.prototype}return T?arguments.length>1?T.apply(this,r.call(arguments,1)):T.call(this):console.log("tried to callSuper "+C+", method not found in prototype chain",this)}function x(){var C=null,T=r.call(arguments,0);typeof T[0]=="function"&&(C=T.shift());function S(){this.initialize.apply(this,arguments)}S.superclass=C,S.subclasses=[],C&&(v.prototype=C.prototype,S.prototype=new v,C.subclasses.push(S));for(var M=0,O=T.length;M<O;M++)b(S,T[M],C);return S.prototype.initialize||(S.prototype.initialize=f),S.prototype.constructor=S,S.prototype.callSuper=w,S}e.util.createClass=x}(),function(){var r=!!e.document.createElement("div").attachEvent,f=["touchstart","touchmove","touchend"];e.util.addListener=function(b,v,w,x){b&&b.addEventListener(v,w,r?!1:x)},e.util.removeListener=function(b,v,w,x){b&&b.removeEventListener(v,w,r?!1:x)};function _(b){var v=b.changedTouches;return v&&v[0]?v[0]:b}e.util.getPointer=function(b){var v=b.target,w=e.util.getScrollLeftTop(v),x=_(b);return{x:x.clientX+w.left,y:x.clientY+w.top}},e.util.isTouchEvent=function(b){return f.indexOf(b.type)>-1||b.pointerType==="touch"}}(),function(){function r(x,C){var T=x.style;if(!T)return x;if(typeof C=="string")return x.style.cssText+=";"+C,C.indexOf("opacity")>-1?w(x,C.match(/opacity:\s*(\d?\.?\d*)/)[1]):x;for(var S in C)if(S==="opacity")w(x,C[S]);else{var M=S==="float"||S==="cssFloat"?typeof T.styleFloat>"u"?"cssFloat":"styleFloat":S;T.setProperty(M,C[S])}return x}var f=e.document.createElement("div"),_=typeof f.style.opacity=="string",b=typeof f.style.filter=="string",v=/alpha\s*\(\s*opacity\s*=\s*([^\)]+)\)/,w=function(x){return x};_?w=function(x,C){return x.style.opacity=C,x}:b&&(w=function(x,C){var T=x.style;return x.currentStyle&&!x.currentStyle.hasLayout&&(T.zoom=1),v.test(T.filter)?(C=C>=.9999?"":"alpha(opacity="+C*100+")",T.filter=T.filter.replace(v,C)):T.filter+=" alpha(opacity="+C*100+")",x}),e.util.setStyle=r}(),function(){var r=Array.prototype.slice;function f(X){return typeof X=="string"?e.document.getElementById(X):X}var _,b=function(X){return r.call(X,0)};try{_=b(e.document.childNodes)instanceof Array}catch{}_||(b=function(X){for(var Z=new Array(X.length),te=X.length;te--;)Z[te]=X[te];return Z});function v(X,Z){var te=e.document.createElement(X);for(var J in Z)J==="class"?te.className=Z[J]:J==="for"?te.htmlFor=Z[J]:te.setAttribute(J,Z[J]);return te}function w(X,Z){X&&(" "+X.className+" ").indexOf(" "+Z+" ")===-1&&(X.className+=(X.className?" ":"")+Z)}function x(X,Z,te){return typeof Z=="string"&&(Z=v(Z,te)),X.parentNode&&X.parentNode.replaceChild(Z,X),Z.appendChild(X),Z}function C(X){for(var Z=0,te=0,J=e.document.documentElement,ie=e.document.body||{scrollLeft:0,scrollTop:0};X&&(X.parentNode||X.host)&&(X=X.parentNode||X.host,X===e.document?(Z=ie.scrollLeft||J.scrollLeft||0,te=ie.scrollTop||J.scrollTop||0):(Z+=X.scrollLeft||0,te+=X.scrollTop||0),!(X.nodeType===1&&X.style.position==="fixed")););return{left:Z,top:te}}function T(X){var Z,te=X&&X.ownerDocument,J={left:0,top:0},ie={left:0,top:0},Ee,Pe={borderLeftWidth:"left",borderTopWidth:"top",paddingLeft:"left",paddingTop:"top"};if(!te)return ie;for(var de in Pe)ie[Pe[de]]+=parseInt(S(X,de),10)||0;return Z=te.documentElement,typeof X.getBoundingClientRect<"u"&&(J=X.getBoundingClientRect()),Ee=C(X),{left:J.left+Ee.left-(Z.clientLeft||0)+ie.left,top:J.top+Ee.top-(Z.clientTop||0)+ie.top}}var S;e.document.defaultView&&e.document.defaultView.getComputedStyle?S=function(X,Z){var te=e.document.defaultView.getComputedStyle(X,null);return te?te[Z]:void 0}:S=function(X,Z){var te=X.style[Z];return!te&&X.currentStyle&&(te=X.currentStyle[Z]),te},function(){var X=e.document.documentElement.style,Z="userSelect"in X?"userSelect":"MozUserSelect"in X?"MozUserSelect":"WebkitUserSelect"in X?"WebkitUserSelect":"KhtmlUserSelect"in X?"KhtmlUserSelect":"";function te(ie){return typeof ie.onselectstart<"u"&&(ie.onselectstart=e.util.falseFunction),Z?ie.style[Z]="none":typeof ie.unselectable=="string"&&(ie.unselectable="on"),ie}function J(ie){return typeof ie.onselectstart<"u"&&(ie.onselectstart=null),Z?ie.style[Z]="":typeof ie.unselectable=="string"&&(ie.unselectable=""),ie}e.util.makeElementUnselectable=te,e.util.makeElementSelectable=J}();function M(X){var Z=e.jsdomImplForWrapper(X);return Z._canvas||Z._image}function O(X){if(!!e.isLikelyNode){var Z=e.jsdomImplForWrapper(X);Z&&(Z._image=null,Z._canvas=null,Z._currentSrc=null,Z._attributes=null,Z._classList=null)}}function V(X,Z){X.imageSmoothingEnabled=X.imageSmoothingEnabled||X.webkitImageSmoothingEnabled||X.mozImageSmoothingEnabled||X.msImageSmoothingEnabled||X.oImageSmoothingEnabled,X.imageSmoothingEnabled=Z}e.util.setImageSmoothing=V,e.util.getById=f,e.util.toArray=b,e.util.addClass=w,e.util.makeElement=v,e.util.wrapElement=x,e.util.getScrollLeftTop=C,e.util.getElementOffset=T,e.util.getNodeCanvas=M,e.util.cleanUpJsdomNode=O}(),function(){function r(b,v){return b+(/\?/.test(b)?"&":"?")+v}function f(){}function _(b,v){v||(v={});var w=v.method?v.method.toUpperCase():"GET",x=v.onComplete||function(){},C=new e.window.XMLHttpRequest,T=v.body||v.parameters;return C.onreadystatechange=function(){C.readyState===4&&(x(C),C.onreadystatechange=f)},w==="GET"&&(T=null,typeof v.parameters=="string"&&(b=r(b,v.parameters))),C.open(w,b,!0),(w==="POST"||w==="PUT")&&C.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),C.send(T),C}e.util.request=_}(),e.log=console.log,e.warn=console.warn,function(){var r=e.util.object.extend,f=e.util.object.clone,_=[];e.util.object.extend(_,{cancelAll:function(){var M=this.splice(0);return M.forEach(function(O){O.cancel()}),M},cancelByCanvas:function(M){if(!M)return[];var O=this.filter(function(V){return typeof V.target=="object"&&V.target.canvas===M});return O.forEach(function(V){V.cancel()}),O},cancelByTarget:function(M){var O=this.findAnimationsByTarget(M);return O.forEach(function(V){V.cancel()}),O},findAnimationIndex:function(M){return this.indexOf(this.findAnimation(M))},findAnimation:function(M){return this.find(function(O){return O.cancel===M})},findAnimationsByTarget:function(M){return M?this.filter(function(O){return O.target===M}):[]}});function b(){return!1}function v(M,O,V,X){return-V*Math.cos(M/X*(Math.PI/2))+V+O}function w(M){M||(M={});var O=!1,V,X=function(){var Z=e.runningAnimations.indexOf(V);return Z>-1&&e.runningAnimations.splice(Z,1)[0]};return V=r(f(M),{cancel:function(){return O=!0,X()},currentValue:"startValue"in M?M.startValue:0,completionRate:0,durationRate:0}),e.runningAnimations.push(V),T(function(Z){var te=Z||+new Date,J=M.duration||500,ie=te+J,Ee,Pe=M.onChange||b,de=M.abort||b,Te=M.onComplete||b,ve=M.easing||v,_e="startValue"in M?M.startValue.length>0:!1,ot="startValue"in M?M.startValue:0,it="endValue"in M?M.endValue:100,It=M.byValue||(_e?ot.map(function(Xe,we){return it[we]-ot[we]}):it-ot);M.onStart&&M.onStart(),function Xe(we){Ee=we||+new Date;var Ce=Ee>ie?J:Ee-te,Re=Ce/J,le=_e?ot.map(function(he,me){return ve(Ce,ot[me],It[me],J)}):ve(Ce,ot,It,J),Se=Math.abs(_e?(le[0]-ot[0])/It[0]:(le-ot)/It);if(V.currentValue=_e?le.slice():le,V.completionRate=Se,V.durationRate=Re,!O){if(de(le,Se,Re)){X();return}if(Ee>ie){V.currentValue=_e?it.slice():it,V.completionRate=1,V.durationRate=1,Pe(_e?it.slice():it,1,1),Te(it,1,1),X();return}else Pe(le,Se,Re),T(Xe)}}(te)}),V.cancel}var x=e.window.requestAnimationFrame||e.window.webkitRequestAnimationFrame||e.window.mozRequestAnimationFrame||e.window.oRequestAnimationFrame||e.window.msRequestAnimationFrame||function(M){return e.window.setTimeout(M,1e3/60)},C=e.window.cancelAnimationFrame||e.window.clearTimeout;function T(){return x.apply(e.window,arguments)}function S(){return C.apply(e.window,arguments)}e.util.animate=w,e.util.requestAnimFrame=T,e.util.cancelAnimFrame=S,e.runningAnimations=_}(),function(){function r(_,b,v){var w="rgba("+parseInt(_[0]+v*(b[0]-_[0]),10)+","+parseInt(_[1]+v*(b[1]-_[1]),10)+","+parseInt(_[2]+v*(b[2]-_[2]),10);return w+=","+(_&&b?parseFloat(_[3]+v*(b[3]-_[3])):1),w+=")",w}function f(_,b,v,w){var x=new e.Color(_).getSource(),C=new e.Color(b).getSource(),T=w.onComplete,S=w.onChange;return w=w||{},e.util.animate(e.util.object.extend(w,{duration:v||500,startValue:x,endValue:C,byValue:C,easing:function(M,O,V,X){var Z=w.colorEasing?w.colorEasing(M,X):1-Math.cos(M/X*(Math.PI/2));return r(O,V,Z)},onComplete:function(M,O,V){if(T)return T(r(C,C,0),O,V)},onChange:function(M,O,V){if(S){if(Array.isArray(M))return S(r(M,M,0),O,V);S(M,O,V)}}}))}e.util.animateColor=f}(),function(){function r(we,Ce,Re,le){return we<Math.abs(Ce)?(we=Ce,le=Re/4):Ce===0&&we===0?le=Re/(2*Math.PI)*Math.asin(1):le=Re/(2*Math.PI)*Math.asin(Ce/we),{a:we,c:Ce,p:Re,s:le}}function f(we,Ce,Re){return we.a*Math.pow(2,10*(Ce-=1))*Math.sin((Ce*Re-we.s)*(2*Math.PI)/we.p)}function _(we,Ce,Re,le){return Re*((we=we/le-1)*we*we+1)+Ce}function b(we,Ce,Re,le){return we/=le/2,we<1?Re/2*we*we*we+Ce:Re/2*((we-=2)*we*we+2)+Ce}function v(we,Ce,Re,le){return Re*(we/=le)*we*we*we+Ce}function w(we,Ce,Re,le){return-Re*((we=we/le-1)*we*we*we-1)+Ce}function x(we,Ce,Re,le){return we/=le/2,we<1?Re/2*we*we*we*we+Ce:-Re/2*((we-=2)*we*we*we-2)+Ce}function C(we,Ce,Re,le){return Re*(we/=le)*we*we*we*we+Ce}function T(we,Ce,Re,le){return Re*((we=we/le-1)*we*we*we*we+1)+Ce}function S(we,Ce,Re,le){return we/=le/2,we<1?Re/2*we*we*we*we*we+Ce:Re/2*((we-=2)*we*we*we*we+2)+Ce}function M(we,Ce,Re,le){return-Re*Math.cos(we/le*(Math.PI/2))+Re+Ce}function O(we,Ce,Re,le){return Re*Math.sin(we/le*(Math.PI/2))+Ce}function V(we,Ce,Re,le){return-Re/2*(Math.cos(Math.PI*we/le)-1)+Ce}function X(we,Ce,Re,le){return we===0?Ce:Re*Math.pow(2,10*(we/le-1))+Ce}function Z(we,Ce,Re,le){return we===le?Ce+Re:Re*(-Math.pow(2,-10*we/le)+1)+Ce}function te(we,Ce,Re,le){return we===0?Ce:we===le?Ce+Re:(we/=le/2,we<1?Re/2*Math.pow(2,10*(we-1))+Ce:Re/2*(-Math.pow(2,-10*--we)+2)+Ce)}function J(we,Ce,Re,le){return-Re*(Math.sqrt(1-(we/=le)*we)-1)+Ce}function ie(we,Ce,Re,le){return Re*Math.sqrt(1-(we=we/le-1)*we)+Ce}function Ee(we,Ce,Re,le){return we/=le/2,we<1?-Re/2*(Math.sqrt(1-we*we)-1)+Ce:Re/2*(Math.sqrt(1-(we-=2)*we)+1)+Ce}function Pe(we,Ce,Re,le){var Se=1.70158,he=0,me=Re;if(we===0)return Ce;if(we/=le,we===1)return Ce+Re;he||(he=le*.3);var Be=r(me,Re,he,Se);return-f(Be,we,le)+Ce}function de(we,Ce,Re,le){var Se=1.70158,he=0,me=Re;if(we===0)return Ce;if(we/=le,we===1)return Ce+Re;he||(he=le*.3);var Be=r(me,Re,he,Se);return Be.a*Math.pow(2,-10*we)*Math.sin((we*le-Be.s)*(2*Math.PI)/Be.p)+Be.c+Ce}function Te(we,Ce,Re,le){var Se=1.70158,he=0,me=Re;if(we===0)return Ce;if(we/=le/2,we===2)return Ce+Re;he||(he=le*(.3*1.5));var Be=r(me,Re,he,Se);return we<1?-.5*f(Be,we,le)+Ce:Be.a*Math.pow(2,-10*(we-=1))*Math.sin((we*le-Be.s)*(2*Math.PI)/Be.p)*.5+Be.c+Ce}function ve(we,Ce,Re,le,Se){return Se===void 0&&(Se=1.70158),Re*(we/=le)*we*((Se+1)*we-Se)+Ce}function _e(we,Ce,Re,le,Se){return Se===void 0&&(Se=1.70158),Re*((we=we/le-1)*we*((Se+1)*we+Se)+1)+Ce}function ot(we,Ce,Re,le,Se){return Se===void 0&&(Se=1.70158),we/=le/2,we<1?Re/2*(we*we*(((Se*=1.525)+1)*we-Se))+Ce:Re/2*((we-=2)*we*(((Se*=1.525)+1)*we+Se)+2)+Ce}function it(we,Ce,Re,le){return Re-It(le-we,0,Re,le)+Ce}function It(we,Ce,Re,le){return(we/=le)<1/2.75?Re*(7.5625*we*we)+Ce:we<2/2.75?Re*(7.5625*(we-=1.5/2.75)*we+.75)+Ce:we<2.5/2.75?Re*(7.5625*(we-=2.25/2.75)*we+.9375)+Ce:Re*(7.5625*(we-=2.625/2.75)*we+.984375)+Ce}function Xe(we,Ce,Re,le){return we<le/2?it(we*2,0,Re,le)*.5+Ce:It(we*2-le,0,Re,le)*.5+Re*.5+Ce}e.util.ease={easeInQuad:function(we,Ce,Re,le){return Re*(we/=le)*we+Ce},easeOutQuad:function(we,Ce,Re,le){return-Re*(we/=le)*(we-2)+Ce},easeInOutQuad:function(we,Ce,Re,le){return we/=le/2,we<1?Re/2*we*we+Ce:-Re/2*(--we*(we-2)-1)+Ce},easeInCubic:function(we,Ce,Re,le){return Re*(we/=le)*we*we+Ce},easeOutCubic:_,easeInOutCubic:b,easeInQuart:v,easeOutQuart:w,easeInOutQuart:x,easeInQuint:C,easeOutQuint:T,easeInOutQuint:S,easeInSine:M,easeOutSine:O,easeInOutSine:V,easeInExpo:X,easeOutExpo:Z,easeInOutExpo:te,easeInCirc:J,easeOutCirc:ie,easeInOutCirc:Ee,easeInElastic:Pe,easeOutElastic:de,easeInOutElastic:Te,easeInBack:ve,easeOutBack:_e,easeInOutBack:ot,easeInBounce:it,easeOutBounce:It,easeInOutBounce:Xe}}(),function(r){var f=r.fabric||(r.fabric={}),_=f.util.object.extend,b=f.util.object.clone,v=f.util.toFixed,w=f.util.parseUnit,x=f.util.multiplyTransformMatrices,C=["path","circle","polygon","polyline","ellipse","rect","line","image","text"],T=["symbol","image","marker","pattern","view","svg"],S=["pattern","defs","symbol","metadata","clipPath","mask","desc"],M=["symbol","g","a","svg","clipPath","defs"],O={cx:"left",x:"left",r:"radius",cy:"top",y:"top",display:"visible",visibility:"visible",transform:"transformMatrix","fill-opacity":"fillOpacity","fill-rule":"fillRule","font-family":"fontFamily","font-size":"fontSize","font-style":"fontStyle","font-weight":"fontWeight","letter-spacing":"charSpacing","paint-order":"paintFirst","stroke-dasharray":"strokeDashArray","stroke-dashoffset":"strokeDashOffset","stroke-linecap":"strokeLineCap","stroke-linejoin":"strokeLineJoin","stroke-miterlimit":"strokeMiterLimit","stroke-opacity":"strokeOpacity","stroke-width":"strokeWidth","text-decoration":"textDecoration","text-anchor":"textAnchor",opacity:"opacity","clip-path":"clipPath","clip-rule":"clipRule","vector-effect":"strokeUniform","image-rendering":"imageSmoothing"},V={stroke:"strokeOpacity",fill:"fillOpacity"},X="font-size",Z="clip-path";f.svgValidTagNamesRegEx=ie(C),f.svgViewBoxElementsRegEx=ie(T),f.svgInvalidAncestorsRegEx=ie(S),f.svgValidParentsRegEx=ie(M),f.cssRules={},f.gradientDefs={},f.clipPaths={};function te(he){return he in O?O[he]:he}function J(he,me,Be,We){var st=Array.isArray(me),Ye;if((he==="fill"||he==="stroke")&&me==="none")me="";else{if(he==="strokeUniform")return me==="non-scaling-stroke";if(he==="strokeDashArray")me==="none"?me=null:me=me.replace(/,/g," ").split(/\s+/).map(parseFloat);else if(he==="transformMatrix")Be&&Be.transformMatrix?me=x(Be.transformMatrix,f.parseTransformAttribute(me)):me=f.parseTransformAttribute(me);else if(he==="visible")me=me!=="none"&&me!=="hidden",Be&&Be.visible===!1&&(me=!1);else if(he==="opacity")me=parseFloat(me),Be&&typeof Be.opacity<"u"&&(me*=Be.opacity);else if(he==="textAnchor")me=me==="start"?"left":me==="end"?"right":"center";else if(he==="charSpacing")Ye=w(me,We)/We*1e3;else if(he==="paintFirst"){var gt=me.indexOf("fill"),Mt=me.indexOf("stroke"),me="fill";(gt>-1&&Mt>-1&&Mt<gt||gt===-1&&Mt>-1)&&(me="stroke")}else{if(he==="href"||he==="xlink:href"||he==="font")return me;if(he==="imageSmoothing")return me==="optimizeQuality";Ye=st?me.map(w):w(me,We)}}return!st&&isNaN(Ye)?me:Ye}function ie(he){return new RegExp("^("+he.join("|")+")\\b","i")}function Ee(he){for(var me in V)if(!(typeof he[V[me]]>"u"||he[me]==="")){if(typeof he[me]>"u"){if(!f.Object.prototype[me])continue;he[me]=f.Object.prototype[me]}if(he[me].indexOf("url(")!==0){var Be=new f.Color(he[me]);he[me]=Be.setAlpha(v(Be.getAlpha()*he[V[me]],2)).toRgba()}}return he}function Pe(he,me){var Be,We=[],st,Ye,gt;for(Ye=0,gt=me.length;Ye<gt;Ye++)Be=me[Ye],st=he.getElementsByTagName(Be),We=We.concat(Array.prototype.slice.call(st));return We}f.parseTransformAttribute=function(){function he(Xt,mi){var Zi=f.util.cos(mi[0]),Ci=f.util.sin(mi[0]),ti=0,Me=0;mi.length===3&&(ti=mi[1],Me=mi[2]),Xt[0]=Zi,Xt[1]=Ci,Xt[2]=-Ci,Xt[3]=Zi,Xt[4]=ti-(Zi*ti-Ci*Me),Xt[5]=Me-(Ci*ti+Zi*Me)}function me(Xt,mi){var Zi=mi[0],Ci=mi.length===2?mi[1]:mi[0];Xt[0]=Zi,Xt[3]=Ci}function Be(Xt,mi,Zi){Xt[Zi]=Math.tan(f.util.degreesToRadians(mi[0]))}function We(Xt,mi){Xt[4]=mi[0],mi.length===2&&(Xt[5]=mi[1])}var st=f.iMatrix,Ye=f.reNum,gt=f.commaWsp,Mt="(?:(skewX)\\s*\\(\\s*("+Ye+")\\s*\\))",ri="(?:(skewY)\\s*\\(\\s*("+Ye+")\\s*\\))",ut="(?:(rotate)\\s*\\(\\s*("+Ye+")(?:"+gt+"("+Ye+")"+gt+"("+Ye+"))?\\s*\\))",wt="(?:(scale)\\s*\\(\\s*("+Ye+")(?:"+gt+"("+Ye+"))?\\s*\\))",bt="(?:(translate)\\s*\\(\\s*("+Ye+")(?:"+gt+"("+Ye+"))?\\s*\\))",Je="(?:(matrix)\\s*\\(\\s*("+Ye+")"+gt+"("+Ye+")"+gt+"("+Ye+")"+gt+"("+Ye+")"+gt+"("+Ye+")"+gt+"("+Ye+")\\s*\\))",ei="(?:"+Je+"|"+bt+"|"+wt+"|"+ut+"|"+Mt+"|"+ri+")",li="(?:"+ei+"(?:"+gt+"*"+ei+")*)",Qt="^\\s*(?:"+li+"?)\\s*$",Si=new RegExp(Qt),Ti=new RegExp(ei,"g");return function(Xt){var mi=st.concat(),Zi=[];if(!Xt||Xt&&!Si.test(Xt))return mi;Xt.replace(Ti,function(ti){var Me=new RegExp(ei).exec(ti).filter(function($e){return!!$e}),Q=Me[1],ae=Me.slice(2).map(parseFloat);switch(Q){case"translate":We(mi,ae);break;case"rotate":ae[0]=f.util.degreesToRadians(ae[0]),he(mi,ae);break;case"scale":me(mi,ae);break;case"skewX":Be(mi,ae,2);break;case"skewY":Be(mi,ae,1);break;case"matrix":mi=ae;break}Zi.push(mi.concat()),mi=st.concat()});for(var Ci=Zi[0];Zi.length>1;)Zi.shift(),Ci=f.util.multiplyTransformMatrices(Ci,Zi[0]);return Ci}}();function de(he,me){var Be,We;he.replace(/;\s*$/,"").split(";").forEach(function(st){var Ye=st.split(":");Be=Ye[0].trim().toLowerCase(),We=Ye[1].trim(),me[Be]=We})}function Te(he,me){var Be,We;for(var st in he)typeof he[st]>"u"||(Be=st.toLowerCase(),We=he[st],me[Be]=We)}function ve(he,me){var Be={};for(var We in f.cssRules[me])if(_e(he,We.split(" ")))for(var st in f.cssRules[me][We])Be[st]=f.cssRules[me][We][st];return Be}function _e(he,me){var Be,We=!0;return Be=it(he,me.pop()),Be&&me.length&&(We=ot(he,me)),Be&&We&&me.length===0}function ot(he,me){for(var Be,We=!0;he.parentNode&&he.parentNode.nodeType===1&&me.length;)We&&(Be=me.pop()),he=he.parentNode,We=it(he,Be);return me.length===0}function it(he,me){var Be=he.nodeName,We=he.getAttribute("class"),st=he.getAttribute("id"),Ye,gt;if(Ye=new RegExp("^"+Be,"i"),me=me.replace(Ye,""),st&&me.length&&(Ye=new RegExp("#"+st+"(?![a-zA-Z\\-]+)","i"),me=me.replace(Ye,"")),We&&me.length)for(We=We.split(" "),gt=We.length;gt--;)Ye=new RegExp("\\."+We[gt]+"(?![a-zA-Z\\-]+)","i"),me=me.replace(Ye,"");return me.length===0}function It(he,me){var Be;if(he.getElementById&&(Be=he.getElementById(me)),Be)return Be;var We,st,Ye,gt=he.getElementsByTagName("*");for(st=0,Ye=gt.length;st<Ye;st++)if(We=gt[st],me===We.getAttribute("id"))return We}function Xe(he){for(var me=Pe(he,["use","svg:use"]),Be=0;me.length&&Be<me.length;){var We=me[Be],st=We.getAttribute("xlink:href")||We.getAttribute("href");if(st===null)return;var Ye=st.slice(1),gt=We.getAttribute("x")||0,Mt=We.getAttribute("y")||0,ri=It(he,Ye).cloneNode(!0),ut=(ri.getAttribute("transform")||"")+" translate("+gt+", "+Mt+")",wt,bt=me.length,Je,ei,li,Qt,Si=f.svgNS;if(Ce(ri),/^svg$/i.test(ri.nodeName)){var Ti=ri.ownerDocument.createElementNS(Si,"g");for(ei=0,li=ri.attributes,Qt=li.length;ei<Qt;ei++)Je=li.item(ei),Ti.setAttributeNS(Si,Je.nodeName,Je.nodeValue);for(;ri.firstChild;)Ti.appendChild(ri.firstChild);ri=Ti}for(ei=0,li=We.attributes,Qt=li.length;ei<Qt;ei++)Je=li.item(ei),!(Je.nodeName==="x"||Je.nodeName==="y"||Je.nodeName==="xlink:href"||Je.nodeName==="href")&&(Je.nodeName==="transform"?ut=Je.nodeValue+" "+ut:ri.setAttribute(Je.nodeName,Je.nodeValue));ri.setAttribute("transform",ut),ri.setAttribute("instantiated_by_use","1"),ri.removeAttribute("id"),wt=We.parentNode,wt.replaceChild(ri,We),me.length===bt&&Be++}}var we=new RegExp("^\\s*("+f.reNum+"+)\\s*,?\\s*("+f.reNum+"+)\\s*,?\\s*("+f.reNum+"+)\\s*,?\\s*("+f.reNum+"+)\\s*$");function Ce(he){if(!f.svgViewBoxElementsRegEx.test(he.nodeName))return{};var me=he.getAttribute("viewBox"),Be=1,We=1,st=0,Ye=0,gt,Mt,ri,ut,wt=he.getAttribute("width"),bt=he.getAttribute("height"),Je=he.getAttribute("x")||0,ei=he.getAttribute("y")||0,li=he.getAttribute("preserveAspectRatio")||"",Qt=!me||!(me=me.match(we)),Si=!wt||!bt||wt==="100%"||bt==="100%",Ti=Qt&&Si,Xt={},mi="",Zi=0,Ci=0;if(Xt.width=0,Xt.height=0,Xt.toBeParsed=Ti,Qt&&(Je||ei)&&he.parentNode&&he.parentNode.nodeName!=="#document"&&(mi=" translate("+w(Je)+" "+w(ei)+") ",ri=(he.getAttribute("transform")||"")+mi,he.setAttribute("transform",ri),he.removeAttribute("x"),he.removeAttribute("y")),Ti)return Xt;if(Qt)return Xt.width=w(wt),Xt.height=w(bt),Xt;if(st=-parseFloat(me[1]),Ye=-parseFloat(me[2]),gt=parseFloat(me[3]),Mt=parseFloat(me[4]),Xt.minX=st,Xt.minY=Ye,Xt.viewBoxWidth=gt,Xt.viewBoxHeight=Mt,Si?(Xt.width=gt,Xt.height=Mt):(Xt.width=w(wt),Xt.height=w(bt),Be=Xt.width/gt,We=Xt.height/Mt),li=f.util.parsePreserveAspectRatioAttribute(li),li.alignX!=="none"&&(li.meetOrSlice==="meet"&&(We=Be=Be>We?We:Be),li.meetOrSlice==="slice"&&(We=Be=Be>We?Be:We),Zi=Xt.width-gt*Be,Ci=Xt.height-Mt*Be,li.alignX==="Mid"&&(Zi/=2),li.alignY==="Mid"&&(Ci/=2),li.alignX==="Min"&&(Zi=0),li.alignY==="Min"&&(Ci=0)),Be===1&&We===1&&st===0&&Ye===0&&Je===0&&ei===0)return Xt;if((Je||ei)&&he.parentNode.nodeName!=="#document"&&(mi=" translate("+w(Je)+" "+w(ei)+") "),ri=mi+" matrix("+Be+" 0 0 "+We+" "+(st*Be+Zi)+" "+(Ye*We+Ci)+") ",he.nodeName==="svg"){for(ut=he.ownerDocument.createElementNS(f.svgNS,"g");he.firstChild;)ut.appendChild(he.firstChild);he.appendChild(ut)}else ut=he,ut.removeAttribute("x"),ut.removeAttribute("y"),ri=ut.getAttribute("transform")+ri;return ut.setAttribute("transform",ri),Xt}function Re(he,me){for(;he&&(he=he.parentNode);)if(he.nodeName&&me.test(he.nodeName.replace("svg:",""))&&!he.getAttribute("instantiated_by_use"))return!0;return!1}f.parseSVGDocument=function(he,me,Be,We){if(!!he){Xe(he);var st=f.Object.__uid++,Ye,gt,Mt=Ce(he),ri=f.util.toArray(he.getElementsByTagName("*"));if(Mt.crossOrigin=We&&We.crossOrigin,Mt.svgUid=st,ri.length===0&&f.isLikelyNode){ri=he.selectNodes('//*[name(.)!="svg"]');var ut=[];for(Ye=0,gt=ri.length;Ye<gt;Ye++)ut[Ye]=ri[Ye];ri=ut}var wt=ri.filter(function(Je){return Ce(Je),f.svgValidTagNamesRegEx.test(Je.nodeName.replace("svg:",""))&&!Re(Je,f.svgInvalidAncestorsRegEx)});if(!wt||wt&&!wt.length){me&&me([],{});return}var bt={};ri.filter(function(Je){return Je.nodeName.replace("svg:","")==="clipPath"}).forEach(function(Je){var ei=Je.getAttribute("id");bt[ei]=f.util.toArray(Je.getElementsByTagName("*")).filter(function(li){return f.svgValidTagNamesRegEx.test(li.nodeName.replace("svg:",""))})}),f.gradientDefs[st]=f.getGradientDefs(he),f.cssRules[st]=f.getCSSRules(he),f.clipPaths[st]=bt,f.parseElements(wt,function(Je,ei){me&&(me(Je,Mt,ei,ri),delete f.gradientDefs[st],delete f.cssRules[st],delete f.clipPaths[st])},b(Mt),Be,We)}};function le(he,me){var Be=["gradientTransform","x1","x2","y1","y2","gradientUnits","cx","cy","r","fx","fy"],We="xlink:href",st=me.getAttribute(We).slice(1),Ye=It(he,st);if(Ye&&Ye.getAttribute(We)&&le(he,Ye),Be.forEach(function(Mt){Ye&&!me.hasAttribute(Mt)&&Ye.hasAttribute(Mt)&&me.setAttribute(Mt,Ye.getAttribute(Mt))}),!me.children.length)for(var gt=Ye.cloneNode(!0);gt.firstChild;)me.appendChild(gt.firstChild);me.removeAttribute(We)}var Se=new RegExp("(normal|italic)?\\s*(normal|small-caps)?\\s*(normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900)?\\s*("+f.reNum+"(?:px|cm|mm|em|pt|pc|in)*)(?:\\/(normal|"+f.reNum+"))?\\s+(.*)");_(f,{parseFontDeclaration:function(he,me){var Be=he.match(Se);if(!!Be){var We=Be[1],st=Be[3],Ye=Be[4],gt=Be[5],Mt=Be[6];We&&(me.fontStyle=We),st&&(me.fontWeight=isNaN(parseFloat(st))?st:parseFloat(st)),Ye&&(me.fontSize=w(Ye)),Mt&&(me.fontFamily=Mt),gt&&(me.lineHeight=gt==="normal"?1:gt)}},getGradientDefs:function(he){var me=["linearGradient","radialGradient","svg:linearGradient","svg:radialGradient"],Be=Pe(he,me),We,st=0,Ye={};for(st=Be.length;st--;)We=Be[st],We.getAttribute("xlink:href")&&le(he,We),Ye[We.getAttribute("id")]=We;return Ye},parseAttributes:function(he,me,Be){if(!!he){var We,st={},Ye,gt;typeof Be>"u"&&(Be=he.getAttribute("svgUid")),he.parentNode&&f.svgValidParentsRegEx.test(he.parentNode.nodeName)&&(st=f.parseAttributes(he.parentNode,me,Be));var Mt=me.reduce(function(li,Qt){return We=he.getAttribute(Qt),We&&(li[Qt]=We),li},{}),ri=_(ve(he,Be),f.parseStyleAttribute(he));Mt=_(Mt,ri),ri[Z]&&he.setAttribute(Z,ri[Z]),Ye=gt=st.fontSize||f.Text.DEFAULT_SVG_FONT_SIZE,Mt[X]&&(Mt[X]=Ye=w(Mt[X],gt));var ut,wt,bt={};for(var Je in Mt)ut=te(Je),wt=J(ut,Mt[Je],st,Ye),bt[ut]=wt;bt&&bt.font&&f.parseFontDeclaration(bt.font,bt);var ei=_(st,bt);return f.svgValidParentsRegEx.test(he.nodeName)?ei:Ee(ei)}},parseElements:function(he,me,Be,We,st){new f.ElementsParser(he,me,Be,We,st).parse()},parseStyleAttribute:function(he){var me={},Be=he.getAttribute("style");return Be&&(typeof Be=="string"?de(Be,me):Te(Be,me)),me},parsePointsAttribute:function(he){if(!he)return null;he=he.replace(/,/g," ").trim(),he=he.split(/\s+/);var me=[],Be,We;for(Be=0,We=he.length;Be<We;Be+=2)me.push({x:parseFloat(he[Be]),y:parseFloat(he[Be+1])});return me},getCSSRules:function(he){var me=he.getElementsByTagName("style"),Be,We,st={},Ye;for(Be=0,We=me.length;Be<We;Be++){var gt=me[Be].textContent;gt=gt.replace(/\/\*[\s\S]*?\*\//g,""),gt.trim()!==""&&(Ye=gt.split("}"),Ye=Ye.filter(function(Mt){return Mt.trim()}),Ye.forEach(function(Mt){var ri=Mt.split("{"),ut={},wt=ri[1].trim(),bt=wt.split(";").filter(function(Qt){return Qt.trim()});for(Be=0,We=bt.length;Be<We;Be++){var Je=bt[Be].split(":"),ei=Je[0].trim(),li=Je[1].trim();ut[ei]=li}Mt=ri[0].trim(),Mt.split(",").forEach(function(Qt){Qt=Qt.replace(/^svg/i,"").trim(),Qt!==""&&(st[Qt]?f.util.object.extend(st[Qt],ut):st[Qt]=f.util.object.clone(ut))})}))}return st},loadSVGFromURL:function(he,me,Be,We){he=he.replace(/^\n\s*/,"").trim(),new f.util.request(he,{method:"get",onComplete:st});function st(Ye){var gt=Ye.responseXML;if(!gt||!gt.documentElement)return me&&me(null),!1;f.parseSVGDocument(gt.documentElement,function(Mt,ri,ut,wt){me&&me(Mt,ri,ut,wt)},Be,We)}},loadSVGFromString:function(he,me,Be,We){var st=new f.window.DOMParser,Ye=st.parseFromString(he.trim(),"text/xml");f.parseSVGDocument(Ye.documentElement,function(gt,Mt,ri,ut){me(gt,Mt,ri,ut)},Be,We)}})}(i),e.ElementsParser=function(r,f,_,b,v,w){this.elements=r,this.callback=f,this.options=_,this.reviver=b,this.svgUid=_&&_.svgUid||0,this.parsingOptions=v,this.regexUrl=/^url\(['"]?#([^'"]+)['"]?\)/g,this.doc=w},function(r){r.parse=function(){this.instances=new Array(this.elements.length),this.numElements=this.elements.length,this.createObjects()},r.createObjects=function(){var f=this;this.elements.forEach(function(_,b){_.setAttribute("svgUid",f.svgUid),f.createObject(_,b)})},r.findTag=function(f){return e[e.util.string.capitalize(f.tagName.replace("svg:",""))]},r.createObject=function(f,_){var b=this.findTag(f);if(b&&b.fromElement)try{b.fromElement(f,this.createCallback(_,f),this.options)}catch(v){e.log(v)}else this.checkIfDone()},r.createCallback=function(f,_){var b=this;return function(v){var w;b.resolveGradient(v,_,"fill"),b.resolveGradient(v,_,"stroke"),v instanceof e.Image&&v._originalElement&&(w=v.parsePreserveAspectRatioAttribute(_)),v._removeTransformMatrix(w),b.resolveClipPath(v,_),b.reviver&&b.reviver(_,v),b.instances[f]=v,b.checkIfDone()}},r.extractPropertyDefinition=function(f,_,b){var v=f[_],w=this.regexUrl;if(!!w.test(v)){w.lastIndex=0;var x=w.exec(v)[1];return w.lastIndex=0,e[b][this.svgUid][x]}},r.resolveGradient=function(f,_,b){var v=this.extractPropertyDefinition(f,b,"gradientDefs");if(v){var w=_.getAttribute(b+"-opacity"),x=e.Gradient.fromElement(v,f,w,this.options);f.set(b,x)}},r.createClipPathCallback=function(f,_){return function(b){b._removeTransformMatrix(),b.fillRule=b.clipRule,_.push(b)}},r.resolveClipPath=function(f,_){var b=this.extractPropertyDefinition(f,"clipPath","clipPaths"),v,w,x,C,T,S;if(b){C=[],x=e.util.invertTransform(f.calcTransformMatrix());for(var M=b[0].parentNode,O=_;O.parentNode&&O.getAttribute("clip-path")!==f.clipPath;)O=O.parentNode;O.parentNode.appendChild(M);for(var V=0;V<b.length;V++)v=b[V],w=this.findTag(v),w.fromElement(v,this.createClipPathCallback(f,C),this.options);C.length===1?b=C[0]:b=new e.Group(C),T=e.util.multiplyTransformMatrices(x,b.calcTransformMatrix()),b.clipPath&&this.resolveClipPath(b,O);var S=e.util.qrDecompose(T);b.flipX=!1,b.flipY=!1,b.set("scaleX",S.scaleX),b.set("scaleY",S.scaleY),b.angle=S.angle,b.skewX=S.skewX,b.skewY=0,b.setPositionByOrigin({x:S.translateX,y:S.translateY},"center","center"),f.clipPath=b}else delete f.clipPath},r.checkIfDone=function(){--this.numElements===0&&(this.instances=this.instances.filter(function(f){return f!=null}),this.callback(this.instances,this.elements))}}(e.ElementsParser.prototype),function(r){var f=r.fabric||(r.fabric={});if(f.Point){f.warn("fabric.Point is already defined");return}f.Point=_;function _(b,v){this.x=b,this.y=v}_.prototype={type:"point",constructor:_,add:function(b){return new _(this.x+b.x,this.y+b.y)},addEquals:function(b){return this.x+=b.x,this.y+=b.y,this},scalarAdd:function(b){return new _(this.x+b,this.y+b)},scalarAddEquals:function(b){return this.x+=b,this.y+=b,this},subtract:function(b){return new _(this.x-b.x,this.y-b.y)},subtractEquals:function(b){return this.x-=b.x,this.y-=b.y,this},scalarSubtract:function(b){return new _(this.x-b,this.y-b)},scalarSubtractEquals:function(b){return this.x-=b,this.y-=b,this},multiply:function(b){return new _(this.x*b,this.y*b)},multiplyEquals:function(b){return this.x*=b,this.y*=b,this},divide:function(b){return new _(this.x/b,this.y/b)},divideEquals:function(b){return this.x/=b,this.y/=b,this},eq:function(b){return this.x===b.x&&this.y===b.y},lt:function(b){return this.x<b.x&&this.y<b.y},lte:function(b){return this.x<=b.x&&this.y<=b.y},gt:function(b){return this.x>b.x&&this.y>b.y},gte:function(b){return this.x>=b.x&&this.y>=b.y},lerp:function(b,v){return typeof v>"u"&&(v=.5),v=Math.max(Math.min(1,v),0),new _(this.x+(b.x-this.x)*v,this.y+(b.y-this.y)*v)},distanceFrom:function(b){var v=this.x-b.x,w=this.y-b.y;return Math.sqrt(v*v+w*w)},midPointFrom:function(b){return this.lerp(b)},min:function(b){return new _(Math.min(this.x,b.x),Math.min(this.y,b.y))},max:function(b){return new _(Math.max(this.x,b.x),Math.max(this.y,b.y))},toString:function(){return this.x+","+this.y},setXY:function(b,v){return this.x=b,this.y=v,this},setX:function(b){return this.x=b,this},setY:function(b){return this.y=b,this},setFromPoint:function(b){return this.x=b.x,this.y=b.y,this},swap:function(b){var v=this.x,w=this.y;this.x=b.x,this.y=b.y,b.x=v,b.y=w},clone:function(){return new _(this.x,this.y)}}}(i),function(r){var f=r.fabric||(r.fabric={});if(f.Intersection){f.warn("fabric.Intersection is already defined");return}function _(b){this.status=b,this.points=[]}f.Intersection=_,f.Intersection.prototype={constructor:_,appendPoint:function(b){return this.points.push(b),this},appendPoints:function(b){return this.points=this.points.concat(b),this}},f.Intersection.intersectLineLine=function(b,v,w,x){var C,T=(x.x-w.x)*(b.y-w.y)-(x.y-w.y)*(b.x-w.x),S=(v.x-b.x)*(b.y-w.y)-(v.y-b.y)*(b.x-w.x),M=(x.y-w.y)*(v.x-b.x)-(x.x-w.x)*(v.y-b.y);if(M!==0){var O=T/M,V=S/M;0<=O&&O<=1&&0<=V&&V<=1?(C=new _("Intersection"),C.appendPoint(new f.Point(b.x+O*(v.x-b.x),b.y+O*(v.y-b.y)))):C=new _}else T===0||S===0?C=new _("Coincident"):C=new _("Parallel");return C},f.Intersection.intersectLinePolygon=function(b,v,w){var x=new _,C=w.length,T,S,M,O;for(O=0;O<C;O++)T=w[O],S=w[(O+1)%C],M=_.intersectLineLine(b,v,T,S),x.appendPoints(M.points);return x.points.length>0&&(x.status="Intersection"),x},f.Intersection.intersectPolygonPolygon=function(b,v){var w=new _,x=b.length,C;for(C=0;C<x;C++){var T=b[C],S=b[(C+1)%x],M=_.intersectLinePolygon(T,S,v);w.appendPoints(M.points)}return w.points.length>0&&(w.status="Intersection"),w},f.Intersection.intersectPolygonRectangle=function(b,v,w){var x=v.min(w),C=v.max(w),T=new f.Point(C.x,x.y),S=new f.Point(x.x,C.y),M=_.intersectLinePolygon(x,T,b),O=_.intersectLinePolygon(T,C,b),V=_.intersectLinePolygon(C,S,b),X=_.intersectLinePolygon(S,x,b),Z=new _;return Z.appendPoints(M.points),Z.appendPoints(O.points),Z.appendPoints(V.points),Z.appendPoints(X.points),Z.points.length>0&&(Z.status="Intersection"),Z}}(i),function(r){var f=r.fabric||(r.fabric={});if(f.Color){f.warn("fabric.Color is already defined.");return}function _(v){v?this._tryParsingColor(v):this.setSource([0,0,0,1])}f.Color=_,f.Color.prototype={_tryParsingColor:function(v){var w;v in _.colorNameMap&&(v=_.colorNameMap[v]),v==="transparent"&&(w=[255,255,255,0]),w||(w=_.sourceFromHex(v)),w||(w=_.sourceFromRgb(v)),w||(w=_.sourceFromHsl(v)),w||(w=[0,0,0,1]),w&&this.setSource(w)},_rgbToHsl:function(v,w,x){v/=255,w/=255,x/=255;var C,T,S,M=f.util.array.max([v,w,x]),O=f.util.array.min([v,w,x]);if(S=(M+O)/2,M===O)C=T=0;else{var V=M-O;switch(T=S>.5?V/(2-M-O):V/(M+O),M){case v:C=(w-x)/V+(w<x?6:0);break;case w:C=(x-v)/V+2;break;case x:C=(v-w)/V+4;break}C/=6}return[Math.round(C*360),Math.round(T*100),Math.round(S*100)]},getSource:function(){return this._source},setSource:function(v){this._source=v},toRgb:function(){var v=this.getSource();return"rgb("+v[0]+","+v[1]+","+v[2]+")"},toRgba:function(){var v=this.getSource();return"rgba("+v[0]+","+v[1]+","+v[2]+","+v[3]+")"},toHsl:function(){var v=this.getSource(),w=this._rgbToHsl(v[0],v[1],v[2]);return"hsl("+w[0]+","+w[1]+"%,"+w[2]+"%)"},toHsla:function(){var v=this.getSource(),w=this._rgbToHsl(v[0],v[1],v[2]);return"hsla("+w[0]+","+w[1]+"%,"+w[2]+"%,"+v[3]+")"},toHex:function(){var v=this.getSource(),w,x,C;return w=v[0].toString(16),w=w.length===1?"0"+w:w,x=v[1].toString(16),x=x.length===1?"0"+x:x,C=v[2].toString(16),C=C.length===1?"0"+C:C,w.toUpperCase()+x.toUpperCase()+C.toUpperCase()},toHexa:function(){var v=this.getSource(),w;return w=Math.round(v[3]*255),w=w.toString(16),w=w.length===1?"0"+w:w,this.toHex()+w.toUpperCase()},getAlpha:function(){return this.getSource()[3]},setAlpha:function(v){var w=this.getSource();return w[3]=v,this.setSource(w),this},toGrayscale:function(){var v=this.getSource(),w=parseInt((v[0]*.3+v[1]*.59+v[2]*.11).toFixed(0),10),x=v[3];return this.setSource([w,w,w,x]),this},toBlackWhite:function(v){var w=this.getSource(),x=(w[0]*.3+w[1]*.59+w[2]*.11).toFixed(0),C=w[3];return v=v||127,x=Number(x)<Number(v)?0:255,this.setSource([x,x,x,C]),this},overlayWith:function(v){v instanceof _||(v=new _(v));var w=[],x=this.getAlpha(),C=.5,T=this.getSource(),S=v.getSource(),M;for(M=0;M<3;M++)w.push(Math.round(T[M]*(1-C)+S[M]*C));return w[3]=x,this.setSource(w),this}},f.Color.reRGBa=/^rgba?\(\s*(\d{1,3}(?:\.\d+)?\%?)\s*,\s*(\d{1,3}(?:\.\d+)?\%?)\s*,\s*(\d{1,3}(?:\.\d+)?\%?)\s*(?:\s*,\s*((?:\d*\.?\d+)?)\s*)?\)$/i,f.Color.reHSLa=/^hsla?\(\s*(\d{1,3})\s*,\s*(\d{1,3}\%)\s*,\s*(\d{1,3}\%)\s*(?:\s*,\s*(\d+(?:\.\d+)?)\s*)?\)$/i,f.Color.reHex=/^#?([0-9a-f]{8}|[0-9a-f]{6}|[0-9a-f]{4}|[0-9a-f]{3})$/i,f.Color.colorNameMap={aliceblue:"#F0F8FF",antiquewhite:"#FAEBD7",aqua:"#00FFFF",aquamarine:"#7FFFD4",azure:"#F0FFFF",beige:"#F5F5DC",bisque:"#FFE4C4",black:"#000000",blanchedalmond:"#FFEBCD",blue:"#0000FF",blueviolet:"#8A2BE2",brown:"#A52A2A",burlywood:"#DEB887",cadetblue:"#5F9EA0",chartreuse:"#7FFF00",chocolate:"#D2691E",coral:"#FF7F50",cornflowerblue:"#6495ED",cornsilk:"#FFF8DC",crimson:"#DC143C",cyan:"#00FFFF",darkblue:"#00008B",darkcyan:"#008B8B",darkgoldenrod:"#B8860B",darkgray:"#A9A9A9",darkgrey:"#A9A9A9",darkgreen:"#006400",darkkhaki:"#BDB76B",darkmagenta:"#8B008B",darkolivegreen:"#556B2F",darkorange:"#FF8C00",darkorchid:"#9932CC",darkred:"#8B0000",darksalmon:"#E9967A",darkseagreen:"#8FBC8F",darkslateblue:"#483D8B",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",darkturquoise:"#00CED1",darkviolet:"#9400D3",deeppink:"#FF1493",deepskyblue:"#00BFFF",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1E90FF",firebrick:"#B22222",floralwhite:"#FFFAF0",forestgreen:"#228B22",fuchsia:"#FF00FF",gainsboro:"#DCDCDC",ghostwhite:"#F8F8FF",gold:"#FFD700",goldenrod:"#DAA520",gray:"#808080",grey:"#808080",green:"#008000",greenyellow:"#ADFF2F",honeydew:"#F0FFF0",hotpink:"#FF69B4",indianred:"#CD5C5C",indigo:"#4B0082",ivory:"#FFFFF0",khaki:"#F0E68C",lavender:"#E6E6FA",lavenderblush:"#FFF0F5",lawngreen:"#7CFC00",lemonchiffon:"#FFFACD",lightblue:"#ADD8E6",lightcoral:"#F08080",lightcyan:"#E0FFFF",lightgoldenrodyellow:"#FAFAD2",lightgray:"#D3D3D3",lightgrey:"#D3D3D3",lightgreen:"#90EE90",lightpink:"#FFB6C1",lightsalmon:"#FFA07A",lightseagreen:"#20B2AA",lightskyblue:"#87CEFA",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#B0C4DE",lightyellow:"#FFFFE0",lime:"#00FF00",limegreen:"#32CD32",linen:"#FAF0E6",magenta:"#FF00FF",maroon:"#800000",mediumaquamarine:"#66CDAA",mediumblue:"#0000CD",mediumorchid:"#BA55D3",mediumpurple:"#9370DB",mediumseagreen:"#3CB371",mediumslateblue:"#7B68EE",mediumspringgreen:"#00FA9A",mediumturquoise:"#48D1CC",mediumvioletred:"#C71585",midnightblue:"#191970",mintcream:"#F5FFFA",mistyrose:"#FFE4E1",moccasin:"#FFE4B5",navajowhite:"#FFDEAD",navy:"#000080",oldlace:"#FDF5E6",olive:"#808000",olivedrab:"#6B8E23",orange:"#FFA500",orangered:"#FF4500",orchid:"#DA70D6",palegoldenrod:"#EEE8AA",palegreen:"#98FB98",paleturquoise:"#AFEEEE",palevioletred:"#DB7093",papayawhip:"#FFEFD5",peachpuff:"#FFDAB9",peru:"#CD853F",pink:"#FFC0CB",plum:"#DDA0DD",powderblue:"#B0E0E6",purple:"#800080",rebeccapurple:"#663399",red:"#FF0000",rosybrown:"#BC8F8F",royalblue:"#4169E1",saddlebrown:"#8B4513",salmon:"#FA8072",sandybrown:"#F4A460",seagreen:"#2E8B57",seashell:"#FFF5EE",sienna:"#A0522D",silver:"#C0C0C0",skyblue:"#87CEEB",slateblue:"#6A5ACD",slategray:"#708090",slategrey:"#708090",snow:"#FFFAFA",springgreen:"#00FF7F",steelblue:"#4682B4",tan:"#D2B48C",teal:"#008080",thistle:"#D8BFD8",tomato:"#FF6347",turquoise:"#40E0D0",violet:"#EE82EE",wheat:"#F5DEB3",white:"#FFFFFF",whitesmoke:"#F5F5F5",yellow:"#FFFF00",yellowgreen:"#9ACD32"};function b(v,w,x){return x<0&&(x+=1),x>1&&(x-=1),x<1/6?v+(w-v)*6*x:x<1/2?w:x<2/3?v+(w-v)*(2/3-x)*6:v}f.Color.fromRgb=function(v){return _.fromSource(_.sourceFromRgb(v))},f.Color.sourceFromRgb=function(v){var w=v.match(_.reRGBa);if(w){var x=parseInt(w[1],10)/(/%$/.test(w[1])?100:1)*(/%$/.test(w[1])?255:1),C=parseInt(w[2],10)/(/%$/.test(w[2])?100:1)*(/%$/.test(w[2])?255:1),T=parseInt(w[3],10)/(/%$/.test(w[3])?100:1)*(/%$/.test(w[3])?255:1);return[parseInt(x,10),parseInt(C,10),parseInt(T,10),w[4]?parseFloat(w[4]):1]}},f.Color.fromRgba=_.fromRgb,f.Color.fromHsl=function(v){return _.fromSource(_.sourceFromHsl(v))},f.Color.sourceFromHsl=function(v){var w=v.match(_.reHSLa);if(!!w){var x=(parseFloat(w[1])%360+360)%360/360,C=parseFloat(w[2])/(/%$/.test(w[2])?100:1),T=parseFloat(w[3])/(/%$/.test(w[3])?100:1),S,M,O;if(C===0)S=M=O=T;else{var V=T<=.5?T*(C+1):T+C-T*C,X=T*2-V;S=b(X,V,x+1/3),M=b(X,V,x),O=b(X,V,x-1/3)}return[Math.round(S*255),Math.round(M*255),Math.round(O*255),w[4]?parseFloat(w[4]):1]}},f.Color.fromHsla=_.fromHsl,f.Color.fromHex=function(v){return _.fromSource(_.sourceFromHex(v))},f.Color.sourceFromHex=function(v){if(v.match(_.reHex)){var w=v.slice(v.indexOf("#")+1),x=w.length===3||w.length===4,C=w.length===8||w.length===4,T=x?w.charAt(0)+w.charAt(0):w.substring(0,2),S=x?w.charAt(1)+w.charAt(1):w.substring(2,4),M=x?w.charAt(2)+w.charAt(2):w.substring(4,6),O=C?x?w.charAt(3)+w.charAt(3):w.substring(6,8):"FF";return[parseInt(T,16),parseInt(S,16),parseInt(M,16),parseFloat((parseInt(O,16)/255).toFixed(2))]}},f.Color.fromSource=function(v){var w=new _;return w.setSource(v),w}}(i),function(r){var f=r.fabric||(r.fabric={}),_=["e","se","s","sw","w","nw","n","ne","e"],b=["ns","nesw","ew","nwse"],v={},w="left",x="top",C="right",T="bottom",S="center",M={top:T,bottom:x,left:C,right:w,center:S},O=f.util.radiansToDegrees,V=Math.sign||function(ut){return(ut>0)-(ut<0)||+ut};function X(ut,wt){var bt=ut.angle+O(Math.atan2(wt.y,wt.x))+360;return Math.round(bt%360/45)}function Z(ut,wt){var bt=wt.transform.target,Je=bt.canvas,ei=f.util.object.clone(wt);ei.target=bt,Je&&Je.fire("object:"+ut,ei),bt.fire(ut,wt)}function te(ut,wt){var bt=wt.canvas,Je=bt.uniScaleKey,ei=ut[Je];return bt.uniformScaling&&!ei||!bt.uniformScaling&&ei}function J(ut){return ut.originX===S&&ut.originY===S}function ie(ut,wt,bt){var Je=ut.lockScalingX,ei=ut.lockScalingY;return!!(Je&&ei||!wt&&(Je||ei)&&bt||Je&&wt==="x"||ei&&wt==="y")}function Ee(ut,wt,bt){var Je="not-allowed",ei=te(ut,bt),li="";if(wt.x!==0&&wt.y===0?li="x":wt.x===0&&wt.y!==0&&(li="y"),ie(bt,li,ei))return Je;var Qt=X(bt,wt);return _[Qt]+"-resize"}function Pe(ut,wt,bt){var Je="not-allowed";if(wt.x!==0&&bt.lockSkewingY||wt.y!==0&&bt.lockSkewingX)return Je;var ei=X(bt,wt)%4;return b[ei]+"-resize"}function de(ut,wt,bt){return ut[bt.canvas.altActionKey]?v.skewCursorStyleHandler(ut,wt,bt):v.scaleCursorStyleHandler(ut,wt,bt)}function Te(ut,wt,bt){var Je=ut[bt.canvas.altActionKey];if(wt.x===0)return Je?"skewX":"scaleY";if(wt.y===0)return Je?"skewY":"scaleX"}function ve(ut,wt,bt){return bt.lockRotation?"not-allowed":wt.cursorStyle}function _e(ut,wt,bt,Je){return{e:ut,transform:wt,pointer:{x:bt,y:Je}}}function ot(ut){return function(wt,bt,Je,ei){var li=bt.target,Qt=li.getCenterPoint(),Si=li.translateToOriginPoint(Qt,bt.originX,bt.originY),Ti=ut(wt,bt,Je,ei);return li.setPositionByOrigin(Si,bt.originX,bt.originY),Ti}}function it(ut,wt){return function(bt,Je,ei,li){var Qt=wt(bt,Je,ei,li);return Qt&&Z(ut,_e(bt,Je,ei,li)),Qt}}function It(ut,wt,bt,Je,ei){var li=ut.target,Qt=li.controls[ut.corner],Si=li.canvas.getZoom(),Ti=li.padding/Si,Xt=li.toLocalPoint(new f.Point(Je,ei),wt,bt);return Xt.x>=Ti&&(Xt.x-=Ti),Xt.x<=-Ti&&(Xt.x+=Ti),Xt.y>=Ti&&(Xt.y-=Ti),Xt.y<=Ti&&(Xt.y+=Ti),Xt.x-=Qt.offsetX,Xt.y-=Qt.offsetY,Xt}function Xe(ut){return ut.flipX!==ut.flipY}function we(ut,wt,bt,Je,ei){if(ut[wt]!==0){var li=ut._getTransformedDimensions()[Je],Qt=ei/li*ut[bt];ut.set(bt,Qt)}}function Ce(ut,wt,bt,Je){var ei=wt.target,li=ei._getTransformedDimensions(0,ei.skewY),Qt=It(wt,wt.originX,wt.originY,bt,Je),Si=Math.abs(Qt.x*2)-li.x,Ti=ei.skewX,Xt;Si<2?Xt=0:(Xt=O(Math.atan2(Si/ei.scaleX,li.y/ei.scaleY)),wt.originX===w&&wt.originY===T&&(Xt=-Xt),wt.originX===C&&wt.originY===x&&(Xt=-Xt),Xe(ei)&&(Xt=-Xt));var mi=Ti!==Xt;if(mi){var Zi=ei._getTransformedDimensions().y;ei.set("skewX",Xt),we(ei,"skewY","scaleY","y",Zi)}return mi}function Re(ut,wt,bt,Je){var ei=wt.target,li=ei._getTransformedDimensions(ei.skewX,0),Qt=It(wt,wt.originX,wt.originY,bt,Je),Si=Math.abs(Qt.y*2)-li.y,Ti=ei.skewY,Xt;Si<2?Xt=0:(Xt=O(Math.atan2(Si/ei.scaleY,li.x/ei.scaleX)),wt.originX===w&&wt.originY===T&&(Xt=-Xt),wt.originX===C&&wt.originY===x&&(Xt=-Xt),Xe(ei)&&(Xt=-Xt));var mi=Ti!==Xt;if(mi){var Zi=ei._getTransformedDimensions().x;ei.set("skewY",Xt),we(ei,"skewX","scaleX","x",Zi)}return mi}function le(ut,wt,bt,Je){var ei=wt.target,li=ei.skewX,Qt,Si=wt.originY;if(ei.lockSkewingX)return!1;if(li===0){var Ti=It(wt,S,S,bt,Je);Ti.x>0?Qt=w:Qt=C}else li>0&&(Qt=Si===x?w:C),li<0&&(Qt=Si===x?C:w),Xe(ei)&&(Qt=Qt===w?C:w);wt.originX=Qt;var Xt=it("skewing",ot(Ce));return Xt(ut,wt,bt,Je)}function Se(ut,wt,bt,Je){var ei=wt.target,li=ei.skewY,Qt,Si=wt.originX;if(ei.lockSkewingY)return!1;if(li===0){var Ti=It(wt,S,S,bt,Je);Ti.y>0?Qt=x:Qt=T}else li>0&&(Qt=Si===w?x:T),li<0&&(Qt=Si===w?T:x),Xe(ei)&&(Qt=Qt===x?T:x);wt.originY=Qt;var Xt=it("skewing",ot(Re));return Xt(ut,wt,bt,Je)}function he(ut,wt,bt,Je){var ei=wt,li=ei.target,Qt=li.translateToOriginPoint(li.getCenterPoint(),ei.originX,ei.originY);if(li.lockRotation)return!1;var Si=Math.atan2(ei.ey-Qt.y,ei.ex-Qt.x),Ti=Math.atan2(Je-Qt.y,bt-Qt.x),Xt=O(Ti-Si+ei.theta),mi=!0;if(li.snapAngle>0){var Zi=li.snapAngle,Ci=li.snapThreshold||Zi,ti=Math.ceil(Xt/Zi)*Zi,Me=Math.floor(Xt/Zi)*Zi;Math.abs(Xt-Me)<Ci?Xt=Me:Math.abs(Xt-ti)<Ci&&(Xt=ti)}return Xt<0&&(Xt=360+Xt),Xt%=360,mi=li.angle!==Xt,li.angle=Xt,mi}function me(ut,wt,bt,Je,ei){ei=ei||{};var li=wt.target,Qt=li.lockScalingX,Si=li.lockScalingY,Ti=ei.by,Xt,mi,Zi,Ci,ti=te(ut,li),Me=ie(li,Ti,ti),Q,ae,$e=wt.gestureScale;if(Me)return!1;if($e)mi=wt.scaleX*$e,Zi=wt.scaleY*$e;else{if(Xt=It(wt,wt.originX,wt.originY,bt,Je),Q=Ti!=="y"?V(Xt.x):1,ae=Ti!=="x"?V(Xt.y):1,wt.signX||(wt.signX=Q),wt.signY||(wt.signY=ae),li.lockScalingFlip&&(wt.signX!==Q||wt.signY!==ae))return!1;if(Ci=li._getTransformedDimensions(),ti&&!Ti){var _t=Math.abs(Xt.x)+Math.abs(Xt.y),Kt=wt.original,di=Math.abs(Ci.x*Kt.scaleX/li.scaleX)+Math.abs(Ci.y*Kt.scaleY/li.scaleY),wn=_t/di;mi=Kt.scaleX*wn,Zi=Kt.scaleY*wn}else mi=Math.abs(Xt.x*li.scaleX/Ci.x),Zi=Math.abs(Xt.y*li.scaleY/Ci.y);J(wt)&&(mi*=2,Zi*=2),wt.signX!==Q&&Ti!=="y"&&(wt.originX=M[wt.originX],mi*=-1,wt.signX=Q),wt.signY!==ae&&Ti!=="x"&&(wt.originY=M[wt.originY],Zi*=-1,wt.signY=ae)}var Ln=li.scaleX,fn=li.scaleY;return Ti?(Ti==="x"&&li.set("scaleX",mi),Ti==="y"&&li.set("scaleY",Zi)):(!Qt&&li.set("scaleX",mi),!Si&&li.set("scaleY",Zi)),Ln!==li.scaleX||fn!==li.scaleY}function Be(ut,wt,bt,Je){return me(ut,wt,bt,Je)}function We(ut,wt,bt,Je){return me(ut,wt,bt,Je,{by:"x"})}function st(ut,wt,bt,Je){return me(ut,wt,bt,Je,{by:"y"})}function Ye(ut,wt,bt,Je){return ut[wt.target.canvas.altActionKey]?v.skewHandlerX(ut,wt,bt,Je):v.scalingY(ut,wt,bt,Je)}function gt(ut,wt,bt,Je){return ut[wt.target.canvas.altActionKey]?v.skewHandlerY(ut,wt,bt,Je):v.scalingX(ut,wt,bt,Je)}function Mt(ut,wt,bt,Je){var ei=wt.target,li=It(wt,wt.originX,wt.originY,bt,Je),Qt=ei.strokeWidth/(ei.strokeUniform?ei.scaleX:1),Si=J(wt)?2:1,Ti=ei.width,Xt=Math.abs(li.x*Si/ei.scaleX)-Qt;return ei.set("width",Math.max(Xt,0)),Ti!==Xt}function ri(ut,wt,bt,Je){var ei=wt.target,li=bt-wt.offsetX,Qt=Je-wt.offsetY,Si=!ei.get("lockMovementX")&&ei.left!==li,Ti=!ei.get("lockMovementY")&&ei.top!==Qt;return Si&&ei.set("left",li),Ti&&ei.set("top",Qt),(Si||Ti)&&Z("moving",_e(ut,wt,bt,Je)),Si||Ti}v.scaleCursorStyleHandler=Ee,v.skewCursorStyleHandler=Pe,v.scaleSkewCursorStyleHandler=de,v.rotationWithSnapping=it("rotating",ot(he)),v.scalingEqually=it("scaling",ot(Be)),v.scalingX=it("scaling",ot(We)),v.scalingY=it("scaling",ot(st)),v.scalingYOrSkewingX=Ye,v.scalingXOrSkewingY=gt,v.changeWidth=it("resizing",ot(Mt)),v.skewHandlerX=le,v.skewHandlerY=Se,v.dragHandler=ri,v.scaleOrSkewActionName=Te,v.rotationStyleHandler=ve,v.fireEvent=Z,v.wrapWithFixedAnchor=ot,v.wrapWithFireEvent=it,v.getLocalPoint=It,f.controlsUtils=v}(i),function(r){var f=r.fabric||(r.fabric={}),_=f.util.degreesToRadians,b=f.controlsUtils;function v(x,C,T,S,M){S=S||{};var O=this.sizeX||S.cornerSize||M.cornerSize,V=this.sizeY||S.cornerSize||M.cornerSize,X=typeof S.transparentCorners<"u"?S.transparentCorners:M.transparentCorners,Z=X?"stroke":"fill",te=!X&&(S.cornerStrokeColor||M.cornerStrokeColor),J=C,ie=T,Ee;x.save(),x.fillStyle=S.cornerColor||M.cornerColor,x.strokeStyle=S.cornerStrokeColor||M.cornerStrokeColor,O>V?(Ee=O,x.scale(1,V/O),ie=T*O/V):V>O?(Ee=V,x.scale(O/V,1),J=C*V/O):Ee=O,x.lineWidth=1,x.beginPath(),x.arc(J,ie,Ee/2,0,2*Math.PI,!1),x[Z](),te&&x.stroke(),x.restore()}function w(x,C,T,S,M){S=S||{};var O=this.sizeX||S.cornerSize||M.cornerSize,V=this.sizeY||S.cornerSize||M.cornerSize,X=typeof S.transparentCorners<"u"?S.transparentCorners:M.transparentCorners,Z=X?"stroke":"fill",te=!X&&(S.cornerStrokeColor||M.cornerStrokeColor),J=O/2,ie=V/2;x.save(),x.fillStyle=S.cornerColor||M.cornerColor,x.strokeStyle=S.cornerStrokeColor||M.cornerStrokeColor,x.lineWidth=1,x.translate(C,T),x.rotate(_(M.angle)),x[Z+"Rect"](-J,-ie,O,V),te&&x.strokeRect(-J,-ie,O,V),x.restore()}b.renderCircleControl=v,b.renderSquareControl=w}(i),function(r){var f=r.fabric||(r.fabric={});function _(b){for(var v in b)this[v]=b[v]}f.Control=_,f.Control.prototype={visible:!0,actionName:"scale",angle:0,x:0,y:0,offsetX:0,offsetY:0,sizeX:null,sizeY:null,touchSizeX:null,touchSizeY:null,cursorStyle:"crosshair",withConnection:!1,actionHandler:function(){},mouseDownHandler:function(){},mouseUpHandler:function(){},getActionHandler:function(){return this.actionHandler},getMouseDownHandler:function(){return this.mouseDownHandler},getMouseUpHandler:function(){return this.mouseUpHandler},cursorStyleHandler:function(b,v){return v.cursorStyle},getActionName:function(b,v){return v.actionName},getVisibility:function(b,v){var w=b._controlsVisibility;return w&&typeof w[v]<"u"?w[v]:this.visible},setVisibility:function(b){this.visible=b},positionHandler:function(b,v){var w=f.util.transformPoint({x:this.x*b.x+this.offsetX,y:this.y*b.y+this.offsetY},v);return w},calcCornerCoords:function(b,v,w,x,C){var T,S,M,O,V=C?this.touchSizeX:this.sizeX,X=C?this.touchSizeY:this.sizeY;if(V&&X&&V!==X){var Z=Math.atan2(X,V),te=Math.sqrt(V*V+X*X)/2,J=Z-f.util.degreesToRadians(b),ie=Math.PI/2-Z-f.util.degreesToRadians(b);T=te*f.util.cos(J),S=te*f.util.sin(J),M=te*f.util.cos(ie),O=te*f.util.sin(ie)}else{var Ee=V&&X?V:v;te=Ee*.7071067812;var J=f.util.degreesToRadians(45-b);T=M=te*f.util.cos(J),S=O=te*f.util.sin(J)}return{tl:{x:w-O,y:x-M},tr:{x:w+T,y:x-S},bl:{x:w-T,y:x+S},br:{x:w+O,y:x+M}}},render:function(b,v,w,x,C){switch(x=x||{},x.cornerStyle||C.cornerStyle){case"circle":f.controlsUtils.renderCircleControl.call(this,b,v,w,x,C);break;default:f.controlsUtils.renderSquareControl.call(this,b,v,w,x,C)}}}}(i),function(){function r(w,x){var C=w.getAttribute("style"),T=w.getAttribute("offset")||0,S,M,O,V;if(T=parseFloat(T)/(/%$/.test(T)?100:1),T=T<0?0:T>1?1:T,C){var X=C.split(/\s*;\s*/);for(X[X.length-1]===""&&X.pop(),V=X.length;V--;){var Z=X[V].split(/\s*:\s*/),te=Z[0].trim(),J=Z[1].trim();te==="stop-color"?S=J:te==="stop-opacity"&&(O=J)}}return S||(S=w.getAttribute("stop-color")||"rgb(0,0,0)"),O||(O=w.getAttribute("stop-opacity")),S=new e.Color(S),M=S.getAlpha(),O=isNaN(parseFloat(O))?1:parseFloat(O),O*=M*x,{offset:T,color:S.toRgb(),opacity:O}}function f(w){return{x1:w.getAttribute("x1")||0,y1:w.getAttribute("y1")||0,x2:w.getAttribute("x2")||"100%",y2:w.getAttribute("y2")||0}}function _(w){return{x1:w.getAttribute("fx")||w.getAttribute("cx")||"50%",y1:w.getAttribute("fy")||w.getAttribute("cy")||"50%",r1:0,x2:w.getAttribute("cx")||"50%",y2:w.getAttribute("cy")||"50%",r2:w.getAttribute("r")||"50%"}}var b=e.util.object.clone;e.Gradient=e.util.createClass({offsetX:0,offsetY:0,gradientTransform:null,gradientUnits:"pixels",type:"linear",initialize:function(w){w||(w={}),w.coords||(w.coords={});var x,C=this;Object.keys(w).forEach(function(T){C[T]=w[T]}),this.id?this.id+="_"+e.Object.__uid++:this.id=e.Object.__uid++,x={x1:w.coords.x1||0,y1:w.coords.y1||0,x2:w.coords.x2||0,y2:w.coords.y2||0},this.type==="radial"&&(x.r1=w.coords.r1||0,x.r2=w.coords.r2||0),this.coords=x,this.colorStops=w.colorStops.slice()},addColorStop:function(w){for(var x in w){var C=new e.Color(w[x]);this.colorStops.push({offset:parseFloat(x),color:C.toRgb(),opacity:C.getAlpha()})}return this},toObject:function(w){var x={type:this.type,coords:this.coords,colorStops:this.colorStops,offsetX:this.offsetX,offsetY:this.offsetY,gradientUnits:this.gradientUnits,gradientTransform:this.gradientTransform?this.gradientTransform.concat():this.gradientTransform};return e.util.populateWithProperties(this,x,w),x},toSVG:function(w,M){var C=b(this.coords,!0),T,S,M=M||{},O,V,X=b(this.colorStops,!0),Z=C.r1>C.r2,te=this.gradientTransform?this.gradientTransform.concat():e.iMatrix.concat(),J=-this.offsetX,ie=-this.offsetY,Ee=!!M.additionalTransform,Pe=this.gradientUnits==="pixels"?"userSpaceOnUse":"objectBoundingBox";if(X.sort(function(ot,it){return ot.offset-it.offset}),Pe==="objectBoundingBox"?(J/=w.width,ie/=w.height):(J+=w.width/2,ie+=w.height/2),w.type==="path"&&this.gradientUnits!=="percentage"&&(J-=w.pathOffset.x,ie-=w.pathOffset.y),te[4]-=J,te[5]-=ie,V='id="SVGID_'+this.id+'" gradientUnits="'+Pe+'"',V+=' gradientTransform="'+(Ee?M.additionalTransform+" ":"")+e.util.matrixToSVG(te)+'" ',this.type==="linear"?O=["<linearGradient ",V,' x1="',C.x1,'" y1="',C.y1,'" x2="',C.x2,'" y2="',C.y2,`">
`]:this.type==="radial"&&(O=["<radialGradient ",V,' cx="',Z?C.x1:C.x2,'" cy="',Z?C.y1:C.y2,'" r="',Z?C.r1:C.r2,'" fx="',Z?C.x2:C.x1,'" fy="',Z?C.y2:C.y1,`">
`]),this.type==="radial"){if(Z)for(X=X.concat(),X.reverse(),T=0,S=X.length;T<S;T++)X[T].offset=1-X[T].offset;var de=Math.min(C.r1,C.r2);if(de>0){var Te=Math.max(C.r1,C.r2),ve=de/Te;for(T=0,S=X.length;T<S;T++)X[T].offset+=ve*(1-X[T].offset)}}for(T=0,S=X.length;T<S;T++){var _e=X[T];O.push("<stop ",'offset="',_e.offset*100+"%",'" style="stop-color:',_e.color,typeof _e.opacity<"u"?";stop-opacity: "+_e.opacity:";",`"/>
`)}return O.push(this.type==="linear"?`</linearGradient>
`:`</radialGradient>
`),O.join("")},toLive:function(w){var x,C=e.util.object.clone(this.coords),T,S;if(!!this.type){for(this.type==="linear"?x=w.createLinearGradient(C.x1,C.y1,C.x2,C.y2):this.type==="radial"&&(x=w.createRadialGradient(C.x1,C.y1,C.r1,C.x2,C.y2,C.r2)),T=0,S=this.colorStops.length;T<S;T++){var M=this.colorStops[T].color,O=this.colorStops[T].opacity,V=this.colorStops[T].offset;typeof O<"u"&&(M=new e.Color(M).setAlpha(O).toRgba()),x.addColorStop(V,M)}return x}}}),e.util.object.extend(e.Gradient,{fromElement:function(w,x,C,T){var S=parseFloat(C)/(/%$/.test(C)?100:1);S=S<0?0:S>1?1:S,isNaN(S)&&(S=1);var M=w.getElementsByTagName("stop"),O,V=w.getAttribute("gradientUnits")==="userSpaceOnUse"?"pixels":"percentage",X=w.getAttribute("gradientTransform")||"",Z=[],te,J,ie=0,Ee=0,Pe;for(w.nodeName==="linearGradient"||w.nodeName==="LINEARGRADIENT"?(O="linear",te=f(w)):(O="radial",te=_(w)),J=M.length;J--;)Z.push(r(M[J],S));Pe=e.parseTransformAttribute(X),v(x,te,T,V),V==="pixels"&&(ie=-x.left,Ee=-x.top);var de=new e.Gradient({id:w.getAttribute("id"),type:O,coords:te,colorStops:Z,gradientUnits:V,gradientTransform:Pe,offsetX:ie,offsetY:Ee});return de}});function v(w,x,C,T){var S,M;Object.keys(x).forEach(function(O){S=x[O],S==="Infinity"?M=1:S==="-Infinity"?M=0:(M=parseFloat(x[O],10),typeof S=="string"&&/^(\d+\.\d+)%|(\d+)%$/.test(S)&&(M*=.01,T==="pixels"&&((O==="x1"||O==="x2"||O==="r2")&&(M*=C.viewBoxWidth||C.width),(O==="y1"||O==="y2")&&(M*=C.viewBoxHeight||C.height)))),x[O]=M})}}(),function(){var r=e.util.toFixed;e.Pattern=e.util.createClass({repeat:"repeat",offsetX:0,offsetY:0,crossOrigin:"",patternTransform:null,initialize:function(f,_){if(f||(f={}),this.id=e.Object.__uid++,this.setOptions(f),!f.source||f.source&&typeof f.source!="string"){_&&_(this);return}else{var b=this;this.source=e.util.createImage(),e.util.loadImage(f.source,function(v,w){b.source=v,_&&_(b,w)},null,this.crossOrigin)}},toObject:function(f){var _=e.Object.NUM_FRACTION_DIGITS,b,v;return typeof this.source.src=="string"?b=this.source.src:typeof this.source=="object"&&this.source.toDataURL&&(b=this.source.toDataURL()),v={type:"pattern",source:b,repeat:this.repeat,crossOrigin:this.crossOrigin,offsetX:r(this.offsetX,_),offsetY:r(this.offsetY,_),patternTransform:this.patternTransform?this.patternTransform.concat():null},e.util.populateWithProperties(this,v,f),v},toSVG:function(f){var _=typeof this.source=="function"?this.source():this.source,b=_.width/f.width,v=_.height/f.height,w=this.offsetX/f.width,x=this.offsetY/f.height,C="";return(this.repeat==="repeat-x"||this.repeat==="no-repeat")&&(v=1,x&&(v+=Math.abs(x))),(this.repeat==="repeat-y"||this.repeat==="no-repeat")&&(b=1,w&&(b+=Math.abs(w))),_.src?C=_.src:_.toDataURL&&(C=_.toDataURL()),'<pattern id="SVGID_'+this.id+'" x="'+w+'" y="'+x+'" width="'+b+'" height="'+v+`">
<image x="0" y="0" width="`+_.width+'" height="'+_.height+'" xlink:href="'+C+`"></image>
</pattern>
`},setOptions:function(f){for(var _ in f)this[_]=f[_]},toLive:function(f){var _=this.source;return!_||typeof _.src<"u"&&(!_.complete||_.naturalWidth===0||_.naturalHeight===0)?"":f.createPattern(_,this.repeat)}})}(),function(r){var f=r.fabric||(r.fabric={}),_=f.util.toFixed;if(f.Shadow){f.warn("fabric.Shadow is already defined.");return}f.Shadow=f.util.createClass({color:"rgb(0,0,0)",blur:0,offsetX:0,offsetY:0,affectStroke:!1,includeDefaultValues:!0,nonScaling:!1,initialize:function(b){typeof b=="string"&&(b=this._parseShadow(b));for(var v in b)this[v]=b[v];this.id=f.Object.__uid++},_parseShadow:function(b){var v=b.trim(),w=f.Shadow.reOffsetsAndBlur.exec(v)||[],x=v.replace(f.Shadow.reOffsetsAndBlur,"")||"rgb(0,0,0)";return{color:x.trim(),offsetX:parseFloat(w[1],10)||0,offsetY:parseFloat(w[2],10)||0,blur:parseFloat(w[3],10)||0}},toString:function(){return[this.offsetX,this.offsetY,this.blur,this.color].join("px ")},toSVG:function(b){var v=40,w=40,x=f.Object.NUM_FRACTION_DIGITS,C=f.util.rotateVector({x:this.offsetX,y:this.offsetY},f.util.degreesToRadians(-b.angle)),T=20,S=new f.Color(this.color);return b.width&&b.height&&(v=_((Math.abs(C.x)+this.blur)/b.width,x)*100+T,w=_((Math.abs(C.y)+this.blur)/b.height,x)*100+T),b.flipX&&(C.x*=-1),b.flipY&&(C.y*=-1),'<filter id="SVGID_'+this.id+'" y="-'+w+'%" height="'+(100+2*w)+'%" x="-'+v+'%" width="'+(100+2*v)+`%" >
	<feGaussianBlur in="SourceAlpha" stdDeviation="`+_(this.blur?this.blur/2:0,x)+`"></feGaussianBlur>
	<feOffset dx="`+_(C.x,x)+'" dy="'+_(C.y,x)+`" result="oBlur" ></feOffset>
	<feFlood flood-color="`+S.toRgb()+'" flood-opacity="'+S.getAlpha()+`"/>
	<feComposite in2="oBlur" operator="in" />
	<feMerge>
		<feMergeNode></feMergeNode>
		<feMergeNode in="SourceGraphic"></feMergeNode>
	</feMerge>
</filter>
`},toObject:function(){if(this.includeDefaultValues)return{color:this.color,blur:this.blur,offsetX:this.offsetX,offsetY:this.offsetY,affectStroke:this.affectStroke,nonScaling:this.nonScaling};var b={},v=f.Shadow.prototype;return["color","blur","offsetX","offsetY","affectStroke","nonScaling"].forEach(function(w){this[w]!==v[w]&&(b[w]=this[w])},this),b}}),f.Shadow.reOffsetsAndBlur=/(?:\s|^)(-?\d+(?:\.\d*)?(?:px)?(?:\s?|$))?(-?\d+(?:\.\d*)?(?:px)?(?:\s?|$))?(\d+(?:\.\d*)?(?:px)?)?(?:\s?|$)(?:$|\s)/}(i),function(){if(e.StaticCanvas){e.warn("fabric.StaticCanvas is already defined.");return}var r=e.util.object.extend,f=e.util.getElementOffset,_=e.util.removeFromArray,b=e.util.toFixed,v=e.util.transformPoint,w=e.util.invertTransform,x=e.util.getNodeCanvas,C=e.util.createCanvasElement,T=new Error("Could not initialize `canvas` element");e.StaticCanvas=e.util.createClass(e.CommonMethods,{initialize:function(S,M){M||(M={}),this.renderAndResetBound=this.renderAndReset.bind(this),this.requestRenderAllBound=this.requestRenderAll.bind(this),this._initStatic(S,M)},backgroundColor:"",backgroundImage:null,overlayColor:"",overlayImage:null,includeDefaultValues:!0,stateful:!1,renderOnAddRemove:!0,controlsAboveOverlay:!1,allowTouchScrolling:!1,imageSmoothingEnabled:!0,viewportTransform:e.iMatrix.concat(),backgroundVpt:!0,overlayVpt:!0,enableRetinaScaling:!0,vptCoords:{},skipOffscreen:!0,clipPath:void 0,_initStatic:function(S,M){var O=this.requestRenderAllBound;this._objects=[],this._createLowerCanvas(S),this._initOptions(M),this.interactive||this._initRetinaScaling(),M.overlayImage&&this.setOverlayImage(M.overlayImage,O),M.backgroundImage&&this.setBackgroundImage(M.backgroundImage,O),M.backgroundColor&&this.setBackgroundColor(M.backgroundColor,O),M.overlayColor&&this.setOverlayColor(M.overlayColor,O),this.calcOffset()},_isRetinaScaling:function(){return e.devicePixelRatio>1&&this.enableRetinaScaling},getRetinaScaling:function(){return this._isRetinaScaling()?Math.max(1,e.devicePixelRatio):1},_initRetinaScaling:function(){if(!!this._isRetinaScaling()){var S=e.devicePixelRatio;this.__initRetinaScaling(S,this.lowerCanvasEl,this.contextContainer),this.upperCanvasEl&&this.__initRetinaScaling(S,this.upperCanvasEl,this.contextTop)}},__initRetinaScaling:function(S,M,O){M.setAttribute("width",this.width*S),M.setAttribute("height",this.height*S),O.scale(S,S)},calcOffset:function(){return this._offset=f(this.lowerCanvasEl),this},setOverlayImage:function(S,M,O){return this.__setBgOverlayImage("overlayImage",S,M,O)},setBackgroundImage:function(S,M,O){return this.__setBgOverlayImage("backgroundImage",S,M,O)},setOverlayColor:function(S,M){return this.__setBgOverlayColor("overlayColor",S,M)},setBackgroundColor:function(S,M){return this.__setBgOverlayColor("backgroundColor",S,M)},__setBgOverlayImage:function(S,M,O,V){return typeof M=="string"?e.util.loadImage(M,function(X,Z){if(X){var te=new e.Image(X,V);this[S]=te,te.canvas=this}O&&O(X,Z)},this,V&&V.crossOrigin):(V&&M.setOptions(V),this[S]=M,M&&(M.canvas=this),O&&O(M,!1)),this},__setBgOverlayColor:function(S,M,O){return this[S]=M,this._initGradient(M,S),this._initPattern(M,S,O),this},_createCanvasElement:function(){var S=C();if(!S||(S.style||(S.style={}),typeof S.getContext>"u"))throw T;return S},_initOptions:function(S){var M=this.lowerCanvasEl;this._setOptions(S),this.width=this.width||parseInt(M.width,10)||0,this.height=this.height||parseInt(M.height,10)||0,this.lowerCanvasEl.style&&(M.width=this.width,M.height=this.height,M.style.width=this.width+"px",M.style.height=this.height+"px",this.viewportTransform=this.viewportTransform.slice())},_createLowerCanvas:function(S){S&&S.getContext?this.lowerCanvasEl=S:this.lowerCanvasEl=e.util.getById(S)||this._createCanvasElement(),e.util.addClass(this.lowerCanvasEl,"lower-canvas"),this._originalCanvasStyle=this.lowerCanvasEl.style,this.interactive&&this._applyCanvasStyle(this.lowerCanvasEl),this.contextContainer=this.lowerCanvasEl.getContext("2d")},getWidth:function(){return this.width},getHeight:function(){return this.height},setWidth:function(S,M){return this.setDimensions({width:S},M)},setHeight:function(S,M){return this.setDimensions({height:S},M)},setDimensions:function(S,M){var O;M=M||{};for(var V in S)O=S[V],M.cssOnly||(this._setBackstoreDimension(V,S[V]),O+="px",this.hasLostContext=!0),M.backstoreOnly||this._setCssDimension(V,O);return this._isCurrentlyDrawing&&this.freeDrawingBrush&&this.freeDrawingBrush._setBrushStyles(this.contextTop),this._initRetinaScaling(),this.calcOffset(),M.cssOnly||this.requestRenderAll(),this},_setBackstoreDimension:function(S,M){return this.lowerCanvasEl[S]=M,this.upperCanvasEl&&(this.upperCanvasEl[S]=M),this.cacheCanvasEl&&(this.cacheCanvasEl[S]=M),this[S]=M,this},_setCssDimension:function(S,M){return this.lowerCanvasEl.style[S]=M,this.upperCanvasEl&&(this.upperCanvasEl.style[S]=M),this.wrapperEl&&(this.wrapperEl.style[S]=M),this},getZoom:function(){return this.viewportTransform[0]},setViewportTransform:function(S){var M=this._activeObject,O=this.backgroundImage,V=this.overlayImage,X,Z,te;for(this.viewportTransform=S,Z=0,te=this._objects.length;Z<te;Z++)X=this._objects[Z],X.group||X.setCoords(!0);return M&&M.setCoords(),O&&O.setCoords(!0),V&&V.setCoords(!0),this.calcViewportBoundaries(),this.renderOnAddRemove&&this.requestRenderAll(),this},zoomToPoint:function(S,M){var O=S,V=this.viewportTransform.slice(0);S=v(S,w(this.viewportTransform)),V[0]=M,V[3]=M;var X=v(S,V);return V[4]+=O.x-X.x,V[5]+=O.y-X.y,this.setViewportTransform(V)},setZoom:function(S){return this.zoomToPoint(new e.Point(0,0),S),this},absolutePan:function(S){var M=this.viewportTransform.slice(0);return M[4]=-S.x,M[5]=-S.y,this.setViewportTransform(M)},relativePan:function(S){return this.absolutePan(new e.Point(-S.x-this.viewportTransform[4],-S.y-this.viewportTransform[5]))},getElement:function(){return this.lowerCanvasEl},_onObjectAdded:function(S){this.stateful&&S.setupState(),S._set("canvas",this),S.setCoords(),this.fire("object:added",{target:S}),S.fire("added")},_onObjectRemoved:function(S){this.fire("object:removed",{target:S}),S.fire("removed"),delete S.canvas},clearContext:function(S){return S.clearRect(0,0,this.width,this.height),this},getContext:function(){return this.contextContainer},clear:function(){return this.remove.apply(this,this.getObjects()),this.backgroundImage=null,this.overlayImage=null,this.backgroundColor="",this.overlayColor="",this._hasITextHandlers&&(this.off("mouse:up",this._mouseUpITextHandler),this._iTextInstances=null,this._hasITextHandlers=!1),this.clearContext(this.contextContainer),this.fire("canvas:cleared"),this.renderOnAddRemove&&this.requestRenderAll(),this},renderAll:function(){var S=this.contextContainer;return this.renderCanvas(S,this._objects),this},renderAndReset:function(){this.isRendering=0,this.renderAll()},requestRenderAll:function(){return this.isRendering||(this.isRendering=e.util.requestAnimFrame(this.renderAndResetBound)),this},calcViewportBoundaries:function(){var S={},M=this.width,O=this.height,V=w(this.viewportTransform);return S.tl=v({x:0,y:0},V),S.br=v({x:M,y:O},V),S.tr=new e.Point(S.br.x,S.tl.y),S.bl=new e.Point(S.tl.x,S.br.y),this.vptCoords=S,S},cancelRequestedRender:function(){this.isRendering&&(e.util.cancelAnimFrame(this.isRendering),this.isRendering=0)},renderCanvas:function(S,M){var O=this.viewportTransform,V=this.clipPath;this.cancelRequestedRender(),this.calcViewportBoundaries(),this.clearContext(S),e.util.setImageSmoothing(S,this.imageSmoothingEnabled),this.fire("before:render",{ctx:S}),this._renderBackground(S),S.save(),S.transform(O[0],O[1],O[2],O[3],O[4],O[5]),this._renderObjects(S,M),S.restore(),!this.controlsAboveOverlay&&this.interactive&&this.drawControls(S),V&&(V.canvas=this,V.shouldCache(),V._transformDone=!0,V.renderCache({forClipping:!0}),this.drawClipPathOnCanvas(S)),this._renderOverlay(S),this.controlsAboveOverlay&&this.interactive&&this.drawControls(S),this.fire("after:render",{ctx:S})},drawClipPathOnCanvas:function(S){var M=this.viewportTransform,O=this.clipPath;S.save(),S.transform(M[0],M[1],M[2],M[3],M[4],M[5]),S.globalCompositeOperation="destination-in",O.transform(S),S.scale(1/O.zoomX,1/O.zoomY),S.drawImage(O._cacheCanvas,-O.cacheTranslationX,-O.cacheTranslationY),S.restore()},_renderObjects:function(S,M){var O,V;for(O=0,V=M.length;O<V;++O)M[O]&&M[O].render(S)},_renderBackgroundOrOverlay:function(S,M){var O=this[M+"Color"],V=this[M+"Image"],X=this.viewportTransform,Z=this[M+"Vpt"];if(!(!O&&!V)){if(O){S.save(),S.beginPath(),S.moveTo(0,0),S.lineTo(this.width,0),S.lineTo(this.width,this.height),S.lineTo(0,this.height),S.closePath(),S.fillStyle=O.toLive?O.toLive(S,this):O,Z&&S.transform(X[0],X[1],X[2],X[3],X[4],X[5]),S.transform(1,0,0,1,O.offsetX||0,O.offsetY||0);var te=O.gradientTransform||O.patternTransform;te&&S.transform(te[0],te[1],te[2],te[3],te[4],te[5]),S.fill(),S.restore()}V&&(S.save(),Z&&S.transform(X[0],X[1],X[2],X[3],X[4],X[5]),V.render(S),S.restore())}},_renderBackground:function(S){this._renderBackgroundOrOverlay(S,"background")},_renderOverlay:function(S){this._renderBackgroundOrOverlay(S,"overlay")},getCenter:function(){return{top:this.height/2,left:this.width/2}},getCenterPoint:function(){return new e.Point(this.width/2,this.height/2)},centerObjectH:function(S){return this._centerObject(S,new e.Point(this.getCenterPoint().x,S.getCenterPoint().y))},centerObjectV:function(S){return this._centerObject(S,new e.Point(S.getCenterPoint().x,this.getCenterPoint().y))},centerObject:function(S){var M=this.getCenterPoint();return this._centerObject(S,M)},viewportCenterObject:function(S){var M=this.getVpCenter();return this._centerObject(S,M)},viewportCenterObjectH:function(S){var M=this.getVpCenter();return this._centerObject(S,new e.Point(M.x,S.getCenterPoint().y)),this},viewportCenterObjectV:function(S){var M=this.getVpCenter();return this._centerObject(S,new e.Point(S.getCenterPoint().x,M.y))},getVpCenter:function(){var S=this.getCenterPoint(),M=w(this.viewportTransform);return v(S,M)},_centerObject:function(S,M){return S.setPositionByOrigin(M,"center","center"),S.setCoords(),this.renderOnAddRemove&&this.requestRenderAll(),this},toDatalessJSON:function(S){return this.toDatalessObject(S)},toObject:function(S){return this._toObjectMethod("toObject",S)},toDatalessObject:function(S){return this._toObjectMethod("toDatalessObject",S)},_toObjectMethod:function(S,M){var O=this.clipPath,V={version:e.version,objects:this._toObjects(S,M)};return O&&!O.excludeFromExport&&(V.clipPath=this._toObject(this.clipPath,S,M)),r(V,this.__serializeBgOverlay(S,M)),e.util.populateWithProperties(this,V,M),V},_toObjects:function(S,M){return this._objects.filter(function(O){return!O.excludeFromExport}).map(function(O){return this._toObject(O,S,M)},this)},_toObject:function(S,M,O){var V;this.includeDefaultValues||(V=S.includeDefaultValues,S.includeDefaultValues=!1);var X=S[M](O);return this.includeDefaultValues||(S.includeDefaultValues=V),X},__serializeBgOverlay:function(S,M){var O={},V=this.backgroundImage,X=this.overlayImage,Z=this.backgroundColor,te=this.overlayColor;return Z&&Z.toObject?Z.excludeFromExport||(O.background=Z.toObject(M)):Z&&(O.background=Z),te&&te.toObject?te.excludeFromExport||(O.overlay=te.toObject(M)):te&&(O.overlay=te),V&&!V.excludeFromExport&&(O.backgroundImage=this._toObject(V,S,M)),X&&!X.excludeFromExport&&(O.overlayImage=this._toObject(X,S,M)),O},svgViewportTransformation:!0,toSVG:function(S,M){S||(S={}),S.reviver=M;var O=[];return this._setSVGPreamble(O,S),this._setSVGHeader(O,S),this.clipPath&&O.push('<g clip-path="url(#'+this.clipPath.clipPathId+`)" >
`),this._setSVGBgOverlayColor(O,"background"),this._setSVGBgOverlayImage(O,"backgroundImage",M),this._setSVGObjects(O,M),this.clipPath&&O.push(`</g>
`),this._setSVGBgOverlayColor(O,"overlay"),this._setSVGBgOverlayImage(O,"overlayImage",M),O.push("</svg>"),O.join("")},_setSVGPreamble:function(S,M){M.suppressPreamble||S.push('<?xml version="1.0" encoding="',M.encoding||"UTF-8",`" standalone="no" ?>
`,'<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" ',`"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
`)},_setSVGHeader:function(S,M){var O=M.width||this.width,V=M.height||this.height,X,Z='viewBox="0 0 '+this.width+" "+this.height+'" ',te=e.Object.NUM_FRACTION_DIGITS;M.viewBox?Z='viewBox="'+M.viewBox.x+" "+M.viewBox.y+" "+M.viewBox.width+" "+M.viewBox.height+'" ':this.svgViewportTransformation&&(X=this.viewportTransform,Z='viewBox="'+b(-X[4]/X[0],te)+" "+b(-X[5]/X[3],te)+" "+b(this.width/X[0],te)+" "+b(this.height/X[3],te)+'" '),S.push("<svg ",'xmlns="http://www.w3.org/2000/svg" ','xmlns:xlink="http://www.w3.org/1999/xlink" ','version="1.1" ','width="',O,'" ','height="',V,'" ',Z,`xml:space="preserve">
`,"<desc>Created with Fabric.js ",e.version,`</desc>
`,`<defs>
`,this.createSVGFontFacesMarkup(),this.createSVGRefElementsMarkup(),this.createSVGClipPathMarkup(M),`</defs>
`)},createSVGClipPathMarkup:function(S){var M=this.clipPath;return M?(M.clipPathId="CLIPPATH_"+e.Object.__uid++,'<clipPath id="'+M.clipPathId+`" >
`+this.clipPath.toClipPathSVG(S.reviver)+`</clipPath>
`):""},createSVGRefElementsMarkup:function(){var S=this,M=["background","overlay"].map(function(O){var V=S[O+"Color"];if(V&&V.toLive){var X=S[O+"Vpt"],Z=S.viewportTransform,te={width:S.width/(X?Z[0]:1),height:S.height/(X?Z[3]:1)};return V.toSVG(te,{additionalTransform:X?e.util.matrixToSVG(Z):""})}});return M.join("")},createSVGFontFacesMarkup:function(){var S="",M={},O,V,X,Z,te,J,ie,Ee,Pe,de=e.fontPaths,Te=[];for(this._objects.forEach(function _e(ot){Te.push(ot),ot._objects&&ot._objects.forEach(_e)}),Ee=0,Pe=Te.length;Ee<Pe;Ee++)if(O=Te[Ee],V=O.fontFamily,!(O.type.indexOf("text")===-1||M[V]||!de[V])&&(M[V]=!0,!!O.styles)){X=O.styles;for(te in X){Z=X[te];for(ie in Z)J=Z[ie],V=J.fontFamily,!M[V]&&de[V]&&(M[V]=!0)}}for(var ve in M)S+=[`		@font-face {
`,"			font-family: '",ve,`';
`,"			src: url('",de[ve],`');
`,`		}
`].join("");return S&&(S=['	<style type="text/css">',`<![CDATA[
`,S,"]]>",`</style>
`].join("")),S},_setSVGObjects:function(S,M){var O,V,X,Z=this._objects;for(V=0,X=Z.length;V<X;V++)O=Z[V],!O.excludeFromExport&&this._setSVGObject(S,O,M)},_setSVGObject:function(S,M,O){S.push(M.toSVG(O))},_setSVGBgOverlayImage:function(S,M,O){this[M]&&!this[M].excludeFromExport&&this[M].toSVG&&S.push(this[M].toSVG(O))},_setSVGBgOverlayColor:function(S,M){var O=this[M+"Color"],V=this.viewportTransform,X=this.width,Z=this.height;if(!!O)if(O.toLive){var te=O.repeat,J=e.util.invertTransform(V),ie=this[M+"Vpt"],Ee=ie?e.util.matrixToSVG(J):"";S.push('<rect transform="'+Ee+" translate(",X/2,",",Z/2,')"',' x="',O.offsetX-X/2,'" y="',O.offsetY-Z/2,'" ','width="',te==="repeat-y"||te==="no-repeat"?O.source.width:X,'" height="',te==="repeat-x"||te==="no-repeat"?O.source.height:Z,'" fill="url(#SVGID_'+O.id+')"',`></rect>
`)}else S.push('<rect x="0" y="0" width="100%" height="100%" ','fill="',O,'"',`></rect>
`)},sendToBack:function(S){if(!S)return this;var M=this._activeObject,O,V,X;if(S===M&&S.type==="activeSelection")for(X=M._objects,O=X.length;O--;)V=X[O],_(this._objects,V),this._objects.unshift(V);else _(this._objects,S),this._objects.unshift(S);return this.renderOnAddRemove&&this.requestRenderAll(),this},bringToFront:function(S){if(!S)return this;var M=this._activeObject,O,V,X;if(S===M&&S.type==="activeSelection")for(X=M._objects,O=0;O<X.length;O++)V=X[O],_(this._objects,V),this._objects.push(V);else _(this._objects,S),this._objects.push(S);return this.renderOnAddRemove&&this.requestRenderAll(),this},sendBackwards:function(S,M){if(!S)return this;var O=this._activeObject,V,X,Z,te,J,ie=0;if(S===O&&S.type==="activeSelection")for(J=O._objects,V=0;V<J.length;V++)X=J[V],Z=this._objects.indexOf(X),Z>0+ie&&(te=Z-1,_(this._objects,X),this._objects.splice(te,0,X)),ie++;else Z=this._objects.indexOf(S),Z!==0&&(te=this._findNewLowerIndex(S,Z,M),_(this._objects,S),this._objects.splice(te,0,S));return this.renderOnAddRemove&&this.requestRenderAll(),this},_findNewLowerIndex:function(S,M,O){var V,X;if(O)for(V=M,X=M-1;X>=0;--X){var Z=S.intersectsWithObject(this._objects[X])||S.isContainedWithinObject(this._objects[X])||this._objects[X].isContainedWithinObject(S);if(Z){V=X;break}}else V=M-1;return V},bringForward:function(S,M){if(!S)return this;var O=this._activeObject,V,X,Z,te,J,ie=0;if(S===O&&S.type==="activeSelection")for(J=O._objects,V=J.length;V--;)X=J[V],Z=this._objects.indexOf(X),Z<this._objects.length-1-ie&&(te=Z+1,_(this._objects,X),this._objects.splice(te,0,X)),ie++;else Z=this._objects.indexOf(S),Z!==this._objects.length-1&&(te=this._findNewUpperIndex(S,Z,M),_(this._objects,S),this._objects.splice(te,0,S));return this.renderOnAddRemove&&this.requestRenderAll(),this},_findNewUpperIndex:function(S,M,O){var V,X,Z;if(O)for(V=M,X=M+1,Z=this._objects.length;X<Z;++X){var te=S.intersectsWithObject(this._objects[X])||S.isContainedWithinObject(this._objects[X])||this._objects[X].isContainedWithinObject(S);if(te){V=X;break}}else V=M+1;return V},moveTo:function(S,M){return _(this._objects,S),this._objects.splice(M,0,S),this.renderOnAddRemove&&this.requestRenderAll()},dispose:function(){return this.isRendering&&(e.util.cancelAnimFrame(this.isRendering),this.isRendering=0),this.forEachObject(function(S){S.dispose&&S.dispose()}),this._objects=[],this.backgroundImage&&this.backgroundImage.dispose&&this.backgroundImage.dispose(),this.backgroundImage=null,this.overlayImage&&this.overlayImage.dispose&&this.overlayImage.dispose(),this.overlayImage=null,this._iTextInstances=null,this.contextContainer=null,this.lowerCanvasEl.classList.remove("lower-canvas"),e.util.setStyle(this.lowerCanvasEl,this._originalCanvasStyle),delete this._originalCanvasStyle,this.lowerCanvasEl.setAttribute("width",this.width),this.lowerCanvasEl.setAttribute("height",this.height),e.util.cleanUpJsdomNode(this.lowerCanvasEl),this.lowerCanvasEl=void 0,this},toString:function(){return"#<fabric.Canvas ("+this.complexity()+"): { objects: "+this._objects.length+" }>"}}),r(e.StaticCanvas.prototype,e.Observable),r(e.StaticCanvas.prototype,e.Collection),r(e.StaticCanvas.prototype,e.DataURLExporter),r(e.StaticCanvas,{EMPTY_JSON:'{"objects": [], "background": "white"}',supports:function(S){var M=C();if(!M||!M.getContext)return null;var O=M.getContext("2d");if(!O)return null;switch(S){case"setLineDash":return typeof O.setLineDash<"u";default:return null}}}),e.StaticCanvas.prototype.toJSON=e.StaticCanvas.prototype.toObject,e.isLikelyNode&&(e.StaticCanvas.prototype.createPNGStream=function(){var S=x(this.lowerCanvasEl);return S&&S.createPNGStream()},e.StaticCanvas.prototype.createJPEGStream=function(S){var M=x(this.lowerCanvasEl);return M&&M.createJPEGStream(S)})}(),e.BaseBrush=e.util.createClass({color:"rgb(0, 0, 0)",width:1,shadow:null,strokeLineCap:"round",strokeLineJoin:"round",strokeMiterLimit:10,strokeDashArray:null,limitedToCanvasSize:!1,_setBrushStyles:function(r){r.strokeStyle=this.color,r.lineWidth=this.width,r.lineCap=this.strokeLineCap,r.miterLimit=this.strokeMiterLimit,r.lineJoin=this.strokeLineJoin,r.setLineDash(this.strokeDashArray||[])},_saveAndTransform:function(r){var f=this.canvas.viewportTransform;r.save(),r.transform(f[0],f[1],f[2],f[3],f[4],f[5])},_setShadow:function(){if(!!this.shadow){var r=this.canvas,f=this.shadow,_=r.contextTop,b=r.getZoom();r&&r._isRetinaScaling()&&(b*=e.devicePixelRatio),_.shadowColor=f.color,_.shadowBlur=f.blur*b,_.shadowOffsetX=f.offsetX*b,_.shadowOffsetY=f.offsetY*b}},needsFullRender:function(){var r=new e.Color(this.color);return r.getAlpha()<1||!!this.shadow},_resetShadow:function(){var r=this.canvas.contextTop;r.shadowColor="",r.shadowBlur=r.shadowOffsetX=r.shadowOffsetY=0},_isOutSideCanvas:function(r){return r.x<0||r.x>this.canvas.getWidth()||r.y<0||r.y>this.canvas.getHeight()}}),function(){e.PencilBrush=e.util.createClass(e.BaseBrush,{decimate:.4,drawStraightLine:!1,straightLineKey:"shiftKey",initialize:function(r){this.canvas=r,this._points=[]},needsFullRender:function(){return this.callSuper("needsFullRender")||this._hasStraightLine},_drawSegment:function(r,f,_){var b=f.midPointFrom(_);return r.quadraticCurveTo(f.x,f.y,b.x,b.y),b},onMouseDown:function(r,f){!this.canvas._isMainEvent(f.e)||(this.drawStraightLine=f.e[this.straightLineKey],this._prepareForDrawing(r),this._captureDrawingPath(r),this._render())},onMouseMove:function(r,f){if(!!this.canvas._isMainEvent(f.e)&&(this.drawStraightLine=f.e[this.straightLineKey],!(this.limitedToCanvasSize===!0&&this._isOutSideCanvas(r))&&this._captureDrawingPath(r)&&this._points.length>1))if(this.needsFullRender())this.canvas.clearContext(this.canvas.contextTop),this._render();else{var _=this._points,b=_.length,v=this.canvas.contextTop;this._saveAndTransform(v),this.oldEnd&&(v.beginPath(),v.moveTo(this.oldEnd.x,this.oldEnd.y)),this.oldEnd=this._drawSegment(v,_[b-2],_[b-1],!0),v.stroke(),v.restore()}},onMouseUp:function(r){return this.canvas._isMainEvent(r.e)?(this.drawStraightLine=!1,this.oldEnd=void 0,this._finalizeAndAddPath(),!1):!0},_prepareForDrawing:function(r){var f=new e.Point(r.x,r.y);this._reset(),this._addPoint(f),this.canvas.contextTop.moveTo(f.x,f.y)},_addPoint:function(r){return this._points.length>1&&r.eq(this._points[this._points.length-1])?!1:(this.drawStraightLine&&this._points.length>1&&(this._hasStraightLine=!0,this._points.pop()),this._points.push(r),!0)},_reset:function(){this._points=[],this._setBrushStyles(this.canvas.contextTop),this._setShadow(),this._hasStraightLine=!1},_captureDrawingPath:function(r){var f=new e.Point(r.x,r.y);return this._addPoint(f)},_render:function(r){var f,_,b=this._points[0],v=this._points[1];if(r=r||this.canvas.contextTop,this._saveAndTransform(r),r.beginPath(),this._points.length===2&&b.x===v.x&&b.y===v.y){var w=this.width/1e3;b=new e.Point(b.x,b.y),v=new e.Point(v.x,v.y),b.x-=w,v.x+=w}for(r.moveTo(b.x,b.y),f=1,_=this._points.length;f<_;f++)this._drawSegment(r,b,v),b=this._points[f],v=this._points[f+1];r.lineTo(b.x,b.y),r.stroke(),r.restore()},convertPointsToSVGPath:function(r){var f=this.width/1e3;return e.util.getSmoothPathFromPoints(r,f)},_isEmptySVGPath:function(r){var f=e.util.joinPath(r);return f==="M 0 0 Q 0 0 0 0 L 0 0"},createPath:function(r){var f=new e.Path(r,{fill:null,stroke:this.color,strokeWidth:this.width,strokeLineCap:this.strokeLineCap,strokeMiterLimit:this.strokeMiterLimit,strokeLineJoin:this.strokeLineJoin,strokeDashArray:this.strokeDashArray});return this.shadow&&(this.shadow.affectStroke=!0,f.shadow=new e.Shadow(this.shadow)),f},decimatePoints:function(r,f){if(r.length<=2)return r;var _=this.canvas.getZoom(),b=Math.pow(f/_,2),v,w=r.length-1,x=r[0],C=[x],T;for(v=1;v<w-1;v++)T=Math.pow(x.x-r[v].x,2)+Math.pow(x.y-r[v].y,2),T>=b&&(x=r[v],C.push(x));return C.push(r[w]),C},_finalizeAndAddPath:function(){var r=this.canvas.contextTop;r.closePath(),this.decimate&&(this._points=this.decimatePoints(this._points,this.decimate));var f=this.convertPointsToSVGPath(this._points);if(this._isEmptySVGPath(f)){this.canvas.requestRenderAll();return}var _=this.createPath(f);this.canvas.clearContext(this.canvas.contextTop),this.canvas.fire("before:path:created",{path:_}),this.canvas.add(_),this.canvas.requestRenderAll(),_.setCoords(),this._resetShadow(),this.canvas.fire("path:created",{path:_})}})}(),e.CircleBrush=e.util.createClass(e.BaseBrush,{width:10,initialize:function(r){this.canvas=r,this.points=[]},drawDot:function(r){var f=this.addPoint(r),_=this.canvas.contextTop;this._saveAndTransform(_),this.dot(_,f),_.restore()},dot:function(r,f){r.fillStyle=f.fill,r.beginPath(),r.arc(f.x,f.y,f.radius,0,Math.PI*2,!1),r.closePath(),r.fill()},onMouseDown:function(r){this.points.length=0,this.canvas.clearContext(this.canvas.contextTop),this._setShadow(),this.drawDot(r)},_render:function(){var r=this.canvas.contextTop,f,_,b=this.points;for(this._saveAndTransform(r),f=0,_=b.length;f<_;f++)this.dot(r,b[f]);r.restore()},onMouseMove:function(r){this.limitedToCanvasSize===!0&&this._isOutSideCanvas(r)||(this.needsFullRender()?(this.canvas.clearContext(this.canvas.contextTop),this.addPoint(r),this._render()):this.drawDot(r))},onMouseUp:function(){var r=this.canvas.renderOnAddRemove,f,_;this.canvas.renderOnAddRemove=!1;var b=[];for(f=0,_=this.points.length;f<_;f++){var v=this.points[f],w=new e.Circle({radius:v.radius,left:v.x,top:v.y,originX:"center",originY:"center",fill:v.fill});this.shadow&&(w.shadow=new e.Shadow(this.shadow)),b.push(w)}var x=new e.Group(b);x.canvas=this.canvas,this.canvas.fire("before:path:created",{path:x}),this.canvas.add(x),this.canvas.fire("path:created",{path:x}),this.canvas.clearContext(this.canvas.contextTop),this._resetShadow(),this.canvas.renderOnAddRemove=r,this.canvas.requestRenderAll()},addPoint:function(r){var f=new e.Point(r.x,r.y),_=e.util.getRandomInt(Math.max(0,this.width-20),this.width+20)/2,b=new e.Color(this.color).setAlpha(e.util.getRandomInt(0,100)/100).toRgba();return f.radius=_,f.fill=b,this.points.push(f),f}}),e.SprayBrush=e.util.createClass(e.BaseBrush,{width:10,density:20,dotWidth:1,dotWidthVariance:1,randomOpacity:!1,optimizeOverlapping:!0,initialize:function(r){this.canvas=r,this.sprayChunks=[]},onMouseDown:function(r){this.sprayChunks.length=0,this.canvas.clearContext(this.canvas.contextTop),this._setShadow(),this.addSprayChunk(r),this.render(this.sprayChunkPoints)},onMouseMove:function(r){this.limitedToCanvasSize===!0&&this._isOutSideCanvas(r)||(this.addSprayChunk(r),this.render(this.sprayChunkPoints))},onMouseUp:function(){var r=this.canvas.renderOnAddRemove;this.canvas.renderOnAddRemove=!1;for(var f=[],_=0,b=this.sprayChunks.length;_<b;_++)for(var v=this.sprayChunks[_],w=0,x=v.length;w<x;w++){var C=new e.Rect({width:v[w].width,height:v[w].width,left:v[w].x+1,top:v[w].y+1,originX:"center",originY:"center",fill:this.color});f.push(C)}this.optimizeOverlapping&&(f=this._getOptimizedRects(f));var T=new e.Group(f);this.shadow&&T.set("shadow",new e.Shadow(this.shadow)),this.canvas.fire("before:path:created",{path:T}),this.canvas.add(T),this.canvas.fire("path:created",{path:T}),this.canvas.clearContext(this.canvas.contextTop),this._resetShadow(),this.canvas.renderOnAddRemove=r,this.canvas.requestRenderAll()},_getOptimizedRects:function(r){var f={},_,b,v;for(b=0,v=r.length;b<v;b++)_=r[b].left+""+r[b].top,f[_]||(f[_]=r[b]);var w=[];for(_ in f)w.push(f[_]);return w},render:function(r){var f=this.canvas.contextTop,_,b;for(f.fillStyle=this.color,this._saveAndTransform(f),_=0,b=r.length;_<b;_++){var v=r[_];typeof v.opacity<"u"&&(f.globalAlpha=v.opacity),f.fillRect(v.x,v.y,v.width,v.width)}f.restore()},_render:function(){var r=this.canvas.contextTop,f,_;for(r.fillStyle=this.color,this._saveAndTransform(r),f=0,_=this.sprayChunks.length;f<_;f++)this.render(this.sprayChunks[f]);r.restore()},addSprayChunk:function(r){this.sprayChunkPoints=[];var f,_,b,v=this.width/2,w;for(w=0;w<this.density;w++){f=e.util.getRandomInt(r.x-v,r.x+v),_=e.util.getRandomInt(r.y-v,r.y+v),this.dotWidthVariance?b=e.util.getRandomInt(Math.max(1,this.dotWidth-this.dotWidthVariance),this.dotWidth+this.dotWidthVariance):b=this.dotWidth;var x=new e.Point(f,_);x.width=b,this.randomOpacity&&(x.opacity=e.util.getRandomInt(0,100)/100),this.sprayChunkPoints.push(x)}this.sprayChunks.push(this.sprayChunkPoints)}}),e.PatternBrush=e.util.createClass(e.PencilBrush,{getPatternSrc:function(){var r=20,f=5,_=e.util.createCanvasElement(),b=_.getContext("2d");return _.width=_.height=r+f,b.fillStyle=this.color,b.beginPath(),b.arc(r/2,r/2,r/2,0,Math.PI*2,!1),b.closePath(),b.fill(),_},getPatternSrcFunction:function(){return String(this.getPatternSrc).replace("this.color",'"'+this.color+'"')},getPattern:function(r){return r.createPattern(this.source||this.getPatternSrc(),"repeat")},_setBrushStyles:function(r){this.callSuper("_setBrushStyles",r),r.strokeStyle=this.getPattern(r)},createPath:function(r){var f=this.callSuper("createPath",r),_=f._getLeftTopCoords().scalarAdd(f.strokeWidth/2);return f.stroke=new e.Pattern({source:this.source||this.getPatternSrcFunction(),offsetX:-_.x,offsetY:-_.y}),f}}),function(){var r=e.util.getPointer,f=e.util.degreesToRadians,_=e.util.isTouchEvent;e.Canvas=e.util.createClass(e.StaticCanvas,{initialize:function(v,w){w||(w={}),this.renderAndResetBound=this.renderAndReset.bind(this),this.requestRenderAllBound=this.requestRenderAll.bind(this),this._initStatic(v,w),this._initInteractive(),this._createCacheCanvas()},uniformScaling:!0,uniScaleKey:"shiftKey",centeredScaling:!1,centeredRotation:!1,centeredKey:"altKey",altActionKey:"shiftKey",interactive:!0,selection:!0,selectionKey:"shiftKey",altSelectionKey:null,selectionColor:"rgba(100, 100, 255, 0.3)",selectionDashArray:[],selectionBorderColor:"rgba(255, 255, 255, 0.3)",selectionLineWidth:1,selectionFullyContained:!1,hoverCursor:"move",moveCursor:"move",defaultCursor:"default",freeDrawingCursor:"crosshair",notAllowedCursor:"not-allowed",containerClass:"canvas-container",perPixelTargetFind:!1,targetFindTolerance:0,skipTargetFind:!1,isDrawingMode:!1,preserveObjectStacking:!1,snapAngle:0,snapThreshold:null,stopContextMenu:!1,fireRightClick:!1,fireMiddleClick:!1,targets:[],enablePointerEvents:!1,_hoveredTarget:null,_hoveredTargets:[],_initInteractive:function(){this._currentTransform=null,this._groupSelector=null,this._initWrapperElement(),this._createUpperCanvas(),this._initEventListeners(),this._initRetinaScaling(),this.freeDrawingBrush=e.PencilBrush&&new e.PencilBrush(this),this.calcOffset()},_chooseObjectsToRender:function(){var v=this.getActiveObjects(),w,x,C;if(v.length>0&&!this.preserveObjectStacking){x=[],C=[];for(var T=0,S=this._objects.length;T<S;T++)w=this._objects[T],v.indexOf(w)===-1?x.push(w):C.push(w);v.length>1&&(this._activeObject._objects=C),x.push.apply(x,C)}else x=this._objects;return x},renderAll:function(){this.contextTopDirty&&!this._groupSelector&&!this.isDrawingMode&&(this.clearContext(this.contextTop),this.contextTopDirty=!1),this.hasLostContext&&(this.renderTopLayer(this.contextTop),this.hasLostContext=!1);var v=this.contextContainer;return this.renderCanvas(v,this._chooseObjectsToRender()),this},renderTopLayer:function(v){v.save(),this.isDrawingMode&&this._isCurrentlyDrawing&&(this.freeDrawingBrush&&this.freeDrawingBrush._render(),this.contextTopDirty=!0),this.selection&&this._groupSelector&&(this._drawSelection(v),this.contextTopDirty=!0),v.restore()},renderTop:function(){var v=this.contextTop;return this.clearContext(v),this.renderTopLayer(v),this.fire("after:render"),this},_normalizePointer:function(v,w){var x=v.calcTransformMatrix(),C=e.util.invertTransform(x),T=this.restorePointerVpt(w);return e.util.transformPoint(T,C)},isTargetTransparent:function(v,w,x){if(v.shouldCache()&&v._cacheCanvas&&v!==this._activeObject){var C=this._normalizePointer(v,{x:w,y:x}),T=Math.max(v.cacheTranslationX+C.x*v.zoomX,0),S=Math.max(v.cacheTranslationY+C.y*v.zoomY,0),X=e.util.isTransparent(v._cacheContext,Math.round(T),Math.round(S),this.targetFindTolerance);return X}var M=this.contextCache,O=v.selectionBackgroundColor,V=this.viewportTransform;v.selectionBackgroundColor="",this.clearContext(M),M.save(),M.transform(V[0],V[1],V[2],V[3],V[4],V[5]),v.render(M),M.restore(),v.selectionBackgroundColor=O;var X=e.util.isTransparent(M,w,x,this.targetFindTolerance);return X},_isSelectionKeyPressed:function(v){var w=!1;return Array.isArray(this.selectionKey)?w=!!this.selectionKey.find(function(x){return v[x]===!0}):w=v[this.selectionKey],w},_shouldClearSelection:function(v,w){var x=this.getActiveObjects(),C=this._activeObject;return!w||w&&C&&x.length>1&&x.indexOf(w)===-1&&C!==w&&!this._isSelectionKeyPressed(v)||w&&!w.evented||w&&!w.selectable&&C&&C!==w},_shouldCenterTransform:function(v,w,x){if(!!v){var C;return w==="scale"||w==="scaleX"||w==="scaleY"||w==="resizing"?C=this.centeredScaling||v.centeredScaling:w==="rotate"&&(C=this.centeredRotation||v.centeredRotation),C?!x:x}},_getOriginFromCorner:function(v,w){var x={x:v.originX,y:v.originY};return w==="ml"||w==="tl"||w==="bl"?x.x="right":(w==="mr"||w==="tr"||w==="br")&&(x.x="left"),w==="tl"||w==="mt"||w==="tr"?x.y="bottom":(w==="bl"||w==="mb"||w==="br")&&(x.y="top"),x},_getActionFromCorner:function(v,w,x,C){if(!w||!v)return"drag";var T=C.controls[w];return T.getActionName(x,T,C)},_setupCurrentTransform:function(v,w,x){if(!!w){var C=this.getPointer(v),T=w.__corner,S=w.controls[T],M=x&&T?S.getActionHandler(v,w,S):e.controlsUtils.dragHandler,O=this._getActionFromCorner(x,T,v,w),V=this._getOriginFromCorner(w,T),X=v[this.centeredKey],Z={target:w,action:O,actionHandler:M,corner:T,scaleX:w.scaleX,scaleY:w.scaleY,skewX:w.skewX,skewY:w.skewY,offsetX:C.x-w.left,offsetY:C.y-w.top,originX:V.x,originY:V.y,ex:C.x,ey:C.y,lastX:C.x,lastY:C.y,theta:f(w.angle),width:w.width*w.scaleX,shiftKey:v.shiftKey,altKey:X,original:e.util.saveObjectTransform(w)};this._shouldCenterTransform(w,O,X)&&(Z.originX="center",Z.originY="center"),Z.original.originX=V.x,Z.original.originY=V.y,this._currentTransform=Z,this._beforeTransform(v)}},setCursor:function(v){this.upperCanvasEl.style.cursor=v},_drawSelection:function(v){var w=this._groupSelector,x=new e.Point(w.ex,w.ey),C=e.util.transformPoint(x,this.viewportTransform),T=new e.Point(w.ex+w.left,w.ey+w.top),S=e.util.transformPoint(T,this.viewportTransform),M=Math.min(C.x,S.x),O=Math.min(C.y,S.y),V=Math.max(C.x,S.x),X=Math.max(C.y,S.y),Z=this.selectionLineWidth/2;this.selectionColor&&(v.fillStyle=this.selectionColor,v.fillRect(M,O,V-M,X-O)),!(!this.selectionLineWidth||!this.selectionBorderColor)&&(v.lineWidth=this.selectionLineWidth,v.strokeStyle=this.selectionBorderColor,M+=Z,O+=Z,V-=Z,X-=Z,e.Object.prototype._setLineDash.call(this,v,this.selectionDashArray),v.strokeRect(M,O,V-M,X-O))},findTarget:function(v,w){if(!this.skipTargetFind){var x=!0,C=this.getPointer(v,x),T=this._activeObject,S=this.getActiveObjects(),M,O,V=_(v),X=S.length>1&&!w||S.length===1;if(this.targets=[],X&&T._findTargetCorner(C,V)||S.length>1&&!w&&T===this._searchPossibleTargets([T],C))return T;if(S.length===1&&T===this._searchPossibleTargets([T],C))if(this.preserveObjectStacking)M=T,O=this.targets,this.targets=[];else return T;var Z=this._searchPossibleTargets(this._objects,C);return v[this.altSelectionKey]&&Z&&M&&Z!==M&&(Z=M,this.targets=O),Z}},_checkTarget:function(v,w,x){if(w&&w.visible&&w.evented&&w.containsPoint(v))if((this.perPixelTargetFind||w.perPixelTargetFind)&&!w.isEditing){var C=this.isTargetTransparent(w,x.x,x.y);if(!C)return!0}else return!0},_searchPossibleTargets:function(v,w){for(var x,C=v.length,T;C--;){var S=v[C],M=S.group?this._normalizePointer(S.group,w):w;if(this._checkTarget(M,S,w)){x=v[C],x.subTargetCheck&&x instanceof e.Group&&(T=this._searchPossibleTargets(x._objects,w),T&&this.targets.push(T));break}}return x},restorePointerVpt:function(v){return e.util.transformPoint(v,e.util.invertTransform(this.viewportTransform))},getPointer:function(v,w){if(this._absolutePointer&&!w)return this._absolutePointer;if(this._pointer&&w)return this._pointer;var x=r(v),C=this.upperCanvasEl,T=C.getBoundingClientRect(),S=T.width||0,M=T.height||0,O;(!S||!M)&&("top"in T&&"bottom"in T&&(M=Math.abs(T.top-T.bottom)),"right"in T&&"left"in T&&(S=Math.abs(T.right-T.left))),this.calcOffset(),x.x=x.x-this._offset.left,x.y=x.y-this._offset.top,w||(x=this.restorePointerVpt(x));var V=this.getRetinaScaling();return V!==1&&(x.x/=V,x.y/=V),S===0||M===0?O={width:1,height:1}:O={width:C.width/S,height:C.height/M},{x:x.x*O.width,y:x.y*O.height}},_createUpperCanvas:function(){var v=this.lowerCanvasEl.className.replace(/\s*lower-canvas\s*/,""),w=this.lowerCanvasEl,x=this.upperCanvasEl;x?x.className="":(x=this._createCanvasElement(),this.upperCanvasEl=x),e.util.addClass(x,"upper-canvas "+v),this.wrapperEl.appendChild(x),this._copyCanvasStyle(w,x),this._applyCanvasStyle(x),this.contextTop=x.getContext("2d")},getTopContext:function(){return this.contextTop},_createCacheCanvas:function(){this.cacheCanvasEl=this._createCanvasElement(),this.cacheCanvasEl.setAttribute("width",this.width),this.cacheCanvasEl.setAttribute("height",this.height),this.contextCache=this.cacheCanvasEl.getContext("2d")},_initWrapperElement:function(){this.wrapperEl=e.util.wrapElement(this.lowerCanvasEl,"div",{class:this.containerClass}),e.util.setStyle(this.wrapperEl,{width:this.width+"px",height:this.height+"px",position:"relative"}),e.util.makeElementUnselectable(this.wrapperEl)},_applyCanvasStyle:function(v){var w=this.width||v.width,x=this.height||v.height;e.util.setStyle(v,{position:"absolute",width:w+"px",height:x+"px",left:0,top:0,"touch-action":this.allowTouchScrolling?"manipulation":"none","-ms-touch-action":this.allowTouchScrolling?"manipulation":"none"}),v.width=w,v.height=x,e.util.makeElementUnselectable(v)},_copyCanvasStyle:function(v,w){w.style.cssText=v.style.cssText},getSelectionContext:function(){return this.contextTop},getSelectionElement:function(){return this.upperCanvasEl},getActiveObject:function(){return this._activeObject},getActiveObjects:function(){var v=this._activeObject;return v?v.type==="activeSelection"&&v._objects?v._objects.slice(0):[v]:[]},_onObjectRemoved:function(v){v===this._activeObject&&(this.fire("before:selection:cleared",{target:v}),this._discardActiveObject(),this.fire("selection:cleared",{target:v}),v.fire("deselected")),v===this._hoveredTarget&&(this._hoveredTarget=null,this._hoveredTargets=[]),this.callSuper("_onObjectRemoved",v)},_fireSelectionEvents:function(v,w){var x=!1,C=this.getActiveObjects(),T=[],S=[];v.forEach(function(M){C.indexOf(M)===-1&&(x=!0,M.fire("deselected",{e:w,target:M}),S.push(M))}),C.forEach(function(M){v.indexOf(M)===-1&&(x=!0,M.fire("selected",{e:w,target:M}),T.push(M))}),v.length>0&&C.length>0?x&&this.fire("selection:updated",{e:w,selected:T,deselected:S}):C.length>0?this.fire("selection:created",{e:w,selected:T}):v.length>0&&this.fire("selection:cleared",{e:w,deselected:S})},setActiveObject:function(v,w){var x=this.getActiveObjects();return this._setActiveObject(v,w),this._fireSelectionEvents(x,w),this},_setActiveObject:function(v,w){return this._activeObject===v||!this._discardActiveObject(w,v)||v.onSelect({e:w})?!1:(this._activeObject=v,!0)},_discardActiveObject:function(v,w){var x=this._activeObject;if(x){if(x.onDeselect({e:v,object:w}))return!1;this._activeObject=null}return!0},discardActiveObject:function(v){var w=this.getActiveObjects(),x=this.getActiveObject();return w.length&&this.fire("before:selection:cleared",{target:x,e:v}),this._discardActiveObject(v),this._fireSelectionEvents(w,v),this},dispose:function(){var v=this.wrapperEl;return this.removeListeners(),v.removeChild(this.upperCanvasEl),v.removeChild(this.lowerCanvasEl),this.contextCache=null,this.contextTop=null,["upperCanvasEl","cacheCanvasEl"].forEach(function(w){e.util.cleanUpJsdomNode(this[w]),this[w]=void 0}.bind(this)),v.parentNode&&v.parentNode.replaceChild(this.lowerCanvasEl,this.wrapperEl),delete this.wrapperEl,e.StaticCanvas.prototype.dispose.call(this),this},clear:function(){return this.discardActiveObject(),this.clearContext(this.contextTop),this.callSuper("clear")},drawControls:function(v){var w=this._activeObject;w&&w._renderControls(v)},_toObject:function(v,w,x){var C=this._realizeGroupTransformOnObject(v),T=this.callSuper("_toObject",v,w,x);return this._unwindGroupTransformOnObject(v,C),T},_realizeGroupTransformOnObject:function(v){if(v.group&&v.group.type==="activeSelection"&&this._activeObject===v.group){var w=["angle","flipX","flipY","left","scaleX","scaleY","skewX","skewY","top"],x={};return w.forEach(function(C){x[C]=v[C]}),e.util.addTransformToObject(v,this._activeObject.calcOwnMatrix()),x}else return null},_unwindGroupTransformOnObject:function(v,w){w&&v.set(w)},_setSVGObject:function(v,w,x){var C=this._realizeGroupTransformOnObject(w);this.callSuper("_setSVGObject",v,w,x),this._unwindGroupTransformOnObject(w,C)},setViewportTransform:function(v){this.renderOnAddRemove&&this._activeObject&&this._activeObject.isEditing&&this._activeObject.clearContextTop(),e.StaticCanvas.prototype.setViewportTransform.call(this,v)}});for(var b in e.StaticCanvas)b!=="prototype"&&(e.Canvas[b]=e.StaticCanvas[b])}(),function(){var r=e.util.addListener,f=e.util.removeListener,_=3,b=2,v=1,w={passive:!1};function x(C,T){return C.button&&C.button===T-1}e.util.object.extend(e.Canvas.prototype,{mainTouchId:null,_initEventListeners:function(){this.removeListeners(),this._bindEvents(),this.addOrRemove(r,"add")},_getEventPrefix:function(){return this.enablePointerEvents?"pointer":"mouse"},addOrRemove:function(C,T){var S=this.upperCanvasEl,M=this._getEventPrefix();C(e.window,"resize",this._onResize),C(S,M+"down",this._onMouseDown),C(S,M+"move",this._onMouseMove,w),C(S,M+"out",this._onMouseOut),C(S,M+"enter",this._onMouseEnter),C(S,"wheel",this._onMouseWheel),C(S,"contextmenu",this._onContextMenu),C(S,"dblclick",this._onDoubleClick),C(S,"dragover",this._onDragOver),C(S,"dragenter",this._onDragEnter),C(S,"dragleave",this._onDragLeave),C(S,"drop",this._onDrop),this.enablePointerEvents||C(S,"touchstart",this._onTouchStart,w),typeof eventjs<"u"&&T in eventjs&&(eventjs[T](S,"gesture",this._onGesture),eventjs[T](S,"drag",this._onDrag),eventjs[T](S,"orientation",this._onOrientationChange),eventjs[T](S,"shake",this._onShake),eventjs[T](S,"longpress",this._onLongPress))},removeListeners:function(){this.addOrRemove(f,"remove");var C=this._getEventPrefix();f(e.document,C+"up",this._onMouseUp),f(e.document,"touchend",this._onTouchEnd,w),f(e.document,C+"move",this._onMouseMove,w),f(e.document,"touchmove",this._onMouseMove,w)},_bindEvents:function(){this.eventsBound||(this._onMouseDown=this._onMouseDown.bind(this),this._onTouchStart=this._onTouchStart.bind(this),this._onMouseMove=this._onMouseMove.bind(this),this._onMouseUp=this._onMouseUp.bind(this),this._onTouchEnd=this._onTouchEnd.bind(this),this._onResize=this._onResize.bind(this),this._onGesture=this._onGesture.bind(this),this._onDrag=this._onDrag.bind(this),this._onShake=this._onShake.bind(this),this._onLongPress=this._onLongPress.bind(this),this._onOrientationChange=this._onOrientationChange.bind(this),this._onMouseWheel=this._onMouseWheel.bind(this),this._onMouseOut=this._onMouseOut.bind(this),this._onMouseEnter=this._onMouseEnter.bind(this),this._onContextMenu=this._onContextMenu.bind(this),this._onDoubleClick=this._onDoubleClick.bind(this),this._onDragOver=this._onDragOver.bind(this),this._onDragEnter=this._simpleEventHandler.bind(this,"dragenter"),this._onDragLeave=this._simpleEventHandler.bind(this,"dragleave"),this._onDrop=this._onDrop.bind(this),this.eventsBound=!0)},_onGesture:function(C,T){this.__onTransformGesture&&this.__onTransformGesture(C,T)},_onDrag:function(C,T){this.__onDrag&&this.__onDrag(C,T)},_onMouseWheel:function(C){this.__onMouseWheel(C)},_onMouseOut:function(C){var T=this._hoveredTarget;this.fire("mouse:out",{target:T,e:C}),this._hoveredTarget=null,T&&T.fire("mouseout",{e:C});var S=this;this._hoveredTargets.forEach(function(M){S.fire("mouse:out",{target:T,e:C}),M&&T.fire("mouseout",{e:C})}),this._hoveredTargets=[]},_onMouseEnter:function(C){!this._currentTransform&&!this.findTarget(C)&&(this.fire("mouse:over",{target:null,e:C}),this._hoveredTarget=null,this._hoveredTargets=[])},_onOrientationChange:function(C,T){this.__onOrientationChange&&this.__onOrientationChange(C,T)},_onShake:function(C,T){this.__onShake&&this.__onShake(C,T)},_onLongPress:function(C,T){this.__onLongPress&&this.__onLongPress(C,T)},_onDragOver:function(C){C.preventDefault();var T=this._simpleEventHandler("dragover",C);this._fireEnterLeaveEvents(T,C)},_onDrop:function(C){return this._simpleEventHandler("drop:before",C),this._simpleEventHandler("drop",C)},_onContextMenu:function(C){return this.stopContextMenu&&(C.stopPropagation(),C.preventDefault()),!1},_onDoubleClick:function(C){this._cacheTransformEventData(C),this._handleEvent(C,"dblclick"),this._resetTransformEventData(C)},getPointerId:function(C){var T=C.changedTouches;return T?T[0]&&T[0].identifier:this.enablePointerEvents?C.pointerId:-1},_isMainEvent:function(C){return C.isPrimary===!0?!0:C.isPrimary===!1?!1:C.type==="touchend"&&C.touches.length===0?!0:C.changedTouches?C.changedTouches[0].identifier===this.mainTouchId:!0},_onTouchStart:function(C){C.preventDefault(),this.mainTouchId===null&&(this.mainTouchId=this.getPointerId(C)),this.__onMouseDown(C),this._resetTransformEventData();var T=this.upperCanvasEl,S=this._getEventPrefix();r(e.document,"touchend",this._onTouchEnd,w),r(e.document,"touchmove",this._onMouseMove,w),f(T,S+"down",this._onMouseDown)},_onMouseDown:function(C){this.__onMouseDown(C),this._resetTransformEventData();var T=this.upperCanvasEl,S=this._getEventPrefix();f(T,S+"move",this._onMouseMove,w),r(e.document,S+"up",this._onMouseUp),r(e.document,S+"move",this._onMouseMove,w)},_onTouchEnd:function(C){if(!(C.touches.length>0)){this.__onMouseUp(C),this._resetTransformEventData(),this.mainTouchId=null;var T=this._getEventPrefix();f(e.document,"touchend",this._onTouchEnd,w),f(e.document,"touchmove",this._onMouseMove,w);var S=this;this._willAddMouseDown&&clearTimeout(this._willAddMouseDown),this._willAddMouseDown=setTimeout(function(){r(S.upperCanvasEl,T+"down",S._onMouseDown),S._willAddMouseDown=0},400)}},_onMouseUp:function(C){this.__onMouseUp(C),this._resetTransformEventData();var T=this.upperCanvasEl,S=this._getEventPrefix();this._isMainEvent(C)&&(f(e.document,S+"up",this._onMouseUp),f(e.document,S+"move",this._onMouseMove,w),r(T,S+"move",this._onMouseMove,w))},_onMouseMove:function(C){!this.allowTouchScrolling&&C.preventDefault&&C.preventDefault(),this.__onMouseMove(C)},_onResize:function(){this.calcOffset()},_shouldRender:function(C){var T=this._activeObject;return!!T!=!!C||T&&C&&T!==C?!0:(T&&T.isEditing,!1)},__onMouseUp:function(C){var T,S=this._currentTransform,M=this._groupSelector,O=!1,V=!M||M.left===0&&M.top===0;if(this._cacheTransformEventData(C),T=this._target,this._handleEvent(C,"up:before"),x(C,_)){this.fireRightClick&&this._handleEvent(C,"up",_,V);return}if(x(C,b)){this.fireMiddleClick&&this._handleEvent(C,"up",b,V),this._resetTransformEventData();return}if(this.isDrawingMode&&this._isCurrentlyDrawing){this._onMouseUpInDrawingMode(C);return}if(!!this._isMainEvent(C)){if(S&&(this._finalizeCurrentTransform(C),O=S.actionPerformed),!V){var X=T===this._activeObject;this._maybeGroupObjects(C),O||(O=this._shouldRender(T)||!X&&T===this._activeObject)}var Z,te;if(T){if(Z=T._findTargetCorner(this.getPointer(C,!0),e.util.isTouchEvent(C)),T.selectable&&T!==this._activeObject&&T.activeOn==="up")this.setActiveObject(T,C),O=!0;else{var J=T.controls[Z],ie=J&&J.getMouseUpHandler(C,T,J);ie&&(te=this.getPointer(C),ie(C,S,te.x,te.y))}T.isMoving=!1}if(S&&(S.target!==T||S.corner!==Z)){var Ee=S.target&&S.target.controls[S.corner],Pe=Ee&&Ee.getMouseUpHandler(C,T,J);te=te||this.getPointer(C),Pe&&Pe(C,S,te.x,te.y)}this._setCursorFromEvent(C,T),this._handleEvent(C,"up",v,V),this._groupSelector=null,this._currentTransform=null,T&&(T.__corner=0),O?this.requestRenderAll():V||this.renderTop()}},_simpleEventHandler:function(C,T){var S=this.findTarget(T),M=this.targets,O={e:T,target:S,subTargets:M};if(this.fire(C,O),S&&S.fire(C,O),!M)return S;for(var V=0;V<M.length;V++)M[V].fire(C,O);return S},_handleEvent:function(C,T,S,M){var O=this._target,V=this.targets||[],X={e:C,target:O,subTargets:V,button:S||v,isClick:M||!1,pointer:this._pointer,absolutePointer:this._absolutePointer,transform:this._currentTransform};T==="up"&&(X.currentTarget=this.findTarget(C),X.currentSubTargets=this.targets),this.fire("mouse:"+T,X),O&&O.fire("mouse"+T,X);for(var Z=0;Z<V.length;Z++)V[Z].fire("mouse"+T,X)},_finalizeCurrentTransform:function(C){var T=this._currentTransform,S=T.target,M={e:C,target:S,transform:T,action:T.action};S._scaling&&(S._scaling=!1),S.setCoords(),(T.actionPerformed||this.stateful&&S.hasStateChanged())&&this._fire("modified",M)},_onMouseDownInDrawingMode:function(C){this._isCurrentlyDrawing=!0,this.getActiveObject()&&this.discardActiveObject(C).requestRenderAll();var T=this.getPointer(C);this.freeDrawingBrush.onMouseDown(T,{e:C,pointer:T}),this._handleEvent(C,"down")},_onMouseMoveInDrawingMode:function(C){if(this._isCurrentlyDrawing){var T=this.getPointer(C);this.freeDrawingBrush.onMouseMove(T,{e:C,pointer:T})}this.setCursor(this.freeDrawingCursor),this._handleEvent(C,"move")},_onMouseUpInDrawingMode:function(C){var T=this.getPointer(C);this._isCurrentlyDrawing=this.freeDrawingBrush.onMouseUp({e:C,pointer:T}),this._handleEvent(C,"up")},__onMouseDown:function(C){this._cacheTransformEventData(C),this._handleEvent(C,"down:before");var T=this._target;if(x(C,_)){this.fireRightClick&&this._handleEvent(C,"down",_);return}if(x(C,b)){this.fireMiddleClick&&this._handleEvent(C,"down",b);return}if(this.isDrawingMode){this._onMouseDownInDrawingMode(C);return}if(!!this._isMainEvent(C)&&!this._currentTransform){var S=this._pointer;this._previousPointer=S;var M=this._shouldRender(T),O=this._shouldGroup(C,T);if(this._shouldClearSelection(C,T)?this.discardActiveObject(C):O&&(this._handleGrouping(C,T),T=this._activeObject),this.selection&&(!T||!T.selectable&&!T.isEditing&&T!==this._activeObject)&&(this._groupSelector={ex:this._absolutePointer.x,ey:this._absolutePointer.y,top:0,left:0}),T){var V=T===this._activeObject;T.selectable&&T.activeOn==="down"&&this.setActiveObject(T,C);var X=T._findTargetCorner(this.getPointer(C,!0),e.util.isTouchEvent(C));if(T.__corner=X,T===this._activeObject&&(X||!O)){this._setupCurrentTransform(C,T,V);var Z=T.controls[X],S=this.getPointer(C),te=Z&&Z.getMouseDownHandler(C,T,Z);te&&te(C,this._currentTransform,S.x,S.y)}}this._handleEvent(C,"down"),(M||O)&&this.requestRenderAll()}},_resetTransformEventData:function(){this._target=null,this._pointer=null,this._absolutePointer=null},_cacheTransformEventData:function(C){this._resetTransformEventData(),this._pointer=this.getPointer(C,!0),this._absolutePointer=this.restorePointerVpt(this._pointer),this._target=this._currentTransform?this._currentTransform.target:this.findTarget(C)||null},_beforeTransform:function(C){var T=this._currentTransform;this.stateful&&T.target.saveState(),this.fire("before:transform",{e:C,transform:T})},__onMouseMove:function(C){this._handleEvent(C,"move:before"),this._cacheTransformEventData(C);var T,S;if(this.isDrawingMode){this._onMouseMoveInDrawingMode(C);return}if(!!this._isMainEvent(C)){var M=this._groupSelector;M?(S=this._absolutePointer,M.left=S.x-M.ex,M.top=S.y-M.ey,this.renderTop()):this._currentTransform?this._transformObject(C):(T=this.findTarget(C)||null,this._setCursorFromEvent(C,T),this._fireOverOutEvents(T,C)),this._handleEvent(C,"move"),this._resetTransformEventData()}},_fireOverOutEvents:function(C,T){var S=this._hoveredTarget,M=this._hoveredTargets,O=this.targets,V=Math.max(M.length,O.length);this.fireSyntheticInOutEvents(C,T,{oldTarget:S,evtOut:"mouseout",canvasEvtOut:"mouse:out",evtIn:"mouseover",canvasEvtIn:"mouse:over"});for(var X=0;X<V;X++)this.fireSyntheticInOutEvents(O[X],T,{oldTarget:M[X],evtOut:"mouseout",evtIn:"mouseover"});this._hoveredTarget=C,this._hoveredTargets=this.targets.concat()},_fireEnterLeaveEvents:function(C,T){var S=this._draggedoverTarget,M=this._hoveredTargets,O=this.targets,V=Math.max(M.length,O.length);this.fireSyntheticInOutEvents(C,T,{oldTarget:S,evtOut:"dragleave",evtIn:"dragenter"});for(var X=0;X<V;X++)this.fireSyntheticInOutEvents(O[X],T,{oldTarget:M[X],evtOut:"dragleave",evtIn:"dragenter"});this._draggedoverTarget=C},fireSyntheticInOutEvents:function(C,T,S){var M,O,V=S.oldTarget,X,Z,te=V!==C,J=S.canvasEvtIn,ie=S.canvasEvtOut;te&&(M={e:T,target:C,previousTarget:V},O={e:T,target:V,nextTarget:C}),Z=C&&te,X=V&&te,X&&(ie&&this.fire(ie,O),V.fire(S.evtOut,O)),Z&&(J&&this.fire(J,M),C.fire(S.evtIn,M))},__onMouseWheel:function(C){this._cacheTransformEventData(C),this._handleEvent(C,"wheel"),this._resetTransformEventData()},_transformObject:function(C){var T=this.getPointer(C),S=this._currentTransform;S.reset=!1,S.shiftKey=C.shiftKey,S.altKey=C[this.centeredKey],this._performTransformAction(C,S,T),S.actionPerformed&&this.requestRenderAll()},_performTransformAction:function(C,T,S){var M=S.x,O=S.y,V=T.action,X=!1,Z=T.actionHandler;Z&&(X=Z(C,T,M,O)),V==="drag"&&X&&(T.target.isMoving=!0,this.setCursor(T.target.moveCursor||this.moveCursor)),T.actionPerformed=T.actionPerformed||X},_fire:e.controlsUtils.fireEvent,_setCursorFromEvent:function(C,T){if(!T)return this.setCursor(this.defaultCursor),!1;var S=T.hoverCursor||this.hoverCursor,M=this._activeObject&&this._activeObject.type==="activeSelection"?this._activeObject:null,O=(!M||!M.contains(T))&&T._findTargetCorner(this.getPointer(C,!0));O?this.setCursor(this.getCornerCursor(O,T,C)):(T.subTargetCheck&&this.targets.concat().reverse().map(function(V){S=V.hoverCursor||S}),this.setCursor(S))},getCornerCursor:function(C,T,S){var M=T.controls[C];return M.cursorStyleHandler(S,M,T)}})}(),function(){var r=Math.min,f=Math.max;e.util.object.extend(e.Canvas.prototype,{_shouldGroup:function(_,b){var v=this._activeObject;return v&&this._isSelectionKeyPressed(_)&&b&&b.selectable&&this.selection&&(v!==b||v.type==="activeSelection")&&!b.onSelect({e:_})},_handleGrouping:function(_,b){var v=this._activeObject;v.__corner||b===v&&(b=this.findTarget(_,!0),!b||!b.selectable)||(v&&v.type==="activeSelection"?this._updateActiveSelection(b,_):this._createActiveSelection(b,_))},_updateActiveSelection:function(_,b){var v=this._activeObject,w=v._objects.slice(0);v.contains(_)?(v.removeWithUpdate(_),this._hoveredTarget=_,this._hoveredTargets=this.targets.concat(),v.size()===1&&this._setActiveObject(v.item(0),b)):(v.addWithUpdate(_),this._hoveredTarget=v,this._hoveredTargets=this.targets.concat()),this._fireSelectionEvents(w,b)},_createActiveSelection:function(_,b){var v=this.getActiveObjects(),w=this._createGroup(_);this._hoveredTarget=w,this._setActiveObject(w,b),this._fireSelectionEvents(v,b)},_createGroup:function(_){var b=this._objects,v=b.indexOf(this._activeObject)<b.indexOf(_),w=v?[this._activeObject,_]:[_,this._activeObject];return this._activeObject.isEditing&&this._activeObject.exitEditing(),new e.ActiveSelection(w,{canvas:this})},_groupSelectedObjects:function(_){var b=this._collectObjects(_),v;b.length===1?this.setActiveObject(b[0],_):b.length>1&&(v=new e.ActiveSelection(b.reverse(),{canvas:this}),this.setActiveObject(v,_))},_collectObjects:function(_){for(var b=[],v,w=this._groupSelector.ex,x=this._groupSelector.ey,C=w+this._groupSelector.left,T=x+this._groupSelector.top,S=new e.Point(r(w,C),r(x,T)),M=new e.Point(f(w,C),f(x,T)),O=!this.selectionFullyContained,V=w===C&&x===T,X=this._objects.length;X--&&(v=this._objects[X],!(!(!v||!v.selectable||!v.visible)&&(O&&v.intersectsWithRect(S,M,!0)||v.isContainedWithinRect(S,M,!0)||O&&v.containsPoint(S,null,!0)||O&&v.containsPoint(M,null,!0))&&(b.push(v),V))););return b.length>1&&(b=b.filter(function(Z){return!Z.onSelect({e:_})})),b},_maybeGroupObjects:function(_){this.selection&&this._groupSelector&&this._groupSelectedObjects(_),this.setCursor(this.defaultCursor),this._groupSelector=null}})}(),function(){e.util.object.extend(e.StaticCanvas.prototype,{toDataURL:function(r){r||(r={});var f=r.format||"png",_=r.quality||1,b=(r.multiplier||1)*(r.enableRetinaScaling?this.getRetinaScaling():1),v=this.toCanvasElement(b,r);return e.util.toDataURL(v,f,_)},toCanvasElement:function(r,f){r=r||1,f=f||{};var _=(f.width||this.width)*r,b=(f.height||this.height)*r,v=this.getZoom(),w=this.width,x=this.height,C=v*r,T=this.viewportTransform,S=(T[4]-(f.left||0))*r,M=(T[5]-(f.top||0))*r,O=this.interactive,V=[C,0,0,C,S,M],X=this.enableRetinaScaling,Z=e.util.createCanvasElement(),te=this.contextTop;return Z.width=_,Z.height=b,this.contextTop=null,this.enableRetinaScaling=!1,this.interactive=!1,this.viewportTransform=V,this.width=_,this.height=b,this.calcViewportBoundaries(),this.renderCanvas(Z.getContext("2d"),this._objects),this.viewportTransform=T,this.width=w,this.height=x,this.calcViewportBoundaries(),this.interactive=O,this.enableRetinaScaling=X,this.contextTop=te,Z}})}(),e.util.object.extend(e.StaticCanvas.prototype,{loadFromJSON:function(r,f,_){if(!!r){var b=typeof r=="string"?JSON.parse(r):e.util.object.clone(r),v=this,w=b.clipPath,x=this.renderOnAddRemove;return this.renderOnAddRemove=!1,delete b.clipPath,this._enlivenObjects(b.objects,function(C){v.clear(),v._setBgOverlay(b,function(){w?v._enlivenObjects([w],function(T){v.clipPath=T[0],v.__setupCanvas.call(v,b,C,x,f)}):v.__setupCanvas.call(v,b,C,x,f)})},_),this}},__setupCanvas:function(r,f,_,b){var v=this;f.forEach(function(w,x){v.insertAt(w,x)}),this.renderOnAddRemove=_,delete r.objects,delete r.backgroundImage,delete r.overlayImage,delete r.background,delete r.overlay,this._setOptions(r),this.renderAll(),b&&b()},_setBgOverlay:function(r,f){var _={backgroundColor:!1,overlayColor:!1,backgroundImage:!1,overlayImage:!1};if(!r.backgroundImage&&!r.overlayImage&&!r.background&&!r.overlay){f&&f();return}var b=function(){_.backgroundImage&&_.overlayImage&&_.backgroundColor&&_.overlayColor&&f&&f()};this.__setBgOverlay("backgroundImage",r.backgroundImage,_,b),this.__setBgOverlay("overlayImage",r.overlayImage,_,b),this.__setBgOverlay("backgroundColor",r.background,_,b),this.__setBgOverlay("overlayColor",r.overlay,_,b)},__setBgOverlay:function(r,f,_,b){var v=this;if(!f){_[r]=!0,b&&b();return}r==="backgroundImage"||r==="overlayImage"?e.util.enlivenObjects([f],function(w){v[r]=w[0],_[r]=!0,b&&b()}):this["set"+e.util.string.capitalize(r,!0)](f,function(){_[r]=!0,b&&b()})},_enlivenObjects:function(r,f,_){if(!r||r.length===0){f&&f([]);return}e.util.enlivenObjects(r,function(b){f&&f(b)},null,_)},_toDataURL:function(r,f){this.clone(function(_){f(_.toDataURL(r))})},_toDataURLWithMultiplier:function(r,f,_){this.clone(function(b){_(b.toDataURLWithMultiplier(r,f))})},clone:function(r,f){var _=JSON.stringify(this.toJSON(f));this.cloneWithoutData(function(b){b.loadFromJSON(_,function(){r&&r(b)})})},cloneWithoutData:function(r){var f=e.util.createCanvasElement();f.width=this.width,f.height=this.height;var _=new e.Canvas(f);this.backgroundImage?(_.setBackgroundImage(this.backgroundImage.src,function(){_.renderAll(),r&&r(_)}),_.backgroundImageOpacity=this.backgroundImageOpacity,_.backgroundImageStretch=this.backgroundImageStretch):r&&r(_)}}),function(r){var f=r.fabric||(r.fabric={}),_=f.util.object.extend,b=f.util.object.clone,v=f.util.toFixed,w=f.util.string.capitalize,x=f.util.degreesToRadians,C=!f.isLikelyNode,T=2;f.Object||(f.Object=f.util.createClass(f.CommonMethods,{type:"object",originX:"left",originY:"top",top:0,left:0,width:0,height:0,scaleX:1,scaleY:1,flipX:!1,flipY:!1,opacity:1,angle:0,skewX:0,skewY:0,cornerSize:13,touchCornerSize:24,transparentCorners:!0,hoverCursor:null,moveCursor:null,padding:0,borderColor:"rgb(178,204,255)",borderDashArray:null,cornerColor:"rgb(178,204,255)",cornerStrokeColor:null,cornerStyle:"rect",cornerDashArray:null,centeredScaling:!1,centeredRotation:!0,fill:"rgb(0,0,0)",fillRule:"nonzero",globalCompositeOperation:"source-over",backgroundColor:"",selectionBackgroundColor:"",stroke:null,strokeWidth:1,strokeDashArray:null,strokeDashOffset:0,strokeLineCap:"butt",strokeLineJoin:"miter",strokeMiterLimit:4,shadow:null,borderOpacityWhenMoving:.4,borderScaleFactor:1,minScaleLimit:0,selectable:!0,evented:!0,visible:!0,hasControls:!0,hasBorders:!0,perPixelTargetFind:!1,includeDefaultValues:!0,lockMovementX:!1,lockMovementY:!1,lockRotation:!1,lockScalingX:!1,lockScalingY:!1,lockSkewingX:!1,lockSkewingY:!1,lockScalingFlip:!1,excludeFromExport:!1,objectCaching:C,statefullCache:!1,noScaleCache:!0,strokeUniform:!1,dirty:!0,__corner:0,paintFirst:"fill",activeOn:"down",stateProperties:"top left width height scaleX scaleY flipX flipY originX originY transformMatrix stroke strokeWidth strokeDashArray strokeLineCap strokeDashOffset strokeLineJoin strokeMiterLimit angle opacity fill globalCompositeOperation shadow visible backgroundColor skewX skewY fillRule paintFirst clipPath strokeUniform".split(" "),cacheProperties:"fill stroke strokeWidth strokeDashArray width height paintFirst strokeUniform strokeLineCap strokeDashOffset strokeLineJoin strokeMiterLimit backgroundColor clipPath".split(" "),colorProperties:"fill stroke backgroundColor".split(" "),clipPath:void 0,inverted:!1,absolutePositioned:!1,initialize:function(S){S&&this.setOptions(S)},_createCacheCanvas:function(){this._cacheProperties={},this._cacheCanvas=f.util.createCanvasElement(),this._cacheContext=this._cacheCanvas.getContext("2d"),this._updateCacheCanvas(),this.dirty=!0},_limitCacheSize:function(S){var M=f.perfLimitSizeTotal,O=S.width,V=S.height,X=f.maxCacheSideLimit,Z=f.minCacheSideLimit;if(O<=X&&V<=X&&O*V<=M)return O<Z&&(S.width=Z),V<Z&&(S.height=Z),S;var te=O/V,J=f.util.limitDimsByArea(te,M),ie=f.util.capValue,Ee=ie(Z,J.x,X),Pe=ie(Z,J.y,X);return O>Ee&&(S.zoomX/=O/Ee,S.width=Ee,S.capped=!0),V>Pe&&(S.zoomY/=V/Pe,S.height=Pe,S.capped=!0),S},_getCacheCanvasDimensions:function(){var S=this.getTotalObjectScaling(),M=this._getTransformedDimensions(0,0),O=M.x*S.scaleX/this.scaleX,V=M.y*S.scaleY/this.scaleY;return{width:O+T,height:V+T,zoomX:S.scaleX,zoomY:S.scaleY,x:O,y:V}},_updateCacheCanvas:function(){var S=this.canvas;if(this.noScaleCache&&S&&S._currentTransform){var M=S._currentTransform.target,O=S._currentTransform.action;if(this===M&&O.slice&&O.slice(0,5)==="scale")return!1}var V=this._cacheCanvas,X=this._limitCacheSize(this._getCacheCanvasDimensions()),Z=f.minCacheSideLimit,te=X.width,J=X.height,ie,Ee,Pe=X.zoomX,de=X.zoomY,Te=te!==this.cacheWidth||J!==this.cacheHeight,ve=this.zoomX!==Pe||this.zoomY!==de,_e=Te||ve,ot=0,it=0,It=!1;if(Te){var Xe=this._cacheCanvas.width,we=this._cacheCanvas.height,Ce=te>Xe||J>we,Re=(te<Xe*.9||J<we*.9)&&Xe>Z&&we>Z;It=Ce||Re,Ce&&!X.capped&&(te>Z||J>Z)&&(ot=te*.1,it=J*.1)}return this instanceof f.Text&&this.path&&(_e=!0,It=!0,ot+=this.getHeightOfLine(0)*this.zoomX,it+=this.getHeightOfLine(0)*this.zoomY),_e?(It?(V.width=Math.ceil(te+ot),V.height=Math.ceil(J+it)):(this._cacheContext.setTransform(1,0,0,1,0,0),this._cacheContext.clearRect(0,0,V.width,V.height)),ie=X.x/2,Ee=X.y/2,this.cacheTranslationX=Math.round(V.width/2-ie)+ie,this.cacheTranslationY=Math.round(V.height/2-Ee)+Ee,this.cacheWidth=te,this.cacheHeight=J,this._cacheContext.translate(this.cacheTranslationX,this.cacheTranslationY),this._cacheContext.scale(Pe,de),this.zoomX=Pe,this.zoomY=de,!0):!1},setOptions:function(S){this._setOptions(S),this._initGradient(S.fill,"fill"),this._initGradient(S.stroke,"stroke"),this._initPattern(S.fill,"fill"),this._initPattern(S.stroke,"stroke")},transform:function(S){var M=this.group&&!this.group._transformDone||this.group&&this.canvas&&S===this.canvas.contextTop,O=this.calcTransformMatrix(!M);S.transform(O[0],O[1],O[2],O[3],O[4],O[5])},toObject:function(S){var M=f.Object.NUM_FRACTION_DIGITS,O={type:this.type,version:f.version,originX:this.originX,originY:this.originY,left:v(this.left,M),top:v(this.top,M),width:v(this.width,M),height:v(this.height,M),fill:this.fill&&this.fill.toObject?this.fill.toObject():this.fill,stroke:this.stroke&&this.stroke.toObject?this.stroke.toObject():this.stroke,strokeWidth:v(this.strokeWidth,M),strokeDashArray:this.strokeDashArray?this.strokeDashArray.concat():this.strokeDashArray,strokeLineCap:this.strokeLineCap,strokeDashOffset:this.strokeDashOffset,strokeLineJoin:this.strokeLineJoin,strokeUniform:this.strokeUniform,strokeMiterLimit:v(this.strokeMiterLimit,M),scaleX:v(this.scaleX,M),scaleY:v(this.scaleY,M),angle:v(this.angle,M),flipX:this.flipX,flipY:this.flipY,opacity:v(this.opacity,M),shadow:this.shadow&&this.shadow.toObject?this.shadow.toObject():this.shadow,visible:this.visible,backgroundColor:this.backgroundColor,fillRule:this.fillRule,paintFirst:this.paintFirst,globalCompositeOperation:this.globalCompositeOperation,skewX:v(this.skewX,M),skewY:v(this.skewY,M)};return this.clipPath&&!this.clipPath.excludeFromExport&&(O.clipPath=this.clipPath.toObject(S),O.clipPath.inverted=this.clipPath.inverted,O.clipPath.absolutePositioned=this.clipPath.absolutePositioned),f.util.populateWithProperties(this,O,S),this.includeDefaultValues||(O=this._removeDefaultValues(O)),O},toDatalessObject:function(S){return this.toObject(S)},_removeDefaultValues:function(S){var M=f.util.getKlass(S.type).prototype,O=M.stateProperties;return O.forEach(function(V){V==="left"||V==="top"||(S[V]===M[V]&&delete S[V],Array.isArray(S[V])&&Array.isArray(M[V])&&S[V].length===0&&M[V].length===0&&delete S[V])}),S},toString:function(){return"#<fabric."+w(this.type)+">"},getObjectScaling:function(){if(!this.group)return{scaleX:this.scaleX,scaleY:this.scaleY};var S=f.util.qrDecompose(this.calcTransformMatrix());return{scaleX:Math.abs(S.scaleX),scaleY:Math.abs(S.scaleY)}},getTotalObjectScaling:function(){var S=this.getObjectScaling(),M=S.scaleX,O=S.scaleY;if(this.canvas){var V=this.canvas.getZoom(),X=this.canvas.getRetinaScaling();M*=V*X,O*=V*X}return{scaleX:M,scaleY:O}},getObjectOpacity:function(){var S=this.opacity;return this.group&&(S*=this.group.getObjectOpacity()),S},_set:function(S,M){var O=S==="scaleX"||S==="scaleY",V=this[S]!==M,X=!1;return O&&(M=this._constrainScale(M)),S==="scaleX"&&M<0?(this.flipX=!this.flipX,M*=-1):S==="scaleY"&&M<0?(this.flipY=!this.flipY,M*=-1):S==="shadow"&&M&&!(M instanceof f.Shadow)?M=new f.Shadow(M):S==="dirty"&&this.group&&this.group.set("dirty",M),this[S]=M,V&&(X=this.group&&this.group.isOnACache(),this.cacheProperties.indexOf(S)>-1?(this.dirty=!0,X&&this.group.set("dirty",!0)):X&&this.stateProperties.indexOf(S)>-1&&this.group.set("dirty",!0)),this},setOnGroup:function(){},getViewportTransform:function(){return this.canvas&&this.canvas.viewportTransform?this.canvas.viewportTransform:f.iMatrix.concat()},isNotVisible:function(){return this.opacity===0||!this.width&&!this.height&&this.strokeWidth===0||!this.visible},render:function(S){this.isNotVisible()||this.canvas&&this.canvas.skipOffscreen&&!this.group&&!this.isOnScreen()||(S.save(),this._setupCompositeOperation(S),this.drawSelectionBackground(S),this.transform(S),this._setOpacity(S),this._setShadow(S,this),this.shouldCache()?(this.renderCache(),this.drawCacheOnCanvas(S)):(this._removeCacheCanvas(),this.dirty=!1,this.drawObject(S),this.objectCaching&&this.statefullCache&&this.saveState({propertySet:"cacheProperties"})),S.restore())},renderCache:function(S){S=S||{},(!this._cacheCanvas||!this._cacheContext)&&this._createCacheCanvas(),this.isCacheDirty()&&(this.statefullCache&&this.saveState({propertySet:"cacheProperties"}),this.drawObject(this._cacheContext,S.forClipping),this.dirty=!1)},_removeCacheCanvas:function(){this._cacheCanvas=null,this._cacheContext=null,this.cacheWidth=0,this.cacheHeight=0},hasStroke:function(){return this.stroke&&this.stroke!=="transparent"&&this.strokeWidth!==0},hasFill:function(){return this.fill&&this.fill!=="transparent"},needsItsOwnCache:function(){return!!(this.paintFirst==="stroke"&&this.hasFill()&&this.hasStroke()&&typeof this.shadow=="object"||this.clipPath)},shouldCache:function(){return this.ownCaching=this.needsItsOwnCache()||this.objectCaching&&(!this.group||!this.group.isOnACache()),this.ownCaching},willDrawShadow:function(){return!!this.shadow&&(this.shadow.offsetX!==0||this.shadow.offsetY!==0)},drawClipPathOnCache:function(S,M){if(S.save(),M.inverted?S.globalCompositeOperation="destination-out":S.globalCompositeOperation="destination-in",M.absolutePositioned){var O=f.util.invertTransform(this.calcTransformMatrix());S.transform(O[0],O[1],O[2],O[3],O[4],O[5])}M.transform(S),S.scale(1/M.zoomX,1/M.zoomY),S.drawImage(M._cacheCanvas,-M.cacheTranslationX,-M.cacheTranslationY),S.restore()},drawObject:function(S,M){var O=this.fill,V=this.stroke;M?(this.fill="black",this.stroke="",this._setClippingProperties(S)):this._renderBackground(S),this._render(S),this._drawClipPath(S,this.clipPath),this.fill=O,this.stroke=V},_drawClipPath:function(S,M){!M||(M.canvas=this.canvas,M.shouldCache(),M._transformDone=!0,M.renderCache({forClipping:!0}),this.drawClipPathOnCache(S,M))},drawCacheOnCanvas:function(S){S.scale(1/this.zoomX,1/this.zoomY),S.drawImage(this._cacheCanvas,-this.cacheTranslationX,-this.cacheTranslationY)},isCacheDirty:function(S){if(this.isNotVisible())return!1;if(this._cacheCanvas&&this._cacheContext&&!S&&this._updateCacheCanvas())return!0;if(this.dirty||this.clipPath&&this.clipPath.absolutePositioned||this.statefullCache&&this.hasStateChanged("cacheProperties")){if(this._cacheCanvas&&this._cacheContext&&!S){var M=this.cacheWidth/this.zoomX,O=this.cacheHeight/this.zoomY;this._cacheContext.clearRect(-M/2,-O/2,M,O)}return!0}return!1},_renderBackground:function(S){if(!!this.backgroundColor){var M=this._getNonTransformedDimensions();S.fillStyle=this.backgroundColor,S.fillRect(-M.x/2,-M.y/2,M.x,M.y),this._removeShadow(S)}},_setOpacity:function(S){this.group&&!this.group._transformDone?S.globalAlpha=this.getObjectOpacity():S.globalAlpha*=this.opacity},_setStrokeStyles:function(S,M){var O=M.stroke;O&&(S.lineWidth=M.strokeWidth,S.lineCap=M.strokeLineCap,S.lineDashOffset=M.strokeDashOffset,S.lineJoin=M.strokeLineJoin,S.miterLimit=M.strokeMiterLimit,O.toLive?O.gradientUnits==="percentage"||O.gradientTransform||O.patternTransform?this._applyPatternForTransformedGradient(S,O):(S.strokeStyle=O.toLive(S,this),this._applyPatternGradientTransform(S,O)):S.strokeStyle=M.stroke)},_setFillStyles:function(S,M){var O=M.fill;O&&(O.toLive?(S.fillStyle=O.toLive(S,this),this._applyPatternGradientTransform(S,M.fill)):S.fillStyle=O)},_setClippingProperties:function(S){S.globalAlpha=1,S.strokeStyle="transparent",S.fillStyle="#000000"},_setLineDash:function(S,M){!M||M.length===0||(1&M.length&&M.push.apply(M,M),S.setLineDash(M))},_renderControls:function(S,M){var O=this.getViewportTransform(),V=this.calcTransformMatrix(),X,Z,te;M=M||{},Z=typeof M.hasBorders<"u"?M.hasBorders:this.hasBorders,te=typeof M.hasControls<"u"?M.hasControls:this.hasControls,V=f.util.multiplyTransformMatrices(O,V),X=f.util.qrDecompose(V),S.save(),S.translate(X.translateX,X.translateY),S.lineWidth=1*this.borderScaleFactor,this.group||(S.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1),this.flipX&&(X.angle-=180),S.rotate(x(this.group?X.angle:this.angle)),M.forActiveSelection||this.group?Z&&this.drawBordersInGroup(S,X,M):Z&&this.drawBorders(S,M),te&&this.drawControls(S,M),S.restore()},_setShadow:function(S){if(!!this.shadow){var M=this.shadow,O=this.canvas,V,X=O&&O.viewportTransform[0]||1,Z=O&&O.viewportTransform[3]||1;M.nonScaling?V={scaleX:1,scaleY:1}:V=this.getObjectScaling(),O&&O._isRetinaScaling()&&(X*=f.devicePixelRatio,Z*=f.devicePixelRatio),S.shadowColor=M.color,S.shadowBlur=M.blur*f.browserShadowBlurConstant*(X+Z)*(V.scaleX+V.scaleY)/4,S.shadowOffsetX=M.offsetX*X*V.scaleX,S.shadowOffsetY=M.offsetY*Z*V.scaleY}},_removeShadow:function(S){!this.shadow||(S.shadowColor="",S.shadowBlur=S.shadowOffsetX=S.shadowOffsetY=0)},_applyPatternGradientTransform:function(S,M){if(!M||!M.toLive)return{offsetX:0,offsetY:0};var O=M.gradientTransform||M.patternTransform,V=-this.width/2+M.offsetX||0,X=-this.height/2+M.offsetY||0;return M.gradientUnits==="percentage"?S.transform(this.width,0,0,this.height,V,X):S.transform(1,0,0,1,V,X),O&&S.transform(O[0],O[1],O[2],O[3],O[4],O[5]),{offsetX:V,offsetY:X}},_renderPaintInOrder:function(S){this.paintFirst==="stroke"?(this._renderStroke(S),this._renderFill(S)):(this._renderFill(S),this._renderStroke(S))},_render:function(){},_renderFill:function(S){!this.fill||(S.save(),this._setFillStyles(S,this),this.fillRule==="evenodd"?S.fill("evenodd"):S.fill(),S.restore())},_renderStroke:function(S){if(!(!this.stroke||this.strokeWidth===0)){if(this.shadow&&!this.shadow.affectStroke&&this._removeShadow(S),S.save(),this.strokeUniform&&this.group){var M=this.getObjectScaling();S.scale(1/M.scaleX,1/M.scaleY)}else this.strokeUniform&&S.scale(1/this.scaleX,1/this.scaleY);this._setLineDash(S,this.strokeDashArray),this._setStrokeStyles(S,this),S.stroke(),S.restore()}},_applyPatternForTransformedGradient:function(S,M){var O=this._limitCacheSize(this._getCacheCanvasDimensions()),V=f.util.createCanvasElement(),X,Z=this.canvas.getRetinaScaling(),te=O.x/this.scaleX/Z,J=O.y/this.scaleY/Z;V.width=te,V.height=J,X=V.getContext("2d"),X.beginPath(),X.moveTo(0,0),X.lineTo(te,0),X.lineTo(te,J),X.lineTo(0,J),X.closePath(),X.translate(te/2,J/2),X.scale(O.zoomX/this.scaleX/Z,O.zoomY/this.scaleY/Z),this._applyPatternGradientTransform(X,M),X.fillStyle=M.toLive(S),X.fill(),S.translate(-this.width/2-this.strokeWidth/2,-this.height/2-this.strokeWidth/2),S.scale(Z*this.scaleX/O.zoomX,Z*this.scaleY/O.zoomY),S.strokeStyle=X.createPattern(V,"no-repeat")},_findCenterFromElement:function(){return{x:this.left+this.width/2,y:this.top+this.height/2}},_assignTransformMatrixProps:function(){if(this.transformMatrix){var S=f.util.qrDecompose(this.transformMatrix);this.flipX=!1,this.flipY=!1,this.set("scaleX",S.scaleX),this.set("scaleY",S.scaleY),this.angle=S.angle,this.skewX=S.skewX,this.skewY=0}},_removeTransformMatrix:function(S){var M=this._findCenterFromElement();this.transformMatrix&&(this._assignTransformMatrixProps(),M=f.util.transformPoint(M,this.transformMatrix)),this.transformMatrix=null,S&&(this.scaleX*=S.scaleX,this.scaleY*=S.scaleY,this.cropX=S.cropX,this.cropY=S.cropY,M.x+=S.offsetLeft,M.y+=S.offsetTop,this.width=S.width,this.height=S.height),this.setPositionByOrigin(M,"center","center")},clone:function(S,M){var O=this.toObject(M);this.constructor.fromObject?this.constructor.fromObject(O,S):f.Object._fromObject("Object",O,S)},cloneAsImage:function(S,M){var O=this.toCanvasElement(M);return S&&S(new f.Image(O)),this},toCanvasElement:function(S){S||(S={});var M=f.util,O=M.saveObjectTransform(this),V=this.group,X=this.shadow,Z=Math.abs,te=(S.multiplier||1)*(S.enableRetinaScaling?f.devicePixelRatio:1);delete this.group,S.withoutTransform&&M.resetObjectTransform(this),S.withoutShadow&&(this.shadow=null);var J=f.util.createCanvasElement(),ie=this.getBoundingRect(!0,!0),Ee=this.shadow,Pe,de={x:0,y:0},Te,ve,_e;Ee&&(Te=Ee.blur,Ee.nonScaling?Pe={scaleX:1,scaleY:1}:Pe=this.getObjectScaling(),de.x=2*Math.round(Z(Ee.offsetX)+Te)*Z(Pe.scaleX),de.y=2*Math.round(Z(Ee.offsetY)+Te)*Z(Pe.scaleY)),ve=ie.width+de.x,_e=ie.height+de.y,J.width=Math.ceil(ve),J.height=Math.ceil(_e);var ot=new f.StaticCanvas(J,{enableRetinaScaling:!1,renderOnAddRemove:!1,skipOffscreen:!1});S.format==="jpeg"&&(ot.backgroundColor="#fff"),this.setPositionByOrigin(new f.Point(ot.width/2,ot.height/2),"center","center");var it=this.canvas;ot.add(this);var It=ot.toCanvasElement(te||1,S);return this.shadow=X,this.set("canvas",it),V&&(this.group=V),this.set(O).setCoords(),ot._objects=[],ot.dispose(),ot=null,It},toDataURL:function(S){return S||(S={}),f.util.toDataURL(this.toCanvasElement(S),S.format||"png",S.quality||1)},isType:function(S){return arguments.length>1?Array.from(arguments).includes(this.type):this.type===S},complexity:function(){return 1},toJSON:function(S){return this.toObject(S)},rotate:function(S){var M=(this.originX!=="center"||this.originY!=="center")&&this.centeredRotation;return M&&this._setOriginToCenter(),this.set("angle",S),M&&this._resetOrigin(),this},centerH:function(){return this.canvas&&this.canvas.centerObjectH(this),this},viewportCenterH:function(){return this.canvas&&this.canvas.viewportCenterObjectH(this),this},centerV:function(){return this.canvas&&this.canvas.centerObjectV(this),this},viewportCenterV:function(){return this.canvas&&this.canvas.viewportCenterObjectV(this),this},center:function(){return this.canvas&&this.canvas.centerObject(this),this},viewportCenter:function(){return this.canvas&&this.canvas.viewportCenterObject(this),this},getLocalPointer:function(S,M){M=M||this.canvas.getPointer(S);var O=new f.Point(M.x,M.y),V=this._getLeftTopCoords();return this.angle&&(O=f.util.rotatePoint(O,V,x(-this.angle))),{x:O.x-V.x,y:O.y-V.y}},_setupCompositeOperation:function(S){this.globalCompositeOperation&&(S.globalCompositeOperation=this.globalCompositeOperation)},dispose:function(){f.runningAnimations&&f.runningAnimations.cancelByTarget(this)}}),f.util.createAccessors&&f.util.createAccessors(f.Object),_(f.Object.prototype,f.Observable),f.Object.NUM_FRACTION_DIGITS=2,f.Object.ENLIVEN_PROPS=["clipPath"],f.Object._fromObject=function(S,M,O,V){var X=f[S];M=b(M,!0),f.util.enlivenPatterns([M.fill,M.stroke],function(Z){typeof Z[0]<"u"&&(M.fill=Z[0]),typeof Z[1]<"u"&&(M.stroke=Z[1]),f.util.enlivenObjectEnlivables(M,M,function(){var te=V?new X(M[V],M):new X(M);O&&O(te)})})},f.Object.__uid=0)}(i),function(){var r=e.util.degreesToRadians,f={left:-.5,center:0,right:.5},_={top:-.5,center:0,bottom:.5};e.util.object.extend(e.Object.prototype,{translateToGivenOrigin:function(b,v,w,x,C){var T=b.x,S=b.y,M,O,V;return typeof v=="string"?v=f[v]:v-=.5,typeof x=="string"?x=f[x]:x-=.5,M=x-v,typeof w=="string"?w=_[w]:w-=.5,typeof C=="string"?C=_[C]:C-=.5,O=C-w,(M||O)&&(V=this._getTransformedDimensions(),T=b.x+M*V.x,S=b.y+O*V.y),new e.Point(T,S)},translateToCenterPoint:function(b,v,w){var x=this.translateToGivenOrigin(b,v,w,"center","center");return this.angle?e.util.rotatePoint(x,b,r(this.angle)):x},translateToOriginPoint:function(b,v,w){var x=this.translateToGivenOrigin(b,"center","center",v,w);return this.angle?e.util.rotatePoint(x,b,r(this.angle)):x},getCenterPoint:function(){var b=new e.Point(this.left,this.top);return this.translateToCenterPoint(b,this.originX,this.originY)},getPointByOrigin:function(b,v){var w=this.getCenterPoint();return this.translateToOriginPoint(w,b,v)},toLocalPoint:function(b,v,w){var x=this.getCenterPoint(),C,T;return typeof v<"u"&&typeof w<"u"?C=this.translateToGivenOrigin(x,"center","center",v,w):C=new e.Point(this.left,this.top),T=new e.Point(b.x,b.y),this.angle&&(T=e.util.rotatePoint(T,x,-r(this.angle))),T.subtractEquals(C)},setPositionByOrigin:function(b,v,w){var x=this.translateToCenterPoint(b,v,w),C=this.translateToOriginPoint(x,this.originX,this.originY);this.set("left",C.x),this.set("top",C.y)},adjustPosition:function(b){var v=r(this.angle),w=this.getScaledWidth(),x=e.util.cos(v)*w,C=e.util.sin(v)*w,T,S;typeof this.originX=="string"?T=f[this.originX]:T=this.originX-.5,typeof b=="string"?S=f[b]:S=b-.5,this.left+=x*(S-T),this.top+=C*(S-T),this.setCoords(),this.originX=b},_setOriginToCenter:function(){this._originalOriginX=this.originX,this._originalOriginY=this.originY;var b=this.getCenterPoint();this.originX="center",this.originY="center",this.left=b.x,this.top=b.y},_resetOrigin:function(){var b=this.translateToOriginPoint(this.getCenterPoint(),this._originalOriginX,this._originalOriginY);this.originX=this._originalOriginX,this.originY=this._originalOriginY,this.left=b.x,this.top=b.y,this._originalOriginX=null,this._originalOriginY=null},_getLeftTopCoords:function(){return this.translateToOriginPoint(this.getCenterPoint(),"left","top")}})}(),function(){function r(w){return[new e.Point(w.tl.x,w.tl.y),new e.Point(w.tr.x,w.tr.y),new e.Point(w.br.x,w.br.y),new e.Point(w.bl.x,w.bl.y)]}var f=e.util,_=f.degreesToRadians,b=f.multiplyTransformMatrices,v=f.transformPoint;f.object.extend(e.Object.prototype,{oCoords:null,aCoords:null,lineCoords:null,ownMatrixCache:null,matrixCache:null,controls:{},_getCoords:function(w,x){return x?w?this.calcACoords():this.calcLineCoords():((!this.aCoords||!this.lineCoords)&&this.setCoords(!0),w?this.aCoords:this.lineCoords)},getCoords:function(w,x){return r(this._getCoords(w,x))},intersectsWithRect:function(w,x,C,T){var S=this.getCoords(C,T),M=e.Intersection.intersectPolygonRectangle(S,w,x);return M.status==="Intersection"},intersectsWithObject:function(w,x,C){var T=e.Intersection.intersectPolygonPolygon(this.getCoords(x,C),w.getCoords(x,C));return T.status==="Intersection"||w.isContainedWithinObject(this,x,C)||this.isContainedWithinObject(w,x,C)},isContainedWithinObject:function(w,x,C){for(var T=this.getCoords(x,C),S=x?w.aCoords:w.lineCoords,M=0,O=w._getImageLines(S);M<4;M++)if(!w.containsPoint(T[M],O))return!1;return!0},isContainedWithinRect:function(w,x,C,T){var S=this.getBoundingRect(C,T);return S.left>=w.x&&S.left+S.width<=x.x&&S.top>=w.y&&S.top+S.height<=x.y},containsPoint:function(w,M,C,T){var S=this._getCoords(C,T),M=M||this._getImageLines(S),O=this._findCrossPoints(w,M);return O!==0&&O%2===1},isOnScreen:function(w){if(!this.canvas)return!1;var x=this.canvas.vptCoords.tl,C=this.canvas.vptCoords.br,T=this.getCoords(!0,w);return T.some(function(S){return S.x<=C.x&&S.x>=x.x&&S.y<=C.y&&S.y>=x.y})||this.intersectsWithRect(x,C,!0,w)?!0:this._containsCenterOfCanvas(x,C,w)},_containsCenterOfCanvas:function(w,x,C){var T={x:(w.x+x.x)/2,y:(w.y+x.y)/2};return!!this.containsPoint(T,null,!0,C)},isPartiallyOnScreen:function(w){if(!this.canvas)return!1;var x=this.canvas.vptCoords.tl,C=this.canvas.vptCoords.br;if(this.intersectsWithRect(x,C,!0,w))return!0;var T=this.getCoords(!0,w).every(function(S){return(S.x>=C.x||S.x<=x.x)&&(S.y>=C.y||S.y<=x.y)});return T&&this._containsCenterOfCanvas(x,C,w)},_getImageLines:function(w){var x={topline:{o:w.tl,d:w.tr},rightline:{o:w.tr,d:w.br},bottomline:{o:w.br,d:w.bl},leftline:{o:w.bl,d:w.tl}};return x},_findCrossPoints:function(w,x){var C,T,S,M,O,V=0,X;for(var Z in x)if(X=x[Z],!(X.o.y<w.y&&X.d.y<w.y)&&!(X.o.y>=w.y&&X.d.y>=w.y)&&(X.o.x===X.d.x&&X.o.x>=w.x?O=X.o.x:(C=0,T=(X.d.y-X.o.y)/(X.d.x-X.o.x),S=w.y-C*w.x,M=X.o.y-T*X.o.x,O=-(S-M)/(C-T)),O>=w.x&&(V+=1),V===2))break;return V},getBoundingRect:function(w,x){var C=this.getCoords(w,x);return f.makeBoundingBoxFromPoints(C)},getScaledWidth:function(){return this._getTransformedDimensions().x},getScaledHeight:function(){return this._getTransformedDimensions().y},_constrainScale:function(w){return Math.abs(w)<this.minScaleLimit?w<0?-this.minScaleLimit:this.minScaleLimit:w===0?1e-4:w},scale:function(w){return this._set("scaleX",w),this._set("scaleY",w),this.setCoords()},scaleToWidth:function(w,x){var C=this.getBoundingRect(x).width/this.getScaledWidth();return this.scale(w/this.width/C)},scaleToHeight:function(w,x){var C=this.getBoundingRect(x).height/this.getScaledHeight();return this.scale(w/this.height/C)},calcLineCoords:function(){var w=this.getViewportTransform(),x=this.padding,C=_(this.angle),T=f.cos(C),S=f.sin(C),M=T*x,O=S*x,V=M+O,X=M-O,Z=this.calcACoords(),te={tl:v(Z.tl,w),tr:v(Z.tr,w),bl:v(Z.bl,w),br:v(Z.br,w)};return x&&(te.tl.x-=X,te.tl.y-=V,te.tr.x+=V,te.tr.y-=X,te.bl.x-=V,te.bl.y+=X,te.br.x+=X,te.br.y+=V),te},calcOCoords:function(){var w=this._calcRotateMatrix(),x=this._calcTranslateMatrix(),C=this.getViewportTransform(),T=b(C,x),S=b(T,w),S=b(S,[1/C[0],0,0,1/C[3],0,0]),M=this._calculateCurrentDimensions(),O={};return this.forEachControl(function(V,X,Z){O[X]=V.positionHandler(M,S,Z)}),O},calcACoords:function(){var w=this._calcRotateMatrix(),x=this._calcTranslateMatrix(),C=b(x,w),T=this._getTransformedDimensions(),S=T.x/2,M=T.y/2;return{tl:v({x:-S,y:-M},C),tr:v({x:S,y:-M},C),bl:v({x:-S,y:M},C),br:v({x:S,y:M},C)}},setCoords:function(w){return this.aCoords=this.calcACoords(),this.lineCoords=this.group?this.aCoords:this.calcLineCoords(),w?this:(this.oCoords=this.calcOCoords(),this._setCornerCoords&&this._setCornerCoords(),this)},_calcRotateMatrix:function(){return f.calcRotateMatrix(this)},_calcTranslateMatrix:function(){var w=this.getCenterPoint();return[1,0,0,1,w.x,w.y]},transformMatrixKey:function(w){var x="_",C="";return!w&&this.group&&(C=this.group.transformMatrixKey(w)+x),C+this.top+x+this.left+x+this.scaleX+x+this.scaleY+x+this.skewX+x+this.skewY+x+this.angle+x+this.originX+x+this.originY+x+this.width+x+this.height+x+this.strokeWidth+this.flipX+this.flipY},calcTransformMatrix:function(w){var x=this.calcOwnMatrix();if(w||!this.group)return x;var C=this.transformMatrixKey(w),T=this.matrixCache||(this.matrixCache={});return T.key===C?T.value:(this.group&&(x=b(this.group.calcTransformMatrix(!1),x)),T.key=C,T.value=x,x)},calcOwnMatrix:function(){var w=this.transformMatrixKey(!0),x=this.ownMatrixCache||(this.ownMatrixCache={});if(x.key===w)return x.value;var C=this._calcTranslateMatrix(),T={angle:this.angle,translateX:C[4],translateY:C[5],scaleX:this.scaleX,scaleY:this.scaleY,skewX:this.skewX,skewY:this.skewY,flipX:this.flipX,flipY:this.flipY};return x.key=w,x.value=f.composeMatrix(T),x.value},_getNonTransformedDimensions:function(){var w=this.strokeWidth,x=this.width+w,C=this.height+w;return{x,y:C}},_getTransformedDimensions:function(w,x){typeof w>"u"&&(w=this.skewX),typeof x>"u"&&(x=this.skewY);var C,T,S,M=w===0&&x===0;if(this.strokeUniform?(T=this.width,S=this.height):(C=this._getNonTransformedDimensions(),T=C.x,S=C.y),M)return this._finalizeDimensions(T*this.scaleX,S*this.scaleY);var O=f.sizeAfterTransform(T,S,{scaleX:this.scaleX,scaleY:this.scaleY,skewX:w,skewY:x});return this._finalizeDimensions(O.x,O.y)},_finalizeDimensions:function(w,x){return this.strokeUniform?{x:w+this.strokeWidth,y:x+this.strokeWidth}:{x:w,y:x}},_calculateCurrentDimensions:function(){var w=this.getViewportTransform(),x=this._getTransformedDimensions(),C=v(x,w,!0);return C.scalarAdd(2*this.padding)}})}(),e.util.object.extend(e.Object.prototype,{sendToBack:function(){return this.group?e.StaticCanvas.prototype.sendToBack.call(this.group,this):this.canvas&&this.canvas.sendToBack(this),this},bringToFront:function(){return this.group?e.StaticCanvas.prototype.bringToFront.call(this.group,this):this.canvas&&this.canvas.bringToFront(this),this},sendBackwards:function(r){return this.group?e.StaticCanvas.prototype.sendBackwards.call(this.group,this,r):this.canvas&&this.canvas.sendBackwards(this,r),this},bringForward:function(r){return this.group?e.StaticCanvas.prototype.bringForward.call(this.group,this,r):this.canvas&&this.canvas.bringForward(this,r),this},moveTo:function(r){return this.group&&this.group.type!=="activeSelection"?e.StaticCanvas.prototype.moveTo.call(this.group,this,r):this.canvas&&this.canvas.moveTo(this,r),this}}),function(){function r(_,b){if(b){if(b.toLive)return _+": url(#SVGID_"+b.id+"); ";var v=new e.Color(b),w=_+": "+v.toRgb()+"; ",x=v.getAlpha();return x!==1&&(w+=_+"-opacity: "+x.toString()+"; "),w}else return _+": none; "}var f=e.util.toFixed;e.util.object.extend(e.Object.prototype,{getSvgStyles:function(_){var b=this.fillRule?this.fillRule:"nonzero",v=this.strokeWidth?this.strokeWidth:"0",w=this.strokeDashArray?this.strokeDashArray.join(" "):"none",x=this.strokeDashOffset?this.strokeDashOffset:"0",C=this.strokeLineCap?this.strokeLineCap:"butt",T=this.strokeLineJoin?this.strokeLineJoin:"miter",S=this.strokeMiterLimit?this.strokeMiterLimit:"4",M=typeof this.opacity<"u"?this.opacity:"1",O=this.visible?"":" visibility: hidden;",V=_?"":this.getSvgFilter(),X=r("fill",this.fill),Z=r("stroke",this.stroke);return[Z,"stroke-width: ",v,"; ","stroke-dasharray: ",w,"; ","stroke-linecap: ",C,"; ","stroke-dashoffset: ",x,"; ","stroke-linejoin: ",T,"; ","stroke-miterlimit: ",S,"; ",X,"fill-rule: ",b,"; ","opacity: ",M,";",V,O].join("")},getSvgSpanStyles:function(_,b){var v="; ",x=_.fontFamily?"font-family: "+(_.fontFamily.indexOf("'")===-1&&_.fontFamily.indexOf('"')===-1?"'"+_.fontFamily+"'":_.fontFamily)+v:"",w=_.strokeWidth?"stroke-width: "+_.strokeWidth+v:"",x=x,C=_.fontSize?"font-size: "+_.fontSize+"px"+v:"",T=_.fontStyle?"font-style: "+_.fontStyle+v:"",S=_.fontWeight?"font-weight: "+_.fontWeight+v:"",M=_.fill?r("fill",_.fill):"",O=_.stroke?r("stroke",_.stroke):"",V=this.getSvgTextDecoration(_),X=_.deltaY?"baseline-shift: "+-_.deltaY+"; ":"";return V&&(V="text-decoration: "+V+v),[O,w,x,C,T,S,V,M,X,b?"white-space: pre; ":""].join("")},getSvgTextDecoration:function(_){return["overline","underline","line-through"].filter(function(b){return _[b.replace("-","")]}).join(" ")},getSvgFilter:function(){return this.shadow?"filter: url(#SVGID_"+this.shadow.id+");":""},getSvgCommons:function(){return[this.id?'id="'+this.id+'" ':"",this.clipPath?'clip-path="url(#'+this.clipPath.clipPathId+')" ':""].join("")},getSvgTransform:function(_,b){var v=_?this.calcTransformMatrix():this.calcOwnMatrix(),w='transform="'+e.util.matrixToSVG(v);return w+(b||"")+'" '},_setSVGBg:function(_){if(this.backgroundColor){var b=e.Object.NUM_FRACTION_DIGITS;_.push("		<rect ",this._getFillAttributes(this.backgroundColor),' x="',f(-this.width/2,b),'" y="',f(-this.height/2,b),'" width="',f(this.width,b),'" height="',f(this.height,b),`"></rect>
`)}},toSVG:function(_){return this._createBaseSVGMarkup(this._toSVG(_),{reviver:_})},toClipPathSVG:function(_){return"	"+this._createBaseClipPathSVGMarkup(this._toSVG(_),{reviver:_})},_createBaseClipPathSVGMarkup:function(_,b){b=b||{};var v=b.reviver,w=b.additionalTransform||"",x=[this.getSvgTransform(!0,w),this.getSvgCommons()].join(""),C=_.indexOf("COMMON_PARTS");return _[C]=x,v?v(_.join("")):_.join("")},_createBaseSVGMarkup:function(_,b){b=b||{};var v=b.noStyle,w=b.reviver,x=v?"":'style="'+this.getSvgStyles()+'" ',C=b.withShadow?'style="'+this.getSvgFilter()+'" ':"",T=this.clipPath,S=this.strokeUniform?'vector-effect="non-scaling-stroke" ':"",M=T&&T.absolutePositioned,O=this.stroke,V=this.fill,X=this.shadow,Z,te=[],J,ie=_.indexOf("COMMON_PARTS"),Ee=b.additionalTransform;return T&&(T.clipPathId="CLIPPATH_"+e.Object.__uid++,J='<clipPath id="'+T.clipPathId+`" >
`+T.toClipPathSVG(w)+`</clipPath>
`),M&&te.push("<g ",C,this.getSvgCommons(),` >
`),te.push("<g ",this.getSvgTransform(!1),M?"":C+this.getSvgCommons(),` >
`),Z=[x,S,v?"":this.addPaintOrder()," ",Ee?'transform="'+Ee+'" ':""].join(""),_[ie]=Z,V&&V.toLive&&te.push(V.toSVG(this)),O&&O.toLive&&te.push(O.toSVG(this)),X&&te.push(X.toSVG(this)),T&&te.push(J),te.push(_.join("")),te.push(`</g>
`),M&&te.push(`</g>
`),w?w(te.join("")):te.join("")},addPaintOrder:function(){return this.paintFirst!=="fill"?' paint-order="'+this.paintFirst+'" ':""}})}(),function(){var r=e.util.object.extend,f="stateProperties";function _(v,w,x){var C={},T=!0;x.forEach(function(S){C[S]=v[S]}),r(v[w],C,T)}function b(v,w,x){if(v===w)return!0;if(Array.isArray(v)){if(!Array.isArray(w)||v.length!==w.length)return!1;for(var C=0,T=v.length;C<T;C++)if(!b(v[C],w[C]))return!1;return!0}else if(v&&typeof v=="object"){var S=Object.keys(v),M;if(!w||typeof w!="object"||!x&&S.length!==Object.keys(w).length)return!1;for(var C=0,T=S.length;C<T;C++)if(M=S[C],!(M==="canvas"||M==="group")&&!b(v[M],w[M]))return!1;return!0}}e.util.object.extend(e.Object.prototype,{hasStateChanged:function(v){v=v||f;var w="_"+v;return Object.keys(this[w]).length<this[v].length?!0:!b(this[w],this,!0)},saveState:function(v){var w=v&&v.propertySet||f,x="_"+w;return this[x]?(_(this,x,this[w]),v&&v.stateProperties&&_(this,x,v.stateProperties),this):this.setupState(v)},setupState:function(v){v=v||{};var w=v.propertySet||f;return v.propertySet=w,this["_"+w]={},this.saveState(v),this}})}(),function(){var r=e.util.degreesToRadians;e.util.object.extend(e.Object.prototype,{_findTargetCorner:function(f,_){if(!this.hasControls||this.group||!this.canvas||this.canvas._activeObject!==this)return!1;var b=f.x,v=f.y,w,x,C=Object.keys(this.oCoords),T=C.length-1,S;for(this.__corner=0;T>=0;T--)if(S=C[T],!!this.isControlVisible(S)&&(x=this._getImageLines(_?this.oCoords[S].touchCorner:this.oCoords[S].corner),w=this._findCrossPoints({x:b,y:v},x),w!==0&&w%2===1))return this.__corner=S,S;return!1},forEachControl:function(f){for(var _ in this.controls)f(this.controls[_],_,this)},_setCornerCoords:function(){var f=this.oCoords;for(var _ in f){var b=this.controls[_];f[_].corner=b.calcCornerCoords(this.angle,this.cornerSize,f[_].x,f[_].y,!1),f[_].touchCorner=b.calcCornerCoords(this.angle,this.touchCornerSize,f[_].x,f[_].y,!0)}},drawSelectionBackground:function(f){if(!this.selectionBackgroundColor||this.canvas&&!this.canvas.interactive||this.canvas&&this.canvas._activeObject!==this)return this;f.save();var _=this.getCenterPoint(),b=this._calculateCurrentDimensions(),v=this.canvas.viewportTransform;return f.translate(_.x,_.y),f.scale(1/v[0],1/v[3]),f.rotate(r(this.angle)),f.fillStyle=this.selectionBackgroundColor,f.fillRect(-b.x/2,-b.y/2,b.x,b.y),f.restore(),this},drawBorders:function(f,_){_=_||{};var b=this._calculateCurrentDimensions(),v=this.borderScaleFactor,w=b.x+v,x=b.y+v,C=typeof _.hasControls<"u"?_.hasControls:this.hasControls,T=!1;return f.save(),f.strokeStyle=_.borderColor||this.borderColor,this._setLineDash(f,_.borderDashArray||this.borderDashArray),f.strokeRect(-w/2,-x/2,w,x),C&&(f.beginPath(),this.forEachControl(function(S,M,O){S.withConnection&&S.getVisibility(O,M)&&(T=!0,f.moveTo(S.x*w,S.y*x),f.lineTo(S.x*w+S.offsetX,S.y*x+S.offsetY))}),T&&f.stroke()),f.restore(),this},drawBordersInGroup:function(f,_,b){b=b||{};var v=e.util.sizeAfterTransform(this.width,this.height,_),w=this.strokeWidth,x=this.strokeUniform,C=this.borderScaleFactor,T=v.x+w*(x?this.canvas.getZoom():_.scaleX)+C,S=v.y+w*(x?this.canvas.getZoom():_.scaleY)+C;return f.save(),this._setLineDash(f,b.borderDashArray||this.borderDashArray),f.strokeStyle=b.borderColor||this.borderColor,f.strokeRect(-T/2,-S/2,T,S),f.restore(),this},drawControls:function(f,_){_=_||{},f.save();var b=this.canvas.getRetinaScaling(),v,w;return f.setTransform(b,0,0,b,0,0),f.strokeStyle=f.fillStyle=_.cornerColor||this.cornerColor,this.transparentCorners||(f.strokeStyle=_.cornerStrokeColor||this.cornerStrokeColor),this._setLineDash(f,_.cornerDashArray||this.cornerDashArray),this.setCoords(),this.group&&(v=this.group.calcTransformMatrix()),this.forEachControl(function(x,C,T){w=T.oCoords[C],x.getVisibility(T,C)&&(v&&(w=e.util.transformPoint(w,v)),x.render(f,w.x,w.y,_,T))}),f.restore(),this},isControlVisible:function(f){return this.controls[f]&&this.controls[f].getVisibility(this,f)},setControlVisible:function(f,_){return this._controlsVisibility||(this._controlsVisibility={}),this._controlsVisibility[f]=_,this},setControlsVisibility:function(f){f||(f={});for(var _ in f)this.setControlVisible(_,f[_]);return this},onDeselect:function(){},onSelect:function(){}})}(),e.util.object.extend(e.StaticCanvas.prototype,{FX_DURATION:500,fxCenterObjectH:function(r,f){f=f||{};var _=function(){},b=f.onComplete||_,v=f.onChange||_,w=this;return e.util.animate({target:this,startValue:r.left,endValue:this.getCenterPoint().x,duration:this.FX_DURATION,onChange:function(x){r.set("left",x),w.requestRenderAll(),v()},onComplete:function(){r.setCoords(),b()}})},fxCenterObjectV:function(r,f){f=f||{};var _=function(){},b=f.onComplete||_,v=f.onChange||_,w=this;return e.util.animate({target:this,startValue:r.top,endValue:this.getCenterPoint().y,duration:this.FX_DURATION,onChange:function(x){r.set("top",x),w.requestRenderAll(),v()},onComplete:function(){r.setCoords(),b()}})},fxRemove:function(r,f){f=f||{};var _=function(){},b=f.onComplete||_,v=f.onChange||_,w=this;return e.util.animate({target:this,startValue:r.opacity,endValue:0,duration:this.FX_DURATION,onChange:function(x){r.set("opacity",x),w.requestRenderAll(),v()},onComplete:function(){w.remove(r),b()}})}}),e.util.object.extend(e.Object.prototype,{animate:function(){if(arguments[0]&&typeof arguments[0]=="object"){var r=[],f,_,b=[];for(f in arguments[0])r.push(f);for(var v=0,w=r.length;v<w;v++)f=r[v],_=v!==w-1,b.push(this._animate(f,arguments[0][f],arguments[1],_));return b}else return this._animate.apply(this,arguments)},_animate:function(r,f,_,b){var v=this,w;f=f.toString(),_?_=e.util.object.clone(_):_={},~r.indexOf(".")&&(w=r.split("."));var x=v.colorProperties.indexOf(r)>-1||w&&v.colorProperties.indexOf(w[1])>-1,C=w?this.get(w[0])[w[1]]:this.get(r);"from"in _||(_.from=C),x||(~f.indexOf("=")?f=C+parseFloat(f.replace("=","")):f=parseFloat(f));var T={target:this,startValue:_.from,endValue:f,byValue:_.by,easing:_.easing,duration:_.duration,abort:_.abort&&function(S,M,O){return _.abort.call(v,S,M,O)},onChange:function(S,M,O){w?v[w[0]][w[1]]=S:v.set(r,S),!b&&_.onChange&&_.onChange(S,M,O)},onComplete:function(S,M,O){b||(v.setCoords(),_.onComplete&&_.onComplete(S,M,O))}};return x?e.util.animateColor(T.startValue,T.endValue,T.duration,T):e.util.animate(T)}}),function(r){var f=r.fabric||(r.fabric={}),_=f.util.object.extend,b=f.util.object.clone,v={x1:1,x2:1,y1:1,y2:1};if(f.Line){f.warn("fabric.Line is already defined");return}f.Line=f.util.createClass(f.Object,{type:"line",x1:0,y1:0,x2:0,y2:0,cacheProperties:f.Object.prototype.cacheProperties.concat("x1","x2","y1","y2"),initialize:function(x,C){x||(x=[0,0,0,0]),this.callSuper("initialize",C),this.set("x1",x[0]),this.set("y1",x[1]),this.set("x2",x[2]),this.set("y2",x[3]),this._setWidthHeight(C)},_setWidthHeight:function(x){x||(x={}),this.width=Math.abs(this.x2-this.x1),this.height=Math.abs(this.y2-this.y1),this.left="left"in x?x.left:this._getLeftToOriginX(),this.top="top"in x?x.top:this._getTopToOriginY()},_set:function(x,C){return this.callSuper("_set",x,C),typeof v[x]<"u"&&this._setWidthHeight(),this},_getLeftToOriginX:w({origin:"originX",axis1:"x1",axis2:"x2",dimension:"width"},{nearest:"left",center:"center",farthest:"right"}),_getTopToOriginY:w({origin:"originY",axis1:"y1",axis2:"y2",dimension:"height"},{nearest:"top",center:"center",farthest:"bottom"}),_render:function(x){x.beginPath();var C=this.calcLinePoints();x.moveTo(C.x1,C.y1),x.lineTo(C.x2,C.y2),x.lineWidth=this.strokeWidth;var T=x.strokeStyle;x.strokeStyle=this.stroke||x.fillStyle,this.stroke&&this._renderStroke(x),x.strokeStyle=T},_findCenterFromElement:function(){return{x:(this.x1+this.x2)/2,y:(this.y1+this.y2)/2}},toObject:function(x){return _(this.callSuper("toObject",x),this.calcLinePoints())},_getNonTransformedDimensions:function(){var x=this.callSuper("_getNonTransformedDimensions");return this.strokeLineCap==="butt"&&(this.width===0&&(x.y-=this.strokeWidth),this.height===0&&(x.x-=this.strokeWidth)),x},calcLinePoints:function(){var x=this.x1<=this.x2?-1:1,C=this.y1<=this.y2?-1:1,T=x*this.width*.5,S=C*this.height*.5,M=x*this.width*-.5,O=C*this.height*-.5;return{x1:T,x2:M,y1:S,y2:O}},_toSVG:function(){var x=this.calcLinePoints();return["<line ","COMMON_PARTS",'x1="',x.x1,'" y1="',x.y1,'" x2="',x.x2,'" y2="',x.y2,`" />
`]}}),f.Line.ATTRIBUTE_NAMES=f.SHARED_ATTRIBUTES.concat("x1 y1 x2 y2".split(" ")),f.Line.fromElement=function(x,C,T){T=T||{};var S=f.parseAttributes(x,f.Line.ATTRIBUTE_NAMES),M=[S.x1||0,S.y1||0,S.x2||0,S.y2||0];C(new f.Line(M,_(S,T)))},f.Line.fromObject=function(x,C){function T(M){delete M.points,C&&C(M)}var S=b(x,!0);S.points=[x.x1,x.y1,x.x2,x.y2],f.Object._fromObject("Line",S,T,"points")};function w(x,C){var T=x.origin,S=x.axis1,M=x.axis2,O=x.dimension,V=C.nearest,X=C.center,Z=C.farthest;return function(){switch(this.get(T)){case V:return Math.min(this.get(S),this.get(M));case X:return Math.min(this.get(S),this.get(M))+.5*this.get(O);case Z:return Math.max(this.get(S),this.get(M))}}}}(i),function(r){var f=r.fabric||(r.fabric={}),_=f.util.degreesToRadians;if(f.Circle){f.warn("fabric.Circle is already defined.");return}f.Circle=f.util.createClass(f.Object,{type:"circle",radius:0,startAngle:0,endAngle:360,cacheProperties:f.Object.prototype.cacheProperties.concat("radius","startAngle","endAngle"),_set:function(v,w){return this.callSuper("_set",v,w),v==="radius"&&this.setRadius(w),this},toObject:function(v){return this.callSuper("toObject",["radius","startAngle","endAngle"].concat(v))},_toSVG:function(){var v,w=0,x=0,C=(this.endAngle-this.startAngle)%360;if(C===0)v=["<circle ","COMMON_PARTS",'cx="'+w+'" cy="'+x+'" ','r="',this.radius,`" />
`];else{var T=_(this.startAngle),S=_(this.endAngle),M=this.radius,O=f.util.cos(T)*M,V=f.util.sin(T)*M,X=f.util.cos(S)*M,Z=f.util.sin(S)*M,te=C>180?"1":"0";v=['<path d="M '+O+" "+V," A "+M+" "+M," 0 ",+te+" 1"," "+X+" "+Z,'" ',"COMMON_PARTS",` />
`]}return v},_render:function(v){v.beginPath(),v.arc(0,0,this.radius,_(this.startAngle),_(this.endAngle),!1),this._renderPaintInOrder(v)},getRadiusX:function(){return this.get("radius")*this.get("scaleX")},getRadiusY:function(){return this.get("radius")*this.get("scaleY")},setRadius:function(v){return this.radius=v,this.set("width",v*2).set("height",v*2)}}),f.Circle.ATTRIBUTE_NAMES=f.SHARED_ATTRIBUTES.concat("cx cy r".split(" ")),f.Circle.fromElement=function(v,w){var x=f.parseAttributes(v,f.Circle.ATTRIBUTE_NAMES);if(!b(x))throw new Error("value of `r` attribute is required and can not be negative");x.left=(x.left||0)-x.radius,x.top=(x.top||0)-x.radius,w(new f.Circle(x))};function b(v){return"radius"in v&&v.radius>=0}f.Circle.fromObject=function(v,w){f.Object._fromObject("Circle",v,w)}}(i),function(r){var f=r.fabric||(r.fabric={});if(f.Triangle){f.warn("fabric.Triangle is already defined");return}f.Triangle=f.util.createClass(f.Object,{type:"triangle",width:100,height:100,_render:function(_){var b=this.width/2,v=this.height/2;_.beginPath(),_.moveTo(-b,v),_.lineTo(0,-v),_.lineTo(b,v),_.closePath(),this._renderPaintInOrder(_)},_toSVG:function(){var _=this.width/2,b=this.height/2,v=[-_+" "+b,"0 "+-b,_+" "+b].join(",");return["<polygon ","COMMON_PARTS",'points="',v,'" />']}}),f.Triangle.fromObject=function(_,b){return f.Object._fromObject("Triangle",_,b)}}(i),function(r){var f=r.fabric||(r.fabric={}),_=Math.PI*2;if(f.Ellipse){f.warn("fabric.Ellipse is already defined.");return}f.Ellipse=f.util.createClass(f.Object,{type:"ellipse",rx:0,ry:0,cacheProperties:f.Object.prototype.cacheProperties.concat("rx","ry"),initialize:function(b){this.callSuper("initialize",b),this.set("rx",b&&b.rx||0),this.set("ry",b&&b.ry||0)},_set:function(b,v){switch(this.callSuper("_set",b,v),b){case"rx":this.rx=v,this.set("width",v*2);break;case"ry":this.ry=v,this.set("height",v*2);break}return this},getRx:function(){return this.get("rx")*this.get("scaleX")},getRy:function(){return this.get("ry")*this.get("scaleY")},toObject:function(b){return this.callSuper("toObject",["rx","ry"].concat(b))},_toSVG:function(){return["<ellipse ","COMMON_PARTS",'cx="0" cy="0" ','rx="',this.rx,'" ry="',this.ry,`" />
`]},_render:function(b){b.beginPath(),b.save(),b.transform(1,0,0,this.ry/this.rx,0,0),b.arc(0,0,this.rx,0,_,!1),b.restore(),this._renderPaintInOrder(b)}}),f.Ellipse.ATTRIBUTE_NAMES=f.SHARED_ATTRIBUTES.concat("cx cy rx ry".split(" ")),f.Ellipse.fromElement=function(b,v){var w=f.parseAttributes(b,f.Ellipse.ATTRIBUTE_NAMES);w.left=(w.left||0)-w.rx,w.top=(w.top||0)-w.ry,v(new f.Ellipse(w))},f.Ellipse.fromObject=function(b,v){f.Object._fromObject("Ellipse",b,v)}}(i),function(r){var f=r.fabric||(r.fabric={}),_=f.util.object.extend;if(f.Rect){f.warn("fabric.Rect is already defined");return}f.Rect=f.util.createClass(f.Object,{stateProperties:f.Object.prototype.stateProperties.concat("rx","ry"),type:"rect",rx:0,ry:0,cacheProperties:f.Object.prototype.cacheProperties.concat("rx","ry"),initialize:function(b){this.callSuper("initialize",b),this._initRxRy()},_initRxRy:function(){this.rx&&!this.ry?this.ry=this.rx:this.ry&&!this.rx&&(this.rx=this.ry)},_render:function(b){var v=this.rx?Math.min(this.rx,this.width/2):0,w=this.ry?Math.min(this.ry,this.height/2):0,x=this.width,C=this.height,T=-this.width/2,S=-this.height/2,M=v!==0||w!==0,O=1-.5522847498;b.beginPath(),b.moveTo(T+v,S),b.lineTo(T+x-v,S),M&&b.bezierCurveTo(T+x-O*v,S,T+x,S+O*w,T+x,S+w),b.lineTo(T+x,S+C-w),M&&b.bezierCurveTo(T+x,S+C-O*w,T+x-O*v,S+C,T+x-v,S+C),b.lineTo(T+v,S+C),M&&b.bezierCurveTo(T+O*v,S+C,T,S+C-O*w,T,S+C-w),b.lineTo(T,S+w),M&&b.bezierCurveTo(T,S+O*w,T+O*v,S,T+v,S),b.closePath(),this._renderPaintInOrder(b)},toObject:function(b){return this.callSuper("toObject",["rx","ry"].concat(b))},_toSVG:function(){var b=-this.width/2,v=-this.height/2;return["<rect ","COMMON_PARTS",'x="',b,'" y="',v,'" rx="',this.rx,'" ry="',this.ry,'" width="',this.width,'" height="',this.height,`" />
`]}}),f.Rect.ATTRIBUTE_NAMES=f.SHARED_ATTRIBUTES.concat("x y rx ry width height".split(" ")),f.Rect.fromElement=function(b,v,w){if(!b)return v(null);w=w||{};var x=f.parseAttributes(b,f.Rect.ATTRIBUTE_NAMES);x.left=x.left||0,x.top=x.top||0,x.height=x.height||0,x.width=x.width||0;var C=new f.Rect(_(w?f.util.object.clone(w):{},x));C.visible=C.visible&&C.width>0&&C.height>0,v(C)},f.Rect.fromObject=function(b,v){return f.Object._fromObject("Rect",b,v)}}(i),function(r){var f=r.fabric||(r.fabric={}),_=f.util.object.extend,b=f.util.array.min,v=f.util.array.max,w=f.util.toFixed,x=f.util.projectStrokeOnPoints;if(f.Polyline){f.warn("fabric.Polyline is already defined");return}f.Polyline=f.util.createClass(f.Object,{type:"polyline",points:null,exactBoundingBox:!1,cacheProperties:f.Object.prototype.cacheProperties.concat("points"),initialize:function(C,T){T=T||{},this.points=C||[],this.callSuper("initialize",T),this._setPositionDimensions(T)},_projectStrokeOnPoints:function(){return x(this.points,this,!0)},_setPositionDimensions:function(C){var T=this._calcDimensions(C),S,M=this.exactBoundingBox?this.strokeWidth:0;this.width=T.width-M,this.height=T.height-M,C.fromSVG||(S=this.translateToGivenOrigin({x:T.left-this.strokeWidth/2+M/2,y:T.top-this.strokeWidth/2+M/2},"left","top",this.originX,this.originY)),typeof C.left>"u"&&(this.left=C.fromSVG?T.left:S.x),typeof C.top>"u"&&(this.top=C.fromSVG?T.top:S.y),this.pathOffset={x:T.left+this.width/2+M/2,y:T.top+this.height/2+M/2}},_calcDimensions:function(){var C=this.exactBoundingBox?this._projectStrokeOnPoints():this.points,T=b(C,"x")||0,S=b(C,"y")||0,M=v(C,"x")||0,O=v(C,"y")||0,V=M-T,X=O-S;return{left:T,top:S,width:V,height:X}},toObject:function(C){return _(this.callSuper("toObject",C),{points:this.points.concat()})},_toSVG:function(){for(var C=[],T=this.pathOffset.x,S=this.pathOffset.y,M=f.Object.NUM_FRACTION_DIGITS,O=0,V=this.points.length;O<V;O++)C.push(w(this.points[O].x-T,M),",",w(this.points[O].y-S,M)," ");return["<"+this.type+" ","COMMON_PARTS",'points="',C.join(""),`" />
`]},commonRender:function(C){var T,S=this.points.length,M=this.pathOffset.x,O=this.pathOffset.y;if(!S||isNaN(this.points[S-1].y))return!1;C.beginPath(),C.moveTo(this.points[0].x-M,this.points[0].y-O);for(var V=0;V<S;V++)T=this.points[V],C.lineTo(T.x-M,T.y-O);return!0},_render:function(C){!this.commonRender(C)||this._renderPaintInOrder(C)},complexity:function(){return this.get("points").length}}),f.Polyline.ATTRIBUTE_NAMES=f.SHARED_ATTRIBUTES.concat(),f.Polyline.fromElementGenerator=function(C){return function(T,S,M){if(!T)return S(null);M||(M={});var O=f.parsePointsAttribute(T.getAttribute("points")),V=f.parseAttributes(T,f[C].ATTRIBUTE_NAMES);V.fromSVG=!0,S(new f[C](O,_(V,M)))}},f.Polyline.fromElement=f.Polyline.fromElementGenerator("Polyline"),f.Polyline.fromObject=function(C,T){return f.Object._fromObject("Polyline",C,T,"points")}}(i),function(r){var f=r.fabric||(r.fabric={}),_=f.util.projectStrokeOnPoints;if(f.Polygon){f.warn("fabric.Polygon is already defined");return}f.Polygon=f.util.createClass(f.Polyline,{type:"polygon",_projectStrokeOnPoints:function(){return _(this.points,this)},_render:function(b){!this.commonRender(b)||(b.closePath(),this._renderPaintInOrder(b))}}),f.Polygon.ATTRIBUTE_NAMES=f.SHARED_ATTRIBUTES.concat(),f.Polygon.fromElement=f.Polyline.fromElementGenerator("Polygon"),f.Polygon.fromObject=function(b,v){f.Object._fromObject("Polygon",b,v,"points")}}(i),function(r){var f=r.fabric||(r.fabric={}),_=f.util.array.min,b=f.util.array.max,v=f.util.object.extend,w=f.util.object.clone,x=f.util.toFixed;if(f.Path){f.warn("fabric.Path is already defined");return}f.Path=f.util.createClass(f.Object,{type:"path",path:null,cacheProperties:f.Object.prototype.cacheProperties.concat("path","fillRule"),stateProperties:f.Object.prototype.stateProperties.concat("path"),initialize:function(C,T){T=w(T||{}),delete T.path,this.callSuper("initialize",T),this._setPath(C||[],T)},_setPath:function(C,T){this.path=f.util.makePathSimpler(Array.isArray(C)?C:f.util.parsePath(C)),f.Polyline.prototype._setPositionDimensions.call(this,T||{})},_renderPathCommands:function(C){var T,S=0,M=0,O=0,V=0,X=0,Z=0,te=-this.pathOffset.x,J=-this.pathOffset.y;C.beginPath();for(var ie=0,Ee=this.path.length;ie<Ee;++ie)switch(T=this.path[ie],T[0]){case"L":O=T[1],V=T[2],C.lineTo(O+te,V+J);break;case"M":O=T[1],V=T[2],S=O,M=V,C.moveTo(O+te,V+J);break;case"C":O=T[5],V=T[6],X=T[3],Z=T[4],C.bezierCurveTo(T[1]+te,T[2]+J,X+te,Z+J,O+te,V+J);break;case"Q":C.quadraticCurveTo(T[1]+te,T[2]+J,T[3]+te,T[4]+J),O=T[3],V=T[4],X=T[1],Z=T[2];break;case"z":case"Z":O=S,V=M,C.closePath();break}},_render:function(C){this._renderPathCommands(C),this._renderPaintInOrder(C)},toString:function(){return"#<fabric.Path ("+this.complexity()+'): { "top": '+this.top+', "left": '+this.left+" }>"},toObject:function(C){return v(this.callSuper("toObject",C),{path:this.path.map(function(T){return T.slice()})})},toDatalessObject:function(C){var T=this.toObject(["sourcePath"].concat(C));return T.sourcePath&&delete T.path,T},_toSVG:function(){var C=f.util.joinPath(this.path);return["<path ","COMMON_PARTS",'d="',C,'" stroke-linecap="round" ',`/>
`]},_getOffsetTransform:function(){var C=f.Object.NUM_FRACTION_DIGITS;return" translate("+x(-this.pathOffset.x,C)+", "+x(-this.pathOffset.y,C)+")"},toClipPathSVG:function(C){var T=this._getOffsetTransform();return"	"+this._createBaseClipPathSVGMarkup(this._toSVG(),{reviver:C,additionalTransform:T})},toSVG:function(C){var T=this._getOffsetTransform();return this._createBaseSVGMarkup(this._toSVG(),{reviver:C,additionalTransform:T})},complexity:function(){return this.path.length},_calcDimensions:function(){for(var C=[],T=[],S,M=0,O=0,V=0,X=0,Z,te=0,J=this.path.length;te<J;++te){switch(S=this.path[te],S[0]){case"L":V=S[1],X=S[2],Z=[];break;case"M":V=S[1],X=S[2],M=V,O=X,Z=[];break;case"C":Z=f.util.getBoundsOfCurve(V,X,S[1],S[2],S[3],S[4],S[5],S[6]),V=S[5],X=S[6];break;case"Q":Z=f.util.getBoundsOfCurve(V,X,S[1],S[2],S[1],S[2],S[3],S[4]),V=S[3],X=S[4];break;case"z":case"Z":V=M,X=O;break}Z.forEach(function(_e){C.push(_e.x),T.push(_e.y)}),C.push(V),T.push(X)}var ie=_(C)||0,Ee=_(T)||0,Pe=b(C)||0,de=b(T)||0,Te=Pe-ie,ve=de-Ee;return{left:ie,top:Ee,width:Te,height:ve}}}),f.Path.fromObject=function(C,T){if(typeof C.sourcePath=="string"){var S=C.sourcePath;f.loadSVGFromURL(S,function(M){var O=M[0];O.setOptions(C),C.clipPath?f.util.enlivenObjects([C.clipPath],function(V){O.clipPath=V[0],T&&T(O)}):T&&T(O)})}else f.Object._fromObject("Path",C,T,"path")},f.Path.ATTRIBUTE_NAMES=f.SHARED_ATTRIBUTES.concat(["d"]),f.Path.fromElement=function(C,T,S){var M=f.parseAttributes(C,f.Path.ATTRIBUTE_NAMES);M.fromSVG=!0,T(new f.Path(M.d,v(M,S)))}}(i),function(r){var f=r.fabric||(r.fabric={}),_=f.util.array.min,b=f.util.array.max;f.Group||(f.Group=f.util.createClass(f.Object,f.Collection,{type:"group",strokeWidth:0,subTargetCheck:!1,cacheProperties:[],useSetOnGroup:!1,initialize:function(v,w,x){w=w||{},this._objects=[],x&&this.callSuper("initialize",w),this._objects=v||[];for(var C=this._objects.length;C--;)this._objects[C].group=this;if(x)this._updateObjectsACoords();else{var T=w&&w.centerPoint;w.originX!==void 0&&(this.originX=w.originX),w.originY!==void 0&&(this.originY=w.originY),T||this._calcBounds(),this._updateObjectsCoords(T),delete w.centerPoint,this.callSuper("initialize",w)}this.setCoords()},_updateObjectsACoords:function(){for(var v=!0,w=this._objects.length;w--;)this._objects[w].setCoords(v)},_updateObjectsCoords:function(w){for(var w=w||this.getCenterPoint(),x=this._objects.length;x--;)this._updateObjectCoords(this._objects[x],w)},_updateObjectCoords:function(v,w){var x=v.left,C=v.top,T=!0;v.set({left:x-w.x,top:C-w.y}),v.group=this,v.setCoords(T)},toString:function(){return"#<fabric.Group: ("+this.complexity()+")>"},addWithUpdate:function(v){var w=!!this.group;return this._restoreObjectsState(),f.util.resetObjectTransform(this),v&&(w&&f.util.removeTransformFromObject(v,this.group.calcTransformMatrix()),this._objects.push(v),v.group=this,v._set("canvas",this.canvas)),this._calcBounds(),this._updateObjectsCoords(),this.dirty=!0,w?this.group.addWithUpdate():this.setCoords(),this},removeWithUpdate:function(v){return this._restoreObjectsState(),f.util.resetObjectTransform(this),this.remove(v),this._calcBounds(),this._updateObjectsCoords(),this.setCoords(),this.dirty=!0,this},_onObjectAdded:function(v){this.dirty=!0,v.group=this,v._set("canvas",this.canvas)},_onObjectRemoved:function(v){this.dirty=!0,delete v.group},_set:function(v,w){var x=this._objects.length;if(this.useSetOnGroup)for(;x--;)this._objects[x].setOnGroup(v,w);if(v==="canvas")for(;x--;)this._objects[x]._set(v,w);f.Object.prototype._set.call(this,v,w)},toObject:function(v){var w=this.includeDefaultValues,x=this._objects.filter(function(T){return!T.excludeFromExport}).map(function(T){var S=T.includeDefaultValues;T.includeDefaultValues=w;var M=T.toObject(v);return T.includeDefaultValues=S,M}),C=f.Object.prototype.toObject.call(this,v);return C.objects=x,C},toDatalessObject:function(v){var w,x=this.sourcePath;if(x)w=x;else{var C=this.includeDefaultValues;w=this._objects.map(function(S){var M=S.includeDefaultValues;S.includeDefaultValues=C;var O=S.toDatalessObject(v);return S.includeDefaultValues=M,O})}var T=f.Object.prototype.toDatalessObject.call(this,v);return T.objects=w,T},render:function(v){this._transformDone=!0,this.callSuper("render",v),this._transformDone=!1},shouldCache:function(){var v=f.Object.prototype.shouldCache.call(this);if(v){for(var w=0,x=this._objects.length;w<x;w++)if(this._objects[w].willDrawShadow())return this.ownCaching=!1,!1}return v},willDrawShadow:function(){if(f.Object.prototype.willDrawShadow.call(this))return!0;for(var v=0,w=this._objects.length;v<w;v++)if(this._objects[v].willDrawShadow())return!0;return!1},isOnACache:function(){return this.ownCaching||this.group&&this.group.isOnACache()},drawObject:function(v){for(var w=0,x=this._objects.length;w<x;w++)this._objects[w].render(v);this._drawClipPath(v,this.clipPath)},isCacheDirty:function(v){if(this.callSuper("isCacheDirty",v))return!0;if(!this.statefullCache)return!1;for(var w=0,x=this._objects.length;w<x;w++)if(this._objects[w].isCacheDirty(!0)){if(this._cacheCanvas){var C=this.cacheWidth/this.zoomX,T=this.cacheHeight/this.zoomY;this._cacheContext.clearRect(-C/2,-T/2,C,T)}return!0}return!1},_restoreObjectsState:function(){var v=this.calcOwnMatrix();return this._objects.forEach(function(w){f.util.addTransformToObject(w,v),delete w.group,w.setCoords()}),this},destroy:function(){return this._objects.forEach(function(v){v.set("dirty",!0)}),this._restoreObjectsState()},dispose:function(){this.callSuper("dispose"),this.forEachObject(function(v){v.dispose&&v.dispose()}),this._objects=[]},toActiveSelection:function(){if(!!this.canvas){var v=this._objects,w=this.canvas;this._objects=[];var x=this.toObject();delete x.objects;var C=new f.ActiveSelection([]);return C.set(x),C.type="activeSelection",w.remove(this),v.forEach(function(T){T.group=C,T.dirty=!0,w.add(T)}),C.canvas=w,C._objects=v,w._activeObject=C,C.setCoords(),C}},ungroupOnCanvas:function(){return this._restoreObjectsState()},setObjectsCoords:function(){var v=!0;return this.forEachObject(function(w){w.setCoords(v)}),this},_calcBounds:function(v){for(var w=[],x=[],C,T,S,M=["tr","br","bl","tl"],O=0,V=this._objects.length,X,Z=M.length;O<V;++O){for(C=this._objects[O],S=C.calcACoords(),X=0;X<Z;X++)T=M[X],w.push(S[T].x),x.push(S[T].y);C.aCoords=S}this._getBounds(w,x,v)},_getBounds:function(v,w,x){var C=new f.Point(_(v),_(w)),T=new f.Point(b(v),b(w)),S=C.y||0,M=C.x||0,O=T.x-C.x||0,V=T.y-C.y||0;this.width=O,this.height=V,x||this.setPositionByOrigin({x:M,y:S},"left","top")},_toSVG:function(v){for(var w=["<g ","COMMON_PARTS",` >
`],x=0,C=this._objects.length;x<C;x++)w.push("		",this._objects[x].toSVG(v));return w.push(`</g>
`),w},getSvgStyles:function(){var v=typeof this.opacity<"u"&&this.opacity!==1?"opacity: "+this.opacity+";":"",w=this.visible?"":" visibility: hidden;";return[v,this.getSvgFilter(),w].join("")},toClipPathSVG:function(v){for(var w=[],x=0,C=this._objects.length;x<C;x++)w.push("	",this._objects[x].toClipPathSVG(v));return this._createBaseClipPathSVGMarkup(w,{reviver:v})}}),f.Group.fromObject=function(v,w){var x=v.objects,C=f.util.object.clone(v,!0);if(delete C.objects,typeof x=="string"){f.loadSVGFromURL(x,function(T){var S=f.util.groupSVGElements(T,v,x),M=C.clipPath;delete C.clipPath,S.set(C),M?f.util.enlivenObjects([M],function(O){S.clipPath=O[0],w&&w(S)}):w&&w(S)});return}f.util.enlivenObjects(x,function(T){f.util.enlivenObjectEnlivables(v,C,function(){w&&w(new f.Group(T,C,!0))})})})}(i),function(r){var f=r.fabric||(r.fabric={});f.ActiveSelection||(f.ActiveSelection=f.util.createClass(f.Group,{type:"activeSelection",initialize:function(_,b){b=b||{},this._objects=_||[];for(var v=this._objects.length;v--;)this._objects[v].group=this;b.originX&&(this.originX=b.originX),b.originY&&(this.originY=b.originY),this._calcBounds(),this._updateObjectsCoords(),f.Object.prototype.initialize.call(this,b),this.setCoords()},toGroup:function(){var _=this._objects.concat();this._objects=[];var b=f.Object.prototype.toObject.call(this),v=new f.Group([]);if(delete b.type,v.set(b),_.forEach(function(x){x.canvas.remove(x),x.group=v}),v._objects=_,!this.canvas)return v;var w=this.canvas;return w.add(v),w._activeObject=v,v.setCoords(),v},onDeselect:function(){return this.destroy(),!1},toString:function(){return"#<fabric.ActiveSelection: ("+this.complexity()+")>"},shouldCache:function(){return!1},isOnACache:function(){return!1},_renderControls:function(_,b,v){_.save(),_.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1,this.callSuper("_renderControls",_,b),v=v||{},typeof v.hasControls>"u"&&(v.hasControls=!1),v.forActiveSelection=!0;for(var w=0,x=this._objects.length;w<x;w++)this._objects[w]._renderControls(_,v);_.restore()}}),f.ActiveSelection.fromObject=function(_,b){f.util.enlivenObjects(_.objects,function(v){delete _.objects,b&&b(new f.ActiveSelection(v,_,!0))})})}(i),function(r){var f=e.util.object.extend;if(r.fabric||(r.fabric={}),r.fabric.Image){e.warn("fabric.Image is already defined.");return}e.Image=e.util.createClass(e.Object,{type:"image",strokeWidth:0,srcFromAttribute:!1,_lastScaleX:1,_lastScaleY:1,_filterScalingX:1,_filterScalingY:1,minimumScaleTrigger:.5,stateProperties:e.Object.prototype.stateProperties.concat("cropX","cropY"),cacheProperties:e.Object.prototype.cacheProperties.concat("cropX","cropY"),cacheKey:"",cropX:0,cropY:0,imageSmoothing:!0,initialize:function(_,b){b||(b={}),this.filters=[],this.cacheKey="texture"+e.Object.__uid++,this.callSuper("initialize",b),this._initElement(_,b)},getElement:function(){return this._element||{}},setElement:function(_,b){return this.removeTexture(this.cacheKey),this.removeTexture(this.cacheKey+"_filtered"),this._element=_,this._originalElement=_,this._initConfig(b),this.filters.length!==0&&this.applyFilters(),this.resizeFilter&&this.applyResizeFilters(),this},removeTexture:function(_){var b=e.filterBackend;b&&b.evictCachesForKey&&b.evictCachesForKey(_)},dispose:function(){this.callSuper("dispose"),this.removeTexture(this.cacheKey),this.removeTexture(this.cacheKey+"_filtered"),this._cacheContext=void 0,["_originalElement","_element","_filteredEl","_cacheCanvas"].forEach(function(_){e.util.cleanUpJsdomNode(this[_]),this[_]=void 0}.bind(this))},getCrossOrigin:function(){return this._originalElement&&(this._originalElement.crossOrigin||null)},getOriginalSize:function(){var _=this.getElement();return{width:_.naturalWidth||_.width,height:_.naturalHeight||_.height}},_stroke:function(_){if(!(!this.stroke||this.strokeWidth===0)){var b=this.width/2,v=this.height/2;_.beginPath(),_.moveTo(-b,-v),_.lineTo(b,-v),_.lineTo(b,v),_.lineTo(-b,v),_.lineTo(-b,-v),_.closePath()}},toObject:function(_){var b=[];this.filters.forEach(function(w){w&&b.push(w.toObject())});var v=f(this.callSuper("toObject",["cropX","cropY"].concat(_)),{src:this.getSrc(),crossOrigin:this.getCrossOrigin(),filters:b});return this.resizeFilter&&(v.resizeFilter=this.resizeFilter.toObject()),v},hasCrop:function(){return this.cropX||this.cropY||this.width<this._element.width||this.height<this._element.height},_toSVG:function(){var _=[],b=[],v,w=this._element,x=-this.width/2,C=-this.height/2,T="",S="";if(!w)return[];if(this.hasCrop()){var M=e.Object.__uid++;_.push('<clipPath id="imageCrop_'+M+`">
`,'	<rect x="'+x+'" y="'+C+'" width="'+this.width+'" height="'+this.height+`" />
`,`</clipPath>
`),T=' clip-path="url(#imageCrop_'+M+')" '}if(this.imageSmoothing||(S='" image-rendering="optimizeSpeed'),b.push("	<image ","COMMON_PARTS",'xlink:href="',this.getSvgSrc(!0),'" x="',x-this.cropX,'" y="',C-this.cropY,'" width="',w.width||w.naturalWidth,'" height="',w.height||w.height,S,'"',T,`></image>
`),this.stroke||this.strokeDashArray){var O=this.fill;this.fill=null,v=["	<rect ",'x="',x,'" y="',C,'" width="',this.width,'" height="',this.height,'" style="',this.getSvgStyles(),`"/>
`],this.fill=O}return this.paintFirst!=="fill"?_=_.concat(v,b):_=_.concat(b,v),_},getSrc:function(_){var b=_?this._element:this._originalElement;return b?b.toDataURL?b.toDataURL():this.srcFromAttribute?b.getAttribute("src"):b.src:this.src||""},setSrc:function(_,b,v){return e.util.loadImage(_,function(w,x){this.setElement(w,v),this._setWidthHeight(),b&&b(this,x)},this,v&&v.crossOrigin),this},toString:function(){return'#<fabric.Image: { src: "'+this.getSrc()+'" }>'},applyResizeFilters:function(){var _=this.resizeFilter,b=this.minimumScaleTrigger,v=this.getTotalObjectScaling(),w=v.scaleX,x=v.scaleY,C=this._filteredEl||this._originalElement;if(this.group&&this.set("dirty",!0),!_||w>b&&x>b){this._element=C,this._filterScalingX=1,this._filterScalingY=1,this._lastScaleX=w,this._lastScaleY=x;return}e.filterBackend||(e.filterBackend=e.initFilterBackend());var T=e.util.createCanvasElement(),S=this._filteredEl?this.cacheKey+"_filtered":this.cacheKey,M=C.width,O=C.height;T.width=M,T.height=O,this._element=T,this._lastScaleX=_.scaleX=w,this._lastScaleY=_.scaleY=x,e.filterBackend.applyFilters([_],C,M,O,this._element,S),this._filterScalingX=T.width/this._originalElement.width,this._filterScalingY=T.height/this._originalElement.height},applyFilters:function(_){if(_=_||this.filters||[],_=_.filter(function(C){return C&&!C.isNeutralState()}),this.set("dirty",!0),this.removeTexture(this.cacheKey+"_filtered"),_.length===0)return this._element=this._originalElement,this._filteredEl=null,this._filterScalingX=1,this._filterScalingY=1,this;var b=this._originalElement,v=b.naturalWidth||b.width,w=b.naturalHeight||b.height;if(this._element===this._originalElement){var x=e.util.createCanvasElement();x.width=v,x.height=w,this._element=x,this._filteredEl=x}else this._element=this._filteredEl,this._filteredEl.getContext("2d").clearRect(0,0,v,w),this._lastScaleX=1,this._lastScaleY=1;return e.filterBackend||(e.filterBackend=e.initFilterBackend()),e.filterBackend.applyFilters(_,this._originalElement,v,w,this._element,this.cacheKey),(this._originalElement.width!==this._element.width||this._originalElement.height!==this._element.height)&&(this._filterScalingX=this._element.width/this._originalElement.width,this._filterScalingY=this._element.height/this._originalElement.height),this},_render:function(_){e.util.setImageSmoothing(_,this.imageSmoothing),this.isMoving!==!0&&this.resizeFilter&&this._needsResize()&&this.applyResizeFilters(),this._stroke(_),this._renderPaintInOrder(_)},drawCacheOnCanvas:function(_){e.util.setImageSmoothing(_,this.imageSmoothing),e.Object.prototype.drawCacheOnCanvas.call(this,_)},shouldCache:function(){return this.needsItsOwnCache()},_renderFill:function(_){var b=this._element;if(!!b){var v=this._filterScalingX,w=this._filterScalingY,x=this.width,C=this.height,T=Math.min,S=Math.max,M=S(this.cropX,0),O=S(this.cropY,0),V=b.naturalWidth||b.width,X=b.naturalHeight||b.height,Z=M*v,te=O*w,J=T(x*v,V-Z),ie=T(C*w,X-te),Ee=-x/2,Pe=-C/2,de=T(x,V/v-M),Te=T(C,X/w-O);b&&_.drawImage(b,Z,te,J,ie,Ee,Pe,de,Te)}},_needsResize:function(){var _=this.getTotalObjectScaling();return _.scaleX!==this._lastScaleX||_.scaleY!==this._lastScaleY},_resetWidthHeight:function(){this.set(this.getOriginalSize())},_initElement:function(_,b){this.setElement(e.util.getById(_),b),e.util.addClass(this.getElement(),e.Image.CSS_CANVAS)},_initConfig:function(_){_||(_={}),this.setOptions(_),this._setWidthHeight(_)},_initFilters:function(_,b){_&&_.length?e.util.enlivenObjects(_,function(v){b&&b(v)},"fabric.Image.filters"):b&&b()},_setWidthHeight:function(_){_||(_={});var b=this.getElement();this.width=_.width||b.naturalWidth||b.width||0,this.height=_.height||b.naturalHeight||b.height||0},parsePreserveAspectRatioAttribute:function(){var _=e.util.parsePreserveAspectRatioAttribute(this.preserveAspectRatio||""),b=this._element.width,v=this._element.height,w=1,x=1,C=0,T=0,S=0,M=0,O,V=this.width,X=this.height,Z={width:V,height:X};return _&&(_.alignX!=="none"||_.alignY!=="none")?(_.meetOrSlice==="meet"&&(w=x=e.util.findScaleToFit(this._element,Z),O=(V-b*w)/2,_.alignX==="Min"&&(C=-O),_.alignX==="Max"&&(C=O),O=(X-v*x)/2,_.alignY==="Min"&&(T=-O),_.alignY==="Max"&&(T=O)),_.meetOrSlice==="slice"&&(w=x=e.util.findScaleToCover(this._element,Z),O=b-V/w,_.alignX==="Mid"&&(S=O/2),_.alignX==="Max"&&(S=O),O=v-X/x,_.alignY==="Mid"&&(M=O/2),_.alignY==="Max"&&(M=O),b=V/w,v=X/x)):(w=V/b,x=X/v),{width:b,height:v,scaleX:w,scaleY:x,offsetLeft:C,offsetTop:T,cropX:S,cropY:M}}}),e.Image.CSS_CANVAS="canvas-img",e.Image.prototype.getSvgSrc=e.Image.prototype.getSrc,e.Image.fromObject=function(_,b){var v=e.util.object.clone(_);e.util.loadImage(v.src,function(w,x){if(x){b&&b(null,!0);return}e.Image.prototype._initFilters.call(v,v.filters,function(C){v.filters=C||[],e.Image.prototype._initFilters.call(v,[v.resizeFilter],function(T){v.resizeFilter=T[0],e.util.enlivenObjectEnlivables(v,v,function(){var S=new e.Image(w,v);b(S,!1)})})})},null,v.crossOrigin)},e.Image.fromURL=function(_,b,v){e.util.loadImage(_,function(w,x){b&&b(new e.Image(w,v),x)},null,v&&v.crossOrigin)},e.Image.ATTRIBUTE_NAMES=e.SHARED_ATTRIBUTES.concat("x y width height preserveAspectRatio xlink:href crossOrigin image-rendering".split(" ")),e.Image.fromElement=function(_,b,v){var w=e.parseAttributes(_,e.Image.ATTRIBUTE_NAMES);e.Image.fromURL(w["xlink:href"],b,f(v?e.util.object.clone(v):{},w))}}(i),e.util.object.extend(e.Object.prototype,{_getAngleValueForStraighten:function(){var r=this.angle%360;return r>0?Math.round((r-1)/90)*90:Math.round(r/90)*90},straighten:function(){return this.rotate(this._getAngleValueForStraighten())},fxStraighten:function(r){r=r||{};var f=function(){},_=r.onComplete||f,b=r.onChange||f,v=this;return e.util.animate({target:this,startValue:this.get("angle"),endValue:this._getAngleValueForStraighten(),duration:this.FX_DURATION,onChange:function(w){v.rotate(w),b()},onComplete:function(){v.setCoords(),_()}})}}),e.util.object.extend(e.StaticCanvas.prototype,{straightenObject:function(r){return r.straighten(),this.requestRenderAll(),this},fxStraightenObject:function(r){return r.fxStraighten({onChange:this.requestRenderAllBound})}}),function(){function r(_,b){var v="precision "+b+` float;
void main(){}`,w=_.createShader(_.FRAGMENT_SHADER);return _.shaderSource(w,v),_.compileShader(w),!!_.getShaderParameter(w,_.COMPILE_STATUS)}e.isWebglSupported=function(_){if(e.isLikelyNode)return!1;_=_||e.WebglFilterBackend.prototype.tileSize;var b=document.createElement("canvas"),v=b.getContext("webgl")||b.getContext("experimental-webgl"),w=!1;if(v){e.maxTextureSize=v.getParameter(v.MAX_TEXTURE_SIZE),w=e.maxTextureSize>=_;for(var x=["highp","mediump","lowp"],C=0;C<3;C++)if(r(v,x[C])){e.webGlPrecision=x[C];break}}return this.isSupported=w,w},e.WebglFilterBackend=f;function f(_){_&&_.tileSize&&(this.tileSize=_.tileSize),this.setupGLContext(this.tileSize,this.tileSize),this.captureGPUInfo()}f.prototype={tileSize:2048,resources:{},setupGLContext:function(_,b){this.dispose(),this.createWebGLCanvas(_,b),this.aPosition=new Float32Array([0,0,0,1,1,0,1,1]),this.chooseFastestCopyGLTo2DMethod(_,b)},chooseFastestCopyGLTo2DMethod:function(_,b){var v=typeof window.performance<"u",w;try{new ImageData(1,1),w=!0}catch{w=!1}var x=typeof ArrayBuffer<"u",C=typeof Uint8ClampedArray<"u";if(!!(v&&w&&x&&C)){var T=e.util.createCanvasElement(),S=new ArrayBuffer(_*b*4);if(e.forceGLPutImageData){this.imageBuffer=S,this.copyGLTo2D=m;return}var M={imageBuffer:S,destinationWidth:_,destinationHeight:b,targetCanvas:T},O,V,X;T.width=_,T.height=b,O=window.performance.now(),u.call(M,this.gl,M),V=window.performance.now()-O,O=window.performance.now(),m.call(M,this.gl,M),X=window.performance.now()-O,V>X?(this.imageBuffer=S,this.copyGLTo2D=m):this.copyGLTo2D=u}},createWebGLCanvas:function(_,b){var v=e.util.createCanvasElement();v.width=_,v.height=b;var w={alpha:!0,premultipliedAlpha:!1,depth:!1,stencil:!1,antialias:!1},x=v.getContext("webgl",w);x||(x=v.getContext("experimental-webgl",w)),x&&(x.clearColor(0,0,0,0),this.canvas=v,this.gl=x)},applyFilters:function(_,b,v,w,x,C){var T=this.gl,S;C&&(S=this.getCachedTexture(C,b));var M={originalWidth:b.width||b.originalWidth,originalHeight:b.height||b.originalHeight,sourceWidth:v,sourceHeight:w,destinationWidth:v,destinationHeight:w,context:T,sourceTexture:this.createTexture(T,v,w,!S&&b),targetTexture:this.createTexture(T,v,w),originalTexture:S||this.createTexture(T,v,w,!S&&b),passes:_.length,webgl:!0,aPosition:this.aPosition,programCache:this.programCache,pass:0,filterBackend:this,targetCanvas:x},O=T.createFramebuffer();return T.bindFramebuffer(T.FRAMEBUFFER,O),_.forEach(function(V){V&&V.applyTo(M)}),l(M),this.copyGLTo2D(T,M),T.bindTexture(T.TEXTURE_2D,null),T.deleteTexture(M.sourceTexture),T.deleteTexture(M.targetTexture),T.deleteFramebuffer(O),x.getContext("2d").setTransform(1,0,0,1,0,0),M},dispose:function(){this.canvas&&(this.canvas=null,this.gl=null),this.clearWebGLCaches()},clearWebGLCaches:function(){this.programCache={},this.textureCache={}},createTexture:function(_,b,v,w){var x=_.createTexture();return _.bindTexture(_.TEXTURE_2D,x),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_MAG_FILTER,_.NEAREST),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_MIN_FILTER,_.NEAREST),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_WRAP_S,_.CLAMP_TO_EDGE),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_WRAP_T,_.CLAMP_TO_EDGE),w?_.texImage2D(_.TEXTURE_2D,0,_.RGBA,_.RGBA,_.UNSIGNED_BYTE,w):_.texImage2D(_.TEXTURE_2D,0,_.RGBA,b,v,0,_.RGBA,_.UNSIGNED_BYTE,null),x},getCachedTexture:function(_,b){if(this.textureCache[_])return this.textureCache[_];var v=this.createTexture(this.gl,b.width,b.height,b);return this.textureCache[_]=v,v},evictCachesForKey:function(_){this.textureCache[_]&&(this.gl.deleteTexture(this.textureCache[_]),delete this.textureCache[_])},copyGLTo2D:u,captureGPUInfo:function(){if(this.gpuInfo)return this.gpuInfo;var _=this.gl,b={renderer:"",vendor:""};if(!_)return b;var v=_.getExtension("WEBGL_debug_renderer_info");if(v){var w=_.getParameter(v.UNMASKED_RENDERER_WEBGL),x=_.getParameter(v.UNMASKED_VENDOR_WEBGL);w&&(b.renderer=w.toLowerCase()),x&&(b.vendor=x.toLowerCase())}return this.gpuInfo=b,b}}}();function l(r){var f=r.targetCanvas,_=f.width,b=f.height,v=r.destinationWidth,w=r.destinationHeight;(_!==v||b!==w)&&(f.width=v,f.height=w)}function u(r,f){var _=r.canvas,b=f.targetCanvas,v=b.getContext("2d");v.translate(0,b.height),v.scale(1,-1);var w=_.height-b.height;v.drawImage(_,0,w,b.width,b.height,0,0,b.width,b.height)}function m(r,f){var _=f.targetCanvas,b=_.getContext("2d"),v=f.destinationWidth,w=f.destinationHeight,x=v*w*4,C=new Uint8Array(this.imageBuffer,0,x),T=new Uint8ClampedArray(this.imageBuffer,0,x);r.readPixels(0,0,v,w,r.RGBA,r.UNSIGNED_BYTE,C);var S=new ImageData(T,v,w);b.putImageData(S,0,0)}(function(){var r=function(){};e.Canvas2dFilterBackend=f;function f(){}f.prototype={evictCachesForKey:r,dispose:r,clearWebGLCaches:r,resources:{},applyFilters:function(_,b,v,w,x){var C=x.getContext("2d");C.drawImage(b,0,0,v,w);var T=C.getImageData(0,0,v,w),S=C.getImageData(0,0,v,w),M={sourceWidth:v,sourceHeight:w,imageData:T,originalEl:b,originalImageData:S,canvasEl:x,ctx:C,filterBackend:this};return _.forEach(function(O){O.applyTo(M)}),(M.imageData.width!==v||M.imageData.height!==w)&&(x.width=M.imageData.width,x.height=M.imageData.height),C.putImageData(M.imageData,0,0),M}}})(),e.Image=e.Image||{},e.Image.filters=e.Image.filters||{},e.Image.filters.BaseFilter=e.util.createClass({type:"BaseFilter",vertexSource:`attribute vec2 aPosition;
varying vec2 vTexCoord;
void main() {
vTexCoord = aPosition;
gl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);
}`,fragmentSource:`precision highp float;
varying vec2 vTexCoord;
uniform sampler2D uTexture;
void main() {
gl_FragColor = texture2D(uTexture, vTexCoord);
}`,initialize:function(r){r&&this.setOptions(r)},setOptions:function(r){for(var f in r)this[f]=r[f]},createProgram:function(r,f,_){f=f||this.fragmentSource,_=_||this.vertexSource,e.webGlPrecision!=="highp"&&(f=f.replace(/precision highp float/g,"precision "+e.webGlPrecision+" float"));var b=r.createShader(r.VERTEX_SHADER);if(r.shaderSource(b,_),r.compileShader(b),!r.getShaderParameter(b,r.COMPILE_STATUS))throw new Error("Vertex shader compile error for "+this.type+": "+r.getShaderInfoLog(b));var v=r.createShader(r.FRAGMENT_SHADER);if(r.shaderSource(v,f),r.compileShader(v),!r.getShaderParameter(v,r.COMPILE_STATUS))throw new Error("Fragment shader compile error for "+this.type+": "+r.getShaderInfoLog(v));var w=r.createProgram();if(r.attachShader(w,b),r.attachShader(w,v),r.linkProgram(w),!r.getProgramParameter(w,r.LINK_STATUS))throw new Error('Shader link error for "${this.type}" '+r.getProgramInfoLog(w));var x=this.getAttributeLocations(r,w),C=this.getUniformLocations(r,w)||{};return C.uStepW=r.getUniformLocation(w,"uStepW"),C.uStepH=r.getUniformLocation(w,"uStepH"),{program:w,attributeLocations:x,uniformLocations:C}},getAttributeLocations:function(r,f){return{aPosition:r.getAttribLocation(f,"aPosition")}},getUniformLocations:function(){return{}},sendAttributeData:function(r,f,_){var b=f.aPosition,v=r.createBuffer();r.bindBuffer(r.ARRAY_BUFFER,v),r.enableVertexAttribArray(b),r.vertexAttribPointer(b,2,r.FLOAT,!1,0,0),r.bufferData(r.ARRAY_BUFFER,_,r.STATIC_DRAW)},_setupFrameBuffer:function(r){var f=r.context,_,b;r.passes>1?(_=r.destinationWidth,b=r.destinationHeight,(r.sourceWidth!==_||r.sourceHeight!==b)&&(f.deleteTexture(r.targetTexture),r.targetTexture=r.filterBackend.createTexture(f,_,b)),f.framebufferTexture2D(f.FRAMEBUFFER,f.COLOR_ATTACHMENT0,f.TEXTURE_2D,r.targetTexture,0)):(f.bindFramebuffer(f.FRAMEBUFFER,null),f.finish())},_swapTextures:function(r){r.passes--,r.pass++;var f=r.targetTexture;r.targetTexture=r.sourceTexture,r.sourceTexture=f},isNeutralState:function(){var r=this.mainParameter,f=e.Image.filters[this.type].prototype;if(r)if(Array.isArray(f[r])){for(var _=f[r].length;_--;)if(this[r][_]!==f[r][_])return!1;return!0}else return f[r]===this[r];else return!1},applyTo:function(r){r.webgl?(this._setupFrameBuffer(r),this.applyToWebGL(r),this._swapTextures(r)):this.applyTo2d(r)},retrieveShader:function(r){return r.programCache.hasOwnProperty(this.type)||(r.programCache[this.type]=this.createProgram(r.context)),r.programCache[this.type]},applyToWebGL:function(r){var f=r.context,_=this.retrieveShader(r);r.pass===0&&r.originalTexture?f.bindTexture(f.TEXTURE_2D,r.originalTexture):f.bindTexture(f.TEXTURE_2D,r.sourceTexture),f.useProgram(_.program),this.sendAttributeData(f,_.attributeLocations,r.aPosition),f.uniform1f(_.uniformLocations.uStepW,1/r.sourceWidth),f.uniform1f(_.uniformLocations.uStepH,1/r.sourceHeight),this.sendUniformData(f,_.uniformLocations),f.viewport(0,0,r.destinationWidth,r.destinationHeight),f.drawArrays(f.TRIANGLE_STRIP,0,4)},bindAdditionalTexture:function(r,f,_){r.activeTexture(_),r.bindTexture(r.TEXTURE_2D,f),r.activeTexture(r.TEXTURE0)},unbindAdditionalTexture:function(r,f){r.activeTexture(f),r.bindTexture(r.TEXTURE_2D,null),r.activeTexture(r.TEXTURE0)},getMainParameter:function(){return this[this.mainParameter]},setMainParameter:function(r){this[this.mainParameter]=r},sendUniformData:function(){},createHelpLayer:function(r){if(!r.helpLayer){var f=document.createElement("canvas");f.width=r.sourceWidth,f.height=r.sourceHeight,r.helpLayer=f}},toObject:function(){var r={type:this.type},f=this.mainParameter;return f&&(r[f]=this[f]),r},toJSON:function(){return this.toObject()}}),e.Image.filters.BaseFilter.fromObject=function(r,f){var _=new e.Image.filters[r.type](r);return f&&f(_),_},function(r){var f=r.fabric||(r.fabric={}),_=f.Image.filters,b=f.util.createClass;_.ColorMatrix=b(_.BaseFilter,{type:"ColorMatrix",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
varying vec2 vTexCoord;
uniform mat4 uColorMatrix;
uniform vec4 uConstants;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
color *= uColorMatrix;
color += uConstants;
gl_FragColor = color;
}`,matrix:[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],mainParameter:"matrix",colorsOnly:!0,initialize:function(v){this.callSuper("initialize",v),this.matrix=this.matrix.slice(0)},applyTo2d:function(v){var w=v.imageData,x=w.data,C=x.length,T=this.matrix,S,M,O,V,X,Z=this.colorsOnly;for(X=0;X<C;X+=4)S=x[X],M=x[X+1],O=x[X+2],Z?(x[X]=S*T[0]+M*T[1]+O*T[2]+T[4]*255,x[X+1]=S*T[5]+M*T[6]+O*T[7]+T[9]*255,x[X+2]=S*T[10]+M*T[11]+O*T[12]+T[14]*255):(V=x[X+3],x[X]=S*T[0]+M*T[1]+O*T[2]+V*T[3]+T[4]*255,x[X+1]=S*T[5]+M*T[6]+O*T[7]+V*T[8]+T[9]*255,x[X+2]=S*T[10]+M*T[11]+O*T[12]+V*T[13]+T[14]*255,x[X+3]=S*T[15]+M*T[16]+O*T[17]+V*T[18]+T[19]*255)},getUniformLocations:function(v,w){return{uColorMatrix:v.getUniformLocation(w,"uColorMatrix"),uConstants:v.getUniformLocation(w,"uConstants")}},sendUniformData:function(v,w){var x=this.matrix,C=[x[0],x[1],x[2],x[3],x[5],x[6],x[7],x[8],x[10],x[11],x[12],x[13],x[15],x[16],x[17],x[18]],T=[x[4],x[9],x[14],x[19]];v.uniformMatrix4fv(w.uColorMatrix,!1,C),v.uniform4fv(w.uConstants,T)}}),f.Image.filters.ColorMatrix.fromObject=f.Image.filters.BaseFilter.fromObject}(i),function(r){var f=r.fabric||(r.fabric={}),_=f.Image.filters,b=f.util.createClass;_.Brightness=b(_.BaseFilter,{type:"Brightness",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uBrightness;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
color.rgb += uBrightness;
gl_FragColor = color;
}`,brightness:0,mainParameter:"brightness",applyTo2d:function(v){if(this.brightness!==0){var w=v.imageData,x=w.data,C,T=x.length,S=Math.round(this.brightness*255);for(C=0;C<T;C+=4)x[C]=x[C]+S,x[C+1]=x[C+1]+S,x[C+2]=x[C+2]+S}},getUniformLocations:function(v,w){return{uBrightness:v.getUniformLocation(w,"uBrightness")}},sendUniformData:function(v,w){v.uniform1f(w.uBrightness,this.brightness)}}),f.Image.filters.Brightness.fromObject=f.Image.filters.BaseFilter.fromObject}(i),function(r){var f=r.fabric||(r.fabric={}),_=f.util.object.extend,b=f.Image.filters,v=f.util.createClass;b.Convolute=v(b.BaseFilter,{type:"Convolute",opaque:!1,matrix:[0,0,0,0,1,0,0,0,0],fragmentSource:{Convolute_3_1:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[9];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 0);
for (float h = 0.0; h < 3.0; h+=1.0) {
for (float w = 0.0; w < 3.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 1), uStepH * (h - 1));
color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 3.0 + w)];
}
}
gl_FragColor = color;
}`,Convolute_3_0:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[9];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 1);
for (float h = 0.0; h < 3.0; h+=1.0) {
for (float w = 0.0; w < 3.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 1.0), uStepH * (h - 1.0));
color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 3.0 + w)];
}
}
float alpha = texture2D(uTexture, vTexCoord).a;
gl_FragColor = color;
gl_FragColor.a = alpha;
}`,Convolute_5_1:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[25];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 0);
for (float h = 0.0; h < 5.0; h+=1.0) {
for (float w = 0.0; w < 5.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));
color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 5.0 + w)];
}
}
gl_FragColor = color;
}`,Convolute_5_0:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[25];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 1);
for (float h = 0.0; h < 5.0; h+=1.0) {
for (float w = 0.0; w < 5.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));
color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 5.0 + w)];
}
}
float alpha = texture2D(uTexture, vTexCoord).a;
gl_FragColor = color;
gl_FragColor.a = alpha;
}`,Convolute_7_1:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[49];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 0);
for (float h = 0.0; h < 7.0; h+=1.0) {
for (float w = 0.0; w < 7.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));
color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 7.0 + w)];
}
}
gl_FragColor = color;
}`,Convolute_7_0:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[49];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 1);
for (float h = 0.0; h < 7.0; h+=1.0) {
for (float w = 0.0; w < 7.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));
color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 7.0 + w)];
}
}
float alpha = texture2D(uTexture, vTexCoord).a;
gl_FragColor = color;
gl_FragColor.a = alpha;
}`,Convolute_9_1:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[81];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 0);
for (float h = 0.0; h < 9.0; h+=1.0) {
for (float w = 0.0; w < 9.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));
color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 9.0 + w)];
}
}
gl_FragColor = color;
}`,Convolute_9_0:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[81];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 1);
for (float h = 0.0; h < 9.0; h+=1.0) {
for (float w = 0.0; w < 9.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));
color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 9.0 + w)];
}
}
float alpha = texture2D(uTexture, vTexCoord).a;
gl_FragColor = color;
gl_FragColor.a = alpha;
}`},retrieveShader:function(w){var x=Math.sqrt(this.matrix.length),C=this.type+"_"+x+"_"+(this.opaque?1:0),T=this.fragmentSource[C];return w.programCache.hasOwnProperty(C)||(w.programCache[C]=this.createProgram(w.context,T)),w.programCache[C]},applyTo2d:function(w){var x=w.imageData,C=x.data,T=this.matrix,S=Math.round(Math.sqrt(T.length)),M=Math.floor(S/2),O=x.width,V=x.height,X=w.ctx.createImageData(O,V),Z=X.data,te=this.opaque?1:0,J,ie,Ee,Pe,de,Te,ve,_e,ot,it,It,Xe,we;for(It=0;It<V;It++)for(it=0;it<O;it++){for(de=(It*O+it)*4,J=0,ie=0,Ee=0,Pe=0,we=0;we<S;we++)for(Xe=0;Xe<S;Xe++)ve=It+we-M,Te=it+Xe-M,!(ve<0||ve>=V||Te<0||Te>=O)&&(_e=(ve*O+Te)*4,ot=T[we*S+Xe],J+=C[_e]*ot,ie+=C[_e+1]*ot,Ee+=C[_e+2]*ot,te||(Pe+=C[_e+3]*ot));Z[de]=J,Z[de+1]=ie,Z[de+2]=Ee,te?Z[de+3]=C[de+3]:Z[de+3]=Pe}w.imageData=X},getUniformLocations:function(w,x){return{uMatrix:w.getUniformLocation(x,"uMatrix"),uOpaque:w.getUniformLocation(x,"uOpaque"),uHalfSize:w.getUniformLocation(x,"uHalfSize"),uSize:w.getUniformLocation(x,"uSize")}},sendUniformData:function(w,x){w.uniform1fv(x.uMatrix,this.matrix)},toObject:function(){return _(this.callSuper("toObject"),{opaque:this.opaque,matrix:this.matrix})}}),f.Image.filters.Convolute.fromObject=f.Image.filters.BaseFilter.fromObject}(i),function(r){var f=r.fabric||(r.fabric={}),_=f.Image.filters,b=f.util.createClass;_.Grayscale=b(_.BaseFilter,{type:"Grayscale",fragmentSource:{average:`precision highp float;
uniform sampler2D uTexture;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
float average = (color.r + color.b + color.g) / 3.0;
gl_FragColor = vec4(average, average, average, color.a);
}`,lightness:`precision highp float;
uniform sampler2D uTexture;
uniform int uMode;
varying vec2 vTexCoord;
void main() {
vec4 col = texture2D(uTexture, vTexCoord);
float average = (max(max(col.r, col.g),col.b) + min(min(col.r, col.g),col.b)) / 2.0;
gl_FragColor = vec4(average, average, average, col.a);
}`,luminosity:`precision highp float;
uniform sampler2D uTexture;
uniform int uMode;
varying vec2 vTexCoord;
void main() {
vec4 col = texture2D(uTexture, vTexCoord);
float average = 0.21 * col.r + 0.72 * col.g + 0.07 * col.b;
gl_FragColor = vec4(average, average, average, col.a);
}`},mode:"average",mainParameter:"mode",applyTo2d:function(v){var w=v.imageData,x=w.data,C,T=x.length,S,M=this.mode;for(C=0;C<T;C+=4)M==="average"?S=(x[C]+x[C+1]+x[C+2])/3:M==="lightness"?S=(Math.min(x[C],x[C+1],x[C+2])+Math.max(x[C],x[C+1],x[C+2]))/2:M==="luminosity"&&(S=.21*x[C]+.72*x[C+1]+.07*x[C+2]),x[C]=S,x[C+1]=S,x[C+2]=S},retrieveShader:function(v){var w=this.type+"_"+this.mode;if(!v.programCache.hasOwnProperty(w)){var x=this.fragmentSource[this.mode];v.programCache[w]=this.createProgram(v.context,x)}return v.programCache[w]},getUniformLocations:function(v,w){return{uMode:v.getUniformLocation(w,"uMode")}},sendUniformData:function(v,w){var x=1;v.uniform1i(w.uMode,x)},isNeutralState:function(){return!1}}),f.Image.filters.Grayscale.fromObject=f.Image.filters.BaseFilter.fromObject}(i),function(r){var f=r.fabric||(r.fabric={}),_=f.Image.filters,b=f.util.createClass;_.Invert=b(_.BaseFilter,{type:"Invert",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform int uInvert;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
if (uInvert == 1) {
gl_FragColor = vec4(1.0 - color.r,1.0 -color.g,1.0 -color.b,color.a);
} else {
gl_FragColor = color;
}
}`,invert:!0,mainParameter:"invert",applyTo2d:function(v){var w=v.imageData,x=w.data,C,T=x.length;for(C=0;C<T;C+=4)x[C]=255-x[C],x[C+1]=255-x[C+1],x[C+2]=255-x[C+2]},isNeutralState:function(){return!this.invert},getUniformLocations:function(v,w){return{uInvert:v.getUniformLocation(w,"uInvert")}},sendUniformData:function(v,w){v.uniform1i(w.uInvert,this.invert)}}),f.Image.filters.Invert.fromObject=f.Image.filters.BaseFilter.fromObject}(i),function(r){var f=r.fabric||(r.fabric={}),_=f.util.object.extend,b=f.Image.filters,v=f.util.createClass;b.Noise=v(b.BaseFilter,{type:"Noise",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uStepH;
uniform float uNoise;
uniform float uSeed;
varying vec2 vTexCoord;
float rand(vec2 co, float seed, float vScale) {
return fract(sin(dot(co.xy * vScale ,vec2(12.9898 , 78.233))) * 43758.5453 * (seed + 0.01) / 2.0);
}
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
color.rgb += (0.5 - rand(vTexCoord, uSeed, 0.1 / uStepH)) * uNoise;
gl_FragColor = color;
}`,mainParameter:"noise",noise:0,applyTo2d:function(w){if(this.noise!==0){var x=w.imageData,C=x.data,T,S=C.length,M=this.noise,O;for(T=0,S=C.length;T<S;T+=4)O=(.5-Math.random())*M,C[T]+=O,C[T+1]+=O,C[T+2]+=O}},getUniformLocations:function(w,x){return{uNoise:w.getUniformLocation(x,"uNoise"),uSeed:w.getUniformLocation(x,"uSeed")}},sendUniformData:function(w,x){w.uniform1f(x.uNoise,this.noise/255),w.uniform1f(x.uSeed,Math.random())},toObject:function(){return _(this.callSuper("toObject"),{noise:this.noise})}}),f.Image.filters.Noise.fromObject=f.Image.filters.BaseFilter.fromObject}(i),function(r){var f=r.fabric||(r.fabric={}),_=f.Image.filters,b=f.util.createClass;_.Pixelate=b(_.BaseFilter,{type:"Pixelate",blocksize:4,mainParameter:"blocksize",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uBlocksize;
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
float blockW = uBlocksize * uStepW;
float blockH = uBlocksize * uStepW;
int posX = int(vTexCoord.x / blockW);
int posY = int(vTexCoord.y / blockH);
float fposX = float(posX);
float fposY = float(posY);
vec2 squareCoords = vec2(fposX * blockW, fposY * blockH);
vec4 color = texture2D(uTexture, squareCoords);
gl_FragColor = color;
}`,applyTo2d:function(v){var w=v.imageData,x=w.data,C=w.height,T=w.width,S,M,O,V,X,Z,te,J,ie,Ee,Pe;for(M=0;M<C;M+=this.blocksize)for(O=0;O<T;O+=this.blocksize)for(S=M*4*T+O*4,V=x[S],X=x[S+1],Z=x[S+2],te=x[S+3],Ee=Math.min(M+this.blocksize,C),Pe=Math.min(O+this.blocksize,T),J=M;J<Ee;J++)for(ie=O;ie<Pe;ie++)S=J*4*T+ie*4,x[S]=V,x[S+1]=X,x[S+2]=Z,x[S+3]=te},isNeutralState:function(){return this.blocksize===1},getUniformLocations:function(v,w){return{uBlocksize:v.getUniformLocation(w,"uBlocksize"),uStepW:v.getUniformLocation(w,"uStepW"),uStepH:v.getUniformLocation(w,"uStepH")}},sendUniformData:function(v,w){v.uniform1f(w.uBlocksize,this.blocksize)}}),f.Image.filters.Pixelate.fromObject=f.Image.filters.BaseFilter.fromObject}(i),function(r){var f=r.fabric||(r.fabric={}),_=f.util.object.extend,b=f.Image.filters,v=f.util.createClass;b.RemoveColor=v(b.BaseFilter,{type:"RemoveColor",color:"#FFFFFF",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform vec4 uLow;
uniform vec4 uHigh;
varying vec2 vTexCoord;
void main() {
gl_FragColor = texture2D(uTexture, vTexCoord);
if(all(greaterThan(gl_FragColor.rgb,uLow.rgb)) && all(greaterThan(uHigh.rgb,gl_FragColor.rgb))) {
gl_FragColor.a = 0.0;
}
}`,distance:.02,useAlpha:!1,applyTo2d:function(w){var x=w.imageData,C=x.data,T,S=this.distance*255,M,O,V,X=new f.Color(this.color).getSource(),Z=[X[0]-S,X[1]-S,X[2]-S],te=[X[0]+S,X[1]+S,X[2]+S];for(T=0;T<C.length;T+=4)M=C[T],O=C[T+1],V=C[T+2],M>Z[0]&&O>Z[1]&&V>Z[2]&&M<te[0]&&O<te[1]&&V<te[2]&&(C[T+3]=0)},getUniformLocations:function(w,x){return{uLow:w.getUniformLocation(x,"uLow"),uHigh:w.getUniformLocation(x,"uHigh")}},sendUniformData:function(w,x){var C=new f.Color(this.color).getSource(),T=parseFloat(this.distance),S=[0+C[0]/255-T,0+C[1]/255-T,0+C[2]/255-T,1],M=[C[0]/255+T,C[1]/255+T,C[2]/255+T,1];w.uniform4fv(x.uLow,S),w.uniform4fv(x.uHigh,M)},toObject:function(){return _(this.callSuper("toObject"),{color:this.color,distance:this.distance})}}),f.Image.filters.RemoveColor.fromObject=f.Image.filters.BaseFilter.fromObject}(i),function(r){var f=r.fabric||(r.fabric={}),_=f.Image.filters,b=f.util.createClass,v={Brownie:[.5997,.34553,-.27082,0,.186,-.0377,.86095,.15059,0,-.1449,.24113,-.07441,.44972,0,-.02965,0,0,0,1,0],Vintage:[.62793,.32021,-.03965,0,.03784,.02578,.64411,.03259,0,.02926,.0466,-.08512,.52416,0,.02023,0,0,0,1,0],Kodachrome:[1.12855,-.39673,-.03992,0,.24991,-.16404,1.08352,-.05498,0,.09698,-.16786,-.56034,1.60148,0,.13972,0,0,0,1,0],Technicolor:[1.91252,-.85453,-.09155,0,.04624,-.30878,1.76589,-.10601,0,-.27589,-.2311,-.75018,1.84759,0,.12137,0,0,0,1,0],Polaroid:[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0],Sepia:[.393,.769,.189,0,0,.349,.686,.168,0,0,.272,.534,.131,0,0,0,0,0,1,0],BlackWhite:[1.5,1.5,1.5,0,-1,1.5,1.5,1.5,0,-1,1.5,1.5,1.5,0,-1,0,0,0,1,0]};for(var w in v)_[w]=b(_.ColorMatrix,{type:w,matrix:v[w],mainParameter:!1,colorsOnly:!0}),f.Image.filters[w].fromObject=f.Image.filters.BaseFilter.fromObject}(i),function(r){var f=r.fabric,_=f.Image.filters,b=f.util.createClass;_.BlendColor=b(_.BaseFilter,{type:"BlendColor",color:"#F95C63",mode:"multiply",alpha:1,fragmentSource:{multiply:`gl_FragColor.rgb *= uColor.rgb;
`,screen:`gl_FragColor.rgb = 1.0 - (1.0 - gl_FragColor.rgb) * (1.0 - uColor.rgb);
`,add:`gl_FragColor.rgb += uColor.rgb;
`,diff:`gl_FragColor.rgb = abs(gl_FragColor.rgb - uColor.rgb);
`,subtract:`gl_FragColor.rgb -= uColor.rgb;
`,lighten:`gl_FragColor.rgb = max(gl_FragColor.rgb, uColor.rgb);
`,darken:`gl_FragColor.rgb = min(gl_FragColor.rgb, uColor.rgb);
`,exclusion:`gl_FragColor.rgb += uColor.rgb - 2.0 * (uColor.rgb * gl_FragColor.rgb);
`,overlay:`if (uColor.r < 0.5) {
gl_FragColor.r *= 2.0 * uColor.r;
} else {
gl_FragColor.r = 1.0 - 2.0 * (1.0 - gl_FragColor.r) * (1.0 - uColor.r);
}
if (uColor.g < 0.5) {
gl_FragColor.g *= 2.0 * uColor.g;
} else {
gl_FragColor.g = 1.0 - 2.0 * (1.0 - gl_FragColor.g) * (1.0 - uColor.g);
}
if (uColor.b < 0.5) {
gl_FragColor.b *= 2.0 * uColor.b;
} else {
gl_FragColor.b = 1.0 - 2.0 * (1.0 - gl_FragColor.b) * (1.0 - uColor.b);
}
`,tint:`gl_FragColor.rgb *= (1.0 - uColor.a);
gl_FragColor.rgb += uColor.rgb;
`},buildSource:function(v){return`precision highp float;
uniform sampler2D uTexture;
uniform vec4 uColor;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
gl_FragColor = color;
if (color.a > 0.0) {
`+this.fragmentSource[v]+`}
}`},retrieveShader:function(v){var w=this.type+"_"+this.mode,x;return v.programCache.hasOwnProperty(w)||(x=this.buildSource(this.mode),v.programCache[w]=this.createProgram(v.context,x)),v.programCache[w]},applyTo2d:function(v){var w=v.imageData,x=w.data,C=x.length,T,S,M,O,V,X,Z,te=1-this.alpha;Z=new f.Color(this.color).getSource(),T=Z[0]*this.alpha,S=Z[1]*this.alpha,M=Z[2]*this.alpha;for(var J=0;J<C;J+=4)switch(O=x[J],V=x[J+1],X=x[J+2],this.mode){case"multiply":x[J]=O*T/255,x[J+1]=V*S/255,x[J+2]=X*M/255;break;case"screen":x[J]=255-(255-O)*(255-T)/255,x[J+1]=255-(255-V)*(255-S)/255,x[J+2]=255-(255-X)*(255-M)/255;break;case"add":x[J]=O+T,x[J+1]=V+S,x[J+2]=X+M;break;case"diff":case"difference":x[J]=Math.abs(O-T),x[J+1]=Math.abs(V-S),x[J+2]=Math.abs(X-M);break;case"subtract":x[J]=O-T,x[J+1]=V-S,x[J+2]=X-M;break;case"darken":x[J]=Math.min(O,T),x[J+1]=Math.min(V,S),x[J+2]=Math.min(X,M);break;case"lighten":x[J]=Math.max(O,T),x[J+1]=Math.max(V,S),x[J+2]=Math.max(X,M);break;case"overlay":x[J]=T<128?2*O*T/255:255-2*(255-O)*(255-T)/255,x[J+1]=S<128?2*V*S/255:255-2*(255-V)*(255-S)/255,x[J+2]=M<128?2*X*M/255:255-2*(255-X)*(255-M)/255;break;case"exclusion":x[J]=T+O-2*T*O/255,x[J+1]=S+V-2*S*V/255,x[J+2]=M+X-2*M*X/255;break;case"tint":x[J]=T+O*te,x[J+1]=S+V*te,x[J+2]=M+X*te}},getUniformLocations:function(v,w){return{uColor:v.getUniformLocation(w,"uColor")}},sendUniformData:function(v,w){var x=new f.Color(this.color).getSource();x[0]=this.alpha*x[0]/255,x[1]=this.alpha*x[1]/255,x[2]=this.alpha*x[2]/255,x[3]=this.alpha,v.uniform4fv(w.uColor,x)},toObject:function(){return{type:this.type,color:this.color,mode:this.mode,alpha:this.alpha}}}),f.Image.filters.BlendColor.fromObject=f.Image.filters.BaseFilter.fromObject}(i),function(r){var f=r.fabric,_=f.Image.filters,b=f.util.createClass;_.BlendImage=b(_.BaseFilter,{type:"BlendImage",image:null,mode:"multiply",alpha:1,vertexSource:`attribute vec2 aPosition;
varying vec2 vTexCoord;
varying vec2 vTexCoord2;
uniform mat3 uTransformMatrix;
void main() {
vTexCoord = aPosition;
vTexCoord2 = (uTransformMatrix * vec3(aPosition, 1.0)).xy;
gl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);
}`,fragmentSource:{multiply:`precision highp float;
uniform sampler2D uTexture;
uniform sampler2D uImage;
uniform vec4 uColor;
varying vec2 vTexCoord;
varying vec2 vTexCoord2;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
vec4 color2 = texture2D(uImage, vTexCoord2);
color.rgba *= color2.rgba;
gl_FragColor = color;
}`,mask:`precision highp float;
uniform sampler2D uTexture;
uniform sampler2D uImage;
uniform vec4 uColor;
varying vec2 vTexCoord;
varying vec2 vTexCoord2;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
vec4 color2 = texture2D(uImage, vTexCoord2);
color.a = color2.a;
gl_FragColor = color;
}`},retrieveShader:function(v){var w=this.type+"_"+this.mode,x=this.fragmentSource[this.mode];return v.programCache.hasOwnProperty(w)||(v.programCache[w]=this.createProgram(v.context,x)),v.programCache[w]},applyToWebGL:function(v){var w=v.context,x=this.createTexture(v.filterBackend,this.image);this.bindAdditionalTexture(w,x,w.TEXTURE1),this.callSuper("applyToWebGL",v),this.unbindAdditionalTexture(w,w.TEXTURE1)},createTexture:function(v,w){return v.getCachedTexture(w.cacheKey,w._element)},calculateMatrix:function(){var v=this.image,w=v._element.width,x=v._element.height;return[1/v.scaleX,0,0,0,1/v.scaleY,0,-v.left/w,-v.top/x,1]},applyTo2d:function(v){var w=v.imageData,x=v.filterBackend.resources,C=w.data,T=C.length,S=w.width,M=w.height,O,V,X,Z,te,J,ie,Ee,Pe,de,Te=this.image,ve;x.blendImage||(x.blendImage=f.util.createCanvasElement()),Pe=x.blendImage,de=Pe.getContext("2d"),Pe.width!==S||Pe.height!==M?(Pe.width=S,Pe.height=M):de.clearRect(0,0,S,M),de.setTransform(Te.scaleX,0,0,Te.scaleY,Te.left,Te.top),de.drawImage(Te._element,0,0,S,M),ve=de.getImageData(0,0,S,M).data;for(var _e=0;_e<T;_e+=4)switch(te=C[_e],J=C[_e+1],ie=C[_e+2],Ee=C[_e+3],O=ve[_e],V=ve[_e+1],X=ve[_e+2],Z=ve[_e+3],this.mode){case"multiply":C[_e]=te*O/255,C[_e+1]=J*V/255,C[_e+2]=ie*X/255,C[_e+3]=Ee*Z/255;break;case"mask":C[_e+3]=Z;break}},getUniformLocations:function(v,w){return{uTransformMatrix:v.getUniformLocation(w,"uTransformMatrix"),uImage:v.getUniformLocation(w,"uImage")}},sendUniformData:function(v,w){var x=this.calculateMatrix();v.uniform1i(w.uImage,1),v.uniformMatrix3fv(w.uTransformMatrix,!1,x)},toObject:function(){return{type:this.type,image:this.image&&this.image.toObject(),mode:this.mode,alpha:this.alpha}}}),f.Image.filters.BlendImage.fromObject=function(v,w){f.Image.fromObject(v.image,function(x){var C=f.util.object.clone(v);C.image=x,w(new f.Image.filters.BlendImage(C))})}}(i),function(r){var f=r.fabric||(r.fabric={}),_=Math.pow,b=Math.floor,v=Math.sqrt,w=Math.abs,x=Math.round,C=Math.sin,T=Math.ceil,S=f.Image.filters,M=f.util.createClass;S.Resize=M(S.BaseFilter,{type:"Resize",resizeType:"hermite",scaleX:1,scaleY:1,lanczosLobes:3,getUniformLocations:function(O,V){return{uDelta:O.getUniformLocation(V,"uDelta"),uTaps:O.getUniformLocation(V,"uTaps")}},sendUniformData:function(O,V){O.uniform2fv(V.uDelta,this.horizontal?[1/this.width,0]:[0,1/this.height]),O.uniform1fv(V.uTaps,this.taps)},retrieveShader:function(O){var V=this.getFilterWindow(),X=this.type+"_"+V;if(!O.programCache.hasOwnProperty(X)){var Z=this.generateShader(V);O.programCache[X]=this.createProgram(O.context,Z)}return O.programCache[X]},getFilterWindow:function(){var O=this.tempScale;return Math.ceil(this.lanczosLobes/O)},getTaps:function(){for(var O=this.lanczosCreate(this.lanczosLobes),V=this.tempScale,X=this.getFilterWindow(),Z=new Array(X),te=1;te<=X;te++)Z[te-1]=O(te*V);return Z},generateShader:function(Z){for(var V=new Array(Z),X=this.fragmentSourceTOP,Z,te=1;te<=Z;te++)V[te-1]=te+".0 * uDelta";return X+="uniform float uTaps["+Z+`];
`,X+=`void main() {
`,X+=`  vec4 color = texture2D(uTexture, vTexCoord);
`,X+=`  float sum = 1.0;
`,V.forEach(function(J,ie){X+="  color += texture2D(uTexture, vTexCoord + "+J+") * uTaps["+ie+`];
`,X+="  color += texture2D(uTexture, vTexCoord - "+J+") * uTaps["+ie+`];
`,X+="  sum += 2.0 * uTaps["+ie+`];
`}),X+=`  gl_FragColor = color / sum;
`,X+="}",X},fragmentSourceTOP:`precision highp float;
uniform sampler2D uTexture;
uniform vec2 uDelta;
varying vec2 vTexCoord;
`,applyTo:function(O){O.webgl?(O.passes++,this.width=O.sourceWidth,this.horizontal=!0,this.dW=Math.round(this.width*this.scaleX),this.dH=O.sourceHeight,this.tempScale=this.dW/this.width,this.taps=this.getTaps(),O.destinationWidth=this.dW,this._setupFrameBuffer(O),this.applyToWebGL(O),this._swapTextures(O),O.sourceWidth=O.destinationWidth,this.height=O.sourceHeight,this.horizontal=!1,this.dH=Math.round(this.height*this.scaleY),this.tempScale=this.dH/this.height,this.taps=this.getTaps(),O.destinationHeight=this.dH,this._setupFrameBuffer(O),this.applyToWebGL(O),this._swapTextures(O),O.sourceHeight=O.destinationHeight):this.applyTo2d(O)},isNeutralState:function(){return this.scaleX===1&&this.scaleY===1},lanczosCreate:function(O){return function(V){if(V>=O||V<=-O)return 0;if(V<11920929e-14&&V>-11920929e-14)return 1;V*=Math.PI;var X=V/O;return C(V)/V*C(X)/X}},applyTo2d:function(O){var V=O.imageData,X=this.scaleX,Z=this.scaleY;this.rcpScaleX=1/X,this.rcpScaleY=1/Z;var te=V.width,J=V.height,ie=x(te*X),Ee=x(J*Z),Pe;this.resizeType==="sliceHack"?Pe=this.sliceByTwo(O,te,J,ie,Ee):this.resizeType==="hermite"?Pe=this.hermiteFastResize(O,te,J,ie,Ee):this.resizeType==="bilinear"?Pe=this.bilinearFiltering(O,te,J,ie,Ee):this.resizeType==="lanczos"&&(Pe=this.lanczosResize(O,te,J,ie,Ee)),O.imageData=Pe},sliceByTwo:function(O,V,X,Z,te){var J=O.imageData,ie=.5,Ee=!1,Pe=!1,de=V*ie,Te=X*ie,ve=f.filterBackend.resources,_e,ot,it=0,It=0,Xe=V,we=0;for(ve.sliceByTwo||(ve.sliceByTwo=document.createElement("canvas")),_e=ve.sliceByTwo,(_e.width<V*1.5||_e.height<X)&&(_e.width=V*1.5,_e.height=X),ot=_e.getContext("2d"),ot.clearRect(0,0,V*1.5,X),ot.putImageData(J,0,0),Z=b(Z),te=b(te);!Ee||!Pe;)V=de,X=Te,Z<b(de*ie)?de=b(de*ie):(de=Z,Ee=!0),te<b(Te*ie)?Te=b(Te*ie):(Te=te,Pe=!0),ot.drawImage(_e,it,It,V,X,Xe,we,de,Te),it=Xe,It=we,we+=Te;return ot.getImageData(it,It,Z,te)},lanczosResize:function(O,V,X,Z,te){function J(Re){var le,Se,he,me,Be,We,st,Ye,gt,Mt,ri;for(we.x=(Re+.5)*Te,Ce.x=b(we.x),le=0;le<te;le++){for(we.y=(le+.5)*ve,Ce.y=b(we.y),Be=0,We=0,st=0,Ye=0,gt=0,Se=Ce.x-it;Se<=Ce.x+it;Se++)if(!(Se<0||Se>=V)){Mt=b(1e3*w(Se-we.x)),Xe[Mt]||(Xe[Mt]={});for(var ut=Ce.y-It;ut<=Ce.y+It;ut++)ut<0||ut>=X||(ri=b(1e3*w(ut-we.y)),Xe[Mt][ri]||(Xe[Mt][ri]=de(v(_(Mt*_e,2)+_(ri*ot,2))/1e3)),he=Xe[Mt][ri],he>0&&(me=(ut*V+Se)*4,Be+=he,We+=he*ie[me],st+=he*ie[me+1],Ye+=he*ie[me+2],gt+=he*ie[me+3]))}me=(le*Z+Re)*4,Pe[me]=We/Be,Pe[me+1]=st/Be,Pe[me+2]=Ye/Be,Pe[me+3]=gt/Be}return++Re<Z?J(Re):Ee}var ie=O.imageData.data,Ee=O.ctx.createImageData(Z,te),Pe=Ee.data,de=this.lanczosCreate(this.lanczosLobes),Te=this.rcpScaleX,ve=this.rcpScaleY,_e=2/this.rcpScaleX,ot=2/this.rcpScaleY,it=T(Te*this.lanczosLobes/2),It=T(ve*this.lanczosLobes/2),Xe={},we={},Ce={};return J(0)},bilinearFiltering:function(O,V,X,Z,te){var J,ie,Ee,Pe,de,Te,ve,_e,ot,it,It,Xe,we=0,Ce,Re=this.rcpScaleX,le=this.rcpScaleY,Se=4*(V-1),he=O.imageData,me=he.data,Be=O.ctx.createImageData(Z,te),We=Be.data;for(ve=0;ve<te;ve++)for(_e=0;_e<Z;_e++)for(de=b(Re*_e),Te=b(le*ve),ot=Re*_e-de,it=le*ve-Te,Ce=4*(Te*V+de),It=0;It<4;It++)J=me[Ce+It],ie=me[Ce+4+It],Ee=me[Ce+Se+It],Pe=me[Ce+Se+4+It],Xe=J*(1-ot)*(1-it)+ie*ot*(1-it)+Ee*it*(1-ot)+Pe*ot*it,We[we++]=Xe;return Be},hermiteFastResize:function(O,V,X,Z,te){for(var J=this.rcpScaleX,ie=this.rcpScaleY,Ee=T(J/2),Pe=T(ie/2),de=O.imageData,Te=de.data,ve=O.ctx.createImageData(Z,te),_e=ve.data,ot=0;ot<te;ot++)for(var it=0;it<Z;it++){for(var It=(it+ot*Z)*4,Xe=0,we=0,Ce=0,Re=0,le=0,Se=0,he=0,me=(ot+.5)*ie,Be=b(ot*ie);Be<(ot+1)*ie;Be++)for(var We=w(me-(Be+.5))/Pe,st=(it+.5)*J,Ye=We*We,gt=b(it*J);gt<(it+1)*J;gt++){var Mt=w(st-(gt+.5))/Ee,ri=v(Ye+Mt*Mt);ri>1&&ri<-1||(Xe=2*ri*ri*ri-3*ri*ri+1,Xe>0&&(Mt=4*(gt+Be*V),he+=Xe*Te[Mt+3],Ce+=Xe,Te[Mt+3]<255&&(Xe=Xe*Te[Mt+3]/250),Re+=Xe*Te[Mt],le+=Xe*Te[Mt+1],Se+=Xe*Te[Mt+2],we+=Xe))}_e[It]=Re/we,_e[It+1]=le/we,_e[It+2]=Se/we,_e[It+3]=he/Ce}return ve},toObject:function(){return{type:this.type,scaleX:this.scaleX,scaleY:this.scaleY,resizeType:this.resizeType,lanczosLobes:this.lanczosLobes}}}),f.Image.filters.Resize.fromObject=f.Image.filters.BaseFilter.fromObject}(i),function(r){var f=r.fabric||(r.fabric={}),_=f.Image.filters,b=f.util.createClass;_.Contrast=b(_.BaseFilter,{type:"Contrast",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uContrast;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
float contrastF = 1.015 * (uContrast + 1.0) / (1.0 * (1.015 - uContrast));
color.rgb = contrastF * (color.rgb - 0.5) + 0.5;
gl_FragColor = color;
}`,contrast:0,mainParameter:"contrast",applyTo2d:function(v){if(this.contrast!==0){var w=v.imageData,x,T,C=w.data,T=C.length,S=Math.floor(this.contrast*255),M=259*(S+255)/(255*(259-S));for(x=0;x<T;x+=4)C[x]=M*(C[x]-128)+128,C[x+1]=M*(C[x+1]-128)+128,C[x+2]=M*(C[x+2]-128)+128}},getUniformLocations:function(v,w){return{uContrast:v.getUniformLocation(w,"uContrast")}},sendUniformData:function(v,w){v.uniform1f(w.uContrast,this.contrast)}}),f.Image.filters.Contrast.fromObject=f.Image.filters.BaseFilter.fromObject}(i),function(r){var f=r.fabric||(r.fabric={}),_=f.Image.filters,b=f.util.createClass;_.Saturation=b(_.BaseFilter,{type:"Saturation",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uSaturation;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
float rgMax = max(color.r, color.g);
float rgbMax = max(rgMax, color.b);
color.r += rgbMax != color.r ? (rgbMax - color.r) * uSaturation : 0.00;
color.g += rgbMax != color.g ? (rgbMax - color.g) * uSaturation : 0.00;
color.b += rgbMax != color.b ? (rgbMax - color.b) * uSaturation : 0.00;
gl_FragColor = color;
}`,saturation:0,mainParameter:"saturation",applyTo2d:function(v){if(this.saturation!==0){var w=v.imageData,x=w.data,C=x.length,T=-this.saturation,S,M;for(S=0;S<C;S+=4)M=Math.max(x[S],x[S+1],x[S+2]),x[S]+=M!==x[S]?(M-x[S])*T:0,x[S+1]+=M!==x[S+1]?(M-x[S+1])*T:0,x[S+2]+=M!==x[S+2]?(M-x[S+2])*T:0}},getUniformLocations:function(v,w){return{uSaturation:v.getUniformLocation(w,"uSaturation")}},sendUniformData:function(v,w){v.uniform1f(w.uSaturation,-this.saturation)}}),f.Image.filters.Saturation.fromObject=f.Image.filters.BaseFilter.fromObject}(i),function(r){var f=r.fabric||(r.fabric={}),_=f.Image.filters,b=f.util.createClass;_.Vibrance=b(_.BaseFilter,{type:"Vibrance",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uVibrance;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
float max = max(color.r, max(color.g, color.b));
float avg = (color.r + color.g + color.b) / 3.0;
float amt = (abs(max - avg) * 2.0) * uVibrance;
color.r += max != color.r ? (max - color.r) * amt : 0.00;
color.g += max != color.g ? (max - color.g) * amt : 0.00;
color.b += max != color.b ? (max - color.b) * amt : 0.00;
gl_FragColor = color;
}`,vibrance:0,mainParameter:"vibrance",applyTo2d:function(v){if(this.vibrance!==0){var w=v.imageData,x=w.data,C=x.length,T=-this.vibrance,S,M,O,V;for(S=0;S<C;S+=4)M=Math.max(x[S],x[S+1],x[S+2]),O=(x[S]+x[S+1]+x[S+2])/3,V=Math.abs(M-O)*2/255*T,x[S]+=M!==x[S]?(M-x[S])*V:0,x[S+1]+=M!==x[S+1]?(M-x[S+1])*V:0,x[S+2]+=M!==x[S+2]?(M-x[S+2])*V:0}},getUniformLocations:function(v,w){return{uVibrance:v.getUniformLocation(w,"uVibrance")}},sendUniformData:function(v,w){v.uniform1f(w.uVibrance,-this.vibrance)}}),f.Image.filters.Vibrance.fromObject=f.Image.filters.BaseFilter.fromObject}(i),function(r){var f=r.fabric||(r.fabric={}),_=f.Image.filters,b=f.util.createClass;_.Blur=b(_.BaseFilter,{type:"Blur",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform vec2 uDelta;
varying vec2 vTexCoord;
const float nSamples = 15.0;
vec3 v3offset = vec3(12.9898, 78.233, 151.7182);
float random(vec3 scale) {
return fract(sin(dot(gl_FragCoord.xyz, scale)) * 43758.5453);
}
void main() {
vec4 color = vec4(0.0);
float total = 0.0;
float offset = random(v3offset);
for (float t = -nSamples; t <= nSamples; t++) {
float percent = (t + offset - 0.5) / nSamples;
float weight = 1.0 - abs(percent);
color += texture2D(uTexture, vTexCoord + uDelta * percent) * weight;
total += weight;
}
gl_FragColor = color / total;
}`,blur:0,mainParameter:"blur",applyTo:function(v){v.webgl?(this.aspectRatio=v.sourceWidth/v.sourceHeight,v.passes++,this._setupFrameBuffer(v),this.horizontal=!0,this.applyToWebGL(v),this._swapTextures(v),this._setupFrameBuffer(v),this.horizontal=!1,this.applyToWebGL(v),this._swapTextures(v)):this.applyTo2d(v)},applyTo2d:function(v){v.imageData=this.simpleBlur(v)},simpleBlur:function(v){var w=v.filterBackend.resources,x,C,T=v.imageData.width,S=v.imageData.height;w.blurLayer1||(w.blurLayer1=f.util.createCanvasElement(),w.blurLayer2=f.util.createCanvasElement()),x=w.blurLayer1,C=w.blurLayer2,(x.width!==T||x.height!==S)&&(C.width=x.width=T,C.height=x.height=S);var M=x.getContext("2d"),O=C.getContext("2d"),V=15,X,Z,te,J,ie=this.blur*.06*.5;for(M.putImageData(v.imageData,0,0),O.clearRect(0,0,T,S),J=-V;J<=V;J++)X=(Math.random()-.5)/4,Z=J/V,te=ie*Z*T+X,O.globalAlpha=1-Math.abs(Z),O.drawImage(x,te,X),M.drawImage(C,0,0),O.globalAlpha=1,O.clearRect(0,0,C.width,C.height);for(J=-V;J<=V;J++)X=(Math.random()-.5)/4,Z=J/V,te=ie*Z*S+X,O.globalAlpha=1-Math.abs(Z),O.drawImage(x,X,te),M.drawImage(C,0,0),O.globalAlpha=1,O.clearRect(0,0,C.width,C.height);v.ctx.drawImage(x,0,0);var Ee=v.ctx.getImageData(0,0,x.width,x.height);return M.globalAlpha=1,M.clearRect(0,0,x.width,x.height),Ee},getUniformLocations:function(v,w){return{delta:v.getUniformLocation(w,"uDelta")}},sendUniformData:function(v,w){var x=this.chooseRightDelta();v.uniform2fv(w.delta,x)},chooseRightDelta:function(){var v=1,w=[0,0],x;return this.horizontal?this.aspectRatio>1&&(v=1/this.aspectRatio):this.aspectRatio<1&&(v=this.aspectRatio),x=v*this.blur*.12,this.horizontal?w[0]=x:w[1]=x,w}}),_.Blur.fromObject=f.Image.filters.BaseFilter.fromObject}(i),function(r){var f=r.fabric||(r.fabric={}),_=f.Image.filters,b=f.util.createClass;_.Gamma=b(_.BaseFilter,{type:"Gamma",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform vec3 uGamma;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
vec3 correction = (1.0 / uGamma);
color.r = pow(color.r, correction.r);
color.g = pow(color.g, correction.g);
color.b = pow(color.b, correction.b);
gl_FragColor = color;
gl_FragColor.rgb *= color.a;
}`,gamma:[1,1,1],mainParameter:"gamma",initialize:function(v){this.gamma=[1,1,1],_.BaseFilter.prototype.initialize.call(this,v)},applyTo2d:function(v){var w=v.imageData,x=w.data,C=this.gamma,T=x.length,S=1/C[0],M=1/C[1],O=1/C[2],V;for(this.rVals||(this.rVals=new Uint8Array(256),this.gVals=new Uint8Array(256),this.bVals=new Uint8Array(256)),V=0,T=256;V<T;V++)this.rVals[V]=Math.pow(V/255,S)*255,this.gVals[V]=Math.pow(V/255,M)*255,this.bVals[V]=Math.pow(V/255,O)*255;for(V=0,T=x.length;V<T;V+=4)x[V]=this.rVals[x[V]],x[V+1]=this.gVals[x[V+1]],x[V+2]=this.bVals[x[V+2]]},getUniformLocations:function(v,w){return{uGamma:v.getUniformLocation(w,"uGamma")}},sendUniformData:function(v,w){v.uniform3fv(w.uGamma,this.gamma)}}),f.Image.filters.Gamma.fromObject=f.Image.filters.BaseFilter.fromObject}(i),function(r){var f=r.fabric||(r.fabric={}),_=f.Image.filters,b=f.util.createClass;_.Composed=b(_.BaseFilter,{type:"Composed",subFilters:[],initialize:function(v){this.callSuper("initialize",v),this.subFilters=this.subFilters.slice(0)},applyTo:function(v){v.passes+=this.subFilters.length-1,this.subFilters.forEach(function(w){w.applyTo(v)})},toObject:function(){return f.util.object.extend(this.callSuper("toObject"),{subFilters:this.subFilters.map(function(v){return v.toObject()})})},isNeutralState:function(){return!this.subFilters.some(function(v){return!v.isNeutralState()})}}),f.Image.filters.Composed.fromObject=function(v,w){var x=v.subFilters||[],C=x.map(function(S){return new f.Image.filters[S.type](S)}),T=new f.Image.filters.Composed({subFilters:C});return w&&w(T),T}}(i),function(r){var f=r.fabric||(r.fabric={}),_=f.Image.filters,b=f.util.createClass;_.HueRotation=b(_.ColorMatrix,{type:"HueRotation",rotation:0,mainParameter:"rotation",calculateMatrix:function(){var v=this.rotation*Math.PI,w=f.util.cos(v),x=f.util.sin(v),C=1/3,T=Math.sqrt(C)*x,S=1-w;this.matrix=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],this.matrix[0]=w+S/3,this.matrix[1]=C*S-T,this.matrix[2]=C*S+T,this.matrix[5]=C*S+T,this.matrix[6]=w+C*S,this.matrix[7]=C*S-T,this.matrix[10]=C*S-T,this.matrix[11]=C*S+T,this.matrix[12]=w+C*S},isNeutralState:function(v){return this.calculateMatrix(),_.BaseFilter.prototype.isNeutralState.call(this,v)},applyTo:function(v){this.calculateMatrix(),_.BaseFilter.prototype.applyTo.call(this,v)}}),f.Image.filters.HueRotation.fromObject=f.Image.filters.BaseFilter.fromObject}(i),function(r){var f=r.fabric||(r.fabric={}),_=f.util.object.clone;if(f.Text){f.warn("fabric.Text is already defined");return}var b="fontFamily fontWeight fontSize text underline overline linethrough textAlign fontStyle lineHeight textBackgroundColor charSpacing styles direction path pathStartOffset pathSide pathAlign".split(" ");f.Text=f.util.createClass(f.Object,{_dimensionAffectingProps:["fontSize","fontWeight","fontFamily","fontStyle","lineHeight","text","charSpacing","textAlign","styles","path","pathStartOffset","pathSide","pathAlign"],_reNewline:/\r?\n/,_reSpacesAndTabs:/[ \t\r]/g,_reSpaceAndTab:/[ \t\r]/,_reWords:/\S+/g,type:"text",fontSize:40,fontWeight:"normal",fontFamily:"Times New Roman",underline:!1,overline:!1,linethrough:!1,textAlign:"left",fontStyle:"normal",lineHeight:1.16,superscript:{size:.6,baseline:-.35},subscript:{size:.6,baseline:.11},textBackgroundColor:"",stateProperties:f.Object.prototype.stateProperties.concat(b),cacheProperties:f.Object.prototype.cacheProperties.concat(b),stroke:null,shadow:null,path:null,pathStartOffset:0,pathSide:"left",pathAlign:"baseline",_fontSizeFraction:.222,offsets:{underline:.1,linethrough:-.315,overline:-.88},_fontSizeMult:1.13,charSpacing:0,styles:null,_measuringContext:null,deltaY:0,direction:"ltr",_styleProperties:["stroke","strokeWidth","fill","fontFamily","fontSize","fontWeight","fontStyle","underline","overline","linethrough","deltaY","textBackgroundColor"],__charBounds:[],CACHE_FONT_SIZE:400,MIN_TEXT_WIDTH:2,initialize:function(v,w){this.styles=w?w.styles||{}:{},this.text=v,this.__skipDimension=!0,this.callSuper("initialize",w),this.path&&this.setPathInfo(),this.__skipDimension=!1,this.initDimensions(),this.setCoords(),this.setupState({propertySet:"_dimensionAffectingProps"})},setPathInfo:function(){var v=this.path;v&&(v.segmentsInfo=f.util.getPathSegmentsInfo(v.path))},getMeasuringContext:function(){return f._measuringContext||(f._measuringContext=this.canvas&&this.canvas.contextCache||f.util.createCanvasElement().getContext("2d")),f._measuringContext},_splitText:function(){var v=this._splitTextIntoLines(this.text);return this.textLines=v.lines,this._textLines=v.graphemeLines,this._unwrappedTextLines=v._unwrappedLines,this._text=v.graphemeText,v},initDimensions:function(){this.__skipDimension||(this._splitText(),this._clearCache(),this.path?(this.width=this.path.width,this.height=this.path.height):(this.width=this.calcTextWidth()||this.cursorWidth||this.MIN_TEXT_WIDTH,this.height=this.calcTextHeight()),this.textAlign.indexOf("justify")!==-1&&this.enlargeSpaces(),this.saveState({propertySet:"_dimensionAffectingProps"}))},enlargeSpaces:function(){for(var v,w,x,C,T,S,M,O=0,V=this._textLines.length;O<V;O++)if(!(this.textAlign!=="justify"&&(O===V-1||this.isEndOfWrapping(O)))&&(C=0,T=this._textLines[O],w=this.getLineWidth(O),w<this.width&&(M=this.textLines[O].match(this._reSpacesAndTabs)))){x=M.length,v=(this.width-w)/x;for(var X=0,Z=T.length;X<=Z;X++)S=this.__charBounds[O][X],this._reSpaceAndTab.test(T[X])?(S.width+=v,S.kernedWidth+=v,S.left+=C,C+=v):S.left+=C}},isEndOfWrapping:function(v){return v===this._textLines.length-1},missingNewlineOffset:function(){return 1},toString:function(){return"#<fabric.Text ("+this.complexity()+'): { "text": "'+this.text+'", "fontFamily": "'+this.fontFamily+'" }>'},_getCacheCanvasDimensions:function(){var v=this.callSuper("_getCacheCanvasDimensions"),w=this.fontSize;return v.width+=w*v.zoomX,v.height+=w*v.zoomY,v},_render:function(v){var w=this.path;w&&!w.isNotVisible()&&w._render(v),this._setTextStyles(v),this._renderTextLinesBackground(v),this._renderTextDecoration(v,"underline"),this._renderText(v),this._renderTextDecoration(v,"overline"),this._renderTextDecoration(v,"linethrough")},_renderText:function(v){this.paintFirst==="stroke"?(this._renderTextStroke(v),this._renderTextFill(v)):(this._renderTextFill(v),this._renderTextStroke(v))},_setTextStyles:function(v,w,x){if(v.textBaseline="alphabetical",this.path)switch(this.pathAlign){case"center":v.textBaseline="middle";break;case"ascender":v.textBaseline="top";break;case"descender":v.textBaseline="bottom";break}v.font=this._getFontDeclaration(w,x)},calcTextWidth:function(){for(var v=this.getLineWidth(0),w=1,x=this._textLines.length;w<x;w++){var C=this.getLineWidth(w);C>v&&(v=C)}return v},_renderTextLine:function(v,w,x,C,T,S){this._renderChars(v,w,x,C,T,S)},_renderTextLinesBackground:function(v){if(!(!this.textBackgroundColor&&!this.styleHas("textBackgroundColor"))){for(var w,x,C=v.fillStyle,T,S,M=this._getLeftOffset(),O=this._getTopOffset(),V=0,X=0,Z,te,J=this.path,ie,Ee=0,Pe=this._textLines.length;Ee<Pe;Ee++){if(w=this.getHeightOfLine(Ee),!this.textBackgroundColor&&!this.styleHas("textBackgroundColor",Ee)){O+=w;continue}T=this._textLines[Ee],x=this._getLineLeftOffset(Ee),X=0,V=0,S=this.getValueOfPropertyAt(Ee,0,"textBackgroundColor");for(var de=0,Te=T.length;de<Te;de++)Z=this.__charBounds[Ee][de],te=this.getValueOfPropertyAt(Ee,de,"textBackgroundColor"),J?(v.save(),v.translate(Z.renderLeft,Z.renderTop),v.rotate(Z.angle),v.fillStyle=te,te&&v.fillRect(-Z.width/2,-w/this.lineHeight*(1-this._fontSizeFraction),Z.width,w/this.lineHeight),v.restore()):te!==S?(ie=M+x+V,this.direction==="rtl"&&(ie=this.width-ie-X),v.fillStyle=S,S&&v.fillRect(ie,O,X,w/this.lineHeight),V=Z.left,X=Z.width,S=te):X+=Z.kernedWidth;te&&!J&&(ie=M+x+V,this.direction==="rtl"&&(ie=this.width-ie-X),v.fillStyle=te,v.fillRect(ie,O,X,w/this.lineHeight)),O+=w}v.fillStyle=C,this._removeShadow(v)}},getFontCache:function(v){var w=v.fontFamily.toLowerCase();f.charWidthsCache[w]||(f.charWidthsCache[w]={});var x=f.charWidthsCache[w],C=v.fontStyle.toLowerCase()+"_"+(v.fontWeight+"").toLowerCase();return x[C]||(x[C]={}),x[C]},_measureChar:function(v,w,x,C){var T=this.getFontCache(w),S=this._getFontDeclaration(w),M=this._getFontDeclaration(C),O=x+v,V=S===M,X,Z,te,J=w.fontSize/this.CACHE_FONT_SIZE,ie;if(x&&T[x]!==void 0&&(te=T[x]),T[v]!==void 0&&(ie=X=T[v]),V&&T[O]!==void 0&&(Z=T[O],ie=Z-te),X===void 0||te===void 0||Z===void 0){var Ee=this.getMeasuringContext();this._setTextStyles(Ee,w,!0)}return X===void 0&&(ie=X=Ee.measureText(v).width,T[v]=X),te===void 0&&V&&x&&(te=Ee.measureText(x).width,T[x]=te),V&&Z===void 0&&(Z=Ee.measureText(O).width,T[O]=Z,ie=Z-te),{width:X*J,kernedWidth:ie*J}},getHeightOfChar:function(v,w){return this.getValueOfPropertyAt(v,w,"fontSize")},measureLine:function(v){var w=this._measureLine(v);return this.charSpacing!==0&&(w.width-=this._getWidthOfCharSpacing()),w.width<0&&(w.width=0),w},_measureLine:function(v){var w=0,x,C,T=this._textLines[v],S,M,O=0,V=new Array(T.length),X=0,Z,te,J=this.path,ie=this.pathSide==="right";for(this.__charBounds[v]=V,x=0;x<T.length;x++)C=T[x],M=this._getGraphemeBox(C,v,x,S),V[x]=M,w+=M.kernedWidth,S=C;if(V[x]={left:M?M.left+M.width:0,width:0,kernedWidth:0,height:this.fontSize},J){switch(te=J.segmentsInfo[J.segmentsInfo.length-1].length,Z=f.util.getPointOnPath(J.path,0,J.segmentsInfo),Z.x+=J.pathOffset.x,Z.y+=J.pathOffset.y,this.textAlign){case"left":X=ie?te-w:0;break;case"center":X=(te-w)/2;break;case"right":X=ie?0:te-w;break}for(X+=this.pathStartOffset*(ie?-1:1),x=ie?T.length-1:0;ie?x>=0:x<T.length;ie?x--:x++)M=V[x],X>te?X%=te:X<0&&(X+=te),this._setGraphemeOnPath(X,M,Z),X+=M.kernedWidth}return{width:w,numOfSpaces:O}},_setGraphemeOnPath:function(v,w,x){var C=v+w.kernedWidth/2,T=this.path,S=f.util.getPointOnPath(T.path,C,T.segmentsInfo);w.renderLeft=S.x-x.x,w.renderTop=S.y-x.y,w.angle=S.angle+(this.pathSide==="right"?Math.PI:0)},_getGraphemeBox:function(v,w,x,C,T){var S=this.getCompleteStyleDeclaration(w,x),M=C?this.getCompleteStyleDeclaration(w,x-1):{},O=this._measureChar(v,S,C,M),V=O.kernedWidth,X=O.width,Z;this.charSpacing!==0&&(Z=this._getWidthOfCharSpacing(),X+=Z,V+=Z);var te={width:X,left:0,height:S.fontSize,kernedWidth:V,deltaY:S.deltaY};if(x>0&&!T){var J=this.__charBounds[w][x-1];te.left=J.left+J.width+O.kernedWidth-O.width}return te},getHeightOfLine:function(v){if(this.__lineHeights[v])return this.__lineHeights[v];for(var w=this._textLines[v],x=this.getHeightOfChar(v,0),C=1,T=w.length;C<T;C++)x=Math.max(this.getHeightOfChar(v,C),x);return this.__lineHeights[v]=x*this.lineHeight*this._fontSizeMult},calcTextHeight:function(){for(var v,w=0,x=0,C=this._textLines.length;x<C;x++)v=this.getHeightOfLine(x),w+=x===C-1?v/this.lineHeight:v;return w},_getLeftOffset:function(){return this.direction==="ltr"?-this.width/2:this.width/2},_getTopOffset:function(){return-this.height/2},_renderTextCommon:function(v,w){v.save();for(var x=0,C=this._getLeftOffset(),T=this._getTopOffset(),S=0,M=this._textLines.length;S<M;S++){var O=this.getHeightOfLine(S),V=O/this.lineHeight,X=this._getLineLeftOffset(S);this._renderTextLine(w,v,this._textLines[S],C+X,T+x+V,S),x+=O}v.restore()},_renderTextFill:function(v){!this.fill&&!this.styleHas("fill")||this._renderTextCommon(v,"fillText")},_renderTextStroke:function(v){(!this.stroke||this.strokeWidth===0)&&this.isEmptyStyles()||(this.shadow&&!this.shadow.affectStroke&&this._removeShadow(v),v.save(),this._setLineDash(v,this.strokeDashArray),v.beginPath(),this._renderTextCommon(v,"strokeText"),v.closePath(),v.restore())},_renderChars:function(v,w,x,C,T,S){var M=this.getHeightOfLine(S),O=this.textAlign.indexOf("justify")!==-1,V,X,Z="",te,J=0,ie,Ee=this.path,Pe=!O&&this.charSpacing===0&&this.isEmptyStyles(S)&&!Ee,de=this.direction==="ltr",Te=this.direction==="ltr"?1:-1,ve,_e=w.canvas.getAttribute("dir");if(w.save(),_e!==this.direction&&(w.canvas.setAttribute("dir",de?"ltr":"rtl"),w.direction=de?"ltr":"rtl",w.textAlign=de?"left":"right"),T-=M*this._fontSizeFraction/this.lineHeight,Pe){this._renderChar(v,w,S,0,x.join(""),C,T,M),w.restore();return}for(var ot=0,it=x.length-1;ot<=it;ot++)ie=ot===it||this.charSpacing||Ee,Z+=x[ot],te=this.__charBounds[S][ot],J===0?(C+=Te*(te.kernedWidth-te.width),J+=te.width):J+=te.kernedWidth,O&&!ie&&this._reSpaceAndTab.test(x[ot])&&(ie=!0),ie||(V=V||this.getCompleteStyleDeclaration(S,ot),X=this.getCompleteStyleDeclaration(S,ot+1),ie=f.util.hasStyleChanged(V,X,!1)),ie&&(Ee?(w.save(),w.translate(te.renderLeft,te.renderTop),w.rotate(te.angle),this._renderChar(v,w,S,ot,Z,-J/2,0,M),w.restore()):(ve=C,this._renderChar(v,w,S,ot,Z,ve,T,M)),Z="",V=X,C+=Te*J,J=0);w.restore()},_applyPatternGradientTransformText:function(v){var w=f.util.createCanvasElement(),x,C=this.width+this.strokeWidth,T=this.height+this.strokeWidth;return w.width=C,w.height=T,x=w.getContext("2d"),x.beginPath(),x.moveTo(0,0),x.lineTo(C,0),x.lineTo(C,T),x.lineTo(0,T),x.closePath(),x.translate(C/2,T/2),x.fillStyle=v.toLive(x),this._applyPatternGradientTransform(x,v),x.fill(),x.createPattern(w,"no-repeat")},handleFiller:function(v,w,x){var C,T;return x.toLive?x.gradientUnits==="percentage"||x.gradientTransform||x.patternTransform?(C=-this.width/2,T=-this.height/2,v.translate(C,T),v[w]=this._applyPatternGradientTransformText(x),{offsetX:C,offsetY:T}):(v[w]=x.toLive(v,this),this._applyPatternGradientTransform(v,x)):(v[w]=x,{offsetX:0,offsetY:0})},_setStrokeStyles:function(v,w){return v.lineWidth=w.strokeWidth,v.lineCap=this.strokeLineCap,v.lineDashOffset=this.strokeDashOffset,v.lineJoin=this.strokeLineJoin,v.miterLimit=this.strokeMiterLimit,this.handleFiller(v,"strokeStyle",w.stroke)},_setFillStyles:function(v,w){return this.handleFiller(v,"fillStyle",w.fill)},_renderChar:function(v,w,x,C,T,S,M){var O=this._getStyleDeclaration(x,C),V=this.getCompleteStyleDeclaration(x,C),X=v==="fillText"&&V.fill,Z=v==="strokeText"&&V.stroke&&V.strokeWidth,te,J;!Z&&!X||(w.save(),X&&(te=this._setFillStyles(w,V)),Z&&(J=this._setStrokeStyles(w,V)),w.font=this._getFontDeclaration(V),O&&O.textBackgroundColor&&this._removeShadow(w),O&&O.deltaY&&(M+=O.deltaY),X&&w.fillText(T,S-te.offsetX,M-te.offsetY),Z&&w.strokeText(T,S-J.offsetX,M-J.offsetY),w.restore())},setSuperscript:function(v,w){return this._setScript(v,w,this.superscript)},setSubscript:function(v,w){return this._setScript(v,w,this.subscript)},_setScript:function(v,w,x){var C=this.get2DCursorLocation(v,!0),T=this.getValueOfPropertyAt(C.lineIndex,C.charIndex,"fontSize"),S=this.getValueOfPropertyAt(C.lineIndex,C.charIndex,"deltaY"),M={fontSize:T*x.size,deltaY:S+T*x.baseline};return this.setSelectionStyles(M,v,w),this},_getLineLeftOffset:function(v){var w=this.getLineWidth(v),x=this.width-w,C=this.textAlign,T=this.direction,M,S=0,M=this.isEndOfWrapping(v);return C==="justify"||C==="justify-center"&&!M||C==="justify-right"&&!M||C==="justify-left"&&!M?0:(C==="center"&&(S=x/2),C==="right"&&(S=x),C==="justify-center"&&(S=x/2),C==="justify-right"&&(S=x),T==="rtl"&&(S-=x),S)},_clearCache:function(){this.__lineWidths=[],this.__lineHeights=[],this.__charBounds=[]},_shouldClearDimensionCache:function(){var v=this._forceClearCache;return v||(v=this.hasStateChanged("_dimensionAffectingProps")),v&&(this.dirty=!0,this._forceClearCache=!1),v},getLineWidth:function(v){if(this.__lineWidths[v]!==void 0)return this.__lineWidths[v];var w=this.measureLine(v),x=w.width;return this.__lineWidths[v]=x,x},_getWidthOfCharSpacing:function(){return this.charSpacing!==0?this.fontSize*this.charSpacing/1e3:0},getValueOfPropertyAt:function(v,w,x){var C=this._getStyleDeclaration(v,w);return C&&typeof C[x]<"u"?C[x]:this[x]},_renderTextDecoration:function(v,w){if(!(!this[w]&&!this.styleHas(w))){for(var x,C,T,S,M,O,V,X,Z=this._getLeftOffset(),te=this._getTopOffset(),J,ie,Ee,Pe,de,Te,ve,_e,ot=this.path,it=this._getWidthOfCharSpacing(),It=this.offsets[w],Xe=0,we=this._textLines.length;Xe<we;Xe++){if(x=this.getHeightOfLine(Xe),!this[w]&&!this.styleHas(w,Xe)){te+=x;continue}V=this._textLines[Xe],Te=x/this.lineHeight,S=this._getLineLeftOffset(Xe),ie=0,Ee=0,X=this.getValueOfPropertyAt(Xe,0,w),_e=this.getValueOfPropertyAt(Xe,0,"fill"),J=te+Te*(1-this._fontSizeFraction),C=this.getHeightOfChar(Xe,0),M=this.getValueOfPropertyAt(Xe,0,"deltaY");for(var Ce=0,Re=V.length;Ce<Re;Ce++)if(Pe=this.__charBounds[Xe][Ce],de=this.getValueOfPropertyAt(Xe,Ce,w),ve=this.getValueOfPropertyAt(Xe,Ce,"fill"),T=this.getHeightOfChar(Xe,Ce),O=this.getValueOfPropertyAt(Xe,Ce,"deltaY"),ot&&de&&ve)v.save(),v.fillStyle=_e,v.translate(Pe.renderLeft,Pe.renderTop),v.rotate(Pe.angle),v.fillRect(-Pe.kernedWidth/2,It*T+O,Pe.kernedWidth,this.fontSize/15),v.restore();else if((de!==X||ve!==_e||T!==C||O!==M)&&Ee>0){var le=Z+S+ie;this.direction==="rtl"&&(le=this.width-le-Ee),X&&_e&&(v.fillStyle=_e,v.fillRect(le,J+It*C+M,Ee,this.fontSize/15)),ie=Pe.left,Ee=Pe.width,X=de,_e=ve,C=T,M=O}else Ee+=Pe.kernedWidth;var le=Z+S+ie;this.direction==="rtl"&&(le=this.width-le-Ee),v.fillStyle=ve,de&&ve&&v.fillRect(le,J+It*C+M,Ee-it,this.fontSize/15),te+=x}this._removeShadow(v)}},_getFontDeclaration:function(v,w){var x=v||this,C=this.fontFamily,T=f.Text.genericFonts.indexOf(C.toLowerCase())>-1,S=C===void 0||C.indexOf("'")>-1||C.indexOf(",")>-1||C.indexOf('"')>-1||T?x.fontFamily:'"'+x.fontFamily+'"';return[f.isLikelyNode?x.fontWeight:x.fontStyle,f.isLikelyNode?x.fontStyle:x.fontWeight,w?this.CACHE_FONT_SIZE+"px":x.fontSize+"px",S].join(" ")},render:function(v){!this.visible||this.canvas&&this.canvas.skipOffscreen&&!this.group&&!this.isOnScreen()||(this._shouldClearDimensionCache()&&this.initDimensions(),this.callSuper("render",v))},_splitTextIntoLines:function(v){for(var w=v.split(this._reNewline),x=new Array(w.length),C=[`
`],T=[],S=0;S<w.length;S++)x[S]=f.util.string.graphemeSplit(w[S]),T=T.concat(x[S],C);return T.pop(),{_unwrappedLines:x,lines:w,graphemeText:T,graphemeLines:x}},toObject:function(v){var w=b.concat(v),x=this.callSuper("toObject",w);return x.styles=f.util.stylesToArray(this.styles,this.text),x.path&&(x.path=this.path.toObject()),x},set:function(v,w){this.callSuper("set",v,w);var x=!1,C=!1;if(typeof v=="object")for(var T in v)T==="path"&&this.setPathInfo(),x=x||this._dimensionAffectingProps.indexOf(T)!==-1,C=C||T==="path";else x=this._dimensionAffectingProps.indexOf(v)!==-1,C=v==="path";return C&&this.setPathInfo(),x&&(this.initDimensions(),this.setCoords()),this},complexity:function(){return 1}}),f.Text.ATTRIBUTE_NAMES=f.SHARED_ATTRIBUTES.concat("x y dx dy font-family font-style font-weight font-size letter-spacing text-decoration text-anchor".split(" ")),f.Text.DEFAULT_SVG_FONT_SIZE=16,f.Text.fromElement=function(v,w,x){if(!v)return w(null);var C=f.parseAttributes(v,f.Text.ATTRIBUTE_NAMES),T=C.textAnchor||"left";if(x=f.util.object.extend(x?_(x):{},C),x.top=x.top||0,x.left=x.left||0,C.textDecoration){var S=C.textDecoration;S.indexOf("underline")!==-1&&(x.underline=!0),S.indexOf("overline")!==-1&&(x.overline=!0),S.indexOf("line-through")!==-1&&(x.linethrough=!0),delete x.textDecoration}"dx"in C&&(x.left+=C.dx),"dy"in C&&(x.top+=C.dy),"fontSize"in x||(x.fontSize=f.Text.DEFAULT_SVG_FONT_SIZE);var M="";"textContent"in v?M=v.textContent:"firstChild"in v&&v.firstChild!==null&&"data"in v.firstChild&&v.firstChild.data!==null&&(M=v.firstChild.data),M=M.replace(/^\s+|\s+$|\n+/g,"").replace(/\s+/g," ");var O=x.strokeWidth;x.strokeWidth=0;var V=new f.Text(M,x),X=V.getScaledHeight()/V.height,Z=(V.height+V.strokeWidth)*V.lineHeight-V.height,te=Z*X,J=V.getScaledHeight()+te,ie=0;T==="center"&&(ie=V.getScaledWidth()/2),T==="right"&&(ie=V.getScaledWidth()),V.set({left:V.left-ie,top:V.top-(J-V.fontSize*(.07+V._fontSizeFraction))/V.lineHeight,strokeWidth:typeof O<"u"?O:1}),w(V)},f.Text.fromObject=function(v,w){var x=_(v),C=v.path;return delete x.path,f.Object._fromObject("Text",x,function(T){T.styles=f.util.stylesFromArray(v.styles,v.text),C?f.Object._fromObject("Path",C,function(S){T.set("path",S),w(T)},"path"):w(T)},"text")},f.Text.genericFonts=["sans-serif","serif","cursive","fantasy","monospace"],f.util.createAccessors&&f.util.createAccessors(f.Text)}(i),function(){e.util.object.extend(e.Text.prototype,{isEmptyStyles:function(r){if(!this.styles||typeof r<"u"&&!this.styles[r])return!0;var f=typeof r>"u"?this.styles:{line:this.styles[r]};for(var _ in f)for(var b in f[_])for(var v in f[_][b])return!1;return!0},styleHas:function(r,f){if(!this.styles||!r||r===""||typeof f<"u"&&!this.styles[f])return!1;var _=typeof f>"u"?this.styles:{0:this.styles[f]};for(var b in _)for(var v in _[b])if(typeof _[b][v][r]<"u")return!0;return!1},cleanStyle:function(r){if(!this.styles||!r||r==="")return!1;var f=this.styles,_=0,b,v,w=!0,x=0,C;for(var T in f){b=0;for(var S in f[T]){var C=f[T][S],M=C.hasOwnProperty(r);_++,M?(v?C[r]!==v&&(w=!1):v=C[r],C[r]===this[r]&&delete C[r]):w=!1,Object.keys(C).length!==0?b++:delete f[T][S]}b===0&&delete f[T]}for(var O=0;O<this._textLines.length;O++)x+=this._textLines[O].length;w&&_===x&&(this[r]=v,this.removeStyle(r))},removeStyle:function(r){if(!(!this.styles||!r||r==="")){var f=this.styles,_,b,v;for(b in f){_=f[b];for(v in _)delete _[v][r],Object.keys(_[v]).length===0&&delete _[v];Object.keys(_).length===0&&delete f[b]}}},_extendStyles:function(r,f){var _=this.get2DCursorLocation(r);this._getLineStyle(_.lineIndex)||this._setLineStyle(_.lineIndex),this._getStyleDeclaration(_.lineIndex,_.charIndex)||this._setStyleDeclaration(_.lineIndex,_.charIndex,{}),e.util.object.extend(this._getStyleDeclaration(_.lineIndex,_.charIndex),f)},get2DCursorLocation:function(r,f){typeof r>"u"&&(r=this.selectionStart);for(var _=f?this._unwrappedTextLines:this._textLines,b=_.length,v=0;v<b;v++){if(r<=_[v].length)return{lineIndex:v,charIndex:r};r-=_[v].length+this.missingNewlineOffset(v)}return{lineIndex:v-1,charIndex:_[v-1].length<r?_[v-1].length:r}},getSelectionStyles:function(r,f,_){typeof r>"u"&&(r=this.selectionStart||0),typeof f>"u"&&(f=this.selectionEnd||r);for(var b=[],v=r;v<f;v++)b.push(this.getStyleAtPosition(v,_));return b},getStyleAtPosition:function(r,f){var _=this.get2DCursorLocation(r),b=f?this.getCompleteStyleDeclaration(_.lineIndex,_.charIndex):this._getStyleDeclaration(_.lineIndex,_.charIndex);return b||{}},setSelectionStyles:function(r,f,_){typeof f>"u"&&(f=this.selectionStart||0),typeof _>"u"&&(_=this.selectionEnd||f);for(var b=f;b<_;b++)this._extendStyles(b,r);return this._forceClearCache=!0,this},_getStyleDeclaration:function(r,f){var _=this.styles&&this.styles[r];return _?_[f]:null},getCompleteStyleDeclaration:function(r,f){for(var _=this._getStyleDeclaration(r,f)||{},b={},v,w=0;w<this._styleProperties.length;w++)v=this._styleProperties[w],b[v]=typeof _[v]>"u"?this[v]:_[v];return b},_setStyleDeclaration:function(r,f,_){this.styles[r][f]=_},_deleteStyleDeclaration:function(r,f){delete this.styles[r][f]},_getLineStyle:function(r){return!!this.styles[r]},_setLineStyle:function(r){this.styles[r]={}},_deleteLineStyle:function(r){delete this.styles[r]}})}(),function(){function r(f){f.textDecoration&&(f.textDecoration.indexOf("underline")>-1&&(f.underline=!0),f.textDecoration.indexOf("line-through")>-1&&(f.linethrough=!0),f.textDecoration.indexOf("overline")>-1&&(f.overline=!0),delete f.textDecoration)}e.IText=e.util.createClass(e.Text,e.Observable,{type:"i-text",selectionStart:0,selectionEnd:0,selectionColor:"rgba(17,119,255,0.3)",isEditing:!1,editable:!0,editingBorderColor:"rgba(102,153,255,0.25)",cursorWidth:2,cursorColor:"",cursorDelay:1e3,cursorDuration:600,caching:!0,hiddenTextareaContainer:null,_reSpace:/\s|\n/,_currentCursorOpacity:0,_selectionDirection:null,_abortCursorAnimation:!1,__widthOfSpace:[],inCompositionMode:!1,initialize:function(f,_){this.callSuper("initialize",f,_),this.initBehavior()},setSelectionStart:function(f){f=Math.max(f,0),this._updateAndFire("selectionStart",f)},setSelectionEnd:function(f){f=Math.min(f,this.text.length),this._updateAndFire("selectionEnd",f)},_updateAndFire:function(f,_){this[f]!==_&&(this._fireSelectionChanged(),this[f]=_),this._updateTextarea()},_fireSelectionChanged:function(){this.fire("selection:changed"),this.canvas&&this.canvas.fire("text:selection:changed",{target:this})},initDimensions:function(){this.isEditing&&this.initDelayedCursor(),this.clearContextTop(),this.callSuper("initDimensions")},render:function(f){this.clearContextTop(),this.callSuper("render",f),this.cursorOffsetCache={},this.renderCursorOrSelection()},_render:function(f){this.callSuper("_render",f)},clearContextTop:function(f){if(!(!this.isEditing||!this.canvas||!this.canvas.contextTop)){var _=this.canvas.contextTop,b=this.canvas.viewportTransform;_.save(),_.transform(b[0],b[1],b[2],b[3],b[4],b[5]),this.transform(_),this._clearTextArea(_),f||_.restore()}},renderCursorOrSelection:function(){if(!(!this.isEditing||!this.canvas||!this.canvas.contextTop)){var f=this._getCursorBoundaries(),_=this.canvas.contextTop;this.clearContextTop(!0),this.selectionStart===this.selectionEnd?this.renderCursor(f,_):this.renderSelection(f,_),_.restore()}},_clearTextArea:function(f){var _=this.width+4,b=this.height+4;f.clearRect(-_/2,-b/2,_,b)},_getCursorBoundaries:function(f){typeof f>"u"&&(f=this.selectionStart);var _=this._getLeftOffset(),b=this._getTopOffset(),v=this._getCursorBoundariesOffsets(f);return{left:_,top:b,leftOffset:v.left,topOffset:v.top}},_getCursorBoundariesOffsets:function(f){if(this.cursorOffsetCache&&"top"in this.cursorOffsetCache)return this.cursorOffsetCache;var _,b,v,w=0,x=0,C,T=this.get2DCursorLocation(f);v=T.charIndex,b=T.lineIndex;for(var S=0;S<b;S++)w+=this.getHeightOfLine(S);_=this._getLineLeftOffset(b);var M=this.__charBounds[b][v];return M&&(x=M.left),this.charSpacing!==0&&v===this._textLines[b].length&&(x-=this._getWidthOfCharSpacing()),C={top:w,left:_+(x>0?x:0)},this.direction==="rtl"&&(C.left*=-1),this.cursorOffsetCache=C,this.cursorOffsetCache},renderCursor:function(f,_){var b=this.get2DCursorLocation(),v=b.lineIndex,w=b.charIndex>0?b.charIndex-1:0,x=this.getValueOfPropertyAt(v,w,"fontSize"),C=this.scaleX*this.canvas.getZoom(),T=this.cursorWidth/C,S=f.topOffset,M=this.getValueOfPropertyAt(v,w,"deltaY");S+=(1-this._fontSizeFraction)*this.getHeightOfLine(v)/this.lineHeight-x*(1-this._fontSizeFraction),this.inCompositionMode&&this.renderSelection(f,_),_.fillStyle=this.cursorColor||this.getValueOfPropertyAt(v,w,"fill"),_.globalAlpha=this.__isMousedown?1:this._currentCursorOpacity,_.fillRect(f.left+f.leftOffset-T/2,S+f.top+M,T,x)},renderSelection:function(f,_){for(var b=this.inCompositionMode?this.hiddenTextarea.selectionStart:this.selectionStart,v=this.inCompositionMode?this.hiddenTextarea.selectionEnd:this.selectionEnd,w=this.textAlign.indexOf("justify")!==-1,x=this.get2DCursorLocation(b),C=this.get2DCursorLocation(v),T=x.lineIndex,S=C.lineIndex,M=x.charIndex<0?0:x.charIndex,O=C.charIndex<0?0:C.charIndex,V=T;V<=S;V++){var X=this._getLineLeftOffset(V)||0,Z=this.getHeightOfLine(V),te=0,J=0,ie=0;if(V===T&&(J=this.__charBounds[T][M].left),V>=T&&V<S)ie=w&&!this.isEndOfWrapping(V)?this.width:this.getLineWidth(V)||5;else if(V===S)if(O===0)ie=this.__charBounds[S][O].left;else{var Ee=this._getWidthOfCharSpacing();ie=this.__charBounds[S][O-1].left+this.__charBounds[S][O-1].width-Ee}te=Z,(this.lineHeight<1||V===S&&this.lineHeight>1)&&(Z/=this.lineHeight);var Pe=f.left+X+J,de=ie-J,Te=Z,ve=0;this.inCompositionMode?(_.fillStyle=this.compositionColor||"black",Te=1,ve=Z):_.fillStyle=this.selectionColor,this.direction==="rtl"&&(Pe=this.width-Pe-de),_.fillRect(Pe,f.top+f.topOffset+ve,de,Te),f.topOffset+=te}},getCurrentCharFontSize:function(){var f=this._getCurrentCharIndex();return this.getValueOfPropertyAt(f.l,f.c,"fontSize")},getCurrentCharColor:function(){var f=this._getCurrentCharIndex();return this.getValueOfPropertyAt(f.l,f.c,"fill")},_getCurrentCharIndex:function(){var f=this.get2DCursorLocation(this.selectionStart,!0),_=f.charIndex>0?f.charIndex-1:0;return{l:f.lineIndex,c:_}}}),e.IText.fromObject=function(f,_){var b=e.util.stylesFromArray(f.styles,f.text),v=Object.assign({},f,{styles:b});if(r(v),v.styles)for(var w in v.styles)for(var x in v.styles[w])r(v.styles[w][x]);e.Object._fromObject("IText",v,_,"text")}}(),function(){var r=e.util.object.clone;e.util.object.extend(e.IText.prototype,{initBehavior:function(){this.initAddedHandler(),this.initRemovedHandler(),this.initCursorSelectionHandlers(),this.initDoubleClickSimulation(),this.mouseMoveHandler=this.mouseMoveHandler.bind(this)},onDeselect:function(){this.isEditing&&this.exitEditing(),this.selected=!1},initAddedHandler:function(){var f=this;this.on("added",function(){var _=f.canvas;_&&(_._hasITextHandlers||(_._hasITextHandlers=!0,f._initCanvasHandlers(_)),_._iTextInstances=_._iTextInstances||[],_._iTextInstances.push(f))})},initRemovedHandler:function(){var f=this;this.on("removed",function(){var _=f.canvas;_&&(_._iTextInstances=_._iTextInstances||[],e.util.removeFromArray(_._iTextInstances,f),_._iTextInstances.length===0&&(_._hasITextHandlers=!1,f._removeCanvasHandlers(_)))})},_initCanvasHandlers:function(f){f._mouseUpITextHandler=function(){f._iTextInstances&&f._iTextInstances.forEach(function(_){_.__isMousedown=!1})},f.on("mouse:up",f._mouseUpITextHandler)},_removeCanvasHandlers:function(f){f.off("mouse:up",f._mouseUpITextHandler)},_tick:function(){this._currentTickState=this._animateCursor(this,1,this.cursorDuration,"_onTickComplete")},_animateCursor:function(f,_,b,v){var w;return w={isAborted:!1,abort:function(){this.isAborted=!0}},f.animate("_currentCursorOpacity",_,{duration:b,onComplete:function(){w.isAborted||f[v]()},onChange:function(){f.canvas&&f.selectionStart===f.selectionEnd&&f.renderCursorOrSelection()},abort:function(){return w.isAborted}}),w},_onTickComplete:function(){var f=this;this._cursorTimeout1&&clearTimeout(this._cursorTimeout1),this._cursorTimeout1=setTimeout(function(){f._currentTickCompleteState=f._animateCursor(f,0,this.cursorDuration/2,"_tick")},100)},initDelayedCursor:function(f){var _=this,b=f?0:this.cursorDelay;this.abortCursorAnimation(),this._currentCursorOpacity=1,this._cursorTimeout2=setTimeout(function(){_._tick()},b)},abortCursorAnimation:function(){var f=this._currentTickState||this._currentTickCompleteState,_=this.canvas;this._currentTickState&&this._currentTickState.abort(),this._currentTickCompleteState&&this._currentTickCompleteState.abort(),clearTimeout(this._cursorTimeout1),clearTimeout(this._cursorTimeout2),this._currentCursorOpacity=0,f&&_&&_.clearContext(_.contextTop||_.contextContainer)},selectAll:function(){return this.selectionStart=0,this.selectionEnd=this._text.length,this._fireSelectionChanged(),this._updateTextarea(),this},getSelectedText:function(){return this._text.slice(this.selectionStart,this.selectionEnd).join("")},findWordBoundaryLeft:function(f){var _=0,b=f-1;if(this._reSpace.test(this._text[b]))for(;this._reSpace.test(this._text[b]);)_++,b--;for(;/\S/.test(this._text[b])&&b>-1;)_++,b--;return f-_},findWordBoundaryRight:function(f){var _=0,b=f;if(this._reSpace.test(this._text[b]))for(;this._reSpace.test(this._text[b]);)_++,b++;for(;/\S/.test(this._text[b])&&b<this._text.length;)_++,b++;return f+_},findLineBoundaryLeft:function(f){for(var _=0,b=f-1;!/\n/.test(this._text[b])&&b>-1;)_++,b--;return f-_},findLineBoundaryRight:function(f){for(var _=0,b=f;!/\n/.test(this._text[b])&&b<this._text.length;)_++,b++;return f+_},searchWordBoundary:function(f,_){for(var b=this._text,v=this._reSpace.test(b[f])?f-1:f,w=b[v],x=e.reNonWord;!x.test(w)&&v>0&&v<b.length;)v+=_,w=b[v];return x.test(w)&&(v+=_===1?0:1),v},selectWord:function(f){f=f||this.selectionStart;var _=this.searchWordBoundary(f,-1),b=this.searchWordBoundary(f,1);this.selectionStart=_,this.selectionEnd=b,this._fireSelectionChanged(),this._updateTextarea(),this.renderCursorOrSelection()},selectLine:function(f){f=f||this.selectionStart;var _=this.findLineBoundaryLeft(f),b=this.findLineBoundaryRight(f);return this.selectionStart=_,this.selectionEnd=b,this._fireSelectionChanged(),this._updateTextarea(),this},enterEditing:function(f){if(!(this.isEditing||!this.editable))return this.canvas&&(this.canvas.calcOffset(),this.exitEditingOnOthers(this.canvas)),this.isEditing=!0,this.initHiddenTextarea(f),this.hiddenTextarea.focus(),this.hiddenTextarea.value=this.text,this._updateTextarea(),this._saveEditingProps(),this._setEditingProps(),this._textBeforeEdit=this.text,this._tick(),this.fire("editing:entered"),this._fireSelectionChanged(),this.canvas?(this.canvas.fire("text:editing:entered",{target:this}),this.initMouseMoveHandler(),this.canvas.requestRenderAll(),this):this},exitEditingOnOthers:function(f){f._iTextInstances&&f._iTextInstances.forEach(function(_){_.selected=!1,_.isEditing&&_.exitEditing()})},initMouseMoveHandler:function(){this.canvas.on("mouse:move",this.mouseMoveHandler)},mouseMoveHandler:function(f){if(!(!this.__isMousedown||!this.isEditing)){document.activeElement!==this.hiddenTextarea&&this.hiddenTextarea.focus();var _=this.getSelectionStartFromPointer(f.e),b=this.selectionStart,v=this.selectionEnd;(_!==this.__selectionStartOnMouseDown||b===v)&&(b===_||v===_)||(_>this.__selectionStartOnMouseDown?(this.selectionStart=this.__selectionStartOnMouseDown,this.selectionEnd=_):(this.selectionStart=_,this.selectionEnd=this.__selectionStartOnMouseDown),(this.selectionStart!==b||this.selectionEnd!==v)&&(this.restartCursorIfNeeded(),this._fireSelectionChanged(),this._updateTextarea(),this.renderCursorOrSelection()))}},_setEditingProps:function(){this.hoverCursor="text",this.canvas&&(this.canvas.defaultCursor=this.canvas.moveCursor="text"),this.borderColor=this.editingBorderColor,this.hasControls=this.selectable=!1,this.lockMovementX=this.lockMovementY=!0},fromStringToGraphemeSelection:function(f,_,b){var v=b.slice(0,f),w=e.util.string.graphemeSplit(v).length;if(f===_)return{selectionStart:w,selectionEnd:w};var x=b.slice(f,_),C=e.util.string.graphemeSplit(x).length;return{selectionStart:w,selectionEnd:w+C}},fromGraphemeToStringSelection:function(f,_,b){var v=b.slice(0,f),w=v.join("").length;if(f===_)return{selectionStart:w,selectionEnd:w};var x=b.slice(f,_),C=x.join("").length;return{selectionStart:w,selectionEnd:w+C}},_updateTextarea:function(){if(this.cursorOffsetCache={},!!this.hiddenTextarea){if(!this.inCompositionMode){var f=this.fromGraphemeToStringSelection(this.selectionStart,this.selectionEnd,this._text);this.hiddenTextarea.selectionStart=f.selectionStart,this.hiddenTextarea.selectionEnd=f.selectionEnd}this.updateTextareaPosition()}},updateFromTextArea:function(){if(!!this.hiddenTextarea){this.cursorOffsetCache={},this.text=this.hiddenTextarea.value,this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords());var f=this.fromStringToGraphemeSelection(this.hiddenTextarea.selectionStart,this.hiddenTextarea.selectionEnd,this.hiddenTextarea.value);this.selectionEnd=this.selectionStart=f.selectionEnd,this.inCompositionMode||(this.selectionStart=f.selectionStart),this.updateTextareaPosition()}},updateTextareaPosition:function(){if(this.selectionStart===this.selectionEnd){var f=this._calcTextareaPosition();this.hiddenTextarea.style.left=f.left,this.hiddenTextarea.style.top=f.top}},_calcTextareaPosition:function(){if(!this.canvas)return{x:1,y:1};var f=this.inCompositionMode?this.compositionStart:this.selectionStart,_=this._getCursorBoundaries(f),b=this.get2DCursorLocation(f),v=b.lineIndex,w=b.charIndex,x=this.getValueOfPropertyAt(v,w,"fontSize")*this.lineHeight,C=_.leftOffset,T=this.calcTransformMatrix(),S={x:_.left+C,y:_.top+_.topOffset+x},M=this.canvas.getRetinaScaling(),O=this.canvas.upperCanvasEl,V=O.width/M,X=O.height/M,Z=V-x,te=X-x,J=O.clientWidth/V,ie=O.clientHeight/X;return S=e.util.transformPoint(S,T),S=e.util.transformPoint(S,this.canvas.viewportTransform),S.x*=J,S.y*=ie,S.x<0&&(S.x=0),S.x>Z&&(S.x=Z),S.y<0&&(S.y=0),S.y>te&&(S.y=te),S.x+=this.canvas._offset.left,S.y+=this.canvas._offset.top,{left:S.x+"px",top:S.y+"px",fontSize:x+"px",charHeight:x}},_saveEditingProps:function(){this._savedProps={hasControls:this.hasControls,borderColor:this.borderColor,lockMovementX:this.lockMovementX,lockMovementY:this.lockMovementY,hoverCursor:this.hoverCursor,selectable:this.selectable,defaultCursor:this.canvas&&this.canvas.defaultCursor,moveCursor:this.canvas&&this.canvas.moveCursor}},_restoreEditingProps:function(){!this._savedProps||(this.hoverCursor=this._savedProps.hoverCursor,this.hasControls=this._savedProps.hasControls,this.borderColor=this._savedProps.borderColor,this.selectable=this._savedProps.selectable,this.lockMovementX=this._savedProps.lockMovementX,this.lockMovementY=this._savedProps.lockMovementY,this.canvas&&(this.canvas.defaultCursor=this._savedProps.defaultCursor,this.canvas.moveCursor=this._savedProps.moveCursor))},exitEditing:function(){var f=this._textBeforeEdit!==this.text,_=this.hiddenTextarea;return this.selected=!1,this.isEditing=!1,this.selectionEnd=this.selectionStart,_&&(_.blur&&_.blur(),_.parentNode&&_.parentNode.removeChild(_)),this.hiddenTextarea=null,this.abortCursorAnimation(),this._restoreEditingProps(),this._currentCursorOpacity=0,this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords()),this.fire("editing:exited"),f&&this.fire("modified"),this.canvas&&(this.canvas.off("mouse:move",this.mouseMoveHandler),this.canvas.fire("text:editing:exited",{target:this}),f&&this.canvas.fire("object:modified",{target:this})),this},_removeExtraneousStyles:function(){for(var f in this.styles)this._textLines[f]||delete this.styles[f]},removeStyleFromTo:function(f,_){var b=this.get2DCursorLocation(f,!0),v=this.get2DCursorLocation(_,!0),w=b.lineIndex,x=b.charIndex,C=v.lineIndex,T=v.charIndex,S,M;if(w!==C){if(this.styles[w])for(S=x;S<this._unwrappedTextLines[w].length;S++)delete this.styles[w][S];if(this.styles[C])for(S=T;S<this._unwrappedTextLines[C].length;S++)M=this.styles[C][S],M&&(this.styles[w]||(this.styles[w]={}),this.styles[w][x+S-T]=M);for(S=w+1;S<=C;S++)delete this.styles[S];this.shiftLineStyles(C,w-C)}else if(this.styles[w]){M=this.styles[w];var O=T-x,V,X;for(S=x;S<T;S++)delete M[S];for(X in this.styles[w])V=parseInt(X,10),V>=T&&(M[V-O]=M[X],delete M[X])}},shiftLineStyles:function(f,_){var b=r(this.styles);for(var v in this.styles){var w=parseInt(v,10);w>f&&(this.styles[w+_]=b[w],b[w-_]||delete this.styles[w])}},restartCursorIfNeeded:function(){(!this._currentTickState||this._currentTickState.isAborted||!this._currentTickCompleteState||this._currentTickCompleteState.isAborted)&&this.initDelayedCursor()},insertNewlineStyleObject:function(f,_,b,v){var w,x={},C=!1,T=this._unwrappedTextLines[f].length===_;b||(b=1),this.shiftLineStyles(f,b),this.styles[f]&&(w=this.styles[f][_===0?_:_-1]);for(var S in this.styles[f]){var M=parseInt(S,10);M>=_&&(C=!0,x[M-_]=this.styles[f][S],T&&_===0||delete this.styles[f][S])}var O=!1;for(C&&!T&&(this.styles[f+b]=x,O=!0),O&&b--;b>0;)v&&v[b-1]?this.styles[f+b]={0:r(v[b-1])}:w?this.styles[f+b]={0:r(w)}:delete this.styles[f+b],b--;this._forceClearCache=!0},insertCharStyleObject:function(f,_,b,v){this.styles||(this.styles={});var w=this.styles[f],x=w?r(w):{};b||(b=1);for(var C in x){var T=parseInt(C,10);T>=_&&(w[T+b]=x[T],x[T-b]||delete w[T])}if(this._forceClearCache=!0,v){for(;b--;)!Object.keys(v[b]).length||(this.styles[f]||(this.styles[f]={}),this.styles[f][_+b]=r(v[b]));return}if(!!w)for(var S=w[_?_-1:1];S&&b--;)this.styles[f][_+b]=r(S)},insertNewStyleBlock:function(f,_,b){for(var v=this.get2DCursorLocation(_,!0),w=[0],x=0,C=0;C<f.length;C++)f[C]===`
`?(x++,w[x]=0):w[x]++;w[0]>0&&(this.insertCharStyleObject(v.lineIndex,v.charIndex,w[0],b),b=b&&b.slice(w[0]+1)),x&&this.insertNewlineStyleObject(v.lineIndex,v.charIndex+w[0],x);for(var C=1;C<x;C++)w[C]>0?this.insertCharStyleObject(v.lineIndex+C,0,w[C],b):b&&this.styles[v.lineIndex+C]&&b[0]&&(this.styles[v.lineIndex+C][0]=b[0]),b=b&&b.slice(w[C]+1);w[C]>0&&this.insertCharStyleObject(v.lineIndex+C,0,w[C],b)},setSelectionStartEndWithShift:function(f,_,b){b<=f?(_===f?this._selectionDirection="left":this._selectionDirection==="right"&&(this._selectionDirection="left",this.selectionEnd=f),this.selectionStart=b):b>f&&b<_?this._selectionDirection==="right"?this.selectionEnd=b:this.selectionStart=b:(_===f?this._selectionDirection="right":this._selectionDirection==="left"&&(this._selectionDirection="right",this.selectionStart=_),this.selectionEnd=b)},setSelectionInBoundaries:function(){var f=this.text.length;this.selectionStart>f?this.selectionStart=f:this.selectionStart<0&&(this.selectionStart=0),this.selectionEnd>f?this.selectionEnd=f:this.selectionEnd<0&&(this.selectionEnd=0)}})}(),e.util.object.extend(e.IText.prototype,{initDoubleClickSimulation:function(){this.__lastClickTime=+new Date,this.__lastLastClickTime=+new Date,this.__lastPointer={},this.on("mousedown",this.onMouseDown)},onMouseDown:function(r){if(!!this.canvas){this.__newClickTime=+new Date;var f=r.pointer;this.isTripleClick(f)&&(this.fire("tripleclick",r),this._stopEvent(r.e)),this.__lastLastClickTime=this.__lastClickTime,this.__lastClickTime=this.__newClickTime,this.__lastPointer=f,this.__lastIsEditing=this.isEditing,this.__lastSelected=this.selected}},isTripleClick:function(r){return this.__newClickTime-this.__lastClickTime<500&&this.__lastClickTime-this.__lastLastClickTime<500&&this.__lastPointer.x===r.x&&this.__lastPointer.y===r.y},_stopEvent:function(r){r.preventDefault&&r.preventDefault(),r.stopPropagation&&r.stopPropagation()},initCursorSelectionHandlers:function(){this.initMousedownHandler(),this.initMouseupHandler(),this.initClicks()},doubleClickHandler:function(r){!this.isEditing||this.selectWord(this.getSelectionStartFromPointer(r.e))},tripleClickHandler:function(r){!this.isEditing||this.selectLine(this.getSelectionStartFromPointer(r.e))},initClicks:function(){this.on("mousedblclick",this.doubleClickHandler),this.on("tripleclick",this.tripleClickHandler)},_mouseDownHandler:function(r){!this.canvas||!this.editable||r.e.button&&r.e.button!==1||(this.__isMousedown=!0,this.selected&&(this.inCompositionMode=!1,this.setCursorByClick(r.e)),this.isEditing&&(this.__selectionStartOnMouseDown=this.selectionStart,this.selectionStart===this.selectionEnd&&this.abortCursorAnimation(),this.renderCursorOrSelection()))},_mouseDownHandlerBefore:function(r){!this.canvas||!this.editable||r.e.button&&r.e.button!==1||(this.selected=this===this.canvas._activeObject)},initMousedownHandler:function(){this.on("mousedown",this._mouseDownHandler),this.on("mousedown:before",this._mouseDownHandlerBefore)},initMouseupHandler:function(){this.on("mouseup",this.mouseUpHandler)},mouseUpHandler:function(r){if(this.__isMousedown=!1,!(!this.editable||this.group||r.transform&&r.transform.actionPerformed||r.e.button&&r.e.button!==1)){if(this.canvas){var f=this.canvas._activeObject;if(f&&f!==this)return}this.__lastSelected&&!this.__corner?(this.selected=!1,this.__lastSelected=!1,this.enterEditing(r.e),this.selectionStart===this.selectionEnd?this.initDelayedCursor(!0):this.renderCursorOrSelection()):this.selected=!0}},setCursorByClick:function(r){var f=this.getSelectionStartFromPointer(r),_=this.selectionStart,b=this.selectionEnd;r.shiftKey?this.setSelectionStartEndWithShift(_,b,f):(this.selectionStart=f,this.selectionEnd=f),this.isEditing&&(this._fireSelectionChanged(),this._updateTextarea())},getSelectionStartFromPointer:function(r){for(var f=this.getLocalPointer(r),_=0,b=0,v=0,w=0,x=0,C,T,S=0,M=this._textLines.length;S<M&&v<=f.y;S++)v+=this.getHeightOfLine(S)*this.scaleY,x=S,S>0&&(w+=this._textLines[S-1].length+this.missingNewlineOffset(S-1));C=this._getLineLeftOffset(x),b=C*this.scaleX,T=this._textLines[x],this.direction==="rtl"&&(f.x=this.width*this.scaleX-f.x+b);for(var O=0,V=T.length;O<V&&(_=b,b+=this.__charBounds[x][O].kernedWidth*this.scaleX,b<=f.x);O++)w++;return this._getNewSelectionStartFromOffset(f,_,b,w,V)},_getNewSelectionStartFromOffset:function(r,f,_,b,v){var w=r.x-f,x=_-r.x,C=x>w||x<0?0:1,T=b+C;return this.flipX&&(T=v-T),T>this._text.length&&(T=this._text.length),T}}),e.util.object.extend(e.IText.prototype,{initHiddenTextarea:function(){this.hiddenTextarea=e.document.createElement("textarea"),this.hiddenTextarea.setAttribute("autocapitalize","off"),this.hiddenTextarea.setAttribute("autocorrect","off"),this.hiddenTextarea.setAttribute("autocomplete","off"),this.hiddenTextarea.setAttribute("spellcheck","false"),this.hiddenTextarea.setAttribute("data-fabric-hiddentextarea",""),this.hiddenTextarea.setAttribute("wrap","off");var r=this._calcTextareaPosition();this.hiddenTextarea.style.cssText="position: absolute; top: "+r.top+"; left: "+r.left+"; z-index: -999; opacity: 0; width: 1px; height: 1px; font-size: 1px; padding\uFF70top: "+r.fontSize+";",this.hiddenTextareaContainer?this.hiddenTextareaContainer.appendChild(this.hiddenTextarea):e.document.body.appendChild(this.hiddenTextarea),e.util.addListener(this.hiddenTextarea,"keydown",this.onKeyDown.bind(this)),e.util.addListener(this.hiddenTextarea,"keyup",this.onKeyUp.bind(this)),e.util.addListener(this.hiddenTextarea,"input",this.onInput.bind(this)),e.util.addListener(this.hiddenTextarea,"copy",this.copy.bind(this)),e.util.addListener(this.hiddenTextarea,"cut",this.copy.bind(this)),e.util.addListener(this.hiddenTextarea,"paste",this.paste.bind(this)),e.util.addListener(this.hiddenTextarea,"compositionstart",this.onCompositionStart.bind(this)),e.util.addListener(this.hiddenTextarea,"compositionupdate",this.onCompositionUpdate.bind(this)),e.util.addListener(this.hiddenTextarea,"compositionend",this.onCompositionEnd.bind(this)),!this._clickHandlerInitialized&&this.canvas&&(e.util.addListener(this.canvas.upperCanvasEl,"click",this.onClick.bind(this)),this._clickHandlerInitialized=!0)},keysMap:{9:"exitEditing",27:"exitEditing",33:"moveCursorUp",34:"moveCursorDown",35:"moveCursorRight",36:"moveCursorLeft",37:"moveCursorLeft",38:"moveCursorUp",39:"moveCursorRight",40:"moveCursorDown"},keysMapRtl:{9:"exitEditing",27:"exitEditing",33:"moveCursorUp",34:"moveCursorDown",35:"moveCursorLeft",36:"moveCursorRight",37:"moveCursorRight",38:"moveCursorUp",39:"moveCursorLeft",40:"moveCursorDown"},ctrlKeysMapUp:{67:"copy",88:"cut"},ctrlKeysMapDown:{65:"selectAll"},onClick:function(){this.hiddenTextarea&&this.hiddenTextarea.focus()},onKeyDown:function(r){if(!!this.isEditing){var f=this.direction==="rtl"?this.keysMapRtl:this.keysMap;if(r.keyCode in f)this[f[r.keyCode]](r);else if(r.keyCode in this.ctrlKeysMapDown&&(r.ctrlKey||r.metaKey))this[this.ctrlKeysMapDown[r.keyCode]](r);else return;r.stopImmediatePropagation(),r.preventDefault(),r.keyCode>=33&&r.keyCode<=40?(this.inCompositionMode=!1,this.clearContextTop(),this.renderCursorOrSelection()):this.canvas&&this.canvas.requestRenderAll()}},onKeyUp:function(r){if(!this.isEditing||this._copyDone||this.inCompositionMode){this._copyDone=!1;return}if(r.keyCode in this.ctrlKeysMapUp&&(r.ctrlKey||r.metaKey))this[this.ctrlKeysMapUp[r.keyCode]](r);else return;r.stopImmediatePropagation(),r.preventDefault(),this.canvas&&this.canvas.requestRenderAll()},onInput:function(r){var f=this.fromPaste;if(this.fromPaste=!1,r&&r.stopPropagation(),!!this.isEditing){var _=this._splitTextIntoLines(this.hiddenTextarea.value).graphemeText,b=this._text.length,v=_.length,w,x,C=v-b,T=this.selectionStart,S=this.selectionEnd,M=T!==S,O,V,X;if(this.hiddenTextarea.value===""){this.styles={},this.updateFromTextArea(),this.fire("changed"),this.canvas&&(this.canvas.fire("text:changed",{target:this}),this.canvas.requestRenderAll());return}var Z=this.fromStringToGraphemeSelection(this.hiddenTextarea.selectionStart,this.hiddenTextarea.selectionEnd,this.hiddenTextarea.value),te=T>Z.selectionStart;M?(w=this._text.slice(T,S),C+=S-T):v<b&&(te?w=this._text.slice(S+C,S):w=this._text.slice(T,T-C)),x=_.slice(Z.selectionEnd-C,Z.selectionEnd),w&&w.length&&(x.length&&(O=this.getSelectionStyles(T,T+1,!1),O=x.map(function(){return O[0]})),M?(V=T,X=S):te?(V=S-w.length,X=S):(V=S,X=S+w.length),this.removeStyleFromTo(V,X)),x.length&&(f&&x.join("")===e.copiedText&&!e.disableStyleCopyPaste&&(O=e.copiedTextStyle),this.insertNewStyleBlock(x,T,O)),this.updateFromTextArea(),this.fire("changed"),this.canvas&&(this.canvas.fire("text:changed",{target:this}),this.canvas.requestRenderAll())}},onCompositionStart:function(){this.inCompositionMode=!0},onCompositionEnd:function(){this.inCompositionMode=!1},onCompositionUpdate:function(r){this.compositionStart=r.target.selectionStart,this.compositionEnd=r.target.selectionEnd,this.updateTextareaPosition()},copy:function(){this.selectionStart!==this.selectionEnd&&(e.copiedText=this.getSelectedText(),e.disableStyleCopyPaste?e.copiedTextStyle=null:e.copiedTextStyle=this.getSelectionStyles(this.selectionStart,this.selectionEnd,!0),this._copyDone=!0)},paste:function(){this.fromPaste=!0},_getClipboardData:function(r){return r&&r.clipboardData||e.window.clipboardData},_getWidthBeforeCursor:function(r,f){var _=this._getLineLeftOffset(r),b;return f>0&&(b=this.__charBounds[r][f-1],_+=b.left+b.width),_},getDownCursorOffset:function(r,f){var _=this._getSelectionForOffset(r,f),b=this.get2DCursorLocation(_),v=b.lineIndex;if(v===this._textLines.length-1||r.metaKey||r.keyCode===34)return this._text.length-_;var w=b.charIndex,x=this._getWidthBeforeCursor(v,w),C=this._getIndexOnLine(v+1,x),T=this._textLines[v].slice(w);return T.length+C+1+this.missingNewlineOffset(v)},_getSelectionForOffset:function(r,f){return r.shiftKey&&this.selectionStart!==this.selectionEnd&&f?this.selectionEnd:this.selectionStart},getUpCursorOffset:function(r,f){var _=this._getSelectionForOffset(r,f),b=this.get2DCursorLocation(_),v=b.lineIndex;if(v===0||r.metaKey||r.keyCode===33)return-_;var w=b.charIndex,x=this._getWidthBeforeCursor(v,w),C=this._getIndexOnLine(v-1,x),T=this._textLines[v].slice(0,w),S=this.missingNewlineOffset(v-1);return-this._textLines[v-1].length+C-T.length+(1-S)},_getIndexOnLine:function(r,f){for(var _=this._textLines[r],b=this._getLineLeftOffset(r),v=b,w=0,x,C,T=0,S=_.length;T<S;T++)if(x=this.__charBounds[r][T].width,v+=x,v>f){C=!0;var M=v-x,O=v,V=Math.abs(M-f),X=Math.abs(O-f);w=X<V?T:T-1;break}return C||(w=_.length-1),w},moveCursorDown:function(r){this.selectionStart>=this._text.length&&this.selectionEnd>=this._text.length||this._moveCursorUpOrDown("Down",r)},moveCursorUp:function(r){this.selectionStart===0&&this.selectionEnd===0||this._moveCursorUpOrDown("Up",r)},_moveCursorUpOrDown:function(r,f){var _="get"+r+"CursorOffset",b=this[_](f,this._selectionDirection==="right");f.shiftKey?this.moveCursorWithShift(b):this.moveCursorWithoutShift(b),b!==0&&(this.setSelectionInBoundaries(),this.abortCursorAnimation(),this._currentCursorOpacity=1,this.initDelayedCursor(),this._fireSelectionChanged(),this._updateTextarea())},moveCursorWithShift:function(r){var f=this._selectionDirection==="left"?this.selectionStart+r:this.selectionEnd+r;return this.setSelectionStartEndWithShift(this.selectionStart,this.selectionEnd,f),r!==0},moveCursorWithoutShift:function(r){return r<0?(this.selectionStart+=r,this.selectionEnd=this.selectionStart):(this.selectionEnd+=r,this.selectionStart=this.selectionEnd),r!==0},moveCursorLeft:function(r){this.selectionStart===0&&this.selectionEnd===0||this._moveCursorLeftOrRight("Left",r)},_move:function(r,f,_){var b;if(r.altKey)b=this["findWordBoundary"+_](this[f]);else if(r.metaKey||r.keyCode===35||r.keyCode===36)b=this["findLineBoundary"+_](this[f]);else return this[f]+=_==="Left"?-1:1,!0;if(typeof b<"u"&&this[f]!==b)return this[f]=b,!0},_moveLeft:function(r,f){return this._move(r,f,"Left")},_moveRight:function(r,f){return this._move(r,f,"Right")},moveCursorLeftWithoutShift:function(r){var f=!0;return this._selectionDirection="left",this.selectionEnd===this.selectionStart&&this.selectionStart!==0&&(f=this._moveLeft(r,"selectionStart")),this.selectionEnd=this.selectionStart,f},moveCursorLeftWithShift:function(r){if(this._selectionDirection==="right"&&this.selectionStart!==this.selectionEnd)return this._moveLeft(r,"selectionEnd");if(this.selectionStart!==0)return this._selectionDirection="left",this._moveLeft(r,"selectionStart")},moveCursorRight:function(r){this.selectionStart>=this._text.length&&this.selectionEnd>=this._text.length||this._moveCursorLeftOrRight("Right",r)},_moveCursorLeftOrRight:function(r,f){var _="moveCursor"+r+"With";this._currentCursorOpacity=1,f.shiftKey?_+="Shift":_+="outShift",this[_](f)&&(this.abortCursorAnimation(),this.initDelayedCursor(),this._fireSelectionChanged(),this._updateTextarea())},moveCursorRightWithShift:function(r){if(this._selectionDirection==="left"&&this.selectionStart!==this.selectionEnd)return this._moveRight(r,"selectionStart");if(this.selectionEnd!==this._text.length)return this._selectionDirection="right",this._moveRight(r,"selectionEnd")},moveCursorRightWithoutShift:function(r){var f=!0;return this._selectionDirection="right",this.selectionStart===this.selectionEnd?(f=this._moveRight(r,"selectionStart"),this.selectionEnd=this.selectionStart):this.selectionStart=this.selectionEnd,f},removeChars:function(r,f){typeof f>"u"&&(f=r+1),this.removeStyleFromTo(r,f),this._text.splice(r,f-r),this.text=this._text.join(""),this.set("dirty",!0),this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords()),this._removeExtraneousStyles()},insertChars:function(r,f,_,b){typeof b>"u"&&(b=_),b>_&&this.removeStyleFromTo(_,b);var v=e.util.string.graphemeSplit(r);this.insertNewStyleBlock(v,_,f),this._text=[].concat(this._text.slice(0,_),v,this._text.slice(b)),this.text=this._text.join(""),this.set("dirty",!0),this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords()),this._removeExtraneousStyles()}}),function(){var r=e.util.toFixed,f=/  +/g;e.util.object.extend(e.Text.prototype,{_toSVG:function(){var _=this._getSVGLeftTopOffsets(),b=this._getSVGTextAndBg(_.textTop,_.textLeft);return this._wrapSVGTextAndBg(b)},toSVG:function(_){return this._createBaseSVGMarkup(this._toSVG(),{reviver:_,noStyle:!0,withShadow:!0})},_getSVGLeftTopOffsets:function(){return{textLeft:-this.width/2,textTop:-this.height/2,lineTop:this.getHeightOfLine(0)}},_wrapSVGTextAndBg:function(_){var b=!0,v=this.getSvgTextDecoration(this);return[_.textBgRects.join(""),'		<text xml:space="preserve" ',this.fontFamily?'font-family="'+this.fontFamily.replace(/"/g,"'")+'" ':"",this.fontSize?'font-size="'+this.fontSize+'" ':"",this.fontStyle?'font-style="'+this.fontStyle+'" ':"",this.fontWeight?'font-weight="'+this.fontWeight+'" ':"",v?'text-decoration="'+v+'" ':"",'style="',this.getSvgStyles(b),'"',this.addPaintOrder()," >",_.textSpans.join(""),`</text>
`]},_getSVGTextAndBg:function(_,b){var v=[],w=[],x=_,C;this._setSVGBg(w);for(var T=0,S=this._textLines.length;T<S;T++)C=this._getLineLeftOffset(T),(this.textBackgroundColor||this.styleHas("textBackgroundColor",T))&&this._setSVGTextLineBg(w,T,b+C,x),this._setSVGTextLineText(v,T,b+C,x),x+=this.getHeightOfLine(T);return{textSpans:v,textBgRects:w}},_createTextCharSpan:function(_,b,v,w){var x=_!==_.trim()||_.match(f),C=this.getSvgSpanStyles(b,x),T=C?'style="'+C+'"':"",S=b.deltaY,M="",O=e.Object.NUM_FRACTION_DIGITS;return S&&(M=' dy="'+r(S,O)+'" '),['<tspan x="',r(v,O),'" y="',r(w,O),'" ',M,T,">",e.util.string.escapeXml(_),"</tspan>"].join("")},_setSVGTextLineText:function(_,b,v,w){var x=this.getHeightOfLine(b),C=this.textAlign.indexOf("justify")!==-1,T,S,M="",O,V,X=0,Z=this._textLines[b],te;w+=x*(1-this._fontSizeFraction)/this.lineHeight;for(var J=0,ie=Z.length-1;J<=ie;J++)te=J===ie||this.charSpacing,M+=Z[J],O=this.__charBounds[b][J],X===0?(v+=O.kernedWidth-O.width,X+=O.width):X+=O.kernedWidth,C&&!te&&this._reSpaceAndTab.test(Z[J])&&(te=!0),te||(T=T||this.getCompleteStyleDeclaration(b,J),S=this.getCompleteStyleDeclaration(b,J+1),te=e.util.hasStyleChanged(T,S,!0)),te&&(V=this._getStyleDeclaration(b,J)||{},_.push(this._createTextCharSpan(M,V,v,w)),M="",T=S,v+=X,X=0)},_pushTextBgRect:function(_,b,v,w,x,C){var T=e.Object.NUM_FRACTION_DIGITS;_.push("		<rect ",this._getFillAttributes(b),' x="',r(v,T),'" y="',r(w,T),'" width="',r(x,T),'" height="',r(C,T),`"></rect>
`)},_setSVGTextLineBg:function(_,b,v,w){for(var x=this._textLines[b],C=this.getHeightOfLine(b)/this.lineHeight,T=0,S=0,M,O,V=this.getValueOfPropertyAt(b,0,"textBackgroundColor"),X=0,Z=x.length;X<Z;X++)M=this.__charBounds[b][X],O=this.getValueOfPropertyAt(b,X,"textBackgroundColor"),O!==V?(V&&this._pushTextBgRect(_,V,v+S,w,T,C),S=M.left,T=M.width,V=O):T+=M.kernedWidth;O&&this._pushTextBgRect(_,O,v+S,w,T,C)},_getFillAttributes:function(_){var b=_&&typeof _=="string"?new e.Color(_):"";return!b||!b.getSource()||b.getAlpha()===1?'fill="'+_+'"':'opacity="'+b.getAlpha()+'" fill="'+b.setAlpha(1).toRgb()+'"'},_getSVGLineTopOffset:function(_){for(var b=0,v=0,w=0;w<_;w++)b+=this.getHeightOfLine(w);return v=this.getHeightOfLine(w),{lineTop:b,offset:(this._fontSizeMult-this._fontSizeFraction)*v/(this.lineHeight*this._fontSizeMult)}},getSvgStyles:function(_){var b=e.Object.prototype.getSvgStyles.call(this,_);return b+" white-space: pre;"}})}(),function(r){var f=r.fabric||(r.fabric={});f.Textbox=f.util.createClass(f.IText,f.Observable,{type:"textbox",minWidth:20,dynamicMinWidth:2,__cachedLines:null,lockScalingFlip:!0,noScaleCache:!1,_dimensionAffectingProps:f.Text.prototype._dimensionAffectingProps.concat("width"),_wordJoiners:/[ \t\r]/,splitByGrapheme:!1,initDimensions:function(){this.__skipDimension||(this.isEditing&&this.initDelayedCursor(),this.clearContextTop(),this._clearCache(),this.dynamicMinWidth=0,this._styleMap=this._generateStyleMap(this._splitText()),this.dynamicMinWidth>this.width&&this._set("width",this.dynamicMinWidth),this.textAlign.indexOf("justify")!==-1&&this.enlargeSpaces(),this.height=this.calcTextHeight(),this.saveState({propertySet:"_dimensionAffectingProps"}))},_generateStyleMap:function(_){for(var b=0,v=0,w=0,x={},C=0;C<_.graphemeLines.length;C++)_.graphemeText[w]===`
`&&C>0?(v=0,w++,b++):!this.splitByGrapheme&&this._reSpaceAndTab.test(_.graphemeText[w])&&C>0&&(v++,w++),x[C]={line:b,offset:v},w+=_.graphemeLines[C].length,v+=_.graphemeLines[C].length;return x},styleHas:function(_,b){if(this._styleMap&&!this.isWrapping){var v=this._styleMap[b];v&&(b=v.line)}return f.Text.prototype.styleHas.call(this,_,b)},isEmptyStyles:function(_){if(!this.styles)return!0;var b=0,v=_+1,w,x,C=!1,T=this._styleMap[_],S=this._styleMap[_+1];T&&(_=T.line,b=T.offset),S&&(v=S.line,C=v===_,w=S.offset),x=typeof _>"u"?this.styles:{line:this.styles[_]};for(var M in x)for(var O in x[M])if(O>=b&&(!C||O<w))for(var V in x[M][O])return!1;return!0},_getStyleDeclaration:function(_,b){if(this._styleMap&&!this.isWrapping){var v=this._styleMap[_];if(!v)return null;_=v.line,b=v.offset+b}return this.callSuper("_getStyleDeclaration",_,b)},_setStyleDeclaration:function(_,b,v){var w=this._styleMap[_];_=w.line,b=w.offset+b,this.styles[_][b]=v},_deleteStyleDeclaration:function(_,b){var v=this._styleMap[_];_=v.line,b=v.offset+b,delete this.styles[_][b]},_getLineStyle:function(_){var b=this._styleMap[_];return!!this.styles[b.line]},_setLineStyle:function(_){var b=this._styleMap[_];this.styles[b.line]={}},_wrapText:function(_,b){var v=[],w;for(this.isWrapping=!0,w=0;w<_.length;w++)v=v.concat(this._wrapLine(_[w],w,b));return this.isWrapping=!1,v},_measureWord:function(_,b,v){var w=0,x,C=!0;v=v||0;for(var T=0,S=_.length;T<S;T++){var M=this._getGraphemeBox(_[T],b,T+v,x,C);w+=M.kernedWidth,x=_[T]}return w},_wrapLine:function(_,b,v,Pe){var x=0,C=this.splitByGrapheme,T=[],S=[],M=C?f.util.string.graphemeSplit(_):_.split(this._wordJoiners),O="",V=0,X=C?"":" ",Z=0,te=0,J=0,ie=!0,Ee=this._getWidthOfCharSpacing(),Pe=Pe||0;M.length===0&&M.push([]),v-=Pe;for(var de=0;de<M.length;de++)O=C?M[de]:f.util.string.graphemeSplit(M[de]),Z=this._measureWord(O,b,V),V+=O.length,x+=te+Z-Ee,x>v&&!ie?(T.push(S),S=[],x=Z,ie=!0):x+=Ee,!ie&&!C&&S.push(X),S=S.concat(O),te=C?0:this._measureWord([X],b,V),V++,ie=!1,Z>J&&(J=Z);return de&&T.push(S),J+Pe>this.dynamicMinWidth&&(this.dynamicMinWidth=J-Ee+Pe),T},isEndOfWrapping:function(_){return!this._styleMap[_+1]||this._styleMap[_+1].line!==this._styleMap[_].line},missingNewlineOffset:function(_){return this.splitByGrapheme?this.isEndOfWrapping(_)?1:0:1},_splitTextIntoLines:function(_){for(var b=f.Text.prototype._splitTextIntoLines.call(this,_),v=this._wrapText(b.lines,this.width),w=new Array(v.length),x=0;x<v.length;x++)w[x]=v[x].join("");return b.lines=w,b.graphemeLines=v,b},getMinWidth:function(){return Math.max(this.minWidth,this.dynamicMinWidth)},_removeExtraneousStyles:function(){var _={};for(var b in this._styleMap)this._textLines[b]&&(_[this._styleMap[b].line]=1);for(var b in this.styles)_[b]||delete this.styles[b]},toObject:function(_){return this.callSuper("toObject",["minWidth","splitByGrapheme"].concat(_))}}),f.Textbox.fromObject=function(_,b){var v=f.util.stylesFromArray(_.styles,_.text),w=Object.assign({},_,{styles:v});return f.Object._fromObject("Textbox",w,b,"text")}}(i),function(){var r=e.controlsUtils,f=r.scaleSkewCursorStyleHandler,_=r.scaleCursorStyleHandler,b=r.scalingEqually,v=r.scalingYOrSkewingX,w=r.scalingXOrSkewingY,x=r.scaleOrSkewActionName,C=e.Object.prototype.controls;if(C.ml=new e.Control({x:-.5,y:0,cursorStyleHandler:f,actionHandler:w,getActionName:x}),C.mr=new e.Control({x:.5,y:0,cursorStyleHandler:f,actionHandler:w,getActionName:x}),C.mb=new e.Control({x:0,y:.5,cursorStyleHandler:f,actionHandler:v,getActionName:x}),C.mt=new e.Control({x:0,y:-.5,cursorStyleHandler:f,actionHandler:v,getActionName:x}),C.tl=new e.Control({x:-.5,y:-.5,cursorStyleHandler:_,actionHandler:b}),C.tr=new e.Control({x:.5,y:-.5,cursorStyleHandler:_,actionHandler:b}),C.bl=new e.Control({x:-.5,y:.5,cursorStyleHandler:_,actionHandler:b}),C.br=new e.Control({x:.5,y:.5,cursorStyleHandler:_,actionHandler:b}),C.mtr=new e.Control({x:0,y:-.5,actionHandler:r.rotationWithSnapping,cursorStyleHandler:r.rotationStyleHandler,offsetY:-40,withConnection:!0,actionName:"rotate"}),e.Textbox){var T=e.Textbox.prototype.controls={};T.mtr=C.mtr,T.tr=C.tr,T.br=C.br,T.tl=C.tl,T.bl=C.bl,T.mt=C.mt,T.mb=C.mb,T.mr=new e.Control({x:.5,y:0,actionHandler:r.changeWidth,cursorStyleHandler:f,actionName:"resizing"}),T.ml=new e.Control({x:-.5,y:0,actionHandler:r.changeWidth,cursorStyleHandler:f,actionName:"resizing"})}}()})(V2);const Zc={JPEG:"jpg",PNG:"png",PDF:"pdf",SVG:"svg"},g1={in:"in",mm:"mm"},ed={A2:[594,420],A3:[420,297],A4:[297,210],A5:[210,148],A6:[148,105],B2:[707,500],B3:[500,353],B4:[353,250],B5:[250,176],B6:[176,125]},th={Landscape:"landscape",Portrait:"portrait"},Hd={72:72,96:96,200:200,300:300,400:400};class U8{constructor(){dl(this,"map");dl(this,"width");dl(this,"height");dl(this,"dpi");dl(this,"format");dl(this,"unit")}generate(e,t=ed.A4,o=300,l=Zc.PNG.toString(),u=g1.mm){this.map=e,this.width=t[0],this.height=t[1],this.dpi=o,this.format=l,this.unit=u;const m=this,r=window.devicePixelRatio;Object.defineProperty(window,"devicePixelRatio",{get(){return m.dpi/96}});const f=document.createElement("div");f.className="hidden-map",document.body.appendChild(f);const _=document.createElement("div");_.style.width=this.toPixels(this.width),_.style.height=this.toPixels(this.height),f.appendChild(_);const b=this.map.getStyle();if(b&&b.sources){const w=b.sources;Object.keys(w).forEach(x=>{const C=w[x];Object.keys(C).forEach(T=>{C[T]||delete C[T]})})}const v=new Tu.exports.Map({container:_,style:b,center:this.map.getCenter(),zoom:this.map.getZoom(),bearing:this.map.getBearing(),pitch:this.map.getPitch(),interactive:!1,preserveDrawingBuffer:!0,fadeDuration:0,attributionControl:!1,transformRequest:this.map._requestManager._transformRequestFn});v.once("idle",()=>{var C;const w=v.getCanvas(),x=`map.${m.format}`;switch(m.format){case Zc.PNG:m.toPNG(w,x);break;case Zc.JPEG:m.toJPEG(w,x);break;case Zc.PDF:m.toPDF(v,x);break;case Zc.SVG:m.toSVG(w,x);break;default:console.error(`Invalid file format: ${m.format}`);break}v.remove(),(C=f.parentNode)==null||C.removeChild(f),Object.defineProperty(window,"devicePixelRatio",{get(){return r}})})}toPNG(e,t){e.toBlob(o=>{P4.exports.saveAs(o,t)})}toJPEG(e,t){const o=e.toDataURL("image/jpeg",.85),l=document.createElement("a");l.href=o,l.download=t,l.click(),l.remove()}toPDF(e,t){const o=e.getCanvas(),l=new Ur({orientation:this.width>this.height?"l":"p",unit:this.unit,compress:!0});l.addImage(o.toDataURL("image/png"),"png",0,0,this.width,this.height,void 0,"FAST");const{lng:u,lat:m}=e.getCenter();l.setProperties({title:e.getStyle().name,subject:`center: [${u}, ${m}], zoom: ${e.getZoom()}`,creator:"Mapbox GL Export Plugin",author:"(c)Mapbox, (c)OpenStreetMap"}),l.save(t)}toSVG(e,t){const o=e.toDataURL("image/png");V2.fabric.Image.fromURL(o,l=>{const u=new V2.fabric.Canvas("canvas"),m=Number(this.toPixels(this.width,this.dpi).replace("px","")),r=Number(this.toPixels(this.height,this.dpi).replace("px",""));l.scaleToWidth(m),l.scaleToHeight(r),u.add(l);const f=u.toSVG({x:0,y:0,width:m,height:r,viewBox:{x:0,y:0,width:m,height:r}}),_=document.createElement("a");_.href=`data:application/xml,${encodeURIComponent(f)}`,_.download=t,_.click(),_.remove()})}toPixels(e,t=96){return this.unit===g1.mm&&(t/=25.4),`${t*e}px`}toBlob(e){const t=atob(e.replace(/^.*,/,"")),o=new Uint8Array(t.length);for(let u=0;u<t.length;u+=1)o[u]=t.charCodeAt(u);return new Blob([o.buffer],{type:"image/png"})}}const V8=Object.freeze(Object.defineProperty({__proto__:null,Format:Zc,Unit:g1,Size:ed,PageOrientation:th,DPI:Hd,default:U8},Symbol.toStringTag,{value:"Module"})),Pu=Nl(null),Gd=Nl(null),wd=Nl(null),Bm=Nl(null),xd=Nl(null),Ad=Nl("Measure"),q2=Nl([]);function v_(i,e,t){const o=i.slice();return o[15]=e[t],o}function b_(i,e,t){const o=i.slice();return o[15]=e[t],o}function w_(i,e,t){const o=i.slice();return o[15]=e[t],o}function x_(i,e,t){const o=i.slice();return o[15]=e[t],o}function A_(i){let e,t=i[15]+"",o;return{c(){e=Ht("option"),o=Kn(t),this.h()},l(l){e=Gt(l,"OPTION",{});var u=$t(e);o=Jn(u,t),u.forEach(De),this.h()},h(){e.__value=ed[i[15]],e.value=e.__value},m(l,u){jt(l,e,u),Ut(e,o)},p:go,d(l){l&&De(e)}}}function k_(i){let e,t,o,l,u,m,r,f=i[15]+"",_,b,v,w;function x(){return i[9](i[15])}return{c(){e=Ht("label"),t=Ht("input"),l=Wi(),u=Ht("div"),m=Ht("i"),r=Wi(),_=Kn(f),b=Wi(),this.h()},l(C){e=Gt(C,"LABEL",{class:!0,style:!0});var T=$t(e);t=Gt(T,"INPUT",{type:!0,name:!0}),l=Xi(T),u=Gt(T,"DIV",{class:!0});var S=$t(u);m=Gt(S,"I",{class:!0}),$t(m).forEach(De),S.forEach(De),r=Xi(T),_=Jn(T,f),b=Xi(T),T.forEach(De),this.h()},h(){qt(t,"type","radio"),qt(t,"name","orientation"),t.checked=o=i[3]===th[i[15]],qt(m,"class",`fas ${th[i[15]]===th.Landscape?"fa-left-right":"fa-up-down"} svelte-ffzutn`),qt(u,"class","icon is-small is-left"),qt(e,"class","radio"),Ou(e,"color","black")},m(C,T){jt(C,e,T),Ut(e,t),Ut(e,l),Ut(e,u),Ut(u,m),Ut(e,r),Ut(e,_),Ut(e,b),v||(w=xn(t,"click",x),v=!0)},p(C,T){i=C,T&8&&o!==(o=i[3]===th[i[15]])&&(t.checked=o)},d(C){C&&De(e),v=!1,w()}}}function S_(i){let e,t=i[15]+"",o;return{c(){e=Ht("option"),o=Kn(t),this.h()},l(l){e=Gt(l,"OPTION",{});var u=$t(e);o=Jn(u,t),u.forEach(De),this.h()},h(){e.__value=Zc[i[15]],e.value=e.__value},m(l,u){jt(l,e,u),Ut(e,o)},p:go,d(l){l&&De(e)}}}function C_(i){let e,t=i[15]+"",o;return{c(){e=Ht("option"),o=Kn(t),this.h()},l(l){e=Gt(l,"OPTION",{});var u=$t(e);o=Jn(u,t),u.forEach(De),this.h()},h(){e.__value=Hd[i[15]],e.value=e.__value},m(l,u){jt(l,e,u),Ut(e,o)},p:go,d(l){l&&De(e)}}}function q8(i){let e,t,o,l,u,m,r,f,_,b,v,w,x,C,T,S,M,O,V,X,Z,te,J,ie,Ee,Pe,de,Te,ve,_e,ot,it,It,Xe,we,Ce,Re,le,Se,he,me,Be,We,st,Ye,gt,Mt,ri,ut,wt,bt,Je,ei,li,Qt,Si,Ti,Xt,mi,Zi,Ci,ti,Me,Q,ae,$e,_t,Kt,di,wn,Ln=Object.keys(ed),fn=[];for(let dn=0;dn<Ln.length;dn+=1)fn[dn]=A_(x_(i,Ln,dn));let Bi=Object.keys(th),Ki=[];for(let dn=0;dn<Bi.length;dn+=1)Ki[dn]=k_(w_(i,Bi,dn));let Hn=Object.keys(Zc),Gn=[];for(let dn=0;dn<Hn.length;dn+=1)Gn[dn]=S_(b_(i,Hn,dn));let Zr=Object.keys(Hd),zn=[];for(let dn=0;dn<Zr.length;dn+=1)zn[dn]=C_(v_(i,Zr,dn));return{c(){e=Ht("div"),t=Ht("i"),o=Wi(),l=Ht("div"),u=Ht("div"),m=Wi(),r=Ht("div"),f=Ht("header"),_=Ht("p"),b=Kn("Export"),v=Wi(),w=Ht("button"),x=Wi(),C=Ht("section"),T=Ht("div"),S=Ht("label"),M=Kn("Paper Size"),O=Wi(),V=Ht("div"),X=Ht("div"),Z=Ht("select");for(let dn=0;dn<fn.length;dn+=1)fn[dn].c();te=Wi(),J=Ht("div"),ie=Ht("i"),Ee=Wi(),Pe=Ht("div"),de=Ht("label"),Te=Kn("Page Orientation"),ve=Wi(),_e=Ht("div");for(let dn=0;dn<Ki.length;dn+=1)Ki[dn].c();ot=Wi(),it=Ht("div"),It=Ht("label"),Xe=Kn("Format"),we=Wi(),Ce=Ht("div"),Re=Ht("div"),le=Ht("select");for(let dn=0;dn<Gn.length;dn+=1)Gn[dn].c();Se=Wi(),he=Ht("div"),me=Ht("i"),Be=Wi(),We=Ht("div"),st=Ht("label"),Ye=Kn("DPI"),gt=Wi(),Mt=Ht("div"),ri=Ht("div"),ut=Ht("select");for(let dn=0;dn<zn.length;dn+=1)zn[dn].c();wt=Wi(),bt=Ht("div"),Je=Ht("i"),ei=Wi(),li=Ht("footer"),Qt=Ht("button"),Si=Ht("span"),Ti=Ht("i"),Xt=Wi(),mi=Ht("span"),Zi=Kn("Cancel"),Ci=Wi(),ti=Ht("button"),Me=Ht("span"),Q=Ht("i"),ae=Wi(),$e=Ht("span"),_t=Kn("Export"),this.h()},l(dn){e=Gt(dn,"DIV",{class:!0});var gn=$t(e);t=Gt(gn,"I",{class:!0}),$t(t).forEach(De),gn.forEach(De),o=Xi(dn),l=Gt(dn,"DIV",{class:!0});var on=$t(l);u=Gt(on,"DIV",{class:!0}),$t(u).forEach(De),m=Xi(on),r=Gt(on,"DIV",{class:!0});var Sr=$t(r);f=Gt(Sr,"HEADER",{class:!0});var Wn=$t(f);_=Gt(Wn,"P",{class:!0});var gr=$t(_);b=Jn(gr,"Export"),gr.forEach(De),v=Xi(Wn),w=Gt(Wn,"BUTTON",{class:!0,"aria-label":!0}),$t(w).forEach(De),Wn.forEach(De),x=Xi(Sr),C=Gt(Sr,"SECTION",{class:!0});var Kr=$t(C);T=Gt(Kr,"DIV",{class:!0});var an=$t(T);S=Gt(an,"LABEL",{class:!0});var He=$t(S);M=Jn(He,"Paper Size"),He.forEach(De),O=Xi(an),V=Gt(an,"DIV",{class:!0});var wo=$t(V);X=Gt(wo,"DIV",{class:!0});var xo=$t(X);Z=Gt(xo,"SELECT",{});var co=$t(Z);for(let Jr=0;Jr<fn.length;Jr+=1)fn[Jr].l(co);co.forEach(De),xo.forEach(De),te=Xi(wo),J=Gt(wo,"DIV",{class:!0});var Le=$t(J);ie=Gt(Le,"I",{class:!0}),$t(ie).forEach(De),Le.forEach(De),wo.forEach(De),an.forEach(De),Ee=Xi(Kr),Pe=Gt(Kr,"DIV",{class:!0});var Ie=$t(Pe);de=Gt(Ie,"LABEL",{class:!0});var qe=$t(de);Te=Jn(qe,"Page Orientation"),qe.forEach(De),ve=Xi(Ie),_e=Gt(Ie,"DIV",{class:!0});var ct=$t(_e);for(let Jr=0;Jr<Ki.length;Jr+=1)Ki[Jr].l(ct);ct.forEach(De),Ie.forEach(De),ot=Xi(Kr),it=Gt(Kr,"DIV",{class:!0});var dt=$t(it);It=Gt(dt,"LABEL",{class:!0});var Bt=$t(It);Xe=Jn(Bt,"Format"),Bt.forEach(De),we=Xi(dt),Ce=Gt(dt,"DIV",{class:!0});var Ge=$t(Ce);Re=Gt(Ge,"DIV",{class:!0});var Yt=$t(Re);le=Gt(Yt,"SELECT",{});var Ft=$t(le);for(let Jr=0;Jr<Gn.length;Jr+=1)Gn[Jr].l(Ft);Ft.forEach(De),Yt.forEach(De),Se=Xi(Ge),he=Gt(Ge,"DIV",{class:!0});var oi=$t(he);me=Gt(oi,"I",{class:!0}),$t(me).forEach(De),oi.forEach(De),Ge.forEach(De),dt.forEach(De),Be=Xi(Kr),We=Gt(Kr,"DIV",{class:!0});var yt=$t(We);st=Gt(yt,"LABEL",{class:!0});var Ri=$t(st);Ye=Jn(Ri,"DPI"),Ri.forEach(De),gt=Xi(yt),Mt=Gt(yt,"DIV",{class:!0});var Ii=$t(Mt);ri=Gt(Ii,"DIV",{class:!0});var En=$t(ri);ut=Gt(En,"SELECT",{});var Sn=$t(ut);for(let Jr=0;Jr<zn.length;Jr+=1)zn[Jr].l(Sn);Sn.forEach(De),En.forEach(De),wt=Xi(Ii),bt=Gt(Ii,"DIV",{class:!0});var xt=$t(bt);Je=Gt(xt,"I",{class:!0}),$t(Je).forEach(De),xt.forEach(De),Ii.forEach(De),yt.forEach(De),Kr.forEach(De),ei=Xi(Sr),li=Gt(Sr,"FOOTER",{class:!0});var Tn=$t(li);Qt=Gt(Tn,"BUTTON",{class:!0});var Qn=$t(Qt);Si=Gt(Qn,"SPAN",{class:!0});var Lr=$t(Si);Ti=Gt(Lr,"I",{class:!0}),$t(Ti).forEach(De),Lr.forEach(De),Xt=Xi(Qn),mi=Gt(Qn,"SPAN",{});var dr=$t(mi);Zi=Jn(dr,"Cancel"),dr.forEach(De),Qn.forEach(De),Ci=Xi(Tn),ti=Gt(Tn,"BUTTON",{class:!0});var Cr=$t(ti);Me=Gt(Cr,"SPAN",{class:!0});var Pr=$t(Me);Q=Gt(Pr,"I",{class:!0}),$t(Q).forEach(De),Pr.forEach(De),ae=Xi(Cr),$e=Gt(Cr,"SPAN",{});var to=$t($e);_t=Jn(to,"Export"),to.forEach(De),Cr.forEach(De),Tn.forEach(De),Sr.forEach(De),on.forEach(De),this.h()},h(){qt(t,"class","fas fa-print fa-xl"),qt(e,"class","icon is-large is-left menu-button svelte-ffzutn"),qt(u,"class","modal-background"),qt(_,"class","modal-card-title"),qt(w,"class","delete"),qt(w,"aria-label","close"),qt(f,"class","modal-card-head"),qt(S,"class","label"),i[0]===void 0&&tc(()=>i[8].call(Z)),qt(X,"class","select is-fullwidth"),qt(ie,"class","fas fa-file"),qt(J,"class","icon is-small is-left"),qt(V,"class","control has-icons-left"),qt(T,"class","field"),qt(de,"class","label"),qt(_e,"class","control"),qt(Pe,"class","field"),qt(It,"class","label"),i[2]===void 0&&tc(()=>i[10].call(le)),qt(Re,"class","select is-fullwidth"),qt(me,"class","fas fa-file-pdf"),qt(he,"class","icon is-small is-left"),qt(Ce,"class","control has-icons-left"),qt(it,"class","field"),qt(st,"class","label"),i[1]===void 0&&tc(()=>i[11].call(ut)),qt(ri,"class","select is-fullwidth"),qt(Je,"class","fas fa-braille"),qt(bt,"class","icon is-small is-left"),qt(Mt,"class","control has-icons-left"),qt(We,"class","field"),qt(C,"class","modal-card-body"),qt(Ti,"class","fas fa-xmark"),qt(Si,"class","icon"),qt(Qt,"class","button"),qt(Q,"class","fas fa-download"),qt(Me,"class","icon"),qt(ti,"class","button is-success"),qt(li,"class","modal-card-foot"),qt(r,"class","modal-card"),qt(l,"class",Kt=`modal ${i[4]?"is-active":""} svelte-ffzutn`)},m(dn,gn){jt(dn,e,gn),Ut(e,t),jt(dn,o,gn),jt(dn,l,gn),Ut(l,u),Ut(l,m),Ut(l,r),Ut(r,f),Ut(f,_),Ut(_,b),Ut(f,v),Ut(f,w),Ut(r,x),Ut(r,C),Ut(C,T),Ut(T,S),Ut(S,M),Ut(T,O),Ut(T,V),Ut(V,X),Ut(X,Z);for(let on=0;on<fn.length;on+=1)fn[on].m(Z,null);$u(Z,i[0]),Ut(V,te),Ut(V,J),Ut(J,ie),Ut(C,Ee),Ut(C,Pe),Ut(Pe,de),Ut(de,Te),Ut(Pe,ve),Ut(Pe,_e);for(let on=0;on<Ki.length;on+=1)Ki[on].m(_e,null);Ut(C,ot),Ut(C,it),Ut(it,It),Ut(It,Xe),Ut(it,we),Ut(it,Ce),Ut(Ce,Re),Ut(Re,le);for(let on=0;on<Gn.length;on+=1)Gn[on].m(le,null);$u(le,i[2]),Ut(Ce,Se),Ut(Ce,he),Ut(he,me),Ut(C,Be),Ut(C,We),Ut(We,st),Ut(st,Ye),Ut(We,gt),Ut(We,Mt),Ut(Mt,ri),Ut(ri,ut);for(let on=0;on<zn.length;on+=1)zn[on].m(ut,null);$u(ut,i[1]),Ut(Mt,wt),Ut(Mt,bt),Ut(bt,Je),Ut(r,ei),Ut(r,li),Ut(li,Qt),Ut(Qt,Si),Ut(Si,Ti),Ut(Qt,Xt),Ut(Qt,mi),Ut(mi,Zi),Ut(li,Ci),Ut(li,ti),Ut(ti,Me),Ut(Me,Q),Ut(ti,ae),Ut(ti,$e),Ut($e,_t),di||(wn=[xn(e,"click",i[6]),xn(u,"click",i[7]),xn(w,"click",i[7]),xn(Z,"change",i[8]),xn(le,"change",i[10]),xn(ut,"change",i[11]),xn(Qt,"click",i[7]),xn(ti,"click",i[5])],di=!0)},p(dn,[gn]){if(gn&0){Ln=Object.keys(ed);let on;for(on=0;on<Ln.length;on+=1){const Sr=x_(dn,Ln,on);fn[on]?fn[on].p(Sr,gn):(fn[on]=A_(Sr),fn[on].c(),fn[on].m(Z,null))}for(;on<fn.length;on+=1)fn[on].d(1);fn.length=Ln.length}if(gn&1&&$u(Z,dn[0]),gn&8){Bi=Object.keys(th);let on;for(on=0;on<Bi.length;on+=1){const Sr=w_(dn,Bi,on);Ki[on]?Ki[on].p(Sr,gn):(Ki[on]=k_(Sr),Ki[on].c(),Ki[on].m(_e,null))}for(;on<Ki.length;on+=1)Ki[on].d(1);Ki.length=Bi.length}if(gn&0){Hn=Object.keys(Zc);let on;for(on=0;on<Hn.length;on+=1){const Sr=b_(dn,Hn,on);Gn[on]?Gn[on].p(Sr,gn):(Gn[on]=S_(Sr),Gn[on].c(),Gn[on].m(le,null))}for(;on<Gn.length;on+=1)Gn[on].d(1);Gn.length=Hn.length}if(gn&4&&$u(le,dn[2]),gn&0){Zr=Object.keys(Hd);let on;for(on=0;on<Zr.length;on+=1){const Sr=v_(dn,Zr,on);zn[on]?zn[on].p(Sr,gn):(zn[on]=C_(Sr),zn[on].c(),zn[on].m(ut,null))}for(;on<zn.length;on+=1)zn[on].d(1);zn.length=Zr.length}gn&2&&$u(ut,dn[1]),gn&16&&Kt!==(Kt=`modal ${dn[4]?"is-active":""} svelte-ffzutn`)&&qt(l,"class",Kt)},i:go,o:go,d(dn){dn&&De(e),dn&&De(o),dn&&De(l),Ja(fn,dn),Ja(Ki,dn),Ja(Gn,dn),Ja(zn,dn),di=!1,Lo(wn)}}}function H8(i,e,t){let o;Yo(i,Pu,O=>t(13,o=O));let l,u=ed.A4,m=Hd[96],r=Zc.PNG,f=th.Landscape,_=!1;ks(async()=>{const{default:O}=await d1(()=>Promise.resolve().then(()=>V8),void 0,import.meta.url);l=new O});const b=()=>{let O=[u[0],u[1]];return f!==th.Landscape&&(O=O.reverse()),O},v=()=>{const O=b();l.generate(o,O,m,r,g1.mm),x()},w=()=>{t(4,_=!0)},x=()=>{t(4,_=!1)};function C(){u=j0(this),t(0,u)}const T=O=>{t(3,f=th[O])};function S(){r=j0(this),t(2,r)}function M(){m=j0(this),t(1,m)}return[u,m,r,f,_,v,w,x,C,T,S,M]}class G8 extends br{constructor(e){super(),wr(this,e,H8,q8,mr,{})}}const W8=async i=>{if("clipboard"in navigator)await navigator.clipboard.writeText(i);else{const e=document.createElement("input");e.type="text",e.disabled=!0,e.style.setProperty("position","fixed"),e.style.setProperty("z-index","-100"),e.style.setProperty("pointer-events","none"),e.style.setProperty("opacity","0"),e.value=i,document.body.appendChild(e),e.click(),e.select(),document.execCommand("copy"),document.body.removeChild(e)}},X8=(i,e)=>{async function t(){if(l)try{await W8(l),i.dispatchEvent(new CustomEvent("svelte-copy",{detail:l}))}catch(u){i.dispatchEvent(new CustomEvent("svelte-copy:error",{detail:u}))}}let o=typeof e=="string"?["click"]:[e.events].flat(1),l=typeof e=="string"?e:e.text;return o.forEach(u=>{i.addEventListener(u,t,!0)}),{update:u=>{const m=typeof u=="string"?["click"]:[u.events].flat(1),r=typeof u=="string"?u:u.text,f=m.filter(b=>!o.includes(b)),_=o.filter(b=>!m.includes(b));f.forEach(b=>{i.addEventListener(b,t,!0)}),_.forEach(b=>{i.removeEventListener(b,t,!0)}),o=m,l=r},destroy:()=>{o.forEach(u=>{i.removeEventListener(u,t,!0)})}}};function Y8(i){let e,t,o,l,u,m,r,f,_,b,v,w,x,C,T,S,M,O,V,X,Z,te,J,ie,Ee,Pe,de,Te,ve,_e,ot,it,It,Xe,we;return{c(){e=Ht("div"),t=Ht("i"),o=Wi(),l=Ht("div"),u=Ht("div"),m=Wi(),r=Ht("div"),f=Ht("header"),_=Ht("p"),b=Kn("URL to share"),v=Wi(),w=Ht("button"),x=Wi(),C=Ht("section"),T=Ht("div"),S=Ht("input"),M=Wi(),O=Ht("button"),V=Ht("span"),X=Ht("i"),Z=Wi(),te=Ht("span"),J=Kn(i[1]),Ee=Wi(),Pe=Ht("footer"),de=Ht("button"),Te=Ht("span"),ve=Ht("i"),_e=Wi(),ot=Ht("span"),it=Kn("Cancel"),this.h()},l(Ce){e=Gt(Ce,"DIV",{class:!0});var Re=$t(e);t=Gt(Re,"I",{class:!0}),$t(t).forEach(De),Re.forEach(De),o=Xi(Ce),l=Gt(Ce,"DIV",{class:!0});var le=$t(l);u=Gt(le,"DIV",{class:!0}),$t(u).forEach(De),m=Xi(le),r=Gt(le,"DIV",{class:!0});var Se=$t(r);f=Gt(Se,"HEADER",{class:!0});var he=$t(f);_=Gt(he,"P",{class:!0});var me=$t(_);b=Jn(me,"URL to share"),me.forEach(De),v=Xi(he),w=Gt(he,"BUTTON",{class:!0,"aria-label":!0}),$t(w).forEach(De),he.forEach(De),x=Xi(Se),C=Gt(Se,"SECTION",{class:!0});var Be=$t(C);T=Gt(Be,"DIV",{class:!0});var We=$t(T);S=Gt(We,"INPUT",{class:!0,type:!0,placeholder:!0}),M=Xi(We),O=Gt(We,"BUTTON",{class:!0});var st=$t(O);V=Gt(st,"SPAN",{class:!0});var Ye=$t(V);X=Gt(Ye,"I",{class:!0}),$t(X).forEach(De),Ye.forEach(De),Z=Xi(st),te=Gt(st,"SPAN",{});var gt=$t(te);J=Jn(gt,i[1]),gt.forEach(De),st.forEach(De),We.forEach(De),Be.forEach(De),Ee=Xi(Se),Pe=Gt(Se,"FOOTER",{class:!0});var Mt=$t(Pe);de=Gt(Mt,"BUTTON",{class:!0});var ri=$t(de);Te=Gt(ri,"SPAN",{class:!0});var ut=$t(Te);ve=Gt(ut,"I",{class:!0}),$t(ve).forEach(De),ut.forEach(De),_e=Xi(ri),ot=Gt(ri,"SPAN",{});var wt=$t(ot);it=Jn(wt,"Cancel"),wt.forEach(De),ri.forEach(De),Mt.forEach(De),Se.forEach(De),le.forEach(De),this.h()},h(){qt(t,"class","fas fa-share-nodes fa-xl"),qt(e,"class","icon is-large is-left menu-button svelte-119wfm0"),qt(u,"class","modal-background"),qt(_,"class","modal-card-title"),qt(w,"class","delete"),qt(w,"aria-label","close"),qt(f,"class","modal-card-head"),qt(S,"class","input is-success"),qt(S,"type","text"),qt(S,"placeholder","URL to share"),S.readOnly=!0,qt(X,"class","fas fa-copy"),qt(V,"class","icon"),qt(O,"class","button is-success ml-1"),qt(T,"class","copy-control svelte-119wfm0"),qt(C,"class","modal-card-body"),qt(ve,"class","fas fa-xmark"),qt(Te,"class","icon"),qt(de,"class","button"),qt(Pe,"class","modal-card-foot"),qt(r,"class","modal-card"),qt(l,"class",It=`modal ${i[0]?"is-active":""} svelte-119wfm0`)},m(Ce,Re){jt(Ce,e,Re),Ut(e,t),jt(Ce,o,Re),jt(Ce,l,Re),Ut(l,u),Ut(l,m),Ut(l,r),Ut(r,f),Ut(f,_),Ut(_,b),Ut(f,v),Ut(f,w),Ut(r,x),Ut(r,C),Ut(C,T),Ut(T,S),$0(S,i[2]),Ut(T,M),Ut(T,O),Ut(O,V),Ut(V,X),Ut(O,Z),Ut(O,te),Ut(te,J),Ut(r,Ee),Ut(r,Pe),Ut(Pe,de),Ut(de,Te),Ut(Te,ve),Ut(de,_e),Ut(de,ot),Ut(ot,it),Xe||(we=[xn(e,"click",i[5]),xn(u,"click",i[4]),xn(w,"click",i[4]),xn(S,"input",i[6]),tr(ie=X8.call(null,O,i[2])),xn(O,"click",i[3]),xn(de,"click",i[4])],Xe=!0)},p(Ce,[Re]){Re&4&&S.value!==Ce[2]&&$0(S,Ce[2]),Re&2&&Os(J,Ce[1]),ie&&so(ie.update)&&Re&4&&ie.update.call(null,Ce[2]),Re&1&&It!==(It=`modal ${Ce[0]?"is-active":""} svelte-119wfm0`)&&qt(l,"class",It)},i:go,o:go,d(Ce){Ce&&De(e),Ce&&De(o),Ce&&De(l),Xe=!1,Lo(we)}}}function Z8(i,e,t){let o,l,u,m;Yo(i,Gd,C=>t(7,l=C)),Yo(i,Pu,C=>t(8,u=C)),Yo(i,_x,C=>t(9,m=C));let r,f="Copy";const _=()=>{t(1,f="copied"),setTimeout(()=>{t(1,f="Copy")},2e3)},b=()=>{if(!u)return"";const C=`${m.url.protocol}//${m.url.host}`,T=`#${u.getZoom().toFixed(2)}`,S=`/${u.getCenter().lat.toFixed(6)}`,M=`/${u.getCenter().lng.toFixed(6)}`,O=u.getBearing()!==0?`/${u.getBearing().toFixed(1)}`:"",V=u.getPitch()!==0?`/${u.getPitch().toFixed()}`:"",X=`/?style=${l.title}`;return t(2,o=`${C}${X}${T}${S}${M}${O}${V}`),o},v=()=>{t(0,r=!1)},w=()=>t(0,r=!0);function x(){o=this.value,t(2,o)}return i.$$.update=()=>{i.$$.dirty&1&&r===!0&&b()},t(2,o=b()),[r,f,o,_,v,w,x]}class K8 extends br{constructor(e){super(),wr(this,e,Z8,Y8,mr,{})}}function J8(i){let e;return{c(){e=Ht("link"),this.h()},l(t){e=Gt(t,"LINK",{rel:!0,href:!0}),this.h()},h(){qt(e,"rel","stylesheet"),qt(e,"href",Br.basePath+"/smui.css")},m(t,o){jt(t,e,o)},p:go,d(t){t&&De(e)}}}function Q8(i){let e,t,o;return{c(){e=Ht("link"),t=Wi(),o=Ht("link"),this.h()},l(l){e=Gt(l,"LINK",{rel:!0,href:!0,media:!0}),t=Xi(l),o=Gt(l,"LINK",{rel:!0,href:!0,media:!0}),this.h()},h(){qt(e,"rel","stylesheet"),qt(e,"href",Br.basePath+"/smui.css"),qt(e,"media","print"),qt(o,"rel","stylesheet"),qt(o,"href",Br.basePath+"/smui-dark.css"),qt(o,"media","screen")},m(l,u){jt(l,e,u),jt(l,t,u),jt(l,o,u)},p:go,d(l){l&&De(e),l&&De(t),l&&De(o)}}}function $8(i){let e,t,o;return{c(){e=Ht("link"),t=Wi(),o=Ht("link"),this.h()},l(l){e=Gt(l,"LINK",{rel:!0,href:!0,media:!0}),t=Xi(l),o=Gt(l,"LINK",{rel:!0,href:!0,media:!0}),this.h()},h(){qt(e,"rel","stylesheet"),qt(e,"href",Br.basePath+"/smui.css"),qt(e,"media","(prefers-color-scheme: light)"),qt(o,"rel","stylesheet"),qt(o,"href",Br.basePath+"/smui-dark.css"),qt(o,"media","screen and (prefers-color-scheme: dark)")},m(l,u){jt(l,e,u),jt(l,t,u),jt(l,o,u)},p:go,d(l){l&&De(e),l&&De(t),l&&De(o)}}}function eA(i){let e,t,o,l,u,m,r;function f(v,w){return v[0]===void 0?$8:v[0]?Q8:J8}let _=f(i),b=_(i);return{c(){b.c(),e=kn(),t=Wi(),o=Ht("div"),l=Ht("i"),this.h()},l(v){const w=mx("svelte-7r4yyr",document.head);b.l(w),e=kn(),w.forEach(De),t=Xi(v),o=Gt(v,"DIV",{class:!0});var x=$t(o);l=Gt(x,"I",{class:!0}),$t(l).forEach(De),x.forEach(De),this.h()},h(){qt(l,"class",u=`fas ${i[0]?"fa-sun":"fa-moon"} fa-xl svelte-ffzutn`),qt(o,"class","icon is-large is-left menu-button svelte-ffzutn")},m(v,w){b.m(document.head,null),Ut(document.head,e),jt(v,t,w),jt(v,o,w),Ut(o,l),m||(r=xn(o,"click",i[1]),m=!0)},p(v,[w]){_===(_=f(v))&&b?b.p(v,w):(b.d(1),b=_(v),b&&(b.c(),b.m(e.parentNode,e))),w&1&&u!==(u=`fas ${v[0]?"fa-sun":"fa-moon"} fa-xl svelte-ffzutn`)&&qt(l,"class",u)},i:go,o:go,d(v){b.d(v),De(e),v&&De(t),v&&De(o),m=!1,r()}}}function tA(i,e,t){let o;const l=ep();return ks(async()=>{t(0,o=window.matchMedia("(prefers-color-scheme: dark)").matches)}),[o,()=>{t(0,o=!o),l("change",{isDarkTheme:o})}]}class iA extends br{constructor(e){super(),wr(this,e,tA,eA,mr,{})}}function nA(i){let e,t,o,l,u;return{c(){e=Ht("div"),t=Ht("i"),this.h()},l(m){e=Gt(m,"DIV",{class:!0});var r=$t(e);t=Gt(r,"I",{class:!0}),$t(t).forEach(De),r.forEach(De),this.h()},h(){qt(t,"class",o=`fas ${i[0]?"fa-xmark":"fa-bars"} fa-xl svelte-ffzutn`),qt(e,"class","icon is-large is-left menu-button svelte-ffzutn")},m(m,r){jt(m,e,r),Ut(e,t),l||(u=xn(e,"click",i[1]),l=!0)},p(m,[r]){r&1&&o!==(o=`fas ${m[0]?"fa-xmark":"fa-bars"} fa-xl svelte-ffzutn`)&&qt(t,"class",o)},i:go,o:go,d(m){m&&De(e),l=!1,u()}}}function rA(i,e,t){let{isOpened:o=!1}=e;const l=()=>t(0,o=!o);return i.$$set=u=>{"isOpened"in u&&t(0,o=u.isOpened)},[o,l]}class oA extends br{constructor(e){super(),wr(this,e,rA,nA,mr,{isOpened:0})}}function sA(i){let e=Br.title+"",t;return{c(){t=Kn(e)},l(o){t=Jn(o,e)},m(o,l){jt(o,t,l)},p:go,d(o){o&&De(t)}}}function aA(i){let e,t,o,l,u,m,r,f,_;function b(w){i[3](w)}let v={};return i[0]!==void 0&&(v.isOpened=i[0]),e=new oA({props:v}),bn.push(()=>Uo(e,"isOpened",b)),f=new D6({props:{$$slots:{default:[sA]},$$scope:{ctx:i}}}),{c(){en(e.$$.fragment),o=Wi(),l=Ht("a"),u=Ht("img"),r=Wi(),en(f.$$.fragment),this.h()},l(w){un(e.$$.fragment,w),o=Xi(w),l=Gt(w,"A",{href:!0});var x=$t(l);u=Gt(x,"IMG",{src:!0,alt:!0,class:!0}),x.forEach(De),r=Xi(w),un(f.$$.fragment,w),this.h()},h(){o4(u.src,m=Br.logo)||qt(u,"src",m),qt(u,"alt","logo"),qt(u,"class","logo svelte-1cnjkz4"),qt(l,"href",Br.url)},m(w,x){tn(e,w,x),jt(w,o,x),jt(w,l,x),Ut(l,u),jt(w,r,x),tn(f,w,x),_=!0},p(w,x){const C={};!t&&x&1&&(t=!0,C.isOpened=w[0],Vo(()=>t=!1)),e.$set(C);const T={};x&32&&(T.$$scope={dirty:x,ctx:w}),f.$set(T)},i(w){_||(vt(e.$$.fragment,w),vt(f.$$.fragment,w),_=!0)},o(w){Lt(e.$$.fragment,w),Lt(f.$$.fragment,w),_=!1},d(w){nn(e,w),w&&De(o),w&&De(l),w&&De(r),nn(f,w)}}}function lA(i){let e,t,o,l,u,m;return e=new K8({}),o=new G8({}),u=new iA({}),u.$on("change",i[2]),{c(){en(e.$$.fragment),t=Wi(),en(o.$$.fragment),l=Wi(),en(u.$$.fragment)},l(r){un(e.$$.fragment,r),t=Xi(r),un(o.$$.fragment,r),l=Xi(r),un(u.$$.fragment,r)},m(r,f){tn(e,r,f),jt(r,t,f),tn(o,r,f),jt(r,l,f),tn(u,r,f),m=!0},p:go,i(r){m||(vt(e.$$.fragment,r),vt(o.$$.fragment,r),vt(u.$$.fragment,r),m=!0)},o(r){Lt(e.$$.fragment,r),Lt(o.$$.fragment,r),Lt(u.$$.fragment,r),m=!1},d(r){nn(e,r),r&&De(t),nn(o,r),r&&De(l),nn(u,r)}}}function uA(i){let e,t,o,l,u,m;return e=new Qy({props:{$$slots:{default:[aA]},$$scope:{ctx:i}}}),u=new Qy({props:{align:"end",toolbar:!0,$$slots:{default:[lA]},$$scope:{ctx:i}}}),{c(){en(e.$$.fragment),t=Wi(),o=Ht("section"),l=Wi(),en(u.$$.fragment)},l(r){un(e.$$.fragment,r),t=Xi(r),o=Gt(r,"SECTION",{}),$t(o).forEach(De),l=Xi(r),un(u.$$.fragment,r)},m(r,f){tn(e,r,f),jt(r,t,f),jt(r,o,f),jt(r,l,f),tn(u,r,f),m=!0},p(r,f){const _={};f&33&&(_.$$scope={dirty:f,ctx:r}),e.$set(_);const b={};f&32&&(b.$$scope={dirty:f,ctx:r}),u.$set(b)},i(r){m||(vt(e.$$.fragment,r),vt(u.$$.fragment,r),m=!0)},o(r){Lt(e.$$.fragment,r),Lt(u.$$.fragment,r),m=!1},d(r){nn(e,r),r&&De(t),r&&De(o),r&&De(l),nn(u,r)}}}function cA(i){let e,t;return e=new T6({props:{$$slots:{default:[uA]},$$scope:{ctx:i}}}),{c(){en(e.$$.fragment)},l(o){un(e.$$.fragment,o)},m(o,l){tn(e,o,l),t=!0},p(o,l){const u={};l&33&&(u.$$scope={dirty:l,ctx:o}),e.$set(u)},i(o){t||(vt(e.$$.fragment,o),t=!0)},o(o){Lt(e.$$.fragment,o),t=!1},d(o){nn(e,o)}}}function hA(i){let e,t,o,l,u={variant:"fixed",$$slots:{default:[cA]},$$scope:{ctx:i}};return e=new Ox({props:u}),i[4](e),o=new z6({props:{topAppBar:i[1]}}),{c(){en(e.$$.fragment),t=Wi(),en(o.$$.fragment)},l(m){un(e.$$.fragment,m),t=Xi(m),un(o.$$.fragment,m)},m(m,r){tn(e,m,r),jt(m,t,r),tn(o,m,r),l=!0},p(m,[r]){const f={};r&33&&(f.$$scope={dirty:r,ctx:m}),e.$set(f);const _={};r&2&&(_.topAppBar=m[1]),o.$set(_)},i(m){l||(vt(e.$$.fragment,m),vt(o.$$.fragment,m),l=!0)},o(m){Lt(e.$$.fragment,m),Lt(o.$$.fragment,m),l=!1},d(m){i[4](null),nn(e,m),m&&De(t),nn(o,m)}}}function fA(i,e,t){let{drawerOpen:o=!1}=e,l;const u=()=>{t(0,o=!1)};function m(f){o=f,t(0,o)}function r(f){bn[f?"unshift":"push"](()=>{l=f,t(1,l)})}return i.$$set=f=>{"drawerOpen"in f&&t(0,o=f.drawerOpen)},[o,l,u,m,r]}class dA extends br{constructor(e){super(),wr(this,e,fA,hA,mr,{drawerOpen:0})}}const D4={name:"SplitterContext"};function pA(i){let e,t,o,l;return{c(){e=Ht("div"),t=Ht("div"),this.h()},l(u){e=Gt(u,"DIV",{class:!0,tabindex:!0});var m=$t(e);t=Gt(m,"DIV",{class:!0,style:!0}),$t(t).forEach(De),m.forEach(De),this.h()},h(){qt(t,"class","line svelte-16wga0t"),qt(t,"style",i[3]),qt(e,"class",o=Ud(i[2])+" svelte-16wga0t"),qt(e,"tabindex","0"),tc(()=>i[13].call(e))},m(u,m){jt(u,e,m),Ut(e,t),l=Id(e,i[13].bind(e))},p(u,[m]){m&8&&qt(t,"style",u[3]),m&4&&o!==(o=Ud(u[2])+" svelte-16wga0t")&&qt(e,"class",o)},i:go,o:go,d(u){u&&De(e),l()}}}function mA(i,e,t){let o,l,u,m,r,f,_,{color:b="silver"}=e,{hoverColor:v="gray"}=e,{dragColor:w="black"}=e,x=xs(D4);Yo(i,x,M=>t(12,_=M));let C,T;function S(){C=this.clientWidth,T=this.clientHeight,t(0,C),t(1,T)}return i.$$set=M=>{"color"in M&&t(5,b=M.color),"hoverColor"in M&&t(6,v=M.hoverColor),"dragColor"in M&&t(7,w=M.dragColor)},i.$$.update=()=>{i.$$.dirty&4096&&t(10,o=_.dragging),i.$$.dirty&4096&&t(8,l=_.horizontal),i.$$.dirty&259&&t(11,u=l?T:C),i.$$.dirty&3296&&t(9,m={"--splitter-line-margin":`${Math.max(0,Math.floor(u/2)-1)}px`,"--splitter-line-size":`${u%2===0?2:3}px`,"--splitter-line-color":o?w:b,"--splitter-line-hover-color":o?w:v}),i.$$.dirty&512&&t(3,r=Object.entries(m).map(([M,O])=>`${M}:${O}`).join(";")),i.$$.dirty&256&&t(2,f=l?"splitter horizontal":"splitter vertical")},[C,T,f,r,x,b,v,w,l,m,o,u,_,S]}class gA extends br{constructor(e){super(),wr(this,e,mA,pA,mr,{color:5,hoverColor:6,dragColor:7})}}const yA=i=>({}),E_=i=>({}),_A=i=>({}),I_=i=>({}),vA=i=>({}),T_=i=>({});function bA(i){let e,t;return e=new gA({}),{c(){en(e.$$.fragment)},l(o){un(e.$$.fragment,o)},m(o,l){tn(e,o,l),t=!0},i(o){t||(vt(e.$$.fragment,o),t=!0)},o(o){Lt(e.$$.fragment,o),t=!1},d(o){nn(e,o)}}}function wA(i){let e,t,o,l,u,m,r,f,_,b,v,w,x,C;const T=i[33].primary,S=ur(T,i,i[32],T_),M=i[33].splitter,O=ur(M,i,i[32],I_),V=O||bA(),X=i[33].secondary,Z=ur(X,i,i[32],E_);return{c(){e=Ht("div"),t=Ht("div"),S&&S.c(),l=Wi(),u=Ht("div"),V&&V.c(),r=Wi(),f=Ht("div"),Z&&Z.c(),this.h()},l(te){e=Gt(te,"DIV",{class:!0,style:!0});var J=$t(e);t=Gt(J,"DIV",{class:!0});var ie=$t(t);S&&S.l(ie),ie.forEach(De),l=Xi(J),u=Gt(J,"DIV",{class:!0});var Ee=$t(u);V&&V.l(Ee),Ee.forEach(De),r=Xi(J),f=Gt(J,"DIV",{class:!0});var Pe=$t(f);Z&&Z.l(Pe),Pe.forEach(De),J.forEach(De),this.h()},h(){qt(t,"class","primary svelte-603y9m"),tc(()=>i[34].call(t)),qt(u,"class","splitter svelte-603y9m"),tc(()=>i[35].call(u)),qt(f,"class","secondary svelte-603y9m"),tc(()=>i[36].call(f)),qt(e,"class",b=Ud(i[8])+" svelte-603y9m"),qt(e,"style",i[9]),tc(()=>i[37].call(e))},m(te,J){jt(te,e,J),Ut(e,t),S&&S.m(t,null),o=Id(t,i[34].bind(t)),Ut(e,l),Ut(e,u),V&&V.m(u,null),m=Id(u,i[35].bind(u)),Ut(e,r),Ut(e,f),Z&&Z.m(f,null),_=Id(f,i[36].bind(f)),v=Id(e,i[37].bind(e)),w=!0,x||(C=[xn(u,"pointerdown",i[10]),xn(u,"pointermove",i[11]),xn(u,"pointerup",i[12]),xn(u,"dblclick",i[13]),xn(u,"keydown",i[14])],x=!0)},p(te,J){S&&S.p&&(!w||J[1]&2)&&cr(S,T,te,te[32],w?fr(T,te[32],J,vA):hr(te[32]),T_),O&&O.p&&(!w||J[1]&2)&&cr(O,M,te,te[32],w?fr(M,te[32],J,_A):hr(te[32]),I_),Z&&Z.p&&(!w||J[1]&2)&&cr(Z,X,te,te[32],w?fr(X,te[32],J,yA):hr(te[32]),E_),(!w||J[0]&256&&b!==(b=Ud(te[8])+" svelte-603y9m"))&&qt(e,"class",b),(!w||J[0]&512)&&qt(e,"style",te[9])},i(te){w||(vt(S,te),vt(V,te),vt(Z,te),w=!0)},o(te){Lt(S,te),Lt(V,te),Lt(Z,te),w=!1},d(te){te&&De(e),S&&S.d(te),o(),V&&V.d(te),m(),Z&&Z.d(te),_(),v(),x=!1,Lo(C)}}}function xA(i,e,t){let o,l,u,m,r,f,_,b,v,{$$slots:w={},$$scope:x}=e,{horizontal:C=!1}=e,{initialPrimarySize:T="50%"}=e,{minPrimarySize:S="0"}=e,{minSecondarySize:M="0"}=e,{splitterSize:O="7px"}=e,{resetOnDoubleClick:V=!0}=e,X,Z,te,J,ie,Ee,Pe,de;const Te=gt=>Math.max(0,Math.min(gt,100));let ve,_e,ot,it=!1;const It=()=>r,Xe=gt=>{t(23,ve=Te(gt))},we=Nl({horizontal:C,dragging:it});as(D4,we);const Ce=ep(),Re=gt=>{gt.currentTarget.setPointerCapture(gt.pointerId),_e=C?gt.clientY:gt.clientX,ot=l,t(24,it=!0)},le=gt=>{if(gt.currentTarget.hasPointerCapture(gt.pointerId)){const Mt=C?gt.clientY:gt.clientX;let ri=ot+(Mt-_e);ri=Math.max(0,Math.min(ri,o));const ut=ri/o*100;t(23,ve=ut)}},Se=gt=>{gt.currentTarget.releasePointerCapture(gt.pointerId),t(24,it=!1)},he=()=>{V&&t(23,ve=void 0)},me=gt=>{const Mt=ve||r;if(!gt.ctrlKey&&!gt.shiftKey&&!gt.altKey){switch(gt.code){case"Space":t(23,ve=void 0);return}if(C)switch(gt.code){case"ArrowUp":t(23,ve=Te(Mt-1));return;case"ArrowDown":t(23,ve=Te(Mt+1));return}else switch(gt.code){case"ArrowLeft":t(23,ve=Te(Mt-1));return;case"ArrowRight":t(23,ve=Te(Mt+1));return}}};function Be(){te=this.clientWidth,J=this.clientHeight,t(2,te),t(3,J)}function We(){ie=this.clientWidth,Ee=this.clientHeight,t(4,ie),t(5,Ee)}function st(){Pe=this.clientWidth,de=this.clientHeight,t(6,Pe),t(7,de)}function Ye(){X=this.clientWidth,Z=this.clientHeight,t(0,X),t(1,Z)}return i.$$set=gt=>{"horizontal"in gt&&t(15,C=gt.horizontal),"initialPrimarySize"in gt&&t(16,T=gt.initialPrimarySize),"minPrimarySize"in gt&&t(17,S=gt.minPrimarySize),"minSecondarySize"in gt&&t(18,M=gt.minSecondarySize),"splitterSize"in gt&&t(19,O=gt.splitterSize),"resetOnDoubleClick"in gt&&t(20,V=gt.resetOnDoubleClick),"$$scope"in gt&&t(32,x=gt.$$scope)},i.$$.update=()=>{i.$$.dirty[0]&32771&&t(26,o=C?Z:X),i.$$.dirty[0]&32780&&t(27,l=C?J:te),i.$$.dirty[0]&32816&&t(31,u=C?Ee:ie),i.$$.dirty[0]&32960&&t(30,m=C?de:Pe),i.$$.dirty[0]&201326592|i.$$.dirty[1]&1&&t(25,r=Te(Math.ceil((l-u)/(o-u)*100))),i.$$.dirty[0]&16809984&&we.set({horizontal:C,dragging:it}),i.$$.dirty[0]&1258291200|i.$$.dirty[1]&1&&Ce("changed",{percent:r,primarySize:l,splitterSize:u,secondarySize:m,dragging:it}),i.$$.dirty[0]&8454144&&t(29,f=ve!==void 0?`${ve}%`:T),i.$$.dirty[0]&537788416&&t(28,_={"--primary-size":`${f}`,"--min-primary-size":`${S}`,"--min-secondary-size":`${M}`,"--splitter-size":`${O}`}),i.$$.dirty[0]&268435456&&t(9,b=Object.entries(_).map(([gt,Mt])=>`${gt}:${Mt}`).join(";")),i.$$.dirty[0]&32768&&t(8,v=C?"split horizontal":"split vertical")},[X,Z,te,J,ie,Ee,Pe,de,v,b,Re,le,Se,he,me,C,T,S,M,O,V,It,Xe,ve,it,r,o,l,_,f,m,u,x,w,Be,We,st,Ye]}class AA extends br{constructor(e){super(),wr(this,e,xA,wA,mr,{horizontal:15,initialPrimarySize:16,minPrimarySize:17,minSecondarySize:18,splitterSize:19,resetOnDoubleClick:20,getPercent:21,setPercent:22},null,[-1,-1])}get getPercent(){return this.$$.ctx[21]}get setPercent(){return this.$$.ctx[22]}}class O4{constructor(){dl(this,"STYLE_PATHNAME","style")}getUrl(){const e=window.location,t=new URL(e.href);return t.hash=e.hash,t}updateUrl(e){history.replaceState("","",e.toString())}get(){return this.getUrl().searchParams.get(this.STYLE_PATHNAME)}set(e){const t=this.getUrl();t.searchParams.set(this.STYLE_PATHNAME,e),this.updateUrl(t)}delete(){const e=this.getUrl();e.searchParams.delete(this.STYLE_PATHNAME),this.updateUrl(e)}getMatchedStyleByTitle(e,t){for(const o of e)if(o.title===t)return o}getMatchedStyleByUrl(e,t){for(const o of e)if(o.uri===t)return o}}function L_(i,e,t){const o=i.slice();return o[7]=e[t],o}function P_(i){let e,t=i[7].title+"",o;return{c(){e=Ht("option"),o=Kn(t),this.h()},l(l){e=Gt(l,"OPTION",{});var u=$t(e);o=Jn(u,t),u.forEach(De),this.h()},h(){e.__value=i[7].uri,e.value=e.__value},m(l,u){jt(l,e,u),Ut(e,o)},p:go,d(l){l&&De(e)}}}function kA(i){let e,t,o,l,u=Br.styles,m=[];for(let r=0;r<u.length;r+=1)m[r]=P_(L_(i,u,r));return{c(){e=Ht("div"),t=Ht("select");for(let r=0;r<m.length;r+=1)m[r].c();this.h()},l(r){e=Gt(r,"DIV",{class:!0});var f=$t(e);t=Gt(f,"SELECT",{});var _=$t(t);for(let b=0;b<m.length;b+=1)m[b].l(_);_.forEach(De),f.forEach(De),this.h()},h(){i[0]===void 0&&tc(()=>i[2].call(t)),qt(e,"class","select is-link is-fullwidth mt-1")},m(r,f){jt(r,e,f),Ut(e,t);for(let _=0;_<m.length;_+=1)m[_].m(t,null);$u(t,i[0]),o||(l=xn(t,"change",i[2]),o=!0)},p(r,[f]){if(f&0){u=Br.styles;let _;for(_=0;_<u.length;_+=1){const b=L_(r,u,_);m[_]?m[_].p(b,f):(m[_]=P_(b),m[_].c(),m[_].m(t,null))}for(;_<m.length;_+=1)m[_].d(1);m.length=u.length}f&1&&$u(t,r[0])},i:go,o:go,d(r){r&&De(e),Ja(m,r),o=!1,l()}}}function SA(i,e,t){let o,l;Yo(i,Gd,b=>t(1,o=b)),Yo(i,Pu,b=>t(3,l=b));const u=ep();let m=o.uri;const r=()=>{!l||m!==o.uri&&(l.setStyle(m),l.on("styledata",()=>{const b=new O4,v=b.getMatchedStyleByUrl(Br.styles,m);v?(b.set(v.title),Gd.update(()=>v)):b.delete(),u("change")}))},f=()=>{m!==o.uri&&t(0,m=o.uri)};function _(){m=j0(this),t(0,m)}return i.$$.update=()=>{i.$$.dirty&1&&r(),i.$$.dirty&2&&f()},[m,o,_]}class CA extends br{constructor(e){super(),wr(this,e,SA,kA,mr,{})}}var EA=8,IA={version:{required:!0,type:"enum",values:[8],doc:"Style specification version number. Must be 8.",example:8},name:{type:"string",doc:"A human-readable name for the style.",example:"Bright"},metadata:{type:"*",doc:"Arbitrary properties useful to track with the stylesheet, but do not influence rendering. Properties should be prefixed to avoid collisions, like 'mapbox:'."},center:{type:"array",value:"number",doc:"Default map center in longitude and latitude.  The style center will be used only if the map has not been positioned by other means (e.g. map options or user interaction).",example:[-73.9749,40.7736]},zoom:{type:"number",doc:"Default zoom level.  The style zoom will be used only if the map has not been positioned by other means (e.g. map options or user interaction).",example:12.5},bearing:{type:"number",default:0,period:360,units:"degrees",doc:'Default bearing, in degrees. The bearing is the compass direction that is "up"; for example, a bearing of 90\xB0 orients the map so that east is up. This value will be used only if the map has not been positioned by other means (e.g. map options or user interaction).',example:29},pitch:{type:"number",default:0,units:"degrees",doc:"Default pitch, in degrees. Zero is perpendicular to the surface, for a look straight down at the map, while a greater value like 60 looks ahead towards the horizon. The style pitch will be used only if the map has not been positioned by other means (e.g. map options or user interaction).",example:50},light:{type:"light",doc:"The global light source.",example:{anchor:"viewport",color:"white",intensity:.4}},terrain:{type:"terrain",doc:"A global modifier that elevates layers and markers based on a DEM data source."},fog:{type:"fog",doc:"A global effect that fades layers and markers based on their distance to the camera. The fog can be used to approximate the effect of atmosphere on distant objects and enhance the depth perception of the map when used with terrain or 3D features. Note: fog is renamed to atmosphere in the Android and iOS SDKs and planned to be changed in GL-JS v.3.0.0."},sources:{required:!0,type:"sources",doc:"Data source specifications.",example:{"mapbox-streets":{type:"vector",url:"mapbox://mapbox.mapbox-streets-v6"}}},sprite:{type:"string",doc:"A base URL for retrieving the sprite image and metadata. The extensions `.png`, `.json` and scale factor `@2x.png` will be automatically appended. This property is required if any layer uses the `background-pattern`, `fill-pattern`, `line-pattern`, `fill-extrusion-pattern`, or `icon-image` properties. The URL must be absolute, containing the [scheme, authority and path components](https://en.wikipedia.org/wiki/URL#Syntax).",example:"mapbox://sprites/mapbox/bright-v8"},glyphs:{type:"string",doc:"A URL template for loading signed-distance-field glyph sets in PBF format. The URL must include `{fontstack}` and `{range}` tokens. This property is required if any layer uses the `text-field` layout property. The URL must be absolute, containing the [scheme, authority and path components](https://en.wikipedia.org/wiki/URL#Syntax).",example:"mapbox://fonts/mapbox/{fontstack}/{range}.pbf"},transition:{type:"transition",doc:"A global transition definition to use as a default across properties, to be used for timing transitions between one value and the next when no property-specific transition is set. Collision-based symbol fading is controlled independently of the style's `transition` property.",example:{duration:300,delay:0}},projection:{type:"projection",doc:"The projection the map should be rendered in. Supported projections are Mercator, Globe, Albers, Equal Earth, Equirectangular (WGS84), Lambert conformal conic, Natural Earth, and Winkel Tripel. Terrain, sky and fog are supported by only Mercator and globe. CustomLayerInterface is not supported outside of Mercator.",example:{name:"albers",center:[-154,50],parallels:[55,65]}},layers:{required:!0,type:"array",value:"layer",doc:"Layers will be drawn in the order of this array.",example:[{id:"water",source:"mapbox-streets","source-layer":"water",type:"fill",paint:{"fill-color":"#00ffff"}}]}},TA={"*":{type:"source",doc:"Specification of a data source. For vector and raster sources, either TileJSON or a URL to a TileJSON must be provided. For image and video sources, a URL must be provided. For GeoJSON sources, a URL or inline GeoJSON must be provided."}},LA=["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],PA={type:{required:!0,type:"enum",values:{vector:{doc:"A vector tile source."}},doc:"The type of the source."},url:{type:"string",doc:"A URL to a TileJSON resource. Supported protocols are `http:`, `https:`, and `mapbox://<Tileset ID>`."},tiles:{type:"array",value:"string",doc:"An array of one or more tile source URLs, as in the TileJSON spec."},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129],doc:"An array containing the longitude and latitude of the southwest and northeast corners of the source's bounding box in the following order: `[sw.lng, sw.lat, ne.lng, ne.lat]`. When this property is included in a source, no tiles outside of the given bounds are requested by Mapbox GL."},scheme:{type:"enum",values:{xyz:{doc:"Slippy map tilenames scheme."},tms:{doc:"OSGeo spec scheme."}},default:"xyz",doc:"Influences the y direction of the tile coordinates. The global-mercator (aka Spherical Mercator) profile is assumed."},minzoom:{type:"number",default:0,doc:"Minimum zoom level for which tiles are available, as in the TileJSON spec."},maxzoom:{type:"number",default:22,doc:"Maximum zoom level for which tiles are available, as in the TileJSON spec. Data from tiles at the maxzoom are used when displaying the map at higher zoom levels."},attribution:{type:"string",doc:"Contains an attribution to be displayed when the map is shown to a user."},promoteId:{type:"promoteId",doc:"A property to use as a feature id (for feature state). Either a property name, or an object of the form `{<sourceLayer>: <propertyName>}`. If specified as a string for a vector tile source, the same property is used across all its source layers."},volatile:{type:"boolean",default:!1,doc:"A setting to determine whether a source's tiles are cached locally.","sdk-support":{"basic functionality":{android:"9.3.0",ios:"5.10.0"}}},"*":{type:"*",doc:"Other keys to configure the data source."}},MA={type:{required:!0,type:"enum",values:{raster:{doc:"A raster tile source."}},doc:"The type of the source."},url:{type:"string",doc:"A URL to a TileJSON resource. Supported protocols are `http:`, `https:`, and `mapbox://<Tileset ID>`."},tiles:{type:"array",value:"string",doc:"An array of one or more tile source URLs, as in the TileJSON spec."},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129],doc:"An array containing the longitude and latitude of the southwest and northeast corners of the source's bounding box in the following order: `[sw.lng, sw.lat, ne.lng, ne.lat]`. When this property is included in a source, no tiles outside of the given bounds are requested by Mapbox GL."},minzoom:{type:"number",default:0,doc:"Minimum zoom level for which tiles are available, as in the TileJSON spec."},maxzoom:{type:"number",default:22,doc:"Maximum zoom level for which tiles are available, as in the TileJSON spec. Data from tiles at the maxzoom are used when displaying the map at higher zoom levels."},tileSize:{type:"number",default:512,units:"pixels",doc:"The minimum visual size to display tiles for this layer. Only configurable for raster layers."},scheme:{type:"enum",values:{xyz:{doc:"Slippy map tilenames scheme."},tms:{doc:"OSGeo spec scheme."}},default:"xyz",doc:"Influences the y direction of the tile coordinates. The global-mercator (aka Spherical Mercator) profile is assumed."},attribution:{type:"string",doc:"Contains an attribution to be displayed when the map is shown to a user."},volatile:{type:"boolean",default:!1,doc:"A setting to determine whether a source's tiles are cached locally.","sdk-support":{"basic functionality":{android:"9.3.0",ios:"5.10.0"}}},"*":{type:"*",doc:"Other keys to configure the data source."}},DA={type:{required:!0,type:"enum",values:{"raster-dem":{doc:"A RGB-encoded raster DEM source"}},doc:"The type of the source."},url:{type:"string",doc:"A URL to a TileJSON resource. Supported protocols are `http:`, `https:`, and `mapbox://<Tileset ID>`."},tiles:{type:"array",value:"string",doc:"An array of one or more tile source URLs, as in the TileJSON spec."},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129],doc:"An array containing the longitude and latitude of the southwest and northeast corners of the source's bounding box in the following order: `[sw.lng, sw.lat, ne.lng, ne.lat]`. When this property is included in a source, no tiles outside of the given bounds are requested by Mapbox GL."},minzoom:{type:"number",default:0,doc:"Minimum zoom level for which tiles are available, as in the TileJSON spec."},maxzoom:{type:"number",default:22,doc:"Maximum zoom level for which tiles are available, as in the TileJSON spec. Data from tiles at the maxzoom are used when displaying the map at higher zoom levels."},tileSize:{type:"number",default:512,units:"pixels",doc:"The minimum visual size to display tiles for this layer. Only configurable for raster layers."},attribution:{type:"string",doc:"Contains an attribution to be displayed when the map is shown to a user."},encoding:{type:"enum",values:{terrarium:{doc:"Terrarium format PNG tiles. See https://aws.amazon.com/es/public-datasets/terrain/ for more info."},mapbox:{doc:"Mapbox Terrain RGB tiles. See https://www.mapbox.com/help/access-elevation-data/#mapbox-terrain-rgb for more info."}},default:"mapbox",doc:"The encoding used by this source. Mapbox Terrain RGB is used by default"},volatile:{type:"boolean",default:!1,doc:"A setting to determine whether a source's tiles are cached locally.","sdk-support":{"basic functionality":{android:"9.3.0",ios:"5.10.0"}}},"*":{type:"*",doc:"Other keys to configure the data source."}},OA={type:{required:!0,type:"enum",values:{geojson:{doc:"A GeoJSON data source."}},doc:"The data type of the GeoJSON source."},data:{type:"*",doc:"A URL to a GeoJSON file, or inline GeoJSON."},maxzoom:{type:"number",default:18,doc:"Maximum zoom level at which to create vector tiles (higher means greater detail at high zoom levels)."},attribution:{type:"string",doc:"Contains an attribution to be displayed when the map is shown to a user."},buffer:{type:"number",default:128,maximum:512,minimum:0,doc:"Size of the tile buffer on each side. A value of 0 produces no buffer. A value of 512 produces a buffer as wide as the tile itself. Larger values produce fewer rendering artifacts near tile edges and slower performance."},filter:{type:"*",doc:"An expression for filtering features prior to processing them for rendering."},tolerance:{type:"number",default:.375,doc:"Douglas-Peucker simplification tolerance (higher means simpler geometries and faster performance)."},cluster:{type:"boolean",default:!1,doc:"If the data is a collection of point features, setting this to true clusters the points by radius into groups. Cluster groups become new `Point` features in the source with additional properties:\n * `cluster` Is `true` if the point is a cluster \n * `cluster_id` A unqiue id for the cluster to be used in conjunction with the [cluster inspection methods](https://www.mapbox.com/mapbox-gl-js/api/#geojsonsource#getclusterexpansionzoom)\n * `point_count` Number of original points grouped into this cluster\n * `point_count_abbreviated` An abbreviated point count"},clusterRadius:{type:"number",default:50,minimum:0,doc:"Radius of each cluster if clustering is enabled. A value of 512 indicates a radius equal to the width of a tile."},clusterMaxZoom:{type:"number",doc:"Max zoom on which to cluster points if clustering is enabled. Defaults to one zoom less than maxzoom (so that last zoom features are not clustered). Clusters are re-evaluated at integer zoom levels so setting clusterMaxZoom to 14 means the clusters will be displayed until z15."},clusterMinPoints:{type:"number",doc:"Minimum number of points necessary to form a cluster if clustering is enabled. Defaults to `2`."},clusterProperties:{type:"*",doc:'An object defining custom properties on the generated clusters if clustering is enabled, aggregating values from clustered points. Has the form `{"property_name": [operator, map_expression]}`. `operator` is any expression function that accepts at least 2 operands (e.g. `"+"` or `"max"`) \u2014 it accumulates the property value from clusters/points the cluster contains; `map_expression` produces the value of a single point.\n\nExample: `{"sum": ["+", ["get", "scalerank"]]}`.\n\nFor more advanced use cases, in place of `operator`, you can use a custom reduce expression that references a special `["accumulated"]` value, e.g.:\n`{"sum": [["+", ["accumulated"], ["get", "sum"]], ["get", "scalerank"]]}`'},lineMetrics:{type:"boolean",default:!1,doc:"Whether to calculate line distance metrics. This is required for line layers that specify `line-gradient` values."},generateId:{type:"boolean",default:!1,doc:"Whether to generate ids for the geojson features. When enabled, the `feature.id` property will be auto assigned based on its index in the `features` array, over-writing any previous values."},promoteId:{type:"promoteId",doc:"A property to use as a feature id (for feature state). Either a property name, or an object of the form `{<sourceLayer>: <propertyName>}`."}},FA={type:{required:!0,type:"enum",values:{video:{doc:"A video data source."}},doc:"The data type of the video source."},urls:{required:!0,type:"array",value:"string",doc:"URLs to video content in order of preferred format."},coordinates:{required:!0,doc:"Corners of video specified in longitude, latitude pairs.",type:"array",length:4,value:{type:"array",length:2,value:"number",doc:"A single longitude, latitude pair."}}},RA={type:{required:!0,type:"enum",values:{image:{doc:"An image data source."}},doc:"The data type of the image source."},url:{required:!0,type:"string",doc:"URL that points to an image."},coordinates:{required:!0,doc:"Corners of image specified in longitude, latitude pairs.",type:"array",length:4,value:{type:"array",length:2,value:"number",doc:"A single longitude, latitude pair."}}},BA={id:{type:"string",doc:"Unique layer name.",required:!0},type:{type:"enum",values:{fill:{doc:"A filled polygon with an optional stroked border.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}}},line:{doc:"A stroked line.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}}},symbol:{doc:"An icon or a text label.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}}},circle:{doc:"A filled circle.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}}},heatmap:{doc:"A heatmap.","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"fill-extrusion":{doc:"An extruded (3D) polygon.","sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}}},raster:{doc:"Raster map textures such as satellite imagery.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}}},hillshade:{doc:"Client-side hillshading visualization based on DEM data. Currently, the implementation only supports Mapbox Terrain RGB and Mapzen Terrarium tiles.","sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},background:{doc:"The background color or pattern of the map.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}}},sky:{doc:"A spherical dome around the map that is always rendered behind all other layers.","sdk-support":{"basic functionality":{js:"2.0.0",ios:"10.0.0",android:"10.0.0"}}}},doc:"Rendering type of this layer.",required:!0},metadata:{type:"*",doc:"Arbitrary properties useful to track with the layer, but do not influence rendering. Properties should be prefixed to avoid collisions, like 'mapbox:'."},source:{type:"string",doc:"Name of a source description to be used for this layer. Required for all layer types except `background`."},"source-layer":{type:"string",doc:"Layer to use from a vector tile source. Required for vector tile sources; prohibited for all other source types, including GeoJSON sources."},minzoom:{type:"number",minimum:0,maximum:24,doc:"The minimum zoom level for the layer. At zoom levels less than the minzoom, the layer will be hidden."},maxzoom:{type:"number",minimum:0,maximum:24,doc:"The maximum zoom level for the layer. At zoom levels equal to or greater than the maxzoom, the layer will be hidden."},filter:{type:"filter",doc:'An expression specifying conditions on source features. Only features that match the filter are displayed. Zoom expressions in filters are only evaluated at integer zoom levels. The `["feature-state", ...]` expression is not supported in filter expressions.  The `["pitch"]` and `["distance-from-center"]` expressions are supported only for filter expressions on the symbol layer.'},layout:{type:"layout",doc:"Layout properties for the layer."},paint:{type:"paint",doc:"Default paint properties for this layer."}},zA=["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background","layout_sky"],NA={visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},"property-type":"constant"}},jA={visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"2.0.0",ios:"10.0.0",android:"10.0.0"}},"property-type":"constant"}},UA={"fill-sort-key":{type:"number",doc:"Sorts features in ascending order based on this value. Features with a higher sort key will appear above features with a lower sort key.","sdk-support":{"basic functionality":{js:"1.2.0",android:"9.1.0",ios:"5.8.0",macos:"0.15.0"},"data-driven styling":{js:"1.2.0",android:"9.1.0",ios:"5.8.0",macos:"0.15.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},"property-type":"constant"}},VA={"circle-sort-key":{type:"number",doc:"Sorts features in ascending order based on this value. Features with a higher sort key will appear above features with a lower sort key.","sdk-support":{"basic functionality":{js:"1.2.0",android:"9.2.0",ios:"5.9.0",macos:"0.16.0"},"data-driven styling":{js:"1.2.0",android:"9.2.0",ios:"5.9.0",macos:"0.16.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},"property-type":"constant"}},qA={visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},"property-type":"constant"}},HA={"line-cap":{type:"enum",values:{butt:{doc:"A cap with a squared-off end which is drawn to the exact endpoint of the line."},round:{doc:"A cap with a rounded end which is drawn beyond the endpoint of the line at a radius of one-half of the line's width and centered on the endpoint of the line."},square:{doc:"A cap with a squared-off end which is drawn beyond the endpoint of the line at a distance of one-half of the line's width."}},default:"butt",doc:"The display of line endings.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"2.3.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-join":{type:"enum",values:{bevel:{doc:"A join with a squared-off end which is drawn beyond the endpoint of the line at a distance of one-half of the line's width."},round:{doc:"A join with a rounded end which is drawn beyond the endpoint of the line at a radius of one-half of the line's width and centered on the endpoint of the line."},miter:{doc:"A join with a sharp, angled corner which is drawn with the outer sides beyond the endpoint of the path until they meet."}},default:"miter",doc:"The display of lines when joining.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.40.0",android:"5.2.0",ios:"3.7.0",macos:"0.6.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,doc:"Used to automatically convert miter joins to bevel joins for sharp angles.",requires:[{"line-join":"miter"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,doc:"Used to automatically convert round joins to miter joins for shallow angles.",requires:[{"line-join":"round"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",doc:"Sorts features in ascending order based on this value. Features with a higher sort key will appear above features with a lower sort key.","sdk-support":{"basic functionality":{js:"1.2.0",android:"9.1.0",ios:"5.8.0",macos:"0.15.0"},"data-driven styling":{js:"1.2.0",android:"9.1.0",ios:"5.8.0",macos:"0.15.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},"property-type":"constant"}},GA={"symbol-placement":{type:"enum",values:{point:{doc:"The label is placed at the point where the geometry is located."},line:{doc:"The label is placed along the line of the geometry. Can only be used on `LineString` and `Polygon` geometries."},"line-center":{doc:"The label is placed at the center of the line of the geometry. Can only be used on `LineString` and `Polygon` geometries. Note that a single feature in a vector tile may contain multiple line geometries."}},default:"point",doc:"Label placement relative to its geometry.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"`line-center` value":{js:"0.47.0",android:"6.4.0",ios:"4.3.0",macos:"0.10.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",doc:"Distance between two symbol anchors.",requires:[{"symbol-placement":"line"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,doc:"If true, the symbols will not cross tile edges to avoid mutual collisions. Recommended in layers that don't have enough padding in the vector tile to prevent collisions, or if it is a point symbol layer placed after a line symbol layer. When using a client that supports global collision detection, like Mapbox GL JS version 0.42.0 or greater, enabling this property is not needed to prevent clipped labels at tile boundaries.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",doc:"Sorts features in ascending order based on this value. Features with lower sort keys are drawn and placed first.  When `icon-allow-overlap` or `text-allow-overlap` is `false`, features with a lower sort key will have priority during placement. When `icon-allow-overlap` or `text-allow-overlap` is set to `true`, features with a higher sort key will overlap over features with a lower sort key.","sdk-support":{"basic functionality":{js:"0.53.0",android:"7.4.0",ios:"4.11.0",macos:"0.14.0"},"data-driven styling":{js:"0.53.0",android:"7.4.0",ios:"4.11.0",macos:"0.14.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{doc:"Sorts symbols by `symbol-sort-key` if set. Otherwise, sorts symbols by their y-position relative to the viewport if `icon-allow-overlap` or `text-allow-overlap` is set to `true` or `icon-ignore-placement` or `text-ignore-placement` is `false`."},"viewport-y":{doc:"Sorts symbols by their y-position relative to the viewport if `icon-allow-overlap` or `text-allow-overlap` is set to `true` or `icon-ignore-placement` or `text-ignore-placement` is `false`."},source:{doc:"Sorts symbols by `symbol-sort-key` if set. Otherwise, no sorting is applied; symbols are rendered in the same order as the source data."}},default:"auto",doc:"Determines whether overlapping symbols in the same layer are rendered in the order that they appear in the data source or by their y-position relative to the viewport. To control the order and prioritization of symbols otherwise, use `symbol-sort-key`.","sdk-support":{"basic functionality":{js:"0.49.0",android:"6.6.0",ios:"4.5.0",macos:"0.12.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,doc:"If true, the icon will be visible even if it collides with other previously drawn symbols.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,doc:"If true, other symbols can be visible even if they collide with the icon.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,doc:"If true, text will display without their corresponding icons when the icon collides with other symbols and the text does not.",requires:["icon-image","text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{doc:"When `symbol-placement` is set to `point`, aligns icons east-west. When `symbol-placement` is set to `line` or `line-center`, aligns icon x-axes with the line."},viewport:{doc:"Produces icons whose x-axes are aligned with the x-axis of the viewport, regardless of the value of `symbol-placement`."},auto:{doc:"When `symbol-placement` is set to `point`, this is equivalent to `viewport`. When `symbol-placement` is set to `line` or `line-center`, this is equivalent to `map`."}},default:"auto",doc:"In combination with `symbol-placement`, determines the rotation behavior of icons.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"`auto` value":{js:"0.25.0",android:"4.2.0",ios:"3.4.0",macos:"0.3.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",doc:"Scales the original size of the icon by the provided factor. The new pixel size of the image will be the original pixel size multiplied by `icon-size`. 1 is the original size; 3 triples the size of the image.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.35.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{doc:"The icon is displayed at its intrinsic aspect ratio."},width:{doc:"The icon is scaled in the x-dimension to fit the width of the text."},height:{doc:"The icon is scaled in the y-dimension to fit the height of the text."},both:{doc:"The icon is scaled in both x- and y-dimensions."}},default:"none",doc:"Scales the icon to fit around the associated text.",requires:["icon-image","text-field"],"sdk-support":{"basic functionality":{js:"0.21.0",android:"4.2.0",ios:"3.4.0",macos:"0.2.1"},"stretchable icons":{js:"1.6.0",android:"9.2.0",ios:"5.8.0",macos:"0.15.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",doc:"Size of the additional area added to dimensions determined by `icon-text-fit`, in clockwise order: top, right, bottom, left.",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],"sdk-support":{"basic functionality":{js:"0.21.0",android:"4.2.0",ios:"3.4.0",macos:"0.2.1"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",doc:"Name of image in sprite to use for drawing an image background.",tokens:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.35.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",doc:"Rotates the icon clockwise.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.21.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"number",default:2,minimum:0,units:"pixels",doc:"Size of the additional area around the icon bounding box used for detecting symbol collisions.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{type:"boolean",default:!1,doc:"If true, the icon may be flipped to prevent it from being rendered upside-down.",requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],doc:"Offset distance of icon from its anchor. Positive values indicate right and down, while negative values indicate left and up. Each component is multiplied by the value of `icon-size` to obtain the final offset in pixels. When combined with `icon-rotate` the offset will be as if the rotated direction was up.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.29.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{doc:"The center of the icon is placed closest to the anchor."},left:{doc:"The left side of the icon is placed closest to the anchor."},right:{doc:"The right side of the icon is placed closest to the anchor."},top:{doc:"The top of the icon is placed closest to the anchor."},bottom:{doc:"The bottom of the icon is placed closest to the anchor."},"top-left":{doc:"The top left corner of the icon is placed closest to the anchor."},"top-right":{doc:"The top right corner of the icon is placed closest to the anchor."},"bottom-left":{doc:"The bottom left corner of the icon is placed closest to the anchor."},"bottom-right":{doc:"The bottom right corner of the icon is placed closest to the anchor."}},default:"center",doc:"Part of the icon placed closest to the anchor.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.40.0",android:"5.2.0",ios:"3.7.0",macos:"0.6.0"},"data-driven styling":{js:"0.40.0",android:"5.2.0",ios:"3.7.0",macos:"0.6.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{doc:"The icon is aligned to the plane of the map."},viewport:{doc:"The icon is aligned to the plane of the viewport."},auto:{doc:"Automatically matches the value of `icon-rotation-alignment`."}},default:"auto",doc:"Orientation of icon when map is pitched.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.39.0",android:"5.2.0",ios:"3.7.0",macos:"0.6.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{doc:"The text is aligned to the plane of the map."},viewport:{doc:"The text is aligned to the plane of the viewport."},auto:{doc:"Automatically matches the value of `text-rotation-alignment`."}},default:"auto",doc:"Orientation of text when map is pitched.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.21.0",android:"4.2.0",ios:"3.4.0",macos:"0.2.1"},"`auto` value":{js:"0.25.0",android:"4.2.0",ios:"3.4.0",macos:"0.3.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{doc:"When `symbol-placement` is set to `point`, aligns text east-west. When `symbol-placement` is set to `line` or `line-center`, aligns text x-axes with the line."},viewport:{doc:"Produces glyphs whose x-axes are aligned with the x-axis of the viewport, regardless of the value of `symbol-placement`."},auto:{doc:"When `symbol-placement` is set to `point`, this is equivalent to `viewport`. When `symbol-placement` is set to `line` or `line-center`, this is equivalent to `map`."}},default:"auto",doc:"In combination with `symbol-placement`, determines the rotation behavior of the individual glyphs forming the text.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"`auto` value":{js:"0.25.0",android:"4.2.0",ios:"3.4.0",macos:"0.3.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,doc:"Value to use for a text label. If a plain `string` is provided, it will be treated as a `formatted` with default/inherited formatting options. SDF images are not supported in formatted text and will be ignored.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],doc:"Font stack to use for displaying text.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.43.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",doc:"Font size.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.35.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",doc:"The maximum line width for text wrapping.",requires:["text-field",{"symbol-placement":["point"]}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.40.0",android:"5.2.0",ios:"3.7.0",macos:"0.6.0"}},expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",doc:"Text leading value for multi-line text.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"2.3.0"}},expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-letter-spacing":{type:"number",default:0,units:"ems",doc:"Text tracking amount.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.40.0",android:"5.2.0",ios:"3.7.0",macos:"0.6.0"}},expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{doc:"The text is aligned towards the anchor position."},left:{doc:"The text is aligned to the left."},center:{doc:"The text is centered."},right:{doc:"The text is aligned to the right."}},default:"center",doc:"Text justification options.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.39.0",android:"5.2.0",ios:"3.7.0",macos:"0.6.0"},auto:{js:"0.54.0",android:"7.4.0",ios:"4.10.0",macos:"0.14.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,doc:"Radial offset of text, in the direction of the symbol's anchor. Useful in combination with `text-variable-anchor`, which defaults to using the two-dimensional `text-offset` if present.","sdk-support":{"basic functionality":{js:"0.54.0",android:"7.4.0",ios:"4.10.0",macos:"0.14.0"},"data-driven styling":{js:"0.54.0",android:"7.4.0",ios:"4.10.0",macos:"0.14.0"}},requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{doc:"The center of the text is placed closest to the anchor."},left:{doc:"The left side of the text is placed closest to the anchor."},right:{doc:"The right side of the text is placed closest to the anchor."},top:{doc:"The top of the text is placed closest to the anchor."},bottom:{doc:"The bottom of the text is placed closest to the anchor."},"top-left":{doc:"The top left corner of the text is placed closest to the anchor."},"top-right":{doc:"The top right corner of the text is placed closest to the anchor."},"bottom-left":{doc:"The bottom left corner of the text is placed closest to the anchor."},"bottom-right":{doc:"The bottom right corner of the text is placed closest to the anchor."}},requires:["text-field",{"symbol-placement":["point"]}],doc:"To increase the chance of placing high-priority labels on the map, you can provide an array of `text-anchor` locations: the renderer will attempt to place the label at each location, in order, before moving onto the next label. Use `text-justify: auto` to choose justification based on anchor position. To apply an offset, use the `text-radial-offset` or the two-dimensional `text-offset`.","sdk-support":{"basic functionality":{js:"0.54.0",android:"7.4.0",ios:"4.10.0",macos:"0.14.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{doc:"The center of the text is placed closest to the anchor."},left:{doc:"The left side of the text is placed closest to the anchor."},right:{doc:"The right side of the text is placed closest to the anchor."},top:{doc:"The top of the text is placed closest to the anchor."},bottom:{doc:"The bottom of the text is placed closest to the anchor."},"top-left":{doc:"The top left corner of the text is placed closest to the anchor."},"top-right":{doc:"The top right corner of the text is placed closest to the anchor."},"bottom-left":{doc:"The bottom left corner of the text is placed closest to the anchor."},"bottom-right":{doc:"The bottom right corner of the text is placed closest to the anchor."}},default:"center",doc:"Part of the text placed closest to the anchor.",requires:["text-field",{"!":"text-variable-anchor"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.39.0",android:"5.2.0",ios:"3.7.0",macos:"0.6.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",doc:"Maximum angle change between adjacent characters.",requires:["text-field",{"symbol-placement":["line","line-center"]}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{doc:"If a text's language supports horizontal writing mode, symbols would be laid out horizontally."},vertical:{doc:"If a text's language supports vertical writing mode, symbols would be laid out vertically."}},doc:"The property allows control over a symbol's orientation. Note that the property values act as a hint, so that a symbol whose language doesn\u2019t support the provided orientation will be laid out in its natural orientation. Example: English point symbol will be rendered horizontally even if array value contains single 'vertical' enum value. For symbol with point placement, the order of elements in an array define priority order for the placement of an orientation variant. For symbol with line placement, the default text writing mode is either ['horizontal', 'vertical'] or ['vertical', 'horizontal'], the order doesn't affect the placement.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"1.3.0",android:"8.3.0",ios:"5.3.0",macos:"0.15.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",doc:"Rotates the text clockwise.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.35.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",doc:"Size of the additional area around the text bounding box used for detecting symbol collisions.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,doc:"If true, the text may be flipped vertically to prevent it from being rendered upside-down.",requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{doc:"The text is not altered."},uppercase:{doc:"Forces all letters to be displayed in uppercase."},lowercase:{doc:"Forces all letters to be displayed in lowercase."}},default:"none",doc:"Specifies how to capitalize text, similar to the CSS `text-transform` property.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",doc:"Offset distance of text from its anchor. Positive values indicate right and down, while negative values indicate left and up. If used with text-variable-anchor, input values will be taken as absolute values. Offsets along the x- and y-axis will be applied automatically based on the anchor position.",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.35.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,doc:"If true, the text will be visible even if it collides with other previously drawn symbols.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,doc:"If true, other symbols can be visible even if they collide with the text.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,doc:"If true, icons will display without their corresponding text when the text collides with other symbols and the icon does not.",requires:["text-field","icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},"property-type":"constant"}},WA={visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},"property-type":"constant"}},XA={visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},"property-type":"constant"}},YA={type:"array",value:"*",doc:"A filter selects specific features from a layer."},ZA={type:"boolean",doc:'Expression which determines whether or not to display a symbol. Symbols support dynamic filtering, meaning this expression can use the `["pitch"]` and `["distance-from-center"]` expressions to reference the current state of the view.',default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature","pitch","distance-from-center"]}},KA={type:"boolean",doc:'Expression which determines whether or not to display a polygon. Fill layer does NOT support dynamic filtering, meaning this expression can NOT use the `["pitch"]` and `["distance-from-center"]` expressions to reference the current state of the view.',default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}},JA={type:"boolean",doc:'Expression which determines whether or not to display a Polygon or LineString. Line layer does NOT support dynamic filtering, meaning this expression can NOT use the `["pitch"]` and `["distance-from-center"]` expressions to reference the current state of the view.',default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}},QA={type:"boolean",doc:'Expression which determines whether or not to display a circle. Circle layer does NOT support dynamic filtering, meaning this expression can NOT use the `["pitch"]` and `["distance-from-center"]` expressions to reference the current state of the view.',default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}},$A={type:"boolean",doc:'Expression used to determine whether a point is being displayed or not. Heatmap layer does NOT support dynamic filtering, meaning this expression can NOT use the `["pitch"]` and `["distance-from-center"]` expressions to reference the current state of the view.',default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}},ek={type:"enum",values:{"==":{doc:'`["==", key, value]` equality: `feature[key] = value`'},"!=":{doc:'`["!=", key, value]` inequality: `feature[key] \u2260 value`'},">":{doc:'`[">", key, value]` greater than: `feature[key] > value`'},">=":{doc:'`[">=", key, value]` greater than or equal: `feature[key] \u2265 value`'},"<":{doc:'`["<", key, value]` less than: `feature[key] < value`'},"<=":{doc:'`["<=", key, value]` less than or equal: `feature[key] \u2264 value`'},in:{doc:'`["in", key, v0, ..., vn]` set inclusion: `feature[key] \u2208 {v0, ..., vn}`'},"!in":{doc:'`["!in", key, v0, ..., vn]` set exclusion: `feature[key] \u2209 {v0, ..., vn}`'},all:{doc:'`["all", f0, ..., fn]` logical `AND`: `f0 \u2227 ... \u2227 fn`'},any:{doc:'`["any", f0, ..., fn]` logical `OR`: `f0 \u2228 ... \u2228 fn`'},none:{doc:'`["none", f0, ..., fn]` logical `NOR`: `\xACf0 \u2227 ... \u2227 \xACfn`'},has:{doc:'`["has", key]` `feature[key]` exists'},"!has":{doc:'`["!has", key]` `feature[key]` does not exist'},within:{doc:'`["within", object]` feature geometry is within object geometry'}},doc:"The filter operator."},tk={type:"enum",values:{Point:{doc:"Filter to point geometries."},LineString:{doc:"Filter to line geometries."},Polygon:{doc:"Filter to polygon geometries."}},doc:"The geometry type for the filter to select."},ik={type:"array",minimum:0,maximum:24,value:["number","color"],length:2,doc:"Zoom level and value pair."},nk={type:"array",value:"*",minimum:1,doc:"An expression defines a function that can be used for data-driven style properties or feature filters."},rk={doc:"",type:"enum",values:{let:{doc:'Binds expressions to named variables, which can then be referenced in the result expression using ["var", "variable_name"].',group:"Variable binding","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},var:{doc:'References variable bound using "let".',group:"Variable binding","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},literal:{doc:"Provides a literal array or object value.",group:"Types","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},array:{doc:"Asserts that the input is an array (optionally with a specific item type and length).  If, when the input expression is evaluated, it is not of the asserted type, then this assertion will cause the whole expression to be aborted.",group:"Types","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},at:{doc:"Retrieves an item from an array.",group:"Lookup","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},in:{doc:"Determines whether an item exists in an array or a substring exists in a string. In the specific case when the second and third arguments are string literals, you must wrap at least one of them in a [`literal`](#types-literal) expression to hint correct interpretation to the [type system](#type-system).",group:"Lookup","sdk-support":{"basic functionality":{js:"1.6.0",android:"9.1.0",ios:"5.8.0",macos:"0.15.0"}}},"index-of":{doc:"Returns the first position at which an item can be found in an array or a substring can be found in a string, or `-1` if the input cannot be found. Accepts an optional index from where to begin the search.",group:"Lookup","sdk-support":{"basic functionality":{js:"1.10.0"}}},slice:{doc:"Returns an item from an array or a substring from a string from a specified start index, or between a start index and an end index if set. The return value is inclusive of the start index but not of the end index.",group:"Lookup","sdk-support":{"basic functionality":{js:"1.10.0"}}},case:{doc:"Selects the first output whose corresponding test condition evaluates to true, or the fallback value otherwise.",group:"Decision","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},match:{doc:'Selects the output for which the label value matches the input value, or the fallback value if no match is found. The input can be any expression (for example, `["get", "building_type"]`). Each label must be unique, and must be either:\n - a single literal value; or\n - an array of literal values, the values of which must be all strings or all numbers (for example `[100, 101]` or `["c", "b"]`).\n\nThe input matches if any of the values in the array matches using strict equality, similar to the `"in"` operator.\nIf the input type does not match the type of the labels, the result will be the fallback value.',group:"Decision","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},coalesce:{doc:"Evaluates each expression in turn until the first valid value is obtained. Invalid values are `null` and [`'image'`](#types-image) expressions that are unavailable in the style. If all values are invalid, `coalesce` returns the first value listed.",group:"Decision","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},step:{doc:'Produces discrete, stepped results by evaluating a piecewise-constant function defined by pairs of input and output values ("stops"). The `input` may be any numeric expression (e.g., `["get", "population"]`). Stop inputs must be numeric literals in strictly ascending order. Returns the output value of the stop just less than the input, or the first output if the input is less than the first stop.',group:"Ramps, scales, curves","sdk-support":{"basic functionality":{js:"0.42.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},interpolate:{doc:'Produces continuous, smooth results by interpolating between pairs of input and output values ("stops"). The `input` may be any numeric expression (e.g., `["get", "population"]`). Stop inputs must be numeric literals in strictly ascending order. The output type must be `number`, `array<number>`, or `color`.\n\nInterpolation types:\n- `["linear"]`: Interpolates linearly between the pair of stops just less than and just greater than the input.\n- `["exponential", base]`: Interpolates exponentially between the stops just less than and just greater than the input. `base` controls the rate at which the output increases: higher values make the output increase more towards the high end of the range. With values close to 1 the output increases linearly.\n- `["cubic-bezier", x1, y1, x2, y2]`: Interpolates using the cubic bezier curve defined by the given control points.',group:"Ramps, scales, curves","sdk-support":{"basic functionality":{js:"0.42.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"interpolate-hcl":{doc:'Produces continuous, smooth results by interpolating between pairs of input and output values ("stops"). Works like `interpolate`, but the output type must be `color`, and the interpolation is performed in the Hue-Chroma-Luminance color space.',group:"Ramps, scales, curves","sdk-support":{"basic functionality":{js:"0.49.0"}}},"interpolate-lab":{doc:'Produces continuous, smooth results by interpolating between pairs of input and output values ("stops"). Works like `interpolate`, but the output type must be `color`, and the interpolation is performed in the CIELAB color space.',group:"Ramps, scales, curves","sdk-support":{"basic functionality":{js:"0.49.0"}}},ln2:{doc:"Returns mathematical constant ln(2).",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},pi:{doc:"Returns the mathematical constant pi.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},e:{doc:"Returns the mathematical constant e.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},typeof:{doc:"Returns a string describing the type of the given value.",group:"Types","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},string:{doc:"Asserts that the input value is a string. If multiple values are provided, each one is evaluated in order until a string is obtained. If none of the inputs are strings, the expression is an error.",group:"Types","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},number:{doc:"Asserts that the input value is a number. If multiple values are provided, each one is evaluated in order until a number is obtained. If none of the inputs are numbers, the expression is an error.",group:"Types","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},boolean:{doc:"Asserts that the input value is a boolean. If multiple values are provided, each one is evaluated in order until a boolean is obtained. If none of the inputs are booleans, the expression is an error.",group:"Types","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},object:{doc:"Asserts that the input value is an object. If multiple values are provided, each one is evaluated in order until an object is obtained. If none of the inputs are objects, the expression is an error.",group:"Types","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},collator:{doc:"Returns a `collator` for use in locale-dependent comparison operations. The `case-sensitive` and `diacritic-sensitive` options default to `false`. The `locale` argument specifies the IETF language tag of the locale to use. If none is provided, the default locale is used. If the requested locale is not available, the `collator` will use a system-defined fallback locale. Use `resolved-locale` to test the results of locale fallback behavior.",group:"Types","sdk-support":{"basic functionality":{js:"0.45.0",android:"6.5.0",ios:"4.2.0",macos:"0.9.0"}}},format:{doc:'Returns a `formatted` string for displaying mixed-format text in the `text-field` property. The input may contain a string literal or expression, including an [`\'image\'`](#types-image) expression. Strings may be followed by a style override object that supports the following properties:\n- `"text-font"`: Overrides the font stack specified by the root layout property.\n- `"text-color"`: Overrides the color specified by the root paint property.\n- `"font-scale"`: Applies a scaling factor on `text-size` as specified by the root layout property.',group:"Types","sdk-support":{"basic functionality":{js:"0.48.0",android:"6.7.0",ios:"4.6.0",macos:"0.12.0"},"text-font":{js:"0.48.0",android:"6.7.0",ios:"4.6.0",macos:"0.12.0"},"font-scale":{js:"0.48.0",android:"6.7.0",ios:"4.6.0",macos:"0.12.0"},"text-color":{js:"1.3.0",android:"7.3.0",ios:"4.10.0",macos:"0.14.0"},image:{js:"1.6.0",android:"8.6.0",ios:"5.7.0",macos:"0.15.0"}}},image:{doc:"Returns a [`ResolvedImage`](/mapbox-gl-js/style-spec/types/#resolvedimage) for use in [`icon-image`](/mapbox-gl-js/style-spec/layers/#layout-symbol-icon-image), `*-pattern` entries, and as a section in the [`'format'`](#types-format) expression. A [`'coalesce'`](#coalesce) expression containing `image` expressions will evaluate to the first listed image that is currently in the style. This validation process is synchronous and requires the image to have been added to the style before requesting it in the `'image'` argument.",group:"Types","sdk-support":{"basic functionality":{js:"1.4.0",android:"8.6.0",ios:"5.7.0",macos:"0.15.0"}}},"number-format":{doc:"Converts the input number into a string representation using the providing formatting rules. If set, the `locale` argument specifies the locale to use, as a BCP 47 language tag. If set, the `currency` argument specifies an ISO 4217 code to use for currency-style formatting. If set, the `unit` argument specifies a [simple ECMAScript unit](https://tc39.es/proposal-unified-intl-numberformat/section6/locales-currencies-tz_proposed_out.html#sec-issanctionedsimpleunitidentifier) to use for unit-style formatting. If set, the `min-fraction-digits` and `max-fraction-digits` arguments specify the minimum and maximum number of fractional digits to include.",group:"Types","sdk-support":{"basic functionality":{js:"0.54.0",android:"8.4.0",ios:"5.4.0",macos:"0.15.0"}}},"to-string":{doc:'Converts the input value to a string. If the input is `null`, the result is `""`. If the input is a [`boolean`](#types-boolean), the result is `"true"` or `"false"`. If the input is a number, it is converted to a string as specified by the ["NumberToString" algorithm](https://tc39.github.io/ecma262/#sec-tostring-applied-to-the-number-type) of the ECMAScript Language Specification. If the input is a [`color`](#color), it is converted to a string of the form `"rgba(r,g,b,a)"`, where `r`, `g`, and `b` are numerals ranging from 0 to 255, and `a` ranges from 0 to 1. If the input is an [`\'image\'`](#types-image) expression, `\'to-string\'` returns the image name. Otherwise, the input is converted to a string in the format specified by the [`JSON.stringify`](https://tc39.github.io/ecma262/#sec-json.stringify) function of the ECMAScript Language Specification.',group:"Types","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"to-number":{doc:'Converts the input value to a number, if possible. If the input is `null` or `false`, the result is 0. If the input is `true`, the result is 1. If the input is a string, it is converted to a number as specified by the ["ToNumber Applied to the String Type" algorithm](https://tc39.github.io/ecma262/#sec-tonumber-applied-to-the-string-type) of the ECMAScript Language Specification. If multiple values are provided, each one is evaluated in order until the first successful conversion is obtained. If none of the inputs can be converted, the expression is an error.',group:"Types","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"to-boolean":{doc:"Converts the input value to a boolean. The result is `false` when then input is an empty string, 0, `false`, `null`, or `NaN`; otherwise it is `true`.",group:"Types","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"to-rgba":{doc:"Returns a four-element array containing the input color's red, green, blue, and alpha components, in that order.",group:"Color","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"to-color":{doc:"Converts the input value to a color. If multiple values are provided, each one is evaluated in order until the first successful conversion is obtained. If none of the inputs can be converted, the expression is an error.",group:"Types","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},rgb:{doc:"Creates a color value from red, green, and blue components, which must range between 0 and 255, and an alpha component of 1. If any component is out of range, the expression is an error.",group:"Color","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},rgba:{doc:"Creates a color value from red, green, blue components, which must range between 0 and 255, and an alpha component which must range between 0 and 1. If any component is out of range, the expression is an error.",group:"Color","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},get:{doc:"Retrieves a property value from the current feature's properties, or from another object if a second argument is provided. Returns `null` if the requested property is missing.",group:"Lookup","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},has:{doc:"Tests for the presence of an property value in the current feature's properties, or from another object if a second argument is provided.",group:"Lookup","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},length:{doc:"Returns the length of an array or string.",group:"Lookup","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},properties:{doc:'Returns the feature properties object.  Note that in some cases, it may be more efficient to use `["get", "property_name"]` directly.',group:"Feature data","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"feature-state":{doc:"Retrieves a property value from the current feature's state. Returns `null` if the requested property is not present on the feature's state. A feature's state is not part of the GeoJSON or vector tile data, and must be set programmatically on each feature. Features are identified by their `id` attribute, which must be an integer or a string that can be cast to an integer. Note that [\"feature-state\"] can only be used with paint properties that support data-driven styling.",group:"Feature data","sdk-support":{"basic functionality":{js:"0.46.0"}}},"geometry-type":{doc:"Returns the feature's geometry type: `Point`, `MultiPoint`, `LineString`, `MultiLineString`, `Polygon`, `MultiPolygon`. `Multi*` feature types are only returned in GeoJSON sources. When working with vector tile sources, use the singular forms.",group:"Feature data","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},id:{doc:"Returns the feature's id, if it has one.",group:"Feature data","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},zoom:{doc:'Returns the current zoom level.  Note that in style layout and paint properties, ["zoom"] may only appear as the input to a top-level "step" or "interpolate" expression.',group:"Camera","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},pitch:{doc:'Returns the current pitch in degrees. `["pitch"]` may only be used in the `filter` expression for a `symbol` layer.',group:"Camera","sdk-support":{"basic functionality":{js:"2.6.0"}}},"distance-from-center":{doc:'Returns the distance of a `symbol` instance from the center of the map. The distance is measured in pixels divided by the height of the map container. It measures 0 at the center, decreases towards the camera and increase away from the camera. For example, if the height of the map is 1000px, a value of -1 means 1000px away from the center towards the camera, and a value of 1 means a distance of 1000px away from the camera from the center. `["distance-from-center"]` may only be used in the `filter` expression for a `symbol` layer.',group:"Camera","sdk-support":{"basic functionality":{js:"2.6.0"}}},"heatmap-density":{doc:"Returns the kernel density estimation of a pixel in a heatmap layer, which is a relative measure of how many data points are crowded around a particular pixel. Can only be used in the `heatmap-color` property.",group:"Heatmap","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"line-progress":{doc:"Returns the progress along a gradient line. Can only be used in the `line-gradient` property.",group:"Feature data","sdk-support":{"basic functionality":{js:"0.45.0",android:"6.5.0",ios:"4.6.0",macos:"0.12.0"}}},"sky-radial-progress":{doc:"Returns the distance of a point on the sky from the sun position. Returns 0 at sun position and 1 when the distance reaches `sky-gradient-radius`. Can only be used in the `sky-gradient` property.",group:"sky","sdk-support":{"basic functionality":{js:"2.0.0",ios:"10.0.0",android:"10.0.0"}}},accumulated:{doc:"Returns the value of a cluster property accumulated so far. Can only be used in the `clusterProperties` option of a clustered GeoJSON source.",group:"Feature data","sdk-support":{"basic functionality":{js:"0.53.0",android:"8.4.0",ios:"5.5.0",macos:"0.15.0"}}},"+":{doc:"Returns the sum of the inputs.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"*":{doc:"Returns the product of the inputs.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"-":{doc:"For two inputs, returns the result of subtracting the second input from the first. For a single input, returns the result of subtracting it from 0.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"/":{doc:"Returns the result of floating point division of the first input by the second.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"%":{doc:"Returns the remainder after integer division of the first input by the second.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"^":{doc:"Returns the result of raising the first input to the power specified by the second.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},sqrt:{doc:"Returns the square root of the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.42.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},log10:{doc:"Returns the base-ten logarithm of the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},ln:{doc:"Returns the natural logarithm of the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},log2:{doc:"Returns the base-two logarithm of the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},sin:{doc:"Returns the sine of the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},cos:{doc:"Returns the cosine of the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},tan:{doc:"Returns the tangent of the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},asin:{doc:"Returns the arcsine of the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},acos:{doc:"Returns the arccosine of the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},atan:{doc:"Returns the arctangent of the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},min:{doc:"Returns the minimum value of the inputs.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},max:{doc:"Returns the maximum value of the inputs.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},round:{doc:'Rounds the input to the nearest integer. Halfway values are rounded away from zero. For example, `["round", -1.5]` evaluates to -2.',group:"Math","sdk-support":{"basic functionality":{js:"0.45.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},abs:{doc:"Returns the absolute value of the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.45.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},ceil:{doc:"Returns the smallest integer that is greater than or equal to the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.45.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},floor:{doc:"Returns the largest integer that is less than or equal to the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.45.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},distance:{doc:"Returns the shortest distance in meters between the evaluated feature and the input geometry. The input value can be a valid GeoJSON of type `Point`, `MultiPoint`, `LineString`, `MultiLineString`, `Polygon`, `MultiPolygon`, `Feature`, or `FeatureCollection`. Distance values returned may vary in precision due to loss in precision from encoding geometries, particularly below zoom level 13.",group:"Math","sdk-support":{"basic functionality":{android:"9.2.0",ios:"5.9.0",macos:"0.16.0"}}},"==":{doc:"Returns `true` if the input values are equal, `false` otherwise. The comparison is strictly typed: values of different runtime types are always considered unequal. Cases where the types are known to be different at parse time are considered invalid and will produce a parse error. Accepts an optional `collator` argument to control locale-dependent string comparisons.",group:"Decision","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"},collator:{js:"0.45.0",android:"6.5.0",ios:"4.2.0",macos:"0.9.0"}}},"!=":{doc:"Returns `true` if the input values are not equal, `false` otherwise. The comparison is strictly typed: values of different runtime types are always considered unequal. Cases where the types are known to be different at parse time are considered invalid and will produce a parse error. Accepts an optional `collator` argument to control locale-dependent string comparisons.",group:"Decision","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"},collator:{js:"0.45.0",android:"6.5.0",ios:"4.2.0",macos:"0.9.0"}}},">":{doc:"Returns `true` if the first input is strictly greater than the second, `false` otherwise. The arguments are required to be either both strings or both numbers; if during evaluation they are not, expression evaluation produces an error. Cases where this constraint is known not to hold at parse time are considered in valid and will produce a parse error. Accepts an optional `collator` argument to control locale-dependent string comparisons.",group:"Decision","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"},collator:{js:"0.45.0",android:"6.5.0",ios:"4.2.0",macos:"0.9.0"}}},"<":{doc:"Returns `true` if the first input is strictly less than the second, `false` otherwise. The arguments are required to be either both strings or both numbers; if during evaluation they are not, expression evaluation produces an error. Cases where this constraint is known not to hold at parse time are considered in valid and will produce a parse error. Accepts an optional `collator` argument to control locale-dependent string comparisons.",group:"Decision","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"},collator:{js:"0.45.0",android:"6.5.0",ios:"4.2.0",macos:"0.9.0"}}},">=":{doc:"Returns `true` if the first input is greater than or equal to the second, `false` otherwise. The arguments are required to be either both strings or both numbers; if during evaluation they are not, expression evaluation produces an error. Cases where this constraint is known not to hold at parse time are considered in valid and will produce a parse error. Accepts an optional `collator` argument to control locale-dependent string comparisons.",group:"Decision","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"},collator:{js:"0.45.0",android:"6.5.0",ios:"4.2.0",macos:"0.9.0"}}},"<=":{doc:"Returns `true` if the first input is less than or equal to the second, `false` otherwise. The arguments are required to be either both strings or both numbers; if during evaluation they are not, expression evaluation produces an error. Cases where this constraint is known not to hold at parse time are considered in valid and will produce a parse error. Accepts an optional `collator` argument to control locale-dependent string comparisons.",group:"Decision","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"},collator:{js:"0.45.0",android:"6.5.0",ios:"4.2.0",macos:"0.9.0"}}},all:{doc:"Returns `true` if all the inputs are `true`, `false` otherwise. The inputs are evaluated in order, and evaluation is short-circuiting: once an input expression evaluates to `false`, the result is `false` and no further input expressions are evaluated.",group:"Decision","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},any:{doc:"Returns `true` if any of the inputs are `true`, `false` otherwise. The inputs are evaluated in order, and evaluation is short-circuiting: once an input expression evaluates to `true`, the result is `true` and no further input expressions are evaluated.",group:"Decision","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"!":{doc:"Logical negation. Returns `true` if the input is `false`, and `false` if the input is `true`.",group:"Decision","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},within:{doc:"Returns `true` if the evaluated feature is fully contained inside a boundary of the input geometry, `false` otherwise. The input value can be a valid GeoJSON of type `Polygon`, `MultiPolygon`, `Feature`, or `FeatureCollection`. Supported features for evaluation:\n- `Point`: Returns `false` if a point is on the boundary or falls outside the boundary.\n- `LineString`: Returns `false` if any part of a line falls outside the boundary, the line intersects the boundary, or a line's endpoint is on the boundary.",group:"Decision","sdk-support":{"basic functionality":{js:"1.9.0",android:"9.1.0",ios:"5.8.0",macos:"0.15.0"}}},"is-supported-script":{doc:"Returns `true` if the input string is expected to render legibly. Returns `false` if the input string contains sections that cannot be rendered without potential loss of meaning (e.g. Indic scripts that require complex text shaping, or right-to-left scripts if the the `mapbox-gl-rtl-text` plugin is not in use in Mapbox GL JS).",group:"String","sdk-support":{"basic functionality":{js:"0.45.0",android:"6.6.0",ios:"4.1.0",macos:"0.8.0"}}},upcase:{doc:"Returns the input string converted to uppercase. Follows the Unicode Default Case Conversion algorithm and the locale-insensitive case mappings in the Unicode Character Database.",group:"String","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},downcase:{doc:"Returns the input string converted to lowercase. Follows the Unicode Default Case Conversion algorithm and the locale-insensitive case mappings in the Unicode Character Database.",group:"String","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},concat:{doc:"Returns a `string` consisting of the concatenation of the inputs. Each input is converted to a string as if by `to-string`.",group:"String","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"resolved-locale":{doc:"Returns the IETF language tag of the locale being used by the provided `collator`. This can be used to determine the default system locale, or to determine if a requested locale was successfully loaded.",group:"String","sdk-support":{"basic functionality":{js:"0.45.0",android:"6.5.0",ios:"4.2.0",macos:"0.9.0"}}}}},ok={range:{type:"array",default:[.5,10],minimum:-20,maximum:20,length:2,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},doc:"The start and end distance range in which fog fades from fully transparent to fully opaque. The distance to the point at the center of the map is defined as zero, so that negative range values are closer to the camera, and positive values are farther away.",example:[.5,10],"sdk-support":{"basic functionality":{js:"2.3.0",android:"10.6.0",ios:"10.6.0"}}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0,doc:"The color of the atmosphere region immediately below the horizon and within the `range` and above the horizon and within `horizon-blend`. Using opacity is recommended only for smoothly transitioning fog on/off as anything less than 100% opacity results in more tiles loaded and drawn.","sdk-support":{"basic functionality":{js:"2.3.0",android:"10.6.0",ios:"10.6.0"}}},"high-color":{type:"color","property-type":"data-constant",default:"#245cdf",expression:{interpolated:!0,parameters:["zoom"]},transition:!0,doc:"The color of the atmosphere region above the horizon, `high-color` extends further above the horizon than the `color` property and its spread can be controlled with `horizon-blend`. The opacity can be set to `0` to remove the high atmosphere color contribution.","sdk-support":{"basic functionality":{js:"2.9.0",android:"10.6.0",ios:"10.6.0"}}},"space-color":{type:"color","property-type":"data-constant",default:["interpolate",["linear"],["zoom"],4,"#010b19",7,"#367ab9"],expression:{interpolated:!0,parameters:["zoom"]},transition:!0,doc:"The color of the region above the horizon and after the end of the `horizon-blend` contribution. The opacity can be set to `0` to have a transparent background.","sdk-support":{"basic functionality":{js:"2.9.0",android:"10.6.0",ios:"10.6.0"}}},"horizon-blend":{type:"number","property-type":"data-constant",default:["interpolate",["linear"],["zoom"],4,.2,7,.1],minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0,doc:"Horizon blend applies a smooth fade from the color of the atmosphere to the color of space. A value of zero leaves a sharp transition from atmosphere to space. Increasing the value blends the color of atmosphere into increasingly high angles of the sky.","sdk-support":{"basic functionality":{js:"2.3.0",android:"10.6.0",ios:"10.6.0"}}},"star-intensity":{type:"number","property-type":"data-constant",default:["interpolate",["linear"],["zoom"],5,.35,6,0],minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0,doc:"A value controlling the star intensity where `0` will show no stars and `1` will show stars at their maximum intensity.","sdk-support":{"basic functionality":{js:"2.9.0",android:"10.6.0",ios:"10.6.0"}}}},sk={anchor:{type:"enum",default:"viewport",values:{map:{doc:"The position of the light source is aligned to the rotation of the map."},viewport:{doc:"The position of the light source is aligned to the rotation of the viewport."}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]},doc:"Whether extruded geometries are lit relative to the map or viewport.",example:"map","sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},doc:"Position of the light source relative to lit (extruded) geometries, in [r radial coordinate, a azimuthal angle, p polar angle] where r indicates the distance from the center of the base of an object to its light, a indicates the position of the light relative to 0\xB0 (0\xB0 when `light.anchor` is set to `viewport` corresponds to the top of the viewport, or 0\xB0 when `light.anchor` is set to `map` corresponds to due north, and degrees proceed clockwise), and p indicates the height of the light (from 0\xB0, directly above, to 180\xB0, directly below).",example:[1.5,90,80],"sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0,doc:"Color tint for lighting extruded geometries.","sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}}},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0,doc:"Intensity of lighting (on a scale from 0 to 1). Higher numbers will present as more extreme contrast.","sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}}}},ak={name:{type:"enum",values:{albers:{doc:"An Albers equal-area projection centered on the continental United States. You can configure the projection for a different region by setting `center` and `parallels` properties. You may want to set max bounds to constrain the map to the relevant region."},equalEarth:{doc:"An Equal Earth projection."},equirectangular:{doc:"An Equirectangular projection. This projection is very similar to the Plate Carr\xE9e projection."},lambertConformalConic:{doc:"A Lambert conformal conic projection. You can configure the projection for a region by setting `center` and `parallels` properties. You may want to set max bounds to constrain the map to the relevant region."},mercator:{doc:"The Mercator projection is the default projection."},naturalEarth:{doc:"A Natural Earth projection."},winkelTripel:{doc:"A Winkel Tripel projection."},globe:{doc:"A globe projection."}},default:"mercator",doc:"The name of the projection to be used for rendering the map.",required:!0,"sdk-support":{"basic functionality":{js:"2.6.0"}}},center:{type:"array",length:2,value:"number","property-type":"data-constant",minimum:[-180,-90],maximum:[180,90],transition:!1,doc:"The reference longitude and latitude of the projection. `center` takes the form of [lng, lat]. This property is only configurable for conic projections (Albers and Lambert Conformal Conic). All other projections are centered on [0, 0].",example:[-96,37.5],requires:[{name:["albers","lambertConformalConic"]}],"sdk-support":{"basic functionality":{js:"2.6.0"}}},parallels:{type:"array",length:2,value:"number","property-type":"data-constant",minimum:[-90,-90],maximum:[90,90],transition:!1,doc:"The standard parallels of the projection, denoting the desired latitude range with minimal distortion. `parallels` takes the form of [lat0, lat1]. This property is only configurable for conic projections (Albers and Lambert Conformal Conic).",example:[29.5,45.5],requires:[{name:["albers","lambertConformalConic"]}],"sdk-support":{"basic functionality":{js:"2.6.0"}}}},lk={source:{type:"string",doc:"Name of a source of `raster_dem` type to be used for terrain elevation.",required:!0,"sdk-support":{"basic functionality":{js:"2.0.0",ios:"10.0.0",android:"10.0.0"}}},exaggeration:{type:"number","property-type":"data-constant",default:1,minimum:0,maximum:1e3,expression:{interpolated:!0,parameters:["zoom"]},transition:!0,doc:"Exaggerates the elevation of the terrain by multiplying the data from the DEM with this value.",requires:["source"],"sdk-support":{"basic functionality":{js:"2.0.0",ios:"10.0.0",android:"10.0.0"}}}},uk=["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background","paint_sky"],ck={"fill-antialias":{type:"boolean",default:!0,doc:"Whether or not the fill should be antialiased.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,doc:"The opacity of the entire fill layer. In contrast to the `fill-color`, this value will also affect the 1px stroke around the fill, if the stroke is used.",transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.21.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",doc:"The color of the filled part of this layer. This color can be specified as `rgba` with an alpha component and the color's opacity will not affect the opacity of the 1px stroke, if it is used.",transition:!0,requires:[{"!":"fill-pattern"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.19.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",doc:"The outline color of the fill. Matches the value of `fill-color` if unspecified.",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.19.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",doc:"The geometry's offset. Values are [x, y] where negatives indicate left and up, respectively.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{doc:"The fill is translated relative to the map."},viewport:{doc:"The fill is translated relative to the viewport."}},doc:"Controls the frame of reference for `fill-translate`.",default:"map",requires:["fill-translate"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,doc:"Name of image in sprite to use for drawing image fills. For seamless patterns, image width and height must be a factor of two (2, 4, 8, ..., 512). Note that zoom-dependent expressions will be evaluated only at integer zoom levels.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.49.0",android:"6.5.0",macos:"0.11.0",ios:"4.4.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},hk={"line-opacity":{type:"number",doc:"The opacity at which the line will be drawn.",default:1,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.29.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",doc:"The color with which the line will be drawn.",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.23.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",doc:"The geometry's offset. Values are [x, y] where negatives indicate left and up, respectively.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{doc:"The line is translated relative to the map."},viewport:{doc:"The line is translated relative to the viewport."}},doc:"Controls the frame of reference for `line-translate`.",default:"map",requires:["line-translate"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",doc:"Stroke thickness.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.39.0",android:"5.2.0",ios:"3.7.0",macos:"0.6.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,doc:"Draws a line casing outside of a line's actual path. Value indicates the width of the inner gap.",transition:!0,units:"pixels","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.29.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,doc:"The line's offset. For linear features, a positive value offsets the line to the right, relative to the direction of the line, and a negative value to the left. For polygon features, a positive value results in an inset, and a negative value results in an outset.",transition:!0,units:"pixels","sdk-support":{"basic functionality":{js:"0.12.1",android:"3.0.0",ios:"3.1.0",macos:"0.1.0"},"data-driven styling":{js:"0.29.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",doc:"Blur applied to the line, in pixels.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.29.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",doc:"Specifies the lengths of the alternating dashes and gaps that form the dash pattern. The lengths are later scaled by the line width. To convert a dash length to pixels, multiply the length by the current line width. Note that GeoJSON sources with `lineMetrics: true` specified won't render dashed lines to the expected scale. Also note that zoom-dependent expressions will be evaluated only at integer zoom levels.",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"2.3.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-pattern":{type:"resolvedImage",transition:!0,doc:"Name of image in sprite to use for drawing image lines. For seamless patterns, image width must be a factor of two (2, 4, 8, ..., 512). Note that zoom-dependent expressions will be evaluated only at integer zoom levels.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.49.0",android:"6.5.0",macos:"0.11.0",ios:"4.4.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",doc:'Defines a gradient with which to color a line feature. Can only be used with GeoJSON sources that specify `"lineMetrics": true`.',transition:!1,requires:[{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],"sdk-support":{"basic functionality":{js:"0.45.0",android:"6.5.0",ios:"4.4.0",macos:"0.11.0"},"data-driven styling":{}},expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"},"line-trim-offset":{type:"array",value:"number",doc:"The line part between [trim-start, trim-end] will be marked as transparent to make a route vanishing effect. The line trim-off offset is based on the whole line range [0.0, 1.0].",length:2,default:[0,0],minimum:[0,0],maximum:[1,1],transition:!1,requires:[{source:"geojson",has:{lineMetrics:!0}}],"sdk-support":{"basic functionality":{js:"2.9.0",android:"10.5.0",ios:"10.5.0",macos:"10.5.0"}},"property-type":"constant"}},fk={"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",doc:"Circle radius.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.18.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",doc:"The fill color of the circle.",transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.18.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,doc:"Amount to blur the circle. 1 blurs the circle such that only the centerpoint is full opacity.",transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.20.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",doc:"The opacity at which the circle will be drawn.",default:1,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.20.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",doc:"The geometry's offset. Values are [x, y] where negatives indicate left and up, respectively.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{doc:"The circle is translated relative to the map."},viewport:{doc:"The circle is translated relative to the viewport."}},doc:"Controls the frame of reference for `circle-translate`.",default:"map",requires:["circle-translate"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{doc:"Circles are scaled according to their apparent distance to the camera."},viewport:{doc:"Circles are not scaled."}},default:"map",doc:"Controls the scaling behavior of the circle when the map is pitched.","sdk-support":{"basic functionality":{js:"0.21.0",android:"4.2.0",ios:"3.4.0",macos:"0.2.1"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{doc:"The circle is aligned to the plane of the map."},viewport:{doc:"The circle is aligned to the plane of the viewport."}},default:"viewport",doc:"Orientation of circle when map is pitched.","sdk-support":{"basic functionality":{js:"0.39.0",android:"5.2.0",ios:"3.7.0",macos:"0.6.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",doc:"The width of the circle's stroke. Strokes are placed outside of the `circle-radius`.","sdk-support":{"basic functionality":{js:"0.29.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"},"data-driven styling":{js:"0.29.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",doc:"The stroke color of the circle.",transition:!0,"sdk-support":{"basic functionality":{js:"0.29.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"},"data-driven styling":{js:"0.29.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",doc:"The opacity of the circle's stroke.",default:1,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.29.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"},"data-driven styling":{js:"0.29.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},dk={"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",doc:"Radius of influence of one heatmap point in pixels. Increasing the value makes the heatmap smoother, but less detailed. `queryRenderedFeatures` on heatmap layers will return points within this radius.","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"},"data-driven styling":{js:"0.43.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,doc:"A measure of how much an individual point contributes to the heatmap. A value of 10 would be equivalent to having 10 points of weight 1 in the same spot. Especially useful when combined with clustering.","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"},"data-driven styling":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,doc:"Similar to `heatmap-weight` but controls the intensity of the heatmap globally. Primarily used for adjusting the heatmap based on zoom level.","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],doc:'Defines the color of each pixel based on its density value in a heatmap.  Should be an expression that uses `["heatmap-density"]` as input.',transition:!1,"sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"},"data-driven styling":{}},expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",doc:"The global opacity at which the heatmap layer will be drawn.",default:1,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},pk={"icon-opacity":{doc:"The opacity at which the icon will be drawn.",type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,doc:"The color of the icon. This can only be used with [SDF icons](/help/troubleshooting/using-recolorable-images-in-mapbox-maps/).",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,doc:"The color of the icon's halo. Icon halos can only be used with [SDF icons](/help/troubleshooting/using-recolorable-images-in-mapbox-maps/).",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",doc:"Distance of halo to the icon outline.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",doc:"Fade out the halo towards the outside.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",doc:"Distance that the icon's anchor is moved from its original placement. Positive values indicate right and down, while negative values indicate left and up.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{doc:"Icons are translated relative to the map."},viewport:{doc:"Icons are translated relative to the viewport."}},doc:"Controls the frame of reference for `icon-translate`.",default:"map",requires:["icon-image","icon-translate"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",doc:"The opacity at which the text will be drawn.",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",doc:"The color with which the text will be drawn.",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,doc:"The color of the text's halo, which helps it stand out from backgrounds.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",doc:"Distance of halo to the font outline. Max text halo width is 1/4 of the font-size.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",doc:"The halo's fadeout distance towards the outside.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",doc:"Distance that the text's anchor is moved from its original placement. Positive values indicate right and down, while negative values indicate left and up.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{doc:"The text is translated relative to the map."},viewport:{doc:"The text is translated relative to the viewport."}},doc:"Controls the frame of reference for `text-translate`.",default:"map",requires:["text-field","text-translate"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},mk={"raster-opacity":{type:"number",doc:"The opacity at which the image will be drawn.",default:1,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",doc:"Rotates hues around the color wheel.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",doc:"Increase or reduce the brightness of the image. The value is the minimum brightness.",default:0,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",doc:"Increase or reduce the brightness of the image. The value is the maximum brightness.",default:1,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",doc:"Increase or reduce the saturation of the image.",default:0,minimum:-1,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",doc:"Increase or reduce the contrast of the image.",default:0,minimum:-1,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",doc:"The resampling/interpolation method to use for overscaling, also known as texture magnification filter",values:{linear:{doc:"(Bi)linear filtering interpolates pixel values using the weighted average of the four closest original source pixels creating a smooth but blurry look when overscaled"},nearest:{doc:"Nearest neighbor filtering interpolates pixel values using the nearest original source pixel creating a sharp but pixelated look when overscaled"}},default:"linear","sdk-support":{"basic functionality":{js:"0.47.0",android:"6.3.0",ios:"4.2.0",macos:"0.9.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",doc:"Fade duration when a new tile is added.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},gk={"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,doc:"The direction of the light source used to generate the hillshading with 0 as the top of the viewport if `hillshade-illumination-anchor` is set to `viewport` and due north if `hillshade-illumination-anchor` is set to `map`.",transition:!1,"sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{doc:"The hillshade illumination is relative to the north direction."},viewport:{doc:"The hillshade illumination is relative to the top of the viewport."}},default:"viewport",doc:"Direction of light source when map is rotated.","sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",doc:"Intensity of the hillshade",default:.5,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",doc:"The shading color of areas that face away from the light source.",transition:!0,"sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",doc:"The shading color of areas that faces towards the light source.",transition:!0,"sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",doc:"The shading color used to accentuate rugged terrain like sharp cliffs and gorges.",transition:!0,"sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},yk={"background-color":{type:"color",default:"#000000",doc:"The color with which the background will be drawn.",transition:!0,requires:[{"!":"background-pattern"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,doc:"Name of image in sprite to use for drawing an image background. For seamless patterns, image width and height must be a factor of two (2, 4, 8, ..., 512). Note that zoom-dependent expressions will be evaluated only at integer zoom levels.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,doc:"The opacity at which the background will be drawn.",transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},_k={"sky-type":{type:"enum",values:{gradient:{doc:"Renders the sky with a gradient that can be configured with `sky-gradient-radius` and `sky-gradient`."},atmosphere:{doc:"Renders the sky with a simulated atmospheric scattering algorithm, the sun direction can be attached to the light position or explicitly set through `sky-atmosphere-sun`."}},default:"atmosphere",doc:"The type of the sky","sdk-support":{"basic functionality":{js:"2.0.0",ios:"10.0.0",android:"10.0.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun":{type:"array",value:"number",length:2,units:"degrees",minimum:[0,0],maximum:[360,180],transition:!1,doc:"Position of the sun center [a azimuthal angle, p polar angle]. The azimuthal angle indicates the position of the sun relative to 0\xB0 north, where degrees proceed clockwise. The polar angle indicates the height of the sun, where 0\xB0 is directly above, at zenith, and 90\xB0 at the horizon. When this property is ommitted, the sun center is directly inherited from the light position.","sdk-support":{"basic functionality":{js:"2.0.0",ios:"10.0.0",android:"10.0.0"}},requires:[{"sky-type":"atmosphere"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun-intensity":{type:"number",requires:[{"sky-type":"atmosphere"}],default:10,minimum:0,maximum:100,transition:!1,doc:"Intensity of the sun as a light source in the atmosphere (on a scale from 0 to a 100). Setting higher values will brighten up the sky.","sdk-support":{"basic functionality":{js:"2.0.0",ios:"10.0.0",android:"10.0.0"}},"property-type":"data-constant"},"sky-gradient-center":{type:"array",requires:[{"sky-type":"gradient"}],value:"number",default:[0,0],length:2,units:"degrees",minimum:[0,0],maximum:[360,180],transition:!1,doc:"Position of the gradient center [a azimuthal angle, p polar angle]. The azimuthal angle indicates the position of the gradient center relative to 0\xB0 north, where degrees proceed clockwise. The polar angle indicates the height of the gradient center, where 0\xB0 is directly above, at zenith, and 90\xB0 at the horizon.","sdk-support":{"basic functionality":{js:"2.0.0",ios:"10.0.0",android:"10.0.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"sky-gradient-radius":{type:"number",requires:[{"sky-type":"gradient"}],default:90,minimum:0,maximum:180,transition:!1,doc:"The angular distance (measured in degrees) from `sky-gradient-center` up to which the gradient extends. A value of 180 causes the gradient to wrap around to the opposite direction from `sky-gradient-center`.","sdk-support":{"basic functionality":{js:"2.0.0",ios:"10.0.0",android:"10.0.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"sky-gradient":{type:"color",default:["interpolate",["linear"],["sky-radial-progress"],.8,"#87ceeb",1,"white"],doc:"Defines a radial color gradient with which to color the sky. The color values can be interpolated with an expression using `sky-radial-progress`. The range [0, 1] for the interpolant covers a radial distance (in degrees) of [0, `sky-gradient-radius`] centered at the position specified by `sky-gradient-center`.",transition:!1,requires:[{"sky-type":"gradient"}],"sdk-support":{"basic functionality":{js:"2.0.0",ios:"10.0.0",android:"10.0.0"},"data-driven styling":{}},expression:{interpolated:!0,parameters:["sky-radial-progress"]},"property-type":"color-ramp"},"sky-atmosphere-halo-color":{type:"color",default:"white",doc:"A color applied to the atmosphere sun halo. The alpha channel describes how strongly the sun halo is represented in an atmosphere sky layer.",transition:!1,requires:[{"sky-type":"atmosphere"}],"sdk-support":{"basic functionality":{js:"2.0.0",ios:"10.0.0",android:"10.0.0"}},"property-type":"data-constant"},"sky-atmosphere-color":{type:"color",default:"white",doc:"A color used to tweak the main atmospheric scattering coefficients. Using white applies the default coefficients giving the natural blue color to the atmosphere. This color affects how heavily the corresponding wavelength is represented during scattering. The alpha channel describes the density of the atmosphere, with 1 maximum density and 0 no density.",transition:!1,requires:[{"sky-type":"atmosphere"}],"sdk-support":{"basic functionality":{js:"2.0.0",ios:"10.0.0",android:"10.0.0"}},"property-type":"data-constant"},"sky-opacity":{type:"number",default:1,minimum:0,maximum:1,doc:"The opacity of the entire sky layer.",transition:!0,"sdk-support":{"basic functionality":{js:"2.0.0",ios:"10.0.0",android:"10.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},vk={duration:{type:"number",default:300,minimum:0,units:"milliseconds",doc:"Time allotted for transitions to complete."},delay:{type:"number",default:0,minimum:0,units:"milliseconds",doc:"Length of time before a transition begins."}},bk={"*":{type:"string",doc:"A name of a feature property to use as ID for feature state."}},wk={$version:EA,$root:IA,sources:TA,source:LA,source_vector:PA,source_raster:MA,source_raster_dem:DA,source_geojson:OA,source_video:FA,source_image:RA,layer:BA,layout:zA,layout_background:NA,layout_sky:jA,layout_fill:UA,layout_circle:VA,layout_heatmap:qA,"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}},"property-type":"constant"},"fill-extrusion-edge-radius":{type:"number",private:!0,default:0,minimum:0,maximum:1,doc:"Radius of a fill extrusion edge in meters. If not zero, rounds extrusion edges for a smoother appearance.","sdk-support":{"basic functionality":{js:"v2.10.0"}},"property-type":"constant"}},layout_line:HA,layout_symbol:GA,layout_raster:WA,layout_hillshade:XA,filter:YA,filter_symbol:ZA,filter_fill:KA,filter_line:JA,filter_circle:QA,"filter_fill-extrusion":{type:"boolean",doc:'Expression which determines whether or not to display a Polygon. Fill-extrusion layer does NOT support dynamic filtering, meaning this expression can NOT use the `["pitch"]` and `["distance-from-center"]` expressions to reference the current state of the view.',default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}},filter_heatmap:$A,filter_operator:ek,geometry_type:tk,function:{expression:{type:"expression",doc:"An expression."},stops:{type:"array",doc:"An array of stops.",value:"function_stop"},base:{type:"number",default:1,minimum:0,doc:"The exponential base of the interpolation curve. It controls the rate at which the result increases. Higher values make the result increase more towards the high end of the range. With `1` the stops are interpolated linearly."},property:{type:"string",doc:"The name of a feature property to use as the function input.",default:"$zoom"},type:{type:"enum",values:{identity:{doc:"Return the input value as the output value."},exponential:{doc:"Generate an output by interpolating between stops just less than and just greater than the function input."},interval:{doc:"Return the output value of the stop just less than the function input."},categorical:{doc:"Return the output value of the stop equal to the function input."}},doc:"The interpolation strategy to use in function evaluation.",default:"exponential"},colorSpace:{type:"enum",values:{rgb:{doc:"Use the RGB color space to interpolate color values"},lab:{doc:"Use the LAB color space to interpolate color values."},hcl:{doc:"Use the HCL color space to interpolate color values, interpolating the Hue, Chroma, and Luminance channels individually."}},doc:"The color space in which colors interpolated. Interpolating colors in perceptual color spaces like LAB and HCL tend to produce color ramps that look more consistent and produce colors that can be differentiated more easily than those interpolated in RGB space.",default:"rgb"},default:{type:"*",required:!1,doc:`A value to serve as a fallback function result when a value isn't otherwise available. It is used in the following circumstances:
* In categorical functions, when the feature value does not match any of the stop domain values.
* In property and zoom-and-property functions, when a feature does not contain a value for the specified property.
* In identity functions, when the feature value is not valid for the style property (for example, if the function is being used for a \`circle-color\` property but the feature property value is not a string or not a valid color).
* In interval or exponential property and zoom-and-property functions, when the feature value is not numeric.
If no default is provided, the style property's default is used in these circumstances.`}},function_stop:ik,expression:nk,expression_name:rk,fog:ok,light:sk,projection:ak,terrain:lk,paint:uk,paint_fill:ck,"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,doc:"The opacity of the entire fill extrusion layer. This is rendered on a per-layer, not per-feature, basis, and data-driven styling is not available.",transition:!0,"sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",doc:"The base color of the extruded fill. The extrusion's surfaces will be shaded differently based on this color in combination with the root `light` settings. If this color is specified as `rgba` with an alpha component, the alpha component will be ignored; use `fill-extrusion-opacity` to set layer opacity.",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],"sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"},"data-driven styling":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",doc:"The geometry's offset. Values are [x, y] where negatives indicate left and up (on the flat plane), respectively.","sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{doc:"The fill extrusion is translated relative to the map."},viewport:{doc:"The fill extrusion is translated relative to the viewport."}},doc:"Controls the frame of reference for `fill-extrusion-translate`.",default:"map",requires:["fill-extrusion-translate"],"sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,doc:"Name of image in sprite to use for drawing images on extruded fills. For seamless patterns, image width and height must be a factor of two (2, 4, 8, ..., 512). Note that zoom-dependent expressions will be evaluated only at integer zoom levels.","sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"},"data-driven styling":{js:"0.49.0",android:"6.5.0",macos:"0.11.0",ios:"4.4.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",doc:"The height with which to extrude this layer.",transition:!0,"sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"},"data-driven styling":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",doc:"The height with which to extrude the base of this layer. Must be less than or equal to `fill-extrusion-height`.",transition:!0,requires:["fill-extrusion-height"],"sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"},"data-driven styling":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,doc:"Whether to apply a vertical gradient to the sides of a fill-extrusion layer. If true, sides will be shaded slightly darker farther down.",transition:!1,"sdk-support":{"basic functionality":{js:"0.50.0",android:"7.0.0",ios:"4.7.0",macos:"0.13.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-ambient-occlusion-intensity":{"property-type":"data-constant",type:"number",private:!0,default:0,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0,doc:"Controls the intensity of ambient occlusion (AO) shading. Current AO implementation is a low-cost best-effort approach that shades area near ground and concave angles between walls. Default value 0.0 disables ambient occlusion and values around 0.3 provide the most plausible results for buildings.","sdk-support":{"basic functionality":{js:"2.10.0",android:"10.7.0",ios:"10.7.0"}}},"fill-extrusion-ambient-occlusion-radius":{"property-type":"data-constant",type:"number",private:!0,default:3,minimum:0,expression:{interpolated:!0,parameters:["zoom"]},transition:!0,doc:"The radius of ambient occlusion (AO) shading, in meters. Current AO implementation is a low-cost best-effort approach that shades area near ground and concave angles between walls where the radius defines only vertical impact. Default value 3.0 corresponds to hight of one floor and brings the most plausible results for buildings.","sdk-support":{"basic functionality":{js:"2.10.0",android:"10.7.0",ios:"10.7.0"}}}},paint_line:hk,paint_circle:fk,paint_heatmap:dk,paint_symbol:pk,paint_raster:mk,paint_hillshade:gk,paint_background:yk,paint_sky:_k,transition:vk,"property-type":{"data-driven":{type:"property-type",doc:"Property is interpolable and can be represented using a property expression."},"cross-faded":{type:"property-type",doc:"Property is non-interpolable; rather, its values will be cross-faded to smoothly transition between integer zooms."},"cross-faded-data-driven":{type:"property-type",doc:"Property is non-interpolable; rather, its values will be cross-faded to smoothly transition between integer zooms. It can be represented using a property expression."},"color-ramp":{type:"property-type",doc:"Property should be specified using a color ramp from which the output color can be sampled based on a property calculation."},"data-constant":{type:"property-type",doc:"Property is interpolable but cannot be represented using a property expression."},constant:{type:"property-type",doc:"Property is constant across all zoom levels and property values."}},promoteId:bk},zm=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function P1(i){var e={exports:{}};return i(e,e.exports),e.exports}function xk(i){throw new Error('Could not dynamically require "'+i+'". Please configure the dynamicRequireTargets option of @rollup/plugin-commonjs appropriately for this require call to behave properly.')}/*! https://mths.be/punycode v1.3.2 by @mathias */P1(function(i,e){(function(t){var o=e&&!e.nodeType&&e,l=i&&!i.nodeType&&i,u=typeof zm=="object"&&zm;(u.global===u||u.window===u||u.self===u)&&(t=u);var m,r=2147483647,f=36,_=1,b=26,v=38,w=700,x=72,C=128,T="-",S=/^xn--/,M=/[^\x20-\x7E]/,O=/[\x2E\u3002\uFF0E\uFF61]/g,V={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},X=f-_,Z=Math.floor,te=String.fromCharCode,J;function ie(Ce){throw RangeError(V[Ce])}function Ee(Ce,Re){for(var le=Ce.length,Se=[];le--;)Se[le]=Re(Ce[le]);return Se}function Pe(Ce,Re){var le=Ce.split("@"),Se="";le.length>1&&(Se=le[0]+"@",Ce=le[1]),Ce=Ce.replace(O,".");var he=Ce.split("."),me=Ee(he,Re).join(".");return Se+me}function de(Ce){for(var Re=[],le=0,Se=Ce.length,he,me;le<Se;)he=Ce.charCodeAt(le++),he>=55296&&he<=56319&&le<Se?(me=Ce.charCodeAt(le++),(me&64512)==56320?Re.push(((he&1023)<<10)+(me&1023)+65536):(Re.push(he),le--)):Re.push(he);return Re}function Te(Ce){return Ee(Ce,function(Re){var le="";return Re>65535&&(Re-=65536,le+=te(Re>>>10&1023|55296),Re=56320|Re&1023),le+=te(Re),le}).join("")}function ve(Ce){return Ce-48<10?Ce-22:Ce-65<26?Ce-65:Ce-97<26?Ce-97:f}function _e(Ce,Re){return Ce+22+75*(Ce<26)-((Re!=0)<<5)}function ot(Ce,Re,le){var Se=0;for(Ce=le?Z(Ce/w):Ce>>1,Ce+=Z(Ce/Re);Ce>X*b>>1;Se+=f)Ce=Z(Ce/X);return Z(Se+(X+1)*Ce/(Ce+v))}function it(Ce){var Re=[],le=Ce.length,Se,he=0,me=C,Be=x,We,st,Ye,gt,Mt,ri,ut,wt,bt;for(We=Ce.lastIndexOf(T),We<0&&(We=0),st=0;st<We;++st)Ce.charCodeAt(st)>=128&&ie("not-basic"),Re.push(Ce.charCodeAt(st));for(Ye=We>0?We+1:0;Ye<le;){for(gt=he,Mt=1,ri=f;Ye>=le&&ie("invalid-input"),ut=ve(Ce.charCodeAt(Ye++)),(ut>=f||ut>Z((r-he)/Mt))&&ie("overflow"),he+=ut*Mt,wt=ri<=Be?_:ri>=Be+b?b:ri-Be,!(ut<wt);ri+=f)bt=f-wt,Mt>Z(r/bt)&&ie("overflow"),Mt*=bt;Se=Re.length+1,Be=ot(he-gt,Se,gt==0),Z(he/Se)>r-me&&ie("overflow"),me+=Z(he/Se),he%=Se,Re.splice(he++,0,me)}return Te(Re)}function It(Ce){var Re,le,Se,he,me,Be,We,st,Ye,gt,Mt,ri=[],ut,wt,bt,Je;for(Ce=de(Ce),ut=Ce.length,Re=C,le=0,me=x,Be=0;Be<ut;++Be)Mt=Ce[Be],Mt<128&&ri.push(te(Mt));for(Se=he=ri.length,he&&ri.push(T);Se<ut;){for(We=r,Be=0;Be<ut;++Be)Mt=Ce[Be],Mt>=Re&&Mt<We&&(We=Mt);for(wt=Se+1,We-Re>Z((r-le)/wt)&&ie("overflow"),le+=(We-Re)*wt,Re=We,Be=0;Be<ut;++Be)if(Mt=Ce[Be],Mt<Re&&++le>r&&ie("overflow"),Mt==Re){for(st=le,Ye=f;gt=Ye<=me?_:Ye>=me+b?b:Ye-me,!(st<gt);Ye+=f)Je=st-gt,bt=f-gt,ri.push(te(_e(gt+Je%bt,0))),st=Z(Je/bt);ri.push(te(_e(st,0))),me=ot(le,wt,Se==he),le=0,++Se}++le,++Re}return ri.join("")}function Xe(Ce){return Pe(Ce,function(Re){return S.test(Re)?it(Re.slice(4).toLowerCase()):Re})}function we(Ce){return Pe(Ce,function(Re){return M.test(Re)?"xn--"+It(Re):Re})}if(m={version:"1.3.2",ucs2:{decode:de,encode:Te},decode:it,encode:It,toASCII:we,toUnicode:Xe},o&&l)if(i.exports==o)l.exports=m;else for(J in m)m.hasOwnProperty(J)&&(o[J]=m[J]);else t.punycode=m})(zm)});function Ak(i,e){return Object.prototype.hasOwnProperty.call(i,e)}var kk=function(i,e,t,o){e=e||"&",t=t||"=";var l={};if(typeof i!="string"||i.length===0)return l;var u=/\+/g;i=i.split(e);var m=1e3;o&&typeof o.maxKeys=="number"&&(m=o.maxKeys);var r=i.length;m>0&&r>m&&(r=m);for(var f=0;f<r;++f){var _=i[f].replace(u,"%20"),b=_.indexOf(t),v,w,x,C;b>=0?(v=_.substr(0,b),w=_.substr(b+1)):(v=_,w=""),x=decodeURIComponent(v),C=decodeURIComponent(w),Ak(l,x)?Array.isArray(l[x])?l[x].push(C):l[x]=[l[x],C]:l[x]=C}return l},kd=function(i){switch(typeof i){case"string":return i;case"boolean":return i?"true":"false";case"number":return isFinite(i)?i:"";default:return""}},Sk=function(i,e,t,o){return e=e||"&",t=t||"=",i===null&&(i=void 0),typeof i=="object"?Object.keys(i).map(function(l){var u=encodeURIComponent(kd(l))+t;return Array.isArray(i[l])?i[l].map(function(m){return u+encodeURIComponent(kd(m))}).join(e):u+encodeURIComponent(kd(i[l]))}).join(e):o?encodeURIComponent(kd(o))+t+encodeURIComponent(kd(i)):""};P1(function(i,e){e.decode=e.parse=kk,e.encode=e.stringify=Sk});function F4(i,...e){for(const t of e)for(const o in t)i[o]=t[o];return i}class Ck extends Error{constructor(e,t){super(t),this.message=t,this.key=e}}var Kc=Ck;class mg{constructor(e,t=[]){this.parent=e,this.bindings={};for(const[o,l]of t)this.bindings[o]=l}concat(e){return new mg(this,e)}get(e){if(this.bindings[e])return this.bindings[e];if(this.parent)return this.parent.get(e);throw new Error(`${e} not found in scope.`)}has(e){return this.bindings[e]?!0:this.parent?this.parent.has(e):!1}}var Ek=mg;const M1={kind:"null"},jn={kind:"number"},ho={kind:"string"},ro={kind:"boolean"},Th={kind:"color"},G0={kind:"object"},oo={kind:"value"},Ik={kind:"error"},D1={kind:"collator"},O1={kind:"formatted"},ip={kind:"resolvedImage"};function ec(i,e){return{kind:"array",itemType:i,N:e}}function Ds(i){if(i.kind==="array"){const e=Ds(i.itemType);return typeof i.N=="number"?`array<${e}, ${i.N}>`:i.itemType.kind==="value"?"array":`array<${e}>`}else return i.kind}const Tk=[M1,jn,ho,ro,Th,O1,G0,ec(oo),ip];function Wd(i,e){if(e.kind==="error")return null;if(i.kind==="array"){if(e.kind==="array"&&(e.N===0&&e.itemType.kind==="value"||!Wd(i.itemType,e.itemType))&&(typeof i.N!="number"||i.N===e.N))return null}else{if(i.kind===e.kind)return null;if(i.kind==="value"){for(const t of Tk)if(!Wd(t,e))return null}}return`Expected ${Ds(i)} but found ${Ds(e)} instead.`}function gg(i,e){return e.some(t=>t.kind===i.kind)}function Xd(i,e){return e.some(t=>t==="null"?i===null:t==="array"?Array.isArray(i):t==="object"?i&&!Array.isArray(i)&&typeof i=="object":t===typeof i)}var Lk=P1(function(i,e){var t={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function o(_){return _=Math.round(_),_<0?0:_>255?255:_}function l(_){return _<0?0:_>1?1:_}function u(_){return _[_.length-1]==="%"?o(parseFloat(_)/100*255):o(parseInt(_))}function m(_){return _[_.length-1]==="%"?l(parseFloat(_)/100):l(parseFloat(_))}function r(_,b,v){return v<0?v+=1:v>1&&(v-=1),v*6<1?_+(b-_)*v*6:v*2<1?b:v*3<2?_+(b-_)*(2/3-v)*6:_}function f(_){var b=_.replace(/ /g,"").toLowerCase();if(b in t)return t[b].slice();if(b[0]==="#"){if(b.length===4){var v=parseInt(b.substr(1),16);return v>=0&&v<=4095?[(v&3840)>>4|(v&3840)>>8,v&240|(v&240)>>4,v&15|(v&15)<<4,1]:null}else if(b.length===7){var v=parseInt(b.substr(1),16);return v>=0&&v<=16777215?[(v&16711680)>>16,(v&65280)>>8,v&255,1]:null}return null}var w=b.indexOf("("),x=b.indexOf(")");if(w!==-1&&x+1===b.length){var C=b.substr(0,w),T=b.substr(w+1,x-(w+1)).split(","),S=1;switch(C){case"rgba":if(T.length!==4)return null;S=m(T.pop());case"rgb":return T.length!==3?null:[u(T[0]),u(T[1]),u(T[2]),S];case"hsla":if(T.length!==4)return null;S=m(T.pop());case"hsl":if(T.length!==3)return null;var M=(parseFloat(T[0])%360+360)%360/360,O=m(T[1]),V=m(T[2]),X=V<=.5?V*(O+1):V+O-V*O,Z=V*2-X;return[o(r(Z,X,M+1/3)*255),o(r(Z,X,M)*255),o(r(Z,X,M-1/3)*255),S];default:return null}}return null}try{e.parseCSSColor=f}catch{}});class su{constructor(e,t,o,l=1){this.r=e,this.g=t,this.b=o,this.a=l}static parse(e){if(!e)return;if(e instanceof su)return e;if(typeof e!="string")return;const t=Lk.parseCSSColor(e);if(!!t)return new su(t[0]/255*t[3],t[1]/255*t[3],t[2]/255*t[3],t[3])}toString(){const[e,t,o,l]=this.toArray();return`rgba(${Math.round(e)},${Math.round(t)},${Math.round(o)},${l})`}toArray(){const{r:e,g:t,b:o,a:l}=this;return l===0?[0,0,0,0]:[e*255/l,t*255/l,o*255/l,l]}toArray01(){const{r:e,g:t,b:o,a:l}=this;return l===0?[0,0,0,0]:[e/l,t/l,o/l,l]}toArray01PremultipliedAlpha(){const{r:e,g:t,b:o,a:l}=this;return[e,t,o,l]}}su.black=new su(0,0,0,1);su.white=new su(1,1,1,1);su.transparent=new su(0,0,0,0);su.red=new su(1,0,0,1);su.blue=new su(0,0,1,1);var $a=su;class yg{constructor(e,t,o){e?this.sensitivity=t?"variant":"case":this.sensitivity=t?"accent":"base",this.locale=o,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(e,t){return this.collator.compare(e,t)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class H2{constructor(e,t,o,l,u){this.text=e.normalize?e.normalize():e,this.image=t,this.scale=o,this.fontStack=l,this.textColor=u}}class Cc{constructor(e){this.sections=e}static fromString(e){return new Cc([new H2(e,null,null,null,null)])}isEmpty(){return this.sections.length===0?!0:!this.sections.some(e=>e.text.length!==0||e.image&&e.image.name.length!==0)}static factory(e){return e instanceof Cc?e:Cc.fromString(e)}toString(){return this.sections.length===0?"":this.sections.map(e=>e.text).join("")}serialize(){const e=["format"];for(const t of this.sections){if(t.image){e.push(["image",t.image.name]);continue}e.push(t.text);const o={};t.fontStack&&(o["text-font"]=["literal",t.fontStack.split(",")]),t.scale&&(o["font-scale"]=t.scale),t.textColor&&(o["text-color"]=["rgba"].concat(t.textColor.toArray())),e.push(o)}return e}}class Mh{constructor(e){this.name=e.name,this.available=e.available}toString(){return this.name}static fromString(e){return e?new Mh({name:e,available:!1}):null}serialize(){return["image",this.name]}}function R4(i,e,t,o){return typeof i=="number"&&i>=0&&i<=255&&typeof e=="number"&&e>=0&&e<=255&&typeof t=="number"&&t>=0&&t<=255?typeof o>"u"||typeof o=="number"&&o>=0&&o<=1?null:`Invalid rgba value [${[i,e,t,o].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof o=="number"?[i,e,t,o]:[i,e,t]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function y1(i){if(i===null)return!0;if(typeof i=="string")return!0;if(typeof i=="boolean")return!0;if(typeof i=="number")return!0;if(i instanceof $a)return!0;if(i instanceof yg)return!0;if(i instanceof Cc)return!0;if(i instanceof Mh)return!0;if(Array.isArray(i)){for(const e of i)if(!y1(e))return!1;return!0}else if(typeof i=="object"){for(const e in i)if(!y1(i[e]))return!1;return!0}else return!1}function ka(i){if(i===null)return M1;if(typeof i=="string")return ho;if(typeof i=="boolean")return ro;if(typeof i=="number")return jn;if(i instanceof $a)return Th;if(i instanceof yg)return D1;if(i instanceof Cc)return O1;if(i instanceof Mh)return ip;if(Array.isArray(i)){const e=i.length;let t;for(const o of i){const l=ka(o);if(!t)t=l;else{if(t===l)continue;t=oo;break}}return ec(t||oo,e)}else return G0}function Od(i){const e=typeof i;return i===null?"":e==="string"||e==="number"||e==="boolean"?String(i):i instanceof $a||i instanceof Cc||i instanceof Mh?i.toString():JSON.stringify(i)}class _g{constructor(e,t){this.type=e,this.value=t}static parse(e,t){if(e.length!==2)return t.error(`'literal' expression requires exactly one argument, but found ${e.length-1} instead.`);if(!y1(e[1]))return t.error("invalid value");const o=e[1];let l=ka(o);const u=t.expectedType;return l.kind==="array"&&l.N===0&&u&&u.kind==="array"&&(typeof u.N!="number"||u.N===0)&&(l=u),new _g(l,o)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}serialize(){return this.type.kind==="array"||this.type.kind==="object"?["literal",this.value]:this.value instanceof $a?["rgba"].concat(this.value.toArray()):this.value instanceof Cc?this.value.serialize():this.value}}var _1=_g;class Pk{constructor(e){this.name="ExpressionEvaluationError",this.message=e}toJSON(){return this.message}}var el=Pk;const Nm={string:ho,number:jn,boolean:ro,object:G0};class vg{constructor(e,t){this.type=e,this.args=t}static parse(e,t){if(e.length<2)return t.error("Expected at least one argument.");let o=1,l;const u=e[0];if(u==="array"){let r;if(e.length>2){const _=e[1];if(typeof _!="string"||!(_ in Nm)||_==="object")return t.error('The item type argument of "array" must be one of string, number, boolean',1);r=Nm[_],o++}else r=oo;let f;if(e.length>3){if(e[2]!==null&&(typeof e[2]!="number"||e[2]<0||e[2]!==Math.floor(e[2])))return t.error('The length argument to "array" must be a positive integer literal',2);f=e[2],o++}l=ec(r,f)}else l=Nm[u];const m=[];for(;o<e.length;o++){const r=t.parse(e[o],o,oo);if(!r)return null;m.push(r)}return new vg(l,m)}evaluate(e){for(let t=0;t<this.args.length;t++){const o=this.args[t].evaluate(e);if(Wd(this.type,ka(o))){if(t===this.args.length-1)throw new el(`Expected value to be of type ${Ds(this.type)}, but found ${Ds(ka(o))} instead.`)}else return o}return null}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every(e=>e.outputDefined())}serialize(){const e=this.type,t=[e.kind];if(e.kind==="array"){const o=e.itemType;if(o.kind==="string"||o.kind==="number"||o.kind==="boolean"){t.push(o.kind);const l=e.N;(typeof l=="number"||this.args.length>1)&&t.push(l)}}return t.concat(this.args.map(o=>o.serialize()))}}var Eh=vg;class F1{constructor(e){this.type=O1,this.sections=e}static parse(e,t){if(e.length<2)return t.error("Expected at least one argument.");const o=e[1];if(!Array.isArray(o)&&typeof o=="object")return t.error("First argument must be an image or text section.");const l=[];let u=!1;for(let m=1;m<=e.length-1;++m){const r=e[m];if(u&&typeof r=="object"&&!Array.isArray(r)){u=!1;let f=null;if(r["font-scale"]&&(f=t.parse(r["font-scale"],1,jn),!f))return null;let _=null;if(r["text-font"]&&(_=t.parse(r["text-font"],1,ec(ho)),!_))return null;let b=null;if(r["text-color"]&&(b=t.parse(r["text-color"],1,Th),!b))return null;const v=l[l.length-1];v.scale=f,v.font=_,v.textColor=b}else{const f=t.parse(e[m],1,oo);if(!f)return null;const _=f.type.kind;if(_!=="string"&&_!=="value"&&_!=="null"&&_!=="resolvedImage")return t.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");u=!0,l.push({content:f,scale:null,font:null,textColor:null})}}return new F1(l)}evaluate(e){const t=o=>{const l=o.content.evaluate(e);return ka(l)===ip?new H2("",l,null,null,null):new H2(Od(l),null,o.scale?o.scale.evaluate(e):null,o.font?o.font.evaluate(e).join(","):null,o.textColor?o.textColor.evaluate(e):null)};return new Cc(this.sections.map(t))}eachChild(e){for(const t of this.sections)e(t.content),t.scale&&e(t.scale),t.font&&e(t.font),t.textColor&&e(t.textColor)}outputDefined(){return!1}serialize(){const e=["format"];for(const t of this.sections){e.push(t.content.serialize());const o={};t.scale&&(o["font-scale"]=t.scale.serialize()),t.font&&(o["text-font"]=t.font.serialize()),t.textColor&&(o["text-color"]=t.textColor.serialize()),e.push(o)}return e}}class R1{constructor(e){this.type=ip,this.input=e}static parse(e,t){if(e.length!==2)return t.error("Expected two arguments.");const o=t.parse(e[1],1,ho);return o?new R1(o):t.error("No image name provided.")}evaluate(e){const t=this.input.evaluate(e),o=Mh.fromString(t);return o&&e.availableImages&&(o.available=e.availableImages.indexOf(t)>-1),o}eachChild(e){e(this.input)}outputDefined(){return!1}serialize(){return["image",this.input.serialize()]}}const Mk={"to-boolean":ro,"to-color":Th,"to-number":jn,"to-string":ho};class bg{constructor(e,t){this.type=e,this.args=t}static parse(e,t){if(e.length<2)return t.error("Expected at least one argument.");const o=e[0];if((o==="to-boolean"||o==="to-string")&&e.length!==2)return t.error("Expected one argument.");const l=Mk[o],u=[];for(let m=1;m<e.length;m++){const r=t.parse(e[m],m,oo);if(!r)return null;u.push(r)}return new bg(l,u)}evaluate(e){if(this.type.kind==="boolean")return Boolean(this.args[0].evaluate(e));if(this.type.kind==="color"){let t,o;for(const l of this.args){if(t=l.evaluate(e),o=null,t instanceof $a)return t;if(typeof t=="string"){const u=e.parseColor(t);if(u)return u}else if(Array.isArray(t)&&(t.length<3||t.length>4?o=`Invalid rbga value ${JSON.stringify(t)}: expected an array containing either three or four numeric values.`:o=R4(t[0],t[1],t[2],t[3]),!o))return new $a(t[0]/255,t[1]/255,t[2]/255,t[3])}throw new el(o||`Could not parse color from value '${typeof t=="string"?t:String(JSON.stringify(t))}'`)}else if(this.type.kind==="number"){let t=null;for(const o of this.args){if(t=o.evaluate(e),t===null)return 0;const l=Number(t);if(!isNaN(l))return l}throw new el(`Could not convert ${JSON.stringify(t)} to number.`)}else return this.type.kind==="formatted"?Cc.fromString(Od(this.args[0].evaluate(e))):this.type.kind==="resolvedImage"?Mh.fromString(Od(this.args[0].evaluate(e))):Od(this.args[0].evaluate(e))}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every(e=>e.outputDefined())}serialize(){if(this.type.kind==="formatted")return new F1([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if(this.type.kind==="resolvedImage")return new R1(this.args[0]).serialize();const e=[`to-${this.type.kind}`];return this.eachChild(t=>{e.push(t.serialize())}),e}}var R0=bg;const Dk=["Unknown","Point","LineString","Polygon"];class Ok{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null,this.featureTileCoord=null,this.featureDistanceData=null}id(){return this.feature&&this.feature.id!==void 0?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?Dk[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}distanceFromCenter(){if(this.featureTileCoord&&this.featureDistanceData){const e=this.featureDistanceData.center,t=this.featureDistanceData.scale,{x:o,y:l}=this.featureTileCoord,u=o*t-e[0],m=l*t-e[1],r=this.featureDistanceData.bearing[0],f=this.featureDistanceData.bearing[1];return r*u+f*m}return 0}parseColor(e){let t=this._parseColorCache[e];return t||(t=this._parseColorCache[e]=$a.parse(e)),t}}var B4=Ok;class B0{constructor(e,t,o,l){this.name=e,this.type=t,this._evaluate=o,this.args=l}evaluate(e){return this._evaluate(e,this.args)}eachChild(e){this.args.forEach(e)}outputDefined(){return!1}serialize(){return[this.name].concat(this.args.map(e=>e.serialize()))}static parse(e,t){const o=e[0],l=B0.definitions[o];if(!l)return t.error(`Unknown expression "${o}". If you wanted a literal array, use ["literal", [...]].`,0);const u=Array.isArray(l)?l[0]:l.type,m=Array.isArray(l)?[[l[1],l[2]]]:l.overloads,r=m.filter(([_])=>!Array.isArray(_)||_.length===e.length-1);let f=null;for(const[_,b]of r){f=new V4(t.registry,t.path,null,t.scope);const v=[];let w=!1;for(let x=1;x<e.length;x++){const C=e[x],T=Array.isArray(_)?_[x-1]:_.type,S=f.parse(C,1+v.length,T);if(!S){w=!0;break}v.push(S)}if(!w){if(Array.isArray(_)&&_.length!==v.length){f.error(`Expected ${_.length} arguments, but found ${v.length} instead.`);continue}for(let x=0;x<v.length;x++){const C=Array.isArray(_)?_[x]:_.type,T=v[x];f.concat(x+1).checkSubtype(C,T.type)}if(f.errors.length===0)return new B0(o,u,b,v)}}if(r.length===1)t.errors.push(...f.errors);else{const b=(r.length?r:m).map(([w])=>Fk(w)).join(" | "),v=[];for(let w=1;w<e.length;w++){const x=t.parse(e[w],1+v.length);if(!x)return null;v.push(Ds(x.type))}t.error(`Expected arguments of type ${b}, but found (${v.join(", ")}) instead.`)}return null}static register(e,t){B0.definitions=t;for(const o in t)e[o]=B0}}function Fk(i){return Array.isArray(i)?`(${i.map(Ds).join(", ")})`:`(${Ds(i.type)}...)`}var td=B0;class B1{constructor(e,t,o){this.type=D1,this.locale=o,this.caseSensitive=e,this.diacriticSensitive=t}static parse(e,t){if(e.length!==2)return t.error("Expected one argument.");const o=e[1];if(typeof o!="object"||Array.isArray(o))return t.error("Collator options argument must be an object.");const l=t.parse(o["case-sensitive"]===void 0?!1:o["case-sensitive"],1,ro);if(!l)return null;const u=t.parse(o["diacritic-sensitive"]===void 0?!1:o["diacritic-sensitive"],1,ro);if(!u)return null;let m=null;return o.locale&&(m=t.parse(o.locale,1,ho),!m)?null:new B1(l,u,m)}evaluate(e){return new yg(this.caseSensitive.evaluate(e),this.diacriticSensitive.evaluate(e),this.locale?this.locale.evaluate(e):null)}eachChild(e){e(this.caseSensitive),e(this.diacriticSensitive),this.locale&&e(this.locale)}outputDefined(){return!1}serialize(){const e={};return e["case-sensitive"]=this.caseSensitive.serialize(),e["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(e.locale=this.locale.serialize()),["collator",e]}}const uf=8192;function wg(i,e){i[0]=Math.min(i[0],e[0]),i[1]=Math.min(i[1],e[1]),i[2]=Math.max(i[2],e[0]),i[3]=Math.max(i[3],e[1])}function Rk(i){return(180+i)/360}function Bk(i){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+i*Math.PI/360)))/360}function v1(i,e){return!(i[0]<=e[0]||i[2]>=e[2]||i[1]<=e[1]||i[3]>=e[3])}function zk(i,e){const t=Rk(i[0]),o=Bk(i[1]),l=Math.pow(2,e.z);return[Math.round(t*l*uf),Math.round(o*l*uf)]}function Nk(i,e,t){const o=i[0]-e[0],l=i[1]-e[1],u=i[0]-t[0],m=i[1]-t[1];return o*m-u*l===0&&o*u<=0&&l*m<=0}function jk(i,e,t){return e[1]>i[1]!=t[1]>i[1]&&i[0]<(t[0]-e[0])*(i[1]-e[1])/(t[1]-e[1])+e[0]}function xg(i,e){let t=!1;for(let o=0,l=e.length;o<l;o++){const u=e[o];for(let m=0,r=u.length;m<r-1;m++){if(Nk(i,u[m],u[m+1]))return!1;jk(i,u[m],u[m+1])&&(t=!t)}}return t}function Uk(i,e){for(let t=0;t<e.length;t++)if(xg(i,e[t]))return!0;return!1}function Vk(i,e){return i[0]*e[1]-i[1]*e[0]}function M_(i,e,t,o){const l=i[0]-t[0],u=i[1]-t[1],m=e[0]-t[0],r=e[1]-t[1],f=o[0]-t[0],_=o[1]-t[1],b=l*_-f*u,v=m*_-f*r;return b>0&&v<0||b<0&&v>0}function qk(i,e,t,o){const l=[e[0]-i[0],e[1]-i[1]],u=[o[0]-t[0],o[1]-t[1]];return Vk(u,l)===0?!1:!!(M_(i,e,t,o)&&M_(t,o,i,e))}function Hk(i,e,t){for(const o of t)for(let l=0;l<o.length-1;++l)if(qk(i,e,o[l],o[l+1]))return!0;return!1}function z4(i,e){for(let t=0;t<i.length;++t)if(!xg(i[t],e))return!1;for(let t=0;t<i.length-1;++t)if(Hk(i[t],i[t+1],e))return!1;return!0}function Gk(i,e){for(let t=0;t<e.length;t++)if(z4(i,e[t]))return!0;return!1}function Ag(i,e,t){const o=[];for(let l=0;l<i.length;l++){const u=[];for(let m=0;m<i[l].length;m++){const r=zk(i[l][m],t);wg(e,r),u.push(r)}o.push(u)}return o}function N4(i,e,t){const o=[];for(let l=0;l<i.length;l++){const u=Ag(i[l],e,t);o.push(u)}return o}function j4(i,e,t,o){if(i[0]<t[0]||i[0]>t[2]){const l=o*.5;let u=i[0]-t[0]>l?-o:t[0]-i[0]>l?o:0;u===0&&(u=i[0]-t[2]>l?-o:t[2]-i[0]>l?o:0),i[0]+=u}wg(e,i)}function Wk(i){i[0]=i[1]=1/0,i[2]=i[3]=-1/0}function D_(i,e,t,o){const l=Math.pow(2,o.z)*uf,u=[o.x*uf,o.y*uf],m=[];if(!i)return m;for(const r of i)for(const f of r){const _=[f.x+u[0],f.y+u[1]];j4(_,e,t,l),m.push(_)}return m}function O_(i,e,t,o){const l=Math.pow(2,o.z)*uf,u=[o.x*uf,o.y*uf],m=[];if(!i)return m;for(const r of i){const f=[];for(const _ of r){const b=[_.x+u[0],_.y+u[1]];wg(e,b),f.push(b)}m.push(f)}if(e[2]-e[0]<=l/2){Wk(e);for(const r of m)for(const f of r)j4(f,e,t,l)}return m}function Xk(i,e){const t=[1/0,1/0,-1/0,-1/0],o=[1/0,1/0,-1/0,-1/0],l=i.canonicalID();if(!l)return!1;if(e.type==="Polygon"){const u=Ag(e.coordinates,o,l),m=D_(i.geometry(),t,o,l);if(!v1(t,o))return!1;for(const r of m)if(!xg(r,u))return!1}if(e.type==="MultiPolygon"){const u=N4(e.coordinates,o,l),m=D_(i.geometry(),t,o,l);if(!v1(t,o))return!1;for(const r of m)if(!Uk(r,u))return!1}return!0}function Yk(i,e){const t=[1/0,1/0,-1/0,-1/0],o=[1/0,1/0,-1/0,-1/0],l=i.canonicalID();if(!l)return!1;if(e.type==="Polygon"){const u=Ag(e.coordinates,o,l),m=O_(i.geometry(),t,o,l);if(!v1(t,o))return!1;for(const r of m)if(!z4(r,u))return!1}if(e.type==="MultiPolygon"){const u=N4(e.coordinates,o,l),m=O_(i.geometry(),t,o,l);if(!v1(t,o))return!1;for(const r of m)if(!Gk(r,u))return!1}return!0}class Fd{constructor(e,t){this.type=ro,this.geojson=e,this.geometries=t}static parse(e,t){if(e.length!==2)return t.error(`'within' expression requires exactly one argument, but found ${e.length-1} instead.`);if(y1(e[1])){const o=e[1];if(o.type==="FeatureCollection")for(let l=0;l<o.features.length;++l){const u=o.features[l].geometry.type;if(u==="Polygon"||u==="MultiPolygon")return new Fd(o,o.features[l].geometry)}else if(o.type==="Feature"){const l=o.geometry.type;if(l==="Polygon"||l==="MultiPolygon")return new Fd(o,o.geometry)}else if(o.type==="Polygon"||o.type==="MultiPolygon")return new Fd(o,o)}return t.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(e){if(e.geometry()!=null&&e.canonicalID()!=null){if(e.geometryType()==="Point")return Xk(e,this.geometries);if(e.geometryType()==="LineString")return Yk(e,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}serialize(){return["within",this.geojson]}}var kg=Fd;function Sg(i){if(i instanceof td){if(i.name==="get"&&i.args.length===1)return!1;if(i.name==="feature-state")return!1;if(i.name==="has"&&i.args.length===1)return!1;if(i.name==="properties"||i.name==="geometry-type"||i.name==="id")return!1;if(/^filter-/.test(i.name))return!1}if(i instanceof kg)return!1;let e=!0;return i.eachChild(t=>{e&&!Sg(t)&&(e=!1)}),e}function Cg(i){if(i instanceof td&&i.name==="feature-state")return!1;let e=!0;return i.eachChild(t=>{e&&!Cg(t)&&(e=!1)}),e}function Eg(i,e){if(i instanceof td&&e.indexOf(i.name)>=0)return!1;let t=!0;return i.eachChild(o=>{t&&!Eg(o,e)&&(t=!1)}),t}class Ig{constructor(e,t){this.type=t.type,this.name=e,this.boundExpression=t}static parse(e,t){if(e.length!==2||typeof e[1]!="string")return t.error("'var' expression requires exactly one string literal argument.");const o=e[1];return t.scope.has(o)?new Ig(o,t.scope.get(o)):t.error(`Unknown variable "${o}". Make sure "${o}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(e){return this.boundExpression.evaluate(e)}eachChild(){}outputDefined(){return!1}serialize(){return["var",this.name]}}var U4=Ig;class Tg{constructor(e,t=[],o,l=new Ek,u=[]){this.registry=e,this.path=t,this.key=t.map(m=>`[${m}]`).join(""),this.scope=l,this.errors=u,this.expectedType=o}parse(e,t,o,l,u={}){return t?this.concat(t,o,l)._parse(e,u):this._parse(e,u)}_parse(e,t){(e===null||typeof e=="string"||typeof e=="boolean"||typeof e=="number")&&(e=["literal",e]);function o(l,u,m){return m==="assert"?new Eh(u,[l]):m==="coerce"?new R0(u,[l]):l}if(Array.isArray(e)){if(e.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const l=e[0];if(typeof l!="string")return this.error(`Expression name must be a string, but found ${typeof l} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const u=this.registry[l];if(u){let m=u.parse(e,this);if(!m)return null;if(this.expectedType){const r=this.expectedType,f=m.type;if((r.kind==="string"||r.kind==="number"||r.kind==="boolean"||r.kind==="object"||r.kind==="array")&&f.kind==="value")m=o(m,r,t.typeAnnotation||"assert");else if((r.kind==="color"||r.kind==="formatted"||r.kind==="resolvedImage")&&(f.kind==="value"||f.kind==="string"))m=o(m,r,t.typeAnnotation||"coerce");else if(this.checkSubtype(r,f))return null}if(!(m instanceof _1)&&m.type.kind!=="resolvedImage"&&G2(m)){const r=new B4;try{m=new _1(m.type,m.evaluate(r))}catch(f){return this.error(f.message),null}}return m}return this.error(`Unknown expression "${l}". If you wanted a literal array, use ["literal", [...]].`,0)}else return typeof e>"u"?this.error("'undefined' value invalid. Use null instead."):typeof e=="object"?this.error('Bare objects invalid. Use ["literal", {...}] instead.'):this.error(`Expected an array, but found ${typeof e} instead.`)}concat(e,t,o){const l=typeof e=="number"?this.path.concat(e):this.path,u=o?this.scope.concat(o):this.scope;return new Tg(this.registry,l,t||null,u,this.errors)}error(e,...t){const o=`${this.key}${t.map(l=>`[${l}]`).join("")}`;this.errors.push(new Kc(o,e))}checkSubtype(e,t){const o=Wd(e,t);return o&&this.error(o),o}}var V4=Tg;function G2(i){if(i instanceof U4)return G2(i.boundExpression);if(i instanceof td&&i.name==="error")return!1;if(i instanceof B1)return!1;if(i instanceof kg)return!1;const e=i instanceof R0||i instanceof Eh;let t=!0;return i.eachChild(o=>{e?t=t&&G2(o):t=t&&o instanceof _1}),t?Sg(i)&&Eg(i,["zoom","heatmap-density","line-progress","sky-radial-progress","accumulated","is-supported-script","pitch","distance-from-center"]):!1}function z1(i,e){const t=i.length-1;let o=0,l=t,u=0,m,r;for(;o<=l;)if(u=Math.floor((o+l)/2),m=i[u],r=i[u+1],m<=e){if(u===t||e<r)return u;o=u+1}else if(m>e)l=u-1;else throw new el("Input is not a number.");return 0}class Lg{constructor(e,t,o){this.type=e,this.input=t,this.labels=[],this.outputs=[];for(const[l,u]of o)this.labels.push(l),this.outputs.push(u)}static parse(e,t){if(e.length-1<4)return t.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if((e.length-1)%2!==0)return t.error("Expected an even number of arguments.");const o=t.parse(e[1],1,jn);if(!o)return null;const l=[];let u=null;t.expectedType&&t.expectedType.kind!=="value"&&(u=t.expectedType);for(let m=1;m<e.length;m+=2){const r=m===1?-1/0:e[m],f=e[m+1],_=m,b=m+1;if(typeof r!="number")return t.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',_);if(l.length&&l[l.length-1][0]>=r)return t.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',_);const v=t.parse(f,b,u);if(!v)return null;u=u||v.type,l.push([r,v])}return new Lg(u,o,l)}evaluate(e){const t=this.labels,o=this.outputs;if(t.length===1)return o[0].evaluate(e);const l=this.input.evaluate(e);if(l<=t[0])return o[0].evaluate(e);const u=t.length;if(l>=t[u-1])return o[u-1].evaluate(e);const m=z1(t,l);return o[m].evaluate(e)}eachChild(e){e(this.input);for(const t of this.outputs)e(t)}outputDefined(){return this.outputs.every(e=>e.outputDefined())}serialize(){const e=["step",this.input.serialize()];for(let t=0;t<this.labels.length;t++)t>0&&e.push(this.labels[t]),e.push(this.outputs[t].serialize());return e}}var q4=Lg,Zk=id;function id(i,e,t,o){this.cx=3*i,this.bx=3*(t-i)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*e,this.by=3*(o-e)-this.cy,this.ay=1-this.cy-this.by,this.p1x=i,this.p1y=o,this.p2x=t,this.p2y=o}id.prototype.sampleCurveX=function(i){return((this.ax*i+this.bx)*i+this.cx)*i};id.prototype.sampleCurveY=function(i){return((this.ay*i+this.by)*i+this.cy)*i};id.prototype.sampleCurveDerivativeX=function(i){return(3*this.ax*i+2*this.bx)*i+this.cx};id.prototype.solveCurveX=function(i,e){typeof e>"u"&&(e=1e-6);var t,o,l,u,m;for(l=i,m=0;m<8;m++){if(u=this.sampleCurveX(l)-i,Math.abs(u)<e)return l;var r=this.sampleCurveDerivativeX(l);if(Math.abs(r)<1e-6)break;l=l-u/r}if(t=0,o=1,l=i,l<t)return t;if(l>o)return o;for(;t<o;){if(u=this.sampleCurveX(l),Math.abs(u-i)<e)return l;i>u?t=l:o=l,l=(o-t)*.5+t}return l};id.prototype.solve=function(i,e){return this.sampleCurveY(this.solveCurveX(i,e))};function Mu(i,e,t){return i*(1-t)+e*t}function Kk(i,e,t){return new $a(Mu(i.r,e.r,t),Mu(i.g,e.g,t),Mu(i.b,e.b,t),Mu(i.a,e.a,t))}function Jk(i,e,t){return i.map((o,l)=>Mu(o,e[l],t))}var H4=Object.freeze({__proto__:null,number:Mu,color:Kk,array:Jk});const G4=.95047,W4=1,X4=1.08883,Y4=4/29,W0=6/29,Z4=3*W0*W0,Qk=W0*W0*W0,$k=Math.PI/180,eS=180/Math.PI;function jm(i){return i>Qk?Math.pow(i,1/3):i/Z4+Y4}function Um(i){return i>W0?i*i*i:Z4*(i-Y4)}function Vm(i){return 255*(i<=.0031308?12.92*i:1.055*Math.pow(i,1/2.4)-.055)}function qm(i){return i/=255,i<=.04045?i/12.92:Math.pow((i+.055)/1.055,2.4)}function K4(i){const e=qm(i.r),t=qm(i.g),o=qm(i.b),l=jm((.4124564*e+.3575761*t+.1804375*o)/G4),u=jm((.2126729*e+.7151522*t+.072175*o)/W4),m=jm((.0193339*e+.119192*t+.9503041*o)/X4);return{l:116*u-16,a:500*(l-u),b:200*(u-m),alpha:i.a}}function J4(i){let e=(i.l+16)/116,t=isNaN(i.a)?e:e+i.a/500,o=isNaN(i.b)?e:e-i.b/200;return e=W4*Um(e),t=G4*Um(t),o=X4*Um(o),new $a(Vm(3.2404542*t-1.5371385*e-.4985314*o),Vm(-.969266*t+1.8760108*e+.041556*o),Vm(.0556434*t-.2040259*e+1.0572252*o),i.alpha)}function tS(i,e,t){return{l:Mu(i.l,e.l,t),a:Mu(i.a,e.a,t),b:Mu(i.b,e.b,t),alpha:Mu(i.alpha,e.alpha,t)}}function iS(i){const{l:e,a:t,b:o}=K4(i),l=Math.atan2(o,t)*eS;return{h:l<0?l+360:l,c:Math.sqrt(t*t+o*o),l:e,alpha:i.a}}function nS(i){const e=i.h*$k,t=i.c,o=i.l;return J4({l:o,a:Math.cos(e)*t,b:Math.sin(e)*t,alpha:i.alpha})}function rS(i,e,t){const o=e-i;return i+t*(o>180||o<-180?o-360*Math.round(o/360):o)}function oS(i,e,t){return{h:rS(i.h,e.h,t),c:Mu(i.c,e.c,t),l:Mu(i.l,e.l,t),alpha:Mu(i.alpha,e.alpha,t)}}const Td={forward:K4,reverse:J4,interpolate:tS},Ld={forward:iS,reverse:nS,interpolate:oS};var Q4=Object.freeze({__proto__:null,lab:Td,hcl:Ld});class b1{constructor(e,t,o,l,u){this.type=e,this.operator=t,this.interpolation=o,this.input=l,this.labels=[],this.outputs=[];for(const[m,r]of u)this.labels.push(m),this.outputs.push(r)}static interpolationFactor(e,t,o,l){let u=0;if(e.name==="exponential")u=Hm(t,e.base,o,l);else if(e.name==="linear")u=Hm(t,1,o,l);else if(e.name==="cubic-bezier"){const m=e.controlPoints;u=new Zk(m[0],m[1],m[2],m[3]).solve(Hm(t,1,o,l))}return u}static parse(e,t){let[o,l,u,...m]=e;if(!Array.isArray(l)||l.length===0)return t.error("Expected an interpolation type expression.",1);if(l[0]==="linear")l={name:"linear"};else if(l[0]==="exponential"){const _=l[1];if(typeof _!="number")return t.error("Exponential interpolation requires a numeric base.",1,1);l={name:"exponential",base:_}}else if(l[0]==="cubic-bezier"){const _=l.slice(1);if(_.length!==4||_.some(b=>typeof b!="number"||b<0||b>1))return t.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);l={name:"cubic-bezier",controlPoints:_}}else return t.error(`Unknown interpolation type ${String(l[0])}`,1,0);if(e.length-1<4)return t.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if((e.length-1)%2!==0)return t.error("Expected an even number of arguments.");if(u=t.parse(u,2,jn),!u)return null;const r=[];let f=null;o==="interpolate-hcl"||o==="interpolate-lab"?f=Th:t.expectedType&&t.expectedType.kind!=="value"&&(f=t.expectedType);for(let _=0;_<m.length;_+=2){const b=m[_],v=m[_+1],w=_+3,x=_+4;if(typeof b!="number")return t.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',w);if(r.length&&r[r.length-1][0]>=b)return t.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',w);const C=t.parse(v,x,f);if(!C)return null;f=f||C.type,r.push([b,C])}return f.kind!=="number"&&f.kind!=="color"&&!(f.kind==="array"&&f.itemType.kind==="number"&&typeof f.N=="number")?t.error(`Type ${Ds(f)} is not interpolatable.`):new b1(f,o,l,u,r)}evaluate(e){const t=this.labels,o=this.outputs;if(t.length===1)return o[0].evaluate(e);const l=this.input.evaluate(e);if(l<=t[0])return o[0].evaluate(e);const u=t.length;if(l>=t[u-1])return o[u-1].evaluate(e);const m=z1(t,l),r=t[m],f=t[m+1],_=b1.interpolationFactor(this.interpolation,l,r,f),b=o[m].evaluate(e),v=o[m+1].evaluate(e);return this.operator==="interpolate"?H4[this.type.kind.toLowerCase()](b,v,_):this.operator==="interpolate-hcl"?Ld.reverse(Ld.interpolate(Ld.forward(b),Ld.forward(v),_)):Td.reverse(Td.interpolate(Td.forward(b),Td.forward(v),_))}eachChild(e){e(this.input);for(const t of this.outputs)e(t)}outputDefined(){return this.outputs.every(e=>e.outputDefined())}serialize(){let e;this.interpolation.name==="linear"?e=["linear"]:this.interpolation.name==="exponential"?this.interpolation.base===1?e=["linear"]:e=["exponential",this.interpolation.base]:e=["cubic-bezier"].concat(this.interpolation.controlPoints);const t=[this.operator,e,this.input.serialize()];for(let o=0;o<this.labels.length;o++)t.push(this.labels[o],this.outputs[o].serialize());return t}}function Hm(i,e,t,o){const l=o-t,u=i-t;return l===0?0:e===1?u/l:(Math.pow(e,u)-1)/(Math.pow(e,l)-1)}var Lh=b1;class w1{constructor(e,t){this.type=e,this.args=t}static parse(e,t){if(e.length<2)return t.error("Expectected at least one argument.");let o=null;const l=t.expectedType;l&&l.kind!=="value"&&(o=l);const u=[];for(const r of e.slice(1)){const f=t.parse(r,1+u.length,o,void 0,{typeAnnotation:"omit"});if(!f)return null;o=o||f.type,u.push(f)}return l&&u.some(r=>Wd(l,r.type))?new w1(oo,u):new w1(o,u)}evaluate(e){let t=null,o=0,l;for(const u of this.args){if(o++,t=u.evaluate(e),t&&t instanceof Mh&&!t.available&&(l||(l=t),t=null,o===this.args.length))return l;if(t!==null)break}return t}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every(e=>e.outputDefined())}serialize(){const e=["coalesce"];return this.eachChild(t=>{e.push(t.serialize())}),e}}var $4=w1;class Pg{constructor(e,t){this.type=t.type,this.bindings=[].concat(e),this.result=t}evaluate(e){return this.result.evaluate(e)}eachChild(e){for(const t of this.bindings)e(t[1]);e(this.result)}static parse(e,t){if(e.length<4)return t.error(`Expected at least 3 arguments, but found ${e.length-1} instead.`);const o=[];for(let u=1;u<e.length-1;u+=2){const m=e[u];if(typeof m!="string")return t.error(`Expected string, but found ${typeof m} instead.`,u);if(/[^a-zA-Z0-9_]/.test(m))return t.error("Variable names must contain only alphanumeric characters or '_'.",u);const r=t.parse(e[u+1],u+1);if(!r)return null;o.push([m,r])}const l=t.parse(e[e.length-1],e.length-1,t.expectedType,o);return l?new Pg(o,l):null}outputDefined(){return this.result.outputDefined()}serialize(){const e=["let"];for(const[t,o]of this.bindings)e.push(t,o.serialize());return e.push(this.result.serialize()),e}}var ew=Pg;class Mg{constructor(e,t,o){this.type=e,this.index=t,this.input=o}static parse(e,t){if(e.length!==3)return t.error(`Expected 2 arguments, but found ${e.length-1} instead.`);const o=t.parse(e[1],1,jn),l=t.parse(e[2],2,ec(t.expectedType||oo));if(!o||!l)return null;const u=l.type;return new Mg(u.itemType,o,l)}evaluate(e){const t=this.index.evaluate(e),o=this.input.evaluate(e);if(t<0)throw new el(`Array index out of bounds: ${t} < 0.`);if(t>=o.length)throw new el(`Array index out of bounds: ${t} > ${o.length-1}.`);if(t!==Math.floor(t))throw new el(`Array index must be an integer, but found ${t} instead.`);return o[t]}eachChild(e){e(this.index),e(this.input)}outputDefined(){return!1}serialize(){return["at",this.index.serialize(),this.input.serialize()]}}var sS=Mg;class Dg{constructor(e,t){this.type=ro,this.needle=e,this.haystack=t}static parse(e,t){if(e.length!==3)return t.error(`Expected 2 arguments, but found ${e.length-1} instead.`);const o=t.parse(e[1],1,oo),l=t.parse(e[2],2,oo);return!o||!l?null:gg(o.type,[ro,ho,jn,M1,oo])?new Dg(o,l):t.error(`Expected first argument to be of type boolean, string, number or null, but found ${Ds(o.type)} instead`)}evaluate(e){const t=this.needle.evaluate(e),o=this.haystack.evaluate(e);if(o==null)return!1;if(!Xd(t,["boolean","string","number","null"]))throw new el(`Expected first argument to be of type boolean, string, number or null, but found ${Ds(ka(t))} instead.`);if(!Xd(o,["string","array"]))throw new el(`Expected second argument to be of type array or string, but found ${Ds(ka(o))} instead.`);return o.indexOf(t)>=0}eachChild(e){e(this.needle),e(this.haystack)}outputDefined(){return!0}serialize(){return["in",this.needle.serialize(),this.haystack.serialize()]}}var aS=Dg;class x1{constructor(e,t,o){this.type=jn,this.needle=e,this.haystack=t,this.fromIndex=o}static parse(e,t){if(e.length<=2||e.length>=5)return t.error(`Expected 3 or 4 arguments, but found ${e.length-1} instead.`);const o=t.parse(e[1],1,oo),l=t.parse(e[2],2,oo);if(!o||!l)return null;if(!gg(o.type,[ro,ho,jn,M1,oo]))return t.error(`Expected first argument to be of type boolean, string, number or null, but found ${Ds(o.type)} instead`);if(e.length===4){const u=t.parse(e[3],3,jn);return u?new x1(o,l,u):null}else return new x1(o,l)}evaluate(e){const t=this.needle.evaluate(e),o=this.haystack.evaluate(e);if(!Xd(t,["boolean","string","number","null"]))throw new el(`Expected first argument to be of type boolean, string, number or null, but found ${Ds(ka(t))} instead.`);if(!Xd(o,["string","array"]))throw new el(`Expected second argument to be of type array or string, but found ${Ds(ka(o))} instead.`);if(this.fromIndex){const l=this.fromIndex.evaluate(e);return o.indexOf(t,l)}return o.indexOf(t)}eachChild(e){e(this.needle),e(this.haystack),this.fromIndex&&e(this.fromIndex)}outputDefined(){return!1}serialize(){if(this.fromIndex!=null&&this.fromIndex!==void 0){const e=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),e]}return["index-of",this.needle.serialize(),this.haystack.serialize()]}}var lS=x1;class Og{constructor(e,t,o,l,u,m){this.inputType=e,this.type=t,this.input=o,this.cases=l,this.outputs=u,this.otherwise=m}static parse(e,t){if(e.length<5)return t.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if(e.length%2!==1)return t.error("Expected an even number of arguments.");let o,l;t.expectedType&&t.expectedType.kind!=="value"&&(l=t.expectedType);const u={},m=[];for(let _=2;_<e.length-1;_+=2){let b=e[_];const v=e[_+1];Array.isArray(b)||(b=[b]);const w=t.concat(_);if(b.length===0)return w.error("Expected at least one branch label.");for(const C of b){if(typeof C!="number"&&typeof C!="string")return w.error("Branch labels must be numbers or strings.");if(typeof C=="number"&&Math.abs(C)>Number.MAX_SAFE_INTEGER)return w.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof C=="number"&&Math.floor(C)!==C)return w.error("Numeric branch labels must be integer values.");if(!o)o=ka(C);else if(w.checkSubtype(o,ka(C)))return null;if(typeof u[String(C)]<"u")return w.error("Branch labels must be unique.");u[String(C)]=m.length}const x=t.parse(v,_,l);if(!x)return null;l=l||x.type,m.push(x)}const r=t.parse(e[1],1,oo);if(!r)return null;const f=t.parse(e[e.length-1],e.length-1,l);return!f||r.type.kind!=="value"&&t.concat(1).checkSubtype(o,r.type)?null:new Og(o,l,r,u,m,f)}evaluate(e){const t=this.input.evaluate(e);return(ka(t)===this.inputType&&this.outputs[this.cases[t]]||this.otherwise).evaluate(e)}eachChild(e){e(this.input),this.outputs.forEach(e),e(this.otherwise)}outputDefined(){return this.outputs.every(e=>e.outputDefined())&&this.otherwise.outputDefined()}serialize(){const e=["match",this.input.serialize()],t=Object.keys(this.cases).sort(),o=[],l={};for(const m of t){const r=l[this.cases[m]];r===void 0?(l[this.cases[m]]=o.length,o.push([this.cases[m],[m]])):o[r][1].push(m)}const u=m=>this.inputType.kind==="number"?Number(m):m;for(const[m,r]of o)r.length===1?e.push(u(r[0])):e.push(r.map(u)),e.push(this.outputs[m].serialize());return e.push(this.otherwise.serialize()),e}}var uS=Og;class Fg{constructor(e,t,o){this.type=e,this.branches=t,this.otherwise=o}static parse(e,t){if(e.length<4)return t.error(`Expected at least 3 arguments, but found only ${e.length-1}.`);if(e.length%2!==0)return t.error("Expected an odd number of arguments.");let o;t.expectedType&&t.expectedType.kind!=="value"&&(o=t.expectedType);const l=[];for(let m=1;m<e.length-1;m+=2){const r=t.parse(e[m],m,ro);if(!r)return null;const f=t.parse(e[m+1],m+1,o);if(!f)return null;l.push([r,f]),o=o||f.type}const u=t.parse(e[e.length-1],e.length-1,o);return u?new Fg(o,l,u):null}evaluate(e){for(const[t,o]of this.branches)if(t.evaluate(e))return o.evaluate(e);return this.otherwise.evaluate(e)}eachChild(e){for(const[t,o]of this.branches)e(t),e(o);e(this.otherwise)}outputDefined(){return this.branches.every(([e,t])=>t.outputDefined())&&this.otherwise.outputDefined()}serialize(){const e=["case"];return this.eachChild(t=>{e.push(t.serialize())}),e}}var cS=Fg;class A1{constructor(e,t,o,l){this.type=e,this.input=t,this.beginIndex=o,this.endIndex=l}static parse(e,t){if(e.length<=2||e.length>=5)return t.error(`Expected 3 or 4 arguments, but found ${e.length-1} instead.`);const o=t.parse(e[1],1,oo),l=t.parse(e[2],2,jn);if(!o||!l)return null;if(!gg(o.type,[ec(oo),ho,oo]))return t.error(`Expected first argument to be of type array or string, but found ${Ds(o.type)} instead`);if(e.length===4){const u=t.parse(e[3],3,jn);return u?new A1(o.type,o,l,u):null}else return new A1(o.type,o,l)}evaluate(e){const t=this.input.evaluate(e),o=this.beginIndex.evaluate(e);if(!Xd(t,["string","array"]))throw new el(`Expected first argument to be of type array or string, but found ${Ds(ka(t))} instead.`);if(this.endIndex){const l=this.endIndex.evaluate(e);return t.slice(o,l)}return t.slice(o)}eachChild(e){e(this.input),e(this.beginIndex),this.endIndex&&e(this.endIndex)}outputDefined(){return!1}serialize(){if(this.endIndex!=null&&this.endIndex!==void 0){const e=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),e]}return["slice",this.input.serialize(),this.beginIndex.serialize()]}}var hS=A1;function F_(i,e){return i==="=="||i==="!="?e.kind==="boolean"||e.kind==="string"||e.kind==="number"||e.kind==="null"||e.kind==="value":e.kind==="string"||e.kind==="number"||e.kind==="value"}function fS(i,e,t){return e===t}function dS(i,e,t){return e!==t}function pS(i,e,t){return e<t}function mS(i,e,t){return e>t}function gS(i,e,t){return e<=t}function yS(i,e,t){return e>=t}function tw(i,e,t,o){return o.compare(e,t)===0}function _S(i,e,t,o){return!tw(i,e,t,o)}function vS(i,e,t,o){return o.compare(e,t)<0}function bS(i,e,t,o){return o.compare(e,t)>0}function wS(i,e,t,o){return o.compare(e,t)<=0}function xS(i,e,t,o){return o.compare(e,t)>=0}function nd(i,e,t){const o=i!=="=="&&i!=="!=";return class iw{constructor(u,m,r){this.type=ro,this.lhs=u,this.rhs=m,this.collator=r,this.hasUntypedArgument=u.type.kind==="value"||m.type.kind==="value"}static parse(u,m){if(u.length!==3&&u.length!==4)return m.error("Expected two or three arguments.");const r=u[0];let f=m.parse(u[1],1,oo);if(!f)return null;if(!F_(r,f.type))return m.concat(1).error(`"${r}" comparisons are not supported for type '${Ds(f.type)}'.`);let _=m.parse(u[2],2,oo);if(!_)return null;if(!F_(r,_.type))return m.concat(2).error(`"${r}" comparisons are not supported for type '${Ds(_.type)}'.`);if(f.type.kind!==_.type.kind&&f.type.kind!=="value"&&_.type.kind!=="value")return m.error(`Cannot compare types '${Ds(f.type)}' and '${Ds(_.type)}'.`);o&&(f.type.kind==="value"&&_.type.kind!=="value"?f=new Eh(_.type,[f]):f.type.kind!=="value"&&_.type.kind==="value"&&(_=new Eh(f.type,[_])));let b=null;if(u.length===4){if(f.type.kind!=="string"&&_.type.kind!=="string"&&f.type.kind!=="value"&&_.type.kind!=="value")return m.error("Cannot use collator to compare non-string types.");if(b=m.parse(u[3],3,D1),!b)return null}return new iw(f,_,b)}evaluate(u){const m=this.lhs.evaluate(u),r=this.rhs.evaluate(u);if(o&&this.hasUntypedArgument){const f=ka(m),_=ka(r);if(f.kind!==_.kind||!(f.kind==="string"||f.kind==="number"))throw new el(`Expected arguments for "${i}" to be (string, string) or (number, number), but found (${f.kind}, ${_.kind}) instead.`)}if(this.collator&&!o&&this.hasUntypedArgument){const f=ka(m),_=ka(r);if(f.kind!=="string"||_.kind!=="string")return e(u,m,r)}return this.collator?t(u,m,r,this.collator.evaluate(u)):e(u,m,r)}eachChild(u){u(this.lhs),u(this.rhs),this.collator&&u(this.collator)}outputDefined(){return!0}serialize(){const u=[i];return this.eachChild(m=>{u.push(m.serialize())}),u}}}const AS=nd("==",fS,tw),kS=nd("!=",dS,_S),SS=nd("<",pS,vS),CS=nd(">",mS,bS),ES=nd("<=",gS,wS),IS=nd(">=",yS,xS);class Rg{constructor(e,t,o,l,u,m){this.type=ho,this.number=e,this.locale=t,this.currency=o,this.unit=l,this.minFractionDigits=u,this.maxFractionDigits=m}static parse(e,t){if(e.length!==3)return t.error("Expected two arguments.");const o=t.parse(e[1],1,jn);if(!o)return null;const l=e[2];if(typeof l!="object"||Array.isArray(l))return t.error("NumberFormat options argument must be an object.");let u=null;if(l.locale&&(u=t.parse(l.locale,1,ho),!u))return null;let m=null;if(l.currency&&(m=t.parse(l.currency,1,ho),!m))return null;let r=null;if(l.unit&&(r=t.parse(l.unit,1,ho),!r))return null;let f=null;if(l["min-fraction-digits"]&&(f=t.parse(l["min-fraction-digits"],1,jn),!f))return null;let _=null;return l["max-fraction-digits"]&&(_=t.parse(l["max-fraction-digits"],1,jn),!_)?null:new Rg(o,u,m,r,f,_)}evaluate(e){return new Intl.NumberFormat(this.locale?this.locale.evaluate(e):[],{style:this.currency&&"currency"||this.unit&&"unit"||"decimal",currency:this.currency?this.currency.evaluate(e):void 0,unit:this.unit?this.unit.evaluate(e):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(e):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(e):void 0}).format(this.number.evaluate(e))}eachChild(e){e(this.number),this.locale&&e(this.locale),this.currency&&e(this.currency),this.unit&&e(this.unit),this.minFractionDigits&&e(this.minFractionDigits),this.maxFractionDigits&&e(this.maxFractionDigits)}outputDefined(){return!1}serialize(){const e={};return this.locale&&(e.locale=this.locale.serialize()),this.currency&&(e.currency=this.currency.serialize()),this.unit&&(e.unit=this.unit.serialize()),this.minFractionDigits&&(e["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(e["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),e]}}class Bg{constructor(e){this.type=jn,this.input=e}static parse(e,t){if(e.length!==2)return t.error(`Expected 1 argument, but found ${e.length-1} instead.`);const o=t.parse(e[1],1);return o?o.type.kind!=="array"&&o.type.kind!=="string"&&o.type.kind!=="value"?t.error(`Expected argument of type string or array, but found ${Ds(o.type)} instead.`):new Bg(o):null}evaluate(e){const t=this.input.evaluate(e);if(typeof t=="string")return t.length;if(Array.isArray(t))return t.length;throw new el(`Expected value to be of type string or array, but found ${Ds(ka(t))} instead.`)}eachChild(e){e(this.input)}outputDefined(){return!1}serialize(){const e=["length"];return this.eachChild(t=>{e.push(t.serialize())}),e}}var TS=Bg;const nw={"==":AS,"!=":kS,">":CS,"<":SS,">=":IS,"<=":ES,array:Eh,at:sS,boolean:Eh,case:cS,coalesce:$4,collator:B1,format:F1,image:R1,in:aS,"index-of":lS,interpolate:Lh,"interpolate-hcl":Lh,"interpolate-lab":Lh,length:TS,let:ew,literal:_1,match:uS,number:Eh,"number-format":Rg,object:Eh,slice:hS,step:q4,string:Eh,"to-boolean":R0,"to-color":R0,"to-number":R0,"to-string":R0,var:U4,within:kg};function R_(i,[e,t,o,l]){e=e.evaluate(i),t=t.evaluate(i),o=o.evaluate(i);const u=l?l.evaluate(i):1,m=R4(e,t,o,u);if(m)throw new el(m);return new $a(e/255*u,t/255*u,o/255*u,u)}function B_(i,e){return i in e}function Gm(i,e){const t=e[i];return typeof t>"u"?null:t}function LS(i,e,t,o){for(;t<=o;){const l=t+o>>1;if(e[l]===i)return!0;e[l]>i?o=l-1:t=l+1}return!1}function Of(i){return{type:i}}td.register(nw,{error:[Ik,[ho],(i,[e])=>{throw new el(e.evaluate(i))}],typeof:[ho,[oo],(i,[e])=>Ds(ka(e.evaluate(i)))],"to-rgba":[ec(jn,4),[Th],(i,[e])=>e.evaluate(i).toArray()],rgb:[Th,[jn,jn,jn],R_],rgba:[Th,[jn,jn,jn,jn],R_],has:{type:ro,overloads:[[[ho],(i,[e])=>B_(e.evaluate(i),i.properties())],[[ho,G0],(i,[e,t])=>B_(e.evaluate(i),t.evaluate(i))]]},get:{type:oo,overloads:[[[ho],(i,[e])=>Gm(e.evaluate(i),i.properties())],[[ho,G0],(i,[e,t])=>Gm(e.evaluate(i),t.evaluate(i))]]},"feature-state":[oo,[ho],(i,[e])=>Gm(e.evaluate(i),i.featureState||{})],properties:[G0,[],i=>i.properties()],"geometry-type":[ho,[],i=>i.geometryType()],id:[oo,[],i=>i.id()],zoom:[jn,[],i=>i.globals.zoom],pitch:[jn,[],i=>i.globals.pitch||0],"distance-from-center":[jn,[],i=>i.distanceFromCenter()],"heatmap-density":[jn,[],i=>i.globals.heatmapDensity||0],"line-progress":[jn,[],i=>i.globals.lineProgress||0],"sky-radial-progress":[jn,[],i=>i.globals.skyRadialProgress||0],accumulated:[oo,[],i=>i.globals.accumulated===void 0?null:i.globals.accumulated],"+":[jn,Of(jn),(i,e)=>{let t=0;for(const o of e)t+=o.evaluate(i);return t}],"*":[jn,Of(jn),(i,e)=>{let t=1;for(const o of e)t*=o.evaluate(i);return t}],"-":{type:jn,overloads:[[[jn,jn],(i,[e,t])=>e.evaluate(i)-t.evaluate(i)],[[jn],(i,[e])=>-e.evaluate(i)]]},"/":[jn,[jn,jn],(i,[e,t])=>e.evaluate(i)/t.evaluate(i)],"%":[jn,[jn,jn],(i,[e,t])=>e.evaluate(i)%t.evaluate(i)],ln2:[jn,[],()=>Math.LN2],pi:[jn,[],()=>Math.PI],e:[jn,[],()=>Math.E],"^":[jn,[jn,jn],(i,[e,t])=>Math.pow(e.evaluate(i),t.evaluate(i))],sqrt:[jn,[jn],(i,[e])=>Math.sqrt(e.evaluate(i))],log10:[jn,[jn],(i,[e])=>Math.log(e.evaluate(i))/Math.LN10],ln:[jn,[jn],(i,[e])=>Math.log(e.evaluate(i))],log2:[jn,[jn],(i,[e])=>Math.log(e.evaluate(i))/Math.LN2],sin:[jn,[jn],(i,[e])=>Math.sin(e.evaluate(i))],cos:[jn,[jn],(i,[e])=>Math.cos(e.evaluate(i))],tan:[jn,[jn],(i,[e])=>Math.tan(e.evaluate(i))],asin:[jn,[jn],(i,[e])=>Math.asin(e.evaluate(i))],acos:[jn,[jn],(i,[e])=>Math.acos(e.evaluate(i))],atan:[jn,[jn],(i,[e])=>Math.atan(e.evaluate(i))],min:[jn,Of(jn),(i,e)=>Math.min(...e.map(t=>t.evaluate(i)))],max:[jn,Of(jn),(i,e)=>Math.max(...e.map(t=>t.evaluate(i)))],abs:[jn,[jn],(i,[e])=>Math.abs(e.evaluate(i))],round:[jn,[jn],(i,[e])=>{const t=e.evaluate(i);return t<0?-Math.round(-t):Math.round(t)}],floor:[jn,[jn],(i,[e])=>Math.floor(e.evaluate(i))],ceil:[jn,[jn],(i,[e])=>Math.ceil(e.evaluate(i))],"filter-==":[ro,[ho,oo],(i,[e,t])=>i.properties()[e.value]===t.value],"filter-id-==":[ro,[oo],(i,[e])=>i.id()===e.value],"filter-type-==":[ro,[ho],(i,[e])=>i.geometryType()===e.value],"filter-<":[ro,[ho,oo],(i,[e,t])=>{const o=i.properties()[e.value],l=t.value;return typeof o==typeof l&&o<l}],"filter-id-<":[ro,[oo],(i,[e])=>{const t=i.id(),o=e.value;return typeof t==typeof o&&t<o}],"filter->":[ro,[ho,oo],(i,[e,t])=>{const o=i.properties()[e.value],l=t.value;return typeof o==typeof l&&o>l}],"filter-id->":[ro,[oo],(i,[e])=>{const t=i.id(),o=e.value;return typeof t==typeof o&&t>o}],"filter-<=":[ro,[ho,oo],(i,[e,t])=>{const o=i.properties()[e.value],l=t.value;return typeof o==typeof l&&o<=l}],"filter-id-<=":[ro,[oo],(i,[e])=>{const t=i.id(),o=e.value;return typeof t==typeof o&&t<=o}],"filter->=":[ro,[ho,oo],(i,[e,t])=>{const o=i.properties()[e.value],l=t.value;return typeof o==typeof l&&o>=l}],"filter-id->=":[ro,[oo],(i,[e])=>{const t=i.id(),o=e.value;return typeof t==typeof o&&t>=o}],"filter-has":[ro,[oo],(i,[e])=>e.value in i.properties()],"filter-has-id":[ro,[],i=>i.id()!==null&&i.id()!==void 0],"filter-type-in":[ro,[ec(ho)],(i,[e])=>e.value.indexOf(i.geometryType())>=0],"filter-id-in":[ro,[ec(oo)],(i,[e])=>e.value.indexOf(i.id())>=0],"filter-in-small":[ro,[ho,ec(oo)],(i,[e,t])=>t.value.indexOf(i.properties()[e.value])>=0],"filter-in-large":[ro,[ho,ec(oo)],(i,[e,t])=>LS(i.properties()[e.value],t.value,0,t.value.length-1)],all:{type:ro,overloads:[[[ro,ro],(i,[e,t])=>e.evaluate(i)&&t.evaluate(i)],[Of(ro),(i,e)=>{for(const t of e)if(!t.evaluate(i))return!1;return!0}]]},any:{type:ro,overloads:[[[ro,ro],(i,[e,t])=>e.evaluate(i)||t.evaluate(i)],[Of(ro),(i,e)=>{for(const t of e)if(t.evaluate(i))return!0;return!1}]]},"!":[ro,[ro],(i,[e])=>!e.evaluate(i)],"is-supported-script":[ro,[ho],(i,[e])=>{const t=i.globals&&i.globals.isSupportedScript;return t?t(e.evaluate(i)):!0}],upcase:[ho,[ho],(i,[e])=>e.evaluate(i).toUpperCase()],downcase:[ho,[ho],(i,[e])=>e.evaluate(i).toLowerCase()],concat:[ho,Of(oo),(i,e)=>e.map(t=>Od(t.evaluate(i))).join("")],"resolved-locale":[ho,[D1],(i,[e])=>e.evaluate(i).resolvedLocale()]});var rw=nw;function W2(i){return{result:"success",value:i}}function D0(i){return{result:"error",value:i}}function PS(i){return i["property-type"]==="data-driven"||i["property-type"]==="cross-faded-data-driven"}function MS(i){return!!i.expression&&i.expression.parameters.indexOf("zoom")>-1}function ow(i){return!!i.expression&&i.expression.interpolated}function zg(i){return i instanceof Number?"number":i instanceof String?"string":i instanceof Boolean?"boolean":Array.isArray(i)?"array":i===null?"null":typeof i}function Ng(i){return typeof i=="object"&&i!==null&&!Array.isArray(i)}function DS(i){return i}function jg(i,e){const t=e.type==="color",o=i.stops&&typeof i.stops[0][0]=="object",l=o||i.property!==void 0,u=o||!l,m=i.type||(ow(e)?"exponential":"interval");if(t&&(i=F4({},i),i.stops&&(i.stops=i.stops.map(b=>[b[0],$a.parse(b[1])])),i.default?i.default=$a.parse(i.default):i.default=$a.parse(e.default)),i.colorSpace&&i.colorSpace!=="rgb"&&!Q4[i.colorSpace])throw new Error(`Unknown color space: ${i.colorSpace}`);let r,f,_;if(m==="exponential")r=z_;else if(m==="interval")r=FS;else if(m==="categorical"){r=OS,f=Object.create(null);for(const b of i.stops)f[b[0]]=b[1];_=typeof i.stops[0][0]}else if(m==="identity")r=RS;else throw new Error(`Unknown function type "${m}"`);if(o){const b={},v=[];for(let C=0;C<i.stops.length;C++){const T=i.stops[C],S=T[0].zoom;b[S]===void 0&&(b[S]={zoom:S,type:i.type,property:i.property,default:i.default,stops:[]},v.push(S)),b[S].stops.push([T[0].value,T[1]])}const w=[];for(const C of v)w.push([b[C].zoom,jg(b[C],e)]);const x={name:"linear"};return{kind:"composite",interpolationType:x,interpolationFactor:Lh.interpolationFactor.bind(void 0,x),zoomStops:w.map(C=>C[0]),evaluate({zoom:C},T){return z_({stops:w,base:i.base},e,C).evaluate(C,T)}}}else if(u){const b=m==="exponential"?{name:"exponential",base:i.base!==void 0?i.base:1}:null;return{kind:"camera",interpolationType:b,interpolationFactor:Lh.interpolationFactor.bind(void 0,b),zoomStops:i.stops.map(v=>v[0]),evaluate:({zoom:v})=>r(i,e,v,f,_)}}else return{kind:"source",evaluate(b,v){const w=v&&v.properties?v.properties[i.property]:void 0;return w===void 0?np(i.default,e.default):r(i,e,w,f,_)}}}function np(i,e,t){if(i!==void 0)return i;if(e!==void 0)return e;if(t!==void 0)return t}function OS(i,e,t,o,l){const u=typeof t===l?o[t]:void 0;return np(u,i.default,e.default)}function FS(i,e,t){if(zg(t)!=="number")return np(i.default,e.default);const o=i.stops.length;if(o===1||t<=i.stops[0][0])return i.stops[0][1];if(t>=i.stops[o-1][0])return i.stops[o-1][1];const l=z1(i.stops.map(u=>u[0]),t);return i.stops[l][1]}function z_(i,e,t){const o=i.base!==void 0?i.base:1;if(zg(t)!=="number")return np(i.default,e.default);const l=i.stops.length;if(l===1||t<=i.stops[0][0])return i.stops[0][1];if(t>=i.stops[l-1][0])return i.stops[l-1][1];const u=z1(i.stops.map(b=>b[0]),t),m=BS(t,o,i.stops[u][0],i.stops[u+1][0]),r=i.stops[u][1],f=i.stops[u+1][1];let _=H4[e.type]||DS;if(i.colorSpace&&i.colorSpace!=="rgb"){const b=Q4[i.colorSpace];_=(v,w)=>b.reverse(b.interpolate(b.forward(v),b.forward(w),m))}return typeof r.evaluate=="function"?{evaluate(...b){const v=r.evaluate.apply(void 0,b),w=f.evaluate.apply(void 0,b);if(!(v===void 0||w===void 0))return _(v,w,m)}}:_(r,f,m)}function RS(i,e,t){return e.type==="color"?t=$a.parse(t):e.type==="formatted"?t=Cc.fromString(t.toString()):e.type==="resolvedImage"?t=Mh.fromString(t.toString()):zg(t)!==e.type&&(e.type!=="enum"||!e.values[t])&&(t=void 0),np(t,i.default,e.default)}function BS(i,e,t,o){const l=o-t,u=i-t;return l===0?0:e===1?u/l:(Math.pow(e,u)-1)/(Math.pow(e,l)-1)}class sw{constructor(e,t){this.expression=e,this._warningHistory={},this._evaluator=new B4,this._defaultValue=t?jS(t):null,this._enumValues=t&&t.type==="enum"?t.values:null}evaluateWithoutErrorHandling(e,t,o,l,u,m,r,f){return this._evaluator.globals=e,this._evaluator.feature=t,this._evaluator.featureState=o,this._evaluator.canonical=l||null,this._evaluator.availableImages=u||null,this._evaluator.formattedSection=m,this._evaluator.featureTileCoord=r||null,this._evaluator.featureDistanceData=f||null,this.expression.evaluate(this._evaluator)}evaluate(e,t,o,l,u,m,r,f){this._evaluator.globals=e,this._evaluator.feature=t||null,this._evaluator.featureState=o||null,this._evaluator.canonical=l||null,this._evaluator.availableImages=u||null,this._evaluator.formattedSection=m||null,this._evaluator.featureTileCoord=r||null,this._evaluator.featureDistanceData=f||null;try{const _=this.expression.evaluate(this._evaluator);if(_==null||typeof _=="number"&&_!==_)return this._defaultValue;if(this._enumValues&&!(_ in this._enumValues))throw new el(`Expected value to be one of ${Object.keys(this._enumValues).map(b=>JSON.stringify(b)).join(", ")}, but found ${JSON.stringify(_)} instead.`);return _}catch(_){return this._warningHistory[_.message]||(this._warningHistory[_.message]=!0,typeof console<"u"&&console.warn(_.message)),this._defaultValue}}}function aw(i){return Array.isArray(i)&&i.length>0&&typeof i[0]=="string"&&i[0]in rw}function lw(i,e){const t=new V4(rw,[],e?NS(e):void 0),o=t.parse(i,void 0,void 0,void 0,e&&e.type==="string"?{typeAnnotation:"coerce"}:void 0);return o?W2(new sw(o,e)):D0(t.errors)}class X2{constructor(e,t){this.kind=e,this._styleExpression=t,this.isStateDependent=e!=="constant"&&!Cg(t.expression)}evaluateWithoutErrorHandling(e,t,o,l,u,m){return this._styleExpression.evaluateWithoutErrorHandling(e,t,o,l,u,m)}evaluate(e,t,o,l,u,m){return this._styleExpression.evaluate(e,t,o,l,u,m)}}class Y2{constructor(e,t,o,l){this.kind=e,this.zoomStops=o,this._styleExpression=t,this.isStateDependent=e!=="camera"&&!Cg(t.expression),this.interpolationType=l}evaluateWithoutErrorHandling(e,t,o,l,u,m){return this._styleExpression.evaluateWithoutErrorHandling(e,t,o,l,u,m)}evaluate(e,t,o,l,u,m){return this._styleExpression.evaluate(e,t,o,l,u,m)}interpolationFactor(e,t,o){return this.interpolationType?Lh.interpolationFactor(this.interpolationType,e,t,o):0}}function uw(i,e){if(i=lw(i,e),i.result==="error")return i;const t=i.value.expression,o=Sg(t);if(!o&&!PS(e))return D0([new Kc("","data expressions not supported")]);const l=Eg(t,["zoom","pitch","distance-from-center"]);if(!l&&!MS(e))return D0([new Kc("","zoom expressions not supported")]);const u=o1(t);if(!u&&!l)return D0([new Kc("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')]);if(u instanceof Kc)return D0([u]);if(u instanceof Lh&&!ow(e))return D0([new Kc("",'"interpolate" expressions cannot be used with this property')]);if(!u)return W2(o?new X2("constant",i.value):new X2("source",i.value));const m=u instanceof Lh?u.interpolation:void 0;return W2(o?new Y2("camera",i.value,u.labels,m):new Y2("composite",i.value,u.labels,m))}class N1{constructor(e,t){this._parameters=e,this._specification=t,F4(this,jg(this._parameters,this._specification))}static deserialize(e){return new N1(e._parameters,e._specification)}static serialize(e){return{_parameters:e._parameters,_specification:e._specification}}}function zS(i,e){if(Ng(i))return new N1(i,e);if(aw(i)){const t=uw(i,e);if(t.result==="error")throw new Error(t.value.map(o=>`${o.key}: ${o.message}`).join(", "));return t.value}else{let t=i;return typeof i=="string"&&e.type==="color"&&(t=$a.parse(i)),{kind:"constant",evaluate:()=>t}}}function o1(i){let e=null;if(i instanceof ew)e=o1(i.result);else if(i instanceof $4){for(const t of i.args)if(e=o1(t),e)break}else(i instanceof q4||i instanceof Lh)&&i.input instanceof td&&i.input.name==="zoom"&&(e=i);return e instanceof Kc||i.eachChild(t=>{const o=o1(t);o instanceof Kc?e=o:!e&&o?e=new Kc("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):e&&o&&e!==o&&(e=new Kc("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),e}function NS(i){const e={color:Th,string:ho,number:jn,enum:ho,boolean:ro,formatted:O1,resolvedImage:ip};return i.type==="array"?ec(e[i.value]||oo,i.length):e[i.type]}function jS(i){return i.type==="color"&&(Ng(i.default)||Array.isArray(i.default))?new $a(0,0,0,0):i.type==="color"?$a.parse(i.default)||null:i.default===void 0?null:i.default}function Yd(i){return typeof i=="object"?["literal",i]:i}function US(i,e){let t=i.stops;if(!t)return VS(i,e);const o=t&&typeof t[0][0]=="object",l=o||i.property!==void 0,u=o||!l;return t=t.map(m=>!l&&e.tokens&&typeof m[1]=="string"?[m[0],WS(m[1])]:[m[0],Yd(m[1])]),o?qS(i,e,t):u?GS(i,e,t):Z2(i,e,t)}function VS(i,e){const t=["get",i.property];if(i.default===void 0)return e.type==="string"?["string",t]:t;if(e.type==="enum")return["match",t,Object.keys(e.values),t,i.default];{const o=[e.type==="color"?"to-color":e.type,t,Yd(i.default)];return e.type==="array"&&o.splice(1,0,e.value,e.length||null),o}}function Ug(i){switch(i.colorSpace){case"hcl":return"interpolate-hcl";case"lab":return"interpolate-lab";default:return"interpolate"}}function qS(i,e,t){const o={},l={},u=[];for(let r=0;r<t.length;r++){const f=t[r],_=f[0].zoom;o[_]===void 0&&(o[_]={zoom:_,type:i.type,property:i.property,default:i.default},l[_]=[],u.push(_)),l[_].push([f[0].value,f[1]])}if(qg({},e)==="exponential"){const r=[Ug(i),["linear"],["zoom"]];for(const f of u){const _=Z2(o[f],e,l[f]);X0(r,f,_,!1)}return r}else{const r=["step",["zoom"]];for(const f of u){const _=Z2(o[f],e,l[f]);X0(r,f,_,!0)}return Vg(r),r}}function HS(i,e){if(i!==void 0)return i;if(e!==void 0)return e}function N_(i,e){const t=Yd(HS(i.default,e.default));return t===void 0&&e.type==="resolvedImage"?"":t}function Z2(i,e,t){const o=qg(i,e),l=["get",i.property];if(o==="categorical"&&typeof t[0][0]=="boolean"){const u=["case"];for(const m of t)u.push(["==",l,m[0]],m[1]);return u.push(N_(i,e)),u}else if(o==="categorical"){const u=["match",l];for(const m of t)X0(u,m[0],m[1],!1);return u.push(N_(i,e)),u}else if(o==="interval"){const u=["step",["number",l]];for(const m of t)X0(u,m[0],m[1],!0);return Vg(u),i.default===void 0?u:["case",["==",["typeof",l],"number"],u,Yd(i.default)]}else if(o==="exponential"){const u=i.base!==void 0?i.base:1,m=[Ug(i),u===1?["linear"]:["exponential",u],["number",l]];for(const r of t)X0(m,r[0],r[1],!1);return i.default===void 0?m:["case",["==",["typeof",l],"number"],m,Yd(i.default)]}else throw new Error(`Unknown property function type ${o}`)}function GS(i,e,t,o=["zoom"]){const l=qg(i,e);let u,m=!1;if(l==="interval")u=["step",o],m=!0;else if(l==="exponential"){const r=i.base!==void 0?i.base:1;u=[Ug(i),r===1?["linear"]:["exponential",r],o]}else throw new Error(`Unknown zoom function type "${l}"`);for(const r of t)X0(u,r[0],r[1],m);return Vg(u),u}function Vg(i){i[0]==="step"&&i.length===3&&(i.push(0),i.push(i[3]))}function X0(i,e,t,o){i.length>3&&e===i[i.length-2]||(o&&i.length===2||i.push(e),i.push(t))}function qg(i,e){return i.type?i.type:e.expression.interpolated?"exponential":"interval"}function WS(i){const e=["concat"],t=/{([^{}]+)}/g;let o=0;for(let l=t.exec(i);l!==null;l=t.exec(i)){const u=i.slice(o,t.lastIndex-l[0].length);o=t.lastIndex,u.length>0&&e.push(u),e.push(["get",l[1]])}if(e.length===1)return i;if(o<i.length)e.push(i.slice(o));else if(e.length===2)return["to-string",e[1]];return e}function cw(i){if(i===!0||i===!1)return!0;if(!Array.isArray(i)||i.length===0)return!1;switch(i[0]){case"has":return i.length>=2&&i[1]!=="$id"&&i[1]!=="$type";case"in":return i.length>=3&&(typeof i[1]!="string"||Array.isArray(i[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return i.length!==3||Array.isArray(i[1])||Array.isArray(i[2]);case"any":case"all":for(const e of i.slice(1))if(!cw(e)&&typeof e!="boolean")return!1;return!0;default:return!0}}P1(function(i,e){var t=function(){var o=function(M,O,V,X){for(V=V||{},X=M.length;X--;V[M[X]]=O);return V},l=[1,12],u=[1,13],m=[1,9],r=[1,10],f=[1,11],_=[1,14],b=[1,15],v=[14,18,22,24],w=[18,22],x=[22,24],C={trace:function(){},yy:{},symbols_:{error:2,JSONString:3,STRING:4,JSONNumber:5,NUMBER:6,JSONNullLiteral:7,NULL:8,JSONBooleanLiteral:9,TRUE:10,FALSE:11,JSONText:12,JSONValue:13,EOF:14,JSONObject:15,JSONArray:16,"{":17,"}":18,JSONMemberList:19,JSONMember:20,":":21,",":22,"[":23,"]":24,JSONElementList:25,$accept:0,$end:1},terminals_:{2:"error",4:"STRING",6:"NUMBER",8:"NULL",10:"TRUE",11:"FALSE",14:"EOF",17:"{",18:"}",21:":",22:",",23:"[",24:"]"},productions_:[0,[3,1],[5,1],[7,1],[9,1],[9,1],[12,2],[13,1],[13,1],[13,1],[13,1],[13,1],[13,1],[15,2],[15,3],[20,3],[19,1],[19,3],[16,2],[16,3],[25,1],[25,3]],performAction:function(O,V,X,Z,te,J,ie){var Ee=J.length-1;switch(te){case 1:this.$=new String(O.replace(/\\(\\|")/g,"$1").replace(/\\n/g,`
`).replace(/\\r/g,"\r").replace(/\\t/g,"	").replace(/\\v/g,"\v").replace(/\\f/g,"\f").replace(/\\b/g,"\b")),this.$.__line__=this._$.first_line;break;case 2:this.$=new Number(O),this.$.__line__=this._$.first_line;break;case 3:this.$=null;break;case 4:this.$=new Boolean(!0),this.$.__line__=this._$.first_line;break;case 5:this.$=new Boolean(!1),this.$.__line__=this._$.first_line;break;case 6:return this.$=J[Ee-1];case 13:this.$={},Object.defineProperty(this.$,"__line__",{value:this._$.first_line,enumerable:!1});break;case 14:case 19:this.$=J[Ee-1],Object.defineProperty(this.$,"__line__",{value:this._$.first_line,enumerable:!1});break;case 15:this.$=[J[Ee-2],J[Ee]];break;case 16:this.$={},this.$[J[Ee][0]]=J[Ee][1];break;case 17:this.$=J[Ee-2],J[Ee-2][J[Ee][0]]=J[Ee][1];break;case 18:this.$=[],Object.defineProperty(this.$,"__line__",{value:this._$.first_line,enumerable:!1});break;case 20:this.$=[J[Ee]];break;case 21:this.$=J[Ee-2],J[Ee-2].push(J[Ee]);break}},table:[{3:5,4:l,5:6,6:u,7:3,8:m,9:4,10:r,11:f,12:1,13:2,15:7,16:8,17:_,23:b},{1:[3]},{14:[1,16]},o(v,[2,7]),o(v,[2,8]),o(v,[2,9]),o(v,[2,10]),o(v,[2,11]),o(v,[2,12]),o(v,[2,3]),o(v,[2,4]),o(v,[2,5]),o([14,18,21,22,24],[2,1]),o(v,[2,2]),{3:20,4:l,18:[1,17],19:18,20:19},{3:5,4:l,5:6,6:u,7:3,8:m,9:4,10:r,11:f,13:23,15:7,16:8,17:_,23:b,24:[1,21],25:22},{1:[2,6]},o(v,[2,13]),{18:[1,24],22:[1,25]},o(w,[2,16]),{21:[1,26]},o(v,[2,18]),{22:[1,28],24:[1,27]},o(x,[2,20]),o(v,[2,14]),{3:20,4:l,20:29},{3:5,4:l,5:6,6:u,7:3,8:m,9:4,10:r,11:f,13:30,15:7,16:8,17:_,23:b},o(v,[2,19]),{3:5,4:l,5:6,6:u,7:3,8:m,9:4,10:r,11:f,13:31,15:7,16:8,17:_,23:b},o(w,[2,17]),o(w,[2,15]),o(x,[2,21])],defaultActions:{16:[2,6]},parseError:function(O,V){if(V.recoverable)this.trace(O);else throw new Error(O)},parse:function(O){var V=this,X=[0],Z=[null],te=[],J=this.table,ie="",Ee=0,Pe=0,de=2,Te=1,ve=te.slice.call(arguments,1),_e=Object.create(this.lexer),ot={yy:{}};for(var it in this.yy)Object.prototype.hasOwnProperty.call(this.yy,it)&&(ot.yy[it]=this.yy[it]);_e.setInput(O,ot.yy),ot.yy.lexer=_e,ot.yy.parser=this,typeof _e.yylloc>"u"&&(_e.yylloc={});var It=_e.yylloc;te.push(It);var Xe=_e.options&&_e.options.ranges;typeof ot.yy.parseError=="function"?this.parseError=ot.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;function we(){var gt;return gt=_e.lex()||Te,typeof gt!="number"&&(gt=V.symbols_[gt]||gt),gt}for(var Ce,Re,le,Se,he={},me,Be,We,st;;){if(Re=X[X.length-1],this.defaultActions[Re]?le=this.defaultActions[Re]:((Ce===null||typeof Ce>"u")&&(Ce=we()),le=J[Re]&&J[Re][Ce]),typeof le>"u"||!le.length||!le[0]){var Ye="";st=[];for(me in J[Re])this.terminals_[me]&&me>de&&st.push("'"+this.terminals_[me]+"'");_e.showPosition?Ye="Parse error on line "+(Ee+1)+`:
`+_e.showPosition()+`
Expecting `+st.join(", ")+", got '"+(this.terminals_[Ce]||Ce)+"'":Ye="Parse error on line "+(Ee+1)+": Unexpected "+(Ce==Te?"end of input":"'"+(this.terminals_[Ce]||Ce)+"'"),this.parseError(Ye,{text:_e.match,token:this.terminals_[Ce]||Ce,line:_e.yylineno,loc:It,expected:st})}if(le[0]instanceof Array&&le.length>1)throw new Error("Parse Error: multiple actions possible at state: "+Re+", token: "+Ce);switch(le[0]){case 1:X.push(Ce),Z.push(_e.yytext),te.push(_e.yylloc),X.push(le[1]),Ce=null,Pe=_e.yyleng,ie=_e.yytext,Ee=_e.yylineno,It=_e.yylloc;break;case 2:if(Be=this.productions_[le[1]][1],he.$=Z[Z.length-Be],he._$={first_line:te[te.length-(Be||1)].first_line,last_line:te[te.length-1].last_line,first_column:te[te.length-(Be||1)].first_column,last_column:te[te.length-1].last_column},Xe&&(he._$.range=[te[te.length-(Be||1)].range[0],te[te.length-1].range[1]]),Se=this.performAction.apply(he,[ie,Pe,Ee,ot.yy,le[1],Z,te].concat(ve)),typeof Se<"u")return Se;Be&&(X=X.slice(0,-1*Be*2),Z=Z.slice(0,-1*Be),te=te.slice(0,-1*Be)),X.push(this.productions_[le[1]][0]),Z.push(he.$),te.push(he._$),We=J[X[X.length-2]][X[X.length-1]],X.push(We);break;case 3:return!0}}return!0}},T=function(){var M={EOF:1,parseError:function(V,X){if(this.yy.parser)this.yy.parser.parseError(V,X);else throw new Error(V)},setInput:function(O,V){return this.yy=V||this.yy||{},this._input=O,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var O=this._input[0];this.yytext+=O,this.yyleng++,this.offset++,this.match+=O,this.matched+=O;var V=O.match(/(?:\r\n?|\n).*/g);return V?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),O},unput:function(O){var V=O.length,X=O.split(/(?:\r\n?|\n)/g);this._input=O+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-V),this.offset-=V;var Z=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),X.length-1&&(this.yylineno-=X.length-1);var te=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:X?(X.length===Z.length?this.yylloc.first_column:0)+Z[Z.length-X.length].length-X[0].length:this.yylloc.first_column-V},this.options.ranges&&(this.yylloc.range=[te[0],te[0]+this.yyleng-V]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},less:function(O){this.unput(this.match.slice(O))},pastInput:function(){var O=this.matched.substr(0,this.matched.length-this.match.length);return(O.length>20?"...":"")+O.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var O=this.match;return O.length<20&&(O+=this._input.substr(0,20-O.length)),(O.substr(0,20)+(O.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var O=this.pastInput(),V=new Array(O.length+1).join("-");return O+this.upcomingInput()+`
`+V+"^"},test_match:function(O,V){var X,Z,te;if(this.options.backtrack_lexer&&(te={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(te.yylloc.range=this.yylloc.range.slice(0))),Z=O[0].match(/(?:\r\n?|\n).*/g),Z&&(this.yylineno+=Z.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:Z?Z[Z.length-1].length-Z[Z.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+O[0].length},this.yytext+=O[0],this.match+=O[0],this.matches=O,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(O[0].length),this.matched+=O[0],X=this.performAction.call(this,this.yy,this,V,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),X)return X;if(this._backtrack){for(var J in te)this[J]=te[J];return!1}return!1},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var O,V,X,Z;this._more||(this.yytext="",this.match="");for(var te=this._currentRules(),J=0;J<te.length;J++)if(X=this._input.match(this.rules[te[J]]),X&&(!V||X[0].length>V[0].length)){if(V=X,Z=J,this.options.backtrack_lexer){if(O=this.test_match(X,te[J]),O!==!1)return O;if(this._backtrack){V=!1;continue}else return!1}else if(!this.options.flex)break}return V?(O=this.test_match(V,te[Z]),O!==!1?O:!1):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var V=this.next();return V||this.lex()},begin:function(V){this.conditionStack.push(V)},popState:function(){var V=this.conditionStack.length-1;return V>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(V){return V=this.conditionStack.length-1-Math.abs(V||0),V>=0?this.conditionStack[V]:"INITIAL"},pushState:function(V){this.begin(V)},stateStackSize:function(){return this.conditionStack.length},options:{},performAction:function(V,X,Z,te){switch(Z){case 0:break;case 1:return 6;case 2:return X.yytext=X.yytext.substr(1,X.yyleng-2),4;case 3:return 17;case 4:return 18;case 5:return 23;case 6:return 24;case 7:return 22;case 8:return 21;case 9:return 10;case 10:return 11;case 11:return 8;case 12:return 14;case 13:return"INVALID"}},rules:[/^(?:\s+)/,/^(?:(-?([0-9]|[1-9][0-9]+))(\.[0-9]+)?([eE][-+]?[0-9]+)?\b)/,/^(?:"(?:\\[\\"bfnrt/]|\\u[a-fA-F0-9]{4}|[^\\\0-\x09\x0a-\x1f"])*")/,/^(?:\{)/,/^(?:\})/,/^(?:\[)/,/^(?:\])/,/^(?:,)/,/^(?::)/,/^(?:true\b)/,/^(?:false\b)/,/^(?:null\b)/,/^(?:$)/,/^(?:.)/],conditions:{INITIAL:{rules:[0,1,2,3,4,5,6,7,8,9,10,11,12,13],inclusive:!0}}};return M}();C.lexer=T;function S(){this.yy={}}return S.prototype=C,C.Parser=S,new S}();typeof xk<"u"&&(e.parser=t,e.Parser=t.Parser,e.parse=function(){return t.parse.apply(t,arguments)})});const XS={StyleExpression:sw,isExpression:aw,isExpressionFilter:cw,createExpression:lw,createPropertyExpression:uw,normalizePropertyExpression:zS,ZoomConstantExpression:X2,ZoomDependentExpression:Y2,StylePropertyFunction:N1},YS={convertFunction:US,createFunction:jg,isFunction:Ng};function ZS(i){var e=i.expr,t=i.layer,o=Math.min(e(t,"paint","circle-radius"),8),l=Math.min(e(t,"paint","circle-stroke-width"),4),u=e(t,"paint","circle-color"),m=e(t,"paint","circle-opacity"),r=e(t,"paint","circle-stroke-color"),f=e(t,"paint","circle-stroke-opacity"),_=o-l/2;return{element:"svg",attributes:{viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",style:{filter:"blur("+e(t,"paint","circle-blur")*_+"px)"}},children:[{element:"circle",attributes:{key:"l1",cx:10,cy:10,fill:u,opacity:m,r:_}},{element:"circle",attributes:{key:"l2",cx:10,cy:10,fill:"transparent",opacity:f,r:o,"stroke-width":l,stroke:r}}]}}function KS(i){var e=i.expr,t=i.layer;return{element:"div",attributes:{style:{width:"100%",height:"100%",backgroundImage:"url("+(0,i.image)(e(t,"paint","fill-pattern"))+")",backgroundColor:e(t,"paint","fill-color"),opacity:e(t,"paint","fill-opacity"),backgroundSize:"66% 66%",backgroundPosition:"center"}}}}function JS(i){var e=i.layer,t=i.expr,o=(0,i.image)(t(e,"paint","line-pattern")),l={stroke:o?"url(#img1)":t(e,"paint","line-color"),strokeWidth:Math.max(2,Math.min(t(e,"paint","line-width"),8)),strokeOpacity:t(e,"paint","line-opacity")},u=l.strokeWidth;return{element:"svg",attributes:{viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},children:[{element:"defs",attributes:{key:"defs"},children:[{element:"pattern",attributes:{key:"pattern",id:"img1",x:0,y:0,width:l.strokeWidth,height:l.strokeWidth,patternUnits:"userSpaceOnUse",patternTransform:"translate("+-u/2+" "+-u/2+") rotate(45)"},children:[{element:"image",attributes:{key:"img",xlinkHref:o,x:0,y:0,width:l.strokeWidth,height:l.strokeWidth}}]}]},{element:"path",attributes:{key:"path",style:l,stroke:l.stroke,d:"M0 20 L 20 0"}}]}}function QS(i){return function(r){var f=r.image,_=(0,r.expr)(r.layer,"layout","icon-image");if(!_)return null;var b=f(_);return b?{element:"div",attributes:{style:{backgroundImage:"url("+b+")",backgroundSize:"contain",backgroundPosition:"center",backgroundRepeat:"no-repeat",width:"100%",height:"100%"}}}:null}(i)||(l=(t=(e=i).expr)(o=e.layer,"paint","text-color"),u=t(o,"paint","text-opacity"),{element:"svg",attributes:{viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},children:[{element:"path",attributes:{key:"l1",d:m="M 4,4 L 16,4 L 16,7 L 11.5 7 L 11.5 16 L 8.5 16 L 8.5 7 L 4 7 Z",stroke:t(o,"paint","text-halo-color"),"stroke-width":2*t(o,"paint","text-halo-width"),fill:"transparent","stroke-linejoin":"round"}},{element:"path",attributes:{key:"l2",d:m,fill:"white"}},{element:"path",attributes:{key:"l3",d:m,fill:l,opacity:u}}]});var e,t,o,l,u,m}var $S=[["background"],["circle"],["fill-extrusion"],["fill"],["heatmap"],["hillshade"],["line"],["raster"],["icon","symbol"],["text","symbol"]];function eC(i){var e,t=i.sprite,o=i.layer,l={circle:ZS,symbol:QS,line:JS,fill:KS}[o.type],u=(e=i.zoom,function(m,r,f){var _=function(C){var T=$S.find(function(S){return C.startsWith(S[0])});return T?T[1]||T[0]:null}(f),b=wk[r+"_"+_][f];if(!m[r])return b.default;var v=m[r][f];if(v===void 0)return b.default;if(typeof v=="object"){var w;if(!(w=Array.isArray(v)?XS.createExpression(v).value:YS.createFunction(v,b)).evaluate)return null;var x=w.evaluate({zoom:e},{});return x?x.name||x:null}return v});return l?l({layer:o,expr:u,image:function(m){if(t&&t.json){var r=t.json[m];if(r)return f=t.image,b=(_=r).x,v=_.y,w=_.width,x=_.height,(C=document.createElement("canvas")).width=2*w,C.height=2*x,C.getContext("2d").drawImage(f,2*b,2*v,2*w,2*x,0,0,2*w,2*x),C.toDataURL()}var f,_,b,v,w,x,C;return null}}):null}function tC(i){let e,t=i[0].innerHTML+"";return{c(){e=Ht("div"),this.h()},l(o){e=Gt(o,"DIV",{class:!0});var l=$t(e);l.forEach(De),this.h()},h(){qt(e,"class","legend svelte-1dizgfa")},m(o,l){jt(o,e,l),e.innerHTML=t},p(o,[l]){l&1&&t!==(t=o[0].innerHTML+"")&&(e.innerHTML=t)},i:go,o:go,d(o){o&&De(e)}}}function iC(i,e,t){let{map:o}=e,{layer:l}=e,{spriteLoader:u}=e,m=document.createElement("div");const r=async()=>{const f=o.getZoom(),_=eC({zoom:f,layer:l});if(t(0,m.innerText="",m),_){let v,w,x;switch(_.element){case"div":if(_.attributes.style.backgroundImage&&!["url(undefined)","url(null)"].includes(_.attributes.style.backgroundImage)){var b=document.createElement("img");b.src=_.attributes.style.backgroundImage.replace("url(","").replace(")",""),b.alt=l.id,b.style.cssText="height: 24px;",m.appendChild(b)}v=document.createElement("div"),v.style.height="24px",v.style.width="50px",v.style.backgroundColor=_.attributes.style.backgroundColor,v.style.backgroundPosition=_.attributes.style.backgroundPosition,v.style.backgroundSize=_.attributes.style.backgroundSize,v.style.backgroundRepeat=_.attributes.style.backgroundRepeat,v.style.opacity=_.attributes.style.opacity,m.appendChild(v);break;case"svg":if(u&&(x=u.getIconDataUrl(l),x)){const C=document.createElement("img");C.src=x,C.alt=l.id,C.style.cssText="height: 24px;",m.appendChild(C);break}w=document.createElementNS("http://www.w3.org/2000/svg","svg"),w.style.cssText="height: 24px;",w.setAttributeNS(null,"version","1.1"),Object.keys(_.attributes).forEach(C=>{w.setAttribute(C,_.attributes[C]);let T=document.createElementNS("http://www.w3.org/2000/svg","g");_.children.forEach(S=>{var M=document.createElementNS("http://www.w3.org/2000/svg",S.element);Object.keys(S.attributes).forEach(O=>{M.setAttributeNS(null,O,S.attributes[O])}),T.appendChild(M)}),w.appendChild(T)}),m.appendChild(w);break;default:console.log(_.element);return}}else{const v=document.createElementNS("http://www.w3.org/2000/svg","svg"),w=document.createElementNS("http://www.w3.org/2000/svg","path"),x=document.createElementNS("http://www.w3.org/2000/svg","path");v.setAttribute("fill","none"),v.setAttribute("viewBox","0 0 24 24"),v.setAttribute("stroke","black"),v.classList.add("post-icon"),w.setAttribute("d","M21,0H3A3,3,0,0,0,0,3V21a3,3,0,0,0,3,3H21a3,3,0,0,0,3-3V3A3,3,0,0,0,21,0ZM3,2H21a1,1,0,0,1,1,1V15.86L14.18,9.35a5.06,5.06,0,0,0-6.39-.06L2,13.92V3A1,1,0,0,1,3,2ZM21,22H3a1,1,0,0,1-1-1V16.48l7-5.63a3.06,3.06,0,0,1,3.86,0L22,18.47V21A1,1,0,0,1,21,22Z"),w.setAttribute("stroke-linecap","round"),w.setAttribute("stroke-linejoin","round"),w.setAttribute("stroke-width","2"),x.setAttribute("d","M18,9a3,3,0,1,0-3-3A3,3,0,0,0,18,9Zm0-4a1,1,0,1,1-1,1A1,1,0,0,1,18,5Z"),x.setAttribute("stroke-linecap","round"),x.setAttribute("stroke-linejoin","round"),x.setAttribute("stroke-width","2"),v.appendChild(w),v.appendChild(x),m.appendChild(v)}};return o.on("moveend",r),o.on("zoom",r),i.$$set=f=>{"map"in f&&t(1,o=f.map),"layer"in f&&t(2,l=f.layer),"spriteLoader"in f&&t(3,u=f.spriteLoader)},i.$$.update=()=>{i.$$.dirty&4&&r()},[m,o,l,u]}class nC extends br{constructor(e){super(),wr(this,e,iC,tC,mr,{map:1,layer:2,spriteLoader:3})}}function rC(i){let e;return{c(){e=Ht("i"),this.h()},l(t){e=Gt(t,"I",{class:!0}),$t(e).forEach(De),this.h()},h(){qt(e,"class","fas fa-eye-slash svelte-1p0eu1v")},m(t,o){jt(t,e,o)},d(t){t&&De(e)}}}function oC(i){let e;return{c(){e=Ht("i"),this.h()},l(t){e=Gt(t,"I",{class:!0}),$t(e).forEach(De),this.h()},h(){qt(e,"class","fas fa-eye svelte-1p0eu1v")},m(t,o){jt(t,e,o)},d(t){t&&De(e)}}}function sC(i){let e,t,o,l,u,m,r,f,_,b=(i[3]&&i[3][i[1].id]?i[3][i[1].id]:i[1].id)+"",v,w,x,C;function T(O,V){return O[4]?oC:rC}let S=T(i),M=S(i);return r=new nC({props:{map:i[0],layer:i[1],spriteLoader:i[2]}}),{c(){e=Ht("div"),t=Ht("div"),o=Ht("button"),l=Ht("span"),M.c(),u=Wi(),m=Ht("div"),en(r.$$.fragment),f=Wi(),_=Ht("div"),v=Kn(b),this.h()},l(O){e=Gt(O,"DIV",{class:!0});var V=$t(e);t=Gt(V,"DIV",{class:!0});var X=$t(t);o=Gt(X,"BUTTON",{class:!0});var Z=$t(o);l=Gt(Z,"SPAN",{class:!0});var te=$t(l);M.l(te),te.forEach(De),Z.forEach(De),X.forEach(De),u=Xi(V),m=Gt(V,"DIV",{class:!0});var J=$t(m);un(r.$$.fragment,J),J.forEach(De),f=Xi(V),_=Gt(V,"DIV",{class:!0});var ie=$t(_);v=Jn(ie,b),ie.forEach(De),V.forEach(De),this.h()},h(){qt(l,"class","icon is-small"),qt(o,"class","button is-text is-narrow"),qt(t,"class","column .is-marginless is-paddingless"),qt(m,"class","column is-narrow .is-marginless is-paddingless"),qt(_,"class","column is-narrow .is-marginless pl-2 has-text-left"),qt(e,"class","columns is-vcentered is-mobile")},m(O,V){jt(O,e,V),Ut(e,t),Ut(t,o),Ut(o,l),M.m(l,null),Ut(e,u),Ut(e,m),tn(r,m,null),Ut(e,f),Ut(e,_),Ut(_,v),w=!0,x||(C=xn(o,"click",i[5]),x=!0)},p(O,[V]){S!==(S=T(O))&&(M.d(1),M=S(O),M&&(M.c(),M.m(l,null)));const X={};V&1&&(X.map=O[0]),V&2&&(X.layer=O[1]),V&4&&(X.spriteLoader=O[2]),r.$set(X),(!w||V&10)&&b!==(b=(O[3]&&O[3][O[1].id]?O[3][O[1].id]:O[1].id)+"")&&Os(v,b)},i(O){w||(vt(r.$$.fragment,O),w=!0)},o(O){Lt(r.$$.fragment,O),w=!1},d(O){O&&De(e),M.d(),nn(r),x=!1,C()}}}function aC(i,e,t){const o=ep();let{map:l}=e,{layer:u}=e,{spriteLoader:m}=e,{relativeLayers:r={}}=e,_=l.getLayer(u.id).visibility!=="none";const b=()=>{const w=_===!0?"visible":"none";l.setLayoutProperty(u.id,"visibility",w),o("visibilityChanged",{layer:u,visibility:w})},v=()=>t(4,_=!_);return i.$$set=w=>{"map"in w&&t(0,l=w.map),"layer"in w&&t(1,u=w.layer),"spriteLoader"in w&&t(2,m=w.spriteLoader),"relativeLayers"in w&&t(3,r=w.relativeLayers)},i.$$.update=()=>{i.$$.dirty&16&&b()},[l,u,m,r,_,v]}class j1 extends br{constructor(e){super(),wr(this,e,aC,sC,mr,{map:0,layer:1,spriteLoader:2,relativeLayers:3})}}class lC{constructor(e){dl(this,"spriteUrl");dl(this,"sprite");this.spriteUrl=e}async load(){const e=await Promise.all([this.loadImage(`${this.spriteUrl}@2x.png`),this.fetchUrl(`${this.spriteUrl}@2x.json`)]);return this.sprite={image:e[0],json:e[1]},this.sprite}loadImage(e){let t=!1;const o=new Promise((l,u)=>{const m=new Image;m.crossOrigin="Anonymous",m.onload=()=>{t||l(m)},m.onerror=r=>{t||u(r)},m.src=e});return o.cancel=()=>{t=!0},o}async fetchUrl(e){return(await fetch(e)).json()}getIconDataUrl(e){var o;let t;if(e.layout&&e.layout["icon-image"]){let l=e.layout["icon-image"];if(Array.isArray(l)&&(l=l[l.length-1]),(o=this.sprite)!=null&&o.json){let u;Object.keys(this.sprite.json).forEach(m=>{m===l&&(u=this.sprite.json[m])}),u&&(t=this.extractPartOfImage(this.sprite.image,u))}}return t}extractPartOfImage(e,t){const l=document.createElement("canvas");return l.width=t.width*1,l.height=t.height*1,l.getContext("2d").drawImage(e,t.x*1,t.y*1,t.width*1,t.height*1,0,0,t.width*1,t.height*1),l.toDataURL()}}const j_=Nl({});function U_(i,e,t){const o=i.slice();return o[14]=e[t],o}function V_(i){let e,t,o,l,u,m,r;return{c(){e=Ht("li"),t=Ht("a"),o=Ht("span"),l=Kn("Show related"),this.h()},l(f){e=Gt(f,"LI",{class:!0});var _=$t(e);t=Gt(_,"A",{});var b=$t(t);o=Gt(b,"SPAN",{});var v=$t(o);l=Jn(v,"Show related"),v.forEach(De),b.forEach(De),_.forEach(De),this.h()},h(){qt(e,"class",u=i[4]?"is-active":"")},m(f,_){jt(f,e,_),Ut(e,t),Ut(t,o),Ut(o,l),m||(r=xn(e,"click",i[10]),m=!0)},p(f,_){_&16&&u!==(u=f[4]?"is-active":"")&&qt(e,"class",u)},d(f){f&&De(e),m=!1,r()}}}function q_(i){let e=i[1],t,o,l=Y_(i);return{c(){l.c(),t=kn()},l(u){l.l(u),t=kn()},m(u,m){l.m(u,m),jt(u,t,m),o=!0},p(u,m){m&2&&mr(e,e=u[1])?(Fr(),Lt(l,1,1,go),Or(),l=Y_(u),l.c(),vt(l,1),l.m(t.parentNode,t)):l.p(u,m)},i(u){o||(vt(l),o=!0)},o(u){Lt(l),o=!1},d(u){u&&De(t),l.d(u)}}}function uC(i){let e,t,o;return t=new j1({props:{map:i[0],layer:i[14],spriteLoader:i[5],relativeLayers:i[2]}}),t.$on("visibilityChanged",i[8]),{c(){e=Ht("a"),en(t.$$.fragment),this.h()},l(l){e=Gt(l,"A",{class:!0});var u=$t(e);un(t.$$.fragment,u),u.forEach(De),this.h()},h(){qt(e,"class","panel-block")},m(l,u){jt(l,e,u),tn(t,e,null),o=!0},p(l,u){const m={};u&1&&(m.map=l[0]),u&128&&(m.layer=l[14]),u&32&&(m.spriteLoader=l[5]),u&4&&(m.relativeLayers=l[2]),t.$set(m)},i(l){o||(vt(t.$$.fragment,l),o=!0)},o(l){Lt(t.$$.fragment,l),o=!1},d(l){l&&De(e),nn(t)}}}function cC(i){let e,t,o=i[2][i[14].id]&&H_(i);return{c(){o&&o.c(),e=kn()},l(l){o&&o.l(l),e=kn()},m(l,u){o&&o.m(l,u),jt(l,e,u),t=!0},p(l,u){l[2][l[14].id]?o?(o.p(l,u),u&132&&vt(o,1)):(o=H_(l),o.c(),vt(o,1),o.m(e.parentNode,e)):o&&(Fr(),Lt(o,1,1,()=>{o=null}),Or())},i(l){t||(vt(o),t=!0)},o(l){Lt(o),t=!1},d(l){o&&o.d(l),l&&De(e)}}}function hC(i){let e,t,o=i[6][i[14].id]&&G_(i);return{c(){o&&o.c(),e=kn()},l(l){o&&o.l(l),e=kn()},m(l,u){o&&o.m(l,u),jt(l,e,u),t=!0},p(l,u){l[6][l[14].id]?o?(o.p(l,u),u&192&&vt(o,1)):(o=G_(l),o.c(),vt(o,1),o.m(e.parentNode,e)):o&&(Fr(),Lt(o,1,1,()=>{o=null}),Or())},i(l){t||(vt(o),t=!0)},o(l){Lt(o),t=!1},d(l){o&&o.d(l),l&&De(e)}}}function H_(i){let e,t,o;return t=new j1({props:{map:i[0],layer:i[14],spriteLoader:i[5],relativeLayers:i[2]}}),t.$on("visibilityChanged",i[8]),{c(){e=Ht("a"),en(t.$$.fragment),this.h()},l(l){e=Gt(l,"A",{class:!0});var u=$t(e);un(t.$$.fragment,u),u.forEach(De),this.h()},h(){qt(e,"class","panel-block")},m(l,u){jt(l,e,u),tn(t,e,null),o=!0},p(l,u){const m={};u&1&&(m.map=l[0]),u&128&&(m.layer=l[14]),u&32&&(m.spriteLoader=l[5]),u&4&&(m.relativeLayers=l[2]),t.$set(m)},i(l){o||(vt(t.$$.fragment,l),o=!0)},o(l){Lt(t.$$.fragment,l),o=!1},d(l){l&&De(e),nn(t)}}}function G_(i){let e,t,o,l;const u=[dC,fC],m=[];function r(f,_){return f[4]===!0?0:1}return e=r(i),t=m[e]=u[e](i),{c(){t.c(),o=kn()},l(f){t.l(f),o=kn()},m(f,_){m[e].m(f,_),jt(f,o,_),l=!0},p(f,_){let b=e;e=r(f),e===b?m[e].p(f,_):(Fr(),Lt(m[b],1,1,()=>{m[b]=null}),Or(),t=m[e],t?t.p(f,_):(t=m[e]=u[e](f),t.c()),vt(t,1),t.m(o.parentNode,o))},i(f){l||(vt(t),l=!0)},o(f){Lt(t),l=!1},d(f){m[e].d(f),f&&De(o)}}}function fC(i){let e,t,o;return t=new j1({props:{map:i[0],layer:i[14],spriteLoader:i[5],relativeLayers:i[2]}}),t.$on("visibilityChanged",i[8]),{c(){e=Ht("a"),en(t.$$.fragment),this.h()},l(l){e=Gt(l,"A",{class:!0});var u=$t(e);un(t.$$.fragment,u),u.forEach(De),this.h()},h(){qt(e,"class","panel-block")},m(l,u){jt(l,e,u),tn(t,e,null),o=!0},p(l,u){const m={};u&1&&(m.map=l[0]),u&128&&(m.layer=l[14]),u&32&&(m.spriteLoader=l[5]),u&4&&(m.relativeLayers=l[2]),t.$set(m)},i(l){o||(vt(t.$$.fragment,l),o=!0)},o(l){Lt(t.$$.fragment,l),o=!1},d(l){l&&De(e),nn(t)}}}function dC(i){let e,t,o=i[2][i[14].id]&&W_(i);return{c(){o&&o.c(),e=kn()},l(l){o&&o.l(l),e=kn()},m(l,u){o&&o.m(l,u),jt(l,e,u),t=!0},p(l,u){l[2][l[14].id]?o?(o.p(l,u),u&132&&vt(o,1)):(o=W_(l),o.c(),vt(o,1),o.m(e.parentNode,e)):o&&(Fr(),Lt(o,1,1,()=>{o=null}),Or())},i(l){t||(vt(o),t=!0)},o(l){Lt(o),t=!1},d(l){o&&o.d(l),l&&De(e)}}}function W_(i){let e,t,o;return t=new j1({props:{map:i[0],layer:i[14],spriteLoader:i[5],relativeLayers:i[2]}}),t.$on("visibilityChanged",i[8]),{c(){e=Ht("a"),en(t.$$.fragment),this.h()},l(l){e=Gt(l,"A",{class:!0});var u=$t(e);un(t.$$.fragment,u),u.forEach(De),this.h()},h(){qt(e,"class","panel-block")},m(l,u){jt(l,e,u),tn(t,e,null),o=!0},p(l,u){const m={};u&1&&(m.map=l[0]),u&128&&(m.layer=l[14]),u&32&&(m.spriteLoader=l[5]),u&4&&(m.relativeLayers=l[2]),t.$set(m)},i(l){o||(vt(t.$$.fragment,l),o=!0)},o(l){Lt(t.$$.fragment,l),o=!1},d(l){l&&De(e),nn(t)}}}function X_(i){let e,t,o,l;const u=[hC,cC,uC],m=[];function r(f,_){return f[3]===!0?0:f[4]===!0?1:2}return e=r(i),t=m[e]=u[e](i),{c(){t.c(),o=kn()},l(f){t.l(f),o=kn()},m(f,_){m[e].m(f,_),jt(f,o,_),l=!0},p(f,_){let b=e;e=r(f),e===b?m[e].p(f,_):(Fr(),Lt(m[b],1,1,()=>{m[b]=null}),Or(),t=m[e],t?t.p(f,_):(t=m[e]=u[e](f),t.c()),vt(t,1),t.m(o.parentNode,o))},i(f){l||(vt(t),l=!0)},o(f){Lt(t),l=!1},d(f){m[e].d(f),f&&De(o)}}}function Y_(i){let e,t,o=i[7],l=[];for(let m=0;m<o.length;m+=1)l[m]=X_(U_(i,o,m));const u=m=>Lt(l[m],1,1,()=>{l[m]=null});return{c(){for(let m=0;m<l.length;m+=1)l[m].c();e=kn()},l(m){for(let r=0;r<l.length;r+=1)l[r].l(m);e=kn()},m(m,r){for(let f=0;f<l.length;f+=1)l[f].m(m,r);jt(m,e,r),t=!0},p(m,r){if(r&509){o=m[7];let f;for(f=0;f<o.length;f+=1){const _=U_(m,o,f);l[f]?(l[f].p(_,r),vt(l[f],1)):(l[f]=X_(_),l[f].c(),vt(l[f],1),l[f].m(e.parentNode,e))}for(Fr(),f=o.length;f<l.length;f+=1)u(f);Or()}},i(m){if(!t){for(let r=0;r<o.length;r+=1)vt(l[r]);t=!0}},o(m){l=l.filter(Boolean);for(let r=0;r<l.length;r+=1)Lt(l[r]);t=!1},d(m){Ja(l,m),m&&De(e)}}}function pC(i){let e,t,o,l,u,m,r,f,_,b=i[2]&&Object.keys(i[2]).length>0,v,w,x,C,T,S=b&&V_(i),M=i[5]&&q_(i);return{c(){e=Ht("nav"),t=Ht("div"),o=Ht("ul"),l=Ht("li"),u=Ht("a"),m=Ht("span"),r=Kn("Show rendered"),_=Wi(),S&&S.c(),v=Wi(),w=Ht("nav"),M&&M.c(),this.h()},l(O){e=Gt(O,"NAV",{class:!0});var V=$t(e);t=Gt(V,"DIV",{class:!0});var X=$t(t);o=Gt(X,"UL",{});var Z=$t(o);l=Gt(Z,"LI",{class:!0});var te=$t(l);u=Gt(te,"A",{});var J=$t(u);m=Gt(J,"SPAN",{});var ie=$t(m);r=Jn(ie,"Show rendered"),ie.forEach(De),J.forEach(De),te.forEach(De),_=Xi(Z),S&&S.l(Z),Z.forEach(De),X.forEach(De),v=Xi(V),w=Gt(V,"NAV",{class:!0});var Ee=$t(w);M&&M.l(Ee),Ee.forEach(De),V.forEach(De),this.h()},h(){qt(l,"class",f=i[3]?"is-active":""),qt(t,"class","tabs is-toggle is-fullwidth m-2 legend-header"),qt(w,"class","panel legend-content svelte-1ezzpaq"),qt(e,"class","panel")},m(O,V){jt(O,e,V),Ut(e,t),Ut(t,o),Ut(o,l),Ut(l,u),Ut(u,m),Ut(m,r),Ut(o,_),S&&S.m(o,null),Ut(e,v),Ut(e,w),M&&M.m(w,null),x=!0,C||(T=xn(l,"click",i[9]),C=!0)},p(O,[V]){(!x||V&8&&f!==(f=O[3]?"is-active":""))&&qt(l,"class",f),V&4&&(b=O[2]&&Object.keys(O[2]).length>0),b?S?S.p(O,V):(S=V_(O),S.c(),S.m(o,null)):S&&(S.d(1),S=null),O[5]?M?(M.p(O,V),V&32&&vt(M,1)):(M=q_(O),M.c(),vt(M,1),M.m(w,null)):M&&(Fr(),Lt(M,1,1,()=>{M=null}),Or())},i(O){x||(vt(M),x=!0)},o(O){Lt(M),x=!1},d(O){O&&De(e),S&&S.d(),M&&M.d(),C=!1,T()}}}function mC(i,e,t){let o,l;Yo(i,j_,M=>t(11,l=M));let{map:u}=e,{style:m}=e,r=!0,f=!0,_,b={},{relativeLayers:v={}}=e;const w=async()=>{if(!u||!m)return;const M=m.sprite;!M||(t(5,_=new lC(M)),await _.load(),x())},x=()=>{!u||!m||setTimeout(()=>{if(t(6,b={}),r===!0){Object.keys(l).forEach(O=>{t(6,b[O]=l[O],b)});const M=u.queryRenderedFeatures();o.forEach(O=>{M.filter(X=>X.layer.id===O.id).length>0&&t(6,b[O.id]=O,b)})}else o.forEach(M=>{t(6,b[M.id]=M,b)})},500)},C=M=>{const O=M.detail.layer;M.detail.visibility==="none"?vl(j_,l[O.id]=O,l):l[O.id]&&delete l[O.id]},T=()=>t(3,r=!r),S=()=>t(4,f=!f);return i.$$set=M=>{"map"in M&&t(0,u=M.map),"style"in M&&t(1,m=M.style),"relativeLayers"in M&&t(2,v=M.relativeLayers)},i.$$.update=()=>{i.$$.dirty&2&&t(7,o=m?m.layers:[]),i.$$.dirty&5&&(u&&(u.on("moveend",x),u.on("styledata",x),u.on("load",()=>{x()})),v&&Object.keys(v).length===0&&t(4,f=!1)),i.$$.dirty&8&&x(),i.$$.dirty&16&&x(),i.$$.dirty&2&&w()},[u,m,v,r,f,_,b,o,C,T,S]}class gC extends br{constructor(e){super(),wr(this,e,mC,pC,mr,{map:0,style:1,relativeLayers:2})}}function Z_(i){let e,t,o,l,u,m,r,f;o=new CA({}),o.$on("change",i[4]);function _(w){i[5](w)}function b(w){i[6](w)}let v={relativeLayers:i[3]};return i[1]!==void 0&&(v.map=i[1]),i[2]!==void 0&&(v.style=i[2]),u=new gC({props:v}),bn.push(()=>Uo(u,"map",_)),bn.push(()=>Uo(u,"style",b)),{c(){e=Ht("nav"),t=Ht("div"),en(o.$$.fragment),l=Wi(),en(u.$$.fragment),this.h()},l(w){e=Gt(w,"NAV",{class:!0});var x=$t(e);t=Gt(x,"DIV",{class:!0});var C=$t(t);un(o.$$.fragment,C),C.forEach(De),l=Xi(x),un(u.$$.fragment,x),x.forEach(De),this.h()},h(){qt(t,"class","panel-header m-1 p-0"),qt(e,"class","panel")},m(w,x){jt(w,e,x),Ut(e,t),tn(o,t,null),Ut(e,l),tn(u,e,null),f=!0},p(w,x){const C={};x&8&&(C.relativeLayers=w[3]),!m&&x&2&&(m=!0,C.map=w[1],Vo(()=>m=!1)),!r&&x&4&&(r=!0,C.style=w[2],Vo(()=>r=!1)),u.$set(C)},i(w){f||(vt(o.$$.fragment,w),vt(u.$$.fragment,w),f=!0)},o(w){Lt(o.$$.fragment,w),Lt(u.$$.fragment,w),f=!1},d(w){w&&De(e),nn(o),nn(u)}}}function yC(i){let e,t,o=i[0]&&Z_(i);return{c(){o&&o.c(),e=kn()},l(l){o&&o.l(l),e=kn()},m(l,u){o&&o.m(l,u),jt(l,e,u),t=!0},p(l,[u]){l[0]?o?(o.p(l,u),u&1&&vt(o,1)):(o=Z_(l),o.c(),vt(o,1),o.m(e.parentNode,e)):o&&(Fr(),Lt(o,1,1,()=>{o=null}),Or())},i(l){t||(vt(o),t=!0)},o(l){Lt(o),t=!1},d(l){o&&o.d(l),l&&De(e)}}}function _C(i,e,t){let o;Yo(i,Pu,b=>t(1,o=b));let l,u={},{isLayersTabVisible:m=!1}=e;Br.legend&&Br.legend.targets&&(u=Br.legend.targets);const r=()=>{!o||t(2,l=o.getStyle())};function f(b){o=b,Pu.set(o)}function _(b){l=b,t(2,l),t(1,o)}return i.$$set=b=>{"isLayersTabVisible"in b&&t(0,m=b.isLayersTabVisible)},i.$$.update=()=>{i.$$.dirty&2&&o&&o.on("load",()=>{t(2,l=o.getStyle())})},[m,o,l,u,r,f,_]}class vC extends br{constructor(e){super(),wr(this,e,_C,yC,mr,{isLayersTabVisible:0})}}const{Marker:bC}=z8,Y0={Walking:"pedestrian",Bicycle:"bicycle",Car:"auto"},Lu={Time:"time",Distance:"distance"};class wC{constructor(e,t,o){dl(this,"map");dl(this,"url");dl(this,"contourSources",[]);dl(this,"contourLayers",[]);dl(this,"contourMaker");dl(this,"contours",[{time:5,distance:1,color:"ff0000"},{time:10,distance:3,color:"ffff00"},{time:15,distance:5,color:"0000ff"}]);this.map=e,this.url=t,o&&(this.contours=o)}clearFeatures(){this.contourLayers&&this.contourLayers.length>0&&(this.contourLayers.forEach(e=>{var t;(t=this.map)==null||t.removeLayer(e)}),this.contourLayers=[]),this.contourSources&&this.contourSources.length>0&&(this.contourSources.forEach(e=>{var t;(t=this.map)==null||t.removeSource(e)}),this.contourSources=[]),this.contourMaker&&(this.contourMaker.remove(),this.contourMaker=void 0)}getIsochrone(e,t,o,l,u){this.clearFeatures();let m=JSON.parse(JSON.stringify(this.contours));u&&(m=u),m.forEach(f=>{o===Lu.Time?delete f.distance:delete f.time});let r="km";return o===Lu.Time&&(r="min"),new Promise((f,_)=>{const b={locations:[{lat:t,lon:e}],costing:l,contours:m,polygons:!0},v=`${this.url}/isochrone?json=${JSON.stringify(b)}`;fetch(v).then(w=>w.json()).then(w=>{w.features.forEach(x=>{var T,S,M,O;const C=`isochrone-${x.properties.contour}-${o}`;(T=this.map)==null||T.addSource(C,{type:"geojson",data:x}),this.contourSources.push(C),(S=this.map)==null||S.addLayer({id:`pg-${C}-${o}`,type:"fill",source:C,layout:{},paint:{"fill-color":x.properties.fillColor,"fill-opacity":.1}}),this.contourLayers.push(`pg-${C}-${o}`),(M=this.map)==null||M.addLayer({id:`ls-${C}-${o}`,type:"line",source:C,layout:{"line-join":"round","line-cap":"round"},paint:{"line-color":x.properties.fillColor,"line-width":3}}),this.contourLayers.push(`ls-${C}-${o}`),(O=this.map)==null||O.addLayer({id:`symbol-${C}-${o}`,type:"symbol",source:C,layout:{"symbol-placement":"line","text-pitch-alignment":"viewport","text-font":["Roboto Bold"],"text-field":["concat",["get","contour"],` ${r}`],"text-size":16},paint:{"text-color":"#000000","text-halo-width":1,"text-halo-color":"#FFFFFF"}}),this.contourLayers.push(`symbol-${C}-${o}`)}),this.map&&(this.contourMaker=new bC().setLngLat([e,t]).addTo(this.map)),f()}).catch(w=>_(w))})}getContoursOption(){return this.contours}}function xC(i){let e,t,o,l,u,m;const r=i[13].default,f=ur(r,i,i[12],null);let _=[{class:t=sr({[i[1]]:!0,"smui-accordion":!0,"smui-accordion--multiple":i[2],"smui-accordion--with-open-dialog":i[4]})},i[10]],b={};for(let v=0;v<_.length;v+=1)b=Yi(b,_[v]);return{c(){e=Ht("div"),f&&f.c(),this.h()},l(v){e=Gt(v,"DIV",{class:!0});var w=$t(e);f&&f.l(w),w.forEach(De),this.h()},h(){nr(e,b)},m(v,w){jt(v,e,w),f&&f.m(e,null),i[14](e),l=!0,u||(m=[tr(o=To.call(null,e,i[0])),tr(i[5].call(null,e)),xn(e,"SMUIAccordionPanel:mount",i[6]),xn(e,"SMUIAccordionPanel:unmount",i[7]),xn(e,"SMUIAccordionPanel:activate",i[8]),xn(e,"SMUIAccordionPanel:opening",i[9]),xn(e,"SMUIDialog:opening",i[15],!0),xn(e,"SMUIDialog:closed",i[16],!0)],u=!0)},p(v,[w]){f&&f.p&&(!l||w&4096)&&cr(f,r,v,v[12],l?fr(r,v[12],w,null):hr(v[12]),null),nr(e,b=xr(_,[(!l||w&22&&t!==(t=sr({[v[1]]:!0,"smui-accordion":!0,"smui-accordion--multiple":v[2],"smui-accordion--with-open-dialog":v[4]})))&&{class:t},w&1024&&v[10]])),o&&so(o.update)&&w&1&&o.update.call(null,v[0])},i(v){l||(vt(f,v),l=!0)},o(v){Lt(f,v),l=!1},d(v){v&&De(e),f&&f.d(v),i[14](null),u=!1,Lo(m)}}}function AC(i,e,t){const o=["use","class","multiple","getElement"];let l=Yn(e,o),{$$slots:u={},$$scope:m}=e;const r=_o(yo());let{use:f=[]}=e,{class:_=""}=e,{multiple:b=!1}=e,v,w=new Set,x=!1;function C(te){const J=te.detail;if(te.stopPropagation(),!b&&J.open){const ie=Array.from(w).find(Ee=>Ee.open);ie&&ie.setOpen(!1)}w.add(J)}function T(te){const J=te.detail;!w.has(J)||(te.stopPropagation(),w.delete(J))}function S(te){const{accessor:J}=te.detail;if(!!w.has(J)){if(!b&&!J.open){const ie=Array.from(w).find(Ee=>Ee.open);ie&&ie.setOpen(!1)}J.setOpen(!J.open)}}function M(te){const{accessor:J}=te.detail;!w.has(J)||b||Array.from(w).filter(Ee=>Ee!==J&&Ee.open).forEach(Ee=>Ee.setOpen(!1))}function O(){return v}function V(te){bn[te?"unshift":"push"](()=>{v=te,t(3,v)})}const X=()=>t(4,x=!0),Z=()=>t(4,x=!1);return i.$$set=te=>{e=Yi(Yi({},e),po(te)),t(10,l=Yn(e,o)),"use"in te&&t(0,f=te.use),"class"in te&&t(1,_=te.class),"multiple"in te&&t(2,b=te.multiple),"$$scope"in te&&t(12,m=te.$$scope)},[f,_,b,v,x,r,C,T,S,M,l,O,m,u,V,X,Z]}class kC extends br{constructor(e){super(),wr(this,e,AC,xC,mr,{use:0,class:1,multiple:2,getElement:11})}get getElement(){return this.$$.ctx[11]}}function SC(i){let e,t,o,l,u,m;const r=i[12].default,f=ur(r,i,i[11],null);let _=[{class:t=sr({[i[1]]:!0,"smui-paper":!0,"smui-paper--raised":i[2]==="raised","smui-paper--unelevated":i[2]==="unelevated","smui-paper--outlined":i[2]==="outlined",["smui-paper--elevation-z"+i[5]]:i[5]!==0&&i[2]==="raised","smui-paper--rounded":!i[3],["smui-paper--color-"+i[4]]:i[4]!=="default","smui-paper-transition":i[6]})},i[9]],b={};for(let v=0;v<_.length;v+=1)b=Yi(b,_[v]);return{c(){e=Ht("div"),f&&f.c(),this.h()},l(v){e=Gt(v,"DIV",{class:!0});var w=$t(e);f&&f.l(w),w.forEach(De),this.h()},h(){nr(e,b)},m(v,w){jt(v,e,w),f&&f.m(e,null),i[13](e),l=!0,u||(m=[tr(o=To.call(null,e,i[0])),tr(i[8].call(null,e))],u=!0)},p(v,[w]){f&&f.p&&(!l||w&2048)&&cr(f,r,v,v[11],l?fr(r,v[11],w,null):hr(v[11]),null),nr(e,b=xr(_,[(!l||w&126&&t!==(t=sr({[v[1]]:!0,"smui-paper":!0,"smui-paper--raised":v[2]==="raised","smui-paper--unelevated":v[2]==="unelevated","smui-paper--outlined":v[2]==="outlined",["smui-paper--elevation-z"+v[5]]:v[5]!==0&&v[2]==="raised","smui-paper--rounded":!v[3],["smui-paper--color-"+v[4]]:v[4]!=="default","smui-paper-transition":v[6]})))&&{class:t},w&512&&v[9]])),o&&so(o.update)&&w&1&&o.update.call(null,v[0])},i(v){l||(vt(f,v),l=!0)},o(v){Lt(f,v),l=!1},d(v){v&&De(e),f&&f.d(v),i[13](null),u=!1,Lo(m)}}}function CC(i,e,t){const o=["use","class","variant","square","color","elevation","transition","getElement"];let l=Yn(e,o),{$$slots:u={},$$scope:m}=e;const r=_o(yo());let{use:f=[]}=e,{class:_=""}=e,{variant:b="raised"}=e,{square:v=!1}=e,{color:w="default"}=e,{elevation:x=1}=e,{transition:C=!1}=e,T;function S(){return T}function M(O){bn[O?"unshift":"push"](()=>{T=O,t(7,T)})}return i.$$set=O=>{e=Yi(Yi({},e),po(O)),t(9,l=Yn(e,o)),"use"in O&&t(0,f=O.use),"class"in O&&t(1,_=O.class),"variant"in O&&t(2,b=O.variant),"square"in O&&t(3,v=O.square),"color"in O&&t(4,w=O.color),"elevation"in O&&t(5,x=O.elevation),"transition"in O&&t(6,C=O.transition),"$$scope"in O&&t(11,m=O.$$scope)},[f,_,b,v,w,x,C,T,r,l,S,m,u,M]}class EC extends br{constructor(e){super(),wr(this,e,CC,SC,mr,{use:0,class:1,variant:2,square:3,color:4,elevation:5,transition:6,getElement:10})}get getElement(){return this.$$.ctx[10]}}const U1=bl({class:"smui-paper__content",component:tp});bl({class:"smui-paper__title",component:A6});bl({class:"smui-paper__subtitle",component:k6});function IC(i){let e;const t=i[23].default,o=ur(t,i,i[25],null);return{c(){o&&o.c()},l(l){o&&o.l(l)},m(l,u){o&&o.m(l,u),e=!0},p(l,u){o&&o.p&&(!e||u&33554432)&&cr(o,t,l,l[25],e?fr(t,l[25],u,null):hr(l[25]),null)},i(l){e||(vt(o,l),e=!0)},o(l){Lt(o,l),e=!1},d(l){o&&o.d(l)}}}function TC(i){let e,t;const o=[{use:i[11]},{class:sr({[i[1]]:!0,"smui-accordion__panel":!0,"smui-accordion__panel--open":i[0],"smui-accordion__panel--opened":i[10],"smui-accordion__panel--disabled":i[5],"smui-accordion__panel--non-interactive":i[6],"smui-accordion__panel--raised":i[2]==="raised","smui-accordion__panel--extend":i[7],["smui-accordion__panel--elevation-z"+(i[7]&&i[0]?i[8]:i[4])]:i[4]!==0&&i[2]==="raised"||i[8]!==0&&i[2]==="raised"&&i[7]&&i[0]})},{color:i[3]},{variant:i[2]==="raised"?"unelevated":i[2]},i[16]];let l={$$slots:{default:[IC]},$$scope:{ctx:i}};for(let u=0;u<o.length;u+=1)l=Yi(l,o[u]);return e=new EC({props:l}),i[24](e),e.$on("SMUIAccordionHeader:activate",i[15]),{c(){en(e.$$.fragment)},l(u){un(e.$$.fragment,u)},m(u,m){tn(e,u,m),t=!0},p(u,[m]){const r=m&69119?xr(o,[m&2048&&{use:u[11]},m&1527&&{class:sr({[u[1]]:!0,"smui-accordion__panel":!0,"smui-accordion__panel--open":u[0],"smui-accordion__panel--opened":u[10],"smui-accordion__panel--disabled":u[5],"smui-accordion__panel--non-interactive":u[6],"smui-accordion__panel--raised":u[2]==="raised","smui-accordion__panel--extend":u[7],["smui-accordion__panel--elevation-z"+(u[7]&&u[0]?u[8]:u[4])]:u[4]!==0&&u[2]==="raised"||u[8]!==0&&u[2]==="raised"&&u[7]&&u[0]})},m&8&&{color:u[3]},m&4&&{variant:u[2]==="raised"?"unelevated":u[2]},m&65536&&Eo(u[16])]):{};m&33554432&&(r.$$scope={dirty:m,ctx:u}),e.$set(r)},i(u){t||(vt(e.$$.fragment,u),t=!0)},o(u){Lt(e.$$.fragment,u),t=!1},d(u){i[24](null),nn(e,u)}}}function LC(i,e,t){let o;const l=["use","class","variant","color","elevation","open","disabled","nonInteractive","extend","extendedElevation","isOpen","setOpen","getElement"];let u=Yn(e,l),m,r,f,{$$slots:_={},$$scope:b}=e;const v=_o(yo());let{use:w=[]}=e,{class:x=""}=e,{variant:C="raised"}=e,{color:T="default"}=e,{elevation:S=1}=e,{open:M=!1}=e,{disabled:O=!1}=e,{nonInteractive:V=!1}=e,{extend:X=!1}=e,{extendedElevation:Z=3}=e,te,J,ie=M;const Ee=Nl(O);Yo(i,Ee,Xe=>t(28,f=Xe)),as("SMUI:accordion:panel:disabled",Ee);const Pe=Nl(V);Yo(i,Pe,Xe=>t(27,r=Xe)),as("SMUI:accordion:panel:nonInteractive",Pe);const de=Nl(M);Yo(i,de,Xe=>t(26,m=Xe)),as("SMUI:accordion:panel:open",de);let Te=M;ks(()=>(t(21,J={get open(){return M},setOpen:ot}),Array.from(it().children).forEach(Xe=>{Xe.classList.contains("smui-paper__content")&&Xe.setAttribute("aria-hidden",M?"false":"true")}),Do(it(),"SMUIAccordionPanel:mount",J),()=>{Do(it(),"SMUIAccordionPanel:unmount",J)}));function ve(Xe){Xe.stopPropagation(),!(O||V)&&Do(it(),"SMUIAccordionPanel:activate",{accessor:J,event:Xe})}function _e(){return M}function ot(Xe){t(0,M=Xe)}function it(){return te.getElement()}function It(Xe){bn[Xe?"unshift":"push"](()=>{te=Xe,t(9,te)})}return i.$$set=Xe=>{e=Yi(Yi({},e),po(Xe)),t(16,u=Yn(e,l)),"use"in Xe&&t(17,w=Xe.use),"class"in Xe&&t(1,x=Xe.class),"variant"in Xe&&t(2,C=Xe.variant),"color"in Xe&&t(3,T=Xe.color),"elevation"in Xe&&t(4,S=Xe.elevation),"open"in Xe&&t(0,M=Xe.open),"disabled"in Xe&&t(5,O=Xe.disabled),"nonInteractive"in Xe&&t(6,V=Xe.nonInteractive),"extend"in Xe&&t(7,X=Xe.extend),"extendedElevation"in Xe&&t(8,Z=Xe.extendedElevation),"$$scope"in Xe&&t(25,b=Xe.$$scope)},i.$$.update=()=>{i.$$.dirty&131072&&t(11,o=[v,...w]),i.$$.dirty&32&&vl(Ee,f=O,f),i.$$.dirty&64&&vl(Pe,r=V,r),i.$$.dirty&1&&vl(de,m=M,m),i.$$.dirty&6291457&&Te!==M&&(t(22,Te=M),Array.from(it().children).forEach(Xe=>{if(Xe.classList.contains("smui-paper__content")){const we=Xe;if(M){we.classList.add("smui-accordion__content--no-transition"),we.classList.add("smui-accordion__content--force-open");const{height:Ce}=we.getBoundingClientRect();we.classList.remove("smui-accordion__content--force-open"),we.getBoundingClientRect(),we.classList.remove("smui-accordion__content--no-transition"),we.style.height=Ce+"px",we.addEventListener("transitionend",()=>{we&&(we.style.height=""),t(10,ie=M),Do(it(),"SMUIAccordionPanel:opened",{accessor:J})},{once:!0})}else we.style.height=we.getBoundingClientRect().height+"px",we.getBoundingClientRect(),requestAnimationFrame(()=>{we&&(we.style.height=""),Do(it(),"SMUIAccordionPanel:closed",{accessor:J})}),t(10,ie=!1);we.setAttribute("aria-hidden",M?"false":"true")}}),Do(it(),M?"SMUIAccordionPanel:opening":"SMUIAccordionPanel:closing",{accessor:J}))},[M,x,C,T,S,O,V,X,Z,te,ie,o,Ee,Pe,de,ve,u,w,_e,ot,it,J,Te,_,It,b]}class PC extends br{constructor(e){super(),wr(this,e,LC,TC,mr,{use:17,class:1,variant:2,color:3,elevation:4,open:0,disabled:5,nonInteractive:6,extend:7,extendedElevation:8,isOpen:18,setOpen:19,getElement:20})}get isOpen(){return this.$$.ctx[18]}get setOpen(){return this.$$.ctx[19]}get getElement(){return this.$$.ctx[20]}}/**
 * @license
 * Copyright 2020 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var uo={UNKNOWN:"Unknown",BACKSPACE:"Backspace",ENTER:"Enter",SPACEBAR:"Spacebar",PAGE_UP:"PageUp",PAGE_DOWN:"PageDown",END:"End",HOME:"Home",ARROW_LEFT:"ArrowLeft",ARROW_UP:"ArrowUp",ARROW_RIGHT:"ArrowRight",ARROW_DOWN:"ArrowDown",DELETE:"Delete",ESCAPE:"Escape",TAB:"Tab"},Ul=new Set;Ul.add(uo.BACKSPACE);Ul.add(uo.ENTER);Ul.add(uo.SPACEBAR);Ul.add(uo.PAGE_UP);Ul.add(uo.PAGE_DOWN);Ul.add(uo.END);Ul.add(uo.HOME);Ul.add(uo.ARROW_LEFT);Ul.add(uo.ARROW_UP);Ul.add(uo.ARROW_RIGHT);Ul.add(uo.ARROW_DOWN);Ul.add(uo.DELETE);Ul.add(uo.ESCAPE);Ul.add(uo.TAB);var lu={BACKSPACE:8,ENTER:13,SPACEBAR:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,ARROW_LEFT:37,ARROW_UP:38,ARROW_RIGHT:39,ARROW_DOWN:40,DELETE:46,ESCAPE:27,TAB:9},Vl=new Map;Vl.set(lu.BACKSPACE,uo.BACKSPACE);Vl.set(lu.ENTER,uo.ENTER);Vl.set(lu.SPACEBAR,uo.SPACEBAR);Vl.set(lu.PAGE_UP,uo.PAGE_UP);Vl.set(lu.PAGE_DOWN,uo.PAGE_DOWN);Vl.set(lu.END,uo.END);Vl.set(lu.HOME,uo.HOME);Vl.set(lu.ARROW_LEFT,uo.ARROW_LEFT);Vl.set(lu.ARROW_UP,uo.ARROW_UP);Vl.set(lu.ARROW_RIGHT,uo.ARROW_RIGHT);Vl.set(lu.ARROW_DOWN,uo.ARROW_DOWN);Vl.set(lu.DELETE,uo.DELETE);Vl.set(lu.ESCAPE,uo.ESCAPE);Vl.set(lu.TAB,uo.TAB);var _f=new Set;_f.add(uo.PAGE_UP);_f.add(uo.PAGE_DOWN);_f.add(uo.END);_f.add(uo.HOME);_f.add(uo.ARROW_LEFT);_f.add(uo.ARROW_UP);_f.add(uo.ARROW_RIGHT);_f.add(uo.ARROW_DOWN);function ca(i){var e=i.key;if(Ul.has(e))return e;var t=Vl.get(i.keyCode);return t||uo.UNKNOWN}const{applyPassive:jp}=l4,{matches:MC}=E1;function mf(i,{ripple:e=!0,surface:t=!1,unbounded:o=!1,disabled:l=!1,color:u,active:m,rippleElement:r,eventTarget:f,activeTarget:_,addClass:b=C=>i.classList.add(C),removeClass:v=C=>i.classList.remove(C),addStyle:w=(C,T)=>i.style.setProperty(C,T),initPromise:x=Promise.resolve()}={}){let C,T=xs("SMUI:addLayoutListener"),S,M=m,O=f,V=_;function X(){t?(b("mdc-ripple-surface"),u==="primary"?(b("smui-ripple-surface--primary"),v("smui-ripple-surface--secondary")):u==="secondary"?(v("smui-ripple-surface--primary"),b("smui-ripple-surface--secondary")):(v("smui-ripple-surface--primary"),v("smui-ripple-surface--secondary"))):(v("mdc-ripple-surface"),v("smui-ripple-surface--primary"),v("smui-ripple-surface--secondary")),C&&M!==m&&(M=m,m?C.activate():m===!1&&C.deactivate()),e&&!C?(C=new Ex({addClass:b,browserSupportsCssVars:()=>Sx(window),computeBoundingRect:()=>(r||i).getBoundingClientRect(),containsEventTarget:te=>i.contains(te),deregisterDocumentInteractionHandler:(te,J)=>document.documentElement.removeEventListener(te,J,jp()),deregisterInteractionHandler:(te,J)=>(f||i).removeEventListener(te,J,jp()),deregisterResizeHandler:te=>window.removeEventListener("resize",te),getWindowPageOffset:()=>({x:window.pageXOffset,y:window.pageYOffset}),isSurfaceActive:()=>m==null?MC(_||i,":active"):m,isSurfaceDisabled:()=>!!l,isUnbounded:()=>!!o,registerDocumentInteractionHandler:(te,J)=>document.documentElement.addEventListener(te,J,jp()),registerInteractionHandler:(te,J)=>(f||i).addEventListener(te,J,jp()),registerResizeHandler:te=>window.addEventListener("resize",te),removeClass:v,updateCssVariable:w}),x.then(()=>{C&&(C.init(),C.setUnbounded(o))})):C&&!e&&x.then(()=>{C&&(C.destroy(),C=void 0)}),C&&(O!==f||V!==_)&&(O=f,V=_,C.destroy(),requestAnimationFrame(()=>{C&&(C.init(),C.setUnbounded(o))})),!e&&o&&b("mdc-ripple-upgraded--unbounded")}X(),T&&(S=T(Z));function Z(){C&&C.layout()}return{update(te){({ripple:e,surface:t,unbounded:o,disabled:l,color:u,active:m,rippleElement:r,eventTarget:f,activeTarget:_,addClass:b,removeClass:v,addStyle:w,initPromise:x}=Object.assign({ripple:!0,surface:!1,unbounded:!1,disabled:!1,color:void 0,active:void 0,rippleElement:void 0,eventTarget:void 0,activeTarget:void 0,addClass:J=>i.classList.add(J),removeClass:J=>i.classList.remove(J),addStyle:(J,ie)=>i.style.setProperty(J,ie),initPromise:Promise.resolve()},te)),X()},destroy(){C&&(C.destroy(),C=void 0,v("mdc-ripple-surface"),v("smui-ripple-surface--primary"),v("smui-ripple-surface--secondary")),S&&S()}}}const DC=i=>({}),K_=i=>({}),OC=i=>({}),J_=i=>({});function Q_(i){let e;return{c(){e=Ht("div"),this.h()},l(t){e=Gt(t,"DIV",{class:!0}),$t(e).forEach(De),this.h()},h(){qt(e,"class","smui-accordion__header__ripple")},m(t,o){jt(t,e,o)},d(t){t&&De(e)}}}function $_(i){let e,t;const o=i[23].description,l=ur(o,i,i[22],J_);return{c(){e=Ht("div"),l&&l.c(),this.h()},l(u){e=Gt(u,"DIV",{class:!0});var m=$t(e);l&&l.l(m),m.forEach(De),this.h()},h(){qt(e,"class","smui-accordion__header__description")},m(u,m){jt(u,e,m),l&&l.m(e,null),t=!0},p(u,m){l&&l.p&&(!t||m&4194304)&&cr(l,o,u,u[22],t?fr(o,u[22],m,OC):hr(u[22]),J_)},i(u){t||(vt(l,u),t=!0)},o(u){Lt(l,u),t=!1},d(u){u&&De(e),l&&l.d(u)}}}function ev(i){let e,t;const o=i[23].icon,l=ur(o,i,i[22],K_);return{c(){e=Ht("div"),l&&l.c(),this.h()},l(u){e=Gt(u,"DIV",{class:!0});var m=$t(e);l&&l.l(m),m.forEach(De),this.h()},h(){qt(e,"class","smui-accordion__header__icon")},m(u,m){jt(u,e,m),l&&l.m(e,null),t=!0},p(u,m){l&&l.p&&(!t||m&4194304)&&cr(l,o,u,u[22],t?fr(o,u[22],m,DC):hr(u[22]),K_)},i(u){t||(vt(l,u),t=!0)},o(u){Lt(l,u),t=!1},d(u){u&&De(e),l&&l.d(u)}}}function FC(i){let e,t,o,l,u,m,r,f,_,b,v,w,x,C,T,S=i[3]&&Q_();const M=i[23].default,O=ur(M,i,i[22],null);let V=i[20].description&&$_(i),X=i[20].icon&&ev(i),Z=[{class:r=sr({[i[1]]:!0,"smui-accordion__header":!0,...i[5]})},{style:f=Object.entries(i[6]).map(tv).concat([i[2]]).join(" ")},{role:"button"},{tabindex:_=i[7]?-1:0},{"aria-expanded":b=i[9]?"true":"false"},i[19]],te={};for(let J=0;J<Z.length;J+=1)te=Yi(te,Z[J]);return{c(){e=Ht("div"),S&&S.c(),t=Wi(),o=Ht("div"),O&&O.c(),u=Wi(),V&&V.c(),m=Wi(),X&&X.c(),this.h()},l(J){e=Gt(J,"DIV",{class:!0,style:!0,role:!0,tabindex:!0,"aria-expanded":!0});var ie=$t(e);S&&S.l(ie),t=Xi(ie),o=Gt(ie,"DIV",{class:!0});var Ee=$t(o);O&&O.l(Ee),Ee.forEach(De),u=Xi(ie),V&&V.l(ie),m=Xi(ie),X&&X.l(ie),ie.forEach(De),this.h()},h(){qt(o,"class",l=sr({"smui-accordion__header__title":!0,"smui-accordion__header__title--with-description":i[20].description})),nr(e,te)},m(J,ie){jt(J,e,ie),S&&S.m(e,null),Ut(e,t),Ut(e,o),O&&O.m(o,null),Ut(e,u),V&&V.m(e,null),Ut(e,m),X&&X.m(e,null),i[24](e),x=!0,C||(T=[tr(v=To.call(null,e,i[0])),tr(i[10].call(null,e)),tr(w=mf.call(null,e,{ripple:i[3],unbounded:!1,surface:!i[7],disabled:i[8]||i[7],addClass:i[16],removeClass:i[17],addStyle:i[18]})),xn(e,"click",i[14]),xn(e,"keydown",i[15])],C=!0)},p(J,[ie]){J[3]?S||(S=Q_(),S.c(),S.m(e,t)):S&&(S.d(1),S=null),O&&O.p&&(!x||ie&4194304)&&cr(O,M,J,J[22],x?fr(M,J[22],ie,null):hr(J[22]),null),(!x||ie&1048576&&l!==(l=sr({"smui-accordion__header__title":!0,"smui-accordion__header__title--with-description":J[20].description})))&&qt(o,"class",l),J[20].description?V?(V.p(J,ie),ie&1048576&&vt(V,1)):(V=$_(J),V.c(),vt(V,1),V.m(e,m)):V&&(Fr(),Lt(V,1,1,()=>{V=null}),Or()),J[20].icon?X?(X.p(J,ie),ie&1048576&&vt(X,1)):(X=ev(J),X.c(),vt(X,1),X.m(e,null)):X&&(Fr(),Lt(X,1,1,()=>{X=null}),Or()),nr(e,te=xr(Z,[(!x||ie&34&&r!==(r=sr({[J[1]]:!0,"smui-accordion__header":!0,...J[5]})))&&{class:r},(!x||ie&68&&f!==(f=Object.entries(J[6]).map(tv).concat([J[2]]).join(" ")))&&{style:f},{role:"button"},(!x||ie&128&&_!==(_=J[7]?-1:0))&&{tabindex:_},(!x||ie&512&&b!==(b=J[9]?"true":"false"))&&{"aria-expanded":b},ie&524288&&J[19]])),v&&so(v.update)&&ie&1&&v.update.call(null,J[0]),w&&so(w.update)&&ie&392&&w.update.call(null,{ripple:J[3],unbounded:!1,surface:!J[7],disabled:J[8]||J[7],addClass:J[16],removeClass:J[17],addStyle:J[18]})},i(J){x||(vt(O,J),vt(V),vt(X),x=!0)},o(J){Lt(O,J),Lt(V),Lt(X),x=!1},d(J){J&&De(e),S&&S.d(),O&&O.d(J),V&&V.d(),X&&X.d(),i[24](null),C=!1,Lo(T)}}}const tv=([i,e])=>`${i}: ${e};`;function RC(i,e,t){const o=["use","class","style","ripple","getElement"];let l=Yn(e,o),u,m,r,{$$slots:f={},$$scope:_}=e;const b=hg(f),v=_o(yo());let{use:w=[]}=e,{class:x=""}=e,{style:C=""}=e,{ripple:T=!0}=e,S,M={},O={};const V=xs("SMUI:accordion:panel:disabled");Yo(i,V,ve=>t(8,m=ve));const X=xs("SMUI:accordion:panel:nonInteractive");Yo(i,X,ve=>t(7,u=ve));const Z=xs("SMUI:accordion:panel:open");Yo(i,Z,ve=>t(9,r=ve));function te(ve){ve=ve,ve.button===0&&Do(de(),"SMUIAccordionHeader:activate",{event:ve})}function J(ve){ve=ve,ve.key==="Enter"&&Do(de(),"SMUIAccordionHeader:activate",{event:ve})}function ie(ve){M[ve]||t(5,M[ve]=!0,M)}function Ee(ve){(!(ve in M)||M[ve])&&t(5,M[ve]=!1,M)}function Pe(ve,_e){O[ve]!=_e&&(_e===""||_e==null?(delete O[ve],t(6,O)):t(6,O[ve]=_e,O))}function de(){return S}function Te(ve){bn[ve?"unshift":"push"](()=>{S=ve,t(4,S)})}return i.$$set=ve=>{e=Yi(Yi({},e),po(ve)),t(19,l=Yn(e,o)),"use"in ve&&t(0,w=ve.use),"class"in ve&&t(1,x=ve.class),"style"in ve&&t(2,C=ve.style),"ripple"in ve&&t(3,T=ve.ripple),"$$scope"in ve&&t(22,_=ve.$$scope)},[w,x,C,T,S,M,O,u,m,r,v,V,X,Z,te,J,ie,Ee,Pe,l,b,de,_,f,Te]}class BC extends br{constructor(e){super(),wr(this,e,RC,FC,mr,{use:0,class:1,style:2,ripple:3,getElement:21})}get getElement(){return this.$$.ctx[21]}}const Up=PC,V1=BC;function iv(i){let e;return{c(){e=Ht("div"),this.h()},l(t){e=Gt(t,"DIV",{class:!0}),$t(e).forEach(De),this.h()},h(){qt(e,"class","mdc-button__touch")},m(t,o){jt(t,e,o)},d(t){t&&De(e)}}}function zC(i){let e,t,o,l;const u=i[27].default,m=ur(u,i,i[29],null);let r=i[6]&&iv();return{c(){e=Ht("div"),t=Wi(),m&&m.c(),r&&r.c(),o=kn(),this.h()},l(f){e=Gt(f,"DIV",{class:!0}),$t(e).forEach(De),t=Xi(f),m&&m.l(f),r&&r.l(f),o=kn(),this.h()},h(){qt(e,"class","mdc-button__ripple")},m(f,_){jt(f,e,_),jt(f,t,_),m&&m.m(f,_),r&&r.m(f,_),jt(f,o,_),l=!0},p(f,_){m&&m.p&&(!l||_&536870912)&&cr(m,u,f,f[29],l?fr(u,f[29],_,null):hr(f[29]),null),f[6]?r||(r=iv(),r.c(),r.m(o.parentNode,o)):r&&(r.d(1),r=null)},i(f){l||(vt(m,f),l=!0)},o(f){Lt(m,f),l=!1},d(f){f&&De(e),f&&De(t),m&&m.d(f),r&&r.d(f),f&&De(o)}}}function NC(i){let e,t,o;const l=[{use:[[mf,{ripple:i[3],unbounded:!1,color:i[4],disabled:!!i[22].disabled,addClass:i[18],removeClass:i[19],addStyle:i[20]}],i[16],...i[0]]},{class:sr({[i[1]]:!0,"mdc-button":!0,"mdc-button--raised":i[5]==="raised","mdc-button--unelevated":i[5]==="unelevated","mdc-button--outlined":i[5]==="outlined","smui-button--color-secondary":i[4]==="secondary","mdc-button--touch":i[6],"mdc-card__action":i[17]==="card:action","mdc-card__action--button":i[17]==="card:action","mdc-dialog__button":i[17]==="dialog:action","mdc-top-app-bar__navigation-icon":i[17]==="top-app-bar:navigation","mdc-top-app-bar__action-item":i[17]==="top-app-bar:action","mdc-snackbar__action":i[17]==="snackbar:actions","mdc-banner__secondary-action":i[17]==="banner"&&i[8],"mdc-banner__primary-action":i[17]==="banner"&&!i[8],"mdc-tooltip__action":i[17]==="tooltip:rich-actions",...i[11]})},{style:Object.entries(i[12]).map(nv).concat([i[2]]).join(" ")},i[15],i[14],i[13],{href:i[7]},i[22]];var u=i[9];function m(r){let f={$$slots:{default:[zC]},$$scope:{ctx:r}};for(let _=0;_<l.length;_+=1)f=Yi(f,l[_]);return{props:f}}return u&&(e=ou(u,m(i)),i[28](e),e.$on("click",i[21])),{c(){e&&en(e.$$.fragment),t=kn()},l(r){e&&un(e.$$.fragment,r),t=kn()},m(r,f){e&&tn(e,r,f),jt(r,t,f),o=!0},p(r,[f]){const _=f&6289919?xr(l,[f&6094873&&{use:[[mf,{ripple:r[3],unbounded:!1,color:r[4],disabled:!!r[22].disabled,addClass:r[18],removeClass:r[19],addStyle:r[20]}],r[16],...r[0]]},f&133490&&{class:sr({[r[1]]:!0,"mdc-button":!0,"mdc-button--raised":r[5]==="raised","mdc-button--unelevated":r[5]==="unelevated","mdc-button--outlined":r[5]==="outlined","smui-button--color-secondary":r[4]==="secondary","mdc-button--touch":r[6],"mdc-card__action":r[17]==="card:action","mdc-card__action--button":r[17]==="card:action","mdc-dialog__button":r[17]==="dialog:action","mdc-top-app-bar__navigation-icon":r[17]==="top-app-bar:navigation","mdc-top-app-bar__action-item":r[17]==="top-app-bar:action","mdc-snackbar__action":r[17]==="snackbar:actions","mdc-banner__secondary-action":r[17]==="banner"&&r[8],"mdc-banner__primary-action":r[17]==="banner"&&!r[8],"mdc-tooltip__action":r[17]==="tooltip:rich-actions",...r[11]})},f&4100&&{style:Object.entries(r[12]).map(nv).concat([r[2]]).join(" ")},f&32768&&Eo(r[15]),f&16384&&Eo(r[14]),f&8192&&Eo(r[13]),f&128&&{href:r[7]},f&4194304&&Eo(r[22])]):{};if(f&536870976&&(_.$$scope={dirty:f,ctx:r}),u!==(u=r[9])){if(e){Fr();const b=e;Lt(b.$$.fragment,1,0,()=>{nn(b,1)}),Or()}u?(e=ou(u,m(r)),r[28](e),e.$on("click",r[21]),en(e.$$.fragment),vt(e.$$.fragment,1),tn(e,t.parentNode,t)):e=null}else u&&e.$set(_)},i(r){o||(e&&vt(e.$$.fragment,r),o=!0)},o(r){e&&Lt(e.$$.fragment,r),o=!1},d(r){i[28](null),r&&De(t),e&&nn(e,r)}}}const nv=([i,e])=>`${i}: ${e};`;function jC(i,e,t){let o,l,u;const m=["use","class","style","ripple","color","variant","touch","href","action","defaultAction","secondary","component","getElement"];let r=Yn(e,m),{$$slots:f={},$$scope:_}=e;const b=_o(yo());let{use:v=[]}=e,{class:w=""}=e,{style:x=""}=e,{ripple:C=!0}=e,{color:T="primary"}=e,{variant:S="text"}=e,{touch:M=!1}=e,{href:O=void 0}=e,{action:V="close"}=e,{defaultAction:X=!1}=e,{secondary:Z=!1}=e,te,J={},ie={},Ee=xs("SMUI:button:context"),{component:Pe=O==null?w6:d4}=e,de=r.disabled;as("SMUI:label:context","button"),as("SMUI:icon:context","button");function Te(Xe){J[Xe]||t(11,J[Xe]=!0,J)}function ve(Xe){(!(Xe in J)||J[Xe])&&t(11,J[Xe]=!1,J)}function _e(Xe,we){ie[Xe]!=we&&(we===""||we==null?(delete ie[Xe],t(12,ie)):t(12,ie[Xe]=we,ie))}function ot(){Ee==="banner"&&Do(it(),Z?"SMUIBannerButton:secondaryActionClick":"SMUIBannerButton:primaryActionClick")}function it(){return te.getElement()}function It(Xe){bn[Xe?"unshift":"push"](()=>{te=Xe,t(10,te)})}return i.$$set=Xe=>{t(30,e=Yi(Yi({},e),po(Xe))),t(22,r=Yn(e,m)),"use"in Xe&&t(0,v=Xe.use),"class"in Xe&&t(1,w=Xe.class),"style"in Xe&&t(2,x=Xe.style),"ripple"in Xe&&t(3,C=Xe.ripple),"color"in Xe&&t(4,T=Xe.color),"variant"in Xe&&t(5,S=Xe.variant),"touch"in Xe&&t(6,M=Xe.touch),"href"in Xe&&t(7,O=Xe.href),"action"in Xe&&t(23,V=Xe.action),"defaultAction"in Xe&&t(24,X=Xe.defaultAction),"secondary"in Xe&&t(8,Z=Xe.secondary),"component"in Xe&&t(9,Pe=Xe.component),"$$scope"in Xe&&t(29,_=Xe.$$scope)},i.$$.update=()=>{t(15,o=Ee==="dialog:action"&&V!=null?{"data-mdc-dialog-action":V}:{action:e.action}),t(14,l=Ee==="dialog:action"&&X?{"data-mdc-dialog-button-default":""}:{default:e.default}),t(13,u=Ee==="banner"?{}:{secondary:e.secondary}),de!==r.disabled&&(it().blur(),t(26,de=r.disabled))},e=po(e),[v,w,x,C,T,S,M,O,Z,Pe,te,J,ie,u,l,o,b,Ee,Te,ve,_e,ot,r,V,X,it,de,f,It,_]}class Ph extends br{constructor(e){super(),wr(this,e,jC,NC,mr,{use:0,class:1,style:2,ripple:3,color:4,variant:5,touch:6,href:7,action:23,defaultAction:24,secondary:8,component:9,getElement:25})}get getElement(){return this.$$.ctx[25]}}function UC(i){let e;const t=i[9].default,o=ur(t,i,i[11],null);return{c(){o&&o.c()},l(l){o&&o.l(l)},m(l,u){o&&o.m(l,u),e=!0},p(l,u){o&&o.p&&(!e||u&2048)&&cr(o,t,l,l[11],e?fr(t,l[11],u,null):hr(l[11]),null)},i(l){e||(vt(o,l),e=!0)},o(l){Lt(o,l),e=!1},d(l){o&&o.d(l)}}}function VC(i){let e,t,o;const l=[{use:[i[4],...i[0]]},{class:sr({[i[1]]:!0,"mdc-button__label":i[5]==="button","mdc-fab__label":i[5]==="fab","mdc-tab__text-label":i[5]==="tab","mdc-image-list__label":i[5]==="image-list","mdc-snackbar__label":i[5]==="snackbar","mdc-banner__text":i[5]==="banner","mdc-segmented-button__label":i[5]==="segmented-button","mdc-data-table__pagination-rows-per-page-label":i[5]==="data-table:pagination","mdc-data-table__header-cell-label":i[5]==="data-table:sortable-header-cell"})},i[5]==="snackbar"?{"aria-atomic":"false"}:{},{tabindex:i[6]},i[7]];var u=i[2];function m(r){let f={$$slots:{default:[UC]},$$scope:{ctx:r}};for(let _=0;_<l.length;_+=1)f=Yi(f,l[_]);return{props:f}}return u&&(e=ou(u,m(i)),i[10](e)),{c(){e&&en(e.$$.fragment),t=kn()},l(r){e&&un(e.$$.fragment,r),t=kn()},m(r,f){e&&tn(e,r,f),jt(r,t,f),o=!0},p(r,[f]){const _=f&243?xr(l,[f&17&&{use:[r[4],...r[0]]},f&34&&{class:sr({[r[1]]:!0,"mdc-button__label":r[5]==="button","mdc-fab__label":r[5]==="fab","mdc-tab__text-label":r[5]==="tab","mdc-image-list__label":r[5]==="image-list","mdc-snackbar__label":r[5]==="snackbar","mdc-banner__text":r[5]==="banner","mdc-segmented-button__label":r[5]==="segmented-button","mdc-data-table__pagination-rows-per-page-label":r[5]==="data-table:pagination","mdc-data-table__header-cell-label":r[5]==="data-table:sortable-header-cell"})},f&32&&Eo(r[5]==="snackbar"?{"aria-atomic":"false"}:{}),f&64&&{tabindex:r[6]},f&128&&Eo(r[7])]):{};if(f&2048&&(_.$$scope={dirty:f,ctx:r}),u!==(u=r[2])){if(e){Fr();const b=e;Lt(b.$$.fragment,1,0,()=>{nn(b,1)}),Or()}u?(e=ou(u,m(r)),r[10](e),en(e.$$.fragment),vt(e.$$.fragment,1),tn(e,t.parentNode,t)):e=null}else u&&e.$set(_)},i(r){o||(e&&vt(e.$$.fragment,r),o=!0)},o(r){e&&Lt(e.$$.fragment,r),o=!1},d(r){i[10](null),r&&De(t),e&&nn(e,r)}}}function qC(i,e,t){const o=["use","class","component","getElement"];let l=Yn(e,o),{$$slots:u={},$$scope:m}=e;const r=_o(yo());let{use:f=[]}=e,{class:_=""}=e,b,{component:v=f4}=e;const w=xs("SMUI:label:context"),x=xs("SMUI:label:tabindex");function C(){return b.getElement()}function T(S){bn[S?"unshift":"push"](()=>{b=S,t(3,b)})}return i.$$set=S=>{e=Yi(Yi({},e),po(S)),t(7,l=Yn(e,o)),"use"in S&&t(0,f=S.use),"class"in S&&t(1,_=S.class),"component"in S&&t(2,v=S.component),"$$scope"in S&&t(11,m=S.$$scope)},[f,_,v,b,r,w,x,l,C,u,T,m]}class HC extends br{constructor(e){super(),wr(this,e,qC,VC,mr,{use:0,class:1,component:2,getElement:8})}get getElement(){return this.$$.ctx[8]}}function GC(i){let e;const t=i[9].default,o=ur(t,i,i[11],null);return{c(){o&&o.c()},l(l){o&&o.l(l)},m(l,u){o&&o.m(l,u),e=!0},p(l,u){o&&o.p&&(!e||u&2048)&&cr(o,t,l,l[11],e?fr(t,l[11],u,null):hr(l[11]),null)},i(l){e||(vt(o,l),e=!0)},o(l){Lt(o,l),e=!1},d(l){o&&o.d(l)}}}function WC(i){let e,t,o;const l=[{use:[i[5],...i[0]]},{class:sr({[i[1]]:!0,"mdc-button__icon":i[6]==="button","mdc-fab__icon":i[6]==="fab","mdc-icon-button__icon":i[6]==="icon-button","mdc-icon-button__icon--on":i[6]==="icon-button"&&i[2],"mdc-tab__icon":i[6]==="tab","mdc-banner__icon":i[6]==="banner","mdc-segmented-button__icon":i[6]==="segmented-button"})},{"aria-hidden":"true"},i[3]===Jy?{focusable:"false",tabindex:"-1"}:{},i[7]];var u=i[3];function m(r){let f={$$slots:{default:[GC]},$$scope:{ctx:r}};for(let _=0;_<l.length;_+=1)f=Yi(f,l[_]);return{props:f}}return u&&(e=ou(u,m(i)),i[10](e)),{c(){e&&en(e.$$.fragment),t=kn()},l(r){e&&un(e.$$.fragment,r),t=kn()},m(r,f){e&&tn(e,r,f),jt(r,t,f),o=!0},p(r,[f]){const _=f&239?xr(l,[f&33&&{use:[r[5],...r[0]]},f&70&&{class:sr({[r[1]]:!0,"mdc-button__icon":r[6]==="button","mdc-fab__icon":r[6]==="fab","mdc-icon-button__icon":r[6]==="icon-button","mdc-icon-button__icon--on":r[6]==="icon-button"&&r[2],"mdc-tab__icon":r[6]==="tab","mdc-banner__icon":r[6]==="banner","mdc-segmented-button__icon":r[6]==="segmented-button"})},l[2],f&8&&Eo(r[3]===Jy?{focusable:"false",tabindex:"-1"}:{}),f&128&&Eo(r[7])]):{};if(f&2048&&(_.$$scope={dirty:f,ctx:r}),u!==(u=r[3])){if(e){Fr();const b=e;Lt(b.$$.fragment,1,0,()=>{nn(b,1)}),Or()}u?(e=ou(u,m(r)),r[10](e),en(e.$$.fragment),vt(e.$$.fragment,1),tn(e,t.parentNode,t)):e=null}else u&&e.$set(_)},i(r){o||(e&&vt(e.$$.fragment,r),o=!0)},o(r){e&&Lt(e.$$.fragment,r),o=!1},d(r){i[10](null),r&&De(t),e&&nn(e,r)}}}function XC(i,e,t){const o=["use","class","on","component","getElement"];let l=Yn(e,o),{$$slots:u={},$$scope:m}=e;const r=_o(yo());let{use:f=[]}=e,{class:_=""}=e,{on:b=!1}=e,v,{component:w=r6}=e;const x=xs("SMUI:icon:context");function C(){return v.getElement()}function T(S){bn[S?"unshift":"push"](()=>{v=S,t(4,v)})}return i.$$set=S=>{e=Yi(Yi({},e),po(S)),t(7,l=Yn(e,o)),"use"in S&&t(0,f=S.use),"class"in S&&t(1,_=S.class),"on"in S&&t(2,b=S.on),"component"in S&&t(3,w=S.component),"$$scope"in S&&t(11,m=S.$$scope)},[f,_,b,w,v,r,x,l,C,u,T,m]}class YC extends br{constructor(e){super(),wr(this,e,XC,WC,mr,{use:0,class:1,on:2,component:3,getElement:8})}get getElement(){return this.$$.ctx[8]}}function ZC(i){let e;const t=i[4].default,o=ur(t,i,i[3],null);return{c(){o&&o.c()},l(l){o&&o.l(l)},m(l,u){o&&o.m(l,u),e=!0},p(l,[u]){o&&o.p&&(!e||u&8)&&cr(o,t,l,l[3],e?fr(t,l[3],u,null):hr(l[3]),null)},i(l){e||(vt(o,l),e=!0)},o(l){Lt(o,l),e=!1},d(l){o&&o.d(l)}}}function KC(i,e,t){let o,{$$slots:l={},$$scope:u}=e,{key:m}=e,{value:r}=e;const f=Nl(r);return Yo(i,f,_=>t(5,o=_)),as(m,f),nh(()=>{f.set(void 0)}),i.$$set=_=>{"key"in _&&t(1,m=_.key),"value"in _&&t(2,r=_.value),"$$scope"in _&&t(3,u=_.$$scope)},i.$$.update=()=>{i.$$.dirty&4&&vl(f,o=r,o)},[f,m,r,u,l]}class k1 extends br{constructor(e){super(),wr(this,e,KC,ZC,mr,{key:1,value:2})}}const oh=HC,Dh=YC;var hw={exports:{}},Hg={exports:{}},fw=function(e,t){return function(){for(var l=new Array(arguments.length),u=0;u<l.length;u++)l[u]=arguments[u];return e.apply(t,l)}},JC=fw,t0=Object.prototype.toString;function Gg(i){return t0.call(i)==="[object Array]"}function K2(i){return typeof i>"u"}function QC(i){return i!==null&&!K2(i)&&i.constructor!==null&&!K2(i.constructor)&&typeof i.constructor.isBuffer=="function"&&i.constructor.isBuffer(i)}function $C(i){return t0.call(i)==="[object ArrayBuffer]"}function eE(i){return typeof FormData<"u"&&i instanceof FormData}function tE(i){var e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(i):e=i&&i.buffer&&i.buffer instanceof ArrayBuffer,e}function iE(i){return typeof i=="string"}function nE(i){return typeof i=="number"}function dw(i){return i!==null&&typeof i=="object"}function s1(i){if(t0.call(i)!=="[object Object]")return!1;var e=Object.getPrototypeOf(i);return e===null||e===Object.prototype}function rE(i){return t0.call(i)==="[object Date]"}function oE(i){return t0.call(i)==="[object File]"}function sE(i){return t0.call(i)==="[object Blob]"}function pw(i){return t0.call(i)==="[object Function]"}function aE(i){return dw(i)&&pw(i.pipe)}function lE(i){return typeof URLSearchParams<"u"&&i instanceof URLSearchParams}function uE(i){return i.trim?i.trim():i.replace(/^\s+|\s+$/g,"")}function cE(){return typeof navigator<"u"&&(navigator.product==="ReactNative"||navigator.product==="NativeScript"||navigator.product==="NS")?!1:typeof window<"u"&&typeof document<"u"}function Wg(i,e){if(!(i===null||typeof i>"u"))if(typeof i!="object"&&(i=[i]),Gg(i))for(var t=0,o=i.length;t<o;t++)e.call(null,i[t],t,i);else for(var l in i)Object.prototype.hasOwnProperty.call(i,l)&&e.call(null,i[l],l,i)}function J2(){var i={};function e(l,u){s1(i[u])&&s1(l)?i[u]=J2(i[u],l):s1(l)?i[u]=J2({},l):Gg(l)?i[u]=l.slice():i[u]=l}for(var t=0,o=arguments.length;t<o;t++)Wg(arguments[t],e);return i}function hE(i,e,t){return Wg(e,function(l,u){t&&typeof l=="function"?i[u]=JC(l,t):i[u]=l}),i}function fE(i){return i.charCodeAt(0)===65279&&(i=i.slice(1)),i}var Fu={isArray:Gg,isArrayBuffer:$C,isBuffer:QC,isFormData:eE,isArrayBufferView:tE,isString:iE,isNumber:nE,isObject:dw,isPlainObject:s1,isUndefined:K2,isDate:rE,isFile:oE,isBlob:sE,isFunction:pw,isStream:aE,isURLSearchParams:lE,isStandardBrowserEnv:cE,forEach:Wg,merge:J2,extend:hE,trim:uE,stripBOM:fE},w0=Fu;function rv(i){return encodeURIComponent(i).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var mw=function(e,t,o){if(!t)return e;var l;if(o)l=o(t);else if(w0.isURLSearchParams(t))l=t.toString();else{var u=[];w0.forEach(t,function(f,_){f===null||typeof f>"u"||(w0.isArray(f)?_=_+"[]":f=[f],w0.forEach(f,function(v){w0.isDate(v)?v=v.toISOString():w0.isObject(v)&&(v=JSON.stringify(v)),u.push(rv(_)+"="+rv(v))}))}),l=u.join("&")}if(l){var m=e.indexOf("#");m!==-1&&(e=e.slice(0,m)),e+=(e.indexOf("?")===-1?"?":"&")+l}return e},dE=Fu;function q1(){this.handlers=[]}q1.prototype.use=function(e,t,o){return this.handlers.push({fulfilled:e,rejected:t,synchronous:o?o.synchronous:!1,runWhen:o?o.runWhen:null}),this.handlers.length-1};q1.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)};q1.prototype.forEach=function(e){dE.forEach(this.handlers,function(o){o!==null&&e(o)})};var pE=q1,mE=Fu,gE=function(e,t){mE.forEach(e,function(l,u){u!==t&&u.toUpperCase()===t.toUpperCase()&&(e[t]=l,delete e[u])})},gw=function(e,t,o,l,u){return e.config=t,o&&(e.code=o),e.request=l,e.response=u,e.isAxiosError=!0,e.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},e},Wm,ov;function yw(){if(ov)return Wm;ov=1;var i=gw;return Wm=function(t,o,l,u,m){var r=new Error(t);return i(r,o,l,u,m)},Wm}var Xm,sv;function yE(){if(sv)return Xm;sv=1;var i=yw();return Xm=function(t,o,l){var u=l.config.validateStatus;!l.status||!u||u(l.status)?t(l):o(i("Request failed with status code "+l.status,l.config,null,l.request,l))},Xm}var Ym,av;function _E(){if(av)return Ym;av=1;var i=Fu;return Ym=i.isStandardBrowserEnv()?function(){return{write:function(o,l,u,m,r,f){var _=[];_.push(o+"="+encodeURIComponent(l)),i.isNumber(u)&&_.push("expires="+new Date(u).toGMTString()),i.isString(m)&&_.push("path="+m),i.isString(r)&&_.push("domain="+r),f===!0&&_.push("secure"),document.cookie=_.join("; ")},read:function(o){var l=document.cookie.match(new RegExp("(^|;\\s*)("+o+")=([^;]*)"));return l?decodeURIComponent(l[3]):null},remove:function(o){this.write(o,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}(),Ym}var Zm,lv;function vE(){return lv||(lv=1,Zm=function(e){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(e)}),Zm}var Km,uv;function bE(){return uv||(uv=1,Km=function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}),Km}var Jm,cv;function wE(){if(cv)return Jm;cv=1;var i=vE(),e=bE();return Jm=function(o,l){return o&&!i(l)?e(o,l):l},Jm}var Qm,hv;function xE(){if(hv)return Qm;hv=1;var i=Fu,e=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];return Qm=function(o){var l={},u,m,r;return o&&i.forEach(o.split(`
`),function(_){if(r=_.indexOf(":"),u=i.trim(_.substr(0,r)).toLowerCase(),m=i.trim(_.substr(r+1)),u){if(l[u]&&e.indexOf(u)>=0)return;u==="set-cookie"?l[u]=(l[u]?l[u]:[]).concat([m]):l[u]=l[u]?l[u]+", "+m:m}}),l},Qm}var $m,fv;function AE(){if(fv)return $m;fv=1;var i=Fu;return $m=i.isStandardBrowserEnv()?function(){var t=/(msie|trident)/i.test(navigator.userAgent),o=document.createElement("a"),l;function u(m){var r=m;return t&&(o.setAttribute("href",r),r=o.href),o.setAttribute("href",r),{href:o.href,protocol:o.protocol?o.protocol.replace(/:$/,""):"",host:o.host,search:o.search?o.search.replace(/^\?/,""):"",hash:o.hash?o.hash.replace(/^#/,""):"",hostname:o.hostname,port:o.port,pathname:o.pathname.charAt(0)==="/"?o.pathname:"/"+o.pathname}}return l=u(window.location.href),function(r){var f=i.isString(r)?u(r):r;return f.protocol===l.protocol&&f.host===l.host}}():function(){return function(){return!0}}(),$m}var e2,dv;function pv(){if(dv)return e2;dv=1;var i=Fu,e=yE(),t=_E(),o=mw,l=wE(),u=xE(),m=AE(),r=yw();return e2=function(_){return new Promise(function(v,w){var x=_.data,C=_.headers,T=_.responseType;i.isFormData(x)&&delete C["Content-Type"];var S=new XMLHttpRequest;if(_.auth){var M=_.auth.username||"",O=_.auth.password?unescape(encodeURIComponent(_.auth.password)):"";C.Authorization="Basic "+btoa(M+":"+O)}var V=l(_.baseURL,_.url);S.open(_.method.toUpperCase(),o(V,_.params,_.paramsSerializer),!0),S.timeout=_.timeout;function X(){if(!!S){var te="getAllResponseHeaders"in S?u(S.getAllResponseHeaders()):null,J=!T||T==="text"||T==="json"?S.responseText:S.response,ie={data:J,status:S.status,statusText:S.statusText,headers:te,config:_,request:S};e(v,w,ie),S=null}}if("onloadend"in S?S.onloadend=X:S.onreadystatechange=function(){!S||S.readyState!==4||S.status===0&&!(S.responseURL&&S.responseURL.indexOf("file:")===0)||setTimeout(X)},S.onabort=function(){!S||(w(r("Request aborted",_,"ECONNABORTED",S)),S=null)},S.onerror=function(){w(r("Network Error",_,null,S)),S=null},S.ontimeout=function(){var J="timeout of "+_.timeout+"ms exceeded";_.timeoutErrorMessage&&(J=_.timeoutErrorMessage),w(r(J,_,_.transitional&&_.transitional.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",S)),S=null},i.isStandardBrowserEnv()){var Z=(_.withCredentials||m(V))&&_.xsrfCookieName?t.read(_.xsrfCookieName):void 0;Z&&(C[_.xsrfHeaderName]=Z)}"setRequestHeader"in S&&i.forEach(C,function(J,ie){typeof x>"u"&&ie.toLowerCase()==="content-type"?delete C[ie]:S.setRequestHeader(ie,J)}),i.isUndefined(_.withCredentials)||(S.withCredentials=!!_.withCredentials),T&&T!=="json"&&(S.responseType=_.responseType),typeof _.onDownloadProgress=="function"&&S.addEventListener("progress",_.onDownloadProgress),typeof _.onUploadProgress=="function"&&S.upload&&S.upload.addEventListener("progress",_.onUploadProgress),_.cancelToken&&_.cancelToken.promise.then(function(J){!S||(S.abort(),w(J),S=null)}),x||(x=null),S.send(x)})},e2}var Ka=Fu,mv=gE,kE=gw,SE={"Content-Type":"application/x-www-form-urlencoded"};function gv(i,e){!Ka.isUndefined(i)&&Ka.isUndefined(i["Content-Type"])&&(i["Content-Type"]=e)}function CE(){var i;return(typeof XMLHttpRequest<"u"||typeof process<"u"&&Object.prototype.toString.call(process)==="[object process]")&&(i=pv()),i}function EE(i,e,t){if(Ka.isString(i))try{return(e||JSON.parse)(i),Ka.trim(i)}catch(o){if(o.name!=="SyntaxError")throw o}return(t||JSON.stringify)(i)}var H1={transitional:{silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},adapter:CE(),transformRequest:[function(e,t){return mv(t,"Accept"),mv(t,"Content-Type"),Ka.isFormData(e)||Ka.isArrayBuffer(e)||Ka.isBuffer(e)||Ka.isStream(e)||Ka.isFile(e)||Ka.isBlob(e)?e:Ka.isArrayBufferView(e)?e.buffer:Ka.isURLSearchParams(e)?(gv(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):Ka.isObject(e)||t&&t["Content-Type"]==="application/json"?(gv(t,"application/json"),EE(e)):e}],transformResponse:[function(e){var t=this.transitional,o=t&&t.silentJSONParsing,l=t&&t.forcedJSONParsing,u=!o&&this.responseType==="json";if(u||l&&Ka.isString(e)&&e.length)try{return JSON.parse(e)}catch(m){if(u)throw m.name==="SyntaxError"?kE(m,this,"E_JSON_PARSE"):m}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(e){return e>=200&&e<300}};H1.headers={common:{Accept:"application/json, text/plain, */*"}};Ka.forEach(["delete","get","head"],function(e){H1.headers[e]={}});Ka.forEach(["post","put","patch"],function(e){H1.headers[e]=Ka.merge(SE)});var Xg=H1,IE=Fu,TE=Xg,LE=function(e,t,o){var l=this||TE;return IE.forEach(o,function(m){e=m.call(l,e,t)}),e},t2,yv;function _w(){return yv||(yv=1,t2=function(e){return!!(e&&e.__CANCEL__)}),t2}var _v=Fu,i2=LE,PE=_w(),ME=Xg;function n2(i){i.cancelToken&&i.cancelToken.throwIfRequested()}var DE=function(e){n2(e),e.headers=e.headers||{},e.data=i2.call(e,e.data,e.headers,e.transformRequest),e.headers=_v.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),_v.forEach(["delete","get","head","post","put","patch","common"],function(l){delete e.headers[l]});var t=e.adapter||ME.adapter;return t(e).then(function(l){return n2(e),l.data=i2.call(e,l.data,l.headers,e.transformResponse),l},function(l){return PE(l)||(n2(e),l&&l.response&&(l.response.data=i2.call(e,l.response.data,l.response.headers,e.transformResponse))),Promise.reject(l)})},_l=Fu,vw=function(e,t){t=t||{};var o={},l=["url","method","data"],u=["headers","auth","proxy","params"],m=["baseURL","transformRequest","transformResponse","paramsSerializer","timeout","timeoutMessage","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","decompress","maxContentLength","maxBodyLength","maxRedirects","transport","httpAgent","httpsAgent","cancelToken","socketPath","responseEncoding"],r=["validateStatus"];function f(w,x){return _l.isPlainObject(w)&&_l.isPlainObject(x)?_l.merge(w,x):_l.isPlainObject(x)?_l.merge({},x):_l.isArray(x)?x.slice():x}function _(w){_l.isUndefined(t[w])?_l.isUndefined(e[w])||(o[w]=f(void 0,e[w])):o[w]=f(e[w],t[w])}_l.forEach(l,function(x){_l.isUndefined(t[x])||(o[x]=f(void 0,t[x]))}),_l.forEach(u,_),_l.forEach(m,function(x){_l.isUndefined(t[x])?_l.isUndefined(e[x])||(o[x]=f(void 0,e[x])):o[x]=f(void 0,t[x])}),_l.forEach(r,function(x){x in t?o[x]=f(e[x],t[x]):x in e&&(o[x]=f(void 0,e[x]))});var b=l.concat(u).concat(m).concat(r),v=Object.keys(e).concat(Object.keys(t)).filter(function(x){return b.indexOf(x)===-1});return _l.forEach(v,_),o};const OE="axios",FE="0.21.4",RE="Promise based HTTP client for the browser and node.js",BE="index.js",zE={test:"grunt test",start:"node ./sandbox/server.js",build:"NODE_ENV=production grunt build",preversion:"npm test",version:"npm run build && grunt version && git add -A dist && git add CHANGELOG.md bower.json package.json",postversion:"git push && git push --tags",examples:"node ./examples/server.js",coveralls:"cat coverage/lcov.info | ./node_modules/coveralls/bin/coveralls.js",fix:"eslint --fix lib/**/*.js"},NE={type:"git",url:"https://github.com/axios/axios.git"},jE=["xhr","http","ajax","promise","node"],UE="Matt Zabriskie",VE="MIT",qE={url:"https://github.com/axios/axios/issues"},HE="https://axios-http.com",GE={coveralls:"^3.0.0","es6-promise":"^4.2.4",grunt:"^1.3.0","grunt-banner":"^0.6.0","grunt-cli":"^1.2.0","grunt-contrib-clean":"^1.1.0","grunt-contrib-watch":"^1.0.0","grunt-eslint":"^23.0.0","grunt-karma":"^4.0.0","grunt-mocha-test":"^0.13.3","grunt-ts":"^6.0.0-beta.19","grunt-webpack":"^4.0.2","istanbul-instrumenter-loader":"^1.0.0","jasmine-core":"^2.4.1",karma:"^6.3.2","karma-chrome-launcher":"^3.1.0","karma-firefox-launcher":"^2.1.0","karma-jasmine":"^1.1.1","karma-jasmine-ajax":"^0.1.13","karma-safari-launcher":"^1.0.0","karma-sauce-launcher":"^4.3.6","karma-sinon":"^1.0.5","karma-sourcemap-loader":"^0.3.8","karma-webpack":"^4.0.2","load-grunt-tasks":"^3.5.2",minimist:"^1.2.0",mocha:"^8.2.1",sinon:"^4.5.0","terser-webpack-plugin":"^4.2.3",typescript:"^4.0.5","url-search-params":"^0.10.0",webpack:"^4.44.2","webpack-dev-server":"^3.11.0"},WE={"./lib/adapters/http.js":"./lib/adapters/xhr.js"},XE="dist/axios.min.js",YE="dist/axios.min.js",ZE="./index.d.ts",KE={"follow-redirects":"^1.14.0"},JE=[{path:"./dist/axios.min.js",threshold:"5kB"}],QE={name:OE,version:FE,description:RE,main:BE,scripts:zE,repository:NE,keywords:jE,author:UE,license:VE,bugs:qE,homepage:HE,devDependencies:GE,browser:WE,jsdelivr:XE,unpkg:YE,typings:ZE,dependencies:KE,bundlesize:JE};var bw=QE,Yg={};["object","boolean","number","function","string","symbol"].forEach(function(i,e){Yg[i]=function(o){return typeof o===i||"a"+(e<1?"n ":" ")+i}});var vv={},$E=bw.version.split(".");function ww(i,e){for(var t=e?e.split("."):$E,o=i.split("."),l=0;l<3;l++){if(t[l]>o[l])return!0;if(t[l]<o[l])return!1}return!1}Yg.transitional=function(e,t,o){var l=t&&ww(t);function u(m,r){return"[Axios v"+bw.version+"] Transitional option '"+m+"'"+r+(o?". "+o:"")}return function(m,r,f){if(e===!1)throw new Error(u(r," has been removed in "+t));return l&&!vv[r]&&(vv[r]=!0,console.warn(u(r," has been deprecated since v"+t+" and will be removed in the near future"))),e?e(m,r,f):!0}};function eI(i,e,t){if(typeof i!="object")throw new TypeError("options must be an object");for(var o=Object.keys(i),l=o.length;l-- >0;){var u=o[l],m=e[u];if(m){var r=i[u],f=r===void 0||m(r,u,i);if(f!==!0)throw new TypeError("option "+u+" must be "+f);continue}if(t!==!0)throw Error("Unknown option "+u)}}var tI={isOlderVersion:ww,assertOptions:eI,validators:Yg},xw=Fu,iI=mw,bv=pE,wv=DE,G1=vw,Aw=tI,x0=Aw.validators;function rp(i){this.defaults=i,this.interceptors={request:new bv,response:new bv}}rp.prototype.request=function(e){typeof e=="string"?(e=arguments[1]||{},e.url=arguments[0]):e=e||{},e=G1(this.defaults,e),e.method?e.method=e.method.toLowerCase():this.defaults.method?e.method=this.defaults.method.toLowerCase():e.method="get";var t=e.transitional;t!==void 0&&Aw.assertOptions(t,{silentJSONParsing:x0.transitional(x0.boolean,"1.0.0"),forcedJSONParsing:x0.transitional(x0.boolean,"1.0.0"),clarifyTimeoutError:x0.transitional(x0.boolean,"1.0.0")},!1);var o=[],l=!0;this.interceptors.request.forEach(function(w){typeof w.runWhen=="function"&&w.runWhen(e)===!1||(l=l&&w.synchronous,o.unshift(w.fulfilled,w.rejected))});var u=[];this.interceptors.response.forEach(function(w){u.push(w.fulfilled,w.rejected)});var m;if(!l){var r=[wv,void 0];for(Array.prototype.unshift.apply(r,o),r=r.concat(u),m=Promise.resolve(e);r.length;)m=m.then(r.shift(),r.shift());return m}for(var f=e;o.length;){var _=o.shift(),b=o.shift();try{f=_(f)}catch(v){b(v);break}}try{m=wv(f)}catch(v){return Promise.reject(v)}for(;u.length;)m=m.then(u.shift(),u.shift());return m};rp.prototype.getUri=function(e){return e=G1(this.defaults,e),iI(e.url,e.params,e.paramsSerializer).replace(/^\?/,"")};xw.forEach(["delete","get","head","options"],function(e){rp.prototype[e]=function(t,o){return this.request(G1(o||{},{method:e,url:t,data:(o||{}).data}))}});xw.forEach(["post","put","patch"],function(e){rp.prototype[e]=function(t,o,l){return this.request(G1(l||{},{method:e,url:t,data:o}))}});var nI=rp,r2,xv;function kw(){if(xv)return r2;xv=1;function i(e){this.message=e}return i.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},i.prototype.__CANCEL__=!0,r2=i,r2}var o2,Av;function rI(){if(Av)return o2;Av=1;var i=kw();function e(t){if(typeof t!="function")throw new TypeError("executor must be a function.");var o;this.promise=new Promise(function(m){o=m});var l=this;t(function(m){l.reason||(l.reason=new i(m),o(l.reason))})}return e.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},e.source=function(){var o,l=new e(function(m){o=m});return{token:l,cancel:o}},o2=e,o2}var s2,kv;function oI(){return kv||(kv=1,s2=function(e){return function(o){return e.apply(null,o)}}),s2}var a2,Sv;function sI(){return Sv||(Sv=1,a2=function(e){return typeof e=="object"&&e.isAxiosError===!0}),a2}var Cv=Fu,aI=fw,a1=nI,lI=vw,uI=Xg;function Sw(i){var e=new a1(i),t=aI(a1.prototype.request,e);return Cv.extend(t,a1.prototype,e),Cv.extend(t,e),t}var Ic=Sw(uI);Ic.Axios=a1;Ic.create=function(e){return Sw(lI(Ic.defaults,e))};Ic.Cancel=kw();Ic.CancelToken=rI();Ic.isCancel=_w();Ic.all=function(e){return Promise.all(e)};Ic.spread=oI();Ic.isAxiosError=sI();Hg.exports=Ic;Hg.exports.default=Ic;(function(i){i.exports=Hg.exports})(hw);const cI=R8(hw.exports);var Oh={};(function(i){var e=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";function t(u,m){return Object.prototype.hasOwnProperty.call(u,m)}i.assign=function(u){for(var m=Array.prototype.slice.call(arguments,1);m.length;){var r=m.shift();if(!!r){if(typeof r!="object")throw new TypeError(r+"must be non-object");for(var f in r)t(r,f)&&(u[f]=r[f])}}return u},i.shrinkBuf=function(u,m){return u.length===m?u:u.subarray?u.subarray(0,m):(u.length=m,u)};var o={arraySet:function(u,m,r,f,_){if(m.subarray&&u.subarray){u.set(m.subarray(r,r+f),_);return}for(var b=0;b<f;b++)u[_+b]=m[r+b]},flattenChunks:function(u){var m,r,f,_,b,v;for(f=0,m=0,r=u.length;m<r;m++)f+=u[m].length;for(v=new Uint8Array(f),_=0,m=0,r=u.length;m<r;m++)b=u[m],v.set(b,_),_+=b.length;return v}},l={arraySet:function(u,m,r,f,_){for(var b=0;b<f;b++)u[_+b]=m[r+b]},flattenChunks:function(u){return[].concat.apply([],u)}};i.setTyped=function(u){u?(i.Buf8=Uint8Array,i.Buf16=Uint16Array,i.Buf32=Int32Array,i.assign(i,o)):(i.Buf8=Array,i.Buf16=Array,i.Buf32=Array,i.assign(i,l))},i.setTyped(e)})(Oh);var op={},sh={},rd={},hI=Oh,fI=4,Ev=0,Iv=1,dI=2;function od(i){for(var e=i.length;--e>=0;)i[e]=0}var pI=0,Cw=1,mI=2,gI=3,yI=258,Zg=29,sp=256,Zd=sp+1+Zg,Z0=30,Kg=19,Ew=2*Zd+1,Hf=15,l2=16,_I=7,Jg=256,Iw=16,Tw=17,Lw=18,Q2=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],l1=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],vI=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],Pw=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],bI=512,Sh=new Array((Zd+2)*2);od(Sh);var Rd=new Array(Z0*2);od(Rd);var Kd=new Array(bI);od(Kd);var Jd=new Array(yI-gI+1);od(Jd);var Qg=new Array(Zg);od(Qg);var S1=new Array(Z0);od(S1);function u2(i,e,t,o,l){this.static_tree=i,this.extra_bits=e,this.extra_base=t,this.elems=o,this.max_length=l,this.has_stree=i&&i.length}var Mw,Dw,Ow;function c2(i,e){this.dyn_tree=i,this.max_code=0,this.stat_desc=e}function Fw(i){return i<256?Kd[i]:Kd[256+(i>>>7)]}function Qd(i,e){i.pending_buf[i.pending++]=e&255,i.pending_buf[i.pending++]=e>>>8&255}function ru(i,e,t){i.bi_valid>l2-t?(i.bi_buf|=e<<i.bi_valid&65535,Qd(i,i.bi_buf),i.bi_buf=e>>l2-i.bi_valid,i.bi_valid+=t-l2):(i.bi_buf|=e<<i.bi_valid&65535,i.bi_valid+=t)}function Jc(i,e,t){ru(i,t[e*2],t[e*2+1])}function Rw(i,e){var t=0;do t|=i&1,i>>>=1,t<<=1;while(--e>0);return t>>>1}function wI(i){i.bi_valid===16?(Qd(i,i.bi_buf),i.bi_buf=0,i.bi_valid=0):i.bi_valid>=8&&(i.pending_buf[i.pending++]=i.bi_buf&255,i.bi_buf>>=8,i.bi_valid-=8)}function xI(i,e){var t=e.dyn_tree,o=e.max_code,l=e.stat_desc.static_tree,u=e.stat_desc.has_stree,m=e.stat_desc.extra_bits,r=e.stat_desc.extra_base,f=e.stat_desc.max_length,_,b,v,w,x,C,T=0;for(w=0;w<=Hf;w++)i.bl_count[w]=0;for(t[i.heap[i.heap_max]*2+1]=0,_=i.heap_max+1;_<Ew;_++)b=i.heap[_],w=t[t[b*2+1]*2+1]+1,w>f&&(w=f,T++),t[b*2+1]=w,!(b>o)&&(i.bl_count[w]++,x=0,b>=r&&(x=m[b-r]),C=t[b*2],i.opt_len+=C*(w+x),u&&(i.static_len+=C*(l[b*2+1]+x)));if(T!==0){do{for(w=f-1;i.bl_count[w]===0;)w--;i.bl_count[w]--,i.bl_count[w+1]+=2,i.bl_count[f]--,T-=2}while(T>0);for(w=f;w!==0;w--)for(b=i.bl_count[w];b!==0;)v=i.heap[--_],!(v>o)&&(t[v*2+1]!==w&&(i.opt_len+=(w-t[v*2+1])*t[v*2],t[v*2+1]=w),b--)}}function Bw(i,e,t){var o=new Array(Hf+1),l=0,u,m;for(u=1;u<=Hf;u++)o[u]=l=l+t[u-1]<<1;for(m=0;m<=e;m++){var r=i[m*2+1];r!==0&&(i[m*2]=Rw(o[r]++,r))}}function AI(){var i,e,t,o,l,u=new Array(Hf+1);for(t=0,o=0;o<Zg-1;o++)for(Qg[o]=t,i=0;i<1<<Q2[o];i++)Jd[t++]=o;for(Jd[t-1]=o,l=0,o=0;o<16;o++)for(S1[o]=l,i=0;i<1<<l1[o];i++)Kd[l++]=o;for(l>>=7;o<Z0;o++)for(S1[o]=l<<7,i=0;i<1<<l1[o]-7;i++)Kd[256+l++]=o;for(e=0;e<=Hf;e++)u[e]=0;for(i=0;i<=143;)Sh[i*2+1]=8,i++,u[8]++;for(;i<=255;)Sh[i*2+1]=9,i++,u[9]++;for(;i<=279;)Sh[i*2+1]=7,i++,u[7]++;for(;i<=287;)Sh[i*2+1]=8,i++,u[8]++;for(Bw(Sh,Zd+1,u),i=0;i<Z0;i++)Rd[i*2+1]=5,Rd[i*2]=Rw(i,5);Mw=new u2(Sh,Q2,sp+1,Zd,Hf),Dw=new u2(Rd,l1,0,Z0,Hf),Ow=new u2(new Array(0),vI,0,Kg,_I)}function zw(i){var e;for(e=0;e<Zd;e++)i.dyn_ltree[e*2]=0;for(e=0;e<Z0;e++)i.dyn_dtree[e*2]=0;for(e=0;e<Kg;e++)i.bl_tree[e*2]=0;i.dyn_ltree[Jg*2]=1,i.opt_len=i.static_len=0,i.last_lit=i.matches=0}function Nw(i){i.bi_valid>8?Qd(i,i.bi_buf):i.bi_valid>0&&(i.pending_buf[i.pending++]=i.bi_buf),i.bi_buf=0,i.bi_valid=0}function kI(i,e,t,o){Nw(i),o&&(Qd(i,t),Qd(i,~t)),hI.arraySet(i.pending_buf,i.window,e,t,i.pending),i.pending+=t}function Tv(i,e,t,o){var l=e*2,u=t*2;return i[l]<i[u]||i[l]===i[u]&&o[e]<=o[t]}function h2(i,e,t){for(var o=i.heap[t],l=t<<1;l<=i.heap_len&&(l<i.heap_len&&Tv(e,i.heap[l+1],i.heap[l],i.depth)&&l++,!Tv(e,o,i.heap[l],i.depth));)i.heap[t]=i.heap[l],t=l,l<<=1;i.heap[t]=o}function Lv(i,e,t){var o,l,u=0,m,r;if(i.last_lit!==0)do o=i.pending_buf[i.d_buf+u*2]<<8|i.pending_buf[i.d_buf+u*2+1],l=i.pending_buf[i.l_buf+u],u++,o===0?Jc(i,l,e):(m=Jd[l],Jc(i,m+sp+1,e),r=Q2[m],r!==0&&(l-=Qg[m],ru(i,l,r)),o--,m=Fw(o),Jc(i,m,t),r=l1[m],r!==0&&(o-=S1[m],ru(i,o,r)));while(u<i.last_lit);Jc(i,Jg,e)}function $2(i,e){var t=e.dyn_tree,o=e.stat_desc.static_tree,l=e.stat_desc.has_stree,u=e.stat_desc.elems,m,r,f=-1,_;for(i.heap_len=0,i.heap_max=Ew,m=0;m<u;m++)t[m*2]!==0?(i.heap[++i.heap_len]=f=m,i.depth[m]=0):t[m*2+1]=0;for(;i.heap_len<2;)_=i.heap[++i.heap_len]=f<2?++f:0,t[_*2]=1,i.depth[_]=0,i.opt_len--,l&&(i.static_len-=o[_*2+1]);for(e.max_code=f,m=i.heap_len>>1;m>=1;m--)h2(i,t,m);_=u;do m=i.heap[1],i.heap[1]=i.heap[i.heap_len--],h2(i,t,1),r=i.heap[1],i.heap[--i.heap_max]=m,i.heap[--i.heap_max]=r,t[_*2]=t[m*2]+t[r*2],i.depth[_]=(i.depth[m]>=i.depth[r]?i.depth[m]:i.depth[r])+1,t[m*2+1]=t[r*2+1]=_,i.heap[1]=_++,h2(i,t,1);while(i.heap_len>=2);i.heap[--i.heap_max]=i.heap[1],xI(i,e),Bw(t,f,i.bl_count)}function Pv(i,e,t){var o,l=-1,u,m=e[0*2+1],r=0,f=7,_=4;for(m===0&&(f=138,_=3),e[(t+1)*2+1]=65535,o=0;o<=t;o++)u=m,m=e[(o+1)*2+1],!(++r<f&&u===m)&&(r<_?i.bl_tree[u*2]+=r:u!==0?(u!==l&&i.bl_tree[u*2]++,i.bl_tree[Iw*2]++):r<=10?i.bl_tree[Tw*2]++:i.bl_tree[Lw*2]++,r=0,l=u,m===0?(f=138,_=3):u===m?(f=6,_=3):(f=7,_=4))}function Mv(i,e,t){var o,l=-1,u,m=e[0*2+1],r=0,f=7,_=4;for(m===0&&(f=138,_=3),o=0;o<=t;o++)if(u=m,m=e[(o+1)*2+1],!(++r<f&&u===m)){if(r<_)do Jc(i,u,i.bl_tree);while(--r!==0);else u!==0?(u!==l&&(Jc(i,u,i.bl_tree),r--),Jc(i,Iw,i.bl_tree),ru(i,r-3,2)):r<=10?(Jc(i,Tw,i.bl_tree),ru(i,r-3,3)):(Jc(i,Lw,i.bl_tree),ru(i,r-11,7));r=0,l=u,m===0?(f=138,_=3):u===m?(f=6,_=3):(f=7,_=4)}}function SI(i){var e;for(Pv(i,i.dyn_ltree,i.l_desc.max_code),Pv(i,i.dyn_dtree,i.d_desc.max_code),$2(i,i.bl_desc),e=Kg-1;e>=3&&i.bl_tree[Pw[e]*2+1]===0;e--);return i.opt_len+=3*(e+1)+5+5+4,e}function CI(i,e,t,o){var l;for(ru(i,e-257,5),ru(i,t-1,5),ru(i,o-4,4),l=0;l<o;l++)ru(i,i.bl_tree[Pw[l]*2+1],3);Mv(i,i.dyn_ltree,e-1),Mv(i,i.dyn_dtree,t-1)}function EI(i){var e=4093624447,t;for(t=0;t<=31;t++,e>>>=1)if(e&1&&i.dyn_ltree[t*2]!==0)return Ev;if(i.dyn_ltree[9*2]!==0||i.dyn_ltree[10*2]!==0||i.dyn_ltree[13*2]!==0)return Iv;for(t=32;t<sp;t++)if(i.dyn_ltree[t*2]!==0)return Iv;return Ev}var Dv=!1;function II(i){Dv||(AI(),Dv=!0),i.l_desc=new c2(i.dyn_ltree,Mw),i.d_desc=new c2(i.dyn_dtree,Dw),i.bl_desc=new c2(i.bl_tree,Ow),i.bi_buf=0,i.bi_valid=0,zw(i)}function jw(i,e,t,o){ru(i,(pI<<1)+(o?1:0),3),kI(i,e,t,!0)}function TI(i){ru(i,Cw<<1,3),Jc(i,Jg,Sh),wI(i)}function LI(i,e,t,o){var l,u,m=0;i.level>0?(i.strm.data_type===dI&&(i.strm.data_type=EI(i)),$2(i,i.l_desc),$2(i,i.d_desc),m=SI(i),l=i.opt_len+3+7>>>3,u=i.static_len+3+7>>>3,u<=l&&(l=u)):l=u=t+5,t+4<=l&&e!==-1?jw(i,e,t,o):i.strategy===fI||u===l?(ru(i,(Cw<<1)+(o?1:0),3),Lv(i,Sh,Rd)):(ru(i,(mI<<1)+(o?1:0),3),CI(i,i.l_desc.max_code+1,i.d_desc.max_code+1,m+1),Lv(i,i.dyn_ltree,i.dyn_dtree)),zw(i),o&&Nw(i)}function PI(i,e,t){return i.pending_buf[i.d_buf+i.last_lit*2]=e>>>8&255,i.pending_buf[i.d_buf+i.last_lit*2+1]=e&255,i.pending_buf[i.l_buf+i.last_lit]=t&255,i.last_lit++,e===0?i.dyn_ltree[t*2]++:(i.matches++,e--,i.dyn_ltree[(Jd[t]+sp+1)*2]++,i.dyn_dtree[Fw(e)*2]++),i.last_lit===i.lit_bufsize-1}rd._tr_init=II;rd._tr_stored_block=jw;rd._tr_flush_block=LI;rd._tr_tally=PI;rd._tr_align=TI;function MI(i,e,t,o){for(var l=i&65535|0,u=i>>>16&65535|0,m=0;t!==0;){m=t>2e3?2e3:t,t-=m;do l=l+e[o++]|0,u=u+l|0;while(--m);l%=65521,u%=65521}return l|u<<16|0}var Uw=MI;function DI(){for(var i,e=[],t=0;t<256;t++){i=t;for(var o=0;o<8;o++)i=i&1?3988292384^i>>>1:i>>>1;e[t]=i}return e}var OI=DI();function FI(i,e,t,o){var l=OI,u=o+t;i^=-1;for(var m=o;m<u;m++)i=i>>>8^l[(i^e[m])&255];return i^-1}var Vw=FI,$g={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},Rl=Oh,ic=rd,qw=Uw,tf=Vw,RI=$g,i0=0,BI=1,zI=3,cf=4,Ov=5,Qc=0,Fv=1,nc=-2,NI=-3,f2=-5,jI=-1,UI=1,Vp=2,VI=3,qI=4,HI=0,GI=2,W1=8,WI=9,XI=15,YI=8,ZI=29,KI=256,eg=KI+1+ZI,JI=30,QI=19,$I=2*eg+1,eT=15,Mo=3,af=258,Ec=af+Mo+1,tT=32,X1=42,tg=69,u1=73,c1=91,h1=103,Gf=113,Pd=666,Aa=1,ap=2,Zf=3,sd=4,iT=3;function lf(i,e){return i.msg=RI[e],e}function Rv(i){return(i<<1)-(i>4?9:0)}function of(i){for(var e=i.length;--e>=0;)i[e]=0}function nf(i){var e=i.state,t=e.pending;t>i.avail_out&&(t=i.avail_out),t!==0&&(Rl.arraySet(i.output,e.pending_buf,e.pending_out,t,i.next_out),i.next_out+=t,e.pending_out+=t,i.total_out+=t,i.avail_out-=t,e.pending-=t,e.pending===0&&(e.pending_out=0))}function Qa(i,e){ic._tr_flush_block(i,i.block_start>=0?i.block_start:-1,i.strstart-i.block_start,e),i.block_start=i.strstart,nf(i.strm)}function Go(i,e){i.pending_buf[i.pending++]=e}function Sd(i,e){i.pending_buf[i.pending++]=e>>>8&255,i.pending_buf[i.pending++]=e&255}function nT(i,e,t,o){var l=i.avail_in;return l>o&&(l=o),l===0?0:(i.avail_in-=l,Rl.arraySet(e,i.input,i.next_in,l,t),i.state.wrap===1?i.adler=qw(i.adler,e,l,t):i.state.wrap===2&&(i.adler=tf(i.adler,e,l,t)),i.next_in+=l,i.total_in+=l,l)}function Hw(i,e){var t=i.max_chain_length,o=i.strstart,l,u,m=i.prev_length,r=i.nice_match,f=i.strstart>i.w_size-Ec?i.strstart-(i.w_size-Ec):0,_=i.window,b=i.w_mask,v=i.prev,w=i.strstart+af,x=_[o+m-1],C=_[o+m];i.prev_length>=i.good_match&&(t>>=2),r>i.lookahead&&(r=i.lookahead);do if(l=e,!(_[l+m]!==C||_[l+m-1]!==x||_[l]!==_[o]||_[++l]!==_[o+1])){o+=2,l++;do;while(_[++o]===_[++l]&&_[++o]===_[++l]&&_[++o]===_[++l]&&_[++o]===_[++l]&&_[++o]===_[++l]&&_[++o]===_[++l]&&_[++o]===_[++l]&&_[++o]===_[++l]&&o<w);if(u=af-(w-o),o=w-af,u>m){if(i.match_start=e,m=u,u>=r)break;x=_[o+m-1],C=_[o+m]}}while((e=v[e&b])>f&&--t!==0);return m<=i.lookahead?m:i.lookahead}function Kf(i){var e=i.w_size,t,o,l,u,m;do{if(u=i.window_size-i.lookahead-i.strstart,i.strstart>=e+(e-Ec)){Rl.arraySet(i.window,i.window,e,e,0),i.match_start-=e,i.strstart-=e,i.block_start-=e,o=i.hash_size,t=o;do l=i.head[--t],i.head[t]=l>=e?l-e:0;while(--o);o=e,t=o;do l=i.prev[--t],i.prev[t]=l>=e?l-e:0;while(--o);u+=e}if(i.strm.avail_in===0)break;if(o=nT(i.strm,i.window,i.strstart+i.lookahead,u),i.lookahead+=o,i.lookahead+i.insert>=Mo)for(m=i.strstart-i.insert,i.ins_h=i.window[m],i.ins_h=(i.ins_h<<i.hash_shift^i.window[m+1])&i.hash_mask;i.insert&&(i.ins_h=(i.ins_h<<i.hash_shift^i.window[m+Mo-1])&i.hash_mask,i.prev[m&i.w_mask]=i.head[i.ins_h],i.head[i.ins_h]=m,m++,i.insert--,!(i.lookahead+i.insert<Mo)););}while(i.lookahead<Ec&&i.strm.avail_in!==0)}function rT(i,e){var t=65535;for(t>i.pending_buf_size-5&&(t=i.pending_buf_size-5);;){if(i.lookahead<=1){if(Kf(i),i.lookahead===0&&e===i0)return Aa;if(i.lookahead===0)break}i.strstart+=i.lookahead,i.lookahead=0;var o=i.block_start+t;if((i.strstart===0||i.strstart>=o)&&(i.lookahead=i.strstart-o,i.strstart=o,Qa(i,!1),i.strm.avail_out===0)||i.strstart-i.block_start>=i.w_size-Ec&&(Qa(i,!1),i.strm.avail_out===0))return Aa}return i.insert=0,e===cf?(Qa(i,!0),i.strm.avail_out===0?Zf:sd):(i.strstart>i.block_start&&(Qa(i,!1),i.strm.avail_out===0),Aa)}function d2(i,e){for(var t,o;;){if(i.lookahead<Ec){if(Kf(i),i.lookahead<Ec&&e===i0)return Aa;if(i.lookahead===0)break}if(t=0,i.lookahead>=Mo&&(i.ins_h=(i.ins_h<<i.hash_shift^i.window[i.strstart+Mo-1])&i.hash_mask,t=i.prev[i.strstart&i.w_mask]=i.head[i.ins_h],i.head[i.ins_h]=i.strstart),t!==0&&i.strstart-t<=i.w_size-Ec&&(i.match_length=Hw(i,t)),i.match_length>=Mo)if(o=ic._tr_tally(i,i.strstart-i.match_start,i.match_length-Mo),i.lookahead-=i.match_length,i.match_length<=i.max_lazy_match&&i.lookahead>=Mo){i.match_length--;do i.strstart++,i.ins_h=(i.ins_h<<i.hash_shift^i.window[i.strstart+Mo-1])&i.hash_mask,t=i.prev[i.strstart&i.w_mask]=i.head[i.ins_h],i.head[i.ins_h]=i.strstart;while(--i.match_length!==0);i.strstart++}else i.strstart+=i.match_length,i.match_length=0,i.ins_h=i.window[i.strstart],i.ins_h=(i.ins_h<<i.hash_shift^i.window[i.strstart+1])&i.hash_mask;else o=ic._tr_tally(i,0,i.window[i.strstart]),i.lookahead--,i.strstart++;if(o&&(Qa(i,!1),i.strm.avail_out===0))return Aa}return i.insert=i.strstart<Mo-1?i.strstart:Mo-1,e===cf?(Qa(i,!0),i.strm.avail_out===0?Zf:sd):i.last_lit&&(Qa(i,!1),i.strm.avail_out===0)?Aa:ap}function A0(i,e){for(var t,o,l;;){if(i.lookahead<Ec){if(Kf(i),i.lookahead<Ec&&e===i0)return Aa;if(i.lookahead===0)break}if(t=0,i.lookahead>=Mo&&(i.ins_h=(i.ins_h<<i.hash_shift^i.window[i.strstart+Mo-1])&i.hash_mask,t=i.prev[i.strstart&i.w_mask]=i.head[i.ins_h],i.head[i.ins_h]=i.strstart),i.prev_length=i.match_length,i.prev_match=i.match_start,i.match_length=Mo-1,t!==0&&i.prev_length<i.max_lazy_match&&i.strstart-t<=i.w_size-Ec&&(i.match_length=Hw(i,t),i.match_length<=5&&(i.strategy===UI||i.match_length===Mo&&i.strstart-i.match_start>4096)&&(i.match_length=Mo-1)),i.prev_length>=Mo&&i.match_length<=i.prev_length){l=i.strstart+i.lookahead-Mo,o=ic._tr_tally(i,i.strstart-1-i.prev_match,i.prev_length-Mo),i.lookahead-=i.prev_length-1,i.prev_length-=2;do++i.strstart<=l&&(i.ins_h=(i.ins_h<<i.hash_shift^i.window[i.strstart+Mo-1])&i.hash_mask,t=i.prev[i.strstart&i.w_mask]=i.head[i.ins_h],i.head[i.ins_h]=i.strstart);while(--i.prev_length!==0);if(i.match_available=0,i.match_length=Mo-1,i.strstart++,o&&(Qa(i,!1),i.strm.avail_out===0))return Aa}else if(i.match_available){if(o=ic._tr_tally(i,0,i.window[i.strstart-1]),o&&Qa(i,!1),i.strstart++,i.lookahead--,i.strm.avail_out===0)return Aa}else i.match_available=1,i.strstart++,i.lookahead--}return i.match_available&&(o=ic._tr_tally(i,0,i.window[i.strstart-1]),i.match_available=0),i.insert=i.strstart<Mo-1?i.strstart:Mo-1,e===cf?(Qa(i,!0),i.strm.avail_out===0?Zf:sd):i.last_lit&&(Qa(i,!1),i.strm.avail_out===0)?Aa:ap}function oT(i,e){for(var t,o,l,u,m=i.window;;){if(i.lookahead<=af){if(Kf(i),i.lookahead<=af&&e===i0)return Aa;if(i.lookahead===0)break}if(i.match_length=0,i.lookahead>=Mo&&i.strstart>0&&(l=i.strstart-1,o=m[l],o===m[++l]&&o===m[++l]&&o===m[++l])){u=i.strstart+af;do;while(o===m[++l]&&o===m[++l]&&o===m[++l]&&o===m[++l]&&o===m[++l]&&o===m[++l]&&o===m[++l]&&o===m[++l]&&l<u);i.match_length=af-(u-l),i.match_length>i.lookahead&&(i.match_length=i.lookahead)}if(i.match_length>=Mo?(t=ic._tr_tally(i,1,i.match_length-Mo),i.lookahead-=i.match_length,i.strstart+=i.match_length,i.match_length=0):(t=ic._tr_tally(i,0,i.window[i.strstart]),i.lookahead--,i.strstart++),t&&(Qa(i,!1),i.strm.avail_out===0))return Aa}return i.insert=0,e===cf?(Qa(i,!0),i.strm.avail_out===0?Zf:sd):i.last_lit&&(Qa(i,!1),i.strm.avail_out===0)?Aa:ap}function sT(i,e){for(var t;;){if(i.lookahead===0&&(Kf(i),i.lookahead===0)){if(e===i0)return Aa;break}if(i.match_length=0,t=ic._tr_tally(i,0,i.window[i.strstart]),i.lookahead--,i.strstart++,t&&(Qa(i,!1),i.strm.avail_out===0))return Aa}return i.insert=0,e===cf?(Qa(i,!0),i.strm.avail_out===0?Zf:sd):i.last_lit&&(Qa(i,!1),i.strm.avail_out===0)?Aa:ap}function Gc(i,e,t,o,l){this.good_length=i,this.max_lazy=e,this.nice_length=t,this.max_chain=o,this.func=l}var z0;z0=[new Gc(0,0,0,0,rT),new Gc(4,4,8,4,d2),new Gc(4,5,16,8,d2),new Gc(4,6,32,32,d2),new Gc(4,4,16,16,A0),new Gc(8,16,32,32,A0),new Gc(8,16,128,128,A0),new Gc(8,32,128,256,A0),new Gc(32,128,258,1024,A0),new Gc(32,258,258,4096,A0)];function aT(i){i.window_size=2*i.w_size,of(i.head),i.max_lazy_match=z0[i.level].max_lazy,i.good_match=z0[i.level].good_length,i.nice_match=z0[i.level].nice_length,i.max_chain_length=z0[i.level].max_chain,i.strstart=0,i.block_start=0,i.lookahead=0,i.insert=0,i.match_length=i.prev_length=Mo-1,i.match_available=0,i.ins_h=0}function lT(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=W1,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Rl.Buf16($I*2),this.dyn_dtree=new Rl.Buf16((2*JI+1)*2),this.bl_tree=new Rl.Buf16((2*QI+1)*2),of(this.dyn_ltree),of(this.dyn_dtree),of(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Rl.Buf16(eT+1),this.heap=new Rl.Buf16(2*eg+1),of(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Rl.Buf16(2*eg+1),of(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function Gw(i){var e;return!i||!i.state?lf(i,nc):(i.total_in=i.total_out=0,i.data_type=GI,e=i.state,e.pending=0,e.pending_out=0,e.wrap<0&&(e.wrap=-e.wrap),e.status=e.wrap?X1:Gf,i.adler=e.wrap===2?0:1,e.last_flush=i0,ic._tr_init(e),Qc)}function Ww(i){var e=Gw(i);return e===Qc&&aT(i.state),e}function uT(i,e){return!i||!i.state||i.state.wrap!==2?nc:(i.state.gzhead=e,Qc)}function Xw(i,e,t,o,l,u){if(!i)return nc;var m=1;if(e===jI&&(e=6),o<0?(m=0,o=-o):o>15&&(m=2,o-=16),l<1||l>WI||t!==W1||o<8||o>15||e<0||e>9||u<0||u>qI)return lf(i,nc);o===8&&(o=9);var r=new lT;return i.state=r,r.strm=i,r.wrap=m,r.gzhead=null,r.w_bits=o,r.w_size=1<<r.w_bits,r.w_mask=r.w_size-1,r.hash_bits=l+7,r.hash_size=1<<r.hash_bits,r.hash_mask=r.hash_size-1,r.hash_shift=~~((r.hash_bits+Mo-1)/Mo),r.window=new Rl.Buf8(r.w_size*2),r.head=new Rl.Buf16(r.hash_size),r.prev=new Rl.Buf16(r.w_size),r.lit_bufsize=1<<l+6,r.pending_buf_size=r.lit_bufsize*4,r.pending_buf=new Rl.Buf8(r.pending_buf_size),r.d_buf=1*r.lit_bufsize,r.l_buf=(1+2)*r.lit_bufsize,r.level=e,r.strategy=u,r.method=t,Ww(i)}function cT(i,e){return Xw(i,e,W1,XI,YI,HI)}function hT(i,e){var t,o,l,u;if(!i||!i.state||e>Ov||e<0)return i?lf(i,nc):nc;if(o=i.state,!i.output||!i.input&&i.avail_in!==0||o.status===Pd&&e!==cf)return lf(i,i.avail_out===0?f2:nc);if(o.strm=i,t=o.last_flush,o.last_flush=e,o.status===X1)if(o.wrap===2)i.adler=0,Go(o,31),Go(o,139),Go(o,8),o.gzhead?(Go(o,(o.gzhead.text?1:0)+(o.gzhead.hcrc?2:0)+(o.gzhead.extra?4:0)+(o.gzhead.name?8:0)+(o.gzhead.comment?16:0)),Go(o,o.gzhead.time&255),Go(o,o.gzhead.time>>8&255),Go(o,o.gzhead.time>>16&255),Go(o,o.gzhead.time>>24&255),Go(o,o.level===9?2:o.strategy>=Vp||o.level<2?4:0),Go(o,o.gzhead.os&255),o.gzhead.extra&&o.gzhead.extra.length&&(Go(o,o.gzhead.extra.length&255),Go(o,o.gzhead.extra.length>>8&255)),o.gzhead.hcrc&&(i.adler=tf(i.adler,o.pending_buf,o.pending,0)),o.gzindex=0,o.status=tg):(Go(o,0),Go(o,0),Go(o,0),Go(o,0),Go(o,0),Go(o,o.level===9?2:o.strategy>=Vp||o.level<2?4:0),Go(o,iT),o.status=Gf);else{var m=W1+(o.w_bits-8<<4)<<8,r=-1;o.strategy>=Vp||o.level<2?r=0:o.level<6?r=1:o.level===6?r=2:r=3,m|=r<<6,o.strstart!==0&&(m|=tT),m+=31-m%31,o.status=Gf,Sd(o,m),o.strstart!==0&&(Sd(o,i.adler>>>16),Sd(o,i.adler&65535)),i.adler=1}if(o.status===tg)if(o.gzhead.extra){for(l=o.pending;o.gzindex<(o.gzhead.extra.length&65535)&&!(o.pending===o.pending_buf_size&&(o.gzhead.hcrc&&o.pending>l&&(i.adler=tf(i.adler,o.pending_buf,o.pending-l,l)),nf(i),l=o.pending,o.pending===o.pending_buf_size));)Go(o,o.gzhead.extra[o.gzindex]&255),o.gzindex++;o.gzhead.hcrc&&o.pending>l&&(i.adler=tf(i.adler,o.pending_buf,o.pending-l,l)),o.gzindex===o.gzhead.extra.length&&(o.gzindex=0,o.status=u1)}else o.status=u1;if(o.status===u1)if(o.gzhead.name){l=o.pending;do{if(o.pending===o.pending_buf_size&&(o.gzhead.hcrc&&o.pending>l&&(i.adler=tf(i.adler,o.pending_buf,o.pending-l,l)),nf(i),l=o.pending,o.pending===o.pending_buf_size)){u=1;break}o.gzindex<o.gzhead.name.length?u=o.gzhead.name.charCodeAt(o.gzindex++)&255:u=0,Go(o,u)}while(u!==0);o.gzhead.hcrc&&o.pending>l&&(i.adler=tf(i.adler,o.pending_buf,o.pending-l,l)),u===0&&(o.gzindex=0,o.status=c1)}else o.status=c1;if(o.status===c1)if(o.gzhead.comment){l=o.pending;do{if(o.pending===o.pending_buf_size&&(o.gzhead.hcrc&&o.pending>l&&(i.adler=tf(i.adler,o.pending_buf,o.pending-l,l)),nf(i),l=o.pending,o.pending===o.pending_buf_size)){u=1;break}o.gzindex<o.gzhead.comment.length?u=o.gzhead.comment.charCodeAt(o.gzindex++)&255:u=0,Go(o,u)}while(u!==0);o.gzhead.hcrc&&o.pending>l&&(i.adler=tf(i.adler,o.pending_buf,o.pending-l,l)),u===0&&(o.status=h1)}else o.status=h1;if(o.status===h1&&(o.gzhead.hcrc?(o.pending+2>o.pending_buf_size&&nf(i),o.pending+2<=o.pending_buf_size&&(Go(o,i.adler&255),Go(o,i.adler>>8&255),i.adler=0,o.status=Gf)):o.status=Gf),o.pending!==0){if(nf(i),i.avail_out===0)return o.last_flush=-1,Qc}else if(i.avail_in===0&&Rv(e)<=Rv(t)&&e!==cf)return lf(i,f2);if(o.status===Pd&&i.avail_in!==0)return lf(i,f2);if(i.avail_in!==0||o.lookahead!==0||e!==i0&&o.status!==Pd){var f=o.strategy===Vp?sT(o,e):o.strategy===VI?oT(o,e):z0[o.level].func(o,e);if((f===Zf||f===sd)&&(o.status=Pd),f===Aa||f===Zf)return i.avail_out===0&&(o.last_flush=-1),Qc;if(f===ap&&(e===BI?ic._tr_align(o):e!==Ov&&(ic._tr_stored_block(o,0,0,!1),e===zI&&(of(o.head),o.lookahead===0&&(o.strstart=0,o.block_start=0,o.insert=0))),nf(i),i.avail_out===0))return o.last_flush=-1,Qc}return e!==cf?Qc:o.wrap<=0?Fv:(o.wrap===2?(Go(o,i.adler&255),Go(o,i.adler>>8&255),Go(o,i.adler>>16&255),Go(o,i.adler>>24&255),Go(o,i.total_in&255),Go(o,i.total_in>>8&255),Go(o,i.total_in>>16&255),Go(o,i.total_in>>24&255)):(Sd(o,i.adler>>>16),Sd(o,i.adler&65535)),nf(i),o.wrap>0&&(o.wrap=-o.wrap),o.pending!==0?Qc:Fv)}function fT(i){var e;return!i||!i.state?nc:(e=i.state.status,e!==X1&&e!==tg&&e!==u1&&e!==c1&&e!==h1&&e!==Gf&&e!==Pd?lf(i,nc):(i.state=null,e===Gf?lf(i,NI):Qc))}function dT(i,e){var t=e.length,o,l,u,m,r,f,_,b;if(!i||!i.state||(o=i.state,m=o.wrap,m===2||m===1&&o.status!==X1||o.lookahead))return nc;for(m===1&&(i.adler=qw(i.adler,e,t,0)),o.wrap=0,t>=o.w_size&&(m===0&&(of(o.head),o.strstart=0,o.block_start=0,o.insert=0),b=new Rl.Buf8(o.w_size),Rl.arraySet(b,e,t-o.w_size,o.w_size,0),e=b,t=o.w_size),r=i.avail_in,f=i.next_in,_=i.input,i.avail_in=t,i.next_in=0,i.input=e,Kf(o);o.lookahead>=Mo;){l=o.strstart,u=o.lookahead-(Mo-1);do o.ins_h=(o.ins_h<<o.hash_shift^o.window[l+Mo-1])&o.hash_mask,o.prev[l&o.w_mask]=o.head[o.ins_h],o.head[o.ins_h]=l,l++;while(--u);o.strstart=l,o.lookahead=Mo-1,Kf(o)}return o.strstart+=o.lookahead,o.block_start=o.strstart,o.insert=o.lookahead,o.lookahead=0,o.match_length=o.prev_length=Mo-1,o.match_available=0,i.next_in=f,i.input=_,i.avail_in=r,o.wrap=m,Qc}sh.deflateInit=cT;sh.deflateInit2=Xw;sh.deflateReset=Ww;sh.deflateResetKeep=Gw;sh.deflateSetHeader=uT;sh.deflate=hT;sh.deflateEnd=fT;sh.deflateSetDictionary=dT;sh.deflateInfo="pako deflate (from Nodeca project)";var n0={},Y1=Oh,Yw=!0,Zw=!0;try{String.fromCharCode.apply(null,[0])}catch{Yw=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{Zw=!1}var $d=new Y1.Buf8(256);for(var Qh=0;Qh<256;Qh++)$d[Qh]=Qh>=252?6:Qh>=248?5:Qh>=240?4:Qh>=224?3:Qh>=192?2:1;$d[254]=$d[254]=1;n0.string2buf=function(i){var e,t,o,l,u,m=i.length,r=0;for(l=0;l<m;l++)t=i.charCodeAt(l),(t&64512)===55296&&l+1<m&&(o=i.charCodeAt(l+1),(o&64512)===56320&&(t=65536+(t-55296<<10)+(o-56320),l++)),r+=t<128?1:t<2048?2:t<65536?3:4;for(e=new Y1.Buf8(r),u=0,l=0;u<r;l++)t=i.charCodeAt(l),(t&64512)===55296&&l+1<m&&(o=i.charCodeAt(l+1),(o&64512)===56320&&(t=65536+(t-55296<<10)+(o-56320),l++)),t<128?e[u++]=t:t<2048?(e[u++]=192|t>>>6,e[u++]=128|t&63):t<65536?(e[u++]=224|t>>>12,e[u++]=128|t>>>6&63,e[u++]=128|t&63):(e[u++]=240|t>>>18,e[u++]=128|t>>>12&63,e[u++]=128|t>>>6&63,e[u++]=128|t&63);return e};function Kw(i,e){if(e<65534&&(i.subarray&&Zw||!i.subarray&&Yw))return String.fromCharCode.apply(null,Y1.shrinkBuf(i,e));for(var t="",o=0;o<e;o++)t+=String.fromCharCode(i[o]);return t}n0.buf2binstring=function(i){return Kw(i,i.length)};n0.binstring2buf=function(i){for(var e=new Y1.Buf8(i.length),t=0,o=e.length;t<o;t++)e[t]=i.charCodeAt(t);return e};n0.buf2string=function(i,e){var t,o,l,u,m=e||i.length,r=new Array(m*2);for(o=0,t=0;t<m;){if(l=i[t++],l<128){r[o++]=l;continue}if(u=$d[l],u>4){r[o++]=65533,t+=u-1;continue}for(l&=u===2?31:u===3?15:7;u>1&&t<m;)l=l<<6|i[t++]&63,u--;if(u>1){r[o++]=65533;continue}l<65536?r[o++]=l:(l-=65536,r[o++]=55296|l>>10&1023,r[o++]=56320|l&1023)}return Kw(r,o)};n0.utf8border=function(i,e){var t;for(e=e||i.length,e>i.length&&(e=i.length),t=e-1;t>=0&&(i[t]&192)===128;)t--;return t<0||t===0?e:t+$d[i[t]]>e?t:e};function pT(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var Jw=pT,Bd=sh,zd=Oh,ig=n0,ng=$g,mT=Jw,Qw=Object.prototype.toString,gT=0,p2=4,K0=0,Bv=1,zv=2,yT=-1,_T=0,vT=8;function Jf(i){if(!(this instanceof Jf))return new Jf(i);this.options=zd.assign({level:yT,method:vT,chunkSize:16384,windowBits:15,memLevel:8,strategy:_T,to:""},i||{});var e=this.options;e.raw&&e.windowBits>0?e.windowBits=-e.windowBits:e.gzip&&e.windowBits>0&&e.windowBits<16&&(e.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new mT,this.strm.avail_out=0;var t=Bd.deflateInit2(this.strm,e.level,e.method,e.windowBits,e.memLevel,e.strategy);if(t!==K0)throw new Error(ng[t]);if(e.header&&Bd.deflateSetHeader(this.strm,e.header),e.dictionary){var o;if(typeof e.dictionary=="string"?o=ig.string2buf(e.dictionary):Qw.call(e.dictionary)==="[object ArrayBuffer]"?o=new Uint8Array(e.dictionary):o=e.dictionary,t=Bd.deflateSetDictionary(this.strm,o),t!==K0)throw new Error(ng[t]);this._dict_set=!0}}Jf.prototype.push=function(i,e){var t=this.strm,o=this.options.chunkSize,l,u;if(this.ended)return!1;u=e===~~e?e:e===!0?p2:gT,typeof i=="string"?t.input=ig.string2buf(i):Qw.call(i)==="[object ArrayBuffer]"?t.input=new Uint8Array(i):t.input=i,t.next_in=0,t.avail_in=t.input.length;do{if(t.avail_out===0&&(t.output=new zd.Buf8(o),t.next_out=0,t.avail_out=o),l=Bd.deflate(t,u),l!==Bv&&l!==K0)return this.onEnd(l),this.ended=!0,!1;(t.avail_out===0||t.avail_in===0&&(u===p2||u===zv))&&(this.options.to==="string"?this.onData(ig.buf2binstring(zd.shrinkBuf(t.output,t.next_out))):this.onData(zd.shrinkBuf(t.output,t.next_out)))}while((t.avail_in>0||t.avail_out===0)&&l!==Bv);return u===p2?(l=Bd.deflateEnd(this.strm),this.onEnd(l),this.ended=!0,l===K0):(u===zv&&(this.onEnd(K0),t.avail_out=0),!0)};Jf.prototype.onData=function(i){this.chunks.push(i)};Jf.prototype.onEnd=function(i){i===K0&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=zd.flattenChunks(this.chunks)),this.chunks=[],this.err=i,this.msg=this.strm.msg};function ey(i,e){var t=new Jf(e);if(t.push(i,!0),t.err)throw t.msg||ng[t.err];return t.result}function bT(i,e){return e=e||{},e.raw=!0,ey(i,e)}function wT(i,e){return e=e||{},e.gzip=!0,ey(i,e)}op.Deflate=Jf;op.deflate=ey;op.deflateRaw=bT;op.gzip=wT;var lp={},Pc={},qp=30,xT=12,AT=function(e,t){var o,l,u,m,r,f,_,b,v,w,x,C,T,S,M,O,V,X,Z,te,J,ie,Ee,Pe,de;o=e.state,l=e.next_in,Pe=e.input,u=l+(e.avail_in-5),m=e.next_out,de=e.output,r=m-(t-e.avail_out),f=m+(e.avail_out-257),_=o.dmax,b=o.wsize,v=o.whave,w=o.wnext,x=o.window,C=o.hold,T=o.bits,S=o.lencode,M=o.distcode,O=(1<<o.lenbits)-1,V=(1<<o.distbits)-1;e:do{T<15&&(C+=Pe[l++]<<T,T+=8,C+=Pe[l++]<<T,T+=8),X=S[C&O];t:for(;;){if(Z=X>>>24,C>>>=Z,T-=Z,Z=X>>>16&255,Z===0)de[m++]=X&65535;else if(Z&16){te=X&65535,Z&=15,Z&&(T<Z&&(C+=Pe[l++]<<T,T+=8),te+=C&(1<<Z)-1,C>>>=Z,T-=Z),T<15&&(C+=Pe[l++]<<T,T+=8,C+=Pe[l++]<<T,T+=8),X=M[C&V];i:for(;;){if(Z=X>>>24,C>>>=Z,T-=Z,Z=X>>>16&255,Z&16){if(J=X&65535,Z&=15,T<Z&&(C+=Pe[l++]<<T,T+=8,T<Z&&(C+=Pe[l++]<<T,T+=8)),J+=C&(1<<Z)-1,J>_){e.msg="invalid distance too far back",o.mode=qp;break e}if(C>>>=Z,T-=Z,Z=m-r,J>Z){if(Z=J-Z,Z>v&&o.sane){e.msg="invalid distance too far back",o.mode=qp;break e}if(ie=0,Ee=x,w===0){if(ie+=b-Z,Z<te){te-=Z;do de[m++]=x[ie++];while(--Z);ie=m-J,Ee=de}}else if(w<Z){if(ie+=b+w-Z,Z-=w,Z<te){te-=Z;do de[m++]=x[ie++];while(--Z);if(ie=0,w<te){Z=w,te-=Z;do de[m++]=x[ie++];while(--Z);ie=m-J,Ee=de}}}else if(ie+=w-Z,Z<te){te-=Z;do de[m++]=x[ie++];while(--Z);ie=m-J,Ee=de}for(;te>2;)de[m++]=Ee[ie++],de[m++]=Ee[ie++],de[m++]=Ee[ie++],te-=3;te&&(de[m++]=Ee[ie++],te>1&&(de[m++]=Ee[ie++]))}else{ie=m-J;do de[m++]=de[ie++],de[m++]=de[ie++],de[m++]=de[ie++],te-=3;while(te>2);te&&(de[m++]=de[ie++],te>1&&(de[m++]=de[ie++]))}}else if((Z&64)===0){X=M[(X&65535)+(C&(1<<Z)-1)];continue i}else{e.msg="invalid distance code",o.mode=qp;break e}break}}else if((Z&64)===0){X=S[(X&65535)+(C&(1<<Z)-1)];continue t}else if(Z&32){o.mode=xT;break e}else{e.msg="invalid literal/length code",o.mode=qp;break e}break}}while(l<u&&m<f);te=T>>3,l-=te,T-=te<<3,C&=(1<<T)-1,e.next_in=l,e.next_out=m,e.avail_in=l<u?5+(u-l):5-(l-u),e.avail_out=m<f?257+(f-m):257-(m-f),o.hold=C,o.bits=T},Nv=Oh,k0=15,jv=852,Uv=592,Vv=0,m2=1,qv=2,kT=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],ST=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],CT=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],ET=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64],IT=function(e,t,o,l,u,m,r,f){var _=f.bits,b=0,v=0,w=0,x=0,C=0,T=0,S=0,M=0,O=0,V=0,X,Z,te,J,ie,Ee=null,Pe=0,de,Te=new Nv.Buf16(k0+1),ve=new Nv.Buf16(k0+1),_e=null,ot=0,it,It,Xe;for(b=0;b<=k0;b++)Te[b]=0;for(v=0;v<l;v++)Te[t[o+v]]++;for(C=_,x=k0;x>=1&&Te[x]===0;x--);if(C>x&&(C=x),x===0)return u[m++]=1<<24|64<<16|0,u[m++]=1<<24|64<<16|0,f.bits=1,0;for(w=1;w<x&&Te[w]===0;w++);for(C<w&&(C=w),M=1,b=1;b<=k0;b++)if(M<<=1,M-=Te[b],M<0)return-1;if(M>0&&(e===Vv||x!==1))return-1;for(ve[1]=0,b=1;b<k0;b++)ve[b+1]=ve[b]+Te[b];for(v=0;v<l;v++)t[o+v]!==0&&(r[ve[t[o+v]]++]=v);if(e===Vv?(Ee=_e=r,de=19):e===m2?(Ee=kT,Pe-=257,_e=ST,ot-=257,de=256):(Ee=CT,_e=ET,de=-1),V=0,v=0,b=w,ie=m,T=C,S=0,te=-1,O=1<<C,J=O-1,e===m2&&O>jv||e===qv&&O>Uv)return 1;for(;;){it=b-S,r[v]<de?(It=0,Xe=r[v]):r[v]>de?(It=_e[ot+r[v]],Xe=Ee[Pe+r[v]]):(It=32+64,Xe=0),X=1<<b-S,Z=1<<T,w=Z;do Z-=X,u[ie+(V>>S)+Z]=it<<24|It<<16|Xe|0;while(Z!==0);for(X=1<<b-1;V&X;)X>>=1;if(X!==0?(V&=X-1,V+=X):V=0,v++,--Te[b]===0){if(b===x)break;b=t[o+r[v]]}if(b>C&&(V&J)!==te){for(S===0&&(S=C),ie+=w,T=b-S,M=1<<T;T+S<x&&(M-=Te[T+S],!(M<=0));)T++,M<<=1;if(O+=1<<T,e===m2&&O>jv||e===qv&&O>Uv)return 1;te=V&J,u[te]=C<<24|T<<16|ie-m|0}}return V!==0&&(u[ie+V]=b-S<<24|64<<16|0),f.bits=C,0},Du=Oh,rg=Uw,Wc=Vw,TT=AT,Nd=IT,LT=0,$w=1,e3=2,Hv=4,PT=5,Hp=6,Qf=0,MT=1,DT=2,rc=-2,t3=-3,i3=-4,OT=-5,Gv=8,n3=1,Wv=2,Xv=3,Yv=4,Zv=5,Kv=6,Jv=7,Qv=8,$v=9,eb=10,C1=11,Ah=12,g2=13,tb=14,y2=15,ib=16,nb=17,rb=18,ob=19,Gp=20,Wp=21,sb=22,ab=23,lb=24,ub=25,cb=26,_2=27,hb=28,fb=29,Ms=30,r3=31,FT=32,RT=852,BT=592,zT=15,NT=zT;function db(i){return(i>>>24&255)+(i>>>8&65280)+((i&65280)<<8)+((i&255)<<24)}function jT(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Du.Buf16(320),this.work=new Du.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function o3(i){var e;return!i||!i.state?rc:(e=i.state,i.total_in=i.total_out=e.total=0,i.msg="",e.wrap&&(i.adler=e.wrap&1),e.mode=n3,e.last=0,e.havedict=0,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new Du.Buf32(RT),e.distcode=e.distdyn=new Du.Buf32(BT),e.sane=1,e.back=-1,Qf)}function s3(i){var e;return!i||!i.state?rc:(e=i.state,e.wsize=0,e.whave=0,e.wnext=0,o3(i))}function a3(i,e){var t,o;return!i||!i.state||(o=i.state,e<0?(t=0,e=-e):(t=(e>>4)+1,e<48&&(e&=15)),e&&(e<8||e>15))?rc:(o.window!==null&&o.wbits!==e&&(o.window=null),o.wrap=t,o.wbits=e,s3(i))}function l3(i,e){var t,o;return i?(o=new jT,i.state=o,o.window=null,t=a3(i,e),t!==Qf&&(i.state=null),t):rc}function UT(i){return l3(i,NT)}var pb=!0,v2,b2;function VT(i){if(pb){var e;for(v2=new Du.Buf32(512),b2=new Du.Buf32(32),e=0;e<144;)i.lens[e++]=8;for(;e<256;)i.lens[e++]=9;for(;e<280;)i.lens[e++]=7;for(;e<288;)i.lens[e++]=8;for(Nd($w,i.lens,0,288,v2,0,i.work,{bits:9}),e=0;e<32;)i.lens[e++]=5;Nd(e3,i.lens,0,32,b2,0,i.work,{bits:5}),pb=!1}i.lencode=v2,i.lenbits=9,i.distcode=b2,i.distbits=5}function u3(i,e,t,o){var l,u=i.state;return u.window===null&&(u.wsize=1<<u.wbits,u.wnext=0,u.whave=0,u.window=new Du.Buf8(u.wsize)),o>=u.wsize?(Du.arraySet(u.window,e,t-u.wsize,u.wsize,0),u.wnext=0,u.whave=u.wsize):(l=u.wsize-u.wnext,l>o&&(l=o),Du.arraySet(u.window,e,t-o,l,u.wnext),o-=l,o?(Du.arraySet(u.window,e,t-o,o,0),u.wnext=o,u.whave=u.wsize):(u.wnext+=l,u.wnext===u.wsize&&(u.wnext=0),u.whave<u.wsize&&(u.whave+=l))),0}function qT(i,e){var t,o,l,u,m,r,f,_,b,v,w,x,C,T,S=0,M,O,V,X,Z,te,J,ie,Ee=new Du.Buf8(4),Pe,de,Te=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!i||!i.state||!i.output||!i.input&&i.avail_in!==0)return rc;t=i.state,t.mode===Ah&&(t.mode=g2),m=i.next_out,l=i.output,f=i.avail_out,u=i.next_in,o=i.input,r=i.avail_in,_=t.hold,b=t.bits,v=r,w=f,ie=Qf;e:for(;;)switch(t.mode){case n3:if(t.wrap===0){t.mode=g2;break}for(;b<16;){if(r===0)break e;r--,_+=o[u++]<<b,b+=8}if(t.wrap&2&&_===35615){t.check=0,Ee[0]=_&255,Ee[1]=_>>>8&255,t.check=Wc(t.check,Ee,2,0),_=0,b=0,t.mode=Wv;break}if(t.flags=0,t.head&&(t.head.done=!1),!(t.wrap&1)||(((_&255)<<8)+(_>>8))%31){i.msg="incorrect header check",t.mode=Ms;break}if((_&15)!==Gv){i.msg="unknown compression method",t.mode=Ms;break}if(_>>>=4,b-=4,J=(_&15)+8,t.wbits===0)t.wbits=J;else if(J>t.wbits){i.msg="invalid window size",t.mode=Ms;break}t.dmax=1<<J,i.adler=t.check=1,t.mode=_&512?eb:Ah,_=0,b=0;break;case Wv:for(;b<16;){if(r===0)break e;r--,_+=o[u++]<<b,b+=8}if(t.flags=_,(t.flags&255)!==Gv){i.msg="unknown compression method",t.mode=Ms;break}if(t.flags&57344){i.msg="unknown header flags set",t.mode=Ms;break}t.head&&(t.head.text=_>>8&1),t.flags&512&&(Ee[0]=_&255,Ee[1]=_>>>8&255,t.check=Wc(t.check,Ee,2,0)),_=0,b=0,t.mode=Xv;case Xv:for(;b<32;){if(r===0)break e;r--,_+=o[u++]<<b,b+=8}t.head&&(t.head.time=_),t.flags&512&&(Ee[0]=_&255,Ee[1]=_>>>8&255,Ee[2]=_>>>16&255,Ee[3]=_>>>24&255,t.check=Wc(t.check,Ee,4,0)),_=0,b=0,t.mode=Yv;case Yv:for(;b<16;){if(r===0)break e;r--,_+=o[u++]<<b,b+=8}t.head&&(t.head.xflags=_&255,t.head.os=_>>8),t.flags&512&&(Ee[0]=_&255,Ee[1]=_>>>8&255,t.check=Wc(t.check,Ee,2,0)),_=0,b=0,t.mode=Zv;case Zv:if(t.flags&1024){for(;b<16;){if(r===0)break e;r--,_+=o[u++]<<b,b+=8}t.length=_,t.head&&(t.head.extra_len=_),t.flags&512&&(Ee[0]=_&255,Ee[1]=_>>>8&255,t.check=Wc(t.check,Ee,2,0)),_=0,b=0}else t.head&&(t.head.extra=null);t.mode=Kv;case Kv:if(t.flags&1024&&(x=t.length,x>r&&(x=r),x&&(t.head&&(J=t.head.extra_len-t.length,t.head.extra||(t.head.extra=new Array(t.head.extra_len)),Du.arraySet(t.head.extra,o,u,x,J)),t.flags&512&&(t.check=Wc(t.check,o,x,u)),r-=x,u+=x,t.length-=x),t.length))break e;t.length=0,t.mode=Jv;case Jv:if(t.flags&2048){if(r===0)break e;x=0;do J=o[u+x++],t.head&&J&&t.length<65536&&(t.head.name+=String.fromCharCode(J));while(J&&x<r);if(t.flags&512&&(t.check=Wc(t.check,o,x,u)),r-=x,u+=x,J)break e}else t.head&&(t.head.name=null);t.length=0,t.mode=Qv;case Qv:if(t.flags&4096){if(r===0)break e;x=0;do J=o[u+x++],t.head&&J&&t.length<65536&&(t.head.comment+=String.fromCharCode(J));while(J&&x<r);if(t.flags&512&&(t.check=Wc(t.check,o,x,u)),r-=x,u+=x,J)break e}else t.head&&(t.head.comment=null);t.mode=$v;case $v:if(t.flags&512){for(;b<16;){if(r===0)break e;r--,_+=o[u++]<<b,b+=8}if(_!==(t.check&65535)){i.msg="header crc mismatch",t.mode=Ms;break}_=0,b=0}t.head&&(t.head.hcrc=t.flags>>9&1,t.head.done=!0),i.adler=t.check=0,t.mode=Ah;break;case eb:for(;b<32;){if(r===0)break e;r--,_+=o[u++]<<b,b+=8}i.adler=t.check=db(_),_=0,b=0,t.mode=C1;case C1:if(t.havedict===0)return i.next_out=m,i.avail_out=f,i.next_in=u,i.avail_in=r,t.hold=_,t.bits=b,DT;i.adler=t.check=1,t.mode=Ah;case Ah:if(e===PT||e===Hp)break e;case g2:if(t.last){_>>>=b&7,b-=b&7,t.mode=_2;break}for(;b<3;){if(r===0)break e;r--,_+=o[u++]<<b,b+=8}switch(t.last=_&1,_>>>=1,b-=1,_&3){case 0:t.mode=tb;break;case 1:if(VT(t),t.mode=Gp,e===Hp){_>>>=2,b-=2;break e}break;case 2:t.mode=nb;break;case 3:i.msg="invalid block type",t.mode=Ms}_>>>=2,b-=2;break;case tb:for(_>>>=b&7,b-=b&7;b<32;){if(r===0)break e;r--,_+=o[u++]<<b,b+=8}if((_&65535)!==(_>>>16^65535)){i.msg="invalid stored block lengths",t.mode=Ms;break}if(t.length=_&65535,_=0,b=0,t.mode=y2,e===Hp)break e;case y2:t.mode=ib;case ib:if(x=t.length,x){if(x>r&&(x=r),x>f&&(x=f),x===0)break e;Du.arraySet(l,o,u,x,m),r-=x,u+=x,f-=x,m+=x,t.length-=x;break}t.mode=Ah;break;case nb:for(;b<14;){if(r===0)break e;r--,_+=o[u++]<<b,b+=8}if(t.nlen=(_&31)+257,_>>>=5,b-=5,t.ndist=(_&31)+1,_>>>=5,b-=5,t.ncode=(_&15)+4,_>>>=4,b-=4,t.nlen>286||t.ndist>30){i.msg="too many length or distance symbols",t.mode=Ms;break}t.have=0,t.mode=rb;case rb:for(;t.have<t.ncode;){for(;b<3;){if(r===0)break e;r--,_+=o[u++]<<b,b+=8}t.lens[Te[t.have++]]=_&7,_>>>=3,b-=3}for(;t.have<19;)t.lens[Te[t.have++]]=0;if(t.lencode=t.lendyn,t.lenbits=7,Pe={bits:t.lenbits},ie=Nd(LT,t.lens,0,19,t.lencode,0,t.work,Pe),t.lenbits=Pe.bits,ie){i.msg="invalid code lengths set",t.mode=Ms;break}t.have=0,t.mode=ob;case ob:for(;t.have<t.nlen+t.ndist;){for(;S=t.lencode[_&(1<<t.lenbits)-1],M=S>>>24,O=S>>>16&255,V=S&65535,!(M<=b);){if(r===0)break e;r--,_+=o[u++]<<b,b+=8}if(V<16)_>>>=M,b-=M,t.lens[t.have++]=V;else{if(V===16){for(de=M+2;b<de;){if(r===0)break e;r--,_+=o[u++]<<b,b+=8}if(_>>>=M,b-=M,t.have===0){i.msg="invalid bit length repeat",t.mode=Ms;break}J=t.lens[t.have-1],x=3+(_&3),_>>>=2,b-=2}else if(V===17){for(de=M+3;b<de;){if(r===0)break e;r--,_+=o[u++]<<b,b+=8}_>>>=M,b-=M,J=0,x=3+(_&7),_>>>=3,b-=3}else{for(de=M+7;b<de;){if(r===0)break e;r--,_+=o[u++]<<b,b+=8}_>>>=M,b-=M,J=0,x=11+(_&127),_>>>=7,b-=7}if(t.have+x>t.nlen+t.ndist){i.msg="invalid bit length repeat",t.mode=Ms;break}for(;x--;)t.lens[t.have++]=J}}if(t.mode===Ms)break;if(t.lens[256]===0){i.msg="invalid code -- missing end-of-block",t.mode=Ms;break}if(t.lenbits=9,Pe={bits:t.lenbits},ie=Nd($w,t.lens,0,t.nlen,t.lencode,0,t.work,Pe),t.lenbits=Pe.bits,ie){i.msg="invalid literal/lengths set",t.mode=Ms;break}if(t.distbits=6,t.distcode=t.distdyn,Pe={bits:t.distbits},ie=Nd(e3,t.lens,t.nlen,t.ndist,t.distcode,0,t.work,Pe),t.distbits=Pe.bits,ie){i.msg="invalid distances set",t.mode=Ms;break}if(t.mode=Gp,e===Hp)break e;case Gp:t.mode=Wp;case Wp:if(r>=6&&f>=258){i.next_out=m,i.avail_out=f,i.next_in=u,i.avail_in=r,t.hold=_,t.bits=b,TT(i,w),m=i.next_out,l=i.output,f=i.avail_out,u=i.next_in,o=i.input,r=i.avail_in,_=t.hold,b=t.bits,t.mode===Ah&&(t.back=-1);break}for(t.back=0;S=t.lencode[_&(1<<t.lenbits)-1],M=S>>>24,O=S>>>16&255,V=S&65535,!(M<=b);){if(r===0)break e;r--,_+=o[u++]<<b,b+=8}if(O&&(O&240)===0){for(X=M,Z=O,te=V;S=t.lencode[te+((_&(1<<X+Z)-1)>>X)],M=S>>>24,O=S>>>16&255,V=S&65535,!(X+M<=b);){if(r===0)break e;r--,_+=o[u++]<<b,b+=8}_>>>=X,b-=X,t.back+=X}if(_>>>=M,b-=M,t.back+=M,t.length=V,O===0){t.mode=cb;break}if(O&32){t.back=-1,t.mode=Ah;break}if(O&64){i.msg="invalid literal/length code",t.mode=Ms;break}t.extra=O&15,t.mode=sb;case sb:if(t.extra){for(de=t.extra;b<de;){if(r===0)break e;r--,_+=o[u++]<<b,b+=8}t.length+=_&(1<<t.extra)-1,_>>>=t.extra,b-=t.extra,t.back+=t.extra}t.was=t.length,t.mode=ab;case ab:for(;S=t.distcode[_&(1<<t.distbits)-1],M=S>>>24,O=S>>>16&255,V=S&65535,!(M<=b);){if(r===0)break e;r--,_+=o[u++]<<b,b+=8}if((O&240)===0){for(X=M,Z=O,te=V;S=t.distcode[te+((_&(1<<X+Z)-1)>>X)],M=S>>>24,O=S>>>16&255,V=S&65535,!(X+M<=b);){if(r===0)break e;r--,_+=o[u++]<<b,b+=8}_>>>=X,b-=X,t.back+=X}if(_>>>=M,b-=M,t.back+=M,O&64){i.msg="invalid distance code",t.mode=Ms;break}t.offset=V,t.extra=O&15,t.mode=lb;case lb:if(t.extra){for(de=t.extra;b<de;){if(r===0)break e;r--,_+=o[u++]<<b,b+=8}t.offset+=_&(1<<t.extra)-1,_>>>=t.extra,b-=t.extra,t.back+=t.extra}if(t.offset>t.dmax){i.msg="invalid distance too far back",t.mode=Ms;break}t.mode=ub;case ub:if(f===0)break e;if(x=w-f,t.offset>x){if(x=t.offset-x,x>t.whave&&t.sane){i.msg="invalid distance too far back",t.mode=Ms;break}x>t.wnext?(x-=t.wnext,C=t.wsize-x):C=t.wnext-x,x>t.length&&(x=t.length),T=t.window}else T=l,C=m-t.offset,x=t.length;x>f&&(x=f),f-=x,t.length-=x;do l[m++]=T[C++];while(--x);t.length===0&&(t.mode=Wp);break;case cb:if(f===0)break e;l[m++]=t.length,f--,t.mode=Wp;break;case _2:if(t.wrap){for(;b<32;){if(r===0)break e;r--,_|=o[u++]<<b,b+=8}if(w-=f,i.total_out+=w,t.total+=w,w&&(i.adler=t.check=t.flags?Wc(t.check,l,w,m-w):rg(t.check,l,w,m-w)),w=f,(t.flags?_:db(_))!==t.check){i.msg="incorrect data check",t.mode=Ms;break}_=0,b=0}t.mode=hb;case hb:if(t.wrap&&t.flags){for(;b<32;){if(r===0)break e;r--,_+=o[u++]<<b,b+=8}if(_!==(t.total&4294967295)){i.msg="incorrect length check",t.mode=Ms;break}_=0,b=0}t.mode=fb;case fb:ie=MT;break e;case Ms:ie=t3;break e;case r3:return i3;case FT:default:return rc}return i.next_out=m,i.avail_out=f,i.next_in=u,i.avail_in=r,t.hold=_,t.bits=b,(t.wsize||w!==i.avail_out&&t.mode<Ms&&(t.mode<_2||e!==Hv))&&u3(i,i.output,i.next_out,w-i.avail_out),v-=i.avail_in,w-=i.avail_out,i.total_in+=v,i.total_out+=w,t.total+=w,t.wrap&&w&&(i.adler=t.check=t.flags?Wc(t.check,l,w,i.next_out-w):rg(t.check,l,w,i.next_out-w)),i.data_type=t.bits+(t.last?64:0)+(t.mode===Ah?128:0)+(t.mode===Gp||t.mode===y2?256:0),(v===0&&w===0||e===Hv)&&ie===Qf&&(ie=OT),ie}function HT(i){if(!i||!i.state)return rc;var e=i.state;return e.window&&(e.window=null),i.state=null,Qf}function GT(i,e){var t;return!i||!i.state||(t=i.state,(t.wrap&2)===0)?rc:(t.head=e,e.done=!1,Qf)}function WT(i,e){var t=e.length,o,l,u;return!i||!i.state||(o=i.state,o.wrap!==0&&o.mode!==C1)?rc:o.mode===C1&&(l=1,l=rg(l,e,t,0),l!==o.check)?t3:(u=u3(i,e,t,t),u?(o.mode=r3,i3):(o.havedict=1,Qf))}Pc.inflateReset=s3;Pc.inflateReset2=a3;Pc.inflateResetKeep=o3;Pc.inflateInit=UT;Pc.inflateInit2=l3;Pc.inflate=qT;Pc.inflateEnd=HT;Pc.inflateGetHeader=GT;Pc.inflateSetDictionary=WT;Pc.inflateInfo="pako inflate (from Nodeca project)";var c3={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};function XT(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var YT=XT,J0=Pc,jd=Oh,f1=n0,ea=c3,og=$g,ZT=Jw,KT=YT,h3=Object.prototype.toString;function $f(i){if(!(this instanceof $f))return new $f(i);this.options=jd.assign({chunkSize:16384,windowBits:0,to:""},i||{});var e=this.options;e.raw&&e.windowBits>=0&&e.windowBits<16&&(e.windowBits=-e.windowBits,e.windowBits===0&&(e.windowBits=-15)),e.windowBits>=0&&e.windowBits<16&&!(i&&i.windowBits)&&(e.windowBits+=32),e.windowBits>15&&e.windowBits<48&&(e.windowBits&15)===0&&(e.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new ZT,this.strm.avail_out=0;var t=J0.inflateInit2(this.strm,e.windowBits);if(t!==ea.Z_OK)throw new Error(og[t]);if(this.header=new KT,J0.inflateGetHeader(this.strm,this.header),e.dictionary&&(typeof e.dictionary=="string"?e.dictionary=f1.string2buf(e.dictionary):h3.call(e.dictionary)==="[object ArrayBuffer]"&&(e.dictionary=new Uint8Array(e.dictionary)),e.raw&&(t=J0.inflateSetDictionary(this.strm,e.dictionary),t!==ea.Z_OK)))throw new Error(og[t])}$f.prototype.push=function(i,e){var t=this.strm,o=this.options.chunkSize,l=this.options.dictionary,u,m,r,f,_,b=!1;if(this.ended)return!1;m=e===~~e?e:e===!0?ea.Z_FINISH:ea.Z_NO_FLUSH,typeof i=="string"?t.input=f1.binstring2buf(i):h3.call(i)==="[object ArrayBuffer]"?t.input=new Uint8Array(i):t.input=i,t.next_in=0,t.avail_in=t.input.length;do{if(t.avail_out===0&&(t.output=new jd.Buf8(o),t.next_out=0,t.avail_out=o),u=J0.inflate(t,ea.Z_NO_FLUSH),u===ea.Z_NEED_DICT&&l&&(u=J0.inflateSetDictionary(this.strm,l)),u===ea.Z_BUF_ERROR&&b===!0&&(u=ea.Z_OK,b=!1),u!==ea.Z_STREAM_END&&u!==ea.Z_OK)return this.onEnd(u),this.ended=!0,!1;t.next_out&&(t.avail_out===0||u===ea.Z_STREAM_END||t.avail_in===0&&(m===ea.Z_FINISH||m===ea.Z_SYNC_FLUSH))&&(this.options.to==="string"?(r=f1.utf8border(t.output,t.next_out),f=t.next_out-r,_=f1.buf2string(t.output,r),t.next_out=f,t.avail_out=o-f,f&&jd.arraySet(t.output,t.output,r,f,0),this.onData(_)):this.onData(jd.shrinkBuf(t.output,t.next_out))),t.avail_in===0&&t.avail_out===0&&(b=!0)}while((t.avail_in>0||t.avail_out===0)&&u!==ea.Z_STREAM_END);return u===ea.Z_STREAM_END&&(m=ea.Z_FINISH),m===ea.Z_FINISH?(u=J0.inflateEnd(this.strm),this.onEnd(u),this.ended=!0,u===ea.Z_OK):(m===ea.Z_SYNC_FLUSH&&(this.onEnd(ea.Z_OK),t.avail_out=0),!0)};$f.prototype.onData=function(i){this.chunks.push(i)};$f.prototype.onEnd=function(i){i===ea.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=jd.flattenChunks(this.chunks)),this.chunks=[],this.err=i,this.msg=this.strm.msg};function ty(i,e){var t=new $f(e);if(t.push(i,!0),t.err)throw t.msg||og[t.err];return t.result}function JT(i,e){return e=e||{},e.raw=!0,ty(i,e)}lp.Inflate=$f;lp.inflate=ty;lp.inflateRaw=JT;lp.ungzip=ty;var QT=Oh.assign,$T=op,e7=lp,t7=c3,f3={};QT(f3,$T,e7,t7);var i7=f3,n7=function(){function i(e){var t=this;this.decode=function(){var x=new Uint8Array(t.width*t.height*4),C=t.decodePixels();return t.copyImageDataToBuffer(x,C),x},this.copyImageDataToBuffer=function(x,C){var T=t.colors,S,M=t.hasAlphaChannel;t.palette.length&&(S=t.decodePalette(),T=4,M=!0);var O=x,V=O.length,X=S||C,Z=0,te=0;if(T===1)for(;Z<V;){var J=S?C[Z/4]*4:te,ie=X[J++];O[Z++]=ie,O[Z++]=ie,O[Z++]=ie,O[Z++]=M?X[J++]:255,te=J}else for(;Z<V;){var J=S?C[Z/4]*4:te;O[Z++]=X[J++],O[Z++]=X[J++],O[Z++]=X[J++],O[Z++]=M?X[J++]:255,te=J}},this.decodePixels=function(){for(var x=i7.inflate(t.imgData),C=t.pixelBitlength/8,T=C*t.width,S=new Uint8Array(T*t.height),M=x.length,O=0,V=0,X=0;V<M;){switch(x[V++]){case 0:{for(var Z=0;Z<T;Z++)S[X++]=x[V++];break}case 1:{for(var Z=0;Z<T;Z++){var te=x[V++],J=Z<C?0:S[X-C];S[X++]=(te+J)%256}break}case 2:{for(var Z=0;Z<T;Z++){var te=x[V++],ie=(Z-Z%C)/C,Ee=(O-1)*T+ie*C+Z%C,Pe=O&&S[Ee];S[X++]=(Pe+te)%256}break}case 3:{for(var Z=0;Z<T;Z++){var te=x[V++],ie=(Z-Z%C)/C,J=Z<C?0:S[X-C],Ee=(O-1)*T+ie*C+Z%C,Pe=O&&S[Ee];S[X++]=(te+Math.floor((J+Pe)/2))%256}break}case 4:{for(var Z=0;Z<T;Z++){var te=x[V++],ie=(Z-Z%C)/C,J=Z<C?0:S[X-C],Pe=void 0,de=void 0;if(O===0)Pe=de=0;else{var Te=(O-1)*T+ie*C+Z%C,ve=(O-1)*T+(ie-1)*C+Z%C;Pe=S[Te],de=ie&&S[ve]}var _e=J+Pe-de,ot=Math.abs(_e-J),it=Math.abs(_e-Pe),It=Math.abs(_e-de),Xe=void 0;ot<=it&&ot<=It?Xe=J:it<=It?Xe=Pe:Xe=de,S[X++]=(te+Xe)%256}break}default:throw new Error("Invalid filter algorithm: "+x[V-1])}O++}return S},this.read=function(x){for(var C=[],T=0;T<x;T++)C[T]=t.data[t.pos++];return C},this.readUInt32=function(){var x=t.data[t.pos++]<<24,C=t.data[t.pos++]<<16,T=t.data[t.pos++]<<8,S=t.data[t.pos++];return x|C|T|S},this.decodePalette=function(){for(var x=t.palette,C=t.transparency.indexed||[],T=new Uint8Array(C.length+x.length),S=0,M=0,O=0;O<x.length;O++){T[S++]=x[O],T[S++]=x[O+1],T[S++]=x[O+2];var V=C[M++];T[S++]=V!==void 0?V:255}return T},this.data=e,this.pos=8,this.palette=[];var o=[];for(this.transparency={},this.text={};;){for(var l=this.readUInt32(),u="",m=0;m<4;m++)u+=String.fromCharCode(this.data[this.pos++]);switch(u){case"IHDR":{this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break}case"PLTE":{this.palette=this.read(l);break}case"IDAT":{for(var m=0;m<l;m++)o.push(this.data[this.pos++]);break}case"tRNS":{switch(this.transparency={},this.colorType){case 3:{this.transparency.indexed=this.read(l);var r=255-this.transparency.indexed.length;if(r>0)for(var m=0;m<255;m++)this.transparency.indexed.push(255);break}case 0:{this.transparency.grayscale=this.read(l)[0];break}case 2:{this.transparency.rgb=this.read(l);break}}break}case"tEXt":{var f=this.read(l),_=f.indexOf(0),b=String.fromCharCode.apply(String,f.slice(0,_));this.text[b]=String.fromCharCode.apply(String,f.slice(_+1));break}case"IEND":{var v={0:1,3:1,4:1,2:3,6:3};this.colors=v[this.colorType],this.hasAlphaChannel=[4,6].includes(this.colorType);var w=this.colors+(this.hasAlphaChannel?1:0);this.pixelBitlength=this.bits*w,this.colorSpace={1:"DeviceGray",3:"DeviceRGB"}[this.colors],this.imgData=new Uint8Array(o);return}default:this.pos+=l}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}return i.load=function(e){return new i(e)},i}();const sg=";base64,",r7=i=>i.indexOf(sg)>-1,o7=i=>{const e=i.indexOf(sg)+sg.length,t=i.substring(e),o=window.atob(t),l=o.length,u=new Uint8Array(new ArrayBuffer(l));for(let m=0;m<l;m++)u[m]=o.charCodeAt(m);return u};async function s7(){const i=["data:image/webp;base64,UklGRjIAAABXRUJQVlA4ICYAAACyAgCdASoCAAEALmk0mk0iIiIiIgBoSygABc6zbAAA/v56QAAAAA==","data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA="],e=o=>new Promise((l,u)=>{var m=document.createElement("img");m.onerror=r=>l(!1),m.onload=()=>l(!0),m.src=o});return(await Promise.all(i.map(e))).every(o=>!!o)}class a7 extends Error{}async function d3(i){return new Promise((e,t)=>{const o=new XMLHttpRequest;o.open("GET",i),o.responseType="arraybuffer";const l=()=>{t(new a7(`failed to load binary data, code "${o.status}" from "${i}"`))};o.onerror=l,o.onreadystatechange=()=>{o.readyState==4&&(o.status==200?e(new Uint8Array(o.response)):l())},o.send()})}function l7(){var i=typeof i<"u"?i:{},e=function(){function U(){}function $(yi,_i){return function(){yi.apply(_i,arguments)}}function ge(yi){if(!(this instanceof ge))throw new TypeError("Promises must be constructed via new");if(typeof yi!="function")throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],bi(yi,this)}function Oe(yi,_i){for(;yi._state===3;)yi=yi._value;if(yi._state===0){yi._deferreds.push(_i);return}yi._handled=!0,ge._immediateFn(function(){var ui=yi._state===1?_i.onFulfilled:_i.onRejected;if(ui===null){(yi._state===1?nt:Ct)(_i.promise,yi._value);return}var ji;try{ji=ui(yi._value)}catch(ln){Ct(_i.promise,ln);return}nt(_i.promise,ji)})}function nt(yi,_i){try{if(_i===yi)throw new TypeError("A promise cannot be resolved with itself.");if(_i&&(typeof _i=="object"||typeof _i=="function")){var ui=_i.then;if(_i instanceof ge){yi._state=3,yi._value=_i,zt(yi);return}else if(typeof ui=="function"){bi($(ui,_i),yi);return}}yi._state=1,yi._value=_i,zt(yi)}catch(ji){Ct(yi,ji)}}function Ct(yi,_i){yi._state=2,yi._value=_i,zt(yi)}function zt(yi){yi._state===2&&yi._deferreds.length===0&&ge._immediateFn(function(){yi._handled||ge._unhandledRejectionFn(yi._value)});for(var _i=0,ui=yi._deferreds.length;_i<ui;_i++)Oe(yi,yi._deferreds[_i]);yi._deferreds=null}function Rt(yi,_i,ui){this.onFulfilled=typeof yi=="function"?yi:null,this.onRejected=typeof _i=="function"?_i:null,this.promise=ui}function bi(yi,_i){var ui=!1;try{yi(function(ji){ui||(ui=!0,nt(_i,ji))},function(ji){ui||(ui=!0,Ct(_i,ji))})}catch(ji){if(ui)return;ui=!0,Ct(_i,ji)}}return ge.prototype.catch=function(yi){return this.then(null,yi)},ge.prototype.then=function(yi,_i){var ui=new this.constructor(U);return Oe(this,new Rt(yi,_i,ui)),ui},ge.all=function(yi){return new ge(function(_i,ui){if(!Array.isArray(yi))return ui(new TypeError("Promise.all accepts an array"));var ji=Array.prototype.slice.call(yi);if(ji.length===0)return _i([]);var ln=ji.length;function In(p,Di){try{if(Di&&(typeof Di=="object"||typeof Di=="function")){var c=Di.then;if(typeof c=="function"){c.call(Di,function(F){In(p,F)},ui);return}}ji[p]=Di,--ln===0&&_i(ji)}catch(F){ui(F)}}for(var ft=0;ft<ji.length;ft++)In(ft,ji[ft])})},ge.resolve=function(yi){return yi&&typeof yi=="object"&&yi.constructor===ge?yi:new ge(function(_i){_i(yi)})},ge.reject=function(yi){return new ge(function(_i,ui){ui(yi)})},ge.race=function(yi){return new ge(function(_i,ui){if(!Array.isArray(yi))return ui(new TypeError("Promise.race accepts an array"));for(var ji=0,ln=yi.length;ji<ln;ji++)ge.resolve(yi[ji]).then(_i,ui)})},ge._immediateFn=typeof setImmediate=="function"&&function(yi){setImmediate(yi)}||function(yi){setTimeout(yi,0)},ge._unhandledRejectionFn=function(_i){typeof console<"u"&&console&&console.warn("Possible Unhandled Promise Rejection:",_i)},ge}(),t={},o;for(o in i)i.hasOwnProperty(o)&&(t[o]=i[o]);var l=!0,u="";function m(U){return i.locateFile?i.locateFile(U,u):u+U}var r,f,_;document.currentScript&&(u=document.currentScript.src),u.indexOf("blob:")!==0?u=u.substr(0,u.lastIndexOf("/")+1):u="",r=function($){try{var ge=new XMLHttpRequest;return ge.open("GET",$,!1),ge.send(null),ge.responseText}catch(nt){var Oe=Vs($);if(Oe)return Ro(Oe);throw nt}},f=function($,ge,Oe){var nt=new XMLHttpRequest;nt.open("GET",$,!0),nt.responseType="arraybuffer",nt.onload=function(){if(nt.status==200||nt.status==0&&nt.response){ge(nt.response);return}var zt=Vs($);if(zt){ge(zt.buffer);return}Oe()},nt.onerror=Oe,nt.send(null)};var b=i.print||console.log.bind(console),v=i.printErr||console.warn.bind(console);for(o in t)t.hasOwnProperty(o)&&(i[o]=t[o]);t=null,i.arguments&&i.arguments,i.thisProgram&&i.thisProgram,i.quit&&i.quit;var w=16;function x(U,$){return $||($=w),Math.ceil(U/$)*$}function C(U){C.shown||(C.shown={}),C.shown[U]||(C.shown[U]=1,v(U))}var T=0,S=function(U){T=U},M=function(){return T},O;i.wasmBinary&&(O=i.wasmBinary),i.noExitRuntime&&i.noExitRuntime;var V={Memory:function(U){this.buffer=new ArrayBuffer(U.initial*65536),this.grow=function($){var ge=ha($);return ge}},Table:function(U){var $=new Array(U.initial);return $.set=function(ge,Oe){$[ge]=Oe},$.get=function(ge){return $[ge]},$},Module:function(U){},Instance:function(U,$){this.exports=function(Oe,nt,Ct){function zt(ui,ji,ln){var In=ji.memory,ft=Ct,p=new ui.Int8Array(ln),Di=new ui.Int16Array(ln),c=new ui.Int32Array(ln),F=new ui.Uint8Array(ln),mn=new ui.Uint16Array(ln),$n=new ui.Uint32Array(ln);new ui.Float32Array(ln);var Ao=new ui.Float64Array(ln),re=ui.Math.imul;ui.Math.fround,ui.Math.abs;var Rr=ui.Math.clz32;ui.Math.min,ui.Math.max,ui.Math.floor,ui.Math.ceil,ui.Math.sqrt;var da=ji.abort;ui.NaN,ui.Infinity;var Na=ji.SDL_Init,Mc=ji.SDL_SetVideoMode,Al=ji.SDL_CreateRGBSurface,Hs=ji.SDL_LockSurface,sc=ji.SDL_UnlockSurface,hu=ji.SDL_UpperBlit,ah=ji.SDL_Flip,fu=ji.SDL_FreeSurface,lh=ji.fd_close,Ru=ji.fd_write,du=ji.emscripten_resize_heap,pu=ji.emscripten_memcpy_big,ql=ji.setTempRet0,mu=ji.fd_seek,Nn=5255072,Fn=0;function Bu(n,s){var a=0,g=0,k=0,E=0,L=0,R=0,G=0,H=0,ee=0,ce=0,Ae=0,Ne=0,Ze=0,mt=0,Tt=0,Ot=0,ni=0,ci=0,Mi=0,ki=0,Gi=0,sn=0,vn=0,or=0;g=c[s>>2],ce=c[s+4>>2],a=c[n+2264>>2],p[a+823|0]=129,p[a+807|0]=129,p[a+791|0]=129,p[a+775|0]=129,p[a+759|0]=129,p[a+743|0]=129,p[a+727|0]=129,p[a+711|0]=129,p[a+695|0]=129,p[a+679|0]=129,p[a+663|0]=129,p[a+647|0]=129,p[a+631|0]=129,p[a+615|0]=129,p[a+599|0]=129,p[a+583|0]=129,p[a+519|0]=129,p[a+487|0]=129,p[a+455|0]=129,p[a+423|0]=129,p[a+391|0]=129,p[a+359|0]=129,p[a+327|0]=129,p[a+295|0]=129,p[a+263|0]=129,p[a+231|0]=129,p[a+199|0]=129,p[a+167|0]=129,p[a+135|0]=129,p[a+103|0]=129,p[a+71|0]=129,p[a+39|0]=129;e:{if((ce|0)>=1){p[a+551|0]=129,p[a+567|0]=129,p[a+7|0]=129;break e}p[a+7|0]=2139062143,p[a+8|0]=8355711,p[a+9|0]=32639,p[a+10|0]=127,p[a+11|0]=2139062143,p[a+12|0]=8355711,p[a+13|0]=32639,p[a+14|0]=127,p[a+551|0]=2139062143,p[a+552|0]=8355711,p[a+553|0]=32639,p[a+554|0]=127,p[a+555|0]=2139062143,p[a+556|0]=8355711,p[a+557|0]=32639,p[a+558|0]=127,p[a+567|0]=2139062143,p[a+568|0]=8355711,p[a+569|0]=32639,p[a+570|0]=127,p[a+571|0]=2139062143,p[a+572|0]=8355711,p[a+573|0]=32639,p[a+574|0]=127,p[a+20|0]=2139062143,p[a+21|0]=8355711,p[a+22|0]=32639,p[a+23|0]=127,p[a+24|0]=2139062143,p[a+25|0]=8355711,p[a+26|0]=32639,p[a+27|0]=127,p[a+15|0]=2139062143,p[a+16|0]=8355711,p[a+17|0]=32639,p[a+18|0]=127,p[a+19|0]=2139062143,p[a+20|0]=8355711,p[a+21|0]=32639,p[a+22|0]=127,p[a+559|0]=127,p[a+575|0]=127}if(c[n+288>>2]>=1)for(Ne=a+600|0,Ze=a+584|0,Ae=a+40|0,Tt=ce?5:6,ni=g<<3,ci=g<<4,Mi=a+520|0,ki=a+8|0,mt=a+24|0,Ot=!ce<<2,Gi=(ce|0)<1;;){L=c[s+16>>2],ee&&(g=F[a+20|0]|F[a+21|0]<<8|(F[a+22|0]<<16|F[a+23|0]<<24),p[a+4|0]=g,p[a+5|0]=g>>>8,p[a+6|0]=g>>>16,p[a+7|0]=g>>>24,g=F[a+52|0]|F[a+53|0]<<8|(F[a+54|0]<<16|F[a+55|0]<<24),p[a+36|0]=g,p[a+37|0]=g>>>8,p[a+38|0]=g>>>16,p[a+39|0]=g>>>24,g=F[a+84|0]|F[a+85|0]<<8|(F[a+86|0]<<16|F[a+87|0]<<24),p[a+68|0]=g,p[a+69|0]=g>>>8,p[a+70|0]=g>>>16,p[a+71|0]=g>>>24,g=F[a+116|0]|F[a+117|0]<<8|(F[a+118|0]<<16|F[a+119|0]<<24),p[a+100|0]=g,p[a+101|0]=g>>>8,p[a+102|0]=g>>>16,p[a+103|0]=g>>>24,g=F[a+148|0]|F[a+149|0]<<8|(F[a+150|0]<<16|F[a+151|0]<<24),p[a+132|0]=g,p[a+133|0]=g>>>8,p[a+134|0]=g>>>16,p[a+135|0]=g>>>24,g=F[a+180|0]|F[a+181|0]<<8|(F[a+182|0]<<16|F[a+183|0]<<24),p[a+164|0]=g,p[a+165|0]=g>>>8,p[a+166|0]=g>>>16,p[a+167|0]=g>>>24,g=F[a+212|0]|F[a+213|0]<<8|(F[a+214|0]<<16|F[a+215|0]<<24),p[a+196|0]=g,p[a+197|0]=g>>>8,p[a+198|0]=g>>>16,p[a+199|0]=g>>>24,g=F[a+244|0]|F[a+245|0]<<8|(F[a+246|0]<<16|F[a+247|0]<<24),p[a+228|0]=g,p[a+229|0]=g>>>8,p[a+230|0]=g>>>16,p[a+231|0]=g>>>24,g=F[a+276|0]|F[a+277|0]<<8|(F[a+278|0]<<16|F[a+279|0]<<24),p[a+260|0]=g,p[a+261|0]=g>>>8,p[a+262|0]=g>>>16,p[a+263|0]=g>>>24,g=F[a+308|0]|F[a+309|0]<<8|(F[a+310|0]<<16|F[a+311|0]<<24),p[a+292|0]=g,p[a+293|0]=g>>>8,p[a+294|0]=g>>>16,p[a+295|0]=g>>>24,g=F[a+340|0]|F[a+341|0]<<8|(F[a+342|0]<<16|F[a+343|0]<<24),p[a+324|0]=g,p[a+325|0]=g>>>8,p[a+326|0]=g>>>16,p[a+327|0]=g>>>24,g=F[a+372|0]|F[a+373|0]<<8|(F[a+374|0]<<16|F[a+375|0]<<24),p[a+356|0]=g,p[a+357|0]=g>>>8,p[a+358|0]=g>>>16,p[a+359|0]=g>>>24,g=F[a+404|0]|F[a+405|0]<<8|(F[a+406|0]<<16|F[a+407|0]<<24),p[a+388|0]=g,p[a+389|0]=g>>>8,p[a+390|0]=g>>>16,p[a+391|0]=g>>>24,g=F[a+436|0]|F[a+437|0]<<8|(F[a+438|0]<<16|F[a+439|0]<<24),p[a+420|0]=g,p[a+421|0]=g>>>8,p[a+422|0]=g>>>16,p[a+423|0]=g>>>24,g=F[a+468|0]|F[a+469|0]<<8|(F[a+470|0]<<16|F[a+471|0]<<24),p[a+452|0]=g,p[a+453|0]=g>>>8,p[a+454|0]=g>>>16,p[a+455|0]=g>>>24,g=F[a+500|0]|F[a+501|0]<<8|(F[a+502|0]<<16|F[a+503|0]<<24),p[a+484|0]=g,p[a+485|0]=g>>>8,p[a+486|0]=g>>>16,p[a+487|0]=g>>>24,g=F[a+532|0]|F[a+533|0]<<8|(F[a+534|0]<<16|F[a+535|0]<<24),p[a+516|0]=g,p[a+517|0]=g>>>8,p[a+518|0]=g>>>16,p[a+519|0]=g>>>24,g=F[a+556|0]|F[a+557|0]<<8|(F[a+558|0]<<16|F[a+559|0]<<24),p[a+548|0]=g,p[a+549|0]=g>>>8,p[a+550|0]=g>>>16,p[a+551|0]=g>>>24,g=F[a+572|0]|F[a+573|0]<<8|(F[a+574|0]<<16|F[a+575|0]<<24),p[a+564|0]=g,p[a+565|0]=g>>>8,p[a+566|0]=g>>>16,p[a+567|0]=g>>>24,g=F[a+588|0]|F[a+589|0]<<8|(F[a+590|0]<<16|F[a+591|0]<<24),p[a+580|0]=g,p[a+581|0]=g>>>8,p[a+582|0]=g>>>16,p[a+583|0]=g>>>24,g=F[a+604|0]|F[a+605|0]<<8|(F[a+606|0]<<16|F[a+607|0]<<24),p[a+596|0]=g,p[a+597|0]=g>>>8,p[a+598|0]=g>>>16,p[a+599|0]=g>>>24,g=F[a+620|0]|F[a+621|0]<<8|(F[a+622|0]<<16|F[a+623|0]<<24),p[a+612|0]=g,p[a+613|0]=g>>>8,p[a+614|0]=g>>>16,p[a+615|0]=g>>>24,g=F[a+636|0]|F[a+637|0]<<8|(F[a+638|0]<<16|F[a+639|0]<<24),p[a+628|0]=g,p[a+629|0]=g>>>8,p[a+630|0]=g>>>16,p[a+631|0]=g>>>24,g=F[a+652|0]|F[a+653|0]<<8|(F[a+654|0]<<16|F[a+655|0]<<24),p[a+644|0]=g,p[a+645|0]=g>>>8,p[a+646|0]=g>>>16,p[a+647|0]=g>>>24,g=F[a+668|0]|F[a+669|0]<<8|(F[a+670|0]<<16|F[a+671|0]<<24),p[a+660|0]=g,p[a+661|0]=g>>>8,p[a+662|0]=g>>>16,p[a+663|0]=g>>>24,g=F[a+684|0]|F[a+685|0]<<8|(F[a+686|0]<<16|F[a+687|0]<<24),p[a+676|0]=g,p[a+677|0]=g>>>8,p[a+678|0]=g>>>16,p[a+679|0]=g>>>24,g=F[a+700|0]|F[a+701|0]<<8|(F[a+702|0]<<16|F[a+703|0]<<24),p[a+692|0]=g,p[a+693|0]=g>>>8,p[a+694|0]=g>>>16,p[a+695|0]=g>>>24,g=F[a+716|0]|F[a+717|0]<<8|(F[a+718|0]<<16|F[a+719|0]<<24),p[a+708|0]=g,p[a+709|0]=g>>>8,p[a+710|0]=g>>>16,p[a+711|0]=g>>>24,g=F[a+732|0]|F[a+733|0]<<8|(F[a+734|0]<<16|F[a+735|0]<<24),p[a+724|0]=g,p[a+725|0]=g>>>8,p[a+726|0]=g>>>16,p[a+727|0]=g>>>24,g=F[a+748|0]|F[a+749|0]<<8|(F[a+750|0]<<16|F[a+751|0]<<24),p[a+740|0]=g,p[a+741|0]=g>>>8,p[a+742|0]=g>>>16,p[a+743|0]=g>>>24,g=F[a+764|0]|F[a+765|0]<<8|(F[a+766|0]<<16|F[a+767|0]<<24),p[a+756|0]=g,p[a+757|0]=g>>>8,p[a+758|0]=g>>>16,p[a+759|0]=g>>>24,g=F[a+780|0]|F[a+781|0]<<8|(F[a+782|0]<<16|F[a+783|0]<<24),p[a+772|0]=g,p[a+773|0]=g>>>8,p[a+774|0]=g>>>16,p[a+775|0]=g>>>24,g=F[a+796|0]|F[a+797|0]<<8|(F[a+798|0]<<16|F[a+799|0]<<24),p[a+788|0]=g,p[a+789|0]=g>>>8,p[a+790|0]=g>>>16,p[a+791|0]=g>>>24,g=F[a+812|0]|F[a+813|0]<<8|(F[a+814|0]<<16|F[a+815|0]<<24),p[a+804|0]=g,p[a+805|0]=g>>>8,p[a+806|0]=g>>>16,p[a+807|0]=g>>>24,g=F[a+828|0]|F[a+829|0]<<8|(F[a+830|0]<<16|F[a+831|0]<<24),p[a+820|0]=g,p[a+821|0]=g>>>8,p[a+822|0]=g>>>16,p[a+823|0]=g>>>24),g=c[n+2252>>2]+(ee<<5)|0,E=L+re(ee,800)|0,R=c[E+788>>2];e:{t:{i:{n:{if(!Gi){if(G=F[g+4|0]|F[g+5|0]<<8|(F[g+6|0]<<16|F[g+7|0]<<24),k=ki,H=F[g|0]|F[g+1|0]<<8|(F[g+2|0]<<16|F[g+3|0]<<24),p[k|0]=H,p[k+1|0]=H>>>8,p[k+2|0]=H>>>16,p[k+3|0]=H>>>24,p[k+4|0]=G,p[k+5|0]=G>>>8,p[k+6|0]=G>>>16,p[k+7|0]=G>>>24,G=F[g+12|0]|F[g+13|0]<<8|(F[g+14|0]<<16|F[g+15|0]<<24),H=F[g+8|0]|F[g+9|0]<<8|(F[g+10|0]<<16|F[g+11|0]<<24),p[k+8|0]=H,p[k+9|0]=H>>>8,p[k+10|0]=H>>>16,p[k+11|0]=H>>>24,p[k+12|0]=G,p[k+13|0]=G>>>8,p[k+14|0]=G>>>16,p[k+15|0]=G>>>24,k=F[g+20|0]|F[g+21|0]<<8|(F[g+22|0]<<16|F[g+23|0]<<24),G=F[g+16|0]|F[g+17|0]<<8|(F[g+18|0]<<16|F[g+19|0]<<24),p[a+552|0]=G,p[a+553|0]=G>>>8,p[a+554|0]=G>>>16,p[a+555|0]=G>>>24,p[a+556|0]=k,p[a+557|0]=k>>>8,p[a+558|0]=k>>>16,p[a+559|0]=k>>>24,k=F[g+28|0]|F[g+29|0]<<8|(F[g+30|0]<<16|F[g+31|0]<<24),L=F[g+24|0]|F[g+25|0]<<8|(F[g+26|0]<<16|F[g+27|0]<<24),p[a+568|0]=L,p[a+569|0]=L>>>8,p[a+570|0]=L>>>16,p[a+571|0]=L>>>24,p[a+572|0]=k,p[a+573|0]=k>>>8,p[a+574|0]=k>>>16,p[a+575|0]=k>>>24,F[E+768|0])break n;break t}if(!F[E+768|0])break t;L=c[mt>>2];break i}if((ee|0)>=(c[n+288>>2]+-1|0)){L=F[g+15|0],c[mt>>2]=re(L,16843009),L=L|L<<8,L=L<<16|L;break i}L=F[g+32|0]|F[g+33|0]<<8|(F[g+34|0]<<16|F[g+35|0]<<24),c[mt>>2]=L}for(c[a+280>>2]=L,c[a+408>>2]=L,c[a+152>>2]=L,L=0;;){k=mn[(L<<1)+4880>>1]+Ae|0,ft[c[(F[(E+L|0)+769|0]<<2)+10736>>2]](k),G=E+(L<<5)|0;i:{n:switch((R>>>30|0)+-1|0){case 2:ft[c[2703]](G,k,0);break i;case 1:ft[c[2704]](G,k);break i;case 0:break n;default:break i}ft[c[2706]](G,k)}if(R=R<<2,L=L+1|0,(L|0)==16)break}H=ee?Ot:Tt;break e}if(L=F[E+769|0],H=ee?Ot:Tt,ft[c[((L||H)<<2)+10704>>2]](Ae),L=0,!R)break e;for(;;){k=E+(L<<5)|0,G=mn[(L<<1)+4880>>1]+Ae|0;t:{i:switch((R>>>30|0)+-1|0){case 2:ft[c[2703]](k,G,0);break t;case 1:ft[c[2704]](k,G);break t;case 0:break i;default:break t}ft[c[2706]](k,G)}if(R=R<<2,L=L+1|0,(L|0)==16)break}}L=c[E+792>>2],k=F[E+785|0],k=((k||H)<<2)+10784|0,ft[c[k>>2]](Ze),ft[c[k>>2]](Ne);e:{if(!(L&255))break e;if(k=E+512|0,L&170){ft[c[2705]](k,Ze);break e}ft[c[2707]](k,Ze)}e:{if(!(L&65280))break e;if(k=E+640|0,L&43520){ft[c[2705]](k,Ne);break e}ft[c[2707]](k,Ne)}for((ce|0)<(c[n+292>>2]+-1|0)&&(L=Mi,k=F[L+4|0]|F[L+5|0]<<8|(F[L+6|0]<<16|F[L+7|0]<<24),E=F[L|0]|F[L+1|0]<<8|(F[L+2|0]<<16|F[L+3|0]<<24),p[g|0]=E,p[g+1|0]=E>>>8,p[g+2|0]=E>>>16,p[g+3|0]=E>>>24,p[g+4|0]=k,p[g+5|0]=k>>>8,p[g+6|0]=k>>>16,p[g+7|0]=k>>>24,k=F[L+12|0]|F[L+13|0]<<8|(F[L+14|0]<<16|F[L+15|0]<<24),L=F[L+8|0]|F[L+9|0]<<8|(F[L+10|0]<<16|F[L+11|0]<<24),p[g+8|0]=L,p[g+9|0]=L>>>8,p[g+10|0]=L>>>16,p[g+11|0]=L>>>24,p[g+12|0]=k,p[g+13|0]=k>>>8,p[g+14|0]=k>>>16,p[g+15|0]=k>>>24,L=F[a+812|0]|F[a+813|0]<<8|(F[a+814|0]<<16|F[a+815|0]<<24),k=F[a+808|0]|F[a+809|0]<<8|(F[a+810|0]<<16|F[a+811|0]<<24),p[g+16|0]=k,p[g+17|0]=k>>>8,p[g+18|0]=k>>>16,p[g+19|0]=k>>>24,p[g+20|0]=L,p[g+21|0]=L>>>8,p[g+22|0]=L>>>16,p[g+23|0]=L>>>24,L=F[a+828|0]|F[a+829|0]<<8|(F[a+830|0]<<16|F[a+831|0]<<24),k=F[a+824|0]|F[a+825|0]<<8|(F[a+826|0]<<16|F[a+827|0]<<24),p[g+24|0]=k,p[g+25|0]=k>>>8,p[g+26|0]=k>>>16,p[g+27|0]=k>>>24,p[g+28|0]=L,p[g+29|0]=L>>>8,p[g+30|0]=L>>>16,p[g+31|0]=L>>>24),sn=c[n+2284>>2],G=c[n+2272>>2],H=c[n+2276>>2],g=Ae,E=F[g+4|0]|F[g+5|0]<<8|(F[g+6|0]<<16|F[g+7|0]<<24),k=(c[n+2268>>2]+(ee<<4)|0)+re(c[n+2280>>2],ci)|0,R=F[g|0]|F[g+1|0]<<8|(F[g+2|0]<<16|F[g+3|0]<<24),p[k|0]=R,p[k+1|0]=R>>>8,p[k+2|0]=R>>>16,p[k+3|0]=R>>>24,p[k+4|0]=E,p[k+5|0]=E>>>8,p[k+6|0]=E>>>16,p[k+7|0]=E>>>24,E=F[g+12|0]|F[g+13|0]<<8|(F[g+14|0]<<16|F[g+15|0]<<24),g=F[g+8|0]|F[g+9|0]<<8|(F[g+10|0]<<16|F[g+11|0]<<24),p[k+8|0]=g,p[k+9|0]=g>>>8,p[k+10|0]=g>>>16,p[k+11|0]=g>>>24,p[k+12|0]=E,p[k+13|0]=E>>>8,p[k+14|0]=E>>>16,p[k+15|0]=E>>>24,g=ee<<3,vn=g+H|0,or=g+G|0,L=1;E=(L<<5)+Ae|0,G=F[E+4|0]|F[E+5|0]<<8|(F[E+6|0]<<16|F[E+7|0]<<24),g=k+re(c[n+2280>>2],L)|0,H=F[E|0]|F[E+1|0]<<8|(F[E+2|0]<<16|F[E+3|0]<<24),p[g|0]=H,p[g+1|0]=H>>>8,p[g+2|0]=H>>>16,p[g+3|0]=H>>>24,p[g+4|0]=G,p[g+5|0]=G>>>8,p[g+6|0]=G>>>16,p[g+7|0]=G>>>24,R=F[E+12|0]|F[E+13|0]<<8|(F[E+14|0]<<16|F[E+15|0]<<24),E=F[E+8|0]|F[E+9|0]<<8|(F[E+10|0]<<16|F[E+11|0]<<24),p[g+8|0]=E,p[g+9|0]=E>>>8,p[g+10|0]=E>>>16,p[g+11|0]=E>>>24,p[g+12|0]=R,p[g+13|0]=R>>>8,p[g+14|0]=R>>>16,p[g+15|0]=R>>>24,L=L+1|0,(L|0)!=16;);if(k=F[a+588|0]|F[a+589|0]<<8|(F[a+590|0]<<16|F[a+591|0]<<24),R=re(ni,sn),g=R+or|0,E=F[a+584|0]|F[a+585|0]<<8|(F[a+586|0]<<16|F[a+587|0]<<24),p[g|0]=E,p[g+1|0]=E>>>8,p[g+2|0]=E>>>16,p[g+3|0]=E>>>24,p[g+4|0]=k,p[g+5|0]=k>>>8,p[g+6|0]=k>>>16,p[g+7|0]=k>>>24,L=R+vn|0,k=L,E=F[a+604|0]|F[a+605|0]<<8|(F[a+606|0]<<16|F[a+607|0]<<24),R=F[a+600|0]|F[a+601|0]<<8|(F[a+602|0]<<16|F[a+603|0]<<24),p[k|0]=R,p[k+1|0]=R>>>8,p[k+2|0]=R>>>16,p[k+3|0]=R>>>24,p[k+4|0]=E,p[k+5|0]=E>>>8,p[k+6|0]=E>>>16,p[k+7|0]=E>>>24,E=F[a+620|0]|F[a+621|0]<<8|(F[a+622|0]<<16|F[a+623|0]<<24),k=g+c[n+2284>>2]|0,R=F[a+616|0]|F[a+617|0]<<8|(F[a+618|0]<<16|F[a+619|0]<<24),p[k|0]=R,p[k+1|0]=R>>>8,p[k+2|0]=R>>>16,p[k+3|0]=R>>>24,p[k+4|0]=E,p[k+5|0]=E>>>8,p[k+6|0]=E>>>16,p[k+7|0]=E>>>24,E=F[a+636|0]|F[a+637|0]<<8|(F[a+638|0]<<16|F[a+639|0]<<24),k=L+c[n+2284>>2]|0,R=F[a+632|0]|F[a+633|0]<<8|(F[a+634|0]<<16|F[a+635|0]<<24),p[k|0]=R,p[k+1|0]=R>>>8,p[k+2|0]=R>>>16,p[k+3|0]=R>>>24,p[k+4|0]=E,p[k+5|0]=E>>>8,p[k+6|0]=E>>>16,p[k+7|0]=E>>>24,E=F[a+652|0]|F[a+653|0]<<8|(F[a+654|0]<<16|F[a+655|0]<<24),k=g+(c[n+2284>>2]<<1)|0,R=F[a+648|0]|F[a+649|0]<<8|(F[a+650|0]<<16|F[a+651|0]<<24),p[k|0]=R,p[k+1|0]=R>>>8,p[k+2|0]=R>>>16,p[k+3|0]=R>>>24,p[k+4|0]=E,p[k+5|0]=E>>>8,p[k+6|0]=E>>>16,p[k+7|0]=E>>>24,E=F[a+668|0]|F[a+669|0]<<8|(F[a+670|0]<<16|F[a+671|0]<<24),k=L+(c[n+2284>>2]<<1)|0,R=F[a+664|0]|F[a+665|0]<<8|(F[a+666|0]<<16|F[a+667|0]<<24),p[k|0]=R,p[k+1|0]=R>>>8,p[k+2|0]=R>>>16,p[k+3|0]=R>>>24,p[k+4|0]=E,p[k+5|0]=E>>>8,p[k+6|0]=E>>>16,p[k+7|0]=E>>>24,E=F[a+684|0]|F[a+685|0]<<8|(F[a+686|0]<<16|F[a+687|0]<<24),k=g+re(c[n+2284>>2],3)|0,R=F[a+680|0]|F[a+681|0]<<8|(F[a+682|0]<<16|F[a+683|0]<<24),p[k|0]=R,p[k+1|0]=R>>>8,p[k+2|0]=R>>>16,p[k+3|0]=R>>>24,p[k+4|0]=E,p[k+5|0]=E>>>8,p[k+6|0]=E>>>16,p[k+7|0]=E>>>24,E=F[a+700|0]|F[a+701|0]<<8|(F[a+702|0]<<16|F[a+703|0]<<24),k=L+re(c[n+2284>>2],3)|0,R=F[a+696|0]|F[a+697|0]<<8|(F[a+698|0]<<16|F[a+699|0]<<24),p[k|0]=R,p[k+1|0]=R>>>8,p[k+2|0]=R>>>16,p[k+3|0]=R>>>24,p[k+4|0]=E,p[k+5|0]=E>>>8,p[k+6|0]=E>>>16,p[k+7|0]=E>>>24,E=F[a+716|0]|F[a+717|0]<<8|(F[a+718|0]<<16|F[a+719|0]<<24),k=g+(c[n+2284>>2]<<2)|0,R=F[a+712|0]|F[a+713|0]<<8|(F[a+714|0]<<16|F[a+715|0]<<24),p[k|0]=R,p[k+1|0]=R>>>8,p[k+2|0]=R>>>16,p[k+3|0]=R>>>24,p[k+4|0]=E,p[k+5|0]=E>>>8,p[k+6|0]=E>>>16,p[k+7|0]=E>>>24,E=F[a+732|0]|F[a+733|0]<<8|(F[a+734|0]<<16|F[a+735|0]<<24),k=L+(c[n+2284>>2]<<2)|0,R=F[a+728|0]|F[a+729|0]<<8|(F[a+730|0]<<16|F[a+731|0]<<24),p[k|0]=R,p[k+1|0]=R>>>8,p[k+2|0]=R>>>16,p[k+3|0]=R>>>24,p[k+4|0]=E,p[k+5|0]=E>>>8,p[k+6|0]=E>>>16,p[k+7|0]=E>>>24,E=F[a+748|0]|F[a+749|0]<<8|(F[a+750|0]<<16|F[a+751|0]<<24),k=g+re(c[n+2284>>2],5)|0,R=F[a+744|0]|F[a+745|0]<<8|(F[a+746|0]<<16|F[a+747|0]<<24),p[k|0]=R,p[k+1|0]=R>>>8,p[k+2|0]=R>>>16,p[k+3|0]=R>>>24,p[k+4|0]=E,p[k+5|0]=E>>>8,p[k+6|0]=E>>>16,p[k+7|0]=E>>>24,E=F[a+764|0]|F[a+765|0]<<8|(F[a+766|0]<<16|F[a+767|0]<<24),k=L+re(c[n+2284>>2],5)|0,R=F[a+760|0]|F[a+761|0]<<8|(F[a+762|0]<<16|F[a+763|0]<<24),p[k|0]=R,p[k+1|0]=R>>>8,p[k+2|0]=R>>>16,p[k+3|0]=R>>>24,p[k+4|0]=E,p[k+5|0]=E>>>8,p[k+6|0]=E>>>16,p[k+7|0]=E>>>24,E=F[a+780|0]|F[a+781|0]<<8|(F[a+782|0]<<16|F[a+783|0]<<24),k=g+re(c[n+2284>>2],6)|0,R=F[a+776|0]|F[a+777|0]<<8|(F[a+778|0]<<16|F[a+779|0]<<24),p[k|0]=R,p[k+1|0]=R>>>8,p[k+2|0]=R>>>16,p[k+3|0]=R>>>24,p[k+4|0]=E,p[k+5|0]=E>>>8,p[k+6|0]=E>>>16,p[k+7|0]=E>>>24,E=F[a+796|0]|F[a+797|0]<<8|(F[a+798|0]<<16|F[a+799|0]<<24),k=L+re(c[n+2284>>2],6)|0,R=F[a+792|0]|F[a+793|0]<<8|(F[a+794|0]<<16|F[a+795|0]<<24),p[k|0]=R,p[k+1|0]=R>>>8,p[k+2|0]=R>>>16,p[k+3|0]=R>>>24,p[k+4|0]=E,p[k+5|0]=E>>>8,p[k+6|0]=E>>>16,p[k+7|0]=E>>>24,k=F[a+812|0]|F[a+813|0]<<8|(F[a+814|0]<<16|F[a+815|0]<<24),g=g+re(c[n+2284>>2],7)|0,E=F[a+808|0]|F[a+809|0]<<8|(F[a+810|0]<<16|F[a+811|0]<<24),p[g|0]=E,p[g+1|0]=E>>>8,p[g+2|0]=E>>>16,p[g+3|0]=E>>>24,p[g+4|0]=k,p[g+5|0]=k>>>8,p[g+6|0]=k>>>16,p[g+7|0]=k>>>24,g=L+re(c[n+2284>>2],7)|0,L=F[a+828|0]|F[a+829|0]<<8|(F[a+830|0]<<16|F[a+831|0]<<24),k=F[a+824|0]|F[a+825|0]<<8|(F[a+826|0]<<16|F[a+827|0]<<24),p[g|0]=k,p[g+1|0]=k>>>8,p[g+2|0]=k>>>16,p[g+3|0]=k>>>24,p[g+4|0]=L,p[g+5|0]=L>>>8,p[g+6|0]=L>>>16,p[g+7|0]=L>>>24,ee=ee+1|0,!((ee|0)<c[n+288>>2]))break}}function ja(n){n=n|0;var s=0,a=0,g=0,k=0,E=0,L=0,R=0,G=0,H=0,ee=0,ce=0,Ae=0,Ne=0,Ze=0;Ae=Nn-16|0,Nn=Ae;e:{t:{i:{n:{o:{l:{r:{u:{s:{a:{f:{c:{if(n>>>0<=244){if(L=c[2884],R=n>>>0<11?16:n+11&-8,s=R>>>3|0,n=L>>>s|0,n&3){g=s+((n^-1)&1)|0,s=g<<3,k=c[s+11584>>2],n=k+8|0,a=c[k+8>>2],s=s+11576|0;h:{if((a|0)==(s|0)){Ne=11536,Ze=ba(-2,g)&L,c[Ne>>2]=Ze;break h}c[a+12>>2]=s,c[s+8>>2]=a}s=g<<3,c[k+4>>2]=s|3,s=s+k|0,c[s+4>>2]=c[s+4>>2]|1;break e}if(ce=c[2886],R>>>0<=ce>>>0)break c;if(n){a=n<<s,n=2<<s,n=a&(0-n|n),s=(0-n&n)+-1|0,n=s>>>12&16,a=n,s=s>>>n|0,n=s>>>5&8,a=a|n,s=s>>>n|0,n=s>>>2&4,a=a|n,s=s>>>n|0,n=s>>>1&2,a=a|n,s=s>>>n|0,n=s>>>1&1,a=(a|n)+(s>>>n|0)|0,n=a<<3,E=c[n+11584>>2],s=c[E+8>>2],n=n+11576|0;h:{if((s|0)==(n|0)){L=ba(-2,a)&L,c[2884]=L;break h}c[s+12>>2]=n,c[n+8>>2]=s}if(n=E+8|0,c[E+4>>2]=R|3,g=E+R|0,s=a<<3,k=s-R|0,c[g+4>>2]=k|1,c[s+E>>2]=k,ce){s=ce>>>3|0,a=(s<<3)+11576|0,R=c[2889],s=1<<s;h:{if(!(s&L)){c[2884]=s|L,s=a;break h}s=c[a+8>>2]}c[a+8>>2]=R,c[s+12>>2]=R,c[R+12>>2]=a,c[R+8>>2]=s}c[2889]=g,c[2886]=k;break e}if(G=c[2885],!G)break c;for(s=(G&0-G)+-1|0,n=s>>>12&16,a=n,s=s>>>n|0,n=s>>>5&8,a=a|n,s=s>>>n|0,n=s>>>2&4,a=a|n,s=s>>>n|0,n=s>>>1&2,a=a|n,s=s>>>n|0,n=s>>>1&1,s=c[((a|n)+(s>>>n|0)<<2)+11840>>2],k=(c[s+4>>2]&-8)-R|0,a=s;;){h:{if(n=c[a+16>>2],!n&&(n=c[a+20>>2],!n))break h;a=(c[n+4>>2]&-8)-R|0,g=a>>>0<k>>>0,k=g?a:k,s=g?n:s,a=n;continue}break}if(H=s+R|0,H>>>0<=s>>>0)break f;if(ee=c[s+24>>2],g=c[s+12>>2],(g|0)!=(s|0)){n=c[s+8>>2],c[n+12>>2]=g,c[g+8>>2]=n;break t}if(a=s+20|0,n=c[a>>2],!n){if(n=c[s+16>>2],!n)break a;a=s+16|0}for(;E=a,g=n,a=n+20|0,n=c[a>>2],!(!n&&(a=g+16|0,n=c[g+16>>2],!n)););c[E>>2]=0;break t}if(R=-1,n>>>0>4294967231||(n=n+11|0,R=n&-8,G=c[2885],!G))break c;n=n>>>8|0,E=0;h:{if(!n||(E=31,R>>>0>16777215))break h;s=n+1048320>>>16&8,n=n<<s,k=n+520192>>>16&4,n=n<<k,a=n+245760>>>16&2,n=(n<<a>>>15|0)-(a|(s|k))|0,E=(n<<1|R>>>n+21&1)+28|0}k=0-R|0,a=c[(E<<2)+11840>>2];h:{d:{p:{if(!a){n=0;break p}for(n=0,s=R<<((E|0)==31?0:25-(E>>>1|0)|0);;){m:{if(L=(c[a+4>>2]&-8)-R|0,L>>>0>=k>>>0||(g=a,k=L,k))break m;k=0,n=a;break d}if(L=c[a+20>>2],a=c[((s>>>29&4)+a|0)+16>>2],n=L?(L|0)==(a|0)?n:L:n,s=s<<1,!a)break}}if(!(n|g)){if(n=2<<E,n=(0-n|n)&G,!n)break c;s=(n&0-n)+-1|0,n=s>>>12&16,a=n,s=s>>>n|0,n=s>>>5&8,a=a|n,s=s>>>n|0,n=s>>>2&4,a=a|n,s=s>>>n|0,n=s>>>1&2,a=a|n,s=s>>>n|0,n=s>>>1&1,n=c[((a|n)+(s>>>n|0)<<2)+11840>>2]}if(!n)break h}for(;s=(c[n+4>>2]&-8)-R|0,a=s>>>0<k>>>0,k=a?s:k,g=a?n:g,s=c[n+16>>2],s?n=s:n=c[n+20>>2],!!n;);}if(!g|k>>>0>=c[2886]-R>>>0)break c;if(E=g+R|0,E>>>0<=g>>>0)break f;if(H=c[g+24>>2],s=c[g+12>>2],(g|0)!=(s|0)){n=c[g+8>>2],c[n+12>>2]=s,c[s+8>>2]=n;break i}if(a=g+20|0,n=c[a>>2],!n){if(n=c[g+16>>2],!n)break s;a=g+16|0}for(;L=a,s=n,a=n+20|0,n=c[a>>2],!(!n&&(a=s+16|0,n=c[s+16>>2],!n)););c[L>>2]=0;break i}if(a=c[2886],a>>>0>=R>>>0){g=c[2889],s=a-R|0;c:{if(s>>>0>=16){c[2886]=s,n=g+R|0,c[2889]=n,c[n+4>>2]=s|1,c[a+g>>2]=s,c[g+4>>2]=R|3;break c}c[2889]=0,c[2886]=0,c[g+4>>2]=a|3,n=a+g|0,c[n+4>>2]=c[n+4>>2]|1}n=g+8|0;break e}if(G=c[2887],G>>>0>R>>>0){s=G-R|0,c[2887]=s,a=c[2890],n=a+R|0,c[2890]=n,c[n+4>>2]=s|1,c[a+4>>2]=R|3,n=a+8|0;break e}if(n=0,H=R+47|0,s=H,c[3002]?a=c[3004]:(c[3005]=-1,c[3006]=-1,c[3003]=4096,c[3004]=4096,c[3002]=Ae+12&-16^1431655768,c[3007]=0,c[2995]=0,a=4096),E=s+a|0,L=0-a|0,a=E&L,a>>>0<=R>>>0||(k=c[2994],k&&(g=c[2992],s=g+a|0,s>>>0<=g>>>0|s>>>0>k>>>0)))break e;if(F[11980]&4)break l;c:{h:{if(g=c[2890],g)for(n=11984;;){if(s=c[n>>2],s+c[n+4>>2]>>>0>g>>>0&&s>>>0<=g>>>0)break h;if(n=c[n+8>>2],!n)break}if(s=Wa(0),(s|0)==-1||(L=a,g=c[3003],n=g+-1|0,n&s&&(L=(a-s|0)+(n+s&0-g)|0),L>>>0<=R>>>0|L>>>0>2147483646)||(k=c[2994],k&&(g=c[2992],n=g+L|0,n>>>0<=g>>>0|n>>>0>k>>>0)))break r;if(n=Wa(L),(s|0)!=(n|0))break c;break o}if(L=L&E-G,L>>>0>2147483646)break r;if(s=Wa(L),(s|0)==(c[n>>2]+c[n+4>>2]|0))break u;n=s}if(!((n|0)==-1|R+48>>>0<=L>>>0)){if(s=c[3004],s=s+(H-L|0)&0-s,s>>>0>2147483646){s=n;break o}if((Wa(s)|0)!=-1){L=s+L|0,s=n;break o}Wa(0-L|0);break r}if(s=n,(n|0)!=-1)break o;break r}da()}g=0;break t}s=0;break i}if((s|0)!=-1)break o}c[2995]=c[2995]|4}if(a>>>0>2147483646||(s=Wa(a),n=Wa(0),s>>>0>=n>>>0|(s|0)==-1|(n|0)==-1)||(L=n-s|0,L>>>0<=R+40>>>0))break n}n=c[2992]+L|0,c[2992]=n,n>>>0>$n[2993]&&(c[2993]=n);o:{l:{r:{if(k=c[2890],k){for(n=11984;;){if(g=c[n>>2],a=c[n+4>>2],(g+a|0)==(s|0))break r;if(n=c[n+8>>2],!n)break}break l}for(n=c[2888],s>>>0>=n>>>0&&n||(c[2888]=s),n=0,c[2997]=L,c[2996]=s,c[2892]=-1,c[2893]=c[3002],c[2999]=0;g=n<<3,a=g+11576|0,c[g+11584>>2]=a,c[g+11588>>2]=a,n=n+1|0,(n|0)!=32;);g=L+-40|0,n=s+8&7?-8-s&7:0,a=g-n|0,c[2887]=a,n=n+s|0,c[2890]=n,c[n+4>>2]=a|1,c[(s+g|0)+4>>2]=40,c[2891]=c[3006];break o}if(F[n+12|0]&8|s>>>0<=k>>>0|g>>>0>k>>>0)break l;c[n+4>>2]=a+L,n=k+8&7?-8-k&7:0,a=n+k|0,c[2890]=a,s=c[2887]+L|0,n=s-n|0,c[2887]=n,c[a+4>>2]=n|1,c[(s+k|0)+4>>2]=40,c[2891]=c[3006];break o}g=c[2888],s>>>0<g>>>0&&(c[2888]=s,g=0),a=s+L|0,n=11984;l:{r:{u:{s:{a:{f:{for(;;){if((a|0)!=c[n>>2]){if(n=c[n+8>>2],n)continue;break f}break}if(!(F[n+12|0]&8))break a}for(n=11984;;){if(a=c[n>>2],a>>>0<=k>>>0&&(E=a+c[n+4>>2]|0,E>>>0>k>>>0))break s;n=c[n+8>>2]}}if(c[n>>2]=s,c[n+4>>2]=c[n+4>>2]+L,G=(s+8&7?-8-s&7:0)+s|0,c[G+4>>2]=R|3,s=a+(a+8&7?-8-a&7:0)|0,n=(s-G|0)-R|0,E=R+G|0,(s|0)==(k|0)){c[2890]=E,n=c[2887]+n|0,c[2887]=n,c[E+4>>2]=n|1;break r}if(c[2889]==(s|0)){c[2889]=E,n=c[2886]+n|0,c[2886]=n,c[E+4>>2]=n|1,c[n+E>>2]=n;break r}if(a=c[s+4>>2],(a&3)==1){H=a&-8;a:{if(a>>>0<=255){if(k=c[s+8>>2],a=a>>>3|0,g=c[s+12>>2],(g|0)==(k|0)){Ne=11536,Ze=c[2884]&ba(-2,a),c[Ne>>2]=Ze;break a}c[k+12>>2]=g,c[g+8>>2]=k;break a}ee=c[s+24>>2],L=c[s+12>>2];f:{if((L|0)!=(s|0)){a=c[s+8>>2],c[a+12>>2]=L,c[L+8>>2]=a;break f}c:{if(k=s+20|0,R=c[k>>2],R||(k=s+16|0,R=c[k>>2],R))break c;L=0;break f}for(;a=k,L=R,k=L+20|0,R=c[k>>2],!(!R&&(k=L+16|0,R=c[L+16>>2],!R)););c[a>>2]=0}if(!ee)break a;g=c[s+28>>2],a=(g<<2)+11840|0;f:{if(c[a>>2]==(s|0)){if(c[a>>2]=L,L)break f;Ne=11540,Ze=c[2885]&ba(-2,g),c[Ne>>2]=Ze;break a}if(c[ee+(c[ee+16>>2]==(s|0)?16:20)>>2]=L,!L)break a}if(c[L+24>>2]=ee,a=c[s+16>>2],a&&(c[L+16>>2]=a,c[a+24>>2]=L),a=c[s+20>>2],!a)break a;c[L+20>>2]=a,c[a+24>>2]=L}s=s+H|0,n=n+H|0}if(c[s+4>>2]=c[s+4>>2]&-2,c[E+4>>2]=n|1,c[n+E>>2]=n,n>>>0<=255){n=n>>>3|0,s=(n<<3)+11576|0,a=c[2884],n=1<<n;a:{if(!(a&n)){c[2884]=n|a,n=s;break a}n=c[s+8>>2]}c[s+8>>2]=E,c[n+12>>2]=E,c[E+12>>2]=s,c[E+8>>2]=n;break r}s=E,g=n>>>8|0,a=0;a:{if(!g||(a=31,n>>>0>16777215))break a;a=g,g=g+1048320>>>16&8,a=a<<g,L=a+520192>>>16&4,a=a<<L,k=a+245760>>>16&2,a=(a<<k>>>15|0)-(k|(g|L))|0,a=(a<<1|n>>>a+21&1)+28|0}c[s+28>>2]=a,c[E+16>>2]=0,c[E+20>>2]=0,L=(a<<2)+11840|0,g=c[2885],s=1<<a;a:{if(!(g&s)){c[2885]=s|g,c[L>>2]=E,c[E+24>>2]=L;break a}for(k=n<<((a|0)==31?0:25-(a>>>1|0)|0),s=c[L>>2];;){if(a=s,(c[s+4>>2]&-8)==(n|0))break u;if(s=k>>>29|0,k=k<<1,g=(a+(s&4)|0)+16|0,s=c[g>>2],!s)break}c[g>>2]=E,c[E+24>>2]=a}c[E+12>>2]=E,c[E+8>>2]=E;break r}for(g=L+-40|0,n=s+8&7?-8-s&7:0,a=g-n|0,c[2887]=a,n=n+s|0,c[2890]=n,c[n+4>>2]=a|1,c[(s+g|0)+4>>2]=40,c[2891]=c[3006],n=(E+(E+-39&7?39-E&7:0)|0)+-47|0,a=n>>>0<k+16>>>0?k:n,c[a+4>>2]=27,n=c[2999],c[a+16>>2]=c[2998],c[a+20>>2]=n,n=c[2997],c[a+8>>2]=c[2996],c[a+12>>2]=n,c[2998]=a+8,c[2997]=L,c[2996]=s,c[2999]=0,n=a+24|0;c[n+4>>2]=7,s=n+8|0,n=n+4|0,E>>>0>s>>>0;);if((a|0)==(k|0))break o;if(c[a+4>>2]=c[a+4>>2]&-2,E=a-k|0,c[k+4>>2]=E|1,c[a>>2]=E,E>>>0<=255){n=E>>>3|0,s=(n<<3)+11576|0,a=c[2884],n=1<<n;s:{if(!(a&n)){c[2884]=n|a,n=s;break s}n=c[s+8>>2]}c[s+8>>2]=k,c[n+12>>2]=k,c[k+12>>2]=s,c[k+8>>2]=n;break o}c[k+16>>2]=0,c[k+20>>2]=0,n=k,a=E>>>8|0,s=0;s:{if(!a||(s=31,E>>>0>16777215))break s;s=a,a=a+1048320>>>16&8,s=s<<a,L=s+520192>>>16&4,s=s<<L,g=s+245760>>>16&2,s=(s<<g>>>15|0)-(g|(a|L))|0,s=(s<<1|E>>>s+21&1)+28|0}c[n+28>>2]=s,g=(s<<2)+11840|0,a=c[2885],n=1<<s;s:{if(!(a&n)){c[2885]=n|a,c[g>>2]=k,c[k+24>>2]=g;break s}for(n=E<<((s|0)==31?0:25-(s>>>1|0)|0),s=c[g>>2];;){if(a=s,(E|0)==(c[s+4>>2]&-8))break l;if(s=n>>>29|0,n=n<<1,g=(a+(s&4)|0)+16|0,s=c[g>>2],!s)break}c[g>>2]=k,c[k+24>>2]=a}c[k+12>>2]=k,c[k+8>>2]=k;break o}n=c[a+8>>2],c[n+12>>2]=E,c[a+8>>2]=E,c[E+24>>2]=0,c[E+12>>2]=a,c[E+8>>2]=n}n=G+8|0;break e}n=c[a+8>>2],c[n+12>>2]=k,c[a+8>>2]=k,c[k+24>>2]=0,c[k+12>>2]=a,c[k+8>>2]=n}if(n=c[2887],n>>>0<=R>>>0)break n;s=n-R|0,c[2887]=s,a=c[2890],n=a+R|0,c[2890]=n,c[n+4>>2]=s|1,c[a+4>>2]=R|3,n=a+8|0;break e}c[2865]=48,n=0;break e}i:{if(!H)break i;a=c[g+28>>2],n=(a<<2)+11840|0;n:{if(c[n>>2]==(g|0)){if(c[n>>2]=s,s)break n;G=ba(-2,a)&G,c[2885]=G;break i}if(c[H+(c[H+16>>2]==(g|0)?16:20)>>2]=s,!s)break i}if(c[s+24>>2]=H,n=c[g+16>>2],n&&(c[s+16>>2]=n,c[n+24>>2]=s),n=c[g+20>>2],!n)break i;c[s+20>>2]=n,c[n+24>>2]=s}i:{if(k>>>0<=15){n=k+R|0,c[g+4>>2]=n|3,n=n+g|0,c[n+4>>2]=c[n+4>>2]|1;break i}if(c[g+4>>2]=R|3,c[E+4>>2]=k|1,c[k+E>>2]=k,k>>>0<=255){n=k>>>3|0,s=(n<<3)+11576|0,a=c[2884],n=1<<n;n:{if(!(a&n)){c[2884]=n|a,n=s;break n}n=c[s+8>>2]}c[s+8>>2]=E,c[n+12>>2]=E,c[E+12>>2]=s,c[E+8>>2]=n;break i}n=E,a=k>>>8|0,s=0;n:{if(!a||(s=31,k>>>0>16777215))break n;s=a,a=a+1048320>>>16&8,s=s<<a,R=s+520192>>>16&4,s=s<<R,L=s+245760>>>16&2,s=(s<<L>>>15|0)-(L|(a|R))|0,s=(s<<1|k>>>s+21&1)+28|0}c[n+28>>2]=s,c[E+16>>2]=0,c[E+20>>2]=0,a=(s<<2)+11840|0;n:{n=1<<s;o:{if(!(n&G)){c[2885]=n|G,c[a>>2]=E,c[E+24>>2]=a;break o}for(n=k<<((s|0)==31?0:25-(s>>>1|0)|0),R=c[a>>2];;){if(s=R,(c[s+4>>2]&-8)==(k|0))break n;if(a=n>>>29|0,n=n<<1,a=(s+(a&4)|0)+16|0,R=c[a>>2],!R)break}c[a>>2]=E,c[E+24>>2]=s}c[E+12>>2]=E,c[E+8>>2]=E;break i}n=c[s+8>>2],c[n+12>>2]=E,c[s+8>>2]=E,c[E+24>>2]=0,c[E+12>>2]=s,c[E+8>>2]=n}n=g+8|0;break e}t:{if(!ee)break t;a=c[s+28>>2],n=(a<<2)+11840|0;i:{if(c[n>>2]==(s|0)){if(c[n>>2]=g,g)break i;Ne=11540,Ze=ba(-2,a)&G,c[Ne>>2]=Ze;break t}if(c[(c[ee+16>>2]==(s|0)?16:20)+ee>>2]=g,!g)break t}if(c[g+24>>2]=ee,n=c[s+16>>2],n&&(c[g+16>>2]=n,c[n+24>>2]=g),n=c[s+20>>2],!n)break t;c[g+20>>2]=n,c[n+24>>2]=g}t:{if(k>>>0<=15){n=k+R|0,c[s+4>>2]=n|3,n=n+s|0,c[n+4>>2]=c[n+4>>2]|1;break t}if(c[s+4>>2]=R|3,c[H+4>>2]=k|1,c[k+H>>2]=k,ce){n=ce>>>3|0,a=(n<<3)+11576|0,g=c[2889],n=1<<n;i:{if(!(n&L)){c[2884]=n|L,n=a;break i}n=c[a+8>>2]}c[a+8>>2]=g,c[n+12>>2]=g,c[g+12>>2]=a,c[g+8>>2]=n}c[2889]=H,c[2886]=k}n=s+8|0}return Nn=Ae+16|0,n|0}function pa(n,s){var a=0,g=0,k=0,E=0,L=0,R=0,G=0,H=0,ee=0,ce=0,Ae=0,Ne=0,Ze=0,mt=0,Tt=0,Ot=0,ni=0,ci=0,Mi=0,ki=0,Gi=0;if(c[s+288>>2]>=1)for(Gi=s+2248|0;;){if(H=c[s+2244>>2],ce=c[s+2304>>2],E=0,c[s+108>>2]){R=c[n+4>>2],k=F[s+904|0],g=c[n+8>>2];e:{if((g|0)>-1)break e;if(a=c[n+12>>2],a>>>0<$n[n+20>>2]){L=F[a|0]|F[a+1|0]<<8|(F[a+2|0]<<16|F[a+3|0]<<24),c[n+12>>2]=a+3,g=g+24|0,c[n+8>>2]=g,c[n>>2]=c[n>>2]<<24|(L>>>8&65280|(L<<8&16711680|L<<24))>>>8;break e}Dr(n),g=c[n+8>>2]}L=n,ee=g,E=c[n>>2],G=E>>>g|0,k=re(k,R)>>>8|0;e:{if(G>>>0>k>>>0){E=((k^-1)<<g)+E|0,c[n>>2]=E,R=R-k|0;break e}R=k+1|0}a=Rr(R)^24,g=ee-a|0,c[L+8>>2]=g,L=(R<<a)+-1|0,c[n+4>>2]=L;e:{if(G>>>0<=k>>>0){R=F[s+905|0];t:{if((g|0)>-1)break t;if(a=c[n+12>>2],a>>>0<$n[n+20>>2]){k=F[a|0]|F[a+1|0]<<8|(F[a+2|0]<<16|F[a+3|0]<<24),g=g+24|0,c[n+8>>2]=g,c[n+12>>2]=a+3,E=E<<24|(k>>>8&65280|(k<<8&16711680|k<<24))>>>8,c[n>>2]=E;break t}Dr(n),E=c[n>>2],g=c[n+8>>2]}k=E>>>g|0,a=re(L,R)>>>8|0;t:{if(k>>>0>a>>>0){c[n>>2]=((a^-1)<<g)+E,L=L-a|0;break t}L=a+1|0}E=k>>>0>a>>>0,a=Rr(L)^24,g=g-a|0,a=L<<a;break e}R=F[s+906|0];t:{if((g|0)>-1)break t;if(a=c[n+12>>2],a>>>0<$n[n+20>>2]){k=F[a|0]|F[a+1|0]<<8|(F[a+2|0]<<16|F[a+3|0]<<24),g=g+24|0,c[n+8>>2]=g,c[n+12>>2]=a+3,E=E<<24|(k>>>8&65280|(k<<8&16711680|k<<24))>>>8,c[n>>2]=E;break t}Dr(n),E=c[n>>2],g=c[n+8>>2]}a=g,G=a,k=re(L,R)>>>8|0;t:{if(E>>>a>>>0>k>>>0){c[n>>2]=((k^-1)<<g)+E,E=3,L=L-k|0;break t}E=2,L=k+1|0}a=Rr(L)^24,g=G-a|0,a=L<<a}c[n+8>>2]=g,c[n+4>>2]=a+-1}ce=ce+re(Ae,800)|0,p[ce+798|0]=E;e:{if(!c[s+2236>>2]){g=c[n+8>>2],R=c[n+4>>2];break e}k=c[n+4>>2],E=F[s+2240|0],g=c[n+8>>2];t:{if((g|0)>-1)break t;if(a=c[n+12>>2],a>>>0<$n[n+20>>2]){L=F[a|0]|F[a+1|0]<<8|(F[a+2|0]<<16|F[a+3|0]<<24),c[n+12>>2]=a+3,g=g+24|0,c[n+8>>2]=g,c[n>>2]=c[n>>2]<<24|(L>>>8&65280|(L<<8&16711680|L<<24))>>>8;break t}Dr(n),g=c[n+8>>2]}L=n,ee=g,R=c[n>>2],G=R>>>g|0,E=re(k,E)>>>8|0;t:{if(G>>>0>E>>>0){c[n>>2]=R+((E^-1)<<g),k=k-E|0;break t}k=E+1|0}a=Rr(k)^24,g=ee-a|0,c[L+8>>2]=g,R=(k<<a)+-1|0,c[n+4>>2]=R,p[ce+797|0]=G>>>0>E>>>0}e:{if((g|0)>-1)break e;if(a=c[n+12>>2],a>>>0<$n[n+20>>2]){L=F[a|0]|F[a+1|0]<<8|(F[a+2|0]<<16|F[a+3|0]<<24),c[n+12>>2]=a+3,g=g+24|0,c[n+8>>2]=g,c[n>>2]=c[n>>2]<<24|(L>>>8&65280|(L<<8&16711680|L<<24))>>>8;break e}Dr(n),g=c[n+8>>2]}H=H+(Ae<<2)|0,L=n,ee=g,E=c[n>>2],k=re(R,145)>>>8|0,G=E>>>g>>>0<=k>>>0;e:{if(!G){E=((k^-1)<<g)+E|0,c[n>>2]=E,k=R-k|0;break e}k=k+1|0}a=Rr(k)^24,g=ee-a|0,c[L+8>>2]=g,R=(k<<a)+-1|0,c[n+4>>2]=R,p[ce+768|0]=G;e:{if(!G){t:{if((g|0)>-1)break t;if(a=c[n+12>>2],a>>>0<$n[n+20>>2]){L=F[a|0]|F[a+1|0]<<8|(F[a+2|0]<<16|F[a+3|0]<<24),g=g+24|0,c[n+8>>2]=g,c[n+12>>2]=a+3,E=E<<24|(L>>>8&65280|(L<<8&16711680|L<<24))>>>8,c[n>>2]=E;break t}Dr(n),E=c[n>>2],g=c[n+8>>2]}L=n,ee=g,k=re(R,156)>>>8|0,G=E>>>g>>>0<=k>>>0;t:{if(!G){E=((k^-1)<<g)+E|0,c[n>>2]=E,k=R-k|0;break t}k=k+1|0}a=Rr(k)^24,g=ee-a|0,c[L+8>>2]=g,L=(k<<a)+-1|0,c[n+4>>2]=L;t:{if(!G){i:{if((g|0)>-1)break i;if(a=c[n+12>>2],a>>>0<$n[n+20>>2]){k=F[a|0]|F[a+1|0]<<8|(F[a+2|0]<<16|F[a+3|0]<<24),g=g+24|0,c[n+8>>2]=g,c[n+12>>2]=a+3,E=E<<24|(k>>>8&65280|(k<<8&16711680|k<<24))>>>8,c[n>>2]=E;break i}Dr(n),E=c[n>>2],g=c[n+8>>2]}a=g,R=a,k=L>>>1&16777215;i:{if(E>>>a>>>0>k>>>0){c[n>>2]=((k^-1)<<g)+E,E=1,L=L-k|0;break i}E=3,L=k+1|0}a=Rr(L)^24,g=R-a|0,a=L<<a;break t}i:{if((g|0)>-1)break i;if(a=c[n+12>>2],a>>>0<$n[n+20>>2]){k=F[a|0]|F[a+1|0]<<8|(F[a+2|0]<<16|F[a+3|0]<<24),g=g+24|0,c[n+8>>2]=g,c[n+12>>2]=a+3,E=E<<24|(k>>>8&65280|(k<<8&16711680|k<<24))>>>8,c[n>>2]=E;break i}Dr(n),E=c[n>>2],g=c[n+8>>2]}a=g,R=a,k=re(L,163)>>>8|0;i:{if(E>>>a>>>0>k>>>0){c[n>>2]=((k^-1)<<g)+E,E=2,L=L-k|0;break i}E=0,L=k+1|0}a=Rr(L)^24,g=R-a|0,a=L<<a}c[n+8>>2]=g,c[n+4>>2]=a+-1,p[ce+769|0]=E,a=re(E,16843009),p[H|0]=a,p[H+1|0]=a>>>8,p[H+2|0]=a>>>16,p[H+3|0]=a>>>24,g=Gi,p[g|0]=a,p[g+1|0]=a>>>8,p[g+2|0]=a>>>16,p[g+3|0]=a>>>24;break e}for(L=ce+769|0,Ne=0;;){for(Ot=(s+Ne|0)+2248|0,g=F[Ot|0],Ze=0;;){ni=re(g,9),ci=H+Ze|0,Mi=re(F[ci|0],90),k=F[ni+(Mi+3504|0)|0],G=c[n+4>>2],g=c[n+8>>2];t:{if((g|0)>-1)break t;if(a=c[n+12>>2],a>>>0<$n[n+20>>2]){E=F[a|0]|F[a+1|0]<<8|(F[a+2|0]<<16|F[a+3|0]<<24),c[n+12>>2]=a+3,g=g+24|0,c[n+8>>2]=g,c[n>>2]=c[n>>2]<<24|(E>>>8&65280|(E<<8&16711680|E<<24))>>>8;break t}Dr(n),g=c[n+8>>2]}ee=n,Tt=g,R=c[n>>2],mt=R>>>g|0,k=re(k,G)>>>8|0;t:{if(mt>>>0>k>>>0){R=((k^-1)<<g)+R|0,c[n>>2]=R,G=G-k|0;break t}G=k+1|0}if(a=Rr(G)^24,g=Tt-a|0,c[ee+8>>2]=g,a=(G<<a)+-1|0,c[n+4>>2]=a,k=mt>>>0>k>>>0,E=p[k+4416|0],41706>>>k&1)for(;;){mt=F[((Mi+3504|0)+ni|0)+E|0];t:{if((g|0)>-1)break t;if(k=c[n+12>>2],k>>>0<$n[n+20>>2]){G=F[k|0]|F[k+1|0]<<8|(F[k+2|0]<<16|F[k+3|0]<<24),g=g+24|0,c[n+8>>2]=g,c[n+12>>2]=k+3,R=R<<24|(G>>>8&65280|(G<<8&16711680|G<<24))>>>8,c[n>>2]=R;break t}Dr(n),R=c[n>>2],g=c[n+8>>2]}k=E<<1,ee=n,Tt=g,ki=R>>>g|0,G=re(a,mt)>>>8|0;t:{if(ki>>>0>G>>>0){R=((G^-1)<<g)+R|0,c[n>>2]=R,a=a-G|0;break t}a=G+1|0}if(E=Rr(a)^24,g=Tt-E|0,c[ee+8>>2]=g,a=(a<<E)+-1|0,c[n+4>>2]=a,k=k|ki>>>0>G>>>0,E=p[k+4416|0],!(41706>>>k&1))break}if(g=0-E|0,p[ci|0]=g,Ze=Ze+1|0,(Ze|0)==4)break}if(a=L,L=F[H|0]|F[H+1|0]<<8|(F[H+2|0]<<16|F[H+3|0]<<24),p[a|0]=L,p[a+1|0]=L>>>8,p[a+2|0]=L>>>16,p[a+3|0]=L>>>24,p[Ot|0]=g,L=a+4|0,Ne=Ne+1|0,(Ne|0)==4)break}}R=c[n+4>>2],g=c[n+8>>2];e:{if((g|0)>-1)break e;if(a=c[n+12>>2],a>>>0<$n[n+20>>2]){L=F[a|0]|F[a+1|0]<<8|(F[a+2|0]<<16|F[a+3|0]<<24),c[n+12>>2]=a+3,g=g+24|0,c[n+8>>2]=g,c[n>>2]=c[n>>2]<<24|(L>>>8&65280|(L<<8&16711680|L<<24))>>>8;break e}Dr(n),g=c[n+8>>2]}L=n,G=g,E=c[n>>2],k=re(R,142)>>>8|0,H=E>>>g>>>0<=k>>>0;e:{if(!H){E=((k^-1)<<g)+E|0,c[n>>2]=E,k=R-k|0;break e}k=k+1|0}a=Rr(k)^24,g=G-a|0,c[L+8>>2]=g,R=(k<<a)+-1|0,c[n+4>>2]=R,a=0;e:{if(H)break e;t:{if((g|0)>-1)break t;if(a=c[n+12>>2],a>>>0<$n[n+20>>2]){L=F[a|0]|F[a+1|0]<<8|(F[a+2|0]<<16|F[a+3|0]<<24),g=g+24|0,c[n+8>>2]=g,c[n+12>>2]=a+3,E=E<<24|(L>>>8&65280|(L<<8&16711680|L<<24))>>>8,c[n>>2]=E;break t}Dr(n),E=c[n>>2],g=c[n+8>>2]}L=n,G=g,k=re(R,114)>>>8|0,H=E>>>g>>>0<=k>>>0;t:{if(!H){E=((k^-1)<<g)+E|0,c[n>>2]=E,k=R-k|0;break t}k=k+1|0}if(a=Rr(k)^24,g=G-a|0,c[L+8>>2]=g,k=(k<<a)+-1|0,c[n+4>>2]=k,a=2,H)break e;t:{if((g|0)>-1)break t;if(a=c[n+12>>2],a>>>0<$n[n+20>>2]){L=F[a|0]|F[a+1|0]<<8|(F[a+2|0]<<16|F[a+3|0]<<24),g=g+24|0,c[n+8>>2]=g,c[n+12>>2]=a+3,E=E<<24|(L>>>8&65280|(L<<8&16711680|L<<24))>>>8,c[n>>2]=E;break t}Dr(n),E=c[n>>2],g=c[n+8>>2]}a=re(k,183)>>>8|0;t:{if(E>>>g>>>0>a>>>0){c[n>>2]=((a^-1)<<g)+E,E=k-a|0,a=1;break t}E=a+1|0,a=3}k=g,g=Rr(E)^24,c[n+8>>2]=k-g,c[n+4>>2]=(E<<g)+-1}if(p[ce+785|0]=a,Ae=Ae+1|0,!((Ae|0)<c[s+288>>2]))break}return!c[s+36>>2]}function Hl(n,s,a,g,k,E){var L=0,R=0,G=0,H=0,ee=0,ce=0,Ae=0,Ne=0,Ze=0,mt=0,Tt=0,Ot=0,ni=0,ci=0,Mi=0,ki=0,Gi=0,sn=0,vn=0,or=0,Ir=0,gs=0,wa=0,hl=0,Zu=0,Xh=0;or=n+124|0,L=c[n+112>>2],Ze=(L|0)/(a|0)|0,Ne=n+24|0,Ir=(re(a,g)<<2)+s|0,g=(L<<2)+s|0;e:{t:{mt=re(a,k);i:{if((L|0)>=(mt|0))break i;for(Ae=mt<<2,Ot=L-re(a,Ze)|0,gs=c[n+148>>2],mt=0,vn=c[n+120>>2],sn=(vn|0)>0?or:0,wa=c[n+56>>2]?Ze:16777216,hl=vn+280|0,Zu=s+Ae|0,ce=c[n+168>>2],L=c[n+152>>2],L&&(mt=c[c[n+160>>2]+(re(c[n+156>>2],Ze>>L)+(Ot>>L)<<2)>>2]),ni=ce+re(mt,548)|0,Xh=n+136|0,ki=n- -64|0,mt=g;;){(Ze|0)>=(wa|0)&&(L=c[Ne+4>>2],c[ki>>2]=c[Ne>>2],c[ki+4>>2]=L,L=c[Ne+28>>2],c[ki+24>>2]=c[Ne+24>>2],c[ki+28>>2]=L,L=c[Ne+20>>2],c[ki+16>>2]=c[Ne+16>>2],c[ki+20>>2]=L,L=c[Ne+12>>2],c[ki+8>>2]=c[Ne+8>>2],c[ki+12>>2]=L,c[n+96>>2]=g-s>>2,c[n+120>>2]>=1&&d0(or,Xh),wa=Ze+8|0);n:{o:{l:{if(!(Ot&gs)){L=c[n+168>>2],G=c[n+152>>2],ce=0;r:{if(!G)break r;ce=c[c[n+160>>2]+(re(c[n+156>>2],Ze>>G)+(Ot>>G)<<2)>>2]}ni=L+re(ce,548)|0}if(c[ni+28>>2]){H=c[ni+24>>2];break l}c[n+44>>2]>=32&&ke(Ne);r:{if(c[ni+32>>2]){L=c[n+28>>2],H=c[n+44>>2],R=H&63,G=R&31,Tt=c[n+24>>2],Ae=(((32<=(R&63)>>>0?L>>>G|0:((1<<G)-1&L)<<32-G|Tt>>>G)&63)<<3)+ni|0,G=c[Ae+36>>2],ce=H+G|0,H=c[Ae+40>>2];u:{if((G|0)<=255){c[n+44>>2]=ce,c[g>>2]=H,H=0;break u}c[n+44>>2]=ce+-256}if(c[n+48>>2]|(c[n+44>>2]>64?c[n+40>>2]==c[n+36>>2]:0))break i;if(H)break r;break o}if(Ae=n,L=c[n+28>>2],H=c[n+44>>2],ee=H&63,G=ee&31,Tt=c[n+24>>2],R=c[ni>>2]+(((32<=(ee&63)>>>0?L>>>G|0:((1<<G)-1&L)<<32-G|Tt>>>G)&255)<<2)|0,G=F[R|0],G>>>0>=9&&(H=H+8|0,c[n+44>>2]=H,ce=(mn[R+2>>1]<<2)+R|0,ci=H&63,R=ci&31,R=ce+(((-1<<G+-8^-1)&(32<=(ci&63)>>>0?L>>>R|0:((1<<R)-1&L)<<32-R|Tt>>>R))<<2)|0,G=F[R|0]),c[Ae+44>>2]=(G&255)+H,c[n+48>>2])break i;H=mn[R+2>>1]}if(c[n+44>>2]>64&&c[n+40>>2]==c[n+36>>2])break i;if((H|0)<=255){if(c[ni+20>>2]){H=c[ni+24>>2]|H<<8;break l}if(Ae=n,R=c[n+44>>2],ci=R&63,ce=ci&31,ee=c[ni+4>>2]+(((32<=(ci&63)>>>0?L>>>ce|0:((1<<ce)-1&L)<<32-ce|Tt>>>ce)&255)<<2)|0,G=F[ee|0],G>>>0>=9&&(R=R+8|0,c[n+44>>2]=R,ce=(mn[ee+2>>1]<<2)+ee|0,Gi=R&63,ee=Gi&31,ee=ce+(((-1<<G+-8^-1)&(32<=(Gi&63)>>>0?L>>>ee|0:((1<<ee)-1&L)<<32-ee|Tt>>>ee))<<2)|0,G=F[ee|0]),R=(G&255)+R|0,c[Ae+44>>2]=R,ci=mn[ee+2>>1],(R|0)>=32&&(ke(Ne),Tt=c[n+24>>2],R=c[n+44>>2],L=c[n+28>>2]),Gi=R&63,ce=Gi&31,ee=c[ni+8>>2]+(((32<=(Gi&63)>>>0?L>>>ce|0:((1<<ce)-1&L)<<32-ce|Tt>>>ce)&255)<<2)|0,G=F[ee|0],G>>>0>=9&&(R=R+8|0,c[n+44>>2]=R,ce=(mn[ee+2>>1]<<2)+ee|0,Mi=R&63,ee=Mi&31,ee=ce+(((-1<<G+-8^-1)&(32<=Mi>>>0?L>>>ee|0:((1<<ee)-1&L)<<32-ee|Tt>>>ee))<<2)|0,G=F[ee|0]),R=(G&255)+R|0,c[Ae+44>>2]=R,Gi=mn[ee+2>>1],ce=n,Mi=R&63,Ae=Mi&31,ee=c[ni+12>>2]+(((32<=Mi>>>0?L>>>Ae|0:((1<<Ae)-1&L)<<32-Ae|Tt>>>Ae)&255)<<2)|0,G=F[ee|0],G>>>0>=9&&(R=R+8|0,c[n+44>>2]=R,Mi=(mn[ee+2>>1]<<2)+ee|0,ee=R&63,Ae=ee&31,ee=Mi+(((-1<<G+-8^-1)&(32<=(ee&63)>>>0?L>>>Ae|0:((1<<Ae)-1&L)<<32-Ae|Tt>>>Ae))<<2)|0,G=F[ee|0]),L=(G&255)+R|0,c[ce+44>>2]=L,c[n+48>>2]||(G=mn[ee+2>>1],c[n+40>>2]==c[n+36>>2]&&(L|0)>=65))break i;H=Gi|(ci<<16|H<<8)|G<<24;break l}r:{u:{if((H|0)<=279){ce=H+-256|0,(H|0)>=260&&(L=H+-258>>1,ce=io(Ne,L)+((ce&1|2)<<L)|0,Tt=c[Ne>>2],L=c[Ne+4>>2]),Ae=n,H=c[n+44>>2],ci=H&63,R=ci&31,R=c[ni+16>>2]+(((32<=(ci&63)>>>0?L>>>R|0:((1<<R)-1&L)<<32-R|Tt>>>R)&255)<<2)|0,G=F[R|0],G>>>0>=9&&(H=H+8|0,c[n+44>>2]=H,Mi=(mn[R+2>>1]<<2)+R|0,ee=H&63,R=ee&31,R=Mi+(((-1<<G+-8^-1)&(32<=(ee&63)>>>0?L>>>R|0:((1<<R)-1&L)<<32-R|Tt>>>R))<<2)|0,G=F[R|0]),L=(G&255)+H|0,c[Ae+44>>2]=L,H=mn[R+2>>1],(L|0)>=32&&ke(Ne),H>>>0>=4&&(L=H+-2>>1,H=io(Ne,L)+((H&1|2)<<L)|0);s:{if((H+1|0)>=121){L=H+-119|0;break s}L=F[H+1264|0],L=(re(L>>>4|0,a)-(L&15)|0)+8|0,L=(L|0)>1?L:1}if(c[n+48>>2]|(c[n+44>>2]>64?c[n+40>>2]==c[n+36>>2]:0))break i;if(g-s>>2<(L|0)||(Ae=ce+1|0,Ir-g>>2<(Ae|0)))break t;if(R=g-(L<<2)|0,!(g&3|(Ae|0)<4|(L|0)>2)){s:{if((L|0)==1){H=c[R>>2],G=H,L=G,Tt=L;break s}L=c[R+4>>2],Tt=c[R>>2],H=Tt}s:{if(!(g&4)){ce=Ae,G=g;break s}c[g>>2]=H,Tt=yp(Tt,L),L=Fn,R=R+4|0,G=g+4|0}for(H=ce>>>1|0,ee=H>>>0>1?H:1,H=0;ci=G+(H<<3)|0,c[ci>>2]=Tt,c[ci+4>>2]=L,H=H+1|0,(ee|0)!=(H|0););if(!(ce&1))break r;L=ee<<3,c[L+G>>2]=c[L+R>>2];break r}if((L|0)>=(Ae|0))break u;if(H=0,(Ae|0)<=0)break r;for(;L=H<<2,c[L+g>>2]=c[L+R>>2],L=(H|0)!=(ce|0),H=H+1|0,!!L;);break r}if((H|0)>=(hl|0))break t;if(G=H+-280|0,L=c[sn>>2],mt>>>0<g>>>0)for(;ce=c[mt>>2],c[L+(re(ce,506832829)>>>c[sn+4>>2]<<2)>>2]=ce,mt=mt+4|0,mt>>>0<g>>>0;);H=c[L+(G<<2)>>2];break l}Xr(g,R,Ae<<2)}if(Ot=Ae+Ot|0,(Ot|0)>=(a|0))for(;Ot=Ot-a|0,L=Ze,Ze=L+1|0,Ze&15|(!E|(L|0)>=(k|0))||ft[E|0](n,Ze),(Ot|0)>=(a|0););if(ce=Ae<<2,Ot&gs){L=c[n+168>>2],G=c[n+152>>2],Ae=0;r:{if(!G)break r;Ae=c[c[n+160>>2]+(re(c[n+156>>2],Ze>>G)+(Ot>>G)<<2)>>2]}ni=L+re(Ae,548)|0}if(g=g+ce|0,(vn|0)<1|mt>>>0>=g>>>0)break n;for(L=c[sn>>2];G=c[mt>>2],c[L+(re(G,506832829)>>>c[sn+4>>2]<<2)>>2]=G,mt=mt+4|0,mt>>>0<g>>>0;);break n}c[g>>2]=H}if(L=g+4|0,Ot=Ot+1|0,(Ot|0)<(a|0)){g=L;break n}if(G=Ze+1|0,G&15|(!E|(Ze|0)>=(k|0))||ft[E|0](n,G),Ot=0,!((vn|0)<1|mt>>>0>=L>>>0)){for(ce=c[sn>>2];Ze=c[mt>>2],c[ce+(re(Ze,506832829)>>>c[sn+4>>2]<<2)>>2]=Ze,Ae=mt>>>0<g>>>0,Ze=mt+4|0,mt=Ze,!!Ae;);mt=Ze}g=L,Ze=G}if(!(g>>>0<Zu>>>0))break}}L=n,a=1;i:{if(c[n+48>>2]||(a=0,c[n+40>>2]!=c[n+36>>2]))break i;a=c[n+44>>2]>64}if(c[L+48>>2]=a,!(!c[n+56>>2]|(!a|g>>>0>=Ir>>>0))){if(c[n>>2]=5,s=c[n+68>>2],c[Ne>>2]=c[n+64>>2],c[Ne+4>>2]=s,s=c[n+92>>2],c[Ne+24>>2]=c[n+88>>2],c[Ne+28>>2]=s,s=c[n+84>>2],c[Ne+16>>2]=c[n+80>>2],c[Ne+20>>2]=s,s=c[n+76>>2],c[Ne+8>>2]=c[n+72>>2],c[Ne+12>>2]=s,c[n+112>>2]=c[n+96>>2],s=1,c[n+120>>2]<1)break e;return d0(n+136|0,or),1}if(a)break t;return E&&ft[E|0](n,(Ze|0)>(k|0)?k:Ze),c[n>>2]=0,c[n+112>>2]=g-s>>2,1}c[n>>2]=3,s=0}return s}function ma(n){n=n|0;var s=0,a=0;a=_r(F[n+31|0],0,16843009,16843009),s=a,p[n+32|0]=s,p[n+33|0]=s>>>8,p[n+34|0]=s>>>16,p[n+35|0]=s>>>24,s=Fn,p[n+36|0]=s,p[n+37|0]=s>>>8,p[n+38|0]=s>>>16,p[n+39|0]=s>>>24,p[n+40|0]=a,p[n+41|0]=a>>>8,p[n+42|0]=a>>>16,p[n+43|0]=a>>>24,p[n+44|0]=s,p[n+45|0]=s>>>8,p[n+46|0]=s>>>16,p[n+47|0]=s>>>24,a=_r(F[n+63|0],0,16843009,16843009),s=a,p[n+64|0]=s,p[n+65|0]=s>>>8,p[n+66|0]=s>>>16,p[n+67|0]=s>>>24,s=Fn,p[n+68|0]=s,p[n+69|0]=s>>>8,p[n+70|0]=s>>>16,p[n+71|0]=s>>>24,p[n+72|0]=a,p[n+73|0]=a>>>8,p[n+74|0]=a>>>16,p[n+75|0]=a>>>24,p[n+76|0]=s,p[n+77|0]=s>>>8,p[n+78|0]=s>>>16,p[n+79|0]=s>>>24,a=_r(F[n+95|0],0,16843009,16843009),s=a,p[n+96|0]=s,p[n+97|0]=s>>>8,p[n+98|0]=s>>>16,p[n+99|0]=s>>>24,s=Fn,p[n+100|0]=s,p[n+101|0]=s>>>8,p[n+102|0]=s>>>16,p[n+103|0]=s>>>24,p[n+104|0]=a,p[n+105|0]=a>>>8,p[n+106|0]=a>>>16,p[n+107|0]=a>>>24,p[n+108|0]=s,p[n+109|0]=s>>>8,p[n+110|0]=s>>>16,p[n+111|0]=s>>>24,a=_r(F[n+127|0],0,16843009,16843009),s=a,p[n+128|0]=s,p[n+129|0]=s>>>8,p[n+130|0]=s>>>16,p[n+131|0]=s>>>24,s=Fn,p[n+132|0]=s,p[n+133|0]=s>>>8,p[n+134|0]=s>>>16,p[n+135|0]=s>>>24,p[n+136|0]=a,p[n+137|0]=a>>>8,p[n+138|0]=a>>>16,p[n+139|0]=a>>>24,p[n+140|0]=s,p[n+141|0]=s>>>8,p[n+142|0]=s>>>16,p[n+143|0]=s>>>24,a=_r(F[n+159|0],0,16843009,16843009),s=a,p[n+168|0]=s,p[n+169|0]=s>>>8,p[n+170|0]=s>>>16,p[n+171|0]=s>>>24,s=Fn,p[n+172|0]=s,p[n+173|0]=s>>>8,p[n+174|0]=s>>>16,p[n+175|0]=s>>>24,p[n+160|0]=a,p[n+161|0]=a>>>8,p[n+162|0]=a>>>16,p[n+163|0]=a>>>24,p[n+164|0]=s,p[n+165|0]=s>>>8,p[n+166|0]=s>>>16,p[n+167|0]=s>>>24,a=_r(F[n+-1|0],0,16843009,16843009),s=a,p[n|0]=s,p[n+1|0]=s>>>8,p[n+2|0]=s>>>16,p[n+3|0]=s>>>24,s=Fn,p[n+4|0]=s,p[n+5|0]=s>>>8,p[n+6|0]=s>>>16,p[n+7|0]=s>>>24,p[n+8|0]=a,p[n+9|0]=a>>>8,p[n+10|0]=a>>>16,p[n+11|0]=a>>>24,p[n+12|0]=s,p[n+13|0]=s>>>8,p[n+14|0]=s>>>16,p[n+15|0]=s>>>24,a=_r(F[n+191|0],0,16843009,16843009),s=a,p[n+200|0]=s,p[n+201|0]=s>>>8,p[n+202|0]=s>>>16,p[n+203|0]=s>>>24,s=Fn,p[n+204|0]=s,p[n+205|0]=s>>>8,p[n+206|0]=s>>>16,p[n+207|0]=s>>>24,p[n+192|0]=a,p[n+193|0]=a>>>8,p[n+194|0]=a>>>16,p[n+195|0]=a>>>24,p[n+196|0]=s,p[n+197|0]=s>>>8,p[n+198|0]=s>>>16,p[n+199|0]=s>>>24,a=_r(F[n+223|0],0,16843009,16843009),s=a,p[n+232|0]=s,p[n+233|0]=s>>>8,p[n+234|0]=s>>>16,p[n+235|0]=s>>>24,s=Fn,p[n+236|0]=s,p[n+237|0]=s>>>8,p[n+238|0]=s>>>16,p[n+239|0]=s>>>24,p[n+224|0]=a,p[n+225|0]=a>>>8,p[n+226|0]=a>>>16,p[n+227|0]=a>>>24,p[n+228|0]=s,p[n+229|0]=s>>>8,p[n+230|0]=s>>>16,p[n+231|0]=s>>>24,a=_r(F[n+255|0],0,16843009,16843009),s=a,p[n+264|0]=s,p[n+265|0]=s>>>8,p[n+266|0]=s>>>16,p[n+267|0]=s>>>24,s=Fn,p[n+268|0]=s,p[n+269|0]=s>>>8,p[n+270|0]=s>>>16,p[n+271|0]=s>>>24,p[n+256|0]=a,p[n+257|0]=a>>>8,p[n+258|0]=a>>>16,p[n+259|0]=a>>>24,p[n+260|0]=s,p[n+261|0]=s>>>8,p[n+262|0]=s>>>16,p[n+263|0]=s>>>24,a=_r(F[n+287|0],0,16843009,16843009),s=a,p[n+296|0]=s,p[n+297|0]=s>>>8,p[n+298|0]=s>>>16,p[n+299|0]=s>>>24,s=Fn,p[n+300|0]=s,p[n+301|0]=s>>>8,p[n+302|0]=s>>>16,p[n+303|0]=s>>>24,p[n+288|0]=a,p[n+289|0]=a>>>8,p[n+290|0]=a>>>16,p[n+291|0]=a>>>24,p[n+292|0]=s,p[n+293|0]=s>>>8,p[n+294|0]=s>>>16,p[n+295|0]=s>>>24,a=_r(F[n+319|0],0,16843009,16843009),s=a,p[n+328|0]=s,p[n+329|0]=s>>>8,p[n+330|0]=s>>>16,p[n+331|0]=s>>>24,s=Fn,p[n+332|0]=s,p[n+333|0]=s>>>8,p[n+334|0]=s>>>16,p[n+335|0]=s>>>24,p[n+320|0]=a,p[n+321|0]=a>>>8,p[n+322|0]=a>>>16,p[n+323|0]=a>>>24,p[n+324|0]=s,p[n+325|0]=s>>>8,p[n+326|0]=s>>>16,p[n+327|0]=s>>>24,a=_r(F[n+351|0],0,16843009,16843009),s=a,p[n+360|0]=s,p[n+361|0]=s>>>8,p[n+362|0]=s>>>16,p[n+363|0]=s>>>24,s=Fn,p[n+364|0]=s,p[n+365|0]=s>>>8,p[n+366|0]=s>>>16,p[n+367|0]=s>>>24,p[n+352|0]=a,p[n+353|0]=a>>>8,p[n+354|0]=a>>>16,p[n+355|0]=a>>>24,p[n+356|0]=s,p[n+357|0]=s>>>8,p[n+358|0]=s>>>16,p[n+359|0]=s>>>24,a=_r(F[n+383|0],0,16843009,16843009),s=a,p[n+392|0]=s,p[n+393|0]=s>>>8,p[n+394|0]=s>>>16,p[n+395|0]=s>>>24,s=Fn,p[n+396|0]=s,p[n+397|0]=s>>>8,p[n+398|0]=s>>>16,p[n+399|0]=s>>>24,p[n+384|0]=a,p[n+385|0]=a>>>8,p[n+386|0]=a>>>16,p[n+387|0]=a>>>24,p[n+388|0]=s,p[n+389|0]=s>>>8,p[n+390|0]=s>>>16,p[n+391|0]=s>>>24,a=_r(F[n+415|0],0,16843009,16843009),s=a,p[n+424|0]=s,p[n+425|0]=s>>>8,p[n+426|0]=s>>>16,p[n+427|0]=s>>>24,s=Fn,p[n+428|0]=s,p[n+429|0]=s>>>8,p[n+430|0]=s>>>16,p[n+431|0]=s>>>24,p[n+416|0]=a,p[n+417|0]=a>>>8,p[n+418|0]=a>>>16,p[n+419|0]=a>>>24,p[n+420|0]=s,p[n+421|0]=s>>>8,p[n+422|0]=s>>>16,p[n+423|0]=s>>>24,a=_r(F[n+447|0],0,16843009,16843009),s=a,p[n+456|0]=s,p[n+457|0]=s>>>8,p[n+458|0]=s>>>16,p[n+459|0]=s>>>24,s=Fn,p[n+460|0]=s,p[n+461|0]=s>>>8,p[n+462|0]=s>>>16,p[n+463|0]=s>>>24,p[n+448|0]=a,p[n+449|0]=a>>>8,p[n+450|0]=a>>>16,p[n+451|0]=a>>>24,p[n+452|0]=s,p[n+453|0]=s>>>8,p[n+454|0]=s>>>16,p[n+455|0]=s>>>24,a=_r(F[n+479|0],0,16843009,16843009),s=a,p[n+488|0]=s,p[n+489|0]=s>>>8,p[n+490|0]=s>>>16,p[n+491|0]=s>>>24,s=Fn,p[n+492|0]=s,p[n+493|0]=s>>>8,p[n+494|0]=s>>>16,p[n+495|0]=s>>>24,p[n+480|0]=a,p[n+481|0]=a>>>8,p[n+482|0]=a>>>16,p[n+483|0]=a>>>24,p[n+484|0]=s,p[n+485|0]=s>>>8,p[n+486|0]=s>>>16,p[n+487|0]=s>>>24}function ko(n,s){var a=0,g=0,k=0,E=0,L=0,R=0,G=0,H=0,ee=0,ce=0;R=c[n+4>>2],E=F[s+3|0],a=c[n+8>>2];e:{if((a|0)>-1)break e;if(k=c[n+12>>2],k>>>0<$n[n+20>>2]){L=F[k|0]|F[k+1|0]<<8|(F[k+2|0]<<16|F[k+3|0]<<24),c[n+12>>2]=k+3,a=a+24|0,c[n+8>>2]=a,c[n>>2]=c[n>>2]<<24|(L>>>8&65280|(L<<8&16711680|L<<24))>>>8;break e}Dr(n),a=c[n+8>>2]}L=n,H=a,g=c[n>>2],G=g>>>a|0,E=re(E,R)>>>8|0;e:{if(G>>>0>E>>>0){g=((E^-1)<<a)+g|0,c[n>>2]=g,R=R-E|0;break e}R=E+1|0}k=Rr(R)^24,a=H-k|0,c[L+8>>2]=a,R=(R<<k)+-1|0,c[n+4>>2]=R;e:{if(G>>>0<=E>>>0){E=F[s+4|0];t:{if((a|0)>-1)break t;if(k=c[n+12>>2],k>>>0<$n[n+20>>2]){L=F[k|0]|F[k+1|0]<<8|(F[k+2|0]<<16|F[k+3|0]<<24),a=a+24|0,c[n+8>>2]=a,c[n+12>>2]=k+3,g=g<<24|(L>>>8&65280|(L<<8&16711680|L<<24))>>>8,c[n>>2]=g;break t}Dr(n),g=c[n>>2],a=c[n+8>>2]}L=n,H=a,E=re(E,R)>>>8|0,G=g>>>a>>>0<=E>>>0;t:{if(!G){g=((E^-1)<<a)+g|0,c[n>>2]=g,E=R-E|0;break t}E=E+1|0}if(k=Rr(E)^24,a=H-k|0,c[L+8>>2]=a,R=(E<<k)+-1|0,c[n+4>>2]=R,E=2,G)break e;L=F[s+5|0];t:{if((a|0)>-1)break t;if(s=c[n+12>>2],s>>>0<$n[n+20>>2]){k=F[s|0]|F[s+1|0]<<8|(F[s+2|0]<<16|F[s+3|0]<<24),a=a+24|0,c[n+8>>2]=a,c[n+12>>2]=s+3,g=g<<24|(k>>>8&65280|(k<<8&16711680|k<<24))>>>8,c[n>>2]=g;break t}Dr(n),g=c[n>>2],a=c[n+8>>2]}H=n,k=a,E=re(L,R)>>>8|0;t:{if(g>>>a>>>0>E>>>0){c[n>>2]=((E^-1)<<a)+g,L=4,a=R-E|0;break t}L=3,a=E+1|0}return s=Rr(a)^24,c[H+8>>2]=k-s,c[n+4>>2]=(a<<s)+-1,L}E=F[s+6|0];t:{if((a|0)>-1)break t;if(k=c[n+12>>2],k>>>0<$n[n+20>>2]){L=F[k|0]|F[k+1|0]<<8|(F[k+2|0]<<16|F[k+3|0]<<24),a=a+24|0,c[n+8>>2]=a,c[n+12>>2]=k+3,g=g<<24|(L>>>8&65280|(L<<8&16711680|L<<24))>>>8,c[n>>2]=g;break t}Dr(n),g=c[n>>2],a=c[n+8>>2]}L=n,H=a,G=g>>>a|0,E=re(E,R)>>>8|0;t:{if(G>>>0>E>>>0){g=((E^-1)<<a)+g|0,c[n>>2]=g,R=R-E|0;break t}R=E+1|0}if(k=Rr(R)^24,a=H-k|0,c[L+8>>2]=a,R=(R<<k)+-1|0,c[n+4>>2]=R,G>>>0<=E>>>0){L=F[s+7|0];t:{if((a|0)>-1)break t;if(s=c[n+12>>2],s>>>0<$n[n+20>>2]){k=F[s|0]|F[s+1|0]<<8|(F[s+2|0]<<16|F[s+3|0]<<24),a=a+24|0,c[n+8>>2]=a,c[n+12>>2]=s+3,g=g<<24|(k>>>8&65280|(k<<8&16711680|k<<24))>>>8,c[n>>2]=g;break t}Dr(n),g=c[n>>2],a=c[n+8>>2]}H=n,k=a,G=g>>>a|0,L=re(L,R)>>>8|0;t:{if(G>>>0>L>>>0){g=((L^-1)<<a)+g|0,c[n>>2]=g,E=R-L|0;break t}E=L+1|0}if(s=Rr(E)^24,a=k-s|0,c[H+8>>2]=a,R=(E<<s)+-1|0,c[n+4>>2]=R,G>>>0<=L>>>0){t:{if((a|0)>-1)break t;if(s=c[n+12>>2],s>>>0<$n[n+20>>2]){k=F[s|0]|F[s+1|0]<<8|(F[s+2|0]<<16|F[s+3|0]<<24),a=a+24|0,c[n+8>>2]=a,c[n+12>>2]=s+3,g=g<<24|(k>>>8&65280|(k<<8&16711680|k<<24))>>>8,c[n>>2]=g;break t}Dr(n),g=c[n>>2],a=c[n+8>>2]}s=re(R,159)>>>8|0;t:{if(g>>>a>>>0>s>>>0){c[n>>2]=((s^-1)<<a)+g,g=R-s|0,s=6;break t}g=s+1|0,s=5}return E=a,a=Rr(g)^24,c[n+8>>2]=E-a,c[n+4>>2]=(g<<a)+-1,s}t:{if((a|0)>-1)break t;if(s=c[n+12>>2],s>>>0<$n[n+20>>2]){k=F[s|0]|F[s+1|0]<<8|(F[s+2|0]<<16|F[s+3|0]<<24),a=a+24|0,c[n+8>>2]=a,c[n+12>>2]=s+3,g=g<<24|(k>>>8&65280|(k<<8&16711680|k<<24))>>>8,c[n>>2]=g;break t}Dr(n),g=c[n>>2],a=c[n+8>>2]}H=n,k=a,L=re(R,165)>>>8|0;t:{if(g>>>a>>>0>L>>>0){g=((L^-1)<<a)+g|0,c[n>>2]=g,E=9,L=R-L|0;break t}E=7,L=L+1|0}s=Rr(L)^24,a=k-s|0,c[H+8>>2]=a,R=(L<<s)+-1|0,c[n+4>>2]=R;t:{if((a|0)>-1)break t;if(s=c[n+12>>2],s>>>0<$n[n+20>>2]){k=F[s|0]|F[s+1|0]<<8|(F[s+2|0]<<16|F[s+3|0]<<24),a=a+24|0,c[n+8>>2]=a,c[n+12>>2]=s+3,g=g<<24|(k>>>8&65280|(k<<8&16711680|k<<24))>>>8,c[n>>2]=g;break t}Dr(n),g=c[n>>2],a=c[n+8>>2]}H=n,k=a,G=g>>>a|0,L=re(R,145)>>>8|0;t:{if(G>>>0>L>>>0){c[n>>2]=((L^-1)<<a)+g,a=R-L|0;break t}a=L+1|0}return s=Rr(a)^24,c[H+8>>2]=k-s,c[n+4>>2]=(a<<s)+-1,(G>>>0>L>>>0)+E|0}E=F[s+8|0];t:{if((a|0)>-1)break t;if(k=c[n+12>>2],k>>>0<$n[n+20>>2]){L=F[k|0]|F[k+1|0]<<8|(F[k+2|0]<<16|F[k+3|0]<<24),a=a+24|0,c[n+8>>2]=a,c[n+12>>2]=k+3,g=g<<24|(L>>>8&65280|(L<<8&16711680|L<<24))>>>8,c[n>>2]=g;break t}Dr(n),g=c[n>>2],a=c[n+8>>2]}L=n,H=a,ee=g>>>a|0,G=re(E,R)>>>8|0;t:{if(ee>>>0>G>>>0){g=((G^-1)<<a)+g|0,c[n>>2]=g,ce=10,E=R-G|0;break t}ce=9,E=G+1|0}k=Rr(E)^24,a=H-k|0,c[L+8>>2]=a,E=(E<<k)+-1|0,c[n+4>>2]=E,L=F[s+ce|0];t:{if((a|0)>-1)break t;if(s=c[n+12>>2],s>>>0<$n[n+20>>2]){k=F[s|0]|F[s+1|0]<<8|(F[s+2|0]<<16|F[s+3|0]<<24),a=a+24|0,c[n+8>>2]=a,c[n+12>>2]=s+3,g=g<<24|(k>>>8&65280|(k<<8&16711680|k<<24))>>>8,c[n>>2]=g;break t}Dr(n),g=c[n>>2],a=c[n+8>>2]}H=n,k=a,R=g>>>a|0,L=re(L,E)>>>8|0;t:{if(R>>>0>L>>>0){g=((L^-1)<<a)+g|0,c[n>>2]=g,E=E-L|0;break t}E=L+1|0}s=Rr(E)^24,a=k-s|0,c[H+8>>2]=a,E=(E<<s)+-1|0,c[n+4>>2]=E,ce=(ee>>>0>G>>>0)<<1|R>>>0>L>>>0,L=c[(ce<<2)+10160>>2],s=F[L|0];t:{if(!s){R=0;break t}for(R=0;;){G=s&255;i:{if((a|0)>-1)break i;if(s=c[n+12>>2],s>>>0<$n[n+20>>2]){k=F[s|0]|F[s+1|0]<<8|(F[s+2|0]<<16|F[s+3|0]<<24),a=a+24|0,c[n+8>>2]=a,c[n+12>>2]=s+3,g=g<<24|(k>>>8&65280|(k<<8&16711680|k<<24))>>>8,c[n>>2]=g;break i}Dr(n),g=c[n>>2],a=c[n+8>>2]}H=n,k=a,ee=g>>>a|0,G=re(E,G)>>>8|0;i:{if(ee>>>0>G>>>0){g=((G^-1)<<a)+g|0,c[n>>2]=g,E=E-G|0;break i}E=G+1|0}if(s=Rr(E)^24,a=k-s|0,c[H+8>>2]=a,E=(E<<s)+-1|0,c[n+4>>2]=E,R=R<<1|ee>>>0>G>>>0,s=F[L+1|0],L=L+1|0,!s)break}}E=(8<<ce|3)+R|0}return E}function se(n){n=n|0,p[n|0]=-2139062144,p[n+1|0]=8421504,p[n+2|0]=32896,p[n+3|0]=128,p[n+4|0]=-2139062144,p[n+5|0]=8421504,p[n+6|0]=32896,p[n+7|0]=128,p[n+32|0]=-2139062144,p[n+33|0]=8421504,p[n+34|0]=32896,p[n+35|0]=128,p[n+36|0]=-2139062144,p[n+37|0]=8421504,p[n+38|0]=32896,p[n+39|0]=128,p[n+64|0]=-2139062144,p[n+65|0]=8421504,p[n+66|0]=32896,p[n+67|0]=128,p[n+68|0]=-2139062144,p[n+69|0]=8421504,p[n+70|0]=32896,p[n+71|0]=128,p[n+96|0]=-2139062144,p[n+97|0]=8421504,p[n+98|0]=32896,p[n+99|0]=128,p[n+100|0]=-2139062144,p[n+101|0]=8421504,p[n+102|0]=32896,p[n+103|0]=128,p[n+128|0]=-2139062144,p[n+129|0]=8421504,p[n+130|0]=32896,p[n+131|0]=128,p[n+132|0]=-2139062144,p[n+133|0]=8421504,p[n+134|0]=32896,p[n+135|0]=128,p[n+160|0]=-2139062144,p[n+161|0]=8421504,p[n+162|0]=32896,p[n+163|0]=128,p[n+164|0]=-2139062144,p[n+165|0]=8421504,p[n+166|0]=32896,p[n+167|0]=128,p[n+192|0]=-2139062144,p[n+193|0]=8421504,p[n+194|0]=32896,p[n+195|0]=128,p[n+196|0]=-2139062144,p[n+197|0]=8421504,p[n+198|0]=32896,p[n+199|0]=128,p[n+224|0]=-2139062144,p[n+225|0]=8421504,p[n+226|0]=32896,p[n+227|0]=128,p[n+228|0]=-2139062144,p[n+229|0]=8421504,p[n+230|0]=32896,p[n+231|0]=128,p[n+256|0]=-2139062144,p[n+257|0]=8421504,p[n+258|0]=32896,p[n+259|0]=128,p[n+260|0]=-2139062144,p[n+261|0]=8421504,p[n+262|0]=32896,p[n+263|0]=128,p[n+8|0]=-2139062144,p[n+9|0]=8421504,p[n+10|0]=32896,p[n+11|0]=128,p[n+12|0]=-2139062144,p[n+13|0]=8421504,p[n+14|0]=32896,p[n+15|0]=128,p[n+40|0]=-2139062144,p[n+41|0]=8421504,p[n+42|0]=32896,p[n+43|0]=128,p[n+44|0]=-2139062144,p[n+45|0]=8421504,p[n+46|0]=32896,p[n+47|0]=128,p[n+72|0]=-2139062144,p[n+73|0]=8421504,p[n+74|0]=32896,p[n+75|0]=128,p[n+76|0]=-2139062144,p[n+77|0]=8421504,p[n+78|0]=32896,p[n+79|0]=128,p[n+104|0]=-2139062144,p[n+105|0]=8421504,p[n+106|0]=32896,p[n+107|0]=128,p[n+108|0]=-2139062144,p[n+109|0]=8421504,p[n+110|0]=32896,p[n+111|0]=128,p[n+136|0]=-2139062144,p[n+137|0]=8421504,p[n+138|0]=32896,p[n+139|0]=128,p[n+140|0]=-2139062144,p[n+141|0]=8421504,p[n+142|0]=32896,p[n+143|0]=128,p[n+168|0]=-2139062144,p[n+169|0]=8421504,p[n+170|0]=32896,p[n+171|0]=128,p[n+172|0]=-2139062144,p[n+173|0]=8421504,p[n+174|0]=32896,p[n+175|0]=128,p[n+200|0]=-2139062144,p[n+201|0]=8421504,p[n+202|0]=32896,p[n+203|0]=128,p[n+204|0]=-2139062144,p[n+205|0]=8421504,p[n+206|0]=32896,p[n+207|0]=128,p[n+232|0]=-2139062144,p[n+233|0]=8421504,p[n+234|0]=32896,p[n+235|0]=128,p[n+236|0]=-2139062144,p[n+237|0]=8421504,p[n+238|0]=32896,p[n+239|0]=128,p[n+264|0]=-2139062144,p[n+265|0]=8421504,p[n+266|0]=32896,p[n+267|0]=128,p[n+268|0]=-2139062144,p[n+269|0]=8421504,p[n+270|0]=32896,p[n+271|0]=128,p[n+296|0]=-2139062144,p[n+297|0]=8421504,p[n+298|0]=32896,p[n+299|0]=128,p[n+300|0]=-2139062144,p[n+301|0]=8421504,p[n+302|0]=32896,p[n+303|0]=128,p[n+288|0]=-2139062144,p[n+289|0]=8421504,p[n+290|0]=32896,p[n+291|0]=128,p[n+292|0]=-2139062144,p[n+293|0]=8421504,p[n+294|0]=32896,p[n+295|0]=128,p[n+328|0]=-2139062144,p[n+329|0]=8421504,p[n+330|0]=32896,p[n+331|0]=128,p[n+332|0]=-2139062144,p[n+333|0]=8421504,p[n+334|0]=32896,p[n+335|0]=128,p[n+320|0]=-2139062144,p[n+321|0]=8421504,p[n+322|0]=32896,p[n+323|0]=128,p[n+324|0]=-2139062144,p[n+325|0]=8421504,p[n+326|0]=32896,p[n+327|0]=128,p[n+360|0]=-2139062144,p[n+361|0]=8421504,p[n+362|0]=32896,p[n+363|0]=128,p[n+364|0]=-2139062144,p[n+365|0]=8421504,p[n+366|0]=32896,p[n+367|0]=128,p[n+352|0]=-2139062144,p[n+353|0]=8421504,p[n+354|0]=32896,p[n+355|0]=128,p[n+356|0]=-2139062144,p[n+357|0]=8421504,p[n+358|0]=32896,p[n+359|0]=128,p[n+392|0]=-2139062144,p[n+393|0]=8421504,p[n+394|0]=32896,p[n+395|0]=128,p[n+396|0]=-2139062144,p[n+397|0]=8421504,p[n+398|0]=32896,p[n+399|0]=128,p[n+384|0]=-2139062144,p[n+385|0]=8421504,p[n+386|0]=32896,p[n+387|0]=128,p[n+388|0]=-2139062144,p[n+389|0]=8421504,p[n+390|0]=32896,p[n+391|0]=128,p[n+424|0]=-2139062144,p[n+425|0]=8421504,p[n+426|0]=32896,p[n+427|0]=128,p[n+428|0]=-2139062144,p[n+429|0]=8421504,p[n+430|0]=32896,p[n+431|0]=128,p[n+416|0]=-2139062144,p[n+417|0]=8421504,p[n+418|0]=32896,p[n+419|0]=128,p[n+420|0]=-2139062144,p[n+421|0]=8421504,p[n+422|0]=32896,p[n+423|0]=128,p[n+456|0]=-2139062144,p[n+457|0]=8421504,p[n+458|0]=32896,p[n+459|0]=128,p[n+460|0]=-2139062144,p[n+461|0]=8421504,p[n+462|0]=32896,p[n+463|0]=128,p[n+448|0]=-2139062144,p[n+449|0]=8421504,p[n+450|0]=32896,p[n+451|0]=128,p[n+452|0]=-2139062144,p[n+453|0]=8421504,p[n+454|0]=32896,p[n+455|0]=128,p[n+488|0]=-2139062144,p[n+489|0]=8421504,p[n+490|0]=32896,p[n+491|0]=128,p[n+492|0]=-2139062144,p[n+493|0]=8421504,p[n+494|0]=32896,p[n+495|0]=128,p[n+480|0]=-2139062144,p[n+481|0]=8421504,p[n+482|0]=32896,p[n+483|0]=128,p[n+484|0]=-2139062144,p[n+485|0]=8421504,p[n+486|0]=32896,p[n+487|0]=128}function Ue(n){n=n|0;var s=0,a=0,g=0,k=0,E=0,L=0;s=n,E=s+-32|0,g=E,k=F[g+4|0]|F[g+5|0]<<8|(F[g+6|0]<<16|F[g+7|0]<<24),n=F[g|0]|F[g+1|0]<<8|(F[g+2|0]<<16|F[g+3|0]<<24),a=n,p[s|0]=a,p[s+1|0]=a>>>8,p[s+2|0]=a>>>16,p[s+3|0]=a>>>24,p[s+4|0]=k,p[s+5|0]=k>>>8,p[s+6|0]=k>>>16,p[s+7|0]=k>>>24,p[s+32|0]=a,p[s+33|0]=a>>>8,p[s+34|0]=a>>>16,p[s+35|0]=a>>>24,p[s+36|0]=k,p[s+37|0]=k>>>8,p[s+38|0]=k>>>16,p[s+39|0]=k>>>24,p[s+64|0]=a,p[s+65|0]=a>>>8,p[s+66|0]=a>>>16,p[s+67|0]=a>>>24,p[s+68|0]=k,p[s+69|0]=k>>>8,p[s+70|0]=k>>>16,p[s+71|0]=k>>>24,p[s+96|0]=a,p[s+97|0]=a>>>8,p[s+98|0]=a>>>16,p[s+99|0]=a>>>24,p[s+100|0]=k,p[s+101|0]=k>>>8,p[s+102|0]=k>>>16,p[s+103|0]=k>>>24,p[s+128|0]=a,p[s+129|0]=a>>>8,p[s+130|0]=a>>>16,p[s+131|0]=a>>>24,p[s+132|0]=k,p[s+133|0]=k>>>8,p[s+134|0]=k>>>16,p[s+135|0]=k>>>24,p[s+160|0]=a,p[s+161|0]=a>>>8,p[s+162|0]=a>>>16,p[s+163|0]=a>>>24,p[s+164|0]=k,p[s+165|0]=k>>>8,p[s+166|0]=k>>>16,p[s+167|0]=k>>>24,p[s+192|0]=a,p[s+193|0]=a>>>8,p[s+194|0]=a>>>16,p[s+195|0]=a>>>24,p[s+196|0]=k,p[s+197|0]=k>>>8,p[s+198|0]=k>>>16,p[s+199|0]=k>>>24,p[s+224|0]=a,p[s+225|0]=a>>>8,p[s+226|0]=a>>>16,p[s+227|0]=a>>>24,p[s+228|0]=k,p[s+229|0]=k>>>8,p[s+230|0]=k>>>16,p[s+231|0]=k>>>24,k=g+8|0,g=F[k+4|0]|F[k+5|0]<<8|(F[k+6|0]<<16|F[k+7|0]<<24),n=F[k|0]|F[k+1|0]<<8|(F[k+2|0]<<16|F[k+3|0]<<24),a=n,p[s+8|0]=a,p[s+9|0]=a>>>8,p[s+10|0]=a>>>16,p[s+11|0]=a>>>24,p[s+12|0]=g,p[s+13|0]=g>>>8,p[s+14|0]=g>>>16,p[s+15|0]=g>>>24,p[s+40|0]=a,p[s+41|0]=a>>>8,p[s+42|0]=a>>>16,p[s+43|0]=a>>>24,p[s+44|0]=g,p[s+45|0]=g>>>8,p[s+46|0]=g>>>16,p[s+47|0]=g>>>24,p[s+72|0]=a,p[s+73|0]=a>>>8,p[s+74|0]=a>>>16,p[s+75|0]=a>>>24,p[s+76|0]=g,p[s+77|0]=g>>>8,p[s+78|0]=g>>>16,p[s+79|0]=g>>>24,p[s+104|0]=a,p[s+105|0]=a>>>8,p[s+106|0]=a>>>16,p[s+107|0]=a>>>24,p[s+108|0]=g,p[s+109|0]=g>>>8,p[s+110|0]=g>>>16,p[s+111|0]=g>>>24,p[s+136|0]=a,p[s+137|0]=a>>>8,p[s+138|0]=a>>>16,p[s+139|0]=a>>>24,p[s+140|0]=g,p[s+141|0]=g>>>8,p[s+142|0]=g>>>16,p[s+143|0]=g>>>24,p[s+168|0]=a,p[s+169|0]=a>>>8,p[s+170|0]=a>>>16,p[s+171|0]=a>>>24,p[s+172|0]=g,p[s+173|0]=g>>>8,p[s+174|0]=g>>>16,p[s+175|0]=g>>>24,p[s+200|0]=a,p[s+201|0]=a>>>8,p[s+202|0]=a>>>16,p[s+203|0]=a>>>24,p[s+204|0]=g,p[s+205|0]=g>>>8,p[s+206|0]=g>>>16,p[s+207|0]=g>>>24,p[s+232|0]=a,p[s+233|0]=a>>>8,p[s+234|0]=a>>>16,p[s+235|0]=a>>>24,p[s+236|0]=g,p[s+237|0]=g>>>8,p[s+238|0]=g>>>16,p[s+239|0]=g>>>24,g=F[k+4|0]|F[k+5|0]<<8|(F[k+6|0]<<16|F[k+7|0]<<24),L=g,a=F[k|0]|F[k+1|0]<<8|(F[k+2|0]<<16|F[k+3|0]<<24),p[s+264|0]=a,p[s+265|0]=a>>>8,p[s+266|0]=a>>>16,p[s+267|0]=a>>>24,p[s+268|0]=g,p[s+269|0]=g>>>8,p[s+270|0]=g>>>16,p[s+271|0]=g>>>24,g=F[E+4|0]|F[E+5|0]<<8|(F[E+6|0]<<16|F[E+7|0]<<24),n=F[E|0]|F[E+1|0]<<8|(F[E+2|0]<<16|F[E+3|0]<<24),E=n,p[s+256|0]=E,p[s+257|0]=E>>>8,p[s+258|0]=E>>>16,p[s+259|0]=E>>>24,p[s+260|0]=g,p[s+261|0]=g>>>8,p[s+262|0]=g>>>16,p[s+263|0]=g>>>24,p[s+296|0]=a,p[s+297|0]=a>>>8,p[s+298|0]=a>>>16,p[s+299|0]=a>>>24,p[s+300|0]=L,p[s+301|0]=L>>>8,p[s+302|0]=L>>>16,p[s+303|0]=L>>>24,p[s+288|0]=E,p[s+289|0]=E>>>8,p[s+290|0]=E>>>16,p[s+291|0]=E>>>24,p[s+292|0]=g,p[s+293|0]=g>>>8,p[s+294|0]=g>>>16,p[s+295|0]=g>>>24,p[s+328|0]=a,p[s+329|0]=a>>>8,p[s+330|0]=a>>>16,p[s+331|0]=a>>>24,p[s+332|0]=L,p[s+333|0]=L>>>8,p[s+334|0]=L>>>16,p[s+335|0]=L>>>24,p[s+320|0]=E,p[s+321|0]=E>>>8,p[s+322|0]=E>>>16,p[s+323|0]=E>>>24,p[s+324|0]=g,p[s+325|0]=g>>>8,p[s+326|0]=g>>>16,p[s+327|0]=g>>>24,p[s+360|0]=a,p[s+361|0]=a>>>8,p[s+362|0]=a>>>16,p[s+363|0]=a>>>24,p[s+364|0]=L,p[s+365|0]=L>>>8,p[s+366|0]=L>>>16,p[s+367|0]=L>>>24,p[s+352|0]=E,p[s+353|0]=E>>>8,p[s+354|0]=E>>>16,p[s+355|0]=E>>>24,p[s+356|0]=g,p[s+357|0]=g>>>8,p[s+358|0]=g>>>16,p[s+359|0]=g>>>24,p[s+384|0]=E,p[s+385|0]=E>>>8,p[s+386|0]=E>>>16,p[s+387|0]=E>>>24,p[s+388|0]=g,p[s+389|0]=g>>>8,p[s+390|0]=g>>>16,p[s+391|0]=g>>>24,p[s+392|0]=a,p[s+393|0]=a>>>8,p[s+394|0]=a>>>16,p[s+395|0]=a>>>24,p[s+396|0]=L,p[s+397|0]=L>>>8,p[s+398|0]=L>>>16,p[s+399|0]=L>>>24,p[s+424|0]=a,p[s+425|0]=a>>>8,p[s+426|0]=a>>>16,p[s+427|0]=a>>>24,p[s+428|0]=L,p[s+429|0]=L>>>8,p[s+430|0]=L>>>16,p[s+431|0]=L>>>24,p[s+416|0]=E,p[s+417|0]=E>>>8,p[s+418|0]=E>>>16,p[s+419|0]=E>>>24,p[s+420|0]=g,p[s+421|0]=g>>>8,p[s+422|0]=g>>>16,p[s+423|0]=g>>>24,p[s+448|0]=E,p[s+449|0]=E>>>8,p[s+450|0]=E>>>16,p[s+451|0]=E>>>24,p[s+452|0]=g,p[s+453|0]=g>>>8,p[s+454|0]=g>>>16,p[s+455|0]=g>>>24,p[s+456|0]=a,p[s+457|0]=a>>>8,p[s+458|0]=a>>>16,p[s+459|0]=a>>>24,p[s+460|0]=L,p[s+461|0]=L>>>8,p[s+462|0]=L>>>16,p[s+463|0]=L>>>24,p[s+488|0]=a,p[s+489|0]=a>>>8,p[s+490|0]=a>>>16,p[s+491|0]=a>>>24,p[s+492|0]=L,p[s+493|0]=L>>>8,p[s+494|0]=L>>>16,p[s+495|0]=L>>>24,p[s+480|0]=E,p[s+481|0]=E>>>8,p[s+482|0]=E>>>16,p[s+483|0]=E>>>24,p[s+484|0]=g,p[s+485|0]=g>>>8,p[s+486|0]=g>>>16,p[s+487|0]=g>>>24}function At(n,s,a,g,k){var E=0,L=0,R=0,G=0,H=0,ee=0,ce=0,Ae=0,Ne=0,Ze=0,mt=0,Tt=0,Ot=0,ni=0,ci=0;E=Nn-80|0,Nn=E,c[E+76>>2]=s,ci=E+55|0,Tt=E+56|0,s=0;e:{t:for(;;){i:{if((Ne|0)<0)break i;if((s|0)>(2147483647-Ne|0)){c[2865]=61,Ne=-1;break i}Ne=s+Ne|0}i:{n:{o:{if(G=c[E+76>>2],s=G,L=F[s|0],L)for(;;){l:{L=L&255;r:{if(!L){L=s;break r}if((L|0)!=37)break l;for(L=s;;){if(F[s+1|0]!=37)break r;if(R=s+2|0,c[E+76>>2]=R,L=L+1|0,H=F[s+2|0],s=R,(H|0)!=37)break}}if(s=L-G|0,n&&Gh(n,G,s),s)continue t;L=E,R=!Tf(p[c[E+76>>2]+1|0]),s=c[E+76>>2];r:{if(!(R|F[s+2|0]!=36)){mt=p[s+1|0]+-48|0,Ot=1,s=s+3|0;break r}mt=-1,s=s+1|0}c[L+76>>2]=s,ee=0,Ze=p[s|0],R=Ze+-32|0;r:{if(R>>>0>31){L=s;break r}if(L=s,R=1<<R,!(R&75913))break r;for(;;){if(L=s+1|0,c[E+76>>2]=L,ee=R|ee,Ze=p[s+1|0],R=Ze+-32|0,R>>>0>=32)break r;if(s=L,R=1<<R,!(R&75913))break}}r:{if((Ze|0)==42){R=E;u:{s:{if(!Tf(p[L+1|0])||(s=c[E+76>>2],F[s+2|0]!=36))break s;c[((p[s+1|0]<<2)+k|0)+-192>>2]=10,ce=c[((p[s+1|0]<<3)+g|0)+-384>>2],Ot=1,s=s+3|0;break u}if(Ot)break o;Ot=0,ce=0,n&&(s=c[a>>2],c[a>>2]=s+4,ce=c[s>>2]),s=c[E+76>>2]+1|0}if(c[R+76>>2]=s,(ce|0)>-1)break r;ce=0-ce|0,ee=ee|8192;break r}if(ce=Js(E+76|0),(ce|0)<0)break o;s=c[E+76>>2]}H=-1;r:{if(F[s|0]!=46)break r;if(F[s+1|0]==42){u:{if(!Tf(p[s+2|0])||(s=c[E+76>>2],F[s+3|0]!=36))break u;c[((p[s+2|0]<<2)+k|0)+-192>>2]=10,H=c[((p[s+2|0]<<3)+g|0)+-384>>2],s=s+4|0,c[E+76>>2]=s;break r}if(Ot)break o;n?(s=c[a>>2],c[a>>2]=s+4,H=c[s>>2]):H=0,s=c[E+76>>2]+2|0,c[E+76>>2]=s;break r}c[E+76>>2]=s+1,H=Js(E+76|0),s=c[E+76>>2]}for(L=0;;){if(ni=L,Ae=-1,p[s|0]+-65>>>0>57)break e;if(Ze=s+1|0,c[E+76>>2]=Ze,L=p[s|0],s=Ze,L=F[(L+re(ni,58)|0)+9599|0],!(L+-1>>>0<8))break}r:{u:{if((L|0)!=19){if(!L)break e;if((mt|0)>=0){c[(mt<<2)+k>>2]=L,s=(mt<<3)+g|0,L=c[s+4>>2],c[E+64>>2]=c[s>>2],c[E+68>>2]=L;break u}if(!n)break i;wu(E- -64|0,L,a),Ze=c[E+76>>2];break r}if((mt|0)>-1)break e}if(s=0,!n)continue t}R=ee&-65537,L=ee&8192?R:ee,Ae=0,mt=9644,ee=Tt;r:{u:{s:{a:{f:{c:{h:{d:{p:{m:{_:{v:{b:{g:{w:{y:switch(s=p[Ze+-1|0],s=ni&&(s&15)==3?s&-33:s,s+-88|0){case 11:break r;case 9:case 13:case 14:case 15:break u;case 27:break h;case 12:case 17:break m;case 23:break _;case 0:case 32:break v;case 24:break b;case 22:break g;case 29:break w;case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 10:case 16:case 18:case 19:case 20:case 21:case 25:case 26:case 28:case 30:case 31:break n;default:break y}y:switch(s+-65|0){case 0:case 4:case 5:case 6:break u;case 2:break f;case 1:case 3:break n;default:break y}if((s|0)==83)break c;break n}s=c[E+64>>2],G=c[E+68>>2],mt=9644;break p}s=0;g:switch(ni&255){case 0:c[c[E+64>>2]>>2]=Ne;continue t;case 1:c[c[E+64>>2]>>2]=Ne;continue t;case 2:L=c[E+64>>2],c[L>>2]=Ne,c[L+4>>2]=Ne>>31;continue t;case 3:Di[c[E+64>>2]>>1]=Ne;continue t;case 4:p[c[E+64>>2]]=Ne;continue t;case 6:c[c[E+64>>2]>>2]=Ne;continue t;case 7:break g;default:continue t}L=c[E+64>>2],c[L>>2]=Ne,c[L+4>>2]=Ne>>31;continue t}H=H>>>0>8?H:8,L=L|8,s=120}if(G=dh(c[E+64>>2],c[E+68>>2],Tt,s&32),!(L&8)|!(c[E+64>>2]|c[E+68>>2]))break d;mt=(s>>>4|0)+9644|0,Ae=2;break d}if(G=a0(c[E+64>>2],c[E+68>>2],Tt),!(L&8))break d;s=Tt-G|0,H=(H|0)>(s|0)?H:s+1|0;break d}if(R=c[E+68>>2],G=R,s=c[E+64>>2],(R|0)<-1||(R|0)<=-1){G=0-(G+(0<s>>>0)|0)|0,s=0-s|0,c[E+64>>2]=s,c[E+68>>2]=G,Ae=1,mt=9644;break p}if(L&2048){Ae=1,mt=9645;break p}Ae=L&1,mt=Ae?9646:9644}G=Hi(s,G,Tt)}if(L=(H|0)>-1?L&-65537:L,s=c[E+64>>2],R=c[E+68>>2],!(!!(s|R)|H)){H=0,G=Tt;break n}s=!(s|R)+(Tt-G|0)|0,H=(H|0)>(s|0)?H:s;break n}s=c[E+64>>2],G=s||9654,s=xi(G,H),ee=s||H+G|0,L=R,H=s?s-G|0:H;break n}if(R=c[E+64>>2],H)break a;s=0,jo(n,32,ce,0,L);break s}c[E+12>>2]=0,c[E+8>>2]=c[E+64>>2],c[E+64>>2]=E+8,H=-1,R=E+8|0}s=0;a:{for(;;){if(G=c[R>>2],!G)break a;if(G=dp(E+4|0,G),ee=(G|0)<0,!(ee|G>>>0>H-s>>>0)){if(R=R+4|0,s=s+G|0,H>>>0>s>>>0)continue;break a}break}if(Ae=-1,ee)break e}if(jo(n,32,ce,s,L),!s){s=0;break s}for(Ze=0,R=c[E+64>>2];;){if(G=c[R>>2],!G||(G=dp(E+4|0,G),Ze=G+Ze|0,(Ze|0)>(s|0)))break s;if(Gh(n,E+4|0,G),R=R+4|0,!(Ze>>>0<s>>>0))break}}jo(n,32,ce,s,L^8192),s=(ce|0)>(s|0)?ce:s;continue t}s=ft[0](n,Ao[E+64>>3],ce,H,L,s)|0;continue t}p[E+55|0]=c[E+64>>2],H=1,G=ci,L=R;break n}R=s+1|0,c[E+76>>2]=R,L=F[s+1|0],s=R}if(Ae=Ne,n)break e;if(!Ot)break i;for(s=1;;){if(n=c[(s<<2)+k>>2],n){if(wu((s<<3)+g|0,n,a),Ae=1,s=s+1|0,(s|0)!=10)continue;break e}break}if(Ae=1,s>>>0>=10)break e;for(;;){if(c[(s<<2)+k>>2])break o;if(s=s+1|0,(s|0)==10)break}break e}Ae=-1;break e}ee=ee-G|0,H=(H|0)<(ee|0)?ee:H,R=H+Ae|0,s=(ce|0)<(R|0)?R:ce,jo(n,32,s,R,L),Gh(n,mt,Ae),jo(n,48,s,R,L^65536),jo(n,48,H,ee,0),Gh(n,G,ee),jo(n,32,s,R,L^8192);continue}break}Ae=0}return Nn=E+80|0,Ae}function Jt(n){n=n|0;var s=0,a=0;s=n,n=_r((F[s+-17|0]+(F[s+-18|0]+(F[s+-19|0]+(F[s+-20|0]+(F[s+-21|0]+(F[s+-22|0]+(F[s+-23|0]+(F[s+-24|0]+(F[s+-25|0]+(F[s+-26|0]+(F[s+-27|0]+(F[s+-28|0]+(F[s+-29|0]+(F[s+-30|0]+(F[s+-32|0]+F[s+-31|0]|0)|0)|0)|0)|0)|0)|0)|0)|0)|0)|0)|0)|0)|0)|0)+8>>>4&255,0,16843009,16843009),p[s|0]=n,p[s+1|0]=n>>>8,p[s+2|0]=n>>>16,p[s+3|0]=n>>>24,a=Fn,p[s+4|0]=a,p[s+5|0]=a>>>8,p[s+6|0]=a>>>16,p[s+7|0]=a>>>24,p[s+8|0]=n,p[s+9|0]=n>>>8,p[s+10|0]=n>>>16,p[s+11|0]=n>>>24,p[s+12|0]=a,p[s+13|0]=a>>>8,p[s+14|0]=a>>>16,p[s+15|0]=a>>>24,p[s+40|0]=n,p[s+41|0]=n>>>8,p[s+42|0]=n>>>16,p[s+43|0]=n>>>24,p[s+44|0]=a,p[s+45|0]=a>>>8,p[s+46|0]=a>>>16,p[s+47|0]=a>>>24,p[s+32|0]=n,p[s+33|0]=n>>>8,p[s+34|0]=n>>>16,p[s+35|0]=n>>>24,p[s+36|0]=a,p[s+37|0]=a>>>8,p[s+38|0]=a>>>16,p[s+39|0]=a>>>24,p[s+72|0]=n,p[s+73|0]=n>>>8,p[s+74|0]=n>>>16,p[s+75|0]=n>>>24,p[s+76|0]=a,p[s+77|0]=a>>>8,p[s+78|0]=a>>>16,p[s+79|0]=a>>>24,p[s+64|0]=n,p[s+65|0]=n>>>8,p[s+66|0]=n>>>16,p[s+67|0]=n>>>24,p[s+68|0]=a,p[s+69|0]=a>>>8,p[s+70|0]=a>>>16,p[s+71|0]=a>>>24,p[s+104|0]=n,p[s+105|0]=n>>>8,p[s+106|0]=n>>>16,p[s+107|0]=n>>>24,p[s+108|0]=a,p[s+109|0]=a>>>8,p[s+110|0]=a>>>16,p[s+111|0]=a>>>24,p[s+96|0]=n,p[s+97|0]=n>>>8,p[s+98|0]=n>>>16,p[s+99|0]=n>>>24,p[s+100|0]=a,p[s+101|0]=a>>>8,p[s+102|0]=a>>>16,p[s+103|0]=a>>>24,p[s+136|0]=n,p[s+137|0]=n>>>8,p[s+138|0]=n>>>16,p[s+139|0]=n>>>24,p[s+140|0]=a,p[s+141|0]=a>>>8,p[s+142|0]=a>>>16,p[s+143|0]=a>>>24,p[s+128|0]=n,p[s+129|0]=n>>>8,p[s+130|0]=n>>>16,p[s+131|0]=n>>>24,p[s+132|0]=a,p[s+133|0]=a>>>8,p[s+134|0]=a>>>16,p[s+135|0]=a>>>24,p[s+168|0]=n,p[s+169|0]=n>>>8,p[s+170|0]=n>>>16,p[s+171|0]=n>>>24,p[s+172|0]=a,p[s+173|0]=a>>>8,p[s+174|0]=a>>>16,p[s+175|0]=a>>>24,p[s+160|0]=n,p[s+161|0]=n>>>8,p[s+162|0]=n>>>16,p[s+163|0]=n>>>24,p[s+164|0]=a,p[s+165|0]=a>>>8,p[s+166|0]=a>>>16,p[s+167|0]=a>>>24,p[s+200|0]=n,p[s+201|0]=n>>>8,p[s+202|0]=n>>>16,p[s+203|0]=n>>>24,p[s+204|0]=a,p[s+205|0]=a>>>8,p[s+206|0]=a>>>16,p[s+207|0]=a>>>24,p[s+192|0]=n,p[s+193|0]=n>>>8,p[s+194|0]=n>>>16,p[s+195|0]=n>>>24,p[s+196|0]=a,p[s+197|0]=a>>>8,p[s+198|0]=a>>>16,p[s+199|0]=a>>>24,p[s+232|0]=n,p[s+233|0]=n>>>8,p[s+234|0]=n>>>16,p[s+235|0]=n>>>24,p[s+236|0]=a,p[s+237|0]=a>>>8,p[s+238|0]=a>>>16,p[s+239|0]=a>>>24,p[s+224|0]=n,p[s+225|0]=n>>>8,p[s+226|0]=n>>>16,p[s+227|0]=n>>>24,p[s+228|0]=a,p[s+229|0]=a>>>8,p[s+230|0]=a>>>16,p[s+231|0]=a>>>24,p[s+264|0]=n,p[s+265|0]=n>>>8,p[s+266|0]=n>>>16,p[s+267|0]=n>>>24,p[s+268|0]=a,p[s+269|0]=a>>>8,p[s+270|0]=a>>>16,p[s+271|0]=a>>>24,p[s+256|0]=n,p[s+257|0]=n>>>8,p[s+258|0]=n>>>16,p[s+259|0]=n>>>24,p[s+260|0]=a,p[s+261|0]=a>>>8,p[s+262|0]=a>>>16,p[s+263|0]=a>>>24,p[s+296|0]=n,p[s+297|0]=n>>>8,p[s+298|0]=n>>>16,p[s+299|0]=n>>>24,p[s+300|0]=a,p[s+301|0]=a>>>8,p[s+302|0]=a>>>16,p[s+303|0]=a>>>24,p[s+288|0]=n,p[s+289|0]=n>>>8,p[s+290|0]=n>>>16,p[s+291|0]=n>>>24,p[s+292|0]=a,p[s+293|0]=a>>>8,p[s+294|0]=a>>>16,p[s+295|0]=a>>>24,p[s+328|0]=n,p[s+329|0]=n>>>8,p[s+330|0]=n>>>16,p[s+331|0]=n>>>24,p[s+332|0]=a,p[s+333|0]=a>>>8,p[s+334|0]=a>>>16,p[s+335|0]=a>>>24,p[s+320|0]=n,p[s+321|0]=n>>>8,p[s+322|0]=n>>>16,p[s+323|0]=n>>>24,p[s+324|0]=a,p[s+325|0]=a>>>8,p[s+326|0]=a>>>16,p[s+327|0]=a>>>24,p[s+360|0]=n,p[s+361|0]=n>>>8,p[s+362|0]=n>>>16,p[s+363|0]=n>>>24,p[s+364|0]=a,p[s+365|0]=a>>>8,p[s+366|0]=a>>>16,p[s+367|0]=a>>>24,p[s+352|0]=n,p[s+353|0]=n>>>8,p[s+354|0]=n>>>16,p[s+355|0]=n>>>24,p[s+356|0]=a,p[s+357|0]=a>>>8,p[s+358|0]=a>>>16,p[s+359|0]=a>>>24,p[s+392|0]=n,p[s+393|0]=n>>>8,p[s+394|0]=n>>>16,p[s+395|0]=n>>>24,p[s+396|0]=a,p[s+397|0]=a>>>8,p[s+398|0]=a>>>16,p[s+399|0]=a>>>24,p[s+384|0]=n,p[s+385|0]=n>>>8,p[s+386|0]=n>>>16,p[s+387|0]=n>>>24,p[s+388|0]=a,p[s+389|0]=a>>>8,p[s+390|0]=a>>>16,p[s+391|0]=a>>>24,p[s+424|0]=n,p[s+425|0]=n>>>8,p[s+426|0]=n>>>16,p[s+427|0]=n>>>24,p[s+428|0]=a,p[s+429|0]=a>>>8,p[s+430|0]=a>>>16,p[s+431|0]=a>>>24,p[s+416|0]=n,p[s+417|0]=n>>>8,p[s+418|0]=n>>>16,p[s+419|0]=n>>>24,p[s+420|0]=a,p[s+421|0]=a>>>8,p[s+422|0]=a>>>16,p[s+423|0]=a>>>24,p[s+456|0]=n,p[s+457|0]=n>>>8,p[s+458|0]=n>>>16,p[s+459|0]=n>>>24,p[s+460|0]=a,p[s+461|0]=a>>>8,p[s+462|0]=a>>>16,p[s+463|0]=a>>>24,p[s+448|0]=n,p[s+449|0]=n>>>8,p[s+450|0]=n>>>16,p[s+451|0]=n>>>24,p[s+452|0]=a,p[s+453|0]=a>>>8,p[s+454|0]=a>>>16,p[s+455|0]=a>>>24,p[s+488|0]=n,p[s+489|0]=n>>>8,p[s+490|0]=n>>>16,p[s+491|0]=n>>>24,p[s+492|0]=a,p[s+493|0]=a>>>8,p[s+494|0]=a>>>16,p[s+495|0]=a>>>24,p[s+480|0]=n,p[s+481|0]=n>>>8,p[s+482|0]=n>>>16,p[s+483|0]=n>>>24,p[s+484|0]=a,p[s+485|0]=a>>>8,p[s+486|0]=a>>>16,p[s+487|0]=a>>>24}function hi(n){n=n|0;var s=0,a=0;s=n,n=_r((F[s+479|0]+(F[s+447|0]+(F[s+415|0]+(F[s+383|0]+(F[s+351|0]+(F[s+319|0]+(F[s+287|0]+(F[s+255|0]+(F[s+223|0]+(F[s+191|0]+(F[s+159|0]+(F[s+127|0]+(F[s+95|0]+(F[s+63|0]+(F[s+-1|0]+F[s+31|0]|0)|0)|0)|0)|0)|0)|0)|0)|0)|0)|0)|0)|0)|0)|0)+8>>>4&255,0,16843009,16843009),p[s|0]=n,p[s+1|0]=n>>>8,p[s+2|0]=n>>>16,p[s+3|0]=n>>>24,a=Fn,p[s+4|0]=a,p[s+5|0]=a>>>8,p[s+6|0]=a>>>16,p[s+7|0]=a>>>24,p[s+8|0]=n,p[s+9|0]=n>>>8,p[s+10|0]=n>>>16,p[s+11|0]=n>>>24,p[s+12|0]=a,p[s+13|0]=a>>>8,p[s+14|0]=a>>>16,p[s+15|0]=a>>>24,p[s+40|0]=n,p[s+41|0]=n>>>8,p[s+42|0]=n>>>16,p[s+43|0]=n>>>24,p[s+44|0]=a,p[s+45|0]=a>>>8,p[s+46|0]=a>>>16,p[s+47|0]=a>>>24,p[s+32|0]=n,p[s+33|0]=n>>>8,p[s+34|0]=n>>>16,p[s+35|0]=n>>>24,p[s+36|0]=a,p[s+37|0]=a>>>8,p[s+38|0]=a>>>16,p[s+39|0]=a>>>24,p[s+72|0]=n,p[s+73|0]=n>>>8,p[s+74|0]=n>>>16,p[s+75|0]=n>>>24,p[s+76|0]=a,p[s+77|0]=a>>>8,p[s+78|0]=a>>>16,p[s+79|0]=a>>>24,p[s+64|0]=n,p[s+65|0]=n>>>8,p[s+66|0]=n>>>16,p[s+67|0]=n>>>24,p[s+68|0]=a,p[s+69|0]=a>>>8,p[s+70|0]=a>>>16,p[s+71|0]=a>>>24,p[s+104|0]=n,p[s+105|0]=n>>>8,p[s+106|0]=n>>>16,p[s+107|0]=n>>>24,p[s+108|0]=a,p[s+109|0]=a>>>8,p[s+110|0]=a>>>16,p[s+111|0]=a>>>24,p[s+96|0]=n,p[s+97|0]=n>>>8,p[s+98|0]=n>>>16,p[s+99|0]=n>>>24,p[s+100|0]=a,p[s+101|0]=a>>>8,p[s+102|0]=a>>>16,p[s+103|0]=a>>>24,p[s+136|0]=n,p[s+137|0]=n>>>8,p[s+138|0]=n>>>16,p[s+139|0]=n>>>24,p[s+140|0]=a,p[s+141|0]=a>>>8,p[s+142|0]=a>>>16,p[s+143|0]=a>>>24,p[s+128|0]=n,p[s+129|0]=n>>>8,p[s+130|0]=n>>>16,p[s+131|0]=n>>>24,p[s+132|0]=a,p[s+133|0]=a>>>8,p[s+134|0]=a>>>16,p[s+135|0]=a>>>24,p[s+168|0]=n,p[s+169|0]=n>>>8,p[s+170|0]=n>>>16,p[s+171|0]=n>>>24,p[s+172|0]=a,p[s+173|0]=a>>>8,p[s+174|0]=a>>>16,p[s+175|0]=a>>>24,p[s+160|0]=n,p[s+161|0]=n>>>8,p[s+162|0]=n>>>16,p[s+163|0]=n>>>24,p[s+164|0]=a,p[s+165|0]=a>>>8,p[s+166|0]=a>>>16,p[s+167|0]=a>>>24,p[s+200|0]=n,p[s+201|0]=n>>>8,p[s+202|0]=n>>>16,p[s+203|0]=n>>>24,p[s+204|0]=a,p[s+205|0]=a>>>8,p[s+206|0]=a>>>16,p[s+207|0]=a>>>24,p[s+192|0]=n,p[s+193|0]=n>>>8,p[s+194|0]=n>>>16,p[s+195|0]=n>>>24,p[s+196|0]=a,p[s+197|0]=a>>>8,p[s+198|0]=a>>>16,p[s+199|0]=a>>>24,p[s+232|0]=n,p[s+233|0]=n>>>8,p[s+234|0]=n>>>16,p[s+235|0]=n>>>24,p[s+236|0]=a,p[s+237|0]=a>>>8,p[s+238|0]=a>>>16,p[s+239|0]=a>>>24,p[s+224|0]=n,p[s+225|0]=n>>>8,p[s+226|0]=n>>>16,p[s+227|0]=n>>>24,p[s+228|0]=a,p[s+229|0]=a>>>8,p[s+230|0]=a>>>16,p[s+231|0]=a>>>24,p[s+264|0]=n,p[s+265|0]=n>>>8,p[s+266|0]=n>>>16,p[s+267|0]=n>>>24,p[s+268|0]=a,p[s+269|0]=a>>>8,p[s+270|0]=a>>>16,p[s+271|0]=a>>>24,p[s+256|0]=n,p[s+257|0]=n>>>8,p[s+258|0]=n>>>16,p[s+259|0]=n>>>24,p[s+260|0]=a,p[s+261|0]=a>>>8,p[s+262|0]=a>>>16,p[s+263|0]=a>>>24,p[s+296|0]=n,p[s+297|0]=n>>>8,p[s+298|0]=n>>>16,p[s+299|0]=n>>>24,p[s+300|0]=a,p[s+301|0]=a>>>8,p[s+302|0]=a>>>16,p[s+303|0]=a>>>24,p[s+288|0]=n,p[s+289|0]=n>>>8,p[s+290|0]=n>>>16,p[s+291|0]=n>>>24,p[s+292|0]=a,p[s+293|0]=a>>>8,p[s+294|0]=a>>>16,p[s+295|0]=a>>>24,p[s+328|0]=n,p[s+329|0]=n>>>8,p[s+330|0]=n>>>16,p[s+331|0]=n>>>24,p[s+332|0]=a,p[s+333|0]=a>>>8,p[s+334|0]=a>>>16,p[s+335|0]=a>>>24,p[s+320|0]=n,p[s+321|0]=n>>>8,p[s+322|0]=n>>>16,p[s+323|0]=n>>>24,p[s+324|0]=a,p[s+325|0]=a>>>8,p[s+326|0]=a>>>16,p[s+327|0]=a>>>24,p[s+360|0]=n,p[s+361|0]=n>>>8,p[s+362|0]=n>>>16,p[s+363|0]=n>>>24,p[s+364|0]=a,p[s+365|0]=a>>>8,p[s+366|0]=a>>>16,p[s+367|0]=a>>>24,p[s+352|0]=n,p[s+353|0]=n>>>8,p[s+354|0]=n>>>16,p[s+355|0]=n>>>24,p[s+356|0]=a,p[s+357|0]=a>>>8,p[s+358|0]=a>>>16,p[s+359|0]=a>>>24,p[s+392|0]=n,p[s+393|0]=n>>>8,p[s+394|0]=n>>>16,p[s+395|0]=n>>>24,p[s+396|0]=a,p[s+397|0]=a>>>8,p[s+398|0]=a>>>16,p[s+399|0]=a>>>24,p[s+384|0]=n,p[s+385|0]=n>>>8,p[s+386|0]=n>>>16,p[s+387|0]=n>>>24,p[s+388|0]=a,p[s+389|0]=a>>>8,p[s+390|0]=a>>>16,p[s+391|0]=a>>>24,p[s+424|0]=n,p[s+425|0]=n>>>8,p[s+426|0]=n>>>16,p[s+427|0]=n>>>24,p[s+428|0]=a,p[s+429|0]=a>>>8,p[s+430|0]=a>>>16,p[s+431|0]=a>>>24,p[s+416|0]=n,p[s+417|0]=n>>>8,p[s+418|0]=n>>>16,p[s+419|0]=n>>>24,p[s+420|0]=a,p[s+421|0]=a>>>8,p[s+422|0]=a>>>16,p[s+423|0]=a>>>24,p[s+456|0]=n,p[s+457|0]=n>>>8,p[s+458|0]=n>>>16,p[s+459|0]=n>>>24,p[s+460|0]=a,p[s+461|0]=a>>>8,p[s+462|0]=a>>>16,p[s+463|0]=a>>>24,p[s+448|0]=n,p[s+449|0]=n>>>8,p[s+450|0]=n>>>16,p[s+451|0]=n>>>24,p[s+452|0]=a,p[s+453|0]=a>>>8,p[s+454|0]=a>>>16,p[s+455|0]=a>>>24,p[s+488|0]=n,p[s+489|0]=n>>>8,p[s+490|0]=n>>>16,p[s+491|0]=n>>>24,p[s+492|0]=a,p[s+493|0]=a>>>8,p[s+494|0]=a>>>16,p[s+495|0]=a>>>24,p[s+480|0]=n,p[s+481|0]=n>>>8,p[s+482|0]=n>>>16,p[s+483|0]=n>>>24,p[s+484|0]=a,p[s+485|0]=a>>>8,p[s+486|0]=a>>>16,p[s+487|0]=a>>>24}function qi(n){n=n|0;var s=0,a=0;for(a=16;a=F[(n+s|0)+-32|0]+(F[((s<<5)+n|0)+-1|0]+a|0)|0,s=s+1|0,(s|0)!=16;);s=n,n=_r(a>>>5&255,0,16843009,16843009),a=n,p[s+8|0]=a,p[s+9|0]=a>>>8,p[s+10|0]=a>>>16,p[s+11|0]=a>>>24,n=Fn,p[s+12|0]=n,p[s+13|0]=n>>>8,p[s+14|0]=n>>>16,p[s+15|0]=n>>>24,p[s|0]=a,p[s+1|0]=a>>>8,p[s+2|0]=a>>>16,p[s+3|0]=a>>>24,p[s+4|0]=n,p[s+5|0]=n>>>8,p[s+6|0]=n>>>16,p[s+7|0]=n>>>24,p[s+32|0]=a,p[s+33|0]=a>>>8,p[s+34|0]=a>>>16,p[s+35|0]=a>>>24,p[s+36|0]=n,p[s+37|0]=n>>>8,p[s+38|0]=n>>>16,p[s+39|0]=n>>>24,p[s+40|0]=a,p[s+41|0]=a>>>8,p[s+42|0]=a>>>16,p[s+43|0]=a>>>24,p[s+44|0]=n,p[s+45|0]=n>>>8,p[s+46|0]=n>>>16,p[s+47|0]=n>>>24,p[s+64|0]=a,p[s+65|0]=a>>>8,p[s+66|0]=a>>>16,p[s+67|0]=a>>>24,p[s+68|0]=n,p[s+69|0]=n>>>8,p[s+70|0]=n>>>16,p[s+71|0]=n>>>24,p[s+72|0]=a,p[s+73|0]=a>>>8,p[s+74|0]=a>>>16,p[s+75|0]=a>>>24,p[s+76|0]=n,p[s+77|0]=n>>>8,p[s+78|0]=n>>>16,p[s+79|0]=n>>>24,p[s+96|0]=a,p[s+97|0]=a>>>8,p[s+98|0]=a>>>16,p[s+99|0]=a>>>24,p[s+100|0]=n,p[s+101|0]=n>>>8,p[s+102|0]=n>>>16,p[s+103|0]=n>>>24,p[s+104|0]=a,p[s+105|0]=a>>>8,p[s+106|0]=a>>>16,p[s+107|0]=a>>>24,p[s+108|0]=n,p[s+109|0]=n>>>8,p[s+110|0]=n>>>16,p[s+111|0]=n>>>24,p[s+128|0]=a,p[s+129|0]=a>>>8,p[s+130|0]=a>>>16,p[s+131|0]=a>>>24,p[s+132|0]=n,p[s+133|0]=n>>>8,p[s+134|0]=n>>>16,p[s+135|0]=n>>>24,p[s+136|0]=a,p[s+137|0]=a>>>8,p[s+138|0]=a>>>16,p[s+139|0]=a>>>24,p[s+140|0]=n,p[s+141|0]=n>>>8,p[s+142|0]=n>>>16,p[s+143|0]=n>>>24,p[s+160|0]=a,p[s+161|0]=a>>>8,p[s+162|0]=a>>>16,p[s+163|0]=a>>>24,p[s+164|0]=n,p[s+165|0]=n>>>8,p[s+166|0]=n>>>16,p[s+167|0]=n>>>24,p[s+168|0]=a,p[s+169|0]=a>>>8,p[s+170|0]=a>>>16,p[s+171|0]=a>>>24,p[s+172|0]=n,p[s+173|0]=n>>>8,p[s+174|0]=n>>>16,p[s+175|0]=n>>>24,p[s+192|0]=a,p[s+193|0]=a>>>8,p[s+194|0]=a>>>16,p[s+195|0]=a>>>24,p[s+196|0]=n,p[s+197|0]=n>>>8,p[s+198|0]=n>>>16,p[s+199|0]=n>>>24,p[s+200|0]=a,p[s+201|0]=a>>>8,p[s+202|0]=a>>>16,p[s+203|0]=a>>>24,p[s+204|0]=n,p[s+205|0]=n>>>8,p[s+206|0]=n>>>16,p[s+207|0]=n>>>24,p[s+232|0]=a,p[s+233|0]=a>>>8,p[s+234|0]=a>>>16,p[s+235|0]=a>>>24,p[s+236|0]=n,p[s+237|0]=n>>>8,p[s+238|0]=n>>>16,p[s+239|0]=n>>>24,p[s+224|0]=a,p[s+225|0]=a>>>8,p[s+226|0]=a>>>16,p[s+227|0]=a>>>24,p[s+228|0]=n,p[s+229|0]=n>>>8,p[s+230|0]=n>>>16,p[s+231|0]=n>>>24,p[s+264|0]=a,p[s+265|0]=a>>>8,p[s+266|0]=a>>>16,p[s+267|0]=a>>>24,p[s+268|0]=n,p[s+269|0]=n>>>8,p[s+270|0]=n>>>16,p[s+271|0]=n>>>24,p[s+256|0]=a,p[s+257|0]=a>>>8,p[s+258|0]=a>>>16,p[s+259|0]=a>>>24,p[s+260|0]=n,p[s+261|0]=n>>>8,p[s+262|0]=n>>>16,p[s+263|0]=n>>>24,p[s+296|0]=a,p[s+297|0]=a>>>8,p[s+298|0]=a>>>16,p[s+299|0]=a>>>24,p[s+300|0]=n,p[s+301|0]=n>>>8,p[s+302|0]=n>>>16,p[s+303|0]=n>>>24,p[s+288|0]=a,p[s+289|0]=a>>>8,p[s+290|0]=a>>>16,p[s+291|0]=a>>>24,p[s+292|0]=n,p[s+293|0]=n>>>8,p[s+294|0]=n>>>16,p[s+295|0]=n>>>24,p[s+328|0]=a,p[s+329|0]=a>>>8,p[s+330|0]=a>>>16,p[s+331|0]=a>>>24,p[s+332|0]=n,p[s+333|0]=n>>>8,p[s+334|0]=n>>>16,p[s+335|0]=n>>>24,p[s+320|0]=a,p[s+321|0]=a>>>8,p[s+322|0]=a>>>16,p[s+323|0]=a>>>24,p[s+324|0]=n,p[s+325|0]=n>>>8,p[s+326|0]=n>>>16,p[s+327|0]=n>>>24,p[s+360|0]=a,p[s+361|0]=a>>>8,p[s+362|0]=a>>>16,p[s+363|0]=a>>>24,p[s+364|0]=n,p[s+365|0]=n>>>8,p[s+366|0]=n>>>16,p[s+367|0]=n>>>24,p[s+352|0]=a,p[s+353|0]=a>>>8,p[s+354|0]=a>>>16,p[s+355|0]=a>>>24,p[s+356|0]=n,p[s+357|0]=n>>>8,p[s+358|0]=n>>>16,p[s+359|0]=n>>>24,p[s+392|0]=a,p[s+393|0]=a>>>8,p[s+394|0]=a>>>16,p[s+395|0]=a>>>24,p[s+396|0]=n,p[s+397|0]=n>>>8,p[s+398|0]=n>>>16,p[s+399|0]=n>>>24,p[s+384|0]=a,p[s+385|0]=a>>>8,p[s+386|0]=a>>>16,p[s+387|0]=a>>>24,p[s+388|0]=n,p[s+389|0]=n>>>8,p[s+390|0]=n>>>16,p[s+391|0]=n>>>24,p[s+424|0]=a,p[s+425|0]=a>>>8,p[s+426|0]=a>>>16,p[s+427|0]=a>>>24,p[s+428|0]=n,p[s+429|0]=n>>>8,p[s+430|0]=n>>>16,p[s+431|0]=n>>>24,p[s+416|0]=a,p[s+417|0]=a>>>8,p[s+418|0]=a>>>16,p[s+419|0]=a>>>24,p[s+420|0]=n,p[s+421|0]=n>>>8,p[s+422|0]=n>>>16,p[s+423|0]=n>>>24,p[s+456|0]=a,p[s+457|0]=a>>>8,p[s+458|0]=a>>>16,p[s+459|0]=a>>>24,p[s+460|0]=n,p[s+461|0]=n>>>8,p[s+462|0]=n>>>16,p[s+463|0]=n>>>24,p[s+448|0]=a,p[s+449|0]=a>>>8,p[s+450|0]=a>>>16,p[s+451|0]=a>>>24,p[s+452|0]=n,p[s+453|0]=n>>>8,p[s+454|0]=n>>>16,p[s+455|0]=n>>>24,p[s+488|0]=a,p[s+489|0]=a>>>8,p[s+490|0]=a>>>16,p[s+491|0]=a>>>24,p[s+492|0]=n,p[s+493|0]=n>>>8,p[s+494|0]=n>>>16,p[s+495|0]=n>>>24,p[s+480|0]=a,p[s+481|0]=a>>>8,p[s+482|0]=a>>>16,p[s+483|0]=a>>>24,p[s+484|0]=n,p[s+485|0]=n>>>8,p[s+486|0]=n>>>16,p[s+487|0]=n>>>24}function hn(n,s,a,g,k){var E=0,L=0,R=0,G=0,H=0,ee=0,ce=0,Ae=0,Ne=0,Ze=0,mt=0,Tt=0,Ot=0,ni=0,ci=0,Mi=0,ki=0,Gi=0,sn=0,vn=0,or=0,Ir=0,gs=0,wa=0,hl=0,Zu=0,Xh=0;ni=Nn-16|0,Nn=ni,mt=g+120|0,ce=g+24|0;e:{t:{i:{n:{o:{l:{r:{if(!a)break r;for(;;){if(!io(ce,1))break r;if(E=c[g+176>>2],Ze=io(ce,2),H=c[g+260>>2],R=1<<Ze,H&R)break l;c[g+260>>2]=R|H,E=re(E,20)+g|0,ee=E+196|0,c[ee>>2]=0,H=E+192|0,c[H>>2]=s,R=E+188|0,c[R>>2]=n,c[E+180>>2]=Ze,Ae=1,c[g+176>>2]=c[g+176>>2]+1;u:switch(Ze|0){case 0:case 1:if(ki=E,E=io(ce,3)+2|0,c[ki+184>>2]=E,ki=c[R>>2],R=-1<<E^-1,hn(ki+R>>>E|0,R+c[H>>2]>>>E|0,0,g,ee))continue;break l;case 3:L=io(ce,8)+1|0,n=0;s:{if((L|0)>16||(n=1,(L|0)>4))break s;n=(L|0)>2?2:3}if(H=c[R>>2],R=E+184|0,c[R>>2]=n,!hn(L,1,0,g,ee))break l;if(Ze=(H+(1<<n)|0)+-1|0,E=1<<(8>>>c[R>>2]),G=Ls(E,0,4),G){if(H=c[ee>>2],c[G>>2]=c[H>>2],Ae=4,(L|0)>=2)for(R=L<<2,Ae=(R|0)>5?R:5,L=4;R=L+G|0,p[R|0]=F[R+-4|0]+F[L+H|0],L=L+1|0,(Ae|0)!=(L|0););R=E<<2,(R|0)>(Ae|0)&&Jo(G+Ae|0,0,R-Ae|0),jr(c[ee>>2]),c[ee>>2]=G}n=Ze>>>n|0,Ae=(G|0)!=0;break;default:break u}if(!Ae)break}break l}r:{if(!io(ce,1)||(ci=io(ce,4),ci+-1>>>0<11))break r;c[g>>2]=3,L=0;break n}c[ni+12>>2]=0;r:{u:{s:{if(!a){Ze=1,R=1;break s}if(Ze=1,R=1,!io(ce,1))break s;if(Mi=1,E=io(ce,3)+2|0,R=1<<E,H=(R+n|0)+-1>>>E|0,R=(s+R|0)+-1>>>E|0,!hn(H,R,0,g,ni+12|0))break u;if(c[g+152>>2]=E,Tt=re(R,H),(Tt|0)>=1)for(L=0,R=c[ni+12>>2];H=R+(L<<2)|0,E=F[H+1|0]|F[H+2|0]<<8,c[H>>2]=E,Ze=(E|0)<(Ze|0)?Ze:E+1|0,L=L+1|0,(Tt|0)!=(L|0););if(!((Ze|0)>1e3|(Ze|0)>(re(n,s)|0))){R=Ze;break s}if(vn=Ls(Ze,0,4),!vn){c[g>>2]=1,vn=0;break u}if(ce=Jo(vn,255,Ze<<2),(Tt|0)<1){R=0;break s}for(L=0,ee=c[ni+12>>2],R=0;G=ee+(L<<2)|0,H=ce+(c[G>>2]<<2)|0,E=c[H>>2],(E|0)==-1&&(c[H>>2]=R,E=R,R=E+1|0),c[G>>2]=E,L=L+1|0,(Tt|0)!=(L|0););}if(c[g+48>>2]){Mi=1;break u}if(Mi=1,Xh=1<<ci,Zu=(ci|0)>0?Xh+280|0:280,Ae=$l((Zu|0)>256?Zu:256,0,4),Gi=re(mn[(ci<<1)+1184>>1],R),Gi=Ls(Gi,Gi>>31,4),hl=Ls(R,R>>31,548),!(!hl|(!Gi|!Ae))){for(H=Gi;;){L=or;s:{a:{if(!vn||(L=c[(or<<2)+vn>>2],(L|0)!=-1))break a;if(Mi=1,!oa(Zu,g,Ae,0)||!oa(256,g,Ae,0)||!oa(256,g,Ae,0)||!oa(256,g,Ae,0))break r;if(oa(40,g,Ae,0))break s;break r}for(Ne=re(L,548)+hl|0,Mi=1,Ot=0,Ir=0,sn=1,gs=0;;){if(c[(Ot<<2)+Ne>>2]=H,Tt=mn[(Ot<<1)+1208>>1]+((ci|0)>0?Ot?0:Xh:0)|0,E=oa(Tt,g,Ae,H),!E)break r;a:{if(!sn){sn=0;break a}if(!(Ot&2147483643))break a;sn=!F[H|0]}if(ce=E<<2,ee=F[H|0],Ot>>>0<=3){if(L=c[Ae>>2],E=1,(Tt|0)>=2)for(;G=c[(E<<2)+Ae>>2],L=(G|0)>(L|0)?G:L,E=E+1|0,(Tt|0)!=(E|0););Ir=L+Ir|0}if(H=H+ce|0,gs=ee+gs|0,Ot=Ot+1|0,(Ot|0)==5)break}c[Ne+28>>2]=0,c[Ne+20>>2]=sn;a:{if(!sn||(L=mn[c[Ne+8>>2]+2>>1]|mn[c[Ne+4>>2]+2>>1]<<16|mn[c[Ne+12>>2]+2>>1]<<24,c[Ne+24>>2]=L,gs)||(E=mn[c[Ne>>2]+2>>1],E>>>0>255))break a;c[Ne+28>>2]=1,c[Ne+24>>2]=L|E<<8,c[Ne+32>>2]=0;break s}if(c[Ne+32>>2]=(Ir|0)<6,(Ir|0)>5)break s;for(Mi=Ne+12|0,sn=Ne+8|0,Ir=Ne+4|0,gs=c[Ne>>2],L=0;;){ee=(L<<3)+Ne|0,wa=ee+36|0,E=gs+(L<<2)|0,G=mn[E>>1]|mn[E+2>>1]<<16,E=G>>>16|0;a:{if(E>>>0>=256){c[wa>>2]=G&255|256,c[ee+40>>2]=E;break a}G=G&255,c[wa>>2]=G,Ot=ee+40|0,Tt=E<<8,c[Ot>>2]=Tt,ce=L>>>G|0,E=c[Ir>>2]+(ce<<2)|0,ee=F[E+2|0]|F[E+3|0]<<8,ki=G,G=F[E|0],E=ki+G|0,c[wa>>2]=E,Tt=Tt|ee<<16,c[Ot>>2]=Tt,ce=ce>>>G|0,ee=c[sn>>2]+(ce<<2)|0,G=F[ee+2|0]|F[ee+3|0]<<8,ki=E,E=F[ee|0],ee=ki+E|0,c[wa>>2]=ee,G=G|Tt,c[Ot>>2]=G,ce=c[Mi>>2]+(ce>>>E<<2)|0,E=F[ce+2|0]|F[ce+3|0]<<8,c[wa>>2]=ee+F[ce|0],c[Ot>>2]=G|E<<24}if(L=L+1|0,(L|0)==64)break}}if(or=or+1|0,(or|0)==(Ze|0))break}or=c[ni+12>>2],c[g+172>>2]=Gi,c[g+168>>2]=hl,c[g+164>>2]=R,c[g+160>>2]=or,Mi=0;break r}c[g>>2]=1;break r}Ae=0}if(jr(Ae),jr(vn),!Mi)break o;jr(c[ni+12>>2]),jr(Gi),Lf(hl)}c[g>>2]=3,L=0;break n}o:{if((ci|0)>=1){if(c[g+120>>2]=1<<ci,eu(g+124|0,ci))break o;c[g>>2]=1,L=0;break n}c[mt>>2]=0}if(c[g+104>>2]=s,c[g+100>>2]=n,R=c[g+152>>2],c[g+148>>2]=R?-1<<R^-1:-1,c[g+156>>2]=((1<<R)+n|0)+-1>>>R,a){c[g+4>>2]=1,L=0;break i}if(L=Ls(_r(n,n>>31,s,s>>31),Fn,4),!L){c[g>>2]=1,L=0;break n}if(!Hl(g,L,n,s,s,0))break n;if(!c[g+48>>2])break i}jr(L),L=0;break t}if(k&&(c[k>>2]=L),c[g+112>>2]=0,L=1,a)break e}jr(c[g+160>>2]),jr(c[g+172>>2]),Lf(c[g+168>>2]),bc(g+124|0),bc(g+136|0),c[mt+48>>2]=0,c[mt+52>>2]=0,c[mt+40>>2]=0,c[mt+44>>2]=0,c[mt+32>>2]=0,c[mt+36>>2]=0,c[mt+24>>2]=0,c[mt+28>>2]=0,c[mt+16>>2]=0,c[mt+20>>2]=0,c[mt+8>>2]=0,c[mt+12>>2]=0,c[mt>>2]=0,c[mt+4>>2]=0}return Nn=ni+16|0,L}function Zn(n,s,a,g,k,E,L,R,G){n=n|0,s=s|0,a=a|0,g=g|0,k=k|0,E=E|0,L=L|0,R=R|0,G=G|0;var H=0,ee=0,ce=0,Ae=0,Ne=0,Ze=0,mt=0,Tt=0,Ot=0,ni=0,ci=0,Mi=0,ki=0,Gi=0,sn=0,vn=0,or=0,Ir=0;ce=F[n|0],ee=F[a|0],Ae=F[g|0],Ne=F[k|0],Tt=F[E|0],p[L|0]=255,ce=re(ce,19077)>>>8|0,Ne=Ne|Tt<<16,ee=ee|Ae<<16,Ae=(Ne+re(ee,3)|0)+131074|0,Tt=Ae>>>2&255,Ot=ce+(re(Tt,33050)>>>8|0)|0,H=Ot+-17685|0,p[L+3|0]=H>>>0<16384?H>>>6|0:Ot>>>0<17685?0:255,Ae=Ae>>>18&255,Ot=ce+(re(Ae,26149)>>>8|0)|0,H=Ot+-14234|0,p[L+1|0]=H>>>0<16384?H>>>6|0:Ot>>>0<14234?0:255,ce=ce-(re(Tt,6419)>>>8|0)-(re(Ae,13320)>>>8)|0,Ae=ce+8708|0,p[L+2|0]=Ae>>>0<16384?Ae>>>6|0:(ce|0)<-8708?0:255,s&&(ce=F[s|0],p[R|0]=255,ce=re(ce,19077)>>>8|0,Ae=(re(Ne,3)+ee|0)+131074|0,Tt=Ae>>>2&255,Ot=ce+(re(Tt,33050)>>>8|0)|0,H=Ot+-17685|0,p[R+3|0]=H>>>0<16384?H>>>6|0:Ot>>>0<17685?0:255,Ae=Ae>>>18&255,Ot=ce+(re(Ae,26149)>>>8|0)|0,H=Ot+-14234|0,p[R+1|0]=H>>>0<16384?H>>>6|0:Ot>>>0<14234?0:255,ce=ce-(re(Tt,6419)>>>8|0)-(re(Ae,13320)>>>8)|0,Ae=ce+8708|0,p[R+2|0]=Ae>>>0<16384?Ae>>>6|0:(ce|0)<-8708?0:255),Ot=G+-1|0;e:{if((G|0)<3){ce=Ne,Ae=ee;break e}for(ce=Ot>>1,Ir=(ce|0)>1?ce:1,Tt=1;vn=Tt<<1,ci=vn+-1|0,Ze=F[ci+n|0],Ae=F[a+Tt|0],ni=F[g+Tt|0],ce=F[k+Tt|0],sn=F[E+Tt|0],or=ci<<2,H=or+L|0,p[H|0]=255,ce=ce|sn<<16,Ae=Ae|ni<<16,sn=Ne+Ae|0,ni=(ce+(sn+ee|0)|0)+524296|0,Ze=re(Ze,19077)>>>8|0,sn=ni+(sn<<1)>>>3|0,Mi=sn+ee|0,ki=Mi>>>1&255,Gi=Ze+(re(ki,33050)>>>8|0)|0,mt=Gi+-17685|0,p[H+3|0]=mt>>>0<16384?mt>>>6|0:Gi>>>0<17685?0:255,Mi=Mi>>>17&255,Gi=Ze+(re(Mi,26149)>>>8|0)|0,mt=Gi+-14234|0,p[H+1|0]=mt>>>0<16384?mt>>>6|0:Gi>>>0<14234?0:255,mt=H,H=Ze-(re(ki,6419)>>>8|0)-(re(Mi,13320)>>>8)|0,Ze=H+8708|0,p[mt+2|0]=Ze>>>0<16384?Ze>>>6|0:(H|0)<-8708?0:255,Ze=F[n+vn|0],Mi=Tt<<3,H=Mi+L|0,p[H|0]=255,ni=ni+(ee+ce<<1)>>>3|0,ki=ni+Ae|0,Gi=ki>>>1&255,ee=re(Ze,19077)>>>8|0,Ze=(re(Gi,33050)>>>8|0)+ee|0,mt=Ze+-17685|0,p[H+3|0]=mt>>>0<16384?mt>>>6|0:Ze>>>0<17685?0:255,Ze=ki>>>17&255,ki=ee+(re(Ze,26149)>>>8|0)|0,mt=ki+-14234|0,p[H+1|0]=mt>>>0<16384?mt>>>6|0:ki>>>0<14234?0:255,mt=H,ee=ee-(re(Gi,6419)>>>8|0)-(re(Ze,13320)>>>8)|0,H=ee+8708|0,p[mt+2|0]=H>>>0<16384?H>>>6|0:(ee|0)<-8708?0:255,s&&(H=F[s+ci|0],ee=R+or|0,p[ee|0]=255,ci=Ne+ni|0,ni=ci>>>1&255,Ne=re(H,19077)>>>8|0,H=(re(ni,33050)>>>8|0)+Ne|0,Ze=H+-17685|0,p[ee+3|0]=Ze>>>0<16384?Ze>>>6|0:H>>>0<17685?0:255,H=ci>>>17&255,ci=Ne+(re(H,26149)>>>8|0)|0,Ze=ci+-14234|0,p[ee+1|0]=Ze>>>0<16384?Ze>>>6|0:ci>>>0<14234?0:255,mt=ee,ee=Ne-(re(ni,6419)>>>8|0)-(re(H,13320)>>>8)|0,Ne=ee+8708|0,p[mt+2|0]=Ne>>>0<16384?Ne>>>6|0:(ee|0)<-8708?0:255,Ne=F[s+vn|0],ee=R+Mi|0,p[ee|0]=255,Ne=re(Ne,19077)>>>8|0,H=ce+sn|0,vn=H>>>1&255,ci=Ne+(re(vn,33050)>>>8|0)|0,ni=ci+-17685|0,p[ee+3|0]=ni>>>0<16384?ni>>>6|0:ci>>>0<17685?0:255,H=H>>>17&255,ci=Ne+(re(H,26149)>>>8|0)|0,ni=ci+-14234|0,p[ee+1|0]=ni>>>0<16384?ni>>>6|0:ci>>>0<14234?0:255,mt=ee,ee=Ne-(re(vn,6419)>>>8|0)-(re(H,13320)>>>8)|0,Ne=ee+8708|0,p[mt+2|0]=Ne>>>0<16384?Ne>>>6|0:(ee|0)<-8708?0:255),H=(Tt|0)!=(Ir|0),Tt=Tt+1|0,ee=Ae,Ne=ce,!!H;);}e:{if(G&1||(a=F[n+Ot|0],g=Ot<<2,n=g+L|0,p[n|0]=255,a=re(a,19077)>>>8|0,k=(re(Ae,3)+ce|0)+131074|0,E=k>>>2&255,L=a+(re(E,33050)>>>8|0)|0,G=L+-17685|0,p[n+3|0]=G>>>0<16384?G>>>6|0:L>>>0<17685?0:255,k=k>>>18&255,L=a+(re(k,26149)>>>8|0)|0,G=L+-14234|0,p[n+1|0]=G>>>0<16384?G>>>6|0:L>>>0<14234?0:255,L=n,n=a-(re(E,6419)>>>8|0)-(re(k,13320)>>>8)|0,a=n+8708|0,p[L+2|0]=a>>>0<16384?a>>>6|0:(n|0)<-8708?0:255,!s))break e;s=F[s+Ot|0],n=g+R|0,p[n|0]=255,s=re(s,19077)>>>8|0,a=(re(ce,3)+Ae|0)+131074|0,g=a>>>2&255,k=s+(re(g,33050)>>>8|0)|0,E=k+-17685|0,p[n+3|0]=E>>>0<16384?E>>>6|0:k>>>0<17685?0:255,a=a>>>18&255,k=s+(re(a,26149)>>>8|0)|0,E=k+-14234|0,p[n+1|0]=E>>>0<16384?E>>>6|0:k>>>0<14234?0:255,k=n,n=s-(re(g,6419)>>>8|0)-(re(a,13320)>>>8)|0,s=n+8708|0,p[k+2|0]=s>>>0<16384?s>>>6|0:(n|0)<-8708?0:255}}function Ar(n,s,a,g,k,E,L,R,G){n=n|0,s=s|0,a=a|0,g=g|0,k=k|0,E=E|0,L=L|0,R=R|0,G=G|0;var H=0,ee=0,ce=0,Ae=0,Ne=0,Ze=0,mt=0,Tt=0,Ot=0,ni=0,ci=0,Mi=0,ki=0,Gi=0,sn=0,vn=0,or=0,Ir=0;ce=F[n|0],ee=F[a|0],Ae=F[g|0],Ne=F[k|0],Tt=F[E|0],p[L+3|0]=255,ce=re(ce,19077)>>>8|0,Ne=Ne|Tt<<16,ee=ee|Ae<<16,Ae=(Ne+re(ee,3)|0)+131074|0,Tt=Ae>>>2&255,Ot=ce+(re(Tt,33050)>>>8|0)|0,H=Ot+-17685|0,p[L+2|0]=H>>>0<16384?H>>>6|0:Ot>>>0<17685?0:255,Ae=Ae>>>18&255,Ot=ce+(re(Ae,26149)>>>8|0)|0,H=Ot+-14234|0,p[L|0]=H>>>0<16384?H>>>6|0:Ot>>>0<14234?0:255,ce=ce-(re(Tt,6419)>>>8|0)-(re(Ae,13320)>>>8)|0,Ae=ce+8708|0,p[L+1|0]=Ae>>>0<16384?Ae>>>6|0:(ce|0)<-8708?0:255,s&&(ce=F[s|0],p[R+3|0]=255,ce=re(ce,19077)>>>8|0,Ae=(re(Ne,3)+ee|0)+131074|0,Tt=Ae>>>2&255,Ot=ce+(re(Tt,33050)>>>8|0)|0,H=Ot+-17685|0,p[R+2|0]=H>>>0<16384?H>>>6|0:Ot>>>0<17685?0:255,Ae=Ae>>>18&255,Ot=ce+(re(Ae,26149)>>>8|0)|0,H=Ot+-14234|0,p[R|0]=H>>>0<16384?H>>>6|0:Ot>>>0<14234?0:255,ce=ce-(re(Tt,6419)>>>8|0)-(re(Ae,13320)>>>8)|0,Ae=ce+8708|0,p[R+1|0]=Ae>>>0<16384?Ae>>>6|0:(ce|0)<-8708?0:255),Ot=G+-1|0;e:{if((G|0)<3){ce=Ne,Ae=ee;break e}for(ce=Ot>>1,Ir=(ce|0)>1?ce:1,Tt=1;vn=Tt<<1,ci=vn+-1|0,Ze=F[ci+n|0],Ae=F[a+Tt|0],ni=F[g+Tt|0],ce=F[k+Tt|0],sn=F[E+Tt|0],or=ci<<2,H=or+L|0,p[H+3|0]=255,ce=ce|sn<<16,Ae=Ae|ni<<16,sn=Ne+Ae|0,ni=(ce+(sn+ee|0)|0)+524296|0,Ze=re(Ze,19077)>>>8|0,sn=ni+(sn<<1)>>>3|0,Mi=sn+ee|0,ki=Mi>>>1&255,Gi=Ze+(re(ki,33050)>>>8|0)|0,mt=Gi+-17685|0,p[H+2|0]=mt>>>0<16384?mt>>>6|0:Gi>>>0<17685?0:255,Mi=Mi>>>17&255,Gi=Ze+(re(Mi,26149)>>>8|0)|0,mt=Gi+-14234|0,p[H|0]=mt>>>0<16384?mt>>>6|0:Gi>>>0<14234?0:255,mt=H,H=Ze-(re(ki,6419)>>>8|0)-(re(Mi,13320)>>>8)|0,Ze=H+8708|0,p[mt+1|0]=Ze>>>0<16384?Ze>>>6|0:(H|0)<-8708?0:255,Ze=F[n+vn|0],Mi=Tt<<3,H=Mi+L|0,p[H+3|0]=255,ni=ni+(ee+ce<<1)>>>3|0,ki=ni+Ae|0,Gi=ki>>>1&255,ee=re(Ze,19077)>>>8|0,Ze=(re(Gi,33050)>>>8|0)+ee|0,mt=Ze+-17685|0,p[H+2|0]=mt>>>0<16384?mt>>>6|0:Ze>>>0<17685?0:255,Ze=ki>>>17&255,ki=ee+(re(Ze,26149)>>>8|0)|0,mt=ki+-14234|0,p[H|0]=mt>>>0<16384?mt>>>6|0:ki>>>0<14234?0:255,mt=H,ee=ee-(re(Gi,6419)>>>8|0)-(re(Ze,13320)>>>8)|0,H=ee+8708|0,p[mt+1|0]=H>>>0<16384?H>>>6|0:(ee|0)<-8708?0:255,s&&(H=F[s+ci|0],ee=R+or|0,p[ee+3|0]=255,ci=Ne+ni|0,ni=ci>>>1&255,Ne=re(H,19077)>>>8|0,H=(re(ni,33050)>>>8|0)+Ne|0,Ze=H+-17685|0,p[ee+2|0]=Ze>>>0<16384?Ze>>>6|0:H>>>0<17685?0:255,H=ci>>>17&255,ci=Ne+(re(H,26149)>>>8|0)|0,Ze=ci+-14234|0,p[ee|0]=Ze>>>0<16384?Ze>>>6|0:ci>>>0<14234?0:255,mt=ee,ee=Ne-(re(ni,6419)>>>8|0)-(re(H,13320)>>>8)|0,Ne=ee+8708|0,p[mt+1|0]=Ne>>>0<16384?Ne>>>6|0:(ee|0)<-8708?0:255,Ne=F[s+vn|0],ee=R+Mi|0,p[ee+3|0]=255,Ne=re(Ne,19077)>>>8|0,H=ce+sn|0,vn=H>>>1&255,ci=Ne+(re(vn,33050)>>>8|0)|0,ni=ci+-17685|0,p[ee+2|0]=ni>>>0<16384?ni>>>6|0:ci>>>0<17685?0:255,H=H>>>17&255,ci=Ne+(re(H,26149)>>>8|0)|0,ni=ci+-14234|0,p[ee|0]=ni>>>0<16384?ni>>>6|0:ci>>>0<14234?0:255,mt=ee,ee=Ne-(re(vn,6419)>>>8|0)-(re(H,13320)>>>8)|0,Ne=ee+8708|0,p[mt+1|0]=Ne>>>0<16384?Ne>>>6|0:(ee|0)<-8708?0:255),H=(Tt|0)!=(Ir|0),Tt=Tt+1|0,ee=Ae,Ne=ce,!!H;);}e:{if(G&1||(a=F[n+Ot|0],g=Ot<<2,n=g+L|0,p[n+3|0]=255,a=re(a,19077)>>>8|0,k=(re(Ae,3)+ce|0)+131074|0,E=k>>>2&255,L=a+(re(E,33050)>>>8|0)|0,G=L+-17685|0,p[n+2|0]=G>>>0<16384?G>>>6|0:L>>>0<17685?0:255,k=k>>>18&255,L=a+(re(k,26149)>>>8|0)|0,G=L+-14234|0,p[n|0]=G>>>0<16384?G>>>6|0:L>>>0<14234?0:255,L=n,n=a-(re(E,6419)>>>8|0)-(re(k,13320)>>>8)|0,a=n+8708|0,p[L+1|0]=a>>>0<16384?a>>>6|0:(n|0)<-8708?0:255,!s))break e;s=F[s+Ot|0],n=g+R|0,p[n+3|0]=255,s=re(s,19077)>>>8|0,a=(re(ce,3)+Ae|0)+131074|0,g=a>>>2&255,k=s+(re(g,33050)>>>8|0)|0,E=k+-17685|0,p[n+2|0]=E>>>0<16384?E>>>6|0:k>>>0<17685?0:255,a=a>>>18&255,k=s+(re(a,26149)>>>8|0)|0,E=k+-14234|0,p[n|0]=E>>>0<16384?E>>>6|0:k>>>0<14234?0:255,k=n,n=s-(re(g,6419)>>>8|0)-(re(a,13320)>>>8)|0,s=n+8708|0,p[k+1|0]=s>>>0<16384?s>>>6|0:(n|0)<-8708?0:255}}function Nr(n,s,a,g,k,E,L,R,G){n=n|0,s=s|0,a=a|0,g=g|0,k=k|0,E=E|0,L=L|0,R=R|0,G=G|0;var H=0,ee=0,ce=0,Ae=0,Ne=0,Ze=0,mt=0,Tt=0,Ot=0,ni=0,ci=0,Mi=0,ki=0,Gi=0,sn=0,vn=0,or=0,Ir=0;ce=F[n|0],ee=F[a|0],Ae=F[g|0],Ne=F[k|0],Tt=F[E|0],p[L+3|0]=255,ce=re(ce,19077)>>>8|0,Ne=Ne|Tt<<16,ee=ee|Ae<<16,Ae=(Ne+re(ee,3)|0)+131074|0,Tt=Ae>>>18&255,Ot=ce+(re(Tt,26149)>>>8|0)|0,H=Ot+-14234|0,p[L+2|0]=H>>>0<16384?H>>>6|0:Ot>>>0<14234?0:255,Ae=Ae>>>2&255,Ot=ce+(re(Ae,33050)>>>8|0)|0,H=Ot+-17685|0,p[L|0]=H>>>0<16384?H>>>6|0:Ot>>>0<17685?0:255,ce=ce-(re(Ae,6419)>>>8|0)-(re(Tt,13320)>>>8)|0,Ae=ce+8708|0,p[L+1|0]=Ae>>>0<16384?Ae>>>6|0:(ce|0)<-8708?0:255,s&&(ce=F[s|0],p[R+3|0]=255,ce=re(ce,19077)>>>8|0,Ae=(re(Ne,3)+ee|0)+131074|0,Tt=Ae>>>18&255,Ot=ce+(re(Tt,26149)>>>8|0)|0,H=Ot+-14234|0,p[R+2|0]=H>>>0<16384?H>>>6|0:Ot>>>0<14234?0:255,Ae=Ae>>>2&255,Ot=ce+(re(Ae,33050)>>>8|0)|0,H=Ot+-17685|0,p[R|0]=H>>>0<16384?H>>>6|0:Ot>>>0<17685?0:255,ce=ce-(re(Ae,6419)>>>8|0)-(re(Tt,13320)>>>8)|0,Ae=ce+8708|0,p[R+1|0]=Ae>>>0<16384?Ae>>>6|0:(ce|0)<-8708?0:255),Ot=G+-1|0;e:{if((G|0)<3){ce=Ne,Ae=ee;break e}for(ce=Ot>>1,Ir=(ce|0)>1?ce:1,Tt=1;vn=Tt<<1,ci=vn+-1|0,Ze=F[ci+n|0],Ae=F[a+Tt|0],ni=F[g+Tt|0],ce=F[k+Tt|0],sn=F[E+Tt|0],or=ci<<2,H=or+L|0,p[H+3|0]=255,ce=ce|sn<<16,Ae=Ae|ni<<16,sn=Ne+Ae|0,ni=(ce+(sn+ee|0)|0)+524296|0,Ze=re(Ze,19077)>>>8|0,sn=ni+(sn<<1)>>>3|0,Mi=sn+ee|0,ki=Mi>>>17&255,Gi=Ze+(re(ki,26149)>>>8|0)|0,mt=Gi+-14234|0,p[H+2|0]=mt>>>0<16384?mt>>>6|0:Gi>>>0<14234?0:255,Mi=Mi>>>1&255,Gi=Ze+(re(Mi,33050)>>>8|0)|0,mt=Gi+-17685|0,p[H|0]=mt>>>0<16384?mt>>>6|0:Gi>>>0<17685?0:255,mt=H,H=Ze-(re(Mi,6419)>>>8|0)-(re(ki,13320)>>>8)|0,Ze=H+8708|0,p[mt+1|0]=Ze>>>0<16384?Ze>>>6|0:(H|0)<-8708?0:255,Ze=F[n+vn|0],Mi=Tt<<3,H=Mi+L|0,p[H+3|0]=255,ni=ni+(ee+ce<<1)>>>3|0,ki=ni+Ae|0,Gi=ki>>>17&255,ee=re(Ze,19077)>>>8|0,Ze=(re(Gi,26149)>>>8|0)+ee|0,mt=Ze+-14234|0,p[H+2|0]=mt>>>0<16384?mt>>>6|0:Ze>>>0<14234?0:255,Ze=ki>>>1&255,ki=ee+(re(Ze,33050)>>>8|0)|0,mt=ki+-17685|0,p[H|0]=mt>>>0<16384?mt>>>6|0:ki>>>0<17685?0:255,mt=H,ee=ee-(re(Ze,6419)>>>8|0)-(re(Gi,13320)>>>8)|0,H=ee+8708|0,p[mt+1|0]=H>>>0<16384?H>>>6|0:(ee|0)<-8708?0:255,s&&(H=F[s+ci|0],ee=R+or|0,p[ee+3|0]=255,ci=Ne+ni|0,ni=ci>>>17&255,Ne=re(H,19077)>>>8|0,H=(re(ni,26149)>>>8|0)+Ne|0,Ze=H+-14234|0,p[ee+2|0]=Ze>>>0<16384?Ze>>>6|0:H>>>0<14234?0:255,H=ci>>>1&255,ci=Ne+(re(H,33050)>>>8|0)|0,Ze=ci+-17685|0,p[ee|0]=Ze>>>0<16384?Ze>>>6|0:ci>>>0<17685?0:255,mt=ee,ee=Ne-(re(H,6419)>>>8|0)-(re(ni,13320)>>>8)|0,Ne=ee+8708|0,p[mt+1|0]=Ne>>>0<16384?Ne>>>6|0:(ee|0)<-8708?0:255,Ne=F[s+vn|0],ee=R+Mi|0,p[ee+3|0]=255,Ne=re(Ne,19077)>>>8|0,H=ce+sn|0,vn=H>>>17&255,ci=Ne+(re(vn,26149)>>>8|0)|0,ni=ci+-14234|0,p[ee+2|0]=ni>>>0<16384?ni>>>6|0:ci>>>0<14234?0:255,H=H>>>1&255,ci=Ne+(re(H,33050)>>>8|0)|0,ni=ci+-17685|0,p[ee|0]=ni>>>0<16384?ni>>>6|0:ci>>>0<17685?0:255,mt=ee,ee=Ne-(re(H,6419)>>>8|0)-(re(vn,13320)>>>8)|0,Ne=ee+8708|0,p[mt+1|0]=Ne>>>0<16384?Ne>>>6|0:(ee|0)<-8708?0:255),H=(Tt|0)!=(Ir|0),Tt=Tt+1|0,ee=Ae,Ne=ce,!!H;);}e:{if(G&1||(a=F[n+Ot|0],g=Ot<<2,n=g+L|0,p[n+3|0]=255,a=re(a,19077)>>>8|0,k=(re(Ae,3)+ce|0)+131074|0,E=k>>>18&255,L=a+(re(E,26149)>>>8|0)|0,G=L+-14234|0,p[n+2|0]=G>>>0<16384?G>>>6|0:L>>>0<14234?0:255,k=k>>>2&255,L=a+(re(k,33050)>>>8|0)|0,G=L+-17685|0,p[n|0]=G>>>0<16384?G>>>6|0:L>>>0<17685?0:255,L=n,n=a-(re(k,6419)>>>8|0)-(re(E,13320)>>>8)|0,a=n+8708|0,p[L+1|0]=a>>>0<16384?a>>>6|0:(n|0)<-8708?0:255,!s))break e;s=F[s+Ot|0],n=g+R|0,p[n+3|0]=255,s=re(s,19077)>>>8|0,a=(re(ce,3)+Ae|0)+131074|0,g=a>>>18&255,k=s+(re(g,26149)>>>8|0)|0,E=k+-14234|0,p[n+2|0]=E>>>0<16384?E>>>6|0:k>>>0<14234?0:255,a=a>>>2&255,k=s+(re(a,33050)>>>8|0)|0,E=k+-17685|0,p[n|0]=E>>>0<16384?E>>>6|0:k>>>0<17685?0:255,k=n,n=s-(re(a,6419)>>>8|0)-(re(g,13320)>>>8)|0,s=n+8708|0,p[k+1|0]=s>>>0<16384?s>>>6|0:(n|0)<-8708?0:255}}function Wr(n,s,a,g,k,E,L,R,G){n=n|0,s=s|0,a=a|0,g=g|0,k=k|0,E=E|0,L=L|0,R=R|0,G=G|0;var H=0,ee=0,ce=0,Ae=0,Ne=0,Ze=0,mt=0,Tt=0,Ot=0,ni=0,ci=0,Mi=0,ki=0,Gi=0,sn=0,vn=0,or=0,Ir=0;Ae=re(F[n|0],19077)>>>8|0,Ne=F[k|0]|F[E|0]<<16,H=F[a|0]|F[g|0]<<16,ce=(Ne+re(H,3)|0)+131074|0,Tt=ce>>>2&255,ce=ce>>>18|0,mt=Ae-(re(Tt,6419)>>>8|0)-(re(ce,13320)>>>8)|0,ee=mt+8708|0,mt=ee>>>0<16384?ee>>6:(mt|0)<-8708?0:255,ce=Ae+(re(ce,26149)>>>8|0)|0,ee=ce+-14234|0,p[L|0]=mt>>>5|(ee>>>0<16384?ee>>>6|0:ce>>>0<14234?0:248)&248,Ae=Ae+(re(Tt,33050)>>>8|0)|0,ce=Ae+-17685|0,p[L+1|0]=mt<<3&224|(ce>>>0<16384?ce>>>9|0:Ae>>>0<17685?0:31),s&&(Ae=re(F[s|0],19077)>>>8|0,ce=(re(Ne,3)+H|0)+131074|0,Tt=ce>>>2&255,ce=ce>>>18|0,mt=Ae-(re(Tt,6419)>>>8|0)-(re(ce,13320)>>>8)|0,ee=mt+8708|0,mt=ee>>>0<16384?ee>>6:(mt|0)<-8708?0:255,ce=Ae+(re(ce,26149)>>>8|0)|0,ee=ce+-14234|0,p[R|0]=mt>>>5|(ee>>>0<16384?ee>>>6|0:ce>>>0<14234?0:248)&248,Ae=Ae+(re(Tt,33050)>>>8|0)|0,ce=Ae+-17685|0,p[R+1|0]=mt<<3&224|(ce>>>0<16384?ce>>>9|0:Ae>>>0<17685?0:31)),mt=G+-1|0;e:{if((G|0)<3){Ae=Ne,ce=H;break e}for(Ae=mt>>1,Ir=(Ae|0)>1?Ae:1,Tt=1;Ae=F[k+Tt|0]|F[E+Tt|0]<<16,ce=F[a+Tt|0]|F[g+Tt|0]<<16,vn=ce+Ne|0,ee=(Ae+(vn+H|0)|0)+524296|0,sn=Tt<<1,Ot=sn+-1|0,ki=Ot<<1,Gi=ki+L|0,Ze=re(F[n+Ot|0],19077)>>>8|0,vn=ee+(vn<<1)>>>3|0,ci=vn+H|0,or=ci>>>1&255,ci=ci>>>17|0,Mi=Ze-(re(or,6419)>>>8|0)-(re(ci,13320)>>>8)|0,ni=Mi+8708|0,Mi=ni>>>0<16384?ni>>6:(Mi|0)<-8708?0:255,ci=Ze+(re(ci,26149)>>>8|0)|0,ni=ci+-14234|0,p[Gi|0]=Mi>>>5|(ni>>>0<16384?ni>>>6|0:ci>>>0<14234?0:248)&248,ni=Gi,Ze=Ze+(re(or,33050)>>>8|0)|0,Gi=Ze+-17685|0,p[ni+1|0]=Mi<<3&224|(Gi>>>0<16384?Gi>>>9|0:Ze>>>0<17685?0:31),Gi=Tt<<2,ci=Gi+L|0,Ze=re(F[n+sn|0],19077)>>>8|0,ee=ee+(H+Ae<<1)>>>3|0,H=ee+ce|0,or=H>>>1&255,H=H>>>17|0,Mi=Ze-(re(or,6419)>>>8|0)-(re(H,13320)>>>8)|0,ni=Mi+8708|0,Mi=ni>>>0<16384?ni>>6:(Mi|0)<-8708?0:255,H=Ze+(re(H,26149)>>>8|0)|0,ni=H+-14234|0,p[ci|0]=Mi>>>5|(ni>>>0<16384?ni>>>6|0:H>>>0<14234?0:248)&248,H=Ze+(re(or,33050)>>>8|0)|0,Ze=H+-17685|0,p[ci+1|0]=Mi<<3&224|(Ze>>>0<16384?Ze>>>9|0:H>>>0<17685?0:31),s&&(Ze=R+ki|0,H=re(F[s+Ot|0],19077)>>>8|0,Ne=ee+Ne|0,ee=Ne>>>1&255,Ne=Ne>>>17|0,Ot=H-(re(ee,6419)>>>8|0)-(re(Ne,13320)>>>8)|0,ki=Ot+8708|0,Ot=ki>>>0<16384?ki>>6:(Ot|0)<-8708?0:255,Ne=H+(re(Ne,26149)>>>8|0)|0,ki=Ne+-14234|0,p[Ze|0]=Ot>>>5|(ki>>>0<16384?ki>>>6|0:Ne>>>0<14234?0:248)&248,H=H+(re(ee,33050)>>>8|0)|0,Ne=H+-17685|0,p[Ze+1|0]=Ot<<3&224|(Ne>>>0<16384?Ne>>>9|0:H>>>0<17685?0:31),Ne=R+Gi|0,H=re(F[s+sn|0],19077)>>>8|0,ee=Ae+vn|0,sn=ee>>>1&255,ee=ee>>>17|0,Ot=H-(re(sn,6419)>>>8|0)-(re(ee,13320)>>>8)|0,Ze=Ot+8708|0,Ot=Ze>>>0<16384?Ze>>6:(Ot|0)<-8708?0:255,ee=H+(re(ee,26149)>>>8|0)|0,Ze=ee+-14234|0,p[Ne|0]=Ot>>>5|(Ze>>>0<16384?Ze>>>6|0:ee>>>0<14234?0:248)&248,ni=Ne,H=H+(re(sn,33050)>>>8|0)|0,Ne=H+-17685|0,p[ni+1|0]=Ot<<3&224|(Ne>>>0<16384?Ne>>>9|0:H>>>0<17685?0:31)),ee=(Tt|0)!=(Ir|0),Tt=Tt+1|0,H=ce,Ne=Ae,!!ee;);}e:{if(G&1||(a=mt<<1,g=a+L|0,n=re(F[n+mt|0],19077)>>>8|0,k=(re(ce,3)+Ae|0)+131074|0,E=k>>>2&255,k=k>>>18|0,L=n-(re(E,6419)>>>8|0)-(re(k,13320)>>>8)|0,G=L+8708|0,L=G>>>0<16384?G>>6:(L|0)<-8708?0:255,k=n+(re(k,26149)>>>8|0)|0,G=k+-14234|0,p[g|0]=L>>>5|(G>>>0<16384?G>>>6|0:k>>>0<14234?0:248)&248,k=g,n=n+(re(E,33050)>>>8|0)|0,g=n+-17685|0,p[k+1|0]=L<<3&224|(g>>>0<16384?g>>>9|0:n>>>0<17685?0:31),!s))break e;a=a+R|0,n=re(F[s+mt|0],19077)>>>8|0,s=(re(Ae,3)+ce|0)+131074|0,g=s>>>2&255,s=s>>>18|0,k=n-(re(g,6419)>>>8|0)-(re(s,13320)>>>8)|0,E=k+8708|0,k=E>>>0<16384?E>>6:(k|0)<-8708?0:255,s=n+(re(s,26149)>>>8|0)|0,E=s+-14234|0,p[a|0]=k>>>5|(E>>>0<16384?E>>>6|0:s>>>0<14234?0:248)&248,n=n+(re(g,33050)>>>8|0)|0,s=n+-17685|0,p[a+1|0]=k<<3&224|(s>>>0<16384?s>>>9|0:n>>>0<17685?0:31)}}function eo(n,s,a,g,k,E,L,R,G){n=n|0,s=s|0,a=a|0,g=g|0,k=k|0,E=E|0,L=L|0,R=R|0,G=G|0;var H=0,ee=0,ce=0,Ae=0,Ne=0,Ze=0,mt=0,Tt=0,Ot=0,ni=0,ci=0,Mi=0,ki=0,Gi=0,sn=0,vn=0,or=0,Ir=0;ce=re(F[n|0],19077)>>>8|0,Ae=F[k|0]|F[E|0]<<16,H=F[a|0]|F[g|0]<<16,Ne=(Ae+re(H,3)|0)+131074|0,mt=Ne>>>2&255,Tt=ce+(re(mt,33050)>>>8|0)|0,ee=Tt+-17685|0,p[L+1|0]=(ee>>>0<16384?ee>>>6|0:Tt>>>0<17685?0:240)|15,Ne=Ne>>>18|0,mt=ce-(re(mt,6419)>>>8|0)-(re(Ne,13320)>>>8)|0,Tt=mt+8708|0,ce=ce+(re(Ne,26149)>>>8|0)|0,Ne=ce+-14234|0,p[L|0]=(Tt>>>0<16384?Tt>>>10|0:(mt|0)<-8708?0:15)|(Ne>>>0<16384?Ne>>>6|0:ce>>>0<14234?0:240)&240,s&&(ce=re(F[s|0],19077)>>>8|0,Ne=(re(Ae,3)+H|0)+131074|0,mt=Ne>>>2&255,Tt=ce+(re(mt,33050)>>>8|0)|0,ee=Tt+-17685|0,p[R+1|0]=(ee>>>0<16384?ee>>>6|0:Tt>>>0<17685?0:240)|15,Ne=Ne>>>18|0,Tt=ce+(re(Ne,26149)>>>8|0)|0,ee=Tt+-14234|0,ce=ce-(re(mt,6419)>>>8|0)-(re(Ne,13320)>>>8)|0,Ne=ce+8708|0,p[R|0]=(ee>>>0<16384?ee>>>6|0:Tt>>>0<14234?0:240)&240|(Ne>>>0<16384?Ne>>>10|0:(ce|0)<-8708?0:15)),Tt=G+-1|0;e:{if((G|0)<3){ce=Ae,Ne=H;break e}for(ce=Tt>>1,Ir=(ce|0)>1?ce:1,mt=1;ce=F[k+mt|0]|F[E+mt|0]<<16,Ne=F[a+mt|0]|F[g+mt|0]<<16,Ot=Ne+Ae|0,ee=(ce+(Ot+H|0)|0)+524296|0,ki=mt<<1,ni=ki+-1|0,sn=ni<<1,Ze=sn+L|0,or=ee+(Ot<<1)>>>3|0,ci=or+H|0,Mi=ci>>>1&255,Ot=re(F[n+ni|0],19077)>>>8|0,vn=(re(Mi,33050)>>>8|0)+Ot|0,Gi=vn+-17685|0,p[Ze+1|0]=(Gi>>>0<16384?Gi>>>6|0:vn>>>0<17685?0:240)|15,Gi=Ze,Ze=ci>>>17|0,ci=Ot-(re(Mi,6419)>>>8|0)-(re(Ze,13320)>>>8)|0,Mi=ci+8708|0,Ot=Ot+(re(Ze,26149)>>>8|0)|0,Ze=Ot+-14234|0,p[Gi|0]=(Mi>>>0<16384?Mi>>>10|0:(ci|0)<-8708?0:15)|(Ze>>>0<16384?Ze>>>6|0:Ot>>>0<14234?0:240)&240,Ot=mt<<2,Ze=Ot+L|0,ee=ee+(H+ce<<1)>>>3|0,ci=ee+Ne|0,Mi=ci>>>1&255,H=re(F[n+ki|0],19077)>>>8|0,vn=(re(Mi,33050)>>>8|0)+H|0,Gi=vn+-17685|0,p[Ze+1|0]=(Gi>>>0<16384?Gi>>>6|0:vn>>>0<17685?0:240)|15,Gi=Ze,Ze=ci>>>17|0,ci=H-(re(Mi,6419)>>>8|0)-(re(Ze,13320)>>>8)|0,Mi=ci+8708|0,H=H+(re(Ze,26149)>>>8|0)|0,Ze=H+-14234|0,p[Gi|0]=(Mi>>>0<16384?Mi>>>10|0:(ci|0)<-8708?0:15)|(Ze>>>0<16384?Ze>>>6|0:H>>>0<14234?0:240)&240,s&&(sn=R+sn|0,H=re(F[s+ni|0],19077)>>>8|0,Ae=ee+Ae|0,ee=Ae>>>1&255,ni=H+(re(ee,33050)>>>8|0)|0,Ze=ni+-17685|0,p[sn+1|0]=(Ze>>>0<16384?Ze>>>6|0:ni>>>0<17685?0:240)|15,Ze=sn,Ae=Ae>>>17|0,ni=H+(re(Ae,26149)>>>8|0)|0,sn=ni+-14234|0,H=H-(re(ee,6419)>>>8|0)-(re(Ae,13320)>>>8)|0,Ae=H+8708|0,p[Ze|0]=(sn>>>0<16384?sn>>>6|0:ni>>>0<14234?0:240)&240|(Ae>>>0<16384?Ae>>>10|0:(H|0)<-8708?0:15),Ae=R+Ot|0,H=re(F[s+ki|0],19077)>>>8|0,ee=ce+or|0,ni=ee>>>1&255,ki=H+(re(ni,33050)>>>8|0)|0,Ot=ki+-17685|0,p[Ae+1|0]=(Ot>>>0<16384?Ot>>>6|0:ki>>>0<17685?0:240)|15,Ze=Ae,Ae=ee>>>17|0,ee=H+(re(Ae,26149)>>>8|0)|0,ki=ee+-14234|0,H=H-(re(ni,6419)>>>8|0)-(re(Ae,13320)>>>8)|0,Ae=H+8708|0,p[Ze|0]=(ki>>>0<16384?ki>>>6|0:ee>>>0<14234?0:240)&240|(Ae>>>0<16384?Ae>>>10|0:(H|0)<-8708?0:15)),ee=(mt|0)!=(Ir|0),mt=mt+1|0,H=Ne,Ae=ce,!!ee;);}e:{if(G&1||(a=Tt<<1,g=a+L|0,n=re(F[n+Tt|0],19077)>>>8|0,k=(re(Ne,3)+ce|0)+131074|0,E=k>>>2&255,L=n+(re(E,33050)>>>8|0)|0,G=L+-17685|0,p[g+1|0]=(G>>>0<16384?G>>>6|0:L>>>0<17685?0:240)|15,G=g,g=k>>>18|0,k=n+(re(g,26149)>>>8|0)|0,L=k+-14234|0,n=n-(re(E,6419)>>>8|0)-(re(g,13320)>>>8)|0,g=n+8708|0,p[G|0]=(L>>>0<16384?L>>>6|0:k>>>0<14234?0:240)&240|(g>>>0<16384?g>>>10|0:(n|0)<-8708?0:15),!s))break e;a=a+R|0,n=re(F[s+Tt|0],19077)>>>8|0,g=(re(ce,3)+Ne|0)+131074|0,k=g>>>2&255,s=n+(re(k,33050)>>>8|0)|0,E=s+-17685|0,p[a+1|0]=(E>>>0<16384?E>>>6|0:s>>>0<17685?0:240)|15,E=a,s=g>>>18|0,a=n+(re(s,26149)>>>8|0)|0,g=a+-14234|0,n=n-(re(k,6419)>>>8|0)-(re(s,13320)>>>8)|0,s=n+8708|0,p[E|0]=(g>>>0<16384?g>>>6|0:a>>>0<14234?0:240)&240|(s>>>0<16384?s>>>10|0:(n|0)<-8708?0:15)}}function Bo(n,s,a,g,k,E,L,R,G){n=n|0,s=s|0,a=a|0,g=g|0,k=k|0,E=E|0,L=L|0,R=R|0,G=G|0;var H=0,ee=0,ce=0,Ae=0,Ne=0,Ze=0,mt=0,Tt=0,Ot=0,ni=0,ci=0,Mi=0,ki=0,Gi=0,sn=0,vn=0,or=0,Ir=0;ce=re(F[n|0],19077)>>>8|0,Ze=F[k|0]|F[E|0]<<16,ee=F[a|0]|F[g|0]<<16,Ae=(Ze+re(ee,3)|0)+131074|0,Ot=Ae>>>18|0,Tt=ce+(re(Ot,26149)>>>8|0)|0,H=Tt+-14234|0,p[L|0]=H>>>0<16384?H>>>6|0:Tt>>>0<14234?0:255,Ae=Ae>>>2&255,Tt=ce+(re(Ae,33050)>>>8|0)|0,H=Tt+-17685|0,p[L+2|0]=H>>>0<16384?H>>>6|0:Tt>>>0<17685?0:255,ce=ce-(re(Ae,6419)>>>8|0)-(re(Ot,13320)>>>8)|0,Ae=ce+8708|0,p[L+1|0]=Ae>>>0<16384?Ae>>>6|0:(ce|0)<-8708?0:255,s&&(ce=re(F[s|0],19077)>>>8|0,Ae=(re(Ze,3)+ee|0)+131074|0,Ot=Ae>>>18|0,Tt=ce+(re(Ot,26149)>>>8|0)|0,H=Tt+-14234|0,p[R|0]=H>>>0<16384?H>>>6|0:Tt>>>0<14234?0:255,Ae=Ae>>>2&255,Tt=ce+(re(Ae,33050)>>>8|0)|0,H=Tt+-17685|0,p[R+2|0]=H>>>0<16384?H>>>6|0:Tt>>>0<17685?0:255,ce=ce-(re(Ae,6419)>>>8|0)-(re(Ot,13320)>>>8)|0,Ae=ce+8708|0,p[R+1|0]=Ae>>>0<16384?Ae>>>6|0:(ce|0)<-8708?0:255),Tt=G+-1|0;e:{if((G|0)<3){ce=Ze,Ae=ee;break e}for(ce=Tt>>1,Ir=(ce|0)>1?ce:1,Ot=1;ce=F[k+Ot|0]|F[E+Ot|0]<<16,Ae=F[a+Ot|0]|F[g+Ot|0]<<16,ni=Ae+Ze|0,H=(ce+(ni+ee|0)|0)+524296|0,Gi=Ot<<1,ci=Gi+-1|0,sn=re(ci,3),Ne=sn+L|0,or=H+(ni<<1)>>>3|0,Mi=or+ee|0,vn=Mi>>>17|0,ni=re(F[n+ci|0],19077)>>>8|0,mt=(re(vn,26149)>>>8|0)+ni|0,ki=mt+-14234|0,p[Ne|0]=ki>>>0<16384?ki>>>6|0:mt>>>0<14234?0:255,Mi=Mi>>>1&255,mt=ni+(re(Mi,33050)>>>8|0)|0,ki=mt+-17685|0,p[Ne+2|0]=ki>>>0<16384?ki>>>6|0:mt>>>0<17685?0:255,mt=Ne,Ne=ni-(re(Mi,6419)>>>8|0)-(re(vn,13320)>>>8)|0,ni=Ne+8708|0,p[mt+1|0]=ni>>>0<16384?ni>>>6|0:(Ne|0)<-8708?0:255,ni=re(Ot,6),Ne=ni+L|0,H=H+(ee+ce<<1)>>>3|0,Mi=H+Ae|0,vn=Mi>>>1&255,ee=re(F[n+Gi|0],19077)>>>8|0,mt=(re(vn,33050)>>>8|0)+ee|0,ki=mt+-17685|0,p[Ne+2|0]=ki>>>0<16384?ki>>>6|0:mt>>>0<17685?0:255,Mi=Mi>>>17|0,mt=ee+(re(Mi,26149)>>>8|0)|0,ki=mt+-14234|0,p[Ne|0]=ki>>>0<16384?ki>>>6|0:mt>>>0<14234?0:255,mt=Ne,ee=ee-(re(vn,6419)>>>8|0)-(re(Mi,13320)>>>8)|0,Ne=ee+8708|0,p[mt+1|0]=Ne>>>0<16384?Ne>>>6|0:(ee|0)<-8708?0:255,s&&(ee=R+sn|0,H=H+Ze|0,Ne=H>>>17|0,Ze=re(F[s+ci|0],19077)>>>8|0,ci=(re(Ne,26149)>>>8|0)+Ze|0,sn=ci+-14234|0,p[ee|0]=sn>>>0<16384?sn>>>6|0:ci>>>0<14234?0:255,H=H>>>1&255,ci=Ze+(re(H,33050)>>>8|0)|0,sn=ci+-17685|0,p[ee+2|0]=sn>>>0<16384?sn>>>6|0:ci>>>0<17685?0:255,mt=ee,ee=Ze-(re(H,6419)>>>8|0)-(re(Ne,13320)>>>8)|0,Ze=ee+8708|0,p[mt+1|0]=Ze>>>0<16384?Ze>>>6|0:(ee|0)<-8708?0:255,ee=R+ni|0,Ze=re(F[s+Gi|0],19077)>>>8|0,H=ce+or|0,ci=H>>>1&255,Gi=Ze+(re(ci,33050)>>>8|0)|0,Ne=Gi+-17685|0,p[ee+2|0]=Ne>>>0<16384?Ne>>>6|0:Gi>>>0<17685?0:255,H=H>>>17|0,Gi=Ze+(re(H,26149)>>>8|0)|0,Ne=Gi+-14234|0,p[ee|0]=Ne>>>0<16384?Ne>>>6|0:Gi>>>0<14234?0:255,Ne=ee,ee=Ze-(re(ci,6419)>>>8|0)-(re(H,13320)>>>8)|0,Ze=ee+8708|0,p[Ne+1|0]=Ze>>>0<16384?Ze>>>6|0:(ee|0)<-8708?0:255),H=(Ot|0)!=(Ir|0),Ot=Ot+1|0,ee=Ae,Ze=ce,!!H;);}e:{if(G&1||(g=re(Tt,3),a=g+L|0,n=re(F[n+Tt|0],19077)>>>8|0,k=(re(Ae,3)+ce|0)+131074|0,E=k>>>18|0,L=n+(re(E,26149)>>>8|0)|0,G=L+-14234|0,p[a|0]=G>>>0<16384?G>>>6|0:L>>>0<14234?0:255,k=k>>>2&255,L=n+(re(k,33050)>>>8|0)|0,G=L+-17685|0,p[a+2|0]=G>>>0<16384?G>>>6|0:L>>>0<17685?0:255,L=a,n=n-(re(k,6419)>>>8|0)-(re(E,13320)>>>8)|0,a=n+8708|0,p[L+1|0]=a>>>0<16384?a>>>6|0:(n|0)<-8708?0:255,!s))break e;n=g+R|0,s=re(F[s+Tt|0],19077)>>>8|0,a=(re(ce,3)+Ae|0)+131074|0,g=a>>>18|0,k=s+(re(g,26149)>>>8|0)|0,E=k+-14234|0,p[n|0]=E>>>0<16384?E>>>6|0:k>>>0<14234?0:255,a=a>>>2&255,k=s+(re(a,33050)>>>8|0)|0,E=k+-17685|0,p[n+2|0]=E>>>0<16384?E>>>6|0:k>>>0<17685?0:255,k=n,n=s-(re(a,6419)>>>8|0)-(re(g,13320)>>>8)|0,s=n+8708|0,p[k+1|0]=s>>>0<16384?s>>>6|0:(n|0)<-8708?0:255}}function qo(n,s,a,g,k,E,L,R,G){n=n|0,s=s|0,a=a|0,g=g|0,k=k|0,E=E|0,L=L|0,R=R|0,G=G|0;var H=0,ee=0,ce=0,Ae=0,Ne=0,Ze=0,mt=0,Tt=0,Ot=0,ni=0,ci=0,Mi=0,ki=0,Gi=0,sn=0,vn=0,or=0,Ir=0;ce=re(F[n|0],19077)>>>8|0,Ze=F[k|0]|F[E|0]<<16,ee=F[a|0]|F[g|0]<<16,Ae=(Ze+re(ee,3)|0)+131074|0,Ot=Ae>>>18|0,Tt=ce+(re(Ot,26149)>>>8|0)|0,H=Tt+-14234|0,p[L+2|0]=H>>>0<16384?H>>>6|0:Tt>>>0<14234?0:255,Ae=Ae>>>2&255,Tt=ce+(re(Ae,33050)>>>8|0)|0,H=Tt+-17685|0,p[L|0]=H>>>0<16384?H>>>6|0:Tt>>>0<17685?0:255,ce=ce-(re(Ae,6419)>>>8|0)-(re(Ot,13320)>>>8)|0,Ae=ce+8708|0,p[L+1|0]=Ae>>>0<16384?Ae>>>6|0:(ce|0)<-8708?0:255,s&&(ce=re(F[s|0],19077)>>>8|0,Ae=(re(Ze,3)+ee|0)+131074|0,Ot=Ae>>>18|0,Tt=ce+(re(Ot,26149)>>>8|0)|0,H=Tt+-14234|0,p[R+2|0]=H>>>0<16384?H>>>6|0:Tt>>>0<14234?0:255,Ae=Ae>>>2&255,Tt=ce+(re(Ae,33050)>>>8|0)|0,H=Tt+-17685|0,p[R|0]=H>>>0<16384?H>>>6|0:Tt>>>0<17685?0:255,ce=ce-(re(Ae,6419)>>>8|0)-(re(Ot,13320)>>>8)|0,Ae=ce+8708|0,p[R+1|0]=Ae>>>0<16384?Ae>>>6|0:(ce|0)<-8708?0:255),Tt=G+-1|0;e:{if((G|0)<3){ce=Ze,Ae=ee;break e}for(ce=Tt>>1,Ir=(ce|0)>1?ce:1,Ot=1;ce=F[k+Ot|0]|F[E+Ot|0]<<16,Ae=F[a+Ot|0]|F[g+Ot|0]<<16,ni=Ae+Ze|0,H=(ce+(ni+ee|0)|0)+524296|0,Gi=Ot<<1,ci=Gi+-1|0,sn=re(ci,3),Ne=sn+L|0,or=H+(ni<<1)>>>3|0,Mi=or+ee|0,vn=Mi>>>17|0,ni=re(F[n+ci|0],19077)>>>8|0,mt=(re(vn,26149)>>>8|0)+ni|0,ki=mt+-14234|0,p[Ne+2|0]=ki>>>0<16384?ki>>>6|0:mt>>>0<14234?0:255,Mi=Mi>>>1&255,mt=ni+(re(Mi,33050)>>>8|0)|0,ki=mt+-17685|0,p[Ne|0]=ki>>>0<16384?ki>>>6|0:mt>>>0<17685?0:255,mt=Ne,Ne=ni-(re(Mi,6419)>>>8|0)-(re(vn,13320)>>>8)|0,ni=Ne+8708|0,p[mt+1|0]=ni>>>0<16384?ni>>>6|0:(Ne|0)<-8708?0:255,ni=re(Ot,6),Ne=ni+L|0,H=H+(ee+ce<<1)>>>3|0,Mi=H+Ae|0,vn=Mi>>>17|0,ee=re(F[n+Gi|0],19077)>>>8|0,mt=(re(vn,26149)>>>8|0)+ee|0,ki=mt+-14234|0,p[Ne+2|0]=ki>>>0<16384?ki>>>6|0:mt>>>0<14234?0:255,Mi=Mi>>>1&255,mt=ee+(re(Mi,33050)>>>8|0)|0,ki=mt+-17685|0,p[Ne|0]=ki>>>0<16384?ki>>>6|0:mt>>>0<17685?0:255,mt=Ne,ee=ee-(re(Mi,6419)>>>8|0)-(re(vn,13320)>>>8)|0,Ne=ee+8708|0,p[mt+1|0]=Ne>>>0<16384?Ne>>>6|0:(ee|0)<-8708?0:255,s&&(ee=R+sn|0,H=H+Ze|0,Ne=H>>>17|0,Ze=re(F[s+ci|0],19077)>>>8|0,ci=(re(Ne,26149)>>>8|0)+Ze|0,sn=ci+-14234|0,p[ee+2|0]=sn>>>0<16384?sn>>>6|0:ci>>>0<14234?0:255,H=H>>>1&255,ci=Ze+(re(H,33050)>>>8|0)|0,sn=ci+-17685|0,p[ee|0]=sn>>>0<16384?sn>>>6|0:ci>>>0<17685?0:255,mt=ee,ee=Ze-(re(H,6419)>>>8|0)-(re(Ne,13320)>>>8)|0,Ze=ee+8708|0,p[mt+1|0]=Ze>>>0<16384?Ze>>>6|0:(ee|0)<-8708?0:255,ee=R+ni|0,Ze=re(F[s+Gi|0],19077)>>>8|0,H=ce+or|0,ci=H>>>17|0,Gi=Ze+(re(ci,26149)>>>8|0)|0,Ne=Gi+-14234|0,p[ee+2|0]=Ne>>>0<16384?Ne>>>6|0:Gi>>>0<14234?0:255,H=H>>>1&255,Gi=Ze+(re(H,33050)>>>8|0)|0,Ne=Gi+-17685|0,p[ee|0]=Ne>>>0<16384?Ne>>>6|0:Gi>>>0<17685?0:255,Ne=ee,ee=Ze-(re(H,6419)>>>8|0)-(re(ci,13320)>>>8)|0,Ze=ee+8708|0,p[Ne+1|0]=Ze>>>0<16384?Ze>>>6|0:(ee|0)<-8708?0:255),H=(Ot|0)!=(Ir|0),Ot=Ot+1|0,ee=Ae,Ze=ce,!!H;);}e:{if(G&1||(g=re(Tt,3),a=g+L|0,n=re(F[n+Tt|0],19077)>>>8|0,k=(re(Ae,3)+ce|0)+131074|0,E=k>>>18|0,L=n+(re(E,26149)>>>8|0)|0,G=L+-14234|0,p[a+2|0]=G>>>0<16384?G>>>6|0:L>>>0<14234?0:255,k=k>>>2&255,L=n+(re(k,33050)>>>8|0)|0,G=L+-17685|0,p[a|0]=G>>>0<16384?G>>>6|0:L>>>0<17685?0:255,L=a,n=n-(re(k,6419)>>>8|0)-(re(E,13320)>>>8)|0,a=n+8708|0,p[L+1|0]=a>>>0<16384?a>>>6|0:(n|0)<-8708?0:255,!s))break e;n=g+R|0,s=re(F[s+Tt|0],19077)>>>8|0,a=(re(ce,3)+Ae|0)+131074|0,g=a>>>18|0,k=s+(re(g,26149)>>>8|0)|0,E=k+-14234|0,p[n+2|0]=E>>>0<16384?E>>>6|0:k>>>0<14234?0:255,a=a>>>2&255,k=s+(re(a,33050)>>>8|0)|0,E=k+-17685|0,p[n|0]=E>>>0<16384?E>>>6|0:k>>>0<17685?0:255,k=n,n=s-(re(a,6419)>>>8|0)-(re(g,13320)>>>8)|0,s=n+8708|0,p[k+1|0]=s>>>0<16384?s>>>6|0:(n|0)<-8708?0:255}}function Wo(n,s){var a=0,g=0,k=0,E=0,L=0,R=0,G=0,H=0,ee=0,ce=0,Ae=0;e:{if(!n)break e;if(c[n>>2]=0,c[n+8>>2]=5010,!s){c[n>>2]=2,c[n+4>>2]=0,c[n+8>>2]=5013;break e}if(R=c[s+60>>2],R>>>0<=3){c[n>>2]=7,c[n+4>>2]=0,c[n+8>>2]=5050;break e}if(a=c[s+64>>2],k=F[a+1|0],E=F[a+2|0],g=F[a|0],L=g>>>4&1,p[n+42|0]=L,G=g>>>1&7,p[n+41|0]=G,H=(g^-1)&1,p[n+40|0]=H,g=(g|k<<8|E<<16)>>>5|0,c[n+44>>2]=g,G>>>0>=4){c[n>>2]=3,c[n+4>>2]=0,c[n+8>>2]=5068;break e}if(!L){c[n>>2]=4,c[n+4>>2]=0,c[n+8>>2]=5099;break e}if(k=R+-3|0,E=a+3|0,H){if(k>>>0<=6){c[n>>2]=7,c[n+4>>2]=0,c[n+8>>2]=5122;break e}if(!(F[a+5|0]==42&&!(F[E|0]!=157|F[a+4|0]!=1))){c[n>>2]=3,c[n+4>>2]=0,c[n+8>>2]=5150;break e}g=F[a+6|0]|F[a+7|0]<<8&16128,Di[n+48>>1]=g,p[n+52|0]=F[a+7|0]>>>6,k=F[a+8|0]|F[a+9|0]<<8&16128,Di[n+50>>1]=k,E=F[a+9|0],c[n+292>>2]=k+15>>>4,c[n+288>>2]=g+15>>>4,p[n+53|0]=E>>>6,c[s+84>>2]=0,c[s+4>>2]=k,c[s>>2]=g,c[s+100>>2]=k,c[s+96>>2]=g,c[s+92>>2]=0,c[s+88>>2]=k,c[s+80>>2]=g,c[s+72>>2]=0,c[s+76>>2]=0,c[s+16>>2]=k,c[s+12>>2]=g,s=n+904|0,Di[s>>1]=-1,p[s+2|0]=-1,c[n+120>>2]=0,c[n+112>>2]=1,c[n+116>>2]=0,c[n+104>>2]=0,c[n+108>>2]=0,k=R+-10|0,E=a+10|0,g=c[n+44>>2]}t:{if(g>>>0>k>>>0){if(s=0,c[n>>2])break t;c[n>>2]=7,c[n+4>>2]=0,c[n+8>>2]=5164;break e}a=n+12|0,Er(a,E,g),L=c[n+44>>2],F[n+40|0]&&(ce=n,Ae=Tr(a,1),p[ce+54|0]=Ae,ce=n,Ae=Tr(a,1),p[ce+55|0]=Ae),s=Tr(a,1),c[n+104>>2]=s;i:{if(s){if(ce=n,Ae=Tr(a,1),c[ce+108>>2]=Ae,Tr(a,1)&&(ce=n,Ae=Tr(a,1),c[ce+112>>2]=Ae,s=n,Tr(a,1)?g=js(a,7):g=0,p[s+116|0]=g,s=n,Tr(a,1)?g=js(a,7):g=0,p[s+117|0]=g,s=n,Tr(a,1)?g=js(a,7):g=0,p[s+118|0]=g,s=n,Tr(a,1)?g=js(a,7):g=0,p[s+119|0]=g,s=n,Tr(a,1)?g=js(a,6):g=0,p[s+120|0]=g,s=n,Tr(a,1)?g=js(a,6):g=0,p[s+121|0]=g,s=n,Tr(a,1)?g=js(a,6):g=0,p[s+122|0]=g,s=n,Tr(a,1)?g=js(a,6):g=0,p[s+123|0]=g),!c[n+108>>2])break i;s=n,Tr(a,1)?g=Tr(a,8):g=255,p[s+904|0]=g,s=n,Tr(a,1)?g=Tr(a,8):g=255,p[s+905|0]=g,s=n,g=255;n:{if(!Tr(a,1))break n;g=Tr(a,8)}p[s+906|0]=g;break i}c[n+108>>2]=0}if(c[n+36>>2]){if(s=0,c[n>>2])break t;c[n>>2]=3,c[n+4>>2]=0,c[n+8>>2]=5185;break e}ce=n,Ae=Tr(a,1),c[ce+56>>2]=Ae,ce=n,Ae=Tr(a,6),c[ce+60>>2]=Ae,ce=n- -64|0,Ae=Tr(a,3),c[ce>>2]=Ae,s=Tr(a,1),c[n+68>>2]=s;i:{if(!s||!Tr(a,1)||(Tr(a,1)&&(ce=n,Ae=js(a,6),c[ce+72>>2]=Ae),Tr(a,1)&&(ce=n,Ae=js(a,6),c[ce+76>>2]=Ae),Tr(a,1)&&(ce=n,Ae=js(a,6),c[ce+80>>2]=Ae),Tr(a,1)&&(ce=n,Ae=js(a,6),c[ce+84>>2]=Ae),Tr(a,1)&&(ce=n,Ae=js(a,6),c[ce+88>>2]=Ae),Tr(a,1)&&(ce=n,Ae=js(a,6),c[ce+92>>2]=Ae),Tr(a,1)&&(ce=n,Ae=js(a,6),c[ce+96>>2]=Ae),!Tr(a,1)))break i;ce=n,Ae=js(a,6),c[ce+100>>2]=Ae}if(s=n,c[n+60>>2]?g=c[n+56>>2]?1:2:g=0,c[s+2308>>2]=g,c[n+36>>2]){if(s=0,c[n>>2])break t;c[n>>2]=3,c[n+4>>2]=0,c[n+8>>2]=5213;break e}H=Tr(a,2),R=-1<<H^-1,c[n+312>>2]=R,g=7;i:{if(s=k-L|0,G=re(R,3),s>>>0>=G>>>0){if(ee=k+E|0,g=s-G|0,s=E+L|0,E=G+s|0,H)for(G=R>>>0>1?R:1,k=0;L=F[s|0]|F[s+1|0]<<8|F[s+2|0]<<16,L=L>>>0>g>>>0?g:L,Er((re(k,28)+n|0)+316|0,E,L),g=g-L|0,E=E+L|0,s=s+3|0,k=k+1|0,(G|0)!=(k|0););if(Er((re(R,28)+n|0)+316|0,E,g),g=5,E>>>0<ee>>>0)break i}if(s=0,c[n>>2])break t;c[n>>2]=g,c[n+4>>2]=0,c[n+8>>2]=5240;break e}if(vu(n),!F[n+40|0]){if(s=0,c[n>>2])break t;c[n>>2]=4,c[n+4>>2]=0,c[n+8>>2]=5264;break e}Tr(a,1),Ta(a,n),c[n+4>>2]=1,s=1}return s}return 0}function Cs(n,s){var a=0,g=0,k=0,E=0,L=0,R=0,G=0,H=0,ee=0,ce=0,Ae=0,Ne=0,Ze=0,mt=0,Tt=0,Ot=0,ni=0,ci=0,Mi=0,ki=0,Gi=0;if(k=c[n+20>>2],c[k+108>>2]<(s|0)){e:{if(!c[n+132>>2]&&(hc(),!c[n+132>>2]))break e;Ae=c[k+100>>2],ci=re(Ae,c[k+104>>2]),G=c[k+112>>2],n=(G|0)/(Ae|0)|0,ni=re(s,Ae);t:{i:{if((G|0)>=(ni|0)){Ze=k+48|0;break i}H=G-re(n,Ae)|0,L=c[k+152>>2],E=0;n:{if(!L)break n;E=c[c[k+160>>2]+(re(c[k+156>>2],n>>L)+(H>>L)<<2)>>2]}if(Ze=k+48|0,c[Ze>>2])break i;for(Mi=c[k+148>>2],ki=c[k+16>>2],mt=k+24|0,Ot=c[k+168>>2]+re(E,548)|0;;){if(!(H&Mi)){a=c[k+168>>2],L=c[k+152>>2],E=0;n:{if(!L)break n;E=c[c[k+160>>2]+(re(c[k+156>>2],n>>L)+(H>>L)<<2)>>2]}Ot=a+re(E,548)|0}g=c[k+44>>2],(g|0)>=32&&(ke(mt),g=c[k+44>>2]),ee=k,E=c[mt+4>>2],a=E,R=g&63,L=R&31,Tt=c[mt>>2],a=c[Ot>>2]+(((32<=(R&63)>>>0?a>>>L|0:((1<<L)-1&a)<<32-L|Tt>>>L)&255)<<2)|0,L=F[a|0],L>>>0>=9&&(g=g+8|0,c[k+44>>2]=g,R=(mn[a+2>>1]<<2)+a|0,a=E,Ne=g&63,ce=Ne&31,a=R+(((-1<<L+-8^-1)&(32<=Ne>>>0?a>>>ce|0:((1<<ce)-1&a)<<32-ce|Tt>>>ce))<<2)|0,L=F[a|0]),R=(L&255)+g|0,c[ee+44>>2]=R,a=mn[a+2>>1];n:{if(a>>>0<=255){if(p[G+ki|0]=a,G=G+1|0,H=H+1|0,(H|0)<(Ae|0))break n;if(E=n+1|0,H=0,(n|0)>=(s|0)){n=E;break n}if(E&15){n=E;break n}B(k,E),n=E;break n}if(ee=1,a>>>0>279)break t;L=a+-256|0,a>>>0>=260&&(E=a+-258>>1,L=io(mt,E)+((L&1|2)<<E)|0,Tt=c[k+24>>2],R=c[k+44>>2],E=c[k+28>>2]),ce=k,a=E,Ne=R&63,g=Ne&31,g=c[Ot+16>>2]+(((32<=Ne>>>0?a>>>g|0:((1<<g)-1&a)<<32-g|Tt>>>g)&255)<<2)|0,a=F[g|0],a>>>0>=9&&(R=R+8|0,c[k+44>>2]=R,Gi=(mn[g+2>>1]<<2)+g|0,Ne=R&63,g=Ne&31,g=Gi+(((-1<<a+-8^-1)&(32<=Ne>>>0?E>>>g|0:((1<<g)-1&E)<<32-g|Tt>>>g))<<2)|0,a=F[g|0]),E=(a&255)+R|0,c[ce+44>>2]=E,g=mn[g+2>>1],(E|0)>=32&&ke(mt),E=L+1|0,g>>>0>=4&&(a=g+-2>>1,g=io(mt,a)+((g&1|2)<<a)|0);o:{if((g+1|0)>=121){a=g+-119|0;break o}a=F[g+1264|0],a=(re(a>>>4|0,Ae)-(a&15)|0)+8|0,a=(a|0)>1?a:1}if((ci-G|0)<(E|0)|(G|0)<(a|0))break t;g=G+ki|0,R=g-a|0;o:{l:{if((E|0)<8)break l;r:{u:switch(a+-1|0){case 0:a=F[R|0],ee=re(a,16843009);break r;case 1:a=F[R|0]|F[R+1|0]<<8,ee=re(a,65537);break r;case 3:break u;default:break l}a=F[R|0]|F[R+1|0]<<8|(F[R+2|0]<<16|F[R+3|0]<<24),ee=a}r:{u:{s:{if(g&3){if(p[g|0]=a,ee=ba(ee,24),R=R+1|0,g=g+1|0,g&3)break s;a=L>>>2|0;break u}L=E,a=L>>>2|0;break u}for(;p[g|0]=F[R|0],ce=L,L=L+-1|0,ee=ba(ee,24),R=R+1|0,g=g+1|0,!!(g&3););if(a=0,(ce|0)<5)break r;a=L>>2}for(ce=(a|0)>1?a:1,a=0;c[(a<<2)+g>>2]=ee,a=a+1|0,(ce|0)!=(a|0););a=ce<<2}if((a|0)>=(L|0))break o;for(;p[a+g|0]=F[a+R|0],a=a+1|0,(L|0)!=(a|0););break o}if((a|0)<(E|0)){if(a=0,(E|0)<=0)break o;for(;p[a+g|0]=F[a+R|0],ee=(a|0)!=(L|0),a=a+1|0,!!ee;);break o}Xr(g,R,E)}if(G=E+G|0,H=E+H|0,(H|0)>=(Ae|0))for(;H=H-Ae|0,E=n,n=E+1|0,n&15|(E|0)>=(s|0)||B(k,n),(H|0)>=(Ae|0););if(!(H&Mi)|(G|0)>=(ni|0))break n;a=c[k+168>>2],L=c[k+152>>2],E=0;o:{if(!L)break o;E=c[c[k+160>>2]+(re(c[k+156>>2],n>>L)+(H>>L)<<2)>>2]}Ot=a+re(E,548)|0}if(c[Ze>>2]){c[Ze>>2]=1;break i}if(g=0,g=c[k+40>>2]==c[k+36>>2]?c[k+44>>2]>64:g,c[Ze>>2]=g,(G|0)>=(ni|0))break i;if(!!g)break}}B(k,(n|0)>(s|0)?s:n),ee=0}s=Ze,E=s,n=1;t:{if(c[s>>2]||(n=0,c[k+40>>2]!=c[k+36>>2]))break t;n=c[k+44>>2]>64}return c[E>>2]=n,!n|(ci|0)<=(G|0)&&!ee?(c[k+112>>2]=G,1):(c[k>>2]=n?5:3,0)}n=Hl(k,c[k+16>>2],c[k+100>>2],c[k+104>>2],s,1)}else n=1;return n}function ds(n,s){n=n|0,s=s|0;var a=0,g=0,k=0,E=0,L=0,R=0,G=0,H=0,ee=0,ce=0,Ae=0,Ne=0,Ze=0,mt=0,Tt=0,Ot=0,ni=0,ci=0,Mi=0,ki=0,Gi=0,sn=0,vn=0,or=0,Ir=0;ci=Nn+-64|0,Nn=ci,k=c[n+2280>>2],vn=c[n+160>>2],Tt=c[n+2268>>2],E=c[n+2284>>2],Gi=F[c[n+2308>>2]+4863|0],a=Gi>>>1|0,Ne=c[n+2276>>2],Mi=c[n+2272>>2],Ir=c[n+308>>2],sn=c[n+164>>2],c[n+148>>2]==2&&Bu(n,n+160|0),L=re(k,vn),or=re(k,Gi),g=re(E,vn),ki=re(a,E);e:{if(!c[n+168>>2]||(a=c[n+296>>2],(a|0)>=c[n+304>>2]))break e;for(Ze=c[n+164>>2];;){ce=c[n+172>>2]+(a<<2)|0,R=F[ce|0];t:{if(!R)break t;if(E=c[n+160>>2],H=c[n+2280>>2],G=(c[n+2268>>2]+(re(E,H)<<4)|0)+(a<<4)|0,c[n+2308>>2]==1){if((a|0)>=1&&ft[c[2717]](G,H,R+4|0),F[ce+2|0]&&ft[c[2719]](G,H,R),E=ce+2|0,(Ze|0)>=1&&ft[c[2716]](G,H,R+4|0),!F[E|0])break t;ft[c[2718]](G,H,R);break t}if(ee=F[ce+1|0],Ot=c[n+2284>>2],k=re(Ot,E)<<3,E=a<<3,ni=(k+c[n+2276>>2]|0)+E|0,mt=E+(k+c[n+2272>>2]|0)|0,Ae=F[ce+3|0],(a|0)>=1&&(E=R+4|0,ft[c[2709]](G,H,E,ee,Ae),ft[c[2711]](mt,ni,Ot,E,ee,Ae)),F[ce+2|0]&&(ft[c[2713]](G,H,R,ee,Ae),ft[c[2715]](mt,ni,Ot,R,ee,Ae)),k=ce+2|0,(Ze|0)>=1&&(E=R+4|0,ft[c[2708]](G,H,E,ee,Ae),ft[c[2710]](mt,ni,Ot,E,ee,Ae)),!F[k|0])break t;ft[c[2712]](G,H,R,ee,Ae),ft[c[2714]](mt,ni,Ot,R,ee,Ae)}if(a=a+1|0,!((a|0)<c[n+304>>2]))break}}Ae=L<<4,mt=Tt-or|0,H=g<<3,Ze=Ne-ki|0,Tt=Mi-ki|0;e:{if(!c[n+540>>2]||(G=c[n+296>>2],g=c[n+304>>2],(G|0)>=(g|0)))break e;for(ee=n+552|0;;){if(a=c[n+176>>2]+re(G,800)|0,k=F[a+796|0],k>>>0>=4){for(Ne=a+796|0,ce=c[n+2284>>2],Ot=re(ce,c[n+160>>2])<<3,Mi=c[n+2276>>2],E=c[n+2272>>2],R=c[n+548>>2],L=c[n+544>>2],g=0;a=ee+(L<<2)|0,ni=c[a>>2]-c[ee+(R<<2)>>2]|0,c[a>>2]=ni&2147483647,a=c[n+544>>2]+1|0,L=(a|0)==55?0:a,c[n+544>>2]=L,a=c[n+548>>2]+1|0,R=(a|0)==55?0:a,c[n+548>>2]=R,p[g+ci|0]=re(k,ni<<1>>24)>>>8^128,g=g+1|0,(g|0)!=64;);for(k=G<<3,ft[c[2720]](ci,k+(E+Ot|0)|0,ce),E=F[Ne|0],R=c[n+548>>2],L=c[n+544>>2],g=0;a=ee+(L<<2)|0,Ne=c[a>>2]-c[ee+(R<<2)>>2]|0,c[a>>2]=Ne&2147483647,a=c[n+544>>2]+1|0,L=(a|0)==55?0:a,c[n+544>>2]=L,a=c[n+548>>2]+1|0,R=(a|0)==55?0:a,c[n+548>>2]=R,p[g+ci|0]=re(E,Ne<<1>>24)>>>8^128,g=g+1|0,(g|0)!=64;);ft[c[2720]](ci,k+(Ot+Mi|0)|0,ce),g=c[n+304>>2]}if(G=G+1|0,!((G|0)<(g|0)))break}}mt=Ae+mt|0,E=H+Ze|0,Ne=H+Tt|0,Mi=Ir+-1|0;e:{t:{g=1;i:{if(!c[s+44>>2])break i;a=sn<<4,k=a+16|0;n:{if(sn){c[s+24>>2]=Ne,c[s+20>>2]=mt,L=E,a=a-Gi|0;break n}c[s+20>>2]=Ae+c[n+2268>>2],c[s+24>>2]=H+c[n+2272>>2],L=H+c[n+2276>>2]|0,a=0}if(c[s+28>>2]=L,L=0,c[s+104>>2]=0,g=c[s+88>>2],k=k-((sn|0)>=(Mi|0)?0:Gi)|0,Ze=(k|0)>(g|0)?g:k,!(!c[n+2348>>2]|(Ze|0)<=(a|0))&&(L=Fs(n,s,a,Ze-a|0),c[s+104>>2]=L,!L))break t;if(k=c[s+84>>2],(k|0)>(a|0)){g=k-a|0,c[s+20>>2]=c[s+20>>2]+re(g,c[n+2280>>2]),a=re(c[n+2284>>2],g>>1),c[s+24>>2]=a+c[s+24>>2],c[s+28>>2]=a+c[s+28>>2];n:{if(!L){L=0;break n}L=re(g,c[s>>2])+L|0,c[s+104>>2]=L}a=k}if(g=1,(Ze|0)<=(a|0))break i;Tt=c[s+76>>2],c[s+20>>2]=Tt+c[s+20>>2],g=Tt>>1,c[s+24>>2]=g+c[s+24>>2],c[s+28>>2]=g+c[s+28>>2],L&&(c[s+104>>2]=L+Tt),c[s+8>>2]=a-k,c[s+16>>2]=Ze-a,c[s+12>>2]=c[s+80>>2]-Tt,g=ft[c[s+44>>2]](s)|0}if(c[n+156>>2]!=(vn+1|0)|(sn|0)>=(Mi|0))break e;Xr(c[n+2268>>2]-or|0,mt+(c[n+2280>>2]<<4)|0,or),s=0-ki|0,Xr(s+c[n+2272>>2]|0,Ne+(c[n+2284>>2]<<3)|0,ki),Xr(s+c[n+2276>>2]|0,E+(c[n+2284>>2]<<3)|0,ki);break e}g=Qo(n,3,4912)}return Nn=ci- -64|0,g|0}function jr(n){n=n|0;var s=0,a=0,g=0,k=0,E=0,L=0,R=0,G=0,H=0;e:{if(!n)break e;g=n+-8|0,a=c[n+-4>>2],n=a&-8,E=g+n|0;t:{if(a&1)break t;if(!(a&3)||(a=c[g>>2],g=g-a|0,g>>>0<$n[2888]))break e;if(n=n+a|0,c[2889]!=(g|0)){if(a>>>0<=255){if(k=c[g+8>>2],a=a>>>3|0,s=c[g+12>>2],(s|0)==(k|0)){G=11536,H=c[2884]&ba(-2,a),c[G>>2]=H;break t}c[k+12>>2]=s,c[s+8>>2]=k;break t}R=c[g+24>>2],a=c[g+12>>2];i:{if((a|0)!=(g|0)){s=c[g+8>>2],c[s+12>>2]=a,c[a+8>>2]=s;break i}n:{if(k=g+20|0,s=c[k>>2],s||(k=g+16|0,s=c[k>>2],s))break n;a=0;break i}for(;L=k,a=s,k=a+20|0,s=c[k>>2],!(!s&&(k=a+16|0,s=c[a+16>>2],!s)););c[L>>2]=0}if(!R)break t;k=c[g+28>>2],s=(k<<2)+11840|0;i:{if(c[s>>2]==(g|0)){if(c[s>>2]=a,a)break i;G=11540,H=c[2885]&ba(-2,k),c[G>>2]=H;break t}if(c[R+(c[R+16>>2]==(g|0)?16:20)>>2]=a,!a)break t}if(c[a+24>>2]=R,s=c[g+16>>2],s&&(c[a+16>>2]=s,c[s+24>>2]=a),s=c[g+20>>2],!s)break t;c[a+20>>2]=s,c[s+24>>2]=a;break t}if(a=c[E+4>>2],(a&3)!=3)break t;c[2886]=n,c[E+4>>2]=a&-2,c[g+4>>2]=n|1,c[n+g>>2]=n;return}if(E>>>0<=g>>>0||(a=c[E+4>>2],!(a&1)))break e;t:{if(!(a&2)){if((E|0)==c[2890]){if(c[2890]=g,n=c[2887]+n|0,c[2887]=n,c[g+4>>2]=n|1,c[2889]!=(g|0))break e;c[2886]=0,c[2889]=0;return}if((E|0)==c[2889]){c[2889]=g,n=c[2886]+n|0,c[2886]=n,c[g+4>>2]=n|1,c[n+g>>2]=n;return}n=(a&-8)+n|0;i:{if(a>>>0<=255){if(s=c[E+8>>2],a=a>>>3|0,k=c[E+12>>2],(s|0)==(k|0)){G=11536,H=c[2884]&ba(-2,a),c[G>>2]=H;break i}c[s+12>>2]=k,c[k+8>>2]=s;break i}R=c[E+24>>2],a=c[E+12>>2];n:{if((E|0)!=(a|0)){s=c[E+8>>2],c[s+12>>2]=a,c[a+8>>2]=s;break n}o:{if(k=E+20|0,s=c[k>>2],s||(k=E+16|0,s=c[k>>2],s))break o;a=0;break n}for(;L=k,a=s,k=a+20|0,s=c[k>>2],!(!s&&(k=a+16|0,s=c[a+16>>2],!s)););c[L>>2]=0}if(!R)break i;k=c[E+28>>2],s=(k<<2)+11840|0;n:{if((E|0)==c[s>>2]){if(c[s>>2]=a,a)break n;G=11540,H=c[2885]&ba(-2,k),c[G>>2]=H;break i}if(c[R+((E|0)==c[R+16>>2]?16:20)>>2]=a,!a)break i}if(c[a+24>>2]=R,s=c[E+16>>2],s&&(c[a+16>>2]=s,c[s+24>>2]=a),s=c[E+20>>2],!s)break i;c[a+20>>2]=s,c[s+24>>2]=a}if(c[g+4>>2]=n|1,c[n+g>>2]=n,c[2889]!=(g|0))break t;c[2886]=n;return}c[E+4>>2]=a&-2,c[g+4>>2]=n|1,c[n+g>>2]=n}if(n>>>0<=255){n=n>>>3|0,a=(n<<3)+11576|0,s=c[2884],n=1<<n;t:{if(!(s&n)){c[2884]=n|s,n=a;break t}n=c[a+8>>2]}c[a+8>>2]=g,c[n+12>>2]=g,c[g+12>>2]=a,c[g+8>>2]=n;return}c[g+16>>2]=0,c[g+20>>2]=0,E=g,k=n>>>8|0,s=0;t:{if(!k||(s=31,n>>>0>16777215))break t;a=k,k=k+1048320>>>16&8,s=a<<k,R=s+520192>>>16&4,s=s<<R,L=s+245760>>>16&2,s=(s<<L>>>15|0)-(L|(k|R))|0,s=(s<<1|n>>>s+21&1)+28|0}c[E+28>>2]=s,L=(s<<2)+11840|0;t:{i:{k=c[2885],a=1<<s;n:{if(!(k&a)){c[2885]=a|k,c[L>>2]=g,c[g+24>>2]=L;break n}for(k=n<<((s|0)==31?0:25-(s>>>1|0)|0),a=c[L>>2];;){if(s=a,(c[a+4>>2]&-8)==(n|0))break i;if(a=k>>>29|0,k=k<<1,L=(s+(a&4)|0)+16|0,a=c[L>>2],!a)break}c[L>>2]=g,c[g+24>>2]=s}c[g+12>>2]=g,c[g+8>>2]=g;break t}n=c[s+8>>2],c[n+12>>2]=g,c[s+8>>2]=g,c[g+24>>2]=0,c[g+12>>2]=s,c[g+8>>2]=n}if(n=c[2892]+-1|0,c[2892]=n,n)break e;for(g=11992;n=c[g>>2],g=n+8|0,!!n;);c[2892]=-1}}function Es(n,s,a,g,k){var E=0,L=0,R=0,G=0,H=0,ee=0,ce=0,Ae=0,Ne=0,Ze=0,mt=0,Tt=0,Ot=0,ni=0,ci=0,Mi=0,ki=0,Gi=0,sn=0,vn=0,or=0;R=Nn-128|0,c[R+120>>2]=0,c[R+124>>2]=0,c[R+112>>2]=0,c[R+116>>2]=0,c[R+104>>2]=0,c[R+108>>2]=0,c[R+96>>2]=0,c[R+100>>2]=0,c[R+88>>2]=0,c[R+92>>2]=0,c[R+80>>2]=0,c[R+84>>2]=0,c[R+72>>2]=0,c[R+76>>2]=0,c[R+64>>2]=0,c[R+68>>2]=0;e:{if((g|0)>=1){for(;;){if(L=c[(E<<2)+a>>2],(L|0)>15)break e;if(L=(R- -64|0)+(L<<2)|0,c[L>>2]=c[L>>2]+1,E=E+1|0,(E|0)==(g|0))break}E=c[R+64>>2]}else E=0;if((E|0)==(g|0)||(c[R+4>>2]=0,E=c[R+68>>2],(E|0)>2)||(c[R+8>>2]=E,L=c[R+72>>2],(L|0)>4)||(E=E+L|0,c[R+12>>2]=E,L=c[R+76>>2],(L|0)>8)||(E=E+L|0,c[R+16>>2]=E,L=c[R+80>>2],(L|0)>16)||(E=E+L|0,c[R+20>>2]=E,L=c[R+84>>2],(L|0)>32)||(E=E+L|0,c[R+24>>2]=E,L=c[R+88>>2],(L|0)>64)||(E=E+L|0,c[R+28>>2]=E,L=c[R+92>>2],(L|0)>128)||(E=E+L|0,c[R+32>>2]=E,L=c[R+96>>2],(L|0)>256)||(E=E+L|0,c[R+36>>2]=E,L=c[R+100>>2],(L|0)>512)||(E=E+L|0,c[R+40>>2]=E,L=c[R+104>>2],(L|0)>1024)||(E=E+L|0,c[R+44>>2]=E,L=c[R+108>>2],(L|0)>2048)||(E=E+L|0,c[R+48>>2]=E,L=c[R+112>>2],(L|0)>4096)||(E=E+L|0,c[R+52>>2]=E,L=c[R+116>>2],(L|0)>8192)||(E=E+L|0,c[R+56>>2]=E,L=c[R+120>>2],(L|0)>16384))break e;if(c[R+60>>2]=E+L,E=0,(g|0)>0)for(;;){L=c[(E<<2)+a>>2];t:{if((L|0)<1)break t;if(k){G=R+(L<<2)|0,L=c[G>>2],c[G>>2]=L+1,Di[(L<<1)+k>>1]=E;break t}L=R+(L<<2)|0,c[L>>2]=c[L>>2]+1}if(E=E+1|0,(E|0)==(g|0))break}if(L=1<<s,mt=1,ce=c[R+60>>2],(ce|0)==1){if(!k)return L;for(a=mn[k>>1]<<16,E=L;s=E+-1|0,g=(s<<2)+n|0,Di[g>>1]=a,Di[g+2>>1]=a>>>16,g=(E|0)>1,E=s,!!g;);return L}ni=1;t:{i:{if((s|0)<1)break i;for(Ne=2,E=1;;){if(Ze=mt<<1,ci=(R- -64|0)+(E<<2)|0,g=c[ci>>2],mt=Ze-g|0,(mt|0)<0)break e;if(a=E,!(!n|(g|0)<1)){for(G=g+Ae|0,Mi=a&255,ee=1<<a+-1;;){for(ki=(H<<2)+n|0,g=Mi|mn[(Ae<<1)+k>>1]<<16,E=L;E=E-Ne|0,Tt=ki+(E<<2)|0,Di[Tt>>1]=g,Di[Tt+2>>1]=g>>>16,(E|0)>0;);for(g=ee;E=g,g=E>>>1|0,!!(E&H););if(H=E?E+(E+-1&H)|0:H,Ae=Ae+1|0,(G|0)==(Ae|0))break}c[ci>>2]=0,Ae=G}if(ni=Ze+ni|0,Ne=Ne<<1,E=a+1|0,(s|0)==(a|0))break}if((s|0)<=14)break i;Ze=L;break t}for(vn=L+-1|0,G=s,ee=-1,Ne=2,ce=n,Ze=L;;){if(Ot=0,ci=G,Gi=mt<<1,G=G+1|0,Tt=(R- -64|0)+(G<<2)|0,a=c[Tt>>2],mt=Gi-a|0,(mt|0)<0)break e;if(!(!n|(a|0)<1))for(ki=1<<ci,Ot=G-s|0,or=Ot&255,Mi=1<<Ot,E=ee;;){ee=H&vn;i:{if((ee|0)==(E|0)){ee=E;break i}if(ce=(L<<2)+ce|0,L=Mi,E=Ot,(ci|0)<=13){E=G,g=E,a=Mi-a|0;n:{if((a|0)<1)break n;for(;;){if(g=15,E=E+1|0,(E|0)==15)break n;if(g=E,a=(a<<1)-c[(R- -64|0)+(E<<2)>>2]|0,!((a|0)>0))break}}E=g-s|0,L=1<<E}a=(ee<<2)+n|0,p[a|0]=s+E,Di[a+2>>1]=(ce-n>>>2|0)-ee,Ze=L+Ze|0}for(g=(H>>>s<<2)+ce|0,a=or|mn[(Ae<<1)+k>>1]<<16,E=L;E=E-Ne|0,sn=g+(E<<2)|0,Di[sn>>1]=a,Di[sn+2>>1]=a>>>16,(E|0)>0;);for(g=ki;E=g,g=E>>>1|0,!!(E&H););if(g=c[Tt>>2],a=g+-1|0,c[Tt>>2]=a,H=E?E+(E+-1&H)|0:H,Ae=Ae+1|0,E=ee,!((g|0)>1))break}if(ni=ni+Gi|0,Ne=Ne<<1,(G|0)==15)break}ce=c[R+60>>2]}Ot=((ce<<1)+-1|0)==(ni|0)?Ze:0}return Ot}function vs(n,s){var a=0,g=0,k=0,E=0,L=0,R=0,G=0,H=0,ee=0,ce=0,Ae=0,Ne=0,Ze=0,mt=0,Tt=0,Ot=0,ni=0,ci=0,Mi=0,ki=0,Gi=0,sn=0,vn=0,or=0;Ot=Nn-32|0,Nn=Ot,L=c[n+2256>>2],ce=c[n+2296>>2],ni=L+(ce<<1)|0,mt=c[n+2304>>2];e:{t:{if(c[n+2236>>2]&&(a=re(ce,800)+mt|0,F[a+797|0]))break t;if(k=re(ce,800)+mt|0,ci=F[k+798|0],G=3,g=Jo(k,0,768),!F[g+768|0]){a=Ot,c[a+24>>2]=0,c[a+28>>2]=0,c[a+16>>2]=0,c[a+20>>2]=0,c[a+8>>2]=0,c[a+12>>2]=0,c[a>>2]=0,c[a+4>>2]=0,E=L+-1|0,G=L+(ce<<1)|0,H=ft[c[2661]](s,n+2032|0,F[E|0]+F[G+1|0]|0,((ci<<5)+n|0)+784|0,0,a)|0,a=(H|0)>0,p[E|0]=a,p[G+1|0]=a;i:{if((H|0)>=2){ft[c[2674]](Ot,g);break i}a=re(ce,800)+mt|0,g=Di[Ot>>1]+3>>>3|0,Di[a+480>>1]=g,Di[a+448>>1]=g,Di[a+416>>1]=g,Di[a+384>>1]=g,Di[a+352>>1]=g,Di[a+320>>1]=g,Di[a+288>>1]=g,Di[a+256>>1]=g,Di[a+224>>1]=g,Di[a+192>>1]=g,Di[a+160>>1]=g,Di[a+128>>1]=g,Di[a+96>>1]=g,Di[a+64>>1]=g,Di[a+32>>1]=g,Di[a>>1]=g}G=0,E=1}for(a=F[ni|0]&15,g=((ci<<5)+n|0)+776|0,ki=L+-2|0,L=F[ki|0]&15,G=(re(G,68)+n|0)+1964|0;H=ft[c[2661]](s,G,(L&1)+(a&1)|0,g,E,k)|0,Ae=mn[k>>1],R=(H|0)>(E|0),ee=a>>>1|0,a=ft[c[2661]](s,G,R+(ee&1)|0,g,E,k+32|0)|0,Ne=mn[k+32>>1],Ze=(a|0)>(E|0),R=(ee&126|R<<7)>>>1|0,ee=ft[c[2661]](s,G,Ze+(R&1)|0,g,E,k- -64|0)|0,Gi=mn[k+64>>1],Mi=(ee|0)>(E|0),Ze=(R|Ze<<7)>>>1|0,R=ft[c[2661]](s,G,Mi+(Ze&1)|0,g,E,k+96|0)|0,sn=(((a|0)>3?3:(a|0)<2?(Ne|0)!=0:2)|((H|0)>3?12:(H|0)<2?((Ae|0)!=0)<<2:8))<<4|sn<<8|((ee|0)>3?12:(ee|0)<2?((Gi|0)!=0)<<2:8)|((R|0)>3?3:(R|0)<2?mn[k+96>>1]!=0:2),H=(R|0)>(E|0),a=H<<3|(Ze|Mi<<7)>>>5,L=H<<7|(L&254)>>>1,k=k+128|0,Tt=Tt+1|0,(Tt|0)!=4;);for(G=n+2100|0,Tt=L>>>4|0,ee=a&255,H=((ci<<5)+n|0)+792|0,L=0,a=1,E=0;g=E|4,Ae=F[ki|0]>>>g|0,R=F[ni|0]>>>g|0,g=ft[c[2661]](s,G,(Ae&1)+(R&1)|0,H,0,k)|0,Ze=mn[k>>1],Ne=(g|0)>0,R=ft[c[2661]](s,G,Ne+(R>>>1&1)|0,H,0,k+32|0)|0,Gi=mn[k+32>>1],Ae=ft[c[2661]](s,G,Ne+(Ae>>>1&1)|0,H,0,k- -64|0)|0,Mi=mn[k+64>>1],vn=(Ae|0)>0,or=(R|0)>0,Ne=ft[c[2661]](s,G,vn+or|0,H,0,k+96|0)|0,L=((((R|0)>3?3:(R|0)<2?(Gi|0)!=0:2)|((g|0)>3?12:(g|0)<2?((Ze|0)!=0)<<2:8))<<4|((Ae|0)>3?12:(Ae|0)<2?((Mi|0)!=0)<<2:8)|((Ne|0)>3?3:(Ne|0)<2?mn[k+96>>1]!=0:2))<<(E<<2)|L,g=(Ne|0)>0,Tt=(g<<5|or<<4)<<E|Tt,ee=(g<<1|vn)<<4<<E|ee,k=k+128|0,g=a,a=0,E=2,!!g;);p[ni|0]=ee,p[ki|0]=Tt,a=re(ce,800)+mt|0,c[a+792>>2]=L,c[a+788>>2]=sn,p[a+796|0]=L&43690?0:c[((ci<<5)+n|0)+804>>2],E=(L|sn)!=0;break e}p[ni|0]=0,p[L+-2|0]=0,F[a+768|0]||(p[(L+(ce<<1)|0)+1|0]=0,p[L+-1|0]=0),a=re(ce,800)+mt|0,c[a+788>>2]=0,c[a+792>>2]=0,p[a+796|0]=0}return c[n+2308>>2]>=1&&(a=c[n+2260>>2]+(c[n+2296>>2]<<2)|0,g=n,n=re(ce,800)+mt|0,n=c[((g+(F[n+798|0]<<3)|0)+(F[n+768|0]<<2)|0)+2312>>2],p[a|0]=n,p[a+1|0]=n>>>8,p[a+2|0]=n>>>16,p[a+3|0]=n>>>24,p[a+2|0]=F[a+2|0]|E),Nn=Ot+32|0,!c[s+24>>2]}function Gl(n,s,a,g,k){var E=0,L=0,R=0,G=0,H=0,ee=0,ce=0,Ae=0,Ne=0,Ze=0,mt=0,Tt=0,Ot=0,ni=0,ci=0,Mi=0,ki=0;Ne=Nn-16|0,Nn=Ne,L=c[n+8>>2];e:{t:switch(c[n>>2]){case 2:ft[c[2733]](g,re(L,a-s|0),k);break e;case 0:i:{if(s){ce=L+-1|0,ee=k,E=s;break i}if(E=c[g>>2],E=E+-16777216&-16711936|E&16711935,c[k>>2]=E,ce=L+-1|0,(L|0)>=2)for(ee=k+4|0,H=g+4|0;Ae=G<<2,R=c[Ae+H>>2],E=(R&-16711936)+(E&-16711936)&-16711936|(R&16711935)+(E&16711935)&16711935,c[ee+Ae>>2]=E,G=G+1|0,(ce|0)!=(G|0););E=L<<2,ee=E+k|0,g=g+E|0,E=1}if(H=E,(H|0)<(a|0))for(E=c[n+4>>2],Ot=1<<E,Mi=Ot+-1|0,Ze=0-Ot|0,mt=0-L|0,Tt=ce+Ot>>>E|0,Ae=c[n+16>>2]+(re(Tt,H>>E)<<2)|0;;){if(R=c[g>>2],ce=mt<<2,E=c[ce+ee>>2],c[ee>>2]=(R&-16711936)+(E&-16711936)&-16711936|(R&16711935)+(E&16711935)&16711935,E=1,G=Ae,(L|0)>=2)for(;R=E<<2,ci=R+ee|0,ki=g+R|0,ni=Ot+(E&Ze)|0,R=(ni|0)>(L|0)?L:ni,ft[c[(c[G>>2]>>>6&60)+10960>>2]](ki,ce+ci|0,R-E|0,ci),G=G+4|0,E=R,(L|0)>(ni|0););if(H=H+1|0,Ae=Mi&H?Ae:(Tt<<2)+Ae|0,E=L<<2,ee=E+ee|0,g=g+E|0,(a|0)==(H|0))break}if(c[n+12>>2]==(a|0))break e;n=L<<2,Xr(k-n|0,(re(L,(s^-1)+a|0)<<2)+k|0,n);break e;case 1:if((a|0)<=(s|0))break e;for(E=c[n+4>>2],Ze=1<<E,mt=L&0-Ze,Tt=L-mt|0,ce=Ze+-1|0,G=ce+L>>>E|0,n=c[n+16>>2]+(re(G,s>>E)<<2)|0,ee=(mt|0)<1;;){p[Ne+10|0]=0,Di[Ne+8>>1]=0,H=(L<<2)+g|0;i:{if(ee){E=n;break i}for(Ae=(mt<<2)+g|0,E=n;R=c[E>>2],p[Ne+8|0]=R,p[Ne+10|0]=R>>>16,p[Ne+9|0]=R>>>8,ft[c[2804]](Ne+8|0,g,Ze,k),E=E+4|0,R=Ze<<2,k=R+k|0,g=g+R|0,g>>>0<Ae>>>0;);}if(g>>>0<H>>>0&&(E=c[E>>2],p[Ne+8|0]=E,p[Ne+10|0]=E>>>16,p[Ne+9|0]=E>>>8,ft[c[2804]](Ne+8|0,g,Tt,k),E=Tt<<2,k=E+k|0,g=g+E|0),s=s+1|0,n=ce&s?n:(G<<2)+n|0,(s|0)==(a|0))break}break e;case 3:break t;default:break e}if(E=c[n+4>>2],!((g|0)!=(k|0)|(E|0)<1)){if(k=a-s|0,E=re(k,(L+(1<<E)|0)+-1>>>E|0)<<2,G=((re(k,L)<<2)+g|0)-E|0,k=Rc(G,g,E),ee=c[n+16>>2],ce=c[n+8>>2],n=c[n+4>>2],H=8>>>n|0,(H|0)<=7){if((a|0)<=(s|0))break e;for(Ae=-1<<H^-1,R=-1<<n^-1,n=(ce|0)<1;;){if(E=0,k=0,!n)for(;E&R||(k=F[G+1|0],G=G+4|0),c[g>>2]=c[ee+((k&Ae)<<2)>>2],k=k>>>H|0,g=g+4|0,E=E+1|0,(ce|0)!=(E|0););if(s=s+1|0,(a|0)==(s|0))break}break e}ft[c[2805]](k,ee,g,s,a,ce);break e}if(ee=c[n+16>>2],H=8>>>E|0,(H|0)<=7){if((a|0)<=(s|0))break e;for(Ae=-1<<H^-1,R=-1<<E^-1,n=(L|0)<1;;){if(G=0,E=0,!n)for(;G&R||(E=F[g+1|0],g=g+4|0),c[k>>2]=c[ee+((E&Ae)<<2)>>2],E=E>>>H|0,k=k+4|0,G=G+1|0,(L|0)!=(G|0););if(s=s+1|0,(a|0)==(s|0))break}break e}ft[c[2805]](g,ee,k,s,a,L)}Nn=Ne+16|0}function kl(n,s,a,g,k,E,L,R){var G=0,H=0,ee=0,ce=0,Ae=0,Ne=0,Ze=0,mt=0,Tt=0,Ot=0,ni=0,ci=0,Mi=0,ki=0,Gi=0,sn=0;ce=Nn-16|0,Nn=ce,c[ce+12>>2]=0,c[ce+8>>2]=0,Gi=R?c[R+8>>2]:0;e:{if(!n){ee=7;break e}if(s>>>0<12){ee=7;break e}if(H=s,G=n,Tt=jc(G,5463),!Tt){if(ee=3,(F[n+8|0]|F[n+9|0]<<8|(F[n+10|0]<<16|F[n+11|0]<<24))!=1346520407||(Ze=F[n+4|0]|F[n+5|0]<<8|(F[n+6|0]<<16|F[n+7|0]<<24),Ze+-12>>>0>4294967274))break e;if(!(!Gi|Ze>>>0<=s+-8>>>0)){ee=7;break e}if(H=s+-12|0,H>>>0<8){ee=7;break e}G=n+12|0}mt=jc(G,5468);t:{if(mt){ee=0;break t}if(ee=3,(F[G+4|0]|F[G+5|0]<<8|(F[G+6|0]<<16|F[G+7|0]<<24))!=10)break e;if(H>>>0<18){ee=7;break e}if(Ae=1,ni=(F[G+12|0]|F[G+13|0]<<8|F[G+14|0]<<16)+1|0,ci=(F[G+15|0]|F[G+16|0]<<8|F[G+17|0]<<16)+1|0,_r(ni,0,ci,0),Tt|Fn)break e;ee=F[G+8|0],H=H+-18|0,G=G+18|0,Mi=(ee&2)>>>1|0}k&&(c[k>>2]=ee>>>4&1),E&&(c[E>>2]=Mi),L&&(c[L>>2]=0),c[ce+8>>2]=ci,c[ce+12>>2]=ni;t:{if(!R&&(E=0,!mt&Mi))break t;E=0;i:{if(H>>>0<4)break i;n:{if(Ae|Ze|(F[G|0]|F[G+1|0]<<8|(F[G+2|0]<<16|F[G+3|0]<<24))!=1213221953&&mt|Tt)break n;if(H>>>0<8)break i;for(ki=22;;){if(ee=3,Ne=F[G+4|0]|F[G+5|0]<<8|(F[G+6|0]<<16|F[G+7|0]<<24),Ne>>>0>4294967286||(Ot=Ne+9&-2,ki=Ot+ki|0,ki>>>0>Ze>>>0&&!Tt))break e;if((F[G|0]|F[G+1|0]<<8|(F[G+2|0]<<16|F[G+3|0]<<24))==540561494|(F[G|0]|F[G+1|0]<<8|(F[G+2|0]<<16|F[G+3|0]<<24))==1278758998)break n;if(H>>>0<Ot>>>0)break i;if(Ae=(F[G|0]|F[G+1|0]<<8|(F[G+2|0]<<16|F[G+3|0]<<24))==1213221953,E=Ae?G+8|0:E,sn=Ae?Ne:sn,G=G+Ot|0,H=H-Ot|0,!(H>>>0>=8))break}break i}if(H>>>0<8)break i;Ne=F[G|0]|F[G+1|0]<<8|(F[G+2|0]<<16|F[G+3|0]<<24);n:{if(!((F[G|0]|F[G+1|0]<<8|(F[G+2|0]<<16|F[G+3|0]<<24))!=540561494&&(Ne|0)!=1278758998)){if(Ae=F[G+4|0]|F[G+5|0]<<8|(F[G+6|0]<<16|F[G+7|0]<<24),Ze>>>0>=12&&(ee=3,Ae>>>0>Ze+-12>>>0))break e;if(H=H+-8|0,Ae>>>0>H>>>0&&Gi)break i;G=G+8|0,Ne=(Ne|0)==1278758998;break n}Ae=H,Ne=F[G|0]!=47|H>>>0<5?0:F[G+4|0]<32}if(ee=3,Ae>>>0>4294967286)break e;Mi|!L||(c[L>>2]=Ne?2:1);n:{if(!Ne){if(H>>>0<10)break i;if(St(G,H,Ae,ce+12|0,ce+8|0))break n;break e}if(H>>>0<5)break i;if(!Ui(G,H,ce+12|0,ce+8|0,k))break e}if(c[ce+12>>2]!=(ni|0)|c[ce+8>>2]!=(ci|0)&&!mt)break e;if(!R)break t;c[R+8>>2]=0,c[R+12>>2]=0,c[R+4>>2]=s,c[R>>2]=n,c[R+32>>2]=Ne,c[R+28>>2]=Ze,c[R+24>>2]=Ae,c[R+20>>2]=sn,c[R+16>>2]=E,c[R+12>>2]=G-n;break t}if(R){ee=7;break e}if(ee=7,mt)break e}if(k&&(c[k>>2]=c[k>>2]|(E|0)!=0),a&&(c[a>>2]=c[ce+12>>2]),ee=0,!g)break e;c[g>>2]=c[ce+8>>2]}return Nn=ce+16|0,ee}function zu(n,s){n=n|0,s=s|0;var a=0,g=0,k=0,E=0,L=0,R=0,G=0,H=0,ee=0,ce=0,Ae=0,Ne=0,Ze=0,mt=0;e:{R=c[n+108>>2],a=s-R|0;t:{if((a|0)<1)break t;L=c[n+8>>2],Ne=c[L>>2],g=c[n+100>>2],H=c[n+16>>2]+(re(g,R)<<2)|0,G=c[n+20>>2],ce=c[n+176>>2];i:{if((ce|0)>=1){if(a=ce+-1|0,Gl((re(a,20)+n|0)+180|0,R,s,H,G),(ce|0)<2)break i;for(;g=a+-1|0,Gl((re(g,20)+n|0)+180|0,R,s,G,G),ce=(a|0)>1,a=g,!!ce;);break i}if((G|0)==(H|0))break i;Xr(G,H,re(a,g)<<2)}if(R=c[L+84>>2],H=c[n+108>>2],ce=(R|0)>(H|0),g=c[L+88>>2],g=(g|0)<(s|0)?g:s,a=ce?R:H,(g|0)<=(a|0))break t;if(g=g-a|0,c[L+16>>2]=g,c[L+8>>2]=a-R,a=c[L+76>>2],k=c[L+80>>2]-a|0,c[L+12>>2]=k,Ze=Ne<<2,Ae=(a<<2)+(ce?G+re(Ze,R-H|0)|0:G)|0,a=c[n+12>>2],R=c[a>>2],R>>>0>10)break e;G=c[a+20>>2],mt=c[a+16>>2]+re(G,c[n+116>>2])|0;i:{if(c[L+92>>2]){if((g|0)<1)break i;for(;;){Ne=g-ee|0,ce=_c(c[n+268>>2],Ne),a=re(ee,Ze)+Ae|0,yc(a,Ze,c[c[n+268>>2]+44>>2],ce),ee=bs(c[n+268>>2],Ne,a,Ze)+ee|0,a=0,k=c[n+268>>2];n:{if(c[k+64>>2]>=c[k+56>>2])break n;for(ce=re(E,G)+mt|0,H=c[k+52>>2],Ne=c[k+68>>2];;){if(c[k+24>>2]>0)break n;if(Ni(k),ft[c[2662]](Ne,H,1),Po(Ne,H,R,ce+re(a,G)|0),a=a+1|0,!(c[k+64>>2]<c[k+56>>2]))break}}if(E=a+E|0,!((ee|0)<(g|0)))break}break i}if((g|0)>=1)for(a=g;Po(Ae,k,R,mt),mt=G+mt|0,Ae=Ae+Ze|0,E=(a|0)>1,a=a+-1|0,!!E;);E=g}c[n+116>>2]=c[n+116>>2]+E}c[n+108>>2]=s;return}ee=c[n+116>>2];e:{if(c[L+92>>2]){if((g|0)<1)break e;for(;;){a=g-mt|0,E=_c(c[n+268>>2],a),yc(Ae,Ze,c[c[n+268>>2]+44>>2],E),Ne=re(E,Ze),mt=bs(c[n+268>>2],a,Ae,Ze)+mt|0,R=0,L=c[n+268>>2];t:{if(c[L+64>>2]>=c[L+56>>2])break t;for(G=c[L+52>>2],H=c[L+68>>2],ce=H+3|0,a=ee;;){if(c[L+24>>2]>0)break t;if(Ni(L),ft[c[2662]](H,G,1),k=c[n+12>>2],ft[c[2860]](H,c[k+16>>2]+re(c[k+32>>2],a)|0,G),E=a>>1,ft[c[2861]](H,c[k+20>>2]+re(E,c[k+36>>2])|0,c[k+24>>2]+re(E,c[k+40>>2])|0,G,(a^-1)&1),E=c[k+28>>2],E&&ft[c[2668]](ce,0,G,1,E+re(c[k+44>>2],a)|0,0)|0,R=R+1|0,a=a+1|0,!(c[L+64>>2]<c[L+56>>2]))break}}if(Ae=Ae+Ne|0,ee=ee+R|0,!((mt|0)<(g|0)))break}break e}if((g|0)<1)break e;for(;;){if(ft[c[2860]](Ae,c[a+16>>2]+re(c[a+32>>2],ee)|0,k),E=ee>>1,ft[c[2861]](Ae,c[a+20>>2]+re(E,c[a+36>>2])|0,c[a+24>>2]+re(E,c[a+40>>2])|0,k,(ee^-1)&1),E=c[a+28>>2],E&&ft[c[2668]](Ae+3|0,0,k,1,E+re(c[a+44>>2],ee)|0,0)|0,ee=ee+1|0,(g|0)<2)break e;g=g+-1|0,Ae=Ae+Ze|0,a=c[n+12>>2]}}c[n+116>>2]=ee,c[n+108>>2]=s}function Ia(n){n=n|0;var s=0,a=0,g=0,k=0,E=0,L=0,R=0,G=0,H=0,ee=0,ce=0,Ae=0,Ne=0,Ze=0,mt=0;s=c[n+40>>2],g=c[c[s>>2]>>2],k=g+-1|0;e:{if(k>>>0<12&&(a=0,2077>>>(k&65535)&1))break e;a=g+-7>>>0>3}c[s+40>>2]=0,c[s+44>>2]=0,c[s+48>>2]=0,c[s+52>>2]=0;e:{if(!Da(c[s+20>>2],n,a?12:11))break e;a|g+-7>>>0>3||cl(),E=s+40|0;t:{i:{n:{o:{l:{if(c[n+92>>2]){if(a=c[s>>2],R=c[a>>2],L=R+-1|0,g>>>0<=10){if(L>>>0>=12||(k=0,!(2077>>>(L&65535)&1)))break n;break i}if(L>>>0>=12||(g=0,!(2077>>>(L&65535)&1)))break l;break o}r:{if(g>>>0<=10){if(Jl(),c[s+44>>2]=6,!c[n+56>>2])break r;if(k=c[n+12>>2],L=k+1|0,k=Ls(1,0,(L&-2)+k|0),c[E>>2]=k,!k)break e;c[s+4>>2]=k,n=c[n+12>>2],c[s+44>>2]=7,n=n+k|0,c[s+8>>2]=n,c[s+12>>2]=n+(L>>1),cl();break r}c[s+44>>2]=8}if(G=1,a)break e;n=9;r:switch(g+-5|0){default:n=g>>>0<11?10:11;break;case 0:case 5:break r}if(c[s+48>>2]=n,g>>>0>10)break e;break t}g=R+-7>>>0>3}if(R=c[n+100>>2],H=c[n+12>>2],ee=c[n+16>>2],ce=E,k=c[n+96>>2],E=k+1|0,Ae=E&-2,Ne=Ae<<1,Ze=k<<1,mt=(Ne+Ze<<2)+(g?0:k<<3)|0,L=Ls(1,0,mt+(g?283:367)|0),c[ce>>2]=L,!L||(G=(L+mt|0)+31&-32,c[s+24>>2]=G,c[s+32>>2]=G+168,c[s+28>>2]=G+84,c[s+36>>2]=g?0:G+252|0,sl(G,c[n+12>>2],c[n+16>>2],c[a+16>>2],k,R,c[a+32>>2],1,L),G=H+1>>1,H=ee+1>>1,E=E>>1,ee=R+1>>1,L=L+(Ze<<2)|0,sl(c[s+28>>2],G,H,c[a+20>>2],E,ee,c[a+36>>2],1,L),sl(c[s+32>>2],G,H,c[a+24>>2],E,ee,c[a+40>>2],1,L+(Ae<<2)|0),c[s+44>>2]=12,G=1,g))break e;sl(c[s+36>>2],c[n+12>>2],c[n+16>>2],c[a+28>>2],k,R,c[a+44>>2],1,L+(Ne<<2)|0),c[s+48>>2]=13;break t}k=R+-7>>>0>3}if(L=c[n+100>>2],H=c[n+12>>2],ee=c[n+16>>2],a=c[n+96>>2],Ae=re(a,6),R=(k?Ae:a<<3)<<2,ce=E,Ne=re(a,3),Ze=a<<2,E=R+(k?Ne:Ze)|0,g=Ls(1,0,E+(k?283:367)|0),c[ce>>2]=g,!g||(G=1,E=(g+E|0)+31&-32,c[s+24>>2]=E,c[s+32>>2]=E+168,c[s+28>>2]=E+84,c[s+36>>2]=k?0:E+252|0,ce=E,E=g+R|0,sl(ce,c[n+12>>2],c[n+16>>2],E,a,L,0,1,g),R=H+1>>1,H=ee+1>>1,ee=a<<1,sl(c[s+28>>2],R,H,a+E|0,a,L,0,1,g+(ee<<2)|0),sl(c[s+32>>2],R,H,E+ee|0,a,L,0,1,g+(Ze<<2)|0),c[s+44>>2]=14,Ha(),k))break e;sl(c[s+36>>2],c[n+12>>2],c[n+16>>2],E+Ne|0,a,L,0,1,g+(Ae<<2)|0),c[s+48>>2]=15,n=16;i:switch(c[c[s>>2]>>2]+-5|0){default:n=17;break;case 0:case 5:break i}c[s+52>>2]=n}hc()}return G|0}function Sl(n,s,a,g,k){var E=0,L=0,R=0,G=0,H=0,ee=0,ce=0,Ae=0,Ne=0,Ze=0,mt=0,Tt=0,Ot=0,ni=0,ci=0,Mi=0,ki=0,Gi=0,sn=0,vn=0,or=0,Ir=0,gs=0,wa=0,hl=0;Gi=Nn-256|0,Nn=Gi,E=(k|0)/25|0;e:{if(!n|k>>>0>100|((s|0)<1|(a|0)<1)||(L=1,or=a+-1|0,Ze=s+-1|0,k=(E<<1|1)>(s|0)?Ze>>1:E,ee=(k<<1|1)>(a|0)?or>>1:k,(ee|0)<1)||(L=0,H=s<<1,E=ee<<1,k=re(H,E+2|0),ci=Ls(1,0,(k+H|0)+4094|0),!ci))break e;for(Ot=0-ee|0,E=E|1,Ae=(re(E,s)<<1)+ci|0,G=Ae-H|0,Jo(G,0,H),mt=Jo(Gi,0,256),ki=k+ci|0,Mi=re(E,E),sn=255,ce=255,E=n;;){for(L=0;k=F[L+E|0],p[k+mt|0]=1,Ne=(R|0)<(k|0),R=Ne?k:R,Ir=Ne?k:Ir,Ne=(ce|0)>(k|0),ce=Ne?k:ce,sn=Ne?k:sn,L=L+1|0,(L|0)!=(s|0););if(E=g+E|0,Tt=Tt+1|0,(Tt|0)==(a|0))break}for(R=R-ce|0,Ne=262144/(Mi>>>0)|0,E=H+ki|0,L=-1,ce=0,k=0;F[k+mt|0]&&(ce=ce+1|0,(L|0)>=0&&(L=k-L|0,R=(L|0)<(R|0)?L:R),L=k),k=k+1|0,(k|0)!=256;);for(L=R<<2,mt=re(R,12)>>2,R=L-mt|0,Mi=E+2046|0,k=1;;){Tt=k<<1,ni=Tt+Mi|0,E=k;t:{if((k|0)<=(mt|0)||(E=0,(L|0)<=(k|0)))break t;E=(re(mt,L-k|0)|0)/(R|0)|0}if(E=E>>>2|0,Di[ni>>1]=E,Di[Mi-Tt>>1]=0-E,k=k+1|0,(k|0)==1024)break}if(Di[Mi>>1]=0,!((ce|0)<3|(Ot|0)>=(a|0)))for(Tt=ee^-1,ce=s-ee|0,mt=ee+1|0,gs=ee+-1|0,wa=(H-ee|0)+-2|0,hl=(Ze<<1)+Ae|0,L=ci,E=n;;){if(R=0,k=0,ni=(s|0)<1,!ni)for(;R=F[k+E|0]+(R&65535)|0,H=k<<1,Ze=R+mn[H+G>>1]|0,vn=H+Ae|0,H=L+H|0,Di[vn>>1]=Ze-mn[H>>1],Di[H>>1]=Ze,k=k+1|0,(k|0)!=(s|0););if(R=(Ot|0)<(or|0)?g+E|0:E,H=(Ot|0)>-1,Ze=(s<<1)+L|0,vn=(Ze|0)==(Ae|0),(Ot|0)>=(ee|0)){if(k=0,(ee|0)>-1){for(;Di[(k<<1)+ki>>1]=re(Ne,mn[(ee-k<<1)+Ae>>1]+mn[(k+gs<<1)+Ae>>1]&65535)>>>16,G=(k|0)==(ee|0),k=k+1|0,!G;);k=mt}if((k|0)<(ce|0)){for(;Di[(k<<1)+ki>>1]=re(Ne,mn[(k+ee<<1)+Ae>>1]-mn[(k+Tt<<1)+Ae>>1]&65535)>>>16,k=k+1|0,(ce|0)!=(k|0););k=ce}if((k|0)<(s|0))for(;Di[(k<<1)+ki>>1]=re(Ne,((mn[hl>>1]<<1)-mn[(wa-k<<1)+Ae>>1]|0)-mn[(k+Tt<<1)+Ae>>1]&65535)>>>16,k=k+1|0,(k|0)!=(s|0););if(k=0,!ni)for(;ni=n+k|0,G=F[ni|0],(Ir|0)<=(G|0)|(sn|0)>=(G|0)||(G=G+Di[(mn[(k<<1)+ki>>1]-(G<<2)<<1)+Mi>>1]|0,G=(G|0)>0?G:0,p[ni|0]=(G|0)<255?G:255),k=k+1|0,(k|0)!=(s|0););n=n+g|0}if(E=H?R:E,G=L,L=vn?ci:Ze,Ot=Ot+1|0,(Ot|0)==(a|0))break}jr(ci),L=1}return Nn=Gi+256|0,L}function nl(n,s,a,g,k,E){n=n|0,s=s|0,a=a|0,g=g|0,k=k|0,E=E|0;var L=0,R=0,G=0,H=0,ee=0,ce=0,Ae=0,Ne=0,Ze=0,mt=0;e:{if((k|0)<=15)for(Ne=c[(k<<2)+s>>2]+re(a,11)|0,a=c[n+8>>2],G=c[n+4>>2];;){L=F[Ne|0];t:{if((a|0)>-1)break t;if(ce=c[n+12>>2],ce>>>0<$n[n+20>>2]){R=F[ce|0]|F[ce+1|0]<<8|(F[ce+2|0]<<16|F[ce+3|0]<<24),c[n+12>>2]=ce+3,a=a+24|0,c[n+8>>2]=a,c[n>>2]=c[n>>2]<<24|(R>>>8&65280|(R<<8&16711680|R<<24))>>>8;break t}Dr(n),a=c[n+8>>2]}Ae=n,R=a,H=c[n>>2],ee=H>>>a|0,L=re(L,G)>>>8|0;t:{if(ee>>>0>L>>>0){H=((L^-1)<<a)+H|0,c[n>>2]=H,G=G-L|0;break t}G=L+1|0}if(ce=Rr(G)^24,a=R-ce|0,c[Ae+8>>2]=a,G=(G<<ce)+-1|0,c[n+4>>2]=G,ce=k,Ae=k,ee>>>0<=L>>>0)break e;for(;;){L=F[Ne+1|0];t:{if((a|0)>-1)break t;if(k=c[n+12>>2],k>>>0<$n[n+20>>2]){R=F[k|0]|F[k+1|0]<<8|(F[k+2|0]<<16|F[k+3|0]<<24),a=a+24|0,c[n+8>>2]=a,c[n+12>>2]=k+3,H=H<<24|(R>>>8&65280|(R<<8&16711680|R<<24))>>>8,c[n>>2]=H;break t}Dr(n),H=c[n>>2],a=c[n+8>>2]}Ae=n,R=a,ee=H>>>a|0,L=re(L,G)>>>8|0;t:{if(ee>>>0>L>>>0){H=((L^-1)<<a)+H|0,c[n>>2]=H,G=G-L|0;break t}G=L+1|0}if(k=Rr(G)^24,a=R-k|0,c[Ae+8>>2]=a,G=(G<<k)+-1|0,c[n+4>>2]=G,k=ce+1|0,ee>>>0<=L>>>0){if(Ae=16,(k|0)==16)break e;Ne=c[(k<<2)+s>>2],ce=k;continue}break}Ze=c[(k<<2)+s>>2],ee=F[Ne+2|0];t:{if((a|0)>-1)break t;if(R=c[n+12>>2],R>>>0<$n[n+20>>2]){L=F[R|0]|F[R+1|0]<<8|(F[R+2|0]<<16|F[R+3|0]<<24),a=a+24|0,c[n+8>>2]=a,c[n+12>>2]=R+3,H=H<<24|(L>>>8&65280|(L<<8&16711680|L<<24))>>>8,c[n>>2]=H;break t}Dr(n),H=c[n>>2],a=c[n+8>>2]}Ae=n,R=a,mt=H>>>a|0,ee=re(G,ee)>>>8|0;t:{if(mt>>>0>ee>>>0){c[n>>2]=((ee^-1)<<a)+H,a=G-ee|0;break t}a=ee+1|0}L=Rr(a)^24,R=R-L|0,c[Ae+8>>2]=R,c[n+4>>2]=(a<<L)+-1;t:{if(mt>>>0<=ee>>>0){H=1,Ne=Ze+11|0;break t}H=ko(n,Ne),R=c[n+8>>2],Ne=Ze+22|0}t:{if((R|0)>-1)break t;if(a=c[n+12>>2],a>>>0<$n[n+20>>2]){L=F[a|0]|F[a+1|0]<<8|(F[a+2|0]<<16|F[a+3|0]<<24),c[n+12>>2]=a+3,R=R+24|0,c[n+8>>2]=R,c[n>>2]=c[n>>2]<<24|(L>>>8&65280|(L<<8&16711680|L<<24))>>>8;break t}Dr(n),R=c[n+8>>2]}if(a=R+-1|0,c[n+8>>2]=a,G=c[n+4>>2],ee=G>>>1|0,Ze=c[n>>2],L=ee-(Ze>>>R|0)>>31,G=L+G|1,c[n+4>>2]=G,c[n>>2]=Ze-((L&ee+1)<<R),Di[(F[ce+5328|0]<<1)+E>>1]=re(c[(((ce|0)>0)<<2)+g>>2],(L^H)-L|0),!((ce|0)<15))break}Ae=16}return Ae|0}function Nu(n,s,a,g,k,E){n=n|0,s=s|0,a=a|0,g=g|0,k=k|0,E=E|0;var L=0,R=0,G=0,H=0,ee=0,ce=0,Ae=0,Ne=0,Ze=0;e:{if((k|0)<=15)for(Ne=c[(k<<2)+s>>2]+re(a,11)|0,R=c[n+8>>2],L=c[n+4>>2];;){H=F[Ne|0];t:{if((R|0)>-1)break t;if(a=c[n+12>>2],a>>>0<$n[n+20>>2]){ce=F[a|0]|F[a+1|0]<<8|(F[a+2|0]<<16|F[a+3|0]<<24),c[n+12>>2]=a+3,R=R+24|0,c[n+8>>2]=R,c[n>>2]=c[n>>2]<<24|(ce>>>8&65280|(ce<<8&16711680|ce<<24))>>>8;break t}Dr(n),R=c[n+8>>2]}if(G=c[n>>2],a=re(L,H)>>>8|0,H=G>>>R>>>0<=a>>>0,H||(a=a+1|0,G=G-(a<<R)|0,c[n>>2]=G,a=L-a|0),a>>>0<=126&&(R=R-F[a+9056|0]|0,c[n+8>>2]=R,a=F[a+9184|0]),c[n+4>>2]=a,ce=k,L=k,H)break e;for(;;){H=F[Ne+1|0];t:{if((R|0)>-1)break t;if(k=c[n+12>>2],k>>>0<$n[n+20>>2]){L=F[k|0]|F[k+1|0]<<8|(F[k+2|0]<<16|F[k+3|0]<<24),R=R+24|0,c[n+8>>2]=R,c[n+12>>2]=k+3,G=G<<24|(L>>>8&65280|(L<<8&16711680|L<<24))>>>8,c[n>>2]=G;break t}Dr(n),G=c[n>>2],R=c[n+8>>2]}ee=G>>>R|0,L=re(a,H)>>>8|0;t:{if(ee>>>0<=L>>>0){a=L;break t}k=L+1|0,G=G-(k<<R)|0,c[n>>2]=G,a=a-k|0}if(a>>>0<=126&&(R=R-F[a+9056|0]|0,c[n+8>>2]=R,a=F[a+9184|0]),c[n+4>>2]=a,k=ce+1|0,H=c[(k<<2)+s>>2],ee>>>0<=L>>>0){if(L=16,ce=k,Ne=H,(k|0)!=16)continue;break e}break}Ae=F[Ne+2|0];t:{if((R|0)>-1)break t;if(L=c[n+12>>2],L>>>0<$n[n+20>>2]){ee=F[L|0]|F[L+1|0]<<8|(F[L+2|0]<<16|F[L+3|0]<<24),R=R+24|0,c[n+8>>2]=R,c[n+12>>2]=L+3,G=G<<24|(ee>>>8&65280|(ee<<8&16711680|ee<<24))>>>8,c[n>>2]=G;break t}Dr(n),G=c[n>>2],R=c[n+8>>2]}ee=n,Ze=G>>>R|0,Ae=re(a,Ae)>>>8|0,L=Ae,Ze>>>0>L>>>0&&(L=Ae+1|0,c[n>>2]=G-(L<<R),L=a-L|0),L>>>0<=126&&(R=R-F[L+9056|0]|0,c[n+8>>2]=R,L=F[L+9184|0]),c[ee+4>>2]=L;t:{if(Ze>>>0<=Ae>>>0){ee=1,Ne=H+11|0;break t}ee=ko(n,Ne),R=c[n+8>>2],Ne=H+22|0}t:{if((R|0)>-1){a=R;break t}if(a=c[n+12>>2],a>>>0<$n[n+20>>2]){L=F[a|0]|F[a+1|0]<<8|(F[a+2|0]<<16|F[a+3|0]<<24),c[n+12>>2]=a+3,a=R+24|0,c[n+8>>2]=a,c[n>>2]=c[n>>2]<<24|(L>>>8&65280|(L<<8&16711680|L<<24))>>>8;break t}Dr(n),a=c[n+8>>2]}if(R=a+-1|0,c[n+8>>2]=R,L=c[n+4>>2],G=L>>>1|0,Ae=c[n>>2],H=G-(Ae>>>a|0)>>31,L=L+H|1,c[n+4>>2]=L,c[n>>2]=Ae-((H&G+1)<<a),Di[(F[ce+5328|0]<<1)+E>>1]=re(c[(((ce|0)>0)<<2)+g>>2],(H^ee)-H|0),!((ce|0)<15))break}L=16}return L|0}function Fs(n,s,a,g){var k=0,E=0,L=0,R=0,G=0,H=0,ee=0,ce=0;e:{if((a|0)<0|(g|0)<1||(G=c[s+88>>2],(a+g|0)>(G|0)))break e;ee=c[s>>2];t:{i:{if(c[n+2356>>2])break i;E=c[n+2344>>2];n:{if(E)break n;if(k=$l(1,0,144),c[n+2344>>2]=k,!k)break e;if(k=c[s+88>>2],L=k,E=k>>31,k=c[s>>2],E=Ls(_r(L,E,k,k>>31),Fn,1),c[n+2360>>2]=E,!E||(c[n+2368>>2]=0,c[n+2364>>2]=E,L=c[n+2348>>2],R=c[n+2352>>2],k=c[n+2344>>2],o0(),c[k+136>>2]=E,c[k>>2]=c[s>>2],c[k+4>>2]=c[s+4>>2],R>>>0<2)||(E=F[L|0]&3,c[k+8>>2]=E,c[k+12>>2]=F[L|0]>>>2&3,H=F[L|0]>>>4&3,c[k+16>>2]=H,E>>>0>1|H>>>0>1|F[L|0]>63)||(E=R+-1|0,R=k+24|0,gp(R),Hh(0,R),c[k- -64>>2]=k,c[k+24>>2]=c[s>>2],c[k+28>>2]=c[s+4>>2],c[k+96>>2]=c[s+72>>2],c[k+100>>2]=c[s+76>>2],c[k+104>>2]=c[s+80>>2],c[k+108>>2]=c[s+84>>2],c[k+112>>2]=c[s+88>>2],c[k+8>>2]?k=Tl(k,L+1|0,E):k=E>>>0>=re(c[k+4>>2],c[k>>2])>>>0,!k))break t;if(E=c[n+2344>>2],c[E+16>>2]!=1){c[n+2372>>2]=0;break n}g=G-a|0}ce=c[E+112>>2];n:{if(!c[E+8>>2]){R=c[E>>2],L=re(R,a),k=L+c[n+2364>>2]|0,G=(L+c[n+2348>>2]|0)+1|0,L=c[n+2368>>2];o:{l:{if(H=c[E+12>>2],H){if((g|0)<1)break o;if(ft[c[(H<<2)+10912>>2]](L,G,k,R),H=1,(g|0)!=1)break l;L=k;break o}if(E=0,(g|0)<=0)break o;for(;L=k,k=Xr(k,G,R),G=R+G|0,k=k+R|0,E=E+1|0,(E|0)!=(g|0););break o}for(;G=R+G|0,L=k+R|0,ft[c[(c[E+12>>2]<<2)+10912>>2]](k,G,L,R),k=L,H=H+1|0,(H|0)!=(g|0););}c[n+2368>>2]=L,g=a+g|0;break n}if(g=a+g|0,!Cs(E,g))break t}n:{if((g|0)>=(ce|0)){c[n+2356>>2]=1;break n}if(!c[n+2356>>2])break i}if(g=c[n+2344>>2],g&&(p0(c[g+20>>2]),c[g+20>>2]=0,jr(g)),c[n+2344>>2]=0,g=c[n+2372>>2],(g|0)<1)break i;if(L=c[s+76>>2],k=c[s+84>>2],!Sl(L+(c[n+2364>>2]+re(k,ee)|0)|0,c[s+80>>2]-L|0,c[s+88>>2]-k|0,ee,g))break t}return c[n+2364>>2]+re(a,ee)|0}jr(c[n+2360>>2]),c[n+2360>>2]=0,c[n+2364>>2]=0,s=c[n+2344>>2],s&&(p0(c[s+20>>2]),c[s+20>>2]=0,jr(s)),c[n+2344>>2]=0}return 0}function gu(n,s){var a=0,g=0,k=0,E=0,L=0,R=0,G=0,H=0,ee=0,ce=0,Ae=0,Ne=0,Ze=0,mt=0,Tt=0,Ot=0,ni=0,ci=0;c[n+152>>2]=0,G=1;e:{t:{if(c[n+148>>2]>=1){if(!(ft[c[2558]](n+124|0)|0))break t;c[n+140>>2]=n+180,c[n+136>>2]=n,c[n+132>>2]=18,G=c[n+2308>>2]>0?3:2}c[n+156>>2]=G;break e}if(!Qo(n,1,4941))return 0}L=c[n+288>>2],ee=L<<2,a=c[n+148>>2],H=c[n+2308>>2],Ae=(H|0)>0?re(ee,(a|0)<1?1:2):0,Ne=L<<5,mt=G<<4,Tt=re(Ne,(re(mt+F[H+4863|0]|0,3)|0)/2|0),Ze=(L<<1)+2|0,Ot=re(re(L,(a|0)==2?2:1),800),E=0;e:{if(!c[n+2348>>2])break e;ni=_r(mn[n+50>>1],0,mn[n+48>>1],0),E=Fn}ci=E,a=0,g=ee,k=g+Ne|0,k>>>0<g>>>0&&(a=1),g=k,k=g+Ze|0,k>>>0<g>>>0&&(a=a+1|0),g=k,k=g+Ae|0,k>>>0<g>>>0&&(a=a+1|0),g=k,k=g+Ot|0,k>>>0<g>>>0&&(a=a+1|0),g=k,k=g+Tt|0,k>>>0<g>>>0&&(a=a+1|0),g=k,k=g+ni|0,a=a+E|0,E=k,a=k>>>0<g>>>0?a+1|0:a,g=a,k=k+832|0,k>>>0<832&&(a=a+1|0);e:{if(!a&k>>>0>4294967264|a>>>0>0)break e;R=c[n+2288>>2];t:{i:{if(a=g,g=E+863|0,g>>>0<863&&(a=a+1|0),E=g,k=g,g=a,!a&k>>>0>$n[n+2292>>2]|a>>>0>0){if(jr(R),c[n+2292>>2]=0,R=Ls(E,g,1),c[n+2288>>2]=R,!R)break i;c[n+2292>>2]=E,H=c[n+2308>>2]}c[n+2244>>2]=R,c[n+160>>2]=0,a=R+ee|0,c[n+2252>>2]=a,a=a+Ne|0,ce=a+2|0,c[n+2256>>2]=ce,a=a+Ze|0,k=Ae?a:0,c[n+2260>>2]=k,c[n+172>>2]=k,a=a+Ae|0,g=c[n+148>>2],(H|0)<1|(g|0)<1||(c[n+172>>2]=k+(L<<2)),a=a+31&-32,c[n+2264>>2]=a,a=a+832|0,c[n+2304>>2]=a,c[n+176>>2]=a,(g|0)==2&&(c[n+176>>2]=a+re(L,800)),c[n+152>>2]=0,E=L<<3,c[n+2284>>2]=E,k=L<<4,c[n+2280>>2]=k,a=a+Ot|0,c[n+2364>>2]=ni|ci?a+Tt|0:0,g=F[H+4863|0],a=a+re(g,k)|0,c[n+2268>>2]=a,g=re(E,g>>>1|0),a=g+(a+re(k,mt)|0)|0,c[n+2272>>2]=a,c[n+2276>>2]=g+(a+(re(E,G)<<3)|0),Jo(ce+-2|0,0,Ze),a=c[n+2256>>2]+-2|0,p[a|0]=0,p[a+1|0]=0,c[n+2296>>2]=0,c[n+2248>>2]=0,Jo(c[n+2244>>2],0,ee);break t}if(!Qo(n,1,4971))break e}c[s+8>>2]=0,c[s+20>>2]=c[n+2268>>2],c[s+24>>2]=c[n+2272>>2],c[s+28>>2]=c[n+2276>>2],c[s+32>>2]=c[n+2280>>2],n=c[n+2284>>2],c[s+104>>2]=0,c[s+36>>2]=n,Zl(),ce=1}return ce}function Wl(n,s,a,g){var k=0,E=0,L=0,R=0,G=0,H=0,ee=0,ce=0,Ae=0,Ne=0,Ze=0,mt=0;G=Nn-16|0,Nn=G,H=2;e:{if(!g|((s|0)<1|(n|0)<1))break e;t:{if(!a)break t;i:{if(!c[a+8>>2]){k=s,E=n;break i}if(k=c[a+24>>2],(k|0)<1||(E=c[a+20>>2],(E|0)<1)||(L=c[a+16>>2],R=c[a+12>>2],(L|R)<0|((R&-2)+E|0)>(n|0)|((L&-2)+k|0)>(s|0)))break e}if(!c[a+28>>2]){s=k,n=E;break t}if(c[G+12>>2]=c[a+32>>2],c[G+8>>2]=c[a+36>>2],!et(E,k,G+12|0,G+8|0))break e;s=c[G+8>>2],n=c[G+12>>2]}if(c[g+8>>2]=s,c[g+4>>2]=n,(s|0)<1|(n|0)<1||(R=c[g>>2],R>>>0>12))break e;t:{if(c[g+80>>2]|c[g+12>>2]>0)break t;if(E=n,k=F[R+1157|0],_r(n,0,k,0),Fn)break e;L=s,Ne=re(n,k),k=Ne,k=_r(s,0,k,k>>31),ee=Fn,H=1;i:{if(R>>>0<11){s=0,L=0,n=0;break i}E=_r(E,0,L,0),L=(R|0)==12,mt=L?E:0,ce=L?Fn:0,Ze=(n+1|0)/2|0,E=Ze,s=(s+1|0)/2|0,s=_r(E,E>>31,s,s>>31),L=L?n:0,n=Fn}if(Ae=s,n=n<<1|s>>>31,ce=ce+ee|0,ee=k+mt|0,ee>>>0<k>>>0&&(ce=ce+1|0),Ae=Ae<<1,E=Ae+ee|0,n=n+ce|0,n=Ls(E,E>>>0<ee>>>0?n+1|0:n,1),!n)break e;if(c[g+16>>2]=n,c[g+80>>2]=n,R>>>0>=11){c[g+48>>2]=k,c[g+32>>2]=Ne,c[g+52>>2]=s,c[g+36>>2]=Ze,c[g+56>>2]=s,c[g+40>>2]=Ze,n=n+k|0,c[g+20>>2]=n,c[g+24>>2]=n+s,(R|0)==12&&(c[g+28>>2]=n+Ae),c[g+44>>2]=L,c[g+60>>2]=mt;break t}c[g+24>>2]=k,c[g+20>>2]=Ne}if(H=Ko(g),H|!a)break e;if(!c[a+48>>2]){H=0;break e}if(n=c[g+8>>2]+-1|0,$n[g>>2]<=10){H=0,a=g+20|0,s=c[a>>2],c[a>>2]=0-s,c[g+16>>2]=c[g+16>>2]+re(n,s);break e}if(H=0,a=g+32|0,s=c[a>>2],c[a>>2]=0-s,k=g+36|0,a=c[k>>2],c[k>>2]=0-a,E=g+40|0,k=c[E>>2],c[E>>2]=0-k,c[g+16>>2]=c[g+16>>2]+re(n,s),s=g+20|0,E=s,L=c[s>>2],s=n>>1,c[E>>2]=L+re(s,a),a=g+24|0,c[a>>2]=c[a>>2]+re(s,k),a=c[g+28>>2],!a)break e;k=g+44|0,s=c[k>>2],c[k>>2]=0-s,c[g+28>>2]=a+re(n,s)}return Nn=G+16|0,H}function Ua(n,s){var a=0,g=0,k=0,E=0,L=0,R=0,G=0,H=0;for(L=Nn+-64|0,k=Di[n+16>>1],E=Di[n>>1],R=k+E|0,a=Di[n+8>>1],g=Di[n+24>>1],G=((re(a,20091)>>16)+a|0)+(re(g,35468)>>16)|0,c[L+12>>2]=R-G,k=E-k|0,a=((re(a,35468)>>16)-g|0)-(re(g,20091)>>16)|0,c[L+8>>2]=k-a,c[L+4>>2]=a+k,c[L>>2]=R+G,k=Di[n+18>>1],E=Di[n+2>>1],R=k+E|0,a=Di[n+10>>1],g=Di[n+26>>1],G=((re(a,20091)>>16)+a|0)+(re(g,35468)>>16)|0,c[L+28>>2]=R-G,k=E-k|0,a=((re(a,35468)>>16)-g|0)-(re(g,20091)>>16)|0,c[L+24>>2]=k-a,c[L+20>>2]=a+k,a=R+G|0,c[L+16>>2]=a,E=Di[n+20>>1],R=Di[n+4>>1],G=E+R|0,g=Di[n+12>>1],k=Di[n+28>>1],H=((re(g,20091)>>16)+g|0)+(re(k,35468)>>16)|0,c[L+44>>2]=G-H,E=R-E|0,g=((re(g,35468)>>16)-k|0)-(re(k,20091)>>16)|0,c[L+40>>2]=E-g,c[L+36>>2]=g+E,c[L+32>>2]=G+H,k=Di[n+22>>1],E=Di[n+6>>1],R=k+E|0,g=Di[n+14>>1],n=Di[n+30>>1],G=((re(g,20091)>>16)+g|0)+(re(n,35468)>>16)|0,c[L+60>>2]=R-G,k=E-k|0,n=((re(g,35468)>>16)-n|0)-(re(n,20091)>>16)|0,c[L+56>>2]=k-n,c[L+52>>2]=n+k,c[L+48>>2]=R+G,n=L,L=0;;){if(g=c[n+48>>2],k=((re(a,20091)>>16)+a|0)+(re(g,35468)>>16)|0,E=c[n>>2]+4|0,R=c[n+32>>2],G=E+R|0,H=F[s|0]+(k+G>>3)|0,H=(H|0)>0?H:0,p[s|0]=(H|0)<255?H:255,a=((re(a,35468)>>16)-g|0)-(re(g,20091)>>16)|0,g=E-R|0,E=F[s+1|0]+(a+g>>3)|0,E=(E|0)>0?E:0,p[s+1|0]=(E|0)<255?E:255,a=F[s+2|0]+(g-a>>3)|0,a=(a|0)>0?a:0,p[s+2|0]=(a|0)<255?a:255,a=F[s+3|0]+(G-k>>3)|0,a=(a|0)>0?a:0,p[s+3|0]=(a|0)<255?a:255,L=L+1|0,(L|0)!=4){s=s+32|0,a=c[n+20>>2],n=n+4|0;continue}break}}function yu(n){n=n|0;var s=0;s=_r(F[n+31|0],0,16843009,16843009),p[n+32|0]=s,p[n+33|0]=s>>>8,p[n+34|0]=s>>>16,p[n+35|0]=s>>>24,s=Fn,p[n+36|0]=s,p[n+37|0]=s>>>8,p[n+38|0]=s>>>16,p[n+39|0]=s>>>24,s=_r(F[n+63|0],0,16843009,16843009),p[n+64|0]=s,p[n+65|0]=s>>>8,p[n+66|0]=s>>>16,p[n+67|0]=s>>>24,s=Fn,p[n+68|0]=s,p[n+69|0]=s>>>8,p[n+70|0]=s>>>16,p[n+71|0]=s>>>24,s=_r(F[n+95|0],0,16843009,16843009),p[n+96|0]=s,p[n+97|0]=s>>>8,p[n+98|0]=s>>>16,p[n+99|0]=s>>>24,s=Fn,p[n+100|0]=s,p[n+101|0]=s>>>8,p[n+102|0]=s>>>16,p[n+103|0]=s>>>24,s=_r(F[n+127|0],0,16843009,16843009),p[n+128|0]=s,p[n+129|0]=s>>>8,p[n+130|0]=s>>>16,p[n+131|0]=s>>>24,s=Fn,p[n+132|0]=s,p[n+133|0]=s>>>8,p[n+134|0]=s>>>16,p[n+135|0]=s>>>24,s=_r(F[n+159|0],0,16843009,16843009),p[n+160|0]=s,p[n+161|0]=s>>>8,p[n+162|0]=s>>>16,p[n+163|0]=s>>>24,s=Fn,p[n+164|0]=s,p[n+165|0]=s>>>8,p[n+166|0]=s>>>16,p[n+167|0]=s>>>24,s=_r(F[n+191|0],0,16843009,16843009),p[n+192|0]=s,p[n+193|0]=s>>>8,p[n+194|0]=s>>>16,p[n+195|0]=s>>>24,s=Fn,p[n+196|0]=s,p[n+197|0]=s>>>8,p[n+198|0]=s>>>16,p[n+199|0]=s>>>24,s=_r(F[n+223|0],0,16843009,16843009),p[n+224|0]=s,p[n+225|0]=s>>>8,p[n+226|0]=s>>>16,p[n+227|0]=s>>>24,s=Fn,p[n+228|0]=s,p[n+229|0]=s>>>8,p[n+230|0]=s>>>16,p[n+231|0]=s>>>24,s=_r(F[n+-1|0],0,16843009,16843009),p[n|0]=s,p[n+1|0]=s>>>8,p[n+2|0]=s>>>16,p[n+3|0]=s>>>24,s=Fn,p[n+4|0]=s,p[n+5|0]=s>>>8,p[n+6|0]=s>>>16,p[n+7|0]=s>>>24}function Rs(n,s,a){n=n|0,s=s|0,a=a|0;var g=0,k=0,E=0;e:{if((a|0)!=1){for(;g=F[s|0]+(F[n|0]+-120>>4)|0,g=(g|0)>0?g:0,p[s|0]=(g|0)<255?g:255,g=F[s+1|0]+(F[n+1|0]+-120>>4)|0,g=(g|0)>0?g:0,p[s+1|0]=(g|0)<255?g:255,g=F[s+2|0]+(F[n+2|0]+-120>>4)|0,g=(g|0)>0?g:0,p[s+2|0]=(g|0)<255?g:255,g=F[s+3|0]+(F[n+3|0]+-120>>4)|0,g=(g|0)>0?g:0,p[s+3|0]=(g|0)<255?g:255,g=F[s+4|0]+(F[n+4|0]+-120>>4)|0,g=(g|0)>0?g:0,p[s+4|0]=(g|0)<255?g:255,g=F[s+5|0]+(F[n+5|0]+-120>>4)|0,g=(g|0)>0?g:0,p[s+5|0]=(g|0)<255?g:255,g=F[s+6|0]+(F[n+6|0]+-120>>4)|0,g=(g|0)>0?g:0,p[s+6|0]=(g|0)<255?g:255,g=F[s+7|0]+(F[n+7|0]+-120>>4)|0,g=(g|0)>0?g:0,p[s+7|0]=(g|0)<255?g:255,n=n+8|0,s=s+a|0,k=k+1|0,(k|0)!=8;);break e}for(k=F[s+6|0];g=F[s|0]+(F[n|0]+-120>>4)|0,g=(g|0)>0?g:0,p[s|0]=(g|0)<255?g:255,g=F[s+1|0]+(F[n+1|0]+-120>>4)|0,g=(g|0)>0?g:0,p[s+1|0]=(g|0)<255?g:255,g=F[s+2|0]+(F[n+2|0]+-120>>4)|0,g=(g|0)>0?g:0,p[s+2|0]=(g|0)<255?g:255,g=F[s+3|0]+(F[n+3|0]+-120>>4)|0,g=(g|0)>0?g:0,p[s+3|0]=(g|0)<255?g:255,g=F[s+4|0]+(F[n+4|0]+-120>>4)|0,g=(g|0)>0?g:0,p[s+4|0]=(g|0)<255?g:255,g=F[s+5|0]+(F[n+5|0]+-120>>4)|0,g=(g|0)>0?g:0,p[s+5|0]=(g|0)<255?g:255,k=(k&255)+(F[n+6|0]+-120>>4)|0,k=(k|0)>0?k:0,p[s+6|0]=(k|0)<255?k:255,k=F[s+7|0]+(F[n+7|0]+-120>>4)|0,k=(k|0)>0?k:0,k=(k|0)<255?k:255,p[s+7|0]=k,n=n+8|0,s=s+a|0,E=E+1|0,(E|0)!=8;);}}function _u(n){n=n|0;var s=0,a=0;s=_r((F[n+223|0]+(F[n+-25|0]+(F[n+191|0]+(F[n+-26|0]+(F[n+159|0]+(F[n+-27|0]+(F[n+127|0]+(F[n+-28|0]+(F[n+95|0]+(F[n+-29|0]+(F[n+63|0]+(F[n+-30|0]+(F[n+31|0]+(F[n+-31|0]+(F[n+-32|0]+F[n+-1|0]|0)|0)|0)|0)|0)|0)|0)|0)|0)|0)|0)|0)|0)|0)|0)+8>>>4&255,0,16843009,16843009),p[n+224|0]=s,p[n+225|0]=s>>>8,p[n+226|0]=s>>>16,p[n+227|0]=s>>>24,a=Fn,p[n+228|0]=a,p[n+229|0]=a>>>8,p[n+230|0]=a>>>16,p[n+231|0]=a>>>24,p[n+192|0]=s,p[n+193|0]=s>>>8,p[n+194|0]=s>>>16,p[n+195|0]=s>>>24,p[n+196|0]=a,p[n+197|0]=a>>>8,p[n+198|0]=a>>>16,p[n+199|0]=a>>>24,p[n+160|0]=s,p[n+161|0]=s>>>8,p[n+162|0]=s>>>16,p[n+163|0]=s>>>24,p[n+164|0]=a,p[n+165|0]=a>>>8,p[n+166|0]=a>>>16,p[n+167|0]=a>>>24,p[n+128|0]=s,p[n+129|0]=s>>>8,p[n+130|0]=s>>>16,p[n+131|0]=s>>>24,p[n+132|0]=a,p[n+133|0]=a>>>8,p[n+134|0]=a>>>16,p[n+135|0]=a>>>24,p[n+96|0]=s,p[n+97|0]=s>>>8,p[n+98|0]=s>>>16,p[n+99|0]=s>>>24,p[n+100|0]=a,p[n+101|0]=a>>>8,p[n+102|0]=a>>>16,p[n+103|0]=a>>>24,p[n+64|0]=s,p[n+65|0]=s>>>8,p[n+66|0]=s>>>16,p[n+67|0]=s>>>24,p[n+68|0]=a,p[n+69|0]=a>>>8,p[n+70|0]=a>>>16,p[n+71|0]=a>>>24,p[n+32|0]=s,p[n+33|0]=s>>>8,p[n+34|0]=s>>>16,p[n+35|0]=s>>>24,p[n+36|0]=a,p[n+37|0]=a>>>8,p[n+38|0]=a>>>16,p[n+39|0]=a>>>24,p[n|0]=s,p[n+1|0]=s>>>8,p[n+2|0]=s>>>16,p[n+3|0]=s>>>24,p[n+4|0]=a,p[n+5|0]=a>>>8,p[n+6|0]=a>>>16,p[n+7|0]=a>>>24}function rl(n,s){var a=0,g=0,k=0,E=0,L=0,R=0,G=0,H=0,ee=0;e:{if(a=c[s+48>>2],!a||ft[a|0](s)|0)break e;return Qo(n,6,4844),c[n>>2]}e:{t:{i:{n:{if(c[s+68>>2]){c[n+2308>>2]=0,a=0;break n}if(a=2,E=c[n+2308>>2],g=F[E+4863|0],(E|0)==2)break i;a=E}if(E=c[s+76>>2]-g|0,c[n+296>>2]=E>>4,k=c[s+84>>2]-g|0,c[n+300>>2]=k>>4,(E|0)<=-1&&(c[n+296>>2]=0),(k|0)>-1)break e;E=n+300|0;break t}c[n+296>>2]=0,E=n+300|0}c[E>>2]=0}if(g=g+15|0,E=g+c[s+88>>2]>>4,c[n+308>>2]=E,k=c[n+288>>2],s=g+c[s+80>>2]>>4,c[n+304>>2]=(s|0)>(k|0)?k:s,s=c[n+292>>2],(E|0)>(s|0)&&(c[n+308>>2]=s),(a|0)>=1)for(H=c[n+68>>2],ee=c[n+104>>2],E=0;;){s=(E<<3)+n|0;e:{if(ee){if(a=p[(n+E|0)+120|0],g=a,c[n+112>>2])break e;g=a+c[n+60>>2]|0;break e}g=c[n+60>>2]}a=g,L=s+2312|0,a=H?c[n+72>>2]+a|0:a;e:{if((a|0)>=1){k=(a|0)<63?a:63,a=(a|0)>0?k:0,G=s+2313|0,R=c[n+64>>2],(R|0)>=1&&(k=9-R|0,R=a>>>((R|0)>4?2:1)|0,k=(R|0)>(k|0)?k:R),k=(k|0)>1?k:1,p[G|0]=k,p[L|0]=k+(a<<1),p[s+2315|0]=(a|0)>39?2:(a|0)>14;break e}p[L|0]=0}p[s+2314|0]=0,k=s+2316|0,g=H?c[n+88>>2]+(c[n+72>>2]+g|0)|0:g,L=(g|0)>0;e:{if(!L){p[k|0]=0;break e}a=(g|0)<63?g:63,g=L?a:0,G=s+2317|0,L=c[n+64>>2],(L|0)>=1&&(a=9-L|0,L=g>>>((L|0)>4?2:1)|0,a=(L|0)>(a|0)?a:L),a=(a|0)>1?a:1,p[G|0]=a,p[k|0]=a+(g<<1),p[s+2319|0]=(g|0)>39?2:(g|0)>14}if(p[s+2318|0]=1,E=E+1|0,(E|0)==4)break}return 0}function Xl(n,s){n=n|0,s=s|0;var a=0,g=0,k=0,E=0,L=0,R=0,G=0,H=0,ee=0,ce=0,Ae=0,Ne=0,Ze=0,mt=0;g=Nn+-64|0,k=Di[n+24>>1],a=Di[n>>1],E=k+a|0,R=Di[n+16>>1],G=Di[n+8>>1],L=R+G|0,c[g+32>>2]=E-L,k=a-k|0,a=G-R|0,c[g+48>>2]=k-a,c[g+16>>2]=a+k,Ae=E+L|0,c[g>>2]=Ae,k=Di[n+26>>1],a=Di[n+2>>1],E=k+a|0,R=Di[n+18>>1],G=Di[n+10>>1],L=R+G|0,c[g+36>>2]=E-L,k=a-k|0,a=G-R|0,c[g+52>>2]=k-a,k=a+k|0,c[g+20>>2]=k,a=E+L|0,c[g+4>>2]=a,E=Di[n+4>>1],R=Di[n+28>>1],G=E-R|0,L=Di[n+12>>1],H=Di[n+20>>1],ee=L-H|0,c[g+56>>2]=G-ee,L=L+H|0,R=E+R|0,E=L+R|0,c[g+8>>2]=E,R=R-L|0,c[g+40>>2]=R,G=G+ee|0,c[g+24>>2]=G,L=Di[n+30>>1],H=Di[n+6>>1],ee=L+H|0,ce=Di[n+22>>1],Ne=Di[n+14>>1],Ze=ce+Ne|0,n=ee+Ze|0,c[g+12>>2]=n,mt=H-L|0,ce=Ne-ce|0,L=mt-ce|0,c[g+60>>2]=L,H=ee-Ze|0,c[g+44>>2]=H,ee=ce+mt|0,c[g+28>>2]=ee,Ae=Ae+3|0,ce=Ae-n|0,Ne=a-E|0,Di[s+96>>1]=ce-Ne>>>3,n=n+Ae|0,a=a+E|0,Di[s+64>>1]=n-a>>>3,Di[s+32>>1]=ce+Ne>>>3,Di[s>>1]=n+a>>>3,n=c[g+16>>2]+3|0,a=n-ee|0,E=k-G|0,Di[s+224>>1]=a-E>>>3,n=n+ee|0,k=k+G|0,Di[s+192>>1]=n-k>>>3,Di[s+160>>1]=a+E>>>3,Di[s+128>>1]=n+k>>>3,n=c[g+32>>2]+3|0,k=n-H|0,a=c[g+36>>2],E=a-R|0,Di[s+352>>1]=k-E>>>3,n=n+H|0,a=a+R|0,Di[s+320>>1]=n-a>>>3,Di[s+288>>1]=k+E>>>3,Di[s+256>>1]=n+a>>>3,n=c[g+48>>2]+3|0,k=n-L|0,a=c[g+52>>2],g=c[g+56>>2],E=a-g|0,Di[s+480>>1]=k-E>>>3,n=n+L|0,g=g+a|0,Di[s+448>>1]=n-g>>>3,Di[s+416>>1]=k+E>>>3,Di[s+384>>1]=n+g>>>3}function Ta(n,s){var a=0,g=0,k=0,E=0,L=0,R=0,G=0,H=0,ee=0,ce=0,Ae=0,Ne=0,Ze=0,mt=0,Tt=0,Ot=0,ni=0;for(Ze=s+904|0;;){for(R=0;;){for(G=0;;){for(E=0;;){ce=re(G,11),Ae=re(R,33),ee=re(H,264),L=F[(ce+(Ae+(ee+1392|0)|0)|0)+E|0],mt=c[n+4>>2],a=c[n+8>>2];e:{if((a|0)>-1)break e;if(g=c[n+12>>2],g>>>0<$n[n+20>>2]){k=F[g|0]|F[g+1|0]<<8|(F[g+2|0]<<16|F[g+3|0]<<24),c[n+12>>2]=g+3,a=a+24|0,c[n+8>>2]=a,c[n>>2]=c[n>>2]<<24|(k>>>8&65280|(k<<8&16711680|k<<24))>>>8;break e}Dr(n),a=c[n+8>>2]}Ne=n,Tt=a,g=c[n>>2],L=re(L,mt)>>>8|0,k=g>>>a>>>0<=L>>>0;e:{if(!k){c[n>>2]=g+((L^-1)<<a),a=mt-L|0;break e}a=L+1|0}g=Rr(a)^24,c[Ne+8>>2]=Tt-g,c[n+4>>2]=(a<<g)+-1,Ne=(((s+ee|0)+Ae|0)+ce|0)+E|0;e:{if(!k){a=Tr(n,8);break e}a=F[(((ee+2448|0)+Ae|0)+ce|0)+E|0]}if(p[Ne+907|0]=a,E=E+1|0,(E|0)==11)break}if(G=G+1|0,(G|0)==3)break}if(R=R+1|0,(R|0)==8)break}if(a=re(H,68)+Ze|0,k=ee+Ze|0,E=k+3|0,c[a+1124>>2]=E,c[a+1120>>2]=k+234,g=k+201|0,c[a+1116>>2]=g,c[a+1112>>2]=g,c[a+1108>>2]=g,c[a+1104>>2]=g,c[a+1100>>2]=g,c[a+1096>>2]=g,c[a+1092>>2]=g,c[a+1088>>2]=g,c[a+1084>>2]=k+168,c[a+1080>>2]=k+135,c[a+1076>>2]=g,c[a+1072>>2]=k+102,c[a+1068>>2]=k+69,c[a+1064>>2]=k+36,c[a+1060>>2]=E,H=H+1|0,(H|0)==4)break}a=Tr(n,1),c[s+2236>>2]=a,a&&(Ot=s,ni=Tr(n,8),p[Ot+2240|0]=ni)}function Cl(n){n=n|0;var s=0,a=0;s=n,n=_r((F[s+-25|0]+(F[s+-26|0]+(F[s+-27|0]+(F[s+-28|0]+(F[s+-29|0]+(F[s+-30|0]+(F[s+-32|0]+F[s+-31|0]|0)|0)|0)|0)|0)|0)|0)+4>>>3&255,0,16843009,16843009),p[s+224|0]=n,p[s+225|0]=n>>>8,p[s+226|0]=n>>>16,p[s+227|0]=n>>>24,a=Fn,p[s+228|0]=a,p[s+229|0]=a>>>8,p[s+230|0]=a>>>16,p[s+231|0]=a>>>24,p[s+192|0]=n,p[s+193|0]=n>>>8,p[s+194|0]=n>>>16,p[s+195|0]=n>>>24,p[s+196|0]=a,p[s+197|0]=a>>>8,p[s+198|0]=a>>>16,p[s+199|0]=a>>>24,p[s+160|0]=n,p[s+161|0]=n>>>8,p[s+162|0]=n>>>16,p[s+163|0]=n>>>24,p[s+164|0]=a,p[s+165|0]=a>>>8,p[s+166|0]=a>>>16,p[s+167|0]=a>>>24,p[s+128|0]=n,p[s+129|0]=n>>>8,p[s+130|0]=n>>>16,p[s+131|0]=n>>>24,p[s+132|0]=a,p[s+133|0]=a>>>8,p[s+134|0]=a>>>16,p[s+135|0]=a>>>24,p[s+96|0]=n,p[s+97|0]=n>>>8,p[s+98|0]=n>>>16,p[s+99|0]=n>>>24,p[s+100|0]=a,p[s+101|0]=a>>>8,p[s+102|0]=a>>>16,p[s+103|0]=a>>>24,p[s+64|0]=n,p[s+65|0]=n>>>8,p[s+66|0]=n>>>16,p[s+67|0]=n>>>24,p[s+68|0]=a,p[s+69|0]=a>>>8,p[s+70|0]=a>>>16,p[s+71|0]=a>>>24,p[s+32|0]=n,p[s+33|0]=n>>>8,p[s+34|0]=n>>>16,p[s+35|0]=n>>>24,p[s+36|0]=a,p[s+37|0]=a>>>8,p[s+38|0]=a>>>16,p[s+39|0]=a>>>24,p[s|0]=n,p[s+1|0]=n>>>8,p[s+2|0]=n>>>16,p[s+3|0]=n>>>24,p[s+4|0]=a,p[s+5|0]=a>>>8,p[s+6|0]=a>>>16,p[s+7|0]=a>>>24}function Dc(n){n=n|0;var s=0,a=0;s=n,n=_r((F[s+223|0]+(F[s+191|0]+(F[s+159|0]+(F[s+127|0]+(F[s+95|0]+(F[s+63|0]+(F[s+-1|0]+F[s+31|0]|0)|0)|0)|0)|0)|0)|0)+4>>>3&255,0,16843009,16843009),p[s+224|0]=n,p[s+225|0]=n>>>8,p[s+226|0]=n>>>16,p[s+227|0]=n>>>24,a=Fn,p[s+228|0]=a,p[s+229|0]=a>>>8,p[s+230|0]=a>>>16,p[s+231|0]=a>>>24,p[s+192|0]=n,p[s+193|0]=n>>>8,p[s+194|0]=n>>>16,p[s+195|0]=n>>>24,p[s+196|0]=a,p[s+197|0]=a>>>8,p[s+198|0]=a>>>16,p[s+199|0]=a>>>24,p[s+160|0]=n,p[s+161|0]=n>>>8,p[s+162|0]=n>>>16,p[s+163|0]=n>>>24,p[s+164|0]=a,p[s+165|0]=a>>>8,p[s+166|0]=a>>>16,p[s+167|0]=a>>>24,p[s+128|0]=n,p[s+129|0]=n>>>8,p[s+130|0]=n>>>16,p[s+131|0]=n>>>24,p[s+132|0]=a,p[s+133|0]=a>>>8,p[s+134|0]=a>>>16,p[s+135|0]=a>>>24,p[s+96|0]=n,p[s+97|0]=n>>>8,p[s+98|0]=n>>>16,p[s+99|0]=n>>>24,p[s+100|0]=a,p[s+101|0]=a>>>8,p[s+102|0]=a>>>16,p[s+103|0]=a>>>24,p[s+64|0]=n,p[s+65|0]=n>>>8,p[s+66|0]=n>>>16,p[s+67|0]=n>>>24,p[s+68|0]=a,p[s+69|0]=a>>>8,p[s+70|0]=a>>>16,p[s+71|0]=a>>>24,p[s+32|0]=n,p[s+33|0]=n>>>8,p[s+34|0]=n>>>16,p[s+35|0]=n>>>24,p[s+36|0]=a,p[s+37|0]=a>>>8,p[s+38|0]=a>>>16,p[s+39|0]=a>>>24,p[s|0]=n,p[s+1|0]=n>>>8,p[s+2|0]=n>>>16,p[s+3|0]=n>>>24,p[s+4|0]=a,p[s+5|0]=a>>>8,p[s+6|0]=a>>>16,p[s+7|0]=a>>>24}function Oc(n){var s=0,a=0,g=0,k=0,E=0,L=0,R=0,G=0,H=0,ee=0,ce=0;e:{t:{if(n){if(E=c[n+8>>2],ee=c[E+40>>2],c[n+4>>2]){if(c[n+12>>2]=c[ee>>2],!Da(c[ee+20>>2],E,3))return c[n>>2]=2,Ho(n),0;if(s=c[n+104>>2],a=s,k=s>>31,s=c[n+100>>2],L=_r(a,k,s,s>>31),a=Fn,G=c[E>>2],k=G,s=k>>31,s=s<<4|k>>>28,k=k<<4,H=n,R=s,s=k,k=G&65535,g=k,s=s+g|0,s>>>0<g>>>0&&(R=R+1|0),g=s+L|0,a=a+R|0,s=Ls(g,g>>>0<s>>>0?a+1|0:a,4),c[H+16>>2]=s,!s){c[n+20>>2]=0;break e}c[n+20>>2]=(s+(L<<2)|0)+(k<<2);i:{n:{if(c[E+92>>2]){if(ce=c[E+100>>2],G=c[E+16>>2],k=c[E+12>>2],L=c[E+96>>2],a=L,s=a>>31,g=a,a=s,s=s<<5|g>>>27,R=a<<2|g>>>30,H=g<<5,a=g<<2,g=H+a|0,s=s+R|0,s=g>>>0<a>>>0?s+1|0:s,a=g+84|0,a>>>0<84&&(s=s+1|0),s=Ls(a,s,1),!s){c[n>>2]=1;break t}if(c[n+268>>2]=s,c[n+264>>2]=s,a=s,s=s+84|0,sl(a,k,G,s+H|0,L,ce,0,4,s),c[E+92>>2])break n}if(s=c[c[n+12>>2]>>2],s+-7>>>0>3)break i}hc(),s=c[c[n+12>>2]>>2]}i:{if(s>>>0<11||(aa(),!c[c[n+12>>2]+28>>2]))break i;hc()}i:{if(!c[n+56>>2]|c[n+120>>2]<1||(s=n+136|0,c[s>>2])||eu(s,c[n+132>>2]))break i;break e}c[n+4>>2]=0}if(!Hl(n,c[n+16>>2],c[n+100>>2],c[n+104>>2],c[E+88>>2],2))break t;c[ee+16>>2]=c[n+116>>2],n=1}else n=0;return n}return Ho(n),0}return c[n>>2]=1,Ho(n),0}function El(n,s){n=n|0,s=s|0;var a=0,g=0,k=0,E=0,L=0,R=0;k=Di[n+2>>1],L=(re(k,20091)>>16)+k|0,g=Di[n+8>>1],R=re(g,35468)>>16,E=Di[n>>1]+4|0,a=R+E|0,n=F[s+32|0]+(L+a>>3)|0,n=(n|0)>0?n:0,p[s+32|0]=(n|0)<255?n:255,n=re(k,35468)>>16,k=F[s+33|0]+(n+a>>3)|0,k=(k|0)>0?k:0,p[s+33|0]=(k|0)<255?k:255,k=F[s+34|0]+(a-n>>3)|0,k=(k|0)>0?k:0,p[s+34|0]=(k|0)<255?k:255,a=F[s+35|0]+(a-L>>3)|0,a=(a|0)>0?a:0,p[s+35|0]=(a|0)<255?a:255,k=g+(re(g,20091)>>16)|0,a=k+E|0,g=F[s|0]+(a+L>>3)|0,g=(g|0)>0?g:0,p[s|0]=(g|0)<255?g:255,g=F[s+1|0]+(n+a>>3)|0,g=(g|0)>0?g:0,p[s+1|0]=(g|0)<255?g:255,g=F[s+2|0]+(a-n>>3)|0,g=(g|0)>0?g:0,p[s+2|0]=(g|0)<255?g:255,a=F[s+3|0]+(a-L>>3)|0,a=(a|0)>0?a:0,p[s+3|0]=(a|0)<255?a:255,a=E-R|0,g=F[s+64|0]+(a+L>>3)|0,g=(g|0)>0?g:0,p[s+64|0]=(g|0)<255?g:255,g=F[s+65|0]+(n+a>>3)|0,g=(g|0)>0?g:0,p[s+65|0]=(g|0)<255?g:255,g=F[s+66|0]+(a-n>>3)|0,g=(g|0)>0?g:0,p[s+66|0]=(g|0)<255?g:255,a=F[s+67|0]+(a-L>>3)|0,a=(a|0)>0?a:0,p[s+67|0]=(a|0)<255?a:255,E=E-k|0,a=F[s+96|0]+(E+L>>3)|0,a=(a|0)>0?a:0,p[s+96|0]=(a|0)<255?a:255,a=F[s+97|0]+(n+E>>3)|0,a=(a|0)>0?a:0,p[s+97|0]=(a|0)<255?a:255,n=F[s+98|0]+(E-n>>3)|0,n=(n|0)>0?n:0,p[s+98|0]=(n|0)<255?n:255,n=F[s+99|0]+(E-L>>3)|0,n=(n|0)>0?n:0,p[s+99|0]=(n|0)<255?n:255}function Bs(n,s,a,g,k){n=n|0,s=s|0,a=a|0,g=g|0,k=k|0;var E=0,L=0,R=0,G=0,H=0,ee=0;if(H=k<<1&-4,H){for(H=g+H|0;R=re(F[n|0],19077)>>>8|0,E=F[a|0],G=R+(re(E,26149)>>>8|0)|0,L=G+-14234|0,ee=(L>>>0<16384?L>>>6|0:G>>>0<14234?0:248)&248,G=F[s|0],E=R-(re(G,6419)>>>8|0)-(re(E,13320)>>>8)|0,L=E+8708|0,E=L>>>0<16384?L>>6:(E|0)<-8708?0:255,p[g|0]=ee|E>>>5,L=E<<3&224,R=R+(re(G,33050)>>>8|0)|0,E=R+-17685|0,p[g+1|0]=L|(E>>>0<16384?E>>>9|0:R>>>0<17685?0:31),R=re(F[n+1|0],19077)>>>8|0,E=F[a|0],G=R+(re(E,26149)>>>8|0)|0,L=G+-14234|0,ee=(L>>>0<16384?L>>>6|0:G>>>0<14234?0:248)&248,G=F[s|0],E=R-(re(G,6419)>>>8|0)-(re(E,13320)>>>8)|0,L=E+8708|0,E=L>>>0<16384?L>>6:(E|0)<-8708?0:255,p[g+2|0]=ee|E>>>5,L=E<<3&224,R=R+(re(G,33050)>>>8|0)|0,E=R+-17685|0,p[g+3|0]=L|(E>>>0<16384?E>>>9|0:R>>>0<17685?0:31),a=a+1|0,s=s+1|0,n=n+2|0,g=g+4|0,(H|0)!=(g|0););g=H}k&1&&(n=re(F[n|0],19077)>>>8|0,a=F[a|0],k=n+(re(a,26149)>>>8|0)|0,H=k+-14234|0,H=(H>>>0<16384?H>>>6|0:k>>>0<14234?0:248)&248,s=F[s|0],a=n-(re(s,6419)>>>8|0)-(re(a,13320)>>>8)|0,k=a+8708|0,a=k>>>0<16384?k>>6:(a|0)<-8708?0:255,p[g|0]=H|a>>>5,n=n+(re(s,33050)>>>8|0)|0,s=n+-17685|0,p[g+1|0]=a<<3&224|(s>>>0<16384?s>>>9|0:n>>>0<17685?0:31))}function La(n,s,a,g,k){n=n|0,s=s|0,a=a|0,g=g|0,k=k|0;var E=0,L=0,R=0,G=0,H=0,ee=0;if(E=k<<2&-8,E){for(E=g+E|0;L=F[a|0],R=F[s|0],G=F[n|0],p[g+3|0]=255,G=re(G,19077)>>>8|0,H=G+(re(R,33050)>>>8|0)|0,ee=H+-17685|0,p[g+2|0]=ee>>>0<16384?ee>>>6|0:H>>>0<17685?0:255,H=G+(re(L,26149)>>>8|0)|0,ee=H+-14234|0,p[g|0]=ee>>>0<16384?ee>>>6|0:H>>>0<14234?0:255,L=G-(re(R,6419)>>>8|0)-(re(L,13320)>>>8)|0,R=L+8708|0,p[g+1|0]=R>>>0<16384?R>>>6|0:(L|0)<-8708?0:255,L=F[a|0],R=F[s|0],G=F[n+1|0],p[g+7|0]=255,G=re(G,19077)>>>8|0,H=G+(re(R,33050)>>>8|0)|0,ee=H+-17685|0,p[g+6|0]=ee>>>0<16384?ee>>>6|0:H>>>0<17685?0:255,H=G+(re(L,26149)>>>8|0)|0,ee=H+-14234|0,p[g+4|0]=ee>>>0<16384?ee>>>6|0:H>>>0<14234?0:255,L=G-(re(R,6419)>>>8|0)-(re(L,13320)>>>8)|0,R=L+8708|0,p[g+5|0]=R>>>0<16384?R>>>6|0:(L|0)<-8708?0:255,a=a+1|0,s=s+1|0,n=n+2|0,g=g+8|0,(E|0)!=(g|0););g=E}k&1&&(a=F[a|0],s=F[s|0],n=F[n|0],p[g+3|0]=255,n=re(n,19077)>>>8|0,k=n+(re(s,33050)>>>8|0)|0,E=k+-17685|0,p[g+2|0]=E>>>0<16384?E>>>6|0:k>>>0<17685?0:255,k=n+(re(a,26149)>>>8|0)|0,E=k+-14234|0,p[g|0]=E>>>0<16384?E>>>6|0:k>>>0<14234?0:255,n=n-(re(s,6419)>>>8|0)-(re(a,13320)>>>8)|0,s=n+8708|0,p[g+1|0]=s>>>0<16384?s>>>6|0:(n|0)<-8708?0:255)}function Pa(n,s,a,g,k){n=n|0,s=s|0,a=a|0,g=g|0,k=k|0;var E=0,L=0,R=0,G=0,H=0,ee=0;if(E=k<<2&-8,E){for(E=g+E|0;L=F[s|0],R=F[a|0],G=F[n|0],p[g+3|0]=255,G=re(G,19077)>>>8|0,H=G+(re(R,26149)>>>8|0)|0,ee=H+-14234|0,p[g+2|0]=ee>>>0<16384?ee>>>6|0:H>>>0<14234?0:255,H=G+(re(L,33050)>>>8|0)|0,ee=H+-17685|0,p[g|0]=ee>>>0<16384?ee>>>6|0:H>>>0<17685?0:255,L=G-(re(L,6419)>>>8|0)-(re(R,13320)>>>8)|0,R=L+8708|0,p[g+1|0]=R>>>0<16384?R>>>6|0:(L|0)<-8708?0:255,L=F[s|0],R=F[a|0],G=F[n+1|0],p[g+7|0]=255,G=re(G,19077)>>>8|0,H=G+(re(R,26149)>>>8|0)|0,ee=H+-14234|0,p[g+6|0]=ee>>>0<16384?ee>>>6|0:H>>>0<14234?0:255,H=G+(re(L,33050)>>>8|0)|0,ee=H+-17685|0,p[g+4|0]=ee>>>0<16384?ee>>>6|0:H>>>0<17685?0:255,L=G-(re(L,6419)>>>8|0)-(re(R,13320)>>>8)|0,R=L+8708|0,p[g+5|0]=R>>>0<16384?R>>>6|0:(L|0)<-8708?0:255,a=a+1|0,s=s+1|0,n=n+2|0,g=g+8|0,(E|0)!=(g|0););g=E}k&1&&(s=F[s|0],a=F[a|0],n=F[n|0],p[g+3|0]=255,n=re(n,19077)>>>8|0,k=n+(re(a,26149)>>>8|0)|0,E=k+-14234|0,p[g+2|0]=E>>>0<16384?E>>>6|0:k>>>0<14234?0:255,k=n+(re(s,33050)>>>8|0)|0,E=k+-17685|0,p[g|0]=E>>>0<16384?E>>>6|0:k>>>0<17685?0:255,n=n-(re(s,6419)>>>8|0)-(re(a,13320)>>>8)|0,s=n+8708|0,p[g+1|0]=s>>>0<16384?s>>>6|0:(n|0)<-8708?0:255)}function ra(n,s,a,g,k){n=n|0,s=s|0,a=a|0,g=g|0,k=k|0;var E=0,L=0,R=0,G=0,H=0,ee=0;if(E=k<<2&-8,E){for(E=g+E|0;L=F[a|0],R=F[s|0],G=F[n|0],p[g|0]=255,G=re(G,19077)>>>8|0,H=G+(re(R,33050)>>>8|0)|0,ee=H+-17685|0,p[g+3|0]=ee>>>0<16384?ee>>>6|0:H>>>0<17685?0:255,H=G+(re(L,26149)>>>8|0)|0,ee=H+-14234|0,p[g+1|0]=ee>>>0<16384?ee>>>6|0:H>>>0<14234?0:255,L=G-(re(R,6419)>>>8|0)-(re(L,13320)>>>8)|0,R=L+8708|0,p[g+2|0]=R>>>0<16384?R>>>6|0:(L|0)<-8708?0:255,L=F[a|0],R=F[s|0],G=F[n+1|0],p[g+4|0]=255,G=re(G,19077)>>>8|0,H=G+(re(R,33050)>>>8|0)|0,ee=H+-17685|0,p[g+7|0]=ee>>>0<16384?ee>>>6|0:H>>>0<17685?0:255,H=G+(re(L,26149)>>>8|0)|0,ee=H+-14234|0,p[g+5|0]=ee>>>0<16384?ee>>>6|0:H>>>0<14234?0:255,L=G-(re(R,6419)>>>8|0)-(re(L,13320)>>>8)|0,R=L+8708|0,p[g+6|0]=R>>>0<16384?R>>>6|0:(L|0)<-8708?0:255,a=a+1|0,s=s+1|0,n=n+2|0,g=g+8|0,(E|0)!=(g|0););g=E}k&1&&(a=F[a|0],s=F[s|0],n=F[n|0],p[g|0]=255,n=re(n,19077)>>>8|0,k=n+(re(s,33050)>>>8|0)|0,E=k+-17685|0,p[g+3|0]=E>>>0<16384?E>>>6|0:k>>>0<17685?0:255,k=n+(re(a,26149)>>>8|0)|0,E=k+-14234|0,p[g+1|0]=E>>>0<16384?E>>>6|0:k>>>0<14234?0:255,n=n-(re(s,6419)>>>8|0)-(re(a,13320)>>>8)|0,s=n+8708|0,p[g+2|0]=s>>>0<16384?s>>>6|0:(n|0)<-8708?0:255)}function ls(n){n=n|0,p[n+224|0]=-2139062144,p[n+225|0]=8421504,p[n+226|0]=32896,p[n+227|0]=128,p[n+228|0]=-2139062144,p[n+229|0]=8421504,p[n+230|0]=32896,p[n+231|0]=128,p[n+192|0]=-2139062144,p[n+193|0]=8421504,p[n+194|0]=32896,p[n+195|0]=128,p[n+196|0]=-2139062144,p[n+197|0]=8421504,p[n+198|0]=32896,p[n+199|0]=128,p[n+160|0]=-2139062144,p[n+161|0]=8421504,p[n+162|0]=32896,p[n+163|0]=128,p[n+164|0]=-2139062144,p[n+165|0]=8421504,p[n+166|0]=32896,p[n+167|0]=128,p[n+128|0]=-2139062144,p[n+129|0]=8421504,p[n+130|0]=32896,p[n+131|0]=128,p[n+132|0]=-2139062144,p[n+133|0]=8421504,p[n+134|0]=32896,p[n+135|0]=128,p[n+96|0]=-2139062144,p[n+97|0]=8421504,p[n+98|0]=32896,p[n+99|0]=128,p[n+100|0]=-2139062144,p[n+101|0]=8421504,p[n+102|0]=32896,p[n+103|0]=128,p[n+64|0]=-2139062144,p[n+65|0]=8421504,p[n+66|0]=32896,p[n+67|0]=128,p[n+68|0]=-2139062144,p[n+69|0]=8421504,p[n+70|0]=32896,p[n+71|0]=128,p[n+32|0]=-2139062144,p[n+33|0]=8421504,p[n+34|0]=32896,p[n+35|0]=128,p[n+36|0]=-2139062144,p[n+37|0]=8421504,p[n+38|0]=32896,p[n+39|0]=128,p[n|0]=-2139062144,p[n+1|0]=8421504,p[n+2|0]=32896,p[n+3|0]=128,p[n+4|0]=-2139062144,p[n+5|0]=8421504,p[n+6|0]=32896,p[n+7|0]=128}function ol(n){n=n|0;var s=0,a=0;s=n,n=s+-32|0,a=F[n|0]|F[n+1|0]<<8|(F[n+2|0]<<16|F[n+3|0]<<24),n=F[n+4|0]|F[n+5|0]<<8|(F[n+6|0]<<16|F[n+7|0]<<24),p[s+224|0]=a,p[s+225|0]=a>>>8,p[s+226|0]=a>>>16,p[s+227|0]=a>>>24,p[s+228|0]=n,p[s+229|0]=n>>>8,p[s+230|0]=n>>>16,p[s+231|0]=n>>>24,p[s+192|0]=a,p[s+193|0]=a>>>8,p[s+194|0]=a>>>16,p[s+195|0]=a>>>24,p[s+196|0]=n,p[s+197|0]=n>>>8,p[s+198|0]=n>>>16,p[s+199|0]=n>>>24,p[s+160|0]=a,p[s+161|0]=a>>>8,p[s+162|0]=a>>>16,p[s+163|0]=a>>>24,p[s+164|0]=n,p[s+165|0]=n>>>8,p[s+166|0]=n>>>16,p[s+167|0]=n>>>24,p[s+128|0]=a,p[s+129|0]=a>>>8,p[s+130|0]=a>>>16,p[s+131|0]=a>>>24,p[s+132|0]=n,p[s+133|0]=n>>>8,p[s+134|0]=n>>>16,p[s+135|0]=n>>>24,p[s+96|0]=a,p[s+97|0]=a>>>8,p[s+98|0]=a>>>16,p[s+99|0]=a>>>24,p[s+100|0]=n,p[s+101|0]=n>>>8,p[s+102|0]=n>>>16,p[s+103|0]=n>>>24,p[s+64|0]=a,p[s+65|0]=a>>>8,p[s+66|0]=a>>>16,p[s+67|0]=a>>>24,p[s+68|0]=n,p[s+69|0]=n>>>8,p[s+70|0]=n>>>16,p[s+71|0]=n>>>24,p[s+32|0]=a,p[s+33|0]=a>>>8,p[s+34|0]=a>>>16,p[s+35|0]=a>>>24,p[s+36|0]=n,p[s+37|0]=n>>>8,p[s+38|0]=n>>>16,p[s+39|0]=n>>>24,p[s|0]=a,p[s+1|0]=a>>>8,p[s+2|0]=a>>>16,p[s+3|0]=a>>>24,p[s+4|0]=n,p[s+5|0]=n>>>8,p[s+6|0]=n>>>16,p[s+7|0]=n>>>24}function Ko(n){var s=0,a=0,g=0,k=0,E=0,L=0,R=0,G=0,H=0,ee=0,ce=0,Ae=0,Ne=0,Ze=0,mt=0,Tt=0,Ot=0,ni=0,ci=0;Ae=2,G=c[n>>2];e:{if(G>>>0>12)break e;L=c[n+8>>2],k=c[n+4>>2];t:{i:{if(G>>>0>=11){if(a=c[n+40>>2],g=a>>31,R=c[n+36>>2],s=R>>31,ee=c[n+32>>2],E=ee>>31,Ne=g^a+g,a=(k+1|0)/2|0,Ot=(Ne|0)>=(a|0),R=s^s+R,ni=(R|0)>=(a|0),s=E^E+ee,ci=(s|0)>=(k|0),g=k,E=L+-1|0,ee=E,Ze=E>>31,H=_r(E,Ze,s,0),E=g+H|0,mt=g>>31,s=mt+Fn|0,s=E>>>0<H>>>0?s+1|0:s,ce=!s&E>>>0<=$n[n+48>>2]|s>>>0<0,s=a,L=((L+1|0)/2|0)+-1|0,E=L,H=E>>31,R=_r(E,H,R,0),L=s+R|0,Tt=s>>31,a=Tt+Fn|0,a=L>>>0<R>>>0?a+1|0:a,ce=ce&(!a&L>>>0<=$n[n+52>>2]|a>>>0<0),L=_r(Ne,0,E,H)+s|0,a=Tt+Fn|0,a=L>>>0<s>>>0?a+1|0:a,s=L,s=Ot&(ni&(ci&(ce&(!a&s>>>0<=$n[n+56>>2]|a>>>0<0))))&c[n+16>>2]!=0&c[n+20>>2]!=0&c[n+24>>2]!=0,(G|0)!=12)break i;if(!c[n+28>>2]||(G=c[n+44>>2],a=G>>31,a=a^a+G,!(s&(a|0)>=(k|0))))break e;if(k=_r(a,0,ee,Ze)+g|0,s=mt+Fn|0,s=k>>>0<g>>>0?s+1|0:s,g=k,!s&g>>>0<=$n[n+60>>2]|s>>>0<0)break t;break e}if(!c[n+16>>2]||(s=c[n+20>>2],g=s>>31,s=g^s+g,g=re(F[G+1157|0],k),(s|0)<(g|0)))break e;if(k=L+-1|0,k=_r(k,k>>31,s,0),s=k+g|0,g=Fn+(g>>31)|0,g=s>>>0<k>>>0?g+1|0:g,!g&s>>>0<=$n[n+24>>2]|g>>>0<0)break t;break e}if(!s)break e}Ae=0}return Ae}function ju(n,s,a,g){var k=0,E=0,L=0,R=0,G=0,H=0,ee=0,ce=0,Ae=0,Ne=0,Ze=0;e:{t:{i:{n:{o:{l:{r:{u:{s:{a:{if(L=s,L){if(k=a,!k)break a;if(E=g,!E)break s;if(E=Rr(E)-Rr(L)|0,E>>>0<=31)break u;break t}if((g|0)==1&a>>>0>=0|g>>>0>1)break t;return s=(n>>>0)/(a>>>0)|0,Fn=0,s}if(k=g,!n)break r;if(!k||k+-1&k)break l;return n=L>>>(fp(k)&31)|0,Fn=0,n}if(!(k+-1&k))break o;H=(Rr(k)+33|0)-Rr(L)|0,R=0-H|0;break i}H=E+1|0,R=63-E|0;break i}return n=(L>>>0)/(k>>>0)|0,Fn=0,n}if(E=Rr(k)-Rr(L)|0,E>>>0<31)break n;break t}if((k|0)==1)break e;return a=n,n=fp(k),g=n&31,32<=(n&63)>>>0?(E=0,n=s>>>g|0):(E=s>>>g|0,n=((1<<g)-1&s)<<32-g|a>>>g),Fn=E,n}H=E+1|0,R=63-E|0}if(k=s,L=n,E=H&63,G=E&31,32<=(E&63)>>>0?(E=0,ce=k>>>G|0):(E=k>>>G|0,ce=((1<<G)-1&k)<<32-G|L>>>G),n=R&63,R=n&31,32<=(n&63)>>>0?(k=L<<R,n=0):(k=(1<<R)-1&L>>>32-R|s<<R,n=L<<R),s=k,H)for(L=g+-1|0,k=a+-1|0,(k|0)!=-1&&(L=L+1|0),R=k;k=ce,ee=E<<1|k>>>31,E=k<<1|s>>>31,Ae=ee,k=ee,ee=E,G=L-((R>>>0<E>>>0)+k|0)|0,k=G>>31,G=G>>31,E=a&G,ce=ee-E|0,E=Ae-((g&k)+(ee>>>0<E>>>0)|0)|0,k=s<<1|n>>>31,n=Ne|n<<1,s=k|Ze,Ae=0,ee=G&1,Ne=ee,H=H+-1|0,!!H;);return Fn=Ae|(s<<1|n>>>31),ee|n<<1}n=0,s=0}return Fn=s,n}function Ma(n,s,a,g,k){n=n|0,s=s|0,a=a|0,g=g|0,k=k|0;var E=0,L=0,R=0,G=0,H=0,ee=0;if(H=k<<1&-4,H){for(H=g+H|0;L=F[a|0],E=re(F[n|0],19077)>>>8|0,ee=F[s|0],R=E+(re(ee,33050)>>>8|0)|0,G=R+-17685|0,p[g+1|0]=(G>>>0<16384?G>>>6|0:R>>>0<17685?0:240)|15,R=E+(re(L,26149)>>>8|0)|0,G=R+-14234|0,L=E-(re(ee,6419)>>>8|0)-(re(L,13320)>>>8)|0,E=L+8708|0,p[g|0]=(G>>>0<16384?G>>>6|0:R>>>0<14234?0:240)&240|(E>>>0<16384?E>>>10|0:(L|0)<-8708?0:15),L=F[a|0],E=re(F[n+1|0],19077)>>>8|0,ee=F[s|0],R=E+(re(ee,33050)>>>8|0)|0,G=R+-17685|0,p[g+3|0]=(G>>>0<16384?G>>>6|0:R>>>0<17685?0:240)|15,R=E+(re(L,26149)>>>8|0)|0,G=R+-14234|0,L=E-(re(ee,6419)>>>8|0)-(re(L,13320)>>>8)|0,E=L+8708|0,p[g+2|0]=(G>>>0<16384?G>>>6|0:R>>>0<14234?0:240)&240|(E>>>0<16384?E>>>10|0:(L|0)<-8708?0:15),a=a+1|0,s=s+1|0,n=n+2|0,g=g+4|0,(H|0)!=(g|0););g=H}k&1&&(a=F[a|0],n=re(F[n|0],19077)>>>8|0,s=F[s|0],k=n+(re(s,33050)>>>8|0)|0,H=k+-17685|0,p[g+1|0]=(H>>>0<16384?H>>>6|0:k>>>0<17685?0:240)|15,H=g,g=n+(re(a,26149)>>>8|0)|0,k=g+-14234|0,n=n-(re(s,6419)>>>8|0)-(re(a,13320)>>>8)|0,s=n+8708|0,p[H|0]=(k>>>0<16384?k>>>6|0:g>>>0<14234?0:240)&240|(s>>>0<16384?s>>>10|0:(n|0)<-8708?0:15))}function oa(n,s,a,g){var k=0,E=0,L=0,R=0,G=0,H=0,ee=0,ce=0,Ae=0,Ne=0,Ze=0,mt=0;ce=Nn-592|0,Nn=ce,E=s+24|0,L=io(E,1),G=Jo(a,0,n<<2);e:{t:{i:{n:{if(L){if(a=io(E,1),Ze=(io(E,io(E,1)?8:1)<<2)+G|0,mt=1,c[Ze>>2]=mt,(a|0)!=1)break n;Ze=(io(E,8)<<2)+G|0,mt=1,c[Ze>>2]=mt;break n}if(ee=Jo(ce,0,76),L=io(E,4)+4|0,(L|0)>19)break t;if(a=0,(L|0)>0)for(;Ze=(F[a+1232|0]<<2)+ee|0,mt=io(E,3),c[Ze>>2]=mt,a=a+1|0,(L|0)!=(a|0););if(!ws(ee+80|0,7,ee,19)||(L=n,io(E,1)&&(L=io(E,(io(E,3)<<1)+2|0)+2|0,(L|0)>(n|0))))break i;if((n|0)<1)break n;for(Ae=8,a=0;;){if(!L)break n;k=c[s+44>>2],(k|0)>=32&&(ke(E),k=c[s+44>>2]),Ne=k,R=c[s+28>>2],H=k&63,k=H&31,k=(ee+80|0)+(((32<=(H&63)>>>0?R>>>k|0:((1<<k)-1&R)<<32-k|c[s+24>>2]>>>k)&127)<<2)|0,c[s+44>>2]=Ne+F[k|0],R=mn[k+2>>1];o:{if(R>>>0<=15){c[(a<<2)+G>>2]=R,Ae=R||Ae,a=a+1|0;break o}if(k=R+-16|0,H=io(E,F[k+1251|0])+F[k+1254|0]|0,k=H+a|0,(k|0)>(n|0))break i;if((H|0)<1)break o;for(R=(R|0)==16?Ae:0;c[(a<<2)+G>>2]=R,a=a+1|0,(k|0)!=(a|0););a=k}if(L=L+-1|0,!((a|0)<(n|0)))break}}if(c[s+48>>2])break t;if(a=ws(g,8,G,n),a)break e;break t}c[s>>2]=3}c[s>>2]=3,a=0}return Nn=ce+592|0,a}function Xr(n,s,a){n=n|0,s=s|0,a=a|0;var g=0,k=0,E=0;if(a>>>0>=512)return pu(n|0,s|0,a|0)|0,n|0;k=n+a|0;e:{if(!((n^s)&3)){t:{if((a|0)<1){a=n;break t}if(!(n&3)){a=n;break t}for(a=n;;){if(p[a|0]=F[s|0],s=s+1|0,a=a+1|0,a>>>0>=k>>>0)break t;if(!(a&3))break}}g=k&-4;t:{if(g>>>0<64||(E=g+-64|0,a>>>0>E>>>0))break t;for(;c[a>>2]=c[s>>2],c[a+4>>2]=c[s+4>>2],c[a+8>>2]=c[s+8>>2],c[a+12>>2]=c[s+12>>2],c[a+16>>2]=c[s+16>>2],c[a+20>>2]=c[s+20>>2],c[a+24>>2]=c[s+24>>2],c[a+28>>2]=c[s+28>>2],c[a+32>>2]=c[s+32>>2],c[a+36>>2]=c[s+36>>2],c[a+40>>2]=c[s+40>>2],c[a+44>>2]=c[s+44>>2],c[a+48>>2]=c[s+48>>2],c[a+52>>2]=c[s+52>>2],c[a+56>>2]=c[s+56>>2],c[a+60>>2]=c[s+60>>2],s=s- -64|0,a=a- -64|0,a>>>0<=E>>>0;);}if(a>>>0>=g>>>0)break e;for(;c[a>>2]=c[s>>2],s=s+4|0,a=a+4|0,a>>>0<g>>>0;);break e}if(k>>>0<4){a=n;break e}if(g=k+-4|0,g>>>0<n>>>0){a=n;break e}for(a=n;p[a|0]=F[s|0],p[a+1|0]=F[s+1|0],p[a+2|0]=F[s+2|0],p[a+3|0]=F[s+3|0],s=s+4|0,a=a+4|0,a>>>0<=g>>>0;);}if(a>>>0<k>>>0)for(;p[a|0]=F[s|0],s=s+1|0,a=a+1|0,(k|0)!=(a|0););return n|0}function ga(n,s,a,g,k){n=n|0,s=s|0,a=a|0,g=g|0,k=k|0;var E=0,L=0,R=0,G=0,H=0,ee=0;if(L=k&-2,L){for(L=re(L,3)+g|0;R=F[a|0],E=re(F[n|0],19077)>>>8|0,ee=F[s|0],G=E+(re(ee,33050)>>>8|0)|0,H=G+-17685|0,p[g+2|0]=H>>>0<16384?H>>>6|0:G>>>0<17685?0:255,G=E+(re(R,26149)>>>8|0)|0,H=G+-14234|0,p[g|0]=H>>>0<16384?H>>>6|0:G>>>0<14234?0:255,R=E-(re(ee,6419)>>>8|0)-(re(R,13320)>>>8)|0,E=R+8708|0,p[g+1|0]=E>>>0<16384?E>>>6|0:(R|0)<-8708?0:255,R=F[a|0],E=re(F[n+1|0],19077)>>>8|0,ee=F[s|0],G=E+(re(ee,33050)>>>8|0)|0,H=G+-17685|0,p[g+5|0]=H>>>0<16384?H>>>6|0:G>>>0<17685?0:255,G=E+(re(R,26149)>>>8|0)|0,H=G+-14234|0,p[g+3|0]=H>>>0<16384?H>>>6|0:G>>>0<14234?0:255,R=E-(re(ee,6419)>>>8|0)-(re(R,13320)>>>8)|0,E=R+8708|0,p[g+4|0]=E>>>0<16384?E>>>6|0:(R|0)<-8708?0:255,a=a+1|0,s=s+1|0,n=n+2|0,g=g+6|0,(L|0)!=(g|0););g=L}k&1&&(a=F[a|0],n=re(F[n|0],19077)>>>8|0,s=F[s|0],k=n+(re(s,33050)>>>8|0)|0,L=k+-17685|0,p[g+2|0]=L>>>0<16384?L>>>6|0:k>>>0<17685?0:255,k=n+(re(a,26149)>>>8|0)|0,L=k+-14234|0,p[g|0]=L>>>0<16384?L>>>6|0:k>>>0<14234?0:255,n=n-(re(s,6419)>>>8|0)-(re(a,13320)>>>8)|0,s=n+8708|0,p[g+1|0]=s>>>0<16384?s>>>6|0:(n|0)<-8708?0:255)}function Il(n,s,a,g,k){n=n|0,s=s|0,a=a|0,g=g|0,k=k|0;var E=0,L=0,R=0,G=0,H=0,ee=0;if(L=k&-2,L){for(L=re(L,3)+g|0;R=F[s|0],E=re(F[n|0],19077)>>>8|0,ee=F[a|0],G=E+(re(ee,26149)>>>8|0)|0,H=G+-14234|0,p[g+2|0]=H>>>0<16384?H>>>6|0:G>>>0<14234?0:255,G=E+(re(R,33050)>>>8|0)|0,H=G+-17685|0,p[g|0]=H>>>0<16384?H>>>6|0:G>>>0<17685?0:255,R=E-(re(R,6419)>>>8|0)-(re(ee,13320)>>>8)|0,E=R+8708|0,p[g+1|0]=E>>>0<16384?E>>>6|0:(R|0)<-8708?0:255,R=F[s|0],E=re(F[n+1|0],19077)>>>8|0,ee=F[a|0],G=E+(re(ee,26149)>>>8|0)|0,H=G+-14234|0,p[g+5|0]=H>>>0<16384?H>>>6|0:G>>>0<14234?0:255,G=E+(re(R,33050)>>>8|0)|0,H=G+-17685|0,p[g+3|0]=H>>>0<16384?H>>>6|0:G>>>0<17685?0:255,R=E-(re(R,6419)>>>8|0)-(re(ee,13320)>>>8)|0,E=R+8708|0,p[g+4|0]=E>>>0<16384?E>>>6|0:(R|0)<-8708?0:255,a=a+1|0,s=s+1|0,n=n+2|0,g=g+6|0,(L|0)!=(g|0););g=L}k&1&&(s=F[s|0],n=re(F[n|0],19077)>>>8|0,a=F[a|0],k=n+(re(a,26149)>>>8|0)|0,L=k+-14234|0,p[g+2|0]=L>>>0<16384?L>>>6|0:k>>>0<14234?0:255,k=n+(re(s,33050)>>>8|0)|0,L=k+-17685|0,p[g|0]=L>>>0<16384?L>>>6|0:k>>>0<17685?0:255,n=n-(re(s,6419)>>>8|0)-(re(a,13320)>>>8)|0,s=n+8708|0,p[g+1|0]=s>>>0<16384?s>>>6|0:(n|0)<-8708?0:255)}function Uu(n,s){var a=0,g=0,k=0;e:{if(!n)break e;if(!s){if(c[n>>2])break e;return c[n>>2]=2,c[n+4>>2]=0,c[n+8>>2]=5281,0}if(!c[n+4>>2]&&!Wo(n,s))break e;t:{if(!rl(n,s)){i:{if(!gu(n,s))break i;c[n+2300>>2]=0;n:{if(c[n+308>>2]>=1)for(k=n+12|0;;){if(g=c[n+312>>2],!pa(k,n))break n;if(c[n+2296>>2]<c[n+288>>2])for(a=(re(a&g,28)+n|0)+316|0;;){if(!vs(n,a)){if(a=0,c[n>>2])break i;c[n>>2]=7,c[n+4>>2]=0,c[n+8>>2]=5412;break i}if(g=c[n+2296>>2]+1|0,c[n+2296>>2]=g,!((g|0)<c[n+288>>2]))break}if(a=c[n+2256>>2]+-2|0,p[a|0]=0,p[a+1|0]=0,c[n+2296>>2]=0,c[n+2248>>2]=0,!Bc(n,s)){if(a=0,c[n>>2])break i;c[n>>2]=6,c[n+4>>2]=0,c[n+8>>2]=5447;break i}if(a=c[n+2300>>2]+1|0,c[n+2300>>2]=a,!((a|0)<c[n+308>>2]))break}o:{if(c[n+148>>2]<1||ft[c[2559]](n+124|0)|0)break o;a=0;break i}a=1;break i}if(a=0,c[n>>2])break i;c[n>>2]=7,c[n+4>>2]=0,c[n+8>>2]=5371}if(l0(n,s)&a)break t}return ft[c[2562]](n+124|0),s0(n),jr(c[n+2288>>2]),c[n+2288>>2]=0,c[n+2292>>2]=0,c[n+12>>2]=0,c[n+16>>2]=0,c[n+20>>2]=0,c[n+24>>2]=0,c[n+28>>2]=0,c[n+32>>2]=0,c[n+36>>2]=0,c[n+4>>2]=0,0}c[n+4>>2]=0,a=1}return a}function vu(n){var s=0,a=0,g=0,k=0,E=0,L=0,R=0,G=0,H=0,ee=0,ce=0,Ae=0,Ne=0,Ze=0,mt=0,Tt=0;for(s=n+12|0,R=Tr(s,7),Tr(s,1)&&(ce=js(s,4)),Tr(s,1)&&(Ae=js(s,4)),Tr(s,1)&&(Ne=js(s,4)),Tr(s,1)&&(Ze=js(s,4)),Tr(s,1)&&(mt=js(s,4)),Tt=c[n+104>>2],L=n+776|0,G=L+24|0,H=L+16|0,ee=L+8|0;;){e:{t:{if(Tt){s=p[(n+E|0)+116|0]+(c[n+112>>2]?0:R)|0;break t}if(s=R,!E)break t;a=c[G+4>>2],s=(E<<5)+n|0,c[s+800>>2]=c[G>>2],c[s+804>>2]=a,a=c[H+4>>2],c[s+792>>2]=c[H>>2],c[s+796>>2]=a,a=c[ee+4>>2],c[s+784>>2]=c[ee>>2],c[s+788>>2]=a,a=c[L+4>>2],c[s+776>>2]=c[L>>2],c[s+780>>2]=a;break e}a=(E<<5)+n|0,k=s+mt|0,c[a+800>>2]=k,g=s+Ze|0,g=(g|0)<117?g:117,c[a+792>>2]=F[((g|0)>0?g:0)+4448|0],g=(s|0)<127?s:127,c[a+780>>2]=mn[(((g|0)>0?g:0)<<1)+4576>>1],g=s+ce|0,g=(g|0)<127?g:127,c[a+776>>2]=F[((g|0)>0?g:0)+4448|0],k=(k|0)<127?k:127,c[a+796>>2]=mn[(((k|0)>0?k:0)<<1)+4576>>1],k=s+Ae|0,k=(k|0)<127?k:127,c[a+784>>2]=F[((k|0)>0?k:0)+4448|0]<<1,s=s+Ne|0,s=(s|0)<127?s:127,s=re(mn[(((s|0)>0?s:0)<<1)+4576>>1],101581),c[a+788>>2]=s>>>0<524288?8:s>>>16|0}if(E=E+1|0,(E|0)==4)break}}function Gs(n,s,a,g,k,E,L){var R=0,G=0,H=0,ee=0,ce=0,Ae=0,Ne=0,Ze=0,mt=0,Tt=0,Ot=0,ni=0,ci=0,Mi=0,ki=0,Gi=0,sn=0,vn=0,or=0,Ir=0,gs=0,wa=0,hl=0,Zu=0;if((g|0)>=1)for(or=k<<1|1,Ir=re(s,3),gs=0-s|0,wa=re(s,-3),hl=0-(s<<2)|0,Ot=s<<1,Zu=0-Ot|0,ni=c[2547],H=c[2548],ci=c[2546],ee=c[2549];;){k=g,Mi=n+Zu|0,G=F[Mi|0],ki=n+s|0,Ze=F[ki|0],R=G-Ze|0,mt=n+gs|0,g=F[mt|0],Ne=F[n|0];e:{if((F[R+ee|0]+(F[ee+(g-Ne|0)|0]<<2)|0)>(or|0)||(Gi=n+wa|0,Ae=F[Gi|0],F[ee+(F[n+hl|0]-Ae|0)|0]>(E|0)|F[ee+(Ae-G|0)|0]>(E|0))||(ce=F[ee+(G-g|0)|0],(ce|0)>(E|0))||(sn=n+Ot|0,Tt=F[sn|0],F[ee+(F[n+Ir|0]-Tt|0)|0]>(E|0)|F[ee+(Tt-Ze|0)|0]>(E|0))||(vn=F[ee+(Ze-Ne|0)|0],(vn|0)>(E|0)))break e;if(R=p[R+ci|0]+re(Ne-g|0,3)|0,!((vn|0)<=(L|0)&&(ce|0)<=(L|0))){G=p[(R+4>>3)+ni|0],p[mt|0]=F[(p[(R+3>>3)+ni|0]+g|0)+H|0],p[n|0]=F[(Ne-G|0)+H|0];break e}ce=Ae,R=p[R+ci|0],Ae=re(R,9)+63>>7,p[Gi|0]=F[(ce+Ae|0)+H|0],ce=G,G=re(R,18)+63>>7,p[Mi|0]=F[(ce+G|0)+H|0],ce=g,g=re(R,27)+63>>7,p[mt|0]=F[(ce+g|0)+H|0],p[n|0]=F[(Ne-g|0)+H|0],p[ki|0]=F[(Ze-G|0)+H|0],p[sn|0]=F[(Tt-Ae|0)+H|0]}if(g=k+-1|0,n=n+a|0,!((k|0)>1))break}}function Tl(n,s,a){var g=0,k=0,E=0,L=0,R=0,G=0;if(g=$l(1,0,272),!g)return 0;c[g>>2]=0,c[g+4>>2]=2,yn(),E=c[n>>2],c[g+100>>2]=E,k=c[n+4>>2],c[g+8>>2]=n+24,c[g+104>>2]=k,c[n+28>>2]=k,c[n+24>>2]=E,c[n- -64>>2]=n,c[g>>2]=0,be(g+24|0,s,a);e:{t:{i:{if(!hn(c[n>>2],c[n+4>>2],1,g,0))break i;n:{o:{if(c[g+176>>2]!=1|c[g+180>>2]!=3|c[g+120>>2]>0)break o;if(a=c[g+164>>2],(a|0)<1)break n;for(s=c[g+168>>2],k=0;;){if(E=s+re(k,548)|0,F[c[E+4>>2]]|F[c[E+8>>2]]|F[c[E+12>>2]])break o;if(k=k+1|0,(a|0)==(k|0))break}break n}if(c[n+132>>2]=0,s=c[g+104>>2],a=s,k=s>>31,s=c[g+100>>2],L=_r(a,k,s,s>>31),a=Fn,G=g,k=c[n>>2],s=k>>31,s=s<<4|k>>>28,E=k<<4,R=k&65535,k=R,E=E+k|0,E>>>0<k>>>0&&(s=s+1|0),k=E+L|0,s=s+a|0,s=Ls(k,k>>>0<E>>>0?s+1|0:s,4),c[G+16>>2]=s,s)break t;c[g+20>>2]=0,c[g>>2]=1;break i}if(c[n+132>>2]=1,c[g+20>>2]=0,s=c[g+104>>2],a=s,k=s>>31,s=c[g+100>>2],s=Ls(_r(a,k,s,s>>31),Fn,1),c[g+16>>2]=s,s)break e;c[g>>2]=1}return Ho(g),jr(g),0}c[g+20>>2]=(s+(L<<2)|0)+(R<<2)}return c[n+20>>2]=g,1}function ps(n,s,a){n=n|0,s=s|0,a=a|0;var g=0,k=0,E=0,L=0,R=0,G=0,H=0,ee=0,ce=0,Ae=0,Ne=0,Ze=0,mt=0,Tt=0;for(Ae=0-s|0,ee=s<<2,G=ee+n|0,Ne=0-(s<<1)|0,Ze=a<<1|1,n=c[2548],a=c[2547],mt=c[2546],ce=c[2549];g=k+G|0,L=g+Ae|0,H=F[L|0],R=F[g|0],E=F[g+Ne|0]-F[s+g|0]|0,((F[ce+(H-R|0)|0]<<2)+F[E+ce|0]|0)<=(Ze|0)&&(E=p[E+mt|0]+re(R-H|0,3)|0,Tt=p[(E+4>>3)+a|0],p[L|0]=F[(H+p[(E+3>>3)+a|0]|0)+n|0],p[g|0]=F[(R-Tt|0)+n|0]),k=k+1|0,(k|0)!=16;);for(G=G+ee|0,k=0;g=k+G|0,L=g+Ae|0,H=F[L|0],R=F[g|0],E=F[g+Ne|0]-F[s+g|0]|0,((F[ce+(H-R|0)|0]<<2)+F[E+ce|0]|0)<=(Ze|0)&&(E=p[E+mt|0]+re(R-H|0,3)|0,Tt=p[(E+4>>3)+a|0],p[L|0]=F[(H+p[(E+3>>3)+a|0]|0)+n|0],p[g|0]=F[(R-Tt|0)+n|0]),k=k+1|0,(k|0)!=16;);for(H=G+ee|0,k=0;g=k+H|0,R=g+Ae|0,ee=F[R|0],G=F[g|0],L=F[g+Ne|0]-F[s+g|0]|0,((F[ce+(ee-G|0)|0]<<2)+F[L+ce|0]|0)<=(Ze|0)&&(L=p[L+mt|0]+re(G-ee|0,3)|0,E=p[(L+4>>3)+a|0],p[R|0]=F[(ee+p[(L+3>>3)+a|0]|0)+n|0],p[g|0]=F[(G-E|0)+n|0]),k=k+1|0,(k|0)!=16;);}function Pn(n,s,a){n=n|0,s=s|0,a=a|0;var g=0,k=0,E=0,L=0,R=0,G=0,H=0,ee=0,ce=0,Ae=0,Ne=0,Ze=0;for(H=n+4|0,Ae=a<<1|1,a=c[2548],ee=c[2547],Ne=c[2546],ce=c[2549];g=H+re(s,k)|0,L=g+-1|0,R=F[L|0],G=F[g|0],E=F[g+-2|0]-F[g+1|0]|0,((F[ce+(R-G|0)|0]<<2)+F[E+ce|0]|0)<=(Ae|0)&&(E=p[E+Ne|0]+re(G-R|0,3)|0,Ze=p[(E+4>>3)+ee|0],p[L|0]=F[(R+p[(E+3>>3)+ee|0]|0)+a|0],p[g|0]=F[(G-Ze|0)+a|0]),k=k+1|0,(k|0)!=16;);for(H=n+8|0,k=0;g=H+re(s,k)|0,L=g+-1|0,R=F[L|0],G=F[g|0],E=F[g+-2|0]-F[g+1|0]|0,((F[ce+(R-G|0)|0]<<2)+F[E+ce|0]|0)<=(Ae|0)&&(E=p[E+Ne|0]+re(G-R|0,3)|0,Ze=p[(E+4>>3)+ee|0],p[L|0]=F[(R+p[(E+3>>3)+ee|0]|0)+a|0],p[g|0]=F[(G-Ze|0)+a|0]),k=k+1|0,(k|0)!=16;);for(G=n+12|0,k=0;n=G+re(s,k)|0,H=n+-1|0,g=F[H|0],R=F[n|0],L=F[n+-2|0]-F[n+1|0]|0,((F[ce+(g-R|0)|0]<<2)+F[L+ce|0]|0)<=(Ae|0)&&(L=p[L+Ne|0]+re(R-g|0,3)|0,E=p[(L+4>>3)+ee|0],p[H|0]=F[(g+p[(L+3>>3)+ee|0]|0)+a|0],p[n|0]=F[(R-E|0)+a|0]),k=k+1|0,(k|0)!=16;);}function zo(n,s){n=n|0,s=s|0;var a=0;n=Di[n>>1]+4>>3,a=n+F[s|0]|0,a=(a|0)>0?a:0,p[s|0]=(a|0)<255?a:255,a=n+F[s+1|0]|0,a=(a|0)>0?a:0,p[s+1|0]=(a|0)<255?a:255,a=n+F[s+2|0]|0,a=(a|0)>0?a:0,p[s+2|0]=(a|0)<255?a:255,a=n+F[s+3|0]|0,a=(a|0)>0?a:0,p[s+3|0]=(a|0)<255?a:255,a=n+F[s+32|0]|0,a=(a|0)>0?a:0,p[s+32|0]=(a|0)<255?a:255,a=n+F[s+33|0]|0,a=(a|0)>0?a:0,p[s+33|0]=(a|0)<255?a:255,a=n+F[s+34|0]|0,a=(a|0)>0?a:0,p[s+34|0]=(a|0)<255?a:255,a=n+F[s+35|0]|0,a=(a|0)>0?a:0,p[s+35|0]=(a|0)<255?a:255,a=n+F[s+64|0]|0,a=(a|0)>0?a:0,p[s+64|0]=(a|0)<255?a:255,a=n+F[s+65|0]|0,a=(a|0)>0?a:0,p[s+65|0]=(a|0)<255?a:255,a=n+F[s+66|0]|0,a=(a|0)>0?a:0,p[s+66|0]=(a|0)<255?a:255,a=n+F[s+67|0]|0,a=(a|0)>0?a:0,p[s+67|0]=(a|0)<255?a:255,a=n+F[s+96|0]|0,a=(a|0)>0?a:0,p[s+96|0]=(a|0)<255?a:255,a=n+F[s+97|0]|0,a=(a|0)>0?a:0,p[s+97|0]=(a|0)<255?a:255,a=n+F[s+98|0]|0,a=(a|0)>0?a:0,p[s+98|0]=(a|0)<255?a:255,n=n+F[s+99|0]|0,n=(n|0)>0?n:0,p[s+99|0]=(n|0)<255?n:255}function Hr(n,s,a,g,k,E,L){var R=0,G=0,H=0,ee=0,ce=0,Ae=0,Ne=0,Ze=0,mt=0,Tt=0,Ot=0,ni=0,ci=0,Mi=0,ki=0,Gi=0,sn=0,vn=0,or=0,Ir=0,gs=0;if((g|0)>=1)for(ki=k<<1|1,Gi=re(s,3),sn=0-s|0,vn=re(s,-3),or=0-(s<<2)|0,Ot=s<<1,Ir=0-Ot|0,gs=c[2546],ee=c[2548],Ne=c[2547],H=c[2549];;){k=g,ni=n+Ir|0,G=F[ni|0],ci=n+s|0,ce=F[ci|0],Ze=G-ce|0,Tt=n+sn|0,g=F[Tt|0],Ae=F[n|0];e:{if((F[Ze+H|0]+(F[H+(g-Ae|0)|0]<<2)|0)>(ki|0)||(R=F[n+vn|0],F[H+(F[n+or|0]-R|0)|0]>(E|0)|F[H+(R-G|0)|0]>(E|0))||(mt=F[H+(G-g|0)|0],(mt|0)>(E|0))||(R=F[n+Ot|0],F[H+(F[n+Gi|0]-R|0)|0]>(E|0)|F[H+(R-ce|0)|0]>(E|0))||(Mi=F[H+(ce-Ae|0)|0],(Mi|0)>(E|0)))break e;if(R=re(Ae-g|0,3),!((Mi|0)<=(L|0)&&(mt|0)<=(L|0))){G=p[Ze+gs|0]+R|0,ce=p[(G+4>>3)+Ne|0],p[Tt|0]=F[(p[(G+3>>3)+Ne|0]+g|0)+ee|0],p[n|0]=F[(Ae-ce|0)+ee|0];break e}Ze=p[(R+3>>3)+Ne|0],mt=G,G=p[(R+4>>3)+Ne|0],R=G+1>>1,p[ni|0]=F[(mt+R|0)+ee|0],p[Tt|0]=F[(g+Ze|0)+ee|0],p[n|0]=F[(Ae-G|0)+ee|0],p[ci|0]=F[(ce-R|0)+ee|0]}if(g=k+-1|0,n=n+a|0,!((k|0)>1))break}}function Po(n,s,a,g){var k=0,E=0,L=0,R=0,G=0,H=0,ee=0,ce=0;e:{t:switch(a|0){case 0:ft[c[2734]](n,s,g);return;case 1:ft[c[2735]](n,s,g);return;case 7:ft[c[2735]](n,s,g),ft[c[2664]](g,0,s,1,0);return;case 2:ft[c[2736]](n,s,g);return;case 3:Xr(g,n,s<<2);return;case 8:R=Xr(g,n,s<<2),G=0,H=s,ee=1,ce=0,L=c[2664],ft[L](R|0,G|0,H|0,ee|0,ce|0);return;case 4:if((s|0)<1)break e;for(a=(s<<2)+n|0;s=c[n>>2],s=s<<24|s<<8&16711680|(s>>>8&65280|s>>>24),p[g|0]=s,p[g+1|0]=s>>>8,p[g+2|0]=s>>>16,p[g+3|0]=s>>>24,g=g+4|0,n=n+4|0,n>>>0<a>>>0;);break e;case 9:if((s|0)>=1)for(E=(s<<2)+n|0,a=g;k=c[n>>2],k=k<<24|k<<8&16711680|(k>>>8&65280|k>>>24),p[a|0]=k,p[a+1|0]=k>>>8,p[a+2|0]=k>>>16,p[a+3|0]=k>>>24,a=a+4|0,n=n+4|0,n>>>0<E>>>0;);ft[c[2664]](g,1,s,1,0);return;case 5:ft[c[2737]](n,s,g);return;case 10:ft[c[2737]](n,s,g),ft[c[2665]](g,s,1,0);return;case 6:break t;default:break e}ft[c[2738]](n,s,g)}}function is(n,s,a){var g=0,k=0,E=0;g=Nn-160|0,Nn=g,c[g+16>>2]=1,c[g+12>>2]=s,c[g+8>>2]=n,c[g+156>>2]=0,k=g,E=kl(n,s,0,0,0,g+156|0,0,g+8|0),c[k+48>>2]=E,!c[g+156>>2]|(c[g+48>>2]!=7?c[g+48>>2]:0)||(c[g+48>>2]=4),n=c[g+48>>2];e:{if(n)break e;gp(g+48|0),n=c[g+20>>2],c[g+112>>2]=n+c[g+8>>2],c[g+108>>2]=c[g+12>>2]-n,Hh(a,g+48|0);t:{if(!c[g+40>>2]){if(s=Co(),!s){n=1;break e}c[s+2348>>2]=c[g+24>>2],c[s+2352>>2]=c[g+28>>2];i:{if(Wo(s,g+48|0)&&(n=Wl(c[g+48>>2],c[g+52>>2],c[a+20>>2],c[a>>2]),n||(c[s+148>>2]=0,Fh(c[a+20>>2],s),n=0,Uu(s,g+48|0))))break i;n=c[s>>2]}Ns(s);break t}s=$l(1,0,272),n=0;i:{if(!s)break i;c[s>>2]=0,c[s+4>>2]=2,yn(),n=s}if(s=n,!s){n=1;break e}i:{if(je(s,g+48|0)&&(n=Wl(c[g+48>>2],c[g+52>>2],c[a+20>>2],c[a>>2]),n||(n=0,Oc(s))))break i;n=c[s>>2]}p0(s)}if(n){Cf(c[a>>2]);break e}if(n=0,s=c[a+20>>2],!s|!c[s+48>>2])break e;n=Qe(c[a>>2])}return Nn=g+160|0,n}function yn(){var n=0;n=c[2673],(n|0)!=c[2551]&&(c[2771]=81,c[2770]=81,c[2769]=82,c[2768]=83,c[2767]=84,c[2766]=85,c[2765]=86,c[2764]=87,c[2763]=88,c[2762]=89,c[2761]=90,c[2760]=91,c[2759]=92,c[2758]=93,c[2757]=94,c[2756]=81,c[2803]=81,c[2802]=81,c[2801]=82,c[2800]=83,c[2799]=84,c[2798]=85,c[2797]=86,c[2796]=87,c[2795]=88,c[2794]=89,c[2793]=90,c[2792]=91,c[2791]=92,c[2790]=93,c[2789]=94,c[2788]=81,c[2755]=95,c[2754]=95,c[2753]=96,c[2752]=97,c[2751]=98,c[2750]=99,c[2749]=100,c[2748]=101,c[2747]=102,c[2746]=103,c[2745]=104,c[2744]=105,c[2743]=106,c[2742]=107,c[2741]=108,c[2740]=95,c[2787]=95,c[2786]=95,c[2785]=96,c[2784]=97,c[2783]=98,c[2782]=99,c[2781]=100,c[2780]=101,c[2779]=102,c[2778]=103,c[2777]=104,c[2776]=105,c[2775]=106,c[2774]=107,c[2773]=108,c[2772]=95,c[2733]=109,c[2804]=110,c[2735]=111,c[2734]=112,c[2736]=113,c[2737]=114,c[2738]=115,c[2805]=116,c[2732]=117,c[2551]=n)}function Da(n,s,a){var g=0,k=0,E=0,L=0,R=0,G=0,H=0,ee=0;k=Nn-16|0,Nn=k,G=c[s+4>>2],H=c[s>>2];e:{t:{if(!n){c[s+72>>2]=0,g=H,E=G;break t}if(L=c[n+8>>2],c[s+72>>2]=(L|0)>0,g=H,E=G,(L|0)<1)break t;if(L=0,g=c[n+16>>2],a=a>>>0>10,R=a?g&-2:g,E=c[n+24>>2],(R+E|0)>(G|0)||(g=c[n+12>>2],ee=a?g&-2:g,g=c[n+20>>2],(E|0)<1|(ee+g|0)>(H|0)|((g|0)<1|(R|ee)<0)))break e}if(c[s+84>>2]=R,c[s+76>>2]=ee,c[s+16>>2]=E,c[s+12>>2]=g,c[s+88>>2]=R+E,c[s+80>>2]=g+ee,n){a=c[n+28>>2],c[s+92>>2]=(a|0)>0,L=1,R=1;t:{if((a|0)>=1){if(c[k+12>>2]=c[n+32>>2],c[k+8>>2]=c[n+36>>2],!et(g,E,k+12|0,k+8|0))break t;c[s+96>>2]=c[k+12>>2],c[s+100>>2]=c[k+8>>2],R=!c[s+92>>2]}if(c[s+68>>2]=c[n>>2]!=0,c[s+56>>2]=!c[n+4>>2],R)break e;n=0,n=c[s+96>>2]<((re(H,3)|0)/4|0)?c[s+100>>2]<((re(G,3)|0)/4|0):n,c[s+56>>2]=0,c[s+68>>2]=n;break e}L=0;break e}c[s+68>>2]=0,c[s+92>>2]=0,L=1,c[s+56>>2]=1}return Nn=k+16|0,L}function Vu(n,s){n=n|0,s=s|0;var a=0,g=0,k=0,E=0,L=0,R=0,G=0,H=0,ee=0,ce=0,Ae=0,Ne=0,Ze=0;if(g=c[n+108>>2],L=s-g|0,(L|0)>=1)for(a=c[n+100>>2],H=c[n+16>>2]+(re(a,g)<<2)|0;;){R=(L|0)<16?L:16,Ae=R+g|0,k=c[n+8>>2],ee=c[k>>2],Ne=re(ee,R),ce=c[k+40>>2],k=c[ce+136>>2]+re(g,ee)|0,G=c[n+20>>2],E=c[n+176>>2];e:{if((E|0)>=1){if(a=E+-1|0,Gl((re(a,20)+n|0)+180|0,g,Ae,H,G),(E|0)<2)break e;for(;E=a+-1|0,Gl((re(E,20)+n|0)+180|0,g,Ae,G,G),Ze=(a|0)>1,a=E,!!Ze;);break e}if((G|0)==(H|0))break e;Xr(G,H,re(a,R)<<2)}if(ft[c[2669]](G,k,Ne),E=c[ce+12>>2],E){a=c[ce+140>>2];e:{if((L|0)<1)break e;if(ft[c[(E<<2)+10912>>2]](a,k,k,ee),(R|0)==1){a=k;break e}for(g=g+1|0;a=k+ee|0,ft[c[(c[ce+12>>2]<<2)+10912>>2]](k,a,a,ee),k=a,g=g+1|0,(Ae|0)!=(g|0););}c[ce+140>>2]=a}if(a=c[n+100>>2],H=(re(a,R)<<2)+H|0,g=Ae,L=L-R|0,!((L|0)>0))break}c[n+108>>2]=s,c[n+116>>2]=s}function qu(n,s){n=n|0,s=s|0;var a=0,g=0,k=0,E=0,L=0,R=0,G=0,H=0,ee=0,ce=0,Ae=0;if(L=c[n+16>>2],(L|0)<1)return 0;for(ce=L+1>>1,a=c[s+24>>2];;){g=a,a=c[n+32>>2],E=bs(g,L-R|0,c[n+20>>2]+re(a,R)|0,a),a=ce-G|0,_c(c[s+28>>2],a)&&(k=c[n+36>>2],k=bs(c[s+28>>2],a,c[n+24>>2]+re(k,G)|0,k),g=a,a=c[n+36>>2],bs(c[s+32>>2],g,c[n+28>>2]+re(a,G)|0,a),G=k+G|0),R=E+R|0,E=c[s>>2],g=c[E>>2],k=0,a=c[s+24>>2];e:{if(c[a+64>>2]>=c[a+56>>2])break e;for(Ae=c[(g<<2)+11312>>2],g=c[E+16>>2]+re(c[E+20>>2],c[s+16>>2]+H|0)|0;;){if(c[a+24>>2]>0||(ee=c[s+28>>2],c[ee+64>>2]>=c[ee+56>>2]|c[ee+24>>2]>0))break e;if(Ni(a),Ni(c[s+28>>2]),Ni(c[s+32>>2]),a=c[s+24>>2],ft[Ae|0](c[a+68>>2],c[c[s+28>>2]+68>>2],c[c[s+32>>2]+68>>2],g,c[a+52>>2]),k=k+1|0,g=c[E+20>>2]+g|0,a=c[s+24>>2],!(c[a+64>>2]<c[a+56>>2]))break}}if(H=k+H|0,!((L|0)>(R|0)))break}return H|0}function Fc(n,s){n=n|0,s=s|0;var a=0,g=0,k=0,E=0,L=0,R=0;a=Nn-240|0,Nn=a,k=a+40|0,k?(Wh(Jo(k,0,200)+40|0),k=1):k=0;e:{if(!k){Vh(c[2536]);break e}F[10640]||(Na(32)|0,p[10640]=1),k=a+80|0;t:{if(Gr(n,s,a+40|0))break t;if(E=Mc(c[a+40>>2],c[a+44>>2],32,0)|0,!E){n=c[a+44>>2],c[a>>2]=c[a+40>>2],c[a+4>>2]=n,Yu(c[2536],1051,a),E=0;break t}if(g=Al(0,c[a+40>>2],c[a+44>>2],32,255,65280,16711680,-16777216)|0,!g){n=c[a+44>>2],c[a+16>>2]=c[a+40>>2],c[a+20>>2]=n,Yu(c[2536],1092,a+16|0),g=0;break t}if(Hs(g|0)|0,c[a+80>>2]=1,c[a+84>>2]=c[g+8>>2],c[a+88>>2]=c[g+12>>2],c[a+96>>2]=c[g+20>>2],c[a+100>>2]=c[g+16>>2],L=c[g+12>>2],R=c[g+16>>2],c[a+92>>2]=1,c[a+104>>2]=re(L,R),n=Ks(n,s,a+40|0),n){c[a+32>>2]=n,L=0,Yu(c[2536],1130,a+32|0);break t}if(sc(g|0),L=0,hu(g|0,0,E|0,0)|0)break t;L=!(ah(E|0)|0)}fu(g|0),fu(E|0),Cf(k)}return Nn=a+240|0,L|0}function uh(n,s,a,g,k){n=n|0,s=s|0,a=a|0,g=g|0,k=k|0;var E=0,L=0,R=0,G=0,H=0,ee=0;if((g|0)>=2)for(L=g>>1,G=(L|0)>1?L:1,L=0;;){E=L<<3,R=c[(E|4)+n>>2],E=c[n+E>>2],H=(R>>>7&510)+(E>>>7&510)|0,ee=(R>>>15&510)+(E>>>15&510)|0,E=(R<<1&510)+(E<<1&510)|0,R=((re(H,-24116)+re(ee,28800)|0)+re(E,-4684)|0)+33685504>>18,E=((re(H,-19081)+re(ee,-9719)|0)+re(E,28800)|0)+33685504>>18;e:{if(k){p[s+L|0]=E,p[a+L|0]=R;break e}H=s+L|0,p[H|0]=(E+F[H|0]|0)+1>>>1,E=a+L|0,p[E|0]=(R+F[E|0]|0)+1>>>1}if(L=L+1|0,(G|0)==(L|0))break}if(g&1){if(n=c[(G<<3)+n>>2],g=n>>>6&1020,L=n>>>14&1020,R=n<<2&1020,n=((re(g,-24116)+re(L,28800)|0)+re(R,-4684)|0)+33685504>>18,g=((re(g,-19081)+re(L,-9719)|0)+re(R,28800)|0)+33685504>>18,k){p[s+G|0]=g,p[a+G|0]=n;return}s=s+G|0,p[s|0]=(g+F[s|0]|0)+1>>>1,s=a+G|0,p[s|0]=(n+F[s|0]|0)+1>>>1}}function ch(n,s){n=n|0,s=s|0;var a=0,g=0,k=0,E=0,L=0,R=0,G=0,H=0,ee=0,ce=0,Ae=0,Ne=0,Ze=0,mt=0,Tt=0,Ot=0;k=c[n+16>>2],H=c[n+12>>2],Ne=(H+1|0)/2|0,ee=c[s>>2],a=c[ee+20>>2],L=c[n+8>>2],R=c[ee+16>>2]+re(L,a)|0,ce=c[(c[ee>>2]<<2)+11248>>2],g=c[n+28>>2],E=c[n+24>>2],G=c[n+20>>2];e:{if(!L){ft[ce|0](G,0,E,g,E,g,R,0,H),a=k;break e}ft[ce|0](c[s+4>>2],G,c[s+8>>2],c[s+12>>2],E,g,R-a|0,R,H),a=k+1|0}Ze=a,Ae=k+L|0;e:{if((k|0)<3){a=E,k=g;break e}for(L=L+2|0;a=c[n+32>>2],G=(a<<1)+G|0,Tt=G-a|0,mt=E,Ot=g,E=c[n+36>>2],a=mt+E|0,k=g+E|0,g=c[ee+20>>2],R=(g<<1)+R|0,ft[ce|0](Tt,G,mt,Ot,a,k,R-g|0,R,H),g=k,E=a,L=L+2|0,(L|0)<(Ae|0););}return g=c[n+32>>2]+G|0,(c[n+84>>2]+Ae|0)<c[n+88>>2]?(Xr(c[s+4>>2],g,H),Xr(c[s+8>>2],a,Ne),Xr(c[s+12>>2],k,Ne),Ze+-1|0):(Ae&1||ft[ce|0](g,0,a,k,a,k,c[ee+20>>2]+R|0,0,H),Ze|0)}function Fh(n,s){var a=0,g=0,k=0;e:{if(!n)break e;a=c[n+44>>2];t:{if((a|0)<0||(g=255,(a|0)<=100&&(a=re(a,255),g=(a|0)/100|0,(a|0)<100)))break t;a=c[s+800>>2];i:{if((a|0)>=12){k=c[s+804>>2];break i}k=re(F[((a|0)>0?a:0)+4832|0],g)>>3,c[s+804>>2]=k}a=c[s+832>>2];i:{if((a|0)>=12){a=c[s+836>>2];break i}a=re(F[((a|0)>0?a:0)+4832|0],g)>>3,c[s+836>>2]=a}k=a|k,a=c[s+864>>2];i:{if((a|0)>=12){a=c[s+868>>2];break i}a=re(F[((a|0)>0?a:0)+4832|0],g)>>3,c[s+868>>2]=a}k=a|k,a=c[s+896>>2];i:{if((a|0)>=12){g=c[s+900>>2];break i}g=re(F[((a|0)>0?a:0)+4832|0],g)>>3,c[s+900>>2]=g}if(!(g|k))break t;g=s+544|0,Xr(g+8|0,9424,220),c[g>>2]=0,c[g+4>>2]=31,c[g+228>>2]=256,c[s+540>>2]=1}if(n=c[n+52>>2],c[s+2372>>2]=n,(n|0)>=101){c[s+2372>>2]=100;return}if((n|0)>-1)break e;c[s+2372>>2]=0}}function Tr(n,s){var a=0,g=0,k=0,E=0,L=0,R=0,G=0,H=0,ee=0,ce=0;if((s|0)<1)return 0;for(a=c[n+8>>2],R=c[n+4>>2];;){e:{if((a|0)>-1)break e;if(g=c[n+12>>2],g>>>0<$n[n+20>>2]){k=F[g|0]|F[g+1|0]<<8|(F[g+2|0]<<16|F[g+3|0]<<24),c[n+12>>2]=g+3,a=a+24|0,c[n+8>>2]=a,c[n>>2]=c[n>>2]<<24|(k>>>8&65280|(k<<8&16711680|k<<24))>>>8;break e}if(g>>>0<$n[n+16>>2]){c[n+12>>2]=g+1,a=a+8|0,c[n+8>>2]=a,c[n>>2]=F[g|0]|c[n>>2]<<8;break e}if(!c[n+24>>2]){c[n+24>>2]=1,a=a+8|0,c[n+8>>2]=a,c[n>>2]=c[n>>2]<<8;break e}a=0,c[n+8>>2]=0}g=s+-1|0,ee=n,ce=a,E=c[n>>2],G=E>>>a|0,L=R>>>1&16777215;e:{if(G>>>0>L>>>0){c[n>>2]=E+((L^-1)<<a),E=R-L|0;break e}E=L+1|0}if(k=Rr(E)^24,a=ce-k|0,c[ee+8>>2]=a,R=(E<<k)+-1|0,c[n+4>>2]=R,H=(G>>>0>L>>>0)<<g|H,k=(s|0)>1,s=g,!k)break}return H}function Rc(n,s,a){var g=0;e:{if((n|0)==(s|0))break e;if((s-n|0)-a>>>0<=0-(a<<1)>>>0)return Xr(n,s,a);g=(n^s)&3;t:{i:{if(n>>>0<s>>>0){if(g){g=n;break t}if(!(n&3)){g=n;break i}for(g=n;;){if(!a)break e;if(p[g|0]=F[s|0],s=s+1|0,a=a+-1|0,g=g+1|0,!(g&3))break}break i}n:{if(g)break n;if(n+a&3)for(;;){if(!a)break e;if(a=a+-1|0,g=a+n|0,p[g|0]=F[s+a|0],!(g&3))break}if(a>>>0<=3)break n;for(;a=a+-4|0,c[a+n>>2]=c[s+a>>2],a>>>0>3;);}if(!a)break e;for(;a=a+-1|0,p[a+n|0]=F[s+a|0],!!a;);break e}if(a>>>0<=3)break t;for(;c[g>>2]=c[s>>2],s=s+4|0,g=g+4|0,a=a+-4|0,a>>>0>3;);}if(!a)break e;for(;p[g|0]=F[s|0],g=g+1|0,s=s+1|0,a=a+-1|0,!!a;);}return n}function ac(n){n=n|0;var s=0,a=0,g=0,k=0,E=0,L=0,R=0,G=0,H=0,ee=0,ce=0,Ae=0,Ne=0,Ze=0,mt=0,Tt=0,Ot=0,ni=0,ci=0;for(g=n+-17|0,k=n+-18|0,E=n+-19|0,L=n+-20|0,R=n+-21|0,G=n+-22|0,H=n+-23|0,ee=n+-24|0,ce=n+-25|0,Ae=n+-26|0,Ne=n+-27|0,Ze=n+-28|0,mt=n+-29|0,Tt=n+-30|0,Ot=n+-31|0,ni=n+-32|0,ci=c[2548]-F[n+-33|0]|0;s=F[n+-1|0]+ci|0,p[n|0]=F[s+F[ni|0]|0],p[n+1|0]=F[F[Ot|0]+s|0],p[n+2|0]=F[F[Tt|0]+s|0],p[n+3|0]=F[F[mt|0]+s|0],p[n+4|0]=F[F[Ze|0]+s|0],p[n+5|0]=F[F[Ne|0]+s|0],p[n+6|0]=F[F[Ae|0]+s|0],p[n+7|0]=F[F[ce|0]+s|0],p[n+8|0]=F[F[ee|0]+s|0],p[n+9|0]=F[F[H|0]+s|0],p[n+10|0]=F[F[G|0]+s|0],p[n+11|0]=F[F[R|0]+s|0],p[n+12|0]=F[F[L|0]+s|0],p[n+13|0]=F[F[E|0]+s|0],p[n+14|0]=F[F[k|0]+s|0],p[n+15|0]=F[F[g|0]+s|0],n=n+32|0,a=a+1|0,(a|0)!=16;);}function Jo(n,s,a){n=n|0,s=s|0,a=a|0;var g=0,k=0,E=0,L=0;e:{if(!a||(g=n+a|0,p[g+-1|0]=s,p[n|0]=s,a>>>0<3)||(p[g+-2|0]=s,p[n+1|0]=s,p[g+-3|0]=s,p[n+2|0]=s,a>>>0<7)||(p[g+-4|0]=s,p[n+3|0]=s,a>>>0<9)||(g=0-n&3,k=g+n|0,s=re(s&255,16843009),c[k>>2]=s,a=a-g&-4,g=a+k|0,c[g+-4>>2]=s,a>>>0<9)||(c[k+8>>2]=s,c[k+4>>2]=s,c[g+-8>>2]=s,c[g+-12>>2]=s,a>>>0<25)||(c[k+24>>2]=s,c[k+20>>2]=s,c[k+16>>2]=s,c[k+12>>2]=s,c[g+-16>>2]=s,c[g+-20>>2]=s,c[g+-24>>2]=s,c[g+-28>>2]=s,L=k&4|24,a=a-L|0,a>>>0<32))break e;for(g=s,E=s,s=k+L|0;c[s+24>>2]=E,c[s+28>>2]=g,c[s+16>>2]=E,c[s+20>>2]=g,c[s+8>>2]=E,c[s+12>>2]=g,c[s>>2]=E,c[s+4>>2]=g,s=s+32|0,a=a+-32|0,a>>>0>31;);}return n|0}function Ks(n,s,a){var g=0,k=0,E=0,L=0;g=Nn-144|0,Nn=g;e:{if(!a){E=2;break e}t:{if(!n){k=2;break t}c[a>>2]=0,c[a+4>>2]=0,c[a+32>>2]=0,c[a+36>>2]=0,c[a+24>>2]=0,c[a+28>>2]=0,L=a+16|0,E=L,c[E>>2]=0,c[E+4>>2]=0,k=a+8|0,c[k>>2]=0,c[k+4>>2]=0,E=3;i:switch(k=kl(n,s,a,a+4|0,k,a+12|0,L,0),k|0){case 7:break e;case 0:break i;default:break t}if(c[g+140>>2]=0,c[g+132>>2]=0,c[g+136>>2]=0,c[g+124>>2]=0,c[g+128>>2]=0,c[g+116>>2]=0,c[g+120>>2]=0,c[g+100>>2]=0,c[g+104>>2]=0,c[g+108>>2]=0,c[g+112>>2]=0,c[g+92>>2]=0,c[g+96>>2]=0,c[g+108>>2]=a+124,k=a+40|0,c[g+88>>2]=k,ld(k,a)){Wh(g),c[g>>2]=c[a+40>>2],c[g+4>>2]=c[a>>2],c[g+8>>2]=c[a+4>>2],c[g+88>>2]=g,E=is(n,s,g+88|0),E||(E=Au(g,k)),Cf(g);break e}E=is(n,s,g+88|0);break e}E=k}return Nn=g+144|0,E}function Xo(n,s,a){n=n|0,s=s|0,a=a|0;var g=0,k=0,E=0,L=0,R=0,G=0,H=0;g=Nn-32|0,Nn=g,k=c[n+28>>2],c[g+16>>2]=k,E=c[n+20>>2],c[g+28>>2]=a,c[g+24>>2]=s,s=E-k|0,c[g+20>>2]=s,k=s+a|0,H=2,s=g+16|0;e:{t:{i:{if(!If(Ru(c[n+60>>2],g+16|0,2,g+12|0)|0))for(;;){if(E=c[g+12>>2],(E|0)==(k|0))break i;if((E|0)<=-1)break t;if(L=c[s+4>>2],R=E>>>0>L>>>0,G=(R<<3)+s|0,L=E-(R?L:0)|0,c[G>>2]=L+c[G>>2],G=(R?12:4)+s|0,c[G>>2]=c[G>>2]-L,k=k-E|0,s=R?s+8|0:s,H=H-R|0,!!If(Ru(c[n+60>>2],s|0,H|0,g+12|0)|0))break}if(c[g+12>>2]=-1,(k|0)!=-1)break t}s=c[n+44>>2],c[n+28>>2]=s,c[n+20>>2]=s,c[n+16>>2]=s+c[n+48>>2],n=a;break e}if(c[n+28>>2]=0,c[n+16>>2]=0,c[n+20>>2]=0,c[n>>2]=c[n>>2]|32,n=0,(H|0)==2)break e;n=a-c[s+4>>2]|0}return Nn=g+32|0,n|0}function Va(n){n=n|0;var s=0,a=0,g=0,k=0,E=0,L=0,R=0,G=0,H=0,ee=0,ce=0,Ae=0,Ne=0,Ze=0;E=re(c[n+8>>2],c[n+52>>2]),L=c[n+80>>2],R=c[n+68>>2],s=c[n+24>>2];e:{if(!s){if((E|0)<1)break e;for(;a=_r(c[n+16>>2],0,c[(g<<2)+L>>2],0)+-2147483648|0,s=Fn,s=a>>>0<2147483648?s+1|0:s,p[g+R|0]=(s|0)>255?-1:s,g=g+1|0,(E|0)!=(g|0););break e}if(a=0-s|0,s=c[n+32>>2],s=vc(0,a,s,s>>31),(E|0)<1)break e;for(G=c[n+76>>2],H=s,ee=0-s|0;s=c[n+16>>2],a=g<<2,k=_r(ee,Ne,c[a+L>>2],0),ce=Fn,Ae=s,s=k,k=_r(H,Ze,c[a+G>>2],0),a=s+k|0,s=Fn+ce|0,s=a>>>0<k>>>0?s+1|0:s,k=a+-2147483648|0,a=_r(Ae,0,k>>>0<2147483648?s+1|0:s,0)+-2147483648|0,s=Fn,s=a>>>0<2147483648?s+1|0:s,p[g+R|0]=(s|0)>255?-1:s,g=g+1|0,(E|0)!=(g|0););}}function lc(n,s,a,g){n=n|0,s=s|0,a=a|0,g=g|0;var k=0,E=0,L=0,R=0,G=0,H=0,ee=0,ce=0,Ae=0,Ne=0,Ze=0,mt=0,Tt=0,Ot=0,ni=0,ci=0,Mi=0;if((a|0)>=1)for(k=c[g+-4>>2];ee=H<<2,E=ee+s|0,L=c[E>>2],E=c[E+-4>>2],G=E&255,ce=(L&255)-G|0,Ae=(k&255)-G|0,G=Ae>>31,Ne=E>>>24|0,Ze=(k>>>24|0)-Ne|0,mt=Ze>>31,Tt=E>>>8&255,Ot=(k>>>8&255)-Tt|0,R=Ot>>31,ni=E>>>16&255,ci=(k>>>16&255)-ni|0,E=ci>>31,Mi=k,k=(L>>>24|0)-Ne|0,R=((((G^G+Ae)+((ce|0)<0?ce:0-ce|0)|0)+(mt^mt+Ze)|0)+((k|0)<0?k:0-k|0)|0)+(R^R+Ot)|0,k=(L>>>8&255)-Tt|0,R=(R+((k|0)<0?k:0-k|0)|0)+(E^E+ci)|0,k=(L>>>16&255)-ni|0,k=(R+((k|0)<0?k:0-k|0)|0)<1?L:Mi,L=c[n+ee>>2],k=(k&-16711936)+(L&-16711936)&-16711936|(k&16711935)+(L&16711935)&16711935,c[g+ee>>2]=k,H=H+1|0,(H|0)!=(a|0););}function bu(n,s,a){n=n|0,s=s|0,a=a|0;var g=0,k=0,E=0,L=0,R=0,G=0,H=0,ee=0,ce=0,Ae=0,Ne=0;E=c[n+104>>2];e:{if(!E)break e;k=c[n+16>>2],g=c[n+8>>2],L=c[s>>2];t:{if(!c[n+56>>2]){s=g;break t}i:{if(!g){a=k+-1|0,s=0;break i}E=E-c[n>>2]|0,a=k,s=g+-1|0}if(g=g+k|0,k=c[n+84>>2],g=g+k|0,(g|0)!=c[n+88>>2]){k=a;break t}k=g-(s+k|0)|0}if((k|0)<1)break e;for(R=c[n+12>>2],ce=c[L>>2],a=c[L+20>>2],H=c[L+16>>2]+re(a,s)|0,G=H+1|0,s=15;;){if(g=0,(R|0)>=1){for(;a=(g<<1)+G|0,Ae=a,Ne=F[a|0]&240,a=F[g+E|0]>>>4|0,p[Ae|0]=Ne|a,s=s&a,g=g+1|0,(R|0)!=(g|0););a=c[L+20>>2]}if(G=a+G|0,E=c[n>>2]+E|0,ee=ee+1|0,(ee|0)==(k|0))break}if((s|0)==15|ce+-7>>>0>3)break e;ft[c[2665]](H,R,k,a)}return 0}function wu(n,s,a){e:{t:{if(s>>>0>20)break t;i:switch(s+-9|0){case 0:s=c[a>>2],c[a>>2]=s+4,c[n>>2]=c[s>>2];return;case 1:s=c[a>>2],c[a>>2]=s+4,s=c[s>>2],c[n>>2]=s,c[n+4>>2]=s>>31;return;case 2:s=c[a>>2],c[a>>2]=s+4,c[n>>2]=c[s>>2],c[n+4>>2]=0;return;case 4:s=c[a>>2],c[a>>2]=s+4,s=Di[s>>1],c[n>>2]=s,c[n+4>>2]=s>>31;return;case 5:s=c[a>>2],c[a>>2]=s+4,c[n>>2]=mn[s>>1],c[n+4>>2]=0;return;case 6:s=c[a>>2],c[a>>2]=s+4,s=p[s|0],c[n>>2]=s,c[n+4>>2]=s>>31;return;case 7:s=c[a>>2],c[a>>2]=s+4,c[n>>2]=F[s|0],c[n+4>>2]=0;return;case 3:case 8:break e;case 9:break i;default:break t}ft[0](n,a)}return}s=c[a>>2]+7&-8,c[a>>2]=s+8,a=c[s+4>>2],c[n>>2]=c[s>>2],c[n+4>>2]=a}function Yl(n,s){n=n|0,s=s|0;var a=0,g=0,k=0,E=0,L=0,R=0,G=0,H=0;k=c[n+16>>2],E=c[s+24>>2],a=c[c[s>>2]>>2];e:{if(a+-7>>>0>3&&!(1<<a&4154&&a>>>0<=12)||(a=c[n+104>>2],!a))break e;Uc(c[n+20>>2],c[n+32>>2],a,c[n>>2],c[n+12>>2],k,0)}if((k|0)<1)return 0;for(L=k+1>>1,R=c[n+32>>2],g=c[n+20>>2],a=k;G=bs(E,a,g,R),g=re(G,R)+g|0,H=gc(E)+H|0,a=a-G|0,(a|0)>0;);if((k|0)>=1){for(k=c[s+28>>2],E=c[n+36>>2],g=c[n+24>>2],a=L;R=bs(k,a,g,E),gc(k),g=re(E,R)+g|0,a=a-R|0,(a|0)>0;);for(g=c[n+28>>2],s=c[s+32>>2],n=c[n+36>>2];a=bs(s,L,g,n),gc(s),g=re(n,a)+g|0,L=L-a|0,(L|0)>0;);}return H|0}function io(n,s){var a=0,g=0,k=0,E=0,L=0,R=0,G=0,H=0;e:{if(!(c[n+24>>2]|(s|0)>24)){if(a=c[n+20>>2],k=a+s|0,c[n+20>>2]=k,R=c[(s<<2)+9312>>2],L=c[n+4>>2],g=L,s=a&63,a=s&31,E=c[n>>2],H=R&(32<=(s&63)>>>0?g>>>a|0:((1<<a)-1&g)<<32-a|E>>>a),(k|0)<8)break e;for(s=c[n+16>>2],G=c[n+12>>2],R=s>>>0>G>>>0?s:G;;){t:{if((s|0)==(R|0)){s=R,g=k;break t}if(g=L,E=(g&255)<<24|E>>>8,g=g>>>8|0,L=g,c[n>>2]=E,c[n+4>>2]=g,a=F[c[n+8>>2]+s|0],g=k+-8|0,c[n+20>>2]=g,s=s+1|0,c[n+16>>2]=s,a=L|a<<24,L=a,c[n>>2]=E,c[n+4>>2]=a,a=(k|0)>15,k=g,a)continue}break}if((s|0)!=(G|0)|(g|0)<65)break e;return c[n+20>>2]=0,c[n+24>>2]=1,H}c[n+20>>2]=0,c[n+24>>2]=1}return H}function ya(n){n=n|0;var s=0,a=0,g=0,k=0,E=0,L=0,R=0,G=0,H=0,ee=0,ce=0;k=re(c[n+8>>2],c[n+52>>2]),L=c[n+76>>2],R=c[n+68>>2],s=re(c[n+24>>2],c[n+16>>2]);e:{if(s){if((k|0)<1)break e;for(E=c[n+80>>2],ee=0-s|0,s=0;g=c[n+20>>2],a=s<<2,G=a+L|0,ce=c[G>>2],_r(c[a+E>>2],0,ee,0),H=Fn,g=_r(g,0,ce-H|0,0)+-2147483648|0,a=Fn,a=g>>>0<2147483648?a+1|0:a,p[s+R|0]=(a|0)>255?-1:a,c[G>>2]=H,s=s+1|0,(k|0)!=(s|0););break e}if((k|0)<1)break e;for(s=0;E=(s<<2)+L|0,g=_r(c[n+20>>2],0,c[E>>2],0)+-2147483648|0,a=Fn,a=g>>>0<2147483648?a+1|0:a,p[s+R|0]=(a|0)>255?-1:a,c[E>>2]=0,s=s+1|0,(k|0)!=(s|0););}}function No(n,s,a,g){n=n|0,s=s|0,a=a|0,g=g|0;var k=0,E=0,L=0,R=0,G=0,H=0;if((a|0)>=1)for(E=c[g+-4>>2];G=R<<2,L=G+s|0,k=c[L>>2],E=((k^E)>>>1&2139062143)+(k&E)|0,k=E&255,L=c[L+-4>>2],k=((k-(L&255)|0)/2|0)+k|0,H=k>>>0<256?k:(k^-1)>>>24|0,k=E>>>24|0,k=((k-(L>>>24|0)|0)/2|0)+k|0,H=H|(k>>>0<256?k:k>>>24^-1)<<24,k=E>>>16&255,k=((k-(L>>>16&255)|0)/2|0)+k|0,E=E>>>8&255,E=((E-(L>>>8&255)|0)/2|0)+E|0,E=H|(k>>>0<256?k:(k^-1)>>>24|0)<<16|(E>>>0<256?E:(E^-1)>>>24|0)<<8,L=c[n+G>>2],E=(E&-16711936)+(L&-16711936)&-16711936|(E&16711935)+(L&16711935)&16711935,c[g+G>>2]=E,R=R+1|0,(R|0)!=(a|0););}function xu(n,s,a){n=n|0,s=s|0,a=a|0;var g=0,k=0,E=0,L=0,R=0,G=0,H=0,ee=0,ce=0,Ae=0;g=c[n+36>>2];e:{if(c[g+64>>2]>=c[g+56>>2])break e;E=c[n>>2],ee=c[E>>2]+-7|0,k=c[E+20>>2],H=c[E+16>>2]+re(k,s)|0,R=c[g+52>>2],s=15;t:{if((a|0)<1|c[g+24>>2]>0)break t;for(G=H+1|0;;){if(Ni(g),g=0,(R|0)>=1)for(;k=(g<<1)+G|0,ce=k,Ae=F[k|0]&240,k=F[c[c[n+36>>2]+68>>2]+g|0]>>>4|0,p[ce|0]=Ae|k,s=s&k,g=g+1|0,(R|0)!=(g|0););if(k=c[E+20>>2],g=c[n+36>>2],L=L+1|0,c[g+64>>2]>=c[g+56>>2]|(L|0)>=(a|0))break t;if(G=k+G|0,!(c[g+24>>2]<=0))break}}if((s|0)==15|ee>>>0>3)break e;ft[c[2665]](H,R,L,k)}return L|0}function Au(n,s){var a=0,g=0;c[s+4>>2]=c[n+4>>2],c[s+8>>2]=c[n+8>>2],a=2;e:{if(Ko(s))break e;a=c[n+16>>2],g=c[n>>2];t:{if(g>>>0<=10){Ll(a,c[n+20>>2],c[s+16>>2],c[s+20>>2],re(c[n+4>>2],F[g+1157|0]),c[n+8>>2]);break t}if(Ll(a,c[n+32>>2],c[s+16>>2],c[s+32>>2],c[n+4>>2],c[n+8>>2]),Ll(c[n+20>>2],c[n+36>>2],c[s+20>>2],c[s+36>>2],(c[n+4>>2]+1|0)/2|0,(c[n+8>>2]+1|0)/2|0),Ll(c[n+24>>2],c[n+40>>2],c[s+24>>2],c[s+40>>2],(c[n+4>>2]+1|0)/2|0,(c[n+8>>2]+1|0)/2|0),g=c[n>>2],!(1<<g&4154&&g>>>0<=12)&&(a=0,g+-7>>>0>3))break e;Ll(c[n+28>>2],c[n+44>>2],c[s+28>>2],c[s+44>>2],c[n+4>>2],c[n+8>>2])}a=0}return a}function Bc(n,s){var a=0,g=0,k=0,E=0;e:{if(c[n+2308>>2]<1||(a=c[n+2300>>2],(a|0)<c[n+300>>2]))break e;g=(a|0)<=c[n+308>>2]}a=n+160|0;e:{if(!c[n+148>>2]){c[n+168>>2]=g,c[n+164>>2]=c[n+2300>>2],Bu(n,a),E=ds(n,s);break e}if(k=n+124|0,!(ft[c[2559]](k)&1))break e;Xr(n+180|0,s,108),c[n+168>>2]=g,c[n+160>>2]=c[n+152>>2],c[n+164>>2]=c[n+2300>>2];t:{if(c[n+148>>2]==2){s=c[n+2304>>2],a=n+176|0,c[n+2304>>2]=c[a>>2],c[a>>2]=s;break t}Bu(n,a)}return g&&(s=c[n+2260>>2],g=n+172|0,c[n+2260>>2]=c[g>>2],c[g>>2]=s),ft[c[2560]](k),s=c[n+152>>2]+1|0,c[n+152>>2]=(s|0)==c[n+156>>2]?0:s,1}return E}function Rh(n,s,a,g){n=n|0,s=s|0,a=a|0,g=g|0;var k=0,E=0,L=0,R=0,G=0,H=0,ee=0;if((a|0)>=1)for(k=c[g+-4>>2];H=G<<2,L=H+s|0,R=c[L>>2],L=c[L+-4>>2],E=((R&255)+(k&255)|0)-(L&255)|0,ee=E>>>0<256?E:(E^-1)>>>24|0,E=(R>>>24)+(k>>>24)-(L>>>24)|0,ee=ee|(E>>>0<256?E:E>>>24^-1)<<24,E=((R>>>16&255)+(k>>>16&255)|0)-(L>>>16&255)|0,k=((R>>>8&255)+(k>>>8&255)|0)-(L>>>8&255)|0,k=ee|(E>>>0<256?E:(E^-1)>>>24|0)<<16|(k>>>0<256?k:(k^-1)>>>24|0)<<8,R=c[n+H>>2],k=(k&-16711936)+(R&-16711936)&-16711936|(k&16711935)+(R&16711935)&16711935,c[g+H>>2]=k,G=G+1|0,(G|0)!=(a|0););}function sl(n,s,a,g,k,E,L,R,G){var H=0,ee=0,ce=0,Ae=0;c[n+72>>2]=L,c[n+68>>2]=g,c[n+60>>2]=0,c[n+64>>2]=0,c[n+56>>2]=E,c[n+52>>2]=k,c[n+48>>2]=a,c[n+44>>2]=s,c[n+8>>2]=R,L=(a|0)<(E|0),c[n+4>>2]=L,H=(s|0)<(k|0),c[n>>2]=H,ee=H?s+-1|0:k,c[n+40>>2]=ee,g=H?k+-1|0:s,c[n+36>>2]=g,H||(ce=n,Ae=vc(0,1,ee,ee>>31),c[ce+12>>2]=Ae),s=E-L|0,c[n+32>>2]=s,a=a-L|0,c[n+28>>2]=a;e:{if(!L){c[n+24>>2]=a,a=re(a,g),a=vc(0,E,a,a>>31),g=Fn,c[n+20>>2]=(g|0)==1&a>>>0<0|g>>>0<1?a:0;break e}c[n+24>>2]=s,s=g}c[n+76>>2]=G,ce=n,Ae=vc(0,1,s,s>>31),c[ce+16>>2]=Ae,s=n,n=re(k,R),c[s+80>>2]=(n<<2)+G,Jo(G,0,n<<3),va()}function Bh(n){n=n|0;var s=0,a=0,g=0,k=0,E=0,L=0,R=0;E=F[n+-31|0],s=E+1|0,a=F[n+-30|0],k=s+a>>>1|0,p[n+64|0]=k,R=F[n+-32|0],p[n|0]=R+s>>>1,s=F[n+-29|0],g=(s+a|0)+1>>>1|0,p[n+65|0]=g,p[n+1|0]=k,k=F[n+-28|0],L=(k+s|0)+1>>>1|0,p[n+66|0]=L,p[n+2|0]=g,p[n+3|0]=L,g=s+2|0,L=(g+E|0)+(a<<1)>>>2|0,p[n+96|0]=L,a=a+2|0,p[n+32|0]=(a+R|0)+(E<<1)>>>2,E=k+(a+(s<<1)|0)>>>2|0,p[n+97|0]=E,p[n+33|0]=L,R=F[n+-25|0],a=F[n+-26|0],s=F[n+-27|0],g=s+(g+(k<<1)|0)>>>2|0,p[n+98|0]=g,p[n+34|0]=E,p[n+99|0]=(R+(s+(a<<1)|0)|0)+2>>>2,p[n+67|0]=(a+(k+(s<<1)|0)|0)+2>>>2,p[n+35|0]=g}function al(n){n=n|0;var s=0,a=0,g=0,k=0,E=0,L=0,R=0,G=0,H=0;L=F[n+63|0],g=F[n+31|0],a=(L+g|0)+1>>>1|0,p[n+98|0]=a,R=F[n+95|0],p[n+96|0]=(R+L|0)+1>>>1,p[n+64|0]=a,k=F[n+-1|0],s=k+1|0,a=F[n+-33|0],E=s+a>>>1|0,p[n+34|0]=E,s=s+g>>>1|0,p[n+66|0]=s,p[n|0]=E,p[n+32|0]=s,s=F[n+-32|0],E=k+2|0,G=s+(E+(a<<1)|0)>>>2|0,p[n+35|0]=G,H=F[n+-31|0],p[n+3|0]=(F[n+-30|0]+(s+(H<<1)|0)|0)+2>>>2,p[n+2|0]=((a+(s<<1)|0)+H|0)+2>>>2,s=k<<1,k=g+2|0,a=a+(s+k|0)>>>2|0,p[n+67|0]=a,p[n+1|0]=G,g=(L+E|0)+(g<<1)>>>2|0,p[n+99|0]=g,p[n+33|0]=a,p[n+97|0]=(k+R|0)+(L<<1)>>>2,p[n+65|0]=g}function uc(n){n=n|0;var s=0,a=0,g=0,k=0,E=0,L=0,R=0,G=0;g=F[n+-32|0],k=g+1|0,s=F[n+-33|0],a=k+s>>>1|0,p[n+65|0]=a,E=F[n+-31|0],L=k+E>>>1|0,p[n+66|0]=L,p[n|0]=a,k=F[n+-30|0],a=(k+E|0)+1>>>1|0,p[n+67|0]=a,p[n+1|0]=L,L=F[n+-29|0],p[n+3|0]=(L+k|0)+1>>>1,p[n+2|0]=a,a=F[n+-1|0],R=a+2|0,G=F[n+31|0],p[n+96|0]=(R+F[n+63|0]|0)+(G<<1)>>>2,R=g+(R+(s<<1)|0)>>>2|0,p[n+97|0]=R,s=s+2|0,p[n+64|0]=(s+G|0)+(a<<1)>>>2,s=(s+(g<<1)|0)+E>>>2|0,p[n+98|0]=s,p[n+32|0]=R,g=(k+(g+(E<<1)|0)|0)+2>>>2|0,p[n+99|0]=g,p[n+33|0]=s,p[n+35|0]=(L+((k<<1)+E|0)|0)+2>>>2,p[n+34|0]=g}function er(n,s,a){n=n|0,s=s|0,a=a|0;var g=0,k=0,E=0,L=0,R=0,G=0,H=0,ee=0,ce=0;g=c[n+36>>2];e:{if(c[g+64>>2]>=c[g+56>>2])break e;E=c[n>>2],k=c[E>>2],R=(k|0)==4|(k|0)==9,ce=k+-7|0,L=c[E+20>>2],G=c[E+16>>2]+re(L,s)|0,H=c[g+52>>2],k=0,s=0;t:{if((a|0)<1||(s=0,c[g+24>>2]>0))break t;for(s=(R?0:3)+G|0;;){i:{if(Ni(g),ee=ft[c[2666]](c[c[n+36>>2]+68>>2],0,H,1,s,0)|ee,L=c[E+20>>2],g=c[n+36>>2],k=k+1|0,c[g+64>>2]>=c[g+56>>2]|(k|0)>=(a|0))break i;if(s=s+L|0,c[g+24>>2]<=0)continue}break}s=(ee|0)!=0}if(!s|ce>>>0>3)break e;ft[c[2664]](G,R,H,k,L)}return k|0}function yr(n,s,a){var g=0,k=0,E=0;g=Nn-208|0,Nn=g,c[g+204>>2]=a,a=0,Jo(g+160|0,0,40),c[g+200>>2]=c[g+204>>2];e:{if((At(0,s,g+200|0,g+80|0,g+160|0)|0)<0)break e;a=c[n+76>>2]>=0?1:a,k=c[n>>2],p[n+74|0]<=0&&(c[n>>2]=k&-33),E=k&32;t:{if(c[n+48>>2]){At(n,s,g+200|0,g+80|0,g+160|0);break t}if(c[n+48>>2]=80,c[n+16>>2]=g+80,c[n+28>>2]=g,c[n+20>>2]=g,k=c[n+44>>2],c[n+44>>2]=g,At(n,s,g+200|0,g+80|0,g+160|0),!k)break t;ft[c[n+36>>2]](n,0,0)|0,c[n+48>>2]=0,c[n+44>>2]=k,c[n+28>>2]=0,c[n+16>>2]=0,c[n+20>>2]=0}if(c[n>>2]=E|c[n>>2],!a)break e}Nn=g+208|0}function Hu(n,s,a){n=n|0,s=s|0,a=a|0;var g=0,k=0,E=0,L=0,R=0,G=0,H=0,ee=0,ce=0;k=c[s>>2],E=c[k+28>>2],G=c[s+16>>2],L=c[k+44>>2],R=E+re(G,L)|0,g=c[n+104>>2];e:{if(g){if(a=c[n+16>>2],(a|0)<1)break e;for(ee=c[k+32>>2],E=c[s+36>>2],L=c[n>>2],ce=c[k+16>>2],n=0;H=bs(E,a,g,L),g=re(L,H)+g|0,n=gc(E)+n|0,a=a-H|0,(a|0)>0;);if((n|0)<1)break e;return Uc(re(G,ee)+ce|0,c[k+32>>2],R,c[k+44>>2],c[c[s+36>>2]+52>>2],n,1),0}if(!E|(a|0)<1)break e;for(n=c[n+96>>2],g=0;R=Jo(R,255,n)+L|0,g=g+1|0,(g|0)!=(a|0););}return 0}function cc(n){n=n|0;var s=0,a=0,g=0,k=0,E=0;a=F[n+31|0],g=a+2|0,s=F[n+63|0],p[n+96|0]=F[n+95|0]+(g+(s<<1)|0)>>>2,E=a<<1,a=F[n+-1|0],k=a+2|0,s=s+(E+k|0)>>>2|0,p[n+97|0]=s,p[n+64|0]=s,s=g+(a<<1)|0,a=F[n+-33|0],s=s+a>>>2|0,p[n+98|0]=s,p[n+65|0]=s,p[n+32|0]=s,g=F[n+-32|0],s=(g+k|0)+(a<<1)>>>2|0,p[n+99|0]=s,p[n+66|0]=s,p[n+33|0]=s,p[n|0]=s,E=F[n+-29|0],s=F[n+-30|0],k=a,a=F[n+-31|0],k=((k+a|0)+(g<<1)|0)+2>>>2|0,p[n+67|0]=k,p[n+34|0]=k,p[n+1|0]=k,g=((s+g|0)+(a<<1)|0)+2>>>2|0,p[n+35|0]=g,p[n+2|0]=g,p[n+3|0]=((a+E|0)+(s<<1)|0)+2>>>2}function bs(n,s,a,g){var k=0,E=0,L=0,R=0,G=0,H=0,ee=0,ce=0;e:{if((s|0)<1)break e;for(;;){if(c[n+24>>2]<1&&c[n+64>>2]<c[n+56>>2])break e;if(c[n+4>>2]&&(ee=n,ce=yp(c[n+76>>2],c[n+80>>2]),c[ee+76>>2]=ce,c[n+80>>2]=Fn),up(n,a),!(c[n+4>>2]|(re(c[n+52>>2],c[n+8>>2])|0)<1))for(G=c[n+76>>2],H=c[n+80>>2],k=0;L=k<<2,R=L+G|0,c[R>>2]=c[R>>2]+c[H+L>>2],k=k+1|0,(k|0)<(re(c[n+52>>2],c[n+8>>2])|0););if(c[n+60>>2]=c[n+60>>2]+1,c[n+24>>2]=c[n+24>>2]-c[n+32>>2],a=a+g|0,E=E+1|0,(E|0)==(s|0))break}E=s}return E}function Ho(n){var s=0,a=0,g=0;if(n){if(s=n+160|0,jr(c[s>>2]),jr(c[n+172>>2]),a=n+168|0,Lf(c[a>>2]),bc(n+124|0),g=n+136|0,bc(g),c[a>>2]=0,c[a+4>>2]=0,c[s>>2]=0,c[s+4>>2]=0,c[n+152>>2]=0,c[n+156>>2]=0,c[n+144>>2]=0,c[n+148>>2]=0,c[g>>2]=0,c[g+4>>2]=0,c[n+128>>2]=0,c[n+132>>2]=0,c[n+120>>2]=0,c[n+124>>2]=0,jr(c[n+16>>2]),s=0,c[n+16>>2]=0,c[n+176>>2]>=1)for(;a=(re(s,20)+n|0)+196|0,jr(c[a>>2]),c[a>>2]=0,s=s+1|0,(s|0)<c[n+176>>2];);c[n+260>>2]=0,c[n+176>>2]=0,jr(c[n+264>>2]),c[n+12>>2]=0,c[n+264>>2]=0}}function Zl(){c[2545]!=c[2673]&&(c[2703]=32,c[2674]=33,c[2706]=34,c[2704]=35,c[2705]=36,c[2707]=37,c[2708]=38,c[2712]=39,c[2709]=40,c[2710]=41,c[2714]=42,c[2716]=43,c[2717]=44,c[2718]=45,c[2719]=46,c[2713]=47,c[2711]=48,c[2715]=49,c[2690]=50,c[2688]=51,c[2686]=52,c[2685]=53,c[2684]=54,c[2693]=55,c[2692]=56,c[2691]=57,c[2689]=58,c[2687]=59,c[2682]=60,c[2681]=61,c[2680]=62,c[2679]=63,c[2678]=64,c[2677]=65,c[2676]=66,c[2702]=67,c[2701]=68,c[2700]=69,c[2699]=70,c[2698]=71,c[2697]=72,c[2696]=73,c[2720]=74,c[2545]=c[2673])}function ll(n){n=n|0;var s=0,a=0,g=0,k=0,E=0;s=F[n+-29|0],k=s+2|0,g=F[n+-31|0],a=F[n+-30|0],E=(k+g|0)+(a<<1)>>>2|0,p[n+32|0]=E,a=a+2|0,p[n|0]=(a+F[n+-32|0]|0)+(g<<1)>>>2,g=F[n+-28|0],a=g+(a+(s<<1)|0)>>>2|0,p[n+64|0]=a,p[n+1|0]=E,p[n+33|0]=a,s=k+(g<<1)|0,k=F[n+-27|0],s=s+k>>>2|0,p[n+96|0]=s,p[n+2|0]=a,p[n+65|0]=s,p[n+34|0]=s,p[n+3|0]=s,s=F[n+-26|0],g=(s+(g+(k<<1)|0)|0)+2>>>2|0,p[n+97|0]=g,a=F[n+-25|0],k=(a+(k+(s<<1)|0)|0)+2>>>2|0,p[n+98|0]=k,p[n+35|0]=g,p[n+66|0]=g,p[n+99|0]=((a+s|0)+(a<<1)|0)+2>>>2,p[n+67|0]=k}function hh(n){n=n|0;var s=0,a=0,g=0,k=0,E=0;a=F[n+63|0],s=a+2|0,E=F[n+95|0],g=re((s+E|0)+(E<<1)>>>2|0,16843009),p[n+96|0]=g,p[n+97|0]=g>>>8,p[n+98|0]=g>>>16,p[n+99|0]=g>>>24,k=F[n+31|0],g=k+2|0,a=re(E+(g+(a<<1)|0)>>>2|0,16843009),p[n+64|0]=a,p[n+65|0]=a>>>8,p[n+66|0]=a>>>16,p[n+67|0]=a>>>24,E=s,s=F[n+-1|0],k=re((E+s|0)+(k<<1)>>>2|0,16843009),p[n+32|0]=k,p[n+33|0]=k>>>8,p[n+34|0]=k>>>16,p[n+35|0]=k>>>24,s=re((F[n+-33|0]+g|0)+(s<<1)>>>2|0,16843009),p[n|0]=s,p[n+1|0]=s>>>8,p[n+2|0]=s>>>16,p[n+3|0]=s>>>24}function Kl(n,s,a,g,k){n=n|0,s=s|0,a=a|0,g=g|0,k=k|0;var E=0,L=0,R=0,G=0,H=0,ee=0,ce=0;if(p[k|0]=F[n|0],(s|0)>=2)for(R=s+-1|0,G=k+1|0,L=n+1|0;p[E+G|0]=F[E+L|0]-F[n+E|0],E=E+1|0,(R|0)!=(E|0););if((a|0)>=2)for(ee=g^-1,ce=(s|0)<2,G=1;;){if(k=g+k|0,R=n+g|0,p[k|0]=F[R|0]-F[n|0],E=1,!ce)for(;H=E+R|0,L=(F[n+E|0]+F[H+-1|0]|0)-F[R+(E+ee|0)|0]|0,L=(L|0)>0?L:0,p[k+E|0]=F[H|0]-((L|0)<255?L:255),E=E+1|0,(E|0)!=(s|0););if(n=R,G=G+1|0,(G|0)==(a|0))break}}function ns(n,s,a,g,k){n=n|0,s=s|0,a=a|0,g=g|0,k=k|0;var E=0,L=0,R=0,G=0,H=0,ee=0,ce=0;if((k|0)>=1)for(;G=F[a+R|0],ce=F[s+R|0],H=F[n+R|0],E=(R<<2)+g|0,p[E|0]=255,H=re(H,19077)>>>8|0,ee=H+(re(ce,33050)>>>8|0)|0,L=ee+-17685|0,p[E+3|0]=L>>>0<16384?L>>>6|0:ee>>>0<17685?0:255,ee=H+(re(G,26149)>>>8|0)|0,L=ee+-14234|0,p[E+1|0]=L>>>0<16384?L>>>6|0:ee>>>0<14234?0:255,L=E,E=H-(re(ce,6419)>>>8|0)-(re(G,13320)>>>8)|0,G=E+8708|0,p[L+2|0]=G>>>0<16384?G>>>6|0:(E|0)<-8708?0:255,R=R+1|0,(R|0)!=(k|0););}function ms(n,s,a,g,k){n=n|0,s=s|0,a=a|0,g=g|0,k=k|0;var E=0,L=0,R=0,G=0,H=0,ee=0,ce=0;if((k|0)>=1)for(;G=F[s+R|0],ce=F[a+R|0],H=F[n+R|0],E=(R<<2)+g|0,p[E+3|0]=255,H=re(H,19077)>>>8|0,ee=H+(re(ce,26149)>>>8|0)|0,L=ee+-14234|0,p[E+2|0]=L>>>0<16384?L>>>6|0:ee>>>0<14234?0:255,ee=H+(re(G,33050)>>>8|0)|0,L=ee+-17685|0,p[E|0]=L>>>0<16384?L>>>6|0:ee>>>0<17685?0:255,L=E,E=H-(re(G,6419)>>>8|0)-(re(ce,13320)>>>8)|0,G=E+8708|0,p[L+1|0]=G>>>0<16384?G>>>6|0:(E|0)<-8708?0:255,R=R+1|0,(R|0)!=(k|0););}function fh(n,s,a,g,k){n=n|0,s=s|0,a=a|0,g=g|0,k=k|0;var E=0,L=0,R=0,G=0,H=0,ee=0,ce=0;if((k|0)>=1)for(;G=F[a+R|0],ce=F[s+R|0],H=F[n+R|0],E=(R<<2)+g|0,p[E+3|0]=255,H=re(H,19077)>>>8|0,ee=H+(re(ce,33050)>>>8|0)|0,L=ee+-17685|0,p[E+2|0]=L>>>0<16384?L>>>6|0:ee>>>0<17685?0:255,ee=H+(re(G,26149)>>>8|0)|0,L=ee+-14234|0,p[E|0]=L>>>0<16384?L>>>6|0:ee>>>0<14234?0:255,L=E,E=H-(re(ce,6419)>>>8|0)-(re(G,13320)>>>8)|0,G=E+8708|0,p[L+1|0]=G>>>0<16384?G>>>6|0:(E|0)<-8708?0:255,R=R+1|0,(R|0)!=(k|0););}function sa(n,s,a,g,k){n=n|0,s=s|0,a=a|0,g=g|0,k=k|0;var E=0,L=0,R=0,G=0,H=0,ee=0,ce=0;if((k|0)>=1)for(;H=(R<<1)+g|0,G=re(F[n+R|0],19077)>>>8|0,E=F[a+R|0],ee=G+(re(E,26149)>>>8|0)|0,L=ee+-14234|0,ce=(L>>>0<16384?L>>>6|0:ee>>>0<14234?0:248)&248,ee=F[s+R|0],E=G-(re(ee,6419)>>>8|0)-(re(E,13320)>>>8)|0,L=E+8708|0,E=L>>>0<16384?L>>6:(E|0)<-8708?0:255,p[H|0]=ce|E>>>5,L=H,G=G+(re(ee,33050)>>>8|0)|0,H=G+-17685|0,p[L+1|0]=E<<3&224|(H>>>0<16384?H>>>9|0:G>>>0<17685?0:31),R=R+1|0,(R|0)!=(k|0););}function B(n,s){var a=0,g=0,k=0,E=0,L=0;g=c[n+8>>2],L=c[g+40>>2],a=c[($n[L+12>>2]<2?g+84|0:n+108|0)>>2],k=c[n+108>>2],a=(k|0)<(a|0)?a:k;e:{if((a|0)>=(s|0)||(k=c[g>>2],g=c[L+136>>2]+re(k,a)|0,zi(n+180|0,a,s,c[n+16>>2]+re(a,c[n+100>>2])|0,g),E=c[L+12>>2],!E))break e;ft[c[(E<<2)+10912>>2]](c[L+140>>2],g,g,k),E=a+1|0;t:{if((E|0)==(s|0)){a=g;break t}for(;a=g+k|0,ft[c[(c[L+12>>2]<<2)+10912>>2]](g,a,a,k),g=a,E=E+1|0,(E|0)!=(s|0););}c[L+140>>2]=a}c[n+108>>2]=s,c[n+116>>2]=s}function d(n,s){n=n|0,s=s|0;var a=0,g=0,k=0,E=0,L=0,R=0,G=0,H=0,ee=0,ce=0,Ae=0;if(E=c[n+8>>2],(E|0)>=1)for(ee=re(c[n+52>>2],E);;){if((L|0)<(ee|0))for(Ae=c[n+80>>2],g=0,k=0,R=L,G=L;;){if(ce=c[n+40>>2],H=0,g=c[n+36>>2]+g|0,(g|0)>=1){for(;H=F[s+G|0],k=H+k|0,a=G+E|0,G=a,g=g-ce|0,(g|0)>0;);G=a}if(a=re(g,H),c[(R<<2)+Ae>>2]=a+re(k,ce),k=_r(c[n+12>>2],0,0-a|0,0)+-2147483648|0,a=Fn,k=k>>>0<2147483648?a+1|0:a,R=E+R|0,!((R|0)<(ee|0)))break}if(L=L+1|0,(E|0)==(L|0))break}}function I(n){n=n|0;var s=0,a=0,g=0,k=0,E=0,L=0;a=F[n+-32|0],g=c[2548]-F[n+-33|0]|0,s=g+F[n+-1|0]|0,p[n|0]=F[a+s|0],k=F[n+-31|0],p[n+1|0]=F[s+k|0],E=F[n+-30|0],p[n+2|0]=F[s+E|0],L=F[n+-29|0],p[n+3|0]=F[s+L|0],s=g+F[n+31|0]|0,p[n+32|0]=F[s+a|0],p[n+33|0]=F[s+k|0],p[n+34|0]=F[s+E|0],p[n+35|0]=F[s+L|0],s=g+F[n+63|0]|0,p[n+64|0]=F[s+a|0],p[n+65|0]=F[s+k|0],p[n+66|0]=F[s+E|0],p[n+67|0]=F[s+L|0],s=a,a=g+F[n+95|0]|0,p[n+96|0]=F[s+a|0],p[n+97|0]=F[a+k|0],p[n+98|0]=F[a+E|0],p[n+99|0]=F[a+L|0]}function D(n,s,a,g,k){n=n|0,s=s|0,a=a|0,g=g|0,k=k|0;var E=0,L=0,R=0,G=0,H=0,ee=0,ce=0;if((k|0)>=1)for(;R=F[a+E|0],G=(E<<1)+g|0,L=re(F[n+E|0],19077)>>>8|0,ce=F[s+E|0],H=L+(re(ce,33050)>>>8|0)|0,ee=H+-17685|0,p[G+1|0]=(ee>>>0<16384?ee>>>6|0:H>>>0<17685?0:240)|15,ee=G,G=L+(re(R,26149)>>>8|0)|0,H=G+-14234|0,R=L-(re(ce,6419)>>>8|0)-(re(R,13320)>>>8)|0,L=R+8708|0,p[ee|0]=(H>>>0<16384?H>>>6|0:G>>>0<14234?0:240)&240|(L>>>0<16384?L>>>10|0:(R|0)<-8708?0:15),E=E+1|0,(E|0)!=(k|0););}function z(n,s,a){n=n|0,s=s|0,a=a|0;var g=0,k=0,E=0,L=0,R=0,G=0,H=0;k=c[n+104>>2];e:{if(!k)break e;E=c[s>>2],L=c[E>>2],G=(L|0)==4|(L|0)==9,s=c[n+16>>2],g=c[n+8>>2],H=c[n+12>>2];t:{if(!c[n+56>>2]){R=g;break t}if(g?(R=g+-1|0,k=k-c[n>>2]|0,a=s):a=s+-1|0,s=s+g|0,g=c[n+84>>2],s=s+g|0,(s|0)!=c[n+88>>2]){s=a;break t}s=s-(g+R|0)|0}if(g=c[n>>2],n=c[E+20>>2],a=c[E+16>>2]+re(n,R)|0,!(ft[c[2666]](k,g,H,s,a+(G?0:3)|0,n)|0)|L+-7>>>0>3)break e;ft[c[2664]](a,G,H,s,c[E+20>>2])}return 0}function W(n,s,a,g,k){n=n|0,s=s|0,a=a|0,g=g|0,k=k|0;var E=0,L=0,R=0,G=0,H=0,ee=0,ce=0;if((k|0)>=1)for(;G=F[s+L|0],R=re(L,3)+g|0,ee=re(F[n+L|0],19077)>>>8|0,ce=F[a+L|0],E=ee+(re(ce,26149)>>>8|0)|0,H=E+-14234|0,p[R+2|0]=H>>>0<16384?H>>>6|0:E>>>0<14234?0:255,E=ee+(re(G,33050)>>>8|0)|0,H=E+-17685|0,p[R|0]=H>>>0<16384?H>>>6|0:E>>>0<17685?0:255,E=R,G=ee-(re(G,6419)>>>8|0)-(re(ce,13320)>>>8)|0,R=G+8708|0,p[E+1|0]=R>>>0<16384?R>>>6|0:(G|0)<-8708?0:255,L=L+1|0,(L|0)!=(k|0););}function ne(n,s,a,g,k){n=n|0,s=s|0,a=a|0,g=g|0,k=k|0;var E=0,L=0,R=0,G=0,H=0,ee=0,ce=0;if((k|0)>=1)for(;G=F[a+L|0],R=re(L,3)+g|0,ee=re(F[n+L|0],19077)>>>8|0,ce=F[s+L|0],E=ee+(re(ce,33050)>>>8|0)|0,H=E+-17685|0,p[R+2|0]=H>>>0<16384?H>>>6|0:E>>>0<17685?0:255,E=ee+(re(G,26149)>>>8|0)|0,H=E+-14234|0,p[R|0]=H>>>0<16384?H>>>6|0:E>>>0<14234?0:255,E=R,G=ee-(re(ce,6419)>>>8|0)-(re(G,13320)>>>8)|0,R=G+8708|0,p[E+1|0]=R>>>0<16384?R>>>6|0:(G|0)<-8708?0:255,L=L+1|0,(L|0)!=(k|0););}function pe(n,s){n=n|0,s=s|0;var a=0,g=0,k=0,E=0,L=0,R=0,G=0,H=0,ee=0,ce=0,Ae=0,Ne=0,Ze=0;return g=c[s>>2],s=c[s+-4>>2],a=s&255,k=(g&255)-a|0,E=(n&255)-a|0,a=E>>31,L=s>>>24|0,R=(n>>>24|0)-L|0,G=R>>31,H=s>>>8&255,ee=(n>>>8&255)-H|0,ce=ee>>31,Ae=s>>>16&255,Ne=(n>>>16&255)-Ae|0,s=Ne>>31,Ze=n,n=(g>>>24|0)-L|0,a=((((a^a+E)+((k|0)<0?k:0-k|0)|0)+(G^G+R)|0)+((n|0)<0?n:0-n|0)|0)+(ce^ce+ee)|0,n=(g>>>8&255)-H|0,s=(a+((n|0)<0?n:0-n|0)|0)+(s^s+Ne)|0,n=(g>>>16&255)-Ae|0,((s+((n|0)<0?n:0-n|0)|0)<1?g:Ze)|0}function ye(n,s){n=n|0,s=s|0;var a=0,g=0,k=0,E=0,L=0,R=0,G=0,H=0,ee=0,ce=0;if(k=c[n+8>>2],(k|0)>=1)for(ee=re(c[n+52>>2],k),ce=c[n+80>>2];;){if(a=k+L|0,g=c[n+36>>2],R=F[s+L|0],E=R,E=c[n+44>>2]>=2?F[s+a|0]:E,c[(L<<2)+ce>>2]=re(g,R),G=a,(a|0)<(ee|0))for(;;){g=g-c[n+40>>2]|0;e:{if((g|0)>=0){H=c[n+36>>2];break e}H=c[n+36>>2],g=H+g|0,R=E,G=k+G|0,E=F[G+s|0]}if(c[(a<<2)+ce>>2]=re(E,H)+re(R-E|0,g),a=a+k|0,!((a|0)<(ee|0)))break}if(L=L+1|0,(L|0)==(k|0))break}}function ke(n){var s=0,a=0,g=0,k=0,E=0,L=0,R=0;g=c[n+20>>2];e:{if((g|0)<8){s=g;break e}for(a=c[n+16>>2],s=c[n+12>>2],R=a>>>0>s>>>0?a:s;;){if((a|0)==(R|0)){s=g;break e}if(E=c[n+4>>2],k=E>>>8|0,L=(E&255)<<24|c[n>>2]>>>8,E=k,c[n>>2]=L,c[n+4>>2]=k,k=F[c[n+8>>2]+a|0],s=g+-8|0,c[n+20>>2]=s,a=a+1|0,c[n+16>>2]=a,c[n>>2]=L,c[n+4>>2]=E|k<<24,k=(g|0)>15,g=s,!k)break}}c[n+16>>2]!=c[n+12>>2]|(s|0)<65&&!c[n+24>>2]||(c[n+20>>2]=0,c[n+24>>2]=1)}function ze(n,s){e:{if(n){if(s>>>0<=127)break e;t:{if(!c[c[2607]>>2]){if((s&-128)==57216)break e;break t}if(s>>>0<=2047)return p[n+1|0]=s&63|128,p[n|0]=s>>>6|192,2;if(!((s&-8192)!=57344&&s>>>0>=55296))return p[n+2|0]=s&63|128,p[n|0]=s>>>12|224,p[n+1|0]=s>>>6&63|128,3;if(s+-65536>>>0<=1048575)return p[n+3|0]=s&63|128,p[n|0]=s>>>18|240,p[n+2|0]=s>>>6&63|128,p[n+1|0]=s>>>12&63|128,4}c[2865]=25,n=-1}else n=1;return n}return p[n|0]=s,1}function Qe(n){var s=0,a=0,g=0,k=0,E=0,L=0;return n?(k=c[n+8>>2]+-1|0,$n[n>>2]<=10?(s=n+20|0,a=c[s>>2],c[s>>2]=0-a,c[n+16>>2]=c[n+16>>2]+re(a,k),0):(s=n+32|0,a=c[s>>2],c[s>>2]=0-a,g=n+36|0,s=c[g>>2],c[g>>2]=0-s,E=n+40|0,g=c[E>>2],c[E>>2]=0-g,c[n+16>>2]=c[n+16>>2]+re(a,k),a=n+20|0,E=a,L=c[a>>2],a=k>>1,c[E>>2]=L+re(a,s),s=n+24|0,c[s>>2]=c[s>>2]+re(a,g),s=c[n+28>>2],s&&(g=n+44|0,a=c[g>>2],c[g>>2]=0-a,c[n+28>>2]=s+re(a,k)),0)):2}function rt(n){n=n|0;var s=0,a=0,g=0,k=0,E=0,L=0,R=0,G=0,H=0,ee=0,ce=0;for(g=n+-25|0,k=n+-26|0,E=n+-27|0,L=n+-28|0,R=n+-29|0,G=n+-30|0,H=n+-31|0,ee=n+-32|0,ce=c[2548]-F[n+-33|0]|0;s=F[n+-1|0]+ce|0,p[n|0]=F[s+F[ee|0]|0],p[n+1|0]=F[F[H|0]+s|0],p[n+2|0]=F[F[G|0]+s|0],p[n+3|0]=F[F[R|0]+s|0],p[n+4|0]=F[F[L|0]+s|0],p[n+5|0]=F[F[E|0]+s|0],p[n+6|0]=F[F[k|0]+s|0],p[n+7|0]=F[F[g|0]+s|0],n=n+32|0,a=a+1|0,(a|0)!=8;);}function Pt(n){n=n|0;var s=0,a=0,g=0,k=0,E=0,L=0;a=F[n+95|0],p[n+67|0]=a,p[n+66|0]=a,s=re(a,16843009),p[n+96|0]=s,p[n+97|0]=s>>>8,p[n+98|0]=s>>>16,p[n+99|0]=s>>>24,k=F[n+31|0],g=k+1|0,s=F[n+63|0],E=g+s>>>1|0,p[n+32|0]=E,L=F[n+-1|0],p[n|0]=g+L>>>1,g=(s+a|0)+1>>>1|0,p[n+64|0]=g,p[n+2|0]=E,p[n+34|0]=g,g=((a+k|0)+(s<<1)|0)+2>>>2|0,p[n+33|0]=g,s=s+2|0,p[n+1|0]=(s+L|0)+(k<<1)>>>2,a=(s+a|0)+(a<<1)>>>2|0,p[n+65|0]=a,p[n+3|0]=g,p[n+35|0]=a}function kt(n,s,a,g,k){n=n|0,s=s|0,a=a|0,g=g|0,k=k|0;var E=0,L=0,R=0,G=0,H=0;if(p[k|0]=F[n|0],H=s+-1|0,L=1,(s|0)>=2)for(R=k+1|0,G=n+1|0;p[E+R|0]=F[E+G|0]-F[n+E|0],E=E+1|0,(H|0)!=(E|0););if((a|0)>=2)for(R=(s|0)<2;;){if(k=g+k|0,s=n+g|0,p[k|0]=F[s|0]-F[n|0],!R)for(n=k+1|0,G=s+1|0,E=0;p[n+E|0]=F[E+G|0]-F[s+E|0],E=E+1|0,(H|0)!=(E|0););if(n=s,L=L+1|0,(L|0)==(a|0))break}}function Et(n){n=n|0;var s=0,a=0,g=0,k=0,E=0,L=0;a=F[n+-30|0],s=a+2|0,g=F[n+-29|0],k=F[n+-28|0]+(s+(g<<1)|0)>>>2|0,p[n+99|0]=k,E=F[n+-31|0],L=E+2|0,g=g+(L+(a<<1)|0)>>>2|0,p[n+98|0]=g,a=s,s=F[n+-32|0],a=(a+s|0)+(E<<1)>>>2|0,p[n+97|0]=a,s=(F[n+-33|0]+L|0)+(s<<1)>>>2|0,p[n+96|0]=s,p[n+67|0]=k,p[n+66|0]=g,p[n+65|0]=a,p[n+64|0]=s,p[n+35|0]=k,p[n+34|0]=g,p[n+33|0]=a,p[n+32|0]=s,p[n+3|0]=k,p[n+2|0]=g,p[n+1|0]=a,p[n|0]=s}function si(n,s){n=n|0,s=s|0;var a=0,g=0,k=0,E=0,L=0,R=0,G=0,H=0,ee=0,ce=0;return s=c[s>>2],H=c[s+24>>2],E=s+40|0,ee=c[E>>2],g=c[s+20>>2],L=s+36|0,k=c[L>>2],a=c[s+16>>2],R=c[n+8>>2],s=c[s+32>>2],ce=a+re(R,s)|0,a=s,s=c[n+12>>2],G=c[n+16>>2],Ll(c[n+20>>2],c[n+32>>2],ce,a,s,G),a=k,k=R>>1,a=g+re(a,k)|0,s=(s+1|0)/2|0,g=(G+1|0)/2|0,Ll(c[n+24>>2],c[n+36>>2],a,c[L>>2],s,g),Ll(c[n+28>>2],c[n+36>>2],re(k,ee)+H|0,c[E>>2],s,g),c[n+16>>2]}function fi(n,s,a,g,k){n=n|0,s=s|0,a=a|0,g=g|0,k=k|0;var E=0,L=0,R=0,G=0,H=0,ee=0,ce=0,Ae=0;if((g|0)>=1)for(H=s?0:3,ee=(s|0)!=0,ce=(a|0)<1;;){if(!ce)for(Ae=n+H|0,G=n+ee|0,s=0;E=s<<2,L=F[E+Ae|0],(L|0)!=255&&(R=E+G|0,L=re(L,32897),p[R|0]=re(L,F[R|0])>>>23,R=(E|1)+G|0,p[R|0]=re(L,F[R|0])>>>23,E=(E|2)+G|0,p[E|0]=re(L,F[E|0])>>>23),s=s+1|0,(a|0)!=(s|0););if(n=n+k|0,s=(g|0)>1,g=g+-1|0,!s)break}}function xi(n,s){var a=0;a=(s|0)!=0;e:{t:{i:{if(!s|!(n&3))break i;for(;;){if(!F[n|0])break t;if(n=n+1|0,s=s+-1|0,a=(s|0)!=0,!s)break i;if(!(n&3))break}}if(!a)break e}t:{if(!F[n|0]|s>>>0<4)break t;for(;;){if(a=c[n>>2],(a^-1)&a+-16843009&-2139062144)break t;if(n=n+4|0,s=s+-4|0,!(s>>>0>3))break}}if(!s)break e;for(;;){if(!F[n|0])return n;if(n=n+1|0,s=s+-1|0,!s)break}}return 0}function Nt(n){n=n|0;var s=0;s=re((F[n+95|0]+(F[n+-29|0]+(F[n+63|0]+(F[n+-30|0]+(F[n+31|0]+(F[n+-31|0]+(F[n+-32|0]+F[n+-1|0]|0)|0)|0)|0)|0)|0)|0)+4>>>3&255,16843009),p[n+96|0]=s,p[n+97|0]=s>>>8,p[n+98|0]=s>>>16,p[n+99|0]=s>>>24,p[n+64|0]=s,p[n+65|0]=s>>>8,p[n+66|0]=s>>>16,p[n+67|0]=s>>>24,p[n+32|0]=s,p[n+33|0]=s>>>8,p[n+34|0]=s>>>16,p[n+35|0]=s>>>24,p[n|0]=s,p[n+1|0]=s>>>8,p[n+2|0]=s>>>16,p[n+3|0]=s>>>24}function Pi(n,s,a,g){n=n|0,s=s|0,a=a|0,g=g|0;var k=0,E=0,L=0,R=0,G=0,H=0,ee=0;if((a|0)>=1)for(k=c[g+-4>>2];E=G<<2,L=E+s|0,R=c[L+4>>2],ee=g+E|0,H=c[L>>2],R=((R^H)>>>1&2139062143)+(R&H)|0,L=c[L+-4>>2],k=((L^k)>>>1&2139062143)+(k&L)|0,k=((R^k)>>>1&2139062143)+(k&R)|0,E=c[n+E>>2],k=(k&-16711936)+(E&-16711936)&-16711936|(k&16711935)+(E&16711935)&16711935,c[ee>>2]=k,G=G+1|0,(G|0)!=(a|0););}function Ei(n,s,a){n=n|0,s=s|0,a=a|0;var g=0,k=0,E=0,L=0,R=0,G=0,H=0,ee=0,ce=0,Ae=0,Ne=0,Ze=0,mt=0;for(ce=0-s|0,Ae=0-(s<<1)|0,Ne=a<<1|1,R=c[2548],G=c[2547],Ze=c[2546],H=c[2549];a=n+k|0,ee=a+ce|0,E=F[ee|0],L=F[a|0],g=F[a+Ae|0]-F[s+a|0]|0,((F[(E-L|0)+H|0]<<2)+F[g+H|0]|0)<=(Ne|0)&&(g=p[g+Ze|0]+re(L-E|0,3)|0,mt=p[(g+4>>3)+G|0],p[ee|0]=F[(p[(g+3>>3)+G|0]+E|0)+R|0],p[a|0]=F[(L-mt|0)+R|0]),k=k+1|0,(k|0)!=16;);}function Vi(n,s,a,g,k){n=n|0,s=s|0,a=a|0,g=g|0,k=k|0;var E=0,L=0,R=0,G=0,H=0,ee=0,ce=0;if((a|0)>=1)for(;E=R<<2,G=Di[s+2>>1],H=Di[n>>1],ee=Di[s>>1],ce=Di[n+2>>1],L=mn[E+g>>1]+(((G+re(H,9)|0)+re(ee+ce|0,3)|0)+8>>4)|0,L=(L|0)<1023?L:1023,Di[k+E>>1]=(L|0)>0?L:0,L=E|2,E=mn[L+g>>1]+(((re(ce,9)+ee|0)+re(G+H|0,3)|0)+8>>4)|0,E=(E|0)<1023?E:1023,Di[k+L>>1]=(E|0)>0?E:0,s=s+2|0,n=n+2|0,R=R+1|0,(R|0)!=(a|0););}function Ni(n){var s=0,a=0,g=0;if(c[n+24>>2]<=0){e:{if(c[n+4>>2]){ft[c[2808]](n);break e}if(!c[n+20>>2]){if((re(c[n+52>>2],c[n+8>>2])|0)<1)break e;for(a=c[n+76>>2];g=s<<2,p[c[n+68>>2]+s|0]=c[g+a>>2],a=c[n+76>>2],c[g+a>>2]=0,s=s+1|0,(s|0)<(re(c[n+52>>2],c[n+8>>2])|0););break e}ft[c[2809]](n)}c[n+24>>2]=c[n+24>>2]+c[n+28>>2],c[n+68>>2]=c[n+68>>2]+c[n+72>>2],c[n+64>>2]=c[n+64>>2]+1}}function cn(n,s,a,g){n=n|0,s=s|0,a=a|0,g=g|0;var k=0,E=0,L=0,R=0,G=0,H=0;if((g|0)>=1)for(;k=mn[n+2>>1],E=mn[n>>1],R=mn[n+4>>1],G=(re(k,-19081)+re(E,-9719)|0)+re(R,28800)|0,H=G+33685504>>18,p[s+L|0]=H>>>0<256?H:(G|0)<-33685504?-33685504:255,k=(re(k,-24116)+re(E,28800)|0)+re(R,-4684)|0,E=k+33685504>>18,p[a+L|0]=E>>>0<256?E:(k|0)<-33685504?-33685504:255,n=n+8|0,L=L+1|0,(L|0)!=(g|0););}function zi(n,s,a,g,k){var E=0,L=0,R=0,G=0,H=0,ee=0,ce=0;G=c[n+16>>2],L=c[n+8>>2],n=c[n+4>>2],R=8>>>n|0;e:{if((R|0)<=7){if((s|0)>=(a|0))break e;for(H=-1<<R^-1,ee=-1<<n^-1,ce=(L|0)<1;;){if(E=0,n=0,!ce)for(;E&ee||(n=F[g|0],g=g+1|0),p[k|0]=c[((n&H)<<2)+G>>2]>>>8,n=n>>>R|0,k=k+1|0,E=E+1|0,(E|0)!=(L|0););if(s=s+1|0,(a|0)==(s|0))break}break e}ft[c[2732]](g,G,k,s,a,L)}}function Rn(n,s,a){n=n|0,s=s|0,a=a|0;var g=0,k=0,E=0,L=0,R=0;E=c[s>>2],a=c[E+28>>2],L=c[E+44>>2],g=a+re(L,c[n+8>>2])|0,k=c[n+16>>2],R=c[n+12>>2],s=c[n+104>>2];e:{if(s){if((k|0)<1)break e;for(a=0;g=Xr(g,s,R)+c[E+44>>2]|0,s=c[n>>2]+s|0,a=a+1|0,(k|0)!=(a|0););break e}if(!a|(k|0)<1)break e;for(s=0;g=Jo(g,255,R)+L|0,s=s+1|0,(k|0)!=(s|0););}return 0}function _n(n,s,a){n=n|0,s=s|0,a=a|0;var g=0,k=0,E=0,L=0,R=0,G=0,H=0,ee=0,ce=0,Ae=0,Ne=0;for(ce=a<<1|1,R=c[2548],G=c[2547],Ae=c[2546],H=c[2549];a=re(s,k)+n|0,ee=a+-1|0,E=F[ee|0],L=F[a|0],g=F[a+-2|0]-F[a+1|0]|0,((F[(E-L|0)+H|0]<<2)+F[g+H|0]|0)<=(ce|0)&&(g=p[g+Ae|0]+re(L-E|0,3)|0,Ne=p[(g+4>>3)+G|0],p[ee|0]=F[(p[(g+3>>3)+G|0]+E|0)+R|0],p[a|0]=F[(L-Ne|0)+R|0]),k=k+1|0,(k|0)!=16;);}function qn(n,s){n=n|0,s=s|0;var a=0,g=0;return a=c[s>>2],n=((a^n)>>>1&2139062143)+(n&a)|0,a=n&255,s=c[s+-4>>2],a=((a-(s&255)|0)/2|0)+a|0,g=a>>>0<256?a:(a^-1)>>>24|0,a=n>>>24|0,a=((a-(s>>>24|0)|0)/2|0)+a|0,g=g|(a>>>0<256?a:a>>>24^-1)<<24,a=n>>>16&255,a=((a-(s>>>16&255)|0)/2|0)+a|0,n=n>>>8&255,n=((n-(s>>>8&255)|0)/2|0)+n|0,g|(a>>>0<256?a:(a^-1)>>>24|0)<<16|(n>>>0<256?n:(n^-1)>>>24|0)<<8}function Er(n,s,a){var g=0;if(c[n+24>>2]=0,c[n+8>>2]=-8,c[n>>2]=0,c[n+4>>2]=254,c[n+12>>2]=s,g=s+a|0,c[n+16>>2]=g,g=a>>>0>3?g+-3|0:s,c[n+20>>2]=g,g>>>0>s>>>0){a=F[s|0]|F[s+1|0]<<8|(F[s+2|0]<<16|F[s+3|0]<<24),c[n+8>>2]=16,c[n+12>>2]=s+3,c[n>>2]=(a>>>8&65280|(a<<8&16711680|a<<24))>>>8;return}if((a|0)>=1){c[n+8>>2]=0,c[n+12>>2]=s+1,c[n>>2]=F[s|0];return}c[n+24>>2]=1,c[n+8>>2]=0,c[n>>2]=0}function Mr(n,s,a){var g=0,k=0,E=0,L=0;g=c[a+16>>2];e:{if(!g){if(os(a))break e;g=c[a+16>>2]}if(E=c[a+20>>2],g-E>>>0<s>>>0)return ft[c[a+36>>2]](a,n,s)|0;t:{if(p[a+75|0]<0)break t;for(k=s;;){if(g=k,!g)break t;if(k=g+-1|0,F[k+n|0]==10)break}if(k=ft[c[a+36>>2]](a,n,g)|0,k>>>0<g>>>0)break e;n=n+g|0,s=s-g|0,E=c[a+20>>2],L=g}Xr(E,n,s),c[a+20>>2]=c[a+20>>2]+s,k=s+L|0}return k}function j(n,s,a,g){n=n|0,s=s|0,a=a|0,g=g|0;var k=0,E=0,L=0,R=0,G=0,H=0,ee=0,ce=0;if((a|0)>=1)for(ee=(s|0)<1;;){if(L=0,!ee)for(;k=L<<1,E=k+n|0,ce=E,H=(k|1)+n|0,R=F[H|0],k=R&15,G=re(k,4369),E=F[E|0],p[ce|0]=re(G,E&240|E>>>4)>>>16&240|re((E&15|E<<4)&255,G)>>>20,p[H|0]=re(R&240|R>>>4,G)>>>16&240|k,L=L+1|0,(L|0)!=(s|0););if(n=n+g|0,k=(a|0)>1,a=a+-1|0,!k)break}}function K(n,s,a,g,k){n=n|0,s=s|0,a=a|0,g=g|0,k=k|0;var E=0,L=0,R=0,G=0;if(p[k|0]=F[n|0],(s|0)>=2)for(R=s+-1|0,L=k+1|0,G=n+1|0;p[E+L|0]=F[E+G|0]-F[n+E|0],E=E+1|0,(R|0)!=(E|0););if((a|0)>=2)for(L=1;;){if(k=g+k|0,R=n+g|0,E=0,(s|0)>=1)for(;p[k+E|0]=F[E+R|0]-F[n+E|0],E=E+1|0,(E|0)!=(s|0););if(n=R,L=L+1|0,(L|0)==(a|0))break}}function ue(n,s,a){n=n|0,s=s|0,a=a|0;var g=0,k=0,E=0,L=0;if((s|0)>=1)for(;g=(E<<2)+n|0,k=c[g>>2],k>>>0<=4278190079&&(L=g,k>>>0>=16777216?(g=k>>>24|0,a?g=4278190080/(g>>>0)|0:g=re(g,65793),g=re(g,k>>>16&255)+8388608>>>8&16711680|(re(g,k>>>8&255)+8388608>>>16&65280|(k&-16777216|re(g,k&255)+8388608>>>24))):g=0,c[L>>2]=g),E=E+1|0,(E|0)!=(s|0););}function be(n,s,a){var g=0,k=0,E=0,L=0,R=0,G=0,H=0,ee=0,ce=0;if(c[n+20>>2]=0,c[n+24>>2]=0,c[n>>2]=0,c[n+4>>2]=0,c[n+12>>2]=a,E=a>>>0<8?a:8,E)for(ce=E,a=0;L=F[s+a|0],k=R<<3,g=k&31,32<=(k&63)>>>0?(k=L<<g,g=0):(k=(1<<g)-1&L>>>32-g,g=L<<g),G=g|G,H=k|H,a=a+1|0,g=R+1|0,g>>>0<1&&(ee=ee+1|0),R=g,!!((ce|0)!=(g|0)|ee););c[n+16>>2]=E,c[n>>2]=G,c[n+4>>2]=H,c[n+8>>2]=s}function je(n,s){var a=0,g=0,k=0;a=0;e:{if(!n)break e;if(!s)return c[n>>2]=2,0;c[n>>2]=0,c[n+8>>2]=s,a=n+24|0,be(a,c[s+64>>2],c[s+60>>2]);t:{i:{n:{if((io(a,8)|0)!=47||(k=io(a,14),g=io(a,14),io(a,1),io(a,3)))break n;if(!c[n+48>>2])break i}c[n>>2]=3;break t}if(c[n+4>>2]=2,g=g+1|0,c[s+4>>2]=g,a=s,s=k+1|0,c[a>>2]=s,a=1,hn(s,g,1,n,0))break e}Ho(n),a=0}return a}function Ke(n,s,a,g){n=n|0,s=s|0,a=a|0,g=g|0;var k=0,E=0,L=0,R=0;e:{if(!n){if((g|0)<1)break e;for(;k=F[s+E|0]+k|0,p[a+E|0]=k,E=E+1|0,(E|0)!=(g|0););break e}if((g|0)<1)break e;for(k=F[n|0],L=k,R=k;;){if(L=(L&255)-(R&255)|0,R=k,k=(k&255)+L|0,k=(k|0)>0?k:0,L=F[s+E|0]+((k|0)<255?k:255)|0,p[a+E|0]=L,E=E+1|0,(E|0)==(g|0))break e;k=F[n+E|0]}}}function et(n,s,a,g){var k=0,E=0,L=0,R=0;return k=c[g>>2],E=c[a>>2],E|(s|0)<1||(R=_r(k,k>>31,n,n>>31),E=s+R|0,L=Fn,L=E>>>0<R>>>0?L+1|0:L,E=E+-1|0,L=L+-1|0,E=vc(E,(E|0)!=-1?L+1|0:L,s,0)),k|(n|0)<1||(L=_r(E,E>>31,s,s>>31),k=L+n|0,s=Fn,s=k>>>0<L>>>0?s+1|0:s,k=k+-1|0,s=s+-1|0,k=vc(k,(k|0)!=-1?s+1|0:s,n,0)),n=0,(E|0)<1|(k|0)<1||(c[a>>2]=E,c[g>>2]=k,n=1),n}function at(n,s,a,g){n=n|0,s=s|0,a=a|0,g=g|0;var k=0,E=0,L=0,R=0,G=0;if((a|0)>=1)for(k=c[g+-4>>2];E=G<<2,L=E+s|0,R=c[L+4>>2],k=((R^k)>>>1&2139062143)+(k&R)|0,R=g+E|0,L=c[L>>2],k=((L^k)>>>1&2139062143)+(k&L)|0,E=c[n+E>>2],k=(k&-16711936)+(E&-16711936)&-16711936|(k&16711935)+(E&16711935)&16711935,c[R>>2]=k,G=G+1|0,(G|0)!=(a|0););}function pt(n,s){n=n|0,s=s|0;var a=0,g=0,k=0;return g=c[s>>2],s=c[s+-4>>2],a=((g&255)+(n&255)|0)-(s&255)|0,k=a>>>0<256?a:(a^-1)>>>24|0,a=(g>>>24)+(n>>>24)-(s>>>24)|0,k=k|(a>>>0<256?a:a>>>24^-1)<<24,a=((g>>>16&255)+(n>>>16&255)|0)-(s>>>16&255)|0,n=((g>>>8&255)+(n>>>8&255)|0)-(s>>>8&255)|0,k|(a>>>0<256?a:(a^-1)>>>24|0)<<16|(n>>>0<256?n:(n^-1)>>>24|0)<<8}function St(n,s,a,g,k){var E=0;e:{if(!n|s>>>0<10|(F[n+3|0]!=157|F[n+4|0]!=1)||F[n+5|0]!=42||(s=F[n|0],(s&25)!=16|(s|F[n+1|0]<<8|F[n+2|0]<<16)>>>5>>>0>=a>>>0)||(s=F[n+6|0]|F[n+7|0]<<8&16128,!s)||(n=F[n+8|0]|F[n+9|0]<<8&16128,!n)||(g&&(c[g>>2]=s),E=1,!k))break e;c[k>>2]=n}return E}function ai(n,s,a){n=n|0,s=s|0,a=a|0;var g=0,k=0,E=0,L=0,R=0,G=0;e:{if(g=c[n+104>>2],!g|(a|0)<1)break e;for(R=c[s+16>>2]+a|0,k=c[s+36>>2];;){if(E=c[n+8>>2],L=c[k+60>>2],G=g,g=c[n>>2],bs(k,c[n+16>>2]+(E-L|0)|0,G+re(g,L-E|0)|0,g),a=a-(ft[c[s+52>>2]](s,R-a|0,a)|0)|0,(a|0)<1)break e;g=c[n+104>>2]}}return 0}function Ai(n,s,a,g){n=n|0,s=s|0,a=a|0,g=g|0;var k=0,E=0,L=0,R=0,G=0,H=0,ee=0;if((a|0)>=1)for(G=p[n+2|0],H=p[n+1|0],ee=p[n|0];E=k<<2,n=c[E+s>>2],L=n<<16>>24,R=(re(L,ee)>>5)+(n>>>16|0)|0,c[g+E>>2]=n+(re(H,L)>>>5|0)+(re(R<<24>>24,G)>>>5)&255|(R<<16&16711680|n&-16711936),k=k+1|0,(k|0)!=(a|0););}function wi(n,s,a,g){n=n|0,s=s|0,a=a|0,g=g|0;var k=0,E=0,L=0,R=0;if((a|0)>=1)for(R=s+-4|0,s=c[g+-4>>2];k=L<<2,E=c[k+R>>2],s=((E^s)>>>1&2139062143)+(s&E)|0,E=g+k|0,k=c[n+k>>2],s=(s&-16711936)+(k&-16711936)&-16711936|(s&16711935)+(k&16711935)&16711935,c[E>>2]=s,L=L+1|0,(L|0)!=(a|0););}function pi(n,s,a,g){n=n|0,s=s|0,a=a|0,g=g|0;var k=0,E=0,L=0,R=0,G=0;if((a|0)>=1)for(;k=R<<2,E=k+s|0,L=c[E>>2],G=g+k|0,E=c[E+-4>>2],L=((E^L)>>>1&2139062143)+(L&E)|0,k=c[n+k>>2],c[G>>2]=(L&-16711936)+(k&-16711936)&-16711936|(L&16711935)+(k&16711935)&16711935,R=R+1|0,(R|0)!=(a|0););}function rn(n,s,a,g){n=n|0,s=s|0,a=a|0,g=g|0;var k=0,E=0,L=0,R=0,G=0;if((a|0)>=1)for(;k=R<<2,E=k+s|0,L=c[E+4>>2],G=g+k|0,E=c[E>>2],L=((E^L)>>>1&2139062143)+(L&E)|0,k=c[n+k>>2],c[G>>2]=(L&-16711936)+(k&-16711936)&-16711936|(L&16711935)+(k&16711935)&16711935,R=R+1|0,(R|0)!=(a|0););}function Oi(n,s,a,g){n=n|0,s=s|0,a=a|0,g=g|0;var k=0,E=0,L=0,R=0;if((a|0)>=1)for(k=c[g+-4>>2];E=R<<2,L=c[E+s>>2],k=((L^k)>>>1&2139062143)+(k&L)|0,L=g+E|0,E=c[n+E>>2],k=(k&-16711936)+(E&-16711936)&-16711936|(k&16711935)+(E&16711935)&16711935,c[L>>2]=k,R=R+1|0,(R|0)!=(a|0););}function Wt(n,s,a,g){n=n|0,s=s|0,a=a|0,g=g|0;var k=0,E=0,L=0,R=0,G=0,H=0;if((g|0)>=1)for(;E=L<<1,k=E+a|0,H=k,E=mn[n+E>>1]-mn[s+E>>1]|0,k=E+mn[k>>1]|0,k=(k|0)<1023?k:1023,Di[H>>1]=(k|0)>0?k:0,k=E>>31,E=k+E^k,k=R+E|0,k>>>0<E>>>0&&(G=G+1|0),R=k,L=L+1|0,(L|0)!=(g|0););return Fn=G,R|0}function ii(n,s,a,g,k,E){n=n|0,s=s|0,a=a|0,g=g|0,k=k|0,E=E|0;var L=0,R=0,G=0,H=0,ee=0;if(R=255,(g|0)>=1)for(ee=(a|0)<1;;){if(L=0,!ee)for(;G=F[(L<<2)+n|0],p[k+L|0]=G,R=R&G,L=L+1|0,(L|0)!=(a|0););if(k=k+E|0,n=n+s|0,H=H+1|0,(H|0)==(g|0))break}return(R&255)==255|0}function Hi(n,s,a){var g=0,k=0,E=0;e:{if((s|0)==1&n>>>0<0|s>>>0<1){g=n;break e}for(;g=vc(n,s,10,0),k=Fn,E=k,k=_r(g,k,10,0),a=a+-1|0,p[a|0]=n-k|48,k=s>>>0>9,n=g,s=E,!!k;);}if(g)for(;a=a+-1|0,n=(g>>>0)/10|0,p[a|0]=g-re(n,10)|48,s=g>>>0>9,g=n,!!s;);return a}function Ji(n,s,a,g,k,E){n=n|0,s=s|0,a=a|0,g=g|0,k=k|0,E=E|0;var L=0,R=0,G=0,H=0,ee=0;if(R=255,(g|0)>=1)for(ee=(a|0)<1;;){if(L=0,!ee)for(;G=F[n+L|0],p[(L<<2)+k|0]=G,R=R&G,L=L+1|0,(L|0)!=(a|0););if(k=k+E|0,n=n+s|0,H=H+1|0,(H|0)==(g|0))break}return(R|0)!=255|0}function Ui(n,s,a,g,k){var E=0,L=0,R=0;E=Nn-32|0,Nn=E;e:{if(!n|s>>>0<5|(F[n|0]!=47|F[n+4|0]>31)||(be(E,n,s),(io(E,8)|0)!=47)||(n=io(E,14),s=io(E,14),L=io(E,1),io(E,3)|c[E+24>>2])||(a&&(c[a>>2]=n+1),g&&(c[g>>2]=s+1),R=1,!k))break e;c[k>>2]=L}return Nn=E+32|0,R}function Dn(n,s,a,g){n=n|0,s=s|0,a=a|0,g=g|0;var k=0,E=0,L=0,R=0;if((a|0)>=1)for(;;){k=F[s+E|0];e:{if((k|0)==255)break e;if(!k){p[n+E|0]=0;break e}L=n+E|0,R=L,g?k=4278190080/(k>>>0)|0:k=re(k,65793),p[R|0]=re(k,F[L|0])+8388608>>>24}if(E=E+1|0,(E|0)==(a|0))break}}function Cn(n,s,a,g){n=n|0,s=s|0,a=a|0,g=g|0;var k=0;e:{if(n){if((g|0)<=0)break e;for(;p[a+k|0]=F[s+k|0]+F[n+k|0],k=k+1|0,(k|0)!=(g|0););break e}if((g|0)<1)break e;for(n=0;n=F[s+k|0]+n|0,p[a+k|0]=n,k=k+1|0,(k|0)!=(g|0););}}function kr(n,s,a,g){n=n|0,s=s|0,a=a|0,g=g|0;var k=0,E=0,L=0,R=0;if((a|0)>=1)for(L=s+-4|0,s=0;k=s<<2,E=c[k+n>>2],R=g+k|0,k=c[k+L>>2],c[R>>2]=(E&-16711936)+(k&-16711936)&-16711936|(E&16711935)+(k&16711935)&16711935,s=s+1|0,(a|0)!=(s|0););}function On(n,s,a,g,k,E){n=n|0,s=s|0,a=a|0,g=g|0,k=k|0,E=E|0;var L=0,R=0,G=0;if((g|0)>=1)for(R=(a|0)<1,G=E<<2;;){if(E=0,!R)for(;c[(E<<2)+k>>2]=F[n+E|0]<<8,E=E+1|0,(E|0)!=(a|0););if(n=n+s|0,k=k+G|0,L=L+1|0,(L|0)==(g|0))break}}function bo(n,s,a,g,k,E){n=n|0,s=s|0,a=a|0,g=g|0,k=k|0,E=E|0;var L=0,R=0;if((g|0)<(k|0))for(R=(E|0)<1;;){if(L=0,!R)for(;c[a>>2]=c[(c[n>>2]>>>6&1020)+s>>2],a=a+4|0,n=n+4|0,L=L+1|0,(L|0)!=(E|0););if(g=g+1|0,(k|0)==(g|0))break}}function So(n,s,a,g){n=n|0,s=s|0,a=a|0,g=g|0;var k=0,E=0,L=0,R=0;if((a|0)>=1)for(L=s+4|0,s=0;k=s<<2,E=c[k+n>>2],R=g+k|0,k=c[k+L>>2],c[R>>2]=(E&-16711936)+(k&-16711936)&-16711936|(E&16711935)+(k&16711935)&16711935,s=s+1|0,(a|0)!=(s|0););}function Yr(n,s,a,g,k,E){n=n|0,s=s|0,a=a|0,g=g|0,k=k|0,E=E|0;var L=0,R=0;if((g|0)<(k|0))for(R=(E|0)<1;;){if(L=0,!R)for(;p[a|0]=c[(F[n|0]<<2)+s>>2]>>>8,a=a+1|0,n=n+1|0,L=L+1|0,(L|0)!=(E|0););if(g=g+1|0,(k|0)==(g|0))break}}function qr(n,s,a,g){n=n|0,s=s|0,a=a|0,g=g|0;var k=0,E=0,L=0,R=0;if((a|0)>=1)for(;k=E<<2,L=c[k+n>>2],R=g+k|0,k=c[s+k>>2],c[R>>2]=(L&-16711936)+(k&-16711936)&-16711936|(L&16711935)+(k&16711935)&16711935,E=E+1|0,(E|0)!=(a|0););}function mo(n,s,a,g){n=n|0,s=s|0,a=a|0,g=g|0;var k=0,E=0,L=0;if((a|0)>=1)for(s=c[g+-4>>2];E=k<<2,L=c[E+n>>2],s=(L&-16711936)+(s&-16711936)&-16711936|(L&16711935)+(s&16711935)&16711935,c[g+E>>2]=s,k=k+1|0,(k|0)!=(a|0););}function Co(){var n=0,s=0;n=$l(1,0,2376);e:{if(!n||(c[n>>2]=0,c[n+8>>2]=5010,ft[c[2557]](n+124|0),c[n+312>>2]=0,c[n+4>>2]=0,c[2661]))break e;t:{if(s=c[2673],!s||!(ft[s|0](2)|0))break t;return c[2661]=19,n}c[2661]=20}return n}function Gr(n,s,a){var g=0,k=0;return g=2,!n|!a||(c[a>>2]=0,c[a+4>>2]=0,c[a+32>>2]=0,c[a+36>>2]=0,c[a+24>>2]=0,c[a+28>>2]=0,k=a+16|0,g=k,c[g>>2]=0,c[g+4>>2]=0,g=a+8|0,c[g>>2]=0,c[g+4>>2]=0,g=kl(n,s,a,a+4|0,g,a+12|0,k,0)),g}function Is(n,s,a,g){var k=0,E=0,L=0,R=0,G=0,H=0;return k=a>>>16|0,E=n>>>16|0,H=re(k,E),L=a&65535,R=n&65535,G=re(L,R),E=(G>>>16|0)+re(E,L)|0,k=(E&65535)+re(k,R)|0,n=(re(s,a)+H|0)+re(n,g)+(E>>>16)+(k>>>16)|0,s=G&65535|k<<16,Fn=n,s}function Dr(n){var s=0;if(s=c[n+12>>2],s>>>0<$n[n+16>>2]){c[n+12>>2]=s+1,c[n+8>>2]=c[n+8>>2]+8,c[n>>2]=F[s|0]|c[n>>2]<<8;return}if(!c[n+24>>2]){c[n+24>>2]=1,c[n>>2]=c[n>>2]<<8,c[n+8>>2]=c[n+8>>2]+8;return}c[n+8>>2]=0}function rs(n,s){n=n|0,s=s|0;var a=0;return s=c[s>>2],a=c[s+20>>2],jh(c[n+20>>2],c[n+32>>2],c[n+24>>2],c[n+28>>2],c[n+36>>2],re(a,c[n+8>>2])+c[s+16>>2]|0,a,c[n+12>>2],c[n+16>>2],c[(c[s>>2]<<2)+11376>>2]),c[n+16>>2]}function zs(n,s,a){n=n|0,s=s|0,a=a|0;var g=0,k=0;if((a|0)>=1)for(;k=c[(g<<2)+n>>2],p[s+g|0]=((re(k&255,6420)+re(k>>>16&255,16839)|0)+re(k>>>8&255,33059)|0)+1081344>>>16,g=g+1|0,(g|0)!=(a|0););}function ao(n,s,a,g){n=n|0,s=s|0,a=a|0,g=g|0;var k=0;k=Nn-16|0,Nn=k;e:{if(!If(mu(c[n+60>>2],s|0,a|0,g&255,k+8|0)|0)){s=c[k+12>>2],n=c[k+8>>2];break e}c[k+8>>2]=-1,c[k+12>>2]=-1,s=-1,n=-1}return Nn=k+16|0,Fn=s,n|0}function us(n,s,a,g,k,E){n=n|0,s=s|0,a=a|0,g=g|0,k=k|0,E=E|0;var L=0,R=0;if((g|0)>=1)for(;c[(R<<2)+E>>2]=F[a+L|0]|(F[n+L|0]<<16|F[s+L|0]<<8)|-16777216,L=k+L|0,R=R+1|0,(R|0)!=(g|0););}function Ts(n,s,a){n=n|0,s=s|0,a=a|0;var g=0,k=0,E=0,L=0;if((s|0)>=1)for(;E=g<<2,k=c[E+n>>2],L=k>>>8&255,c[a+E>>2]=(k&16711935)+(L<<16|L)&16711935|k&-16711936,g=g+1|0,(g|0)!=(s|0););}function Ns(n){n&&(ft[c[2562]](n+124|0),s0(n),jr(c[n+2288>>2]),c[n+2288>>2]=0,c[n+2292>>2]=0,c[n+12>>2]=0,c[n+16>>2]=0,c[n+20>>2]=0,c[n+24>>2]=0,c[n+28>>2]=0,c[n+32>>2]=0,c[n+36>>2]=0,c[n+4>>2]=0,jr(n))}function jo(n,s,a,g,k){var E=0;if(E=Nn-256|0,Nn=E,!(k&73728|(a|0)<=(g|0))){if(a=a-g|0,g=a>>>0<256,Jo(E,s&255,g?a:256),!g)for(;Gh(n,E,256),a=a+-256|0,a>>>0>255;);Gh(n,E,a)}Nn=E+256|0}function _a(n,s,a){n=n|0,s=s|0,a=a|0;var g=0;if((a|0)>=1)for(;p[s+g|0]=((re(F[n+2|0],16839)+re(F[n+1|0],33059)|0)+re(F[n|0],6420)|0)+1081344>>>16,n=n+3|0,g=g+1|0,(g|0)!=(a|0););}function qa(n,s,a){n=n|0,s=s|0,a=a|0;var g=0;if((a|0)>=1)for(;p[s+g|0]=((re(F[n|0],16839)+re(F[n+1|0],33059)|0)+re(F[n+2|0],6420)|0)+1081344>>>16,n=n+3|0,g=g+1|0,(g|0)!=(a|0););}function Oo(n,s,a){n=n|0,s=s|0,a=a|0;var g=0;if((s|0)>=1)for(g=(s<<2)+n|0;s=c[n>>2],p[a+2|0]=s,p[a+3|0]=s>>>24,p[a+1|0]=s>>>8,p[a|0]=s>>>16,a=a+4|0,n=n+4|0,n>>>0<g>>>0;);}function ws(n,s,a,g){var k=0,E=0;k=Nn-1024|0,Nn=k;e:{if(!n){g=Es(0,s,a,g,0);break e}if((g|0)<=512){g=Es(n,s,a,g,k);break e}if(E=Ls(g,0,2),!E){g=0;break e}g=Es(n,s,a,g,E),jr(E)}return Nn=k+1024|0,g}function Jl(){var n=0;n=c[2673],(n|0)!=c[2555]&&(c[2854]=136,c[2853]=137,c[2852]=138,c[2851]=139,c[2850]=140,c[2849]=136,c[2848]=137,c[2847]=138,c[2846]=141,c[2845]=139,c[2844]=142,c[2555]=n)}function Ha(){var n=0;n=c[2673],(n|0)!=c[2553]&&(c[2831]=129,c[2829]=130,c[2838]=131,c[2837]=132,c[2836]=129,c[2835]=130,c[2834]=133,c[2833]=131,c[2832]=132,c[2830]=134,c[2828]=135,c[2553]=n)}function ul(n,s,a){n=n|0,s=s|0,a=a|0;var g=0;if((s|0)>=1)for(g=(s<<2)+n|0;s=c[n>>2],p[a+1|0]=s>>>5&224|s>>>3&31,p[a|0]=s>>>16&248|s>>>13&7,a=a+2|0,n=n+4|0,n>>>0<g>>>0;);}function cl(){var n=0;n=c[2673],(n|0)!=c[2554]&&(c[2820]=122,c[2819]=123,c[2815]=122,c[2813]=123,c[2822]=124,c[2821]=125,c[2818]=126,c[2817]=124,c[2816]=125,c[2814]=127,c[2812]=128,c[2554]=n)}function os(n){var s=0;return s=F[n+74|0],p[n+74|0]=s+-1|s,s=c[n>>2],s&8?(c[n>>2]=s|32,-1):(c[n+4>>2]=0,c[n+8>>2]=0,s=c[n+44>>2],c[n+28>>2]=s,c[n+20>>2]=s,c[n+16>>2]=s+c[n+48>>2],0)}function zh(n,s,a){n=n|0,s=s|0,a=a|0;var g=0;if((s|0)>=1)for(g=(s<<2)+n|0;s=c[n>>2],p[a+1|0]=s&240|s>>>28,p[a|0]=s>>>16&240|s>>>12&15,a=a+2|0,n=n+4|0,n>>>0<g>>>0;);}function r0(n,s,a,g){n=n|0,s=s|0,a=a|0,g=g|0;var k=0,E=0;if((a|0)>=1)for(s=0;k=s<<2,E=c[k+n>>2],c[g+k>>2]=E+-16777216&-16711936|E&16711935,s=s+1|0,(a|0)!=(s|0););}function vf(n,s){n=n|0,s=s|0,mn[n>>1]&&ft[c[2706]](n,s),mn[n+32>>1]&&ft[c[2706]](n+32|0,s+4|0),mn[n+64>>1]&&ft[c[2706]](n- -64|0,s+128|0),mn[n+96>>1]&&ft[c[2706]](n+96|0,s+132|0)}function hc(){var n=0;n=c[2673],(n|0)!=c[2544]&&(c[2663]=21,c[2662]=22,c[2665]=23,c[2670]=24,c[2664]=25,c[2666]=26,c[2667]=27,c[2668]=28,c[2669]=29,c[2671]=30,c[2672]=31,c[2544]=n)}function fc(n,s){n=n|0,s=s|0;var a=0,g=0;return a=c[s>>2],g=c[s+4>>2],a=((a^g)>>>1&2139062143)+(a&g)|0,s=c[s+-4>>2],n=((s^n)>>>1&2139062143)+(n&s)|0,((a^n)>>>1&2139062143)+(n&a)|0}function Nh(n){n=n|0;var s=0,a=0,g=0;return c[n+12>>2]<1|c[n+16>>2]<1||(s=c[n+40>>2],a=ft[c[s+44>>2]](n,s)|0,g=c[s+48>>2],g&&ft[g|0](n,s,a)|0,c[s+16>>2]=c[s+16>>2]+a,s=1),s|0}function Ga(n,s,a,g){n=n|0,s=s|0,a=a|0,g=g|0;var k=0,E=0,L=0;if((g|0)>=1)for(;E=k<<1,L=E+a|0,Di[L>>1]=mn[L>>1]+(mn[n+E>>1]-mn[s+E>>1]|0),k=k+1|0,(k|0)!=(g|0););}function Wa(n){var s=0,a=0;s=c[3008],a=n+3&-4,n=s+a|0;e:{if(n>>>0<=s>>>0&&(a|0)>=1||n>>>0>vp()<<16>>>0&&!(du(n|0)|0))break e;return c[3008]=n,s}return c[2865]=48,-1}function dc(n,s,a){n=n|0,s=s|0,a=a|0;var g=0;if((s|0)>=1)for(g=(s<<2)+n|0;s=c[n>>2],p[a|0]=s,p[a+2|0]=s>>>16,p[a+1|0]=s>>>8,a=a+3|0,n=n+4|0,n>>>0<g>>>0;);}function pc(n,s,a){n=n|0,s=s|0,a=a|0;var g=0;if((s|0)>=1)for(g=(s<<2)+n|0;s=c[n>>2],p[a+2|0]=s,p[a+1|0]=s>>>8,p[a|0]=s>>>16,a=a+3|0,n=n+4|0,n>>>0<g>>>0;);}function jh(n,s,a,g,k,E,L,R,G,H){var ee=0,ce=0;if((G|0)>=1)for(;ft[H|0](n,a,g,E,R),ce=ee&1,a=ce?a+k|0:a,g=ce?g+k|0:g,E=E+L|0,n=n+s|0,ee=ee+1|0,(ee|0)!=(G|0););}function zc(n,s){var a=0,g=0,k=0;a=0;e:{if(!n||(g=_r(n,0,s,0),k=Fn,a=g,(n|s)>>>0<65536))break e;a=k?-1:g}return s=a,n=ja(s),!n|!(F[n+-4|0]&3)||Jo(n,0,s),n}function mc(n,s){n=n|0,s=s|0;var a=0,g=0,k=0;e:{if((s|0)<=0)break e;for(;;){if(F[n+a|0]==255){if(a=a+4|0,g=(s|0)<2,s=s+-1|0,!g)continue;break e}break}k=1}return k|0}function Nc(n,s,a,g){n=n|0,s=s|0,a=a|0,g=g|0;var k=0,E=0;if(k=n?F[n|0]:k,(g|0)>=1)for(;k=F[s+E|0]+k|0,p[a+E|0]=k,E=E+1|0,(E|0)!=(g|0););}function gc(n){var s=0;e:{if(c[n+64>>2]>=c[n+56>>2])break e;for(;;){if(c[n+24>>2]>0)break e;if(s=s+1|0,Ni(n),!(c[n+64>>2]<c[n+56>>2]))break}}return s}function jc(n,s){var a=0,g=0,k=0,E=0;a=4;e:{for(;;){if(g=F[n|0],k=F[s|0],(g|0)==(k|0)){if(s=s+1|0,n=n+1|0,a=a+-1|0,a)continue;break e}break}E=g-k|0}return E}function aa(){var n=0;n=c[2673],(n|0)!=c[2556]&&(c[2861]=143,c[2860]=144,c[2857]=145,c[2858]=146,c[2859]=147,c[2862]=148,c[2863]=149,c[2864]=150,c[2556]=n)}function Js(n){var s=0,a=0,g=0;if(Tf(p[c[n>>2]]))for(;s=c[n>>2],g=p[s|0],c[n>>2]=s+1,a=(re(a,10)+g|0)+-48|0,!!Tf(p[s+1|0]););return a}function Ls(n,s,a){var g=0,k=0,E=0;e:{if(n|s&&(k=vc(2147418112,0,n,s),g=Fn,_r(a,0,n,s),!g&k>>>0<a>>>0|g>>>0<0|Fn>>>0>0))break e;E=ja(re(n,a))}return E}function Ql(n,s,a,g,k){n=n|0,s=s|0,a=a|0,g=g|0,k=k|0;var E=0;E=n,n=s<<2,E=E+n|0,Hr(E,s,1,16,a,g,k),E=n+E|0,Hr(E,s,1,16,a,g,k),Hr(n+E|0,s,1,16,a,g,k)}function o0(){var n=0;n=c[2673],(n|0)!=c[2550]&&(c[2731]=75,c[2730]=76,c[2729]=77,c[2728]=0,c[2727]=78,c[2726]=79,c[2725]=80,c[2724]=0,c[2550]=n)}function $l(n,s,a){var g=0,k=0,E=0;e:{if(n|s&&(k=vc(2147418112,0,n,s),g=Fn,_r(a,0,n,s),!g&k>>>0<a>>>0|g>>>0<0|Fn>>>0>0))break e;E=zc(n,a)}return E}function s0(n){var s=0;jr(c[n+2360>>2]),c[n+2360>>2]=0,c[n+2364>>2]=0,s=c[n+2344>>2],s&&(p0(c[s+20>>2]),c[s+20>>2]=0,jr(s)),c[n+2344>>2]=0}function bf(n,s,a){n=n|0,s=s|0,a=a|0;var g=0;if((a|0)>=1)for(;p[s+g|0]=c[(g<<2)+n>>2]>>>8,g=g+1|0,(g|0)!=(a|0););}function dh(n,s,a,g){if(n|s)for(;a=a+-1|0,p[a|0]=F[(n&15)+10128|0]|g,n=(s&15)<<28|n>>>4,s=s>>>4|0,!!(n|s););return a}function Uc(n,s,a,g,k,E,L){var R=0;if((E|0)>=1)for(;ft[c[2663]](n,a,k,L),a=a+g|0,n=n+s|0,R=R+1|0,(R|0)!=(E|0););}function wf(n,s){n=n|0,s=s|0;for(var a=0;;){if((s|0)<1)return 0;if(s=s+-1|0,a=F[n|0],n=n+1|0,(a|0)!=255)break}return 1}function ph(n,s){n=n|0,s=s|0;var a=0;return a=c[s+4>>2],n=((a^n)>>>1&2139062143)+(n&a)|0,s=c[s>>2],((n^s)>>>1&2139062143)+(n&s)|0}function Uh(n,s,a,g,k,E){n=n|0,s=s|0,a=a|0,g=g|0,k=k|0,E=E|0;var L=0;L=n,n=a<<2,Hr(L+n|0,a,1,8,g,k,E),Hr(n+s|0,a,1,8,g,k,E)}function mh(n,s,a,g,k){n=n|0,s=s|0,a=a|0,g=g|0,k=k|0,Hr(n+4|0,1,s,16,a,g,k),Hr(n+8|0,1,s,16,a,g,k),Hr(n+12|0,1,s,16,a,g,k)}function Ll(n,s,a,g,k,E){var L=0;if((E|0)>=1)for(;a=Xr(a,n,k)+g|0,n=n+s|0,L=(E|0)>1,E=E+-1|0,!!L;);}function a0(n,s,a){if(n|s)for(;a=a+-1|0,p[a|0]=n&7|48,n=(s&7)<<29|n>>>3,s=s>>>3|0,!!(n|s););return a}function Vc(n,s,a,g,k,E,L,R,G,H){n=n|0,s=s|0,a=a|0,g=g|0,k=k|0,E=E|0,L=L|0,R=R|0,G=G|0,H=H|0,ft[n|0](s,a,g,k,E,L,R,G,H)}function yc(n,s,a,g){var k=0;if((g|0)>=1)for(;ft[c[2662]](n,a,0),n=n+s|0,k=k+1|0,(k|0)!=(g|0););}function va(){var n=0;n=c[2673],(n|0)!=c[2552]&&(c[2809]=118,c[2808]=119,c[2807]=120,c[2806]=121,c[2552]=n)}function eu(n,s){var a=0;return a=1<<s,a=$l(a,a>>31,4),c[n>>2]=a,a?(c[n+8>>2]=s,c[n+4>>2]=32-s,1):0}function l0(n,s){var a=0;return a=1,c[n+148>>2]>=1&&(a=ft[c[2559]](n+124|0)|0),n=c[s+52>>2],n&&ft[n|0](s),a}function xf(n){n=n|0;var s=0;s=c[n+8>>2],s&&(s=ft[s|0](c[n+12>>2],c[n+16>>2])|0,c[n+20>>2]=c[n+20>>2]|!s)}function ad(n,s,a,g,k,E){n=n|0,s=s|0,a=a|0,g=g|0,k=k|0,E=E|0,Hr(n+4|0,1,a,8,g,k,E),Hr(s+4|0,1,a,8,g,k,E)}function _c(n,s){var a=0;return a=c[n+24>>2],n=c[n+32>>2],n=((a+n|0)+-1|0)/(n|0)|0,(n|0)>(s|0)?s:n}function ku(n,s,a,g,k,E,L){return n=n|0,s=s|0,a=a|0,g=g|0,k=k|0,E=E|0,L=L|0,ft[n|0](s,a,g,k,E,L)|0}function u0(n,s,a,g,k,E){n=n|0,s=s|0,a=a|0,g=g|0,k=k|0,E=E|0,Gs(n,1,a,8,g,k,E),Gs(s,1,a,8,g,k,E)}function Gu(n,s,a,g,k,E){n=n|0,s=s|0,a=a|0,g=g|0,k=k|0,E=E|0,Gs(n,a,1,8,g,k,E),Gs(s,a,1,8,g,k,E)}function gh(n){n=n|0,c[n>>2]=0,c[n+4>>2]=0,c[n+16>>2]=0,c[n+20>>2]=0,c[n+8>>2]=0,c[n+12>>2]=0}function Af(n,s,a,g,k){return n=n|0,s=s|0,a=a|0,g=g|0,k=k|0,n=ft[n|0](s,a,g,k)|0,ql(Fn|0),n|0}function ld(n,s){var a=0;return!s|c[n+12>>2]<2|c[n>>2]+-7>>>0>3||(a=c[s+8>>2]!=0),a}function yh(n,s){return n=n|0,s=s|0,n=c[s>>2],s=c[s+-4>>2],((n^s)>>>1&2139062143)+(n&s)|0}function kf(n,s,a,g,k,E,L){n=n|0,s=s|0,a=a|0,g=g|0,k=k|0,E=E|0,L=L|0,ft[n|0](s,a,g,k,E,L)}function ba(n,s){var a=0,g=0;return a=s&31,g=(-1>>>a&n)<<a,a=n,n=0-s&31,g|(a&-1<<n)>>>n}function Su(n,s){return n=n|0,s=s|0,n=c[s+4>>2],s=c[s>>2],((n^s)>>>1&2139062143)+(n&s)|0}function Wu(n,s){return n=n|0,s=s|0,s=c[s+-4>>2],((s^n)>>>1&2139062143)+(n&s)|0}function tu(n,s,a,g,k,E){n=n|0,s=s|0,a=a|0,g=g|0,k=k|0,E=E|0,ft[n|0](s,a,g,k,E)}function Vh(n){e:{if(c[n+76>>2]<=-1){n=Mr(1024,26,n);break e}n=Mr(1024,26,n)}}function Xu(n,s){n=n|0,s=s|0,ft[c[2703]](n,s,1),ft[c[2703]](n- -64|0,s+128|0,1)}function c0(n,s){return n=n|0,s=s|0,s=c[s>>2],((s^n)>>>1&2139062143)+(n&s)|0}function Qo(n,s,a){return c[n>>2]||(c[n+8>>2]=a,c[n>>2]=s,c[n+4>>2]=0),0}function Yu(n,s,a){var g=0;g=Nn-16|0,Nn=g,c[g+12>>2]=a,yr(n,s,a),Nn=g+16|0}function qh(n,s,a,g,k){n=n|0,s=s|0,a=a|0,g=g|0,k=k|0,Gs(n,1,s,16,a,g,k)}function h0(n,s,a,g,k){n=n|0,s=s|0,a=a|0,g=g|0,k=k|0,Gs(n,s,1,16,a,g,k)}function f0(n){return n=n|0,c[n+20>>2]=0,c[n+4>>2]||(c[n+4>>2]=1),1}function Hh(n,s){c[s+40>>2]=n,c[s+52>>2]=3,c[s+48>>2]=4,c[s+44>>2]=5}function up(n,s){if(!c[n>>2]){ft[c[2806]](n,s);return}ft[c[2807]](n,s)}function cp(n,s,a,g,k){n=n|0,s=s|0,a=a|0,g=g|0,k=k|0,ft[n|0](s,a,g,k)}function Sf(n,s,a){n=n|0,s=s|0,a=a|0,Ua(n,s),a&&Ua(n+32|0,s+4|0)}function ud(n,s,a,g){return n=n|0,s=s|0,a=a|0,g=g|0,ft[n|0](s,a,g)|0}function Cf(n){n&&(c[n+12>>2]<=0&&jr(c[n+80>>2]),c[n+80>>2]=0)}function Q1(n){n=n|0,n=c[n+40>>2],jr(c[n+40>>2]),c[n+40>>2]=0}function hp(n,s,a,g){n=n|0,s=s|0,a=a|0,g=g|0,ft[n|0](s,a,g)}function Ef(n,s,a){return n=n|0,s=s|0,a=a|0,ft[n|0](s,a)|0}function fp(n){return n?31-Rr(n+-1^n)|0:32}function d0(n,s){Xr(c[s>>2],c[n>>2],4<<c[s+8>>2])}function js(n,s){return s=Tr(n,s),Tr(n,1)?0-s|0:s}function If(n){return n?(c[2865]=n,-1):0}function cd(n,s,a){n=n|0,s=s|0,a=a|0,ft[n|0](s,a)}function hd(n,s){return n=n|0,s=s|0,ft[n|0](s)|0}function $1(n,s){return s=s|0,c[s+-4>>2]}function dp(n,s){return n?ze(n,s):0}function Gh(n,s,a){F[n|0]&32||Mr(s,a,n)}function em(n){return n=n|0,n=Nn-n&-16,Nn=n,n|0}function tm(n,s){return s=s|0,c[s+4>>2]}function qc(n,s){return-16777216}function vc(n,s,a,g){return n=ju(n,s,a,g),n}function _r(n,s,a,g){return n=Is(n,s,a,g),n}function bc(n){n&&(jr(c[n>>2]),c[n>>2]=0)}function im(n,s){return s=s|0,c[s>>2]}function nm(n){return n=n|0,lh(c[n+60>>2])|0}function rm(n){return n=n|0,!c[n+20>>2]|0}function pp(n,s){return n=n|0,n|0}function mp(n,s){n=n|0,s=s|0,ft[n|0](s)}function om(n){return n=n|0,lm(n|0)|0}function Tf(n){return n+-48>>>0<10}function p0(n){n&&(Ho(n),jr(n))}function gp(n){n&&Jo(n,0,108)}function fd(n){n=n|0,c[n+4>>2]=0}function Wh(n){n&&Jo(n,0,84)}function Lf(n){n&&jr(n)}function yp(n,s){return Fn=n,s}function sm(){return 11460}function am(n){n=n|0,Nn=n}function Pf(){return Nn|0}function _p(){}ft[1]=Vu,ft[2]=zu,ft[3]=Q1,ft[4]=Ia,ft[5]=Nh,ft[6]=rs,ft[7]=ch,ft[8]=si,ft[9]=bu,ft[10]=z,ft[11]=Rn,ft[12]=Yl,ft[13]=Hu,ft[14]=qu,ft[15]=ai,ft[16]=xu,ft[17]=er,ft[18]=ds,ft[19]=Nu,ft[20]=nl,ft[21]=Dn,ft[22]=ue,ft[23]=j,ft[24]=us,ft[25]=fi,ft[26]=Ji,ft[27]=On,ft[28]=ii,ft[29]=bf,ft[30]=wf,ft[31]=mc,ft[32]=Sf,ft[33]=Xl,ft[34]=zo,ft[35]=El,ft[36]=Xu,ft[37]=vf,ft[38]=h0,ft[39]=Ql,ft[40]=qh,ft[41]=Gu,ft[42]=Uh,ft[43]=Ei,ft[44]=_n,ft[45]=ps,ft[46]=Pn,ft[47]=mh,ft[48]=u0,ft[49]=ad,ft[50]=ll,ft[51]=cc,ft[52]=Et,ft[53]=I,ft[54]=Nt,ft[55]=Pt,ft[56]=al,ft[57]=Bh,ft[58]=uc,ft[59]=hh,ft[60]=se,ft[61]=Jt,ft[62]=hi,ft[63]=ma,ft[64]=Ue,ft[65]=ac,ft[66]=qi,ft[67]=ls,ft[68]=Cl,ft[69]=Dc,ft[70]=yu,ft[71]=ol,ft[72]=rt,ft[73]=_u,ft[74]=Rs,ft[75]=Ke,ft[76]=Cn,ft[77]=Nc,ft[78]=Kl,ft[79]=K,ft[80]=kt,ft[81]=qc,ft[82]=qn,ft[83]=pt,ft[84]=pe,ft[85]=fc,ft[86]=Su,ft[87]=yh,ft[88]=c0,ft[89]=Wu,ft[90]=ph,ft[91]=$1,ft[92]=tm,ft[93]=im,ft[94]=pp,ft[95]=r0,ft[96]=No,ft[97]=Rh,ft[98]=lc,ft[99]=Pi,ft[100]=rn,ft[101]=pi,ft[102]=Oi,ft[103]=wi,ft[104]=at,ft[105]=kr,ft[106]=So,ft[107]=qr,ft[108]=mo,ft[109]=Ts,ft[110]=Ai,ft[111]=Oo,ft[112]=pc,ft[113]=dc,ft[114]=zh,ft[115]=ul,ft[116]=bo,ft[117]=Yr,ft[118]=ya,ft[119]=Va,ft[120]=ye,ft[121]=d,ft[122]=Nr,ft[123]=Ar,ft[124]=eo,ft[125]=Zn,ft[126]=Wr,ft[127]=qo,ft[128]=Bo,ft[129]=ms,ft[130]=fh,ft[131]=D,ft[132]=ns,ft[133]=sa,ft[134]=W,ft[135]=ne,ft[136]=Ma,ft[137]=ra,ft[138]=Pa,ft[139]=La,ft[140]=Bs,ft[141]=Il,ft[142]=ga,ft[143]=uh,ft[144]=zs,ft[145]=qa,ft[146]=_a,ft[147]=cn,ft[148]=Wt,ft[149]=Ga,ft[150]=Vi,ft[151]=gh,ft[152]=f0,ft[153]=rm,ft[154]=xf,ft[155]=xf,ft[156]=fd,ft[157]=nm,ft[158]=Xo,ft[159]=ao;function vp(){return ln.byteLength/65536|0}function lm(n){n=n|0;var s=vp()|0,a=s+n|0;if(s<a&&a<65536){var g=new ArrayBuffer(re(a,65536)),k=new ui.Int8Array(g);k.set(p),p=k,p=new ui.Int8Array(g),Di=new ui.Int16Array(g),c=new ui.Int32Array(g),F=new ui.Uint8Array(g),mn=new ui.Uint16Array(g),$n=new ui.Uint32Array(g),new ui.Float32Array(g),Ao=new ui.Float64Array(g),ln=g,In.buffer=g}return s}return{__wasm_call_ctors:_p,WebpToSDL:Fc,memset:Jo,memcpy:Xr,malloc:ja,free:jr,__errno_location:sm,stackSave:Pf,stackRestore:am,stackAlloc:em,dynCall_vii:cd,dynCall_vi:mp,dynCall_ii:hd,dynCall_iii:Ef,dynCall_iiii:ud,dynCall_iiiiiii:ku,dynCall_viiii:cp,dynCall_viii:hp,dynCall_viiiiii:kf,dynCall_viiiii:tu,dynCall_viiiiiiiii:Vc,dynCall_jiiii:Af,dynCall_jiji:Af,__growWasmMemory:om}}for(var Rt=new Uint8Array(nt.buffer),bi=new Uint8Array(123),yi=25;yi>=0;--yi)bi[48+yi]=52+yi,bi[65+yi]=yi,bi[97+yi]=26+yi;bi[43]=62,bi[47]=63;function _i(ui,ji,ln){for(var In,ft,p=0,Di=ji,c=ln.length,F=ji+(c*3>>2)-(ln[c-2]=="=")-(ln[c-1]=="=");p<c;p+=4)In=bi[ln.charCodeAt(p+1)],ft=bi[ln.charCodeAt(p+2)],ui[Di++]=bi[ln.charCodeAt(p)]<<2|In>>4,Di<F&&(ui[Di++]=In<<4|ft>>2),Di<F&&(ui[Di++]=ft<<6|bi[ln.charCodeAt(p+3)])}return _i(Rt,1024,"TGlicmFyeSB2ZXJzaW9uIG1pc21hdGNoIQoAVW5hYmxlIHRvIHNldCB2aWRlbyBtb2RlICgzMmJwcCAlZHglZCkhCgBVbmFibGUgdG8gY3JlYXRlICVkeCVkIFJHQkEgc3VyZmFjZSEKAEVycm9yIGRlY29kaW5nIGltYWdlICglZCkKAAMEAwQEAgIEBAQCAQE="),_i(Rt,1184,"iguMC44LkguaC6oLygsKDIwMjA2MD4wTGAEAAQABAAEo"),_i(Rt,1232,"ERIAAQIDBAUQBgcICQoLDA0ODwIDBwMDCwAAAAAAAAAYBxcZKAYnKRYaJio4BTc5FRs2OiUrSARHSRQcNTtGSiQsWEVLNDwDV1kTHVZaIy1ETFVbMz1oAmdpEh5maiIuVFxDTWVrMj54AXd5U10RH2RsQk52eiEvdXsxP2NtUl4AdHxBTxAgYm4wc31RX0ByfmFvUHF/YHAAAAAAAAAAAP///////////////////////////////////////////7D2////////////3/H8///////////5/f3////////////0/P//////////6v7+///////////9///////////////2/v//////////7/3+///////////+//7////////////4/v//////////+//+///////////////////////////9/v//////////+/7+///////////+//7////////////+/f/+////////+v/+//7////////+/////////////////////////////////////////////////////////9n/////////////4fzx/f///v/////q+vH6/f/9/v/////+////////////3/7+///////////u/f7+///////////4/v//////////+f7////////////////////////////9////////////9/7////////////////////////////9/v///////////P/////////////////////////////+/v///////////f/////////////////////////////+/f//////////+v/////////////+/////////////////////////////////////////////////////////7r7+v//////////6vv0/v/////////7+/P9/v/+///////9/v//////////7P3+///////////7/f3+/v/////////+/v///////////v7+///////////////////////////+/////////////v7////////////+/////////////////////////////v////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////j/////////////+v78/v/////////4/vn9///////////9/f//////////9v39///////////8/vv+/v/////////+/P//////////+P79///////////9//7+///////////7/v//////////9fv+///////////9/f7////////////7/f///////////P3+/////////////v/////////////8////////////+f/+//////////////7//////////////f//////////+v///////////////////////////////////////////v///////////////////////////4CAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgP2I/v/k24CAgICAvYHy/+PV/9uAgIBqfuP81tH//4CAgAFi+P/s4v//gICAtYXu/t3q/5qAgIBOhsr3xrT/24CAgAG5+f/z/4CAgICAuJb3/+zggICAgIBNbtj/7OaAgICAgAFl+//x/4CAgICAqovx/OzR//+AgIAldMTz5P///4CAgAHM/v/1/4CAgICAz6D6/+6AgICAgIBmZ+f/06uAgICAgAGY/P/w/4CAgICAsYfz/+rhgICAgIBQgdP/wuCAgICAgAEB/4CAgICAgICA9gH/gICAgICAgID/gICAgICAgICAgMYj7d/Bu6KgkZs+gy3G3ayw3J383QFEL5LQlafdov/fgAGV8f/d4P//gICAuI3q/d7c/8eAgIBRY7XysL75yv//gAGB6P3WxfLE//+AY3nS+snG/8qAgIAXW6Pyqrv30v//gAHI9v/q/4CAgICAbbLx/+f1//+AgIAsgsn9zcD//4CAgAGE7/vb0f+lgICAXojh+9q+//+AgIAWZK71uqH/x4CAgAG2+f/o64CAgICAfI/x/+PqgICAgIAjTbX7wdP/zYCAgAGd9//s5///gICAeY3r/+Hj//+AgIAtY7z7w9n/4ICAgAEB+//V/4CAgICAywH4//+AgICAgICJAbH/4P+AgICAgP0J+PvP0P/AgICArw3g88G5+cb//4BJEavdobPsp//qgAFf9/3Ut///gICA71r0+tPR//+AgICbTcP4vMP//4CAgAEY7/va2//NgICAyTPb/8S6gICAgIBFLr7vydr/5ICAgAG/+///gICAgICA36X5/9X/gICAgICNfPj//4CAgICAgAEQ+P//gICAgICAviTm/+z/gICAgICVAf+AgICAgICAgAHi/4CAgICAgICA98D/gICAgICAgIDwgP+AgICAgICAgAGG/P//gICAgICA1T76//+AgICAgIA3Xf+AgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgMoY1eu6v9yg8K//fia26Km45K7/u4A9Lorbl7Lwqv/YgAFw5vrHv/ef//+Apm3k/NPX/66AgIAnTaLorLT1sv//gAE03PbGx/nc//+AfEq/87fB+t3//4AYR4Lbmqrztv//gAG24fnb8P/ggICAlZbi/NjN/6uAgIAcbKryt8L+3///gAFR5vzMy//AgICAe2bR97zE/+mAgIAUX5nzpK3/y4CAgAHe+P/Y1YCAgICAqK/2/OvN//+AgIAvdNf/09T//4CAgAF57P3U1v//gICAjVTV/MnK/9uAgIAqUKDworn/zYCAgAEB/4CAgICAgICA9AH/gICAgICAgIDuAf+AgICAgICAgOd4MFlzcXiYcJizQH6qdi5GX69Fj1BVUkibZzg6CqvavRENmHIaEaMswxUKrXkYUMMaPixAVZBHCiar1ZAiGqouNxOIoCHORz8UCHJy0AwJ4lEoC2C2VB0QJIa3WYliZWqllEi7ZIKdbyBLUEJmp2NKPijqgCk1CbLxjRoIa0orGpJJpjEXnUEmaaAzNB9zgGhPDBvZ/1cRB1dERyxyMw+6Fy8pDm62txURwkItGWbFvRcSFlhYk5YqLi3EzStht3VVJiOzPSc1yFcaFSvoqzgiM2hyZh1dTSccVas6pVpiQCIWdM4XIiumSWs2IBozAVErH0QZahZAqyThciITFWaEvBBMfD4STl9VOTIwM8FlI5/Xb1kubzyUH6zb5BUSb3BxTVWz/yZ4cigqAcT10QoZbVgrHYym1SUrmj0/HptDLUQB0WRQCCuaATMaR45OThD/gCLFqykoBWbTtwQB3TMyEajRwBcZUoofJKsbpiYs5UNXOqlScxo7sz87WrQ7pl1JmigoFXSP0SInry8PELci3zEtty4RIbcGYg8gtzkuFhiAATYRJUEgSXMcgBeAzSgDCXMzwBIG31clCXM7TUAVL2g3LNoJNjWC4kBaRs0oKRcaOTY5cLgFKSam1R4iGoWYdAoghicTNd0aciBJ/x8JQeoCDwF2SUsgDDPA/6ArM1gfI0NmVTe6VTgVF287zS0lwDcmRnxJZgEiYn1iKlhoVXWvUl9UNVmAZHFlLUtPey8zgFGrATkRBUdmOTUpMSYhDXk5SRoBVSkKQ4pNblovcnMVAgpm/6YXBmUdEApVgGXEGjkSCmZm1SIUK3UUDySjgEQBGmY9RyUiNR/zwEU8RyZJdxzeJUQtgCIBLwv1qz4RE0aSVTc+RiUrJZpko1WgAT8JXIgcQCDJVUsPCQlA/7h3EFYGHAVA/xn4ATgIEYSJ/zd0gDoPFFKHORp5KKQyH4mahRkj2jNnLIODex8GnlYoQIeU4C23gBYaEYPwmg4B0S0QFVtA3gcBxTgVJ5s8ihdm1VMMDTbA/0QvHFUaVVWAgCCSqxILBz+QqwQE9iMbCpKuqwwagL5QI2O0UH42LVV+L1ewMykUIGVLgIt2knSAVTgpD7DsVSUJPkceEXd2/xESimUmPIo3RisajpIkEx6r/2EbFIotPT7bAVG8QCApFHWXjhQVo3ATDD3DgDAEGA=="),_i(Rt,4417,"Af8C/gMEBv0F/Pv6B/kI+Pc="),_i(Rt,4448,"BAUGBwgJCgoLDA0ODxARERITFBQVFRYWFxcYGRkaGxwdHh8gISIjJCUlJicoKSorLC0uLi8wMTIzNDU2Nzg5Ojs8PT4/QEFCQ0RFRkdISUpLTExNTk9QUVJTVFVWV1hZW11fYGJkZWZoamxucHJ0dnp8foCChIaIioyPkZSXmp0EAAUABgAHAAgACQAKAAsADAANAA4ADwAQABEAEgATABQAFQAWABcAGAAZABoAGwAcAB0AHgAfACAAIQAiACMAJAAlACYAJwAoACkAKgArACwALQAuAC8AMAAxADIAMwA0ADUANgA3ADgAOQA6ADwAPgBAAEIARABGAEgASgBMAE4AUABSAFQAVgBYAFoAXABeAGAAYgBkAGYAaABqAGwAbgBwAHIAdAB3AHoAfQCAAIMAhgCJAIwAjwCSAJUAmACbAJ4AoQCkAKcAqgCtALEAtQC5AL0AwQDFAMkAzQDRANUA2QDdAOEA5QDqAO8A9QD5AP4AAwEIAQ0BEgEXARwBCAcGBAQCAgIBAQEBRnJhbWUgc2V0dXAgZmFpbGVkAAACCA=="),_i(Rt,4882,"BAAIAAwAgACEAIgAjAAAAQQBCAEMAYABhAGIAYwBQ291bGQgbm90IGRlY29kZSBhbHBoYSBkYXRhLgB0aHJlYWQgaW5pdGlhbGl6YXRpb24gZmFpbGVkLgBubyBtZW1vcnkgZHVyaW5nIGZyYW1lIGluaXRpYWxpemF0aW9uLgBPSwBudWxsIFZQOElvIHBhc3NlZCB0byBWUDhHZXRIZWFkZXJzKCkAVHJ1bmNhdGVkIGhlYWRlci4ASW5jb3JyZWN0IGtleWZyYW1lIHBhcmFtZXRlcnMuAEZyYW1lIG5vdCBkaXNwbGF5YWJsZS4AY2Fubm90IHBhcnNlIHBpY3R1cmUgaGVhZGVyAEJhZCBjb2RlIHdvcmQAYmFkIHBhcnRpdGlvbiBsZW5ndGgAY2Fubm90IHBhcnNlIHNlZ21lbnQgaGVhZGVyAGNhbm5vdCBwYXJzZSBmaWx0ZXIgaGVhZGVyAGNhbm5vdCBwYXJzZSBwYXJ0aXRpb25zAE5vdCBhIGtleSBmcmFtZS4ATlVMTCBWUDhJbyBwYXJhbWV0ZXIgaW4gVlA4RGVjb2RlKCku"),_i(Rt,5329,"AQQIBQIDBgkMDQoHCw4PrZSMALCbjIcAtJ2NhoIA/v7z5sSxmYyFgoEAUHJlbWF0dXJlIGVuZC1vZi1wYXJ0aXRpb24wIGVuY291bnRlcmVkLgBQcmVtYXR1cmUgZW5kLW9mLWZpbGUgZW5jb3VudGVyZWQuAE91dHB1dCBhYm9ydGVkLgBSSUZGAFZQOFg="),_i(Rt,5488,"gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBgoOEhYaHiImKi4yNjo+QkZKTlJWWl5iZmpucnZ6foKGio6SlpqeoqaqrrK2ur7CxsrO0tba3uLm6u7y9vr/AwcLDxMXGx8jJysvMzc7P0NHS09TV1tfY2drb3N3e3+Dh4uPk5ebn6Onq6+zt7u/w8fLz9PX29/j5+vv8/f7/AAECAwQFBgcICQoLDA0ODxAREhMUFRYXGBkaGxwdHh8gISIjJCUmJygpKissLS4vMDEyMzQ1Njc4OTo7PD0+P0BBQkNERUZHSElKS0xNTk9QUVJTVFVWV1hZWltcXV5fYGFiY2RlZmdoaWprbG1ub3BxcnN0dXZ3eHl6e3x9fn9/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/AAAAAAAAAADw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8fLz9PX29/j5+vv8/f7/AAECAwQFBgcICQoLDA0ODw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw=="),_i(Rt,8032,"AQIDBAUGBwgJCgsMDQ4PEBESExQVFhcYGRobHB0eHyAhIiMkJSYnKCkqKywtLi8wMTIzNDU2Nzg5Ojs8PT4/QEFCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaW1xdXl9gYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXp7fH1+f4CBgoOEhYaHiImKi4yNjo+QkZKTlJWWl5iZmpucnZ6foKGio6SlpqeoqaqrrK2ur7CxsrO0tba3uLm6u7y9vr/AwcLDxMXGx8jJysvMzc7P0NHS09TV1tfY2drb3N3e3+Dh4uPk5ebn6Onq6+zt7u/w8fLz9PX29/j5+vv8/f7/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////AAD//v38+/r5+Pf29fTz8vHw7+7t7Ovq6ejn5uXk4+Lh4N/e3dzb2tnY19bV1NPS0dDPzs3My8rJyMfGxcTDwsHAv769vLu6ubi3trW0s7KxsK+urayrqqmop6alpKOioaCfnp2cm5qZmJeWlZSTkpGQj46NjIuKiYiHhoWEg4KBgH9+fXx7enl4d3Z1dHNycXBvbm1sa2ppaGdmZWRjYmFgX15dXFtaWVhXVlVUU1JRUE9OTUxLSklIR0ZFRENCQUA/Pj08Ozo5ODc2NTQzMjEwLy4tLCsqKSgnJiUkIyIhIB8eHRwbGhkYFxYVFBMSERAPDg0MCwoJCAcGBQQDAgEAAQIDBAUGBwgJCgsMDQ4PEBESExQVFhcYGRobHB0eHyAhIiMkJSYnKCkqKywtLi8wMTIzNDU2Nzg5Ojs8PT4/QEFCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaW1xdXl9gYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXp7fH1+f4CBgoOEhYaHiImKi4yNjo+QkZKTlJWWl5iZmpucnZ6foKGio6SlpqeoqaqrrK2ur7CxsrO0tba3uLm6u7y9vr/AwcLDxMXGx8jJysvMzc7P0NHS09TV1tfY2drb3N3e3+Dh4uPk5ebn6Onq6+zt7u/w8fLz9PX29/j5+vv8/f7/AAcGBgUFBQUEBAQEBAQEBAMDAwMDAwMDAwMDAwMDAwMCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEAf3+/f5+/33+Pn6+/z9/vf4ePl5+nr7e/x8/X3+fv93+Dh4uPk5ebn6Onq6+zt7u/w8fLz9PX29/j5+vv8/f7f4GDhYeJi42PkZOVl5mbnZ+ho6Wnqautr7Gztbe5u72/wcPFx8nLzc/R09XX2dvd3+Hj5efp6+3v8fP19/n7/X8AAAAAAQAAAAMAAAAHAAAADwAAAB8AAAA/AAAAfwAAAP8AAAD/AQAA/wMAAP8HAAD/DwAA/x8AAP8/AAD/fwAA//8AAP//AQD//wMA//8HAP//DwD//x8A//8/AP//fwD///8="),_i(Rt,9424,"MFLhDYYYswPLrF93amKIHFVcOGgouLMU+P6FSku43UmX8/xkiQJVXAAAKUrawX4Nq7dAWX1XklRyyhlOaYzTOGXuAQxfdaEyUvY3VDIsu1qxV6oP5zP1c9ruX2jizGN1gw6Zbu2nMEfG2cBPPBVrSfoDFE8M+xpUMguZcxzL1yYGN8xv2He7LCovdnXdzCVkYVSzJBWHfQqoFAQiZ78eFIMVtFbjAuVzb7HKREJNJij7rrpz7etQCvu2ah0L1DoNaDvbNYMeCCuVa8538OWBUbw7hXiUlJ8APO3lJy0rICAgMFgweAAobnVsbCkAAAAAEQAKABEREQAAAAAFAAAAAAAACQAAAAALAAAAAAAAAAARAA8KERERAwoHAAEACQsLAAAJBgsAAAsABhEAAAARERE="),_i(Rt,9745,"CwAAAAAAAAAAEQAKChEREQAKAAACAAkLAAAACQALAAAL"),_i(Rt,9803,"DA=="),_i(Rt,9815,"DAAAAAAMAAAAAAkMAAAAAAAMAAAM"),_i(Rt,9861,"Dg=="),_i(Rt,9873,"DQAAAAQNAAAAAAkOAAAAAAAOAAAO"),_i(Rt,9919,"EA=="),_i(Rt,9931,"DwAAAAAPAAAAAAkQAAAAAAAQAAAQAAASAAAAEhIS"),_i(Rt,9986,"EgAAABISEgAAAAAAAAk="),_i(Rt,10035,"Cw=="),_i(Rt,10047,"CgAAAAAKAAAAAAkLAAAAAAALAAAL"),_i(Rt,10093,"DA=="),_i(Rt,10105,"DAAAAAAMAAAAAAkMAAAAAAAMAAAMAAAwMTIzNDU2Nzg5QUJDREVG+Cg="),_i(Rt,10160,"4BQAAOQUAADpFAAA7xQAAMAnAADEJwAAbBkAAOAdAABfHwAAXyIAANgnAADcJwAA4CcAAOQnAADoJwAA7CcAAPAnAACXAAAAmAAAAJkAAACaAAAAmwAAAJw="),_i(Rt,10428,"8Cw="),_i(Rt,10488,"BQ=="),_i(Rt,10500,"nQ=="),_i(Rt,10524,"ngAAAJ8AAAAQLQ=="),_i(Rt,10548,"Ag=="),_i(Rt,10563,"//////8="),zt({Int8Array,Int16Array,Int32Array,Uint8Array,Uint16Array,Uint32Array,Float32Array,Float64Array,NaN:NaN,Infinity:1/0,Math},Oe,nt.buffer)}(_s,X,Z)},instantiate:function(U,$){return{then:function(ge){var Oe=new V.Module(U);ge({instance:new V.Instance(Oe)})}}},RuntimeError:Error};O=[],typeof V!="object"&&Kt("no native wasm support detected");var X,Z=new V.Table({initial:160,maximum:160,element:"anyfunc"}),te=!1;function J(U,$){U||Kt("Assertion failed: "+$)}function ie(U){var $=i["_"+U];return J($,"Cannot call unknown function "+U+", make sure it is exported"),$}function Ee(U,$,ge,Oe,nt){var Ct={string:function(ln){var In=0;if(ln!=null&&ln!==0){var ft=(ln.length<<2)+1;In=cu(ft),ot(ln,In,ft)}return In},array:function(ln){var In=cu(ln.length);return It(ln,In),In}};function zt(ln){return $==="string"?ve(ln):$==="boolean"?Boolean(ln):ln}var Rt=ie(U),bi=[],yi=0;if(Oe)for(var _i=0;_i<Oe.length;_i++){var ui=Ct[ge[_i]];ui?(yi===0&&(yi=uu()),bi[_i]=ui(Oe[_i])):bi[_i]=Oe[_i]}var ji=Rt.apply(null,bi);return ji=zt(ji),yi!==0&&xl(yi),ji}function Pe(U,$,ge,Oe){ge=ge||[];var nt=ge.every(function(zt){return zt==="number"}),Ct=$!=="string";return Ct&&nt&&!Oe?ie(U):function(){return Ee(U,$,ge,arguments)}}var de=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0;function Te(U,$,ge){for(var Oe=$+ge,nt=$;U[nt]&&!(nt>=Oe);)++nt;if(nt-$>16&&U.subarray&&de)return de.decode(U.subarray($,nt));for(var Ct="";$<nt;){var zt=U[$++];if(!(zt&128)){Ct+=String.fromCharCode(zt);continue}var Rt=U[$++]&63;if((zt&224)==192){Ct+=String.fromCharCode((zt&31)<<6|Rt);continue}var bi=U[$++]&63;if((zt&240)==224?zt=(zt&15)<<12|Rt<<6|bi:zt=(zt&7)<<18|Rt<<12|bi<<6|U[$++]&63,zt<65536)Ct+=String.fromCharCode(zt);else{var yi=zt-65536;Ct+=String.fromCharCode(55296|yi>>10,56320|yi&1023)}}return Ct}function ve(U,$){return U?Te(le,U,$):""}function _e(U,$,ge,Oe){if(!(Oe>0))return 0;for(var nt=ge,Ct=ge+Oe-1,zt=0;zt<U.length;++zt){var Rt=U.charCodeAt(zt);if(Rt>=55296&&Rt<=57343){var bi=U.charCodeAt(++zt);Rt=65536+((Rt&1023)<<10)|bi&1023}if(Rt<=127){if(ge>=Ct)break;$[ge++]=Rt}else if(Rt<=2047){if(ge+1>=Ct)break;$[ge++]=192|Rt>>6,$[ge++]=128|Rt&63}else if(Rt<=65535){if(ge+2>=Ct)break;$[ge++]=224|Rt>>12,$[ge++]=128|Rt>>6&63,$[ge++]=128|Rt&63}else{if(ge+3>=Ct)break;$[ge++]=240|Rt>>18,$[ge++]=128|Rt>>12&63,$[ge++]=128|Rt>>6&63,$[ge++]=128|Rt&63}}return $[ge]=0,ge-nt}function ot(U,$,ge){return _e(U,le,$,ge)}function it(U){for(var $=0,ge=0;ge<U.length;++ge){var Oe=U.charCodeAt(ge);Oe>=55296&&Oe<=57343&&(Oe=65536+((Oe&1023)<<10)|U.charCodeAt(++ge)&1023),Oe<=127?++$:Oe<=2047?$+=2:Oe<=65535?$+=3:$+=4}return $}typeof TextDecoder<"u"&&new TextDecoder("utf-16le");function It(U,$){Re.set(U,$)}var Xe=65536;function we(U,$){return U%$>0&&(U+=$-U%$),U}var Ce,Re,le,Se,he,me,Be;function We(U){Ce=U,i.HEAP8=Re=new Int8Array(U),i.HEAP16=Se=new Int16Array(U),i.HEAP32=he=new Int32Array(U),i.HEAPU8=le=new Uint8Array(U),i.HEAPU16=new Uint16Array(U),i.HEAPU32=me=new Uint32Array(U),i.HEAPF32=Be=new Float32Array(U),i.HEAPF64=new Float64Array(U)}var st=5255072,Ye=12032,gt=i.INITIAL_MEMORY||67108864;i.wasmMemory?X=i.wasmMemory:X=new V.Memory({initial:gt/Xe,maximum:2147483648/Xe}),X&&(Ce=X.buffer),gt=Ce.byteLength,We(Ce),he[Ye>>2]=st;function Mt(U){for(;U.length>0;){var $=U.shift();if(typeof $=="function"){$(i);continue}var ge=$.func;typeof ge=="number"?$.arg===void 0?i.dynCall_v(ge):i.dynCall_vi(ge,$.arg):ge($.arg===void 0?null:$.arg)}}var ri=[],ut=[],wt=[],bt=[];function Je(){if(i.preRun)for(typeof i.preRun=="function"&&(i.preRun=[i.preRun]);i.preRun.length;)Si(i.preRun.shift());Mt(ri)}function ei(){!i.noFSInit&&!He.init.initialized&&He.init(),Mt(ut)}function li(){He.ignorePermissions=!1,Mt(wt)}function Qt(){if(i.postRun)for(typeof i.postRun=="function"&&(i.postRun=[i.postRun]);i.postRun.length;)Ti(i.postRun.shift());Mt(bt)}function Si(U){ri.unshift(U)}function Ti(U){bt.unshift(U)}if((!Math.imul||Math.imul(4294967295,5)!==-5)&&(Math.imul=function($,ge){var Oe=$>>>16,nt=$&65535,Ct=ge>>>16,zt=ge&65535;return nt*zt+(Oe*zt+nt*Ct<<16)|0}),!Math.fround){var Xt=new Float32Array(1);Math.fround=function(U){return Xt[0]=U,Xt[0]}}Math.clz32||(Math.clz32=function(U){var $=32,ge=U>>16;return ge&&($-=16,U=ge),ge=U>>8,ge&&($-=8,U=ge),ge=U>>4,ge&&($-=4,U=ge),ge=U>>2,ge&&($-=2,U=ge),ge=U>>1,ge?$-2:$-U}),Math.trunc||(Math.trunc=function(U){return U<0?Math.ceil(U):Math.floor(U)});var mi=Math.abs,Zi=Math.ceil,Ci=Math.floor,ti=Math.min,Me=0,Q=null;function ae(U){return U}function $e(U){Me++,i.monitorRunDependencies&&i.monitorRunDependencies(Me)}function _t(U){if(Me--,i.monitorRunDependencies&&i.monitorRunDependencies(Me),Me==0&&Q){var $=Q;Q=null,$()}}i.preloadedImages={},i.preloadedAudios={};function Kt(U){i.onAbort&&i.onAbort(U),U+="",v(U),te=!0,U="abort("+U+"). Build with -s ASSERTIONS=1 for more info.";var $=new V.RuntimeError(U);throw $}function di(U,$){return String.prototype.startsWith?U.startsWith($):U.indexOf($)===0}var wn="data:application/octet-stream;base64,";function Ln(U){return di(U,wn)}var fn="webp.wasm";Ln(fn)||(fn=m(fn));function Bi(){try{if(O)return new Uint8Array(O);var U=Vs(fn);if(U)return U;if(!_)throw"both async and sync fetching of the wasm failed"}catch($){Kt($)}}function Ki(){return!O&&l&&typeof fetch=="function"?fetch(fn,{credentials:"same-origin"}).then(function(U){if(!U.ok)throw"failed to load wasm binary file at '"+fn+"'";return U.arrayBuffer()}).catch(function(){return Bi()}):e.resolve().then(Bi)}function Hn(){var U={env:_s,wasi_snapshot_preview1:_s};function $(zt,Rt){var bi=zt.exports;i.asm=bi,_t()}$e();function ge(zt){$(zt.instance)}function Oe(zt){return Ki().then(function(Rt){return V.instantiate(Rt,U)}).then(zt,function(Rt){v("failed to asynchronously prepare wasm: "+Rt),Kt(Rt)})}function nt(){if(!O&&typeof V.instantiateStreaming=="function"&&!Ln(fn)&&typeof fetch=="function")fetch(fn,{credentials:"same-origin"}).then(function(zt){var Rt=V.instantiateStreaming(zt,U);return Rt.then(ge,function(bi){return v("wasm streaming compile failed: "+bi),v("falling back to ArrayBuffer instantiation"),Oe(ge)})});else return Oe(ge)}if(i.instantiateWasm)try{var Ct=i.instantiateWasm(U,$);return Ct}catch(zt){return v("Module.instantiateWasm callback failed with error: "+zt),!1}return nt(),{}}var Gn,Zr;ut.push({func:function(){Ca()}});function zn(U){return U}function dn(U){var $=/\b_Z[\w\d_]+/g;return U.replace($,function(ge){var Oe=ge;return ge===Oe?ge:Oe+" ["+ge+"]"})}function gn(){var U=new Error;if(!U.stack){try{throw new Error}catch($){U=$}if(!U.stack)return"(no stack trace available)"}return U.stack.toString()}function on(){var U=gn();return i.extraStackTrace&&(U+=`
`+i.extraStackTrace()),dn(U)}function Sr(U){return he[wl()>>2]=U,U}var Wn={splitPath:function(U){var $=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/;return $.exec(U).slice(1)},normalizeArray:function(U,$){for(var ge=0,Oe=U.length-1;Oe>=0;Oe--){var nt=U[Oe];nt==="."?U.splice(Oe,1):nt===".."?(U.splice(Oe,1),ge++):ge&&(U.splice(Oe,1),ge--)}if($)for(;ge;ge--)U.unshift("..");return U},normalize:function(U){var $=U.charAt(0)==="/",ge=U.substr(-1)==="/";return U=Wn.normalizeArray(U.split("/").filter(function(Oe){return!!Oe}),!$).join("/"),!U&&!$&&(U="."),U&&ge&&(U+="/"),($?"/":"")+U},dirname:function(U){var $=Wn.splitPath(U),ge=$[0],Oe=$[1];return!ge&&!Oe?".":(Oe&&(Oe=Oe.substr(0,Oe.length-1)),ge+Oe)},basename:function(U){if(U==="/")return"/";U=Wn.normalize(U),U=U.replace(/\/$/,"");var $=U.lastIndexOf("/");return $===-1?U:U.substr($+1)},extname:function(U){return Wn.splitPath(U)[3]},join:function(){var U=Array.prototype.slice.call(arguments,0);return Wn.normalize(U.join("/"))},join2:function(U,$){return Wn.normalize(U+"/"+$)}},gr={resolve:function(){for(var U="",$=!1,ge=arguments.length-1;ge>=-1&&!$;ge--){var Oe=ge>=0?arguments[ge]:He.cwd();if(typeof Oe!="string")throw new TypeError("Arguments to path.resolve must be strings");if(!Oe)return"";U=Oe+"/"+U,$=Oe.charAt(0)==="/"}return U=Wn.normalizeArray(U.split("/").filter(function(nt){return!!nt}),!$).join("/"),($?"/":"")+U||"."},relative:function(U,$){U=gr.resolve(U).substr(1),$=gr.resolve($).substr(1);function ge(yi){for(var _i=0;_i<yi.length&&yi[_i]==="";_i++);for(var ui=yi.length-1;ui>=0&&yi[ui]==="";ui--);return _i>ui?[]:yi.slice(_i,ui-_i+1)}for(var Oe=ge(U.split("/")),nt=ge($.split("/")),Ct=Math.min(Oe.length,nt.length),zt=Ct,Rt=0;Rt<Ct;Rt++)if(Oe[Rt]!==nt[Rt]){zt=Rt;break}for(var bi=[],Rt=zt;Rt<Oe.length;Rt++)bi.push("..");return bi=bi.concat(nt.slice(zt)),bi.join("/")}},Kr={ttys:[],init:function(){},shutdown:function(){},register:function(U,$){Kr.ttys[U]={input:[],output:[],ops:$},He.registerDevice(U,Kr.stream_ops)},stream_ops:{open:function(U){var $=Kr.ttys[U.node.rdev];if(!$)throw new He.ErrnoError(43);U.tty=$,U.seekable=!1},close:function(U){U.tty.ops.flush(U.tty)},flush:function(U){U.tty.ops.flush(U.tty)},read:function(U,$,ge,Oe,nt){if(!U.tty||!U.tty.ops.get_char)throw new He.ErrnoError(60);for(var Ct=0,zt=0;zt<Oe;zt++){var Rt;try{Rt=U.tty.ops.get_char(U.tty)}catch{throw new He.ErrnoError(29)}if(Rt===void 0&&Ct===0)throw new He.ErrnoError(6);if(Rt==null)break;Ct++,$[ge+zt]=Rt}return Ct&&(U.node.timestamp=Date.now()),Ct},write:function(U,$,ge,Oe,nt){if(!U.tty||!U.tty.ops.put_char)throw new He.ErrnoError(60);try{for(var Ct=0;Ct<Oe;Ct++)U.tty.ops.put_char(U.tty,$[ge+Ct])}catch{throw new He.ErrnoError(29)}return Oe&&(U.node.timestamp=Date.now()),Ct}},default_tty_ops:{get_char:function(U){if(!U.input.length){var $=null;if(typeof window<"u"&&typeof window.prompt=="function"?($=window.prompt("Input: "),$!==null&&($+=`
`)):typeof readline=="function"&&($=readline(),$!==null&&($+=`
`)),!$)return null;U.input=Zo($,!0)}return U.input.shift()},put_char:function(U,$){$===null||$===10?(b(Te(U.output,0)),U.output=[]):$!=0&&U.output.push($)},flush:function(U){U.output&&U.output.length>0&&(b(Te(U.output,0)),U.output=[])}},default_tty1_ops:{put_char:function(U,$){$===null||$===10?(v(Te(U.output,0)),U.output=[]):$!=0&&U.output.push($)},flush:function(U){U.output&&U.output.length>0&&(v(Te(U.output,0)),U.output=[])}}},an={ops_table:null,mount:function(U){return an.createNode(null,"/",16895,0)},createNode:function(U,$,ge,Oe){if(He.isBlkdev(ge)||He.isFIFO(ge))throw new He.ErrnoError(63);an.ops_table||(an.ops_table={dir:{node:{getattr:an.node_ops.getattr,setattr:an.node_ops.setattr,lookup:an.node_ops.lookup,mknod:an.node_ops.mknod,rename:an.node_ops.rename,unlink:an.node_ops.unlink,rmdir:an.node_ops.rmdir,readdir:an.node_ops.readdir,symlink:an.node_ops.symlink},stream:{llseek:an.stream_ops.llseek}},file:{node:{getattr:an.node_ops.getattr,setattr:an.node_ops.setattr},stream:{llseek:an.stream_ops.llseek,read:an.stream_ops.read,write:an.stream_ops.write,allocate:an.stream_ops.allocate,mmap:an.stream_ops.mmap,msync:an.stream_ops.msync}},link:{node:{getattr:an.node_ops.getattr,setattr:an.node_ops.setattr,readlink:an.node_ops.readlink},stream:{}},chrdev:{node:{getattr:an.node_ops.getattr,setattr:an.node_ops.setattr},stream:He.chrdev_stream_ops}});var nt=He.createNode(U,$,ge,Oe);return He.isDir(nt.mode)?(nt.node_ops=an.ops_table.dir.node,nt.stream_ops=an.ops_table.dir.stream,nt.contents={}):He.isFile(nt.mode)?(nt.node_ops=an.ops_table.file.node,nt.stream_ops=an.ops_table.file.stream,nt.usedBytes=0,nt.contents=null):He.isLink(nt.mode)?(nt.node_ops=an.ops_table.link.node,nt.stream_ops=an.ops_table.link.stream):He.isChrdev(nt.mode)&&(nt.node_ops=an.ops_table.chrdev.node,nt.stream_ops=an.ops_table.chrdev.stream),nt.timestamp=Date.now(),U&&(U.contents[$]=nt),nt},getFileDataAsRegularArray:function(U){if(U.contents&&U.contents.subarray){for(var $=[],ge=0;ge<U.usedBytes;++ge)$.push(U.contents[ge]);return $}return U.contents},getFileDataAsTypedArray:function(U){return U.contents?U.contents.subarray?U.contents.subarray(0,U.usedBytes):new Uint8Array(U.contents):new Uint8Array(0)},expandFileStorage:function(U,$){var ge=U.contents?U.contents.length:0;if(!(ge>=$)){var Oe=1024*1024;$=Math.max($,ge*(ge<Oe?2:1.125)>>>0),ge!=0&&($=Math.max($,256));var nt=U.contents;U.contents=new Uint8Array($),U.usedBytes>0&&U.contents.set(nt.subarray(0,U.usedBytes),0)}},resizeFileStorage:function(U,$){if(U.usedBytes!=$){if($==0){U.contents=null,U.usedBytes=0;return}if(!U.contents||U.contents.subarray){var ge=U.contents;U.contents=new Uint8Array($),ge&&U.contents.set(ge.subarray(0,Math.min($,U.usedBytes))),U.usedBytes=$;return}if(U.contents||(U.contents=[]),U.contents.length>$)U.contents.length=$;else for(;U.contents.length<$;)U.contents.push(0);U.usedBytes=$}},node_ops:{getattr:function(U){var $={};return $.dev=He.isChrdev(U.mode)?U.id:1,$.ino=U.id,$.mode=U.mode,$.nlink=1,$.uid=0,$.gid=0,$.rdev=U.rdev,He.isDir(U.mode)?$.size=4096:He.isFile(U.mode)?$.size=U.usedBytes:He.isLink(U.mode)?$.size=U.link.length:$.size=0,$.atime=new Date(U.timestamp),$.mtime=new Date(U.timestamp),$.ctime=new Date(U.timestamp),$.blksize=4096,$.blocks=Math.ceil($.size/$.blksize),$},setattr:function(U,$){$.mode!==void 0&&(U.mode=$.mode),$.timestamp!==void 0&&(U.timestamp=$.timestamp),$.size!==void 0&&an.resizeFileStorage(U,$.size)},lookup:function(U,$){throw He.genericErrors[44]},mknod:function(U,$,ge,Oe){return an.createNode(U,$,ge,Oe)},rename:function(U,$,ge){if(He.isDir(U.mode)){var Oe;try{Oe=He.lookupNode($,ge)}catch{}if(Oe)for(var nt in Oe.contents)throw new He.ErrnoError(55)}delete U.parent.contents[U.name],U.name=ge,$.contents[ge]=U,U.parent=$},unlink:function(U,$){delete U.contents[$]},rmdir:function(U,$){var ge=He.lookupNode(U,$);for(var Oe in ge.contents)throw new He.ErrnoError(55);delete U.contents[$]},readdir:function(U){var $=[".",".."];for(var ge in U.contents)!U.contents.hasOwnProperty(ge)||$.push(ge);return $},symlink:function(U,$,ge){var Oe=an.createNode(U,$,41471,0);return Oe.link=ge,Oe},readlink:function(U){if(!He.isLink(U.mode))throw new He.ErrnoError(28);return U.link}},stream_ops:{read:function(U,$,ge,Oe,nt){var Ct=U.node.contents;if(nt>=U.node.usedBytes)return 0;var zt=Math.min(U.node.usedBytes-nt,Oe);if(zt>8&&Ct.subarray)$.set(Ct.subarray(nt,nt+zt),ge);else for(var Rt=0;Rt<zt;Rt++)$[ge+Rt]=Ct[nt+Rt];return zt},write:function(U,$,ge,Oe,nt,Ct){if($.buffer===Re.buffer&&(Ct=!1),!Oe)return 0;var zt=U.node;if(zt.timestamp=Date.now(),$.subarray&&(!zt.contents||zt.contents.subarray)){if(Ct)return zt.contents=$.subarray(ge,ge+Oe),zt.usedBytes=Oe,Oe;if(zt.usedBytes===0&&nt===0)return zt.contents=$.slice(ge,ge+Oe),zt.usedBytes=Oe,Oe;if(nt+Oe<=zt.usedBytes)return zt.contents.set($.subarray(ge,ge+Oe),nt),Oe}if(an.expandFileStorage(zt,nt+Oe),zt.contents.subarray&&$.subarray)zt.contents.set($.subarray(ge,ge+Oe),nt);else for(var Rt=0;Rt<Oe;Rt++)zt.contents[nt+Rt]=$[ge+Rt];return zt.usedBytes=Math.max(zt.usedBytes,nt+Oe),Oe},llseek:function(U,$,ge){var Oe=$;if(ge===1?Oe+=U.position:ge===2&&He.isFile(U.node.mode)&&(Oe+=U.node.usedBytes),Oe<0)throw new He.ErrnoError(28);return Oe},allocate:function(U,$,ge){an.expandFileStorage(U.node,$+ge),U.node.usedBytes=Math.max(U.node.usedBytes,$+ge)},mmap:function(U,$,ge,Oe,nt,Ct){if(J($===0),!He.isFile(U.node.mode))throw new He.ErrnoError(43);var zt,Rt,bi=U.node.contents;if(!(Ct&2)&&bi.buffer===Ce)Rt=!1,zt=bi.byteOffset;else{if((Oe>0||Oe+ge<bi.length)&&(bi.subarray?bi=bi.subarray(Oe,Oe+ge):bi=Array.prototype.slice.call(bi,Oe,Oe+ge)),Rt=!0,zt=He.mmapAlloc(ge),!zt)throw new He.ErrnoError(48);Re.set(bi,zt)}return{ptr:zt,allocated:Rt}},msync:function(U,$,ge,Oe,nt){if(!He.isFile(U.node.mode))throw new He.ErrnoError(43);return nt&2||an.stream_ops.write(U,$,0,Oe,ge,!1),0}}},He={root:null,mounts:[],devices:{},streams:[],nextInode:1,nameTable:null,currentPath:"/",initialized:!1,ignorePermissions:!0,trackingDelegate:{},tracking:{openFlags:{READ:1,WRITE:2}},ErrnoError:null,genericErrors:{},filesystems:null,syncFSRequests:0,handleFSError:function(U){if(!(U instanceof He.ErrnoError))throw U+" : "+on();return Sr(U.errno)},lookupPath:function(U,$){if(U=gr.resolve(He.cwd(),U),$=$||{},!U)return{path:"",node:null};var ge={follow_mount:!0,recurse_count:0};for(var Oe in ge)$[Oe]===void 0&&($[Oe]=ge[Oe]);if($.recurse_count>8)throw new He.ErrnoError(32);for(var nt=Wn.normalizeArray(U.split("/").filter(function(ji){return!!ji}),!1),Ct=He.root,zt="/",Rt=0;Rt<nt.length;Rt++){var bi=Rt===nt.length-1;if(bi&&$.parent)break;if(Ct=He.lookupNode(Ct,nt[Rt]),zt=Wn.join2(zt,nt[Rt]),He.isMountpoint(Ct)&&(!bi||bi&&$.follow_mount)&&(Ct=Ct.mounted.root),!bi||$.follow)for(var yi=0;He.isLink(Ct.mode);){var _i=He.readlink(zt);zt=gr.resolve(Wn.dirname(zt),_i);var ui=He.lookupPath(zt,{recurse_count:$.recurse_count});if(Ct=ui.node,yi++>40)throw new He.ErrnoError(32)}}return{path:zt,node:Ct}},getPath:function(U){for(var $;;){if(He.isRoot(U)){var ge=U.mount.mountpoint;return $?ge[ge.length-1]!=="/"?ge+"/"+$:ge+$:ge}$=$?U.name+"/"+$:U.name,U=U.parent}},hashName:function(U,$){for(var ge=0,Oe=0;Oe<$.length;Oe++)ge=(ge<<5)-ge+$.charCodeAt(Oe)|0;return(U+ge>>>0)%He.nameTable.length},hashAddNode:function(U){var $=He.hashName(U.parent.id,U.name);U.name_next=He.nameTable[$],He.nameTable[$]=U},hashRemoveNode:function(U){var $=He.hashName(U.parent.id,U.name);if(He.nameTable[$]===U)He.nameTable[$]=U.name_next;else for(var ge=He.nameTable[$];ge;){if(ge.name_next===U){ge.name_next=U.name_next;break}ge=ge.name_next}},lookupNode:function(U,$){var ge=He.mayLookup(U);if(ge)throw new He.ErrnoError(ge,U);for(var Oe=He.hashName(U.id,$),nt=He.nameTable[Oe];nt;nt=nt.name_next){var Ct=nt.name;if(nt.parent.id===U.id&&Ct===$)return nt}return He.lookup(U,$)},createNode:function(U,$,ge,Oe){var nt=new He.FSNode(U,$,ge,Oe);return He.hashAddNode(nt),nt},destroyNode:function(U){He.hashRemoveNode(U)},isRoot:function(U){return U===U.parent},isMountpoint:function(U){return!!U.mounted},isFile:function(U){return(U&61440)===32768},isDir:function(U){return(U&61440)===16384},isLink:function(U){return(U&61440)===40960},isChrdev:function(U){return(U&61440)===8192},isBlkdev:function(U){return(U&61440)===24576},isFIFO:function(U){return(U&61440)===4096},isSocket:function(U){return(U&49152)===49152},flagModes:{r:0,rs:1052672,"r+":2,w:577,wx:705,xw:705,"w+":578,"wx+":706,"xw+":706,a:1089,ax:1217,xa:1217,"a+":1090,"ax+":1218,"xa+":1218},modeStringToFlags:function(U){var $=He.flagModes[U];if(typeof $>"u")throw new Error("Unknown file open mode: "+U);return $},flagsToPermissionString:function(U){var $=["r","w","rw"][U&3];return U&512&&($+="w"),$},nodePermissions:function(U,$){return He.ignorePermissions?0:$.indexOf("r")!==-1&&!(U.mode&292)||$.indexOf("w")!==-1&&!(U.mode&146)||$.indexOf("x")!==-1&&!(U.mode&73)?2:0},mayLookup:function(U){var $=He.nodePermissions(U,"x");return $||(U.node_ops.lookup?0:2)},mayCreate:function(U,$){try{var ge=He.lookupNode(U,$);return 20}catch{}return He.nodePermissions(U,"wx")},mayDelete:function(U,$,ge){var Oe;try{Oe=He.lookupNode(U,$)}catch(Ct){return Ct.errno}var nt=He.nodePermissions(U,"wx");if(nt)return nt;if(ge){if(!He.isDir(Oe.mode))return 54;if(He.isRoot(Oe)||He.getPath(Oe)===He.cwd())return 10}else if(He.isDir(Oe.mode))return 31;return 0},mayOpen:function(U,$){return U?He.isLink(U.mode)?32:He.isDir(U.mode)&&(He.flagsToPermissionString($)!=="r"||$&512)?31:He.nodePermissions(U,He.flagsToPermissionString($)):44},MAX_OPEN_FDS:4096,nextfd:function(U,$){U=U||0,$=$||He.MAX_OPEN_FDS;for(var ge=U;ge<=$;ge++)if(!He.streams[ge])return ge;throw new He.ErrnoError(33)},getStream:function(U){return He.streams[U]},createStream:function(U,$,ge){He.FSStream||(He.FSStream=function(){},He.FSStream.prototype={object:{get:function(){return this.node},set:function(zt){this.node=zt}},isRead:{get:function(){return(this.flags&2097155)!==1}},isWrite:{get:function(){return(this.flags&2097155)!==0}},isAppend:{get:function(){return this.flags&1024}}});var Oe=new He.FSStream;for(var nt in U)Oe[nt]=U[nt];U=Oe;var Ct=He.nextfd($,ge);return U.fd=Ct,He.streams[Ct]=U,U},closeStream:function(U){He.streams[U]=null},chrdev_stream_ops:{open:function(U){var $=He.getDevice(U.node.rdev);U.stream_ops=$.stream_ops,U.stream_ops.open&&U.stream_ops.open(U)},llseek:function(){throw new He.ErrnoError(70)}},major:function(U){return U>>8},minor:function(U){return U&255},makedev:function(U,$){return U<<8|$},registerDevice:function(U,$){He.devices[U]={stream_ops:$}},getDevice:function(U){return He.devices[U]},getMounts:function(U){for(var $=[],ge=[U];ge.length;){var Oe=ge.pop();$.push(Oe),ge.push.apply(ge,Oe.mounts)}return $},syncfs:function(U,$){typeof U=="function"&&($=U,U=!1),He.syncFSRequests++,He.syncFSRequests>1&&v("warning: "+He.syncFSRequests+" FS.syncfs operations in flight at once, probably just doing extra work");var ge=He.getMounts(He.root.mount),Oe=0;function nt(zt){return He.syncFSRequests--,$(zt)}function Ct(zt){if(zt)return Ct.errored?void 0:(Ct.errored=!0,nt(zt));++Oe>=ge.length&&nt(null)}ge.forEach(function(zt){if(!zt.type.syncfs)return Ct(null);zt.type.syncfs(zt,U,Ct)})},mount:function(U,$,ge){var Oe=ge==="/",nt=!ge,Ct;if(Oe&&He.root)throw new He.ErrnoError(10);if(!Oe&&!nt){var zt=He.lookupPath(ge,{follow_mount:!1});if(ge=zt.path,Ct=zt.node,He.isMountpoint(Ct))throw new He.ErrnoError(10);if(!He.isDir(Ct.mode))throw new He.ErrnoError(54)}var Rt={type:U,opts:$,mountpoint:ge,mounts:[]},bi=U.mount(Rt);return bi.mount=Rt,Rt.root=bi,Oe?He.root=bi:Ct&&(Ct.mounted=Rt,Ct.mount&&Ct.mount.mounts.push(Rt)),bi},unmount:function(U){var $=He.lookupPath(U,{follow_mount:!1});if(!He.isMountpoint($.node))throw new He.ErrnoError(28);var ge=$.node,Oe=ge.mounted,nt=He.getMounts(Oe);Object.keys(He.nameTable).forEach(function(zt){for(var Rt=He.nameTable[zt];Rt;){var bi=Rt.name_next;nt.indexOf(Rt.mount)!==-1&&He.destroyNode(Rt),Rt=bi}}),ge.mounted=null;var Ct=ge.mount.mounts.indexOf(Oe);ge.mount.mounts.splice(Ct,1)},lookup:function(U,$){return U.node_ops.lookup(U,$)},mknod:function(U,$,ge){var Oe=He.lookupPath(U,{parent:!0}),nt=Oe.node,Ct=Wn.basename(U);if(!Ct||Ct==="."||Ct==="..")throw new He.ErrnoError(28);var zt=He.mayCreate(nt,Ct);if(zt)throw new He.ErrnoError(zt);if(!nt.node_ops.mknod)throw new He.ErrnoError(63);return nt.node_ops.mknod(nt,Ct,$,ge)},create:function(U,$){return $=$!==void 0?$:438,$&=4095,$|=32768,He.mknod(U,$,0)},mkdir:function(U,$){return $=$!==void 0?$:511,$&=1023,$|=16384,He.mknod(U,$,0)},mkdirTree:function(U,$){for(var ge=U.split("/"),Oe="",nt=0;nt<ge.length;++nt)if(!!ge[nt]){Oe+="/"+ge[nt];try{He.mkdir(Oe,$)}catch(Ct){if(Ct.errno!=20)throw Ct}}},mkdev:function(U,$,ge){return typeof ge>"u"&&(ge=$,$=438),$|=8192,He.mknod(U,$,ge)},symlink:function(U,$){if(!gr.resolve(U))throw new He.ErrnoError(44);var ge=He.lookupPath($,{parent:!0}),Oe=ge.node;if(!Oe)throw new He.ErrnoError(44);var nt=Wn.basename($),Ct=He.mayCreate(Oe,nt);if(Ct)throw new He.ErrnoError(Ct);if(!Oe.node_ops.symlink)throw new He.ErrnoError(63);return Oe.node_ops.symlink(Oe,nt,U)},rename:function(U,$){var ge=Wn.dirname(U),Oe=Wn.dirname($),nt=Wn.basename(U),Ct=Wn.basename($),zt,Rt,bi;if(zt=He.lookupPath(U,{parent:!0}),Rt=zt.node,zt=He.lookupPath($,{parent:!0}),bi=zt.node,!Rt||!bi)throw new He.ErrnoError(44);if(Rt.mount!==bi.mount)throw new He.ErrnoError(75);var yi=He.lookupNode(Rt,nt),_i=gr.relative(U,Oe);if(_i.charAt(0)!==".")throw new He.ErrnoError(28);if(_i=gr.relative($,ge),_i.charAt(0)!==".")throw new He.ErrnoError(55);var ui;try{ui=He.lookupNode(bi,Ct)}catch{}if(yi!==ui){var ji=He.isDir(yi.mode),ln=He.mayDelete(Rt,nt,ji);if(ln)throw new He.ErrnoError(ln);if(ln=ui?He.mayDelete(bi,Ct,ji):He.mayCreate(bi,Ct),ln)throw new He.ErrnoError(ln);if(!Rt.node_ops.rename)throw new He.ErrnoError(63);if(He.isMountpoint(yi)||ui&&He.isMountpoint(ui))throw new He.ErrnoError(10);if(bi!==Rt&&(ln=He.nodePermissions(Rt,"w"),ln))throw new He.ErrnoError(ln);try{He.trackingDelegate.willMovePath&&He.trackingDelegate.willMovePath(U,$)}catch(In){v("FS.trackingDelegate['willMovePath']('"+U+"', '"+$+"') threw an exception: "+In.message)}He.hashRemoveNode(yi);try{Rt.node_ops.rename(yi,bi,Ct)}catch(In){throw In}finally{He.hashAddNode(yi)}try{He.trackingDelegate.onMovePath&&He.trackingDelegate.onMovePath(U,$)}catch(In){v("FS.trackingDelegate['onMovePath']('"+U+"', '"+$+"') threw an exception: "+In.message)}}},rmdir:function(U){var $=He.lookupPath(U,{parent:!0}),ge=$.node,Oe=Wn.basename(U),nt=He.lookupNode(ge,Oe),Ct=He.mayDelete(ge,Oe,!0);if(Ct)throw new He.ErrnoError(Ct);if(!ge.node_ops.rmdir)throw new He.ErrnoError(63);if(He.isMountpoint(nt))throw new He.ErrnoError(10);try{He.trackingDelegate.willDeletePath&&He.trackingDelegate.willDeletePath(U)}catch(zt){v("FS.trackingDelegate['willDeletePath']('"+U+"') threw an exception: "+zt.message)}ge.node_ops.rmdir(ge,Oe),He.destroyNode(nt);try{He.trackingDelegate.onDeletePath&&He.trackingDelegate.onDeletePath(U)}catch(zt){v("FS.trackingDelegate['onDeletePath']('"+U+"') threw an exception: "+zt.message)}},readdir:function(U){var $=He.lookupPath(U,{follow:!0}),ge=$.node;if(!ge.node_ops.readdir)throw new He.ErrnoError(54);return ge.node_ops.readdir(ge)},unlink:function(U){var $=He.lookupPath(U,{parent:!0}),ge=$.node,Oe=Wn.basename(U),nt=He.lookupNode(ge,Oe),Ct=He.mayDelete(ge,Oe,!1);if(Ct)throw new He.ErrnoError(Ct);if(!ge.node_ops.unlink)throw new He.ErrnoError(63);if(He.isMountpoint(nt))throw new He.ErrnoError(10);try{He.trackingDelegate.willDeletePath&&He.trackingDelegate.willDeletePath(U)}catch(zt){v("FS.trackingDelegate['willDeletePath']('"+U+"') threw an exception: "+zt.message)}ge.node_ops.unlink(ge,Oe),He.destroyNode(nt);try{He.trackingDelegate.onDeletePath&&He.trackingDelegate.onDeletePath(U)}catch(zt){v("FS.trackingDelegate['onDeletePath']('"+U+"') threw an exception: "+zt.message)}},readlink:function(U){var $=He.lookupPath(U),ge=$.node;if(!ge)throw new He.ErrnoError(44);if(!ge.node_ops.readlink)throw new He.ErrnoError(28);return gr.resolve(He.getPath(ge.parent),ge.node_ops.readlink(ge))},stat:function(U,$){var ge=He.lookupPath(U,{follow:!$}),Oe=ge.node;if(!Oe)throw new He.ErrnoError(44);if(!Oe.node_ops.getattr)throw new He.ErrnoError(63);return Oe.node_ops.getattr(Oe)},lstat:function(U){return He.stat(U,!0)},chmod:function(U,$,ge){var Oe;if(typeof U=="string"){var nt=He.lookupPath(U,{follow:!ge});Oe=nt.node}else Oe=U;if(!Oe.node_ops.setattr)throw new He.ErrnoError(63);Oe.node_ops.setattr(Oe,{mode:$&4095|Oe.mode&-4096,timestamp:Date.now()})},lchmod:function(U,$){He.chmod(U,$,!0)},fchmod:function(U,$){var ge=He.getStream(U);if(!ge)throw new He.ErrnoError(8);He.chmod(ge.node,$)},chown:function(U,$,ge,Oe){var nt;if(typeof U=="string"){var Ct=He.lookupPath(U,{follow:!Oe});nt=Ct.node}else nt=U;if(!nt.node_ops.setattr)throw new He.ErrnoError(63);nt.node_ops.setattr(nt,{timestamp:Date.now()})},lchown:function(U,$,ge){He.chown(U,$,ge,!0)},fchown:function(U,$,ge){var Oe=He.getStream(U);if(!Oe)throw new He.ErrnoError(8);He.chown(Oe.node,$,ge)},truncate:function(U,$){if($<0)throw new He.ErrnoError(28);var ge;if(typeof U=="string"){var Oe=He.lookupPath(U,{follow:!0});ge=Oe.node}else ge=U;if(!ge.node_ops.setattr)throw new He.ErrnoError(63);if(He.isDir(ge.mode))throw new He.ErrnoError(31);if(!He.isFile(ge.mode))throw new He.ErrnoError(28);var nt=He.nodePermissions(ge,"w");if(nt)throw new He.ErrnoError(nt);ge.node_ops.setattr(ge,{size:$,timestamp:Date.now()})},ftruncate:function(U,$){var ge=He.getStream(U);if(!ge)throw new He.ErrnoError(8);if((ge.flags&2097155)===0)throw new He.ErrnoError(28);He.truncate(ge.node,$)},utime:function(U,$,ge){var Oe=He.lookupPath(U,{follow:!0}),nt=Oe.node;nt.node_ops.setattr(nt,{timestamp:Math.max($,ge)})},open:function(U,$,ge,Oe,nt){if(U==="")throw new He.ErrnoError(44);$=typeof $=="string"?He.modeStringToFlags($):$,ge=typeof ge>"u"?438:ge,$&64?ge=ge&4095|32768:ge=0;var Ct;if(typeof U=="object")Ct=U;else{U=Wn.normalize(U);try{var zt=He.lookupPath(U,{follow:!($&131072)});Ct=zt.node}catch{}}var Rt=!1;if($&64)if(Ct){if($&128)throw new He.ErrnoError(20)}else Ct=He.mknod(U,ge,0),Rt=!0;if(!Ct)throw new He.ErrnoError(44);if(He.isChrdev(Ct.mode)&&($&=-513),$&65536&&!He.isDir(Ct.mode))throw new He.ErrnoError(54);if(!Rt){var bi=He.mayOpen(Ct,$);if(bi)throw new He.ErrnoError(bi)}$&512&&He.truncate(Ct,0),$&=-131713;var yi=He.createStream({node:Ct,path:He.getPath(Ct),flags:$,seekable:!0,position:0,stream_ops:Ct.stream_ops,ungotten:[],error:!1},Oe,nt);yi.stream_ops.open&&yi.stream_ops.open(yi),i.logReadFiles&&!($&1)&&(He.readFiles||(He.readFiles={}),U in He.readFiles||(He.readFiles[U]=1,v("FS.trackingDelegate error on read file: "+U)));try{if(He.trackingDelegate.onOpenFile){var _i=0;($&2097155)!==1&&(_i|=He.tracking.openFlags.READ),($&2097155)!==0&&(_i|=He.tracking.openFlags.WRITE),He.trackingDelegate.onOpenFile(U,_i)}}catch(ui){v("FS.trackingDelegate['onOpenFile']('"+U+"', flags) threw an exception: "+ui.message)}return yi},close:function(U){if(He.isClosed(U))throw new He.ErrnoError(8);U.getdents&&(U.getdents=null);try{U.stream_ops.close&&U.stream_ops.close(U)}catch($){throw $}finally{He.closeStream(U.fd)}U.fd=null},isClosed:function(U){return U.fd===null},llseek:function(U,$,ge){if(He.isClosed(U))throw new He.ErrnoError(8);if(!U.seekable||!U.stream_ops.llseek)throw new He.ErrnoError(70);if(ge!=0&&ge!=1&&ge!=2)throw new He.ErrnoError(28);return U.position=U.stream_ops.llseek(U,$,ge),U.ungotten=[],U.position},read:function(U,$,ge,Oe,nt){if(Oe<0||nt<0)throw new He.ErrnoError(28);if(He.isClosed(U))throw new He.ErrnoError(8);if((U.flags&2097155)===1)throw new He.ErrnoError(8);if(He.isDir(U.node.mode))throw new He.ErrnoError(31);if(!U.stream_ops.read)throw new He.ErrnoError(28);var Ct=typeof nt<"u";if(!Ct)nt=U.position;else if(!U.seekable)throw new He.ErrnoError(70);var zt=U.stream_ops.read(U,$,ge,Oe,nt);return Ct||(U.position+=zt),zt},write:function(U,$,ge,Oe,nt,Ct){if(Oe<0||nt<0)throw new He.ErrnoError(28);if(He.isClosed(U))throw new He.ErrnoError(8);if((U.flags&2097155)===0)throw new He.ErrnoError(8);if(He.isDir(U.node.mode))throw new He.ErrnoError(31);if(!U.stream_ops.write)throw new He.ErrnoError(28);U.seekable&&U.flags&1024&&He.llseek(U,0,2);var zt=typeof nt<"u";if(!zt)nt=U.position;else if(!U.seekable)throw new He.ErrnoError(70);var Rt=U.stream_ops.write(U,$,ge,Oe,nt,Ct);zt||(U.position+=Rt);try{U.path&&He.trackingDelegate.onWriteToFile&&He.trackingDelegate.onWriteToFile(U.path)}catch(bi){v("FS.trackingDelegate['onWriteToFile']('"+U.path+"') threw an exception: "+bi.message)}return Rt},allocate:function(U,$,ge){if(He.isClosed(U))throw new He.ErrnoError(8);if($<0||ge<=0)throw new He.ErrnoError(28);if((U.flags&2097155)===0)throw new He.ErrnoError(8);if(!He.isFile(U.node.mode)&&!He.isDir(U.node.mode))throw new He.ErrnoError(43);if(!U.stream_ops.allocate)throw new He.ErrnoError(138);U.stream_ops.allocate(U,$,ge)},mmap:function(U,$,ge,Oe,nt,Ct){if((nt&2)!==0&&(Ct&2)===0&&(U.flags&2097155)!==2)throw new He.ErrnoError(2);if((U.flags&2097155)===1)throw new He.ErrnoError(2);if(!U.stream_ops.mmap)throw new He.ErrnoError(43);return U.stream_ops.mmap(U,$,ge,Oe,nt,Ct)},msync:function(U,$,ge,Oe,nt){return!U||!U.stream_ops.msync?0:U.stream_ops.msync(U,$,ge,Oe,nt)},munmap:function(U){return 0},ioctl:function(U,$,ge){if(!U.stream_ops.ioctl)throw new He.ErrnoError(59);return U.stream_ops.ioctl(U,$,ge)},readFile:function(U,$){if($=$||{},$.flags=$.flags||"r",$.encoding=$.encoding||"binary",$.encoding!=="utf8"&&$.encoding!=="binary")throw new Error('Invalid encoding type "'+$.encoding+'"');var ge,Oe=He.open(U,$.flags),nt=He.stat(U),Ct=nt.size,zt=new Uint8Array(Ct);return He.read(Oe,zt,0,Ct,0),$.encoding==="utf8"?ge=Te(zt,0):$.encoding==="binary"&&(ge=zt),He.close(Oe),ge},writeFile:function(U,$,ge){ge=ge||{},ge.flags=ge.flags||"w";var Oe=He.open(U,ge.flags,ge.mode);if(typeof $=="string"){var nt=new Uint8Array(it($)+1),Ct=_e($,nt,0,nt.length);He.write(Oe,nt,0,Ct,void 0,ge.canOwn)}else if(ArrayBuffer.isView($))He.write(Oe,$,0,$.byteLength,void 0,ge.canOwn);else throw new Error("Unsupported data type");He.close(Oe)},cwd:function(){return He.currentPath},chdir:function(U){var $=He.lookupPath(U,{follow:!0});if($.node===null)throw new He.ErrnoError(44);if(!He.isDir($.node.mode))throw new He.ErrnoError(54);var ge=He.nodePermissions($.node,"x");if(ge)throw new He.ErrnoError(ge);He.currentPath=$.path},createDefaultDirectories:function(){He.mkdir("/tmp"),He.mkdir("/home"),He.mkdir("/home/web_user")},createDefaultDevices:function(){He.mkdir("/dev"),He.registerDevice(He.makedev(1,3),{read:function(){return 0},write:function(ge,Oe,nt,Ct,zt){return Ct}}),He.mkdev("/dev/null",He.makedev(1,3)),Kr.register(He.makedev(5,0),Kr.default_tty_ops),Kr.register(He.makedev(6,0),Kr.default_tty1_ops),He.mkdev("/dev/tty",He.makedev(5,0)),He.mkdev("/dev/tty1",He.makedev(6,0));var U;if(typeof crypto=="object"&&typeof crypto.getRandomValues=="function"){var $=new Uint8Array(1);U=function(){return crypto.getRandomValues($),$[0]}}U||(U=function(){Kt("random_device")}),He.createDevice("/dev","random",U),He.createDevice("/dev","urandom",U),He.mkdir("/dev/shm"),He.mkdir("/dev/shm/tmp")},createSpecialDirectories:function(){He.mkdir("/proc"),He.mkdir("/proc/self"),He.mkdir("/proc/self/fd"),He.mount({mount:function(){var U=He.createNode("/proc/self","fd",16895,73);return U.node_ops={lookup:function($,ge){var Oe=+ge,nt=He.getStream(Oe);if(!nt)throw new He.ErrnoError(8);var Ct={parent:null,mount:{mountpoint:"fake"},node_ops:{readlink:function(){return nt.path}}};return Ct.parent=Ct,Ct}},U}},{},"/proc/self/fd")},createStandardStreams:function(){i.stdin?He.createDevice("/dev","stdin",i.stdin):He.symlink("/dev/tty","/dev/stdin"),i.stdout?He.createDevice("/dev","stdout",null,i.stdout):He.symlink("/dev/tty","/dev/stdout"),i.stderr?He.createDevice("/dev","stderr",null,i.stderr):He.symlink("/dev/tty1","/dev/stderr"),He.open("/dev/stdin","r"),He.open("/dev/stdout","w"),He.open("/dev/stderr","w")},ensureErrnoError:function(){He.ErrnoError||(He.ErrnoError=function($,ge){this.node=ge,this.setErrno=function(Oe){this.errno=Oe},this.setErrno($),this.message="FS error"},He.ErrnoError.prototype=new Error,He.ErrnoError.prototype.constructor=He.ErrnoError,[44].forEach(function(U){He.genericErrors[U]=new He.ErrnoError(U),He.genericErrors[U].stack="<generic error, no stack>"}))},staticInit:function(){He.ensureErrnoError(),He.nameTable=new Array(4096),He.mount(an,{},"/"),He.createDefaultDirectories(),He.createDefaultDevices(),He.createSpecialDirectories(),He.filesystems={MEMFS:an}},init:function(U,$,ge){He.init.initialized=!0,He.ensureErrnoError(),i.stdin=U||i.stdin,i.stdout=$||i.stdout,i.stderr=ge||i.stderr,He.createStandardStreams()},quit:function(){He.init.initialized=!1;var U=i._fflush;U&&U(0);for(var $=0;$<He.streams.length;$++){var ge=He.streams[$];!ge||He.close(ge)}},getMode:function(U,$){var ge=0;return U&&(ge|=365),$&&(ge|=146),ge},joinPath:function(U,$){var ge=Wn.join.apply(null,U);return $&&ge[0]=="/"&&(ge=ge.substr(1)),ge},absolutePath:function(U,$){return gr.resolve($,U)},standardizePath:function(U){return Wn.normalize(U)},findObject:function(U,$){var ge=He.analyzePath(U,$);return ge.exists?ge.object:(Sr(ge.error),null)},analyzePath:function(U,$){try{var ge=He.lookupPath(U,{follow:!$});U=ge.path}catch{}var Oe={isRoot:!1,exists:!1,error:0,name:null,path:null,object:null,parentExists:!1,parentPath:null,parentObject:null};try{var ge=He.lookupPath(U,{parent:!0});Oe.parentExists=!0,Oe.parentPath=ge.path,Oe.parentObject=ge.node,Oe.name=Wn.basename(U),ge=He.lookupPath(U,{follow:!$}),Oe.exists=!0,Oe.path=ge.path,Oe.object=ge.node,Oe.name=ge.node.name,Oe.isRoot=ge.path==="/"}catch(nt){Oe.error=nt.errno}return Oe},createFolder:function(U,$,ge,Oe){var nt=Wn.join2(typeof U=="string"?U:He.getPath(U),$),Ct=He.getMode(ge,Oe);return He.mkdir(nt,Ct)},createPath:function(U,$,ge,Oe){U=typeof U=="string"?U:He.getPath(U);for(var nt=$.split("/").reverse();nt.length;){var Ct=nt.pop();if(!!Ct){var zt=Wn.join2(U,Ct);try{He.mkdir(zt)}catch{}U=zt}}return zt},createFile:function(U,$,ge,Oe,nt){var Ct=Wn.join2(typeof U=="string"?U:He.getPath(U),$),zt=He.getMode(Oe,nt);return He.create(Ct,zt)},createDataFile:function(U,$,ge,Oe,nt,Ct){var zt=$?Wn.join2(typeof U=="string"?U:He.getPath(U),$):U,Rt=He.getMode(Oe,nt),bi=He.create(zt,Rt);if(ge){if(typeof ge=="string"){for(var yi=new Array(ge.length),_i=0,ui=ge.length;_i<ui;++_i)yi[_i]=ge.charCodeAt(_i);ge=yi}He.chmod(bi,Rt|146);var ji=He.open(bi,"w");He.write(ji,ge,0,ge.length,0,Ct),He.close(ji),He.chmod(bi,Rt)}return bi},createDevice:function(U,$,ge,Oe){var nt=Wn.join2(typeof U=="string"?U:He.getPath(U),$),Ct=He.getMode(!!ge,!!Oe);He.createDevice.major||(He.createDevice.major=64);var zt=He.makedev(He.createDevice.major++,0);return He.registerDevice(zt,{open:function(Rt){Rt.seekable=!1},close:function(Rt){Oe&&Oe.buffer&&Oe.buffer.length&&Oe(10)},read:function(Rt,bi,yi,_i,ui){for(var ji=0,ln=0;ln<_i;ln++){var In;try{In=ge()}catch{throw new He.ErrnoError(29)}if(In===void 0&&ji===0)throw new He.ErrnoError(6);if(In==null)break;ji++,bi[yi+ln]=In}return ji&&(Rt.node.timestamp=Date.now()),ji},write:function(Rt,bi,yi,_i,ui){for(var ji=0;ji<_i;ji++)try{Oe(bi[yi+ji])}catch{throw new He.ErrnoError(29)}return _i&&(Rt.node.timestamp=Date.now()),ji}}),He.mkdev(nt,Ct,zt)},createLink:function(U,$,ge,Oe,nt){var Ct=Wn.join2(typeof U=="string"?U:He.getPath(U),$);return He.symlink(ge,Ct)},forceLoadFile:function(U){if(U.isDevice||U.isFolder||U.link||U.contents)return!0;var $=!0;if(typeof XMLHttpRequest<"u")throw new Error("Lazy loading should have been performed (contents set) in createLazyFile, but it was not. Lazy loading only works in web workers. Use --embed-file or --preload-file in emcc on the main thread.");if(r)try{U.contents=Zo(r(U.url),!0),U.usedBytes=U.contents.length}catch{$=!1}else throw new Error("Cannot load without read() or XMLHttpRequest.");return $||Sr(29),$},createLazyFile:function(U,$,ge,Oe,nt){function Ct(){this.lengthKnown=!1,this.chunks=[]}if(Ct.prototype.get=function(ji){if(!(ji>this.length-1||ji<0)){var ln=ji%this.chunkSize,In=ji/this.chunkSize|0;return this.getter(In)[ln]}},Ct.prototype.setDataGetter=function(ji){this.getter=ji},Ct.prototype.cacheLength=function(){var ji=new XMLHttpRequest;if(ji.open("HEAD",ge,!1),ji.send(null),!(ji.status>=200&&ji.status<300||ji.status===304))throw new Error("Couldn't load "+ge+". Status: "+ji.status);var ln=Number(ji.getResponseHeader("Content-length")),In,ft=(In=ji.getResponseHeader("Accept-Ranges"))&&In==="bytes",p=(In=ji.getResponseHeader("Content-Encoding"))&&In==="gzip",Di=1024*1024;ft||(Di=ln);var c=function(mn,$n){if(mn>$n)throw new Error("invalid range ("+mn+", "+$n+") or no bytes requested!");if($n>ln-1)throw new Error("only "+ln+" bytes available! programmer error!");var Ao=new XMLHttpRequest;if(Ao.open("GET",ge,!1),ln!==Di&&Ao.setRequestHeader("Range","bytes="+mn+"-"+$n),typeof Uint8Array<"u"&&(Ao.responseType="arraybuffer"),Ao.overrideMimeType&&Ao.overrideMimeType("text/plain; charset=x-user-defined"),Ao.send(null),!(Ao.status>=200&&Ao.status<300||Ao.status===304))throw new Error("Couldn't load "+ge+". Status: "+Ao.status);return Ao.response!==void 0?new Uint8Array(Ao.response||[]):Zo(Ao.responseText||"",!0)},F=this;F.setDataGetter(function(mn){var $n=mn*Di,Ao=(mn+1)*Di-1;if(Ao=Math.min(Ao,ln-1),typeof F.chunks[mn]>"u"&&(F.chunks[mn]=c($n,Ao)),typeof F.chunks[mn]>"u")throw new Error("doXHR failed!");return F.chunks[mn]}),(p||!ln)&&(Di=ln=1,ln=this.getter(0).length,Di=ln,b("LazyFiles on gzip forces download of the whole file when length is accessed")),this._length=ln,this._chunkSize=Di,this.lengthKnown=!0},typeof XMLHttpRequest<"u"){throw"Cannot do synchronous binary XHRs outside webworkers in modern browsers. Use --embed-file or --preload-file in emcc";var zt,Rt}else var Rt={isDevice:!1,url:ge};var bi=He.createFile(U,$,Rt,Oe,nt);Rt.contents?bi.contents=Rt.contents:Rt.url&&(bi.contents=null,bi.url=Rt.url),Object.defineProperties(bi,{usedBytes:{get:function(){return this.contents.length}}});var yi={},_i=Object.keys(bi.stream_ops);return _i.forEach(function(ui){var ji=bi.stream_ops[ui];yi[ui]=function(){if(!He.forceLoadFile(bi))throw new He.ErrnoError(29);return ji.apply(null,arguments)}}),yi.read=function(ji,ln,In,ft,p){if(!He.forceLoadFile(bi))throw new He.ErrnoError(29);var Di=ji.node.contents;if(p>=Di.length)return 0;var c=Math.min(Di.length-p,ft);if(Di.slice)for(var F=0;F<c;F++)ln[In+F]=Di[p+F];else for(var F=0;F<c;F++)ln[In+F]=Di.get(p+F);return c},bi.stream_ops=yi,bi},createPreloadedFile:function(U,$,ge,Oe,nt,Ct,zt,Rt,bi,yi){Le.init();var _i=$?gr.resolve(Wn.join2(U,$)):U;function ui(ji){function ln(ft){yi&&yi(),Rt||He.createDataFile(U,$,ft,Oe,nt,bi),Ct&&Ct(),_t()}var In=!1;i.preloadPlugins.forEach(function(ft){In||ft.canHandle(_i)&&(ft.handle(ji,_i,ln,function(){zt&&zt(),_t()}),In=!0)}),In||ln(ji)}$e(),typeof ge=="string"?Le.asyncLoad(ge,function(ji){ui(ji)},zt):ui(ge)},indexedDB:function(){return window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB},DB_NAME:function(){return"EM_FS_"+window.location.pathname},DB_VERSION:20,DB_STORE_NAME:"FILE_DATA",saveFilesToDB:function(U,$,ge){$=$||function(){},ge=ge||function(){};var Oe=He.indexedDB();try{var nt=Oe.open(He.DB_NAME(),He.DB_VERSION)}catch(Ct){return ge(Ct)}nt.onupgradeneeded=function(){b("creating db");var zt=nt.result;zt.createObjectStore(He.DB_STORE_NAME)},nt.onsuccess=function(){var zt=nt.result,Rt=zt.transaction([He.DB_STORE_NAME],"readwrite"),bi=Rt.objectStore(He.DB_STORE_NAME),yi=0,_i=0,ui=U.length;function ji(){_i==0?$():ge()}U.forEach(function(ln){var In=bi.put(He.analyzePath(ln).object.contents,ln);In.onsuccess=function(){yi++,yi+_i==ui&&ji()},In.onerror=function(){_i++,yi+_i==ui&&ji()}}),Rt.onerror=ge},nt.onerror=ge},loadFilesFromDB:function(U,$,ge){$=$||function(){},ge=ge||function(){};var Oe=He.indexedDB();try{var nt=Oe.open(He.DB_NAME(),He.DB_VERSION)}catch(Ct){return ge(Ct)}nt.onupgradeneeded=ge,nt.onsuccess=function(){var zt=nt.result;try{var Rt=zt.transaction([He.DB_STORE_NAME],"readonly")}catch(ln){ge(ln);return}var bi=Rt.objectStore(He.DB_STORE_NAME),yi=0,_i=0,ui=U.length;function ji(){_i==0?$():ge()}U.forEach(function(ln){var In=bi.get(ln);In.onsuccess=function(){He.analyzePath(ln).exists&&He.unlink(ln),He.createDataFile(Wn.dirname(ln),Wn.basename(ln),In.result,!0,!0,!0),yi++,yi+_i==ui&&ji()},In.onerror=function(){_i++,yi+_i==ui&&ji()}}),Rt.onerror=ge},nt.onerror=ge},mmapAlloc:function(U){for(var $=x(U,16384),ge=qs($);U<$;)Re[ge+U++]=0;return ge}};function wo(U,$){if(Le.mainLoop.timingMode=U,Le.mainLoop.timingValue=$,!Le.mainLoop.func)return 1;if(U==0)Le.mainLoop.scheduler=function(){var zt=Math.max(0,Le.mainLoop.tickStartTime+$-xo())|0;setTimeout(Le.mainLoop.runner,zt)},Le.mainLoop.method="timeout";else if(U==1)Le.mainLoop.scheduler=function(){Le.requestAnimationFrame(Le.mainLoop.runner)},Le.mainLoop.method="rAF";else if(U==2){if(typeof setImmediate>"u"){var ge=[],Oe="setimmediate",nt=function(Ct){(Ct.data===Oe||Ct.data.target===Oe)&&(Ct.stopPropagation(),ge.shift()())};addEventListener("message",nt,!0),setImmediate=function(zt){ge.push(zt),postMessage(Oe,"*")}}Le.mainLoop.scheduler=function(){setImmediate(Le.mainLoop.runner)},Le.mainLoop.method="immediate"}return 0}var xo;typeof performance<"u"&&performance.now?xo=function(){return performance.now()}:xo=Date.now;function co(U,$,ge,Oe,nt){J(!Le.mainLoop.func,"emscripten_set_main_loop: there can only be one main loop function at once: call emscripten_cancel_main_loop to cancel the previous one before setting a new one with different parameters."),Le.mainLoop.func=U,Le.mainLoop.arg=Oe;var Ct;typeof Oe<"u"?Ct=function(){i.dynCall_vi(U,Oe)}:Ct=function(){i.dynCall_v(U)};var zt=Le.mainLoop.currentlyRunningMainloop;if(Le.mainLoop.runner=function(){if(!te){if(Le.mainLoop.queue.length>0){var bi=Date.now(),yi=Le.mainLoop.queue.shift();if(yi.func(yi.arg),Le.mainLoop.remainingBlockers){var _i=Le.mainLoop.remainingBlockers,ui=_i%1==0?_i-1:Math.floor(_i);yi.counted?Le.mainLoop.remainingBlockers=ui:(ui=ui+.5,Le.mainLoop.remainingBlockers=(8*_i+ui)/9)}if(console.log('main loop blocker "'+yi.name+'" took '+(Date.now()-bi)+" ms"),Le.mainLoop.updateStatus(),zt<Le.mainLoop.currentlyRunningMainloop)return;setTimeout(Le.mainLoop.runner,0);return}if(!(zt<Le.mainLoop.currentlyRunningMainloop)){if(Le.mainLoop.currentFrameNumber=Le.mainLoop.currentFrameNumber+1|0,Le.mainLoop.timingMode==1&&Le.mainLoop.timingValue>1&&Le.mainLoop.currentFrameNumber%Le.mainLoop.timingValue!=0){Le.mainLoop.scheduler();return}else Le.mainLoop.timingMode==0&&(Le.mainLoop.tickStartTime=xo());Le.mainLoop.runIter(Ct),!(zt<Le.mainLoop.currentlyRunningMainloop)&&(typeof Ge=="object"&&Ge.audio&&Ge.audio.queueNewAudioData&&Ge.audio.queueNewAudioData(),Le.mainLoop.scheduler())}}},nt||($&&$>0?wo(0,1e3/$):wo(1,1),Le.mainLoop.scheduler()),ge)throw"unwind"}var Le={mainLoop:{scheduler:null,method:"",currentlyRunningMainloop:0,func:null,arg:0,timingMode:0,timingValue:0,currentFrameNumber:0,queue:[],pause:function(){Le.mainLoop.scheduler=null,Le.mainLoop.currentlyRunningMainloop++},resume:function(){Le.mainLoop.currentlyRunningMainloop++;var U=Le.mainLoop.timingMode,$=Le.mainLoop.timingValue,ge=Le.mainLoop.func;Le.mainLoop.func=null,co(ge,0,!1,Le.mainLoop.arg,!0),wo(U,$),Le.mainLoop.scheduler()},updateStatus:function(){if(i.setStatus){var U=i.statusMessage||"Please wait...",$=Le.mainLoop.remainingBlockers,ge=Le.mainLoop.expectedBlockers;$?$<ge?i.setStatus(U+" ("+(ge-$)+"/"+ge+")"):i.setStatus(U):i.setStatus("")}},runIter:function(U){if(!te){if(i.preMainLoop){var $=i.preMainLoop();if($===!1)return}try{U()}catch(ge){if(ge instanceof Io)return;if(ge=="unwind")return;throw ge&&typeof ge=="object"&&ge.stack&&v("exception thrown: "+[ge,ge.stack]),ge}i.postMainLoop&&i.postMainLoop()}}},isFullscreen:!1,pointerLock:!1,moduleContextCreatedCallbacks:[],workers:[],init:function(){if(i.preloadPlugins||(i.preloadPlugins=[]),Le.initted)return;Le.initted=!0;try{new Blob,Le.hasBlobConstructor=!0}catch{Le.hasBlobConstructor=!1,console.log("warning: no blob constructor, cannot create blobs with mimetypes")}Le.BlobBuilder=typeof MozBlobBuilder<"u"?MozBlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:Le.hasBlobConstructor?null:console.log("warning: no BlobBuilder"),Le.URLObject=typeof window<"u"?window.URL?window.URL:window.webkitURL:void 0,!i.noImageDecoding&&typeof Le.URLObject>"u"&&(console.log("warning: Browser does not support creating object URLs. Built-in browser image decoding will not be available."),i.noImageDecoding=!0);var U={};U.canHandle=function(Ct){return!i.noImageDecoding&&/\.(jpg|jpeg|png|bmp)$/i.test(Ct)},U.handle=function(Ct,zt,Rt,bi){var yi=null;if(Le.hasBlobConstructor)try{yi=new Blob([Ct],{type:Le.getMimetype(zt)}),yi.size!==Ct.length&&(yi=new Blob([new Uint8Array(Ct).buffer],{type:Le.getMimetype(zt)}))}catch(ln){C("Blob constructor present but fails: "+ln+"; falling back to blob builder")}if(!yi){var _i=new Le.BlobBuilder;_i.append(new Uint8Array(Ct).buffer),yi=_i.getBlob()}var ui=Le.URLObject.createObjectURL(yi),ji=new Image;ji.onload=function(){J(ji.complete,"Image "+zt+" could not be decoded");var In=document.createElement("canvas");In.width=ji.width,In.height=ji.height;var ft=In.getContext("2d");ft.drawImage(ji,0,0),i.preloadedImages[zt]=In,Le.URLObject.revokeObjectURL(ui),Rt&&Rt(Ct)},ji.onerror=function(In){console.log("Image "+ui+" could not be decoded"),bi&&bi()},ji.src=ui},i.preloadPlugins.push(U);var $={};$.canHandle=function(Ct){return!i.noAudioDecoding&&Ct.substr(-4)in{".ogg":1,".wav":1,".mp3":1}},$.handle=function(Ct,zt,Rt,bi){var yi=!1;function _i(ft){yi||(yi=!0,i.preloadedAudios[zt]=ft,Rt&&Rt(Ct))}function ui(){yi||(yi=!0,i.preloadedAudios[zt]=new Audio,bi&&bi())}if(Le.hasBlobConstructor){try{var ji=new Blob([Ct],{type:Le.getMimetype(zt)})}catch{return ui()}var ln=Le.URLObject.createObjectURL(ji),In=new Audio;In.addEventListener("canplaythrough",function(){_i(In)},!1),In.onerror=function(p){if(yi)return;console.log("warning: browser could not fully decode audio "+zt+", trying slower base64 approach");function Di(c){for(var F="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",mn="=",$n="",Ao=0,re=0,Rr=0;Rr<c.length;Rr++)for(Ao=Ao<<8|c[Rr],re+=8;re>=6;){var da=Ao>>re-6&63;re-=6,$n+=F[da]}return re==2?($n+=F[(Ao&3)<<4],$n+=mn+mn):re==4&&($n+=F[(Ao&15)<<2],$n+=mn),$n}In.src="data:audio/x-"+zt.substr(-3)+";base64,"+Di(Ct),_i(In)},In.src=ln,Le.safeSetTimeout(function(){_i(In)},1e4)}else return ui()},i.preloadPlugins.push($);function ge(){Le.pointerLock=document.pointerLockElement===i.canvas||document.mozPointerLockElement===i.canvas||document.webkitPointerLockElement===i.canvas||document.msPointerLockElement===i.canvas}var Oe=i.canvas;Oe&&(Oe.requestPointerLock=Oe.requestPointerLock||Oe.mozRequestPointerLock||Oe.webkitRequestPointerLock||Oe.msRequestPointerLock||function(){},Oe.exitPointerLock=document.exitPointerLock||document.mozExitPointerLock||document.webkitExitPointerLock||document.msExitPointerLock||function(){},Oe.exitPointerLock=Oe.exitPointerLock.bind(document),document.addEventListener("pointerlockchange",ge,!1),document.addEventListener("mozpointerlockchange",ge,!1),document.addEventListener("webkitpointerlockchange",ge,!1),document.addEventListener("mspointerlockchange",ge,!1),i.elementPointerLock&&Oe.addEventListener("click",function(nt){!Le.pointerLock&&i.canvas.requestPointerLock&&(i.canvas.requestPointerLock(),nt.preventDefault())},!1))},createContext:function(U,$,ge,Oe){if($&&i.ctx&&U==i.canvas)return i.ctx;var nt,Ct;if($){var zt={antialias:!1,alpha:!1,majorVersion:1};if(Oe)for(var Rt in Oe)zt[Rt]=Oe[Rt];typeof xt<"u"&&(Ct=xt.createContext(U,zt),Ct&&(nt=xt.getContext(Ct).GLctx))}else nt=U.getContext("2d");return nt?(ge&&($||J(typeof zr>"u","cannot set in module if GLctx is used, but we are a non-GL context that would replace it"),i.ctx=nt,$&&xt.makeContextCurrent(Ct),i.useWebGL=$,Le.moduleContextCreatedCallbacks.forEach(function(bi){bi()}),Le.init()),nt):null},destroyContext:function(U,$,ge){},fullscreenHandlersInstalled:!1,lockPointer:void 0,resizeCanvas:void 0,requestFullscreen:function(U,$){Le.lockPointer=U,Le.resizeCanvas=$,typeof Le.lockPointer>"u"&&(Le.lockPointer=!0),typeof Le.resizeCanvas>"u"&&(Le.resizeCanvas=!1);var ge=i.canvas;function Oe(){Le.isFullscreen=!1;var Ct=ge.parentNode;(document.fullscreenElement||document.mozFullScreenElement||document.msFullscreenElement||document.webkitFullscreenElement||document.webkitCurrentFullScreenElement)===Ct?(ge.exitFullscreen=Le.exitFullscreen,Le.lockPointer&&ge.requestPointerLock(),Le.isFullscreen=!0,Le.resizeCanvas?Le.setFullscreenCanvasSize():Le.updateCanvasDimensions(ge)):(Ct.parentNode.insertBefore(ge,Ct),Ct.parentNode.removeChild(Ct),Le.resizeCanvas?Le.setWindowedCanvasSize():Le.updateCanvasDimensions(ge)),i.onFullScreen&&i.onFullScreen(Le.isFullscreen),i.onFullscreen&&i.onFullscreen(Le.isFullscreen)}Le.fullscreenHandlersInstalled||(Le.fullscreenHandlersInstalled=!0,document.addEventListener("fullscreenchange",Oe,!1),document.addEventListener("mozfullscreenchange",Oe,!1),document.addEventListener("webkitfullscreenchange",Oe,!1),document.addEventListener("MSFullscreenChange",Oe,!1));var nt=document.createElement("div");ge.parentNode.insertBefore(nt,ge),nt.appendChild(ge),nt.requestFullscreen=nt.requestFullscreen||nt.mozRequestFullScreen||nt.msRequestFullscreen||(nt.webkitRequestFullscreen?function(){nt.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT)}:null)||(nt.webkitRequestFullScreen?function(){nt.webkitRequestFullScreen(Element.ALLOW_KEYBOARD_INPUT)}:null),nt.requestFullscreen()},exitFullscreen:function(){if(!Le.isFullscreen)return!1;var U=document.exitFullscreen||document.cancelFullScreen||document.mozCancelFullScreen||document.msExitFullscreen||document.webkitCancelFullScreen||function(){};return U.apply(document,[]),!0},nextRAF:0,fakeRequestAnimationFrame:function(U){var $=Date.now();if(Le.nextRAF===0)Le.nextRAF=$+1e3/60;else for(;$+2>=Le.nextRAF;)Le.nextRAF+=1e3/60;var ge=Math.max(Le.nextRAF-$,0);setTimeout(U,ge)},requestAnimationFrame:function(U){if(typeof requestAnimationFrame=="function"){requestAnimationFrame(U);return}var $=Le.fakeRequestAnimationFrame;typeof window<"u"&&($=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame||window.oRequestAnimationFrame||$),$(U)},safeCallback:function(U){return function(){if(!te)return U.apply(null,arguments)}},allowAsyncCallbacks:!0,queuedAsyncCallbacks:[],pauseAsyncCallbacks:function(){Le.allowAsyncCallbacks=!1},resumeAsyncCallbacks:function(){if(Le.allowAsyncCallbacks=!0,Le.queuedAsyncCallbacks.length>0){var U=Le.queuedAsyncCallbacks;Le.queuedAsyncCallbacks=[],U.forEach(function($){$()})}},safeRequestAnimationFrame:function(U){return Le.requestAnimationFrame(function(){te||(Le.allowAsyncCallbacks?U():Le.queuedAsyncCallbacks.push(U))})},safeSetTimeout:function(U,$){return setTimeout(function(){te||(Le.allowAsyncCallbacks?U():Le.queuedAsyncCallbacks.push(U))},$)},safeSetInterval:function(U,$){return setInterval(function(){te||Le.allowAsyncCallbacks&&U()},$)},getMimetype:function(U){return{jpg:"image/jpeg",jpeg:"image/jpeg",png:"image/png",bmp:"image/bmp",ogg:"audio/ogg",wav:"audio/wav",mp3:"audio/mpeg"}[U.substr(U.lastIndexOf(".")+1)]},getUserMedia:function(U){window.getUserMedia||(window.getUserMedia=navigator.getUserMedia||navigator.mozGetUserMedia),window.getUserMedia(U)},getMovementX:function(U){return U.movementX||U.mozMovementX||U.webkitMovementX||0},getMovementY:function(U){return U.movementY||U.mozMovementY||U.webkitMovementY||0},getMouseWheelDelta:function(U){var $=0;switch(U.type){case"DOMMouseScroll":$=U.detail/3;break;case"mousewheel":$=U.wheelDelta/120;break;case"wheel":switch($=U.deltaY,U.deltaMode){case 0:$/=100;break;case 1:$/=3;break;case 2:$*=80;break;default:throw"unrecognized mouse wheel delta mode: "+U.deltaMode}break;default:throw"unrecognized mouse wheel event: "+U.type}return $},mouseX:0,mouseY:0,mouseMovementX:0,mouseMovementY:0,touches:{},lastTouches:{},calculateMouseEvent:function(U){if(Le.pointerLock)U.type!="mousemove"&&"mozMovementX"in U?Le.mouseMovementX=Le.mouseMovementY=0:(Le.mouseMovementX=Le.getMovementX(U),Le.mouseMovementY=Le.getMovementY(U)),typeof Ge<"u"?(Le.mouseX=Ge.mouseX+Le.mouseMovementX,Le.mouseY=Ge.mouseY+Le.mouseMovementY):(Le.mouseX+=Le.mouseMovementX,Le.mouseY+=Le.mouseMovementY);else{var $=i.canvas.getBoundingClientRect(),ge=i.canvas.width,Oe=i.canvas.height,nt=typeof window.scrollX<"u"?window.scrollX:window.pageXOffset,Ct=typeof window.scrollY<"u"?window.scrollY:window.pageYOffset;if(U.type==="touchstart"||U.type==="touchend"||U.type==="touchmove"){var zt=U.touch;if(zt===void 0)return;var Rt=zt.pageX-(nt+$.left),bi=zt.pageY-(Ct+$.top);Rt=Rt*(ge/$.width),bi=bi*(Oe/$.height);var yi={x:Rt,y:bi};if(U.type==="touchstart")Le.lastTouches[zt.identifier]=yi,Le.touches[zt.identifier]=yi;else if(U.type==="touchend"||U.type==="touchmove"){var _i=Le.touches[zt.identifier];_i||(_i=yi),Le.lastTouches[zt.identifier]=_i,Le.touches[zt.identifier]=yi}return}var ui=U.pageX-(nt+$.left),ji=U.pageY-(Ct+$.top);ui=ui*(ge/$.width),ji=ji*(Oe/$.height),Le.mouseMovementX=ui-Le.mouseX,Le.mouseMovementY=ji-Le.mouseY,Le.mouseX=ui,Le.mouseY=ji}},asyncLoad:function(U,$,ge,Oe){var nt=Oe?"":"al "+U;f(U,function(Ct){J(Ct,'Loading data file "'+U+'" failed (no arrayBuffer).'),$(new Uint8Array(Ct)),nt&&_t()},function(Ct){if(ge)ge();else throw'Loading data file "'+U+'" failed.'}),nt&&$e()},resizeListeners:[],updateResizeListeners:function(){var U=i.canvas;Le.resizeListeners.forEach(function($){$(U.width,U.height)})},setCanvasSize:function(U,$,ge){var Oe=i.canvas;Le.updateCanvasDimensions(Oe,U,$),ge||Le.updateResizeListeners()},windowedWidth:0,windowedHeight:0,setFullscreenCanvasSize:function(){if(typeof Ge<"u"){var U=me[Ge.screen>>2];U=U|8388608,he[Ge.screen>>2]=U}Le.updateCanvasDimensions(i.canvas),Le.updateResizeListeners()},setWindowedCanvasSize:function(){if(typeof Ge<"u"){var U=me[Ge.screen>>2];U=U&-8388609,he[Ge.screen>>2]=U}Le.updateCanvasDimensions(i.canvas),Le.updateResizeListeners()},updateCanvasDimensions:function(U,$,ge){$&&ge?(U.widthNative=$,U.heightNative=ge):($=U.widthNative,ge=U.heightNative);var Oe=$,nt=ge;if(i.forcedAspectRatio&&i.forcedAspectRatio>0&&(Oe/nt<i.forcedAspectRatio?Oe=Math.round(nt*i.forcedAspectRatio):nt=Math.round(Oe/i.forcedAspectRatio)),(document.fullscreenElement||document.mozFullScreenElement||document.msFullscreenElement||document.webkitFullscreenElement||document.webkitCurrentFullScreenElement)===U.parentNode&&typeof screen<"u"){var Ct=Math.min(screen.width/Oe,screen.height/nt);Oe=Math.round(Oe*Ct),nt=Math.round(nt*Ct)}Le.resizeCanvas?(U.width!=Oe&&(U.width=Oe),U.height!=nt&&(U.height=nt),typeof U.style<"u"&&(U.style.removeProperty("width"),U.style.removeProperty("height"))):(U.width!=$&&(U.width=$),U.height!=ge&&(U.height=ge),typeof U.style<"u"&&(Oe!=$||nt!=ge?(U.style.setProperty("width",Oe+"px","important"),U.style.setProperty("height",nt+"px","important")):(U.style.removeProperty("width"),U.style.removeProperty("height"))))},wgetRequests:{},nextWgetRequestHandle:0,getNextWgetRequestHandle:function(){var U=Le.nextWgetRequestHandle;return Le.nextWgetRequestHandle++,U}};function Ie(){return Date.now()-Ge.startTime|0}function qe(U){var $=Ge.surfaces[U];if($.locked++,$.locked>1||($.buffer||($.buffer=qs($.width*$.height*4),he[U+20>>2]=$.buffer),he[U+20>>2]=$.buffer,U==Ge.screen&&i.screenIsReadOnly&&$.image))return 0;if($.image=$.ctx.getImageData(0,0,$.width,$.height),U==Ge.screen&&Ge.defaults.opaqueFrontBuffer)for(var ge=$.image.data,Oe=ge.length,nt=0;nt<Oe/4;nt++)ge[nt*4+3]=255;{if($.isFlagSet(2097152))throw"CopyOnLock is not supported for SDL_LockSurface with SDL_HWPALETTE flag set"+new Error().stack;le.set($.image.data,$.buffer)}return 0}function ct(){return Ge.unicode}function dt(){return Ge.ttfContext}function Bt(){return Ge.audio}var Ge={defaults:{width:320,height:200,copyOnLock:!0,discardOnLock:!1,opaqueFrontBuffer:!0},version:null,surfaces:{},canvasPool:[],events:[],fonts:[null],audios:[null],rwops:[null],music:{audio:null,volume:1},mixerFrequency:22050,mixerFormat:32784,mixerNumChannels:2,mixerChunkSize:1024,channelMinimumNumber:0,GL:!1,glAttributes:{0:3,1:3,2:2,3:0,4:0,5:1,6:16,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:1,16:0,17:0,18:0},keyboardState:null,keyboardMap:{},canRequestFullscreen:!1,isRequestingFullscreen:!1,textInput:!1,startTime:null,initFlags:0,buttonState:0,modState:0,DOMButtons:[0,0,0],DOMEventToSDLEvent:{},TOUCH_DEFAULT_ID:0,eventHandler:null,eventHandlerContext:null,eventHandlerTemp:0,keyCodes:{16:1249,17:1248,18:1250,20:1081,33:1099,34:1102,35:1101,36:1098,37:1104,38:1106,39:1103,40:1105,44:316,45:1097,46:127,91:1251,93:1125,96:1122,97:1113,98:1114,99:1115,100:1116,101:1117,102:1118,103:1119,104:1120,105:1121,106:1109,107:1111,109:1110,110:1123,111:1108,112:1082,113:1083,114:1084,115:1085,116:1086,117:1087,118:1088,119:1089,120:1090,121:1091,122:1092,123:1093,124:1128,125:1129,126:1130,127:1131,128:1132,129:1133,130:1134,131:1135,132:1136,133:1137,134:1138,135:1139,144:1107,160:94,161:33,162:34,163:35,164:36,165:37,166:38,167:95,168:40,169:41,170:42,171:43,172:124,173:45,174:123,175:125,176:126,181:127,182:129,183:128,188:44,190:46,191:47,192:96,219:91,220:92,221:93,222:39,224:1251},scanCodes:{8:42,9:43,13:40,27:41,32:44,35:204,39:53,44:54,46:55,47:56,48:39,49:30,50:31,51:32,52:33,53:34,54:35,55:36,56:37,57:38,58:203,59:51,61:46,91:47,92:49,93:48,96:52,97:4,98:5,99:6,100:7,101:8,102:9,103:10,104:11,105:12,106:13,107:14,108:15,109:16,110:17,111:18,112:19,113:20,114:21,115:22,116:23,117:24,118:25,119:26,120:27,121:28,122:29,127:76,305:224,308:226,316:70},loadRect:function(U){return{x:he[U+0>>2],y:he[U+4>>2],w:he[U+8>>2],h:he[U+12>>2]}},updateRect:function(U,$){he[U>>2]=$.x,he[U+4>>2]=$.y,he[U+8>>2]=$.w,he[U+12>>2]=$.h},intersectionOfRects:function(U,$){var ge=Math.max(U.x,$.x),Oe=Math.max(U.y,$.y),nt=Math.min(U.x+U.w,$.x+$.w),Ct=Math.min(U.y+U.h,$.y+$.h);return{x:ge,y:Oe,w:Math.max(ge,nt)-ge,h:Math.max(Oe,Ct)-Oe}},checkPixelFormat:function(U){},loadColorToCSSRGB:function(U){var $=he[U>>2];return"rgb("+($&255)+","+($>>8&255)+","+($>>16&255)+")"},loadColorToCSSRGBA:function(U){var $=he[U>>2];return"rgba("+($&255)+","+($>>8&255)+","+($>>16&255)+","+($>>24&255)/255+")"},translateColorToCSSRGBA:function(U){return"rgba("+(U&255)+","+(U>>8&255)+","+(U>>16&255)+","+(U>>>24)/255+")"},translateRGBAToCSSRGBA:function(U,$,ge,Oe){return"rgba("+(U&255)+","+($&255)+","+(ge&255)+","+(Oe&255)/255+")"},translateRGBAToColor:function(U,$,ge,Oe){return U|$<<8|ge<<16|Oe<<24},makeSurface:function(U,$,ge,Oe,nt,Ct,zt,Rt,bi){ge=ge||0;var yi=ge&1,_i=ge&2097152,ui=ge&67108864,ji=qs(60),ln=qs(44),In=_i?1:4,ft=0;!yi&&!ui&&(ft=qs(U*$*4)),he[ji>>2]=ge,he[ji+4>>2]=ln,he[ji+8>>2]=U,he[ji+12>>2]=$,he[ji+16>>2]=U*In,he[ji+20>>2]=ft,he[ji+36>>2]=0,he[ji+40>>2]=0,he[ji+44>>2]=i.canvas.width,he[ji+48>>2]=i.canvas.height,he[ji+56>>2]=1,he[ln>>2]=-2042224636,he[ln+4>>2]=0,Re[ln+8>>0]=In*8,Re[ln+9>>0]=In,he[ln+12>>2]=Ct||255,he[ln+16>>2]=zt||65280,he[ln+20>>2]=Rt||16711680,he[ln+24>>2]=bi||4278190080,Ge.GL=Ge.GL||ui;var p;Oe?p=i.canvas:(Ge.canvasPool.length>0?p=Ge.canvasPool.pop():p=document.createElement("canvas"),p.width=U,p.height=$);var Di={antialias:Ge.glAttributes[13]!=0,depth:Ge.glAttributes[6]>0,stencil:Ge.glAttributes[7]>0,alpha:Ge.glAttributes[3]>0},c=Le.createContext(p,ui,Oe,Di);return Ge.surfaces[ji]={width:U,height:$,canvas:p,ctx:c,surf:ji,buffer:ft,pixelFormat:ln,alpha:255,flags:ge,locked:0,usePageCanvas:Oe,source:nt,isFlagSet:function(F){return ge&F}},ji},copyIndexedColorData:function(U,$,ge,Oe,nt){if(!!U.colors){var Ct=i.canvas.width,zt=i.canvas.height,Rt=$||0,bi=ge||0,yi=(Oe||Ct-Rt)+Rt,_i=(nt||zt-bi)+bi,ui=U.buffer;U.image.data32||(U.image.data32=new Uint32Array(U.image.data.buffer));for(var ji=U.image.data32,ln=U.colors32,In=bi;In<_i;++In)for(var ft=In*Ct,p=Rt;p<yi;++p)ji[ft+p]=ln[le[ui+ft+p>>0]]}},freeSurface:function(U){var $=U+56,ge=he[$>>2];if(ge>1){he[$>>2]=ge-1;return}var Oe=Ge.surfaces[U];!Oe.usePageCanvas&&Oe.canvas&&Ge.canvasPool.push(Oe.canvas),Oe.buffer&&Ea(Oe.buffer),Ea(Oe.pixelFormat),Ea(U),Ge.surfaces[U]=null,U===Ge.screen&&(Ge.screen=null)},blitSurface:function(U,$,ge,Oe,nt){var Ct=Ge.surfaces[U],zt=Ge.surfaces[ge],Rt,bi;if($?Rt=Ge.loadRect($):Rt={x:0,y:0,w:Ct.width,h:Ct.height},Oe?bi=Ge.loadRect(Oe):bi={x:0,y:0,w:Ct.width,h:Ct.height},zt.clipRect){var yi=!nt||Rt.w===0?1:Rt.w/bi.w,_i=!nt||Rt.h===0?1:Rt.h/bi.h;bi=Ge.intersectionOfRects(zt.clipRect,bi),Rt.w=bi.w*yi,Rt.h=bi.h*_i,Oe&&Ge.updateRect(Oe,bi)}var ui,ji;if(nt?(ui=bi.w,ji=bi.h):(ui=Rt.w,ji=Rt.h),Rt.w===0||Rt.h===0||ui===0||ji===0)return 0;var ln=zt.ctx.globalAlpha;return zt.ctx.globalAlpha=Ct.alpha/255,zt.ctx.drawImage(Ct.canvas,Rt.x,Rt.y,Rt.w,Rt.h,bi.x,bi.y,ui,ji),zt.ctx.globalAlpha=ln,ge!=Ge.screen&&(C("WARNING: copying canvas data to memory for compatibility"),qe(ge),zt.locked--),0},downFingers:{},savedKeydown:null,receiveEvent:function(U){function $(){for(var _i in Ge.keyboardMap)Ge.events.push({type:"keyup",keyCode:Ge.keyboardMap[_i]})}switch(U.type){case"touchstart":case"touchmove":{U.preventDefault();var ge=[];if(U.type==="touchstart")for(var Oe=0;Oe<U.touches.length;Oe++){var nt=U.touches[Oe];Ge.downFingers[nt.identifier]!=!0&&(Ge.downFingers[nt.identifier]=!0,ge.push(nt))}else ge=U.touches;var Ct=ge[0];if(Ct){U.type=="touchstart"&&(Ge.DOMButtons[0]=1);var zt;switch(U.type){case"touchstart":zt="mousedown";break;case"touchmove":zt="mousemove";break}var Rt={type:zt,button:0,pageX:Ct.clientX,pageY:Ct.clientY};Ge.events.push(Rt)}for(var Oe=0;Oe<ge.length;Oe++){var nt=ge[Oe];Ge.events.push({type:U.type,touch:nt})}break}case"touchend":{U.preventDefault();for(var Oe=0;Oe<U.changedTouches.length;Oe++){var nt=U.changedTouches[Oe];Ge.downFingers[nt.identifier]===!0&&delete Ge.downFingers[nt.identifier]}var Rt={type:"mouseup",button:0,pageX:U.changedTouches[0].clientX,pageY:U.changedTouches[0].clientY};Ge.DOMButtons[0]=0,Ge.events.push(Rt);for(var Oe=0;Oe<U.changedTouches.length;Oe++){var nt=U.changedTouches[Oe];Ge.events.push({type:"touchend",touch:nt})}break}case"DOMMouseScroll":case"mousewheel":case"wheel":var bi=-Le.getMouseWheelDelta(U);bi=bi==0?0:bi>0?Math.max(bi,1):Math.min(bi,-1);var yi=bi>0?3:4;Ge.events.push({type:"mousedown",button:yi,pageX:U.pageX,pageY:U.pageY}),Ge.events.push({type:"mouseup",button:yi,pageX:U.pageX,pageY:U.pageY}),Ge.events.push({type:"wheel",deltaX:0,deltaY:bi}),U.preventDefault();break;case"mousemove":if(Ge.DOMButtons[0]===1&&Ge.events.push({type:"touchmove",touch:{identifier:0,deviceID:-1,pageX:U.pageX,pageY:U.pageY}}),Le.pointerLock&&("mozMovementX"in U&&(U.movementX=U.mozMovementX,U.movementY=U.mozMovementY),U.movementX==0&&U.movementY==0)){U.preventDefault();return}case"keydown":case"keyup":case"keypress":case"mousedown":case"mouseup":if((U.type!=="keydown"||!ct()&&!Ge.textInput||U.keyCode===8||U.keyCode===9)&&U.preventDefault(),U.type=="mousedown")Ge.DOMButtons[U.button]=1,Ge.events.push({type:"touchstart",touch:{identifier:0,deviceID:-1,pageX:U.pageX,pageY:U.pageY}});else if(U.type=="mouseup"){if(!Ge.DOMButtons[U.button])return;Ge.events.push({type:"touchend",touch:{identifier:0,deviceID:-1,pageX:U.pageX,pageY:U.pageY}}),Ge.DOMButtons[U.button]=0}U.type==="keydown"||U.type==="mousedown"?Ge.canRequestFullscreen=!0:(U.type==="keyup"||U.type==="mouseup")&&(Ge.canRequestFullscreen=!1),U.type==="keypress"&&Ge.savedKeydown?(Ge.savedKeydown.keypressCharCode=U.charCode,Ge.savedKeydown=null):U.type==="keydown"&&(Ge.savedKeydown=U),(U.type!=="keypress"||Ge.textInput)&&Ge.events.push(U);break;case"mouseout":for(var Oe=0;Oe<3;Oe++)Ge.DOMButtons[Oe]&&(Ge.events.push({type:"mouseup",button:Oe,pageX:U.pageX,pageY:U.pageY}),Ge.DOMButtons[Oe]=0);U.preventDefault();break;case"focus":Ge.events.push(U),U.preventDefault();break;case"blur":Ge.events.push(U),$(),U.preventDefault();break;case"visibilitychange":Ge.events.push({type:"visibilitychange",visible:!document.hidden}),$(),U.preventDefault();break;case"unload":Le.mainLoop.runner&&(Ge.events.push(U),Le.mainLoop.runner());return;case"resize":Ge.events.push(U),U.preventDefault&&U.preventDefault();break}Ge.events.length>=1e4&&(v("SDL event queue full, dropping events"),Ge.events=Ge.events.slice(0,1e4))},lookupKeyCodeForEvent:function(U){var $=U.keyCode;return $>=65&&$<=90?$+=32:($=Ge.keyCodes[U.keyCode]||U.keyCode,U.location===2&&$>=(224|1<<10)&&$<=(227|1<<10)&&($+=4)),$},handleEvent:function(U){if(!U.handled)switch(U.handled=!0,U.type){case"touchstart":case"touchend":case"touchmove":{Le.calculateMouseEvent(U);break}case"keydown":case"keyup":{var $=U.type==="keydown",ge=Ge.lookupKeyCodeForEvent(U);Re[Ge.keyboardState+ge>>0]=$,Ge.modState=(Re[Ge.keyboardState+1248>>0]?64:0)|(Re[Ge.keyboardState+1249>>0]?1:0)|(Re[Ge.keyboardState+1250>>0]?256:0)|(Re[Ge.keyboardState+1252>>0]?128:0)|(Re[Ge.keyboardState+1253>>0]?2:0)|(Re[Ge.keyboardState+1254>>0]?512:0),$?Ge.keyboardMap[ge]=U.keyCode:delete Ge.keyboardMap[ge];break}case"mousedown":case"mouseup":U.type=="mousedown"?Ge.buttonState|=1<<U.button:U.type=="mouseup"&&(Ge.buttonState&=~(1<<U.button));case"mousemove":{Le.calculateMouseEvent(U);break}}},flushEventsToHandler:function(){},pollEvent:function(U){if(Ge.initFlags&512&&Ge.joystickEventState&&Ge.queryJoysticks(),U){for(;Ge.events.length>0;)if(Ge.makeCEvent(Ge.events.shift(),U)!==!1)return 1;return 0}else return Ge.events.length>0},makeCEvent:function(U,$){if(typeof U=="number"){Zs($,U,28),Ea(U);return}switch(Ge.handleEvent(U),U.type){case"keydown":case"keyup":{var ge=U.type==="keydown",Oe=Ge.lookupKeyCodeForEvent(U),nt;Oe>=1024?nt=Oe-1024:nt=Ge.scanCodes[Oe]||Oe,he[$>>2]=Ge.DOMEventToSDLEvent[U.type],Re[$+8>>0]=ge?1:0,Re[$+9>>0]=0,he[$+12>>2]=nt,he[$+16>>2]=Oe,Se[$+20>>1]=Ge.modState,he[$+24>>2]=U.keypressCharCode||Oe;break}case"keypress":{he[$>>2]=Ge.DOMEventToSDLEvent[U.type];for(var Ct=Zo(String.fromCharCode(U.charCode)),zt=0;zt<Ct.length;++zt)Re[$+(8+zt)>>0]=Ct[zt];break}case"mousedown":case"mouseup":case"mousemove":{if(U.type!="mousemove"){var ge=U.type==="mousedown";he[$>>2]=Ge.DOMEventToSDLEvent[U.type],he[$+4>>2]=0,he[$+8>>2]=0,he[$+12>>2]=0,Re[$+16>>0]=U.button+1,Re[$+17>>0]=ge?1:0,he[$+20>>2]=Le.mouseX,he[$+24>>2]=Le.mouseY}else he[$>>2]=Ge.DOMEventToSDLEvent[U.type],he[$+4>>2]=0,he[$+8>>2]=0,he[$+12>>2]=0,he[$+16>>2]=Ge.buttonState,he[$+20>>2]=Le.mouseX,he[$+24>>2]=Le.mouseY,he[$+28>>2]=Le.mouseMovementX,he[$+32>>2]=Le.mouseMovementY;break}case"wheel":{he[$>>2]=Ge.DOMEventToSDLEvent[U.type],he[$+16>>2]=U.deltaX,he[$+20>>2]=U.deltaY;break}case"touchstart":case"touchend":case"touchmove":{var Rt=U.touch;if(!Le.touches[Rt.identifier])break;var bi=i.canvas.width,yi=i.canvas.height,_i=Le.touches[Rt.identifier].x/bi,ui=Le.touches[Rt.identifier].y/yi,ji=Le.lastTouches[Rt.identifier].x/bi,ln=Le.lastTouches[Rt.identifier].y/yi,In=_i-ji,ft=ui-ln;if(Rt.deviceID===void 0&&(Rt.deviceID=Ge.TOUCH_DEFAULT_ID),In===0&&ft===0&&U.type==="touchmove")return!1;he[$>>2]=Ge.DOMEventToSDLEvent[U.type],he[$+4>>2]=Ie(),Zr=[Rt.deviceID>>>0,(Gn=Rt.deviceID,+mi(Gn)>=1?Gn>0?(ti(+Ci(Gn/4294967296),4294967295)|0)>>>0:~~+Zi((Gn-+(~~Gn>>>0))/4294967296)>>>0:0)],he[$+8>>2]=Zr[0],he[$+12>>2]=Zr[1],Zr=[Rt.identifier>>>0,(Gn=Rt.identifier,+mi(Gn)>=1?Gn>0?(ti(+Ci(Gn/4294967296),4294967295)|0)>>>0:~~+Zi((Gn-+(~~Gn>>>0))/4294967296)>>>0:0)],he[$+16>>2]=Zr[0],he[$+20>>2]=Zr[1],Be[$+24>>2]=_i,Be[$+28>>2]=ui,Be[$+32>>2]=In,Be[$+36>>2]=ft,Rt.force!==void 0?Be[$+40>>2]=Rt.force:Be[$+40>>2]=U.type=="touchend"?0:1;break}case"unload":{he[$>>2]=Ge.DOMEventToSDLEvent[U.type];break}case"resize":{he[$>>2]=Ge.DOMEventToSDLEvent[U.type],he[$+4>>2]=U.w,he[$+8>>2]=U.h;break}case"joystick_button_up":case"joystick_button_down":{var p=U.type==="joystick_button_up"?0:1;he[$>>2]=Ge.DOMEventToSDLEvent[U.type],Re[$+4>>0]=U.index,Re[$+5>>0]=U.button,Re[$+6>>0]=p;break}case"joystick_axis_motion":{he[$>>2]=Ge.DOMEventToSDLEvent[U.type],Re[$+4>>0]=U.index,Re[$+5>>0]=U.axis,he[$+8>>2]=Ge.joystickAxisValueConversion(U.value);break}case"focus":{var Di=12;he[$>>2]=Ge.DOMEventToSDLEvent[U.type],he[$+4>>2]=0,Re[$+8>>0]=Di;break}case"blur":{var c=13;he[$>>2]=Ge.DOMEventToSDLEvent[U.type],he[$+4>>2]=0,Re[$+8>>0]=c;break}case"visibilitychange":{var F=1,mn=2,$n=U.visible?F:mn;he[$>>2]=Ge.DOMEventToSDLEvent[U.type],he[$+4>>2]=0,Re[$+8>>0]=$n;break}default:throw"Unhandled SDL event: "+U.type}},makeFontString:function(U,$){return $.charAt(0)!="'"&&$.charAt(0)!='"'&&($='"'+$+'"'),U+"px "+$+", serif"},estimateTextWidth:function(U,$){var ge=U.size,Oe=Ge.makeFontString(ge,U.name),nt=dt();nt.font=Oe;var Ct=nt.measureText($).width|0;return Ct},allocateChannels:function(U){if(!(Ge.numChannels&&Ge.numChannels>=U&&U!=0)){Ge.numChannels=U,Ge.channels=[];for(var $=0;$<U;$++)Ge.channels[$]={audio:null,volume:1}}},setGetVolume:function(U,$){if(!U)return 0;var ge=U.volume*128;if($!=-1&&(U.volume=Math.min(Math.max($,0),128)/128,U.audio))try{U.audio.volume=U.volume,U.audio.webAudioGainNode&&(U.audio.webAudioGainNode.gain.value=U.volume)}catch(Oe){v("setGetVolume failed to set audio volume: "+Oe)}return ge},setPannerPosition:function(U,$,ge,Oe){!U||U.audio&&U.audio.webAudioPannerNode&&U.audio.webAudioPannerNode.setPosition($,ge,Oe)},playWebAudio:function(U){if(!!U&&!U.webAudioNode&&!!Ge.webAudioAvailable())try{var $=U.resource.webAudio;if(U.paused=!1,!$.decodedBuffer){$.onDecodeComplete===void 0&&Kt("Cannot play back audio object that was not loaded"),$.onDecodeComplete.push(function(){U.paused||Ge.playWebAudio(U)});return}U.webAudioNode=Ge.audioContext.createBufferSource(),U.webAudioNode.buffer=$.decodedBuffer,U.webAudioNode.loop=U.loop,U.webAudioNode.onended=function(){U.onended()},U.webAudioPannerNode=Ge.audioContext.createPanner(),U.webAudioPannerNode.setPosition(0,0,-.5),U.webAudioPannerNode.panningModel="equalpower",U.webAudioGainNode=Ge.audioContext.createGain(),U.webAudioGainNode.gain.value=U.volume,U.webAudioNode.connect(U.webAudioPannerNode),U.webAudioPannerNode.connect(U.webAudioGainNode),U.webAudioGainNode.connect(Ge.audioContext.destination),U.webAudioNode.start(0,U.currentPosition),U.startTime=Ge.audioContext.currentTime-U.currentPosition}catch(ge){v("playWebAudio failed: "+ge)}},pauseWebAudio:function(U){if(!!U){if(U.webAudioNode)try{U.currentPosition=(Ge.audioContext.currentTime-U.startTime)%U.resource.webAudio.decodedBuffer.duration,U.webAudioNode.onended=void 0,U.webAudioNode.stop(0),U.webAudioNode=void 0}catch($){v("pauseWebAudio failed: "+$)}U.paused=!0}},openAudioContext:function(){Ge.audioContext||(typeof AudioContext<"u"?Ge.audioContext=new AudioContext:typeof webkitAudioContext<"u"&&(Ge.audioContext=new webkitAudioContext))},webAudioAvailable:function(){return!!Ge.audioContext},fillWebAudioBufferFromHeap:function(U,$,ge){for(var Oe=Bt(),nt=Oe.channels,Ct=0;Ct<nt;++Ct){var zt=ge.getChannelData(Ct);if(zt.length!=$)throw"Web Audio output buffer length mismatch! Destination size: "+zt.length+" samples vs expected "+$+" samples!";if(Oe.format==32784)for(var Rt=0;Rt<$;++Rt)zt[Rt]=Se[U+(Rt*nt+Ct)*2>>1]/32768;else if(Oe.format==8)for(var Rt=0;Rt<$;++Rt){var bi=Re[U+(Rt*nt+Ct)>>0];zt[Rt]=(bi>=0?bi-128:bi+128)/128}else if(Oe.format==33056)for(var Rt=0;Rt<$;++Rt)zt[Rt]=Be[U+(Rt*nt+Ct)*4>>2];else throw"Invalid SDL audio format "+Oe.format+"!"}},debugSurface:function(U){console.log("dumping surface "+[U.surf,U.source,U.width,U.height]);for(var $=U.ctx.getImageData(0,0,U.width,U.height),ge=$.data,Oe=Math.min(U.width,U.height),nt=0;nt<Oe;nt++)console.log("   diagonal "+nt+":"+[ge[nt*U.width*4+nt*4+0],ge[nt*U.width*4+nt*4+1],ge[nt*U.width*4+nt*4+2],ge[nt*U.width*4+nt*4+3]])},joystickEventState:1,lastJoystickState:{},joystickNamePool:{},recordJoystickState:function(U,$){for(var ge=new Array($.buttons.length),Oe=0;Oe<$.buttons.length;Oe++)ge[Oe]=Ge.getJoystickButtonState($.buttons[Oe]);Ge.lastJoystickState[U]={buttons:ge,axes:$.axes.slice(0),timestamp:$.timestamp,index:$.index,id:$.id}},getJoystickButtonState:function(U){return typeof U=="object"?U.pressed:U>0},queryJoysticks:function(){for(var U in Ge.lastJoystickState){var $=Ge.getGamepad(U-1),ge=Ge.lastJoystickState[U];if(typeof $>"u"||$===null)return;if(typeof $.timestamp!="number"||$.timestamp!==ge.timestamp||!$.timestamp){var Oe;for(Oe=0;Oe<$.buttons.length;Oe++){var nt=Ge.getJoystickButtonState($.buttons[Oe]);nt!==ge.buttons[Oe]&&Ge.events.push({type:nt?"joystick_button_down":"joystick_button_up",joystick:U,index:U-1,button:Oe})}for(Oe=0;Oe<$.axes.length;Oe++)$.axes[Oe]!==ge.axes[Oe]&&Ge.events.push({type:"joystick_axis_motion",joystick:U,index:U-1,axis:Oe,value:$.axes[Oe]});Ge.recordJoystickState(U,$)}}},joystickAxisValueConversion:function(U){return U=Math.min(1,Math.max(U,-1)),Math.ceil((U+1)*32767.5-32768)},getGamepads:function(){var U=navigator.getGamepads||navigator.webkitGamepads||navigator.mozGamepads||navigator.gamepads||navigator.webkitGetGamepads;return U!==void 0?U.apply(navigator):[]},getGamepad:function(U){var $=Ge.getGamepads();return $.length>U&&U>=0?$[U]:null}};function Yt(U,$,ge,Oe,nt,Ct,zt,Rt){return Ge.makeSurface($,ge,U,!1,"CreateRGBSurface",nt,Ct,zt,Rt)}function Ft(U){}function oi(U){U&&Ge.freeSurface(U)}function yt(U){if(Ge.startTime=Date.now(),Ge.initFlags=U,!i.doNotCaptureKeyboard){var $=i.keyboardListeningElement||document;$.addEventListener("keydown",Ge.receiveEvent),$.addEventListener("keyup",Ge.receiveEvent),$.addEventListener("keypress",Ge.receiveEvent),window.addEventListener("focus",Ge.receiveEvent),window.addEventListener("blur",Ge.receiveEvent),document.addEventListener("visibilitychange",Ge.receiveEvent)}return window.addEventListener("unload",Ge.receiveEvent),Ge.keyboardState=qs(65536),Ss(Ge.keyboardState,0,65536),Ge.DOMEventToSDLEvent.keydown=768,Ge.DOMEventToSDLEvent.keyup=769,Ge.DOMEventToSDLEvent.keypress=771,Ge.DOMEventToSDLEvent.mousedown=1025,Ge.DOMEventToSDLEvent.mouseup=1026,Ge.DOMEventToSDLEvent.mousemove=1024,Ge.DOMEventToSDLEvent.wheel=1027,Ge.DOMEventToSDLEvent.touchstart=1792,Ge.DOMEventToSDLEvent.touchend=1793,Ge.DOMEventToSDLEvent.touchmove=1794,Ge.DOMEventToSDLEvent.unload=256,Ge.DOMEventToSDLEvent.resize=28673,Ge.DOMEventToSDLEvent.visibilitychange=512,Ge.DOMEventToSDLEvent.focus=512,Ge.DOMEventToSDLEvent.blur=512,Ge.DOMEventToSDLEvent.joystick_axis_motion=1536,Ge.DOMEventToSDLEvent.joystick_button_down=1539,Ge.DOMEventToSDLEvent.joystick_button_up=1540,0}function Ri(U){var $=U.getExtension("ANGLE_instanced_arrays");if($)return U.vertexAttribDivisor=function(ge,Oe){$.vertexAttribDivisorANGLE(ge,Oe)},U.drawArraysInstanced=function(ge,Oe,nt,Ct){$.drawArraysInstancedANGLE(ge,Oe,nt,Ct)},U.drawElementsInstanced=function(ge,Oe,nt,Ct,zt){$.drawElementsInstancedANGLE(ge,Oe,nt,Ct,zt)},1}function Ii(U){var $=U.getExtension("OES_vertex_array_object");if($)return U.createVertexArray=function(){return $.createVertexArrayOES()},U.deleteVertexArray=function(ge){$.deleteVertexArrayOES(ge)},U.bindVertexArray=function(ge){$.bindVertexArrayOES(ge)},U.isVertexArray=function(ge){return $.isVertexArrayOES(ge)},1}function En(U){var $=U.getExtension("WEBGL_draw_buffers");if($)return U.drawBuffers=function(ge,Oe){$.drawBuffersWEBGL(ge,Oe)},1}function Sn(U){return!!(U.multiDrawWebgl=U.getExtension("WEBGL_multi_draw"))}var xt={counter:1,buffers:[],programs:[],framebuffers:[],renderbuffers:[],textures:[],uniforms:[],shaders:[],vaos:[],contexts:[],offscreenCanvases:{},timerQueriesEXT:[],programInfos:{},stringCache:{},unpackAlignment:4,recordError:function($){xt.lastError||(xt.lastError=$)},getNewId:function(U){for(var $=xt.counter++,ge=U.length;ge<$;ge++)U[ge]=null;return $},getSource:function(U,$,ge,Oe){for(var nt="",Ct=0;Ct<$;++Ct){var zt=Oe?he[Oe+Ct*4>>2]:-1;nt+=ve(he[ge+Ct*4>>2],zt<0?void 0:zt)}return nt},createContext:function(U,$){var ge=U.getContext("webgl",$)||U.getContext("experimental-webgl",$);if(!ge)return 0;var Oe=xt.registerContext(ge,$);return Oe},registerContext:function(U,$){var ge=xt.getNewId(xt.contexts),Oe={handle:ge,attributes:$,version:$.majorVersion,GLctx:U};return Oe.cannotHandleOffsetsInUniformArrayViews=function(nt){function Ct(yi,_i){var ui=nt.createShader(_i);return nt.shaderSource(ui,yi),nt.compileShader(ui),ui}try{var zt=nt.createProgram();nt.attachShader(zt,Ct("attribute vec4 p;void main(){gl_Position=p;}",35633)),nt.attachShader(zt,Ct("precision lowp float;uniform vec4 u;void main(){gl_FragColor=u;}",35632)),nt.linkProgram(zt);var Rt=new Float32Array(8);Rt[4]=1,nt.useProgram(zt);var bi=nt.getUniformLocation(zt,"u");return nt.uniform4fv(bi,Rt.subarray(4,8)),!nt.getUniform(zt,bi)[0]}catch{return!1}}(),U.canvas&&(U.canvas.GLctxObject=Oe),xt.contexts[ge]=Oe,(typeof $.enableExtensionsByDefault>"u"||$.enableExtensionsByDefault)&&xt.initExtensions(Oe),ge},makeContextCurrent:function(U){return xt.currentContext=xt.contexts[U],i.ctx=zr=xt.currentContext&&xt.currentContext.GLctx,!(U&&!zr)},getContext:function(U){return xt.contexts[U]},deleteContext:function(U){xt.currentContext===xt.contexts[U]&&(xt.currentContext=null),typeof JSEvents=="object"&&JSEvents.removeAllHandlersOnTarget(xt.contexts[U].GLctx.canvas),xt.contexts[U]&&xt.contexts[U].GLctx.canvas&&(xt.contexts[U].GLctx.canvas.GLctxObject=void 0),xt.contexts[U]=null},initExtensions:function(U){if(U||(U=xt.currentContext),!U.initExtensionsDone){U.initExtensionsDone=!0;var $=U.GLctx;Ri($),Ii($),En($),$.disjointTimerQueryExt=$.getExtension("EXT_disjoint_timer_query"),Sn($);var ge=["OES_texture_float","OES_texture_half_float","OES_standard_derivatives","OES_vertex_array_object","WEBGL_compressed_texture_s3tc","WEBGL_depth_texture","OES_element_index_uint","EXT_texture_filter_anisotropic","EXT_frag_depth","WEBGL_draw_buffers","ANGLE_instanced_arrays","OES_texture_float_linear","OES_texture_half_float_linear","EXT_blend_minmax","EXT_shader_texture_lod","EXT_texture_norm16","WEBGL_compressed_texture_pvrtc","EXT_color_buffer_half_float","WEBGL_color_buffer_float","EXT_sRGB","WEBGL_compressed_texture_etc1","EXT_disjoint_timer_query","WEBGL_compressed_texture_etc","WEBGL_compressed_texture_astc","EXT_color_buffer_float","WEBGL_compressed_texture_s3tc_srgb","EXT_disjoint_timer_query_webgl2","WEBKIT_WEBGL_compressed_texture_pvrtc"],Oe=$.getSupportedExtensions()||[];Oe.forEach(function(nt){ge.indexOf(nt)!=-1&&$.getExtension(nt)})}},populateUniformTable:function(U){for(var $=xt.programs[U],ge=xt.programInfos[U]={uniforms:{},maxUniformLength:0,maxAttributeLength:-1,maxUniformBlockNameLength:-1},Oe=ge.uniforms,nt=zr.getProgramParameter($,35718),Ct=0;Ct<nt;++Ct){var zt=zr.getActiveUniform($,Ct),Rt=zt.name;ge.maxUniformLength=Math.max(ge.maxUniformLength,Rt.length+1),Rt.slice(-1)=="]"&&(Rt=Rt.slice(0,Rt.lastIndexOf("[")));var bi=zr.getUniformLocation($,Rt);if(bi){var yi=xt.getNewId(xt.uniforms);Oe[Rt]=[zt.size,yi],xt.uniforms[yi]=bi;for(var _i=1;_i<zt.size;++_i){var ui=Rt+"["+_i+"]";bi=zr.getUniformLocation($,ui),yi=xt.getNewId(xt.uniforms),xt.uniforms[yi]=bi}}}}};function Tn(U,$,ge,Oe){["touchstart","touchend","touchmove","mousedown","mouseup","mousemove","DOMMouseScroll","mousewheel","wheel","mouseout"].forEach(function(Ct){i.canvas.addEventListener(Ct,Ge.receiveEvent,!0)});var nt=i.canvas;return U==0&&$==0&&(U=nt.width,$=nt.height),Ge.addedResizeListener||(Ge.addedResizeListener=!0,Le.resizeListeners.push(function(Ct,zt){Ge.settingVideoMode||Ge.receiveEvent({type:"resize",w:Ct,h:zt})})),Ge.settingVideoMode=!0,Le.setCanvasSize(U,$),Ge.settingVideoMode=!1,Ge.screen&&(Ge.freeSurface(Ge.screen),J(!Ge.screen)),Ge.GL&&(Oe=Oe|67108864),Ge.screen=Ge.makeSurface(U,$,Oe,!0,"screen"),Ge.screen}function Qn(U){J(!Ge.GL);var $=Ge.surfaces[U];if(!(!$.locked||--$.locked>0)){if($.isFlagSet(2097152))Ge.copyIndexedColorData($);else if($.colors)for(var ln=i.canvas.width,In=i.canvas.height,ft=$.buffer,ge=$.image.data,p=$.colors,Di=0;Di<In;Di++){for(var c=Di*ln*4,F=0;F<ln;F++){var bi=le[ft++>>0]*4,mn=c+F*4;ge[mn]=p[bi],ge[mn+1]=p[bi+1],ge[mn+2]=p[bi+2]}ft+=ln*3}else{var ge=$.image.data,Oe=$.buffer;J(Oe%4==0,"Invalid buffer offset: "+Oe);var nt=Oe>>2,Ct=0,zt=U==Ge.screen,Rt;if(typeof CanvasPixelArray<"u"&&ge instanceof CanvasPixelArray)for(Rt=ge.length;Ct<Rt;){var bi=he[nt];ge[Ct]=bi&255,ge[Ct+1]=bi>>8&255,ge[Ct+2]=bi>>16&255,ge[Ct+3]=zt?255:bi>>24&255,nt++,Ct+=4}else{var yi=new Uint32Array(ge.buffer);if(zt&&Ge.defaults.opaqueFrontBuffer){Rt=yi.length,yi.set(he.subarray(nt,nt+Rt));var _i=new Uint8Array(ge.buffer),ui=3,ji=ui+4*Rt;if(Rt%8==0)for(;ui<ji;)_i[ui]=255,ui=ui+4|0,_i[ui]=255,ui=ui+4|0,_i[ui]=255,ui=ui+4|0,_i[ui]=255,ui=ui+4|0,_i[ui]=255,ui=ui+4|0,_i[ui]=255,ui=ui+4|0,_i[ui]=255,ui=ui+4|0,_i[ui]=255,ui=ui+4|0;else for(;ui<ji;)_i[ui]=255,ui=ui+4|0}else yi.set(he.subarray(nt,nt+yi.length))}}$.ctx.putImageData($.image,0,0)}}function Lr(U,$,ge,Oe){return Ge.blitSurface(U,$,ge,Oe,!1)}function dr(){return 12032}var Cr=Uint8Array.prototype.copyWithin?function(U,$,ge){le.copyWithin(U,$,$+ge)}:function(U,$,ge){le.set(le.subarray($,$+ge),U)};function Pr(){return le.length}function to(U){try{return X.grow(U-Ce.byteLength+65535>>>16),We(X.buffer),1}catch{}}function Jr(U){U=U>>>0;var $=Pr(),ge=65536,Oe=2147483648;if(U>Oe)return!1;for(var nt=16777216,Ct=1;Ct<=4;Ct*=2){var zt=$*(1+.2/Ct);zt=Math.min(zt,U+100663296);var Rt=Math.min(Oe,we(Math.max(nt,U,zt),ge)),bi=to(Rt);if(bi)return!0}return!1}var vo={mappings:{},buffers:[null,[],[]],printChar:function(U,$){var ge=vo.buffers[U];$===0||$===10?((U===1?b:v)(Te(ge,0)),ge.length=0):ge.push($)},varargs:void 0,get:function(){vo.varargs+=4;var U=he[vo.varargs-4>>2];return U},getStr:function(U){var $=ve(U);return $},get64:function(U,$){return U}};function $o(U){return 0}function tl(U,$,ge,Oe,nt){}function Fo(U,$,ge,Oe){for(var nt=0,Ct=0;Ct<ge;Ct++){for(var zt=he[$+Ct*8>>2],Rt=he[$+(Ct*8+4)>>2],bi=0;bi<Rt;bi++)vo.printChar(U,le[zt+bi]);nt+=Rt}return he[Oe>>2]=nt,0}var Dt=function(U,$,ge,Oe){U||(U=this),this.parent=U,this.mount=U.mount,this.mounted=null,this.id=He.nextInode++,this.name=$,this.mode=ge,this.node_ops={},this.stream_ops={},this.rdev=Oe},rr=365,lr=146;Object.defineProperties(Dt.prototype,{read:{get:function(){return(this.mode&rr)===rr},set:function(U){U?this.mode|=rr:this.mode&=~rr}},write:{get:function(){return(this.mode&lr)===lr},set:function(U){U?this.mode|=lr:this.mode&=~lr}},isFolder:{get:function(){return He.isDir(this.mode)}},isDevice:{get:function(){return He.isChrdev(this.mode)}}}),He.FSNode=Dt,He.staticInit(),i.requestFullscreen=function($,ge){Le.requestFullscreen($,ge)},i.requestAnimationFrame=function($){Le.requestAnimationFrame($)},i.setCanvasSize=function($,ge,Oe){Le.setCanvasSize($,ge,Oe)},i.pauseMainLoop=function(){Le.mainLoop.pause()},i.resumeMainLoop=function(){Le.mainLoop.resume()},i.getUserMedia=function(){Le.getUserMedia()},i.createContext=function($,ge,Oe,nt){return Le.createContext($,ge,Oe,nt)};var zr;function Zo(U,$,ge){var Oe=ge>0?ge:it(U)+1,nt=new Array(Oe),Ct=_e(U,nt,0,nt.length);return $&&(nt.length=Ct),nt}function Ro(U){for(var $=[],ge=0;ge<U.length;ge++){var Oe=U[ge];Oe>255&&(Oe&=255),$.push(String.fromCharCode(Oe))}return $.join("")}var Sa=typeof atob=="function"?atob:function(U){var $="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",ge="",Oe,nt,Ct,zt,Rt,bi,yi,_i=0;U=U.replace(/[^A-Za-z0-9\+\/\=]/g,"");do zt=$.indexOf(U.charAt(_i++)),Rt=$.indexOf(U.charAt(_i++)),bi=$.indexOf(U.charAt(_i++)),yi=$.indexOf(U.charAt(_i++)),Oe=zt<<2|Rt>>4,nt=(Rt&15)<<4|bi>>2,Ct=(bi&3)<<6|yi,ge=ge+String.fromCharCode(Oe),bi!==64&&(ge=ge+String.fromCharCode(nt)),yi!==64&&(ge=ge+String.fromCharCode(Ct));while(_i<U.length);return ge};function ts(U){try{for(var $=Sa(U),ge=new Uint8Array($.length),Oe=0;Oe<$.length;++Oe)ge[Oe]=$.charCodeAt(Oe);return ge}catch{throw new Error("Converting base64 string to bytes failed.")}}function Vs(U){if(!!Ln(U))return ts(U.slice(wn.length))}var _s={SDL_CreateRGBSurface:Yt,SDL_Flip:Ft,SDL_FreeSurface:oi,SDL_Init:yt,SDL_LockSurface:qe,SDL_SetVideoMode:Tn,SDL_UnlockSurface:Qn,SDL_UpperBlit:Lr,emscripten_get_sbrk_ptr:dr,emscripten_memcpy_big:Cr,emscripten_resize_heap:Jr,fd_close:$o,fd_seek:tl,fd_write:Fo,getTempRet0:M,memory:X,setTempRet0:S,table:Z};Hn();var Ca=i.___wasm_call_ctors=function(){return(Ca=i.___wasm_call_ctors=i.asm.__wasm_call_ctors).apply(null,arguments)};i._WebpToSDL=function(){return(i._WebpToSDL=i.asm.WebpToSDL).apply(null,arguments)};var Ss=i._memset=function(){return(Ss=i._memset=i.asm.memset).apply(null,arguments)},Zs=i._memcpy=function(){return(Zs=i._memcpy=i.asm.memcpy).apply(null,arguments)},qs=i._malloc=function(){return(qs=i._malloc=i.asm.malloc).apply(null,arguments)},Ea=i._free=function(){return(Ea=i._free=i.asm.free).apply(null,arguments)},wl=i.___errno_location=function(){return(wl=i.___errno_location=i.asm.__errno_location).apply(null,arguments)},uu=i.stackSave=function(){return(uu=i.stackSave=i.asm.stackSave).apply(null,arguments)},xl=i.stackRestore=function(){return(xl=i.stackRestore=i.asm.stackRestore).apply(null,arguments)},cu=i.stackAlloc=function(){return(cu=i.stackAlloc=i.asm.stackAlloc).apply(null,arguments)};i.dynCall_vii=function(){return(i.dynCall_vii=i.asm.dynCall_vii).apply(null,arguments)},i.dynCall_vi=function(){return(i.dynCall_vi=i.asm.dynCall_vi).apply(null,arguments)},i.dynCall_ii=function(){return(i.dynCall_ii=i.asm.dynCall_ii).apply(null,arguments)},i.dynCall_iii=function(){return(i.dynCall_iii=i.asm.dynCall_iii).apply(null,arguments)},i.dynCall_iiii=function(){return(i.dynCall_iiii=i.asm.dynCall_iiii).apply(null,arguments)},i.dynCall_iiiiiii=function(){return(i.dynCall_iiiiiii=i.asm.dynCall_iiiiiii).apply(null,arguments)},i.dynCall_viiii=function(){return(i.dynCall_viiii=i.asm.dynCall_viiii).apply(null,arguments)},i.dynCall_viii=function(){return(i.dynCall_viii=i.asm.dynCall_viii).apply(null,arguments)},i.dynCall_viiiiii=function(){return(i.dynCall_viiiiii=i.asm.dynCall_viiiiii).apply(null,arguments)},i.dynCall_viiiii=function(){return(i.dynCall_viiiii=i.asm.dynCall_viiiii).apply(null,arguments)},i.dynCall_viiiiiiiii=function(){return(i.dynCall_viiiiiiiii=i.asm.dynCall_viiiiiiiii).apply(null,arguments)},i.dynCall_jiiii=function(){return(i.dynCall_jiiii=i.asm.dynCall_jiiii).apply(null,arguments)},i.dynCall_jiji=function(){return(i.dynCall_jiji=i.asm.dynCall_jiji).apply(null,arguments)};var ha=i.__growWasmMemory=function(){return(ha=i.__growWasmMemory=i.asm.__growWasmMemory).apply(null,arguments)};i.cwrap=Pe;var fa;function Io(U){this.name="ExitStatus",this.message="Program terminated with exit("+U+")",this.status=U}Q=function U(){fa||il(),fa||(Q=U)};function il(U){if(Me>0||(Je(),Me>0))return;function $(){fa||(fa=!0,i.calledRun=!0,!te&&(ei(),li(),i.onRuntimeInitialized&&i.onRuntimeInitialized(),Qt()))}i.setStatus?(i.setStatus("Running..."),setTimeout(function(){setTimeout(function(){i.setStatus("")},1),$()},1)):$()}if(i.run=il,i.preInit)for(typeof i.preInit=="function"&&(i.preInit=[i.preInit]);i.preInit.length>0;)i.preInit.pop()();il(),this.Module=i,this.webpToSdl=i.cwrap("WebpToSDL","number",["array","number"]),this.setCanvas=function(U){i.canvas=U},this.Module.doNotCaptureKeyboard=!0}const u7=()=>new Promise(i=>requestAnimationFrame(i));class Xp extends Error{}const c7=i=>/\.webp.*$/i.test(i.src);class h7{constructor({webp:e=new l7,webpSupport:t=s7(),detectWebpImage:o=c7}={}){this.busy=!1,this.cache={},this.webp=e,this.webpSupport=t,this.detectWebpImage=o}async decode(e){if(this.busy)throw new Xp("cannot decode when already busy");this.busy=!0;try{await u7();const t=document.createElement("canvas");return this.webp.setCanvas(t),this.webp.webpToSdl(e,e.length),this.busy=!1,t.toDataURL()}catch(t){throw this.busy=!1,t.name=Xp.name,t.message=`failed to decode webp image: ${t.message}`,t}}async polyfillImage(e){if(await this.webpSupport)return;const{src:t}=e;if(this.detectWebpImage(e)){if(this.cache[t]){e.src=this.cache[t];return}try{const o=r7(t)?o7(t):await d3(t),l=await this.decode(o);e.src=this.cache[t]=l}catch(o){throw o.name=Xp.name,o.message=`failed to polyfill image "${t}": ${o.message}`,o}}}async polyfillDocument({document:e=window.document}={}){if(await this.webpSupport)return null;for(const t of Array.from(e.querySelectorAll("img")))try{await this.polyfillImage(t)}catch(o){throw o.name=Xp.name,o.message=`webp image polyfill failed for url "${t.src}": ${o}`,o}}clearCache(){this.cache={}}}var p3={},Z1={};Z1.byteLength=p7;Z1.toByteArray=g7;Z1.fromByteArray=v7;var $c=[],Qu=[],f7=typeof Uint8Array<"u"?Uint8Array:Array,w2="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var S0=0,d7=w2.length;S0<d7;++S0)$c[S0]=w2[S0],Qu[w2.charCodeAt(S0)]=S0;Qu["-".charCodeAt(0)]=62;Qu["_".charCodeAt(0)]=63;function m3(i){var e=i.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var t=i.indexOf("=");t===-1&&(t=e);var o=t===e?0:4-t%4;return[t,o]}function p7(i){var e=m3(i),t=e[0],o=e[1];return(t+o)*3/4-o}function m7(i,e,t){return(e+t)*3/4-t}function g7(i){var e,t=m3(i),o=t[0],l=t[1],u=new f7(m7(i,o,l)),m=0,r=l>0?o-4:o,f;for(f=0;f<r;f+=4)e=Qu[i.charCodeAt(f)]<<18|Qu[i.charCodeAt(f+1)]<<12|Qu[i.charCodeAt(f+2)]<<6|Qu[i.charCodeAt(f+3)],u[m++]=e>>16&255,u[m++]=e>>8&255,u[m++]=e&255;return l===2&&(e=Qu[i.charCodeAt(f)]<<2|Qu[i.charCodeAt(f+1)]>>4,u[m++]=e&255),l===1&&(e=Qu[i.charCodeAt(f)]<<10|Qu[i.charCodeAt(f+1)]<<4|Qu[i.charCodeAt(f+2)]>>2,u[m++]=e>>8&255,u[m++]=e&255),u}function y7(i){return $c[i>>18&63]+$c[i>>12&63]+$c[i>>6&63]+$c[i&63]}function _7(i,e,t){for(var o,l=[],u=e;u<t;u+=3)o=(i[u]<<16&16711680)+(i[u+1]<<8&65280)+(i[u+2]&255),l.push(y7(o));return l.join("")}function v7(i){for(var e,t=i.length,o=t%3,l=[],u=16383,m=0,r=t-o;m<r;m+=u)l.push(_7(i,m,m+u>r?r:m+u));return o===1?(e=i[t-1],l.push($c[e>>2]+$c[e<<4&63]+"==")):o===2&&(e=(i[t-2]<<8)+i[t-1],l.push($c[e>>10]+$c[e>>4&63]+$c[e<<2&63]+"=")),l.join("")}var iy={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */iy.read=function(i,e,t,o,l){var u,m,r=l*8-o-1,f=(1<<r)-1,_=f>>1,b=-7,v=t?l-1:0,w=t?-1:1,x=i[e+v];for(v+=w,u=x&(1<<-b)-1,x>>=-b,b+=r;b>0;u=u*256+i[e+v],v+=w,b-=8);for(m=u&(1<<-b)-1,u>>=-b,b+=o;b>0;m=m*256+i[e+v],v+=w,b-=8);if(u===0)u=1-_;else{if(u===f)return m?NaN:(x?-1:1)*(1/0);m=m+Math.pow(2,o),u=u-_}return(x?-1:1)*m*Math.pow(2,u-o)};iy.write=function(i,e,t,o,l,u){var m,r,f,_=u*8-l-1,b=(1<<_)-1,v=b>>1,w=l===23?Math.pow(2,-24)-Math.pow(2,-77):0,x=o?0:u-1,C=o?1:-1,T=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(r=isNaN(e)?1:0,m=b):(m=Math.floor(Math.log(e)/Math.LN2),e*(f=Math.pow(2,-m))<1&&(m--,f*=2),m+v>=1?e+=w/f:e+=w*Math.pow(2,1-v),e*f>=2&&(m++,f/=2),m+v>=b?(r=0,m=b):m+v>=1?(r=(e*f-1)*Math.pow(2,l),m=m+v):(r=e*Math.pow(2,v-1)*Math.pow(2,l),m=0));l>=8;i[t+x]=r&255,x+=C,r/=256,l-=8);for(m=m<<l|r,_+=l;_>0;i[t+x]=m&255,x+=C,m/=256,_-=8);i[t+x-C]|=T*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(i){const e=Z1,t=iy,o=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;i.Buffer=r,i.SlowBuffer=O,i.INSPECT_MAX_BYTES=50;const l=2147483647;i.kMaxLength=l,r.TYPED_ARRAY_SUPPORT=u(),!r.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function u(){try{const Me=new Uint8Array(1),Q={foo:function(){return 42}};return Object.setPrototypeOf(Q,Uint8Array.prototype),Object.setPrototypeOf(Me,Q),Me.foo()===42}catch{return!1}}Object.defineProperty(r.prototype,"parent",{enumerable:!0,get:function(){if(!!r.isBuffer(this))return this.buffer}}),Object.defineProperty(r.prototype,"offset",{enumerable:!0,get:function(){if(!!r.isBuffer(this))return this.byteOffset}});function m(Me){if(Me>l)throw new RangeError('The value "'+Me+'" is invalid for option "size"');const Q=new Uint8Array(Me);return Object.setPrototypeOf(Q,r.prototype),Q}function r(Me,Q,ae){if(typeof Me=="number"){if(typeof Q=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return v(Me)}return f(Me,Q,ae)}r.poolSize=8192;function f(Me,Q,ae){if(typeof Me=="string")return w(Me,Q);if(ArrayBuffer.isView(Me))return C(Me);if(Me==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof Me);if(Xt(Me,ArrayBuffer)||Me&&Xt(Me.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(Xt(Me,SharedArrayBuffer)||Me&&Xt(Me.buffer,SharedArrayBuffer)))return T(Me,Q,ae);if(typeof Me=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const $e=Me.valueOf&&Me.valueOf();if($e!=null&&$e!==Me)return r.from($e,Q,ae);const _t=S(Me);if(_t)return _t;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof Me[Symbol.toPrimitive]=="function")return r.from(Me[Symbol.toPrimitive]("string"),Q,ae);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof Me)}r.from=function(Me,Q,ae){return f(Me,Q,ae)},Object.setPrototypeOf(r.prototype,Uint8Array.prototype),Object.setPrototypeOf(r,Uint8Array);function _(Me){if(typeof Me!="number")throw new TypeError('"size" argument must be of type number');if(Me<0)throw new RangeError('The value "'+Me+'" is invalid for option "size"')}function b(Me,Q,ae){return _(Me),Me<=0?m(Me):Q!==void 0?typeof ae=="string"?m(Me).fill(Q,ae):m(Me).fill(Q):m(Me)}r.alloc=function(Me,Q,ae){return b(Me,Q,ae)};function v(Me){return _(Me),m(Me<0?0:M(Me)|0)}r.allocUnsafe=function(Me){return v(Me)},r.allocUnsafeSlow=function(Me){return v(Me)};function w(Me,Q){if((typeof Q!="string"||Q==="")&&(Q="utf8"),!r.isEncoding(Q))throw new TypeError("Unknown encoding: "+Q);const ae=V(Me,Q)|0;let $e=m(ae);const _t=$e.write(Me,Q);return _t!==ae&&($e=$e.slice(0,_t)),$e}function x(Me){const Q=Me.length<0?0:M(Me.length)|0,ae=m(Q);for(let $e=0;$e<Q;$e+=1)ae[$e]=Me[$e]&255;return ae}function C(Me){if(Xt(Me,Uint8Array)){const Q=new Uint8Array(Me);return T(Q.buffer,Q.byteOffset,Q.byteLength)}return x(Me)}function T(Me,Q,ae){if(Q<0||Me.byteLength<Q)throw new RangeError('"offset" is outside of buffer bounds');if(Me.byteLength<Q+(ae||0))throw new RangeError('"length" is outside of buffer bounds');let $e;return Q===void 0&&ae===void 0?$e=new Uint8Array(Me):ae===void 0?$e=new Uint8Array(Me,Q):$e=new Uint8Array(Me,Q,ae),Object.setPrototypeOf($e,r.prototype),$e}function S(Me){if(r.isBuffer(Me)){const Q=M(Me.length)|0,ae=m(Q);return ae.length===0||Me.copy(ae,0,0,Q),ae}if(Me.length!==void 0)return typeof Me.length!="number"||mi(Me.length)?m(0):x(Me);if(Me.type==="Buffer"&&Array.isArray(Me.data))return x(Me.data)}function M(Me){if(Me>=l)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+l.toString(16)+" bytes");return Me|0}function O(Me){return+Me!=Me&&(Me=0),r.alloc(+Me)}r.isBuffer=function(Q){return Q!=null&&Q._isBuffer===!0&&Q!==r.prototype},r.compare=function(Q,ae){if(Xt(Q,Uint8Array)&&(Q=r.from(Q,Q.offset,Q.byteLength)),Xt(ae,Uint8Array)&&(ae=r.from(ae,ae.offset,ae.byteLength)),!r.isBuffer(Q)||!r.isBuffer(ae))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(Q===ae)return 0;let $e=Q.length,_t=ae.length;for(let Kt=0,di=Math.min($e,_t);Kt<di;++Kt)if(Q[Kt]!==ae[Kt]){$e=Q[Kt],_t=ae[Kt];break}return $e<_t?-1:_t<$e?1:0},r.isEncoding=function(Q){switch(String(Q).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},r.concat=function(Q,ae){if(!Array.isArray(Q))throw new TypeError('"list" argument must be an Array of Buffers');if(Q.length===0)return r.alloc(0);let $e;if(ae===void 0)for(ae=0,$e=0;$e<Q.length;++$e)ae+=Q[$e].length;const _t=r.allocUnsafe(ae);let Kt=0;for($e=0;$e<Q.length;++$e){let di=Q[$e];if(Xt(di,Uint8Array))Kt+di.length>_t.length?(r.isBuffer(di)||(di=r.from(di)),di.copy(_t,Kt)):Uint8Array.prototype.set.call(_t,di,Kt);else if(r.isBuffer(di))di.copy(_t,Kt);else throw new TypeError('"list" argument must be an Array of Buffers');Kt+=di.length}return _t};function V(Me,Q){if(r.isBuffer(Me))return Me.length;if(ArrayBuffer.isView(Me)||Xt(Me,ArrayBuffer))return Me.byteLength;if(typeof Me!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof Me);const ae=Me.length,$e=arguments.length>2&&arguments[2]===!0;if(!$e&&ae===0)return 0;let _t=!1;for(;;)switch(Q){case"ascii":case"latin1":case"binary":return ae;case"utf8":case"utf-8":return ei(Me).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ae*2;case"hex":return ae>>>1;case"base64":return Si(Me).length;default:if(_t)return $e?-1:ei(Me).length;Q=(""+Q).toLowerCase(),_t=!0}}r.byteLength=V;function X(Me,Q,ae){let $e=!1;if((Q===void 0||Q<0)&&(Q=0),Q>this.length||((ae===void 0||ae>this.length)&&(ae=this.length),ae<=0)||(ae>>>=0,Q>>>=0,ae<=Q))return"";for(Me||(Me="utf8");;)switch(Me){case"hex":return we(this,Q,ae);case"utf8":case"utf-8":return _e(this,Q,ae);case"ascii":return It(this,Q,ae);case"latin1":case"binary":return Xe(this,Q,ae);case"base64":return ve(this,Q,ae);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Ce(this,Q,ae);default:if($e)throw new TypeError("Unknown encoding: "+Me);Me=(Me+"").toLowerCase(),$e=!0}}r.prototype._isBuffer=!0;function Z(Me,Q,ae){const $e=Me[Q];Me[Q]=Me[ae],Me[ae]=$e}r.prototype.swap16=function(){const Q=this.length;if(Q%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let ae=0;ae<Q;ae+=2)Z(this,ae,ae+1);return this},r.prototype.swap32=function(){const Q=this.length;if(Q%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let ae=0;ae<Q;ae+=4)Z(this,ae,ae+3),Z(this,ae+1,ae+2);return this},r.prototype.swap64=function(){const Q=this.length;if(Q%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let ae=0;ae<Q;ae+=8)Z(this,ae,ae+7),Z(this,ae+1,ae+6),Z(this,ae+2,ae+5),Z(this,ae+3,ae+4);return this},r.prototype.toString=function(){const Q=this.length;return Q===0?"":arguments.length===0?_e(this,0,Q):X.apply(this,arguments)},r.prototype.toLocaleString=r.prototype.toString,r.prototype.equals=function(Q){if(!r.isBuffer(Q))throw new TypeError("Argument must be a Buffer");return this===Q?!0:r.compare(this,Q)===0},r.prototype.inspect=function(){let Q="";const ae=i.INSPECT_MAX_BYTES;return Q=this.toString("hex",0,ae).replace(/(.{2})/g,"$1 ").trim(),this.length>ae&&(Q+=" ... "),"<Buffer "+Q+">"},o&&(r.prototype[o]=r.prototype.inspect),r.prototype.compare=function(Q,ae,$e,_t,Kt){if(Xt(Q,Uint8Array)&&(Q=r.from(Q,Q.offset,Q.byteLength)),!r.isBuffer(Q))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof Q);if(ae===void 0&&(ae=0),$e===void 0&&($e=Q?Q.length:0),_t===void 0&&(_t=0),Kt===void 0&&(Kt=this.length),ae<0||$e>Q.length||_t<0||Kt>this.length)throw new RangeError("out of range index");if(_t>=Kt&&ae>=$e)return 0;if(_t>=Kt)return-1;if(ae>=$e)return 1;if(ae>>>=0,$e>>>=0,_t>>>=0,Kt>>>=0,this===Q)return 0;let di=Kt-_t,wn=$e-ae;const Ln=Math.min(di,wn),fn=this.slice(_t,Kt),Bi=Q.slice(ae,$e);for(let Ki=0;Ki<Ln;++Ki)if(fn[Ki]!==Bi[Ki]){di=fn[Ki],wn=Bi[Ki];break}return di<wn?-1:wn<di?1:0};function te(Me,Q,ae,$e,_t){if(Me.length===0)return-1;if(typeof ae=="string"?($e=ae,ae=0):ae>2147483647?ae=2147483647:ae<-2147483648&&(ae=-2147483648),ae=+ae,mi(ae)&&(ae=_t?0:Me.length-1),ae<0&&(ae=Me.length+ae),ae>=Me.length){if(_t)return-1;ae=Me.length-1}else if(ae<0)if(_t)ae=0;else return-1;if(typeof Q=="string"&&(Q=r.from(Q,$e)),r.isBuffer(Q))return Q.length===0?-1:J(Me,Q,ae,$e,_t);if(typeof Q=="number")return Q=Q&255,typeof Uint8Array.prototype.indexOf=="function"?_t?Uint8Array.prototype.indexOf.call(Me,Q,ae):Uint8Array.prototype.lastIndexOf.call(Me,Q,ae):J(Me,[Q],ae,$e,_t);throw new TypeError("val must be string, number or Buffer")}function J(Me,Q,ae,$e,_t){let Kt=1,di=Me.length,wn=Q.length;if($e!==void 0&&($e=String($e).toLowerCase(),$e==="ucs2"||$e==="ucs-2"||$e==="utf16le"||$e==="utf-16le")){if(Me.length<2||Q.length<2)return-1;Kt=2,di/=2,wn/=2,ae/=2}function Ln(Bi,Ki){return Kt===1?Bi[Ki]:Bi.readUInt16BE(Ki*Kt)}let fn;if(_t){let Bi=-1;for(fn=ae;fn<di;fn++)if(Ln(Me,fn)===Ln(Q,Bi===-1?0:fn-Bi)){if(Bi===-1&&(Bi=fn),fn-Bi+1===wn)return Bi*Kt}else Bi!==-1&&(fn-=fn-Bi),Bi=-1}else for(ae+wn>di&&(ae=di-wn),fn=ae;fn>=0;fn--){let Bi=!0;for(let Ki=0;Ki<wn;Ki++)if(Ln(Me,fn+Ki)!==Ln(Q,Ki)){Bi=!1;break}if(Bi)return fn}return-1}r.prototype.includes=function(Q,ae,$e){return this.indexOf(Q,ae,$e)!==-1},r.prototype.indexOf=function(Q,ae,$e){return te(this,Q,ae,$e,!0)},r.prototype.lastIndexOf=function(Q,ae,$e){return te(this,Q,ae,$e,!1)};function ie(Me,Q,ae,$e){ae=Number(ae)||0;const _t=Me.length-ae;$e?($e=Number($e),$e>_t&&($e=_t)):$e=_t;const Kt=Q.length;$e>Kt/2&&($e=Kt/2);let di;for(di=0;di<$e;++di){const wn=parseInt(Q.substr(di*2,2),16);if(mi(wn))return di;Me[ae+di]=wn}return di}function Ee(Me,Q,ae,$e){return Ti(ei(Q,Me.length-ae),Me,ae,$e)}function Pe(Me,Q,ae,$e){return Ti(li(Q),Me,ae,$e)}function de(Me,Q,ae,$e){return Ti(Si(Q),Me,ae,$e)}function Te(Me,Q,ae,$e){return Ti(Qt(Q,Me.length-ae),Me,ae,$e)}r.prototype.write=function(Q,ae,$e,_t){if(ae===void 0)_t="utf8",$e=this.length,ae=0;else if($e===void 0&&typeof ae=="string")_t=ae,$e=this.length,ae=0;else if(isFinite(ae))ae=ae>>>0,isFinite($e)?($e=$e>>>0,_t===void 0&&(_t="utf8")):(_t=$e,$e=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const Kt=this.length-ae;if(($e===void 0||$e>Kt)&&($e=Kt),Q.length>0&&($e<0||ae<0)||ae>this.length)throw new RangeError("Attempt to write outside buffer bounds");_t||(_t="utf8");let di=!1;for(;;)switch(_t){case"hex":return ie(this,Q,ae,$e);case"utf8":case"utf-8":return Ee(this,Q,ae,$e);case"ascii":case"latin1":case"binary":return Pe(this,Q,ae,$e);case"base64":return de(this,Q,ae,$e);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Te(this,Q,ae,$e);default:if(di)throw new TypeError("Unknown encoding: "+_t);_t=(""+_t).toLowerCase(),di=!0}},r.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function ve(Me,Q,ae){return Q===0&&ae===Me.length?e.fromByteArray(Me):e.fromByteArray(Me.slice(Q,ae))}function _e(Me,Q,ae){ae=Math.min(Me.length,ae);const $e=[];let _t=Q;for(;_t<ae;){const Kt=Me[_t];let di=null,wn=Kt>239?4:Kt>223?3:Kt>191?2:1;if(_t+wn<=ae){let Ln,fn,Bi,Ki;switch(wn){case 1:Kt<128&&(di=Kt);break;case 2:Ln=Me[_t+1],(Ln&192)===128&&(Ki=(Kt&31)<<6|Ln&63,Ki>127&&(di=Ki));break;case 3:Ln=Me[_t+1],fn=Me[_t+2],(Ln&192)===128&&(fn&192)===128&&(Ki=(Kt&15)<<12|(Ln&63)<<6|fn&63,Ki>2047&&(Ki<55296||Ki>57343)&&(di=Ki));break;case 4:Ln=Me[_t+1],fn=Me[_t+2],Bi=Me[_t+3],(Ln&192)===128&&(fn&192)===128&&(Bi&192)===128&&(Ki=(Kt&15)<<18|(Ln&63)<<12|(fn&63)<<6|Bi&63,Ki>65535&&Ki<1114112&&(di=Ki))}}di===null?(di=65533,wn=1):di>65535&&(di-=65536,$e.push(di>>>10&1023|55296),di=56320|di&1023),$e.push(di),_t+=wn}return it($e)}const ot=4096;function it(Me){const Q=Me.length;if(Q<=ot)return String.fromCharCode.apply(String,Me);let ae="",$e=0;for(;$e<Q;)ae+=String.fromCharCode.apply(String,Me.slice($e,$e+=ot));return ae}function It(Me,Q,ae){let $e="";ae=Math.min(Me.length,ae);for(let _t=Q;_t<ae;++_t)$e+=String.fromCharCode(Me[_t]&127);return $e}function Xe(Me,Q,ae){let $e="";ae=Math.min(Me.length,ae);for(let _t=Q;_t<ae;++_t)$e+=String.fromCharCode(Me[_t]);return $e}function we(Me,Q,ae){const $e=Me.length;(!Q||Q<0)&&(Q=0),(!ae||ae<0||ae>$e)&&(ae=$e);let _t="";for(let Kt=Q;Kt<ae;++Kt)_t+=Zi[Me[Kt]];return _t}function Ce(Me,Q,ae){const $e=Me.slice(Q,ae);let _t="";for(let Kt=0;Kt<$e.length-1;Kt+=2)_t+=String.fromCharCode($e[Kt]+$e[Kt+1]*256);return _t}r.prototype.slice=function(Q,ae){const $e=this.length;Q=~~Q,ae=ae===void 0?$e:~~ae,Q<0?(Q+=$e,Q<0&&(Q=0)):Q>$e&&(Q=$e),ae<0?(ae+=$e,ae<0&&(ae=0)):ae>$e&&(ae=$e),ae<Q&&(ae=Q);const _t=this.subarray(Q,ae);return Object.setPrototypeOf(_t,r.prototype),_t};function Re(Me,Q,ae){if(Me%1!==0||Me<0)throw new RangeError("offset is not uint");if(Me+Q>ae)throw new RangeError("Trying to access beyond buffer length")}r.prototype.readUintLE=r.prototype.readUIntLE=function(Q,ae,$e){Q=Q>>>0,ae=ae>>>0,$e||Re(Q,ae,this.length);let _t=this[Q],Kt=1,di=0;for(;++di<ae&&(Kt*=256);)_t+=this[Q+di]*Kt;return _t},r.prototype.readUintBE=r.prototype.readUIntBE=function(Q,ae,$e){Q=Q>>>0,ae=ae>>>0,$e||Re(Q,ae,this.length);let _t=this[Q+--ae],Kt=1;for(;ae>0&&(Kt*=256);)_t+=this[Q+--ae]*Kt;return _t},r.prototype.readUint8=r.prototype.readUInt8=function(Q,ae){return Q=Q>>>0,ae||Re(Q,1,this.length),this[Q]},r.prototype.readUint16LE=r.prototype.readUInt16LE=function(Q,ae){return Q=Q>>>0,ae||Re(Q,2,this.length),this[Q]|this[Q+1]<<8},r.prototype.readUint16BE=r.prototype.readUInt16BE=function(Q,ae){return Q=Q>>>0,ae||Re(Q,2,this.length),this[Q]<<8|this[Q+1]},r.prototype.readUint32LE=r.prototype.readUInt32LE=function(Q,ae){return Q=Q>>>0,ae||Re(Q,4,this.length),(this[Q]|this[Q+1]<<8|this[Q+2]<<16)+this[Q+3]*16777216},r.prototype.readUint32BE=r.prototype.readUInt32BE=function(Q,ae){return Q=Q>>>0,ae||Re(Q,4,this.length),this[Q]*16777216+(this[Q+1]<<16|this[Q+2]<<8|this[Q+3])},r.prototype.readBigUInt64LE=Ci(function(Q){Q=Q>>>0,ut(Q,"offset");const ae=this[Q],$e=this[Q+7];(ae===void 0||$e===void 0)&&wt(Q,this.length-8);const _t=ae+this[++Q]*2**8+this[++Q]*2**16+this[++Q]*2**24,Kt=this[++Q]+this[++Q]*2**8+this[++Q]*2**16+$e*2**24;return BigInt(_t)+(BigInt(Kt)<<BigInt(32))}),r.prototype.readBigUInt64BE=Ci(function(Q){Q=Q>>>0,ut(Q,"offset");const ae=this[Q],$e=this[Q+7];(ae===void 0||$e===void 0)&&wt(Q,this.length-8);const _t=ae*2**24+this[++Q]*2**16+this[++Q]*2**8+this[++Q],Kt=this[++Q]*2**24+this[++Q]*2**16+this[++Q]*2**8+$e;return(BigInt(_t)<<BigInt(32))+BigInt(Kt)}),r.prototype.readIntLE=function(Q,ae,$e){Q=Q>>>0,ae=ae>>>0,$e||Re(Q,ae,this.length);let _t=this[Q],Kt=1,di=0;for(;++di<ae&&(Kt*=256);)_t+=this[Q+di]*Kt;return Kt*=128,_t>=Kt&&(_t-=Math.pow(2,8*ae)),_t},r.prototype.readIntBE=function(Q,ae,$e){Q=Q>>>0,ae=ae>>>0,$e||Re(Q,ae,this.length);let _t=ae,Kt=1,di=this[Q+--_t];for(;_t>0&&(Kt*=256);)di+=this[Q+--_t]*Kt;return Kt*=128,di>=Kt&&(di-=Math.pow(2,8*ae)),di},r.prototype.readInt8=function(Q,ae){return Q=Q>>>0,ae||Re(Q,1,this.length),this[Q]&128?(255-this[Q]+1)*-1:this[Q]},r.prototype.readInt16LE=function(Q,ae){Q=Q>>>0,ae||Re(Q,2,this.length);const $e=this[Q]|this[Q+1]<<8;return $e&32768?$e|4294901760:$e},r.prototype.readInt16BE=function(Q,ae){Q=Q>>>0,ae||Re(Q,2,this.length);const $e=this[Q+1]|this[Q]<<8;return $e&32768?$e|4294901760:$e},r.prototype.readInt32LE=function(Q,ae){return Q=Q>>>0,ae||Re(Q,4,this.length),this[Q]|this[Q+1]<<8|this[Q+2]<<16|this[Q+3]<<24},r.prototype.readInt32BE=function(Q,ae){return Q=Q>>>0,ae||Re(Q,4,this.length),this[Q]<<24|this[Q+1]<<16|this[Q+2]<<8|this[Q+3]},r.prototype.readBigInt64LE=Ci(function(Q){Q=Q>>>0,ut(Q,"offset");const ae=this[Q],$e=this[Q+7];(ae===void 0||$e===void 0)&&wt(Q,this.length-8);const _t=this[Q+4]+this[Q+5]*2**8+this[Q+6]*2**16+($e<<24);return(BigInt(_t)<<BigInt(32))+BigInt(ae+this[++Q]*2**8+this[++Q]*2**16+this[++Q]*2**24)}),r.prototype.readBigInt64BE=Ci(function(Q){Q=Q>>>0,ut(Q,"offset");const ae=this[Q],$e=this[Q+7];(ae===void 0||$e===void 0)&&wt(Q,this.length-8);const _t=(ae<<24)+this[++Q]*2**16+this[++Q]*2**8+this[++Q];return(BigInt(_t)<<BigInt(32))+BigInt(this[++Q]*2**24+this[++Q]*2**16+this[++Q]*2**8+$e)}),r.prototype.readFloatLE=function(Q,ae){return Q=Q>>>0,ae||Re(Q,4,this.length),t.read(this,Q,!0,23,4)},r.prototype.readFloatBE=function(Q,ae){return Q=Q>>>0,ae||Re(Q,4,this.length),t.read(this,Q,!1,23,4)},r.prototype.readDoubleLE=function(Q,ae){return Q=Q>>>0,ae||Re(Q,8,this.length),t.read(this,Q,!0,52,8)},r.prototype.readDoubleBE=function(Q,ae){return Q=Q>>>0,ae||Re(Q,8,this.length),t.read(this,Q,!1,52,8)};function le(Me,Q,ae,$e,_t,Kt){if(!r.isBuffer(Me))throw new TypeError('"buffer" argument must be a Buffer instance');if(Q>_t||Q<Kt)throw new RangeError('"value" argument is out of bounds');if(ae+$e>Me.length)throw new RangeError("Index out of range")}r.prototype.writeUintLE=r.prototype.writeUIntLE=function(Q,ae,$e,_t){if(Q=+Q,ae=ae>>>0,$e=$e>>>0,!_t){const wn=Math.pow(2,8*$e)-1;le(this,Q,ae,$e,wn,0)}let Kt=1,di=0;for(this[ae]=Q&255;++di<$e&&(Kt*=256);)this[ae+di]=Q/Kt&255;return ae+$e},r.prototype.writeUintBE=r.prototype.writeUIntBE=function(Q,ae,$e,_t){if(Q=+Q,ae=ae>>>0,$e=$e>>>0,!_t){const wn=Math.pow(2,8*$e)-1;le(this,Q,ae,$e,wn,0)}let Kt=$e-1,di=1;for(this[ae+Kt]=Q&255;--Kt>=0&&(di*=256);)this[ae+Kt]=Q/di&255;return ae+$e},r.prototype.writeUint8=r.prototype.writeUInt8=function(Q,ae,$e){return Q=+Q,ae=ae>>>0,$e||le(this,Q,ae,1,255,0),this[ae]=Q&255,ae+1},r.prototype.writeUint16LE=r.prototype.writeUInt16LE=function(Q,ae,$e){return Q=+Q,ae=ae>>>0,$e||le(this,Q,ae,2,65535,0),this[ae]=Q&255,this[ae+1]=Q>>>8,ae+2},r.prototype.writeUint16BE=r.prototype.writeUInt16BE=function(Q,ae,$e){return Q=+Q,ae=ae>>>0,$e||le(this,Q,ae,2,65535,0),this[ae]=Q>>>8,this[ae+1]=Q&255,ae+2},r.prototype.writeUint32LE=r.prototype.writeUInt32LE=function(Q,ae,$e){return Q=+Q,ae=ae>>>0,$e||le(this,Q,ae,4,4294967295,0),this[ae+3]=Q>>>24,this[ae+2]=Q>>>16,this[ae+1]=Q>>>8,this[ae]=Q&255,ae+4},r.prototype.writeUint32BE=r.prototype.writeUInt32BE=function(Q,ae,$e){return Q=+Q,ae=ae>>>0,$e||le(this,Q,ae,4,4294967295,0),this[ae]=Q>>>24,this[ae+1]=Q>>>16,this[ae+2]=Q>>>8,this[ae+3]=Q&255,ae+4};function Se(Me,Q,ae,$e,_t){ri(Q,$e,_t,Me,ae,7);let Kt=Number(Q&BigInt(4294967295));Me[ae++]=Kt,Kt=Kt>>8,Me[ae++]=Kt,Kt=Kt>>8,Me[ae++]=Kt,Kt=Kt>>8,Me[ae++]=Kt;let di=Number(Q>>BigInt(32)&BigInt(4294967295));return Me[ae++]=di,di=di>>8,Me[ae++]=di,di=di>>8,Me[ae++]=di,di=di>>8,Me[ae++]=di,ae}function he(Me,Q,ae,$e,_t){ri(Q,$e,_t,Me,ae,7);let Kt=Number(Q&BigInt(4294967295));Me[ae+7]=Kt,Kt=Kt>>8,Me[ae+6]=Kt,Kt=Kt>>8,Me[ae+5]=Kt,Kt=Kt>>8,Me[ae+4]=Kt;let di=Number(Q>>BigInt(32)&BigInt(4294967295));return Me[ae+3]=di,di=di>>8,Me[ae+2]=di,di=di>>8,Me[ae+1]=di,di=di>>8,Me[ae]=di,ae+8}r.prototype.writeBigUInt64LE=Ci(function(Q,ae=0){return Se(this,Q,ae,BigInt(0),BigInt("0xffffffffffffffff"))}),r.prototype.writeBigUInt64BE=Ci(function(Q,ae=0){return he(this,Q,ae,BigInt(0),BigInt("0xffffffffffffffff"))}),r.prototype.writeIntLE=function(Q,ae,$e,_t){if(Q=+Q,ae=ae>>>0,!_t){const Ln=Math.pow(2,8*$e-1);le(this,Q,ae,$e,Ln-1,-Ln)}let Kt=0,di=1,wn=0;for(this[ae]=Q&255;++Kt<$e&&(di*=256);)Q<0&&wn===0&&this[ae+Kt-1]!==0&&(wn=1),this[ae+Kt]=(Q/di>>0)-wn&255;return ae+$e},r.prototype.writeIntBE=function(Q,ae,$e,_t){if(Q=+Q,ae=ae>>>0,!_t){const Ln=Math.pow(2,8*$e-1);le(this,Q,ae,$e,Ln-1,-Ln)}let Kt=$e-1,di=1,wn=0;for(this[ae+Kt]=Q&255;--Kt>=0&&(di*=256);)Q<0&&wn===0&&this[ae+Kt+1]!==0&&(wn=1),this[ae+Kt]=(Q/di>>0)-wn&255;return ae+$e},r.prototype.writeInt8=function(Q,ae,$e){return Q=+Q,ae=ae>>>0,$e||le(this,Q,ae,1,127,-128),Q<0&&(Q=255+Q+1),this[ae]=Q&255,ae+1},r.prototype.writeInt16LE=function(Q,ae,$e){return Q=+Q,ae=ae>>>0,$e||le(this,Q,ae,2,32767,-32768),this[ae]=Q&255,this[ae+1]=Q>>>8,ae+2},r.prototype.writeInt16BE=function(Q,ae,$e){return Q=+Q,ae=ae>>>0,$e||le(this,Q,ae,2,32767,-32768),this[ae]=Q>>>8,this[ae+1]=Q&255,ae+2},r.prototype.writeInt32LE=function(Q,ae,$e){return Q=+Q,ae=ae>>>0,$e||le(this,Q,ae,4,2147483647,-2147483648),this[ae]=Q&255,this[ae+1]=Q>>>8,this[ae+2]=Q>>>16,this[ae+3]=Q>>>24,ae+4},r.prototype.writeInt32BE=function(Q,ae,$e){return Q=+Q,ae=ae>>>0,$e||le(this,Q,ae,4,2147483647,-2147483648),Q<0&&(Q=4294967295+Q+1),this[ae]=Q>>>24,this[ae+1]=Q>>>16,this[ae+2]=Q>>>8,this[ae+3]=Q&255,ae+4},r.prototype.writeBigInt64LE=Ci(function(Q,ae=0){return Se(this,Q,ae,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),r.prototype.writeBigInt64BE=Ci(function(Q,ae=0){return he(this,Q,ae,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function me(Me,Q,ae,$e,_t,Kt){if(ae+$e>Me.length)throw new RangeError("Index out of range");if(ae<0)throw new RangeError("Index out of range")}function Be(Me,Q,ae,$e,_t){return Q=+Q,ae=ae>>>0,_t||me(Me,Q,ae,4),t.write(Me,Q,ae,$e,23,4),ae+4}r.prototype.writeFloatLE=function(Q,ae,$e){return Be(this,Q,ae,!0,$e)},r.prototype.writeFloatBE=function(Q,ae,$e){return Be(this,Q,ae,!1,$e)};function We(Me,Q,ae,$e,_t){return Q=+Q,ae=ae>>>0,_t||me(Me,Q,ae,8),t.write(Me,Q,ae,$e,52,8),ae+8}r.prototype.writeDoubleLE=function(Q,ae,$e){return We(this,Q,ae,!0,$e)},r.prototype.writeDoubleBE=function(Q,ae,$e){return We(this,Q,ae,!1,$e)},r.prototype.copy=function(Q,ae,$e,_t){if(!r.isBuffer(Q))throw new TypeError("argument should be a Buffer");if($e||($e=0),!_t&&_t!==0&&(_t=this.length),ae>=Q.length&&(ae=Q.length),ae||(ae=0),_t>0&&_t<$e&&(_t=$e),_t===$e||Q.length===0||this.length===0)return 0;if(ae<0)throw new RangeError("targetStart out of bounds");if($e<0||$e>=this.length)throw new RangeError("Index out of range");if(_t<0)throw new RangeError("sourceEnd out of bounds");_t>this.length&&(_t=this.length),Q.length-ae<_t-$e&&(_t=Q.length-ae+$e);const Kt=_t-$e;return this===Q&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(ae,$e,_t):Uint8Array.prototype.set.call(Q,this.subarray($e,_t),ae),Kt},r.prototype.fill=function(Q,ae,$e,_t){if(typeof Q=="string"){if(typeof ae=="string"?(_t=ae,ae=0,$e=this.length):typeof $e=="string"&&(_t=$e,$e=this.length),_t!==void 0&&typeof _t!="string")throw new TypeError("encoding must be a string");if(typeof _t=="string"&&!r.isEncoding(_t))throw new TypeError("Unknown encoding: "+_t);if(Q.length===1){const di=Q.charCodeAt(0);(_t==="utf8"&&di<128||_t==="latin1")&&(Q=di)}}else typeof Q=="number"?Q=Q&255:typeof Q=="boolean"&&(Q=Number(Q));if(ae<0||this.length<ae||this.length<$e)throw new RangeError("Out of range index");if($e<=ae)return this;ae=ae>>>0,$e=$e===void 0?this.length:$e>>>0,Q||(Q=0);let Kt;if(typeof Q=="number")for(Kt=ae;Kt<$e;++Kt)this[Kt]=Q;else{const di=r.isBuffer(Q)?Q:r.from(Q,_t),wn=di.length;if(wn===0)throw new TypeError('The value "'+Q+'" is invalid for argument "value"');for(Kt=0;Kt<$e-ae;++Kt)this[Kt+ae]=di[Kt%wn]}return this};const st={};function Ye(Me,Q,ae){st[Me]=class extends ae{constructor(){super(),Object.defineProperty(this,"message",{value:Q.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${Me}]`,this.stack,delete this.name}get code(){return Me}set code(_t){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:_t,writable:!0})}toString(){return`${this.name} [${Me}]: ${this.message}`}}}Ye("ERR_BUFFER_OUT_OF_BOUNDS",function(Me){return Me?`${Me} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),Ye("ERR_INVALID_ARG_TYPE",function(Me,Q){return`The "${Me}" argument must be of type number. Received type ${typeof Q}`},TypeError),Ye("ERR_OUT_OF_RANGE",function(Me,Q,ae){let $e=`The value of "${Me}" is out of range.`,_t=ae;return Number.isInteger(ae)&&Math.abs(ae)>2**32?_t=gt(String(ae)):typeof ae=="bigint"&&(_t=String(ae),(ae>BigInt(2)**BigInt(32)||ae<-(BigInt(2)**BigInt(32)))&&(_t=gt(_t)),_t+="n"),$e+=` It must be ${Q}. Received ${_t}`,$e},RangeError);function gt(Me){let Q="",ae=Me.length;const $e=Me[0]==="-"?1:0;for(;ae>=$e+4;ae-=3)Q=`_${Me.slice(ae-3,ae)}${Q}`;return`${Me.slice(0,ae)}${Q}`}function Mt(Me,Q,ae){ut(Q,"offset"),(Me[Q]===void 0||Me[Q+ae]===void 0)&&wt(Q,Me.length-(ae+1))}function ri(Me,Q,ae,$e,_t,Kt){if(Me>ae||Me<Q){const di=typeof Q=="bigint"?"n":"";let wn;throw Kt>3?Q===0||Q===BigInt(0)?wn=`>= 0${di} and < 2${di} ** ${(Kt+1)*8}${di}`:wn=`>= -(2${di} ** ${(Kt+1)*8-1}${di}) and < 2 ** ${(Kt+1)*8-1}${di}`:wn=`>= ${Q}${di} and <= ${ae}${di}`,new st.ERR_OUT_OF_RANGE("value",wn,Me)}Mt($e,_t,Kt)}function ut(Me,Q){if(typeof Me!="number")throw new st.ERR_INVALID_ARG_TYPE(Q,"number",Me)}function wt(Me,Q,ae){throw Math.floor(Me)!==Me?(ut(Me,ae),new st.ERR_OUT_OF_RANGE(ae||"offset","an integer",Me)):Q<0?new st.ERR_BUFFER_OUT_OF_BOUNDS:new st.ERR_OUT_OF_RANGE(ae||"offset",`>= ${ae?1:0} and <= ${Q}`,Me)}const bt=/[^+/0-9A-Za-z-_]/g;function Je(Me){if(Me=Me.split("=")[0],Me=Me.trim().replace(bt,""),Me.length<2)return"";for(;Me.length%4!==0;)Me=Me+"=";return Me}function ei(Me,Q){Q=Q||1/0;let ae;const $e=Me.length;let _t=null;const Kt=[];for(let di=0;di<$e;++di){if(ae=Me.charCodeAt(di),ae>55295&&ae<57344){if(!_t){if(ae>56319){(Q-=3)>-1&&Kt.push(239,191,189);continue}else if(di+1===$e){(Q-=3)>-1&&Kt.push(239,191,189);continue}_t=ae;continue}if(ae<56320){(Q-=3)>-1&&Kt.push(239,191,189),_t=ae;continue}ae=(_t-55296<<10|ae-56320)+65536}else _t&&(Q-=3)>-1&&Kt.push(239,191,189);if(_t=null,ae<128){if((Q-=1)<0)break;Kt.push(ae)}else if(ae<2048){if((Q-=2)<0)break;Kt.push(ae>>6|192,ae&63|128)}else if(ae<65536){if((Q-=3)<0)break;Kt.push(ae>>12|224,ae>>6&63|128,ae&63|128)}else if(ae<1114112){if((Q-=4)<0)break;Kt.push(ae>>18|240,ae>>12&63|128,ae>>6&63|128,ae&63|128)}else throw new Error("Invalid code point")}return Kt}function li(Me){const Q=[];for(let ae=0;ae<Me.length;++ae)Q.push(Me.charCodeAt(ae)&255);return Q}function Qt(Me,Q){let ae,$e,_t;const Kt=[];for(let di=0;di<Me.length&&!((Q-=2)<0);++di)ae=Me.charCodeAt(di),$e=ae>>8,_t=ae%256,Kt.push(_t),Kt.push($e);return Kt}function Si(Me){return e.toByteArray(Je(Me))}function Ti(Me,Q,ae,$e){let _t;for(_t=0;_t<$e&&!(_t+ae>=Q.length||_t>=Me.length);++_t)Q[_t+ae]=Me[_t];return _t}function Xt(Me,Q){return Me instanceof Q||Me!=null&&Me.constructor!=null&&Me.constructor.name!=null&&Me.constructor.name===Q.name}function mi(Me){return Me!==Me}const Zi=function(){const Me="0123456789abcdef",Q=new Array(256);for(let ae=0;ae<16;++ae){const $e=ae*16;for(let _t=0;_t<16;++_t)Q[$e+_t]=Me[ae]+Me[_t]}return Q}();function Ci(Me){return typeof BigInt>"u"?ti:Me}function ti(){throw new Error("BigInt not supported")}})(p3);const b7=Math.PI/180,w7=180/Math.PI,x7=i=>{const e=mb(i[0]+1,i[2]),t=mb(i[0],i[2]),o=gb(i[1]+1,i[2]),l=gb(i[1],i[2]);return[t,o,e,l]},mb=(i,e)=>i/Math.pow(2,e)*360-180,gb=(i,e)=>{const t=Math.PI-2*Math.PI*i/Math.pow(2,e);return w7*Math.atan(.5*(Math.exp(t)-Math.exp(-t)))},A7=(i,e,t)=>{const o=k7(i,e,t);return o[0]=Math.floor(o[0]),o[1]=Math.floor(o[1]),o},k7=(i,e,t)=>{const o=Math.sin(e*b7),l=Math.pow(2,t);let u=l*(i/360+.5);const m=l*(.5-.25*Math.log((1+o)/(1-o))/Math.PI);return u=u%l,u<0&&(u=u+l),[u,m,t]};class S7{constructor(e,t,o,l){this.url=e,this.tileSize=t,this.minzoom=o,this.maxzoom=l}getValue(e,t){return new Promise((o,l)=>{const u=e[0],m=e[1];let r=t;t>this.maxzoom?r=this.maxzoom:t<this.minzoom&&(r=this.minzoom);const f=A7(u,m,r),_=this.url.replace(/{x}/g,f[0].toString()).replace(/{y}/g,f[1].toString()).replace(/{z}/g,f[2].toString());let b=this.getUrlExtension(_);switch(b||(b="png"),b){case"png":cI.get(_,{responseType:"arraybuffer"}).then(v=>{const w=p3.Buffer.from(v.data,"binary"),x=this.getValueFromPNG(w,f,u,m);o(x)}).catch(v=>l(v));break;case"webp":d3(_).then(v=>{this.getValueFromWEBP(v,f,u,m).then(w=>{o(w)}).catch(w=>l(w))}).catch(v=>l(v));break;default:l(new Error(`Invalid file extension: ${b}`));break}})}getValueFromPNG(e,t,o,l){const m=n7.load(e).decodePixels(),r=this.pixels2rgba(m,t,o,l);return this.calc(r[0],r[1],r[2],r[3])}getValueFromWEBP(e,t,o,l){return new Promise((u,m)=>{new h7().decode(e).then(f=>{const _=this.dataURIConverter(f),b=this.getValueFromPNG(_,t,o,l);u(b)}).catch(f=>m(f))})}pixels2rgba(e,t,o,l){const u=[];for(let b=0;b<e.length;b+=4){const v=e[b],w=e[b+1],x=e[b+2],C=e[b+3],T=[v,w,x,C];u.push(T)}const m=x7(t),r=this.getPixelPosition(o,l,m),f=r[0]+r[1]*this.tileSize;return u[f]}getPixelPosition(e,t,o){const l=this.tileSize,u=this.tileSize,m=o[2]-o[0],r=o[3]-o[1],f=(e-o[0])/m,_=(t-o[1])/r,b=Math.floor(l*f),v=Math.floor(u*(1-_));return[b,v]}getUrlExtension(e){let t=e.split(/[#?]/)[0].split(".").pop();return t&&(t=t.trim()),t}dataURIConverter(e){const t=atob(e.split(",")[1]),o=new Uint8Array(t.length);for(let l=0;l<t.length;l+=1)o[l]=t.charCodeAt(l);return o}}var C7=globalThis&&globalThis.__awaiter||function(i,e,t,o){function l(u){return u instanceof t?u:new t(function(m){m(u)})}return new(t||(t=Promise))(function(u,m){function r(b){try{_(o.next(b))}catch(v){m(v)}}function f(b){try{_(o.throw(b))}catch(v){m(v)}}function _(b){b.done?u(b.value):l(b.value).then(r,f)}_((o=o.apply(i,e||[])).next())})};class E7 extends S7{constructor(e,t,o=5,l=15){super(e,t,o,l)}getElevation(e,t){return C7(this,void 0,void 0,function*(){return yield this.getValue(e,t)})}calc(e,t,o){return-1e4+(e*256*256+t*256+o)*.1}}var nu=63710088e-1,I7={centimeters:nu*100,centimetres:nu*100,degrees:nu/111325,feet:nu*3.28084,inches:nu*39.37,kilometers:nu/1e3,kilometres:nu/1e3,meters:nu,metres:nu,miles:nu/1609.344,millimeters:nu*1e3,millimetres:nu*1e3,nauticalmiles:nu/1852,radians:1,yards:nu*1.0936};function T7(i,e){e===void 0&&(e="kilometers");var t=I7[e];if(!t)throw new Error(e+" units is invalid");return i*t}function Yp(i){var e=i%360;return e*Math.PI/180}function yb(i){if(!i)throw new Error("coord is required");if(!Array.isArray(i)){if(i.type==="Feature"&&i.geometry!==null&&i.geometry.type==="Point")return i.geometry.coordinates;if(i.type==="Point")return i.coordinates}if(Array.isArray(i)&&i.length>=2&&!Array.isArray(i[0])&&!Array.isArray(i[1]))return i;throw new Error("coord must be GeoJSON Point or an Array of numbers")}function L7(i,e,t){t===void 0&&(t={});var o=yb(i),l=yb(e),u=Yp(l[1]-o[1]),m=Yp(l[0]-o[0]),r=Yp(o[1]),f=Yp(l[1]),_=Math.pow(Math.sin(u/2),2)+Math.pow(Math.sin(m/2),2)*Math.cos(r)*Math.cos(f);return T7(2*Math.atan2(Math.sqrt(_),Math.sqrt(1-_)),t.units)}function P7(i){let e,t,o,l,u;t=new Ph({props:{variant:"raised",color:"primary",style:"width:100%",$$slots:{default:[z7]},$$scope:{ctx:i}}}),t.$on("click",i[5]);let m=i[1]&&_b(i);return{c(){e=Ht("div"),en(t.$$.fragment),o=Wi(),m&&m.c(),l=kn(),this.h()},l(r){e=Gt(r,"DIV",{class:!0});var f=$t(e);un(t.$$.fragment,f),f.forEach(De),o=Xi(r),m&&m.l(r),l=kn(),this.h()},h(){qt(e,"class","tool-button svelte-7hbpus")},m(r,f){jt(r,e,f),tn(t,e,null),jt(r,o,f),m&&m.m(r,f),jt(r,l,f),u=!0},p(r,f){const _={};f&524289&&(_.$$scope={dirty:f,ctx:r}),t.$set(_),r[1]?m?(m.p(r,f),f&2&&vt(m,1)):(m=_b(r),m.c(),vt(m,1),m.m(l.parentNode,l)):m&&(Fr(),Lt(m,1,1,()=>{m=null}),Or())},i(r){u||(vt(t.$$.fragment,r),vt(m),u=!0)},o(r){Lt(t.$$.fragment,r),Lt(m),u=!1},d(r){r&&De(e),nn(t),r&&De(o),m&&m.d(r),r&&De(l)}}}function M7(i){let e;return{c(){e=Kn("straighten")},l(t){e=Jn(t,"straighten")},m(t,o){jt(t,e,o)},d(t){t&&De(e)}}}function D7(i){let e;return{c(){e=Kn("stop_circle")},l(t){e=Jn(t,"stop_circle")},m(t,o){jt(t,e,o)},d(t){t&&De(e)}}}function O7(i){let e;function t(u,m){return u[0]?D7:M7}let o=t(i),l=o(i);return{c(){l.c(),e=kn()},l(u){l.l(u),e=kn()},m(u,m){l.m(u,m),jt(u,e,m)},p(u,m){o!==(o=t(u))&&(l.d(1),l=o(u),l&&(l.c(),l.m(e.parentNode,e)))},d(u){l.d(u),u&&De(e)}}}function F7(i){let e;return{c(){e=Kn("Start measure")},l(t){e=Jn(t,"Start measure")},m(t,o){jt(t,e,o)},d(t){t&&De(e)}}}function R7(i){let e;return{c(){e=Kn("Stop measure")},l(t){e=Jn(t,"Stop measure")},m(t,o){jt(t,e,o)},d(t){t&&De(e)}}}function B7(i){let e;function t(u,m){return u[0]?R7:F7}let o=t(i),l=o(i);return{c(){l.c(),e=kn()},l(u){l.l(u),e=kn()},m(u,m){l.m(u,m),jt(u,e,m)},p(u,m){o!==(o=t(u))&&(l.d(1),l=o(u),l&&(l.c(),l.m(e.parentNode,e)))},d(u){l.d(u),u&&De(e)}}}function z7(i){let e,t,o,l;return e=new Dh({props:{class:"material-icons",$$slots:{default:[O7]},$$scope:{ctx:i}}}),o=new oh({props:{$$slots:{default:[B7]},$$scope:{ctx:i}}}),{c(){en(e.$$.fragment),t=Wi(),en(o.$$.fragment)},l(u){un(e.$$.fragment,u),t=Xi(u),un(o.$$.fragment,u)},m(u,m){tn(e,u,m),jt(u,t,m),tn(o,u,m),l=!0},p(u,m){const r={};m&524289&&(r.$$scope={dirty:m,ctx:u}),e.$set(r);const f={};m&524289&&(f.$$scope={dirty:m,ctx:u}),o.$set(f)},i(u){l||(vt(e.$$.fragment,u),vt(o.$$.fragment,u),l=!0)},o(u){Lt(e.$$.fragment,u),Lt(o.$$.fragment,u),l=!1},d(u){nn(e,u),u&&De(t),nn(o,u)}}}function _b(i){let e,t,o,l,u,m,r;return o=new Ph({props:{variant:"raised",color:"secondary",style:"width:100%",$$slots:{default:[U7]},$$scope:{ctx:i}}}),o.$on("click",i[6]),m=new Ph({props:{variant:"raised",color:"secondary",style:"width:100%",$$slots:{default:[H7]},$$scope:{ctx:i}}}),m.$on("click",i[7]),{c(){e=Ht("div"),t=Ht("div"),en(o.$$.fragment),l=Wi(),u=Ht("div"),en(m.$$.fragment),this.h()},l(f){e=Gt(f,"DIV",{style:!0});var _=$t(e);t=Gt(_,"DIV",{class:!0});var b=$t(t);un(o.$$.fragment,b),b.forEach(De),l=Xi(_),u=Gt(_,"DIV",{class:!0});var v=$t(u);un(m.$$.fragment,v),v.forEach(De),_.forEach(De),this.h()},h(){qt(t,"class","sub-button svelte-7hbpus"),qt(u,"class","sub-button svelte-7hbpus"),Ou(e,"display","inline-flex"),Ou(e,"width","100%")},m(f,_){jt(f,e,_),Ut(e,t),tn(o,t,null),Ut(e,l),Ut(e,u),tn(m,u,null),r=!0},p(f,_){const b={};_&524288&&(b.$$scope={dirty:_,ctx:f}),o.$set(b);const v={};_&524288&&(v.$$scope={dirty:_,ctx:f}),m.$set(v)},i(f){r||(vt(o.$$.fragment,f),vt(m.$$.fragment,f),r=!0)},o(f){Lt(o.$$.fragment,f),Lt(m.$$.fragment,f),r=!1},d(f){f&&De(e),nn(o),nn(m)}}}function N7(i){let e;return{c(){e=Kn("delete")},l(t){e=Jn(t,"delete")},m(t,o){jt(t,e,o)},d(t){t&&De(e)}}}function j7(i){let e;return{c(){e=Kn("Clear")},l(t){e=Jn(t,"Clear")},m(t,o){jt(t,e,o)},d(t){t&&De(e)}}}function U7(i){let e,t,o,l;return e=new Dh({props:{class:"material-icons",$$slots:{default:[N7]},$$scope:{ctx:i}}}),o=new oh({props:{$$slots:{default:[j7]},$$scope:{ctx:i}}}),{c(){en(e.$$.fragment),t=Wi(),en(o.$$.fragment)},l(u){un(e.$$.fragment,u),t=Xi(u),un(o.$$.fragment,u)},m(u,m){tn(e,u,m),jt(u,t,m),tn(o,u,m),l=!0},p(u,m){const r={};m&524288&&(r.$$scope={dirty:m,ctx:u}),e.$set(r);const f={};m&524288&&(f.$$scope={dirty:m,ctx:u}),o.$set(f)},i(u){l||(vt(e.$$.fragment,u),vt(o.$$.fragment,u),l=!0)},o(u){Lt(e.$$.fragment,u),Lt(o.$$.fragment,u),l=!1},d(u){nn(e,u),u&&De(t),nn(o,u)}}}function V7(i){let e;return{c(){e=Kn("file_download")},l(t){e=Jn(t,"file_download")},m(t,o){jt(t,e,o)},d(t){t&&De(e)}}}function q7(i){let e;return{c(){e=Kn("GeoJSON")},l(t){e=Jn(t,"GeoJSON")},m(t,o){jt(t,e,o)},d(t){t&&De(e)}}}function H7(i){let e,t,o,l;return e=new Dh({props:{class:"material-icons",$$slots:{default:[V7]},$$scope:{ctx:i}}}),o=new oh({props:{$$slots:{default:[q7]},$$scope:{ctx:i}}}),{c(){en(e.$$.fragment),t=Wi(),en(o.$$.fragment)},l(u){un(e.$$.fragment,u),t=Xi(u),un(o.$$.fragment,u)},m(u,m){tn(e,u,m),jt(u,t,m),tn(o,u,m),l=!0},p(u,m){const r={};m&524288&&(r.$$scope={dirty:m,ctx:u}),e.$set(r);const f={};m&524288&&(f.$$scope={dirty:m,ctx:u}),o.$set(f)},i(u){l||(vt(e.$$.fragment,u),vt(o.$$.fragment,u),l=!0)},o(u){Lt(e.$$.fragment,u),Lt(o.$$.fragment,u),l=!1},d(u){nn(e,u),u&&De(t),nn(o,u)}}}function G7(i){let e,t,o=Br.elevation&&P7(i);return{c(){o&&o.c(),e=kn()},l(l){o&&o.l(l),e=kn()},m(l,u){o&&o.m(l,u),jt(l,e,u),t=!0},p(l,[u]){Br.elevation&&o.p(l,u)},i(l){t||(vt(o),t=!0)},o(l){Lt(o),t=!1},d(l){o&&o.d(l),l&&De(e)}}}const C0="elev-controls-source-line",x2="elev-controls-layer-line",A2="elev-controls-layer-symbol",E0="elev-controls-source-symbol";function W7(i,e,t){let o,l;Yo(i,wd,te=>t(8,o=te)),Yo(i,Pu,te=>t(9,l=te));let u,m=Br.elevation.options.units||"kilometers",r=!1;ks(()=>{if(o)o.coordinates.length>0&&t(1,r=!0);else{const te={markers:[],coordinates:[],elevations:[]};wd.update(()=>te)}}),nh(()=>{u===!0&&b()});const f=()=>{u?b():_()},_=()=>{l&&(l.getCanvas().style.cursor="crosshair",t(0,u=!0),l.on("click",w),l.fire("elevation.on"))},b=()=>{t(0,u=!1),l&&(l.getCanvas().style.cursor="",l.off("click",w),l.fire("elevation.off"))},v=()=>{l&&(l.getLayer(x2)&&l.removeLayer(x2),l.getLayer(A2)&&l.removeLayer(A2),l.getSource(C0)&&l.removeSource(C0),l.getSource(E0)&&l.removeSource(E0)),o.markers.forEach(te=>te.remove()),t(1,r=!1)},w=te=>{(!(l!=null&&l.getSource(C0))||!(l!=null&&l.getSource(E0)))&&(v(),x());let J=l==null?void 0:l.getZoom();J||(J=15),J=Math.round(J);const ie=[te.lngLat.lng,te.lngLat.lat];new E7(Br.elevation.url,Br.elevation.options.tileSize).getElevation(ie,J).then(Pe=>{if(Pe||(Pe=-1),l){const de=new Tu.exports.Marker({draggable:!0}).setLngLat(te.lngLat).addTo(l);o.markers.push(de),o.coordinates.push([ie[0],ie[1],Pe]),o.elevations.push(Pe),l.getSource(C0).setData(T(o.coordinates)),l.getSource(E0).setData(S(o.coordinates)),t(1,r=!0)}})},x=()=>{vl(wd,o.markers=[],o),vl(wd,o.coordinates=[],o),vl(wd,o.elevations=[],o),l&&(l.addSource(C0,{type:"geojson",data:T(o.coordinates)}),l.addSource(E0,{type:"geojson",data:S(o.coordinates)}),l.addLayer({id:x2,type:"line",source:C0,paint:{"line-color":Br.elevation.options.mainColor,"line-width":2}}),l.addLayer({id:A2,type:"symbol",source:E0,layout:{"text-field":"{text}","text-font":Br.elevation.options.font,"text-size":Br.elevation.options.fontSize,"text-variable-anchor":["top","bottom","left","right"],"text-radial-offset":.8,"text-justify":"auto"},paint:{"text-color":Br.elevation.options.mainColor,"text-halo-color":Br.elevation.options.haloColor,"text-halo-width":Br.elevation.options.fontHalo}}))},C=(te,J)=>{let ie=`${te.toFixed(2)} km`;te<1&&(ie=`${(te*1e3).toFixed()} m`);let Ee="";return J>0&&(Ee=`
alt.${J}m`),`${ie}${Ee}`},T=(te=[])=>({type:"Feature",properties:{},geometry:{type:"LineString",coordinates:te}}),S=(te=[])=>{let J=0;return{type:"FeatureCollection",features:te.map((ie,Ee)=>(Ee>0&&(J+=L7(te[Ee-1],te[Ee],{units:m})),{type:"Feature",properties:{id:Ee+1,text:C(J,ie[2]),elevation:ie[2],length:(J*1e3).toFixed()},geometry:{type:"Point",coordinates:ie}}))}},M=()=>{if(o.coordinates.length===0)return;const te=S(o.coordinates);if(te.features.forEach(Ee=>{delete Ee.properties.text}),o.coordinates.length>1){const Ee=T(o.coordinates);te.features.push(Ee)}const J="measure_result.geojson",ie=JSON.stringify(te);O(J,ie)},O=(te,J)=>{const ie=new Blob([J],{type:"text/plain"}),Ee=document.createElement("a");Ee.href=URL.createObjectURL(ie),Ee.setAttribute("download",te),Ee.dispatchEvent(new MouseEvent("click"))};return[u,r,f,v,M,()=>f(),()=>v(),()=>M()]}class X7 extends br{constructor(e){super(),wr(this,e,W7,G7,mr,{})}}/**
 * @license
 * Copyright 2016 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var Y7={LABEL_FLOAT_ABOVE:"mdc-floating-label--float-above",LABEL_REQUIRED:"mdc-floating-label--required",LABEL_SHAKE:"mdc-floating-label--shake",ROOT:"mdc-floating-label"};/**
 * @license
 * Copyright 2016 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var Z7=function(i){jl(e,i);function e(t){var o=i.call(this,fs(fs({},e.defaultAdapter),t))||this;return o.shakeAnimationEndHandler=function(){o.handleShakeAnimationEnd()},o}return Object.defineProperty(e,"cssClasses",{get:function(){return Y7},enumerable:!1,configurable:!0}),Object.defineProperty(e,"defaultAdapter",{get:function(){return{addClass:function(){},removeClass:function(){},getWidth:function(){return 0},registerInteractionHandler:function(){},deregisterInteractionHandler:function(){}}},enumerable:!1,configurable:!0}),e.prototype.init=function(){this.adapter.registerInteractionHandler("animationend",this.shakeAnimationEndHandler)},e.prototype.destroy=function(){this.adapter.deregisterInteractionHandler("animationend",this.shakeAnimationEndHandler)},e.prototype.getWidth=function(){return this.adapter.getWidth()},e.prototype.shake=function(t){var o=e.cssClasses.LABEL_SHAKE;t?this.adapter.addClass(o):this.adapter.removeClass(o)},e.prototype.float=function(t){var o=e.cssClasses,l=o.LABEL_FLOAT_ABOVE,u=o.LABEL_SHAKE;t?this.adapter.addClass(l):(this.adapter.removeClass(l),this.adapter.removeClass(u))},e.prototype.setRequired=function(t){var o=e.cssClasses.LABEL_REQUIRED;t?this.adapter.addClass(o):this.adapter.removeClass(o)},e.prototype.handleShakeAnimationEnd=function(){var t=e.cssClasses.LABEL_SHAKE;this.adapter.removeClass(t)},e}(oc);/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var Ff={LINE_RIPPLE_ACTIVE:"mdc-line-ripple--active",LINE_RIPPLE_DEACTIVATING:"mdc-line-ripple--deactivating"};/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var K7=function(i){jl(e,i);function e(t){var o=i.call(this,fs(fs({},e.defaultAdapter),t))||this;return o.transitionEndHandler=function(l){o.handleTransitionEnd(l)},o}return Object.defineProperty(e,"cssClasses",{get:function(){return Ff},enumerable:!1,configurable:!0}),Object.defineProperty(e,"defaultAdapter",{get:function(){return{addClass:function(){},removeClass:function(){},hasClass:function(){return!1},setStyle:function(){},registerEventHandler:function(){},deregisterEventHandler:function(){}}},enumerable:!1,configurable:!0}),e.prototype.init=function(){this.adapter.registerEventHandler("transitionend",this.transitionEndHandler)},e.prototype.destroy=function(){this.adapter.deregisterEventHandler("transitionend",this.transitionEndHandler)},e.prototype.activate=function(){this.adapter.removeClass(Ff.LINE_RIPPLE_DEACTIVATING),this.adapter.addClass(Ff.LINE_RIPPLE_ACTIVE)},e.prototype.setRippleCenter=function(t){this.adapter.setStyle("transform-origin",t+"px center")},e.prototype.deactivate=function(){this.adapter.addClass(Ff.LINE_RIPPLE_DEACTIVATING)},e.prototype.handleTransitionEnd=function(t){var o=this.adapter.hasClass(Ff.LINE_RIPPLE_DEACTIVATING);t.propertyName==="opacity"&&o&&(this.adapter.removeClass(Ff.LINE_RIPPLE_ACTIVE),this.adapter.removeClass(Ff.LINE_RIPPLE_DEACTIVATING))},e}(oc);/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var J7={ANCHOR:"mdc-menu-surface--anchor",ANIMATING_CLOSED:"mdc-menu-surface--animating-closed",ANIMATING_OPEN:"mdc-menu-surface--animating-open",FIXED:"mdc-menu-surface--fixed",IS_OPEN_BELOW:"mdc-menu-surface--is-open-below",OPEN:"mdc-menu-surface--open",ROOT:"mdc-menu-surface"},Q7={CLOSED_EVENT:"MDCMenuSurface:closed",CLOSING_EVENT:"MDCMenuSurface:closing",OPENED_EVENT:"MDCMenuSurface:opened",FOCUSABLE_ELEMENTS:["button:not(:disabled)",'[href]:not([aria-disabled="true"])',"input:not(:disabled)","select:not(:disabled)","textarea:not(:disabled)",'[tabindex]:not([tabindex="-1"]):not([aria-disabled="true"])'].join(", ")},Cd={TRANSITION_OPEN_DURATION:120,TRANSITION_CLOSE_DURATION:75,MARGIN_TO_EDGE:32,ANCHOR_TO_MENU_SURFACE_WIDTH_RATIO:.67,TOUCH_EVENT_WAIT_MS:30},$s;(function(i){i[i.BOTTOM=1]="BOTTOM",i[i.CENTER=2]="CENTER",i[i.RIGHT=4]="RIGHT",i[i.FLIP_RTL=8]="FLIP_RTL"})($s||($s={}));var Xf;(function(i){i[i.TOP_LEFT=0]="TOP_LEFT",i[i.TOP_RIGHT=4]="TOP_RIGHT",i[i.BOTTOM_LEFT=1]="BOTTOM_LEFT",i[i.BOTTOM_RIGHT=5]="BOTTOM_RIGHT",i[i.TOP_START=8]="TOP_START",i[i.TOP_END=12]="TOP_END",i[i.BOTTOM_START=9]="BOTTOM_START",i[i.BOTTOM_END=13]="BOTTOM_END"})(Xf||(Xf={}));/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var $h,kh,lo={LIST_ITEM_ACTIVATED_CLASS:"mdc-list-item--activated",LIST_ITEM_CLASS:"mdc-list-item",LIST_ITEM_DISABLED_CLASS:"mdc-list-item--disabled",LIST_ITEM_SELECTED_CLASS:"mdc-list-item--selected",LIST_ITEM_TEXT_CLASS:"mdc-list-item__text",LIST_ITEM_PRIMARY_TEXT_CLASS:"mdc-list-item__primary-text",ROOT:"mdc-list"};$h={},$h[""+lo.LIST_ITEM_ACTIVATED_CLASS]="mdc-list-item--activated",$h[""+lo.LIST_ITEM_CLASS]="mdc-list-item",$h[""+lo.LIST_ITEM_DISABLED_CLASS]="mdc-list-item--disabled",$h[""+lo.LIST_ITEM_SELECTED_CLASS]="mdc-list-item--selected",$h[""+lo.LIST_ITEM_PRIMARY_TEXT_CLASS]="mdc-list-item__primary-text",$h[""+lo.ROOT]="mdc-list";var I0=(kh={},kh[""+lo.LIST_ITEM_ACTIVATED_CLASS]="mdc-deprecated-list-item--activated",kh[""+lo.LIST_ITEM_CLASS]="mdc-deprecated-list-item",kh[""+lo.LIST_ITEM_DISABLED_CLASS]="mdc-deprecated-list-item--disabled",kh[""+lo.LIST_ITEM_SELECTED_CLASS]="mdc-deprecated-list-item--selected",kh[""+lo.LIST_ITEM_TEXT_CLASS]="mdc-deprecated-list-item__text",kh[""+lo.LIST_ITEM_PRIMARY_TEXT_CLASS]="mdc-deprecated-list-item__primary-text",kh[""+lo.ROOT]="mdc-deprecated-list",kh),ef={ACTION_EVENT:"MDCList:action",ARIA_CHECKED:"aria-checked",ARIA_CHECKED_CHECKBOX_SELECTOR:'[role="checkbox"][aria-checked="true"]',ARIA_CHECKED_RADIO_SELECTOR:'[role="radio"][aria-checked="true"]',ARIA_CURRENT:"aria-current",ARIA_DISABLED:"aria-disabled",ARIA_ORIENTATION:"aria-orientation",ARIA_ORIENTATION_HORIZONTAL:"horizontal",ARIA_ROLE_CHECKBOX_SELECTOR:'[role="checkbox"]',ARIA_SELECTED:"aria-selected",ARIA_INTERACTIVE_ROLES_SELECTOR:'[role="listbox"], [role="menu"]',ARIA_MULTI_SELECTABLE_SELECTOR:'[aria-multiselectable="true"]',CHECKBOX_RADIO_SELECTOR:'input[type="checkbox"], input[type="radio"]',CHECKBOX_SELECTOR:'input[type="checkbox"]',CHILD_ELEMENTS_TO_TOGGLE_TABINDEX:`
    .`+lo.LIST_ITEM_CLASS+` button:not(:disabled),
    .`+lo.LIST_ITEM_CLASS+` a,
    .`+I0[lo.LIST_ITEM_CLASS]+` button:not(:disabled),
    .`+I0[lo.LIST_ITEM_CLASS]+` a
  `,DEPRECATED_SELECTOR:".mdc-deprecated-list",FOCUSABLE_CHILD_ELEMENTS:`
    .`+lo.LIST_ITEM_CLASS+` button:not(:disabled),
    .`+lo.LIST_ITEM_CLASS+` a,
    .`+lo.LIST_ITEM_CLASS+` input[type="radio"]:not(:disabled),
    .`+lo.LIST_ITEM_CLASS+` input[type="checkbox"]:not(:disabled),
    .`+I0[lo.LIST_ITEM_CLASS]+` button:not(:disabled),
    .`+I0[lo.LIST_ITEM_CLASS]+` a,
    .`+I0[lo.LIST_ITEM_CLASS]+` input[type="radio"]:not(:disabled),
    .`+I0[lo.LIST_ITEM_CLASS]+` input[type="checkbox"]:not(:disabled)
  `,RADIO_SELECTOR:'input[type="radio"]',SELECTED_ITEM_SELECTOR:'[aria-selected="true"], [aria-current="true"]'},xa={UNSET_INDEX:-1,TYPEAHEAD_BUFFER_CLEAR_TIMEOUT_MS:300};/**
 * @license
 * Copyright 2020 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var $7=["input","button","textarea","select"],Vf=function(i){var e=i.target;if(!!e){var t=(""+e.tagName).toLowerCase();$7.indexOf(t)===-1&&i.preventDefault()}};/**
 * @license
 * Copyright 2020 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */function eL(){var i={bufferClearTimeout:0,currentFirstChar:"",sortedIndexCursor:0,typeaheadBuffer:""};return i}function tL(i,e){for(var t=new Map,o=0;o<i;o++){var l=e(o).trim();if(!!l){var u=l[0].toLowerCase();t.has(u)||t.set(u,[]),t.get(u).push({text:l.toLowerCase(),index:o})}}return t.forEach(function(m){m.sort(function(r,f){return r.index-f.index})}),t}function ag(i,e){var t=i.nextChar,o=i.focusItemAtIndex,l=i.sortedIndexByFirstChar,u=i.focusedItemIndex,m=i.skipFocus,r=i.isItemAtIndexDisabled;clearTimeout(e.bufferClearTimeout),e.bufferClearTimeout=setTimeout(function(){y3(e)},xa.TYPEAHEAD_BUFFER_CLEAR_TIMEOUT_MS),e.typeaheadBuffer=e.typeaheadBuffer+t;var f;return e.typeaheadBuffer.length===1?f=iL(l,u,r,e):f=nL(l,r,e),f!==-1&&!m&&o(f),f}function iL(i,e,t,o){var l=o.typeaheadBuffer[0],u=i.get(l);if(!u)return-1;if(l===o.currentFirstChar&&u[o.sortedIndexCursor].index===e){o.sortedIndexCursor=(o.sortedIndexCursor+1)%u.length;var m=u[o.sortedIndexCursor].index;if(!t(m))return m}o.currentFirstChar=l;var r=-1,f;for(f=0;f<u.length;f++)if(!t(u[f].index)){r=f;break}for(;f<u.length;f++)if(u[f].index>e&&!t(u[f].index)){r=f;break}return r!==-1?(o.sortedIndexCursor=r,u[o.sortedIndexCursor].index):-1}function nL(i,e,t){var o=t.typeaheadBuffer[0],l=i.get(o);if(!l)return-1;var u=l[t.sortedIndexCursor];if(u.text.lastIndexOf(t.typeaheadBuffer,0)===0&&!e(u.index))return u.index;for(var m=(t.sortedIndexCursor+1)%l.length,r=-1;m!==t.sortedIndexCursor;){var f=l[m],_=f.text.lastIndexOf(t.typeaheadBuffer,0)===0,b=!e(f.index);if(_&&b){r=m;break}m=(m+1)%l.length}return r!==-1?(t.sortedIndexCursor=r,l[t.sortedIndexCursor].index):-1}function g3(i){return i.typeaheadBuffer.length>0}function y3(i){i.typeaheadBuffer=""}function vb(i,e){var t=i.event,o=i.isTargetListItem,l=i.focusedItemIndex,u=i.focusItemAtIndex,m=i.sortedIndexByFirstChar,r=i.isItemAtIndexDisabled,f=ca(t)==="ArrowLeft",_=ca(t)==="ArrowUp",b=ca(t)==="ArrowRight",v=ca(t)==="ArrowDown",w=ca(t)==="Home",x=ca(t)==="End",C=ca(t)==="Enter",T=ca(t)==="Spacebar";if(t.ctrlKey||t.metaKey||f||_||b||v||w||x||C)return-1;var S=!T&&t.key.length===1;if(S){Vf(t);var M={focusItemAtIndex:u,focusedItemIndex:l,nextChar:t.key.toLowerCase(),sortedIndexByFirstChar:m,skipFocus:!1,isItemAtIndexDisabled:r};return ag(M,e)}if(!T)return-1;o&&Vf(t);var O=o&&g3(e);if(O){var M={focusItemAtIndex:u,focusedItemIndex:l,nextChar:" ",sortedIndexByFirstChar:m,skipFocus:!1,isItemAtIndexDisabled:r};return ag(M,e)}return-1}/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */function rL(i){return i instanceof Array}var oL=function(i){jl(e,i);function e(t){var o=i.call(this,fs(fs({},e.defaultAdapter),t))||this;return o.wrapFocus=!1,o.isVertical=!0,o.isSingleSelectionList=!1,o.selectedIndex=xa.UNSET_INDEX,o.focusedItemIndex=xa.UNSET_INDEX,o.useActivatedClass=!1,o.useSelectedAttr=!1,o.ariaCurrentAttrValue=null,o.isCheckboxList=!1,o.isRadioList=!1,o.hasTypeahead=!1,o.typeaheadState=eL(),o.sortedIndexByFirstChar=new Map,o}return Object.defineProperty(e,"strings",{get:function(){return ef},enumerable:!1,configurable:!0}),Object.defineProperty(e,"cssClasses",{get:function(){return lo},enumerable:!1,configurable:!0}),Object.defineProperty(e,"numbers",{get:function(){return xa},enumerable:!1,configurable:!0}),Object.defineProperty(e,"defaultAdapter",{get:function(){return{addClassForElementIndex:function(){},focusItemAtIndex:function(){},getAttributeForElementIndex:function(){return null},getFocusedElementIndex:function(){return 0},getListItemCount:function(){return 0},hasCheckboxAtIndex:function(){return!1},hasRadioAtIndex:function(){return!1},isCheckboxCheckedAtIndex:function(){return!1},isFocusInsideList:function(){return!1},isRootFocused:function(){return!1},listItemAtIndexHasClass:function(){return!1},notifyAction:function(){},removeClassForElementIndex:function(){},setAttributeForElementIndex:function(){},setCheckedCheckboxOrRadioAtIndex:function(){},setTabIndexForListItemChildren:function(){},getPrimaryTextAtIndex:function(){return""}}},enumerable:!1,configurable:!0}),e.prototype.layout=function(){this.adapter.getListItemCount()!==0&&(this.adapter.hasCheckboxAtIndex(0)?this.isCheckboxList=!0:this.adapter.hasRadioAtIndex(0)?this.isRadioList=!0:this.maybeInitializeSingleSelection(),this.hasTypeahead&&(this.sortedIndexByFirstChar=this.typeaheadInitSortedIndex()))},e.prototype.getFocusedItemIndex=function(){return this.focusedItemIndex},e.prototype.setWrapFocus=function(t){this.wrapFocus=t},e.prototype.setVerticalOrientation=function(t){this.isVertical=t},e.prototype.setSingleSelection=function(t){this.isSingleSelectionList=t,t&&(this.maybeInitializeSingleSelection(),this.selectedIndex=this.getSelectedIndexFromDOM())},e.prototype.maybeInitializeSingleSelection=function(){var t=this.getSelectedIndexFromDOM();if(t!==xa.UNSET_INDEX){var o=this.adapter.listItemAtIndexHasClass(t,lo.LIST_ITEM_ACTIVATED_CLASS);o&&this.setUseActivatedClass(!0),this.isSingleSelectionList=!0,this.selectedIndex=t}},e.prototype.getSelectedIndexFromDOM=function(){for(var t=xa.UNSET_INDEX,o=this.adapter.getListItemCount(),l=0;l<o;l++){var u=this.adapter.listItemAtIndexHasClass(l,lo.LIST_ITEM_SELECTED_CLASS),m=this.adapter.listItemAtIndexHasClass(l,lo.LIST_ITEM_ACTIVATED_CLASS);if(!!(u||m)){t=l;break}}return t},e.prototype.setHasTypeahead=function(t){this.hasTypeahead=t,t&&(this.sortedIndexByFirstChar=this.typeaheadInitSortedIndex())},e.prototype.isTypeaheadInProgress=function(){return this.hasTypeahead&&g3(this.typeaheadState)},e.prototype.setUseActivatedClass=function(t){this.useActivatedClass=t},e.prototype.setUseSelectedAttribute=function(t){this.useSelectedAttr=t},e.prototype.getSelectedIndex=function(){return this.selectedIndex},e.prototype.setSelectedIndex=function(t,o){var l=o===void 0?{}:o,u=l.forceUpdate;!this.isIndexValid(t)||(this.isCheckboxList?this.setCheckboxAtIndex(t):this.isRadioList?this.setRadioAtIndex(t):this.setSingleSelectionAtIndex(t,{forceUpdate:u}))},e.prototype.handleFocusIn=function(t){t>=0&&(this.focusedItemIndex=t,this.adapter.setAttributeForElementIndex(t,"tabindex","0"),this.adapter.setTabIndexForListItemChildren(t,"0"))},e.prototype.handleFocusOut=function(t){var o=this;t>=0&&(this.adapter.setAttributeForElementIndex(t,"tabindex","-1"),this.adapter.setTabIndexForListItemChildren(t,"-1")),setTimeout(function(){o.adapter.isFocusInsideList()||o.setTabindexToFirstSelectedOrFocusedItem()},0)},e.prototype.handleKeydown=function(t,o,l){var u=this,m=ca(t)==="ArrowLeft",r=ca(t)==="ArrowUp",f=ca(t)==="ArrowRight",_=ca(t)==="ArrowDown",b=ca(t)==="Home",v=ca(t)==="End",w=ca(t)==="Enter",x=ca(t)==="Spacebar",C=t.key==="A"||t.key==="a";if(this.adapter.isRootFocused()){if(r||v?(t.preventDefault(),this.focusLastElement()):(_||b)&&(t.preventDefault(),this.focusFirstElement()),this.hasTypeahead){var T={event:t,focusItemAtIndex:function(O){u.focusItemAtIndex(O)},focusedItemIndex:-1,isTargetListItem:o,sortedIndexByFirstChar:this.sortedIndexByFirstChar,isItemAtIndexDisabled:function(O){return u.adapter.listItemAtIndexHasClass(O,lo.LIST_ITEM_DISABLED_CLASS)}};vb(T,this.typeaheadState)}return}var S=this.adapter.getFocusedElementIndex();if(!(S===-1&&(S=l,S<0))){if(this.isVertical&&_||!this.isVertical&&f)Vf(t),this.focusNextElement(S);else if(this.isVertical&&r||!this.isVertical&&m)Vf(t),this.focusPrevElement(S);else if(b)Vf(t),this.focusFirstElement();else if(v)Vf(t),this.focusLastElement();else if(C&&t.ctrlKey&&this.isCheckboxList)t.preventDefault(),this.toggleAll(this.selectedIndex===xa.UNSET_INDEX?[]:this.selectedIndex);else if((w||x)&&o){var M=t.target;if(M&&M.tagName==="A"&&w||(Vf(t),this.adapter.listItemAtIndexHasClass(S,lo.LIST_ITEM_DISABLED_CLASS)))return;this.isTypeaheadInProgress()||(this.isSelectableList()&&this.setSelectedIndexOnAction(S),this.adapter.notifyAction(S))}if(this.hasTypeahead){var T={event:t,focusItemAtIndex:function(V){u.focusItemAtIndex(V)},focusedItemIndex:this.focusedItemIndex,isTargetListItem:o,sortedIndexByFirstChar:this.sortedIndexByFirstChar,isItemAtIndexDisabled:function(V){return u.adapter.listItemAtIndexHasClass(V,lo.LIST_ITEM_DISABLED_CLASS)}};vb(T,this.typeaheadState)}}},e.prototype.handleClick=function(t,o){t!==xa.UNSET_INDEX&&(this.adapter.listItemAtIndexHasClass(t,lo.LIST_ITEM_DISABLED_CLASS)||(this.isSelectableList()&&this.setSelectedIndexOnAction(t,o),this.adapter.notifyAction(t)))},e.prototype.focusNextElement=function(t){var o=this.adapter.getListItemCount(),l=t+1;if(l>=o)if(this.wrapFocus)l=0;else return t;return this.focusItemAtIndex(l),l},e.prototype.focusPrevElement=function(t){var o=t-1;if(o<0)if(this.wrapFocus)o=this.adapter.getListItemCount()-1;else return t;return this.focusItemAtIndex(o),o},e.prototype.focusFirstElement=function(){return this.focusItemAtIndex(0),0},e.prototype.focusLastElement=function(){var t=this.adapter.getListItemCount()-1;return this.focusItemAtIndex(t),t},e.prototype.focusInitialElement=function(){var t=this.getFirstSelectedOrFocusedItemIndex();return this.focusItemAtIndex(t),t},e.prototype.setEnabled=function(t,o){!this.isIndexValid(t)||(o?(this.adapter.removeClassForElementIndex(t,lo.LIST_ITEM_DISABLED_CLASS),this.adapter.setAttributeForElementIndex(t,ef.ARIA_DISABLED,"false")):(this.adapter.addClassForElementIndex(t,lo.LIST_ITEM_DISABLED_CLASS),this.adapter.setAttributeForElementIndex(t,ef.ARIA_DISABLED,"true")))},e.prototype.setSingleSelectionAtIndex=function(t,o){var l=o===void 0?{}:o,u=l.forceUpdate;if(!(this.selectedIndex===t&&!u)){var m=lo.LIST_ITEM_SELECTED_CLASS;this.useActivatedClass&&(m=lo.LIST_ITEM_ACTIVATED_CLASS),this.selectedIndex!==xa.UNSET_INDEX&&this.adapter.removeClassForElementIndex(this.selectedIndex,m),this.setAriaForSingleSelectionAtIndex(t),this.setTabindexAtIndex(t),t!==xa.UNSET_INDEX&&this.adapter.addClassForElementIndex(t,m),this.selectedIndex=t}},e.prototype.setAriaForSingleSelectionAtIndex=function(t){this.selectedIndex===xa.UNSET_INDEX&&(this.ariaCurrentAttrValue=this.adapter.getAttributeForElementIndex(t,ef.ARIA_CURRENT));var o=this.ariaCurrentAttrValue!==null,l=o?ef.ARIA_CURRENT:ef.ARIA_SELECTED;if(this.selectedIndex!==xa.UNSET_INDEX&&this.adapter.setAttributeForElementIndex(this.selectedIndex,l,"false"),t!==xa.UNSET_INDEX){var u=o?this.ariaCurrentAttrValue:"true";this.adapter.setAttributeForElementIndex(t,l,u)}},e.prototype.getSelectionAttribute=function(){return this.useSelectedAttr?ef.ARIA_SELECTED:ef.ARIA_CHECKED},e.prototype.setRadioAtIndex=function(t){var o=this.getSelectionAttribute();this.adapter.setCheckedCheckboxOrRadioAtIndex(t,!0),this.selectedIndex!==xa.UNSET_INDEX&&this.adapter.setAttributeForElementIndex(this.selectedIndex,o,"false"),this.adapter.setAttributeForElementIndex(t,o,"true"),this.selectedIndex=t},e.prototype.setCheckboxAtIndex=function(t){for(var o=this.getSelectionAttribute(),l=0;l<this.adapter.getListItemCount();l++){var u=!1;t.indexOf(l)>=0&&(u=!0),this.adapter.setCheckedCheckboxOrRadioAtIndex(l,u),this.adapter.setAttributeForElementIndex(l,o,u?"true":"false")}this.selectedIndex=t},e.prototype.setTabindexAtIndex=function(t){this.focusedItemIndex===xa.UNSET_INDEX&&t!==0?this.adapter.setAttributeForElementIndex(0,"tabindex","-1"):this.focusedItemIndex>=0&&this.focusedItemIndex!==t&&this.adapter.setAttributeForElementIndex(this.focusedItemIndex,"tabindex","-1"),!(this.selectedIndex instanceof Array)&&this.selectedIndex!==t&&this.adapter.setAttributeForElementIndex(this.selectedIndex,"tabindex","-1"),t!==xa.UNSET_INDEX&&this.adapter.setAttributeForElementIndex(t,"tabindex","0")},e.prototype.isSelectableList=function(){return this.isSingleSelectionList||this.isCheckboxList||this.isRadioList},e.prototype.setTabindexToFirstSelectedOrFocusedItem=function(){var t=this.getFirstSelectedOrFocusedItemIndex();this.setTabindexAtIndex(t)},e.prototype.getFirstSelectedOrFocusedItemIndex=function(){return this.isSelectableList()?typeof this.selectedIndex=="number"&&this.selectedIndex!==xa.UNSET_INDEX?this.selectedIndex:rL(this.selectedIndex)&&this.selectedIndex.length>0?this.selectedIndex.reduce(function(t,o){return Math.min(t,o)}):0:Math.max(this.focusedItemIndex,0)},e.prototype.isIndexValid=function(t){var o=this;if(t instanceof Array){if(!this.isCheckboxList)throw new Error("MDCListFoundation: Array of index is only supported for checkbox based list");return t.length===0?!0:t.some(function(l){return o.isIndexInRange(l)})}else if(typeof t=="number"){if(this.isCheckboxList)throw new Error("MDCListFoundation: Expected array of index for checkbox based list but got number: "+t);return this.isIndexInRange(t)||this.isSingleSelectionList&&t===xa.UNSET_INDEX}else return!1},e.prototype.isIndexInRange=function(t){var o=this.adapter.getListItemCount();return t>=0&&t<o},e.prototype.setSelectedIndexOnAction=function(t,o){o===void 0&&(o=!0),this.isCheckboxList?this.toggleCheckboxAtIndex(t,o):this.setSelectedIndex(t)},e.prototype.toggleCheckboxAtIndex=function(t,o){var l=this.getSelectionAttribute(),u=this.adapter.isCheckboxCheckedAtIndex(t);o&&(u=!u,this.adapter.setCheckedCheckboxOrRadioAtIndex(t,u)),this.adapter.setAttributeForElementIndex(t,l,u?"true":"false");var m=this.selectedIndex===xa.UNSET_INDEX?[]:this.selectedIndex.slice();u?m.push(t):m=m.filter(function(r){return r!==t}),this.selectedIndex=m},e.prototype.focusItemAtIndex=function(t){this.adapter.focusItemAtIndex(t),this.focusedItemIndex=t},e.prototype.toggleAll=function(t){var o=this.adapter.getListItemCount();if(t.length===o)this.setCheckboxAtIndex([]);else{for(var l=[],u=0;u<o;u++)(!this.adapter.listItemAtIndexHasClass(u,lo.LIST_ITEM_DISABLED_CLASS)||t.indexOf(u)>-1)&&l.push(u);this.setCheckboxAtIndex(l)}},e.prototype.typeaheadMatchItem=function(t,o,l){var u=this;l===void 0&&(l=!1);var m={focusItemAtIndex:function(r){u.focusItemAtIndex(r)},focusedItemIndex:o||this.focusedItemIndex,nextChar:t,sortedIndexByFirstChar:this.sortedIndexByFirstChar,skipFocus:l,isItemAtIndexDisabled:function(r){return u.adapter.listItemAtIndexHasClass(r,lo.LIST_ITEM_DISABLED_CLASS)}};return ag(m,this.typeaheadState)},e.prototype.typeaheadInitSortedIndex=function(){return tL(this.adapter.getListItemCount(),this.adapter.getPrimaryTextAtIndex)},e.prototype.clearTypeaheadBuffer=function(){y3(this.typeaheadState)},e}(oc);/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var _3=function(i){jl(e,i);function e(t){var o=i.call(this,fs(fs({},e.defaultAdapter),t))||this;return o.isSurfaceOpen=!1,o.isQuickOpen=!1,o.isHoistedElement=!1,o.isFixedPosition=!1,o.isHorizontallyCenteredOnViewport=!1,o.maxHeight=0,o.openAnimationEndTimerId=0,o.closeAnimationEndTimerId=0,o.animationRequestId=0,o.anchorCorner=Xf.TOP_START,o.originCorner=Xf.TOP_START,o.anchorMargin={top:0,right:0,bottom:0,left:0},o.position={x:0,y:0},o}return Object.defineProperty(e,"cssClasses",{get:function(){return J7},enumerable:!1,configurable:!0}),Object.defineProperty(e,"strings",{get:function(){return Q7},enumerable:!1,configurable:!0}),Object.defineProperty(e,"numbers",{get:function(){return Cd},enumerable:!1,configurable:!0}),Object.defineProperty(e,"Corner",{get:function(){return Xf},enumerable:!1,configurable:!0}),Object.defineProperty(e,"defaultAdapter",{get:function(){return{addClass:function(){},removeClass:function(){},hasClass:function(){return!1},hasAnchor:function(){return!1},isElementInContainer:function(){return!1},isFocused:function(){return!1},isRtl:function(){return!1},getInnerDimensions:function(){return{height:0,width:0}},getAnchorDimensions:function(){return null},getWindowDimensions:function(){return{height:0,width:0}},getBodyDimensions:function(){return{height:0,width:0}},getWindowScroll:function(){return{x:0,y:0}},setPosition:function(){},setMaxHeight:function(){},setTransformOrigin:function(){},saveFocus:function(){},restoreFocus:function(){},notifyClose:function(){},notifyOpen:function(){},notifyClosing:function(){}}},enumerable:!1,configurable:!0}),e.prototype.init=function(){var t=e.cssClasses,o=t.ROOT,l=t.OPEN;if(!this.adapter.hasClass(o))throw new Error(o+" class required in root element.");this.adapter.hasClass(l)&&(this.isSurfaceOpen=!0)},e.prototype.destroy=function(){clearTimeout(this.openAnimationEndTimerId),clearTimeout(this.closeAnimationEndTimerId),cancelAnimationFrame(this.animationRequestId)},e.prototype.setAnchorCorner=function(t){this.anchorCorner=t},e.prototype.flipCornerHorizontally=function(){this.originCorner=this.originCorner^$s.RIGHT},e.prototype.setAnchorMargin=function(t){this.anchorMargin.top=t.top||0,this.anchorMargin.right=t.right||0,this.anchorMargin.bottom=t.bottom||0,this.anchorMargin.left=t.left||0},e.prototype.setIsHoisted=function(t){this.isHoistedElement=t},e.prototype.setFixedPosition=function(t){this.isFixedPosition=t},e.prototype.isFixed=function(){return this.isFixedPosition},e.prototype.setAbsolutePosition=function(t,o){this.position.x=this.isFinite(t)?t:0,this.position.y=this.isFinite(o)?o:0},e.prototype.setIsHorizontallyCenteredOnViewport=function(t){this.isHorizontallyCenteredOnViewport=t},e.prototype.setQuickOpen=function(t){this.isQuickOpen=t},e.prototype.setMaxHeight=function(t){this.maxHeight=t},e.prototype.isOpen=function(){return this.isSurfaceOpen},e.prototype.open=function(){var t=this;this.isSurfaceOpen||(this.adapter.saveFocus(),this.isQuickOpen?(this.isSurfaceOpen=!0,this.adapter.addClass(e.cssClasses.OPEN),this.dimensions=this.adapter.getInnerDimensions(),this.autoposition(),this.adapter.notifyOpen()):(this.adapter.addClass(e.cssClasses.ANIMATING_OPEN),this.animationRequestId=requestAnimationFrame(function(){t.dimensions=t.adapter.getInnerDimensions(),t.autoposition(),t.adapter.addClass(e.cssClasses.OPEN),t.openAnimationEndTimerId=setTimeout(function(){t.openAnimationEndTimerId=0,t.adapter.removeClass(e.cssClasses.ANIMATING_OPEN),t.adapter.notifyOpen()},Cd.TRANSITION_OPEN_DURATION)}),this.isSurfaceOpen=!0))},e.prototype.close=function(t){var o=this;if(t===void 0&&(t=!1),!!this.isSurfaceOpen){if(this.adapter.notifyClosing(),this.isQuickOpen){this.isSurfaceOpen=!1,t||this.maybeRestoreFocus(),this.adapter.removeClass(e.cssClasses.OPEN),this.adapter.removeClass(e.cssClasses.IS_OPEN_BELOW),this.adapter.notifyClose();return}this.adapter.addClass(e.cssClasses.ANIMATING_CLOSED),requestAnimationFrame(function(){o.adapter.removeClass(e.cssClasses.OPEN),o.adapter.removeClass(e.cssClasses.IS_OPEN_BELOW),o.closeAnimationEndTimerId=setTimeout(function(){o.closeAnimationEndTimerId=0,o.adapter.removeClass(e.cssClasses.ANIMATING_CLOSED),o.adapter.notifyClose()},Cd.TRANSITION_CLOSE_DURATION)}),this.isSurfaceOpen=!1,t||this.maybeRestoreFocus()}},e.prototype.handleBodyClick=function(t){var o=t.target;this.adapter.isElementInContainer(o)||this.close()},e.prototype.handleKeydown=function(t){var o=t.keyCode,l=t.key,u=l==="Escape"||o===27;u&&this.close()},e.prototype.autoposition=function(){var t;this.measurements=this.getAutoLayoutmeasurements();var o=this.getoriginCorner(),l=this.getMenuSurfaceMaxHeight(o),u=this.hasBit(o,$s.BOTTOM)?"bottom":"top",m=this.hasBit(o,$s.RIGHT)?"right":"left",r=this.getHorizontalOriginOffset(o),f=this.getVerticalOriginOffset(o),_=this.measurements,b=_.anchorSize,v=_.surfaceSize,w=(t={},t[m]=r,t[u]=f,t);b.width/v.width>Cd.ANCHOR_TO_MENU_SURFACE_WIDTH_RATIO&&(m="center"),(this.isHoistedElement||this.isFixedPosition)&&this.adjustPositionForHoistedElement(w),this.adapter.setTransformOrigin(m+" "+u),this.adapter.setPosition(w),this.adapter.setMaxHeight(l?l+"px":""),this.hasBit(o,$s.BOTTOM)||this.adapter.addClass(e.cssClasses.IS_OPEN_BELOW)},e.prototype.getAutoLayoutmeasurements=function(){var t=this.adapter.getAnchorDimensions(),o=this.adapter.getBodyDimensions(),l=this.adapter.getWindowDimensions(),u=this.adapter.getWindowScroll();return t||(t={top:this.position.y,right:this.position.x,bottom:this.position.y,left:this.position.x,width:0,height:0}),{anchorSize:t,bodySize:o,surfaceSize:this.dimensions,viewportDistance:{top:t.top,right:l.width-t.right,bottom:l.height-t.bottom,left:t.left},viewportSize:l,windowScroll:u}},e.prototype.getoriginCorner=function(){var t=this.originCorner,o=this.measurements,l=o.viewportDistance,u=o.anchorSize,m=o.surfaceSize,r=e.numbers.MARGIN_TO_EDGE,f=this.hasBit(this.anchorCorner,$s.BOTTOM),_,b;f?(_=l.top-r+this.anchorMargin.bottom,b=l.bottom-r-this.anchorMargin.bottom):(_=l.top-r+this.anchorMargin.top,b=l.bottom-r+u.height-this.anchorMargin.top);var v=b-m.height>0;!v&&_>b&&(t=this.setBit(t,$s.BOTTOM));var w=this.adapter.isRtl(),x=this.hasBit(this.anchorCorner,$s.FLIP_RTL),C=this.hasBit(this.anchorCorner,$s.RIGHT)||this.hasBit(t,$s.RIGHT),T=!1;w&&x?T=!C:T=C;var S,M;T?(S=l.left+u.width+this.anchorMargin.right,M=l.right-this.anchorMargin.right):(S=l.left+this.anchorMargin.left,M=l.right+u.width-this.anchorMargin.left);var O=S-m.width>0,V=M-m.width>0,X=this.hasBit(t,$s.FLIP_RTL)&&this.hasBit(t,$s.RIGHT);return V&&X&&w||!O&&X?t=this.unsetBit(t,$s.RIGHT):(O&&T&&w||O&&!T&&C||!V&&S>=M)&&(t=this.setBit(t,$s.RIGHT)),t},e.prototype.getMenuSurfaceMaxHeight=function(t){if(this.maxHeight>0)return this.maxHeight;var o=this.measurements.viewportDistance,l=0,u=this.hasBit(t,$s.BOTTOM),m=this.hasBit(this.anchorCorner,$s.BOTTOM),r=e.numbers.MARGIN_TO_EDGE;return u?(l=o.top+this.anchorMargin.top-r,m||(l+=this.measurements.anchorSize.height)):(l=o.bottom-this.anchorMargin.bottom+this.measurements.anchorSize.height-r,m&&(l-=this.measurements.anchorSize.height)),l},e.prototype.getHorizontalOriginOffset=function(t){var o=this.measurements.anchorSize,l=this.hasBit(t,$s.RIGHT),u=this.hasBit(this.anchorCorner,$s.RIGHT);if(l){var m=u?o.width-this.anchorMargin.left:this.anchorMargin.right;return this.isHoistedElement||this.isFixedPosition?m-(this.measurements.viewportSize.width-this.measurements.bodySize.width):m}return u?o.width-this.anchorMargin.right:this.anchorMargin.left},e.prototype.getVerticalOriginOffset=function(t){var o=this.measurements.anchorSize,l=this.hasBit(t,$s.BOTTOM),u=this.hasBit(this.anchorCorner,$s.BOTTOM),m=0;return l?m=u?o.height-this.anchorMargin.top:-this.anchorMargin.bottom:m=u?o.height+this.anchorMargin.bottom:this.anchorMargin.top,m},e.prototype.adjustPositionForHoistedElement=function(t){var o,l,u=this.measurements,m=u.windowScroll,r=u.viewportDistance,f=u.surfaceSize,_=u.viewportSize,b=Object.keys(t);try{for(var v=Ih(b),w=v.next();!w.done;w=v.next()){var x=w.value,C=t[x]||0;if(this.isHorizontallyCenteredOnViewport&&(x==="left"||x==="right")){t[x]=(_.width-f.width)/2;continue}C+=r[x],this.isFixedPosition||(x==="top"?C+=m.y:x==="bottom"?C-=m.y:x==="left"?C+=m.x:C-=m.x),t[x]=C}}catch(T){o={error:T}}finally{try{w&&!w.done&&(l=v.return)&&l.call(v)}finally{if(o)throw o.error}}},e.prototype.maybeRestoreFocus=function(){var t=this,o=this.adapter.isFocused(),l=document.activeElement&&this.adapter.isElementInContainer(document.activeElement);(o||l)&&setTimeout(function(){t.adapter.restoreFocus()},Cd.TOUCH_EVENT_WAIT_MS)},e.prototype.hasBit=function(t,o){return Boolean(t&o)},e.prototype.setBit=function(t,o){return t|o},e.prototype.unsetBit=function(t,o){return t^o},e.prototype.isFinite=function(t){return typeof t=="number"&&isFinite(t)},e}(oc);/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var Q0={MENU_SELECTED_LIST_ITEM:"mdc-menu-item--selected",MENU_SELECTION_GROUP:"mdc-menu__selection-group",ROOT:"mdc-menu"},T0={ARIA_CHECKED_ATTR:"aria-checked",ARIA_DISABLED_ATTR:"aria-disabled",CHECKBOX_SELECTOR:'input[type="checkbox"]',LIST_SELECTOR:".mdc-list,.mdc-deprecated-list",SELECTED_EVENT:"MDCMenu:selected",SKIP_RESTORE_FOCUS:"data-menu-item-skip-restore-focus"},sL={FOCUS_ROOT_INDEX:-1},N0;(function(i){i[i.NONE=0]="NONE",i[i.LIST_ROOT=1]="LIST_ROOT",i[i.FIRST_ITEM=2]="FIRST_ITEM",i[i.LAST_ITEM=3]="LAST_ITEM"})(N0||(N0={}));/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var aL=function(i){jl(e,i);function e(t){var o=i.call(this,fs(fs({},e.defaultAdapter),t))||this;return o.closeAnimationEndTimerId=0,o.defaultFocusState=N0.LIST_ROOT,o.selectedIndex=-1,o}return Object.defineProperty(e,"cssClasses",{get:function(){return Q0},enumerable:!1,configurable:!0}),Object.defineProperty(e,"strings",{get:function(){return T0},enumerable:!1,configurable:!0}),Object.defineProperty(e,"numbers",{get:function(){return sL},enumerable:!1,configurable:!0}),Object.defineProperty(e,"defaultAdapter",{get:function(){return{addClassToElementAtIndex:function(){},removeClassFromElementAtIndex:function(){},addAttributeToElementAtIndex:function(){},removeAttributeFromElementAtIndex:function(){},getAttributeFromElementAtIndex:function(){return null},elementContainsClass:function(){return!1},closeSurface:function(){},getElementIndex:function(){return-1},notifySelected:function(){},getMenuItemCount:function(){return 0},focusItemAtIndex:function(){},focusListRoot:function(){},getSelectedSiblingOfItemAtIndex:function(){return-1},isSelectableItemAtIndex:function(){return!1}}},enumerable:!1,configurable:!0}),e.prototype.destroy=function(){this.closeAnimationEndTimerId&&clearTimeout(this.closeAnimationEndTimerId),this.adapter.closeSurface()},e.prototype.handleKeydown=function(t){var o=t.key,l=t.keyCode,u=o==="Tab"||l===9;u&&this.adapter.closeSurface(!0)},e.prototype.handleItemAction=function(t){var o=this,l=this.adapter.getElementIndex(t);if(!(l<0)){this.adapter.notifySelected({index:l});var u=this.adapter.getAttributeFromElementAtIndex(l,T0.SKIP_RESTORE_FOCUS)==="true";this.adapter.closeSurface(u),this.closeAnimationEndTimerId=setTimeout(function(){var m=o.adapter.getElementIndex(t);m>=0&&o.adapter.isSelectableItemAtIndex(m)&&o.setSelectedIndex(m)},_3.numbers.TRANSITION_CLOSE_DURATION)}},e.prototype.handleMenuSurfaceOpened=function(){switch(this.defaultFocusState){case N0.FIRST_ITEM:this.adapter.focusItemAtIndex(0);break;case N0.LAST_ITEM:this.adapter.focusItemAtIndex(this.adapter.getMenuItemCount()-1);break;case N0.NONE:break;default:this.adapter.focusListRoot();break}},e.prototype.setDefaultFocusState=function(t){this.defaultFocusState=t},e.prototype.getSelectedIndex=function(){return this.selectedIndex},e.prototype.setSelectedIndex=function(t){if(this.validatedIndex(t),!this.adapter.isSelectableItemAtIndex(t))throw new Error("MDCMenuFoundation: No selection group at specified index.");var o=this.adapter.getSelectedSiblingOfItemAtIndex(t);o>=0&&(this.adapter.removeAttributeFromElementAtIndex(o,T0.ARIA_CHECKED_ATTR),this.adapter.removeClassFromElementAtIndex(o,Q0.MENU_SELECTED_LIST_ITEM)),this.adapter.addClassToElementAtIndex(t,Q0.MENU_SELECTED_LIST_ITEM),this.adapter.addAttributeToElementAtIndex(t,T0.ARIA_CHECKED_ATTR,"true"),this.selectedIndex=t},e.prototype.setEnabled=function(t,o){this.validatedIndex(t),o?(this.adapter.removeClassFromElementAtIndex(t,lo.LIST_ITEM_DISABLED_CLASS),this.adapter.addAttributeToElementAtIndex(t,T0.ARIA_DISABLED_ATTR,"false")):(this.adapter.addClassToElementAtIndex(t,lo.LIST_ITEM_DISABLED_CLASS),this.adapter.addAttributeToElementAtIndex(t,T0.ARIA_DISABLED_ATTR,"true"))},e.prototype.validatedIndex=function(t){var o=this.adapter.getMenuItemCount(),l=t>=0&&t<o;if(!l)throw new Error("MDCMenuFoundation: No list item at specified index.")},e}(oc);/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var lL={NOTCH_ELEMENT_SELECTOR:".mdc-notched-outline__notch"},bb={NOTCH_ELEMENT_PADDING:8},uL={NO_LABEL:"mdc-notched-outline--no-label",OUTLINE_NOTCHED:"mdc-notched-outline--notched",OUTLINE_UPGRADED:"mdc-notched-outline--upgraded"};/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var cL=function(i){jl(e,i);function e(t){return i.call(this,fs(fs({},e.defaultAdapter),t))||this}return Object.defineProperty(e,"strings",{get:function(){return lL},enumerable:!1,configurable:!0}),Object.defineProperty(e,"cssClasses",{get:function(){return uL},enumerable:!1,configurable:!0}),Object.defineProperty(e,"numbers",{get:function(){return bb},enumerable:!1,configurable:!0}),Object.defineProperty(e,"defaultAdapter",{get:function(){return{addClass:function(){},removeClass:function(){},setNotchWidthProperty:function(){},removeNotchWidthProperty:function(){}}},enumerable:!1,configurable:!0}),e.prototype.notch=function(t){var o=e.cssClasses.OUTLINE_NOTCHED;t>0&&(t+=bb.NOTCH_ELEMENT_PADDING),this.adapter.setNotchWidthProperty(t),this.adapter.addClass(o)},e.prototype.closeNotch=function(){var t=e.cssClasses.OUTLINE_NOTCHED;this.adapter.removeClass(t),this.adapter.removeNotchWidthProperty()},e}(oc);/**
 * @license
 * Copyright 2016 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var Us={ACTIVATED:"mdc-select--activated",DISABLED:"mdc-select--disabled",FOCUSED:"mdc-select--focused",INVALID:"mdc-select--invalid",MENU_INVALID:"mdc-select__menu--invalid",OUTLINED:"mdc-select--outlined",REQUIRED:"mdc-select--required",ROOT:"mdc-select",WITH_LEADING_ICON:"mdc-select--with-leading-icon"},k2={ARIA_CONTROLS:"aria-controls",ARIA_DESCRIBEDBY:"aria-describedby",ARIA_SELECTED_ATTR:"aria-selected",CHANGE_EVENT:"MDCSelect:change",HIDDEN_INPUT_SELECTOR:'input[type="hidden"]',LABEL_SELECTOR:".mdc-floating-label",LEADING_ICON_SELECTOR:".mdc-select__icon",LINE_RIPPLE_SELECTOR:".mdc-line-ripple",MENU_SELECTOR:".mdc-select__menu",OUTLINE_SELECTOR:".mdc-notched-outline",SELECTED_TEXT_SELECTOR:".mdc-select__selected-text",SELECT_ANCHOR_SELECTOR:".mdc-select__anchor",VALUE_ATTR:"data-value"},Rf={LABEL_SCALE:.75,UNSET_INDEX:-1,CLICK_DEBOUNCE_TIMEOUT_MS:330};/**
 * @license
 * Copyright 2016 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var hL=function(i){jl(e,i);function e(t,o){o===void 0&&(o={});var l=i.call(this,fs(fs({},e.defaultAdapter),t))||this;return l.disabled=!1,l.isMenuOpen=!1,l.useDefaultValidation=!0,l.customValidity=!0,l.lastSelectedIndex=Rf.UNSET_INDEX,l.clickDebounceTimeout=0,l.recentlyClicked=!1,l.leadingIcon=o.leadingIcon,l.helperText=o.helperText,l}return Object.defineProperty(e,"cssClasses",{get:function(){return Us},enumerable:!1,configurable:!0}),Object.defineProperty(e,"numbers",{get:function(){return Rf},enumerable:!1,configurable:!0}),Object.defineProperty(e,"strings",{get:function(){return k2},enumerable:!1,configurable:!0}),Object.defineProperty(e,"defaultAdapter",{get:function(){return{addClass:function(){},removeClass:function(){},hasClass:function(){return!1},activateBottomLine:function(){},deactivateBottomLine:function(){},getSelectedIndex:function(){return-1},setSelectedIndex:function(){},hasLabel:function(){return!1},floatLabel:function(){},getLabelWidth:function(){return 0},setLabelRequired:function(){},hasOutline:function(){return!1},notchOutline:function(){},closeOutline:function(){},setRippleCenter:function(){},notifyChange:function(){},setSelectedText:function(){},isSelectAnchorFocused:function(){return!1},getSelectAnchorAttr:function(){return""},setSelectAnchorAttr:function(){},removeSelectAnchorAttr:function(){},addMenuClass:function(){},removeMenuClass:function(){},openMenu:function(){},closeMenu:function(){},getAnchorElement:function(){return null},setMenuAnchorElement:function(){},setMenuAnchorCorner:function(){},setMenuWrapFocus:function(){},focusMenuItemAtIndex:function(){},getMenuItemCount:function(){return 0},getMenuItemValues:function(){return[]},getMenuItemTextAtIndex:function(){return""},isTypeaheadInProgress:function(){return!1},typeaheadMatchItem:function(){return-1}}},enumerable:!1,configurable:!0}),e.prototype.getSelectedIndex=function(){return this.adapter.getSelectedIndex()},e.prototype.setSelectedIndex=function(t,o,l){o===void 0&&(o=!1),l===void 0&&(l=!1),!(t>=this.adapter.getMenuItemCount())&&(t===Rf.UNSET_INDEX?this.adapter.setSelectedText(""):this.adapter.setSelectedText(this.adapter.getMenuItemTextAtIndex(t).trim()),this.adapter.setSelectedIndex(t),o&&this.adapter.closeMenu(),!l&&this.lastSelectedIndex!==t&&this.handleChange(),this.lastSelectedIndex=t)},e.prototype.setValue=function(t,o){o===void 0&&(o=!1);var l=this.adapter.getMenuItemValues().indexOf(t);this.setSelectedIndex(l,!1,o)},e.prototype.getValue=function(){var t=this.adapter.getSelectedIndex(),o=this.adapter.getMenuItemValues();return t!==Rf.UNSET_INDEX?o[t]:""},e.prototype.getDisabled=function(){return this.disabled},e.prototype.setDisabled=function(t){this.disabled=t,this.disabled?(this.adapter.addClass(Us.DISABLED),this.adapter.closeMenu()):this.adapter.removeClass(Us.DISABLED),this.leadingIcon&&this.leadingIcon.setDisabled(this.disabled),this.disabled?this.adapter.removeSelectAnchorAttr("tabindex"):this.adapter.setSelectAnchorAttr("tabindex","0"),this.adapter.setSelectAnchorAttr("aria-disabled",this.disabled.toString())},e.prototype.openMenu=function(){this.adapter.addClass(Us.ACTIVATED),this.adapter.openMenu(),this.isMenuOpen=!0,this.adapter.setSelectAnchorAttr("aria-expanded","true")},e.prototype.setHelperTextContent=function(t){this.helperText&&this.helperText.setContent(t)},e.prototype.layout=function(){if(this.adapter.hasLabel()){var t=this.getValue().length>0,o=this.adapter.hasClass(Us.FOCUSED),l=t||o,u=this.adapter.hasClass(Us.REQUIRED);this.notchOutline(l),this.adapter.floatLabel(l),this.adapter.setLabelRequired(u)}},e.prototype.layoutOptions=function(){var t=this.adapter.getMenuItemValues(),o=t.indexOf(this.getValue());this.setSelectedIndex(o,!1,!0)},e.prototype.handleMenuOpened=function(){if(this.adapter.getMenuItemValues().length!==0){var t=this.getSelectedIndex(),o=t>=0?t:0;this.adapter.focusMenuItemAtIndex(o)}},e.prototype.handleMenuClosing=function(){this.adapter.setSelectAnchorAttr("aria-expanded","false")},e.prototype.handleMenuClosed=function(){this.adapter.removeClass(Us.ACTIVATED),this.isMenuOpen=!1,this.adapter.isSelectAnchorFocused()||this.blur()},e.prototype.handleChange=function(){this.layout(),this.adapter.notifyChange(this.getValue());var t=this.adapter.hasClass(Us.REQUIRED);t&&this.useDefaultValidation&&this.setValid(this.isValid())},e.prototype.handleMenuItemAction=function(t){this.setSelectedIndex(t,!0)},e.prototype.handleFocus=function(){this.adapter.addClass(Us.FOCUSED),this.layout(),this.adapter.activateBottomLine()},e.prototype.handleBlur=function(){this.isMenuOpen||this.blur()},e.prototype.handleClick=function(t){if(!(this.disabled||this.recentlyClicked)){if(this.setClickDebounceTimeout(),this.isMenuOpen){this.adapter.closeMenu();return}this.adapter.setRippleCenter(t),this.openMenu()}},e.prototype.handleKeydown=function(t){if(!(this.isMenuOpen||!this.adapter.hasClass(Us.FOCUSED))){var o=ca(t)===uo.ENTER,l=ca(t)===uo.SPACEBAR,u=ca(t)===uo.ARROW_UP,m=ca(t)===uo.ARROW_DOWN,r=t.ctrlKey||t.metaKey;if(!r&&(!l&&t.key&&t.key.length===1||l&&this.adapter.isTypeaheadInProgress())){var f=l?" ":t.key,_=this.adapter.typeaheadMatchItem(f,this.getSelectedIndex());_>=0&&this.setSelectedIndex(_),t.preventDefault();return}!o&&!l&&!u&&!m||(u&&this.getSelectedIndex()>0?this.setSelectedIndex(this.getSelectedIndex()-1):m&&this.getSelectedIndex()<this.adapter.getMenuItemCount()-1&&this.setSelectedIndex(this.getSelectedIndex()+1),this.openMenu(),t.preventDefault())}},e.prototype.notchOutline=function(t){if(!!this.adapter.hasOutline()){var o=this.adapter.hasClass(Us.FOCUSED);if(t){var l=Rf.LABEL_SCALE,u=this.adapter.getLabelWidth()*l;this.adapter.notchOutline(u)}else o||this.adapter.closeOutline()}},e.prototype.setLeadingIconAriaLabel=function(t){this.leadingIcon&&this.leadingIcon.setAriaLabel(t)},e.prototype.setLeadingIconContent=function(t){this.leadingIcon&&this.leadingIcon.setContent(t)},e.prototype.getUseDefaultValidation=function(){return this.useDefaultValidation},e.prototype.setUseDefaultValidation=function(t){this.useDefaultValidation=t},e.prototype.setValid=function(t){this.useDefaultValidation||(this.customValidity=t),this.adapter.setSelectAnchorAttr("aria-invalid",(!t).toString()),t?(this.adapter.removeClass(Us.INVALID),this.adapter.removeMenuClass(Us.MENU_INVALID)):(this.adapter.addClass(Us.INVALID),this.adapter.addMenuClass(Us.MENU_INVALID)),this.syncHelperTextValidity(t)},e.prototype.isValid=function(){return this.useDefaultValidation&&this.adapter.hasClass(Us.REQUIRED)&&!this.adapter.hasClass(Us.DISABLED)?this.getSelectedIndex()!==Rf.UNSET_INDEX&&(this.getSelectedIndex()!==0||Boolean(this.getValue())):this.customValidity},e.prototype.setRequired=function(t){t?this.adapter.addClass(Us.REQUIRED):this.adapter.removeClass(Us.REQUIRED),this.adapter.setSelectAnchorAttr("aria-required",t.toString()),this.adapter.setLabelRequired(t)},e.prototype.getRequired=function(){return this.adapter.getSelectAnchorAttr("aria-required")==="true"},e.prototype.init=function(){var t=this.adapter.getAnchorElement();t&&(this.adapter.setMenuAnchorElement(t),this.adapter.setMenuAnchorCorner(Xf.BOTTOM_START)),this.adapter.setMenuWrapFocus(!1),this.setDisabled(this.adapter.hasClass(Us.DISABLED)),this.syncHelperTextValidity(!this.adapter.hasClass(Us.INVALID)),this.layout(),this.layoutOptions()},e.prototype.blur=function(){this.adapter.removeClass(Us.FOCUSED),this.layout(),this.adapter.deactivateBottomLine();var t=this.adapter.hasClass(Us.REQUIRED);t&&this.useDefaultValidation&&this.setValid(this.isValid())},e.prototype.syncHelperTextValidity=function(t){if(!!this.helperText){this.helperText.setValidity(t);var o=this.helperText.isVisible(),l=this.helperText.getId();o&&l?this.adapter.setSelectAnchorAttr(k2.ARIA_DESCRIBEDBY,l):this.adapter.removeSelectAnchorAttr(k2.ARIA_DESCRIBEDBY)}},e.prototype.setClickDebounceTimeout=function(){var t=this;clearTimeout(this.clickDebounceTimeout),this.clickDebounceTimeout=setTimeout(function(){t.recentlyClicked=!1},Rf.CLICK_DEBOUNCE_TIMEOUT_MS),this.recentlyClicked=!0},e}(oc);/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var Bf={ARIA_HIDDEN:"aria-hidden",ROLE:"role"},zf={HELPER_TEXT_VALIDATION_MSG:"mdc-select-helper-text--validation-msg",HELPER_TEXT_VALIDATION_MSG_PERSISTENT:"mdc-select-helper-text--validation-msg-persistent"};/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var fL=function(i){jl(e,i);function e(t){return i.call(this,fs(fs({},e.defaultAdapter),t))||this}return Object.defineProperty(e,"cssClasses",{get:function(){return zf},enumerable:!1,configurable:!0}),Object.defineProperty(e,"strings",{get:function(){return Bf},enumerable:!1,configurable:!0}),Object.defineProperty(e,"defaultAdapter",{get:function(){return{addClass:function(){},removeClass:function(){},hasClass:function(){return!1},setAttr:function(){},getAttr:function(){return null},removeAttr:function(){},setContent:function(){}}},enumerable:!1,configurable:!0}),e.prototype.getId=function(){return this.adapter.getAttr("id")},e.prototype.isVisible=function(){return this.adapter.getAttr(Bf.ARIA_HIDDEN)!=="true"},e.prototype.setContent=function(t){this.adapter.setContent(t)},e.prototype.setValidation=function(t){t?this.adapter.addClass(zf.HELPER_TEXT_VALIDATION_MSG):this.adapter.removeClass(zf.HELPER_TEXT_VALIDATION_MSG)},e.prototype.setValidationMsgPersistent=function(t){t?this.adapter.addClass(zf.HELPER_TEXT_VALIDATION_MSG_PERSISTENT):this.adapter.removeClass(zf.HELPER_TEXT_VALIDATION_MSG_PERSISTENT)},e.prototype.setValidity=function(t){var o=this.adapter.hasClass(zf.HELPER_TEXT_VALIDATION_MSG);if(!!o){var l=this.adapter.hasClass(zf.HELPER_TEXT_VALIDATION_MSG_PERSISTENT),u=!t||l;if(u){this.showToScreenReader(),t?this.adapter.removeAttr(Bf.ROLE):this.adapter.setAttr(Bf.ROLE,"alert");return}this.adapter.removeAttr(Bf.ROLE),this.hide()}},e.prototype.showToScreenReader=function(){this.adapter.removeAttr(Bf.ARIA_HIDDEN)},e.prototype.hide=function(){this.adapter.setAttr(Bf.ARIA_HIDDEN,"true")},e}(oc);const{document:dL}=cg;function pL(i){let e,t,o,l,u,m,r,f;const _=i[31].default,b=ur(_,i,i[30],null);let v=[{class:o=sr({[i[2]]:!0,"mdc-menu-surface":!0,"mdc-menu-surface--fixed":i[5],"mdc-menu-surface--open":i[4],"smui-menu-surface--static":i[4],"mdc-menu-surface--fullwidth":i[7],...i[10]})},{style:l=Object.entries(i[11]).map(wb).concat([i[3]]).join(" ")},i[13]],w={};for(let x=0;x<v.length;x+=1)w=Yi(w,v[x]);return{c(){e=Wi(),t=Ht("div"),b&&b.c(),this.h()},l(x){e=Xi(x),t=Gt(x,"DIV",{class:!0,style:!0});var C=$t(t);b&&b.l(C),C.forEach(De),this.h()},h(){nr(t,w)},m(x,C){jt(x,e,C),jt(x,t,C),b&&b.m(t,null),i[33](t),m=!0,r||(f=[xn(dL.body,"click",i[32],!0),tr(u=To.call(null,t,i[1])),tr(i[12].call(null,t)),xn(t,"keydown",i[34])],r=!0)},p(x,C){b&&b.p&&(!m||C[0]&1073741824)&&cr(b,_,x,x[30],m?fr(_,x[30],C,null):hr(x[30]),null),nr(t,w=xr(v,[(!m||C[0]&1204&&o!==(o=sr({[x[2]]:!0,"mdc-menu-surface":!0,"mdc-menu-surface--fixed":x[5],"mdc-menu-surface--open":x[4],"smui-menu-surface--static":x[4],"mdc-menu-surface--fullwidth":x[7],...x[10]})))&&{class:o},(!m||C[0]&2056&&l!==(l=Object.entries(x[11]).map(wb).concat([x[3]]).join(" ")))&&{style:l},C[0]&8192&&x[13]])),u&&so(u.update)&&C[0]&2&&u.update.call(null,x[1])},i(x){m||(vt(b,x),m=!0)},o(x){Lt(b,x),m=!1},d(x){x&&De(e),x&&De(t),b&&b.d(x),i[33](null),r=!1,Lo(f)}}}const wb=([i,e])=>`${i}: ${e};`;function mL(i,e,t){const o=["use","class","style","static","anchor","fixed","open","managed","fullWidth","quickOpen","anchorElement","anchorCorner","anchorMargin","maxHeight","horizontallyCenteredOnViewport","isOpen","setOpen","setAbsolutePosition","setIsHoisted","isFixed","getElement"];let l=Yn(e,o),{$$slots:u={},$$scope:m}=e;var r,f,_;const b=_o(yo());let{use:v=[]}=e,{class:w=""}=e,{style:x=""}=e,{static:C=!1}=e,{anchor:T=!0}=e,{fixed:S=!1}=e,{open:M=C}=e,{managed:O=!1}=e,{fullWidth:V=!1}=e,{quickOpen:X=!1}=e,{anchorElement:Z=void 0}=e,{anchorCorner:te=void 0}=e,{anchorMargin:J={top:0,right:0,bottom:0,left:0}}=e,{maxHeight:ie=0}=e,{horizontallyCenteredOnViewport:Ee=!1}=e,Pe,de,Te={},ve={},_e;as("SMUI:list:role","menu"),as("SMUI:list:item:role","menuitem");const ot=Xf;ks(()=>(t(9,de=new _3({addClass:It,removeClass:Xe,hasClass:it,hasAnchor:()=>!!Z,notifyClose:()=>{O||t(0,M=C),M||Do(Pe,"SMUIMenuSurface:closed",void 0,void 0,!0)},notifyClosing:()=>{O||t(0,M=C),M||Do(Pe,"SMUIMenuSurface:closing",void 0,void 0,!0)},notifyOpen:()=>{O||t(0,M=!0),M&&Do(Pe,"SMUIMenuSurface:opened",void 0,void 0,!0)},isElementInContainer:gt=>Pe.contains(gt),isRtl:()=>getComputedStyle(Pe).getPropertyValue("direction")==="rtl",setTransformOrigin:gt=>{t(11,ve["transform-origin"]=gt,ve)},isFocused:()=>document.activeElement===Pe,saveFocus:()=>{var gt;_e=(gt=document.activeElement)!==null&&gt!==void 0?gt:void 0},restoreFocus:()=>{(!Pe||Pe.contains(document.activeElement))&&_e&&document.contains(_e)&&"focus"in _e&&_e.focus()},getInnerDimensions:()=>({width:Pe.offsetWidth,height:Pe.offsetHeight}),getAnchorDimensions:()=>Z?Z.getBoundingClientRect():null,getWindowDimensions:()=>({width:window.innerWidth,height:window.innerHeight}),getBodyDimensions:()=>({width:document.body.clientWidth,height:document.body.clientHeight}),getWindowScroll:()=>({x:window.pageXOffset,y:window.pageYOffset}),setPosition:gt=>{t(11,ve.left="left"in gt?`${gt.left}px`:"",ve),t(11,ve.right="right"in gt?`${gt.right}px`:"",ve),t(11,ve.top="top"in gt?`${gt.top}px`:"",ve),t(11,ve.bottom="bottom"in gt?`${gt.bottom}px`:"",ve)},setMaxHeight:gt=>{t(11,ve["max-height"]=gt,ve)}})),Do(Pe,"SMUIMenuSurface:mount",{get open(){return M},set open(gt){t(0,M=gt)},closeProgrammatic:we}),de.init(),()=>{var gt;const Mt=de.isHoistedElement;de.destroy(),Mt&&((gt=Pe.parentNode)===null||gt===void 0||gt.removeChild(Pe))})),nh(()=>{var Ye;T&&Pe&&((Ye=Pe.parentElement)===null||Ye===void 0||Ye.classList.remove("mdc-menu-surface--anchor"))});function it(Ye){return Ye in Te?Te[Ye]:me().classList.contains(Ye)}function It(Ye){Te[Ye]||t(10,Te[Ye]=!0,Te)}function Xe(Ye){(!(Ye in Te)||Te[Ye])&&t(10,Te[Ye]=!1,Te)}function we(Ye){de.close(Ye),t(0,M=!1)}function Ce(){return M}function Re(Ye){t(0,M=Ye)}function le(Ye,gt){return de.setAbsolutePosition(Ye,gt)}function Se(Ye){return de.setIsHoisted(Ye)}function he(){return de.isFixed()}function me(){return Pe}const Be=Ye=>de&&M&&!O&&de.handleBodyClick(Ye);function We(Ye){bn[Ye?"unshift":"push"](()=>{Pe=Ye,t(8,Pe)})}const st=Ye=>de&&de.handleKeydown(Ye);return i.$$set=Ye=>{e=Yi(Yi({},e),po(Ye)),t(13,l=Yn(e,o)),"use"in Ye&&t(1,v=Ye.use),"class"in Ye&&t(2,w=Ye.class),"style"in Ye&&t(3,x=Ye.style),"static"in Ye&&t(4,C=Ye.static),"anchor"in Ye&&t(15,T=Ye.anchor),"fixed"in Ye&&t(5,S=Ye.fixed),"open"in Ye&&t(0,M=Ye.open),"managed"in Ye&&t(6,O=Ye.managed),"fullWidth"in Ye&&t(7,V=Ye.fullWidth),"quickOpen"in Ye&&t(16,X=Ye.quickOpen),"anchorElement"in Ye&&t(14,Z=Ye.anchorElement),"anchorCorner"in Ye&&t(17,te=Ye.anchorCorner),"anchorMargin"in Ye&&t(18,J=Ye.anchorMargin),"maxHeight"in Ye&&t(19,ie=Ye.maxHeight),"horizontallyCenteredOnViewport"in Ye&&t(20,Ee=Ye.horizontallyCenteredOnViewport),"$$scope"in Ye&&t(30,m=Ye.$$scope)},i.$$.update=()=>{i.$$.dirty[0]&939557120&&Pe&&T&&!(!(t(27,r=Pe.parentElement)===null||r===void 0)&&r.classList.contains("mdc-menu-surface--anchor"))&&(t(28,f=Pe.parentElement)===null||f===void 0||f.classList.add("mdc-menu-surface--anchor"),t(14,Z=t(29,_=Pe.parentElement)!==null&&_!==void 0?_:void 0)),i.$$.dirty[0]&513&&de&&de.isOpen()!==M&&(M?de.open():de.close()),i.$$.dirty[0]&66048&&de&&de.setQuickOpen(X),i.$$.dirty[0]&544&&de&&de.setFixedPosition(S),i.$$.dirty[0]&524800&&de&&de.setMaxHeight(ie),i.$$.dirty[0]&1049088&&de&&de.setIsHorizontallyCenteredOnViewport(Ee),i.$$.dirty[0]&131584&&de&&te!=null&&(typeof te=="string"?de.setAnchorCorner(ot[te]):de.setAnchorCorner(te)),i.$$.dirty[0]&262656&&de&&de.setAnchorMargin(J)},[M,v,w,x,C,S,O,V,Pe,de,Te,ve,b,l,Z,T,X,te,J,ie,Ee,Ce,Re,le,Se,he,me,r,f,_,m,u,Be,We,st]}class gL extends br{constructor(e){super(),wr(this,e,mL,pL,mr,{use:1,class:2,style:3,static:4,anchor:15,fixed:5,open:0,managed:6,fullWidth:7,quickOpen:16,anchorElement:14,anchorCorner:17,anchorMargin:18,maxHeight:19,horizontallyCenteredOnViewport:20,isOpen:21,setOpen:22,setAbsolutePosition:23,setIsHoisted:24,isFixed:25,getElement:26},null,[-1,-1])}get isOpen(){return this.$$.ctx[21]}get setOpen(){return this.$$.ctx[22]}get setAbsolutePosition(){return this.$$.ctx[23]}get setIsHoisted(){return this.$$.ctx[24]}get isFixed(){return this.$$.ctx[25]}get getElement(){return this.$$.ctx[26]}}function yL(i,{addClass:e=o=>i.classList.add(o),removeClass:t=o=>i.classList.remove(o)}={}){return e("mdc-menu-surface--anchor"),{destroy(){t("mdc-menu-surface--anchor")}}}function _L(i){let e;const t=i[17].default,o=ur(t,i,i[22],null);return{c(){o&&o.c()},l(l){o&&o.l(l)},m(l,u){o&&o.m(l,u),e=!0},p(l,u){o&&o.p&&(!e||u&4194304)&&cr(o,t,l,l[22],e?fr(t,l[22],u,null):hr(l[22]),null)},i(l){e||(vt(o,l),e=!0)},o(l){Lt(o,l),e=!1},d(l){o&&o.d(l)}}}function vL(i){let e,t,o;const l=[{use:i[5]},{class:sr({[i[1]]:!0,"mdc-menu":!0})},i[9]];function u(r){i[19](r)}let m={$$slots:{default:[_L]},$$scope:{ctx:i}};for(let r=0;r<l.length;r+=1)m=Yi(m,l[r]);return i[0]!==void 0&&(m.open=i[0]),e=new gL({props:m}),i[18](e),bn.push(()=>Uo(e,"open",u)),e.$on("SMUIMenuSurface:mount",i[7]),e.$on("SMUIList:mount",i[8]),e.$on("SMUIMenuSurface:opened",i[20]),e.$on("keydown",i[6]),e.$on("SMUIList:action",i[21]),{c(){en(e.$$.fragment)},l(r){un(e.$$.fragment,r)},m(r,f){tn(e,r,f),o=!0},p(r,[f]){const _=f&546?xr(l,[f&32&&{use:r[5]},f&2&&{class:sr({[r[1]]:!0,"mdc-menu":!0})},f&512&&Eo(r[9])]):{};f&4194304&&(_.$$scope={dirty:f,ctx:r}),!t&&f&1&&(t=!0,_.open=r[0],Vo(()=>t=!1)),e.$set(_)},i(r){o||(vt(e.$$.fragment,r),o=!0)},o(r){Lt(e.$$.fragment,r),o=!1},d(r){i[18](null),nn(e,r)}}}function bL(i,e,t){let o;const l=["use","class","open","isOpen","setOpen","setDefaultFocusState","getSelectedIndex","getMenuSurface","getElement"];let u=Yn(e,l),{$$slots:m={},$$scope:r}=e;const{closest:f}=E1,_=_o(yo());let{use:b=[]}=e,{class:v=""}=e,{open:w=!1}=e,x,C,T,S;ks(()=>(t(3,C=new aL({addClassToElementAtIndex:(_e,ot)=>{S.addClassForElementIndex(_e,ot)},removeClassFromElementAtIndex:(_e,ot)=>{S.removeClassForElementIndex(_e,ot)},addAttributeToElementAtIndex:(_e,ot,it)=>{S.setAttributeForElementIndex(_e,ot,it)},removeAttributeFromElementAtIndex:(_e,ot)=>{S.removeAttributeForElementIndex(_e,ot)},getAttributeFromElementAtIndex:(_e,ot)=>S.getAttributeFromElementIndex(_e,ot),elementContainsClass:(_e,ot)=>_e.classList.contains(ot),closeSurface:_e=>T.closeProgrammatic(_e),getElementIndex:_e=>S.getOrderedList().map(ot=>ot.element).indexOf(_e),notifySelected:_e=>Do(Ee(),"SMUIMenu:selected",{index:_e.index,item:S.getOrderedList()[_e.index].element},void 0,!0),getMenuItemCount:()=>S.items.length,focusItemAtIndex:_e=>S.focusItemAtIndex(_e),focusListRoot:()=>"focus"in S.element&&S.element.focus(),isSelectableItemAtIndex:_e=>!!f(S.getOrderedList()[_e].element,`.${Q0.MENU_SELECTION_GROUP}`),getSelectedSiblingOfItemAtIndex:_e=>{const ot=S.getOrderedList(),it=f(ot[_e].element,`.${Q0.MENU_SELECTION_GROUP}`),It=it==null?void 0:it.querySelector(`.${Q0.MENU_SELECTED_LIST_ITEM}`);return It?ot.map(Xe=>Xe.element).indexOf(It):-1}})),Do(Ee(),"SMUIMenu:mount",C),C.init(),()=>{C.destroy()}));function M(_e){C&&C.handleKeydown(_e)}function O(_e){T||(T=_e.detail)}function V(_e){S||t(4,S=_e.detail)}function X(){return w}function Z(_e){t(0,w=_e)}function te(_e){C.setDefaultFocusState(_e)}function J(){return C.getSelectedIndex()}function ie(){return x}function Ee(){return x.getElement()}function Pe(_e){bn[_e?"unshift":"push"](()=>{x=_e,t(2,x)})}function de(_e){w=_e,t(0,w)}const Te=()=>C&&C.handleMenuSurfaceOpened(),ve=_e=>C&&C.handleItemAction(S.getOrderedList()[_e.detail.index].element);return i.$$set=_e=>{e=Yi(Yi({},e),po(_e)),t(9,u=Yn(e,l)),"use"in _e&&t(10,b=_e.use),"class"in _e&&t(1,v=_e.class),"open"in _e&&t(0,w=_e.open),"$$scope"in _e&&t(22,r=_e.$$scope)},i.$$.update=()=>{i.$$.dirty&1024&&t(5,o=[_,...b])},[w,v,x,C,S,o,M,O,V,u,b,X,Z,te,J,ie,Ee,m,Pe,de,Te,ve,r]}class wL extends br{constructor(e){super(),wr(this,e,bL,vL,mr,{use:10,class:1,open:0,isOpen:11,setOpen:12,setDefaultFocusState:13,getSelectedIndex:14,getMenuSurface:15,getElement:16})}get isOpen(){return this.$$.ctx[11]}get setOpen(){return this.$$.ctx[12]}get setDefaultFocusState(){return this.$$.ctx[13]}get getSelectedIndex(){return this.$$.ctx[14]}get getMenuSurface(){return this.$$.ctx[15]}get getElement(){return this.$$.ctx[16]}}function xL(i){let e;const t=i[37].default,o=ur(t,i,i[43],null);return{c(){o&&o.c()},l(l){o&&o.l(l)},m(l,u){o&&o.m(l,u),e=!0},p(l,u){o&&o.p&&(!e||u[1]&4096)&&cr(o,t,l,l[43],e?fr(t,l[43],u,null):hr(l[43]),null)},i(l){e||(vt(o,l),e=!0)},o(l){Lt(o,l),e=!1},d(l){o&&o.d(l)}}}function AL(i){let e,t,o;const l=[{use:[i[17],...i[0]]},{class:sr({[i[1]]:!0,"mdc-deprecated-list":!0,"mdc-deprecated-list--non-interactive":i[2],"mdc-deprecated-list--dense":i[3],"mdc-deprecated-list--textual-list":i[4],"mdc-deprecated-list--avatar-list":i[5]||i[18],"mdc-deprecated-list--icon-list":i[6],"mdc-deprecated-list--image-list":i[7],"mdc-deprecated-list--thumbnail-list":i[8],"mdc-deprecated-list--video-list":i[9],"mdc-deprecated-list--two-line":i[10],"smui-list--three-line":i[11]&&!i[10]})},{role:i[15]},i[23]];var u=i[12];function m(r){let f={$$slots:{default:[xL]},$$scope:{ctx:r}};for(let _=0;_<l.length;_+=1)f=Yi(f,l[_]);return{props:f}}return u&&(e=ou(u,m(i)),i[38](e),e.$on("keydown",i[39]),e.$on("focusin",i[40]),e.$on("focusout",i[41]),e.$on("click",i[42]),e.$on("SMUIListItem:mount",i[19]),e.$on("SMUIListItem:unmount",i[20]),e.$on("SMUI:action",i[21])),{c(){e&&en(e.$$.fragment),t=kn()},l(r){e&&un(e.$$.fragment,r),t=kn()},m(r,f){e&&tn(e,r,f),jt(r,t,f),o=!0},p(r,f){const _=f[0]&8818687?xr(l,[f[0]&131073&&{use:[r[17],...r[0]]},f[0]&266238&&{class:sr({[r[1]]:!0,"mdc-deprecated-list":!0,"mdc-deprecated-list--non-interactive":r[2],"mdc-deprecated-list--dense":r[3],"mdc-deprecated-list--textual-list":r[4],"mdc-deprecated-list--avatar-list":r[5]||r[18],"mdc-deprecated-list--icon-list":r[6],"mdc-deprecated-list--image-list":r[7],"mdc-deprecated-list--thumbnail-list":r[8],"mdc-deprecated-list--video-list":r[9],"mdc-deprecated-list--two-line":r[10],"smui-list--three-line":r[11]&&!r[10]})},f[0]&32768&&{role:r[15]},f[0]&8388608&&Eo(r[23])]):{};if(f[1]&4096&&(_.$$scope={dirty:f,ctx:r}),u!==(u=r[12])){if(e){Fr();const b=e;Lt(b.$$.fragment,1,0,()=>{nn(b,1)}),Or()}u?(e=ou(u,m(r)),r[38](e),e.$on("keydown",r[39]),e.$on("focusin",r[40]),e.$on("focusout",r[41]),e.$on("click",r[42]),e.$on("SMUIListItem:mount",r[19]),e.$on("SMUIListItem:unmount",r[20]),e.$on("SMUI:action",r[21]),en(e.$$.fragment),vt(e.$$.fragment,1),tn(e,t.parentNode,t)):e=null}else u&&e.$set(_)},i(r){o||(e&&vt(e.$$.fragment,r),o=!0)},o(r){e&&Lt(e.$$.fragment,r),o=!1},d(r){i[38](null),r&&De(t),e&&nn(e,r)}}}function kL(i,e,t){const o=["use","class","nonInteractive","dense","textualList","avatarList","iconList","imageList","thumbnailList","videoList","twoLine","threeLine","vertical","wrapFocus","singleSelection","selectedIndex","radioList","checkList","hasTypeahead","component","layout","setEnabled","getTypeaheadInProgress","getSelectedIndex","getFocusedItemIndex","getElement"];let l=Yn(e,o),{$$slots:u={},$$scope:m}=e;var r;const{closest:f,matches:_}=E1,b=_o(yo());let{use:v=[]}=e,{class:w=""}=e,{nonInteractive:x=!1}=e,{dense:C=!1}=e,{textualList:T=!1}=e,{avatarList:S=!1}=e,{iconList:M=!1}=e,{imageList:O=!1}=e,{thumbnailList:V=!1}=e,{videoList:X=!1}=e,{twoLine:Z=!1}=e,{threeLine:te=!1}=e,{vertical:J=!0}=e,{wrapFocus:ie=(r=xs("SMUI:list:wrapFocus"))!==null&&r!==void 0?r:!1}=e,{singleSelection:Ee=!1}=e,{selectedIndex:Pe=-1}=e,{radioList:de=!1}=e,{checkList:Te=!1}=e,{hasTypeahead:ve=!1}=e,_e,ot,it=[],It=xs("SMUI:list:role"),Xe=xs("SMUI:list:nav");const we=new WeakMap;let Ce=xs("SMUI:dialog:selection"),Re=xs("SMUI:addLayoutListener"),le,{component:Se=Xe?E6:I6}=e;as("SMUI:list:nonInteractive",x),as("SMUI:separator:context","list"),It||(Ee?(It="listbox",as("SMUI:list:item:role","option")):de?(It="radiogroup",as("SMUI:list:item:role","radio")):Te?(It="group",as("SMUI:list:item:role","checkbox")):(It="list",as("SMUI:list:item:role",void 0))),Re&&(le=Re(ei)),ks(()=>{t(13,ot=new oL({addClassForElementIndex:gt,focusItemAtIndex:st,getAttributeForElementIndex:(ae,$e)=>{var _t,Kt;return(Kt=(_t=We()[ae])===null||_t===void 0?void 0:_t.getAttr($e))!==null&&Kt!==void 0?Kt:null},getFocusedElementIndex:()=>document.activeElement?We().map(ae=>ae.element).indexOf(document.activeElement):-1,getListItemCount:()=>it.length,getPrimaryTextAtIndex:bt,hasCheckboxAtIndex:ae=>{var $e,_t;return(_t=($e=We()[ae])===null||$e===void 0?void 0:$e.hasCheckbox)!==null&&_t!==void 0?_t:!1},hasRadioAtIndex:ae=>{var $e,_t;return(_t=($e=We()[ae])===null||$e===void 0?void 0:$e.hasRadio)!==null&&_t!==void 0?_t:!1},isCheckboxCheckedAtIndex:ae=>{var $e;const _t=We()[ae];return($e=(_t==null?void 0:_t.hasCheckbox)&&_t.checked)!==null&&$e!==void 0?$e:!1},isFocusInsideList:()=>_e!=null&&Xt()!==document.activeElement&&Xt().contains(document.activeElement),isRootFocused:()=>_e!=null&&document.activeElement===Xt(),listItemAtIndexHasClass:Ye,notifyAction:ae=>{t(24,Pe=ae),_e!=null&&Do(Xt(),"SMUIList:action",{index:ae},void 0,!0)},removeClassForElementIndex:Mt,setAttributeForElementIndex:ri,setCheckedCheckboxOrRadioAtIndex:(ae,$e)=>{We()[ae].checked=$e},setTabIndexForListItemChildren:(ae,$e)=>{const _t=We()[ae],Kt="button:not(:disabled), a";Array.prototype.forEach.call(_t.element.querySelectorAll(Kt),di=>{di.setAttribute("tabindex",$e)})}}));const Q={get element(){return Xt()},get items(){return it},get typeaheadInProgress(){return ot.isTypeaheadInProgress()},typeaheadMatchItem(ae,$e){return ot.typeaheadMatchItem(ae,$e,!0)},getOrderedList:We,focusItemAtIndex:st,addClassForElementIndex:gt,removeClassForElementIndex:Mt,setAttributeForElementIndex:ri,removeAttributeForElementIndex:ut,getAttributeFromElementIndex:wt,getPrimaryTextAtIndex:bt};return Do(Xt(),"SMUIList:mount",Q),ot.init(),()=>{ot.destroy()}}),nh(()=>{le&&le()});function he(Q){it.push(Q.detail),we.set(Q.detail.element,Q.detail),Ee&&Q.detail.selected&&t(24,Pe=Je(Q.detail.element)),Q.stopPropagation()}function me(Q){var ae;const $e=(ae=Q.detail&&it.indexOf(Q.detail))!==null&&ae!==void 0?ae:-1;$e!==-1&&(it.splice($e,1),it=it,we.delete(Q.detail.element)),Q.stopPropagation()}function Be(Q){if(de||Te){const ae=Je(Q.target);if(ae!==-1){const $e=We()[ae];$e&&(de&&!$e.checked||Te)&&($e.checked=!$e.checked,$e.activateRipple(),window.requestAnimationFrame(()=>{$e.deactivateRipple()}))}}}function We(){return _e==null?[]:[...Xt().children].map(Q=>we.get(Q)).filter(Q=>Q&&Q._smui_list_item_accessor)}function st(Q){const ae=We()[Q];ae&&"focus"in ae.element&&ae.element.focus()}function Ye(Q,ae){var $e;const _t=We()[Q];return($e=_t&&_t.hasClass(ae))!==null&&$e!==void 0?$e:!1}function gt(Q,ae){const $e=We()[Q];$e&&$e.addClass(ae)}function Mt(Q,ae){const $e=We()[Q];$e&&$e.removeClass(ae)}function ri(Q,ae,$e){const _t=We()[Q];_t&&_t.addAttr(ae,$e)}function ut(Q,ae){const $e=We()[Q];$e&&$e.removeAttr(ae)}function wt(Q,ae){const $e=We()[Q];return $e?$e.getAttr(ae):null}function bt(Q){var ae;const $e=We()[Q];return(ae=$e&&$e.getPrimaryText())!==null&&ae!==void 0?ae:""}function Je(Q){const ae=f(Q,".mdc-deprecated-list-item, .mdc-deprecated-list");return ae&&_(ae,".mdc-deprecated-list-item")?We().map($e=>$e==null?void 0:$e.element).indexOf(ae):-1}function ei(){return ot.layout()}function li(Q,ae){return ot.setEnabled(Q,ae)}function Qt(){return ot.isTypeaheadInProgress()}function Si(){return ot.getSelectedIndex()}function Ti(){return ot.getFocusedItemIndex()}function Xt(){return _e.getElement()}function mi(Q){bn[Q?"unshift":"push"](()=>{_e=Q,t(14,_e)})}const Zi=Q=>ot&&ot.handleKeydown(Q,Q.target.classList.contains("mdc-deprecated-list-item"),Je(Q.target)),Ci=Q=>ot&&ot.handleFocusIn(Je(Q.target)),ti=Q=>ot&&ot.handleFocusOut(Je(Q.target)),Me=Q=>ot&&ot.handleClick(Je(Q.target),!_(Q.target,'input[type="checkbox"], input[type="radio"]'));return i.$$set=Q=>{e=Yi(Yi({},e),po(Q)),t(23,l=Yn(e,o)),"use"in Q&&t(0,v=Q.use),"class"in Q&&t(1,w=Q.class),"nonInteractive"in Q&&t(2,x=Q.nonInteractive),"dense"in Q&&t(3,C=Q.dense),"textualList"in Q&&t(4,T=Q.textualList),"avatarList"in Q&&t(5,S=Q.avatarList),"iconList"in Q&&t(6,M=Q.iconList),"imageList"in Q&&t(7,O=Q.imageList),"thumbnailList"in Q&&t(8,V=Q.thumbnailList),"videoList"in Q&&t(9,X=Q.videoList),"twoLine"in Q&&t(10,Z=Q.twoLine),"threeLine"in Q&&t(11,te=Q.threeLine),"vertical"in Q&&t(25,J=Q.vertical),"wrapFocus"in Q&&t(26,ie=Q.wrapFocus),"singleSelection"in Q&&t(27,Ee=Q.singleSelection),"selectedIndex"in Q&&t(24,Pe=Q.selectedIndex),"radioList"in Q&&t(28,de=Q.radioList),"checkList"in Q&&t(29,Te=Q.checkList),"hasTypeahead"in Q&&t(30,ve=Q.hasTypeahead),"component"in Q&&t(12,Se=Q.component),"$$scope"in Q&&t(43,m=Q.$$scope)},i.$$.update=()=>{i.$$.dirty[0]&33562624&&ot&&ot.setVerticalOrientation(J),i.$$.dirty[0]&67117056&&ot&&ot.setWrapFocus(ie),i.$$.dirty[0]&1073750016&&ot&&ot.setHasTypeahead(ve),i.$$.dirty[0]&134225920&&ot&&ot.setSingleSelection(Ee),i.$$.dirty[0]&151003136&&ot&&Ee&&Si()!==Pe&&ot.setSelectedIndex(Pe)},[v,w,x,C,T,S,M,O,V,X,Z,te,Se,ot,_e,It,_,b,Ce,he,me,Be,Je,l,Pe,J,ie,Ee,de,Te,ve,ei,li,Qt,Si,Ti,Xt,u,mi,Zi,Ci,ti,Me,m]}class SL extends br{constructor(e){super(),wr(this,e,kL,AL,mr,{use:0,class:1,nonInteractive:2,dense:3,textualList:4,avatarList:5,iconList:6,imageList:7,thumbnailList:8,videoList:9,twoLine:10,threeLine:11,vertical:25,wrapFocus:26,singleSelection:27,selectedIndex:24,radioList:28,checkList:29,hasTypeahead:30,component:12,layout:31,setEnabled:32,getTypeaheadInProgress:33,getSelectedIndex:34,getFocusedItemIndex:35,getElement:36},null,[-1,-1])}get layout(){return this.$$.ctx[31]}get setEnabled(){return this.$$.ctx[32]}get getTypeaheadInProgress(){return this.$$.ctx[33]}get getSelectedIndex(){return this.$$.ctx[34]}get getFocusedItemIndex(){return this.$$.ctx[35]}get getElement(){return this.$$.ctx[36]}}function xb(i){let e;return{c(){e=Ht("span"),this.h()},l(t){e=Gt(t,"SPAN",{class:!0}),$t(e).forEach(De),this.h()},h(){qt(e,"class","mdc-deprecated-list-item__ripple")},m(t,o){jt(t,e,o)},d(t){t&&De(e)}}}function CL(i){let e,t,o=i[7]&&xb();const l=i[32].default,u=ur(l,i,i[35],null);return{c(){o&&o.c(),e=kn(),u&&u.c()},l(m){o&&o.l(m),e=kn(),u&&u.l(m)},m(m,r){o&&o.m(m,r),jt(m,e,r),u&&u.m(m,r),t=!0},p(m,r){m[7]?o||(o=xb(),o.c(),o.m(e.parentNode,e)):o&&(o.d(1),o=null),u&&u.p&&(!t||r[1]&16)&&cr(u,l,m,m[35],t?fr(l,m[35],r,null):hr(m[35]),null)},i(m){t||(vt(u,m),t=!0)},o(m){Lt(u,m),t=!1},d(m){o&&o.d(m),m&&De(e),u&&u.d(m)}}}function EL(i){let e,t,o;const l=[{use:[...i[6]?[]:[[mf,{ripple:!i[14],unbounded:!1,color:(i[1]||i[0])&&i[5]==null?"primary":i[5],disabled:i[9],addClass:i[22],removeClass:i[23],addStyle:i[24]}]],i[20],...i[2]]},{class:sr({[i[3]]:!0,"mdc-deprecated-list-item":!0,"mdc-deprecated-list-item--activated":i[1],"mdc-deprecated-list-item--selected":i[0],"mdc-deprecated-list-item--disabled":i[9],"mdc-menu-item--selected":!i[21]&&i[8]==="menuitem"&&i[0],"smui-menu-item--non-interactive":i[6],...i[16]})},{style:Object.entries(i[17]).map(Ab).concat([i[4]]).join(" ")},i[21]&&i[1]?{"aria-current":"page"}:{},i[21]?{}:{role:i[8]},!i[21]&&i[8]==="option"?{"aria-selected":i[0]?"true":"false"}:{},!i[21]&&(i[8]==="radio"||i[8]==="checkbox")?{"aria-checked":i[14]&&i[14].checked?"true":"false"}:{},i[21]?{}:{"aria-disabled":i[9]?"true":"false"},{"data-menu-item-skip-restore-focus":i[10]||void 0},{tabindex:i[19]},{href:i[11]},i[18],i[27]];var u=i[12];function m(r){let f={$$slots:{default:[CL]},$$scope:{ctx:r}};for(let _=0;_<l.length;_+=1)f=Yi(f,l[_]);return{props:f}}return u&&(e=ou(u,m(i)),i[33](e),e.$on("click",i[13]),e.$on("keydown",i[25]),e.$on("SMUIGenericInput:mount",i[26]),e.$on("SMUIGenericInput:unmount",i[34])),{c(){e&&en(e.$$.fragment),t=kn()},l(r){e&&un(e.$$.fragment,r),t=kn()},m(r,f){e&&tn(e,r,f),jt(r,t,f),o=!0},p(r,f){const _=f[0]&167726975?xr(l,[f[0]&30425703&&{use:[...r[6]?[]:[[mf,{ripple:!r[14],unbounded:!1,color:(r[1]||r[0])&&r[5]==null?"primary":r[5],disabled:r[9],addClass:r[22],removeClass:r[23],addStyle:r[24]}]],r[20],...r[2]]},f[0]&2163531&&{class:sr({[r[3]]:!0,"mdc-deprecated-list-item":!0,"mdc-deprecated-list-item--activated":r[1],"mdc-deprecated-list-item--selected":r[0],"mdc-deprecated-list-item--disabled":r[9],"mdc-menu-item--selected":!r[21]&&r[8]==="menuitem"&&r[0],"smui-menu-item--non-interactive":r[6],...r[16]})},f[0]&131088&&{style:Object.entries(r[17]).map(Ab).concat([r[4]]).join(" ")},f[0]&2097154&&Eo(r[21]&&r[1]?{"aria-current":"page"}:{}),f[0]&2097408&&Eo(r[21]?{}:{role:r[8]}),f[0]&2097409&&Eo(!r[21]&&r[8]==="option"?{"aria-selected":r[0]?"true":"false"}:{}),f[0]&2113792&&Eo(!r[21]&&(r[8]==="radio"||r[8]==="checkbox")?{"aria-checked":r[14]&&r[14].checked?"true":"false"}:{}),f[0]&2097664&&Eo(r[21]?{}:{"aria-disabled":r[9]?"true":"false"}),f[0]&1024&&{"data-menu-item-skip-restore-focus":r[10]||void 0},f[0]&524288&&{tabindex:r[19]},f[0]&2048&&{href:r[11]},f[0]&262144&&Eo(r[18]),f[0]&134217728&&Eo(r[27])]):{};if(f[0]&128|f[1]&16&&(_.$$scope={dirty:f,ctx:r}),u!==(u=r[12])){if(e){Fr();const b=e;Lt(b.$$.fragment,1,0,()=>{nn(b,1)}),Or()}u?(e=ou(u,m(r)),r[33](e),e.$on("click",r[13]),e.$on("keydown",r[25]),e.$on("SMUIGenericInput:mount",r[26]),e.$on("SMUIGenericInput:unmount",r[34]),en(e.$$.fragment),vt(e.$$.fragment,1),tn(e,t.parentNode,t)):e=null}else u&&e.$set(_)},i(r){o||(e&&vt(e.$$.fragment,r),o=!0)},o(r){e&&Lt(e.$$.fragment,r),o=!1},d(r){i[33](null),r&&De(t),e&&nn(e,r)}}}let IL=0;const Ab=([i,e])=>`${i}: ${e};`;function TL(i,e,t){let o;const l=["use","class","style","color","nonInteractive","ripple","activated","role","selected","disabled","skipRestoreFocus","tabindex","inputId","href","component","action","getPrimaryText","getElement"];let u=Yn(e,l),{$$slots:m={},$$scope:r}=e;var f;const _=_o(yo());let b=()=>{};function v(ut){return ut===b}let{use:w=[]}=e,{class:x=""}=e,{style:C=""}=e,{color:T=void 0}=e,{nonInteractive:S=(f=xs("SMUI:list:nonInteractive"))!==null&&f!==void 0?f:!1}=e;as("SMUI:list:nonInteractive",void 0);let{ripple:M=!S}=e,{activated:O=!1}=e,{role:V=xs("SMUI:list:item:role")}=e;as("SMUI:list:item:role",void 0);let{selected:X=!1}=e,{disabled:Z=!1}=e,{skipRestoreFocus:te=!1}=e,{tabindex:J=b}=e,{inputId:ie="SMUI-form-field-list-"+IL++}=e,{href:Ee=void 0}=e,Pe,de={},Te={},ve={},_e,ot,it=xs("SMUI:list:item:nav"),{component:It=it?Ee?d4:yf:S6}=e;as("SMUI:generic:input:props",{id:ie}),as("SMUI:separator:context",void 0),ks(()=>{if(!X&&!S){let wt=!0,bt=Pe;for(;bt.previousSibling;)if(bt=bt.previousSibling,bt.nodeType===1&&bt.classList.contains("mdc-deprecated-list-item")&&!bt.classList.contains("mdc-deprecated-list-item--disabled")){wt=!1;break}wt&&(ot=window.requestAnimationFrame(me))}const ut={_smui_list_item_accessor:!0,get element(){return gt()},get selected(){return X},set selected(wt){t(0,X=wt)},hasClass:Xe,addClass:we,removeClass:Ce,getAttr:le,addAttr:Se,removeAttr:he,getPrimaryText:Ye,get checked(){var wt;return(wt=_e&&_e.checked)!==null&&wt!==void 0?wt:!1},set checked(wt){_e&&t(14,_e.checked=!!wt,_e)},get hasCheckbox(){return!!(_e&&"_smui_checkbox_accessor"in _e)},get hasRadio(){return!!(_e&&"_smui_radio_accessor"in _e)},activateRipple(){_e&&_e.activateRipple()},deactivateRipple(){_e&&_e.deactivateRipple()},getValue(){return u.value},action:st,get tabindex(){return o},set tabindex(wt){t(28,J=wt)},get disabled(){return Z},get activated(){return O},set activated(wt){t(1,O=wt)}};return Do(gt(),"SMUIListItem:mount",ut),()=>{Do(gt(),"SMUIListItem:unmount",ut)}}),nh(()=>{ot&&window.cancelAnimationFrame(ot)});function Xe(ut){return ut in de?de[ut]:gt().classList.contains(ut)}function we(ut){de[ut]||t(16,de[ut]=!0,de)}function Ce(ut){(!(ut in de)||de[ut])&&t(16,de[ut]=!1,de)}function Re(ut,wt){Te[ut]!=wt&&(wt===""||wt==null?(delete Te[ut],t(17,Te)):t(17,Te[ut]=wt,Te))}function le(ut){var wt;return ut in ve?(wt=ve[ut])!==null&&wt!==void 0?wt:null:gt().getAttribute(ut)}function Se(ut,wt){ve[ut]!==wt&&t(18,ve[ut]=wt,ve)}function he(ut){(!(ut in ve)||ve[ut]!=null)&&t(18,ve[ut]=void 0,ve)}function me(){let ut=!0,wt=Pe.getElement();for(;wt.nextElementSibling;)if(wt=wt.nextElementSibling,wt.nodeType===1&&wt.classList.contains("mdc-deprecated-list-item")){const bt=wt.attributes.getNamedItem("tabindex");if(bt&&bt.value==="0"){ut=!1;break}}ut&&t(19,o=0)}function Be(ut){const wt=ut.key==="Enter",bt=ut.key==="Space";(wt||bt)&&st(ut)}function We(ut){("_smui_checkbox_accessor"in ut.detail||"_smui_radio_accessor"in ut.detail)&&t(14,_e=ut.detail)}function st(ut){Z||Do(gt(),"SMUI:action",ut)}function Ye(){var ut,wt,bt;const Je=gt(),ei=Je.querySelector(".mdc-deprecated-list-item__primary-text");if(ei)return(ut=ei.textContent)!==null&&ut!==void 0?ut:"";const li=Je.querySelector(".mdc-deprecated-list-item__text");return li?(wt=li.textContent)!==null&&wt!==void 0?wt:"":(bt=Je.textContent)!==null&&bt!==void 0?bt:""}function gt(){return Pe.getElement()}function Mt(ut){bn[ut?"unshift":"push"](()=>{Pe=ut,t(15,Pe)})}const ri=()=>t(14,_e=void 0);return i.$$set=ut=>{e=Yi(Yi({},e),po(ut)),t(27,u=Yn(e,l)),"use"in ut&&t(2,w=ut.use),"class"in ut&&t(3,x=ut.class),"style"in ut&&t(4,C=ut.style),"color"in ut&&t(5,T=ut.color),"nonInteractive"in ut&&t(6,S=ut.nonInteractive),"ripple"in ut&&t(7,M=ut.ripple),"activated"in ut&&t(1,O=ut.activated),"role"in ut&&t(8,V=ut.role),"selected"in ut&&t(0,X=ut.selected),"disabled"in ut&&t(9,Z=ut.disabled),"skipRestoreFocus"in ut&&t(10,te=ut.skipRestoreFocus),"tabindex"in ut&&t(28,J=ut.tabindex),"inputId"in ut&&t(29,ie=ut.inputId),"href"in ut&&t(11,Ee=ut.href),"component"in ut&&t(12,It=ut.component),"$$scope"in ut&&t(35,r=ut.$$scope)},i.$$.update=()=>{i.$$.dirty[0]&268452417&&t(19,o=v(J)?!S&&!Z&&(X||_e&&_e.checked)?0:-1:J)},[X,O,w,x,C,T,S,M,V,Z,te,Ee,It,st,_e,Pe,de,Te,ve,o,_,it,we,Ce,Re,Be,We,u,J,ie,Ye,gt,m,Mt,ri,r]}class LL extends br{constructor(e){super(),wr(this,e,TL,EL,mr,{use:2,class:3,style:4,color:5,nonInteractive:6,ripple:7,activated:1,role:8,selected:0,disabled:9,skipRestoreFocus:10,tabindex:28,inputId:29,href:11,component:12,action:13,getPrimaryText:30,getElement:31},null,[-1,-1])}get action(){return this.$$.ctx[13]}get getPrimaryText(){return this.$$.ctx[30]}get getElement(){return this.$$.ctx[31]}}bl({class:"mdc-deprecated-list-item__text",component:yf});bl({class:"mdc-deprecated-list-item__primary-text",component:yf});bl({class:"mdc-deprecated-list-item__secondary-text",component:yf});function PL(i){let e,t,o,l,u,m;const r=i[8].default,f=ur(r,i,i[7],null);let _=[{class:t=sr({[i[1]]:!0,"mdc-deprecated-list-item__graphic":!0,"mdc-menu__selection-group-icon":i[4]})},i[5]],b={};for(let v=0;v<_.length;v+=1)b=Yi(b,_[v]);return{c(){e=Ht("span"),f&&f.c(),this.h()},l(v){e=Gt(v,"SPAN",{class:!0});var w=$t(e);f&&f.l(w),w.forEach(De),this.h()},h(){nr(e,b)},m(v,w){jt(v,e,w),f&&f.m(e,null),i[9](e),l=!0,u||(m=[tr(o=To.call(null,e,i[0])),tr(i[3].call(null,e))],u=!0)},p(v,[w]){f&&f.p&&(!l||w&128)&&cr(f,r,v,v[7],l?fr(r,v[7],w,null):hr(v[7]),null),nr(e,b=xr(_,[(!l||w&2&&t!==(t=sr({[v[1]]:!0,"mdc-deprecated-list-item__graphic":!0,"mdc-menu__selection-group-icon":v[4]})))&&{class:t},w&32&&v[5]])),o&&so(o.update)&&w&1&&o.update.call(null,v[0])},i(v){l||(vt(f,v),l=!0)},o(v){Lt(f,v),l=!1},d(v){v&&De(e),f&&f.d(v),i[9](null),u=!1,Lo(m)}}}function ML(i,e,t){const o=["use","class","getElement"];let l=Yn(e,o),{$$slots:u={},$$scope:m}=e;const r=_o(yo());let{use:f=[]}=e,{class:_=""}=e,b,v=xs("SMUI:list:graphic:menu-selection-group");function w(){return b}function x(C){bn[C?"unshift":"push"](()=>{b=C,t(2,b)})}return i.$$set=C=>{e=Yi(Yi({},e),po(C)),t(5,l=Yn(e,o)),"use"in C&&t(0,f=C.use),"class"in C&&t(1,_=C.class),"$$scope"in C&&t(7,m=C.$$scope)},[f,_,b,r,v,l,w,m,u,x]}class DL extends br{constructor(e){super(),wr(this,e,ML,PL,mr,{use:0,class:1,getElement:6})}get getElement(){return this.$$.ctx[6]}}bl({class:"mdc-deprecated-list-item__meta",component:yf});bl({class:"mdc-deprecated-list-group",component:tp});bl({class:"mdc-deprecated-list-group__subheader",component:x6});const OL=LL,FL=DL;bl({class:"mdc-menu__selection-group-icon",component:FL});function RL(i){let e,t,o,l,u,m,r,f;const _=i[22].default,b=ur(_,i,i[21],null);let v=[{class:t=sr({[i[3]]:!0,"mdc-floating-label":!0,"mdc-floating-label--float-above":i[0],"mdc-floating-label--required":i[1],...i[8]})},{style:o=Object.entries(i[9]).map(Sb).concat([i[4]]).join(" ")},{for:l=i[5]||(i[11]?i[11].id:void 0)},i[12]],w={};for(let x=0;x<v.length;x+=1)w=Yi(w,v[x]);return{c(){e=Ht("label"),b&&b.c(),this.h()},l(x){e=Gt(x,"LABEL",{class:!0,style:!0,for:!0});var C=$t(e);b&&b.l(C),C.forEach(De),this.h()},h(){nr(e,w)},m(x,C){jt(x,e,C),b&&b.m(e,null),i[24](e),m=!0,r||(f=[tr(u=To.call(null,e,i[2])),tr(i[10].call(null,e))],r=!0)},p(x,C){b&&b.p&&(!m||C&2097152)&&cr(b,_,x,x[21],m?fr(_,x[21],C,null):hr(x[21]),null),nr(e,w=xr(v,[(!m||C&267&&t!==(t=sr({[x[3]]:!0,"mdc-floating-label":!0,"mdc-floating-label--float-above":x[0],"mdc-floating-label--required":x[1],...x[8]})))&&{class:t},(!m||C&528&&o!==(o=Object.entries(x[9]).map(Sb).concat([x[4]]).join(" ")))&&{style:o},(!m||C&32&&l!==(l=x[5]||(x[11]?x[11].id:void 0)))&&{for:l},C&4096&&x[12]])),u&&so(u.update)&&C&4&&u.update.call(null,x[2])},i(x){m||(vt(b,x),m=!0)},o(x){Lt(b,x),m=!1},d(x){x&&De(e),b&&b.d(x),i[24](null),r=!1,Lo(f)}}}function BL(i){let e,t,o,l,u,m,r;const f=i[22].default,_=ur(f,i,i[21],null);let b=[{class:t=sr({[i[3]]:!0,"mdc-floating-label":!0,"mdc-floating-label--float-above":i[0],"mdc-floating-label--required":i[1],...i[8]})},{style:o=Object.entries(i[9]).map(kb).concat([i[4]]).join(" ")},i[12]],v={};for(let w=0;w<b.length;w+=1)v=Yi(v,b[w]);return{c(){e=Ht("span"),_&&_.c(),this.h()},l(w){e=Gt(w,"SPAN",{class:!0,style:!0});var x=$t(e);_&&_.l(x),x.forEach(De),this.h()},h(){nr(e,v)},m(w,x){jt(w,e,x),_&&_.m(e,null),i[23](e),u=!0,m||(r=[tr(l=To.call(null,e,i[2])),tr(i[10].call(null,e))],m=!0)},p(w,x){_&&_.p&&(!u||x&2097152)&&cr(_,f,w,w[21],u?fr(f,w[21],x,null):hr(w[21]),null),nr(e,v=xr(b,[(!u||x&267&&t!==(t=sr({[w[3]]:!0,"mdc-floating-label":!0,"mdc-floating-label--float-above":w[0],"mdc-floating-label--required":w[1],...w[8]})))&&{class:t},(!u||x&528&&o!==(o=Object.entries(w[9]).map(kb).concat([w[4]]).join(" ")))&&{style:o},x&4096&&w[12]])),l&&so(l.update)&&x&4&&l.update.call(null,w[2])},i(w){u||(vt(_,w),u=!0)},o(w){Lt(_,w),u=!1},d(w){w&&De(e),_&&_.d(w),i[23](null),m=!1,Lo(r)}}}function zL(i){let e,t,o,l;const u=[BL,RL],m=[];function r(f,_){return f[6]?0:1}return e=r(i),t=m[e]=u[e](i),{c(){t.c(),o=kn()},l(f){t.l(f),o=kn()},m(f,_){m[e].m(f,_),jt(f,o,_),l=!0},p(f,[_]){let b=e;e=r(f),e===b?m[e].p(f,_):(Fr(),Lt(m[b],1,1,()=>{m[b]=null}),Or(),t=m[e],t?t.p(f,_):(t=m[e]=u[e](f),t.c()),vt(t,1),t.m(o.parentNode,o))},i(f){l||(vt(t),l=!0)},o(f){Lt(t),l=!1},d(f){m[e].d(f),f&&De(o)}}}const kb=([i,e])=>`${i}: ${e};`,Sb=([i,e])=>`${i}: ${e};`;function NL(i,e,t){const o=["use","class","style","for","floatAbove","required","wrapped","shake","float","setRequired","getWidth","getElement"];let l=Yn(e,o),{$$slots:u={},$$scope:m}=e;var r;const f=_o(yo());let{use:_=[]}=e,{class:b=""}=e,{style:v=""}=e,{for:w=void 0}=e,{floatAbove:x=!1}=e,{required:C=!1}=e,{wrapped:T=!1}=e,S,M,O={},V={},X=(r=xs("SMUI:generic:input:props"))!==null&&r!==void 0?r:{},Z=x,te=C;ks(()=>{t(18,M=new Z7({addClass:J,removeClass:ie,getWidth:()=>{var we,Ce;const Re=ot(),le=Re.cloneNode(!0);(we=Re.parentNode)===null||we===void 0||we.appendChild(le),le.classList.add("smui-floating-label--remove-transition"),le.classList.add("smui-floating-label--force-size"),le.classList.remove("mdc-floating-label--float-above");const Se=le.scrollWidth;return(Ce=Re.parentNode)===null||Ce===void 0||Ce.removeChild(le),Se},registerInteractionHandler:(we,Ce)=>ot().addEventListener(we,Ce),deregisterInteractionHandler:(we,Ce)=>ot().removeEventListener(we,Ce)}));const Xe={get element(){return ot()},addStyle:Ee,removeStyle:Pe};return Do(S,"SMUIFloatingLabel:mount",Xe),M.init(),()=>{Do(S,"SMUIFloatingLabel:unmount",Xe),M.destroy()}});function J(Xe){O[Xe]||t(8,O[Xe]=!0,O)}function ie(Xe){(!(Xe in O)||O[Xe])&&t(8,O[Xe]=!1,O)}function Ee(Xe,we){V[Xe]!=we&&(we===""||we==null?(delete V[Xe],t(9,V)):t(9,V[Xe]=we,V))}function Pe(Xe){Xe in V&&(delete V[Xe],t(9,V))}function de(Xe){M.shake(Xe)}function Te(Xe){t(0,x=Xe)}function ve(Xe){t(1,C=Xe)}function _e(){return M.getWidth()}function ot(){return S}function it(Xe){bn[Xe?"unshift":"push"](()=>{S=Xe,t(7,S)})}function It(Xe){bn[Xe?"unshift":"push"](()=>{S=Xe,t(7,S)})}return i.$$set=Xe=>{e=Yi(Yi({},e),po(Xe)),t(12,l=Yn(e,o)),"use"in Xe&&t(2,_=Xe.use),"class"in Xe&&t(3,b=Xe.class),"style"in Xe&&t(4,v=Xe.style),"for"in Xe&&t(5,w=Xe.for),"floatAbove"in Xe&&t(0,x=Xe.floatAbove),"required"in Xe&&t(1,C=Xe.required),"wrapped"in Xe&&t(6,T=Xe.wrapped),"$$scope"in Xe&&t(21,m=Xe.$$scope)},i.$$.update=()=>{i.$$.dirty&786433&&M&&Z!==x&&(t(19,Z=x),M.float(x)),i.$$.dirty&1310722&&M&&te!==C&&(t(20,te=C),M.setRequired(C))},[x,C,_,b,v,w,T,S,O,V,f,X,l,de,Te,ve,_e,ot,M,Z,te,m,u,it,It]}class K1 extends br{constructor(e){super(),wr(this,e,NL,zL,mr,{use:2,class:3,style:4,for:5,floatAbove:0,required:1,wrapped:6,shake:13,float:14,setRequired:15,getWidth:16,getElement:17})}get shake(){return this.$$.ctx[13]}get float(){return this.$$.ctx[14]}get setRequired(){return this.$$.ctx[15]}get getWidth(){return this.$$.ctx[16]}get getElement(){return this.$$.ctx[17]}}function jL(i){let e,t,o,l,u,m,r=[{class:t=sr({[i[1]]:!0,"mdc-line-ripple":!0,"mdc-line-ripple--active":i[3],...i[5]})},{style:o=Object.entries(i[6]).map(Cb).concat([i[2]]).join(" ")},i[8]],f={};for(let _=0;_<r.length;_+=1)f=Yi(f,r[_]);return{c(){e=Ht("div"),this.h()},l(_){e=Gt(_,"DIV",{class:!0,style:!0}),$t(e).forEach(De),this.h()},h(){nr(e,f)},m(_,b){jt(_,e,b),i[13](e),u||(m=[tr(l=To.call(null,e,i[0])),tr(i[7].call(null,e))],u=!0)},p(_,[b]){nr(e,f=xr(r,[b&42&&t!==(t=sr({[_[1]]:!0,"mdc-line-ripple":!0,"mdc-line-ripple--active":_[3],..._[5]}))&&{class:t},b&68&&o!==(o=Object.entries(_[6]).map(Cb).concat([_[2]]).join(" "))&&{style:o},b&256&&_[8]])),l&&so(l.update)&&b&1&&l.update.call(null,_[0])},i:go,o:go,d(_){_&&De(e),i[13](null),u=!1,Lo(m)}}}const Cb=([i,e])=>`${i}: ${e};`;function UL(i,e,t){const o=["use","class","style","active","activate","deactivate","setRippleCenter","getElement"];let l=Yn(e,o);const u=_o(yo());let{use:m=[]}=e,{class:r=""}=e,{style:f=""}=e,{active:_=!1}=e,b,v,w={},x={};ks(()=>(v=new K7({addClass:T,removeClass:S,hasClass:C,setStyle:M,registerEventHandler:(J,ie)=>Z().addEventListener(J,ie),deregisterEventHandler:(J,ie)=>Z().removeEventListener(J,ie)}),v.init(),()=>{v.destroy()}));function C(J){return J in w?w[J]:Z().classList.contains(J)}function T(J){w[J]||t(5,w[J]=!0,w)}function S(J){(!(J in w)||w[J])&&t(5,w[J]=!1,w)}function M(J,ie){x[J]!=ie&&(ie===""||ie==null?(delete x[J],t(6,x)):t(6,x[J]=ie,x))}function O(){v.activate()}function V(){v.deactivate()}function X(J){v.setRippleCenter(J)}function Z(){return b}function te(J){bn[J?"unshift":"push"](()=>{b=J,t(4,b)})}return i.$$set=J=>{e=Yi(Yi({},e),po(J)),t(8,l=Yn(e,o)),"use"in J&&t(0,m=J.use),"class"in J&&t(1,r=J.class),"style"in J&&t(2,f=J.style),"active"in J&&t(3,_=J.active)},[m,r,f,_,b,w,x,u,l,O,V,X,Z,te]}class v3 extends br{constructor(e){super(),wr(this,e,UL,jL,mr,{use:0,class:1,style:2,active:3,activate:9,deactivate:10,setRippleCenter:11,getElement:12})}get activate(){return this.$$.ctx[9]}get deactivate(){return this.$$.ctx[10]}get setRippleCenter(){return this.$$.ctx[11]}get getElement(){return this.$$.ctx[12]}}function Eb(i){let e,t,o;const l=i[14].default,u=ur(l,i,i[13],null);return{c(){e=Ht("div"),u&&u.c(),this.h()},l(m){e=Gt(m,"DIV",{class:!0,style:!0});var r=$t(e);u&&u.l(r),r.forEach(De),this.h()},h(){qt(e,"class","mdc-notched-outline__notch"),qt(e,"style",t=Object.entries(i[7]).map(Ib).join(" "))},m(m,r){jt(m,e,r),u&&u.m(e,null),o=!0},p(m,r){u&&u.p&&(!o||r&8192)&&cr(u,l,m,m[13],o?fr(l,m[13],r,null):hr(m[13]),null),(!o||r&128&&t!==(t=Object.entries(m[7]).map(Ib).join(" ")))&&qt(e,"style",t)},i(m){o||(vt(u,m),o=!0)},o(m){Lt(u,m),o=!1},d(m){m&&De(e),u&&u.d(m)}}}function VL(i){let e,t,o,l,u,m,r,f,_,b,v=!i[3]&&Eb(i),w=[{class:m=sr({[i[1]]:!0,"mdc-notched-outline":!0,"mdc-notched-outline--notched":i[2],"mdc-notched-outline--no-label":i[3],...i[6]})},i[9]],x={};for(let C=0;C<w.length;C+=1)x=Yi(x,w[C]);return{c(){e=Ht("div"),t=Ht("div"),o=Wi(),v&&v.c(),l=Wi(),u=Ht("div"),this.h()},l(C){e=Gt(C,"DIV",{class:!0});var T=$t(e);t=Gt(T,"DIV",{class:!0}),$t(t).forEach(De),o=Xi(T),v&&v.l(T),l=Xi(T),u=Gt(T,"DIV",{class:!0}),$t(u).forEach(De),T.forEach(De),this.h()},h(){qt(t,"class","mdc-notched-outline__leading"),qt(u,"class","mdc-notched-outline__trailing"),nr(e,x)},m(C,T){jt(C,e,T),Ut(e,t),Ut(e,o),v&&v.m(e,null),Ut(e,l),Ut(e,u),i[15](e),f=!0,_||(b=[tr(r=To.call(null,e,i[0])),tr(i[8].call(null,e)),xn(e,"SMUIFloatingLabel:mount",i[16]),xn(e,"SMUIFloatingLabel:unmount",i[17])],_=!0)},p(C,[T]){C[3]?v&&(Fr(),Lt(v,1,1,()=>{v=null}),Or()):v?(v.p(C,T),T&8&&vt(v,1)):(v=Eb(C),v.c(),vt(v,1),v.m(e,l)),nr(e,x=xr(w,[(!f||T&78&&m!==(m=sr({[C[1]]:!0,"mdc-notched-outline":!0,"mdc-notched-outline--notched":C[2],"mdc-notched-outline--no-label":C[3],...C[6]})))&&{class:m},T&512&&C[9]])),r&&so(r.update)&&T&1&&r.update.call(null,C[0])},i(C){f||(vt(v),f=!0)},o(C){Lt(v),f=!1},d(C){C&&De(e),v&&v.d(),i[15](null),_=!1,Lo(b)}}}const Ib=([i,e])=>`${i}: ${e};`;function qL(i,e,t){const o=["use","class","notched","noLabel","notch","closeNotch","getElement"];let l=Yn(e,o),{$$slots:u={},$$scope:m}=e;const r=_o(yo());let{use:f=[]}=e,{class:_=""}=e,{notched:b=!1}=e,{noLabel:v=!1}=e,w,x,C,T={},S={};ks(()=>(x=new cL({addClass:M,removeClass:O,setNotchWidthProperty:de=>V("width",de+"px"),removeNotchWidthProperty:()=>X("width")}),x.init(),()=>{x.destroy()}));function M(de){T[de]||t(6,T[de]=!0,T)}function O(de){(!(de in T)||T[de])&&t(6,T[de]=!1,T)}function V(de,Te){S[de]!=Te&&(Te===""||Te==null?(delete S[de],t(7,S)):t(7,S[de]=Te,S))}function X(de){de in S&&(delete S[de],t(7,S))}function Z(de){x.notch(de)}function te(){x.closeNotch()}function J(){return w}function ie(de){bn[de?"unshift":"push"](()=>{w=de,t(5,w)})}const Ee=de=>t(4,C=de.detail),Pe=()=>t(4,C=void 0);return i.$$set=de=>{e=Yi(Yi({},e),po(de)),t(9,l=Yn(e,o)),"use"in de&&t(0,f=de.use),"class"in de&&t(1,_=de.class),"notched"in de&&t(2,b=de.notched),"noLabel"in de&&t(3,v=de.noLabel),"$$scope"in de&&t(13,m=de.$$scope)},i.$$.update=()=>{i.$$.dirty&16&&(C?(C.addStyle("transition-duration","0s"),M("mdc-notched-outline--upgraded"),requestAnimationFrame(()=>{C&&C.removeStyle("transition-duration")})):O("mdc-notched-outline--upgraded"))},[f,_,b,v,C,w,T,S,r,l,Z,te,J,m,u,ie,Ee,Pe]}class b3 extends br{constructor(e){super(),wr(this,e,qL,VL,mr,{use:0,class:1,notched:2,noLabel:3,notch:10,closeNotch:11,getElement:12})}get notch(){return this.$$.ctx[10]}get closeNotch(){return this.$$.ctx[11]}get getElement(){return this.$$.ctx[12]}}function HL(i){let e;return{c(){e=Kn(i[8])},l(t){e=Jn(t,i[8])},m(t,o){jt(t,e,o)},p(t,o){o&256&&Os(e,t[8])},i:go,o:go,d(t){t&&De(e)}}}function GL(i){let e;const t=i[13].default,o=ur(t,i,i[12],null);return{c(){o&&o.c()},l(l){o&&o.l(l)},m(l,u){o&&o.m(l,u),e=!0},p(l,u){o&&o.p&&(!e||u&4096)&&cr(o,t,l,l[12],e?fr(t,l[12],u,null):hr(l[12]),null)},i(l){e||(vt(o,l),e=!0)},o(l){Lt(o,l),e=!1},d(l){o&&o.d(l)}}}function WL(i){let e,t,o,l,u,m,r,f,_;const b=[GL,HL],v=[];function w(T,S){return T[8]==null?0:1}t=w(i),o=v[t]=b[t](i);let x=[{class:l=sr({[i[1]]:!0,"mdc-select-helper-text":!0,"mdc-select-helper-text--validation-msg":i[4],"mdc-select-helper-text--validation-msg-persistent":i[3],...i[6]})},{"aria-hidden":u=i[3]?void 0:"true"},{id:i[2]},i[7],i[10]],C={};for(let T=0;T<x.length;T+=1)C=Yi(C,x[T]);return{c(){e=Ht("div"),o.c(),this.h()},l(T){e=Gt(T,"DIV",{class:!0,"aria-hidden":!0,id:!0});var S=$t(e);o.l(S),S.forEach(De),this.h()},h(){nr(e,C)},m(T,S){jt(T,e,S),v[t].m(e,null),i[14](e),r=!0,f||(_=[tr(m=To.call(null,e,i[0])),tr(i[9].call(null,e))],f=!0)},p(T,[S]){let M=t;t=w(T),t===M?v[t].p(T,S):(Fr(),Lt(v[M],1,1,()=>{v[M]=null}),Or(),o=v[t],o?o.p(T,S):(o=v[t]=b[t](T),o.c()),vt(o,1),o.m(e,null)),nr(e,C=xr(x,[(!r||S&90&&l!==(l=sr({[T[1]]:!0,"mdc-select-helper-text":!0,"mdc-select-helper-text--validation-msg":T[4],"mdc-select-helper-text--validation-msg-persistent":T[3],...T[6]})))&&{class:l},(!r||S&8&&u!==(u=T[3]?void 0:"true"))&&{"aria-hidden":u},(!r||S&4)&&{id:T[2]},S&128&&T[7],S&1024&&T[10]])),m&&so(m.update)&&S&1&&m.update.call(null,T[0])},i(T){r||(vt(o),r=!0)},o(T){Lt(o),r=!1},d(T){T&&De(e),v[t].d(),i[14](null),f=!1,Lo(_)}}}let XL=0;function YL(i,e,t){const o=["use","class","id","persistent","validationMsg","getElement"];let l=Yn(e,o),{$$slots:u={},$$scope:m}=e;const r=_o(yo());let{use:f=[]}=e,{class:_=""}=e,{id:b="SMUI-select-helper-text-"+XL++}=e,{persistent:v=!1}=e,{validationMsg:w=!1}=e,x,C,T={},S={},M;ks(()=>(C=new fL({addClass:V,removeClass:X,hasClass:O,getAttr:Z,setAttr:te,removeAttr:J,setContent:Pe=>{t(8,M=Pe)}}),b.startsWith("SMUI-select-helper-text-")&&Do(ie(),"SMUISelectHelperText:id",b),Do(ie(),"SMUISelectHelperText:mount",C),C.init(),()=>{Do(ie(),"SMUISelectHelperText:unmount",C),C.destroy()}));function O(Pe){return Pe in T?T[Pe]:ie().classList.contains(Pe)}function V(Pe){T[Pe]||t(6,T[Pe]=!0,T)}function X(Pe){(!(Pe in T)||T[Pe])&&t(6,T[Pe]=!1,T)}function Z(Pe){var de;return Pe in S?(de=S[Pe])!==null&&de!==void 0?de:null:ie().getAttribute(Pe)}function te(Pe,de){S[Pe]!==de&&t(7,S[Pe]=de,S)}function J(Pe){(!(Pe in S)||S[Pe]!=null)&&t(7,S[Pe]=void 0,S)}function ie(){return x}function Ee(Pe){bn[Pe?"unshift":"push"](()=>{x=Pe,t(5,x)})}return i.$$set=Pe=>{e=Yi(Yi({},e),po(Pe)),t(10,l=Yn(e,o)),"use"in Pe&&t(0,f=Pe.use),"class"in Pe&&t(1,_=Pe.class),"id"in Pe&&t(2,b=Pe.id),"persistent"in Pe&&t(3,v=Pe.persistent),"validationMsg"in Pe&&t(4,w=Pe.validationMsg),"$$scope"in Pe&&t(12,m=Pe.$$scope)},[f,_,b,v,w,x,T,S,M,r,l,ie,m,u,Ee]}class ZL extends br{constructor(e){super(),wr(this,e,YL,WL,mr,{use:0,class:1,id:2,persistent:3,validationMsg:4,getElement:11})}get getElement(){return this.$$.ctx[11]}}const KL=i=>({}),Tb=i=>({}),JL=i=>({}),Lb=i=>({}),QL=i=>({}),Pb=i=>({}),$L=i=>({}),Mb=i=>({});function Db(i){let e,t=[{type:"hidden"},{required:i[10]},{disabled:i[6]},{value:i[0]},fo(i[53],"input$")],o={};for(let l=0;l<t.length;l+=1)o=Yi(o,t[l]);return{c(){e=Ht("input"),this.h()},l(l){e=Gt(l,"INPUT",{type:!0}),this.h()},h(){nr(e,o)},m(l,u){jt(l,e,u),e.autofocus&&e.focus()},p(l,u){nr(e,o=xr(t,[{type:"hidden"},u[0]&1024&&{required:l[10]},u[0]&64&&{disabled:l[6]},u[0]&1&&{value:l[0]},u[1]&4194304&&fo(l[53],"input$")]))},d(l){l&&De(e)}}}function Ob(i){let e;return{c(){e=Ht("span"),this.h()},l(t){e=Gt(t,"SPAN",{class:!0}),$t(e).forEach(De),this.h()},h(){qt(e,"class","mdc-select__ripple")},m(t,o){jt(t,e,o)},d(t){t&&De(e)}}}function Fb(i){let e,t;const o=[{id:i[11]+"-smui-label"},{floatAbove:i[43]!==""},{required:i[10]},fo(i[53],"label$")];let l={$$slots:{default:[eP]},$$scope:{ctx:i}};for(let u=0;u<o.length;u+=1)l=Yi(l,o[u]);return e=new K1({props:l}),i[66](e),{c(){en(e.$$.fragment)},l(u){un(e.$$.fragment,u)},m(u,m){tn(e,u,m),t=!0},p(u,m){const r=m[0]&3072|m[1]&4198400?xr(o,[m[0]&2048&&{id:u[11]+"-smui-label"},m[1]&4096&&{floatAbove:u[43]!==""},m[0]&1024&&{required:u[10]},m[1]&4194304&&Eo(fo(u[53],"label$"))]):{};m[0]&512|m[2]&134217728&&(r.$$scope={dirty:m,ctx:u}),e.$set(r)},i(u){t||(vt(e.$$.fragment,u),t=!0)},o(u){Lt(e.$$.fragment,u),t=!1},d(u){i[66](null),nn(e,u)}}}function eP(i){let e=(i[9]==null?"":i[9])+"",t,o;const l=i[63].label,u=ur(l,i,i[89],Mb);return{c(){t=Kn(e),u&&u.c()},l(m){t=Jn(m,e),u&&u.l(m)},m(m,r){jt(m,t,r),u&&u.m(m,r),o=!0},p(m,r){(!o||r[0]&512)&&e!==(e=(m[9]==null?"":m[9])+"")&&Os(t,e),u&&u.p&&(!o||r[2]&134217728)&&cr(u,l,m,m[89],o?fr(l,m[89],r,$L):hr(m[89]),Mb)},i(m){o||(vt(u,m),o=!0)},o(m){Lt(u,m),o=!1},d(m){m&&De(t),u&&u.d(m)}}}function Rb(i){let e,t;const o=[{noLabel:i[8]||i[9]==null&&!i[52].label},fo(i[53],"outline$")];let l={$$slots:{default:[iP]},$$scope:{ctx:i}};for(let u=0;u<o.length;u+=1)l=Yi(l,o[u]);return e=new b3({props:l}),i[68](e),{c(){en(e.$$.fragment)},l(u){un(e.$$.fragment,u)},m(u,m){tn(e,u,m),t=!0},p(u,m){const r=m[0]&768|m[1]&6291456?xr(o,[m[0]&768|m[1]&2097152&&{noLabel:u[8]||u[9]==null&&!u[52].label},m[1]&4194304&&Eo(fo(u[53],"outline$"))]):{};m[0]&3840|m[1]&6296064|m[2]&134217728&&(r.$$scope={dirty:m,ctx:u}),e.$set(r)},i(u){t||(vt(e.$$.fragment,u),t=!0)},o(u){Lt(e.$$.fragment,u),t=!1},d(u){i[68](null),nn(e,u)}}}function Bb(i){let e,t;const o=[{id:i[11]+"-smui-label"},{floatAbove:i[43]!==""},{required:i[10]},fo(i[53],"label$")];let l={$$slots:{default:[tP]},$$scope:{ctx:i}};for(let u=0;u<o.length;u+=1)l=Yi(l,o[u]);return e=new K1({props:l}),i[67](e),{c(){en(e.$$.fragment)},l(u){un(e.$$.fragment,u)},m(u,m){tn(e,u,m),t=!0},p(u,m){const r=m[0]&3072|m[1]&4198400?xr(o,[m[0]&2048&&{id:u[11]+"-smui-label"},m[1]&4096&&{floatAbove:u[43]!==""},m[0]&1024&&{required:u[10]},m[1]&4194304&&Eo(fo(u[53],"label$"))]):{};m[0]&512|m[2]&134217728&&(r.$$scope={dirty:m,ctx:u}),e.$set(r)},i(u){t||(vt(e.$$.fragment,u),t=!0)},o(u){Lt(e.$$.fragment,u),t=!1},d(u){i[67](null),nn(e,u)}}}function tP(i){let e=(i[9]==null?"":i[9])+"",t,o;const l=i[63].label,u=ur(l,i,i[89],Pb);return{c(){t=Kn(e),u&&u.c()},l(m){t=Jn(m,e),u&&u.l(m)},m(m,r){jt(m,t,r),u&&u.m(m,r),o=!0},p(m,r){(!o||r[0]&512)&&e!==(e=(m[9]==null?"":m[9])+"")&&Os(t,e),u&&u.p&&(!o||r[2]&134217728)&&cr(u,l,m,m[89],o?fr(l,m[89],r,QL):hr(m[89]),Pb)},i(m){o||(vt(u,m),o=!0)},o(m){Lt(u,m),o=!1},d(m){m&&De(t),u&&u.d(m)}}}function iP(i){let e,t,o=!i[8]&&(i[9]!=null||i[52].label)&&Bb(i);return{c(){o&&o.c(),e=kn()},l(l){o&&o.l(l),e=kn()},m(l,u){o&&o.m(l,u),jt(l,e,u),t=!0},p(l,u){!l[8]&&(l[9]!=null||l[52].label)?o?(o.p(l,u),u[0]&768|u[1]&2097152&&vt(o,1)):(o=Bb(l),o.c(),vt(o,1),o.m(e.parentNode,e)):o&&(Fr(),Lt(o,1,1,()=>{o=null}),Or())},i(l){t||(vt(o),t=!0)},o(l){Lt(o),t=!1},d(l){o&&o.d(l),l&&De(e)}}}function zb(i){let e,t;const o=[fo(i[53],"ripple$")];let l={};for(let u=0;u<o.length;u+=1)l=Yi(l,o[u]);return e=new v3({props:l}),i[70](e),{c(){en(e.$$.fragment)},l(u){un(e.$$.fragment,u)},m(u,m){tn(e,u,m),t=!0},p(u,m){const r=m[1]&4194304?xr(o,[Eo(fo(u[53],"ripple$"))]):{};e.$set(r)},i(u){t||(vt(e.$$.fragment,u),t=!0)},o(u){Lt(e.$$.fragment,u),t=!1},d(u){i[70](null),nn(e,u)}}}function nP(i){let e;const t=i[63].default,o=ur(t,i,i[89],null);return{c(){o&&o.c()},l(l){o&&o.l(l)},m(l,u){o&&o.m(l,u),e=!0},p(l,u){o&&o.p&&(!e||u[2]&134217728)&&cr(o,t,l,l[89],e?fr(t,l[89],u,null):hr(l[89]),null)},i(l){e||(vt(o,l),e=!0)},o(l){Lt(o,l),e=!1},d(l){o&&o.d(l)}}}function rP(i){let e,t,o;const l=[{role:"listbox"},{wrapFocus:i[36]},fo(i[53],"list$")];function u(r){i[76](r)}let m={$$slots:{default:[nP]},$$scope:{ctx:i}};for(let r=0;r<l.length;r+=1)m=Yi(m,l[r]);return i[24]!==void 0&&(m.selectedIndex=i[24]),e=new SL({props:m}),bn.push(()=>Uo(e,"selectedIndex",u)),e.$on("SMUIList:mount",i[77]),{c(){en(e.$$.fragment)},l(r){un(e.$$.fragment,r)},m(r,f){tn(e,r,f),o=!0},p(r,f){const _=f[1]&4194336?xr(l,[l[0],f[1]&32&&{wrapFocus:r[36]},f[1]&4194304&&Eo(fo(r[53],"list$"))]):{};f[2]&134217728&&(_.$$scope={dirty:f,ctx:r}),!t&&f[0]&16777216&&(t=!0,_.selectedIndex=r[24],Vo(()=>t=!1)),e.$set(_)},i(r){o||(vt(e.$$.fragment,r),o=!0)},o(r){Lt(e.$$.fragment,r),o=!1},d(r){nn(e,r)}}}function Nb(i){let e,t;const o=[fo(i[53],"helperText$")];let l={$$slots:{default:[oP]},$$scope:{ctx:i}};for(let u=0;u<o.length;u+=1)l=Yi(l,o[u]);return e=new ZL({props:l}),e.$on("SMUISelectHelperText:id",i[86]),e.$on("SMUISelectHelperText:mount",i[87]),e.$on("SMUISelectHelperText:unmount",i[88]),{c(){en(e.$$.fragment)},l(u){un(e.$$.fragment,u)},m(u,m){tn(e,u,m),t=!0},p(u,m){const r=m[1]&4194304?xr(o,[Eo(fo(u[53],"helperText$"))]):{};m[2]&134217728&&(r.$$scope={dirty:m,ctx:u}),e.$set(r)},i(u){t||(vt(e.$$.fragment,u),t=!0)},o(u){Lt(e.$$.fragment,u),t=!1},d(u){nn(e,u)}}}function oP(i){let e;const t=i[63].helperText,o=ur(t,i,i[89],Tb);return{c(){o&&o.c()},l(l){o&&o.l(l)},m(l,u){o&&o.m(l,u),e=!0},p(l,u){o&&o.p&&(!e||u[2]&134217728)&&cr(o,t,l,l[89],e?fr(t,l[89],u,KL):hr(l[89]),Tb)},i(l){e||(vt(o,l),e=!0)},o(l){Lt(o,l),e=!1},d(l){o&&o.d(l)}}}function sP(i){let e,t,o,l,u,m,r,f,_,b,v,w,x,C,T,S,M,O,V,X,Z,te,J,ie,Ee,Pe,de,Te,ve,_e,ot,it,It,Xe,we,Ce,Re,le,Se,he,me=i[12]&&Db(i),Be=i[7]==="filled"&&Ob(),We=i[7]!=="outlined"&&!i[8]&&(i[9]!=null||i[52].label)&&Fb(i),st=i[7]==="outlined"&&Rb(i);const Ye=i[63].leadingIcon,gt=ur(Ye,i,i[89],Lb);let Mt=[{id:v=i[11]+"-smui-selected-text"},{class:w=sr({[i[19]]:!0,"mdc-select__selected-text":!0})},{role:"button"},{"aria-haspopup":"listbox"},{"aria-labelledby":x=i[11]+"-smui-label"},fo(i[53],"selectedText$")],ri={};for(let ti=0;ti<Mt.length;ti+=1)ri=Yi(ri,Mt[ti]);let ut=[{class:T=sr({[i[17]]:!0,"mdc-select__selected-text-container":!0})},fo(i[53],"selectedTextContainer$")],wt={};for(let ti=0;ti<ut.length;ti+=1)wt=Yi(wt,ut[ti]);let bt=[{class:te=sr({[i[21]]:!0,"mdc-select__dropdown-icon":!0})},fo(i[53],"dropdownIcon$")],Je={};for(let ti=0;ti<bt.length;ti+=1)Je=Yi(Je,bt[ti]);let ei=i[7]!=="outlined"&&i[5]&&zb(i),li=[{class:Ee=sr({[i[15]]:!0,"mdc-select__anchor":!0})},{"aria-required":Pe=i[10]?"true":void 0},{"aria-disabled":de=i[6]?"true":void 0},{"aria-controls":i[31]},{"aria-describedby":i[31]},i[29],fo(i[53],"anchor$")],Qt={};for(let ti=0;ti<li.length;ti+=1)Qt=Yi(Qt,li[ti]);const Si=[{class:sr({[i[22]]:!0,"mdc-select__menu":!0,...i[33]})},{fullWidth:!0},{anchor:!1},{anchorElement:i[34]},{anchorCorner:i[35]},fo(i[53],"menu$")];function Ti(ti){i[78](ti)}let Xt={$$slots:{default:[rP]},$$scope:{ctx:i}};for(let ti=0;ti<Si.length;ti+=1)Xt=Yi(Xt,Si[ti]);i[32]!==void 0&&(Xt.open=i[32]),_e=new wL({props:Xt}),bn.push(()=>Uo(_e,"open",Ti)),_e.$on("SMUIMenu:selected",i[79]),_e.$on("SMUIMenuSurface:closing",i[80]),_e.$on("SMUIMenuSurface:closed",i[81]),_e.$on("SMUIMenuSurface:opened",i[82]);let mi=[{class:it=sr({[i[3]]:!0,"mdc-select":!0,"mdc-select--required":i[10],"mdc-select--disabled":i[6],"mdc-select--filled":i[7]==="filled","mdc-select--outlined":i[7]==="outlined","smui-select--standard":i[7]==="standard","mdc-select--with-leading-icon":i[45](i[13])?i[52].leadingIcon:i[13],"mdc-select--no-label":i[8]||i[9]==null&&!i[52].label,"mdc-select--invalid":i[1],"mdc-select--activated":i[32],"mdc-data-table__pagination-rows-per-page-select":i[46]==="data-table:pagination",...i[26]})},{style:It=Object.entries(i[27]).map(jb).concat([i[4]]).join(" ")},ff(i[53],["input$","anchor$","label$","outline$","selectedTextContainer$","selectedText$","dropdownIcon$","ripple$","menu$","list$","helperText$"])],Zi={};for(let ti=0;ti<mi.length;ti+=1)Zi=Yi(Zi,mi[ti]);let Ci=i[52].helperText&&Nb(i);return{c(){e=Ht("div"),me&&me.c(),t=Wi(),o=Ht("div"),Be&&Be.c(),l=Wi(),We&&We.c(),u=Wi(),st&&st.c(),m=Wi(),gt&&gt.c(),r=Wi(),f=Ht("span"),_=Ht("span"),b=Kn(i[43]),M=Wi(),O=Ht("span"),V=Jp("svg"),X=Jp("polygon"),Z=Jp("polygon"),ie=Wi(),ei&&ei.c(),ve=Wi(),en(_e.$$.fragment),Ce=Wi(),Ci&&Ci.c(),Re=kn(),this.h()},l(ti){e=Gt(ti,"DIV",{class:!0,style:!0});var Me=$t(e);me&&me.l(Me),t=Xi(Me),o=Gt(Me,"DIV",{class:!0,"aria-required":!0,"aria-disabled":!0,"aria-controls":!0,"aria-describedby":!0});var Q=$t(o);Be&&Be.l(Q),l=Xi(Q),We&&We.l(Q),u=Xi(Q),st&&st.l(Q),m=Xi(Q),gt&&gt.l(Q),r=Xi(Q),f=Gt(Q,"SPAN",{class:!0});var ae=$t(f);_=Gt(ae,"SPAN",{id:!0,class:!0,role:!0,"aria-haspopup":!0,"aria-labelledby":!0});var $e=$t(_);b=Jn($e,i[43]),$e.forEach(De),ae.forEach(De),M=Xi(Q),O=Gt(Q,"SPAN",{class:!0});var _t=$t(O);V=Qp(_t,"svg",{class:!0,viewBox:!0,focusable:!0});var Kt=$t(V);X=Qp(Kt,"polygon",{class:!0,stroke:!0,"fill-rule":!0,points:!0}),$t(X).forEach(De),Z=Qp(Kt,"polygon",{class:!0,stroke:!0,"fill-rule":!0,points:!0}),$t(Z).forEach(De),Kt.forEach(De),_t.forEach(De),ie=Xi(Q),ei&&ei.l(Q),Q.forEach(De),ve=Xi(Me),un(_e.$$.fragment,Me),Me.forEach(De),Ce=Xi(ti),Ci&&Ci.l(ti),Re=kn(),this.h()},h(){nr(_,ri),nr(f,wt),qt(X,"class","mdc-select__dropdown-icon-inactive"),qt(X,"stroke","none"),qt(X,"fill-rule","evenodd"),qt(X,"points","7 10 12 15 17 10"),qt(Z,"class","mdc-select__dropdown-icon-active"),qt(Z,"stroke","none"),qt(Z,"fill-rule","evenodd"),qt(Z,"points","7 15 12 10 17 15"),qt(V,"class","mdc-select__dropdown-icon-graphic"),qt(V,"viewBox","7 10 10 5"),qt(V,"focusable","false"),nr(O,Je),nr(o,Qt),nr(e,Zi)},m(ti,Me){jt(ti,e,Me),me&&me.m(e,null),Ut(e,t),Ut(e,o),Be&&Be.m(o,null),Ut(o,l),We&&We.m(o,null),Ut(o,u),st&&st.m(o,null),Ut(o,m),gt&&gt.m(o,null),Ut(o,r),Ut(o,f),Ut(f,_),Ut(_,b),i[69](_),Ut(o,M),Ut(o,O),Ut(O,V),Ut(V,X),Ut(V,Z),Ut(o,ie),ei&&ei.m(o,null),i[71](o),Ut(e,ve),tn(_e,e,null),i[83](e),jt(ti,Ce,Me),Ci&&Ci.m(ti,Me),jt(ti,Re,Me),le=!0,Se||(he=[tr(C=To.call(null,_,i[18])),tr(S=To.call(null,f,i[16])),tr(J=To.call(null,O,i[20])),tr(Te=To.call(null,o,i[14])),xn(o,"focus",i[72]),xn(o,"blur",i[73]),xn(o,"click",i[74]),xn(o,"keydown",i[75]),xn(o,"focus",i[64]),xn(o,"blur",i[65]),tr(Xe=mf.call(null,e,{ripple:i[7]==="filled",unbounded:!1,addClass:i[49],removeClass:i[50],addStyle:i[51]})),tr(yL.call(null,e,{addClass:i[49],removeClass:i[50]})),tr(we=To.call(null,e,i[2])),tr(i[44].call(null,e)),xn(e,"SMUISelectLeadingIcon:mount",i[84]),xn(e,"SMUISelectLeadingIcon:unmount",i[85])],Se=!0)},p(ti,Me){ti[12]?me?me.p(ti,Me):(me=Db(ti),me.c(),me.m(e,t)):me&&(me.d(1),me=null),ti[7]==="filled"?Be||(Be=Ob(),Be.c(),Be.m(o,l)):Be&&(Be.d(1),Be=null),ti[7]!=="outlined"&&!ti[8]&&(ti[9]!=null||ti[52].label)?We?(We.p(ti,Me),Me[0]&896|Me[1]&2097152&&vt(We,1)):(We=Fb(ti),We.c(),vt(We,1),We.m(o,u)):We&&(Fr(),Lt(We,1,1,()=>{We=null}),Or()),ti[7]==="outlined"?st?(st.p(ti,Me),Me[0]&128&&vt(st,1)):(st=Rb(ti),st.c(),vt(st,1),st.m(o,m)):st&&(Fr(),Lt(st,1,1,()=>{st=null}),Or()),gt&&gt.p&&(!le||Me[2]&134217728)&&cr(gt,Ye,ti,ti[89],le?fr(Ye,ti[89],Me,JL):hr(ti[89]),Lb),(!le||Me[1]&4096)&&Os(b,ti[43]),nr(_,ri=xr(Mt,[(!le||Me[0]&2048&&v!==(v=ti[11]+"-smui-selected-text"))&&{id:v},(!le||Me[0]&524288&&w!==(w=sr({[ti[19]]:!0,"mdc-select__selected-text":!0})))&&{class:w},{role:"button"},{"aria-haspopup":"listbox"},(!le||Me[0]&2048&&x!==(x=ti[11]+"-smui-label"))&&{"aria-labelledby":x},Me[1]&4194304&&fo(ti[53],"selectedText$")])),C&&so(C.update)&&Me[0]&262144&&C.update.call(null,ti[18]),nr(f,wt=xr(ut,[(!le||Me[0]&131072&&T!==(T=sr({[ti[17]]:!0,"mdc-select__selected-text-container":!0})))&&{class:T},Me[1]&4194304&&fo(ti[53],"selectedTextContainer$")])),S&&so(S.update)&&Me[0]&65536&&S.update.call(null,ti[16]),nr(O,Je=xr(bt,[(!le||Me[0]&2097152&&te!==(te=sr({[ti[21]]:!0,"mdc-select__dropdown-icon":!0})))&&{class:te},Me[1]&4194304&&fo(ti[53],"dropdownIcon$")])),J&&so(J.update)&&Me[0]&1048576&&J.update.call(null,ti[20]),ti[7]!=="outlined"&&ti[5]?ei?(ei.p(ti,Me),Me[0]&160&&vt(ei,1)):(ei=zb(ti),ei.c(),vt(ei,1),ei.m(o,null)):ei&&(Fr(),Lt(ei,1,1,()=>{ei=null}),Or()),nr(o,Qt=xr(li,[(!le||Me[0]&32768&&Ee!==(Ee=sr({[ti[15]]:!0,"mdc-select__anchor":!0})))&&{class:Ee},(!le||Me[0]&1024&&Pe!==(Pe=ti[10]?"true":void 0))&&{"aria-required":Pe},(!le||Me[0]&64&&de!==(de=ti[6]?"true":void 0))&&{"aria-disabled":de},(!le||Me[1]&1)&&{"aria-controls":ti[31]},(!le||Me[1]&1)&&{"aria-describedby":ti[31]},Me[0]&536870912&&ti[29],Me[1]&4194304&&fo(ti[53],"anchor$")])),Te&&so(Te.update)&&Me[0]&16384&&Te.update.call(null,ti[14]);const Q=Me[0]&4194304|Me[1]&4194332?xr(Si,[Me[0]&4194304|Me[1]&4&&{class:sr({[ti[22]]:!0,"mdc-select__menu":!0,...ti[33]})},Si[1],Si[2],Me[1]&8&&{anchorElement:ti[34]},Me[1]&16&&{anchorCorner:ti[35]},Me[1]&4194304&&Eo(fo(ti[53],"menu$"))]):{};Me[0]&16777216|Me[1]&4194400|Me[2]&134217728&&(Q.$$scope={dirty:Me,ctx:ti}),!ot&&Me[1]&2&&(ot=!0,Q.open=ti[32],Vo(()=>ot=!1)),_e.$set(Q),nr(e,Zi=xr(mi,[(!le||Me[0]&67119050|Me[1]&2097154&&it!==(it=sr({[ti[3]]:!0,"mdc-select":!0,"mdc-select--required":ti[10],"mdc-select--disabled":ti[6],"mdc-select--filled":ti[7]==="filled","mdc-select--outlined":ti[7]==="outlined","smui-select--standard":ti[7]==="standard","mdc-select--with-leading-icon":ti[45](ti[13])?ti[52].leadingIcon:ti[13],"mdc-select--no-label":ti[8]||ti[9]==null&&!ti[52].label,"mdc-select--invalid":ti[1],"mdc-select--activated":ti[32],"mdc-data-table__pagination-rows-per-page-select":ti[46]==="data-table:pagination",...ti[26]})))&&{class:it},(!le||Me[0]&134217744&&It!==(It=Object.entries(ti[27]).map(jb).concat([ti[4]]).join(" ")))&&{style:It},Me[1]&4194304&&ff(ti[53],["input$","anchor$","label$","outline$","selectedTextContainer$","selectedText$","dropdownIcon$","ripple$","menu$","list$","helperText$"])])),Xe&&so(Xe.update)&&Me[0]&128&&Xe.update.call(null,{ripple:ti[7]==="filled",unbounded:!1,addClass:ti[49],removeClass:ti[50],addStyle:ti[51]}),we&&so(we.update)&&Me[0]&4&&we.update.call(null,ti[2]),ti[52].helperText?Ci?(Ci.p(ti,Me),Me[1]&2097152&&vt(Ci,1)):(Ci=Nb(ti),Ci.c(),vt(Ci,1),Ci.m(Re.parentNode,Re)):Ci&&(Fr(),Lt(Ci,1,1,()=>{Ci=null}),Or())},i(ti){le||(vt(We),vt(st),vt(gt,ti),vt(ei),vt(_e.$$.fragment,ti),vt(Ci),le=!0)},o(ti){Lt(We),Lt(st),Lt(gt,ti),Lt(ei),Lt(_e.$$.fragment,ti),Lt(Ci),le=!1},d(ti){ti&&De(e),me&&me.d(),Be&&Be.d(),We&&We.d(),st&&st.d(),gt&&gt.d(ti),i[69](null),ei&&ei.d(),i[71](null),nn(_e),i[83](null),ti&&De(Ce),Ci&&Ci.d(ti),ti&&De(Re),Se=!1,Lo(he)}}}let aP=0;function lP(i){const e=i.currentTarget.getBoundingClientRect();return(uP(i)?i.touches[0].clientX:i.clientX)-e.left}function uP(i){return"touches"in i}const jb=([i,e])=>`${i}: ${e};`;function cP(i,e,t){const o=["use","class","style","ripple","disabled","variant","noLabel","label","value","key","dirty","invalid","updateInvalid","required","inputId","hiddenInput","withLeadingIcon","anchor$use","anchor$class","selectedTextContainer$use","selectedTextContainer$class","selectedText$use","selectedText$class","dropdownIcon$use","dropdownIcon$class","menu$class","getUseDefaultValidation","setUseDefaultValidation","focus","layout","getElement"];let l=Yn(e,o),u,m,{$$slots:r={},$$scope:f}=e;const _=hg(r),b=_o(yo());let v=()=>{};function w(xt){return xt===v}let{use:x=[]}=e,{class:C=""}=e,{style:T=""}=e,{ripple:S=!0}=e,{disabled:M=!1}=e,{variant:O="standard"}=e,{noLabel:V=!1}=e,{label:X=void 0}=e,{value:Z=""}=e,{key:te=xt=>xt}=e,{dirty:J=!1}=e,{invalid:ie=v}=e,{updateInvalid:Ee=w(ie)}=e;const Pe=w(ie);w(ie)&&(ie=!1);let{required:de=!1}=e,{inputId:Te="SMUI-select-"+aP++}=e,{hiddenInput:ve=!1}=e,{withLeadingIcon:_e=v}=e,{anchor$use:ot=[]}=e,{anchor$class:it=""}=e,{selectedTextContainer$use:It=[]}=e,{selectedTextContainer$class:Xe=""}=e,{selectedText$use:we=[]}=e,{selectedText$class:Ce=""}=e,{dropdownIcon$use:Re=[]}=e,{dropdownIcon$class:le=""}=e,{menu$class:Se=""}=e,he,me,Be={},We={},st,Ye={},gt,Mt=-1,ri,ut=xs("SMUI:addLayoutListener"),wt,bt=!1,Je={},ei,li,Qt=!1,Si,Ti=xs("SMUI:select:context"),Xt,mi,Zi,Ci,ti;as("SMUI:list:role",""),as("SMUI:list:nav",!1);const Me=Nl("");Yo(i,Me,xt=>t(43,u=xt)),as("SMUI:select:selectedText",Me);const Q=Nl(Z);Yo(i,Q,xt=>t(91,m=xt)),as("SMUI:select:value",Q);let ae=Mt;ut&&(wt=ut(dn)),ks(()=>(t(23,me=new hL({setSelectedText:xt=>{vl(Me,u=xt,u)},isSelectAnchorFocused:()=>document.activeElement===st,getSelectAnchorAttr:fn,setSelectAnchorAttr:Bi,removeSelectAnchorAttr:Ki,addMenuClass:wn,removeMenuClass:Ln,openMenu:()=>{t(32,bt=!0)},closeMenu:()=>{t(32,bt=!1)},getAnchorElement:()=>st,setMenuAnchorElement:xt=>{t(34,ei=xt)},setMenuAnchorCorner:xt=>{t(35,li=xt)},setMenuWrapFocus:xt=>{t(36,Qt=xt)},getSelectedIndex:()=>Mt,setSelectedIndex:xt=>{t(62,ae=xt),t(24,Mt=xt),t(0,Z=Hn()[Mt])},focusMenuItemAtIndex:xt=>{Si.focusItemAtIndex(xt)},getMenuItemCount:()=>Si.items.length,getMenuItemValues:()=>Hn().map(te),getMenuItemTextAtIndex:xt=>Si.getPrimaryTextAtIndex(xt),isTypeaheadInProgress:()=>Si.typeaheadInProgress,typeaheadMatchItem:(xt,Tn)=>Si.typeaheadMatchItem(xt,Tn),addClass:_t,removeClass:Kt,hasClass:$e,setRippleCenter:xt=>Ci&&Ci.setRippleCenter(xt),activateBottomLine:()=>Ci&&Ci.activate(),deactivateBottomLine:()=>Ci&&Ci.deactivate(),notifyChange:xt=>{t(54,J=!0),Ee&&t(1,ie=!me.isValid()),Do(gn(),"SMUISelect:change",{value:Z,index:Mt},void 0,!0)},hasOutline:()=>!!ti,notchOutline:xt=>ti&&ti.notch(xt),closeOutline:()=>ti&&ti.closeNotch(),hasLabel:()=>!!Zi,floatLabel:xt=>Zi&&Zi.float(xt),getLabelWidth:()=>Zi?Zi.getWidth():0,setLabelRequired:xt=>Zi&&Zi.setRequired(xt)},{get helperText(){return mi},get leadingIcon(){return Xt}})),t(24,Mt=Hn().indexOf(Z)),me.init(),Zr(Pe),()=>{me.destroy()})),nh(()=>{wt&&wt()});function $e(xt){return xt in Be?Be[xt]:gn().classList.contains(xt)}function _t(xt){Be[xt]||t(26,Be[xt]=!0,Be)}function Kt(xt){(!(xt in Be)||Be[xt])&&t(26,Be[xt]=!1,Be)}function di(xt,Tn){We[xt]!=Tn&&(Tn===""||Tn==null?(delete We[xt],t(27,We)):t(27,We[xt]=Tn,We))}function wn(xt){Je[xt]||t(33,Je[xt]=!0,Je)}function Ln(xt){(!(xt in Je)||Je[xt])&&t(33,Je[xt]=!1,Je)}function fn(xt){var Tn;return xt in Ye?(Tn=Ye[xt])!==null&&Tn!==void 0?Tn:null:gn().getAttribute(xt)}function Bi(xt,Tn){Ye[xt]!==Tn&&t(29,Ye[xt]=Tn,Ye)}function Ki(xt){(!(xt in Ye)||Ye[xt]!=null)&&t(29,Ye[xt]=void 0,Ye)}function Hn(){return Si.getOrderedList().map(xt=>xt.getValue())}function Gn(){return me.getUseDefaultValidation()}function Zr(xt){me.setUseDefaultValidation(xt)}function zn(){st.focus()}function dn(){me.layout()}function gn(){return he}function on(xt){Yf.call(this,i,xt)}function Sr(xt){Yf.call(this,i,xt)}function Wn(xt){bn[xt?"unshift":"push"](()=>{Zi=xt,t(40,Zi)})}function gr(xt){bn[xt?"unshift":"push"](()=>{Zi=xt,t(40,Zi)})}function Kr(xt){bn[xt?"unshift":"push"](()=>{ti=xt,t(42,ti)})}function an(xt){bn[xt?"unshift":"push"](()=>{gt=xt,t(30,gt)})}function He(xt){bn[xt?"unshift":"push"](()=>{Ci=xt,t(41,Ci)})}function wo(xt){bn[xt?"unshift":"push"](()=>{st=xt,t(28,st)})}const xo=()=>me&&me.handleFocus(),co=()=>me&&me.handleBlur(),Le=xt=>{st.focus(),me&&me.handleClick(lP(xt))},Ie=xt=>me&&me.handleKeydown(xt);function qe(xt){Mt=xt,t(24,Mt)}const ct=xt=>t(37,Si=xt.detail);function dt(xt){bt=xt,t(32,bt)}const Bt=xt=>me&&me.handleMenuItemAction(xt.detail.index),Ge=()=>me&&me.handleMenuClosing(),Yt=()=>me&&me.handleMenuClosed(),Ft=()=>me&&me.handleMenuOpened();function oi(xt){bn[xt?"unshift":"push"](()=>{he=xt,t(25,he)})}const yt=xt=>t(38,Xt=xt.detail),Ri=()=>t(38,Xt=void 0),Ii=xt=>t(31,ri=xt.detail),En=xt=>t(39,mi=xt.detail),Sn=()=>{t(31,ri=void 0),t(39,mi=void 0)};return i.$$set=xt=>{e=Yi(Yi({},e),po(xt)),t(53,l=Yn(e,o)),"use"in xt&&t(2,x=xt.use),"class"in xt&&t(3,C=xt.class),"style"in xt&&t(4,T=xt.style),"ripple"in xt&&t(5,S=xt.ripple),"disabled"in xt&&t(6,M=xt.disabled),"variant"in xt&&t(7,O=xt.variant),"noLabel"in xt&&t(8,V=xt.noLabel),"label"in xt&&t(9,X=xt.label),"value"in xt&&t(0,Z=xt.value),"key"in xt&&t(55,te=xt.key),"dirty"in xt&&t(54,J=xt.dirty),"invalid"in xt&&t(1,ie=xt.invalid),"updateInvalid"in xt&&t(56,Ee=xt.updateInvalid),"required"in xt&&t(10,de=xt.required),"inputId"in xt&&t(11,Te=xt.inputId),"hiddenInput"in xt&&t(12,ve=xt.hiddenInput),"withLeadingIcon"in xt&&t(13,_e=xt.withLeadingIcon),"anchor$use"in xt&&t(14,ot=xt.anchor$use),"anchor$class"in xt&&t(15,it=xt.anchor$class),"selectedTextContainer$use"in xt&&t(16,It=xt.selectedTextContainer$use),"selectedTextContainer$class"in xt&&t(17,Xe=xt.selectedTextContainer$class),"selectedText$use"in xt&&t(18,we=xt.selectedText$use),"selectedText$class"in xt&&t(19,Ce=xt.selectedText$class),"dropdownIcon$use"in xt&&t(20,Re=xt.dropdownIcon$use),"dropdownIcon$class"in xt&&t(21,le=xt.dropdownIcon$class),"menu$class"in xt&&t(22,Se=xt.menu$class),"$$scope"in xt&&t(89,f=xt.$$scope)},i.$$.update=()=>{if(i.$$.dirty[0]&25165825|i.$$.dirty[2]&1&&ae!==Mt)if(t(62,ae=Mt),me)me.setSelectedIndex(Mt,!1,!0);else{const xt=Hn();Z!==xt[Mt]&&t(0,Z=xt[Mt])}i.$$.dirty[0]&1&&vl(Q,m=Z,m),i.$$.dirty[0]&8388609|i.$$.dirty[1]&16777216&&me&&me.getValue()!==te(Z)&&me.setValue(te(Z)),i.$$.dirty[0]&8388672&&me&&me.getDisabled()!==M&&me.setDisabled(M),i.$$.dirty[0]&8388610|i.$$.dirty[1]&41943040&&me&&J&&me.isValid()!==!ie&&(Ee?t(1,ie=!me.isValid()):me.setValid(!ie)),i.$$.dirty[0]&8389632&&me&&me.getRequired()!==de&&me.setRequired(de)},[Z,ie,x,C,T,S,M,O,V,X,de,Te,ve,_e,ot,it,It,Xe,we,Ce,Re,le,Se,me,Mt,he,Be,We,st,Ye,gt,ri,bt,Je,ei,li,Qt,Si,Xt,mi,Zi,Ci,ti,u,b,w,Ti,Me,Q,_t,Kt,di,_,l,J,te,Ee,Gn,Zr,zn,dn,gn,ae,r,on,Sr,Wn,gr,Kr,an,He,wo,xo,co,Le,Ie,qe,ct,dt,Bt,Ge,Yt,Ft,oi,yt,Ri,Ii,En,Sn,f]}class w3 extends br{constructor(e){super(),wr(this,e,cP,sP,mr,{use:2,class:3,style:4,ripple:5,disabled:6,variant:7,noLabel:8,label:9,value:0,key:55,dirty:54,invalid:1,updateInvalid:56,required:10,inputId:11,hiddenInput:12,withLeadingIcon:13,anchor$use:14,anchor$class:15,selectedTextContainer$use:16,selectedTextContainer$class:17,selectedText$use:18,selectedText$class:19,dropdownIcon$use:20,dropdownIcon$class:21,menu$class:22,getUseDefaultValidation:57,setUseDefaultValidation:58,focus:59,layout:60,getElement:61},null,[-1,-1,-1,-1])}get getUseDefaultValidation(){return this.$$.ctx[57]}get setUseDefaultValidation(){return this.$$.ctx[58]}get focus(){return this.$$.ctx[59]}get layout(){return this.$$.ctx[60]}get getElement(){return this.$$.ctx[61]}}function hP(i){let e;const t=i[11].default,o=ur(t,i,i[13],null);return{c(){o&&o.c()},l(l){o&&o.l(l)},m(l,u){o&&o.m(l,u),e=!0},p(l,u){o&&o.p&&(!e||u&8192)&&cr(o,t,l,l[13],e?fr(t,l[13],u,null):hr(l[13]),null)},i(l){e||(vt(o,l),e=!0)},o(l){Lt(o,l),e=!1},d(l){o&&o.d(l)}}}function fP(i){let e,t;const o=[{use:i[3]},{"data-value":i[0]},{value:i[0]},{selected:i[2]},i[6]];let l={$$slots:{default:[hP]},$$scope:{ctx:i}};for(let u=0;u<o.length;u+=1)l=Yi(l,o[u]);return e=new OL({props:l}),i[12](e),{c(){en(e.$$.fragment)},l(u){un(e.$$.fragment,u)},m(u,m){tn(e,u,m),t=!0},p(u,[m]){const r=m&77?xr(o,[m&8&&{use:u[3]},m&1&&{"data-value":u[0]},m&1&&{value:u[0]},m&4&&{selected:u[2]},m&64&&Eo(u[6])]):{};m&8192&&(r.$$scope={dirty:m,ctx:u}),e.$set(r)},i(u){t||(vt(e.$$.fragment,u),t=!0)},o(u){Lt(e.$$.fragment,u),t=!1},d(u){i[12](null),nn(e,u)}}}function dP(i,e,t){let o,l;const u=["use","class","value","getElement"];let m=Yn(e,u),r,f,{$$slots:_={},$$scope:b}=e;const v=_o(yo());let{use:w=[]}=e;const x="";let{value:C=""}=e,T;const S=xs("SMUI:select:selectedText");Yo(i,S,Z=>t(14,r=Z));const M=xs("SMUI:select:value");Yo(i,M,Z=>t(10,f=Z)),as("SMUI:list:item:role","option"),ks(O),nh(O);function O(){l&&T&&vl(S,r=T.getPrimaryText(),r)}function V(){return T.getElement()}function X(Z){bn[Z?"unshift":"push"](()=>{T=Z,t(1,T)})}return i.$$set=Z=>{e=Yi(Yi({},e),po(Z)),t(6,m=Yn(e,u)),"use"in Z&&t(7,w=Z.use),"value"in Z&&t(0,C=Z.value),"$$scope"in Z&&t(13,b=Z.$$scope)},i.$$.update=()=>{i.$$.dirty&128&&t(3,o=[v,...w]),i.$$.dirty&1025&&t(2,l=C!=null&&C!==""&&f===C)},[C,T,l,o,S,M,m,w,x,V,f,_,X,b]}class pP extends br{constructor(e){super(),wr(this,e,dP,fP,mr,{use:7,class:8,value:0,getElement:9})}get class(){return this.$$.ctx[8]}get getElement(){return this.$$.ctx[9]}}const x3=pP;/**
 * @license
 * Copyright 2016 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var S2={ARIA_CONTROLS:"aria-controls",ARIA_DESCRIBEDBY:"aria-describedby",INPUT_SELECTOR:".mdc-text-field__input",LABEL_SELECTOR:".mdc-floating-label",LEADING_ICON_SELECTOR:".mdc-text-field__icon--leading",LINE_RIPPLE_SELECTOR:".mdc-line-ripple",OUTLINE_SELECTOR:".mdc-notched-outline",PREFIX_SELECTOR:".mdc-text-field__affix--prefix",SUFFIX_SELECTOR:".mdc-text-field__affix--suffix",TRAILING_ICON_SELECTOR:".mdc-text-field__icon--trailing"},mP={DISABLED:"mdc-text-field--disabled",FOCUSED:"mdc-text-field--focused",HELPER_LINE:"mdc-text-field-helper-line",INVALID:"mdc-text-field--invalid",LABEL_FLOATING:"mdc-text-field--label-floating",NO_LABEL:"mdc-text-field--no-label",OUTLINED:"mdc-text-field--outlined",ROOT:"mdc-text-field",TEXTAREA:"mdc-text-field--textarea",WITH_LEADING_ICON:"mdc-text-field--with-leading-icon",WITH_TRAILING_ICON:"mdc-text-field--with-trailing-icon",WITH_INTERNAL_COUNTER:"mdc-text-field--with-internal-counter"},Ub={LABEL_SCALE:.75},gP=["pattern","min","max","required","step","minlength","maxlength"],yP=["color","date","datetime-local","month","range","time","week"];/**
 * @license
 * Copyright 2016 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var Vb=["mousedown","touchstart"],qb=["click","keydown"],_P=function(i){jl(e,i);function e(t,o){o===void 0&&(o={});var l=i.call(this,fs(fs({},e.defaultAdapter),t))||this;return l.isFocused=!1,l.receivedUserInput=!1,l.valid=!0,l.useNativeValidation=!0,l.validateOnValueChange=!0,l.helperText=o.helperText,l.characterCounter=o.characterCounter,l.leadingIcon=o.leadingIcon,l.trailingIcon=o.trailingIcon,l.inputFocusHandler=function(){l.activateFocus()},l.inputBlurHandler=function(){l.deactivateFocus()},l.inputInputHandler=function(){l.handleInput()},l.setPointerXOffset=function(u){l.setTransformOrigin(u)},l.textFieldInteractionHandler=function(){l.handleTextFieldInteraction()},l.validationAttributeChangeHandler=function(u){l.handleValidationAttributeChange(u)},l}return Object.defineProperty(e,"cssClasses",{get:function(){return mP},enumerable:!1,configurable:!0}),Object.defineProperty(e,"strings",{get:function(){return S2},enumerable:!1,configurable:!0}),Object.defineProperty(e,"numbers",{get:function(){return Ub},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"shouldAlwaysFloat",{get:function(){var t=this.getNativeInput().type;return yP.indexOf(t)>=0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"shouldFloat",{get:function(){return this.shouldAlwaysFloat||this.isFocused||!!this.getValue()||this.isBadInput()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"shouldShake",{get:function(){return!this.isFocused&&!this.isValid()&&!!this.getValue()},enumerable:!1,configurable:!0}),Object.defineProperty(e,"defaultAdapter",{get:function(){return{addClass:function(){},removeClass:function(){},hasClass:function(){return!0},setInputAttr:function(){},removeInputAttr:function(){},registerTextFieldInteractionHandler:function(){},deregisterTextFieldInteractionHandler:function(){},registerInputInteractionHandler:function(){},deregisterInputInteractionHandler:function(){},registerValidationAttributeChangeHandler:function(){return new MutationObserver(function(){})},deregisterValidationAttributeChangeHandler:function(){},getNativeInput:function(){return null},isFocused:function(){return!1},activateLineRipple:function(){},deactivateLineRipple:function(){},setLineRippleTransformOrigin:function(){},shakeLabel:function(){},floatLabel:function(){},setLabelRequired:function(){},hasLabel:function(){return!1},getLabelWidth:function(){return 0},hasOutline:function(){return!1},notchOutline:function(){},closeOutline:function(){}}},enumerable:!1,configurable:!0}),e.prototype.init=function(){var t,o,l,u;this.adapter.hasLabel()&&this.getNativeInput().required&&this.adapter.setLabelRequired(!0),this.adapter.isFocused()?this.inputFocusHandler():this.adapter.hasLabel()&&this.shouldFloat&&(this.notchOutline(!0),this.adapter.floatLabel(!0),this.styleFloating(!0)),this.adapter.registerInputInteractionHandler("focus",this.inputFocusHandler),this.adapter.registerInputInteractionHandler("blur",this.inputBlurHandler),this.adapter.registerInputInteractionHandler("input",this.inputInputHandler);try{for(var m=Ih(Vb),r=m.next();!r.done;r=m.next()){var f=r.value;this.adapter.registerInputInteractionHandler(f,this.setPointerXOffset)}}catch(v){t={error:v}}finally{try{r&&!r.done&&(o=m.return)&&o.call(m)}finally{if(t)throw t.error}}try{for(var _=Ih(qb),b=_.next();!b.done;b=_.next()){var f=b.value;this.adapter.registerTextFieldInteractionHandler(f,this.textFieldInteractionHandler)}}catch(v){l={error:v}}finally{try{b&&!b.done&&(u=_.return)&&u.call(_)}finally{if(l)throw l.error}}this.validationObserver=this.adapter.registerValidationAttributeChangeHandler(this.validationAttributeChangeHandler),this.setcharacterCounter(this.getValue().length)},e.prototype.destroy=function(){var t,o,l,u;this.adapter.deregisterInputInteractionHandler("focus",this.inputFocusHandler),this.adapter.deregisterInputInteractionHandler("blur",this.inputBlurHandler),this.adapter.deregisterInputInteractionHandler("input",this.inputInputHandler);try{for(var m=Ih(Vb),r=m.next();!r.done;r=m.next()){var f=r.value;this.adapter.deregisterInputInteractionHandler(f,this.setPointerXOffset)}}catch(v){t={error:v}}finally{try{r&&!r.done&&(o=m.return)&&o.call(m)}finally{if(t)throw t.error}}try{for(var _=Ih(qb),b=_.next();!b.done;b=_.next()){var f=b.value;this.adapter.deregisterTextFieldInteractionHandler(f,this.textFieldInteractionHandler)}}catch(v){l={error:v}}finally{try{b&&!b.done&&(u=_.return)&&u.call(_)}finally{if(l)throw l.error}}this.adapter.deregisterValidationAttributeChangeHandler(this.validationObserver)},e.prototype.handleTextFieldInteraction=function(){var t=this.adapter.getNativeInput();t&&t.disabled||(this.receivedUserInput=!0)},e.prototype.handleValidationAttributeChange=function(t){var o=this;t.some(function(l){return gP.indexOf(l)>-1?(o.styleValidity(!0),o.adapter.setLabelRequired(o.getNativeInput().required),!0):!1}),t.indexOf("maxlength")>-1&&this.setcharacterCounter(this.getValue().length)},e.prototype.notchOutline=function(t){if(!(!this.adapter.hasOutline()||!this.adapter.hasLabel()))if(t){var o=this.adapter.getLabelWidth()*Ub.LABEL_SCALE;this.adapter.notchOutline(o)}else this.adapter.closeOutline()},e.prototype.activateFocus=function(){this.isFocused=!0,this.styleFocused(this.isFocused),this.adapter.activateLineRipple(),this.adapter.hasLabel()&&(this.notchOutline(this.shouldFloat),this.adapter.floatLabel(this.shouldFloat),this.styleFloating(this.shouldFloat),this.adapter.shakeLabel(this.shouldShake)),this.helperText&&(this.helperText.isPersistent()||!this.helperText.isValidation()||!this.valid)&&this.helperText.showToScreenReader()},e.prototype.setTransformOrigin=function(t){if(!(this.isDisabled()||this.adapter.hasOutline())){var o=t.touches,l=o?o[0]:t,u=l.target.getBoundingClientRect(),m=l.clientX-u.left;this.adapter.setLineRippleTransformOrigin(m)}},e.prototype.handleInput=function(){this.autoCompleteFocus(),this.setcharacterCounter(this.getValue().length)},e.prototype.autoCompleteFocus=function(){this.receivedUserInput||this.activateFocus()},e.prototype.deactivateFocus=function(){this.isFocused=!1,this.adapter.deactivateLineRipple();var t=this.isValid();this.styleValidity(t),this.styleFocused(this.isFocused),this.adapter.hasLabel()&&(this.notchOutline(this.shouldFloat),this.adapter.floatLabel(this.shouldFloat),this.styleFloating(this.shouldFloat),this.adapter.shakeLabel(this.shouldShake)),this.shouldFloat||(this.receivedUserInput=!1)},e.prototype.getValue=function(){return this.getNativeInput().value},e.prototype.setValue=function(t){if(this.getValue()!==t&&(this.getNativeInput().value=t),this.setcharacterCounter(t.length),this.validateOnValueChange){var o=this.isValid();this.styleValidity(o)}this.adapter.hasLabel()&&(this.notchOutline(this.shouldFloat),this.adapter.floatLabel(this.shouldFloat),this.styleFloating(this.shouldFloat),this.validateOnValueChange&&this.adapter.shakeLabel(this.shouldShake))},e.prototype.isValid=function(){return this.useNativeValidation?this.isNativeInputValid():this.valid},e.prototype.setValid=function(t){this.valid=t,this.styleValidity(t);var o=!t&&!this.isFocused&&!!this.getValue();this.adapter.hasLabel()&&this.adapter.shakeLabel(o)},e.prototype.setValidateOnValueChange=function(t){this.validateOnValueChange=t},e.prototype.getValidateOnValueChange=function(){return this.validateOnValueChange},e.prototype.setUseNativeValidation=function(t){this.useNativeValidation=t},e.prototype.isDisabled=function(){return this.getNativeInput().disabled},e.prototype.setDisabled=function(t){this.getNativeInput().disabled=t,this.styleDisabled(t)},e.prototype.setHelperTextContent=function(t){this.helperText&&this.helperText.setContent(t)},e.prototype.setLeadingIconAriaLabel=function(t){this.leadingIcon&&this.leadingIcon.setAriaLabel(t)},e.prototype.setLeadingIconContent=function(t){this.leadingIcon&&this.leadingIcon.setContent(t)},e.prototype.setTrailingIconAriaLabel=function(t){this.trailingIcon&&this.trailingIcon.setAriaLabel(t)},e.prototype.setTrailingIconContent=function(t){this.trailingIcon&&this.trailingIcon.setContent(t)},e.prototype.setcharacterCounter=function(t){if(!!this.characterCounter){var o=this.getNativeInput().maxLength;if(o===-1)throw new Error("MDCTextFieldFoundation: Expected maxlength html property on text input or textarea.");this.characterCounter.setCounterValue(t,o)}},e.prototype.isBadInput=function(){return this.getNativeInput().validity.badInput||!1},e.prototype.isNativeInputValid=function(){return this.getNativeInput().validity.valid},e.prototype.styleValidity=function(t){var o=e.cssClasses.INVALID;if(t?this.adapter.removeClass(o):this.adapter.addClass(o),this.helperText){this.helperText.setValidity(t);var l=this.helperText.isValidation();if(!l)return;var u=this.helperText.isVisible(),m=this.helperText.getId();u&&m?this.adapter.setInputAttr(S2.ARIA_DESCRIBEDBY,m):this.adapter.removeInputAttr(S2.ARIA_DESCRIBEDBY)}},e.prototype.styleFocused=function(t){var o=e.cssClasses.FOCUSED;t?this.adapter.addClass(o):this.adapter.removeClass(o)},e.prototype.styleDisabled=function(t){var o=e.cssClasses,l=o.DISABLED,u=o.INVALID;t?(this.adapter.addClass(l),this.adapter.removeClass(u)):this.adapter.removeClass(l),this.leadingIcon&&this.leadingIcon.setDisabled(t),this.trailingIcon&&this.trailingIcon.setDisabled(t)},e.prototype.styleFloating=function(t){var o=e.cssClasses.LABEL_FLOATING;t?this.adapter.addClass(o):this.adapter.removeClass(o)},e.prototype.getNativeInput=function(){var t=this.adapter?this.adapter.getNativeInput():null;return t||{disabled:!1,maxLength:-1,required:!1,type:"input",validity:{badInput:!1,valid:!0},value:""}},e}(oc);const vP=bl({class:"mdc-text-field-helper-line",component:tp}),bP=bl({class:"mdc-text-field__affix mdc-text-field__affix--prefix",component:yf}),wP=bl({class:"mdc-text-field__affix mdc-text-field__affix--suffix",component:yf});function xP(i){let e,t,o,l,u,m=[{class:t=sr({[i[1]]:!0,"mdc-text-field__input":!0})},{type:i[2]},{placeholder:i[3]},i[4],i[6],i[10]],r={};for(let f=0;f<m.length;f+=1)r=Yi(r,m[f]);return{c(){e=Ht("input"),this.h()},l(f){e=Gt(f,"INPUT",{class:!0,type:!0,placeholder:!0}),this.h()},h(){nr(e,r)},m(f,_){jt(f,e,_),e.autofocus&&e.focus(),i[26](e),l||(u=[tr(o=To.call(null,e,i[0])),tr(i[7].call(null,e)),xn(e,"input",i[27]),xn(e,"change",i[9]),xn(e,"blur",i[24]),xn(e,"focus",i[25])],l=!0)},p(f,[_]){nr(e,r=xr(m,[_&2&&t!==(t=sr({[f[1]]:!0,"mdc-text-field__input":!0}))&&{class:t},_&4&&{type:f[2]},_&8&&{placeholder:f[3]},_&16&&f[4],_&64&&f[6],_&1024&&f[10]])),o&&so(o.update)&&_&1&&o.update.call(null,f[0])},i:go,o:go,d(f){f&&De(e),i[26](null),l=!1,Lo(u)}}}function AP(i){if(i===""){const e=new Number(Number.NaN);return e.length=0,e}return+i}function kP(i,e,t){const o=["use","class","type","placeholder","value","files","dirty","invalid","updateInvalid","emptyValueNull","emptyValueUndefined","getAttr","addAttr","removeAttr","focus","blur","getElement"];let l=Yn(e,o);const u=_o(yo());let m=()=>{};function r(we){return we===m}let{use:f=[]}=e,{class:_=""}=e,{type:b="text"}=e,{placeholder:v=" "}=e,{value:w=m}=e;const x=r(w);x&&(w="");let{files:C=null}=e,{dirty:T=!1}=e,{invalid:S=!1}=e,{updateInvalid:M=!0}=e,{emptyValueNull:O=w===null}=e;x&&O&&(w=null);let{emptyValueUndefined:V=w===void 0}=e;x&&V&&(w=void 0);let X,Z={},te={};ks(()=>{M&&t(14,S=X.matches(":invalid"))});function J(we){if(b==="file"){t(12,C=we.currentTarget.files);return}if(we.currentTarget.value===""&&O){t(11,w=null);return}if(we.currentTarget.value===""&&V){t(11,w=void 0);return}switch(b){case"number":case"range":t(11,w=AP(we.currentTarget.value));break;default:t(11,w=we.currentTarget.value);break}}function ie(we){(b==="file"||b==="range")&&J(we),t(13,T=!0),M&&t(14,S=X.matches(":invalid"))}function Ee(we){var Ce;return we in Z?(Ce=Z[we])!==null&&Ce!==void 0?Ce:null:_e().getAttribute(we)}function Pe(we,Ce){Z[we]!==Ce&&t(6,Z[we]=Ce,Z)}function de(we){(!(we in Z)||Z[we]!=null)&&t(6,Z[we]=void 0,Z)}function Te(){_e().focus()}function ve(){_e().blur()}function _e(){return X}function ot(we){Yf.call(this,i,we)}function it(we){Yf.call(this,i,we)}function It(we){bn[we?"unshift":"push"](()=>{X=we,t(5,X)})}const Xe=we=>b!=="file"&&J(we);return i.$$set=we=>{e=Yi(Yi({},e),po(we)),t(10,l=Yn(e,o)),"use"in we&&t(0,f=we.use),"class"in we&&t(1,_=we.class),"type"in we&&t(2,b=we.type),"placeholder"in we&&t(3,v=we.placeholder),"value"in we&&t(11,w=we.value),"files"in we&&t(12,C=we.files),"dirty"in we&&t(13,T=we.dirty),"invalid"in we&&t(14,S=we.invalid),"updateInvalid"in we&&t(15,M=we.updateInvalid),"emptyValueNull"in we&&t(16,O=we.emptyValueNull),"emptyValueUndefined"in we&&t(17,V=we.emptyValueUndefined)},i.$$.update=()=>{i.$$.dirty&2068&&(b==="file"?(delete te.value,t(4,te),t(2,b),t(11,w)):t(4,te.value=w==null?"":w,te))},[f,_,b,v,te,X,Z,u,J,ie,l,w,C,T,S,M,O,V,Ee,Pe,de,Te,ve,_e,ot,it,It,Xe]}class SP extends br{constructor(e){super(),wr(this,e,kP,xP,mr,{use:0,class:1,type:2,placeholder:3,value:11,files:12,dirty:13,invalid:14,updateInvalid:15,emptyValueNull:16,emptyValueUndefined:17,getAttr:18,addAttr:19,removeAttr:20,focus:21,blur:22,getElement:23})}get getAttr(){return this.$$.ctx[18]}get addAttr(){return this.$$.ctx[19]}get removeAttr(){return this.$$.ctx[20]}get focus(){return this.$$.ctx[21]}get blur(){return this.$$.ctx[22]}get getElement(){return this.$$.ctx[23]}}function CP(i){let e,t,o,l,u,m,r=[{class:t=sr({[i[2]]:!0,"mdc-text-field__input":!0})},{style:o=`${i[4]?"":"resize: none; "}${i[3]}`},i[6],i[9]],f={};for(let _=0;_<r.length;_+=1)f=Yi(f,r[_]);return{c(){e=Ht("textarea"),this.h()},l(_){e=Gt(_,"TEXTAREA",{class:!0,style:!0}),$t(e).forEach(De),this.h()},h(){nr(e,f)},m(_,b){jt(_,e,b),e.autofocus&&e.focus(),i[21](e),$0(e,i[0]),u||(m=[tr(l=To.call(null,e,i[1])),tr(i[7].call(null,e)),xn(e,"change",i[8]),xn(e,"blur",i[19]),xn(e,"focus",i[20]),xn(e,"input",i[22])],u=!0)},p(_,[b]){nr(e,f=xr(r,[b&4&&t!==(t=sr({[_[2]]:!0,"mdc-text-field__input":!0}))&&{class:t},b&24&&o!==(o=`${_[4]?"":"resize: none; "}${_[3]}`)&&{style:o},b&64&&_[6],b&512&&_[9]])),l&&so(l.update)&&b&2&&l.update.call(null,_[1]),b&1&&$0(e,_[0])},i:go,o:go,d(_){_&&De(e),i[21](null),u=!1,Lo(m)}}}function EP(i,e,t){const o=["use","class","style","value","dirty","invalid","updateInvalid","resizable","getAttr","addAttr","removeAttr","focus","blur","getElement"];let l=Yn(e,o);const u=_o(yo());let{use:m=[]}=e,{class:r=""}=e,{style:f=""}=e,{value:_=""}=e,{dirty:b=!1}=e,{invalid:v=!1}=e,{updateInvalid:w=!0}=e,{resizable:x=!0}=e,C,T={};ks(()=>{w&&t(11,v=C.matches(":invalid"))});function S(){t(10,b=!0),w&&t(11,v=C.matches(":invalid"))}function M(de){var Te;return de in T?(Te=T[de])!==null&&Te!==void 0?Te:null:te().getAttribute(de)}function O(de,Te){T[de]!==Te&&t(6,T[de]=Te,T)}function V(de){(!(de in T)||T[de]!=null)&&t(6,T[de]=void 0,T)}function X(){te().focus()}function Z(){te().blur()}function te(){return C}function J(de){Yf.call(this,i,de)}function ie(de){Yf.call(this,i,de)}function Ee(de){bn[de?"unshift":"push"](()=>{C=de,t(5,C)})}function Pe(){_=this.value,t(0,_)}return i.$$set=de=>{e=Yi(Yi({},e),po(de)),t(9,l=Yn(e,o)),"use"in de&&t(1,m=de.use),"class"in de&&t(2,r=de.class),"style"in de&&t(3,f=de.style),"value"in de&&t(0,_=de.value),"dirty"in de&&t(10,b=de.dirty),"invalid"in de&&t(11,v=de.invalid),"updateInvalid"in de&&t(12,w=de.updateInvalid),"resizable"in de&&t(4,x=de.resizable)},[_,m,r,f,x,C,T,u,S,l,b,v,w,M,O,V,X,Z,te,J,ie,Ee,Pe]}class IP extends br{constructor(e){super(),wr(this,e,EP,CP,mr,{use:1,class:2,style:3,value:0,dirty:10,invalid:11,updateInvalid:12,resizable:4,getAttr:13,addAttr:14,removeAttr:15,focus:16,blur:17,getElement:18})}get getAttr(){return this.$$.ctx[13]}get addAttr(){return this.$$.ctx[14]}get removeAttr(){return this.$$.ctx[15]}get focus(){return this.$$.ctx[16]}get blur(){return this.$$.ctx[17]}get getElement(){return this.$$.ctx[18]}}const TP=i=>({}),Hb=i=>({}),LP=i=>({}),Gb=i=>({}),PP=i=>({}),Wb=i=>({}),MP=i=>({}),Xb=i=>({}),DP=i=>({}),Yb=i=>({}),OP=i=>({}),Zb=i=>({}),FP=i=>({}),Kb=i=>({}),RP=i=>({}),Jb=i=>({}),BP=i=>({}),Qb=i=>({}),zP=i=>({}),$b=i=>({}),NP=i=>({}),e5=i=>({}),jP=i=>({}),t5=i=>({});function UP(i){let e,t,o,l,u,m,r,f,_,b,v,w,x,C;const T=i[51].label,S=ur(T,i,i[90],Yb);o=new k1({props:{key:"SMUI:textfield:icon:leading",value:!0,$$slots:{default:[qP]},$$scope:{ctx:i}}});const M=i[51].default,O=ur(M,i,i[90],null);m=new k1({props:{key:"SMUI:textfield:icon:leading",value:!1,$$slots:{default:[HP]},$$scope:{ctx:i}}});const V=i[51].ripple,X=ur(V,i,i[90],Gb);let Z=[{class:f=sr({[i[9]]:!0,"mdc-text-field":!0,"mdc-text-field--disabled":i[12],"mdc-text-field--textarea":i[14],"mdc-text-field--filled":i[15]==="filled","mdc-text-field--outlined":i[15]==="outlined","smui-text-field--standard":i[15]==="standard"&&!i[14],"mdc-text-field--no-label":i[16]||!i[42].label,"mdc-text-field--with-leading-icon":i[42].leadingIcon,"mdc-text-field--with-trailing-icon":i[42].trailingIcon,"mdc-text-field--invalid":i[1],...i[25]})},{style:_=Object.entries(i[26]).map(f5).concat([i[10]]).join(" ")},ff(i[41],["input$","label$","ripple$","outline$","helperLine$"])],te={};for(let J=0;J<Z.length;J+=1)te=Yi(te,Z[J]);return{c(){e=Ht("div"),S&&S.c(),t=Wi(),en(o.$$.fragment),l=Wi(),O&&O.c(),u=Wi(),en(m.$$.fragment),r=Wi(),X&&X.c(),this.h()},l(J){e=Gt(J,"DIV",{class:!0,style:!0});var ie=$t(e);S&&S.l(ie),t=Xi(ie),un(o.$$.fragment,ie),l=Xi(ie),O&&O.l(ie),u=Xi(ie),un(m.$$.fragment,ie),r=Xi(ie),X&&X.l(ie),ie.forEach(De),this.h()},h(){nr(e,te)},m(J,ie){jt(J,e,ie),S&&S.m(e,null),Ut(e,t),tn(o,e,null),Ut(e,l),O&&O.m(e,null),Ut(e,u),tn(m,e,null),Ut(e,r),X&&X.m(e,null),i[80](e),w=!0,x||(C=[tr(b=mf.call(null,e,{ripple:i[11],unbounded:!1,addClass:i[38],removeClass:i[39],addStyle:i[40]})),tr(v=To.call(null,e,i[8])),tr(i[34].call(null,e)),xn(e,"SMUITextfieldLeadingIcon:mount",i[81]),xn(e,"SMUITextfieldLeadingIcon:unmount",i[82]),xn(e,"SMUITextfieldTrailingIcon:mount",i[83]),xn(e,"SMUITextfieldTrailingIcon:unmount",i[84])],x=!0)},p(J,ie){S&&S.p&&(!w||ie[2]&268435456)&&cr(S,T,J,J[90],w?fr(T,J[90],ie,DP):hr(J[90]),Yb);const Ee={};ie[2]&268435456&&(Ee.$$scope={dirty:ie,ctx:J}),o.$set(Ee),O&&O.p&&(!w||ie[2]&268435456)&&cr(O,M,J,J[90],w?fr(M,J[90],ie,null):hr(J[90]),null);const Pe={};ie[2]&268435456&&(Pe.$$scope={dirty:ie,ctx:J}),m.$set(Pe),X&&X.p&&(!w||ie[2]&268435456)&&cr(X,V,J,J[90],w?fr(V,J[90],ie,LP):hr(J[90]),Gb),nr(e,te=xr(Z,[(!w||ie[0]&33673730|ie[1]&2048&&f!==(f=sr({[J[9]]:!0,"mdc-text-field":!0,"mdc-text-field--disabled":J[12],"mdc-text-field--textarea":J[14],"mdc-text-field--filled":J[15]==="filled","mdc-text-field--outlined":J[15]==="outlined","smui-text-field--standard":J[15]==="standard"&&!J[14],"mdc-text-field--no-label":J[16]||!J[42].label,"mdc-text-field--with-leading-icon":J[42].leadingIcon,"mdc-text-field--with-trailing-icon":J[42].trailingIcon,"mdc-text-field--invalid":J[1],...J[25]})))&&{class:f},(!w||ie[0]&67109888&&_!==(_=Object.entries(J[26]).map(f5).concat([J[10]]).join(" ")))&&{style:_},ie[1]&1024&&ff(J[41],["input$","label$","ripple$","outline$","helperLine$"])])),b&&so(b.update)&&ie[0]&2048&&b.update.call(null,{ripple:J[11],unbounded:!1,addClass:J[38],removeClass:J[39],addStyle:J[40]}),v&&so(v.update)&&ie[0]&256&&v.update.call(null,J[8])},i(J){w||(vt(S,J),vt(o.$$.fragment,J),vt(O,J),vt(m.$$.fragment,J),vt(X,J),w=!0)},o(J){Lt(S,J),Lt(o.$$.fragment,J),Lt(O,J),Lt(m.$$.fragment,J),Lt(X,J),w=!1},d(J){J&&De(e),S&&S.d(J),nn(o),O&&O.d(J),nn(m),X&&X.d(J),i[80](null),x=!1,Lo(C)}}}function VP(i){let e,t,o,l,u,m,r,f,_,b,v,w,x,C,T,S,M,O,V=!i[14]&&i[15]!=="outlined"&&i5(i),X=(i[14]||i[15]==="outlined")&&o5(i);l=new k1({props:{key:"SMUI:textfield:icon:leading",value:!0,$$slots:{default:[YP]},$$scope:{ctx:i}}});const Z=i[51].default,te=ur(Z,i,i[90],null),J=[KP,ZP],ie=[];function Ee(ve,_e){return ve[14]&&typeof ve[0]=="string"?0:1}r=Ee(i),f=ie[r]=J[r](i),b=new k1({props:{key:"SMUI:textfield:icon:leading",value:!1,$$slots:{default:[$P]},$$scope:{ctx:i}}});let Pe=!i[14]&&i[15]!=="outlined"&&i[11]&&u5(i),de=[{class:w=sr({[i[9]]:!0,"mdc-text-field":!0,"mdc-text-field--disabled":i[12],"mdc-text-field--textarea":i[14],"mdc-text-field--filled":i[15]==="filled","mdc-text-field--outlined":i[15]==="outlined","smui-text-field--standard":i[15]==="standard"&&!i[14],"mdc-text-field--no-label":i[16]||i[17]==null&&!i[42].label,"mdc-text-field--label-floating":i[28]||i[0]!=null&&i[0]!=="","mdc-text-field--with-leading-icon":i[35](i[22])?i[42].leadingIcon:i[22],"mdc-text-field--with-trailing-icon":i[35](i[23])?i[42].trailingIcon:i[23],"mdc-text-field--with-internal-counter":i[14]&&i[42].internalCounter,"mdc-text-field--invalid":i[1],...i[25]})},{style:x=Object.entries(i[26]).map(h5).concat([i[10]]).join(" ")},{for:void 0},ff(i[41],["input$","label$","ripple$","outline$","helperLine$"])],Te={};for(let ve=0;ve<de.length;ve+=1)Te=Yi(Te,de[ve]);return{c(){e=Ht("label"),V&&V.c(),t=Wi(),X&&X.c(),o=Wi(),en(l.$$.fragment),u=Wi(),te&&te.c(),m=Wi(),f.c(),_=Wi(),en(b.$$.fragment),v=Wi(),Pe&&Pe.c(),this.h()},l(ve){e=Gt(ve,"LABEL",{class:!0,style:!0,for:!0});var _e=$t(e);V&&V.l(_e),t=Xi(_e),X&&X.l(_e),o=Xi(_e),un(l.$$.fragment,_e),u=Xi(_e),te&&te.l(_e),m=Xi(_e),f.l(_e),_=Xi(_e),un(b.$$.fragment,_e),v=Xi(_e),Pe&&Pe.l(_e),_e.forEach(De),this.h()},h(){nr(e,Te)},m(ve,_e){jt(ve,e,_e),V&&V.m(e,null),Ut(e,t),X&&X.m(e,null),Ut(e,o),tn(l,e,null),Ut(e,u),te&&te.m(e,null),Ut(e,m),ie[r].m(e,null),Ut(e,_),tn(b,e,null),Ut(e,v),Pe&&Pe.m(e,null),i[73](e),S=!0,M||(O=[tr(C=mf.call(null,e,{ripple:!i[14]&&i[15]==="filled",unbounded:!1,addClass:i[38],removeClass:i[39],addStyle:i[40],eventTarget:i[33],activeTarget:i[33],initPromise:i[37]})),tr(T=To.call(null,e,i[8])),tr(i[34].call(null,e)),xn(e,"SMUITextfieldLeadingIcon:mount",i[74]),xn(e,"SMUITextfieldLeadingIcon:unmount",i[75]),xn(e,"SMUITextfieldTrailingIcon:mount",i[76]),xn(e,"SMUITextfieldTrailingIcon:unmount",i[77]),xn(e,"SMUITextfieldCharacterCounter:mount",i[78]),xn(e,"SMUITextfieldCharacterCounter:unmount",i[79])],M=!0)},p(ve,_e){!ve[14]&&ve[15]!=="outlined"?V?(V.p(ve,_e),_e[0]&49152&&vt(V,1)):(V=i5(ve),V.c(),vt(V,1),V.m(e,t)):V&&(Fr(),Lt(V,1,1,()=>{V=null}),Or()),ve[14]||ve[15]==="outlined"?X?(X.p(ve,_e),_e[0]&49152&&vt(X,1)):(X=o5(ve),X.c(),vt(X,1),X.m(e,o)):X&&(Fr(),Lt(X,1,1,()=>{X=null}),Or());const ot={};_e[2]&268435456&&(ot.$$scope={dirty:_e,ctx:ve}),l.$set(ot),te&&te.p&&(!S||_e[2]&268435456)&&cr(te,Z,ve,ve[90],S?fr(Z,ve[90],_e,null):hr(ve[90]),null);let it=r;r=Ee(ve),r===it?ie[r].p(ve,_e):(Fr(),Lt(ie[it],1,1,()=>{ie[it]=null}),Or(),f=ie[r],f?f.p(ve,_e):(f=ie[r]=J[r](ve),f.c()),vt(f,1),f.m(e,_));const It={};_e[2]&268435456&&(It.$$scope={dirty:_e,ctx:ve}),b.$set(It),!ve[14]&&ve[15]!=="outlined"&&ve[11]?Pe?(Pe.p(ve,_e),_e[0]&51200&&vt(Pe,1)):(Pe=u5(ve),Pe.c(),vt(Pe,1),Pe.m(e,null)):Pe&&(Fr(),Lt(Pe,1,1,()=>{Pe=null}),Or()),nr(e,Te=xr(de,[(!S||_e[0]&314823171|_e[1]&2048&&w!==(w=sr({[ve[9]]:!0,"mdc-text-field":!0,"mdc-text-field--disabled":ve[12],"mdc-text-field--textarea":ve[14],"mdc-text-field--filled":ve[15]==="filled","mdc-text-field--outlined":ve[15]==="outlined","smui-text-field--standard":ve[15]==="standard"&&!ve[14],"mdc-text-field--no-label":ve[16]||ve[17]==null&&!ve[42].label,"mdc-text-field--label-floating":ve[28]||ve[0]!=null&&ve[0]!=="","mdc-text-field--with-leading-icon":ve[35](ve[22])?ve[42].leadingIcon:ve[22],"mdc-text-field--with-trailing-icon":ve[35](ve[23])?ve[42].trailingIcon:ve[23],"mdc-text-field--with-internal-counter":ve[14]&&ve[42].internalCounter,"mdc-text-field--invalid":ve[1],...ve[25]})))&&{class:w},(!S||_e[0]&67109888&&x!==(x=Object.entries(ve[26]).map(h5).concat([ve[10]]).join(" ")))&&{style:x},{for:void 0},_e[1]&1024&&ff(ve[41],["input$","label$","ripple$","outline$","helperLine$"])])),C&&so(C.update)&&_e[0]&49152|_e[1]&4&&C.update.call(null,{ripple:!ve[14]&&ve[15]==="filled",unbounded:!1,addClass:ve[38],removeClass:ve[39],addStyle:ve[40],eventTarget:ve[33],activeTarget:ve[33],initPromise:ve[37]}),T&&so(T.update)&&_e[0]&256&&T.update.call(null,ve[8])},i(ve){S||(vt(V),vt(X),vt(l.$$.fragment,ve),vt(te,ve),vt(f),vt(b.$$.fragment,ve),vt(Pe),S=!0)},o(ve){Lt(V),Lt(X),Lt(l.$$.fragment,ve),Lt(te,ve),Lt(f),Lt(b.$$.fragment,ve),Lt(Pe),S=!1},d(ve){ve&&De(e),V&&V.d(),X&&X.d(),nn(l),te&&te.d(ve),ie[r].d(),nn(b),Pe&&Pe.d(),i[73](null),M=!1,Lo(O)}}}function qP(i){let e;const t=i[51].leadingIcon,o=ur(t,i,i[90],Xb);return{c(){o&&o.c()},l(l){o&&o.l(l)},m(l,u){o&&o.m(l,u),e=!0},p(l,u){o&&o.p&&(!e||u[2]&268435456)&&cr(o,t,l,l[90],e?fr(t,l[90],u,MP):hr(l[90]),Xb)},i(l){e||(vt(o,l),e=!0)},o(l){Lt(o,l),e=!1},d(l){o&&o.d(l)}}}function HP(i){let e;const t=i[51].trailingIcon,o=ur(t,i,i[90],Wb);return{c(){o&&o.c()},l(l){o&&o.l(l)},m(l,u){o&&o.m(l,u),e=!0},p(l,u){o&&o.p&&(!e||u[2]&268435456)&&cr(o,t,l,l[90],e?fr(t,l[90],u,PP):hr(l[90]),Wb)},i(l){e||(vt(o,l),e=!0)},o(l){Lt(o,l),e=!1},d(l){o&&o.d(l)}}}function i5(i){let e,t,o,l=i[15]==="filled"&&n5(),u=!i[16]&&(i[17]!=null||i[42].label)&&r5(i);return{c(){l&&l.c(),e=Wi(),u&&u.c(),t=kn()},l(m){l&&l.l(m),e=Xi(m),u&&u.l(m),t=kn()},m(m,r){l&&l.m(m,r),jt(m,e,r),u&&u.m(m,r),jt(m,t,r),o=!0},p(m,r){m[15]==="filled"?l||(l=n5(),l.c(),l.m(e.parentNode,e)):l&&(l.d(1),l=null),!m[16]&&(m[17]!=null||m[42].label)?u?(u.p(m,r),r[0]&196608|r[1]&2048&&vt(u,1)):(u=r5(m),u.c(),vt(u,1),u.m(t.parentNode,t)):u&&(Fr(),Lt(u,1,1,()=>{u=null}),Or())},i(m){o||(vt(u),o=!0)},o(m){Lt(u),o=!1},d(m){l&&l.d(m),m&&De(e),u&&u.d(m),m&&De(t)}}}function n5(i){let e;return{c(){e=Ht("span"),this.h()},l(t){e=Gt(t,"SPAN",{class:!0}),$t(e).forEach(De),this.h()},h(){qt(e,"class","mdc-text-field__ripple")},m(t,o){jt(t,e,o)},d(t){t&&De(e)}}}function r5(i){let e,t;const o=[{floatAbove:i[28]||i[0]!=null&&i[0]!==""},{required:i[13]},{wrapped:!0},fo(i[41],"label$")];let l={$$slots:{default:[GP]},$$scope:{ctx:i}};for(let u=0;u<o.length;u+=1)l=Yi(l,o[u]);return e=new K1({props:l}),i[52](e),{c(){en(e.$$.fragment)},l(u){un(e.$$.fragment,u)},m(u,m){tn(e,u,m),t=!0},p(u,m){const r=m[0]&268443649|m[1]&1024?xr(o,[m[0]&268435457&&{floatAbove:u[28]||u[0]!=null&&u[0]!==""},m[0]&8192&&{required:u[13]},o[2],m[1]&1024&&Eo(fo(u[41],"label$"))]):{};m[0]&131072|m[2]&268435456&&(r.$$scope={dirty:m,ctx:u}),e.$set(r)},i(u){t||(vt(e.$$.fragment,u),t=!0)},o(u){Lt(e.$$.fragment,u),t=!1},d(u){i[52](null),nn(e,u)}}}function GP(i){let e=(i[17]==null?"":i[17])+"",t,o;const l=i[51].label,u=ur(l,i,i[90],t5);return{c(){t=Kn(e),u&&u.c()},l(m){t=Jn(m,e),u&&u.l(m)},m(m,r){jt(m,t,r),u&&u.m(m,r),o=!0},p(m,r){(!o||r[0]&131072)&&e!==(e=(m[17]==null?"":m[17])+"")&&Os(t,e),u&&u.p&&(!o||r[2]&268435456)&&cr(u,l,m,m[90],o?fr(l,m[90],r,jP):hr(m[90]),t5)},i(m){o||(vt(u,m),o=!0)},o(m){Lt(u,m),o=!1},d(m){m&&De(t),u&&u.d(m)}}}function o5(i){let e,t;const o=[{noLabel:i[16]||i[17]==null&&!i[42].label},fo(i[41],"outline$")];let l={$$slots:{default:[XP]},$$scope:{ctx:i}};for(let u=0;u<o.length;u+=1)l=Yi(l,o[u]);return e=new b3({props:l}),i[54](e),{c(){en(e.$$.fragment)},l(u){un(e.$$.fragment,u)},m(u,m){tn(e,u,m),t=!0},p(u,m){const r=m[0]&196608|m[1]&3072?xr(o,[m[0]&196608|m[1]&2048&&{noLabel:u[16]||u[17]==null&&!u[42].label},m[1]&1024&&Eo(fo(u[41],"outline$"))]):{};m[0]&268640289|m[1]&3072|m[2]&268435456&&(r.$$scope={dirty:m,ctx:u}),e.$set(r)},i(u){t||(vt(e.$$.fragment,u),t=!0)},o(u){Lt(e.$$.fragment,u),t=!1},d(u){i[54](null),nn(e,u)}}}function s5(i){let e,t;const o=[{floatAbove:i[28]||i[0]!=null&&i[0]!==""},{required:i[13]},{wrapped:!0},fo(i[41],"label$")];let l={$$slots:{default:[WP]},$$scope:{ctx:i}};for(let u=0;u<o.length;u+=1)l=Yi(l,o[u]);return e=new K1({props:l}),i[53](e),{c(){en(e.$$.fragment)},l(u){un(e.$$.fragment,u)},m(u,m){tn(e,u,m),t=!0},p(u,m){const r=m[0]&268443649|m[1]&1024?xr(o,[m[0]&268435457&&{floatAbove:u[28]||u[0]!=null&&u[0]!==""},m[0]&8192&&{required:u[13]},o[2],m[1]&1024&&Eo(fo(u[41],"label$"))]):{};m[0]&131072|m[2]&268435456&&(r.$$scope={dirty:m,ctx:u}),e.$set(r)},i(u){t||(vt(e.$$.fragment,u),t=!0)},o(u){Lt(e.$$.fragment,u),t=!1},d(u){i[53](null),nn(e,u)}}}function WP(i){let e=(i[17]==null?"":i[17])+"",t,o;const l=i[51].label,u=ur(l,i,i[90],e5);return{c(){t=Kn(e),u&&u.c()},l(m){t=Jn(m,e),u&&u.l(m)},m(m,r){jt(m,t,r),u&&u.m(m,r),o=!0},p(m,r){(!o||r[0]&131072)&&e!==(e=(m[17]==null?"":m[17])+"")&&Os(t,e),u&&u.p&&(!o||r[2]&268435456)&&cr(u,l,m,m[90],o?fr(l,m[90],r,NP):hr(m[90]),e5)},i(m){o||(vt(u,m),o=!0)},o(m){Lt(u,m),o=!1},d(m){m&&De(t),u&&u.d(m)}}}function XP(i){let e,t,o=!i[16]&&(i[17]!=null||i[42].label)&&s5(i);return{c(){o&&o.c(),e=kn()},l(l){o&&o.l(l),e=kn()},m(l,u){o&&o.m(l,u),jt(l,e,u),t=!0},p(l,u){!l[16]&&(l[17]!=null||l[42].label)?o?(o.p(l,u),u[0]&196608|u[1]&2048&&vt(o,1)):(o=s5(l),o.c(),vt(o,1),o.m(e.parentNode,e)):o&&(Fr(),Lt(o,1,1,()=>{o=null}),Or())},i(l){t||(vt(o),t=!0)},o(l){Lt(o),t=!1},d(l){o&&o.d(l),l&&De(e)}}}function YP(i){let e;const t=i[51].leadingIcon,o=ur(t,i,i[90],$b);return{c(){o&&o.c()},l(l){o&&o.l(l)},m(l,u){o&&o.m(l,u),e=!0},p(l,u){o&&o.p&&(!e||u[2]&268435456)&&cr(o,t,l,l[90],e?fr(t,l[90],u,zP):hr(l[90]),$b)},i(l){e||(vt(o,l),e=!0)},o(l){Lt(o,l),e=!1},d(l){o&&o.d(l)}}}function ZP(i){let e,t,o,l,u,m,r,f,_,b;const v=i[51].prefix,w=ur(v,i,i[90],Jb);let x=i[20]!=null&&a5(i);const C=[{type:i[18]},{disabled:i[12]},{required:i[13]},{updateInvalid:i[19]},{"aria-controls":i[27]},{"aria-describedby":i[27]},i[16]&&i[17]!=null?{placeholder:i[17]}:{},fo(i[41],"input$")];function T(J){i[64](J)}function S(J){i[65](J)}function M(J){i[66](J)}function O(J){i[67](J)}let V={};for(let J=0;J<C.length;J+=1)V=Yi(V,C[J]);i[0]!==void 0&&(V.value=i[0]),i[3]!==void 0&&(V.files=i[3]),i[4]!==void 0&&(V.dirty=i[4]),i[1]!==void 0&&(V.invalid=i[1]),o=new SP({props:V}),i[63](o),bn.push(()=>Uo(o,"value",T)),bn.push(()=>Uo(o,"files",S)),bn.push(()=>Uo(o,"dirty",M)),bn.push(()=>Uo(o,"invalid",O)),o.$on("blur",i[68]),o.$on("focus",i[69]),o.$on("blur",i[70]),o.$on("focus",i[71]);let X=i[21]!=null&&l5(i);const Z=i[51].suffix,te=ur(Z,i,i[90],Kb);return{c(){w&&w.c(),e=Wi(),x&&x.c(),t=Wi(),en(o.$$.fragment),f=Wi(),X&&X.c(),_=Wi(),te&&te.c()},l(J){w&&w.l(J),e=Xi(J),x&&x.l(J),t=Xi(J),un(o.$$.fragment,J),f=Xi(J),X&&X.l(J),_=Xi(J),te&&te.l(J)},m(J,ie){w&&w.m(J,ie),jt(J,e,ie),x&&x.m(J,ie),jt(J,t,ie),tn(o,J,ie),jt(J,f,ie),X&&X.m(J,ie),jt(J,_,ie),te&&te.m(J,ie),b=!0},p(J,ie){w&&w.p&&(!b||ie[2]&268435456)&&cr(w,v,J,J[90],b?fr(v,J[90],ie,RP):hr(J[90]),Jb),J[20]!=null?x?(x.p(J,ie),ie[0]&1048576&&vt(x,1)):(x=a5(J),x.c(),vt(x,1),x.m(t.parentNode,t)):x&&(Fr(),Lt(x,1,1,()=>{x=null}),Or());const Ee=ie[0]&135213056|ie[1]&1024?xr(C,[ie[0]&262144&&{type:J[18]},ie[0]&4096&&{disabled:J[12]},ie[0]&8192&&{required:J[13]},ie[0]&524288&&{updateInvalid:J[19]},ie[0]&134217728&&{"aria-controls":J[27]},ie[0]&134217728&&{"aria-describedby":J[27]},ie[0]&196608&&Eo(J[16]&&J[17]!=null?{placeholder:J[17]}:{}),ie[1]&1024&&Eo(fo(J[41],"input$"))]):{};!l&&ie[0]&1&&(l=!0,Ee.value=J[0],Vo(()=>l=!1)),!u&&ie[0]&8&&(u=!0,Ee.files=J[3],Vo(()=>u=!1)),!m&&ie[0]&16&&(m=!0,Ee.dirty=J[4],Vo(()=>m=!1)),!r&&ie[0]&2&&(r=!0,Ee.invalid=J[1],Vo(()=>r=!1)),o.$set(Ee),J[21]!=null?X?(X.p(J,ie),ie[0]&2097152&&vt(X,1)):(X=l5(J),X.c(),vt(X,1),X.m(_.parentNode,_)):X&&(Fr(),Lt(X,1,1,()=>{X=null}),Or()),te&&te.p&&(!b||ie[2]&268435456)&&cr(te,Z,J,J[90],b?fr(Z,J[90],ie,FP):hr(J[90]),Kb)},i(J){b||(vt(w,J),vt(x),vt(o.$$.fragment,J),vt(X),vt(te,J),b=!0)},o(J){Lt(w,J),Lt(x),Lt(o.$$.fragment,J),Lt(X),Lt(te,J),b=!1},d(J){w&&w.d(J),J&&De(e),x&&x.d(J),J&&De(t),i[63](null),nn(o,J),J&&De(f),X&&X.d(J),J&&De(_),te&&te.d(J)}}}function KP(i){let e,t,o,l,u,m,r,f;const _=[{disabled:i[12]},{required:i[13]},{updateInvalid:i[19]},{"aria-controls":i[27]},{"aria-describedby":i[27]},fo(i[41],"input$")];function b(S){i[56](S)}function v(S){i[57](S)}function w(S){i[58](S)}let x={};for(let S=0;S<_.length;S+=1)x=Yi(x,_[S]);i[0]!==void 0&&(x.value=i[0]),i[4]!==void 0&&(x.dirty=i[4]),i[1]!==void 0&&(x.invalid=i[1]),t=new IP({props:x}),i[55](t),bn.push(()=>Uo(t,"value",b)),bn.push(()=>Uo(t,"dirty",v)),bn.push(()=>Uo(t,"invalid",w)),t.$on("blur",i[59]),t.$on("focus",i[60]),t.$on("blur",i[61]),t.$on("focus",i[62]);const C=i[51].internalCounter,T=ur(C,i,i[90],Qb);return{c(){e=Ht("span"),en(t.$$.fragment),m=Wi(),T&&T.c(),this.h()},l(S){e=Gt(S,"SPAN",{class:!0});var M=$t(e);un(t.$$.fragment,M),m=Xi(M),T&&T.l(M),M.forEach(De),this.h()},h(){qt(e,"class",r=sr({"mdc-text-field__resizer":!("input$resizable"in i[41])||i[41].input$resizable}))},m(S,M){jt(S,e,M),tn(t,e,null),Ut(e,m),T&&T.m(e,null),f=!0},p(S,M){const O=M[0]&134754304|M[1]&1024?xr(_,[M[0]&4096&&{disabled:S[12]},M[0]&8192&&{required:S[13]},M[0]&524288&&{updateInvalid:S[19]},M[0]&134217728&&{"aria-controls":S[27]},M[0]&134217728&&{"aria-describedby":S[27]},M[1]&1024&&Eo(fo(S[41],"input$"))]):{};!o&&M[0]&1&&(o=!0,O.value=S[0],Vo(()=>o=!1)),!l&&M[0]&16&&(l=!0,O.dirty=S[4],Vo(()=>l=!1)),!u&&M[0]&2&&(u=!0,O.invalid=S[1],Vo(()=>u=!1)),t.$set(O),T&&T.p&&(!f||M[2]&268435456)&&cr(T,C,S,S[90],f?fr(C,S[90],M,BP):hr(S[90]),Qb),(!f||M[1]&1024&&r!==(r=sr({"mdc-text-field__resizer":!("input$resizable"in S[41])||S[41].input$resizable})))&&qt(e,"class",r)},i(S){f||(vt(t.$$.fragment,S),vt(T,S),f=!0)},o(S){Lt(t.$$.fragment,S),Lt(T,S),f=!1},d(S){S&&De(e),i[55](null),nn(t),T&&T.d(S)}}}function a5(i){let e,t;return e=new bP({props:{$$slots:{default:[JP]},$$scope:{ctx:i}}}),{c(){en(e.$$.fragment)},l(o){un(e.$$.fragment,o)},m(o,l){tn(e,o,l),t=!0},p(o,l){const u={};l[0]&1048576|l[2]&268435456&&(u.$$scope={dirty:l,ctx:o}),e.$set(u)},i(o){t||(vt(e.$$.fragment,o),t=!0)},o(o){Lt(e.$$.fragment,o),t=!1},d(o){nn(e,o)}}}function JP(i){let e;return{c(){e=Kn(i[20])},l(t){e=Jn(t,i[20])},m(t,o){jt(t,e,o)},p(t,o){o[0]&1048576&&Os(e,t[20])},d(t){t&&De(e)}}}function l5(i){let e,t;return e=new wP({props:{$$slots:{default:[QP]},$$scope:{ctx:i}}}),{c(){en(e.$$.fragment)},l(o){un(e.$$.fragment,o)},m(o,l){tn(e,o,l),t=!0},p(o,l){const u={};l[0]&2097152|l[2]&268435456&&(u.$$scope={dirty:l,ctx:o}),e.$set(u)},i(o){t||(vt(e.$$.fragment,o),t=!0)},o(o){Lt(e.$$.fragment,o),t=!1},d(o){nn(e,o)}}}function QP(i){let e;return{c(){e=Kn(i[21])},l(t){e=Jn(t,i[21])},m(t,o){jt(t,e,o)},p(t,o){o[0]&2097152&&Os(e,t[21])},d(t){t&&De(e)}}}function $P(i){let e;const t=i[51].trailingIcon,o=ur(t,i,i[90],Zb);return{c(){o&&o.c()},l(l){o&&o.l(l)},m(l,u){o&&o.m(l,u),e=!0},p(l,u){o&&o.p&&(!e||u[2]&268435456)&&cr(o,t,l,l[90],e?fr(t,l[90],u,OP):hr(l[90]),Zb)},i(l){e||(vt(o,l),e=!0)},o(l){Lt(o,l),e=!1},d(l){o&&o.d(l)}}}function u5(i){let e,t;const o=[fo(i[41],"ripple$")];let l={};for(let u=0;u<o.length;u+=1)l=Yi(l,o[u]);return e=new v3({props:l}),i[72](e),{c(){en(e.$$.fragment)},l(u){un(e.$$.fragment,u)},m(u,m){tn(e,u,m),t=!0},p(u,m){const r=m[1]&1024?xr(o,[Eo(fo(u[41],"ripple$"))]):{};e.$set(r)},i(u){t||(vt(e.$$.fragment,u),t=!0)},o(u){Lt(e.$$.fragment,u),t=!1},d(u){i[72](null),nn(e,u)}}}function c5(i){let e,t;const o=[fo(i[41],"helperLine$")];let l={$$slots:{default:[e9]},$$scope:{ctx:i}};for(let u=0;u<o.length;u+=1)l=Yi(l,o[u]);return e=new vP({props:l}),e.$on("SMUITextfieldHelperText:id",i[85]),e.$on("SMUITextfieldHelperText:mount",i[86]),e.$on("SMUITextfieldHelperText:unmount",i[87]),e.$on("SMUITextfieldCharacterCounter:mount",i[88]),e.$on("SMUITextfieldCharacterCounter:unmount",i[89]),{c(){en(e.$$.fragment)},l(u){un(e.$$.fragment,u)},m(u,m){tn(e,u,m),t=!0},p(u,m){const r=m[1]&1024?xr(o,[Eo(fo(u[41],"helperLine$"))]):{};m[2]&268435456&&(r.$$scope={dirty:m,ctx:u}),e.$set(r)},i(u){t||(vt(e.$$.fragment,u),t=!0)},o(u){Lt(e.$$.fragment,u),t=!1},d(u){nn(e,u)}}}function e9(i){let e;const t=i[51].helper,o=ur(t,i,i[90],Hb);return{c(){o&&o.c()},l(l){o&&o.l(l)},m(l,u){o&&o.m(l,u),e=!0},p(l,u){o&&o.p&&(!e||u[2]&268435456)&&cr(o,t,l,l[90],e?fr(t,l[90],u,TP):hr(l[90]),Hb)},i(l){e||(vt(o,l),e=!0)},o(l){Lt(o,l),e=!1},d(l){o&&o.d(l)}}}function t9(i){let e,t,o,l,u;const m=[VP,UP],r=[];function f(b,v){return b[36]?0:1}e=f(i),t=r[e]=m[e](i);let _=i[42].helper&&c5(i);return{c(){t.c(),o=Wi(),_&&_.c(),l=kn()},l(b){t.l(b),o=Xi(b),_&&_.l(b),l=kn()},m(b,v){r[e].m(b,v),jt(b,o,v),_&&_.m(b,v),jt(b,l,v),u=!0},p(b,v){t.p(b,v),b[42].helper?_?(_.p(b,v),v[1]&2048&&vt(_,1)):(_=c5(b),_.c(),vt(_,1),_.m(l.parentNode,l)):_&&(Fr(),Lt(_,1,1,()=>{_=null}),Or())},i(b){u||(vt(t),vt(_),u=!0)},o(b){Lt(t),Lt(_),u=!1},d(b){r[e].d(b),b&&De(o),_&&_.d(b),b&&De(l)}}}const h5=([i,e])=>`${i}: ${e};`,f5=([i,e])=>`${i}: ${e};`;function i9(i,e,t){let o;const l=["use","class","style","ripple","disabled","required","textarea","variant","noLabel","label","type","value","files","invalid","updateInvalid","dirty","prefix","suffix","validateOnValueChange","useNativeValidation","withLeadingIcon","withTrailingIcon","input","floatingLabel","lineRipple","notchedOutline","focus","blur","layout","getElement"];let u=Yn(e,l),{$$slots:m={},$$scope:r}=e;const f=hg(m),{applyPassive:_}=l4,b=_o(yo());let v=()=>{};function w(yt){return yt===v}let{use:x=[]}=e,{class:C=""}=e,{style:T=""}=e,{ripple:S=!0}=e,{disabled:M=!1}=e,{required:O=!1}=e,{textarea:V=!1}=e,{variant:X=V?"outlined":"standard"}=e,{noLabel:Z=!1}=e,{label:te=void 0}=e,{type:J="text"}=e,{value:ie=u.input$emptyValueUndefined?void 0:v}=e,{files:Ee=v}=e;const Pe=!w(ie)||!w(Ee);w(ie)&&(ie=void 0),w(Ee)&&(Ee=null);let{invalid:de=v}=e,{updateInvalid:Te=w(de)}=e;w(de)&&(de=!1);let{dirty:ve=!1}=e,{prefix:_e=void 0}=e,{suffix:ot=void 0}=e,{validateOnValueChange:it=Te}=e,{useNativeValidation:It=Te}=e,{withLeadingIcon:Xe=v}=e,{withTrailingIcon:we=v}=e,{input:Ce=void 0}=e,{floatingLabel:Re=void 0}=e,{lineRipple:le=void 0}=e,{notchedOutline:Se=void 0}=e,he,me,Be={},We={},st,Ye=!1,gt=xs("SMUI:addLayoutListener"),Mt,ri,ut=new Promise(yt=>ri=yt),wt,bt,Je,ei,li=ie;gt&&(Mt=gt(Ci)),ks(()=>{if(t(49,me=new _P({addClass:Si,removeClass:Ti,hasClass:Qt,registerTextFieldInteractionHandler:(yt,Ri)=>ti().addEventListener(yt,Ri),deregisterTextFieldInteractionHandler:(yt,Ri)=>ti().removeEventListener(yt,Ri),registerValidationAttributeChangeHandler:yt=>{const Ri=Sn=>Sn.map(xt=>xt.attributeName).filter(xt=>xt),Ii=new MutationObserver(Sn=>{It&&yt(Ri(Sn))}),En={attributes:!0};return Ce&&Ii.observe(Ce.getElement(),En),Ii},deregisterValidationAttributeChangeHandler:yt=>{yt.disconnect()},getNativeInput:()=>{var yt;return(yt=Ce==null?void 0:Ce.getElement())!==null&&yt!==void 0?yt:null},setInputAttr:(yt,Ri)=>{Ce==null||Ce.addAttr(yt,Ri)},removeInputAttr:yt=>{Ce==null||Ce.removeAttr(yt)},isFocused:()=>document.activeElement===(Ce==null?void 0:Ce.getElement()),registerInputInteractionHandler:(yt,Ri)=>{Ce==null||Ce.getElement().addEventListener(yt,Ri,_())},deregisterInputInteractionHandler:(yt,Ri)=>{Ce==null||Ce.getElement().removeEventListener(yt,Ri,_())},floatLabel:yt=>Re&&Re.float(yt),getLabelWidth:()=>Re?Re.getWidth():0,hasLabel:()=>!!Re,shakeLabel:yt=>Re&&Re.shake(yt),setLabelRequired:yt=>Re&&Re.setRequired(yt),activateLineRipple:()=>le&&le.activate(),deactivateLineRipple:()=>le&&le.deactivate(),setLineRippleTransformOrigin:yt=>le&&le.setRippleCenter(yt),closeOutline:()=>Se&&Se.closeNotch(),hasOutline:()=>!!Se,notchOutline:yt=>Se&&Se.notch(yt)},{get helperText(){return Je},get characterCounter(){return ei},get leadingIcon(){return wt},get trailingIcon(){return bt}})),Pe){if(Ce==null)throw new Error("SMUI Textfield initialized without Input component.");me.init()}else gx().then(()=>{if(Ce==null)throw new Error("SMUI Textfield initialized without Input component.");me.init()});return ri(),()=>{me.destroy()}}),nh(()=>{Mt&&Mt()});function Qt(yt){var Ri;return yt in Be?(Ri=Be[yt])!==null&&Ri!==void 0?Ri:null:ti().classList.contains(yt)}function Si(yt){Be[yt]||t(25,Be[yt]=!0,Be)}function Ti(yt){(!(yt in Be)||Be[yt])&&t(25,Be[yt]=!1,Be)}function Xt(yt,Ri){We[yt]!=Ri&&(Ri===""||Ri==null?(delete We[yt],t(26,We)):t(26,We[yt]=Ri,We))}function mi(){Ce==null||Ce.focus()}function Zi(){Ce==null||Ce.blur()}function Ci(){if(me){const yt=me.shouldFloat;me.notchOutline(yt)}}function ti(){return he}function Me(yt){bn[yt?"unshift":"push"](()=>{Re=yt,t(5,Re)})}function Q(yt){bn[yt?"unshift":"push"](()=>{Re=yt,t(5,Re)})}function ae(yt){bn[yt?"unshift":"push"](()=>{Se=yt,t(7,Se)})}function $e(yt){bn[yt?"unshift":"push"](()=>{Ce=yt,t(2,Ce)})}function _t(yt){ie=yt,t(0,ie)}function Kt(yt){ve=yt,t(4,ve)}function di(yt){de=yt,t(1,de),t(49,me),t(19,Te)}const wn=()=>t(28,Ye=!1),Ln=()=>t(28,Ye=!0),fn=yt=>Do(he,"blur",yt),Bi=yt=>Do(he,"focus",yt);function Ki(yt){bn[yt?"unshift":"push"](()=>{Ce=yt,t(2,Ce)})}function Hn(yt){ie=yt,t(0,ie)}function Gn(yt){Ee=yt,t(3,Ee)}function Zr(yt){ve=yt,t(4,ve)}function zn(yt){de=yt,t(1,de),t(49,me),t(19,Te)}const dn=()=>t(28,Ye=!1),gn=()=>t(28,Ye=!0),on=yt=>Do(he,"blur",yt),Sr=yt=>Do(he,"focus",yt);function Wn(yt){bn[yt?"unshift":"push"](()=>{le=yt,t(6,le)})}function gr(yt){bn[yt?"unshift":"push"](()=>{he=yt,t(24,he)})}const Kr=yt=>t(29,wt=yt.detail),an=()=>t(29,wt=void 0),He=yt=>t(30,bt=yt.detail),wo=()=>t(30,bt=void 0),xo=yt=>t(32,ei=yt.detail),co=()=>t(32,ei=void 0);function Le(yt){bn[yt?"unshift":"push"](()=>{he=yt,t(24,he)})}const Ie=yt=>t(29,wt=yt.detail),qe=()=>t(29,wt=void 0),ct=yt=>t(30,bt=yt.detail),dt=()=>t(30,bt=void 0),Bt=yt=>t(27,st=yt.detail),Ge=yt=>t(31,Je=yt.detail),Yt=()=>{t(27,st=void 0),t(31,Je=void 0)},Ft=yt=>t(32,ei=yt.detail),oi=()=>t(32,ei=void 0);return i.$$set=yt=>{e=Yi(Yi({},e),po(yt)),t(41,u=Yn(e,l)),"use"in yt&&t(8,x=yt.use),"class"in yt&&t(9,C=yt.class),"style"in yt&&t(10,T=yt.style),"ripple"in yt&&t(11,S=yt.ripple),"disabled"in yt&&t(12,M=yt.disabled),"required"in yt&&t(13,O=yt.required),"textarea"in yt&&t(14,V=yt.textarea),"variant"in yt&&t(15,X=yt.variant),"noLabel"in yt&&t(16,Z=yt.noLabel),"label"in yt&&t(17,te=yt.label),"type"in yt&&t(18,J=yt.type),"value"in yt&&t(0,ie=yt.value),"files"in yt&&t(3,Ee=yt.files),"invalid"in yt&&t(1,de=yt.invalid),"updateInvalid"in yt&&t(19,Te=yt.updateInvalid),"dirty"in yt&&t(4,ve=yt.dirty),"prefix"in yt&&t(20,_e=yt.prefix),"suffix"in yt&&t(21,ot=yt.suffix),"validateOnValueChange"in yt&&t(43,it=yt.validateOnValueChange),"useNativeValidation"in yt&&t(44,It=yt.useNativeValidation),"withLeadingIcon"in yt&&t(22,Xe=yt.withLeadingIcon),"withTrailingIcon"in yt&&t(23,we=yt.withTrailingIcon),"input"in yt&&t(2,Ce=yt.input),"floatingLabel"in yt&&t(5,Re=yt.floatingLabel),"lineRipple"in yt&&t(6,le=yt.lineRipple),"notchedOutline"in yt&&t(7,Se=yt.notchedOutline),"$$scope"in yt&&t(90,r=yt.$$scope)},i.$$.update=()=>{if(i.$$.dirty[0]&4&&t(33,o=Ce&&Ce.getElement()),i.$$.dirty[0]&524290|i.$$.dirty[1]&262144&&me&&me.isValid()!==!de&&(Te?t(1,de=!me.isValid()):me.setValid(!de)),i.$$.dirty[1]&266240&&me&&me.getValidateOnValueChange()!==it&&me.setValidateOnValueChange(w(it)?!1:it),i.$$.dirty[1]&270336&&me&&me.setUseNativeValidation(w(It)?!0:It),i.$$.dirty[0]&4096|i.$$.dirty[1]&262144&&me&&me.setDisabled(M),i.$$.dirty[0]&1|i.$$.dirty[1]&786432&&me&&Pe&&li!==ie){t(50,li=ie);const yt=`${ie}`;me.getValue()!==yt&&me.setValue(yt)}},[ie,de,Ce,Ee,ve,Re,le,Se,x,C,T,S,M,O,V,X,Z,te,J,Te,_e,ot,Xe,we,he,Be,We,st,Ye,wt,bt,Je,ei,o,b,w,Pe,ut,Si,Ti,Xt,u,f,it,It,mi,Zi,Ci,ti,me,li,m,Me,Q,ae,$e,_t,Kt,di,wn,Ln,fn,Bi,Ki,Hn,Gn,Zr,zn,dn,gn,on,Sr,Wn,gr,Kr,an,He,wo,xo,co,Le,Ie,qe,ct,dt,Bt,Ge,Yt,Ft,oi,r]}class gf extends br{constructor(e){super(),wr(this,e,i9,t9,mr,{use:8,class:9,style:10,ripple:11,disabled:12,required:13,textarea:14,variant:15,noLabel:16,label:17,type:18,value:0,files:3,invalid:1,updateInvalid:19,dirty:4,prefix:20,suffix:21,validateOnValueChange:43,useNativeValidation:44,withLeadingIcon:22,withTrailingIcon:23,input:2,floatingLabel:5,lineRipple:6,notchedOutline:7,focus:45,blur:46,layout:47,getElement:48},null,[-1,-1,-1,-1])}get focus(){return this.$$.ctx[45]}get blur(){return this.$$.ctx[46]}get layout(){return this.$$.ctx[47]}get getElement(){return this.$$.ctx[48]}}function d5(i,e,t){const o=i.slice();return o[19]=e[t],o[22]=e,o[23]=t,o}function p5(i,e,t){const o=i.slice();return o[19]=e[t],o[20]=e,o[21]=t,o}function m5(i,e,t){const o=i.slice();return o[24]=e[t],o}function n9(i){let e,t,o,l,u,m,r,f,_,b,v,w,x,C,T,S;function M(Pe){i[10](Pe)}let O={label:"Means of Transport",style:"width:100%",$$slots:{default:[o9]},$$scope:{ctx:i}};i[4]!==void 0&&(O.value=i[4]),o=new w3({props:O}),bn.push(()=>Uo(o,"value",M));function V(Pe){i[11](Pe)}let X={label:"Longitude",readonly:!0};i[1]!==void 0&&(X.value=i[1]),r=new gf({props:X}),bn.push(()=>Uo(r,"value",V));function Z(Pe){i[12](Pe)}let te={label:"Latitude",readonly:!0};i[2]!==void 0&&(te.value=i[2]),b=new gf({props:te}),bn.push(()=>Uo(b,"value",Z));const J=[a9,s9],ie=[];function Ee(Pe,de){return Pe[0]===Lu.Time?0:Pe[0]===Lu.Distance?1:-1}return~(x=Ee(i))&&(C=ie[x]=J[x](i)),{c(){e=Ht("div"),t=Ht("div"),en(o.$$.fragment),u=Wi(),m=Ht("div"),en(r.$$.fragment),_=Wi(),en(b.$$.fragment),w=Wi(),C&&C.c(),T=kn(),this.h()},l(Pe){e=Gt(Pe,"DIV",{class:!0});var de=$t(e);t=Gt(de,"DIV",{});var Te=$t(t);un(o.$$.fragment,Te),Te.forEach(De),u=Xi(de),m=Gt(de,"DIV",{style:!0});var ve=$t(m);un(r.$$.fragment,ve),_=Xi(ve),un(b.$$.fragment,ve),ve.forEach(De),de.forEach(De),w=Xi(Pe),C&&C.l(Pe),T=kn(),this.h()},h(){Ou(m,"display","inline-flex"),qt(e,"class","transport-select svelte-1dgq3qf")},m(Pe,de){jt(Pe,e,de),Ut(e,t),tn(o,t,null),Ut(e,u),Ut(e,m),tn(r,m,null),Ut(m,_),tn(b,m,null),jt(Pe,w,de),~x&&ie[x].m(Pe,de),jt(Pe,T,de),S=!0},p(Pe,de){const Te={};de&134217728&&(Te.$$scope={dirty:de,ctx:Pe}),!l&&de&16&&(l=!0,Te.value=Pe[4],Vo(()=>l=!1)),o.$set(Te);const ve={};!f&&de&2&&(f=!0,ve.value=Pe[1],Vo(()=>f=!1)),r.$set(ve);const _e={};!v&&de&4&&(v=!0,_e.value=Pe[2],Vo(()=>v=!1)),b.$set(_e);let ot=x;x=Ee(Pe),x===ot?~x&&ie[x].p(Pe,de):(C&&(Fr(),Lt(ie[ot],1,1,()=>{ie[ot]=null}),Or()),~x?(C=ie[x],C?C.p(Pe,de):(C=ie[x]=J[x](Pe),C.c()),vt(C,1),C.m(T.parentNode,T)):C=null)},i(Pe){S||(vt(o.$$.fragment,Pe),vt(r.$$.fragment,Pe),vt(b.$$.fragment,Pe),vt(C),S=!0)},o(Pe){Lt(o.$$.fragment,Pe),Lt(r.$$.fragment,Pe),Lt(b.$$.fragment,Pe),Lt(C),S=!1},d(Pe){Pe&&De(e),nn(o),nn(r),nn(b),Pe&&De(w),~x&&ie[x].d(Pe),Pe&&De(T)}}}function r9(i){let e=i[24].label+"",t;return{c(){t=Kn(e)},l(o){t=Jn(o,e)},m(o,l){jt(o,t,l)},p:go,d(o){o&&De(t)}}}function g5(i){let e,t;return e=new x3({props:{value:i[24].value,$$slots:{default:[r9]},$$scope:{ctx:i}}}),{c(){en(e.$$.fragment)},l(o){un(e.$$.fragment,o)},m(o,l){tn(e,o,l),t=!0},p(o,l){const u={};l&134217728&&(u.$$scope={dirty:l,ctx:o}),e.$set(u)},i(o){t||(vt(e.$$.fragment,o),t=!0)},o(o){Lt(e.$$.fragment,o),t=!1},d(o){nn(e,o)}}}function o9(i){let e,t,o=i[5],l=[];for(let m=0;m<o.length;m+=1)l[m]=g5(m5(i,o,m));const u=m=>Lt(l[m],1,1,()=>{l[m]=null});return{c(){for(let m=0;m<l.length;m+=1)l[m].c();e=kn()},l(m){for(let r=0;r<l.length;r+=1)l[r].l(m);e=kn()},m(m,r){for(let f=0;f<l.length;f+=1)l[f].m(m,r);jt(m,e,r),t=!0},p(m,r){if(r&32){o=m[5];let f;for(f=0;f<o.length;f+=1){const _=m5(m,o,f);l[f]?(l[f].p(_,r),vt(l[f],1)):(l[f]=g5(_),l[f].c(),vt(l[f],1),l[f].m(e.parentNode,e))}for(Fr(),f=o.length;f<l.length;f+=1)u(f);Or()}},i(m){if(!t){for(let r=0;r<o.length;r+=1)vt(l[r]);t=!0}},o(m){l=l.filter(Boolean);for(let r=0;r<l.length;r+=1)Lt(l[r]);t=!1},d(m){Ja(l,m),m&&De(e)}}}function s9(i){let e,t,o,l,u,m,r,f,_,b,v,w=i[3],x=[];for(let T=0;T<w.length;T+=1)x[T]=y5(d5(i,w,T));const C=T=>Lt(x[T],1,1,()=>{x[T]=null});return r=new Ph({props:{variant:"raised",color:"secondary",style:"width:100%",$$slots:{default:[c9]},$$scope:{ctx:i}}}),r.$on("click",i[17]),b=new Ph({props:{variant:"raised",color:"primary",style:"width:100%",$$slots:{default:[d9]},$$scope:{ctx:i}}}),b.$on("click",i[18]),{c(){e=Ht("p"),t=Kn("Distance Isochrone"),o=Wi(),l=Ht("div");for(let T=0;T<x.length;T+=1)x[T].c();u=Wi(),m=Ht("div"),en(r.$$.fragment),f=Wi(),_=Ht("div"),en(b.$$.fragment),this.h()},l(T){e=Gt(T,"P",{});var S=$t(e);t=Jn(S,"Distance Isochrone"),S.forEach(De),o=Xi(T),l=Gt(T,"DIV",{style:!0});var M=$t(l);for(let X=0;X<x.length;X+=1)x[X].l(M);M.forEach(De),u=Xi(T),m=Gt(T,"DIV",{class:!0});var O=$t(m);un(r.$$.fragment,O),O.forEach(De),f=Xi(T),_=Gt(T,"DIV",{class:!0});var V=$t(_);un(b.$$.fragment,V),V.forEach(De),this.h()},h(){Ou(l,"display","inline-flex"),qt(m,"class","tool-button svelte-1dgq3qf"),qt(_,"class","tool-button svelte-1dgq3qf")},m(T,S){jt(T,e,S),Ut(e,t),jt(T,o,S),jt(T,l,S);for(let M=0;M<x.length;M+=1)x[M].m(l,null);jt(T,u,S),jt(T,m,S),tn(r,m,null),jt(T,f,S),jt(T,_,S),tn(b,_,null),v=!0},p(T,S){if(S&8){w=T[3];let V;for(V=0;V<w.length;V+=1){const X=d5(T,w,V);x[V]?(x[V].p(X,S),vt(x[V],1)):(x[V]=y5(X),x[V].c(),vt(x[V],1),x[V].m(l,null))}for(Fr(),V=w.length;V<x.length;V+=1)C(V);Or()}const M={};S&134217728&&(M.$$scope={dirty:S,ctx:T}),r.$set(M);const O={};S&134217728&&(O.$$scope={dirty:S,ctx:T}),b.$set(O)},i(T){if(!v){for(let S=0;S<w.length;S+=1)vt(x[S]);vt(r.$$.fragment,T),vt(b.$$.fragment,T),v=!0}},o(T){x=x.filter(Boolean);for(let S=0;S<x.length;S+=1)Lt(x[S]);Lt(r.$$.fragment,T),Lt(b.$$.fragment,T),v=!1},d(T){T&&De(e),T&&De(o),T&&De(l),Ja(x,T),T&&De(u),T&&De(m),nn(r),T&&De(f),T&&De(_),nn(b)}}}function a9(i){let e,t,o,l,u,m,r,f,_=i[3],b=[];for(let w=0;w<_.length;w+=1)b[w]=_5(p5(i,_,w));const v=w=>Lt(b[w],1,1,()=>{b[w]=null});return l=new Ph({props:{variant:"raised",color:"secondary",style:"width:100%",$$slots:{default:[g9]},$$scope:{ctx:i}}}),l.$on("click",i[14]),r=new Ph({props:{variant:"raised",color:"primary",style:"width:100%",$$slots:{default:[v9]},$$scope:{ctx:i}}}),r.$on("click",i[15]),{c(){e=Ht("div");for(let w=0;w<b.length;w+=1)b[w].c();t=Wi(),o=Ht("div"),en(l.$$.fragment),u=Wi(),m=Ht("div"),en(r.$$.fragment),this.h()},l(w){e=Gt(w,"DIV",{style:!0});var x=$t(e);for(let S=0;S<b.length;S+=1)b[S].l(x);x.forEach(De),t=Xi(w),o=Gt(w,"DIV",{class:!0});var C=$t(o);un(l.$$.fragment,C),C.forEach(De),u=Xi(w),m=Gt(w,"DIV",{class:!0});var T=$t(m);un(r.$$.fragment,T),T.forEach(De),this.h()},h(){Ou(e,"display","inline-flex"),qt(o,"class","tool-button svelte-1dgq3qf"),qt(m,"class","tool-button svelte-1dgq3qf")},m(w,x){jt(w,e,x);for(let C=0;C<b.length;C+=1)b[C].m(e,null);jt(w,t,x),jt(w,o,x),tn(l,o,null),jt(w,u,x),jt(w,m,x),tn(r,m,null),f=!0},p(w,x){if(x&8){_=w[3];let S;for(S=0;S<_.length;S+=1){const M=p5(w,_,S);b[S]?(b[S].p(M,x),vt(b[S],1)):(b[S]=_5(M),b[S].c(),vt(b[S],1),b[S].m(e,null))}for(Fr(),S=_.length;S<b.length;S+=1)v(S);Or()}const C={};x&134217728&&(C.$$scope={dirty:x,ctx:w}),l.$set(C);const T={};x&134217728&&(T.$$scope={dirty:x,ctx:w}),r.$set(T)},i(w){if(!f){for(let x=0;x<_.length;x+=1)vt(b[x]);vt(l.$$.fragment,w),vt(r.$$.fragment,w),f=!0}},o(w){b=b.filter(Boolean);for(let x=0;x<b.length;x+=1)Lt(b[x]);Lt(l.$$.fragment,w),Lt(r.$$.fragment,w),f=!1},d(w){w&&De(e),Ja(b,w),w&&De(t),w&&De(o),nn(l),w&&De(u),w&&De(m),nn(r)}}}function y5(i){let e,t,o;function l(m){i[16](m,i[19])}let u={label:i[19].distance+" km",type:"number"};return i[19].distance!==void 0&&(u.value=i[19].distance),e=new gf({props:u}),bn.push(()=>Uo(e,"value",l)),{c(){en(e.$$.fragment)},l(m){un(e.$$.fragment,m)},m(m,r){tn(e,m,r),o=!0},p(m,r){i=m;const f={};r&8&&(f.label=i[19].distance+" km"),!t&&r&8&&(t=!0,f.value=i[19].distance,Vo(()=>t=!1)),e.$set(f)},i(m){o||(vt(e.$$.fragment,m),o=!0)},o(m){Lt(e.$$.fragment,m),o=!1},d(m){nn(e,m)}}}function l9(i){let e;return{c(){e=Kn("delete")},l(t){e=Jn(t,"delete")},m(t,o){jt(t,e,o)},d(t){t&&De(e)}}}function u9(i){let e;return{c(){e=Kn("Clear")},l(t){e=Jn(t,"Clear")},m(t,o){jt(t,e,o)},d(t){t&&De(e)}}}function c9(i){let e,t,o,l;return e=new Dh({props:{class:"material-icons",$$slots:{default:[l9]},$$scope:{ctx:i}}}),o=new oh({props:{$$slots:{default:[u9]},$$scope:{ctx:i}}}),{c(){en(e.$$.fragment),t=Wi(),en(o.$$.fragment)},l(u){un(e.$$.fragment,u),t=Xi(u),un(o.$$.fragment,u)},m(u,m){tn(e,u,m),jt(u,t,m),tn(o,u,m),l=!0},p(u,m){const r={};m&134217728&&(r.$$scope={dirty:m,ctx:u}),e.$set(r);const f={};m&134217728&&(f.$$scope={dirty:m,ctx:u}),o.$set(f)},i(u){l||(vt(e.$$.fragment,u),vt(o.$$.fragment,u),l=!0)},o(u){Lt(e.$$.fragment,u),Lt(o.$$.fragment,u),l=!1},d(u){nn(e,u),u&&De(t),nn(o,u)}}}function h9(i){let e;return{c(){e=Kn("straighten")},l(t){e=Jn(t,"straighten")},m(t,o){jt(t,e,o)},d(t){t&&De(e)}}}function f9(i){let e;return{c(){e=Kn("Calculate")},l(t){e=Jn(t,"Calculate")},m(t,o){jt(t,e,o)},d(t){t&&De(e)}}}function d9(i){let e,t,o,l;return e=new Dh({props:{class:"material-icons",$$slots:{default:[h9]},$$scope:{ctx:i}}}),o=new oh({props:{$$slots:{default:[f9]},$$scope:{ctx:i}}}),{c(){en(e.$$.fragment),t=Wi(),en(o.$$.fragment)},l(u){un(e.$$.fragment,u),t=Xi(u),un(o.$$.fragment,u)},m(u,m){tn(e,u,m),jt(u,t,m),tn(o,u,m),l=!0},p(u,m){const r={};m&134217728&&(r.$$scope={dirty:m,ctx:u}),e.$set(r);const f={};m&134217728&&(f.$$scope={dirty:m,ctx:u}),o.$set(f)},i(u){l||(vt(e.$$.fragment,u),vt(o.$$.fragment,u),l=!0)},o(u){Lt(e.$$.fragment,u),Lt(o.$$.fragment,u),l=!1},d(u){nn(e,u),u&&De(t),nn(o,u)}}}function _5(i){let e,t,o;function l(m){i[13](m,i[19])}let u={label:i[19].time+" min",type:"number"};return i[19].time!==void 0&&(u.value=i[19].time),e=new gf({props:u}),bn.push(()=>Uo(e,"value",l)),{c(){en(e.$$.fragment)},l(m){un(e.$$.fragment,m)},m(m,r){tn(e,m,r),o=!0},p(m,r){i=m;const f={};r&8&&(f.label=i[19].time+" min"),!t&&r&8&&(t=!0,f.value=i[19].time,Vo(()=>t=!1)),e.$set(f)},i(m){o||(vt(e.$$.fragment,m),o=!0)},o(m){Lt(e.$$.fragment,m),o=!1},d(m){nn(e,m)}}}function p9(i){let e;return{c(){e=Kn("delete")},l(t){e=Jn(t,"delete")},m(t,o){jt(t,e,o)},d(t){t&&De(e)}}}function m9(i){let e;return{c(){e=Kn("Clear")},l(t){e=Jn(t,"Clear")},m(t,o){jt(t,e,o)},d(t){t&&De(e)}}}function g9(i){let e,t,o,l;return e=new Dh({props:{class:"material-icons",$$slots:{default:[p9]},$$scope:{ctx:i}}}),o=new oh({props:{$$slots:{default:[m9]},$$scope:{ctx:i}}}),{c(){en(e.$$.fragment),t=Wi(),en(o.$$.fragment)},l(u){un(e.$$.fragment,u),t=Xi(u),un(o.$$.fragment,u)},m(u,m){tn(e,u,m),jt(u,t,m),tn(o,u,m),l=!0},p(u,m){const r={};m&134217728&&(r.$$scope={dirty:m,ctx:u}),e.$set(r);const f={};m&134217728&&(f.$$scope={dirty:m,ctx:u}),o.$set(f)},i(u){l||(vt(e.$$.fragment,u),vt(o.$$.fragment,u),l=!0)},o(u){Lt(e.$$.fragment,u),Lt(o.$$.fragment,u),l=!1},d(u){nn(e,u),u&&De(t),nn(o,u)}}}function y9(i){let e;return{c(){e=Kn("access_time")},l(t){e=Jn(t,"access_time")},m(t,o){jt(t,e,o)},d(t){t&&De(e)}}}function _9(i){let e;return{c(){e=Kn("Calculate")},l(t){e=Jn(t,"Calculate")},m(t,o){jt(t,e,o)},d(t){t&&De(e)}}}function v9(i){let e,t,o,l;return e=new Dh({props:{class:"material-icons",$$slots:{default:[y9]},$$scope:{ctx:i}}}),o=new oh({props:{$$slots:{default:[_9]},$$scope:{ctx:i}}}),{c(){en(e.$$.fragment),t=Wi(),en(o.$$.fragment)},l(u){un(e.$$.fragment,u),t=Xi(u),un(o.$$.fragment,u)},m(u,m){tn(e,u,m),jt(u,t,m),tn(o,u,m),l=!0},p(u,m){const r={};m&134217728&&(r.$$scope={dirty:m,ctx:u}),e.$set(r);const f={};m&134217728&&(f.$$scope={dirty:m,ctx:u}),o.$set(f)},i(u){l||(vt(e.$$.fragment,u),vt(o.$$.fragment,u),l=!0)},o(u){Lt(e.$$.fragment,u),Lt(o.$$.fragment,u),l=!1},d(u){nn(e,u),u&&De(t),nn(o,u)}}}function b9(i){let e,t,o=Br.valhalla&&n9(i);return{c(){o&&o.c(),e=kn()},l(l){o&&o.l(l),e=kn()},m(l,u){o&&o.m(l,u),jt(l,e,u),t=!0},p(l,[u]){Br.valhalla&&o.p(l,u)},i(l){t||(vt(o),t=!0)},o(l){Lt(o),t=!1},d(l){o&&o.d(l),l&&De(e)}}}function w9(i,e,t){var te;let o,l;Yo(i,Bm,J=>t(8,o=J)),Yo(i,Pu,J=>t(9,l=J));let{contourType:u}=e,m,r,f=(te=Br.valhalla)==null?void 0:te.options.Contours;f||(f=[{time:5,distance:1,color:"ff0000"},{time:10,distance:3,color:"ffff00"},{time:15,distance:5,color:"0000ff"}]);let _=[{value:Y0.Walking,label:"Walking"},{value:Y0.Bicycle,label:"Bicycle"},{value:Y0.Car,label:"Car"}],b=_[0].value;const v=J=>{o[J].getIsochrone(Number(m),Number(r),J,b,JSON.parse(JSON.stringify(f)))},w=()=>{o[u].clearFeatures()};function x(J){b=J,t(4,b)}function C(J){m=J,t(1,m),t(9,l),t(8,o),t(0,u)}function T(J){r=J,t(2,r),t(9,l),t(8,o),t(0,u)}function S(J,ie){i.$$.not_equal(ie.time,J)&&(ie.time=J,t(3,f))}const M=()=>w(),O=()=>v(Lu.Time);function V(J,ie){i.$$.not_equal(ie.distance,J)&&(ie.distance=J,t(3,f))}const X=()=>w(),Z=()=>v(Lu.Distance);return i.$$set=J=>{"contourType"in J&&t(0,u=J.contourType)},i.$$.update=()=>{if(i.$$.dirty&769&&l){if(!o){const J={};Bm.update(()=>J)}o[u]||vl(Bm,o[u]=new wC(l,Br.valhalla.url),o),t(1,m=l.getCenter().lng),t(2,r=l.getCenter().lat),l.on("moveend",()=>{t(1,m=l.getCenter().lng),t(2,r=l.getCenter().lat)})}},[u,m,r,f,b,_,v,w,o,l,x,C,T,S,M,O,V,X,Z]}class A3 extends br{constructor(e){super(),wr(this,e,w9,b9,mr,{contourType:0})}}function v5(i,e,t){const o=i.slice();return o[19]=e[t],o}function x9(i){let e,t,o,l,u,m,r,f,_;function b(x){i[7](x)}let v={label:"Means of Transport",style:"width:100%",$$slots:{default:[k9]},$$scope:{ctx:i}};i[0]!==void 0&&(v.value=i[0]),t=new w3({props:v}),bn.push(()=>Uo(t,"value",b)),m=new Ph({props:{color:"primary",variant:"raised",style:"width:100%",$$slots:{default:[P9]},$$scope:{ctx:i}}}),m.$on("click",i[5]);let w=i[1]&&i[1].length>0&&w5(i);return{c(){e=Ht("div"),en(t.$$.fragment),l=Wi(),u=Ht("div"),en(m.$$.fragment),r=Wi(),w&&w.c(),f=kn(),this.h()},l(x){e=Gt(x,"DIV",{});var C=$t(e);un(t.$$.fragment,C),C.forEach(De),l=Xi(x),u=Gt(x,"DIV",{class:!0,style:!0});var T=$t(u);un(m.$$.fragment,T),T.forEach(De),r=Xi(x),w&&w.l(x),f=kn(),this.h()},h(){qt(u,"class","tool-button svelte-1ul6seo"),Ou(u,"display","flex"),Ou(u,"align-items","center")},m(x,C){jt(x,e,C),tn(t,e,null),jt(x,l,C),jt(x,u,C),tn(m,u,null),jt(x,r,C),w&&w.m(x,C),jt(x,f,C),_=!0},p(x,C){const T={};C&4194304&&(T.$$scope={dirty:C,ctx:x}),!o&&C&1&&(o=!0,T.value=x[0],Vo(()=>o=!1)),t.$set(T);const S={};C&4194308&&(S.$$scope={dirty:C,ctx:x}),m.$set(S),x[1]&&x[1].length>0?w?(w.p(x,C),C&2&&vt(w,1)):(w=w5(x),w.c(),vt(w,1),w.m(f.parentNode,f)):w&&(Fr(),Lt(w,1,1,()=>{w=null}),Or())},i(x){_||(vt(t.$$.fragment,x),vt(m.$$.fragment,x),vt(w),_=!0)},o(x){Lt(t.$$.fragment,x),Lt(m.$$.fragment,x),Lt(w),_=!1},d(x){x&&De(e),nn(t),x&&De(l),x&&De(u),nn(m),x&&De(r),w&&w.d(x),x&&De(f)}}}function A9(i){let e=i[19].label+"",t;return{c(){t=Kn(e)},l(o){t=Jn(o,e)},m(o,l){jt(o,t,l)},p:go,d(o){o&&De(t)}}}function b5(i){let e,t;return e=new x3({props:{value:i[19].value,$$slots:{default:[A9]},$$scope:{ctx:i}}}),{c(){en(e.$$.fragment)},l(o){un(e.$$.fragment,o)},m(o,l){tn(e,o,l),t=!0},p(o,l){const u={};l&4194304&&(u.$$scope={dirty:l,ctx:o}),e.$set(u)},i(o){t||(vt(e.$$.fragment,o),t=!0)},o(o){Lt(e.$$.fragment,o),t=!1},d(o){nn(e,o)}}}function k9(i){let e,t,o=i[4],l=[];for(let m=0;m<o.length;m+=1)l[m]=b5(v5(i,o,m));const u=m=>Lt(l[m],1,1,()=>{l[m]=null});return{c(){for(let m=0;m<l.length;m+=1)l[m].c();e=kn()},l(m){for(let r=0;r<l.length;r+=1)l[r].l(m);e=kn()},m(m,r){for(let f=0;f<l.length;f+=1)l[f].m(m,r);jt(m,e,r),t=!0},p(m,r){if(r&16){o=m[4];let f;for(f=0;f<o.length;f+=1){const _=v5(m,o,f);l[f]?(l[f].p(_,r),vt(l[f],1)):(l[f]=b5(_),l[f].c(),vt(l[f],1),l[f].m(e.parentNode,e))}for(Fr(),f=o.length;f<l.length;f+=1)u(f);Or()}},i(m){if(!t){for(let r=0;r<o.length;r+=1)vt(l[r]);t=!0}},o(m){l=l.filter(Boolean);for(let r=0;r<l.length;r+=1)Lt(l[r]);t=!1},d(m){Ja(l,m),m&&De(e)}}}function S9(i){let e;return{c(){e=Kn("route")},l(t){e=Jn(t,"route")},m(t,o){jt(t,e,o)},d(t){t&&De(e)}}}function C9(i){let e;return{c(){e=Kn("close")},l(t){e=Jn(t,"close")},m(t,o){jt(t,e,o)},d(t){t&&De(e)}}}function E9(i){let e;function t(u,m){return u[2]?C9:S9}let o=t(i),l=o(i);return{c(){l.c(),e=kn()},l(u){l.l(u),e=kn()},m(u,m){l.m(u,m),jt(u,e,m)},p(u,m){o!==(o=t(u))&&(l.d(1),l=o(u),l&&(l.c(),l.m(e.parentNode,e)))},d(u){l.d(u),u&&De(e)}}}function I9(i){let e;return{c(){e=Kn("Start routing")},l(t){e=Jn(t,"Start routing")},m(t,o){jt(t,e,o)},d(t){t&&De(e)}}}function T9(i){let e;return{c(){e=Kn("Stop routing")},l(t){e=Jn(t,"Stop routing")},m(t,o){jt(t,e,o)},d(t){t&&De(e)}}}function L9(i){let e;function t(u,m){return u[2]?T9:I9}let o=t(i),l=o(i);return{c(){l.c(),e=kn()},l(u){l.l(u),e=kn()},m(u,m){l.m(u,m),jt(u,e,m)},p(u,m){o!==(o=t(u))&&(l.d(1),l=o(u),l&&(l.c(),l.m(e.parentNode,e)))},d(u){l.d(u),u&&De(e)}}}function P9(i){let e,t,o,l;return e=new Dh({props:{class:"material-icons",$$slots:{default:[E9]},$$scope:{ctx:i}}}),o=new oh({props:{$$slots:{default:[L9]},$$scope:{ctx:i}}}),{c(){en(e.$$.fragment),t=Wi(),en(o.$$.fragment)},l(u){un(e.$$.fragment,u),t=Xi(u),un(o.$$.fragment,u)},m(u,m){tn(e,u,m),jt(u,t,m),tn(o,u,m),l=!0},p(u,m){const r={};m&4194308&&(r.$$scope={dirty:m,ctx:u}),e.$set(r);const f={};m&4194308&&(f.$$scope={dirty:m,ctx:u}),o.$set(f)},i(u){l||(vt(e.$$.fragment,u),vt(o.$$.fragment,u),l=!0)},o(u){Lt(e.$$.fragment,u),Lt(o.$$.fragment,u),l=!1},d(u){nn(e,u),u&&De(t),nn(o,u)}}}function w5(i){let e,t,o,l,u,m,r,f,_;t=new Ph({props:{variant:"raised",color:"secondary",style:"width:100%",$$slots:{default:[O9]},$$scope:{ctx:i}}}),t.$on("click",i[8]),u=new gf({props:{value:`${i[1][0].lng.toFixed(6)}, ${i[1][0].lat.toFixed(6)}`,label:"From",readonly:!0,style:"width: 50%"}});let b=i[1].length>1&&x5(i),v=i[3]&&A5(i);return{c(){e=Ht("div"),en(t.$$.fragment),o=Wi(),l=Ht("div"),en(u.$$.fragment),m=Wi(),b&&b.c(),r=Wi(),v&&v.c(),f=kn(),this.h()},l(w){e=Gt(w,"DIV",{class:!0});var x=$t(e);un(t.$$.fragment,x),x.forEach(De),o=Xi(w),l=Gt(w,"DIV",{style:!0});var C=$t(l);un(u.$$.fragment,C),m=Xi(C),b&&b.l(C),C.forEach(De),r=Xi(w),v&&v.l(w),f=kn(),this.h()},h(){qt(e,"class","sub-button tool-button svelte-1ul6seo"),Ou(l,"display","inline-flex"),Ou(l,"width","100%")},m(w,x){jt(w,e,x),tn(t,e,null),jt(w,o,x),jt(w,l,x),tn(u,l,null),Ut(l,m),b&&b.m(l,null),jt(w,r,x),v&&v.m(w,x),jt(w,f,x),_=!0},p(w,x){const C={};x&4194304&&(C.$$scope={dirty:x,ctx:w}),t.$set(C);const T={};x&2&&(T.value=`${w[1][0].lng.toFixed(6)}, ${w[1][0].lat.toFixed(6)}`),u.$set(T),w[1].length>1?b?(b.p(w,x),x&2&&vt(b,1)):(b=x5(w),b.c(),vt(b,1),b.m(l,null)):b&&(Fr(),Lt(b,1,1,()=>{b=null}),Or()),w[3]?v?(v.p(w,x),x&8&&vt(v,1)):(v=A5(w),v.c(),vt(v,1),v.m(f.parentNode,f)):v&&(Fr(),Lt(v,1,1,()=>{v=null}),Or())},i(w){_||(vt(t.$$.fragment,w),vt(u.$$.fragment,w),vt(b),vt(v),_=!0)},o(w){Lt(t.$$.fragment,w),Lt(u.$$.fragment,w),Lt(b),Lt(v),_=!1},d(w){w&&De(e),nn(t),w&&De(o),w&&De(l),nn(u),b&&b.d(),w&&De(r),v&&v.d(w),w&&De(f)}}}function M9(i){let e;return{c(){e=Kn("delete")},l(t){e=Jn(t,"delete")},m(t,o){jt(t,e,o)},d(t){t&&De(e)}}}function D9(i){let e;return{c(){e=Kn("Clear")},l(t){e=Jn(t,"Clear")},m(t,o){jt(t,e,o)},d(t){t&&De(e)}}}function O9(i){let e,t,o,l;return e=new Dh({props:{class:"material-icons",$$slots:{default:[M9]},$$scope:{ctx:i}}}),o=new oh({props:{$$slots:{default:[D9]},$$scope:{ctx:i}}}),{c(){en(e.$$.fragment),t=Wi(),en(o.$$.fragment)},l(u){un(e.$$.fragment,u),t=Xi(u),un(o.$$.fragment,u)},m(u,m){tn(e,u,m),jt(u,t,m),tn(o,u,m),l=!0},p(u,m){const r={};m&4194304&&(r.$$scope={dirty:m,ctx:u}),e.$set(r);const f={};m&4194304&&(f.$$scope={dirty:m,ctx:u}),o.$set(f)},i(u){l||(vt(e.$$.fragment,u),vt(o.$$.fragment,u),l=!0)},o(u){Lt(e.$$.fragment,u),Lt(o.$$.fragment,u),l=!1},d(u){nn(e,u),u&&De(t),nn(o,u)}}}function x5(i){let e,t;return e=new gf({props:{value:`${i[1][i[1].length-1].lng.toFixed(6)}, ${i[1][i[1].length-1].lat.toFixed(6)}`,label:"To",readonly:!0,style:"width: 50%"}}),{c(){en(e.$$.fragment)},l(o){un(e.$$.fragment,o)},m(o,l){tn(e,o,l),t=!0},p(o,l){const u={};l&2&&(u.value=`${o[1][o[1].length-1].lng.toFixed(6)}, ${o[1][o[1].length-1].lat.toFixed(6)}`),e.$set(u)},i(o){t||(vt(e.$$.fragment,o),t=!0)},o(o){Lt(e.$$.fragment,o),t=!1},d(o){nn(e,o)}}}function A5(i){let e,t,o,l,u;return t=new gf({props:{value:`${i[3].length} km`,label:"Length",readonly:!0,style:"width: 50%"}}),l=new gf({props:{value:`${i[3].time} min`,label:"Time",readonly:!0,style:"width: 50%"}}),{c(){e=Ht("div"),en(t.$$.fragment),o=Wi(),en(l.$$.fragment),this.h()},l(m){e=Gt(m,"DIV",{style:!0});var r=$t(e);un(t.$$.fragment,r),o=Xi(r),un(l.$$.fragment,r),r.forEach(De),this.h()},h(){Ou(e,"display","inline-flex"),Ou(e,"width","100%")},m(m,r){jt(m,e,r),tn(t,e,null),Ut(e,o),tn(l,e,null),u=!0},p(m,r){const f={};r&8&&(f.value=`${m[3].length} km`),t.$set(f);const _={};r&8&&(_.value=`${m[3].time} min`),l.$set(_)},i(m){u||(vt(t.$$.fragment,m),vt(l.$$.fragment,m),u=!0)},o(m){Lt(t.$$.fragment,m),Lt(l.$$.fragment,m),u=!1},d(m){m&&De(e),nn(t),nn(l)}}}function F9(i){let e,t,o=Br.valhalla&&x9(i);return{c(){o&&o.c(),e=kn()},l(l){o&&o.l(l),e=kn()},m(l,u){o&&o.m(l,u),jt(l,e,u),t=!0},p(l,[u]){Br.valhalla&&o.p(l,u)},i(l){t||(vt(o),t=!0)},o(l){Lt(o),t=!1},d(l){o&&o.d(l),l&&De(e)}}}const Nf="routing-controls-source-line",C2="routing-controls-layer-line",E2="routing-controls-layer-line-label",I2="routing-controls-layer-symbol",Ed="routing-controls-source-symbol";function R9(i,e,t){let o,l,u;Yo(i,q2,te=>t(9,o=te)),Yo(i,Pu,te=>t(10,l=te)),Yo(i,xd,te=>t(1,u=te));const m=Br.valhalla.options.routing;let r=!1,f=[{value:Y0.Walking,label:"Walking"},{value:Y0.Bicycle,label:"Bicycle"},{value:Y0.Car,label:"Car"}],_=f[0].value,b;ks(()=>{u||xd.update(()=>[])}),nh(()=>{r===!0&&x()});const v=()=>{r?x():w()},w=()=>{l&&(l.getCanvas().style.cursor="crosshair",t(2,r=!0),l.on("click",C),l.fire("routing.on"))},x=()=>{t(2,r=!1),l&&(l.getCanvas().style.cursor="",l.off("click",C),l.fire("routing.off"))},C=te=>{const J=te.lngLat;u||xd.update(()=>[]),xd.update(()=>[...u,J])},T=()=>{l&&(l.getLayer(C2)&&l.removeLayer(C2),l.getLayer(E2)&&l.removeLayer(E2),l.getLayer(I2)&&l.removeLayer(I2),l.getSource(Nf)&&l.removeSource(Nf),l.getSource(Ed)&&l.removeSource(Ed)),xd.update(()=>[])},S=()=>{if(!u||u&&u.length<2){t(3,b=void 0);return}const te=`${Br.valhalla.url}/route`,J={locations:u.map(Ee=>({lon:Ee.lng,lat:Ee.lat})),costing:_,costing_options:{auto:{country_crossing_penalty:2e3}},units:"kilometers",id:"my_work_route"},ie=`${te}?json=${JSON.stringify(J)}`;fetch(ie).then(Ee=>Ee.json()).then(Ee=>{if("error"in Ee)throw u.pop(),new Error(`${Ee.status} (${Ee.status_code}): ${Ee.error} (${Ee.error_code})`);let Pe=Ee.trip.legs.map(_e=>V(_e.shape)),de=[];Pe.forEach(_e=>{de=[...de,..._e]}),t(3,b=Ee.trip.summary),t(3,b.length=Number(b.length.toFixed(2)),b),t(3,b.time=Number((b.time/60).toFixed()),b);const Te={type:"FeatureCollection",features:Ee.trip.legs.map(_e=>{const ot=V(_e.shape),it={length:Number(_e.summary.length.toFixed(2)),time:Number((_e.summary.time/60).toFixed())};return M(ot,it)})},ve=O(u.map(_e=>[_e.lng,_e.lat]));l&&(l.getSource(Nf)?(l.getSource(Nf).setData(Te),l.getSource(Ed).setData(ve)):(l.addSource(Nf,{type:"geojson",data:Te}),l.addSource(Ed,{type:"geojson",data:ve}),l.addLayer({id:C2,type:"line",source:Nf,paint:{"line-color":"rgb(255,0,0)","line-width":4}}),l.addLayer({id:E2,type:"symbol",source:Nf,layout:{"text-field":["concat",["to-string",["get","length"]]," km (",["to-string",["get","time"]]," min)"],"text-font":m.font,"text-size":m.fontSize,"symbol-placement":"line","text-allow-overlap":!0,"text-ignore-placement":!0},paint:{"text-color":m.fontColor,"text-halo-color":m.fontHaloColor,"text-halo-width":m.fontHalo}}),l.addLayer({id:I2,type:"symbol",source:Ed,layout:{"icon-image":m.iconImage,"icon-size":m.iconSize,"text-field":["get","text"],"text-font":m.font,"text-size":m.fontSize,"text-variable-anchor":["top","bottom","left","right"],"text-radial-offset":.8,"text-justify":"auto"},paint:{"text-color":m.fontColor,"text-halo-color":m.fontHaloColor,"text-halo-width":m.fontHalo}})))}).catch(Ee=>{q2.update(()=>[...o,Ee.message])})},M=(te=[],J={})=>({type:"Feature",properties:J,geometry:{type:"LineString",coordinates:te}}),O=(te=[])=>({type:"FeatureCollection",features:te.map((J,ie)=>{let Ee=(ie+1).toString();return ie===0?Ee="From":ie===te.length-1&&(Ee="To"),{type:"Feature",properties:{text:Ee},geometry:{type:"Point",coordinates:J}}})}),V=(te,J=6)=>{let ie=0,Ee=0,Pe=0,de=[],Te=0,ve=0,_e=null,ot,it,It=Math.pow(10,J||6);for(;ie<te.length;){_e=null,Te=0,ve=0;do _e=te.charCodeAt(ie++)-63,ve|=(_e&31)<<Te,Te+=5;while(_e>=32);ot=ve&1?~(ve>>1):ve>>1,Te=ve=0;do _e=te.charCodeAt(ie++)-63,ve|=(_e&31)<<Te,Te+=5;while(_e>=32);it=ve&1?~(ve>>1):ve>>1,Ee+=ot,Pe+=it,de.push([Pe/It,Ee/It])}return de};function X(te){_=te,t(0,_)}const Z=()=>T();return i.$$.update=()=>{i.$$.dirty&2&&S(),i.$$.dirty&1&&S()},[_,u,r,b,f,v,T,X,Z]}class B9 extends br{constructor(e){super(),wr(this,e,R9,F9,mr,{})}}function k5(i){let e,t,o;return t=new kC({props:{$$slots:{default:[K9]},$$scope:{ctx:i}}}),{c(){e=Ht("div"),en(t.$$.fragment),this.h()},l(l){e=Gt(l,"DIV",{class:!0});var u=$t(e);un(t.$$.fragment,u),u.forEach(De),this.h()},h(){qt(e,"class","accordion-container")},m(l,u){jt(l,e,u),tn(t,e,null),o=!0},p(l,u){const m={};u&131134&&(m.$$scope={dirty:u,ctx:l}),t.$set(m)},i(l){o||(vt(t.$$.fragment,l),o=!0)},o(l){Lt(t.$$.fragment,l),o=!1},d(l){l&&De(e),nn(t)}}}function z9(i){let e,t,o,l,u,m,r,f,_;return{c(){e=Ht("div"),t=Ht("p"),o=Kn("Measuring tool"),l=Wi(),u=Ht("div"),m=Ht("i"),this.h()},l(b){e=Gt(b,"DIV",{class:!0});var v=$t(e);t=Gt(v,"P",{class:!0});var w=$t(t);o=Jn(w,"Measuring tool"),w.forEach(De),l=Xi(v),u=Gt(v,"DIV",{class:!0});var x=$t(u);m=Gt(x,"I",{class:!0}),$t(m).forEach(De),x.forEach(De),v.forEach(De),this.h()},h(){qt(t,"class","level-left"),qt(m,"class",r=`fas ${i[1]?"fa-chevron-down":"fa-chevron-up"}`),qt(u,"class","icon is-small level-right menu-button"),qt(e,"class","level")},m(b,v){jt(b,e,v),Ut(e,t),Ut(t,o),Ut(e,l),Ut(e,u),Ut(u,m),f||(_=xn(u,"click",i[6]),f=!0)},p(b,v){v&2&&r!==(r=`fas ${b[1]?"fa-chevron-down":"fa-chevron-up"}`)&&qt(m,"class",r)},d(b){b&&De(e),f=!1,_()}}}function N9(i){let e,t;return e=new X7({}),{c(){en(e.$$.fragment)},l(o){un(e.$$.fragment,o)},m(o,l){tn(e,o,l),t=!0},i(o){t||(vt(e.$$.fragment,o),t=!0)},o(o){Lt(e.$$.fragment,o),t=!1},d(o){nn(e,o)}}}function j9(i){let e,t,o,l;return e=new V1({props:{$$slots:{default:[z9]},$$scope:{ctx:i}}}),o=new U1({props:{$$slots:{default:[N9]},$$scope:{ctx:i}}}),{c(){en(e.$$.fragment),t=Wi(),en(o.$$.fragment)},l(u){un(e.$$.fragment,u),t=Xi(u),un(o.$$.fragment,u)},m(u,m){tn(e,u,m),jt(u,t,m),tn(o,u,m),l=!0},p(u,m){const r={};m&131074&&(r.$$scope={dirty:m,ctx:u}),e.$set(r);const f={};m&131072&&(f.$$scope={dirty:m,ctx:u}),o.$set(f)},i(u){l||(vt(e.$$.fragment,u),vt(o.$$.fragment,u),l=!0)},o(u){Lt(e.$$.fragment,u),Lt(o.$$.fragment,u),l=!1},d(u){nn(e,u),u&&De(t),nn(o,u)}}}function U9(i){let e,t,o,l,u,m,r,f,_;return{c(){e=Ht("div"),t=Ht("p"),o=Kn("Routing tool"),l=Wi(),u=Ht("div"),m=Ht("i"),this.h()},l(b){e=Gt(b,"DIV",{class:!0});var v=$t(e);t=Gt(v,"P",{class:!0});var w=$t(t);o=Jn(w,"Routing tool"),w.forEach(De),l=Xi(v),u=Gt(v,"DIV",{class:!0});var x=$t(u);m=Gt(x,"I",{class:!0}),$t(m).forEach(De),x.forEach(De),v.forEach(De),this.h()},h(){qt(t,"class","level-left"),qt(m,"class",r=`fas ${i[2]?"fa-chevron-down":"fa-chevron-up"}`),qt(u,"class","icon is-small level-right menu-button"),qt(e,"class","level")},m(b,v){jt(b,e,v),Ut(e,t),Ut(t,o),Ut(e,l),Ut(e,u),Ut(u,m),f||(_=xn(u,"click",i[8]),f=!0)},p(b,v){v&4&&r!==(r=`fas ${b[2]?"fa-chevron-down":"fa-chevron-up"}`)&&qt(m,"class",r)},d(b){b&&De(e),f=!1,_()}}}function V9(i){let e,t;return e=new B9({}),{c(){en(e.$$.fragment)},l(o){un(e.$$.fragment,o)},m(o,l){tn(e,o,l),t=!0},i(o){t||(vt(e.$$.fragment,o),t=!0)},o(o){Lt(e.$$.fragment,o),t=!1},d(o){nn(e,o)}}}function q9(i){let e,t,o,l;return e=new V1({props:{$$slots:{default:[U9]},$$scope:{ctx:i}}}),o=new U1({props:{$$slots:{default:[V9]},$$scope:{ctx:i}}}),{c(){en(e.$$.fragment),t=Wi(),en(o.$$.fragment)},l(u){un(e.$$.fragment,u),t=Xi(u),un(o.$$.fragment,u)},m(u,m){tn(e,u,m),jt(u,t,m),tn(o,u,m),l=!0},p(u,m){const r={};m&131076&&(r.$$scope={dirty:m,ctx:u}),e.$set(r);const f={};m&131072&&(f.$$scope={dirty:m,ctx:u}),o.$set(f)},i(u){l||(vt(e.$$.fragment,u),vt(o.$$.fragment,u),l=!0)},o(u){Lt(e.$$.fragment,u),Lt(o.$$.fragment,u),l=!1},d(u){nn(e,u),u&&De(t),nn(o,u)}}}function H9(i){let e,t,o,l,u,m,r,f,_;return{c(){e=Ht("div"),t=Ht("p"),o=Kn("Time Isochrone"),l=Wi(),u=Ht("div"),m=Ht("i"),this.h()},l(b){e=Gt(b,"DIV",{class:!0});var v=$t(e);t=Gt(v,"P",{class:!0});var w=$t(t);o=Jn(w,"Time Isochrone"),w.forEach(De),l=Xi(v),u=Gt(v,"DIV",{class:!0});var x=$t(u);m=Gt(x,"I",{class:!0}),$t(m).forEach(De),x.forEach(De),v.forEach(De),this.h()},h(){qt(t,"class","level-left"),qt(m,"class",r=`fas ${i[3]?"fa-chevron-down":"fa-chevron-up"}`),qt(u,"class","icon is-small level-right menu-button"),qt(e,"class","level")},m(b,v){jt(b,e,v),Ut(e,t),Ut(t,o),Ut(e,l),Ut(e,u),Ut(u,m),f||(_=xn(u,"click",i[10]),f=!0)},p(b,v){v&8&&r!==(r=`fas ${b[3]?"fa-chevron-down":"fa-chevron-up"}`)&&qt(m,"class",r)},d(b){b&&De(e),f=!1,_()}}}function G9(i){let e,t,o;function l(m){i[11](m)}let u={};return i[5].Time!==void 0&&(u.contourType=i[5].Time),e=new A3({props:u}),bn.push(()=>Uo(e,"contourType",l)),{c(){en(e.$$.fragment)},l(m){un(e.$$.fragment,m)},m(m,r){tn(e,m,r),o=!0},p(m,r){const f={};!t&&r&32&&(t=!0,f.contourType=m[5].Time,Vo(()=>t=!1)),e.$set(f)},i(m){o||(vt(e.$$.fragment,m),o=!0)},o(m){Lt(e.$$.fragment,m),o=!1},d(m){nn(e,m)}}}function W9(i){let e,t,o,l;return e=new V1({props:{$$slots:{default:[H9]},$$scope:{ctx:i}}}),o=new U1({props:{$$slots:{default:[G9]},$$scope:{ctx:i}}}),{c(){en(e.$$.fragment),t=Wi(),en(o.$$.fragment)},l(u){un(e.$$.fragment,u),t=Xi(u),un(o.$$.fragment,u)},m(u,m){tn(e,u,m),jt(u,t,m),tn(o,u,m),l=!0},p(u,m){const r={};m&131080&&(r.$$scope={dirty:m,ctx:u}),e.$set(r);const f={};m&131104&&(f.$$scope={dirty:m,ctx:u}),o.$set(f)},i(u){l||(vt(e.$$.fragment,u),vt(o.$$.fragment,u),l=!0)},o(u){Lt(e.$$.fragment,u),Lt(o.$$.fragment,u),l=!1},d(u){nn(e,u),u&&De(t),nn(o,u)}}}function X9(i){let e,t,o,l,u,m,r,f,_;return{c(){e=Ht("div"),t=Ht("p"),o=Kn("Distance Isochrone"),l=Wi(),u=Ht("div"),m=Ht("i"),this.h()},l(b){e=Gt(b,"DIV",{class:!0});var v=$t(e);t=Gt(v,"P",{class:!0});var w=$t(t);o=Jn(w,"Distance Isochrone"),w.forEach(De),l=Xi(v),u=Gt(v,"DIV",{class:!0});var x=$t(u);m=Gt(x,"I",{class:!0}),$t(m).forEach(De),x.forEach(De),v.forEach(De),this.h()},h(){qt(t,"class","level-left"),qt(m,"class",r=`fas ${i[4]?"fa-chevron-down":"fa-chevron-up"}`),qt(u,"class","icon is-small level-right menu-button"),qt(e,"class","level")},m(b,v){jt(b,e,v),Ut(e,t),Ut(t,o),Ut(e,l),Ut(e,u),Ut(u,m),f||(_=xn(u,"click",i[13]),f=!0)},p(b,v){v&16&&r!==(r=`fas ${b[4]?"fa-chevron-down":"fa-chevron-up"}`)&&qt(m,"class",r)},d(b){b&&De(e),f=!1,_()}}}function Y9(i){let e,t,o;function l(m){i[14](m)}let u={};return i[5].Distance!==void 0&&(u.contourType=i[5].Distance),e=new A3({props:u}),bn.push(()=>Uo(e,"contourType",l)),{c(){en(e.$$.fragment)},l(m){un(e.$$.fragment,m)},m(m,r){tn(e,m,r),o=!0},p(m,r){const f={};!t&&r&32&&(t=!0,f.contourType=m[5].Distance,Vo(()=>t=!1)),e.$set(f)},i(m){o||(vt(e.$$.fragment,m),o=!0)},o(m){Lt(e.$$.fragment,m),o=!1},d(m){nn(e,m)}}}function Z9(i){let e,t,o,l;return e=new V1({props:{$$slots:{default:[X9]},$$scope:{ctx:i}}}),o=new U1({props:{$$slots:{default:[Y9]},$$scope:{ctx:i}}}),{c(){en(e.$$.fragment),t=Wi(),en(o.$$.fragment)},l(u){un(e.$$.fragment,u),t=Xi(u),un(o.$$.fragment,u)},m(u,m){tn(e,u,m),jt(u,t,m),tn(o,u,m),l=!0},p(u,m){const r={};m&131088&&(r.$$scope={dirty:m,ctx:u}),e.$set(r);const f={};m&131104&&(f.$$scope={dirty:m,ctx:u}),o.$set(f)},i(u){l||(vt(e.$$.fragment,u),vt(o.$$.fragment,u),l=!0)},o(u){Lt(e.$$.fragment,u),Lt(o.$$.fragment,u),l=!1},d(u){nn(e,u),u&&De(t),nn(o,u)}}}function K9(i){let e,t,o,l,u,m,r,f,_,b,v,w;function x(Z){i[7](Z)}let C={$$slots:{default:[j9]},$$scope:{ctx:i}};i[1]!==void 0&&(C.open=i[1]),e=new Up({props:C}),bn.push(()=>Uo(e,"open",x));function T(Z){i[9](Z)}let S={$$slots:{default:[q9]},$$scope:{ctx:i}};i[2]!==void 0&&(S.open=i[2]),l=new Up({props:S}),bn.push(()=>Uo(l,"open",T));function M(Z){i[12](Z)}let O={$$slots:{default:[W9]},$$scope:{ctx:i}};i[3]!==void 0&&(O.open=i[3]),r=new Up({props:O}),bn.push(()=>Uo(r,"open",M));function V(Z){i[15](Z)}let X={$$slots:{default:[Z9]},$$scope:{ctx:i}};return i[4]!==void 0&&(X.open=i[4]),b=new Up({props:X}),bn.push(()=>Uo(b,"open",V)),{c(){en(e.$$.fragment),o=Wi(),en(l.$$.fragment),m=Wi(),en(r.$$.fragment),_=Wi(),en(b.$$.fragment)},l(Z){un(e.$$.fragment,Z),o=Xi(Z),un(l.$$.fragment,Z),m=Xi(Z),un(r.$$.fragment,Z),_=Xi(Z),un(b.$$.fragment,Z)},m(Z,te){tn(e,Z,te),jt(Z,o,te),tn(l,Z,te),jt(Z,m,te),tn(r,Z,te),jt(Z,_,te),tn(b,Z,te),w=!0},p(Z,te){const J={};te&131074&&(J.$$scope={dirty:te,ctx:Z}),!t&&te&2&&(t=!0,J.open=Z[1],Vo(()=>t=!1)),e.$set(J);const ie={};te&131076&&(ie.$$scope={dirty:te,ctx:Z}),!u&&te&4&&(u=!0,ie.open=Z[2],Vo(()=>u=!1)),l.$set(ie);const Ee={};te&131112&&(Ee.$$scope={dirty:te,ctx:Z}),!f&&te&8&&(f=!0,Ee.open=Z[3],Vo(()=>f=!1)),r.$set(Ee);const Pe={};te&131120&&(Pe.$$scope={dirty:te,ctx:Z}),!v&&te&16&&(v=!0,Pe.open=Z[4],Vo(()=>v=!1)),b.$set(Pe)},i(Z){w||(vt(e.$$.fragment,Z),vt(l.$$.fragment,Z),vt(r.$$.fragment,Z),vt(b.$$.fragment,Z),w=!0)},o(Z){Lt(e.$$.fragment,Z),Lt(l.$$.fragment,Z),Lt(r.$$.fragment,Z),Lt(b.$$.fragment,Z),w=!1},d(Z){nn(e,Z),Z&&De(o),nn(l,Z),Z&&De(m),nn(r,Z),Z&&De(_),nn(b,Z)}}}function J9(i){let e,t,o=i[0]&&k5(i);return{c(){o&&o.c(),e=kn()},l(l){o&&o.l(l),e=kn()},m(l,u){o&&o.m(l,u),jt(l,e,u),t=!0},p(l,[u]){l[0]?o?(o.p(l,u),u&1&&vt(o,1)):(o=k5(l),o.c(),vt(o,1),o.m(e.parentNode,e)):o&&(Fr(),Lt(o,1,1,()=>{o=null}),Or())},i(l){t||(vt(o),t=!0)},o(l){Lt(o),t=!1},d(l){o&&o.d(l),l&&De(e)}}}function Q9(i,e,t){let o;Yo(i,Ad,V=>t(16,o=V));let{isAdvancedTabVisible:l=!1}=e,u=!0,m=!1,r=!1,f=!1;ks(()=>{switch(o){case"Measure":t(1,u=!0);break;case"Routing":t(2,m=!0);break;case"TimeIsochrone":t(3,r=!0);break;case"DistanceIsochrone":t(4,f=!0);break}});const _=()=>t(1,u=!u);function b(V){u=V,t(1,u)}const v=()=>t(2,m=!m);function w(V){m=V,t(2,m)}const x=()=>t(3,r=!r);function C(V){i.$$.not_equal(Lu.Time,V)&&(Lu.Time=V,t(5,Lu))}function T(V){r=V,t(3,r)}const S=()=>t(4,f=!f);function M(V){i.$$.not_equal(Lu.Distance,V)&&(Lu.Distance=V,t(5,Lu))}function O(V){f=V,t(4,f)}return i.$$set=V=>{"isAdvancedTabVisible"in V&&t(0,l=V.isAdvancedTabVisible)},i.$$.update=()=>{i.$$.dirty&30&&(u===!0?vl(Ad,o="Measure",o):m===!0?vl(Ad,o="Routing",o):r===!0?vl(Ad,o="TimeIsochrone",o):f===!0&&vl(Ad,o="DistanceIsochrone",o))},[l,u,m,r,f,Lu,_,b,v,w,x,C,T,S,M,O]}class $9 extends br{constructor(e){super(),wr(this,e,Q9,J9,mr,{isAdvancedTabVisible:0})}}var Md=(i=>(i.LAYERS="Layers",i.ADVANCED="Advanced",i))(Md||{});const{window:lg}=cg;function S5(i,e,t){const o=i.slice();return o[23]=e[t],o}function C5(i){let e,t,o,l,u,m,r=i[23].label+"",f,_,b,v,w,x;function C(){return i[13](i[23])}return{c(){e=Ht("li"),t=Ht("a"),o=Ht("span"),l=Ht("i"),u=Wi(),m=Ht("span"),f=Kn(r),b=Wi(),v=Ht("li"),this.h()},l(T){e=Gt(T,"LI",{class:!0});var S=$t(e);t=Gt(S,"A",{});var M=$t(t);o=Gt(M,"SPAN",{class:!0});var O=$t(o);l=Gt(O,"I",{class:!0,"aria-hidden":!0}),$t(l).forEach(De),O.forEach(De),u=Xi(M),m=Gt(M,"SPAN",{});var V=$t(m);f=Jn(V,r),V.forEach(De),M.forEach(De),S.forEach(De),b=Xi(T),v=Gt(T,"LI",{}),$t(v).forEach(De),this.h()},h(){qt(l,"class",Ud(i[23].icon)+" svelte-1cz9ygz"),qt(l,"aria-hidden","true"),qt(o,"class","icon ml-2"),qt(e,"class",_=i[3].label===i[23].label?"is-active":"")},m(T,S){jt(T,e,S),Ut(e,t),Ut(t,o),Ut(o,l),Ut(t,u),Ut(t,m),Ut(m,f),jt(T,b,S),jt(T,v,S),w||(x=xn(e,"click",C),w=!0)},p(T,S){i=T,S&8&&_!==(_=i[3].label===i[23].label?"is-active":"")&&qt(e,"class",_)},d(T){T&&De(e),T&&De(b),T&&De(v),w=!1,x()}}}function eM(i){let e,t,o,l,u,m,r,f,_=i[9],b=[];for(let v=0;v<_.length;v+=1)b[v]=C5(S5(i,_,v));return u=new vC({props:{isLayersTabVisible:i[5]}}),r=new $9({props:{isAdvancedTabVisible:i[6]}}),{c(){e=Ht("div"),t=Ht("div"),o=Ht("ul");for(let v=0;v<b.length;v+=1)b[v].c();l=Wi(),en(u.$$.fragment),m=Wi(),en(r.$$.fragment),this.h()},l(v){e=Gt(v,"DIV",{slot:!0,class:!0});var w=$t(e);t=Gt(w,"DIV",{class:!0});var x=$t(t);o=Gt(x,"UL",{});var C=$t(o);for(let T=0;T<b.length;T+=1)b[T].l(C);C.forEach(De),x.forEach(De),l=Xi(w),un(u.$$.fragment,w),m=Xi(w),un(r.$$.fragment,w),w.forEach(De),this.h()},h(){qt(t,"class","tabs is-centered is-small mb-0"),qt(e,"slot","primary"),qt(e,"class","drawer-content svelte-1cz9ygz")},m(v,w){jt(v,e,w),Ut(e,t),Ut(t,o);for(let x=0;x<b.length;x+=1)b[x].m(o,null);Ut(e,l),tn(u,e,null),Ut(e,m),tn(r,e,null),f=!0},p(v,w){if(w&520){_=v[9];let T;for(T=0;T<_.length;T+=1){const S=S5(v,_,T);b[T]?b[T].p(S,w):(b[T]=C5(S),b[T].c(),b[T].m(o,null))}for(;T<b.length;T+=1)b[T].d(1);b.length=_.length}const x={};w&32&&(x.isLayersTabVisible=v[5]),u.$set(x);const C={};w&64&&(C.isAdvancedTabVisible=v[6]),r.$set(C)},i(v){f||(vt(u.$$.fragment,v),vt(r.$$.fragment,v),f=!0)},o(v){Lt(u.$$.fragment,v),Lt(r.$$.fragment,v),f=!1},d(v){v&&De(e),Ja(b,v),nn(u),nn(r)}}}function tM(i){let e,t,o,l;const u=i[11].default,m=ur(u,i,i[15],null);return{c(){e=Ht("div"),m&&m.c(),t=Wi(),o=Ht("div"),this.h()},l(r){e=Gt(r,"DIV",{slot:!0,class:!0});var f=$t(e);m&&m.l(f),t=Xi(f),o=Gt(f,"DIV",{}),$t(o).forEach(De),f.forEach(De),this.h()},h(){qt(e,"slot","secondary"),qt(e,"class","main-content svelte-1cz9ygz")},m(r,f){jt(r,e,f),m&&m.m(e,null),Ut(e,t),Ut(e,o),l=!0},p(r,f){m&&m.p&&(!l||f&32768)&&cr(m,u,r,r[15],l?fr(u,r[15],f,null):hr(r[15]),null)},i(r){l||(vt(m,r),l=!0)},o(r){Lt(m,r),l=!1},d(r){r&&De(e),m&&m.d(r)}}}function iM(i){let e,t,o,l;tc(i[12]);let u={initialPrimarySize:"0%",minPrimarySize:i[0]?"300px":"0px",minSecondarySize:i[4]?"0px":"50%",splitterSize:i[8],$$slots:{secondary:[tM],primary:[eM]},$$scope:{ctx:i}};return e=new AA({props:u}),i[14](e),e.$on("changed",i[10]),{c(){en(e.$$.fragment)},l(m){un(e.$$.fragment,m)},m(m,r){tn(e,m,r),t=!0,o||(l=xn(lg,"resize",i[12]),o=!0)},p(m,[r]){const f={};r&1&&(f.minPrimarySize=m[0]?"300px":"0px"),r&16&&(f.minSecondarySize=m[4]?"0px":"50%"),r&256&&(f.splitterSize=m[8]),r&32872&&(f.$$scope={dirty:r,ctx:m}),e.$set(f)},i(m){t||(vt(e.$$.fragment,m),t=!0)},o(m){Lt(e.$$.fragment,m),t=!1},d(m){i[14](null),nn(e,m),o=!1,l()}}}function nM(i,e,t){let o;Yo(i,Pu,Ee=>t(16,o=Ee));let{$$slots:l={},$$scope:u}=e,m=0,r=0,f=m<760;const _=()=>{t(4,f=m<768)};ks(()=>{t(4,f=window.matchMedia("only screen and (max-width: 768px)").matches)});let{open:b=!1}=e,v=[{icon:"fas fa-layer-group",label:Md.LAYERS},{icon:"fas fa-chart-simple",label:Md.ADVANCED}],w=v[0],x=!1,C=!1,T,S="0px";const M=()=>{switch(t(5,x=!1),t(6,C=!1),w.label){case Md.LAYERS:t(5,x=!0);break;case Md.ADVANCED:t(6,C=!0);break}},O=()=>{V()},V=()=>{if(!!T){if(b===!0)if(f)T.setPercent(100),t(8,S="0px");else{const Ee=380/m*100;T.setPercent(Ee),t(8,S="10px")}else T.setPercent(0),t(8,S="0px");X()}},X=()=>{!o||(o.triggerRepaint(),o.resize())},Z=()=>{X(),T.getPercent()===0?t(0,b=!1):t(0,b=!0)};V();function te(){t(1,m=lg.innerWidth),t(2,r=lg.innerHeight)}const J=Ee=>t(3,w=Ee);function ie(Ee){bn[Ee?"unshift":"push"](()=>{T=Ee,t(7,T)})}return i.$$set=Ee=>{"open"in Ee&&t(0,b=Ee.open),"$$scope"in Ee&&t(15,u=Ee.$$scope)},i.$$.update=()=>{i.$$.dirty&2&&_(),i.$$.dirty&4&&_(),i.$$.dirty&8&&M(),i.$$.dirty&1&&O()},[b,m,r,w,f,x,C,T,S,v,Z,l,te,J,ie,u]}class rM extends br{constructor(e){super(),wr(this,e,nM,iM,mr,{open:0})}}const oM=i=>({noResultsText:i[0]&2048}),E5=i=>({noResultsText:i[11]}),sM=i=>({createText:i[0]&16384}),I5=i=>({createText:i[14]}),aM=i=>({loadingText:i[0]&4096}),T5=i=>({loadingText:i[12]});function L5(i,e,t){const o=i.slice();return o[116]=e[t],o[118]=t,o}const lM=i=>({item:i[1]&1,label:i[1]&1}),P5=i=>({item:i[116].item,label:i[116].highlighted?i[116].highlighted:i[116].label});function M5(i,e,t){const o=i.slice();return o[119]=e[t],o}const uM=i=>({label:i[0]&2,item:i[0]&2}),D5=i=>({label:i[38](i[119]),item:i[119],unselectItem:i[45]});function O5(i,e,t){const o=i.slice();return o[118]=e[t],o}function cM(i){let e,t=i[1],o=[];for(let l=0;l<t.length;l+=1)o[l]=F5(O5(i,t,l));return{c(){for(let l=0;l<o.length;l+=1)o[l].c();e=kn()},l(l){for(let u=0;u<o.length;u+=1)o[u].l(l);e=kn()},m(l,u){for(let m=0;m<o.length;m+=1)o[m].m(l,u);jt(l,e,u)},p(l,u){if(u[0]&18|u[1]&128){t=l[1];let m;for(m=0;m<t.length;m+=1){const r=O5(l,t,m);o[m]?o[m].p(r,u):(o[m]=F5(r),o[m].c(),o[m].m(e.parentNode,e))}for(;m<o.length;m+=1)o[m].d(1);o.length=t.length}},d(l){Ja(o,l),l&&De(e)}}}function hM(i){let e,t;return{c(){e=Ht("option"),t=Kn(i[3]),this.h()},l(o){e=Gt(o,"OPTION",{class:!0});var l=$t(e);t=Jn(l,i[3]),l.forEach(De),this.h()},h(){e.__value=i[2],e.value=e.__value,e.selected=!0,qt(e,"class","svelte-1nqq7zl")},m(o,l){jt(o,e,l),Ut(e,t)},p(o,l){l[0]&8&&Os(t,o[3]),l[0]&4&&(e.__value=o[2],e.value=e.__value)},d(o){o&&De(e)}}}function F5(i){let e,t=i[38](i[118])+"",o,l,u;return{c(){e=Ht("option"),o=Kn(t),l=Wi(),this.h()},l(m){e=Gt(m,"OPTION",{class:!0});var r=$t(e);o=Jn(r,t),l=Xi(r),r.forEach(De),this.h()},h(){e.__value=u=i[4](i[118],!0),e.value=e.__value,e.selected=!0,qt(e,"class","svelte-1nqq7zl")},m(m,r){jt(m,e,r),Ut(e,o),Ut(e,l)},p(m,r){r[0]&2&&t!==(t=m[38](m[118])+"")&&Os(o,t),r[0]&18&&u!==(u=m[4](m[118],!0))&&(e.__value=u,e.value=e.__value)},d(m){m&&De(e)}}}function R5(i){let e,t,o=i[1],l=[];for(let m=0;m<o.length;m+=1)l[m]=B5(M5(i,o,m));const u=m=>Lt(l[m],1,1,()=>{l[m]=null});return{c(){for(let m=0;m<l.length;m+=1)l[m].c();e=kn()},l(m){for(let r=0;r<l.length;r+=1)l[r].l(m);e=kn()},m(m,r){for(let f=0;f<l.length;f+=1)l[f].m(m,r);jt(m,e,r),t=!0},p(m,r){if(r[0]&2|r[1]&16512|r[2]&1048576){o=m[1];let f;for(f=0;f<o.length;f+=1){const _=M5(m,o,f);l[f]?(l[f].p(_,r),vt(l[f],1)):(l[f]=B5(_),l[f].c(),vt(l[f],1),l[f].m(e.parentNode,e))}for(Fr(),f=o.length;f<l.length;f+=1)u(f);Or()}},i(m){if(!t){for(let r=0;r<o.length;r+=1)vt(l[r]);t=!0}},o(m){l=l.filter(Boolean);for(let r=0;r<l.length;r+=1)Lt(l[r]);t=!1},d(m){Ja(l,m),m&&De(e)}}}function fM(i){let e,t,o=i[38](i[119])+"",l,u,m,r,f,_;return{c(){e=Ht("div"),t=Ht("span"),l=Kn(o),u=Wi(),m=Ht("span"),r=Wi(),this.h()},l(b){e=Gt(b,"DIV",{class:!0});var v=$t(e);t=Gt(v,"SPAN",{class:!0});var w=$t(t);l=Jn(w,o),w.forEach(De),u=Xi(v),m=Gt(v,"SPAN",{class:!0}),$t(m).forEach(De),v.forEach(De),r=Xi(b),this.h()},h(){qt(t,"class","tag svelte-1nqq7zl"),qt(m,"class","tag is-delete svelte-1nqq7zl"),qt(e,"class","tags has-addons svelte-1nqq7zl")},m(b,v){jt(b,e,v),Ut(e,t),Ut(t,l),Ut(e,u),Ut(e,m),jt(b,r,v),f||(_=xn(m,"click",r4(function(){so(i[45](i[119]))&&i[45](i[119]).apply(this,arguments)})),f=!0)},p(b,v){i=b,v[0]&2&&o!==(o=i[38](i[119])+"")&&Os(l,o)},d(b){b&&De(e),b&&De(r),f=!1,_()}}}function B5(i){let e;const t=i[83].tag,o=ur(t,i,i[82],D5),l=o||fM(i);return{c(){l&&l.c()},l(u){l&&l.l(u)},m(u,m){l&&l.m(u,m),e=!0},p(u,m){o?o.p&&(!e||m[0]&2|m[2]&1048576)&&cr(o,t,u,u[82],e?fr(t,u[82],m,uM):hr(u[82]),D5):l&&l.p&&(!e||m[0]&2)&&l.p(u,e?m:[-1,-1,-1,-1])},i(u){e||(vt(l,u),e=!0)},o(u){Lt(l,u),e=!1},d(u){l&&l.d(u)}}}function z5(i){let e,t,o,l;return{c(){e=Ht("span"),t=Kn("\u2716"),this.h()},l(u){e=Gt(u,"SPAN",{class:!0});var m=$t(e);t=Jn(m,"\u2716"),m.forEach(De),this.h()},h(){qt(e,"class","autocomplete-clear-button svelte-1nqq7zl")},m(u,m){jt(u,e,m),Ut(e,t),o||(l=xn(e,"click",i[49]),o=!0)},p:go,d(u){u&&De(e),o=!1,l()}}}function dM(i){let e,t;const o=i[83]["no-results"],l=ur(o,i,i[82],E5),u=l||yM(i);return{c(){e=Ht("div"),u&&u.c(),this.h()},l(m){e=Gt(m,"DIV",{class:!0});var r=$t(e);u&&u.l(r),r.forEach(De),this.h()},h(){qt(e,"class","autocomplete-list-item-no-results svelte-1nqq7zl")},m(m,r){jt(m,e,r),u&&u.m(e,null),t=!0},p(m,r){l?l.p&&(!t||r[0]&2048|r[2]&1048576)&&cr(l,o,m,m[82],t?fr(o,m[82],r,oM):hr(m[82]),E5):u&&u.p&&(!t||r[0]&2048)&&u.p(m,t?r:[-1,-1,-1,-1])},i(m){t||(vt(u,m),t=!0)},o(m){Lt(u,m),t=!1},d(m){m&&De(e),u&&u.d(m)}}}function pM(i){let e,t,o,l;const u=i[83].create,m=ur(u,i,i[82],I5),r=m||_M(i);return{c(){e=Ht("div"),r&&r.c(),this.h()},l(f){e=Gt(f,"DIV",{class:!0});var _=$t(e);r&&r.l(_),_.forEach(De),this.h()},h(){qt(e,"class","autocomplete-list-item-create svelte-1nqq7zl")},m(f,_){jt(f,e,_),r&&r.m(e,null),t=!0,o||(l=xn(e,"click",i[39]),o=!0)},p(f,_){m?m.p&&(!t||_[0]&16384|_[2]&1048576)&&cr(m,u,f,f[82],t?fr(u,f[82],_,sM):hr(f[82]),I5):r&&r.p&&(!t||_[0]&16384)&&r.p(f,t?_:[-1,-1,-1,-1])},i(f){t||(vt(r,f),t=!0)},o(f){Lt(r,f),t=!1},d(f){f&&De(e),r&&r.d(f),o=!1,l()}}}function mM(i){let e,t;const o=i[83].loading,l=ur(o,i,i[82],T5),u=l||vM(i);return{c(){e=Ht("div"),u&&u.c(),this.h()},l(m){e=Gt(m,"DIV",{class:!0});var r=$t(e);u&&u.l(r),r.forEach(De),this.h()},h(){qt(e,"class","autocomplete-list-item-loading svelte-1nqq7zl")},m(m,r){jt(m,e,r),u&&u.m(e,null),t=!0},p(m,r){l?l.p&&(!t||r[0]&4096|r[2]&1048576)&&cr(l,o,m,m[82],t?fr(o,m[82],r,aM):hr(m[82]),T5):u&&u.p&&(!t||r[0]&4096)&&u.p(m,t?r:[-1,-1,-1,-1])},i(m){t||(vt(u,m),t=!0)},o(m){Lt(u,m),t=!1},d(m){m&&De(e),u&&u.d(m)}}}function gM(i){let e,t,o,l=i[31],u=[];for(let f=0;f<l.length;f+=1)u[f]=j5(L5(i,l,f));const m=f=>Lt(u[f],1,1,()=>{u[f]=null});let r=i[5]>0&&i[31].length>i[5]&&U5(i);return{c(){for(let f=0;f<u.length;f+=1)u[f].c();e=Wi(),r&&r.c(),t=kn()},l(f){for(let _=0;_<u.length;_+=1)u[_].l(f);e=Xi(f),r&&r.l(f),t=kn()},m(f,_){for(let b=0;b<u.length;b+=1)u[b].m(f,_);jt(f,e,_),r&&r.m(f,_),jt(f,t,_),o=!0},p(f,_){if(_[0]&1073741856|_[1]&524801|_[2]&1048576){l=f[31];let b;for(b=0;b<l.length;b+=1){const v=L5(f,l,b);u[b]?(u[b].p(v,_),vt(u[b],1)):(u[b]=j5(v),u[b].c(),vt(u[b],1),u[b].m(e.parentNode,e))}for(Fr(),b=l.length;b<u.length;b+=1)m(b);Or()}f[5]>0&&f[31].length>f[5]?r?r.p(f,_):(r=U5(f),r.c(),r.m(t.parentNode,t)):r&&(r.d(1),r=null)},i(f){if(!o){for(let _=0;_<l.length;_+=1)vt(u[_]);o=!0}},o(f){u=u.filter(Boolean);for(let _=0;_<u.length;_+=1)Lt(u[_]);o=!1},d(f){Ja(u,f),f&&De(e),r&&r.d(f),f&&De(t)}}}function yM(i){let e;return{c(){e=Kn(i[11])},l(t){e=Jn(t,i[11])},m(t,o){jt(t,e,o)},p(t,o){o[0]&2048&&Os(e,t[11])},d(t){t&&De(e)}}}function _M(i){let e;return{c(){e=Kn(i[14])},l(t){e=Jn(t,i[14])},m(t,o){jt(t,e,o)},p(t,o){o[0]&16384&&Os(e,t[14])},d(t){t&&De(e)}}}function vM(i){let e;return{c(){e=Kn(i[12])},l(t){e=Jn(t,i[12])},m(t,o){jt(t,e,o)},p(t,o){o[0]&4096&&Os(e,t[12])},d(t){t&&De(e)}}}function N5(i){let e,t,o,l,u;const m=i[83].item,r=ur(m,i,i[82],P5),f=r||xM(i);function _(){return i[86](i[116])}function b(){return i[87](i[118])}return{c(){e=Ht("div"),f&&f.c(),this.h()},l(v){e=Gt(v,"DIV",{class:!0});var w=$t(e);f&&f.l(w),w.forEach(De),this.h()},h(){qt(e,"class",t="autocomplete-list-item "+(i[118]===i[30]?"selected":"")+" svelte-1nqq7zl"),O0(e,"confirmed",i[50](i[116].item))},m(v,w){jt(v,e,w),f&&f.m(e,null),o=!0,l||(u=[xn(e,"click",_),xn(e,"pointerenter",b)],l=!0)},p(v,w){i=v,r?r.p&&(!o||w[1]&1|w[2]&1048576)&&cr(r,m,i,i[82],o?fr(m,i[82],w,lM):hr(i[82]),P5):f&&f.p&&(!o||w[1]&1)&&f.p(i,o?w:[-1,-1,-1,-1]),(!o||w[0]&1073741824&&t!==(t="autocomplete-list-item "+(i[118]===i[30]?"selected":"")+" svelte-1nqq7zl"))&&qt(e,"class",t),(!o||w[0]&1073741824|w[1]&524289)&&O0(e,"confirmed",i[50](i[116].item))},i(v){o||(vt(f,v),o=!0)},o(v){Lt(f,v),o=!1},d(v){v&&De(e),f&&f.d(v),l=!1,Lo(u)}}}function bM(i){let e,t=i[116].label+"",o;return{c(){e=new s4(!1),o=kn(),this.h()},l(l){e=a4(l,!1),o=kn(),this.h()},h(){e.a=o},m(l,u){e.m(t,l,u),jt(l,o,u)},p(l,u){u[1]&1&&t!==(t=l[116].label+"")&&e.p(t)},d(l){l&&De(o),l&&e.d()}}}function wM(i){let e,t=i[116].highlighted+"",o;return{c(){e=new s4(!1),o=kn(),this.h()},l(l){e=a4(l,!1),o=kn(),this.h()},h(){e.a=o},m(l,u){e.m(t,l,u),jt(l,o,u)},p(l,u){u[1]&1&&t!==(t=l[116].highlighted+"")&&e.p(t)},d(l){l&&De(o),l&&e.d()}}}function xM(i){let e;function t(u,m){return u[116].highlighted?wM:bM}let o=t(i),l=o(i);return{c(){l.c(),e=kn()},l(u){l.l(u),e=kn()},m(u,m){l.m(u,m),jt(u,e,m)},p(u,m){o===(o=t(u))&&l?l.p(u,m):(l.d(1),l=o(u),l&&(l.c(),l.m(e.parentNode,e)))},d(u){l.d(u),u&&De(e)}}}function j5(i){let e,t,o=i[116]&&(i[5]<=0||i[118]<i[5])&&N5(i);return{c(){o&&o.c(),e=kn()},l(l){o&&o.l(l),e=kn()},m(l,u){o&&o.m(l,u),jt(l,e,u),t=!0},p(l,u){l[116]&&(l[5]<=0||l[118]<l[5])?o?(o.p(l,u),u[0]&32|u[1]&1&&vt(o,1)):(o=N5(l),o.c(),vt(o,1),o.m(e.parentNode,e)):o&&(Fr(),Lt(o,1,1,()=>{o=null}),Or())},i(l){t||(vt(o),t=!0)},o(l){Lt(o),t=!1},d(l){o&&o.d(l),l&&De(e)}}}function U5(i){let e,t=i[13]&&V5(i);return{c(){t&&t.c(),e=kn()},l(o){t&&t.l(o),e=kn()},m(o,l){t&&t.m(o,l),jt(o,e,l)},p(o,l){o[13]?t?t.p(o,l):(t=V5(o),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},d(o){t&&t.d(o),o&&De(e)}}}function V5(i){let e,t,o=i[31].length-i[5]+"",l,u,m;return{c(){e=Ht("div"),t=Kn("..."),l=Kn(o),u=Wi(),m=Kn(i[13]),this.h()},l(r){e=Gt(r,"DIV",{class:!0});var f=$t(e);t=Jn(f,"..."),l=Jn(f,o),u=Xi(f),m=Jn(f,i[13]),f.forEach(De),this.h()},h(){qt(e,"class","autocomplete-list-item-no-results svelte-1nqq7zl")},m(r,f){jt(r,e,f),Ut(e,t),Ut(e,l),Ut(e,u),Ut(e,m)},p(r,f){f[0]&32|f[1]&1&&o!==(o=r[31].length-r[5]+"")&&Os(l,o),f[0]&8192&&Os(m,r[13])},d(r){r&&De(e)}}}function AM(i){let e,t,o,l,u,m,r,f,_,b,v,w,x,C,T,S,M,O,V,X;function Z(ve,_e){if(!ve[6]&&ve[2])return hM;if(ve[6]&&ve[1])return cM}let te=Z(i),J=te&&te(i),ie=i[6]&&i[1]&&R5(i),Ee=i[35]&&z5(i);const Pe=[gM,mM,pM,dM],de=[];function Te(ve,_e){return ve[31]&&ve[31].length>0?0:ve[34]&&ve[12]?1:ve[7]?2:ve[11]?3:-1}return~(C=Te(i))&&(T=de[C]=Pe[C](i)),{c(){e=Ht("div"),t=Ht("select"),J&&J.c(),o=Wi(),l=Ht("div"),ie&&ie.c(),u=Wi(),m=Ht("input"),v=Wi(),Ee&&Ee.c(),w=Wi(),x=Ht("div"),T&&T.c(),this.h()},l(ve){e=Gt(ve,"DIV",{class:!0});var _e=$t(e);t=Gt(_e,"SELECT",{name:!0,id:!0,class:!0});var ot=$t(t);J&&J.l(ot),ot.forEach(De),o=Xi(_e),l=Gt(_e,"DIV",{class:!0});var it=$t(l);ie&&ie.l(it),u=Xi(it),m=Gt(it,"INPUT",{type:!0,class:!0,id:!0,autocomplete:!0,placeholder:!0,name:!0,title:!0,tabindex:!0}),v=Xi(it),Ee&&Ee.l(it),it.forEach(De),w=Xi(_e),x=Gt(_e,"DIV",{class:!0});var It=$t(x);T&&T.l(It),It.forEach(De),_e.forEach(De),this.h()},h(){qt(t,"name",i[20]),qt(t,"id",i[21]),t.multiple=i[6],qt(t,"class","svelte-1nqq7zl"),qt(m,"type","text"),qt(m,"class",r=(i[17]?i[17]:"")+" "+(i[27]?"":"input autocomplete-input")+" svelte-1nqq7zl"),qt(m,"id",f=i[18]?i[18]:""),qt(m,"autocomplete",_=i[23]?"on":"off"),qt(m,"placeholder",i[15]),qt(m,"name",i[19]),m.disabled=i[26],m.required=i[28],qt(m,"title",i[22]),m.readOnly=b=i[24]||i[8]&&i[1],qt(m,"tabindex",i[29]),qt(l,"class","input-container svelte-1nqq7zl"),qt(x,"class",S=(i[25]?i[25]:"")+" autocomplete-list "+(i[36]?"":"hidden")+" is-fullwidth svelte-1nqq7zl"),qt(e,"class",M=(i[16]?i[16]:"")+" "+(i[9]||!i[0].length?"hide-arrow":"")+" "+(i[6]?"is-multiple":"")+" autocomplete select is-fullwidth "+i[37]+" svelte-1nqq7zl"),O0(e,"show-clear",i[35]),O0(e,"is-loading",i[10]&&i[34])},m(ve,_e){jt(ve,e,_e),Ut(e,t),J&&J.m(t,null),Ut(e,o),Ut(e,l),ie&&ie.m(l,null),Ut(l,u),Ut(l,m),i[84](m),$0(m,i[3]),Ut(l,v),Ee&&Ee.m(l,null),Ut(e,w),Ut(e,x),~C&&de[C].m(x,null),i[88](x),O=!0,V||(X=[xn(window,"click",i[41]),xn(m,"input",i[85]),xn(m,"input",i[44]),xn(m,"focus",i[47]),xn(m,"blur",i[48]),xn(m,"keydown",i[42]),xn(m,"click",i[46]),xn(m,"keypress",i[43])],V=!0)},p(ve,_e){te===(te=Z(ve))&&J?J.p(ve,_e):(J&&J.d(1),J=te&&te(ve),J&&(J.c(),J.m(t,null))),(!O||_e[0]&1048576)&&qt(t,"name",ve[20]),(!O||_e[0]&2097152)&&qt(t,"id",ve[21]),(!O||_e[0]&64)&&(t.multiple=ve[6]),ve[6]&&ve[1]?ie?(ie.p(ve,_e),_e[0]&66&&vt(ie,1)):(ie=R5(ve),ie.c(),vt(ie,1),ie.m(l,u)):ie&&(Fr(),Lt(ie,1,1,()=>{ie=null}),Or()),(!O||_e[0]&134348800&&r!==(r=(ve[17]?ve[17]:"")+" "+(ve[27]?"":"input autocomplete-input")+" svelte-1nqq7zl"))&&qt(m,"class",r),(!O||_e[0]&262144&&f!==(f=ve[18]?ve[18]:""))&&qt(m,"id",f),(!O||_e[0]&8388608&&_!==(_=ve[23]?"on":"off"))&&qt(m,"autocomplete",_),(!O||_e[0]&32768)&&qt(m,"placeholder",ve[15]),(!O||_e[0]&524288)&&qt(m,"name",ve[19]),(!O||_e[0]&67108864)&&(m.disabled=ve[26]),(!O||_e[0]&268435456)&&(m.required=ve[28]),(!O||_e[0]&4194304)&&qt(m,"title",ve[22]),(!O||_e[0]&16777474&&b!==(b=ve[24]||ve[8]&&ve[1]))&&(m.readOnly=b),(!O||_e[0]&536870912)&&qt(m,"tabindex",ve[29]),_e[0]&8&&m.value!==ve[3]&&$0(m,ve[3]),ve[35]?Ee?Ee.p(ve,_e):(Ee=z5(ve),Ee.c(),Ee.m(l,null)):Ee&&(Ee.d(1),Ee=null);let ot=C;C=Te(ve),C===ot?~C&&de[C].p(ve,_e):(T&&(Fr(),Lt(de[ot],1,1,()=>{de[ot]=null}),Or()),~C?(T=de[C],T?T.p(ve,_e):(T=de[C]=Pe[C](ve),T.c()),vt(T,1),T.m(x,null)):T=null),(!O||_e[0]&33554432|_e[1]&32&&S!==(S=(ve[25]?ve[25]:"")+" autocomplete-list "+(ve[36]?"":"hidden")+" is-fullwidth svelte-1nqq7zl"))&&qt(x,"class",S),(!O||_e[0]&66113&&M!==(M=(ve[16]?ve[16]:"")+" "+(ve[9]||!ve[0].length?"hide-arrow":"")+" "+(ve[6]?"is-multiple":"")+" autocomplete select is-fullwidth "+ve[37]+" svelte-1nqq7zl"))&&qt(e,"class",M),(!O||_e[0]&66113|_e[1]&16)&&O0(e,"show-clear",ve[35]),(!O||_e[0]&67137|_e[1]&8)&&O0(e,"is-loading",ve[10]&&ve[34])},i(ve){O||(vt(ie),vt(T),O=!0)},o(ve){Lt(ie),Lt(T),O=!1},d(ve){ve&&De(e),J&&J.d(),ie&&ie.d(),i[84](null),Ee&&Ee.d(),~C&&de[C].d(),i[88](null),V=!1,Lo(X)}}}function kM(i,e){if(typeof i!="function"){console.error("Not a function: "+i+", argument: "+e);return}let t;try{t=i(e)}catch{console.warn("Error executing Autocomplete function on value: "+e+" function: "+i)}return t}function Zp(i,e){let t=kM(i,e);return t==null&&(t=""),typeof t!="string"&&(t=t.toString()),t}function ug(i,e){if(!i)return 0;const t=i.keywords;let o=0;return e.forEach(l=>{t.includes(l)&&o++}),o}function SM(i,e,t){return ug(e,t)-ug(i,t)}function Kp(i){return i.normalize("NFD").replace(/[\u0300-\u036f]/g,"")}function CM(i,e,t){let o,l,{$$slots:u={},$$scope:m}=e,{items:r=[]}=e,{searchFunction:f=!1}=e,{labelFieldName:_=void 0}=e,{keywordsFieldName:b=_}=e,{valueFieldName:v=void 0}=e,{labelFunction:w=function(Dt){return Dt==null?"":_?Dt[_]:Dt}}=e,{keywordsFunction:x=function(Dt){return Dt==null?"":b?Dt[b]:w(Dt)}}=e,{valueFunction:C=function(Dt,rr=!1){return Dt==null?Dt:!Ee||rr?v?Dt[v]:Dt:Dt.map(lr=>v?lr[v]:lr)}}=e,{keywordsCleanFunction:T=function(Dt){return Dt}}=e,{textCleanFunction:S=function(Dt){return Dt}}=e,{beforeChange:M=function(Dt,rr){return!0}}=e,{onChange:O=function(Dt){}}=e,{onFocus:V=function(){}}=e,{onBlur:X=function(){}}=e,{onCreate:Z=function(Dt){mi&&console.log("onCreate: "+Dt)}}=e,{selectFirstIfEmpty:te=!1}=e,{minCharactersToSearch:J=1}=e,{maxItemsToShowInList:ie=0}=e,{multiple:Ee=!1}=e,{create:Pe=!1}=e,{ignoreAccents:de=!0}=e,{matchAllKeywords:Te=!0}=e,{sortByMatchedKeywords:ve=!1}=e,{itemFilterFunction:_e=void 0}=e,{itemSortFunction:ot=void 0}=e,{lock:it=!1}=e,{delay:It=0}=e,{localFiltering:Xe=!0}=e,{localSorting:we=!0}=e,{cleanUserText:Ce=!0}=e,{closeOnBlur:Re=!1}=e,{hideArrow:le=!1}=e,{showClear:Se=!1}=e,{showLoadingIndicator:he=!1}=e,{noResultsText:me="No results found"}=e,{loadingText:Be="Loading results..."}=e,{moreItemsText:We="items not shown"}=e,{createText:st="Not found, add anyway?"}=e,{placeholder:Ye=void 0}=e,{className:gt=void 0}=e,{inputClassName:Mt=void 0}=e,{inputId:ri=void 0}=e,{name:ut=void 0}=e,{selectName:wt=void 0}=e,{selectId:bt=void 0}=e,{title:Je=void 0}=e,{html5autocomplete:ei=void 0}=e,{readonly:li=void 0}=e,{dropdownClassName:Qt=void 0}=e,{disabled:Si=!1}=e,{noInputStyles:Ti=!1}=e,{required:Xt=null}=e,{debug:mi=!1}=e,{tabindex:Zi=0}=e,{selectedItem:Ci=Ee?[]:void 0}=e,{value:ti=void 0}=e,{highlightedItem:Me=void 0}=e;const Q="sautocomplete-"+Math.floor(Math.random()*1e3);let ae,$e,_t=!1,Kt=!1,di=-1,{text:wn}=e,Ln=0,fn,Bi=[],Ki=0,Hn=0,Gn;function Zr(Dt){return Zp(w,Dt)}function zn(Dt){const rr=Zp(x,Dt);let lr=Zp(T,rr);return lr=lr.toLowerCase().trim(),de&&(lr=Kp(lr)),mi&&console.log("Extracted keywords: '"+lr+"' from item: "+JSON.stringify(Dt)),lr}function dn(){let Dt;mi&&(Dt=`Autocomplete prepare list ${ri?`(id: ${ri})`:""}`,console.time(Dt),console.log("Prepare items to search"),console.log("items: "+JSON.stringify(r))),Array.isArray(r)||(console.warn("Autocomplete items / search function did not return array but",r),t(0,r=[]));const rr=r?r.length:0;Bi=new Array(rr),rr>0&&r.forEach((lr,zr)=>{const Zo=gn(lr);Zo===void 0&&console.log("Undefined item for: ",lr),Bi[zr]=Zo}),t(31,fn=Bi),mi&&(console.log(Bi.length+" items to search"),console.timeEnd(Dt))}function gn(Dt){return{keywords:Xe?zn(Dt):[],label:Zr(Dt),item:Dt}}function on(){t(2,ti=C(Ci)),t(3,wn=Ee?"":Zr(Ci)),t(31,fn=Bi),O(Ci)}function Sr(Dt){if(Dt==null)return"";if(!Ce)return Dt;const rr=Dt.replace(/[&/\\#,+()$~%.'":*?<>{}]/g," ").trim();return Zp(S,rr).toLowerCase().trim()}async function Wn(){let Dt;mi&&(Dt=`Autocomplete search ${ri?`(id: ${ri})`:""}`,console.time(Dt),console.log("Searching user entered text: '"+wn+"'"));let rr=Sr(wn);if(J>1&&rr.length<J&&(rr=""),t(81,Ln=rr.length),mi&&console.log("Changed user entered text '"+wn+"' into '"+rr+"'"),rr===""){f?(t(0,r=[]),mi&&console.log("User entered text is empty clear list of items")):(t(31,fn=Bi),mi&&console.log("User entered text is empty set the list of items to all items")),dr(),mi&&console.timeEnd(Dt);return}if(!f)Kr(rr);else{Ki=Ki+1;const lr=Ki;if(t(34,Kt=!0),f.constructor.name==="AsyncGeneratorFunction"){for await(const zr of f(rr,ie)){if(lr<Hn)return!1;lr>Hn&&t(0,r=[]),Hn=lr,t(0,r=[...r,...zr]),Kr(rr)}Hn<lr&&(Hn=lr,t(0,r=[]),Kr(rr))}else{let zr=await f(rr,ie);if(lr<Hn)return!1;Hn=lr,t(0,r=zr),Kr(rr)}t(34,Kt=!1)}mi&&(console.timeEnd(Dt),console.log("Search found "+fn.length+" items"))}function gr(Dt,rr){const lr=ug(Dt,rr);return Te?lr>=rr.length:lr>0}function Kr(Dt){dn();const lr=(de?Kp(Dt):Dt).split(/\s+/g).filter(Ro=>Ro!=="");let zr;Xe?(_e?zr=Bi.filter(Ro=>_e(Ro.item,lr)):zr=Bi.filter(Ro=>gr(Ro,lr)),we&&(ot?zr=zr.sort((Ro,Sa)=>ot(Ro.item,Sa.item,lr)):ve&&(zr=zr.sort((Ro,Sa)=>SM(Ro,Sa,lr))))):zr=Bi;const Zo=Pr(lr,"label");return t(31,fn=zr.map(Zo)),dr(),!0}function an(Dt){let rr;if(mi&&console.log("createdItem",Dt),typeof Dt<"u"){dn(),t(31,fn=Bi);let lr=xt(Dt,fn);lr<=0&&(t(0,r=[Dt]),dn(),t(31,fn=Bi),lr=0),lr>=0&&(t(30,di=lr),rr=fn[di])}return rr}function He(Dt){if(mi&&console.log("selectListItem",Dt),typeof Dt>"u"&&Pe){const lr=Z(wn);if(typeof lr<"u"){if(typeof lr.then=="function")return lr.then(zr=>{if(typeof zr<"u"){const Zo=an(zr);typeof Zo<"u"&&He(Zo)}}),!0;Dt=an(lr)}}if(typeof Dt>"u")return mi&&console.log("listItem is undefined. Can not select."),!1;if(it&&Ci)return!0;const rr=Dt.item;return M(Ci,rr)&&(Ee?Ci?Ci.includes(rr)?t(1,Ci=Ci.filter(lr=>lr!==rr)):t(1,Ci=[...Ci,rr]):t(1,Ci=[rr]):(t(1,Ci=void 0),t(1,Ci=rr))),!0}function wo(){mi&&console.log("selectItem",di);const Dt=fn[di];He(Dt)?(mi&&console.log("selectListItem true, closing"),Qn(),Ee&&ae.focus()):mi&&console.log("selectListItem false, not closing")}function xo(){mi&&console.log("up"),Tn(),di>0&&t(30,di--,di),Le()}function co(){mi&&console.log("down"),Tn(),di<fn.length-1&&t(30,di++,di),Le()}function Le(){mi&&console.log("highlight");const Dt=".selected";mi&&console.log("Seaching DOM element: "+Dt+" in "+$e);const rr=$e&&$e.querySelector(Dt);rr?typeof rr.scrollIntoViewIfNeeded=="function"?(mi&&console.log("Scrolling selected item into view"),rr.scrollIntoViewIfNeeded()):rr.scrollIntoView==="function"?(mi&&console.log("Scrolling selected item into view"),rr.scrollIntoView()):mi&&console.warn("Could not scroll selected item into view, scrollIntoViewIfNeeded not supported"):mi&&console.warn("Selected item not found to scroll into view")}function Ie(Dt){mi&&console.log("onListItemClick"),He(Dt)&&(Qn(),Ee&&ae.focus())}function qe(Dt){mi&&console.log("onDocumentClick"),Dt.composedPath().some(rr=>rr.classList&&rr.classList.contains(Q))?(mi&&console.log("onDocumentClick inside"),Le()):(mi&&console.log("onDocumentClick outside"),Qn())}function ct(Dt){mi&&console.log("onKeyDown");let rr=Dt.key;rr==="Tab"&&Dt.shiftKey&&(rr="ShiftTab");const zr={Tab:_t?Qn():null,ShiftTab:_t?Qn():null,ArrowDown:co.bind(this),ArrowUp:xo.bind(this),Escape:yt.bind(this),Backspace:Ee&&Ci&&Ci.length&&!wn?Ri.bind(this):null}[rr];typeof zr=="function"&&zr(Dt)}function dt(Dt){mi&&console.log("onKeyPress"),Dt.key==="Enter"&&(Dt.preventDefault(),Bt())}function Bt(){wo()}function Ge(Dt){mi&&console.log("onInput"),t(3,wn=Dt.target.value),Gn&&clearTimeout(Gn),It?Gn=setTimeout(Ft,It):Ft()}function Yt(Dt){mi&&console.log("unselectItem",Dt),t(1,Ci=Ci.filter(rr=>rr!==Dt)),ae.focus()}function Ft(){Wn()&&(t(30,di=0),Tn())}function oi(){mi&&console.log("onInputClick"),Sn()}function yt(Dt){mi&&console.log("onEsc"),Dt.stopPropagation(),_t&&(ae.focus(),Qn())}function Ri(Dt){mi&&console.log("onBackspace"),Yt(Ci[Ci.length-1])}function Ii(){mi&&console.log("onFocus"),V(),Sn()}function En(){mi&&console.log("onBlur"),Re&&Qn(),X()}function Sn(){if(mi&&console.log("resetListToAllItemsAndOpen"),wn?!Bi.length&&Ci&&f&&Wn():t(31,fn=Bi),Tn(),Ci){mi&&console.log("Searching currently selected item: "+JSON.stringify(Ci));const Dt=xt(Ci,fn);Dt>=0&&(t(30,di=Dt),Le())}}function xt(Dt,rr){mi&&console.log("Finding index for item",Dt);let lr=-1;for(let zr=0;zr<rr.length;zr++){const Zo=rr[zr];if(typeof Zo>"u"){mi&&console.log(`listItem ${zr} is undefined. Skipping.`);continue}if(mi&&console.log("Item "+zr+": "+JSON.stringify(Zo)),Dt===Zo.item){lr=zr;break}}return mi&&(lr>=0?console.log("Found index for item: "+lr):console.warn("Not found index for item: "+Dt)),lr}function Tn(){mi&&console.log("open"),!Lr()&&t(80,_t=!0)}function Qn(){mi&&console.log("close"),t(80,_t=!1),t(34,Kt=!1),!wn&&te&&(t(30,di=0),wo())}function Lr(){return J>1&&Ln<J}function dr(){Lr()&&Qn()}function Cr(){mi&&console.log("clear"),t(3,wn=""),t(1,Ci=Ee?[]:void 0),setTimeout(()=>{ae.focus(),Qn()})}function Pr(Dt,rr){return lr=>{let zr=lr[rr];const Zo=Object.assign({highlighted:void 0},lr);Zo.highlighted=zr;const Ro=zr.toLowerCase(),Sa=de?Kp(Ro):Ro;if(Dt&&Dt.length){const ts=[];for(let Vs=0;Vs<Dt.length;Vs++){let _s=Dt[Vs];de&&(_s=Kp(_s));const Ca=_s.length;let Ss=0;do if(Ss=Sa.indexOf(_s,Ss),Ss>=0){let Zs=Ss+Ca;ts.push([Ss,Zs]),Ss=Zs}while(Ss!==-1)}if(ts.length>0){const Vs=new Set;for(let _s=0;_s<ts.length;_s++){const Ca=ts[_s],Ss=Ca[0],Zs=Ca[1],qs=Ro.substring(Ss,Zs);Vs.add(qs)}for(let _s of Vs){if(_s==="b")continue;const Ca=new RegExp("("+_s+")","ig"),Ss=Zo.highlighted.replace(Ca,"<b>$1</b>");Zo.highlighted=Ss}}}return Zo}}function to(Dt){return Ci?Ee?Ci.includes(Dt):Dt===Ci:!1}function Jr(Dt){bn[Dt?"unshift":"push"](()=>{ae=Dt,t(32,ae)})}function vo(){wn=this.value,t(3,wn)}const $o=Dt=>Ie(Dt),tl=Dt=>{t(30,di=Dt)};function Fo(Dt){bn[Dt?"unshift":"push"](()=>{$e=Dt,t(33,$e)})}return i.$$set=Dt=>{"items"in Dt&&t(0,r=Dt.items),"searchFunction"in Dt&&t(52,f=Dt.searchFunction),"labelFieldName"in Dt&&t(53,_=Dt.labelFieldName),"keywordsFieldName"in Dt&&t(54,b=Dt.keywordsFieldName),"valueFieldName"in Dt&&t(55,v=Dt.valueFieldName),"labelFunction"in Dt&&t(56,w=Dt.labelFunction),"keywordsFunction"in Dt&&t(57,x=Dt.keywordsFunction),"valueFunction"in Dt&&t(4,C=Dt.valueFunction),"keywordsCleanFunction"in Dt&&t(58,T=Dt.keywordsCleanFunction),"textCleanFunction"in Dt&&t(59,S=Dt.textCleanFunction),"beforeChange"in Dt&&t(60,M=Dt.beforeChange),"onChange"in Dt&&t(61,O=Dt.onChange),"onFocus"in Dt&&t(62,V=Dt.onFocus),"onBlur"in Dt&&t(63,X=Dt.onBlur),"onCreate"in Dt&&t(64,Z=Dt.onCreate),"selectFirstIfEmpty"in Dt&&t(65,te=Dt.selectFirstIfEmpty),"minCharactersToSearch"in Dt&&t(66,J=Dt.minCharactersToSearch),"maxItemsToShowInList"in Dt&&t(5,ie=Dt.maxItemsToShowInList),"multiple"in Dt&&t(6,Ee=Dt.multiple),"create"in Dt&&t(7,Pe=Dt.create),"ignoreAccents"in Dt&&t(67,de=Dt.ignoreAccents),"matchAllKeywords"in Dt&&t(68,Te=Dt.matchAllKeywords),"sortByMatchedKeywords"in Dt&&t(69,ve=Dt.sortByMatchedKeywords),"itemFilterFunction"in Dt&&t(70,_e=Dt.itemFilterFunction),"itemSortFunction"in Dt&&t(71,ot=Dt.itemSortFunction),"lock"in Dt&&t(8,it=Dt.lock),"delay"in Dt&&t(72,It=Dt.delay),"localFiltering"in Dt&&t(73,Xe=Dt.localFiltering),"localSorting"in Dt&&t(74,we=Dt.localSorting),"cleanUserText"in Dt&&t(75,Ce=Dt.cleanUserText),"closeOnBlur"in Dt&&t(76,Re=Dt.closeOnBlur),"hideArrow"in Dt&&t(9,le=Dt.hideArrow),"showClear"in Dt&&t(77,Se=Dt.showClear),"showLoadingIndicator"in Dt&&t(10,he=Dt.showLoadingIndicator),"noResultsText"in Dt&&t(11,me=Dt.noResultsText),"loadingText"in Dt&&t(12,Be=Dt.loadingText),"moreItemsText"in Dt&&t(13,We=Dt.moreItemsText),"createText"in Dt&&t(14,st=Dt.createText),"placeholder"in Dt&&t(15,Ye=Dt.placeholder),"className"in Dt&&t(16,gt=Dt.className),"inputClassName"in Dt&&t(17,Mt=Dt.inputClassName),"inputId"in Dt&&t(18,ri=Dt.inputId),"name"in Dt&&t(19,ut=Dt.name),"selectName"in Dt&&t(20,wt=Dt.selectName),"selectId"in Dt&&t(21,bt=Dt.selectId),"title"in Dt&&t(22,Je=Dt.title),"html5autocomplete"in Dt&&t(23,ei=Dt.html5autocomplete),"readonly"in Dt&&t(24,li=Dt.readonly),"dropdownClassName"in Dt&&t(25,Qt=Dt.dropdownClassName),"disabled"in Dt&&t(26,Si=Dt.disabled),"noInputStyles"in Dt&&t(27,Ti=Dt.noInputStyles),"required"in Dt&&t(28,Xt=Dt.required),"debug"in Dt&&t(78,mi=Dt.debug),"tabindex"in Dt&&t(29,Zi=Dt.tabindex),"selectedItem"in Dt&&t(1,Ci=Dt.selectedItem),"value"in Dt&&t(2,ti=Dt.value),"highlightedItem"in Dt&&t(51,Me=Dt.highlightedItem),"text"in Dt&&t(3,wn=Dt.text),"$$scope"in Dt&&t(82,m=Dt.$$scope)},i.$$.update=()=>{i.$$.dirty[0]&1|i.$$.dirty[1]&2097152&&(f||dn()),i.$$.dirty[0]&2&&on(),i.$$.dirty[0]&1073741824|i.$$.dirty[1]&1&&t(51,Me=fn&&di&&di>=0&&di<fn.length?fn[di].item:null),i.$$.dirty[0]&1|i.$$.dirty[2]&786432&&t(36,o=_t&&(r&&r.length>0||Ln>0)),i.$$.dirty[0]&322|i.$$.dirty[2]&32768&&t(35,l=Se||(it||Ee)&&Ci)},[r,Ci,ti,wn,C,ie,Ee,Pe,it,le,he,me,Be,We,st,Ye,gt,Mt,ri,ut,wt,bt,Je,ei,li,Qt,Si,Ti,Xt,Zi,di,fn,ae,$e,Kt,l,o,Q,Zr,wo,Ie,qe,ct,dt,Ge,Yt,oi,Ii,En,Cr,to,Me,f,_,b,v,w,x,T,S,M,O,V,X,Z,te,J,de,Te,ve,_e,ot,It,Xe,we,Ce,Re,Se,mi,Pr,_t,Ln,m,u,Jr,vo,$o,tl,Fo]}class EM extends br{constructor(e){super(),wr(this,e,CM,AM,mr,{items:0,searchFunction:52,labelFieldName:53,keywordsFieldName:54,valueFieldName:55,labelFunction:56,keywordsFunction:57,valueFunction:4,keywordsCleanFunction:58,textCleanFunction:59,beforeChange:60,onChange:61,onFocus:62,onBlur:63,onCreate:64,selectFirstIfEmpty:65,minCharactersToSearch:66,maxItemsToShowInList:5,multiple:6,create:7,ignoreAccents:67,matchAllKeywords:68,sortByMatchedKeywords:69,itemFilterFunction:70,itemSortFunction:71,lock:8,delay:72,localFiltering:73,localSorting:74,cleanUserText:75,closeOnBlur:76,hideArrow:9,showClear:77,showLoadingIndicator:10,noResultsText:11,loadingText:12,moreItemsText:13,createText:14,placeholder:15,className:16,inputClassName:17,inputId:18,name:19,selectName:20,selectId:21,title:22,html5autocomplete:23,readonly:24,dropdownClassName:25,disabled:26,noInputStyles:27,required:28,debug:78,tabindex:29,selectedItem:1,value:2,highlightedItem:51,text:3,highlightFilter:79},null,[-1,-1,-1,-1])}get highlightFilter(){return this.$$.ctx[79]}}function IM(i){let e,t,o,l,u;function m(_){i[9](_)}function r(_){i[10](_)}let f={items:i[4],placeholder:i[0].placeholder,hideArrow:!1,showClear:!0,showLoadingIndicator:!1,labelFunction:i[7],maxItemsToShowInList:"10"};return i[1]!==void 0&&(f.selectedItem=i[1]),i[3]!==void 0&&(f.onChange=i[3]),t=new EM({props:f}),i[8](t),bn.push(()=>Uo(t,"selectedItem",m)),bn.push(()=>Uo(t,"onChange",r)),{c(){e=Ht("div"),en(t.$$.fragment),this.h()},l(_){e=Gt(_,"DIV",{class:!0});var b=$t(e);un(t.$$.fragment,b),b.forEach(De),this.h()},h(){qt(e,"class","data-container")},m(_,b){jt(_,e,b),tn(t,e,null),i[11](e),u=!0},p(_,[b]){const v={};b&1&&(v.placeholder=_[0].placeholder),b&1&&(v.labelFunction=_[7]),!o&&b&2&&(o=!0,v.selectedItem=_[1],Vo(()=>o=!1)),!l&&b&8&&(l=!0,v.onChange=_[3],Vo(()=>l=!1)),t.$set(v)},i(_){u||(vt(t.$$.fragment,_),u=!0)},o(_){Lt(t.$$.fragment,_),u=!1},d(_){_&&De(e),i[8](null),nn(t),i[11](null)}}}function TM(i,e,t){let{map:o}=e,{searchOption:l}=e,{position:u="top-left"}=e;const m=ep();let r=[],f={},_={},b,v;function w(){}w.prototype.onAdd=function(Z){return this.map=Z,this.controlContainer=document.createElement("div"),this.controlContainer.className="mapboxgl-ctrl",this.controlContainer.appendChild(v),this.controlContainer},w.prototype.onRemove=function(){!this.controlContainer||!this.controlContainer.parentNode||!this.map||(this.controlContainer.parentNode.removeChild(this.controlContainer),this.map=void 0)};const x=()=>{if(!(f&&Object.keys(f).length>0)||!(_&&Object.keys(_).length>0&&_.key))return;const Z=f[_.key];if(!Z)return;const te=Z.geometry.coordinates;o.flyTo({center:te,zoom:l.zoom,curve:1}),b&&(b.remove(),b=null),b=new Tu.exports.Marker({draggable:!0}).setLngLat(te).addTo(o),m("zoomed")};let C=()=>{_||b&&(b.remove(),b=null)},T=null;ks(async()=>{T=new w,o.hasControl(T)===!1&&o.addControl(T,u),(await(await fetch(l.url)).json()).features.forEach(J=>{const ie=J.geometry.coordinates.join(","),Ee=JSON.parse(JSON.stringify(J));Ee.properties={},l.target.forEach(Pe=>{J.properties[Pe]&&(Ee.properties[Pe]=J.properties[Pe])}),Object.keys(Ee.properties).length!==0&&(Ee.properties.key=ie,r.push(Ee.properties),f[ie]=JSON.parse(JSON.stringify(J)))})});const S=Z=>Z?l.format(Z):"";function M(Z){bn[Z?"unshift":"push"](()=>{v=Z,t(2,v)})}function O(Z){_=Z,t(1,_)}function V(Z){C=Z,t(3,C)}function X(Z){bn[Z?"unshift":"push"](()=>{v=Z,t(2,v)})}return i.$$set=Z=>{"map"in Z&&t(5,o=Z.map),"searchOption"in Z&&t(0,l=Z.searchOption),"position"in Z&&t(6,u=Z.position)},i.$$.update=()=>{i.$$.dirty&2&&x()},[l,_,v,C,r,o,u,S,M,O,V,X]}class LM extends br{constructor(e){super(),wr(this,e,TM,IM,mr,{map:5,searchOption:0,position:6})}}var k3={};Object.defineProperty(k3,"__esModule",{value:!0});class hf{constructor(e,t){this.areas=e||hf.DEFAULT_AREAS,this.limit_no_areas=t||hf.DEFAULT_NO_AREAS,this.onDocumentClick=this.onDocumentClick.bind(this)}getDefaultPosition(){return"top-right"}onAdd(e){this.map=e;const t=this;if(this.controlContainer=document.createElement("div"),this.controlContainer.classList.add("mapboxgl-ctrl"),this.controlContainer.classList.add("mapboxgl-ctrl-group"),this.areas.length<=this.limit_no_areas){this.mapAreaContainer=document.createElement("div"),this.areaButton=document.createElement("button"),this.mapAreaContainer.classList.add("mapboxgl-area-list");for(const o of this.areas){const l=document.createElement("button");l.innerText=o.title,l.classList.add(o.title.replace(/[^a-z0-9-]/gi,"_")),l.value=JSON.stringify({center:o.latlng,zoom:o.zoom}),l.addEventListener("click",u=>{const m=u.srcElement;this.map.jumpTo(JSON.parse(m.value)),this.mapAreaContainer.style.display="none",this.areaButton.style.display="block";const r=this.mapAreaContainer.getElementsByClassName("active");for(;r[0];)r[0].classList.remove("active");m.classList.add("active")}),o.title===hf.DEFAULT_AREA&&l.classList.add("active"),this.mapAreaContainer.appendChild(l)}this.areaButton.classList.add("mapboxgl-ctrl-icon"),this.areaButton.classList.add("mapboxgl-area-switcher"),this.areaButton.addEventListener("click",()=>{this.areaButton.style.display="none",this.mapAreaContainer.style.display="block"}),document.addEventListener("click",this.onDocumentClick),this.controlContainer.appendChild(this.areaButton),this.controlContainer.appendChild(this.mapAreaContainer)}else this.controlContainer.classList.add("mapboxgl-ctrl-area-switch"),this.select=document.createElement("select"),this.select.setAttribute("type","select"),this.select.addEventListener("change",function(o){!o.target||t.map.flyTo(JSON.parse(o.target[this.selectedIndex].value))}),this.controlContainer.appendChild(this.select),this.areas.forEach(function(o){var l=document.createElement("option");l.setAttribute("type","option"),l.text=o.title,l.value=JSON.stringify({center:o.latlng,zoom:o.zoom}),t.select.appendChild(l)});return this.controlContainer}onRemove(){!this.controlContainer||!this.controlContainer.parentNode||!this.map||!this.areaButton||(this.areaButton.removeEventListener("click",this.onDocumentClick),this.controlContainer.parentNode.removeChild(this.controlContainer),document.removeEventListener("click",this.onDocumentClick),this.map=void 0)}onDocumentClick(e){this.controlContainer&&!this.controlContainer.contains(e.target)&&this.mapAreaContainer&&this.areaButton&&(this.mapAreaContainer.style.display="none",this.areaButton.style.display="block")}}var PM=k3.default=hf;hf.DEFAULT_AREA="Narok";hf.DEFAULT_AREAS=[{title:"Narok",latlng:[35.86974,-1.08707],zoom:13},{title:"Nairobi",latlng:[36.8034,-1.2809],zoom:11},{title:"Mombasa",latlng:[39.65449,-4.05099],zoom:12}];hf.DEFAULT_NO_AREAS=5;function q5(i,e,t){const o=i.slice();return o[12]=e[t],o}function H5(i,e,t){const o=i.slice();return o[15]=e[t],o}function G5(i,e,t){const o=i.slice();return o[15]=e[t],o}function W5(i){let e;function t(u,m){return u[3]?DM:MM}let o=t(i),l=o(i);return{c(){e=Ht("div"),l.c(),this.h()},l(u){e=Gt(u,"DIV",{class:!0});var m=$t(e);l.l(m),m.forEach(De),this.h()},h(){qt(e,"class","select is-fullwidth mb-2 is-success")},m(u,m){jt(u,e,m),l.m(e,null)},p(u,m){o===(o=t(u))&&l?l.p(u,m):(l.d(1),l=o(u),l&&(l.c(),l.m(e,null)))},d(u){u&&De(e),l.d()}}}function MM(i){let e,t,o,l=i[0],u=[];for(let m=0;m<l.length;m+=1)u[m]=X5(H5(i,l,m));return{c(){e=Ht("select");for(let m=0;m<u.length;m+=1)u[m].c();this.h()},l(m){e=Gt(m,"SELECT",{class:!0});var r=$t(e);for(let f=0;f<u.length;f+=1)u[f].l(r);r.forEach(De),this.h()},h(){qt(e,"class","is-focused"),i[2]===void 0&&tc(()=>i[8].call(e))},m(m,r){jt(m,e,r);for(let f=0;f<u.length;f+=1)u[f].m(e,null);$u(e,i[2]),t||(o=xn(e,"change",i[8]),t=!0)},p(m,r){if(r&1){l=m[0];let f;for(f=0;f<l.length;f+=1){const _=H5(m,l,f);u[f]?u[f].p(_,r):(u[f]=X5(_),u[f].c(),u[f].m(e,null))}for(;f<u.length;f+=1)u[f].d(1);u.length=l.length}r&5&&$u(e,m[2])},d(m){m&&De(e),Ja(u,m),t=!1,o()}}}function DM(i){let e,t,o,l=i[0],u=[];for(let m=0;m<l.length;m+=1)u[m]=Y5(G5(i,l,m));return{c(){e=Ht("select");for(let m=0;m<u.length;m+=1)u[m].c();this.h()},l(m){e=Gt(m,"SELECT",{class:!0});var r=$t(e);for(let f=0;f<u.length;f+=1)u[f].l(r);r.forEach(De),this.h()},h(){qt(e,"class","is-focused"),e.disabled=!0,i[2]===void 0&&tc(()=>i[7].call(e))},m(m,r){jt(m,e,r);for(let f=0;f<u.length;f+=1)u[f].m(e,null);$u(e,i[2]),t||(o=xn(e,"change",i[7]),t=!0)},p(m,r){if(r&1){l=m[0];let f;for(f=0;f<l.length;f+=1){const _=G5(m,l,f);u[f]?u[f].p(_,r):(u[f]=Y5(_),u[f].c(),u[f].m(e,null))}for(;f<u.length;f+=1)u[f].d(1);u.length=l.length}r&5&&$u(e,m[2])},d(m){m&&De(e),Ja(u,m),t=!1,o()}}}function X5(i){let e,t=`${i[15].sourceLayer} (${i[15].source})`,o,l;return{c(){e=Ht("option"),o=Kn(t),this.h()},l(u){e=Gt(u,"OPTION",{});var m=$t(e);o=Jn(m,t),m.forEach(De),this.h()},h(){e.__value=l=i[15],e.value=e.__value},m(u,m){jt(u,e,m),Ut(e,o)},p(u,m){m&1&&t!==(t=`${u[15].sourceLayer} (${u[15].source})`)&&Os(o,t),m&1&&l!==(l=u[15])&&(e.__value=l,e.value=e.__value)},d(u){u&&De(e)}}}function Y5(i){let e,t=`${i[15].sourceLayer} (${i[15].source})`,o,l;return{c(){e=Ht("option"),o=Kn(t),this.h()},l(u){e=Gt(u,"OPTION",{});var m=$t(e);o=Jn(m,t),m.forEach(De),this.h()},h(){e.__value=l=i[15],e.value=e.__value},m(u,m){jt(u,e,m),Ut(e,o)},p(u,m){m&1&&t!==(t=`${u[15].sourceLayer} (${u[15].source})`)&&Os(o,t),m&1&&l!==(l=u[15])&&(e.__value=l,e.value=e.__value)},d(u){u&&De(e)}}}function Z5(i){let e,t;function o(m,r){return r&4&&(t=null),t==null&&(t=Object.keys(m[2].properties).length>0),t?FM:OM}let l=o(i,-1),u=l(i);return{c(){e=Ht("div"),u.c(),this.h()},l(m){e=Gt(m,"DIV",{class:!0});var r=$t(e);u.l(r),r.forEach(De),this.h()},h(){qt(e,"class","popup-table svelte-15dh02j")},m(m,r){jt(m,e,r),u.m(e,null)},p(m,r){l===(l=o(m,r))&&u?u.p(m,r):(u.d(1),u=l(m),u&&(u.c(),u.m(e,null)))},d(m){m&&De(e),u.d()}}}function OM(i){let e,t,o=i[2].sourceLayer+"",l,u;return{c(){e=Ht("div"),t=Kn("No attributes in the selected layer '"),l=Kn(o),u=Kn("'"),this.h()},l(m){e=Gt(m,"DIV",{class:!0});var r=$t(e);t=Jn(r,"No attributes in the selected layer '"),l=Jn(r,o),u=Jn(r,"'"),r.forEach(De),this.h()},h(){qt(e,"class","notification is-info is-light")},m(m,r){jt(m,e,r),Ut(e,t),Ut(e,l),Ut(e,u)},p(m,r){r&4&&o!==(o=m[2].sourceLayer+"")&&Os(l,o)},d(m){m&&De(e)}}}function FM(i){let e,t=Object.keys(i[2].properties),o=[];for(let l=0;l<t.length;l+=1)o[l]=K5(q5(i,t,l));return{c(){e=Ht("table");for(let l=0;l<o.length;l+=1)o[l].c();this.h()},l(l){e=Gt(l,"TABLE",{class:!0});var u=$t(e);for(let m=0;m<o.length;m+=1)o[m].l(u);u.forEach(De),this.h()},h(){qt(e,"class","table is-bordered is-striped is-narrow is-hoverable is-fullwidth")},m(l,u){jt(l,e,u);for(let m=0;m<o.length;m+=1)o[m].m(e,null)},p(l,u){if(u&4){t=Object.keys(l[2].properties);let m;for(m=0;m<t.length;m+=1){const r=q5(l,t,m);o[m]?o[m].p(r,u):(o[m]=K5(r),o[m].c(),o[m].m(e,null))}for(;m<o.length;m+=1)o[m].d(1);o.length=t.length}},d(l){l&&De(e),Ja(o,l)}}}function K5(i){let e,t,o=i[12]+"",l,u,m=i[2].properties[i[12]]+"",r;return{c(){e=Ht("tr"),t=Ht("th"),l=Kn(o),u=Ht("td"),r=Kn(m)},l(f){e=Gt(f,"TR",{});var _=$t(e);t=Gt(_,"TH",{});var b=$t(t);l=Jn(b,o),b.forEach(De),u=Gt(_,"TD",{});var v=$t(u);r=Jn(v,m),v.forEach(De),_.forEach(De)},m(f,_){jt(f,e,_),Ut(e,t),Ut(t,l),Ut(e,u),Ut(u,r)},p(f,_){_&4&&o!==(o=f[12]+"")&&Os(l,o),_&4&&m!==(m=f[2].properties[f[12]]+"")&&Os(r,m)},d(f){f&&De(e)}}}function RM(i){let e,t,o=i[0]&&i[0].length>0&&W5(i),l=i[2]&&Z5(i);return{c(){e=Ht("div"),o&&o.c(),t=Wi(),l&&l.c()},l(u){e=Gt(u,"DIV",{});var m=$t(e);o&&o.l(m),t=Xi(m),l&&l.l(m),m.forEach(De)},m(u,m){jt(u,e,m),o&&o.m(e,null),Ut(e,t),l&&l.m(e,null),i[9](e)},p(u,[m]){u[0]&&u[0].length>0?o?o.p(u,m):(o=W5(u),o.c(),o.m(e,t)):o&&(o.d(1),o=null),u[2]?l?l.p(u,m):(l=Z5(u),l.c(),l.m(e,null)):l&&(l.d(1),l=null)},i:go,o:go,d(u){u&&De(e),o&&o.d(),l&&l.d(),i[9](null)}}}function BM(i,e,t){let o,{map:l}=e,{targetLayers:u=[]}=e,m,r,f=[],_;function b(){}b.prototype.onAdd=function(T){return this.map=T,this.controlContainer=document.createElement("div"),this.controlContainer.className="mapboxgl-ctrl mapboxgl-ctrl-group",this.button=document.createElement("button"),this.button.className="maplibre-identify-icon",this.button.type="button",this.button.addEventListener("click",()=>{this.changeButtonCondition()}),this.controlContainer.appendChild(this.button),this.button.dispatchEvent(new Event("click")),this.controlContainer},b.prototype.changeButtonCondition=function(){this.isActive?(this.button.classList.remove("-active"),this.isActive=!1,this.map.off("click",this.onClick.bind(this)),t(0,f=[]),t(2,_=void 0),m&&(m.remove(),m=void 0)):(this.button.classList.add("-active"),this.isActive=!0,this.map.on("click",this.onClick.bind(this)))},b.prototype.onClick=function(T){if(!this.isActive){t(0,f=[]),t(2,_=void 0);return}let S=[];u.length>0?u.forEach(O=>{this.map.getLayer(O)&&S.push(O)}):S=l.getStyle().layers.map(O=>O.id);const M=this.map.queryRenderedFeatures(T.point,{layers:S});t(0,f=M),t(2,_=f[0]),f.length>0?m=new Tu.exports.Popup().setLngLat(T.lngLat).setDOMContent(r).setMaxWidth("300px").addTo(l):m&&(m.remove(),m=void 0)},b.prototype.onRemove=function(){!this.controlContainer||!this.controlContainer.parentNode||!this.map||!this.button||(this.controlContainer.parentNode.removeChild(this.controlContainer),this.map.off("click",this.onClick.bind(this)),this.map=void 0)};let v=null;ks(async()=>{t(6,v=new b)});function w(){_=j0(this),t(2,_),t(0,f)}function x(){_=j0(this),t(2,_),t(0,f)}function C(T){bn[T?"unshift":"push"](()=>{r=T,t(1,r)})}return i.$$set=T=>{"map"in T&&t(4,l=T.map),"targetLayers"in T&&t(5,u=T.targetLayers)},i.$$.update=()=>{i.$$.dirty&1&&t(3,o=f.length===1),i.$$.dirty&80&&l&&v!==null&&l.hasControl(v)===!1&&l.addControl(v,"top-right")},[f,r,_,o,l,u,v,w,x,C]}class zM extends br{constructor(e){super(),wr(this,e,BM,RM,mr,{map:4,targetLayers:5})}}/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var Ch={CLOSING:"mdc-snackbar--closing",OPEN:"mdc-snackbar--open",OPENING:"mdc-snackbar--opening"},J1={ACTION_SELECTOR:".mdc-snackbar__action",ARIA_LIVE_LABEL_TEXT_ATTR:"data-mdc-snackbar-label-text",CLOSED_EVENT:"MDCSnackbar:closed",CLOSING_EVENT:"MDCSnackbar:closing",DISMISS_SELECTOR:".mdc-snackbar__dismiss",LABEL_SELECTOR:".mdc-snackbar__label",OPENED_EVENT:"MDCSnackbar:opened",OPENING_EVENT:"MDCSnackbar:opening",REASON_ACTION:"action",REASON_DISMISS:"dismiss",SURFACE_SELECTOR:".mdc-snackbar__surface"},Yc={DEFAULT_AUTO_DISMISS_TIMEOUT_MS:5e3,INDETERMINATE:-1,MAX_AUTO_DISMISS_TIMEOUT_MS:1e4,MIN_AUTO_DISMISS_TIMEOUT_MS:4e3,SNACKBAR_ANIMATION_CLOSE_TIME_MS:75,SNACKBAR_ANIMATION_OPEN_TIME_MS:150,ARIA_LIVE_DELAY_MS:1e3};/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var NM=Yc.ARIA_LIVE_DELAY_MS,J5=J1.ARIA_LIVE_LABEL_TEXT_ATTR;function jM(i,e){e===void 0&&(e=i);var t=i.getAttribute("aria-live"),o=e.textContent.trim();!o||!t||(i.setAttribute("aria-live","off"),e.textContent="",e.innerHTML='<span style="display: inline-block; width: 0; height: 1px;">&nbsp;</span>',e.setAttribute(J5,o),setTimeout(function(){i.setAttribute("aria-live",t),e.removeAttribute(J5),e.textContent=o},NM))}/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var Q5=Ch.OPENING,$5=Ch.OPEN,e4=Ch.CLOSING,UM=J1.REASON_ACTION,T2=J1.REASON_DISMISS,VM=function(i){jl(e,i);function e(t){var o=i.call(this,fs(fs({},e.defaultAdapter),t))||this;return o.opened=!1,o.animationFrame=0,o.animationTimer=0,o.autoDismissTimer=0,o.autoDismissTimeoutMs=Yc.DEFAULT_AUTO_DISMISS_TIMEOUT_MS,o.closeOnEscape=!0,o}return Object.defineProperty(e,"cssClasses",{get:function(){return Ch},enumerable:!1,configurable:!0}),Object.defineProperty(e,"strings",{get:function(){return J1},enumerable:!1,configurable:!0}),Object.defineProperty(e,"numbers",{get:function(){return Yc},enumerable:!1,configurable:!0}),Object.defineProperty(e,"defaultAdapter",{get:function(){return{addClass:function(){},announce:function(){},notifyClosed:function(){},notifyClosing:function(){},notifyOpened:function(){},notifyOpening:function(){},removeClass:function(){}}},enumerable:!1,configurable:!0}),e.prototype.destroy=function(){this.clearAutoDismissTimer(),cancelAnimationFrame(this.animationFrame),this.animationFrame=0,clearTimeout(this.animationTimer),this.animationTimer=0,this.adapter.removeClass(Q5),this.adapter.removeClass($5),this.adapter.removeClass(e4)},e.prototype.open=function(){var t=this;this.clearAutoDismissTimer(),this.opened=!0,this.adapter.notifyOpening(),this.adapter.removeClass(e4),this.adapter.addClass(Q5),this.adapter.announce(),this.runNextAnimationFrame(function(){t.adapter.addClass($5),t.animationTimer=setTimeout(function(){var o=t.getTimeoutMs();t.handleAnimationTimerEnd(),t.adapter.notifyOpened(),o!==Yc.INDETERMINATE&&(t.autoDismissTimer=setTimeout(function(){t.close(T2)},o))},Yc.SNACKBAR_ANIMATION_OPEN_TIME_MS)})},e.prototype.close=function(t){var o=this;t===void 0&&(t=""),this.opened&&(cancelAnimationFrame(this.animationFrame),this.animationFrame=0,this.clearAutoDismissTimer(),this.opened=!1,this.adapter.notifyClosing(t),this.adapter.addClass(Ch.CLOSING),this.adapter.removeClass(Ch.OPEN),this.adapter.removeClass(Ch.OPENING),clearTimeout(this.animationTimer),this.animationTimer=setTimeout(function(){o.handleAnimationTimerEnd(),o.adapter.notifyClosed(t)},Yc.SNACKBAR_ANIMATION_CLOSE_TIME_MS))},e.prototype.isOpen=function(){return this.opened},e.prototype.getTimeoutMs=function(){return this.autoDismissTimeoutMs},e.prototype.setTimeoutMs=function(t){var o=Yc.MIN_AUTO_DISMISS_TIMEOUT_MS,l=Yc.MAX_AUTO_DISMISS_TIMEOUT_MS,u=Yc.INDETERMINATE;if(t===Yc.INDETERMINATE||t<=l&&t>=o)this.autoDismissTimeoutMs=t;else throw new Error(`
        timeoutMs must be an integer in the range `+o+"\u2013"+l+`
        (or `+u+" to disable), but got '"+t+"'")},e.prototype.getCloseOnEscape=function(){return this.closeOnEscape},e.prototype.setCloseOnEscape=function(t){this.closeOnEscape=t},e.prototype.handleKeyDown=function(t){var o=t.key==="Escape"||t.keyCode===27;o&&this.getCloseOnEscape()&&this.close(T2)},e.prototype.handleActionButtonClick=function(t){this.close(UM)},e.prototype.handleActionIconClick=function(t){this.close(T2)},e.prototype.clearAutoDismissTimer=function(){clearTimeout(this.autoDismissTimer),this.autoDismissTimer=0},e.prototype.handleAnimationTimerEnd=function(){this.animationTimer=0,this.adapter.removeClass(Ch.OPENING),this.adapter.removeClass(Ch.CLOSING)},e.prototype.runNextAnimationFrame=function(t){var o=this;cancelAnimationFrame(this.animationFrame),this.animationFrame=requestAnimationFrame(function(){o.animationFrame=0,clearTimeout(o.animationTimer),o.animationTimer=setTimeout(t,0)})},e}(oc);function qM(i){let e,t,o,l,u,m,r,f,_;const b=i[25].default,v=ur(b,i,i[24],null);let w=[{class:o=sr({[i[4]]:!0,"mdc-snackbar__surface":!0})},{role:"status"},{"aria-relevant":"additions"},fo(i[12],"surface$")],x={};for(let S=0;S<w.length;S+=1)x=Yi(x,w[S]);let C=[{class:u=sr({[i[1]]:!0,"mdc-snackbar":!0,"mdc-snackbar--stacked":i[2]==="stacked","mdc-snackbar--leading":i[3],...i[8]})},ff(i[12],["surface$"])],T={};for(let S=0;S<C.length;S+=1)T=Yi(T,C[S]);return{c(){e=Ht("aside"),t=Ht("div"),v&&v.c(),this.h()},l(S){e=Gt(S,"ASIDE",{class:!0});var M=$t(e);t=Gt(M,"DIV",{class:!0,role:!0,"aria-relevant":!0});var O=$t(t);v&&v.l(O),O.forEach(De),M.forEach(De),this.h()},h(){nr(t,x),nr(e,T)},m(S,M){jt(S,e,M),Ut(e,t),v&&v.m(t,null),i[26](e),r=!0,f||(_=[tr(l=To.call(null,t,i[5])),xn(t,"click",i[10]),tr(m=To.call(null,e,i[0])),tr(i[9].call(null,e)),xn(e,"SMUISnackbar:closed",i[11]),xn(e,"keydown",i[27])],f=!0)},p(S,M){v&&v.p&&(!r||M[0]&16777216)&&cr(v,b,S,S[24],r?fr(b,S[24],M,null):hr(S[24]),null),nr(t,x=xr(w,[(!r||M[0]&16&&o!==(o=sr({[S[4]]:!0,"mdc-snackbar__surface":!0})))&&{class:o},{role:"status"},{"aria-relevant":"additions"},M[0]&4096&&fo(S[12],"surface$")])),l&&so(l.update)&&M[0]&32&&l.update.call(null,S[5]),nr(e,T=xr(C,[(!r||M[0]&270&&u!==(u=sr({[S[1]]:!0,"mdc-snackbar":!0,"mdc-snackbar--stacked":S[2]==="stacked","mdc-snackbar--leading":S[3],...S[8]})))&&{class:u},M[0]&4096&&ff(S[12],["surface$"])])),m&&so(m.update)&&M[0]&1&&m.update.call(null,S[0])},i(S){r||(vt(v,S),r=!0)},o(S){Lt(v,S),r=!1},d(S){S&&De(e),v&&v.d(S),i[26](null),f=!1,Lo(_)}}}let t4=Promise.resolve();function HM(i,e,t){const o=["use","class","variant","leading","timeoutMs","closeOnEscape","labelText","actionButtonText","surface$class","surface$use","open","forceOpen","close","isOpen","getLabelElement","getActionButtonElement","getElement"];let l=Yn(e,o),{$$slots:u={},$$scope:m}=e;const{closest:r}=E1,f=_o(yo());let _=()=>{};function b(Se){return Se===_}let{use:v=[]}=e,{class:w=""}=e,{variant:x=""}=e,{leading:C=!1}=e,{timeoutMs:T=5e3}=e,{closeOnEscape:S=!0}=e,{labelText:M=_}=e,{actionButtonText:O=_}=e,{surface$class:V=""}=e,{surface$use:X=[]}=e,Z,te,J={},ie,Ee=new Promise(Se=>ie=Se);as("SMUI:label:context","snackbar"),ks(()=>(t(6,te=new VM({addClass:Pe,announce:()=>jM(Xe()),notifyClosed:Se=>Do(Ce(),"SMUISnackbar:closed",Se?{reason:Se}:{},void 0,!0),notifyClosing:Se=>Do(Ce(),"SMUISnackbar:closing",Se?{reason:Se}:{},void 0,!0),notifyOpened:()=>Do(Ce(),"SMUISnackbar:opened",void 0,void 0,!0),notifyOpening:()=>Do(Ce(),"SMUISnackbar:opening",void 0,void 0,!0),removeClass:de})),te.init(),()=>{te.destroy()}));function Pe(Se){J[Se]||t(8,J[Se]=!0,J)}function de(Se){(!(Se in J)||J[Se])&&t(8,J[Se]=!1,J)}function Te(Se){const he=Se.target;te&&(r(he,".mdc-snackbar__action")?te.handleActionButtonClick(Se):r(he,".mdc-snackbar__dismiss")&&te.handleActionIconClick(Se))}function ve(){ie(),Ee=new Promise(Se=>ie=Se)}function _e(){t4=t4.then(()=>(te.open(),Ee))}function ot(){return te.open()}function it(Se){return te.close(Se)}function It(){return te.isOpen()}function Xe(){var Se;return(Se=Ce().querySelector(".mdc-snackbar__label"))!==null&&Se!==void 0?Se:document.createElement("div")}function we(){var Se;return(Se=Ce().querySelector(".mdc-snackbar__action"))!==null&&Se!==void 0?Se:document.createElement("button")}function Ce(){return Z}function Re(Se){bn[Se?"unshift":"push"](()=>{Z=Se,t(7,Z)})}const le=Se=>te&&te.handleKeyDown(Se);return i.$$set=Se=>{e=Yi(Yi({},e),po(Se)),t(12,l=Yn(e,o)),"use"in Se&&t(0,v=Se.use),"class"in Se&&t(1,w=Se.class),"variant"in Se&&t(2,x=Se.variant),"leading"in Se&&t(3,C=Se.leading),"timeoutMs"in Se&&t(13,T=Se.timeoutMs),"closeOnEscape"in Se&&t(14,S=Se.closeOnEscape),"labelText"in Se&&t(15,M=Se.labelText),"actionButtonText"in Se&&t(16,O=Se.actionButtonText),"surface$class"in Se&&t(4,V=Se.surface$class),"surface$use"in Se&&t(5,X=Se.surface$use),"$$scope"in Se&&t(24,m=Se.$$scope)},i.$$.update=()=>{i.$$.dirty[0]&8256&&te&&te.getTimeoutMs()!==T&&te.setTimeoutMs(T),i.$$.dirty[0]&16448&&te&&te.getCloseOnEscape()!==S&&te.setCloseOnEscape(S),i.$$.dirty[0]&32832&&te&&!b(M)&&Xe().textContent!==M&&(Xe().textContent=M),i.$$.dirty[0]&65600&&te&&!b(O)&&we().textContent!==O&&(we().textContent=O)},[v,w,x,C,V,X,te,Z,J,f,Te,ve,l,T,S,M,O,_e,ot,it,It,Xe,we,Ce,m,u,Re,le]}class GM extends br{constructor(e){super(),wr(this,e,HM,qM,mr,{use:0,class:1,variant:2,leading:3,timeoutMs:13,closeOnEscape:14,labelText:15,actionButtonText:16,surface$class:4,surface$use:5,open:17,forceOpen:18,close:19,isOpen:20,getLabelElement:21,getActionButtonElement:22,getElement:23},null,[-1,-1])}get open(){return this.$$.ctx[17]}get forceOpen(){return this.$$.ctx[18]}get close(){return this.$$.ctx[19]}get isOpen(){return this.$$.ctx[20]}get getLabelElement(){return this.$$.ctx[21]}get getActionButtonElement(){return this.$$.ctx[22]}get getElement(){return this.$$.ctx[23]}}const WM=bl({class:"mdc-snackbar__actions",props:{"aria-atomic":"true"},contexts:{"SMUI:button:context":"snackbar:actions","SMUI:icon-button:context":"snackbar:actions","SMUI:label:context":void 0},component:tp});function XM(i){let e;return{c(){e=Kn(i[1])},l(t){e=Jn(t,i[1])},m(t,o){jt(t,e,o)},p(t,o){o&2&&Os(e,t[1])},d(t){t&&De(e)}}}function YM(i){let e,t,o,l;return{c(){e=Ht("div"),t=Ht("i"),this.h()},l(u){e=Gt(u,"DIV",{class:!0,style:!0});var m=$t(e);t=Gt(m,"I",{class:!0}),$t(t).forEach(De),m.forEach(De),this.h()},h(){qt(t,"class","fas fa-xmark"),qt(e,"class","icon is-small menu-button svelte-ffzutn"),Ou(e,"color","white")},m(u,m){jt(u,e,m),Ut(e,t),o||(l=xn(e,"click",i[3]),o=!0)},p:go,d(u){u&&De(e),o=!1,l()}}}function ZM(i){let e,t,o,l;return e=new oh({props:{$$slots:{default:[XM]},$$scope:{ctx:i}}}),o=new WM({props:{$$slots:{default:[YM]},$$scope:{ctx:i}}}),{c(){en(e.$$.fragment),t=Wi(),en(o.$$.fragment)},l(u){un(e.$$.fragment,u),t=Xi(u),un(o.$$.fragment,u)},m(u,m){tn(e,u,m),jt(u,t,m),tn(o,u,m),l=!0},p(u,m){const r={};m&34&&(r.$$scope={dirty:m,ctx:u}),e.$set(r);const f={};m&33&&(f.$$scope={dirty:m,ctx:u}),o.$set(f)},i(u){l||(vt(e.$$.fragment,u),vt(o.$$.fragment,u),l=!0)},o(u){Lt(e.$$.fragment,u),Lt(o.$$.fragment,u),l=!1},d(u){nn(e,u),u&&De(t),nn(o,u)}}}function KM(i){let e,t,o={$$slots:{default:[ZM]},$$scope:{ctx:i}};return e=new GM({props:o}),i[4](e),{c(){en(e.$$.fragment)},l(l){un(e.$$.fragment,l)},m(l,u){tn(e,l,u),t=!0},p(l,[u]){const m={};u&35&&(m.$$scope={dirty:u,ctx:l}),e.$set(m)},i(l){t||(vt(e.$$.fragment,l),t=!0)},o(l){Lt(e.$$.fragment,l),t=!1},d(l){i[4](null),nn(e,l)}}}function JM(i,e,t){let o;Yo(i,q2,f=>t(2,o=f));let l,u;const m=()=>l.close();function r(f){bn[f?"unshift":"push"](()=>{l=f,t(0,l)})}return i.$$.update=()=>{i.$$.dirty&5&&o&&o.length>0&&l&&(t(1,u=o.shift()),l.open())},[l,u,o,m,r]}class QM extends br{constructor(e){super(),wr(this,e,JM,KM,mr,{})}}function i4(i){let e,t,o,l,u,m=i[0].search&&n4(i);function r(b){i[7](b)}function f(b){i[8](b)}let _={};return i[3]!==void 0&&(_.map=i[3]),i[0].popup.target!==void 0&&(_.targetLayers=i[0].popup.target),t=new zM({props:_}),bn.push(()=>Uo(t,"map",r)),bn.push(()=>Uo(t,"targetLayers",f)),{c(){m&&m.c(),e=Wi(),en(t.$$.fragment)},l(b){m&&m.l(b),e=Xi(b),un(t.$$.fragment,b)},m(b,v){m&&m.m(b,v),jt(b,e,v),tn(t,b,v),u=!0},p(b,v){b[0].search?m?(m.p(b,v),v&1&&vt(m,1)):(m=n4(b),m.c(),vt(m,1),m.m(e.parentNode,e)):m&&(Fr(),Lt(m,1,1,()=>{m=null}),Or());const w={};!o&&v&8&&(o=!0,w.map=b[3],Vo(()=>o=!1)),!l&&v&1&&(l=!0,w.targetLayers=b[0].popup.target,Vo(()=>l=!1)),t.$set(w)},i(b){u||(vt(m),vt(t.$$.fragment,b),u=!0)},o(b){Lt(m),Lt(t.$$.fragment,b),u=!1},d(b){m&&m.d(b),b&&De(e),nn(t,b)}}}function n4(i){let e,t,o,l;function u(f){i[5](f)}function m(f){i[6](f)}let r={};return i[3]!==void 0&&(r.map=i[3]),i[0].search!==void 0&&(r.searchOption=i[0].search),e=new LM({props:r}),bn.push(()=>Uo(e,"map",u)),bn.push(()=>Uo(e,"searchOption",m)),{c(){en(e.$$.fragment)},l(f){un(e.$$.fragment,f)},m(f,_){tn(e,f,_),l=!0},p(f,_){const b={};!t&&_&8&&(t=!0,b.map=f[3],Vo(()=>t=!1)),!o&&_&1&&(o=!0,b.searchOption=f[0].search,Vo(()=>o=!1)),e.$set(b)},i(f){l||(vt(e.$$.fragment,f),l=!0)},o(f){Lt(e.$$.fragment,f),l=!1},d(f){nn(e,f)}}}function $M(i){let e,t,o,l,u,m,r=i[2]&&i4(i);return u=new QM({}),{c(){e=Ht("div"),t=Ht("div"),o=Wi(),r&&r.c(),l=Wi(),en(u.$$.fragment),this.h()},l(f){e=Gt(f,"DIV",{class:!0});var _=$t(e);t=Gt(_,"DIV",{class:!0,id:!0}),$t(t).forEach(De),o=Xi(_),r&&r.l(_),_.forEach(De),l=Xi(f),un(u.$$.fragment,f),this.h()},h(){qt(t,"class","map svelte-1bahl15"),qt(t,"id","map"),qt(e,"class","map-wrap svelte-1bahl15")},m(f,_){jt(f,e,_),Ut(e,t),i[4](t),Ut(e,o),r&&r.m(e,null),jt(f,l,_),tn(u,f,_),m=!0},p(f,[_]){f[2]?r?(r.p(f,_),_&4&&vt(r,1)):(r=i4(f),r.c(),vt(r,1),r.m(e,null)):r&&(Fr(),Lt(r,1,1,()=>{r=null}),Or())},i(f){m||(vt(r),vt(u.$$.fragment,f),m=!0)},o(f){Lt(r),Lt(u.$$.fragment,f),m=!1},d(f){f&&De(e),i[4](null),r&&r.d(),f&&De(l),nn(u,f)}}}function eD(i,e,t){let o;Yo(i,Pu,w=>t(3,o=w));let l,u,m=!1;ks(async()=>{const w=new O4,x=Br.styles[0],C=w.get();let T=x;if(C){const O=w.getMatchedStyleByTitle(Br.styles,C);O&&(T=O)}Gd.update(()=>T);const S=new Tu.exports.Map({container:l,style:T.uri,center:Br.center,zoom:Br.zoom,hash:!0,attributionControl:!1});S.addControl(new Tu.exports.NavigationControl({visualizePitch:!0,showZoom:!0,showCompass:!0}),"top-right"),S.addControl(new Tu.exports.GeolocateControl({positionOptions:{enableHighAccuracy:!0},trackUserLocation:!0}),"top-right"),S.addControl(new Tu.exports.FullscreenControl({container:document.querySelector("body")})),S.addControl(new Tu.exports.ScaleControl({maxWidth:80,unit:"metric"}),"bottom-left"),S.addControl(new Tu.exports.AttributionControl({compact:!0}),"bottom-right"),Br.terrain&&(S.setMaxPitch(85),S.addControl(new Tu.exports.TerrainControl(Br.terrain))),Br.areaSwitcher&&S.addControl(new PM(Br.areaSwitcher.areas),"top-right");const M=()=>{S.loadImage(`${Br.basePath}/map-center.png`,(O,V)=>{if(O)throw O;S.hasImage("map-center")||S.addImage("map-center",V),S.getSource("center")||(u={type:"geojson",data:{type:"FeatureCollection",features:[{type:"Feature",geometry:{type:"Point",coordinates:[S.getCenter().lng,S.getCenter().lat]}}]}},S.addSource("center",u)),S.getLayer("points")||S.addLayer({id:"points",type:"symbol",source:"center",layout:{"icon-image":"map-center","icon-size":.3}})})};S.on("load",()=>{t(2,m=!0),M(),S.on("moveend",()=>{S.getSource("center")?(u.data.features[0].geometry.coordinates=[S.getCenter().lng,S.getCenter().lat],S.getSource("center").setData(u.data)):M()})}),Pu.update(()=>S)});function r(w){bn[w?"unshift":"push"](()=>{l=w,t(1,l)})}function f(w){o=w,Pu.set(o)}function _(w){i.$$.not_equal(Br.search,w)&&(Br.search=w,t(0,Br))}function b(w){o=w,Pu.set(o)}function v(w){i.$$.not_equal(Br.popup.target,w)&&(Br.popup.target=w,t(0,Br))}return[Br,l,m,o,r,f,_,b,v]}class tD extends br{constructor(e){super(),wr(this,e,eD,$M,mr,{})}}function iD(i){let e,t;return e=new tD({}),{c(){en(e.$$.fragment)},l(o){un(e.$$.fragment,o)},m(o,l){tn(e,o,l),t=!0},i(o){t||(vt(e.$$.fragment,o),t=!0)},o(o){Lt(e.$$.fragment,o),t=!1},d(o){nn(e,o)}}}function nD(i){let e,t,o=Br.title+"",l,u,m,r,f,_,b,v,w,x,C,T,S,M,O,V;function X(ie){i[1](ie)}let Z={};i[0]!==void 0&&(Z.drawerOpen=i[0]),C=new dA({props:Z}),bn.push(()=>Uo(C,"drawerOpen",X));function te(ie){i[2](ie)}let J={$$slots:{default:[iD]},$$scope:{ctx:i}};return i[0]!==void 0&&(J.open=i[0]),M=new rM({props:J}),bn.push(()=>Uo(M,"open",te)),{c(){e=Ht("sveltekit:head"),t=Ht("title"),l=Kn(o),u=Wi(),m=Ht("script"),f=Wi(),_=Ht("script"),b=Kn(`window.dataLayer = window.dataLayer || [];
		function gtag() {
			dataLayer.push(arguments);
		}
		gtag('js', new Date());

		gtag('config', 'UA-170080825-7');`),v=Wi(),w=Ht("link"),x=Wi(),en(C.$$.fragment),S=Wi(),en(M.$$.fragment),this.h()},l(ie){e=Gt(ie,"SVELTEKIT:HEAD",{});var Ee=$t(e);t=Gt(Ee,"TITLE",{});var Pe=$t(t);l=Jn(Pe,o),Pe.forEach(De),u=Xi(Ee),m=Gt(Ee,"SCRIPT",{src:!0});var de=$t(m);de.forEach(De),f=Xi(Ee),_=Gt(Ee,"SCRIPT",{});var Te=$t(_);b=Jn(Te,`window.dataLayer = window.dataLayer || [];
		function gtag() {
			dataLayer.push(arguments);
		}
		gtag('js', new Date());

		gtag('config', 'UA-170080825-7');`),Te.forEach(De),v=Xi(Ee),w=Gt(Ee,"LINK",{rel:!0,href:!0,integrity:!0,crossorigin:!0,referrerpolicy:!0}),Ee.forEach(De),x=Xi(ie),un(C.$$.fragment,ie),S=Xi(ie),un(M.$$.fragment,ie),this.h()},h(){m.async=!0,o4(m.src,r="https://www.googletagmanager.com/gtag/js?id=UA-170080825-7")||qt(m,"src",r),qt(w,"rel","stylesheet"),qt(w,"href","https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.0/css/all.min.css"),qt(w,"integrity","sha512-xh6O/CkQoPOWDdYTDqeRdPCVd1SpvCA9XXcUnZS2FmJNp1coAFzvtCN9BmamE+4aHK8yyUHUSCcJHgXloTyT2A=="),qt(w,"crossorigin","anonymous"),qt(w,"referrerpolicy","no-referrer")},m(ie,Ee){jt(ie,e,Ee),Ut(e,t),Ut(t,l),Ut(e,u),Ut(e,m),Ut(e,f),Ut(e,_),Ut(_,b),Ut(e,v),Ut(e,w),jt(ie,x,Ee),tn(C,ie,Ee),jt(ie,S,Ee),tn(M,ie,Ee),V=!0},p(ie,[Ee]){const Pe={};!T&&Ee&1&&(T=!0,Pe.drawerOpen=ie[0],Vo(()=>T=!1)),C.$set(Pe);const de={};Ee&16&&(de.$$scope={dirty:Ee,ctx:ie}),!O&&Ee&1&&(O=!0,de.open=ie[0],Vo(()=>O=!1)),M.$set(de)},i(ie){V||(vt(C.$$.fragment,ie),vt(M.$$.fragment,ie),V=!0)},o(ie){Lt(C.$$.fragment,ie),Lt(M.$$.fragment,ie),V=!1},d(ie){ie&&De(e),ie&&De(x),nn(C,ie),ie&&De(S),nn(M,ie)}}}function rD(i,e,t){let o=!1;const l=Br.styles[0];Gd.update(()=>l);function u(r){o=r,t(0,o)}function m(r){o=r,t(0,o)}return[o,u,m]}class hD extends br{constructor(e){super(),wr(this,e,rD,nD,mr,{})}}export{hD as P,M0 as c};
