var mA=Object.defineProperty;var gA=(e,t,r)=>t in e?mA(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var Bi=(e,t,r)=>(gA(e,typeof t!="symbol"?t+"":t,r),r);import{_ as td}from"./preload-helper-41c905a7.js";import{S as Dn,i as zn,s as Ln,k as yt,a as mr,l as vt,m as Ct,c as gr,h as ge,b as Lt,K as lt,C as Qn,o as Ff,n as ve,M as Ol,q as ei,r as ti,u as ta,N as qh,v as Ft,O as Cc,P as Vc,Q as rn,e as ao,R as Vh,T as $h,U as ni,f as Xe,g as ji,t as it,d as Ui,x as Ut,y as Yt,z as qt,V as sh,F as g0,A as Vt,E as oa,p as zo,W as N0,X as Jt,Y as er,Z as rp,_ as Rh,$ as yA,L as ql,G as Ou,H as Fu,I as Bu,J as ju,a0 as vA,a1 as mp,a2 as z_,a3 as _A,a4 as Fl,D as bA,w as rs,a5 as Ly,a6 as np,a7 as lh,a8 as Py,a9 as wA,aa as xA,ab as P1,ac as Mw,ad as N_,ae as kA}from"./index-75416758.js";import{w as hf,d as AA}from"./index-0f63c3d9.js";var Hc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function EA(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function SA(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var r=function n(){if(this instanceof n){var o=[null];o.push.apply(o,arguments);var u=Function.bind.apply(t,o);return new u}return t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(n){var o=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(r,n,o.get?o:{enumerable:!0,get:function(){return e[n]}})}),r}var Ec={},CA={get exports(){return Ec},set exports(e){Ec=e}};(function(e,t){(function(r,n){e.exports=n()})(Hc,function(){var r,n,o;function u(l,h){if(!r)r=h;else if(!n)n=h;else{var v="var sharedChunk = {}; ("+r+")(sharedChunk); ("+n+")(sharedChunk);",w={};r(w),o=h(w),typeof window<"u"&&(o.workerUrl=window.URL.createObjectURL(new Blob([v],{type:"text/javascript"})))}}u(["exports"],function(l){var h=v;function v(y,p,_,S){this.cx=3*y,this.bx=3*(_-y)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*p,this.by=3*(S-p)-this.cy,this.ay=1-this.cy-this.by,this.p1x=y,this.p1y=p,this.p2x=_,this.p2y=S}function w(y,p,_,S){const z=new h(y,p,_,S);return function(O){return z.solve(O)}}v.prototype={sampleCurveX:function(y){return((this.ax*y+this.bx)*y+this.cx)*y},sampleCurveY:function(y){return((this.ay*y+this.by)*y+this.cy)*y},sampleCurveDerivativeX:function(y){return(3*this.ax*y+2*this.bx)*y+this.cx},solveCurveX:function(y,p){if(p===void 0&&(p=1e-6),y<0)return 0;if(y>1)return 1;for(var _=y,S=0;S<8;S++){var z=this.sampleCurveX(_)-y;if(Math.abs(z)<p)return _;var O=this.sampleCurveDerivativeX(_);if(Math.abs(O)<1e-6)break;_-=z/O}var V=0,Q=1;for(_=y,S=0;S<20&&(z=this.sampleCurveX(_),!(Math.abs(z-y)<p));S++)y>z?V=_:Q=_,_=.5*(Q-V)+V;return _},solve:function(y,p){return this.sampleCurveY(this.solveCurveX(y,p))}};const E=w(.25,.1,.25,1);function T(y,p,_){return Math.min(_,Math.max(p,y))}function I(y,p,_){const S=_-p,z=((y-p)%S+S)%S+p;return z===p?_:z}function F(y,...p){for(const _ of p)for(const S in _)y[S]=_[S];return y}let U=1;function G(y,p){y.forEach(_=>{p[_]&&(p[_]=p[_].bind(p))})}function H(y,p,_){const S={};for(const z in y)S[z]=p.call(_||this,y[z],z,y);return S}function X(y,p,_){const S={};for(const z in y)p.call(_||this,y[z],z,y)&&(S[z]=y[z]);return S}function ee(y){return Array.isArray(y)?y.map(ee):typeof y=="object"&&y?H(y,ee):y}const K={};function se(y){K[y]||(typeof console<"u"&&console.warn(y),K[y]=!0)}function ce(y,p,_){return(_.y-y.y)*(p.x-y.x)>(p.y-y.y)*(_.x-y.x)}function _e(y){let p=0;for(let _,S,z=0,O=y.length,V=O-1;z<O;V=z++)_=y[z],S=y[V],p+=(S.x-_.x)*(_.y+S.y);return p}function pe(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function Ge(y){const p={};if(y.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(_,S,z,O)=>{const V=z||O;return p[S]=!V||V.toLowerCase(),""}),p["max-age"]){const _=parseInt(p["max-age"],10);isNaN(_)?delete p["max-age"]:p["max-age"]=_}return p}let We,Ae,Ie=null;function Fe(y){if(Ie==null){const p=y.navigator?y.navigator.userAgent:null;Ie=!!y.safari||!(!p||!(/\b(iPad|iPhone|iPod)\b/.test(p)||p.match("Safari")&&!p.match("Chrome")))}return Ie}function ot(y){return typeof ImageBitmap<"u"&&y instanceof ImageBitmap}const _t={now:typeof performance<"u"&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),frame(y){const p=requestAnimationFrame(y);return{cancel:()=>cancelAnimationFrame(p)}},getImageData(y,p=0){const _=window.document.createElement("canvas"),S=_.getContext("2d");if(!S)throw new Error("failed to create canvas 2d context");return _.width=y.width,_.height=y.height,S.drawImage(y,0,0,y.width,y.height),S.getImageData(-p,-p,y.width+2*p,y.height+2*p)},resolveURL:y=>(We||(We=document.createElement("a")),We.href=y,We.href),hardwareConcurrency:typeof navigator<"u"&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return!!matchMedia&&(Ae==null&&(Ae=matchMedia("(prefers-reduced-motion: reduce)")),Ae.matches)}};var ht=$e;function $e(y,p){this.x=y,this.y=p}$e.prototype={clone:function(){return new $e(this.x,this.y)},add:function(y){return this.clone()._add(y)},sub:function(y){return this.clone()._sub(y)},multByPoint:function(y){return this.clone()._multByPoint(y)},divByPoint:function(y){return this.clone()._divByPoint(y)},mult:function(y){return this.clone()._mult(y)},div:function(y){return this.clone()._div(y)},rotate:function(y){return this.clone()._rotate(y)},rotateAround:function(y,p){return this.clone()._rotateAround(y,p)},matMult:function(y){return this.clone()._matMult(y)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(y){return this.x===y.x&&this.y===y.y},dist:function(y){return Math.sqrt(this.distSqr(y))},distSqr:function(y){var p=y.x-this.x,_=y.y-this.y;return p*p+_*_},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(y){return Math.atan2(this.y-y.y,this.x-y.x)},angleWith:function(y){return this.angleWithSep(y.x,y.y)},angleWithSep:function(y,p){return Math.atan2(this.x*p-this.y*y,this.x*y+this.y*p)},_matMult:function(y){var p=y[2]*this.x+y[3]*this.y;return this.x=y[0]*this.x+y[1]*this.y,this.y=p,this},_add:function(y){return this.x+=y.x,this.y+=y.y,this},_sub:function(y){return this.x-=y.x,this.y-=y.y,this},_mult:function(y){return this.x*=y,this.y*=y,this},_div:function(y){return this.x/=y,this.y/=y,this},_multByPoint:function(y){return this.x*=y.x,this.y*=y.y,this},_divByPoint:function(y){return this.x/=y.x,this.y/=y.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var y=this.y;return this.y=this.x,this.x=-y,this},_rotate:function(y){var p=Math.cos(y),_=Math.sin(y),S=_*this.x+p*this.y;return this.x=p*this.x-_*this.y,this.y=S,this},_rotateAround:function(y,p){var _=Math.cos(y),S=Math.sin(y),z=p.y+S*(this.x-p.x)+_*(this.y-p.y);return this.x=p.x+_*(this.x-p.x)-S*(this.y-p.y),this.y=z,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},$e.convert=function(y){return y instanceof $e?y:Array.isArray(y)?new $e(y[0],y[1]):y};const ut={MAX_PARALLEL_IMAGE_REQUESTS:16,REGISTERED_PROTOCOLS:{}},bt="mapbox-tiles";let Ze,He,xe=500,Ne=50;function Pe(){typeof caches>"u"||Ze||(Ze=caches.open(bt))}let ft=1/0;const At={supported:!1,testSupport:function(y){!$t&&Kt&&(br?Gt(y):Pt=y)}};let Pt,Kt,$t=!1,br=!1;function Gt(y){const p=y.createTexture();y.bindTexture(y.TEXTURE_2D,p);try{if(y.texImage2D(y.TEXTURE_2D,0,y.RGBA,y.RGBA,y.UNSIGNED_BYTE,Kt),y.isContextLost())return;At.supported=!0}catch{}y.deleteTexture(p),$t=!0}typeof document<"u"&&(Kt=document.createElement("img"),Kt.onload=function(){Pt&&Gt(Pt),Pt=null,br=!0},Kt.onerror=function(){$t=!0,Pt=null},Kt.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");const Rr={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};typeof Object.freeze=="function"&&Object.freeze(Rr);class Mr extends Error{constructor(p,_,S,z){super(`AJAXError: ${_} (${p}): ${S}`),this.status=p,this.statusText=_,this.url=S,this.body=z}}const Kr=pe()?()=>self.worker&&self.worker.referrer:()=>(window.location.protocol==="blob:"?window.parent:window).location.href;function St(y,p){const _=new AbortController,S=new Request(y.url,{method:y.method||"GET",body:y.body,credentials:y.credentials,headers:y.headers,referrer:Kr(),signal:_.signal});let z=!1,O=!1;return y.type==="json"&&S.headers.set("Accept","application/json"),((V,Q,ie)=>{if(O)return;const he=Date.now();fetch(S).then(Ee=>Ee.ok?((Me,Ve,Qe)=>{(y.type==="arrayBuffer"?Me.arrayBuffer():y.type==="json"?Me.json():Me.text()).then(tt=>{O||(Ve&&Qe&&function(jt,Ot,xr){if(Pe(),!Ze)return;const jr={status:Ot.status,statusText:Ot.statusText,headers:new Headers};Ot.headers.forEach((Lr,an)=>jr.headers.set(an,Lr));const dr=Ge(Ot.headers.get("Cache-Control")||"");dr["no-store"]||(dr["max-age"]&&jr.headers.set("Expires",new Date(xr+1e3*dr["max-age"]).toUTCString()),new Date(jr.headers.get("Expires")).getTime()-xr<42e4||function(Lr,an){if(He===void 0)try{new Response(new ReadableStream),He=!0}catch{He=!1}He?an(Lr.body):Lr.blob().then(an)}(Ot,Lr=>{const an=new Response(Lr,jr);Pe(),Ze&&Ze.then(tn=>tn.put(function(ri){const fi=ri.indexOf("?");return fi<0?ri:ri.slice(0,fi)}(jt.url),an)).catch(tn=>se(tn.message))}))}(S,Ve,Qe),z=!0,p(null,tt,Me.headers.get("Cache-Control"),Me.headers.get("Expires")))}).catch(tt=>{O||p(new Error(tt.message))})})(Ee,null,he):Ee.blob().then(Me=>p(new Mr(Ee.status,Ee.statusText,y.url,Me)))).catch(Ee=>{Ee.code!==20&&p(new Error(Ee.message))})})(),{cancel:()=>{O=!0,z||_.abort()}}}const ct=function(y,p){if(/:\/\//.test(y.url)&&!/^https?:|^file:/.test(y.url)){if(pe()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",y,p);if(!pe()){const S=y.url.substring(0,y.url.indexOf("://"));return(ut.REGISTERED_PROTOCOLS[S]||St)(y,p)}}if(!(/^file:/.test(_=y.url)||/^file:/.test(Kr())&&!/^\w+:/.test(_))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return St(y,p);if(pe()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",y,p,void 0,!0)}var _;return function(S,z){const O=new XMLHttpRequest;O.open(S.method||"GET",S.url,!0),S.type==="arrayBuffer"&&(O.responseType="arraybuffer");for(const V in S.headers)O.setRequestHeader(V,S.headers[V]);return S.type==="json"&&(O.responseType="text",O.setRequestHeader("Accept","application/json")),O.withCredentials=S.credentials==="include",O.onerror=()=>{z(new Error(O.statusText))},O.onload=()=>{if((O.status>=200&&O.status<300||O.status===0)&&O.response!==null){let V=O.response;if(S.type==="json")try{V=JSON.parse(O.response)}catch(Q){return z(Q)}z(null,V,O.getResponseHeader("Cache-Control"),O.getResponseHeader("Expires"))}else{const V=new Blob([O.response],{type:O.getResponseHeader("Content-Type")});z(new Mr(O.status,O.statusText,S.url,V))}},O.send(S.body),{cancel:()=>O.abort()}}(y,p)},Or=function(y,p){return ct(F(y,{type:"arrayBuffer"}),p)};function ln(y){const p=window.document.createElement("a");return p.href=y,p.protocol===window.document.location.protocol&&p.host===window.document.location.host}const Wt="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";let Ur,mn;Ur=[],mn=0;const en=function(y,p){if(At.supported&&(y.headers||(y.headers={}),y.headers.accept="image/webp,*/*"),mn>=ut.MAX_PARALLEL_IMAGE_REQUESTS){const O={requestParameters:y,callback:p,cancelled:!1,cancel(){this.cancelled=!0}};return Ur.push(O),O}mn++;let _=!1;const S=()=>{if(!_)for(_=!0,mn--;Ur.length&&mn<ut.MAX_PARALLEL_IMAGE_REQUESTS;){const O=Ur.shift(),{requestParameters:V,callback:Q,cancelled:ie}=O;ie||(O.cancel=en(V,Q).cancel)}},z=Or(y,(O,V,Q,ie)=>{S(),O?p(O):V&&function(he,Ee){typeof createImageBitmap=="function"?function(Me,Ve){const Qe=new Blob([new Uint8Array(Me)],{type:"image/png"});createImageBitmap(Qe).then(tt=>{Ve(null,tt)}).catch(tt=>{Ve(new Error(`Could not load image because of ${tt.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`))})}(he,Ee):function(Me,Ve){const Qe=new Image;Qe.onload=()=>{Ve(null,Qe),URL.revokeObjectURL(Qe.src),Qe.onload=null,window.requestAnimationFrame(()=>{Qe.src=Wt})},Qe.onerror=()=>Ve(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const tt=new Blob([new Uint8Array(Me)],{type:"image/png"});Qe.src=Me.byteLength?URL.createObjectURL(tt):Wt}(he,Ee)}(V,(he,Ee)=>{he!=null?p(he):Ee!=null&&p(null,Ee,{cacheControl:Q,expires:ie})})});return{cancel:()=>{z.cancel(),S()}}};function On(y,p,_){_[y]&&_[y].indexOf(p)!==-1||(_[y]=_[y]||[],_[y].push(p))}function Zn(y,p,_){if(_&&_[y]){const S=_[y].indexOf(p);S!==-1&&_[y].splice(S,1)}}class ai{constructor(p,_={}){F(this,_),this.type=p}}class _i extends ai{constructor(p,_={}){super("error",F({error:p},_))}}class hi{on(p,_){return this._listeners=this._listeners||{},On(p,_,this._listeners),this}off(p,_){return Zn(p,_,this._listeners),Zn(p,_,this._oneTimeListeners),this}once(p,_){return this._oneTimeListeners=this._oneTimeListeners||{},On(p,_,this._oneTimeListeners),this}fire(p,_){typeof p=="string"&&(p=new ai(p,_||{}));const S=p.type;if(this.listens(S)){p.target=this;const z=this._listeners&&this._listeners[S]?this._listeners[S].slice():[];for(const Q of z)Q.call(this,p);const O=this._oneTimeListeners&&this._oneTimeListeners[S]?this._oneTimeListeners[S].slice():[];for(const Q of O)Zn(S,Q,this._oneTimeListeners),Q.call(this,p);const V=this._eventedParent;V&&(F(p,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),V.fire(p))}else p instanceof _i&&console.error(p.error);return this}listens(p){return this._listeners&&this._listeners[p]&&this._listeners[p].length>0||this._oneTimeListeners&&this._oneTimeListeners[p]&&this._oneTimeListeners[p].length>0||this._eventedParent&&this._eventedParent.listens(p)}setEventedParent(p,_){return this._eventedParent=p,this._eventedParentData=_,this}}var yr={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1},elevationOffset:{type:"number",default:450}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};class Vr{constructor(p,_,S,z){this.message=(p?`${p}: `:"")+S,z&&(this.identifier=z),_!=null&&_.__line__&&(this.line=_.__line__)}}function wi(y){const p=y.value;return p?[new Vr(y.key,p,"constants have been deprecated as of v8")]:[]}function xn(y,...p){for(const _ of p)for(const S in _)y[S]=_[S];return y}function si(y){return y instanceof Number||y instanceof String||y instanceof Boolean?y.valueOf():y}function fr(y){if(Array.isArray(y))return y.map(fr);if(y instanceof Object&&!(y instanceof Number||y instanceof String||y instanceof Boolean)){const p={};for(const _ in y)p[_]=fr(y[_]);return p}return si(y)}class or extends Error{constructor(p,_){super(_),this.message=_,this.key=p}}class Yr{constructor(p,_=[]){this.parent=p,this.bindings={};for(const[S,z]of _)this.bindings[S]=z}concat(p){return new Yr(this,p)}get(p){if(this.bindings[p])return this.bindings[p];if(this.parent)return this.parent.get(p);throw new Error(`${p} not found in scope.`)}has(p){return!!this.bindings[p]||!!this.parent&&this.parent.has(p)}}const un={kind:"null"},Nr={kind:"number"},pn={kind:"string"},Yn={kind:"boolean"},ci={kind:"color"},No={kind:"object"},gi={kind:"value"},co={kind:"collator"},li={kind:"formatted"},to={kind:"padding"},yo={kind:"resolvedImage"};function pi(y,p){return{kind:"array",itemType:y,N:p}}function Ti(y){if(y.kind==="array"){const p=Ti(y.itemType);return typeof y.N=="number"?`array<${p}, ${y.N}>`:y.itemType.kind==="value"?"array":`array<${p}>`}return y.kind}const Xo=[un,Nr,pn,Yn,ci,li,No,pi(gi),to,yo];function vn(y,p){if(p.kind==="error")return null;if(y.kind==="array"){if(p.kind==="array"&&(p.N===0&&p.itemType.kind==="value"||!vn(y.itemType,p.itemType))&&(typeof y.N!="number"||y.N===p.N))return null}else{if(y.kind===p.kind)return null;if(y.kind==="value"){for(const _ of Xo)if(!vn(_,p))return null}}return`Expected ${Ti(y)} but found ${Ti(p)} instead.`}function ze(y,p){return p.some(_=>_.kind===y.kind)}function Ea(y,p){return p.some(_=>_==="null"?y===null:_==="array"?Array.isArray(y):_==="object"?y&&!Array.isArray(y)&&typeof y=="object":_===typeof y)}var ha,ra={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function be(y){return(y=Math.round(y))<0?0:y>255?255:y}function ye(y){return be(y[y.length-1]==="%"?parseFloat(y)/100*255:parseInt(y))}function De(y){return(p=y[y.length-1]==="%"?parseFloat(y)/100:parseFloat(y))<0?0:p>1?1:p;var p}function nt(y,p,_){return _<0?_+=1:_>1&&(_-=1),6*_<1?y+(p-y)*_*6:2*_<1?p:3*_<2?y+(p-y)*(2/3-_)*6:y}try{ha={}.parseCSSColor=function(y){var p,_=y.replace(/ /g,"").toLowerCase();if(_ in ra)return ra[_].slice();if(_[0]==="#")return _.length===4?(p=parseInt(_.substr(1),16))>=0&&p<=4095?[(3840&p)>>4|(3840&p)>>8,240&p|(240&p)>>4,15&p|(15&p)<<4,1]:null:_.length===7&&(p=parseInt(_.substr(1),16))>=0&&p<=16777215?[(16711680&p)>>16,(65280&p)>>8,255&p,1]:null;var S=_.indexOf("("),z=_.indexOf(")");if(S!==-1&&z+1===_.length){var O=_.substr(0,S),V=_.substr(S+1,z-(S+1)).split(","),Q=1;switch(O){case"rgba":if(V.length!==4)return null;Q=De(V.pop());case"rgb":return V.length!==3?null:[ye(V[0]),ye(V[1]),ye(V[2]),Q];case"hsla":if(V.length!==4)return null;Q=De(V.pop());case"hsl":if(V.length!==3)return null;var ie=(parseFloat(V[0])%360+360)%360/360,he=De(V[1]),Ee=De(V[2]),Me=Ee<=.5?Ee*(he+1):Ee+he-Ee*he,Ve=2*Ee-Me;return[be(255*nt(Ve,Me,ie+1/3)),be(255*nt(Ve,Me,ie)),be(255*nt(Ve,Me,ie-1/3)),Q];default:return null}}return null}}catch{}class st{constructor(p,_,S,z=1){this.r=p,this.g=_,this.b=S,this.a=z}static parse(p){if(!p)return;if(p instanceof st)return p;if(typeof p!="string")return;const _=ha(p);return _?new st(_[0]/255*_[3],_[1]/255*_[3],_[2]/255*_[3],_[3]):void 0}toString(){const[p,_,S,z]=this.toArray();return`rgba(${Math.round(p)},${Math.round(_)},${Math.round(S)},${z})`}toArray(){const{r:p,g:_,b:S,a:z}=this;return z===0?[0,0,0,0]:[255*p/z,255*_/z,255*S/z,z]}}st.black=new st(0,0,0,1),st.white=new st(1,1,1,1),st.transparent=new st(0,0,0,0),st.red=new st(1,0,0,1);class Rt{constructor(p,_,S){this.sensitivity=p?_?"variant":"case":_?"accent":"base",this.locale=S,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(p,_){return this.collator.compare(p,_)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class Re{constructor(p,_,S,z,O){this.text=p,this.image=_,this.scale=S,this.fontStack=z,this.textColor=O}}class Ht{constructor(p){this.sections=p}static fromString(p){return new Ht([new Re(p,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some(p=>p.text.length!==0||p.image&&p.image.name.length!==0)}static factory(p){return p instanceof Ht?p:Ht.fromString(p)}toString(){return this.sections.length===0?"":this.sections.map(p=>p.text).join("")}}class Nt{constructor(p){this.values=p.slice()}static parse(p){if(p instanceof Nt)return p;if(typeof p=="number")return new Nt([p,p,p,p]);if(Array.isArray(p)&&!(p.length<1||p.length>4)){for(const _ of p)if(typeof _!="number")return;switch(p.length){case 1:p=[p[0],p[0],p[0],p[0]];break;case 2:p=[p[0],p[1],p[0],p[1]];break;case 3:p=[p[0],p[1],p[2],p[1]]}return new Nt(p)}}toString(){return JSON.stringify(this.values)}}class ir{constructor(p){this.name=p.name,this.available=p.available}toString(){return this.name}static fromString(p){return p?new ir({name:p,available:!1}):null}}function Br(y,p,_,S){return typeof y=="number"&&y>=0&&y<=255&&typeof p=="number"&&p>=0&&p<=255&&typeof _=="number"&&_>=0&&_<=255?S===void 0||typeof S=="number"&&S>=0&&S<=1?null:`Invalid rgba value [${[y,p,_,S].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof S=="number"?[y,p,_,S]:[y,p,_]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function nn(y){if(y===null||typeof y=="string"||typeof y=="boolean"||typeof y=="number"||y instanceof st||y instanceof Rt||y instanceof Ht||y instanceof Nt||y instanceof ir)return!0;if(Array.isArray(y)){for(const p of y)if(!nn(p))return!1;return!0}if(typeof y=="object"){for(const p in y)if(!nn(y[p]))return!1;return!0}return!1}function Fr(y){if(y===null)return un;if(typeof y=="string")return pn;if(typeof y=="boolean")return Yn;if(typeof y=="number")return Nr;if(y instanceof st)return ci;if(y instanceof Rt)return co;if(y instanceof Ht)return li;if(y instanceof Nt)return to;if(y instanceof ir)return yo;if(Array.isArray(y)){const p=y.length;let _;for(const S of y){const z=Fr(S);if(_){if(_===z)continue;_=gi;break}_=z}return pi(_||gi,p)}return No}function $n(y){const p=typeof y;return y===null?"":p==="string"||p==="number"||p==="boolean"?String(y):y instanceof st||y instanceof Ht||y instanceof Nt||y instanceof ir?y.toString():JSON.stringify(y)}class Wn{constructor(p,_){this.type=p,this.value=_}static parse(p,_){if(p.length!==2)return _.error(`'literal' expression requires exactly one argument, but found ${p.length-1} instead.`);if(!nn(p[1]))return _.error("invalid value");const S=p[1];let z=Fr(S);const O=_.expectedType;return z.kind!=="array"||z.N!==0||!O||O.kind!=="array"||typeof O.N=="number"&&O.N!==0||(z=O),new Wn(z,S)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}class sn{constructor(p){this.name="ExpressionEvaluationError",this.message=p}toJSON(){return this.message}}const yi={string:pn,number:Nr,boolean:Yn,object:No};class Ai{constructor(p,_){this.type=p,this.args=_}static parse(p,_){if(p.length<2)return _.error("Expected at least one argument.");let S,z=1;const O=p[0];if(O==="array"){let Q,ie;if(p.length>2){const he=p[1];if(typeof he!="string"||!(he in yi)||he==="object")return _.error('The item type argument of "array" must be one of string, number, boolean',1);Q=yi[he],z++}else Q=gi;if(p.length>3){if(p[2]!==null&&(typeof p[2]!="number"||p[2]<0||p[2]!==Math.floor(p[2])))return _.error('The length argument to "array" must be a positive integer literal',2);ie=p[2],z++}S=pi(Q,ie)}else{if(!yi[O])throw new Error(`Types doesn't contain name = ${O}`);S=yi[O]}const V=[];for(;z<p.length;z++){const Q=_.parse(p[z],z,gi);if(!Q)return null;V.push(Q)}return new Ai(S,V)}evaluate(p){for(let _=0;_<this.args.length;_++){const S=this.args[_].evaluate(p);if(!vn(this.type,Fr(S)))return S;if(_===this.args.length-1)throw new sn(`Expected value to be of type ${Ti(this.type)}, but found ${Ti(Fr(S))} instead.`)}throw new Error}eachChild(p){this.args.forEach(p)}outputDefined(){return this.args.every(p=>p.outputDefined())}}const Xi={"to-boolean":Yn,"to-color":ci,"to-number":Nr,"to-string":pn};class Ii{constructor(p,_){this.type=p,this.args=_}static parse(p,_){if(p.length<2)return _.error("Expected at least one argument.");const S=p[0];if(!Xi[S])throw new Error(`Can't parse ${S} as it is not part of the known types`);if((S==="to-boolean"||S==="to-string")&&p.length!==2)return _.error("Expected one argument.");const z=Xi[S],O=[];for(let V=1;V<p.length;V++){const Q=_.parse(p[V],V,gi);if(!Q)return null;O.push(Q)}return new Ii(z,O)}evaluate(p){if(this.type.kind==="boolean")return Boolean(this.args[0].evaluate(p));if(this.type.kind==="color"){let _,S;for(const z of this.args){if(_=z.evaluate(p),S=null,_ instanceof st)return _;if(typeof _=="string"){const O=p.parseColor(_);if(O)return O}else if(Array.isArray(_)&&(S=_.length<3||_.length>4?`Invalid rbga value ${JSON.stringify(_)}: expected an array containing either three or four numeric values.`:Br(_[0],_[1],_[2],_[3]),!S))return new st(_[0]/255,_[1]/255,_[2]/255,_[3])}throw new sn(S||`Could not parse color from value '${typeof _=="string"?_:JSON.stringify(_)}'`)}if(this.type.kind==="padding"){let _;for(const S of this.args){_=S.evaluate(p);const z=Nt.parse(_);if(z)return z}throw new sn(`Could not parse padding from value '${typeof _=="string"?_:JSON.stringify(_)}'`)}if(this.type.kind==="number"){let _=null;for(const S of this.args){if(_=S.evaluate(p),_===null)return 0;const z=Number(_);if(!isNaN(z))return z}throw new sn(`Could not convert ${JSON.stringify(_)} to number.`)}return this.type.kind==="formatted"?Ht.fromString($n(this.args[0].evaluate(p))):this.type.kind==="resolvedImage"?ir.fromString($n(this.args[0].evaluate(p))):$n(this.args[0].evaluate(p))}eachChild(p){this.args.forEach(p)}outputDefined(){return this.args.every(p=>p.outputDefined())}}const qi=["Unknown","Point","LineString","Polygon"];class ro{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?qi[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(p){let _=this._parseColorCache[p];return _||(_=this._parseColorCache[p]=st.parse(p)),_}}class ko{constructor(p,_,S,z){this.name=p,this.type=_,this._evaluate=S,this.args=z}evaluate(p){return this._evaluate(p,this.args)}eachChild(p){this.args.forEach(p)}outputDefined(){return!1}static parse(p,_){const S=p[0],z=ko.definitions[S];if(!z)return _.error(`Unknown expression "${S}". If you wanted a literal array, use ["literal", [...]].`,0);const O=Array.isArray(z)?z[0]:z.type,V=Array.isArray(z)?[[z[1],z[2]]]:z.overloads,Q=V.filter(([he])=>!Array.isArray(he)||he.length===p.length-1);let ie=null;for(const[he,Ee]of Q){ie=new _l(_.registry,_.path,null,_.scope);const Me=[];let Ve=!1;for(let Qe=1;Qe<p.length;Qe++){const tt=p[Qe],jt=Array.isArray(he)?he[Qe-1]:he.type,Ot=ie.parse(tt,1+Me.length,jt);if(!Ot){Ve=!0;break}Me.push(Ot)}if(!Ve)if(Array.isArray(he)&&he.length!==Me.length)ie.error(`Expected ${he.length} arguments, but found ${Me.length} instead.`);else{for(let Qe=0;Qe<Me.length;Qe++){const tt=Array.isArray(he)?he[Qe]:he.type,jt=Me[Qe];ie.concat(Qe+1).checkSubtype(tt,jt.type)}if(ie.errors.length===0)return new ko(S,O,Ee,Me)}}if(Q.length===1)_.errors.push(...ie.errors);else{const he=(Q.length?Q:V).map(([Me])=>{return Ve=Me,Array.isArray(Ve)?`(${Ve.map(Ti).join(", ")})`:`(${Ti(Ve.type)}...)`;var Ve}).join(" | "),Ee=[];for(let Me=1;Me<p.length;Me++){const Ve=_.parse(p[Me],1+Ee.length);if(!Ve)return null;Ee.push(Ti(Ve.type))}_.error(`Expected arguments of type ${he}, but found (${Ee.join(", ")}) instead.`)}return null}static register(p,_){ko.definitions=_;for(const S in _)p[S]=ko}}class Yo{constructor(p,_,S){this.type=co,this.locale=S,this.caseSensitive=p,this.diacriticSensitive=_}static parse(p,_){if(p.length!==2)return _.error("Expected one argument.");const S=p[1];if(typeof S!="object"||Array.isArray(S))return _.error("Collator options argument must be an object.");const z=_.parse(S["case-sensitive"]!==void 0&&S["case-sensitive"],1,Yn);if(!z)return null;const O=_.parse(S["diacritic-sensitive"]!==void 0&&S["diacritic-sensitive"],1,Yn);if(!O)return null;let V=null;return S.locale&&(V=_.parse(S.locale,1,pn),!V)?null:new Yo(z,O,V)}evaluate(p){return new Rt(this.caseSensitive.evaluate(p),this.diacriticSensitive.evaluate(p),this.locale?this.locale.evaluate(p):null)}eachChild(p){p(this.caseSensitive),p(this.diacriticSensitive),this.locale&&p(this.locale)}outputDefined(){return!1}}const So=8192;function Jo(y,p){y[0]=Math.min(y[0],p[0]),y[1]=Math.min(y[1],p[1]),y[2]=Math.max(y[2],p[0]),y[3]=Math.max(y[3],p[1])}function Vl(y,p){return!(y[0]<=p[0]||y[2]>=p[2]||y[1]<=p[1]||y[3]>=p[3])}function na(y,p){const _=(180+y[0])/360,S=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+y[1]*Math.PI/360)))/360,z=Math.pow(2,p.z);return[Math.round(_*z*So),Math.round(S*z*So)]}function Ao(y,p,_){const S=y[0]-p[0],z=y[1]-p[1],O=y[0]-_[0],V=y[1]-_[1];return S*V-O*z==0&&S*O<=0&&z*V<=0}function ml(y,p){let _=!1;for(let V=0,Q=p.length;V<Q;V++){const ie=p[V];for(let he=0,Ee=ie.length;he<Ee-1;he++){if(Ao(y,ie[he],ie[he+1]))return!1;(z=ie[he])[1]>(S=y)[1]!=(O=ie[he+1])[1]>S[1]&&S[0]<(O[0]-z[0])*(S[1]-z[1])/(O[1]-z[1])+z[0]&&(_=!_)}}var S,z,O;return _}function gl(y,p){for(let _=0;_<p.length;_++)if(ml(y,p[_]))return!0;return!1}function gs(y,p,_,S){const z=S[0]-_[0],O=S[1]-_[1],V=(y[0]-_[0])*O-z*(y[1]-_[1]),Q=(p[0]-_[0])*O-z*(p[1]-_[1]);return V>0&&Q<0||V<0&&Q>0}function $l(y,p,_){for(const he of _)for(let Ee=0;Ee<he.length-1;++Ee)if((Q=[(V=he[Ee+1])[0]-(O=he[Ee])[0],V[1]-O[1]])[0]*(ie=[(z=p)[0]-(S=y)[0],z[1]-S[1]])[1]-Q[1]*ie[0]!=0&&gs(S,z,O,V)&&gs(O,V,S,z))return!0;var S,z,O,V,Q,ie;return!1}function ys(y,p){for(let _=0;_<y.length;++_)if(!ml(y[_],p))return!1;for(let _=0;_<y.length-1;++_)if($l(y[_],y[_+1],p))return!1;return!0}function Uu(y,p){for(let _=0;_<p.length;_++)if(ys(y,p[_]))return!0;return!1}function $a(y,p,_){const S=[];for(let z=0;z<y.length;z++){const O=[];for(let V=0;V<y[z].length;V++){const Q=na(y[z][V],_);Jo(p,Q),O.push(Q)}S.push(O)}return S}function yl(y,p,_){const S=[];for(let z=0;z<y.length;z++){const O=$a(y[z],p,_);S.push(O)}return S}function Gl(y,p,_,S){if(y[0]<_[0]||y[0]>_[2]){const z=.5*S;let O=y[0]-_[0]>z?-S:_[0]-y[0]>z?S:0;O===0&&(O=y[0]-_[2]>z?-S:_[2]-y[0]>z?S:0),y[0]+=O}Jo(p,y)}function qu(y,p,_,S){const z=Math.pow(2,S.z)*So,O=[S.x*So,S.y*So],V=[];for(const Q of y)for(const ie of Q){const he=[ie.x+O[0],ie.y+O[1]];Gl(he,p,_,z),V.push(he)}return V}function Vu(y,p,_,S){const z=Math.pow(2,S.z)*So,O=[S.x*So,S.y*So],V=[];for(const ie of y){const he=[];for(const Ee of ie){const Me=[Ee.x+O[0],Ee.y+O[1]];Jo(p,Me),he.push(Me)}V.push(he)}if(p[2]-p[0]<=z/2){(Q=p)[0]=Q[1]=1/0,Q[2]=Q[3]=-1/0;for(const ie of V)for(const he of ie)Gl(he,p,_,z)}var Q;return V}class tl{constructor(p,_){this.type=Yn,this.geojson=p,this.geometries=_}static parse(p,_){if(p.length!==2)return _.error(`'within' expression requires exactly one argument, but found ${p.length-1} instead.`);if(nn(p[1])){const S=p[1];if(S.type==="FeatureCollection")for(let z=0;z<S.features.length;++z){const O=S.features[z].geometry.type;if(O==="Polygon"||O==="MultiPolygon")return new tl(S,S.features[z].geometry)}else if(S.type==="Feature"){const z=S.geometry.type;if(z==="Polygon"||z==="MultiPolygon")return new tl(S,S.geometry)}else if(S.type==="Polygon"||S.type==="MultiPolygon")return new tl(S,S)}return _.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(p){if(p.geometry()!=null&&p.canonicalID()!=null){if(p.geometryType()==="Point")return function(_,S){const z=[1/0,1/0,-1/0,-1/0],O=[1/0,1/0,-1/0,-1/0],V=_.canonicalID();if(S.type==="Polygon"){const Q=$a(S.coordinates,O,V),ie=qu(_.geometry(),z,O,V);if(!Vl(z,O))return!1;for(const he of ie)if(!ml(he,Q))return!1}if(S.type==="MultiPolygon"){const Q=yl(S.coordinates,O,V),ie=qu(_.geometry(),z,O,V);if(!Vl(z,O))return!1;for(const he of ie)if(!gl(he,Q))return!1}return!0}(p,this.geometries);if(p.geometryType()==="LineString")return function(_,S){const z=[1/0,1/0,-1/0,-1/0],O=[1/0,1/0,-1/0,-1/0],V=_.canonicalID();if(S.type==="Polygon"){const Q=$a(S.coordinates,O,V),ie=Vu(_.geometry(),z,O,V);if(!Vl(z,O))return!1;for(const he of ie)if(!ys(he,Q))return!1}if(S.type==="MultiPolygon"){const Q=yl(S.coordinates,O,V),ie=Vu(_.geometry(),z,O,V);if(!Vl(z,O))return!1;for(const he of ie)if(!Uu(he,Q))return!1}return!0}(p,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}function us(y){if(y instanceof ko&&(y.name==="get"&&y.args.length===1||y.name==="feature-state"||y.name==="has"&&y.args.length===1||y.name==="properties"||y.name==="geometry-type"||y.name==="id"||/^filter-/.test(y.name))||y instanceof tl)return!1;let p=!0;return y.eachChild(_=>{p&&!us(_)&&(p=!1)}),p}function Ps(y){if(y instanceof ko&&y.name==="feature-state")return!1;let p=!0;return y.eachChild(_=>{p&&!Ps(_)&&(p=!1)}),p}function vl(y,p){if(y instanceof ko&&p.indexOf(y.name)>=0)return!1;let _=!0;return y.eachChild(S=>{_&&!vl(S,p)&&(_=!1)}),_}class du{constructor(p,_){this.type=_.type,this.name=p,this.boundExpression=_}static parse(p,_){if(p.length!==2||typeof p[1]!="string")return _.error("'var' expression requires exactly one string literal argument.");const S=p[1];return _.scope.has(S)?new du(S,_.scope.get(S)):_.error(`Unknown variable "${S}". Make sure "${S}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(p){return this.boundExpression.evaluate(p)}eachChild(){}outputDefined(){return!1}}class _l{constructor(p,_=[],S,z=new Yr,O=[]){this.registry=p,this.path=_,this.key=_.map(V=>`[${V}]`).join(""),this.scope=z,this.errors=O,this.expectedType=S}parse(p,_,S,z,O={}){return _?this.concat(_,S,z)._parse(p,O):this._parse(p,O)}_parse(p,_){function S(z,O,V){return V==="assert"?new Ai(O,[z]):V==="coerce"?new Ii(O,[z]):z}if(p!==null&&typeof p!="string"&&typeof p!="boolean"&&typeof p!="number"||(p=["literal",p]),Array.isArray(p)){if(p.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const z=p[0];if(typeof z!="string")return this.error(`Expression name must be a string, but found ${typeof z} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const O=this.registry[z];if(O){let V=O.parse(p,this);if(!V)return null;if(this.expectedType){const Q=this.expectedType,ie=V.type;if(Q.kind!=="string"&&Q.kind!=="number"&&Q.kind!=="boolean"&&Q.kind!=="object"&&Q.kind!=="array"||ie.kind!=="value")if(Q.kind!=="color"&&Q.kind!=="formatted"&&Q.kind!=="resolvedImage"||ie.kind!=="value"&&ie.kind!=="string")if(Q.kind!=="padding"||ie.kind!=="value"&&ie.kind!=="number"&&ie.kind!=="array"){if(this.checkSubtype(Q,ie))return null}else V=S(V,Q,_.typeAnnotation||"coerce");else V=S(V,Q,_.typeAnnotation||"coerce");else V=S(V,Q,_.typeAnnotation||"assert")}if(!(V instanceof Wn)&&V.type.kind!=="resolvedImage"&&mu(V)){const Q=new ro;try{V=new Wn(V.type,V.evaluate(Q))}catch(ie){return this.error(ie.message),null}}return V}return this.error(`Unknown expression "${z}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(p===void 0?"'undefined' value invalid. Use null instead.":typeof p=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof p} instead.`)}concat(p,_,S){const z=typeof p=="number"?this.path.concat(p):this.path,O=S?this.scope.concat(S):this.scope;return new _l(this.registry,z,_||null,O,this.errors)}error(p,..._){const S=`${this.key}${_.map(z=>`[${z}]`).join("")}`;this.errors.push(new or(S,p))}checkSubtype(p,_){const S=vn(p,_);return S&&this.error(S),S}}function mu(y){if(y instanceof du)return mu(y.boundExpression);if(y instanceof ko&&y.name==="error"||y instanceof Yo||y instanceof tl)return!1;const p=y instanceof Ii||y instanceof Ai;let _=!0;return y.eachChild(S=>{_=p?_&&mu(S):_&&S instanceof Wn}),!!_&&us(y)&&vl(y,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}function vs(y,p){const _=y.length-1;let S,z,O=0,V=_,Q=0;for(;O<=V;)if(Q=Math.floor((O+V)/2),S=y[Q],z=y[Q+1],S<=p){if(Q===_||p<z)return Q;O=Q+1}else{if(!(S>p))throw new sn("Input is not a number.");V=Q-1}return 0}class _s{constructor(p,_,S){this.type=p,this.input=_,this.labels=[],this.outputs=[];for(const[z,O]of S)this.labels.push(z),this.outputs.push(O)}static parse(p,_){if(p.length-1<4)return _.error(`Expected at least 4 arguments, but found only ${p.length-1}.`);if((p.length-1)%2!=0)return _.error("Expected an even number of arguments.");const S=_.parse(p[1],1,Nr);if(!S)return null;const z=[];let O=null;_.expectedType&&_.expectedType.kind!=="value"&&(O=_.expectedType);for(let V=1;V<p.length;V+=2){const Q=V===1?-1/0:p[V],ie=p[V+1],he=V,Ee=V+1;if(typeof Q!="number")return _.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',he);if(z.length&&z[z.length-1][0]>=Q)return _.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',he);const Me=_.parse(ie,Ee,O);if(!Me)return null;O=O||Me.type,z.push([Q,Me])}return new _s(O,S,z)}evaluate(p){const _=this.labels,S=this.outputs;if(_.length===1)return S[0].evaluate(p);const z=this.input.evaluate(p);if(z<=_[0])return S[0].evaluate(p);const O=_.length;return z>=_[O-1]?S[O-1].evaluate(p):S[vs(_,z)].evaluate(p)}eachChild(p){p(this.input);for(const _ of this.outputs)p(_)}outputDefined(){return this.outputs.every(p=>p.outputDefined())}}function Ro(y,p,_){return y*(1-_)+p*_}var rl=Object.freeze({__proto__:null,number:Ro,color:function(y,p,_){return new st(Ro(y.r,p.r,_),Ro(y.g,p.g,_),Ro(y.b,p.b,_),Ro(y.a,p.a,_))},array:function(y,p,_){return y.map((S,z)=>Ro(S,p[z],_))},padding:function(y,p,_){const S=y.values,z=p.values;return new Nt([Ro(S[0],z[0],_),Ro(S[1],z[1],_),Ro(S[2],z[2],_),Ro(S[3],z[3],_)])}});const R=.95047,W=1.08883,ae=4/29,ke=6/29,Ye=3*ke*ke,dt=Math.PI/180,Mt=180/Math.PI;function Tt(y){return y>.008856451679035631?Math.pow(y,1/3):y/Ye+ae}function wr(y){return y>ke?y*y*y:Ye*(y-ae)}function pr(y){return 255*(y<=.0031308?12.92*y:1.055*Math.pow(y,1/2.4)-.055)}function vr(y){return(y/=255)<=.04045?y/12.92:Math.pow((y+.055)/1.055,2.4)}function ar(y){const p=vr(y.r),_=vr(y.g),S=vr(y.b),z=Tt((.4124564*p+.3575761*_+.1804375*S)/R),O=Tt((.2126729*p+.7151522*_+.072175*S)/1);return{l:116*O-16,a:500*(z-O),b:200*(O-Tt((.0193339*p+.119192*_+.9503041*S)/W)),alpha:y.a}}function $r(y){let p=(y.l+16)/116,_=isNaN(y.a)?p:p+y.a/500,S=isNaN(y.b)?p:p-y.b/200;return p=1*wr(p),_=R*wr(_),S=W*wr(S),new st(pr(3.2404542*_-1.5371385*p-.4985314*S),pr(-.969266*_+1.8760108*p+.041556*S),pr(.0556434*_-.2040259*p+1.0572252*S),y.alpha)}function cn(y,p,_){const S=p-y;return y+_*(S>180||S<-180?S-360*Math.round(S/360):S)}const In={forward:ar,reverse:$r,interpolate:function(y,p,_){return{l:Ro(y.l,p.l,_),a:Ro(y.a,p.a,_),b:Ro(y.b,p.b,_),alpha:Ro(y.alpha,p.alpha,_)}}},et={forward:function(y){const{l:p,a:_,b:S}=ar(y),z=Math.atan2(S,_)*Mt;return{h:z<0?z+360:z,c:Math.sqrt(_*_+S*S),l:p,alpha:y.a}},reverse:function(y){const p=y.h*dt,_=y.c;return $r({l:y.l,a:Math.cos(p)*_,b:Math.sin(p)*_,alpha:y.alpha})},interpolate:function(y,p,_){return{h:cn(y.h,p.h,_),c:Ro(y.c,p.c,_),l:Ro(y.l,p.l,_),alpha:Ro(y.alpha,p.alpha,_)}}};var m=Object.freeze({__proto__:null,lab:In,hcl:et});class Pr{constructor(p,_,S,z,O){this.type=p,this.operator=_,this.interpolation=S,this.input=z,this.labels=[],this.outputs=[];for(const[V,Q]of O)this.labels.push(V),this.outputs.push(Q)}static interpolationFactor(p,_,S,z){let O=0;if(p.name==="exponential")O=f(_,p.base,S,z);else if(p.name==="linear")O=f(_,1,S,z);else if(p.name==="cubic-bezier"){const V=p.controlPoints;O=new h(V[0],V[1],V[2],V[3]).solve(f(_,1,S,z))}return O}static parse(p,_){let[S,z,O,...V]=p;if(!Array.isArray(z)||z.length===0)return _.error("Expected an interpolation type expression.",1);if(z[0]==="linear")z={name:"linear"};else if(z[0]==="exponential"){const he=z[1];if(typeof he!="number")return _.error("Exponential interpolation requires a numeric base.",1,1);z={name:"exponential",base:he}}else{if(z[0]!=="cubic-bezier")return _.error(`Unknown interpolation type ${String(z[0])}`,1,0);{const he=z.slice(1);if(he.length!==4||he.some(Ee=>typeof Ee!="number"||Ee<0||Ee>1))return _.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);z={name:"cubic-bezier",controlPoints:he}}}if(p.length-1<4)return _.error(`Expected at least 4 arguments, but found only ${p.length-1}.`);if((p.length-1)%2!=0)return _.error("Expected an even number of arguments.");if(O=_.parse(O,2,Nr),!O)return null;const Q=[];let ie=null;S==="interpolate-hcl"||S==="interpolate-lab"?ie=ci:_.expectedType&&_.expectedType.kind!=="value"&&(ie=_.expectedType);for(let he=0;he<V.length;he+=2){const Ee=V[he],Me=V[he+1],Ve=he+3,Qe=he+4;if(typeof Ee!="number")return _.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',Ve);if(Q.length&&Q[Q.length-1][0]>=Ee)return _.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',Ve);const tt=_.parse(Me,Qe,ie);if(!tt)return null;ie=ie||tt.type,Q.push([Ee,tt])}return ie.kind==="number"||ie.kind==="color"||ie.kind==="padding"||ie.kind==="array"&&ie.itemType.kind==="number"&&typeof ie.N=="number"?new Pr(ie,S,z,O,Q):_.error(`Type ${Ti(ie)} is not interpolatable.`)}evaluate(p){const _=this.labels,S=this.outputs;if(_.length===1)return S[0].evaluate(p);const z=this.input.evaluate(p);if(z<=_[0])return S[0].evaluate(p);const O=_.length;if(z>=_[O-1])return S[O-1].evaluate(p);const V=vs(_,z),Q=Pr.interpolationFactor(this.interpolation,z,_[V],_[V+1]),ie=S[V].evaluate(p),he=S[V+1].evaluate(p);return this.operator==="interpolate"?rl[this.type.kind.toLowerCase()](ie,he,Q):this.operator==="interpolate-hcl"?et.reverse(et.interpolate(et.forward(ie),et.forward(he),Q)):In.reverse(In.interpolate(In.forward(ie),In.forward(he),Q))}eachChild(p){p(this.input);for(const _ of this.outputs)p(_)}outputDefined(){return this.outputs.every(p=>p.outputDefined())}}function f(y,p,_,S){const z=S-_,O=y-_;return z===0?0:p===1?O/z:(Math.pow(p,O)-1)/(Math.pow(p,z)-1)}class L{constructor(p,_){this.type=p,this.args=_}static parse(p,_){if(p.length<2)return _.error("Expectected at least one argument.");let S=null;const z=_.expectedType;z&&z.kind!=="value"&&(S=z);const O=[];for(const Q of p.slice(1)){const ie=_.parse(Q,1+O.length,S,void 0,{typeAnnotation:"omit"});if(!ie)return null;S=S||ie.type,O.push(ie)}if(!S)throw new Error("No output type");const V=z&&O.some(Q=>vn(z,Q.type));return new L(V?gi:S,O)}evaluate(p){let _,S=null,z=0;for(const O of this.args)if(z++,S=O.evaluate(p),S&&S instanceof ir&&!S.available&&(_||(_=S.name),S=null,z===this.args.length&&(S=_)),S!==null)break;return S}eachChild(p){this.args.forEach(p)}outputDefined(){return this.args.every(p=>p.outputDefined())}}class kn{constructor(p,_){this.type=_.type,this.bindings=[].concat(p),this.result=_}evaluate(p){return this.result.evaluate(p)}eachChild(p){for(const _ of this.bindings)p(_[1]);p(this.result)}static parse(p,_){if(p.length<4)return _.error(`Expected at least 3 arguments, but found ${p.length-1} instead.`);const S=[];for(let O=1;O<p.length-1;O+=2){const V=p[O];if(typeof V!="string")return _.error(`Expected string, but found ${typeof V} instead.`,O);if(/[^a-zA-Z0-9_]/.test(V))return _.error("Variable names must contain only alphanumeric characters or '_'.",O);const Q=_.parse(p[O+1],O+1);if(!Q)return null;S.push([V,Q])}const z=_.parse(p[p.length-1],p.length-1,_.expectedType,S);return z?new kn(S,z):null}outputDefined(){return this.result.outputDefined()}}class ii{constructor(p,_,S){this.type=p,this.index=_,this.input=S}static parse(p,_){if(p.length!==3)return _.error(`Expected 2 arguments, but found ${p.length-1} instead.`);const S=_.parse(p[1],1,Nr),z=_.parse(p[2],2,pi(_.expectedType||gi));return S&&z?new ii(z.type.itemType,S,z):null}evaluate(p){const _=this.index.evaluate(p),S=this.input.evaluate(p);if(_<0)throw new sn(`Array index out of bounds: ${_} < 0.`);if(_>=S.length)throw new sn(`Array index out of bounds: ${_} > ${S.length-1}.`);if(_!==Math.floor(_))throw new sn(`Array index must be an integer, but found ${_} instead.`);return S[_]}eachChild(p){p(this.index),p(this.input)}outputDefined(){return!1}}class To{constructor(p,_){this.type=Yn,this.needle=p,this.haystack=_}static parse(p,_){if(p.length!==3)return _.error(`Expected 2 arguments, but found ${p.length-1} instead.`);const S=_.parse(p[1],1,gi),z=_.parse(p[2],2,gi);return S&&z?ze(S.type,[Yn,pn,Nr,un,gi])?new To(S,z):_.error(`Expected first argument to be of type boolean, string, number or null, but found ${Ti(S.type)} instead`):null}evaluate(p){const _=this.needle.evaluate(p),S=this.haystack.evaluate(p);if(!S)return!1;if(!Ea(_,["boolean","string","number","null"]))throw new sn(`Expected first argument to be of type boolean, string, number or null, but found ${Ti(Fr(_))} instead.`);if(!Ea(S,["string","array"]))throw new sn(`Expected second argument to be of type array or string, but found ${Ti(Fr(S))} instead.`);return S.indexOf(_)>=0}eachChild(p){p(this.needle),p(this.haystack)}outputDefined(){return!0}}class J{constructor(p,_,S){this.type=Nr,this.needle=p,this.haystack=_,this.fromIndex=S}static parse(p,_){if(p.length<=2||p.length>=5)return _.error(`Expected 3 or 4 arguments, but found ${p.length-1} instead.`);const S=_.parse(p[1],1,gi),z=_.parse(p[2],2,gi);if(!S||!z)return null;if(!ze(S.type,[Yn,pn,Nr,un,gi]))return _.error(`Expected first argument to be of type boolean, string, number or null, but found ${Ti(S.type)} instead`);if(p.length===4){const O=_.parse(p[3],3,Nr);return O?new J(S,z,O):null}return new J(S,z)}evaluate(p){const _=this.needle.evaluate(p),S=this.haystack.evaluate(p);if(!Ea(_,["boolean","string","number","null"]))throw new sn(`Expected first argument to be of type boolean, string, number or null, but found ${Ti(Fr(_))} instead.`);if(!Ea(S,["string","array"]))throw new sn(`Expected second argument to be of type array or string, but found ${Ti(Fr(S))} instead.`);if(this.fromIndex){const z=this.fromIndex.evaluate(p);return S.indexOf(_,z)}return S.indexOf(_)}eachChild(p){p(this.needle),p(this.haystack),this.fromIndex&&p(this.fromIndex)}outputDefined(){return!1}}class Ri{constructor(p,_,S,z,O,V){this.inputType=p,this.type=_,this.input=S,this.cases=z,this.outputs=O,this.otherwise=V}static parse(p,_){if(p.length<5)return _.error(`Expected at least 4 arguments, but found only ${p.length-1}.`);if(p.length%2!=1)return _.error("Expected an even number of arguments.");let S,z;_.expectedType&&_.expectedType.kind!=="value"&&(z=_.expectedType);const O={},V=[];for(let he=2;he<p.length-1;he+=2){let Ee=p[he];const Me=p[he+1];Array.isArray(Ee)||(Ee=[Ee]);const Ve=_.concat(he);if(Ee.length===0)return Ve.error("Expected at least one branch label.");for(const tt of Ee){if(typeof tt!="number"&&typeof tt!="string")return Ve.error("Branch labels must be numbers or strings.");if(typeof tt=="number"&&Math.abs(tt)>Number.MAX_SAFE_INTEGER)return Ve.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof tt=="number"&&Math.floor(tt)!==tt)return Ve.error("Numeric branch labels must be integer values.");if(S){if(Ve.checkSubtype(S,Fr(tt)))return null}else S=Fr(tt);if(O[String(tt)]!==void 0)return Ve.error("Branch labels must be unique.");O[String(tt)]=V.length}const Qe=_.parse(Me,he,z);if(!Qe)return null;z=z||Qe.type,V.push(Qe)}const Q=_.parse(p[1],1,gi);if(!Q)return null;const ie=_.parse(p[p.length-1],p.length-1,z);return ie?Q.type.kind!=="value"&&_.concat(1).checkSubtype(S,Q.type)?null:new Ri(S,z,Q,O,V,ie):null}evaluate(p){const _=this.input.evaluate(p);return(Fr(_)===this.inputType&&this.outputs[this.cases[_]]||this.otherwise).evaluate(p)}eachChild(p){p(this.input),this.outputs.forEach(p),p(this.otherwise)}outputDefined(){return this.outputs.every(p=>p.outputDefined())&&this.otherwise.outputDefined()}}class bs{constructor(p,_,S){this.type=p,this.branches=_,this.otherwise=S}static parse(p,_){if(p.length<4)return _.error(`Expected at least 3 arguments, but found only ${p.length-1}.`);if(p.length%2!=0)return _.error("Expected an odd number of arguments.");let S;_.expectedType&&_.expectedType.kind!=="value"&&(S=_.expectedType);const z=[];for(let V=1;V<p.length-1;V+=2){const Q=_.parse(p[V],V,Yn);if(!Q)return null;const ie=_.parse(p[V+1],V+1,S);if(!ie)return null;z.push([Q,ie]),S=S||ie.type}const O=_.parse(p[p.length-1],p.length-1,S);if(!O)return null;if(!S)throw new Error("Can't infer output type");return new bs(S,z,O)}evaluate(p){for(const[_,S]of this.branches)if(_.evaluate(p))return S.evaluate(p);return this.otherwise.evaluate(p)}eachChild(p){for(const[_,S]of this.branches)p(_),p(S);p(this.otherwise)}outputDefined(){return this.branches.every(([p,_])=>_.outputDefined())&&this.otherwise.outputDefined()}}class Gs{constructor(p,_,S,z){this.type=p,this.input=_,this.beginIndex=S,this.endIndex=z}static parse(p,_){if(p.length<=2||p.length>=5)return _.error(`Expected 3 or 4 arguments, but found ${p.length-1} instead.`);const S=_.parse(p[1],1,gi),z=_.parse(p[2],2,Nr);if(!S||!z)return null;if(!ze(S.type,[pi(gi),pn,gi]))return _.error(`Expected first argument to be of type array or string, but found ${Ti(S.type)} instead`);if(p.length===4){const O=_.parse(p[3],3,Nr);return O?new Gs(S.type,S,z,O):null}return new Gs(S.type,S,z)}evaluate(p){const _=this.input.evaluate(p),S=this.beginIndex.evaluate(p);if(!Ea(_,["string","array"]))throw new sn(`Expected first argument to be of type array or string, but found ${Ti(Fr(_))} instead.`);if(this.endIndex){const z=this.endIndex.evaluate(p);return _.slice(S,z)}return _.slice(S)}eachChild(p){p(this.input),p(this.beginIndex),this.endIndex&&p(this.endIndex)}outputDefined(){return!1}}function Pc(y,p){return y==="=="||y==="!="?p.kind==="boolean"||p.kind==="string"||p.kind==="number"||p.kind==="null"||p.kind==="value":p.kind==="string"||p.kind==="number"||p.kind==="value"}function bl(y,p,_,S){return S.compare(p,_)===0}function Xa(y,p,_){const S=y!=="=="&&y!=="!=";return class Dw{constructor(O,V,Q){this.type=Yn,this.lhs=O,this.rhs=V,this.collator=Q,this.hasUntypedArgument=O.type.kind==="value"||V.type.kind==="value"}static parse(O,V){if(O.length!==3&&O.length!==4)return V.error("Expected two or three arguments.");const Q=O[0];let ie=V.parse(O[1],1,gi);if(!ie)return null;if(!Pc(Q,ie.type))return V.concat(1).error(`"${Q}" comparisons are not supported for type '${Ti(ie.type)}'.`);let he=V.parse(O[2],2,gi);if(!he)return null;if(!Pc(Q,he.type))return V.concat(2).error(`"${Q}" comparisons are not supported for type '${Ti(he.type)}'.`);if(ie.type.kind!==he.type.kind&&ie.type.kind!=="value"&&he.type.kind!=="value")return V.error(`Cannot compare types '${Ti(ie.type)}' and '${Ti(he.type)}'.`);S&&(ie.type.kind==="value"&&he.type.kind!=="value"?ie=new Ai(he.type,[ie]):ie.type.kind!=="value"&&he.type.kind==="value"&&(he=new Ai(ie.type,[he])));let Ee=null;if(O.length===4){if(ie.type.kind!=="string"&&he.type.kind!=="string"&&ie.type.kind!=="value"&&he.type.kind!=="value")return V.error("Cannot use collator to compare non-string types.");if(Ee=V.parse(O[3],3,co),!Ee)return null}return new Dw(ie,he,Ee)}evaluate(O){const V=this.lhs.evaluate(O),Q=this.rhs.evaluate(O);if(S&&this.hasUntypedArgument){const ie=Fr(V),he=Fr(Q);if(ie.kind!==he.kind||ie.kind!=="string"&&ie.kind!=="number")throw new sn(`Expected arguments for "${y}" to be (string, string) or (number, number), but found (${ie.kind}, ${he.kind}) instead.`)}if(this.collator&&!S&&this.hasUntypedArgument){const ie=Fr(V),he=Fr(Q);if(ie.kind!=="string"||he.kind!=="string")return p(O,V,Q)}return this.collator?_(O,V,Q,this.collator.evaluate(O)):p(O,V,Q)}eachChild(O){O(this.lhs),O(this.rhs),this.collator&&O(this.collator)}outputDefined(){return!0}}}const uc=Xa("==",function(y,p,_){return p===_},bl),gu=Xa("!=",function(y,p,_){return p!==_},function(y,p,_,S){return!bl(0,p,_,S)}),Mc=Xa("<",function(y,p,_){return p<_},function(y,p,_,S){return S.compare(p,_)<0}),yu=Xa(">",function(y,p,_){return p>_},function(y,p,_,S){return S.compare(p,_)>0}),Qc=Xa("<=",function(y,p,_){return p<=_},function(y,p,_,S){return S.compare(p,_)<=0}),$u=Xa(">=",function(y,p,_){return p>=_},function(y,p,_,S){return S.compare(p,_)>=0});class vu{constructor(p,_,S,z,O){this.type=pn,this.number=p,this.locale=_,this.currency=S,this.minFractionDigits=z,this.maxFractionDigits=O}static parse(p,_){if(p.length!==3)return _.error("Expected two arguments.");const S=_.parse(p[1],1,Nr);if(!S)return null;const z=p[2];if(typeof z!="object"||Array.isArray(z))return _.error("NumberFormat options argument must be an object.");let O=null;if(z.locale&&(O=_.parse(z.locale,1,pn),!O))return null;let V=null;if(z.currency&&(V=_.parse(z.currency,1,pn),!V))return null;let Q=null;if(z["min-fraction-digits"]&&(Q=_.parse(z["min-fraction-digits"],1,Nr),!Q))return null;let ie=null;return z["max-fraction-digits"]&&(ie=_.parse(z["max-fraction-digits"],1,Nr),!ie)?null:new vu(S,O,V,Q,ie)}evaluate(p){return new Intl.NumberFormat(this.locale?this.locale.evaluate(p):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(p):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(p):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(p):void 0}).format(this.number.evaluate(p))}eachChild(p){p(this.number),this.locale&&p(this.locale),this.currency&&p(this.currency),this.minFractionDigits&&p(this.minFractionDigits),this.maxFractionDigits&&p(this.maxFractionDigits)}outputDefined(){return!1}}class _u{constructor(p){this.type=li,this.sections=p}static parse(p,_){if(p.length<2)return _.error("Expected at least one argument.");const S=p[1];if(!Array.isArray(S)&&typeof S=="object")return _.error("First argument must be an image or text section.");const z=[];let O=!1;for(let V=1;V<=p.length-1;++V){const Q=p[V];if(O&&typeof Q=="object"&&!Array.isArray(Q)){O=!1;let ie=null;if(Q["font-scale"]&&(ie=_.parse(Q["font-scale"],1,Nr),!ie))return null;let he=null;if(Q["text-font"]&&(he=_.parse(Q["text-font"],1,pi(pn)),!he))return null;let Ee=null;if(Q["text-color"]&&(Ee=_.parse(Q["text-color"],1,ci),!Ee))return null;const Me=z[z.length-1];Me.scale=ie,Me.font=he,Me.textColor=Ee}else{const ie=_.parse(p[V],1,gi);if(!ie)return null;const he=ie.type.kind;if(he!=="string"&&he!=="value"&&he!=="null"&&he!=="resolvedImage")return _.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");O=!0,z.push({content:ie,scale:null,font:null,textColor:null})}}return new _u(z)}evaluate(p){return new Ht(this.sections.map(_=>{const S=_.content.evaluate(p);return Fr(S)===yo?new Re("",S,null,null,null):new Re($n(S),null,_.scale?_.scale.evaluate(p):null,_.font?_.font.evaluate(p).join(","):null,_.textColor?_.textColor.evaluate(p):null)}))}eachChild(p){for(const _ of this.sections)p(_.content),_.scale&&p(_.scale),_.font&&p(_.font),_.textColor&&p(_.textColor)}outputDefined(){return!1}}class Hl{constructor(p){this.type=yo,this.input=p}static parse(p,_){if(p.length!==2)return _.error("Expected two arguments.");const S=_.parse(p[1],1,pn);return S?new Hl(S):_.error("No image name provided.")}evaluate(p){const _=this.input.evaluate(p),S=ir.fromString(_);return S&&p.availableImages&&(S.available=p.availableImages.indexOf(_)>-1),S}eachChild(p){p(this.input)}outputDefined(){return!1}}class bu{constructor(p){this.type=Nr,this.input=p}static parse(p,_){if(p.length!==2)return _.error(`Expected 1 argument, but found ${p.length-1} instead.`);const S=_.parse(p[1],1);return S?S.type.kind!=="array"&&S.type.kind!=="string"&&S.type.kind!=="value"?_.error(`Expected argument of type string or array, but found ${Ti(S.type)} instead.`):new bu(S):null}evaluate(p){const _=this.input.evaluate(p);if(typeof _=="string"||Array.isArray(_))return _.length;throw new sn(`Expected value to be of type string or array, but found ${Ti(Fr(_))} instead.`)}eachChild(p){p(this.input)}outputDefined(){return!1}}const jn={"==":uc,"!=":gu,">":yu,"<":Mc,">=":$u,"<=":Qc,array:Ai,at:ii,boolean:Ai,case:bs,coalesce:L,collator:Yo,format:_u,image:Hl,in:To,"index-of":J,interpolate:Pr,"interpolate-hcl":Pr,"interpolate-lab":Pr,length:bu,let:kn,literal:Wn,match:Ri,number:Ai,"number-format":vu,object:Ai,slice:Gs,step:_s,string:Ai,"to-boolean":Ii,"to-color":Ii,"to-number":Ii,"to-string":Ii,var:du,within:tl};function Fn(y,[p,_,S,z]){p=p.evaluate(y),_=_.evaluate(y),S=S.evaluate(y);const O=z?z.evaluate(y):1,V=Br(p,_,S,O);if(V)throw new sn(V);return new st(p/255*O,_/255*O,S/255*O,O)}function Gu(y,p){return y in p}function Ms(y,p){const _=p[y];return _===void 0?null:_}function ws(y){return{type:y}}function Wl(y){return{result:"success",value:y}}function xs(y){return{result:"error",value:y}}function Lo(y){return y["property-type"]==="data-driven"||y["property-type"]==="cross-faded-data-driven"}function te(y){return!!y.expression&&y.expression.parameters.indexOf("zoom")>-1}function Le(y){return!!y.expression&&y.expression.interpolated}function pt(y){return y instanceof Number?"number":y instanceof String?"string":y instanceof Boolean?"boolean":Array.isArray(y)?"array":y===null?"null":typeof y}function Bt(y){return typeof y=="object"&&y!==null&&!Array.isArray(y)}function ur(y){return y}function Xr(y,p){const _=p.type==="color",S=y.stops&&typeof y.stops[0][0]=="object",z=S||!(S||y.property!==void 0),O=y.type||(Le(p)?"exponential":"interval");if(_||p.type==="padding"){const he=_?st.parse:Nt.parse;(y=xn({},y)).stops&&(y.stops=y.stops.map(Ee=>[Ee[0],he(Ee[1])])),y.default=he(y.default?y.default:p.default)}if(y.colorSpace&&y.colorSpace!=="rgb"&&!m[y.colorSpace])throw new Error(`Unknown color space: ${y.colorSpace}`);let V,Q,ie;if(O==="exponential")V=Oi;else if(O==="interval")V=xi;else if(O==="categorical"){V=Xn,Q=Object.create(null);for(const he of y.stops)Q[he[0]]=he[1];ie=typeof y.stops[0][0]}else{if(O!=="identity")throw new Error(`Unknown function type "${O}"`);V=Yi}if(S){const he={},Ee=[];for(let Qe=0;Qe<y.stops.length;Qe++){const tt=y.stops[Qe],jt=tt[0].zoom;he[jt]===void 0&&(he[jt]={zoom:jt,type:y.type,property:y.property,default:y.default,stops:[]},Ee.push(jt)),he[jt].stops.push([tt[0].value,tt[1]])}const Me=[];for(const Qe of Ee)Me.push([he[Qe].zoom,Xr(he[Qe],p)]);const Ve={name:"linear"};return{kind:"composite",interpolationType:Ve,interpolationFactor:Pr.interpolationFactor.bind(void 0,Ve),zoomStops:Me.map(Qe=>Qe[0]),evaluate:({zoom:Qe},tt)=>Oi({stops:Me,base:y.base},p,Qe).evaluate(Qe,tt)}}if(z){const he=O==="exponential"?{name:"exponential",base:y.base!==void 0?y.base:1}:null;return{kind:"camera",interpolationType:he,interpolationFactor:Pr.interpolationFactor.bind(void 0,he),zoomStops:y.stops.map(Ee=>Ee[0]),evaluate:({zoom:Ee})=>V(y,p,Ee,Q,ie)}}return{kind:"source",evaluate(he,Ee){const Me=Ee&&Ee.properties?Ee.properties[y.property]:void 0;return Me===void 0?gn(y.default,p.default):V(y,p,Me,Q,ie)}}}function gn(y,p,_){return y!==void 0?y:p!==void 0?p:_!==void 0?_:void 0}function Xn(y,p,_,S,z){return gn(typeof _===z?S[_]:void 0,y.default,p.default)}function xi(y,p,_){if(pt(_)!=="number")return gn(y.default,p.default);const S=y.stops.length;if(S===1||_<=y.stops[0][0])return y.stops[0][1];if(_>=y.stops[S-1][0])return y.stops[S-1][1];const z=vs(y.stops.map(O=>O[0]),_);return y.stops[z][1]}function Oi(y,p,_){const S=y.base!==void 0?y.base:1;if(pt(_)!=="number")return gn(y.default,p.default);const z=y.stops.length;if(z===1||_<=y.stops[0][0])return y.stops[0][1];if(_>=y.stops[z-1][0])return y.stops[z-1][1];const O=vs(y.stops.map(Ee=>Ee[0]),_),V=function(Ee,Me,Ve,Qe){const tt=Qe-Ve,jt=Ee-Ve;return tt===0?0:Me===1?jt/tt:(Math.pow(Me,jt)-1)/(Math.pow(Me,tt)-1)}(_,S,y.stops[O][0],y.stops[O+1][0]),Q=y.stops[O][1],ie=y.stops[O+1][1];let he=rl[p.type]||ur;if(y.colorSpace&&y.colorSpace!=="rgb"){const Ee=m[y.colorSpace];he=(Me,Ve)=>Ee.reverse(Ee.interpolate(Ee.forward(Me),Ee.forward(Ve),V))}return typeof Q.evaluate=="function"?{evaluate(...Ee){const Me=Q.evaluate.apply(void 0,Ee),Ve=ie.evaluate.apply(void 0,Ee);if(Me!==void 0&&Ve!==void 0)return he(Me,Ve,V)}}:he(Q,ie,V)}function Yi(y,p,_){switch(p.type){case"color":_=st.parse(_);break;case"formatted":_=Ht.fromString(_.toString());break;case"resolvedImage":_=ir.fromString(_.toString());break;case"padding":_=Nt.parse(_);break;default:pt(_)===p.type||p.type==="enum"&&p.values[_]||(_=void 0)}return gn(_,y.default,p.default)}ko.register(jn,{error:[{kind:"error"},[pn],(y,[p])=>{throw new sn(p.evaluate(y))}],typeof:[pn,[gi],(y,[p])=>Ti(Fr(p.evaluate(y)))],"to-rgba":[pi(Nr,4),[ci],(y,[p])=>p.evaluate(y).toArray()],rgb:[ci,[Nr,Nr,Nr],Fn],rgba:[ci,[Nr,Nr,Nr,Nr],Fn],has:{type:Yn,overloads:[[[pn],(y,[p])=>Gu(p.evaluate(y),y.properties())],[[pn,No],(y,[p,_])=>Gu(p.evaluate(y),_.evaluate(y))]]},get:{type:gi,overloads:[[[pn],(y,[p])=>Ms(p.evaluate(y),y.properties())],[[pn,No],(y,[p,_])=>Ms(p.evaluate(y),_.evaluate(y))]]},"feature-state":[gi,[pn],(y,[p])=>Ms(p.evaluate(y),y.featureState||{})],properties:[No,[],y=>y.properties()],"geometry-type":[pn,[],y=>y.geometryType()],id:[gi,[],y=>y.id()],zoom:[Nr,[],y=>y.globals.zoom],"heatmap-density":[Nr,[],y=>y.globals.heatmapDensity||0],"line-progress":[Nr,[],y=>y.globals.lineProgress||0],accumulated:[gi,[],y=>y.globals.accumulated===void 0?null:y.globals.accumulated],"+":[Nr,ws(Nr),(y,p)=>{let _=0;for(const S of p)_+=S.evaluate(y);return _}],"*":[Nr,ws(Nr),(y,p)=>{let _=1;for(const S of p)_*=S.evaluate(y);return _}],"-":{type:Nr,overloads:[[[Nr,Nr],(y,[p,_])=>p.evaluate(y)-_.evaluate(y)],[[Nr],(y,[p])=>-p.evaluate(y)]]},"/":[Nr,[Nr,Nr],(y,[p,_])=>p.evaluate(y)/_.evaluate(y)],"%":[Nr,[Nr,Nr],(y,[p,_])=>p.evaluate(y)%_.evaluate(y)],ln2:[Nr,[],()=>Math.LN2],pi:[Nr,[],()=>Math.PI],e:[Nr,[],()=>Math.E],"^":[Nr,[Nr,Nr],(y,[p,_])=>Math.pow(p.evaluate(y),_.evaluate(y))],sqrt:[Nr,[Nr],(y,[p])=>Math.sqrt(p.evaluate(y))],log10:[Nr,[Nr],(y,[p])=>Math.log(p.evaluate(y))/Math.LN10],ln:[Nr,[Nr],(y,[p])=>Math.log(p.evaluate(y))],log2:[Nr,[Nr],(y,[p])=>Math.log(p.evaluate(y))/Math.LN2],sin:[Nr,[Nr],(y,[p])=>Math.sin(p.evaluate(y))],cos:[Nr,[Nr],(y,[p])=>Math.cos(p.evaluate(y))],tan:[Nr,[Nr],(y,[p])=>Math.tan(p.evaluate(y))],asin:[Nr,[Nr],(y,[p])=>Math.asin(p.evaluate(y))],acos:[Nr,[Nr],(y,[p])=>Math.acos(p.evaluate(y))],atan:[Nr,[Nr],(y,[p])=>Math.atan(p.evaluate(y))],min:[Nr,ws(Nr),(y,p)=>Math.min(...p.map(_=>_.evaluate(y)))],max:[Nr,ws(Nr),(y,p)=>Math.max(...p.map(_=>_.evaluate(y)))],abs:[Nr,[Nr],(y,[p])=>Math.abs(p.evaluate(y))],round:[Nr,[Nr],(y,[p])=>{const _=p.evaluate(y);return _<0?-Math.round(-_):Math.round(_)}],floor:[Nr,[Nr],(y,[p])=>Math.floor(p.evaluate(y))],ceil:[Nr,[Nr],(y,[p])=>Math.ceil(p.evaluate(y))],"filter-==":[Yn,[pn,gi],(y,[p,_])=>y.properties()[p.value]===_.value],"filter-id-==":[Yn,[gi],(y,[p])=>y.id()===p.value],"filter-type-==":[Yn,[pn],(y,[p])=>y.geometryType()===p.value],"filter-<":[Yn,[pn,gi],(y,[p,_])=>{const S=y.properties()[p.value],z=_.value;return typeof S==typeof z&&S<z}],"filter-id-<":[Yn,[gi],(y,[p])=>{const _=y.id(),S=p.value;return typeof _==typeof S&&_<S}],"filter->":[Yn,[pn,gi],(y,[p,_])=>{const S=y.properties()[p.value],z=_.value;return typeof S==typeof z&&S>z}],"filter-id->":[Yn,[gi],(y,[p])=>{const _=y.id(),S=p.value;return typeof _==typeof S&&_>S}],"filter-<=":[Yn,[pn,gi],(y,[p,_])=>{const S=y.properties()[p.value],z=_.value;return typeof S==typeof z&&S<=z}],"filter-id-<=":[Yn,[gi],(y,[p])=>{const _=y.id(),S=p.value;return typeof _==typeof S&&_<=S}],"filter->=":[Yn,[pn,gi],(y,[p,_])=>{const S=y.properties()[p.value],z=_.value;return typeof S==typeof z&&S>=z}],"filter-id->=":[Yn,[gi],(y,[p])=>{const _=y.id(),S=p.value;return typeof _==typeof S&&_>=S}],"filter-has":[Yn,[gi],(y,[p])=>p.value in y.properties()],"filter-has-id":[Yn,[],y=>y.id()!==null&&y.id()!==void 0],"filter-type-in":[Yn,[pi(pn)],(y,[p])=>p.value.indexOf(y.geometryType())>=0],"filter-id-in":[Yn,[pi(gi)],(y,[p])=>p.value.indexOf(y.id())>=0],"filter-in-small":[Yn,[pn,pi(gi)],(y,[p,_])=>_.value.indexOf(y.properties()[p.value])>=0],"filter-in-large":[Yn,[pn,pi(gi)],(y,[p,_])=>function(S,z,O,V){for(;O<=V;){const Q=O+V>>1;if(z[Q]===S)return!0;z[Q]>S?V=Q-1:O=Q+1}return!1}(y.properties()[p.value],_.value,0,_.value.length-1)],all:{type:Yn,overloads:[[[Yn,Yn],(y,[p,_])=>p.evaluate(y)&&_.evaluate(y)],[ws(Yn),(y,p)=>{for(const _ of p)if(!_.evaluate(y))return!1;return!0}]]},any:{type:Yn,overloads:[[[Yn,Yn],(y,[p,_])=>p.evaluate(y)||_.evaluate(y)],[ws(Yn),(y,p)=>{for(const _ of p)if(_.evaluate(y))return!0;return!1}]]},"!":[Yn,[Yn],(y,[p])=>!p.evaluate(y)],"is-supported-script":[Yn,[pn],(y,[p])=>{const _=y.globals&&y.globals.isSupportedScript;return!_||_(p.evaluate(y))}],upcase:[pn,[pn],(y,[p])=>p.evaluate(y).toUpperCase()],downcase:[pn,[pn],(y,[p])=>p.evaluate(y).toLowerCase()],concat:[pn,ws(gi),(y,p)=>p.map(_=>$n(_.evaluate(y))).join("")],"resolved-locale":[pn,[co],(y,[p])=>p.evaluate(y).resolvedLocale()]});class fo{constructor(p,_){this.expression=p,this._warningHistory={},this._evaluator=new ro,this._defaultValue=_?function(S){return S.type==="color"&&Bt(S.default)?new st(0,0,0,0):S.type==="color"?st.parse(S.default)||null:S.type==="padding"?Nt.parse(S.default)||null:S.default===void 0?null:S.default}(_):null,this._enumValues=_&&_.type==="enum"?_.values:null}evaluateWithoutErrorHandling(p,_,S,z,O,V){return this._evaluator.globals=p,this._evaluator.feature=_,this._evaluator.featureState=S,this._evaluator.canonical=z,this._evaluator.availableImages=O||null,this._evaluator.formattedSection=V,this.expression.evaluate(this._evaluator)}evaluate(p,_,S,z,O,V){this._evaluator.globals=p,this._evaluator.feature=_||null,this._evaluator.featureState=S||null,this._evaluator.canonical=z,this._evaluator.availableImages=O||null,this._evaluator.formattedSection=V||null;try{const Q=this.expression.evaluate(this._evaluator);if(Q==null||typeof Q=="number"&&Q!=Q)return this._defaultValue;if(this._enumValues&&!(Q in this._enumValues))throw new sn(`Expected value to be one of ${Object.keys(this._enumValues).map(ie=>JSON.stringify(ie)).join(", ")}, but found ${JSON.stringify(Q)} instead.`);return Q}catch(Q){return this._warningHistory[Q.message]||(this._warningHistory[Q.message]=!0,typeof console<"u"&&console.warn(Q.message)),this._defaultValue}}}function qo(y){return Array.isArray(y)&&y.length>0&&typeof y[0]=="string"&&y[0]in jn}function Ko(y,p){const _=new _l(jn,[],p?function(z){const O={color:ci,string:pn,number:Nr,enum:pn,boolean:Yn,formatted:li,padding:to,resolvedImage:yo};return z.type==="array"?pi(O[z.value]||gi,z.length):O[z.type]}(p):void 0),S=_.parse(y,void 0,void 0,void 0,p&&p.type==="string"?{typeAnnotation:"coerce"}:void 0);return S?Wl(new fo(S,p)):xs(_.errors)}class Qo{constructor(p,_){this.kind=p,this._styleExpression=_,this.isStateDependent=p!=="constant"&&!Ps(_.expression)}evaluateWithoutErrorHandling(p,_,S,z,O,V){return this._styleExpression.evaluateWithoutErrorHandling(p,_,S,z,O,V)}evaluate(p,_,S,z,O,V){return this._styleExpression.evaluate(p,_,S,z,O,V)}}class Da{constructor(p,_,S,z){this.kind=p,this.zoomStops=S,this._styleExpression=_,this.isStateDependent=p!=="camera"&&!Ps(_.expression),this.interpolationType=z}evaluateWithoutErrorHandling(p,_,S,z,O,V){return this._styleExpression.evaluateWithoutErrorHandling(p,_,S,z,O,V)}evaluate(p,_,S,z,O,V){return this._styleExpression.evaluate(p,_,S,z,O,V)}interpolationFactor(p,_,S){return this.interpolationType?Pr.interpolationFactor(this.interpolationType,p,_,S):0}}function aa(y,p){const _=Ko(y,p);if(_.result==="error")return _;const S=_.value.expression,z=us(S);if(!z&&!Lo(p))return xs([new or("","data expressions not supported")]);const O=vl(S,["zoom"]);if(!O&&!te(p))return xs([new or("","zoom expressions not supported")]);const V=za(S);return V||O?V instanceof or?xs([V]):V instanceof Pr&&!Le(p)?xs([new or("",'"interpolate" expressions cannot be used with this property')]):Wl(V?new Da(z?"camera":"composite",_.value,V.labels,V instanceof Pr?V.interpolation:void 0):new Qo(z?"constant":"source",_.value)):xs([new or("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class Vi{constructor(p,_){this._parameters=p,this._specification=_,xn(this,Xr(this._parameters,this._specification))}static deserialize(p){return new Vi(p._parameters,p._specification)}static serialize(p){return{_parameters:p._parameters,_specification:p._specification}}}function za(y){let p=null;if(y instanceof kn)p=za(y.result);else if(y instanceof L){for(const _ of y.args)if(p=za(_),p)break}else(y instanceof _s||y instanceof Pr)&&y.input instanceof ko&&y.input.name==="zoom"&&(p=y);return p instanceof or||y.eachChild(_=>{const S=za(_);S instanceof or?p=S:!p&&S?p=new or("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):p&&S&&p!==S&&(p=new or("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),p}function Sa(y){const p=y.key,_=y.value,S=y.valueSpec||{},z=y.objectElementValidators||{},O=y.style,V=y.styleSpec;let Q=[];const ie=pt(_);if(ie!=="object")return[new Vr(p,_,`object expected, ${ie} found`)];for(const he in _){const Ee=he.split(".")[0],Me=S[Ee]||S["*"];let Ve;if(z[Ee])Ve=z[Ee];else if(S[Ee])Ve=la;else if(z["*"])Ve=z["*"];else{if(!S["*"]){Q.push(new Vr(p,_[he],`unknown property "${he}"`));continue}Ve=la}Q=Q.concat(Ve({key:(p&&`${p}.`)+he,value:_[he],valueSpec:Me,style:O,styleSpec:V,object:_,objectKey:he},_))}for(const he in S)z[he]||S[he].required&&S[he].default===void 0&&_[he]===void 0&&Q.push(new Vr(p,_,`missing required property "${he}"`));return Q}function Zl(y){const p=y.value,_=y.valueSpec,S=y.style,z=y.styleSpec,O=y.key,V=y.arrayElementValidator||la;if(pt(p)!=="array")return[new Vr(O,p,`array expected, ${pt(p)} found`)];if(_.length&&p.length!==_.length)return[new Vr(O,p,`array length ${_.length} expected, length ${p.length} found`)];if(_["min-length"]&&p.length<_["min-length"])return[new Vr(O,p,`array length at least ${_["min-length"]} expected, length ${p.length} found`)];let Q={type:_.value,values:_.values};z.$version<7&&(Q.function=_.function),pt(_.value)==="object"&&(Q=_.value);let ie=[];for(let he=0;he<p.length;he++)ie=ie.concat(V({array:p,arrayIndex:he,value:p[he],valueSpec:Q,style:S,styleSpec:z,key:`${O}[${he}]`}));return ie}function wl(y){const p=y.key,_=y.value,S=y.valueSpec;let z=pt(_);return z==="number"&&_!=_&&(z="NaN"),z!=="number"?[new Vr(p,_,`number expected, ${z} found`)]:"minimum"in S&&_<S.minimum?[new Vr(p,_,`${_} is less than the minimum value ${S.minimum}`)]:"maximum"in S&&_>S.maximum?[new Vr(p,_,`${_} is greater than the maximum value ${S.maximum}`)]:[]}function Hu(y){const p=y.valueSpec,_=si(y.value.type);let S,z,O,V={};const Q=_!=="categorical"&&y.value.property===void 0,ie=!Q,he=pt(y.value.stops)==="array"&&pt(y.value.stops[0])==="array"&&pt(y.value.stops[0][0])==="object",Ee=Sa({key:y.key,value:y.value,valueSpec:y.styleSpec.function,style:y.style,styleSpec:y.styleSpec,objectElementValidators:{stops:function(Qe){if(_==="identity")return[new Vr(Qe.key,Qe.value,'identity function may not have a "stops" property')];let tt=[];const jt=Qe.value;return tt=tt.concat(Zl({key:Qe.key,value:jt,valueSpec:Qe.valueSpec,style:Qe.style,styleSpec:Qe.styleSpec,arrayElementValidator:Me})),pt(jt)==="array"&&jt.length===0&&tt.push(new Vr(Qe.key,jt,"array must have at least one stop")),tt},default:function(Qe){return la({key:Qe.key,value:Qe.value,valueSpec:p,style:Qe.style,styleSpec:Qe.styleSpec})}}});return _==="identity"&&Q&&Ee.push(new Vr(y.key,y.value,'missing required property "property"')),_==="identity"||y.value.stops||Ee.push(new Vr(y.key,y.value,'missing required property "stops"')),_==="exponential"&&y.valueSpec.expression&&!Le(y.valueSpec)&&Ee.push(new Vr(y.key,y.value,"exponential functions not supported")),y.styleSpec.$version>=8&&(ie&&!Lo(y.valueSpec)?Ee.push(new Vr(y.key,y.value,"property functions not supported")):Q&&!te(y.valueSpec)&&Ee.push(new Vr(y.key,y.value,"zoom functions not supported"))),_!=="categorical"&&!he||y.value.property!==void 0||Ee.push(new Vr(y.key,y.value,'"property" property is required')),Ee;function Me(Qe){let tt=[];const jt=Qe.value,Ot=Qe.key;if(pt(jt)!=="array")return[new Vr(Ot,jt,`array expected, ${pt(jt)} found`)];if(jt.length!==2)return[new Vr(Ot,jt,`array length 2 expected, length ${jt.length} found`)];if(he){if(pt(jt[0])!=="object")return[new Vr(Ot,jt,`object expected, ${pt(jt[0])} found`)];if(jt[0].zoom===void 0)return[new Vr(Ot,jt,"object stop key must have zoom")];if(jt[0].value===void 0)return[new Vr(Ot,jt,"object stop key must have value")];if(O&&O>si(jt[0].zoom))return[new Vr(Ot,jt[0].zoom,"stop zoom values must appear in ascending order")];si(jt[0].zoom)!==O&&(O=si(jt[0].zoom),z=void 0,V={}),tt=tt.concat(Sa({key:`${Ot}[0]`,value:jt[0],valueSpec:{zoom:{}},style:Qe.style,styleSpec:Qe.styleSpec,objectElementValidators:{zoom:wl,value:Ve}}))}else tt=tt.concat(Ve({key:`${Ot}[0]`,value:jt[0],valueSpec:{},style:Qe.style,styleSpec:Qe.styleSpec},jt));return qo(fr(jt[1]))?tt.concat([new Vr(`${Ot}[1]`,jt[1],"expressions are not allowed in function stops.")]):tt.concat(la({key:`${Ot}[1]`,value:jt[1],valueSpec:p,style:Qe.style,styleSpec:Qe.styleSpec}))}function Ve(Qe,tt){const jt=pt(Qe.value),Ot=si(Qe.value),xr=Qe.value!==null?Qe.value:tt;if(S){if(jt!==S)return[new Vr(Qe.key,xr,`${jt} stop domain type must match previous stop domain type ${S}`)]}else S=jt;if(jt!=="number"&&jt!=="string"&&jt!=="boolean")return[new Vr(Qe.key,xr,"stop domain value must be a number, string, or boolean")];if(jt!=="number"&&_!=="categorical"){let jr=`number expected, ${jt} found`;return Lo(p)&&_===void 0&&(jr+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new Vr(Qe.key,xr,jr)]}return _!=="categorical"||jt!=="number"||isFinite(Ot)&&Math.floor(Ot)===Ot?_!=="categorical"&&jt==="number"&&z!==void 0&&Ot<z?[new Vr(Qe.key,xr,"stop domain values must appear in ascending order")]:(z=Ot,_==="categorical"&&Ot in V?[new Vr(Qe.key,xr,"stop domain values must be unique")]:(V[Ot]=!0,[])):[new Vr(Qe.key,xr,`integer expected, found ${Ot}`)]}}function Ds(y){const p=(y.expressionContext==="property"?aa:Ko)(fr(y.value),y.valueSpec);if(p.result==="error")return p.value.map(S=>new Vr(`${y.key}${S.key}`,y.value,S.message));const _=p.value.expression||p.value._styleExpression.expression;if(y.expressionContext==="property"&&y.propertyKey==="text-font"&&!_.outputDefined())return[new Vr(y.key,y.value,`Invalid data expression for "${y.propertyKey}". Output values must be contained as literals within the expression.`)];if(y.expressionContext==="property"&&y.propertyType==="layout"&&!Ps(_))return[new Vr(y.key,y.value,'"feature-state" data expressions are not supported with layout properties.')];if(y.expressionContext==="filter"&&!Ps(_))return[new Vr(y.key,y.value,'"feature-state" data expressions are not supported with filters.')];if(y.expressionContext&&y.expressionContext.indexOf("cluster")===0){if(!vl(_,["zoom","feature-state"]))return[new Vr(y.key,y.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(y.expressionContext==="cluster-initial"&&!us(_))return[new Vr(y.key,y.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function xl(y){const p=y.key,_=y.value,S=y.valueSpec,z=[];return Array.isArray(S.values)?S.values.indexOf(si(_))===-1&&z.push(new Vr(p,_,`expected one of [${S.values.join(", ")}], ${JSON.stringify(_)} found`)):Object.keys(S.values).indexOf(si(_))===-1&&z.push(new Vr(p,_,`expected one of [${Object.keys(S.values).join(", ")}], ${JSON.stringify(_)} found`)),z}function nl(y){if(y===!0||y===!1)return!0;if(!Array.isArray(y)||y.length===0)return!1;switch(y[0]){case"has":return y.length>=2&&y[1]!=="$id"&&y[1]!=="$type";case"in":return y.length>=3&&(typeof y[1]!="string"||Array.isArray(y[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return y.length!==3||Array.isArray(y[1])||Array.isArray(y[2]);case"any":case"all":for(const p of y.slice(1))if(!nl(p)&&typeof p!="boolean")return!1;return!0;default:return!0}}const wu={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function Na(y){if(y==null)return{filter:()=>!0,needGeometry:!1};nl(y)||(y=Hs(y));const p=Ko(y,wu);if(p.result==="error")throw new Error(p.value.map(_=>`${_.key}: ${_.message}`).join(", "));return{filter:(_,S,z)=>p.value.evaluate(_,S,{},z),needGeometry:Xl(y)}}function xu(y,p){return y<p?-1:y>p?1:0}function Xl(y){if(!Array.isArray(y))return!1;if(y[0]==="within")return!0;for(let p=1;p<y.length;p++)if(Xl(y[p]))return!0;return!1}function Hs(y){if(!y)return!0;const p=y[0];return y.length<=1?p!=="any":p==="=="?kl(y[1],y[2],"=="):p==="!="?Ws(kl(y[1],y[2],"==")):p==="<"||p===">"||p==="<="||p===">="?kl(y[1],y[2],p):p==="any"?(_=y.slice(1),["any"].concat(_.map(Hs))):p==="all"?["all"].concat(y.slice(1).map(Hs)):p==="none"?["all"].concat(y.slice(1).map(Hs).map(Ws)):p==="in"?Ra(y[1],y.slice(2)):p==="!in"?Ws(Ra(y[1],y.slice(2))):p==="has"?Yl(y[1]):p==="!has"?Ws(Yl(y[1])):p!=="within"||y;var _}function kl(y,p,_){switch(y){case"$type":return[`filter-type-${_}`,p];case"$id":return[`filter-id-${_}`,p];default:return[`filter-${_}`,y,p]}}function Ra(y,p){if(p.length===0)return!1;switch(y){case"$type":return["filter-type-in",["literal",p]];case"$id":return["filter-id-in",["literal",p]];default:return p.length>200&&!p.some(_=>typeof _!=typeof p[0])?["filter-in-large",y,["literal",p.sort(xu)]]:["filter-in-small",y,["literal",p]]}}function Yl(y){switch(y){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",y]}}function Ws(y){return["!",y]}function Al(y){return nl(fr(y.value))?Ds(xn({},y,{expressionContext:"filter",valueSpec:{value:"boolean"}})):is(y)}function is(y){const p=y.value,_=y.key;if(pt(p)!=="array")return[new Vr(_,p,`array expected, ${pt(p)} found`)];const S=y.styleSpec;let z,O=[];if(p.length<1)return[new Vr(_,p,"filter array must have at least 1 element")];switch(O=O.concat(xl({key:`${_}[0]`,value:p[0],valueSpec:S.filter_operator,style:y.style,styleSpec:y.styleSpec})),si(p[0])){case"<":case"<=":case">":case">=":p.length>=2&&si(p[1])==="$type"&&O.push(new Vr(_,p,`"$type" cannot be use with operator "${p[0]}"`));case"==":case"!=":p.length!==3&&O.push(new Vr(_,p,`filter array for operator "${p[0]}" must have 3 elements`));case"in":case"!in":p.length>=2&&(z=pt(p[1]),z!=="string"&&O.push(new Vr(`${_}[1]`,p[1],`string expected, ${z} found`)));for(let V=2;V<p.length;V++)z=pt(p[V]),si(p[1])==="$type"?O=O.concat(xl({key:`${_}[${V}]`,value:p[V],valueSpec:S.geometry_type,style:y.style,styleSpec:y.styleSpec})):z!=="string"&&z!=="number"&&z!=="boolean"&&O.push(new Vr(`${_}[${V}]`,p[V],`string, number, or boolean expected, ${z} found`));break;case"any":case"all":case"none":for(let V=1;V<p.length;V++)O=O.concat(is({key:`${_}[${V}]`,value:p[V],style:y.style,styleSpec:y.styleSpec}));break;case"has":case"!has":z=pt(p[1]),p.length!==2?O.push(new Vr(_,p,`filter array for "${p[0]}" operator must have 2 elements`)):z!=="string"&&O.push(new Vr(`${_}[1]`,p[1],`string expected, ${z} found`));break;case"within":z=pt(p[1]),p.length!==2?O.push(new Vr(_,p,`filter array for "${p[0]}" operator must have 2 elements`)):z!=="object"&&O.push(new Vr(`${_}[1]`,p[1],`object expected, ${z} found`))}return O}function El(y,p){const _=y.key,S=y.style,z=y.styleSpec,O=y.value,V=y.objectKey,Q=z[`${p}_${y.layerType}`];if(!Q)return[];const ie=V.match(/^(.*)-transition$/);if(p==="paint"&&ie&&Q[ie[1]]&&Q[ie[1]].transition)return la({key:_,value:O,valueSpec:z.transition,style:S,styleSpec:z});const he=y.valueSpec||Q[V];if(!he)return[new Vr(_,O,`unknown property "${V}"`)];let Ee;if(pt(O)==="string"&&Lo(he)&&!he.tokens&&(Ee=/^{([^}]+)}$/.exec(O)))return[new Vr(_,O,`"${V}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(Ee[1])} }\`.`)];const Me=[];return y.layerType==="symbol"&&(V==="text-field"&&S&&!S.glyphs&&Me.push(new Vr(_,O,'use of "text-field" requires a style "glyphs" property')),V==="text-font"&&Bt(fr(O))&&si(O.type)==="identity"&&Me.push(new Vr(_,O,'"text-font" does not support identity functions'))),Me.concat(la({key:y.key,value:O,valueSpec:he,style:S,styleSpec:z,expressionContext:"property",propertyType:p,propertyKey:V}))}function cc(y){return El(y,"paint")}function Dc(y){return El(y,"layout")}function Sl(y){let p=[];const _=y.value,S=y.key,z=y.style,O=y.styleSpec;_.type||_.ref||p.push(new Vr(S,_,'either "type" or "ref" is required'));let V=si(_.type);const Q=si(_.ref);if(_.id){const ie=si(_.id);for(let he=0;he<y.arrayIndex;he++){const Ee=z.layers[he];si(Ee.id)===ie&&p.push(new Vr(S,_.id,`duplicate layer id "${_.id}", previously used at line ${Ee.id.__line__}`))}}if("ref"in _){let ie;["type","source","source-layer","filter","layout"].forEach(he=>{he in _&&p.push(new Vr(S,_[he],`"${he}" is prohibited for ref layers`))}),z.layers.forEach(he=>{si(he.id)===Q&&(ie=he)}),ie?ie.ref?p.push(new Vr(S,_.ref,"ref cannot reference another ref layer")):V=si(ie.type):p.push(new Vr(S,_.ref,`ref layer "${Q}" not found`))}else if(V!=="background")if(_.source){const ie=z.sources&&z.sources[_.source],he=ie&&si(ie.type);ie?he==="vector"&&V==="raster"?p.push(new Vr(S,_.source,`layer "${_.id}" requires a raster source`)):he==="raster"&&V!=="raster"?p.push(new Vr(S,_.source,`layer "${_.id}" requires a vector source`)):he!=="vector"||_["source-layer"]?he==="raster-dem"&&V!=="hillshade"?p.push(new Vr(S,_.source,"raster-dem source can only be used with layer type 'hillshade'.")):V!=="line"||!_.paint||!_.paint["line-gradient"]||he==="geojson"&&ie.lineMetrics||p.push(new Vr(S,_,`layer "${_.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):p.push(new Vr(S,_,`layer "${_.id}" must specify a "source-layer"`)):p.push(new Vr(S,_.source,`source "${_.source}" not found`))}else p.push(new Vr(S,_,'missing required property "source"'));return p=p.concat(Sa({key:S,value:_,valueSpec:O.layer,style:y.style,styleSpec:y.styleSpec,objectElementValidators:{"*":()=>[],type:()=>la({key:`${S}.type`,value:_.type,valueSpec:O.layer.type,style:y.style,styleSpec:y.styleSpec,object:_,objectKey:"type"}),filter:Al,layout:ie=>Sa({layer:_,key:ie.key,value:ie.value,style:ie.style,styleSpec:ie.styleSpec,objectElementValidators:{"*":he=>Dc(xn({layerType:V},he))}}),paint:ie=>Sa({layer:_,key:ie.key,value:ie.value,style:ie.style,styleSpec:ie.styleSpec,objectElementValidators:{"*":he=>cc(xn({layerType:V},he))}})}})),p}function Ga(y){const p=y.value,_=y.key,S=pt(p);return S!=="string"?[new Vr(_,p,`string expected, ${S} found`)]:[]}const zs={promoteId:function({key:y,value:p}){if(pt(p)==="string")return Ga({key:y,value:p});{const _=[];for(const S in p)_.push(...Ga({key:`${y}.${S}`,value:p[S]}));return _}}};function Ns(y){const p=y.value,_=y.key,S=y.styleSpec,z=y.style;if(!p.type)return[new Vr(_,p,'"type" is required')];const O=si(p.type);let V;switch(O){case"vector":case"raster":case"raster-dem":return V=Sa({key:_,value:p,valueSpec:S[`source_${O.replace("-","_")}`],style:y.style,styleSpec:S,objectElementValidators:zs}),V;case"geojson":if(V=Sa({key:_,value:p,valueSpec:S.source_geojson,style:z,styleSpec:S,objectElementValidators:zs}),p.cluster)for(const Q in p.clusterProperties){const[ie,he]=p.clusterProperties[Q],Ee=typeof ie=="string"?[ie,["accumulated"],["get",Q]]:ie;V.push(...Ds({key:`${_}.${Q}.map`,value:he,expressionContext:"cluster-map"})),V.push(...Ds({key:`${_}.${Q}.reduce`,value:Ee,expressionContext:"cluster-reduce"}))}return V;case"video":return Sa({key:_,value:p,valueSpec:S.source_video,style:z,styleSpec:S});case"image":return Sa({key:_,value:p,valueSpec:S.source_image,style:z,styleSpec:S});case"canvas":return[new Vr(_,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return xl({key:`${_}.type`,value:p.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:z,styleSpec:S})}}function Ya(y){const p=y.value,_=y.styleSpec,S=_.light,z=y.style;let O=[];const V=pt(p);if(p===void 0)return O;if(V!=="object")return O=O.concat([new Vr("light",p,`object expected, ${V} found`)]),O;for(const Q in p){const ie=Q.match(/^(.*)-transition$/);O=O.concat(ie&&S[ie[1]]&&S[ie[1]].transition?la({key:Q,value:p[Q],valueSpec:_.transition,style:z,styleSpec:_}):S[Q]?la({key:Q,value:p[Q],valueSpec:S[Q],style:z,styleSpec:_}):[new Vr(Q,p[Q],`unknown property "${Q}"`)])}return O}function sa(y){const p=y.value,_=y.styleSpec,S=_.terrain,z=y.style;let O=[];const V=pt(p);if(p===void 0)return O;if(V!=="object")return O=O.concat([new Vr("terrain",p,`object expected, ${V} found`)]),O;for(const Q in p)O=O.concat(S[Q]?la({key:Q,value:p[Q],valueSpec:S[Q],style:z,styleSpec:_}):[new Vr(Q,p[Q],`unknown property "${Q}"`)]);return O}const Rs={"*":()=>[],array:Zl,boolean:function(y){const p=y.value,_=y.key,S=pt(p);return S!=="boolean"?[new Vr(_,p,`boolean expected, ${S} found`)]:[]},number:wl,color:function(y){const p=y.key,_=y.value,S=pt(_);return S!=="string"?[new Vr(p,_,`color expected, ${S} found`)]:ha(_)===null?[new Vr(p,_,`color expected, "${_}" found`)]:[]},constants:wi,enum:xl,filter:Al,function:Hu,layer:Sl,object:Sa,source:Ns,light:Ya,terrain:sa,string:Ga,formatted:function(y){return Ga(y).length===0?[]:Ds(y)},resolvedImage:function(y){return Ga(y).length===0?[]:Ds(y)},padding:function(y){const p=y.key,_=y.value;if(pt(_)==="array"){if(_.length<1||_.length>4)return[new Vr(p,_,`padding requires 1 to 4 values; ${_.length} values found`)];const S={type:"number"};let z=[];for(let O=0;O<_.length;O++)z=z.concat(la({key:`${p}[${O}]`,value:_[O],valueSpec:S}));return z}return wl({key:p,value:_,valueSpec:{}})}};function la(y){const p=y.value,_=y.valueSpec,S=y.styleSpec;return _.expression&&Bt(si(p))?Hu(y):_.expression&&qo(fr(p))?Ds(y):_.type&&Rs[_.type]?Rs[_.type](y):Sa(xn({},y,{valueSpec:_.type?S[_.type]:_}))}function Wu(y){const p=y.value,_=y.key,S=Ga(y);return S.length||(p.indexOf("{fontstack}")===-1&&S.push(new Vr(_,p,'"glyphs" url must include a "{fontstack}" token')),p.indexOf("{range}")===-1&&S.push(new Vr(_,p,'"glyphs" url must include a "{range}" token'))),S}function cs(y,p=yr){let _=[];return _=_.concat(la({key:"",value:y,valueSpec:p.$root,styleSpec:p,style:y,objectElementValidators:{glyphs:Wu,"*":()=>[]}})),y.constants&&(_=_.concat(wi({key:"constants",value:y.constants,style:y,styleSpec:p}))),fs(_)}function fs(y){return[].concat(y).sort((p,_)=>p.line-_.line)}function no(y){return function(...p){return fs(y.apply(this,p))}}cs.source=no(Ns),cs.light=no(Ya),cs.terrain=no(sa),cs.layer=no(Sl),cs.filter=no(Al),cs.paintProperty=no(cc),cs.layoutProperty=no(Dc);const ks=cs,il=ks.light,Jl=ks.paintProperty,ku=ks.layoutProperty;function Ca(y,p){let _=!1;if(p&&p.length)for(const S of p)y.fire(new _i(new Error(S.message))),_=!0;return _}class Cl{constructor(p,_,S){const z=this.cells=[];if(p instanceof ArrayBuffer){this.arrayBuffer=p;const V=new Int32Array(this.arrayBuffer);p=V[0],this.d=(_=V[1])+2*(S=V[2]);for(let ie=0;ie<this.d*this.d;ie++){const he=V[3+ie],Ee=V[3+ie+1];z.push(he===Ee?null:V.subarray(he,Ee))}const Q=V[3+z.length+1];this.keys=V.subarray(V[3+z.length],Q),this.bboxes=V.subarray(Q),this.insert=this._insertReadonly}else{this.d=_+2*S;for(let V=0;V<this.d*this.d;V++)z.push([]);this.keys=[],this.bboxes=[]}this.n=_,this.extent=p,this.padding=S,this.scale=_/p,this.uid=0;const O=S/_*p;this.min=-O,this.max=p+O}insert(p,_,S,z,O){this._forEachCell(_,S,z,O,this._insertCell,this.uid++,void 0,void 0),this.keys.push(p),this.bboxes.push(_),this.bboxes.push(S),this.bboxes.push(z),this.bboxes.push(O)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(p,_,S,z,O,V){this.cells[O].push(V)}query(p,_,S,z,O){const V=this.min,Q=this.max;if(p<=V&&_<=V&&Q<=S&&Q<=z&&!O)return Array.prototype.slice.call(this.keys);{const ie=[];return this._forEachCell(p,_,S,z,this._queryCell,ie,{},O),ie}}_queryCell(p,_,S,z,O,V,Q,ie){const he=this.cells[O];if(he!==null){const Ee=this.keys,Me=this.bboxes;for(let Ve=0;Ve<he.length;Ve++){const Qe=he[Ve];if(Q[Qe]===void 0){const tt=4*Qe;(ie?ie(Me[tt+0],Me[tt+1],Me[tt+2],Me[tt+3]):p<=Me[tt+2]&&_<=Me[tt+3]&&S>=Me[tt+0]&&z>=Me[tt+1])?(Q[Qe]=!0,V.push(Ee[Qe])):Q[Qe]=!1}}}}_forEachCell(p,_,S,z,O,V,Q,ie){const he=this._convertToCellCoord(p),Ee=this._convertToCellCoord(_),Me=this._convertToCellCoord(S),Ve=this._convertToCellCoord(z);for(let Qe=he;Qe<=Me;Qe++)for(let tt=Ee;tt<=Ve;tt++){const jt=this.d*tt+Qe;if((!ie||ie(this._convertFromCellCoord(Qe),this._convertFromCellCoord(tt),this._convertFromCellCoord(Qe+1),this._convertFromCellCoord(tt+1)))&&O.call(this,p,_,S,z,jt,V,Q,ie))return}}_convertFromCellCoord(p){return(p-this.padding)/this.scale}_convertToCellCoord(p){return Math.max(0,Math.min(this.d-1,Math.floor(p*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;const p=this.cells,_=3+this.cells.length+1+1;let S=0;for(let V=0;V<this.cells.length;V++)S+=this.cells[V].length;const z=new Int32Array(_+S+this.keys.length+this.bboxes.length);z[0]=this.extent,z[1]=this.n,z[2]=this.padding;let O=_;for(let V=0;V<p.length;V++){const Q=p[V];z[3+V]=O,z.set(Q,O),O+=Q.length}return z[3+p.length]=O,z.set(this.keys,O),O+=this.keys.length,z[3+p.length+1]=O,z.set(this.bboxes,O),O+=this.bboxes.length,z.buffer}static serialize(p,_){const S=p.toArrayBuffer();return _&&_.push(S),{buffer:S}}static deserialize(p){return new Cl(p.buffer)}}const ba={};function Pn(y,p,_={}){if(ba[y])throw new Error(`${y} is already registered.`);Object.defineProperty(p,"_classRegistryKey",{value:y,writeable:!1}),ba[y]={klass:p,omit:_.omit||[],shallow:_.shallow||[]}}Pn("Object",Object),Pn("TransferableGridIndex",Cl),Pn("Color",st),Pn("Error",Error),Pn("AJAXError",Mr),Pn("ResolvedImage",ir),Pn("StylePropertyFunction",Vi),Pn("StyleExpression",fo,{omit:["_evaluator"]}),Pn("ZoomDependentExpression",Da),Pn("ZoomConstantExpression",Qo),Pn("CompoundExpression",ko,{omit:["_evaluate"]});for(const y in jn)jn[y]._classRegistryKey||Pn(`Expression_${y}`,jn[y]);function Oo(y){return y&&typeof ArrayBuffer<"u"&&(y instanceof ArrayBuffer||y.constructor&&y.constructor.name==="ArrayBuffer")}function Ji(y,p){if(y==null||typeof y=="boolean"||typeof y=="number"||typeof y=="string"||y instanceof Boolean||y instanceof Number||y instanceof String||y instanceof Date||y instanceof RegExp||y instanceof Blob)return y;if(Oo(y)||ot(y))return p&&p.push(y),y;if(ArrayBuffer.isView(y)){const _=y;return p&&p.push(_.buffer),_}if(y instanceof ImageData)return p&&p.push(y.data.buffer),y;if(Array.isArray(y)){const _=[];for(const S of y)_.push(Ji(S,p));return _}if(typeof y=="object"){const _=y.constructor,S=_._classRegistryKey;if(!S)throw new Error("can't serialize object of unregistered class");if(!ba[S])throw new Error(`${S} is not registered.`);const z=_.serialize?_.serialize(y,p):{};if(_.serialize){if(p&&z===p[p.length-1])throw new Error("statically serialized object won't survive transfer of $name property")}else{for(const O in y){if(!y.hasOwnProperty(O)||ba[S].omit.indexOf(O)>=0)continue;const V=y[O];z[O]=ba[S].shallow.indexOf(O)>=0?V:Ji(V,p)}y instanceof Error&&(z.message=y.message)}if(z.$name)throw new Error("$name property is reserved for worker serialization logic.");return S!=="Object"&&(z.$name=S),z}throw new Error("can't serialize object of type "+typeof y)}function Fo(y){if(y==null||typeof y=="boolean"||typeof y=="number"||typeof y=="string"||y instanceof Boolean||y instanceof Number||y instanceof String||y instanceof Date||y instanceof RegExp||y instanceof Blob||Oo(y)||ot(y)||ArrayBuffer.isView(y)||y instanceof ImageData)return y;if(Array.isArray(y))return y.map(Fo);if(typeof y=="object"){const p=y.$name||"Object";if(!ba[p])throw new Error(`can't deserialize unregistered class ${p}`);const{klass:_}=ba[p];if(!_)throw new Error(`can't deserialize unregistered class ${p}`);if(_.deserialize)return _.deserialize(y);const S=Object.create(_.prototype);for(const z of Object.keys(y)){if(z==="$name")continue;const O=y[z];S[z]=ba[p].shallow.indexOf(z)>=0?O:Fo(O)}return S}throw new Error("can't deserialize object of type "+typeof y)}class ga{constructor(){this.first=!0}update(p,_){const S=Math.floor(p);return this.first?(this.first=!1,this.lastIntegerZoom=S,this.lastIntegerZoomTime=0,this.lastZoom=p,this.lastFloorZoom=S,!0):(this.lastFloorZoom>S?(this.lastIntegerZoom=S+1,this.lastIntegerZoomTime=_):this.lastFloorZoom<S&&(this.lastIntegerZoom=S,this.lastIntegerZoomTime=_),p!==this.lastZoom&&(this.lastZoom=p,this.lastFloorZoom=S,!0))}}const An={"Latin-1 Supplement":y=>y>=128&&y<=255,Arabic:y=>y>=1536&&y<=1791,"Arabic Supplement":y=>y>=1872&&y<=1919,"Arabic Extended-A":y=>y>=2208&&y<=2303,"Hangul Jamo":y=>y>=4352&&y<=4607,"Unified Canadian Aboriginal Syllabics":y=>y>=5120&&y<=5759,Khmer:y=>y>=6016&&y<=6143,"Unified Canadian Aboriginal Syllabics Extended":y=>y>=6320&&y<=6399,"General Punctuation":y=>y>=8192&&y<=8303,"Letterlike Symbols":y=>y>=8448&&y<=8527,"Number Forms":y=>y>=8528&&y<=8591,"Miscellaneous Technical":y=>y>=8960&&y<=9215,"Control Pictures":y=>y>=9216&&y<=9279,"Optical Character Recognition":y=>y>=9280&&y<=9311,"Enclosed Alphanumerics":y=>y>=9312&&y<=9471,"Geometric Shapes":y=>y>=9632&&y<=9727,"Miscellaneous Symbols":y=>y>=9728&&y<=9983,"Miscellaneous Symbols and Arrows":y=>y>=11008&&y<=11263,"CJK Radicals Supplement":y=>y>=11904&&y<=12031,"Kangxi Radicals":y=>y>=12032&&y<=12255,"Ideographic Description Characters":y=>y>=12272&&y<=12287,"CJK Symbols and Punctuation":y=>y>=12288&&y<=12351,Hiragana:y=>y>=12352&&y<=12447,Katakana:y=>y>=12448&&y<=12543,Bopomofo:y=>y>=12544&&y<=12591,"Hangul Compatibility Jamo":y=>y>=12592&&y<=12687,Kanbun:y=>y>=12688&&y<=12703,"Bopomofo Extended":y=>y>=12704&&y<=12735,"CJK Strokes":y=>y>=12736&&y<=12783,"Katakana Phonetic Extensions":y=>y>=12784&&y<=12799,"Enclosed CJK Letters and Months":y=>y>=12800&&y<=13055,"CJK Compatibility":y=>y>=13056&&y<=13311,"CJK Unified Ideographs Extension A":y=>y>=13312&&y<=19903,"Yijing Hexagram Symbols":y=>y>=19904&&y<=19967,"CJK Unified Ideographs":y=>y>=19968&&y<=40959,"Yi Syllables":y=>y>=40960&&y<=42127,"Yi Radicals":y=>y>=42128&&y<=42191,"Hangul Jamo Extended-A":y=>y>=43360&&y<=43391,"Hangul Syllables":y=>y>=44032&&y<=55215,"Hangul Jamo Extended-B":y=>y>=55216&&y<=55295,"Private Use Area":y=>y>=57344&&y<=63743,"CJK Compatibility Ideographs":y=>y>=63744&&y<=64255,"Arabic Presentation Forms-A":y=>y>=64336&&y<=65023,"Vertical Forms":y=>y>=65040&&y<=65055,"CJK Compatibility Forms":y=>y>=65072&&y<=65103,"Small Form Variants":y=>y>=65104&&y<=65135,"Arabic Presentation Forms-B":y=>y>=65136&&y<=65279,"Halfwidth and Fullwidth Forms":y=>y>=65280&&y<=65519};function As(y){for(const p of y)if(zc(p.charCodeAt(0)))return!0;return!1}function Zu(y){for(const p of y)if(!Xu(p.charCodeAt(0)))return!1;return!0}function Xu(y){return!(An.Arabic(y)||An["Arabic Supplement"](y)||An["Arabic Extended-A"](y)||An["Arabic Presentation Forms-A"](y)||An["Arabic Presentation Forms-B"](y))}function zc(y){return!(y!==746&&y!==747&&(y<4352||!(An["Bopomofo Extended"](y)||An.Bopomofo(y)||An["CJK Compatibility Forms"](y)&&!(y>=65097&&y<=65103)||An["CJK Compatibility Ideographs"](y)||An["CJK Compatibility"](y)||An["CJK Radicals Supplement"](y)||An["CJK Strokes"](y)||!(!An["CJK Symbols and Punctuation"](y)||y>=12296&&y<=12305||y>=12308&&y<=12319||y===12336)||An["CJK Unified Ideographs Extension A"](y)||An["CJK Unified Ideographs"](y)||An["Enclosed CJK Letters and Months"](y)||An["Hangul Compatibility Jamo"](y)||An["Hangul Jamo Extended-A"](y)||An["Hangul Jamo Extended-B"](y)||An["Hangul Jamo"](y)||An["Hangul Syllables"](y)||An.Hiragana(y)||An["Ideographic Description Characters"](y)||An.Kanbun(y)||An["Kangxi Radicals"](y)||An["Katakana Phonetic Extensions"](y)||An.Katakana(y)&&y!==12540||!(!An["Halfwidth and Fullwidth Forms"](y)||y===65288||y===65289||y===65293||y>=65306&&y<=65310||y===65339||y===65341||y===65343||y>=65371&&y<=65503||y===65507||y>=65512&&y<=65519)||!(!An["Small Form Variants"](y)||y>=65112&&y<=65118||y>=65123&&y<=65126)||An["Unified Canadian Aboriginal Syllabics"](y)||An["Unified Canadian Aboriginal Syllabics Extended"](y)||An["Vertical Forms"](y)||An["Yijing Hexagram Symbols"](y)||An["Yi Syllables"](y)||An["Yi Radicals"](y))))}function e0(y){return!(zc(y)||function(p){return!!(An["Latin-1 Supplement"](p)&&(p===167||p===169||p===174||p===177||p===188||p===189||p===190||p===215||p===247)||An["General Punctuation"](p)&&(p===8214||p===8224||p===8225||p===8240||p===8241||p===8251||p===8252||p===8258||p===8263||p===8264||p===8265||p===8273)||An["Letterlike Symbols"](p)||An["Number Forms"](p)||An["Miscellaneous Technical"](p)&&(p>=8960&&p<=8967||p>=8972&&p<=8991||p>=8996&&p<=9e3||p===9003||p>=9085&&p<=9114||p>=9150&&p<=9165||p===9167||p>=9169&&p<=9179||p>=9186&&p<=9215)||An["Control Pictures"](p)&&p!==9251||An["Optical Character Recognition"](p)||An["Enclosed Alphanumerics"](p)||An["Geometric Shapes"](p)||An["Miscellaneous Symbols"](p)&&!(p>=9754&&p<=9759)||An["Miscellaneous Symbols and Arrows"](p)&&(p>=11026&&p<=11055||p>=11088&&p<=11097||p>=11192&&p<=11243)||An["CJK Symbols and Punctuation"](p)||An.Katakana(p)||An["Private Use Area"](p)||An["CJK Compatibility Forms"](p)||An["Small Form Variants"](p)||An["Halfwidth and Fullwidth Forms"](p)||p===8734||p===8756||p===8757||p>=9984&&p<=10087||p>=10102&&p<=10131||p===65532||p===65533)}(y))}function t0(y){return y>=1424&&y<=2303||An["Arabic Presentation Forms-A"](y)||An["Arabic Presentation Forms-B"](y)}function b0(y,p){return!(!p&&t0(y)||y>=2304&&y<=3583||y>=3840&&y<=4255||An.Khmer(y))}function Mi(y){for(const p of y)if(t0(p.charCodeAt(0)))return!0;return!1}const Nc="deferred",fc="loading",ua="loaded";let os=null,ia="unavailable",Zs=null;const hc=function(y){y&&typeof y=="string"&&y.indexOf("NetworkError")>-1&&(ia="error"),os&&os(y)};function Kl(){Ql.fire(new ai("pluginStateChange",{pluginStatus:ia,pluginURL:Zs}))}const Ql=new hi,eu=function(){return ia},ho=function(){if(ia!==Nc||!Zs)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");ia=fc,Kl(),Zs&&Or({url:Zs},y=>{y?hc(y):(ia=ua,Kl())})},Es={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:()=>ia===ua||Es.applyArabicShaping!=null,isLoading:()=>ia===fc,setState(y){if(!pe())throw new Error("Cannot set the state of the rtl-text-plugin when not in the web-worker context");ia=y.pluginStatus,Zs=y.pluginURL},isParsed(){if(!pe())throw new Error("rtl-text-plugin is only parsed on the worker-threads");return Es.applyArabicShaping!=null&&Es.processBidirectionalText!=null&&Es.processStyledBidirectionalText!=null},getPluginURL(){if(!pe())throw new Error("rtl-text-plugin url can only be queried from the worker threads");return Zs}};class Go{constructor(p,_){this.zoom=p,_?(this.now=_.now,this.fadeDuration=_.fadeDuration,this.zoomHistory=_.zoomHistory,this.transition=_.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new ga,this.transition={})}isSupportedScript(p){return function(_,S){for(const z of _)if(!b0(z.charCodeAt(0),S))return!1;return!0}(p,Es.isLoaded())}crossFadingFactor(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const p=this.zoom,_=p-Math.floor(p),S=this.crossFadingFactor();return p>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:_+(1-_)*S}:{fromScale:.5,toScale:1,t:1-(1-S)*_}}}class Ss{constructor(p,_){this.property=p,this.value=_,this.expression=function(S,z){if(Bt(S))return new Vi(S,z);if(qo(S)){const O=aa(S,z);if(O.result==="error")throw new Error(O.value.map(V=>`${V.key}: ${V.message}`).join(", "));return O.value}{let O=S;return z.type==="color"&&typeof S=="string"?O=st.parse(S):z.type!=="padding"||typeof S!="number"&&!Array.isArray(S)||(O=Nt.parse(S)),{kind:"constant",evaluate:()=>O}}}(_===void 0?p.specification.default:_,p.specification)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}possiblyEvaluate(p,_,S){return this.property.possiblyEvaluate(this,p,_,S)}}class Au{constructor(p){this.property=p,this.value=new Ss(p,void 0)}transitioned(p,_){return new Eu(this.property,this.value,_,F({},p.transition,this.transition),p.now)}untransitioned(){return new Eu(this.property,this.value,null,{},0)}}class Rc{constructor(p){this._properties=p,this._values=Object.create(p.defaultTransitionablePropertyValues)}getValue(p){return ee(this._values[p].value.value)}setValue(p,_){Object.prototype.hasOwnProperty.call(this._values,p)||(this._values[p]=new Au(this._values[p].property)),this._values[p].value=new Ss(this._values[p].property,_===null?void 0:ee(_))}getTransition(p){return ee(this._values[p].transition)}setTransition(p,_){Object.prototype.hasOwnProperty.call(this._values,p)||(this._values[p]=new Au(this._values[p].property)),this._values[p].transition=ee(_)||void 0}serialize(){const p={};for(const _ of Object.keys(this._values)){const S=this.getValue(_);S!==void 0&&(p[_]=S);const z=this.getTransition(_);z!==void 0&&(p[`${_}-transition`]=z)}return p}transitioned(p,_){const S=new ol(this._properties);for(const z of Object.keys(this._values))S._values[z]=this._values[z].transitioned(p,_._values[z]);return S}untransitioned(){const p=new ol(this._properties);for(const _ of Object.keys(this._values))p._values[_]=this._values[_].untransitioned();return p}}class Eu{constructor(p,_,S,z,O){this.property=p,this.value=_,this.begin=O+z.delay||0,this.end=this.begin+z.duration||0,p.specification.transition&&(z.delay||z.duration)&&(this.prior=S)}possiblyEvaluate(p,_,S){const z=p.now||0,O=this.value.possiblyEvaluate(p,_,S),V=this.prior;if(V){if(z>this.end)return this.prior=null,O;if(this.value.isDataDriven())return this.prior=null,O;if(z<this.begin)return V.possiblyEvaluate(p,_,S);{const Q=(z-this.begin)/(this.end-this.begin);return this.property.interpolate(V.possiblyEvaluate(p,_,S),O,function(ie){if(ie<=0)return 0;if(ie>=1)return 1;const he=ie*ie,Ee=he*ie;return 4*(ie<.5?Ee:3*(ie-he)+Ee-.75)}(Q))}}return O}}class ol{constructor(p){this._properties=p,this._values=Object.create(p.defaultTransitioningPropertyValues)}possiblyEvaluate(p,_,S){const z=new pc(this._properties);for(const O of Object.keys(this._values))z._values[O]=this._values[O].possiblyEvaluate(p,_,S);return z}hasTransition(){for(const p of Object.keys(this._values))if(this._values[p].prior)return!0;return!1}}class w0{constructor(p){this._properties=p,this._values=Object.create(p.defaultPropertyValues)}getValue(p){return ee(this._values[p].value)}setValue(p,_){this._values[p]=new Ss(this._values[p].property,_===null?void 0:ee(_))}serialize(){const p={};for(const _ of Object.keys(this._values)){const S=this.getValue(_);S!==void 0&&(p[_]=S)}return p}possiblyEvaluate(p,_,S){const z=new pc(this._properties);for(const O of Object.keys(this._values))z._values[O]=this._values[O].possiblyEvaluate(p,_,S);return z}}class al{constructor(p,_,S){this.property=p,this.value=_,this.parameters=S}isConstant(){return this.value.kind==="constant"}constantOr(p){return this.value.kind==="constant"?this.value.value:p}evaluate(p,_,S,z){return this.property.evaluate(this.value,this.parameters,p,_,S,z)}}class pc{constructor(p){this._properties=p,this._values=Object.create(p.defaultPossiblyEvaluatedValues)}get(p){return this._values[p]}}class oi{constructor(p){this.specification=p}possiblyEvaluate(p,_){if(p.isDataDriven())throw new Error("Value should not be data driven");return p.expression.evaluate(_)}interpolate(p,_,S){const z=rl[this.specification.type];return z?z(p,_,S):p}}class vi{constructor(p,_){this.specification=p,this.overrides=_}possiblyEvaluate(p,_,S,z){return new al(this,p.expression.kind==="constant"||p.expression.kind==="camera"?{kind:"constant",value:p.expression.evaluate(_,null,{},S,z)}:p.expression,_)}interpolate(p,_,S){if(p.value.kind!=="constant"||_.value.kind!=="constant")return p;if(p.value.value===void 0||_.value.value===void 0)return new al(this,{kind:"constant",value:void 0},p.parameters);const z=rl[this.specification.type];return z?new al(this,{kind:"constant",value:z(p.value.value,_.value.value,S)},p.parameters):p}evaluate(p,_,S,z,O,V){return p.kind==="constant"?p.value:p.evaluate(_,S,z,O,V)}}class Oa extends vi{possiblyEvaluate(p,_,S,z){if(p.value===void 0)return new al(this,{kind:"constant",value:void 0},_);if(p.expression.kind==="constant"){const O=p.expression.evaluate(_,null,{},S,z),V=p.property.specification.type==="resolvedImage"&&typeof O!="string"?O.name:O,Q=this._calculate(V,V,V,_);return new al(this,{kind:"constant",value:Q},_)}if(p.expression.kind==="camera"){const O=this._calculate(p.expression.evaluate({zoom:_.zoom-1}),p.expression.evaluate({zoom:_.zoom}),p.expression.evaluate({zoom:_.zoom+1}),_);return new al(this,{kind:"constant",value:O},_)}return new al(this,p.expression,_)}evaluate(p,_,S,z,O,V){if(p.kind==="source"){const Q=p.evaluate(_,S,z,O,V);return this._calculate(Q,Q,Q,_)}return p.kind==="composite"?this._calculate(p.evaluate({zoom:Math.floor(_.zoom)-1},S,z),p.evaluate({zoom:Math.floor(_.zoom)},S,z),p.evaluate({zoom:Math.floor(_.zoom)+1},S,z),_):p.value}_calculate(p,_,S,z){return z.zoom>z.zoomHistory.lastIntegerZoom?{from:p,to:_}:{from:S,to:_}}interpolate(p){return p}}class Yu{constructor(p){this.specification=p}possiblyEvaluate(p,_,S,z){if(p.value!==void 0){if(p.expression.kind==="constant"){const O=p.expression.evaluate(_,null,{},S,z);return this._calculate(O,O,O,_)}return this._calculate(p.expression.evaluate(new Go(Math.floor(_.zoom-1),_)),p.expression.evaluate(new Go(Math.floor(_.zoom),_)),p.expression.evaluate(new Go(Math.floor(_.zoom+1),_)),_)}}_calculate(p,_,S,z){return z.zoom>z.zoomHistory.lastIntegerZoom?{from:p,to:_}:{from:S,to:_}}interpolate(p){return p}}class wa{constructor(p){this.specification=p}possiblyEvaluate(p,_,S,z){return!!p.expression.evaluate(_,null,{},S,z)}interpolate(){return!1}}class Bo{constructor(p){this.properties=p,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(const _ in p){const S=p[_];S.specification.overridable&&this.overridableProperties.push(_);const z=this.defaultPropertyValues[_]=new Ss(S,void 0),O=this.defaultTransitionablePropertyValues[_]=new Au(S);this.defaultTransitioningPropertyValues[_]=O.untransitioned(),this.defaultPossiblyEvaluatedValues[_]=z.possiblyEvaluate({})}}}Pn("DataDrivenProperty",vi),Pn("DataConstantProperty",oi),Pn("CrossFadedDataDrivenProperty",Oa),Pn("CrossFadedProperty",Yu),Pn("ColorRampProperty",wa);const Il="-transition";class Xs extends hi{constructor(p,_){if(super(),this.id=p.id,this.type=p.type,this._featureFilter={filter:()=>!0,needGeometry:!1},p.type!=="custom"&&(this.metadata=p.metadata,this.minzoom=p.minzoom,this.maxzoom=p.maxzoom,p.type!=="background"&&(this.source=p.source,this.sourceLayer=p["source-layer"],this.filter=p.filter),_.layout&&(this._unevaluatedLayout=new w0(_.layout)),_.paint)){this._transitionablePaint=new Rc(_.paint);for(const S in p.paint)this.setPaintProperty(S,p.paint[S],{validate:!1});for(const S in p.layout)this.setLayoutProperty(S,p.layout[S],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new pc(_.paint)}}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(p){return p==="visibility"?this.visibility:this._unevaluatedLayout.getValue(p)}setLayoutProperty(p,_,S={}){_!=null&&this._validate(ku,`layers.${this.id}.layout.${p}`,p,_,S)||(p!=="visibility"?this._unevaluatedLayout.setValue(p,_):this.visibility=_)}getPaintProperty(p){return p.endsWith(Il)?this._transitionablePaint.getTransition(p.slice(0,-Il.length)):this._transitionablePaint.getValue(p)}setPaintProperty(p,_,S={}){if(_!=null&&this._validate(Jl,`layers.${this.id}.paint.${p}`,p,_,S))return!1;if(p.endsWith(Il))return this._transitionablePaint.setTransition(p.slice(0,-Il.length),_||void 0),!1;{const z=this._transitionablePaint._values[p],O=z.property.specification["property-type"]==="cross-faded-data-driven",V=z.value.isDataDriven(),Q=z.value;this._transitionablePaint.setValue(p,_),this._handleSpecialPaintPropertyUpdate(p);const ie=this._transitionablePaint._values[p].value;return ie.isDataDriven()||V||O||this._handleOverridablePaintPropertyUpdate(p,Q,ie)}}_handleSpecialPaintPropertyUpdate(p){}_handleOverridablePaintPropertyUpdate(p,_,S){return!1}isHidden(p){return!!(this.minzoom&&p<this.minzoom)||!!(this.maxzoom&&p>=this.maxzoom)||this.visibility==="none"}updateTransitions(p){this._transitioningPaint=this._transitionablePaint.transitioned(p,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(p,_){p.getCrossfadeParameters&&(this._crossfadeParameters=p.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(p,void 0,_)),this.paint=this._transitioningPaint.possiblyEvaluate(p,void 0,_)}serialize(){const p={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(p.layout=p.layout||{},p.layout.visibility=this.visibility),X(p,(_,S)=>!(_===void 0||S==="layout"&&!Object.keys(_).length||S==="paint"&&!Object.keys(_).length))}_validate(p,_,S,z,O={}){return(!O||O.validate!==!1)&&Ca(this,p.call(ks,{key:_,layerType:this.type,objectKey:S,value:z,styleSpec:yr,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const p in this.paint._values){const _=this.paint.get(p);if(_ instanceof al&&Lo(_.property.specification)&&(_.value.kind==="source"||_.value.kind==="composite")&&_.value.isStateDependent)return!0}return!1}}const r0={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class Tl{constructor(p,_){this._structArray=p,this._pos1=_*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class ca{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(p,_){return p._trim(),_&&(p.isTransferred=!0,_.push(p.arrayBuffer)),{length:p.length,arrayBuffer:p.arrayBuffer}}static deserialize(p){const _=Object.create(this.prototype);return _.arrayBuffer=p.arrayBuffer,_.length=p.length,_.capacity=p.arrayBuffer.byteLength/_.bytesPerElement,_._refreshViews(),_}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(p){this.reserve(p),this.length=p}reserve(p){if(p>this.capacity){this.capacity=Math.max(p,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const _=this.uint8;this._refreshViews(),_&&this.uint8.set(_)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function xa(y,p=1){let _=0,S=0;return{members:y.map(z=>{const O=r0[z.type].BYTES_PER_ELEMENT,V=_=Oc(_,Math.max(p,O)),Q=z.components||1;return S=Math.max(S,O),_+=O*Q,{name:z.name,type:z.type,components:Q,offset:V}}),size:Oc(_,Math.max(S,p)),alignment:p}}function Oc(y,p){return Math.ceil(y/p)*p}class as extends ca{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(p,_){const S=this.length;return this.resize(S+1),this.emplace(S,p,_)}emplace(p,_,S){const z=2*p;return this.int16[z+0]=_,this.int16[z+1]=S,p}}as.prototype.bytesPerElement=4,Pn("StructArrayLayout2i4",as);class M extends ca{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(p,_,S,z){const O=this.length;return this.resize(O+1),this.emplace(O,p,_,S,z)}emplace(p,_,S,z,O){const V=4*p;return this.int16[V+0]=_,this.int16[V+1]=S,this.int16[V+2]=z,this.int16[V+3]=O,p}}M.prototype.bytesPerElement=8,Pn("StructArrayLayout4i8",M);class d extends ca{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(p,_,S,z,O,V){const Q=this.length;return this.resize(Q+1),this.emplace(Q,p,_,S,z,O,V)}emplace(p,_,S,z,O,V,Q){const ie=6*p;return this.int16[ie+0]=_,this.int16[ie+1]=S,this.int16[ie+2]=z,this.int16[ie+3]=O,this.int16[ie+4]=V,this.int16[ie+5]=Q,p}}d.prototype.bytesPerElement=12,Pn("StructArrayLayout2i4i12",d);class k extends ca{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(p,_,S,z,O,V){const Q=this.length;return this.resize(Q+1),this.emplace(Q,p,_,S,z,O,V)}emplace(p,_,S,z,O,V,Q){const ie=4*p,he=8*p;return this.int16[ie+0]=_,this.int16[ie+1]=S,this.uint8[he+4]=z,this.uint8[he+5]=O,this.uint8[he+6]=V,this.uint8[he+7]=Q,p}}k.prototype.bytesPerElement=8,Pn("StructArrayLayout2i4ub8",k);class C extends ca{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(p,_){const S=this.length;return this.resize(S+1),this.emplace(S,p,_)}emplace(p,_,S){const z=2*p;return this.float32[z+0]=_,this.float32[z+1]=S,p}}C.prototype.bytesPerElement=8,Pn("StructArrayLayout2f8",C);class D extends ca{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(p,_,S,z,O,V,Q,ie,he,Ee){const Me=this.length;return this.resize(Me+1),this.emplace(Me,p,_,S,z,O,V,Q,ie,he,Ee)}emplace(p,_,S,z,O,V,Q,ie,he,Ee,Me){const Ve=10*p;return this.uint16[Ve+0]=_,this.uint16[Ve+1]=S,this.uint16[Ve+2]=z,this.uint16[Ve+3]=O,this.uint16[Ve+4]=V,this.uint16[Ve+5]=Q,this.uint16[Ve+6]=ie,this.uint16[Ve+7]=he,this.uint16[Ve+8]=Ee,this.uint16[Ve+9]=Me,p}}D.prototype.bytesPerElement=20,Pn("StructArrayLayout10ui20",D);class q extends ca{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(p,_,S,z,O,V,Q,ie,he,Ee,Me,Ve){const Qe=this.length;return this.resize(Qe+1),this.emplace(Qe,p,_,S,z,O,V,Q,ie,he,Ee,Me,Ve)}emplace(p,_,S,z,O,V,Q,ie,he,Ee,Me,Ve,Qe){const tt=12*p;return this.int16[tt+0]=_,this.int16[tt+1]=S,this.int16[tt+2]=z,this.int16[tt+3]=O,this.uint16[tt+4]=V,this.uint16[tt+5]=Q,this.uint16[tt+6]=ie,this.uint16[tt+7]=he,this.int16[tt+8]=Ee,this.int16[tt+9]=Me,this.int16[tt+10]=Ve,this.int16[tt+11]=Qe,p}}q.prototype.bytesPerElement=24,Pn("StructArrayLayout4i4ui4i24",q);class Y extends ca{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(p,_,S){const z=this.length;return this.resize(z+1),this.emplace(z,p,_,S)}emplace(p,_,S,z){const O=3*p;return this.float32[O+0]=_,this.float32[O+1]=S,this.float32[O+2]=z,p}}Y.prototype.bytesPerElement=12,Pn("StructArrayLayout3f12",Y);class oe extends ca{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(p){const _=this.length;return this.resize(_+1),this.emplace(_,p)}emplace(p,_){return this.uint32[1*p+0]=_,p}}oe.prototype.bytesPerElement=4,Pn("StructArrayLayout1ul4",oe);class le extends ca{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(p,_,S,z,O,V,Q,ie,he){const Ee=this.length;return this.resize(Ee+1),this.emplace(Ee,p,_,S,z,O,V,Q,ie,he)}emplace(p,_,S,z,O,V,Q,ie,he,Ee){const Me=10*p,Ve=5*p;return this.int16[Me+0]=_,this.int16[Me+1]=S,this.int16[Me+2]=z,this.int16[Me+3]=O,this.int16[Me+4]=V,this.int16[Me+5]=Q,this.uint32[Ve+3]=ie,this.uint16[Me+8]=he,this.uint16[Me+9]=Ee,p}}le.prototype.bytesPerElement=20,Pn("StructArrayLayout6i1ul2ui20",le);class de extends ca{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(p,_,S,z,O,V){const Q=this.length;return this.resize(Q+1),this.emplace(Q,p,_,S,z,O,V)}emplace(p,_,S,z,O,V,Q){const ie=6*p;return this.int16[ie+0]=_,this.int16[ie+1]=S,this.int16[ie+2]=z,this.int16[ie+3]=O,this.int16[ie+4]=V,this.int16[ie+5]=Q,p}}de.prototype.bytesPerElement=12,Pn("StructArrayLayout2i2i2i12",de);class Se extends ca{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(p,_,S,z,O){const V=this.length;return this.resize(V+1),this.emplace(V,p,_,S,z,O)}emplace(p,_,S,z,O,V){const Q=4*p,ie=8*p;return this.float32[Q+0]=_,this.float32[Q+1]=S,this.float32[Q+2]=z,this.int16[ie+6]=O,this.int16[ie+7]=V,p}}Se.prototype.bytesPerElement=16,Pn("StructArrayLayout2f1f2i16",Se);class je extends ca{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(p,_,S,z){const O=this.length;return this.resize(O+1),this.emplace(O,p,_,S,z)}emplace(p,_,S,z,O){const V=12*p,Q=3*p;return this.uint8[V+0]=_,this.uint8[V+1]=S,this.float32[Q+1]=z,this.float32[Q+2]=O,p}}je.prototype.bytesPerElement=12,Pn("StructArrayLayout2ub2f12",je);class Je extends ca{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(p,_,S){const z=this.length;return this.resize(z+1),this.emplace(z,p,_,S)}emplace(p,_,S,z){const O=3*p;return this.uint16[O+0]=_,this.uint16[O+1]=S,this.uint16[O+2]=z,p}}Je.prototype.bytesPerElement=6,Pn("StructArrayLayout3ui6",Je);class Et extends ca{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(p,_,S,z,O,V,Q,ie,he,Ee,Me,Ve,Qe,tt,jt,Ot,xr){const jr=this.length;return this.resize(jr+1),this.emplace(jr,p,_,S,z,O,V,Q,ie,he,Ee,Me,Ve,Qe,tt,jt,Ot,xr)}emplace(p,_,S,z,O,V,Q,ie,he,Ee,Me,Ve,Qe,tt,jt,Ot,xr,jr){const dr=24*p,Lr=12*p,an=48*p;return this.int16[dr+0]=_,this.int16[dr+1]=S,this.uint16[dr+2]=z,this.uint16[dr+3]=O,this.uint32[Lr+2]=V,this.uint32[Lr+3]=Q,this.uint32[Lr+4]=ie,this.uint16[dr+10]=he,this.uint16[dr+11]=Ee,this.uint16[dr+12]=Me,this.float32[Lr+7]=Ve,this.float32[Lr+8]=Qe,this.uint8[an+36]=tt,this.uint8[an+37]=jt,this.uint8[an+38]=Ot,this.uint32[Lr+10]=xr,this.int16[dr+22]=jr,p}}Et.prototype.bytesPerElement=48,Pn("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",Et);class mt extends ca{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(p,_,S,z,O,V,Q,ie,he,Ee,Me,Ve,Qe,tt,jt,Ot,xr,jr,dr,Lr,an,tn,ri,fi,Gn,Bn,Tn,Hn){const qn=this.length;return this.resize(qn+1),this.emplace(qn,p,_,S,z,O,V,Q,ie,he,Ee,Me,Ve,Qe,tt,jt,Ot,xr,jr,dr,Lr,an,tn,ri,fi,Gn,Bn,Tn,Hn)}emplace(p,_,S,z,O,V,Q,ie,he,Ee,Me,Ve,Qe,tt,jt,Ot,xr,jr,dr,Lr,an,tn,ri,fi,Gn,Bn,Tn,Hn,qn){const wn=34*p,Si=17*p;return this.int16[wn+0]=_,this.int16[wn+1]=S,this.int16[wn+2]=z,this.int16[wn+3]=O,this.int16[wn+4]=V,this.int16[wn+5]=Q,this.int16[wn+6]=ie,this.int16[wn+7]=he,this.uint16[wn+8]=Ee,this.uint16[wn+9]=Me,this.uint16[wn+10]=Ve,this.uint16[wn+11]=Qe,this.uint16[wn+12]=tt,this.uint16[wn+13]=jt,this.uint16[wn+14]=Ot,this.uint16[wn+15]=xr,this.uint16[wn+16]=jr,this.uint16[wn+17]=dr,this.uint16[wn+18]=Lr,this.uint16[wn+19]=an,this.uint16[wn+20]=tn,this.uint16[wn+21]=ri,this.uint16[wn+22]=fi,this.uint32[Si+12]=Gn,this.float32[Si+13]=Bn,this.float32[Si+14]=Tn,this.float32[Si+15]=Hn,this.float32[Si+16]=qn,p}}mt.prototype.bytesPerElement=68,Pn("StructArrayLayout8i15ui1ul4f68",mt);class wt extends ca{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(p){const _=this.length;return this.resize(_+1),this.emplace(_,p)}emplace(p,_){return this.float32[1*p+0]=_,p}}wt.prototype.bytesPerElement=4,Pn("StructArrayLayout1f4",wt);class tr extends ca{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(p,_,S){const z=this.length;return this.resize(z+1),this.emplace(z,p,_,S)}emplace(p,_,S,z){const O=3*p;return this.int16[O+0]=_,this.int16[O+1]=S,this.int16[O+2]=z,p}}tr.prototype.bytesPerElement=6,Pn("StructArrayLayout3i6",tr);class cr extends ca{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(p,_,S){const z=this.length;return this.resize(z+1),this.emplace(z,p,_,S)}emplace(p,_,S,z){const O=4*p;return this.uint32[2*p+0]=_,this.uint16[O+2]=S,this.uint16[O+3]=z,p}}cr.prototype.bytesPerElement=8,Pn("StructArrayLayout1ul2ui8",cr);class Ar extends ca{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(p,_){const S=this.length;return this.resize(S+1),this.emplace(S,p,_)}emplace(p,_,S){const z=2*p;return this.uint16[z+0]=_,this.uint16[z+1]=S,p}}Ar.prototype.bytesPerElement=4,Pn("StructArrayLayout2ui4",Ar);class Dt extends ca{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(p){const _=this.length;return this.resize(_+1),this.emplace(_,p)}emplace(p,_){return this.uint16[1*p+0]=_,p}}Dt.prototype.bytesPerElement=2,Pn("StructArrayLayout1ui2",Dt);class Tr extends ca{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(p,_,S,z){const O=this.length;return this.resize(O+1),this.emplace(O,p,_,S,z)}emplace(p,_,S,z,O){const V=4*p;return this.float32[V+0]=_,this.float32[V+1]=S,this.float32[V+2]=z,this.float32[V+3]=O,p}}Tr.prototype.bytesPerElement=16,Pn("StructArrayLayout4f16",Tr);class Ir extends Tl{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new ht(this.anchorPointX,this.anchorPointY)}}Ir.prototype.size=20;class Zr extends le{get(p){return new Ir(this,p)}}Pn("CollisionBoxArray",Zr);class Gr extends Tl{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(p){this._structArray.uint8[this._pos1+37]=p}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(p){this._structArray.uint8[this._pos1+38]=p}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(p){this._structArray.uint32[this._pos4+10]=p}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}Gr.prototype.size=48;class dn extends Et{get(p){return new Gr(this,p)}}Pn("PlacedSymbolArray",dn);class qr extends Tl{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(p){this._structArray.uint32[this._pos4+12]=p}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get textOffset0(){return this._structArray.float32[this._pos4+14]}get textOffset1(){return this._structArray.float32[this._pos4+15]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+16]}}qr.prototype.size=68;class Mn extends mt{get(p){return new qr(this,p)}}Pn("SymbolInstanceArray",Mn);class En extends wt{getoffsetX(p){return this.float32[1*p+0]}}Pn("GlyphOffsetArray",En);class Un extends tr{getx(p){return this.int16[3*p+0]}gety(p){return this.int16[3*p+1]}gettileUnitDistanceFromAnchor(p){return this.int16[3*p+2]}}Pn("SymbolLineVertexArray",Un);class Li extends Tl{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}Li.prototype.size=8;class Di extends cr{get(p){return new Li(this,p)}}Pn("FeatureIndexArray",Di);class N extends as{}class $ extends as{}class re extends as{}class fe extends d{}class Te extends k{}class Oe extends C{}class Ue extends D{}class Ke extends q{}class rt extends Y{}class gt extends oe{}class rr extends de{}class Er extends je{}class kr extends Je{}class hr extends Ar{}const fn=xa([{name:"a_pos",components:2,type:"Int16"}],4),{members:Dr}=fn;class zt{constructor(p=[]){this.segments=p}prepareSegment(p,_,S,z){let O=this.segments[this.segments.length-1];return p>zt.MAX_VERTEX_ARRAY_LENGTH&&se(`Max vertices per segment is ${zt.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${p}`),(!O||O.vertexLength+p>zt.MAX_VERTEX_ARRAY_LENGTH||O.sortKey!==z)&&(O={vertexOffset:_.length,primitiveOffset:S.length,vertexLength:0,primitiveLength:0},z!==void 0&&(O.sortKey=z),this.segments.push(O)),O}get(){return this.segments}destroy(){for(const p of this.segments)for(const _ in p.vaos)p.vaos[_].destroy()}static simpleSegment(p,_,S,z){return new zt([{vertexOffset:p,primitiveOffset:_,vertexLength:S,primitiveLength:z,vaos:{},sortKey:0}])}}function Xt(y,p){return 256*(y=T(Math.floor(y),0,255))+T(Math.floor(p),0,255)}zt.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,Pn("SegmentVector",zt);const Hr=xa([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]);var Qr={exports:{}},Wr={exports:{}};Wr.exports=function(y,p){var _,S,z,O,V,Q,ie,he;for(S=y.length-(_=3&y.length),z=p,V=3432918353,Q=461845907,he=0;he<S;)ie=255&y.charCodeAt(he)|(255&y.charCodeAt(++he))<<8|(255&y.charCodeAt(++he))<<16|(255&y.charCodeAt(++he))<<24,++he,z=27492+(65535&(O=5*(65535&(z=(z^=ie=(65535&(ie=(ie=(65535&ie)*V+(((ie>>>16)*V&65535)<<16)&4294967295)<<15|ie>>>17))*Q+(((ie>>>16)*Q&65535)<<16)&4294967295)<<13|z>>>19))+((5*(z>>>16)&65535)<<16)&4294967295))+((58964+(O>>>16)&65535)<<16);switch(ie=0,_){case 3:ie^=(255&y.charCodeAt(he+2))<<16;case 2:ie^=(255&y.charCodeAt(he+1))<<8;case 1:z^=ie=(65535&(ie=(ie=(65535&(ie^=255&y.charCodeAt(he)))*V+(((ie>>>16)*V&65535)<<16)&4294967295)<<15|ie>>>17))*Q+(((ie>>>16)*Q&65535)<<16)&4294967295}return z^=y.length,z=2246822507*(65535&(z^=z>>>16))+((2246822507*(z>>>16)&65535)<<16)&4294967295,z=3266489909*(65535&(z^=z>>>13))+((3266489909*(z>>>16)&65535)<<16)&4294967295,(z^=z>>>16)>>>0};var Nn={exports:{}};Nn.exports=function(y,p){for(var _,S=y.length,z=p^S,O=0;S>=4;)_=1540483477*(65535&(_=255&y.charCodeAt(O)|(255&y.charCodeAt(++O))<<8|(255&y.charCodeAt(++O))<<16|(255&y.charCodeAt(++O))<<24))+((1540483477*(_>>>16)&65535)<<16),z=1540483477*(65535&z)+((1540483477*(z>>>16)&65535)<<16)^(_=1540483477*(65535&(_^=_>>>24))+((1540483477*(_>>>16)&65535)<<16)),S-=4,++O;switch(S){case 3:z^=(255&y.charCodeAt(O+2))<<16;case 2:z^=(255&y.charCodeAt(O+1))<<8;case 1:z=1540483477*(65535&(z^=255&y.charCodeAt(O)))+((1540483477*(z>>>16)&65535)<<16)}return z=1540483477*(65535&(z^=z>>>13))+((1540483477*(z>>>16)&65535)<<16),(z^=z>>>15)>>>0};var Cn=Wr.exports,Ci=Nn.exports;Qr.exports=Cn,Qr.exports.murmur3=Cn,Qr.exports.murmur2=Ci;class Rn{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(p,_,S,z){this.ids.push(Co(p)),this.positions.push(_,S,z)}getPositions(p){if(!this.indexed)throw new Error("Trying to get index, but feature positions are not indexed");const _=Co(p);let S=0,z=this.ids.length-1;for(;S<z;){const V=S+z>>1;this.ids[V]>=_?z=V:S=V+1}const O=[];for(;this.ids[S]===_;)O.push({index:this.positions[3*S],start:this.positions[3*S+1],end:this.positions[3*S+2]}),S++;return O}static serialize(p,_){const S=new Float64Array(p.ids),z=new Uint32Array(p.positions);return Po(S,z,0,S.length-1),_&&_.push(S.buffer,z.buffer),{ids:S,positions:z}}static deserialize(p){const _=new Rn;return _.ids=p.ids,_.positions=p.positions,_.indexed=!0,_}}function Co(y){const p=+y;return!isNaN(p)&&p<=Number.MAX_SAFE_INTEGER?p:Qr.exports(String(y))}function Po(y,p,_,S){for(;_<S;){const z=y[_+S>>1];let O=_-1,V=S+1;for(;;){do O++;while(y[O]<z);do V--;while(y[V]>z);if(O>=V)break;io(y,O,V),io(p,3*O,3*V),io(p,3*O+1,3*V+1),io(p,3*O+2,3*V+2)}V-_<S-V?(Po(y,p,_,V),_=V+1):(Po(y,p,V+1,S),S=V)}}function io(y,p,_){const S=y[p];y[p]=y[_],y[_]=S}Pn("FeaturePositionMap",Rn);class $i{constructor(p,_){this.gl=p.gl,this.location=_}}class Eo extends $i{constructor(p,_){super(p,_),this.current=0}set(p){this.current!==p&&(this.current=p,this.gl.uniform1f(this.location,p))}}class Mo extends $i{constructor(p,_){super(p,_),this.current=[0,0,0,0]}set(p){p[0]===this.current[0]&&p[1]===this.current[1]&&p[2]===this.current[2]&&p[3]===this.current[3]||(this.current=p,this.gl.uniform4f(this.location,p[0],p[1],p[2],p[3]))}}class Ki extends $i{constructor(p,_){super(p,_),this.current=st.transparent}set(p){p.r===this.current.r&&p.g===this.current.g&&p.b===this.current.b&&p.a===this.current.a||(this.current=p,this.gl.uniform4f(this.location,p.r,p.g,p.b,p.a))}}const Fa=new Float32Array(16);function Fi(y){return[Xt(255*y.r,255*y.g),Xt(255*y.b,255*y.a)]}class pa{constructor(p,_,S){this.value=p,this.uniformNames=_.map(z=>`u_${z}`),this.type=S}setUniform(p,_,S){p.set(S.constantOr(this.value))}getBinding(p,_,S){return this.type==="color"?new Ki(p,_):new Eo(p,_)}}class Ha{constructor(p,_){this.uniformNames=_.map(S=>`u_${S}`),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(p,_){this.pixelRatioFrom=_.pixelRatio,this.pixelRatioTo=p.pixelRatio,this.patternFrom=_.tlbr,this.patternTo=p.tlbr}setUniform(p,_,S,z){const O=z==="u_pattern_to"?this.patternTo:z==="u_pattern_from"?this.patternFrom:z==="u_pixel_ratio_to"?this.pixelRatioTo:z==="u_pixel_ratio_from"?this.pixelRatioFrom:null;O&&p.set(O)}getBinding(p,_,S){return S.substr(0,9)==="u_pattern"?new Mo(p,_):new Eo(p,_)}}class vo{constructor(p,_,S,z){this.expression=p,this.type=S,this.maxValue=0,this.paintVertexAttributes=_.map(O=>({name:`a_${O}`,type:"Float32",components:S==="color"?2:1,offset:0})),this.paintVertexArray=new z}populatePaintArray(p,_,S,z,O){const V=this.paintVertexArray.length,Q=this.expression.evaluate(new Go(0),_,{},z,[],O);this.paintVertexArray.resize(p),this._setPaintValue(V,p,Q)}updatePaintArray(p,_,S,z){const O=this.expression.evaluate({zoom:0},S,z);this._setPaintValue(p,_,O)}_setPaintValue(p,_,S){if(this.type==="color"){const z=Fi(S);for(let O=p;O<_;O++)this.paintVertexArray.emplace(O,z[0],z[1])}else{for(let z=p;z<_;z++)this.paintVertexArray.emplace(z,S);this.maxValue=Math.max(this.maxValue,Math.abs(S))}}upload(p){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=p.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class ya{constructor(p,_,S,z,O,V){this.expression=p,this.uniformNames=_.map(Q=>`u_${Q}_t`),this.type=S,this.useIntegerZoom=z,this.zoom=O,this.maxValue=0,this.paintVertexAttributes=_.map(Q=>({name:`a_${Q}`,type:"Float32",components:S==="color"?4:2,offset:0})),this.paintVertexArray=new V}populatePaintArray(p,_,S,z,O){const V=this.expression.evaluate(new Go(this.zoom),_,{},z,[],O),Q=this.expression.evaluate(new Go(this.zoom+1),_,{},z,[],O),ie=this.paintVertexArray.length;this.paintVertexArray.resize(p),this._setPaintValue(ie,p,V,Q)}updatePaintArray(p,_,S,z){const O=this.expression.evaluate({zoom:this.zoom},S,z),V=this.expression.evaluate({zoom:this.zoom+1},S,z);this._setPaintValue(p,_,O,V)}_setPaintValue(p,_,S,z){if(this.type==="color"){const O=Fi(S),V=Fi(z);for(let Q=p;Q<_;Q++)this.paintVertexArray.emplace(Q,O[0],O[1],V[0],V[1])}else{for(let O=p;O<_;O++)this.paintVertexArray.emplace(O,S,z);this.maxValue=Math.max(this.maxValue,Math.abs(S),Math.abs(z))}}upload(p){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=p.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(p,_){const S=this.useIntegerZoom?Math.floor(_.zoom):_.zoom,z=T(this.expression.interpolationFactor(S,this.zoom,this.zoom+1),0,1);p.set(z)}getBinding(p,_,S){return new Eo(p,_)}}class Ba{constructor(p,_,S,z,O,V){this.expression=p,this.type=_,this.useIntegerZoom=S,this.zoom=z,this.layerId=V,this.zoomInPaintVertexArray=new O,this.zoomOutPaintVertexArray=new O}populatePaintArray(p,_,S){const z=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(p),this.zoomOutPaintVertexArray.resize(p),this._setPaintValues(z,p,_.patterns&&_.patterns[this.layerId],S)}updatePaintArray(p,_,S,z,O){this._setPaintValues(p,_,S.patterns&&S.patterns[this.layerId],O)}_setPaintValues(p,_,S,z){if(!z||!S)return;const{min:O,mid:V,max:Q}=S,ie=z[O],he=z[V],Ee=z[Q];if(ie&&he&&Ee)for(let Me=p;Me<_;Me++)this.zoomInPaintVertexArray.emplace(Me,he.tl[0],he.tl[1],he.br[0],he.br[1],ie.tl[0],ie.tl[1],ie.br[0],ie.br[1],he.pixelRatio,ie.pixelRatio),this.zoomOutPaintVertexArray.emplace(Me,he.tl[0],he.tl[1],he.br[0],he.br[1],Ee.tl[0],Ee.tl[1],Ee.br[0],Ee.br[1],he.pixelRatio,Ee.pixelRatio)}upload(p){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=p.createVertexBuffer(this.zoomInPaintVertexArray,Hr.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=p.createVertexBuffer(this.zoomOutPaintVertexArray,Hr.members,this.expression.isStateDependent))}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class Wa{constructor(p,_,S){this.binders={},this._buffers=[];const z=[];for(const O in p.paint._values){if(!S(O))continue;const V=p.paint.get(O);if(!(V instanceof al&&Lo(V.property.specification)))continue;const Q=ss(O,p.type),ie=V.value,he=V.property.specification.type,Ee=V.property.useIntegerZoom,Me=V.property.specification["property-type"],Ve=Me==="cross-faded"||Me==="cross-faded-data-driven";if(ie.kind==="constant")this.binders[O]=Ve?new Ha(ie.value,Q):new pa(ie.value,Q,he),z.push(`/u_${O}`);else if(ie.kind==="source"||Ve){const Qe=Os(O,he,"source");this.binders[O]=Ve?new Ba(ie,he,Ee,_,Qe,p.id):new vo(ie,Q,he,Qe),z.push(`/a_${O}`)}else{const Qe=Os(O,he,"composite");this.binders[O]=new ya(ie,Q,he,Ee,_,Qe),z.push(`/z_${O}`)}}this.cacheKey=z.sort().join("")}getMaxValue(p){const _=this.binders[p];return _ instanceof vo||_ instanceof ya?_.maxValue:0}populatePaintArrays(p,_,S,z,O){for(const V in this.binders){const Q=this.binders[V];(Q instanceof vo||Q instanceof ya||Q instanceof Ba)&&Q.populatePaintArray(p,_,S,z,O)}}setConstantPatternPositions(p,_){for(const S in this.binders){const z=this.binders[S];z instanceof Ha&&z.setConstantPatternPositions(p,_)}}updatePaintArrays(p,_,S,z,O){let V=!1;for(const Q in p){const ie=_.getPositions(Q);for(const he of ie){const Ee=S.feature(he.index);for(const Me in this.binders){const Ve=this.binders[Me];if((Ve instanceof vo||Ve instanceof ya||Ve instanceof Ba)&&Ve.expression.isStateDependent===!0){const Qe=z.paint.get(Me);Ve.expression=Qe.value,Ve.updatePaintArray(he.start,he.end,Ee,p[Q],O),V=!0}}}}return V}defines(){const p=[];for(const _ in this.binders){const S=this.binders[_];(S instanceof pa||S instanceof Ha)&&p.push(...S.uniformNames.map(z=>`#define HAS_UNIFORM_${z}`))}return p}getBinderAttributes(){const p=[];for(const _ in this.binders){const S=this.binders[_];if(S instanceof vo||S instanceof ya)for(let z=0;z<S.paintVertexAttributes.length;z++)p.push(S.paintVertexAttributes[z].name);else if(S instanceof Ba)for(let z=0;z<Hr.members.length;z++)p.push(Hr.members[z].name)}return p}getBinderUniforms(){const p=[];for(const _ in this.binders){const S=this.binders[_];if(S instanceof pa||S instanceof Ha||S instanceof ya)for(const z of S.uniformNames)p.push(z)}return p}getPaintVertexBuffers(){return this._buffers}getUniforms(p,_){const S=[];for(const z in this.binders){const O=this.binders[z];if(O instanceof pa||O instanceof Ha||O instanceof ya){for(const V of O.uniformNames)if(_[V]){const Q=O.getBinding(p,_[V],V);S.push({name:V,property:z,binding:Q})}}}return S}setUniforms(p,_,S,z){for(const{name:O,property:V,binding:Q}of _)this.binders[V].setUniform(Q,z,S.get(V),O)}updatePaintBuffers(p){this._buffers=[];for(const _ in this.binders){const S=this.binders[_];if(p&&S instanceof Ba){const z=p.fromScale===2?S.zoomInPaintVertexBuffer:S.zoomOutPaintVertexBuffer;z&&this._buffers.push(z)}else(S instanceof vo||S instanceof ya)&&S.paintVertexBuffer&&this._buffers.push(S.paintVertexBuffer)}}upload(p){for(const _ in this.binders){const S=this.binders[_];(S instanceof vo||S instanceof ya||S instanceof Ba)&&S.upload(p)}this.updatePaintBuffers()}destroy(){for(const p in this.binders){const _=this.binders[p];(_ instanceof vo||_ instanceof ya||_ instanceof Ba)&&_.destroy()}}}class Ho{constructor(p,_,S=()=>!0){this.programConfigurations={};for(const z of p)this.programConfigurations[z.id]=new Wa(z,_,S);this.needsUpload=!1,this._featureMap=new Rn,this._bufferOffset=0}populatePaintArrays(p,_,S,z,O,V){for(const Q in this.programConfigurations)this.programConfigurations[Q].populatePaintArrays(p,_,z,O,V);_.id!==void 0&&this._featureMap.add(_.id,S,this._bufferOffset,p),this._bufferOffset=p,this.needsUpload=!0}updatePaintArrays(p,_,S,z){for(const O of S)this.needsUpload=this.programConfigurations[O.id].updatePaintArrays(p,this._featureMap,_,O,z)||this.needsUpload}get(p){return this.programConfigurations[p]}upload(p){if(this.needsUpload){for(const _ in this.programConfigurations)this.programConfigurations[_].upload(p);this.needsUpload=!1}}destroy(){for(const p in this.programConfigurations)this.programConfigurations[p].destroy()}}function ss(y,p){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[y]||[y.replace(`${p}-`,"").replace(/-/g,"_")]}function Os(y,p,_){const S={color:{source:C,composite:Tr},number:{source:wt,composite:C}},z=function(O){return{"line-pattern":{source:Ue,composite:Ue},"fill-pattern":{source:Ue,composite:Ue},"fill-extrusion-pattern":{source:Ue,composite:Ue}}[O]}(y);return z&&z[_]||S[p][_]}Pn("ConstantBinder",pa),Pn("CrossFadedConstantBinder",Ha),Pn("SourceExpressionBinder",vo),Pn("CrossFadedCompositeBinder",Ba),Pn("CompositeExpressionBinder",ya),Pn("ProgramConfiguration",Wa,{omit:["_buffers"]}),Pn("ProgramConfigurationSet",Ho);var Vo=8192;const Ia=Math.pow(2,14)-1,tu=-Ia-1;function Fs(y){const p=Vo/y.extent,_=y.loadGeometry();for(let S=0;S<_.length;S++){const z=_[S];for(let O=0;O<z.length;O++){const V=z[O],Q=Math.round(V.x*p),ie=Math.round(V.y*p);V.x=T(Q,tu,Ia),V.y=T(ie,tu,Ia),(Q<V.x||Q>V.x+1||ie<V.y||ie>V.y+1)&&se("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return _}function Ys(y,p){return{type:y.type,id:y.id,properties:y.properties,geometry:p?Fs(y):[]}}function Js(y,p,_,S,z){y.emplaceBack(2*p+(S+1)/2,2*_+(z+1)/2)}class da{constructor(p){this.zoom=p.zoom,this.overscaling=p.overscaling,this.layers=p.layers,this.layerIds=this.layers.map(_=>_.id),this.index=p.index,this.hasPattern=!1,this.layoutVertexArray=new $,this.indexArray=new kr,this.segments=new zt,this.programConfigurations=new Ho(p.layers,p.zoom),this.stateDependentLayerIds=this.layers.filter(_=>_.isStateDependent()).map(_=>_.id)}populate(p,_,S){const z=this.layers[0],O=[];let V=null,Q=!1;z.type==="circle"&&(V=z.layout.get("circle-sort-key"),Q=!V.isConstant());for(const{feature:ie,id:he,index:Ee,sourceLayerIndex:Me}of p){const Ve=this.layers[0]._featureFilter.needGeometry,Qe=Ys(ie,Ve);if(!this.layers[0]._featureFilter.filter(new Go(this.zoom),Qe,S))continue;const tt=Q?V.evaluate(Qe,{},S):void 0,jt={id:he,properties:ie.properties,type:ie.type,sourceLayerIndex:Me,index:Ee,geometry:Ve?Qe.geometry:Fs(ie),patterns:{},sortKey:tt};O.push(jt)}Q&&O.sort((ie,he)=>ie.sortKey-he.sortKey);for(const ie of O){const{geometry:he,index:Ee,sourceLayerIndex:Me}=ie,Ve=p[Ee].feature;this.addFeature(ie,he,Ee,S),_.featureIndex.insert(Ve,he,Ee,Me,this.index)}}update(p,_,S){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(p,_,this.stateDependentLayers,S)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(p){this.uploaded||(this.layoutVertexBuffer=p.createVertexBuffer(this.layoutVertexArray,Dr),this.indexBuffer=p.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(p),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(p,_,S,z){for(const O of _)for(const V of O){const Q=V.x,ie=V.y;if(Q<0||Q>=Vo||ie<0||ie>=Vo)continue;const he=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,p.sortKey),Ee=he.vertexLength;Js(this.layoutVertexArray,Q,ie,-1,-1),Js(this.layoutVertexArray,Q,ie,1,-1),Js(this.layoutVertexArray,Q,ie,1,1),Js(this.layoutVertexArray,Q,ie,-1,1),this.indexArray.emplaceBack(Ee,Ee+1,Ee+2),this.indexArray.emplaceBack(Ee,Ee+3,Ee+2),he.vertexLength+=4,he.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,p,S,{},z)}}function x0(y,p){for(let _=0;_<y.length;_++)if(Ju(p,y[_]))return!0;for(let _=0;_<p.length;_++)if(Ju(y,p[_]))return!0;return!!dc(y,p)}function G0(y,p,_){return!!Ju(y,p)||!!Bs(p,y,_)}function Ll(y,p){if(y.length===1)return ru(p,y[0]);for(let _=0;_<p.length;_++){const S=p[_];for(let z=0;z<S.length;z++)if(Ju(y,S[z]))return!0}for(let _=0;_<y.length;_++)if(ru(p,y[_]))return!0;for(let _=0;_<p.length;_++)if(dc(y,p[_]))return!0;return!1}function fa(y,p,_){if(y.length>1){if(dc(y,p))return!0;for(let S=0;S<p.length;S++)if(Bs(p[S],y,_))return!0}for(let S=0;S<y.length;S++)if(Bs(y[S],p,_))return!0;return!1}function dc(y,p){if(y.length===0||p.length===0)return!1;for(let _=0;_<y.length-1;_++){const S=y[_],z=y[_+1];for(let O=0;O<p.length-1;O++)if(k0(S,z,p[O],p[O+1]))return!0}return!1}function k0(y,p,_,S){return ce(y,_,S)!==ce(p,_,S)&&ce(y,p,_)!==ce(y,p,S)}function Bs(y,p,_){const S=_*_;if(p.length===1)return y.distSqr(p[0])<S;for(let z=1;z<p.length;z++)if(js(y,p[z-1],p[z])<S)return!0;return!1}function js(y,p,_){const S=p.distSqr(_);if(S===0)return y.distSqr(p);const z=((y.x-p.x)*(_.x-p.x)+(y.y-p.y)*(_.y-p.y))/S;return y.distSqr(z<0?p:z>1?_:_.sub(p)._mult(z)._add(p))}function ru(y,p){let _,S,z,O=!1;for(let V=0;V<y.length;V++){_=y[V];for(let Q=0,ie=_.length-1;Q<_.length;ie=Q++)S=_[Q],z=_[ie],S.y>p.y!=z.y>p.y&&p.x<(z.x-S.x)*(p.y-S.y)/(z.y-S.y)+S.x&&(O=!O)}return O}function Ju(y,p){let _=!1;for(let S=0,z=y.length-1;S<y.length;z=S++){const O=y[S],V=y[z];O.y>p.y!=V.y>p.y&&p.x<(V.x-O.x)*(p.y-O.y)/(V.y-O.y)+O.x&&(_=!_)}return _}function A0(y,p,_){const S=_[0],z=_[2];if(y.x<S.x&&p.x<S.x||y.x>z.x&&p.x>z.x||y.y<S.y&&p.y<S.y||y.y>z.y&&p.y>z.y)return!1;const O=ce(y,p,_[0]);return O!==ce(y,p,_[1])||O!==ce(y,p,_[2])||O!==ce(y,p,_[3])}function mc(y,p,_){const S=p.paint.get(y).value;return S.kind==="constant"?S.value:_.programConfigurations.get(p.id).getMaxValue(y)}function gc(y){return Math.sqrt(y[0]*y[0]+y[1]*y[1])}function yc(y,p,_,S,z){if(!p[0]&&!p[1])return y;const O=ht.convert(p)._mult(z);_==="viewport"&&O._rotate(-S);const V=[];for(let Q=0;Q<y.length;Q++)V.push(y[Q].sub(O));return V}Pn("CircleBucket",da,{omit:["layers"]});const vc=new Bo({"circle-sort-key":new vi(yr.layout_circle["circle-sort-key"])});var Fc={paint:new Bo({"circle-radius":new vi(yr.paint_circle["circle-radius"]),"circle-color":new vi(yr.paint_circle["circle-color"]),"circle-blur":new vi(yr.paint_circle["circle-blur"]),"circle-opacity":new vi(yr.paint_circle["circle-opacity"]),"circle-translate":new oi(yr.paint_circle["circle-translate"]),"circle-translate-anchor":new oi(yr.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new oi(yr.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new oi(yr.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new vi(yr.paint_circle["circle-stroke-width"]),"circle-stroke-color":new vi(yr.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new vi(yr.paint_circle["circle-stroke-opacity"])}),layout:vc},hs=1e-6,Ja=typeof Float32Array<"u"?Float32Array:Array;function Ta(){var y=new Ja(9);return Ja!=Float32Array&&(y[1]=0,y[2]=0,y[3]=0,y[5]=0,y[6]=0,y[7]=0),y[0]=1,y[4]=1,y[8]=1,y}function nu(y){return y[0]=1,y[1]=0,y[2]=0,y[3]=0,y[4]=0,y[5]=1,y[6]=0,y[7]=0,y[8]=0,y[9]=0,y[10]=1,y[11]=0,y[12]=0,y[13]=0,y[14]=0,y[15]=1,y}function n0(y,p,_){var S=p[0],z=p[1],O=p[2],V=p[3],Q=p[4],ie=p[5],he=p[6],Ee=p[7],Me=p[8],Ve=p[9],Qe=p[10],tt=p[11],jt=p[12],Ot=p[13],xr=p[14],jr=p[15],dr=_[0],Lr=_[1],an=_[2],tn=_[3];return y[0]=dr*S+Lr*Q+an*Me+tn*jt,y[1]=dr*z+Lr*ie+an*Ve+tn*Ot,y[2]=dr*O+Lr*he+an*Qe+tn*xr,y[3]=dr*V+Lr*Ee+an*tt+tn*jr,y[4]=(dr=_[4])*S+(Lr=_[5])*Q+(an=_[6])*Me+(tn=_[7])*jt,y[5]=dr*z+Lr*ie+an*Ve+tn*Ot,y[6]=dr*O+Lr*he+an*Qe+tn*xr,y[7]=dr*V+Lr*Ee+an*tt+tn*jr,y[8]=(dr=_[8])*S+(Lr=_[9])*Q+(an=_[10])*Me+(tn=_[11])*jt,y[9]=dr*z+Lr*ie+an*Ve+tn*Ot,y[10]=dr*O+Lr*he+an*Qe+tn*xr,y[11]=dr*V+Lr*Ee+an*tt+tn*jr,y[12]=(dr=_[12])*S+(Lr=_[13])*Q+(an=_[14])*Me+(tn=_[15])*jt,y[13]=dr*z+Lr*ie+an*Ve+tn*Ot,y[14]=dr*O+Lr*he+an*Qe+tn*xr,y[15]=dr*V+Lr*Ee+an*tt+tn*jr,y}Math.hypot||(Math.hypot=function(){for(var y=0,p=arguments.length;p--;)y+=arguments[p]*arguments[p];return Math.sqrt(y)});var sl,H0=n0;function E0(){var y=new Ja(3);return Ja!=Float32Array&&(y[0]=0,y[1]=0,y[2]=0),y}function i0(y,p,_){var S=new Ja(3);return S[0]=y,S[1]=p,S[2]=_,S}function va(y,p,_){var S=p[0],z=p[1],O=p[2],V=p[3];return y[0]=_[0]*S+_[4]*z+_[8]*O+_[12]*V,y[1]=_[1]*S+_[5]*z+_[9]*O+_[13]*V,y[2]=_[2]*S+_[6]*z+_[10]*O+_[14]*V,y[3]=_[3]*S+_[7]*z+_[11]*O+_[15]*V,y}function W0(){var y=new Ja(4);return Ja!=Float32Array&&(y[0]=0,y[1]=0,y[2]=0),y[3]=1,y}function ue(y,p){const _=va([],[y.x,y.y,0,1],p);return new ht(_[0]/_[3],_[1]/_[3])}E0(),sl=new Ja(4),Ja!=Float32Array&&(sl[0]=0,sl[1]=0,sl[2]=0,sl[3]=0),E0(),i0(1,0,0),i0(0,1,0),W0(),W0(),Ta(),function(){var y;y=new Ja(2),Ja!=Float32Array&&(y[0]=0,y[1]=0)}();class we extends da{}Pn("HeatmapBucket",we,{omit:["layers"]});var qe={paint:new Bo({"heatmap-radius":new vi(yr.paint_heatmap["heatmap-radius"]),"heatmap-weight":new vi(yr.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new oi(yr.paint_heatmap["heatmap-intensity"]),"heatmap-color":new wa(yr.paint_heatmap["heatmap-color"]),"heatmap-opacity":new oi(yr.paint_heatmap["heatmap-opacity"])})};function xt(y,{width:p,height:_},S,z){if(z){if(z instanceof Uint8ClampedArray)z=new Uint8Array(z.buffer);else if(z.length!==p*_*S)throw new RangeError(`mismatched image size. expected: ${z.length} but got: ${p*_*S}`)}else z=new Uint8Array(p*_*S);return y.width=p,y.height=_,y.data=z,y}function nr(y,{width:p,height:_},S){if(p===y.width&&_===y.height)return;const z=xt({},{width:p,height:_},S);sr(y,z,{x:0,y:0},{x:0,y:0},{width:Math.min(y.width,p),height:Math.min(y.height,_)},S),y.width=p,y.height=_,y.data=z.data}function sr(y,p,_,S,z,O){if(z.width===0||z.height===0)return p;if(z.width>y.width||z.height>y.height||_.x>y.width-z.width||_.y>y.height-z.height)throw new RangeError("out of range source coordinates for image copy");if(z.width>p.width||z.height>p.height||S.x>p.width-z.width||S.y>p.height-z.height)throw new RangeError("out of range destination coordinates for image copy");const V=y.data,Q=p.data;if(V===Q)throw new Error("srcData equals dstData, so image is already copied");for(let ie=0;ie<z.height;ie++){const he=((_.y+ie)*y.width+_.x)*O,Ee=((S.y+ie)*p.width+S.x)*O;for(let Me=0;Me<z.width*O;Me++)Q[Ee+Me]=V[he+Me]}return p}class Zt{constructor(p,_){xt(this,p,1,_)}resize(p){nr(this,p,1)}clone(){return new Zt({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(p,_,S,z,O){sr(p,_,S,z,O,1)}}class _r{constructor(p,_){xt(this,p,4,_)}resize(p){nr(this,p,4)}replace(p,_){_?this.data.set(p):this.data=p instanceof Uint8ClampedArray?new Uint8Array(p.buffer):p}clone(){return new _r({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(p,_,S,z,O){sr(p,_,S,z,O,4)}}function Cr(y){const p={},_=y.resolution||256,S=y.clips?y.clips.length:1,z=y.image||new _r({width:_,height:S});if(Math.log(_)/Math.LN2%1!=0)throw new Error(`width is not a power of 2 - ${_}`);const O=(V,Q,ie)=>{p[y.evaluationKey]=ie;const he=y.expression.evaluate(p);z.data[V+Q+0]=Math.floor(255*he.r/he.a),z.data[V+Q+1]=Math.floor(255*he.g/he.a),z.data[V+Q+2]=Math.floor(255*he.b/he.a),z.data[V+Q+3]=Math.floor(255*he.a)};if(y.clips)for(let V=0,Q=0;V<S;++V,Q+=4*_)for(let ie=0,he=0;ie<_;ie++,he+=4){const Ee=ie/(_-1),{start:Me,end:Ve}=y.clips[V];O(Q,he,Me*(1-Ee)+Ve*Ee)}else for(let V=0,Q=0;V<_;V++,Q+=4)O(0,Q,V/(_-1));return z}Pn("AlphaImage",Zt),Pn("RGBAImage",_r);var on={paint:new Bo({"hillshade-illumination-direction":new oi(yr.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new oi(yr.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new oi(yr.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new oi(yr.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new oi(yr.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new oi(yr.paint_hillshade["hillshade-accent-color"])})};const yn=xa([{name:"a_pos",components:2,type:"Int16"}],4),{members:Jn}=yn;var _n={exports:{}};function Kn(y,p,_){_=_||2;var S,z,O,V,Q,ie,he,Ee=p&&p.length,Me=Ee?p[0]*_:y.length,Ve=ui(y,0,Me,_,!0),Qe=[];if(!Ve||Ve.next===Ve.prev)return Qe;if(Ee&&(Ve=function(jt,Ot,xr,jr){var dr,Lr,an,tn=[];for(dr=0,Lr=Ot.length;dr<Lr;dr++)(an=ui(jt,Ot[dr]*jr,dr<Lr-1?Ot[dr+1]*jr:jt.length,jr,!1))===an.next&&(an.steiner=!0),tn.push(lo(an));for(tn.sort(ea),dr=0;dr<tn.length;dr++)xr=Qi(tn[dr],xr);return xr}(y,p,Ve,_)),y.length>80*_){S=O=y[0],z=V=y[1];for(var tt=_;tt<Me;tt+=_)(Q=y[tt])<S&&(S=Q),(ie=y[tt+1])<z&&(z=ie),Q>O&&(O=Q),ie>V&&(V=ie);he=(he=Math.max(O-S,V-z))!==0?32767/he:0}return so(Ve,Qe,_,S,z,he,0),Qe}function ui(y,p,_,S,z){var O,V;if(z===Pl(y,p,_,S)>0)for(O=p;O<_;O+=S)V=bc(O,y[O],y[O+1],V);else for(O=_-S;O>=p;O-=S)V=bc(O,y[O],y[O+1],V);return V&&uo(V,V.next)&&(Ku(V),V=V.next),V}function Gi(y,p){if(!y)return y;p||(p=y);var _,S=y;do if(_=!1,S.steiner||!uo(S,S.next)&&Pi(S.prev,S,S.next)!==0)S=S.next;else{if(Ku(S),(S=p=S.prev)===S.next)break;_=!0}while(_||S!==p);return p}function so(y,p,_,S,z,O,V){if(y){!V&&O&&function(Ee,Me,Ve,Qe){var tt=Ee;do tt.z===0&&(tt.z=bi(tt.x,tt.y,Me,Ve,Qe)),tt.prevZ=tt.prev,tt.nextZ=tt.next,tt=tt.next;while(tt!==Ee);tt.prevZ.nextZ=null,tt.prevZ=null,function(jt){var Ot,xr,jr,dr,Lr,an,tn,ri,fi=1;do{for(xr=jt,jt=null,Lr=null,an=0;xr;){for(an++,jr=xr,tn=0,Ot=0;Ot<fi&&(tn++,jr=jr.nextZ);Ot++);for(ri=fi;tn>0||ri>0&&jr;)tn!==0&&(ri===0||!jr||xr.z<=jr.z)?(dr=xr,xr=xr.nextZ,tn--):(dr=jr,jr=jr.nextZ,ri--),Lr?Lr.nextZ=dr:jt=dr,dr.prevZ=Lr,Lr=dr;xr=jr}Lr.nextZ=null,fi*=2}while(an>1)}(tt)}(y,S,z,O);for(var Q,ie,he=y;y.prev!==y.next;)if(Q=y.prev,ie=y.next,O?jo(y,S,z,O):_o(y))p.push(Q.i/_|0),p.push(y.i/_|0),p.push(ie.i/_|0),Ku(y),y=ie.next,he=ie.next;else if((y=ie)===he){V?V===1?so(y=La(Gi(y),p,_),p,_,S,z,O,2):V===2&&ja(y,p,_,S,z,O):so(Gi(y),p,_,S,z,O,1);break}}}function _o(y){var p=y.prev,_=y,S=y.next;if(Pi(p,_,S)>=0)return!1;for(var z=p.x,O=_.x,V=S.x,Q=p.y,ie=_.y,he=S.y,Ee=z<O?z<V?z:V:O<V?O:V,Me=Q<ie?Q<he?Q:he:ie<he?ie:he,Ve=z>O?z>V?z:V:O>V?O:V,Qe=Q>ie?Q>he?Q:he:ie>he?ie:he,tt=S.next;tt!==p;){if(tt.x>=Ee&&tt.x<=Ve&&tt.y>=Me&&tt.y<=Qe&&Hi(z,Q,O,ie,V,he,tt.x,tt.y)&&Pi(tt.prev,tt,tt.next)>=0)return!1;tt=tt.next}return!0}function jo(y,p,_,S){var z=y.prev,O=y,V=y.next;if(Pi(z,O,V)>=0)return!1;for(var Q=z.x,ie=O.x,he=V.x,Ee=z.y,Me=O.y,Ve=V.y,Qe=Q<ie?Q<he?Q:he:ie<he?ie:he,tt=Ee<Me?Ee<Ve?Ee:Ve:Me<Ve?Me:Ve,jt=Q>ie?Q>he?Q:he:ie>he?ie:he,Ot=Ee>Me?Ee>Ve?Ee:Ve:Me>Ve?Me:Ve,xr=bi(Qe,tt,p,_,S),jr=bi(jt,Ot,p,_,S),dr=y.prevZ,Lr=y.nextZ;dr&&dr.z>=xr&&Lr&&Lr.z<=jr;){if(dr.x>=Qe&&dr.x<=jt&&dr.y>=tt&&dr.y<=Ot&&dr!==z&&dr!==V&&Hi(Q,Ee,ie,Me,he,Ve,dr.x,dr.y)&&Pi(dr.prev,dr,dr.next)>=0||(dr=dr.prevZ,Lr.x>=Qe&&Lr.x<=jt&&Lr.y>=tt&&Lr.y<=Ot&&Lr!==z&&Lr!==V&&Hi(Q,Ee,ie,Me,he,Ve,Lr.x,Lr.y)&&Pi(Lr.prev,Lr,Lr.next)>=0))return!1;Lr=Lr.nextZ}for(;dr&&dr.z>=xr;){if(dr.x>=Qe&&dr.x<=jt&&dr.y>=tt&&dr.y<=Ot&&dr!==z&&dr!==V&&Hi(Q,Ee,ie,Me,he,Ve,dr.x,dr.y)&&Pi(dr.prev,dr,dr.next)>=0)return!1;dr=dr.prevZ}for(;Lr&&Lr.z<=jr;){if(Lr.x>=Qe&&Lr.x<=jt&&Lr.y>=tt&&Lr.y<=Ot&&Lr!==z&&Lr!==V&&Hi(Q,Ee,ie,Me,he,Ve,Lr.x,Lr.y)&&Pi(Lr.prev,Lr,Lr.next)>=0)return!1;Lr=Lr.nextZ}return!0}function La(y,p,_){var S=y;do{var z=S.prev,O=S.next.next;!uo(z,O)&&Do(z,S,S.next,O)&&Us(z,O)&&Us(O,z)&&(p.push(z.i/_|0),p.push(S.i/_|0),p.push(O.i/_|0),Ku(S),Ku(S.next),S=y=O),S=S.next}while(S!==y);return Gi(S)}function ja(y,p,_,S,z,O){var V=y;do{for(var Q=V.next.next;Q!==V.prev;){if(V.i!==Q.i&&Ka(V,Q)){var ie=_c(V,Q);return V=Gi(V,V.next),ie=Gi(ie,ie.next),so(V,p,_,S,z,O,0),void so(ie,p,_,S,z,O,0)}Q=Q.next}V=V.next}while(V!==y)}function ea(y,p){return y.x-p.x}function Qi(y,p){var _=function(z,O){var V,Q=O,ie=z.x,he=z.y,Ee=-1/0;do{if(he<=Q.y&&he>=Q.next.y&&Q.next.y!==Q.y){var Me=Q.x+(he-Q.y)*(Q.next.x-Q.x)/(Q.next.y-Q.y);if(Me<=ie&&Me>Ee&&(Ee=Me,V=Q.x<Q.next.x?Q:Q.next,Me===ie))return V}Q=Q.next}while(Q!==O);if(!V)return null;var Ve,Qe=V,tt=V.x,jt=V.y,Ot=1/0;Q=V;do ie>=Q.x&&Q.x>=tt&&ie!==Q.x&&Hi(he<jt?ie:Ee,he,tt,jt,he<jt?Ee:ie,he,Q.x,Q.y)&&(Ve=Math.abs(he-Q.y)/(ie-Q.x),Us(Q,z)&&(Ve<Ot||Ve===Ot&&(Q.x>V.x||Q.x===V.x&&bn(V,Q)))&&(V=Q,Ot=Ve)),Q=Q.next;while(Q!==Qe);return V}(y,p);if(!_)return p;var S=_c(_,y);return Gi(S,S.next),Gi(_,_.next)}function bn(y,p){return Pi(y.prev,y,p.prev)<0&&Pi(p.next,y,y.next)<0}function bi(y,p,_,S,z){return(y=1431655765&((y=858993459&((y=252645135&((y=16711935&((y=(y-_)*z|0)|y<<8))|y<<4))|y<<2))|y<<1))|(p=1431655765&((p=858993459&((p=252645135&((p=16711935&((p=(p-S)*z|0)|p<<8))|p<<4))|p<<2))|p<<1))<<1}function lo(y){var p=y,_=y;do(p.x<_.x||p.x===_.x&&p.y<_.y)&&(_=p),p=p.next;while(p!==y);return _}function Hi(y,p,_,S,z,O,V,Q){return(z-V)*(p-Q)>=(y-V)*(O-Q)&&(y-V)*(S-Q)>=(_-V)*(p-Q)&&(_-V)*(O-Q)>=(z-V)*(S-Q)}function Ka(y,p){return y.next.i!==p.i&&y.prev.i!==p.i&&!function(_,S){var z=_;do{if(z.i!==_.i&&z.next.i!==_.i&&z.i!==S.i&&z.next.i!==S.i&&Do(z,z.next,_,S))return!0;z=z.next}while(z!==_);return!1}(y,p)&&(Us(y,p)&&Us(p,y)&&function(_,S){var z=_,O=!1,V=(_.x+S.x)/2,Q=(_.y+S.y)/2;do z.y>Q!=z.next.y>Q&&z.next.y!==z.y&&V<(z.next.x-z.x)*(Q-z.y)/(z.next.y-z.y)+z.x&&(O=!O),z=z.next;while(z!==_);return O}(y,p)&&(Pi(y.prev,y,p.prev)||Pi(y,p.prev,p))||uo(y,p)&&Pi(y.prev,y,y.next)>0&&Pi(p.prev,p,p.next)>0)}function Pi(y,p,_){return(p.y-y.y)*(_.x-p.x)-(p.x-y.x)*(_.y-p.y)}function uo(y,p){return y.x===p.x&&y.y===p.y}function Do(y,p,_,S){var z=$o(Pi(y,p,_)),O=$o(Pi(y,p,S)),V=$o(Pi(_,S,y)),Q=$o(Pi(_,S,p));return z!==O&&V!==Q||!(z!==0||!Uo(y,_,p))||!(O!==0||!Uo(y,S,p))||!(V!==0||!Uo(_,y,S))||!(Q!==0||!Uo(_,p,S))}function Uo(y,p,_){return p.x<=Math.max(y.x,_.x)&&p.x>=Math.min(y.x,_.x)&&p.y<=Math.max(y.y,_.y)&&p.y>=Math.min(y.y,_.y)}function $o(y){return y>0?1:y<0?-1:0}function Us(y,p){return Pi(y.prev,y,y.next)<0?Pi(y,p,y.next)>=0&&Pi(y,y.prev,p)>=0:Pi(y,p,y.prev)<0||Pi(y,y.next,p)<0}function _c(y,p){var _=new Bc(y.i,y.x,y.y),S=new Bc(p.i,p.x,p.y),z=y.next,O=p.prev;return y.next=p,p.prev=y,_.next=z,z.prev=_,S.next=_,_.prev=S,O.next=S,S.prev=O,S}function bc(y,p,_,S){var z=new Bc(y,p,_);return S?(z.next=S.next,z.prev=S,S.next.prev=z,S.next=z):(z.prev=z,z.next=z),z}function Ku(y){y.next.prev=y.prev,y.prev.next=y.next,y.prevZ&&(y.prevZ.nextZ=y.nextZ),y.nextZ&&(y.nextZ.prevZ=y.prevZ)}function Bc(y,p,_){this.i=y,this.x=p,this.y=_,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Pl(y,p,_,S){for(var z=0,O=p,V=_-S;O<_;O+=S)z+=(y[V]-y[O])*(y[O+1]+y[V+1]),V=O;return z}function o0(y,p,_,S,z){S0(y,p,_||0,S||y.length-1,z||df)}function S0(y,p,_,S,z){for(;S>_;){if(S-_>600){var O=S-_+1,V=p-_+1,Q=Math.log(O),ie=.5*Math.exp(2*Q/3),he=.5*Math.sqrt(Q*ie*(O-ie)/O)*(V-O/2<0?-1:1);S0(y,p,Math.max(_,Math.floor(p-V*ie/O+he)),Math.min(S,Math.floor(p+(O-V)*ie/O+he)),z)}var Ee=y[p],Me=_,Ve=S;for(Su(y,_,p),z(y[S],Ee)>0&&Su(y,_,S);Me<Ve;){for(Su(y,Me,Ve),Me++,Ve--;z(y[Me],Ee)<0;)Me++;for(;z(y[Ve],Ee)>0;)Ve--}z(y[_],Ee)===0?Su(y,_,Ve):Su(y,++Ve,S),Ve<=p&&(_=Ve+1),p<=Ve&&(S=Ve-1)}}function Su(y,p,_){var S=y[p];y[p]=y[_],y[_]=S}function df(y,p){return y<p?-1:y>p?1:0}function C0(y,p){const _=y.length;if(_<=1)return[y];const S=[];let z,O;for(let V=0;V<_;V++){const Q=_e(y[V]);Q!==0&&(y[V].area=Math.abs(Q),O===void 0&&(O=Q<0),O===Q<0?(z&&S.push(z),z=[y[V]]):z.push(y[V]))}if(z&&S.push(z),p>1)for(let V=0;V<S.length;V++)S[V].length<=p||(o0(S[V],p,1,S[V].length-1,ls),S[V]=S[V].slice(0,p));return S}function ls(y,p){return p.area-y.area}function Uf(y,p,_){const S=_.patternDependencies;let z=!1;for(const O of p){const V=O.paint.get(`${y}-pattern`);V.isConstant()||(z=!0);const Q=V.constantOr(null);Q&&(z=!0,S[Q.to]=!0,S[Q.from]=!0)}return z}function xp(y,p,_,S,z){const O=z.patternDependencies;for(const V of p){const Q=V.paint.get(`${y}-pattern`).value;if(Q.kind!=="constant"){let ie=Q.evaluate({zoom:S-1},_,{},z.availableImages),he=Q.evaluate({zoom:S},_,{},z.availableImages),Ee=Q.evaluate({zoom:S+1},_,{},z.availableImages);ie=ie&&ie.name?ie.name:ie,he=he&&he.name?he.name:he,Ee=Ee&&Ee.name?Ee.name:Ee,O[ie]=!0,O[he]=!0,O[Ee]=!0,_.patterns[V.id]={min:ie,mid:he,max:Ee}}}return _}_n.exports=Kn,_n.exports.default=Kn,Kn.deviation=function(y,p,_,S){var z=p&&p.length,O=Math.abs(Pl(y,0,z?p[0]*_:y.length,_));if(z)for(var V=0,Q=p.length;V<Q;V++)O-=Math.abs(Pl(y,p[V]*_,V<Q-1?p[V+1]*_:y.length,_));var ie=0;for(V=0;V<S.length;V+=3){var he=S[V]*_,Ee=S[V+1]*_,Me=S[V+2]*_;ie+=Math.abs((y[he]-y[Me])*(y[Ee+1]-y[he+1])-(y[he]-y[Ee])*(y[Me+1]-y[he+1]))}return O===0&&ie===0?0:Math.abs((ie-O)/O)},Kn.flatten=function(y){for(var p=y[0][0].length,_={vertices:[],holes:[],dimensions:p},S=0,z=0;z<y.length;z++){for(var O=0;O<y[z].length;O++)for(var V=0;V<p;V++)_.vertices.push(y[z][O][V]);z>0&&_.holes.push(S+=y[z-1].length)}return _};class kp{constructor(p){this.zoom=p.zoom,this.overscaling=p.overscaling,this.layers=p.layers,this.layerIds=this.layers.map(_=>_.id),this.index=p.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new re,this.indexArray=new kr,this.indexArray2=new hr,this.programConfigurations=new Ho(p.layers,p.zoom),this.segments=new zt,this.segments2=new zt,this.stateDependentLayerIds=this.layers.filter(_=>_.isStateDependent()).map(_=>_.id)}populate(p,_,S){this.hasPattern=Uf("fill",this.layers,_);const z=this.layers[0].layout.get("fill-sort-key"),O=!z.isConstant(),V=[];for(const{feature:Q,id:ie,index:he,sourceLayerIndex:Ee}of p){const Me=this.layers[0]._featureFilter.needGeometry,Ve=Ys(Q,Me);if(!this.layers[0]._featureFilter.filter(new Go(this.zoom),Ve,S))continue;const Qe=O?z.evaluate(Ve,{},S,_.availableImages):void 0,tt={id:ie,properties:Q.properties,type:Q.type,sourceLayerIndex:Ee,index:he,geometry:Me?Ve.geometry:Fs(Q),patterns:{},sortKey:Qe};V.push(tt)}O&&V.sort((Q,ie)=>Q.sortKey-ie.sortKey);for(const Q of V){const{geometry:ie,index:he,sourceLayerIndex:Ee}=Q;if(this.hasPattern){const Me=xp("fill",this.layers,Q,this.zoom,_);this.patternFeatures.push(Me)}else this.addFeature(Q,ie,he,S,{});_.featureIndex.insert(p[he].feature,ie,he,Ee,this.index)}}update(p,_,S){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(p,_,this.stateDependentLayers,S)}addFeatures(p,_,S){for(const z of this.patternFeatures)this.addFeature(z,z.geometry,z.index,_,S)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(p){this.uploaded||(this.layoutVertexBuffer=p.createVertexBuffer(this.layoutVertexArray,Jn),this.indexBuffer=p.createIndexBuffer(this.indexArray),this.indexBuffer2=p.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(p),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(p,_,S,z,O){for(const V of C0(_,500)){let Q=0;for(const Qe of V)Q+=Qe.length;const ie=this.segments.prepareSegment(Q,this.layoutVertexArray,this.indexArray),he=ie.vertexLength,Ee=[],Me=[];for(const Qe of V){if(Qe.length===0)continue;Qe!==V[0]&&Me.push(Ee.length/2);const tt=this.segments2.prepareSegment(Qe.length,this.layoutVertexArray,this.indexArray2),jt=tt.vertexLength;this.layoutVertexArray.emplaceBack(Qe[0].x,Qe[0].y),this.indexArray2.emplaceBack(jt+Qe.length-1,jt),Ee.push(Qe[0].x),Ee.push(Qe[0].y);for(let Ot=1;Ot<Qe.length;Ot++)this.layoutVertexArray.emplaceBack(Qe[Ot].x,Qe[Ot].y),this.indexArray2.emplaceBack(jt+Ot-1,jt+Ot),Ee.push(Qe[Ot].x),Ee.push(Qe[Ot].y);tt.vertexLength+=Qe.length,tt.primitiveLength+=Qe.length}const Ve=_n.exports(Ee,Me);for(let Qe=0;Qe<Ve.length;Qe+=3)this.indexArray.emplaceBack(he+Ve[Qe],he+Ve[Qe+1],he+Ve[Qe+2]);ie.vertexLength+=Q,ie.primitiveLength+=Ve.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,p,S,O,z)}}Pn("FillBucket",kp,{omit:["layers","patternFeatures"]});const C2=new Bo({"fill-sort-key":new vi(yr.layout_fill["fill-sort-key"])});var Dd={paint:new Bo({"fill-antialias":new oi(yr.paint_fill["fill-antialias"]),"fill-opacity":new vi(yr.paint_fill["fill-opacity"]),"fill-color":new vi(yr.paint_fill["fill-color"]),"fill-outline-color":new vi(yr.paint_fill["fill-outline-color"]),"fill-translate":new oi(yr.paint_fill["fill-translate"]),"fill-translate-anchor":new oi(yr.paint_fill["fill-translate-anchor"]),"fill-pattern":new Oa(yr.paint_fill["fill-pattern"])}),layout:C2};const mf=xa([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),I2=xa([{name:"a_centroid",components:2,type:"Int16"}],4),{members:T2}=mf;var I0={},a0=ht,Ei=s0;function s0(y,p,_,S,z){this.properties={},this.extent=_,this.type=0,this._pbf=y,this._geometry=-1,this._keys=S,this._values=z,y.readFields(L2,this,p)}function L2(y,p,_){y==1?p.id=_.readVarint():y==2?function(S,z){for(var O=S.readVarint()+S.pos;S.pos<O;){var V=z._keys[S.readVarint()],Q=z._values[S.readVarint()];z.properties[V]=Q}}(_,p):y==3?p.type=_.readVarint():y==4&&(p._geometry=_.pos)}function P2(y){for(var p,_,S=0,z=0,O=y.length,V=O-1;z<O;V=z++)S+=((_=y[V]).x-(p=y[z]).x)*(p.y+_.y);return S}s0.types=["Unknown","Point","LineString","Polygon"],s0.prototype.loadGeometry=function(){var y=this._pbf;y.pos=this._geometry;for(var p,_=y.readVarint()+y.pos,S=1,z=0,O=0,V=0,Q=[];y.pos<_;){if(z<=0){var ie=y.readVarint();S=7&ie,z=ie>>3}if(z--,S===1||S===2)O+=y.readSVarint(),V+=y.readSVarint(),S===1&&(p&&Q.push(p),p=[]),p.push(new a0(O,V));else{if(S!==7)throw new Error("unknown command "+S);p&&p.push(p[0].clone())}}return p&&Q.push(p),Q},s0.prototype.bbox=function(){var y=this._pbf;y.pos=this._geometry;for(var p=y.readVarint()+y.pos,_=1,S=0,z=0,O=0,V=1/0,Q=-1/0,ie=1/0,he=-1/0;y.pos<p;){if(S<=0){var Ee=y.readVarint();_=7&Ee,S=Ee>>3}if(S--,_===1||_===2)(z+=y.readSVarint())<V&&(V=z),z>Q&&(Q=z),(O+=y.readSVarint())<ie&&(ie=O),O>he&&(he=O);else if(_!==7)throw new Error("unknown command "+_)}return[V,ie,Q,he]},s0.prototype.toGeoJSON=function(y,p,_){var S,z,O=this.extent*Math.pow(2,_),V=this.extent*y,Q=this.extent*p,ie=this.loadGeometry(),he=s0.types[this.type];function Ee(Qe){for(var tt=0;tt<Qe.length;tt++){var jt=Qe[tt];Qe[tt]=[360*(jt.x+V)/O-180,360/Math.PI*Math.atan(Math.exp((180-360*(jt.y+Q)/O)*Math.PI/180))-90]}}switch(this.type){case 1:var Me=[];for(S=0;S<ie.length;S++)Me[S]=ie[S][0];Ee(ie=Me);break;case 2:for(S=0;S<ie.length;S++)Ee(ie[S]);break;case 3:for(ie=function(Qe){var tt=Qe.length;if(tt<=1)return[Qe];for(var jt,Ot,xr=[],jr=0;jr<tt;jr++){var dr=P2(Qe[jr]);dr!==0&&(Ot===void 0&&(Ot=dr<0),Ot===dr<0?(jt&&xr.push(jt),jt=[Qe[jr]]):jt.push(Qe[jr]))}return jt&&xr.push(jt),xr}(ie),S=0;S<ie.length;S++)for(z=0;z<ie[S].length;z++)Ee(ie[S][z])}ie.length===1?ie=ie[0]:he="Multi"+he;var Ve={type:"Feature",geometry:{type:he,coordinates:ie},properties:this.properties};return"id"in this&&(Ve.id=this.id),Ve};var M2=Ei,zd=Nd;function Nd(y,p){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=y,this._keys=[],this._values=[],this._features=[],y.readFields(D2,this,p),this.length=this._features.length}function D2(y,p,_){y===15?p.version=_.readVarint():y===1?p.name=_.readString():y===5?p.extent=_.readVarint():y===2?p._features.push(_.pos):y===3?p._keys.push(_.readString()):y===4&&p._values.push(function(S){for(var z=null,O=S.readVarint()+S.pos;S.pos<O;){var V=S.readVarint()>>3;z=V===1?S.readString():V===2?S.readFloat():V===3?S.readDouble():V===4?S.readVarint64():V===5?S.readVarint():V===6?S.readSVarint():V===7?S.readBoolean():null}return z}(_))}Nd.prototype.feature=function(y){if(y<0||y>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[y];var p=this._pbf.readVarint()+this._pbf.pos;return new M2(this._pbf,p,this.extent,this._keys,this._values)};var qf=zd;function yh(y,p,_){if(y===3){var S=new qf(_,_.readVarint()+_.pos);S.length&&(p[S.name]=S)}}I0.VectorTile=function(y,p){this.layers=y.readFields(yh,{},p)},I0.VectorTileFeature=Ei,I0.VectorTileLayer=zd;const Rd=I0.VectorTileFeature.types,Ap=Math.pow(2,13);function gf(y,p,_,S,z,O,V,Q){y.emplaceBack(p,_,2*Math.floor(S*Ap)+V,z*Ap*2,O*Ap*2,Math.round(Q))}class Vf{constructor(p){this.zoom=p.zoom,this.overscaling=p.overscaling,this.layers=p.layers,this.layerIds=this.layers.map(_=>_.id),this.index=p.index,this.hasPattern=!1,this.layoutVertexArray=new fe,this.centroidVertexArray=new N,this.indexArray=new kr,this.programConfigurations=new Ho(p.layers,p.zoom),this.segments=new zt,this.stateDependentLayerIds=this.layers.filter(_=>_.isStateDependent()).map(_=>_.id)}populate(p,_,S){this.features=[],this.hasPattern=Uf("fill-extrusion",this.layers,_);for(const{feature:z,id:O,index:V,sourceLayerIndex:Q}of p){const ie=this.layers[0]._featureFilter.needGeometry,he=Ys(z,ie);if(!this.layers[0]._featureFilter.filter(new Go(this.zoom),he,S))continue;const Ee={id:O,sourceLayerIndex:Q,index:V,geometry:ie?he.geometry:Fs(z),properties:z.properties,type:z.type,patterns:{}};this.hasPattern?this.features.push(xp("fill-extrusion",this.layers,Ee,this.zoom,_)):this.addFeature(Ee,Ee.geometry,V,S,{}),_.featureIndex.insert(z,Ee.geometry,V,Q,this.index,!0)}}addFeatures(p,_,S){for(const z of this.features){const{geometry:O}=z;this.addFeature(z,O,z.index,_,S)}}update(p,_,S){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(p,_,this.stateDependentLayers,S)}isEmpty(){return this.layoutVertexArray.length===0&&this.centroidVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(p){this.uploaded||(this.layoutVertexBuffer=p.createVertexBuffer(this.layoutVertexArray,T2),this.centroidVertexBuffer=p.createVertexBuffer(this.centroidVertexArray,I2.members,!0),this.indexBuffer=p.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(p),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.centroidVertexBuffer.destroy())}addFeature(p,_,S,z,O){const V={x:0,y:0,vertexCount:0};for(const Q of C0(_,500)){let ie=0;for(const tt of Q)ie+=tt.length;let he=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray);for(const tt of Q){if(tt.length===0||z2(tt))continue;let jt=0;for(let Ot=0;Ot<tt.length;Ot++){const xr=tt[Ot];if(Ot>=1){const jr=tt[Ot-1];if(!Od(xr,jr)){he.vertexLength+4>zt.MAX_VERTEX_ARRAY_LENGTH&&(he=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));const dr=xr.sub(jr)._perp()._unit(),Lr=jr.dist(xr);jt+Lr>32768&&(jt=0),gf(this.layoutVertexArray,xr.x,xr.y,dr.x,dr.y,0,0,jt),gf(this.layoutVertexArray,xr.x,xr.y,dr.x,dr.y,0,1,jt),V.x+=2*xr.x,V.y+=2*xr.y,V.vertexCount+=2,jt+=Lr,gf(this.layoutVertexArray,jr.x,jr.y,dr.x,dr.y,0,0,jt),gf(this.layoutVertexArray,jr.x,jr.y,dr.x,dr.y,0,1,jt),V.x+=2*jr.x,V.y+=2*jr.y,V.vertexCount+=2;const an=he.vertexLength;this.indexArray.emplaceBack(an,an+2,an+1),this.indexArray.emplaceBack(an+1,an+2,an+3),he.vertexLength+=4,he.primitiveLength+=2}}}}if(he.vertexLength+ie>zt.MAX_VERTEX_ARRAY_LENGTH&&(he=this.segments.prepareSegment(ie,this.layoutVertexArray,this.indexArray)),Rd[p.type]!=="Polygon")continue;const Ee=[],Me=[],Ve=he.vertexLength;for(const tt of Q)if(tt.length!==0){tt!==Q[0]&&Me.push(Ee.length/2);for(let jt=0;jt<tt.length;jt++){const Ot=tt[jt];gf(this.layoutVertexArray,Ot.x,Ot.y,0,0,1,1,0),V.x+=Ot.x,V.y+=Ot.y,V.vertexCount+=1,Ee.push(Ot.x),Ee.push(Ot.y)}}const Qe=_n.exports(Ee,Me);for(let tt=0;tt<Qe.length;tt+=3)this.indexArray.emplaceBack(Ve+Qe[tt],Ve+Qe[tt+2],Ve+Qe[tt+1]);he.primitiveLength+=Qe.length/3,he.vertexLength+=ie}for(let Q=0;Q<V.vertexCount;Q++)this.centroidVertexArray.emplaceBack(Math.floor(V.x/V.vertexCount),Math.floor(V.y/V.vertexCount));this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,p,S,O,z)}}function Od(y,p){return y.x===p.x&&(y.x<0||y.x>Vo)||y.y===p.y&&(y.y<0||y.y>Vo)}function z2(y){return y.every(p=>p.x<0)||y.every(p=>p.x>Vo)||y.every(p=>p.y<0)||y.every(p=>p.y>Vo)}Pn("FillExtrusionBucket",Vf,{omit:["layers","features"]});var N2={paint:new Bo({"fill-extrusion-opacity":new oi(yr["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new vi(yr["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new oi(yr["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new oi(yr["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new Oa(yr["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new vi(yr["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new vi(yr["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new oi(yr["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})};function $f(y,p){return y.x*p.x+y.y*p.y}function Fd(y,p){if(y.length===1){let _=0;const S=p[_++];let z;for(;!z||S.equals(z);)if(z=p[_++],!z)return 1/0;for(;_<p.length;_++){const O=p[_],V=y[0],Q=z.sub(S),ie=O.sub(S),he=V.sub(S),Ee=$f(Q,Q),Me=$f(Q,ie),Ve=$f(ie,ie),Qe=$f(he,Q),tt=$f(he,ie),jt=Ee*Ve-Me*Me,Ot=(Ve*Qe-Me*tt)/jt,xr=(Ee*tt-Me*Qe)/jt,jr=S.z*(1-Ot-xr)+z.z*Ot+O.z*xr;if(isFinite(jr))return jr}return 1/0}{let _=1/0;for(const S of p)_=Math.min(_,S.z);return _}}const Bd=xa([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:R2}=Bd,i=xa([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:a}=i,s=I0.VectorTileFeature.types,g=Math.cos(Math.PI/180*37.5),b=Math.pow(2,14)/.5;class x{constructor(p){this.zoom=p.zoom,this.overscaling=p.overscaling,this.layers=p.layers,this.layerIds=this.layers.map(_=>_.id),this.index=p.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(_=>{this.gradients[_.id]={}}),this.layoutVertexArray=new Te,this.layoutVertexArray2=new Oe,this.indexArray=new kr,this.programConfigurations=new Ho(p.layers,p.zoom),this.segments=new zt,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(_=>_.isStateDependent()).map(_=>_.id)}populate(p,_,S){this.hasPattern=Uf("line",this.layers,_);const z=this.layers[0].layout.get("line-sort-key"),O=!z.isConstant(),V=[];for(const{feature:Q,id:ie,index:he,sourceLayerIndex:Ee}of p){const Me=this.layers[0]._featureFilter.needGeometry,Ve=Ys(Q,Me);if(!this.layers[0]._featureFilter.filter(new Go(this.zoom),Ve,S))continue;const Qe=O?z.evaluate(Ve,{},S):void 0,tt={id:ie,properties:Q.properties,type:Q.type,sourceLayerIndex:Ee,index:he,geometry:Me?Ve.geometry:Fs(Q),patterns:{},sortKey:Qe};V.push(tt)}O&&V.sort((Q,ie)=>Q.sortKey-ie.sortKey);for(const Q of V){const{geometry:ie,index:he,sourceLayerIndex:Ee}=Q;if(this.hasPattern){const Me=xp("line",this.layers,Q,this.zoom,_);this.patternFeatures.push(Me)}else this.addFeature(Q,ie,he,S,{});_.featureIndex.insert(p[he].feature,ie,he,Ee,this.index)}}update(p,_,S){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(p,_,this.stateDependentLayers,S)}addFeatures(p,_,S){for(const z of this.patternFeatures)this.addFeature(z,z.geometry,z.index,_,S)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(p){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=p.createVertexBuffer(this.layoutVertexArray2,a)),this.layoutVertexBuffer=p.createVertexBuffer(this.layoutVertexArray,R2),this.indexBuffer=p.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(p),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(p){if(p.properties&&Object.prototype.hasOwnProperty.call(p.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(p.properties,"mapbox_clip_end"))return{start:+p.properties.mapbox_clip_start,end:+p.properties.mapbox_clip_end}}addFeature(p,_,S,z,O){const V=this.layers[0].layout,Q=V.get("line-join").evaluate(p,{}),ie=V.get("line-cap"),he=V.get("line-miter-limit"),Ee=V.get("line-round-limit");this.lineClips=this.lineFeatureClips(p);for(const Me of _)this.addLine(Me,p,Q,ie,he,Ee);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,p,S,O,z)}addLine(p,_,S,z,O,V){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let xr=0;xr<p.length-1;xr++)this.totalDistance+=p[xr].dist(p[xr+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const Q=s[_.type]==="Polygon";let ie=p.length;for(;ie>=2&&p[ie-1].equals(p[ie-2]);)ie--;let he=0;for(;he<ie-1&&p[he].equals(p[he+1]);)he++;if(ie<(Q?3:2))return;S==="bevel"&&(O=1.05);const Ee=this.overscaling<=16?122880/(512*this.overscaling):0,Me=this.segments.prepareSegment(10*ie,this.layoutVertexArray,this.indexArray);let Ve,Qe,tt,jt,Ot;this.e1=this.e2=-1,Q&&(Ve=p[ie-2],Ot=p[he].sub(Ve)._unit()._perp());for(let xr=he;xr<ie;xr++){if(tt=xr===ie-1?Q?p[he+1]:void 0:p[xr+1],tt&&p[xr].equals(tt))continue;Ot&&(jt=Ot),Ve&&(Qe=Ve),Ve=p[xr],Ot=tt?tt.sub(Ve)._unit()._perp():jt,jt=jt||Ot;let jr=jt.add(Ot);jr.x===0&&jr.y===0||jr._unit();const dr=jt.x*Ot.x+jt.y*Ot.y,Lr=jr.x*Ot.x+jr.y*Ot.y,an=Lr!==0?1/Lr:1/0,tn=2*Math.sqrt(2-2*Lr),ri=Lr<g&&Qe&&tt,fi=jt.x*Ot.y-jt.y*Ot.x>0;if(ri&&xr>he){const Tn=Ve.dist(Qe);if(Tn>2*Ee){const Hn=Ve.sub(Ve.sub(Qe)._mult(Ee/Tn)._round());this.updateDistance(Qe,Hn),this.addCurrentVertex(Hn,jt,0,0,Me),Qe=Hn}}const Gn=Qe&&tt;let Bn=Gn?S:Q?"butt":z;if(Gn&&Bn==="round"&&(an<V?Bn="miter":an<=2&&(Bn="fakeround")),Bn==="miter"&&an>O&&(Bn="bevel"),Bn==="bevel"&&(an>2&&(Bn="flipbevel"),an<O&&(Bn="miter")),Qe&&this.updateDistance(Qe,Ve),Bn==="miter")jr._mult(an),this.addCurrentVertex(Ve,jr,0,0,Me);else if(Bn==="flipbevel"){if(an>100)jr=Ot.mult(-1);else{const Tn=an*jt.add(Ot).mag()/jt.sub(Ot).mag();jr._perp()._mult(Tn*(fi?-1:1))}this.addCurrentVertex(Ve,jr,0,0,Me),this.addCurrentVertex(Ve,jr.mult(-1),0,0,Me)}else if(Bn==="bevel"||Bn==="fakeround"){const Tn=-Math.sqrt(an*an-1),Hn=fi?Tn:0,qn=fi?0:Tn;if(Qe&&this.addCurrentVertex(Ve,jt,Hn,qn,Me),Bn==="fakeround"){const wn=Math.round(180*tn/Math.PI/20);for(let Si=1;Si<wn;Si++){let mi=Si/wn;if(mi!==.5){const ka=mi-.5;mi+=mi*ka*(mi-1)*((1.0904+dr*(dr*(3.55645-1.43519*dr)-3.2452))*ka*ka+(.848013+dr*(.215638*dr-1.06021)))}const po=Ot.sub(jt)._mult(mi)._add(jt)._unit()._mult(fi?-1:1);this.addHalfVertex(Ve,po.x,po.y,!1,fi,0,Me)}}tt&&this.addCurrentVertex(Ve,Ot,-Hn,-qn,Me)}else if(Bn==="butt")this.addCurrentVertex(Ve,jr,0,0,Me);else if(Bn==="square"){const Tn=Qe?1:-1;this.addCurrentVertex(Ve,jr,Tn,Tn,Me)}else Bn==="round"&&(Qe&&(this.addCurrentVertex(Ve,jt,0,0,Me),this.addCurrentVertex(Ve,jt,1,1,Me,!0)),tt&&(this.addCurrentVertex(Ve,Ot,-1,-1,Me,!0),this.addCurrentVertex(Ve,Ot,0,0,Me)));if(ri&&xr<ie-1){const Tn=Ve.dist(tt);if(Tn>2*Ee){const Hn=Ve.add(tt.sub(Ve)._mult(Ee/Tn)._round());this.updateDistance(Ve,Hn),this.addCurrentVertex(Hn,Ot,0,0,Me),Ve=Hn}}}}addCurrentVertex(p,_,S,z,O,V=!1){const Q=_.y*z-_.x,ie=-_.y-_.x*z;this.addHalfVertex(p,_.x+_.y*S,_.y-_.x*S,V,!1,S,O),this.addHalfVertex(p,Q,ie,V,!0,-z,O),this.distance>b/2&&this.totalDistance===0&&(this.distance=0,this.addCurrentVertex(p,_,S,z,O,V))}addHalfVertex({x:p,y:_},S,z,O,V,Q,ie){const he=.5*(this.lineClips?this.scaledDistance*(b-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((p<<1)+(O?1:0),(_<<1)+(V?1:0),Math.round(63*S)+128,Math.round(63*z)+128,1+(Q===0?0:Q<0?-1:1)|(63&he)<<2,he>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);const Ee=ie.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,Ee),ie.primitiveLength++),V?this.e2=Ee:this.e1=Ee}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(p,_){this.distance+=p.dist(_),this.updateScaledDistance()}}Pn("LineBucket",x,{omit:["layers","patternFeatures"]});const A=new Bo({"line-cap":new oi(yr.layout_line["line-cap"]),"line-join":new vi(yr.layout_line["line-join"]),"line-miter-limit":new oi(yr.layout_line["line-miter-limit"]),"line-round-limit":new oi(yr.layout_line["line-round-limit"]),"line-sort-key":new vi(yr.layout_line["line-sort-key"])});var P={paint:new Bo({"line-opacity":new vi(yr.paint_line["line-opacity"]),"line-color":new vi(yr.paint_line["line-color"]),"line-translate":new oi(yr.paint_line["line-translate"]),"line-translate-anchor":new oi(yr.paint_line["line-translate-anchor"]),"line-width":new vi(yr.paint_line["line-width"]),"line-gap-width":new vi(yr.paint_line["line-gap-width"]),"line-offset":new vi(yr.paint_line["line-offset"]),"line-blur":new vi(yr.paint_line["line-blur"]),"line-dasharray":new Yu(yr.paint_line["line-dasharray"]),"line-pattern":new Oa(yr.paint_line["line-pattern"]),"line-gradient":new wa(yr.paint_line["line-gradient"])}),layout:A};const j=new class extends vi{possiblyEvaluate(y,p){return p=new Go(Math.floor(p.zoom),{now:p.now,fadeDuration:p.fadeDuration,zoomHistory:p.zoomHistory,transition:p.transition}),super.possiblyEvaluate(y,p)}evaluate(y,p,_,S){return p=F({},p,{zoom:Math.floor(p.zoom)}),super.evaluate(y,p,_,S)}}(P.paint.properties["line-width"].specification);function B(y,p){return p>0?p+2*y:y}j.useIntegerZoom=!0;const Z=xa([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),ne=xa([{name:"a_projected_pos",components:3,type:"Float32"}],4);xa([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const me=xa([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}]);xa([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const Ce=xa([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),Be=xa([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function at(y,p,_){return y.sections.forEach(S=>{S.text=function(z,O,V){const Q=O.layout.get("text-transform").evaluate(V,{});return Q==="uppercase"?z=z.toLocaleUpperCase():Q==="lowercase"&&(z=z.toLocaleLowerCase()),Es.applyArabicShaping&&(z=Es.applyArabicShaping(z)),z}(S.text,p,_)}),y}xa([{name:"triangle",components:3,type:"Uint16"}]),xa([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),xa([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),xa([{type:"Float32",name:"offsetX"}]),xa([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);const kt={"!":"","#":"",$:"","%":"","&":"","(":"",")":"","*":"","+":"",",":"","-":"",".":"","/":"",":":"",";":"","<":"","=":"",">":"","?":"","@":"","[":"","\\":"","]":"","^":"",_:"","`":"","{":"","|":"","}":"","~":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""};var It=24,Qt=Sr,lr=function(y,p,_,S,z){var O,V,Q=8*z-S-1,ie=(1<<Q)-1,he=ie>>1,Ee=-7,Me=_?z-1:0,Ve=_?-1:1,Qe=y[p+Me];for(Me+=Ve,O=Qe&(1<<-Ee)-1,Qe>>=-Ee,Ee+=Q;Ee>0;O=256*O+y[p+Me],Me+=Ve,Ee-=8);for(V=O&(1<<-Ee)-1,O>>=-Ee,Ee+=S;Ee>0;V=256*V+y[p+Me],Me+=Ve,Ee-=8);if(O===0)O=1-he;else{if(O===ie)return V?NaN:1/0*(Qe?-1:1);V+=Math.pow(2,S),O-=he}return(Qe?-1:1)*V*Math.pow(2,O-S)},zr=function(y,p,_,S,z,O){var V,Q,ie,he=8*O-z-1,Ee=(1<<he)-1,Me=Ee>>1,Ve=z===23?Math.pow(2,-24)-Math.pow(2,-77):0,Qe=S?0:O-1,tt=S?1:-1,jt=p<0||p===0&&1/p<0?1:0;for(p=Math.abs(p),isNaN(p)||p===1/0?(Q=isNaN(p)?1:0,V=Ee):(V=Math.floor(Math.log(p)/Math.LN2),p*(ie=Math.pow(2,-V))<1&&(V--,ie*=2),(p+=V+Me>=1?Ve/ie:Ve*Math.pow(2,1-Me))*ie>=2&&(V++,ie/=2),V+Me>=Ee?(Q=0,V=Ee):V+Me>=1?(Q=(p*ie-1)*Math.pow(2,z),V+=Me):(Q=p*Math.pow(2,Me-1)*Math.pow(2,z),V=0));z>=8;y[_+Qe]=255&Q,Qe+=tt,Q/=256,z-=8);for(V=V<<z|Q,he+=z;he>0;y[_+Qe]=255&V,Qe+=tt,V/=256,he-=8);y[_+Qe-tt]|=128*jt};function Sr(y){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(y)?y:new Uint8Array(y||0),this.pos=0,this.type=0,this.length=this.buf.length}Sr.Varint=0,Sr.Fixed64=1,Sr.Bytes=2,Sr.Fixed32=5;var Jr,hn=4294967296,Sn=1/hn,di=typeof TextDecoder>"u"?null:new TextDecoder("utf8");function Ni(y){return y.type===Sr.Bytes?y.readVarint()+y.pos:y.pos+1}function Ua(y,p,_){return _?4294967296*p+(y>>>0):4294967296*(p>>>0)+(y>>>0)}function Ks(y,p,_){var S=p<=16383?1:p<=2097151?2:p<=268435455?3:Math.floor(Math.log(p)/(7*Math.LN2));_.realloc(S);for(var z=_.pos-1;z>=y;z--)_.buf[z+S]=_.buf[z]}function iu(y,p){for(var _=0;_<y.length;_++)p.writeVarint(y[_])}function jc(y,p){for(var _=0;_<y.length;_++)p.writeSVarint(y[_])}function yf(y,p){for(var _=0;_<y.length;_++)p.writeFloat(y[_])}function Tk(y,p){for(var _=0;_<y.length;_++)p.writeDouble(y[_])}function Lk(y,p){for(var _=0;_<y.length;_++)p.writeBoolean(y[_])}function Pk(y,p){for(var _=0;_<y.length;_++)p.writeFixed32(y[_])}function Mk(y,p){for(var _=0;_<y.length;_++)p.writeSFixed32(y[_])}function Dk(y,p){for(var _=0;_<y.length;_++)p.writeFixed64(y[_])}function zk(y,p){for(var _=0;_<y.length;_++)p.writeSFixed64(y[_])}function jd(y,p){return(y[p]|y[p+1]<<8|y[p+2]<<16)+16777216*y[p+3]}function vh(y,p,_){y[_]=p,y[_+1]=p>>>8,y[_+2]=p>>>16,y[_+3]=p>>>24}function Zv(y,p){return(y[p]|y[p+1]<<8|y[p+2]<<16)+(y[p+3]<<24)}function Nk(y,p,_){y===1&&_.readMessage(Rk,p)}function Rk(y,p,_){if(y===3){const{id:S,bitmap:z,width:O,height:V,left:Q,top:ie,advance:he}=_.readMessage(Ok,{});p.push({id:S,bitmap:new Zt({width:O+6,height:V+6},z),metrics:{width:O,height:V,left:Q,top:ie,advance:he}})}}function Ok(y,p,_){y===1?p.id=_.readVarint():y===2?p.bitmap=_.readBytes():y===3?p.width=_.readVarint():y===4?p.height=_.readVarint():y===5?p.left=_.readSVarint():y===6?p.top=_.readSVarint():y===7&&(p.advance=_.readVarint())}function Xv(y){let p=0,_=0;for(const V of y)p+=V.w*V.h,_=Math.max(_,V.w);y.sort((V,Q)=>Q.h-V.h);const S=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(p/.95)),_),h:1/0}];let z=0,O=0;for(const V of y)for(let Q=S.length-1;Q>=0;Q--){const ie=S[Q];if(!(V.w>ie.w||V.h>ie.h)){if(V.x=ie.x,V.y=ie.y,O=Math.max(O,V.y+V.h),z=Math.max(z,V.x+V.w),V.w===ie.w&&V.h===ie.h){const he=S.pop();Q<S.length&&(S[Q]=he)}else V.h===ie.h?(ie.x+=V.w,ie.w-=V.w):V.w===ie.w?(ie.y+=V.h,ie.h-=V.h):(S.push({x:ie.x+V.w,y:ie.y,w:ie.w-V.w,h:V.h}),ie.y+=V.h,ie.h-=V.h);break}}return{w:z,h:O,fill:p/(z*O)||0}}Sr.prototype={destroy:function(){this.buf=null},readFields:function(y,p,_){for(_=_||this.length;this.pos<_;){var S=this.readVarint(),z=S>>3,O=this.pos;this.type=7&S,y(z,p,this),this.pos===O&&this.skip(S)}return p},readMessage:function(y,p){return this.readFields(y,p,this.readVarint()+this.pos)},readFixed32:function(){var y=jd(this.buf,this.pos);return this.pos+=4,y},readSFixed32:function(){var y=Zv(this.buf,this.pos);return this.pos+=4,y},readFixed64:function(){var y=jd(this.buf,this.pos)+jd(this.buf,this.pos+4)*hn;return this.pos+=8,y},readSFixed64:function(){var y=jd(this.buf,this.pos)+Zv(this.buf,this.pos+4)*hn;return this.pos+=8,y},readFloat:function(){var y=lr(this.buf,this.pos,!0,23,4);return this.pos+=4,y},readDouble:function(){var y=lr(this.buf,this.pos,!0,52,8);return this.pos+=8,y},readVarint:function(y){var p,_,S=this.buf;return p=127&(_=S[this.pos++]),_<128?p:(p|=(127&(_=S[this.pos++]))<<7,_<128?p:(p|=(127&(_=S[this.pos++]))<<14,_<128?p:(p|=(127&(_=S[this.pos++]))<<21,_<128?p:function(z,O,V){var Q,ie,he=V.buf;if(Q=(112&(ie=he[V.pos++]))>>4,ie<128||(Q|=(127&(ie=he[V.pos++]))<<3,ie<128)||(Q|=(127&(ie=he[V.pos++]))<<10,ie<128)||(Q|=(127&(ie=he[V.pos++]))<<17,ie<128)||(Q|=(127&(ie=he[V.pos++]))<<24,ie<128)||(Q|=(1&(ie=he[V.pos++]))<<31,ie<128))return Ua(z,Q,O);throw new Error("Expected varint not more than 10 bytes")}(p|=(15&(_=S[this.pos]))<<28,y,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var y=this.readVarint();return y%2==1?(y+1)/-2:y/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var y=this.readVarint()+this.pos,p=this.pos;return this.pos=y,y-p>=12&&di?function(_,S,z){return di.decode(_.subarray(S,z))}(this.buf,p,y):function(_,S,z){for(var O="",V=S;V<z;){var Q,ie,he,Ee=_[V],Me=null,Ve=Ee>239?4:Ee>223?3:Ee>191?2:1;if(V+Ve>z)break;Ve===1?Ee<128&&(Me=Ee):Ve===2?(192&(Q=_[V+1]))==128&&(Me=(31&Ee)<<6|63&Q)<=127&&(Me=null):Ve===3?(ie=_[V+2],(192&(Q=_[V+1]))==128&&(192&ie)==128&&((Me=(15&Ee)<<12|(63&Q)<<6|63&ie)<=2047||Me>=55296&&Me<=57343)&&(Me=null)):Ve===4&&(ie=_[V+2],he=_[V+3],(192&(Q=_[V+1]))==128&&(192&ie)==128&&(192&he)==128&&((Me=(15&Ee)<<18|(63&Q)<<12|(63&ie)<<6|63&he)<=65535||Me>=1114112)&&(Me=null)),Me===null?(Me=65533,Ve=1):Me>65535&&(Me-=65536,O+=String.fromCharCode(Me>>>10&1023|55296),Me=56320|1023&Me),O+=String.fromCharCode(Me),V+=Ve}return O}(this.buf,p,y)},readBytes:function(){var y=this.readVarint()+this.pos,p=this.buf.subarray(this.pos,y);return this.pos=y,p},readPackedVarint:function(y,p){if(this.type!==Sr.Bytes)return y.push(this.readVarint(p));var _=Ni(this);for(y=y||[];this.pos<_;)y.push(this.readVarint(p));return y},readPackedSVarint:function(y){if(this.type!==Sr.Bytes)return y.push(this.readSVarint());var p=Ni(this);for(y=y||[];this.pos<p;)y.push(this.readSVarint());return y},readPackedBoolean:function(y){if(this.type!==Sr.Bytes)return y.push(this.readBoolean());var p=Ni(this);for(y=y||[];this.pos<p;)y.push(this.readBoolean());return y},readPackedFloat:function(y){if(this.type!==Sr.Bytes)return y.push(this.readFloat());var p=Ni(this);for(y=y||[];this.pos<p;)y.push(this.readFloat());return y},readPackedDouble:function(y){if(this.type!==Sr.Bytes)return y.push(this.readDouble());var p=Ni(this);for(y=y||[];this.pos<p;)y.push(this.readDouble());return y},readPackedFixed32:function(y){if(this.type!==Sr.Bytes)return y.push(this.readFixed32());var p=Ni(this);for(y=y||[];this.pos<p;)y.push(this.readFixed32());return y},readPackedSFixed32:function(y){if(this.type!==Sr.Bytes)return y.push(this.readSFixed32());var p=Ni(this);for(y=y||[];this.pos<p;)y.push(this.readSFixed32());return y},readPackedFixed64:function(y){if(this.type!==Sr.Bytes)return y.push(this.readFixed64());var p=Ni(this);for(y=y||[];this.pos<p;)y.push(this.readFixed64());return y},readPackedSFixed64:function(y){if(this.type!==Sr.Bytes)return y.push(this.readSFixed64());var p=Ni(this);for(y=y||[];this.pos<p;)y.push(this.readSFixed64());return y},skip:function(y){var p=7&y;if(p===Sr.Varint)for(;this.buf[this.pos++]>127;);else if(p===Sr.Bytes)this.pos=this.readVarint()+this.pos;else if(p===Sr.Fixed32)this.pos+=4;else{if(p!==Sr.Fixed64)throw new Error("Unimplemented type: "+p);this.pos+=8}},writeTag:function(y,p){this.writeVarint(y<<3|p)},realloc:function(y){for(var p=this.length||16;p<this.pos+y;)p*=2;if(p!==this.length){var _=new Uint8Array(p);_.set(this.buf),this.buf=_,this.length=p}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(y){this.realloc(4),vh(this.buf,y,this.pos),this.pos+=4},writeSFixed32:function(y){this.realloc(4),vh(this.buf,y,this.pos),this.pos+=4},writeFixed64:function(y){this.realloc(8),vh(this.buf,-1&y,this.pos),vh(this.buf,Math.floor(y*Sn),this.pos+4),this.pos+=8},writeSFixed64:function(y){this.realloc(8),vh(this.buf,-1&y,this.pos),vh(this.buf,Math.floor(y*Sn),this.pos+4),this.pos+=8},writeVarint:function(y){(y=+y||0)>268435455||y<0?function(p,_){var S,z;if(p>=0?(S=p%4294967296|0,z=p/4294967296|0):(z=~(-p/4294967296),4294967295^(S=~(-p%4294967296))?S=S+1|0:(S=0,z=z+1|0)),p>=18446744073709552e3||p<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");_.realloc(10),function(O,V,Q){Q.buf[Q.pos++]=127&O|128,O>>>=7,Q.buf[Q.pos++]=127&O|128,O>>>=7,Q.buf[Q.pos++]=127&O|128,O>>>=7,Q.buf[Q.pos++]=127&O|128,Q.buf[Q.pos]=127&(O>>>=7)}(S,0,_),function(O,V){var Q=(7&O)<<4;V.buf[V.pos++]|=Q|((O>>>=3)?128:0),O&&(V.buf[V.pos++]=127&O|((O>>>=7)?128:0),O&&(V.buf[V.pos++]=127&O|((O>>>=7)?128:0),O&&(V.buf[V.pos++]=127&O|((O>>>=7)?128:0),O&&(V.buf[V.pos++]=127&O|((O>>>=7)?128:0),O&&(V.buf[V.pos++]=127&O)))))}(z,_)}(y,this):(this.realloc(4),this.buf[this.pos++]=127&y|(y>127?128:0),y<=127||(this.buf[this.pos++]=127&(y>>>=7)|(y>127?128:0),y<=127||(this.buf[this.pos++]=127&(y>>>=7)|(y>127?128:0),y<=127||(this.buf[this.pos++]=y>>>7&127))))},writeSVarint:function(y){this.writeVarint(y<0?2*-y-1:2*y)},writeBoolean:function(y){this.writeVarint(Boolean(y))},writeString:function(y){y=String(y),this.realloc(4*y.length),this.pos++;var p=this.pos;this.pos=function(S,z,O){for(var V,Q,ie=0;ie<z.length;ie++){if((V=z.charCodeAt(ie))>55295&&V<57344){if(!Q){V>56319||ie+1===z.length?(S[O++]=239,S[O++]=191,S[O++]=189):Q=V;continue}if(V<56320){S[O++]=239,S[O++]=191,S[O++]=189,Q=V;continue}V=Q-55296<<10|V-56320|65536,Q=null}else Q&&(S[O++]=239,S[O++]=191,S[O++]=189,Q=null);V<128?S[O++]=V:(V<2048?S[O++]=V>>6|192:(V<65536?S[O++]=V>>12|224:(S[O++]=V>>18|240,S[O++]=V>>12&63|128),S[O++]=V>>6&63|128),S[O++]=63&V|128)}return O}(this.buf,y,this.pos);var _=this.pos-p;_>=128&&Ks(p,_,this),this.pos=p-1,this.writeVarint(_),this.pos+=_},writeFloat:function(y){this.realloc(4),zr(this.buf,y,this.pos,!0,23,4),this.pos+=4},writeDouble:function(y){this.realloc(8),zr(this.buf,y,this.pos,!0,52,8),this.pos+=8},writeBytes:function(y){var p=y.length;this.writeVarint(p),this.realloc(p);for(var _=0;_<p;_++)this.buf[this.pos++]=y[_]},writeRawMessage:function(y,p){this.pos++;var _=this.pos;y(p,this);var S=this.pos-_;S>=128&&Ks(_,S,this),this.pos=_-1,this.writeVarint(S),this.pos+=S},writeMessage:function(y,p,_){this.writeTag(y,Sr.Bytes),this.writeRawMessage(p,_)},writePackedVarint:function(y,p){p.length&&this.writeMessage(y,iu,p)},writePackedSVarint:function(y,p){p.length&&this.writeMessage(y,jc,p)},writePackedBoolean:function(y,p){p.length&&this.writeMessage(y,Lk,p)},writePackedFloat:function(y,p){p.length&&this.writeMessage(y,yf,p)},writePackedDouble:function(y,p){p.length&&this.writeMessage(y,Tk,p)},writePackedFixed32:function(y,p){p.length&&this.writeMessage(y,Pk,p)},writePackedSFixed32:function(y,p){p.length&&this.writeMessage(y,Mk,p)},writePackedFixed64:function(y,p){p.length&&this.writeMessage(y,Dk,p)},writePackedSFixed64:function(y,p){p.length&&this.writeMessage(y,zk,p)},writeBytesField:function(y,p){this.writeTag(y,Sr.Bytes),this.writeBytes(p)},writeFixed32Field:function(y,p){this.writeTag(y,Sr.Fixed32),this.writeFixed32(p)},writeSFixed32Field:function(y,p){this.writeTag(y,Sr.Fixed32),this.writeSFixed32(p)},writeFixed64Field:function(y,p){this.writeTag(y,Sr.Fixed64),this.writeFixed64(p)},writeSFixed64Field:function(y,p){this.writeTag(y,Sr.Fixed64),this.writeSFixed64(p)},writeVarintField:function(y,p){this.writeTag(y,Sr.Varint),this.writeVarint(p)},writeSVarintField:function(y,p){this.writeTag(y,Sr.Varint),this.writeSVarint(p)},writeStringField:function(y,p){this.writeTag(y,Sr.Bytes),this.writeString(p)},writeFloatField:function(y,p){this.writeTag(y,Sr.Fixed32),this.writeFloat(p)},writeDoubleField:function(y,p){this.writeTag(y,Sr.Fixed64),this.writeDouble(p)},writeBooleanField:function(y,p){this.writeVarintField(y,Boolean(p))}};class O2{constructor(p,{pixelRatio:_,version:S,stretchX:z,stretchY:O,content:V}){this.paddedRect=p,this.pixelRatio=_,this.stretchX=z,this.stretchY=O,this.content=V,this.version=S}get tl(){return[this.paddedRect.x+1,this.paddedRect.y+1]}get br(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]}}class Yv{constructor(p,_){const S={},z={};this.haveRenderCallbacks=[];const O=[];this.addImages(p,S,O),this.addImages(_,z,O);const{w:V,h:Q}=Xv(O),ie=new _r({width:V||1,height:Q||1});for(const he in p){const Ee=p[he],Me=S[he].paddedRect;_r.copy(Ee.data,ie,{x:0,y:0},{x:Me.x+1,y:Me.y+1},Ee.data)}for(const he in _){const Ee=_[he],Me=z[he].paddedRect,Ve=Me.x+1,Qe=Me.y+1,tt=Ee.data.width,jt=Ee.data.height;_r.copy(Ee.data,ie,{x:0,y:0},{x:Ve,y:Qe},Ee.data),_r.copy(Ee.data,ie,{x:0,y:jt-1},{x:Ve,y:Qe-1},{width:tt,height:1}),_r.copy(Ee.data,ie,{x:0,y:0},{x:Ve,y:Qe+jt},{width:tt,height:1}),_r.copy(Ee.data,ie,{x:tt-1,y:0},{x:Ve-1,y:Qe},{width:1,height:jt}),_r.copy(Ee.data,ie,{x:0,y:0},{x:Ve+tt,y:Qe},{width:1,height:jt})}this.image=ie,this.iconPositions=S,this.patternPositions=z}addImages(p,_,S){for(const z in p){const O=p[z],V={x:0,y:0,w:O.data.width+2,h:O.data.height+2};S.push(V),_[z]=new O2(V,O),O.hasRenderCallback&&this.haveRenderCallbacks.push(z)}}patchUpdatedImages(p,_){p.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const S in p.updatedImages)this.patchUpdatedImage(this.iconPositions[S],p.getImage(S),_),this.patchUpdatedImage(this.patternPositions[S],p.getImage(S),_)}patchUpdatedImage(p,_,S){if(!p||!_||p.version===_.version)return;p.version=_.version;const[z,O]=p.tl;S.update(_.data,void 0,{x:z,y:O})}}Pn("ImagePosition",O2),Pn("ImageAtlas",Yv),l.WritingMode=void 0,(Jr=l.WritingMode||(l.WritingMode={}))[Jr.none=0]="none",Jr[Jr.horizontal=1]="horizontal",Jr[Jr.vertical=2]="vertical",Jr[Jr.horizontalOnly=3]="horizontalOnly";const Ud=-17;class Ep{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(p,_){const S=new Ep;return S.scale=p||1,S.fontStack=_,S}static forImage(p){const _=new Ep;return _.imageName=p,_}}class _h{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(p,_){const S=new _h;for(let z=0;z<p.sections.length;z++){const O=p.sections[z];O.image?S.addImageSection(O):S.addTextSection(O,_)}return S}length(){return this.text.length}getSection(p){return this.sections[this.sectionIndex[p]]}getSectionIndex(p){return this.sectionIndex[p]}getCharCode(p){return this.text.charCodeAt(p)}verticalizePunctuation(){this.text=function(p){let _="";for(let S=0;S<p.length;S++){const z=p.charCodeAt(S+1)||null,O=p.charCodeAt(S-1)||null;_+=z&&e0(z)&&!kt[p[S+1]]||O&&e0(O)&&!kt[p[S-1]]||!kt[p[S]]?p[S]:kt[p[S]]}return _}(this.text)}trim(){let p=0;for(let S=0;S<this.text.length&&Vd[this.text.charCodeAt(S)];S++)p++;let _=this.text.length;for(let S=this.text.length-1;S>=0&&S>=p&&Vd[this.text.charCodeAt(S)];S--)_--;this.text=this.text.substring(p,_),this.sectionIndex=this.sectionIndex.slice(p,_)}substring(p,_){const S=new _h;return S.text=this.text.substring(p,_),S.sectionIndex=this.sectionIndex.slice(p,_),S.sections=this.sections,S}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((p,_)=>Math.max(p,this.sections[_].scale),0)}addTextSection(p,_){this.text+=p.text,this.sections.push(Ep.forText(p.scale,p.fontStack||_));const S=this.sections.length-1;for(let z=0;z<p.text.length;++z)this.sectionIndex.push(S)}addImageSection(p){const _=p.image?p.image.name:"";if(_.length===0)return void se("Can't add FormattedSection with an empty image.");const S=this.getNextImageSectionCharCode();S?(this.text+=String.fromCharCode(S),this.sections.push(Ep.forImage(_)),this.sectionIndex.push(this.sections.length-1)):se("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function qd(y,p,_,S,z,O,V,Q,ie,he,Ee,Me,Ve,Qe,tt,jt){const Ot=_h.fromFeature(y,z);let xr;Me===l.WritingMode.vertical&&Ot.verticalizePunctuation();const{processBidirectionalText:jr,processStyledBidirectionalText:dr}=Es;if(jr&&Ot.sections.length===1){xr=[];const tn=jr(Ot.toString(),F2(Ot,he,O,p,S,Qe,tt));for(const ri of tn){const fi=new _h;fi.text=ri,fi.sections=Ot.sections;for(let Gn=0;Gn<ri.length;Gn++)fi.sectionIndex.push(0);xr.push(fi)}}else if(dr){xr=[];const tn=dr(Ot.text,Ot.sectionIndex,F2(Ot,he,O,p,S,Qe,tt));for(const ri of tn){const fi=new _h;fi.text=ri[0],fi.sectionIndex=ri[1],fi.sections=Ot.sections,xr.push(fi)}}else xr=function(tn,ri){const fi=[],Gn=tn.text;let Bn=0;for(const Tn of ri)fi.push(tn.substring(Bn,Tn)),Bn=Tn;return Bn<Gn.length&&fi.push(tn.substring(Bn,Gn.length)),fi}(Ot,F2(Ot,he,O,p,S,Qe,tt));const Lr=[],an={positionedLines:Lr,text:Ot.toString(),top:Ee[1],bottom:Ee[1],left:Ee[0],right:Ee[0],writingMode:Me,iconsInText:!1,verticalizable:!1};return function(tn,ri,fi,Gn,Bn,Tn,Hn,qn,wn,Si,mi,po){let ka=0,Pa=Ud,Cs=0,xc=0;const ll=qn==="right"?1:qn==="left"?0:.5;let ps=0;for(const ds of Bn){ds.trim();const cl=ds.getMaxScale(),Dl=(cl-1)*It,ou={positionedGlyphs:[],lineOffset:0};tn.positionedLines[ps]=ou;const Iu=ou.positionedGlyphs;let Tu=0;if(!ds.length()){Pa+=Tn,++ps;continue}for(let Vs=0;Vs<ds.length();Vs++){const bo=ds.getSection(Vs),Qu=ds.getSectionIndex(Vs),fl=ds.getCharCode(Vs);let zl=0,Uc=null,l0=null,u0=null,X0=It;const qc=!(wn===l.WritingMode.horizontal||!mi&&!zc(fl)||mi&&(Vd[fl]||(qs=fl,An.Arabic(qs)||An["Arabic Supplement"](qs)||An["Arabic Extended-A"](qs)||An["Arabic Presentation Forms-A"](qs)||An["Arabic Presentation Forms-B"](qs))));if(bo.imageName){const kc=Gn[bo.imageName];if(!kc)continue;u0=bo.imageName,tn.iconsInText=tn.iconsInText||!0,l0=kc.paddedRect;const Lu=kc.displaySize;bo.scale=bo.scale*It/po,Uc={width:Lu[0],height:Lu[1],left:1,top:-3,advance:qc?Lu[1]:Lu[0]},zl=Dl+(It-Lu[1]*bo.scale),X0=Uc.advance;const Y0=qc?Lu[0]*bo.scale-It*cl:Lu[1]*bo.scale-It*cl;Y0>0&&Y0>Tu&&(Tu=Y0)}else{const kc=fi[bo.fontStack],Lu=kc&&kc[fl];if(Lu&&Lu.rect)l0=Lu.rect,Uc=Lu.metrics;else{const Y0=ri[bo.fontStack],Ip=Y0&&Y0[fl];if(!Ip)continue;Uc=Ip.metrics}zl=(cl-bo.scale)*It}qc?(tn.verticalizable=!0,Iu.push({glyph:fl,imageName:u0,x:ka,y:Pa+zl,vertical:qc,scale:bo.scale,fontStack:bo.fontStack,sectionIndex:Qu,metrics:Uc,rect:l0}),ka+=X0*bo.scale+Si):(Iu.push({glyph:fl,imageName:u0,x:ka,y:Pa+zl,vertical:qc,scale:bo.scale,fontStack:bo.fontStack,sectionIndex:Qu,metrics:Uc,rect:l0}),ka+=Uc.advance*bo.scale+Si)}Iu.length!==0&&(Cs=Math.max(ka-Si,Cs),jk(Iu,0,Iu.length-1,ll,Tu)),ka=0;const qa=Tn*cl+Tu;ou.lineOffset=Math.max(Tu,Dl),Pa+=qa,xc=Math.max(qa,xc),++ps}var qs;const ul=Pa-Ud,{horizontalAlign:Ml,verticalAlign:Cu}=B2(Hn);(function(ds,cl,Dl,ou,Iu,Tu,qa,Vs,bo){const Qu=(cl-Dl)*Iu;let fl=0;fl=Tu!==qa?-Vs*ou-Ud:(-ou*bo+.5)*qa;for(const zl of ds)for(const Uc of zl.positionedGlyphs)Uc.x+=Qu,Uc.y+=fl})(tn.positionedLines,ll,Ml,Cu,Cs,xc,Tn,ul,Bn.length),tn.top+=-Cu*ul,tn.bottom=tn.top+ul,tn.left+=-Ml*Cs,tn.right=tn.left+Cs}(an,p,_,S,xr,V,Q,ie,Me,he,Ve,jt),!function(tn){for(const ri of tn)if(ri.positionedGlyphs.length!==0)return!1;return!0}(Lr)&&an}const Vd={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},Fk={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0};function Jv(y,p,_,S,z,O){if(p.imageName){const V=S[p.imageName];return V?V.displaySize[0]*p.scale*It/O+z:0}{const V=_[p.fontStack],Q=V&&V[y];return Q?Q.metrics.advance*p.scale+z:0}}function Kv(y,p,_,S){const z=Math.pow(y-p,2);return S?y<p?z/2:2*z:z+Math.abs(_)*_}function Bk(y,p,_){let S=0;return y===10&&(S-=1e4),_&&(S+=150),y!==40&&y!==65288||(S+=50),p!==41&&p!==65289||(S+=50),S}function Qv(y,p,_,S,z,O){let V=null,Q=Kv(p,_,z,O);for(const ie of S){const he=Kv(p-ie.x,_,z,O)+ie.badness;he<=Q&&(V=ie,Q=he)}return{index:y,x:p,priorBreak:V,badness:Q}}function e_(y){return y?e_(y.priorBreak).concat(y.index):[]}function F2(y,p,_,S,z,O,V){if(O!=="point")return[];if(!y)return[];const Q=[],ie=function(Ve,Qe,tt,jt,Ot,xr){let jr=0;for(let dr=0;dr<Ve.length();dr++){const Lr=Ve.getSection(dr);jr+=Jv(Ve.getCharCode(dr),Lr,jt,Ot,Qe,xr)}return jr/Math.max(1,Math.ceil(jr/tt))}(y,p,_,S,z,V),he=y.text.indexOf("")>=0;let Ee=0;for(let Ve=0;Ve<y.length();Ve++){const Qe=y.getSection(Ve),tt=y.getCharCode(Ve);if(Vd[tt]||(Ee+=Jv(tt,Qe,S,z,p,V)),Ve<y.length()-1){const jt=!((Me=tt)<11904||!(An["Bopomofo Extended"](Me)||An.Bopomofo(Me)||An["CJK Compatibility Forms"](Me)||An["CJK Compatibility Ideographs"](Me)||An["CJK Compatibility"](Me)||An["CJK Radicals Supplement"](Me)||An["CJK Strokes"](Me)||An["CJK Symbols and Punctuation"](Me)||An["CJK Unified Ideographs Extension A"](Me)||An["CJK Unified Ideographs"](Me)||An["Enclosed CJK Letters and Months"](Me)||An["Halfwidth and Fullwidth Forms"](Me)||An.Hiragana(Me)||An["Ideographic Description Characters"](Me)||An["Kangxi Radicals"](Me)||An["Katakana Phonetic Extensions"](Me)||An.Katakana(Me)||An["Vertical Forms"](Me)||An["Yi Radicals"](Me)||An["Yi Syllables"](Me)));(Fk[tt]||jt||Qe.imageName)&&Q.push(Qv(Ve+1,Ee,ie,Q,Bk(tt,y.getCharCode(Ve+1),jt&&he),!1))}}var Me;return e_(Qv(y.length(),Ee,ie,Q,0,!0))}function B2(y){let p=.5,_=.5;switch(y){case"right":case"top-right":case"bottom-right":p=1;break;case"left":case"top-left":case"bottom-left":p=0}switch(y){case"bottom":case"bottom-right":case"bottom-left":_=1;break;case"top":case"top-right":case"top-left":_=0}return{horizontalAlign:p,verticalAlign:_}}function jk(y,p,_,S,z){if(!S&&!z)return;const O=y[_],V=(y[_].x+O.metrics.advance*O.scale)*S;for(let Q=p;Q<=_;Q++)y[Q].x-=V,y[Q].y+=z}function Uk(y,p,_){const{horizontalAlign:S,verticalAlign:z}=B2(_),O=p[0]-y.displaySize[0]*S,V=p[1]-y.displaySize[1]*z;return{image:y,top:V,bottom:V+y.displaySize[1],left:O,right:O+y.displaySize[0]}}function t_(y,p,_,S,z,O){const V=y.image;let Q;if(V.content){const Ot=V.content,xr=V.pixelRatio||1;Q=[Ot[0]/xr,Ot[1]/xr,V.displaySize[0]-Ot[2]/xr,V.displaySize[1]-Ot[3]/xr]}const ie=p.left*O,he=p.right*O;let Ee,Me,Ve,Qe;_==="width"||_==="both"?(Qe=z[0]+ie-S[3],Me=z[0]+he+S[1]):(Qe=z[0]+(ie+he-V.displaySize[0])/2,Me=Qe+V.displaySize[0]);const tt=p.top*O,jt=p.bottom*O;return _==="height"||_==="both"?(Ee=z[1]+tt-S[0],Ve=z[1]+jt+S[2]):(Ee=z[1]+(tt+jt-V.displaySize[1])/2,Ve=Ee+V.displaySize[1]),{image:V,top:Ee,right:Me,bottom:Ve,left:Qe,collisionPadding:Q}}const Z0=128;function r_(y,p){const{expression:_}=p;if(_.kind==="constant")return{kind:"constant",layoutSize:_.evaluate(new Go(y+1))};if(_.kind==="source")return{kind:"source"};{const{zoomStops:S,interpolationType:z}=_;let O=0;for(;O<S.length&&S[O]<=y;)O++;O=Math.max(0,O-1);let V=O;for(;V<S.length&&S[V]<y+1;)V++;V=Math.min(S.length-1,V);const Q=S[O],ie=S[V];return _.kind==="composite"?{kind:"composite",minZoom:Q,maxZoom:ie,interpolationType:z}:{kind:"camera",minZoom:Q,maxZoom:ie,minSize:_.evaluate(new Go(Q)),maxSize:_.evaluate(new Go(ie)),interpolationType:z}}}class vf extends ht{constructor(p,_,S,z){super(p,_),this.angle=S,z!==void 0&&(this.segment=z)}clone(){return new vf(this.x,this.y,this.angle,this.segment)}}function n_(y,p,_,S,z){if(p.segment===void 0)return!0;let O=p,V=p.segment+1,Q=0;for(;Q>-_/2;){if(V--,V<0)return!1;Q-=y[V].dist(O),O=y[V]}Q+=y[V].dist(y[V+1]),V++;const ie=[];let he=0;for(;Q<_/2;){const Ee=y[V],Me=y[V+1];if(!Me)return!1;let Ve=y[V-1].angleTo(Ee)-Ee.angleTo(Me);for(Ve=Math.abs((Ve+3*Math.PI)%(2*Math.PI)-Math.PI),ie.push({distance:Q,angleDelta:Ve}),he+=Ve;Q-ie[0].distance>S;)he-=ie.shift().angleDelta;if(he>z)return!1;V++,Q+=Ee.dist(Me)}return!0}function i_(y){let p=0;for(let _=0;_<y.length-1;_++)p+=y[_].dist(y[_+1]);return p}function o_(y,p,_){return y?.6*p*_:0}function a_(y,p){return Math.max(y?y.right-y.left:0,p?p.right-p.left:0)}function qk(y,p,_,S,z,O){const V=o_(_,z,O),Q=a_(_,S)*O;let ie=0;const he=i_(y)/2;for(let Ee=0;Ee<y.length-1;Ee++){const Me=y[Ee],Ve=y[Ee+1],Qe=Me.dist(Ve);if(ie+Qe>he){const tt=(he-ie)/Qe,jt=Ro(Me.x,Ve.x,tt),Ot=Ro(Me.y,Ve.y,tt),xr=new vf(jt,Ot,Ve.angleTo(Me),Ee);return xr._round(),!V||n_(y,xr,Q,V,p)?xr:void 0}ie+=Qe}}function Vk(y,p,_,S,z,O,V,Q,ie){const he=o_(S,O,V),Ee=a_(S,z),Me=Ee*V,Ve=y[0].x===0||y[0].x===ie||y[0].y===0||y[0].y===ie;return p-Me<p/4&&(p=Me+p/4),s_(y,Ve?p/2*Q%p:(Ee/2+2*O)*V*Q%p,p,he,_,Me,Ve,!1,ie)}function s_(y,p,_,S,z,O,V,Q,ie){const he=O/2,Ee=i_(y);let Me=0,Ve=p-_,Qe=[];for(let tt=0;tt<y.length-1;tt++){const jt=y[tt],Ot=y[tt+1],xr=jt.dist(Ot),jr=Ot.angleTo(jt);for(;Ve+_<Me+xr;){Ve+=_;const dr=(Ve-Me)/xr,Lr=Ro(jt.x,Ot.x,dr),an=Ro(jt.y,Ot.y,dr);if(Lr>=0&&Lr<ie&&an>=0&&an<ie&&Ve-he>=0&&Ve+he<=Ee){const tn=new vf(Lr,an,jr,tt);tn._round(),S&&!n_(y,tn,O,S,z)||Qe.push(tn)}}Me+=xr}return Q||Qe.length||V||(Qe=s_(y,Me/2,_,S,z,O,V,!0,ie)),Qe}function l_(y,p,_,S,z){const O=[];for(let V=0;V<y.length;V++){const Q=y[V];let ie;for(let he=0;he<Q.length-1;he++){let Ee=Q[he],Me=Q[he+1];Ee.x<p&&Me.x<p||(Ee.x<p?Ee=new ht(p,Ee.y+(p-Ee.x)/(Me.x-Ee.x)*(Me.y-Ee.y))._round():Me.x<p&&(Me=new ht(p,Ee.y+(p-Ee.x)/(Me.x-Ee.x)*(Me.y-Ee.y))._round()),Ee.y<_&&Me.y<_||(Ee.y<_?Ee=new ht(Ee.x+(_-Ee.y)/(Me.y-Ee.y)*(Me.x-Ee.x),_)._round():Me.y<_&&(Me=new ht(Ee.x+(_-Ee.y)/(Me.y-Ee.y)*(Me.x-Ee.x),_)._round()),Ee.x>=S&&Me.x>=S||(Ee.x>=S?Ee=new ht(S,Ee.y+(S-Ee.x)/(Me.x-Ee.x)*(Me.y-Ee.y))._round():Me.x>=S&&(Me=new ht(S,Ee.y+(S-Ee.x)/(Me.x-Ee.x)*(Me.y-Ee.y))._round()),Ee.y>=z&&Me.y>=z||(Ee.y>=z?Ee=new ht(Ee.x+(z-Ee.y)/(Me.y-Ee.y)*(Me.x-Ee.x),z)._round():Me.y>=z&&(Me=new ht(Ee.x+(z-Ee.y)/(Me.y-Ee.y)*(Me.x-Ee.x),z)._round()),ie&&Ee.equals(ie[ie.length-1])||(ie=[Ee],O.push(ie)),ie.push(Me)))))}}return O}function u_(y,p,_,S){const z=[],O=y.image,V=O.pixelRatio,Q=O.paddedRect.w-2,ie=O.paddedRect.h-2,he=y.right-y.left,Ee=y.bottom-y.top,Me=O.stretchX||[[0,Q]],Ve=O.stretchY||[[0,ie]],Qe=(Tn,Hn)=>Tn+Hn[1]-Hn[0],tt=Me.reduce(Qe,0),jt=Ve.reduce(Qe,0),Ot=Q-tt,xr=ie-jt;let jr=0,dr=tt,Lr=0,an=jt,tn=0,ri=Ot,fi=0,Gn=xr;if(O.content&&S){const Tn=O.content;jr=$d(Me,0,Tn[0]),Lr=$d(Ve,0,Tn[1]),dr=$d(Me,Tn[0],Tn[2]),an=$d(Ve,Tn[1],Tn[3]),tn=Tn[0]-jr,fi=Tn[1]-Lr,ri=Tn[2]-Tn[0]-dr,Gn=Tn[3]-Tn[1]-an}const Bn=(Tn,Hn,qn,wn)=>{const Si=Gd(Tn.stretch-jr,dr,he,y.left),mi=Hd(Tn.fixed-tn,ri,Tn.stretch,tt),po=Gd(Hn.stretch-Lr,an,Ee,y.top),ka=Hd(Hn.fixed-fi,Gn,Hn.stretch,jt),Pa=Gd(qn.stretch-jr,dr,he,y.left),Cs=Hd(qn.fixed-tn,ri,qn.stretch,tt),xc=Gd(wn.stretch-Lr,an,Ee,y.top),ll=Hd(wn.fixed-fi,Gn,wn.stretch,jt),ps=new ht(Si,po),qs=new ht(Pa,po),ul=new ht(Pa,xc),Ml=new ht(Si,xc),Cu=new ht(mi/V,ka/V),ds=new ht(Cs/V,ll/V),cl=p*Math.PI/180;if(cl){const Iu=Math.sin(cl),Tu=Math.cos(cl),qa=[Tu,-Iu,Iu,Tu];ps._matMult(qa),qs._matMult(qa),Ml._matMult(qa),ul._matMult(qa)}const Dl=Tn.stretch+Tn.fixed,ou=Hn.stretch+Hn.fixed;return{tl:ps,tr:qs,bl:Ml,br:ul,tex:{x:O.paddedRect.x+1+Dl,y:O.paddedRect.y+1+ou,w:qn.stretch+qn.fixed-Dl,h:wn.stretch+wn.fixed-ou},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:Cu,pixelOffsetBR:ds,minFontScaleX:ri/V/he,minFontScaleY:Gn/V/Ee,isSDF:_}};if(S&&(O.stretchX||O.stretchY)){const Tn=c_(Me,Ot,tt),Hn=c_(Ve,xr,jt);for(let qn=0;qn<Tn.length-1;qn++){const wn=Tn[qn],Si=Tn[qn+1];for(let mi=0;mi<Hn.length-1;mi++)z.push(Bn(wn,Hn[mi],Si,Hn[mi+1]))}}else z.push(Bn({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:Q+1},{fixed:0,stretch:ie+1}));return z}function $d(y,p,_){let S=0;for(const z of y)S+=Math.max(p,Math.min(_,z[1]))-Math.max(p,Math.min(_,z[0]));return S}function c_(y,p,_){const S=[{fixed:-1,stretch:0}];for(const[z,O]of y){const V=S[S.length-1];S.push({fixed:z-V.stretch,stretch:V.stretch}),S.push({fixed:z-V.stretch,stretch:V.stretch+(O-z)})}return S.push({fixed:p+1,stretch:_}),S}function Gd(y,p,_,S){return y/p*_+S}function Hd(y,p,_,S){return y-p*_/S}Pn("Anchor",vf);class Wd{constructor(p,_,S,z,O,V,Q,ie,he,Ee){if(this.boxStartIndex=p.length,he){let Me=V.top,Ve=V.bottom;const Qe=V.collisionPadding;Qe&&(Me-=Qe[1],Ve+=Qe[3]);let tt=Ve-Me;tt>0&&(tt=Math.max(10,tt),this.circleDiameter=tt)}else{let Me=V.top*Q-ie[0],Ve=V.bottom*Q+ie[2],Qe=V.left*Q-ie[3],tt=V.right*Q+ie[1];const jt=V.collisionPadding;if(jt&&(Qe-=jt[0]*Q,Me-=jt[1]*Q,tt+=jt[2]*Q,Ve+=jt[3]*Q),Ee){const Ot=new ht(Qe,Me),xr=new ht(tt,Me),jr=new ht(Qe,Ve),dr=new ht(tt,Ve),Lr=Ee*Math.PI/180;Ot._rotate(Lr),xr._rotate(Lr),jr._rotate(Lr),dr._rotate(Lr),Qe=Math.min(Ot.x,xr.x,jr.x,dr.x),tt=Math.max(Ot.x,xr.x,jr.x,dr.x),Me=Math.min(Ot.y,xr.y,jr.y,dr.y),Ve=Math.max(Ot.y,xr.y,jr.y,dr.y)}p.emplaceBack(_.x,_.y,Qe,Me,tt,Ve,S,z,O)}this.boxEndIndex=p.length}}class $k{constructor(p=[],_=Gk){if(this.data=p,this.length=this.data.length,this.compare=_,this.length>0)for(let S=(this.length>>1)-1;S>=0;S--)this._down(S)}push(p){this.data.push(p),this.length++,this._up(this.length-1)}pop(){if(this.length===0)return;const p=this.data[0],_=this.data.pop();return this.length--,this.length>0&&(this.data[0]=_,this._down(0)),p}peek(){return this.data[0]}_up(p){const{data:_,compare:S}=this,z=_[p];for(;p>0;){const O=p-1>>1,V=_[O];if(S(z,V)>=0)break;_[p]=V,p=O}_[p]=z}_down(p){const{data:_,compare:S}=this,z=this.length>>1,O=_[p];for(;p<z;){let V=1+(p<<1),Q=_[V];const ie=V+1;if(ie<this.length&&S(_[ie],Q)<0&&(V=ie,Q=_[ie]),S(Q,O)>=0)break;_[p]=Q,p=V}_[p]=O}}function Gk(y,p){return y<p?-1:y>p?1:0}function Hk(y,p=1,_=!1){let S=1/0,z=1/0,O=-1/0,V=-1/0;const Q=y[0];for(let Qe=0;Qe<Q.length;Qe++){const tt=Q[Qe];(!Qe||tt.x<S)&&(S=tt.x),(!Qe||tt.y<z)&&(z=tt.y),(!Qe||tt.x>O)&&(O=tt.x),(!Qe||tt.y>V)&&(V=tt.y)}const ie=Math.min(O-S,V-z);let he=ie/2;const Ee=new $k([],Wk);if(ie===0)return new ht(S,z);for(let Qe=S;Qe<O;Qe+=ie)for(let tt=z;tt<V;tt+=ie)Ee.push(new bh(Qe+he,tt+he,he,y));let Me=function(Qe){let tt=0,jt=0,Ot=0;const xr=Qe[0];for(let jr=0,dr=xr.length,Lr=dr-1;jr<dr;Lr=jr++){const an=xr[jr],tn=xr[Lr],ri=an.x*tn.y-tn.x*an.y;jt+=(an.x+tn.x)*ri,Ot+=(an.y+tn.y)*ri,tt+=3*ri}return new bh(jt/tt,Ot/tt,0,Qe)}(y),Ve=Ee.length;for(;Ee.length;){const Qe=Ee.pop();(Qe.d>Me.d||!Me.d)&&(Me=Qe,_&&console.log("found best %d after %d probes",Math.round(1e4*Qe.d)/1e4,Ve)),Qe.max-Me.d<=p||(he=Qe.h/2,Ee.push(new bh(Qe.p.x-he,Qe.p.y-he,he,y)),Ee.push(new bh(Qe.p.x+he,Qe.p.y-he,he,y)),Ee.push(new bh(Qe.p.x-he,Qe.p.y+he,he,y)),Ee.push(new bh(Qe.p.x+he,Qe.p.y+he,he,y)),Ve+=4)}return _&&(console.log(`num probes: ${Ve}`),console.log(`best distance: ${Me.d}`)),Me.p}function Wk(y,p){return p.max-y.max}function bh(y,p,_,S){this.p=new ht(y,p),this.h=_,this.d=function(z,O){let V=!1,Q=1/0;for(let ie=0;ie<O.length;ie++){const he=O[ie];for(let Ee=0,Me=he.length,Ve=Me-1;Ee<Me;Ve=Ee++){const Qe=he[Ee],tt=he[Ve];Qe.y>z.y!=tt.y>z.y&&z.x<(tt.x-Qe.x)*(z.y-Qe.y)/(tt.y-Qe.y)+Qe.x&&(V=!V),Q=Math.min(Q,js(z,Qe,tt))}}return(V?1:-1)*Math.sqrt(Q)}(this.p,S),this.max=this.d+this.h*Math.SQRT2}const j2=Number.POSITIVE_INFINITY;function f_(y,p){return p[1]!==j2?function(_,S,z){let O=0,V=0;switch(S=Math.abs(S),z=Math.abs(z),_){case"top-right":case"top-left":case"top":V=z-7;break;case"bottom-right":case"bottom-left":case"bottom":V=7-z}switch(_){case"top-right":case"bottom-right":case"right":O=-S;break;case"top-left":case"bottom-left":case"left":O=S}return[O,V]}(y,p[0],p[1]):function(_,S){let z=0,O=0;S<0&&(S=0);const V=S/Math.sqrt(2);switch(_){case"top-right":case"top-left":O=V-7;break;case"bottom-right":case"bottom-left":O=7-V;break;case"bottom":O=7-S;break;case"top":O=S-7}switch(_){case"top-right":case"bottom-right":z=-V;break;case"top-left":case"bottom-left":z=V;break;case"left":z=S;break;case"right":z=-S}return[z,O]}(y,p[0])}function U2(y){switch(y){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function Zk(y,p,_,S,z,O,V,Q,ie,he,Ee){let Me=O.textMaxSize.evaluate(p,{});Me===void 0&&(Me=V);const Ve=y.layers[0].layout,Qe=Ve.get("icon-offset").evaluate(p,{},Ee),tt=p_(_.horizontal),jt=V/24,Ot=y.tilePixelRatio*jt,xr=y.tilePixelRatio*Me/24,jr=y.tilePixelRatio*Q,dr=y.tilePixelRatio*Ve.get("symbol-spacing"),Lr=Ve.get("text-padding")*y.tilePixelRatio,an=function(wn,Si,mi,po=1){const ka=wn.get("icon-padding").evaluate(Si,{},mi),Pa=ka&&ka.values;return[Pa[0]*po,Pa[1]*po,Pa[2]*po,Pa[3]*po]}(Ve,p,Ee,y.tilePixelRatio),tn=Ve.get("text-max-angle")/180*Math.PI,ri=Ve.get("text-rotation-alignment")!=="viewport"&&Ve.get("symbol-placement")!=="point",fi=Ve.get("icon-rotation-alignment")==="map"&&Ve.get("symbol-placement")!=="point",Gn=Ve.get("symbol-placement"),Bn=dr/2,Tn=Ve.get("icon-text-fit");let Hn;S&&Tn!=="none"&&(y.allowVerticalPlacement&&_.vertical&&(Hn=t_(S,_.vertical,Tn,Ve.get("icon-text-fit-padding"),Qe,jt)),tt&&(S=t_(S,tt,Tn,Ve.get("icon-text-fit-padding"),Qe,jt)));const qn=(wn,Si)=>{Si.x<0||Si.x>=Vo||Si.y<0||Si.y>=Vo||function(mi,po,ka,Pa,Cs,xc,ll,ps,qs,ul,Ml,Cu,ds,cl,Dl,ou,Iu,Tu,qa,Vs,bo,Qu,fl,zl,Uc){const l0=mi.addToLineVertexArray(po,ka);let u0,X0,qc,kc,Lu=0,Y0=0,Ip=0,T_=0,J2=-1,K2=-1;const J0={};let L_=Qr.exports(""),Q2=0,em=0;if(ps._unevaluatedLayout.getValue("text-radial-offset")===void 0?[Q2,em]=ps.layout.get("text-offset").evaluate(bo,{},zl).map(Pu=>Pu*It):(Q2=ps.layout.get("text-radial-offset").evaluate(bo,{},zl)*It,em=j2),mi.allowVerticalPlacement&&Pa.vertical){const Pu=ps.layout.get("text-rotate").evaluate(bo,{},zl)+90;qc=new Wd(qs,po,ul,Ml,Cu,Pa.vertical,ds,cl,Dl,Pu),ll&&(kc=new Wd(qs,po,ul,Ml,Cu,ll,Iu,Tu,Dl,Pu))}if(Cs){const Pu=ps.layout.get("icon-rotate").evaluate(bo,{}),T0=ps.layout.get("icon-text-fit")!=="none",Tp=u_(Cs,Pu,fl,T0),Lp=ll?u_(ll,Pu,fl,T0):void 0;X0=new Wd(qs,po,ul,Ml,Cu,Cs,Iu,Tu,!1,Pu),Lu=4*Tp.length;const D_=mi.iconSizeData;let Hf=null;D_.kind==="source"?(Hf=[Z0*ps.layout.get("icon-size").evaluate(bo,{})],Hf[0]>_f&&se(`${mi.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)):D_.kind==="composite"&&(Hf=[Z0*Qu.compositeIconSizes[0].evaluate(bo,{},zl),Z0*Qu.compositeIconSizes[1].evaluate(bo,{},zl)],(Hf[0]>_f||Hf[1]>_f)&&se(`${mi.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)),mi.addSymbols(mi.icon,Tp,Hf,Vs,qa,bo,l.WritingMode.none,po,l0.lineStartIndex,l0.lineLength,-1,zl),J2=mi.icon.placedSymbolArray.length-1,Lp&&(Y0=4*Lp.length,mi.addSymbols(mi.icon,Lp,Hf,Vs,qa,bo,l.WritingMode.vertical,po,l0.lineStartIndex,l0.lineLength,-1,zl),K2=mi.icon.placedSymbolArray.length-1)}const P_=Object.keys(Pa.horizontal);for(const Pu of P_){const T0=Pa.horizontal[Pu];if(!u0){L_=Qr.exports(T0.text);const Lp=ps.layout.get("text-rotate").evaluate(bo,{},zl);u0=new Wd(qs,po,ul,Ml,Cu,T0,ds,cl,Dl,Lp)}const Tp=T0.positionedLines.length===1;if(Ip+=h_(mi,po,T0,xc,ps,Dl,bo,ou,l0,Pa.vertical?l.WritingMode.horizontal:l.WritingMode.horizontalOnly,Tp?P_:[Pu],J0,J2,Qu,zl),Tp)break}Pa.vertical&&(T_+=h_(mi,po,Pa.vertical,xc,ps,Dl,bo,ou,l0,l.WritingMode.vertical,["vertical"],J0,K2,Qu,zl));const sA=u0?u0.boxStartIndex:mi.collisionBoxArray.length,lA=u0?u0.boxEndIndex:mi.collisionBoxArray.length,uA=qc?qc.boxStartIndex:mi.collisionBoxArray.length,cA=qc?qc.boxEndIndex:mi.collisionBoxArray.length,fA=X0?X0.boxStartIndex:mi.collisionBoxArray.length,hA=X0?X0.boxEndIndex:mi.collisionBoxArray.length,pA=kc?kc.boxStartIndex:mi.collisionBoxArray.length,dA=kc?kc.boxEndIndex:mi.collisionBoxArray.length;let c0=-1;const Kd=(Pu,T0)=>Pu&&Pu.circleDiameter?Math.max(Pu.circleDiameter,T0):T0;c0=Kd(u0,c0),c0=Kd(qc,c0),c0=Kd(X0,c0),c0=Kd(kc,c0);const M_=c0>-1?1:0;M_&&(c0*=Uc/It),mi.glyphOffsetArray.length>=wh.MAX_GLYPHS&&se("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),bo.sortKey!==void 0&&mi.addToSortKeyRanges(mi.symbolInstances.length,bo.sortKey),mi.symbolInstances.emplaceBack(po.x,po.y,J0.right>=0?J0.right:-1,J0.center>=0?J0.center:-1,J0.left>=0?J0.left:-1,J0.vertical||-1,J2,K2,L_,sA,lA,uA,cA,fA,hA,pA,dA,ul,Ip,T_,Lu,Y0,M_,0,ds,Q2,em,c0)}(y,Si,wn,_,S,z,Hn,y.layers[0],y.collisionBoxArray,p.index,p.sourceLayerIndex,y.index,Ot,[Lr,Lr,Lr,Lr],ri,ie,jr,an,fi,Qe,p,O,he,Ee,V)};if(Gn==="line")for(const wn of l_(p.geometry,0,0,Vo,Vo)){const Si=Vk(wn,dr,tn,_.vertical||tt,S,24,xr,y.overscaling,Vo);for(const mi of Si){const po=tt;po&&Xk(y,po.text,Bn,mi)||qn(wn,mi)}}else if(Gn==="line-center"){for(const wn of p.geometry)if(wn.length>1){const Si=qk(wn,tn,_.vertical||tt,S,24,xr);Si&&qn(wn,Si)}}else if(p.type==="Polygon")for(const wn of C0(p.geometry,0)){const Si=Hk(wn,16);qn(wn[0],new vf(Si.x,Si.y,0))}else if(p.type==="LineString")for(const wn of p.geometry)qn(wn,new vf(wn[0].x,wn[0].y,0));else if(p.type==="Point")for(const wn of p.geometry)for(const Si of wn)qn([Si],new vf(Si.x,Si.y,0))}const _f=32640;function h_(y,p,_,S,z,O,V,Q,ie,he,Ee,Me,Ve,Qe,tt){const jt=function(jr,dr,Lr,an,tn,ri,fi,Gn){const Bn=an.layout.get("text-rotate").evaluate(ri,{})*Math.PI/180,Tn=[];for(const Hn of dr.positionedLines)for(const qn of Hn.positionedGlyphs){if(!qn.rect)continue;const wn=qn.rect||{};let Si=4,mi=!0,po=1,ka=0;const Pa=(tn||Gn)&&qn.vertical,Cs=qn.metrics.advance*qn.scale/2;if(Gn&&dr.verticalizable){const qa=(qn.scale-1)*It,Vs=(It-qn.metrics.width*qn.scale)/2;ka=Hn.lineOffset/2-(qn.imageName?-Vs:qa)}if(qn.imageName){const qa=fi[qn.imageName];mi=qa.sdf,po=qa.pixelRatio,Si=1/po}const xc=tn?[qn.x+Cs,qn.y]:[0,0];let ll=tn?[0,0]:[qn.x+Cs+Lr[0],qn.y+Lr[1]-ka],ps=[0,0];Pa&&(ps=ll,ll=[0,0]);const qs=(qn.metrics.left-Si)*qn.scale-Cs+ll[0],ul=(-qn.metrics.top-Si)*qn.scale+ll[1],Ml=qs+wn.w*qn.scale/po,Cu=ul+wn.h*qn.scale/po,ds=new ht(qs,ul),cl=new ht(Ml,ul),Dl=new ht(qs,Cu),ou=new ht(Ml,Cu);if(Pa){const qa=new ht(-Cs,Cs-Ud),Vs=-Math.PI/2,bo=12-Cs,Qu=new ht(22-bo,-(qn.imageName?bo:0)),fl=new ht(...ps);ds._rotateAround(Vs,qa)._add(Qu)._add(fl),cl._rotateAround(Vs,qa)._add(Qu)._add(fl),Dl._rotateAround(Vs,qa)._add(Qu)._add(fl),ou._rotateAround(Vs,qa)._add(Qu)._add(fl)}if(Bn){const qa=Math.sin(Bn),Vs=Math.cos(Bn),bo=[Vs,-qa,qa,Vs];ds._matMult(bo),cl._matMult(bo),Dl._matMult(bo),ou._matMult(bo)}const Iu=new ht(0,0),Tu=new ht(0,0);Tn.push({tl:ds,tr:cl,bl:Dl,br:ou,tex:wn,writingMode:dr.writingMode,glyphOffset:xc,sectionIndex:qn.sectionIndex,isSDF:mi,pixelOffsetTL:Iu,pixelOffsetBR:Tu,minFontScaleX:0,minFontScaleY:0})}return Tn}(0,_,Q,z,O,V,S,y.allowVerticalPlacement),Ot=y.textSizeData;let xr=null;Ot.kind==="source"?(xr=[Z0*z.layout.get("text-size").evaluate(V,{})],xr[0]>_f&&se(`${y.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)):Ot.kind==="composite"&&(xr=[Z0*Qe.compositeTextSizes[0].evaluate(V,{},tt),Z0*Qe.compositeTextSizes[1].evaluate(V,{},tt)],(xr[0]>_f||xr[1]>_f)&&se(`${y.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)),y.addSymbols(y.text,jt,xr,Q,O,V,he,p,ie.lineStartIndex,ie.lineLength,Ve,tt);for(const jr of Ee)Me[jr]=y.text.placedSymbolArray.length-1;return 4*jt.length}function p_(y){for(const p in y)return y[p];return null}function Xk(y,p,_,S){const z=y.compareText;if(p in z){const O=z[p];for(let V=O.length-1;V>=0;V--)if(S.dist(O[V])<_)return!0}else z[p]=[];return z[p].push(S),!1}const Yk=I0.VectorTileFeature.types,Jk=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function Zd(y,p,_,S,z,O,V,Q,ie,he,Ee,Me,Ve){const Qe=Q?Math.min(_f,Math.round(Q[0])):0,tt=Q?Math.min(_f,Math.round(Q[1])):0;y.emplaceBack(p,_,Math.round(32*S),Math.round(32*z),O,V,(Qe<<1)+(ie?1:0),tt,16*he,16*Ee,256*Me,256*Ve)}function q2(y,p,_){y.emplaceBack(p.x,p.y,_),y.emplaceBack(p.x,p.y,_),y.emplaceBack(p.x,p.y,_),y.emplaceBack(p.x,p.y,_)}function Kk(y){for(const p of y.sections)if(Mi(p.text))return!0;return!1}class V2{constructor(p){this.layoutVertexArray=new Ke,this.indexArray=new kr,this.programConfigurations=p,this.segments=new zt,this.dynamicLayoutVertexArray=new rt,this.opacityVertexArray=new gt,this.placedSymbolArray=new dn}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(p,_,S,z){this.isEmpty()||(S&&(this.layoutVertexBuffer=p.createVertexBuffer(this.layoutVertexArray,Z.members),this.indexBuffer=p.createIndexBuffer(this.indexArray,_),this.dynamicLayoutVertexBuffer=p.createVertexBuffer(this.dynamicLayoutVertexArray,ne.members,!0),this.opacityVertexBuffer=p.createVertexBuffer(this.opacityVertexArray,Jk,!0),this.opacityVertexBuffer.itemSize=1),(S||z)&&this.programConfigurations.upload(p))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}Pn("SymbolBuffers",V2);class $2{constructor(p,_,S){this.layoutVertexArray=new p,this.layoutAttributes=_,this.indexArray=new S,this.segments=new zt,this.collisionVertexArray=new Er}upload(p){this.layoutVertexBuffer=p.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=p.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=p.createVertexBuffer(this.collisionVertexArray,me.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}Pn("CollisionBuffers",$2);class wh{constructor(p){this.collisionBoxArray=p.collisionBoxArray,this.zoom=p.zoom,this.overscaling=p.overscaling,this.layers=p.layers,this.layerIds=this.layers.map(V=>V.id),this.index=p.index,this.pixelRatio=p.pixelRatio,this.sourceLayerIndex=p.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=nu([]),this.placementViewportMatrix=nu([]);const _=this.layers[0]._unevaluatedLayout._values;this.textSizeData=r_(this.zoom,_["text-size"]),this.iconSizeData=r_(this.zoom,_["icon-size"]);const S=this.layers[0].layout,z=S.get("symbol-sort-key"),O=S.get("symbol-z-order");this.canOverlap=H2(S,"text-overlap","text-allow-overlap")!=="never"||H2(S,"icon-overlap","icon-allow-overlap")!=="never"||S.get("text-ignore-placement")||S.get("icon-ignore-placement"),this.sortFeaturesByKey=O!=="viewport-y"&&!z.isConstant(),this.sortFeaturesByY=(O==="viewport-y"||O==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,S.get("symbol-placement")==="point"&&(this.writingModes=S.get("text-writing-mode").map(V=>l.WritingMode[V])),this.stateDependentLayerIds=this.layers.filter(V=>V.isStateDependent()).map(V=>V.id),this.sourceID=p.sourceID}createArrays(){this.text=new V2(new Ho(this.layers,this.zoom,p=>/^text/.test(p))),this.icon=new V2(new Ho(this.layers,this.zoom,p=>/^icon/.test(p))),this.glyphOffsetArray=new En,this.lineVertexArray=new Un,this.symbolInstances=new Mn}calculateGlyphDependencies(p,_,S,z,O){for(let V=0;V<p.length;V++)if(_[p.charCodeAt(V)]=!0,(S||z)&&O){const Q=kt[p.charAt(V)];Q&&(_[Q.charCodeAt(0)]=!0)}}populate(p,_,S){const z=this.layers[0],O=z.layout,V=O.get("text-font"),Q=O.get("text-field"),ie=O.get("icon-image"),he=(Q.value.kind!=="constant"||Q.value.value instanceof Ht&&!Q.value.value.isEmpty()||Q.value.value.toString().length>0)&&(V.value.kind!=="constant"||V.value.value.length>0),Ee=ie.value.kind!=="constant"||!!ie.value.value||Object.keys(ie.parameters).length>0,Me=O.get("symbol-sort-key");if(this.features=[],!he&&!Ee)return;const Ve=_.iconDependencies,Qe=_.glyphDependencies,tt=_.availableImages,jt=new Go(this.zoom);for(const{feature:Ot,id:xr,index:jr,sourceLayerIndex:dr}of p){const Lr=z._featureFilter.needGeometry,an=Ys(Ot,Lr);if(!z._featureFilter.filter(jt,an,S))continue;let tn,ri;if(Lr||(an.geometry=Fs(Ot)),he){const Gn=z.getValueAndResolveTokens("text-field",an,S,tt),Bn=Ht.factory(Gn);Kk(Bn)&&(this.hasRTLText=!0),(!this.hasRTLText||eu()==="unavailable"||this.hasRTLText&&Es.isParsed())&&(tn=at(Bn,z,an))}if(Ee){const Gn=z.getValueAndResolveTokens("icon-image",an,S,tt);ri=Gn instanceof ir?Gn:ir.fromString(Gn)}if(!tn&&!ri)continue;const fi=this.sortFeaturesByKey?Me.evaluate(an,{},S):void 0;if(this.features.push({id:xr,text:tn,icon:ri,index:jr,sourceLayerIndex:dr,geometry:an.geometry,properties:Ot.properties,type:Yk[Ot.type],sortKey:fi}),ri&&(Ve[ri.name]=!0),tn){const Gn=V.evaluate(an,{},S).join(","),Bn=O.get("text-rotation-alignment")!=="viewport"&&O.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(l.WritingMode.vertical)>=0;for(const Tn of tn.sections)if(Tn.image)Ve[Tn.image.name]=!0;else{const Hn=As(tn.toString()),qn=Tn.fontStack||Gn,wn=Qe[qn]=Qe[qn]||{};this.calculateGlyphDependencies(Tn.text,wn,Bn,this.allowVerticalPlacement,Hn)}}}O.get("symbol-placement")==="line"&&(this.features=function(Ot){const xr={},jr={},dr=[];let Lr=0;function an(Gn){dr.push(Ot[Gn]),Lr++}function tn(Gn,Bn,Tn){const Hn=jr[Gn];return delete jr[Gn],jr[Bn]=Hn,dr[Hn].geometry[0].pop(),dr[Hn].geometry[0]=dr[Hn].geometry[0].concat(Tn[0]),Hn}function ri(Gn,Bn,Tn){const Hn=xr[Bn];return delete xr[Bn],xr[Gn]=Hn,dr[Hn].geometry[0].shift(),dr[Hn].geometry[0]=Tn[0].concat(dr[Hn].geometry[0]),Hn}function fi(Gn,Bn,Tn){const Hn=Tn?Bn[0][Bn[0].length-1]:Bn[0][0];return`${Gn}:${Hn.x}:${Hn.y}`}for(let Gn=0;Gn<Ot.length;Gn++){const Bn=Ot[Gn],Tn=Bn.geometry,Hn=Bn.text?Bn.text.toString():null;if(!Hn){an(Gn);continue}const qn=fi(Hn,Tn),wn=fi(Hn,Tn,!0);if(qn in jr&&wn in xr&&jr[qn]!==xr[wn]){const Si=ri(qn,wn,Tn),mi=tn(qn,wn,dr[Si].geometry);delete xr[qn],delete jr[wn],jr[fi(Hn,dr[mi].geometry,!0)]=mi,dr[Si].geometry=null}else qn in jr?tn(qn,wn,Tn):wn in xr?ri(qn,wn,Tn):(an(Gn),xr[qn]=Lr-1,jr[wn]=Lr-1)}return dr.filter(Gn=>Gn.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((Ot,xr)=>Ot.sortKey-xr.sortKey)}update(p,_,S){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(p,_,this.layers,S),this.icon.programConfigurations.updatePaintArrays(p,_,this.layers,S))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(p){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(p),this.iconCollisionBox.upload(p)),this.text.upload(p,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(p,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(p,_){const S=this.lineVertexArray.length;if(p.segment!==void 0){let z=p.dist(_[p.segment+1]),O=p.dist(_[p.segment]);const V={};for(let Q=p.segment+1;Q<_.length;Q++)V[Q]={x:_[Q].x,y:_[Q].y,tileUnitDistanceFromAnchor:z},Q<_.length-1&&(z+=_[Q+1].dist(_[Q]));for(let Q=p.segment||0;Q>=0;Q--)V[Q]={x:_[Q].x,y:_[Q].y,tileUnitDistanceFromAnchor:O},Q>0&&(O+=_[Q-1].dist(_[Q]));for(let Q=0;Q<_.length;Q++){const ie=V[Q];this.lineVertexArray.emplaceBack(ie.x,ie.y,ie.tileUnitDistanceFromAnchor)}}return{lineStartIndex:S,lineLength:this.lineVertexArray.length-S}}addSymbols(p,_,S,z,O,V,Q,ie,he,Ee,Me,Ve){const Qe=p.indexArray,tt=p.layoutVertexArray,jt=p.segments.prepareSegment(4*_.length,tt,Qe,this.canOverlap?V.sortKey:void 0),Ot=this.glyphOffsetArray.length,xr=jt.vertexLength,jr=this.allowVerticalPlacement&&Q===l.WritingMode.vertical?Math.PI/2:0,dr=V.text&&V.text.sections;for(let Lr=0;Lr<_.length;Lr++){const{tl:an,tr:tn,bl:ri,br:fi,tex:Gn,pixelOffsetTL:Bn,pixelOffsetBR:Tn,minFontScaleX:Hn,minFontScaleY:qn,glyphOffset:wn,isSDF:Si,sectionIndex:mi}=_[Lr],po=jt.vertexLength,ka=wn[1];Zd(tt,ie.x,ie.y,an.x,ka+an.y,Gn.x,Gn.y,S,Si,Bn.x,Bn.y,Hn,qn),Zd(tt,ie.x,ie.y,tn.x,ka+tn.y,Gn.x+Gn.w,Gn.y,S,Si,Tn.x,Bn.y,Hn,qn),Zd(tt,ie.x,ie.y,ri.x,ka+ri.y,Gn.x,Gn.y+Gn.h,S,Si,Bn.x,Tn.y,Hn,qn),Zd(tt,ie.x,ie.y,fi.x,ka+fi.y,Gn.x+Gn.w,Gn.y+Gn.h,S,Si,Tn.x,Tn.y,Hn,qn),q2(p.dynamicLayoutVertexArray,ie,jr),Qe.emplaceBack(po,po+1,po+2),Qe.emplaceBack(po+1,po+2,po+3),jt.vertexLength+=4,jt.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(wn[0]),Lr!==_.length-1&&mi===_[Lr+1].sectionIndex||p.programConfigurations.populatePaintArrays(tt.length,V,V.index,{},Ve,dr&&dr[mi])}p.placedSymbolArray.emplaceBack(ie.x,ie.y,Ot,this.glyphOffsetArray.length-Ot,xr,he,Ee,ie.segment,S?S[0]:0,S?S[1]:0,z[0],z[1],Q,0,!1,0,Me)}_addCollisionDebugVertex(p,_,S,z,O,V){return _.emplaceBack(0,0),p.emplaceBack(S.x,S.y,z,O,Math.round(V.x),Math.round(V.y))}addCollisionDebugVertices(p,_,S,z,O,V,Q){const ie=O.segments.prepareSegment(4,O.layoutVertexArray,O.indexArray),he=ie.vertexLength,Ee=O.layoutVertexArray,Me=O.collisionVertexArray,Ve=Q.anchorX,Qe=Q.anchorY;this._addCollisionDebugVertex(Ee,Me,V,Ve,Qe,new ht(p,_)),this._addCollisionDebugVertex(Ee,Me,V,Ve,Qe,new ht(S,_)),this._addCollisionDebugVertex(Ee,Me,V,Ve,Qe,new ht(S,z)),this._addCollisionDebugVertex(Ee,Me,V,Ve,Qe,new ht(p,z)),ie.vertexLength+=4;const tt=O.indexArray;tt.emplaceBack(he,he+1),tt.emplaceBack(he+1,he+2),tt.emplaceBack(he+2,he+3),tt.emplaceBack(he+3,he),ie.primitiveLength+=4}addDebugCollisionBoxes(p,_,S,z){for(let O=p;O<_;O++){const V=this.collisionBoxArray.get(O);this.addCollisionDebugVertices(V.x1,V.y1,V.x2,V.y2,z?this.textCollisionBox:this.iconCollisionBox,V.anchorPoint,S)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new $2(rr,Ce.members,hr),this.iconCollisionBox=new $2(rr,Ce.members,hr);for(let p=0;p<this.symbolInstances.length;p++){const _=this.symbolInstances.get(p);this.addDebugCollisionBoxes(_.textBoxStartIndex,_.textBoxEndIndex,_,!0),this.addDebugCollisionBoxes(_.verticalTextBoxStartIndex,_.verticalTextBoxEndIndex,_,!0),this.addDebugCollisionBoxes(_.iconBoxStartIndex,_.iconBoxEndIndex,_,!1),this.addDebugCollisionBoxes(_.verticalIconBoxStartIndex,_.verticalIconBoxEndIndex,_,!1)}}_deserializeCollisionBoxesForSymbol(p,_,S,z,O,V,Q,ie,he){const Ee={};for(let Me=_;Me<S;Me++){const Ve=p.get(Me);Ee.textBox={x1:Ve.x1,y1:Ve.y1,x2:Ve.x2,y2:Ve.y2,anchorPointX:Ve.anchorPointX,anchorPointY:Ve.anchorPointY},Ee.textFeatureIndex=Ve.featureIndex;break}for(let Me=z;Me<O;Me++){const Ve=p.get(Me);Ee.verticalTextBox={x1:Ve.x1,y1:Ve.y1,x2:Ve.x2,y2:Ve.y2,anchorPointX:Ve.anchorPointX,anchorPointY:Ve.anchorPointY},Ee.verticalTextFeatureIndex=Ve.featureIndex;break}for(let Me=V;Me<Q;Me++){const Ve=p.get(Me);Ee.iconBox={x1:Ve.x1,y1:Ve.y1,x2:Ve.x2,y2:Ve.y2,anchorPointX:Ve.anchorPointX,anchorPointY:Ve.anchorPointY},Ee.iconFeatureIndex=Ve.featureIndex;break}for(let Me=ie;Me<he;Me++){const Ve=p.get(Me);Ee.verticalIconBox={x1:Ve.x1,y1:Ve.y1,x2:Ve.x2,y2:Ve.y2,anchorPointX:Ve.anchorPointX,anchorPointY:Ve.anchorPointY},Ee.verticalIconFeatureIndex=Ve.featureIndex;break}return Ee}deserializeCollisionBoxes(p){this.collisionArrays=[];for(let _=0;_<this.symbolInstances.length;_++){const S=this.symbolInstances.get(_);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(p,S.textBoxStartIndex,S.textBoxEndIndex,S.verticalTextBoxStartIndex,S.verticalTextBoxEndIndex,S.iconBoxStartIndex,S.iconBoxEndIndex,S.verticalIconBoxStartIndex,S.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(p,_){const S=p.placedSymbolArray.get(_),z=S.vertexStartIndex+4*S.numGlyphs;for(let O=S.vertexStartIndex;O<z;O+=4)p.indexArray.emplaceBack(O,O+1,O+2),p.indexArray.emplaceBack(O+1,O+2,O+3)}getSortedSymbolIndexes(p){if(this.sortedAngle===p&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const _=Math.sin(p),S=Math.cos(p),z=[],O=[],V=[];for(let Q=0;Q<this.symbolInstances.length;++Q){V.push(Q);const ie=this.symbolInstances.get(Q);z.push(0|Math.round(_*ie.anchorX+S*ie.anchorY)),O.push(ie.featureIndex)}return V.sort((Q,ie)=>z[Q]-z[ie]||O[ie]-O[Q]),V}addToSortKeyRanges(p,_){const S=this.sortKeyRanges[this.sortKeyRanges.length-1];S&&S.sortKey===_?S.symbolInstanceEnd=p+1:this.sortKeyRanges.push({sortKey:_,symbolInstanceStart:p,symbolInstanceEnd:p+1})}sortFeatures(p){if(this.sortFeaturesByY&&this.sortedAngle!==p&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(p),this.sortedAngle=p,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const _ of this.symbolInstanceIndexes){const S=this.symbolInstances.get(_);this.featureSortOrder.push(S.featureIndex),[S.rightJustifiedTextSymbolIndex,S.centerJustifiedTextSymbolIndex,S.leftJustifiedTextSymbolIndex].forEach((z,O,V)=>{z>=0&&V.indexOf(z)===O&&this.addIndicesForPlacedSymbol(this.text,z)}),S.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,S.verticalPlacedTextSymbolIndex),S.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,S.placedIconSymbolIndex),S.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,S.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}Pn("SymbolBucket",wh,{omit:["layers","collisionBoxArray","features","compareText"]}),wh.MAX_GLYPHS=65535,wh.addDynamicAttributes=q2;const Qk=new Bo({"symbol-placement":new oi(yr.layout_symbol["symbol-placement"]),"symbol-spacing":new oi(yr.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new oi(yr.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new vi(yr.layout_symbol["symbol-sort-key"]),"symbol-z-order":new oi(yr.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new oi(yr.layout_symbol["icon-allow-overlap"]),"icon-overlap":new oi(yr.layout_symbol["icon-overlap"]),"icon-ignore-placement":new oi(yr.layout_symbol["icon-ignore-placement"]),"icon-optional":new oi(yr.layout_symbol["icon-optional"]),"icon-rotation-alignment":new oi(yr.layout_symbol["icon-rotation-alignment"]),"icon-size":new vi(yr.layout_symbol["icon-size"]),"icon-text-fit":new oi(yr.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new oi(yr.layout_symbol["icon-text-fit-padding"]),"icon-image":new vi(yr.layout_symbol["icon-image"]),"icon-rotate":new vi(yr.layout_symbol["icon-rotate"]),"icon-padding":new vi(yr.layout_symbol["icon-padding"]),"icon-keep-upright":new oi(yr.layout_symbol["icon-keep-upright"]),"icon-offset":new vi(yr.layout_symbol["icon-offset"]),"icon-anchor":new vi(yr.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new oi(yr.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new oi(yr.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new oi(yr.layout_symbol["text-rotation-alignment"]),"text-field":new vi(yr.layout_symbol["text-field"]),"text-font":new vi(yr.layout_symbol["text-font"]),"text-size":new vi(yr.layout_symbol["text-size"]),"text-max-width":new vi(yr.layout_symbol["text-max-width"]),"text-line-height":new oi(yr.layout_symbol["text-line-height"]),"text-letter-spacing":new vi(yr.layout_symbol["text-letter-spacing"]),"text-justify":new vi(yr.layout_symbol["text-justify"]),"text-radial-offset":new vi(yr.layout_symbol["text-radial-offset"]),"text-variable-anchor":new oi(yr.layout_symbol["text-variable-anchor"]),"text-anchor":new vi(yr.layout_symbol["text-anchor"]),"text-max-angle":new oi(yr.layout_symbol["text-max-angle"]),"text-writing-mode":new oi(yr.layout_symbol["text-writing-mode"]),"text-rotate":new vi(yr.layout_symbol["text-rotate"]),"text-padding":new oi(yr.layout_symbol["text-padding"]),"text-keep-upright":new oi(yr.layout_symbol["text-keep-upright"]),"text-transform":new vi(yr.layout_symbol["text-transform"]),"text-offset":new vi(yr.layout_symbol["text-offset"]),"text-allow-overlap":new oi(yr.layout_symbol["text-allow-overlap"]),"text-overlap":new oi(yr.layout_symbol["text-overlap"]),"text-ignore-placement":new oi(yr.layout_symbol["text-ignore-placement"]),"text-optional":new oi(yr.layout_symbol["text-optional"])});var G2={paint:new Bo({"icon-opacity":new vi(yr.paint_symbol["icon-opacity"]),"icon-color":new vi(yr.paint_symbol["icon-color"]),"icon-halo-color":new vi(yr.paint_symbol["icon-halo-color"]),"icon-halo-width":new vi(yr.paint_symbol["icon-halo-width"]),"icon-halo-blur":new vi(yr.paint_symbol["icon-halo-blur"]),"icon-translate":new oi(yr.paint_symbol["icon-translate"]),"icon-translate-anchor":new oi(yr.paint_symbol["icon-translate-anchor"]),"text-opacity":new vi(yr.paint_symbol["text-opacity"]),"text-color":new vi(yr.paint_symbol["text-color"],{runtimeType:ci,getOverride:y=>y.textColor,hasOverride:y=>!!y.textColor}),"text-halo-color":new vi(yr.paint_symbol["text-halo-color"]),"text-halo-width":new vi(yr.paint_symbol["text-halo-width"]),"text-halo-blur":new vi(yr.paint_symbol["text-halo-blur"]),"text-translate":new oi(yr.paint_symbol["text-translate"]),"text-translate-anchor":new oi(yr.paint_symbol["text-translate-anchor"])}),layout:Qk};class d_{constructor(p){if(p.property.overrides===void 0)throw new Error("overrides must be provided to instantiate FormatSectionOverride class");this.type=p.property.overrides?p.property.overrides.runtimeType:un,this.defaultValue=p}evaluate(p){if(p.formattedSection){const _=this.defaultValue.property.overrides;if(_&&_.hasOverride(p.formattedSection))return _.getOverride(p.formattedSection)}return p.feature&&p.featureState?this.defaultValue.evaluate(p.feature,p.featureState):this.defaultValue.property.specification.default}eachChild(p){this.defaultValue.isConstant()||p(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}Pn("FormatSectionOverride",d_,{omit:["defaultValue"]});class Xd extends Xs{constructor(p){super(p,G2)}recalculate(p,_){if(super.recalculate(p,_),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")==="map"?"map":"viewport"),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){const S=this.layout.get("text-writing-mode");if(S){const z=[];for(const O of S)z.indexOf(O)<0&&z.push(O);this.layout._values["text-writing-mode"]=z}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(p,_,S,z){const O=this.layout.get(p).evaluate(_,{},S,z),V=this._unevaluatedLayout._values[p];return V.isDataDriven()||qo(V.value)||!O?O:function(Q,ie){return ie.replace(/{([^{}]+)}/g,(he,Ee)=>Ee in Q?String(Q[Ee]):"")}(_.properties,O)}createBucket(p){return new wh(p)}queryRadius(){return 0}queryIntersectsFeature(){throw new Error("Should take a different path in FeatureIndex")}_setPaintOverrides(){for(const p of G2.paint.overridableProperties){if(!Xd.hasPaintOverride(this.layout,p))continue;const _=this.paint.get(p),S=new d_(_),z=new fo(S,_.property.specification);let O=null;O=_.value.kind==="constant"||_.value.kind==="source"?new Qo("source",z):new Da("composite",z,_.value.zoomStops),this.paint._values[p]=new al(_.property,O,_.parameters)}}_handleOverridablePaintPropertyUpdate(p,_,S){return!(!this.layout||_.isDataDriven()||S.isDataDriven())&&Xd.hasPaintOverride(this.layout,p)}static hasPaintOverride(p,_){const S=p.get("text-field"),z=G2.paint.properties[_];let O=!1;const V=Q=>{for(const ie of Q)if(z.overrides&&z.overrides.hasOverride(ie))return void(O=!0)};if(S.value.kind==="constant"&&S.value.value instanceof Ht)V(S.value.value.sections);else if(S.value.kind==="source"){const Q=he=>{O||(he instanceof Wn&&Fr(he.value)===li?V(he.value.sections):he instanceof _u?V(he.sections):he.eachChild(Q))},ie=S.value;ie._styleExpression&&Q(ie._styleExpression.expression)}return O}}function H2(y,p,_){let S="never";const z=y.get(p);return z?S=z:y.get(_)&&(S="always"),S}var eA={paint:new Bo({"background-color":new oi(yr.paint_background["background-color"]),"background-pattern":new Yu(yr.paint_background["background-pattern"]),"background-opacity":new oi(yr.paint_background["background-opacity"])})},tA={paint:new Bo({"raster-opacity":new oi(yr.paint_raster["raster-opacity"]),"raster-hue-rotate":new oi(yr.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new oi(yr.paint_raster["raster-brightness-min"]),"raster-brightness-max":new oi(yr.paint_raster["raster-brightness-max"]),"raster-saturation":new oi(yr.paint_raster["raster-saturation"]),"raster-contrast":new oi(yr.paint_raster["raster-contrast"]),"raster-resampling":new oi(yr.paint_raster["raster-resampling"]),"raster-fade-duration":new oi(yr.paint_raster["raster-fade-duration"])})};class rA extends Xs{constructor(p){super(p,{}),this.onAdd=_=>{this.implementation.onAdd&&this.implementation.onAdd(_,_.painter.context.gl)},this.onRemove=_=>{this.implementation.onRemove&&this.implementation.onRemove(_,_.painter.context.gl)},this.implementation=p}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){throw new Error("Custom layers cannot be serialized")}}const nA={circle:class extends Xs{constructor(y){super(y,Fc)}createBucket(y){return new da(y)}queryRadius(y){const p=y;return mc("circle-radius",this,p)+mc("circle-stroke-width",this,p)+gc(this.paint.get("circle-translate"))}queryIntersectsFeature(y,p,_,S,z,O,V,Q){const ie=yc(y,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),O.angle,V),he=this.paint.get("circle-radius").evaluate(p,_)+this.paint.get("circle-stroke-width").evaluate(p,_),Ee=this.paint.get("circle-pitch-alignment")==="map",Me=Ee?ie:function(Qe,tt){return Qe.map(jt=>ue(jt,tt))}(ie,Q),Ve=Ee?he*V:he;for(const Qe of S)for(const tt of Qe){const jt=Ee?tt:ue(tt,Q);let Ot=Ve;const xr=va([],[tt.x,tt.y,0,1],Q);if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?Ot*=xr[3]/O.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(Ot*=O.cameraToCenterDistance/xr[3]),G0(Me,jt,Ot))return!0}return!1}},heatmap:class extends Xs{constructor(y){super(y,qe),this._updateColorRamp()}createBucket(y){return new we(y)}_handleSpecialPaintPropertyUpdate(y){y==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=Cr({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)}queryRadius(){return 0}queryIntersectsFeature(){return!1}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}},hillshade:class extends Xs{constructor(y){super(y,on)}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}},fill:class extends Xs{constructor(y){super(y,Dd)}recalculate(y,p){super.recalculate(y,p);const _=this.paint._values["fill-outline-color"];_.value.kind==="constant"&&_.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(y){return new kp(y)}queryRadius(){return gc(this.paint.get("fill-translate"))}queryIntersectsFeature(y,p,_,S,z,O,V){return Ll(yc(y,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),O.angle,V),S)}isTileClipped(){return!0}},"fill-extrusion":class extends Xs{constructor(y){super(y,N2)}createBucket(y){return new Vf(y)}queryRadius(){return gc(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature(y,p,_,S,z,O,V,Q){const ie=yc(y,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),O.angle,V),he=this.paint.get("fill-extrusion-height").evaluate(p,_),Ee=this.paint.get("fill-extrusion-base").evaluate(p,_),Me=function(Qe,tt,jt,Ot){const xr=[];for(const jr of Qe){const dr=[jr.x,jr.y,0,1];va(dr,dr,tt),xr.push(new ht(dr[0]/dr[3],dr[1]/dr[3]))}return xr}(ie,Q),Ve=function(Qe,tt,jt,Ot){const xr=[],jr=[],dr=Ot[8]*tt,Lr=Ot[9]*tt,an=Ot[10]*tt,tn=Ot[11]*tt,ri=Ot[8]*jt,fi=Ot[9]*jt,Gn=Ot[10]*jt,Bn=Ot[11]*jt;for(const Tn of Qe){const Hn=[],qn=[];for(const wn of Tn){const Si=wn.x,mi=wn.y,po=Ot[0]*Si+Ot[4]*mi+Ot[12],ka=Ot[1]*Si+Ot[5]*mi+Ot[13],Pa=Ot[2]*Si+Ot[6]*mi+Ot[14],Cs=Ot[3]*Si+Ot[7]*mi+Ot[15],xc=Pa+an,ll=Cs+tn,ps=po+ri,qs=ka+fi,ul=Pa+Gn,Ml=Cs+Bn,Cu=new ht((po+dr)/ll,(ka+Lr)/ll);Cu.z=xc/ll,Hn.push(Cu);const ds=new ht(ps/Ml,qs/Ml);ds.z=ul/Ml,qn.push(ds)}xr.push(Hn),jr.push(qn)}return[xr,jr]}(S,Ee,he,Q);return function(Qe,tt,jt){let Ot=1/0;Ll(jt,tt)&&(Ot=Fd(jt,tt[0]));for(let xr=0;xr<tt.length;xr++){const jr=tt[xr],dr=Qe[xr];for(let Lr=0;Lr<jr.length-1;Lr++){const an=jr[Lr],tn=[an,jr[Lr+1],dr[Lr+1],dr[Lr],an];x0(jt,tn)&&(Ot=Math.min(Ot,Fd(jt,tn)))}}return Ot!==1/0&&Ot}(Ve[0],Ve[1],Me)}},line:class extends Xs{constructor(y){super(y,P),this.gradientVersion=0}_handleSpecialPaintPropertyUpdate(y){y==="line-gradient"&&(this.stepInterpolant=this._transitionablePaint._values["line-gradient"].value.expression._styleExpression.expression instanceof _s,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER)}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(y,p){super.recalculate(y,p),this.paint._values["line-floorwidth"]=j.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,y)}createBucket(y){return new x(y)}queryRadius(y){const p=y,_=B(mc("line-width",this,p),mc("line-gap-width",this,p)),S=mc("line-offset",this,p);return _/2+Math.abs(S)+gc(this.paint.get("line-translate"))}queryIntersectsFeature(y,p,_,S,z,O,V){const Q=yc(y,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),O.angle,V),ie=V/2*B(this.paint.get("line-width").evaluate(p,_),this.paint.get("line-gap-width").evaluate(p,_)),he=this.paint.get("line-offset").evaluate(p,_);return he&&(S=function(Ee,Me){const Ve=[];for(let Qe=0;Qe<Ee.length;Qe++){const tt=Ee[Qe],jt=[];for(let Ot=0;Ot<tt.length;Ot++){const xr=tt[Ot-1],jr=tt[Ot],dr=tt[Ot+1],Lr=Ot===0?new ht(0,0):jr.sub(xr)._unit()._perp(),an=Ot===tt.length-1?new ht(0,0):dr.sub(jr)._unit()._perp(),tn=Lr._add(an)._unit(),ri=tn.x*an.x+tn.y*an.y;ri!==0&&tn._mult(1/ri),jt.push(tn._mult(Me)._add(jr))}Ve.push(jt)}return Ve}(S,he*V)),function(Ee,Me,Ve){for(let Qe=0;Qe<Me.length;Qe++){const tt=Me[Qe];if(Ee.length>=3){for(let jt=0;jt<tt.length;jt++)if(Ju(Ee,tt[jt]))return!0}if(fa(Ee,tt,Ve))return!0}return!1}(Q,S,ie)}isTileClipped(){return!0}},symbol:Xd,background:class extends Xs{constructor(y){super(y,eA)}},raster:class extends Xs{constructor(y){super(y,tA)}}};class iA{constructor(p){this._callback=p,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._callback()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._callback()},0))}remove(){delete this._channel,this._callback=()=>{}}}const m_=63710088e-1;class Qa{constructor(p,_){if(isNaN(p)||isNaN(_))throw new Error(`Invalid LngLat object: (${p}, ${_})`);if(this.lng=+p,this.lat=+_,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new Qa(I(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(p){const _=Math.PI/180,S=this.lat*_,z=p.lat*_,O=Math.sin(S)*Math.sin(z)+Math.cos(S)*Math.cos(z)*Math.cos((p.lng-this.lng)*_);return m_*Math.acos(Math.min(O,1))}toBounds(p=0){const _=360*p/40075017,S=_/Math.cos(Math.PI/180*this.lat);return new Gf(new Qa(this.lng-S,this.lat-_),new Qa(this.lng+S,this.lat+_))}static convert(p){if(p instanceof Qa)return p;if(Array.isArray(p)&&(p.length===2||p.length===3))return new Qa(Number(p[0]),Number(p[1]));if(!Array.isArray(p)&&typeof p=="object"&&p!==null)return new Qa(Number("lng"in p?p.lng:p.lon),Number(p.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}class Gf{constructor(p,_){p&&(_?this.setSouthWest(p).setNorthEast(_):p.length===4?this.setSouthWest([p[0],p[1]]).setNorthEast([p[2],p[3]]):this.setSouthWest(p[0]).setNorthEast(p[1]))}setNorthEast(p){return this._ne=p instanceof Qa?new Qa(p.lng,p.lat):Qa.convert(p),this}setSouthWest(p){return this._sw=p instanceof Qa?new Qa(p.lng,p.lat):Qa.convert(p),this}extend(p){const _=this._sw,S=this._ne;let z,O;if(p instanceof Qa)z=p,O=p;else{if(!(p instanceof Gf))return Array.isArray(p)?p.length===4||p.every(Array.isArray)?this.extend(Gf.convert(p)):this.extend(Qa.convert(p)):this;if(z=p._sw,O=p._ne,!z||!O)return this}return _||S?(_.lng=Math.min(z.lng,_.lng),_.lat=Math.min(z.lat,_.lat),S.lng=Math.max(O.lng,S.lng),S.lat=Math.max(O.lat,S.lat)):(this._sw=new Qa(z.lng,z.lat),this._ne=new Qa(O.lng,O.lat)),this}getCenter(){return new Qa((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new Qa(this.getWest(),this.getNorth())}getSouthEast(){return new Qa(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(p){const{lng:_,lat:S}=Qa.convert(p);let z=this._sw.lng<=_&&_<=this._ne.lng;return this._sw.lng>this._ne.lng&&(z=this._sw.lng>=_&&_>=this._ne.lng),this._sw.lat<=S&&S<=this._ne.lat&&z}static convert(p){return p instanceof Gf?p:p&&new Gf(p)}}const g_=2*Math.PI*m_;function y_(y){return g_*Math.cos(y*Math.PI/180)}function v_(y){return(180+y)/360}function __(y){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+y*Math.PI/360)))/360}function b_(y,p){return y/y_(p)}function W2(y){return 360/Math.PI*Math.atan(Math.exp((180-360*y)*Math.PI/180))-90}class Yd{constructor(p,_,S=0){this.x=+p,this.y=+_,this.z=+S}static fromLngLat(p,_=0){const S=Qa.convert(p);return new Yd(v_(S.lng),__(S.lat),b_(_,S.lat))}toLngLat(){return new Qa(360*this.x-180,W2(this.y))}toAltitude(){return this.z*y_(W2(this.y))}meterInMercatorCoordinateUnits(){return 1/g_*(p=W2(this.y),1/Math.cos(p*Math.PI/180));var p}}function w_(y,p,_){var S=2*Math.PI*6378137/256/Math.pow(2,_);return[y*S-2*Math.PI*6378137/2,p*S-2*Math.PI*6378137/2]}class Z2{constructor(p,_,S){if(p<0||p>25||S<0||S>=Math.pow(2,p)||_<0||_>=Math.pow(2,p))throw new Error(`x=${_}, y=${S}, z=${p} outside of bounds. 0<=x<${Math.pow(2,p)}, 0<=y<${Math.pow(2,p)} 0<=z<=25 `);this.z=p,this.x=_,this.y=S,this.key=Sp(0,p,p,_,S)}equals(p){return this.z===p.z&&this.x===p.x&&this.y===p.y}url(p,_,S){const z=(V=this.y,Q=this.z,ie=w_(256*(O=this.x),256*(V=Math.pow(2,Q)-V-1),Q),he=w_(256*(O+1),256*(V+1),Q),ie[0]+","+ie[1]+","+he[0]+","+he[1]);var O,V,Q,ie,he;const Ee=function(Me,Ve,Qe){let tt,jt="";for(let Ot=Me;Ot>0;Ot--)tt=1<<Ot-1,jt+=(Ve&tt?1:0)+(Qe&tt?2:0);return jt}(this.z,this.x,this.y);return p[(this.x+this.y)%p.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(S==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,_>1?"@2x":"").replace(/{quadkey}/g,Ee).replace(/{bbox-epsg-3857}/g,z)}isChildOf(p){const _=this.z-p.z;return _>0&&p.x===this.x>>_&&p.y===this.y>>_}getTilePoint(p){const _=Math.pow(2,this.z);return new ht((p.x*_-this.x)*Vo,(p.y*_-this.y)*Vo)}toString(){return`${this.z}/${this.x}/${this.y}`}}class x_{constructor(p,_){this.wrap=p,this.canonical=_,this.key=Sp(p,_.z,_.z,_.x,_.y)}}class wc{constructor(p,_,S,z,O){if(p<S)throw new Error(`overscaledZ should be >= z; overscaledZ = ${p}; z = ${S}`);this.overscaledZ=p,this.wrap=_,this.canonical=new Z2(S,+z,+O),this.key=Sp(_,p,S,z,O)}clone(){return new wc(this.overscaledZ,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)}equals(p){return this.overscaledZ===p.overscaledZ&&this.wrap===p.wrap&&this.canonical.equals(p.canonical)}scaledTo(p){if(p>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${p}; overscaledZ = ${this.overscaledZ}`);const _=this.canonical.z-p;return p>this.canonical.z?new wc(p,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new wc(p,this.wrap,p,this.canonical.x>>_,this.canonical.y>>_)}calculateScaledKey(p,_){if(p>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${p}; overscaledZ = ${this.overscaledZ}`);const S=this.canonical.z-p;return p>this.canonical.z?Sp(this.wrap*+_,p,this.canonical.z,this.canonical.x,this.canonical.y):Sp(this.wrap*+_,p,p,this.canonical.x>>S,this.canonical.y>>S)}isChildOf(p){if(p.wrap!==this.wrap)return!1;const _=this.canonical.z-p.canonical.z;return p.overscaledZ===0||p.overscaledZ<this.overscaledZ&&p.canonical.x===this.canonical.x>>_&&p.canonical.y===this.canonical.y>>_}children(p){if(this.overscaledZ>=p)return[new wc(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const _=this.canonical.z+1,S=2*this.canonical.x,z=2*this.canonical.y;return[new wc(_,this.wrap,_,S,z),new wc(_,this.wrap,_,S+1,z),new wc(_,this.wrap,_,S,z+1),new wc(_,this.wrap,_,S+1,z+1)]}isLessThan(p){return this.wrap<p.wrap||!(this.wrap>p.wrap)&&(this.overscaledZ<p.overscaledZ||!(this.overscaledZ>p.overscaledZ)&&(this.canonical.x<p.canonical.x||!(this.canonical.x>p.canonical.x)&&this.canonical.y<p.canonical.y))}wrapped(){return new wc(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(p){return new wc(this.overscaledZ,p,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new x_(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(p){return this.canonical.getTilePoint(new Yd(p.x-this.wrap,p.y))}}function Sp(y,p,_,S,z){(y*=2)<0&&(y=-1*y-1);const O=1<<_;return(O*O*y+O*z+S).toString(36)+_.toString(36)+p.toString(36)}Pn("CanonicalTileID",Z2),Pn("OverscaledTileID",wc,{omit:["posMatrix"]});class k_{constructor(p,_,S){if(this.uid=p,_.height!==_.width)throw new RangeError("DEM tiles must be square");if(S&&S!=="mapbox"&&S!=="terrarium")return void se(`"${S}" is not a valid encoding type. Valid types include "mapbox" and "terrarium".`);this.stride=_.height;const z=this.dim=_.height-2;this.data=new Uint32Array(_.data.buffer),this.encoding=S||"mapbox";for(let O=0;O<z;O++)this.data[this._idx(-1,O)]=this.data[this._idx(0,O)],this.data[this._idx(z,O)]=this.data[this._idx(z-1,O)],this.data[this._idx(O,-1)]=this.data[this._idx(O,0)],this.data[this._idx(O,z)]=this.data[this._idx(O,z-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(z,-1)]=this.data[this._idx(z-1,0)],this.data[this._idx(-1,z)]=this.data[this._idx(0,z-1)],this.data[this._idx(z,z)]=this.data[this._idx(z-1,z-1)],this.min=Number.MAX_SAFE_INTEGER,this.max=Number.MIN_SAFE_INTEGER;for(let O=0;O<z;O++)for(let V=0;V<z;V++){const Q=this.get(O,V);Q>this.max&&(this.max=Q),Q<this.min&&(this.min=Q)}}get(p,_){const S=new Uint8Array(this.data.buffer),z=4*this._idx(p,_);return(this.encoding==="terrarium"?this._unpackTerrarium:this._unpackMapbox)(S[z],S[z+1],S[z+2])}getUnpackVector(){return this.encoding==="terrarium"?[256,1,1/256,32768]:[6553.6,25.6,.1,1e4]}_idx(p,_){if(p<-1||p>=this.dim+1||_<-1||_>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(_+1)*this.stride+(p+1)}_unpackMapbox(p,_,S){return(256*p*256+256*_+S)/10-1e4}_unpackTerrarium(p,_,S){return 256*p+_+S/256-32768}getPixels(){return new _r({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(p,_,S){if(this.dim!==p.dim)throw new Error("dem dimension mismatch");let z=_*this.dim,O=_*this.dim+this.dim,V=S*this.dim,Q=S*this.dim+this.dim;switch(_){case-1:z=O-1;break;case 1:O=z+1}switch(S){case-1:V=Q-1;break;case 1:Q=V+1}const ie=-_*this.dim,he=-S*this.dim;for(let Ee=V;Ee<Q;Ee++)for(let Me=z;Me<O;Me++)this.data[this._idx(Me,Ee)]=p.data[this._idx(Me+ie,Ee+he)]}}Pn("DEMData",k_);class A_{constructor(p){this._stringToNumber={},this._numberToString=[];for(let _=0;_<p.length;_++){const S=p[_];this._stringToNumber[S]=_,this._numberToString[_]=S}}encode(p){return this._stringToNumber[p]}decode(p){if(p>=this._numberToString.length)throw new Error(`Out of bounds. Index requested n=${p} can't be >= this._numberToString.length ${this._numberToString.length}`);return this._numberToString[p]}}class E_{constructor(p,_,S,z,O){this.type="Feature",this._vectorTileFeature=p,p._z=_,p._x=S,p._y=z,this.properties=p.properties,this.id=O}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry}set geometry(p){this._geometry=p}toJSON(){const p={geometry:this.geometry};for(const _ in this)_!=="_geometry"&&_!=="_vectorTileFeature"&&(p[_]=this[_]);return p}}class S_{constructor(p,_){this.tileID=p,this.x=p.canonical.x,this.y=p.canonical.y,this.z=p.canonical.z,this.grid=new Cl(Vo,16,0),this.grid3D=new Cl(Vo,16,0),this.featureIndexArray=new Di,this.promoteId=_}insert(p,_,S,z,O,V){const Q=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(S,z,O);const ie=V?this.grid3D:this.grid;for(let he=0;he<_.length;he++){const Ee=_[he],Me=[1/0,1/0,-1/0,-1/0];for(let Ve=0;Ve<Ee.length;Ve++){const Qe=Ee[Ve];Me[0]=Math.min(Me[0],Qe.x),Me[1]=Math.min(Me[1],Qe.y),Me[2]=Math.max(Me[2],Qe.x),Me[3]=Math.max(Me[3],Qe.y)}Me[0]<Vo&&Me[1]<Vo&&Me[2]>=0&&Me[3]>=0&&ie.insert(Q,Me[0],Me[1],Me[2],Me[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=new I0.VectorTile(new Qt(this.rawTileData)).layers,this.sourceLayerCoder=new A_(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers}query(p,_,S,z){this.loadVTLayers();const O=p.params||{},V=Vo/p.tileSize/p.scale,Q=Na(O.filter),ie=p.queryGeometry,he=p.queryPadding*V,Ee=I_(ie),Me=this.grid.query(Ee.minX-he,Ee.minY-he,Ee.maxX+he,Ee.maxY+he),Ve=I_(p.cameraQueryGeometry),Qe=this.grid3D.query(Ve.minX-he,Ve.minY-he,Ve.maxX+he,Ve.maxY+he,(Ot,xr,jr,dr)=>function(Lr,an,tn,ri,fi){for(const Bn of Lr)if(an<=Bn.x&&tn<=Bn.y&&ri>=Bn.x&&fi>=Bn.y)return!0;const Gn=[new ht(an,tn),new ht(an,fi),new ht(ri,fi),new ht(ri,tn)];if(Lr.length>2){for(const Bn of Gn)if(Ju(Lr,Bn))return!0}for(let Bn=0;Bn<Lr.length-1;Bn++)if(A0(Lr[Bn],Lr[Bn+1],Gn))return!0;return!1}(p.cameraQueryGeometry,Ot-he,xr-he,jr+he,dr+he));for(const Ot of Qe)Me.push(Ot);Me.sort(oA);const tt={};let jt;for(let Ot=0;Ot<Me.length;Ot++){const xr=Me[Ot];if(xr===jt)continue;jt=xr;const jr=this.featureIndexArray.get(xr);let dr=null;this.loadMatchingFeature(tt,jr.bucketIndex,jr.sourceLayerIndex,jr.featureIndex,Q,O.layers,O.availableImages,_,S,z,(Lr,an,tn)=>(dr||(dr=Fs(Lr)),an.queryIntersectsFeature(ie,Lr,tn,dr,this.z,p.transform,V,p.pixelPosMatrix)))}return tt}loadMatchingFeature(p,_,S,z,O,V,Q,ie,he,Ee,Me){const Ve=this.bucketLayerIDs[_];if(V&&!function(Ot,xr){for(let jr=0;jr<Ot.length;jr++)if(xr.indexOf(Ot[jr])>=0)return!0;return!1}(V,Ve))return;const Qe=this.sourceLayerCoder.decode(S),tt=this.vtLayers[Qe].feature(z);if(O.needGeometry){const Ot=Ys(tt,!0);if(!O.filter(new Go(this.tileID.overscaledZ),Ot,this.tileID.canonical))return}else if(!O.filter(new Go(this.tileID.overscaledZ),tt))return;const jt=this.getId(tt,Qe);for(let Ot=0;Ot<Ve.length;Ot++){const xr=Ve[Ot];if(V&&V.indexOf(xr)<0)continue;const jr=ie[xr];if(!jr)continue;let dr={};jt&&Ee&&(dr=Ee.getState(jr.sourceLayer||"_geojsonTileLayer",jt));const Lr=F({},he[xr]);Lr.paint=C_(Lr.paint,jr.paint,tt,dr,Q),Lr.layout=C_(Lr.layout,jr.layout,tt,dr,Q);const an=!Me||Me(tt,jr,dr);if(!an)continue;const tn=new E_(tt,this.z,this.x,this.y,jt);tn.layer=Lr;let ri=p[xr];ri===void 0&&(ri=p[xr]=[]),ri.push({featureIndex:z,feature:tn,intersectionZ:an})}}lookupSymbolFeatures(p,_,S,z,O,V,Q,ie){const he={};this.loadVTLayers();const Ee=Na(O);for(const Me of p)this.loadMatchingFeature(he,S,z,Me,Ee,V,Q,ie,_);return he}hasLayer(p){for(const _ of this.bucketLayerIDs)for(const S of _)if(p===S)return!0;return!1}getId(p,_){let S=p.id;return this.promoteId&&(S=p.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[_]],typeof S=="boolean"&&(S=Number(S))),S}}function C_(y,p,_,S,z){return H(y,(O,V)=>{const Q=p instanceof pc?p.get(V):null;return Q&&Q.evaluate?Q.evaluate(_,S,z):Q})}function I_(y){let p=1/0,_=1/0,S=-1/0,z=-1/0;for(const O of y)p=Math.min(p,O.x),_=Math.min(_,O.y),S=Math.max(S,O.x),z=Math.max(z,O.y);return{minX:p,minY:_,maxX:S,maxY:z}}function oA(y,p){return p-y}var X2;Pn("FeatureIndex",S_,{omit:["rawTileData","sourceLayerCoder"]}),l.PerformanceMarkers=void 0,(X2=l.PerformanceMarkers||(l.PerformanceMarkers={})).create="create",X2.load="load",X2.fullLoad="fullLoad";let Jd=null,Cp=[];const Y2=1e3/30,aA={mark(y){performance.mark(y)},frame(y){const p=y;Jd!=null&&Cp.push(p-Jd),Jd=p},clearMetrics(){Jd=null,Cp=[],performance.clearMeasures("loadTime"),performance.clearMeasures("fullLoadTime");for(const y in l.PerformanceMarkers)performance.clearMarks(l.PerformanceMarkers[y])},getPerformanceMetrics(){performance.measure("loadTime",l.PerformanceMarkers.create,l.PerformanceMarkers.load),performance.measure("fullLoadTime",l.PerformanceMarkers.create,l.PerformanceMarkers.fullLoad);const y=performance.getEntriesByName("loadTime")[0].duration,p=performance.getEntriesByName("fullLoadTime")[0].duration,_=Cp.length,S=1/(Cp.reduce((O,V)=>O+V,0)/_/1e3),z=Cp.filter(O=>O>Y2).reduce((O,V)=>O+(V-Y2)/Y2,0);return{loadTime:y,fullLoadTime:p,fps:S,percentDroppedFrames:z/(_+z)*100}}};l.AJAXError=Mr,l.ARRAY_TYPE=Ja,l.Actor=class{constructor(y,p,_){this.target=y,this.parent=p,this.mapId=_,this.callbacks={},this.tasks={},this.taskQueue=[],this.cancelCallbacks={},G(["receive","process"],this),this.invoker=new iA(this.process),this.target.addEventListener("message",this.receive,!1),this.globalScope=pe()?y:window}send(y,p,_,S,z=!1){const O=Math.round(1e18*Math.random()).toString(36).substring(0,10);_&&(this.callbacks[O]=_);const V=Fe(this.globalScope)?void 0:[];return this.target.postMessage({id:O,type:y,hasCallback:!!_,targetMapId:S,mustQueue:z,sourceMapId:this.mapId,data:Ji(p,V)},V),{cancel:()=>{_&&delete this.callbacks[O],this.target.postMessage({id:O,type:"<cancel>",targetMapId:S,sourceMapId:this.mapId})}}}receive(y){const p=y.data,_=p.id;if(_&&(!p.targetMapId||this.mapId===p.targetMapId))if(p.type==="<cancel>"){delete this.tasks[_];const S=this.cancelCallbacks[_];delete this.cancelCallbacks[_],S&&S()}else pe()||p.mustQueue?(this.tasks[_]=p,this.taskQueue.push(_),this.invoker.trigger()):this.processTask(_,p)}process(){if(!this.taskQueue.length)return;const y=this.taskQueue.shift(),p=this.tasks[y];delete this.tasks[y],this.taskQueue.length&&this.invoker.trigger(),p&&this.processTask(y,p)}processTask(y,p){if(p.type==="<response>"){const _=this.callbacks[y];delete this.callbacks[y],_&&(p.error?_(Fo(p.error)):_(null,Fo(p.data)))}else{let _=!1;const S=Fe(this.globalScope)?void 0:[],z=p.hasCallback?(Q,ie)=>{_=!0,delete this.cancelCallbacks[y],this.target.postMessage({id:y,type:"<response>",sourceMapId:this.mapId,error:Q?Ji(Q):null,data:Ji(ie,S)},S)}:Q=>{_=!0};let O=null;const V=Fo(p.data);if(this.parent[p.type])O=this.parent[p.type](p.sourceMapId,V,z);else if(this.parent.getWorkerSource){const Q=p.type.split(".");O=this.parent.getWorkerSource(p.sourceMapId,Q[0],V.source)[Q[1]](V,z)}else z(new Error(`Could not find function ${p.type}`));!_&&O&&O.cancel&&(this.cancelCallbacks[y]=O.cancel)}}remove(){this.invoker.remove(),this.target.removeEventListener("message",this.receive,!1)}},l.AlphaImage=Zt,l.CanonicalTileID=Z2,l.CollisionBoxArray=Zr,l.CollisionCircleLayoutArray=class extends Se{},l.Color=st,l.DEMData=k_,l.DataConstantProperty=oi,l.DictionaryCoder=A_,l.EXTENT=Vo,l.ErrorEvent=_i,l.EvaluationParameters=Go,l.Event=ai,l.Evented=hi,l.FeatureIndex=S_,l.FillBucket=kp,l.FillExtrusionBucket=Vf,l.GeoJSONFeature=E_,l.ImageAtlas=Yv,l.ImagePosition=O2,l.LineBucket=x,l.LineStripIndexArray=class extends Dt{},l.LngLat=Qa,l.LngLatBounds=Gf,l.MercatorCoordinate=Yd,l.ONE_EM=It,l.OverscaledTileID=wc,l.PerformanceUtils=aA,l.PosArray=N,l.Properties=Bo,l.QuadTriangleArray=class extends Je{},l.RGBAImage=_r,l.RasterBoundsArray=class extends M{},l.RequestPerformance=class{constructor(y){this._marks={start:[y.url,"start"].join("#"),end:[y.url,"end"].join("#"),measure:y.url.toString()},performance.mark(this._marks.start)}finish(){performance.mark(this._marks.end);let y=performance.getEntriesByName(this._marks.measure);return y.length===0&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),y=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),y}},l.ResourceType=Rr,l.SegmentVector=zt,l.SymbolBucket=wh,l.Transitionable=Rc,l.TriangleIndexArray=kr,l.Uniform1f=Eo,l.Uniform1i=class extends $i{constructor(y,p){super(y,p),this.current=0}set(y){this.current!==y&&(this.current=y,this.gl.uniform1i(this.location,y))}},l.Uniform2f=class extends $i{constructor(y,p){super(y,p),this.current=[0,0]}set(y){y[0]===this.current[0]&&y[1]===this.current[1]||(this.current=y,this.gl.uniform2f(this.location,y[0],y[1]))}},l.Uniform3f=class extends $i{constructor(y,p){super(y,p),this.current=[0,0,0]}set(y){y[0]===this.current[0]&&y[1]===this.current[1]&&y[2]===this.current[2]||(this.current=y,this.gl.uniform3f(this.location,y[0],y[1],y[2]))}},l.Uniform4f=Mo,l.UniformColor=Ki,l.UniformMatrix4f=class extends $i{constructor(y,p){super(y,p),this.current=Fa}set(y){if(y[12]!==this.current[12]||y[0]!==this.current[0])return this.current=y,void this.gl.uniformMatrix4fv(this.location,!1,y);for(let p=1;p<16;p++)if(y[p]!==this.current[p]){this.current=y,this.gl.uniformMatrix4fv(this.location,!1,y);break}}},l.UnwrappedTileID=x_,l.ValidationError=Vr,l.ZoomHistory=ga,l.add=function(y,p,_){return y[0]=p[0]+_[0],y[1]=p[1]+_[1],y[2]=p[2]+_[2],y},l.addDynamicAttributes=q2,l.asyncAll=function(y,p,_){if(!y.length)return _(null,[]);let S=y.length;const z=new Array(y.length);let O=null;y.forEach((V,Q)=>{p(V,(ie,he)=>{ie&&(O=ie),z[Q]=he,--S==0&&_(O,z)})})},l.bezier=w,l.bindAll=G,l.cacheEntryPossiblyAdded=function(y){ft++,ft>Ne&&(y.getActor().send("enforceCacheSizeLimit",xe),ft=0)},l.clamp=T,l.clearTileCache=function(y){const p=caches.delete(bt);y&&p.catch(y).then(()=>y())},l.clipLine=l_,l.clone=function(y){var p=new Ja(16);return p[0]=y[0],p[1]=y[1],p[2]=y[2],p[3]=y[3],p[4]=y[4],p[5]=y[5],p[6]=y[6],p[7]=y[7],p[8]=y[8],p[9]=y[9],p[10]=y[10],p[11]=y[11],p[12]=y[12],p[13]=y[13],p[14]=y[14],p[15]=y[15],p},l.clone$1=ee,l.clone$2=function(y){var p=new Ja(3);return p[0]=y[0],p[1]=y[1],p[2]=y[2],p},l.collisionCircleLayout=Be,l.config=ut,l.copy=function(y,p){return y[0]=p[0],y[1]=p[1],y[2]=p[2],y[3]=p[3],y[4]=p[4],y[5]=p[5],y[6]=p[6],y[7]=p[7],y[8]=p[8],y[9]=p[9],y[10]=p[10],y[11]=p[11],y[12]=p[12],y[13]=p[13],y[14]=p[14],y[15]=p[15],y},l.create=function(){var y=new Ja(16);return Ja!=Float32Array&&(y[1]=0,y[2]=0,y[3]=0,y[4]=0,y[6]=0,y[7]=0,y[8]=0,y[9]=0,y[11]=0,y[12]=0,y[13]=0,y[14]=0),y[0]=1,y[5]=1,y[10]=1,y[15]=1,y},l.create$1=Ta,l.createExpression=Ko,l.createFilter=Na,l.createLayout=xa,l.createStyleLayer=function(y){return y.type==="custom"?new rA(y):new nA[y.type](y)},l.cross=function(y,p,_){var S=p[0],z=p[1],O=p[2],V=_[0],Q=_[1],ie=_[2];return y[0]=z*ie-O*Q,y[1]=O*V-S*ie,y[2]=S*Q-z*V,y},l.dot=function(y,p){return y[0]*p[0]+y[1]*p[1]+y[2]*p[2]},l.dot$1=function(y,p){return y[0]*p[0]+y[1]*p[1]+y[2]*p[2]+y[3]*p[3]},l.ease=E,l.emitValidationErrors=Ca,l.enforceCacheSizeLimit=function(y){Pe(),Ze&&Ze.then(p=>{p.keys().then(_=>{for(let S=0;S<_.length-y;S++)p.delete(_[S])})})},l.equals=function(y,p){var _=y[0],S=y[1],z=y[2],O=y[3],V=y[4],Q=y[5],ie=y[6],he=y[7],Ee=y[8],Me=y[9],Ve=y[10],Qe=y[11],tt=y[12],jt=y[13],Ot=y[14],xr=y[15],jr=p[0],dr=p[1],Lr=p[2],an=p[3],tn=p[4],ri=p[5],fi=p[6],Gn=p[7],Bn=p[8],Tn=p[9],Hn=p[10],qn=p[11],wn=p[12],Si=p[13],mi=p[14],po=p[15];return Math.abs(_-jr)<=hs*Math.max(1,Math.abs(_),Math.abs(jr))&&Math.abs(S-dr)<=hs*Math.max(1,Math.abs(S),Math.abs(dr))&&Math.abs(z-Lr)<=hs*Math.max(1,Math.abs(z),Math.abs(Lr))&&Math.abs(O-an)<=hs*Math.max(1,Math.abs(O),Math.abs(an))&&Math.abs(V-tn)<=hs*Math.max(1,Math.abs(V),Math.abs(tn))&&Math.abs(Q-ri)<=hs*Math.max(1,Math.abs(Q),Math.abs(ri))&&Math.abs(ie-fi)<=hs*Math.max(1,Math.abs(ie),Math.abs(fi))&&Math.abs(he-Gn)<=hs*Math.max(1,Math.abs(he),Math.abs(Gn))&&Math.abs(Ee-Bn)<=hs*Math.max(1,Math.abs(Ee),Math.abs(Bn))&&Math.abs(Me-Tn)<=hs*Math.max(1,Math.abs(Me),Math.abs(Tn))&&Math.abs(Ve-Hn)<=hs*Math.max(1,Math.abs(Ve),Math.abs(Hn))&&Math.abs(Qe-qn)<=hs*Math.max(1,Math.abs(Qe),Math.abs(qn))&&Math.abs(tt-wn)<=hs*Math.max(1,Math.abs(tt),Math.abs(wn))&&Math.abs(jt-Si)<=hs*Math.max(1,Math.abs(jt),Math.abs(Si))&&Math.abs(Ot-mi)<=hs*Math.max(1,Math.abs(Ot),Math.abs(mi))&&Math.abs(xr-po)<=hs*Math.max(1,Math.abs(xr),Math.abs(po))},l.evaluateSizeForFeature=function(y,{uSize:p,uSizeT:_},{lowerSize:S,upperSize:z}){return y.kind==="source"?S/Z0:y.kind==="composite"?Ro(S/Z0,z/Z0,_):p},l.evaluateSizeForZoom=function(y,p){let _=0,S=0;if(y.kind==="constant")S=y.layoutSize;else if(y.kind!=="source"){const{interpolationType:z,minZoom:O,maxZoom:V}=y,Q=z?T(Pr.interpolationFactor(z,p,O,V),0,1):0;y.kind==="camera"?S=Ro(y.minSize,y.maxSize,Q):_=Q}return{uSizeT:_,uSize:S}},l.evaluateVariableOffset=f_,l.evented=Ql,l.exported=_t,l.exported$1=At,l.extend=F,l.filterObject=X,l.fromRotation=function(y,p){var _=Math.sin(p),S=Math.cos(p);return y[0]=S,y[1]=_,y[2]=0,y[3]=-_,y[4]=S,y[5]=0,y[6]=0,y[7]=0,y[8]=1,y},l.fromScaling=function(y,p){return y[0]=p[0],y[1]=0,y[2]=0,y[3]=0,y[4]=0,y[5]=p[1],y[6]=0,y[7]=0,y[8]=0,y[9]=0,y[10]=p[2],y[11]=0,y[12]=0,y[13]=0,y[14]=0,y[15]=1,y},l.getAnchorAlignment=B2,l.getAnchorJustification=U2,l.getArrayBuffer=Or,l.getImage=en,l.getJSON=function(y,p){return ct(F(y,{type:"json"}),p)},l.getOverlapMode=H2,l.getRTLTextPluginStatus=eu,l.getReferrer=Kr,l.getVideo=function(y,p){const _=window.document.createElement("video");_.muted=!0,_.onloadstart=function(){p(null,_)};for(let S=0;S<y.length;S++){const z=window.document.createElement("source");ln(y[S])||(_.crossOrigin="Anonymous"),z.src=y[S],_.appendChild(z)}return{cancel:()=>{}}},l.identity=nu,l.invert=function(y,p){var _=p[0],S=p[1],z=p[2],O=p[3],V=p[4],Q=p[5],ie=p[6],he=p[7],Ee=p[8],Me=p[9],Ve=p[10],Qe=p[11],tt=p[12],jt=p[13],Ot=p[14],xr=p[15],jr=_*Q-S*V,dr=_*ie-z*V,Lr=_*he-O*V,an=S*ie-z*Q,tn=S*he-O*Q,ri=z*he-O*ie,fi=Ee*jt-Me*tt,Gn=Ee*Ot-Ve*tt,Bn=Ee*xr-Qe*tt,Tn=Me*Ot-Ve*jt,Hn=Me*xr-Qe*jt,qn=Ve*xr-Qe*Ot,wn=jr*qn-dr*Hn+Lr*Tn+an*Bn-tn*Gn+ri*fi;return wn?(y[0]=(Q*qn-ie*Hn+he*Tn)*(wn=1/wn),y[1]=(z*Hn-S*qn-O*Tn)*wn,y[2]=(jt*ri-Ot*tn+xr*an)*wn,y[3]=(Ve*tn-Me*ri-Qe*an)*wn,y[4]=(ie*Bn-V*qn-he*Gn)*wn,y[5]=(_*qn-z*Bn+O*Gn)*wn,y[6]=(Ot*Lr-tt*ri-xr*dr)*wn,y[7]=(Ee*ri-Ve*Lr+Qe*dr)*wn,y[8]=(V*Hn-Q*Bn+he*fi)*wn,y[9]=(S*Bn-_*Hn-O*fi)*wn,y[10]=(tt*tn-jt*Lr+xr*jr)*wn,y[11]=(Me*Lr-Ee*tn-Qe*jr)*wn,y[12]=(Q*Gn-V*Tn-ie*fi)*wn,y[13]=(_*Tn-S*Gn+z*fi)*wn,y[14]=(jt*dr-tt*an-Ot*jr)*wn,y[15]=(Ee*an-Me*dr+Ve*jr)*wn,y):null},l.isImageBitmap=ot,l.isSafari=Fe,l.isWorker=pe,l.keysDifference=function(y,p){const _=[];for(const S in y)S in p||_.push(S);return _},l.lazyLoadRTLTextPlugin=function(){Es.isLoading()||Es.isLoaded()||eu()!=="deferred"||ho()},l.makeRequest=ct,l.mapObject=H,l.mercatorXfromLng=v_,l.mercatorYfromLat=__,l.mercatorZfromAltitude=b_,l.mul=H0,l.mul$1=function(y,p,_){return y[0]=p[0]*_[0],y[1]=p[1]*_[1],y[2]=p[2]*_[2],y[3]=p[3]*_[3],y},l.multiply=n0,l.nextPowerOfTwo=function(y){return y<=1?1:Math.pow(2,Math.ceil(Math.log(y)/Math.LN2))},l.normalize=function(y,p){var _=p[0],S=p[1],z=p[2],O=_*_+S*S+z*z;return O>0&&(O=1/Math.sqrt(O)),y[0]=p[0]*O,y[1]=p[1]*O,y[2]=p[2]*O,y},l.number=Ro,l.ortho=function(y,p,_,S,z,O,V){var Q=1/(p-_),ie=1/(S-z),he=1/(O-V);return y[0]=-2*Q,y[1]=0,y[2]=0,y[3]=0,y[4]=0,y[5]=-2*ie,y[6]=0,y[7]=0,y[8]=0,y[9]=0,y[10]=2*he,y[11]=0,y[12]=(p+_)*Q,y[13]=(z+S)*ie,y[14]=(V+O)*he,y[15]=1,y},l.parseCacheControl=Ge,l.parseGlyphPbf=function(y){return new Qt(y).readFields(Nk,[])},l.pbf=Qt,l.performSymbolLayout=function(y){y.bucket.createArrays(),y.bucket.tilePixelRatio=Vo/(512*y.bucket.overscaling),y.bucket.compareText={},y.bucket.iconsNeedLinear=!1;const p=y.bucket.layers[0].layout,_=y.bucket.layers[0]._unevaluatedLayout._values,S={layoutIconSize:_["icon-size"].possiblyEvaluate(new Go(y.bucket.zoom+1),y.canonical),layoutTextSize:_["text-size"].possiblyEvaluate(new Go(y.bucket.zoom+1),y.canonical),textMaxSize:_["text-size"].possiblyEvaluate(new Go(18))};if(y.bucket.textSizeData.kind==="composite"){const{minZoom:ie,maxZoom:he}=y.bucket.textSizeData;S.compositeTextSizes=[_["text-size"].possiblyEvaluate(new Go(ie),y.canonical),_["text-size"].possiblyEvaluate(new Go(he),y.canonical)]}if(y.bucket.iconSizeData.kind==="composite"){const{minZoom:ie,maxZoom:he}=y.bucket.iconSizeData;S.compositeIconSizes=[_["icon-size"].possiblyEvaluate(new Go(ie),y.canonical),_["icon-size"].possiblyEvaluate(new Go(he),y.canonical)]}const z=p.get("text-line-height")*It,O=p.get("text-rotation-alignment")!=="viewport"&&p.get("symbol-placement")!=="point",V=p.get("text-keep-upright"),Q=p.get("text-size");for(const ie of y.bucket.features){const he=p.get("text-font").evaluate(ie,{},y.canonical).join(","),Ee=Q.evaluate(ie,{},y.canonical),Me=S.layoutTextSize.evaluate(ie,{},y.canonical),Ve=S.layoutIconSize.evaluate(ie,{},y.canonical),Qe={horizontal:{},vertical:void 0},tt=ie.text;let jt,Ot=[0,0];if(tt){const dr=tt.toString(),Lr=p.get("text-letter-spacing").evaluate(ie,{},y.canonical)*It,an=Zu(dr)?Lr:0,tn=p.get("text-anchor").evaluate(ie,{},y.canonical),ri=p.get("text-variable-anchor");if(!ri){const Hn=p.get("text-radial-offset").evaluate(ie,{},y.canonical);Ot=Hn?f_(tn,[Hn*It,j2]):p.get("text-offset").evaluate(ie,{},y.canonical).map(qn=>qn*It)}let fi=O?"center":p.get("text-justify").evaluate(ie,{},y.canonical);const Gn=p.get("symbol-placement"),Bn=Gn==="point"?p.get("text-max-width").evaluate(ie,{},y.canonical)*It:0,Tn=()=>{y.bucket.allowVerticalPlacement&&As(dr)&&(Qe.vertical=qd(tt,y.glyphMap,y.glyphPositions,y.imagePositions,he,Bn,z,tn,"left",an,Ot,l.WritingMode.vertical,!0,Gn,Me,Ee))};if(!O&&ri){const Hn=fi==="auto"?ri.map(wn=>U2(wn)):[fi];let qn=!1;for(let wn=0;wn<Hn.length;wn++){const Si=Hn[wn];if(!Qe.horizontal[Si])if(qn)Qe.horizontal[Si]=Qe.horizontal[0];else{const mi=qd(tt,y.glyphMap,y.glyphPositions,y.imagePositions,he,Bn,z,"center",Si,an,Ot,l.WritingMode.horizontal,!1,Gn,Me,Ee);mi&&(Qe.horizontal[Si]=mi,qn=mi.positionedLines.length===1)}}Tn()}else{fi==="auto"&&(fi=U2(tn));const Hn=qd(tt,y.glyphMap,y.glyphPositions,y.imagePositions,he,Bn,z,tn,fi,an,Ot,l.WritingMode.horizontal,!1,Gn,Me,Ee);Hn&&(Qe.horizontal[fi]=Hn),Tn(),As(dr)&&O&&V&&(Qe.vertical=qd(tt,y.glyphMap,y.glyphPositions,y.imagePositions,he,Bn,z,tn,fi,an,Ot,l.WritingMode.vertical,!1,Gn,Me,Ee))}}let xr=!1;if(ie.icon&&ie.icon.name){const dr=y.imageMap[ie.icon.name];dr&&(jt=Uk(y.imagePositions[ie.icon.name],p.get("icon-offset").evaluate(ie,{},y.canonical),p.get("icon-anchor").evaluate(ie,{},y.canonical)),xr=!!dr.sdf,y.bucket.sdfIcons===void 0?y.bucket.sdfIcons=xr:y.bucket.sdfIcons!==xr&&se("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(dr.pixelRatio!==y.bucket.pixelRatio||p.get("icon-rotate").constantOr(1)!==0)&&(y.bucket.iconsNeedLinear=!0))}const jr=p_(Qe.horizontal)||Qe.vertical;y.bucket.iconsInText=!!jr&&jr.iconsInText,(jr||jt)&&Zk(y.bucket,ie,Qe,jt,y.imageMap,S,Me,Ve,Ot,xr,y.canonical)}y.showCollisionBoxes&&y.bucket.generateCollisionDebugBuffers()},l.perspective=function(y,p,_,S,z){var O,V=1/Math.tan(p/2);return y[0]=V/_,y[1]=0,y[2]=0,y[3]=0,y[4]=0,y[5]=V,y[6]=0,y[7]=0,y[8]=0,y[9]=0,y[11]=-1,y[12]=0,y[13]=0,y[15]=0,z!=null&&z!==1/0?(y[10]=(z+S)*(O=1/(S-z)),y[14]=2*z*S*O):(y[10]=-1,y[14]=-2*S),y},l.pick=function(y,p){const _={};for(let S=0;S<p.length;S++){const z=p[S];z in y&&(_[z]=y[z])}return _},l.plugin=Es,l.pointGeometry=ht,l.polygonIntersectsPolygon=x0,l.potpack=Xv,l.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],l.register=Pn,l.registerForPluginStateChange=function(y){return y({pluginStatus:ia,pluginURL:Zs}),Ql.on("pluginStateChange",y),y},l.renderColorRamp=Cr,l.rotateX=function(y,p,_){var S=Math.sin(_),z=Math.cos(_),O=p[4],V=p[5],Q=p[6],ie=p[7],he=p[8],Ee=p[9],Me=p[10],Ve=p[11];return p!==y&&(y[0]=p[0],y[1]=p[1],y[2]=p[2],y[3]=p[3],y[12]=p[12],y[13]=p[13],y[14]=p[14],y[15]=p[15]),y[4]=O*z+he*S,y[5]=V*z+Ee*S,y[6]=Q*z+Me*S,y[7]=ie*z+Ve*S,y[8]=he*z-O*S,y[9]=Ee*z-V*S,y[10]=Me*z-Q*S,y[11]=Ve*z-ie*S,y},l.rotateZ=function(y,p,_){var S=Math.sin(_),z=Math.cos(_),O=p[0],V=p[1],Q=p[2],ie=p[3],he=p[4],Ee=p[5],Me=p[6],Ve=p[7];return p!==y&&(y[8]=p[8],y[9]=p[9],y[10]=p[10],y[11]=p[11],y[12]=p[12],y[13]=p[13],y[14]=p[14],y[15]=p[15]),y[0]=O*z+he*S,y[1]=V*z+Ee*S,y[2]=Q*z+Me*S,y[3]=ie*z+Ve*S,y[4]=he*z-O*S,y[5]=Ee*z-V*S,y[6]=Me*z-Q*S,y[7]=Ve*z-ie*S,y},l.scale=function(y,p,_){var S=_[0],z=_[1],O=_[2];return y[0]=p[0]*S,y[1]=p[1]*S,y[2]=p[2]*S,y[3]=p[3]*S,y[4]=p[4]*z,y[5]=p[5]*z,y[6]=p[6]*z,y[7]=p[7]*z,y[8]=p[8]*O,y[9]=p[9]*O,y[10]=p[10]*O,y[11]=p[11]*O,y[12]=p[12],y[13]=p[13],y[14]=p[14],y[15]=p[15],y},l.scale$1=function(y,p,_){return y[0]=p[0]*_,y[1]=p[1]*_,y[2]=p[2]*_,y},l.setCacheLimits=function(y,p){xe=y,Ne=p},l.setRTLTextPlugin=function(y,p,_=!1){if(ia===Nc||ia===fc||ia===ua)throw new Error("setRTLTextPlugin cannot be called multiple times.");Zs=_t.resolveURL(y),ia=Nc,os=p,Kl(),_||ho()},l.spec=yr,l.sphericalToCartesian=function([y,p,_]){return p+=90,p*=Math.PI/180,_*=Math.PI/180,{x:y*Math.cos(p)*Math.sin(_),y:y*Math.sin(p)*Math.sin(_),z:y*Math.cos(_)}},l.sqrLen=function(y){var p=y[0],_=y[1];return p*p+_*_},l.sub=function(y,p,_){return y[0]=p[0]-_[0],y[1]=p[1]-_[1],y[2]=p[2]-_[2],y},l.toEvaluationFeature=Ys,l.transformMat3=function(y,p,_){var S=p[0],z=p[1],O=p[2];return y[0]=S*_[0]+z*_[3]+O*_[6],y[1]=S*_[1]+z*_[4]+O*_[7],y[2]=S*_[2]+z*_[5]+O*_[8],y},l.transformMat4=va,l.transformMat4$1=function(y,p,_){var S=p[0],z=p[1];return y[0]=_[0]*S+_[4]*z+_[12],y[1]=_[1]*S+_[5]*z+_[13],y},l.translate=function(y,p,_){var S,z,O,V,Q,ie,he,Ee,Me,Ve,Qe,tt,jt=_[0],Ot=_[1],xr=_[2];return p===y?(y[12]=p[0]*jt+p[4]*Ot+p[8]*xr+p[12],y[13]=p[1]*jt+p[5]*Ot+p[9]*xr+p[13],y[14]=p[2]*jt+p[6]*Ot+p[10]*xr+p[14],y[15]=p[3]*jt+p[7]*Ot+p[11]*xr+p[15]):(z=p[1],O=p[2],V=p[3],Q=p[4],ie=p[5],he=p[6],Ee=p[7],Me=p[8],Ve=p[9],Qe=p[10],tt=p[11],y[0]=S=p[0],y[1]=z,y[2]=O,y[3]=V,y[4]=Q,y[5]=ie,y[6]=he,y[7]=Ee,y[8]=Me,y[9]=Ve,y[10]=Qe,y[11]=tt,y[12]=S*jt+Q*Ot+Me*xr+p[12],y[13]=z*jt+ie*Ot+Ve*xr+p[13],y[14]=O*jt+he*Ot+Qe*xr+p[14],y[15]=V*jt+Ee*Ot+tt*xr+p[15]),y},l.triggerPluginCompletionEvent=hc,l.unicodeBlockLookup=An,l.uniqueId=function(){return U++},l.validateCustomStyleLayer=function(y){const p=[],_=y.id;return _===void 0&&p.push({message:`layers.${_}: missing required property "id"`}),y.render===void 0&&p.push({message:`layers.${_}: missing required method "render"`}),y.renderingMode&&y.renderingMode!=="2d"&&y.renderingMode!=="3d"&&p.push({message:`layers.${_}: property "renderingMode" must be either "2d" or "3d"`}),p},l.validateLight=il,l.validateStyle=ks,l.vectorTile=I0,l.warnOnce=se,l.wrap=I}),u(["./shared"],function(l){function h(be){const ye=typeof be;if(ye==="number"||ye==="boolean"||ye==="string"||be==null)return JSON.stringify(be);if(Array.isArray(be)){let st="[";for(const Rt of be)st+=`${h(Rt)},`;return`${st}]`}const De=Object.keys(be).sort();let nt="{";for(let st=0;st<De.length;st++)nt+=`${JSON.stringify(De[st])}:${h(be[De[st]])},`;return`${nt}}`}function v(be){let ye="";for(const De of l.refProperties)ye+=`/${h(be[De])}`;return ye}class w{constructor(ye){this.keyCache={},ye&&this.replace(ye)}replace(ye){this._layerConfigs={},this._layers={},this.update(ye,[])}update(ye,De){for(const st of ye){this._layerConfigs[st.id]=st;const Rt=this._layers[st.id]=l.createStyleLayer(st);Rt._featureFilter=l.createFilter(Rt.filter),this.keyCache[st.id]&&delete this.keyCache[st.id]}for(const st of De)delete this.keyCache[st],delete this._layerConfigs[st],delete this._layers[st];this.familiesBySource={};const nt=function(st,Rt){const Re={};for(let Nt=0;Nt<st.length;Nt++){const ir=Rt&&Rt[st[Nt].id]||v(st[Nt]);Rt&&(Rt[st[Nt].id]=ir);let Br=Re[ir];Br||(Br=Re[ir]=[]),Br.push(st[Nt])}const Ht=[];for(const Nt in Re)Ht.push(Re[Nt]);return Ht}(Object.values(this._layerConfigs),this.keyCache);for(const st of nt){const Rt=st.map(nn=>this._layers[nn.id]),Re=Rt[0];if(Re.visibility==="none")continue;const Ht=Re.source||"";let Nt=this.familiesBySource[Ht];Nt||(Nt=this.familiesBySource[Ht]={});const ir=Re.sourceLayer||"_geojsonTileLayer";let Br=Nt[ir];Br||(Br=Nt[ir]=[]),Br.push(Rt)}}}class E{constructor(ye){const De={},nt=[];for(const Ht in ye){const Nt=ye[Ht],ir=De[Ht]={};for(const Br in Nt){const nn=Nt[+Br];if(!nn||nn.bitmap.width===0||nn.bitmap.height===0)continue;const Fr={x:0,y:0,w:nn.bitmap.width+2,h:nn.bitmap.height+2};nt.push(Fr),ir[Br]={rect:Fr,metrics:nn.metrics}}}const{w:st,h:Rt}=l.potpack(nt),Re=new l.AlphaImage({width:st||1,height:Rt||1});for(const Ht in ye){const Nt=ye[Ht];for(const ir in Nt){const Br=Nt[+ir];if(!Br||Br.bitmap.width===0||Br.bitmap.height===0)continue;const nn=De[Ht][ir].rect;l.AlphaImage.copy(Br.bitmap,Re,{x:0,y:0},{x:nn.x+1,y:nn.y+1},Br.bitmap)}}this.image=Re,this.positions=De}}l.register("GlyphAtlas",E);class T{constructor(ye){this.tileID=new l.OverscaledTileID(ye.tileID.overscaledZ,ye.tileID.wrap,ye.tileID.canonical.z,ye.tileID.canonical.x,ye.tileID.canonical.y),this.uid=ye.uid,this.zoom=ye.zoom,this.pixelRatio=ye.pixelRatio,this.tileSize=ye.tileSize,this.source=ye.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=ye.showCollisionBoxes,this.collectResourceTiming=!!ye.collectResourceTiming,this.returnDependencies=!!ye.returnDependencies,this.promoteId=ye.promoteId}parse(ye,De,nt,st,Rt){this.status="parsing",this.data=ye,this.collisionBoxArray=new l.CollisionBoxArray;const Re=new l.DictionaryCoder(Object.keys(ye.layers).sort()),Ht=new l.FeatureIndex(this.tileID,this.promoteId);Ht.bucketLayerIDs=[];const Nt={},ir={featureIndex:Ht,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:nt},Br=De.familiesBySource[this.source];for(const Ii in Br){const qi=ye.layers[Ii];if(!qi)continue;qi.version===1&&l.warnOnce(`Vector tile source "${this.source}" layer "${Ii}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const ro=Re.encode(Ii),ko=[];for(let Yo=0;Yo<qi.length;Yo++){const So=qi.feature(Yo),Jo=Ht.getId(So,Ii);ko.push({feature:So,id:Jo,index:Yo,sourceLayerIndex:ro})}for(const Yo of Br[Ii]){const So=Yo[0];So.source!==this.source&&l.warnOnce(`layer.source = ${So.source} does not equal this.source = ${this.source}`),So.minzoom&&this.zoom<Math.floor(So.minzoom)||So.maxzoom&&this.zoom>=So.maxzoom||So.visibility!=="none"&&(I(Yo,this.zoom,nt),(Nt[So.id]=So.createBucket({index:Ht.bucketLayerIDs.length,layers:Yo,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:ro,sourceID:this.source})).populate(ko,ir,this.tileID.canonical),Ht.bucketLayerIDs.push(Yo.map(Jo=>Jo.id)))}}let nn,Fr,$n,Wn;const sn=l.mapObject(ir.glyphDependencies,Ii=>Object.keys(Ii).map(Number));Object.keys(sn).length?st.send("getGlyphs",{uid:this.uid,stacks:sn},(Ii,qi)=>{nn||(nn=Ii,Fr=qi,Xi.call(this))}):Fr={};const yi=Object.keys(ir.iconDependencies);yi.length?st.send("getImages",{icons:yi,source:this.source,tileID:this.tileID,type:"icons"},(Ii,qi)=>{nn||(nn=Ii,$n=qi,Xi.call(this))}):$n={};const Ai=Object.keys(ir.patternDependencies);function Xi(){if(nn)return Rt(nn);if(Fr&&$n&&Wn){const Ii=new E(Fr),qi=new l.ImageAtlas($n,Wn);for(const ro in Nt){const ko=Nt[ro];ko instanceof l.SymbolBucket?(I(ko.layers,this.zoom,nt),l.performSymbolLayout({bucket:ko,glyphMap:Fr,glyphPositions:Ii.positions,imageMap:$n,imagePositions:qi.iconPositions,showCollisionBoxes:this.showCollisionBoxes,canonical:this.tileID.canonical})):ko.hasPattern&&(ko instanceof l.LineBucket||ko instanceof l.FillBucket||ko instanceof l.FillExtrusionBucket)&&(I(ko.layers,this.zoom,nt),ko.addFeatures(ir,this.tileID.canonical,qi.patternPositions))}this.status="done",Rt(null,{buckets:Object.values(Nt).filter(ro=>!ro.isEmpty()),featureIndex:Ht,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:Ii.image,imageAtlas:qi,glyphMap:this.returnDependencies?Fr:null,iconMap:this.returnDependencies?$n:null,glyphPositions:this.returnDependencies?Ii.positions:null})}}Ai.length?st.send("getImages",{icons:Ai,source:this.source,tileID:this.tileID,type:"patterns"},(Ii,qi)=>{nn||(nn=Ii,Wn=qi,Xi.call(this))}):Wn={},Xi.call(this)}}function I(be,ye,De){const nt=new l.EvaluationParameters(ye);for(const st of be)st.recalculate(nt,De)}function F(be,ye){const De=l.getArrayBuffer(be.request,(nt,st,Rt,Re)=>{nt?ye(nt):st&&ye(null,{vectorTile:new l.vectorTile.VectorTile(new l.pbf(st)),rawData:st,cacheControl:Rt,expires:Re})});return()=>{De.cancel(),ye()}}class U{constructor(ye,De,nt,st){this.actor=ye,this.layerIndex=De,this.availableImages=nt,this.loadVectorData=st||F,this.loading={},this.loaded={}}loadTile(ye,De){const nt=ye.uid;this.loading||(this.loading={});const st=!!(ye&&ye.request&&ye.request.collectResourceTiming)&&new l.RequestPerformance(ye.request),Rt=this.loading[nt]=new T(ye);Rt.abort=this.loadVectorData(ye,(Re,Ht)=>{if(delete this.loading[nt],Re||!Ht)return Rt.status="done",this.loaded[nt]=Rt,De(Re);const Nt=Ht.rawData,ir={};Ht.expires&&(ir.expires=Ht.expires),Ht.cacheControl&&(ir.cacheControl=Ht.cacheControl);const Br={};if(st){const nn=st.finish();nn&&(Br.resourceTiming=JSON.parse(JSON.stringify(nn)))}Rt.vectorTile=Ht.vectorTile,Rt.parse(Ht.vectorTile,this.layerIndex,this.availableImages,this.actor,(nn,Fr)=>{if(nn||!Fr)return De(nn);De(null,l.extend({rawTileData:Nt.slice(0)},Fr,ir,Br))}),this.loaded=this.loaded||{},this.loaded[nt]=Rt})}reloadTile(ye,De){const nt=this.loaded,st=ye.uid,Rt=this;if(nt&&nt[st]){const Re=nt[st];Re.showCollisionBoxes=ye.showCollisionBoxes;const Ht=(Nt,ir)=>{const Br=Re.reloadCallback;Br&&(delete Re.reloadCallback,Re.parse(Re.vectorTile,Rt.layerIndex,this.availableImages,Rt.actor,Br)),De(Nt,ir)};Re.status==="parsing"?Re.reloadCallback=Ht:Re.status==="done"&&(Re.vectorTile?Re.parse(Re.vectorTile,this.layerIndex,this.availableImages,this.actor,Ht):Ht())}}abortTile(ye,De){const nt=this.loading,st=ye.uid;nt&&nt[st]&&nt[st].abort&&(nt[st].abort(),delete nt[st]),De()}removeTile(ye,De){const nt=this.loaded,st=ye.uid;nt&&nt[st]&&delete nt[st],De()}}class G{constructor(){this.loaded={}}loadTile(ye,De){const{uid:nt,encoding:st,rawImageData:Rt}=ye,Re=l.isImageBitmap(Rt)?this.getImageData(Rt):Rt,Ht=new l.DEMData(nt,Re,st);this.loaded=this.loaded||{},this.loaded[nt]=Ht,De(null,Ht)}getImageData(ye){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(ye.width,ye.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d")),this.offscreenCanvas.width=ye.width,this.offscreenCanvas.height=ye.height,this.offscreenCanvasContext.drawImage(ye,0,0,ye.width,ye.height);const De=this.offscreenCanvasContext.getImageData(-1,-1,ye.width+2,ye.height+2);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),new l.RGBAImage({width:De.width,height:De.height},De.data)}removeTile(ye){const De=this.loaded,nt=ye.uid;De&&De[nt]&&delete De[nt]}}var H=function be(ye,De){var nt,st=ye&&ye.type;if(st==="FeatureCollection")for(nt=0;nt<ye.features.length;nt++)be(ye.features[nt],De);else if(st==="GeometryCollection")for(nt=0;nt<ye.geometries.length;nt++)be(ye.geometries[nt],De);else if(st==="Feature")be(ye.geometry,De);else if(st==="Polygon")X(ye.coordinates,De);else if(st==="MultiPolygon")for(nt=0;nt<ye.coordinates.length;nt++)X(ye.coordinates[nt],De);return ye};function X(be,ye){if(be.length!==0){ee(be[0],ye);for(var De=1;De<be.length;De++)ee(be[De],!ye)}}function ee(be,ye){for(var De=0,nt=0,st=0,Rt=be.length,Re=Rt-1;st<Rt;Re=st++){var Ht=(be[st][0]-be[Re][0])*(be[Re][1]+be[st][1]),Nt=De+Ht;nt+=Math.abs(De)>=Math.abs(Ht)?De-Nt+Ht:Ht-Nt+De,De=Nt}De+nt>=0!=!!ye&&be.reverse()}const K=l.vectorTile.VectorTileFeature.prototype.toGeoJSON;class se{constructor(ye){this._feature=ye,this.extent=l.EXTENT,this.type=ye.type,this.properties=ye.tags,"id"in ye&&!isNaN(ye.id)&&(this.id=parseInt(ye.id,10))}loadGeometry(){if(this._feature.type===1){const ye=[];for(const De of this._feature.geometry)ye.push([new l.pointGeometry(De[0],De[1])]);return ye}{const ye=[];for(const De of this._feature.geometry){const nt=[];for(const st of De)nt.push(new l.pointGeometry(st[0],st[1]));ye.push(nt)}return ye}}toGeoJSON(ye,De,nt){return K.call(this,ye,De,nt)}}class ce{constructor(ye){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=l.EXTENT,this.length=ye.length,this._features=ye}feature(ye){return new se(this._features[ye])}}var _e={exports:{}},pe=l.pointGeometry,Ge=l.vectorTile.VectorTileFeature,We=Ae;function Ae(be,ye){this.options=ye||{},this.features=be,this.length=be.length}function Ie(be,ye){this.id=typeof be.id=="number"?be.id:void 0,this.type=be.type,this.rawGeometry=be.type===1?[be.geometry]:be.geometry,this.properties=be.tags,this.extent=ye||4096}Ae.prototype.feature=function(be){return new Ie(this.features[be],this.options.extent)},Ie.prototype.loadGeometry=function(){var be=this.rawGeometry;this.geometry=[];for(var ye=0;ye<be.length;ye++){for(var De=be[ye],nt=[],st=0;st<De.length;st++)nt.push(new pe(De[st][0],De[st][1]));this.geometry.push(nt)}return this.geometry},Ie.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var be=this.geometry,ye=1/0,De=-1/0,nt=1/0,st=-1/0,Rt=0;Rt<be.length;Rt++)for(var Re=be[Rt],Ht=0;Ht<Re.length;Ht++){var Nt=Re[Ht];ye=Math.min(ye,Nt.x),De=Math.max(De,Nt.x),nt=Math.min(nt,Nt.y),st=Math.max(st,Nt.y)}return[ye,nt,De,st]},Ie.prototype.toGeoJSON=Ge.prototype.toGeoJSON;var Fe=l.pbf,ot=We;function _t(be){var ye=new Fe;return function(De,nt){for(var st in De.layers)nt.writeMessage(3,ht,De.layers[st])}(be,ye),ye.finish()}function ht(be,ye){var De;ye.writeVarintField(15,be.version||1),ye.writeStringField(1,be.name||""),ye.writeVarintField(5,be.extent||4096);var nt={keys:[],values:[],keycache:{},valuecache:{}};for(De=0;De<be.length;De++)nt.feature=be.feature(De),ye.writeMessage(2,$e,nt);var st=nt.keys;for(De=0;De<st.length;De++)ye.writeStringField(3,st[De]);var Rt=nt.values;for(De=0;De<Rt.length;De++)ye.writeMessage(4,xe,Rt[De])}function $e(be,ye){var De=be.feature;De.id!==void 0&&ye.writeVarintField(1,De.id),ye.writeMessage(2,ut,be),ye.writeVarintField(3,De.type),ye.writeMessage(4,He,De)}function ut(be,ye){var De=be.feature,nt=be.keys,st=be.values,Rt=be.keycache,Re=be.valuecache;for(var Ht in De.properties){var Nt=De.properties[Ht],ir=Rt[Ht];if(Nt!==null){ir===void 0&&(nt.push(Ht),Rt[Ht]=ir=nt.length-1),ye.writeVarint(ir);var Br=typeof Nt;Br!=="string"&&Br!=="boolean"&&Br!=="number"&&(Nt=JSON.stringify(Nt));var nn=Br+":"+Nt,Fr=Re[nn];Fr===void 0&&(st.push(Nt),Re[nn]=Fr=st.length-1),ye.writeVarint(Fr)}}}function bt(be,ye){return(ye<<3)+(7&be)}function Ze(be){return be<<1^be>>31}function He(be,ye){for(var De=be.loadGeometry(),nt=be.type,st=0,Rt=0,Re=De.length,Ht=0;Ht<Re;Ht++){var Nt=De[Ht],ir=1;nt===1&&(ir=Nt.length),ye.writeVarint(bt(1,ir));for(var Br=nt===3?Nt.length-1:Nt.length,nn=0;nn<Br;nn++){nn===1&&nt!==1&&ye.writeVarint(bt(2,Br-1));var Fr=Nt[nn].x-st,$n=Nt[nn].y-Rt;ye.writeVarint(Ze(Fr)),ye.writeVarint(Ze($n)),st+=Fr,Rt+=$n}nt===3&&ye.writeVarint(bt(7,1))}}function xe(be,ye){var De=typeof be;De==="string"?ye.writeStringField(1,be):De==="boolean"?ye.writeBooleanField(7,be):De==="number"&&(be%1!=0?ye.writeDoubleField(3,be):be<0?ye.writeSVarintField(6,be):ye.writeVarintField(5,be))}function Ne(be,ye,De,nt,st,Rt){if(st-nt<=De)return;const Re=nt+st>>1;Pe(be,ye,Re,nt,st,Rt%2),Ne(be,ye,De,nt,Re-1,Rt+1),Ne(be,ye,De,Re+1,st,Rt+1)}function Pe(be,ye,De,nt,st,Rt){for(;st>nt;){if(st-nt>600){const ir=st-nt+1,Br=De-nt+1,nn=Math.log(ir),Fr=.5*Math.exp(2*nn/3),$n=.5*Math.sqrt(nn*Fr*(ir-Fr)/ir)*(Br-ir/2<0?-1:1);Pe(be,ye,De,Math.max(nt,Math.floor(De-Br*Fr/ir+$n)),Math.min(st,Math.floor(De+(ir-Br)*Fr/ir+$n)),Rt)}const Re=ye[2*De+Rt];let Ht=nt,Nt=st;for(ft(be,ye,nt,De),ye[2*st+Rt]>Re&&ft(be,ye,nt,st);Ht<Nt;){for(ft(be,ye,Ht,Nt),Ht++,Nt--;ye[2*Ht+Rt]<Re;)Ht++;for(;ye[2*Nt+Rt]>Re;)Nt--}ye[2*nt+Rt]===Re?ft(be,ye,nt,Nt):(Nt++,ft(be,ye,Nt,st)),Nt<=De&&(nt=Nt+1),De<=Nt&&(st=Nt-1)}}function ft(be,ye,De,nt){At(be,De,nt),At(ye,2*De,2*nt),At(ye,2*De+1,2*nt+1)}function At(be,ye,De){const nt=be[ye];be[ye]=be[De],be[De]=nt}function Pt(be,ye,De,nt){const st=be-De,Rt=ye-nt;return st*st+Rt*Rt}_e.exports=_t,_e.exports.fromVectorTileJs=_t,_e.exports.fromGeojsonVt=function(be,ye){ye=ye||{};var De={};for(var nt in be)De[nt]=new ot(be[nt].features,ye),De[nt].name=nt,De[nt].version=ye.version,De[nt].extent=ye.extent;return _t({layers:De})},_e.exports.GeoJSONWrapper=ot;const Kt=be=>be[0],$t=be=>be[1];class br{constructor(ye,De=Kt,nt=$t,st=64,Rt=Float64Array){this.nodeSize=st,this.points=ye;const Re=ye.length<65536?Uint16Array:Uint32Array,Ht=this.ids=new Re(ye.length),Nt=this.coords=new Rt(2*ye.length);for(let ir=0;ir<ye.length;ir++)Ht[ir]=ir,Nt[2*ir]=De(ye[ir]),Nt[2*ir+1]=nt(ye[ir]);Ne(Ht,Nt,st,0,Ht.length-1,0)}range(ye,De,nt,st){return function(Rt,Re,Ht,Nt,ir,Br,nn){const Fr=[0,Rt.length-1,0],$n=[];let Wn,sn;for(;Fr.length;){const yi=Fr.pop(),Ai=Fr.pop(),Xi=Fr.pop();if(Ai-Xi<=nn){for(let ro=Xi;ro<=Ai;ro++)Wn=Re[2*ro],sn=Re[2*ro+1],Wn>=Ht&&Wn<=ir&&sn>=Nt&&sn<=Br&&$n.push(Rt[ro]);continue}const Ii=Math.floor((Xi+Ai)/2);Wn=Re[2*Ii],sn=Re[2*Ii+1],Wn>=Ht&&Wn<=ir&&sn>=Nt&&sn<=Br&&$n.push(Rt[Ii]);const qi=(yi+1)%2;(yi===0?Ht<=Wn:Nt<=sn)&&(Fr.push(Xi),Fr.push(Ii-1),Fr.push(qi)),(yi===0?ir>=Wn:Br>=sn)&&(Fr.push(Ii+1),Fr.push(Ai),Fr.push(qi))}return $n}(this.ids,this.coords,ye,De,nt,st,this.nodeSize)}within(ye,De,nt){return function(st,Rt,Re,Ht,Nt,ir){const Br=[0,st.length-1,0],nn=[],Fr=Nt*Nt;for(;Br.length;){const $n=Br.pop(),Wn=Br.pop(),sn=Br.pop();if(Wn-sn<=ir){for(let qi=sn;qi<=Wn;qi++)Pt(Rt[2*qi],Rt[2*qi+1],Re,Ht)<=Fr&&nn.push(st[qi]);continue}const yi=Math.floor((sn+Wn)/2),Ai=Rt[2*yi],Xi=Rt[2*yi+1];Pt(Ai,Xi,Re,Ht)<=Fr&&nn.push(st[yi]);const Ii=($n+1)%2;($n===0?Re-Nt<=Ai:Ht-Nt<=Xi)&&(Br.push(sn),Br.push(yi-1),Br.push(Ii)),($n===0?Re+Nt>=Ai:Ht+Nt>=Xi)&&(Br.push(yi+1),Br.push(Wn),Br.push(Ii))}return nn}(this.ids,this.coords,ye,De,nt,this.nodeSize)}}const Gt={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:be=>be},Rr=Math.fround||(Mr=new Float32Array(1),be=>(Mr[0]=+be,Mr[0]));var Mr;class Kr{constructor(ye){this.options=en(Object.create(Gt),ye),this.trees=new Array(this.options.maxZoom+1)}load(ye){const{log:De,minZoom:nt,maxZoom:st,nodeSize:Rt}=this.options;De&&console.time("total time");const Re=`prepare ${ye.length} points`;De&&console.time(Re),this.points=ye;let Ht=[];for(let Nt=0;Nt<ye.length;Nt++)ye[Nt].geometry&&Ht.push(ct(ye[Nt],Nt));this.trees[st+1]=new br(Ht,On,Zn,Rt,Float32Array),De&&console.timeEnd(Re);for(let Nt=st;Nt>=nt;Nt--){const ir=+Date.now();Ht=this._cluster(Ht,Nt),this.trees[Nt]=new br(Ht,On,Zn,Rt,Float32Array),De&&console.log("z%d: %d clusters in %dms",Nt,Ht.length,+Date.now()-ir)}return De&&console.timeEnd("total time"),this}getClusters(ye,De){let nt=((ye[0]+180)%360+360)%360-180;const st=Math.max(-90,Math.min(90,ye[1]));let Rt=ye[2]===180?180:((ye[2]+180)%360+360)%360-180;const Re=Math.max(-90,Math.min(90,ye[3]));if(ye[2]-ye[0]>=360)nt=-180,Rt=180;else if(nt>Rt){const Br=this.getClusters([nt,st,180,Re],De),nn=this.getClusters([-180,st,Rt,Re],De);return Br.concat(nn)}const Ht=this.trees[this._limitZoom(De)],Nt=Ht.range(Wt(nt),Ur(Re),Wt(Rt),Ur(st)),ir=[];for(const Br of Nt){const nn=Ht.points[Br];ir.push(nn.numPoints?Or(nn):this.points[nn.index])}return ir}getChildren(ye){const De=this._getOriginId(ye),nt=this._getOriginZoom(ye),st="No cluster with the specified id.",Rt=this.trees[nt];if(!Rt)throw new Error(st);const Re=Rt.points[De];if(!Re)throw new Error(st);const Ht=this.options.radius/(this.options.extent*Math.pow(2,nt-1)),Nt=Rt.within(Re.x,Re.y,Ht),ir=[];for(const Br of Nt){const nn=Rt.points[Br];nn.parentId===ye&&ir.push(nn.numPoints?Or(nn):this.points[nn.index])}if(ir.length===0)throw new Error(st);return ir}getLeaves(ye,De,nt){const st=[];return this._appendLeaves(st,ye,De=De||10,nt=nt||0,0),st}getTile(ye,De,nt){const st=this.trees[this._limitZoom(ye)],Rt=Math.pow(2,ye),{extent:Re,radius:Ht}=this.options,Nt=Ht/Re,ir=(nt-Nt)/Rt,Br=(nt+1+Nt)/Rt,nn={features:[]};return this._addTileFeatures(st.range((De-Nt)/Rt,ir,(De+1+Nt)/Rt,Br),st.points,De,nt,Rt,nn),De===0&&this._addTileFeatures(st.range(1-Nt/Rt,ir,1,Br),st.points,Rt,nt,Rt,nn),De===Rt-1&&this._addTileFeatures(st.range(0,ir,Nt/Rt,Br),st.points,-1,nt,Rt,nn),nn.features.length?nn:null}getClusterExpansionZoom(ye){let De=this._getOriginZoom(ye)-1;for(;De<=this.options.maxZoom;){const nt=this.getChildren(ye);if(De++,nt.length!==1)break;ye=nt[0].properties.cluster_id}return De}_appendLeaves(ye,De,nt,st,Rt){const Re=this.getChildren(De);for(const Ht of Re){const Nt=Ht.properties;if(Nt&&Nt.cluster?Rt+Nt.point_count<=st?Rt+=Nt.point_count:Rt=this._appendLeaves(ye,Nt.cluster_id,nt,st,Rt):Rt<st?Rt++:ye.push(Ht),ye.length===nt)break}return Rt}_addTileFeatures(ye,De,nt,st,Rt,Re){for(const Ht of ye){const Nt=De[Ht],ir=Nt.numPoints;let Br,nn,Fr;if(ir)Br=ln(Nt),nn=Nt.x,Fr=Nt.y;else{const sn=this.points[Nt.index];Br=sn.properties,nn=Wt(sn.geometry.coordinates[0]),Fr=Ur(sn.geometry.coordinates[1])}const $n={type:1,geometry:[[Math.round(this.options.extent*(nn*Rt-nt)),Math.round(this.options.extent*(Fr*Rt-st))]],tags:Br};let Wn;ir?Wn=Nt.id:this.options.generateId?Wn=Nt.index:this.points[Nt.index].id&&(Wn=this.points[Nt.index].id),Wn!==void 0&&($n.id=Wn),Re.features.push($n)}}_limitZoom(ye){return Math.max(this.options.minZoom,Math.min(Math.floor(+ye),this.options.maxZoom+1))}_cluster(ye,De){const nt=[],{radius:st,extent:Rt,reduce:Re,minPoints:Ht}=this.options,Nt=st/(Rt*Math.pow(2,De));for(let ir=0;ir<ye.length;ir++){const Br=ye[ir];if(Br.zoom<=De)continue;Br.zoom=De;const nn=this.trees[De+1],Fr=nn.within(Br.x,Br.y,Nt),$n=Br.numPoints||1;let Wn=$n;for(const sn of Fr){const yi=nn.points[sn];yi.zoom>De&&(Wn+=yi.numPoints||1)}if(Wn>$n&&Wn>=Ht){let sn=Br.x*$n,yi=Br.y*$n,Ai=Re&&$n>1?this._map(Br,!0):null;const Xi=(ir<<5)+(De+1)+this.points.length;for(const Ii of Fr){const qi=nn.points[Ii];if(qi.zoom<=De)continue;qi.zoom=De;const ro=qi.numPoints||1;sn+=qi.x*ro,yi+=qi.y*ro,qi.parentId=Xi,Re&&(Ai||(Ai=this._map(Br,!0)),Re(Ai,this._map(qi)))}Br.parentId=Xi,nt.push(St(sn/Wn,yi/Wn,Xi,Wn,Ai))}else if(nt.push(Br),Wn>1)for(const sn of Fr){const yi=nn.points[sn];yi.zoom<=De||(yi.zoom=De,nt.push(yi))}}return nt}_getOriginId(ye){return ye-this.points.length>>5}_getOriginZoom(ye){return(ye-this.points.length)%32}_map(ye,De){if(ye.numPoints)return De?en({},ye.properties):ye.properties;const nt=this.points[ye.index].properties,st=this.options.map(nt);return De&&st===nt?en({},st):st}}function St(be,ye,De,nt,st){return{x:Rr(be),y:Rr(ye),zoom:1/0,id:De,parentId:-1,numPoints:nt,properties:st}}function ct(be,ye){const[De,nt]=be.geometry.coordinates;return{x:Rr(Wt(De)),y:Rr(Ur(nt)),zoom:1/0,index:ye,parentId:-1}}function Or(be){return{type:"Feature",id:be.id,properties:ln(be),geometry:{type:"Point",coordinates:[(ye=be.x,360*(ye-.5)),mn(be.y)]}};var ye}function ln(be){const ye=be.numPoints,De=ye>=1e4?`${Math.round(ye/1e3)}k`:ye>=1e3?Math.round(ye/100)/10+"k":ye;return en(en({},be.properties),{cluster:!0,cluster_id:be.id,point_count:ye,point_count_abbreviated:De})}function Wt(be){return be/360+.5}function Ur(be){const ye=Math.sin(be*Math.PI/180),De=.5-.25*Math.log((1+ye)/(1-ye))/Math.PI;return De<0?0:De>1?1:De}function mn(be){const ye=(180-360*be)*Math.PI/180;return 360*Math.atan(Math.exp(ye))/Math.PI-90}function en(be,ye){for(const De in ye)be[De]=ye[De];return be}function On(be){return be.x}function Zn(be){return be.y}function ai(be,ye,De,nt){for(var st,Rt=nt,Re=De-ye>>1,Ht=De-ye,Nt=be[ye],ir=be[ye+1],Br=be[De],nn=be[De+1],Fr=ye+3;Fr<De;Fr+=3){var $n=_i(be[Fr],be[Fr+1],Nt,ir,Br,nn);if($n>Rt)st=Fr,Rt=$n;else if($n===Rt){var Wn=Math.abs(Fr-Re);Wn<Ht&&(st=Fr,Ht=Wn)}}Rt>nt&&(st-ye>3&&ai(be,ye,st,nt),be[st+2]=Rt,De-st>3&&ai(be,st,De,nt))}function _i(be,ye,De,nt,st,Rt){var Re=st-De,Ht=Rt-nt;if(Re!==0||Ht!==0){var Nt=((be-De)*Re+(ye-nt)*Ht)/(Re*Re+Ht*Ht);Nt>1?(De=st,nt=Rt):Nt>0&&(De+=Re*Nt,nt+=Ht*Nt)}return(Re=be-De)*Re+(Ht=ye-nt)*Ht}function hi(be,ye,De,nt){var st={id:be===void 0?null:be,type:ye,geometry:De,tags:nt,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(Rt){var Re=Rt.geometry,Ht=Rt.type;if(Ht==="Point"||Ht==="MultiPoint"||Ht==="LineString")yr(Rt,Re);else if(Ht==="Polygon"||Ht==="MultiLineString")for(var Nt=0;Nt<Re.length;Nt++)yr(Rt,Re[Nt]);else if(Ht==="MultiPolygon")for(Nt=0;Nt<Re.length;Nt++)for(var ir=0;ir<Re[Nt].length;ir++)yr(Rt,Re[Nt][ir])}(st),st}function yr(be,ye){for(var De=0;De<ye.length;De+=3)be.minX=Math.min(be.minX,ye[De]),be.minY=Math.min(be.minY,ye[De+1]),be.maxX=Math.max(be.maxX,ye[De]),be.maxY=Math.max(be.maxY,ye[De+1])}function Vr(be,ye,De,nt){if(ye.geometry){var st=ye.geometry.coordinates,Rt=ye.geometry.type,Re=Math.pow(De.tolerance/((1<<De.maxZoom)*De.extent),2),Ht=[],Nt=ye.id;if(De.promoteId?Nt=ye.properties[De.promoteId]:De.generateId&&(Nt=nt||0),Rt==="Point")wi(st,Ht);else if(Rt==="MultiPoint")for(var ir=0;ir<st.length;ir++)wi(st[ir],Ht);else if(Rt==="LineString")xn(st,Ht,Re,!1);else if(Rt==="MultiLineString"){if(De.lineMetrics){for(ir=0;ir<st.length;ir++)xn(st[ir],Ht=[],Re,!1),be.push(hi(Nt,"LineString",Ht,ye.properties));return}si(st,Ht,Re,!1)}else if(Rt==="Polygon")si(st,Ht,Re,!0);else{if(Rt!=="MultiPolygon"){if(Rt==="GeometryCollection"){for(ir=0;ir<ye.geometry.geometries.length;ir++)Vr(be,{id:Nt,geometry:ye.geometry.geometries[ir],properties:ye.properties},De,nt);return}throw new Error("Input data is not a valid GeoJSON object.")}for(ir=0;ir<st.length;ir++){var Br=[];si(st[ir],Br,Re,!0),Ht.push(Br)}}be.push(hi(Nt,Rt,Ht,ye.properties))}}function wi(be,ye){ye.push(fr(be[0])),ye.push(or(be[1])),ye.push(0)}function xn(be,ye,De,nt){for(var st,Rt,Re=0,Ht=0;Ht<be.length;Ht++){var Nt=fr(be[Ht][0]),ir=or(be[Ht][1]);ye.push(Nt),ye.push(ir),ye.push(0),Ht>0&&(Re+=nt?(st*ir-Nt*Rt)/2:Math.sqrt(Math.pow(Nt-st,2)+Math.pow(ir-Rt,2))),st=Nt,Rt=ir}var Br=ye.length-3;ye[2]=1,ai(ye,0,Br,De),ye[Br+2]=1,ye.size=Math.abs(Re),ye.start=0,ye.end=ye.size}function si(be,ye,De,nt){for(var st=0;st<be.length;st++){var Rt=[];xn(be[st],Rt,De,nt),ye.push(Rt)}}function fr(be){return be/360+.5}function or(be){var ye=Math.sin(be*Math.PI/180),De=.5-.25*Math.log((1+ye)/(1-ye))/Math.PI;return De<0?0:De>1?1:De}function Yr(be,ye,De,nt,st,Rt,Re,Ht){if(nt/=ye,Rt>=(De/=ye)&&Re<nt)return be;if(Re<De||Rt>=nt)return null;for(var Nt=[],ir=0;ir<be.length;ir++){var Br=be[ir],nn=Br.geometry,Fr=Br.type,$n=st===0?Br.minX:Br.minY,Wn=st===0?Br.maxX:Br.maxY;if($n>=De&&Wn<nt)Nt.push(Br);else if(!(Wn<De||$n>=nt)){var sn=[];if(Fr==="Point"||Fr==="MultiPoint")un(nn,sn,De,nt,st);else if(Fr==="LineString")Nr(nn,sn,De,nt,st,!1,Ht.lineMetrics);else if(Fr==="MultiLineString")Yn(nn,sn,De,nt,st,!1);else if(Fr==="Polygon")Yn(nn,sn,De,nt,st,!0);else if(Fr==="MultiPolygon")for(var yi=0;yi<nn.length;yi++){var Ai=[];Yn(nn[yi],Ai,De,nt,st,!0),Ai.length&&sn.push(Ai)}if(sn.length){if(Ht.lineMetrics&&Fr==="LineString"){for(yi=0;yi<sn.length;yi++)Nt.push(hi(Br.id,Fr,sn[yi],Br.tags));continue}Fr!=="LineString"&&Fr!=="MultiLineString"||(sn.length===1?(Fr="LineString",sn=sn[0]):Fr="MultiLineString"),Fr!=="Point"&&Fr!=="MultiPoint"||(Fr=sn.length===3?"Point":"MultiPoint"),Nt.push(hi(Br.id,Fr,sn,Br.tags))}}}return Nt.length?Nt:null}function un(be,ye,De,nt,st){for(var Rt=0;Rt<be.length;Rt+=3){var Re=be[Rt+st];Re>=De&&Re<=nt&&(ye.push(be[Rt]),ye.push(be[Rt+1]),ye.push(be[Rt+2]))}}function Nr(be,ye,De,nt,st,Rt,Re){for(var Ht,Nt,ir=pn(be),Br=st===0?No:gi,nn=be.start,Fr=0;Fr<be.length-3;Fr+=3){var $n=be[Fr],Wn=be[Fr+1],sn=be[Fr+2],yi=be[Fr+3],Ai=be[Fr+4],Xi=st===0?$n:Wn,Ii=st===0?yi:Ai,qi=!1;Re&&(Ht=Math.sqrt(Math.pow($n-yi,2)+Math.pow(Wn-Ai,2))),Xi<De?Ii>De&&(Nt=Br(ir,$n,Wn,yi,Ai,De),Re&&(ir.start=nn+Ht*Nt)):Xi>nt?Ii<nt&&(Nt=Br(ir,$n,Wn,yi,Ai,nt),Re&&(ir.start=nn+Ht*Nt)):ci(ir,$n,Wn,sn),Ii<De&&Xi>=De&&(Nt=Br(ir,$n,Wn,yi,Ai,De),qi=!0),Ii>nt&&Xi<=nt&&(Nt=Br(ir,$n,Wn,yi,Ai,nt),qi=!0),!Rt&&qi&&(Re&&(ir.end=nn+Ht*Nt),ye.push(ir),ir=pn(be)),Re&&(nn+=Ht)}var ro=be.length-3;$n=be[ro],Wn=be[ro+1],sn=be[ro+2],(Xi=st===0?$n:Wn)>=De&&Xi<=nt&&ci(ir,$n,Wn,sn),ro=ir.length-3,Rt&&ro>=3&&(ir[ro]!==ir[0]||ir[ro+1]!==ir[1])&&ci(ir,ir[0],ir[1],ir[2]),ir.length&&ye.push(ir)}function pn(be){var ye=[];return ye.size=be.size,ye.start=be.start,ye.end=be.end,ye}function Yn(be,ye,De,nt,st,Rt){for(var Re=0;Re<be.length;Re++)Nr(be[Re],ye,De,nt,st,Rt,!1)}function ci(be,ye,De,nt){be.push(ye),be.push(De),be.push(nt)}function No(be,ye,De,nt,st,Rt){var Re=(Rt-ye)/(nt-ye);return be.push(Rt),be.push(De+(st-De)*Re),be.push(1),Re}function gi(be,ye,De,nt,st,Rt){var Re=(Rt-De)/(st-De);return be.push(ye+(nt-ye)*Re),be.push(Rt),be.push(1),Re}function co(be,ye){for(var De=[],nt=0;nt<be.length;nt++){var st,Rt=be[nt],Re=Rt.type;if(Re==="Point"||Re==="MultiPoint"||Re==="LineString")st=li(Rt.geometry,ye);else if(Re==="MultiLineString"||Re==="Polygon"){st=[];for(var Ht=0;Ht<Rt.geometry.length;Ht++)st.push(li(Rt.geometry[Ht],ye))}else if(Re==="MultiPolygon")for(st=[],Ht=0;Ht<Rt.geometry.length;Ht++){for(var Nt=[],ir=0;ir<Rt.geometry[Ht].length;ir++)Nt.push(li(Rt.geometry[Ht][ir],ye));st.push(Nt)}De.push(hi(Rt.id,Re,st,Rt.tags))}return De}function li(be,ye){var De=[];De.size=be.size,be.start!==void 0&&(De.start=be.start,De.end=be.end);for(var nt=0;nt<be.length;nt+=3)De.push(be[nt]+ye,be[nt+1],be[nt+2]);return De}function to(be,ye){if(be.transformed)return be;var De,nt,st,Rt=1<<be.z,Re=be.x,Ht=be.y;for(De=0;De<be.features.length;De++){var Nt=be.features[De],ir=Nt.geometry,Br=Nt.type;if(Nt.geometry=[],Br===1)for(nt=0;nt<ir.length;nt+=2)Nt.geometry.push(yo(ir[nt],ir[nt+1],ye,Rt,Re,Ht));else for(nt=0;nt<ir.length;nt++){var nn=[];for(st=0;st<ir[nt].length;st+=2)nn.push(yo(ir[nt][st],ir[nt][st+1],ye,Rt,Re,Ht));Nt.geometry.push(nn)}}return be.transformed=!0,be}function yo(be,ye,De,nt,st,Rt){return[Math.round(De*(be*nt-st)),Math.round(De*(ye*nt-Rt))]}function pi(be,ye,De,nt,st){for(var Rt=ye===st.maxZoom?0:st.tolerance/((1<<ye)*st.extent),Re={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:De,y:nt,z:ye,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},Ht=0;Ht<be.length;Ht++){Re.numFeatures++,Ti(Re,be[Ht],Rt,st);var Nt=be[Ht].minX,ir=be[Ht].minY,Br=be[Ht].maxX,nn=be[Ht].maxY;Nt<Re.minX&&(Re.minX=Nt),ir<Re.minY&&(Re.minY=ir),Br>Re.maxX&&(Re.maxX=Br),nn>Re.maxY&&(Re.maxY=nn)}return Re}function Ti(be,ye,De,nt){var st=ye.geometry,Rt=ye.type,Re=[];if(Rt==="Point"||Rt==="MultiPoint")for(var Ht=0;Ht<st.length;Ht+=3)Re.push(st[Ht]),Re.push(st[Ht+1]),be.numPoints++,be.numSimplified++;else if(Rt==="LineString")Xo(Re,st,be,De,!1,!1);else if(Rt==="MultiLineString"||Rt==="Polygon")for(Ht=0;Ht<st.length;Ht++)Xo(Re,st[Ht],be,De,Rt==="Polygon",Ht===0);else if(Rt==="MultiPolygon")for(var Nt=0;Nt<st.length;Nt++){var ir=st[Nt];for(Ht=0;Ht<ir.length;Ht++)Xo(Re,ir[Ht],be,De,!0,Ht===0)}if(Re.length){var Br=ye.tags||null;if(Rt==="LineString"&&nt.lineMetrics){for(var nn in Br={},ye.tags)Br[nn]=ye.tags[nn];Br.mapbox_clip_start=st.start/st.size,Br.mapbox_clip_end=st.end/st.size}var Fr={geometry:Re,type:Rt==="Polygon"||Rt==="MultiPolygon"?3:Rt==="LineString"||Rt==="MultiLineString"?2:1,tags:Br};ye.id!==null&&(Fr.id=ye.id),be.features.push(Fr)}}function Xo(be,ye,De,nt,st,Rt){var Re=nt*nt;if(nt>0&&ye.size<(st?Re:nt))De.numPoints+=ye.length/3;else{for(var Ht=[],Nt=0;Nt<ye.length;Nt+=3)(nt===0||ye[Nt+2]>Re)&&(De.numSimplified++,Ht.push(ye[Nt]),Ht.push(ye[Nt+1])),De.numPoints++;st&&function(ir,Br){for(var nn=0,Fr=0,$n=ir.length,Wn=$n-2;Fr<$n;Wn=Fr,Fr+=2)nn+=(ir[Fr]-ir[Wn])*(ir[Fr+1]+ir[Wn+1]);if(nn>0===Br)for(Fr=0,$n=ir.length;Fr<$n/2;Fr+=2){var sn=ir[Fr],yi=ir[Fr+1];ir[Fr]=ir[$n-2-Fr],ir[Fr+1]=ir[$n-1-Fr],ir[$n-2-Fr]=sn,ir[$n-1-Fr]=yi}}(Ht,Rt),be.push(Ht)}}function vn(be,ye){var De=(ye=this.options=function(st,Rt){for(var Re in Rt)st[Re]=Rt[Re];return st}(Object.create(this.options),ye)).debug;if(De&&console.time("preprocess data"),ye.maxZoom<0||ye.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(ye.promoteId&&ye.generateId)throw new Error("promoteId and generateId cannot be used together.");var nt=function(st,Rt){var Re=[];if(st.type==="FeatureCollection")for(var Ht=0;Ht<st.features.length;Ht++)Vr(Re,st.features[Ht],Rt,Ht);else Vr(Re,st.type==="Feature"?st:{geometry:st},Rt);return Re}(be,ye);this.tiles={},this.tileCoords=[],De&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",ye.indexMaxZoom,ye.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),nt=function(st,Rt){var Re=Rt.buffer/Rt.extent,Ht=st,Nt=Yr(st,1,-1-Re,Re,0,-1,2,Rt),ir=Yr(st,1,1-Re,2+Re,0,-1,2,Rt);return(Nt||ir)&&(Ht=Yr(st,1,-Re,1+Re,0,-1,2,Rt)||[],Nt&&(Ht=co(Nt,1).concat(Ht)),ir&&(Ht=Ht.concat(co(ir,-1)))),Ht}(nt,ye),nt.length&&this.splitTile(nt,0,0,0),De&&(nt.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function ze(be,ye,De){return 32*((1<<be)*De+ye)+be}function Ea(be,ye){const De=be.tileID.canonical;if(!this._geoJSONIndex)return ye(null,null);const nt=this._geoJSONIndex.getTile(De.z,De.x,De.y);if(!nt)return ye(null,null);const st=new ce(nt.features);let Rt=_e.exports(st);Rt.byteOffset===0&&Rt.byteLength===Rt.buffer.byteLength||(Rt=new Uint8Array(Rt)),ye(null,{vectorTile:st,rawData:Rt.buffer})}vn.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},vn.prototype.splitTile=function(be,ye,De,nt,st,Rt,Re){for(var Ht=[be,ye,De,nt],Nt=this.options,ir=Nt.debug;Ht.length;){nt=Ht.pop(),De=Ht.pop(),ye=Ht.pop(),be=Ht.pop();var Br=1<<ye,nn=ze(ye,De,nt),Fr=this.tiles[nn];if(!Fr&&(ir>1&&console.time("creation"),Fr=this.tiles[nn]=pi(be,ye,De,nt,Nt),this.tileCoords.push({z:ye,x:De,y:nt}),ir)){ir>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",ye,De,nt,Fr.numFeatures,Fr.numPoints,Fr.numSimplified),console.timeEnd("creation"));var $n="z"+ye;this.stats[$n]=(this.stats[$n]||0)+1,this.total++}if(Fr.source=be,st){if(ye===Nt.maxZoom||ye===st)continue;var Wn=1<<st-ye;if(De!==Math.floor(Rt/Wn)||nt!==Math.floor(Re/Wn))continue}else if(ye===Nt.indexMaxZoom||Fr.numPoints<=Nt.indexMaxPoints)continue;if(Fr.source=null,be.length!==0){ir>1&&console.time("clipping");var sn,yi,Ai,Xi,Ii,qi,ro=.5*Nt.buffer/Nt.extent,ko=.5-ro,Yo=.5+ro,So=1+ro;sn=yi=Ai=Xi=null,Ii=Yr(be,Br,De-ro,De+Yo,0,Fr.minX,Fr.maxX,Nt),qi=Yr(be,Br,De+ko,De+So,0,Fr.minX,Fr.maxX,Nt),be=null,Ii&&(sn=Yr(Ii,Br,nt-ro,nt+Yo,1,Fr.minY,Fr.maxY,Nt),yi=Yr(Ii,Br,nt+ko,nt+So,1,Fr.minY,Fr.maxY,Nt),Ii=null),qi&&(Ai=Yr(qi,Br,nt-ro,nt+Yo,1,Fr.minY,Fr.maxY,Nt),Xi=Yr(qi,Br,nt+ko,nt+So,1,Fr.minY,Fr.maxY,Nt),qi=null),ir>1&&console.timeEnd("clipping"),Ht.push(sn||[],ye+1,2*De,2*nt),Ht.push(yi||[],ye+1,2*De,2*nt+1),Ht.push(Ai||[],ye+1,2*De+1,2*nt),Ht.push(Xi||[],ye+1,2*De+1,2*nt+1)}}},vn.prototype.getTile=function(be,ye,De){var nt=this.options,st=nt.extent,Rt=nt.debug;if(be<0||be>24)return null;var Re=1<<be,Ht=ze(be,ye=(ye%Re+Re)%Re,De);if(this.tiles[Ht])return to(this.tiles[Ht],st);Rt>1&&console.log("drilling down to z%d-%d-%d",be,ye,De);for(var Nt,ir=be,Br=ye,nn=De;!Nt&&ir>0;)ir--,Br=Math.floor(Br/2),nn=Math.floor(nn/2),Nt=this.tiles[ze(ir,Br,nn)];return Nt&&Nt.source?(Rt>1&&console.log("found parent tile z%d-%d-%d",ir,Br,nn),Rt>1&&console.time("drilling down"),this.splitTile(Nt.source,ir,Br,nn,be,ye,De),Rt>1&&console.timeEnd("drilling down"),this.tiles[Ht]?to(this.tiles[Ht],st):null):null};class ha extends U{constructor(ye,De,nt,st){super(ye,De,nt,Ea),st&&(this.loadGeoJSON=st)}loadData(ye,De){var nt;(nt=this._pendingRequest)===null||nt===void 0||nt.cancel(),this._pendingCallback&&this._pendingCallback(null,{abandoned:!0});const st=!!(ye&&ye.request&&ye.request.collectResourceTiming)&&new l.RequestPerformance(ye.request);this._pendingCallback=De,this._pendingRequest=this.loadGeoJSON(ye,(Rt,Re)=>{if(delete this._pendingCallback,delete this._pendingRequest,Rt||!Re)return De(Rt);if(typeof Re!="object")return De(new Error(`Input data given to '${ye.source}' is not a valid GeoJSON object.`));{H(Re,!0);try{if(ye.filter){const Nt=l.createExpression(ye.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(Nt.result==="error")throw new Error(Nt.value.map(Br=>`${Br.key}: ${Br.message}`).join(", "));Re={type:"FeatureCollection",features:Re.features.filter(Br=>Nt.value.evaluate({zoom:0},Br))}}this._geoJSONIndex=ye.cluster?new Kr(function({superclusterOptions:Nt,clusterProperties:ir}){if(!ir||!Nt)return Nt;const Br={},nn={},Fr={accumulated:null,zoom:0},$n={properties:null},Wn=Object.keys(ir);for(const sn of Wn){const[yi,Ai]=ir[sn],Xi=l.createExpression(Ai),Ii=l.createExpression(typeof yi=="string"?[yi,["accumulated"],["get",sn]]:yi);Br[sn]=Xi.value,nn[sn]=Ii.value}return Nt.map=sn=>{$n.properties=sn;const yi={};for(const Ai of Wn)yi[Ai]=Br[Ai].evaluate(Fr,$n);return yi},Nt.reduce=(sn,yi)=>{$n.properties=yi;for(const Ai of Wn)Fr.accumulated=sn[Ai],sn[Ai]=nn[Ai].evaluate(Fr,$n)},Nt}(ye)).load(Re.features):function(Nt,ir){return new vn(Nt,ir)}(Re,ye.geojsonVtOptions)}catch(Nt){return De(Nt)}this.loaded={};const Ht={};if(st){const Nt=st.finish();Nt&&(Ht.resourceTiming={},Ht.resourceTiming[ye.source]=JSON.parse(JSON.stringify(Nt)))}De(null,Ht)}})}reloadTile(ye,De){const nt=this.loaded;return nt&&nt[ye.uid]?super.reloadTile(ye,De):this.loadTile(ye,De)}loadGeoJSON(ye,De){if(ye.request)return l.getJSON(ye.request,De);if(typeof ye.data=="string")try{De(null,JSON.parse(ye.data))}catch{De(new Error(`Input data given to '${ye.source}' is not a valid GeoJSON object.`))}else De(new Error(`Input data given to '${ye.source}' is not a valid GeoJSON object.`));return{cancel:()=>{}}}removeSource(ye,De){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),De()}getClusterExpansionZoom(ye,De){try{De(null,this._geoJSONIndex.getClusterExpansionZoom(ye.clusterId))}catch(nt){De(nt)}}getClusterChildren(ye,De){try{De(null,this._geoJSONIndex.getChildren(ye.clusterId))}catch(nt){De(nt)}}getClusterLeaves(ye,De){try{De(null,this._geoJSONIndex.getLeaves(ye.clusterId,ye.limit,ye.offset))}catch(nt){De(nt)}}}class ra{constructor(ye){this.self=ye,this.actor=new l.Actor(ye,this),this.layerIndexes={},this.availableImages={},this.workerSourceTypes={vector:U,geojson:ha},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=(De,nt)=>{if(this.workerSourceTypes[De])throw new Error(`Worker source with name "${De}" already registered.`);this.workerSourceTypes[De]=nt},this.self.registerRTLTextPlugin=De=>{if(l.plugin.isParsed())throw new Error("RTL text plugin already registered.");l.plugin.applyArabicShaping=De.applyArabicShaping,l.plugin.processBidirectionalText=De.processBidirectionalText,l.plugin.processStyledBidirectionalText=De.processStyledBidirectionalText}}setReferrer(ye,De){this.referrer=De}setImages(ye,De,nt){this.availableImages[ye]=De;for(const st in this.workerSources[ye]){const Rt=this.workerSources[ye][st];for(const Re in Rt)Rt[Re].availableImages=De}nt()}setLayers(ye,De,nt){this.getLayerIndex(ye).replace(De),nt()}updateLayers(ye,De,nt){this.getLayerIndex(ye).update(De.layers,De.removedIds),nt()}loadTile(ye,De,nt){this.getWorkerSource(ye,De.type,De.source).loadTile(De,nt)}loadDEMTile(ye,De,nt){this.getDEMWorkerSource(ye,De.source).loadTile(De,nt)}reloadTile(ye,De,nt){this.getWorkerSource(ye,De.type,De.source).reloadTile(De,nt)}abortTile(ye,De,nt){this.getWorkerSource(ye,De.type,De.source).abortTile(De,nt)}removeTile(ye,De,nt){this.getWorkerSource(ye,De.type,De.source).removeTile(De,nt)}removeDEMTile(ye,De){this.getDEMWorkerSource(ye,De.source).removeTile(De)}removeSource(ye,De,nt){if(!this.workerSources[ye]||!this.workerSources[ye][De.type]||!this.workerSources[ye][De.type][De.source])return;const st=this.workerSources[ye][De.type][De.source];delete this.workerSources[ye][De.type][De.source],st.removeSource!==void 0?st.removeSource(De,nt):nt()}loadWorkerSource(ye,De,nt){try{this.self.importScripts(De.url),nt()}catch(st){nt(st.toString())}}syncRTLPluginState(ye,De,nt){try{l.plugin.setState(De);const st=l.plugin.getPluginURL();if(l.plugin.isLoaded()&&!l.plugin.isParsed()&&st!=null){this.self.importScripts(st);const Rt=l.plugin.isParsed();nt(Rt?void 0:new Error(`RTL Text Plugin failed to import scripts from ${st}`),Rt)}}catch(st){nt(st.toString())}}getAvailableImages(ye){let De=this.availableImages[ye];return De||(De=[]),De}getLayerIndex(ye){let De=this.layerIndexes[ye];return De||(De=this.layerIndexes[ye]=new w),De}getWorkerSource(ye,De,nt){if(this.workerSources[ye]||(this.workerSources[ye]={}),this.workerSources[ye][De]||(this.workerSources[ye][De]={}),!this.workerSources[ye][De][nt]){const st={send:(Rt,Re,Ht)=>{this.actor.send(Rt,Re,Ht,ye)}};this.workerSources[ye][De][nt]=new this.workerSourceTypes[De](st,this.getLayerIndex(ye),this.getAvailableImages(ye))}return this.workerSources[ye][De][nt]}getDEMWorkerSource(ye,De){return this.demWorkerSources[ye]||(this.demWorkerSources[ye]={}),this.demWorkerSources[ye][De]||(this.demWorkerSources[ye][De]=new G),this.demWorkerSources[ye][De]}enforceCacheSizeLimit(ye,De){l.enforceCacheSizeLimit(De)}}return l.isWorker()&&(self.worker=new ra(self)),ra}),u(["./shared"],function(l){var h=v;function v(M){return!function(d){return typeof window>"u"||typeof document>"u"?"not a browser":Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray?Function.prototype&&Function.prototype.bind?Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions?"JSON"in window&&"parse"in JSON&&"stringify"in JSON?function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var C,D,q=new Blob([""],{type:"text/javascript"}),Y=URL.createObjectURL(q);try{D=new Worker(Y),C=!0}catch{C=!1}return D&&D.terminate(),URL.revokeObjectURL(Y),C}()?"Uint8ClampedArray"in window?ArrayBuffer.isView?function(){var C=document.createElement("canvas");C.width=C.height=1;var D=C.getContext("2d");if(!D)return!1;var q=D.getImageData(0,0,1,1);return q&&q.width===C.width}()?(w[k=d&&d.failIfMajorPerformanceCaveat]===void 0&&(w[k]=function(C){var D,q=function(Y){var oe=document.createElement("canvas"),le=Object.create(v.webGLContextAttributes);return le.failIfMajorPerformanceCaveat=Y,oe.getContext("webgl",le)||oe.getContext("experimental-webgl",le)}(C);if(!q)return!1;try{D=q.createShader(q.VERTEX_SHADER)}catch{return!1}return!(!D||q.isContextLost())&&(q.shaderSource(D,"void main() {}"),q.compileShader(D),q.getShaderParameter(D,q.COMPILE_STATUS)===!0)}(k)),w[k]?document.documentMode?"insufficient ECMAScript 6 support":void 0:"insufficient WebGL support"):"insufficient Canvas/getImageData support":"insufficient ArrayBuffer support":"insufficient Uint8ClampedArray support":"insufficient worker support":"insufficient JSON support":"insufficient Object support":"insufficient Function support":"insufficent Array support";var k}(M)}var w={};function E(M,d){if(Array.isArray(M)){if(!Array.isArray(d)||M.length!==d.length)return!1;for(let k=0;k<M.length;k++)if(!E(M[k],d[k]))return!1;return!0}if(typeof M=="object"&&M!==null&&d!==null){if(typeof d!="object"||Object.keys(M).length!==Object.keys(d).length)return!1;for(const k in M)if(!E(M[k],d[k]))return!1;return!0}return M===d}v.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0};class T{static testProp(d){if(!T.docStyle)return d[0];for(let k=0;k<d.length;k++)if(d[k]in T.docStyle)return d[k];return d[0]}static create(d,k,C){const D=window.document.createElement(d);return k!==void 0&&(D.className=k),C&&C.appendChild(D),D}static createNS(d,k){return window.document.createElementNS(d,k)}static disableDrag(){T.docStyle&&T.selectProp&&(T.userSelect=T.docStyle[T.selectProp],T.docStyle[T.selectProp]="none")}static enableDrag(){T.docStyle&&T.selectProp&&(T.docStyle[T.selectProp]=T.userSelect)}static setTransform(d,k){d.style[T.transformProp]=k}static addEventListener(d,k,C,D={}){d.addEventListener(k,C,"passive"in D?D:D.capture)}static removeEventListener(d,k,C,D={}){d.removeEventListener(k,C,"passive"in D?D:D.capture)}static suppressClickInternal(d){d.preventDefault(),d.stopPropagation(),window.removeEventListener("click",T.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",T.suppressClickInternal,!0),window.setTimeout(()=>{window.removeEventListener("click",T.suppressClickInternal,!0)},0)}static mousePos(d,k){const C=d.getBoundingClientRect();return new l.pointGeometry(k.clientX-C.left-d.clientLeft,k.clientY-C.top-d.clientTop)}static touchPos(d,k){const C=d.getBoundingClientRect(),D=[];for(let q=0;q<k.length;q++)D.push(new l.pointGeometry(k[q].clientX-C.left-d.clientLeft,k[q].clientY-C.top-d.clientTop));return D}static mouseButton(d){return d.button}static remove(d){d.parentNode&&d.parentNode.removeChild(d)}}T.docStyle=typeof window<"u"&&window.document&&window.document.documentElement.style,T.selectProp=T.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),T.transformProp=T.testProp(["transform","WebkitTransform"]);class I{constructor(d){this._transformRequestFn=d}transformRequest(d,k){return this._transformRequestFn&&this._transformRequestFn(d,k)||{url:d}}normalizeSpriteURL(d,k,C){const D=function(q){const Y=q.match(F);if(!Y)throw new Error(`Unable to parse URL "${q}"`);return{protocol:Y[1],authority:Y[2],path:Y[3]||"/",params:Y[4]?Y[4].split("&"):[]}}(d);return D.path+=`${k}${C}`,function(q){const Y=q.params.length?`?${q.params.join("&")}`:"";return`${q.protocol}://${q.authority}${q.path}${Y}`}(D)}setTransformRequest(d){this._transformRequestFn=d}}const F=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;class U{constructor(d,k,C,D){this.context=d,this.format=C,this.texture=d.gl.createTexture(),this.update(k,D)}update(d,k,C){const{width:D,height:q}=d,Y=!(this.size&&this.size[0]===D&&this.size[1]===q||C),{context:oe}=this,{gl:le}=oe;if(this.useMipmap=Boolean(k&&k.useMipmap),le.bindTexture(le.TEXTURE_2D,this.texture),oe.pixelStoreUnpackFlipY.set(!1),oe.pixelStoreUnpack.set(1),oe.pixelStoreUnpackPremultiplyAlpha.set(this.format===le.RGBA&&(!k||k.premultiply!==!1)),Y)this.size=[D,q],d instanceof HTMLImageElement||d instanceof HTMLCanvasElement||d instanceof HTMLVideoElement||d instanceof ImageData||l.isImageBitmap(d)?le.texImage2D(le.TEXTURE_2D,0,this.format,this.format,le.UNSIGNED_BYTE,d):le.texImage2D(le.TEXTURE_2D,0,this.format,D,q,0,this.format,le.UNSIGNED_BYTE,d.data);else{const{x:de,y:Se}=C||{x:0,y:0};d instanceof HTMLImageElement||d instanceof HTMLCanvasElement||d instanceof HTMLVideoElement||d instanceof ImageData||l.isImageBitmap(d)?le.texSubImage2D(le.TEXTURE_2D,0,de,Se,le.RGBA,le.UNSIGNED_BYTE,d):le.texSubImage2D(le.TEXTURE_2D,0,de,Se,D,q,le.RGBA,le.UNSIGNED_BYTE,d.data)}this.useMipmap&&this.isSizePowerOfTwo()&&le.generateMipmap(le.TEXTURE_2D)}bind(d,k,C){const{context:D}=this,{gl:q}=D;q.bindTexture(q.TEXTURE_2D,this.texture),C!==q.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(C=q.LINEAR),d!==this.filter&&(q.texParameteri(q.TEXTURE_2D,q.TEXTURE_MAG_FILTER,d),q.texParameteri(q.TEXTURE_2D,q.TEXTURE_MIN_FILTER,C||d),this.filter=d),k!==this.wrap&&(q.texParameteri(q.TEXTURE_2D,q.TEXTURE_WRAP_S,k),q.texParameteri(q.TEXTURE_2D,q.TEXTURE_WRAP_T,k),this.wrap=k)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:d}=this.context;d.deleteTexture(this.texture),this.texture=null}}function G(M){const{userImage:d}=M;return!!(d&&d.render&&d.render())&&(M.data.replace(new Uint8Array(d.data.buffer)),!0)}class H extends l.Evented{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new l.RGBAImage({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(d){if(this.loaded!==d&&(this.loaded=d,d)){for(const{ids:k,callback:C}of this.requestors)this._notify(k,C);this.requestors=[]}}getImage(d){return this.images[d]}addImage(d,k){if(this.images[d])throw new Error(`Image id ${d} already exist, use updateImage instead`);this._validate(d,k)&&(this.images[d]=k)}_validate(d,k){let C=!0;return this._validateStretch(k.stretchX,k.data&&k.data.width)||(this.fire(new l.ErrorEvent(new Error(`Image "${d}" has invalid "stretchX" value`))),C=!1),this._validateStretch(k.stretchY,k.data&&k.data.height)||(this.fire(new l.ErrorEvent(new Error(`Image "${d}" has invalid "stretchY" value`))),C=!1),this._validateContent(k.content,k)||(this.fire(new l.ErrorEvent(new Error(`Image "${d}" has invalid "content" value`))),C=!1),C}_validateStretch(d,k){if(!d)return!0;let C=0;for(const D of d){if(D[0]<C||D[1]<D[0]||k<D[1])return!1;C=D[1]}return!0}_validateContent(d,k){return!(d&&(d.length!==4||d[0]<0||k.data.width<d[0]||d[1]<0||k.data.height<d[1]||d[2]<0||k.data.width<d[2]||d[3]<0||k.data.height<d[3]||d[2]<d[0]||d[3]<d[1]))}updateImage(d,k){const C=this.images[d];if(C.data.width!==k.data.width||C.data.height!==k.data.height)throw new Error(`size mismatch between old image (${C.data.width}x${C.data.height}) and new image (${k.data.width}x${k.data.height}).`);k.version=C.version+1,this.images[d]=k,this.updatedImages[d]=!0}removeImage(d){const k=this.images[d];delete this.images[d],delete this.patterns[d],k.userImage&&k.userImage.onRemove&&k.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(d,k){let C=!0;if(!this.isLoaded())for(const D of d)this.images[D]||(C=!1);this.isLoaded()||C?this._notify(d,k):this.requestors.push({ids:d,callback:k})}_notify(d,k){const C={};for(const D of d){this.images[D]||this.fire(new l.Event("styleimagemissing",{id:D}));const q=this.images[D];q?C[D]={data:q.data.clone(),pixelRatio:q.pixelRatio,sdf:q.sdf,version:q.version,stretchX:q.stretchX,stretchY:q.stretchY,content:q.content,hasRenderCallback:Boolean(q.userImage&&q.userImage.render)}:l.warnOnce(`Image "${D}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}k(null,C)}getPixelSize(){const{width:d,height:k}=this.atlasImage;return{width:d,height:k}}getPattern(d){const k=this.patterns[d],C=this.getImage(d);if(!C)return null;if(k&&k.position.version===C.version)return k.position;if(k)k.position.version=C.version;else{const D={w:C.data.width+2,h:C.data.height+2,x:0,y:0},q=new l.ImagePosition(D,C);this.patterns[d]={bin:D,position:q}}return this._updatePatternAtlas(),this.patterns[d].position}bind(d){const k=d.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new U(d,this.atlasImage,k.RGBA),this.atlasTexture.bind(k.LINEAR,k.CLAMP_TO_EDGE)}_updatePatternAtlas(){const d=[];for(const q in this.patterns)d.push(this.patterns[q].bin);const{w:k,h:C}=l.potpack(d),D=this.atlasImage;D.resize({width:k||1,height:C||1});for(const q in this.patterns){const{bin:Y}=this.patterns[q],oe=Y.x+1,le=Y.y+1,de=this.images[q].data,Se=de.width,je=de.height;l.RGBAImage.copy(de,D,{x:0,y:0},{x:oe,y:le},{width:Se,height:je}),l.RGBAImage.copy(de,D,{x:0,y:je-1},{x:oe,y:le-1},{width:Se,height:1}),l.RGBAImage.copy(de,D,{x:0,y:0},{x:oe,y:le+je},{width:Se,height:1}),l.RGBAImage.copy(de,D,{x:Se-1,y:0},{x:oe-1,y:le},{width:1,height:je}),l.RGBAImage.copy(de,D,{x:0,y:0},{x:oe+Se,y:le},{width:1,height:je})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(d){for(const k of d){if(this.callbackDispatchedThisFrame[k])continue;this.callbackDispatchedThisFrame[k]=!0;const C=this.images[k];C||l.warnOnce(`Image with ID: "${k}" was not found`),G(C)&&this.updateImage(k,C)}}}const X=1e20;function ee(M,d,k,C,D,q,Y,oe,le){for(let de=d;de<d+C;de++)K(M,k*q+de,q,D,Y,oe,le);for(let de=k;de<k+D;de++)K(M,de*q+d,1,C,Y,oe,le)}function K(M,d,k,C,D,q,Y){q[0]=0,Y[0]=-X,Y[1]=X,D[0]=M[d];for(let oe=1,le=0,de=0;oe<C;oe++){D[oe]=M[d+oe*k];const Se=oe*oe;do{const je=q[le];de=(D[oe]-D[je]+Se-je*je)/(oe-je)/2}while(de<=Y[le]&&--le>-1);le++,q[le]=oe,Y[le]=de,Y[le+1]=X}for(let oe=0,le=0;oe<C;oe++){for(;Y[le+1]<oe;)le++;const de=q[le],Se=oe-de;M[d+oe*k]=D[de]+Se*Se}}class se{constructor(d,k){this.requestManager=d,this.localIdeographFontFamily=k,this.entries={}}setURL(d){this.url=d}getGlyphs(d,k){const C=[];for(const D in d)for(const q of d[D])C.push({stack:D,id:q});l.asyncAll(C,({stack:D,id:q},Y)=>{let oe=this.entries[D];oe||(oe=this.entries[D]={glyphs:{},requests:{},ranges:{}});let le=oe.glyphs[q];if(le!==void 0)return void Y(null,{stack:D,id:q,glyph:le});if(le=this._tinySDF(oe,D,q),le)return oe.glyphs[q]=le,void Y(null,{stack:D,id:q,glyph:le});const de=Math.floor(q/256);if(256*de>65535)return void Y(new Error("glyphs > 65535 not supported"));if(oe.ranges[de])return void Y(null,{stack:D,id:q,glyph:le});let Se=oe.requests[de];Se||(Se=oe.requests[de]=[],se.loadGlyphRange(D,de,this.url,this.requestManager,(je,Je)=>{if(Je){for(const Et in Je)this._doesCharSupportLocalGlyph(+Et)||(oe.glyphs[+Et]=Je[+Et]);oe.ranges[de]=!0}for(const Et of Se)Et(je,Je);delete oe.requests[de]})),Se.push((je,Je)=>{je?Y(je):Je&&Y(null,{stack:D,id:q,glyph:Je[q]||null})})},(D,q)=>{if(D)k(D);else if(q){const Y={};for(const{stack:oe,id:le,glyph:de}of q)(Y[oe]||(Y[oe]={}))[le]=de&&{id:de.id,bitmap:de.bitmap.clone(),metrics:de.metrics};k(null,Y)}})}_doesCharSupportLocalGlyph(d){return!!this.localIdeographFontFamily&&(l.unicodeBlockLookup["CJK Unified Ideographs"](d)||l.unicodeBlockLookup["Hangul Syllables"](d)||l.unicodeBlockLookup.Hiragana(d)||l.unicodeBlockLookup.Katakana(d))}_tinySDF(d,k,C){const D=this.localIdeographFontFamily;if(!D||!this._doesCharSupportLocalGlyph(C))return;let q=d.tinySDF;if(!q){let oe="400";/bold/i.test(k)?oe="900":/medium/i.test(k)?oe="500":/light/i.test(k)&&(oe="200"),q=d.tinySDF=new se.TinySDF({fontSize:24,buffer:3,radius:8,cutoff:.25,fontFamily:D,fontWeight:oe})}const Y=q.draw(String.fromCharCode(C));return{id:C,bitmap:new l.AlphaImage({width:Y.width||30,height:Y.height||30},Y.data),metrics:{width:Y.glyphWidth||24,height:Y.glyphHeight||24,left:Y.glyphLeft||0,top:Y.glyphTop-27||-8,advance:Y.glyphAdvance||24}}}}se.loadGlyphRange=function(M,d,k,C,D){const q=256*d,Y=q+255,oe=C.transformRequest(k.replace("{fontstack}",M).replace("{range}",`${q}-${Y}`),l.ResourceType.Glyphs);l.getArrayBuffer(oe,(le,de)=>{if(le)D(le);else if(de){const Se={};for(const je of l.parseGlyphPbf(de))Se[je.id]=je;D(null,Se)}})},se.TinySDF=class{constructor({fontSize:M=24,buffer:d=3,radius:k=8,cutoff:C=.25,fontFamily:D="sans-serif",fontWeight:q="normal",fontStyle:Y="normal"}={}){this.buffer=d,this.cutoff=C,this.radius=k;const oe=this.size=M+4*d,le=this._createCanvas(oe),de=this.ctx=le.getContext("2d",{willReadFrequently:!0});de.font=`${Y} ${q} ${M}px ${D}`,de.textBaseline="alphabetic",de.textAlign="left",de.fillStyle="black",this.gridOuter=new Float64Array(oe*oe),this.gridInner=new Float64Array(oe*oe),this.f=new Float64Array(oe),this.z=new Float64Array(oe+1),this.v=new Uint16Array(oe)}_createCanvas(M){const d=document.createElement("canvas");return d.width=d.height=M,d}draw(M){const{width:d,actualBoundingBoxAscent:k,actualBoundingBoxDescent:C,actualBoundingBoxLeft:D,actualBoundingBoxRight:q}=this.ctx.measureText(M),Y=Math.ceil(k),oe=Math.min(this.size-this.buffer,Math.ceil(q-D)),le=Math.min(this.size-this.buffer,Y+Math.ceil(C)),de=oe+2*this.buffer,Se=le+2*this.buffer,je=Math.max(de*Se,0),Je=new Uint8ClampedArray(je),Et={data:Je,width:de,height:Se,glyphWidth:oe,glyphHeight:le,glyphTop:Y,glyphLeft:0,glyphAdvance:d};if(oe===0||le===0)return Et;const{ctx:mt,buffer:wt,gridInner:tr,gridOuter:cr}=this;mt.clearRect(wt,wt,oe,le),mt.fillText(M,wt,wt+Y);const Ar=mt.getImageData(wt,wt,oe,le);cr.fill(X,0,je),tr.fill(0,0,je);for(let Dt=0;Dt<le;Dt++)for(let Tr=0;Tr<oe;Tr++){const Ir=Ar.data[4*(Dt*oe+Tr)+3]/255;if(Ir===0)continue;const Zr=(Dt+wt)*de+Tr+wt;if(Ir===1)cr[Zr]=0,tr[Zr]=X;else{const Gr=.5-Ir;cr[Zr]=Gr>0?Gr*Gr:0,tr[Zr]=Gr<0?Gr*Gr:0}}ee(cr,0,0,de,Se,de,this.f,this.v,this.z),ee(tr,wt,wt,oe,le,de,this.f,this.v,this.z);for(let Dt=0;Dt<je;Dt++){const Tr=Math.sqrt(cr[Dt])-Math.sqrt(tr[Dt]);Je[Dt]=Math.round(255-255*(Tr/this.radius+this.cutoff))}return Et}};const ce=new l.Properties({anchor:new l.DataConstantProperty(l.spec.light.anchor),position:new class{constructor(){this.specification=l.spec.light.position}possiblyEvaluate(M,d){return l.sphericalToCartesian(M.expression.evaluate(d))}interpolate(M,d,k){return{x:l.number(M.x,d.x,k),y:l.number(M.y,d.y,k),z:l.number(M.z,d.z,k)}}},color:new l.DataConstantProperty(l.spec.light.color),intensity:new l.DataConstantProperty(l.spec.light.intensity)}),_e="-transition";class pe extends l.Evented{constructor(d){super(),this._transitionable=new l.Transitionable(ce),this.setLight(d),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(d,k={}){if(!this._validate(l.validateLight,d,k))for(const C in d){const D=d[C];C.endsWith(_e)?this._transitionable.setTransition(C.slice(0,-_e.length),D):this._transitionable.setValue(C,D)}}updateTransitions(d){this._transitioning=this._transitionable.transitioned(d,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(d){this.properties=this._transitioning.possiblyEvaluate(d)}_validate(d,k,C){return(!C||C.validate!==!1)&&l.emitValidationErrors(this,d.call(l.validateStyle,l.extend({value:k,style:{glyphs:!0,sprite:!0},styleSpec:l.spec})))}}class Ge{constructor(d,k){this.width=d,this.height=k,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(d,k){const C=d.join(",")+String(k);return this.dashEntry[C]||(this.dashEntry[C]=this.addDash(d,k)),this.dashEntry[C]}getDashRanges(d,k,C){const D=[];let q=d.length%2==1?-d[d.length-1]*C:0,Y=d[0]*C,oe=!0;D.push({left:q,right:Y,isDash:oe,zeroLength:d[0]===0});let le=d[0];for(let de=1;de<d.length;de++){oe=!oe;const Se=d[de];q=le*C,le+=Se,Y=le*C,D.push({left:q,right:Y,isDash:oe,zeroLength:Se===0})}return D}addRoundDash(d,k,C){const D=k/2;for(let q=-C;q<=C;q++){const Y=this.width*(this.nextRow+C+q);let oe=0,le=d[oe];for(let de=0;de<this.width;de++){de/le.right>1&&(le=d[++oe]);const Se=Math.abs(de-le.left),je=Math.abs(de-le.right),Je=Math.min(Se,je);let Et;const mt=q/C*(D+1);if(le.isDash){const wt=D-Math.abs(mt);Et=Math.sqrt(Je*Je+wt*wt)}else Et=D-Math.sqrt(Je*Je+mt*mt);this.data[Y+de]=Math.max(0,Math.min(255,Et+128))}}}addRegularDash(d){for(let oe=d.length-1;oe>=0;--oe){const le=d[oe],de=d[oe+1];le.zeroLength?d.splice(oe,1):de&&de.isDash===le.isDash&&(de.left=le.left,d.splice(oe,1))}const k=d[0],C=d[d.length-1];k.isDash===C.isDash&&(k.left=C.left-this.width,C.right=k.right+this.width);const D=this.width*this.nextRow;let q=0,Y=d[q];for(let oe=0;oe<this.width;oe++){oe/Y.right>1&&(Y=d[++q]);const le=Math.abs(oe-Y.left),de=Math.abs(oe-Y.right),Se=Math.min(le,de);this.data[D+oe]=Math.max(0,Math.min(255,(Y.isDash?Se:-Se)+128))}}addDash(d,k){const C=k?7:0,D=2*C+1;if(this.nextRow+D>this.height)return l.warnOnce("LineAtlas out of space"),null;let q=0;for(let oe=0;oe<d.length;oe++)q+=d[oe];if(q!==0){const oe=this.width/q,le=this.getDashRanges(d,this.width,oe);k?this.addRoundDash(le,oe,C):this.addRegularDash(le)}const Y={y:(this.nextRow+C+.5)/this.height,height:2*C/this.height,width:q};return this.nextRow+=D,this.dirty=!0,Y}bind(d){const k=d.gl;this.texture?(k.bindTexture(k.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,k.texSubImage2D(k.TEXTURE_2D,0,0,0,this.width,this.height,k.ALPHA,k.UNSIGNED_BYTE,this.data))):(this.texture=k.createTexture(),k.bindTexture(k.TEXTURE_2D,this.texture),k.texParameteri(k.TEXTURE_2D,k.TEXTURE_WRAP_S,k.REPEAT),k.texParameteri(k.TEXTURE_2D,k.TEXTURE_WRAP_T,k.REPEAT),k.texParameteri(k.TEXTURE_2D,k.TEXTURE_MIN_FILTER,k.LINEAR),k.texParameteri(k.TEXTURE_2D,k.TEXTURE_MAG_FILTER,k.LINEAR),k.texImage2D(k.TEXTURE_2D,0,k.ALPHA,this.width,this.height,0,k.ALPHA,k.UNSIGNED_BYTE,this.data))}}class We{constructor(d,k){this.workerPool=d,this.actors=[],this.currentActor=0,this.id=l.uniqueId();const C=this.workerPool.acquire(this.id);for(let D=0;D<C.length;D++){const q=new We.Actor(C[D],k,this.id);q.name=`Worker ${D}`,this.actors.push(q)}if(!this.actors.length)throw new Error("No actors found")}broadcast(d,k,C){l.asyncAll(this.actors,(D,q)=>{D.send(d,k,q)},C=C||function(){})}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(){this.actors.forEach(d=>{d.remove()}),this.actors=[],this.workerPool.release(this.id)}}function Ae(M,d,k){const C=function(D,q){if(D)return k(D);if(q){const Y=l.pick(l.extend(q,M),["tiles","minzoom","maxzoom","attribution","bounds","scheme","tileSize","encoding"]);q.vector_layers&&(Y.vectorLayers=q.vector_layers,Y.vectorLayerIds=Y.vectorLayers.map(oe=>oe.id)),k(null,Y)}};return M.url?l.getJSON(d.transformRequest(M.url,l.ResourceType.Source),C):l.exported.frame(()=>C(null,M))}We.Actor=l.Actor;class Ie{constructor(d,k,C){this.bounds=l.LngLatBounds.convert(this.validateBounds(d)),this.minzoom=k||0,this.maxzoom=C||24}validateBounds(d){return Array.isArray(d)&&d.length===4?[Math.max(-180,d[0]),Math.max(-90,d[1]),Math.min(180,d[2]),Math.min(90,d[3])]:[-180,-90,180,90]}contains(d){const k=Math.pow(2,d.z),C=Math.floor(l.mercatorXfromLng(this.bounds.getWest())*k),D=Math.floor(l.mercatorYfromLat(this.bounds.getNorth())*k),q=Math.ceil(l.mercatorXfromLng(this.bounds.getEast())*k),Y=Math.ceil(l.mercatorYfromLat(this.bounds.getSouth())*k);return d.x>=C&&d.x<q&&d.y>=D&&d.y<Y}}class Fe extends l.Evented{constructor(d,k,C,D){if(super(),this.id=d,this.dispatcher=C,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,l.extend(this,l.pick(k,["url","scheme","tileSize","promoteId"])),this._options=l.extend({type:"vector"},k),this._collectResourceTiming=k.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(D)}load(){this._loaded=!1,this.fire(new l.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=Ae(this._options,this.map._requestManager,(d,k)=>{this._tileJSONRequest=null,this._loaded=!0,this.map.style.sourceCaches[this.id].clearTiles(),d?this.fire(new l.ErrorEvent(d)):k&&(l.extend(this,k),k.bounds&&(this.tileBounds=new Ie(k.bounds,this.minzoom,this.maxzoom)),this.fire(new l.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new l.Event("data",{dataType:"source",sourceDataType:"content"})))})}loaded(){return this._loaded}hasTile(d){return!this.tileBounds||this.tileBounds.contains(d.canonical)}onAdd(d){this.map=d,this.load()}setSourceProperty(d){this._tileJSONRequest&&this._tileJSONRequest.cancel(),d(),this.load()}setTiles(d){return this.setSourceProperty(()=>{this._options.tiles=d}),this}setUrl(d){return this.setSourceProperty(()=>{this.url=d,this._options.url=d}),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}serialize(){return l.extend({},this._options)}loadTile(d,k){const C=d.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),D={request:this.map._requestManager.transformRequest(C,l.ResourceType.Tile),uid:d.uid,tileID:d.tileID,zoom:d.tileID.overscaledZ,tileSize:this.tileSize*d.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};function q(Y,oe){return delete d.request,d.aborted?k(null):Y&&Y.status!==404?k(Y):(oe&&oe.resourceTiming&&(d.resourceTiming=oe.resourceTiming),this.map._refreshExpiredTiles&&oe&&d.setExpiryData(oe),d.loadVectorData(oe,this.map.painter),l.cacheEntryPossiblyAdded(this.dispatcher),k(null),void(d.reloadCallback&&(this.loadTile(d,d.reloadCallback),d.reloadCallback=null)))}D.request.collectResourceTiming=this._collectResourceTiming,d.actor&&d.state!=="expired"?d.state==="loading"?d.reloadCallback=k:d.request=d.actor.send("reloadTile",D,q.bind(this)):(d.actor=this.dispatcher.getActor(),d.request=d.actor.send("loadTile",D,q.bind(this)))}abortTile(d){d.request&&(d.request.cancel(),delete d.request),d.actor&&d.actor.send("abortTile",{uid:d.uid,type:this.type,source:this.id},void 0)}unloadTile(d){d.unloadVectorData(),d.actor&&d.actor.send("removeTile",{uid:d.uid,type:this.type,source:this.id},void 0)}hasTransition(){return!1}}class ot extends l.Evented{constructor(d,k,C,D){super(),this.id=d,this.dispatcher=C,this.setEventedParent(D),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=l.extend({type:"raster"},k),l.extend(this,l.pick(k,["url","scheme","tileSize"]))}load(){this._loaded=!1,this.fire(new l.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=Ae(this._options,this.map._requestManager,(d,k)=>{this._tileJSONRequest=null,this._loaded=!0,d?this.fire(new l.ErrorEvent(d)):k&&(l.extend(this,k),k.bounds&&(this.tileBounds=new Ie(k.bounds,this.minzoom,this.maxzoom)),this.fire(new l.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new l.Event("data",{dataType:"source",sourceDataType:"content"})))})}loaded(){return this._loaded}onAdd(d){this.map=d,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}serialize(){return l.extend({},this._options)}hasTile(d){return!this.tileBounds||this.tileBounds.contains(d.canonical)}loadTile(d,k){const C=d.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);d.request=l.getImage(this.map._requestManager.transformRequest(C,l.ResourceType.Tile),(D,q,Y)=>{if(delete d.request,d.aborted)d.state="unloaded",k(null);else if(D)d.state="errored",k(D);else if(q){this.map._refreshExpiredTiles&&d.setExpiryData(Y);const oe=this.map.painter.context,le=oe.gl;d.texture=this.map.painter.getTileTexture(q.width),d.texture?d.texture.update(q,{useMipmap:!0}):(d.texture=new U(oe,q,le.RGBA,{useMipmap:!0}),d.texture.bind(le.LINEAR,le.CLAMP_TO_EDGE,le.LINEAR_MIPMAP_NEAREST),oe.extTextureFilterAnisotropic&&le.texParameterf(le.TEXTURE_2D,oe.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,oe.extTextureFilterAnisotropicMax)),d.state="loaded",l.cacheEntryPossiblyAdded(this.dispatcher),k(null)}})}abortTile(d,k){d.request&&(d.request.cancel(),delete d.request),k()}unloadTile(d,k){d.texture&&this.map.painter.saveTileTexture(d.texture),k()}hasTransition(){return!1}}let _t;class ht extends ot{constructor(d,k,C,D){super(d,k,C,D),this.type="raster-dem",this.maxzoom=22,this._options=l.extend({type:"raster-dem"},k),this.encoding=k.encoding||"mapbox"}serialize(){return{type:"raster-dem",url:this.url,tileSize:this.tileSize,tiles:this.tiles,bounds:this.bounds,encoding:this.encoding}}loadTile(d,k){const C=d.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);function D(q,Y){q&&(d.state="errored",k(q)),Y&&(d.dem=Y,d.needsHillshadePrepare=!0,d.needsTerrainPrepare=!0,d.state="loaded",k(null))}d.request=l.getImage(this.map._requestManager.transformRequest(C,l.ResourceType.Tile),function(q,Y){if(delete d.request,d.aborted)d.state="unloaded",k(null);else if(q)d.state="errored",k(q);else if(Y){this.map._refreshExpiredTiles&&d.setExpiryData(Y),delete Y.cacheControl,delete Y.expires;const oe=l.isImageBitmap(Y)&&(_t==null&&(_t=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")&&typeof createImageBitmap=="function"),_t)?Y:l.exported.getImageData(Y,1),le={uid:d.uid,coord:d.tileID,source:this.id,rawImageData:oe,encoding:this.encoding};d.actor&&d.state!=="expired"||(d.actor=this.dispatcher.getActor(),d.actor.send("loadDEMTile",le,D.bind(this)))}}.bind(this)),d.neighboringTiles=this._getNeighboringTiles(d.tileID)}_getNeighboringTiles(d){const k=d.canonical,C=Math.pow(2,k.z),D=(k.x-1+C)%C,q=k.x===0?d.wrap-1:d.wrap,Y=(k.x+1+C)%C,oe=k.x+1===C?d.wrap+1:d.wrap,le={};return le[new l.OverscaledTileID(d.overscaledZ,q,k.z,D,k.y).key]={backfilled:!1},le[new l.OverscaledTileID(d.overscaledZ,oe,k.z,Y,k.y).key]={backfilled:!1},k.y>0&&(le[new l.OverscaledTileID(d.overscaledZ,q,k.z,D,k.y-1).key]={backfilled:!1},le[new l.OverscaledTileID(d.overscaledZ,d.wrap,k.z,k.x,k.y-1).key]={backfilled:!1},le[new l.OverscaledTileID(d.overscaledZ,oe,k.z,Y,k.y-1).key]={backfilled:!1}),k.y+1<C&&(le[new l.OverscaledTileID(d.overscaledZ,q,k.z,D,k.y+1).key]={backfilled:!1},le[new l.OverscaledTileID(d.overscaledZ,d.wrap,k.z,k.x,k.y+1).key]={backfilled:!1},le[new l.OverscaledTileID(d.overscaledZ,oe,k.z,Y,k.y+1).key]={backfilled:!1}),le}unloadTile(d){d.demTexture&&this.map.painter.saveTileTexture(d.demTexture),d.fbo&&(d.fbo.destroy(),delete d.fbo),d.dem&&delete d.dem,delete d.neighboringTiles,d.state="unloaded",d.actor&&d.actor.send("removeDEMTile",{uid:d.uid,source:this.id})}}class $e extends l.Evented{constructor(d,k,C,D){super(),this.id=d,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._pendingLoads=0,this.actor=C.getActor(),this.setEventedParent(D),this._data=k.data,this._options=l.extend({},k),this._collectResourceTiming=k.collectResourceTiming,k.maxzoom!==void 0&&(this.maxzoom=k.maxzoom),k.type&&(this.type=k.type),k.attribution&&(this.attribution=k.attribution),this.promoteId=k.promoteId;const q=l.EXTENT/this.tileSize;this.workerOptions=l.extend({source:this.id,cluster:k.cluster||!1,geojsonVtOptions:{buffer:(k.buffer!==void 0?k.buffer:128)*q,tolerance:(k.tolerance!==void 0?k.tolerance:.375)*q,extent:l.EXTENT,maxZoom:this.maxzoom,lineMetrics:k.lineMetrics||!1,generateId:k.generateId||!1},superclusterOptions:{maxZoom:k.clusterMaxZoom!==void 0?k.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,k.clusterMinPoints||2),extent:l.EXTENT,radius:(k.clusterRadius||50)*q,log:!1,generateId:k.generateId||!1},clusterProperties:k.clusterProperties,filter:k.filter},k.workerOptions)}load(){this._updateWorkerData("metadata")}onAdd(d){this.map=d,this.load()}setData(d){return this._data=d,this._updateWorkerData("content"),this}getClusterExpansionZoom(d,k){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:d,source:this.id},k),this}getClusterChildren(d,k){return this.actor.send("geojson.getClusterChildren",{clusterId:d,source:this.id},k),this}getClusterLeaves(d,k,C,D){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:d,limit:k,offset:C},D),this}_updateWorkerData(d){const k=l.extend({},this.workerOptions),C=this._data;typeof C=="string"?(k.request=this.map._requestManager.transformRequest(l.exported.resolveURL(C),l.ResourceType.Source),k.request.collectResourceTiming=this._collectResourceTiming):k.data=JSON.stringify(C),this._pendingLoads++,this.fire(new l.Event("dataloading",{dataType:"source"})),this.actor.send(`${this.type}.loadData`,k,(D,q)=>{if(this._pendingLoads--,this._removed||q&&q.abandoned)return void this.fire(new l.Event("dataabort",{dataType:"source",sourceDataType:d}));let Y=null;if(q&&q.resourceTiming&&q.resourceTiming[this.id]&&(Y=q.resourceTiming[this.id].slice(0)),D)return void this.fire(new l.ErrorEvent(D));const oe={dataType:"source",sourceDataType:d};this._collectResourceTiming&&Y&&Y.length>0&&l.extend(oe,{resourceTiming:Y}),this.fire(new l.Event("data",oe))})}loaded(){return this._pendingLoads===0}loadTile(d,k){const C=d.actor?"reloadTile":"loadTile";d.actor=this.actor;const D={type:this.type,uid:d.uid,tileID:d.tileID,zoom:d.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};d.request=this.actor.send(C,D,(q,Y)=>(delete d.request,d.unloadVectorData(),d.aborted?k(null):q?k(q):(d.loadVectorData(Y,this.map.painter,C==="reloadTile"),k(null))))}abortTile(d){d.request&&(d.request.cancel(),delete d.request),d.aborted=!0}unloadTile(d){d.unloadVectorData(),this.actor.send("removeTile",{uid:d.uid,type:this.type,source:this.id})}onRemove(){this._removed=!0,this.actor.send("removeSource",{type:this.type,source:this.id})}serialize(){return l.extend({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}}var ut=l.createLayout([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class bt extends l.Evented{constructor(d,k,C,D){super(),this.id=d,this.dispatcher=C,this.coordinates=k.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(D),this.options=k}load(d,k){this._loaded=!1,this.fire(new l.Event("dataloading",{dataType:"source"})),this.url=this.options.url,l.getImage(this.map._requestManager.transformRequest(this.url,l.ResourceType.Image),(C,D)=>{this._loaded=!0,C?this.fire(new l.ErrorEvent(C)):D&&(this.image=D,d&&(this.coordinates=d),k&&k(),this._finishLoading())})}loaded(){return this._loaded}updateImage(d){return this.image&&d.url?(this.options.url=d.url,this.load(d.coordinates,()=>{this.texture=null}),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new l.Event("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(d){this.map=d,this.load()}setCoordinates(d){this.coordinates=d;const k=d.map(l.MercatorCoordinate.fromLngLat);this.tileID=function(D){let q=1/0,Y=1/0,oe=-1/0,le=-1/0;for(const Je of D)q=Math.min(q,Je.x),Y=Math.min(Y,Je.y),oe=Math.max(oe,Je.x),le=Math.max(le,Je.y);const de=Math.max(oe-q,le-Y),Se=Math.max(0,Math.floor(-Math.log(de)/Math.LN2)),je=Math.pow(2,Se);return new l.CanonicalTileID(Se,Math.floor((q+oe)/2*je),Math.floor((Y+le)/2*je))}(k),this.minzoom=this.maxzoom=this.tileID.z;const C=k.map(D=>this.tileID.getTilePoint(D)._round());return this._boundsArray=new l.RasterBoundsArray,this._boundsArray.emplaceBack(C[0].x,C[0].y,0,0),this._boundsArray.emplaceBack(C[1].x,C[1].y,l.EXTENT,0),this._boundsArray.emplaceBack(C[3].x,C[3].y,0,l.EXTENT),this._boundsArray.emplaceBack(C[2].x,C[2].y,l.EXTENT,l.EXTENT),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new l.Event("data",{dataType:"source",sourceDataType:"content"})),this}prepare(){if(Object.keys(this.tiles).length===0||!this.image)return;const d=this.map.painter.context,k=d.gl;this.boundsBuffer||(this.boundsBuffer=d.createVertexBuffer(this._boundsArray,ut.members)),this.boundsSegments||(this.boundsSegments=l.SegmentVector.simpleSegment(0,0,4,2)),this.texture||(this.texture=new U(d,this.image,k.RGBA),this.texture.bind(k.LINEAR,k.CLAMP_TO_EDGE));for(const C in this.tiles){const D=this.tiles[C];D.state!=="loaded"&&(D.state="loaded",D.texture=this.texture)}}loadTile(d,k){this.tileID&&this.tileID.equals(d.tileID.canonical)?(this.tiles[String(d.tileID.wrap)]=d,d.buckets={},k(null)):(d.state="errored",k(null))}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}}class Ze extends bt{constructor(d,k,C,D){super(d,k,C,D),this.roundZoom=!0,this.type="video",this.options=k}load(){this._loaded=!1;const d=this.options;this.urls=[];for(const k of d.urls)this.urls.push(this.map._requestManager.transformRequest(k,l.ResourceType.Source).url);l.getVideo(this.urls,(k,C)=>{this._loaded=!0,k?this.fire(new l.ErrorEvent(k)):C&&(this.video=C,this.video.loop=!0,this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading())})}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(d){if(this.video){const k=this.video.seekable;d<k.start(0)||d>k.end(0)?this.fire(new l.ErrorEvent(new l.ValidationError(`sources.${this.id}`,null,`Playback for this video can be set only between the ${k.start(0)} and ${k.end(0)}-second mark.`))):this.video.currentTime=d}}getVideo(){return this.video}onAdd(d){this.map||(this.map=d,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const d=this.map.painter.context,k=d.gl;this.boundsBuffer||(this.boundsBuffer=d.createVertexBuffer(this._boundsArray,ut.members)),this.boundsSegments||(this.boundsSegments=l.SegmentVector.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(k.LINEAR,k.CLAMP_TO_EDGE),k.texSubImage2D(k.TEXTURE_2D,0,0,0,k.RGBA,k.UNSIGNED_BYTE,this.video)):(this.texture=new U(d,this.video,k.RGBA),this.texture.bind(k.LINEAR,k.CLAMP_TO_EDGE));for(const C in this.tiles){const D=this.tiles[C];D.state!=="loaded"&&(D.state="loaded",D.texture=this.texture)}}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}}class He extends bt{constructor(d,k,C,D){super(d,k,C,D),k.coordinates?Array.isArray(k.coordinates)&&k.coordinates.length===4&&!k.coordinates.some(q=>!Array.isArray(q)||q.length!==2||q.some(Y=>typeof Y!="number"))||this.fire(new l.ErrorEvent(new l.ValidationError(`sources.${d}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new l.ErrorEvent(new l.ValidationError(`sources.${d}`,null,'missing required property "coordinates"'))),k.animate&&typeof k.animate!="boolean"&&this.fire(new l.ErrorEvent(new l.ValidationError(`sources.${d}`,null,'optional "animate" property must be a boolean value'))),k.canvas?typeof k.canvas=="string"||k.canvas instanceof HTMLCanvasElement||this.fire(new l.ErrorEvent(new l.ValidationError(`sources.${d}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new l.ErrorEvent(new l.ValidationError(`sources.${d}`,null,'missing required property "canvas"'))),this.options=k,this.animate=k.animate===void 0||k.animate}load(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new l.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())}getCanvas(){return this.canvas}onAdd(d){this.map=d,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let d=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,d=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,d=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const k=this.map.painter.context,C=k.gl;this.boundsBuffer||(this.boundsBuffer=k.createVertexBuffer(this._boundsArray,ut.members)),this.boundsSegments||(this.boundsSegments=l.SegmentVector.simpleSegment(0,0,4,2)),this.texture?(d||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new U(k,this.canvas,C.RGBA,{premultiply:!0});for(const D in this.tiles){const q=this.tiles[D];q.state!=="loaded"&&(q.state="loaded",q.texture=this.texture)}}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const d of[this.canvas.width,this.canvas.height])if(isNaN(d)||d<=0)return!0;return!1}}const xe={vector:Fe,raster:ot,"raster-dem":ht,geojson:$e,video:Ze,image:bt,canvas:He};function Ne(M,d){const k=l.create();return l.translate(k,k,[1,1,0]),l.scale(k,k,[.5*M.width,.5*M.height,1]),l.multiply(k,k,M.calculatePosMatrix(d.toUnwrapped()))}function Pe(M,d,k,C,D,q){const Y=function(je,Je,Et){if(je)for(const mt of je){const wt=Je[mt];if(wt&&wt.source===Et&&wt.type==="fill-extrusion")return!0}else for(const mt in Je){const wt=Je[mt];if(wt.source===Et&&wt.type==="fill-extrusion")return!0}return!1}(D&&D.layers,d,M.id),oe=q.maxPitchScaleFactor(),le=M.tilesIn(C,oe,Y);le.sort(ft);const de=[];for(const je of le)de.push({wrappedTileID:je.tileID.wrapped().key,queryResults:je.tile.queryRenderedFeatures(d,k,M._state,je.queryGeometry,je.cameraQueryGeometry,je.scale,D,q,oe,Ne(M.transform,je.tileID))});const Se=function(je){const Je={},Et={};for(const mt of je){const wt=mt.queryResults,tr=mt.wrappedTileID,cr=Et[tr]=Et[tr]||{};for(const Ar in wt){const Dt=wt[Ar],Tr=cr[Ar]=cr[Ar]||{},Ir=Je[Ar]=Je[Ar]||[];for(const Zr of Dt)Tr[Zr.featureIndex]||(Tr[Zr.featureIndex]=!0,Ir.push(Zr))}}return Je}(de);for(const je in Se)Se[je].forEach(Je=>{const Et=Je.feature,mt=M.getFeatureState(Et.layer["source-layer"],Et.id);Et.source=Et.layer.source,Et.layer["source-layer"]&&(Et.sourceLayer=Et.layer["source-layer"]),Et.state=mt});return Se}function ft(M,d){const k=M.tileID,C=d.tileID;return k.overscaledZ-C.overscaledZ||k.canonical.y-C.canonical.y||k.wrap-C.wrap||k.canonical.x-C.canonical.x}class At{constructor(d,k){this.tileID=d,this.uid=l.uniqueId(),this.uses=0,this.tileSize=k,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.textures=[],this.textureCoords={},this.expiredRequestCount=0,this.state="loading"}registerFadeDuration(d){const k=d+this.timeAdded;k<l.exported.now()||this.fadeEndTime&&k<this.fadeEndTime||(this.fadeEndTime=k)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}clearTextures(d){this.demTexture&&d.saveTileTexture(this.demTexture),this.textures.forEach(k=>d.saveTileTexture(k)),this.demTexture=null,this.textures=[],this.textureCoords={}}loadVectorData(d,k,C){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",d){d.featureIndex&&(this.latestFeatureIndex=d.featureIndex,d.rawTileData?(this.latestRawTileData=d.rawTileData,this.latestFeatureIndex.rawTileData=d.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=d.collisionBoxArray,this.buckets=function(D,q){const Y={};if(!q)return Y;for(const oe of D){const le=oe.layerIds.map(de=>q.getLayer(de)).filter(Boolean);if(le.length!==0){oe.layers=le,oe.stateDependentLayerIds&&(oe.stateDependentLayers=oe.stateDependentLayerIds.map(de=>le.filter(Se=>Se.id===de)[0]));for(const de of le)Y[de.id]=oe}}return Y}(d.buckets,k.style),this.hasSymbolBuckets=!1;for(const D in this.buckets){const q=this.buckets[D];if(q instanceof l.SymbolBucket){if(this.hasSymbolBuckets=!0,!C)break;q.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const D in this.buckets){const q=this.buckets[D];if(q instanceof l.SymbolBucket&&q.hasRTLText){this.hasRTLText=!0,l.lazyLoadRTLTextPlugin();break}}this.queryPadding=0;for(const D in this.buckets){const q=this.buckets[D];this.queryPadding=Math.max(this.queryPadding,k.style.getLayer(D).queryRadius(q))}d.imageAtlas&&(this.imageAtlas=d.imageAtlas),d.glyphAtlasImage&&(this.glyphAtlasImage=d.glyphAtlasImage)}else this.collisionBoxArray=new l.CollisionBoxArray}unloadVectorData(){for(const d in this.buckets)this.buckets[d].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(d){return this.buckets[d.id]}upload(d){for(const C in this.buckets){const D=this.buckets[C];D.uploadPending()&&D.upload(d)}const k=d.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new U(d,this.imageAtlas.image,k.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new U(d,this.glyphAtlasImage,k.ALPHA),this.glyphAtlasImage=null)}prepare(d){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(d,this.imageAtlasTexture)}queryRenderedFeatures(d,k,C,D,q,Y,oe,le,de,Se){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:D,cameraQueryGeometry:q,scale:Y,tileSize:this.tileSize,pixelPosMatrix:Se,transform:le,params:oe,queryPadding:this.queryPadding*de},d,k,C):{}}querySourceFeatures(d,k){const C=this.latestFeatureIndex;if(!C||!C.rawTileData)return;const D=C.loadVTLayers(),q=k?k.sourceLayer:"",Y=D._geojsonTileLayer||D[q];if(!Y)return;const oe=l.createFilter(k&&k.filter),{z:le,x:de,y:Se}=this.tileID.canonical,je={z:le,x:de,y:Se};for(let Je=0;Je<Y.length;Je++){const Et=Y.feature(Je);if(oe.needGeometry){const tr=l.toEvaluationFeature(Et,!0);if(!oe.filter(new l.EvaluationParameters(this.tileID.overscaledZ),tr,this.tileID.canonical))continue}else if(!oe.filter(new l.EvaluationParameters(this.tileID.overscaledZ),Et))continue;const mt=C.getId(Et,q),wt=new l.GeoJSONFeature(Et,le,de,Se,mt);wt.tile=je,d.push(wt)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(d){const k=this.expirationTime;if(d.cacheControl){const C=l.parseCacheControl(d.cacheControl);C["max-age"]&&(this.expirationTime=Date.now()+1e3*C["max-age"])}else d.expires&&(this.expirationTime=new Date(d.expires).getTime());if(this.expirationTime){const C=Date.now();let D=!1;if(this.expirationTime>C)D=!1;else if(k)if(this.expirationTime<k)D=!0;else{const q=this.expirationTime-k;q?this.expirationTime=C+Math.max(q,3e4):D=!0}else D=!0;D?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(d,k){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(d).length===0)return;const C=this.latestFeatureIndex.loadVTLayers();for(const D in this.buckets){if(!k.style.hasLayer(D))continue;const q=this.buckets[D],Y=q.layers[0].sourceLayer||"_geojsonTileLayer",oe=C[Y],le=d[Y];if(!oe||!le||Object.keys(le).length===0)continue;q.update(le,oe,this.imageAtlas&&this.imageAtlas.patternPositions||{});const de=k&&k.style&&k.style.getLayer(D);de&&(this.queryPadding=Math.max(this.queryPadding,de.queryRadius(q)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<l.exported.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(d){this.symbolFadeHoldUntil=l.exported.now()+d}setDependencies(d,k){const C={};for(const D of k)C[D]=!0;this.dependencies[d]=C}hasDependency(d,k){for(const C of d){const D=this.dependencies[C];if(D){for(const q of k)if(D[q])return!0}}return!1}}class Pt{constructor(d,k){this.max=d,this.onRemove=k,this.reset()}reset(){for(const d in this.data)for(const k of this.data[d])k.timeout&&clearTimeout(k.timeout),this.onRemove(k.value);return this.data={},this.order=[],this}add(d,k,C){const D=d.wrapped().key;this.data[D]===void 0&&(this.data[D]=[]);const q={value:k,timeout:void 0};if(C!==void 0&&(q.timeout=setTimeout(()=>{this.remove(d,q)},C)),this.data[D].push(q),this.order.push(D),this.order.length>this.max){const Y=this._getAndRemoveByKey(this.order[0]);Y&&this.onRemove(Y)}return this}has(d){return d.wrapped().key in this.data}getAndRemove(d){return this.has(d)?this._getAndRemoveByKey(d.wrapped().key):null}_getAndRemoveByKey(d){const k=this.data[d].shift();return k.timeout&&clearTimeout(k.timeout),this.data[d].length===0&&delete this.data[d],this.order.splice(this.order.indexOf(d),1),k.value}getByKey(d){const k=this.data[d];return k?k[0].value:null}get(d){return this.has(d)?this.data[d.wrapped().key][0].value:null}remove(d,k){if(!this.has(d))return this;const C=d.wrapped().key,D=k===void 0?0:this.data[C].indexOf(k),q=this.data[C][D];return this.data[C].splice(D,1),q.timeout&&clearTimeout(q.timeout),this.data[C].length===0&&delete this.data[C],this.onRemove(q.value),this.order.splice(this.order.indexOf(C),1),this}setMaxSize(d){for(this.max=d;this.order.length>this.max;){const k=this._getAndRemoveByKey(this.order[0]);k&&this.onRemove(k)}return this}filter(d){const k=[];for(const C in this.data)for(const D of this.data[C])d(D.value)||k.push(D);for(const C of k)this.remove(C.value.tileID,C)}}class Kt{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(d,k,C){const D=String(k);if(this.stateChanges[d]=this.stateChanges[d]||{},this.stateChanges[d][D]=this.stateChanges[d][D]||{},l.extend(this.stateChanges[d][D],C),this.deletedStates[d]===null){this.deletedStates[d]={};for(const q in this.state[d])q!==D&&(this.deletedStates[d][q]=null)}else if(this.deletedStates[d]&&this.deletedStates[d][D]===null){this.deletedStates[d][D]={};for(const q in this.state[d][D])C[q]||(this.deletedStates[d][D][q]=null)}else for(const q in C)this.deletedStates[d]&&this.deletedStates[d][D]&&this.deletedStates[d][D][q]===null&&delete this.deletedStates[d][D][q]}removeFeatureState(d,k,C){if(this.deletedStates[d]===null)return;const D=String(k);if(this.deletedStates[d]=this.deletedStates[d]||{},C&&k!==void 0)this.deletedStates[d][D]!==null&&(this.deletedStates[d][D]=this.deletedStates[d][D]||{},this.deletedStates[d][D][C]=null);else if(k!==void 0)if(this.stateChanges[d]&&this.stateChanges[d][D])for(C in this.deletedStates[d][D]={},this.stateChanges[d][D])this.deletedStates[d][D][C]=null;else this.deletedStates[d][D]=null;else this.deletedStates[d]=null}getState(d,k){const C=String(k),D=l.extend({},(this.state[d]||{})[C],(this.stateChanges[d]||{})[C]);if(this.deletedStates[d]===null)return{};if(this.deletedStates[d]){const q=this.deletedStates[d][k];if(q===null)return{};for(const Y in q)delete D[Y]}return D}initializeTileState(d,k){d.setFeatureState(this.state,k)}coalesceChanges(d,k){const C={};for(const D in this.stateChanges){this.state[D]=this.state[D]||{};const q={};for(const Y in this.stateChanges[D])this.state[D][Y]||(this.state[D][Y]={}),l.extend(this.state[D][Y],this.stateChanges[D][Y]),q[Y]=this.state[D][Y];C[D]=q}for(const D in this.deletedStates){this.state[D]=this.state[D]||{};const q={};if(this.deletedStates[D]===null)for(const Y in this.state[D])q[Y]={},this.state[D][Y]={};else for(const Y in this.deletedStates[D]){if(this.deletedStates[D][Y]===null)this.state[D][Y]={};else for(const oe of Object.keys(this.deletedStates[D][Y]))delete this.state[D][Y][oe];q[Y]=this.state[D][Y]}C[D]=C[D]||{},l.extend(C[D],q)}if(this.stateChanges={},this.deletedStates={},Object.keys(C).length!==0)for(const D in d)d[D].setFeatureState(C,k)}}class $t extends l.Evented{constructor(d,k,C){super(),this.id=d,this.dispatcher=C,this.on("data",D=>{D.dataType==="source"&&D.sourceDataType==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&D.dataType==="source"&&D.sourceDataType==="content"&&(this.reload(),this.transform&&this.update(this.transform,this.terrain))}),this.on("dataloading",()=>{this._sourceErrored=!1}),this.on("error",()=>{this._sourceErrored=this._source.loaded()}),this._source=function(D,q,Y,oe){const le=new xe[q.type](D,q,Y,oe);if(le.id!==D)throw new Error(`Expected Source id to be ${D} instead of ${le.id}`);return l.bindAll(["load","abort","unload","serialize","prepare"],le),le}(d,k,C,this),this._tiles={},this._cache=new Pt(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new Kt}onAdd(d){this.map=d,this._maxTileCacheSize=d?d._maxTileCacheSize:null,this._source&&this._source.onAdd&&this._source.onAdd(d)}onRemove(d){this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(d)}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;for(const d in this._tiles){const k=this._tiles[d];if(k.state!=="loaded"&&k.state!=="errored")return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const d=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,d&&this.reload(),this.transform&&this.update(this.transform,this.terrain)}_loadTile(d,k){return this._source.loadTile(d,k)}_unloadTile(d){if(this._source.unloadTile)return this._source.unloadTile(d,()=>{})}_abortTile(d){this._source.abortTile&&this._source.abortTile(d,()=>{}),this._source.fire(new l.Event("dataabort",{tile:d,coord:d.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(d){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const k in this._tiles){const C=this._tiles[k];C.upload(d),C.prepare(this.map.style.imageManager)}}getIds(){return Object.values(this._tiles).map(d=>d.tileID).sort(br).map(d=>d.key)}getRenderableIds(d){const k=[];for(const C in this._tiles)this._isIdRenderable(C,d)&&k.push(this._tiles[C]);return d?k.sort((C,D)=>{const q=C.tileID,Y=D.tileID,oe=new l.pointGeometry(q.canonical.x,q.canonical.y)._rotate(this.transform.angle),le=new l.pointGeometry(Y.canonical.x,Y.canonical.y)._rotate(this.transform.angle);return q.overscaledZ-Y.overscaledZ||le.y-oe.y||le.x-oe.x}).map(C=>C.tileID.key):k.map(C=>C.tileID).sort(br).map(C=>C.key)}hasRenderableParent(d){const k=this.findLoadedParent(d,0);return!!k&&this._isIdRenderable(k.tileID.key)}_isIdRenderable(d,k){return this._tiles[d]&&this._tiles[d].hasData()&&!this._coveredTiles[d]&&(k||!this._tiles[d].holdingForFade())}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const d in this._tiles)this._tiles[d].state!=="errored"&&this._reloadTile(d,"reloading")}}_reloadTile(d,k){const C=this._tiles[d];C&&(C.state!=="loading"&&(C.state=k),this._loadTile(C,this._tileLoaded.bind(this,C,d,k)))}_tileLoaded(d,k,C,D){if(D)return d.state="errored",void(D.status!==404?this._source.fire(new l.ErrorEvent(D,{tile:d})):this.update(this.transform,this.terrain));d.timeAdded=l.exported.now(),C==="expired"&&(d.refreshedUponExpiration=!0),this._setTileReloadTimer(k,d),this.getSource().type==="raster-dem"&&d.dem&&this._backfillDEM(d),this._state.initializeTileState(d,this.map?this.map.painter:null),d.aborted||this._source.fire(new l.Event("data",{dataType:"source",tile:d,coord:d.tileID}))}_backfillDEM(d){const k=this.getRenderableIds();for(let D=0;D<k.length;D++){const q=k[D];if(d.neighboringTiles&&d.neighboringTiles[q]){const Y=this.getTileByID(q);C(d,Y),C(Y,d)}}function C(D,q){D.needsHillshadePrepare=!0,D.needsTerrainPrepare=!0;let Y=q.tileID.canonical.x-D.tileID.canonical.x;const oe=q.tileID.canonical.y-D.tileID.canonical.y,le=Math.pow(2,D.tileID.canonical.z),de=q.tileID.key;Y===0&&oe===0||Math.abs(oe)>1||(Math.abs(Y)>1&&(Math.abs(Y+le)===1?Y+=le:Math.abs(Y-le)===1&&(Y-=le)),q.dem&&D.dem&&(D.dem.backfillBorder(q.dem,Y,oe),D.neighboringTiles&&D.neighboringTiles[de]&&(D.neighboringTiles[de].backfilled=!0)))}}getTile(d){return this.getTileByID(d.key)}getTileByID(d){return this._tiles[d]}_retainLoadedChildren(d,k,C,D){for(const q in this._tiles){let Y=this._tiles[q];if(D[q]||!Y.hasData()||Y.tileID.overscaledZ<=k||Y.tileID.overscaledZ>C)continue;let oe=Y.tileID;for(;Y&&Y.tileID.overscaledZ>k+1;){const de=Y.tileID.scaledTo(Y.tileID.overscaledZ-1);Y=this._tiles[de.key],Y&&Y.hasData()&&(oe=de)}let le=oe;for(;le.overscaledZ>k;)if(le=le.scaledTo(le.overscaledZ-1),d[le.key]){D[oe.key]=oe;break}}}findLoadedParent(d,k){if(d.key in this._loadedParentTiles){const C=this._loadedParentTiles[d.key];return C&&C.tileID.overscaledZ>=k?C:null}for(let C=d.overscaledZ-1;C>=k;C--){const D=d.scaledTo(C),q=this._getLoadedTile(D);if(q)return q}}_getLoadedTile(d){const k=this._tiles[d.key];return k&&k.hasData()?k:this._cache.getByKey(d.wrapped().key)}updateCacheSize(d){const k=Math.ceil(d.width/this._source.tileSize)+1,C=Math.ceil(d.height/this._source.tileSize)+1,D=Math.floor(k*C*5),q=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,D):D;this._cache.setMaxSize(q)}handleWrapJump(d){const k=Math.round((d-(this._prevLng===void 0?d:this._prevLng))/360);if(this._prevLng=d,k){const C={};for(const D in this._tiles){const q=this._tiles[D];q.tileID=q.tileID.unwrapTo(q.tileID.wrap+k),C[q.tileID.key]=q}this._tiles=C;for(const D in this._timers)clearTimeout(this._timers[D]),delete this._timers[D];for(const D in this._tiles)this._setTileReloadTimer(D,this._tiles[D])}}update(d,k){if(this.transform=d,this.terrain=k,!this._sourceLoaded||this._paused)return;let C;this.updateCacheSize(d),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?C=d.getVisibleUnwrappedCoordinates(this._source.tileID).map(de=>new l.OverscaledTileID(de.canonical.z,de.wrap,de.canonical.z,de.canonical.x,de.canonical.y)):(C=d.coveringTiles({tileSize:this.usedForTerrain?this.tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:!this.usedForTerrain&&this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled,terrain:k}),this._source.hasTile&&(C=C.filter(de=>this._source.hasTile(de)))):C=[];const D=d.coveringZoomLevel(this._source),q=Math.max(D-$t.maxOverzooming,this._source.minzoom),Y=Math.max(D+$t.maxUnderzooming,this._source.minzoom);if(this.usedForTerrain){const de={};for(const Se of C)if(Se.canonical.z>this._source.minzoom){const je=Se.scaledTo(Se.canonical.z-1);de[je.key]=je;const Je=Se.scaledTo(Math.max(this._source.minzoom,Math.min(Se.canonical.z,5)));de[Je.key]=Je}C=C.concat(Object.values(de))}const oe=this._updateRetainedTiles(C,D);if(Gt(this._source.type)){const de={},Se={},je=Object.keys(oe);for(const Je of je){const Et=oe[Je],mt=this._tiles[Je];if(!mt||mt.fadeEndTime&&mt.fadeEndTime<=l.exported.now())continue;const wt=this.findLoadedParent(Et,q);wt&&(this._addTile(wt.tileID),de[wt.tileID.key]=wt.tileID),Se[Je]=Et}this._retainLoadedChildren(Se,D,Y,oe);for(const Je in de)oe[Je]||(this._coveredTiles[Je]=!0,oe[Je]=de[Je]);if(k){const Je={},Et={};for(const mt of C)this._tiles[mt.key].hasData()?Je[mt.key]=mt:Et[mt.key]=mt;for(const mt in Et){const wt=Et[mt].children(this._source.maxzoom);this._tiles[wt[0].key]&&this._tiles[wt[1].key]&&this._tiles[wt[2].key]&&this._tiles[wt[3].key]&&(Je[wt[0].key]=oe[wt[0].key]=wt[0],Je[wt[1].key]=oe[wt[1].key]=wt[1],Je[wt[2].key]=oe[wt[2].key]=wt[2],Je[wt[3].key]=oe[wt[3].key]=wt[3],delete Et[mt])}for(const mt in Et){const wt=this.findLoadedParent(Et[mt],this._source.minzoom);if(wt){Je[wt.tileID.key]=oe[wt.tileID.key]=wt.tileID;for(const tr in Je)Je[tr].isChildOf(wt.tileID)&&delete Je[tr]}}for(const mt in this._tiles)Je[mt]||(this._coveredTiles[mt]=!0)}}for(const de in oe)this._tiles[de].clearFadeHold();const le=l.keysDifference(this._tiles,oe);for(const de of le){const Se=this._tiles[de];Se.hasSymbolBuckets&&!Se.holdingForFade()?Se.setHoldDuration(this.map._fadeDuration):Se.hasSymbolBuckets&&!Se.symbolFadeFinished()||this._removeTile(de)}this._updateLoadedParentTileCache()}releaseSymbolFadeTiles(){for(const d in this._tiles)this._tiles[d].holdingForFade()&&this._removeTile(d)}_updateRetainedTiles(d,k){const C={},D={},q=Math.max(k-$t.maxOverzooming,this._source.minzoom),Y=Math.max(k+$t.maxUnderzooming,this._source.minzoom),oe={};for(const le of d){const de=this._addTile(le);C[le.key]=le,de.hasData()||k<this._source.maxzoom&&(oe[le.key]=le)}this._retainLoadedChildren(oe,k,Y,C);for(const le of d){let de=this._tiles[le.key];if(de.hasData())continue;if(k+1>this._source.maxzoom){const je=le.children(this._source.maxzoom)[0],Je=this.getTile(je);if(Je&&Je.hasData()){C[je.key]=je;continue}}else{const je=le.children(this._source.maxzoom);if(C[je[0].key]&&C[je[1].key]&&C[je[2].key]&&C[je[3].key])continue}let Se=de.wasRequested();for(let je=le.overscaledZ-1;je>=q;--je){const Je=le.scaledTo(je);if(D[Je.key]||(D[Je.key]=!0,de=this.getTile(Je),!de&&Se&&(de=this._addTile(Je)),de&&(C[Je.key]=Je,Se=de.wasRequested(),de.hasData())))break}}return C}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const d in this._tiles){const k=[];let C,D=this._tiles[d].tileID;for(;D.overscaledZ>0;){if(D.key in this._loadedParentTiles){C=this._loadedParentTiles[D.key];break}k.push(D.key);const q=D.scaledTo(D.overscaledZ-1);if(C=this._getLoadedTile(q),C)break;D=q}for(const q of k)this._loadedParentTiles[q]=C}}_addTile(d){let k=this._tiles[d.key];if(k)return k;k=this._cache.getAndRemove(d),k&&(this._setTileReloadTimer(d.key,k),k.tileID=d,this._state.initializeTileState(k,this.map?this.map.painter:null),this._cacheTimers[d.key]&&(clearTimeout(this._cacheTimers[d.key]),delete this._cacheTimers[d.key],this._setTileReloadTimer(d.key,k)));const C=k;return k||(k=new At(d,this._source.tileSize*d.overscaleFactor()),this._loadTile(k,this._tileLoaded.bind(this,k,d.key,k.state))),k.uses++,this._tiles[d.key]=k,C||this._source.fire(new l.Event("dataloading",{tile:k,coord:k.tileID,dataType:"source"})),k}_setTileReloadTimer(d,k){d in this._timers&&(clearTimeout(this._timers[d]),delete this._timers[d]);const C=k.getExpiryTimeout();C&&(this._timers[d]=setTimeout(()=>{this._reloadTile(d,"expired"),delete this._timers[d]},C))}_removeTile(d){const k=this._tiles[d];k&&(k.uses--,delete this._tiles[d],this._timers[d]&&(clearTimeout(this._timers[d]),delete this._timers[d]),k.uses>0||(k.hasData()&&k.state!=="reloading"?this._cache.add(k.tileID,k,k.getExpiryTimeout()):(k.aborted=!0,this._abortTile(k),this._unloadTile(k))))}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const d in this._tiles)this._removeTile(d);this._cache.reset()}tilesIn(d,k,C){const D=[],q=this.transform;if(!q)return D;const Y=C?q.getCameraQueryGeometry(d):d,oe=d.map(mt=>q.pointCoordinate(mt,this.terrain)),le=Y.map(mt=>q.pointCoordinate(mt,this.terrain)),de=this.getIds();let Se=1/0,je=1/0,Je=-1/0,Et=-1/0;for(const mt of le)Se=Math.min(Se,mt.x),je=Math.min(je,mt.y),Je=Math.max(Je,mt.x),Et=Math.max(Et,mt.y);for(let mt=0;mt<de.length;mt++){const wt=this._tiles[de[mt]];if(wt.holdingForFade())continue;const tr=wt.tileID,cr=Math.pow(2,q.zoom-wt.tileID.overscaledZ),Ar=k*wt.queryPadding*l.EXTENT/wt.tileSize/cr,Dt=[tr.getTilePoint(new l.MercatorCoordinate(Se,je)),tr.getTilePoint(new l.MercatorCoordinate(Je,Et))];if(Dt[0].x-Ar<l.EXTENT&&Dt[0].y-Ar<l.EXTENT&&Dt[1].x+Ar>=0&&Dt[1].y+Ar>=0){const Tr=oe.map(Zr=>tr.getTilePoint(Zr)),Ir=le.map(Zr=>tr.getTilePoint(Zr));D.push({tile:wt,tileID:tr,queryGeometry:Tr,cameraQueryGeometry:Ir,scale:cr})}}return D}getVisibleCoordinates(d){const k=this.getRenderableIds(d).map(C=>this._tiles[C].tileID);for(const C of k)C.posMatrix=this.transform.calculatePosMatrix(C.toUnwrapped());return k}hasTransition(){if(this._source.hasTransition())return!0;if(Gt(this._source.type))for(const d in this._tiles){const k=this._tiles[d];if(k.fadeEndTime!==void 0&&k.fadeEndTime>=l.exported.now())return!0}return!1}setFeatureState(d,k,C){this._state.updateState(d=d||"_geojsonTileLayer",k,C)}removeFeatureState(d,k,C){this._state.removeFeatureState(d=d||"_geojsonTileLayer",k,C)}getFeatureState(d,k){return this._state.getState(d=d||"_geojsonTileLayer",k)}setDependencies(d,k,C){const D=this._tiles[d];D&&D.setDependencies(k,C)}reloadTilesForDependencies(d,k){for(const C in this._tiles)this._tiles[C].hasDependency(d,k)&&this._reloadTile(C,"reloading");this._cache.filter(C=>!C.hasDependency(d,k))}}function br(M,d){const k=Math.abs(2*M.wrap)-+(M.wrap<0),C=Math.abs(2*d.wrap)-+(d.wrap<0);return M.overscaledZ-d.overscaledZ||C-k||d.canonical.y-M.canonical.y||d.canonical.x-M.canonical.x}function Gt(M){return M==="raster"||M==="image"||M==="video"}$t.maxOverzooming=10,$t.maxUnderzooming=3;const Rr="mapboxgl_preloaded_worker_pool";class Mr{constructor(){this.active={}}acquire(d){if(!this.workers)for(this.workers=[];this.workers.length<Mr.workerCount;)this.workers.push(new Worker(as.workerUrl));return this.active[d]=!0,this.workers.slice()}release(d){delete this.active[d],this.numActive()===0&&(this.workers.forEach(k=>{k.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[Rr]}numActive(){return Object.keys(this.active).length}}const Kr=Math.floor(l.exported.hardwareConcurrency/2);let St;function ct(){return St||(St=new Mr),St}function Or(M,d){const k={};for(const C in M)C!=="ref"&&(k[C]=M[C]);return l.refProperties.forEach(C=>{C in d&&(k[C]=d[C])}),k}function ln(M){M=M.slice();const d=Object.create(null);for(let k=0;k<M.length;k++)d[M[k].id]=M[k];for(let k=0;k<M.length;k++)"ref"in M[k]&&(M[k]=Or(M[k],d[M[k].ref]));return M}Mr.workerCount=Math.max(Math.min(Kr,6),1);const Wt={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};function Ur(M,d,k){k.push({command:Wt.addSource,args:[M,d[M]]})}function mn(M,d,k){d.push({command:Wt.removeSource,args:[M]}),k[M]=!0}function en(M,d,k,C){mn(M,k,C),Ur(M,d,k)}function On(M,d,k){let C;for(C in M[k])if(Object.prototype.hasOwnProperty.call(M[k],C)&&C!=="data"&&!E(M[k][C],d[k][C]))return!1;for(C in d[k])if(Object.prototype.hasOwnProperty.call(d[k],C)&&C!=="data"&&!E(M[k][C],d[k][C]))return!1;return!0}function Zn(M,d,k,C,D,q){let Y;for(Y in d=d||{},M=M||{})Object.prototype.hasOwnProperty.call(M,Y)&&(E(M[Y],d[Y])||k.push({command:q,args:[C,Y,d[Y],D]}));for(Y in d)Object.prototype.hasOwnProperty.call(d,Y)&&!Object.prototype.hasOwnProperty.call(M,Y)&&(E(M[Y],d[Y])||k.push({command:q,args:[C,Y,d[Y],D]}))}function ai(M){return M.id}function _i(M,d){return M[d.id]=d,M}class hi{constructor(d,k){this.reset(d,k)}reset(d,k){this.points=d||[],this._distances=[0];for(let C=1;C<this.points.length;C++)this._distances[C]=this._distances[C-1]+this.points[C].dist(this.points[C-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(k||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(d){if(this.points.length===1)return this.points[0];d=l.clamp(d,0,1);let k=1,C=this._distances[k];const D=d*this.paddedLength+this.padding;for(;C<D&&k<this._distances.length;)C=this._distances[++k];const q=k-1,Y=this._distances[q],oe=C-Y,le=oe>0?(D-Y)/oe:0;return this.points[q].mult(1-le).add(this.points[k].mult(le))}}function yr(M,d){let k=!0;return M==="always"||M!=="never"&&d!=="never"||(k=!1),k}class Vr{constructor(d,k,C){const D=this.boxCells=[],q=this.circleCells=[];this.xCellCount=Math.ceil(d/C),this.yCellCount=Math.ceil(k/C);for(let Y=0;Y<this.xCellCount*this.yCellCount;Y++)D.push([]),q.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=d,this.height=k,this.xScale=this.xCellCount/d,this.yScale=this.yCellCount/k,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(d,k,C,D,q){this._forEachCell(k,C,D,q,this._insertBoxCell,this.boxUid++),this.boxKeys.push(d),this.bboxes.push(k),this.bboxes.push(C),this.bboxes.push(D),this.bboxes.push(q)}insertCircle(d,k,C,D){this._forEachCell(k-D,C-D,k+D,C+D,this._insertCircleCell,this.circleUid++),this.circleKeys.push(d),this.circles.push(k),this.circles.push(C),this.circles.push(D)}_insertBoxCell(d,k,C,D,q,Y){this.boxCells[q].push(Y)}_insertCircleCell(d,k,C,D,q,Y){this.circleCells[q].push(Y)}_query(d,k,C,D,q,Y,oe){if(C<0||d>this.width||D<0||k>this.height)return[];const le=[];if(d<=0&&k<=0&&this.width<=C&&this.height<=D){if(q)return[{key:null,x1:d,y1:k,x2:C,y2:D}];for(let de=0;de<this.boxKeys.length;de++)le.push({key:this.boxKeys[de],x1:this.bboxes[4*de],y1:this.bboxes[4*de+1],x2:this.bboxes[4*de+2],y2:this.bboxes[4*de+3]});for(let de=0;de<this.circleKeys.length;de++){const Se=this.circles[3*de],je=this.circles[3*de+1],Je=this.circles[3*de+2];le.push({key:this.circleKeys[de],x1:Se-Je,y1:je-Je,x2:Se+Je,y2:je+Je})}}else this._forEachCell(d,k,C,D,this._queryCell,le,{hitTest:q,overlapMode:Y,seenUids:{box:{},circle:{}}},oe);return le}query(d,k,C,D){return this._query(d,k,C,D,!1,null)}hitTest(d,k,C,D,q,Y){return this._query(d,k,C,D,!0,q,Y).length>0}hitTestCircle(d,k,C,D,q){const Y=d-C,oe=d+C,le=k-C,de=k+C;if(oe<0||Y>this.width||de<0||le>this.height)return!1;const Se=[];return this._forEachCell(Y,le,oe,de,this._queryCellCircle,Se,{hitTest:!0,overlapMode:D,circle:{x:d,y:k,radius:C},seenUids:{box:{},circle:{}}},q),Se.length>0}_queryCell(d,k,C,D,q,Y,oe,le){const{seenUids:de,hitTest:Se,overlapMode:je}=oe,Je=this.boxCells[q];if(Je!==null){const mt=this.bboxes;for(const wt of Je)if(!de.box[wt]){de.box[wt]=!0;const tr=4*wt,cr=this.boxKeys[wt];if(d<=mt[tr+2]&&k<=mt[tr+3]&&C>=mt[tr+0]&&D>=mt[tr+1]&&(!le||le(cr))&&(!Se||!yr(je,cr.overlapMode))&&(Y.push({key:cr,x1:mt[tr],y1:mt[tr+1],x2:mt[tr+2],y2:mt[tr+3]}),Se))return!0}}const Et=this.circleCells[q];if(Et!==null){const mt=this.circles;for(const wt of Et)if(!de.circle[wt]){de.circle[wt]=!0;const tr=3*wt,cr=this.circleKeys[wt];if(this._circleAndRectCollide(mt[tr],mt[tr+1],mt[tr+2],d,k,C,D)&&(!le||le(cr))&&(!Se||!yr(je,cr.overlapMode))){const Ar=mt[tr],Dt=mt[tr+1],Tr=mt[tr+2];if(Y.push({key:cr,x1:Ar-Tr,y1:Dt-Tr,x2:Ar+Tr,y2:Dt+Tr}),Se)return!0}}}return!1}_queryCellCircle(d,k,C,D,q,Y,oe,le){const{circle:de,seenUids:Se,overlapMode:je}=oe,Je=this.boxCells[q];if(Je!==null){const mt=this.bboxes;for(const wt of Je)if(!Se.box[wt]){Se.box[wt]=!0;const tr=4*wt,cr=this.boxKeys[wt];if(this._circleAndRectCollide(de.x,de.y,de.radius,mt[tr+0],mt[tr+1],mt[tr+2],mt[tr+3])&&(!le||le(cr))&&!yr(je,cr.overlapMode))return Y.push(!0),!0}}const Et=this.circleCells[q];if(Et!==null){const mt=this.circles;for(const wt of Et)if(!Se.circle[wt]){Se.circle[wt]=!0;const tr=3*wt,cr=this.circleKeys[wt];if(this._circlesCollide(mt[tr],mt[tr+1],mt[tr+2],de.x,de.y,de.radius)&&(!le||le(cr))&&!yr(je,cr.overlapMode))return Y.push(!0),!0}}}_forEachCell(d,k,C,D,q,Y,oe,le){const de=this._convertToXCellCoord(d),Se=this._convertToYCellCoord(k),je=this._convertToXCellCoord(C),Je=this._convertToYCellCoord(D);for(let Et=de;Et<=je;Et++)for(let mt=Se;mt<=Je;mt++)if(q.call(this,d,k,C,D,this.xCellCount*mt+Et,Y,oe,le))return}_convertToXCellCoord(d){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(d*this.xScale)))}_convertToYCellCoord(d){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(d*this.yScale)))}_circlesCollide(d,k,C,D,q,Y){const oe=D-d,le=q-k,de=C+Y;return de*de>oe*oe+le*le}_circleAndRectCollide(d,k,C,D,q,Y,oe){const le=(Y-D)/2,de=Math.abs(d-(D+le));if(de>le+C)return!1;const Se=(oe-q)/2,je=Math.abs(k-(q+Se));if(je>Se+C)return!1;if(de<=le||je<=Se)return!0;const Je=de-le,Et=je-Se;return Je*Je+Et*Et<=C*C}}function wi(M,d,k,C,D){const q=l.create();return d?(l.scale(q,q,[1/D,1/D,1]),k||l.rotateZ(q,q,C.angle)):l.multiply(q,C.labelPlaneMatrix,M),q}function xn(M,d,k,C,D){if(d){const q=l.clone(M);return l.scale(q,q,[D,D,1]),k||l.rotateZ(q,q,-C.angle),q}return C.glCoordMatrix}function si(M,d,k){let C;k?(C=[M.x,M.y,k(M.x,M.y),1],l.transformMat4(C,C,d)):(C=[M.x,M.y,0,1],co(C,C,d));const D=C[3];return{point:new l.pointGeometry(C[0]/D,C[1]/D),signedDistanceFromCamera:D}}function fr(M,d){return .5+M/d*.5}function or(M,d){const k=M[0]/M[3],C=M[1]/M[3];return k>=-d[0]&&k<=d[0]&&C>=-d[1]&&C<=d[1]}function Yr(M,d,k,C,D,q,Y,oe,le,de){const Se=C?M.textSizeData:M.iconSizeData,je=l.evaluateSizeForZoom(Se,k.transform.zoom),Je=[256/k.width*2+1,256/k.height*2+1],Et=C?M.text.dynamicLayoutVertexArray:M.icon.dynamicLayoutVertexArray;Et.clear();const mt=M.lineVertexArray,wt=C?M.text.placedSymbolArray:M.icon.placedSymbolArray,tr=k.transform.width/k.transform.height;let cr=!1;for(let Ar=0;Ar<wt.length;Ar++){const Dt=wt.get(Ar);if(Dt.hidden||Dt.writingMode===l.WritingMode.vertical&&!cr){gi(Dt.numGlyphs,Et);continue}let Tr;if(cr=!1,de?(Tr=[Dt.anchorX,Dt.anchorY,de(Dt.anchorX,Dt.anchorY),1],l.transformMat4(Tr,Tr,d)):(Tr=[Dt.anchorX,Dt.anchorY,0,1],co(Tr,Tr,d)),!or(Tr,Je)){gi(Dt.numGlyphs,Et);continue}const Ir=fr(k.transform.cameraToCenterDistance,Tr[3]),Zr=l.evaluateSizeForFeature(Se,je,Dt),Gr=Y?Zr/Ir:Zr*Ir,dn=new l.pointGeometry(Dt.anchorX,Dt.anchorY),qr=si(dn,D,de).point,Mn={},En=pn(Dt,Gr,!1,oe,d,D,q,M.glyphOffsetArray,mt,Et,qr,dn,Mn,tr,le,de);cr=En.useVertical,(En.notEnoughRoom||cr||En.needsFlipping&&pn(Dt,Gr,!0,oe,d,D,q,M.glyphOffsetArray,mt,Et,qr,dn,Mn,tr,le,de).notEnoughRoom)&&gi(Dt.numGlyphs,Et)}C?M.text.dynamicLayoutVertexBuffer.updateData(Et):M.icon.dynamicLayoutVertexBuffer.updateData(Et)}function un(M,d,k,C,D,q,Y,oe,le,de,Se,je,Je){const Et=oe.glyphStartIndex+oe.numGlyphs,mt=oe.lineStartIndex,wt=oe.lineStartIndex+oe.lineLength,tr=d.getoffsetX(oe.glyphStartIndex),cr=d.getoffsetX(Et-1),Ar=ci(M*tr,k,C,D,q,Y,oe.segment,mt,wt,le,de,Se,je,Je);if(!Ar)return null;const Dt=ci(M*cr,k,C,D,q,Y,oe.segment,mt,wt,le,de,Se,je,Je);return Dt?{first:Ar,last:Dt}:null}function Nr(M,d,k,C){return M===l.WritingMode.horizontal&&Math.abs(k.y-d.y)>Math.abs(k.x-d.x)*C?{useVertical:!0}:(M===l.WritingMode.vertical?d.y<k.y:d.x>k.x)?{needsFlipping:!0}:null}function pn(M,d,k,C,D,q,Y,oe,le,de,Se,je,Je,Et,mt,wt){const tr=d/24,cr=M.lineOffsetX*tr,Ar=M.lineOffsetY*tr;let Dt;if(M.numGlyphs>1){const Tr=M.glyphStartIndex+M.numGlyphs,Ir=M.lineStartIndex,Zr=M.lineStartIndex+M.lineLength,Gr=un(tr,oe,cr,Ar,k,Se,je,M,le,q,Je,mt,wt);if(!Gr)return{notEnoughRoom:!0};const dn=si(Gr.first.point,Y,wt).point,qr=si(Gr.last.point,Y,wt).point;if(C&&!k){const Mn=Nr(M.writingMode,dn,qr,Et);if(Mn)return Mn}Dt=[Gr.first];for(let Mn=M.glyphStartIndex+1;Mn<Tr-1;Mn++)Dt.push(ci(tr*oe.getoffsetX(Mn),cr,Ar,k,Se,je,M.segment,Ir,Zr,le,q,Je,mt,wt));Dt.push(Gr.last)}else{if(C&&!k){const Ir=si(je,D,wt).point,Zr=M.lineStartIndex+M.segment+1,Gr=new l.pointGeometry(le.getx(Zr),le.gety(Zr)),dn=si(Gr,D,wt),qr=dn.signedDistanceFromCamera>0?dn.point:Yn(je,Gr,Ir,1,D,wt),Mn=Nr(M.writingMode,Ir,qr,Et);if(Mn)return Mn}const Tr=ci(tr*oe.getoffsetX(M.glyphStartIndex),cr,Ar,k,Se,je,M.segment,M.lineStartIndex,M.lineStartIndex+M.lineLength,le,q,Je,mt,wt);if(!Tr)return{notEnoughRoom:!0};Dt=[Tr]}for(const Tr of Dt)l.addDynamicAttributes(de,Tr.point,Tr.angle);return{}}function Yn(M,d,k,C,D,q){const Y=si(M.add(M.sub(d)._unit()),D,q).point,oe=k.sub(Y);return k.add(oe._mult(C/oe.mag()))}function ci(M,d,k,C,D,q,Y,oe,le,de,Se,je,Je,Et){const mt=C?M-d:M+d;let wt=mt>0?1:-1,tr=0;C&&(wt*=-1,tr=Math.PI),wt<0&&(tr+=Math.PI);let cr=wt>0?oe+Y:oe+Y+1,Ar=D,Dt=D,Tr=0,Ir=0;const Zr=Math.abs(mt),Gr=[];for(;Tr+Ir<=Zr;){if(cr+=wt,cr<oe||cr>=le)return null;if(Dt=Ar,Gr.push(Ar),Ar=je[cr],Ar===void 0){const Un=new l.pointGeometry(de.getx(cr),de.gety(cr)),Li=si(Un,Se,Et);if(Li.signedDistanceFromCamera>0)Ar=je[cr]=Li.point;else{const Di=cr-wt;Ar=Yn(Tr===0?q:new l.pointGeometry(de.getx(Di),de.gety(Di)),Un,Dt,Zr-Tr+1,Se,Et)}}Tr+=Ir,Ir=Dt.dist(Ar)}const dn=(Zr-Tr)/Ir,qr=Ar.sub(Dt),Mn=qr.mult(dn)._add(Dt);Mn._add(qr._unit()._perp()._mult(k*wt));const En=tr+Math.atan2(Ar.y-Dt.y,Ar.x-Dt.x);return Gr.push(Mn),{point:Mn,angle:Je?En:0,path:Gr}}const No=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function gi(M,d){for(let k=0;k<M;k++){const C=d.length;d.resize(C+4),d.float32.set(No,3*C)}}function co(M,d,k){const C=d[0],D=d[1];return M[0]=k[0]*C+k[4]*D+k[12],M[1]=k[1]*C+k[5]*D+k[13],M[3]=k[3]*C+k[7]*D+k[15],M}const li=100;class to{constructor(d,k=new Vr(d.width+200,d.height+200,25),C=new Vr(d.width+200,d.height+200,25)){this.transform=d,this.grid=k,this.ignoredGrid=C,this.pitchfactor=Math.cos(d._pitch)*d.cameraToCenterDistance,this.screenRightBoundary=d.width+li,this.screenBottomBoundary=d.height+li,this.gridRightBoundary=d.width+200,this.gridBottomBoundary=d.height+200,this.perspectiveRatioCutoff=.6}placeCollisionBox(d,k,C,D,q,Y){const oe=this.projectAndGetPerspectiveRatio(D,d.anchorPointX,d.anchorPointY,Y),le=C*oe.perspectiveRatio,de=d.x1*le+oe.point.x,Se=d.y1*le+oe.point.y,je=d.x2*le+oe.point.x,Je=d.y2*le+oe.point.y;return!this.isInsideGrid(de,Se,je,Je)||k!=="always"&&this.grid.hitTest(de,Se,je,Je,k,q)||oe.perspectiveRatio<this.perspectiveRatioCutoff?{box:[],offscreen:!1}:{box:[de,Se,je,Je],offscreen:this.isOffscreen(de,Se,je,Je)}}placeCollisionCircles(d,k,C,D,q,Y,oe,le,de,Se,je,Je,Et,mt){const wt=[],tr=new l.pointGeometry(k.anchorX,k.anchorY),cr=si(tr,Y,mt),Ar=fr(this.transform.cameraToCenterDistance,cr.signedDistanceFromCamera),Dt=(Se?q/Ar:q*Ar)/l.ONE_EM,Tr=si(tr,oe,mt).point,Ir=un(Dt,D,k.lineOffsetX*Dt,k.lineOffsetY*Dt,!1,Tr,tr,k,C,oe,{},!1,mt);let Zr=!1,Gr=!1,dn=!0;if(Ir){const qr=.5*Je*Ar+Et,Mn=new l.pointGeometry(-100,-100),En=new l.pointGeometry(this.screenRightBoundary,this.screenBottomBoundary),Un=new hi,Li=Ir.first,Di=Ir.last;let N=[];for(let fe=Li.path.length-1;fe>=1;fe--)N.push(Li.path[fe]);for(let fe=1;fe<Di.path.length;fe++)N.push(Di.path[fe]);const $=2.5*qr;if(le){const fe=N.map(Te=>si(Te,le,mt));N=fe.some(Te=>Te.signedDistanceFromCamera<=0)?[]:fe.map(Te=>Te.point)}let re=[];if(N.length>0){const fe=N[0].clone(),Te=N[0].clone();for(let Oe=1;Oe<N.length;Oe++)fe.x=Math.min(fe.x,N[Oe].x),fe.y=Math.min(fe.y,N[Oe].y),Te.x=Math.max(Te.x,N[Oe].x),Te.y=Math.max(Te.y,N[Oe].y);re=fe.x>=Mn.x&&Te.x<=En.x&&fe.y>=Mn.y&&Te.y<=En.y?[N]:Te.x<Mn.x||fe.x>En.x||Te.y<Mn.y||fe.y>En.y?[]:l.clipLine([N],Mn.x,Mn.y,En.x,En.y)}for(const fe of re){Un.reset(fe,.25*qr);let Te=0;Te=Un.length<=.5*qr?1:Math.ceil(Un.paddedLength/$)+1;for(let Oe=0;Oe<Te;Oe++){const Ue=Oe/Math.max(Te-1,1),Ke=Un.lerp(Ue),rt=Ke.x+li,gt=Ke.y+li;wt.push(rt,gt,qr,0);const rr=rt-qr,Er=gt-qr,kr=rt+qr,hr=gt+qr;if(dn=dn&&this.isOffscreen(rr,Er,kr,hr),Gr=Gr||this.isInsideGrid(rr,Er,kr,hr),d!=="always"&&this.grid.hitTestCircle(rt,gt,qr,d,je)&&(Zr=!0,!de))return{circles:[],offscreen:!1,collisionDetected:Zr}}}}return{circles:!de&&Zr||!Gr||Ar<this.perspectiveRatioCutoff?[]:wt,offscreen:dn,collisionDetected:Zr}}queryRenderedSymbols(d){if(d.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const k=[];let C=1/0,D=1/0,q=-1/0,Y=-1/0;for(const Se of d){const je=new l.pointGeometry(Se.x+li,Se.y+li);C=Math.min(C,je.x),D=Math.min(D,je.y),q=Math.max(q,je.x),Y=Math.max(Y,je.y),k.push(je)}const oe=this.grid.query(C,D,q,Y).concat(this.ignoredGrid.query(C,D,q,Y)),le={},de={};for(const Se of oe){const je=Se.key;if(le[je.bucketInstanceId]===void 0&&(le[je.bucketInstanceId]={}),le[je.bucketInstanceId][je.featureIndex])continue;const Je=[new l.pointGeometry(Se.x1,Se.y1),new l.pointGeometry(Se.x2,Se.y1),new l.pointGeometry(Se.x2,Se.y2),new l.pointGeometry(Se.x1,Se.y2)];l.polygonIntersectsPolygon(k,Je)&&(le[je.bucketInstanceId][je.featureIndex]=!0,de[je.bucketInstanceId]===void 0&&(de[je.bucketInstanceId]=[]),de[je.bucketInstanceId].push(je.featureIndex))}return de}insertCollisionBox(d,k,C,D,q,Y){(C?this.ignoredGrid:this.grid).insert({bucketInstanceId:D,featureIndex:q,collisionGroupID:Y,overlapMode:k},d[0],d[1],d[2],d[3])}insertCollisionCircles(d,k,C,D,q,Y){const oe=C?this.ignoredGrid:this.grid,le={bucketInstanceId:D,featureIndex:q,collisionGroupID:Y,overlapMode:k};for(let de=0;de<d.length;de+=4)oe.insertCircle(le,d[de],d[de+1],d[de+2])}projectAndGetPerspectiveRatio(d,k,C,D){let q;return D?(q=[k,C,D(k,C),1],l.transformMat4(q,q,d)):(q=[k,C,0,1],co(q,q,d)),{point:new l.pointGeometry((q[0]/q[3]+1)/2*this.transform.width+li,(-q[1]/q[3]+1)/2*this.transform.height+li),perspectiveRatio:.5+this.transform.cameraToCenterDistance/q[3]*.5}}isOffscreen(d,k,C,D){return C<li||d>=this.screenRightBoundary||D<li||k>this.screenBottomBoundary}isInsideGrid(d,k,C,D){return C>=0&&d<this.gridRightBoundary&&D>=0&&k<this.gridBottomBoundary}getViewportMatrix(){const d=l.identity([]);return l.translate(d,d,[-100,-100,0]),d}}function yo(M,d,k){return d*(l.EXTENT/(M.tileSize*Math.pow(2,k-M.tileID.overscaledZ)))}class pi{constructor(d,k,C,D){this.opacity=d?Math.max(0,Math.min(1,d.opacity+(d.placed?k:-k))):D&&C?1:0,this.placed=C}isHidden(){return this.opacity===0&&!this.placed}}class Ti{constructor(d,k,C,D,q){this.text=new pi(d?d.text:null,k,C,q),this.icon=new pi(d?d.icon:null,k,D,q)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class Xo{constructor(d,k,C){this.text=d,this.icon=k,this.skipFade=C}}class vn{constructor(){this.invProjMatrix=l.create(),this.viewportMatrix=l.create(),this.circles=[]}}class ze{constructor(d,k,C,D,q){this.bucketInstanceId=d,this.featureIndex=k,this.sourceLayerIndex=C,this.bucketIndex=D,this.tileID=q}}class Ea{constructor(d){this.crossSourceCollisions=d,this.maxGroupID=0,this.collisionGroups={}}get(d){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[d]){const k=++this.maxGroupID;this.collisionGroups[d]={ID:k,predicate:C=>C.collisionGroupID===k}}return this.collisionGroups[d]}}function ha(M,d,k,C,D){const{horizontalAlign:q,verticalAlign:Y}=l.getAnchorAlignment(M),oe=-(q-.5)*d,le=-(Y-.5)*k,de=l.evaluateVariableOffset(M,C);return new l.pointGeometry(oe+de[0]*D,le+de[1]*D)}function ra(M,d,k,C,D,q){const{x1:Y,x2:oe,y1:le,y2:de,anchorPointX:Se,anchorPointY:je}=M,Je=new l.pointGeometry(d,k);return C&&Je._rotate(D?q:-q),{x1:Y+Je.x,y1:le+Je.y,x2:oe+Je.x,y2:de+Je.y,anchorPointX:Se,anchorPointY:je}}class be{constructor(d,k,C,D,q){this.transform=d.clone(),this.terrain=k,this.collisionIndex=new to(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=C,this.retainedQueryData={},this.collisionGroups=new Ea(D),this.collisionCircleArrays={},this.prevPlacement=q,q&&(q.prevPlacement=void 0),this.placedOrientations={}}getBucketParts(d,k,C,D){const q=C.getBucket(k),Y=C.latestFeatureIndex;if(!q||!Y||k.id!==q.layerIds[0])return;const oe=C.collisionBoxArray,le=q.layers[0].layout,de=Math.pow(2,this.transform.zoom-C.tileID.overscaledZ),Se=C.tileSize/l.EXTENT,je=this.transform.calculatePosMatrix(C.tileID.toUnwrapped()),Je=le.get("text-pitch-alignment")==="map",Et=le.get("text-rotation-alignment")==="map",mt=yo(C,1,this.transform.zoom),wt=wi(je,Je,Et,this.transform,mt);let tr=null;if(Je){const Ar=xn(je,Je,Et,this.transform,mt);tr=l.multiply([],this.transform.labelPlaneMatrix,Ar)}this.retainedQueryData[q.bucketInstanceId]=new ze(q.bucketInstanceId,Y,q.sourceLayerIndex,q.index,C.tileID);const cr={bucket:q,layout:le,posMatrix:je,textLabelPlaneMatrix:wt,labelToScreenMatrix:tr,scale:de,textPixelRatio:Se,holdingForFade:C.holdingForFade(),collisionBoxArray:oe,partiallyEvaluatedTextSize:l.evaluateSizeForZoom(q.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(q.sourceID)};if(D)for(const Ar of q.sortKeyRanges){const{sortKey:Dt,symbolInstanceStart:Tr,symbolInstanceEnd:Ir}=Ar;d.push({sortKey:Dt,symbolInstanceStart:Tr,symbolInstanceEnd:Ir,parameters:cr})}else d.push({symbolInstanceStart:0,symbolInstanceEnd:q.symbolInstances.length,parameters:cr})}attemptAnchorPlacement(d,k,C,D,q,Y,oe,le,de,Se,je,Je,Et,mt,wt,tr){const cr=[Je.textOffset0,Je.textOffset1],Ar=ha(d,C,D,cr,q),Dt=this.collisionIndex.placeCollisionBox(ra(k,Ar.x,Ar.y,Y,oe,this.transform.angle),je,le,de,Se.predicate,tr);if((!wt||this.collisionIndex.placeCollisionBox(ra(wt,Ar.x,Ar.y,Y,oe,this.transform.angle),je,le,de,Se.predicate,tr).box.length!==0)&&Dt.box.length>0){let Tr;if(this.prevPlacement&&this.prevPlacement.variableOffsets[Je.crossTileID]&&this.prevPlacement.placements[Je.crossTileID]&&this.prevPlacement.placements[Je.crossTileID].text&&(Tr=this.prevPlacement.variableOffsets[Je.crossTileID].anchor),Je.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");return this.variableOffsets[Je.crossTileID]={textOffset:cr,width:C,height:D,anchor:d,textBoxScale:q,prevAnchor:Tr},this.markUsedJustification(Et,d,Je,mt),Et.allowVerticalPlacement&&(this.markUsedOrientation(Et,mt,Je),this.placedOrientations[Je.crossTileID]=mt),{shift:Ar,placedGlyphBoxes:Dt}}}placeLayerBucketPart(d,k,C){const{bucket:D,layout:q,posMatrix:Y,textLabelPlaneMatrix:oe,labelToScreenMatrix:le,textPixelRatio:de,holdingForFade:Se,collisionBoxArray:je,partiallyEvaluatedTextSize:Je,collisionGroup:Et}=d.parameters,mt=q.get("text-optional"),wt=q.get("icon-optional"),tr=l.getOverlapMode(q,"text-overlap","text-allow-overlap"),cr=tr==="always",Ar=l.getOverlapMode(q,"icon-overlap","icon-allow-overlap"),Dt=Ar==="always",Tr=q.get("text-rotation-alignment")==="map",Ir=q.get("text-pitch-alignment")==="map",Zr=q.get("icon-text-fit")!=="none",Gr=q.get("symbol-z-order")==="viewport-y",dn=cr&&(Dt||!D.hasIconData()||wt),qr=Dt&&(cr||!D.hasTextData()||mt);!D.collisionArrays&&je&&D.deserializeCollisionBoxes(je);const Mn=(En,Un)=>{if(k[En.crossTileID])return;if(Se)return void(this.placements[En.crossTileID]=new Xo(!1,!1,!1));let Li=!1,Di=!1,N=!0,$=null,re={box:null,offscreen:null},fe={box:null,offscreen:null},Te=null,Oe=null,Ue=null,Ke=0,rt=0,gt=0;Un.textFeatureIndex?Ke=Un.textFeatureIndex:En.useRuntimeCollisionCircles&&(Ke=En.featureIndex),Un.verticalTextFeatureIndex&&(rt=Un.verticalTextFeatureIndex);const rr=this.retainedQueryData[D.bucketInstanceId].tileID,Er=this.terrain?(Dr,zt)=>this.terrain.getElevation(rr,Dr,zt):null;for(const Dr of["textBox","verticalTextBox","iconBox","verticalIconBox"]){const zt=Un[Dr];zt&&(zt.elevation=Er?Er(zt.anchorPointX,zt.anchorPointY):0)}const kr=Un.textBox;if(kr){const Dr=Xt=>{let Hr=l.WritingMode.horizontal;if(D.allowVerticalPlacement&&!Xt&&this.prevPlacement){const Qr=this.prevPlacement.placedOrientations[En.crossTileID];Qr&&(this.placedOrientations[En.crossTileID]=Qr,Hr=Qr,this.markUsedOrientation(D,Hr,En))}return Hr},zt=(Xt,Hr)=>{if(D.allowVerticalPlacement&&En.numVerticalGlyphVertices>0&&Un.verticalTextBox){for(const Qr of D.writingModes)if(Qr===l.WritingMode.vertical?(re=Hr(),fe=re):re=Xt(),re&&re.box&&re.box.length)break}else re=Xt()};if(q.get("text-variable-anchor")){let Xt=q.get("text-variable-anchor");if(this.prevPlacement&&this.prevPlacement.variableOffsets[En.crossTileID]){const Wr=this.prevPlacement.variableOffsets[En.crossTileID];Xt.indexOf(Wr.anchor)>0&&(Xt=Xt.filter(Nn=>Nn!==Wr.anchor),Xt.unshift(Wr.anchor))}const Hr=(Wr,Nn,Cn)=>{const Ci=Wr.x2-Wr.x1,Rn=Wr.y2-Wr.y1,Co=En.textBoxScale,Po=Zr&&Ar==="never"?Nn:null;let io={box:[],offscreen:!1};const $i=tr!=="never"?2*Xt.length:Xt.length;for(let Eo=0;Eo<$i;++Eo){const Mo=this.attemptAnchorPlacement(Xt[Eo%Xt.length],Wr,Ci,Rn,Co,Tr,Ir,de,Y,Et,Eo>=Xt.length?tr:"never",En,D,Cn,Po,Er);if(Mo&&(io=Mo.placedGlyphBoxes,io&&io.box&&io.box.length)){Li=!0,$=Mo.shift;break}}return io};zt(()=>Hr(kr,Un.iconBox,l.WritingMode.horizontal),()=>{const Wr=Un.verticalTextBox;return D.allowVerticalPlacement&&!(re&&re.box&&re.box.length)&&En.numVerticalGlyphVertices>0&&Wr?Hr(Wr,Un.verticalIconBox,l.WritingMode.vertical):{box:null,offscreen:null}}),re&&(Li=re.box,N=re.offscreen);const Qr=Dr(re&&re.box);if(!Li&&this.prevPlacement){const Wr=this.prevPlacement.variableOffsets[En.crossTileID];Wr&&(this.variableOffsets[En.crossTileID]=Wr,this.markUsedJustification(D,Wr.anchor,En,Qr))}}else{const Xt=(Hr,Qr)=>{const Wr=this.collisionIndex.placeCollisionBox(Hr,tr,de,Y,Et.predicate,Er);return Wr&&Wr.box&&Wr.box.length&&(this.markUsedOrientation(D,Qr,En),this.placedOrientations[En.crossTileID]=Qr),Wr};zt(()=>Xt(kr,l.WritingMode.horizontal),()=>{const Hr=Un.verticalTextBox;return D.allowVerticalPlacement&&En.numVerticalGlyphVertices>0&&Hr?Xt(Hr,l.WritingMode.vertical):{box:null,offscreen:null}}),Dr(re&&re.box&&re.box.length)}}if(Te=re,Li=Te&&Te.box&&Te.box.length>0,N=Te&&Te.offscreen,En.useRuntimeCollisionCircles){const Dr=D.text.placedSymbolArray.get(En.centerJustifiedTextSymbolIndex),zt=l.evaluateSizeForFeature(D.textSizeData,Je,Dr),Xt=q.get("text-padding");Oe=this.collisionIndex.placeCollisionCircles(tr,Dr,D.lineVertexArray,D.glyphOffsetArray,zt,Y,oe,le,C,Ir,Et.predicate,En.collisionCircleDiameter,Xt,Er),Oe.circles.length&&Oe.collisionDetected&&!C&&l.warnOnce("Collisions detected, but collision boxes are not shown"),Li=cr||Oe.circles.length>0&&!Oe.collisionDetected,N=N&&Oe.offscreen}if(Un.iconFeatureIndex&&(gt=Un.iconFeatureIndex),Un.iconBox){const Dr=zt=>{const Xt=Zr&&$?ra(zt,$.x,$.y,Tr,Ir,this.transform.angle):zt;return this.collisionIndex.placeCollisionBox(Xt,Ar,de,Y,Et.predicate,Er)};fe&&fe.box&&fe.box.length&&Un.verticalIconBox?(Ue=Dr(Un.verticalIconBox),Di=Ue.box.length>0):(Ue=Dr(Un.iconBox),Di=Ue.box.length>0),N=N&&Ue.offscreen}const hr=mt||En.numHorizontalGlyphVertices===0&&En.numVerticalGlyphVertices===0,fn=wt||En.numIconVertices===0;if(hr||fn?fn?hr||(Di=Di&&Li):Li=Di&&Li:Di=Li=Di&&Li,Li&&Te&&Te.box&&this.collisionIndex.insertCollisionBox(Te.box,tr,q.get("text-ignore-placement"),D.bucketInstanceId,fe&&fe.box&&rt?rt:Ke,Et.ID),Di&&Ue&&this.collisionIndex.insertCollisionBox(Ue.box,Ar,q.get("icon-ignore-placement"),D.bucketInstanceId,gt,Et.ID),Oe&&(Li&&this.collisionIndex.insertCollisionCircles(Oe.circles,tr,q.get("text-ignore-placement"),D.bucketInstanceId,Ke,Et.ID),C)){const Dr=D.bucketInstanceId;let zt=this.collisionCircleArrays[Dr];zt===void 0&&(zt=this.collisionCircleArrays[Dr]=new vn);for(let Xt=0;Xt<Oe.circles.length;Xt+=4)zt.circles.push(Oe.circles[Xt+0]),zt.circles.push(Oe.circles[Xt+1]),zt.circles.push(Oe.circles[Xt+2]),zt.circles.push(Oe.collisionDetected?1:0)}if(En.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");if(D.bucketInstanceId===0)throw new Error("bucket.bucketInstanceId can't be 0");this.placements[En.crossTileID]=new Xo(Li||dn,Di||qr,N||D.justReloaded),k[En.crossTileID]=!0};if(Gr){if(d.symbolInstanceStart!==0)throw new Error("bucket.bucketInstanceId should be 0");const En=D.getSortedSymbolIndexes(this.transform.angle);for(let Un=En.length-1;Un>=0;--Un){const Li=En[Un];Mn(D.symbolInstances.get(Li),D.collisionArrays[Li])}}else for(let En=d.symbolInstanceStart;En<d.symbolInstanceEnd;En++)Mn(D.symbolInstances.get(En),D.collisionArrays[En]);if(C&&D.bucketInstanceId in this.collisionCircleArrays){const En=this.collisionCircleArrays[D.bucketInstanceId];l.invert(En.invProjMatrix,Y),En.viewportMatrix=this.collisionIndex.getViewportMatrix()}D.justReloaded=!1}markUsedJustification(d,k,C,D){let q;q=D===l.WritingMode.vertical?C.verticalPlacedTextSymbolIndex:{left:C.leftJustifiedTextSymbolIndex,center:C.centerJustifiedTextSymbolIndex,right:C.rightJustifiedTextSymbolIndex}[l.getAnchorJustification(k)];const Y=[C.leftJustifiedTextSymbolIndex,C.centerJustifiedTextSymbolIndex,C.rightJustifiedTextSymbolIndex,C.verticalPlacedTextSymbolIndex];for(const oe of Y)oe>=0&&(d.text.placedSymbolArray.get(oe).crossTileID=q>=0&&oe!==q?0:C.crossTileID)}markUsedOrientation(d,k,C){const D=k===l.WritingMode.horizontal||k===l.WritingMode.horizontalOnly?k:0,q=k===l.WritingMode.vertical?k:0,Y=[C.leftJustifiedTextSymbolIndex,C.centerJustifiedTextSymbolIndex,C.rightJustifiedTextSymbolIndex];for(const oe of Y)d.text.placedSymbolArray.get(oe).placedOrientation=D;C.verticalPlacedTextSymbolIndex&&(d.text.placedSymbolArray.get(C.verticalPlacedTextSymbolIndex).placedOrientation=q)}commit(d){this.commitTime=d,this.zoomAtLastRecencyCheck=this.transform.zoom;const k=this.prevPlacement;let C=!1;this.prevZoomAdjustment=k?k.zoomAdjustment(this.transform.zoom):0;const D=k?k.symbolFadeChange(d):1,q=k?k.opacities:{},Y=k?k.variableOffsets:{},oe=k?k.placedOrientations:{};for(const le in this.placements){const de=this.placements[le],Se=q[le];Se?(this.opacities[le]=new Ti(Se,D,de.text,de.icon),C=C||de.text!==Se.text.placed||de.icon!==Se.icon.placed):(this.opacities[le]=new Ti(null,D,de.text,de.icon,de.skipFade),C=C||de.text||de.icon)}for(const le in q){const de=q[le];if(!this.opacities[le]){const Se=new Ti(de,D,!1,!1);Se.isHidden()||(this.opacities[le]=Se,C=C||de.text.placed||de.icon.placed)}}for(const le in Y)this.variableOffsets[le]||!this.opacities[le]||this.opacities[le].isHidden()||(this.variableOffsets[le]=Y[le]);for(const le in oe)this.placedOrientations[le]||!this.opacities[le]||this.opacities[le].isHidden()||(this.placedOrientations[le]=oe[le]);if(k&&k.lastPlacementChangeTime===void 0)throw new Error("Last placement time for previous placement is not defined");C?this.lastPlacementChangeTime=d:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=k?k.lastPlacementChangeTime:d)}updateLayerOpacities(d,k){const C={};for(const D of k){const q=D.getBucket(d);q&&D.latestFeatureIndex&&d.id===q.layerIds[0]&&this.updateBucketOpacities(q,C,D.collisionBoxArray)}}updateBucketOpacities(d,k,C){d.hasTextData()&&d.text.opacityVertexArray.clear(),d.hasIconData()&&d.icon.opacityVertexArray.clear(),d.hasIconCollisionBoxData()&&d.iconCollisionBox.collisionVertexArray.clear(),d.hasTextCollisionBoxData()&&d.textCollisionBox.collisionVertexArray.clear();const D=d.layers[0].layout,q=new Ti(null,0,!1,!1,!0),Y=D.get("text-allow-overlap"),oe=D.get("icon-allow-overlap"),le=D.get("text-variable-anchor"),de=D.get("text-rotation-alignment")==="map",Se=D.get("text-pitch-alignment")==="map",je=D.get("icon-text-fit")!=="none",Je=new Ti(null,0,Y&&(oe||!d.hasIconData()||D.get("icon-optional")),oe&&(Y||!d.hasTextData()||D.get("text-optional")),!0);!d.collisionArrays&&C&&(d.hasIconCollisionBoxData()||d.hasTextCollisionBoxData())&&d.deserializeCollisionBoxes(C);const Et=(mt,wt,tr)=>{for(let cr=0;cr<wt/4;cr++)mt.opacityVertexArray.emplaceBack(tr)};for(let mt=0;mt<d.symbolInstances.length;mt++){const wt=d.symbolInstances.get(mt),{numHorizontalGlyphVertices:tr,numVerticalGlyphVertices:cr,crossTileID:Ar}=wt;let Dt=this.opacities[Ar];k[Ar]?Dt=q:Dt||(Dt=Je,this.opacities[Ar]=Dt),k[Ar]=!0;const Tr=wt.numIconVertices>0,Ir=this.placedOrientations[wt.crossTileID],Zr=Ir===l.WritingMode.vertical,Gr=Ir===l.WritingMode.horizontal||Ir===l.WritingMode.horizontalOnly;if(tr>0||cr>0){const dn=ir(Dt.text);Et(d.text,tr,Zr?Br:dn),Et(d.text,cr,Gr?Br:dn);const qr=Dt.text.isHidden();[wt.rightJustifiedTextSymbolIndex,wt.centerJustifiedTextSymbolIndex,wt.leftJustifiedTextSymbolIndex].forEach(Un=>{Un>=0&&(d.text.placedSymbolArray.get(Un).hidden=qr||Zr?1:0)}),wt.verticalPlacedTextSymbolIndex>=0&&(d.text.placedSymbolArray.get(wt.verticalPlacedTextSymbolIndex).hidden=qr||Gr?1:0);const Mn=this.variableOffsets[wt.crossTileID];Mn&&this.markUsedJustification(d,Mn.anchor,wt,Ir);const En=this.placedOrientations[wt.crossTileID];En&&(this.markUsedJustification(d,"left",wt,En),this.markUsedOrientation(d,En,wt))}if(Tr){const dn=ir(Dt.icon),qr=!(je&&wt.verticalPlacedIconSymbolIndex&&Zr);wt.placedIconSymbolIndex>=0&&(Et(d.icon,wt.numIconVertices,qr?dn:Br),d.icon.placedSymbolArray.get(wt.placedIconSymbolIndex).hidden=Dt.icon.isHidden()),wt.verticalPlacedIconSymbolIndex>=0&&(Et(d.icon,wt.numVerticalIconVertices,qr?Br:dn),d.icon.placedSymbolArray.get(wt.verticalPlacedIconSymbolIndex).hidden=Dt.icon.isHidden())}if(d.hasIconCollisionBoxData()||d.hasTextCollisionBoxData()){const dn=d.collisionArrays[mt];if(dn){let qr=new l.pointGeometry(0,0);if(dn.textBox||dn.verticalTextBox){let En=!0;if(le){const Un=this.variableOffsets[Ar];Un?(qr=ha(Un.anchor,Un.width,Un.height,Un.textOffset,Un.textBoxScale),de&&qr._rotate(Se?this.transform.angle:-this.transform.angle)):En=!1}dn.textBox&&ye(d.textCollisionBox.collisionVertexArray,Dt.text.placed,!En||Zr,qr.x,qr.y),dn.verticalTextBox&&ye(d.textCollisionBox.collisionVertexArray,Dt.text.placed,!En||Gr,qr.x,qr.y)}const Mn=Boolean(!Gr&&dn.verticalIconBox);dn.iconBox&&ye(d.iconCollisionBox.collisionVertexArray,Dt.icon.placed,Mn,je?qr.x:0,je?qr.y:0),dn.verticalIconBox&&ye(d.iconCollisionBox.collisionVertexArray,Dt.icon.placed,!Mn,je?qr.x:0,je?qr.y:0)}}}if(d.sortFeatures(this.transform.angle),this.retainedQueryData[d.bucketInstanceId]&&(this.retainedQueryData[d.bucketInstanceId].featureSortOrder=d.featureSortOrder),d.hasTextData()&&d.text.opacityVertexBuffer&&d.text.opacityVertexBuffer.updateData(d.text.opacityVertexArray),d.hasIconData()&&d.icon.opacityVertexBuffer&&d.icon.opacityVertexBuffer.updateData(d.icon.opacityVertexArray),d.hasIconCollisionBoxData()&&d.iconCollisionBox.collisionVertexBuffer&&d.iconCollisionBox.collisionVertexBuffer.updateData(d.iconCollisionBox.collisionVertexArray),d.hasTextCollisionBoxData()&&d.textCollisionBox.collisionVertexBuffer&&d.textCollisionBox.collisionVertexBuffer.updateData(d.textCollisionBox.collisionVertexArray),d.text.opacityVertexArray.length!==d.text.layoutVertexArray.length/4)throw new Error(`bucket.text.opacityVertexArray.length (= ${d.text.opacityVertexArray.length}) !== bucket.text.layoutVertexArray.length (= ${d.text.layoutVertexArray.length}) / 4`);if(d.icon.opacityVertexArray.length!==d.icon.layoutVertexArray.length/4)throw new Error(`bucket.icon.opacityVertexArray.length (= ${d.icon.opacityVertexArray.length}) !== bucket.icon.layoutVertexArray.length (= ${d.icon.layoutVertexArray.length}) / 4`);if(d.bucketInstanceId in this.collisionCircleArrays){const mt=this.collisionCircleArrays[d.bucketInstanceId];d.placementInvProjMatrix=mt.invProjMatrix,d.placementViewportMatrix=mt.viewportMatrix,d.collisionCircleArray=mt.circles,delete this.collisionCircleArrays[d.bucketInstanceId]}}symbolFadeChange(d){return this.fadeDuration===0?1:(d-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(d){return Math.max(0,(this.transform.zoom-d)/1.5)}hasTransitions(d){return this.stale||d-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(d,k){const C=this.zoomAtLastRecencyCheck===k?1-this.zoomAdjustment(k):1;return this.zoomAtLastRecencyCheck=k,this.commitTime+this.fadeDuration*C>d}setStale(){this.stale=!0}}function ye(M,d,k,C,D){M.emplaceBack(d?1:0,k?1:0,C||0,D||0),M.emplaceBack(d?1:0,k?1:0,C||0,D||0),M.emplaceBack(d?1:0,k?1:0,C||0,D||0),M.emplaceBack(d?1:0,k?1:0,C||0,D||0)}const De=Math.pow(2,25),nt=Math.pow(2,24),st=Math.pow(2,17),Rt=Math.pow(2,16),Re=Math.pow(2,9),Ht=Math.pow(2,8),Nt=Math.pow(2,1);function ir(M){if(M.opacity===0&&!M.placed)return 0;if(M.opacity===1&&M.placed)return 4294967295;const d=M.placed?1:0,k=Math.floor(127*M.opacity);return k*De+d*nt+k*st+d*Rt+k*Re+d*Ht+k*Nt+d}const Br=0;class nn{constructor(d){this._sortAcrossTiles=d.layout.get("symbol-z-order")!=="viewport-y"&&!d.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(d,k,C,D,q){const Y=this._bucketParts;for(;this._currentTileIndex<d.length;)if(k.getBucketParts(Y,D,d[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,q())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,Y.sort((oe,le)=>oe.sortKey-le.sortKey));this._currentPartIndex<Y.length;)if(k.placeLayerBucketPart(Y[this._currentPartIndex],this._seenCrossTileIDs,C),this._currentPartIndex++,q())return!0;return!1}}class Fr{constructor(d,k,C,D,q,Y,oe,le){this.placement=new be(d,k,Y,oe,le),this._currentPlacementIndex=C.length-1,this._forceFullPlacement=D,this._showCollisionBoxes=q,this._done=!1}isDone(){return this._done}continuePlacement(d,k,C){const D=l.exported.now(),q=()=>{const Y=l.exported.now()-D;return!this._forceFullPlacement&&Y>2};for(;this._currentPlacementIndex>=0;){const Y=k[d[this._currentPlacementIndex]],oe=this.placement.collisionIndex.transform.zoom;if(Y.type==="symbol"&&(!Y.minzoom||Y.minzoom<=oe)&&(!Y.maxzoom||Y.maxzoom>oe)){if(this._inProgressLayer||(this._inProgressLayer=new nn(Y)),this._inProgressLayer.continuePlacement(C[Y.source],this.placement,this._showCollisionBoxes,Y,q))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(d){return this.placement.commit(d),this.placement}}const $n=512/l.EXTENT/2;class Wn{constructor(d,k,C){this.tileID=d,this.indexedSymbolInstances={},this.bucketInstanceId=C;for(let D=0;D<k.length;D++){const q=k.get(D),Y=q.key;this.indexedSymbolInstances[Y]||(this.indexedSymbolInstances[Y]=[]),this.indexedSymbolInstances[Y].push({crossTileID:q.crossTileID,coord:this.getScaledCoordinates(q,d)})}}getScaledCoordinates(d,k){const C=$n/Math.pow(2,k.canonical.z-this.tileID.canonical.z);return{x:Math.floor((k.canonical.x*l.EXTENT+d.anchorX)*C),y:Math.floor((k.canonical.y*l.EXTENT+d.anchorY)*C)}}findMatches(d,k,C){const D=this.tileID.canonical.z<k.canonical.z?1:Math.pow(2,this.tileID.canonical.z-k.canonical.z);for(let q=0;q<d.length;q++){const Y=d.get(q);if(Y.crossTileID)continue;const oe=this.indexedSymbolInstances[Y.key];if(!oe)continue;const le=this.getScaledCoordinates(Y,k);for(const de of oe)if(Math.abs(de.coord.x-le.x)<=D&&Math.abs(de.coord.y-le.y)<=D&&!C[de.crossTileID]){C[de.crossTileID]=!0,Y.crossTileID=de.crossTileID;break}}}}class sn{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class yi{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(d){const k=Math.round((d-this.lng)/360);if(k!==0)for(const C in this.indexes){const D=this.indexes[C],q={};for(const Y in D){const oe=D[Y];oe.tileID=oe.tileID.unwrapTo(oe.tileID.wrap+k),q[oe.tileID.key]=oe}this.indexes[C]=q}this.lng=d}addBucket(d,k,C){if(this.indexes[d.overscaledZ]&&this.indexes[d.overscaledZ][d.key]){if(this.indexes[d.overscaledZ][d.key].bucketInstanceId===k.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(d.overscaledZ,this.indexes[d.overscaledZ][d.key])}for(let q=0;q<k.symbolInstances.length;q++)k.symbolInstances.get(q).crossTileID=0;this.usedCrossTileIDs[d.overscaledZ]||(this.usedCrossTileIDs[d.overscaledZ]={});const D=this.usedCrossTileIDs[d.overscaledZ];for(const q in this.indexes){const Y=this.indexes[q];if(Number(q)>d.overscaledZ)for(const oe in Y){const le=Y[oe];le.tileID.isChildOf(d)&&le.findMatches(k.symbolInstances,d,D)}else{const oe=Y[d.scaledTo(Number(q)).key];oe&&oe.findMatches(k.symbolInstances,d,D)}}for(let q=0;q<k.symbolInstances.length;q++){const Y=k.symbolInstances.get(q);Y.crossTileID||(Y.crossTileID=C.generate(),D[Y.crossTileID]=!0)}return this.indexes[d.overscaledZ]===void 0&&(this.indexes[d.overscaledZ]={}),this.indexes[d.overscaledZ][d.key]=new Wn(d,k.symbolInstances,k.bucketInstanceId),!0}removeBucketCrossTileIDs(d,k){for(const C in k.indexedSymbolInstances)for(const D of k.indexedSymbolInstances[C])delete this.usedCrossTileIDs[d][D.crossTileID]}removeStaleBuckets(d){let k=!1;for(const C in this.indexes){const D=this.indexes[C];for(const q in D)d[D[q].bucketInstanceId]||(this.removeBucketCrossTileIDs(C,D[q]),delete D[q],k=!0)}return k}}class Ai{constructor(){this.layerIndexes={},this.crossTileIDs=new sn,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(d,k,C){let D=this.layerIndexes[d.id];D===void 0&&(D=this.layerIndexes[d.id]=new yi);let q=!1;const Y={};D.handleWrapJump(C);for(const oe of k){const le=oe.getBucket(d);le&&d.id===le.layerIds[0]&&(le.bucketInstanceId||(le.bucketInstanceId=++this.maxBucketInstanceId),D.addBucket(oe.tileID,le,this.crossTileIDs)&&(q=!0),Y[le.bucketInstanceId]=!0)}return D.removeStaleBuckets(Y)&&(q=!0),q}pruneUnusedLayers(d){const k={};d.forEach(C=>{k[C]=!0});for(const C in this.layerIndexes)k[C]||delete this.layerIndexes[C]}}var Xi=l.createLayout([{name:"a_pos",type:"Int16",components:2}]);class Ii extends l.Evented{constructor(d){super(),this.sourceCache=d,this._tiles={},this._renderableTilesKeys=[],this._sourceTileCache={},this.renderHistory=[],this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.deltaZoom=1,this.renderHistorySize=d._cache.max,d.usedForTerrain=!0,d.tileSize=this.tileSize*2**this.deltaZoom}destruct(){this.sourceCache.usedForTerrain=!1,this.sourceCache.tileSize=null;for(const d in this._tiles){const k=this._tiles[d];k.textures.forEach(C=>C.destroy()),k.textures=[]}}update(d,k){this.sourceCache.update(d,k),this._renderableTilesKeys=[];for(const C of d.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,reparseOverscaled:!1,terrain:k}))this._renderableTilesKeys.push(C.key),this._tiles[C.key]||(C.posMatrix=new Float64Array(16),l.ortho(C.posMatrix,0,l.EXTENT,0,l.EXTENT,0,1),this._tiles[C.key]=new At(C,this.tileSize))}removeOutdated(d){const k={};this.renderHistory=this.renderHistory.filter((C,D)=>this.renderHistory.indexOf(C)===D).slice(0,this.renderHistorySize);for(const C of this._renderableTilesKeys)k[C]=!0;for(const C of this.renderHistory)k[C]=!0;for(const C in this._tiles)k[C]||(this._tiles[C].clearTextures(d),delete this._tiles[C])}getRenderableTiles(){return this._renderableTilesKeys.map(d=>this.getTileByID(d))}getTileByID(d){return this._tiles[d]}getTerrainCoords(d){const k={};for(const C of this._renderableTilesKeys){const D=this._tiles[C].tileID;if(D.canonical.equals(d.canonical)){const q=d.clone();q.posMatrix=new Float64Array(16),l.ortho(q.posMatrix,0,l.EXTENT,0,l.EXTENT,0,1),k[C]=q}else if(D.canonical.isChildOf(d.canonical)){const q=d.clone();q.posMatrix=new Float64Array(16);const Y=D.canonical.z-d.canonical.z,oe=D.canonical.x-(D.canonical.x>>Y<<Y),le=D.canonical.y-(D.canonical.y>>Y<<Y),de=l.EXTENT>>Y;l.ortho(q.posMatrix,0,de,0,de,0,1),l.translate(q.posMatrix,q.posMatrix,[-oe*de,-le*de,0]),k[C]=q}else if(d.canonical.isChildOf(D.canonical)){const q=d.clone();q.posMatrix=new Float64Array(16);const Y=d.canonical.z-D.canonical.z,oe=d.canonical.x-(d.canonical.x>>Y<<Y),le=d.canonical.y-(d.canonical.y>>Y<<Y),de=l.EXTENT>>Y;l.ortho(q.posMatrix,0,l.EXTENT,0,l.EXTENT,0,1),l.translate(q.posMatrix,q.posMatrix,[oe*de,le*de,0]),l.scale(q.posMatrix,q.posMatrix,[1/2**Y,1/2**Y,0]),k[C]=q}}return k}getSourceTile(d,k){const C=this.sourceCache._source;let D=d.overscaledZ-this.deltaZoom;if(D>C.maxzoom&&(D=C.maxzoom),D<C.minzoom)return null;this._sourceTileCache[d.key]||(this._sourceTileCache[d.key]=d.scaledTo(D).key);let q=this.sourceCache.getTileByID(this._sourceTileCache[d.key]);if((!q||!q.dem)&&k)for(;D>=C.minzoom&&(!q||!q.dem);)q=this.sourceCache.getTileByID(d.scaledTo(D--).key);return q}tilesAfterTime(d=Date.now()){return Object.values(this._tiles).filter(k=>k.timeLoaded>=d)}}class qi{constructor(d,k,C){this.style=d,this.sourceCache=new Ii(k),this.options=C,this.exaggeration=typeof C.exaggeration=="number"?C.exaggeration:1,this.elevationOffset=typeof C.elevationOffset=="number"?C.elevationOffset:450,this.qualityFactor=2,this.meshSize=128,this._demMatrixCache={},this.coordsIndex=[],this._coordsTextureSize=1024,this.clearRerenderCache()}getDEMElevation(d,k,C,D=l.EXTENT){if(!(k>=0&&k<D&&C>=0&&C<D))return this.elevationOffset;let q=0;const Y=this.getTerrainData(d);if(Y.tile&&Y.tile.dem){const oe=l.transformMat4$1([],[k/D*l.EXTENT,C/D*l.EXTENT],Y.u_terrain_matrix),le=[oe[0]*Y.tile.dem.dim,oe[1]*Y.tile.dem.dim],de=[Math.floor(le[0]),Math.floor(le[1])],Se=Y.tile.dem.get(de[0],de[1]),je=Y.tile.dem.get(de[0],de[1]+1),Je=Y.tile.dem.get(de[0]+1,de[1]),Et=Y.tile.dem.get(de[0]+1,de[1]+1);q=l.number(l.number(Se,je,le[0]-de[0]),l.number(Je,Et,le[0]-de[0]),le[1]-de[1])}return q}rememberForRerender(d,k){for(const C in this.sourceCache._tiles){const D=this.sourceCache._tiles[C];(D.tileID.equals(k)||D.tileID.isChildOf(k))&&(d===this.sourceCache.sourceCache.id&&(D.timeLoaded=Date.now()),this._rerender[d]=this._rerender[d]||{},this._rerender[d][D.tileID.key]=!0)}}needsRerender(d,k){return this._rerender[d]&&this._rerender[d][k.key]}clearRerenderCache(){this._rerender={}}getElevation(d,k,C,D=l.EXTENT){return(this.getDEMElevation(d,k,C,D)+this.elevationOffset)*this.exaggeration}getTerrainData(d){if(!this._emptyDemTexture){const D=this.style.map.painter.context,q=new l.RGBAImage({width:1,height:1},new Uint8Array(4));this._emptyDepthTexture=new U(D,q,D.gl.RGBA,{premultiply:!1}),this._emptyDemUnpack=[0,0,0,0],this._emptyDemTexture=new U(D,new l.RGBAImage({width:1,height:1}),D.gl.RGBA,{premultiply:!1}),this._emptyDemTexture.bind(D.gl.NEAREST,D.gl.CLAMP_TO_EDGE),this._emptyDemMatrix=l.identity([])}const k=this.sourceCache.getSourceTile(d,!0);if(k&&k.dem&&(!k.demTexture||k.needsTerrainPrepare)){const D=this.style.map.painter.context;k.demTexture=this.style.map.painter.getTileTexture(k.dem.stride),k.demTexture?k.demTexture.update(k.dem.getPixels(),{premultiply:!1}):k.demTexture=new U(D,k.dem.getPixels(),D.gl.RGBA,{premultiply:!1}),k.demTexture.bind(D.gl.NEAREST,D.gl.CLAMP_TO_EDGE),k.needsTerrainPrepare=!1}const C=k&&k+k.tileID.key+d.key;if(C&&!this._demMatrixCache[C]){const D=this.sourceCache.sourceCache._source.maxzoom;let q=d.canonical.z-k.tileID.canonical.z;d.overscaledZ>d.canonical.z&&(d.canonical.z>=D?q=d.canonical.z-D:l.warnOnce("cannot calculate elevation if elevation maxzoom > source.maxzoom"));const Y=d.canonical.x-(d.canonical.x>>q<<q),oe=d.canonical.y-(d.canonical.y>>q<<q),le=l.fromScaling(new Float64Array(16),[1/(l.EXTENT<<q),1/(l.EXTENT<<q),0]);l.translate(le,le,[Y*l.EXTENT,oe*l.EXTENT,0]),this._demMatrixCache[d.key]={matrix:le,coord:d}}return{u_depth:2,u_terrain:3,u_terrain_dim:k&&k.dem&&k.dem.dim||1,u_terrain_matrix:C?this._demMatrixCache[d.key].matrix:this._emptyDemMatrix,u_terrain_unpack:k&&k.dem&&k.dem.getUnpackVector()||this._emptyDemUnpack,u_terrain_offset:this.elevationOffset,u_terrain_exaggeration:this.exaggeration,texture:(k&&k.demTexture||this._emptyDemTexture).texture,depthTexture:(this._fboDepthTexture||this._emptyDepthTexture).texture,tile:k}}getRTTFramebuffer(){const d=this.style.map.painter;if(!this._rttFramebuffer){const k=this.sourceCache.tileSize*this.qualityFactor;this._rttFramebuffer=d.context.createFramebuffer(k,k,!0),this._rttFramebuffer.depthAttachment.set(d.context.createRenderbuffer(d.context.gl.DEPTH_COMPONENT16,k,k))}return this._rttFramebuffer}getFramebuffer(d){const k=this.style.map.painter,C=k.width/devicePixelRatio,D=k.height/devicePixelRatio;return!this._fbo||this._fbo.width===C&&this._fbo.height===D||(this._fbo.destroy(),this._fboCoordsTexture.destroy(),this._fboDepthTexture.destroy(),delete this._fbo,delete this._fboDepthTexture,delete this._fboCoordsTexture),this._fboCoordsTexture||(this._fboCoordsTexture=new U(k.context,{width:C,height:D,data:null},k.context.gl.RGBA,{premultiply:!1}),this._fboCoordsTexture.bind(k.context.gl.NEAREST,k.context.gl.CLAMP_TO_EDGE)),this._fboDepthTexture||(this._fboDepthTexture=new U(k.context,{width:C,height:D,data:null},k.context.gl.RGBA,{premultiply:!1}),this._fboDepthTexture.bind(k.context.gl.NEAREST,k.context.gl.CLAMP_TO_EDGE)),this._fbo||(this._fbo=k.context.createFramebuffer(C,D,!0),this._fbo.depthAttachment.set(k.context.createRenderbuffer(k.context.gl.DEPTH_COMPONENT16,C,D))),this._fbo.colorAttachment.set(d==="coords"?this._fboCoordsTexture.texture:this._fboDepthTexture.texture),this._fbo}getCoordsTexture(){const d=this.style.map.painter.context;if(this._coordsTexture)return this._coordsTexture;const k=new Uint8Array(this._coordsTextureSize*this._coordsTextureSize*4);for(let q=0,Y=0;q<this._coordsTextureSize;q++)for(let oe=0;oe<this._coordsTextureSize;oe++,Y+=4)k[Y+0]=255&oe,k[Y+1]=255&q,k[Y+2]=oe>>8<<4|q>>8,k[Y+3]=0;const C=new l.RGBAImage({width:this._coordsTextureSize,height:this._coordsTextureSize},new Uint8Array(k.buffer)),D=new U(d,C,d.gl.RGBA,{premultiply:!1});return D.bind(d.gl.NEAREST,d.gl.CLAMP_TO_EDGE),this._coordsTexture=D,D}pointCoordinate(d){const k=new Uint8Array(4),C=this.style.map.painter,D=C.context,q=D.gl;D.bindFramebuffer.set(this.getFramebuffer("coords").framebuffer),q.readPixels(d.x,C.height/devicePixelRatio-d.y-1,1,1,q.RGBA,q.UNSIGNED_BYTE,k),D.bindFramebuffer.set(null);const Y=k[0]+(k[2]>>4<<8),oe=k[1]+((15&k[2])<<8),le=this.coordsIndex[255-k[3]],de=le&&this.sourceCache.getTileByID(le);if(!de)return null;const Se=this._coordsTextureSize,je=(1<<de.tileID.canonical.z)*Se;return new l.MercatorCoordinate((de.tileID.canonical.x*Se+Y)/je,(de.tileID.canonical.y*Se+oe)/je,this.getElevation(de.tileID,Y,oe,Se))}getTerrainMesh(){if(this._mesh)return this._mesh;const d=this.style.map.painter.context,k=new l.PosArray,C=new l.TriangleIndexArray,D=this.meshSize,q=l.EXTENT/D,Y=D*D;for(let oe=0;oe<=D;oe++)for(let le=0;le<=D;le++)k.emplaceBack(le*q,oe*q);for(let oe=0;oe<Y;oe+=D+1)for(let le=0;le<D;le++)C.emplaceBack(le+oe,D+le+oe+1,D+le+oe+2),C.emplaceBack(le+oe,D+le+oe+2,le+oe+1);return this._mesh={indexBuffer:d.createIndexBuffer(C),vertexBuffer:d.createVertexBuffer(k,Xi.members),segments:l.SegmentVector.simpleSegment(0,0,k.length,C.length)},this._mesh}getMinMaxElevation(d){const k=this.getTerrainData(d).tile,C={minElevation:null,maxElevation:null};return k&&k.dem&&(C.minElevation=(k.dem.min+this.elevationOffset)*this.exaggeration,C.maxElevation=(k.dem.max+this.elevationOffset)*this.exaggeration),C}}const ro=(M,d)=>l.emitValidationErrors(M,d&&d.filter(k=>k.identifier!=="source.canvas")),ko=l.pick(Wt,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData"]),Yo=l.pick(Wt,["setCenter","setZoom","setBearing","setPitch"]),So=function(){const M={},d=l.spec.$version;for(const k in l.spec.$root){const C=l.spec.$root[k];if(C.required){let D=null;D=k==="version"?d:C.type==="array"?[]:{},D!=null&&(M[k]=D)}}return M}();class Jo extends l.Evented{constructor(d,k={}){super(),this.map=d,this.dispatcher=new We(ct(),this),this.imageManager=new H,this.imageManager.setEventedParent(this),this.glyphManager=new se(d._requestManager,k.localIdeographFontFamily),this.lineAtlas=new Ge(256,512),this.crossTileSymbolIndex=new Ai,this._layers={},this._serializedLayers={},this._order=[],this.sourceCaches={},this.zoomHistory=new l.ZoomHistory,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("setReferrer",l.getReferrer());const C=this;this._rtlTextPluginCallback=Jo.registerForPluginStateChange(D=>{C.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:D.pluginStatus,pluginURL:D.pluginURL},(q,Y)=>{if(l.triggerPluginCompletionEvent(q),Y&&Y.every(oe=>oe))for(const oe in C.sourceCaches)C.sourceCaches[oe].reload()})}),this.on("data",D=>{if(D.dataType!=="source"||D.sourceDataType!=="metadata")return;const q=this.sourceCaches[D.sourceId];if(!q)return;const Y=q.getSource();if(Y&&Y.vectorLayerIds)for(const oe in this._layers){const le=this._layers[oe];le.source===Y.id&&this._validateLayer(le)}})}loadURL(d,k={}){this.fire(new l.Event("dataloading",{dataType:"style"}));const C=typeof k.validate!="boolean"||k.validate,D=this.map._requestManager.transformRequest(d,l.ResourceType.Style);this._request=l.getJSON(D,(q,Y)=>{this._request=null,q?this.fire(new l.ErrorEvent(q)):Y&&this._load(Y,C)})}loadJSON(d,k={}){this.fire(new l.Event("dataloading",{dataType:"style"})),this._request=l.exported.frame(()=>{this._request=null,this._load(d,k.validate!==!1)})}loadEmpty(){this.fire(new l.Event("dataloading",{dataType:"style"})),this._load(So,!1)}_load(d,k){if(k&&ro(this,l.validateStyle(d)))return;this._loaded=!0,this.stylesheet=d;for(const D in d.sources)this.addSource(D,d.sources[D],{validate:!1});d.sprite?this._loadSprite(d.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(d.glyphs);const C=ln(this.stylesheet.layers);this._order=C.map(D=>D.id),this._layers={},this._serializedLayers={};for(let D of C)D=l.createStyleLayer(D),D.setEventedParent(this,{layer:{id:D.id}}),this._layers[D.id]=D,this._serializedLayers[D.id]=D.serialize();this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new pe(this.stylesheet.light),this.setTerrain(this.stylesheet.terrain),this.fire(new l.Event("data",{dataType:"style"})),this.fire(new l.Event("style.load"))}_loadSprite(d){this._spriteRequest=function(k,C,D,q){let Y,oe,le;const de=D>1?"@2x":"";let Se=l.getJSON(C.transformRequest(C.normalizeSpriteURL(k,de,".json"),l.ResourceType.SpriteJSON),(Et,mt)=>{Se=null,le||(le=Et,Y=mt,Je())}),je=l.getImage(C.transformRequest(C.normalizeSpriteURL(k,de,".png"),l.ResourceType.SpriteImage),(Et,mt)=>{je=null,le||(le=Et,oe=mt,Je())});function Je(){if(le)q(le);else if(Y&&oe){const Et=l.exported.getImageData(oe),mt={};for(const wt in Y){const{width:tr,height:cr,x:Ar,y:Dt,sdf:Tr,pixelRatio:Ir,stretchX:Zr,stretchY:Gr,content:dn}=Y[wt],qr=new l.RGBAImage({width:tr,height:cr});l.RGBAImage.copy(Et,qr,{x:Ar,y:Dt},{x:0,y:0},{width:tr,height:cr}),mt[wt]={data:qr,pixelRatio:Ir,sdf:Tr,stretchX:Zr,stretchY:Gr,content:dn}}q(null,mt)}}return{cancel(){Se&&(Se.cancel(),Se=null),je&&(je.cancel(),je=null)}}}(d,this.map._requestManager,this.map.getPixelRatio(),(k,C)=>{if(this._spriteRequest=null,k)this.fire(new l.ErrorEvent(k));else if(C)for(const D in C)this.imageManager.addImage(D,C[D]);this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new l.Event("data",{dataType:"style"}))})}_validateLayer(d){const k=this.sourceCaches[d.source];if(!k)return;const C=d.sourceLayer;if(!C)return;const D=k.getSource();(D.type==="geojson"||D.vectorLayerIds&&D.vectorLayerIds.indexOf(C)===-1)&&this.fire(new l.ErrorEvent(new Error(`Source layer "${C}" does not exist on source "${D.id}" as specified by style layer "${d.id}".`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const d in this.sourceCaches)if(!this.sourceCaches[d].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeLayers(d){const k=[];for(const C of d){const D=this._layers[C];D.type!=="custom"&&k.push(D.serialize())}return k}hasTransitions(){if(this.light&&this.light.hasTransition())return!0;for(const d in this.sourceCaches)if(this.sourceCaches[d].hasTransition())return!0;for(const d in this._layers)if(this._layers[d].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(d){if(!this._loaded)return;const k=this._changed;if(this._changed){const D=Object.keys(this._updatedLayers),q=Object.keys(this._removedLayers);(D.length||q.length)&&this._updateWorkerLayers(D,q);for(const Y in this._updatedSources){const oe=this._updatedSources[Y];if(oe==="reload")this._reloadSource(Y);else{if(oe!=="clear")throw new Error(`Invalid action ${oe}`);this._clearSource(Y)}}this._updateTilesForChangedImages();for(const Y in this._updatedPaintProps)this._layers[Y].updateTransitions(d);this.light.updateTransitions(d),this._resetUpdates()}const C={};for(const D in this.sourceCaches){const q=this.sourceCaches[D];C[D]=q.used,q.used=!1}for(const D of this._order){const q=this._layers[D];q.recalculate(d,this._availableImages),!q.isHidden(d.zoom)&&q.source&&(this.sourceCaches[q.source].used=!0)}for(const D in C){const q=this.sourceCaches[D];C[D]!==q.used&&q.fire(new l.Event("data",{sourceDataType:"visibility",dataType:"source",sourceId:D}))}this.light.recalculate(d),this.z=d.zoom,k&&this.fire(new l.Event("data",{dataType:"style"}))}_updateTilesForChangedImages(){const d=Object.keys(this._changedImages);if(d.length){for(const k in this.sourceCaches)this.sourceCaches[k].reloadTilesForDependencies(["icons","patterns"],d);this._changedImages={}}}_updateWorkerLayers(d,k){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(d),removedIds:k})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}}setTerrain(d){if(this._checkLoaded(),this._terrainDataCallback&&this.off("data",this._terrainDataCallback),this._terrainfreezeElevationCallback&&this.map.off("freezeElevation",this._terrainfreezeElevationCallback),d){const k=this.sourceCaches[d.source];if(!k)throw new Error(`cannot load terrain, because there exists no source with ID: ${d.source}`);this.terrain=new qi(this,k,d),this.map.transform.updateElevation(this.terrain),this._terrainfreezeElevationCallback=C=>{C.freeze?this.map.transform.freezeElevation=!0:(this.map.transform.freezeElevation=!1,this.map.transform.recalculateZoom(this.terrain))},this._terrainDataCallback=C=>{C.tile&&(C.sourceId===d.source?(this.map.transform.updateElevation(this.terrain),this.terrain.rememberForRerender(C.sourceId,C.tile.tileID)):C.source.type==="geojson"&&this.terrain.rememberForRerender(C.sourceId,C.tile.tileID))},this.on("data",this._terrainDataCallback),this.map.on("freezeElevation",this._terrainfreezeElevationCallback)}else this.terrain&&this.terrain.sourceCache.destruct(),this.terrain=null,this.map.transform.updateElevation(this.terrain);this.map.fire(new l.Event("terrain",{terrain:d}))}setState(d){if(this._checkLoaded(),ro(this,l.validateStyle(d)))return!1;(d=l.clone$1(d)).layers=ln(d.layers);const k=function(D,q){if(!D)return[{command:Wt.setStyle,args:[q]}];let Y=[];try{if(!E(D.version,q.version))return[{command:Wt.setStyle,args:[q]}];E(D.center,q.center)||Y.push({command:Wt.setCenter,args:[q.center]}),E(D.zoom,q.zoom)||Y.push({command:Wt.setZoom,args:[q.zoom]}),E(D.bearing,q.bearing)||Y.push({command:Wt.setBearing,args:[q.bearing]}),E(D.pitch,q.pitch)||Y.push({command:Wt.setPitch,args:[q.pitch]}),E(D.sprite,q.sprite)||Y.push({command:Wt.setSprite,args:[q.sprite]}),E(D.glyphs,q.glyphs)||Y.push({command:Wt.setGlyphs,args:[q.glyphs]}),E(D.transition,q.transition)||Y.push({command:Wt.setTransition,args:[q.transition]}),E(D.light,q.light)||Y.push({command:Wt.setLight,args:[q.light]});const oe={},le=[];(function(Se,je,Je,Et){let mt;for(mt in je=je||{},Se=Se||{})Object.prototype.hasOwnProperty.call(Se,mt)&&(Object.prototype.hasOwnProperty.call(je,mt)||mn(mt,Je,Et));for(mt in je)Object.prototype.hasOwnProperty.call(je,mt)&&(Object.prototype.hasOwnProperty.call(Se,mt)?E(Se[mt],je[mt])||(Se[mt].type==="geojson"&&je[mt].type==="geojson"&&On(Se,je,mt)?Je.push({command:Wt.setGeoJSONSourceData,args:[mt,je[mt].data]}):en(mt,je,Je,Et)):Ur(mt,je,Je))})(D.sources,q.sources,le,oe);const de=[];D.layers&&D.layers.forEach(Se=>{oe[Se.source]?Y.push({command:Wt.removeLayer,args:[Se.id]}):de.push(Se)}),Y=Y.concat(le),function(Se,je,Je){je=je||[];const Et=(Se=Se||[]).map(ai),mt=je.map(ai),wt=Se.reduce(_i,{}),tr=je.reduce(_i,{}),cr=Et.slice(),Ar=Object.create(null);let Dt,Tr,Ir,Zr,Gr,dn,qr;for(Dt=0,Tr=0;Dt<Et.length;Dt++)Ir=Et[Dt],Object.prototype.hasOwnProperty.call(tr,Ir)?Tr++:(Je.push({command:Wt.removeLayer,args:[Ir]}),cr.splice(cr.indexOf(Ir,Tr),1));for(Dt=0,Tr=0;Dt<mt.length;Dt++)Ir=mt[mt.length-1-Dt],cr[cr.length-1-Dt]!==Ir&&(Object.prototype.hasOwnProperty.call(wt,Ir)?(Je.push({command:Wt.removeLayer,args:[Ir]}),cr.splice(cr.lastIndexOf(Ir,cr.length-Tr),1)):Tr++,dn=cr[cr.length-Dt],Je.push({command:Wt.addLayer,args:[tr[Ir],dn]}),cr.splice(cr.length-Dt,0,Ir),Ar[Ir]=!0);for(Dt=0;Dt<mt.length;Dt++)if(Ir=mt[Dt],Zr=wt[Ir],Gr=tr[Ir],!Ar[Ir]&&!E(Zr,Gr))if(E(Zr.source,Gr.source)&&E(Zr["source-layer"],Gr["source-layer"])&&E(Zr.type,Gr.type)){for(qr in Zn(Zr.layout,Gr.layout,Je,Ir,null,Wt.setLayoutProperty),Zn(Zr.paint,Gr.paint,Je,Ir,null,Wt.setPaintProperty),E(Zr.filter,Gr.filter)||Je.push({command:Wt.setFilter,args:[Ir,Gr.filter]}),E(Zr.minzoom,Gr.minzoom)&&E(Zr.maxzoom,Gr.maxzoom)||Je.push({command:Wt.setLayerZoomRange,args:[Ir,Gr.minzoom,Gr.maxzoom]}),Zr)Object.prototype.hasOwnProperty.call(Zr,qr)&&qr!=="layout"&&qr!=="paint"&&qr!=="filter"&&qr!=="metadata"&&qr!=="minzoom"&&qr!=="maxzoom"&&(qr.indexOf("paint.")===0?Zn(Zr[qr],Gr[qr],Je,Ir,qr.slice(6),Wt.setPaintProperty):E(Zr[qr],Gr[qr])||Je.push({command:Wt.setLayerProperty,args:[Ir,qr,Gr[qr]]}));for(qr in Gr)Object.prototype.hasOwnProperty.call(Gr,qr)&&!Object.prototype.hasOwnProperty.call(Zr,qr)&&qr!=="layout"&&qr!=="paint"&&qr!=="filter"&&qr!=="metadata"&&qr!=="minzoom"&&qr!=="maxzoom"&&(qr.indexOf("paint.")===0?Zn(Zr[qr],Gr[qr],Je,Ir,qr.slice(6),Wt.setPaintProperty):E(Zr[qr],Gr[qr])||Je.push({command:Wt.setLayerProperty,args:[Ir,qr,Gr[qr]]}))}else Je.push({command:Wt.removeLayer,args:[Ir]}),dn=cr[cr.lastIndexOf(Ir)+1],Je.push({command:Wt.addLayer,args:[Gr,dn]})}(de,q.layers,Y)}catch(oe){console.warn("Unable to compute style diff:",oe),Y=[{command:Wt.setStyle,args:[q]}]}return Y}(this.serialize(),d).filter(D=>!(D.command in Yo));if(k.length===0)return!1;const C=k.filter(D=>!(D.command in ko));if(C.length>0)throw new Error(`Unimplemented: ${C.map(D=>D.command).join(", ")}.`);return k.forEach(D=>{D.command!=="setTransition"&&this[D.command].apply(this,D.args)}),this.stylesheet=d,!0}addImage(d,k){if(this.getImage(d))return this.fire(new l.ErrorEvent(new Error(`An image named "${d}" already exists.`)));this.imageManager.addImage(d,k),this._afterImageUpdated(d)}updateImage(d,k){this.imageManager.updateImage(d,k)}getImage(d){return this.imageManager.getImage(d)}removeImage(d){if(!this.getImage(d))return this.fire(new l.ErrorEvent(new Error(`An image named "${d}" does not exist.`)));this.imageManager.removeImage(d),this._afterImageUpdated(d)}_afterImageUpdated(d){this._availableImages=this.imageManager.listImages(),this._changedImages[d]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new l.Event("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(d,k,C={}){if(this._checkLoaded(),this.sourceCaches[d]!==void 0)throw new Error(`Source "${d}" already exists.`);if(!k.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(k).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(k.type)>=0&&this._validate(l.validateStyle.source,`sources.${d}`,k,null,C))return;this.map&&this.map._collectResourceTiming&&(k.collectResourceTiming=!0);const D=this.sourceCaches[d]=new $t(d,k,this.dispatcher);D.style=this,D.setEventedParent(this,()=>({isSourceLoaded:this.loaded(),source:D.serialize(),sourceId:d})),D.onAdd(this.map),this._changed=!0}removeSource(d){if(this._checkLoaded(),this.sourceCaches[d]===void 0)throw new Error("There is no source with this ID");for(const C in this._layers)if(this._layers[C].source===d)return this.fire(new l.ErrorEvent(new Error(`Source "${d}" cannot be removed while layer "${C}" is using it.`)));const k=this.sourceCaches[d];delete this.sourceCaches[d],delete this._updatedSources[d],k.fire(new l.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:d})),k.setEventedParent(null),k.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(d,k){if(this._checkLoaded(),this.sourceCaches[d]===void 0)throw new Error(`There is no source with this ID=${d}`);const C=this.sourceCaches[d].getSource();if(C.type!=="geojson")throw new Error(`geojsonSource.type is ${C.type}, which is !== 'geojson`);C.setData(k),this._changed=!0}getSource(d){return this.sourceCaches[d]&&this.sourceCaches[d].getSource()}addLayer(d,k,C={}){this._checkLoaded();const D=d.id;if(this.getLayer(D))return void this.fire(new l.ErrorEvent(new Error(`Layer "${D}" already exists on this map.`)));let q;if(d.type==="custom"){if(ro(this,l.validateCustomStyleLayer(d)))return;q=l.createStyleLayer(d)}else{if(typeof d.source=="object"&&(this.addSource(D,d.source),d=l.clone$1(d),d=l.extend(d,{source:D})),this._validate(l.validateStyle.layer,`layers.${D}`,d,{arrayIndex:-1},C))return;q=l.createStyleLayer(d),this._validateLayer(q),q.setEventedParent(this,{layer:{id:D}}),this._serializedLayers[q.id]=q.serialize()}const Y=k?this._order.indexOf(k):this._order.length;if(k&&Y===-1)this.fire(new l.ErrorEvent(new Error(`Cannot add layer "${D}" before non-existing layer "${k}".`)));else{if(this._order.splice(Y,0,D),this._layerOrderChanged=!0,this._layers[D]=q,this._removedLayers[D]&&q.source&&q.type!=="custom"){const oe=this._removedLayers[D];delete this._removedLayers[D],oe.type!==q.type?this._updatedSources[q.source]="clear":(this._updatedSources[q.source]="reload",this.sourceCaches[q.source].pause())}this._updateLayer(q),q.onAdd&&q.onAdd(this.map)}}moveLayer(d,k){if(this._checkLoaded(),this._changed=!0,!this._layers[d])return void this.fire(new l.ErrorEvent(new Error(`The layer '${d}' does not exist in the map's style and cannot be moved.`)));if(d===k)return;const C=this._order.indexOf(d);this._order.splice(C,1);const D=k?this._order.indexOf(k):this._order.length;k&&D===-1?this.fire(new l.ErrorEvent(new Error(`Cannot move layer "${d}" before non-existing layer "${k}".`))):(this._order.splice(D,0,d),this._layerOrderChanged=!0)}removeLayer(d){this._checkLoaded();const k=this._layers[d];if(!k)return void this.fire(new l.ErrorEvent(new Error(`Cannot remove non-existing layer "${d}".`)));k.setEventedParent(null);const C=this._order.indexOf(d);this._order.splice(C,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[d]=k,delete this._layers[d],delete this._serializedLayers[d],delete this._updatedLayers[d],delete this._updatedPaintProps[d],k.onRemove&&k.onRemove(this.map)}getLayer(d){return this._layers[d]}hasLayer(d){return d in this._layers}setLayerZoomRange(d,k,C){this._checkLoaded();const D=this.getLayer(d);D?D.minzoom===k&&D.maxzoom===C||(k!=null&&(D.minzoom=k),C!=null&&(D.maxzoom=C),this._updateLayer(D)):this.fire(new l.ErrorEvent(new Error(`Cannot set the zoom range of non-existing layer "${d}".`)))}setFilter(d,k,C={}){this._checkLoaded();const D=this.getLayer(d);if(D){if(!E(D.filter,k))return k==null?(D.filter=void 0,void this._updateLayer(D)):void(this._validate(l.validateStyle.filter,`layers.${D.id}.filter`,k,null,C)||(D.filter=l.clone$1(k),this._updateLayer(D)))}else this.fire(new l.ErrorEvent(new Error(`Cannot filter non-existing layer "${d}".`)))}getFilter(d){return l.clone$1(this.getLayer(d).filter)}setLayoutProperty(d,k,C,D={}){this._checkLoaded();const q=this.getLayer(d);q?E(q.getLayoutProperty(k),C)||(q.setLayoutProperty(k,C,D),this._updateLayer(q)):this.fire(new l.ErrorEvent(new Error(`Cannot style non-existing layer "${d}".`)))}getLayoutProperty(d,k){const C=this.getLayer(d);if(C)return C.getLayoutProperty(k);this.fire(new l.ErrorEvent(new Error(`Cannot get style of non-existing layer "${d}".`)))}setPaintProperty(d,k,C,D={}){this._checkLoaded();const q=this.getLayer(d);q?E(q.getPaintProperty(k),C)||(q.setPaintProperty(k,C,D)&&this._updateLayer(q),this._changed=!0,this._updatedPaintProps[d]=!0):this.fire(new l.ErrorEvent(new Error(`Cannot style non-existing layer "${d}".`)))}getPaintProperty(d,k){return this.getLayer(d).getPaintProperty(k)}setFeatureState(d,k){this._checkLoaded();const C=d.source,D=d.sourceLayer,q=this.sourceCaches[C];if(q===void 0)return void this.fire(new l.ErrorEvent(new Error(`The source '${C}' does not exist in the map's style.`)));const Y=q.getSource().type;Y==="geojson"&&D?this.fire(new l.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):Y!=="vector"||D?(d.id===void 0&&this.fire(new l.ErrorEvent(new Error("The feature id parameter must be provided."))),q.setFeatureState(D,d.id,k)):this.fire(new l.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(d,k){this._checkLoaded();const C=d.source,D=this.sourceCaches[C];if(D===void 0)return void this.fire(new l.ErrorEvent(new Error(`The source '${C}' does not exist in the map's style.`)));const q=D.getSource().type,Y=q==="vector"?d.sourceLayer:void 0;q!=="vector"||Y?k&&typeof d.id!="string"&&typeof d.id!="number"?this.fire(new l.ErrorEvent(new Error("A feature id is required to remove its specific state property."))):D.removeFeatureState(Y,d.id,k):this.fire(new l.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}getFeatureState(d){this._checkLoaded();const k=d.source,C=d.sourceLayer,D=this.sourceCaches[k];if(D!==void 0)return D.getSource().type!=="vector"||C?(d.id===void 0&&this.fire(new l.ErrorEvent(new Error("The feature id parameter must be provided."))),D.getFeatureState(C,d.id)):void this.fire(new l.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new l.ErrorEvent(new Error(`The source '${k}' does not exist in the map's style.`)))}getTransition(){return l.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){return l.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,sources:l.mapObject(this.sourceCaches,d=>d.serialize()),layers:this._serializeLayers(this._order)},d=>d!==void 0)}_updateLayer(d){this._updatedLayers[d.id]=!0,d.source&&!this._updatedSources[d.source]&&this.sourceCaches[d.source].getSource().type!=="raster"&&(this._updatedSources[d.source]="reload",this.sourceCaches[d.source].pause()),this._changed=!0}_flattenAndSortRenderedFeatures(d){const k=Y=>this._layers[Y].type==="fill-extrusion",C={},D=[];for(let Y=this._order.length-1;Y>=0;Y--){const oe=this._order[Y];if(k(oe)){C[oe]=Y;for(const le of d){const de=le[oe];if(de)for(const Se of de)D.push(Se)}}}D.sort((Y,oe)=>oe.intersectionZ-Y.intersectionZ);const q=[];for(let Y=this._order.length-1;Y>=0;Y--){const oe=this._order[Y];if(k(oe))for(let le=D.length-1;le>=0;le--){const de=D[le].feature;if(C[de.layer.id]<Y)break;q.push(de),D.pop()}else for(const le of d){const de=le[oe];if(de)for(const Se of de)q.push(Se.feature)}}return q}queryRenderedFeatures(d,k,C){k&&k.filter&&this._validate(l.validateStyle.filter,"queryRenderedFeatures.filter",k.filter,null,k);const D={};if(k&&k.layers){if(!Array.isArray(k.layers))return this.fire(new l.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(const Y of k.layers){const oe=this._layers[Y];if(!oe)return this.fire(new l.ErrorEvent(new Error(`The layer '${Y}' does not exist in the map's style and cannot be queried for features.`))),[];D[oe.source]=!0}}const q=[];k.availableImages=this._availableImages;for(const Y in this.sourceCaches)k.layers&&!D[Y]||q.push(Pe(this.sourceCaches[Y],this._layers,this._serializedLayers,d,k,C));return this.placement&&q.push(function(Y,oe,le,de,Se,je,Je){const Et={},mt=je.queryRenderedSymbols(de),wt=[];for(const tr of Object.keys(mt).map(Number))wt.push(Je[tr]);wt.sort(ft);for(const tr of wt){const cr=tr.featureIndex.lookupSymbolFeatures(mt[tr.bucketInstanceId],oe,tr.bucketIndex,tr.sourceLayerIndex,Se.filter,Se.layers,Se.availableImages,Y);for(const Ar in cr){const Dt=Et[Ar]=Et[Ar]||[],Tr=cr[Ar];Tr.sort((Ir,Zr)=>{const Gr=tr.featureSortOrder;if(Gr){const dn=Gr.indexOf(Ir.featureIndex);return Gr.indexOf(Zr.featureIndex)-dn}return Zr.featureIndex-Ir.featureIndex});for(const Ir of Tr)Dt.push(Ir)}}for(const tr in Et)Et[tr].forEach(cr=>{const Ar=cr.feature,Dt=le[Y[tr].source].getFeatureState(Ar.layer["source-layer"],Ar.id);Ar.source=Ar.layer.source,Ar.layer["source-layer"]&&(Ar.sourceLayer=Ar.layer["source-layer"]),Ar.state=Dt});return Et}(this._layers,this._serializedLayers,this.sourceCaches,d,k,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(q)}querySourceFeatures(d,k){k&&k.filter&&this._validate(l.validateStyle.filter,"querySourceFeatures.filter",k.filter,null,k);const C=this.sourceCaches[d];return C?function(D,q){const Y=D.getRenderableIds().map(de=>D.getTileByID(de)),oe=[],le={};for(let de=0;de<Y.length;de++){const Se=Y[de],je=Se.tileID.canonical.key;le[je]||(le[je]=!0,Se.querySourceFeatures(oe,q))}return oe}(C,k):[]}addSourceType(d,k,C){return Jo.getSourceType(d)?C(new Error(`A source type called "${d}" already exists.`)):(Jo.setSourceType(d,k),k.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:d,url:k.workerSourceURL},C):C(null,null))}getLight(){return this.light.getLight()}setLight(d,k={}){this._checkLoaded();const C=this.light.getLight();let D=!1;for(const Y in d)if(!E(d[Y],C[Y])){D=!0;break}if(!D)return;const q={now:l.exported.now(),transition:l.extend({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(d,k),this.light.updateTransitions(q)}_validate(d,k,C,D,q={}){return(!q||q.validate!==!1)&&ro(this,d.call(l.validateStyle,l.extend({key:k,style:this.serialize(),value:C,styleSpec:l.spec},D)))}_remove(){this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),l.evented.off("pluginStateChange",this._rtlTextPluginCallback);for(const d in this._layers)this._layers[d].setEventedParent(null);for(const d in this.sourceCaches){const k=this.sourceCaches[d];k.setEventedParent(null),k.onRemove(this.map)}this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()}_clearSource(d){this.sourceCaches[d].clearTiles()}_reloadSource(d){this.sourceCaches[d].resume(),this.sourceCaches[d].reload()}_updateSources(d){for(const k in this.sourceCaches)this.sourceCaches[k].update(d,this.terrain)}_generateCollisionBoxes(){for(const d in this.sourceCaches)this._reloadSource(d)}_updatePlacement(d,k,C,D,q=!1){let Y=!1,oe=!1;const le={};for(const de of this._order){const Se=this._layers[de];if(Se.type!=="symbol")continue;if(!le[Se.source]){const Je=this.sourceCaches[Se.source];le[Se.source]=Je.getRenderableIds(!0).map(Et=>Je.getTileByID(Et)).sort((Et,mt)=>mt.tileID.overscaledZ-Et.tileID.overscaledZ||(Et.tileID.isLessThan(mt.tileID)?-1:1))}const je=this.crossTileSymbolIndex.addLayer(Se,le[Se.source],d.center.lng);Y=Y||je}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((q=q||this._layerOrderChanged||C===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(l.exported.now(),d.zoom))&&(this.pauseablePlacement=new Fr(d,this.terrain,this._order,q,k,C,D,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,le),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(l.exported.now()),oe=!0),Y&&this.pauseablePlacement.placement.setStale()),oe||Y)for(const de of this._order){const Se=this._layers[de];Se.type==="symbol"&&this.placement.updateLayerOpacities(Se,le[Se.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(l.exported.now())}_releaseSymbolFadeTiles(){for(const d in this.sourceCaches)this.sourceCaches[d].releaseSymbolFadeTiles()}getImages(d,k,C){this.imageManager.getImages(k.icons,C),this._updateTilesForChangedImages();const D=this.sourceCaches[k.source];D&&D.setDependencies(k.tileID.key,k.type,k.icons)}getGlyphs(d,k,C){this.glyphManager.getGlyphs(k.stacks,C)}getResource(d,k,C){return l.makeRequest(k,C)}}Jo.getSourceType=function(M){return xe[M]},Jo.setSourceType=function(M,d){xe[M]=d},Jo.registerForPluginStateChange=l.registerForPluginStateChange;var Vl="attribute vec2 a_pos;uniform mat4 u_matrix;varying vec2 v_texture_pos;varying float v_depth;void main() {v_texture_pos=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos,get_elevation(a_pos),1.0);v_depth=gl_Position.z/gl_Position.w;}";const na={prelude:Ao(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}
#ifdef TERRAIN3D
uniform sampler2D u_terrain;uniform float u_terrain_dim;uniform mat4 u_terrain_matrix;uniform vec4 u_terrain_unpack;uniform float u_terrain_offset;uniform float u_terrain_exaggeration;uniform highp sampler2D u_depth;
#endif
const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitShifts=vec4(1.)/bitSh;highp float unpack(highp vec4 color) {return dot(color,bitShifts);}highp float depthOpacity(vec3 frag) {
#ifdef TERRAIN3D
highp float d=unpack(texture2D(u_depth,frag.xy*0.5+0.5))+0.0001-frag.z;return 1.0-max(0.0,min(1.0,-d*500.0));
#else
return 1.0;
#endif
}float calculate_visibility(vec4 pos) {
#ifdef TERRAIN3D
vec3 frag=pos.xyz/pos.w;highp float d=depthOpacity(frag);if (d > 0.95) return 1.0;return (d+depthOpacity(frag+vec3(0.0,0.01,0.0)))/2.0;
#else
return 1.0;
#endif
}float ele(vec2 pos) {
#ifdef TERRAIN3D
vec4 rgb=(texture2D(u_terrain,pos)*255.0)*u_terrain_unpack;return rgb.r+rgb.g+rgb.b-u_terrain_unpack.a;
#else
return 0.0;
#endif
}float get_elevation(vec2 pos) {
#ifdef TERRAIN3D
vec2 coord=(u_terrain_matrix*vec4(pos,0.0,1.0)).xy*u_terrain_dim+1.0;vec2 f=fract(coord);vec2 c=(floor(coord)+0.5)/(u_terrain_dim+2.0);float d=1.0/(u_terrain_dim+2.0);float tl=ele(c);float tr=ele(c+vec2(d,0.0));float bl=ele(c+vec2(0.0,d));float br=ele(c+vec2(d,d));float elevation=mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);return (elevation+u_terrain_offset)*u_terrain_exaggeration;
#else
return 0.0;
#endif
}`),background:Ao(`uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),backgroundPattern:Ao(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:Ao(`varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);float ele=get_elevation(circle_center);v_visibility=calculate_visibility(u_matrix*vec4(circle_center,ele,1.0));if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,ele,1);} else {gl_Position=u_matrix*vec4(circle_center,ele,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),clippingMask:Ao("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:Ao(`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}`),heatmapTexture:Ao(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:Ao("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,get_elevation(a_pos),1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:Ao("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),debug:Ao("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,get_elevation(a_pos),1);}"),fill:Ao(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_FragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);}`),fillOutline:Ao(`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillOutlinePattern:Ao(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillPattern:Ao(`#ifdef GL_ES
precision highp float;
#endif
uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),fillExtrusion:Ao(`varying vec4 v_color;void main() {gl_FragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;
#ifdef TERRAIN3D
float baseDelta=10.0;float ele=get_elevation(a_centroid);
#else
float baseDelta=0.0;float ele=0.0;
#endif
base=max(0.0,ele+base-baseDelta);height=max(0.0,ele+height);float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),fillExtrusionPattern:Ao(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;
#ifdef TERRAIN3D
float baseDelta=10.0;float ele=get_elevation(a_centroid);
#else
float baseDelta=0.0;float ele=0.0;
#endif
base=max(0.0,ele+base-baseDelta);height=max(0.0,ele+height);float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),hillshadePrepare:Ao(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:Ao(`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;
#define PI 3.141592653589793
void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),line:Ao(`uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),lineGradient:Ao(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),linePattern:Ao(`#ifdef GL_ES
precision highp float;
#endif
uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),lineSDF:Ao(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),raster:Ao(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),symbolIcon:Ao(`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),z,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float visibility=calculate_visibility(projectedPoint);v_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));}`),symbolSDF:Ao(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),z,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),symbolTextAndIcon:Ao(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),z,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`),terrain:Ao("uniform sampler2D u_texture;varying vec2 v_texture_pos;void main() {gl_FragColor=texture2D(u_texture,v_texture_pos);}",Vl),terrainDepth:Ao("varying float v_depth;const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitMsk=vec4(0.,vec3(1./256.0));highp vec4 pack(highp float value) {highp vec4 comp=fract(value*bitSh);comp-=comp.xxyz*bitMsk;return comp;}void main() {gl_FragColor=pack(v_depth);}",Vl),terrainCoords:Ao("precision mediump float;uniform sampler2D u_texture;uniform float u_terrain_coords_id;varying vec2 v_texture_pos;void main() {vec4 rgba=texture2D(u_texture,v_texture_pos);gl_FragColor=vec4(rgba.r,rgba.g,rgba.b,u_terrain_coords_id);}",Vl)};function Ao(M,d){const k=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,C=d.match(/attribute ([\w]+) ([\w]+)/g),D=M.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),q=d.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),Y=q?q.concat(D):D,oe={};return{fragmentSource:M=M.replace(k,(le,de,Se,je,Je)=>(oe[Je]=!0,de==="define"?`
#ifndef HAS_UNIFORM_u_${Je}
varying ${Se} ${je} ${Je};
#else
uniform ${Se} ${je} u_${Je};
#endif
`:`
#ifdef HAS_UNIFORM_u_${Je}
    ${Se} ${je} ${Je} = u_${Je};
#endif
`)),vertexSource:d=d.replace(k,(le,de,Se,je,Je)=>{const Et=je==="float"?"vec2":"vec4",mt=Je.match(/color/)?"color":Et;return oe[Je]?de==="define"?`
#ifndef HAS_UNIFORM_u_${Je}
uniform lowp float u_${Je}_t;
attribute ${Se} ${Et} a_${Je};
varying ${Se} ${je} ${Je};
#else
uniform ${Se} ${je} u_${Je};
#endif
`:mt==="vec4"?`
#ifndef HAS_UNIFORM_u_${Je}
    ${Je} = a_${Je};
#else
    ${Se} ${je} ${Je} = u_${Je};
#endif
`:`
#ifndef HAS_UNIFORM_u_${Je}
    ${Je} = unpack_mix_${mt}(a_${Je}, u_${Je}_t);
#else
    ${Se} ${je} ${Je} = u_${Je};
#endif
`:de==="define"?`
#ifndef HAS_UNIFORM_u_${Je}
uniform lowp float u_${Je}_t;
attribute ${Se} ${Et} a_${Je};
#else
uniform ${Se} ${je} u_${Je};
#endif
`:mt==="vec4"?`
#ifndef HAS_UNIFORM_u_${Je}
    ${Se} ${je} ${Je} = a_${Je};
#else
    ${Se} ${je} ${Je} = u_${Je};
#endif
`:`
#ifndef HAS_UNIFORM_u_${Je}
    ${Se} ${je} ${Je} = unpack_mix_${mt}(a_${Je}, u_${Je}_t);
#else
    ${Se} ${je} ${Je} = u_${Je};
#endif
`}),staticAttributes:C,staticUniforms:Y}}class ml{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(d,k,C,D,q,Y,oe,le,de){this.context=d;let Se=this.boundPaintVertexBuffers.length!==D.length;for(let je=0;!Se&&je<D.length;je++)this.boundPaintVertexBuffers[je]!==D[je]&&(Se=!0);d.extVertexArrayObject&&this.vao&&this.boundProgram===k&&this.boundLayoutVertexBuffer===C&&!Se&&this.boundIndexBuffer===q&&this.boundVertexOffset===Y&&this.boundDynamicVertexBuffer===oe&&this.boundDynamicVertexBuffer2===le&&this.boundDynamicVertexBuffer3===de?(d.bindVertexArrayOES.set(this.vao),oe&&oe.bind(),q&&q.dynamicDraw&&q.bind(),le&&le.bind(),de&&de.bind()):this.freshBind(k,C,D,q,Y,oe,le,de)}freshBind(d,k,C,D,q,Y,oe,le){let de;const Se=d.numAttributes,je=this.context,Je=je.gl;if(je.extVertexArrayObject)this.vao&&this.destroy(),this.vao=je.extVertexArrayObject.createVertexArrayOES(),je.bindVertexArrayOES.set(this.vao),de=0,this.boundProgram=d,this.boundLayoutVertexBuffer=k,this.boundPaintVertexBuffers=C,this.boundIndexBuffer=D,this.boundVertexOffset=q,this.boundDynamicVertexBuffer=Y,this.boundDynamicVertexBuffer2=oe,this.boundDynamicVertexBuffer3=le;else{de=je.currentNumAttributes||0;for(let Et=Se;Et<de;Et++)Je.disableVertexAttribArray(Et)}k.enableAttributes(Je,d);for(const Et of C)Et.enableAttributes(Je,d);Y&&Y.enableAttributes(Je,d),oe&&oe.enableAttributes(Je,d),le&&le.enableAttributes(Je,d),k.bind(),k.setVertexAttribPointers(Je,d,q);for(const Et of C)Et.bind(),Et.setVertexAttribPointers(Je,d,q);Y&&(Y.bind(),Y.setVertexAttribPointers(Je,d,q)),D&&D.bind(),oe&&(oe.bind(),oe.setVertexAttribPointers(Je,d,q)),le&&(le.bind(),le.setVertexAttribPointers(Je,d,q)),je.currentNumAttributes=Se}destroy(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)}}function gl(M){const d=[];for(let k=0;k<M.length;k++){if(M[k]===null)continue;const C=M[k].split(" ");d.push(C.pop())}return d}class gs{constructor(d,k,C,D,q,Y,oe){const le=d.gl;this.program=le.createProgram();const de=gl(C.staticAttributes),Se=D?D.getBinderAttributes():[],je=de.concat(Se),Je=na.prelude.staticUniforms?gl(na.prelude.staticUniforms):[],Et=C.staticUniforms?gl(C.staticUniforms):[],mt=D?D.getBinderUniforms():[],wt=Je.concat(Et).concat(mt),tr=[];for(const Gr of wt)tr.indexOf(Gr)<0&&tr.push(Gr);const cr=D?D.defines():[];Y&&cr.push("#define OVERDRAW_INSPECTOR;"),oe&&cr.push("#define TERRAIN3D;");const Ar=cr.concat(na.prelude.fragmentSource,C.fragmentSource).join(`
`),Dt=cr.concat(na.prelude.vertexSource,C.vertexSource).join(`
`),Tr=le.createShader(le.FRAGMENT_SHADER);if(le.isContextLost())return void(this.failedToCreate=!0);le.shaderSource(Tr,Ar),le.compileShader(Tr),le.attachShader(this.program,Tr);const Ir=le.createShader(le.VERTEX_SHADER);if(le.isContextLost())return void(this.failedToCreate=!0);le.shaderSource(Ir,Dt),le.compileShader(Ir),le.attachShader(this.program,Ir),this.attributes={};const Zr={};this.numAttributes=je.length;for(let Gr=0;Gr<this.numAttributes;Gr++)je[Gr]&&(le.bindAttribLocation(this.program,Gr,je[Gr]),this.attributes[je[Gr]]=Gr);le.linkProgram(this.program),le.deleteShader(Ir),le.deleteShader(Tr);for(let Gr=0;Gr<tr.length;Gr++){const dn=tr[Gr];if(dn&&!Zr[dn]){const qr=le.getUniformLocation(this.program,dn);qr&&(Zr[dn]=qr)}}this.fixedUniforms=q(d,Zr),this.terrainUniforms=((Gr,dn)=>({u_depth:new l.Uniform1i(Gr,dn.u_depth),u_terrain:new l.Uniform1i(Gr,dn.u_terrain),u_terrain_dim:new l.Uniform1f(Gr,dn.u_terrain_dim),u_terrain_matrix:new l.UniformMatrix4f(Gr,dn.u_terrain_matrix),u_terrain_unpack:new l.Uniform4f(Gr,dn.u_terrain_unpack),u_terrain_offset:new l.Uniform1f(Gr,dn.u_terrain_offset),u_terrain_exaggeration:new l.Uniform1f(Gr,dn.u_terrain_exaggeration)}))(d,Zr),this.binderUniforms=D?D.getUniforms(d,Zr):[]}draw(d,k,C,D,q,Y,oe,le,de,Se,je,Je,Et,mt,wt,tr,cr,Ar){const Dt=d.gl;if(this.failedToCreate)return;if(d.program.set(this.program),d.setDepthMode(C),d.setStencilMode(D),d.setColorMode(q),d.setCullFace(Y),le){d.activeTexture.set(Dt.TEXTURE2),Dt.bindTexture(Dt.TEXTURE_2D,le.depthTexture),d.activeTexture.set(Dt.TEXTURE3),Dt.bindTexture(Dt.TEXTURE_2D,le.texture);for(const Ir in this.terrainUniforms)this.terrainUniforms[Ir].set(le[Ir])}for(const Ir in this.fixedUniforms)this.fixedUniforms[Ir].set(oe[Ir]);wt&&wt.setUniforms(d,this.binderUniforms,Et,{zoom:mt});let Tr=0;switch(k){case Dt.LINES:Tr=2;break;case Dt.TRIANGLES:Tr=3;break;case Dt.LINE_STRIP:Tr=1}for(const Ir of Je.get()){const Zr=Ir.vaos||(Ir.vaos={});(Zr[de]||(Zr[de]=new ml)).bind(d,this,Se,wt?wt.getPaintVertexBuffers():[],je,Ir.vertexOffset,tr,cr,Ar),Dt.drawElements(k,Ir.primitiveLength*Tr,Dt.UNSIGNED_SHORT,Ir.primitiveOffset*Tr*2)}}}function $l(M,d,k){const C=1/yo(k,1,d.transform.tileZoom),D=Math.pow(2,k.tileID.overscaledZ),q=k.tileSize*Math.pow(2,d.transform.tileZoom)/D,Y=q*(k.tileID.canonical.x+k.tileID.wrap*D),oe=q*k.tileID.canonical.y;return{u_image:0,u_texsize:k.imageAtlasTexture.size,u_scale:[C,M.fromScale,M.toScale],u_fade:M.t,u_pixel_coord_upper:[Y>>16,oe>>16],u_pixel_coord_lower:[65535&Y,65535&oe]}}const ys=(M,d,k,C)=>{const D=d.style.light,q=D.properties.get("position"),Y=[q.x,q.y,q.z],oe=l.create$1();D.properties.get("anchor")==="viewport"&&l.fromRotation(oe,-d.transform.angle),l.transformMat3(Y,Y,oe);const le=D.properties.get("color");return{u_matrix:M,u_lightpos:Y,u_lightintensity:D.properties.get("intensity"),u_lightcolor:[le.r,le.g,le.b],u_vertical_gradient:+k,u_opacity:C}},Uu=(M,d,k,C,D,q,Y)=>l.extend(ys(M,d,k,C),$l(q,d,Y),{u_height_factor:-Math.pow(2,D.overscaledZ)/Y.tileSize/8}),$a=M=>({u_matrix:M}),yl=(M,d,k,C)=>l.extend($a(M),$l(k,d,C)),Gl=(M,d)=>({u_matrix:M,u_world:d}),qu=(M,d,k,C,D)=>l.extend(yl(M,d,k,C),{u_world:D}),Vu=(M,d,k,C)=>{const D=M.transform;let q,Y;if(C.paint.get("circle-pitch-alignment")==="map"){const oe=yo(k,1,D.zoom);q=!0,Y=[oe,oe]}else q=!1,Y=D.pixelsToGLUnits;return{u_camera_to_center_distance:D.cameraToCenterDistance,u_scale_with_map:+(C.paint.get("circle-pitch-scale")==="map"),u_matrix:M.translatePosMatrix(d.posMatrix,k,C.paint.get("circle-translate"),C.paint.get("circle-translate-anchor")),u_pitch_with_map:+q,u_device_pixel_ratio:M.pixelRatio,u_extrude_scale:Y}},tl=(M,d,k)=>{const C=yo(k,1,d.zoom),D=Math.pow(2,d.zoom-k.tileID.overscaledZ),q=k.tileID.overscaleFactor();return{u_matrix:M,u_camera_to_center_distance:d.cameraToCenterDistance,u_pixels_to_tile_units:C,u_extrude_scale:[d.pixelsToGLUnits[0]/(C*D),d.pixelsToGLUnits[1]/(C*D)],u_overscale_factor:q}},us=(M,d,k=1)=>({u_matrix:M,u_color:d,u_overlay:0,u_overlay_scale:k}),Ps=M=>({u_matrix:M}),vl=(M,d,k,C)=>({u_matrix:M,u_extrude_scale:yo(d,1,k),u_intensity:C});function du(M,d){const k=Math.pow(2,d.canonical.z),C=d.canonical.y;return[new l.MercatorCoordinate(0,C/k).toLngLat().lat,new l.MercatorCoordinate(0,(C+1)/k).toLngLat().lat]}const _l=(M,d,k,C)=>{const D=M.transform;return{u_matrix:rl(M,d,k,C),u_ratio:1/yo(d,1,D.zoom),u_device_pixel_ratio:M.pixelRatio,u_units_to_pixels:[1/D.pixelsToGLUnits[0],1/D.pixelsToGLUnits[1]]}},mu=(M,d,k,C,D)=>l.extend(_l(M,d,k,D),{u_image:0,u_image_height:C}),vs=(M,d,k,C,D)=>{const q=M.transform,Y=Ro(d,q);return{u_matrix:rl(M,d,k,D),u_texsize:d.imageAtlasTexture.size,u_ratio:1/yo(d,1,q.zoom),u_device_pixel_ratio:M.pixelRatio,u_image:0,u_scale:[Y,C.fromScale,C.toScale],u_fade:C.t,u_units_to_pixels:[1/q.pixelsToGLUnits[0],1/q.pixelsToGLUnits[1]]}},_s=(M,d,k,C,D,q)=>{const Y=M.lineAtlas,oe=Ro(d,M.transform),le=k.layout.get("line-cap")==="round",de=Y.getDash(C.from,le),Se=Y.getDash(C.to,le),je=de.width*D.fromScale,Je=Se.width*D.toScale;return l.extend(_l(M,d,k,q),{u_patternscale_a:[oe/je,-de.height/2],u_patternscale_b:[oe/Je,-Se.height/2],u_sdfgamma:Y.width/(256*Math.min(je,Je)*M.pixelRatio)/2,u_image:0,u_tex_y_a:de.y,u_tex_y_b:Se.y,u_mix:D.t})};function Ro(M,d){return 1/yo(M,1,d.tileZoom)}function rl(M,d,k,C){return M.translatePosMatrix(C?C.posMatrix:d.tileID.posMatrix,d,k.paint.get("line-translate"),k.paint.get("line-translate-anchor"))}const R=(M,d,k,C,D)=>{return{u_matrix:M,u_tl_parent:d,u_scale_parent:k,u_buffer_scale:1,u_fade_t:C.mix,u_opacity:C.opacity*D.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:D.paint.get("raster-brightness-min"),u_brightness_high:D.paint.get("raster-brightness-max"),u_saturation_factor:(Y=D.paint.get("raster-saturation"),Y>0?1-1/(1.001-Y):-Y),u_contrast_factor:(q=D.paint.get("raster-contrast"),q>0?1/(1-q):1+q),u_spin_weights:W(D.paint.get("raster-hue-rotate"))};var q,Y};function W(M){M*=Math.PI/180;const d=Math.sin(M),k=Math.cos(M);return[(2*k+1)/3,(-Math.sqrt(3)*d-k+1)/3,(Math.sqrt(3)*d-k+1)/3]}const ae=(M,d,k,C,D,q,Y,oe,le,de)=>{const Se=D.transform;return{u_is_size_zoom_constant:+(M==="constant"||M==="source"),u_is_size_feature_constant:+(M==="constant"||M==="camera"),u_size_t:d?d.uSizeT:0,u_size:d?d.uSize:0,u_camera_to_center_distance:Se.cameraToCenterDistance,u_pitch:Se.pitch/360*2*Math.PI,u_rotate_symbol:+k,u_aspect_ratio:Se.width/Se.height,u_fade_change:D.options.fadeDuration?D.symbolFadeChange:1,u_matrix:q,u_label_plane_matrix:Y,u_coord_matrix:oe,u_is_text:+le,u_pitch_with_map:+C,u_texsize:de,u_texture:0}},ke=(M,d,k,C,D,q,Y,oe,le,de,Se)=>{const je=D.transform;return l.extend(ae(M,d,k,C,D,q,Y,oe,le,de),{u_gamma_scale:C?Math.cos(je._pitch)*je.cameraToCenterDistance:1,u_device_pixel_ratio:D.pixelRatio,u_is_halo:+Se})},Ye=(M,d,k,C,D,q,Y,oe,le,de)=>l.extend(ke(M,d,k,C,D,q,Y,oe,!0,le,!0),{u_texsize_icon:de,u_texture_icon:1}),dt=(M,d,k)=>({u_matrix:M,u_opacity:d,u_color:k}),Mt=(M,d,k,C,D,q)=>l.extend(function(Y,oe,le,de){const Se=le.imageManager.getPattern(Y.from.toString()),je=le.imageManager.getPattern(Y.to.toString()),{width:Je,height:Et}=le.imageManager.getPixelSize(),mt=Math.pow(2,de.tileID.overscaledZ),wt=de.tileSize*Math.pow(2,le.transform.tileZoom)/mt,tr=wt*(de.tileID.canonical.x+de.tileID.wrap*mt),cr=wt*de.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:Se.tl,u_pattern_br_a:Se.br,u_pattern_tl_b:je.tl,u_pattern_br_b:je.br,u_texsize:[Je,Et],u_mix:oe.t,u_pattern_size_a:Se.displaySize,u_pattern_size_b:je.displaySize,u_scale_a:oe.fromScale,u_scale_b:oe.toScale,u_tile_units_to_pixels:1/yo(de,1,le.transform.tileZoom),u_pixel_coord_upper:[tr>>16,cr>>16],u_pixel_coord_lower:[65535&tr,65535&cr]}}(C,q,k,D),{u_matrix:M,u_opacity:d}),Tt={fillExtrusion:(M,d)=>({u_matrix:new l.UniformMatrix4f(M,d.u_matrix),u_lightpos:new l.Uniform3f(M,d.u_lightpos),u_lightintensity:new l.Uniform1f(M,d.u_lightintensity),u_lightcolor:new l.Uniform3f(M,d.u_lightcolor),u_vertical_gradient:new l.Uniform1f(M,d.u_vertical_gradient),u_opacity:new l.Uniform1f(M,d.u_opacity)}),fillExtrusionPattern:(M,d)=>({u_matrix:new l.UniformMatrix4f(M,d.u_matrix),u_lightpos:new l.Uniform3f(M,d.u_lightpos),u_lightintensity:new l.Uniform1f(M,d.u_lightintensity),u_lightcolor:new l.Uniform3f(M,d.u_lightcolor),u_vertical_gradient:new l.Uniform1f(M,d.u_vertical_gradient),u_height_factor:new l.Uniform1f(M,d.u_height_factor),u_image:new l.Uniform1i(M,d.u_image),u_texsize:new l.Uniform2f(M,d.u_texsize),u_pixel_coord_upper:new l.Uniform2f(M,d.u_pixel_coord_upper),u_pixel_coord_lower:new l.Uniform2f(M,d.u_pixel_coord_lower),u_scale:new l.Uniform3f(M,d.u_scale),u_fade:new l.Uniform1f(M,d.u_fade),u_opacity:new l.Uniform1f(M,d.u_opacity)}),fill:(M,d)=>({u_matrix:new l.UniformMatrix4f(M,d.u_matrix)}),fillPattern:(M,d)=>({u_matrix:new l.UniformMatrix4f(M,d.u_matrix),u_image:new l.Uniform1i(M,d.u_image),u_texsize:new l.Uniform2f(M,d.u_texsize),u_pixel_coord_upper:new l.Uniform2f(M,d.u_pixel_coord_upper),u_pixel_coord_lower:new l.Uniform2f(M,d.u_pixel_coord_lower),u_scale:new l.Uniform3f(M,d.u_scale),u_fade:new l.Uniform1f(M,d.u_fade)}),fillOutline:(M,d)=>({u_matrix:new l.UniformMatrix4f(M,d.u_matrix),u_world:new l.Uniform2f(M,d.u_world)}),fillOutlinePattern:(M,d)=>({u_matrix:new l.UniformMatrix4f(M,d.u_matrix),u_world:new l.Uniform2f(M,d.u_world),u_image:new l.Uniform1i(M,d.u_image),u_texsize:new l.Uniform2f(M,d.u_texsize),u_pixel_coord_upper:new l.Uniform2f(M,d.u_pixel_coord_upper),u_pixel_coord_lower:new l.Uniform2f(M,d.u_pixel_coord_lower),u_scale:new l.Uniform3f(M,d.u_scale),u_fade:new l.Uniform1f(M,d.u_fade)}),circle:(M,d)=>({u_camera_to_center_distance:new l.Uniform1f(M,d.u_camera_to_center_distance),u_scale_with_map:new l.Uniform1i(M,d.u_scale_with_map),u_pitch_with_map:new l.Uniform1i(M,d.u_pitch_with_map),u_extrude_scale:new l.Uniform2f(M,d.u_extrude_scale),u_device_pixel_ratio:new l.Uniform1f(M,d.u_device_pixel_ratio),u_matrix:new l.UniformMatrix4f(M,d.u_matrix)}),collisionBox:(M,d)=>({u_matrix:new l.UniformMatrix4f(M,d.u_matrix),u_camera_to_center_distance:new l.Uniform1f(M,d.u_camera_to_center_distance),u_pixels_to_tile_units:new l.Uniform1f(M,d.u_pixels_to_tile_units),u_extrude_scale:new l.Uniform2f(M,d.u_extrude_scale),u_overscale_factor:new l.Uniform1f(M,d.u_overscale_factor)}),collisionCircle:(M,d)=>({u_matrix:new l.UniformMatrix4f(M,d.u_matrix),u_inv_matrix:new l.UniformMatrix4f(M,d.u_inv_matrix),u_camera_to_center_distance:new l.Uniform1f(M,d.u_camera_to_center_distance),u_viewport_size:new l.Uniform2f(M,d.u_viewport_size)}),debug:(M,d)=>({u_color:new l.UniformColor(M,d.u_color),u_matrix:new l.UniformMatrix4f(M,d.u_matrix),u_overlay:new l.Uniform1i(M,d.u_overlay),u_overlay_scale:new l.Uniform1f(M,d.u_overlay_scale)}),clippingMask:(M,d)=>({u_matrix:new l.UniformMatrix4f(M,d.u_matrix)}),heatmap:(M,d)=>({u_extrude_scale:new l.Uniform1f(M,d.u_extrude_scale),u_intensity:new l.Uniform1f(M,d.u_intensity),u_matrix:new l.UniformMatrix4f(M,d.u_matrix)}),heatmapTexture:(M,d)=>({u_matrix:new l.UniformMatrix4f(M,d.u_matrix),u_world:new l.Uniform2f(M,d.u_world),u_image:new l.Uniform1i(M,d.u_image),u_color_ramp:new l.Uniform1i(M,d.u_color_ramp),u_opacity:new l.Uniform1f(M,d.u_opacity)}),hillshade:(M,d)=>({u_matrix:new l.UniformMatrix4f(M,d.u_matrix),u_image:new l.Uniform1i(M,d.u_image),u_latrange:new l.Uniform2f(M,d.u_latrange),u_light:new l.Uniform2f(M,d.u_light),u_shadow:new l.UniformColor(M,d.u_shadow),u_highlight:new l.UniformColor(M,d.u_highlight),u_accent:new l.UniformColor(M,d.u_accent)}),hillshadePrepare:(M,d)=>({u_matrix:new l.UniformMatrix4f(M,d.u_matrix),u_image:new l.Uniform1i(M,d.u_image),u_dimension:new l.Uniform2f(M,d.u_dimension),u_zoom:new l.Uniform1f(M,d.u_zoom),u_unpack:new l.Uniform4f(M,d.u_unpack)}),line:(M,d)=>({u_matrix:new l.UniformMatrix4f(M,d.u_matrix),u_ratio:new l.Uniform1f(M,d.u_ratio),u_device_pixel_ratio:new l.Uniform1f(M,d.u_device_pixel_ratio),u_units_to_pixels:new l.Uniform2f(M,d.u_units_to_pixels)}),lineGradient:(M,d)=>({u_matrix:new l.UniformMatrix4f(M,d.u_matrix),u_ratio:new l.Uniform1f(M,d.u_ratio),u_device_pixel_ratio:new l.Uniform1f(M,d.u_device_pixel_ratio),u_units_to_pixels:new l.Uniform2f(M,d.u_units_to_pixels),u_image:new l.Uniform1i(M,d.u_image),u_image_height:new l.Uniform1f(M,d.u_image_height)}),linePattern:(M,d)=>({u_matrix:new l.UniformMatrix4f(M,d.u_matrix),u_texsize:new l.Uniform2f(M,d.u_texsize),u_ratio:new l.Uniform1f(M,d.u_ratio),u_device_pixel_ratio:new l.Uniform1f(M,d.u_device_pixel_ratio),u_image:new l.Uniform1i(M,d.u_image),u_units_to_pixels:new l.Uniform2f(M,d.u_units_to_pixels),u_scale:new l.Uniform3f(M,d.u_scale),u_fade:new l.Uniform1f(M,d.u_fade)}),lineSDF:(M,d)=>({u_matrix:new l.UniformMatrix4f(M,d.u_matrix),u_ratio:new l.Uniform1f(M,d.u_ratio),u_device_pixel_ratio:new l.Uniform1f(M,d.u_device_pixel_ratio),u_units_to_pixels:new l.Uniform2f(M,d.u_units_to_pixels),u_patternscale_a:new l.Uniform2f(M,d.u_patternscale_a),u_patternscale_b:new l.Uniform2f(M,d.u_patternscale_b),u_sdfgamma:new l.Uniform1f(M,d.u_sdfgamma),u_image:new l.Uniform1i(M,d.u_image),u_tex_y_a:new l.Uniform1f(M,d.u_tex_y_a),u_tex_y_b:new l.Uniform1f(M,d.u_tex_y_b),u_mix:new l.Uniform1f(M,d.u_mix)}),raster:(M,d)=>({u_matrix:new l.UniformMatrix4f(M,d.u_matrix),u_tl_parent:new l.Uniform2f(M,d.u_tl_parent),u_scale_parent:new l.Uniform1f(M,d.u_scale_parent),u_buffer_scale:new l.Uniform1f(M,d.u_buffer_scale),u_fade_t:new l.Uniform1f(M,d.u_fade_t),u_opacity:new l.Uniform1f(M,d.u_opacity),u_image0:new l.Uniform1i(M,d.u_image0),u_image1:new l.Uniform1i(M,d.u_image1),u_brightness_low:new l.Uniform1f(M,d.u_brightness_low),u_brightness_high:new l.Uniform1f(M,d.u_brightness_high),u_saturation_factor:new l.Uniform1f(M,d.u_saturation_factor),u_contrast_factor:new l.Uniform1f(M,d.u_contrast_factor),u_spin_weights:new l.Uniform3f(M,d.u_spin_weights)}),symbolIcon:(M,d)=>({u_is_size_zoom_constant:new l.Uniform1i(M,d.u_is_size_zoom_constant),u_is_size_feature_constant:new l.Uniform1i(M,d.u_is_size_feature_constant),u_size_t:new l.Uniform1f(M,d.u_size_t),u_size:new l.Uniform1f(M,d.u_size),u_camera_to_center_distance:new l.Uniform1f(M,d.u_camera_to_center_distance),u_pitch:new l.Uniform1f(M,d.u_pitch),u_rotate_symbol:new l.Uniform1i(M,d.u_rotate_symbol),u_aspect_ratio:new l.Uniform1f(M,d.u_aspect_ratio),u_fade_change:new l.Uniform1f(M,d.u_fade_change),u_matrix:new l.UniformMatrix4f(M,d.u_matrix),u_label_plane_matrix:new l.UniformMatrix4f(M,d.u_label_plane_matrix),u_coord_matrix:new l.UniformMatrix4f(M,d.u_coord_matrix),u_is_text:new l.Uniform1i(M,d.u_is_text),u_pitch_with_map:new l.Uniform1i(M,d.u_pitch_with_map),u_texsize:new l.Uniform2f(M,d.u_texsize),u_texture:new l.Uniform1i(M,d.u_texture)}),symbolSDF:(M,d)=>({u_is_size_zoom_constant:new l.Uniform1i(M,d.u_is_size_zoom_constant),u_is_size_feature_constant:new l.Uniform1i(M,d.u_is_size_feature_constant),u_size_t:new l.Uniform1f(M,d.u_size_t),u_size:new l.Uniform1f(M,d.u_size),u_camera_to_center_distance:new l.Uniform1f(M,d.u_camera_to_center_distance),u_pitch:new l.Uniform1f(M,d.u_pitch),u_rotate_symbol:new l.Uniform1i(M,d.u_rotate_symbol),u_aspect_ratio:new l.Uniform1f(M,d.u_aspect_ratio),u_fade_change:new l.Uniform1f(M,d.u_fade_change),u_matrix:new l.UniformMatrix4f(M,d.u_matrix),u_label_plane_matrix:new l.UniformMatrix4f(M,d.u_label_plane_matrix),u_coord_matrix:new l.UniformMatrix4f(M,d.u_coord_matrix),u_is_text:new l.Uniform1i(M,d.u_is_text),u_pitch_with_map:new l.Uniform1i(M,d.u_pitch_with_map),u_texsize:new l.Uniform2f(M,d.u_texsize),u_texture:new l.Uniform1i(M,d.u_texture),u_gamma_scale:new l.Uniform1f(M,d.u_gamma_scale),u_device_pixel_ratio:new l.Uniform1f(M,d.u_device_pixel_ratio),u_is_halo:new l.Uniform1i(M,d.u_is_halo)}),symbolTextAndIcon:(M,d)=>({u_is_size_zoom_constant:new l.Uniform1i(M,d.u_is_size_zoom_constant),u_is_size_feature_constant:new l.Uniform1i(M,d.u_is_size_feature_constant),u_size_t:new l.Uniform1f(M,d.u_size_t),u_size:new l.Uniform1f(M,d.u_size),u_camera_to_center_distance:new l.Uniform1f(M,d.u_camera_to_center_distance),u_pitch:new l.Uniform1f(M,d.u_pitch),u_rotate_symbol:new l.Uniform1i(M,d.u_rotate_symbol),u_aspect_ratio:new l.Uniform1f(M,d.u_aspect_ratio),u_fade_change:new l.Uniform1f(M,d.u_fade_change),u_matrix:new l.UniformMatrix4f(M,d.u_matrix),u_label_plane_matrix:new l.UniformMatrix4f(M,d.u_label_plane_matrix),u_coord_matrix:new l.UniformMatrix4f(M,d.u_coord_matrix),u_is_text:new l.Uniform1i(M,d.u_is_text),u_pitch_with_map:new l.Uniform1i(M,d.u_pitch_with_map),u_texsize:new l.Uniform2f(M,d.u_texsize),u_texsize_icon:new l.Uniform2f(M,d.u_texsize_icon),u_texture:new l.Uniform1i(M,d.u_texture),u_texture_icon:new l.Uniform1i(M,d.u_texture_icon),u_gamma_scale:new l.Uniform1f(M,d.u_gamma_scale),u_device_pixel_ratio:new l.Uniform1f(M,d.u_device_pixel_ratio),u_is_halo:new l.Uniform1i(M,d.u_is_halo)}),background:(M,d)=>({u_matrix:new l.UniformMatrix4f(M,d.u_matrix),u_opacity:new l.Uniform1f(M,d.u_opacity),u_color:new l.UniformColor(M,d.u_color)}),backgroundPattern:(M,d)=>({u_matrix:new l.UniformMatrix4f(M,d.u_matrix),u_opacity:new l.Uniform1f(M,d.u_opacity),u_image:new l.Uniform1i(M,d.u_image),u_pattern_tl_a:new l.Uniform2f(M,d.u_pattern_tl_a),u_pattern_br_a:new l.Uniform2f(M,d.u_pattern_br_a),u_pattern_tl_b:new l.Uniform2f(M,d.u_pattern_tl_b),u_pattern_br_b:new l.Uniform2f(M,d.u_pattern_br_b),u_texsize:new l.Uniform2f(M,d.u_texsize),u_mix:new l.Uniform1f(M,d.u_mix),u_pattern_size_a:new l.Uniform2f(M,d.u_pattern_size_a),u_pattern_size_b:new l.Uniform2f(M,d.u_pattern_size_b),u_scale_a:new l.Uniform1f(M,d.u_scale_a),u_scale_b:new l.Uniform1f(M,d.u_scale_b),u_pixel_coord_upper:new l.Uniform2f(M,d.u_pixel_coord_upper),u_pixel_coord_lower:new l.Uniform2f(M,d.u_pixel_coord_lower),u_tile_units_to_pixels:new l.Uniform1f(M,d.u_tile_units_to_pixels)}),terrain:(M,d)=>({u_matrix:new l.UniformMatrix4f(M,d.u_matrix),u_texture:new l.Uniform1i(M,d.u_texture)}),terrainDepth:(M,d)=>({u_matrix:new l.UniformMatrix4f(M,d.u_matrix)}),terrainCoords:(M,d)=>({u_matrix:new l.UniformMatrix4f(M,d.u_matrix),u_texture:new l.Uniform1i(M,d.u_texture),u_terrain_coords_id:new l.Uniform1f(M,d.u_terrain_coords_id)})};class wr{constructor(d,k,C){this.context=d;const D=d.gl;this.buffer=D.createBuffer(),this.dynamicDraw=Boolean(C),this.context.unbindVAO(),d.bindElementBuffer.set(this.buffer),D.bufferData(D.ELEMENT_ARRAY_BUFFER,k.arrayBuffer,this.dynamicDraw?D.DYNAMIC_DRAW:D.STATIC_DRAW),this.dynamicDraw||delete k.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(d){const k=this.context.gl;if(!this.dynamicDraw)throw new Error("Attempted to update data while not in dynamic mode.");this.context.unbindVAO(),this.bind(),k.bufferSubData(k.ELEMENT_ARRAY_BUFFER,0,d.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const pr={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class vr{constructor(d,k,C,D){this.length=k.length,this.attributes=C,this.itemSize=k.bytesPerElement,this.dynamicDraw=D,this.context=d;const q=d.gl;this.buffer=q.createBuffer(),d.bindVertexBuffer.set(this.buffer),q.bufferData(q.ARRAY_BUFFER,k.arrayBuffer,this.dynamicDraw?q.DYNAMIC_DRAW:q.STATIC_DRAW),this.dynamicDraw||delete k.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(d){if(d.length!==this.length)throw new Error(`Length of new data is ${d.length}, which doesn't match current length of ${this.length}`);const k=this.context.gl;this.bind(),k.bufferSubData(k.ARRAY_BUFFER,0,d.arrayBuffer)}enableAttributes(d,k){for(let C=0;C<this.attributes.length;C++){const D=k.attributes[this.attributes[C].name];D!==void 0&&d.enableVertexAttribArray(D)}}setVertexAttribPointers(d,k,C){for(let D=0;D<this.attributes.length;D++){const q=this.attributes[D],Y=k.attributes[q.name];Y!==void 0&&d.vertexAttribPointer(Y,q.components,d[pr[q.type]],!1,this.itemSize,q.offset+this.itemSize*(C||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}class ar{constructor(d){this.gl=d.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(d){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class $r extends ar{getDefault(){return l.Color.transparent}set(d){const k=this.current;(d.r!==k.r||d.g!==k.g||d.b!==k.b||d.a!==k.a||this.dirty)&&(this.gl.clearColor(d.r,d.g,d.b,d.a),this.current=d,this.dirty=!1)}}class cn extends ar{getDefault(){return 1}set(d){(d!==this.current||this.dirty)&&(this.gl.clearDepth(d),this.current=d,this.dirty=!1)}}class In extends ar{getDefault(){return 0}set(d){(d!==this.current||this.dirty)&&(this.gl.clearStencil(d),this.current=d,this.dirty=!1)}}class et extends ar{getDefault(){return[!0,!0,!0,!0]}set(d){const k=this.current;(d[0]!==k[0]||d[1]!==k[1]||d[2]!==k[2]||d[3]!==k[3]||this.dirty)&&(this.gl.colorMask(d[0],d[1],d[2],d[3]),this.current=d,this.dirty=!1)}}class m extends ar{getDefault(){return!0}set(d){(d!==this.current||this.dirty)&&(this.gl.depthMask(d),this.current=d,this.dirty=!1)}}class Pr extends ar{getDefault(){return 255}set(d){(d!==this.current||this.dirty)&&(this.gl.stencilMask(d),this.current=d,this.dirty=!1)}}class f extends ar{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(d){const k=this.current;(d.func!==k.func||d.ref!==k.ref||d.mask!==k.mask||this.dirty)&&(this.gl.stencilFunc(d.func,d.ref,d.mask),this.current=d,this.dirty=!1)}}class L extends ar{getDefault(){const d=this.gl;return[d.KEEP,d.KEEP,d.KEEP]}set(d){const k=this.current;(d[0]!==k[0]||d[1]!==k[1]||d[2]!==k[2]||this.dirty)&&(this.gl.stencilOp(d[0],d[1],d[2]),this.current=d,this.dirty=!1)}}class kn extends ar{getDefault(){return!1}set(d){if(d===this.current&&!this.dirty)return;const k=this.gl;d?k.enable(k.STENCIL_TEST):k.disable(k.STENCIL_TEST),this.current=d,this.dirty=!1}}class ii extends ar{getDefault(){return[0,1]}set(d){const k=this.current;(d[0]!==k[0]||d[1]!==k[1]||this.dirty)&&(this.gl.depthRange(d[0],d[1]),this.current=d,this.dirty=!1)}}class To extends ar{getDefault(){return!1}set(d){if(d===this.current&&!this.dirty)return;const k=this.gl;d?k.enable(k.DEPTH_TEST):k.disable(k.DEPTH_TEST),this.current=d,this.dirty=!1}}class J extends ar{getDefault(){return this.gl.LESS}set(d){(d!==this.current||this.dirty)&&(this.gl.depthFunc(d),this.current=d,this.dirty=!1)}}class Ri extends ar{getDefault(){return!1}set(d){if(d===this.current&&!this.dirty)return;const k=this.gl;d?k.enable(k.BLEND):k.disable(k.BLEND),this.current=d,this.dirty=!1}}class bs extends ar{getDefault(){const d=this.gl;return[d.ONE,d.ZERO]}set(d){const k=this.current;(d[0]!==k[0]||d[1]!==k[1]||this.dirty)&&(this.gl.blendFunc(d[0],d[1]),this.current=d,this.dirty=!1)}}class Gs extends ar{getDefault(){return l.Color.transparent}set(d){const k=this.current;(d.r!==k.r||d.g!==k.g||d.b!==k.b||d.a!==k.a||this.dirty)&&(this.gl.blendColor(d.r,d.g,d.b,d.a),this.current=d,this.dirty=!1)}}class Pc extends ar{getDefault(){return this.gl.FUNC_ADD}set(d){(d!==this.current||this.dirty)&&(this.gl.blendEquation(d),this.current=d,this.dirty=!1)}}class bl extends ar{getDefault(){return!1}set(d){if(d===this.current&&!this.dirty)return;const k=this.gl;d?k.enable(k.CULL_FACE):k.disable(k.CULL_FACE),this.current=d,this.dirty=!1}}class Xa extends ar{getDefault(){return this.gl.BACK}set(d){(d!==this.current||this.dirty)&&(this.gl.cullFace(d),this.current=d,this.dirty=!1)}}class uc extends ar{getDefault(){return this.gl.CCW}set(d){(d!==this.current||this.dirty)&&(this.gl.frontFace(d),this.current=d,this.dirty=!1)}}class gu extends ar{getDefault(){return null}set(d){(d!==this.current||this.dirty)&&(this.gl.useProgram(d),this.current=d,this.dirty=!1)}}class Mc extends ar{getDefault(){return this.gl.TEXTURE0}set(d){(d!==this.current||this.dirty)&&(this.gl.activeTexture(d),this.current=d,this.dirty=!1)}}class yu extends ar{getDefault(){const d=this.gl;return[0,0,d.drawingBufferWidth,d.drawingBufferHeight]}set(d){const k=this.current;(d[0]!==k[0]||d[1]!==k[1]||d[2]!==k[2]||d[3]!==k[3]||this.dirty)&&(this.gl.viewport(d[0],d[1],d[2],d[3]),this.current=d,this.dirty=!1)}}class Qc extends ar{getDefault(){return null}set(d){if(d===this.current&&!this.dirty)return;const k=this.gl;k.bindFramebuffer(k.FRAMEBUFFER,d),this.current=d,this.dirty=!1}}class $u extends ar{getDefault(){return null}set(d){if(d===this.current&&!this.dirty)return;const k=this.gl;k.bindRenderbuffer(k.RENDERBUFFER,d),this.current=d,this.dirty=!1}}class vu extends ar{getDefault(){return null}set(d){if(d===this.current&&!this.dirty)return;const k=this.gl;k.bindTexture(k.TEXTURE_2D,d),this.current=d,this.dirty=!1}}class _u extends ar{getDefault(){return null}set(d){if(d===this.current&&!this.dirty)return;const k=this.gl;k.bindBuffer(k.ARRAY_BUFFER,d),this.current=d,this.dirty=!1}}class Hl extends ar{getDefault(){return null}set(d){const k=this.gl;k.bindBuffer(k.ELEMENT_ARRAY_BUFFER,d),this.current=d,this.dirty=!1}}class bu extends ar{constructor(d){super(d),this.vao=d.extVertexArrayObject}getDefault(){return null}set(d){this.vao&&(d!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(d),this.current=d,this.dirty=!1)}}class jn extends ar{getDefault(){return 4}set(d){if(d===this.current&&!this.dirty)return;const k=this.gl;k.pixelStorei(k.UNPACK_ALIGNMENT,d),this.current=d,this.dirty=!1}}class Fn extends ar{getDefault(){return!1}set(d){if(d===this.current&&!this.dirty)return;const k=this.gl;k.pixelStorei(k.UNPACK_PREMULTIPLY_ALPHA_WEBGL,d),this.current=d,this.dirty=!1}}class Gu extends ar{getDefault(){return!1}set(d){if(d===this.current&&!this.dirty)return;const k=this.gl;k.pixelStorei(k.UNPACK_FLIP_Y_WEBGL,d),this.current=d,this.dirty=!1}}class Ms extends ar{constructor(d,k){super(d),this.context=d,this.parent=k}getDefault(){return null}}class ws extends Ms{setDirty(){this.dirty=!0}set(d){if(d===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const k=this.gl;k.framebufferTexture2D(k.FRAMEBUFFER,k.COLOR_ATTACHMENT0,k.TEXTURE_2D,d,0),this.current=d,this.dirty=!1}}class Wl extends Ms{set(d){if(d===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const k=this.gl;k.framebufferRenderbuffer(k.FRAMEBUFFER,k.DEPTH_ATTACHMENT,k.RENDERBUFFER,d),this.current=d,this.dirty=!1}}class xs{constructor(d,k,C,D){this.context=d,this.width=k,this.height=C;const q=d.gl,Y=this.framebuffer=q.createFramebuffer();if(this.colorAttachment=new ws(d,Y),D&&(this.depthAttachment=new Wl(d,Y)),q.checkFramebufferStatus(q.FRAMEBUFFER)!==q.FRAMEBUFFER_COMPLETE)throw new Error("Framebuffer is not complete")}destroy(){const d=this.context.gl,k=this.colorAttachment.get();if(k&&d.deleteTexture(k),this.depthAttachment){const C=this.depthAttachment.get();C&&d.deleteRenderbuffer(C)}d.deleteFramebuffer(this.framebuffer)}}class Lo{constructor(d,k,C){this.blendFunction=d,this.blendColor=k,this.mask=C}}Lo.Replace=[1,0],Lo.disabled=new Lo(Lo.Replace,l.Color.transparent,[!1,!1,!1,!1]),Lo.unblended=new Lo(Lo.Replace,l.Color.transparent,[!0,!0,!0,!0]),Lo.alphaBlended=new Lo([1,771],l.Color.transparent,[!0,!0,!0,!0]);class te{constructor(d){this.gl=d,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),this.clearColor=new $r(this),this.clearDepth=new cn(this),this.clearStencil=new In(this),this.colorMask=new et(this),this.depthMask=new m(this),this.stencilMask=new Pr(this),this.stencilFunc=new f(this),this.stencilOp=new L(this),this.stencilTest=new kn(this),this.depthRange=new ii(this),this.depthTest=new To(this),this.depthFunc=new J(this),this.blend=new Ri(this),this.blendFunc=new bs(this),this.blendColor=new Gs(this),this.blendEquation=new Pc(this),this.cullFace=new bl(this),this.cullFaceSide=new Xa(this),this.frontFace=new uc(this),this.program=new gu(this),this.activeTexture=new Mc(this),this.viewport=new yu(this),this.bindFramebuffer=new Qc(this),this.bindRenderbuffer=new $u(this),this.bindTexture=new vu(this),this.bindVertexBuffer=new _u(this),this.bindElementBuffer=new Hl(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new bu(this),this.pixelStoreUnpack=new jn(this),this.pixelStoreUnpackPremultiplyAlpha=new Fn(this),this.pixelStoreUnpackFlipY=new Gu(this),this.extTextureFilterAnisotropic=d.getExtension("EXT_texture_filter_anisotropic")||d.getExtension("MOZ_EXT_texture_filter_anisotropic")||d.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=d.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureHalfFloat=d.getExtension("OES_texture_half_float"),this.extTextureHalfFloat&&(d.getExtension("OES_texture_half_float_linear"),this.extRenderToTextureHalfFloat=d.getExtension("EXT_color_buffer_half_float")),this.extTimerQuery=d.getExtension("EXT_disjoint_timer_query"),this.maxTextureSize=d.getParameter(d.MAX_TEXTURE_SIZE)}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(d,k){return new wr(this,d,k)}createVertexBuffer(d,k,C){return new vr(this,d,k,C)}createRenderbuffer(d,k,C){const D=this.gl,q=D.createRenderbuffer();return this.bindRenderbuffer.set(q),D.renderbufferStorage(D.RENDERBUFFER,d,k,C),this.bindRenderbuffer.set(null),q}createFramebuffer(d,k,C){return new xs(this,d,k,C)}clear({color:d,depth:k}){const C=this.gl;let D=0;d&&(D|=C.COLOR_BUFFER_BIT,this.clearColor.set(d),this.colorMask.set([!0,!0,!0,!0])),k!==void 0&&(D|=C.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(k),this.depthMask.set(!0)),C.clear(D)}setCullFace(d){d.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(d.mode),this.frontFace.set(d.frontFace))}setDepthMode(d){d.func!==this.gl.ALWAYS||d.mask?(this.depthTest.set(!0),this.depthFunc.set(d.func),this.depthMask.set(d.mask),this.depthRange.set(d.range)):this.depthTest.set(!1)}setStencilMode(d){d.test.func!==this.gl.ALWAYS||d.mask?(this.stencilTest.set(!0),this.stencilMask.set(d.mask),this.stencilOp.set([d.fail,d.depthFail,d.pass]),this.stencilFunc.set({func:d.test.func,ref:d.ref,mask:d.test.mask})):this.stencilTest.set(!1)}setColorMode(d){E(d.blendFunction,Lo.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(d.blendFunction),this.blendColor.set(d.blendColor)),this.colorMask.set(d.mask)}unbindVAO(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)}}class Le{constructor(d,k,C){this.func=d,this.mask=k,this.range=C}}Le.ReadOnly=!1,Le.ReadWrite=!0,Le.disabled=new Le(519,Le.ReadOnly,[0,1]);const pt=7680;class Bt{constructor(d,k,C,D,q,Y){this.test=d,this.ref=k,this.mask=C,this.fail=D,this.depthFail=q,this.pass=Y}}Bt.disabled=new Bt({func:519,mask:0},0,0,pt,pt,pt);class ur{constructor(d,k,C){this.enable=d,this.mode=k,this.frontFace=C}}let Xr;function gn(M,d,k,C,D,q,Y){const oe=M.context,le=oe.gl,de=M.useProgram("collisionBox"),Se=[];let je=0,Je=0;for(let Dt=0;Dt<C.length;Dt++){const Tr=C[Dt],Ir=d.getTile(Tr),Zr=Ir.getBucket(k);if(!Zr)continue;let Gr=Tr.posMatrix;D[0]===0&&D[1]===0||(Gr=M.translatePosMatrix(Tr.posMatrix,Ir,D,q));const dn=Y?Zr.textCollisionBox:Zr.iconCollisionBox,qr=Zr.collisionCircleArray;if(qr.length>0){const Mn=l.create(),En=Gr;l.mul(Mn,Zr.placementInvProjMatrix,M.transform.glCoordMatrix),l.mul(Mn,Mn,Zr.placementViewportMatrix),Se.push({circleArray:qr,circleOffset:Je,transform:En,invTransform:Mn,coord:Tr}),je+=qr.length/4,Je=je}dn&&de.draw(oe,le.LINES,Le.disabled,Bt.disabled,M.colorModeForRenderPass(),ur.disabled,tl(Gr,M.transform,Ir),M.style.terrain&&M.style.terrain.getTerrainData(Tr),k.id,dn.layoutVertexBuffer,dn.indexBuffer,dn.segments,null,M.transform.zoom,null,null,dn.collisionVertexBuffer)}if(!Y||!Se.length)return;const Et=M.useProgram("collisionCircle"),mt=new l.CollisionCircleLayoutArray;mt.resize(4*je),mt._trim();let wt=0;for(const Dt of Se)for(let Tr=0;Tr<Dt.circleArray.length/4;Tr++){const Ir=4*Tr,Zr=Dt.circleArray[Ir+0],Gr=Dt.circleArray[Ir+1],dn=Dt.circleArray[Ir+2],qr=Dt.circleArray[Ir+3];mt.emplace(wt++,Zr,Gr,dn,qr,0),mt.emplace(wt++,Zr,Gr,dn,qr,1),mt.emplace(wt++,Zr,Gr,dn,qr,2),mt.emplace(wt++,Zr,Gr,dn,qr,3)}(!Xr||Xr.length<2*je)&&(Xr=function(Dt){const Tr=2*Dt,Ir=new l.QuadTriangleArray;Ir.resize(Tr),Ir._trim();for(let Zr=0;Zr<Tr;Zr++){const Gr=6*Zr;Ir.uint16[Gr+0]=4*Zr+0,Ir.uint16[Gr+1]=4*Zr+1,Ir.uint16[Gr+2]=4*Zr+2,Ir.uint16[Gr+3]=4*Zr+2,Ir.uint16[Gr+4]=4*Zr+3,Ir.uint16[Gr+5]=4*Zr+0}return Ir}(je));const tr=oe.createIndexBuffer(Xr,!0),cr=oe.createVertexBuffer(mt,l.collisionCircleLayout.members,!0);for(const Dt of Se){const Tr={u_matrix:Dt.transform,u_inv_matrix:Dt.invTransform,u_camera_to_center_distance:(Ar=M.transform).cameraToCenterDistance,u_viewport_size:[Ar.width,Ar.height]};Et.draw(oe,le.TRIANGLES,Le.disabled,Bt.disabled,M.colorModeForRenderPass(),ur.disabled,Tr,M.style.terrain&&M.style.terrain.getTerrainData(Dt.coord),k.id,cr,tr,l.SegmentVector.simpleSegment(0,2*Dt.circleOffset,Dt.circleArray.length,Dt.circleArray.length/2),null,M.transform.zoom,null,null,null)}var Ar;cr.destroy(),tr.destroy()}ur.disabled=new ur(!1,1029,2305),ur.backCCW=new ur(!0,1029,2305);const Xn=l.identity(new Float32Array(16));function xi(M,d,k,C,D,q){const{horizontalAlign:Y,verticalAlign:oe}=l.getAnchorAlignment(M),le=-(Y-.5)*d,de=-(oe-.5)*k,Se=l.evaluateVariableOffset(M,C);return new l.pointGeometry((le/D+Se[0])*q,(de/D+Se[1])*q)}function Oi(M,d,k,C,D,q,Y,oe,le,de,Se){const je=M.text.placedSymbolArray,Je=M.text.dynamicLayoutVertexArray,Et=M.icon.dynamicLayoutVertexArray,mt={};Je.clear();for(let wt=0;wt<je.length;wt++){const tr=je.get(wt),cr=M.allowVerticalPlacement&&!tr.placedOrientation,Ar=tr.hidden||!tr.crossTileID||cr?null:C[tr.crossTileID];if(Ar){const Dt=new l.pointGeometry(tr.anchorX,tr.anchorY),Tr=si(Dt,k?Y:q,Se),Ir=fr(D.cameraToCenterDistance,Tr.signedDistanceFromCamera);let Zr=l.evaluateSizeForFeature(M.textSizeData,le,tr)*Ir/l.ONE_EM;k&&(Zr*=M.tilePixelRatio/oe);const{width:Gr,height:dn,anchor:qr,textOffset:Mn,textBoxScale:En}=Ar,Un=xi(qr,Gr,dn,Mn,En,Zr),Li=k?si(Dt.add(Un),q,Se).point:Tr.point.add(d?Un.rotate(-D.angle):Un),Di=M.allowVerticalPlacement&&tr.placedOrientation===l.WritingMode.vertical?Math.PI/2:0;for(let N=0;N<tr.numGlyphs;N++)l.addDynamicAttributes(Je,Li,Di);de&&tr.associatedIconIndex>=0&&(mt[tr.associatedIconIndex]={shiftedAnchor:Li,angle:Di})}else gi(tr.numGlyphs,Je)}if(de){Et.clear();const wt=M.icon.placedSymbolArray;for(let tr=0;tr<wt.length;tr++){const cr=wt.get(tr);if(cr.hidden)gi(cr.numGlyphs,Et);else{const Ar=mt[tr];if(Ar)for(let Dt=0;Dt<cr.numGlyphs;Dt++)l.addDynamicAttributes(Et,Ar.shiftedAnchor,Ar.angle);else gi(cr.numGlyphs,Et)}}M.icon.dynamicLayoutVertexBuffer.updateData(Et)}M.text.dynamicLayoutVertexBuffer.updateData(Je)}function Yi(M,d,k){return k.iconsInText&&d?"symbolTextAndIcon":M?"symbolSDF":"symbolIcon"}function fo(M,d,k,C,D,q,Y,oe,le,de,Se,je){const Je=M.context,Et=Je.gl,mt=M.transform,wt=oe==="map",tr=le==="map",cr=oe!=="viewport"&&k.layout.get("symbol-placement")!=="point",Ar=wt&&!tr&&!cr,Dt=!k.layout.get("symbol-sort-key").isConstant();let Tr=!1;const Ir=M.depthModeForSublayer(0,Le.ReadOnly),Zr=k.layout.get("text-variable-anchor"),Gr=[];for(const dn of C){const qr=d.getTile(dn),Mn=qr.getBucket(k);if(!Mn)continue;const En=D?Mn.text:Mn.icon;if(!En||!En.segments.get().length)continue;const Un=En.programConfigurations.get(k.id),Li=D||Mn.sdfIcons,Di=D?Mn.textSizeData:Mn.iconSizeData,N=tr||mt.pitch!==0,$=M.useProgram(Yi(Li,D,Mn),Un),re=l.evaluateSizeForZoom(Di,mt.zoom),fe=M.style.terrain&&M.style.terrain.getTerrainData(dn);let Te,Oe,Ue,Ke,rt=[0,0],gt=null;if(D){if(Oe=qr.glyphAtlasTexture,Ue=Et.LINEAR,Te=qr.glyphAtlasTexture.size,Mn.iconsInText){rt=qr.imageAtlasTexture.size,gt=qr.imageAtlasTexture;const Nn=Di.kind==="composite"||Di.kind==="camera";Ke=N||M.options.rotating||M.options.zooming||Nn?Et.LINEAR:Et.NEAREST}}else{const Nn=k.layout.get("icon-size").constantOr(0)!==1||Mn.iconsNeedLinear;Oe=qr.imageAtlasTexture,Ue=Li||M.options.rotating||M.options.zooming||Nn||N?Et.LINEAR:Et.NEAREST,Te=qr.imageAtlasTexture.size}const rr=yo(qr,1,M.transform.zoom),Er=wi(dn.posMatrix,tr,wt,M.transform,rr),kr=xn(dn.posMatrix,tr,wt,M.transform,rr),hr=Zr&&Mn.hasTextData(),fn=k.layout.get("icon-text-fit")!=="none"&&hr&&Mn.hasIconData();if(cr){const Nn=M.style.terrain?(Ci,Rn)=>M.style.terrain.getElevation(dn,Ci,Rn):null,Cn=k.layout.get("text-rotation-alignment")==="map";Yr(Mn,dn.posMatrix,M,D,Er,kr,tr,de,Cn,Nn)}const Dr=M.translatePosMatrix(dn.posMatrix,qr,q,Y),zt=cr||D&&Zr||fn?Xn:Er,Xt=M.translatePosMatrix(kr,qr,q,Y,!0),Hr=Li&&k.paint.get(D?"text-halo-width":"icon-halo-width").constantOr(1)!==0;let Qr;Qr=Li?Mn.iconsInText?Ye(Di.kind,re,Ar,tr,M,Dr,zt,Xt,Te,rt):ke(Di.kind,re,Ar,tr,M,Dr,zt,Xt,D,Te,!0):ae(Di.kind,re,Ar,tr,M,Dr,zt,Xt,D,Te);const Wr={program:$,buffers:En,uniformValues:Qr,atlasTexture:Oe,atlasTextureIcon:gt,atlasInterpolation:Ue,atlasInterpolationIcon:Ke,isSDF:Li,hasHalo:Hr};if(Dt&&Mn.canOverlap){Tr=!0;const Nn=En.segments.get();for(const Cn of Nn)Gr.push({segments:new l.SegmentVector([Cn]),sortKey:Cn.sortKey,state:Wr,terrainData:fe})}else Gr.push({segments:En.segments,sortKey:0,state:Wr,terrainData:fe})}Tr&&Gr.sort((dn,qr)=>dn.sortKey-qr.sortKey);for(const dn of Gr){const qr=dn.state;if(Je.activeTexture.set(Et.TEXTURE0),qr.atlasTexture.bind(qr.atlasInterpolation,Et.CLAMP_TO_EDGE),qr.atlasTextureIcon&&(Je.activeTexture.set(Et.TEXTURE1),qr.atlasTextureIcon&&qr.atlasTextureIcon.bind(qr.atlasInterpolationIcon,Et.CLAMP_TO_EDGE)),qr.isSDF){const Mn=qr.uniformValues;qr.hasHalo&&(Mn.u_is_halo=1,qo(qr.buffers,dn.segments,k,M,qr.program,Ir,Se,je,Mn,dn.terrainData)),Mn.u_is_halo=0}qo(qr.buffers,dn.segments,k,M,qr.program,Ir,Se,je,qr.uniformValues,dn.terrainData)}}function qo(M,d,k,C,D,q,Y,oe,le,de){const Se=C.context;D.draw(Se,Se.gl.TRIANGLES,q,Y,oe,ur.disabled,le,de,k.id,M.layoutVertexBuffer,M.indexBuffer,d,k.paint,C.transform.zoom,M.programConfigurations.get(k.id),M.dynamicLayoutVertexBuffer,M.opacityVertexBuffer)}function Ko(M,d,k,C,D,q,Y){const oe=M.context.gl,le=k.paint.get("fill-pattern"),de=le&&le.constantOr(1),Se=k.getCrossfadeParameters();let je,Je,Et,mt,wt;Y?(Je=de&&!k.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",je=oe.LINES):(Je=de?"fillPattern":"fill",je=oe.TRIANGLES);for(const tr of C){const cr=d.getTile(tr);if(de&&!cr.patternsLoaded())continue;const Ar=cr.getBucket(k);if(!Ar)continue;const Dt=Ar.programConfigurations.get(k.id),Tr=M.useProgram(Je,Dt),Ir=M.style.terrain&&M.style.terrain.getTerrainData(tr);de&&(M.context.activeTexture.set(oe.TEXTURE0),cr.imageAtlasTexture.bind(oe.LINEAR,oe.CLAMP_TO_EDGE),Dt.updatePaintBuffers(Se));const Zr=le.constantOr(null);if(Zr&&cr.imageAtlas){const qr=cr.imageAtlas,Mn=qr.patternPositions[Zr.to.toString()],En=qr.patternPositions[Zr.from.toString()];Mn&&En&&Dt.setConstantPatternPositions(Mn,En)}const Gr=Ir?tr:null,dn=M.translatePosMatrix(Gr?Gr.posMatrix:tr.posMatrix,cr,k.paint.get("fill-translate"),k.paint.get("fill-translate-anchor"));if(Y){mt=Ar.indexBuffer2,wt=Ar.segments2;const qr=[oe.drawingBufferWidth,oe.drawingBufferHeight];Et=Je==="fillOutlinePattern"&&de?qu(dn,M,Se,cr,qr):Gl(dn,qr)}else mt=Ar.indexBuffer,wt=Ar.segments,Et=de?yl(dn,M,Se,cr):$a(dn);Tr.draw(M.context,je,D,M.stencilModeForClipping(tr),q,ur.disabled,Et,Ir,k.id,Ar.layoutVertexBuffer,mt,wt,k.paint,M.transform.zoom,Dt)}}function Qo(M,d,k,C,D,q,Y){const oe=M.context,le=oe.gl,de=k.paint.get("fill-extrusion-pattern"),Se=de.constantOr(1),je=k.getCrossfadeParameters(),Je=k.paint.get("fill-extrusion-opacity");for(const Et of C){const mt=d.getTile(Et),wt=mt.getBucket(k);if(!wt)continue;const tr=M.style.terrain&&M.style.terrain.getTerrainData(Et),cr=wt.programConfigurations.get(k.id),Ar=M.useProgram(Se?"fillExtrusionPattern":"fillExtrusion",cr);Se&&(M.context.activeTexture.set(le.TEXTURE0),mt.imageAtlasTexture.bind(le.LINEAR,le.CLAMP_TO_EDGE),cr.updatePaintBuffers(je));const Dt=de.constantOr(null);if(Dt&&mt.imageAtlas){const Gr=mt.imageAtlas,dn=Gr.patternPositions[Dt.to.toString()],qr=Gr.patternPositions[Dt.from.toString()];dn&&qr&&cr.setConstantPatternPositions(dn,qr)}const Tr=M.translatePosMatrix(Et.posMatrix,mt,k.paint.get("fill-extrusion-translate"),k.paint.get("fill-extrusion-translate-anchor")),Ir=k.paint.get("fill-extrusion-vertical-gradient"),Zr=Se?Uu(Tr,M,Ir,Je,Et,je,mt):ys(Tr,M,Ir,Je);Ar.draw(oe,oe.gl.TRIANGLES,D,q,Y,ur.backCCW,Zr,tr,k.id,wt.layoutVertexBuffer,wt.indexBuffer,wt.segments,k.paint,M.transform.zoom,cr,M.style.terrain&&wt.centroidVertexBuffer)}}function Da(M,d,k,C,D,q,Y){const oe=M.context,le=oe.gl,de=k.fbo;if(!de)return;const Se=M.useProgram("hillshade"),je=M.style.terrain&&M.style.terrain.getTerrainData(d);oe.activeTexture.set(le.TEXTURE0),le.bindTexture(le.TEXTURE_2D,de.colorAttachment.get()),Se.draw(oe,le.TRIANGLES,D,q,Y,ur.disabled,((Je,Et,mt,wt)=>{const tr=mt.paint.get("hillshade-shadow-color"),cr=mt.paint.get("hillshade-highlight-color"),Ar=mt.paint.get("hillshade-accent-color");let Dt=mt.paint.get("hillshade-illumination-direction")*(Math.PI/180);mt.paint.get("hillshade-illumination-anchor")==="viewport"&&(Dt-=Je.transform.angle);const Tr=!Je.options.moving;return{u_matrix:wt?wt.posMatrix:Je.transform.calculatePosMatrix(Et.tileID.toUnwrapped(),Tr),u_image:0,u_latrange:du(0,Et.tileID),u_light:[mt.paint.get("hillshade-exaggeration"),Dt],u_shadow:tr,u_highlight:cr,u_accent:Ar}})(M,k,C,je?d:null),je,C.id,M.rasterBoundsBuffer,M.quadTriangleIndexBuffer,M.rasterBoundsSegments)}function aa(M,d,k,C,D,q){const Y=M.context,oe=Y.gl,le=d.dem;if(le&&le.data){const de=le.dim,Se=le.stride,je=le.getPixels();if(Y.activeTexture.set(oe.TEXTURE1),Y.pixelStoreUnpackPremultiplyAlpha.set(!1),d.demTexture=d.demTexture||M.getTileTexture(Se),d.demTexture){const Et=d.demTexture;Et.update(je,{premultiply:!1}),Et.bind(oe.NEAREST,oe.CLAMP_TO_EDGE)}else d.demTexture=new U(Y,je,oe.RGBA,{premultiply:!1}),d.demTexture.bind(oe.NEAREST,oe.CLAMP_TO_EDGE);Y.activeTexture.set(oe.TEXTURE0);let Je=d.fbo;if(!Je){const Et=new U(Y,{width:de,height:de,data:null},oe.RGBA);Et.bind(oe.LINEAR,oe.CLAMP_TO_EDGE),Je=d.fbo=Y.createFramebuffer(de,de,!0),Je.colorAttachment.set(Et.texture)}Y.bindFramebuffer.set(Je.framebuffer),Y.viewport.set([0,0,de,de]),M.useProgram("hillshadePrepare").draw(Y,oe.TRIANGLES,C,D,q,ur.disabled,((Et,mt)=>{const wt=mt.stride,tr=l.create();return l.ortho(tr,0,l.EXTENT,-l.EXTENT,0,0,1),l.translate(tr,tr,[0,-l.EXTENT,0]),{u_matrix:tr,u_image:1,u_dimension:[wt,wt],u_zoom:Et.overscaledZ,u_unpack:mt.getUnpackVector()}})(d.tileID,le),null,k.id,M.rasterBoundsBuffer,M.quadTriangleIndexBuffer,M.rasterBoundsSegments),d.needsHillshadePrepare=!1}}function Vi(M,d,k,C,D,q){const Y=C.paint.get("raster-fade-duration");if(!q&&Y>0){const oe=l.exported.now(),le=(oe-M.timeAdded)/Y,de=d?(oe-d.timeAdded)/Y:-1,Se=k.getSource(),je=D.coveringZoomLevel({tileSize:Se.tileSize,roundZoom:Se.roundZoom}),Je=!d||Math.abs(d.tileID.overscaledZ-je)>Math.abs(M.tileID.overscaledZ-je),Et=Je&&M.refreshedUponExpiration?1:l.clamp(Je?le:1-de,0,1);return M.refreshedUponExpiration&&le>=1&&(M.refreshedUponExpiration=!1),d?{opacity:1,mix:1-Et}:{opacity:Et,mix:0}}return{opacity:1,mix:0}}const za=new l.Color(1,0,0,1),Sa=new l.Color(0,1,0,1),Zl=new l.Color(0,0,1,1),wl=new l.Color(1,0,1,1),Hu=new l.Color(0,1,1,1);function Ds(M,d,k,C){nl(M,0,d+k/2,M.transform.width,k,C)}function xl(M,d,k,C){nl(M,d-k/2,0,k,M.transform.height,C)}function nl(M,d,k,C,D,q){const Y=M.context,oe=Y.gl;oe.enable(oe.SCISSOR_TEST),oe.scissor(d*M.pixelRatio,k*M.pixelRatio,C*M.pixelRatio,D*M.pixelRatio),Y.clear({color:q}),oe.disable(oe.SCISSOR_TEST)}function wu(M,d,k){const C=M.context,D=C.gl,q=k.posMatrix,Y=M.useProgram("debug"),oe=Le.disabled,le=Bt.disabled,de=M.colorModeForRenderPass(),Se="$debug",je=M.style.terrain&&M.style.terrain.getTerrainData(k);C.activeTexture.set(D.TEXTURE0),M.emptyTexture.bind(D.LINEAR,D.CLAMP_TO_EDGE);const Je=d.getTileByID(k.key).latestRawTileData,Et=Math.floor((Je&&Je.byteLength||0)/1024),mt=d.getTile(k).tileSize,wt=512/Math.min(mt,512)*(k.overscaledZ/M.transform.zoom)*.5;let tr=k.canonical.toString();k.overscaledZ!==k.canonical.z&&(tr+=` => ${k.overscaledZ}`),function(cr,Ar){cr.initDebugOverlayCanvas();const Dt=cr.debugOverlayCanvas,Tr=cr.context.gl,Ir=cr.debugOverlayCanvas.getContext("2d");Ir.clearRect(0,0,Dt.width,Dt.height),Ir.shadowColor="white",Ir.shadowBlur=2,Ir.lineWidth=1.5,Ir.strokeStyle="white",Ir.textBaseline="top",Ir.font="bold 36px Open Sans, sans-serif",Ir.fillText(Ar,5,5),Ir.strokeText(Ar,5,5),cr.debugOverlayTexture.update(Dt),cr.debugOverlayTexture.bind(Tr.LINEAR,Tr.CLAMP_TO_EDGE)}(M,`${tr} ${Et}kB`),Y.draw(C,D.TRIANGLES,oe,le,Lo.alphaBlended,ur.disabled,us(q,l.Color.transparent,wt),null,Se,M.debugBuffer,M.quadTriangleIndexBuffer,M.debugSegments),Y.draw(C,D.LINE_STRIP,oe,le,de,ur.disabled,us(q,l.Color.red),je,Se,M.debugBuffer,M.tileBorderIndexBuffer,M.debugSegments)}function Na(M,d,k){const C=M.context,D=C.gl,q=M.colorModeForRenderPass(),Y=new Le(D.LEQUAL,Le.ReadWrite,M.depthRangeFor3D),oe=M.useProgram("terrain"),le=d.getTerrainMesh(),de=d.getTerrainData(k.tileID);C.bindFramebuffer.set(null),C.viewport.set([0,0,M.width,M.height]),C.activeTexture.set(D.TEXTURE0),D.bindTexture(D.TEXTURE_2D,d.getRTTFramebuffer().colorAttachment.get());const Se=M.transform.calculatePosMatrix(k.tileID.toUnwrapped());oe.draw(C,D.TRIANGLES,Y,Bt.disabled,q,ur.backCCW,{u_matrix:Se,u_texture:0},de,"terrain",le.vertexBuffer,le.indexBuffer,le.segments)}function xu(M,d,k,C){const D=M.context,q=k.tileSize*d.qualityFactor;k.textures[C]||(k.textures[C]=M.getTileTexture(q)||new U(D,{width:q,height:q,data:null},D.gl.RGBA),k.textures[C].bind(D.gl.LINEAR,D.gl.CLAMP_TO_EDGE),C===0&&d.sourceCache.renderHistory.unshift(k.tileID.key));const Y=d.getRTTFramebuffer();Y.colorAttachment.set(k.textures[C].texture),D.bindFramebuffer.set(Y.framebuffer),D.viewport.set([0,0,q,q])}class Xl{constructor(d){this._coordsDescendingInv={},this._coordsDescendingInvStr={},this.painter=d,this._renderToTexture={background:!0,fill:!0,line:!0,raster:!0},this._coordsDescendingInv={},this._coordsDescendingInvStr={},this._stacks=[],this._prevType=null,this._rerender={},this._renderableTiles=d.style.terrain.sourceCache.getRenderableTiles(),this._init()}_init(){const d=this.painter.style,k=d.terrain;for(const C in d.sourceCaches){this._coordsDescendingInv[C]={};const D=d.sourceCaches[C].getVisibleCoordinates();for(const q of D){const Y=k.sourceCache.getTerrainCoords(q);for(const oe in Y)this._coordsDescendingInv[C][oe]||(this._coordsDescendingInv[C][oe]=[]),this._coordsDescendingInv[C][oe].push(Y[oe])}}for(const C of d._order){const D=d._layers[C],q=D.source;if(this._renderToTexture[D.type]&&!this._coordsDescendingInvStr[q]){this._coordsDescendingInvStr[q]={};for(const Y in this._coordsDescendingInv[q])this._coordsDescendingInvStr[q][Y]=this._coordsDescendingInv[q][Y].map(oe=>oe.key).sort().join()}}return this._renderableTiles.forEach(C=>{for(const D in this._coordsDescendingInvStr){const q=this._coordsDescendingInvStr[D][C.tileID.key];q&&q!==C.textureCoords[D]&&C.clearTextures(this.painter),k.needsRerender(D,C.tileID)&&C.clearTextures(this.painter)}this._rerender[C.tileID.key]=!C.textures.length}),k.clearRerenderCache(),k.sourceCache.removeOutdated(this.painter),this}renderLayer(d){const k=d.type,C=this.painter,D=C.style._order,q=C.currentLayer,Y=q+1===D.length;if(this._renderToTexture[k]&&(this._prevType&&this._renderToTexture[this._prevType]||this._stacks.push([]),this._prevType=k,this._stacks[this._stacks.length-1].push(D[q]),!Y))return!0;if(this._renderToTexture[this._prevType]||k==="hillshade"||this._renderToTexture[k]&&Y){this._prevType=k;const oe=this._stacks.length-1,le=this._stacks[oe]||[];for(const de of this._renderableTiles){if(xu(C,C.style.terrain,de,oe),this._rerender[de.tileID.key]){C.context.clear({color:l.Color.transparent});for(let Se=0;Se<le.length;Se++){const je=C.style._layers[le[Se]],Je=je.source?this._coordsDescendingInv[je.source][de.tileID.key]:[de.tileID];C._renderTileClippingMasks(je,Je),C.renderLayer(C,C.style.sourceCaches[je.source],je,Je),je.source&&(de.textureCoords[je.source]=this._coordsDescendingInvStr[je.source][de.tileID.key])}}Na(C,C.style.terrain,de)}if(k==="hillshade"){this._stacks.push([D[q]]);for(const de of this._renderableTiles){const Se=this._coordsDescendingInv[d.source][de.tileID.key];xu(C,C.style.terrain,de,this._stacks.length-1),C.context.clear({color:l.Color.transparent}),C._renderTileClippingMasks(d,Se),C.renderLayer(C,C.style.sourceCaches[d.source],d,Se),Na(C,C.style.terrain,de)}return!0}return this._renderToTexture[k]}return!1}}const Hs={symbol:function(M,d,k,C,D){if(M.renderPass!=="translucent")return;const q=Bt.disabled,Y=M.colorModeForRenderPass();k.layout.get("text-variable-anchor")&&function(oe,le,de,Se,je,Je,Et){const mt=le.transform,wt=je==="map",tr=Je==="map";for(const cr of oe){const Ar=Se.getTile(cr),Dt=Ar.getBucket(de);if(!Dt||!Dt.text||!Dt.text.segments.get().length)continue;const Tr=l.evaluateSizeForZoom(Dt.textSizeData,mt.zoom),Ir=yo(Ar,1,le.transform.zoom),Zr=wi(cr.posMatrix,tr,wt,le.transform,Ir),Gr=de.layout.get("icon-text-fit")!=="none"&&Dt.hasIconData();if(Tr){const dn=Math.pow(2,mt.zoom-Ar.tileID.overscaledZ);Oi(Dt,wt,tr,Et,mt,Zr,cr.posMatrix,dn,Tr,Gr,le.style.terrain?(qr,Mn)=>le.style.terrain.getElevation(cr,qr,Mn):null)}}}(C,M,k,d,k.layout.get("text-rotation-alignment"),k.layout.get("text-pitch-alignment"),D),k.paint.get("icon-opacity").constantOr(1)!==0&&fo(M,d,k,C,!1,k.paint.get("icon-translate"),k.paint.get("icon-translate-anchor"),k.layout.get("icon-rotation-alignment"),k.layout.get("icon-pitch-alignment"),k.layout.get("icon-keep-upright"),q,Y),k.paint.get("text-opacity").constantOr(1)!==0&&fo(M,d,k,C,!0,k.paint.get("text-translate"),k.paint.get("text-translate-anchor"),k.layout.get("text-rotation-alignment"),k.layout.get("text-pitch-alignment"),k.layout.get("text-keep-upright"),q,Y),d.map.showCollisionBoxes&&(gn(M,d,k,C,k.paint.get("text-translate"),k.paint.get("text-translate-anchor"),!0),gn(M,d,k,C,k.paint.get("icon-translate"),k.paint.get("icon-translate-anchor"),!1))},circle:function(M,d,k,C){if(M.renderPass!=="translucent")return;const D=k.paint.get("circle-opacity"),q=k.paint.get("circle-stroke-width"),Y=k.paint.get("circle-stroke-opacity"),oe=!k.layout.get("circle-sort-key").isConstant();if(D.constantOr(1)===0&&(q.constantOr(1)===0||Y.constantOr(1)===0))return;const le=M.context,de=le.gl,Se=M.depthModeForSublayer(0,Le.ReadOnly),je=Bt.disabled,Je=M.colorModeForRenderPass(),Et=[];for(let mt=0;mt<C.length;mt++){const wt=C[mt],tr=d.getTile(wt),cr=tr.getBucket(k);if(!cr)continue;const Ar=cr.programConfigurations.get(k.id),Dt=M.useProgram("circle",Ar),Tr=cr.layoutVertexBuffer,Ir=cr.indexBuffer,Zr=M.style.terrain&&M.style.terrain.getTerrainData(wt),Gr={programConfiguration:Ar,program:Dt,layoutVertexBuffer:Tr,indexBuffer:Ir,uniformValues:Vu(M,wt,tr,k),terrainData:Zr};if(oe){const dn=cr.segments.get();for(const qr of dn)Et.push({segments:new l.SegmentVector([qr]),sortKey:qr.sortKey,state:Gr})}else Et.push({segments:cr.segments,sortKey:0,state:Gr})}oe&&Et.sort((mt,wt)=>mt.sortKey-wt.sortKey);for(const mt of Et){const{programConfiguration:wt,program:tr,layoutVertexBuffer:cr,indexBuffer:Ar,uniformValues:Dt,terrainData:Tr}=mt.state;tr.draw(le,de.TRIANGLES,Se,je,Je,ur.disabled,Dt,Tr,k.id,cr,Ar,mt.segments,k.paint,M.transform.zoom,wt)}},heatmap:function(M,d,k,C){if(k.paint.get("heatmap-opacity")!==0)if(M.renderPass==="offscreen"){const D=M.context,q=D.gl,Y=Bt.disabled,oe=new Lo([q.ONE,q.ONE],l.Color.transparent,[!0,!0,!0,!0]);(function(le,de,Se){const je=le.gl;le.activeTexture.set(je.TEXTURE1),le.viewport.set([0,0,de.width/4,de.height/4]);let Je=Se.heatmapFbo;if(Je)je.bindTexture(je.TEXTURE_2D,Je.colorAttachment.get()),le.bindFramebuffer.set(Je.framebuffer);else{const Et=je.createTexture();je.bindTexture(je.TEXTURE_2D,Et),je.texParameteri(je.TEXTURE_2D,je.TEXTURE_WRAP_S,je.CLAMP_TO_EDGE),je.texParameteri(je.TEXTURE_2D,je.TEXTURE_WRAP_T,je.CLAMP_TO_EDGE),je.texParameteri(je.TEXTURE_2D,je.TEXTURE_MIN_FILTER,je.LINEAR),je.texParameteri(je.TEXTURE_2D,je.TEXTURE_MAG_FILTER,je.LINEAR),Je=Se.heatmapFbo=le.createFramebuffer(de.width/4,de.height/4,!1),function(mt,wt,tr,cr){const Ar=mt.gl;Ar.texImage2D(Ar.TEXTURE_2D,0,Ar.RGBA,wt.width/4,wt.height/4,0,Ar.RGBA,mt.extRenderToTextureHalfFloat?mt.extTextureHalfFloat.HALF_FLOAT_OES:Ar.UNSIGNED_BYTE,null),cr.colorAttachment.set(tr)}(le,de,Et,Je)}})(D,M,k),D.clear({color:l.Color.transparent});for(let le=0;le<C.length;le++){const de=C[le];if(d.hasRenderableParent(de))continue;const Se=d.getTile(de),je=Se.getBucket(k);if(!je)continue;const Je=je.programConfigurations.get(k.id),Et=M.useProgram("heatmap",Je),{zoom:mt}=M.transform;Et.draw(D,q.TRIANGLES,Le.disabled,Y,oe,ur.disabled,vl(de.posMatrix,Se,mt,k.paint.get("heatmap-intensity")),null,k.id,je.layoutVertexBuffer,je.indexBuffer,je.segments,k.paint,M.transform.zoom,Je)}D.viewport.set([0,0,M.width,M.height])}else M.renderPass==="translucent"&&(M.context.setColorMode(M.colorModeForRenderPass()),function(D,q){const Y=D.context,oe=Y.gl,le=q.heatmapFbo;if(!le)return;Y.activeTexture.set(oe.TEXTURE0),oe.bindTexture(oe.TEXTURE_2D,le.colorAttachment.get()),Y.activeTexture.set(oe.TEXTURE1);let de=q.colorRampTexture;de||(de=q.colorRampTexture=new U(Y,q.colorRamp,oe.RGBA)),de.bind(oe.LINEAR,oe.CLAMP_TO_EDGE),D.useProgram("heatmapTexture").draw(Y,oe.TRIANGLES,Le.disabled,Bt.disabled,D.colorModeForRenderPass(),ur.disabled,((Se,je,Je,Et)=>{const mt=l.create();l.ortho(mt,0,Se.width,Se.height,0,0,1);const wt=Se.context.gl;return{u_matrix:mt,u_world:[wt.drawingBufferWidth,wt.drawingBufferHeight],u_image:0,u_color_ramp:1,u_opacity:je.paint.get("heatmap-opacity")}})(D,q),null,q.id,D.viewportBuffer,D.quadTriangleIndexBuffer,D.viewportSegments,q.paint,D.transform.zoom)}(M,k))},line:function(M,d,k,C){if(M.renderPass!=="translucent")return;const D=k.paint.get("line-opacity"),q=k.paint.get("line-width");if(D.constantOr(1)===0||q.constantOr(1)===0)return;const Y=M.depthModeForSublayer(0,Le.ReadOnly),oe=M.colorModeForRenderPass(),le=k.paint.get("line-dasharray"),de=k.paint.get("line-pattern"),Se=de.constantOr(1),je=k.paint.get("line-gradient"),Je=k.getCrossfadeParameters(),Et=Se?"linePattern":le?"lineSDF":je?"lineGradient":"line",mt=M.context,wt=mt.gl;let tr=!0;for(const cr of C){const Ar=d.getTile(cr);if(Se&&!Ar.patternsLoaded())continue;const Dt=Ar.getBucket(k);if(!Dt)continue;const Tr=Dt.programConfigurations.get(k.id),Ir=M.context.program.get(),Zr=M.useProgram(Et,Tr),Gr=tr||Zr.program!==Ir,dn=M.style.terrain&&M.style.terrain.getTerrainData(cr),qr=de.constantOr(null);if(qr&&Ar.imageAtlas){const Un=Ar.imageAtlas,Li=Un.patternPositions[qr.to.toString()],Di=Un.patternPositions[qr.from.toString()];Li&&Di&&Tr.setConstantPatternPositions(Li,Di)}const Mn=dn?cr:null,En=Se?vs(M,Ar,k,Je,Mn):le?_s(M,Ar,k,le,Je,Mn):je?mu(M,Ar,k,Dt.lineClipsArray.length,Mn):_l(M,Ar,k,Mn);if(Se)mt.activeTexture.set(wt.TEXTURE0),Ar.imageAtlasTexture.bind(wt.LINEAR,wt.CLAMP_TO_EDGE),Tr.updatePaintBuffers(Je);else if(le&&(Gr||M.lineAtlas.dirty))mt.activeTexture.set(wt.TEXTURE0),M.lineAtlas.bind(mt);else if(je){const Un=Dt.gradients[k.id];let Li=Un.texture;if(k.gradientVersion!==Un.version){let Di=256;if(k.stepInterpolant){const N=d.getSource().maxzoom,$=cr.canonical.z===N?Math.ceil(1<<M.transform.maxZoom-cr.canonical.z):1;Di=l.clamp(l.nextPowerOfTwo(Dt.maxLineLength/l.EXTENT*1024*$),256,mt.maxTextureSize)}Un.gradient=l.renderColorRamp({expression:k.gradientExpression(),evaluationKey:"lineProgress",resolution:Di,image:Un.gradient||void 0,clips:Dt.lineClipsArray}),Un.texture?Un.texture.update(Un.gradient):Un.texture=new U(mt,Un.gradient,wt.RGBA),Un.version=k.gradientVersion,Li=Un.texture}mt.activeTexture.set(wt.TEXTURE0),Li.bind(k.stepInterpolant?wt.NEAREST:wt.LINEAR,wt.CLAMP_TO_EDGE)}Zr.draw(mt,wt.TRIANGLES,Y,M.stencilModeForClipping(cr),oe,ur.disabled,En,dn,k.id,Dt.layoutVertexBuffer,Dt.indexBuffer,Dt.segments,k.paint,M.transform.zoom,Tr,Dt.layoutVertexBuffer2),tr=!1}},fill:function(M,d,k,C){const D=k.paint.get("fill-color"),q=k.paint.get("fill-opacity");if(q.constantOr(1)===0)return;const Y=M.colorModeForRenderPass(),oe=k.paint.get("fill-pattern"),le=M.opaquePassEnabledForLayer()&&!oe.constantOr(1)&&D.constantOr(l.Color.transparent).a===1&&q.constantOr(0)===1?"opaque":"translucent";if(M.renderPass===le){const de=M.depthModeForSublayer(1,M.renderPass==="opaque"?Le.ReadWrite:Le.ReadOnly);Ko(M,d,k,C,de,Y,!1)}if(M.renderPass==="translucent"&&k.paint.get("fill-antialias")){const de=M.depthModeForSublayer(k.getPaintProperty("fill-outline-color")?2:0,Le.ReadOnly);Ko(M,d,k,C,de,Y,!0)}},"fill-extrusion":function(M,d,k,C){const D=k.paint.get("fill-extrusion-opacity");if(D!==0&&M.renderPass==="translucent"){const q=new Le(M.context.gl.LEQUAL,Le.ReadWrite,M.depthRangeFor3D);if(D!==1||k.paint.get("fill-extrusion-pattern").constantOr(1))Qo(M,d,k,C,q,Bt.disabled,Lo.disabled),Qo(M,d,k,C,q,M.stencilModeFor3D(),M.colorModeForRenderPass());else{const Y=M.colorModeForRenderPass();Qo(M,d,k,C,q,Bt.disabled,Y)}}},hillshade:function(M,d,k,C){if(M.renderPass!=="offscreen"&&M.renderPass!=="translucent")return;const D=M.context,q=M.depthModeForSublayer(0,Le.ReadOnly),Y=M.colorModeForRenderPass(),[oe,le]=M.renderPass==="translucent"?M.stencilConfigForOverlap(C):[{},C];for(const de of le){const Se=d.getTile(de);Se.needsHillshadePrepare!==void 0&&Se.needsHillshadePrepare&&M.renderPass==="offscreen"?aa(M,Se,k,q,Bt.disabled,Y):M.renderPass==="translucent"&&Da(M,de,Se,k,q,oe[de.overscaledZ],Y)}D.viewport.set([0,0,M.width,M.height])},raster:function(M,d,k,C){if(M.renderPass!=="translucent"||k.paint.get("raster-opacity")===0||!C.length)return;const D=M.context,q=D.gl,Y=d.getSource(),oe=M.useProgram("raster"),le=M.colorModeForRenderPass(),[de,Se]=Y instanceof bt?[{},C]:M.stencilConfigForOverlap(C),je=Se[Se.length-1].overscaledZ,Je=!M.options.moving;for(const Et of Se){const mt=M.depthModeForSublayer(Et.overscaledZ-je,k.paint.get("raster-opacity")===1?Le.ReadWrite:Le.ReadOnly,q.LESS),wt=d.getTile(Et);wt.registerFadeDuration(k.paint.get("raster-fade-duration"));const tr=d.findLoadedParent(Et,0),cr=Vi(wt,tr,d,k,M.transform,M.style.terrain);let Ar,Dt;const Tr=k.paint.get("raster-resampling")==="nearest"?q.NEAREST:q.LINEAR;D.activeTexture.set(q.TEXTURE0),wt.texture.bind(Tr,q.CLAMP_TO_EDGE,q.LINEAR_MIPMAP_NEAREST),D.activeTexture.set(q.TEXTURE1),tr?(tr.texture.bind(Tr,q.CLAMP_TO_EDGE,q.LINEAR_MIPMAP_NEAREST),Ar=Math.pow(2,tr.tileID.overscaledZ-wt.tileID.overscaledZ),Dt=[wt.tileID.canonical.x*Ar%1,wt.tileID.canonical.y*Ar%1]):wt.texture.bind(Tr,q.CLAMP_TO_EDGE,q.LINEAR_MIPMAP_NEAREST);const Ir=M.style.terrain&&M.style.terrain.getTerrainData(Et),Zr=Ir?Et:null,Gr=Zr?Zr.posMatrix:M.transform.calculatePosMatrix(Et.toUnwrapped(),Je),dn=R(Gr,Dt||[0,0],Ar||1,cr,k);Y instanceof bt?oe.draw(D,q.TRIANGLES,mt,Bt.disabled,le,ur.disabled,dn,Ir,k.id,Y.boundsBuffer,M.quadTriangleIndexBuffer,Y.boundsSegments):oe.draw(D,q.TRIANGLES,mt,de[Et.overscaledZ],le,ur.disabled,dn,Ir,k.id,M.rasterBoundsBuffer,M.quadTriangleIndexBuffer,M.rasterBoundsSegments)}},background:function(M,d,k,C){const D=k.paint.get("background-color"),q=k.paint.get("background-opacity");if(q===0)return;const Y=M.context,oe=Y.gl,le=M.transform,de=le.tileSize,Se=k.paint.get("background-pattern");if(M.isPatternMissing(Se))return;const je=!Se&&D.a===1&&q===1&&M.opaquePassEnabledForLayer()?"opaque":"translucent";if(M.renderPass!==je)return;const Je=Bt.disabled,Et=M.depthModeForSublayer(0,je==="opaque"?Le.ReadWrite:Le.ReadOnly),mt=M.colorModeForRenderPass(),wt=M.useProgram(Se?"backgroundPattern":"background"),tr=C||le.coveringTiles({tileSize:de,terrain:M.style.terrain});Se&&(Y.activeTexture.set(oe.TEXTURE0),M.imageManager.bind(M.context));const cr=k.getCrossfadeParameters();for(const Ar of tr){const Dt=C?Ar.posMatrix:M.transform.calculatePosMatrix(Ar.toUnwrapped()),Tr=Se?Mt(Dt,q,M,Se,{tileID:Ar,tileSize:de},cr):dt(Dt,q,D),Ir=M.style.terrain&&M.style.terrain.getTerrainData(Ar);wt.draw(Y,oe.TRIANGLES,Et,Je,mt,ur.disabled,Tr,Ir,k.id,M.tileExtentBuffer,M.quadTriangleIndexBuffer,M.tileExtentSegments)}},debug:function(M,d,k){for(let C=0;C<k.length;C++)wu(M,d,k[C])},custom:function(M,d,k){const C=M.context,D=k.implementation;if(M.renderPass==="offscreen"){const q=D.prerender;q&&(M.setCustomLayerDefaults(),C.setColorMode(M.colorModeForRenderPass()),q.call(D,C.gl,M.transform.customLayerMatrix()),C.setDirty(),M.setBaseState())}else if(M.renderPass==="translucent"){M.setCustomLayerDefaults(),C.setColorMode(M.colorModeForRenderPass()),C.setStencilMode(Bt.disabled);const q=D.renderingMode==="3d"?new Le(M.context.gl.LEQUAL,Le.ReadWrite,M.depthRangeFor3D):M.depthModeForSublayer(0,Le.ReadOnly);C.setDepthMode(q),D.render(C.gl,M.transform.customLayerMatrix()),C.setDirty(),M.setBaseState(),C.bindFramebuffer.set(null)}}};class kl{constructor(d,k){this.context=new te(d),this.transform=k,this._tileTextures={},this.terrainFacilitator={dirty:!0,matrix:l.create(),renderTime:0},this.setup(),this.numSublayers=$t.maxUnderzooming+$t.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new Ai,this.gpuTimers={}}resize(d,k,C){if(this.width=d*C,this.height=k*C,this.pixelRatio=C,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const D of this.style._order)this.style._layers[D].resize()}setup(){const d=this.context,k=new l.PosArray;k.emplaceBack(0,0),k.emplaceBack(l.EXTENT,0),k.emplaceBack(0,l.EXTENT),k.emplaceBack(l.EXTENT,l.EXTENT),this.tileExtentBuffer=d.createVertexBuffer(k,Xi.members),this.tileExtentSegments=l.SegmentVector.simpleSegment(0,0,4,2);const C=new l.PosArray;C.emplaceBack(0,0),C.emplaceBack(l.EXTENT,0),C.emplaceBack(0,l.EXTENT),C.emplaceBack(l.EXTENT,l.EXTENT),this.debugBuffer=d.createVertexBuffer(C,Xi.members),this.debugSegments=l.SegmentVector.simpleSegment(0,0,4,5);const D=new l.RasterBoundsArray;D.emplaceBack(0,0,0,0),D.emplaceBack(l.EXTENT,0,l.EXTENT,0),D.emplaceBack(0,l.EXTENT,0,l.EXTENT),D.emplaceBack(l.EXTENT,l.EXTENT,l.EXTENT,l.EXTENT),this.rasterBoundsBuffer=d.createVertexBuffer(D,ut.members),this.rasterBoundsSegments=l.SegmentVector.simpleSegment(0,0,4,2);const q=new l.PosArray;q.emplaceBack(0,0),q.emplaceBack(1,0),q.emplaceBack(0,1),q.emplaceBack(1,1),this.viewportBuffer=d.createVertexBuffer(q,Xi.members),this.viewportSegments=l.SegmentVector.simpleSegment(0,0,4,2);const Y=new l.LineStripIndexArray;Y.emplaceBack(0),Y.emplaceBack(1),Y.emplaceBack(3),Y.emplaceBack(2),Y.emplaceBack(0),this.tileBorderIndexBuffer=d.createIndexBuffer(Y);const oe=new l.TriangleIndexArray;oe.emplaceBack(0,1,2),oe.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=d.createIndexBuffer(oe),this.emptyTexture=new U(d,{width:1,height:1,data:new Uint8Array([0,0,0,0])},d.gl.RGBA);const le=this.context.gl;this.stencilClearMode=new Bt({func:le.ALWAYS,mask:0},0,255,le.ZERO,le.ZERO,le.ZERO)}clearStencil(){const d=this.context,k=d.gl;this.nextStencilID=1,this.currentStencilSource=void 0;const C=l.create();l.ortho(C,0,this.width,this.height,0,0,1),l.scale(C,C,[k.drawingBufferWidth,k.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(d,k.TRIANGLES,Le.disabled,this.stencilClearMode,Lo.disabled,ur.disabled,Ps(C),null,"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(d,k){if(this.currentStencilSource===d.source||!d.isTileClipped()||!k||!k.length)return;this.currentStencilSource=d.source;const C=this.context,D=C.gl;this.nextStencilID+k.length>256&&this.clearStencil(),C.setColorMode(Lo.disabled),C.setDepthMode(Le.disabled);const q=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(const Y of k){const oe=this._tileClippingMaskIDs[Y.key]=this.nextStencilID++,le=this.style.terrain&&this.style.terrain.getTerrainData(Y);q.draw(C,D.TRIANGLES,Le.disabled,new Bt({func:D.ALWAYS,mask:0},oe,255,D.KEEP,D.KEEP,D.REPLACE),Lo.disabled,ur.disabled,Ps(Y.posMatrix),le,"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const d=this.nextStencilID++,k=this.context.gl;return new Bt({func:k.NOTEQUAL,mask:255},d,255,k.KEEP,k.KEEP,k.REPLACE)}stencilModeForClipping(d){const k=this.context.gl;return new Bt({func:k.EQUAL,mask:255},this._tileClippingMaskIDs[d.key],0,k.KEEP,k.KEEP,k.REPLACE)}stencilConfigForOverlap(d){const k=this.context.gl,C=d.sort((Y,oe)=>oe.overscaledZ-Y.overscaledZ),D=C[C.length-1].overscaledZ,q=C[0].overscaledZ-D+1;if(q>1){this.currentStencilSource=void 0,this.nextStencilID+q>256&&this.clearStencil();const Y={};for(let oe=0;oe<q;oe++)Y[oe+D]=new Bt({func:k.GEQUAL,mask:255},oe+this.nextStencilID,255,k.KEEP,k.KEEP,k.REPLACE);return this.nextStencilID+=q,[Y,C]}return[{[D]:Bt.disabled},C]}colorModeForRenderPass(){const d=this.context.gl;return this._showOverdrawInspector?new Lo([d.CONSTANT_COLOR,d.ONE],new l.Color(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?Lo.unblended:Lo.alphaBlended}depthModeForSublayer(d,k,C){if(!this.opaquePassEnabledForLayer())return Le.disabled;const D=1-((1+this.currentLayer)*this.numSublayers+d)*this.depthEpsilon;return new Le(C||this.context.gl.LEQUAL,k,[D,D])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(d,k){this.style=d,this.options=k,this.lineAtlas=d.lineAtlas,this.imageManager=d.imageManager,this.glyphManager=d.glyphManager,this.symbolFadeChange=d.placement.symbolFadeChange(l.exported.now()),this.imageManager.beginFrame();const C=this.style._order,D=this.style.sourceCaches,q=this.style.terrain&&new Xl(this);for(const de in D){const Se=D[de];Se.used&&Se.prepare(this.context)}const Y={},oe={},le={};for(const de in D){const Se=D[de];Y[de]=Se.getVisibleCoordinates(),oe[de]=Y[de].slice().reverse(),le[de]=Se.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let de=0;de<C.length;de++)if(this.style._layers[C[de]].is3D()){this.opaquePassCutoff=de;break}if(q){this.opaquePassCutoff=0;const de=this.style.terrain.sourceCache.tilesAfterTime(this.terrainFacilitator.renderTime);(this.terrainFacilitator.dirty||!l.equals(this.terrainFacilitator.matrix,this.transform.projMatrix)||de.length)&&(l.copy(this.terrainFacilitator.matrix,this.transform.projMatrix),this.terrainFacilitator.renderTime=Date.now(),this.terrainFacilitator.dirty=!1,function(Se,je){const Je=Se.context,Et=Je.gl,mt=Lo.unblended,wt=new Le(Et.LEQUAL,Le.ReadWrite,[0,1]),tr=je.getTerrainMesh(),cr=je.sourceCache.getRenderableTiles(),Ar=Se.useProgram("terrainDepth");Je.bindFramebuffer.set(je.getFramebuffer("depth").framebuffer),Je.viewport.set([0,0,Se.width/devicePixelRatio,Se.height/devicePixelRatio]),Je.clear({color:l.Color.transparent,depth:1});for(const Dt of cr){const Tr=je.getTerrainData(Dt.tileID),Ir=Se.transform.calculatePosMatrix(Dt.tileID.toUnwrapped());Ar.draw(Je,Et.TRIANGLES,wt,Bt.disabled,mt,ur.backCCW,{u_matrix:Ir},Tr,"terrain",tr.vertexBuffer,tr.indexBuffer,tr.segments)}Je.bindFramebuffer.set(null),Je.viewport.set([0,0,Se.width,Se.height])}(this,this.style.terrain),function(Se,je){const Je=Se.context,Et=Je.gl,mt=Lo.unblended,wt=new Le(Et.LEQUAL,Le.ReadWrite,[0,1]),tr=je.getTerrainMesh(),cr=je.getCoordsTexture(),Ar=je.sourceCache.getRenderableTiles(),Dt=Se.useProgram("terrainCoords");Je.bindFramebuffer.set(je.getFramebuffer("coords").framebuffer),Je.viewport.set([0,0,Se.width/devicePixelRatio,Se.height/devicePixelRatio]),Je.clear({color:l.Color.transparent,depth:1}),je.coordsIndex=[];for(const Tr of Ar){const Ir=je.getTerrainData(Tr.tileID);Je.activeTexture.set(Et.TEXTURE0),Et.bindTexture(Et.TEXTURE_2D,cr.texture);const Zr=Se.transform.calculatePosMatrix(Tr.tileID.toUnwrapped());Dt.draw(Je,Et.TRIANGLES,wt,Bt.disabled,mt,ur.backCCW,{u_matrix:Zr,u_terrain_coords_id:(255-je.coordsIndex.length)/255,u_texture:0},Ir,"terrain",tr.vertexBuffer,tr.indexBuffer,tr.segments),je.coordsIndex.push(Tr.tileID.key)}Je.bindFramebuffer.set(null),Je.viewport.set([0,0,Se.width,Se.height])}(this,this.style.terrain))}this.renderPass="offscreen";for(const de of C){const Se=this.style._layers[de];if(!Se.hasOffscreenPass()||Se.isHidden(this.transform.zoom))continue;const je=oe[Se.source];(Se.type==="custom"||je.length)&&this.renderLayer(this,D[Se.source],Se,je)}if(this.context.bindFramebuffer.set(null),this.context.clear({color:k.showOverdrawInspector?l.Color.black:l.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=k.showOverdrawInspector,this.depthRangeFor3D=[0,1-(d._order.length+2)*this.numSublayers*this.depthEpsilon],!q)for(this.renderPass="opaque",this.currentLayer=C.length-1;this.currentLayer>=0;this.currentLayer--){const de=this.style._layers[C[this.currentLayer]],Se=D[de.source],je=Y[de.source];this._renderTileClippingMasks(de,je),this.renderLayer(this,Se,de,je)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<C.length;this.currentLayer++){const de=this.style._layers[C[this.currentLayer]],Se=D[de.source];if(q&&q.renderLayer(de))continue;const je=(de.type==="symbol"?le:oe)[de.source];this._renderTileClippingMasks(de,Y[de.source]),this.renderLayer(this,Se,de,je)}if(this.options.showTileBoundaries){let de,Se;Object.values(this.style._layers).forEach(je=>{je.source&&!je.isHidden(this.transform.zoom)&&(je.source!==(Se&&Se.id)&&(Se=this.style.sourceCaches[je.source]),(!de||de.getSource().maxzoom<Se.getSource().maxzoom)&&(de=Se))}),de&&Hs.debug(this,de,de.getVisibleCoordinates())}this.options.showPadding&&function(de){const Se=de.transform.padding;Ds(de,de.transform.height-(Se.top||0),3,za),Ds(de,Se.bottom||0,3,Sa),xl(de,Se.left||0,3,Zl),xl(de,de.transform.width-(Se.right||0),3,wl);const je=de.transform.centerPoint;(function(Je,Et,mt,wt){nl(Je,Et-1,mt-10,2,20,wt),nl(Je,Et-10,mt-1,20,2,wt)})(de,je.x,de.transform.height-je.y,Hu)}(this),this.context.setDefault()}renderLayer(d,k,C,D){C.isHidden(this.transform.zoom)||(C.type==="background"||C.type==="custom"||(D||[]).length)&&(this.id=C.id,this.gpuTimingStart(C),Hs[C.type](d,k,C,D,this.style.placement.variableOffsets),this.gpuTimingEnd())}gpuTimingStart(d){if(!this.options.gpuTiming)return;const k=this.context.extTimerQuery;let C=this.gpuTimers[d.id];C||(C=this.gpuTimers[d.id]={calls:0,cpuTime:0,query:k.createQueryEXT()}),C.calls++,k.beginQueryEXT(k.TIME_ELAPSED_EXT,C.query)}gpuTimingEnd(){if(!this.options.gpuTiming)return;const d=this.context.extTimerQuery;d.endQueryEXT(d.TIME_ELAPSED_EXT)}collectGpuTimers(){const d=this.gpuTimers;return this.gpuTimers={},d}queryGpuTimers(d){const k={};for(const C in d){const D=d[C],q=this.context.extTimerQuery,Y=q.getQueryObjectEXT(D.query,q.QUERY_RESULT_EXT)/1e6;q.deleteQueryEXT(D.query),k[C]=Y}return k}translatePosMatrix(d,k,C,D,q){if(!C[0]&&!C[1])return d;const Y=q?D==="map"?this.transform.angle:0:D==="viewport"?-this.transform.angle:0;if(Y){const de=Math.sin(Y),Se=Math.cos(Y);C=[C[0]*Se-C[1]*de,C[0]*de+C[1]*Se]}const oe=[q?C[0]:yo(k,C[0],this.transform.zoom),q?C[1]:yo(k,C[1],this.transform.zoom),0],le=new Float32Array(16);return l.translate(le,d,oe),le}saveTileTexture(d){const k=this._tileTextures[d.size[0]];k?k.push(d):this._tileTextures[d.size[0]]=[d]}getTileTexture(d){const k=this._tileTextures[d];return k&&k.length>0?k.pop():null}isPatternMissing(d){if(!d)return!1;if(!d.from||!d.to)return!0;const k=this.imageManager.getPattern(d.from.toString()),C=this.imageManager.getPattern(d.to.toString());return!k||!C}useProgram(d,k){this.cache=this.cache||{};const C=d+(k?k.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"")+(this.style.terrain?"/terrain":"");return this.cache[C]||(this.cache[C]=new gs(this.context,d,na[d],k,Tt[d],this._showOverdrawInspector,this.style.terrain)),this.cache[C]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const d=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(d.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new U(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy()}}class Ra{constructor(d,k){this.points=d,this.planes=k}static fromInvProjectionMatrix(d,k,C){const D=Math.pow(2,C),q=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(oe=>{const le=1/(oe=l.transformMat4([],oe,d))[3]/k*D;return l.mul$1(oe,oe,[le,le,1/oe[3],le])}),Y=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(oe=>{const le=l.sub([],q[oe[0]],q[oe[1]]),de=l.sub([],q[oe[2]],q[oe[1]]),Se=l.normalize([],l.cross([],le,de)),je=-l.dot(Se,q[oe[1]]);return Se.concat(je)});return new Ra(q,Y)}}class Yl{constructor(d,k){this.min=d,this.max=k,this.center=l.scale$1([],l.add([],this.min,this.max),.5)}quadrant(d){const k=[d%2==0,d<2],C=l.clone$2(this.min),D=l.clone$2(this.max);for(let q=0;q<k.length;q++)C[q]=k[q]?this.min[q]:this.center[q],D[q]=k[q]?this.center[q]:this.max[q];return D[2]=this.max[2],new Yl(C,D)}distanceX(d){return Math.max(Math.min(this.max[0],d[0]),this.min[0])-d[0]}distanceY(d){return Math.max(Math.min(this.max[1],d[1]),this.min[1])-d[1]}intersects(d){const k=[[this.min[0],this.min[1],this.min[2],1],[this.max[0],this.min[1],this.min[2],1],[this.max[0],this.max[1],this.min[2],1],[this.min[0],this.max[1],this.min[2],1],[this.min[0],this.min[1],this.max[2],1],[this.max[0],this.min[1],this.max[2],1],[this.max[0],this.max[1],this.max[2],1],[this.min[0],this.max[1],this.max[2],1]];let C=!0;for(let D=0;D<d.planes.length;D++){const q=d.planes[D];let Y=0;for(let oe=0;oe<k.length;oe++)l.dot$1(q,k[oe])>=0&&Y++;if(Y===0)return 0;Y!==k.length&&(C=!1)}if(C)return 2;for(let D=0;D<3;D++){let q=Number.MAX_VALUE,Y=-Number.MAX_VALUE;for(let oe=0;oe<d.points.length;oe++){const le=d.points[oe][D]-this.min[D];q=Math.min(q,le),Y=Math.max(Y,le)}if(Y<0||q>this.max[D]-this.min[D])return 0}return 1}}class Ws{constructor(d=0,k=0,C=0,D=0){if(isNaN(d)||d<0||isNaN(k)||k<0||isNaN(C)||C<0||isNaN(D)||D<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=d,this.bottom=k,this.left=C,this.right=D}interpolate(d,k,C){return k.top!=null&&d.top!=null&&(this.top=l.number(d.top,k.top,C)),k.bottom!=null&&d.bottom!=null&&(this.bottom=l.number(d.bottom,k.bottom,C)),k.left!=null&&d.left!=null&&(this.left=l.number(d.left,k.left,C)),k.right!=null&&d.right!=null&&(this.right=l.number(d.right,k.right,C)),this}getCenter(d,k){const C=l.clamp((this.left+d-this.right)/2,0,d),D=l.clamp((this.top+k-this.bottom)/2,0,k);return new l.pointGeometry(C,D)}equals(d){return this.top===d.top&&this.bottom===d.bottom&&this.left===d.left&&this.right===d.right}clone(){return new Ws(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}class Al{constructor(d,k,C,D,q){this.tileSize=512,this.maxValidLatitude=85.051129,this.freezeElevation=!1,this._renderWorldCopies=q===void 0||!!q,this._minZoom=d||0,this._maxZoom=k||22,this._minPitch=C??0,this._maxPitch=D??60,this.setMaxBounds(),this.width=0,this.height=0,this._center=new l.LngLat(0,0),this._elevation=0,this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new Ws,this._posMatrixCache={},this._alignedPosMatrixCache={}}clone(){const d=new Al(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return d.tileSize=this.tileSize,d.latRange=this.latRange,d.width=this.width,d.height=this.height,d._center=this._center,d._elevation=this._elevation,d.zoom=this.zoom,d.angle=this.angle,d._fov=this._fov,d._pitch=this._pitch,d._unmodified=this._unmodified,d._edgeInsets=this._edgeInsets.clone(),d._calcMatrices(),d}get minZoom(){return this._minZoom}set minZoom(d){this._minZoom!==d&&(this._minZoom=d,this.zoom=Math.max(this.zoom,d))}get maxZoom(){return this._maxZoom}set maxZoom(d){this._maxZoom!==d&&(this._maxZoom=d,this.zoom=Math.min(this.zoom,d))}get minPitch(){return this._minPitch}set minPitch(d){this._minPitch!==d&&(this._minPitch=d,this.pitch=Math.max(this.pitch,d))}get maxPitch(){return this._maxPitch}set maxPitch(d){this._maxPitch!==d&&(this._maxPitch=d,this.pitch=Math.min(this.pitch,d))}get renderWorldCopies(){return this._renderWorldCopies}set renderWorldCopies(d){d===void 0?d=!0:d===null&&(d=!1),this._renderWorldCopies=d}get worldSize(){return this.tileSize*this.scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new l.pointGeometry(this.width,this.height)}get bearing(){return-this.angle/Math.PI*180}set bearing(d){const k=-l.wrap(d,-180,180)*Math.PI/180;var C;this.angle!==k&&(this._unmodified=!1,this.angle=k,this._calcMatrices(),this.rotationMatrix=(C=new l.ARRAY_TYPE(4),l.ARRAY_TYPE!=Float32Array&&(C[1]=0,C[2]=0),C[0]=1,C[3]=1,C),function(D,q,Y){var oe=q[0],le=q[1],de=q[2],Se=q[3],je=Math.sin(Y),Je=Math.cos(Y);D[0]=oe*Je+de*je,D[1]=le*Je+Se*je,D[2]=oe*-je+de*Je,D[3]=le*-je+Se*Je}(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(d){const k=l.clamp(d,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==k&&(this._unmodified=!1,this._pitch=k,this._calcMatrices())}get fov(){return this._fov/Math.PI*180}set fov(d){d=Math.max(.01,Math.min(60,d)),this._fov!==d&&(this._unmodified=!1,this._fov=d/180*Math.PI,this._calcMatrices())}get zoom(){return this._zoom}set zoom(d){const k=Math.min(Math.max(d,this.minZoom),this.maxZoom);this._zoom!==k&&(this._unmodified=!1,this._zoom=k,this.scale=this.zoomScale(k),this.tileZoom=Math.floor(k),this.zoomFraction=k-this.tileZoom,this._constrain(),this._calcMatrices())}get center(){return this._center}set center(d){d.lat===this._center.lat&&d.lng===this._center.lng||(this._unmodified=!1,this._center=d,this._constrain(),this._calcMatrices())}get elevation(){return this._elevation}set elevation(d){d!==this._elevation&&(this._elevation=d,this._constrain(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}set padding(d){this._edgeInsets.equals(d)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,d,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}isPaddingEqual(d){return this._edgeInsets.equals(d)}interpolatePadding(d,k,C){this._unmodified=!1,this._edgeInsets.interpolate(d,k,C),this._constrain(),this._calcMatrices()}coveringZoomLevel(d){const k=(d.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/d.tileSize));return Math.max(0,k)}getVisibleUnwrappedCoordinates(d){const k=[new l.UnwrappedTileID(0,d)];if(this._renderWorldCopies){const C=this.pointCoordinate(new l.pointGeometry(0,0)),D=this.pointCoordinate(new l.pointGeometry(this.width,0)),q=this.pointCoordinate(new l.pointGeometry(this.width,this.height)),Y=this.pointCoordinate(new l.pointGeometry(0,this.height)),oe=Math.floor(Math.min(C.x,D.x,q.x,Y.x)),le=Math.floor(Math.max(C.x,D.x,q.x,Y.x)),de=1;for(let Se=oe-de;Se<=le+de;Se++)Se!==0&&k.push(new l.UnwrappedTileID(Se,d))}return k}coveringTiles(d){var k,C;let D=this.coveringZoomLevel(d);const q=D;if(d.minzoom!==void 0&&D<d.minzoom)return[];d.maxzoom!==void 0&&D>d.maxzoom&&(D=d.maxzoom);const Y=this.pointCoordinate(this.getCameraPoint()),oe=l.MercatorCoordinate.fromLngLat(this.center),le=Math.pow(2,D),de=[le*Y.x,le*Y.y,0],Se=[le*oe.x,le*oe.y,0],je=Ra.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,D);let Je=d.minzoom||0;!d.terrain&&this.pitch<=60&&this._edgeInsets.top<.1&&(Je=D);const Et=d.terrain?2/Math.min(this.tileSize,d.tileSize)*this.tileSize:3,mt=Dt=>({aabb:new Yl([Dt*le,0,0],[(Dt+1)*le,le,0]),zoom:0,x:0,y:0,wrap:Dt,fullyVisible:!1}),wt=[],tr=[],cr=D,Ar=d.reparseOverscaled?q:D;if(this._renderWorldCopies)for(let Dt=1;Dt<=3;Dt++)wt.push(mt(-Dt)),wt.push(mt(Dt));for(wt.push(mt(0));wt.length>0;){const Dt=wt.pop(),Tr=Dt.x,Ir=Dt.y;let Zr=Dt.fullyVisible;if(!Zr){const Un=Dt.aabb.intersects(je);if(Un===0)continue;Zr=Un===2}const Gr=d.terrain?de:Se,dn=Dt.aabb.distanceX(Gr),qr=Dt.aabb.distanceY(Gr),Mn=Math.max(Math.abs(dn),Math.abs(qr)),En=Et+(1<<cr-Dt.zoom)-2;if(Dt.zoom===cr||Mn>En&&Dt.zoom>=Je){const Un=cr-Dt.zoom,Li=de[0]-.5-(Tr<<Un),Di=de[1]-.5-(Ir<<Un);tr.push({tileID:new l.OverscaledTileID(Dt.zoom===cr?Ar:Dt.zoom,Dt.wrap,Dt.zoom,Tr,Ir),distanceSq:l.sqrLen([Se[0]-.5-Tr,Se[1]-.5-Ir]),tileDistanceToCamera:Math.sqrt(Li*Li+Di*Di)})}else for(let Un=0;Un<4;Un++){const Li=(Tr<<1)+Un%2,Di=(Ir<<1)+(Un>>1),N=Dt.zoom+1;let $=Dt.aabb.quadrant(Un);if(d.terrain){const re=new l.OverscaledTileID(N,Dt.wrap,N,Li,Di),fe=d.terrain.getMinMaxElevation(re),Te=(k=fe.minElevation)!==null&&k!==void 0?k:this.elevation,Oe=(C=fe.maxElevation)!==null&&C!==void 0?C:this.elevation;$=new Yl([$.min[0],$.min[1],Te],[$.max[0],$.max[1],Oe])}wt.push({aabb:$,zoom:N,x:Li,y:Di,wrap:Dt.wrap,fullyVisible:Zr})}}return tr.sort((Dt,Tr)=>Dt.distanceSq-Tr.distanceSq).map(Dt=>Dt.tileID)}resize(d,k){this.width=d,this.height=k,this.pixelsToGLUnits=[2/d,-2/k],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(d){return Math.pow(2,d)}scaleZoom(d){return Math.log(d)/Math.LN2}project(d){const k=l.clamp(d.lat,-this.maxValidLatitude,this.maxValidLatitude);return new l.pointGeometry(l.mercatorXfromLng(d.lng)*this.worldSize,l.mercatorYfromLat(k)*this.worldSize)}unproject(d){return new l.MercatorCoordinate(d.x/this.worldSize,d.y/this.worldSize).toLngLat()}get point(){return this.project(this.center)}updateElevation(d){this.freezeElevation||(this.elevation=d?this.getElevation(this._center,d):0)}getElevation(d,k){const C=l.MercatorCoordinate.fromLngLat(d),D=(1<<this.tileZoom)*l.EXTENT,q=C.x*D,Y=C.y*D,oe=Math.floor(q/l.EXTENT),le=Math.floor(Y/l.EXTENT),de=new l.OverscaledTileID(this.tileZoom,0,this.tileZoom,oe,le);return k.getElevation(de,q%l.EXTENT,Y%l.EXTENT,l.EXTENT)}getCameraPosition(){return{lngLat:this.pointLocation(this.getCameraPoint()),altitude:Math.cos(this._pitch)*this.cameraToCenterDistance/this._pixelPerMeter+this.elevation}}recalculateZoom(d){const k=this.pointLocation(this.centerPoint,d),C=this.getElevation(k,d);if(!(this.elevation-C))return;const D=this.getCameraPosition(),q=l.MercatorCoordinate.fromLngLat(D.lngLat,D.altitude),Y=l.MercatorCoordinate.fromLngLat(k,C),oe=q.x-Y.x,le=q.y-Y.y,de=q.z-Y.z,Se=Math.sqrt(oe*oe+le*le+de*de),je=this.scaleZoom(this.cameraToCenterDistance/Se/this.tileSize);this._elevation=C,this._center=k,this.zoom=je}setLocationAtPoint(d,k){const C=this.pointCoordinate(k),D=this.pointCoordinate(this.centerPoint),q=this.locationCoordinate(d),Y=new l.MercatorCoordinate(q.x-(C.x-D.x),q.y-(C.y-D.y));this.center=this.coordinateLocation(Y),this._renderWorldCopies&&(this.center=this.center.wrap())}locationPoint(d,k){return k?this.coordinatePoint(this.locationCoordinate(d),this.getElevation(d,k),this.pixelMatrix3D):this.coordinatePoint(this.locationCoordinate(d))}pointLocation(d,k){return this.coordinateLocation(this.pointCoordinate(d,k))}locationCoordinate(d){return l.MercatorCoordinate.fromLngLat(d)}coordinateLocation(d){return d&&d.toLngLat()}pointCoordinate(d,k){if(k){const Je=k.pointCoordinate(d);if(Je!=null)return Je}const C=[d.x,d.y,0,1],D=[d.x,d.y,1,1];l.transformMat4(C,C,this.pixelMatrixInverse),l.transformMat4(D,D,this.pixelMatrixInverse);const q=C[3],Y=D[3],oe=C[1]/q,le=D[1]/Y,de=C[2]/q,Se=D[2]/Y,je=de===Se?0:(0-de)/(Se-de);return new l.MercatorCoordinate(l.number(C[0]/q,D[0]/Y,je)/this.worldSize,l.number(oe,le,je)/this.worldSize)}coordinatePoint(d,k=0,C=this.pixelMatrix){const D=[d.x*this.worldSize,d.y*this.worldSize,k,1];return l.transformMat4(D,D,C),new l.pointGeometry(D[0]/D[3],D[1]/D[3])}getBounds(){const d=Math.max(0,this.height/2-this.getHorizon());return new l.LngLatBounds().extend(this.pointLocation(new l.pointGeometry(0,d))).extend(this.pointLocation(new l.pointGeometry(this.width,d))).extend(this.pointLocation(new l.pointGeometry(this.width,this.height))).extend(this.pointLocation(new l.pointGeometry(0,this.height)))}getMaxBounds(){return this.latRange&&this.latRange.length===2&&this.lngRange&&this.lngRange.length===2?new l.LngLatBounds([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null}getHorizon(){return Math.tan(Math.PI/2-this._pitch)*this.cameraToCenterDistance*.85}setMaxBounds(d){d?(this.lngRange=[d.getWest(),d.getEast()],this.latRange=[d.getSouth(),d.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])}calculatePosMatrix(d,k=!1){const C=d.key,D=k?this._alignedPosMatrixCache:this._posMatrixCache;if(D[C])return D[C];const q=d.canonical,Y=this.worldSize/this.zoomScale(q.z),oe=q.x+Math.pow(2,q.z)*d.wrap,le=l.identity(new Float64Array(16));return l.translate(le,le,[oe*Y,q.y*Y,0]),l.scale(le,le,[Y/l.EXTENT,Y/l.EXTENT,1]),l.multiply(le,k?this.alignedProjMatrix:this.projMatrix,le),D[C]=new Float32Array(le),D[C]}customLayerMatrix(){return this.mercatorMatrix.slice()}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;let d,k,C,D,q=-90,Y=90,oe=-180,le=180;const de=this.size,Se=this._unmodified;if(this.latRange){const Et=this.latRange;q=l.mercatorYfromLat(Et[1])*this.worldSize,Y=l.mercatorYfromLat(Et[0])*this.worldSize,d=Y-q<de.y?de.y/(Y-q):0}if(this.lngRange){const Et=this.lngRange;oe=l.wrap(l.mercatorXfromLng(Et[0])*this.worldSize,0,this.worldSize),le=l.wrap(l.mercatorXfromLng(Et[1])*this.worldSize,0,this.worldSize),le<oe&&(le+=this.worldSize),k=le-oe<de.x?de.x/(le-oe):0}const je=this.point,Je=Math.max(k||0,d||0);if(Je)return this.center=this.unproject(new l.pointGeometry(k?(le+oe)/2:je.x,d?(Y+q)/2:je.y)),this.zoom+=this.scaleZoom(Je),this._unmodified=Se,void(this._constraining=!1);if(this.latRange){const Et=je.y,mt=de.y/2;Et-mt<q&&(D=q+mt),Et+mt>Y&&(D=Y-mt)}if(this.lngRange){const Et=(oe+le)/2,mt=l.wrap(je.x,Et-this.worldSize/2,Et+this.worldSize/2),wt=de.x/2;mt-wt<oe&&(C=oe+wt),mt+wt>le&&(C=le-wt)}C===void 0&&D===void 0||(this.center=this.unproject(new l.pointGeometry(C!==void 0?C:je.x,D!==void 0?D:je.y)).wrap()),this._unmodified=Se,this._constraining=!1}_calcMatrices(){if(!this.height)return;const d=this.centerOffset,k=this.point.x,C=this.point.y;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height,this._pixelPerMeter=l.mercatorZfromAltitude(1,this.center.lat)*this.worldSize;let D=l.identity(new Float64Array(16));l.scale(D,D,[this.width/2,-this.height/2,1]),l.translate(D,D,[1,-1,0]),this.labelPlaneMatrix=D,D=l.identity(new Float64Array(16)),l.scale(D,D,[1,-1,1]),l.translate(D,D,[-1,-1,0]),l.scale(D,D,[2/this.width,2/this.height,1]),this.glCoordMatrix=D,this.cameraToSeaLevelDistance=this.cameraToCenterDistance+this._elevation*this._pixelPerMeter/Math.cos(this._pitch);const q=Math.PI/2+this._pitch,Y=this._fov*(.5+d.y/this.height),oe=Math.sin(Y)*this.cameraToSeaLevelDistance/Math.sin(l.clamp(Math.PI-q-Y,.01,Math.PI-.01)),le=this.getHorizon(),de=2*Math.atan(le/this.cameraToCenterDistance)*(.5+d.y/(2*le)),Se=Math.sin(de)*this.cameraToSeaLevelDistance/Math.sin(l.clamp(Math.PI-q-de,.01,Math.PI-.01)),je=Math.cos(Math.PI/2-this._pitch)*oe+this.cameraToSeaLevelDistance,Je=Math.cos(Math.PI/2-this._pitch)*Se+this.cameraToSeaLevelDistance,Et=1.01*Math.min(je,Je),mt=this.height/50;D=new Float64Array(16),l.perspective(D,this._fov,this.width/this.height,mt,Et),D[8]=2*-d.x/this.width,D[9]=2*d.y/this.height,l.scale(D,D,[1,-1,1]),l.translate(D,D,[0,0,-this.cameraToCenterDistance]),l.rotateX(D,D,this._pitch),l.rotateZ(D,D,this.angle),l.translate(D,D,[-k,-C,0]),this.mercatorMatrix=l.scale([],D,[this.worldSize,this.worldSize,this.worldSize]),l.scale(D,D,[1,1,this._pixelPerMeter]),this.pixelMatrix=l.multiply(new Float64Array(16),this.labelPlaneMatrix,D),l.translate(D,D,[0,0,-this.elevation]),this.projMatrix=D,this.invProjMatrix=l.invert([],D),this.pixelMatrix3D=l.multiply(new Float64Array(16),this.labelPlaneMatrix,D);const wt=this.width%2/2,tr=this.height%2/2,cr=Math.cos(this.angle),Ar=Math.sin(this.angle),Dt=k-Math.round(k)+cr*wt+Ar*tr,Tr=C-Math.round(C)+cr*tr+Ar*wt,Ir=new Float64Array(D);if(l.translate(Ir,Ir,[Dt>.5?Dt-1:Dt,Tr>.5?Tr-1:Tr,0]),this.alignedProjMatrix=Ir,D=l.invert(new Float64Array(16),this.pixelMatrix),!D)throw new Error("failed to invert matrix");this.pixelMatrixInverse=D,this._posMatrixCache={},this._alignedPosMatrixCache={}}maxPitchScaleFactor(){if(!this.pixelMatrixInverse)return 1;const d=this.pointCoordinate(new l.pointGeometry(0,0)),k=[d.x*this.worldSize,d.y*this.worldSize,0,1];return l.transformMat4(k,k,this.pixelMatrix)[3]/this.cameraToCenterDistance}getCameraPoint(){const d=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new l.pointGeometry(0,d))}getCameraQueryGeometry(d){const k=this.getCameraPoint();if(d.length===1)return[d[0],k];{let C=k.x,D=k.y,q=k.x,Y=k.y;for(const oe of d)C=Math.min(C,oe.x),D=Math.min(D,oe.y),q=Math.max(q,oe.x),Y=Math.max(Y,oe.y);return[new l.pointGeometry(C,D),new l.pointGeometry(q,D),new l.pointGeometry(q,Y),new l.pointGeometry(C,Y),new l.pointGeometry(C,D)]}}}class is{constructor(d){this._hashName=d&&encodeURIComponent(d),l.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=function(k,C){let D=!1,q=null;const Y=()=>{q=null,D&&(k(),q=setTimeout(Y,300),D=!1)};return()=>(D=!0,q||Y(),q)}(this._updateHashUnthrottled.bind(this))}addTo(d){return this._map=d,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this}getHashString(d){const k=this._map.getCenter(),C=Math.round(100*this._map.getZoom())/100,D=Math.ceil((C*Math.LN2+Math.log(512/360/.5))/Math.LN10),q=Math.pow(10,D),Y=Math.round(k.lng*q)/q,oe=Math.round(k.lat*q)/q,le=this._map.getBearing(),de=this._map.getPitch();let Se="";if(Se+=d?`/${Y}/${oe}/${C}`:`${C}/${oe}/${Y}`,(le||de)&&(Se+="/"+Math.round(10*le)/10),de&&(Se+=`/${Math.round(de)}`),this._hashName){const je=this._hashName;let Je=!1;const Et=window.location.hash.slice(1).split("&").map(mt=>{const wt=mt.split("=")[0];return wt===je?(Je=!0,`${wt}=${Se}`):mt}).filter(mt=>mt);return Je||Et.push(`${je}=${Se}`),`#${Et.join("&")}`}return`#${Se}`}_getCurrentHash(){const d=window.location.hash.replace("#","");if(this._hashName){let k;return d.split("&").map(C=>C.split("=")).forEach(C=>{C[0]===this._hashName&&(k=C)}),(k&&k[1]||"").split("/")}return d.split("/")}_onHashChange(){const d=this._getCurrentHash();if(d.length>=3&&!d.some(k=>isNaN(k))){const k=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(d[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+d[2],+d[1]],zoom:+d[0],bearing:k,pitch:+(d[4]||0)}),!0}return!1}_updateHashUnthrottled(){const d=window.location.href.replace(/(#.+)?$/,this.getHashString());try{window.history.replaceState(window.history.state,null,d)}catch{}}}const El={linearity:.3,easing:l.bezier(0,0,.3,1)},cc=l.extend({deceleration:2500,maxSpeed:1400},El),Dc=l.extend({deceleration:20,maxSpeed:1400},El),Sl=l.extend({deceleration:1e3,maxSpeed:360},El),Ga=l.extend({deceleration:1e3,maxSpeed:90},El);class zs{constructor(d){this._map=d,this.clear()}clear(){this._inertiaBuffer=[]}record(d){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:l.exported.now(),settings:d})}_drainInertiaBuffer(){const d=this._inertiaBuffer,k=l.exported.now();for(;d.length>0&&k-d[0].time>160;)d.shift()}_onMoveEnd(d){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const k={zoom:0,bearing:0,pitch:0,pan:new l.pointGeometry(0,0),pinchAround:void 0,around:void 0};for(const{settings:q}of this._inertiaBuffer)k.zoom+=q.zoomDelta||0,k.bearing+=q.bearingDelta||0,k.pitch+=q.pitchDelta||0,q.panDelta&&k.pan._add(q.panDelta),q.around&&(k.around=q.around),q.pinchAround&&(k.pinchAround=q.pinchAround);const C=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,D={};if(k.pan.mag()){const q=Ya(k.pan.mag(),C,l.extend({},cc,d||{}));D.offset=k.pan.mult(q.amount/k.pan.mag()),D.center=this._map.transform.center,Ns(D,q)}if(k.zoom){const q=Ya(k.zoom,C,Dc);D.zoom=this._map.transform.zoom+q.amount,Ns(D,q)}if(k.bearing){const q=Ya(k.bearing,C,Sl);D.bearing=this._map.transform.bearing+l.clamp(q.amount,-179,179),Ns(D,q)}if(k.pitch){const q=Ya(k.pitch,C,Ga);D.pitch=this._map.transform.pitch+q.amount,Ns(D,q)}if(D.zoom||D.bearing){const q=k.pinchAround===void 0?k.around:k.pinchAround;D.around=q?this._map.unproject(q):this._map.getCenter()}return this.clear(),l.extend(D,{noMoveStart:!0})}}function Ns(M,d){(!M.duration||M.duration<d.duration)&&(M.duration=d.duration,M.easing=d.easing)}function Ya(M,d,k){const{maxSpeed:C,linearity:D,deceleration:q}=k,Y=l.clamp(M*D/(d/1e3),-C,C),oe=Math.abs(Y)/(q*D);return{easing:k.easing,duration:1e3*oe,amount:Y*(oe/2)}}class sa extends l.Event{constructor(d,k,C,D={}){const q=T.mousePos(k.getCanvasContainer(),C),Y=k.unproject(q);super(d,l.extend({point:q,lngLat:Y,originalEvent:C},D)),this._defaultPrevented=!1,this.target=k}preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}}class Rs extends l.Event{constructor(d,k,C){const D=d==="touchend"?C.changedTouches:C.touches,q=T.touchPos(k.getCanvasContainer(),D),Y=q.map(le=>k.unproject(le)),oe=q.reduce((le,de,Se,je)=>le.add(de.div(je.length)),new l.pointGeometry(0,0));super(d,{points:q,point:oe,lngLats:Y,lngLat:k.unproject(oe),originalEvent:C}),this._defaultPrevented=!1}preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}}class la extends l.Event{constructor(d,k,C){super(d,{originalEvent:C}),this._defaultPrevented=!1}preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}}class Wu{constructor(d,k){this._map=d,this._clickTolerance=k.clickTolerance}reset(){delete this._mousedownPos}wheel(d){return this._firePreventable(new la(d.type,this._map,d))}mousedown(d,k){return this._mousedownPos=k,this._firePreventable(new sa(d.type,this._map,d))}mouseup(d){this._map.fire(new sa(d.type,this._map,d))}click(d,k){this._mousedownPos&&this._mousedownPos.dist(k)>=this._clickTolerance||this._map.fire(new sa(d.type,this._map,d))}dblclick(d){return this._firePreventable(new sa(d.type,this._map,d))}mouseover(d){this._map.fire(new sa(d.type,this._map,d))}mouseout(d){this._map.fire(new sa(d.type,this._map,d))}touchstart(d){return this._firePreventable(new Rs(d.type,this._map,d))}touchmove(d){this._map.fire(new Rs(d.type,this._map,d))}touchend(d){this._map.fire(new Rs(d.type,this._map,d))}touchcancel(d){this._map.fire(new Rs(d.type,this._map,d))}_firePreventable(d){if(this._map.fire(d),d.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class cs{constructor(d){this._map=d}reset(){this._delayContextMenu=!1,this._ignoreContextMenu=!0,delete this._contextMenuEvent}mousemove(d){this._map.fire(new sa(d.type,this._map,d))}mousedown(){this._delayContextMenu=!0,this._ignoreContextMenu=!1}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new sa("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(d){this._delayContextMenu?this._contextMenuEvent=d:this._ignoreContextMenu||this._map.fire(new sa(d.type,this._map,d)),this._map.listens("contextmenu")&&d.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class fs{constructor(d,k){this._map=d,this._el=d.getCanvasContainer(),this._container=d.getContainer(),this._clickTolerance=k.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(d,k){this.isEnabled()&&d.shiftKey&&d.button===0&&(T.disableDrag(),this._startPos=this._lastPos=k,this._active=!0)}mousemoveWindow(d,k){if(!this._active)return;const C=k;if(this._lastPos.equals(C)||!this._box&&C.dist(this._startPos)<this._clickTolerance)return;const D=this._startPos;this._lastPos=C,this._box||(this._box=T.create("div","maplibregl-boxzoom mapboxgl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair","mapboxgl-crosshair"),this._fireEvent("boxzoomstart",d));const q=Math.min(D.x,C.x),Y=Math.max(D.x,C.x),oe=Math.min(D.y,C.y),le=Math.max(D.y,C.y);T.setTransform(this._box,`translate(${q}px,${oe}px)`),this._box.style.width=Y-q+"px",this._box.style.height=le-oe+"px"}mouseupWindow(d,k){if(!this._active||d.button!==0)return;const C=this._startPos,D=k;if(this.reset(),T.suppressClick(),C.x!==D.x||C.y!==D.y)return this._map.fire(new l.Event("boxzoomend",{originalEvent:d})),{cameraAnimation:q=>q.fitScreenCoordinates(C,D,this._map.getBearing(),{linear:!0})};this._fireEvent("boxzoomcancel",d)}keydown(d){this._active&&d.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",d))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair","mapboxgl-crosshair"),this._box&&(T.remove(this._box),this._box=null),T.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(d,k){return this._map.fire(new l.Event(d,{originalEvent:k}))}}function no(M,d){if(M.length!==d.length)throw new Error(`The number of touches and points are not equal - touches ${M.length}, points ${d.length}`);const k={};for(let C=0;C<M.length;C++)k[M[C].identifier]=d[C];return k}class ks{constructor(d){this.reset(),this.numTouches=d.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(d,k,C){(this.centroid||C.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=d.timeStamp),C.length===this.numTouches&&(this.centroid=function(D){const q=new l.pointGeometry(0,0);for(const Y of D)q._add(Y);return q.div(D.length)}(k),this.touches=no(C,k)))}touchmove(d,k,C){if(this.aborted||!this.centroid)return;const D=no(C,k);for(const q in this.touches){const Y=this.touches[q],oe=D[q];(!oe||oe.dist(Y)>30)&&(this.aborted=!0)}}touchend(d,k,C){if((!this.centroid||d.timeStamp-this.startTime>500)&&(this.aborted=!0),C.length===0){const D=!this.aborted&&this.centroid;if(this.reset(),D)return D}}}class il{constructor(d){this.singleTap=new ks(d),this.numTaps=d.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(d,k,C){this.singleTap.touchstart(d,k,C)}touchmove(d,k,C){this.singleTap.touchmove(d,k,C)}touchend(d,k,C){const D=this.singleTap.touchend(d,k,C);if(D){const q=d.timeStamp-this.lastTime<500,Y=!this.lastTap||this.lastTap.dist(D)<30;if(q&&Y||this.reset(),this.count++,this.lastTime=d.timeStamp,this.lastTap=D,this.count===this.numTaps)return this.reset(),D}}}class Jl{constructor(){this._zoomIn=new il({numTouches:1,numTaps:2}),this._zoomOut=new il({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(d,k,C){this._zoomIn.touchstart(d,k,C),this._zoomOut.touchstart(d,k,C)}touchmove(d,k,C){this._zoomIn.touchmove(d,k,C),this._zoomOut.touchmove(d,k,C)}touchend(d,k,C){const D=this._zoomIn.touchend(d,k,C),q=this._zoomOut.touchend(d,k,C);return D?(this._active=!0,d.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:Y=>Y.easeTo({duration:300,zoom:Y.getZoom()+1,around:Y.unproject(D)},{originalEvent:d})}):q?(this._active=!0,d.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:Y=>Y.easeTo({duration:300,zoom:Y.getZoom()-1,around:Y.unproject(q)},{originalEvent:d})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}const ku={0:1,2:2};class Ca{constructor(d){this.reset(),this._clickTolerance=d.clickTolerance||1}reset(){this._active=!1,this._moved=!1,delete this._lastPoint,delete this._eventButton}_correctButton(d,k){return!1}_move(d,k){return{}}mousedown(d,k){if(this._lastPoint)return;const C=T.mouseButton(d);this._correctButton(d,C)&&(this._lastPoint=k,this._eventButton=C)}mousemoveWindow(d,k){const C=this._lastPoint;if(C){if(d.preventDefault(),function(D,q){const Y=ku[q];return D.buttons===void 0||(D.buttons&Y)!==Y}(d,this._eventButton))this.reset();else if(this._moved||!(k.dist(C)<this._clickTolerance))return this._moved=!0,this._lastPoint=k,this._move(C,k)}}mouseupWindow(d){this._lastPoint&&T.mouseButton(d)===this._eventButton&&(this._moved&&T.suppressClick(),this.reset())}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Cl extends Ca{mousedown(d,k){super.mousedown(d,k),this._lastPoint&&(this._active=!0)}_correctButton(d,k){return k===0&&!d.ctrlKey}_move(d,k){return{around:k,panDelta:k.sub(d)}}}class ba extends Ca{_correctButton(d,k){return k===0&&d.ctrlKey||k===2}_move(d,k){const C=.8*(k.x-d.x);if(C)return this._active=!0,{bearingDelta:C}}contextmenu(d){d.preventDefault()}}class Pn extends Ca{_correctButton(d,k){return k===0&&d.ctrlKey||k===2}_move(d,k){const C=-.5*(k.y-d.y);if(C)return this._active=!0,{pitchDelta:C}}contextmenu(d){d.preventDefault()}}class Oo{constructor(d,k){this._minTouches=d.cooperativeGestures?2:1,this._clickTolerance=d.clickTolerance||1,this._map=k,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new l.pointGeometry(0,0),setTimeout(()=>{this._cancelCooperativeMessage=!1},200)}touchstart(d,k,C){return this._calculateTransform(d,k,C)}touchmove(d,k,C){if(this._map._cooperativeGestures&&(this._minTouches===2&&C.length<2&&!this._cancelCooperativeMessage?this._map._onCooperativeGesture(d,!1,C.length):this._cancelCooperativeMessage||(this._cancelCooperativeMessage=!0)),this._active&&!(C.length<this._minTouches))return d.preventDefault(),this._calculateTransform(d,k,C)}touchend(d,k,C){this._calculateTransform(d,k,C),this._active&&C.length<this._minTouches&&this.reset()}touchcancel(){this.reset()}_calculateTransform(d,k,C){C.length>0&&(this._active=!0);const D=no(C,k),q=new l.pointGeometry(0,0),Y=new l.pointGeometry(0,0);let oe=0;for(const de in D){const Se=D[de],je=this._touches[de];je&&(q._add(Se),Y._add(Se.sub(je)),oe++,D[de]=Se)}if(this._touches=D,oe<this._minTouches||!Y.mag())return;const le=Y.div(oe);return this._sum._add(le),this._sum.mag()<this._clickTolerance?void 0:{around:q.div(oe),panDelta:le}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Ji{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}_start(d){}_move(d,k,C){return{}}touchstart(d,k,C){this._firstTwoTouches||C.length<2||(this._firstTwoTouches=[C[0].identifier,C[1].identifier],this._start([k[0],k[1]]))}touchmove(d,k,C){if(!this._firstTwoTouches)return;d.preventDefault();const[D,q]=this._firstTwoTouches,Y=Fo(C,k,D),oe=Fo(C,k,q);if(!Y||!oe)return;const le=this._aroundCenter?null:Y.add(oe).div(2);return this._move([Y,oe],le,d)}touchend(d,k,C){if(!this._firstTwoTouches)return;const[D,q]=this._firstTwoTouches,Y=Fo(C,k,D),oe=Fo(C,k,q);Y&&oe||(this._active&&T.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(d){this._enabled=!0,this._aroundCenter=!!d&&d.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}function Fo(M,d,k){for(let C=0;C<M.length;C++)if(M[C].identifier===k)return d[C]}function ga(M,d){return Math.log(M/d)/Math.LN2}class An extends Ji{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(d){this._startDistance=this._distance=d[0].dist(d[1])}_move(d,k){const C=this._distance;if(this._distance=d[0].dist(d[1]),this._active||!(Math.abs(ga(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:ga(this._distance,C),pinchAround:k}}}function As(M,d){return 180*M.angleWith(d)/Math.PI}class Zu extends Ji{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(d){this._startVector=this._vector=d[0].sub(d[1]),this._minDiameter=d[0].dist(d[1])}_move(d,k){const C=this._vector;if(this._vector=d[0].sub(d[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:As(this._vector,C),pinchAround:k}}_isBelowThreshold(d){this._minDiameter=Math.min(this._minDiameter,d.mag());const k=25/(Math.PI*this._minDiameter)*360,C=As(d,this._startVector);return Math.abs(C)<k}}function Xu(M){return Math.abs(M.y)>Math.abs(M.x)}class zc extends Ji{constructor(d){super(),this._map=d}reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}touchstart(d,k,C){super.touchstart(d,k,C),this._currentTouchCount=C.length}_start(d){this._lastPoints=d,Xu(d[0].sub(d[1]))&&(this._valid=!1)}_move(d,k,C){if(this._map._cooperativeGestures&&this._currentTouchCount<3)return;const D=d[0].sub(this._lastPoints[0]),q=d[1].sub(this._lastPoints[1]);return this._valid=this.gestureBeginsVertically(D,q,C.timeStamp),this._valid?(this._lastPoints=d,this._active=!0,{pitchDelta:(D.y+q.y)/2*-.5}):void 0}gestureBeginsVertically(d,k,C){if(this._valid!==void 0)return this._valid;const D=d.mag()>=2,q=k.mag()>=2;if(!D&&!q)return;if(!D||!q)return this._firstMove===void 0&&(this._firstMove=C),C-this._firstMove<100&&void 0;const Y=d.y>0==k.y>0;return Xu(d)&&Xu(k)&&Y}}const e0={panStep:100,bearingStep:15,pitchStep:10};class t0{constructor(){const d=e0;this._panStep=d.panStep,this._bearingStep=d.bearingStep,this._pitchStep=d.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(d){if(d.altKey||d.ctrlKey||d.metaKey)return;let k=0,C=0,D=0,q=0,Y=0;switch(d.keyCode){case 61:case 107:case 171:case 187:k=1;break;case 189:case 109:case 173:k=-1;break;case 37:d.shiftKey?C=-1:(d.preventDefault(),q=-1);break;case 39:d.shiftKey?C=1:(d.preventDefault(),q=1);break;case 38:d.shiftKey?D=1:(d.preventDefault(),Y=-1);break;case 40:d.shiftKey?D=-1:(d.preventDefault(),Y=1);break;default:return}return this._rotationDisabled&&(C=0,D=0),{cameraAnimation:oe=>{const le=oe.getZoom();oe.easeTo({duration:300,easeId:"keyboardHandler",easing:b0,zoom:k?Math.round(le)+k*(d.shiftKey?2:1):le,bearing:oe.getBearing()+C*this._bearingStep,pitch:oe.getPitch()+D*this._pitchStep,offset:[-q*this._panStep,-Y*this._panStep],center:oe.getCenter()},{originalEvent:d})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function b0(M){return M*(2-M)}const Mi=4.000244140625;class Nc{constructor(d,k){this._map=d,this._el=d.getCanvasContainer(),this._handler=k,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222,l.bindAll(["_onTimeout"],this)}setZoomRate(d){this._defaultZoomRate=d}setWheelZoomRate(d){this._wheelZoomRate=d}isEnabled(){return!!this._enabled}isActive(){return!!this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(d){this.isEnabled()||(this._enabled=!0,this._aroundCenter=d&&d.around==="center")}disable(){this.isEnabled()&&(this._enabled=!1)}wheel(d){if(!this.isEnabled())return;if(this._map._cooperativeGestures){if(!this._map._metaPress)return;d.preventDefault()}let k=d.deltaMode===WheelEvent.DOM_DELTA_LINE?40*d.deltaY:d.deltaY;const C=l.exported.now(),D=C-(this._lastWheelEventTime||0);this._lastWheelEventTime=C,k!==0&&k%Mi==0?this._type="wheel":k!==0&&Math.abs(k)<4?this._type="trackpad":D>400?(this._type=null,this._lastValue=k,this._timeout=setTimeout(this._onTimeout,40,d)):this._type||(this._type=Math.abs(D*k)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,k+=this._lastValue)),d.shiftKey&&k&&(k/=4),this._type&&(this._lastWheelEvent=d,this._delta-=k,this._active||this._start(d)),d.preventDefault()}_onTimeout(d){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(d)}_start(d){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const k=T.mousePos(this._el,d);this._around=l.LngLat.convert(this._aroundCenter?this._map.getCenter():this._map.unproject(k)),this._aroundPoint=this._map.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const d=this._map.transform;if(this._delta!==0){const oe=this._type==="wheel"&&Math.abs(this._delta)>Mi?this._wheelZoomRate:this._defaultZoomRate;let le=2/(1+Math.exp(-Math.abs(this._delta*oe)));this._delta<0&&le!==0&&(le=1/le);const de=typeof this._targetZoom=="number"?d.zoomScale(this._targetZoom):d.scale;this._targetZoom=Math.min(d.maxZoom,Math.max(d.minZoom,d.scaleZoom(de*le))),this._type==="wheel"&&(this._startZoom=d.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}const k=typeof this._targetZoom=="number"?this._targetZoom:d.zoom,C=this._startZoom,D=this._easing;let q,Y=!1;if(this._type==="wheel"&&C&&D){const oe=Math.min((l.exported.now()-this._lastWheelEventTime)/200,1),le=D(oe);q=l.number(C,k,le),oe<1?this._frameId||(this._frameId=!0):Y=!0}else q=k,Y=!0;return this._active=!0,Y&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._handler._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!Y,zoomDelta:q-d.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(d){let k=l.ease;if(this._prevEase){const C=this._prevEase,D=(l.exported.now()-C.start)/C.duration,q=C.easing(D+.01)-C.easing(D),Y=.27/Math.sqrt(q*q+1e-4)*.01,oe=Math.sqrt(.0729-Y*Y);k=l.bezier(Y,oe,.25,1)}return this._prevEase={start:l.exported.now(),duration:d,easing:k},k}reset(){this._active=!1}}class fc{constructor(d,k){this._clickZoom=d,this._tapZoom=k}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class ua{constructor(){this.reset()}reset(){this._active=!1}dblclick(d,k){return d.preventDefault(),{cameraAnimation:C=>{C.easeTo({duration:300,zoom:C.getZoom()+(d.shiftKey?-1:1),around:C.unproject(k)},{originalEvent:d})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class os{constructor(){this._tap=new il({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,this._tap.reset()}touchstart(d,k,C){this._swipePoint||(this._tapTime&&d.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?C.length>0&&(this._swipePoint=k[0],this._swipeTouch=C[0].identifier):this._tap.touchstart(d,k,C))}touchmove(d,k,C){if(this._tapTime){if(this._swipePoint){if(C[0].identifier!==this._swipeTouch)return;const D=k[0],q=D.y-this._swipePoint.y;return this._swipePoint=D,d.preventDefault(),this._active=!0,{zoomDelta:q/128}}}else this._tap.touchmove(d,k,C)}touchend(d,k,C){this._tapTime?this._swipePoint&&C.length===0&&this.reset():this._tap.touchend(d,k,C)&&(this._tapTime=d.timeStamp)}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class ia{constructor(d,k,C){this._el=d,this._mousePan=k,this._touchPan=C}enable(d){this._inertiaOptions=d||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan","mapboxgl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan","mapboxgl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class Zs{constructor(d,k,C){this._pitchWithRotate=d.pitchWithRotate,this._mouseRotate=k,this._mousePitch=C}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class hc{constructor(d,k,C,D){this._el=d,this._touchZoom=k,this._touchRotate=C,this._tapDragZoom=D,this._rotationDisabled=!1,this._enabled=!0}enable(d){this._touchZoom.enable(d),this._rotationDisabled||this._touchRotate.enable(d),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate","mapboxgl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate","mapboxgl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}const Kl=M=>M.zoom||M.drag||M.pitch||M.rotate;class Ql extends l.Event{}function eu(M){return M.panDelta&&M.panDelta.mag()||M.zoomDelta||M.bearingDelta||M.pitchDelta}class ho{constructor(d,k){this._map=d,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new zs(d),this._bearingSnap=k.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(k),l.bindAll(["handleEvent","handleWindowEvent"],this);const C=this._el;this._listeners=[[C,"touchstart",{passive:!0}],[C,"touchmove",{passive:!1}],[C,"touchend",void 0],[C,"touchcancel",void 0],[C,"mousedown",void 0],[C,"mousemove",void 0],[C,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[C,"mouseover",void 0],[C,"mouseout",void 0],[C,"dblclick",void 0],[C,"click",void 0],[C,"keydown",{capture:!1}],[C,"keyup",void 0],[C,"wheel",{passive:!1}],[C,"contextmenu",void 0],[window,"blur",void 0]];for(const[D,q,Y]of this._listeners)T.addEventListener(D,q,D===document?this.handleWindowEvent:this.handleEvent,Y)}destroy(){for(const[d,k,C]of this._listeners)T.removeEventListener(d,k,d===document?this.handleWindowEvent:this.handleEvent,C)}_addDefaultHandlers(d){const k=this._map,C=k.getCanvasContainer();this._add("mapEvent",new Wu(k,d));const D=k.boxZoom=new fs(k,d);this._add("boxZoom",D);const q=new Jl,Y=new ua;k.doubleClickZoom=new fc(Y,q),this._add("tapZoom",q),this._add("clickZoom",Y);const oe=new os;this._add("tapDragZoom",oe);const le=k.touchPitch=new zc(k);this._add("touchPitch",le);const de=new ba(d),Se=new Pn(d);k.dragRotate=new Zs(d,de,Se),this._add("mouseRotate",de,["mousePitch"]),this._add("mousePitch",Se,["mouseRotate"]);const je=new Cl(d),Je=new Oo(d,k);k.dragPan=new ia(C,je,Je),this._add("mousePan",je),this._add("touchPan",Je,["touchZoom","touchRotate"]);const Et=new Zu,mt=new An;k.touchZoomRotate=new hc(C,mt,Et,oe),this._add("touchRotate",Et,["touchPan","touchZoom"]),this._add("touchZoom",mt,["touchPan","touchRotate"]);const wt=k.scrollZoom=new Nc(k,this);this._add("scrollZoom",wt,["mousePan"]);const tr=k.keyboard=new t0;this._add("keyboard",tr),this._add("blockableMapEvent",new cs(k));for(const cr of["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"])d.interactive&&d[cr]&&k[cr].enable(d[cr])}_add(d,k,C){this._handlers.push({handlerName:d,handler:k,allowed:C}),this._handlersById[d]=k}stop(d){if(!this._updatingCamera){for(const{handler:k}of this._handlers)k.reset();this._inertia.clear(),this._fireEvents({},{},d),this._changes=[]}}isActive(){for(const{handler:d}of this._handlers)if(d.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return Boolean(Kl(this._eventsInProgress))||this.isZooming()}_blockedByActive(d,k,C){for(const D in d)if(D!==C&&(!k||k.indexOf(D)<0))return!0;return!1}handleWindowEvent(d){this.handleEvent(d,`${d.type}Window`)}_getMapTouches(d){const k=[];for(const C of d)this._el.contains(C.target)&&k.push(C);return k}handleEvent(d,k){if(d.type==="blur")return void this.stop(!0);this._updatingCamera=!0;const C=d.type==="renderFrame"?void 0:d,D={needsRenderFrame:!1},q={},Y={},oe=d.touches,le=oe?this._getMapTouches(oe):void 0,de=le?T.touchPos(this._el,le):T.mousePos(this._el,d);for(const{handlerName:Je,handler:Et,allowed:mt}of this._handlers){if(!Et.isEnabled())continue;let wt;this._blockedByActive(Y,mt,Je)?Et.reset():Et[k||d.type]&&(wt=Et[k||d.type](d,de,le),this.mergeHandlerResult(D,q,wt,Je,C),wt&&wt.needsRenderFrame&&this._triggerRenderFrame()),(wt||Et.isActive())&&(Y[Je]=Et)}const Se={};for(const Je in this._previousActiveHandlers)Y[Je]||(Se[Je]=C);this._previousActiveHandlers=Y,(Object.keys(Se).length||eu(D))&&(this._changes.push([D,q,Se]),this._triggerRenderFrame()),(Object.keys(Y).length||eu(D))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:je}=D;je&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],je(this._map))}mergeHandlerResult(d,k,C,D,q){if(!C)return;l.extend(d,C);const Y={handlerName:D,originalEvent:C.originalEvent||q};C.zoomDelta!==void 0&&(k.zoom=Y),C.panDelta!==void 0&&(k.drag=Y),C.pitchDelta!==void 0&&(k.pitch=Y),C.bearingDelta!==void 0&&(k.rotate=Y)}_applyChanges(){const d={},k={},C={};for(const[D,q,Y]of this._changes)D.panDelta&&(d.panDelta=(d.panDelta||new l.pointGeometry(0,0))._add(D.panDelta)),D.zoomDelta&&(d.zoomDelta=(d.zoomDelta||0)+D.zoomDelta),D.bearingDelta&&(d.bearingDelta=(d.bearingDelta||0)+D.bearingDelta),D.pitchDelta&&(d.pitchDelta=(d.pitchDelta||0)+D.pitchDelta),D.around!==void 0&&(d.around=D.around),D.pinchAround!==void 0&&(d.pinchAround=D.pinchAround),D.noInertia&&(d.noInertia=D.noInertia),l.extend(k,q),l.extend(C,Y);this._updateMapTransform(d,k,C),this._changes=[]}_updateMapTransform(d,k,C){const D=this._map,q=D.transform,Y=D.style&&D.style.terrain;if(!(eu(d)||Y&&this._drag))return this._fireEvents(k,C,!0);let{panDelta:oe,zoomDelta:le,bearingDelta:de,pitchDelta:Se,around:je,pinchAround:Je}=d;Je!==void 0&&(je=Je),D._stop(!0),je=je||D.transform.centerPoint;const Et=q.pointLocation(oe?je.sub(oe):je);de&&(q.bearing+=de),Se&&(q.pitch+=Se),le&&(q.zoom+=le),Y?k.drag&&!this._drag?(this._drag={center:q.centerPoint,lngLat:q.pointLocation(je),point:je,handlerName:k.drag.handlerName},D.fire(new l.Event("freezeElevation",{freeze:!0}))):this._drag&&C[this._drag.handlerName]?(D.fire(new l.Event("freezeElevation",{freeze:!1})),this._drag=null):k.drag&&this._drag&&(q.center=q.pointLocation(q.centerPoint.sub(oe))):q.setLocationAtPoint(Et,je),this._map._update(),d.noInertia||this._inertia.record(d),this._fireEvents(k,C,!0)}_fireEvents(d,k,C){const D=Kl(this._eventsInProgress),q=Kl(d),Y={};for(const Se in d){const{originalEvent:je}=d[Se];this._eventsInProgress[Se]||(Y[`${Se}start`]=je),this._eventsInProgress[Se]=d[Se]}!D&&q&&this._fireEvent("movestart",q.originalEvent);for(const Se in Y)this._fireEvent(Se,Y[Se]);q&&this._fireEvent("move",q.originalEvent);for(const Se in d){const{originalEvent:je}=d[Se];this._fireEvent(Se,je)}const oe={};let le;for(const Se in this._eventsInProgress){const{handlerName:je,originalEvent:Je}=this._eventsInProgress[Se];this._handlersById[je].isActive()||(delete this._eventsInProgress[Se],le=k[je]||Je,oe[`${Se}end`]=le)}for(const Se in oe)this._fireEvent(Se,oe[Se]);const de=Kl(this._eventsInProgress);if(C&&(D||q)&&!de){this._updatingCamera=!0;const Se=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),je=Je=>Je!==0&&-this._bearingSnap<Je&&Je<this._bearingSnap;Se?(je(Se.bearing||this._map.getBearing())&&(Se.bearing=0),this._map.easeTo(Se,{originalEvent:le})):(this._map.fire(new l.Event("moveend",{originalEvent:le})),je(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}}_fireEvent(d,k){this._map.fire(new l.Event(d,k?{originalEvent:k}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(d=>{delete this._frameId,this.handleEvent(new Ql("renderFrame",{timeStamp:d})),this._applyChanges()})}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}const Es={extend:(M,...d)=>l.extend(M,...d),run(M){M()},logToElement(M,d=!1,k="log"){const C=window.document.getElementById(k);C&&(d&&(C.innerHTML=""),C.innerHTML+=`<br>${M}`)}};class Go extends l.Evented{constructor(d,k){super(),this._moving=!1,this._zooming=!1,this.transform=d,this._bearingSnap=k.bearingSnap,l.bindAll(["_renderFrameCallback"],this)}getCenter(){return new l.LngLat(this.transform.center.lng,this.transform.center.lat)}setCenter(d,k){return this.jumpTo({center:d},k)}panBy(d,k,C){return d=l.pointGeometry.convert(d).mult(-1),this.panTo(this.transform.center,l.extend({offset:d},k),C)}panTo(d,k,C){return this.easeTo(l.extend({center:d},k),C)}getZoom(){return this.transform.zoom}setZoom(d,k){return this.jumpTo({zoom:d},k),this}zoomTo(d,k,C){return this.easeTo(l.extend({zoom:d},k),C)}zoomIn(d,k){return this.zoomTo(this.getZoom()+1,d,k),this}zoomOut(d,k){return this.zoomTo(this.getZoom()-1,d,k),this}getBearing(){return this.transform.bearing}setBearing(d,k){return this.jumpTo({bearing:d},k),this}getPadding(){return this.transform.padding}setPadding(d,k){return this.jumpTo({padding:d},k),this}rotateTo(d,k,C){return this.easeTo(l.extend({bearing:d},k),C)}resetNorth(d,k){return this.rotateTo(0,l.extend({duration:1e3},d),k),this}resetNorthPitch(d,k){return this.easeTo(l.extend({bearing:0,pitch:0,duration:1e3},d),k),this}snapToNorth(d,k){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(d,k):this}getPitch(){return this.transform.pitch}setPitch(d,k){return this.jumpTo({pitch:d},k),this}cameraForBounds(d,k){d=l.LngLatBounds.convert(d);const C=k&&k.bearing||0;return this._cameraForBoxAndBearing(d.getNorthWest(),d.getSouthEast(),C,k)}_cameraForBoxAndBearing(d,k,C,D){const q={top:0,bottom:0,right:0,left:0};if(typeof(D=l.extend({padding:q,offset:[0,0],maxZoom:this.transform.maxZoom},D)).padding=="number"){const Ir=D.padding;D.padding={top:Ir,bottom:Ir,right:Ir,left:Ir}}D.padding=l.extend(q,D.padding);const Y=this.transform,oe=Y.padding,le=Y.project(l.LngLat.convert(d)),de=Y.project(l.LngLat.convert(k)),Se=le.rotate(-C*Math.PI/180),je=de.rotate(-C*Math.PI/180),Je=new l.pointGeometry(Math.max(Se.x,je.x),Math.max(Se.y,je.y)),Et=new l.pointGeometry(Math.min(Se.x,je.x),Math.min(Se.y,je.y)),mt=Je.sub(Et),wt=(Y.width-(oe.left+oe.right+D.padding.left+D.padding.right))/mt.x,tr=(Y.height-(oe.top+oe.bottom+D.padding.top+D.padding.bottom))/mt.y;if(tr<0||wt<0)return void l.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.");const cr=Math.min(Y.scaleZoom(Y.scale*Math.min(wt,tr)),D.maxZoom),Ar=l.pointGeometry.convert(D.offset),Dt=new l.pointGeometry((D.padding.left-D.padding.right)/2,(D.padding.top-D.padding.bottom)/2).rotate(C*Math.PI/180),Tr=Ar.add(Dt).mult(Y.scale/Y.zoomScale(cr));return{center:Y.unproject(le.add(de).div(2).sub(Tr)),zoom:cr,bearing:C}}fitBounds(d,k,C){return this._fitInternal(this.cameraForBounds(d,k),k,C)}fitScreenCoordinates(d,k,C,D,q){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(l.pointGeometry.convert(d)),this.transform.pointLocation(l.pointGeometry.convert(k)),C,D),D,q)}_fitInternal(d,k,C){return d?(delete(k=l.extend(d,k)).padding,k.linear?this.easeTo(k,C):this.flyTo(k,C)):this}jumpTo(d,k){this.stop();const C=this.transform;let D=!1,q=!1,Y=!1;return"zoom"in d&&C.zoom!==+d.zoom&&(D=!0,C.zoom=+d.zoom),d.center!==void 0&&(C.center=l.LngLat.convert(d.center)),"bearing"in d&&C.bearing!==+d.bearing&&(q=!0,C.bearing=+d.bearing),"pitch"in d&&C.pitch!==+d.pitch&&(Y=!0,C.pitch=+d.pitch),d.padding==null||C.isPaddingEqual(d.padding)||(C.padding=d.padding),this.fire(new l.Event("movestart",k)).fire(new l.Event("move",k)),D&&this.fire(new l.Event("zoomstart",k)).fire(new l.Event("zoom",k)).fire(new l.Event("zoomend",k)),q&&this.fire(new l.Event("rotatestart",k)).fire(new l.Event("rotate",k)).fire(new l.Event("rotateend",k)),Y&&this.fire(new l.Event("pitchstart",k)).fire(new l.Event("pitch",k)).fire(new l.Event("pitchend",k)),this.fire(new l.Event("moveend",k))}calculateCameraOptionsFromTo(d,k,C,D=0){const q=l.MercatorCoordinate.fromLngLat(d,k),Y=l.MercatorCoordinate.fromLngLat(C,D),oe=Y.x-q.x,le=Y.y-q.y,de=Y.z-q.z,Se=Math.hypot(oe,le,de);if(Se===0)throw new Error("Can't calculate camera options with same From and To");const je=Math.hypot(oe,le),Je=this.transform.scaleZoom(this.transform.cameraToCenterDistance/Se/this.transform.tileSize),Et=180*Math.atan2(oe,-le)/Math.PI;let mt=180*Math.acos(je/Se)/Math.PI;return mt=de<0?90-mt:90+mt,{center:Y.toLngLat(),zoom:Je,pitch:mt,bearing:Et}}easeTo(d,k){this._stop(!1,d.easeId),((d=l.extend({offset:[0,0],duration:500,easing:l.ease},d)).animate===!1||!d.essential&&l.exported.prefersReducedMotion)&&(d.duration=0);const C=this.transform,D=this.getZoom(),q=this.getBearing(),Y=this.getPitch(),oe=this.getPadding(),le="zoom"in d?+d.zoom:D,de="bearing"in d?this._normalizeBearing(d.bearing,q):q,Se="pitch"in d?+d.pitch:Y,je="padding"in d?d.padding:C.padding,Je=l.pointGeometry.convert(d.offset);let Et=C.centerPoint.add(Je);const mt=C.pointLocation(Et),wt=l.LngLat.convert(d.center||mt);this._normalizeCenter(wt);const tr=C.project(mt),cr=C.project(wt).sub(tr),Ar=C.zoomScale(le-D);let Dt,Tr;d.around&&(Dt=l.LngLat.convert(d.around),Tr=C.locationPoint(Dt));const Ir={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||le!==D,this._rotating=this._rotating||q!==de,this._pitching=this._pitching||Se!==Y,this._padding=!C.isPaddingEqual(je),this._easeId=d.easeId,this._prepareEase(k,d.noMoveStart,Ir),this._ease(Zr=>{if(this._zooming&&(C.zoom=l.number(D,le,Zr)),this._rotating&&(C.bearing=l.number(q,de,Zr)),this._pitching&&(C.pitch=l.number(Y,Se,Zr)),this._padding&&(C.interpolatePadding(oe,je,Zr),Et=C.centerPoint.add(Je)),Dt)C.setLocationAtPoint(Dt,Tr);else{const Gr=C.zoomScale(C.zoom-D),dn=le>D?Math.min(2,Ar):Math.max(.5,Ar),qr=Math.pow(dn,1-Zr),Mn=C.unproject(tr.add(cr.mult(Zr*qr)).mult(Gr));C.setLocationAtPoint(C.renderWorldCopies?Mn.wrap():Mn,Et)}this._fireMoveEvents(k)},Zr=>{this._afterEase(k,Zr)},d),this}_prepareEase(d,k,C={}){this._moving=!0,this.fire(new l.Event("freezeElevation",{freeze:!0})),k||C.moving||this.fire(new l.Event("movestart",d)),this._zooming&&!C.zooming&&this.fire(new l.Event("zoomstart",d)),this._rotating&&!C.rotating&&this.fire(new l.Event("rotatestart",d)),this._pitching&&!C.pitching&&this.fire(new l.Event("pitchstart",d))}_fireMoveEvents(d){this.fire(new l.Event("move",d)),this._zooming&&this.fire(new l.Event("zoom",d)),this._rotating&&this.fire(new l.Event("rotate",d)),this._pitching&&this.fire(new l.Event("pitch",d))}_afterEase(d,k){if(this._easeId&&k&&this._easeId===k)return;delete this._easeId,this.fire(new l.Event("freezeElevation",{freeze:!1}));const C=this._zooming,D=this._rotating,q=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,C&&this.fire(new l.Event("zoomend",d)),D&&this.fire(new l.Event("rotateend",d)),q&&this.fire(new l.Event("pitchend",d)),this.fire(new l.Event("moveend",d))}flyTo(d,k){if(!d.essential&&l.exported.prefersReducedMotion){const N=l.pick(d,["center","zoom","bearing","pitch","around"]);return this.jumpTo(N,k)}this.stop(),d=l.extend({offset:[0,0],speed:1.2,curve:1.42,easing:l.ease},d);const C=this.transform,D=this.getZoom(),q=this.getBearing(),Y=this.getPitch(),oe=this.getPadding(),le="zoom"in d?l.clamp(+d.zoom,C.minZoom,C.maxZoom):D,de="bearing"in d?this._normalizeBearing(d.bearing,q):q,Se="pitch"in d?+d.pitch:Y,je="padding"in d?d.padding:C.padding,Je=C.zoomScale(le-D),Et=l.pointGeometry.convert(d.offset);let mt=C.centerPoint.add(Et);const wt=C.pointLocation(mt),tr=l.LngLat.convert(d.center||wt);this._normalizeCenter(tr);const cr=C.project(wt),Ar=C.project(tr).sub(cr);let Dt=d.curve;const Tr=Math.max(C.width,C.height),Ir=Tr/Je,Zr=Ar.mag();if("minZoom"in d){const N=l.clamp(Math.min(d.minZoom,D,le),C.minZoom,C.maxZoom),$=Tr/C.zoomScale(N-D);Dt=Math.sqrt($/Zr*2)}const Gr=Dt*Dt;function dn(N){const $=(Ir*Ir-Tr*Tr+(N?-1:1)*Gr*Gr*Zr*Zr)/(2*(N?Ir:Tr)*Gr*Zr);return Math.log(Math.sqrt($*$+1)-$)}function qr(N){return(Math.exp(N)-Math.exp(-N))/2}function Mn(N){return(Math.exp(N)+Math.exp(-N))/2}const En=dn(0);let Un=function(N){return Mn(En)/Mn(En+Dt*N)},Li=function(N){return Tr*((Mn(En)*(qr($=En+Dt*N)/Mn($))-qr(En))/Gr)/Zr;var $},Di=(dn(1)-En)/Dt;if(Math.abs(Zr)<1e-6||!isFinite(Di)){if(Math.abs(Tr-Ir)<1e-6)return this.easeTo(d,k);const N=Ir<Tr?-1:1;Di=Math.abs(Math.log(Ir/Tr))/Dt,Li=function(){return 0},Un=function($){return Math.exp(N*Dt*$)}}return d.duration="duration"in d?+d.duration:1e3*Di/("screenSpeed"in d?+d.screenSpeed/Dt:+d.speed),d.maxDuration&&d.duration>d.maxDuration&&(d.duration=0),this._zooming=!0,this._rotating=q!==de,this._pitching=Se!==Y,this._padding=!C.isPaddingEqual(je),this._prepareEase(k,!1),this._ease(N=>{const $=N*Di,re=1/Un($);C.zoom=N===1?le:D+C.scaleZoom(re),this._rotating&&(C.bearing=l.number(q,de,N)),this._pitching&&(C.pitch=l.number(Y,Se,N)),this._padding&&(C.interpolatePadding(oe,je,N),mt=C.centerPoint.add(Et));const fe=N===1?tr:C.unproject(cr.add(Ar.mult(Li($))).mult(re));C.setLocationAtPoint(C.renderWorldCopies?fe.wrap():fe,mt),this._fireMoveEvents(k)},()=>this._afterEase(k),d),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(d,k){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){const C=this._onEaseEnd;delete this._onEaseEnd,C.call(this,k)}if(!d){const C=this.handlers;C&&C.stop(!1)}return this}_ease(d,k,C){C.animate===!1||C.duration===0?(d(1),k()):(this._easeStart=l.exported.now(),this._easeOptions=C,this._onEaseFrame=d,this._onEaseEnd=k,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_renderFrameCallback(){const d=Math.min((l.exported.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(d)),d<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()}_normalizeBearing(d,k){d=l.wrap(d,-180,180);const C=Math.abs(d-k);return Math.abs(d-360-k)<C&&(d-=360),Math.abs(d+360-k)<C&&(d+=360),d}_normalizeCenter(d){const k=this.transform;if(!k.renderWorldCopies||k.lngRange)return;const C=d.lng-k.center.lng;d.lng+=C>180?-360:C<-180?360:0}}class Ss{constructor(d={}){this.options=d,l.bindAll(["_toggleAttribution","_updateData","_updateCompact","_updateCompactMinimize"],this)}getDefaultPosition(){return"bottom-right"}onAdd(d){return this._map=d,this._compact=this.options&&this.options.compact,this._container=T.create("details","maplibregl-ctrl maplibregl-ctrl-attrib mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._compactButton=T.create("summary","maplibregl-ctrl-attrib-button mapboxgl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=T.create("div","maplibregl-ctrl-attrib-inner mapboxgl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("terrain",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){T.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("terrain",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._attribHTML=void 0}_setElementTitle(d,k){const C=this._map._getUIString(`AttributionControl.${k}`);d.title=C,d.setAttribute("aria-label",C)}_toggleAttribution(){this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show","mapboxgl-compact-show")):(this._container.classList.add("maplibregl-compact-show","mapboxgl-compact-show"),this._container.removeAttribute("open")))}_updateData(d){!d||d.sourceDataType!=="metadata"&&d.sourceDataType!=="visibility"&&d.dataType!=="style"&&d.type!=="terrain"||this._updateAttributions()}_updateAttributions(){if(!this._map.style)return;let d=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?d=d.concat(this.options.customAttribution.map(D=>typeof D!="string"?"":D)):typeof this.options.customAttribution=="string"&&d.push(this.options.customAttribution)),this._map.style.stylesheet){const D=this._map.style.stylesheet;this.styleOwner=D.owner,this.styleId=D.id}const k=this._map.style.sourceCaches;for(const D in k){const q=k[D];if(q.used||q.usedForTerrain){const Y=q.getSource();Y.attribution&&d.indexOf(Y.attribution)<0&&d.push(Y.attribution)}}d=d.filter(D=>String(D).trim()),d.sort((D,q)=>D.length-q.length),d=d.filter((D,q)=>{for(let Y=q+1;Y<d.length;Y++)if(d[Y].indexOf(D)>=0)return!1;return!0});const C=d.join(" | ");C!==this._attribHTML&&(this._attribHTML=C,d.length?(this._innerContainer.innerHTML=C,this._container.classList.remove("maplibregl-attrib-empty","mapboxgl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty","mapboxgl-attrib-empty"),this._updateCompact(),this._editLink=null)}_updateCompact(){this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact===!1?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","mapboxgl-compact","maplibregl-compact-show","mapboxgl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show","mapboxgl-compact","mapboxgl-compact-show"))}_updateCompactMinimize(){this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show","mapboxgl-compact-show")}}class Au{constructor(d={}){this.options=d,l.bindAll(["_updateCompact"],this)}getDefaultPosition(){return"bottom-left"}onAdd(d){this._map=d,this._compact=this.options&&this.options.compact,this._container=T.create("div","maplibregl-ctrl mapboxgl-ctrl");const k=T.create("a","maplibregl-ctrl-logo mapboxgl-ctrl-logo");return k.target="_blank",k.rel="noopener nofollow",k.href="https://maplibre.org/",k.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),k.setAttribute("rel","noopener nofollow"),this._container.appendChild(k),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){T.remove(this._container),this._map.off("resize",this._updateCompact),this._map=void 0,this._compact=void 0}_updateCompact(){const d=this._container.children;if(d.length){const k=d[0];this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact!==!1&&k.classList.add("maplibregl-compact","mapboxgl-compact"):k.classList.remove("maplibregl-compact","mapboxgl-compact")}}}class Rc{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(d){const k=++this._id;return this._queue.push({callback:d,id:k,cancelled:!1}),k}remove(d){const k=this._currentlyRunning,C=k?this._queue.concat(k):this._queue;for(const D of C)if(D.id===d)return void(D.cancelled=!0)}run(d=0){if(this._currentlyRunning)throw new Error("Attempting to run(), but is already running.");const k=this._currentlyRunning=this._queue;this._queue=[];for(const C of k)if(!C.cancelled&&(C.callback(d),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}const Eu={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm","TerrainControl.enableTerrain":"Enable terrain","TerrainControl.disableTerrain":"Disable terrain"},ol={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:void 0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,maplibreLogo:!1,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",transformRequest:null,fadeDuration:300,crossSourceCollisions:!0},w0={showCompass:!0,showZoom:!0,visualizePitch:!1};class al{constructor(d,k,C=!1){this._clickTolerance=10,this.element=k,this.mouseRotate=new ba({clickTolerance:d.dragRotate._mouseRotate._clickTolerance}),this.map=d,C&&(this.mousePitch=new Pn({clickTolerance:d.dragRotate._mousePitch._clickTolerance})),l.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),T.addEventListener(k,"mousedown",this.mousedown),T.addEventListener(k,"touchstart",this.touchstart,{passive:!1}),T.addEventListener(k,"touchmove",this.touchmove),T.addEventListener(k,"touchend",this.touchend),T.addEventListener(k,"touchcancel",this.reset)}down(d,k){this.mouseRotate.mousedown(d,k),this.mousePitch&&this.mousePitch.mousedown(d,k),T.disableDrag()}move(d,k){const C=this.map,D=this.mouseRotate.mousemoveWindow(d,k);if(D&&D.bearingDelta&&C.setBearing(C.getBearing()+D.bearingDelta),this.mousePitch){const q=this.mousePitch.mousemoveWindow(d,k);q&&q.pitchDelta&&C.setPitch(C.getPitch()+q.pitchDelta)}}off(){const d=this.element;T.removeEventListener(d,"mousedown",this.mousedown),T.removeEventListener(d,"touchstart",this.touchstart,{passive:!1}),T.removeEventListener(d,"touchmove",this.touchmove),T.removeEventListener(d,"touchend",this.touchend),T.removeEventListener(d,"touchcancel",this.reset),this.offTemp()}offTemp(){T.enableDrag(),T.removeEventListener(window,"mousemove",this.mousemove),T.removeEventListener(window,"mouseup",this.mouseup)}mousedown(d){this.down(l.extend({},d,{ctrlKey:!0,preventDefault:()=>d.preventDefault()}),T.mousePos(this.element,d)),T.addEventListener(window,"mousemove",this.mousemove),T.addEventListener(window,"mouseup",this.mouseup)}mousemove(d){this.move(d,T.mousePos(this.element,d))}mouseup(d){this.mouseRotate.mouseupWindow(d),this.mousePitch&&this.mousePitch.mouseupWindow(d),this.offTemp()}touchstart(d){d.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=T.touchPos(this.element,d.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:()=>d.preventDefault()},this._startPos))}touchmove(d){d.targetTouches.length!==1?this.reset():(this._lastPos=T.touchPos(this.element,d.targetTouches)[0],this.move({preventDefault:()=>d.preventDefault()},this._lastPos))}touchend(d){d.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()}reset(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()}}function pc(M,d,k){if(M=new l.LngLat(M.lng,M.lat),d){const C=new l.LngLat(M.lng-360,M.lat),D=new l.LngLat(M.lng+360,M.lat),q=k.locationPoint(M).distSqr(d);k.locationPoint(C).distSqr(d)<q?M=C:k.locationPoint(D).distSqr(d)<q&&(M=D)}for(;Math.abs(M.lng-k.center.lng)>180;){const C=k.locationPoint(M);if(C.x>=0&&C.y>=0&&C.x<=k.width&&C.y<=k.height)break;M.lng>k.center.lng?M.lng-=360:M.lng+=360}return M}const oi={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function vi(M,d,k){const C=M.classList;for(const D in oi)C.remove(`maplibregl-${k}-anchor-${D}`,`mapboxgl-${k}-anchor-${D}`);C.add(`maplibregl-${k}-anchor-${d}`,`mapboxgl-${k}-anchor-${d}`)}class Oa extends l.Evented{constructor(d,k){if(super(),(d instanceof HTMLElement||k)&&(d=l.extend({element:d},k)),l.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress"],this),this._anchor=d&&d.anchor||"center",this._color=d&&d.color||"#3FB1CE",this._scale=d&&d.scale||1,this._draggable=d&&d.draggable||!1,this._clickTolerance=d&&d.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=d&&d.rotation||0,this._rotationAlignment=d&&d.rotationAlignment||"auto",this._pitchAlignment=d&&d.pitchAlignment&&d.pitchAlignment!=="auto"?d.pitchAlignment:this._rotationAlignment,d&&d.element)this._element=d.element,this._offset=l.pointGeometry.convert(d&&d.offset||[0,0]);else{this._defaultMarker=!0,this._element=T.create("div"),this._element.setAttribute("aria-label","Map marker");const C=T.createNS("http://www.w3.org/2000/svg","svg"),D=41,q=27;C.setAttributeNS(null,"display","block"),C.setAttributeNS(null,"height",`${D}px`),C.setAttributeNS(null,"width",`${q}px`),C.setAttributeNS(null,"viewBox",`0 0 ${q} ${D}`);const Y=T.createNS("http://www.w3.org/2000/svg","g");Y.setAttributeNS(null,"stroke","none"),Y.setAttributeNS(null,"stroke-width","1"),Y.setAttributeNS(null,"fill","none"),Y.setAttributeNS(null,"fill-rule","evenodd");const oe=T.createNS("http://www.w3.org/2000/svg","g");oe.setAttributeNS(null,"fill-rule","nonzero");const le=T.createNS("http://www.w3.org/2000/svg","g");le.setAttributeNS(null,"transform","translate(3.0, 29.0)"),le.setAttributeNS(null,"fill","#000000");const de=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(const Ar of de){const Dt=T.createNS("http://www.w3.org/2000/svg","ellipse");Dt.setAttributeNS(null,"opacity","0.04"),Dt.setAttributeNS(null,"cx","10.5"),Dt.setAttributeNS(null,"cy","5.80029008"),Dt.setAttributeNS(null,"rx",Ar.rx),Dt.setAttributeNS(null,"ry",Ar.ry),le.appendChild(Dt)}const Se=T.createNS("http://www.w3.org/2000/svg","g");Se.setAttributeNS(null,"fill",this._color);const je=T.createNS("http://www.w3.org/2000/svg","path");je.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),Se.appendChild(je);const Je=T.createNS("http://www.w3.org/2000/svg","g");Je.setAttributeNS(null,"opacity","0.25"),Je.setAttributeNS(null,"fill","#000000");const Et=T.createNS("http://www.w3.org/2000/svg","path");Et.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),Je.appendChild(Et);const mt=T.createNS("http://www.w3.org/2000/svg","g");mt.setAttributeNS(null,"transform","translate(6.0, 7.0)"),mt.setAttributeNS(null,"fill","#FFFFFF");const wt=T.createNS("http://www.w3.org/2000/svg","g");wt.setAttributeNS(null,"transform","translate(8.0, 8.0)");const tr=T.createNS("http://www.w3.org/2000/svg","circle");tr.setAttributeNS(null,"fill","#000000"),tr.setAttributeNS(null,"opacity","0.25"),tr.setAttributeNS(null,"cx","5.5"),tr.setAttributeNS(null,"cy","5.5"),tr.setAttributeNS(null,"r","5.4999962");const cr=T.createNS("http://www.w3.org/2000/svg","circle");cr.setAttributeNS(null,"fill","#FFFFFF"),cr.setAttributeNS(null,"cx","5.5"),cr.setAttributeNS(null,"cy","5.5"),cr.setAttributeNS(null,"r","5.4999962"),wt.appendChild(tr),wt.appendChild(cr),oe.appendChild(le),oe.appendChild(Se),oe.appendChild(Je),oe.appendChild(mt),oe.appendChild(wt),C.appendChild(oe),C.setAttributeNS(null,"height",D*this._scale+"px"),C.setAttributeNS(null,"width",q*this._scale+"px"),this._element.appendChild(C),this._offset=l.pointGeometry.convert(d&&d.offset||[0,-14])}this._element.classList.add("maplibregl-marker","mapboxgl-marker"),this._element.addEventListener("dragstart",C=>{C.preventDefault()}),this._element.addEventListener("mousedown",C=>{C.preventDefault()}),vi(this._element,this._anchor,"marker"),this._popup=null}addTo(d){return this.remove(),this._map=d,d.getCanvasContainer().appendChild(this._element),d.on("move",this._update),d.on("moveend",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._opacityTimeout&&(clearTimeout(this._opacityTimeout),delete this._opacityTimeout),this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),T.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(d){return this._lngLat=l.LngLat.convert(d),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(d){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),d){if(!("offset"in d.options)){const D=Math.sqrt(Math.pow(13.5,2)/2);d.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[D,-1*(38.1-13.5+D)],"bottom-right":[-D,-1*(38.1-13.5+D)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=d,this._lngLat&&this._popup.setLngLat(this._lngLat),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}_onKeyPress(d){const k=d.code,C=d.charCode||d.keyCode;k!=="Space"&&k!=="Enter"&&C!==32&&C!==13||this.togglePopup()}_onMapClick(d){const k=d.originalEvent.target,C=this._element;this._popup&&(k===C||C.contains(k))&&this.togglePopup()}getPopup(){return this._popup}togglePopup(){const d=this._popup;return d?(d.isOpen()?d.remove():d.addTo(this._map),this):this}_update(d){if(!this._map)return;this._map.transform.renderWorldCopies&&(this._lngLat=pc(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset);let k="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?k=`rotateZ(${this._rotation}deg)`:this._rotationAlignment==="map"&&(k=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let C="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?C="rotateX(0deg)":this._pitchAlignment==="map"&&(C=`rotateX(${this._map.getPitch()}deg)`),d&&d.type!=="moveend"||(this._pos=this._pos.round()),T.setTransform(this._element,`${oi[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${C} ${k}`),this._map.style&&this._map.style.terrain&&!this._opacityTimeout&&(this._opacityTimeout=setTimeout(()=>{const D=this._map.unproject(this._pos),q=40075016686e-3*Math.abs(Math.cos(this._lngLat.lat*Math.PI/180))/Math.pow(2,this._map.transform.tileZoom+8);this._element.style.opacity=D.distanceTo(this._lngLat)>20*q?"0.2":"1.0",this._opacityTimeout=null},100))}getOffset(){return this._offset}setOffset(d){return this._offset=l.pointGeometry.convert(d),this._update(),this}_onMove(d){if(!this._isDragging){const k=this._clickTolerance||this._map._clickTolerance;this._isDragging=d.point.dist(this._pointerdownPos)>=k}this._isDragging&&(this._pos=d.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new l.Event("dragstart"))),this.fire(new l.Event("drag")))}_onUp(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new l.Event("dragend")),this._state="inactive"}_addDragHandler(d){this._element.contains(d.originalEvent.target)&&(d.preventDefault(),this._positionDelta=d.point.sub(this._pos).add(this._offset),this._pointerdownPos=d.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))}setDraggable(d){return this._draggable=!!d,this._map&&(d?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(d){return this._rotation=d||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(d){return this._rotationAlignment=d||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(d){return this._pitchAlignment=d&&d!=="auto"?d:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}}const Yu={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0};let wa,Bo=0,Il=!1;const Xs={maxWidth:100,unit:"metric"};function r0(M,d,k){const C=k&&k.maxWidth||100,D=M._container.clientHeight/2,q=M.unproject([0,D]),Y=M.unproject([C,D]),oe=q.distanceTo(Y);if(k&&k.unit==="imperial"){const le=3.2808*oe;le>5280?Tl(d,C,le/5280,M._getUIString("ScaleControl.Miles")):Tl(d,C,le,M._getUIString("ScaleControl.Feet"))}else k&&k.unit==="nautical"?Tl(d,C,oe/1852,M._getUIString("ScaleControl.NauticalMiles")):oe>=1e3?Tl(d,C,oe/1e3,M._getUIString("ScaleControl.Kilometers")):Tl(d,C,oe,M._getUIString("ScaleControl.Meters"))}function Tl(M,d,k,C){const D=function(q){const Y=Math.pow(10,`${Math.floor(q)}`.length-1);let oe=q/Y;return oe=oe>=10?10:oe>=5?5:oe>=3?3:oe>=2?2:oe>=1?1:function(le){const de=Math.pow(10,Math.ceil(-Math.log(le)/Math.LN10));return Math.round(le*de)/de}(oe),Y*oe}(k);M.style.width=d*(D/k)+"px",M.innerHTML=`${D}&nbsp;${C}`}const ca={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},xa=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function Oc(M){if(M){if(typeof M=="number"){const d=Math.round(Math.sqrt(.5*Math.pow(M,2)));return{center:new l.pointGeometry(0,0),top:new l.pointGeometry(0,M),"top-left":new l.pointGeometry(d,d),"top-right":new l.pointGeometry(-d,d),bottom:new l.pointGeometry(0,-M),"bottom-left":new l.pointGeometry(d,-d),"bottom-right":new l.pointGeometry(-d,-d),left:new l.pointGeometry(M,0),right:new l.pointGeometry(-M,0)}}if(M instanceof l.pointGeometry||Array.isArray(M)){const d=l.pointGeometry.convert(M);return{center:d,top:d,"top-left":d,"top-right":d,bottom:d,"bottom-left":d,"bottom-right":d,left:d,right:d}}return{center:l.pointGeometry.convert(M.center||[0,0]),top:l.pointGeometry.convert(M.top||[0,0]),"top-left":l.pointGeometry.convert(M["top-left"]||[0,0]),"top-right":l.pointGeometry.convert(M["top-right"]||[0,0]),bottom:l.pointGeometry.convert(M.bottom||[0,0]),"bottom-left":l.pointGeometry.convert(M["bottom-left"]||[0,0]),"bottom-right":l.pointGeometry.convert(M["bottom-right"]||[0,0]),left:l.pointGeometry.convert(M.left||[0,0]),right:l.pointGeometry.convert(M.right||[0,0])}}return Oc(new l.pointGeometry(0,0))}const as={supported:h,setRTLTextPlugin:l.setRTLTextPlugin,getRTLTextPluginStatus:l.getRTLTextPluginStatus,Map:class extends Go{constructor(M){var d;if(l.PerformanceUtils.mark(l.PerformanceMarkers.create),(M=l.extend({},ol,M)).minZoom!=null&&M.maxZoom!=null&&M.minZoom>M.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(M.minPitch!=null&&M.maxPitch!=null&&M.minPitch>M.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(M.minPitch!=null&&M.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(M.maxPitch!=null&&M.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(super(new Al(M.minZoom,M.maxZoom,M.minPitch,M.maxPitch,M.renderWorldCopies),{bearingSnap:M.bearingSnap}),this._interactive=M.interactive,this._cooperativeGestures=M.cooperativeGestures,this._maxTileCacheSize=M.maxTileCacheSize,this._failIfMajorPerformanceCaveat=M.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=M.preserveDrawingBuffer,this._antialias=M.antialias,this._trackResize=M.trackResize,this._bearingSnap=M.bearingSnap,this._refreshExpiredTiles=M.refreshExpiredTiles,this._fadeDuration=M.fadeDuration,this._crossSourceCollisions=M.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=M.collectResourceTiming,this._renderTaskQueue=new Rc,this._controls=[],this._mapId=l.uniqueId(),this._locale=l.extend({},Eu,M.locale),this._clickTolerance=M.clickTolerance,this._pixelRatio=(d=M.pixelRatio)!==null&&d!==void 0?d:devicePixelRatio,this._requestManager=new I(M.transformRequest),typeof M.container=="string"){if(this._container=document.getElementById(M.container),!this._container)throw new Error(`Container '${M.container}' not found.`)}else{if(!(M.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=M.container}if(M.maxBounds&&this.setMaxBounds(M.maxBounds),l.bindAll(["_onWindowOnline","_onWindowResize","_onMapScroll","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),this.painter===void 0)throw new Error("Failed to initialize WebGL.");this.on("move",()=>this._update(!1)),this.on("moveend",()=>this._update(!1)),this.on("zoom",()=>this._update(!0)),this.on("terrain",()=>{this.painter.terrainFacilitator.dirty=!0,this._update(!0)}),typeof window<"u"&&(addEventListener("online",this._onWindowOnline,!1),addEventListener("resize",this._onWindowResize,!1),addEventListener("orientationchange",this._onWindowResize,!1)),this.handlers=new ho(this,M),this._cooperativeGestures&&this._setupCooperativeGestures(),this._hash=M.hash&&new is(typeof M.hash=="string"&&M.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:M.center,zoom:M.zoom,bearing:M.bearing,pitch:M.pitch}),M.bounds&&(this.resize(),this.fitBounds(M.bounds,l.extend({},M.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=M.localIdeographFontFamily,M.style&&this.setStyle(M.style,{localIdeographFontFamily:M.localIdeographFontFamily}),M.attributionControl&&this.addControl(new Ss({customAttribution:M.customAttribution})),M.maplibreLogo&&this.addControl(new Au,M.logoPosition),this.on("style.load",()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet)}),this.on("data",k=>{this._update(k.dataType==="style"),this.fire(new l.Event(`${k.dataType}data`,k))}),this.on("dataloading",k=>{this.fire(new l.Event(`${k.dataType}dataloading`,k))}),this.on("dataabort",k=>{this.fire(new l.Event("sourcedataabort",k))})}_getMapId(){return this._mapId}addControl(M,d){if(d===void 0&&(d=M.getDefaultPosition?M.getDefaultPosition():"top-right"),!M||!M.onAdd)return this.fire(new l.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const k=M.onAdd(this);this._controls.push(M);const C=this._controlPositions[d];return d.indexOf("bottom")!==-1?C.insertBefore(k,C.firstChild):C.appendChild(k),this}removeControl(M){if(!M||!M.onRemove)return this.fire(new l.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const d=this._controls.indexOf(M);return d>-1&&this._controls.splice(d,1),M.onRemove(this),this}hasControl(M){return this._controls.indexOf(M)>-1}calculateCameraOptionsFromTo(M,d,k,C){return C==null&&this.style.terrain&&(C=this.transform.getElevation(k,this.style.terrain)),super.calculateCameraOptionsFromTo(M,d,k,C)}resize(M){const d=this._containerDimensions(),k=d[0],C=d[1];this._resizeCanvas(k,C,this.getPixelRatio()),this.transform.resize(k,C),this.painter.resize(k,C,this.getPixelRatio());const D=!this._moving;return D&&(this.stop(),this.fire(new l.Event("movestart",M)).fire(new l.Event("move",M))),this.fire(new l.Event("resize",M)),D&&this.fire(new l.Event("moveend",M)),this}getPixelRatio(){return this._pixelRatio}setPixelRatio(M){const[d,k]=this._containerDimensions();this._pixelRatio=M,this._resizeCanvas(d,k,M),this.painter.resize(d,k,M)}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(M){return this.transform.setMaxBounds(l.LngLatBounds.convert(M)),this._update()}setMinZoom(M){if((M=M??-2)>=-2&&M<=this.transform.maxZoom)return this.transform.minZoom=M,this._update(),this.getZoom()<M&&this.setZoom(M),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(M){if((M=M??22)>=this.transform.minZoom)return this.transform.maxZoom=M,this._update(),this.getZoom()>M&&this.setZoom(M),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(M){if((M=M??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(M>=0&&M<=this.transform.maxPitch)return this.transform.minPitch=M,this._update(),this.getPitch()<M&&this.setPitch(M),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(M){if((M=M??60)>85)throw new Error("maxPitch must be less than or equal to 85");if(M>=this.transform.minPitch)return this.transform.maxPitch=M,this._update(),this.getPitch()>M&&this.setPitch(M),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(M){return this.transform.renderWorldCopies=M,this._update()}project(M){return this.transform.locationPoint(l.LngLat.convert(M),this.style&&this.style.terrain)}unproject(M){return this.transform.pointLocation(l.pointGeometry.convert(M),this.style&&this.style.terrain)}isMoving(){return this._moving||this.handlers.isMoving()}isZooming(){return this._zooming||this.handlers.isZooming()}isRotating(){return this._rotating||this.handlers.isRotating()}_createDelegatedListener(M,d,k){if(M==="mouseenter"||M==="mouseover"){let C=!1;return{layer:d,listener:k,delegates:{mousemove:q=>{const Y=this.getLayer(d)?this.queryRenderedFeatures(q.point,{layers:[d]}):[];Y.length?C||(C=!0,k.call(this,new sa(M,this,q.originalEvent,{features:Y}))):C=!1},mouseout:()=>{C=!1}}}}if(M==="mouseleave"||M==="mouseout"){let C=!1;return{layer:d,listener:k,delegates:{mousemove:Y=>{(this.getLayer(d)?this.queryRenderedFeatures(Y.point,{layers:[d]}):[]).length?C=!0:C&&(C=!1,k.call(this,new sa(M,this,Y.originalEvent)))},mouseout:Y=>{C&&(C=!1,k.call(this,new sa(M,this,Y.originalEvent)))}}}}{const C=D=>{const q=this.getLayer(d)?this.queryRenderedFeatures(D.point,{layers:[d]}):[];q.length&&(D.features=q,k.call(this,D),delete D.features)};return{layer:d,listener:k,delegates:{[M]:C}}}}on(M,d,k){if(k===void 0)return super.on(M,d);const C=this._createDelegatedListener(M,d,k);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[M]=this._delegatedListeners[M]||[],this._delegatedListeners[M].push(C);for(const D in C.delegates)this.on(D,C.delegates[D]);return this}once(M,d,k){if(k===void 0)return super.once(M,d);const C=this._createDelegatedListener(M,d,k);for(const D in C.delegates)this.once(D,C.delegates[D]);return this}off(M,d,k){return k===void 0?super.off(M,d):(this._delegatedListeners&&this._delegatedListeners[M]&&(C=>{const D=this._delegatedListeners[M];for(let q=0;q<D.length;q++){const Y=D[q];if(Y.layer===d&&Y.listener===k){for(const oe in Y.delegates)this.off(oe,Y.delegates[oe]);return D.splice(q,1),this}}})(),this)}queryRenderedFeatures(M,d){if(!this.style)return[];let k;if(d!==void 0||M===void 0||M instanceof l.pointGeometry||Array.isArray(M)||(d=M,M=void 0),d=d||{},(M=M||[[0,0],[this.transform.width,this.transform.height]])instanceof l.pointGeometry||typeof M[0]=="number")k=[l.pointGeometry.convert(M)];else{const C=l.pointGeometry.convert(M[0]),D=l.pointGeometry.convert(M[1]);k=[C,new l.pointGeometry(D.x,C.y),D,new l.pointGeometry(C.x,D.y),C]}return this.style.queryRenderedFeatures(k,d,this.transform)}querySourceFeatures(M,d){return this.style.querySourceFeatures(M,d)}setStyle(M,d){return(d=l.extend({},{localIdeographFontFamily:this._localIdeographFontFamily},d)).diff!==!1&&d.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&M?(this._diffStyle(M,d),this):(this._localIdeographFontFamily=d.localIdeographFontFamily,this._updateStyle(M,d))}setTransformRequest(M){return this._requestManager.setTransformRequest(M),this}_getUIString(M){const d=this._locale[M];if(d==null)throw new Error(`Missing UI string '${M}'`);return d}_updateStyle(M,d){return this.style&&(this.style.setEventedParent(null),this.style._remove()),M?(this.style=new Jo(this,d||{}),this.style.setEventedParent(this,{style:this.style}),typeof M=="string"?this.style.loadURL(M):this.style.loadJSON(M),this):(delete this.style,this)}_lazyInitEmptyStyle(){this.style||(this.style=new Jo(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(M,d){if(typeof M=="string"){const k=this._requestManager.transformRequest(M,l.ResourceType.Style);l.getJSON(k,(C,D)=>{C?this.fire(new l.ErrorEvent(C)):D&&this._updateDiff(D,d)})}else typeof M=="object"&&this._updateDiff(M,d)}_updateDiff(M,d){try{this.style.setState(M)&&this._update(!0)}catch(k){l.warnOnce(`Unable to perform style diff: ${k.message||k.error||k}.  Rebuilding the style from scratch.`),this._updateStyle(M,d)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():l.warnOnce("There is no style added to the map.")}addSource(M,d){return this._lazyInitEmptyStyle(),this.style.addSource(M,d),this._update(!0)}isSourceLoaded(M){const d=this.style&&this.style.sourceCaches[M];if(d!==void 0)return d.loaded();this.fire(new l.ErrorEvent(new Error(`There is no source with ID '${M}'`)))}setTerrain(M){return this.style.setTerrain(M),this}getTerrain(){return this.style.terrain&&this.style.terrain.options}areTilesLoaded(){const M=this.style&&this.style.sourceCaches;for(const d in M){const k=M[d]._tiles;for(const C in k){const D=k[C];if(D.state!=="loaded"&&D.state!=="errored")return!1}}return!0}addSourceType(M,d,k){return this._lazyInitEmptyStyle(),this.style.addSourceType(M,d,k)}removeSource(M){return this.style.removeSource(M),this._update(!0)}getSource(M){return this.style.getSource(M)}addImage(M,d,{pixelRatio:k=1,sdf:C=!1,stretchX:D,stretchY:q,content:Y}={}){if(this._lazyInitEmptyStyle(),d instanceof HTMLImageElement||l.isImageBitmap(d)){const{width:oe,height:le,data:de}=l.exported.getImageData(d);this.style.addImage(M,{data:new l.RGBAImage({width:oe,height:le},de),pixelRatio:k,stretchX:D,stretchY:q,content:Y,sdf:C,version:0})}else{if(d.width===void 0||d.height===void 0)return this.fire(new l.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{const{width:oe,height:le,data:de}=d,Se=d;this.style.addImage(M,{data:new l.RGBAImage({width:oe,height:le},new Uint8Array(de)),pixelRatio:k,stretchX:D,stretchY:q,content:Y,sdf:C,version:0,userImage:Se}),Se.onAdd&&Se.onAdd(this,M)}}}updateImage(M,d){const k=this.style.getImage(M);if(!k)return this.fire(new l.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const C=d instanceof HTMLImageElement||l.isImageBitmap(d)?l.exported.getImageData(d):d,{width:D,height:q,data:Y}=C;if(D===void 0||q===void 0)return this.fire(new l.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(D!==k.data.width||q!==k.data.height)return this.fire(new l.ErrorEvent(new Error("The width and height of the updated image must be that same as the previous version of the image")));const oe=!(d instanceof HTMLImageElement||l.isImageBitmap(d));k.data.replace(Y,oe),this.style.updateImage(M,k)}hasImage(M){return M?!!this.style.getImage(M):(this.fire(new l.ErrorEvent(new Error("Missing required image id"))),!1)}removeImage(M){this.style.removeImage(M)}loadImage(M,d){l.getImage(this._requestManager.transformRequest(M,l.ResourceType.Image),d)}listImages(){return this.style.listImages()}addLayer(M,d){return this._lazyInitEmptyStyle(),this.style.addLayer(M,d),this._update(!0)}moveLayer(M,d){return this.style.moveLayer(M,d),this._update(!0)}removeLayer(M){return this.style.removeLayer(M),this._update(!0)}getLayer(M){return this.style.getLayer(M)}setLayerZoomRange(M,d,k){return this.style.setLayerZoomRange(M,d,k),this._update(!0)}setFilter(M,d,k={}){return this.style.setFilter(M,d,k),this._update(!0)}getFilter(M){return this.style.getFilter(M)}setPaintProperty(M,d,k,C={}){return this.style.setPaintProperty(M,d,k,C),this._update(!0)}getPaintProperty(M,d){return this.style.getPaintProperty(M,d)}setLayoutProperty(M,d,k,C={}){return this.style.setLayoutProperty(M,d,k,C),this._update(!0)}getLayoutProperty(M,d){return this.style.getLayoutProperty(M,d)}setLight(M,d={}){return this._lazyInitEmptyStyle(),this.style.setLight(M,d),this._update(!0)}getLight(){return this.style.getLight()}setFeatureState(M,d){return this.style.setFeatureState(M,d),this._update()}removeFeatureState(M,d){return this.style.removeFeatureState(M,d),this._update()}getFeatureState(M){return this.style.getFeatureState(M)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let M=0,d=0;return this._container&&(M=this._container.clientWidth||400,d=this._container.clientHeight||300),[M,d]}_setupContainer(){const M=this._container;M.classList.add("maplibregl-map","mapboxgl-map");const d=this._canvasContainer=T.create("div","maplibregl-canvas-container mapboxgl-canvas-container",M);this._interactive&&d.classList.add("maplibregl-interactive","mapboxgl-interactive"),this._canvas=T.create("canvas","maplibregl-canvas mapboxgl-canvas",d),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map"),this._canvas.setAttribute("role","region");const k=this._containerDimensions();this._resizeCanvas(k[0],k[1],this.getPixelRatio());const C=this._controlContainer=T.create("div","maplibregl-control-container mapboxgl-control-container",M),D=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(q=>{D[q]=T.create("div",`maplibregl-ctrl-${q} mapboxgl-ctrl-${q}`,C)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_setupCooperativeGestures(){const M=this._container;this._metaPress=!1,this._cooperativeGesturesScreen=T.create("div","maplibregl-cooperative-gesture-screen",M);let d="Control",k=typeof this._cooperativeGestures!="boolean"&&this._cooperativeGestures.windowsHelpText?this._cooperativeGestures.windowsHelpText:"Use Ctrl + scroll to zoom the map";navigator.platform.indexOf("Mac")===0&&(k=typeof this._cooperativeGestures!="boolean"&&this._cooperativeGestures.macHelpText?this._cooperativeGestures.macHelpText:"Use  + scroll to zoom the map",d="Meta"),this._cooperativeGesturesScreen.innerHTML=`
            <div class="maplibregl-desktop-message">${k}</div>
            <div class="maplibregl-mobile-message">${typeof this._cooperativeGestures!="boolean"&&this._cooperativeGestures.mobileHelpText?this._cooperativeGestures.mobileHelpText:"Use two fingers to move the map"}</div>
        `,document.addEventListener("keydown",C=>{C.key===d&&(this._metaPress=!0)}),document.addEventListener("keyup",C=>{C.key===d&&(this._metaPress=!1)}),this._canvasContainer.addEventListener("wheel",C=>{this._onCooperativeGesture(C,this._metaPress,1)},!1),this._canvasContainer.classList.remove("mapboxgl-touch-drag-pan","maplibregl-touch-drag-pan")}_resizeCanvas(M,d,k){this._canvas.width=k*M,this._canvas.height=k*d,this._canvas.style.width=`${M}px`,this._canvas.style.height=`${d}px`}_setupPainter(){const M=l.extend({},h.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),d=this._canvas.getContext("webgl",M)||this._canvas.getContext("experimental-webgl",M);d?(this.painter=new kl(d,this.transform),l.exported$1.testSupport(d)):this.fire(new l.ErrorEvent(new Error("Failed to initialize WebGL")))}_contextLost(M){M.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new l.Event("webglcontextlost",{originalEvent:M}))}_contextRestored(M){this._setupPainter(),this.resize(),this._update(),this.fire(new l.Event("webglcontextrestored",{originalEvent:M}))}_onMapScroll(M){if(M.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1}_onCooperativeGesture(M,d,k){return!d&&k<2&&(this._cooperativeGesturesScreen.classList.add("maplibregl-show"),setTimeout(()=>{this._cooperativeGesturesScreen.classList.remove("maplibregl-show")},100)),!1}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(M){return this.style?(this._styleDirty=this._styleDirty||M,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(M){return this._update(),this._renderTaskQueue.add(M)}_cancelRenderFrame(M){this._renderTaskQueue.remove(M)}_render(M){let d,k=0;const C=this.painter.context.extTimerQuery;if(this.listens("gpu-timing-frame")&&(d=C.createQueryEXT(),C.beginQueryEXT(C.TIME_ELAPSED_EXT,d),k=l.exported.now()),this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(M),this._removed)return;let D=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;const Y=this.transform.zoom,oe=l.exported.now();this.style.zoomHistory.update(Y,oe);const le=new l.EvaluationParameters(Y,{now:oe,fadeDuration:this._fadeDuration,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),de=le.crossFadingFactor();de===1&&de===this._crossFadingFactor||(D=!0,this._crossFadingFactor=de),this.style.update(le)}if(this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.style.terrain&&this.style.terrain.sourceCache.update(this.transform,this.style.terrain),this.transform.updateElevation(this.style.terrain),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,this._fadeDuration,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:this._fadeDuration,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer")}),this.fire(new l.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,l.PerformanceUtils.mark(l.PerformanceMarkers.load),this.fire(new l.Event("load"))),this.style&&(this.style.hasTransitions()||D)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),this.listens("gpu-timing-frame")){const Y=l.exported.now()-k;C.endQueryEXT(C.TIME_ELAPSED_EXT,d),setTimeout(()=>{const oe=C.getQueryObjectEXT(d,C.QUERY_RESULT_EXT)/1e6;C.deleteQueryEXT(d),this.fire(new l.Event("gpu-timing-frame",{cpuTime:Y,gpuTime:oe}))},50)}if(this.listens("gpu-timing-layer")){const Y=this.painter.collectGpuTimers();setTimeout(()=>{const oe=this.painter.queryGpuTimers(Y);this.fire(new l.Event("gpu-timing-layer",{layerTimes:oe}))},50)}const q=this._sourcesDirty||this._styleDirty||this._placementDirty;return q||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new l.Event("idle")),!this._loaded||this._fullyLoaded||q||(this._fullyLoaded=!0,l.PerformanceUtils.mark(l.PerformanceMarkers.fullLoad)),this}redraw(){return this.style&&(this._frame&&(this._frame.cancel(),this._frame=null),this._render(0)),this}remove(){this._hash&&this._hash.remove();for(const d of this._controls)d.onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof window<"u"&&(removeEventListener("resize",this._onWindowResize,!1),removeEventListener("orientationchange",this._onWindowResize,!1),removeEventListener("online",this._onWindowOnline,!1));const M=this.painter.context.gl.getExtension("WEBGL_lose_context");M&&M.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),T.remove(this._canvasContainer),T.remove(this._controlContainer),this._cooperativeGestures&&T.remove(this._cooperativeGesturesScreen),this._container.classList.remove("maplibregl-map","mapboxgl-map"),l.PerformanceUtils.clearMetrics(),this._removed=!0,this.fire(new l.Event("remove"))}triggerRepaint(){this.style&&!this._frame&&(this._frame=l.exported.frame(M=>{l.PerformanceUtils.frame(M),this._frame=null,this._render(M)}))}_onWindowOnline(){this._update()}_onWindowResize(M){this._trackResize&&this.resize({originalEvent:M})._update()}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(M){this._showTileBoundaries!==M&&(this._showTileBoundaries=M,this._update())}get showPadding(){return!!this._showPadding}set showPadding(M){this._showPadding!==M&&(this._showPadding=M,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(M){this._showCollisionBoxes!==M&&(this._showCollisionBoxes=M,M?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(M){this._showOverdrawInspector!==M&&(this._showOverdrawInspector=M,this._update())}get repaint(){return!!this._repaint}set repaint(M){this._repaint!==M&&(this._repaint=M,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(M){this._vertices=M,this._update()}_setCacheLimits(M,d){l.setCacheLimits(M,d)}get version(){return"2.4.0"}},NavigationControl:class{constructor(M){this.options=l.extend({},w0,M),this._container=T.create("div","maplibregl-ctrl maplibregl-ctrl-group mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",d=>d.preventDefault()),this.options.showZoom&&(l.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in mapboxgl-ctrl-zoom-in",d=>this._map.zoomIn({},{originalEvent:d})),T.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out mapboxgl-ctrl-zoom-out",d=>this._map.zoomOut({},{originalEvent:d})),T.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(l.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("maplibregl-ctrl-compass mapboxgl-ctrl-compass",d=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:d}):this._map.resetNorth({},{originalEvent:d})}),this._compassIcon=T.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}_updateZoomButtons(){const M=this._map.getZoom(),d=M===this._map.getMaxZoom(),k=M===this._map.getMinZoom();this._zoomInButton.disabled=d,this._zoomOutButton.disabled=k,this._zoomInButton.setAttribute("aria-disabled",d.toString()),this._zoomOutButton.setAttribute("aria-disabled",k.toString())}_rotateCompassArrow(){const M=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${this._map.transform.angle*(180/Math.PI)}deg)`:`rotate(${this._map.transform.angle*(180/Math.PI)}deg)`;this._compassIcon.style.transform=M}onAdd(M){return this._map=M,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new al(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){T.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(M,d){const k=T.create("button",M,this._container);return k.type="button",k.addEventListener("click",d),k}_setButtonTitle(M,d){const k=this._map._getUIString(`NavigationControl.${d}`);M.title=k,M.setAttribute("aria-label",k)}},GeolocateControl:class extends l.Evented{constructor(M){super(),this.options=l.extend({},Yu,M),l.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker"],this)}onAdd(M){var d;return this._map=M,this._container=T.create("div","maplibregl-ctrl maplibregl-ctrl-group mapboxgl-ctrl mapboxgl-ctrl-group"),d=this._setupUI,wa!==void 0?d(wa):window.navigator.permissions!==void 0?window.navigator.permissions.query({name:"geolocation"}).then(k=>{wa=k.state!=="denied",d(wa)}):(wa=!!window.navigator.geolocation,d(wa)),this._container}onRemove(){this._geolocationWatchID!==void 0&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),T.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,Bo=0,Il=!1}_isOutOfMapMaxBounds(M){const d=this._map.getMaxBounds(),k=M.coords;return d&&(k.longitude<d.getWest()||k.longitude>d.getEast()||k.latitude<d.getSouth()||k.latitude>d.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error","mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting");break;case"ACTIVE_ERROR":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}}_onSuccess(M){if(this._map){if(this._isOutOfMapMaxBounds(M))return this._setErrorState(),this.fire(new l.Event("outofmaxbounds",M)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=M,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error","mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background");break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(M),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(M),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale","mapboxgl-user-location-dot-stale"),this.fire(new l.Event("geolocate",M)),this._finish()}}_updateCamera(M){const d=new l.LngLat(M.coords.longitude,M.coords.latitude),k=M.coords.accuracy,C=this._map.getBearing(),D=l.extend({bearing:C},this.options.fitBoundsOptions);this._map.fitBounds(d.toBounds(k),D,{geolocateSource:!0})}_updateMarker(M){if(M){const d=new l.LngLat(M.coords.longitude,M.coords.latitude);this._accuracyCircleMarker.setLngLat(d).addTo(this._map),this._userLocationDotMarker.setLngLat(d).addTo(this._map),this._accuracy=M.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()}_updateCircleRadius(){const M=this._map._container.clientHeight/2,d=this._map.unproject([0,M]),k=this._map.unproject([1,M]),C=d.distanceTo(k),D=Math.ceil(2*this._accuracy/C);this._circleElement.style.width=`${D}px`,this._circleElement.style.height=`${D}px`}_onZoom(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}_onError(M){if(this._map){if(this.options.trackUserLocation)if(M.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error","mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const d=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=d,this._geolocateButton.setAttribute("aria-label",d),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(M.code===3&&Il)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale","mapboxgl-user-location-dot-stale"),this.fire(new l.Event("error",M)),this._finish()}}_finish(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0}_setupUI(M){if(this._container.addEventListener("contextmenu",d=>d.preventDefault()),this._geolocateButton=T.create("button","maplibregl-ctrl-geolocate mapboxgl-ctrl-geolocate",this._container),T.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",M===!1){l.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");const d=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=d,this._geolocateButton.setAttribute("aria-label",d)}else{const d=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=d,this._geolocateButton.setAttribute("aria-label",d)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=T.create("div","maplibregl-user-location-dot mapboxgl-user-location-dot"),this._userLocationDotMarker=new Oa(this._dotElement),this._circleElement=T.create("div","maplibregl-user-location-accuracy-circle mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new Oa({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",d=>{d.geolocateSource||this._watchState!=="ACTIVE_LOCK"||d.originalEvent&&d.originalEvent.type==="resize"||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this.fire(new l.Event("trackuserlocationend")))})}trigger(){if(!this._setup)return l.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new l.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":Bo--,Il=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error","mapboxgl-ctrl-geolocate-background-error"),this.fire(new l.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new l.Event("trackuserlocationstart"));break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active");break;case"OFF":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let M;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),Bo++,Bo>1?(M={maximumAge:6e5,timeout:0},Il=!0):(M=this.options.positionOptions,Il=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,M)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},AttributionControl:Ss,LogoControl:Au,ScaleControl:class{constructor(M){this.options=l.extend({},Xs,M),l.bindAll(["_onMove","setUnit"],this)}getDefaultPosition(){return"bottom-left"}_onMove(){r0(this._map,this._container,this.options)}onAdd(M){return this._map=M,this._container=T.create("div","maplibregl-ctrl maplibregl-ctrl-scale mapboxgl-ctrl mapboxgl-ctrl-scale",M.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){T.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}setUnit(M){this.options.unit=M,r0(this._map,this._container,this.options)}},FullscreenControl:class{constructor(M){this._fullscreen=!1,M&&M.container&&(M.container instanceof HTMLElement?this._container=M.container:l.warnOnce("Full screen control 'container' must be a DOM element.")),l.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(M){return this._map=M,this._container||(this._container=this._map.getContainer()),this._controlContainer=T.create("div","maplibregl-ctrl maplibregl-ctrl-group mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",l.warnOnce("This device does not support fullscreen mode.")),this._controlContainer}onRemove(){T.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._changeIcon)}_checkFullscreenSupport(){return!!(document.fullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled||document.webkitFullscreenEnabled)}_setupUI(){const M=this._fullscreenButton=T.create("button","maplibregl-ctrl-fullscreen mapboxgl-ctrl-fullscreen",this._controlContainer);T.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",M).setAttribute("aria-hidden","true"),M.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._changeIcon)}_updateTitle(){const M=this._getTitle();this._fullscreenButton.setAttribute("aria-label",M),this._fullscreenButton.title=M}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_changeIcon(){(window.document.fullscreenElement||window.document.mozFullScreenElement||window.document.webkitFullscreenElement||window.document.msFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())}_onClickFullscreen(){this._isFullscreen()?window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.msExitFullscreen?window.document.msExitFullscreen():window.document.webkitCancelFullScreen&&window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()}},TerrainControl:class{constructor(M){this.options=M,l.bindAll(["_toggleTerrain","_updateTerrainIcon"],this)}onAdd(M){return this._map=M,this._container=T.create("div","maplibregl-ctrl maplibregl-ctrl-group mapboxgl-ctrl mapboxgl-ctrl-group"),this._terrainButton=T.create("button","maplibregl-ctrl-terrain mapboxgl-ctrl-terrain",this._container),T.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){T.remove(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}_toggleTerrain(){this._map.getTerrain()?this._map.setTerrain(null):this._map.setTerrain(this.options),this._updateTerrainIcon()}_updateTerrainIcon(){this._terrainButton.classList.remove("maplibregl-ctrl-terrain","mapboxgl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled","mapboxgl-ctrl-terrain-enabled"),this._map.style.terrain?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled","mapboxgl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.disableTerrain")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain","mapboxgl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.enableTerrain"))}},Popup:class extends l.Evented{constructor(M){super(),this.options=l.extend(Object.create(ca),M),l.bindAll(["_update","_onClose","remove","_onMouseMove","_onMouseUp","_onDrag"],this)}addTo(M){return this._map&&this.remove(),this._map=M,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer","mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer","mapboxgl-track-pointer")):this._map.on("move",this._update),this.fire(new l.Event("open")),this}isOpen(){return!!this._map}remove(){return this._content&&T.remove(this._content),this._container&&(T.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),delete this._map),this.fire(new l.Event("close")),this}getLngLat(){return this._lngLat}setLngLat(M){return this._lngLat=l.LngLat.convert(M),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer","mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer","mapboxgl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer","mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer","mapboxgl-track-pointer")),this}getElement(){return this._container}setText(M){return this.setDOMContent(document.createTextNode(M))}setHTML(M){const d=document.createDocumentFragment(),k=document.createElement("body");let C;for(k.innerHTML=M;C=k.firstChild,C;)d.appendChild(C);return this.setDOMContent(d)}getMaxWidth(){return this._container&&this._container.style.maxWidth}setMaxWidth(M){return this.options.maxWidth=M,this._update(),this}setDOMContent(M){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=T.create("div","maplibregl-popup-content mapboxgl-popup-content",this._container);return this._content.appendChild(M),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(M){this._container&&this._container.classList.add(M)}removeClassName(M){this._container&&this._container.classList.remove(M)}setOffset(M){return this.options.offset=M,this._update(),this}toggleClassName(M){if(this._container)return this._container.classList.toggle(M)}_createCloseButton(){this.options.closeButton&&(this._closeButton=T.create("button","maplibregl-popup-close-button mapboxgl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_onMouseUp(M){this._update(M.point)}_onMouseMove(M){this._update(M.point)}_onDrag(M){this._update(M.point)}_update(M){if(!this._map||!this._lngLat&&!this._trackPointer||!this._content||(this._container||(this._container=T.create("div","maplibregl-popup mapboxgl-popup",this._map.getContainer()),this._tip=T.create("div","maplibregl-popup-tip mapboxgl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className&&this.options.className.split(" ").forEach(q=>this._container.classList.add(q)),this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer","mapboxgl-popup-track-pointer")),this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=pc(this._lngLat,this._pos,this._map.transform)),this._trackPointer&&!M))return;const d=this._pos=this._trackPointer&&M?M:this._map.project(this._lngLat);let k=this.options.anchor;const C=Oc(this.options.offset);if(!k){const q=this._container.offsetWidth,Y=this._container.offsetHeight;let oe;oe=d.y+C.bottom.y<Y?["top"]:d.y>this._map.transform.height-Y?["bottom"]:[],d.x<q/2?oe.push("left"):d.x>this._map.transform.width-q/2&&oe.push("right"),k=oe.length===0?"bottom":oe.join("-")}const D=d.add(C[k]).round();T.setTransform(this._container,`${oi[k]} translate(${D.x}px,${D.y}px)`),vi(this._container,k,"popup")}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const M=this._container.querySelector(xa);M&&M.focus()}_onClose(){this.remove()}},Marker:Oa,Style:Jo,LngLat:l.LngLat,LngLatBounds:l.LngLatBounds,Point:l.pointGeometry,MercatorCoordinate:l.MercatorCoordinate,Evented:l.Evented,AJAXError:l.AJAXError,config:l.config,CanvasSource:He,GeoJSONSource:$e,ImageSource:bt,RasterDEMTileSource:ht,RasterTileSource:ot,VectorTileSource:Fe,VideoSource:Ze,prewarm:function(){ct().acquire(Rr)},clearPrewarmedResources:function(){const M=St;M&&(M.isPreloaded()&&M.numActive()===1?(M.release(Rr),St=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},get version(){return"2.4.0"},get workerCount(){return Mr.workerCount},set workerCount(M){Mr.workerCount=M},get maxParallelImageRequests(){return l.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(M){l.config.MAX_PARALLEL_IMAGE_REQUESTS=M},clearStorage(M){l.clearTileCache(M)},workerUrl:"",addProtocol(M,d){l.config.REGISTERED_PROTOCOLS[M]=d},removeProtocol(M){delete l.config.REGISTERED_PROTOCOLS[M]}};return Es.extend(as,{isSafari:l.isSafari,getPerformanceMetrics:l.PerformanceUtils.getPerformanceMetrics}),as});var c=o;return c})})(CA);const zw=Ec,Sc=hf(null),rd=hf(null),R_="",oo={title:"Water Supply Map for Nanyuki Water",url:"https://nawasco.co.ke",logo:`${R_}/favicon.png`,basePath:R_,attribution:"Nanyuki Water and Serwerage Co., Ltd.",styles:[{title:"Satellite(water)",uri:"https://nawasco.github.io/mapbox-stylefiles/unvt/style-aerial-water.json"},{title:"UNVT Buildings(water)",uri:"https://nawasco.github.io/mapbox-stylefiles/unvt/style-buildings-water.json"},{title:"Satellite(sewer)",uri:"https://nawasco.github.io/mapbox-stylefiles/unvt/style-aerial-sewer.json"},{title:"UNVT Buildings(sewer)",uri:"https://nawasco.github.io/mapbox-stylefiles/unvt/style-buildings-sewer.json"},{title:"UN Vector Tile",uri:"https://nawasco.github.io/mapbox-stylefiles/unvt/style.json"},{title:"UNVT Buildings",uri:"https://nawasco.github.io/mapbox-stylefiles/unvt/style-buildings.json"}],center:[37.119039,-.024493],zoom:13,search:{url:"https://nawasco.github.io/vt/meter.geojson",target:["accountno","serialno"],format:e=>`A/C: ${e.accountno}, S/N: ${e.serialno}, ${e.category}`,place_type:["meter"],placeholder:"Account No or S/N",zoom:16,limit:50},popup:{target:["pipeline","sewerline","meter","kiosks","borehole","tank","booster-pump","chambers","manholes","pg-building"]},legend:{targets:{cadastral:"Cadastral","cadastral-annotation":"Cadastral Label",blocks:"Blocks","blocks-annotation":"Blocks Label",waterworks:"Waterworks",pipeline:"Pipeline",pipeline_annotation:"Pipeline Label",sewerline:"Sewer Pipeline",sewerline_annotation:"Sewer Pipeline Label",meter:"Consumer Meter",kiosks:"Water Kiosk",borehole:"Borehole",tank:"Tank","booster-pump":"Booster Pump",chambers:"Chamber",manholes:"Manhole"}},elevation:{url:"https://nawasco.github.io/ke-central-terrain/tiles/{z}/{x}/{y}.png",options:{tileSize:512,font:["Roboto Medium"],fontSize:12,fontHalo:1,mainColor:"#263238",haloColor:"#fff",units:"kilometers"}},valhalla:{url:"https://valhalla.water-gis.com",isoChroneOptions:{Contours:[{time:3,distance:1,color:"ff0000"},{time:5,distance:2,color:"ffff00"},{time:10,distance:3,color:"0000ff"},{time:15,distance:4,color:"ff00ff"}],isochrone:{font:["Roboto Medium"],fontSize:14,fontHalo:3,fontColor:"#263238",fontHaloColor:"#fff"}},routingOptions:{font:["Roboto Medium"],fontSize:14,fontHalo:3,fontColor:"#263238",fontHaloColor:"#fff",iconImage:"marker",iconSize:1}},terrain:{source:"nanyuki-dem",exaggeration:1}};var Nw={};Object.defineProperty(Nw,"__esModule",{value:!0});class Sf{constructor(t,r){this.areas=t||Sf.DEFAULT_AREAS,this.limit_no_areas=r||Sf.DEFAULT_NO_AREAS,this.onDocumentClick=this.onDocumentClick.bind(this)}getDefaultPosition(){return"top-right"}onAdd(t){this.map=t;const r=this;if(this.controlContainer=document.createElement("div"),this.controlContainer.classList.add("mapboxgl-ctrl"),this.controlContainer.classList.add("mapboxgl-ctrl-group"),this.areas.length<=this.limit_no_areas){this.mapAreaContainer=document.createElement("div"),this.areaButton=document.createElement("button"),this.mapAreaContainer.classList.add("mapboxgl-area-list");for(const n of this.areas){const o=document.createElement("button");o.innerText=n.title,o.classList.add(n.title.replace(/[^a-z0-9-]/gi,"_")),o.value=JSON.stringify({center:n.latlng,zoom:n.zoom}),o.addEventListener("click",u=>{const c=u.srcElement;this.map.jumpTo(JSON.parse(c.value)),this.mapAreaContainer.style.display="none",this.areaButton.style.display="block";const l=this.mapAreaContainer.getElementsByClassName("active");for(;l[0];)l[0].classList.remove("active");c.classList.add("active")}),n.title===Sf.DEFAULT_AREA&&o.classList.add("active"),this.mapAreaContainer.appendChild(o)}this.areaButton.classList.add("mapboxgl-ctrl-icon"),this.areaButton.classList.add("mapboxgl-area-switcher"),this.areaButton.addEventListener("click",()=>{this.areaButton.style.display="none",this.mapAreaContainer.style.display="block"}),document.addEventListener("click",this.onDocumentClick),this.controlContainer.appendChild(this.areaButton),this.controlContainer.appendChild(this.mapAreaContainer)}else this.controlContainer.classList.add("mapboxgl-ctrl-area-switch"),this.select=document.createElement("select"),this.select.setAttribute("type","select"),this.select.addEventListener("change",function(n){n.target&&r.map.flyTo(JSON.parse(n.target[this.selectedIndex].value))}),this.controlContainer.appendChild(this.select),this.areas.forEach(function(n){var o=document.createElement("option");o.setAttribute("type","option"),o.text=n.title,o.value=JSON.stringify({center:n.latlng,zoom:n.zoom}),r.select.appendChild(o)});return this.controlContainer}onRemove(){!this.controlContainer||!this.controlContainer.parentNode||!this.map||!this.areaButton||(this.areaButton.removeEventListener("click",this.onDocumentClick),this.controlContainer.parentNode.removeChild(this.controlContainer),document.removeEventListener("click",this.onDocumentClick),this.map=void 0)}onDocumentClick(t){this.controlContainer&&!this.controlContainer.contains(t.target)&&this.mapAreaContainer&&this.areaButton&&(this.mapAreaContainer.style.display="none",this.areaButton.style.display="block")}}var IA=Nw.default=Sf;Sf.DEFAULT_AREA="Narok";Sf.DEFAULT_AREAS=[{title:"Narok",latlng:[35.86974,-1.08707],zoom:13},{title:"Nairobi",latlng:[36.8034,-1.2809],zoom:11},{title:"Mombasa",latlng:[39.65449,-4.05099],zoom:12}];Sf.DEFAULT_NO_AREAS=5;function O_(e,t,r){const n=e.slice();return n[12]=t[r],n}function F_(e,t,r){const n=e.slice();return n[15]=t[r],n}function B_(e,t,r){const n=e.slice();return n[15]=t[r],n}function j_(e){let t;function r(u,c){return u[3]?LA:TA}let n=r(e),o=n(e);return{c(){t=yt("div"),o.c(),this.h()},l(u){t=vt(u,"DIV",{class:!0});var c=Ct(t);o.l(c),c.forEach(ge),this.h()},h(){ve(t,"class","popup-select svelte-1655iok")},m(u,c){Lt(u,t,c),o.m(t,null)},p(u,c){n===(n=r(u))&&o?o.p(u,c):(o.d(1),o=n(u),o&&(o.c(),o.m(t,null)))},d(u){u&&ge(t),o.d()}}}function TA(e){let t,r,n,o=e[0],u=[];for(let c=0;c<o.length;c+=1)u[c]=U_(F_(e,o,c));return{c(){t=yt("select");for(let c=0;c<u.length;c+=1)u[c].c();this.h()},l(c){t=vt(c,"SELECT",{class:!0});var l=Ct(t);for(let h=0;h<u.length;h+=1)u[h].l(l);l.forEach(ge),this.h()},h(){ve(t,"class","is-focused svelte-1655iok"),e[2]===void 0&&Cc(()=>e[8].call(t))},m(c,l){Lt(c,t,l);for(let h=0;h<u.length;h+=1)u[h].m(t,null);Vc(t,e[2]),r||(n=rn(t,"change",e[8]),r=!0)},p(c,l){if(l&1){o=c[0];let h;for(h=0;h<o.length;h+=1){const v=F_(c,o,h);u[h]?u[h].p(v,l):(u[h]=U_(v),u[h].c(),u[h].m(t,null))}for(;h<u.length;h+=1)u[h].d(1);u.length=o.length}l&5&&Vc(t,c[2])},d(c){c&&ge(t),Ol(u,c),r=!1,n()}}}function LA(e){let t,r,n,o=e[0],u=[];for(let c=0;c<o.length;c+=1)u[c]=q_(B_(e,o,c));return{c(){t=yt("select");for(let c=0;c<u.length;c+=1)u[c].c();this.h()},l(c){t=vt(c,"SELECT",{class:!0});var l=Ct(t);for(let h=0;h<u.length;h+=1)u[h].l(l);l.forEach(ge),this.h()},h(){ve(t,"class","is-focused svelte-1655iok"),t.disabled=!0,e[2]===void 0&&Cc(()=>e[7].call(t))},m(c,l){Lt(c,t,l);for(let h=0;h<u.length;h+=1)u[h].m(t,null);Vc(t,e[2]),r||(n=rn(t,"change",e[7]),r=!0)},p(c,l){if(l&1){o=c[0];let h;for(h=0;h<o.length;h+=1){const v=B_(c,o,h);u[h]?u[h].p(v,l):(u[h]=q_(v),u[h].c(),u[h].m(t,null))}for(;h<u.length;h+=1)u[h].d(1);u.length=o.length}l&5&&Vc(t,c[2])},d(c){c&&ge(t),Ol(u,c),r=!1,n()}}}function U_(e){let t,r=`${e[15].sourceLayer} (${e[15].source})`,n,o;return{c(){t=yt("option"),n=ei(r),this.h()},l(u){t=vt(u,"OPTION",{class:!0});var c=Ct(t);n=ti(c,r),c.forEach(ge),this.h()},h(){t.__value=o=e[15],t.value=t.__value,ve(t,"class","svelte-1655iok")},m(u,c){Lt(u,t,c),lt(t,n)},p(u,c){c&1&&r!==(r=`${u[15].sourceLayer} (${u[15].source})`)&&ta(n,r),c&1&&o!==(o=u[15])&&(t.__value=o,t.value=t.__value)},d(u){u&&ge(t)}}}function q_(e){let t,r=`${e[15].sourceLayer} (${e[15].source})`,n,o;return{c(){t=yt("option"),n=ei(r),this.h()},l(u){t=vt(u,"OPTION",{class:!0});var c=Ct(t);n=ti(c,r),c.forEach(ge),this.h()},h(){t.__value=o=e[15],t.value=t.__value,ve(t,"class","svelte-1655iok")},m(u,c){Lt(u,t,c),lt(t,n)},p(u,c){c&1&&r!==(r=`${u[15].sourceLayer} (${u[15].source})`)&&ta(n,r),c&1&&o!==(o=u[15])&&(t.__value=o,t.value=t.__value)},d(u){u&&ge(t)}}}function V_(e){let t,r,n=Object.keys(e[2].properties),o=[];for(let u=0;u<n.length;u+=1)o[u]=$_(O_(e,n,u));return{c(){t=yt("div"),r=yt("table");for(let u=0;u<o.length;u+=1)o[u].c();this.h()},l(u){t=vt(u,"DIV",{class:!0});var c=Ct(t);r=vt(c,"TABLE",{class:!0});var l=Ct(r);for(let h=0;h<o.length;h+=1)o[h].l(l);l.forEach(ge),c.forEach(ge),this.h()},h(){ve(r,"class","svelte-1655iok"),ve(t,"class","popup-table svelte-1655iok")},m(u,c){Lt(u,t,c),lt(t,r);for(let l=0;l<o.length;l+=1)o[l].m(r,null)},p(u,c){if(c&4){n=Object.keys(u[2].properties);let l;for(l=0;l<n.length;l+=1){const h=O_(u,n,l);o[l]?o[l].p(h,c):(o[l]=$_(h),o[l].c(),o[l].m(r,null))}for(;l<o.length;l+=1)o[l].d(1);o.length=n.length}},d(u){u&&ge(t),Ol(o,u)}}}function $_(e){let t,r,n=e[12]+"",o,u,c=e[2].properties[e[12]]+"",l;return{c(){t=yt("tr"),r=yt("th"),o=ei(n),u=yt("td"),l=ei(c),this.h()},l(h){t=vt(h,"TR",{});var v=Ct(t);r=vt(v,"TH",{class:!0});var w=Ct(r);o=ti(w,n),w.forEach(ge),u=vt(v,"TD",{class:!0});var E=Ct(u);l=ti(E,c),E.forEach(ge),v.forEach(ge),this.h()},h(){ve(r,"class","svelte-1655iok"),ve(u,"class","svelte-1655iok")},m(h,v){Lt(h,t,v),lt(t,r),lt(r,o),lt(t,u),lt(u,l)},p(h,v){v&4&&n!==(n=h[12]+"")&&ta(o,n),v&4&&c!==(c=h[2].properties[h[12]]+"")&&ta(l,c)},d(h){h&&ge(t)}}}function PA(e){let t,r,n=e[0]&&e[0].length>0&&j_(e),o=e[2]&&V_(e);return{c(){t=yt("div"),n&&n.c(),r=mr(),o&&o.c()},l(u){t=vt(u,"DIV",{});var c=Ct(t);n&&n.l(c),r=gr(c),o&&o.l(c),c.forEach(ge)},m(u,c){Lt(u,t,c),n&&n.m(t,null),lt(t,r),o&&o.m(t,null),e[9](t)},p(u,[c]){u[0]&&u[0].length>0?n?n.p(u,c):(n=j_(u),n.c(),n.m(t,r)):n&&(n.d(1),n=null),u[2]?o?o.p(u,c):(o=V_(u),o.c(),o.m(t,null)):o&&(o.d(1),o=null)},i:Qn,o:Qn,d(u){u&&ge(t),n&&n.d(),o&&o.d(),e[9](null)}}}function MA(e,t,r){let n,{map:o}=t,{targetLayers:u=[]}=t,c,l,h=[],v;function w(){}w.prototype.onAdd=function(U){return this.map=U,this.controlContainer=document.createElement("div"),this.controlContainer.className="mapboxgl-ctrl mapboxgl-ctrl-group",this.button=document.createElement("button"),this.button.className="maplibre-identify-icon",this.button.type="button",this.button.addEventListener("click",()=>{this.changeButtonCondition()}),this.controlContainer.appendChild(this.button),this.button.dispatchEvent(new Event("click")),this.controlContainer},w.prototype.changeButtonCondition=function(){this.isActive?(this.button.classList.remove("-active"),this.isActive=!1,this.map.off("click",this.onClick.bind(this)),r(0,h=[]),r(2,v=void 0),c&&(c.remove(),c=void 0)):(this.button.classList.add("-active"),this.isActive=!0,this.map.on("click",this.onClick.bind(this)))},w.prototype.onClick=function(U){if(!this.isActive){r(0,h=[]),r(2,v=void 0);return}let G=[];u.length>0?u.forEach(X=>{this.map.getLayer(X)&&G.push(X)}):G=o.getStyle().layers.map(X=>X.id);const H=this.map.queryRenderedFeatures(U.point,{layers:G});r(0,h=H.filter(X=>Object.keys(X.properties).length>0)),r(2,v=h.length>0?h[0]:void 0),h.length>0?c=new Ec.Popup().setLngLat(U.lngLat).setDOMContent(l).setMaxWidth("300px").addTo(o):c&&(c.remove(),c=void 0)},w.prototype.onRemove=function(){!this.controlContainer||!this.controlContainer.parentNode||!this.map||!this.button||(this.controlContainer.parentNode.removeChild(this.controlContainer),this.map.off("click",this.onClick.bind(this)),this.map=void 0)};let E=null;Ff(async()=>{r(6,E=new w)});function T(){v=qh(this),r(2,v),r(0,h)}function I(){v=qh(this),r(2,v),r(0,h)}function F(U){Ft[U?"unshift":"push"](()=>{l=U,r(1,l)})}return e.$$set=U=>{"map"in U&&r(4,o=U.map),"targetLayers"in U&&r(5,u=U.targetLayers)},e.$$.update=()=>{e.$$.dirty&1&&r(3,n=h.length===1),e.$$.dirty&80&&o&&E!==null&&o.hasControl(E)===!1&&o.addControl(E,"top-right")},[h,l,v,n,o,u,E,T,I,F]}class DA extends Dn{constructor(t){super(),zn(this,t,MA,PA,Ln,{map:4,targetLayers:5})}}const Qd=parseFloat;function Cg(e,t=";"){let r;if(Array.isArray(e))r=e.filter(n=>n);else{r=[];for(const n in e)e[n]&&r.push(`${n}:${e[n]}`)}return r.join(t)}function zA(e,t,r,n){let o,u;const c="1em";let l,h,v,w="-.125em";const E="visible";return n&&(v="center",u="1.25em"),r&&(o=r),t&&(t=="lg"?(h="1.33333em",l=".75em",w="-.225em"):t=="xs"?h=".75em":t=="sm"?h=".875em":h=t.replace("x","em")),Cg([Cg({float:o,width:u,height:c,"line-height":l,"font-size":h,"text-align":v,"vertical-align":w,"transform-origin":"center",overflow:E}),e])}function NA(e,t,r,n,o,u=1,c="",l=""){let h=1,v=1;return o&&(o=="horizontal"?h=-1:o=="vertical"?v=-1:h=v=-1),Cg([`translate(${Qd(t)*u}${c},${Qd(r)*u}${c})`,`scale(${h*Qd(e)},${v*Qd(e)})`,n&&`rotate(${n}${l})`]," ")}function G_(e){let t,r,n,o,u,c,l,h;function v(T,I){return typeof T[10][4]=="string"?OA:RA}let w=v(e),E=w(e);return{c(){t=Vh("svg"),r=Vh("g"),n=Vh("g"),E.c(),this.h()},l(T){t=$h(T,"svg",{id:!0,class:!0,style:!0,viewBox:!0,"aria-hidden":!0,role:!0,xmlns:!0});var I=Ct(t);r=$h(I,"g",{transform:!0,"transform-origin":!0});var F=Ct(r);n=$h(F,"g",{transform:!0});var U=Ct(n);E.l(U),U.forEach(ge),F.forEach(ge),I.forEach(ge),this.h()},h(){ve(n,"transform",e[12]),ve(r,"transform",o="translate("+e[10][0]/2+" "+e[10][1]/2+")"),ve(r,"transform-origin",u=e[10][0]/4+" 0"),ve(t,"id",c=e[1]||void 0),ve(t,"class",l="svelte-fa "+e[0]+" svelte-1cj2gr0"),ve(t,"style",e[11]),ve(t,"viewBox",h="0 0 "+e[10][0]+" "+e[10][1]),ve(t,"aria-hidden","true"),ve(t,"role","img"),ve(t,"xmlns","http://www.w3.org/2000/svg"),ni(t,"pulse",e[4]),ni(t,"spin",e[3])},m(T,I){Lt(T,t,I),lt(t,r),lt(r,n),E.m(n,null)},p(T,I){w===(w=v(T))&&E?E.p(T,I):(E.d(1),E=w(T),E&&(E.c(),E.m(n,null))),I&4096&&ve(n,"transform",T[12]),I&1024&&o!==(o="translate("+T[10][0]/2+" "+T[10][1]/2+")")&&ve(r,"transform",o),I&1024&&u!==(u=T[10][0]/4+" 0")&&ve(r,"transform-origin",u),I&2&&c!==(c=T[1]||void 0)&&ve(t,"id",c),I&1&&l!==(l="svelte-fa "+T[0]+" svelte-1cj2gr0")&&ve(t,"class",l),I&2048&&ve(t,"style",T[11]),I&1024&&h!==(h="0 0 "+T[10][0]+" "+T[10][1])&&ve(t,"viewBox",h),I&17&&ni(t,"pulse",T[4]),I&9&&ni(t,"spin",T[3])},d(T){T&&ge(t),E.d()}}}function RA(e){let t,r,n,o,u,c,l,h,v,w;return{c(){t=Vh("path"),c=Vh("path"),this.h()},l(E){t=$h(E,"path",{d:!0,fill:!0,"fill-opacity":!0,transform:!0}),Ct(t).forEach(ge),c=$h(E,"path",{d:!0,fill:!0,"fill-opacity":!0,transform:!0}),Ct(c).forEach(ge),this.h()},h(){ve(t,"d",r=e[10][4][0]),ve(t,"fill",n=e[6]||e[2]||"currentColor"),ve(t,"fill-opacity",o=e[9]!=!1?e[7]:e[8]),ve(t,"transform",u="translate("+e[10][0]/-2+" "+e[10][1]/-2+")"),ve(c,"d",l=e[10][4][1]),ve(c,"fill",h=e[5]||e[2]||"currentColor"),ve(c,"fill-opacity",v=e[9]!=!1?e[8]:e[7]),ve(c,"transform",w="translate("+e[10][0]/-2+" "+e[10][1]/-2+")")},m(E,T){Lt(E,t,T),Lt(E,c,T)},p(E,T){T&1024&&r!==(r=E[10][4][0])&&ve(t,"d",r),T&68&&n!==(n=E[6]||E[2]||"currentColor")&&ve(t,"fill",n),T&896&&o!==(o=E[9]!=!1?E[7]:E[8])&&ve(t,"fill-opacity",o),T&1024&&u!==(u="translate("+E[10][0]/-2+" "+E[10][1]/-2+")")&&ve(t,"transform",u),T&1024&&l!==(l=E[10][4][1])&&ve(c,"d",l),T&36&&h!==(h=E[5]||E[2]||"currentColor")&&ve(c,"fill",h),T&896&&v!==(v=E[9]!=!1?E[8]:E[7])&&ve(c,"fill-opacity",v),T&1024&&w!==(w="translate("+E[10][0]/-2+" "+E[10][1]/-2+")")&&ve(c,"transform",w)},d(E){E&&ge(t),E&&ge(c)}}}function OA(e){let t,r,n,o;return{c(){t=Vh("path"),this.h()},l(u){t=$h(u,"path",{d:!0,fill:!0,transform:!0}),Ct(t).forEach(ge),this.h()},h(){ve(t,"d",r=e[10][4]),ve(t,"fill",n=e[2]||e[5]||"currentColor"),ve(t,"transform",o="translate("+e[10][0]/-2+" "+e[10][1]/-2+")")},m(u,c){Lt(u,t,c)},p(u,c){c&1024&&r!==(r=u[10][4])&&ve(t,"d",r),c&36&&n!==(n=u[2]||u[5]||"currentColor")&&ve(t,"fill",n),c&1024&&o!==(o="translate("+u[10][0]/-2+" "+u[10][1]/-2+")")&&ve(t,"transform",o)},d(u){u&&ge(t)}}}function FA(e){let t,r=e[10][4]&&G_(e);return{c(){r&&r.c(),t=ao()},l(n){r&&r.l(n),t=ao()},m(n,o){r&&r.m(n,o),Lt(n,t,o)},p(n,[o]){n[10][4]?r?r.p(n,o):(r=G_(n),r.c(),r.m(t.parentNode,t)):r&&(r.d(1),r=null)},i:Qn,o:Qn,d(n){r&&r.d(n),n&&ge(t)}}}function BA(e,t,r){let{class:n=""}=t,{id:o=""}=t,{style:u=""}=t,{icon:c}=t,{size:l=""}=t,{color:h=""}=t,{fw:v=!1}=t,{pull:w=""}=t,{scale:E=1}=t,{translateX:T=0}=t,{translateY:I=0}=t,{rotate:F=""}=t,{flip:U=!1}=t,{spin:G=!1}=t,{pulse:H=!1}=t,{primaryColor:X=""}=t,{secondaryColor:ee=""}=t,{primaryOpacity:K=1}=t,{secondaryOpacity:se=.4}=t,{swapOpacity:ce=!1}=t,_e,pe,Ge;return e.$$set=We=>{"class"in We&&r(0,n=We.class),"id"in We&&r(1,o=We.id),"style"in We&&r(13,u=We.style),"icon"in We&&r(14,c=We.icon),"size"in We&&r(15,l=We.size),"color"in We&&r(2,h=We.color),"fw"in We&&r(16,v=We.fw),"pull"in We&&r(17,w=We.pull),"scale"in We&&r(18,E=We.scale),"translateX"in We&&r(19,T=We.translateX),"translateY"in We&&r(20,I=We.translateY),"rotate"in We&&r(21,F=We.rotate),"flip"in We&&r(22,U=We.flip),"spin"in We&&r(3,G=We.spin),"pulse"in We&&r(4,H=We.pulse),"primaryColor"in We&&r(5,X=We.primaryColor),"secondaryColor"in We&&r(6,ee=We.secondaryColor),"primaryOpacity"in We&&r(7,K=We.primaryOpacity),"secondaryOpacity"in We&&r(8,se=We.secondaryOpacity),"swapOpacity"in We&&r(9,ce=We.swapOpacity)},e.$$.update=()=>{e.$$.dirty&16384&&r(10,_e=c&&c.icon||[0,0,"",[],""]),e.$$.dirty&237568&&r(11,pe=zA(u,l,w,v)),e.$$.dirty&8126464&&r(12,Ge=NA(E,T,I,F,U,512))},[n,o,h,G,H,X,ee,K,se,ce,_e,pe,Ge,u,c,l,v,w,E,T,I,F,U]}class go extends Dn{constructor(t){super(),zn(this,t,BA,FA,Ln,{class:0,id:1,style:13,icon:14,size:15,color:2,fw:16,pull:17,scale:18,translateX:19,translateY:20,rotate:21,flip:22,spin:3,pulse:4,primaryColor:5,secondaryColor:6,primaryOpacity:7,secondaryOpacity:8,swapOpacity:9})}}var jA={prefix:"fas",iconName:"sort-down",icon:[320,512,["sort-desc"],"f0dd","M182.6 470.6c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-9.2-9.2-11.9-22.9-6.9-34.9s16.6-19.8 29.6-19.8H288c12.9 0 24.6 7.8 29.6 19.8s2.2 25.7-6.9 34.9l-128 128z"]},UA={prefix:"fas",iconName:"arrow-down-up-across-line",icon:[576,512,[],"e4af","M137.4 502.6c12.5 12.5 32.8 12.5 45.3 0l96-96c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L192 402.7V288H544c17.7 0 32-14.3 32-32s-14.3-32-32-32H448V109.3l41.4 41.4c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3l-96-96c-12.5-12.5-32.8-12.5-45.3 0l-96 96c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L384 109.3V224H192 128 32c-17.7 0-32 14.3-32 32s14.3 32 32 32h96V402.7L86.6 361.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3l96 96zM128 192h64V64c0-17.7-14.3-32-32-32s-32 14.3-32 32V192zM448 320H384V448c0 17.7 14.3 32 32 32s32-14.3 32-32V320z"]},qA={prefix:"fas",iconName:"bars",icon:[448,512,["navicon"],"f0c9","M0 96C0 78.3 14.3 64 32 64H416c17.7 0 32 14.3 32 32s-14.3 32-32 32H32C14.3 128 0 113.7 0 96zM0 256c0-17.7 14.3-32 32-32H416c17.7 0 32 14.3 32 32s-14.3 32-32 32H32c-17.7 0-32-14.3-32-32zM448 416c0 17.7-14.3 32-32 32H32c-17.7 0-32-14.3-32-32s14.3-32 32-32H416c17.7 0 32 14.3 32 32z"]},VA={prefix:"fas",iconName:"pen-to-square",icon:[512,512,["edit"],"f044","M471.6 21.7c-21.9-21.9-57.3-21.9-79.2 0L362.3 51.7l97.9 97.9 30.1-30.1c21.9-21.9 21.9-57.3 0-79.2L471.6 21.7zm-299.2 220c-6.1 6.1-10.8 13.6-13.5 21.9l-29.6 88.8c-2.9 8.6-.6 18.1 5.8 24.6s15.9 8.7 24.6 5.8l88.8-29.6c8.2-2.8 15.7-7.4 21.9-13.5L437.7 172.3 339.7 74.3 172.4 241.7zM96 64C43 64 0 107 0 160V416c0 53 43 96 96 96H352c53 0 96-43 96-96V320c0-17.7-14.3-32-32-32s-32 14.3-32 32v96c0 17.7-14.3 32-32 32H96c-17.7 0-32-14.3-32-32V160c0-17.7 14.3-32 32-32h96c17.7 0 32-14.3 32-32s-14.3-32-32-32H96z"]},$A={prefix:"fas",iconName:"share-nodes",icon:[448,512,["share-alt"],"f1e0","M352 224c53 0 96-43 96-96s-43-96-96-96s-96 43-96 96c0 4 .2 8 .7 11.9l-94.1 47C145.4 170.2 121.9 160 96 160c-53 0-96 43-96 96s43 96 96 96c25.9 0 49.4-10.2 66.6-26.9l94.1 47c-.5 3.9-.7 7.8-.7 11.9c0 53 43 96 96 96s96-43 96-96s-43-96-96-96c-25.9 0-49.4 10.2-66.6 26.9l-94.1-47c.5-3.9 .7-7.8 .7-11.9s-.2-8-.7-11.9l94.1-47C302.6 213.8 326.1 224 352 224z"]},GA={prefix:"fas",iconName:"eye-slash",icon:[640,512,[],"f070","M38.8 5.1C28.4-3.1 13.3-1.2 5.1 9.2S-1.2 34.7 9.2 42.9l592 464c10.4 8.2 25.5 6.3 33.7-4.1s6.3-25.5-4.1-33.7L525.6 386.7c39.6-40.6 66.4-86.1 79.9-118.4c3.3-7.9 3.3-16.7 0-24.6c-14.9-35.7-46.2-87.7-93-131.1C465.5 68.8 400.8 32 320 32c-68.2 0-125 26.3-169.3 60.8L38.8 5.1zM223.1 149.5C248.6 126.2 282.7 112 320 112c79.5 0 144 64.5 144 144c0 24.9-6.3 48.3-17.4 68.7L408 294.5c8.4-19.3 10.6-41.4 4.8-63.3c-11.1-41.5-47.8-69.4-88.6-71.1c-5.8-.2-9.2 6.1-7.4 11.7c2.1 6.4 3.3 13.2 3.3 20.3c0 10.2-2.4 19.8-6.6 28.3l-90.3-70.8zM373 389.9c-16.4 6.5-34.3 10.1-53 10.1c-79.5 0-144-64.5-144-144c0-6.9 .5-13.6 1.4-20.2L83.1 161.5C60.3 191.2 44 220.8 34.5 243.7c-3.3 7.9-3.3 16.7 0 24.6c14.9 35.7 46.2 87.7 93 131.1C174.5 443.2 239.2 480 320 480c47.8 0 89.9-12.9 126.2-32.5L373 389.9z"]},HA={prefix:"fas",iconName:"bicycle",icon:[640,512,[128690],"f206","M312 32c-13.3 0-24 10.7-24 24s10.7 24 24 24h25.7l34.6 64H222.9l-27.4-38C191 99.7 183.7 96 176 96H120c-13.3 0-24 10.7-24 24s10.7 24 24 24h43.7l22.1 30.7-26.6 53.1c-10-2.5-20.5-3.8-31.2-3.8C57.3 224 0 281.3 0 352s57.3 128 128 128c65.3 0 119.1-48.9 127-112h49c8.5 0 16.3-4.5 20.7-11.8l84.8-143.5 21.7 40.1C402.4 276.3 384 312 384 352c0 70.7 57.3 128 128 128s128-57.3 128-128s-57.3-128-128-128c-13.5 0-26.5 2.1-38.7 6L375.4 48.8C369.8 38.4 359 32 347.2 32H312zM458.6 303.7l32.3 59.7c6.3 11.7 20.9 16 32.5 9.7s16-20.9 9.7-32.5l-32.3-59.7c3.6-.6 7.4-.9 11.2-.9c39.8 0 72 32.2 72 72s-32.2 72-72 72s-72-32.2-72-72c0-18.6 7-35.5 18.6-48.3zM133.2 368h65c-7.3 32.1-36 56-70.2 56c-39.8 0-72-32.2-72-72s32.2-72 72-72c1.7 0 3.4 .1 5.1 .2l-24.2 48.5c-9 18.1 4.1 39.4 24.3 39.4zm33.7-48l50.7-101.3 72.9 101.2-.1 .1H166.8zm90.6-128H365.9L317 274.8 257.4 192z"]},WA={prefix:"fas",iconName:"chart-simple",icon:[448,512,[],"e473","M160 80c0-26.5 21.5-48 48-48h32c26.5 0 48 21.5 48 48V432c0 26.5-21.5 48-48 48H208c-26.5 0-48-21.5-48-48V80zM0 272c0-26.5 21.5-48 48-48H80c26.5 0 48 21.5 48 48V432c0 26.5-21.5 48-48 48H48c-26.5 0-48-21.5-48-48V272zM368 96h32c26.5 0 48 21.5 48 48V432c0 26.5-21.5 48-48 48H368c-26.5 0-48-21.5-48-48V144c0-26.5 21.5-48 48-48z"]},ZA={prefix:"fas",iconName:"person-walking",icon:[320,512,[128694,"walking"],"f554","M160 48a48 48 0 1 1 96 0 48 48 0 1 1 -96 0zM126.5 199.3c-1 .4-1.9 .8-2.9 1.2l-8 3.5c-16.4 7.3-29 21.2-34.7 38.2l-2.6 7.8c-5.6 16.8-23.7 25.8-40.5 20.2s-25.8-23.7-20.2-40.5l2.6-7.8c11.4-34.1 36.6-61.9 69.4-76.5l8-3.5c20.8-9.2 43.3-14 66.1-14c44.6 0 84.8 26.8 101.9 67.9L281 232.7l21.4 10.7c15.8 7.9 22.2 27.1 14.3 42.9s-27.1 22.2-42.9 14.3L247 287.3c-10.3-5.2-18.4-13.8-22.8-24.5l-9.6-23-19.3 65.5 49.5 54c5.4 5.9 9.2 13 11.2 20.8l23 92.1c4.3 17.1-6.1 34.5-23.3 38.8s-34.5-6.1-38.8-23.3l-22-88.1-70.7-77.1c-14.8-16.1-20.3-38.6-14.7-59.7l16.9-63.5zM68.7 398l25-62.4c2.1 3 4.5 5.8 7 8.6l40.7 44.4-14.5 36.2c-2.4 6-6 11.5-10.6 16.1L54.6 502.6c-12.5 12.5-32.8 12.5-45.3 0s-12.5-32.8 0-45.3L68.7 398z"]},XA={prefix:"fas",iconName:"palette",icon:[512,512,[127912],"f53f","M512 256c0 .9 0 1.8 0 2.7c-.4 36.5-33.6 61.3-70.1 61.3H344c-26.5 0-48 21.5-48 48c0 3.4 .4 6.7 1 9.9c2.1 10.2 6.5 20 10.8 29.9c6.1 13.8 12.1 27.5 12.1 42c0 31.8-21.6 60.7-53.4 62c-3.5 .1-7 .2-10.6 .2C114.6 512 0 397.4 0 256S114.6 0 256 0S512 114.6 512 256zM128 288a32 32 0 1 0 -64 0 32 32 0 1 0 64 0zm0-96a32 32 0 1 0 0-64 32 32 0 1 0 0 64zM288 96a32 32 0 1 0 -64 0 32 32 0 1 0 64 0zm96 96a32 32 0 1 0 0-64 32 32 0 1 0 0 64z"]},YA={prefix:"fas",iconName:"left-right",icon:[512,512,[8596,"arrows-alt-h"],"f337","M504.3 273.6c4.9-4.5 7.7-10.9 7.7-17.6s-2.8-13-7.7-17.6l-112-104c-7-6.5-17.2-8.2-25.9-4.4s-14.4 12.5-14.4 22l0 56-192 0 0-56c0-9.5-5.7-18.2-14.4-22s-18.9-2.1-25.9 4.4l-112 104C2.8 243 0 249.3 0 256s2.8 13 7.7 17.6l112 104c7 6.5 17.2 8.2 25.9 4.4s14.4-12.5 14.4-22l0-56 192 0 0 56c0 9.5 5.7 18.2 14.4 22s18.9 2.1 25.9-4.4l112-104z"]},JA={prefix:"fas",iconName:"layer-group",icon:[576,512,[],"f5fd","M264.5 5.2c14.9-6.9 32.1-6.9 47 0l218.6 101c8.5 3.9 13.9 12.4 13.9 21.8s-5.4 17.9-13.9 21.8l-218.6 101c-14.9 6.9-32.1 6.9-47 0L45.9 149.8C37.4 145.8 32 137.3 32 128s5.4-17.9 13.9-21.8L264.5 5.2zM476.9 209.6l53.2 24.6c8.5 3.9 13.9 12.4 13.9 21.8s-5.4 17.9-13.9 21.8l-218.6 101c-14.9 6.9-32.1 6.9-47 0L45.9 277.8C37.4 273.8 32 265.3 32 256s5.4-17.9 13.9-21.8l53.2-24.6 152 70.2c23.4 10.8 50.4 10.8 73.8 0l152-70.2zm-152 198.2l152-70.2 53.2 24.6c8.5 3.9 13.9 12.4 13.9 21.8s-5.4 17.9-13.9 21.8l-218.6 101c-14.9 6.9-32.1 6.9-47 0L45.9 405.8C37.4 401.8 32 393.3 32 384s5.4-17.9 13.9-21.8l53.2-24.6 152 70.2c23.4 10.8 50.4 10.8 73.8 0z"]},KA={prefix:"fas",iconName:"up-down-left-right",icon:[512,512,["arrows-alt"],"f0b2","M278.6 9.4c-12.5-12.5-32.8-12.5-45.3 0l-64 64c-9.2 9.2-11.9 22.9-6.9 34.9s16.6 19.8 29.6 19.8h32v96H128V192c0-12.9-7.8-24.6-19.8-29.6s-25.7-2.2-34.9 6.9l-64 64c-12.5 12.5-12.5 32.8 0 45.3l64 64c9.2 9.2 22.9 11.9 34.9 6.9s19.8-16.6 19.8-29.6V288h96v96H192c-12.9 0-24.6 7.8-29.6 19.8s-2.2 25.7 6.9 34.9l64 64c12.5 12.5 32.8 12.5 45.3 0l64-64c9.2-9.2 11.9-22.9 6.9-34.9s-16.6-19.8-29.6-19.8H288V288h96v32c0 12.9 7.8 24.6 19.8 29.6s25.7 2.2 34.9-6.9l64-64c12.5-12.5 12.5-32.8 0-45.3l-64-64c-9.2-9.2-22.9-11.9-34.9-6.9s-19.8 16.6-19.8 29.6v32H288V128h32c12.9 0 24.6-7.8 29.6-19.8s2.2-25.7-6.9-34.9l-64-64z"]},QA={prefix:"fas",iconName:"circle-question",icon:[512,512,[62108,"question-circle"],"f059","M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512zM169.8 165.3c7.9-22.3 29.1-37.3 52.8-37.3h58.3c34.9 0 63.1 28.3 63.1 63.1c0 22.6-12.1 43.5-31.7 54.8L280 264.4c-.2 13-10.9 23.6-24 23.6c-13.3 0-24-10.7-24-24V250.5c0-8.6 4.6-16.5 12.1-20.8l44.3-25.4c4.7-2.7 7.6-7.7 7.6-13.1c0-8.4-6.8-15.1-15.1-15.1H222.6c-3.4 0-6.4 2.1-7.5 5.3l-.4 1.2c-4.4 12.5-18.2 19-30.6 14.6s-19-18.2-14.6-30.6l.4-1.2zM224 352a32 32 0 1 1 64 0 32 32 0 1 1 -64 0z"]},e7={prefix:"fas",iconName:"route",icon:[512,512,[],"f4d7","M512 96c0 50.2-59.1 125.1-84.6 155c-3.8 4.4-9.4 6.1-14.5 5H320c-17.7 0-32 14.3-32 32s14.3 32 32 32h96c53 0 96 43 96 96s-43 96-96 96H139.6c8.7-9.9 19.3-22.6 30-36.8c6.3-8.4 12.8-17.6 19-27.2H416c17.7 0 32-14.3 32-32s-14.3-32-32-32H320c-53 0-96-43-96-96s43-96 96-96h39.8c-21-31.5-39.8-67.7-39.8-96c0-53 43-96 96-96s96 43 96 96zM117.1 489.1c-3.8 4.3-7.2 8.1-10.1 11.3l-1.8 2-.2-.2c-6 4.6-14.6 4-20-1.8C59.8 473 0 402.5 0 352c0-53 43-96 96-96s96 43 96 96c0 30-21.1 67-43.5 97.9c-10.7 14.7-21.7 28-30.8 38.5l-.6 .7zM128 352a32 32 0 1 0 -64 0 32 32 0 1 0 64 0zM416 128a32 32 0 1 0 0-64 32 32 0 1 0 0 64z"]},t7={prefix:"fas",iconName:"eye",icon:[576,512,[128065],"f06e","M288 32c-80.8 0-145.5 36.8-192.6 80.6C48.6 156 17.3 208 2.5 243.7c-3.3 7.9-3.3 16.7 0 24.6C17.3 304 48.6 356 95.4 399.4C142.5 443.2 207.2 480 288 480s145.5-36.8 192.6-80.6c46.8-43.5 78.1-95.4 93-131.1c3.3-7.9 3.3-16.7 0-24.6c-14.9-35.7-46.2-87.7-93-131.1C433.5 68.8 368.8 32 288 32zM144 256a144 144 0 1 1 288 0 144 144 0 1 1 -288 0zm144-64c0 35.3-28.7 64-64 64c-7.1 0-13.9-1.2-20.3-3.3c-5.5-1.8-11.9 1.6-11.7 7.4c.3 6.9 1.3 13.8 3.2 20.7c13.7 51.2 66.4 81.6 117.6 67.9s81.6-66.4 67.9-117.6c-11.1-41.5-47.8-69.4-88.6-71.1c-5.8-.2-9.2 6.1-7.4 11.7c2.1 6.4 3.3 13.2 3.3 20.3z"]},r7={prefix:"fas",iconName:"floppy-disk",icon:[448,512,[128190,128426,"save"],"f0c7","M64 32C28.7 32 0 60.7 0 96V416c0 35.3 28.7 64 64 64H384c35.3 0 64-28.7 64-64V173.3c0-17-6.7-33.3-18.7-45.3L352 50.7C340 38.7 323.7 32 306.7 32H64zm0 96c0-17.7 14.3-32 32-32H288c17.7 0 32 14.3 32 32v64c0 17.7-14.3 32-32 32H96c-17.7 0-32-14.3-32-32V128zM224 288a64 64 0 1 1 0 128 64 64 0 1 1 0-128z"]},n7={prefix:"fas",iconName:"sort-up",icon:[320,512,["sort-asc"],"f0de","M182.6 41.4c-12.5-12.5-32.8-12.5-45.3 0l-128 128c-9.2 9.2-11.9 22.9-6.9 34.9s16.6 19.8 29.6 19.8H288c12.9 0 24.6-7.8 29.6-19.8s2.2-25.7-6.9-34.9l-128-128z"]},My={prefix:"fas",iconName:"trash",icon:[448,512,[],"f1f8","M135.2 17.7L128 32H32C14.3 32 0 46.3 0 64S14.3 96 32 96H416c17.7 0 32-14.3 32-32s-14.3-32-32-32H320l-7.2-14.3C307.4 6.8 296.3 0 284.2 0H163.8c-12.1 0-23.2 6.8-28.6 17.7zM416 128H32L53.2 467c1.6 25.3 22.6 45 47.9 45H346.9c25.3 0 46.3-19.7 47.9-45L416 128z"]},Dy={prefix:"fas",iconName:"ruler",icon:[512,512,[128207],"f545","M174.9 494.1c-18.7 18.7-49.1 18.7-67.9 0L14.9 401.9c-18.7-18.7-18.7-49.1 0-67.9l50.7-50.7 48 48c6.2 6.2 16.4 6.2 22.6 0s6.2-16.4 0-22.6l-48-48 41.4-41.4 48 48c6.2 6.2 16.4 6.2 22.6 0s6.2-16.4 0-22.6l-48-48 41.4-41.4 48 48c6.2 6.2 16.4 6.2 22.6 0s6.2-16.4 0-22.6l-48-48 41.4-41.4 48 48c6.2 6.2 16.4 6.2 22.6 0s6.2-16.4 0-22.6l-48-48 50.7-50.7c18.7-18.7 49.1-18.7 67.9 0l92.1 92.1c18.7 18.7 18.7 49.1 0 67.9L174.9 494.1z"]},i7={prefix:"fas",iconName:"file-pdf",icon:[448,512,[],"f1c1","M0 64C0 28.7 28.7 0 64 0H224V128c0 17.7 14.3 32 32 32H384V304H296 272 184 160c-35.3 0-64 28.7-64 64v80 48 16H64c-35.3 0-64-28.7-64-64V64zm384 64H256V0L384 128zM160 352h24c30.9 0 56 25.1 56 56s-25.1 56-56 56h-8v32c0 8.8-7.2 16-16 16s-16-7.2-16-16V448 368c0-8.8 7.2-16 16-16zm24 80c13.3 0 24-10.7 24-24s-10.7-24-24-24h-8v48h8zm88-80h24c26.5 0 48 21.5 48 48v64c0 26.5-21.5 48-48 48H272c-8.8 0-16-7.2-16-16V368c0-8.8 7.2-16 16-16zm24 128c8.8 0 16-7.2 16-16V400c0-8.8-7.2-16-16-16h-8v96h8zm72-112c0-8.8 7.2-16 16-16h48c8.8 0 16 7.2 16 16s-7.2 16-16 16H400v32h32c8.8 0 16 7.2 16 16s-7.2 16-16 16H400v48c0 8.8-7.2 16-16 16s-16-7.2-16-16V432 368z"]},o7={prefix:"fas",iconName:"braille",icon:[640,512,[],"f2a1","M128 96c0 35.3-28.7 64-64 64S0 131.3 0 96S28.7 32 64 32s64 28.7 64 64zm96 176c8.8 0 16-7.2 16-16s-7.2-16-16-16s-16 7.2-16 16s7.2 16 16 16zm0 48c-35.3 0-64-28.7-64-64s28.7-64 64-64s64 28.7 64 64s-28.7 64-64 64zM80 416c0-8.8-7.2-16-16-16s-16 7.2-16 16s7.2 16 16 16s16-7.2 16-16zm48 0c0 35.3-28.7 64-64 64s-64-28.7-64-64s28.7-64 64-64s64 28.7 64 64zm112 0c0-8.8-7.2-16-16-16s-16 7.2-16 16s7.2 16 16 16s16-7.2 16-16zm48 0c0 35.3-28.7 64-64 64s-64-28.7-64-64s28.7-64 64-64s64 28.7 64 64zM64 320c-35.3 0-64-28.7-64-64s28.7-64 64-64s64 28.7 64 64s-28.7 64-64 64zM224 160c-35.3 0-64-28.7-64-64s28.7-64 64-64s64 28.7 64 64s-28.7 64-64 64zM480 96c0 35.3-28.7 64-64 64s-64-28.7-64-64s28.7-64 64-64s64 28.7 64 64zm112 0c0-8.8-7.2-16-16-16s-16 7.2-16 16s7.2 16 16 16s16-7.2 16-16zm48 0c0 35.3-28.7 64-64 64s-64-28.7-64-64s28.7-64 64-64s64 28.7 64 64zM576 272c8.8 0 16-7.2 16-16s-7.2-16-16-16s-16 7.2-16 16s7.2 16 16 16zm0 48c-35.3 0-64-28.7-64-64s28.7-64 64-64s64 28.7 64 64s-28.7 64-64 64zm16 96c0-8.8-7.2-16-16-16s-16 7.2-16 16s7.2 16 16 16s16-7.2 16-16zm48 0c0 35.3-28.7 64-64 64s-64-28.7-64-64s28.7-64 64-64s64 28.7 64 64zM416 272c8.8 0 16-7.2 16-16s-7.2-16-16-16s-16 7.2-16 16s7.2 16 16 16zm0 48c-35.3 0-64-28.7-64-64s28.7-64 64-64s64 28.7 64 64s-28.7 64-64 64zm16 96c0-8.8-7.2-16-16-16s-16 7.2-16 16s7.2 16 16 16s16-7.2 16-16zm48 0c0 35.3-28.7 64-64 64s-64-28.7-64-64s28.7-64 64-64s64 28.7 64 64z"]},a7={prefix:"fas",iconName:"gear",icon:[512,512,[9881,"cog"],"f013","M481.9 166.6c3.2 8.7 .5 18.4-6.4 24.6l-30.9 28.1c-7.7 7.1-11.4 17.5-10.9 27.9c.1 2.9 .2 5.8 .2 8.8s-.1 5.9-.2 8.8c-.5 10.5 3.1 20.9 10.9 27.9l30.9 28.1c6.9 6.2 9.6 15.9 6.4 24.6c-4.4 11.9-9.7 23.3-15.8 34.3l-4.7 8.1c-6.6 11-14 21.4-22.1 31.2c-5.9 7.2-15.7 9.6-24.5 6.8l-39.7-12.6c-10-3.2-20.8-1.1-29.7 4.6c-4.9 3.1-9.9 6.1-15.1 8.7c-9.3 4.8-16.5 13.2-18.8 23.4l-8.9 40.7c-2 9.1-9 16.3-18.2 17.8c-13.8 2.3-28 3.5-42.5 3.5s-28.7-1.2-42.5-3.5c-9.2-1.5-16.2-8.7-18.2-17.8l-8.9-40.7c-2.2-10.2-9.5-18.6-18.8-23.4c-5.2-2.7-10.2-5.6-15.1-8.7c-8.8-5.7-19.7-7.8-29.7-4.6L69.1 425.9c-8.8 2.8-18.6 .3-24.5-6.8c-8.1-9.8-15.5-20.2-22.1-31.2l-4.7-8.1c-6.1-11-11.4-22.4-15.8-34.3c-3.2-8.7-.5-18.4 6.4-24.6l30.9-28.1c7.7-7.1 11.4-17.5 10.9-27.9c-.1-2.9-.2-5.8-.2-8.8s.1-5.9 .2-8.8c.5-10.5-3.1-20.9-10.9-27.9L8.4 191.2c-6.9-6.2-9.6-15.9-6.4-24.6c4.4-11.9 9.7-23.3 15.8-34.3l4.7-8.1c6.6-11 14-21.4 22.1-31.2c5.9-7.2 15.7-9.6 24.5-6.8l39.7 12.6c10 3.2 20.8 1.1 29.7-4.6c4.9-3.1 9.9-6.1 15.1-8.7c9.3-4.8 16.5-13.2 18.8-23.4l8.9-40.7c2-9.1 9-16.3 18.2-17.8C213.3 1.2 227.5 0 242 0s28.7 1.2 42.5 3.5c9.2 1.5 16.2 8.7 18.2 17.8l8.9 40.7c2.2 10.2 9.4 18.6 18.8 23.4c5.2 2.7 10.2 5.6 15.1 8.7c8.8 5.7 19.7 7.7 29.7 4.6l39.7-12.6c8.8-2.8 18.6-.3 24.5 6.8c8.1 9.8 15.5 20.2 22.1 31.2l4.7 8.1c6.1 11 11.4 22.4 15.8 34.3zM242 336a80 80 0 1 0 0-160 80 80 0 1 0 0 160z"]},s7={prefix:"fas",iconName:"grip-vertical",icon:[320,512,[],"f58e","M40 352c-22.1 0-40 17.9-40 40l0 48c0 22.1 17.9 40 40 40l48 0c22.1 0 40-17.9 40-40l0-48c0-22.1-17.9-40-40-40l-48 0zm192 0c-22.1 0-40 17.9-40 40l0 48c0 22.1 17.9 40 40 40l48 0c22.1 0 40-17.9 40-40l0-48c0-22.1-17.9-40-40-40l-48 0zM40 320l48 0c22.1 0 40-17.9 40-40l0-48c0-22.1-17.9-40-40-40l-48 0c-22.1 0-40 17.9-40 40l0 48c0 22.1 17.9 40 40 40zM232 192c-22.1 0-40 17.9-40 40l0 48c0 22.1 17.9 40 40 40l48 0c22.1 0 40-17.9 40-40l0-48c0-22.1-17.9-40-40-40l-48 0zM40 160l48 0c22.1 0 40-17.9 40-40l0-48c0-22.1-17.9-40-40-40L40 32C17.9 32 0 49.9 0 72l0 48c0 22.1 17.9 40 40 40zM232 32c-22.1 0-40 17.9-40 40l0 48c0 22.1 17.9 40 40 40l48 0c22.1 0 40-17.9 40-40l0-48c0-22.1-17.9-40-40-40l-48 0z"]},Rw={prefix:"fas",iconName:"clock",icon:[512,512,[128339,"clock-four"],"f017","M256 0a256 256 0 1 1 0 512A256 256 0 1 1 256 0zM232 120V256c0 8 4 15.5 10.7 20l96 64c11 7.4 25.9 4.4 33.3-6.7s4.4-25.9-6.7-33.3L280 243.2V120c0-13.3-10.7-24-24-24s-24 10.7-24 24z"]},Ow={prefix:"fas",iconName:"download",icon:[512,512,[],"f019","M288 32c0-17.7-14.3-32-32-32s-32 14.3-32 32V274.7l-73.4-73.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3l128 128c12.5 12.5 32.8 12.5 45.3 0l128-128c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L288 274.7V32zM64 352c-35.3 0-64 28.7-64 64v32c0 35.3 28.7 64 64 64H448c35.3 0 64-28.7 64-64V416c0-35.3-28.7-64-64-64H346.5l-45.3 45.3c-25 25-65.5 25-90.5 0L165.5 352H64zm368 56a24 24 0 1 1 0 48 24 24 0 1 1 0-48z"]},Fw={prefix:"fas",iconName:"stop",icon:[384,512,[9209],"f04d","M0 128C0 92.7 28.7 64 64 64H320c35.3 0 64 28.7 64 64V384c0 35.3-28.7 64-64 64H64c-35.3 0-64-28.7-64-64V128z"]},l7={prefix:"fas",iconName:"angle-down",icon:[384,512,[8964],"f107","M169.4 342.6c12.5 12.5 32.8 12.5 45.3 0l160-160c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L192 274.7 54.6 137.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3l160 160z"]},u7={prefix:"fas",iconName:"car",icon:[512,512,[128664,"automobile"],"f1b9","M135.2 117.4L109.1 192H402.9l-26.1-74.6C372.3 104.6 360.2 96 346.6 96H165.4c-13.6 0-25.7 8.6-30.2 21.4zM39.6 196.8L74.8 96.3C88.3 57.8 124.6 32 165.4 32H346.6c40.8 0 77.1 25.8 90.6 64.3l35.2 100.5c23.2 9.6 39.6 32.5 39.6 59.2V400v48c0 17.7-14.3 32-32 32H448c-17.7 0-32-14.3-32-32V400H96v48c0 17.7-14.3 32-32 32H32c-17.7 0-32-14.3-32-32V400 256c0-26.7 16.4-49.6 39.6-59.2zM128 288a32 32 0 1 0 -64 0 32 32 0 1 0 64 0zm288 32a32 32 0 1 0 0-64 32 32 0 1 0 0 64z"]},c7={prefix:"fas",iconName:"file",icon:[384,512,[128196,128459,61462],"f15b","M0 64C0 28.7 28.7 0 64 0H224V128c0 17.7 14.3 32 32 32H384V448c0 35.3-28.7 64-64 64H64c-35.3 0-64-28.7-64-64V64zm384 64H256V0L384 128z"]},f7={prefix:"fas",iconName:"copy",icon:[512,512,[],"f0c5","M224 0c-35.3 0-64 28.7-64 64V288c0 35.3 28.7 64 64 64H448c35.3 0 64-28.7 64-64V64c0-35.3-28.7-64-64-64H224zM64 160c-35.3 0-64 28.7-64 64V448c0 35.3 28.7 64 64 64H288c35.3 0 64-28.7 64-64V384H288v64H64V224h64V160H64z"]},zy={prefix:"fas",iconName:"xmark",icon:[320,512,[128473,10005,10006,10060,215,"close","multiply","remove","times"],"f00d","M310.6 150.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L160 210.7 54.6 105.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L114.7 256 9.4 361.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L160 301.3 265.4 406.6c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L205.3 256 310.6 150.6z"]},h7={prefix:"fas",iconName:"arrow-down-up-lock",icon:[640,512,[],"e4b0","M150.6 502.6l96-96c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L160 402.7V288H416V272c0-17.2 3.9-33.5 10.8-48H352V109.3l41.4 41.4c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3l-96-96c-6-6-14.1-9.4-22.6-9.4s-16.6 3.4-22.6 9.4l-96 96c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L288 109.3V224l-128 0H96l-64 0c-17.7 0-32 14.3-32 32s14.3 32 32 32H96V402.7L54.6 361.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3l96 96c12.5 12.5 32.8 12.5 45.3 0zM160 192V64c0-17.7-14.3-32-32-32s-32 14.3-32 32V192h64zM288 320V448c0 17.7 14.3 32 32 32s32-14.3 32-32V320H288zm240-80c17.7 0 32 14.3 32 32v48H496V272c0-17.7 14.3-32 32-32zm-80 32v48c-17.7 0-32 14.3-32 32V480c0 17.7 14.3 32 32 32H608c17.7 0 32-14.3 32-32V352c0-17.7-14.3-32-32-32V272c0-44.2-35.8-80-80-80s-80 35.8-80 80z"]},p7={prefix:"fas",iconName:"angle-up",icon:[384,512,[8963],"f106","M169.4 137.4c12.5-12.5 32.8-12.5 45.3 0l160 160c12.5 12.5 12.5 32.8 0 45.3s-32.8 12.5-45.3 0L192 205.3 54.6 342.6c-12.5 12.5-32.8 12.5-45.3 0s-12.5-32.8 0-45.3l160-160z"]},d7={prefix:"fas",iconName:"up-down",icon:[256,512,[8597,11021,"arrows-alt-v"],"f338","M145.6 7.7C141 2.8 134.7 0 128 0s-13 2.8-17.6 7.7l-104 112c-6.5 7-8.2 17.2-4.4 25.9S14.5 160 24 160H80V352H24c-9.5 0-18.2 5.7-22 14.4s-2.1 18.9 4.4 25.9l104 112c4.5 4.9 10.9 7.7 17.6 7.7s13-2.8 17.6-7.7l104-112c6.5-7 8.2-17.2 4.4-25.9s-12.5-14.4-22-14.4H176V160h56c9.5 0 18.2-5.7 22-14.4s2.1-18.9-4.4-25.9l-104-112z"]},Ny={prefix:"fas",iconName:"circle-xmark",icon:[512,512,[61532,"times-circle","xmark-circle"],"f057","M256 512c141.4 0 256-114.6 256-256S397.4 0 256 0S0 114.6 0 256S114.6 512 256 512zM175 175c9.4-9.4 24.6-9.4 33.9 0l47 47 47-47c9.4-9.4 24.6-9.4 33.9 0s9.4 24.6 0 33.9l-47 47 47 47c9.4 9.4 9.4 24.6 0 33.9s-24.6 9.4-33.9 0l-47-47-47 47c-9.4 9.4-24.6 9.4-33.9 0s-9.4-24.6 0-33.9l47-47-47-47c-9.4-9.4-9.4-24.6 0-33.9z"]};function _a(e){return _a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_a(e)}var zu=Uint8Array,Nu=Uint16Array,nd=Uint32Array,i2=new zu([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),o2=new zu([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),Ig=new zu([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Bw=function(e,t){for(var r=new Nu(31),n=0;n<31;++n)r[n]=t+=1<<e[n-1];for(var o=new nd(r[30]),n=1;n<30;++n)for(var u=r[n];u<r[n+1];++u)o[u]=u-r[n]<<5|n;return[r,o]},jw=Bw(i2,2),Uw=jw[0],Tg=jw[1];Uw[28]=258,Tg[258]=28;var qw=Bw(o2,0),m7=qw[0],H_=qw[1],Lg=new Nu(32768);for(var Za=0;Za<32768;++Za){var bf=(Za&43690)>>>1|(Za&21845)<<1;bf=(bf&52428)>>>2|(bf&13107)<<2,bf=(bf&61680)>>>4|(bf&3855)<<4,Lg[Za]=((bf&65280)>>>8|(bf&255)<<8)>>>1}var F0=function(e,t,r){for(var n=e.length,o=0,u=new Nu(t);o<n;++o)++u[e[o]-1];var c=new Nu(t);for(o=0;o<t;++o)c[o]=c[o-1]+u[o-1]<<1;var l;if(r){l=new Nu(1<<t);var h=15-t;for(o=0;o<n;++o)if(e[o])for(var v=o<<4|e[o],w=t-e[o],E=c[e[o]-1]++<<w,T=E|(1<<w)-1;E<=T;++E)l[Lg[E]>>>h]=v}else for(l=new Nu(n),o=0;o<n;++o)l[o]=Lg[c[e[o]-1]++]>>>15-e[o];return l},Df=new zu(288);for(var Za=0;Za<144;++Za)Df[Za]=8;for(var Za=144;Za<256;++Za)Df[Za]=9;for(var Za=256;Za<280;++Za)Df[Za]=7;for(var Za=280;Za<288;++Za)Df[Za]=8;var id=new zu(32);for(var Za=0;Za<32;++Za)id[Za]=5;var g7=F0(Df,9,0),y7=F0(Df,9,1),v7=F0(id,5,0),_7=F0(id,5,1),tm=function(e){for(var t=e[0],r=1;r<e.length;++r)e[r]>t&&(t=e[r]);return t},f0=function(e,t,r){var n=t/8>>0;return(e[n]|e[n+1]<<8)>>>(t&7)&r},rm=function(e,t){var r=t/8>>0;return(e[r]|e[r+1]<<8|e[r+2]<<16)>>>(t&7)},Ry=function(e){return(e/8>>0)+(e&7&&1)},Vw=function(e,t,r){(t==null||t<0)&&(t=0),(r==null||r>e.length)&&(r=e.length);var n=new(e instanceof Nu?Nu:e instanceof nd?nd:zu)(r-t);return n.set(e.subarray(t,r)),n},b7=function(e,t,r){var n=e.length,o=!t||r,u=!r||r.i;r||(r={}),t||(t=new zu(n*3));var c=function(At){var Pt=t.length;if(At>Pt){var Kt=new zu(Math.max(Pt*2,At));Kt.set(t),t=Kt}},l=r.f||0,h=r.p||0,v=r.b||0,w=r.l,E=r.d,T=r.m,I=r.n,F=n*8;do{if(!w){r.f=l=f0(e,h,1);var U=f0(e,h+1,3);if(h+=3,U)if(U==1)w=y7,E=_7,T=9,I=5;else if(U==2){var ee=f0(e,h,31)+257,K=f0(e,h+10,15)+4,se=ee+f0(e,h+5,31)+1;h+=14;for(var ce=new zu(se),_e=new zu(19),pe=0;pe<K;++pe)_e[Ig[pe]]=f0(e,h+pe*3,7);h+=K*3;var Ge=tm(_e),We=(1<<Ge)-1;if(!u&&h+se*(Ge+7)>F)break;for(var Ae=F0(_e,Ge,1),pe=0;pe<se;){var Ie=Ae[f0(e,h,We)];h+=Ie&15;var G=Ie>>>4;if(G<16)ce[pe++]=G;else{var Fe=0,ot=0;for(G==16?(ot=3+f0(e,h,3),h+=2,Fe=ce[pe-1]):G==17?(ot=3+f0(e,h,7),h+=3):G==18&&(ot=11+f0(e,h,127),h+=7);ot--;)ce[pe++]=Fe}}var _t=ce.subarray(0,ee),ht=ce.subarray(ee);T=tm(_t),I=tm(ht),w=F0(_t,T,1),E=F0(ht,I,1)}else throw"invalid block type";else{var G=Ry(h)+4,H=e[G-4]|e[G-3]<<8,X=G+H;if(X>n){if(u)throw"unexpected EOF";break}o&&c(v+H),t.set(e.subarray(G,X),v),r.b=v+=H,r.p=h=X*8;continue}if(h>F)throw"unexpected EOF"}o&&c(v+131072);for(var $e=(1<<T)-1,ut=(1<<I)-1,bt=T+I+18;u||h+bt<F;){var Fe=w[rm(e,h)&$e],Ze=Fe>>>4;if(h+=Fe&15,h>F)throw"unexpected EOF";if(!Fe)throw"invalid length/literal";if(Ze<256)t[v++]=Ze;else if(Ze==256){w=null;break}else{var He=Ze-254;if(Ze>264){var pe=Ze-257,xe=i2[pe];He=f0(e,h,(1<<xe)-1)+Uw[pe],h+=xe}var Ne=E[rm(e,h)&ut],Pe=Ne>>>4;if(!Ne)throw"invalid distance";h+=Ne&15;var ht=m7[Pe];if(Pe>3){var xe=o2[Pe];ht+=rm(e,h)&(1<<xe)-1,h+=xe}if(h>F)throw"unexpected EOF";o&&c(v+131072);for(var ft=v+He;v<ft;v+=4)t[v]=t[v-ht],t[v+1]=t[v+1-ht],t[v+2]=t[v+2-ht],t[v+3]=t[v+3-ht];v=ft}}r.l=w,r.p=h,r.b=v,w&&(l=1,r.m=T,r.d=E,r.n=I)}while(!l);return v==t.length?t:Vw(t,0,v)},K0=function(e,t,r){r<<=t&7;var n=t/8>>0;e[n]|=r,e[n+1]|=r>>>8},Pp=function(e,t,r){r<<=t&7;var n=t/8>>0;e[n]|=r,e[n+1]|=r>>>8,e[n+2]|=r>>>16},nm=function(e,t){for(var r=[],n=0;n<e.length;++n)e[n]&&r.push({s:n,f:e[n]});var o=r.length,u=r.slice();if(!o)return[new zu(0),0];if(o==1){var c=new zu(r[0].s+1);return c[r[0].s]=1,[c,1]}r.sort(function(se,ce){return se.f-ce.f}),r.push({s:-1,f:25001});var l=r[0],h=r[1],v=0,w=1,E=2;for(r[0]={s:-1,f:l.f+h.f,l,r:h};w!=o-1;)l=r[r[v].f<r[E].f?v++:E++],h=r[v!=w&&r[v].f<r[E].f?v++:E++],r[w++]={s:-1,f:l.f+h.f,l,r:h};for(var T=u[0].s,n=1;n<o;++n)u[n].s>T&&(T=u[n].s);var I=new Nu(T+1),F=Pg(r[w-1],I,0);if(F>t){var n=0,U=0,G=F-t,H=1<<G;for(u.sort(function(ce,_e){return I[_e.s]-I[ce.s]||ce.f-_e.f});n<o;++n){var X=u[n].s;if(I[X]>t)U+=H-(1<<F-I[X]),I[X]=t;else break}for(U>>>=G;U>0;){var ee=u[n].s;I[ee]<t?U-=1<<t-I[ee]++-1:++n}for(;n>=0&&U;--n){var K=u[n].s;I[K]==t&&(--I[K],++U)}F=t}return[new zu(I),F]},Pg=function(e,t,r){return e.s==-1?Math.max(Pg(e.l,t,r+1),Pg(e.r,t,r+1)):t[e.s]=r},W_=function(e){for(var t=e.length;t&&!e[--t];);for(var r=new Nu(++t),n=0,o=e[0],u=1,c=function(h){r[n++]=h},l=1;l<=t;++l)if(e[l]==o&&l!=t)++u;else{if(!o&&u>2){for(;u>138;u-=138)c(32754);u>2&&(c(u>10?u-11<<5|28690:u-3<<5|12305),u=0)}else if(u>3){for(c(o),--u;u>6;u-=6)c(8304);u>2&&(c(u-3<<5|8208),u=0)}for(;u--;)c(o);u=1,o=e[l]}return[r.subarray(0,n),t]},Mp=function(e,t){for(var r=0,n=0;n<t.length;++n)r+=e[n]*t[n];return r},b1=function(e,t,r){var n=r.length,o=Ry(t+2);e[o]=n&255,e[o+1]=n>>>8,e[o+2]=e[o]^255,e[o+3]=e[o+1]^255;for(var u=0;u<n;++u)e[o+u+4]=r[u];return(o+4+n)*8},Z_=function(e,t,r,n,o,u,c,l,h,v,w){K0(t,w++,r),++o[256];for(var E=nm(o,15),T=E[0],I=E[1],F=nm(u,15),U=F[0],G=F[1],H=W_(T),X=H[0],ee=H[1],K=W_(U),se=K[0],ce=K[1],_e=new Nu(19),pe=0;pe<X.length;++pe)_e[X[pe]&31]++;for(var pe=0;pe<se.length;++pe)_e[se[pe]&31]++;for(var Ge=nm(_e,7),We=Ge[0],Ae=Ge[1],Ie=19;Ie>4&&!We[Ig[Ie-1]];--Ie);var Fe=v+5<<3,ot=Mp(o,Df)+Mp(u,id)+c,_t=Mp(o,T)+Mp(u,U)+c+14+3*Ie+Mp(_e,We)+(2*_e[16]+3*_e[17]+7*_e[18]);if(Fe<=ot&&Fe<=_t)return b1(t,w,e.subarray(h,h+v));var ht,$e,ut,bt;if(K0(t,w,1+(_t<ot)),w+=2,_t<ot){ht=F0(T,I,0),$e=T,ut=F0(U,G,0),bt=U;var Ze=F0(We,Ae,0);K0(t,w,ee-257),K0(t,w+5,ce-1),K0(t,w+10,Ie-4),w+=14;for(var pe=0;pe<Ie;++pe)K0(t,w+3*pe,We[Ig[pe]]);w+=3*Ie;for(var He=[X,se],xe=0;xe<2;++xe)for(var Ne=He[xe],pe=0;pe<Ne.length;++pe){var Pe=Ne[pe]&31;K0(t,w,Ze[Pe]),w+=We[Pe],Pe>15&&(K0(t,w,Ne[pe]>>>5&127),w+=Ne[pe]>>>12)}}else ht=g7,$e=Df,ut=v7,bt=id;for(var pe=0;pe<l;++pe)if(n[pe]>255){var Pe=n[pe]>>>18&31;Pp(t,w,ht[Pe+257]),w+=$e[Pe+257],Pe>7&&(K0(t,w,n[pe]>>>23&31),w+=i2[Pe]);var ft=n[pe]&31;Pp(t,w,ut[ft]),w+=bt[ft],ft>3&&(Pp(t,w,n[pe]>>>5&8191),w+=o2[ft])}else Pp(t,w,ht[n[pe]]),w+=$e[n[pe]];return Pp(t,w,ht[256]),w+$e[256]},w7=new nd([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),x7=new zu(0),k7=function(e,t,r,n,o,u){var c=e.length,l=new zu(n+c+5*(1+Math.floor(c/7e3))+o),h=l.subarray(n,l.length-o),v=0;if(!t||c<8)for(var w=0;w<=c;w+=65535){var E=w+65535;E<c?v=b1(h,v,e.subarray(w,E)):(h[w]=u,v=b1(h,v,e.subarray(w,c)))}else{for(var T=w7[t-1],I=T>>>13,F=T&8191,U=(1<<r)-1,G=new Nu(32768),H=new Nu(U+1),X=Math.ceil(r/3),ee=2*X,K=function(Kr){return(e[Kr]^e[Kr+1]<<X^e[Kr+2]<<ee)&U},se=new nd(25e3),ce=new Nu(288),_e=new Nu(32),pe=0,Ge=0,w=0,We=0,Ae=0,Ie=0;w<c;++w){var Fe=K(w),ot=w&32767,_t=H[Fe];if(G[ot]=_t,H[Fe]=ot,Ae<=w){var ht=c-w;if((pe>7e3||We>24576)&&ht>423){v=Z_(e,h,0,se,ce,_e,Ge,We,Ie,w-Ie,v),We=pe=Ge=0,Ie=w;for(var $e=0;$e<286;++$e)ce[$e]=0;for(var $e=0;$e<30;++$e)_e[$e]=0}var ut=2,bt=0,Ze=F,He=ot-_t&32767;if(ht>2&&Fe==K(w-He))for(var xe=Math.min(I,ht)-1,Ne=Math.min(32767,w),Pe=Math.min(258,ht);He<=Ne&&--Ze&&ot!=_t;){if(e[w+ut]==e[w+ut-He]){for(var ft=0;ft<Pe&&e[w+ft]==e[w+ft-He];++ft);if(ft>ut){if(ut=ft,bt=He,ft>xe)break;for(var At=Math.min(He,ft-2),Pt=0,$e=0;$e<At;++$e){var Kt=w-He+$e+32768&32767,$t=G[Kt],br=Kt-$t+32768&32767;br>Pt&&(Pt=br,_t=Kt)}}}ot=_t,_t=G[ot],He+=ot-_t+32768&32767}if(bt){se[We++]=268435456|Tg[ut]<<18|H_[bt];var Gt=Tg[ut]&31,Rr=H_[bt]&31;Ge+=i2[Gt]+o2[Rr],++ce[257+Gt],++_e[Rr],Ae=w+ut,++pe}else se[We++]=e[w],++ce[e[w]]}}v=Z_(e,h,u,se,ce,_e,Ge,We,Ie,w-Ie,v),u||(v=b1(h,v,x7))}return Vw(l,0,n+Ry(v)+o)},A7=function(){var e=1,t=0;return{p:function(r){for(var n=e,o=t,u=r.length,c=0;c!=u;){for(var l=Math.min(c+5552,u);c<l;++c)n+=r[c],o+=n;n%=65521,o%=65521}e=n,t=o},d:function(){return(e>>>8<<16|(t&255)<<8|t>>>8)+((e&255)<<23)*2}}},E7=function(e,t,r,n,o){return k7(e,t.level==null?6:t.level,t.mem==null?Math.ceil(Math.max(8,Math.min(13,Math.log(e.length)))*1.5):12+t.mem,r,n,!o)},S7=function(e,t,r){for(;r;++t)e[t]=r,r>>>=8},C7=function(e,t){var r=t.level,n=r==0?0:r<6?1:r==9?3:2;e[0]=120,e[1]=n<<6|(n?32-2*n:1)},I7=function(e){if((e[0]&15)!=8||e[0]>>>4>7||(e[0]<<8|e[1])%31)throw"invalid zlib data";if(e[1]&32)throw"invalid zlib data: preset dictionaries not supported"};function Mg(e,t){t===void 0&&(t={});var r=A7();r.p(e);var n=E7(e,t,2,4);return C7(n,t),S7(n,n.length-4,r.d()),n}function T7(e,t){return b7((I7(e),e.subarray(2,-4)),t)}var eo=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function im(){eo.console&&typeof eo.console.log=="function"&&eo.console.log.apply(eo.console,arguments)}var Ma={log:im,warn:function(e){eo.console&&(typeof eo.console.warn=="function"?eo.console.warn.apply(eo.console,arguments):im.call(null,arguments))},error:function(e){eo.console&&(typeof eo.console.error=="function"?eo.console.error.apply(eo.console,arguments):im(e))}};function om(e,t,r){var n=new XMLHttpRequest;n.open("GET",e),n.responseType="blob",n.onload=function(){Yf(n.response,t,r)},n.onerror=function(){Ma.error("could not download file")},n.send()}function X_(e){var t=new XMLHttpRequest;t.open("HEAD",e,!1);try{t.send()}catch{}return t.status>=200&&t.status<=299}function e1(e){try{e.dispatchEvent(new MouseEvent("click"))}catch{var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(t)}}var $p,Dg,Yf=eo.saveAs||((typeof window>"u"?"undefined":_a(window))!=="object"||window!==eo?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(e,t,r){var n=eo.URL||eo.webkitURL,o=document.createElement("a");t=t||e.name||"download",o.download=t,o.rel="noopener",typeof e=="string"?(o.href=e,o.origin!==location.origin?X_(o.href)?om(e,t,r):e1(o,o.target="_blank"):e1(o)):(o.href=n.createObjectURL(e),setTimeout(function(){n.revokeObjectURL(o.href)},4e4),setTimeout(function(){e1(o)},0))}:"msSaveOrOpenBlob"in navigator?function(e,t,r){if(t=t||e.name||"download",typeof e=="string")if(X_(e))om(e,t,r);else{var n=document.createElement("a");n.href=e,n.target="_blank",setTimeout(function(){e1(n)})}else navigator.msSaveOrOpenBlob(function(o,u){return u===void 0?u={autoBom:!1}:_a(u)!=="object"&&(Ma.warn("Deprecated: Expected third argument to be a object"),u={autoBom:!u}),u.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(o.type)?new Blob([String.fromCharCode(65279),o],{type:o.type}):o}(e,r),t)}:function(e,t,r,n){if((n=n||open("","_blank"))&&(n.document.title=n.document.body.innerText="downloading..."),typeof e=="string")return om(e,t,r);var o=e.type==="application/octet-stream",u=/constructor/i.test(eo.HTMLElement)||eo.safari,c=/CriOS\/[\d]+/.test(navigator.userAgent);if((c||o&&u)&&(typeof FileReader>"u"?"undefined":_a(FileReader))==="object"){var l=new FileReader;l.onloadend=function(){var w=l.result;w=c?w:w.replace(/^data:[^;]*;/,"data:attachment/file;"),n?n.location.href=w:location=w,n=null},l.readAsDataURL(e)}else{var h=eo.URL||eo.webkitURL,v=h.createObjectURL(e);n?n.location=v:location.href=v,n=null,setTimeout(function(){h.revokeObjectURL(v)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function $w(e){var t;e=e||"",this.ok=!1,e.charAt(0)=="#"&&(e=e.substr(1,6)),e={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[e=(e=e.replace(/ /g,"")).toLowerCase()]||e;for(var r=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(l){return[parseInt(l[1]),parseInt(l[2]),parseInt(l[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(l){return[parseInt(l[1],16),parseInt(l[2],16),parseInt(l[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(l){return[parseInt(l[1]+l[1],16),parseInt(l[2]+l[2],16),parseInt(l[3]+l[3],16)]}}],n=0;n<r.length;n++){var o=r[n].re,u=r[n].process,c=o.exec(e);c&&(t=u(c),this.r=t[0],this.g=t[1],this.b=t[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var l=this.r.toString(16),h=this.g.toString(16),v=this.b.toString(16);return l.length==1&&(l="0"+l),h.length==1&&(h="0"+h),v.length==1&&(v="0"+v),"#"+l+h+v}}/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function am(e,t){var r=e[0],n=e[1],o=e[2],u=e[3];r=au(r,n,o,u,t[0],7,-680876936),u=au(u,r,n,o,t[1],12,-389564586),o=au(o,u,r,n,t[2],17,606105819),n=au(n,o,u,r,t[3],22,-1044525330),r=au(r,n,o,u,t[4],7,-176418897),u=au(u,r,n,o,t[5],12,1200080426),o=au(o,u,r,n,t[6],17,-1473231341),n=au(n,o,u,r,t[7],22,-45705983),r=au(r,n,o,u,t[8],7,1770035416),u=au(u,r,n,o,t[9],12,-1958414417),o=au(o,u,r,n,t[10],17,-42063),n=au(n,o,u,r,t[11],22,-1990404162),r=au(r,n,o,u,t[12],7,1804603682),u=au(u,r,n,o,t[13],12,-40341101),o=au(o,u,r,n,t[14],17,-1502002290),r=su(r,n=au(n,o,u,r,t[15],22,1236535329),o,u,t[1],5,-165796510),u=su(u,r,n,o,t[6],9,-1069501632),o=su(o,u,r,n,t[11],14,643717713),n=su(n,o,u,r,t[0],20,-373897302),r=su(r,n,o,u,t[5],5,-701558691),u=su(u,r,n,o,t[10],9,38016083),o=su(o,u,r,n,t[15],14,-660478335),n=su(n,o,u,r,t[4],20,-405537848),r=su(r,n,o,u,t[9],5,568446438),u=su(u,r,n,o,t[14],9,-1019803690),o=su(o,u,r,n,t[3],14,-187363961),n=su(n,o,u,r,t[8],20,1163531501),r=su(r,n,o,u,t[13],5,-1444681467),u=su(u,r,n,o,t[2],9,-51403784),o=su(o,u,r,n,t[7],14,1735328473),r=lu(r,n=su(n,o,u,r,t[12],20,-1926607734),o,u,t[5],4,-378558),u=lu(u,r,n,o,t[8],11,-2022574463),o=lu(o,u,r,n,t[11],16,1839030562),n=lu(n,o,u,r,t[14],23,-35309556),r=lu(r,n,o,u,t[1],4,-1530992060),u=lu(u,r,n,o,t[4],11,1272893353),o=lu(o,u,r,n,t[7],16,-155497632),n=lu(n,o,u,r,t[10],23,-1094730640),r=lu(r,n,o,u,t[13],4,681279174),u=lu(u,r,n,o,t[0],11,-358537222),o=lu(o,u,r,n,t[3],16,-722521979),n=lu(n,o,u,r,t[6],23,76029189),r=lu(r,n,o,u,t[9],4,-640364487),u=lu(u,r,n,o,t[12],11,-421815835),o=lu(o,u,r,n,t[15],16,530742520),r=uu(r,n=lu(n,o,u,r,t[2],23,-995338651),o,u,t[0],6,-198630844),u=uu(u,r,n,o,t[7],10,1126891415),o=uu(o,u,r,n,t[14],15,-1416354905),n=uu(n,o,u,r,t[5],21,-57434055),r=uu(r,n,o,u,t[12],6,1700485571),u=uu(u,r,n,o,t[3],10,-1894986606),o=uu(o,u,r,n,t[10],15,-1051523),n=uu(n,o,u,r,t[1],21,-2054922799),r=uu(r,n,o,u,t[8],6,1873313359),u=uu(u,r,n,o,t[15],10,-30611744),o=uu(o,u,r,n,t[6],15,-1560198380),n=uu(n,o,u,r,t[13],21,1309151649),r=uu(r,n,o,u,t[4],6,-145523070),u=uu(u,r,n,o,t[11],10,-1120210379),o=uu(o,u,r,n,t[2],15,718787259),n=uu(n,o,u,r,t[9],21,-343485551),e[0]=Af(r,e[0]),e[1]=Af(n,e[1]),e[2]=Af(o,e[2]),e[3]=Af(u,e[3])}function a2(e,t,r,n,o,u){return t=Af(Af(t,e),Af(n,u)),Af(t<<o|t>>>32-o,r)}function au(e,t,r,n,o,u,c){return a2(t&r|~t&n,e,t,o,u,c)}function su(e,t,r,n,o,u,c){return a2(t&n|r&~n,e,t,o,u,c)}function lu(e,t,r,n,o,u,c){return a2(t^r^n,e,t,o,u,c)}function uu(e,t,r,n,o,u,c){return a2(r^(t|~n),e,t,o,u,c)}function Gw(e){var t,r=e.length,n=[1732584193,-271733879,-1732584194,271733878];for(t=64;t<=e.length;t+=64)am(n,L7(e.substring(t-64,t)));e=e.substring(t-64);var o=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<e.length;t++)o[t>>2]|=e.charCodeAt(t)<<(t%4<<3);if(o[t>>2]|=128<<(t%4<<3),t>55)for(am(n,o),t=0;t<16;t++)o[t]=0;return o[14]=8*r,am(n,o),n}function L7(e){var t,r=[];for(t=0;t<64;t+=4)r[t>>2]=e.charCodeAt(t)+(e.charCodeAt(t+1)<<8)+(e.charCodeAt(t+2)<<16)+(e.charCodeAt(t+3)<<24);return r}$p=eo.atob.bind(eo),Dg=eo.btoa.bind(eo);var Y_="0123456789abcdef".split("");function P7(e){for(var t="",r=0;r<4;r++)t+=Y_[e>>8*r+4&15]+Y_[e>>8*r&15];return t}function M7(e){return String.fromCharCode((255&e)>>0,(65280&e)>>8,(16711680&e)>>16,(4278190080&e)>>24)}function zg(e){return Gw(e).map(M7).join("")}var D7=function(e){for(var t=0;t<e.length;t++)e[t]=P7(e[t]);return e.join("")}(Gw("hello"))!="5d41402abc4b2a76b9719d911017c592";function Af(e,t){if(D7){var r=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(r>>16)<<16|65535&r}return e+t&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function Ng(e,t){var r,n,o,u;if(e!==r){for(var c=(o=e,u=1+(256/e.length>>0),new Array(u+1).join(o)),l=[],h=0;h<256;h++)l[h]=h;var v=0;for(h=0;h<256;h++){var w=l[h];v=(v+w+c.charCodeAt(h))%256,l[h]=l[v],l[v]=w}r=e,n=l}else l=n;var E=t.length,T=0,I=0,F="";for(h=0;h<E;h++)I=(I+(w=l[T=(T+1)%256]))%256,l[T]=l[I],l[I]=w,c=l[(l[T]+l[I])%256],F+=String.fromCharCode(t.charCodeAt(h)^c);return F}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var J_={print:4,modify:8,copy:16,"annot-forms":32};function Ph(e,t,r,n){this.v=1,this.r=2;var o=192;e.forEach(function(l){if(J_.perm!==void 0)throw new Error("Invalid permission: "+l);o+=J_[l]}),this.padding="(N^NuAd\0NV\b..\0h>/\fdSiz";var u=(t+this.padding).substr(0,32),c=(r+this.padding).substr(0,32);this.O=this.processOwnerPassword(u,c),this.P=-(1+(255^o)),this.encryptionKey=zg(u+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(n)).substr(0,5),this.U=Ng(this.encryptionKey,this.padding)}function Mh(e){if(/[^\u0000-\u00ff]/.test(e))throw new Error("Invalid PDF Name Object: "+e+", Only accept ASCII characters.");for(var t="",r=e.length,n=0;n<r;n++){var o=e.charCodeAt(n);o<33||o===35||o===37||o===40||o===41||o===47||o===60||o===62||o===91||o===93||o===123||o===125||o>126?t+="#"+("0"+o.toString(16)).slice(-2):t+=e[n]}return t}function K_(e){if(_a(e)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var t={};this.subscribe=function(r,n,o){if(o=o||!1,typeof r!="string"||typeof n!="function"||typeof o!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");t.hasOwnProperty(r)||(t[r]={});var u=Math.random().toString(35);return t[r][u]=[n,!!o],u},this.unsubscribe=function(r){for(var n in t)if(t[n][r])return delete t[n][r],Object.keys(t[n]).length===0&&delete t[n],!0;return!1},this.publish=function(r){if(t.hasOwnProperty(r)){var n=Array.prototype.slice.call(arguments,1),o=[];for(var u in t[r]){var c=t[r][u];try{c[0].apply(e,n)}catch(l){eo.console&&Ma.error("jsPDF PubSub Error",l.message,l)}c[1]&&o.push(u)}o.length&&o.forEach(this.unsubscribe)}},this.getTopics=function(){return t}}function M1(e){if(!(this instanceof M1))return new M1(e);var t="opacity,stroke-opacity".split(",");for(var r in e)e.hasOwnProperty(r)&&t.indexOf(r)>=0&&(this[r]=e[r]);this.id="",this.objectNumber=-1}function Hw(e,t){this.gState=e,this.matrix=t,this.id="",this.objectNumber=-1}function Qf(e,t,r,n,o){if(!(this instanceof Qf))return new Qf(e,t,r,n,o);this.type=e==="axial"?2:3,this.coords=t,this.colors=r,Hw.call(this,n,o)}function Oh(e,t,r,n,o){if(!(this instanceof Oh))return new Oh(e,t,r,n,o);this.boundingBox=e,this.xStep=t,this.yStep=r,this.stream="",this.cloneIndex=0,Hw.call(this,n,o)}function Zi(e){var t,r=typeof arguments[0]=="string"?arguments[0]:"p",n=arguments[1],o=arguments[2],u=arguments[3],c=[],l=1,h=16,v="S",w=null;_a(e=e||{})==="object"&&(r=e.orientation,n=e.unit||n,o=e.format||o,u=e.compress||e.compressPdf||u,(w=e.encryption||null)!==null&&(w.userPassword=w.userPassword||"",w.ownerPassword=w.ownerPassword||"",w.userPermissions=w.userPermissions||[]),l=typeof e.userUnit=="number"?Math.abs(e.userUnit):1,e.precision!==void 0&&(t=e.precision),e.floatPrecision!==void 0&&(h=e.floatPrecision),v=e.defaultPathOperation||"S"),c=e.filters||(u===!0?["FlateEncode"]:c),n=n||"mm",r=(""+(r||"P")).toLowerCase();var E=e.putOnlyUsedFonts||!1,T={},I={internal:{},__private__:{}};I.__private__.PubSub=K_;var F="1.3",U=I.__private__.getPdfVersion=function(){return F};I.__private__.setPdfVersion=function(te){F=te};var G={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};I.__private__.getPageFormats=function(){return G};var H=I.__private__.getPageFormat=function(te){return G[te]};o=o||"a4";var X={COMPAT:"compat",ADVANCED:"advanced"},ee=X.COMPAT;function K(){this.saveGraphicsState(),ct(new vn(xn,0,0,-xn,0,xs()*xn).toString()+" cm"),this.setFontSize(this.getFontSize()/xn),v="n",ee=X.ADVANCED}function se(){this.restoreGraphicsState(),v="S",ee=X.COMPAT}var ce=I.__private__.combineFontStyleAndFontWeight=function(te,Le){if(te=="bold"&&Le=="normal"||te=="bold"&&Le==400||te=="normal"&&Le=="italic"||te=="bold"&&Le=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return Le&&(te=Le==400||Le==="normal"?te==="italic"?"italic":"normal":Le!=700&&Le!=="bold"||te!=="normal"?(Le==700?"bold":Le)+""+te:"bold"),te};I.advancedAPI=function(te){var Le=ee===X.COMPAT;return Le&&K.call(this),typeof te!="function"||(te(this),Le&&se.call(this)),this},I.compatAPI=function(te){var Le=ee===X.ADVANCED;return Le&&se.call(this),typeof te!="function"||(te(this),Le&&K.call(this)),this},I.isAdvancedAPI=function(){return ee===X.ADVANCED};var _e,pe=function(te){if(ee!==X.ADVANCED)throw new Error(te+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},Ge=I.roundToPrecision=I.__private__.roundToPrecision=function(te,Le){var pt=t||Le;if(isNaN(te)||isNaN(pt))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return te.toFixed(pt).replace(/0+$/,"")};_e=I.hpf=I.__private__.hpf=typeof h=="number"?function(te){if(isNaN(te))throw new Error("Invalid argument passed to jsPDF.hpf");return Ge(te,h)}:h==="smart"?function(te){if(isNaN(te))throw new Error("Invalid argument passed to jsPDF.hpf");return Ge(te,te>-1&&te<1?16:5)}:function(te){if(isNaN(te))throw new Error("Invalid argument passed to jsPDF.hpf");return Ge(te,16)};var We=I.f2=I.__private__.f2=function(te){if(isNaN(te))throw new Error("Invalid argument passed to jsPDF.f2");return Ge(te,2)},Ae=I.__private__.f3=function(te){if(isNaN(te))throw new Error("Invalid argument passed to jsPDF.f3");return Ge(te,3)},Ie=I.scale=I.__private__.scale=function(te){if(isNaN(te))throw new Error("Invalid argument passed to jsPDF.scale");return ee===X.COMPAT?te*xn:ee===X.ADVANCED?te:void 0},Fe=function(te){return ee===X.COMPAT?xs()-te:ee===X.ADVANCED?te:void 0},ot=function(te){return Ie(Fe(te))};I.__private__.setPrecision=I.setPrecision=function(te){typeof parseInt(te,10)=="number"&&(t=parseInt(te,10))};var _t,ht="00000000000000000000000000000000",$e=I.__private__.getFileId=function(){return ht},ut=I.__private__.setFileId=function(te){return ht=te!==void 0&&/^[a-fA-F0-9]{32}$/.test(te)?te.toUpperCase():ht.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),w!==null&&(R=new Ph(w.userPermissions,w.userPassword,w.ownerPassword,ht)),ht};I.setFileId=function(te){return ut(te),this},I.getFileId=function(){return $e()};var bt=I.__private__.convertDateToPDFDate=function(te){var Le=te.getTimezoneOffset(),pt=Le<0?"+":"-",Bt=Math.floor(Math.abs(Le/60)),ur=Math.abs(Le%60),Xr=[pt,Pe(Bt),"'",Pe(ur),"'"].join("");return["D:",te.getFullYear(),Pe(te.getMonth()+1),Pe(te.getDate()),Pe(te.getHours()),Pe(te.getMinutes()),Pe(te.getSeconds()),Xr].join("")},Ze=I.__private__.convertPDFDateToDate=function(te){var Le=parseInt(te.substr(2,4),10),pt=parseInt(te.substr(6,2),10)-1,Bt=parseInt(te.substr(8,2),10),ur=parseInt(te.substr(10,2),10),Xr=parseInt(te.substr(12,2),10),gn=parseInt(te.substr(14,2),10);return new Date(Le,pt,Bt,ur,Xr,gn,0)},He=I.__private__.setCreationDate=function(te){var Le;if(te===void 0&&(te=new Date),te instanceof Date)Le=bt(te);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(te))throw new Error("Invalid argument passed to jsPDF.setCreationDate");Le=te}return _t=Le},xe=I.__private__.getCreationDate=function(te){var Le=_t;return te==="jsDate"&&(Le=Ze(_t)),Le};I.setCreationDate=function(te){return He(te),this},I.getCreationDate=function(te){return xe(te)};var Ne,Pe=I.__private__.padd2=function(te){return("0"+parseInt(te)).slice(-2)},ft=I.__private__.padd2Hex=function(te){return("00"+(te=te.toString())).substr(te.length)},At=0,Pt=[],Kt=[],$t=0,br=[],Gt=[],Rr=!1,Mr=Kt,Kr=function(){At=0,$t=0,Kt=[],Pt=[],br=[],nt=be(),st=be()};I.__private__.setCustomOutputDestination=function(te){Rr=!0,Mr=te};var St=function(te){Rr||(Mr=te)};I.__private__.resetCustomOutputDestination=function(){Rr=!1,Mr=Kt};var ct=I.__private__.out=function(te){return te=te.toString(),$t+=te.length+1,Mr.push(te),Mr},Or=I.__private__.write=function(te){return ct(arguments.length===1?te.toString():Array.prototype.join.call(arguments," "))},ln=I.__private__.getArrayBuffer=function(te){for(var Le=te.length,pt=new ArrayBuffer(Le),Bt=new Uint8Array(pt);Le--;)Bt[Le]=te.charCodeAt(Le);return pt},Wt=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];I.__private__.getStandardFonts=function(){return Wt};var Ur=e.fontSize||16;I.__private__.setFontSize=I.setFontSize=function(te){return Ur=ee===X.ADVANCED?te/xn:te,this};var mn,en=I.__private__.getFontSize=I.getFontSize=function(){return ee===X.COMPAT?Ur:Ur*xn},On=e.R2L||!1;I.__private__.setR2L=I.setR2L=function(te){return On=te,this},I.__private__.getR2L=I.getR2L=function(){return On};var Zn,ai=I.__private__.setZoomMode=function(te){var Le=[void 0,null,"fullwidth","fullheight","fullpage","original"];if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(te))mn=te;else if(isNaN(te)){if(Le.indexOf(te)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+te+'" is not recognized.');mn=te}else mn=parseInt(te,10)};I.__private__.getZoomMode=function(){return mn};var _i,hi=I.__private__.setPageMode=function(te){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(te)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+te+'" is not recognized.');Zn=te};I.__private__.getPageMode=function(){return Zn};var yr=I.__private__.setLayoutMode=function(te){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(te)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+te+'" is not recognized.');_i=te};I.__private__.getLayoutMode=function(){return _i},I.__private__.setDisplayMode=I.setDisplayMode=function(te,Le,pt){return ai(te),yr(Le),hi(pt),this};var Vr={title:"",subject:"",author:"",keywords:"",creator:""};I.__private__.getDocumentProperty=function(te){if(Object.keys(Vr).indexOf(te)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return Vr[te]},I.__private__.getDocumentProperties=function(){return Vr},I.__private__.setDocumentProperties=I.setProperties=I.setDocumentProperties=function(te){for(var Le in Vr)Vr.hasOwnProperty(Le)&&te[Le]&&(Vr[Le]=te[Le]);return this},I.__private__.setDocumentProperty=function(te,Le){if(Object.keys(Vr).indexOf(te)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return Vr[te]=Le};var wi,xn,si,fr,or,Yr={},un={},Nr=[],pn={},Yn={},ci={},No={},gi=null,co=0,li=[],to=new K_(I),yo=e.hotfixes||[],pi={},Ti={},Xo=[],vn=function te(Le,pt,Bt,ur,Xr,gn){if(!(this instanceof te))return new te(Le,pt,Bt,ur,Xr,gn);isNaN(Le)&&(Le=1),isNaN(pt)&&(pt=0),isNaN(Bt)&&(Bt=0),isNaN(ur)&&(ur=1),isNaN(Xr)&&(Xr=0),isNaN(gn)&&(gn=0),this._matrix=[Le,pt,Bt,ur,Xr,gn]};Object.defineProperty(vn.prototype,"sx",{get:function(){return this._matrix[0]},set:function(te){this._matrix[0]=te}}),Object.defineProperty(vn.prototype,"shy",{get:function(){return this._matrix[1]},set:function(te){this._matrix[1]=te}}),Object.defineProperty(vn.prototype,"shx",{get:function(){return this._matrix[2]},set:function(te){this._matrix[2]=te}}),Object.defineProperty(vn.prototype,"sy",{get:function(){return this._matrix[3]},set:function(te){this._matrix[3]=te}}),Object.defineProperty(vn.prototype,"tx",{get:function(){return this._matrix[4]},set:function(te){this._matrix[4]=te}}),Object.defineProperty(vn.prototype,"ty",{get:function(){return this._matrix[5]},set:function(te){this._matrix[5]=te}}),Object.defineProperty(vn.prototype,"a",{get:function(){return this._matrix[0]},set:function(te){this._matrix[0]=te}}),Object.defineProperty(vn.prototype,"b",{get:function(){return this._matrix[1]},set:function(te){this._matrix[1]=te}}),Object.defineProperty(vn.prototype,"c",{get:function(){return this._matrix[2]},set:function(te){this._matrix[2]=te}}),Object.defineProperty(vn.prototype,"d",{get:function(){return this._matrix[3]},set:function(te){this._matrix[3]=te}}),Object.defineProperty(vn.prototype,"e",{get:function(){return this._matrix[4]},set:function(te){this._matrix[4]=te}}),Object.defineProperty(vn.prototype,"f",{get:function(){return this._matrix[5]},set:function(te){this._matrix[5]=te}}),Object.defineProperty(vn.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(vn.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(vn.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(vn.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),vn.prototype.join=function(te){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(_e).join(te)},vn.prototype.multiply=function(te){var Le=te.sx*this.sx+te.shy*this.shx,pt=te.sx*this.shy+te.shy*this.sy,Bt=te.shx*this.sx+te.sy*this.shx,ur=te.shx*this.shy+te.sy*this.sy,Xr=te.tx*this.sx+te.ty*this.shx+this.tx,gn=te.tx*this.shy+te.ty*this.sy+this.ty;return new vn(Le,pt,Bt,ur,Xr,gn)},vn.prototype.decompose=function(){var te=this.sx,Le=this.shy,pt=this.shx,Bt=this.sy,ur=this.tx,Xr=this.ty,gn=Math.sqrt(te*te+Le*Le),Xn=(te/=gn)*pt+(Le/=gn)*Bt;pt-=te*Xn,Bt-=Le*Xn;var xi=Math.sqrt(pt*pt+Bt*Bt);return Xn/=xi,te*(Bt/=xi)<Le*(pt/=xi)&&(te=-te,Le=-Le,Xn=-Xn,gn=-gn),{scale:new vn(gn,0,0,xi,0,0),translate:new vn(1,0,0,1,ur,Xr),rotate:new vn(te,Le,-Le,te,0,0),skew:new vn(1,0,Xn,1,0,0)}},vn.prototype.toString=function(te){return this.join(" ")},vn.prototype.inversed=function(){var te=this.sx,Le=this.shy,pt=this.shx,Bt=this.sy,ur=this.tx,Xr=this.ty,gn=1/(te*Bt-Le*pt),Xn=Bt*gn,xi=-Le*gn,Oi=-pt*gn,Yi=te*gn;return new vn(Xn,xi,Oi,Yi,-Xn*ur-Oi*Xr,-xi*ur-Yi*Xr)},vn.prototype.applyToPoint=function(te){var Le=te.x*this.sx+te.y*this.shx+this.tx,pt=te.x*this.shy+te.y*this.sy+this.ty;return new Hl(Le,pt)},vn.prototype.applyToRectangle=function(te){var Le=this.applyToPoint(te),pt=this.applyToPoint(new Hl(te.x+te.w,te.y+te.h));return new bu(Le.x,Le.y,pt.x-Le.x,pt.y-Le.y)},vn.prototype.clone=function(){var te=this.sx,Le=this.shy,pt=this.shx,Bt=this.sy,ur=this.tx,Xr=this.ty;return new vn(te,Le,pt,Bt,ur,Xr)},I.Matrix=vn;var ze=I.matrixMult=function(te,Le){return Le.multiply(te)},Ea=new vn(1,0,0,1,0,0);I.unitMatrix=I.identityMatrix=Ea;var ha=function(te,Le){if(!Yn[te]){var pt=(Le instanceof Qf?"Sh":"P")+(Object.keys(pn).length+1).toString(10);Le.id=pt,Yn[te]=pt,pn[pt]=Le,to.publish("addPattern",Le)}};I.ShadingPattern=Qf,I.TilingPattern=Oh,I.addShadingPattern=function(te,Le){return pe("addShadingPattern()"),ha(te,Le),this},I.beginTilingPattern=function(te){pe("beginTilingPattern()"),Fn(te.boundingBox[0],te.boundingBox[1],te.boundingBox[2]-te.boundingBox[0],te.boundingBox[3]-te.boundingBox[1],te.matrix)},I.endTilingPattern=function(te,Le){pe("endTilingPattern()"),Le.stream=Gt[Ne].join(`
`),ha(te,Le),to.publish("endTilingPattern",Le),Xo.pop().restore()};var ra=I.__private__.newObject=function(){var te=be();return ye(te,!0),te},be=I.__private__.newObjectDeferred=function(){return At++,Pt[At]=function(){return $t},At},ye=function(te,Le){return Le=typeof Le=="boolean"&&Le,Pt[te]=$t,Le&&ct(te+" 0 obj"),te},De=I.__private__.newAdditionalObject=function(){var te={objId:be(),content:""};return br.push(te),te},nt=be(),st=be(),Rt=I.__private__.decodeColorString=function(te){var Le=te.split(" ");if(Le.length!==2||Le[1]!=="g"&&Le[1]!=="G")Le.length===5&&(Le[4]==="k"||Le[4]==="K")&&(Le=[(1-Le[0])*(1-Le[3]),(1-Le[1])*(1-Le[3]),(1-Le[2])*(1-Le[3]),"r"]);else{var pt=parseFloat(Le[0]);Le=[pt,pt,pt,"r"]}for(var Bt="#",ur=0;ur<3;ur++)Bt+=("0"+Math.floor(255*parseFloat(Le[ur])).toString(16)).slice(-2);return Bt},Re=I.__private__.encodeColorString=function(te){var Le;typeof te=="string"&&(te={ch1:te});var pt=te.ch1,Bt=te.ch2,ur=te.ch3,Xr=te.ch4,gn=te.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof pt=="string"&&pt.charAt(0)!=="#"){var Xn=new $w(pt);if(Xn.ok)pt=Xn.toHex();else if(!/^\d*\.?\d*$/.test(pt))throw new Error('Invalid color "'+pt+'" passed to jsPDF.encodeColorString.')}if(typeof pt=="string"&&/^#[0-9A-Fa-f]{3}$/.test(pt)&&(pt="#"+pt[1]+pt[1]+pt[2]+pt[2]+pt[3]+pt[3]),typeof pt=="string"&&/^#[0-9A-Fa-f]{6}$/.test(pt)){var xi=parseInt(pt.substr(1),16);pt=xi>>16&255,Bt=xi>>8&255,ur=255&xi}if(Bt===void 0||Xr===void 0&&pt===Bt&&Bt===ur)if(typeof pt=="string")Le=pt+" "+gn[0];else switch(te.precision){case 2:Le=We(pt/255)+" "+gn[0];break;case 3:default:Le=Ae(pt/255)+" "+gn[0]}else if(Xr===void 0||_a(Xr)==="object"){if(Xr&&!isNaN(Xr.a)&&Xr.a===0)return Le=["1.","1.","1.",gn[1]].join(" ");if(typeof pt=="string")Le=[pt,Bt,ur,gn[1]].join(" ");else switch(te.precision){case 2:Le=[We(pt/255),We(Bt/255),We(ur/255),gn[1]].join(" ");break;default:case 3:Le=[Ae(pt/255),Ae(Bt/255),Ae(ur/255),gn[1]].join(" ")}}else if(typeof pt=="string")Le=[pt,Bt,ur,Xr,gn[2]].join(" ");else switch(te.precision){case 2:Le=[We(pt),We(Bt),We(ur),We(Xr),gn[2]].join(" ");break;case 3:default:Le=[Ae(pt),Ae(Bt),Ae(ur),Ae(Xr),gn[2]].join(" ")}return Le},Ht=I.__private__.getFilters=function(){return c},Nt=I.__private__.putStream=function(te){var Le=(te=te||{}).data||"",pt=te.filters||Ht(),Bt=te.alreadyAppliedFilters||[],ur=te.addLength1||!1,Xr=Le.length,gn=te.objectId,Xn=function(Da){return Da};if(w!==null&&gn===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");w!==null&&(Xn=R.encryptor(gn,0));var xi={};pt===!0&&(pt=["FlateEncode"]);var Oi=te.additionalKeyValues||[],Yi=(xi=Zi.API.processDataByFilters!==void 0?Zi.API.processDataByFilters(Le,pt):{data:Le,reverseChain:[]}).reverseChain+(Array.isArray(Bt)?Bt.join(" "):Bt.toString());if(xi.data.length!==0&&(Oi.push({key:"Length",value:xi.data.length}),ur===!0&&Oi.push({key:"Length1",value:Xr})),Yi.length!=0)if(Yi.split("/").length-1==1)Oi.push({key:"Filter",value:Yi});else{Oi.push({key:"Filter",value:"["+Yi+"]"});for(var fo=0;fo<Oi.length;fo+=1)if(Oi[fo].key==="DecodeParms"){for(var qo=[],Ko=0;Ko<xi.reverseChain.split("/").length-1;Ko+=1)qo.push("null");qo.push(Oi[fo].value),Oi[fo].value="["+qo.join(" ")+"]"}}ct("<<");for(var Qo=0;Qo<Oi.length;Qo++)ct("/"+Oi[Qo].key+" "+Oi[Qo].value);ct(">>"),xi.data.length!==0&&(ct("stream"),ct(Xn(xi.data)),ct("endstream"))},ir=I.__private__.putPage=function(te){var Le=te.number,pt=te.data,Bt=te.objId,ur=te.contentsObjId;ye(Bt,!0),ct("<</Type /Page"),ct("/Parent "+te.rootDictionaryObjId+" 0 R"),ct("/Resources "+te.resourceDictionaryObjId+" 0 R"),ct("/MediaBox ["+parseFloat(_e(te.mediaBox.bottomLeftX))+" "+parseFloat(_e(te.mediaBox.bottomLeftY))+" "+_e(te.mediaBox.topRightX)+" "+_e(te.mediaBox.topRightY)+"]"),te.cropBox!==null&&ct("/CropBox ["+_e(te.cropBox.bottomLeftX)+" "+_e(te.cropBox.bottomLeftY)+" "+_e(te.cropBox.topRightX)+" "+_e(te.cropBox.topRightY)+"]"),te.bleedBox!==null&&ct("/BleedBox ["+_e(te.bleedBox.bottomLeftX)+" "+_e(te.bleedBox.bottomLeftY)+" "+_e(te.bleedBox.topRightX)+" "+_e(te.bleedBox.topRightY)+"]"),te.trimBox!==null&&ct("/TrimBox ["+_e(te.trimBox.bottomLeftX)+" "+_e(te.trimBox.bottomLeftY)+" "+_e(te.trimBox.topRightX)+" "+_e(te.trimBox.topRightY)+"]"),te.artBox!==null&&ct("/ArtBox ["+_e(te.artBox.bottomLeftX)+" "+_e(te.artBox.bottomLeftY)+" "+_e(te.artBox.topRightX)+" "+_e(te.artBox.topRightY)+"]"),typeof te.userUnit=="number"&&te.userUnit!==1&&ct("/UserUnit "+te.userUnit),to.publish("putPage",{objId:Bt,pageContext:li[Le],pageNumber:Le,page:pt}),ct("/Contents "+ur+" 0 R"),ct(">>"),ct("endobj");var Xr=pt.join(`
`);return ee===X.ADVANCED&&(Xr+=`
Q`),ye(ur,!0),Nt({data:Xr,filters:Ht(),objectId:ur}),ct("endobj"),Bt},Br=I.__private__.putPages=function(){var te,Le,pt=[];for(te=1;te<=co;te++)li[te].objId=be(),li[te].contentsObjId=be();for(te=1;te<=co;te++)pt.push(ir({number:te,data:Gt[te],objId:li[te].objId,contentsObjId:li[te].contentsObjId,mediaBox:li[te].mediaBox,cropBox:li[te].cropBox,bleedBox:li[te].bleedBox,trimBox:li[te].trimBox,artBox:li[te].artBox,userUnit:li[te].userUnit,rootDictionaryObjId:nt,resourceDictionaryObjId:st}));ye(nt,!0),ct("<</Type /Pages");var Bt="/Kids [";for(Le=0;Le<co;Le++)Bt+=pt[Le]+" 0 R ";ct(Bt+"]"),ct("/Count "+co),ct(">>"),ct("endobj"),to.publish("postPutPages")},nn=function(te){to.publish("putFont",{font:te,out:ct,newObject:ra,putStream:Nt}),te.isAlreadyPutted!==!0&&(te.objectNumber=ra(),ct("<<"),ct("/Type /Font"),ct("/BaseFont /"+Mh(te.postScriptName)),ct("/Subtype /Type1"),typeof te.encoding=="string"&&ct("/Encoding /"+te.encoding),ct("/FirstChar 32"),ct("/LastChar 255"),ct(">>"),ct("endobj"))},Fr=function(){for(var te in Yr)Yr.hasOwnProperty(te)&&(E===!1||E===!0&&T.hasOwnProperty(te))&&nn(Yr[te])},$n=function(te){te.objectNumber=ra();var Le=[];Le.push({key:"Type",value:"/XObject"}),Le.push({key:"Subtype",value:"/Form"}),Le.push({key:"BBox",value:"["+[_e(te.x),_e(te.y),_e(te.x+te.width),_e(te.y+te.height)].join(" ")+"]"}),Le.push({key:"Matrix",value:"["+te.matrix.toString()+"]"});var pt=te.pages[1].join(`
`);Nt({data:pt,additionalKeyValues:Le,objectId:te.objectNumber}),ct("endobj")},Wn=function(){for(var te in pi)pi.hasOwnProperty(te)&&$n(pi[te])},sn=function(te,Le){var pt,Bt=[],ur=1/(Le-1);for(pt=0;pt<1;pt+=ur)Bt.push(pt);if(Bt.push(1),te[0].offset!=0){var Xr={offset:0,color:te[0].color};te.unshift(Xr)}if(te[te.length-1].offset!=1){var gn={offset:1,color:te[te.length-1].color};te.push(gn)}for(var Xn="",xi=0,Oi=0;Oi<Bt.length;Oi++){for(pt=Bt[Oi];pt>te[xi+1].offset;)xi++;var Yi=te[xi].offset,fo=(pt-Yi)/(te[xi+1].offset-Yi),qo=te[xi].color,Ko=te[xi+1].color;Xn+=ft(Math.round((1-fo)*qo[0]+fo*Ko[0]).toString(16))+ft(Math.round((1-fo)*qo[1]+fo*Ko[1]).toString(16))+ft(Math.round((1-fo)*qo[2]+fo*Ko[2]).toString(16))}return Xn.trim()},yi=function(te,Le){Le||(Le=21);var pt=ra(),Bt=sn(te.colors,Le),ur=[];ur.push({key:"FunctionType",value:"0"}),ur.push({key:"Domain",value:"[0.0 1.0]"}),ur.push({key:"Size",value:"["+Le+"]"}),ur.push({key:"BitsPerSample",value:"8"}),ur.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),ur.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Nt({data:Bt,additionalKeyValues:ur,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:pt}),ct("endobj"),te.objectNumber=ra(),ct("<< /ShadingType "+te.type),ct("/ColorSpace /DeviceRGB");var Xr="/Coords ["+_e(parseFloat(te.coords[0]))+" "+_e(parseFloat(te.coords[1]))+" ";te.type===2?Xr+=_e(parseFloat(te.coords[2]))+" "+_e(parseFloat(te.coords[3])):Xr+=_e(parseFloat(te.coords[2]))+" "+_e(parseFloat(te.coords[3]))+" "+_e(parseFloat(te.coords[4]))+" "+_e(parseFloat(te.coords[5])),ct(Xr+="]"),te.matrix&&ct("/Matrix ["+te.matrix.toString()+"]"),ct("/Function "+pt+" 0 R"),ct("/Extend [true true]"),ct(">>"),ct("endobj")},Ai=function(te,Le){var pt=be(),Bt=ra();Le.push({resourcesOid:pt,objectOid:Bt}),te.objectNumber=Bt;var ur=[];ur.push({key:"Type",value:"/Pattern"}),ur.push({key:"PatternType",value:"1"}),ur.push({key:"PaintType",value:"1"}),ur.push({key:"TilingType",value:"1"}),ur.push({key:"BBox",value:"["+te.boundingBox.map(_e).join(" ")+"]"}),ur.push({key:"XStep",value:_e(te.xStep)}),ur.push({key:"YStep",value:_e(te.yStep)}),ur.push({key:"Resources",value:pt+" 0 R"}),te.matrix&&ur.push({key:"Matrix",value:"["+te.matrix.toString()+"]"}),Nt({data:te.stream,additionalKeyValues:ur,objectId:te.objectNumber}),ct("endobj")},Xi=function(te){var Le;for(Le in pn)pn.hasOwnProperty(Le)&&(pn[Le]instanceof Qf?yi(pn[Le]):pn[Le]instanceof Oh&&Ai(pn[Le],te))},Ii=function(te){for(var Le in te.objectNumber=ra(),ct("<<"),te)switch(Le){case"opacity":ct("/ca "+We(te[Le]));break;case"stroke-opacity":ct("/CA "+We(te[Le]))}ct(">>"),ct("endobj")},qi=function(){var te;for(te in ci)ci.hasOwnProperty(te)&&Ii(ci[te])},ro=function(){for(var te in ct("/XObject <<"),pi)pi.hasOwnProperty(te)&&pi[te].objectNumber>=0&&ct("/"+te+" "+pi[te].objectNumber+" 0 R");to.publish("putXobjectDict"),ct(">>")},ko=function(){R.oid=ra(),ct("<<"),ct("/Filter /Standard"),ct("/V "+R.v),ct("/R "+R.r),ct("/U <"+R.toHexString(R.U)+">"),ct("/O <"+R.toHexString(R.O)+">"),ct("/P "+R.P),ct(">>"),ct("endobj")},Yo=function(){for(var te in ct("/Font <<"),Yr)Yr.hasOwnProperty(te)&&(E===!1||E===!0&&T.hasOwnProperty(te))&&ct("/"+te+" "+Yr[te].objectNumber+" 0 R");ct(">>")},So=function(){if(Object.keys(pn).length>0){for(var te in ct("/Shading <<"),pn)pn.hasOwnProperty(te)&&pn[te]instanceof Qf&&pn[te].objectNumber>=0&&ct("/"+te+" "+pn[te].objectNumber+" 0 R");to.publish("putShadingPatternDict"),ct(">>")}},Jo=function(te){if(Object.keys(pn).length>0){for(var Le in ct("/Pattern <<"),pn)pn.hasOwnProperty(Le)&&pn[Le]instanceof I.TilingPattern&&pn[Le].objectNumber>=0&&pn[Le].objectNumber<te&&ct("/"+Le+" "+pn[Le].objectNumber+" 0 R");to.publish("putTilingPatternDict"),ct(">>")}},Vl=function(){if(Object.keys(ci).length>0){var te;for(te in ct("/ExtGState <<"),ci)ci.hasOwnProperty(te)&&ci[te].objectNumber>=0&&ct("/"+te+" "+ci[te].objectNumber+" 0 R");to.publish("putGStateDict"),ct(">>")}},na=function(te){ye(te.resourcesOid,!0),ct("<<"),ct("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),Yo(),So(),Jo(te.objectOid),Vl(),ro(),ct(">>"),ct("endobj")},Ao=function(){var te=[];Fr(),qi(),Wn(),Xi(te),to.publish("putResources"),te.forEach(na),na({resourcesOid:st,objectOid:Number.MAX_SAFE_INTEGER}),to.publish("postPutResources")},ml=function(){to.publish("putAdditionalObjects");for(var te=0;te<br.length;te++){var Le=br[te];ye(Le.objId,!0),ct(Le.content),ct("endobj")}to.publish("postPutAdditionalObjects")},gl=function(te){un[te.fontName]=un[te.fontName]||{},un[te.fontName][te.fontStyle]=te.id},gs=function(te,Le,pt,Bt,ur){var Xr={id:"F"+(Object.keys(Yr).length+1).toString(10),postScriptName:te,fontName:Le,fontStyle:pt,encoding:Bt,isStandardFont:ur||!1,metadata:{}};return to.publish("addFont",{font:Xr,instance:this}),Yr[Xr.id]=Xr,gl(Xr),Xr.id},$l=function(te){for(var Le=0,pt=Wt.length;Le<pt;Le++){var Bt=gs.call(this,te[Le][0],te[Le][1],te[Le][2],Wt[Le][3],!0);E===!1&&(T[Bt]=!0);var ur=te[Le][0].split("-");gl({id:Bt,fontName:ur[0],fontStyle:ur[1]||""})}to.publish("addFonts",{fonts:Yr,dictionary:un})},ys=function(te){return te.foo=function(){try{return te.apply(this,arguments)}catch(Bt){var Le=Bt.stack||"";~Le.indexOf(" at ")&&(Le=Le.split(" at ")[1]);var pt="Error in function "+Le.split(`
`)[0].split("<")[0]+": "+Bt.message;if(!eo.console)throw new Error(pt);eo.console.error(pt,Bt),eo.alert&&alert(pt)}},te.foo.bar=te,te.foo},Uu=function(te,Le){var pt,Bt,ur,Xr,gn,Xn,xi,Oi,Yi;if(ur=(Le=Le||{}).sourceEncoding||"Unicode",gn=Le.outputEncoding,(Le.autoencode||gn)&&Yr[wi].metadata&&Yr[wi].metadata[ur]&&Yr[wi].metadata[ur].encoding&&(Xr=Yr[wi].metadata[ur].encoding,!gn&&Yr[wi].encoding&&(gn=Yr[wi].encoding),!gn&&Xr.codePages&&(gn=Xr.codePages[0]),typeof gn=="string"&&(gn=Xr[gn]),gn)){for(xi=!1,Xn=[],pt=0,Bt=te.length;pt<Bt;pt++)(Oi=gn[te.charCodeAt(pt)])?Xn.push(String.fromCharCode(Oi)):Xn.push(te[pt]),Xn[pt].charCodeAt(0)>>8&&(xi=!0);te=Xn.join("")}for(pt=te.length;xi===void 0&&pt!==0;)te.charCodeAt(pt-1)>>8&&(xi=!0),pt--;if(!xi)return te;for(Xn=Le.noBOM?[]:[254,255],pt=0,Bt=te.length;pt<Bt;pt++){if((Yi=(Oi=te.charCodeAt(pt))>>8)>>8)throw new Error("Character at position "+pt+" of string '"+te+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");Xn.push(Yi),Xn.push(Oi-(Yi<<8))}return String.fromCharCode.apply(void 0,Xn)},$a=I.__private__.pdfEscape=I.pdfEscape=function(te,Le){return Uu(te,Le).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},yl=I.__private__.beginPage=function(te){Gt[++co]=[],li[co]={objId:0,contentsObjId:0,userUnit:Number(l),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(te[0]),topRightY:Number(te[1])}},Vu(co),St(Gt[Ne])},Gl=function(te,Le){var pt,Bt,ur;switch(r=Le||r,typeof te=="string"&&(pt=H(te.toLowerCase()),Array.isArray(pt)&&(Bt=pt[0],ur=pt[1])),Array.isArray(te)&&(Bt=te[0]*xn,ur=te[1]*xn),isNaN(Bt)&&(Bt=o[0],ur=o[1]),(Bt>14400||ur>14400)&&(Ma.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),Bt=Math.min(14400,Bt),ur=Math.min(14400,ur)),o=[Bt,ur],r.substr(0,1)){case"l":ur>Bt&&(o=[ur,Bt]);break;case"p":Bt>ur&&(o=[ur,Bt])}yl(o),ii(L),ct(Xa),$u!==0&&ct($u+" J"),vu!==0&&ct(vu+" j"),to.publish("addPage",{pageNumber:co})},qu=function(te){te>0&&te<=co&&(Gt.splice(te,1),li.splice(te,1),co--,Ne>co&&(Ne=co),this.setPage(Ne))},Vu=function(te){te>0&&te<=co&&(Ne=te)},tl=I.__private__.getNumberOfPages=I.getNumberOfPages=function(){return Gt.length-1},us=function(te,Le,pt){var Bt,ur=void 0;return pt=pt||{},te=te!==void 0?te:Yr[wi].fontName,Le=Le!==void 0?Le:Yr[wi].fontStyle,Bt=te.toLowerCase(),un[Bt]!==void 0&&un[Bt][Le]!==void 0?ur=un[Bt][Le]:un[te]!==void 0&&un[te][Le]!==void 0?ur=un[te][Le]:pt.disableWarning===!1&&Ma.warn("Unable to look up font label for font '"+te+"', '"+Le+"'. Refer to getFontList() for available fonts."),ur||pt.noFallback||(ur=un.times[Le])==null&&(ur=un.times.normal),ur},Ps=I.__private__.putInfo=function(){var te=ra(),Le=function(Bt){return Bt};for(var pt in w!==null&&(Le=R.encryptor(te,0)),ct("<<"),ct("/Producer ("+$a(Le("jsPDF "+Zi.version))+")"),Vr)Vr.hasOwnProperty(pt)&&Vr[pt]&&ct("/"+pt.substr(0,1).toUpperCase()+pt.substr(1)+" ("+$a(Le(Vr[pt]))+")");ct("/CreationDate ("+$a(Le(_t))+")"),ct(">>"),ct("endobj")},vl=I.__private__.putCatalog=function(te){var Le=(te=te||{}).rootDictionaryObjId||nt;switch(ra(),ct("<<"),ct("/Type /Catalog"),ct("/Pages "+Le+" 0 R"),mn||(mn="fullwidth"),mn){case"fullwidth":ct("/OpenAction [3 0 R /FitH null]");break;case"fullheight":ct("/OpenAction [3 0 R /FitV null]");break;case"fullpage":ct("/OpenAction [3 0 R /Fit]");break;case"original":ct("/OpenAction [3 0 R /XYZ null null 1]");break;default:var pt=""+mn;pt.substr(pt.length-1)==="%"&&(mn=parseInt(mn)/100),typeof mn=="number"&&ct("/OpenAction [3 0 R /XYZ null null "+We(mn)+"]")}switch(_i||(_i="continuous"),_i){case"continuous":ct("/PageLayout /OneColumn");break;case"single":ct("/PageLayout /SinglePage");break;case"two":case"twoleft":ct("/PageLayout /TwoColumnLeft");break;case"tworight":ct("/PageLayout /TwoColumnRight")}Zn&&ct("/PageMode /"+Zn),to.publish("putCatalog"),ct(">>"),ct("endobj")},du=I.__private__.putTrailer=function(){ct("trailer"),ct("<<"),ct("/Size "+(At+1)),ct("/Root "+At+" 0 R"),ct("/Info "+(At-1)+" 0 R"),w!==null&&ct("/Encrypt "+R.oid+" 0 R"),ct("/ID [ <"+ht+"> <"+ht+"> ]"),ct(">>")},_l=I.__private__.putHeader=function(){ct("%PDF-"+F),ct("%")},mu=I.__private__.putXRef=function(){var te="0000000000";ct("xref"),ct("0 "+(At+1)),ct("0000000000 65535 f ");for(var Le=1;Le<=At;Le++)typeof Pt[Le]=="function"?ct((te+Pt[Le]()).slice(-10)+" 00000 n "):Pt[Le]!==void 0?ct((te+Pt[Le]).slice(-10)+" 00000 n "):ct("0000000000 00000 n ")},vs=I.__private__.buildDocument=function(){Kr(),St(Kt),to.publish("buildDocument"),_l(),Br(),ml(),Ao(),w!==null&&ko(),Ps(),vl();var te=$t;return mu(),du(),ct("startxref"),ct(""+te),ct("%%EOF"),St(Gt[Ne]),Kt.join(`
`)},_s=I.__private__.getBlob=function(te){return new Blob([ln(te)],{type:"application/pdf"})},Ro=I.output=I.__private__.output=ys(function(te,Le){switch(typeof(Le=Le||{})=="string"?Le={filename:Le}:Le.filename=Le.filename||"generated.pdf",te){case void 0:return vs();case"save":I.save(Le.filename);break;case"arraybuffer":return ln(vs());case"blob":return _s(vs());case"bloburi":case"bloburl":if(eo.URL!==void 0&&typeof eo.URL.createObjectURL=="function")return eo.URL&&eo.URL.createObjectURL(_s(vs()))||void 0;Ma.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var pt="",Bt=vs();try{pt=Dg(Bt)}catch{pt=Dg(unescape(encodeURIComponent(Bt)))}return"data:application/pdf;filename="+Le.filename+";base64,"+pt;case"pdfobjectnewwindow":if(Object.prototype.toString.call(eo)==="[object Window]"){var ur="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",Xr=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';Le.pdfObjectUrl&&(ur=Le.pdfObjectUrl,Xr="");var gn='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+ur+'"'+Xr+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(Le)+");<\/script></body></html>",Xn=eo.open();return Xn!==null&&Xn.document.write(gn),Xn}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(eo)==="[object Window]"){var xi='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(Le.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+Le.filename+'" width="500px" height="400px" /></body></html>',Oi=eo.open();if(Oi!==null){Oi.document.write(xi);var Yi=this;Oi.document.documentElement.querySelector("#pdfViewer").onload=function(){Oi.document.title=Le.filename,Oi.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(Yi.output("bloburl"))}}return Oi}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(eo)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var fo='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",Le)+'"></iframe></body></html>',qo=eo.open();if(qo!==null&&(qo.document.write(fo),qo.document.title=Le.filename),qo||typeof safari>"u")return qo;break;case"datauri":case"dataurl":return eo.document.location.href=this.output("datauristring",Le);default:return null}}),rl=function(te){return Array.isArray(yo)===!0&&yo.indexOf(te)>-1};switch(n){case"pt":xn=1;break;case"mm":xn=72/25.4;break;case"cm":xn=72/2.54;break;case"in":xn=72;break;case"px":xn=rl("px_scaling")==1?.75:96/72;break;case"pc":case"em":xn=12;break;case"ex":xn=6;break;default:if(typeof n!="number")throw new Error("Invalid unit: "+n);xn=n}var R=null;He(),ut();var W=function(te){return w!==null?R.encryptor(te,0):function(Le){return Le}},ae=I.__private__.getPageInfo=I.getPageInfo=function(te){if(isNaN(te)||te%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:li[te].objId,pageNumber:te,pageContext:li[te]}},ke=I.__private__.getPageInfoByObjId=function(te){if(isNaN(te)||te%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var Le in li)if(li[Le].objId===te)break;return ae(Le)},Ye=I.__private__.getCurrentPageInfo=I.getCurrentPageInfo=function(){return{objId:li[Ne].objId,pageNumber:Ne,pageContext:li[Ne]}};I.addPage=function(){return Gl.apply(this,arguments),this},I.setPage=function(){return Vu.apply(this,arguments),St.call(this,Gt[Ne]),this},I.insertPage=function(te){return this.addPage(),this.movePage(Ne,te),this},I.movePage=function(te,Le){var pt,Bt;if(te>Le){pt=Gt[te],Bt=li[te];for(var ur=te;ur>Le;ur--)Gt[ur]=Gt[ur-1],li[ur]=li[ur-1];Gt[Le]=pt,li[Le]=Bt,this.setPage(Le)}else if(te<Le){pt=Gt[te],Bt=li[te];for(var Xr=te;Xr<Le;Xr++)Gt[Xr]=Gt[Xr+1],li[Xr]=li[Xr+1];Gt[Le]=pt,li[Le]=Bt,this.setPage(Le)}return this},I.deletePage=function(){return qu.apply(this,arguments),this},I.__private__.text=I.text=function(te,Le,pt,Bt,ur){var Xr,gn,Xn,xi,Oi,Yi,fo,qo,Ko,Qo=(Bt=Bt||{}).scope||this;if(typeof te=="number"&&typeof Le=="number"&&(typeof pt=="string"||Array.isArray(pt))){var Da=pt;pt=Le,Le=te,te=Da}if(arguments[3]instanceof vn?(pe("The transform parameter of text() with a Matrix value"),Ko=ur):(Xn=arguments[4],xi=arguments[5],_a(fo=arguments[3])==="object"&&fo!==null||(typeof Xn=="string"&&(xi=Xn,Xn=null),typeof fo=="string"&&(xi=fo,fo=null),typeof fo=="number"&&(Xn=fo,fo=null),Bt={flags:fo,angle:Xn,align:xi})),isNaN(Le)||isNaN(pt)||te==null)throw new Error("Invalid arguments passed to jsPDF.text");if(te.length===0)return Qo;var aa="",Vi=!1,za=typeof Bt.lineHeightFactor=="number"?Bt.lineHeightFactor:f,Sa=Qo.internal.scaleFactor;function Zl(Oo){return Oo=Oo.split("	").join(Array(Bt.TabLen||9).join(" ")),$a(Oo,fo)}function wl(Oo){for(var Ji,Fo=Oo.concat(),ga=[],An=Fo.length;An--;)typeof(Ji=Fo.shift())=="string"?ga.push(Ji):Array.isArray(Oo)&&(Ji.length===1||Ji[1]===void 0&&Ji[2]===void 0)?ga.push(Ji[0]):ga.push([Ji[0],Ji[1],Ji[2]]);return ga}function Hu(Oo,Ji){var Fo;if(typeof Oo=="string")Fo=Ji(Oo)[0];else if(Array.isArray(Oo)){for(var ga,An,As=Oo.concat(),Zu=[],Xu=As.length;Xu--;)typeof(ga=As.shift())=="string"?Zu.push(Ji(ga)[0]):Array.isArray(ga)&&typeof ga[0]=="string"&&(An=Ji(ga[0],ga[1],ga[2]),Zu.push([An[0],An[1],An[2]]));Fo=Zu}return Fo}var Ds=!1,xl=!0;if(typeof te=="string")Ds=!0;else if(Array.isArray(te)){var nl=te.concat();gn=[];for(var wu,Na=nl.length;Na--;)(typeof(wu=nl.shift())!="string"||Array.isArray(wu)&&typeof wu[0]!="string")&&(xl=!1);Ds=xl}if(Ds===!1)throw new Error('Type of text must be string or Array. "'+te+'" is not recognized.');typeof te=="string"&&(te=te.match(/[\r?\n]/)?te.split(/\r\n|\r|\n/g):[te]);var xu=Ur/Qo.internal.scaleFactor,Xl=xu*(za-1);switch(Bt.baseline){case"bottom":pt-=Xl;break;case"top":pt+=xu-Xl;break;case"hanging":pt+=xu-2*Xl;break;case"middle":pt+=xu/2-Xl}if((Yi=Bt.maxWidth||0)>0&&(typeof te=="string"?te=Qo.splitTextToSize(te,Yi):Object.prototype.toString.call(te)==="[object Array]"&&(te=te.reduce(function(Oo,Ji){return Oo.concat(Qo.splitTextToSize(Ji,Yi))},[]))),Xr={text:te,x:Le,y:pt,options:Bt,mutex:{pdfEscape:$a,activeFontKey:wi,fonts:Yr,activeFontSize:Ur}},to.publish("preProcessText",Xr),te=Xr.text,Xn=(Bt=Xr.options).angle,!(Ko instanceof vn)&&Xn&&typeof Xn=="number"){Xn*=Math.PI/180,Bt.rotationDirection===0&&(Xn=-Xn),ee===X.ADVANCED&&(Xn=-Xn);var Hs=Math.cos(Xn),kl=Math.sin(Xn);Ko=new vn(Hs,kl,-kl,Hs,0,0)}else Xn&&Xn instanceof vn&&(Ko=Xn);ee!==X.ADVANCED||Ko||(Ko=Ea),(Oi=Bt.charSpace||yu)!==void 0&&(aa+=_e(Ie(Oi))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(qo=Bt.horizontalScale)!==void 0&&(aa+=_e(100*qo)+` Tz
`),Bt.lang;var Ra=-1,Yl=Bt.renderingMode!==void 0?Bt.renderingMode:Bt.stroke,Ws=Qo.internal.getCurrentPageInfo().pageContext;switch(Yl){case 0:case!1:case"fill":Ra=0;break;case 1:case!0:case"stroke":Ra=1;break;case 2:case"fillThenStroke":Ra=2;break;case 3:case"invisible":Ra=3;break;case 4:case"fillAndAddForClipping":Ra=4;break;case 5:case"strokeAndAddPathForClipping":Ra=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":Ra=6;break;case 7:case"addToPathForClipping":Ra=7}var Al=Ws.usedRenderingMode!==void 0?Ws.usedRenderingMode:-1;Ra!==-1?aa+=Ra+` Tr
`:Al!==-1&&(aa+=`0 Tr
`),Ra!==-1&&(Ws.usedRenderingMode=Ra),xi=Bt.align||"left";var is,El=Ur*za,cc=Qo.internal.pageSize.getWidth(),Dc=Yr[wi];Oi=Bt.charSpace||yu,Yi=Bt.maxWidth||0,fo=Object.assign({autoencode:!0,noBOM:!0},Bt.flags);var Sl=[];if(Object.prototype.toString.call(te)==="[object Array]"){var Ga;gn=wl(te),xi!=="left"&&(is=gn.map(function(Oo){return Qo.getStringUnitWidth(Oo,{font:Dc,charSpace:Oi,fontSize:Ur,doKerning:!1})*Ur/Sa}));var zs,Ns=0;if(xi==="right"){Le-=is[0],te=[],Na=gn.length;for(var Ya=0;Ya<Na;Ya++)Ya===0?(zs=bs(Le),Ga=Gs(pt)):(zs=Ie(Ns-is[Ya]),Ga=-El),te.push([gn[Ya],zs,Ga]),Ns=is[Ya]}else if(xi==="center"){Le-=is[0]/2,te=[],Na=gn.length;for(var sa=0;sa<Na;sa++)sa===0?(zs=bs(Le),Ga=Gs(pt)):(zs=Ie((Ns-is[sa])/2),Ga=-El),te.push([gn[sa],zs,Ga]),Ns=is[sa]}else if(xi==="left"){te=[],Na=gn.length;for(var Rs=0;Rs<Na;Rs++)te.push(gn[Rs])}else{if(xi!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');te=[],Na=gn.length,Yi=Yi!==0?Yi:cc;for(var la=0;la<Na;la++)Ga=la===0?Gs(pt):-El,zs=la===0?bs(Le):0,la<Na-1?Sl.push(_e(Ie((Yi-is[la])/(gn[la].split(" ").length-1)))):Sl.push(0),te.push([gn[la],zs,Ga])}}var Wu=typeof Bt.R2L=="boolean"?Bt.R2L:On;Wu===!0&&(te=Hu(te,function(Oo,Ji,Fo){return[Oo.split("").reverse().join(""),Ji,Fo]})),Xr={text:te,x:Le,y:pt,options:Bt,mutex:{pdfEscape:$a,activeFontKey:wi,fonts:Yr,activeFontSize:Ur}},to.publish("postProcessText",Xr),te=Xr.text,Vi=Xr.mutex.isHex||!1;var cs=Yr[wi].encoding;cs!=="WinAnsiEncoding"&&cs!=="StandardEncoding"||(te=Hu(te,function(Oo,Ji,Fo){return[Zl(Oo),Ji,Fo]})),gn=wl(te),te=[];for(var fs,no,ks,il=0,Jl=1,ku=Array.isArray(gn[0])?Jl:il,Ca="",Cl=function(Oo,Ji,Fo){var ga="";return Fo instanceof vn?(Fo=typeof Bt.angle=="number"?ze(Fo,new vn(1,0,0,1,Oo,Ji)):ze(new vn(1,0,0,1,Oo,Ji),Fo),ee===X.ADVANCED&&(Fo=ze(new vn(1,0,0,-1,0,0),Fo)),ga=Fo.join(" ")+` Tm
`):ga=_e(Oo)+" "+_e(Ji)+` Td
`,ga},ba=0;ba<gn.length;ba++){switch(Ca="",ku){case Jl:ks=(Vi?"<":"(")+gn[ba][0]+(Vi?">":")"),fs=parseFloat(gn[ba][1]),no=parseFloat(gn[ba][2]);break;case il:ks=(Vi?"<":"(")+gn[ba]+(Vi?">":")"),fs=bs(Le),no=Gs(pt)}Sl!==void 0&&Sl[ba]!==void 0&&(Ca=Sl[ba]+` Tw
`),ba===0?te.push(Ca+Cl(fs,no,Ko)+ks):ku===il?te.push(Ca+ks):ku===Jl&&te.push(Ca+Cl(fs,no,Ko)+ks)}te=ku===il?te.join(` Tj
T* `):te.join(` Tj
`),te+=` Tj
`;var Pn=`BT
/`;return Pn+=wi+" "+Ur+` Tf
`,Pn+=_e(Ur*za)+` TL
`,Pn+=gu+`
`,Pn+=aa,Pn+=te,ct(Pn+="ET"),T[wi]=!0,Qo};var dt=I.__private__.clip=I.clip=function(te){return ct(te==="evenodd"?"W*":"W"),this};I.clipEvenOdd=function(){return dt("evenodd")},I.__private__.discardPath=I.discardPath=function(){return ct("n"),this};var Mt=I.__private__.isValidStyle=function(te){var Le=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(te)!==-1&&(Le=!0),Le};I.__private__.setDefaultPathOperation=I.setDefaultPathOperation=function(te){return Mt(te)&&(v=te),this};var Tt=I.__private__.getStyle=I.getStyle=function(te){var Le=v;switch(te){case"D":case"S":Le="S";break;case"F":Le="f";break;case"FD":case"DF":Le="B";break;case"f":case"f*":case"B":case"B*":Le=te}return Le},wr=I.close=function(){return ct("h"),this};I.stroke=function(){return ct("S"),this},I.fill=function(te){return pr("f",te),this},I.fillEvenOdd=function(te){return pr("f*",te),this},I.fillStroke=function(te){return pr("B",te),this},I.fillStrokeEvenOdd=function(te){return pr("B*",te),this};var pr=function(te,Le){_a(Le)==="object"?$r(Le,te):ct(te)},vr=function(te){te===null||ee===X.ADVANCED&&te===void 0||(te=Tt(te),ct(te))};function ar(te,Le,pt,Bt,ur){var Xr=new Oh(Le||this.boundingBox,pt||this.xStep,Bt||this.yStep,this.gState,ur||this.matrix);Xr.stream=this.stream;var gn=te+"$$"+this.cloneIndex+++"$$";return ha(gn,Xr),Xr}var $r=function(te,Le){var pt=Yn[te.key],Bt=pn[pt];if(Bt instanceof Qf)ct("q"),ct(cn(Le)),Bt.gState&&I.setGState(Bt.gState),ct(te.matrix.toString()+" cm"),ct("/"+pt+" sh"),ct("Q");else if(Bt instanceof Oh){var ur=new vn(1,0,0,-1,0,xs());te.matrix&&(ur=ur.multiply(te.matrix||Ea),pt=ar.call(Bt,te.key,te.boundingBox,te.xStep,te.yStep,ur).id),ct("q"),ct("/Pattern cs"),ct("/"+pt+" scn"),Bt.gState&&I.setGState(Bt.gState),ct(Le),ct("Q")}},cn=function(te){switch(te){case"f":case"F":return"W n";case"f*":return"W* n";case"B":return"W S";case"B*":return"W* S";case"S":return"W S";case"n":return"W n"}},In=I.moveTo=function(te,Le){return ct(_e(Ie(te))+" "+_e(ot(Le))+" m"),this},et=I.lineTo=function(te,Le){return ct(_e(Ie(te))+" "+_e(ot(Le))+" l"),this},m=I.curveTo=function(te,Le,pt,Bt,ur,Xr){return ct([_e(Ie(te)),_e(ot(Le)),_e(Ie(pt)),_e(ot(Bt)),_e(Ie(ur)),_e(ot(Xr)),"c"].join(" ")),this};I.__private__.line=I.line=function(te,Le,pt,Bt,ur){if(isNaN(te)||isNaN(Le)||isNaN(pt)||isNaN(Bt)||!Mt(ur))throw new Error("Invalid arguments passed to jsPDF.line");return ee===X.COMPAT?this.lines([[pt-te,Bt-Le]],te,Le,[1,1],ur||"S"):this.lines([[pt-te,Bt-Le]],te,Le,[1,1]).stroke()},I.__private__.lines=I.lines=function(te,Le,pt,Bt,ur,Xr){var gn,Xn,xi,Oi,Yi,fo,qo,Ko,Qo,Da,aa,Vi;if(typeof te=="number"&&(Vi=pt,pt=Le,Le=te,te=Vi),Bt=Bt||[1,1],Xr=Xr||!1,isNaN(Le)||isNaN(pt)||!Array.isArray(te)||!Array.isArray(Bt)||!Mt(ur)||typeof Xr!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(In(Le,pt),gn=Bt[0],Xn=Bt[1],Oi=te.length,Da=Le,aa=pt,xi=0;xi<Oi;xi++)(Yi=te[xi]).length===2?(Da=Yi[0]*gn+Da,aa=Yi[1]*Xn+aa,et(Da,aa)):(fo=Yi[0]*gn+Da,qo=Yi[1]*Xn+aa,Ko=Yi[2]*gn+Da,Qo=Yi[3]*Xn+aa,Da=Yi[4]*gn+Da,aa=Yi[5]*Xn+aa,m(fo,qo,Ko,Qo,Da,aa));return Xr&&wr(),vr(ur),this},I.path=function(te){for(var Le=0;Le<te.length;Le++){var pt=te[Le],Bt=pt.c;switch(pt.op){case"m":In(Bt[0],Bt[1]);break;case"l":et(Bt[0],Bt[1]);break;case"c":m.apply(this,Bt);break;case"h":wr()}}return this},I.__private__.rect=I.rect=function(te,Le,pt,Bt,ur){if(isNaN(te)||isNaN(Le)||isNaN(pt)||isNaN(Bt)||!Mt(ur))throw new Error("Invalid arguments passed to jsPDF.rect");return ee===X.COMPAT&&(Bt=-Bt),ct([_e(Ie(te)),_e(ot(Le)),_e(Ie(pt)),_e(Ie(Bt)),"re"].join(" ")),vr(ur),this},I.__private__.triangle=I.triangle=function(te,Le,pt,Bt,ur,Xr,gn){if(isNaN(te)||isNaN(Le)||isNaN(pt)||isNaN(Bt)||isNaN(ur)||isNaN(Xr)||!Mt(gn))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[pt-te,Bt-Le],[ur-pt,Xr-Bt],[te-ur,Le-Xr]],te,Le,[1,1],gn,!0),this},I.__private__.roundedRect=I.roundedRect=function(te,Le,pt,Bt,ur,Xr,gn){if(isNaN(te)||isNaN(Le)||isNaN(pt)||isNaN(Bt)||isNaN(ur)||isNaN(Xr)||!Mt(gn))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var Xn=4/3*(Math.SQRT2-1);return ur=Math.min(ur,.5*pt),Xr=Math.min(Xr,.5*Bt),this.lines([[pt-2*ur,0],[ur*Xn,0,ur,Xr-Xr*Xn,ur,Xr],[0,Bt-2*Xr],[0,Xr*Xn,-ur*Xn,Xr,-ur,Xr],[2*ur-pt,0],[-ur*Xn,0,-ur,-Xr*Xn,-ur,-Xr],[0,2*Xr-Bt],[0,-Xr*Xn,ur*Xn,-Xr,ur,-Xr]],te+ur,Le,[1,1],gn,!0),this},I.__private__.ellipse=I.ellipse=function(te,Le,pt,Bt,ur){if(isNaN(te)||isNaN(Le)||isNaN(pt)||isNaN(Bt)||!Mt(ur))throw new Error("Invalid arguments passed to jsPDF.ellipse");var Xr=4/3*(Math.SQRT2-1)*pt,gn=4/3*(Math.SQRT2-1)*Bt;return In(te+pt,Le),m(te+pt,Le-gn,te+Xr,Le-Bt,te,Le-Bt),m(te-Xr,Le-Bt,te-pt,Le-gn,te-pt,Le),m(te-pt,Le+gn,te-Xr,Le+Bt,te,Le+Bt),m(te+Xr,Le+Bt,te+pt,Le+gn,te+pt,Le),vr(ur),this},I.__private__.circle=I.circle=function(te,Le,pt,Bt){if(isNaN(te)||isNaN(Le)||isNaN(pt)||!Mt(Bt))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(te,Le,pt,pt,Bt)},I.setFont=function(te,Le,pt){return pt&&(Le=ce(Le,pt)),wi=us(te,Le,{disableWarning:!1}),this};var Pr=I.__private__.getFont=I.getFont=function(){return Yr[us.apply(I,arguments)]};I.__private__.getFontList=I.getFontList=function(){var te,Le,pt={};for(te in un)if(un.hasOwnProperty(te))for(Le in pt[te]=[],un[te])un[te].hasOwnProperty(Le)&&pt[te].push(Le);return pt},I.addFont=function(te,Le,pt,Bt,ur){var Xr=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&Xr.indexOf(arguments[3])!==-1?ur=arguments[3]:arguments[3]&&Xr.indexOf(arguments[3])==-1&&(pt=ce(pt,Bt)),ur=ur||"Identity-H",gs.call(this,te,Le,pt,ur)};var f,L=e.lineWidth||.200025,kn=I.__private__.getLineWidth=I.getLineWidth=function(){return L},ii=I.__private__.setLineWidth=I.setLineWidth=function(te){return L=te,ct(_e(Ie(te))+" w"),this};I.__private__.setLineDash=Zi.API.setLineDash=Zi.API.setLineDashPattern=function(te,Le){if(te=te||[],Le=Le||0,isNaN(Le)||!Array.isArray(te))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return te=te.map(function(pt){return _e(Ie(pt))}).join(" "),Le=_e(Ie(Le)),ct("["+te+"] "+Le+" d"),this};var To=I.__private__.getLineHeight=I.getLineHeight=function(){return Ur*f};I.__private__.getLineHeight=I.getLineHeight=function(){return Ur*f};var J=I.__private__.setLineHeightFactor=I.setLineHeightFactor=function(te){return typeof(te=te||1.15)=="number"&&(f=te),this},Ri=I.__private__.getLineHeightFactor=I.getLineHeightFactor=function(){return f};J(e.lineHeight);var bs=I.__private__.getHorizontalCoordinate=function(te){return Ie(te)},Gs=I.__private__.getVerticalCoordinate=function(te){return ee===X.ADVANCED?te:li[Ne].mediaBox.topRightY-li[Ne].mediaBox.bottomLeftY-Ie(te)},Pc=I.__private__.getHorizontalCoordinateString=I.getHorizontalCoordinateString=function(te){return _e(bs(te))},bl=I.__private__.getVerticalCoordinateString=I.getVerticalCoordinateString=function(te){return _e(Gs(te))},Xa=e.strokeColor||"0 G";I.__private__.getStrokeColor=I.getDrawColor=function(){return Rt(Xa)},I.__private__.setStrokeColor=I.setDrawColor=function(te,Le,pt,Bt){return Xa=Re({ch1:te,ch2:Le,ch3:pt,ch4:Bt,pdfColorType:"draw",precision:2}),ct(Xa),this};var uc=e.fillColor||"0 g";I.__private__.getFillColor=I.getFillColor=function(){return Rt(uc)},I.__private__.setFillColor=I.setFillColor=function(te,Le,pt,Bt){return uc=Re({ch1:te,ch2:Le,ch3:pt,ch4:Bt,pdfColorType:"fill",precision:2}),ct(uc),this};var gu=e.textColor||"0 g",Mc=I.__private__.getTextColor=I.getTextColor=function(){return Rt(gu)};I.__private__.setTextColor=I.setTextColor=function(te,Le,pt,Bt){return gu=Re({ch1:te,ch2:Le,ch3:pt,ch4:Bt,pdfColorType:"text",precision:3}),this};var yu=e.charSpace,Qc=I.__private__.getCharSpace=I.getCharSpace=function(){return parseFloat(yu||0)};I.__private__.setCharSpace=I.setCharSpace=function(te){if(isNaN(te))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return yu=te,this};var $u=0;I.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},I.__private__.setLineCap=I.setLineCap=function(te){var Le=I.CapJoinStyles[te];if(Le===void 0)throw new Error("Line cap style of '"+te+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return $u=Le,ct(Le+" J"),this};var vu=0;I.__private__.setLineJoin=I.setLineJoin=function(te){var Le=I.CapJoinStyles[te];if(Le===void 0)throw new Error("Line join style of '"+te+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return vu=Le,ct(Le+" j"),this},I.__private__.setLineMiterLimit=I.__private__.setMiterLimit=I.setLineMiterLimit=I.setMiterLimit=function(te){if(te=te||0,isNaN(te))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return ct(_e(Ie(te))+" M"),this},I.GState=M1,I.setGState=function(te){(te=typeof te=="string"?ci[No[te]]:_u(null,te)).equals(gi)||(ct("/"+te.id+" gs"),gi=te)};var _u=function(te,Le){if(!te||!No[te]){var pt=!1;for(var Bt in ci)if(ci.hasOwnProperty(Bt)&&ci[Bt].equals(Le)){pt=!0;break}if(pt)Le=ci[Bt];else{var ur="GS"+(Object.keys(ci).length+1).toString(10);ci[ur]=Le,Le.id=ur}return te&&(No[te]=Le.id),to.publish("addGState",Le),Le}};I.addGState=function(te,Le){return _u(te,Le),this},I.saveGraphicsState=function(){return ct("q"),Nr.push({key:wi,size:Ur,color:gu}),this},I.restoreGraphicsState=function(){ct("Q");var te=Nr.pop();return wi=te.key,Ur=te.size,gu=te.color,gi=null,this},I.setCurrentTransformationMatrix=function(te){return ct(te.toString()+" cm"),this},I.comment=function(te){return ct("#"+te),this};var Hl=function(te,Le){var pt=te||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return pt},set:function(Xr){isNaN(Xr)||(pt=parseFloat(Xr))}});var Bt=Le||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return Bt},set:function(Xr){isNaN(Xr)||(Bt=parseFloat(Xr))}});var ur="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return ur},set:function(Xr){ur=Xr.toString()}}),this},bu=function(te,Le,pt,Bt){Hl.call(this,te,Le),this.type="rect";var ur=pt||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return ur},set:function(gn){isNaN(gn)||(ur=parseFloat(gn))}});var Xr=Bt||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return Xr},set:function(gn){isNaN(gn)||(Xr=parseFloat(gn))}}),this},jn=function(){this.page=co,this.currentPage=Ne,this.pages=Gt.slice(0),this.pagesContext=li.slice(0),this.x=si,this.y=fr,this.matrix=or,this.width=ws(Ne),this.height=xs(Ne),this.outputDestination=Mr,this.id="",this.objectNumber=-1};jn.prototype.restore=function(){co=this.page,Ne=this.currentPage,li=this.pagesContext,Gt=this.pages,si=this.x,fr=this.y,or=this.matrix,Wl(Ne,this.width),Lo(Ne,this.height),Mr=this.outputDestination};var Fn=function(te,Le,pt,Bt,ur){Xo.push(new jn),co=Ne=0,Gt=[],si=te,fr=Le,or=ur,yl([pt,Bt])},Gu=function(te){if(Ti[te])Xo.pop().restore();else{var Le=new jn,pt="Xo"+(Object.keys(pi).length+1).toString(10);Le.id=pt,Ti[te]=pt,pi[pt]=Le,to.publish("addFormObject",Le),Xo.pop().restore()}};for(var Ms in I.beginFormObject=function(te,Le,pt,Bt,ur){return Fn(te,Le,pt,Bt,ur),this},I.endFormObject=function(te){return Gu(te),this},I.doFormObject=function(te,Le){var pt=pi[Ti[te]];return ct("q"),ct(Le.toString()+" cm"),ct("/"+pt.id+" Do"),ct("Q"),this},I.getFormObject=function(te){var Le=pi[Ti[te]];return{x:Le.x,y:Le.y,width:Le.width,height:Le.height,matrix:Le.matrix}},I.save=function(te,Le){return te=te||"generated.pdf",(Le=Le||{}).returnPromise=Le.returnPromise||!1,Le.returnPromise===!1?(Yf(_s(vs()),te),typeof Yf.unload=="function"&&eo.setTimeout&&setTimeout(Yf.unload,911),this):new Promise(function(pt,Bt){try{var ur=Yf(_s(vs()),te);typeof Yf.unload=="function"&&eo.setTimeout&&setTimeout(Yf.unload,911),pt(ur)}catch(Xr){Bt(Xr.message)}})},Zi.API)Zi.API.hasOwnProperty(Ms)&&(Ms==="events"&&Zi.API.events.length?function(te,Le){var pt,Bt,ur;for(ur=Le.length-1;ur!==-1;ur--)pt=Le[ur][0],Bt=Le[ur][1],te.subscribe.apply(te,[pt].concat(typeof Bt=="function"?[Bt]:Bt))}(to,Zi.API.events):I[Ms]=Zi.API[Ms]);var ws=I.getPageWidth=function(te){return(li[te=te||Ne].mediaBox.topRightX-li[te].mediaBox.bottomLeftX)/xn},Wl=I.setPageWidth=function(te,Le){li[te].mediaBox.topRightX=Le*xn+li[te].mediaBox.bottomLeftX},xs=I.getPageHeight=function(te){return(li[te=te||Ne].mediaBox.topRightY-li[te].mediaBox.bottomLeftY)/xn},Lo=I.setPageHeight=function(te,Le){li[te].mediaBox.topRightY=Le*xn+li[te].mediaBox.bottomLeftY};return I.internal={pdfEscape:$a,getStyle:Tt,getFont:Pr,getFontSize:en,getCharSpace:Qc,getTextColor:Mc,getLineHeight:To,getLineHeightFactor:Ri,getLineWidth:kn,write:Or,getHorizontalCoordinate:bs,getVerticalCoordinate:Gs,getCoordinateString:Pc,getVerticalCoordinateString:bl,collections:{},newObject:ra,newAdditionalObject:De,newObjectDeferred:be,newObjectDeferredBegin:ye,getFilters:Ht,putStream:Nt,events:to,scaleFactor:xn,pageSize:{getWidth:function(){return ws(Ne)},setWidth:function(te){Wl(Ne,te)},getHeight:function(){return xs(Ne)},setHeight:function(te){Lo(Ne,te)}},encryptionOptions:w,encryption:R,getEncryptor:W,output:Ro,getNumberOfPages:tl,pages:Gt,out:ct,f2:We,f3:Ae,getPageInfo:ae,getPageInfoByObjId:ke,getCurrentPageInfo:Ye,getPDFVersion:U,Point:Hl,Rectangle:bu,Matrix:vn,hasHotfix:rl},Object.defineProperty(I.internal.pageSize,"width",{get:function(){return ws(Ne)},set:function(te){Wl(Ne,te)},enumerable:!0,configurable:!0}),Object.defineProperty(I.internal.pageSize,"height",{get:function(){return xs(Ne)},set:function(te){Lo(Ne,te)},enumerable:!0,configurable:!0}),$l.call(I,Wt),wi="F1",Gl(o,r),to.publish("initialized"),I}Ph.prototype.lsbFirstWord=function(e){return String.fromCharCode(e>>0&255,e>>8&255,e>>16&255,e>>24&255)},Ph.prototype.toHexString=function(e){return e.split("").map(function(t){return("0"+(255&t.charCodeAt(0)).toString(16)).slice(-2)}).join("")},Ph.prototype.hexToBytes=function(e){for(var t=[],r=0;r<e.length;r+=2)t.push(String.fromCharCode(parseInt(e.substr(r,2),16)));return t.join("")},Ph.prototype.processOwnerPassword=function(e,t){return Ng(zg(t).substr(0,5),e)},Ph.prototype.encryptor=function(e,t){var r=zg(this.encryptionKey+String.fromCharCode(255&e,e>>8&255,e>>16&255,255&t,t>>8&255)).substr(0,10);return function(n){return Ng(r,n)}},M1.prototype.equals=function(e){var t,r="id,objectNumber,equals";if(!e||_a(e)!==_a(this))return!1;var n=0;for(t in this)if(!(r.indexOf(t)>=0)){if(this.hasOwnProperty(t)&&!e.hasOwnProperty(t)||this[t]!==e[t])return!1;n++}for(t in e)e.hasOwnProperty(t)&&r.indexOf(t)<0&&n--;return n===0},Zi.API={events:[]},Zi.version="2.5.1";var ms=Zi.API,Oy=1,ph=function(e){return e.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},xh=function(e){return e.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},mo=function(e){return e.toFixed(2)},wf=function(e){return e.toFixed(5)};ms.__acroform__={};var ac=function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e},Q_=function(e){return e*Oy},P0=function(e){var t=new Zw,r=ki.internal.getHeight(e)||0,n=ki.internal.getWidth(e)||0;return t.BBox=[0,0,Number(mo(n)),Number(mo(r))],t},z7=ms.__acroform__.setBit=function(e,t){if(e=e||0,t=t||0,isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return e|=1<<t},N7=ms.__acroform__.clearBit=function(e,t){if(e=e||0,t=t||0,isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return e&=~(1<<t)},R7=ms.__acroform__.getBit=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return e&1<<t?1:0},Is=ms.__acroform__.getBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return R7(e,t-1)},Ts=ms.__acroform__.setBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return z7(e,t-1)},Ls=ms.__acroform__.clearBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return N7(e,t-1)},O7=ms.__acroform__.calculateCoordinates=function(e,t){var r=t.internal.getHorizontalCoordinate,n=t.internal.getVerticalCoordinate,o=e[0],u=e[1],c=e[2],l=e[3],h={};return h.lowerLeft_X=r(o)||0,h.lowerLeft_Y=n(u+l)||0,h.upperRight_X=r(o+c)||0,h.upperRight_Y=n(u)||0,[Number(mo(h.lowerLeft_X)),Number(mo(h.lowerLeft_Y)),Number(mo(h.upperRight_X)),Number(mo(h.upperRight_Y))]},F7=function(e){if(e.appearanceStreamContent)return e.appearanceStreamContent;if(e.V||e.DV){var t=[],r=e._V||e.DV,n=Rg(e,r),o=e.scope.internal.getFont(e.fontName,e.fontStyle).id;t.push("/Tx BMC"),t.push("q"),t.push("BT"),t.push(e.scope.__private__.encodeColorString(e.color)),t.push("/"+o+" "+mo(n.fontSize)+" Tf"),t.push("1 0 0 1 0 0 Tm"),t.push(n.text),t.push("ET"),t.push("Q"),t.push("EMC");var u=P0(e);return u.scope=e.scope,u.stream=t.join(`
`),u}},Rg=function(e,t){var r=e.fontSize===0?e.maxFontSize:e.fontSize,n={text:"",fontSize:""},o=(t=(t=t.substr(0,1)=="("?t.substr(1):t).substr(t.length-1)==")"?t.substr(0,t.length-1):t).split(" ");o=e.multiline?o.map(function(Ae){return Ae.split(`
`)}):o.map(function(Ae){return[Ae]});var u=r,c=ki.internal.getHeight(e)||0;c=c<0?-c:c;var l=ki.internal.getWidth(e)||0;l=l<0?-l:l;var h=function(Ae,Ie,Fe){if(Ae+1<o.length){var ot=Ie+" "+o[Ae+1][0];return t1(ot,e,Fe).width<=l-4}return!1};u++;e:for(;u>0;){t="",u--;var v,w,E=t1("3",e,u).height,T=e.multiline?c-u:(c-E)/2,I=T+=2,F=0,U=0,G=0;if(u<=0){t=`(...) Tj
`,t+="% Width of Text: "+t1(t,e,u=12).width+", FieldWidth:"+l+`
`;break}for(var H="",X=0,ee=0;ee<o.length;ee++)if(o.hasOwnProperty(ee)){var K=!1;if(o[ee].length!==1&&G!==o[ee].length-1){if((E+2)*(X+2)+2>c)continue e;H+=o[ee][G],K=!0,U=ee,ee--}else{H=(H+=o[ee][G]+" ").substr(H.length-1)==" "?H.substr(0,H.length-1):H;var se=parseInt(ee),ce=h(se,H,u),_e=ee>=o.length-1;if(ce&&!_e){H+=" ",G=0;continue}if(ce||_e){if(_e)U=se;else if(e.multiline&&(E+2)*(X+2)+2>c)continue e}else{if(!e.multiline||(E+2)*(X+2)+2>c)continue e;U=se}}for(var pe="",Ge=F;Ge<=U;Ge++){var We=o[Ge];if(e.multiline){if(Ge===U){pe+=We[G]+" ",G=(G+1)%We.length;continue}if(Ge===F){pe+=We[We.length-1]+" ";continue}}pe+=We[0]+" "}switch(pe=pe.substr(pe.length-1)==" "?pe.substr(0,pe.length-1):pe,w=t1(pe,e,u).width,e.textAlign){case"right":v=l-w-2;break;case"center":v=(l-w)/2;break;case"left":default:v=2}t+=mo(v)+" "+mo(I)+` Td
`,t+="("+ph(pe)+`) Tj
`,t+=-mo(v)+` 0 Td
`,I=-(u+2),w=0,F=K?U:U+1,X++,H=""}break}return n.text=t,n.fontSize=u,n},t1=function(e,t,r){var n=t.scope.internal.getFont(t.fontName,t.fontStyle),o=t.scope.getStringUnitWidth(e,{font:n,fontSize:parseFloat(r),charSpace:0})*parseFloat(r);return{height:t.scope.getStringUnitWidth("3",{font:n,fontSize:parseFloat(r),charSpace:0})*parseFloat(r)*1.5,width:o}},B7={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},j7=function(e,t){var r={type:"reference",object:e};t.internal.getPageInfo(e.page).pageContext.annotations.find(function(n){return n.type===r.type&&n.object===r.object})===void 0&&t.internal.getPageInfo(e.page).pageContext.annotations.push(r)},U7=function(e,t){for(var r in e)if(e.hasOwnProperty(r)){var n=r,o=e[r];t.internal.newObjectDeferredBegin(o.objId,!0),_a(o)==="object"&&typeof o.putStream=="function"&&o.putStream(),delete e[n]}},q7=function(e,t){if(t.scope=e,e.internal!==void 0&&(e.internal.acroformPlugin===void 0||e.internal.acroformPlugin.isInitialized===!1)){if(v0.FieldNum=0,e.internal.acroformPlugin=JSON.parse(JSON.stringify(B7)),e.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");Oy=e.internal.scaleFactor,e.internal.acroformPlugin.acroFormDictionaryRoot=new Xw,e.internal.acroformPlugin.acroFormDictionaryRoot.scope=e,e.internal.acroformPlugin.acroFormDictionaryRoot._eventID=e.internal.events.subscribe("postPutResources",function(){(function(r){r.internal.events.unsubscribe(r.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete r.internal.acroformPlugin.acroFormDictionaryRoot._eventID,r.internal.acroformPlugin.printedOut=!0})(e)}),e.internal.events.subscribe("buildDocument",function(){(function(r){r.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var n=r.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var o in n)if(n.hasOwnProperty(o)){var u=n[o];u.objId=void 0,u.hasAnnotation&&j7(u,r)}})(e)}),e.internal.events.subscribe("putCatalog",function(){(function(r){if(r.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");r.internal.write("/AcroForm "+r.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(e)}),e.internal.events.subscribe("postPutPages",function(r){(function(n,o){var u=!n;for(var c in n||(o.internal.newObjectDeferredBegin(o.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),o.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),n=n||o.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(n.hasOwnProperty(c)){var l=n[c],h=[],v=l.Rect;if(l.Rect&&(l.Rect=O7(l.Rect,o)),o.internal.newObjectDeferredBegin(l.objId,!0),l.DA=ki.createDefaultAppearanceStream(l),_a(l)==="object"&&typeof l.getKeyValueListForStream=="function"&&(h=l.getKeyValueListForStream()),l.Rect=v,l.hasAppearanceStream&&!l.appearanceStreamContent){var w=F7(l);h.push({key:"AP",value:"<</N "+w+">>"}),o.internal.acroformPlugin.xForms.push(w)}if(l.appearanceStreamContent){var E="";for(var T in l.appearanceStreamContent)if(l.appearanceStreamContent.hasOwnProperty(T)){var I=l.appearanceStreamContent[T];if(E+="/"+T+" ",E+="<<",Object.keys(I).length>=1||Array.isArray(I)){for(var c in I)if(I.hasOwnProperty(c)){var F=I[c];typeof F=="function"&&(F=F.call(o,l)),E+="/"+c+" "+F+" ",o.internal.acroformPlugin.xForms.indexOf(F)>=0||o.internal.acroformPlugin.xForms.push(F)}}else typeof(F=I)=="function"&&(F=F.call(o,l)),E+="/"+c+" "+F,o.internal.acroformPlugin.xForms.indexOf(F)>=0||o.internal.acroformPlugin.xForms.push(F);E+=">>"}h.push({key:"AP",value:`<<
`+E+">>"})}o.internal.putStream({additionalKeyValues:h,objectId:l.objId}),o.internal.out("endobj")}u&&U7(o.internal.acroformPlugin.xForms,o)})(r,e)}),e.internal.acroformPlugin.isInitialized=!0}},Ww=ms.__acroform__.arrayToPdfArray=function(e,t,r){var n=function(c){return c};if(Array.isArray(e)){for(var o="[",u=0;u<e.length;u++)switch(u!==0&&(o+=" "),_a(e[u])){case"boolean":case"number":case"object":o+=e[u].toString();break;case"string":e[u].substr(0,1)!=="/"?(t!==void 0&&r&&(n=r.internal.getEncryptor(t)),o+="("+ph(n(e[u].toString()))+")"):o+=e[u].toString()}return o+="]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},sm=function(e,t,r){var n=function(o){return o};return t!==void 0&&r&&(n=r.internal.getEncryptor(t)),(e=e||"").toString(),e="("+ph(n(e))+")"},R0=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(e){this._objId=e}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};R0.prototype.toString=function(){return this.objId+" 0 R"},R0.prototype.putStream=function(){var e=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:e,objectId:this.objId}),this.scope.internal.out("endobj")},R0.prototype.getKeyValueListForStream=function(){var e=[],t=Object.getOwnPropertyNames(this).filter(function(u){return u!="content"&&u!="appearanceStreamContent"&&u!="scope"&&u!="objId"&&u.substring(0,1)!="_"});for(var r in t)if(Object.getOwnPropertyDescriptor(this,t[r]).configurable===!1){var n=t[r],o=this[n];o&&(Array.isArray(o)?e.push({key:n,value:Ww(o,this.objId,this.scope)}):o instanceof R0?(o.scope=this.scope,e.push({key:n,value:o.objId+" 0 R"})):typeof o!="function"&&e.push({key:n,value:o}))}return e};var Zw=function(){R0.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var e,t=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return t},set:function(r){t=r}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(r){e=r.trim()},get:function(){return e||null}})};ac(Zw,R0);var Xw=function(){R0.call(this);var e,t=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return t.length>0?t:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return t}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(e){var r=function(n){return n};return this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),"("+ph(r(e))+")"}},set:function(r){e=r}})};ac(Xw,R0);var v0=function e(){R0.call(this);var t=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return t},set:function(H){if(isNaN(H))throw new Error('Invalid value "'+H+'" for attribute F supplied.');t=H}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return Boolean(Is(t,3))},set:function(H){Boolean(H)===!0?this.F=Ts(t,3):this.F=Ls(t,3)}});var r=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return r},set:function(H){if(isNaN(H))throw new Error('Invalid value "'+H+'" for attribute Ff supplied.');r=H}});var n=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(n.length!==0)return n},set:function(H){n=H!==void 0?H:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[0])?0:n[0]},set:function(H){n[0]=H}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[1])?0:n[1]},set:function(H){n[1]=H}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[2])?0:n[2]},set:function(H){n[2]=H}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[3])?0:n[3]},set:function(H){n[3]=H}});var o="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return o},set:function(H){switch(H){case"/Btn":case"/Tx":case"/Ch":case"/Sig":o=H;break;default:throw new Error('Invalid value "'+H+'" for attribute FT supplied.')}}});var u=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!u||u.length<1){if(this instanceof D1)return;u="FieldObject"+e.FieldNum++}var H=function(X){return X};return this.scope&&(H=this.scope.internal.getEncryptor(this.objId)),"("+ph(H(u))+")"},set:function(H){u=H.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return u},set:function(H){u=H}});var c="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return c},set:function(H){c=H}});var l="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return l},set:function(H){l=H}});var h=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return h},set:function(H){h=H}});var v=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return v===void 0?50/Oy:v},set:function(H){v=H}});var w="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return w},set:function(H){w=H}});var E="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!E||this instanceof D1||this instanceof nh))return sm(E,this.objId,this.scope)},set:function(H){H=H.toString(),E=H}});var T=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(T)return this instanceof pl?T:sm(T,this.objId,this.scope)},set:function(H){H=H.toString(),T=this instanceof pl?H:H.substr(0,1)==="("?xh(H.substr(1,H.length-2)):xh(H)}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof pl?xh(T.substr(1,T.length-1)):T},set:function(H){H=H.toString(),T=this instanceof pl?"/"+H:H}});var I=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(I)return I},set:function(H){this.V=H}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(I)return this instanceof pl?I:sm(I,this.objId,this.scope)},set:function(H){H=H.toString(),I=this instanceof pl?H:H.substr(0,1)==="("?xh(H.substr(1,H.length-2)):xh(H)}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof pl?xh(I.substr(1,I.length-1)):I},set:function(H){H=H.toString(),I=this instanceof pl?"/"+H:H}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var F,U=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return U},set:function(H){H=Boolean(H),U=H}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(F)return F},set:function(H){F=H}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return Boolean(Is(this.Ff,1))},set:function(H){Boolean(H)===!0?this.Ff=Ts(this.Ff,1):this.Ff=Ls(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return Boolean(Is(this.Ff,2))},set:function(H){Boolean(H)===!0?this.Ff=Ts(this.Ff,2):this.Ff=Ls(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return Boolean(Is(this.Ff,3))},set:function(H){Boolean(H)===!0?this.Ff=Ts(this.Ff,3):this.Ff=Ls(this.Ff,3)}});var G=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(G!==null)return G},set:function(H){if([0,1,2].indexOf(H)===-1)throw new Error('Invalid value "'+H+'" for attribute Q supplied.');G=H}}),Object.defineProperty(this,"textAlign",{get:function(){var H;switch(G){case 0:default:H="left";break;case 1:H="center";break;case 2:H="right"}return H},configurable:!0,enumerable:!0,set:function(H){switch(H){case"right":case 2:G=2;break;case"center":case 1:G=1;break;case"left":case 0:default:G=0}}})};ac(v0,R0);var Gh=function(){v0.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var e=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return e},set:function(r){e=r}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return e},set:function(r){e=r}});var t=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return Ww(t,this.objId,this.scope)},set:function(r){var n,o;o=[],typeof(n=r)=="string"&&(o=function(u,c,l){l||(l=1);for(var h,v=[];h=c.exec(u);)v.push(h[l]);return v}(n,/\((.*?)\)/g)),t=o}}),this.getOptions=function(){return t},this.setOptions=function(r){t=r,this.sort&&t.sort()},this.addOption=function(r){r=(r=r||"").toString(),t.push(r),this.sort&&t.sort()},this.removeOption=function(r,n){for(n=n||!1,r=(r=r||"").toString();t.indexOf(r)!==-1&&(t.splice(t.indexOf(r),1),n!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return Boolean(Is(this.Ff,18))},set:function(r){Boolean(r)===!0?this.Ff=Ts(this.Ff,18):this.Ff=Ls(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return Boolean(Is(this.Ff,19))},set:function(r){this.combo===!0&&(Boolean(r)===!0?this.Ff=Ts(this.Ff,19):this.Ff=Ls(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return Boolean(Is(this.Ff,20))},set:function(r){Boolean(r)===!0?(this.Ff=Ts(this.Ff,20),t.sort()):this.Ff=Ls(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return Boolean(Is(this.Ff,22))},set:function(r){Boolean(r)===!0?this.Ff=Ts(this.Ff,22):this.Ff=Ls(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return Boolean(Is(this.Ff,23))},set:function(r){Boolean(r)===!0?this.Ff=Ts(this.Ff,23):this.Ff=Ls(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return Boolean(Is(this.Ff,27))},set:function(r){Boolean(r)===!0?this.Ff=Ts(this.Ff,27):this.Ff=Ls(this.Ff,27)}}),this.hasAppearanceStream=!1};ac(Gh,v0);var Hh=function(){Gh.call(this),this.fontName="helvetica",this.combo=!1};ac(Hh,Gh);var Wh=function(){Hh.call(this),this.combo=!0};ac(Wh,Hh);var w1=function(){Wh.call(this),this.edit=!0};ac(w1,Wh);var pl=function(){v0.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return Boolean(Is(this.Ff,15))},set:function(r){Boolean(r)===!0?this.Ff=Ts(this.Ff,15):this.Ff=Ls(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return Boolean(Is(this.Ff,16))},set:function(r){Boolean(r)===!0?this.Ff=Ts(this.Ff,16):this.Ff=Ls(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return Boolean(Is(this.Ff,17))},set:function(r){Boolean(r)===!0?this.Ff=Ts(this.Ff,17):this.Ff=Ls(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return Boolean(Is(this.Ff,26))},set:function(r){Boolean(r)===!0?this.Ff=Ts(this.Ff,26):this.Ff=Ls(this.Ff,26)}});var e,t={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var r=function(u){return u};if(this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),Object.keys(t).length!==0){var n,o=[];for(n in o.push("<<"),t)o.push("/"+n+" ("+ph(r(t[n]))+")");return o.push(">>"),o.join(`
`)}},set:function(r){_a(r)==="object"&&(t=r)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return t.CA||""},set:function(r){typeof r=="string"&&(t.CA=r)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return e},set:function(r){e=r}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return e.substr(1,e.length-1)},set:function(r){e="/"+r}})};ac(pl,v0);var x1=function(){pl.call(this),this.pushButton=!0};ac(x1,pl);var Zh=function(){pl.call(this),this.radio=!0,this.pushButton=!1;var e=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t!==void 0?t:[]}})};ac(Zh,pl);var D1=function(){var e,t;v0.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return e},set:function(o){e=o}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return t},set:function(o){t=o}});var r,n={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var o=function(l){return l};this.scope&&(o=this.scope.internal.getEncryptor(this.objId));var u,c=[];for(u in c.push("<<"),n)c.push("/"+u+" ("+ph(o(n[u]))+")");return c.push(">>"),c.join(`
`)},set:function(o){_a(o)==="object"&&(n=o)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return n.CA||""},set:function(o){typeof o=="string"&&(n.CA=o)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return r},set:function(o){r=o}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return r.substr(1,r.length-1)},set:function(o){r="/"+o}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=ki.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};ac(D1,v0),Zh.prototype.setAppearance=function(e){if(!("createAppearanceStream"in e)||!("getCA"in e))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var t in this.Kids)if(this.Kids.hasOwnProperty(t)){var r=this.Kids[t];r.appearanceStreamContent=e.createAppearanceStream(r.optionName),r.caption=e.getCA()}},Zh.prototype.createOption=function(e){var t=new D1;return t.Parent=this,t.optionName=e,this.Kids.push(t),V7.call(this.scope,t),t};var k1=function(){pl.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=ki.CheckBox.createAppearanceStream()};ac(k1,pl);var nh=function(){v0.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return Boolean(Is(this.Ff,13))},set:function(t){Boolean(t)===!0?this.Ff=Ts(this.Ff,13):this.Ff=Ls(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return Boolean(Is(this.Ff,21))},set:function(t){Boolean(t)===!0?this.Ff=Ts(this.Ff,21):this.Ff=Ls(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return Boolean(Is(this.Ff,23))},set:function(t){Boolean(t)===!0?this.Ff=Ts(this.Ff,23):this.Ff=Ls(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return Boolean(Is(this.Ff,24))},set:function(t){Boolean(t)===!0?this.Ff=Ts(this.Ff,24):this.Ff=Ls(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return Boolean(Is(this.Ff,25))},set:function(t){Boolean(t)===!0?this.Ff=Ts(this.Ff,25):this.Ff=Ls(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return Boolean(Is(this.Ff,26))},set:function(t){Boolean(t)===!0?this.Ff=Ts(this.Ff,26):this.Ff=Ls(this.Ff,26)}});var e=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return e},set:function(t){Number.isInteger(t)&&(e=t)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};ac(nh,v0);var A1=function(){nh.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return Boolean(Is(this.Ff,14))},set:function(e){Boolean(e)===!0?this.Ff=Ts(this.Ff,14):this.Ff=Ls(this.Ff,14)}}),this.password=!0};ac(A1,nh);var ki={CheckBox:{createAppearanceStream:function(){return{N:{On:ki.CheckBox.YesNormal},D:{On:ki.CheckBox.YesPushDown,Off:ki.CheckBox.OffPushDown}}},YesPushDown:function(e){var t=P0(e);t.scope=e.scope;var r=[],n=e.scope.internal.getFont(e.fontName,e.fontStyle).id,o=e.scope.__private__.encodeColorString(e.color),u=Rg(e,e.caption);return r.push("0.749023 g"),r.push("0 0 "+mo(ki.internal.getWidth(e))+" "+mo(ki.internal.getHeight(e))+" re"),r.push("f"),r.push("BMC"),r.push("q"),r.push("0 0 1 rg"),r.push("/"+n+" "+mo(u.fontSize)+" Tf "+o),r.push("BT"),r.push(u.text),r.push("ET"),r.push("Q"),r.push("EMC"),t.stream=r.join(`
`),t},YesNormal:function(e){var t=P0(e);t.scope=e.scope;var r=e.scope.internal.getFont(e.fontName,e.fontStyle).id,n=e.scope.__private__.encodeColorString(e.color),o=[],u=ki.internal.getHeight(e),c=ki.internal.getWidth(e),l=Rg(e,e.caption);return o.push("1 g"),o.push("0 0 "+mo(c)+" "+mo(u)+" re"),o.push("f"),o.push("q"),o.push("0 0 1 rg"),o.push("0 0 "+mo(c-1)+" "+mo(u-1)+" re"),o.push("W"),o.push("n"),o.push("0 g"),o.push("BT"),o.push("/"+r+" "+mo(l.fontSize)+" Tf "+n),o.push(l.text),o.push("ET"),o.push("Q"),t.stream=o.join(`
`),t},OffPushDown:function(e){var t=P0(e);t.scope=e.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+mo(ki.internal.getWidth(e))+" "+mo(ki.internal.getHeight(e))+" re"),r.push("f"),t.stream=r.join(`
`),t}},RadioButton:{Circle:{createAppearanceStream:function(e){var t={D:{Off:ki.RadioButton.Circle.OffPushDown},N:{}};return t.N[e]=ki.RadioButton.Circle.YesNormal,t.D[e]=ki.RadioButton.Circle.YesPushDown,t},getCA:function(){return"l"},YesNormal:function(e){var t=P0(e);t.scope=e.scope;var r=[],n=ki.internal.getWidth(e)<=ki.internal.getHeight(e)?ki.internal.getWidth(e)/4:ki.internal.getHeight(e)/4;n=Number((.9*n).toFixed(5));var o=ki.internal.Bezier_C,u=Number((n*o).toFixed(5));return r.push("q"),r.push("1 0 0 1 "+wf(ki.internal.getWidth(e)/2)+" "+wf(ki.internal.getHeight(e)/2)+" cm"),r.push(n+" 0 m"),r.push(n+" "+u+" "+u+" "+n+" 0 "+n+" c"),r.push("-"+u+" "+n+" -"+n+" "+u+" -"+n+" 0 c"),r.push("-"+n+" -"+u+" -"+u+" -"+n+" 0 -"+n+" c"),r.push(u+" -"+n+" "+n+" -"+u+" "+n+" 0 c"),r.push("f"),r.push("Q"),t.stream=r.join(`
`),t},YesPushDown:function(e){var t=P0(e);t.scope=e.scope;var r=[],n=ki.internal.getWidth(e)<=ki.internal.getHeight(e)?ki.internal.getWidth(e)/4:ki.internal.getHeight(e)/4;n=Number((.9*n).toFixed(5));var o=Number((2*n).toFixed(5)),u=Number((o*ki.internal.Bezier_C).toFixed(5)),c=Number((n*ki.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+wf(ki.internal.getWidth(e)/2)+" "+wf(ki.internal.getHeight(e)/2)+" cm"),r.push(o+" 0 m"),r.push(o+" "+u+" "+u+" "+o+" 0 "+o+" c"),r.push("-"+u+" "+o+" -"+o+" "+u+" -"+o+" 0 c"),r.push("-"+o+" -"+u+" -"+u+" -"+o+" 0 -"+o+" c"),r.push(u+" -"+o+" "+o+" -"+u+" "+o+" 0 c"),r.push("f"),r.push("Q"),r.push("0 g"),r.push("q"),r.push("1 0 0 1 "+wf(ki.internal.getWidth(e)/2)+" "+wf(ki.internal.getHeight(e)/2)+" cm"),r.push(n+" 0 m"),r.push(n+" "+c+" "+c+" "+n+" 0 "+n+" c"),r.push("-"+c+" "+n+" -"+n+" "+c+" -"+n+" 0 c"),r.push("-"+n+" -"+c+" -"+c+" -"+n+" 0 -"+n+" c"),r.push(c+" -"+n+" "+n+" -"+c+" "+n+" 0 c"),r.push("f"),r.push("Q"),t.stream=r.join(`
`),t},OffPushDown:function(e){var t=P0(e);t.scope=e.scope;var r=[],n=ki.internal.getWidth(e)<=ki.internal.getHeight(e)?ki.internal.getWidth(e)/4:ki.internal.getHeight(e)/4;n=Number((.9*n).toFixed(5));var o=Number((2*n).toFixed(5)),u=Number((o*ki.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+wf(ki.internal.getWidth(e)/2)+" "+wf(ki.internal.getHeight(e)/2)+" cm"),r.push(o+" 0 m"),r.push(o+" "+u+" "+u+" "+o+" 0 "+o+" c"),r.push("-"+u+" "+o+" -"+o+" "+u+" -"+o+" 0 c"),r.push("-"+o+" -"+u+" -"+u+" -"+o+" 0 -"+o+" c"),r.push(u+" -"+o+" "+o+" -"+u+" "+o+" 0 c"),r.push("f"),r.push("Q"),t.stream=r.join(`
`),t}},Cross:{createAppearanceStream:function(e){var t={D:{Off:ki.RadioButton.Cross.OffPushDown},N:{}};return t.N[e]=ki.RadioButton.Cross.YesNormal,t.D[e]=ki.RadioButton.Cross.YesPushDown,t},getCA:function(){return"8"},YesNormal:function(e){var t=P0(e);t.scope=e.scope;var r=[],n=ki.internal.calculateCross(e);return r.push("q"),r.push("1 1 "+mo(ki.internal.getWidth(e)-2)+" "+mo(ki.internal.getHeight(e)-2)+" re"),r.push("W"),r.push("n"),r.push(mo(n.x1.x)+" "+mo(n.x1.y)+" m"),r.push(mo(n.x2.x)+" "+mo(n.x2.y)+" l"),r.push(mo(n.x4.x)+" "+mo(n.x4.y)+" m"),r.push(mo(n.x3.x)+" "+mo(n.x3.y)+" l"),r.push("s"),r.push("Q"),t.stream=r.join(`
`),t},YesPushDown:function(e){var t=P0(e);t.scope=e.scope;var r=ki.internal.calculateCross(e),n=[];return n.push("0.749023 g"),n.push("0 0 "+mo(ki.internal.getWidth(e))+" "+mo(ki.internal.getHeight(e))+" re"),n.push("f"),n.push("q"),n.push("1 1 "+mo(ki.internal.getWidth(e)-2)+" "+mo(ki.internal.getHeight(e)-2)+" re"),n.push("W"),n.push("n"),n.push(mo(r.x1.x)+" "+mo(r.x1.y)+" m"),n.push(mo(r.x2.x)+" "+mo(r.x2.y)+" l"),n.push(mo(r.x4.x)+" "+mo(r.x4.y)+" m"),n.push(mo(r.x3.x)+" "+mo(r.x3.y)+" l"),n.push("s"),n.push("Q"),t.stream=n.join(`
`),t},OffPushDown:function(e){var t=P0(e);t.scope=e.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+mo(ki.internal.getWidth(e))+" "+mo(ki.internal.getHeight(e))+" re"),r.push("f"),t.stream=r.join(`
`),t}}},createDefaultAppearanceStream:function(e){var t=e.scope.internal.getFont(e.fontName,e.fontStyle).id,r=e.scope.__private__.encodeColorString(e.color);return"/"+t+" "+e.fontSize+" Tf "+r}};ki.internal={Bezier_C:.551915024494,calculateCross:function(e){var t=ki.internal.getWidth(e),r=ki.internal.getHeight(e),n=Math.min(t,r);return{x1:{x:(t-n)/2,y:(r-n)/2+n},x2:{x:(t-n)/2+n,y:(r-n)/2},x3:{x:(t-n)/2,y:(r-n)/2},x4:{x:(t-n)/2+n,y:(r-n)/2+n}}}},ki.internal.getWidth=function(e){var t=0;return _a(e)==="object"&&(t=Q_(e.Rect[2])),t},ki.internal.getHeight=function(e){var t=0;return _a(e)==="object"&&(t=Q_(e.Rect[3])),t};var V7=ms.addField=function(e){if(q7(this,e),!(e instanceof v0))throw new Error("Invalid argument passed to jsPDF.addField.");var t;return(t=e).scope.internal.acroformPlugin.printedOut&&(t.scope.internal.acroformPlugin.printedOut=!1,t.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),t.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(t),e.page=e.scope.internal.getCurrentPageInfo().pageNumber,this};ms.AcroFormChoiceField=Gh,ms.AcroFormListBox=Hh,ms.AcroFormComboBox=Wh,ms.AcroFormEditBox=w1,ms.AcroFormButton=pl,ms.AcroFormPushButton=x1,ms.AcroFormRadioButton=Zh,ms.AcroFormCheckBox=k1,ms.AcroFormTextField=nh,ms.AcroFormPasswordField=A1,ms.AcroFormAppearance=ki,ms.AcroForm={ChoiceField:Gh,ListBox:Hh,ComboBox:Wh,EditBox:w1,Button:pl,PushButton:x1,RadioButton:Zh,CheckBox:k1,TextField:nh,PasswordField:A1,Appearance:ki},Zi.AcroForm={ChoiceField:Gh,ListBox:Hh,ComboBox:Wh,EditBox:w1,Button:pl,PushButton:x1,RadioButton:Zh,CheckBox:k1,TextField:nh,PasswordField:A1,Appearance:ki};Zi.AcroForm;function Yw(e){return e.reduce(function(t,r,n){return t[r]=n,t},{})}(function(e){e.__addimage__={};var t="UNKNOWN",r={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},n=e.__addimage__.getImageFileTypeByImageData=function(Ae,Ie){var Fe,ot,_t,ht,$e,ut=t;if((Ie=Ie||t)==="RGBA"||Ae.data!==void 0&&Ae.data instanceof Uint8ClampedArray&&"height"in Ae&&"width"in Ae)return"RGBA";if(ce(Ae))for($e in r)for(_t=r[$e],Fe=0;Fe<_t.length;Fe+=1){for(ht=!0,ot=0;ot<_t[Fe].length;ot+=1)if(_t[Fe][ot]!==void 0&&_t[Fe][ot]!==Ae[ot]){ht=!1;break}if(ht===!0){ut=$e;break}}else for($e in r)for(_t=r[$e],Fe=0;Fe<_t.length;Fe+=1){for(ht=!0,ot=0;ot<_t[Fe].length;ot+=1)if(_t[Fe][ot]!==void 0&&_t[Fe][ot]!==Ae.charCodeAt(ot)){ht=!1;break}if(ht===!0){ut=$e;break}}return ut===t&&Ie!==t&&(ut=Ie),ut},o=function Ae(Ie){for(var Fe=this.internal.write,ot=this.internal.putStream,_t=(0,this.internal.getFilters)();_t.indexOf("FlateEncode")!==-1;)_t.splice(_t.indexOf("FlateEncode"),1);Ie.objectId=this.internal.newObject();var ht=[];if(ht.push({key:"Type",value:"/XObject"}),ht.push({key:"Subtype",value:"/Image"}),ht.push({key:"Width",value:Ie.width}),ht.push({key:"Height",value:Ie.height}),Ie.colorSpace===G.INDEXED?ht.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(Ie.palette.length/3-1)+" "+("sMask"in Ie&&Ie.sMask!==void 0?Ie.objectId+2:Ie.objectId+1)+" 0 R]"}):(ht.push({key:"ColorSpace",value:"/"+Ie.colorSpace}),Ie.colorSpace===G.DEVICE_CMYK&&ht.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),ht.push({key:"BitsPerComponent",value:Ie.bitsPerComponent}),"decodeParameters"in Ie&&Ie.decodeParameters!==void 0&&ht.push({key:"DecodeParms",value:"<<"+Ie.decodeParameters+">>"}),"transparency"in Ie&&Array.isArray(Ie.transparency)){for(var $e="",ut=0,bt=Ie.transparency.length;ut<bt;ut++)$e+=Ie.transparency[ut]+" "+Ie.transparency[ut]+" ";ht.push({key:"Mask",value:"["+$e+"]"})}Ie.sMask!==void 0&&ht.push({key:"SMask",value:Ie.objectId+1+" 0 R"});var Ze=Ie.filter!==void 0?["/"+Ie.filter]:void 0;if(ot({data:Ie.data,additionalKeyValues:ht,alreadyAppliedFilters:Ze,objectId:Ie.objectId}),Fe("endobj"),"sMask"in Ie&&Ie.sMask!==void 0){var He="/Predictor "+Ie.predictor+" /Colors 1 /BitsPerComponent "+Ie.bitsPerComponent+" /Columns "+Ie.width,xe={width:Ie.width,height:Ie.height,colorSpace:"DeviceGray",bitsPerComponent:Ie.bitsPerComponent,decodeParameters:He,data:Ie.sMask};"filter"in Ie&&(xe.filter=Ie.filter),Ae.call(this,xe)}if(Ie.colorSpace===G.INDEXED){var Ne=this.internal.newObject();ot({data:pe(new Uint8Array(Ie.palette)),objectId:Ne}),Fe("endobj")}},u=function(){var Ae=this.internal.collections.addImage_images;for(var Ie in Ae)o.call(this,Ae[Ie])},c=function(){var Ae,Ie=this.internal.collections.addImage_images,Fe=this.internal.write;for(var ot in Ie)Fe("/I"+(Ae=Ie[ot]).index,Ae.objectId,"0","R")},l=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",u),this.internal.events.subscribe("putXobjectDict",c))},h=function(){var Ae=this.internal.collections.addImage_images;return l.call(this),Ae},v=function(){return Object.keys(this.internal.collections.addImage_images).length},w=function(Ae){return typeof e["process"+Ae.toUpperCase()]=="function"},E=function(Ae){return _a(Ae)==="object"&&Ae.nodeType===1},T=function(Ae,Ie){if(Ae.nodeName==="IMG"&&Ae.hasAttribute("src")){var Fe=""+Ae.getAttribute("src");if(Fe.indexOf("data:image/")===0)return $p(unescape(Fe).split("base64,").pop());var ot=e.loadFile(Fe,!0);if(ot!==void 0)return ot}if(Ae.nodeName==="CANVAS"){if(Ae.width===0||Ae.height===0)throw new Error("Given canvas must have data. Canvas width: "+Ae.width+", height: "+Ae.height);var _t;switch(Ie){case"PNG":_t="image/png";break;case"WEBP":_t="image/webp";break;case"JPEG":case"JPG":default:_t="image/jpeg"}return $p(Ae.toDataURL(_t,1).split("base64,").pop())}},I=function(Ae){var Ie=this.internal.collections.addImage_images;if(Ie){for(var Fe in Ie)if(Ae===Ie[Fe].alias)return Ie[Fe]}},F=function(Ae,Ie,Fe){return Ae||Ie||(Ae=-96,Ie=-96),Ae<0&&(Ae=-1*Fe.width*72/Ae/this.internal.scaleFactor),Ie<0&&(Ie=-1*Fe.height*72/Ie/this.internal.scaleFactor),Ae===0&&(Ae=Ie*Fe.width/Fe.height),Ie===0&&(Ie=Ae*Fe.height/Fe.width),[Ae,Ie]},U=function(Ae,Ie,Fe,ot,_t,ht){var $e=F.call(this,Fe,ot,_t),ut=this.internal.getCoordinateString,bt=this.internal.getVerticalCoordinateString,Ze=h.call(this);if(Fe=$e[0],ot=$e[1],Ze[_t.index]=_t,ht){ht*=Math.PI/180;var He=Math.cos(ht),xe=Math.sin(ht),Ne=function(ft){return ft.toFixed(4)},Pe=[Ne(He),Ne(xe),Ne(-1*xe),Ne(He),0,0,"cm"]}this.internal.write("q"),ht?(this.internal.write([1,"0","0",1,ut(Ae),bt(Ie+ot),"cm"].join(" ")),this.internal.write(Pe.join(" ")),this.internal.write([ut(Fe),"0","0",ut(ot),"0","0","cm"].join(" "))):this.internal.write([ut(Fe),"0","0",ut(ot),ut(Ae),bt(Ie+ot),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+_t.index+" Do"),this.internal.write("Q")},G=e.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};e.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var H=e.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},X=e.__addimage__.sHashCode=function(Ae){var Ie,Fe,ot=0;if(typeof Ae=="string")for(Fe=Ae.length,Ie=0;Ie<Fe;Ie++)ot=(ot<<5)-ot+Ae.charCodeAt(Ie),ot|=0;else if(ce(Ae))for(Fe=Ae.byteLength/2,Ie=0;Ie<Fe;Ie++)ot=(ot<<5)-ot+Ae[Ie],ot|=0;return ot},ee=e.__addimage__.validateStringAsBase64=function(Ae){(Ae=Ae||"").toString().trim();var Ie=!0;return Ae.length===0&&(Ie=!1),Ae.length%4!=0&&(Ie=!1),/^[A-Za-z0-9+/]+$/.test(Ae.substr(0,Ae.length-2))===!1&&(Ie=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(Ae.substr(-2))===!1&&(Ie=!1),Ie},K=e.__addimage__.extractImageFromDataUrl=function(Ae){var Ie=(Ae=Ae||"").split("base64,"),Fe=null;if(Ie.length===2){var ot=/^data:(\w*\/\w*);*(charset=(?!charset=)[\w=-]*)*;*$/.exec(Ie[0]);Array.isArray(ot)&&(Fe={mimeType:ot[1],charset:ot[2],data:Ie[1]})}return Fe},se=e.__addimage__.supportsArrayBuffer=function(){return typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"};e.__addimage__.isArrayBuffer=function(Ae){return se()&&Ae instanceof ArrayBuffer};var ce=e.__addimage__.isArrayBufferView=function(Ae){return se()&&typeof Uint32Array<"u"&&(Ae instanceof Int8Array||Ae instanceof Uint8Array||typeof Uint8ClampedArray<"u"&&Ae instanceof Uint8ClampedArray||Ae instanceof Int16Array||Ae instanceof Uint16Array||Ae instanceof Int32Array||Ae instanceof Uint32Array||Ae instanceof Float32Array||Ae instanceof Float64Array)},_e=e.__addimage__.binaryStringToUint8Array=function(Ae){for(var Ie=Ae.length,Fe=new Uint8Array(Ie),ot=0;ot<Ie;ot++)Fe[ot]=Ae.charCodeAt(ot);return Fe},pe=e.__addimage__.arrayBufferToBinaryString=function(Ae){for(var Ie="",Fe=ce(Ae)?Ae:new Uint8Array(Ae),ot=0;ot<Fe.length;ot+=8192)Ie+=String.fromCharCode.apply(null,Fe.subarray(ot,ot+8192));return Ie};e.addImage=function(){var Ae,Ie,Fe,ot,_t,ht,$e,ut,bt;if(typeof arguments[1]=="number"?(Ie=t,Fe=arguments[1],ot=arguments[2],_t=arguments[3],ht=arguments[4],$e=arguments[5],ut=arguments[6],bt=arguments[7]):(Ie=arguments[1],Fe=arguments[2],ot=arguments[3],_t=arguments[4],ht=arguments[5],$e=arguments[6],ut=arguments[7],bt=arguments[8]),_a(Ae=arguments[0])==="object"&&!E(Ae)&&"imageData"in Ae){var Ze=Ae;Ae=Ze.imageData,Ie=Ze.format||Ie||t,Fe=Ze.x||Fe||0,ot=Ze.y||ot||0,_t=Ze.w||Ze.width||_t,ht=Ze.h||Ze.height||ht,$e=Ze.alias||$e,ut=Ze.compression||ut,bt=Ze.rotation||Ze.angle||bt}var He=this.internal.getFilters();if(ut===void 0&&He.indexOf("FlateEncode")!==-1&&(ut="SLOW"),isNaN(Fe)||isNaN(ot))throw new Error("Invalid coordinates passed to jsPDF.addImage");l.call(this);var xe=Ge.call(this,Ae,Ie,$e,ut);return U.call(this,Fe,ot,_t,ht,xe,bt),this};var Ge=function(Ae,Ie,Fe,ot){var _t,ht,$e;if(typeof Ae=="string"&&n(Ae)===t){Ae=unescape(Ae);var ut=We(Ae,!1);(ut!==""||(ut=e.loadFile(Ae,!0))!==void 0)&&(Ae=ut)}if(E(Ae)&&(Ae=T(Ae,Ie)),Ie=n(Ae,Ie),!w(Ie))throw new Error("addImage does not support files of type '"+Ie+"', please ensure that a plugin for '"+Ie+"' support is added.");if((($e=Fe)==null||$e.length===0)&&(Fe=function(bt){return typeof bt=="string"||ce(bt)?X(bt):ce(bt.data)?X(bt.data):null}(Ae)),(_t=I.call(this,Fe))||(se()&&(Ae instanceof Uint8Array||Ie==="RGBA"||(ht=Ae,Ae=_e(Ae))),_t=this["process"+Ie.toUpperCase()](Ae,v.call(this),Fe,function(bt){return bt&&typeof bt=="string"&&(bt=bt.toUpperCase()),bt in e.image_compression?bt:H.NONE}(ot),ht)),!_t)throw new Error("An unknown error occurred whilst processing the image.");return _t},We=e.__addimage__.convertBase64ToBinaryString=function(Ae,Ie){var Fe;Ie=typeof Ie!="boolean"||Ie;var ot,_t="";if(typeof Ae=="string"){ot=(Fe=K(Ae))!==null?Fe.data:Ae;try{_t=$p(ot)}catch(ht){if(Ie)throw ee(ot)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+ht.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return _t};e.getImageProperties=function(Ae){var Ie,Fe,ot="";if(E(Ae)&&(Ae=T(Ae)),typeof Ae=="string"&&n(Ae)===t&&((ot=We(Ae,!1))===""&&(ot=e.loadFile(Ae)||""),Ae=ot),Fe=n(Ae),!w(Fe))throw new Error("addImage does not support files of type '"+Fe+"', please ensure that a plugin for '"+Fe+"' support is added.");if(!se()||Ae instanceof Uint8Array||(Ae=_e(Ae)),!(Ie=this["process"+Fe.toUpperCase()](Ae)))throw new Error("An unknown error occurred whilst processing the image");return Ie.fileType=Fe,Ie}})(Zi.API),function(e){var t=function(r){if(r!==void 0&&r!="")return!0};Zi.API.events.push(["addPage",function(r){this.internal.getPageInfo(r.pageNumber).pageContext.annotations=[]}]),e.events.push(["putPage",function(r){for(var n,o,u,c=this.internal.getCoordinateString,l=this.internal.getVerticalCoordinateString,h=this.internal.getPageInfoByObjId(r.objId),v=r.pageContext.annotations,w=!1,E=0;E<v.length&&!w;E++)switch((n=v[E]).type){case"link":(t(n.options.url)||t(n.options.pageNumber))&&(w=!0);break;case"reference":case"text":case"freetext":w=!0}if(w!=0){this.internal.write("/Annots [");for(var T=0;T<v.length;T++){n=v[T];var I=this.internal.pdfEscape,F=this.internal.getEncryptor(r.objId);switch(n.type){case"reference":this.internal.write(" "+n.object.objId+" 0 R ");break;case"text":var U=this.internal.newAdditionalObject(),G=this.internal.newAdditionalObject(),H=this.internal.getEncryptor(U.objId),X=n.title||"Note";u="<</Type /Annot /Subtype /Text "+(o="/Rect ["+c(n.bounds.x)+" "+l(n.bounds.y+n.bounds.h)+" "+c(n.bounds.x+n.bounds.w)+" "+l(n.bounds.y)+"] ")+"/Contents ("+I(H(n.contents))+")",u+=" /Popup "+G.objId+" 0 R",u+=" /P "+h.objId+" 0 R",u+=" /T ("+I(H(X))+") >>",U.content=u;var ee=U.objId+" 0 R";u="<</Type /Annot /Subtype /Popup "+(o="/Rect ["+c(n.bounds.x+30)+" "+l(n.bounds.y+n.bounds.h)+" "+c(n.bounds.x+n.bounds.w+30)+" "+l(n.bounds.y)+"] ")+" /Parent "+ee,n.open&&(u+=" /Open true"),u+=" >>",G.content=u,this.internal.write(U.objId,"0 R",G.objId,"0 R");break;case"freetext":o="/Rect ["+c(n.bounds.x)+" "+l(n.bounds.y)+" "+c(n.bounds.x+n.bounds.w)+" "+l(n.bounds.y+n.bounds.h)+"] ";var K=n.color||"#000000";u="<</Type /Annot /Subtype /FreeText "+o+"/Contents ("+I(F(n.contents))+")",u+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+K+")",u+=" /Border [0 0 0]",u+=" >>",this.internal.write(u);break;case"link":if(n.options.name){var se=this.annotations._nameMap[n.options.name];n.options.pageNumber=se.page,n.options.top=se.y}else n.options.top||(n.options.top=0);if(o="/Rect ["+n.finalBounds.x+" "+n.finalBounds.y+" "+n.finalBounds.w+" "+n.finalBounds.h+"] ",u="",n.options.url)u="<</Type /Annot /Subtype /Link "+o+"/Border [0 0 0] /A <</S /URI /URI ("+I(F(n.options.url))+") >>";else if(n.options.pageNumber)switch(u="<</Type /Annot /Subtype /Link "+o+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(n.options.pageNumber).objId+" 0 R",n.options.magFactor=n.options.magFactor||"XYZ",n.options.magFactor){case"Fit":u+=" /Fit]";break;case"FitH":u+=" /FitH "+n.options.top+"]";break;case"FitV":n.options.left=n.options.left||0,u+=" /FitV "+n.options.left+"]";break;case"XYZ":default:var ce=l(n.options.top);n.options.left=n.options.left||0,n.options.zoom===void 0&&(n.options.zoom=0),u+=" /XYZ "+n.options.left+" "+ce+" "+n.options.zoom+"]"}u!=""&&(u+=" >>",this.internal.write(u))}}this.internal.write("]")}}]),e.createAnnotation=function(r){var n=this.internal.getCurrentPageInfo();switch(r.type){case"link":this.link(r.bounds.x,r.bounds.y,r.bounds.w,r.bounds.h,r);break;case"text":case"freetext":n.pageContext.annotations.push(r)}},e.link=function(r,n,o,u,c){var l=this.internal.getCurrentPageInfo(),h=this.internal.getCoordinateString,v=this.internal.getVerticalCoordinateString;l.pageContext.annotations.push({finalBounds:{x:h(r),y:v(n),w:h(r+o),h:v(n+u)},options:c,type:"link"})},e.textWithLink=function(r,n,o,u){var c,l,h=this.getTextWidth(r),v=this.internal.getLineHeight()/this.internal.scaleFactor;if(u.maxWidth!==void 0){l=u.maxWidth;var w=this.splitTextToSize(r,l).length;c=Math.ceil(v*w)}else l=h,c=v;return this.text(r,n,o,u),o+=.2*v,u.align==="center"&&(n-=h/2),u.align==="right"&&(n-=h),this.link(n,o-v,l,c,u),h},e.getTextWidth=function(r){var n=this.internal.getFontSize();return this.getStringUnitWidth(r)*n/this.internal.scaleFactor}}(Zi.API),function(e){var t={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},r={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},n={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},o=[1570,1571,1573,1575];e.__arabicParser__={};var u=e.__arabicParser__.isInArabicSubstitutionA=function(U){return t[U.charCodeAt(0)]!==void 0},c=e.__arabicParser__.isArabicLetter=function(U){return typeof U=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(U)},l=e.__arabicParser__.isArabicEndLetter=function(U){return c(U)&&u(U)&&t[U.charCodeAt(0)].length<=2},h=e.__arabicParser__.isArabicAlfLetter=function(U){return c(U)&&o.indexOf(U.charCodeAt(0))>=0};e.__arabicParser__.arabicLetterHasIsolatedForm=function(U){return c(U)&&u(U)&&t[U.charCodeAt(0)].length>=1};var v=e.__arabicParser__.arabicLetterHasFinalForm=function(U){return c(U)&&u(U)&&t[U.charCodeAt(0)].length>=2};e.__arabicParser__.arabicLetterHasInitialForm=function(U){return c(U)&&u(U)&&t[U.charCodeAt(0)].length>=3};var w=e.__arabicParser__.arabicLetterHasMedialForm=function(U){return c(U)&&u(U)&&t[U.charCodeAt(0)].length==4},E=e.__arabicParser__.resolveLigatures=function(U){var G=0,H=r,X="",ee=0;for(G=0;G<U.length;G+=1)H[U.charCodeAt(G)]!==void 0?(ee++,typeof(H=H[U.charCodeAt(G)])=="number"&&(X+=String.fromCharCode(H),H=r,ee=0),G===U.length-1&&(H=r,X+=U.charAt(G-(ee-1)),G-=ee-1,ee=0)):(H=r,X+=U.charAt(G-ee),G-=ee,ee=0);return X};e.__arabicParser__.isArabicDiacritic=function(U){return U!==void 0&&n[U.charCodeAt(0)]!==void 0};var T=e.__arabicParser__.getCorrectForm=function(U,G,H){return c(U)?u(U)===!1?-1:!v(U)||!c(G)&&!c(H)||!c(H)&&l(G)||l(U)&&!c(G)||l(U)&&h(G)||l(U)&&l(G)?0:w(U)&&c(G)&&!l(G)&&c(H)&&v(H)?3:l(U)||!c(H)?1:2:-1},I=function(U){var G=0,H=0,X=0,ee="",K="",se="",ce=(U=U||"").split("\\s+"),_e=[];for(G=0;G<ce.length;G+=1){for(_e.push(""),H=0;H<ce[G].length;H+=1)ee=ce[G][H],K=ce[G][H-1],se=ce[G][H+1],c(ee)?(X=T(ee,K,se),_e[G]+=X!==-1?String.fromCharCode(t[ee.charCodeAt(0)][X]):ee):_e[G]+=ee;_e[G]=E(_e[G])}return _e.join(" ")},F=e.__arabicParser__.processArabic=e.processArabic=function(){var U,G=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,H=[];if(Array.isArray(G)){var X=0;for(H=[],X=0;X<G.length;X+=1)Array.isArray(G[X])?H.push([I(G[X][0]),G[X][1],G[X][2]]):H.push([I(G[X])]);U=H}else U=I(G);return typeof arguments[0]=="string"?U:(arguments[0].text=U,arguments[0])};e.events.push(["preProcessText",F])}(Zi.API),Zi.API.autoPrint=function(e){var t;switch((e=e||{}).variant=e.variant||"non-conform",e.variant){case"javascript":this.addJS("print({});");break;case"non-conform":default:this.internal.events.subscribe("postPutResources",function(){t=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+t+" 0 R")})}return this},function(e){var t=function(){var r=void 0;Object.defineProperty(this,"pdf",{get:function(){return r},set:function(l){r=l}});var n=150;Object.defineProperty(this,"width",{get:function(){return n},set:function(l){n=isNaN(l)||Number.isInteger(l)===!1||l<0?150:l,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=n+1)}});var o=300;Object.defineProperty(this,"height",{get:function(){return o},set:function(l){o=isNaN(l)||Number.isInteger(l)===!1||l<0?300:l,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=o+1)}});var u=[];Object.defineProperty(this,"childNodes",{get:function(){return u},set:function(l){u=l}});var c={};Object.defineProperty(this,"style",{get:function(){return c},set:function(l){c=l}}),Object.defineProperty(this,"parentNode",{})};t.prototype.getContext=function(r,n){var o;if((r=r||"2d")!=="2d")return null;for(o in n)this.pdf.context2d.hasOwnProperty(o)&&(this.pdf.context2d[o]=n[o]);return this.pdf.context2d._canvas=this,this.pdf.context2d},t.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},e.events.push(["initialized",function(){this.canvas=new t,this.canvas.pdf=this}])}(Zi.API),function(e){var t={left:0,top:0,bottom:0,right:0},r=!1,n=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},t),this.internal.__cell__.margins.width=this.getPageWidth(),o.call(this))},o=function(){this.internal.__cell__.lastCell=new u,this.internal.__cell__.pages=1},u=function(){var h=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return h},set:function(U){h=U}});var v=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return v},set:function(U){v=U}});var w=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return w},set:function(U){w=U}});var E=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return E},set:function(U){E=U}});var T=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return T},set:function(U){T=U}});var I=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return I},set:function(U){I=U}});var F=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return F},set:function(U){F=U}}),this};u.prototype.clone=function(){return new u(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},u.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},e.setHeaderFunction=function(h){return n.call(this),this.internal.__cell__.headerFunction=typeof h=="function"?h:void 0,this},e.getTextDimensions=function(h,v){n.call(this);var w=(v=v||{}).fontSize||this.getFontSize(),E=v.font||this.getFont(),T=v.scaleFactor||this.internal.scaleFactor,I=0,F=0,U=0,G=this;if(!Array.isArray(h)&&typeof h!="string"){if(typeof h!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");h=String(h)}var H=v.maxWidth;H>0?typeof h=="string"?h=this.splitTextToSize(h,H):Object.prototype.toString.call(h)==="[object Array]"&&(h=h.reduce(function(ee,K){return ee.concat(G.splitTextToSize(K,H))},[])):h=Array.isArray(h)?h:[h];for(var X=0;X<h.length;X++)I<(U=this.getStringUnitWidth(h[X],{font:E})*w)&&(I=U);return I!==0&&(F=h.length),{w:I/=T,h:Math.max((F*w*this.getLineHeightFactor()-w*(this.getLineHeightFactor()-1))/T,0)}},e.cellAddPage=function(){n.call(this),this.addPage();var h=this.internal.__cell__.margins||t;return this.internal.__cell__.lastCell=new u(h.left,h.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var c=e.cell=function(){var h;h=arguments[0]instanceof u?arguments[0]:new u(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),n.call(this);var v=this.internal.__cell__.lastCell,w=this.internal.__cell__.padding,E=this.internal.__cell__.margins||t,T=this.internal.__cell__.tableHeaderRow,I=this.internal.__cell__.printHeaders;return v.lineNumber!==void 0&&(v.lineNumber===h.lineNumber?(h.x=(v.x||0)+(v.width||0),h.y=v.y||0):v.y+v.height+h.height+E.bottom>this.getPageHeight()?(this.cellAddPage(),h.y=E.top,I&&T&&(this.printHeaderRow(h.lineNumber,!0),h.y+=T[0].height)):h.y=v.y+v.height||h.y),h.text[0]!==void 0&&(this.rect(h.x,h.y,h.width,h.height,r===!0?"FD":void 0),h.align==="right"?this.text(h.text,h.x+h.width-w,h.y+w,{align:"right",baseline:"top"}):h.align==="center"?this.text(h.text,h.x+h.width/2,h.y+w,{align:"center",baseline:"top",maxWidth:h.width-w-w}):this.text(h.text,h.x+w,h.y+w,{align:"left",baseline:"top",maxWidth:h.width-w-w})),this.internal.__cell__.lastCell=h,this};e.table=function(h,v,w,E,T){if(n.call(this),!w)throw new Error("No data for PDF table.");var I,F,U,G,H=[],X=[],ee=[],K={},se={},ce=[],_e=[],pe=(T=T||{}).autoSize||!1,Ge=T.printHeaders!==!1,We=T.css&&T.css["font-size"]!==void 0?16*T.css["font-size"]:T.fontSize||12,Ae=T.margins||Object.assign({width:this.getPageWidth()},t),Ie=typeof T.padding=="number"?T.padding:3,Fe=T.headerBackgroundColor||"#c8c8c8",ot=T.headerTextColor||"#000";if(o.call(this),this.internal.__cell__.printHeaders=Ge,this.internal.__cell__.margins=Ae,this.internal.__cell__.table_font_size=We,this.internal.__cell__.padding=Ie,this.internal.__cell__.headerBackgroundColor=Fe,this.internal.__cell__.headerTextColor=ot,this.setFontSize(We),E==null)X=H=Object.keys(w[0]),ee=H.map(function(){return"left"});else if(Array.isArray(E)&&_a(E[0])==="object")for(H=E.map(function(Ze){return Ze.name}),X=E.map(function(Ze){return Ze.prompt||Ze.name||""}),ee=E.map(function(Ze){return Ze.align||"left"}),I=0;I<E.length;I+=1)se[E[I].name]=E[I].width*(19.049976/25.4);else Array.isArray(E)&&typeof E[0]=="string"&&(X=H=E,ee=H.map(function(){return"left"}));if(pe||Array.isArray(E)&&typeof E[0]=="string")for(I=0;I<H.length;I+=1){for(K[G=H[I]]=w.map(function(Ze){return Ze[G]}),this.setFont(void 0,"bold"),ce.push(this.getTextDimensions(X[I],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),F=K[G],this.setFont(void 0,"normal"),U=0;U<F.length;U+=1)ce.push(this.getTextDimensions(F[U],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);se[G]=Math.max.apply(null,ce)+Ie+Ie,ce=[]}if(Ge){var _t={};for(I=0;I<H.length;I+=1)_t[H[I]]={},_t[H[I]].text=X[I],_t[H[I]].align=ee[I];var ht=l.call(this,_t,se);_e=H.map(function(Ze){return new u(h,v,se[Ze],ht,_t[Ze].text,void 0,_t[Ze].align)}),this.setTableHeaderRow(_e),this.printHeaderRow(1,!1)}var $e=E.reduce(function(Ze,He){return Ze[He.name]=He.align,Ze},{});for(I=0;I<w.length;I+=1){"rowStart"in T&&T.rowStart instanceof Function&&T.rowStart({row:I,data:w[I]},this);var ut=l.call(this,w[I],se);for(U=0;U<H.length;U+=1){var bt=w[I][H[U]];"cellStart"in T&&T.cellStart instanceof Function&&T.cellStart({row:I,col:U,data:bt},this),c.call(this,new u(h,v,se[H[U]],ut,bt,I+2,$e[H[U]]))}}return this.internal.__cell__.table_x=h,this.internal.__cell__.table_y=v,this};var l=function(h,v){var w=this.internal.__cell__.padding,E=this.internal.__cell__.table_font_size,T=this.internal.scaleFactor;return Object.keys(h).map(function(I){var F=h[I];return this.splitTextToSize(F.hasOwnProperty("text")?F.text:F,v[I]-w-w)},this).map(function(I){return this.getLineHeightFactor()*I.length*E/T+w+w},this).reduce(function(I,F){return Math.max(I,F)},0)};e.setTableHeaderRow=function(h){n.call(this),this.internal.__cell__.tableHeaderRow=h},e.printHeaderRow=function(h,v){if(n.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var w;if(r=!0,typeof this.internal.__cell__.headerFunction=="function"){var E=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new u(E[0],E[1],E[2],E[3],void 0,-1)}this.setFont(void 0,"bold");for(var T=[],I=0;I<this.internal.__cell__.tableHeaderRow.length;I+=1){w=this.internal.__cell__.tableHeaderRow[I].clone(),v&&(w.y=this.internal.__cell__.margins.top||0,T.push(w)),w.lineNumber=h;var F=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),c.call(this,w),this.setTextColor(F)}T.length>0&&this.setTableHeaderRow(T),this.setFont(void 0,"normal"),r=!1}}(Zi.API);var Jw={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},Kw=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],Og=Yw(Kw),Qw=[100,200,300,400,500,600,700,800,900],$7=Yw(Qw);function Fg(e){var t=e.family.replace(/"|'/g,"").toLowerCase(),r=function(u){return Jw[u=u||"normal"]?u:"normal"}(e.style),n=function(u){if(!u)return 400;if(typeof u=="number")return u>=100&&u<=900&&u%100==0?u:400;if(/^\d00$/.test(u))return parseInt(u);switch(u){case"bold":return 700;case"normal":default:return 400}}(e.weight),o=function(u){return typeof Og[u=u||"normal"]=="number"?u:"normal"}(e.stretch);return{family:t,style:r,weight:n,stretch:o,src:e.src||[],ref:e.ref||{name:t,style:[o,r,n].join(" ")}}}function eb(e,t,r,n){var o;for(o=r;o>=0&&o<t.length;o+=n)if(e[t[o]])return e[t[o]];for(o=r;o>=0&&o<t.length;o-=n)if(e[t[o]])return e[t[o]]}var G7={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},tb={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function rb(e){return[e.stretch,e.style,e.weight,e.family].join(" ")}function H7(e,t,r){for(var n=(r=r||{}).defaultFontFamily||"times",o=Object.assign({},G7,r.genericFontFamilies||{}),u=null,c=null,l=0;l<t.length;++l)if(o[(u=Fg(t[l])).family]&&(u.family=o[u.family]),e.hasOwnProperty(u.family)){c=e[u.family];break}if(!(c=c||e[n]))throw new Error("Could not find a font-family for the rule '"+rb(u)+"' and default family '"+n+"'.");if(c=function(h,v){if(v[h])return v[h];var w=Og[h],E=w<=Og.normal?-1:1,T=eb(v,Kw,w,E);if(!T)throw new Error("Could not find a matching font-stretch value for "+h);return T}(u.stretch,c),c=function(h,v){if(v[h])return v[h];for(var w=Jw[h],E=0;E<w.length;++E)if(v[w[E]])return v[w[E]];throw new Error("Could not find a matching font-style for "+h)}(u.style,c),!(c=function(h,v){if(v[h])return v[h];if(h===400&&v[500])return v[500];if(h===500&&v[400])return v[400];var w=$7[h],E=eb(v,Qw,w,h<400?-1:1);if(!E)throw new Error("Could not find a matching font-weight for value "+h);return E}(u.weight,c)))throw new Error("Failed to resolve a font for the rule '"+rb(u)+"'.");return c}function nb(e){return e.trimLeft()}function W7(e,t){for(var r=0;r<e.length;){if(e.charAt(r)===t)return[e.substring(0,r),e.substring(r+1)];r+=1}return null}function Z7(e){var t=e.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return t===null?null:[t[0],e.substring(t[0].length)]}var r1,ib,ob,lm=["times"];(function(e){var t,r,n,o,u,c,l,h,v,w=function(xe){return xe=xe||{},this.isStrokeTransparent=xe.isStrokeTransparent||!1,this.strokeOpacity=xe.strokeOpacity||1,this.strokeStyle=xe.strokeStyle||"#000000",this.fillStyle=xe.fillStyle||"#000000",this.isFillTransparent=xe.isFillTransparent||!1,this.fillOpacity=xe.fillOpacity||1,this.font=xe.font||"10px sans-serif",this.textBaseline=xe.textBaseline||"alphabetic",this.textAlign=xe.textAlign||"left",this.lineWidth=xe.lineWidth||1,this.lineJoin=xe.lineJoin||"miter",this.lineCap=xe.lineCap||"butt",this.path=xe.path||[],this.transform=xe.transform!==void 0?xe.transform.clone():new h,this.globalCompositeOperation=xe.globalCompositeOperation||"normal",this.globalAlpha=xe.globalAlpha||1,this.clip_path=xe.clip_path||[],this.currentPoint=xe.currentPoint||new c,this.miterLimit=xe.miterLimit||10,this.lastPoint=xe.lastPoint||new c,this.lineDashOffset=xe.lineDashOffset||0,this.lineDash=xe.lineDash||[],this.margin=xe.margin||[0,0,0,0],this.prevPageLastElemOffset=xe.prevPageLastElemOffset||0,this.ignoreClearRect=typeof xe.ignoreClearRect!="boolean"||xe.ignoreClearRect,this};e.events.push(["initialized",function(){this.context2d=new E(this),t=this.internal.f2,r=this.internal.getCoordinateString,n=this.internal.getVerticalCoordinateString,o=this.internal.getHorizontalCoordinate,u=this.internal.getVerticalCoordinate,c=this.internal.Point,l=this.internal.Rectangle,h=this.internal.Matrix,v=new w}]);var E=function(xe){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var Ne=xe;Object.defineProperty(this,"pdf",{get:function(){return Ne}});var Pe=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return Pe},set:function(St){Pe=Boolean(St)}});var ft=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return ft},set:function(St){ft=Boolean(St)}});var At=0;Object.defineProperty(this,"posX",{get:function(){return At},set:function(St){isNaN(St)||(At=St)}});var Pt=0;Object.defineProperty(this,"posY",{get:function(){return Pt},set:function(St){isNaN(St)||(Pt=St)}}),Object.defineProperty(this,"margin",{get:function(){return v.margin},set:function(St){var ct;typeof St=="number"?ct=[St,St,St,St]:((ct=new Array(4))[0]=St[0],ct[1]=St.length>=2?St[1]:ct[0],ct[2]=St.length>=3?St[2]:ct[0],ct[3]=St.length>=4?St[3]:ct[1]),v.margin=ct}});var Kt=!1;Object.defineProperty(this,"autoPaging",{get:function(){return Kt},set:function(St){Kt=St}});var $t=0;Object.defineProperty(this,"lastBreak",{get:function(){return $t},set:function(St){$t=St}});var br=[];Object.defineProperty(this,"pageBreaks",{get:function(){return br},set:function(St){br=St}}),Object.defineProperty(this,"ctx",{get:function(){return v},set:function(St){St instanceof w&&(v=St)}}),Object.defineProperty(this,"path",{get:function(){return v.path},set:function(St){v.path=St}});var Gt=[];Object.defineProperty(this,"ctxStack",{get:function(){return Gt},set:function(St){Gt=St}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(St){var ct;ct=T(St),this.ctx.fillStyle=ct.style,this.ctx.isFillTransparent=ct.a===0,this.ctx.fillOpacity=ct.a,this.pdf.setFillColor(ct.r,ct.g,ct.b,{a:ct.a}),this.pdf.setTextColor(ct.r,ct.g,ct.b,{a:ct.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(St){var ct=T(St);this.ctx.strokeStyle=ct.style,this.ctx.isStrokeTransparent=ct.a===0,this.ctx.strokeOpacity=ct.a,ct.a===0?this.pdf.setDrawColor(255,255,255):(ct.a,this.pdf.setDrawColor(ct.r,ct.g,ct.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(St){["butt","round","square"].indexOf(St)!==-1&&(this.ctx.lineCap=St,this.pdf.setLineCap(St))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(St){isNaN(St)||(this.ctx.lineWidth=St,this.pdf.setLineWidth(St))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(St){["bevel","round","miter"].indexOf(St)!==-1&&(this.ctx.lineJoin=St,this.pdf.setLineJoin(St))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(St){isNaN(St)||(this.ctx.miterLimit=St,this.pdf.setMiterLimit(St))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(St){this.ctx.textBaseline=St}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(St){["right","end","center","left","start"].indexOf(St)!==-1&&(this.ctx.textAlign=St)}});var Rr=null;function Mr(St,ct){if(Rr===null){var Or=function(ln){var Wt=[];return Object.keys(ln).forEach(function(Ur){ln[Ur].forEach(function(mn){var en=null;switch(mn){case"bold":en={family:Ur,weight:"bold"};break;case"italic":en={family:Ur,style:"italic"};break;case"bolditalic":en={family:Ur,weight:"bold",style:"italic"};break;case"":case"normal":en={family:Ur}}en!==null&&(en.ref={name:Ur,style:mn},Wt.push(en))})}),Wt}(St.getFontList());Rr=function(ln){for(var Wt={},Ur=0;Ur<ln.length;++Ur){var mn=Fg(ln[Ur]),en=mn.family,On=mn.stretch,Zn=mn.style,ai=mn.weight;Wt[en]=Wt[en]||{},Wt[en][On]=Wt[en][On]||{},Wt[en][On][Zn]=Wt[en][On][Zn]||{},Wt[en][On][Zn][ai]=mn}return Wt}(Or.concat(ct))}return Rr}var Kr=null;Object.defineProperty(this,"fontFaces",{get:function(){return Kr},set:function(St){Rr=null,Kr=St}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(St){var ct;if(this.ctx.font=St,(ct=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(St))!==null){var Or=ct[1],ln=(ct[2],ct[3]),Wt=ct[4],Ur=(ct[5],ct[6]),mn=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(Wt)[2];Wt=Math.floor(mn==="px"?parseFloat(Wt)*this.pdf.internal.scaleFactor:mn==="em"?parseFloat(Wt)*this.pdf.getFontSize():parseFloat(Wt)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(Wt);var en=function(Vr){var wi,xn,si=[],fr=Vr.trim();if(fr==="")return lm;if(fr in tb)return[tb[fr]];for(;fr!=="";){switch(xn=null,wi=(fr=nb(fr)).charAt(0)){case'"':case"'":xn=W7(fr.substring(1),wi);break;default:xn=Z7(fr)}if(xn===null||(si.push(xn[0]),(fr=nb(xn[1]))!==""&&fr.charAt(0)!==","))return lm;fr=fr.replace(/^,/,"")}return si}(Ur);if(this.fontFaces){var On=H7(Mr(this.pdf,this.fontFaces),en.map(function(Vr){return{family:Vr,stretch:"normal",weight:ln,style:Or}}));this.pdf.setFont(On.ref.name,On.ref.style)}else{var Zn="";(ln==="bold"||parseInt(ln,10)>=700||Or==="bold")&&(Zn="bold"),Or==="italic"&&(Zn+="italic"),Zn.length===0&&(Zn="normal");for(var ai="",_i={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},hi=0;hi<en.length;hi++){if(this.pdf.internal.getFont(en[hi],Zn,{noFallback:!0,disableWarning:!0})!==void 0){ai=en[hi];break}if(Zn==="bolditalic"&&this.pdf.internal.getFont(en[hi],"bold",{noFallback:!0,disableWarning:!0})!==void 0)ai=en[hi],Zn="bold";else if(this.pdf.internal.getFont(en[hi],"normal",{noFallback:!0,disableWarning:!0})!==void 0){ai=en[hi],Zn="normal";break}}if(ai===""){for(var yr=0;yr<en.length;yr++)if(_i[en[yr]]){ai=_i[en[yr]];break}}ai=ai===""?"Times":ai,this.pdf.setFont(ai,Zn)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(St){this.ctx.globalCompositeOperation=St}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(St){this.ctx.globalAlpha=St}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(St){this.ctx.lineDashOffset=St,He.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(St){this.ctx.lineDash=St,He.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(St){this.ctx.ignoreClearRect=Boolean(St)}})};E.prototype.setLineDash=function(xe){this.lineDash=xe},E.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},E.prototype.fill=function(){K.call(this,"fill",!1)},E.prototype.stroke=function(){K.call(this,"stroke",!1)},E.prototype.beginPath=function(){this.path=[{type:"begin"}]},E.prototype.moveTo=function(xe,Ne){if(isNaN(xe)||isNaN(Ne))throw Ma.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var Pe=this.ctx.transform.applyToPoint(new c(xe,Ne));this.path.push({type:"mt",x:Pe.x,y:Pe.y}),this.ctx.lastPoint=new c(xe,Ne)},E.prototype.closePath=function(){var xe=new c(0,0),Ne=0;for(Ne=this.path.length-1;Ne!==-1;Ne--)if(this.path[Ne].type==="begin"&&_a(this.path[Ne+1])==="object"&&typeof this.path[Ne+1].x=="number"){xe=new c(this.path[Ne+1].x,this.path[Ne+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new c(xe.x,xe.y)},E.prototype.lineTo=function(xe,Ne){if(isNaN(xe)||isNaN(Ne))throw Ma.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var Pe=this.ctx.transform.applyToPoint(new c(xe,Ne));this.path.push({type:"lt",x:Pe.x,y:Pe.y}),this.ctx.lastPoint=new c(Pe.x,Pe.y)},E.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),K.call(this,null,!0)},E.prototype.quadraticCurveTo=function(xe,Ne,Pe,ft){if(isNaN(Pe)||isNaN(ft)||isNaN(xe)||isNaN(Ne))throw Ma.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var At=this.ctx.transform.applyToPoint(new c(Pe,ft)),Pt=this.ctx.transform.applyToPoint(new c(xe,Ne));this.path.push({type:"qct",x1:Pt.x,y1:Pt.y,x:At.x,y:At.y}),this.ctx.lastPoint=new c(At.x,At.y)},E.prototype.bezierCurveTo=function(xe,Ne,Pe,ft,At,Pt){if(isNaN(At)||isNaN(Pt)||isNaN(xe)||isNaN(Ne)||isNaN(Pe)||isNaN(ft))throw Ma.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var Kt=this.ctx.transform.applyToPoint(new c(At,Pt)),$t=this.ctx.transform.applyToPoint(new c(xe,Ne)),br=this.ctx.transform.applyToPoint(new c(Pe,ft));this.path.push({type:"bct",x1:$t.x,y1:$t.y,x2:br.x,y2:br.y,x:Kt.x,y:Kt.y}),this.ctx.lastPoint=new c(Kt.x,Kt.y)},E.prototype.arc=function(xe,Ne,Pe,ft,At,Pt){if(isNaN(xe)||isNaN(Ne)||isNaN(Pe)||isNaN(ft)||isNaN(At))throw Ma.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(Pt=Boolean(Pt),!this.ctx.transform.isIdentity){var Kt=this.ctx.transform.applyToPoint(new c(xe,Ne));xe=Kt.x,Ne=Kt.y;var $t=this.ctx.transform.applyToPoint(new c(0,Pe)),br=this.ctx.transform.applyToPoint(new c(0,0));Pe=Math.sqrt(Math.pow($t.x-br.x,2)+Math.pow($t.y-br.y,2))}Math.abs(At-ft)>=2*Math.PI&&(ft=0,At=2*Math.PI),this.path.push({type:"arc",x:xe,y:Ne,radius:Pe,startAngle:ft,endAngle:At,counterclockwise:Pt})},E.prototype.arcTo=function(xe,Ne,Pe,ft,At){throw new Error("arcTo not implemented.")},E.prototype.rect=function(xe,Ne,Pe,ft){if(isNaN(xe)||isNaN(Ne)||isNaN(Pe)||isNaN(ft))throw Ma.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(xe,Ne),this.lineTo(xe+Pe,Ne),this.lineTo(xe+Pe,Ne+ft),this.lineTo(xe,Ne+ft),this.lineTo(xe,Ne),this.lineTo(xe+Pe,Ne),this.lineTo(xe,Ne)},E.prototype.fillRect=function(xe,Ne,Pe,ft){if(isNaN(xe)||isNaN(Ne)||isNaN(Pe)||isNaN(ft))throw Ma.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!I.call(this)){var At={};this.lineCap!=="butt"&&(At.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(At.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(xe,Ne,Pe,ft),this.fill(),At.hasOwnProperty("lineCap")&&(this.lineCap=At.lineCap),At.hasOwnProperty("lineJoin")&&(this.lineJoin=At.lineJoin)}},E.prototype.strokeRect=function(xe,Ne,Pe,ft){if(isNaN(xe)||isNaN(Ne)||isNaN(Pe)||isNaN(ft))throw Ma.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");F.call(this)||(this.beginPath(),this.rect(xe,Ne,Pe,ft),this.stroke())},E.prototype.clearRect=function(xe,Ne,Pe,ft){if(isNaN(xe)||isNaN(Ne)||isNaN(Pe)||isNaN(ft))throw Ma.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(xe,Ne,Pe,ft))},E.prototype.save=function(xe){xe=typeof xe!="boolean"||xe;for(var Ne=this.pdf.internal.getCurrentPageInfo().pageNumber,Pe=0;Pe<this.pdf.internal.getNumberOfPages();Pe++)this.pdf.setPage(Pe+1),this.pdf.internal.out("q");if(this.pdf.setPage(Ne),xe){this.ctx.fontSize=this.pdf.internal.getFontSize();var ft=new w(this.ctx);this.ctxStack.push(this.ctx),this.ctx=ft}},E.prototype.restore=function(xe){xe=typeof xe!="boolean"||xe;for(var Ne=this.pdf.internal.getCurrentPageInfo().pageNumber,Pe=0;Pe<this.pdf.internal.getNumberOfPages();Pe++)this.pdf.setPage(Pe+1),this.pdf.internal.out("Q");this.pdf.setPage(Ne),xe&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},E.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var T=function(xe){var Ne,Pe,ft,At;if(xe.isCanvasGradient===!0&&(xe=xe.getColor()),!xe)return{r:0,g:0,b:0,a:0,style:xe};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(xe))Ne=0,Pe=0,ft=0,At=0;else{var Pt=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(xe);if(Pt!==null)Ne=parseInt(Pt[1]),Pe=parseInt(Pt[2]),ft=parseInt(Pt[3]),At=1;else if((Pt=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(xe))!==null)Ne=parseInt(Pt[1]),Pe=parseInt(Pt[2]),ft=parseInt(Pt[3]),At=parseFloat(Pt[4]);else{if(At=1,typeof xe=="string"&&xe.charAt(0)!=="#"){var Kt=new $w(xe);xe=Kt.ok?Kt.toHex():"#000000"}xe.length===4?(Ne=xe.substring(1,2),Ne+=Ne,Pe=xe.substring(2,3),Pe+=Pe,ft=xe.substring(3,4),ft+=ft):(Ne=xe.substring(1,3),Pe=xe.substring(3,5),ft=xe.substring(5,7)),Ne=parseInt(Ne,16),Pe=parseInt(Pe,16),ft=parseInt(ft,16)}}return{r:Ne,g:Pe,b:ft,a:At,style:xe}},I=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},F=function(){return Boolean(this.ctx.isStrokeTransparent||this.globalAlpha==0)};E.prototype.fillText=function(xe,Ne,Pe,ft){if(isNaN(Ne)||isNaN(Pe)||typeof xe!="string")throw Ma.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(ft=isNaN(ft)?void 0:ft,!I.call(this)){var At=ut(this.ctx.transform.rotation),Pt=this.ctx.transform.scaleX;Ie.call(this,{text:xe,x:Ne,y:Pe,scale:Pt,angle:At,align:this.textAlign,maxWidth:ft})}},E.prototype.strokeText=function(xe,Ne,Pe,ft){if(isNaN(Ne)||isNaN(Pe)||typeof xe!="string")throw Ma.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!F.call(this)){ft=isNaN(ft)?void 0:ft;var At=ut(this.ctx.transform.rotation),Pt=this.ctx.transform.scaleX;Ie.call(this,{text:xe,x:Ne,y:Pe,scale:Pt,renderingMode:"stroke",angle:At,align:this.textAlign,maxWidth:ft})}},E.prototype.measureText=function(xe){if(typeof xe!="string")throw Ma.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var Ne=this.pdf,Pe=this.pdf.internal.scaleFactor,ft=Ne.internal.getFontSize(),At=Ne.getStringUnitWidth(xe)*ft/Ne.internal.scaleFactor,Pt=function(Kt){var $t=(Kt=Kt||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return $t}}),this};return new Pt({width:At*=Math.round(96*Pe/72*1e4)/1e4})},E.prototype.scale=function(xe,Ne){if(isNaN(xe)||isNaN(Ne))throw Ma.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var Pe=new h(xe,0,0,Ne,0,0);this.ctx.transform=this.ctx.transform.multiply(Pe)},E.prototype.rotate=function(xe){if(isNaN(xe))throw Ma.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var Ne=new h(Math.cos(xe),Math.sin(xe),-Math.sin(xe),Math.cos(xe),0,0);this.ctx.transform=this.ctx.transform.multiply(Ne)},E.prototype.translate=function(xe,Ne){if(isNaN(xe)||isNaN(Ne))throw Ma.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var Pe=new h(1,0,0,1,xe,Ne);this.ctx.transform=this.ctx.transform.multiply(Pe)},E.prototype.transform=function(xe,Ne,Pe,ft,At,Pt){if(isNaN(xe)||isNaN(Ne)||isNaN(Pe)||isNaN(ft)||isNaN(At)||isNaN(Pt))throw Ma.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var Kt=new h(xe,Ne,Pe,ft,At,Pt);this.ctx.transform=this.ctx.transform.multiply(Kt)},E.prototype.setTransform=function(xe,Ne,Pe,ft,At,Pt){xe=isNaN(xe)?1:xe,Ne=isNaN(Ne)?0:Ne,Pe=isNaN(Pe)?0:Pe,ft=isNaN(ft)?1:ft,At=isNaN(At)?0:At,Pt=isNaN(Pt)?0:Pt,this.ctx.transform=new h(xe,Ne,Pe,ft,At,Pt)};var U=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};E.prototype.drawImage=function(xe,Ne,Pe,ft,At,Pt,Kt,$t,br){var Gt=this.pdf.getImageProperties(xe),Rr=1,Mr=1,Kr=1,St=1;ft!==void 0&&$t!==void 0&&(Kr=$t/ft,St=br/At,Rr=Gt.width/ft*$t/ft,Mr=Gt.height/At*br/At),Pt===void 0&&(Pt=Ne,Kt=Pe,Ne=0,Pe=0),ft!==void 0&&$t===void 0&&($t=ft,br=At),ft===void 0&&$t===void 0&&($t=Gt.width,br=Gt.height);for(var ct,Or=this.ctx.transform.decompose(),ln=ut(Or.rotate.shx),Wt=new h,Ur=(Wt=(Wt=(Wt=Wt.multiply(Or.translate)).multiply(Or.skew)).multiply(Or.scale)).applyToRectangle(new l(Pt-Ne*Kr,Kt-Pe*St,ft*Rr,At*Mr)),mn=G.call(this,Ur),en=[],On=0;On<mn.length;On+=1)en.indexOf(mn[On])===-1&&en.push(mn[On]);if(ee(en),this.autoPaging)for(var Zn=en[0],ai=en[en.length-1],_i=Zn;_i<ai+1;_i++){this.pdf.setPage(_i);var hi=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],yr=_i===1?this.posY+this.margin[0]:this.margin[0],Vr=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],wi=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],xn=_i===1?0:Vr+(_i-2)*wi;if(this.ctx.clip_path.length!==0){var si=this.path;ct=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=X(ct,this.posX+this.margin[3],-xn+yr+this.ctx.prevPageLastElemOffset),se.call(this,"fill",!0),this.path=si}var fr=JSON.parse(JSON.stringify(Ur));fr=X([fr],this.posX+this.margin[3],-xn+yr+this.ctx.prevPageLastElemOffset)[0];var or=(_i>Zn||_i<ai)&&U.call(this);or&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],hi,wi,null).clip().discardPath()),this.pdf.addImage(xe,"JPEG",fr.x,fr.y,fr.w,fr.h,null,null,ln),or&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(xe,"JPEG",Ur.x,Ur.y,Ur.w,Ur.h,null,null,ln)};var G=function(xe,Ne,Pe){var ft=[];Ne=Ne||this.pdf.internal.pageSize.width,Pe=Pe||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var At=this.posY+this.ctx.prevPageLastElemOffset;switch(xe.type){default:case"mt":case"lt":ft.push(Math.floor((xe.y+At)/Pe)+1);break;case"arc":ft.push(Math.floor((xe.y+At-xe.radius)/Pe)+1),ft.push(Math.floor((xe.y+At+xe.radius)/Pe)+1);break;case"qct":var Pt=bt(this.ctx.lastPoint.x,this.ctx.lastPoint.y,xe.x1,xe.y1,xe.x,xe.y);ft.push(Math.floor((Pt.y+At)/Pe)+1),ft.push(Math.floor((Pt.y+Pt.h+At)/Pe)+1);break;case"bct":var Kt=Ze(this.ctx.lastPoint.x,this.ctx.lastPoint.y,xe.x1,xe.y1,xe.x2,xe.y2,xe.x,xe.y);ft.push(Math.floor((Kt.y+At)/Pe)+1),ft.push(Math.floor((Kt.y+Kt.h+At)/Pe)+1);break;case"rect":ft.push(Math.floor((xe.y+At)/Pe)+1),ft.push(Math.floor((xe.y+xe.h+At)/Pe)+1)}for(var $t=0;$t<ft.length;$t+=1)for(;this.pdf.internal.getNumberOfPages()<ft[$t];)H.call(this);return ft},H=function(){var xe=this.fillStyle,Ne=this.strokeStyle,Pe=this.font,ft=this.lineCap,At=this.lineWidth,Pt=this.lineJoin;this.pdf.addPage(),this.fillStyle=xe,this.strokeStyle=Ne,this.font=Pe,this.lineCap=ft,this.lineWidth=At,this.lineJoin=Pt},X=function(xe,Ne,Pe){for(var ft=0;ft<xe.length;ft++)switch(xe[ft].type){case"bct":xe[ft].x2+=Ne,xe[ft].y2+=Pe;case"qct":xe[ft].x1+=Ne,xe[ft].y1+=Pe;case"mt":case"lt":case"arc":default:xe[ft].x+=Ne,xe[ft].y+=Pe}return xe},ee=function(xe){return xe.sort(function(Ne,Pe){return Ne-Pe})},K=function(xe,Ne){for(var Pe,ft,At=this.fillStyle,Pt=this.strokeStyle,Kt=this.lineCap,$t=this.lineWidth,br=Math.abs($t*this.ctx.transform.scaleX),Gt=this.lineJoin,Rr=JSON.parse(JSON.stringify(this.path)),Mr=JSON.parse(JSON.stringify(this.path)),Kr=[],St=0;St<Mr.length;St++)if(Mr[St].x!==void 0)for(var ct=G.call(this,Mr[St]),Or=0;Or<ct.length;Or+=1)Kr.indexOf(ct[Or])===-1&&Kr.push(ct[Or]);for(var ln=0;ln<Kr.length;ln++)for(;this.pdf.internal.getNumberOfPages()<Kr[ln];)H.call(this);if(ee(Kr),this.autoPaging)for(var Wt=Kr[0],Ur=Kr[Kr.length-1],mn=Wt;mn<Ur+1;mn++){this.pdf.setPage(mn),this.fillStyle=At,this.strokeStyle=Pt,this.lineCap=Kt,this.lineWidth=br,this.lineJoin=Gt;var en=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],On=mn===1?this.posY+this.margin[0]:this.margin[0],Zn=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],ai=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],_i=mn===1?0:Zn+(mn-2)*ai;if(this.ctx.clip_path.length!==0){var hi=this.path;Pe=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=X(Pe,this.posX+this.margin[3],-_i+On+this.ctx.prevPageLastElemOffset),se.call(this,xe,!0),this.path=hi}if(ft=JSON.parse(JSON.stringify(Rr)),this.path=X(ft,this.posX+this.margin[3],-_i+On+this.ctx.prevPageLastElemOffset),Ne===!1||mn===0){var yr=(mn>Wt||mn<Ur)&&U.call(this);yr&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],en,ai,null).clip().discardPath()),se.call(this,xe,Ne),yr&&this.pdf.restoreGraphicsState()}this.lineWidth=$t}else this.lineWidth=br,se.call(this,xe,Ne),this.lineWidth=$t;this.path=Rr},se=function(xe,Ne){if((xe!=="stroke"||Ne||!F.call(this))&&(xe==="stroke"||Ne||!I.call(this))){for(var Pe,ft,At=[],Pt=this.path,Kt=0;Kt<Pt.length;Kt++){var $t=Pt[Kt];switch($t.type){case"begin":At.push({begin:!0});break;case"close":At.push({close:!0});break;case"mt":At.push({start:$t,deltas:[],abs:[]});break;case"lt":var br=At.length;if(Pt[Kt-1]&&!isNaN(Pt[Kt-1].x)&&(Pe=[$t.x-Pt[Kt-1].x,$t.y-Pt[Kt-1].y],br>0)){for(;br>=0;br--)if(At[br-1].close!==!0&&At[br-1].begin!==!0){At[br-1].deltas.push(Pe),At[br-1].abs.push($t);break}}break;case"bct":Pe=[$t.x1-Pt[Kt-1].x,$t.y1-Pt[Kt-1].y,$t.x2-Pt[Kt-1].x,$t.y2-Pt[Kt-1].y,$t.x-Pt[Kt-1].x,$t.y-Pt[Kt-1].y],At[At.length-1].deltas.push(Pe);break;case"qct":var Gt=Pt[Kt-1].x+2/3*($t.x1-Pt[Kt-1].x),Rr=Pt[Kt-1].y+2/3*($t.y1-Pt[Kt-1].y),Mr=$t.x+2/3*($t.x1-$t.x),Kr=$t.y+2/3*($t.y1-$t.y),St=$t.x,ct=$t.y;Pe=[Gt-Pt[Kt-1].x,Rr-Pt[Kt-1].y,Mr-Pt[Kt-1].x,Kr-Pt[Kt-1].y,St-Pt[Kt-1].x,ct-Pt[Kt-1].y],At[At.length-1].deltas.push(Pe);break;case"arc":At.push({deltas:[],abs:[],arc:!0}),Array.isArray(At[At.length-1].abs)&&At[At.length-1].abs.push($t)}}ft=Ne?null:xe==="stroke"?"stroke":"fill";for(var Or=!1,ln=0;ln<At.length;ln++)if(At[ln].arc)for(var Wt=At[ln].abs,Ur=0;Ur<Wt.length;Ur++){var mn=Wt[Ur];mn.type==="arc"?pe.call(this,mn.x,mn.y,mn.radius,mn.startAngle,mn.endAngle,mn.counterclockwise,void 0,Ne,!Or):Fe.call(this,mn.x,mn.y),Or=!0}else if(At[ln].close===!0)this.pdf.internal.out("h"),Or=!1;else if(At[ln].begin!==!0){var en=At[ln].start.x,On=At[ln].start.y;ot.call(this,At[ln].deltas,en,On),Or=!0}ft&&Ge.call(this,ft),Ne&&We.call(this)}},ce=function(xe){var Ne=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,Pe=Ne*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return xe-Pe;case"top":return xe+Ne-Pe;case"hanging":return xe+Ne-2*Pe;case"middle":return xe+Ne/2-Pe;case"ideographic":return xe;case"alphabetic":default:return xe}},_e=function(xe){return xe+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};E.prototype.createLinearGradient=function(){var xe=function(){};return xe.colorStops=[],xe.addColorStop=function(Ne,Pe){this.colorStops.push([Ne,Pe])},xe.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},xe.isCanvasGradient=!0,xe},E.prototype.createPattern=function(){return this.createLinearGradient()},E.prototype.createRadialGradient=function(){return this.createLinearGradient()};var pe=function(xe,Ne,Pe,ft,At,Pt,Kt,$t,br){for(var Gt=ht.call(this,Pe,ft,At,Pt),Rr=0;Rr<Gt.length;Rr++){var Mr=Gt[Rr];Rr===0&&(br?Ae.call(this,Mr.x1+xe,Mr.y1+Ne):Fe.call(this,Mr.x1+xe,Mr.y1+Ne)),_t.call(this,xe,Ne,Mr.x2,Mr.y2,Mr.x3,Mr.y3,Mr.x4,Mr.y4)}$t?We.call(this):Ge.call(this,Kt)},Ge=function(xe){switch(xe){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},We=function(){this.pdf.clip(),this.pdf.discardPath()},Ae=function(xe,Ne){this.pdf.internal.out(r(xe)+" "+n(Ne)+" m")},Ie=function(xe){var Ne;switch(xe.align){case"right":case"end":Ne="right";break;case"center":Ne="center";break;case"left":case"start":default:Ne="left"}var Pe=this.pdf.getTextDimensions(xe.text),ft=ce.call(this,xe.y),At=_e.call(this,ft)-Pe.h,Pt=this.ctx.transform.applyToPoint(new c(xe.x,ft)),Kt=this.ctx.transform.decompose(),$t=new h;$t=($t=($t=$t.multiply(Kt.translate)).multiply(Kt.skew)).multiply(Kt.scale);for(var br,Gt,Rr,Mr=this.ctx.transform.applyToRectangle(new l(xe.x,ft,Pe.w,Pe.h)),Kr=$t.applyToRectangle(new l(xe.x,At,Pe.w,Pe.h)),St=G.call(this,Kr),ct=[],Or=0;Or<St.length;Or+=1)ct.indexOf(St[Or])===-1&&ct.push(St[Or]);if(ee(ct),this.autoPaging)for(var ln=ct[0],Wt=ct[ct.length-1],Ur=ln;Ur<Wt+1;Ur++){this.pdf.setPage(Ur);var mn=Ur===1?this.posY+this.margin[0]:this.margin[0],en=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],On=this.pdf.internal.pageSize.height-this.margin[2],Zn=On-this.margin[0],ai=this.pdf.internal.pageSize.width-this.margin[1],_i=ai-this.margin[3],hi=Ur===1?0:en+(Ur-2)*Zn;if(this.ctx.clip_path.length!==0){var yr=this.path;br=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=X(br,this.posX+this.margin[3],-1*hi+mn),se.call(this,"fill",!0),this.path=yr}var Vr=X([JSON.parse(JSON.stringify(Kr))],this.posX+this.margin[3],-hi+mn+this.ctx.prevPageLastElemOffset)[0];xe.scale>=.01&&(Gt=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Gt*xe.scale),Rr=this.lineWidth,this.lineWidth=Rr*xe.scale);var wi=this.autoPaging!=="text";if(wi||Vr.y+Vr.h<=On){if(wi||Vr.y>=mn&&Vr.x<=ai){var xn=wi?xe.text:this.pdf.splitTextToSize(xe.text,xe.maxWidth||ai-Vr.x)[0],si=X([JSON.parse(JSON.stringify(Mr))],this.posX+this.margin[3],-hi+mn+this.ctx.prevPageLastElemOffset)[0],fr=wi&&(Ur>ln||Ur<Wt)&&U.call(this);fr&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],_i,Zn,null).clip().discardPath()),this.pdf.text(xn,si.x,si.y,{angle:xe.angle,align:Ne,renderingMode:xe.renderingMode}),fr&&this.pdf.restoreGraphicsState()}}else Vr.y<On&&(this.ctx.prevPageLastElemOffset+=On-Vr.y);xe.scale>=.01&&(this.pdf.setFontSize(Gt),this.lineWidth=Rr)}else xe.scale>=.01&&(Gt=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Gt*xe.scale),Rr=this.lineWidth,this.lineWidth=Rr*xe.scale),this.pdf.text(xe.text,Pt.x+this.posX,Pt.y+this.posY,{angle:xe.angle,align:Ne,renderingMode:xe.renderingMode,maxWidth:xe.maxWidth}),xe.scale>=.01&&(this.pdf.setFontSize(Gt),this.lineWidth=Rr)},Fe=function(xe,Ne,Pe,ft){Pe=Pe||0,ft=ft||0,this.pdf.internal.out(r(xe+Pe)+" "+n(Ne+ft)+" l")},ot=function(xe,Ne,Pe){return this.pdf.lines(xe,Ne,Pe,null,null)},_t=function(xe,Ne,Pe,ft,At,Pt,Kt,$t){this.pdf.internal.out([t(o(Pe+xe)),t(u(ft+Ne)),t(o(At+xe)),t(u(Pt+Ne)),t(o(Kt+xe)),t(u($t+Ne)),"c"].join(" "))},ht=function(xe,Ne,Pe,ft){for(var At=2*Math.PI,Pt=Math.PI/2;Ne>Pe;)Ne-=At;var Kt=Math.abs(Pe-Ne);Kt<At&&ft&&(Kt=At-Kt);for(var $t=[],br=ft?-1:1,Gt=Ne;Kt>1e-5;){var Rr=Gt+br*Math.min(Kt,Pt);$t.push($e.call(this,xe,Gt,Rr)),Kt-=Math.abs(Rr-Gt),Gt=Rr}return $t},$e=function(xe,Ne,Pe){var ft=(Pe-Ne)/2,At=xe*Math.cos(ft),Pt=xe*Math.sin(ft),Kt=At,$t=-Pt,br=Kt*Kt+$t*$t,Gt=br+Kt*At+$t*Pt,Rr=4/3*(Math.sqrt(2*br*Gt)-Gt)/(Kt*Pt-$t*At),Mr=Kt-Rr*$t,Kr=$t+Rr*Kt,St=Mr,ct=-Kr,Or=ft+Ne,ln=Math.cos(Or),Wt=Math.sin(Or);return{x1:xe*Math.cos(Ne),y1:xe*Math.sin(Ne),x2:Mr*ln-Kr*Wt,y2:Mr*Wt+Kr*ln,x3:St*ln-ct*Wt,y3:St*Wt+ct*ln,x4:xe*Math.cos(Pe),y4:xe*Math.sin(Pe)}},ut=function(xe){return 180*xe/Math.PI},bt=function(xe,Ne,Pe,ft,At,Pt){var Kt=xe+.5*(Pe-xe),$t=Ne+.5*(ft-Ne),br=At+.5*(Pe-At),Gt=Pt+.5*(ft-Pt),Rr=Math.min(xe,At,Kt,br),Mr=Math.max(xe,At,Kt,br),Kr=Math.min(Ne,Pt,$t,Gt),St=Math.max(Ne,Pt,$t,Gt);return new l(Rr,Kr,Mr-Rr,St-Kr)},Ze=function(xe,Ne,Pe,ft,At,Pt,Kt,$t){var br,Gt,Rr,Mr,Kr,St,ct,Or,ln,Wt,Ur,mn,en,On,Zn=Pe-xe,ai=ft-Ne,_i=At-Pe,hi=Pt-ft,yr=Kt-At,Vr=$t-Pt;for(Gt=0;Gt<41;Gt++)ln=(ct=(Rr=xe+(br=Gt/40)*Zn)+br*((Kr=Pe+br*_i)-Rr))+br*(Kr+br*(At+br*yr-Kr)-ct),Wt=(Or=(Mr=Ne+br*ai)+br*((St=ft+br*hi)-Mr))+br*(St+br*(Pt+br*Vr-St)-Or),Gt==0?(Ur=ln,mn=Wt,en=ln,On=Wt):(Ur=Math.min(Ur,ln),mn=Math.min(mn,Wt),en=Math.max(en,ln),On=Math.max(On,Wt));return new l(Math.round(Ur),Math.round(mn),Math.round(en-Ur),Math.round(On-mn))},He=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var xe,Ne,Pe=(xe=this.ctx.lineDash,Ne=this.ctx.lineDashOffset,JSON.stringify({lineDash:xe,lineDashOffset:Ne}));this.prevLineDash!==Pe&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=Pe)}}})(Zi.API),function(e){var t=function(u){var c,l,h,v,w,E,T,I,F,U;for(l=[],h=0,v=(u+=c="\0\0\0\0".slice(u.length%4||4)).length;v>h;h+=4)(w=(u.charCodeAt(h)<<24)+(u.charCodeAt(h+1)<<16)+(u.charCodeAt(h+2)<<8)+u.charCodeAt(h+3))!==0?(E=(w=((w=((w=((w=(w-(U=w%85))/85)-(F=w%85))/85)-(I=w%85))/85)-(T=w%85))/85)%85,l.push(E+33,T+33,I+33,F+33,U+33)):l.push(122);return function(G,H){for(var X=H;X>0;X--)G.pop()}(l,c.length),String.fromCharCode.apply(String,l)+"~>"},r=function(u){var c,l,h,v,w,E=String,T="length",I=255,F="charCodeAt",U="slice",G="replace";for(u[U](-2),u=u[U](0,-2)[G](/\s/g,"")[G]("z","!!!!!"),h=[],v=0,w=(u+=c="uuuuu"[U](u[T]%5||5))[T];w>v;v+=5)l=52200625*(u[F](v)-33)+614125*(u[F](v+1)-33)+7225*(u[F](v+2)-33)+85*(u[F](v+3)-33)+(u[F](v+4)-33),h.push(I&l>>24,I&l>>16,I&l>>8,I&l);return function(H,X){for(var ee=X;ee>0;ee--)H.pop()}(h,c[T]),E.fromCharCode.apply(E,h)},n=function(u){var c=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((u=u.replace(/\s/g,"")).indexOf(">")!==-1&&(u=u.substr(0,u.indexOf(">"))),u.length%2&&(u+="0"),c.test(u)===!1)return"";for(var l="",h=0;h<u.length;h+=2)l+=String.fromCharCode("0x"+(u[h]+u[h+1]));return l},o=function(u){for(var c=new Uint8Array(u.length),l=u.length;l--;)c[l]=u.charCodeAt(l);return u=(c=Mg(c)).reduce(function(h,v){return h+String.fromCharCode(v)},"")};e.processDataByFilters=function(u,c){var l=0,h=u||"",v=[];for(typeof(c=c||[])=="string"&&(c=[c]),l=0;l<c.length;l+=1)switch(c[l]){case"ASCII85Decode":case"/ASCII85Decode":h=r(h),v.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":h=t(h),v.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":h=n(h),v.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":h=h.split("").map(function(w){return("0"+w.charCodeAt().toString(16)).slice(-2)}).join("")+">",v.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":h=o(h),v.push("/FlateDecode");break;default:throw new Error('The filter: "'+c[l]+'" is not implemented')}return{data:h,reverseChain:v.reverse().join(" ")}}}(Zi.API),function(e){e.loadFile=function(t,r,n){return function(o,u,c){u=u!==!1,c=typeof c=="function"?c:function(){};var l=void 0;try{l=function(h,v,w){var E=new XMLHttpRequest,T=0,I=function(F){var U=F.length,G=[],H=String.fromCharCode;for(T=0;T<U;T+=1)G.push(H(255&F.charCodeAt(T)));return G.join("")};if(E.open("GET",h,!v),E.overrideMimeType("text/plain; charset=x-user-defined"),v===!1&&(E.onload=function(){E.status===200?w(I(this.responseText)):w(void 0)}),E.send(null),v&&E.status===200)return I(E.responseText)}(o,u,c)}catch{}return l}(t,r,n)},e.loadImageFile=e.loadFile}(Zi.API),function(e){function t(){return(eo.html2canvas?Promise.resolve(eo.html2canvas):td(()=>import("./html2canvas.esm-0a33ed42.js"),[],import.meta.url)).catch(function(c){return Promise.reject(new Error("Could not load html2canvas: "+c))}).then(function(c){return c.default?c.default:c})}function r(){return(eo.DOMPurify?Promise.resolve(eo.DOMPurify):td(()=>import("./purify.es-075a2866.js"),[],import.meta.url)).catch(function(c){return Promise.reject(new Error("Could not load dompurify: "+c))}).then(function(c){return c.default?c.default:c})}var n=function(c){var l=_a(c);return l==="undefined"?"undefined":l==="string"||c instanceof String?"string":l==="number"||c instanceof Number?"number":l==="function"||c instanceof Function?"function":c&&c.constructor===Array?"array":c&&c.nodeType===1?"element":l==="object"?"object":"unknown"},o=function(c,l){var h=document.createElement(c);for(var v in l.className&&(h.className=l.className),l.innerHTML&&l.dompurify&&(h.innerHTML=l.dompurify.sanitize(l.innerHTML)),l.style)h.style[v]=l.style[v];return h},u=function c(l){var h=Object.assign(c.convert(Promise.resolve()),JSON.parse(JSON.stringify(c.template))),v=c.convert(Promise.resolve(),h);return v=(v=v.setProgress(1,c,1,[c])).set(l)};(u.prototype=Object.create(Promise.prototype)).constructor=u,u.convert=function(c,l){return c.__proto__=l||u.prototype,c},u.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},u.prototype.from=function(c,l){return this.then(function(){switch(l=l||function(h){switch(n(h)){case"string":return"string";case"element":return h.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(c)){case"string":return this.then(r).then(function(h){return this.set({src:o("div",{innerHTML:c,dompurify:h})})});case"element":return this.set({src:c});case"canvas":return this.set({canvas:c});case"img":return this.set({img:c});default:return this.error("Unknown source type.")}})},u.prototype.to=function(c){switch(c){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},u.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var c={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},l=function h(v,w){for(var E=v.nodeType===3?document.createTextNode(v.nodeValue):v.cloneNode(!1),T=v.firstChild;T;T=T.nextSibling)w!==!0&&T.nodeType===1&&T.nodeName==="SCRIPT"||E.appendChild(h(T,w));return v.nodeType===1&&(v.nodeName==="CANVAS"?(E.width=v.width,E.height=v.height,E.getContext("2d").drawImage(v,0,0)):v.nodeName!=="TEXTAREA"&&v.nodeName!=="SELECT"||(E.value=v.value),E.addEventListener("load",function(){E.scrollTop=v.scrollTop,E.scrollLeft=v.scrollLeft},!0)),E}(this.prop.src,this.opt.html2canvas.javascriptEnabled);l.tagName==="BODY"&&(c.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=o("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=o("div",{className:"html2pdf__container",style:c}),this.prop.container.appendChild(l),this.prop.container.firstChild.appendChild(o("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},u.prototype.toCanvas=function(){var c=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(c).then(t).then(function(l){var h=Object.assign({},this.opt.html2canvas);return delete h.onrendered,l(this.prop.container,h)}).then(function(l){(this.opt.html2canvas.onrendered||function(){})(l),this.prop.canvas=l,document.body.removeChild(this.prop.overlay)})},u.prototype.toContext2d=function(){var c=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(c).then(t).then(function(l){var h=this.opt.jsPDF,v=this.opt.fontFaces,w=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,E=Object.assign({async:!0,allowTaint:!0,scale:w,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete E.onrendered,h.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,h.context2d.posX=this.opt.x,h.context2d.posY=this.opt.y,h.context2d.margin=this.opt.margin,h.context2d.fontFaces=v,v)for(var T=0;T<v.length;++T){var I=v[T],F=I.src.find(function(U){return U.format==="truetype"});F&&h.addFont(F.url,I.ref.name,I.ref.style)}return E.windowHeight=E.windowHeight||0,E.windowHeight=E.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):E.windowHeight,h.context2d.save(!0),l(this.prop.container,E)}).then(function(l){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(l),this.prop.canvas=l,document.body.removeChild(this.prop.overlay)})},u.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var c=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=c})},u.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},u.prototype.output=function(c,l,h){return(h=h||"pdf").toLowerCase()==="img"||h.toLowerCase()==="image"?this.outputImg(c,l):this.outputPdf(c,l)},u.prototype.outputPdf=function(c,l){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(c,l)})},u.prototype.outputImg=function(c){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(c){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+c+'" is not supported.'}})},u.prototype.save=function(c){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(c?{filename:c}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},u.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},u.prototype.set=function(c){if(n(c)!=="object")return this;var l=Object.keys(c||{}).map(function(h){if(h in u.template.prop)return function(){this.prop[h]=c[h]};switch(h){case"margin":return this.setMargin.bind(this,c.margin);case"jsPDF":return function(){return this.opt.jsPDF=c.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,c.pageSize);default:return function(){this.opt[h]=c[h]}}},this);return this.then(function(){return this.thenList(l)})},u.prototype.get=function(c,l){return this.then(function(){var h=c in u.template.prop?this.prop[c]:this.opt[c];return l?l(h):h})},u.prototype.setMargin=function(c){return this.then(function(){switch(n(c)){case"number":c=[c,c,c,c];case"array":if(c.length===2&&(c=[c[0],c[1],c[0],c[1]]),c.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=c}).then(this.setPageSize)},u.prototype.setPageSize=function(c){function l(h,v){return Math.floor(h*v/72*96)}return this.then(function(){(c=c||Zi.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(c.inner={width:c.width-this.opt.margin[1]-this.opt.margin[3],height:c.height-this.opt.margin[0]-this.opt.margin[2]},c.inner.px={width:l(c.inner.width,c.k),height:l(c.inner.height,c.k)},c.inner.ratio=c.inner.height/c.inner.width),this.prop.pageSize=c})},u.prototype.setProgress=function(c,l,h,v){return c!=null&&(this.progress.val=c),l!=null&&(this.progress.state=l),h!=null&&(this.progress.n=h),v!=null&&(this.progress.stack=v),this.progress.ratio=this.progress.val/this.progress.state,this},u.prototype.updateProgress=function(c,l,h,v){return this.setProgress(c?this.progress.val+c:null,l||null,h?this.progress.n+h:null,v?this.progress.stack.concat(v):null)},u.prototype.then=function(c,l){var h=this;return this.thenCore(c,l,function(v,w){return h.updateProgress(null,null,1,[v]),Promise.prototype.then.call(this,function(E){return h.updateProgress(null,v),E}).then(v,w).then(function(E){return h.updateProgress(1),E})})},u.prototype.thenCore=function(c,l,h){h=h||Promise.prototype.then,c&&(c=c.bind(this)),l&&(l=l.bind(this));var v=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?this:u.convert(Object.assign({},this),Promise.prototype),w=h.call(v,c,l);return u.convert(w,this.__proto__)},u.prototype.thenExternal=function(c,l){return Promise.prototype.then.call(this,c,l)},u.prototype.thenList=function(c){var l=this;return c.forEach(function(h){l=l.thenCore(h)}),l},u.prototype.catch=function(c){c&&(c=c.bind(this));var l=Promise.prototype.catch.call(this,c);return u.convert(l,this)},u.prototype.catchExternal=function(c){return Promise.prototype.catch.call(this,c)},u.prototype.error=function(c){return this.then(function(){throw new Error(c)})},u.prototype.using=u.prototype.set,u.prototype.saveAs=u.prototype.save,u.prototype.export=u.prototype.output,u.prototype.run=u.prototype.then,Zi.getPageSize=function(c,l,h){if(_a(c)==="object"){var v=c;c=v.orientation,l=v.unit||l,h=v.format||h}l=l||"mm",h=h||"a4",c=(""+(c||"P")).toLowerCase();var w,E=(""+h).toLowerCase(),T={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(l){case"pt":w=1;break;case"mm":w=72/25.4;break;case"cm":w=72/2.54;break;case"in":w=72;break;case"px":w=.75;break;case"pc":case"em":w=12;break;case"ex":w=6;break;default:throw"Invalid unit: "+l}var I,F=0,U=0;if(T.hasOwnProperty(E))F=T[E][1]/w,U=T[E][0]/w;else try{F=h[1],U=h[0]}catch{throw new Error("Invalid format: "+h)}if(c==="p"||c==="portrait")c="p",U>F&&(I=U,U=F,F=I);else{if(c!=="l"&&c!=="landscape")throw"Invalid orientation: "+c;c="l",F>U&&(I=U,U=F,F=I)}return{width:U,height:F,unit:l,k:w,orientation:c}},e.html=function(c,l){(l=l||{}).callback=l.callback||function(){},l.html2canvas=l.html2canvas||{},l.html2canvas.canvas=l.html2canvas.canvas||this.canvas,l.jsPDF=l.jsPDF||this,l.fontFaces=l.fontFaces?l.fontFaces.map(Fg):null;var h=new u(l);return l.worker?h:h.from(c).doCallback()}}(Zi.API),Zi.API.addJS=function(e){return ob=e,this.internal.events.subscribe("postPutResources",function(){r1=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(r1+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),ib=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+ob+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){r1!==void 0&&ib!==void 0&&this.internal.out("/Names <</JavaScript "+r1+" 0 R>>")}),this},function(e){var t;e.events.push(["postPutResources",function(){var r=this,n=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var o=r.outline.render().split(/\r\n/),u=0;u<o.length;u++){var c=o[u],l=n.exec(c);if(l!=null){var h=l[1];r.internal.newObjectDeferredBegin(h,!1)}r.internal.write(c)}if(this.outline.createNamedDestinations){var v=this.internal.pages.length,w=[];for(u=0;u<v;u++){var E=r.internal.newObject();w.push(E);var T=r.internal.getPageInfo(u+1);r.internal.write("<< /D["+T.objId+" 0 R /XYZ null null null]>> endobj")}var I=r.internal.newObject();for(r.internal.write("<< /Names [ "),u=0;u<w.length;u++)r.internal.write("(page_"+(u+1)+")"+w[u]+" 0 R");r.internal.write(" ] >>","endobj"),t=r.internal.newObject(),r.internal.write("<< /Dests "+I+" 0 R"),r.internal.write(">>","endobj")}}]),e.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+t+" 0 R"))}]),e.events.push(["initialized",function(){var r=this;r.outline={createNamedDestinations:!1,root:{children:[]}},r.outline.add=function(n,o,u){var c={title:o,options:u,children:[]};return n==null&&(n=this.root),n.children.push(c),c},r.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=r,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},r.outline.genIds_r=function(n){n.id=r.internal.newObjectDeferred();for(var o=0;o<n.children.length;o++)this.genIds_r(n.children[o])},r.outline.renderRoot=function(n){this.objStart(n),this.line("/Type /Outlines"),n.children.length>0&&(this.line("/First "+this.makeRef(n.children[0])),this.line("/Last "+this.makeRef(n.children[n.children.length-1]))),this.line("/Count "+this.count_r({count:0},n)),this.objEnd()},r.outline.renderItems=function(n){for(var o=this.ctx.pdf.internal.getVerticalCoordinateString,u=0;u<n.children.length;u++){var c=n.children[u];this.objStart(c),this.line("/Title "+this.makeString(c.title)),this.line("/Parent "+this.makeRef(n)),u>0&&this.line("/Prev "+this.makeRef(n.children[u-1])),u<n.children.length-1&&this.line("/Next "+this.makeRef(n.children[u+1])),c.children.length>0&&(this.line("/First "+this.makeRef(c.children[0])),this.line("/Last "+this.makeRef(c.children[c.children.length-1])));var l=this.count=this.count_r({count:0},c);if(l>0&&this.line("/Count "+l),c.options&&c.options.pageNumber){var h=r.internal.getPageInfo(c.options.pageNumber);this.line("/Dest ["+h.objId+" 0 R /XYZ 0 "+o(0)+" 0]")}this.objEnd()}for(var v=0;v<n.children.length;v++)this.renderItems(n.children[v])},r.outline.line=function(n){this.ctx.val+=n+`\r
`},r.outline.makeRef=function(n){return n.id+" 0 R"},r.outline.makeString=function(n){return"("+r.internal.pdfEscape(n)+")"},r.outline.objStart=function(n){this.ctx.val+=`\r
`+n.id+` 0 obj\r
<<\r
`},r.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},r.outline.count_r=function(n,o){for(var u=0;u<o.children.length;u++)n.count++,this.count_r(n,o.children[u]);return n.count}}])}(Zi.API),function(e){var t=[192,193,194,195,196,197,198,199];e.processJPEG=function(r,n,o,u,c,l){var h,v=this.decode.DCT_DECODE,w=null;if(typeof r=="string"||this.__addimage__.isArrayBuffer(r)||this.__addimage__.isArrayBufferView(r)){switch(r=c||r,r=this.__addimage__.isArrayBuffer(r)?new Uint8Array(r):r,(h=function(E){for(var T,I=256*E.charCodeAt(4)+E.charCodeAt(5),F=E.length,U={width:0,height:0,numcomponents:1},G=4;G<F;G+=2){if(G+=I,t.indexOf(E.charCodeAt(G+1))!==-1){T=256*E.charCodeAt(G+5)+E.charCodeAt(G+6),U={width:256*E.charCodeAt(G+7)+E.charCodeAt(G+8),height:T,numcomponents:E.charCodeAt(G+9)};break}I=256*E.charCodeAt(G+2)+E.charCodeAt(G+3)}return U}(r=this.__addimage__.isArrayBufferView(r)?this.__addimage__.arrayBufferToBinaryString(r):r)).numcomponents){case 1:l=this.color_spaces.DEVICE_GRAY;break;case 4:l=this.color_spaces.DEVICE_CMYK;break;case 3:l=this.color_spaces.DEVICE_RGB}w={data:r,width:h.width,height:h.height,colorSpace:l,bitsPerComponent:8,filter:v,index:n,alias:o}}return w}}(Zi.API);var kh,n1,ab,sb,lb,X7=function(){var e,t,r;function n(u){var c,l,h,v,w,E,T,I,F,U,G,H,X,ee;for(this.data=u,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},E=null;;){switch(c=this.readUInt32(),F=function(){var K,se;for(se=[],K=0;K<4;++K)se.push(String.fromCharCode(this.data[this.pos++]));return se}.call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(c);break;case"fcTL":E&&this.animation.frames.push(E),this.pos+=4,E={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},w=this.readUInt16(),v=this.readUInt16()||100,E.delay=1e3*w/v,E.disposeOp=this.data[this.pos++],E.blendOp=this.data[this.pos++],E.data=[];break;case"IDAT":case"fdAT":for(F==="fdAT"&&(this.pos+=4,c-=4),u=(E!=null?E.data:void 0)||this.imgData,H=0;0<=c?H<c:H>c;0<=c?++H:--H)u.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(h=this.palette.length/3,this.transparency.indexed=this.read(c),this.transparency.indexed.length>h)throw new Error("More transparent colors than palette size");if((U=h-this.transparency.indexed.length)>0)for(X=0;0<=U?X<U:X>U;0<=U?++X:--X)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(c)[0];break;case 2:this.transparency.rgb=this.read(c)}break;case"tEXt":T=(G=this.read(c)).indexOf(0),I=String.fromCharCode.apply(String,G.slice(0,T)),this.text[I]=String.fromCharCode.apply(String,G.slice(T+1));break;case"IEND":return E&&this.animation.frames.push(E),this.colors=function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}.call(this),this.hasAlphaChannel=(ee=this.colorType)===4||ee===6,l=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*l,this.colorSpace=function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}.call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=c}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}n.prototype.read=function(u){var c,l;for(l=[],c=0;0<=u?c<u:c>u;0<=u?++c:--c)l.push(this.data[this.pos++]);return l},n.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},n.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},n.prototype.decodePixels=function(u){var c=this.pixelBitlength/8,l=new Uint8Array(this.width*this.height*c),h=0,v=this;if(u==null&&(u=this.imgData),u.length===0)return new Uint8Array(0);function w(E,T,I,F){var U,G,H,X,ee,K,se,ce,_e,pe,Ge,We,Ae,Ie,Fe,ot,_t,ht,$e,ut,bt,Ze=Math.ceil((v.width-E)/I),He=Math.ceil((v.height-T)/F),xe=v.width==Ze&&v.height==He;for(Ie=c*Ze,We=xe?l:new Uint8Array(Ie*He),K=u.length,Ae=0,G=0;Ae<He&&h<K;){switch(u[h++]){case 0:for(X=_t=0;_t<Ie;X=_t+=1)We[G++]=u[h++];break;case 1:for(X=ht=0;ht<Ie;X=ht+=1)U=u[h++],ee=X<c?0:We[G-c],We[G++]=(U+ee)%256;break;case 2:for(X=$e=0;$e<Ie;X=$e+=1)U=u[h++],H=(X-X%c)/c,Fe=Ae&&We[(Ae-1)*Ie+H*c+X%c],We[G++]=(Fe+U)%256;break;case 3:for(X=ut=0;ut<Ie;X=ut+=1)U=u[h++],H=(X-X%c)/c,ee=X<c?0:We[G-c],Fe=Ae&&We[(Ae-1)*Ie+H*c+X%c],We[G++]=(U+Math.floor((ee+Fe)/2))%256;break;case 4:for(X=bt=0;bt<Ie;X=bt+=1)U=u[h++],H=(X-X%c)/c,ee=X<c?0:We[G-c],Ae===0?Fe=ot=0:(Fe=We[(Ae-1)*Ie+H*c+X%c],ot=H&&We[(Ae-1)*Ie+(H-1)*c+X%c]),se=ee+Fe-ot,ce=Math.abs(se-ee),pe=Math.abs(se-Fe),Ge=Math.abs(se-ot),_e=ce<=pe&&ce<=Ge?ee:pe<=Ge?Fe:ot,We[G++]=(U+_e)%256;break;default:throw new Error("Invalid filter algorithm: "+u[h-1])}if(!xe){var Ne=((T+Ae*F)*v.width+E)*c,Pe=Ae*Ie;for(X=0;X<Ze;X+=1){for(var ft=0;ft<c;ft+=1)l[Ne++]=We[Pe++];Ne+=(I-1)*c}}Ae++}}return u=T7(u),v.interlaceMethod==1?(w(0,0,8,8),w(4,0,8,8),w(0,4,4,8),w(2,0,4,4),w(0,2,2,4),w(1,0,2,2),w(0,1,1,2)):w(0,0,1,1),l},n.prototype.decodePalette=function(){var u,c,l,h,v,w,E,T,I;for(l=this.palette,w=this.transparency.indexed||[],v=new Uint8Array((w.length||0)+l.length),h=0,u=0,c=E=0,T=l.length;E<T;c=E+=3)v[h++]=l[c],v[h++]=l[c+1],v[h++]=l[c+2],v[h++]=(I=w[u++])!=null?I:255;return v},n.prototype.copyToImageData=function(u,c){var l,h,v,w,E,T,I,F,U,G,H;if(h=this.colors,U=null,l=this.hasAlphaChannel,this.palette.length&&(U=(H=this._decodedPalette)!=null?H:this._decodedPalette=this.decodePalette(),h=4,l=!0),F=(v=u.data||u).length,E=U||c,w=T=0,h===1)for(;w<F;)I=U?4*c[w/4]:T,G=E[I++],v[w++]=G,v[w++]=G,v[w++]=G,v[w++]=l?E[I++]:255,T=I;else for(;w<F;)I=U?4*c[w/4]:T,v[w++]=E[I++],v[w++]=E[I++],v[w++]=E[I++],v[w++]=l?E[I++]:255,T=I},n.prototype.decode=function(){var u;return u=new Uint8Array(this.width*this.height*4),this.copyToImageData(u,this.decodePixels()),u};var o=function(){if(Object.prototype.toString.call(eo)==="[object Window]"){try{t=eo.document.createElement("canvas"),r=t.getContext("2d")}catch{return!1}return!0}return!1};return o(),e=function(u){var c;if(o()===!0)return r.width=u.width,r.height=u.height,r.clearRect(0,0,u.width,u.height),r.putImageData(u,0,0),(c=new Image).src=t.toDataURL(),c;throw new Error("This method requires a Browser with Canvas-capability.")},n.prototype.decodeFrames=function(u){var c,l,h,v,w,E,T,I;if(this.animation){for(I=[],l=w=0,E=(T=this.animation.frames).length;w<E;l=++w)c=T[l],h=u.createImageData(c.width,c.height),v=this.decodePixels(new Uint8Array(c.data)),this.copyToImageData(h,v),c.imageData=h,I.push(c.image=e(h));return I}},n.prototype.renderFrame=function(u,c){var l,h,v;return l=(h=this.animation.frames)[c],v=h[c-1],c===0&&u.clearRect(0,0,this.width,this.height),(v!=null?v.disposeOp:void 0)===1?u.clearRect(v.xOffset,v.yOffset,v.width,v.height):(v!=null?v.disposeOp:void 0)===2&&u.putImageData(v.imageData,v.xOffset,v.yOffset),l.blendOp===0&&u.clearRect(l.xOffset,l.yOffset,l.width,l.height),u.drawImage(l.image,l.xOffset,l.yOffset)},n.prototype.animate=function(u){var c,l,h,v,w,E,T=this;return l=0,E=this.animation,v=E.numFrames,h=E.frames,w=E.numPlays,(c=function(){var I,F;if(I=l++%v,F=h[I],T.renderFrame(u,I),v>1&&l/v<w)return T.animation._timeout=setTimeout(c,F.delay)})()},n.prototype.stopAnimation=function(){var u;return clearTimeout((u=this.animation)!=null?u._timeout:void 0)},n.prototype.render=function(u){var c,l;return u._png&&u._png.stopAnimation(),u._png=this,u.width=this.width,u.height=this.height,c=u.getContext("2d"),this.animation?(this.decodeFrames(c),this.animate(c)):(l=c.createImageData(this.width,this.height),this.copyToImageData(l,this.decodePixels()),c.putImageData(l,0,0))},n}();/**
 * @license
 *
 * Copyright (c) 2014 James Robb, https://github.com/jamesbrobb
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * ====================================================================
 *//**
 * @license
 * (c) Dean McNamee <dean@gmail.com>, 2013.
 *
 * https://github.com/deanm/omggif
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to
 * deal in the Software without restriction, including without limitation the
 * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
 * sell copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
 * IN THE SOFTWARE.
 *
 * omggif is a JavaScript implementation of a GIF 89a encoder and decoder,
 * including animation and compression.  It does not rely on any specific
 * underlying system, so should run in the browser, Node, or Plask.
 */function Y7(e){var t=0;if(e[t++]!==71||e[t++]!==73||e[t++]!==70||e[t++]!==56||(e[t++]+1&253)!=56||e[t++]!==97)throw new Error("Invalid GIF 87a/89a header.");var r=e[t++]|e[t++]<<8,n=e[t++]|e[t++]<<8,o=e[t++],u=o>>7,c=1<<(7&o)+1;e[t++],e[t++];var l=null,h=null;u&&(l=t,h=c,t+=3*c);var v=!0,w=[],E=0,T=null,I=0,F=null;for(this.width=r,this.height=n;v&&t<e.length;)switch(e[t++]){case 33:switch(e[t++]){case 255:if(e[t]!==11||e[t+1]==78&&e[t+2]==69&&e[t+3]==84&&e[t+4]==83&&e[t+5]==67&&e[t+6]==65&&e[t+7]==80&&e[t+8]==69&&e[t+9]==50&&e[t+10]==46&&e[t+11]==48&&e[t+12]==3&&e[t+13]==1&&e[t+16]==0)t+=14,F=e[t++]|e[t++]<<8,t++;else for(t+=12;;){if(!((Ae=e[t++])>=0))throw Error("Invalid block size");if(Ae===0)break;t+=Ae}break;case 249:if(e[t++]!==4||e[t+4]!==0)throw new Error("Invalid graphics extension block.");var U=e[t++];E=e[t++]|e[t++]<<8,T=e[t++],!(1&U)&&(T=null),I=U>>2&7,t++;break;case 254:for(;;){if(!((Ae=e[t++])>=0))throw Error("Invalid block size");if(Ae===0)break;t+=Ae}break;default:throw new Error("Unknown graphic control label: 0x"+e[t-1].toString(16))}break;case 44:var G=e[t++]|e[t++]<<8,H=e[t++]|e[t++]<<8,X=e[t++]|e[t++]<<8,ee=e[t++]|e[t++]<<8,K=e[t++],se=K>>6&1,ce=1<<(7&K)+1,_e=l,pe=h,Ge=!1;K>>7&&(Ge=!0,_e=t,pe=ce,t+=3*ce);var We=t;for(t++;;){var Ae;if(!((Ae=e[t++])>=0))throw Error("Invalid block size");if(Ae===0)break;t+=Ae}w.push({x:G,y:H,width:X,height:ee,has_local_palette:Ge,palette_offset:_e,palette_size:pe,data_offset:We,data_length:t-We,transparent_index:T,interlaced:!!se,delay:E,disposal:I});break;case 59:v=!1;break;default:throw new Error("Unknown gif block: 0x"+e[t-1].toString(16))}this.numFrames=function(){return w.length},this.loopCount=function(){return F},this.frameInfo=function(Ie){if(Ie<0||Ie>=w.length)throw new Error("Frame index out of range.");return w[Ie]},this.decodeAndBlitFrameBGRA=function(Ie,Fe){var ot=this.frameInfo(Ie),_t=ot.width*ot.height,ht=new Uint8Array(_t);ub(e,ot.data_offset,ht,_t);var $e=ot.palette_offset,ut=ot.transparent_index;ut===null&&(ut=256);var bt=ot.width,Ze=r-bt,He=bt,xe=4*(ot.y*r+ot.x),Ne=4*((ot.y+ot.height)*r+ot.x),Pe=xe,ft=4*Ze;ot.interlaced===!0&&(ft+=4*r*7);for(var At=8,Pt=0,Kt=ht.length;Pt<Kt;++Pt){var $t=ht[Pt];if(He===0&&(He=bt,(Pe+=ft)>=Ne&&(ft=4*Ze+4*r*(At-1),Pe=xe+(bt+Ze)*(At<<1),At>>=1)),$t===ut)Pe+=4;else{var br=e[$e+3*$t],Gt=e[$e+3*$t+1],Rr=e[$e+3*$t+2];Fe[Pe++]=Rr,Fe[Pe++]=Gt,Fe[Pe++]=br,Fe[Pe++]=255}--He}},this.decodeAndBlitFrameRGBA=function(Ie,Fe){var ot=this.frameInfo(Ie),_t=ot.width*ot.height,ht=new Uint8Array(_t);ub(e,ot.data_offset,ht,_t);var $e=ot.palette_offset,ut=ot.transparent_index;ut===null&&(ut=256);var bt=ot.width,Ze=r-bt,He=bt,xe=4*(ot.y*r+ot.x),Ne=4*((ot.y+ot.height)*r+ot.x),Pe=xe,ft=4*Ze;ot.interlaced===!0&&(ft+=4*r*7);for(var At=8,Pt=0,Kt=ht.length;Pt<Kt;++Pt){var $t=ht[Pt];if(He===0&&(He=bt,(Pe+=ft)>=Ne&&(ft=4*Ze+4*r*(At-1),Pe=xe+(bt+Ze)*(At<<1),At>>=1)),$t===ut)Pe+=4;else{var br=e[$e+3*$t],Gt=e[$e+3*$t+1],Rr=e[$e+3*$t+2];Fe[Pe++]=br,Fe[Pe++]=Gt,Fe[Pe++]=Rr,Fe[Pe++]=255}--He}}}function ub(e,t,r,n){for(var o=e[t++],u=1<<o,c=u+1,l=c+1,h=o+1,v=(1<<h)-1,w=0,E=0,T=0,I=e[t++],F=new Int32Array(4096),U=null;;){for(;w<16&&I!==0;)E|=e[t++]<<w,w+=8,I===1?I=e[t++]:--I;if(w<h)break;var G=E&v;if(E>>=h,w-=h,G!==u){if(G===c)break;for(var H=G<l?G:U,X=0,ee=H;ee>u;)ee=F[ee]>>8,++X;var K=ee;if(T+X+(H!==G?1:0)>n)return void Ma.log("Warning, gif stream longer than expected.");r[T++]=K;var se=T+=X;for(H!==G&&(r[T++]=K),ee=H;X--;)ee=F[ee],r[--se]=255&ee,ee>>=8;U!==null&&l<4096&&(F[l++]=U<<8|K,l>=v+1&&h<12&&(++h,v=v<<1|1)),U=G}else l=c+1,v=(1<<(h=o+1))-1,U=null}return T!==n&&Ma.log("Warning, gif stream shorter than expected."),r}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function um(e){var t,r,n,o,u,c=Math.floor,l=new Array(64),h=new Array(64),v=new Array(64),w=new Array(64),E=new Array(65535),T=new Array(65535),I=new Array(64),F=new Array(64),U=[],G=0,H=7,X=new Array(64),ee=new Array(64),K=new Array(64),se=new Array(256),ce=new Array(2048),_e=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],pe=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],Ge=[0,1,2,3,4,5,6,7,8,9,10,11],We=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],Ae=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],Ie=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],Fe=[0,1,2,3,4,5,6,7,8,9,10,11],ot=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],_t=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function ht(xe,Ne){for(var Pe=0,ft=0,At=new Array,Pt=1;Pt<=16;Pt++){for(var Kt=1;Kt<=xe[Pt];Kt++)At[Ne[ft]]=[],At[Ne[ft]][0]=Pe,At[Ne[ft]][1]=Pt,ft++,Pe++;Pe*=2}return At}function $e(xe){for(var Ne=xe[0],Pe=xe[1]-1;Pe>=0;)Ne&1<<Pe&&(G|=1<<H),Pe--,--H<0&&(G==255?(ut(255),ut(0)):ut(G),H=7,G=0)}function ut(xe){U.push(xe)}function bt(xe){ut(xe>>8&255),ut(255&xe)}function Ze(xe,Ne,Pe,ft,At){for(var Pt,Kt=At[0],$t=At[240],br=function(Wt,Ur){var mn,en,On,Zn,ai,_i,hi,yr,Vr,wi,xn=0;for(Vr=0;Vr<8;++Vr){mn=Wt[xn],en=Wt[xn+1],On=Wt[xn+2],Zn=Wt[xn+3],ai=Wt[xn+4],_i=Wt[xn+5],hi=Wt[xn+6];var si=mn+(yr=Wt[xn+7]),fr=mn-yr,or=en+hi,Yr=en-hi,un=On+_i,Nr=On-_i,pn=Zn+ai,Yn=Zn-ai,ci=si+pn,No=si-pn,gi=or+un,co=or-un;Wt[xn]=ci+gi,Wt[xn+4]=ci-gi;var li=.707106781*(co+No);Wt[xn+2]=No+li,Wt[xn+6]=No-li;var to=.382683433*((ci=Yn+Nr)-(co=Yr+fr)),yo=.5411961*ci+to,pi=1.306562965*co+to,Ti=.707106781*(gi=Nr+Yr),Xo=fr+Ti,vn=fr-Ti;Wt[xn+5]=vn+yo,Wt[xn+3]=vn-yo,Wt[xn+1]=Xo+pi,Wt[xn+7]=Xo-pi,xn+=8}for(xn=0,Vr=0;Vr<8;++Vr){mn=Wt[xn],en=Wt[xn+8],On=Wt[xn+16],Zn=Wt[xn+24],ai=Wt[xn+32],_i=Wt[xn+40],hi=Wt[xn+48];var ze=mn+(yr=Wt[xn+56]),Ea=mn-yr,ha=en+hi,ra=en-hi,be=On+_i,ye=On-_i,De=Zn+ai,nt=Zn-ai,st=ze+De,Rt=ze-De,Re=ha+be,Ht=ha-be;Wt[xn]=st+Re,Wt[xn+32]=st-Re;var Nt=.707106781*(Ht+Rt);Wt[xn+16]=Rt+Nt,Wt[xn+48]=Rt-Nt;var ir=.382683433*((st=nt+ye)-(Ht=ra+Ea)),Br=.5411961*st+ir,nn=1.306562965*Ht+ir,Fr=.707106781*(Re=ye+ra),$n=Ea+Fr,Wn=Ea-Fr;Wt[xn+40]=Wn+Br,Wt[xn+24]=Wn-Br,Wt[xn+8]=$n+nn,Wt[xn+56]=$n-nn,xn++}for(Vr=0;Vr<64;++Vr)wi=Wt[Vr]*Ur[Vr],I[Vr]=wi>0?wi+.5|0:wi-.5|0;return I}(xe,Ne),Gt=0;Gt<64;++Gt)F[_e[Gt]]=br[Gt];var Rr=F[0]-Pe;Pe=F[0],Rr==0?$e(ft[0]):($e(ft[T[Pt=32767+Rr]]),$e(E[Pt]));for(var Mr=63;Mr>0&&F[Mr]==0;)Mr--;if(Mr==0)return $e(Kt),Pe;for(var Kr,St=1;St<=Mr;){for(var ct=St;F[St]==0&&St<=Mr;)++St;var Or=St-ct;if(Or>=16){Kr=Or>>4;for(var ln=1;ln<=Kr;++ln)$e($t);Or&=15}Pt=32767+F[St],$e(At[(Or<<4)+T[Pt]]),$e(E[Pt]),St++}return Mr!=63&&$e(Kt),Pe}function He(xe){xe=Math.min(Math.max(xe,1),100),u!=xe&&(function(Ne){for(var Pe=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],ft=0;ft<64;ft++){var At=c((Pe[ft]*Ne+50)/100);At=Math.min(Math.max(At,1),255),l[_e[ft]]=At}for(var Pt=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],Kt=0;Kt<64;Kt++){var $t=c((Pt[Kt]*Ne+50)/100);$t=Math.min(Math.max($t,1),255),h[_e[Kt]]=$t}for(var br=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],Gt=0,Rr=0;Rr<8;Rr++)for(var Mr=0;Mr<8;Mr++)v[Gt]=1/(l[_e[Gt]]*br[Rr]*br[Mr]*8),w[Gt]=1/(h[_e[Gt]]*br[Rr]*br[Mr]*8),Gt++}(xe<50?Math.floor(5e3/xe):Math.floor(200-2*xe)),u=xe)}this.encode=function(xe,Ne){Ne&&He(Ne),U=new Array,G=0,H=7,bt(65496),bt(65504),bt(16),ut(74),ut(70),ut(73),ut(70),ut(0),ut(1),ut(1),ut(0),bt(1),bt(1),ut(0),ut(0),function(){bt(65499),bt(132),ut(0);for(var en=0;en<64;en++)ut(l[en]);ut(1);for(var On=0;On<64;On++)ut(h[On])}(),function(en,On){bt(65472),bt(17),ut(8),bt(On),bt(en),ut(3),ut(1),ut(17),ut(0),ut(2),ut(17),ut(1),ut(3),ut(17),ut(1)}(xe.width,xe.height),function(){bt(65476),bt(418),ut(0);for(var en=0;en<16;en++)ut(pe[en+1]);for(var On=0;On<=11;On++)ut(Ge[On]);ut(16);for(var Zn=0;Zn<16;Zn++)ut(We[Zn+1]);for(var ai=0;ai<=161;ai++)ut(Ae[ai]);ut(1);for(var _i=0;_i<16;_i++)ut(Ie[_i+1]);for(var hi=0;hi<=11;hi++)ut(Fe[hi]);ut(17);for(var yr=0;yr<16;yr++)ut(ot[yr+1]);for(var Vr=0;Vr<=161;Vr++)ut(_t[Vr])}(),bt(65498),bt(12),ut(3),ut(1),ut(0),ut(2),ut(17),ut(3),ut(17),ut(0),ut(63),ut(0);var Pe=0,ft=0,At=0;G=0,H=7,this.encode.displayName="_encode_";for(var Pt,Kt,$t,br,Gt,Rr,Mr,Kr,St,ct=xe.data,Or=xe.width,ln=xe.height,Wt=4*Or,Ur=0;Ur<ln;){for(Pt=0;Pt<Wt;){for(Gt=Wt*Ur+Pt,Mr=-1,Kr=0,St=0;St<64;St++)Rr=Gt+(Kr=St>>3)*Wt+(Mr=4*(7&St)),Ur+Kr>=ln&&(Rr-=Wt*(Ur+1+Kr-ln)),Pt+Mr>=Wt&&(Rr-=Pt+Mr-Wt+4),Kt=ct[Rr++],$t=ct[Rr++],br=ct[Rr++],X[St]=(ce[Kt]+ce[$t+256>>0]+ce[br+512>>0]>>16)-128,ee[St]=(ce[Kt+768>>0]+ce[$t+1024>>0]+ce[br+1280>>0]>>16)-128,K[St]=(ce[Kt+1280>>0]+ce[$t+1536>>0]+ce[br+1792>>0]>>16)-128;Pe=Ze(X,v,Pe,t,n),ft=Ze(ee,w,ft,r,o),At=Ze(K,w,At,r,o),Pt+=32}Ur+=8}if(H>=0){var mn=[];mn[1]=H+1,mn[0]=(1<<H+1)-1,$e(mn)}return bt(65497),new Uint8Array(U)},e=e||50,function(){for(var xe=String.fromCharCode,Ne=0;Ne<256;Ne++)se[Ne]=xe(Ne)}(),t=ht(pe,Ge),r=ht(Ie,Fe),n=ht(We,Ae),o=ht(ot,_t),function(){for(var xe=1,Ne=2,Pe=1;Pe<=15;Pe++){for(var ft=xe;ft<Ne;ft++)T[32767+ft]=Pe,E[32767+ft]=[],E[32767+ft][1]=Pe,E[32767+ft][0]=ft;for(var At=-(Ne-1);At<=-xe;At++)T[32767+At]=Pe,E[32767+At]=[],E[32767+At][1]=Pe,E[32767+At][0]=Ne-1+At;xe<<=1,Ne<<=1}}(),function(){for(var xe=0;xe<256;xe++)ce[xe]=19595*xe,ce[xe+256>>0]=38470*xe,ce[xe+512>>0]=7471*xe+32768,ce[xe+768>>0]=-11059*xe,ce[xe+1024>>0]=-21709*xe,ce[xe+1280>>0]=32768*xe+8421375,ce[xe+1536>>0]=-27439*xe,ce[xe+1792>>0]=-5329*xe}(),He(e)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function h0(e,t){if(this.pos=0,this.buffer=e,this.datav=new DataView(e.buffer),this.is_with_alpha=!!t,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function cb(e){function t(pe){if(!pe)throw Error("assert :P")}function r(pe,Ge,We){for(var Ae=0;4>Ae;Ae++)if(pe[Ge+Ae]!=We.charCodeAt(Ae))return!0;return!1}function n(pe,Ge,We,Ae,Ie){for(var Fe=0;Fe<Ie;Fe++)pe[Ge+Fe]=We[Ae+Fe]}function o(pe,Ge,We,Ae){for(var Ie=0;Ie<Ae;Ie++)pe[Ge+Ie]=We}function u(pe){return new Int32Array(pe)}function c(pe,Ge){for(var We=[],Ae=0;Ae<pe;Ae++)We.push(new Ge);return We}function l(pe,Ge){var We=[];return function Ae(Ie,Fe,ot){for(var _t=ot[Fe],ht=0;ht<_t&&(Ie.push(ot.length>Fe+1?[]:new Ge),!(ot.length<Fe+1));ht++)Ae(Ie[ht],Fe+1,ot)}(We,0,pe),We}var h=function(){var pe=this;function Ge(N,$){for(var re=1<<$-1>>>0;N&re;)re>>>=1;return re?(N&re-1)+re:N}function We(N,$,re,fe,Te){t(!(fe%re));do N[$+(fe-=re)]=Te;while(0<fe)}function Ae(N,$,re,fe,Te){if(t(2328>=Te),512>=Te)var Oe=u(512);else if((Oe=u(Te))==null)return 0;return function(Ue,Ke,rt,gt,rr,Er){var kr,hr,fn=Ke,Dr=1<<rt,zt=u(16),Xt=u(16);for(t(rr!=0),t(gt!=null),t(Ue!=null),t(0<rt),hr=0;hr<rr;++hr){if(15<gt[hr])return 0;++zt[gt[hr]]}if(zt[0]==rr)return 0;for(Xt[1]=0,kr=1;15>kr;++kr){if(zt[kr]>1<<kr)return 0;Xt[kr+1]=Xt[kr]+zt[kr]}for(hr=0;hr<rr;++hr)kr=gt[hr],0<gt[hr]&&(Er[Xt[kr]++]=hr);if(Xt[15]==1)return(gt=new Ie).g=0,gt.value=Er[0],We(Ue,fn,1,Dr,gt),Dr;var Hr,Qr=-1,Wr=Dr-1,Nn=0,Cn=1,Ci=1,Rn=1<<rt;for(hr=0,kr=1,rr=2;kr<=rt;++kr,rr<<=1){if(Cn+=Ci<<=1,0>(Ci-=zt[kr]))return 0;for(;0<zt[kr];--zt[kr])(gt=new Ie).g=kr,gt.value=Er[hr++],We(Ue,fn+Nn,rr,Rn,gt),Nn=Ge(Nn,kr)}for(kr=rt+1,rr=2;15>=kr;++kr,rr<<=1){if(Cn+=Ci<<=1,0>(Ci-=zt[kr]))return 0;for(;0<zt[kr];--zt[kr]){if(gt=new Ie,(Nn&Wr)!=Qr){for(fn+=Rn,Hr=1<<(Qr=kr)-rt;15>Qr&&!(0>=(Hr-=zt[Qr]));)++Qr,Hr<<=1;Dr+=Rn=1<<(Hr=Qr-rt),Ue[Ke+(Qr=Nn&Wr)].g=Hr+rt,Ue[Ke+Qr].value=fn-Ke-Qr}gt.g=kr-rt,gt.value=Er[hr++],We(Ue,fn+(Nn>>rt),rr,Rn,gt),Nn=Ge(Nn,kr)}}return Cn!=2*Xt[15]-1?0:Dr}(N,$,re,fe,Te,Oe)}function Ie(){this.value=this.g=0}function Fe(){this.value=this.g=0}function ot(){this.G=c(5,Ie),this.H=u(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=c(Na,Fe)}function _t(N,$,re,fe){t(N!=null),t($!=null),t(2147483648>fe),N.Ca=254,N.I=0,N.b=-8,N.Ka=0,N.oa=$,N.pa=re,N.Jd=$,N.Yc=re+fe,N.Zc=4<=fe?re+fe-4+1:re,Pt(N)}function ht(N,$){for(var re=0;0<$--;)re|=$t(N,128)<<$;return re}function $e(N,$){var re=ht(N,$);return Kt(N)?-re:re}function ut(N,$,re,fe){var Te,Oe=0;for(t(N!=null),t($!=null),t(4294967288>fe),N.Sb=fe,N.Ra=0,N.u=0,N.h=0,4<fe&&(fe=4),Te=0;Te<fe;++Te)Oe+=$[re+Te]<<8*Te;N.Ra=Oe,N.bb=fe,N.oa=$,N.pa=re}function bt(N){for(;8<=N.u&&N.bb<N.Sb;)N.Ra>>>=8,N.Ra+=N.oa[N.pa+N.bb]<<Hs-8>>>0,++N.bb,N.u-=8;Pe(N)&&(N.h=1,N.u=0)}function Ze(N,$){if(t(0<=$),!N.h&&$<=Xl){var re=Ne(N)&xu[$];return N.u+=$,bt(N),re}return N.h=1,N.u=0}function He(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function xe(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function Ne(N){return N.Ra>>>(N.u&Hs-1)>>>0}function Pe(N){return t(N.bb<=N.Sb),N.h||N.bb==N.Sb&&N.u>Hs}function ft(N,$){N.u=$,N.h=Pe(N)}function At(N){N.u>=kl&&(t(N.u>=kl),bt(N))}function Pt(N){t(N!=null&&N.oa!=null),N.pa<N.Zc?(N.I=(N.oa[N.pa++]|N.I<<8)>>>0,N.b+=8):(t(N!=null&&N.oa!=null),N.pa<N.Yc?(N.b+=8,N.I=N.oa[N.pa++]|N.I<<8):N.Ka?N.b=0:(N.I<<=8,N.b+=8,N.Ka=1))}function Kt(N){return ht(N,1)}function $t(N,$){var re=N.Ca;0>N.b&&Pt(N);var fe=N.b,Te=re*$>>>8,Oe=(N.I>>>fe>Te)+0;for(Oe?(re-=Te,N.I-=Te+1<<fe>>>0):re=Te+1,fe=re,Te=0;256<=fe;)Te+=8,fe>>=8;return fe=7^Te+Ra[fe],N.b-=fe,N.Ca=(re<<fe)-1,Oe}function br(N,$,re){N[$+0]=re>>24&255,N[$+1]=re>>16&255,N[$+2]=re>>8&255,N[$+3]=re>>0&255}function Gt(N,$){return N[$+0]<<0|N[$+1]<<8}function Rr(N,$){return Gt(N,$)|N[$+2]<<16}function Mr(N,$){return Gt(N,$)|Gt(N,$+2)<<16}function Kr(N,$){var re=1<<$;return t(N!=null),t(0<$),N.X=u(re),N.X==null?0:(N.Mb=32-$,N.Xa=$,1)}function St(N,$){t(N!=null),t($!=null),t(N.Xa==$.Xa),n($.X,0,N.X,0,1<<$.Xa)}function ct(){this.X=[],this.Xa=this.Mb=0}function Or(N,$,re,fe){t(re!=null),t(fe!=null);var Te=re[0],Oe=fe[0];return Te==0&&(Te=(N*Oe+$/2)/$),Oe==0&&(Oe=($*Te+N/2)/N),0>=Te||0>=Oe?0:(re[0]=Te,fe[0]=Oe,1)}function ln(N,$){return N+(1<<$)-1>>>$}function Wt(N,$){return((4278255360&N)+(4278255360&$)>>>0&4278255360)+((16711935&N)+(16711935&$)>>>0&16711935)>>>0}function Ur(N,$){pe[$]=function(re,fe,Te,Oe,Ue,Ke,rt){var gt;for(gt=0;gt<Ue;++gt){var rr=pe[N](Ke[rt+gt-1],Te,Oe+gt);Ke[rt+gt]=Wt(re[fe+gt],rr)}}}function mn(){this.ud=this.hd=this.jd=0}function en(N,$){return((4278124286&(N^$))>>>1)+(N&$)>>>0}function On(N){return 0<=N&&256>N?N:0>N?0:255<N?255:void 0}function Zn(N,$){return On(N+(N-$+.5>>1))}function ai(N,$,re){return Math.abs($-re)-Math.abs(N-re)}function _i(N,$,re,fe,Te,Oe,Ue){for(fe=Oe[Ue-1],re=0;re<Te;++re)Oe[Ue+re]=fe=Wt(N[$+re],fe)}function hi(N,$,re,fe,Te){var Oe;for(Oe=0;Oe<re;++Oe){var Ue=N[$+Oe],Ke=Ue>>8&255,rt=16711935&(rt=(rt=16711935&Ue)+((Ke<<16)+Ke));fe[Te+Oe]=(4278255360&Ue)+rt>>>0}}function yr(N,$){$.jd=N>>0&255,$.hd=N>>8&255,$.ud=N>>16&255}function Vr(N,$,re,fe,Te,Oe){var Ue;for(Ue=0;Ue<fe;++Ue){var Ke=$[re+Ue],rt=Ke>>>8,gt=Ke,rr=255&(rr=(rr=Ke>>>16)+((N.jd<<24>>24)*(rt<<24>>24)>>>5));gt=255&(gt=(gt=gt+((N.hd<<24>>24)*(rt<<24>>24)>>>5))+((N.ud<<24>>24)*(rr<<24>>24)>>>5)),Te[Oe+Ue]=(4278255360&Ke)+(rr<<16)+gt}}function wi(N,$,re,fe,Te){pe[$]=function(Oe,Ue,Ke,rt,gt,rr,Er,kr,hr){for(rt=Er;rt<kr;++rt)for(Er=0;Er<hr;++Er)gt[rr++]=Te(Ke[fe(Oe[Ue++])])},pe[N]=function(Oe,Ue,Ke,rt,gt,rr,Er){var kr=8>>Oe.b,hr=Oe.Ea,fn=Oe.K[0],Dr=Oe.w;if(8>kr)for(Oe=(1<<Oe.b)-1,Dr=(1<<kr)-1;Ue<Ke;++Ue){var zt,Xt=0;for(zt=0;zt<hr;++zt)zt&Oe||(Xt=fe(rt[gt++])),rr[Er++]=Te(fn[Xt&Dr]),Xt>>=kr}else pe["VP8LMapColor"+re](rt,gt,fn,Dr,rr,Er,Ue,Ke,hr)}}function xn(N,$,re,fe,Te){for(re=$+re;$<re;){var Oe=N[$++];fe[Te++]=Oe>>16&255,fe[Te++]=Oe>>8&255,fe[Te++]=Oe>>0&255}}function si(N,$,re,fe,Te){for(re=$+re;$<re;){var Oe=N[$++];fe[Te++]=Oe>>16&255,fe[Te++]=Oe>>8&255,fe[Te++]=Oe>>0&255,fe[Te++]=Oe>>24&255}}function fr(N,$,re,fe,Te){for(re=$+re;$<re;){var Oe=(Ue=N[$++])>>16&240|Ue>>12&15,Ue=Ue>>0&240|Ue>>28&15;fe[Te++]=Oe,fe[Te++]=Ue}}function or(N,$,re,fe,Te){for(re=$+re;$<re;){var Oe=(Ue=N[$++])>>16&248|Ue>>13&7,Ue=Ue>>5&224|Ue>>3&31;fe[Te++]=Oe,fe[Te++]=Ue}}function Yr(N,$,re,fe,Te){for(re=$+re;$<re;){var Oe=N[$++];fe[Te++]=Oe>>0&255,fe[Te++]=Oe>>8&255,fe[Te++]=Oe>>16&255}}function un(N,$,re,fe,Te,Oe){if(Oe==0)for(re=$+re;$<re;)br(fe,((Oe=N[$++])[0]>>24|Oe[1]>>8&65280|Oe[2]<<8&16711680|Oe[3]<<24)>>>0),Te+=32;else n(fe,Te,N,$,re)}function Nr(N,$){pe[$][0]=pe[N+"0"],pe[$][1]=pe[N+"1"],pe[$][2]=pe[N+"2"],pe[$][3]=pe[N+"3"],pe[$][4]=pe[N+"4"],pe[$][5]=pe[N+"5"],pe[$][6]=pe[N+"6"],pe[$][7]=pe[N+"7"],pe[$][8]=pe[N+"8"],pe[$][9]=pe[N+"9"],pe[$][10]=pe[N+"10"],pe[$][11]=pe[N+"11"],pe[$][12]=pe[N+"12"],pe[$][13]=pe[N+"13"],pe[$][14]=pe[N+"0"],pe[$][15]=pe[N+"0"]}function pn(N){return N==Go||N==Ss||N==Au||N==Rc}function Yn(){this.eb=[],this.size=this.A=this.fb=0}function ci(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function No(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new Yn,this.f.kb=new ci,this.sd=null}function gi(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function co(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function li(N){return alert("todo:WebPSamplerProcessPlane"),N.T}function to(N,$){var re=N.T,fe=$.ba.f.RGBA,Te=fe.eb,Oe=fe.fb+N.ka*fe.A,Ue=q[$.ba.S],Ke=N.y,rt=N.O,gt=N.f,rr=N.N,Er=N.ea,kr=N.W,hr=$.cc,fn=$.dc,Dr=$.Mc,zt=$.Nc,Xt=N.ka,Hr=N.ka+N.T,Qr=N.U,Wr=Qr+1>>1;for(Xt==0?Ue(Ke,rt,null,null,gt,rr,Er,kr,gt,rr,Er,kr,Te,Oe,null,null,Qr):(Ue($.ec,$.fc,Ke,rt,hr,fn,Dr,zt,gt,rr,Er,kr,Te,Oe-fe.A,Te,Oe,Qr),++re);Xt+2<Hr;Xt+=2)hr=gt,fn=rr,Dr=Er,zt=kr,rr+=N.Rc,kr+=N.Rc,Oe+=2*fe.A,Ue(Ke,(rt+=2*N.fa)-N.fa,Ke,rt,hr,fn,Dr,zt,gt,rr,Er,kr,Te,Oe-fe.A,Te,Oe,Qr);return rt+=N.fa,N.j+Hr<N.o?(n($.ec,$.fc,Ke,rt,Qr),n($.cc,$.dc,gt,rr,Wr),n($.Mc,$.Nc,Er,kr,Wr),re--):1&Hr||Ue(Ke,rt,null,null,gt,rr,Er,kr,gt,rr,Er,kr,Te,Oe+fe.A,null,null,Qr),re}function yo(N,$,re){var fe=N.F,Te=[N.J];if(fe!=null){var Oe=N.U,Ue=$.ba.S,Ke=Ue==eu||Ue==Au;$=$.ba.f.RGBA;var rt=[0],gt=N.ka;rt[0]=N.T,N.Kb&&(gt==0?--rt[0]:(--gt,Te[0]-=N.width),N.j+N.ka+N.T==N.o&&(rt[0]=N.o-N.j-gt));var rr=$.eb;gt=$.fb+gt*$.A,N=Xu(fe,Te[0],N.width,Oe,rt,rr,gt+(Ke?0:3),$.A),t(re==rt),N&&pn(Ue)&&As(rr,gt,Ke,Oe,rt,$.A)}return 0}function pi(N){var $=N.ma,re=$.ba.S,fe=11>re,Te=re==hc||re==Ql||re==eu||re==ho||re==12||pn(re);if($.memory=null,$.Ib=null,$.Jb=null,$.Nd=null,!xl($.Oa,N,Te?11:12))return 0;if(Te&&pn(re)&&gn(),N.da)alert("todo:use_scaling");else{if(fe){if($.Ib=li,N.Kb){if(re=N.U+1>>1,$.memory=u(N.U+2*re),$.memory==null)return 0;$.ec=$.memory,$.fc=0,$.cc=$.ec,$.dc=$.fc+N.U,$.Mc=$.cc,$.Nc=$.dc+re,$.Ib=to,gn()}}else alert("todo:EmitYUV");Te&&($.Jb=yo,fe&&ur())}if(fe&&!Dt){for(N=0;256>N;++N)Tr[N]=89858*(N-128)+mt>>Et,Gr[N]=-22014*(N-128)+mt,Zr[N]=-45773*(N-128),Ir[N]=113618*(N-128)+mt>>Et;for(N=wt;N<tr;++N)$=76283*(N-16)+mt>>Et,dn[N-wt]=za($,255),qr[N-wt]=za($+8>>4,15);Dt=1}return 1}function Ti(N){var $=N.ma,re=N.U,fe=N.T;return t(!(1&N.ka)),0>=re||0>=fe?0:(re=$.Ib(N,$),$.Jb!=null&&$.Jb(N,$,re),$.Dc+=re,1)}function Xo(N){N.ma.memory=null}function vn(N,$,re,fe){return Ze(N,8)!=47?0:($[0]=Ze(N,14)+1,re[0]=Ze(N,14)+1,fe[0]=Ze(N,1),Ze(N,3)!=0?0:!N.h)}function ze(N,$){if(4>N)return N+1;var re=N-2>>1;return(2+(1&N)<<re)+Ze($,re)+1}function Ea(N,$){return 120<$?$-120:1<=(re=((re=oi[$-1])>>4)*N+(8-(15&re)))?re:1;var re}function ha(N,$,re){var fe=Ne(re),Te=N[$+=255&fe].g-8;return 0<Te&&(ft(re,re.u+8),fe=Ne(re),$+=N[$].value,$+=fe&(1<<Te)-1),ft(re,re.u+N[$].g),N[$].value}function ra(N,$,re){return re.g+=N.g,re.value+=N.value<<$>>>0,t(8>=re.g),N.g}function be(N,$,re){var fe=N.xc;return t(($=fe==0?0:N.vc[N.md*(re>>fe)+($>>fe)])<N.Wb),N.Ya[$]}function ye(N,$,re,fe){var Te=N.ab,Oe=N.c*$,Ue=N.C;$=Ue+$;var Ke=re,rt=fe;for(fe=N.Ta,re=N.Ua;0<Te--;){var gt=N.gc[Te],rr=Ue,Er=$,kr=Ke,hr=rt,fn=(rt=fe,Ke=re,gt.Ea);switch(t(rr<Er),t(Er<=gt.nc),gt.hc){case 2:Al(kr,hr,(Er-rr)*fn,rt,Ke);break;case 0:var Dr=rr,zt=Er,Xt=rt,Hr=Ke,Qr=(Rn=gt).Ea;Dr==0&&(Yl(kr,hr,null,null,1,Xt,Hr),_i(kr,hr+1,0,0,Qr-1,Xt,Hr+1),hr+=Qr,Hr+=Qr,++Dr);for(var Wr=1<<Rn.b,Nn=Wr-1,Cn=ln(Qr,Rn.b),Ci=Rn.K,Rn=Rn.w+(Dr>>Rn.b)*Cn;Dr<zt;){var Co=Ci,Po=Rn,io=1;for(Ws(kr,hr,Xt,Hr-Qr,1,Xt,Hr);io<Qr;){var $i=(io&~Nn)+Wr;$i>Qr&&($i=Qr),(0,Sl[Co[Po++]>>8&15])(kr,hr+ +io,Xt,Hr+io-Qr,$i-io,Xt,Hr+io),io=$i}hr+=Qr,Hr+=Qr,++Dr&Nn||(Rn+=Cn)}Er!=gt.nc&&n(rt,Ke-fn,rt,Ke+(Er-rr-1)*fn,fn);break;case 1:for(fn=kr,zt=hr,Qr=(kr=gt.Ea)-(Hr=kr&~(Xt=(hr=1<<gt.b)-1)),Dr=ln(kr,gt.b),Wr=gt.K,gt=gt.w+(rr>>gt.b)*Dr;rr<Er;){for(Nn=Wr,Cn=gt,Ci=new mn,Rn=zt+Hr,Co=zt+kr;zt<Rn;)yr(Nn[Cn++],Ci),Ga(Ci,fn,zt,hr,rt,Ke),zt+=hr,Ke+=hr;zt<Co&&(yr(Nn[Cn++],Ci),Ga(Ci,fn,zt,Qr,rt,Ke),zt+=Qr,Ke+=Qr),++rr&Xt||(gt+=Dr)}break;case 3:if(kr==rt&&hr==Ke&&0<gt.b){for(zt=rt,kr=fn=Ke+(Er-rr)*fn-(Hr=(Er-rr)*ln(gt.Ea,gt.b)),hr=rt,Xt=Ke,Dr=[],Hr=(Qr=Hr)-1;0<=Hr;--Hr)Dr[Hr]=hr[Xt+Hr];for(Hr=Qr-1;0<=Hr;--Hr)zt[kr+Hr]=Dr[Hr];is(gt,rr,Er,rt,fn,rt,Ke)}else is(gt,rr,Er,kr,hr,rt,Ke)}Ke=fe,rt=re}rt!=re&&n(fe,re,Ke,rt,Oe)}function De(N,$){var re=N.V,fe=N.Ba+N.c*N.C,Te=$-N.C;if(t($<=N.l.o),t(16>=Te),0<Te){var Oe=N.l,Ue=N.Ta,Ke=N.Ua,rt=Oe.width;if(ye(N,Te,re,fe),Te=Ke=[Ke],t((re=N.C)<(fe=$)),t(Oe.v<Oe.va),fe>Oe.o&&(fe=Oe.o),re<Oe.j){var gt=Oe.j-re;re=Oe.j,Te[0]+=gt*rt}if(re>=fe?re=0:(Te[0]+=4*Oe.v,Oe.ka=re-Oe.j,Oe.U=Oe.va-Oe.v,Oe.T=fe-re,re=1),re){if(Ke=Ke[0],11>(re=N.ca).S){var rr=re.f.RGBA,Er=(fe=re.S,Te=Oe.U,Oe=Oe.T,gt=rr.eb,rr.A),kr=Oe;for(rr=rr.fb+N.Ma*rr.A;0<kr--;){var hr=Ue,fn=Ke,Dr=Te,zt=gt,Xt=rr;switch(fe){case Zs:zs(hr,fn,Dr,zt,Xt);break;case hc:Ns(hr,fn,Dr,zt,Xt);break;case Go:Ns(hr,fn,Dr,zt,Xt),As(zt,Xt,0,Dr,1,0);break;case Kl:Rs(hr,fn,Dr,zt,Xt);break;case Ql:un(hr,fn,Dr,zt,Xt,1);break;case Ss:un(hr,fn,Dr,zt,Xt,1),As(zt,Xt,0,Dr,1,0);break;case eu:un(hr,fn,Dr,zt,Xt,0);break;case Au:un(hr,fn,Dr,zt,Xt,0),As(zt,Xt,1,Dr,1,0);break;case ho:Ya(hr,fn,Dr,zt,Xt);break;case Rc:Ya(hr,fn,Dr,zt,Xt),Zu(zt,Xt,Dr,1,0);break;case Es:sa(hr,fn,Dr,zt,Xt);break;default:t(0)}Ke+=rt,rr+=Er}N.Ma+=Oe}else alert("todo:EmitRescaledRowsYUVA");t(N.Ma<=re.height)}}N.C=$,t(N.C<=N.i)}function nt(N){var $;if(0<N.ua)return 0;for($=0;$<N.Wb;++$){var re=N.Ya[$].G,fe=N.Ya[$].H;if(0<re[1][fe[1]+0].g||0<re[2][fe[2]+0].g||0<re[3][fe[3]+0].g)return 0}return 1}function st(N,$,re,fe,Te,Oe){if(N.Z!=0){var Ue=N.qd,Ke=N.rd;for(t(D[N.Z]!=null);$<re;++$)D[N.Z](Ue,Ke,fe,Te,fe,Te,Oe),Ue=fe,Ke=Te,Te+=Oe;N.qd=Ue,N.rd=Ke}}function Rt(N,$){var re=N.l.ma,fe=re.Z==0||re.Z==1?N.l.j:N.C;if(fe=N.C<fe?fe:N.C,t($<=N.l.o),$>fe){var Te=N.l.width,Oe=re.ca,Ue=re.tb+Te*fe,Ke=N.V,rt=N.Ba+N.c*fe,gt=N.gc;t(N.ab==1),t(gt[0].hc==3),cc(gt[0],fe,$,Ke,rt,Oe,Ue),st(re,fe,$,Oe,Ue,Te)}N.C=N.Ma=$}function Re(N,$,re,fe,Te,Oe,Ue){var Ke=N.$/fe,rt=N.$%fe,gt=N.m,rr=N.s,Er=re+N.$,kr=Er;Te=re+fe*Te;var hr=re+fe*Oe,fn=280+rr.ua,Dr=N.Pb?Ke:16777216,zt=0<rr.ua?rr.Wa:null,Xt=rr.wc,Hr=Er<hr?be(rr,rt,Ke):null;t(N.C<Oe),t(hr<=Te);var Qr=!1;e:for(;;){for(;Qr||Er<hr;){var Wr=0;if(Ke>=Dr){var Nn=Er-re;t((Dr=N).Pb),Dr.wd=Dr.m,Dr.xd=Nn,0<Dr.s.ua&&St(Dr.s.Wa,Dr.s.vb),Dr=Ke+Oa}if(rt&Xt||(Hr=be(rr,rt,Ke)),t(Hr!=null),Hr.Qb&&($[Er]=Hr.qb,Qr=!0),!Qr)if(At(gt),Hr.jc){Wr=gt,Nn=$;var Cn=Er,Ci=Hr.pd[Ne(Wr)&Na-1];t(Hr.jc),256>Ci.g?(ft(Wr,Wr.u+Ci.g),Nn[Cn]=Ci.value,Wr=0):(ft(Wr,Wr.u+Ci.g-256),t(256<=Ci.value),Wr=Ci.value),Wr==0&&(Qr=!0)}else Wr=ha(Hr.G[0],Hr.H[0],gt);if(gt.h)break;if(Qr||256>Wr){if(!Qr)if(Hr.nd)$[Er]=(Hr.qb|Wr<<8)>>>0;else{if(At(gt),Qr=ha(Hr.G[1],Hr.H[1],gt),At(gt),Nn=ha(Hr.G[2],Hr.H[2],gt),Cn=ha(Hr.G[3],Hr.H[3],gt),gt.h)break;$[Er]=(Cn<<24|Qr<<16|Wr<<8|Nn)>>>0}if(Qr=!1,++Er,++rt>=fe&&(rt=0,++Ke,Ue!=null&&Ke<=Oe&&!(Ke%16)&&Ue(N,Ke),zt!=null))for(;kr<Er;)Wr=$[kr++],zt.X[(506832829*Wr&4294967295)>>>zt.Mb]=Wr}else if(280>Wr){if(Wr=ze(Wr-256,gt),Nn=ha(Hr.G[4],Hr.H[4],gt),At(gt),Nn=Ea(fe,Nn=ze(Nn,gt)),gt.h)break;if(Er-re<Nn||Te-Er<Wr)break e;for(Cn=0;Cn<Wr;++Cn)$[Er+Cn]=$[Er+Cn-Nn];for(Er+=Wr,rt+=Wr;rt>=fe;)rt-=fe,++Ke,Ue!=null&&Ke<=Oe&&!(Ke%16)&&Ue(N,Ke);if(t(Er<=Te),rt&Xt&&(Hr=be(rr,rt,Ke)),zt!=null)for(;kr<Er;)Wr=$[kr++],zt.X[(506832829*Wr&4294967295)>>>zt.Mb]=Wr}else{if(!(Wr<fn))break e;for(Qr=Wr-280,t(zt!=null);kr<Er;)Wr=$[kr++],zt.X[(506832829*Wr&4294967295)>>>zt.Mb]=Wr;Wr=Er,t(!(Qr>>>(Nn=zt).Xa)),$[Wr]=Nn.X[Qr],Qr=!0}Qr||t(gt.h==Pe(gt))}if(N.Pb&&gt.h&&Er<Te)t(N.m.h),N.a=5,N.m=N.wd,N.$=N.xd,0<N.s.ua&&St(N.s.vb,N.s.Wa);else{if(gt.h)break e;Ue!=null&&Ue(N,Ke>Oe?Oe:Ke),N.a=0,N.$=Er-re}return 1}return N.a=3,0}function Ht(N){t(N!=null),N.vc=null,N.yc=null,N.Ya=null;var $=N.Wa;$!=null&&($.X=null),N.vb=null,t(N!=null)}function Nt(){var N=new Gu;return N==null?null:(N.a=0,N.xb=C,Nr("Predictor","VP8LPredictors"),Nr("Predictor","VP8LPredictors_C"),Nr("PredictorAdd","VP8LPredictorsAdd"),Nr("PredictorAdd","VP8LPredictorsAdd_C"),Al=hi,Ga=Vr,zs=xn,Ns=si,Ya=fr,sa=or,Rs=Yr,pe.VP8LMapColor32b=El,pe.VP8LMapColor8b=Dc,N)}function ir(N,$,re,fe,Te){var Oe=1,Ue=[N],Ke=[$],rt=fe.m,gt=fe.s,rr=null,Er=0;e:for(;;){if(re)for(;Oe&&Ze(rt,1);){var kr=Ue,hr=Ke,fn=fe,Dr=1,zt=fn.m,Xt=fn.gc[fn.ab],Hr=Ze(zt,2);if(fn.Oc&1<<Hr)Oe=0;else{switch(fn.Oc|=1<<Hr,Xt.hc=Hr,Xt.Ea=kr[0],Xt.nc=hr[0],Xt.K=[null],++fn.ab,t(4>=fn.ab),Hr){case 0:case 1:Xt.b=Ze(zt,3)+2,Dr=ir(ln(Xt.Ea,Xt.b),ln(Xt.nc,Xt.b),0,fn,Xt.K),Xt.K=Xt.K[0];break;case 3:var Qr,Wr=Ze(zt,8)+1,Nn=16<Wr?0:4<Wr?1:2<Wr?2:3;if(kr[0]=ln(Xt.Ea,Nn),Xt.b=Nn,Qr=Dr=ir(Wr,1,0,fn,Xt.K)){var Cn,Ci=Wr,Rn=Xt,Co=1<<(8>>Rn.b),Po=u(Co);if(Po==null)Qr=0;else{var io=Rn.K[0],$i=Rn.w;for(Po[0]=Rn.K[0][0],Cn=1;Cn<1*Ci;++Cn)Po[Cn]=Wt(io[$i+Cn],Po[Cn-1]);for(;Cn<4*Co;++Cn)Po[Cn]=0;Rn.K[0]=null,Rn.K[0]=Po,Qr=1}}Dr=Qr;break;case 2:break;default:t(0)}Oe=Dr}}if(Ue=Ue[0],Ke=Ke[0],Oe&&Ze(rt,1)&&!(Oe=1<=(Er=Ze(rt,4))&&11>=Er)){fe.a=3;break e}var Eo;if(Eo=Oe)t:{var Mo,Ki,Fa,Fi=fe,pa=Ue,Ha=Ke,vo=Er,ya=re,Ba=Fi.m,Wa=Fi.s,Ho=[null],ss=1,Os=0,Vo=vi[vo];r:for(;;){if(ya&&Ze(Ba,1)){var Ia=Ze(Ba,3)+2,tu=ln(pa,Ia),Fs=ln(Ha,Ia),Ys=tu*Fs;if(!ir(tu,Fs,0,Fi,Ho))break r;for(Ho=Ho[0],Wa.xc=Ia,Mo=0;Mo<Ys;++Mo){var Js=Ho[Mo]>>8&65535;Ho[Mo]=Js,Js>=ss&&(ss=Js+1)}}if(Ba.h)break r;for(Ki=0;5>Ki;++Ki){var da=w0[Ki];!Ki&&0<vo&&(da+=1<<vo),Os<da&&(Os=da)}var x0=c(ss*Vo,Ie),G0=ss,Ll=c(G0,ot);if(Ll==null)var fa=null;else t(65536>=G0),fa=Ll;var dc=u(Os);if(fa==null||dc==null||x0==null){Fi.a=1;break r}var k0=x0;for(Mo=Fa=0;Mo<ss;++Mo){var Bs=fa[Mo],js=Bs.G,ru=Bs.H,Ju=0,A0=1,mc=0;for(Ki=0;5>Ki;++Ki){da=w0[Ki],js[Ki]=k0,ru[Ki]=Fa,!Ki&&0<vo&&(da+=1<<vo);n:{var gc,yc=da,vc=Fi,Fc=dc,hs=k0,Ja=Fa,Ta=0,nu=vc.m,n0=Ze(nu,1);if(o(Fc,0,0,yc),n0){var sl=Ze(nu,1)+1,H0=Ze(nu,1),E0=Ze(nu,H0==0?1:8);Fc[E0]=1,sl==2&&(Fc[E0=Ze(nu,8)]=1);var i0=1}else{var va=u(19),W0=Ze(nu,4)+4;if(19<W0){vc.a=3;var ue=0;break n}for(gc=0;gc<W0;++gc)va[pc[gc]]=Ze(nu,3);var we=void 0,qe=void 0,xt=vc,nr=va,sr=yc,Zt=Fc,_r=0,Cr=xt.m,on=8,yn=c(128,Ie);o:for(;Ae(yn,0,7,nr,19);){if(Ze(Cr,1)){var Jn=2+2*Ze(Cr,3);if((we=2+Ze(Cr,Jn))>sr)break o}else we=sr;for(qe=0;qe<sr&&we--;){At(Cr);var _n=yn[0+(127&Ne(Cr))];ft(Cr,Cr.u+_n.g);var Kn=_n.value;if(16>Kn)Zt[qe++]=Kn,Kn!=0&&(on=Kn);else{var ui=Kn==16,Gi=Kn-16,so=ol[Gi],_o=Ze(Cr,Eu[Gi])+so;if(qe+_o>sr)break o;for(var jo=ui?on:0;0<_o--;)Zt[qe++]=jo}}_r=1;break o}_r||(xt.a=3),i0=_r}(i0=i0&&!nu.h)&&(Ta=Ae(hs,Ja,8,Fc,yc)),i0&&Ta!=0?ue=Ta:(vc.a=3,ue=0)}if(ue==0)break r;if(A0&&al[Ki]==1&&(A0=k0[Fa].g==0),Ju+=k0[Fa].g,Fa+=ue,3>=Ki){var La,ja=dc[0];for(La=1;La<da;++La)dc[La]>ja&&(ja=dc[La]);mc+=ja}}if(Bs.nd=A0,Bs.Qb=0,A0&&(Bs.qb=(js[3][ru[3]+0].value<<24|js[1][ru[1]+0].value<<16|js[2][ru[2]+0].value)>>>0,Ju==0&&256>js[0][ru[0]+0].value&&(Bs.Qb=1,Bs.qb+=js[0][ru[0]+0].value<<8)),Bs.jc=!Bs.Qb&&6>mc,Bs.jc){var ea,Qi=Bs;for(ea=0;ea<Na;++ea){var bn=ea,bi=Qi.pd[bn],lo=Qi.G[0][Qi.H[0]+bn];256<=lo.value?(bi.g=lo.g+256,bi.value=lo.value):(bi.g=0,bi.value=0,bn>>=ra(lo,8,bi),bn>>=ra(Qi.G[1][Qi.H[1]+bn],16,bi),bn>>=ra(Qi.G[2][Qi.H[2]+bn],0,bi),ra(Qi.G[3][Qi.H[3]+bn],24,bi))}}}Wa.vc=Ho,Wa.Wb=ss,Wa.Ya=fa,Wa.yc=x0,Eo=1;break t}Eo=0}if(!(Oe=Eo)){fe.a=3;break e}if(0<Er){if(gt.ua=1<<Er,!Kr(gt.Wa,Er)){fe.a=1,Oe=0;break e}}else gt.ua=0;var Hi=fe,Ka=Ue,Pi=Ke,uo=Hi.s,Do=uo.xc;if(Hi.c=Ka,Hi.i=Pi,uo.md=ln(Ka,Do),uo.wc=Do==0?-1:(1<<Do)-1,re){fe.xb=k;break e}if((rr=u(Ue*Ke))==null){fe.a=1,Oe=0;break e}Oe=(Oe=Re(fe,rr,0,Ue,Ke,Ke,null))&&!rt.h;break e}return Oe?(Te!=null?Te[0]=rr:(t(rr==null),t(re)),fe.$=0,re||Ht(gt)):Ht(gt),Oe}function Br(N,$){var re=N.c*N.i,fe=re+$+16*$;return t(N.c<=$),N.V=u(fe),N.V==null?(N.Ta=null,N.Ua=0,N.a=1,0):(N.Ta=N.V,N.Ua=N.Ba+re+$,1)}function nn(N,$){var re=N.C,fe=$-re,Te=N.V,Oe=N.Ba+N.c*re;for(t($<=N.l.o);0<fe;){var Ue=16<fe?16:fe,Ke=N.l.ma,rt=N.l.width,gt=rt*Ue,rr=Ke.ca,Er=Ke.tb+rt*re,kr=N.Ta,hr=N.Ua;ye(N,Ue,Te,Oe),zc(kr,hr,rr,Er,gt),st(Ke,re,re+Ue,rr,Er,rt),fe-=Ue,Te+=Ue*N.c,re+=Ue}t(re==$),N.C=N.Ma=$}function Fr(){this.ub=this.yd=this.td=this.Rb=0}function $n(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function Wn(){this.Fb=this.Bb=this.Cb=0,this.Zb=u(4),this.Lb=u(4)}function sn(){this.Yb=function(){var N=[];return function $(re,fe,Te){for(var Oe=Te[fe],Ue=0;Ue<Oe&&(re.push(Te.length>fe+1?[]:0),!(Te.length<fe+1));Ue++)$(re[Ue],fe+1,Te)}(N,0,[3,11]),N}()}function yi(){this.jb=u(3),this.Wc=l([4,8],sn),this.Xc=l([4,17],sn)}function Ai(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new u(4),this.od=new u(4)}function Xi(){this.ld=this.La=this.dd=this.tc=0}function Ii(){this.Na=this.la=0}function qi(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function ro(){this.ad=u(384),this.Za=0,this.Ob=u(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function ko(){this.uc=this.M=this.Nb=0,this.wa=Array(new Xi),this.Y=0,this.ya=Array(new ro),this.aa=0,this.l=new Jo}function Yo(){this.y=u(16),this.f=u(8),this.ea=u(8)}function So(){this.cb=this.a=0,this.sc="",this.m=new He,this.Od=new Fr,this.Kc=new $n,this.ed=new Ai,this.Qa=new Wn,this.Ic=this.$c=this.Aa=0,this.D=new ko,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=c(8,He),this.ia=0,this.pb=c(4,qi),this.Pa=new yi,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new Yo),this.Hd=0,this.rb=Array(new Ii),this.sb=0,this.wa=Array(new Xi),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new ro),this.L=this.aa=0,this.gd=l([4,2],Xi),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function Jo(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function Vl(){var N=new So;return N!=null&&(N.a=0,N.sc="OK",N.cb=0,N.Xb=0,Bo||(Bo=gl)),N}function na(N,$,re){return N.a==0&&(N.a=$,N.sc=re,N.cb=0),0}function Ao(N,$,re){return 3<=re&&N[$+0]==157&&N[$+1]==1&&N[$+2]==42}function ml(N,$){if(N==null)return 0;if(N.a=0,N.sc="OK",$==null)return na(N,2,"null VP8Io passed to VP8GetHeaders()");var re=$.data,fe=$.w,Te=$.ha;if(4>Te)return na(N,7,"Truncated header.");var Oe=re[fe+0]|re[fe+1]<<8|re[fe+2]<<16,Ue=N.Od;if(Ue.Rb=!(1&Oe),Ue.td=Oe>>1&7,Ue.yd=Oe>>4&1,Ue.ub=Oe>>5,3<Ue.td)return na(N,3,"Incorrect keyframe parameters.");if(!Ue.yd)return na(N,4,"Frame not displayable.");fe+=3,Te-=3;var Ke=N.Kc;if(Ue.Rb){if(7>Te)return na(N,7,"cannot parse picture header");if(!Ao(re,fe,Te))return na(N,3,"Bad code word");Ke.c=16383&(re[fe+4]<<8|re[fe+3]),Ke.Td=re[fe+4]>>6,Ke.i=16383&(re[fe+6]<<8|re[fe+5]),Ke.Ud=re[fe+6]>>6,fe+=7,Te-=7,N.za=Ke.c+15>>4,N.Ub=Ke.i+15>>4,$.width=Ke.c,$.height=Ke.i,$.Da=0,$.j=0,$.v=0,$.va=$.width,$.o=$.height,$.da=0,$.ib=$.width,$.hb=$.height,$.U=$.width,$.T=$.height,o((Oe=N.Pa).jb,0,255,Oe.jb.length),t((Oe=N.Qa)!=null),Oe.Cb=0,Oe.Bb=0,Oe.Fb=1,o(Oe.Zb,0,0,Oe.Zb.length),o(Oe.Lb,0,0,Oe.Lb)}if(Ue.ub>Te)return na(N,7,"bad partition length");_t(Oe=N.m,re,fe,Ue.ub),fe+=Ue.ub,Te-=Ue.ub,Ue.Rb&&(Ke.Ld=Kt(Oe),Ke.Kd=Kt(Oe)),Ke=N.Qa;var rt,gt=N.Pa;if(t(Oe!=null),t(Ke!=null),Ke.Cb=Kt(Oe),Ke.Cb){if(Ke.Bb=Kt(Oe),Kt(Oe)){for(Ke.Fb=Kt(Oe),rt=0;4>rt;++rt)Ke.Zb[rt]=Kt(Oe)?$e(Oe,7):0;for(rt=0;4>rt;++rt)Ke.Lb[rt]=Kt(Oe)?$e(Oe,6):0}if(Ke.Bb)for(rt=0;3>rt;++rt)gt.jb[rt]=Kt(Oe)?ht(Oe,8):255}else Ke.Bb=0;if(Oe.Ka)return na(N,3,"cannot parse segment header");if((Ke=N.ed).zd=Kt(Oe),Ke.Tb=ht(Oe,6),Ke.wb=ht(Oe,3),Ke.Pc=Kt(Oe),Ke.Pc&&Kt(Oe)){for(gt=0;4>gt;++gt)Kt(Oe)&&(Ke.vd[gt]=$e(Oe,6));for(gt=0;4>gt;++gt)Kt(Oe)&&(Ke.od[gt]=$e(Oe,6))}if(N.L=Ke.Tb==0?0:Ke.zd?1:2,Oe.Ka)return na(N,3,"cannot parse filter header");var rr=Te;if(Te=rt=fe,fe=rt+rr,Ke=rr,N.Xb=(1<<ht(N.m,2))-1,rr<3*(gt=N.Xb))re=7;else{for(rt+=3*gt,Ke-=3*gt,rr=0;rr<gt;++rr){var Er=re[Te+0]|re[Te+1]<<8|re[Te+2]<<16;Er>Ke&&(Er=Ke),_t(N.Jc[+rr],re,rt,Er),rt+=Er,Ke-=Er,Te+=3}_t(N.Jc[+gt],re,rt,Ke),re=rt<fe?0:5}if(re!=0)return na(N,re,"cannot parse partitions");for(re=ht(rt=N.m,7),Te=Kt(rt)?$e(rt,4):0,fe=Kt(rt)?$e(rt,4):0,Ke=Kt(rt)?$e(rt,4):0,gt=Kt(rt)?$e(rt,4):0,rt=Kt(rt)?$e(rt,4):0,rr=N.Qa,Er=0;4>Er;++Er){if(rr.Cb){var kr=rr.Zb[Er];rr.Fb||(kr+=re)}else{if(0<Er){N.pb[Er]=N.pb[0];continue}kr=re}var hr=N.pb[Er];hr.Sc[0]=Yu[za(kr+Te,127)],hr.Sc[1]=wa[za(kr+0,127)],hr.Eb[0]=2*Yu[za(kr+fe,127)],hr.Eb[1]=101581*wa[za(kr+Ke,127)]>>16,8>hr.Eb[1]&&(hr.Eb[1]=8),hr.Qc[0]=Yu[za(kr+gt,117)],hr.Qc[1]=wa[za(kr+rt,127)],hr.lc=kr+rt}if(!Ue.Rb)return na(N,4,"Not a key frame.");for(Kt(Oe),Ue=N.Pa,re=0;4>re;++re){for(Te=0;8>Te;++Te)for(fe=0;3>fe;++fe)for(Ke=0;11>Ke;++Ke)gt=$t(Oe,xa[re][Te][fe][Ke])?ht(Oe,8):Tl[re][Te][fe][Ke],Ue.Wc[re][Te].Yb[fe][Ke]=gt;for(Te=0;17>Te;++Te)Ue.Xc[re][Te]=Ue.Wc[re][Oc[Te]]}return N.kc=Kt(Oe),N.kc&&(N.Bd=ht(Oe,8)),N.cb=1}function gl(N,$,re,fe,Te,Oe,Ue){var Ke=$[Te].Yb[re];for(re=0;16>Te;++Te){if(!$t(N,Ke[re+0]))return Te;for(;!$t(N,Ke[re+1]);)if(Ke=$[++Te].Yb[0],re=0,Te==16)return 16;var rt=$[Te+1].Yb;if($t(N,Ke[re+2])){var gt=N,rr=0;if($t(gt,(kr=Ke)[(Er=re)+3]))if($t(gt,kr[Er+6])){for(Ke=0,Er=2*(rr=$t(gt,kr[Er+8]))+(kr=$t(gt,kr[Er+9+rr])),rr=0,kr=Il[Er];kr[Ke];++Ke)rr+=rr+$t(gt,kr[Ke]);rr+=3+(8<<Er)}else $t(gt,kr[Er+7])?(rr=7+2*$t(gt,165),rr+=$t(gt,145)):rr=5+$t(gt,159);else rr=$t(gt,kr[Er+4])?3+$t(gt,kr[Er+5]):2;Ke=rt[2]}else rr=1,Ke=rt[1];rt=Ue+Xs[Te],0>(gt=N).b&&Pt(gt);var Er,kr=gt.b,hr=(Er=gt.Ca>>1)-(gt.I>>kr)>>31;--gt.b,gt.Ca+=hr,gt.Ca|=1,gt.I-=(Er+1&hr)<<kr,Oe[rt]=((rr^hr)-hr)*fe[(0<Te)+0]}return 16}function gs(N){var $=N.rb[N.sb-1];$.la=0,$.Na=0,o(N.zc,0,0,N.zc.length),N.ja=0}function $l(N,$){if(N==null)return 0;if($==null)return na(N,2,"NULL VP8Io parameter in VP8Decode().");if(!N.cb&&!ml(N,$))return 0;if(t(N.cb),$.ac==null||$.ac($)){$.ob&&(N.L=0);var re=En[N.L];if(N.L==2?(N.yb=0,N.zb=0):(N.yb=$.v-re>>4,N.zb=$.j-re>>4,0>N.yb&&(N.yb=0),0>N.zb&&(N.zb=0)),N.Va=$.o+15+re>>4,N.Hb=$.va+15+re>>4,N.Hb>N.za&&(N.Hb=N.za),N.Va>N.Ub&&(N.Va=N.Ub),0<N.L){var fe=N.ed;for(re=0;4>re;++re){var Te;if(N.Qa.Cb){var Oe=N.Qa.Lb[re];N.Qa.Fb||(Oe+=fe.Tb)}else Oe=fe.Tb;for(Te=0;1>=Te;++Te){var Ue=N.gd[re][Te],Ke=Oe;if(fe.Pc&&(Ke+=fe.vd[0],Te&&(Ke+=fe.od[0])),0<(Ke=0>Ke?0:63<Ke?63:Ke)){var rt=Ke;0<fe.wb&&(rt=4<fe.wb?rt>>2:rt>>1)>9-fe.wb&&(rt=9-fe.wb),1>rt&&(rt=1),Ue.dd=rt,Ue.tc=2*Ke+rt,Ue.ld=40<=Ke?2:15<=Ke?1:0}else Ue.tc=0;Ue.La=Te}}}re=0}else na(N,6,"Frame setup failed"),re=N.a;if(re=re==0){if(re){N.$c=0,0<N.Aa||(N.Ic=Li);e:{re=N.Ic,fe=4*(rt=N.za);var gt=32*rt,rr=rt+1,Er=0<N.L?rt*(0<N.Aa?2:1):0,kr=(N.Aa==2?2:1)*rt;if((Ue=fe+832+(Te=3*(16*re+En[N.L])/2*gt)+(Oe=N.Fa!=null&&0<N.Fa.length?N.Kc.c*N.Kc.i:0))!=Ue)re=0;else{if(Ue>N.Vb){if(N.Vb=0,N.Ec=u(Ue),N.Fc=0,N.Ec==null){re=na(N,1,"no memory during frame initialization.");break e}N.Vb=Ue}Ue=N.Ec,Ke=N.Fc,N.Ac=Ue,N.Bc=Ke,Ke+=fe,N.Gd=c(gt,Yo),N.Hd=0,N.rb=c(rr+1,Ii),N.sb=1,N.wa=Er?c(Er,Xi):null,N.Y=0,N.D.Nb=0,N.D.wa=N.wa,N.D.Y=N.Y,0<N.Aa&&(N.D.Y+=rt),t(!0),N.oc=Ue,N.pc=Ke,Ke+=832,N.ya=c(kr,ro),N.aa=0,N.D.ya=N.ya,N.D.aa=N.aa,N.Aa==2&&(N.D.aa+=rt),N.R=16*rt,N.B=8*rt,rt=(gt=En[N.L])*N.R,gt=gt/2*N.B,N.sa=Ue,N.ta=Ke+rt,N.qa=N.sa,N.ra=N.ta+16*re*N.R+gt,N.Ha=N.qa,N.Ia=N.ra+8*re*N.B+gt,N.$c=0,Ke+=Te,N.mb=Oe?Ue:null,N.nb=Oe?Ke:null,t(Ke+Oe<=N.Fc+N.Vb),gs(N),o(N.Ac,N.Bc,0,fe),re=1}}if(re){if($.ka=0,$.y=N.sa,$.O=N.ta,$.f=N.qa,$.N=N.ra,$.ea=N.Ha,$.Vd=N.Ia,$.fa=N.R,$.Rc=N.B,$.F=null,$.J=0,!Nc){for(re=-255;255>=re;++re)e0[255+re]=0>re?-re:re;for(re=-1020;1020>=re;++re)t0[1020+re]=-128>re?-128:127<re?127:re;for(re=-112;112>=re;++re)b0[112+re]=-16>re?-16:15<re?15:re;for(re=-255;510>=re;++re)Mi[255+re]=0>re?0:255<re?255:re;Nc=1}la=Ps,Wu=qu,fs=Vu,no=tl,ks=us,cs=Gl,il=uc,Jl=gu,ku=Qc,Ca=$u,Cl=Mc,ba=yu,Pn=vu,Oo=_u,Ji=Ri,Fo=bs,ga=Gs,An=Pc,M[0]=Mt,M[1]=du,M[2]=Ye,M[3]=dt,M[4]=Tt,M[5]=pr,M[6]=wr,M[7]=vr,M[8]=$r,M[9]=ar,as[0]=rl,as[1]=mu,as[2]=vs,as[3]=_s,as[4]=R,as[5]=W,as[6]=ae,d[0]=m,d[1]=_l,d[2]=cn,d[3]=In,d[4]=f,d[5]=Pr,d[6]=L,re=1}else re=0}re&&(re=function(hr,fn){for(hr.M=0;hr.M<hr.Va;++hr.M){var Dr,zt=hr.Jc[hr.M&hr.Xb],Xt=hr.m,Hr=hr;for(Dr=0;Dr<Hr.za;++Dr){var Qr=Xt,Wr=Hr,Nn=Wr.Ac,Cn=Wr.Bc+4*Dr,Ci=Wr.zc,Rn=Wr.ya[Wr.aa+Dr];if(Wr.Qa.Bb?Rn.$b=$t(Qr,Wr.Pa.jb[0])?2+$t(Qr,Wr.Pa.jb[2]):$t(Qr,Wr.Pa.jb[1]):Rn.$b=0,Wr.kc&&(Rn.Ad=$t(Qr,Wr.Bd)),Rn.Za=!$t(Qr,145)+0,Rn.Za){var Co=Rn.Ob,Po=0;for(Wr=0;4>Wr;++Wr){var io,$i=Ci[0+Wr];for(io=0;4>io;++io){$i=ca[Nn[Cn+io]][$i];for(var Eo=r0[$t(Qr,$i[0])];0<Eo;)Eo=r0[2*Eo+$t(Qr,$i[Eo])];$i=-Eo,Nn[Cn+io]=$i}n(Co,Po,Nn,Cn,4),Po+=4,Ci[0+Wr]=$i}}else $i=$t(Qr,156)?$t(Qr,128)?1:3:$t(Qr,163)?2:0,Rn.Ob[0]=$i,o(Nn,Cn,$i,4),o(Ci,0,$i,4);Rn.Dd=$t(Qr,142)?$t(Qr,114)?$t(Qr,183)?1:3:2:0}if(Hr.m.Ka)return na(hr,7,"Premature end-of-partition0 encountered.");for(;hr.ja<hr.za;++hr.ja){if(Hr=zt,Qr=(Xt=hr).rb[Xt.sb-1],Nn=Xt.rb[Xt.sb+Xt.ja],Dr=Xt.ya[Xt.aa+Xt.ja],Cn=Xt.kc?Dr.Ad:0)Qr.la=Nn.la=0,Dr.Za||(Qr.Na=Nn.Na=0),Dr.Hc=0,Dr.Gc=0,Dr.ia=0;else{var Mo,Ki;if(Qr=Nn,Nn=Hr,Cn=Xt.Pa.Xc,Ci=Xt.ya[Xt.aa+Xt.ja],Rn=Xt.pb[Ci.$b],Wr=Ci.ad,Co=0,Po=Xt.rb[Xt.sb-1],$i=io=0,o(Wr,Co,0,384),Ci.Za)var Fa=0,Fi=Cn[3];else{Eo=u(16);var pa=Qr.Na+Po.Na;if(pa=Bo(Nn,Cn[1],pa,Rn.Eb,0,Eo,0),Qr.Na=Po.Na=(0<pa)+0,1<pa)la(Eo,0,Wr,Co);else{var Ha=Eo[0]+3>>3;for(Eo=0;256>Eo;Eo+=16)Wr[Co+Eo]=Ha}Fa=1,Fi=Cn[0]}var vo=15&Qr.la,ya=15&Po.la;for(Eo=0;4>Eo;++Eo){var Ba=1&ya;for(Ha=Ki=0;4>Ha;++Ha)vo=vo>>1|(Ba=(pa=Bo(Nn,Fi,pa=Ba+(1&vo),Rn.Sc,Fa,Wr,Co))>Fa)<<7,Ki=Ki<<2|(3<pa?3:1<pa?2:Wr[Co+0]!=0),Co+=16;vo>>=4,ya=ya>>1|Ba<<7,io=(io<<8|Ki)>>>0}for(Fi=vo,Fa=ya>>4,Mo=0;4>Mo;Mo+=2){for(Ki=0,vo=Qr.la>>4+Mo,ya=Po.la>>4+Mo,Eo=0;2>Eo;++Eo){for(Ba=1&ya,Ha=0;2>Ha;++Ha)pa=Ba+(1&vo),vo=vo>>1|(Ba=0<(pa=Bo(Nn,Cn[2],pa,Rn.Qc,0,Wr,Co)))<<3,Ki=Ki<<2|(3<pa?3:1<pa?2:Wr[Co+0]!=0),Co+=16;vo>>=2,ya=ya>>1|Ba<<5}$i|=Ki<<4*Mo,Fi|=vo<<4<<Mo,Fa|=(240&ya)<<Mo}Qr.la=Fi,Po.la=Fa,Ci.Hc=io,Ci.Gc=$i,Ci.ia=43690&$i?0:Rn.ia,Cn=!(io|$i)}if(0<Xt.L&&(Xt.wa[Xt.Y+Xt.ja]=Xt.gd[Dr.$b][Dr.Za],Xt.wa[Xt.Y+Xt.ja].La|=!Cn),Hr.Ka)return na(hr,7,"Premature end-of-file encountered.")}if(gs(hr),Xt=fn,Hr=1,Dr=(zt=hr).D,Qr=0<zt.L&&zt.M>=zt.zb&&zt.M<=zt.Va,zt.Aa==0)e:{if(Dr.M=zt.M,Dr.uc=Qr,Hu(zt,Dr),Hr=1,Dr=(Ki=zt.D).Nb,Qr=($i=En[zt.L])*zt.R,Nn=$i/2*zt.B,Eo=16*Dr*zt.R,Ha=8*Dr*zt.B,Cn=zt.sa,Ci=zt.ta-Qr+Eo,Rn=zt.qa,Wr=zt.ra-Nn+Ha,Co=zt.Ha,Po=zt.Ia-Nn+Ha,ya=(vo=Ki.M)==0,io=vo>=zt.Va-1,zt.Aa==2&&Hu(zt,Ki),Ki.uc)for(Ba=(pa=zt).D.M,t(pa.D.uc),Ki=pa.yb;Ki<pa.Hb;++Ki){Fa=Ki,Fi=Ba;var Wa=(Ho=(da=pa).D).Nb;Mo=da.R;var Ho=Ho.wa[Ho.Y+Fa],ss=da.sa,Os=da.ta+16*Wa*Mo+16*Fa,Vo=Ho.dd,Ia=Ho.tc;if(Ia!=0)if(t(3<=Ia),da.L==1)0<Fa&&Fo(ss,Os,Mo,Ia+4),Ho.La&&An(ss,Os,Mo,Ia),0<Fi&&Ji(ss,Os,Mo,Ia+4),Ho.La&&ga(ss,Os,Mo,Ia);else{var tu=da.B,Fs=da.qa,Ys=da.ra+8*Wa*tu+8*Fa,Js=da.Ha,da=da.Ia+8*Wa*tu+8*Fa;Wa=Ho.ld,0<Fa&&(Jl(ss,Os,Mo,Ia+4,Vo,Wa),Ca(Fs,Ys,Js,da,tu,Ia+4,Vo,Wa)),Ho.La&&(ba(ss,Os,Mo,Ia,Vo,Wa),Oo(Fs,Ys,Js,da,tu,Ia,Vo,Wa)),0<Fi&&(il(ss,Os,Mo,Ia+4,Vo,Wa),ku(Fs,Ys,Js,da,tu,Ia+4,Vo,Wa)),Ho.La&&(Cl(ss,Os,Mo,Ia,Vo,Wa),Pn(Fs,Ys,Js,da,tu,Ia,Vo,Wa))}}if(zt.ia&&alert("todo:DitherRow"),Xt.put!=null){if(Ki=16*vo,vo=16*(vo+1),ya?(Xt.y=zt.sa,Xt.O=zt.ta+Eo,Xt.f=zt.qa,Xt.N=zt.ra+Ha,Xt.ea=zt.Ha,Xt.W=zt.Ia+Ha):(Ki-=$i,Xt.y=Cn,Xt.O=Ci,Xt.f=Rn,Xt.N=Wr,Xt.ea=Co,Xt.W=Po),io||(vo-=$i),vo>Xt.o&&(vo=Xt.o),Xt.F=null,Xt.J=null,zt.Fa!=null&&0<zt.Fa.length&&Ki<vo&&(Xt.J=Lo(zt,Xt,Ki,vo-Ki),Xt.F=zt.mb,Xt.F==null&&Xt.F.length==0)){Hr=na(zt,3,"Could not decode alpha data.");break e}Ki<Xt.j&&($i=Xt.j-Ki,Ki=Xt.j,t(!(1&$i)),Xt.O+=zt.R*$i,Xt.N+=zt.B*($i>>1),Xt.W+=zt.B*($i>>1),Xt.F!=null&&(Xt.J+=Xt.width*$i)),Ki<vo&&(Xt.O+=Xt.v,Xt.N+=Xt.v>>1,Xt.W+=Xt.v>>1,Xt.F!=null&&(Xt.J+=Xt.v),Xt.ka=Ki-Xt.j,Xt.U=Xt.va-Xt.v,Xt.T=vo-Ki,Hr=Xt.put(Xt))}Dr+1!=zt.Ic||io||(n(zt.sa,zt.ta-Qr,Cn,Ci+16*zt.R,Qr),n(zt.qa,zt.ra-Nn,Rn,Wr+8*zt.B,Nn),n(zt.Ha,zt.Ia-Nn,Co,Po+8*zt.B,Nn))}if(!Hr)return na(hr,6,"Output aborted.")}return 1}(N,$)),$.bc!=null&&$.bc($),re&=1}return re?(N.cb=0,re):0}function ys(N,$,re,fe,Te){Te=N[$+re+32*fe]+(Te>>3),N[$+re+32*fe]=-256&Te?0>Te?0:255:Te}function Uu(N,$,re,fe,Te,Oe){ys(N,$,0,re,fe+Te),ys(N,$,1,re,fe+Oe),ys(N,$,2,re,fe-Oe),ys(N,$,3,re,fe-Te)}function $a(N){return(20091*N>>16)+N}function yl(N,$,re,fe){var Te,Oe=0,Ue=u(16);for(Te=0;4>Te;++Te){var Ke=N[$+0]+N[$+8],rt=N[$+0]-N[$+8],gt=(35468*N[$+4]>>16)-$a(N[$+12]),rr=$a(N[$+4])+(35468*N[$+12]>>16);Ue[Oe+0]=Ke+rr,Ue[Oe+1]=rt+gt,Ue[Oe+2]=rt-gt,Ue[Oe+3]=Ke-rr,Oe+=4,$++}for(Te=Oe=0;4>Te;++Te)Ke=(N=Ue[Oe+0]+4)+Ue[Oe+8],rt=N-Ue[Oe+8],gt=(35468*Ue[Oe+4]>>16)-$a(Ue[Oe+12]),ys(re,fe,0,0,Ke+(rr=$a(Ue[Oe+4])+(35468*Ue[Oe+12]>>16))),ys(re,fe,1,0,rt+gt),ys(re,fe,2,0,rt-gt),ys(re,fe,3,0,Ke-rr),Oe++,fe+=32}function Gl(N,$,re,fe){var Te=N[$+0]+4,Oe=35468*N[$+4]>>16,Ue=$a(N[$+4]),Ke=35468*N[$+1]>>16;Uu(re,fe,0,Te+Ue,N=$a(N[$+1]),Ke),Uu(re,fe,1,Te+Oe,N,Ke),Uu(re,fe,2,Te-Oe,N,Ke),Uu(re,fe,3,Te-Ue,N,Ke)}function qu(N,$,re,fe,Te){yl(N,$,re,fe),Te&&yl(N,$+16,re,fe+4)}function Vu(N,$,re,fe){Wu(N,$+0,re,fe,1),Wu(N,$+32,re,fe+128,1)}function tl(N,$,re,fe){var Te;for(N=N[$+0]+4,Te=0;4>Te;++Te)for($=0;4>$;++$)ys(re,fe,$,Te,N)}function us(N,$,re,fe){N[$+0]&&no(N,$+0,re,fe),N[$+16]&&no(N,$+16,re,fe+4),N[$+32]&&no(N,$+32,re,fe+128),N[$+48]&&no(N,$+48,re,fe+128+4)}function Ps(N,$,re,fe){var Te,Oe=u(16);for(Te=0;4>Te;++Te){var Ue=N[$+0+Te]+N[$+12+Te],Ke=N[$+4+Te]+N[$+8+Te],rt=N[$+4+Te]-N[$+8+Te],gt=N[$+0+Te]-N[$+12+Te];Oe[0+Te]=Ue+Ke,Oe[8+Te]=Ue-Ke,Oe[4+Te]=gt+rt,Oe[12+Te]=gt-rt}for(Te=0;4>Te;++Te)Ue=(N=Oe[0+4*Te]+3)+Oe[3+4*Te],Ke=Oe[1+4*Te]+Oe[2+4*Te],rt=Oe[1+4*Te]-Oe[2+4*Te],gt=N-Oe[3+4*Te],re[fe+0]=Ue+Ke>>3,re[fe+16]=gt+rt>>3,re[fe+32]=Ue-Ke>>3,re[fe+48]=gt-rt>>3,fe+=64}function vl(N,$,re){var fe,Te=$-32,Oe=os,Ue=255-N[Te-1];for(fe=0;fe<re;++fe){var Ke,rt=Oe,gt=Ue+N[$-1];for(Ke=0;Ke<re;++Ke)N[$+Ke]=rt[gt+N[Te+Ke]];$+=32}}function du(N,$){vl(N,$,4)}function _l(N,$){vl(N,$,8)}function mu(N,$){vl(N,$,16)}function vs(N,$){var re;for(re=0;16>re;++re)n(N,$+32*re,N,$-32,16)}function _s(N,$){var re;for(re=16;0<re;--re)o(N,$,N[$-1],16),$+=32}function Ro(N,$,re){var fe;for(fe=0;16>fe;++fe)o($,re+32*fe,N,16)}function rl(N,$){var re,fe=16;for(re=0;16>re;++re)fe+=N[$-1+32*re]+N[$+re-32];Ro(fe>>5,N,$)}function R(N,$){var re,fe=8;for(re=0;16>re;++re)fe+=N[$-1+32*re];Ro(fe>>4,N,$)}function W(N,$){var re,fe=8;for(re=0;16>re;++re)fe+=N[$+re-32];Ro(fe>>4,N,$)}function ae(N,$){Ro(128,N,$)}function ke(N,$,re){return N+2*$+re+2>>2}function Ye(N,$){var re,fe=$-32;for(fe=new Uint8Array([ke(N[fe-1],N[fe+0],N[fe+1]),ke(N[fe+0],N[fe+1],N[fe+2]),ke(N[fe+1],N[fe+2],N[fe+3]),ke(N[fe+2],N[fe+3],N[fe+4])]),re=0;4>re;++re)n(N,$+32*re,fe,0,fe.length)}function dt(N,$){var re=N[$-1],fe=N[$-1+32],Te=N[$-1+64],Oe=N[$-1+96];br(N,$+0,16843009*ke(N[$-1-32],re,fe)),br(N,$+32,16843009*ke(re,fe,Te)),br(N,$+64,16843009*ke(fe,Te,Oe)),br(N,$+96,16843009*ke(Te,Oe,Oe))}function Mt(N,$){var re,fe=4;for(re=0;4>re;++re)fe+=N[$+re-32]+N[$-1+32*re];for(fe>>=3,re=0;4>re;++re)o(N,$+32*re,fe,4)}function Tt(N,$){var re=N[$-1+0],fe=N[$-1+32],Te=N[$-1+64],Oe=N[$-1-32],Ue=N[$+0-32],Ke=N[$+1-32],rt=N[$+2-32],gt=N[$+3-32];N[$+0+96]=ke(fe,Te,N[$-1+96]),N[$+1+96]=N[$+0+64]=ke(re,fe,Te),N[$+2+96]=N[$+1+64]=N[$+0+32]=ke(Oe,re,fe),N[$+3+96]=N[$+2+64]=N[$+1+32]=N[$+0+0]=ke(Ue,Oe,re),N[$+3+64]=N[$+2+32]=N[$+1+0]=ke(Ke,Ue,Oe),N[$+3+32]=N[$+2+0]=ke(rt,Ke,Ue),N[$+3+0]=ke(gt,rt,Ke)}function wr(N,$){var re=N[$+1-32],fe=N[$+2-32],Te=N[$+3-32],Oe=N[$+4-32],Ue=N[$+5-32],Ke=N[$+6-32],rt=N[$+7-32];N[$+0+0]=ke(N[$+0-32],re,fe),N[$+1+0]=N[$+0+32]=ke(re,fe,Te),N[$+2+0]=N[$+1+32]=N[$+0+64]=ke(fe,Te,Oe),N[$+3+0]=N[$+2+32]=N[$+1+64]=N[$+0+96]=ke(Te,Oe,Ue),N[$+3+32]=N[$+2+64]=N[$+1+96]=ke(Oe,Ue,Ke),N[$+3+64]=N[$+2+96]=ke(Ue,Ke,rt),N[$+3+96]=ke(Ke,rt,rt)}function pr(N,$){var re=N[$-1+0],fe=N[$-1+32],Te=N[$-1+64],Oe=N[$-1-32],Ue=N[$+0-32],Ke=N[$+1-32],rt=N[$+2-32],gt=N[$+3-32];N[$+0+0]=N[$+1+64]=Oe+Ue+1>>1,N[$+1+0]=N[$+2+64]=Ue+Ke+1>>1,N[$+2+0]=N[$+3+64]=Ke+rt+1>>1,N[$+3+0]=rt+gt+1>>1,N[$+0+96]=ke(Te,fe,re),N[$+0+64]=ke(fe,re,Oe),N[$+0+32]=N[$+1+96]=ke(re,Oe,Ue),N[$+1+32]=N[$+2+96]=ke(Oe,Ue,Ke),N[$+2+32]=N[$+3+96]=ke(Ue,Ke,rt),N[$+3+32]=ke(Ke,rt,gt)}function vr(N,$){var re=N[$+0-32],fe=N[$+1-32],Te=N[$+2-32],Oe=N[$+3-32],Ue=N[$+4-32],Ke=N[$+5-32],rt=N[$+6-32],gt=N[$+7-32];N[$+0+0]=re+fe+1>>1,N[$+1+0]=N[$+0+64]=fe+Te+1>>1,N[$+2+0]=N[$+1+64]=Te+Oe+1>>1,N[$+3+0]=N[$+2+64]=Oe+Ue+1>>1,N[$+0+32]=ke(re,fe,Te),N[$+1+32]=N[$+0+96]=ke(fe,Te,Oe),N[$+2+32]=N[$+1+96]=ke(Te,Oe,Ue),N[$+3+32]=N[$+2+96]=ke(Oe,Ue,Ke),N[$+3+64]=ke(Ue,Ke,rt),N[$+3+96]=ke(Ke,rt,gt)}function ar(N,$){var re=N[$-1+0],fe=N[$-1+32],Te=N[$-1+64],Oe=N[$-1+96];N[$+0+0]=re+fe+1>>1,N[$+2+0]=N[$+0+32]=fe+Te+1>>1,N[$+2+32]=N[$+0+64]=Te+Oe+1>>1,N[$+1+0]=ke(re,fe,Te),N[$+3+0]=N[$+1+32]=ke(fe,Te,Oe),N[$+3+32]=N[$+1+64]=ke(Te,Oe,Oe),N[$+3+64]=N[$+2+64]=N[$+0+96]=N[$+1+96]=N[$+2+96]=N[$+3+96]=Oe}function $r(N,$){var re=N[$-1+0],fe=N[$-1+32],Te=N[$-1+64],Oe=N[$-1+96],Ue=N[$-1-32],Ke=N[$+0-32],rt=N[$+1-32],gt=N[$+2-32];N[$+0+0]=N[$+2+32]=re+Ue+1>>1,N[$+0+32]=N[$+2+64]=fe+re+1>>1,N[$+0+64]=N[$+2+96]=Te+fe+1>>1,N[$+0+96]=Oe+Te+1>>1,N[$+3+0]=ke(Ke,rt,gt),N[$+2+0]=ke(Ue,Ke,rt),N[$+1+0]=N[$+3+32]=ke(re,Ue,Ke),N[$+1+32]=N[$+3+64]=ke(fe,re,Ue),N[$+1+64]=N[$+3+96]=ke(Te,fe,re),N[$+1+96]=ke(Oe,Te,fe)}function cn(N,$){var re;for(re=0;8>re;++re)n(N,$+32*re,N,$-32,8)}function In(N,$){var re;for(re=0;8>re;++re)o(N,$,N[$-1],8),$+=32}function et(N,$,re){var fe;for(fe=0;8>fe;++fe)o($,re+32*fe,N,8)}function m(N,$){var re,fe=8;for(re=0;8>re;++re)fe+=N[$+re-32]+N[$-1+32*re];et(fe>>4,N,$)}function Pr(N,$){var re,fe=4;for(re=0;8>re;++re)fe+=N[$+re-32];et(fe>>3,N,$)}function f(N,$){var re,fe=4;for(re=0;8>re;++re)fe+=N[$-1+32*re];et(fe>>3,N,$)}function L(N,$){et(128,N,$)}function kn(N,$,re){var fe=N[$-re],Te=N[$+0],Oe=3*(Te-fe)+fc[1020+N[$-2*re]-N[$+re]],Ue=ua[112+(Oe+4>>3)];N[$-re]=os[255+fe+ua[112+(Oe+3>>3)]],N[$+0]=os[255+Te-Ue]}function ii(N,$,re,fe){var Te=N[$+0],Oe=N[$+re];return ia[255+N[$-2*re]-N[$-re]]>fe||ia[255+Oe-Te]>fe}function To(N,$,re,fe){return 4*ia[255+N[$-re]-N[$+0]]+ia[255+N[$-2*re]-N[$+re]]<=fe}function J(N,$,re,fe,Te){var Oe=N[$-3*re],Ue=N[$-2*re],Ke=N[$-re],rt=N[$+0],gt=N[$+re],rr=N[$+2*re],Er=N[$+3*re];return 4*ia[255+Ke-rt]+ia[255+Ue-gt]>fe?0:ia[255+N[$-4*re]-Oe]<=Te&&ia[255+Oe-Ue]<=Te&&ia[255+Ue-Ke]<=Te&&ia[255+Er-rr]<=Te&&ia[255+rr-gt]<=Te&&ia[255+gt-rt]<=Te}function Ri(N,$,re,fe){var Te=2*fe+1;for(fe=0;16>fe;++fe)To(N,$+fe,re,Te)&&kn(N,$+fe,re)}function bs(N,$,re,fe){var Te=2*fe+1;for(fe=0;16>fe;++fe)To(N,$+fe*re,1,Te)&&kn(N,$+fe*re,1)}function Gs(N,$,re,fe){var Te;for(Te=3;0<Te;--Te)Ri(N,$+=4*re,re,fe)}function Pc(N,$,re,fe){var Te;for(Te=3;0<Te;--Te)bs(N,$+=4,re,fe)}function bl(N,$,re,fe,Te,Oe,Ue,Ke){for(Oe=2*Oe+1;0<Te--;){if(J(N,$,re,Oe,Ue))if(ii(N,$,re,Ke))kn(N,$,re);else{var rt=N,gt=$,rr=re,Er=rt[gt-2*rr],kr=rt[gt-rr],hr=rt[gt+0],fn=rt[gt+rr],Dr=rt[gt+2*rr],zt=27*(Hr=fc[1020+3*(hr-kr)+fc[1020+Er-fn]])+63>>7,Xt=18*Hr+63>>7,Hr=9*Hr+63>>7;rt[gt-3*rr]=os[255+rt[gt-3*rr]+Hr],rt[gt-2*rr]=os[255+Er+Xt],rt[gt-rr]=os[255+kr+zt],rt[gt+0]=os[255+hr-zt],rt[gt+rr]=os[255+fn-Xt],rt[gt+2*rr]=os[255+Dr-Hr]}$+=fe}}function Xa(N,$,re,fe,Te,Oe,Ue,Ke){for(Oe=2*Oe+1;0<Te--;){if(J(N,$,re,Oe,Ue))if(ii(N,$,re,Ke))kn(N,$,re);else{var rt=N,gt=$,rr=re,Er=rt[gt-rr],kr=rt[gt+0],hr=rt[gt+rr],fn=ua[112+((Dr=3*(kr-Er))+4>>3)],Dr=ua[112+(Dr+3>>3)],zt=fn+1>>1;rt[gt-2*rr]=os[255+rt[gt-2*rr]+zt],rt[gt-rr]=os[255+Er+Dr],rt[gt+0]=os[255+kr-fn],rt[gt+rr]=os[255+hr-zt]}$+=fe}}function uc(N,$,re,fe,Te,Oe){bl(N,$,re,1,16,fe,Te,Oe)}function gu(N,$,re,fe,Te,Oe){bl(N,$,1,re,16,fe,Te,Oe)}function Mc(N,$,re,fe,Te,Oe){var Ue;for(Ue=3;0<Ue;--Ue)Xa(N,$+=4*re,re,1,16,fe,Te,Oe)}function yu(N,$,re,fe,Te,Oe){var Ue;for(Ue=3;0<Ue;--Ue)Xa(N,$+=4,1,re,16,fe,Te,Oe)}function Qc(N,$,re,fe,Te,Oe,Ue,Ke){bl(N,$,Te,1,8,Oe,Ue,Ke),bl(re,fe,Te,1,8,Oe,Ue,Ke)}function $u(N,$,re,fe,Te,Oe,Ue,Ke){bl(N,$,1,Te,8,Oe,Ue,Ke),bl(re,fe,1,Te,8,Oe,Ue,Ke)}function vu(N,$,re,fe,Te,Oe,Ue,Ke){Xa(N,$+4*Te,Te,1,8,Oe,Ue,Ke),Xa(re,fe+4*Te,Te,1,8,Oe,Ue,Ke)}function _u(N,$,re,fe,Te,Oe,Ue,Ke){Xa(N,$+4,1,Te,8,Oe,Ue,Ke),Xa(re,fe+4,1,Te,8,Oe,Ue,Ke)}function Hl(){this.ba=new No,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new co,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function bu(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function jn(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function Fn(){this.ua=0,this.Wa=new ct,this.vb=new ct,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new ot,this.yc=new Ie}function Gu(){this.xb=this.a=0,this.l=new Jo,this.ca=new No,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new xe,this.Pb=0,this.wd=new xe,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new Fn,this.ab=0,this.gc=c(4,jn),this.Oc=0}function Ms(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new Jo,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function ws(N,$,re,fe,Te,Oe,Ue){for(N=N==null?0:N[$+0],$=0;$<Ue;++$)Te[Oe+$]=N+re[fe+$]&255,N=Te[Oe+$]}function Wl(N,$,re,fe,Te,Oe,Ue){var Ke;if(N==null)ws(null,null,re,fe,Te,Oe,Ue);else for(Ke=0;Ke<Ue;++Ke)Te[Oe+Ke]=N[$+Ke]+re[fe+Ke]&255}function xs(N,$,re,fe,Te,Oe,Ue){if(N==null)ws(null,null,re,fe,Te,Oe,Ue);else{var Ke,rt=N[$+0],gt=rt,rr=rt;for(Ke=0;Ke<Ue;++Ke)gt=rr+(rt=N[$+Ke])-gt,rr=re[fe+Ke]+(-256&gt?0>gt?0:255:gt)&255,gt=rt,Te[Oe+Ke]=rr}}function Lo(N,$,re,fe){var Te=$.width,Oe=$.o;if(t(N!=null&&$!=null),0>re||0>=fe||re+fe>Oe)return null;if(!N.Cc){if(N.ga==null){var Ue;if(N.ga=new Ms,(Ue=N.ga==null)||(Ue=$.width*$.o,t(N.Gb.length==0),N.Gb=u(Ue),N.Uc=0,N.Gb==null?Ue=0:(N.mb=N.Gb,N.nb=N.Uc,N.rc=null,Ue=1),Ue=!Ue),!Ue){Ue=N.ga;var Ke=N.Fa,rt=N.P,gt=N.qc,rr=N.mb,Er=N.nb,kr=rt+1,hr=gt-1,fn=Ue.l;if(t(Ke!=null&&rr!=null&&$!=null),D[0]=null,D[1]=ws,D[2]=Wl,D[3]=xs,Ue.ca=rr,Ue.tb=Er,Ue.c=$.width,Ue.i=$.height,t(0<Ue.c&&0<Ue.i),1>=gt)$=0;else if(Ue.$a=Ke[rt+0]>>0&3,Ue.Z=Ke[rt+0]>>2&3,Ue.Lc=Ke[rt+0]>>4&3,rt=Ke[rt+0]>>6&3,0>Ue.$a||1<Ue.$a||4<=Ue.Z||1<Ue.Lc||rt)$=0;else if(fn.put=Ti,fn.ac=pi,fn.bc=Xo,fn.ma=Ue,fn.width=$.width,fn.height=$.height,fn.Da=$.Da,fn.v=$.v,fn.va=$.va,fn.j=$.j,fn.o=$.o,Ue.$a)e:{t(Ue.$a==1),$=Nt();t:for(;;){if($==null){$=0;break e}if(t(Ue!=null),Ue.mc=$,$.c=Ue.c,$.i=Ue.i,$.l=Ue.l,$.l.ma=Ue,$.l.width=Ue.c,$.l.height=Ue.i,$.a=0,ut($.m,Ke,kr,hr),!ir(Ue.c,Ue.i,1,$,null)||($.ab==1&&$.gc[0].hc==3&&nt($.s)?(Ue.ic=1,Ke=$.c*$.i,$.Ta=null,$.Ua=0,$.V=u(Ke),$.Ba=0,$.V==null?($.a=1,$=0):$=1):(Ue.ic=0,$=Br($,Ue.c)),!$))break t;$=1;break e}Ue.mc=null,$=0}else $=hr>=Ue.c*Ue.i;Ue=!$}if(Ue)return null;N.ga.Lc!=1?N.Ga=0:fe=Oe-re}t(N.ga!=null),t(re+fe<=Oe);e:{if($=(Ke=N.ga).c,Oe=Ke.l.o,Ke.$a==0){if(kr=N.rc,hr=N.Vc,fn=N.Fa,rt=N.P+1+re*$,gt=N.mb,rr=N.nb+re*$,t(rt<=N.P+N.qc),Ke.Z!=0)for(t(D[Ke.Z]!=null),Ue=0;Ue<fe;++Ue)D[Ke.Z](kr,hr,fn,rt,gt,rr,$),kr=gt,hr=rr,rr+=$,rt+=$;else for(Ue=0;Ue<fe;++Ue)n(gt,rr,fn,rt,$),kr=gt,hr=rr,rr+=$,rt+=$;N.rc=kr,N.Vc=hr}else{if(t(Ke.mc!=null),$=re+fe,t((Ue=Ke.mc)!=null),t($<=Ue.i),Ue.C>=$)$=1;else if(Ke.ic||ur(),Ke.ic){Ke=Ue.V,kr=Ue.Ba,hr=Ue.c;var Dr=Ue.i,zt=(fn=1,rt=Ue.$/hr,gt=Ue.$%hr,rr=Ue.m,Er=Ue.s,Ue.$),Xt=hr*Dr,Hr=hr*$,Qr=Er.wc,Wr=zt<Hr?be(Er,gt,rt):null;t(zt<=Xt),t($<=Dr),t(nt(Er));t:for(;;){for(;!rr.h&&zt<Hr;){if(gt&Qr||(Wr=be(Er,gt,rt)),t(Wr!=null),At(rr),256>(Dr=ha(Wr.G[0],Wr.H[0],rr)))Ke[kr+zt]=Dr,++zt,++gt>=hr&&(gt=0,++rt<=$&&!(rt%16)&&Rt(Ue,rt));else{if(!(280>Dr)){fn=0;break t}Dr=ze(Dr-256,rr);var Nn,Cn=ha(Wr.G[4],Wr.H[4],rr);if(At(rr),!(zt>=(Cn=Ea(hr,Cn=ze(Cn,rr)))&&Xt-zt>=Dr)){fn=0;break t}for(Nn=0;Nn<Dr;++Nn)Ke[kr+zt+Nn]=Ke[kr+zt+Nn-Cn];for(zt+=Dr,gt+=Dr;gt>=hr;)gt-=hr,++rt<=$&&!(rt%16)&&Rt(Ue,rt);zt<Hr&&gt&Qr&&(Wr=be(Er,gt,rt))}t(rr.h==Pe(rr))}Rt(Ue,rt>$?$:rt);break t}!fn||rr.h&&zt<Xt?(fn=0,Ue.a=rr.h?5:3):Ue.$=zt,$=fn}else $=Re(Ue,Ue.V,Ue.Ba,Ue.c,Ue.i,$,nn);if(!$){fe=0;break e}}re+fe>=Oe&&(N.Cc=1),fe=1}if(!fe)return null;if(N.Cc&&((fe=N.ga)!=null&&(fe.mc=null),N.ga=null,0<N.Ga))return alert("todo:WebPDequantizeLevels"),null}return N.nb+re*Te}function te(N,$,re,fe,Te,Oe){for(;0<Te--;){var Ue,Ke=N,rt=$+(re?1:0),gt=N,rr=$+(re?0:3);for(Ue=0;Ue<fe;++Ue){var Er=gt[rr+4*Ue];Er!=255&&(Er*=32897,Ke[rt+4*Ue+0]=Ke[rt+4*Ue+0]*Er>>23,Ke[rt+4*Ue+1]=Ke[rt+4*Ue+1]*Er>>23,Ke[rt+4*Ue+2]=Ke[rt+4*Ue+2]*Er>>23)}$+=Oe}}function Le(N,$,re,fe,Te){for(;0<fe--;){var Oe;for(Oe=0;Oe<re;++Oe){var Ue=N[$+2*Oe+0],Ke=15&(gt=N[$+2*Oe+1]),rt=4369*Ke,gt=(240&gt|gt>>4)*rt>>16;N[$+2*Oe+0]=(240&Ue|Ue>>4)*rt>>16&240|(15&Ue|Ue<<4)*rt>>16>>4&15,N[$+2*Oe+1]=240&gt|Ke}$+=Te}}function pt(N,$,re,fe,Te,Oe,Ue,Ke){var rt,gt,rr=255;for(gt=0;gt<Te;++gt){for(rt=0;rt<fe;++rt){var Er=N[$+rt];Oe[Ue+4*rt]=Er,rr&=Er}$+=re,Ue+=Ke}return rr!=255}function Bt(N,$,re,fe,Te){var Oe;for(Oe=0;Oe<Te;++Oe)re[fe+Oe]=N[$+Oe]>>8}function ur(){As=te,Zu=Le,Xu=pt,zc=Bt}function Xr(N,$,re){pe[N]=function(fe,Te,Oe,Ue,Ke,rt,gt,rr,Er,kr,hr,fn,Dr,zt,Xt,Hr,Qr){var Wr,Nn=Qr-1>>1,Cn=Ke[rt+0]|gt[rr+0]<<16,Ci=Er[kr+0]|hr[fn+0]<<16;t(fe!=null);var Rn=3*Cn+Ci+131074>>2;for($(fe[Te+0],255&Rn,Rn>>16,Dr,zt),Oe!=null&&(Rn=3*Ci+Cn+131074>>2,$(Oe[Ue+0],255&Rn,Rn>>16,Xt,Hr)),Wr=1;Wr<=Nn;++Wr){var Co=Ke[rt+Wr]|gt[rr+Wr]<<16,Po=Er[kr+Wr]|hr[fn+Wr]<<16,io=Cn+Co+Ci+Po+524296,$i=io+2*(Co+Ci)>>3;Rn=$i+Cn>>1,Cn=(io=io+2*(Cn+Po)>>3)+Co>>1,$(fe[Te+2*Wr-1],255&Rn,Rn>>16,Dr,zt+(2*Wr-1)*re),$(fe[Te+2*Wr-0],255&Cn,Cn>>16,Dr,zt+(2*Wr-0)*re),Oe!=null&&(Rn=io+Ci>>1,Cn=$i+Po>>1,$(Oe[Ue+2*Wr-1],255&Rn,Rn>>16,Xt,Hr+(2*Wr-1)*re),$(Oe[Ue+2*Wr+0],255&Cn,Cn>>16,Xt,Hr+(2*Wr+0)*re)),Cn=Co,Ci=Po}1&Qr||(Rn=3*Cn+Ci+131074>>2,$(fe[Te+Qr-1],255&Rn,Rn>>16,Dr,zt+(Qr-1)*re),Oe!=null&&(Rn=3*Ci+Cn+131074>>2,$(Oe[Ue+Qr-1],255&Rn,Rn>>16,Xt,Hr+(Qr-1)*re)))}}function gn(){q[Zs]=Y,q[hc]=le,q[Kl]=oe,q[Ql]=de,q[eu]=Se,q[ho]=je,q[Es]=Je,q[Go]=le,q[Ss]=de,q[Au]=Se,q[Rc]=je}function Xn(N){return N&~Ar?0>N?0:255:N>>cr}function xi(N,$){return Xn((19077*N>>8)+(26149*$>>8)-14234)}function Oi(N,$,re){return Xn((19077*N>>8)-(6419*$>>8)-(13320*re>>8)+8708)}function Yi(N,$){return Xn((19077*N>>8)+(33050*$>>8)-17685)}function fo(N,$,re,fe,Te){fe[Te+0]=xi(N,re),fe[Te+1]=Oi(N,$,re),fe[Te+2]=Yi(N,$)}function qo(N,$,re,fe,Te){fe[Te+0]=Yi(N,$),fe[Te+1]=Oi(N,$,re),fe[Te+2]=xi(N,re)}function Ko(N,$,re,fe,Te){var Oe=Oi(N,$,re);$=Oe<<3&224|Yi(N,$)>>3,fe[Te+0]=248&xi(N,re)|Oe>>5,fe[Te+1]=$}function Qo(N,$,re,fe,Te){var Oe=240&Yi(N,$)|15;fe[Te+0]=240&xi(N,re)|Oi(N,$,re)>>4,fe[Te+1]=Oe}function Da(N,$,re,fe,Te){fe[Te+0]=255,fo(N,$,re,fe,Te+1)}function aa(N,$,re,fe,Te){qo(N,$,re,fe,Te),fe[Te+3]=255}function Vi(N,$,re,fe,Te){fo(N,$,re,fe,Te),fe[Te+3]=255}function za(N,$){return 0>N?0:N>$?$:N}function Sa(N,$,re){pe[N]=function(fe,Te,Oe,Ue,Ke,rt,gt,rr,Er){for(var kr=rr+(-2&Er)*re;rr!=kr;)$(fe[Te+0],Oe[Ue+0],Ke[rt+0],gt,rr),$(fe[Te+1],Oe[Ue+0],Ke[rt+0],gt,rr+re),Te+=2,++Ue,++rt,rr+=2*re;1&Er&&$(fe[Te+0],Oe[Ue+0],Ke[rt+0],gt,rr)}}function Zl(N,$,re){return re==0?N==0?$==0?6:5:$==0?4:0:re}function wl(N,$,re,fe,Te){switch(N>>>30){case 3:Wu($,re,fe,Te,0);break;case 2:cs($,re,fe,Te);break;case 1:no($,re,fe,Te)}}function Hu(N,$){var re,fe,Te=$.M,Oe=$.Nb,Ue=N.oc,Ke=N.pc+40,rt=N.oc,gt=N.pc+584,rr=N.oc,Er=N.pc+600;for(re=0;16>re;++re)Ue[Ke+32*re-1]=129;for(re=0;8>re;++re)rt[gt+32*re-1]=129,rr[Er+32*re-1]=129;for(0<Te?Ue[Ke-1-32]=rt[gt-1-32]=rr[Er-1-32]=129:(o(Ue,Ke-32-1,127,21),o(rt,gt-32-1,127,9),o(rr,Er-32-1,127,9)),fe=0;fe<N.za;++fe){var kr=$.ya[$.aa+fe];if(0<fe){for(re=-1;16>re;++re)n(Ue,Ke+32*re-4,Ue,Ke+32*re+12,4);for(re=-1;8>re;++re)n(rt,gt+32*re-4,rt,gt+32*re+4,4),n(rr,Er+32*re-4,rr,Er+32*re+4,4)}var hr=N.Gd,fn=N.Hd+fe,Dr=kr.ad,zt=kr.Hc;if(0<Te&&(n(Ue,Ke-32,hr[fn].y,0,16),n(rt,gt-32,hr[fn].f,0,8),n(rr,Er-32,hr[fn].ea,0,8)),kr.Za){var Xt=Ue,Hr=Ke-32+16;for(0<Te&&(fe>=N.za-1?o(Xt,Hr,hr[fn].y[15],4):n(Xt,Hr,hr[fn+1].y,0,4)),re=0;4>re;re++)Xt[Hr+128+re]=Xt[Hr+256+re]=Xt[Hr+384+re]=Xt[Hr+0+re];for(re=0;16>re;++re,zt<<=2)Xt=Ue,Hr=Ke+Mn[re],M[kr.Ob[re]](Xt,Hr),wl(zt,Dr,16*+re,Xt,Hr)}else if(Xt=Zl(fe,Te,kr.Ob[0]),as[Xt](Ue,Ke),zt!=0)for(re=0;16>re;++re,zt<<=2)wl(zt,Dr,16*+re,Ue,Ke+Mn[re]);for(re=kr.Gc,Xt=Zl(fe,Te,kr.Dd),d[Xt](rt,gt),d[Xt](rr,Er),zt=Dr,Xt=rt,Hr=gt,255&(kr=re>>0)&&(170&kr?fs(zt,256,Xt,Hr):ks(zt,256,Xt,Hr)),kr=rr,zt=Er,255&(re>>=8)&&(170&re?fs(Dr,320,kr,zt):ks(Dr,320,kr,zt)),Te<N.Ub-1&&(n(hr[fn].y,0,Ue,Ke+480,16),n(hr[fn].f,0,rt,gt+224,8),n(hr[fn].ea,0,rr,Er+224,8)),re=8*Oe*N.B,hr=N.sa,fn=N.ta+16*fe+16*Oe*N.R,Dr=N.qa,kr=N.ra+8*fe+re,zt=N.Ha,Xt=N.Ia+8*fe+re,re=0;16>re;++re)n(hr,fn+re*N.R,Ue,Ke+32*re,16);for(re=0;8>re;++re)n(Dr,kr+re*N.B,rt,gt+32*re,8),n(zt,Xt+re*N.B,rr,Er+32*re,8)}}function Ds(N,$,re,fe,Te,Oe,Ue,Ke,rt){var gt=[0],rr=[0],Er=0,kr=rt!=null?rt.kd:0,hr=rt??new bu;if(N==null||12>re)return 7;hr.data=N,hr.w=$,hr.ha=re,$=[$],re=[re],hr.gb=[hr.gb];e:{var fn=$,Dr=re,zt=hr.gb;if(t(N!=null),t(Dr!=null),t(zt!=null),zt[0]=0,12<=Dr[0]&&!r(N,fn[0],"RIFF")){if(r(N,fn[0]+8,"WEBP")){zt=3;break e}var Xt=Mr(N,fn[0]+4);if(12>Xt||4294967286<Xt){zt=3;break e}if(kr&&Xt>Dr[0]-8){zt=7;break e}zt[0]=Xt,fn[0]+=12,Dr[0]-=12}zt=0}if(zt!=0)return zt;for(Xt=0<hr.gb[0],re=re[0];;){e:{var Hr=N;Dr=$,zt=re;var Qr=gt,Wr=rr,Nn=fn=[0];if((Rn=Er=[Er])[0]=0,8>zt[0])zt=7;else{if(!r(Hr,Dr[0],"VP8X")){if(Mr(Hr,Dr[0]+4)!=10){zt=3;break e}if(18>zt[0]){zt=7;break e}var Cn=Mr(Hr,Dr[0]+8),Ci=1+Rr(Hr,Dr[0]+12);if(2147483648<=Ci*(Hr=1+Rr(Hr,Dr[0]+15))){zt=3;break e}Nn!=null&&(Nn[0]=Cn),Qr!=null&&(Qr[0]=Ci),Wr!=null&&(Wr[0]=Hr),Dr[0]+=18,zt[0]-=18,Rn[0]=1}zt=0}}if(Er=Er[0],fn=fn[0],zt!=0)return zt;if(Dr=!!(2&fn),!Xt&&Er)return 3;if(Oe!=null&&(Oe[0]=!!(16&fn)),Ue!=null&&(Ue[0]=Dr),Ke!=null&&(Ke[0]=0),Ue=gt[0],fn=rr[0],Er&&Dr&&rt==null){zt=0;break}if(4>re){zt=7;break}if(Xt&&Er||!Xt&&!Er&&!r(N,$[0],"ALPH")){re=[re],hr.na=[hr.na],hr.P=[hr.P],hr.Sa=[hr.Sa];e:{Cn=N,zt=$,Xt=re;var Rn=hr.gb;Qr=hr.na,Wr=hr.P,Nn=hr.Sa,Ci=22,t(Cn!=null),t(Xt!=null),Hr=zt[0];var Co=Xt[0];for(t(Qr!=null),t(Nn!=null),Qr[0]=null,Wr[0]=null,Nn[0]=0;;){if(zt[0]=Hr,Xt[0]=Co,8>Co){zt=7;break e}var Po=Mr(Cn,Hr+4);if(4294967286<Po){zt=3;break e}var io=8+Po+1&-2;if(Ci+=io,0<Rn&&Ci>Rn){zt=3;break e}if(!r(Cn,Hr,"VP8 ")||!r(Cn,Hr,"VP8L")){zt=0;break e}if(Co[0]<io){zt=7;break e}r(Cn,Hr,"ALPH")||(Qr[0]=Cn,Wr[0]=Hr+8,Nn[0]=Po),Hr+=io,Co-=io}}if(re=re[0],hr.na=hr.na[0],hr.P=hr.P[0],hr.Sa=hr.Sa[0],zt!=0)break}re=[re],hr.Ja=[hr.Ja],hr.xa=[hr.xa];e:if(Rn=N,zt=$,Xt=re,Qr=hr.gb[0],Wr=hr.Ja,Nn=hr.xa,Cn=zt[0],Hr=!r(Rn,Cn,"VP8 "),Ci=!r(Rn,Cn,"VP8L"),t(Rn!=null),t(Xt!=null),t(Wr!=null),t(Nn!=null),8>Xt[0])zt=7;else{if(Hr||Ci){if(Rn=Mr(Rn,Cn+4),12<=Qr&&Rn>Qr-12){zt=3;break e}if(kr&&Rn>Xt[0]-8){zt=7;break e}Wr[0]=Rn,zt[0]+=8,Xt[0]-=8,Nn[0]=Ci}else Nn[0]=5<=Xt[0]&&Rn[Cn+0]==47&&!(Rn[Cn+4]>>5),Wr[0]=Xt[0];zt=0}if(re=re[0],hr.Ja=hr.Ja[0],hr.xa=hr.xa[0],$=$[0],zt!=0)break;if(4294967286<hr.Ja)return 3;if(Ke==null||Dr||(Ke[0]=hr.xa?2:1),Ue=[Ue],fn=[fn],hr.xa){if(5>re){zt=7;break}Ke=Ue,kr=fn,Dr=Oe,N==null||5>re?N=0:5<=re&&N[$+0]==47&&!(N[$+4]>>5)?(Xt=[0],Rn=[0],Qr=[0],ut(Wr=new xe,N,$,re),vn(Wr,Xt,Rn,Qr)?(Ke!=null&&(Ke[0]=Xt[0]),kr!=null&&(kr[0]=Rn[0]),Dr!=null&&(Dr[0]=Qr[0]),N=1):N=0):N=0}else{if(10>re){zt=7;break}Ke=fn,N==null||10>re||!Ao(N,$+3,re-3)?N=0:(kr=N[$+0]|N[$+1]<<8|N[$+2]<<16,Dr=16383&(N[$+7]<<8|N[$+6]),N=16383&(N[$+9]<<8|N[$+8]),1&kr||3<(kr>>1&7)||!(kr>>4&1)||kr>>5>=hr.Ja||!Dr||!N?N=0:(Ue&&(Ue[0]=Dr),Ke&&(Ke[0]=N),N=1))}if(!N||(Ue=Ue[0],fn=fn[0],Er&&(gt[0]!=Ue||rr[0]!=fn)))return 3;rt!=null&&(rt[0]=hr,rt.offset=$-rt.w,t(4294967286>$-rt.w),t(rt.offset==rt.ha-re));break}return zt==0||zt==7&&Er&&rt==null?(Oe!=null&&(Oe[0]|=hr.na!=null&&0<hr.na.length),fe!=null&&(fe[0]=Ue),Te!=null&&(Te[0]=fn),0):zt}function xl(N,$,re){var fe=$.width,Te=$.height,Oe=0,Ue=0,Ke=fe,rt=Te;if($.Da=N!=null&&0<N.Da,$.Da&&(Ke=N.cd,rt=N.bd,Oe=N.v,Ue=N.j,11>re||(Oe&=-2,Ue&=-2),0>Oe||0>Ue||0>=Ke||0>=rt||Oe+Ke>fe||Ue+rt>Te))return 0;if($.v=Oe,$.j=Ue,$.va=Oe+Ke,$.o=Ue+rt,$.U=Ke,$.T=rt,$.da=N!=null&&0<N.da,$.da){if(!Or(Ke,rt,re=[N.ib],Oe=[N.hb]))return 0;$.ib=re[0],$.hb=Oe[0]}return $.ob=N!=null&&N.ob,$.Kb=N==null||!N.Sd,$.da&&($.ob=$.ib<3*fe/4&&$.hb<3*Te/4,$.Kb=0),1}function nl(N){if(N==null)return 2;if(11>N.S){var $=N.f.RGBA;$.fb+=(N.height-1)*$.A,$.A=-$.A}else $=N.f.kb,N=N.height,$.O+=(N-1)*$.fa,$.fa=-$.fa,$.N+=(N-1>>1)*$.Ab,$.Ab=-$.Ab,$.W+=(N-1>>1)*$.Db,$.Db=-$.Db,$.F!=null&&($.J+=(N-1)*$.lb,$.lb=-$.lb);return 0}function wu(N,$,re,fe){if(fe==null||0>=N||0>=$)return 2;if(re!=null){if(re.Da){var Te=re.cd,Oe=re.bd,Ue=-2&re.v,Ke=-2&re.j;if(0>Ue||0>Ke||0>=Te||0>=Oe||Ue+Te>N||Ke+Oe>$)return 2;N=Te,$=Oe}if(re.da){if(!Or(N,$,Te=[re.ib],Oe=[re.hb]))return 2;N=Te[0],$=Oe[0]}}fe.width=N,fe.height=$;e:{var rt=fe.width,gt=fe.height;if(N=fe.S,0>=rt||0>=gt||!(N>=Zs&&13>N))N=2;else{if(0>=fe.Rd&&fe.sd==null){Ue=Oe=Te=$=0;var rr=(Ke=rt*Di[N])*gt;if(11>N||(Oe=(gt+1)/2*($=(rt+1)/2),N==12&&(Ue=(Te=rt)*gt)),(gt=u(rr+2*Oe+Ue))==null){N=1;break e}fe.sd=gt,11>N?((rt=fe.f.RGBA).eb=gt,rt.fb=0,rt.A=Ke,rt.size=rr):((rt=fe.f.kb).y=gt,rt.O=0,rt.fa=Ke,rt.Fd=rr,rt.f=gt,rt.N=0+rr,rt.Ab=$,rt.Cd=Oe,rt.ea=gt,rt.W=0+rr+Oe,rt.Db=$,rt.Ed=Oe,N==12&&(rt.F=gt,rt.J=0+rr+2*Oe),rt.Tc=Ue,rt.lb=Te)}if($=1,Te=fe.S,Oe=fe.width,Ue=fe.height,Te>=Zs&&13>Te)if(11>Te)N=fe.f.RGBA,$&=(Ke=Math.abs(N.A))*(Ue-1)+Oe<=N.size,$&=Ke>=Oe*Di[Te],$&=N.eb!=null;else{N=fe.f.kb,Ke=(Oe+1)/2,rr=(Ue+1)/2,rt=Math.abs(N.fa),gt=Math.abs(N.Ab);var Er=Math.abs(N.Db),kr=Math.abs(N.lb),hr=kr*(Ue-1)+Oe;$&=rt*(Ue-1)+Oe<=N.Fd,$&=gt*(rr-1)+Ke<=N.Cd,$=($&=Er*(rr-1)+Ke<=N.Ed)&rt>=Oe&gt>=Ke&Er>=Ke,$&=N.y!=null,$&=N.f!=null,$&=N.ea!=null,Te==12&&($&=kr>=Oe,$&=hr<=N.Tc,$&=N.F!=null)}else $=0;N=$?0:2}}return N!=0||re!=null&&re.fd&&(N=nl(fe)),N}var Na=64,xu=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],Xl=24,Hs=32,kl=8,Ra=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];Ur("Predictor0","PredictorAdd0"),pe.Predictor0=function(){return 4278190080},pe.Predictor1=function(N){return N},pe.Predictor2=function(N,$,re){return $[re+0]},pe.Predictor3=function(N,$,re){return $[re+1]},pe.Predictor4=function(N,$,re){return $[re-1]},pe.Predictor5=function(N,$,re){return en(en(N,$[re+1]),$[re+0])},pe.Predictor6=function(N,$,re){return en(N,$[re-1])},pe.Predictor7=function(N,$,re){return en(N,$[re+0])},pe.Predictor8=function(N,$,re){return en($[re-1],$[re+0])},pe.Predictor9=function(N,$,re){return en($[re+0],$[re+1])},pe.Predictor10=function(N,$,re){return en(en(N,$[re-1]),en($[re+0],$[re+1]))},pe.Predictor11=function(N,$,re){var fe=$[re+0];return 0>=ai(fe>>24&255,N>>24&255,($=$[re-1])>>24&255)+ai(fe>>16&255,N>>16&255,$>>16&255)+ai(fe>>8&255,N>>8&255,$>>8&255)+ai(255&fe,255&N,255&$)?fe:N},pe.Predictor12=function(N,$,re){var fe=$[re+0];return(On((N>>24&255)+(fe>>24&255)-(($=$[re-1])>>24&255))<<24|On((N>>16&255)+(fe>>16&255)-($>>16&255))<<16|On((N>>8&255)+(fe>>8&255)-($>>8&255))<<8|On((255&N)+(255&fe)-(255&$)))>>>0},pe.Predictor13=function(N,$,re){var fe=$[re-1];return(Zn((N=en(N,$[re+0]))>>24&255,fe>>24&255)<<24|Zn(N>>16&255,fe>>16&255)<<16|Zn(N>>8&255,fe>>8&255)<<8|Zn(N>>0&255,fe>>0&255))>>>0};var Yl=pe.PredictorAdd0;pe.PredictorAdd1=_i,Ur("Predictor2","PredictorAdd2"),Ur("Predictor3","PredictorAdd3"),Ur("Predictor4","PredictorAdd4"),Ur("Predictor5","PredictorAdd5"),Ur("Predictor6","PredictorAdd6"),Ur("Predictor7","PredictorAdd7"),Ur("Predictor8","PredictorAdd8"),Ur("Predictor9","PredictorAdd9"),Ur("Predictor10","PredictorAdd10"),Ur("Predictor11","PredictorAdd11"),Ur("Predictor12","PredictorAdd12"),Ur("Predictor13","PredictorAdd13");var Ws=pe.PredictorAdd2;wi("ColorIndexInverseTransform","MapARGB","32b",function(N){return N>>8&255},function(N){return N}),wi("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(N){return N},function(N){return N>>8&255});var Al,is=pe.ColorIndexInverseTransform,El=pe.MapARGB,cc=pe.VP8LColorIndexInverseTransformAlpha,Dc=pe.MapAlpha,Sl=pe.VP8LPredictorsAdd=[];Sl.length=16,(pe.VP8LPredictors=[]).length=16,(pe.VP8LPredictorsAdd_C=[]).length=16,(pe.VP8LPredictors_C=[]).length=16;var Ga,zs,Ns,Ya,sa,Rs,la,Wu,cs,fs,no,ks,il,Jl,ku,Ca,Cl,ba,Pn,Oo,Ji,Fo,ga,An,As,Zu,Xu,zc,e0=u(511),t0=u(2041),b0=u(225),Mi=u(767),Nc=0,fc=t0,ua=b0,os=Mi,ia=e0,Zs=0,hc=1,Kl=2,Ql=3,eu=4,ho=5,Es=6,Go=7,Ss=8,Au=9,Rc=10,Eu=[2,3,7],ol=[3,3,11],w0=[280,256,256,256,40],al=[0,1,1,1,0],pc=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],oi=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],vi=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],Oa=8,Yu=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],wa=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],Bo=null,Il=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],Xs=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],r0=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],Tl=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],ca=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],xa=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],Oc=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],as=[],M=[],d=[],k=1,C=2,D=[],q=[];Xr("UpsampleRgbLinePair",fo,3),Xr("UpsampleBgrLinePair",qo,3),Xr("UpsampleRgbaLinePair",Vi,4),Xr("UpsampleBgraLinePair",aa,4),Xr("UpsampleArgbLinePair",Da,4),Xr("UpsampleRgba4444LinePair",Qo,2),Xr("UpsampleRgb565LinePair",Ko,2);var Y=pe.UpsampleRgbLinePair,oe=pe.UpsampleBgrLinePair,le=pe.UpsampleRgbaLinePair,de=pe.UpsampleBgraLinePair,Se=pe.UpsampleArgbLinePair,je=pe.UpsampleRgba4444LinePair,Je=pe.UpsampleRgb565LinePair,Et=16,mt=1<<Et-1,wt=-227,tr=482,cr=6,Ar=(256<<cr)-1,Dt=0,Tr=u(256),Ir=u(256),Zr=u(256),Gr=u(256),dn=u(tr-wt),qr=u(tr-wt);Sa("YuvToRgbRow",fo,3),Sa("YuvToBgrRow",qo,3),Sa("YuvToRgbaRow",Vi,4),Sa("YuvToBgraRow",aa,4),Sa("YuvToArgbRow",Da,4),Sa("YuvToRgba4444Row",Qo,2),Sa("YuvToRgb565Row",Ko,2);var Mn=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],En=[0,2,8],Un=[8,7,6,4,4,2,2,2,1,1,1,1],Li=1;this.WebPDecodeRGBA=function(N,$,re,fe,Te){var Oe=hc,Ue=new Hl,Ke=new No;Ue.ba=Ke,Ke.S=Oe,Ke.width=[Ke.width],Ke.height=[Ke.height];var rt=Ke.width,gt=Ke.height,rr=new gi;if(rr==null||N==null)var Er=2;else t(rr!=null),Er=Ds(N,$,re,rr.width,rr.height,rr.Pd,rr.Qd,rr.format,null);if(Er!=0?rt=0:(rt!=null&&(rt[0]=rr.width[0]),gt!=null&&(gt[0]=rr.height[0]),rt=1),rt){Ke.width=Ke.width[0],Ke.height=Ke.height[0],fe!=null&&(fe[0]=Ke.width),Te!=null&&(Te[0]=Ke.height);e:{if(fe=new Jo,(Te=new bu).data=N,Te.w=$,Te.ha=re,Te.kd=1,$=[0],t(Te!=null),((N=Ds(Te.data,Te.w,Te.ha,null,null,null,$,null,Te))==0||N==7)&&$[0]&&(N=4),($=N)==0){if(t(Ue!=null),fe.data=Te.data,fe.w=Te.w+Te.offset,fe.ha=Te.ha-Te.offset,fe.put=Ti,fe.ac=pi,fe.bc=Xo,fe.ma=Ue,Te.xa){if((N=Nt())==null){Ue=1;break e}if(function(kr,hr){var fn=[0],Dr=[0],zt=[0];t:for(;;){if(kr==null)return 0;if(hr==null)return kr.a=2,0;if(kr.l=hr,kr.a=0,ut(kr.m,hr.data,hr.w,hr.ha),!vn(kr.m,fn,Dr,zt)){kr.a=3;break t}if(kr.xb=C,hr.width=fn[0],hr.height=Dr[0],!ir(fn[0],Dr[0],1,kr,null))break t;return 1}return t(kr.a!=0),0}(N,fe)){if(fe=($=wu(fe.width,fe.height,Ue.Oa,Ue.ba))==0){t:{fe=N;r:for(;;){if(fe==null){fe=0;break t}if(t(fe.s.yc!=null),t(fe.s.Ya!=null),t(0<fe.s.Wb),t((re=fe.l)!=null),t((Te=re.ma)!=null),fe.xb!=0){if(fe.ca=Te.ba,fe.tb=Te.tb,t(fe.ca!=null),!xl(Te.Oa,re,Ql)){fe.a=2;break r}if(!Br(fe,re.width)||re.da)break r;if((re.da||pn(fe.ca.S))&&ur(),11>fe.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),fe.ca.f.kb.F!=null&&ur()),fe.Pb&&0<fe.s.ua&&fe.s.vb.X==null&&!Kr(fe.s.vb,fe.s.Wa.Xa)){fe.a=1;break r}fe.xb=0}if(!Re(fe,fe.V,fe.Ba,fe.c,fe.i,re.o,De))break r;Te.Dc=fe.Ma,fe=1;break t}t(fe.a!=0),fe=0}fe=!fe}fe&&($=N.a)}else $=N.a}else{if((N=new Vl)==null){Ue=1;break e}if(N.Fa=Te.na,N.P=Te.P,N.qc=Te.Sa,ml(N,fe)){if(($=wu(fe.width,fe.height,Ue.Oa,Ue.ba))==0){if(N.Aa=0,re=Ue.Oa,t((Te=N)!=null),re!=null){if(0<(rt=0>(rt=re.Md)?0:100<rt?255:255*rt/100)){for(gt=rr=0;4>gt;++gt)12>(Er=Te.pb[gt]).lc&&(Er.ia=rt*Un[0>Er.lc?0:Er.lc]>>3),rr|=Er.ia;rr&&(alert("todo:VP8InitRandom"),Te.ia=1)}Te.Ga=re.Id,100<Te.Ga?Te.Ga=100:0>Te.Ga&&(Te.Ga=0)}$l(N,fe)||($=N.a)}}else $=N.a}$==0&&Ue.Oa!=null&&Ue.Oa.fd&&($=nl(Ue.ba))}Ue=$}Oe=Ue!=0?null:11>Oe?Ke.f.RGBA.eb:Ke.f.kb.y}else Oe=null;return Oe};var Di=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function v(pe,Ge){for(var We="",Ae=0;Ae<4;Ae++)We+=String.fromCharCode(pe[Ge++]);return We}function w(pe,Ge){return(pe[Ge+0]<<0|pe[Ge+1]<<8|pe[Ge+2]<<16)>>>0}function E(pe,Ge){return(pe[Ge+0]<<0|pe[Ge+1]<<8|pe[Ge+2]<<16|pe[Ge+3]<<24)>>>0}new h;var T=[0],I=[0],F=[],U=new h,G=e,H=function(pe,Ge){var We={},Ae=0,Ie=!1,Fe=0,ot=0;if(We.frames=[],!function(Ne,Pe,ft,At){for(var Pt=0;Pt<At;Pt++)if(Ne[Pe+Pt]!=ft.charCodeAt(Pt))return!0;return!1}(pe,Ge,"RIFF",4)){var _t,ht;for(E(pe,Ge+=4),Ge+=8;Ge<pe.length;){var $e=v(pe,Ge),ut=E(pe,Ge+=4);Ge+=4;var bt=ut+(1&ut);switch($e){case"VP8 ":case"VP8L":We.frames[Ae]===void 0&&(We.frames[Ae]={}),(xe=We.frames[Ae]).src_off=Ie?ot:Ge-8,xe.src_size=Fe+ut+8,Ae++,Ie&&(Ie=!1,Fe=0,ot=0);break;case"VP8X":(xe=We.header={}).feature_flags=pe[Ge];var Ze=Ge+4;xe.canvas_width=1+w(pe,Ze),Ze+=3,xe.canvas_height=1+w(pe,Ze),Ze+=3;break;case"ALPH":Ie=!0,Fe=bt+8,ot=Ge-8;break;case"ANIM":(xe=We.header).bgcolor=E(pe,Ge),Ze=Ge+4,xe.loop_count=(_t=pe)[(ht=Ze)+0]<<0|_t[ht+1]<<8,Ze+=2;break;case"ANMF":var He,xe;(xe=We.frames[Ae]={}).offset_x=2*w(pe,Ge),Ge+=3,xe.offset_y=2*w(pe,Ge),Ge+=3,xe.width=1+w(pe,Ge),Ge+=3,xe.height=1+w(pe,Ge),Ge+=3,xe.duration=w(pe,Ge),Ge+=3,He=pe[Ge++],xe.dispose=1&He,xe.blend=He>>1&1}$e!="ANMF"&&(Ge+=bt)}return We}}(G,0);H.response=G,H.rgbaoutput=!0,H.dataurl=!1;var X=H.header?H.header:null,ee=H.frames?H.frames:null;if(X){X.loop_counter=X.loop_count,T=[X.canvas_height],I=[X.canvas_width];for(var K=0;K<ee.length&&ee[K].blend!=0;K++);}var se=ee[0],ce=U.WebPDecodeRGBA(G,se.src_off,se.src_size,I,T);se.rgba=ce,se.imgwidth=I[0],se.imgheight=T[0];for(var _e=0;_e<I[0]*T[0]*4;_e++)F[_e]=ce[_e];return this.width=I,this.height=T,this.data=F,this}(function(e){var t=function(){return typeof Mg=="function"},r=function(T,I,F,U){var G=4,H=c;switch(U){case e.image_compression.FAST:G=1,H=u;break;case e.image_compression.MEDIUM:G=6,H=l;break;case e.image_compression.SLOW:G=9,H=h}T=n(T,I,F,H);var X=Mg(T,{level:G});return e.__addimage__.arrayBufferToBinaryString(X)},n=function(T,I,F,U){for(var G,H,X,ee=T.length/I,K=new Uint8Array(T.length+ee),se=w(),ce=0;ce<ee;ce+=1){if(X=ce*I,G=T.subarray(X,X+I),U)K.set(U(G,F,H),X+ce);else{for(var _e,pe=se.length,Ge=[];_e<pe;_e+=1)Ge[_e]=se[_e](G,F,H);var We=E(Ge.concat());K.set(Ge[We],X+ce)}H=G}return K},o=function(T){var I=Array.apply([],T);return I.unshift(0),I},u=function(T,I){var F,U=[],G=T.length;U[0]=1;for(var H=0;H<G;H+=1)F=T[H-I]||0,U[H+1]=T[H]-F+256&255;return U},c=function(T,I,F){var U,G=[],H=T.length;G[0]=2;for(var X=0;X<H;X+=1)U=F&&F[X]||0,G[X+1]=T[X]-U+256&255;return G},l=function(T,I,F){var U,G,H=[],X=T.length;H[0]=3;for(var ee=0;ee<X;ee+=1)U=T[ee-I]||0,G=F&&F[ee]||0,H[ee+1]=T[ee]+256-(U+G>>>1)&255;return H},h=function(T,I,F){var U,G,H,X,ee=[],K=T.length;ee[0]=4;for(var se=0;se<K;se+=1)U=T[se-I]||0,G=F&&F[se]||0,H=F&&F[se-I]||0,X=v(U,G,H),ee[se+1]=T[se]-X+256&255;return ee},v=function(T,I,F){if(T===I&&I===F)return T;var U=Math.abs(I-F),G=Math.abs(T-F),H=Math.abs(T+I-F-F);return U<=G&&U<=H?T:G<=H?I:F},w=function(){return[o,u,c,l,h]},E=function(T){var I=T.map(function(F){return F.reduce(function(U,G){return U+Math.abs(G)},0)});return I.indexOf(Math.min.apply(null,I))};e.processPNG=function(T,I,F,U){var G,H,X,ee,K,se,ce,_e,pe,Ge,We,Ae,Ie,Fe,ot,_t=this.decode.FLATE_DECODE,ht="";if(this.__addimage__.isArrayBuffer(T)&&(T=new Uint8Array(T)),this.__addimage__.isArrayBufferView(T)){if(T=(X=new X7(T)).imgData,H=X.bits,G=X.colorSpace,K=X.colors,[4,6].indexOf(X.colorType)!==-1){if(X.bits===8){pe=(_e=X.pixelBitlength==32?new Uint32Array(X.decodePixels().buffer):X.pixelBitlength==16?new Uint16Array(X.decodePixels().buffer):new Uint8Array(X.decodePixels().buffer)).length,We=new Uint8Array(pe*X.colors),Ge=new Uint8Array(pe);var $e,ut=X.pixelBitlength-X.bits;for(Fe=0,ot=0;Fe<pe;Fe++){for(Ie=_e[Fe],$e=0;$e<ut;)We[ot++]=Ie>>>$e&255,$e+=X.bits;Ge[Fe]=Ie>>>$e&255}}if(X.bits===16){pe=(_e=new Uint32Array(X.decodePixels().buffer)).length,We=new Uint8Array(pe*(32/X.pixelBitlength)*X.colors),Ge=new Uint8Array(pe*(32/X.pixelBitlength)),Ae=X.colors>1,Fe=0,ot=0;for(var bt=0;Fe<pe;)Ie=_e[Fe++],We[ot++]=Ie>>>0&255,Ae&&(We[ot++]=Ie>>>16&255,Ie=_e[Fe++],We[ot++]=Ie>>>0&255),Ge[bt++]=Ie>>>16&255;H=8}U!==e.image_compression.NONE&&t()?(T=r(We,X.width*X.colors,X.colors,U),ce=r(Ge,X.width,1,U)):(T=We,ce=Ge,_t=void 0)}if(X.colorType===3&&(G=this.color_spaces.INDEXED,se=X.palette,X.transparency.indexed)){var Ze=X.transparency.indexed,He=0;for(Fe=0,pe=Ze.length;Fe<pe;++Fe)He+=Ze[Fe];if((He/=255)===pe-1&&Ze.indexOf(0)!==-1)ee=[Ze.indexOf(0)];else if(He!==pe){for(_e=X.decodePixels(),Ge=new Uint8Array(_e.length),Fe=0,pe=_e.length;Fe<pe;Fe++)Ge[Fe]=Ze[_e[Fe]];ce=r(Ge,X.width,1)}}var xe=function(Ne){var Pe;switch(Ne){case e.image_compression.FAST:Pe=11;break;case e.image_compression.MEDIUM:Pe=13;break;case e.image_compression.SLOW:Pe=14;break;default:Pe=12}return Pe}(U);return _t===this.decode.FLATE_DECODE&&(ht="/Predictor "+xe+" "),ht+="/Colors "+K+" /BitsPerComponent "+H+" /Columns "+X.width,(this.__addimage__.isArrayBuffer(T)||this.__addimage__.isArrayBufferView(T))&&(T=this.__addimage__.arrayBufferToBinaryString(T)),(ce&&this.__addimage__.isArrayBuffer(ce)||this.__addimage__.isArrayBufferView(ce))&&(ce=this.__addimage__.arrayBufferToBinaryString(ce)),{alias:F,data:T,index:I,filter:_t,decodeParameters:ht,transparency:ee,palette:se,sMask:ce,predictor:xe,width:X.width,height:X.height,bitsPerComponent:H,colorSpace:G}}}})(Zi.API),function(e){e.processGIF89A=function(t,r,n,o){var u=new Y7(t),c=u.width,l=u.height,h=[];u.decodeAndBlitFrameRGBA(0,h);var v={data:h,width:c,height:l},w=new um(100).encode(v,100);return e.processJPEG.call(this,w,r,n,o)},e.processGIF87A=e.processGIF89A}(Zi.API),h0.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var e=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(e);for(var t=0;t<e;t++){var r=this.datav.getUint8(this.pos++,!0),n=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),u=this.datav.getUint8(this.pos++,!0);this.palette[t]={red:o,green:n,blue:r,quad:u}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},h0.prototype.parseBGR=function(){this.pos=this.offset;try{var e="bit"+this.bitPP,t=this.width*this.height*4;this.data=new Uint8Array(t),this[e]()}catch(r){Ma.log("bit decode error:"+r)}},h0.prototype.bit1=function(){var e,t=Math.ceil(this.width/8),r=t%4;for(e=this.height-1;e>=0;e--){for(var n=this.bottom_up?e:this.height-1-e,o=0;o<t;o++)for(var u=this.datav.getUint8(this.pos++,!0),c=n*this.width*4+8*o*4,l=0;l<8&&8*o+l<this.width;l++){var h=this.palette[u>>7-l&1];this.data[c+4*l]=h.blue,this.data[c+4*l+1]=h.green,this.data[c+4*l+2]=h.red,this.data[c+4*l+3]=255}r!==0&&(this.pos+=4-r)}},h0.prototype.bit4=function(){for(var e=Math.ceil(this.width/2),t=e%4,r=this.height-1;r>=0;r--){for(var n=this.bottom_up?r:this.height-1-r,o=0;o<e;o++){var u=this.datav.getUint8(this.pos++,!0),c=n*this.width*4+2*o*4,l=u>>4,h=15&u,v=this.palette[l];if(this.data[c]=v.blue,this.data[c+1]=v.green,this.data[c+2]=v.red,this.data[c+3]=255,2*o+1>=this.width)break;v=this.palette[h],this.data[c+4]=v.blue,this.data[c+4+1]=v.green,this.data[c+4+2]=v.red,this.data[c+4+3]=255}t!==0&&(this.pos+=4-t)}},h0.prototype.bit8=function(){for(var e=this.width%4,t=this.height-1;t>=0;t--){for(var r=this.bottom_up?t:this.height-1-t,n=0;n<this.width;n++){var o=this.datav.getUint8(this.pos++,!0),u=r*this.width*4+4*n;if(o<this.palette.length){var c=this.palette[o];this.data[u]=c.red,this.data[u+1]=c.green,this.data[u+2]=c.blue,this.data[u+3]=255}else this.data[u]=255,this.data[u+1]=255,this.data[u+2]=255,this.data[u+3]=255}e!==0&&(this.pos+=4-e)}},h0.prototype.bit15=function(){for(var e=this.width%3,t=parseInt("11111",2),r=this.height-1;r>=0;r--){for(var n=this.bottom_up?r:this.height-1-r,o=0;o<this.width;o++){var u=this.datav.getUint16(this.pos,!0);this.pos+=2;var c=(u&t)/t*255|0,l=(u>>5&t)/t*255|0,h=(u>>10&t)/t*255|0,v=u>>15?255:0,w=n*this.width*4+4*o;this.data[w]=h,this.data[w+1]=l,this.data[w+2]=c,this.data[w+3]=v}this.pos+=e}},h0.prototype.bit16=function(){for(var e=this.width%3,t=parseInt("11111",2),r=parseInt("111111",2),n=this.height-1;n>=0;n--){for(var o=this.bottom_up?n:this.height-1-n,u=0;u<this.width;u++){var c=this.datav.getUint16(this.pos,!0);this.pos+=2;var l=(c&t)/t*255|0,h=(c>>5&r)/r*255|0,v=(c>>11)/t*255|0,w=o*this.width*4+4*u;this.data[w]=v,this.data[w+1]=h,this.data[w+2]=l,this.data[w+3]=255}this.pos+=e}},h0.prototype.bit24=function(){for(var e=this.height-1;e>=0;e--){for(var t=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var n=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),u=this.datav.getUint8(this.pos++,!0),c=t*this.width*4+4*r;this.data[c]=u,this.data[c+1]=o,this.data[c+2]=n,this.data[c+3]=255}this.pos+=this.width%4}},h0.prototype.bit32=function(){for(var e=this.height-1;e>=0;e--)for(var t=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var n=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),u=this.datav.getUint8(this.pos++,!0),c=this.datav.getUint8(this.pos++,!0),l=t*this.width*4+4*r;this.data[l]=u,this.data[l+1]=o,this.data[l+2]=n,this.data[l+3]=c}},h0.prototype.getData=function(){return this.data},function(e){e.processBMP=function(t,r,n,o){var u=new h0(t,!1),c=u.width,l=u.height,h={data:u.getData(),width:c,height:l},v=new um(100).encode(h,100);return e.processJPEG.call(this,v,r,n,o)}}(Zi.API),cb.prototype.getData=function(){return this.data},function(e){e.processWEBP=function(t,r,n,o){var u=new cb(t),c=u.width,l=u.height,h={data:u.getData(),width:c,height:l},v=new um(100).encode(h,100);return e.processJPEG.call(this,v,r,n,o)}}(Zi.API),Zi.API.processRGBA=function(e,t,r){for(var n=e.data,o=n.length,u=new Uint8Array(o/4*3),c=new Uint8Array(o/4),l=0,h=0,v=0;v<o;v+=4){var w=n[v],E=n[v+1],T=n[v+2],I=n[v+3];u[l++]=w,u[l++]=E,u[l++]=T,c[h++]=I}var F=this.__addimage__.arrayBufferToBinaryString(u);return{alpha:this.__addimage__.arrayBufferToBinaryString(c),data:F,index:t,alias:r,colorSpace:"DeviceRGB",bitsPerComponent:8,width:e.width,height:e.height}},Zi.API.setLanguage=function(e){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[e]!==void 0&&(this.internal.languageSettings.languageCode=e,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},kh=Zi.API,n1=kh.getCharWidthsArray=function(e,t){var r,n,o=(t=t||{}).font||this.internal.getFont(),u=t.fontSize||this.internal.getFontSize(),c=t.charSpace||this.internal.getCharSpace(),l=t.widths?t.widths:o.metadata.Unicode.widths,h=l.fof?l.fof:1,v=t.kerning?t.kerning:o.metadata.Unicode.kerning,w=v.fof?v.fof:1,E=t.doKerning!==!1,T=0,I=e.length,F=0,U=l[0]||h,G=[];for(r=0;r<I;r++)n=e.charCodeAt(r),typeof o.metadata.widthOfString=="function"?G.push((o.metadata.widthOfGlyph(o.metadata.characterToGlyph(n))+c*(1e3/u)||0)/1e3):(T=E&&_a(v[n])==="object"&&!isNaN(parseInt(v[n][F],10))?v[n][F]/w:0,G.push((l[n]||U)/h+T)),F=n;return G},ab=kh.getStringUnitWidth=function(e,t){var r=(t=t||{}).fontSize||this.internal.getFontSize(),n=t.font||this.internal.getFont(),o=t.charSpace||this.internal.getCharSpace();return kh.processArabic&&(e=kh.processArabic(e)),typeof n.metadata.widthOfString=="function"?n.metadata.widthOfString(e,r,o)/r:n1.apply(this,arguments).reduce(function(u,c){return u+c},0)},sb=function(e,t,r,n){for(var o=[],u=0,c=e.length,l=0;u!==c&&l+t[u]<r;)l+=t[u],u++;o.push(e.slice(0,u));var h=u;for(l=0;u!==c;)l+t[u]>n&&(o.push(e.slice(h,u)),l=0,h=u),l+=t[u],u++;return h!==u&&o.push(e.slice(h,u)),o},lb=function(e,t,r){r||(r={});var n,o,u,c,l,h,v,w=[],E=[w],T=r.textIndent||0,I=0,F=0,U=e.split(" "),G=n1.apply(this,[" ",r])[0];if(h=r.lineIndent===-1?U[0].length+2:r.lineIndent||0){var H=Array(h).join(" "),X=[];U.map(function(K){(K=K.split(/\s*\n/)).length>1?X=X.concat(K.map(function(se,ce){return(ce&&se.length?`
`:"")+se})):X.push(K[0])}),U=X,h=ab.apply(this,[H,r])}for(u=0,c=U.length;u<c;u++){var ee=0;if(n=U[u],h&&n[0]==`
`&&(n=n.substr(1),ee=1),T+I+(F=(o=n1.apply(this,[n,r])).reduce(function(K,se){return K+se},0))>t||ee){if(F>t){for(l=sb.apply(this,[n,o,t-(T+I),t]),w.push(l.shift()),w=[l.pop()];l.length;)E.push([l.shift()]);F=o.slice(n.length-(w[0]?w[0].length:0)).reduce(function(K,se){return K+se},0)}else w=[n];E.push(w),T=F+h,I=G}else w.push(n),T+=I+F,I=G}return v=h?function(K,se){return(se?H:"")+K.join(" ")}:function(K){return K.join(" ")},E.map(v)},kh.splitTextToSize=function(e,t,r){var n,o=(r=r||{}).fontSize||this.internal.getFontSize(),u=function(w){if(w.widths&&w.kerning)return{widths:w.widths,kerning:w.kerning};var E=this.internal.getFont(w.fontName,w.fontStyle);return E.metadata.Unicode?{widths:E.metadata.Unicode.widths||{0:1},kerning:E.metadata.Unicode.kerning||{}}:{font:E.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}.call(this,r);n=Array.isArray(e)?e:String(e).split(/\r?\n/);var c=1*this.internal.scaleFactor*t/o;u.textIndent=r.textIndent?1*r.textIndent*this.internal.scaleFactor/o:0,u.lineIndent=r.lineIndent;var l,h,v=[];for(l=0,h=n.length;l<h;l++)v=v.concat(lb.apply(this,[n[l],c,u]));return v},function(e){e.__fontmetrics__=e.__fontmetrics__||{};for(var t="klmnopqrstuvwxyz",r={},n={},o=0;o<t.length;o++)r[t[o]]="0123456789abcdef"[o],n["0123456789abcdef"[o]]=t[o];var u=function(E){return"0x"+parseInt(E,10).toString(16)},c=e.__fontmetrics__.compress=function(E){var T,I,F,U,G=["{"];for(var H in E){if(T=E[H],isNaN(parseInt(H,10))?I="'"+H+"'":(H=parseInt(H,10),I=(I=u(H).slice(2)).slice(0,-1)+n[I.slice(-1)]),typeof T=="number")T<0?(F=u(T).slice(3),U="-"):(F=u(T).slice(2),U=""),F=U+F.slice(0,-1)+n[F.slice(-1)];else{if(_a(T)!=="object")throw new Error("Don't know what to do with value type "+_a(T)+".");F=c(T)}G.push(I+F)}return G.push("}"),G.join("")},l=e.__fontmetrics__.uncompress=function(E){if(typeof E!="string")throw new Error("Invalid argument passed to uncompress.");for(var T,I,F,U,G={},H=1,X=G,ee=[],K="",se="",ce=E.length-1,_e=1;_e<ce;_e+=1)(U=E[_e])=="'"?T?(F=T.join(""),T=void 0):T=[]:T?T.push(U):U=="{"?(ee.push([X,F]),X={},F=void 0):U=="}"?((I=ee.pop())[0][I[1]]=X,F=void 0,X=I[0]):U=="-"?H=-1:F===void 0?r.hasOwnProperty(U)?(K+=r[U],F=parseInt(K,16)*H,H=1,K=""):K+=U:r.hasOwnProperty(U)?(se+=r[U],X[F]=parseInt(se,16)*H,H=1,F=void 0,se=""):se+=U;return G},h={codePages:["WinAnsiEncoding"],WinAnsiEncoding:l("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},v={Unicode:{Courier:h,"Courier-Bold":h,"Courier-BoldOblique":h,"Courier-Oblique":h,Helvetica:h,"Helvetica-Bold":h,"Helvetica-BoldOblique":h,"Helvetica-Oblique":h,"Times-Roman":h,"Times-Bold":h,"Times-BoldItalic":h,"Times-Italic":h}},w={Unicode:{"Courier-Oblique":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":l("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":l("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":l("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:l("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:l("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":l("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:l("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":l("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":l("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":l("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};e.events.push(["addFont",function(E){var T=E.font,I=w.Unicode[T.postScriptName];I&&(T.metadata.Unicode={},T.metadata.Unicode.widths=I.widths,T.metadata.Unicode.kerning=I.kerning);var F=v.Unicode[T.postScriptName];F&&(T.metadata.Unicode.encoding=F,T.encoding=F.codePages[0])}])}(Zi.API),function(e){var t=function(r){for(var n=r.length,o=new Uint8Array(n),u=0;u<n;u++)o[u]=r.charCodeAt(u);return o};e.API.events.push(["addFont",function(r){var n=void 0,o=r.font,u=r.instance;if(!o.isStandardFont){if(u===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+o.postScriptName+"').");if(typeof(n=u.existsFileInVFS(o.postScriptName)===!1?u.loadFile(o.postScriptName):u.getFileFromVFS(o.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+o.postScriptName+"').");(function(c,l){l=/^\x00\x01\x00\x00/.test(l)?t(l):t($p(l)),c.metadata=e.API.TTFFont.open(l),c.metadata.Unicode=c.metadata.Unicode||{encoding:{},kerning:{},widths:[]},c.metadata.glyIdsUsed=[0]})(o,n)}}])}(Zi),function(e){function t(){return(eo.canvg?Promise.resolve(eo.canvg):td(()=>import("./index.es-ba86421b.js"),[],import.meta.url)).catch(function(r){return Promise.reject(new Error("Could not load canvg: "+r))}).then(function(r){return r.default?r.default:r})}Zi.API.addSvgAsImage=function(r,n,o,u,c,l,h,v){if(isNaN(n)||isNaN(o))throw Ma.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(u)||isNaN(c))throw Ma.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var w=document.createElement("canvas");w.width=u,w.height=c;var E=w.getContext("2d");E.fillStyle="#fff",E.fillRect(0,0,w.width,w.height);var T={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},I=this;return t().then(function(F){return F.fromString(E,r,T)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(F){return F.render(T)}).then(function(){I.addImage(w.toDataURL("image/jpeg",1),n,o,u,c,h,v)})}}(),Zi.API.putTotalPages=function(e){var t,r=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(t=new RegExp(e,"g"),r=this.internal.getNumberOfPages()):(t=new RegExp(this.pdfEscape16(e,this.internal.getFont()),"g"),r=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var n=1;n<=this.internal.getNumberOfPages();n++)for(var o=0;o<this.internal.pages[n].length;o++)this.internal.pages[n][o]=this.internal.pages[n][o].replace(t,r);return this},Zi.API.viewerPreferences=function(e,t){var r;e=e||{},t=t||!1;var n,o,u,c={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},l=Object.keys(c),h=[],v=0,w=0,E=0;function T(F,U){var G,H=!1;for(G=0;G<F.length;G+=1)F[G]===U&&(H=!0);return H}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(c)),this.internal.viewerpreferences.isSubscribed=!1),r=this.internal.viewerpreferences.configuration,e==="reset"||t===!0){var I=l.length;for(E=0;E<I;E+=1)r[l[E]].value=r[l[E]].defaultValue,r[l[E]].explicitSet=!1}if(_a(e)==="object"){for(o in e)if(u=e[o],T(l,o)&&u!==void 0){if(r[o].type==="boolean"&&typeof u=="boolean")r[o].value=u;else if(r[o].type==="name"&&T(r[o].valueSet,u))r[o].value=u;else if(r[o].type==="integer"&&Number.isInteger(u))r[o].value=u;else if(r[o].type==="array"){for(v=0;v<u.length;v+=1)if(n=!0,u[v].length===1&&typeof u[v][0]=="number")h.push(String(u[v]-1));else if(u[v].length>1){for(w=0;w<u[v].length;w+=1)typeof u[v][w]!="number"&&(n=!1);n===!0&&h.push([u[v][0]-1,u[v][1]-1].join(" "))}r[o].value="["+h.join(" ")+"]"}else r[o].value=r[o].defaultValue;r[o].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var F,U=[];for(F in r)r[F].explicitSet===!0&&(r[F].type==="name"?U.push("/"+F+" /"+r[F].value):U.push("/"+F+" "+r[F].value));U.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+U.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=r,this},function(e){var t=function(){var n='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',o=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),u=unescape(encodeURIComponent(n)),c=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),l=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),h=unescape(encodeURIComponent("</x:xmpmeta>")),v=u.length+c.length+l.length+o.length+h.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+v+" >>"),this.internal.write("stream"),this.internal.write(o+u+c+l+h),this.internal.write("endstream"),this.internal.write("endobj")},r=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};e.addMetadata=function(n,o){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:n,namespaceuri:o||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",r),this.internal.events.subscribe("postPutResources",t)),this}}(Zi.API),function(e){var t=e.API,r=t.pdfEscape16=function(u,c){for(var l,h=c.metadata.Unicode.widths,v=["","0","00","000","0000"],w=[""],E=0,T=u.length;E<T;++E){if(l=c.metadata.characterToGlyph(u.charCodeAt(E)),c.metadata.glyIdsUsed.push(l),c.metadata.toUnicode[l]=u.charCodeAt(E),h.indexOf(l)==-1&&(h.push(l),h.push([parseInt(c.metadata.widthOfGlyph(l),10)])),l=="0")return w.join("");l=l.toString(16),w.push(v[4-l.length],l)}return w.join("")},n=function(u){var c,l,h,v,w,E,T;for(w=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,h=[],E=0,T=(l=Object.keys(u).sort(function(I,F){return I-F})).length;E<T;E++)c=l[E],h.length>=100&&(w+=`
`+h.length+` beginbfchar
`+h.join(`
`)+`
endbfchar`,h=[]),u[c]!==void 0&&u[c]!==null&&typeof u[c].toString=="function"&&(v=("0000"+u[c].toString(16)).slice(-4),c=("0000"+(+c).toString(16)).slice(-4),h.push("<"+c+"><"+v+">"));return h.length&&(w+=`
`+h.length+` beginbfchar
`+h.join(`
`)+`
endbfchar
`),w+=`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};t.events.push(["putFont",function(u){(function(c){var l=c.font,h=c.out,v=c.newObject,w=c.putStream;if(l.metadata instanceof e.API.TTFFont&&l.encoding==="Identity-H"){for(var E=l.metadata.Unicode.widths,T=l.metadata.subset.encode(l.metadata.glyIdsUsed,1),I="",F=0;F<T.length;F++)I+=String.fromCharCode(T[F]);var U=v();w({data:I,addLength1:!0,objectId:U}),h("endobj");var G=v();w({data:n(l.metadata.toUnicode),addLength1:!0,objectId:G}),h("endobj");var H=v();h("<<"),h("/Type /FontDescriptor"),h("/FontName /"+Mh(l.fontName)),h("/FontFile2 "+U+" 0 R"),h("/FontBBox "+e.API.PDFObject.convert(l.metadata.bbox)),h("/Flags "+l.metadata.flags),h("/StemV "+l.metadata.stemV),h("/ItalicAngle "+l.metadata.italicAngle),h("/Ascent "+l.metadata.ascender),h("/Descent "+l.metadata.decender),h("/CapHeight "+l.metadata.capHeight),h(">>"),h("endobj");var X=v();h("<<"),h("/Type /Font"),h("/BaseFont /"+Mh(l.fontName)),h("/FontDescriptor "+H+" 0 R"),h("/W "+e.API.PDFObject.convert(E)),h("/CIDToGIDMap /Identity"),h("/DW 1000"),h("/Subtype /CIDFontType2"),h("/CIDSystemInfo"),h("<<"),h("/Supplement 0"),h("/Registry (Adobe)"),h("/Ordering ("+l.encoding+")"),h(">>"),h(">>"),h("endobj"),l.objectNumber=v(),h("<<"),h("/Type /Font"),h("/Subtype /Type0"),h("/ToUnicode "+G+" 0 R"),h("/BaseFont /"+Mh(l.fontName)),h("/Encoding /"+l.encoding),h("/DescendantFonts ["+X+" 0 R]"),h(">>"),h("endobj"),l.isAlreadyPutted=!0}})(u)}]),t.events.push(["putFont",function(u){(function(c){var l=c.font,h=c.out,v=c.newObject,w=c.putStream;if(l.metadata instanceof e.API.TTFFont&&l.encoding==="WinAnsiEncoding"){for(var E=l.metadata.rawData,T="",I=0;I<E.length;I++)T+=String.fromCharCode(E[I]);var F=v();w({data:T,addLength1:!0,objectId:F}),h("endobj");var U=v();w({data:n(l.metadata.toUnicode),addLength1:!0,objectId:U}),h("endobj");var G=v();h("<<"),h("/Descent "+l.metadata.decender),h("/CapHeight "+l.metadata.capHeight),h("/StemV "+l.metadata.stemV),h("/Type /FontDescriptor"),h("/FontFile2 "+F+" 0 R"),h("/Flags 96"),h("/FontBBox "+e.API.PDFObject.convert(l.metadata.bbox)),h("/FontName /"+Mh(l.fontName)),h("/ItalicAngle "+l.metadata.italicAngle),h("/Ascent "+l.metadata.ascender),h(">>"),h("endobj"),l.objectNumber=v();for(var H=0;H<l.metadata.hmtx.widths.length;H++)l.metadata.hmtx.widths[H]=parseInt(l.metadata.hmtx.widths[H]*(1e3/l.metadata.head.unitsPerEm));h("<</Subtype/TrueType/Type/Font/ToUnicode "+U+" 0 R/BaseFont/"+Mh(l.fontName)+"/FontDescriptor "+G+" 0 R/Encoding/"+l.encoding+" /FirstChar 29 /LastChar 255 /Widths "+e.API.PDFObject.convert(l.metadata.hmtx.widths)+">>"),h("endobj"),l.isAlreadyPutted=!0}})(u)}]);var o=function(u){var c,l=u.text||"",h=u.x,v=u.y,w=u.options||{},E=u.mutex||{},T=E.pdfEscape,I=E.activeFontKey,F=E.fonts,U=I,G="",H=0,X="",ee=F[U].encoding;if(F[U].encoding!=="Identity-H")return{text:l,x:h,y:v,options:w,mutex:E};for(X=l,U=I,Array.isArray(l)&&(X=l[0]),H=0;H<X.length;H+=1)F[U].metadata.hasOwnProperty("cmap")&&(c=F[U].metadata.cmap.unicode.codeMap[X[H].charCodeAt(0)]),c||X[H].charCodeAt(0)<256&&F[U].metadata.hasOwnProperty("Unicode")?G+=X[H]:G+="";var K="";return parseInt(U.slice(1))<14||ee==="WinAnsiEncoding"?K=T(G,U).split("").map(function(se){return se.charCodeAt(0).toString(16)}).join(""):ee==="Identity-H"&&(K=r(G,F[U])),E.isHex=!0,{text:K,x:h,y:v,options:w,mutex:E}};t.events.push(["postProcessText",function(u){var c=u.text||"",l=[],h={text:c,x:u.x,y:u.y,options:u.options,mutex:u.mutex};if(Array.isArray(c)){var v=0;for(v=0;v<c.length;v+=1)Array.isArray(c[v])&&c[v].length===3?l.push([o(Object.assign({},h,{text:c[v][0]})).text,c[v][1],c[v][2]]):l.push(o(Object.assign({},h,{text:c[v]})).text);u.text=l}else u.text=o(Object.assign({},h,{text:c})).text}])}(Zi),function(e){var t=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};e.existsFileInVFS=function(r){return t.call(this),this.internal.vFS[r]!==void 0},e.addFileToVFS=function(r,n){return t.call(this),this.internal.vFS[r]=n,this},e.getFileFromVFS=function(r){return t.call(this),this.internal.vFS[r]!==void 0?this.internal.vFS[r]:null}}(Zi.API),function(e){e.__bidiEngine__=e.prototype.__bidiEngine__=function(n){var o,u,c,l,h,v,w,E=t,T=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],I=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],F={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},U={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},G=["(",")","(","<",">","<","[","]","[","{","}","{","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],H=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),X=!1,ee=0;this.__bidiEngine__={};var K=function(Ae){var Ie=Ae.charCodeAt(),Fe=Ie>>8,ot=U[Fe];return ot!==void 0?E[256*ot+(255&Ie)]:Fe===252||Fe===253?"AL":H.test(Fe)?"L":Fe===8?"R":"N"},se=function(Ae){for(var Ie,Fe=0;Fe<Ae.length;Fe++){if((Ie=K(Ae.charAt(Fe)))==="L")return!1;if(Ie==="R")return!0}return!1},ce=function(Ae,Ie,Fe,ot){var _t,ht,$e,ut,bt=Ie[ot];switch(bt){case"L":case"R":X=!1;break;case"N":case"AN":break;case"EN":X&&(bt="AN");break;case"AL":X=!0,bt="R";break;case"WS":bt="N";break;case"CS":ot<1||ot+1>=Ie.length||(_t=Fe[ot-1])!=="EN"&&_t!=="AN"||(ht=Ie[ot+1])!=="EN"&&ht!=="AN"?bt="N":X&&(ht="AN"),bt=ht===_t?ht:"N";break;case"ES":bt=(_t=ot>0?Fe[ot-1]:"B")==="EN"&&ot+1<Ie.length&&Ie[ot+1]==="EN"?"EN":"N";break;case"ET":if(ot>0&&Fe[ot-1]==="EN"){bt="EN";break}if(X){bt="N";break}for($e=ot+1,ut=Ie.length;$e<ut&&Ie[$e]==="ET";)$e++;bt=$e<ut&&Ie[$e]==="EN"?"EN":"N";break;case"NSM":if(c&&!l){for(ut=Ie.length,$e=ot+1;$e<ut&&Ie[$e]==="NSM";)$e++;if($e<ut){var Ze=Ae[ot],He=Ze>=1425&&Ze<=2303||Ze===64286;if(_t=Ie[$e],He&&(_t==="R"||_t==="AL")){bt="R";break}}}bt=ot<1||(_t=Ie[ot-1])==="B"?"N":Fe[ot-1];break;case"B":X=!1,o=!0,bt=ee;break;case"S":u=!0,bt="N";break;case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":X=!1;break;case"BN":bt="N"}return bt},_e=function(Ae,Ie,Fe){var ot=Ae.split("");return Fe&&pe(ot,Fe,{hiLevel:ee}),ot.reverse(),Ie&&Ie.reverse(),ot.join("")},pe=function(Ae,Ie,Fe){var ot,_t,ht,$e,ut,bt=-1,Ze=Ae.length,He=0,xe=[],Ne=ee?I:T,Pe=[];for(X=!1,o=!1,u=!1,_t=0;_t<Ze;_t++)Pe[_t]=K(Ae[_t]);for(ht=0;ht<Ze;ht++){if(ut=He,xe[ht]=ce(Ae,Pe,xe,ht),ot=240&(He=Ne[ut][F[xe[ht]]]),He&=15,Ie[ht]=$e=Ne[He][5],ot>0)if(ot===16){for(_t=bt;_t<ht;_t++)Ie[_t]=1;bt=-1}else bt=-1;if(Ne[He][6])bt===-1&&(bt=ht);else if(bt>-1){for(_t=bt;_t<ht;_t++)Ie[_t]=$e;bt=-1}Pe[ht]==="B"&&(Ie[ht]=0),Fe.hiLevel|=$e}u&&function(ft,At,Pt){for(var Kt=0;Kt<Pt;Kt++)if(ft[Kt]==="S"){At[Kt]=ee;for(var $t=Kt-1;$t>=0&&ft[$t]==="WS";$t--)At[$t]=ee}}(Pe,Ie,Ze)},Ge=function(Ae,Ie,Fe,ot,_t){if(!(_t.hiLevel<Ae)){if(Ae===1&&ee===1&&!o)return Ie.reverse(),void(Fe&&Fe.reverse());for(var ht,$e,ut,bt,Ze=Ie.length,He=0;He<Ze;){if(ot[He]>=Ae){for(ut=He+1;ut<Ze&&ot[ut]>=Ae;)ut++;for(bt=He,$e=ut-1;bt<$e;bt++,$e--)ht=Ie[bt],Ie[bt]=Ie[$e],Ie[$e]=ht,Fe&&(ht=Fe[bt],Fe[bt]=Fe[$e],Fe[$e]=ht);He=ut}He++}}},We=function(Ae,Ie,Fe){var ot=Ae.split(""),_t={hiLevel:ee};return Fe||(Fe=[]),pe(ot,Fe,_t),function(ht,$e,ut){if(ut.hiLevel!==0&&w)for(var bt,Ze=0;Ze<ht.length;Ze++)$e[Ze]===1&&(bt=G.indexOf(ht[Ze]))>=0&&(ht[Ze]=G[bt+1])}(ot,Fe,_t),Ge(2,ot,Ie,Fe,_t),Ge(1,ot,Ie,Fe,_t),ot.join("")};return this.__bidiEngine__.doBidiReorder=function(Ae,Ie,Fe){if(function(_t,ht){if(ht)for(var $e=0;$e<_t.length;$e++)ht[$e]=$e;l===void 0&&(l=se(_t)),v===void 0&&(v=se(_t))}(Ae,Ie),c||!h||v)if(c&&h&&l^v)ee=l?1:0,Ae=_e(Ae,Ie,Fe);else if(!c&&h&&v)ee=l?1:0,Ae=We(Ae,Ie,Fe),Ae=_e(Ae,Ie);else if(!c||l||h||v){if(c&&!h&&l^v)Ae=_e(Ae,Ie),l?(ee=0,Ae=We(Ae,Ie,Fe)):(ee=1,Ae=We(Ae,Ie,Fe),Ae=_e(Ae,Ie));else if(c&&l&&!h&&v)ee=1,Ae=We(Ae,Ie,Fe),Ae=_e(Ae,Ie);else if(!c&&!h&&l^v){var ot=w;l?(ee=1,Ae=We(Ae,Ie,Fe),ee=0,w=!1,Ae=We(Ae,Ie,Fe),w=ot):(ee=0,Ae=We(Ae,Ie,Fe),Ae=_e(Ae,Ie),ee=1,w=!1,Ae=We(Ae,Ie,Fe),w=ot,Ae=_e(Ae,Ie))}}else ee=0,Ae=We(Ae,Ie,Fe);else ee=l?1:0,Ae=We(Ae,Ie,Fe);return Ae},this.__bidiEngine__.setOptions=function(Ae){Ae&&(c=Ae.isInputVisual,h=Ae.isOutputVisual,l=Ae.isInputRtl,v=Ae.isOutputRtl,w=Ae.isSymmetricSwapping)},this.__bidiEngine__.setOptions(n),this.__bidiEngine__};var t=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],r=new e.__bidiEngine__({isInputVisual:!0});e.API.events.push(["postProcessText",function(n){var o=n.text,u=(n.x,n.y,n.options||{}),c=(n.mutex,u.lang,[]);if(u.isInputVisual=typeof u.isInputVisual!="boolean"||u.isInputVisual,r.setOptions(u),Object.prototype.toString.call(o)==="[object Array]"){var l=0;for(c=[],l=0;l<o.length;l+=1)Object.prototype.toString.call(o[l])==="[object Array]"?c.push([r.doBidiReorder(o[l][0]),o[l][1],o[l][2]]):c.push([r.doBidiReorder(o[l])]);n.text=c}else n.text=r.doBidiReorder(o);r.setOptions({isInputVisual:!0})}])}(Zi),Zi.API.TTFFont=function(){function e(t){var r;if(this.rawData=t,r=this.contents=new zf(t),this.contents.pos=4,r.readString(4)==="ttcf")throw new Error("TTCF not supported.");r.pos=0,this.parse(),this.subset=new f9(this),this.registerTTF()}return e.open=function(t){return new e(t)},e.prototype.parse=function(){return this.directory=new J7(this.contents),this.head=new Q7(this),this.name=new i9(this),this.cmap=new e6(this),this.toUnicode={},this.hhea=new e9(this),this.maxp=new o9(this),this.hmtx=new a9(this),this.post=new r9(this),this.os2=new t9(this),this.loca=new c9(this),this.glyf=new s9(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},e.prototype.registerTTF=function(){var t,r,n,o,u;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=function(){var c,l,h,v;for(v=[],c=0,l=(h=this.bbox).length;c<l;c++)t=h[c],v.push(Math.round(t*this.scaleFactor));return v}.call(this),this.stemV=0,this.post.exists?(n=255&(o=this.post.italic_angle),32768&(r=o>>16)&&(r=-(1+(65535^r))),this.italicAngle=+(r+"."+n)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(u=this.familyClass)===1||u===2||u===3||u===4||u===5||u===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},e.prototype.characterToGlyph=function(t){var r;return((r=this.cmap.unicode)!=null?r.codeMap[t]:void 0)||0},e.prototype.widthOfGlyph=function(t){var r;return r=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(t).advance*r},e.prototype.widthOfString=function(t,r,n){var o,u,c,l;for(c=0,u=0,l=(t=""+t).length;0<=l?u<l:u>l;u=0<=l?++u:--u)o=t.charCodeAt(u),c+=this.widthOfGlyph(this.characterToGlyph(o))+n*(1e3/r)||0;return c*(r/1e3)},e.prototype.lineHeight=function(t,r){var n;return r==null&&(r=!1),n=r?this.lineGap:0,(this.ascender+n-this.decender)/1e3*t},e}();var _0,zf=function(){function e(t){this.data=t??[],this.pos=0,this.length=this.data.length}return e.prototype.readByte=function(){return this.data[this.pos++]},e.prototype.writeByte=function(t){return this.data[this.pos++]=t},e.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},e.prototype.writeUInt32=function(t){return this.writeByte(t>>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t)},e.prototype.readInt32=function(){var t;return(t=this.readUInt32())>=2147483648?t-4294967296:t},e.prototype.writeInt32=function(t){return t<0&&(t+=4294967296),this.writeUInt32(t)},e.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},e.prototype.writeUInt16=function(t){return this.writeByte(t>>8&255),this.writeByte(255&t)},e.prototype.readInt16=function(){var t;return(t=this.readUInt16())>=32768?t-65536:t},e.prototype.writeInt16=function(t){return t<0&&(t+=65536),this.writeUInt16(t)},e.prototype.readString=function(t){var r,n;for(n=[],r=0;0<=t?r<t:r>t;r=0<=t?++r:--r)n[r]=String.fromCharCode(this.readByte());return n.join("")},e.prototype.writeString=function(t){var r,n,o;for(o=[],r=0,n=t.length;0<=n?r<n:r>n;r=0<=n?++r:--r)o.push(this.writeByte(t.charCodeAt(r)));return o},e.prototype.readShort=function(){return this.readInt16()},e.prototype.writeShort=function(t){return this.writeInt16(t)},e.prototype.readLongLong=function(){var t,r,n,o,u,c,l,h;return t=this.readByte(),r=this.readByte(),n=this.readByte(),o=this.readByte(),u=this.readByte(),c=this.readByte(),l=this.readByte(),h=this.readByte(),128&t?-1*(72057594037927940*(255^t)+281474976710656*(255^r)+1099511627776*(255^n)+4294967296*(255^o)+16777216*(255^u)+65536*(255^c)+256*(255^l)+(255^h)+1):72057594037927940*t+281474976710656*r+1099511627776*n+4294967296*o+16777216*u+65536*c+256*l+h},e.prototype.writeLongLong=function(t){var r,n;return r=Math.floor(t/4294967296),n=4294967295&t,this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r),this.writeByte(n>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n)},e.prototype.readInt=function(){return this.readInt32()},e.prototype.writeInt=function(t){return this.writeInt32(t)},e.prototype.read=function(t){var r,n;for(r=[],n=0;0<=t?n<t:n>t;n=0<=t?++n:--n)r.push(this.readByte());return r},e.prototype.write=function(t){var r,n,o,u;for(u=[],n=0,o=t.length;n<o;n++)r=t[n],u.push(this.writeByte(r));return u},e}(),J7=function(){var e;function t(r){var n,o,u;for(this.scalarType=r.readInt(),this.tableCount=r.readShort(),this.searchRange=r.readShort(),this.entrySelector=r.readShort(),this.rangeShift=r.readShort(),this.tables={},o=0,u=this.tableCount;0<=u?o<u:o>u;o=0<=u?++o:--o)n={tag:r.readString(4),checksum:r.readInt(),offset:r.readInt(),length:r.readInt()},this.tables[n.tag]=n}return t.prototype.encode=function(r){var n,o,u,c,l,h,v,w,E,T,I,F,U;for(U in I=Object.keys(r).length,h=Math.log(2),E=16*Math.floor(Math.log(I)/h),c=Math.floor(E/h),w=16*I-E,(o=new zf).writeInt(this.scalarType),o.writeShort(I),o.writeShort(E),o.writeShort(c),o.writeShort(w),u=16*I,v=o.pos+u,l=null,F=[],r)for(T=r[U],o.writeString(U),o.writeInt(e(T)),o.writeInt(v),o.writeInt(T.length),F=F.concat(T),U==="head"&&(l=v),v+=T.length;v%4;)F.push(0),v++;return o.write(F),n=2981146554-e(o.data),o.pos=l+8,o.writeUInt32(n),o.data},e=function(r){var n,o,u,c;for(r=t6.call(r);r.length%4;)r.push(0);for(u=new zf(r),o=0,n=0,c=r.length;n<c;n=n+=4)o+=u.readUInt32();return 4294967295&o},t}(),K7={}.hasOwnProperty,$0=function(e,t){for(var r in t)K7.call(t,r)&&(e[r]=t[r]);function n(){this.constructor=e}return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e};_0=function(){function e(t){var r;this.file=t,r=this.file.directory.tables[this.tag],this.exists=!!r,r&&(this.offset=r.offset,this.length=r.length,this.parse(this.file.contents))}return e.prototype.parse=function(){},e.prototype.encode=function(){},e.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},e}();var Q7=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return $0(t,_0),t.prototype.tag="head",t.prototype.parse=function(r){return r.pos=this.offset,this.version=r.readInt(),this.revision=r.readInt(),this.checkSumAdjustment=r.readInt(),this.magicNumber=r.readInt(),this.flags=r.readShort(),this.unitsPerEm=r.readShort(),this.created=r.readLongLong(),this.modified=r.readLongLong(),this.xMin=r.readShort(),this.yMin=r.readShort(),this.xMax=r.readShort(),this.yMax=r.readShort(),this.macStyle=r.readShort(),this.lowestRecPPEM=r.readShort(),this.fontDirectionHint=r.readShort(),this.indexToLocFormat=r.readShort(),this.glyphDataFormat=r.readShort()},t.prototype.encode=function(r){var n;return(n=new zf).writeInt(this.version),n.writeInt(this.revision),n.writeInt(this.checkSumAdjustment),n.writeInt(this.magicNumber),n.writeShort(this.flags),n.writeShort(this.unitsPerEm),n.writeLongLong(this.created),n.writeLongLong(this.modified),n.writeShort(this.xMin),n.writeShort(this.yMin),n.writeShort(this.xMax),n.writeShort(this.yMax),n.writeShort(this.macStyle),n.writeShort(this.lowestRecPPEM),n.writeShort(this.fontDirectionHint),n.writeShort(r),n.writeShort(this.glyphDataFormat),n.data},t}(),fb=function(){function e(t,r){var n,o,u,c,l,h,v,w,E,T,I,F,U,G,H,X,ee;switch(this.platformID=t.readUInt16(),this.encodingID=t.readShort(),this.offset=r+t.readInt(),E=t.pos,t.pos=this.offset,this.format=t.readUInt16(),this.length=t.readUInt16(),this.language=t.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(h=0;h<256;++h)this.codeMap[h]=t.readByte();break;case 4:for(I=t.readUInt16(),T=I/2,t.pos+=6,u=function(){var K,se;for(se=[],h=K=0;0<=T?K<T:K>T;h=0<=T?++K:--K)se.push(t.readUInt16());return se}(),t.pos+=2,U=function(){var K,se;for(se=[],h=K=0;0<=T?K<T:K>T;h=0<=T?++K:--K)se.push(t.readUInt16());return se}(),v=function(){var K,se;for(se=[],h=K=0;0<=T?K<T:K>T;h=0<=T?++K:--K)se.push(t.readUInt16());return se}(),w=function(){var K,se;for(se=[],h=K=0;0<=T?K<T:K>T;h=0<=T?++K:--K)se.push(t.readUInt16());return se}(),o=(this.length-t.pos+this.offset)/2,l=function(){var K,se;for(se=[],h=K=0;0<=o?K<o:K>o;h=0<=o?++K:--K)se.push(t.readUInt16());return se}(),h=H=0,ee=u.length;H<ee;h=++H)for(G=u[h],n=X=F=U[h];F<=G?X<=G:X>=G;n=F<=G?++X:--X)w[h]===0?c=n+v[h]:(c=l[w[h]/2+(n-F)-(T-h)]||0)!==0&&(c+=v[h]),this.codeMap[n]=65535&c}t.pos=E}return e.encode=function(t,r){var n,o,u,c,l,h,v,w,E,T,I,F,U,G,H,X,ee,K,se,ce,_e,pe,Ge,We,Ae,Ie,Fe,ot,_t,ht,$e,ut,bt,Ze,He,xe,Ne,Pe,ft,At,Pt,Kt,$t,br,Gt,Rr;switch(ot=new zf,c=Object.keys(t).sort(function(Mr,Kr){return Mr-Kr}),r){case"macroman":for(U=0,G=function(){var Mr=[];for(F=0;F<256;++F)Mr.push(0);return Mr}(),X={0:0},u={},_t=0,bt=c.length;_t<bt;_t++)X[$t=t[o=c[_t]]]==null&&(X[$t]=++U),u[o]={old:t[o],new:X[t[o]]},G[o]=X[t[o]];return ot.writeUInt16(1),ot.writeUInt16(0),ot.writeUInt32(12),ot.writeUInt16(0),ot.writeUInt16(262),ot.writeUInt16(0),ot.write(G),{charMap:u,subtable:ot.data,maxGlyphID:U+1};case"unicode":for(Ie=[],E=[],ee=0,X={},n={},H=v=null,ht=0,Ze=c.length;ht<Ze;ht++)X[se=t[o=c[ht]]]==null&&(X[se]=++ee),n[o]={old:se,new:X[se]},l=X[se]-o,H!=null&&l===v||(H&&E.push(H),Ie.push(o),v=l),H=o;for(H&&E.push(H),E.push(65535),Ie.push(65535),We=2*(Ge=Ie.length),pe=2*Math.pow(Math.log(Ge)/Math.LN2,2),T=Math.log(pe/2)/Math.LN2,_e=2*Ge-pe,h=[],ce=[],I=[],F=$e=0,He=Ie.length;$e<He;F=++$e){if(Ae=Ie[F],w=E[F],Ae===65535){h.push(0),ce.push(0);break}if(Ae-(Fe=n[Ae].new)>=32768)for(h.push(0),ce.push(2*(I.length+Ge-F)),o=ut=Ae;Ae<=w?ut<=w:ut>=w;o=Ae<=w?++ut:--ut)I.push(n[o].new);else h.push(Fe-Ae),ce.push(0)}for(ot.writeUInt16(3),ot.writeUInt16(1),ot.writeUInt32(12),ot.writeUInt16(4),ot.writeUInt16(16+8*Ge+2*I.length),ot.writeUInt16(0),ot.writeUInt16(We),ot.writeUInt16(pe),ot.writeUInt16(T),ot.writeUInt16(_e),Pt=0,xe=E.length;Pt<xe;Pt++)o=E[Pt],ot.writeUInt16(o);for(ot.writeUInt16(0),Kt=0,Ne=Ie.length;Kt<Ne;Kt++)o=Ie[Kt],ot.writeUInt16(o);for(br=0,Pe=h.length;br<Pe;br++)l=h[br],ot.writeUInt16(l);for(Gt=0,ft=ce.length;Gt<ft;Gt++)K=ce[Gt],ot.writeUInt16(K);for(Rr=0,At=I.length;Rr<At;Rr++)U=I[Rr],ot.writeUInt16(U);return{charMap:n,subtable:ot.data,maxGlyphID:ee+1}}},e}(),e6=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return $0(t,_0),t.prototype.tag="cmap",t.prototype.parse=function(r){var n,o,u;for(r.pos=this.offset,this.version=r.readUInt16(),u=r.readUInt16(),this.tables=[],this.unicode=null,o=0;0<=u?o<u:o>u;o=0<=u?++o:--o)n=new fb(r,this.offset),this.tables.push(n),n.isUnicode&&this.unicode==null&&(this.unicode=n);return!0},t.encode=function(r,n){var o,u;return n==null&&(n="macroman"),o=fb.encode(r,n),(u=new zf).writeUInt16(0),u.writeUInt16(1),o.table=u.data.concat(o.subtable),o},t}(),e9=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return $0(t,_0),t.prototype.tag="hhea",t.prototype.parse=function(r){return r.pos=this.offset,this.version=r.readInt(),this.ascender=r.readShort(),this.decender=r.readShort(),this.lineGap=r.readShort(),this.advanceWidthMax=r.readShort(),this.minLeftSideBearing=r.readShort(),this.minRightSideBearing=r.readShort(),this.xMaxExtent=r.readShort(),this.caretSlopeRise=r.readShort(),this.caretSlopeRun=r.readShort(),this.caretOffset=r.readShort(),r.pos+=8,this.metricDataFormat=r.readShort(),this.numberOfMetrics=r.readUInt16()},t}(),t9=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return $0(t,_0),t.prototype.tag="OS/2",t.prototype.parse=function(r){if(r.pos=this.offset,this.version=r.readUInt16(),this.averageCharWidth=r.readShort(),this.weightClass=r.readUInt16(),this.widthClass=r.readUInt16(),this.type=r.readShort(),this.ySubscriptXSize=r.readShort(),this.ySubscriptYSize=r.readShort(),this.ySubscriptXOffset=r.readShort(),this.ySubscriptYOffset=r.readShort(),this.ySuperscriptXSize=r.readShort(),this.ySuperscriptYSize=r.readShort(),this.ySuperscriptXOffset=r.readShort(),this.ySuperscriptYOffset=r.readShort(),this.yStrikeoutSize=r.readShort(),this.yStrikeoutPosition=r.readShort(),this.familyClass=r.readShort(),this.panose=function(){var n,o;for(o=[],n=0;n<10;++n)o.push(r.readByte());return o}(),this.charRange=function(){var n,o;for(o=[],n=0;n<4;++n)o.push(r.readInt());return o}(),this.vendorID=r.readString(4),this.selection=r.readShort(),this.firstCharIndex=r.readShort(),this.lastCharIndex=r.readShort(),this.version>0&&(this.ascent=r.readShort(),this.descent=r.readShort(),this.lineGap=r.readShort(),this.winAscent=r.readShort(),this.winDescent=r.readShort(),this.codePageRange=function(){var n,o;for(o=[],n=0;n<2;n=++n)o.push(r.readInt());return o}(),this.version>1))return this.xHeight=r.readShort(),this.capHeight=r.readShort(),this.defaultChar=r.readShort(),this.breakChar=r.readShort(),this.maxContext=r.readShort()},t}(),r9=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return $0(t,_0),t.prototype.tag="post",t.prototype.parse=function(r){var n,o,u;switch(r.pos=this.offset,this.format=r.readInt(),this.italicAngle=r.readInt(),this.underlinePosition=r.readShort(),this.underlineThickness=r.readShort(),this.isFixedPitch=r.readInt(),this.minMemType42=r.readInt(),this.maxMemType42=r.readInt(),this.minMemType1=r.readInt(),this.maxMemType1=r.readInt(),this.format){case 65536:break;case 131072:var c;for(o=r.readUInt16(),this.glyphNameIndex=[],c=0;0<=o?c<o:c>o;c=0<=o?++c:--c)this.glyphNameIndex.push(r.readUInt16());for(this.names=[],u=[];r.pos<this.offset+this.length;)n=r.readByte(),u.push(this.names.push(r.readString(n)));return u;case 151552:return o=r.readUInt16(),this.offsets=r.read(o);case 196608:break;case 262144:return this.map=function(){var l,h,v;for(v=[],c=l=0,h=this.file.maxp.numGlyphs;0<=h?l<h:l>h;c=0<=h?++l:--l)v.push(r.readUInt32());return v}.call(this)}},t}(),n9=function(e,t){this.raw=e,this.length=e.length,this.platformID=t.platformID,this.encodingID=t.encodingID,this.languageID=t.languageID},i9=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return $0(t,_0),t.prototype.tag="name",t.prototype.parse=function(r){var n,o,u,c,l,h,v,w,E,T,I;for(r.pos=this.offset,r.readShort(),n=r.readShort(),h=r.readShort(),o=[],c=0;0<=n?c<n:c>n;c=0<=n?++c:--c)o.push({platformID:r.readShort(),encodingID:r.readShort(),languageID:r.readShort(),nameID:r.readShort(),length:r.readShort(),offset:this.offset+h+r.readShort()});for(v={},c=E=0,T=o.length;E<T;c=++E)u=o[c],r.pos=u.offset,w=r.readString(u.length),l=new n9(w,u),v[I=u.nameID]==null&&(v[I]=[]),v[u.nameID].push(l);this.strings=v,this.copyright=v[0],this.fontFamily=v[1],this.fontSubfamily=v[2],this.uniqueSubfamily=v[3],this.fontName=v[4],this.version=v[5];try{this.postscriptName=v[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=v[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=v[7],this.manufacturer=v[8],this.designer=v[9],this.description=v[10],this.vendorUrl=v[11],this.designerUrl=v[12],this.license=v[13],this.licenseUrl=v[14],this.preferredFamily=v[15],this.preferredSubfamily=v[17],this.compatibleFull=v[18],this.sampleText=v[19]},t}(),o9=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return $0(t,_0),t.prototype.tag="maxp",t.prototype.parse=function(r){return r.pos=this.offset,this.version=r.readInt(),this.numGlyphs=r.readUInt16(),this.maxPoints=r.readUInt16(),this.maxContours=r.readUInt16(),this.maxCompositePoints=r.readUInt16(),this.maxComponentContours=r.readUInt16(),this.maxZones=r.readUInt16(),this.maxTwilightPoints=r.readUInt16(),this.maxStorage=r.readUInt16(),this.maxFunctionDefs=r.readUInt16(),this.maxInstructionDefs=r.readUInt16(),this.maxStackElements=r.readUInt16(),this.maxSizeOfInstructions=r.readUInt16(),this.maxComponentElements=r.readUInt16(),this.maxComponentDepth=r.readUInt16()},t}(),a9=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return $0(t,_0),t.prototype.tag="hmtx",t.prototype.parse=function(r){var n,o,u,c,l,h,v;for(r.pos=this.offset,this.metrics=[],n=0,h=this.file.hhea.numberOfMetrics;0<=h?n<h:n>h;n=0<=h?++n:--n)this.metrics.push({advance:r.readUInt16(),lsb:r.readInt16()});for(u=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var w,E;for(E=[],n=w=0;0<=u?w<u:w>u;n=0<=u?++w:--w)E.push(r.readInt16());return E}(),this.widths=function(){var w,E,T,I;for(I=[],w=0,E=(T=this.metrics).length;w<E;w++)c=T[w],I.push(c.advance);return I}.call(this),o=this.widths[this.widths.length-1],v=[],n=l=0;0<=u?l<u:l>u;n=0<=u?++l:--l)v.push(this.widths.push(o));return v},t.prototype.forGlyph=function(r){return r in this.metrics?this.metrics[r]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[r-this.metrics.length]}},t}(),t6=[].slice,s9=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return $0(t,_0),t.prototype.tag="glyf",t.prototype.parse=function(){return this.cache={}},t.prototype.glyphFor=function(r){var n,o,u,c,l,h,v,w,E,T;return r in this.cache?this.cache[r]:(c=this.file.loca,n=this.file.contents,o=c.indexOf(r),(u=c.lengthOf(r))===0?this.cache[r]=null:(n.pos=this.offset+o,l=(h=new zf(n.read(u))).readShort(),w=h.readShort(),T=h.readShort(),v=h.readShort(),E=h.readShort(),this.cache[r]=l===-1?new u9(h,w,T,v,E):new l9(h,l,w,T,v,E),this.cache[r]))},t.prototype.encode=function(r,n,o){var u,c,l,h,v;for(l=[],c=[],h=0,v=n.length;h<v;h++)u=r[n[h]],c.push(l.length),u&&(l=l.concat(u.encode(o)));return c.push(l.length),{table:l,offsets:c}},t}(),l9=function(){function e(t,r,n,o,u,c){this.raw=t,this.numberOfContours=r,this.xMin=n,this.yMin=o,this.xMax=u,this.yMax=c,this.compound=!1}return e.prototype.encode=function(){return this.raw.data},e}(),u9=function(){function e(t,r,n,o,u){var c,l;for(this.raw=t,this.xMin=r,this.yMin=n,this.xMax=o,this.yMax=u,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],c=this.raw;l=c.readShort(),this.glyphOffsets.push(c.pos),this.glyphIDs.push(c.readUInt16()),32&l;)c.pos+=1&l?4:2,128&l?c.pos+=8:64&l?c.pos+=4:8&l&&(c.pos+=2)}return e.prototype.encode=function(){var t,r,n;for(r=new zf(t6.call(this.raw.data)),t=0,n=this.glyphIDs.length;t<n;++t)r.pos=this.glyphOffsets[t];return r.data},e}(),c9=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return $0(t,_0),t.prototype.tag="loca",t.prototype.parse=function(r){var n,o;return r.pos=this.offset,n=this.file.head.indexToLocFormat,this.offsets=n===0?function(){var u,c;for(c=[],o=0,u=this.length;o<u;o+=2)c.push(2*r.readUInt16());return c}.call(this):function(){var u,c;for(c=[],o=0,u=this.length;o<u;o+=4)c.push(r.readUInt32());return c}.call(this)},t.prototype.indexOf=function(r){return this.offsets[r]},t.prototype.lengthOf=function(r){return this.offsets[r+1]-this.offsets[r]},t.prototype.encode=function(r,n){for(var o=new Uint32Array(this.offsets.length),u=0,c=0,l=0;l<o.length;++l)if(o[l]=u,c<n.length&&n[c]==l){++c,o[l]=u;var h=this.offsets[l],v=this.offsets[l+1]-h;v>0&&(u+=v)}for(var w=new Array(4*o.length),E=0;E<o.length;++E)w[4*E+3]=255&o[E],w[4*E+2]=(65280&o[E])>>8,w[4*E+1]=(16711680&o[E])>>16,w[4*E]=(4278190080&o[E])>>24;return w},t}(),f9=function(){function e(t){this.font=t,this.subset={},this.unicodes={},this.next=33}return e.prototype.generateCmap=function(){var t,r,n,o,u;for(r in o=this.font.cmap.tables[0].codeMap,t={},u=this.subset)n=u[r],t[r]=o[n];return t},e.prototype.glyphsFor=function(t){var r,n,o,u,c,l,h;for(o={},c=0,l=t.length;c<l;c++)o[u=t[c]]=this.font.glyf.glyphFor(u);for(u in r=[],o)(n=o[u])!=null&&n.compound&&r.push.apply(r,n.glyphIDs);if(r.length>0)for(u in h=this.glyphsFor(r))n=h[u],o[u]=n;return o},e.prototype.encode=function(t,r){var n,o,u,c,l,h,v,w,E,T,I,F,U,G,H;for(o in n=e6.encode(this.generateCmap(),"unicode"),c=this.glyphsFor(t),I={0:0},H=n.charMap)I[(h=H[o]).old]=h.new;for(F in T=n.maxGlyphID,c)F in I||(I[F]=T++);return w=function(X){var ee,K;for(ee in K={},X)K[X[ee]]=ee;return K}(I),E=Object.keys(w).sort(function(X,ee){return X-ee}),U=function(){var X,ee,K;for(K=[],X=0,ee=E.length;X<ee;X++)l=E[X],K.push(w[l]);return K}(),u=this.font.glyf.encode(c,U,I),v=this.font.loca.encode(u.offsets,U),G={cmap:this.font.cmap.raw(),glyf:u.table,loca:v,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(r)},this.font.os2.exists&&(G["OS/2"]=this.font.os2.raw()),this.font.directory.encode(G)},e}();Zi.API.PDFObject=function(){var e;function t(){}return e=function(r,n){return(Array(n+1).join("0")+r).slice(-n)},t.convert=function(r){var n,o,u,c;if(Array.isArray(r))return"["+function(){var l,h,v;for(v=[],l=0,h=r.length;l<h;l++)n=r[l],v.push(t.convert(n));return v}().join(" ")+"]";if(typeof r=="string")return"/"+r;if(r!=null&&r.isString)return"("+r+")";if(r instanceof Date)return"(D:"+e(r.getUTCFullYear(),4)+e(r.getUTCMonth(),2)+e(r.getUTCDate(),2)+e(r.getUTCHours(),2)+e(r.getUTCMinutes(),2)+e(r.getUTCSeconds(),2)+"Z)";if({}.toString.call(r)==="[object Object]"){for(o in u=["<<"],r)c=r[o],u.push("/"+o+" "+t.convert(c));return u.push(">>"),u.join(`
`)}return""+r},t}();const p0={JPEG:"jpg",PNG:"png",PDF:"pdf",SVG:"svg"},ih={in:"in",mm:"mm"},Cf={A2:[594,420],A3:[420,297],A4:[297,210],A5:[210,148],A6:[148,105],B2:[707,500],B3:[500,353],B4:[353,250],B5:[250,176],B6:[176,125]},O0={Landscape:"landscape",Portrait:"portrait"},ip={72:72,96:96,200:200,300:300,400:400};class h9{constructor(){Bi(this,"map");Bi(this,"width",Cf.A4[0]);Bi(this,"height",Cf.A4[1]);Bi(this,"dpi",ip[96]);Bi(this,"format",p0.PNG.toString());Bi(this,"unit",ih.mm)}generate(t,r=Cf.A4,n=300,o=p0.PNG.toString(),u=ih.mm){this.map=t,this.width=r[0],this.height=r[1],this.dpi=n,this.format=o,this.unit=u;const c=this,l=window.devicePixelRatio;Object.defineProperty(window,"devicePixelRatio",{get(){return c.dpi/96}});const h=document.createElement("div");h.className="hidden-map",document.body.appendChild(h);const v=document.createElement("div");v.style.width=this.toPixels(this.width),v.style.height=this.toPixels(this.height),h.appendChild(v);const w=this.map.getStyle();if(w&&w.sources){const T=w.sources;Object.keys(T).forEach(I=>{const F=T[I];Object.keys(F).forEach(U=>{F[U]||delete F[U]})})}const E=new Ec.Map({container:v,style:w,center:this.map.getCenter(),zoom:this.map.getZoom(),bearing:this.map.getBearing(),pitch:this.map.getPitch(),interactive:!1,preserveDrawingBuffer:!0,fadeDuration:0,attributionControl:!1,transformRequest:this.map._requestManager._transformRequestFn});E.once("idle",()=>{var F;const T=E.getCanvas(),I=`map.${c.format}`;switch(c.format){case p0.PNG:c.toPNG(T,I);break;case p0.JPEG:c.toJPEG(T,I);break;case p0.PDF:c.toPDF(E,I);break;case p0.SVG:c.toSVG(T,I);break;default:console.error(`Invalid file format: ${c.format}`);break}E.remove(),(F=h.parentNode)==null||F.removeChild(h),Object.defineProperty(window,"devicePixelRatio",{get(){return l}})})}toPNG(t,r){const n=document.createElement("a");n.href=t.toDataURL(),n.download=r,n.click(),n.remove()}toJPEG(t,r){const n=t.toDataURL("image/jpeg",.85),o=document.createElement("a");o.href=n,o.download=r,o.click(),o.remove()}toPDF(t,r){const n=t.getCanvas(),o=new Zi({orientation:this.width>this.height?"l":"p",unit:this.unit,compress:!0});o.addImage(n.toDataURL("image/png"),"png",0,0,this.width,this.height,void 0,"FAST");const{lng:u,lat:c}=t.getCenter();o.setProperties({title:t.getStyle().name,subject:`center: [${u}, ${c}], zoom: ${t.getZoom()}`,creator:"Mapbox GL Export Plugin",author:"(c)Mapbox, (c)OpenStreetMap"}),o.save(r)}toSVG(t,r){const n=t.toDataURL("image/png"),o=Number(this.toPixels(this.width,this.dpi).replace("px","")),u=Number(this.toPixels(this.height,this.dpi).replace("px","")),c=`
		<svg xmlns="http://www.w3.org/2000/svg" 
			xmlns:xlink="http://www.w3.org/1999/xlink" 
			version="1.1" 
			width="${o}" 
			height="${u}" 
			viewBox="0 0 ${o} ${u}" 
			xml:space="preserve">
		    <image style="stroke: none; stroke-width: 0; stroke-dasharray: none; stroke-linecap: butt; stroke-dashoffset: 0; stroke-linejoin: miter; stroke-miterlimit: 4; fill: rgb(0,0,0); fill-rule: nonzero; opacity: 1;"  
			xlink:href="${n}" width="${o}" height="${u}"></image>
		</svg>`,l=document.createElement("a");l.href=`data:application/xml,${encodeURIComponent(c)}`,l.download=r,l.click(),l.remove()}toPixels(t,r=96){return this.unit===ih.mm&&(r/=25.4),`${r*t}px`}toBlob(t){const r=atob(t.replace(/^.*,/,"")),n=new Uint8Array(r.length);for(let u=0;u<r.length;u+=1)n[u]=r.charCodeAt(u);return new Blob([n.buffer],{type:"image/png"})}}const p9=Object.freeze(Object.defineProperty({__proto__:null,DPI:ip,Format:p0,PageOrientation:O0,Size:Cf,Unit:ih,default:h9},Symbol.toStringTag,{value:"Module"}));class d9{constructor(t){Bi(this,"map");Bi(this,"width");Bi(this,"height");Bi(this,"unit");Bi(this,"svgCanvas");Bi(this,"svgPath");var c,l,h;if(this.map=t,this.map===void 0)return;this.mapResize=this.mapResize.bind(this),this.map.on("resize",this.mapResize);const r=(c=this.map)==null?void 0:c.getCanvas().clientWidth,n=(l=this.map)==null?void 0:l.getCanvas().clientHeight,o=document.createElementNS("http://www.w3.org/2000/svg","svg");o.style.position="absolute",o.style.top="0px",o.style.left="0px",o.setAttribute("width",`${r}px`),o.setAttribute("height",`${n}px`);const u=document.createElementNS("http://www.w3.org/2000/svg","path");u.setAttribute("style","fill:#888888;stroke-width:0"),u.setAttribute("fill-opacity","0.5"),o.append(u),(h=this.map)==null||h.getCanvasContainer().appendChild(o),this.svgCanvas=o,this.svgPath=u}mapResize(){this.generateCutOut()}updateArea(t,r){this.width=t,this.height=r,this.unit=ih.mm,this.generateCutOut()}generateCutOut(){var v,w;if(this.map===void 0||this.svgCanvas===void 0||this.svgPath===void 0||!(this.width&&this.height))return;const t=this.toPixels(this.width),r=this.toPixels(this.height),n=(v=this.map)==null?void 0:v.getCanvas().clientWidth,o=(w=this.map)==null?void 0:w.getCanvas().clientHeight,u=n/2-t/2,c=u+t,l=o/2-r/2,h=l+r;this.svgCanvas.setAttribute("width",`${n}px`),this.svgCanvas.setAttribute("height",`${o}px`),this.svgPath.setAttribute("d",`M 0 0 L ${n} 0 L ${n} ${o} L 0 ${o} M ${u} ${l} L ${u} ${h} L ${c} ${h} L ${c} ${l}`)}destroy(){this.svgCanvas!==void 0&&(this.svgCanvas.remove(),this.svgCanvas=void 0),this.map!==void 0&&(this.map=void 0)}toPixels(t,r=96){return this.unit===ih.mm&&(r/=25.4),r*t}}class m9{constructor(t){Bi(this,"map");Bi(this,"width");Bi(this,"height");Bi(this,"svgCanvas");Bi(this,"xLine");Bi(this,"yLine");Bi(this,"color","#535353");this.map=t,this.mapResize=this.mapResize.bind(this)}create(){this.updateValues(),this.map!==void 0?(this.map.on("resize",this.mapResize),this.createCanvas(this.map.getCanvasContainer())):console.error("map object is null")}updateValues(){var t,r;this.width=(t=this.map)==null?void 0:t.getCanvas().clientWidth,this.height=(r=this.map)==null?void 0:r.getCanvas().clientHeight}mapResize(){this.updateValues(),this.updateCanvas()}updateCanvas(){if(this.svgCanvas!==void 0&&this.yLine!==void 0&&this.xLine!==void 0&&this.width!==void 0&&this.height!==void 0){this.svgCanvas.setAttribute("width",`${this.width}px`),this.svgCanvas.setAttribute("height",`${this.height}px`);const t=this.width/2,r=this.height/2;this.yLine.setAttribute("x1",`${t}px`),this.yLine.setAttribute("y1","0px"),this.yLine.setAttribute("x2",`${t}px`),this.yLine.setAttribute("y2",`${this.height}px`),this.xLine.setAttribute("x1",`${0}px`),this.xLine.setAttribute("y1",`${r}px`),this.xLine.setAttribute("x2",`${this.width}px`),this.xLine.setAttribute("y2",`${r}px`)}else console.error("element value is null")}createCanvas(t){if(this.width!==void 0&&this.height!==void 0){const r=document.createElementNS("http://www.w3.org/2000/svg","svg");r.style.position="relative",r.setAttribute("width",`${this.width}px`),r.setAttribute("height",`${this.height}px`);const n=this.width/2,o=this.height/2;this.yLine=r.appendChild(this.createLine(n.toString(),"0",n.toString(),this.height.toString(),this.color,"2px")),this.xLine=r.appendChild(this.createLine("0",o.toString(),this.width.toString(),o.toString(),this.color,"2px")),t==null||t.appendChild(r),this.svgCanvas=r}}createLine(t,r,n,o,u,c){const l=document.createElementNS("http://www.w3.org/2000/svg","line");return l.setAttribute("x1",t),l.setAttribute("y1",r),l.setAttribute("x2",n),l.setAttribute("y2",o),l.setAttribute("stroke-dasharray","5,5"),l.setAttribute("stroke",u),l.setAttribute("stroke-width",c),l}destroy(){this.xLine!==void 0&&(this.xLine.remove(),this.xLine=void 0),this.yLine!==void 0&&(this.yLine.remove(),this.yLine=void 0),this.svgCanvas!==void 0&&(this.svgCanvas.remove(),this.svgCanvas=void 0),this.map!==void 0&&(this.map.off("resize",this.mapResize),this.map=void 0)}}var cm={dragStart:!0},hb=(e,t,r)=>Math.min(Math.max(e,t),r),fm=e=>typeof e=="string",g9=([e,t],r,n)=>{const o=(u,c)=>c===0?0:Math.ceil(u/c)*c;return[o(r,e),o(n,t)]},pb=(e,t)=>e.some(r=>t.some(n=>r.contains(n)));function hm(e,t){if(e===void 0)return;if(Bg(e))return e.getBoundingClientRect();if(typeof e=="object"){const{top:n=0,left:o=0,right:u=0,bottom:c=0}=e;return{top:n,right:window.innerWidth-u,bottom:window.innerHeight-c,left:o}}if(e==="parent")return t.parentNode.getBoundingClientRect();const r=document.querySelector(e);if(r===null)throw new Error("The selector provided for bound doesn't exists in the document.");return r.getBoundingClientRect()}var i1=(e,t,r)=>e.style.setProperty(t,r),Bg=e=>e instanceof HTMLElement,y9=(e,t={})=>{let r,n,{bounds:o,axis:u="both",gpuAcceleration:c=!0,legacyTranslate:l=!0,transform:h,applyUserSelectHack:v=!0,disabled:w=!1,ignoreMultitouch:E=!1,recomputeBounds:T=cm,grid:I,position:F,cancel:U,handle:G,defaultClass:H="neodrag",defaultClassDragging:X="neodrag-dragging",defaultClassDragged:ee="neodrag-dragged",defaultPosition:K={x:0,y:0},onDragStart:se,onDrag:ce,onDragEnd:_e}=t,pe=!1,Ge=0,We=0,Ae=0,Ie=0,Fe=0,ot=0,{x:_t,y:ht}=F?{x:(F==null?void 0:F.x)??0,y:(F==null?void 0:F.y)??0}:K;At(_t,ht);let $e,ut,bt,Ze,He,xe="",Ne=!!F;T={...cm,...T};const Pe=document.body.style,ft=e.classList;function At(Mr=Ge,Kr=We){if(!h){if(l){let ct=`${+Mr}px, ${+Kr}px`;return i1(e,"transform",c?`translate3d(${ct}, 0)`:`translate(${ct})`)}return i1(e,"translate",`${+Mr}px ${+Kr}px ${c?"1px":""}`)}const St=h({offsetX:Mr,offsetY:Kr,rootNode:e});fm(St)&&i1(e,"transform",St)}const Pt=(Mr,Kr)=>{const St={offsetX:Ge,offsetY:We,rootNode:e,currentNode:He};e.dispatchEvent(new CustomEvent(Mr,{detail:St})),Kr==null||Kr(St)},Kt=addEventListener;Kt("pointerdown",br,!1),Kt("pointerup",Gt,!1),Kt("pointermove",Rr,!1),i1(e,"touch-action","none");const $t=()=>{let Mr=e.offsetWidth/ut.width;return isNaN(Mr)&&(Mr=1),Mr};function br(Mr){if(w||Mr.button===2||E&&!Mr.isPrimary)return;if(T.dragStart&&($e=hm(o,e)),fm(G)&&fm(U)&&G===U)throw new Error("`handle` selector can't be same as `cancel` selector");if(ft.add(H),bt=function(ln,Wt){if(!ln)return[Wt];if(Bg(ln))return[ln];if(Array.isArray(ln))return ln;const Ur=Wt.querySelectorAll(ln);if(Ur===null)throw new Error("Selector passed for `handle` option should be child of the element on which the action is applied");return Array.from(Ur.values())}(G,e),Ze=function(ln,Wt){if(!ln)return[];if(Bg(ln))return[ln];if(Array.isArray(ln))return ln;const Ur=Wt.querySelectorAll(ln);if(Ur===null)throw new Error("Selector passed for `cancel` option should be child of the element on which the action is applied");return Array.from(Ur.values())}(U,e),r=/(both|x)/.test(u),n=/(both|y)/.test(u),pb(Ze,bt))throw new Error("Element being dragged can't be a child of the element on which `cancel` is applied");const Kr=Mr.composedPath()[0];if(!bt.some(ln=>{var Wt;return ln.contains(Kr)||((Wt=ln.shadowRoot)==null?void 0:Wt.contains(Kr))})||pb(Ze,[Kr]))return;He=bt.length===1?e:bt.find(ln=>ln.contains(Kr)),pe=!0,ut=e.getBoundingClientRect(),v&&(xe=Pe.userSelect,Pe.userSelect="none"),Pt("neodrag:start",se);const{clientX:St,clientY:ct}=Mr,Or=$t();r&&(Ae=St-_t/Or),n&&(Ie=ct-ht/Or),$e&&(Fe=St-ut.left,ot=ct-ut.top)}function Gt(){pe&&(T.dragEnd&&($e=hm(o,e)),ft.remove(X),ft.add(ee),v&&(Pe.userSelect=xe),Pt("neodrag:end",_e),r&&(Ae=Ge),n&&(Ie=We),pe=!1)}function Rr(Mr){if(!pe)return;T.drag&&($e=hm(o,e)),ft.add(X),Mr.preventDefault(),ut=e.getBoundingClientRect();let Kr=Mr.clientX,St=Mr.clientY;const ct=$t();if($e){const Or={left:$e.left+Fe,top:$e.top+ot,right:$e.right+Fe-ut.width,bottom:$e.bottom+ot-ut.height};Kr=hb(Kr,Or.left,Or.right),St=hb(St,Or.top,Or.bottom)}if(Array.isArray(I)){let[Or,ln]=I;if(isNaN(+Or)||Or<0)throw new Error("1st argument of `grid` must be a valid positive number");if(isNaN(+ln)||ln<0)throw new Error("2nd argument of `grid` must be a valid positive number");let Wt=Kr-Ae,Ur=St-Ie;[Wt,Ur]=g9([Or/ct,ln/ct],Wt,Ur),Kr=Ae+Wt,St=Ie+Ur}r&&(Ge=Math.round((Kr-Ae)*ct)),n&&(We=Math.round((St-Ie)*ct)),_t=Ge,ht=We,Pt("neodrag",ce),At()}return{destroy:()=>{const Mr=removeEventListener;Mr("pointerdown",br,!1),Mr("pointerup",Gt,!1),Mr("pointermove",Rr,!1)},update:Mr=>{var St,ct;u=Mr.axis||"both",w=Mr.disabled??!1,E=Mr.ignoreMultitouch??!1,G=Mr.handle,o=Mr.bounds,T=Mr.recomputeBounds??cm,U=Mr.cancel,v=Mr.applyUserSelectHack??!0,I=Mr.grid,c=Mr.gpuAcceleration??!0,l=Mr.legacyTranslate??!0,h=Mr.transform;const Kr=ft.contains(ee);ft.remove(H,ee),H=Mr.defaultClass??"neodrag",X=Mr.defaultClassDragging??"neodrag-dragging",ee=Mr.defaultClassDragged??"neodrag-dragged",ft.add(H),Kr&&ft.add(ee),Ne&&(_t=Ge=((St=Mr.position)==null?void 0:St.x)??Ge,ht=We=((ct=Mr.position)==null?void 0:ct.y)??We,At())}}};function db(e,t,r){const n=e.slice();return n[30]=t[r],n}function mb(e,t,r){const n=e.slice();return n[30]=t[r],n}function gb(e,t,r){const n=e.slice();return n[30]=t[r],n}function yb(e,t,r){const n=e.slice();return n[30]=t[r],n}function vb(e){let t,r,n,o,u,c,l,h,v,w,E,T,I,F,U,G,H,X,ee,K,se,ce,_e,pe,Ge,We;o=new go({props:{icon:KA}}),l=new go({props:{icon:zy}});let Ae=e[4]&&_b(e);return F=new go({props:{icon:Ow,size:"sm"}}),ce=new go({props:{icon:a7,size:"sm"}}),{c(){t=yt("nav"),r=yt("div"),n=yt("span"),Ut(o.$$.fragment),u=ei(`
			Export tool
			
			`),c=yt("span"),Ut(l.$$.fragment),h=mr(),Ae&&Ae.c(),v=mr(),w=yt("div"),E=yt("div"),T=yt("button"),I=yt("span"),Ut(F.$$.fragment),U=mr(),G=yt("span"),H=ei("Export"),X=mr(),ee=yt("div"),K=yt("button"),se=yt("span"),Ut(ce.$$.fragment),this.h()},l(Ie){t=vt(Ie,"NAV",{class:!0});var Fe=Ct(t);r=vt(Fe,"DIV",{class:!0});var ot=Ct(r);n=vt(ot,"SPAN",{class:!0});var _t=Ct(n);Yt(o.$$.fragment,_t),_t.forEach(ge),u=ti(ot,`
			Export tool
			
			`),c=vt(ot,"SPAN",{class:!0});var ht=Ct(c);Yt(l.$$.fragment,ht),ht.forEach(ge),ot.forEach(ge),h=gr(Fe),Ae&&Ae.l(Fe),v=gr(Fe),w=vt(Fe,"DIV",{class:!0});var $e=Ct(w);E=vt($e,"DIV",{class:!0});var ut=Ct(E);T=vt(ut,"BUTTON",{class:!0});var bt=Ct(T);I=vt(bt,"SPAN",{class:!0});var Ze=Ct(I);Yt(F.$$.fragment,Ze),Ze.forEach(ge),U=gr(bt),G=vt(bt,"SPAN",{class:!0});var He=Ct(G);H=ti(He,"Export"),He.forEach(ge),bt.forEach(ge),ut.forEach(ge),X=gr($e),ee=vt($e,"DIV",{class:!0});var xe=Ct(ee);K=vt(xe,"BUTTON",{class:!0});var Ne=Ct(K);se=vt(Ne,"SPAN",{class:!0});var Pe=Ct(se);Yt(ce.$$.fragment,Pe),Pe.forEach(ge),Ne.forEach(ge),xe.forEach(ge),$e.forEach(ge),Fe.forEach(ge),this.h()},h(){ve(n,"class","icon drag-icon svelte-13nmsql"),ve(c,"class","icon close-icon svelte-13nmsql"),ve(r,"class","panel-heading heading-control svelte-13nmsql"),ve(I,"class","icon svelte-13nmsql"),ve(G,"class","svelte-13nmsql"),ve(T,"class","button is-fullwidth is-small is-success p-0 m-0 svelte-13nmsql"),ve(E,"class","column is-10 p-0 m-0 svelte-13nmsql"),ve(se,"class","icon svelte-13nmsql"),ve(K,"class","button is-fullwidth is-small is-light p-0 m-0 svelte-13nmsql"),ve(ee,"class","column is-2 p-0 m-0 svelte-13nmsql"),ve(w,"class","columns m-1 is-mobile svelte-13nmsql"),ve(t,"class","panel is-success export-container svelte-13nmsql")},m(Ie,Fe){Lt(Ie,t,Fe),lt(t,r),lt(r,n),qt(o,n,null),lt(r,u),lt(r,c),qt(l,c,null),lt(t,h),Ae&&Ae.m(t,null),lt(t,v),lt(t,w),lt(w,E),lt(E,T),lt(T,I),qt(F,I,null),lt(T,U),lt(T,G),lt(G,H),lt(w,X),lt(w,ee),lt(ee,K),lt(K,se),qt(ce,se,null),pe=!0,Ge||(We=[rn(c,"click",e[15]),rn(T,"click",e[8]),rn(K,"click",e[20]),sh(_e=y9.call(null,t,e[7]))],Ge=!0)},p(Ie,Fe){Ie[4]?Ae?(Ae.p(Ie,Fe),Fe[0]&16&&Xe(Ae,1)):(Ae=_b(Ie),Ae.c(),Xe(Ae,1),Ae.m(t,v)):Ae&&(ji(),it(Ae,1,1,()=>{Ae=null}),Ui()),_e&&g0(_e.update)&&Fe[0]&128&&_e.update.call(null,Ie[7])},i(Ie){pe||(Xe(o.$$.fragment,Ie),Xe(l.$$.fragment,Ie),Xe(Ae),Xe(F.$$.fragment,Ie),Xe(ce.$$.fragment,Ie),pe=!0)},o(Ie){it(o.$$.fragment,Ie),it(l.$$.fragment,Ie),it(Ae),it(F.$$.fragment,Ie),it(ce.$$.fragment,Ie),pe=!1},d(Ie){Ie&&ge(t),Vt(o),Vt(l),Ae&&Ae.d(),Vt(F),Vt(ce),Ge=!1,oa(We)}}}function _b(e){let t,r,n,o,u,c,l,h,v,w,E,T,I,F,U,G,H,X,ee,K,se,ce,_e,pe,Ge,We,Ae,Ie,Fe,ot,_t,ht,$e,ut,bt,Ze,He,xe,Ne,Pe,ft,At=Object.keys(Cf),Pt=[];for(let St=0;St<At.length;St+=1)Pt[St]=bb(yb(e,At,St));w=new go({props:{icon:c7}});let Kt=Object.keys(O0),$t=[];for(let St=0;St<Kt.length;St+=1)$t[St]=wb(gb(e,Kt,St));const br=St=>it($t[St],1,1,()=>{$t[St]=null});let Gt=Object.keys(p0),Rr=[];for(let St=0;St<Gt.length;St+=1)Rr[St]=xb(mb(e,Gt,St));Ae=new go({props:{icon:i7}});let Mr=Object.keys(ip),Kr=[];for(let St=0;St<Mr.length;St+=1)Kr[St]=kb(db(e,Mr,St));return xe=new go({props:{icon:o7}}),{c(){t=yt("div"),r=yt("label"),n=ei("Paper Size"),o=mr(),u=yt("div"),c=yt("div"),l=yt("select");for(let St=0;St<Pt.length;St+=1)Pt[St].c();h=mr(),v=yt("span"),Ut(w.$$.fragment),E=mr(),T=yt("div"),I=yt("label"),F=ei("Page Orientation"),U=mr(),G=yt("div");for(let St=0;St<$t.length;St+=1)$t[St].c();H=mr(),X=yt("div"),ee=yt("label"),K=ei("Format"),se=mr(),ce=yt("div"),_e=yt("div"),pe=yt("select");for(let St=0;St<Rr.length;St+=1)Rr[St].c();Ge=mr(),We=yt("span"),Ut(Ae.$$.fragment),Ie=mr(),Fe=yt("div"),ot=yt("label"),_t=ei("DPI"),ht=mr(),$e=yt("div"),ut=yt("div"),bt=yt("select");for(let St=0;St<Kr.length;St+=1)Kr[St].c();Ze=mr(),He=yt("span"),Ut(xe.$$.fragment),this.h()},l(St){t=vt(St,"DIV",{class:!0});var ct=Ct(t);r=vt(ct,"LABEL",{class:!0});var Or=Ct(r);n=ti(Or,"Paper Size"),Or.forEach(ge),o=gr(ct),u=vt(ct,"DIV",{class:!0});var ln=Ct(u);c=vt(ln,"DIV",{class:!0});var Wt=Ct(c);l=vt(Wt,"SELECT",{class:!0});var Ur=Ct(l);for(let Nr=0;Nr<Pt.length;Nr+=1)Pt[Nr].l(Ur);Ur.forEach(ge),Wt.forEach(ge),h=gr(ln),v=vt(ln,"SPAN",{class:!0});var mn=Ct(v);Yt(w.$$.fragment,mn),mn.forEach(ge),ln.forEach(ge),ct.forEach(ge),E=gr(St),T=vt(St,"DIV",{class:!0});var en=Ct(T);I=vt(en,"LABEL",{class:!0});var On=Ct(I);F=ti(On,"Page Orientation"),On.forEach(ge),U=gr(en),G=vt(en,"DIV",{class:!0});var Zn=Ct(G);for(let Nr=0;Nr<$t.length;Nr+=1)$t[Nr].l(Zn);Zn.forEach(ge),en.forEach(ge),H=gr(St),X=vt(St,"DIV",{class:!0});var ai=Ct(X);ee=vt(ai,"LABEL",{class:!0});var _i=Ct(ee);K=ti(_i,"Format"),_i.forEach(ge),se=gr(ai),ce=vt(ai,"DIV",{class:!0});var hi=Ct(ce);_e=vt(hi,"DIV",{class:!0});var yr=Ct(_e);pe=vt(yr,"SELECT",{class:!0});var Vr=Ct(pe);for(let Nr=0;Nr<Rr.length;Nr+=1)Rr[Nr].l(Vr);Vr.forEach(ge),yr.forEach(ge),Ge=gr(hi),We=vt(hi,"SPAN",{class:!0});var wi=Ct(We);Yt(Ae.$$.fragment,wi),wi.forEach(ge),hi.forEach(ge),ai.forEach(ge),Ie=gr(St),Fe=vt(St,"DIV",{class:!0});var xn=Ct(Fe);ot=vt(xn,"LABEL",{class:!0});var si=Ct(ot);_t=ti(si,"DPI"),si.forEach(ge),ht=gr(xn),$e=vt(xn,"DIV",{class:!0});var fr=Ct($e);ut=vt(fr,"DIV",{class:!0});var or=Ct(ut);bt=vt(or,"SELECT",{class:!0});var Yr=Ct(bt);for(let Nr=0;Nr<Kr.length;Nr+=1)Kr[Nr].l(Yr);Yr.forEach(ge),or.forEach(ge),Ze=gr(fr),He=vt(fr,"SPAN",{class:!0});var un=Ct(He);Yt(xe.$$.fragment,un),un.forEach(ge),fr.forEach(ge),xn.forEach(ge),this.h()},h(){ve(r,"class","label is-small svelte-13nmsql"),ve(l,"class","svelte-13nmsql"),e[0]===void 0&&Cc(()=>e[16].call(l)),ve(c,"class","select is-small is-fullwidth svelte-13nmsql"),ve(v,"class","icon is-small is-left svelte-13nmsql"),ve(u,"class","control has-icons-left svelte-13nmsql"),ve(t,"class","field svelte-13nmsql"),ve(I,"class","label is-small svelte-13nmsql"),ve(G,"class","control svelte-13nmsql"),ve(T,"class","field svelte-13nmsql"),ve(ee,"class","label is-small svelte-13nmsql"),ve(pe,"class","svelte-13nmsql"),e[3]===void 0&&Cc(()=>e[18].call(pe)),ve(_e,"class","select is-small is-fullwidth svelte-13nmsql"),ve(We,"class","icon is-small is-left svelte-13nmsql"),ve(ce,"class","control has-icons-left svelte-13nmsql"),ve(X,"class","field svelte-13nmsql"),ve(ot,"class","label is-small svelte-13nmsql"),ve(bt,"class","svelte-13nmsql"),e[2]===void 0&&Cc(()=>e[19].call(bt)),ve(ut,"class","select is-small is-fullwidth svelte-13nmsql"),ve(He,"class","icon is-small is-left svelte-13nmsql"),ve($e,"class","control has-icons-left svelte-13nmsql"),ve(Fe,"class","field svelte-13nmsql")},m(St,ct){Lt(St,t,ct),lt(t,r),lt(r,n),lt(t,o),lt(t,u),lt(u,c),lt(c,l);for(let Or=0;Or<Pt.length;Or+=1)Pt[Or].m(l,null);Vc(l,e[0]),lt(u,h),lt(u,v),qt(w,v,null),Lt(St,E,ct),Lt(St,T,ct),lt(T,I),lt(I,F),lt(T,U),lt(T,G);for(let Or=0;Or<$t.length;Or+=1)$t[Or].m(G,null);Lt(St,H,ct),Lt(St,X,ct),lt(X,ee),lt(ee,K),lt(X,se),lt(X,ce),lt(ce,_e),lt(_e,pe);for(let Or=0;Or<Rr.length;Or+=1)Rr[Or].m(pe,null);Vc(pe,e[3]),lt(ce,Ge),lt(ce,We),qt(Ae,We,null),Lt(St,Ie,ct),Lt(St,Fe,ct),lt(Fe,ot),lt(ot,_t),lt(Fe,ht),lt(Fe,$e),lt($e,ut),lt(ut,bt);for(let Or=0;Or<Kr.length;Or+=1)Kr[Or].m(bt,null);Vc(bt,e[2]),lt($e,Ze),lt($e,He),qt(xe,He,null),Ne=!0,Pe||(ft=[rn(l,"change",e[16]),rn(pe,"change",e[18]),rn(bt,"change",e[19])],Pe=!0)},p(St,ct){if(ct&0){At=Object.keys(Cf);let Or;for(Or=0;Or<At.length;Or+=1){const ln=yb(St,At,Or);Pt[Or]?Pt[Or].p(ln,ct):(Pt[Or]=bb(ln),Pt[Or].c(),Pt[Or].m(l,null))}for(;Or<Pt.length;Or+=1)Pt[Or].d(1);Pt.length=At.length}if(ct[0]&1&&Vc(l,St[0]),ct[0]&2){Kt=Object.keys(O0);let Or;for(Or=0;Or<Kt.length;Or+=1){const ln=gb(St,Kt,Or);$t[Or]?($t[Or].p(ln,ct),Xe($t[Or],1)):($t[Or]=wb(ln),$t[Or].c(),Xe($t[Or],1),$t[Or].m(G,null))}for(ji(),Or=Kt.length;Or<$t.length;Or+=1)br(Or);Ui()}if(ct&0){Gt=Object.keys(p0);let Or;for(Or=0;Or<Gt.length;Or+=1){const ln=mb(St,Gt,Or);Rr[Or]?Rr[Or].p(ln,ct):(Rr[Or]=xb(ln),Rr[Or].c(),Rr[Or].m(pe,null))}for(;Or<Rr.length;Or+=1)Rr[Or].d(1);Rr.length=Gt.length}if(ct[0]&8&&Vc(pe,St[3]),ct&0){Mr=Object.keys(ip);let Or;for(Or=0;Or<Mr.length;Or+=1){const ln=db(St,Mr,Or);Kr[Or]?Kr[Or].p(ln,ct):(Kr[Or]=kb(ln),Kr[Or].c(),Kr[Or].m(bt,null))}for(;Or<Kr.length;Or+=1)Kr[Or].d(1);Kr.length=Mr.length}ct[0]&4&&Vc(bt,St[2])},i(St){if(!Ne){Xe(w.$$.fragment,St);for(let ct=0;ct<Kt.length;ct+=1)Xe($t[ct]);Xe(Ae.$$.fragment,St),Xe(xe.$$.fragment,St),Ne=!0}},o(St){it(w.$$.fragment,St),$t=$t.filter(Boolean);for(let ct=0;ct<$t.length;ct+=1)it($t[ct]);it(Ae.$$.fragment,St),it(xe.$$.fragment,St),Ne=!1},d(St){St&&ge(t),Ol(Pt,St),Vt(w),St&&ge(E),St&&ge(T),Ol($t,St),St&&ge(H),St&&ge(X),Ol(Rr,St),Vt(Ae),St&&ge(Ie),St&&ge(Fe),Ol(Kr,St),Vt(xe),Pe=!1,oa(ft)}}}function bb(e){let t,r=e[30]+"",n;return{c(){t=yt("option"),n=ei(r),this.h()},l(o){t=vt(o,"OPTION",{class:!0});var u=Ct(t);n=ti(u,r),u.forEach(ge),this.h()},h(){t.__value=Cf[e[30]],t.value=t.__value,ve(t,"class","svelte-13nmsql")},m(o,u){Lt(o,t,u),lt(t,n)},p:Qn,d(o){o&&ge(t)}}}function wb(e){let t,r,n,o,u,c,l,h=e[30]+"",v,w,E,T,I;function F(){return e[17](e[30])}return c=new go({props:{icon:O0[e[30]]===O0.Landscape?YA:d7,size:"sm"}}),{c(){t=yt("label"),r=yt("input"),o=mr(),u=yt("span"),Ut(c.$$.fragment),l=mr(),v=ei(h),w=mr(),this.h()},l(U){t=vt(U,"LABEL",{class:!0,style:!0});var G=Ct(t);r=vt(G,"INPUT",{type:!0,name:!0,class:!0}),o=gr(G),u=vt(G,"SPAN",{class:!0});var H=Ct(u);Yt(c.$$.fragment,H),H.forEach(ge),l=gr(G),v=ti(G,h),w=gr(G),G.forEach(ge),this.h()},h(){ve(r,"type","radio"),ve(r,"name","orientation"),r.checked=n=e[1]===O0[e[30]],ve(r,"class","svelte-13nmsql"),ve(u,"class","icon svelte-13nmsql"),ve(t,"class","radio svelte-13nmsql"),zo(t,"color","black")},m(U,G){Lt(U,t,G),lt(t,r),lt(t,o),lt(t,u),qt(c,u,null),lt(t,l),lt(t,v),lt(t,w),E=!0,T||(I=rn(r,"click",F),T=!0)},p(U,G){e=U,(!E||G[0]&2&&n!==(n=e[1]===O0[e[30]]))&&(r.checked=n)},i(U){E||(Xe(c.$$.fragment,U),E=!0)},o(U){it(c.$$.fragment,U),E=!1},d(U){U&&ge(t),Vt(c),T=!1,I()}}}function xb(e){let t,r=e[30]+"",n;return{c(){t=yt("option"),n=ei(r),this.h()},l(o){t=vt(o,"OPTION",{class:!0});var u=Ct(t);n=ti(u,r),u.forEach(ge),this.h()},h(){t.__value=p0[e[30]],t.value=t.__value,ve(t,"class","svelte-13nmsql")},m(o,u){Lt(o,t,u),lt(t,n)},p:Qn,d(o){o&&ge(t)}}}function kb(e){let t,r=e[30]+"",n;return{c(){t=yt("option"),n=ei(r),this.h()},l(o){t=vt(o,"OPTION",{class:!0});var u=Ct(t);n=ti(u,r),u.forEach(ge),this.h()},h(){t.__value=ip[e[30]],t.value=t.__value,ve(t,"class","svelte-13nmsql")},m(o,u){Lt(o,t,u),lt(t,n)},p:Qn,d(o){o&&ge(t)}}}function v9(e){let t,r,n,o,u=e[5]&&vb(e);return{c(){t=yt("button"),r=mr(),u&&u.c(),n=ao(),this.h()},l(c){t=vt(c,"BUTTON",{class:!0}),Ct(t).forEach(ge),r=gr(c),u&&u.l(c),n=ao(),this.h()},h(){ve(t,"class","maplibre-ctrl-icon svelte-13nmsql")},m(c,l){Lt(c,t,l),e[14](t),Lt(c,r,l),u&&u.m(c,l),Lt(c,n,l),o=!0},p(c,l){c[5]?u?(u.p(c,l),l[0]&32&&Xe(u,1)):(u=vb(c),u.c(),Xe(u,1),u.m(n.parentNode,n)):u&&(ji(),it(u,1,1,()=>{u=null}),Ui())},i(c){o||(Xe(u),o=!0)},o(c){it(u),o=!1},d(c){c&&ge(t),e[14](null),c&&ge(r),u&&u.d(c),c&&ge(n)}}}function _9(e,t,r){let{map:n}=t,o,u,c,l,{showPrintableArea:h=!0}=t,{showCrosshair:v=!0}=t,{position:w="top-right"}=t,{paperSize:E=Cf.A4}=t,{dpi:T=ip[96]}=t,{format:I=p0.PNG}=t,{orientation:F=O0.Landscape}=t,{isShownSetting:U=!0}=t,G=!1,H={};function X(){}X.prototype.onAdd=function($e){return this.map=$e,this.controlContainer=document.createElement("div"),this.controlContainer.className="mapboxgl-ctrl mapboxgl-ctrl-group",l.addEventListener("click",()=>{r(5,G=!G)}),this.controlContainer.appendChild(l),this.controlContainer},X.prototype.onRemove=function(){!this.controlContainer||!this.controlContainer.parentNode||!this.map||!this.button||(this.controlContainer.parentNode.removeChild(this.controlContainer),this.map.off("click",this.onClick.bind(this)),this.map=void 0)};let ee=null;Ff(async()=>{const{default:$e}=await td(()=>Promise.resolve().then(()=>p9),void 0,import.meta.url);c=new $e,r(13,ee=new X)});const K=()=>{const $e=se();c.generate(n,$e,T,I,ih.mm)},se=()=>{let $e=[E[0],E[1]];return F!==O0.Landscape&&($e=$e.reverse()),$e},ce=()=>{l&&(G?l.classList.add("maplibre-ctrl-icon-active"):l.classList.remove("maplibre-ctrl-icon-active"),_e(h?G:!1),Ge(v?G:!1))},_e=$e=>{$e===!1?o!==void 0&&(o.destroy(),o=void 0):(o=new d9(n),pe())},pe=()=>{if(o===void 0)return;const $e=se();o.updateArea($e[0],$e[1])},Ge=$e=>{n&&($e===!1?u!==void 0&&(u.destroy(),u=void 0):(u=new m9(n),u.create()))};function We($e){Ft[$e?"unshift":"push"](()=>{l=$e,r(6,l)})}const Ae=()=>{r(5,G=!G)};function Ie(){E=qh(this),r(0,E)}const Fe=$e=>{r(1,F=O0[$e])};function ot(){I=qh(this),r(3,I)}function _t(){T=qh(this),r(2,T)}const ht=()=>r(4,U=!U);return e.$$set=$e=>{"map"in $e&&r(9,n=$e.map),"showPrintableArea"in $e&&r(10,h=$e.showPrintableArea),"showCrosshair"in $e&&r(11,v=$e.showCrosshair),"position"in $e&&r(12,w=$e.position),"paperSize"in $e&&r(0,E=$e.paperSize),"dpi"in $e&&r(2,T=$e.dpi),"format"in $e&&r(3,I=$e.format),"orientation"in $e&&r(1,F=$e.orientation),"isShownSetting"in $e&&r(4,U=$e.isShownSetting)},e.$$.update=()=>{e.$$.dirty[0]&1&&pe(),e.$$.dirty[0]&2&&pe(),e.$$.dirty[0]&12800&&n&&(ee!==null&&n.hasControl(ee)===!1&&n.addControl(ee,w),r(7,H.bounds=n.getContainer(),H)),e.$$.dirty[0]&32&&ce()},[E,F,T,I,U,G,l,H,K,n,h,v,w,ee,We,Ae,Ie,Fe,ot,_t,ht]}class b9 extends Dn{constructor(t){super(),zn(this,t,_9,v9,Ln,{map:9,showPrintableArea:10,showCrosshair:11,position:12,paperSize:0,dpi:2,format:3,orientation:1,isShownSetting:4},null,[-1,-1])}}const w9=async e=>{if("clipboard"in navigator)await navigator.clipboard.writeText(e);else{const t=document.createElement("input");t.type="text",t.disabled=!0,t.style.setProperty("position","fixed"),t.style.setProperty("z-index","-100"),t.style.setProperty("pointer-events","none"),t.style.setProperty("opacity","0"),t.value=e,document.body.appendChild(t),t.click(),t.select(),document.execCommand("copy"),document.body.removeChild(t)}},Ab=(e,t)=>{async function r(){if(o)try{await w9(o),e.dispatchEvent(new CustomEvent("svelte-copy",{detail:o}))}catch(u){e.dispatchEvent(new CustomEvent("svelte-copy:error",{detail:u}))}}let n=typeof t=="string"?["click"]:[t.events].flat(1),o=typeof t=="string"?t:t.text;return n.forEach(u=>{e.addEventListener(u,r,!0)}),{update:u=>{const c=typeof u=="string"?["click"]:[u.events].flat(1),l=typeof u=="string"?u:u.text,h=c.filter(w=>!n.includes(w)),v=n.filter(w=>!c.includes(w));h.forEach(w=>{e.addEventListener(w,r,!0)}),v.forEach(w=>{e.removeEventListener(w,r,!0)}),n=c,o=l},destroy:()=>{n.forEach(u=>{e.removeEventListener(u,r,!0)})}}};function x9(e){let t,r,n,o,u,c,l,h,v,w,E,T,I,F,U,G,H,X,ee,K,se,ce,_e,pe,Ge,We,Ae,Ie,Fe,ot,_t,ht,$e,ut;return X=new go({props:{icon:f7}}),Ae=new go({props:{icon:zy}}),{c(){t=yt("div"),r=yt("div"),n=mr(),o=yt("div"),u=yt("header"),c=yt("p"),l=ei("URL to share"),h=mr(),v=yt("button"),w=mr(),E=yt("section"),T=yt("div"),I=yt("input"),U=mr(),G=yt("button"),H=yt("span"),Ut(X.$$.fragment),ee=mr(),K=yt("span"),se=ei(e[2]),_e=mr(),pe=yt("footer"),Ge=yt("button"),We=yt("span"),Ut(Ae.$$.fragment),Ie=mr(),Fe=yt("span"),ot=ei("Cancel"),this.h()},l(bt){t=vt(bt,"DIV",{class:!0});var Ze=Ct(t);r=vt(Ze,"DIV",{class:!0}),Ct(r).forEach(ge),n=gr(Ze),o=vt(Ze,"DIV",{class:!0});var He=Ct(o);u=vt(He,"HEADER",{class:!0});var xe=Ct(u);c=vt(xe,"P",{class:!0});var Ne=Ct(c);l=ti(Ne,"URL to share"),Ne.forEach(ge),h=gr(xe),v=vt(xe,"BUTTON",{class:!0,"aria-label":!0}),Ct(v).forEach(ge),xe.forEach(ge),w=gr(He),E=vt(He,"SECTION",{class:!0});var Pe=Ct(E);T=vt(Pe,"DIV",{class:!0});var ft=Ct(T);I=vt(ft,"INPUT",{class:!0,type:!0,placeholder:!0,style:!0}),U=gr(ft),G=vt(ft,"BUTTON",{class:!0});var At=Ct(G);H=vt(At,"SPAN",{class:!0});var Pt=Ct(H);Yt(X.$$.fragment,Pt),Pt.forEach(ge),ee=gr(At),K=vt(At,"SPAN",{class:!0});var Kt=Ct(K);se=ti(Kt,e[2]),Kt.forEach(ge),At.forEach(ge),ft.forEach(ge),Pe.forEach(ge),_e=gr(He),pe=vt(He,"FOOTER",{class:!0});var $t=Ct(pe);Ge=vt($t,"BUTTON",{class:!0});var br=Ct(Ge);We=vt(br,"SPAN",{class:!0});var Gt=Ct(We);Yt(Ae.$$.fragment,Gt),Gt.forEach(ge),Ie=gr(br),Fe=vt(br,"SPAN",{class:!0});var Rr=Ct(Fe);ot=ti(Rr,"Cancel"),Rr.forEach(ge),br.forEach(ge),$t.forEach(ge),He.forEach(ge),Ze.forEach(ge),this.h()},h(){ve(r,"class","modal-background svelte-xtmu3o"),ve(c,"class","modal-card-title svelte-xtmu3o"),ve(v,"class","delete svelte-xtmu3o"),ve(v,"aria-label","close"),ve(u,"class","modal-card-head svelte-xtmu3o"),ve(I,"class","input is-success is-small pm-0 svelte-xtmu3o"),ve(I,"type","text"),ve(I,"placeholder","URL to share"),zo(I,"cursor","pointer"),I.readOnly=!0,ve(H,"class","icon svelte-xtmu3o"),ve(K,"class","svelte-xtmu3o"),ve(G,"class","button is-success is-small pm-0 ml-1 svelte-xtmu3o"),ve(T,"class","copy-control svelte-xtmu3o"),ve(E,"class","modal-card-body svelte-xtmu3o"),ve(We,"class","icon svelte-xtmu3o"),ve(Fe,"class","svelte-xtmu3o"),ve(Ge,"class","button is-small pm-0 svelte-xtmu3o"),ve(pe,"class","modal-card-foot svelte-xtmu3o"),ve(o,"class","modal-card svelte-xtmu3o"),ve(t,"class",_t=`modal ${e[0]?"is-active":""} svelte-xtmu3o`)},m(bt,Ze){Lt(bt,t,Ze),lt(t,r),lt(t,n),lt(t,o),lt(o,u),lt(u,c),lt(c,l),lt(u,h),lt(u,v),lt(o,w),lt(o,E),lt(E,T),lt(T,I),N0(I,e[1]),lt(T,U),lt(T,G),lt(G,H),qt(X,H,null),lt(G,ee),lt(G,K),lt(K,se),lt(o,_e),lt(o,pe),lt(pe,Ge),lt(Ge,We),qt(Ae,We,null),lt(Ge,Ie),lt(Ge,Fe),lt(Fe,ot),ht=!0,$e||(ut=[rn(r,"click",e[4]),rn(v,"click",e[4]),rn(I,"input",e[7]),sh(F=Ab.call(null,I,e[1])),rn(I,"click",e[3]),sh(ce=Ab.call(null,G,e[1])),rn(G,"click",e[3]),rn(Ge,"click",e[4])],$e=!0)},p(bt,[Ze]){Ze&2&&I.value!==bt[1]&&N0(I,bt[1]),F&&g0(F.update)&&Ze&2&&F.update.call(null,bt[1]),(!ht||Ze&4)&&ta(se,bt[2]),ce&&g0(ce.update)&&Ze&2&&ce.update.call(null,bt[1]),(!ht||Ze&1&&_t!==(_t=`modal ${bt[0]?"is-active":""} svelte-xtmu3o`))&&ve(t,"class",_t)},i(bt){ht||(Xe(X.$$.fragment,bt),Xe(Ae.$$.fragment,bt),ht=!0)},o(bt){it(X.$$.fragment,bt),it(Ae.$$.fragment,bt),ht=!1},d(bt){bt&&ge(t),Vt(X),Vt(Ae),$e=!1,oa(ut)}}}function k9(e,t,r){let{map:n}=t,{isShareModalShown:o}=t,u,c="",l="Copy";Ff(()=>{u=new URL(window.location.href)});const h=()=>{r(2,l="copied"),setTimeout(()=>{r(2,l="Copy")},2e3)};let{customiseUrl:v=I=>I}=t;const w=()=>{if(!n||!u)return"";const I=`${u.protocol}//${u.host}`,F=`#${n.getZoom().toFixed(2)}`,U=`/${n.getCenter().lat.toFixed(6)}`,G=`/${n.getCenter().lng.toFixed(6)}`,H=n.getBearing()!==0?`/${n.getBearing().toFixed(1)}`:"",X=n.getPitch()!==0?`/${n.getPitch().toFixed()}`:"";r(1,c=v(`${I}${F}${U}${G}${H}${X}`))},E=()=>{r(0,o=!1)};function T(){c=this.value,r(1,c)}return e.$$set=I=>{"map"in I&&r(5,n=I.map),"isShareModalShown"in I&&r(0,o=I.isShareModalShown),"customiseUrl"in I&&r(6,v=I.customiseUrl)},e.$$.update=()=>{e.$$.dirty&1&&o===!0&&w()},[o,c,l,h,E,n,v,T]}class A9 extends Dn{constructor(t){super(),zn(this,t,k9,x9,Ln,{map:5,isShareModalShown:0,customiseUrl:6})}}function E9(e){let t,r,n,o,u,c,l,h;r=new go({props:{icon:$A}});function v(I){e[7](I)}function w(I){e[8](I)}function E(I){e[9](I)}let T={};return e[0]!==void 0&&(T.map=e[0]),e[3]!==void 0&&(T.isShareModalShown=e[3]),e[1]!==void 0&&(T.customiseUrl=e[1]),o=new A9({props:T}),Ft.push(()=>Jt(o,"map",v)),Ft.push(()=>Jt(o,"isShareModalShown",w)),Ft.push(()=>Jt(o,"customiseUrl",E)),{c(){t=yt("button"),Ut(r.$$.fragment),n=mr(),Ut(o.$$.fragment)},l(I){t=vt(I,"BUTTON",{});var F=Ct(t);Yt(r.$$.fragment,F),F.forEach(ge),n=gr(I),Yt(o.$$.fragment,I)},m(I,F){Lt(I,t,F),qt(r,t,null),e[6](t),Lt(I,n,F),qt(o,I,F),h=!0},p(I,[F]){const U={};!u&&F&1&&(u=!0,U.map=I[0],er(()=>u=!1)),!c&&F&8&&(c=!0,U.isShareModalShown=I[3],er(()=>c=!1)),!l&&F&2&&(l=!0,U.customiseUrl=I[1],er(()=>l=!1)),o.$set(U)},i(I){h||(Xe(r.$$.fragment,I),Xe(o.$$.fragment,I),h=!0)},o(I){it(r.$$.fragment,I),it(o.$$.fragment,I),h=!1},d(I){I&&ge(t),Vt(r),e[6](null),I&&ge(n),Vt(o,I)}}}function S9(e,t,r){let{map:n}=t,o,u=!1,{position:c="top-right"}=t,{customiseUrl:l=F=>F}=t;function h(){}h.prototype.onAdd=function(F){return this.map=F,this.controlContainer=document.createElement("div"),this.controlContainer.className="mapboxgl-ctrl mapboxgl-ctrl-group",o.addEventListener("click",()=>{r(3,u=!u)}),this.controlContainer.appendChild(o),this.controlContainer},h.prototype.onRemove=function(){!this.controlContainer||!this.controlContainer.parentNode||!this.map||!this.button||(this.controlContainer.parentNode.removeChild(this.controlContainer),this.map.off("click",this.onClick.bind(this)),this.map=void 0)};let v=null;Ff(async()=>{r(5,v=new h)});function w(F){Ft[F?"unshift":"push"](()=>{o=F,r(2,o)})}function E(F){n=F,r(0,n)}function T(F){u=F,r(3,u)}function I(F){l=F,r(1,l)}return e.$$set=F=>{"map"in F&&r(0,n=F.map),"position"in F&&r(4,c=F.position),"customiseUrl"in F&&r(1,l=F.customiseUrl)},e.$$.update=()=>{e.$$.dirty&49&&n&&v!==null&&n.hasControl(v)===!1&&n.addControl(v,c)},[n,l,o,u,c,v,w,E,T,I]}class C9 extends Dn{constructor(t){super(),zn(this,t,S9,E9,Ln,{map:0,position:4,customiseUrl:1})}}const r6={name:"SplitterContext"};function I9(e){let t,r,n,o;return{c(){t=yt("div"),r=yt("div"),this.h()},l(u){t=vt(u,"DIV",{class:!0,tabindex:!0});var c=Ct(t);r=vt(c,"DIV",{class:!0,style:!0}),Ct(r).forEach(ge),c.forEach(ge),this.h()},h(){ve(r,"class","line svelte-16wga0t"),ve(r,"style",e[3]),ve(t,"class",n=rp(e[2])+" svelte-16wga0t"),ve(t,"tabindex","0"),Cc(()=>e[13].call(t))},m(u,c){Lt(u,t,c),lt(t,r),o=Rh(t,e[13].bind(t))},p(u,[c]){c&8&&ve(r,"style",u[3]),c&4&&n!==(n=rp(u[2])+" svelte-16wga0t")&&ve(t,"class",n)},i:Qn,o:Qn,d(u){u&&ge(t),o()}}}function T9(e,t,r){let n,o,u,c,l,h,v,{color:w="silver"}=t,{hoverColor:E="gray"}=t,{dragColor:T="black"}=t,I=yA(r6);ql(e,I,H=>r(12,v=H));let F,U;function G(){F=this.clientWidth,U=this.clientHeight,r(0,F),r(1,U)}return e.$$set=H=>{"color"in H&&r(5,w=H.color),"hoverColor"in H&&r(6,E=H.hoverColor),"dragColor"in H&&r(7,T=H.dragColor)},e.$$.update=()=>{e.$$.dirty&4096&&r(10,n=v.dragging),e.$$.dirty&4096&&r(8,o=v.horizontal),e.$$.dirty&259&&r(11,u=o?U:F),e.$$.dirty&3296&&r(9,c={"--splitter-line-margin":`${Math.max(0,Math.floor(u/2)-1)}px`,"--splitter-line-size":`${u%2===0?2:3}px`,"--splitter-line-color":n?T:w,"--splitter-line-hover-color":n?T:E}),e.$$.dirty&512&&r(3,l=Object.entries(c).map(([H,X])=>`${H}:${X}`).join(";")),e.$$.dirty&256&&r(2,h=o?"splitter horizontal":"splitter vertical")},[F,U,h,l,I,w,E,T,o,c,n,u,v,G]}class L9 extends Dn{constructor(t){super(),zn(this,t,T9,I9,Ln,{color:5,hoverColor:6,dragColor:7})}}const P9=e=>({}),Eb=e=>({}),M9=e=>({}),Sb=e=>({}),D9=e=>({}),Cb=e=>({});function z9(e){let t,r;return t=new L9({}),{c(){Ut(t.$$.fragment)},l(n){Yt(t.$$.fragment,n)},m(n,o){qt(t,n,o),r=!0},i(n){r||(Xe(t.$$.fragment,n),r=!0)},o(n){it(t.$$.fragment,n),r=!1},d(n){Vt(t,n)}}}function N9(e){let t,r,n,o,u,c,l,h,v,w,E,T,I,F;const U=e[33].primary,G=Ou(U,e,e[32],Cb),H=e[33].splitter,X=Ou(H,e,e[32],Sb),ee=X||z9(),K=e[33].secondary,se=Ou(K,e,e[32],Eb);return{c(){t=yt("div"),r=yt("div"),G&&G.c(),o=mr(),u=yt("div"),ee&&ee.c(),l=mr(),h=yt("div"),se&&se.c(),this.h()},l(ce){t=vt(ce,"DIV",{class:!0,style:!0});var _e=Ct(t);r=vt(_e,"DIV",{class:!0});var pe=Ct(r);G&&G.l(pe),pe.forEach(ge),o=gr(_e),u=vt(_e,"DIV",{class:!0});var Ge=Ct(u);ee&&ee.l(Ge),Ge.forEach(ge),l=gr(_e),h=vt(_e,"DIV",{class:!0});var We=Ct(h);se&&se.l(We),We.forEach(ge),_e.forEach(ge),this.h()},h(){ve(r,"class","primary svelte-603y9m"),Cc(()=>e[34].call(r)),ve(u,"class","splitter svelte-603y9m"),Cc(()=>e[35].call(u)),ve(h,"class","secondary svelte-603y9m"),Cc(()=>e[36].call(h)),ve(t,"class",w=rp(e[8])+" svelte-603y9m"),ve(t,"style",e[9]),Cc(()=>e[37].call(t))},m(ce,_e){Lt(ce,t,_e),lt(t,r),G&&G.m(r,null),n=Rh(r,e[34].bind(r)),lt(t,o),lt(t,u),ee&&ee.m(u,null),c=Rh(u,e[35].bind(u)),lt(t,l),lt(t,h),se&&se.m(h,null),v=Rh(h,e[36].bind(h)),E=Rh(t,e[37].bind(t)),T=!0,I||(F=[rn(u,"pointerdown",e[10]),rn(u,"pointermove",e[11]),rn(u,"pointerup",e[12]),rn(u,"dblclick",e[13]),rn(u,"keydown",e[14])],I=!0)},p(ce,_e){G&&G.p&&(!T||_e[1]&2)&&Fu(G,U,ce,ce[32],T?ju(U,ce[32],_e,D9):Bu(ce[32]),Cb),X&&X.p&&(!T||_e[1]&2)&&Fu(X,H,ce,ce[32],T?ju(H,ce[32],_e,M9):Bu(ce[32]),Sb),se&&se.p&&(!T||_e[1]&2)&&Fu(se,K,ce,ce[32],T?ju(K,ce[32],_e,P9):Bu(ce[32]),Eb),(!T||_e[0]&256&&w!==(w=rp(ce[8])+" svelte-603y9m"))&&ve(t,"class",w),(!T||_e[0]&512)&&ve(t,"style",ce[9])},i(ce){T||(Xe(G,ce),Xe(ee,ce),Xe(se,ce),T=!0)},o(ce){it(G,ce),it(ee,ce),it(se,ce),T=!1},d(ce){ce&&ge(t),G&&G.d(ce),n(),ee&&ee.d(ce),c(),se&&se.d(ce),v(),E(),I=!1,oa(F)}}}function R9(e,t,r){let n,o,u,c,l,h,v,w,E,{$$slots:T={},$$scope:I}=t,{horizontal:F=!1}=t,{initialPrimarySize:U="50%"}=t,{minPrimarySize:G="0"}=t,{minSecondarySize:H="0"}=t,{splitterSize:X="7px"}=t,{resetOnDoubleClick:ee=!0}=t,K,se,ce,_e,pe,Ge,We,Ae;const Ie=br=>Math.max(0,Math.min(br,100));let Fe,ot,_t,ht=!1;const $e=()=>l,ut=br=>{r(23,Fe=Ie(br))},bt=hf({horizontal:F,dragging:ht});vA(r6,bt);const Ze=mp(),He=br=>{br.currentTarget.setPointerCapture(br.pointerId),ot=F?br.clientY:br.clientX,_t=o,r(24,ht=!0)},xe=br=>{if(br.currentTarget.hasPointerCapture(br.pointerId)){const Gt=F?br.clientY:br.clientX;let Rr=_t+(Gt-ot);Rr=Math.max(0,Math.min(Rr,n));const Mr=Rr/n*100;r(23,Fe=Mr)}},Ne=br=>{br.currentTarget.releasePointerCapture(br.pointerId),r(24,ht=!1)},Pe=()=>{ee&&r(23,Fe=void 0)},ft=br=>{const Gt=Fe||l;if(!br.ctrlKey&&!br.shiftKey&&!br.altKey){switch(br.code){case"Space":r(23,Fe=void 0);return}if(F)switch(br.code){case"ArrowUp":r(23,Fe=Ie(Gt-1));return;case"ArrowDown":r(23,Fe=Ie(Gt+1));return}else switch(br.code){case"ArrowLeft":r(23,Fe=Ie(Gt-1));return;case"ArrowRight":r(23,Fe=Ie(Gt+1));return}}};function At(){ce=this.clientWidth,_e=this.clientHeight,r(2,ce),r(3,_e)}function Pt(){pe=this.clientWidth,Ge=this.clientHeight,r(4,pe),r(5,Ge)}function Kt(){We=this.clientWidth,Ae=this.clientHeight,r(6,We),r(7,Ae)}function $t(){K=this.clientWidth,se=this.clientHeight,r(0,K),r(1,se)}return e.$$set=br=>{"horizontal"in br&&r(15,F=br.horizontal),"initialPrimarySize"in br&&r(16,U=br.initialPrimarySize),"minPrimarySize"in br&&r(17,G=br.minPrimarySize),"minSecondarySize"in br&&r(18,H=br.minSecondarySize),"splitterSize"in br&&r(19,X=br.splitterSize),"resetOnDoubleClick"in br&&r(20,ee=br.resetOnDoubleClick),"$$scope"in br&&r(32,I=br.$$scope)},e.$$.update=()=>{e.$$.dirty[0]&32771&&r(26,n=F?se:K),e.$$.dirty[0]&32780&&r(27,o=F?_e:ce),e.$$.dirty[0]&32816&&r(31,u=F?Ge:pe),e.$$.dirty[0]&32960&&r(30,c=F?Ae:We),e.$$.dirty[0]&201326592|e.$$.dirty[1]&1&&r(25,l=Ie(Math.ceil((o-u)/(n-u)*100))),e.$$.dirty[0]&16809984&&bt.set({horizontal:F,dragging:ht}),e.$$.dirty[0]&1258291200|e.$$.dirty[1]&1&&Ze("changed",{percent:l,primarySize:o,splitterSize:u,secondarySize:c,dragging:ht}),e.$$.dirty[0]&8454144&&r(29,h=Fe!==void 0?`${Fe}%`:U),e.$$.dirty[0]&537788416&&r(28,v={"--primary-size":`${h}`,"--min-primary-size":`${G}`,"--min-secondary-size":`${H}`,"--splitter-size":`${X}`}),e.$$.dirty[0]&268435456&&r(9,w=Object.entries(v).map(([br,Gt])=>`${br}:${Gt}`).join(";")),e.$$.dirty[0]&32768&&r(8,E=F?"split horizontal":"split vertical")},[K,se,ce,_e,pe,Ge,We,Ae,E,w,He,xe,Ne,Pe,ft,F,U,G,H,X,ee,$e,ut,Fe,ht,l,n,o,v,h,c,u,I,T,At,Pt,Kt,$t]}class O9 extends Dn{constructor(t){super(),zn(this,t,R9,N9,Ln,{horizontal:15,initialPrimarySize:16,minPrimarySize:17,minSecondarySize:18,splitterSize:19,resetOnDoubleClick:20,getPercent:21,setPercent:22},null,[-1,-1])}get getPercent(){return this.$$.ctx[21]}get setPercent(){return this.$$.ctx[22]}}const F9=e=>({}),Ib=e=>({}),B9=e=>({}),Tb=e=>({}),j9=e=>({}),Lb=e=>({}),U9=e=>({}),Pb=e=>({});function q9(e){let t,r;return t=new go({props:{icon:qA}}),{c(){Ut(t.$$.fragment)},l(n){Yt(t.$$.fragment,n)},m(n,o){qt(t,n,o),r=!0},p:Qn,i(n){r||(Xe(t.$$.fragment,n),r=!0)},o(n){it(t.$$.fragment,n),r=!1},d(n){Vt(t,n)}}}function V9(e){let t,r;return t=new go({props:{icon:zy}}),{c(){Ut(t.$$.fragment)},l(n){Yt(t.$$.fragment,n)},m(n,o){qt(t,n,o),r=!0},p:Qn,i(n){r||(Xe(t.$$.fragment,n),r=!0)},o(n){it(t.$$.fragment,n),r=!1},d(n){Vt(t,n)}}}function $9(e){let t;const r=e[22].map,n=Ou(r,e,e[29],Ib);return{c(){n&&n.c()},l(o){n&&n.l(o)},m(o,u){n&&n.m(o,u),t=!0},p(o,u){n&&n.p&&(!t||u[0]&536870912)&&Fu(n,r,o,o[29],t?ju(r,o[29],u,F9):Bu(o[29]),Ib)},i(o){t||(Xe(n,o),t=!0)},o(o){it(n,o),t=!1},d(o){n&&n.d(o)}}}function G9(e){let t,r,n=e[4]&&Mb(e);const o=e[22].sidebar,u=Ou(o,e,e[29],Tb);return{c(){n&&n.c(),t=mr(),u&&u.c()},l(c){n&&n.l(c),t=gr(c),u&&u.l(c)},m(c,l){n&&n.m(c,l),Lt(c,t,l),u&&u.m(c,l),r=!0},p(c,l){c[4]?n?(n.p(c,l),l[0]&16&&Xe(n,1)):(n=Mb(c),n.c(),Xe(n,1),n.m(t.parentNode,t)):n&&(ji(),it(n,1,1,()=>{n=null}),Ui()),u&&u.p&&(!r||l[0]&536870912)&&Fu(u,o,c,c[29],r?ju(o,c[29],l,B9):Bu(c[29]),Tb)},i(c){r||(Xe(n),Xe(u,c),r=!0)},o(c){it(n),it(u,c),r=!1},d(c){n&&n.d(c),c&&ge(t),u&&u.d(c)}}}function Mb(e){let t,r,n,o,u;return r=new go({props:{icon:Ny,size:"2x",color:"#1c1c1c"}}),{c(){t=yt("span"),Ut(r.$$.fragment),this.h()},l(c){t=vt(c,"SPAN",{class:!0});var l=Ct(t);Yt(r.$$.fragment,l),l.forEach(ge),this.h()},h(){ve(t,"class","span close-icon svelte-1isg9kr")},m(c,l){Lt(c,t,l),qt(r,t,null),n=!0,o||(u=rn(t,"click",e[13]),o=!0)},p:Qn,i(c){n||(Xe(r.$$.fragment,c),n=!0)},o(c){it(r.$$.fragment,c),n=!1},d(c){c&&ge(t),Vt(r),o=!1,u()}}}function H9(e){let t,r,n,o;const u=[G9,$9],c=[];function l(h,v){return h[1]?0:1}return r=l(e),n=c[r]=u[r](e),{c(){t=yt("div"),n.c(),this.h()},l(h){t=vt(h,"DIV",{slot:!0,class:!0});var v=Ct(t);n.l(v),v.forEach(ge),this.h()},h(){ve(t,"slot","primary"),ve(t,"class","primary-content svelte-1isg9kr")},m(h,v){Lt(h,t,v),c[r].m(t,null),o=!0},p(h,v){let w=r;r=l(h),r===w?c[r].p(h,v):(ji(),it(c[w],1,1,()=>{c[w]=null}),Ui(),n=c[r],n?n.p(h,v):(n=c[r]=u[r](h),n.c()),Xe(n,1),n.m(t,null))},i(h){o||(Xe(n),o=!0)},o(h){it(n),o=!1},d(h){h&&ge(t),c[r].d()}}}function W9(e){let t,r,n=e[4]&&Db(e);const o=e[22].sidebar,u=Ou(o,e,e[29],Lb);return{c(){n&&n.c(),t=mr(),u&&u.c()},l(c){n&&n.l(c),t=gr(c),u&&u.l(c)},m(c,l){n&&n.m(c,l),Lt(c,t,l),u&&u.m(c,l),r=!0},p(c,l){c[4]?n?(n.p(c,l),l[0]&16&&Xe(n,1)):(n=Db(c),n.c(),Xe(n,1),n.m(t.parentNode,t)):n&&(ji(),it(n,1,1,()=>{n=null}),Ui()),u&&u.p&&(!r||l[0]&536870912)&&Fu(u,o,c,c[29],r?ju(o,c[29],l,j9):Bu(c[29]),Lb)},i(c){r||(Xe(n),Xe(u,c),r=!0)},o(c){it(n),it(u,c),r=!1},d(c){n&&n.d(c),c&&ge(t),u&&u.d(c)}}}function Z9(e){let t;const r=e[22].map,n=Ou(r,e,e[29],Pb);return{c(){n&&n.c()},l(o){n&&n.l(o)},m(o,u){n&&n.m(o,u),t=!0},p(o,u){n&&n.p&&(!t||u[0]&536870912)&&Fu(n,r,o,o[29],t?ju(r,o[29],u,U9):Bu(o[29]),Pb)},i(o){t||(Xe(n,o),t=!0)},o(o){it(n,o),t=!1},d(o){n&&n.d(o)}}}function Db(e){let t,r,n,o,u;return r=new go({props:{icon:Ny,size:"2x",color:"#1c1c1c"}}),{c(){t=yt("span"),Ut(r.$$.fragment),this.h()},l(c){t=vt(c,"SPAN",{class:!0});var l=Ct(t);Yt(r.$$.fragment,l),l.forEach(ge),this.h()},h(){ve(t,"class","span close-icon svelte-1isg9kr")},m(c,l){Lt(c,t,l),qt(r,t,null),n=!0,o||(u=rn(t,"click",e[13]),o=!0)},p:Qn,i(c){n||(Xe(r.$$.fragment,c),n=!0)},o(c){it(r.$$.fragment,c),n=!1},d(c){c&&ge(t),Vt(r),o=!1,u()}}}function X9(e){let t,r,n,o;const u=[Z9,W9],c=[];function l(h,v){return h[1]?0:1}return r=l(e),n=c[r]=u[r](e),{c(){t=yt("div"),n.c(),this.h()},l(h){t=vt(h,"DIV",{slot:!0,class:!0});var v=Ct(t);n.l(v),v.forEach(ge),this.h()},h(){ve(t,"slot","secondary"),ve(t,"class","secondary-content svelte-1isg9kr")},m(h,v){Lt(h,t,v),c[r].m(t,null),o=!0},p(h,v){let w=r;r=l(h),r===w?c[r].p(h,v):(ji(),it(c[w],1,1,()=>{c[w]=null}),Ui(),n=c[r],n?n.p(h,v):(n=c[r]=u[r](h),n.c()),Xe(n,1),n.m(t,null))},i(h){o||(Xe(n),o=!0)},o(h){it(n),o=!1},d(h){h&&ge(t),c[r].d()}}}function Y9(e){let t,r,n,o,u,c,l,h,v,w,E,T;Cc(e[23]);const I=[V9,q9],F=[];function U(K,se){return K[0]?0:1}r=U(e),n=F[r]=I[r](e);function G(K){e[25](K)}function H(K){e[26](K)}function X(K){e[27](K)}let ee={initialPrimarySize:"0%",$$slots:{secondary:[X9],primary:[H9]},$$scope:{ctx:e}};return e[8]!==void 0&&(ee.minPrimarySize=e[8]),e[9]!==void 0&&(ee.minSecondarySize=e[9]),e[7]!==void 0&&(ee.splitterSize=e[7]),c=new O9({props:ee}),Ft.push(()=>Jt(c,"minPrimarySize",G)),Ft.push(()=>Jt(c,"minSecondarySize",H)),Ft.push(()=>Jt(c,"splitterSize",X)),e[28](c),c.$on("changed",e[12]),{c(){t=yt("button"),n.c(),o=mr(),u=yt("div"),Ut(c.$$.fragment),this.h()},l(K){t=vt(K,"BUTTON",{});var se=Ct(t);n.l(se),se.forEach(ge),o=gr(K),u=vt(K,"DIV",{class:!0,style:!0});var ce=Ct(u);Yt(c.$$.fragment,ce),ce.forEach(ge),this.h()},h(){ve(u,"class","split-container svelte-1isg9kr"),zo(u,"height",e[11]+"px"),zo(u,"width",e[10]+"px")},m(K,se){Lt(K,t,se),F[r].m(t,null),e[24](t),Lt(K,o,se),Lt(K,u,se),qt(c,u,null),w=!0,E||(T=rn(window,"resize",e[23]),E=!0)},p(K,se){let ce=r;r=U(K),r===ce?F[r].p(K,se):(ji(),it(F[ce],1,1,()=>{F[ce]=null}),Ui(),n=F[r],n?n.p(K,se):(n=F[r]=I[r](K),n.c()),Xe(n,1),n.m(t,null));const _e={};se[0]&536870930&&(_e.$$scope={dirty:se,ctx:K}),!l&&se[0]&256&&(l=!0,_e.minPrimarySize=K[8],er(()=>l=!1)),!h&&se[0]&512&&(h=!0,_e.minSecondarySize=K[9],er(()=>h=!1)),!v&&se[0]&128&&(v=!0,_e.splitterSize=K[7],er(()=>v=!1)),c.$set(_e),(!w||se[0]&2048)&&zo(u,"height",K[11]+"px"),(!w||se[0]&1024)&&zo(u,"width",K[10]+"px")},i(K){w||(Xe(n),Xe(c.$$.fragment,K),w=!0)},o(K){it(n),it(c.$$.fragment,K),w=!1},d(K){K&&ge(t),F[r].d(),e[24](null),K&&ge(o),K&&ge(u),e[28](null),Vt(c),E=!1,T()}}}function J9(e,t,r){let n,o,u,{$$slots:c={},$$scope:l}=t,{map:h}=t,{isMenuShown:v=!1}=t,{initialSidebarWidth:w=380}=t,{minSidebarWidth:E="300px"}=t,{minMapWidth:T="50%"}=t,{height:I=0}=t,{width:F=0}=t,{sidebarOnLeft:U=!0}=t,G,H=0,X=0,ee,K="0px",se=U?E:T,ce=U?T:E,{position:_e="top-left"}=t;function pe(){}pe.prototype.onAdd=function(He){return this.map=He,this.controlContainer=document.createElement("div"),this.controlContainer.className="mapboxgl-ctrl mapboxgl-ctrl-group",G.addEventListener("click",()=>{r(0,v=!v)}),this.controlContainer.appendChild(G),this.controlContainer},pe.prototype.onRemove=function(){!this.controlContainer||!this.controlContainer.parentNode||!this.map||!this.button||(this.controlContainer.parentNode.removeChild(this.controlContainer),this.map.off("click",this.onClick.bind(this)),this.map=void 0)};let Ge=null;Ff(async()=>{r(21,Ge=new pe),Ae()});const We=()=>{h&&(h.triggerRepaint(),h.resize())},Ae=()=>{if(ee){if(v===!0)if(n)U?(ee.setPercent(100),r(9,ce="0px")):(ee.setPercent(0),r(8,se="0px")),r(7,K="0px");else{if(U){r(8,se=E),r(9,ce=T);const He=w/H*100;ee.setPercent(He)}else{r(9,ce=E),r(8,se=T);const He=(H-w)/H*100;ee.setPercent(He)}r(7,K="10px")}else U?(r(8,se="0px"),ee.setPercent(0)):(r(9,ce="0px"),ee.setPercent(100)),r(7,K="0px");We()}},Ie=()=>{Ae()},Fe=()=>{We()},ot=()=>{r(0,v=!1)};function _t(){r(2,H=window.innerWidth),r(3,X=window.innerHeight)}function ht(He){Ft[He?"unshift":"push"](()=>{G=He,r(5,G)})}function $e(He){se=He,r(8,se)}function ut(He){ce=He,r(9,ce)}function bt(He){K=He,r(7,K)}function Ze(He){Ft[He?"unshift":"push"](()=>{ee=He,r(6,ee)})}return e.$$set=He=>{"map"in He&&r(14,h=He.map),"isMenuShown"in He&&r(0,v=He.isMenuShown),"initialSidebarWidth"in He&&r(15,w=He.initialSidebarWidth),"minSidebarWidth"in He&&r(16,E=He.minSidebarWidth),"minMapWidth"in He&&r(17,T=He.minMapWidth),"height"in He&&r(18,I=He.height),"width"in He&&r(19,F=He.width),"sidebarOnLeft"in He&&r(1,U=He.sidebarOnLeft),"position"in He&&r(20,_e=He.position),"$$scope"in He&&r(29,l=He.$$scope)},e.$$.update=()=>{e.$$.dirty[0]&4&&r(4,n=H<768),e.$$.dirty[0]&16&&Ae(),e.$$.dirty[0]&262152&&r(11,o=I>0?I:X),e.$$.dirty[0]&524292&&r(10,u=F>0?F:H),e.$$.dirty[0]&8,e.$$.dirty[0]&4,e.$$.dirty[0]&3162112&&h&&Ge!==null&&h.hasControl(Ge)===!1&&h.addControl(Ge,_e),e.$$.dirty[0]&1&&Ie()},[v,U,H,X,n,G,ee,K,se,ce,u,o,Fe,ot,h,w,E,T,I,F,_e,Ge,c,_t,ht,$e,ut,bt,Ze,l]}class K9 extends Dn{constructor(t){super(),zn(this,t,J9,Y9,Ln,{map:14,isMenuShown:0,initialSidebarWidth:15,minSidebarWidth:16,minMapWidth:17,height:18,width:19,sidebarOnLeft:1,position:20},null,[-1,-1])}}var Q9=8,eE={version:{required:!0,type:"enum",values:[8],doc:"Style specification version number. Must be 8.",example:8},name:{type:"string",doc:"A human-readable name for the style.",example:"Bright"},metadata:{type:"*",doc:"Arbitrary properties useful to track with the stylesheet, but do not influence rendering. Properties should be prefixed to avoid collisions, like 'mapbox:'."},center:{type:"array",value:"number",doc:"Default map center in longitude and latitude.  The style center will be used only if the map has not been positioned by other means (e.g. map options or user interaction).",example:[-73.9749,40.7736]},zoom:{type:"number",doc:"Default zoom level.  The style zoom will be used only if the map has not been positioned by other means (e.g. map options or user interaction).",example:12.5},bearing:{type:"number",default:0,period:360,units:"degrees",doc:'Default bearing, in degrees. The bearing is the compass direction that is "up"; for example, a bearing of 90 orients the map so that east is up. This value will be used only if the map has not been positioned by other means (e.g. map options or user interaction).',example:29},pitch:{type:"number",default:0,units:"degrees",doc:"Default pitch, in degrees. Zero is perpendicular to the surface, for a look straight down at the map, while a greater value like 60 looks ahead towards the horizon. The style pitch will be used only if the map has not been positioned by other means (e.g. map options or user interaction).",example:50},light:{type:"light",doc:"The global light source.",example:{anchor:"viewport",color:"white",intensity:.4}},terrain:{type:"terrain",doc:"A global modifier that elevates layers and markers based on a DEM data source."},fog:{type:"fog",doc:"A global effect that fades layers and markers based on their distance to the camera. The fog can be used to approximate the effect of atmosphere on distant objects and enhance the depth perception of the map when used with terrain or 3D features. Note: fog is renamed to atmosphere in the Android and iOS SDKs and planned to be changed in GL-JS v.3.0.0."},sources:{required:!0,type:"sources",doc:"Data source specifications.",example:{"mapbox-streets":{type:"vector",url:"mapbox://mapbox.mapbox-streets-v6"}}},sprite:{type:"string",doc:"A base URL for retrieving the sprite image and metadata. The extensions `.png`, `.json` and scale factor `@2x.png` will be automatically appended. This property is required if any layer uses the `background-pattern`, `fill-pattern`, `line-pattern`, `fill-extrusion-pattern`, or `icon-image` properties. The URL must be absolute, containing the [scheme, authority and path components](https://en.wikipedia.org/wiki/URL#Syntax).",example:"mapbox://sprites/mapbox/bright-v8"},glyphs:{type:"string",doc:"A URL template for loading signed-distance-field glyph sets in PBF format. The URL must include `{fontstack}` and `{range}` tokens. This property is required if any layer uses the `text-field` layout property. The URL must be absolute, containing the [scheme, authority and path components](https://en.wikipedia.org/wiki/URL#Syntax).",example:"mapbox://fonts/mapbox/{fontstack}/{range}.pbf"},transition:{type:"transition",doc:"A global transition definition to use as a default across properties, to be used for timing transitions between one value and the next when no property-specific transition is set. Collision-based symbol fading is controlled independently of the style's `transition` property.",example:{duration:300,delay:0}},projection:{type:"projection",doc:"The projection the map should be rendered in. Supported projections are Mercator, Globe, Albers, Equal Earth, Equirectangular (WGS84), Lambert conformal conic, Natural Earth, and Winkel Tripel. Terrain, sky and fog are supported by only Mercator and globe. CustomLayerInterface is not supported outside of Mercator.",example:{name:"albers",center:[-154,50],parallels:[55,65]}},layers:{required:!0,type:"array",value:"layer",doc:"Layers will be drawn in the order of this array.",example:[{id:"water",source:"mapbox-streets","source-layer":"water",type:"fill",paint:{"fill-color":"#00ffff"}}]}},tE={"*":{type:"source",doc:"Specification of a data source. For vector and raster sources, either TileJSON or a URL to a TileJSON must be provided. For image and video sources, a URL must be provided. For GeoJSON sources, a URL or inline GeoJSON must be provided."}},rE=["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],nE={type:{required:!0,type:"enum",values:{vector:{doc:"A vector tile source."}},doc:"The type of the source."},url:{type:"string",doc:"A URL to a TileJSON resource. Supported protocols are `http:`, `https:`, and `mapbox://<Tileset ID>`."},tiles:{type:"array",value:"string",doc:"An array of one or more tile source URLs, as in the TileJSON spec."},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129],doc:"An array containing the longitude and latitude of the southwest and northeast corners of the source's bounding box in the following order: `[sw.lng, sw.lat, ne.lng, ne.lat]`. When this property is included in a source, no tiles outside of the given bounds are requested by Mapbox GL."},scheme:{type:"enum",values:{xyz:{doc:"Slippy map tilenames scheme."},tms:{doc:"OSGeo spec scheme."}},default:"xyz",doc:"Influences the y direction of the tile coordinates. The global-mercator (aka Spherical Mercator) profile is assumed."},minzoom:{type:"number",default:0,doc:"Minimum zoom level for which tiles are available, as in the TileJSON spec."},maxzoom:{type:"number",default:22,doc:"Maximum zoom level for which tiles are available, as in the TileJSON spec. Data from tiles at the maxzoom are used when displaying the map at higher zoom levels."},attribution:{type:"string",doc:"Contains an attribution to be displayed when the map is shown to a user."},promoteId:{type:"promoteId",doc:"A property to use as a feature id (for feature state). Either a property name, or an object of the form `{<sourceLayer>: <propertyName>}`. If specified as a string for a vector tile source, the same property is used across all its source layers. If specified as an object only specified source layers will have id overriden, others will fallback to original feature id"},volatile:{type:"boolean",default:!1,doc:"A setting to determine whether a source's tiles are cached locally.","sdk-support":{"basic functionality":{android:"9.3.0",ios:"5.10.0"}}},"*":{type:"*",doc:"Other keys to configure the data source."}},iE={type:{required:!0,type:"enum",values:{raster:{doc:"A raster tile source."}},doc:"The type of the source."},url:{type:"string",doc:"A URL to a TileJSON resource. Supported protocols are `http:`, `https:`, and `mapbox://<Tileset ID>`."},tiles:{type:"array",value:"string",doc:"An array of one or more tile source URLs, as in the TileJSON spec."},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129],doc:"An array containing the longitude and latitude of the southwest and northeast corners of the source's bounding box in the following order: `[sw.lng, sw.lat, ne.lng, ne.lat]`. When this property is included in a source, no tiles outside of the given bounds are requested by Mapbox GL."},minzoom:{type:"number",default:0,doc:"Minimum zoom level for which tiles are available, as in the TileJSON spec."},maxzoom:{type:"number",default:22,doc:"Maximum zoom level for which tiles are available, as in the TileJSON spec. Data from tiles at the maxzoom are used when displaying the map at higher zoom levels."},tileSize:{type:"number",default:512,units:"pixels",doc:"The minimum visual size to display tiles for this layer. Only configurable for raster layers."},scheme:{type:"enum",values:{xyz:{doc:"Slippy map tilenames scheme."},tms:{doc:"OSGeo spec scheme."}},default:"xyz",doc:"Influences the y direction of the tile coordinates. The global-mercator (aka Spherical Mercator) profile is assumed."},attribution:{type:"string",doc:"Contains an attribution to be displayed when the map is shown to a user."},volatile:{type:"boolean",default:!1,doc:"A setting to determine whether a source's tiles are cached locally.","sdk-support":{"basic functionality":{android:"9.3.0",ios:"5.10.0"}}},"*":{type:"*",doc:"Other keys to configure the data source."}},oE={type:{required:!0,type:"enum",values:{"raster-dem":{doc:"A RGB-encoded raster DEM source"}},doc:"The type of the source."},url:{type:"string",doc:"A URL to a TileJSON resource. Supported protocols are `http:`, `https:`, and `mapbox://<Tileset ID>`."},tiles:{type:"array",value:"string",doc:"An array of one or more tile source URLs, as in the TileJSON spec."},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129],doc:"An array containing the longitude and latitude of the southwest and northeast corners of the source's bounding box in the following order: `[sw.lng, sw.lat, ne.lng, ne.lat]`. When this property is included in a source, no tiles outside of the given bounds are requested by Mapbox GL."},minzoom:{type:"number",default:0,doc:"Minimum zoom level for which tiles are available, as in the TileJSON spec."},maxzoom:{type:"number",default:22,doc:"Maximum zoom level for which tiles are available, as in the TileJSON spec. Data from tiles at the maxzoom are used when displaying the map at higher zoom levels."},tileSize:{type:"number",default:512,units:"pixels",doc:"The minimum visual size to display tiles for this layer. Only configurable for raster layers."},attribution:{type:"string",doc:"Contains an attribution to be displayed when the map is shown to a user."},encoding:{type:"enum",values:{terrarium:{doc:"Terrarium format PNG tiles. See https://aws.amazon.com/es/public-datasets/terrain/ for more info."},mapbox:{doc:"Mapbox Terrain RGB tiles. See https://www.mapbox.com/help/access-elevation-data/#mapbox-terrain-rgb for more info."}},default:"mapbox",doc:"The encoding used by this source. Mapbox Terrain RGB is used by default"},volatile:{type:"boolean",default:!1,doc:"A setting to determine whether a source's tiles are cached locally.","sdk-support":{"basic functionality":{android:"9.3.0",ios:"5.10.0"}}},"*":{type:"*",doc:"Other keys to configure the data source."}},aE={type:{required:!0,type:"enum",values:{geojson:{doc:"A GeoJSON data source."}},doc:"The data type of the GeoJSON source."},data:{type:"*",doc:"A URL to a GeoJSON file, or inline GeoJSON."},maxzoom:{type:"number",default:18,doc:"Maximum zoom level at which to create vector tiles (higher means greater detail at high zoom levels)."},attribution:{type:"string",doc:"Contains an attribution to be displayed when the map is shown to a user."},buffer:{type:"number",default:128,maximum:512,minimum:0,doc:"Size of the tile buffer on each side. A value of 0 produces no buffer. A value of 512 produces a buffer as wide as the tile itself. Larger values produce fewer rendering artifacts near tile edges and slower performance."},filter:{type:"*",doc:"An expression for filtering features prior to processing them for rendering."},tolerance:{type:"number",default:.375,doc:"Douglas-Peucker simplification tolerance (higher means simpler geometries and faster performance)."},cluster:{type:"boolean",default:!1,doc:"If the data is a collection of point features, setting this to true clusters the points by radius into groups. Cluster groups become new `Point` features in the source with additional properties:\n * `cluster` Is `true` if the point is a cluster \n * `cluster_id` A unqiue id for the cluster to be used in conjunction with the [cluster inspection methods](https://www.mapbox.com/mapbox-gl-js/api/#geojsonsource#getclusterexpansionzoom)\n * `point_count` Number of original points grouped into this cluster\n * `point_count_abbreviated` An abbreviated point count"},clusterRadius:{type:"number",default:50,minimum:0,doc:"Radius of each cluster if clustering is enabled. A value of 512 indicates a radius equal to the width of a tile."},clusterMaxZoom:{type:"number",doc:"Max zoom on which to cluster points if clustering is enabled. Defaults to one zoom less than maxzoom (so that last zoom features are not clustered). Clusters are re-evaluated at integer zoom levels so setting clusterMaxZoom to 14 means the clusters will be displayed until z15."},clusterMinPoints:{type:"number",doc:"Minimum number of points necessary to form a cluster if clustering is enabled. Defaults to `2`."},clusterProperties:{type:"*",doc:'An object defining custom properties on the generated clusters if clustering is enabled, aggregating values from clustered points. Has the form `{"property_name": [operator, map_expression]}`. `operator` is any expression function that accepts at least 2 operands (e.g. `"+"` or `"max"`)  it accumulates the property value from clusters/points the cluster contains; `map_expression` produces the value of a single point.\n\nExample: `{"sum": ["+", ["get", "scalerank"]]}`.\n\nFor more advanced use cases, in place of `operator`, you can use a custom reduce expression that references a special `["accumulated"]` value, e.g.:\n`{"sum": [["+", ["accumulated"], ["get", "sum"]], ["get", "scalerank"]]}`'},lineMetrics:{type:"boolean",default:!1,doc:"Whether to calculate line distance metrics. This is required for line layers that specify `line-gradient` values."},generateId:{type:"boolean",default:!1,doc:"Whether to generate ids for the geojson features. When enabled, the `feature.id` property will be auto assigned based on its index in the `features` array, over-writing any previous values."},promoteId:{type:"promoteId",doc:"A property to use as a feature id (for feature state). Either a property name, or an object of the form `{<sourceLayer>: <propertyName>}`."}},sE={type:{required:!0,type:"enum",values:{video:{doc:"A video data source."}},doc:"The data type of the video source."},urls:{required:!0,type:"array",value:"string",doc:"URLs to video content in order of preferred format."},coordinates:{required:!0,doc:"Corners of video specified in longitude, latitude pairs.",type:"array",length:4,value:{type:"array",length:2,value:"number",doc:"A single longitude, latitude pair."}}},lE={type:{required:!0,type:"enum",values:{image:{doc:"An image data source."}},doc:"The data type of the image source."},url:{required:!0,type:"string",doc:"URL that points to an image."},coordinates:{required:!0,doc:"Corners of image specified in longitude, latitude pairs.",type:"array",length:4,value:{type:"array",length:2,value:"number",doc:"A single longitude, latitude pair."}}},uE={id:{type:"string",doc:"Unique layer name.",required:!0},type:{type:"enum",values:{fill:{doc:"A filled polygon with an optional stroked border.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}}},line:{doc:"A stroked line.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}}},symbol:{doc:"An icon or a text label.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}}},circle:{doc:"A filled circle.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}}},heatmap:{doc:"A heatmap.","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"fill-extrusion":{doc:"An extruded (3D) polygon.","sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}}},raster:{doc:"Raster map textures such as satellite imagery.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}}},hillshade:{doc:"Client-side hillshading visualization based on DEM data. Currently, the implementation only supports Mapbox Terrain RGB and Mapzen Terrarium tiles.","sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},background:{doc:"The background color or pattern of the map.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}}},sky:{doc:"A spherical dome around the map that is always rendered behind all other layers.","sdk-support":{"basic functionality":{js:"2.0.0",ios:"10.0.0",android:"10.0.0"}}}},doc:"Rendering type of this layer.",required:!0},metadata:{type:"*",doc:"Arbitrary properties useful to track with the layer, but do not influence rendering. Properties should be prefixed to avoid collisions, like 'mapbox:'."},source:{type:"string",doc:"Name of a source description to be used for this layer. Required for all layer types except `background`."},"source-layer":{type:"string",doc:"Layer to use from a vector tile source. Required for vector tile sources; prohibited for all other source types, including GeoJSON sources."},minzoom:{type:"number",minimum:0,maximum:24,doc:"The minimum zoom level for the layer. At zoom levels less than the minzoom, the layer will be hidden."},maxzoom:{type:"number",minimum:0,maximum:24,doc:"The maximum zoom level for the layer. At zoom levels equal to or greater than the maxzoom, the layer will be hidden."},filter:{type:"filter",doc:'An expression specifying conditions on source features. Only features that match the filter are displayed. Zoom expressions in filters are only evaluated at integer zoom levels. The `["feature-state", ...]` expression is not supported in filter expressions.  The `["pitch"]` and `["distance-from-center"]` expressions are supported only for filter expressions on the symbol layer.'},layout:{type:"layout",doc:"Layout properties for the layer."},paint:{type:"paint",doc:"Default paint properties for this layer."}},cE=["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background","layout_sky"],fE={visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},"property-type":"constant"}},hE={visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"2.0.0",ios:"10.0.0",android:"10.0.0"}},"property-type":"constant"}},pE={"fill-sort-key":{type:"number",doc:"Sorts features in ascending order based on this value. Features with a higher sort key will appear above features with a lower sort key.","sdk-support":{"basic functionality":{js:"1.2.0",android:"9.1.0",ios:"5.8.0",macos:"0.15.0"},"data-driven styling":{js:"1.2.0",android:"9.1.0",ios:"5.8.0",macos:"0.15.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},"property-type":"constant"}},dE={"circle-sort-key":{type:"number",doc:"Sorts features in ascending order based on this value. Features with a higher sort key will appear above features with a lower sort key.","sdk-support":{"basic functionality":{js:"1.2.0",android:"9.2.0",ios:"5.9.0",macos:"0.16.0"},"data-driven styling":{js:"1.2.0",android:"9.2.0",ios:"5.9.0",macos:"0.16.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},"property-type":"constant"}},mE={visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},"property-type":"constant"}},gE={"line-cap":{type:"enum",values:{butt:{doc:"A cap with a squared-off end which is drawn to the exact endpoint of the line."},round:{doc:"A cap with a rounded end which is drawn beyond the endpoint of the line at a radius of one-half of the line's width and centered on the endpoint of the line."},square:{doc:"A cap with a squared-off end which is drawn beyond the endpoint of the line at a distance of one-half of the line's width."}},default:"butt",doc:"The display of line endings.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"2.3.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-join":{type:"enum",values:{bevel:{doc:"A join with a squared-off end which is drawn beyond the endpoint of the line at a distance of one-half of the line's width."},round:{doc:"A join with a rounded end which is drawn beyond the endpoint of the line at a radius of one-half of the line's width and centered on the endpoint of the line."},miter:{doc:"A join with a sharp, angled corner which is drawn with the outer sides beyond the endpoint of the path until they meet."}},default:"miter",doc:"The display of lines when joining.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.40.0",android:"5.2.0",ios:"3.7.0",macos:"0.6.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,doc:"Used to automatically convert miter joins to bevel joins for sharp angles.",requires:[{"line-join":"miter"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,doc:"Used to automatically convert round joins to miter joins for shallow angles.",requires:[{"line-join":"round"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",doc:"Sorts features in ascending order based on this value. Features with a higher sort key will appear above features with a lower sort key.","sdk-support":{"basic functionality":{js:"1.2.0",android:"9.1.0",ios:"5.8.0",macos:"0.15.0"},"data-driven styling":{js:"1.2.0",android:"9.1.0",ios:"5.8.0",macos:"0.15.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},"property-type":"constant"}},yE={"symbol-placement":{type:"enum",values:{point:{doc:"The label is placed at the point where the geometry is located."},line:{doc:"The label is placed along the line of the geometry. Can only be used on `LineString` and `Polygon` geometries."},"line-center":{doc:"The label is placed at the center of the line of the geometry. Can only be used on `LineString` and `Polygon` geometries. Note that a single feature in a vector tile may contain multiple line geometries."}},default:"point",doc:"Label placement relative to its geometry.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"`line-center` value":{js:"0.47.0",android:"6.4.0",ios:"4.3.0",macos:"0.10.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",doc:"Distance between two symbol anchors.",requires:[{"symbol-placement":"line"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,doc:"If true, the symbols will not cross tile edges to avoid mutual collisions. Recommended in layers that don't have enough padding in the vector tile to prevent collisions, or if it is a point symbol layer placed after a line symbol layer. When using a client that supports global collision detection, like Mapbox GL JS version 0.42.0 or greater, enabling this property is not needed to prevent clipped labels at tile boundaries.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",doc:"Sorts features in ascending order based on this value. Features with lower sort keys are drawn and placed first.  When `icon-allow-overlap` or `text-allow-overlap` is `false`, features with a lower sort key will have priority during placement. When `icon-allow-overlap` or `text-allow-overlap` is set to `true`, features with a higher sort key will overlap over features with a lower sort key.","sdk-support":{"basic functionality":{js:"0.53.0",android:"7.4.0",ios:"4.11.0",macos:"0.14.0"},"data-driven styling":{js:"0.53.0",android:"7.4.0",ios:"4.11.0",macos:"0.14.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{doc:"Sorts symbols by `symbol-sort-key` if set. Otherwise, sorts symbols by their y-position relative to the viewport if `icon-allow-overlap` or `text-allow-overlap` is set to `true` or `icon-ignore-placement` or `text-ignore-placement` is `false`."},"viewport-y":{doc:"Sorts symbols by their y-position relative to the viewport if `icon-allow-overlap` or `text-allow-overlap` is set to `true` or `icon-ignore-placement` or `text-ignore-placement` is `false`."},source:{doc:"Sorts symbols by `symbol-sort-key` if set. Otherwise, no sorting is applied; symbols are rendered in the same order as the source data."}},default:"auto",doc:"Determines whether overlapping symbols in the same layer are rendered in the order that they appear in the data source or by their y-position relative to the viewport. To control the order and prioritization of symbols otherwise, use `symbol-sort-key`.","sdk-support":{"basic functionality":{js:"0.49.0",android:"6.6.0",ios:"4.5.0",macos:"0.12.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,doc:"If true, the icon will be visible even if it collides with other previously drawn symbols.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,doc:"If true, other symbols can be visible even if they collide with the icon.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,doc:"If true, text will display without their corresponding icons when the icon collides with other symbols and the text does not.",requires:["icon-image","text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{doc:"When `symbol-placement` is set to `point`, aligns icons east-west. When `symbol-placement` is set to `line` or `line-center`, aligns icon x-axes with the line."},viewport:{doc:"Produces icons whose x-axes are aligned with the x-axis of the viewport, regardless of the value of `symbol-placement`."},auto:{doc:"When `symbol-placement` is set to `point`, this is equivalent to `viewport`. When `symbol-placement` is set to `line` or `line-center`, this is equivalent to `map`."}},default:"auto",doc:"In combination with `symbol-placement`, determines the rotation behavior of icons.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"`auto` value":{js:"0.25.0",android:"4.2.0",ios:"3.4.0",macos:"0.3.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",doc:"Scales the original size of the icon by the provided factor. The new pixel size of the image will be the original pixel size multiplied by `icon-size`. 1 is the original size; 3 triples the size of the image.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.35.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{doc:"The icon is displayed at its intrinsic aspect ratio."},width:{doc:"The icon is scaled in the x-dimension to fit the width of the text."},height:{doc:"The icon is scaled in the y-dimension to fit the height of the text."},both:{doc:"The icon is scaled in both x- and y-dimensions."}},default:"none",doc:"Scales the icon to fit around the associated text.",requires:["icon-image","text-field"],"sdk-support":{"basic functionality":{js:"0.21.0",android:"4.2.0",ios:"3.4.0",macos:"0.2.1"},"stretchable icons":{js:"1.6.0",android:"9.2.0",ios:"5.8.0",macos:"0.15.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",doc:"Size of the additional area added to dimensions determined by `icon-text-fit`, in clockwise order: top, right, bottom, left.",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],"sdk-support":{"basic functionality":{js:"0.21.0",android:"4.2.0",ios:"3.4.0",macos:"0.2.1"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",doc:"Name of image in sprite to use for drawing an image background.",tokens:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.35.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",doc:"Rotates the icon clockwise.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.21.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"number",default:2,minimum:0,units:"pixels",doc:"Size of the additional area around the icon bounding box used for detecting symbol collisions.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{type:"boolean",default:!1,doc:"If true, the icon may be flipped to prevent it from being rendered upside-down.",requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],doc:"Offset distance of icon from its anchor. Positive values indicate right and down, while negative values indicate left and up. Each component is multiplied by the value of `icon-size` to obtain the final offset in pixels. When combined with `icon-rotate` the offset will be as if the rotated direction was up.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.29.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{doc:"The center of the icon is placed closest to the anchor."},left:{doc:"The left side of the icon is placed closest to the anchor."},right:{doc:"The right side of the icon is placed closest to the anchor."},top:{doc:"The top of the icon is placed closest to the anchor."},bottom:{doc:"The bottom of the icon is placed closest to the anchor."},"top-left":{doc:"The top left corner of the icon is placed closest to the anchor."},"top-right":{doc:"The top right corner of the icon is placed closest to the anchor."},"bottom-left":{doc:"The bottom left corner of the icon is placed closest to the anchor."},"bottom-right":{doc:"The bottom right corner of the icon is placed closest to the anchor."}},default:"center",doc:"Part of the icon placed closest to the anchor.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.40.0",android:"5.2.0",ios:"3.7.0",macos:"0.6.0"},"data-driven styling":{js:"0.40.0",android:"5.2.0",ios:"3.7.0",macos:"0.6.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{doc:"The icon is aligned to the plane of the map."},viewport:{doc:"The icon is aligned to the plane of the viewport."},auto:{doc:"Automatically matches the value of `icon-rotation-alignment`."}},default:"auto",doc:"Orientation of icon when map is pitched.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.39.0",android:"5.2.0",ios:"3.7.0",macos:"0.6.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{doc:"The text is aligned to the plane of the map."},viewport:{doc:"The text is aligned to the plane of the viewport."},auto:{doc:"Automatically matches the value of `text-rotation-alignment`."}},default:"auto",doc:"Orientation of text when map is pitched.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.21.0",android:"4.2.0",ios:"3.4.0",macos:"0.2.1"},"`auto` value":{js:"0.25.0",android:"4.2.0",ios:"3.4.0",macos:"0.3.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{doc:"When `symbol-placement` is set to `point`, aligns text east-west. When `symbol-placement` is set to `line` or `line-center`, aligns text x-axes with the line."},viewport:{doc:"Produces glyphs whose x-axes are aligned with the x-axis of the viewport, regardless of the value of `symbol-placement`."},auto:{doc:"When `symbol-placement` is set to `point`, this is equivalent to `viewport`. When `symbol-placement` is set to `line` or `line-center`, this is equivalent to `map`."}},default:"auto",doc:"In combination with `symbol-placement`, determines the rotation behavior of the individual glyphs forming the text.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"`auto` value":{js:"0.25.0",android:"4.2.0",ios:"3.4.0",macos:"0.3.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,doc:"Value to use for a text label. If a plain `string` is provided, it will be treated as a `formatted` with default/inherited formatting options. SDF images are not supported in formatted text and will be ignored.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],doc:"Font stack to use for displaying text.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.43.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",doc:"Font size.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.35.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",doc:"The maximum line width for text wrapping.",requires:["text-field",{"symbol-placement":["point"]}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.40.0",android:"5.2.0",ios:"3.7.0",macos:"0.6.0"}},expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",doc:"Text leading value for multi-line text.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"2.3.0",android:"10.0.0",ios:"10.0.0"}},expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-letter-spacing":{type:"number",default:0,units:"ems",doc:"Text tracking amount.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.40.0",android:"5.2.0",ios:"3.7.0",macos:"0.6.0"}},expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{doc:"The text is aligned towards the anchor position."},left:{doc:"The text is aligned to the left."},center:{doc:"The text is centered."},right:{doc:"The text is aligned to the right."}},default:"center",doc:"Text justification options.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.39.0",android:"5.2.0",ios:"3.7.0",macos:"0.6.0"},auto:{js:"0.54.0",android:"7.4.0",ios:"4.10.0",macos:"0.14.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,doc:"Radial offset of text, in the direction of the symbol's anchor. Useful in combination with `text-variable-anchor`, which defaults to using the two-dimensional `text-offset` if present.","sdk-support":{"basic functionality":{js:"0.54.0",android:"7.4.0",ios:"4.10.0",macos:"0.14.0"},"data-driven styling":{js:"0.54.0",android:"7.4.0",ios:"4.10.0",macos:"0.14.0"}},requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{doc:"The center of the text is placed closest to the anchor."},left:{doc:"The left side of the text is placed closest to the anchor."},right:{doc:"The right side of the text is placed closest to the anchor."},top:{doc:"The top of the text is placed closest to the anchor."},bottom:{doc:"The bottom of the text is placed closest to the anchor."},"top-left":{doc:"The top left corner of the text is placed closest to the anchor."},"top-right":{doc:"The top right corner of the text is placed closest to the anchor."},"bottom-left":{doc:"The bottom left corner of the text is placed closest to the anchor."},"bottom-right":{doc:"The bottom right corner of the text is placed closest to the anchor."}},requires:["text-field",{"symbol-placement":["point"]}],doc:"To increase the chance of placing high-priority labels on the map, you can provide an array of `text-anchor` locations: the renderer will attempt to place the label at each location, in order, before moving onto the next label. Use `text-justify: auto` to choose justification based on anchor position. To apply an offset, use the `text-radial-offset` or the two-dimensional `text-offset`.","sdk-support":{"basic functionality":{js:"0.54.0",android:"7.4.0",ios:"4.10.0",macos:"0.14.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{doc:"The center of the text is placed closest to the anchor."},left:{doc:"The left side of the text is placed closest to the anchor."},right:{doc:"The right side of the text is placed closest to the anchor."},top:{doc:"The top of the text is placed closest to the anchor."},bottom:{doc:"The bottom of the text is placed closest to the anchor."},"top-left":{doc:"The top left corner of the text is placed closest to the anchor."},"top-right":{doc:"The top right corner of the text is placed closest to the anchor."},"bottom-left":{doc:"The bottom left corner of the text is placed closest to the anchor."},"bottom-right":{doc:"The bottom right corner of the text is placed closest to the anchor."}},default:"center",doc:"Part of the text placed closest to the anchor.",requires:["text-field",{"!":"text-variable-anchor"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.39.0",android:"5.2.0",ios:"3.7.0",macos:"0.6.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",doc:"Maximum angle change between adjacent characters.",requires:["text-field",{"symbol-placement":["line","line-center"]}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{doc:"If a text's language supports horizontal writing mode, symbols would be laid out horizontally."},vertical:{doc:"If a text's language supports vertical writing mode, symbols would be laid out vertically."}},doc:"The property allows control over a symbol's orientation. Note that the property values act as a hint, so that a symbol whose language doesnt support the provided orientation will be laid out in its natural orientation. Example: English point symbol will be rendered horizontally even if array value contains single 'vertical' enum value. For symbol with point placement, the order of elements in an array define priority order for the placement of an orientation variant. For symbol with line placement, the default text writing mode is either ['horizontal', 'vertical'] or ['vertical', 'horizontal'], the order doesn't affect the placement.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"1.3.0",android:"8.3.0",ios:"5.3.0",macos:"0.15.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",doc:"Rotates the text clockwise.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.35.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",doc:"Size of the additional area around the text bounding box used for detecting symbol collisions.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,doc:"If true, the text may be flipped vertically to prevent it from being rendered upside-down.",requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{doc:"The text is not altered."},uppercase:{doc:"Forces all letters to be displayed in uppercase."},lowercase:{doc:"Forces all letters to be displayed in lowercase."}},default:"none",doc:"Specifies how to capitalize text, similar to the CSS `text-transform` property.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",doc:"Offset distance of text from its anchor. Positive values indicate right and down, while negative values indicate left and up. If used with text-variable-anchor, input values will be taken as absolute values. Offsets along the x- and y-axis will be applied automatically based on the anchor position.",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.35.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,doc:"If true, the text will be visible even if it collides with other previously drawn symbols.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,doc:"If true, other symbols can be visible even if they collide with the text.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,doc:"If true, icons will display without their corresponding text when the text collides with other symbols and the icon does not.",requires:["text-field","icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},"property-type":"constant"}},vE={visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},"property-type":"constant"}},_E={visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},"property-type":"constant"}},bE={type:"array",value:"*",doc:"A filter selects specific features from a layer."},wE={type:"boolean",doc:'Expression which determines whether or not to display a symbol. Symbols support dynamic filtering, meaning this expression can use the `["pitch"]` and `["distance-from-center"]` expressions to reference the current state of the view.',default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature","pitch","distance-from-center"]}},xE={type:"boolean",doc:'Expression which determines whether or not to display a polygon. Fill layer does NOT support dynamic filtering, meaning this expression can NOT use the `["pitch"]` and `["distance-from-center"]` expressions to reference the current state of the view.',default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}},kE={type:"boolean",doc:'Expression which determines whether or not to display a Polygon or LineString. Line layer does NOT support dynamic filtering, meaning this expression can NOT use the `["pitch"]` and `["distance-from-center"]` expressions to reference the current state of the view.',default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}},AE={type:"boolean",doc:'Expression which determines whether or not to display a circle. Circle layer does NOT support dynamic filtering, meaning this expression can NOT use the `["pitch"]` and `["distance-from-center"]` expressions to reference the current state of the view.',default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}},EE={type:"boolean",doc:'Expression used to determine whether a point is being displayed or not. Heatmap layer does NOT support dynamic filtering, meaning this expression can NOT use the `["pitch"]` and `["distance-from-center"]` expressions to reference the current state of the view.',default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}},SE={type:"enum",values:{"==":{doc:'`["==", key, value]` equality: `feature[key] = value`'},"!=":{doc:'`["!=", key, value]` inequality: `feature[key]  value`'},">":{doc:'`[">", key, value]` greater than: `feature[key] > value`'},">=":{doc:'`[">=", key, value]` greater than or equal: `feature[key]  value`'},"<":{doc:'`["<", key, value]` less than: `feature[key] < value`'},"<=":{doc:'`["<=", key, value]` less than or equal: `feature[key]  value`'},in:{doc:'`["in", key, v0, ..., vn]` set inclusion: `feature[key]  {v0, ..., vn}`'},"!in":{doc:'`["!in", key, v0, ..., vn]` set exclusion: `feature[key]  {v0, ..., vn}`'},all:{doc:'`["all", f0, ..., fn]` logical `AND`: `f0  ...  fn`'},any:{doc:'`["any", f0, ..., fn]` logical `OR`: `f0  ...  fn`'},none:{doc:'`["none", f0, ..., fn]` logical `NOR`: `f0  ...  fn`'},has:{doc:'`["has", key]` `feature[key]` exists'},"!has":{doc:'`["!has", key]` `feature[key]` does not exist'},within:{doc:'`["within", object]` feature geometry is within object geometry'}},doc:"The filter operator."},CE={type:"enum",values:{Point:{doc:"Filter to point geometries."},LineString:{doc:"Filter to line geometries."},Polygon:{doc:"Filter to polygon geometries."}},doc:"The geometry type for the filter to select."},IE={type:"array",minimum:0,maximum:24,value:["number","color"],length:2,doc:"Zoom level and value pair."},TE={type:"array",value:"*",minimum:1,doc:"An expression defines a function that can be used for data-driven style properties or feature filters."},LE={doc:"",type:"enum",values:{let:{doc:'Binds expressions to named variables, which can then be referenced in the result expression using ["var", "variable_name"].',group:"Variable binding","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},var:{doc:'References variable bound using "let".',group:"Variable binding","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},literal:{doc:"Provides a literal array or object value.",group:"Types","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},array:{doc:"Asserts that the input is an array (optionally with a specific item type and length).  If, when the input expression is evaluated, it is not of the asserted type, then this assertion will cause the whole expression to be aborted.",group:"Types","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},at:{doc:"Retrieves an item from an array.",group:"Lookup","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},in:{doc:"Determines whether an item exists in an array or a substring exists in a string. In the specific case when the second and third arguments are string literals, you must wrap at least one of them in a [`literal`](#types-literal) expression to hint correct interpretation to the [type system](#type-system).",group:"Lookup","sdk-support":{"basic functionality":{js:"1.6.0",android:"9.1.0",ios:"5.8.0",macos:"0.15.0"}}},"index-of":{doc:"Returns the first position at which an item can be found in an array or a substring can be found in a string, or `-1` if the input cannot be found. Accepts an optional index from where to begin the search.",group:"Lookup","sdk-support":{"basic functionality":{js:"1.10.0",android:"10.0.0",ios:"10.0.0"}}},slice:{doc:"Returns an item from an array or a substring from a string from a specified start index, or between a start index and an end index if set. The return value is inclusive of the start index but not of the end index.",group:"Lookup","sdk-support":{"basic functionality":{js:"1.10.0",android:"10.0.0",ios:"10.0.0"}}},case:{doc:"Selects the first output whose corresponding test condition evaluates to true, or the fallback value otherwise.",group:"Decision","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},match:{doc:'Selects the output for which the label value matches the input value, or the fallback value if no match is found. The input can be any expression (for example, `["get", "building_type"]`). Each label must be unique, and must be either:\n - a single literal value; or\n - an array of literal values, the values of which must be all strings or all numbers (for example `[100, 101]` or `["c", "b"]`).\n\nThe input matches if any of the values in the array matches using strict equality, similar to the `"in"` operator.\nIf the input type does not match the type of the labels, the result will be the fallback value.',group:"Decision","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},coalesce:{doc:"Evaluates each expression in turn until the first valid value is obtained. Invalid values are `null` and [`'image'`](#types-image) expressions that are unavailable in the style. If all values are invalid, `coalesce` returns the first value listed.",group:"Decision","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},step:{doc:'Produces discrete, stepped results by evaluating a piecewise-constant function defined by pairs of input and output values ("stops"). The `input` may be any numeric expression (e.g., `["get", "population"]`). Stop inputs must be numeric literals in strictly ascending order. Returns the output value of the stop just less than the input, or the first output if the input is less than the first stop.',group:"Ramps, scales, curves","sdk-support":{"basic functionality":{js:"0.42.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},interpolate:{doc:'Produces continuous, smooth results by interpolating between pairs of input and output values ("stops"). The `input` may be any numeric expression (e.g., `["get", "population"]`). Stop inputs must be numeric literals in strictly ascending order. The output type must be `number`, `array<number>`, or `color`.\n\nInterpolation types:\n- `["linear"]`: Interpolates linearly between the pair of stops just less than and just greater than the input.\n- `["exponential", base]`: Interpolates exponentially between the stops just less than and just greater than the input. `base` controls the rate at which the output increases: higher values make the output increase more towards the high end of the range. With values close to 1 the output increases linearly.\n- `["cubic-bezier", x1, y1, x2, y2]`: Interpolates using the cubic bezier curve defined by the given control points.',group:"Ramps, scales, curves","sdk-support":{"basic functionality":{js:"0.42.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"interpolate-hcl":{doc:'Produces continuous, smooth results by interpolating between pairs of input and output values ("stops"). Works like `interpolate`, but the output type must be `color`, and the interpolation is performed in the Hue-Chroma-Luminance color space.',group:"Ramps, scales, curves","sdk-support":{"basic functionality":{js:"0.49.0"}}},"interpolate-lab":{doc:'Produces continuous, smooth results by interpolating between pairs of input and output values ("stops"). Works like `interpolate`, but the output type must be `color`, and the interpolation is performed in the CIELAB color space.',group:"Ramps, scales, curves","sdk-support":{"basic functionality":{js:"0.49.0"}}},ln2:{doc:"Returns mathematical constant ln(2).",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},pi:{doc:"Returns the mathematical constant pi.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},e:{doc:"Returns the mathematical constant e.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},typeof:{doc:"Returns a string describing the type of the given value.",group:"Types","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},string:{doc:"Asserts that the input value is a string. If multiple values are provided, each one is evaluated in order until a string is obtained. If none of the inputs are strings, the expression is an error.",group:"Types","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},number:{doc:"Asserts that the input value is a number. If multiple values are provided, each one is evaluated in order until a number is obtained. If none of the inputs are numbers, the expression is an error.",group:"Types","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},boolean:{doc:"Asserts that the input value is a boolean. If multiple values are provided, each one is evaluated in order until a boolean is obtained. If none of the inputs are booleans, the expression is an error.",group:"Types","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},object:{doc:"Asserts that the input value is an object. If multiple values are provided, each one is evaluated in order until an object is obtained. If none of the inputs are objects, the expression is an error.",group:"Types","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},collator:{doc:"Returns a `collator` for use in locale-dependent comparison operations. The `case-sensitive` and `diacritic-sensitive` options default to `false`. The `locale` argument specifies the IETF language tag of the locale to use. If none is provided, the default locale is used. If the requested locale is not available, the `collator` will use a system-defined fallback locale. Use `resolved-locale` to test the results of locale fallback behavior.",group:"Types","sdk-support":{"basic functionality":{js:"0.45.0",android:"6.5.0",ios:"4.2.0",macos:"0.9.0"}}},format:{doc:'Returns a `formatted` string for displaying mixed-format text in the `text-field` property. The input may contain a string literal or expression, including an [`\'image\'`](#types-image) expression. Strings may be followed by a style override object that supports the following properties:\n- `"text-font"`: Overrides the font stack specified by the root layout property.\n- `"text-color"`: Overrides the color specified by the root paint property.\n- `"font-scale"`: Applies a scaling factor on `text-size` as specified by the root layout property.',group:"Types","sdk-support":{"basic functionality":{js:"0.48.0",android:"6.7.0",ios:"4.6.0",macos:"0.12.0"},"text-font":{js:"0.48.0",android:"6.7.0",ios:"4.6.0",macos:"0.12.0"},"font-scale":{js:"0.48.0",android:"6.7.0",ios:"4.6.0",macos:"0.12.0"},"text-color":{js:"1.3.0",android:"7.3.0",ios:"4.10.0",macos:"0.14.0"},image:{js:"1.6.0",android:"8.6.0",ios:"5.7.0",macos:"0.15.0"}}},image:{doc:"Returns a [`ResolvedImage`](/mapbox-gl-js/style-spec/types/#resolvedimage) for use in [`icon-image`](/mapbox-gl-js/style-spec/layers/#layout-symbol-icon-image), `*-pattern` entries, and as a section in the [`'format'`](#types-format) expression. A [`'coalesce'`](#coalesce) expression containing `image` expressions will evaluate to the first listed image that is currently in the style. This validation process is synchronous and requires the image to have been added to the style before requesting it in the `'image'` argument.",group:"Types","sdk-support":{"basic functionality":{js:"1.4.0",android:"8.6.0",ios:"5.7.0",macos:"0.15.0"}}},"number-format":{doc:"Converts the input number into a string representation using the providing formatting rules. If set, the `locale` argument specifies the locale to use, as a BCP 47 language tag. If set, the `currency` argument specifies an ISO 4217 code to use for currency-style formatting. If set, the `unit` argument specifies a [simple ECMAScript unit](https://tc39.es/proposal-unified-intl-numberformat/section6/locales-currencies-tz_proposed_out.html#sec-issanctionedsimpleunitidentifier) to use for unit-style formatting. If set, the `min-fraction-digits` and `max-fraction-digits` arguments specify the minimum and maximum number of fractional digits to include.",group:"Types","sdk-support":{"basic functionality":{js:"0.54.0",android:"8.4.0",ios:"5.4.0",macos:"0.15.0"}}},"to-string":{doc:'Converts the input value to a string. If the input is `null`, the result is `""`. If the input is a [`boolean`](#types-boolean), the result is `"true"` or `"false"`. If the input is a number, it is converted to a string as specified by the ["NumberToString" algorithm](https://tc39.github.io/ecma262/#sec-tostring-applied-to-the-number-type) of the ECMAScript Language Specification. If the input is a [`color`](#color), it is converted to a string of the form `"rgba(r,g,b,a)"`, where `r`, `g`, and `b` are numerals ranging from 0 to 255, and `a` ranges from 0 to 1. If the input is an [`\'image\'`](#types-image) expression, `\'to-string\'` returns the image name. Otherwise, the input is converted to a string in the format specified by the [`JSON.stringify`](https://tc39.github.io/ecma262/#sec-json.stringify) function of the ECMAScript Language Specification.',group:"Types","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"to-number":{doc:'Converts the input value to a number, if possible. If the input is `null` or `false`, the result is 0. If the input is `true`, the result is 1. If the input is a string, it is converted to a number as specified by the ["ToNumber Applied to the String Type" algorithm](https://tc39.github.io/ecma262/#sec-tonumber-applied-to-the-string-type) of the ECMAScript Language Specification. If multiple values are provided, each one is evaluated in order until the first successful conversion is obtained. If none of the inputs can be converted, the expression is an error.',group:"Types","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"to-boolean":{doc:"Converts the input value to a boolean. The result is `false` when then input is an empty string, 0, `false`, `null`, or `NaN`; otherwise it is `true`.",group:"Types","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"to-rgba":{doc:"Returns a four-element array containing the input color's red, green, blue, and alpha components, in that order.",group:"Color","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"to-color":{doc:"Converts the input value to a color. If multiple values are provided, each one is evaluated in order until the first successful conversion is obtained. If none of the inputs can be converted, the expression is an error.",group:"Types","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},rgb:{doc:"Creates a color value from red, green, and blue components, which must range between 0 and 255, and an alpha component of 1. If any component is out of range, the expression is an error.",group:"Color","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},rgba:{doc:"Creates a color value from red, green, blue components, which must range between 0 and 255, and an alpha component which must range between 0 and 1. If any component is out of range, the expression is an error.",group:"Color","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},get:{doc:"Retrieves a property value from the current feature's properties, or from another object if a second argument is provided. Returns `null` if the requested property is missing.",group:"Lookup","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},has:{doc:"Tests for the presence of an property value in the current feature's properties, or from another object if a second argument is provided.",group:"Lookup","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},length:{doc:"Returns the length of an array or string.",group:"Lookup","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},properties:{doc:'Returns the feature properties object.  Note that in some cases, it may be more efficient to use `["get", "property_name"]` directly.',group:"Feature data","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"feature-state":{doc:"Retrieves a property value from the current feature's state. Returns `null` if the requested property is not present on the feature's state. A feature's state is not part of the GeoJSON or vector tile data, and must be set programmatically on each feature. Features are identified by their `id` attribute, which must be an integer or a string that can be cast to an integer. Note that [\"feature-state\"] can only be used with paint properties that support data-driven styling.",group:"Feature data","sdk-support":{"basic functionality":{js:"0.46.0",android:"10.0.0",ios:"10.0.0"}}},"geometry-type":{doc:"Returns the feature's geometry type: `Point`, `LineString` or `Polygon`. `Multi*` feature types return the singular forms.",group:"Feature data","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},id:{doc:"Returns the feature's id, if it has one.",group:"Feature data","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},zoom:{doc:'Returns the current zoom level.  Note that in style layout and paint properties, ["zoom"] may only appear as the input to a top-level "step" or "interpolate" expression.',group:"Camera","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},pitch:{doc:'Returns the current pitch in degrees. `["pitch"]` may only be used in the `filter` expression for a `symbol` layer.',group:"Camera","sdk-support":{"basic functionality":{js:"2.6.0",android:"10.9.0",ios:"10.9.0"}}},"distance-from-center":{doc:'Returns the distance of a `symbol` instance from the center of the map. The distance is measured in pixels divided by the height of the map container. It measures 0 at the center, decreases towards the camera and increase away from the camera. For example, if the height of the map is 1000px, a value of -1 means 1000px away from the center towards the camera, and a value of 1 means a distance of 1000px away from the camera from the center. `["distance-from-center"]` may only be used in the `filter` expression for a `symbol` layer.',group:"Camera","sdk-support":{"basic functionality":{js:"2.6.0",android:"10.9.0",ios:"10.9.0"}}},"heatmap-density":{doc:"Returns the kernel density estimation of a pixel in a heatmap layer, which is a relative measure of how many data points are crowded around a particular pixel. Can only be used in the `heatmap-color` property.",group:"Heatmap","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"line-progress":{doc:"Returns the progress along a gradient line. Can only be used in the `line-gradient` property.",group:"Feature data","sdk-support":{"basic functionality":{js:"0.45.0",android:"6.5.0",ios:"4.6.0",macos:"0.12.0"}}},"sky-radial-progress":{doc:"Returns the distance of a point on the sky from the sun position. Returns 0 at sun position and 1 when the distance reaches `sky-gradient-radius`. Can only be used in the `sky-gradient` property.",group:"sky","sdk-support":{"basic functionality":{js:"2.0.0",ios:"10.0.0",android:"10.0.0"}}},accumulated:{doc:"Returns the value of a cluster property accumulated so far. Can only be used in the `clusterProperties` option of a clustered GeoJSON source.",group:"Feature data","sdk-support":{"basic functionality":{js:"0.53.0",android:"8.4.0",ios:"5.5.0",macos:"0.15.0"}}},"+":{doc:"Returns the sum of the inputs.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"*":{doc:"Returns the product of the inputs.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"-":{doc:"For two inputs, returns the result of subtracting the second input from the first. For a single input, returns the result of subtracting it from 0.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"/":{doc:"Returns the result of floating point division of the first input by the second.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"%":{doc:"Returns the remainder after integer division of the first input by the second.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"^":{doc:"Returns the result of raising the first input to the power specified by the second.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},sqrt:{doc:"Returns the square root of the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.42.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},log10:{doc:"Returns the base-ten logarithm of the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},ln:{doc:"Returns the natural logarithm of the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},log2:{doc:"Returns the base-two logarithm of the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},sin:{doc:"Returns the sine of the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},cos:{doc:"Returns the cosine of the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},tan:{doc:"Returns the tangent of the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},asin:{doc:"Returns the arcsine of the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},acos:{doc:"Returns the arccosine of the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},atan:{doc:"Returns the arctangent of the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},min:{doc:"Returns the minimum value of the inputs.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},max:{doc:"Returns the maximum value of the inputs.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},round:{doc:'Rounds the input to the nearest integer. Halfway values are rounded away from zero. For example, `["round", -1.5]` evaluates to -2.',group:"Math","sdk-support":{"basic functionality":{js:"0.45.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},abs:{doc:"Returns the absolute value of the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.45.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},ceil:{doc:"Returns the smallest integer that is greater than or equal to the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.45.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},floor:{doc:"Returns the largest integer that is less than or equal to the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.45.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},distance:{doc:"Returns the shortest distance in meters between the evaluated feature and the input geometry. The input value can be a valid GeoJSON of type `Point`, `MultiPoint`, `LineString`, `MultiLineString`, `Polygon`, `MultiPolygon`, `Feature`, or `FeatureCollection`. Distance values returned may vary in precision due to loss in precision from encoding geometries, particularly below zoom level 13.",group:"Math","sdk-support":{"basic functionality":{android:"9.2.0",ios:"5.9.0",macos:"0.16.0"}}},"==":{doc:"Returns `true` if the input values are equal, `false` otherwise. The comparison is strictly typed: values of different runtime types are always considered unequal. Cases where the types are known to be different at parse time are considered invalid and will produce a parse error. Accepts an optional `collator` argument to control locale-dependent string comparisons.",group:"Decision","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"},collator:{js:"0.45.0",android:"6.5.0",ios:"4.2.0",macos:"0.9.0"}}},"!=":{doc:"Returns `true` if the input values are not equal, `false` otherwise. The comparison is strictly typed: values of different runtime types are always considered unequal. Cases where the types are known to be different at parse time are considered invalid and will produce a parse error. Accepts an optional `collator` argument to control locale-dependent string comparisons.",group:"Decision","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"},collator:{js:"0.45.0",android:"6.5.0",ios:"4.2.0",macos:"0.9.0"}}},">":{doc:"Returns `true` if the first input is strictly greater than the second, `false` otherwise. The arguments are required to be either both strings or both numbers; if during evaluation they are not, expression evaluation produces an error. Cases where this constraint is known not to hold at parse time are considered in valid and will produce a parse error. Accepts an optional `collator` argument to control locale-dependent string comparisons.",group:"Decision","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"},collator:{js:"0.45.0",android:"6.5.0",ios:"4.2.0",macos:"0.9.0"}}},"<":{doc:"Returns `true` if the first input is strictly less than the second, `false` otherwise. The arguments are required to be either both strings or both numbers; if during evaluation they are not, expression evaluation produces an error. Cases where this constraint is known not to hold at parse time are considered in valid and will produce a parse error. Accepts an optional `collator` argument to control locale-dependent string comparisons.",group:"Decision","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"},collator:{js:"0.45.0",android:"6.5.0",ios:"4.2.0",macos:"0.9.0"}}},">=":{doc:"Returns `true` if the first input is greater than or equal to the second, `false` otherwise. The arguments are required to be either both strings or both numbers; if during evaluation they are not, expression evaluation produces an error. Cases where this constraint is known not to hold at parse time are considered in valid and will produce a parse error. Accepts an optional `collator` argument to control locale-dependent string comparisons.",group:"Decision","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"},collator:{js:"0.45.0",android:"6.5.0",ios:"4.2.0",macos:"0.9.0"}}},"<=":{doc:"Returns `true` if the first input is less than or equal to the second, `false` otherwise. The arguments are required to be either both strings or both numbers; if during evaluation they are not, expression evaluation produces an error. Cases where this constraint is known not to hold at parse time are considered in valid and will produce a parse error. Accepts an optional `collator` argument to control locale-dependent string comparisons.",group:"Decision","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"},collator:{js:"0.45.0",android:"6.5.0",ios:"4.2.0",macos:"0.9.0"}}},all:{doc:"Returns `true` if all the inputs are `true`, `false` otherwise. The inputs are evaluated in order, and evaluation is short-circuiting: once an input expression evaluates to `false`, the result is `false` and no further input expressions are evaluated.",group:"Decision","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},any:{doc:"Returns `true` if any of the inputs are `true`, `false` otherwise. The inputs are evaluated in order, and evaluation is short-circuiting: once an input expression evaluates to `true`, the result is `true` and no further input expressions are evaluated.",group:"Decision","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"!":{doc:"Logical negation. Returns `true` if the input is `false`, and `false` if the input is `true`.",group:"Decision","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},within:{doc:"Returns `true` if the evaluated feature is fully contained inside a boundary of the input geometry, `false` otherwise. The input value can be a valid GeoJSON of type `Polygon`, `MultiPolygon`, `Feature`, or `FeatureCollection`. Supported features for evaluation:\n- `Point`: Returns `false` if a point is on the boundary or falls outside the boundary.\n- `LineString`: Returns `false` if any part of a line falls outside the boundary, the line intersects the boundary, or a line's endpoint is on the boundary.",group:"Decision","sdk-support":{"basic functionality":{js:"1.9.0",android:"9.1.0",ios:"5.8.0",macos:"0.15.0"}}},"is-supported-script":{doc:"Returns `true` if the input string is expected to render legibly. Returns `false` if the input string contains sections that cannot be rendered without potential loss of meaning (e.g. Indic scripts that require complex text shaping, or right-to-left scripts if the the `mapbox-gl-rtl-text` plugin is not in use in Mapbox GL JS).",group:"String","sdk-support":{"basic functionality":{js:"0.45.0",android:"6.6.0",ios:"4.1.0",macos:"0.8.0"}}},upcase:{doc:"Returns the input string converted to uppercase. Follows the Unicode Default Case Conversion algorithm and the locale-insensitive case mappings in the Unicode Character Database.",group:"String","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},downcase:{doc:"Returns the input string converted to lowercase. Follows the Unicode Default Case Conversion algorithm and the locale-insensitive case mappings in the Unicode Character Database.",group:"String","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},concat:{doc:"Returns a `string` consisting of the concatenation of the inputs. Each input is converted to a string as if by `to-string`.",group:"String","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"resolved-locale":{doc:"Returns the IETF language tag of the locale being used by the provided `collator`. This can be used to determine the default system locale, or to determine if a requested locale was successfully loaded.",group:"String","sdk-support":{"basic functionality":{js:"0.45.0",android:"6.5.0",ios:"4.2.0",macos:"0.9.0"}}}}},PE={range:{type:"array",default:[.5,10],minimum:-20,maximum:20,length:2,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},doc:"The start and end distance range in which fog fades from fully transparent to fully opaque. The distance to the point at the center of the map is defined as zero, so that negative range values are closer to the camera, and positive values are farther away.",example:[.5,10],"sdk-support":{"basic functionality":{js:"2.3.0",android:"10.6.0",ios:"10.6.0"}}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0,doc:"The color of the atmosphere region immediately below the horizon and within the `range` and above the horizon and within `horizon-blend`. Using opacity is recommended only for smoothly transitioning fog on/off as anything less than 100% opacity results in more tiles loaded and drawn.","sdk-support":{"basic functionality":{js:"2.3.0",android:"10.6.0",ios:"10.6.0"}}},"high-color":{type:"color","property-type":"data-constant",default:"#245cdf",expression:{interpolated:!0,parameters:["zoom"]},transition:!0,doc:"The color of the atmosphere region above the horizon, `high-color` extends further above the horizon than the `color` property and its spread can be controlled with `horizon-blend`. The opacity can be set to `0` to remove the high atmosphere color contribution.","sdk-support":{"basic functionality":{js:"2.9.0",android:"10.6.0",ios:"10.6.0"}}},"space-color":{type:"color","property-type":"data-constant",default:["interpolate",["linear"],["zoom"],4,"#010b19",7,"#367ab9"],expression:{interpolated:!0,parameters:["zoom"]},transition:!0,doc:"The color of the region above the horizon and after the end of the `horizon-blend` contribution. The opacity can be set to `0` to have a transparent background.","sdk-support":{"basic functionality":{js:"2.9.0",android:"10.6.0",ios:"10.6.0"}}},"horizon-blend":{type:"number","property-type":"data-constant",default:["interpolate",["linear"],["zoom"],4,.2,7,.1],minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0,doc:"Horizon blend applies a smooth fade from the color of the atmosphere to the color of space. A value of zero leaves a sharp transition from atmosphere to space. Increasing the value blends the color of atmosphere into increasingly high angles of the sky.","sdk-support":{"basic functionality":{js:"2.3.0",android:"10.6.0",ios:"10.6.0"}}},"star-intensity":{type:"number","property-type":"data-constant",default:["interpolate",["linear"],["zoom"],5,.35,6,0],minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0,doc:"A value controlling the star intensity where `0` will show no stars and `1` will show stars at their maximum intensity.","sdk-support":{"basic functionality":{js:"2.9.0",android:"10.6.0",ios:"10.6.0"}}}},ME={anchor:{type:"enum",default:"viewport",values:{map:{doc:"The position of the light source is aligned to the rotation of the map."},viewport:{doc:"The position of the light source is aligned to the rotation of the viewport."}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]},doc:"Whether extruded geometries are lit relative to the map or viewport.",example:"map","sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},doc:"Position of the light source relative to lit (extruded) geometries, in [r radial coordinate, a azimuthal angle, p polar angle] where r indicates the distance from the center of the base of an object to its light, a indicates the position of the light relative to 0 (0 when `light.anchor` is set to `viewport` corresponds to the top of the viewport, or 0 when `light.anchor` is set to `map` corresponds to due north, and degrees proceed clockwise), and p indicates the height of the light (from 0, directly above, to 180, directly below).",example:[1.5,90,80],"sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0,doc:"Color tint for lighting extruded geometries.","sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}}},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0,doc:"Intensity of lighting (on a scale from 0 to 1). Higher numbers will present as more extreme contrast.","sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}}}},DE={name:{type:"enum",values:{albers:{doc:"An Albers equal-area projection centered on the continental United States. You can configure the projection for a different region by setting `center` and `parallels` properties. You may want to set max bounds to constrain the map to the relevant region."},equalEarth:{doc:"An Equal Earth projection."},equirectangular:{doc:"An Equirectangular projection. This projection is very similar to the Plate Carre projection."},lambertConformalConic:{doc:"A Lambert conformal conic projection. You can configure the projection for a region by setting `center` and `parallels` properties. You may want to set max bounds to constrain the map to the relevant region."},mercator:{doc:"The Mercator projection is the default projection."},naturalEarth:{doc:"A Natural Earth projection."},winkelTripel:{doc:"A Winkel Tripel projection."},globe:{doc:"A globe projection."}},default:"mercator",doc:"The name of the projection to be used for rendering the map.",required:!0,"sdk-support":{"basic functionality":{js:"2.6.0"}}},center:{type:"array",length:2,value:"number","property-type":"data-constant",minimum:[-180,-90],maximum:[180,90],transition:!1,doc:"The reference longitude and latitude of the projection. `center` takes the form of [lng, lat]. This property is only configurable for conic projections (Albers and Lambert Conformal Conic). All other projections are centered on [0, 0].",example:[-96,37.5],requires:[{name:["albers","lambertConformalConic"]}],"sdk-support":{"basic functionality":{js:"2.6.0"}}},parallels:{type:"array",length:2,value:"number","property-type":"data-constant",minimum:[-90,-90],maximum:[90,90],transition:!1,doc:"The standard parallels of the projection, denoting the desired latitude range with minimal distortion. `parallels` takes the form of [lat0, lat1]. This property is only configurable for conic projections (Albers and Lambert Conformal Conic).",example:[29.5,45.5],requires:[{name:["albers","lambertConformalConic"]}],"sdk-support":{"basic functionality":{js:"2.6.0"}}}},zE={source:{type:"string",doc:"Name of a source of `raster_dem` type to be used for terrain elevation.",required:!0,"sdk-support":{"basic functionality":{js:"2.0.0",ios:"10.0.0",android:"10.0.0"}}},exaggeration:{type:"number","property-type":"data-constant",default:1,minimum:0,maximum:1e3,expression:{interpolated:!0,parameters:["zoom"]},transition:!0,doc:"Exaggerates the elevation of the terrain by multiplying the data from the DEM with this value.",requires:["source"],"sdk-support":{"basic functionality":{js:"2.0.0",ios:"10.0.0",android:"10.0.0"}}}},NE=["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background","paint_sky"],RE={"fill-antialias":{type:"boolean",default:!0,doc:"Whether or not the fill should be antialiased.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,doc:"The opacity of the entire fill layer. In contrast to the `fill-color`, this value will also affect the 1px stroke around the fill, if the stroke is used.",transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.21.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",doc:"The color of the filled part of this layer. This color can be specified as `rgba` with an alpha component and the color's opacity will not affect the opacity of the 1px stroke, if it is used.",transition:!0,requires:[{"!":"fill-pattern"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.19.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",doc:"The outline color of the fill. Matches the value of `fill-color` if unspecified.",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.19.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",doc:"The geometry's offset. Values are [x, y] where negatives indicate left and up, respectively.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{doc:"The fill is translated relative to the map."},viewport:{doc:"The fill is translated relative to the viewport."}},doc:"Controls the frame of reference for `fill-translate`.",default:"map",requires:["fill-translate"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,doc:"Name of image in sprite to use for drawing image fills. For seamless patterns, image width and height must be a factor of two (2, 4, 8, ..., 512). Note that zoom-dependent expressions will be evaluated only at integer zoom levels.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.49.0",android:"6.5.0",macos:"0.11.0",ios:"4.4.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},OE={"line-opacity":{type:"number",doc:"The opacity at which the line will be drawn.",default:1,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.29.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",doc:"The color with which the line will be drawn.",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.23.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",doc:"The geometry's offset. Values are [x, y] where negatives indicate left and up, respectively.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{doc:"The line is translated relative to the map."},viewport:{doc:"The line is translated relative to the viewport."}},doc:"Controls the frame of reference for `line-translate`.",default:"map",requires:["line-translate"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",doc:"Stroke thickness.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.39.0",android:"5.2.0",ios:"3.7.0",macos:"0.6.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,doc:"Draws a line casing outside of a line's actual path. Value indicates the width of the inner gap.",transition:!0,units:"pixels","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.29.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,doc:"The line's offset. For linear features, a positive value offsets the line to the right, relative to the direction of the line, and a negative value to the left. For polygon features, a positive value results in an inset, and a negative value results in an outset.",transition:!0,units:"pixels","sdk-support":{"basic functionality":{js:"0.12.1",android:"3.0.0",ios:"3.1.0",macos:"0.1.0"},"data-driven styling":{js:"0.29.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",doc:"Blur applied to the line, in pixels.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.29.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",doc:"Specifies the lengths of the alternating dashes and gaps that form the dash pattern. The lengths are later scaled by the line width. To convert a dash length to pixels, multiply the length by the current line width. Note that GeoJSON sources with `lineMetrics: true` specified won't render dashed lines to the expected scale. Also note that zoom-dependent expressions will be evaluated only at integer zoom levels.",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"2.3.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-pattern":{type:"resolvedImage",transition:!0,doc:"Name of image in sprite to use for drawing image lines. For seamless patterns, image width must be a factor of two (2, 4, 8, ..., 512). Note that zoom-dependent expressions will be evaluated only at integer zoom levels.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.49.0",android:"6.5.0",macos:"0.11.0",ios:"4.4.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",doc:'Defines a gradient with which to color a line feature. Can only be used with GeoJSON sources that specify `"lineMetrics": true`.',transition:!1,requires:[{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],"sdk-support":{"basic functionality":{js:"0.45.0",android:"6.5.0",ios:"4.4.0",macos:"0.11.0"},"data-driven styling":{}},expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"},"line-trim-offset":{type:"array",value:"number",doc:"The line part between [trim-start, trim-end] will be marked as transparent to make a route vanishing effect. The line trim-off offset is based on the whole line range [0.0, 1.0].",length:2,default:[0,0],minimum:[0,0],maximum:[1,1],transition:!1,requires:[{source:"geojson",has:{lineMetrics:!0}}],"sdk-support":{"basic functionality":{js:"2.9.0",android:"10.5.0",ios:"10.5.0",macos:"10.5.0"}},"property-type":"constant"}},FE={"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",doc:"Circle radius.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.18.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",doc:"The fill color of the circle.",transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.18.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,doc:"Amount to blur the circle. 1 blurs the circle such that only the centerpoint is full opacity.",transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.20.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",doc:"The opacity at which the circle will be drawn.",default:1,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.20.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",doc:"The geometry's offset. Values are [x, y] where negatives indicate left and up, respectively.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{doc:"The circle is translated relative to the map."},viewport:{doc:"The circle is translated relative to the viewport."}},doc:"Controls the frame of reference for `circle-translate`.",default:"map",requires:["circle-translate"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{doc:"Circles are scaled according to their apparent distance to the camera."},viewport:{doc:"Circles are not scaled."}},default:"map",doc:"Controls the scaling behavior of the circle when the map is pitched.","sdk-support":{"basic functionality":{js:"0.21.0",android:"4.2.0",ios:"3.4.0",macos:"0.2.1"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{doc:"The circle is aligned to the plane of the map."},viewport:{doc:"The circle is aligned to the plane of the viewport."}},default:"viewport",doc:"Orientation of circle when map is pitched.","sdk-support":{"basic functionality":{js:"0.39.0",android:"5.2.0",ios:"3.7.0",macos:"0.6.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",doc:"The width of the circle's stroke. Strokes are placed outside of the `circle-radius`.","sdk-support":{"basic functionality":{js:"0.29.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"},"data-driven styling":{js:"0.29.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",doc:"The stroke color of the circle.",transition:!0,"sdk-support":{"basic functionality":{js:"0.29.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"},"data-driven styling":{js:"0.29.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",doc:"The opacity of the circle's stroke.",default:1,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.29.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"},"data-driven styling":{js:"0.29.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},BE={"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",doc:"Radius of influence of one heatmap point in pixels. Increasing the value makes the heatmap smoother, but less detailed. `queryRenderedFeatures` on heatmap layers will return points within this radius.","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"},"data-driven styling":{js:"0.43.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,doc:"A measure of how much an individual point contributes to the heatmap. A value of 10 would be equivalent to having 10 points of weight 1 in the same spot. Especially useful when combined with clustering.","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"},"data-driven styling":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,doc:"Similar to `heatmap-weight` but controls the intensity of the heatmap globally. Primarily used for adjusting the heatmap based on zoom level.","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],doc:'Defines the color of each pixel based on its density value in a heatmap.  Should be an expression that uses `["heatmap-density"]` as input.',transition:!1,"sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"},"data-driven styling":{}},expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",doc:"The global opacity at which the heatmap layer will be drawn.",default:1,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},jE={"icon-opacity":{doc:"The opacity at which the icon will be drawn.",type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,doc:"The color of the icon. This can only be used with [SDF icons](/help/troubleshooting/using-recolorable-images-in-mapbox-maps/).",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,doc:"The color of the icon's halo. Icon halos can only be used with [SDF icons](/help/troubleshooting/using-recolorable-images-in-mapbox-maps/).",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",doc:"Distance of halo to the icon outline.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",doc:"Fade out the halo towards the outside.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",doc:"Distance that the icon's anchor is moved from its original placement. Positive values indicate right and down, while negative values indicate left and up.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{doc:"Icons are translated relative to the map."},viewport:{doc:"Icons are translated relative to the viewport."}},doc:"Controls the frame of reference for `icon-translate`.",default:"map",requires:["icon-image","icon-translate"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",doc:"The opacity at which the text will be drawn.",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",doc:"The color with which the text will be drawn.",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,doc:"The color of the text's halo, which helps it stand out from backgrounds.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",doc:"Distance of halo to the font outline. Max text halo width is 1/4 of the font-size.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",doc:"The halo's fadeout distance towards the outside.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",doc:"Distance that the text's anchor is moved from its original placement. Positive values indicate right and down, while negative values indicate left and up.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{doc:"The text is translated relative to the map."},viewport:{doc:"The text is translated relative to the viewport."}},doc:"Controls the frame of reference for `text-translate`.",default:"map",requires:["text-field","text-translate"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},UE={"raster-opacity":{type:"number",doc:"The opacity at which the image will be drawn.",default:1,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",doc:"Rotates hues around the color wheel.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",doc:"Increase or reduce the brightness of the image. The value is the minimum brightness.",default:0,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",doc:"Increase or reduce the brightness of the image. The value is the maximum brightness.",default:1,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",doc:"Increase or reduce the saturation of the image.",default:0,minimum:-1,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",doc:"Increase or reduce the contrast of the image.",default:0,minimum:-1,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",doc:"The resampling/interpolation method to use for overscaling, also known as texture magnification filter",values:{linear:{doc:"(Bi)linear filtering interpolates pixel values using the weighted average of the four closest original source pixels creating a smooth but blurry look when overscaled"},nearest:{doc:"Nearest neighbor filtering interpolates pixel values using the nearest original source pixel creating a sharp but pixelated look when overscaled"}},default:"linear","sdk-support":{"basic functionality":{js:"0.47.0",android:"6.3.0",ios:"4.2.0",macos:"0.9.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",doc:"Fade duration when a new tile is added.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},qE={"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,doc:"The direction of the light source used to generate the hillshading with 0 as the top of the viewport if `hillshade-illumination-anchor` is set to `viewport` and due north if `hillshade-illumination-anchor` is set to `map`.",transition:!1,"sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{doc:"The hillshade illumination is relative to the north direction."},viewport:{doc:"The hillshade illumination is relative to the top of the viewport."}},default:"viewport",doc:"Direction of light source when map is rotated.","sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",doc:"Intensity of the hillshade",default:.5,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",doc:"The shading color of areas that face away from the light source.",transition:!0,"sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",doc:"The shading color of areas that faces towards the light source.",transition:!0,"sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",doc:"The shading color used to accentuate rugged terrain like sharp cliffs and gorges.",transition:!0,"sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},VE={"background-color":{type:"color",default:"#000000",doc:"The color with which the background will be drawn.",transition:!0,requires:[{"!":"background-pattern"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,doc:"Name of image in sprite to use for drawing an image background. For seamless patterns, image width and height must be a factor of two (2, 4, 8, ..., 512). Note that zoom-dependent expressions will be evaluated only at integer zoom levels.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,doc:"The opacity at which the background will be drawn.",transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},$E={"sky-type":{type:"enum",values:{gradient:{doc:"Renders the sky with a gradient that can be configured with `sky-gradient-radius` and `sky-gradient`."},atmosphere:{doc:"Renders the sky with a simulated atmospheric scattering algorithm, the sun direction can be attached to the light position or explicitly set through `sky-atmosphere-sun`."}},default:"atmosphere",doc:"The type of the sky","sdk-support":{"basic functionality":{js:"2.0.0",ios:"10.0.0",android:"10.0.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun":{type:"array",value:"number",length:2,units:"degrees",minimum:[0,0],maximum:[360,180],transition:!1,doc:"Position of the sun center [a azimuthal angle, p polar angle]. The azimuthal angle indicates the position of the sun relative to 0 north, where degrees proceed clockwise. The polar angle indicates the height of the sun, where 0 is directly above, at zenith, and 90 at the horizon. When this property is ommitted, the sun center is directly inherited from the light position.","sdk-support":{"basic functionality":{js:"2.0.0",ios:"10.0.0",android:"10.0.0"}},requires:[{"sky-type":"atmosphere"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun-intensity":{type:"number",requires:[{"sky-type":"atmosphere"}],default:10,minimum:0,maximum:100,transition:!1,doc:"Intensity of the sun as a light source in the atmosphere (on a scale from 0 to a 100). Setting higher values will brighten up the sky.","sdk-support":{"basic functionality":{js:"2.0.0",ios:"10.0.0",android:"10.0.0"}},"property-type":"data-constant"},"sky-gradient-center":{type:"array",requires:[{"sky-type":"gradient"}],value:"number",default:[0,0],length:2,units:"degrees",minimum:[0,0],maximum:[360,180],transition:!1,doc:"Position of the gradient center [a azimuthal angle, p polar angle]. The azimuthal angle indicates the position of the gradient center relative to 0 north, where degrees proceed clockwise. The polar angle indicates the height of the gradient center, where 0 is directly above, at zenith, and 90 at the horizon.","sdk-support":{"basic functionality":{js:"2.0.0",ios:"10.0.0",android:"10.0.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"sky-gradient-radius":{type:"number",requires:[{"sky-type":"gradient"}],default:90,minimum:0,maximum:180,transition:!1,doc:"The angular distance (measured in degrees) from `sky-gradient-center` up to which the gradient extends. A value of 180 causes the gradient to wrap around to the opposite direction from `sky-gradient-center`.","sdk-support":{"basic functionality":{js:"2.0.0",ios:"10.0.0",android:"10.0.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"sky-gradient":{type:"color",default:["interpolate",["linear"],["sky-radial-progress"],.8,"#87ceeb",1,"white"],doc:"Defines a radial color gradient with which to color the sky. The color values can be interpolated with an expression using `sky-radial-progress`. The range [0, 1] for the interpolant covers a radial distance (in degrees) of [0, `sky-gradient-radius`] centered at the position specified by `sky-gradient-center`.",transition:!1,requires:[{"sky-type":"gradient"}],"sdk-support":{"basic functionality":{js:"2.0.0",ios:"10.0.0",android:"10.0.0"},"data-driven styling":{}},expression:{interpolated:!0,parameters:["sky-radial-progress"]},"property-type":"color-ramp"},"sky-atmosphere-halo-color":{type:"color",default:"white",doc:"A color applied to the atmosphere sun halo. The alpha channel describes how strongly the sun halo is represented in an atmosphere sky layer.",transition:!1,requires:[{"sky-type":"atmosphere"}],"sdk-support":{"basic functionality":{js:"2.0.0",ios:"10.0.0",android:"10.0.0"}},"property-type":"data-constant"},"sky-atmosphere-color":{type:"color",default:"white",doc:"A color used to tweak the main atmospheric scattering coefficients. Using white applies the default coefficients giving the natural blue color to the atmosphere. This color affects how heavily the corresponding wavelength is represented during scattering. The alpha channel describes the density of the atmosphere, with 1 maximum density and 0 no density.",transition:!1,requires:[{"sky-type":"atmosphere"}],"sdk-support":{"basic functionality":{js:"2.0.0",ios:"10.0.0",android:"10.0.0"}},"property-type":"data-constant"},"sky-opacity":{type:"number",default:1,minimum:0,maximum:1,doc:"The opacity of the entire sky layer.",transition:!0,"sdk-support":{"basic functionality":{js:"2.0.0",ios:"10.0.0",android:"10.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},GE={duration:{type:"number",default:300,minimum:0,units:"milliseconds",doc:"Time allotted for transitions to complete."},delay:{type:"number",default:0,minimum:0,units:"milliseconds",doc:"Length of time before a transition begins."}},HE={"*":{type:"string",doc:"A name of a feature property to use as ID for feature state."}},WE={$version:Q9,$root:eE,sources:tE,source:rE,source_vector:nE,source_raster:iE,source_raster_dem:oE,source_geojson:aE,source_video:sE,source_image:lE,layer:uE,layout:cE,layout_background:fE,layout_sky:hE,layout_fill:pE,layout_circle:dE,layout_heatmap:mE,"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}},"property-type":"constant"},"fill-extrusion-edge-radius":{type:"number",private:!0,default:0,minimum:0,maximum:1,doc:"Radius of a fill extrusion edge in meters. If not zero, rounds extrusion edges for a smoother appearance.","sdk-support":{"basic functionality":{js:"v2.10.0",android:"10.7.0",ios:"10.7.0"}},"property-type":"constant"}},layout_line:gE,layout_symbol:yE,layout_raster:vE,layout_hillshade:_E,filter:bE,filter_symbol:wE,filter_fill:xE,filter_line:kE,filter_circle:AE,"filter_fill-extrusion":{type:"boolean",doc:'Expression which determines whether or not to display a Polygon. Fill-extrusion layer does NOT support dynamic filtering, meaning this expression can NOT use the `["pitch"]` and `["distance-from-center"]` expressions to reference the current state of the view.',default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}},filter_heatmap:EE,filter_operator:SE,geometry_type:CE,function:{expression:{type:"expression",doc:"An expression."},stops:{type:"array",doc:"An array of stops.",value:"function_stop"},base:{type:"number",default:1,minimum:0,doc:"The exponential base of the interpolation curve. It controls the rate at which the result increases. Higher values make the result increase more towards the high end of the range. With `1` the stops are interpolated linearly."},property:{type:"string",doc:"The name of a feature property to use as the function input.",default:"$zoom"},type:{type:"enum",values:{identity:{doc:"Return the input value as the output value."},exponential:{doc:"Generate an output by interpolating between stops just less than and just greater than the function input."},interval:{doc:"Return the output value of the stop just less than the function input."},categorical:{doc:"Return the output value of the stop equal to the function input."}},doc:"The interpolation strategy to use in function evaluation.",default:"exponential"},colorSpace:{type:"enum",values:{rgb:{doc:"Use the RGB color space to interpolate color values"},lab:{doc:"Use the LAB color space to interpolate color values."},hcl:{doc:"Use the HCL color space to interpolate color values, interpolating the Hue, Chroma, and Luminance channels individually."}},doc:"The color space in which colors interpolated. Interpolating colors in perceptual color spaces like LAB and HCL tend to produce color ramps that look more consistent and produce colors that can be differentiated more easily than those interpolated in RGB space.",default:"rgb"},default:{type:"*",required:!1,doc:`A value to serve as a fallback function result when a value isn't otherwise available. It is used in the following circumstances:
* In categorical functions, when the feature value does not match any of the stop domain values.
* In property and zoom-and-property functions, when a feature does not contain a value for the specified property.
* In identity functions, when the feature value is not valid for the style property (for example, if the function is being used for a \`circle-color\` property but the feature property value is not a string or not a valid color).
* In interval or exponential property and zoom-and-property functions, when the feature value is not numeric.
If no default is provided, the style property's default is used in these circumstances.`}},function_stop:IE,expression:TE,expression_name:LE,fog:PE,light:ME,projection:DE,terrain:zE,paint:NE,paint_fill:RE,"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,doc:"The opacity of the entire fill extrusion layer. This is rendered on a per-layer, not per-feature, basis, and data-driven styling is not available.",transition:!0,"sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",doc:"The base color of the extruded fill. The extrusion's surfaces will be shaded differently based on this color in combination with the root `light` settings. If this color is specified as `rgba` with an alpha component, the alpha component will be ignored; use `fill-extrusion-opacity` to set layer opacity.",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],"sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"},"data-driven styling":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",doc:"The geometry's offset. Values are [x, y] where negatives indicate left and up (on the flat plane), respectively.","sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{doc:"The fill extrusion is translated relative to the map."},viewport:{doc:"The fill extrusion is translated relative to the viewport."}},doc:"Controls the frame of reference for `fill-extrusion-translate`.",default:"map",requires:["fill-extrusion-translate"],"sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,doc:"Name of image in sprite to use for drawing images on extruded fills. For seamless patterns, image width and height must be a factor of two (2, 4, 8, ..., 512). Note that zoom-dependent expressions will be evaluated only at integer zoom levels.","sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"},"data-driven styling":{js:"0.49.0",android:"6.5.0",macos:"0.11.0",ios:"4.4.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",doc:"The height with which to extrude this layer.",transition:!0,"sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"},"data-driven styling":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",doc:"The height with which to extrude the base of this layer. Must be less than or equal to `fill-extrusion-height`.",transition:!0,requires:["fill-extrusion-height"],"sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"},"data-driven styling":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,doc:"Whether to apply a vertical gradient to the sides of a fill-extrusion layer. If true, sides will be shaded slightly darker farther down.",transition:!1,"sdk-support":{"basic functionality":{js:"0.50.0",android:"7.0.0",ios:"4.7.0",macos:"0.13.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-ambient-occlusion-intensity":{"property-type":"data-constant",type:"number",private:!0,default:0,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0,doc:"Controls the intensity of shading near ground and concave angles between walls. Default value 0.0 disables ambient occlusion and values around 0.3 provide the most plausible results for buildings.","sdk-support":{"basic functionality":{js:"2.10.0",android:"10.7.0",ios:"10.7.0"}}},"fill-extrusion-ambient-occlusion-radius":{"property-type":"data-constant",type:"number",private:!0,default:3,minimum:0,expression:{interpolated:!0,parameters:["zoom"]},transition:!0,doc:"Shades area near ground and concave angles between walls where the radius defines only vertical impact. Default value 3.0 corresponds to height of one floor and brings the most plausible results for buildings.",requires:["fill-extrusion-edge-radius"],"sdk-support":{"basic functionality":{js:"2.10.0",android:"10.7.0",ios:"10.7.0"}}}},paint_line:OE,paint_circle:FE,paint_heatmap:BE,paint_symbol:jE,paint_raster:UE,paint_hillshade:qE,paint_background:VE,paint_sky:$E,transition:GE,"property-type":{"data-driven":{type:"property-type",doc:"Property is interpolable and can be represented using a property expression."},"cross-faded":{type:"property-type",doc:"Property is non-interpolable; rather, its values will be cross-faded to smoothly transition between integer zooms."},"cross-faded-data-driven":{type:"property-type",doc:"Property is non-interpolable; rather, its values will be cross-faded to smoothly transition between integer zooms. It can be represented using a property expression."},"color-ramp":{type:"property-type",doc:"Property should be specified using a color ramp from which the output color can be sampled based on a property calculation."},"data-constant":{type:"property-type",doc:"Property is interpolable but cannot be represented using a property expression."},constant:{type:"property-type",doc:"Property is constant across all zoom levels and property values."}},promoteId:HE},pm=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},jg={exports:{}};/*! https://mths.be/punycode v1.3.2 by @mathias */(function(e,t){(function(r){var n=t&&!t.nodeType&&t,o=e&&!e.nodeType&&e,u=typeof pm=="object"&&pm;(u.global===u||u.window===u||u.self===u)&&(r=u);var c,l=2147483647,h=36,v=1,w=26,E=38,T=700,I=72,F=128,U="-",G=/^xn--/,H=/[^\x20-\x7E]/,X=/[\x2E\u3002\uFF0E\uFF61]/g,ee={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},K=h-v,se=Math.floor,ce=String.fromCharCode,_e;function pe(Ze){throw RangeError(ee[Ze])}function Ge(Ze,He){for(var xe=Ze.length,Ne=[];xe--;)Ne[xe]=He(Ze[xe]);return Ne}function We(Ze,He){var xe=Ze.split("@"),Ne="";xe.length>1&&(Ne=xe[0]+"@",Ze=xe[1]),Ze=Ze.replace(X,".");var Pe=Ze.split("."),ft=Ge(Pe,He).join(".");return Ne+ft}function Ae(Ze){for(var He=[],xe=0,Ne=Ze.length,Pe,ft;xe<Ne;)Pe=Ze.charCodeAt(xe++),Pe>=55296&&Pe<=56319&&xe<Ne?(ft=Ze.charCodeAt(xe++),(ft&64512)==56320?He.push(((Pe&1023)<<10)+(ft&1023)+65536):(He.push(Pe),xe--)):He.push(Pe);return He}function Ie(Ze){return Ge(Ze,function(He){var xe="";return He>65535&&(He-=65536,xe+=ce(He>>>10&1023|55296),He=56320|He&1023),xe+=ce(He),xe}).join("")}function Fe(Ze){return Ze-48<10?Ze-22:Ze-65<26?Ze-65:Ze-97<26?Ze-97:h}function ot(Ze,He){return Ze+22+75*(Ze<26)-((He!=0)<<5)}function _t(Ze,He,xe){var Ne=0;for(Ze=xe?se(Ze/T):Ze>>1,Ze+=se(Ze/He);Ze>K*w>>1;Ne+=h)Ze=se(Ze/K);return se(Ne+(K+1)*Ze/(Ze+E))}function ht(Ze){var He=[],xe=Ze.length,Ne,Pe=0,ft=F,At=I,Pt,Kt,$t,br,Gt,Rr,Mr,Kr,St;for(Pt=Ze.lastIndexOf(U),Pt<0&&(Pt=0),Kt=0;Kt<Pt;++Kt)Ze.charCodeAt(Kt)>=128&&pe("not-basic"),He.push(Ze.charCodeAt(Kt));for($t=Pt>0?Pt+1:0;$t<xe;){for(br=Pe,Gt=1,Rr=h;$t>=xe&&pe("invalid-input"),Mr=Fe(Ze.charCodeAt($t++)),(Mr>=h||Mr>se((l-Pe)/Gt))&&pe("overflow"),Pe+=Mr*Gt,Kr=Rr<=At?v:Rr>=At+w?w:Rr-At,!(Mr<Kr);Rr+=h)St=h-Kr,Gt>se(l/St)&&pe("overflow"),Gt*=St;Ne=He.length+1,At=_t(Pe-br,Ne,br==0),se(Pe/Ne)>l-ft&&pe("overflow"),ft+=se(Pe/Ne),Pe%=Ne,He.splice(Pe++,0,ft)}return Ie(He)}function $e(Ze){var He,xe,Ne,Pe,ft,At,Pt,Kt,$t,br,Gt,Rr=[],Mr,Kr,St,ct;for(Ze=Ae(Ze),Mr=Ze.length,He=F,xe=0,ft=I,At=0;At<Mr;++At)Gt=Ze[At],Gt<128&&Rr.push(ce(Gt));for(Ne=Pe=Rr.length,Pe&&Rr.push(U);Ne<Mr;){for(Pt=l,At=0;At<Mr;++At)Gt=Ze[At],Gt>=He&&Gt<Pt&&(Pt=Gt);for(Kr=Ne+1,Pt-He>se((l-xe)/Kr)&&pe("overflow"),xe+=(Pt-He)*Kr,He=Pt,At=0;At<Mr;++At)if(Gt=Ze[At],Gt<He&&++xe>l&&pe("overflow"),Gt==He){for(Kt=xe,$t=h;br=$t<=ft?v:$t>=ft+w?w:$t-ft,!(Kt<br);$t+=h)ct=Kt-br,St=h-br,Rr.push(ce(ot(br+ct%St,0))),Kt=se(ct/St);Rr.push(ce(ot(Kt,0))),ft=_t(xe,Kr,Ne==Pe),xe=0,++Ne}++xe,++He}return Rr.join("")}function ut(Ze){return We(Ze,function(He){return G.test(He)?ht(He.slice(4).toLowerCase()):He})}function bt(Ze){return We(Ze,function(He){return H.test(He)?"xn--"+$e(He):He})}if(c={version:"1.3.2",ucs2:{decode:Ae,encode:Ie},decode:ht,encode:$e,toASCII:bt,toUnicode:ut},n&&o)if(e.exports==n)o.exports=c;else for(_e in c)c.hasOwnProperty(_e)&&(n[_e]=c[_e]);else r.punycode=c})(pm)})(jg,jg.exports);var ZE={isString:function(e){return typeof e=="string"},isObject:function(e){return typeof e=="object"&&e!==null},isNull:function(e){return e===null},isNullOrUndefined:function(e){return e==null}},od={};function XE(e,t){return Object.prototype.hasOwnProperty.call(e,t)}var YE=function(e,t,r,n){t=t||"&",r=r||"=";var o={};if(typeof e!="string"||e.length===0)return o;var u=/\+/g;e=e.split(t);var c=1e3;n&&typeof n.maxKeys=="number"&&(c=n.maxKeys);var l=e.length;c>0&&l>c&&(l=c);for(var h=0;h<l;++h){var v=e[h].replace(u,"%20"),w=v.indexOf(r),E,T,I,F;w>=0?(E=v.substr(0,w),T=v.substr(w+1)):(E=v,T=""),I=decodeURIComponent(E),F=decodeURIComponent(T),XE(o,I)?Array.isArray(o[I])?o[I].push(F):o[I]=[o[I],F]:o[I]=F}return o},Dp=function(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}},JE=function(e,t,r,n){return t=t||"&",r=r||"=",e===null&&(e=void 0),typeof e=="object"?Object.keys(e).map(function(o){var u=encodeURIComponent(Dp(o))+r;return Array.isArray(e[o])?e[o].map(function(c){return u+encodeURIComponent(Dp(c))}).join(t):u+encodeURIComponent(Dp(e[o]))}).join(t):n?encodeURIComponent(Dp(n))+r+encodeURIComponent(Dp(e)):""};od.decode=od.parse=YE;od.encode=od.stringify=JE;var KE=jg.exports,tf=ZE;function sf(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}var QE=/^([a-z0-9.+-]+:)/i,eS=/:[0-9]*$/,tS=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,rS=["<",">",'"',"`"," ","\r",`
`,"	"],nS=["{","}","|","\\","^","`"].concat(rS),Ug=["'"].concat(nS),zb=["%","/","?",";","#"].concat(Ug),Nb=["/","?","#"],iS=255,Rb=/^[+a-z0-9A-Z_-]{0,63}$/,oS=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,aS={javascript:!0,"javascript:":!0},qg={javascript:!0,"javascript:":!0},Xh={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},Vg=od;function sS(e,t,r){if(e&&tf.isObject(e)&&e instanceof sf)return e;var n=new sf;return n.parse(e,t,r),n}sf.prototype.parse=function(e,t,r){if(!tf.isString(e))throw new TypeError("Parameter 'url' must be a string, not "+typeof e);var n=e.indexOf("?"),o=n!==-1&&n<e.indexOf("#")?"?":"#",u=e.split(o),c=/\\/g;u[0]=u[0].replace(c,"/"),e=u.join(o);var l=e;if(l=l.trim(),!r&&e.split("#").length===1){var h=tS.exec(l);if(h)return this.path=l,this.href=l,this.pathname=h[1],h[2]?(this.search=h[2],t?this.query=Vg.parse(this.search.substr(1)):this.query=this.search.substr(1)):t&&(this.search="",this.query={}),this}var v=QE.exec(l);if(v){v=v[0];var w=v.toLowerCase();this.protocol=w,l=l.substr(v.length)}if(r||v||l.match(/^\/\/[^@\/]+@[^@\/]+/)){var E=l.substr(0,2)==="//";E&&!(v&&qg[v])&&(l=l.substr(2),this.slashes=!0)}if(!qg[v]&&(E||v&&!Xh[v])){for(var T=-1,I=0;I<Nb.length;I++){var F=l.indexOf(Nb[I]);F!==-1&&(T===-1||F<T)&&(T=F)}var U,G;T===-1?G=l.lastIndexOf("@"):G=l.lastIndexOf("@",T),G!==-1&&(U=l.slice(0,G),l=l.slice(G+1),this.auth=decodeURIComponent(U)),T=-1;for(var I=0;I<zb.length;I++){var F=l.indexOf(zb[I]);F!==-1&&(T===-1||F<T)&&(T=F)}T===-1&&(T=l.length),this.host=l.slice(0,T),l=l.slice(T),this.parseHost(),this.hostname=this.hostname||"";var H=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!H)for(var X=this.hostname.split(/\./),I=0,ee=X.length;I<ee;I++){var K=X[I];if(K&&!K.match(Rb)){for(var se="",ce=0,_e=K.length;ce<_e;ce++)K.charCodeAt(ce)>127?se+="x":se+=K[ce];if(!se.match(Rb)){var pe=X.slice(0,I),Ge=X.slice(I+1),We=K.match(oS);We&&(pe.push(We[1]),Ge.unshift(We[2])),Ge.length&&(l="/"+Ge.join(".")+l),this.hostname=pe.join(".");break}}}this.hostname.length>iS?this.hostname="":this.hostname=this.hostname.toLowerCase(),H||(this.hostname=KE.toASCII(this.hostname));var Ae=this.port?":"+this.port:"",Ie=this.hostname||"";this.host=Ie+Ae,this.href+=this.host,H&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),l[0]!=="/"&&(l="/"+l))}if(!aS[w])for(var I=0,ee=Ug.length;I<ee;I++){var Fe=Ug[I];if(l.indexOf(Fe)!==-1){var ot=encodeURIComponent(Fe);ot===Fe&&(ot=escape(Fe)),l=l.split(Fe).join(ot)}}var _t=l.indexOf("#");_t!==-1&&(this.hash=l.substr(_t),l=l.slice(0,_t));var ht=l.indexOf("?");if(ht!==-1?(this.search=l.substr(ht),this.query=l.substr(ht+1),t&&(this.query=Vg.parse(this.query)),l=l.slice(0,ht)):t&&(this.search="",this.query={}),l&&(this.pathname=l),Xh[w]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var Ae=this.pathname||"",$e=this.search||"";this.path=Ae+$e}return this.href=this.format(),this};sf.prototype.format=function(){var e=this.auth||"";e&&(e=encodeURIComponent(e),e=e.replace(/%3A/i,":"),e+="@");var t=this.protocol||"",r=this.pathname||"",n=this.hash||"",o=!1,u="";this.host?o=e+this.host:this.hostname&&(o=e+(this.hostname.indexOf(":")===-1?this.hostname:"["+this.hostname+"]"),this.port&&(o+=":"+this.port)),this.query&&tf.isObject(this.query)&&Object.keys(this.query).length&&(u=Vg.stringify(this.query));var c=this.search||u&&"?"+u||"";return t&&t.substr(-1)!==":"&&(t+=":"),this.slashes||(!t||Xh[t])&&o!==!1?(o="//"+(o||""),r&&r.charAt(0)!=="/"&&(r="/"+r)):o||(o=""),n&&n.charAt(0)!=="#"&&(n="#"+n),c&&c.charAt(0)!=="?"&&(c="?"+c),r=r.replace(/[?#]/g,function(l){return encodeURIComponent(l)}),c=c.replace("#","%23"),t+o+r+c+n};sf.prototype.resolve=function(e){return this.resolveObject(sS(e,!1,!0)).format()};sf.prototype.resolveObject=function(e){if(tf.isString(e)){var t=new sf;t.parse(e,!1,!0),e=t}for(var r=new sf,n=Object.keys(this),o=0;o<n.length;o++){var u=n[o];r[u]=this[u]}if(r.hash=e.hash,e.href==="")return r.href=r.format(),r;if(e.slashes&&!e.protocol){for(var c=Object.keys(e),l=0;l<c.length;l++){var h=c[l];h!=="protocol"&&(r[h]=e[h])}return Xh[r.protocol]&&r.hostname&&!r.pathname&&(r.path=r.pathname="/"),r.href=r.format(),r}if(e.protocol&&e.protocol!==r.protocol){if(!Xh[e.protocol]){for(var v=Object.keys(e),w=0;w<v.length;w++){var E=v[w];r[E]=e[E]}return r.href=r.format(),r}if(r.protocol=e.protocol,!e.host&&!qg[e.protocol]){for(var ee=(e.pathname||"").split("/");ee.length&&!(e.host=ee.shift()););e.host||(e.host=""),e.hostname||(e.hostname=""),ee[0]!==""&&ee.unshift(""),ee.length<2&&ee.unshift(""),r.pathname=ee.join("/")}else r.pathname=e.pathname;if(r.search=e.search,r.query=e.query,r.host=e.host||"",r.auth=e.auth,r.hostname=e.hostname||e.host,r.port=e.port,r.pathname||r.search){var T=r.pathname||"",I=r.search||"";r.path=T+I}return r.slashes=r.slashes||e.slashes,r.href=r.format(),r}var F=r.pathname&&r.pathname.charAt(0)==="/",U=e.host||e.pathname&&e.pathname.charAt(0)==="/",G=U||F||r.host&&e.pathname,H=G,X=r.pathname&&r.pathname.split("/")||[],ee=e.pathname&&e.pathname.split("/")||[],K=r.protocol&&!Xh[r.protocol];if(K&&(r.hostname="",r.port=null,r.host&&(X[0]===""?X[0]=r.host:X.unshift(r.host)),r.host="",e.protocol&&(e.hostname=null,e.port=null,e.host&&(ee[0]===""?ee[0]=e.host:ee.unshift(e.host)),e.host=null),G=G&&(ee[0]===""||X[0]==="")),U)r.host=e.host||e.host===""?e.host:r.host,r.hostname=e.hostname||e.hostname===""?e.hostname:r.hostname,r.search=e.search,r.query=e.query,X=ee;else if(ee.length)X||(X=[]),X.pop(),X=X.concat(ee),r.search=e.search,r.query=e.query;else if(!tf.isNullOrUndefined(e.search)){if(K){r.hostname=r.host=X.shift();var se=r.host&&r.host.indexOf("@")>0?r.host.split("@"):!1;se&&(r.auth=se.shift(),r.host=r.hostname=se.shift())}return r.search=e.search,r.query=e.query,(!tf.isNull(r.pathname)||!tf.isNull(r.search))&&(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.href=r.format(),r}if(!X.length)return r.pathname=null,r.search?r.path="/"+r.search:r.path=null,r.href=r.format(),r;for(var ce=X.slice(-1)[0],_e=(r.host||e.host||X.length>1)&&(ce==="."||ce==="..")||ce==="",pe=0,Ge=X.length;Ge>=0;Ge--)ce=X[Ge],ce==="."?X.splice(Ge,1):ce===".."?(X.splice(Ge,1),pe++):pe&&(X.splice(Ge,1),pe--);if(!G&&!H)for(;pe--;pe)X.unshift("..");G&&X[0]!==""&&(!X[0]||X[0].charAt(0)!=="/")&&X.unshift(""),_e&&X.join("/").substr(-1)!=="/"&&X.push("");var We=X[0]===""||X[0]&&X[0].charAt(0)==="/";if(K){r.hostname=r.host=We?"":X.length?X.shift():"";var se=r.host&&r.host.indexOf("@")>0?r.host.split("@"):!1;se&&(r.auth=se.shift(),r.host=r.hostname=se.shift())}return G=G||r.host&&X.length,G&&!We&&X.unshift(""),X.length?r.pathname=X.join("/"):(r.pathname=null,r.path=null),(!tf.isNull(r.pathname)||!tf.isNull(r.search))&&(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.auth=e.auth||r.auth,r.slashes=r.slashes||e.slashes,r.href=r.format(),r};sf.prototype.parseHost=function(){var e=this.host,t=eS.exec(e);t&&(t=t[0],t!==":"&&(this.port=t.substr(1)),e=e.substr(0,e.length-t.length)),e&&(this.hostname=e)};function n6(e,...t){for(const r of t)for(const n in r)e[n]=r[n];return e}class lS extends Error{constructor(t,r){super(r),this.message=r,this.key=t}}var D0=lS;class Fy{constructor(t,r=[]){this.parent=t,this.bindings={};for(const[n,o]of r)this.bindings[n]=o}concat(t){return new Fy(this,t)}get(t){if(this.bindings[t])return this.bindings[t];if(this.parent)return this.parent.get(t);throw new Error(`${t} not found in scope.`)}has(t){return this.bindings[t]?!0:this.parent?this.parent.has(t):!1}}var uS=Fy;const s2={kind:"null"},Vn={kind:"number"},Io={kind:"string"},wo={kind:"boolean"},lf={kind:"color"},Yh={kind:"object"},xo={kind:"value"},cS={kind:"error"},l2={kind:"collator"},u2={kind:"formatted"},kd={kind:"resolvedImage"};function $c(e,t){return{kind:"array",itemType:e,N:t}}function ts(e){if(e.kind==="array"){const t=ts(e.itemType);return typeof e.N=="number"?`array<${t}, ${e.N}>`:e.itemType.kind==="value"?"array":`array<${t}>`}else return e.kind}const fS=[s2,Vn,Io,wo,lf,u2,Yh,$c(xo),kd];function ad(e,t){if(t.kind==="error")return null;if(e.kind==="array"){if(t.kind==="array"&&(t.N===0&&t.itemType.kind==="value"||!ad(e.itemType,t.itemType))&&(typeof e.N!="number"||e.N===t.N))return null}else{if(e.kind===t.kind)return null;if(e.kind==="value"){for(const r of fS)if(!ad(r,t))return null}}return`Expected ${ts(e)} but found ${ts(t)} instead.`}function By(e,t){return t.some(r=>r.kind===e.kind)}function sd(e,t){return t.some(r=>r==="null"?e===null:r==="array"?Array.isArray(e):r==="object"?e&&!Array.isArray(e)&&typeof e=="object":r===typeof e)}var hS={},i6,Ob={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function Gp(e){return e=Math.round(e),e<0?0:e>255?255:e}function Fb(e){return e<0?0:e>1?1:e}function dm(e){return e[e.length-1]==="%"?Gp(parseFloat(e)/100*255):Gp(parseInt(e))}function o1(e){return e[e.length-1]==="%"?Fb(parseFloat(e)/100):Fb(parseFloat(e))}function mm(e,t,r){return r<0?r+=1:r>1&&(r-=1),r*6<1?e+(t-e)*r*6:r*2<1?t:r*3<2?e+(t-e)*(2/3-r)*6:e}function pS(e){var t=e.replace(/ /g,"").toLowerCase();if(t in Ob)return Ob[t].slice();if(t[0]==="#"){if(t.length===4){var r=parseInt(t.substr(1),16);return r>=0&&r<=4095?[(r&3840)>>4|(r&3840)>>8,r&240|(r&240)>>4,r&15|(r&15)<<4,1]:null}else if(t.length===7){var r=parseInt(t.substr(1),16);return r>=0&&r<=16777215?[(r&16711680)>>16,(r&65280)>>8,r&255,1]:null}return null}var n=t.indexOf("("),o=t.indexOf(")");if(n!==-1&&o+1===t.length){var u=t.substr(0,n),c=t.substr(n+1,o-(n+1)).split(","),l=1;switch(u){case"rgba":if(c.length!==4)return null;l=o1(c.pop());case"rgb":return c.length!==3?null:[dm(c[0]),dm(c[1]),dm(c[2]),l];case"hsla":if(c.length!==4)return null;l=o1(c.pop());case"hsl":if(c.length!==3)return null;var h=(parseFloat(c[0])%360+360)%360/360,v=o1(c[1]),w=o1(c[2]),E=w<=.5?w*(v+1):w+v-w*v,T=w*2-E;return[Gp(mm(T,E,h+1/3)*255),Gp(mm(T,E,h)*255),Gp(mm(T,E,h-1/3)*255),l];default:return null}}return null}try{i6=hS.parseCSSColor=pS}catch{}class oc{constructor(t,r,n,o=1){this.r=t,this.g=r,this.b=n,this.a=o}static parse(t){if(!t)return;if(t instanceof oc)return t;if(typeof t!="string")return;const r=i6(t);if(r)return new oc(r[0]/255*r[3],r[1]/255*r[3],r[2]/255*r[3],r[3])}toString(){const[t,r,n,o]=this.toArray();return`rgba(${Math.round(t)},${Math.round(r)},${Math.round(n)},${o})`}toArray(){const{r:t,g:r,b:n,a:o}=this;return o===0?[0,0,0,0]:[t*255/o,r*255/o,n*255/o,o]}toArray01(){const{r:t,g:r,b:n,a:o}=this;return o===0?[0,0,0,0]:[t/o,r/o,n/o,o]}toArray01PremultipliedAlpha(){const{r:t,g:r,b:n,a:o}=this;return[t,r,n,o]}}oc.black=new oc(0,0,0,1);oc.white=new oc(1,1,1,1);oc.transparent=new oc(0,0,0,0);oc.red=new oc(1,0,0,1);oc.blue=new oc(0,0,1,1);var Bl=oc;class jy{constructor(t,r,n){t?this.sensitivity=r?"variant":"case":this.sensitivity=r?"accent":"base",this.locale=n,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(t,r){return this.collator.compare(t,r)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class $g{constructor(t,r,n,o,u){this.text=t.normalize?t.normalize():t,this.image=r,this.scale=n,this.fontStack=o,this.textColor=u}}class m0{constructor(t){this.sections=t}static fromString(t){return new m0([new $g(t,null,null,null,null)])}isEmpty(){return this.sections.length===0?!0:!this.sections.some(t=>t.text.length!==0||t.image&&t.image.name.length!==0)}static factory(t){return t instanceof m0?t:m0.fromString(t)}toString(){return this.sections.length===0?"":this.sections.map(t=>t.text).join("")}serialize(){const t=["format"];for(const r of this.sections){if(r.image){t.push(["image",r.image.name]);continue}t.push(r.text);const n={};r.fontStack&&(n["text-font"]=["literal",r.fontStack.split(",")]),r.scale&&(n["font-scale"]=r.scale),r.textColor&&(n["text-color"]=["rgba"].concat(r.textColor.toArray())),t.push(n)}return t}}class pf{constructor(t){this.name=t.name,this.available=t.available}toString(){return this.name}static fromString(t){return t?new pf({name:t,available:!1}):null}serialize(){return["image",this.name]}}function o6(e,t,r,n){return typeof e=="number"&&e>=0&&e<=255&&typeof t=="number"&&t>=0&&t<=255&&typeof r=="number"&&r>=0&&r<=255?typeof n>"u"||typeof n=="number"&&n>=0&&n<=1?null:`Invalid rgba value [${[e,t,r,n].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof n=="number"?[e,t,r,n]:[e,t,r]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function z1(e){if(e===null)return!0;if(typeof e=="string")return!0;if(typeof e=="boolean")return!0;if(typeof e=="number")return!0;if(e instanceof Bl)return!0;if(e instanceof jy)return!0;if(e instanceof m0)return!0;if(e instanceof pf)return!0;if(Array.isArray(e)){for(const t of e)if(!z1(t))return!1;return!0}else if(typeof e=="object"){for(const t in e)if(!z1(e[t]))return!1;return!0}else return!1}function el(e){if(e===null)return s2;if(typeof e=="string")return Io;if(typeof e=="boolean")return wo;if(typeof e=="number")return Vn;if(e instanceof Bl)return lf;if(e instanceof jy)return l2;if(e instanceof m0)return u2;if(e instanceof pf)return kd;if(Array.isArray(e)){const t=e.length;let r;for(const n of e){const o=el(n);if(!r)r=o;else{if(r===o)continue;r=xo;break}}return $c(r||xo,t)}else return Yh}function Hp(e){const t=typeof e;return e===null?"":t==="string"||t==="number"||t==="boolean"?String(e):e instanceof Bl||e instanceof m0||e instanceof pf?e.toString():JSON.stringify(e)}class Uy{constructor(t,r){this.type=t,this.value=r}static parse(t,r){if(t.length!==2)return r.error(`'literal' expression requires exactly one argument, but found ${t.length-1} instead.`);if(!z1(t[1]))return r.error("invalid value");const n=t[1];let o=el(n);const u=r.expectedType;return o.kind==="array"&&o.N===0&&u&&u.kind==="array"&&(typeof u.N!="number"||u.N===0)&&(o=u),new Uy(o,n)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}serialize(){return this.type.kind==="array"||this.type.kind==="object"?["literal",this.value]:this.value instanceof Bl?["rgba"].concat(this.value.toArray()):this.value instanceof m0?this.value.serialize():this.value}}var N1=Uy;class dS{constructor(t){this.name="ExpressionEvaluationError",this.message=t}toJSON(){return this.message}}var jl=dS;const gm={string:Io,number:Vn,boolean:wo,object:Yh};class qy{constructor(t,r){this.type=t,this.args=r}static parse(t,r){if(t.length<2)return r.error("Expected at least one argument.");let n=1,o;const u=t[0];if(u==="array"){let l;if(t.length>2){const v=t[1];if(typeof v!="string"||!(v in gm)||v==="object")return r.error('The item type argument of "array" must be one of string, number, boolean',1);l=gm[v],n++}else l=xo;let h;if(t.length>3){if(t[2]!==null&&(typeof t[2]!="number"||t[2]<0||t[2]!==Math.floor(t[2])))return r.error('The length argument to "array" must be a positive integer literal',2);h=t[2],n++}o=$c(l,h)}else o=gm[u];const c=[];for(;n<t.length;n++){const l=r.parse(t[n],n,xo);if(!l)return null;c.push(l)}return new qy(o,c)}evaluate(t){for(let r=0;r<this.args.length;r++){const n=this.args[r].evaluate(t);if(ad(this.type,el(n))){if(r===this.args.length-1)throw new jl(`Expected value to be of type ${ts(this.type)}, but found ${ts(el(n))} instead.`)}else return n}return null}eachChild(t){this.args.forEach(t)}outputDefined(){return this.args.every(t=>t.outputDefined())}serialize(){const t=this.type,r=[t.kind];if(t.kind==="array"){const n=t.itemType;if(n.kind==="string"||n.kind==="number"||n.kind==="boolean"){r.push(n.kind);const o=t.N;(typeof o=="number"||this.args.length>1)&&r.push(o)}}return r.concat(this.args.map(n=>n.serialize()))}}var of=qy;class c2{constructor(t){this.type=u2,this.sections=t}static parse(t,r){if(t.length<2)return r.error("Expected at least one argument.");const n=t[1];if(!Array.isArray(n)&&typeof n=="object")return r.error("First argument must be an image or text section.");const o=[];let u=!1;for(let c=1;c<=t.length-1;++c){const l=t[c];if(u&&typeof l=="object"&&!Array.isArray(l)){u=!1;let h=null;if(l["font-scale"]&&(h=r.parse(l["font-scale"],1,Vn),!h))return null;let v=null;if(l["text-font"]&&(v=r.parse(l["text-font"],1,$c(Io)),!v))return null;let w=null;if(l["text-color"]&&(w=r.parse(l["text-color"],1,lf),!w))return null;const E=o[o.length-1];E.scale=h,E.font=v,E.textColor=w}else{const h=r.parse(t[c],1,xo);if(!h)return null;const v=h.type.kind;if(v!=="string"&&v!=="value"&&v!=="null"&&v!=="resolvedImage")return r.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");u=!0,o.push({content:h,scale:null,font:null,textColor:null})}}return new c2(o)}evaluate(t){const r=n=>{const o=n.content.evaluate(t);return el(o)===kd?new $g("",o,null,null,null):new $g(Hp(o),null,n.scale?n.scale.evaluate(t):null,n.font?n.font.evaluate(t).join(","):null,n.textColor?n.textColor.evaluate(t):null)};return new m0(this.sections.map(r))}eachChild(t){for(const r of this.sections)t(r.content),r.scale&&t(r.scale),r.font&&t(r.font),r.textColor&&t(r.textColor)}outputDefined(){return!1}serialize(){const t=["format"];for(const r of this.sections){t.push(r.content.serialize());const n={};r.scale&&(n["font-scale"]=r.scale.serialize()),r.font&&(n["text-font"]=r.font.serialize()),r.textColor&&(n["text-color"]=r.textColor.serialize()),t.push(n)}return t}}class f2{constructor(t){this.type=kd,this.input=t}static parse(t,r){if(t.length!==2)return r.error("Expected two arguments.");const n=r.parse(t[1],1,Io);return n?new f2(n):r.error("No image name provided.")}evaluate(t){const r=this.input.evaluate(t),n=pf.fromString(r);return n&&t.availableImages&&(n.available=t.availableImages.indexOf(r)>-1),n}eachChild(t){t(this.input)}outputDefined(){return!1}serialize(){return["image",this.input.serialize()]}}const mS={"to-boolean":wo,"to-color":lf,"to-number":Vn,"to-string":Io};class Vy{constructor(t,r){this.type=t,this.args=r}static parse(t,r){if(t.length<2)return r.error("Expected at least one argument.");const n=t[0];if((n==="to-boolean"||n==="to-string")&&t.length!==2)return r.error("Expected one argument.");const o=mS[n],u=[];for(let c=1;c<t.length;c++){const l=r.parse(t[c],c,xo);if(!l)return null;u.push(l)}return new Vy(o,u)}evaluate(t){if(this.type.kind==="boolean")return Boolean(this.args[0].evaluate(t));if(this.type.kind==="color"){let r,n;for(const o of this.args){if(r=o.evaluate(t),n=null,r instanceof Bl)return r;if(typeof r=="string"){const u=t.parseColor(r);if(u)return u}else if(Array.isArray(r)&&(r.length<3||r.length>4?n=`Invalid rbga value ${JSON.stringify(r)}: expected an array containing either three or four numeric values.`:n=o6(r[0],r[1],r[2],r[3]),!n))return new Bl(r[0]/255,r[1]/255,r[2]/255,r[3])}throw new jl(n||`Could not parse color from value '${typeof r=="string"?r:String(JSON.stringify(r))}'`)}else if(this.type.kind==="number"){let r=null;for(const n of this.args){if(r=n.evaluate(t),r===null)return 0;const o=Number(r);if(!isNaN(o))return o}throw new jl(`Could not convert ${JSON.stringify(r)} to number.`)}else return this.type.kind==="formatted"?m0.fromString(Hp(this.args[0].evaluate(t))):this.type.kind==="resolvedImage"?pf.fromString(Hp(this.args[0].evaluate(t))):Hp(this.args[0].evaluate(t))}eachChild(t){this.args.forEach(t)}outputDefined(){return this.args.every(t=>t.outputDefined())}serialize(){if(this.type.kind==="formatted")return new c2([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if(this.type.kind==="resolvedImage")return new f2(this.args[0]).serialize();const t=[`to-${this.type.kind}`];return this.eachChild(r=>{t.push(r.serialize())}),t}}var Fh=Vy;const gS=["Unknown","Point","LineString","Polygon"];class yS{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null,this.featureTileCoord=null,this.featureDistanceData=null}id(){return this.feature&&this.feature.id!==void 0?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?gS[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}distanceFromCenter(){if(this.featureTileCoord&&this.featureDistanceData){const t=this.featureDistanceData.center,r=this.featureDistanceData.scale,{x:n,y:o}=this.featureTileCoord,u=n*r-t[0],c=o*r-t[1],l=this.featureDistanceData.bearing[0],h=this.featureDistanceData.bearing[1];return l*u+h*c}return 0}parseColor(t){let r=this._parseColorCache[t];return r||(r=this._parseColorCache[t]=Bl.parse(t)),r}}var a6=yS;class Bh{constructor(t,r,n,o){this.name=t,this.type=r,this._evaluate=n,this.args=o}evaluate(t){return this._evaluate(t,this.args)}eachChild(t){this.args.forEach(t)}outputDefined(){return!1}serialize(){return[this.name].concat(this.args.map(t=>t.serialize()))}static parse(t,r){const n=t[0],o=Bh.definitions[n];if(!o)return r.error(`Unknown expression "${n}". If you wanted a literal array, use ["literal", [...]].`,0);const u=Array.isArray(o)?o[0]:o.type,c=Array.isArray(o)?[[o[1],o[2]]]:o.overloads,l=c.filter(([v])=>!Array.isArray(v)||v.length===t.length-1);let h=null;for(const[v,w]of l){h=new f6(r.registry,r.path,null,r.scope);const E=[];let T=!1;for(let I=1;I<t.length;I++){const F=t[I],U=Array.isArray(v)?v[I-1]:v.type,G=h.parse(F,1+E.length,U);if(!G){T=!0;break}E.push(G)}if(!T){if(Array.isArray(v)&&v.length!==E.length){h.error(`Expected ${v.length} arguments, but found ${E.length} instead.`);continue}for(let I=0;I<E.length;I++){const F=Array.isArray(v)?v[I]:v.type,U=E[I];h.concat(I+1).checkSubtype(F,U.type)}if(h.errors.length===0)return new Bh(n,u,w,E)}}if(l.length===1)r.errors.push(...h.errors);else{const w=(l.length?l:c).map(([T])=>vS(T)).join(" | "),E=[];for(let T=1;T<t.length;T++){const I=r.parse(t[T],1+E.length);if(!I)return null;E.push(ts(I.type))}r.error(`Expected arguments of type ${w}, but found (${E.join(", ")}) instead.`)}return null}static register(t,r){Bh.definitions=r;for(const n in r)t[n]=Bh}}function vS(e){return Array.isArray(e)?`(${e.map(ts).join(", ")})`:`(${ts(e.type)}...)`}var gp=Bh;class h2{constructor(t,r,n){this.type=l2,this.locale=n,this.caseSensitive=t,this.diacriticSensitive=r}static parse(t,r){if(t.length!==2)return r.error("Expected one argument.");const n=t[1];if(typeof n!="object"||Array.isArray(n))return r.error("Collator options argument must be an object.");const o=r.parse(n["case-sensitive"]===void 0?!1:n["case-sensitive"],1,wo);if(!o)return null;const u=r.parse(n["diacritic-sensitive"]===void 0?!1:n["diacritic-sensitive"],1,wo);if(!u)return null;let c=null;return n.locale&&(c=r.parse(n.locale,1,Io),!c)?null:new h2(o,u,c)}evaluate(t){return new jy(this.caseSensitive.evaluate(t),this.diacriticSensitive.evaluate(t),this.locale?this.locale.evaluate(t):null)}eachChild(t){t(this.caseSensitive),t(this.diacriticSensitive),this.locale&&t(this.locale)}outputDefined(){return!1}serialize(){const t={};return t["case-sensitive"]=this.caseSensitive.serialize(),t["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(t.locale=this.locale.serialize()),["collator",t]}}const If=8192;function $y(e,t){e[0]=Math.min(e[0],t[0]),e[1]=Math.min(e[1],t[1]),e[2]=Math.max(e[2],t[0]),e[3]=Math.max(e[3],t[1])}function _S(e){return(180+e)/360}function bS(e){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+e*Math.PI/360)))/360}function R1(e,t){return!(e[0]<=t[0]||e[2]>=t[2]||e[1]<=t[1]||e[3]>=t[3])}function wS(e,t){const r=_S(e[0]),n=bS(e[1]),o=Math.pow(2,t.z);return[Math.round(r*o*If),Math.round(n*o*If)]}function xS(e,t,r){const n=e[0]-t[0],o=e[1]-t[1],u=e[0]-r[0],c=e[1]-r[1];return n*c-u*o===0&&n*u<=0&&o*c<=0}function kS(e,t,r){return t[1]>e[1]!=r[1]>e[1]&&e[0]<(r[0]-t[0])*(e[1]-t[1])/(r[1]-t[1])+t[0]}function Gy(e,t){let r=!1;for(let n=0,o=t.length;n<o;n++){const u=t[n];for(let c=0,l=u.length;c<l-1;c++){if(xS(e,u[c],u[c+1]))return!1;kS(e,u[c],u[c+1])&&(r=!r)}}return r}function AS(e,t){for(let r=0;r<t.length;r++)if(Gy(e,t[r]))return!0;return!1}function ES(e,t){return e[0]*t[1]-e[1]*t[0]}function Bb(e,t,r,n){const o=e[0]-r[0],u=e[1]-r[1],c=t[0]-r[0],l=t[1]-r[1],h=n[0]-r[0],v=n[1]-r[1],w=o*v-h*u,E=c*v-h*l;return w>0&&E<0||w<0&&E>0}function SS(e,t,r,n){const o=[t[0]-e[0],t[1]-e[1]],u=[n[0]-r[0],n[1]-r[1]];return ES(u,o)===0?!1:!!(Bb(e,t,r,n)&&Bb(r,n,e,t))}function CS(e,t,r){for(const n of r)for(let o=0;o<n.length-1;++o)if(SS(e,t,n[o],n[o+1]))return!0;return!1}function s6(e,t){for(let r=0;r<e.length;++r)if(!Gy(e[r],t))return!1;for(let r=0;r<e.length-1;++r)if(CS(e[r],e[r+1],t))return!1;return!0}function IS(e,t){for(let r=0;r<t.length;r++)if(s6(e,t[r]))return!0;return!1}function Hy(e,t,r){const n=[];for(let o=0;o<e.length;o++){const u=[];for(let c=0;c<e[o].length;c++){const l=wS(e[o][c],r);$y(t,l),u.push(l)}n.push(u)}return n}function l6(e,t,r){const n=[];for(let o=0;o<e.length;o++){const u=Hy(e[o],t,r);n.push(u)}return n}function u6(e,t,r,n){if(e[0]<r[0]||e[0]>r[2]){const o=n*.5;let u=e[0]-r[0]>o?-n:r[0]-e[0]>o?n:0;u===0&&(u=e[0]-r[2]>o?-n:r[2]-e[0]>o?n:0),e[0]+=u}$y(t,e)}function TS(e){e[0]=e[1]=1/0,e[2]=e[3]=-1/0}function jb(e,t,r,n){const o=Math.pow(2,n.z)*If,u=[n.x*If,n.y*If],c=[];if(!e)return c;for(const l of e)for(const h of l){const v=[h.x+u[0],h.y+u[1]];u6(v,t,r,o),c.push(v)}return c}function Ub(e,t,r,n){const o=Math.pow(2,n.z)*If,u=[n.x*If,n.y*If],c=[];if(!e)return c;for(const l of e){const h=[];for(const v of l){const w=[v.x+u[0],v.y+u[1]];$y(t,w),h.push(w)}c.push(h)}if(t[2]-t[0]<=o/2){TS(t);for(const l of c)for(const h of l)u6(h,t,r,o)}return c}function LS(e,t){const r=[1/0,1/0,-1/0,-1/0],n=[1/0,1/0,-1/0,-1/0],o=e.canonicalID();if(!o)return!1;if(t.type==="Polygon"){const u=Hy(t.coordinates,n,o),c=jb(e.geometry(),r,n,o);if(!R1(r,n))return!1;for(const l of c)if(!Gy(l,u))return!1}if(t.type==="MultiPolygon"){const u=l6(t.coordinates,n,o),c=jb(e.geometry(),r,n,o);if(!R1(r,n))return!1;for(const l of c)if(!AS(l,u))return!1}return!0}function PS(e,t){const r=[1/0,1/0,-1/0,-1/0],n=[1/0,1/0,-1/0,-1/0],o=e.canonicalID();if(!o)return!1;if(t.type==="Polygon"){const u=Hy(t.coordinates,n,o),c=Ub(e.geometry(),r,n,o);if(!R1(r,n))return!1;for(const l of c)if(!s6(l,u))return!1}if(t.type==="MultiPolygon"){const u=l6(t.coordinates,n,o),c=Ub(e.geometry(),r,n,o);if(!R1(r,n))return!1;for(const l of c)if(!IS(l,u))return!1}return!0}class Wp{constructor(t,r){this.type=wo,this.geojson=t,this.geometries=r}static parse(t,r){if(t.length!==2)return r.error(`'within' expression requires exactly one argument, but found ${t.length-1} instead.`);if(z1(t[1])){const n=t[1];if(n.type==="FeatureCollection")for(let o=0;o<n.features.length;++o){const u=n.features[o].geometry.type;if(u==="Polygon"||u==="MultiPolygon")return new Wp(n,n.features[o].geometry)}else if(n.type==="Feature"){const o=n.geometry.type;if(o==="Polygon"||o==="MultiPolygon")return new Wp(n,n.geometry)}else if(n.type==="Polygon"||n.type==="MultiPolygon")return new Wp(n,n)}return r.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(t){if(t.geometry()!=null&&t.canonicalID()!=null){if(t.geometryType()==="Point")return LS(t,this.geometries);if(t.geometryType()==="LineString")return PS(t,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}serialize(){return["within",this.geojson]}}var Wy=Wp;function Zy(e){if(e instanceof gp){if(e.name==="get"&&e.args.length===1)return!1;if(e.name==="feature-state")return!1;if(e.name==="has"&&e.args.length===1)return!1;if(e.name==="properties"||e.name==="geometry-type"||e.name==="id")return!1;if(/^filter-/.test(e.name))return!1}if(e instanceof Wy)return!1;let t=!0;return e.eachChild(r=>{t&&!Zy(r)&&(t=!1)}),t}function Xy(e){if(e instanceof gp&&e.name==="feature-state")return!1;let t=!0;return e.eachChild(r=>{t&&!Xy(r)&&(t=!1)}),t}function Yy(e,t){if(e instanceof gp&&t.indexOf(e.name)>=0)return!1;let r=!0;return e.eachChild(n=>{r&&!Yy(n,t)&&(r=!1)}),r}class Jy{constructor(t,r){this.type=r.type,this.name=t,this.boundExpression=r}static parse(t,r){if(t.length!==2||typeof t[1]!="string")return r.error("'var' expression requires exactly one string literal argument.");const n=t[1];return r.scope.has(n)?new Jy(n,r.scope.get(n)):r.error(`Unknown variable "${n}". Make sure "${n}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(t){return this.boundExpression.evaluate(t)}eachChild(){}outputDefined(){return!1}serialize(){return["var",this.name]}}var c6=Jy;class Ky{constructor(t,r=[],n,o=new uS,u=[]){this.registry=t,this.path=r,this.key=r.map(c=>`[${c}]`).join(""),this.scope=o,this.errors=u,this.expectedType=n}parse(t,r,n,o,u={}){return r?this.concat(r,n,o)._parse(t,u):this._parse(t,u)}_parse(t,r){(t===null||typeof t=="string"||typeof t=="boolean"||typeof t=="number")&&(t=["literal",t]);function n(o,u,c){return c==="assert"?new of(u,[o]):c==="coerce"?new Fh(u,[o]):o}if(Array.isArray(t)){if(t.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const o=t[0];if(typeof o!="string")return this.error(`Expression name must be a string, but found ${typeof o} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const u=this.registry[o];if(u){let c=u.parse(t,this);if(!c)return null;if(this.expectedType){const l=this.expectedType,h=c.type;if((l.kind==="string"||l.kind==="number"||l.kind==="boolean"||l.kind==="object"||l.kind==="array")&&h.kind==="value")c=n(c,l,r.typeAnnotation||"assert");else if((l.kind==="color"||l.kind==="formatted"||l.kind==="resolvedImage")&&(h.kind==="value"||h.kind==="string"))c=n(c,l,r.typeAnnotation||"coerce");else if(this.checkSubtype(l,h))return null}if(!(c instanceof N1)&&c.type.kind!=="resolvedImage"&&Gg(c)){const l=new a6;try{c=new N1(c.type,c.evaluate(l))}catch(h){return this.error(h.message),null}}return c}return this.error(`Unknown expression "${o}". If you wanted a literal array, use ["literal", [...]].`,0)}else return typeof t>"u"?this.error("'undefined' value invalid. Use null instead."):typeof t=="object"?this.error('Bare objects invalid. Use ["literal", {...}] instead.'):this.error(`Expected an array, but found ${typeof t} instead.`)}concat(t,r,n){const o=typeof t=="number"?this.path.concat(t):this.path,u=n?this.scope.concat(n):this.scope;return new Ky(this.registry,o,r||null,u,this.errors)}error(t,...r){const n=`${this.key}${r.map(o=>`[${o}]`).join("")}`;this.errors.push(new D0(n,t))}checkSubtype(t,r){const n=ad(t,r);return n&&this.error(n),n}}var f6=Ky;function Gg(e){if(e instanceof c6)return Gg(e.boundExpression);if(e instanceof gp&&e.name==="error")return!1;if(e instanceof h2)return!1;if(e instanceof Wy)return!1;const t=e instanceof Fh||e instanceof of;let r=!0;return e.eachChild(n=>{t?r=r&&Gg(n):r=r&&n instanceof N1}),r?Zy(e)&&Yy(e,["zoom","heatmap-density","line-progress","sky-radial-progress","accumulated","is-supported-script","pitch","distance-from-center"]):!1}function p2(e,t){const r=e.length-1;let n=0,o=r,u=0,c,l;for(;n<=o;)if(u=Math.floor((n+o)/2),c=e[u],l=e[u+1],c<=t){if(u===r||t<l)return u;n=u+1}else if(c>t)o=u-1;else throw new jl("Input is not a number.");return 0}class Qy{constructor(t,r,n){this.type=t,this.input=r,this.labels=[],this.outputs=[];for(const[o,u]of n)this.labels.push(o),this.outputs.push(u)}static parse(t,r){if(t.length-1<4)return r.error(`Expected at least 4 arguments, but found only ${t.length-1}.`);if((t.length-1)%2!==0)return r.error("Expected an even number of arguments.");const n=r.parse(t[1],1,Vn);if(!n)return null;const o=[];let u=null;r.expectedType&&r.expectedType.kind!=="value"&&(u=r.expectedType);for(let c=1;c<t.length;c+=2){const l=c===1?-1/0:t[c],h=t[c+1],v=c,w=c+1;if(typeof l!="number")return r.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',v);if(o.length&&o[o.length-1][0]>=l)return r.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',v);const E=r.parse(h,w,u);if(!E)return null;u=u||E.type,o.push([l,E])}return new Qy(u,n,o)}evaluate(t){const r=this.labels,n=this.outputs;if(r.length===1)return n[0].evaluate(t);const o=this.input.evaluate(t);if(o<=r[0])return n[0].evaluate(t);const u=r.length;if(o>=r[u-1])return n[u-1].evaluate(t);const c=p2(r,o);return n[c].evaluate(t)}eachChild(t){t(this.input);for(const r of this.outputs)t(r)}outputDefined(){return this.outputs.every(t=>t.outputDefined())}serialize(){const t=["step",this.input.serialize()];for(let r=0;r<this.labels.length;r++)r>0&&t.push(this.labels[r]),t.push(this.outputs[r].serialize());return t}}var h6=Qy,MS=p6;function p6(e,t,r,n){this.cx=3*e,this.bx=3*(r-e)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*t,this.by=3*(n-t)-this.cy,this.ay=1-this.cy-this.by,this.p1x=e,this.p1y=t,this.p2x=r,this.p2y=n}p6.prototype={sampleCurveX:function(e){return((this.ax*e+this.bx)*e+this.cx)*e},sampleCurveY:function(e){return((this.ay*e+this.by)*e+this.cy)*e},sampleCurveDerivativeX:function(e){return(3*this.ax*e+2*this.bx)*e+this.cx},solveCurveX:function(e,t){if(t===void 0&&(t=1e-6),e<0)return 0;if(e>1)return 1;for(var r=e,n=0;n<8;n++){var o=this.sampleCurveX(r)-e;if(Math.abs(o)<t)return r;var u=this.sampleCurveDerivativeX(r);if(Math.abs(u)<1e-6)break;r=r-o/u}var c=0,l=1;for(r=e,n=0;n<20&&(o=this.sampleCurveX(r),!(Math.abs(o-e)<t));n++)e>o?c=r:l=r,r=(l-c)*.5+c;return r},solve:function(e,t){return this.sampleCurveY(this.solveCurveX(e,t))}};function Ic(e,t,r){return e*(1-r)+t*r}function DS(e,t,r){return new Bl(Ic(e.r,t.r,r),Ic(e.g,t.g,r),Ic(e.b,t.b,r),Ic(e.a,t.a,r))}function zS(e,t,r){return e.map((n,o)=>Ic(n,t[o],r))}var d6=Object.freeze({__proto__:null,number:Ic,color:DS,array:zS});const m6=.95047,g6=1,y6=1.08883,v6=4/29,Jh=6/29,_6=3*Jh*Jh,NS=Jh*Jh*Jh,RS=Math.PI/180,OS=180/Math.PI;function ym(e){return e>NS?Math.pow(e,1/3):e/_6+v6}function vm(e){return e>Jh?e*e*e:_6*(e-v6)}function _m(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function bm(e){return e/=255,e<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function b6(e){const t=bm(e.r),r=bm(e.g),n=bm(e.b),o=ym((.4124564*t+.3575761*r+.1804375*n)/m6),u=ym((.2126729*t+.7151522*r+.072175*n)/g6),c=ym((.0193339*t+.119192*r+.9503041*n)/y6);return{l:116*u-16,a:500*(o-u),b:200*(u-c),alpha:e.a}}function w6(e){let t=(e.l+16)/116,r=isNaN(e.a)?t:t+e.a/500,n=isNaN(e.b)?t:t-e.b/200;return t=g6*vm(t),r=m6*vm(r),n=y6*vm(n),new Bl(_m(3.2404542*r-1.5371385*t-.4985314*n),_m(-.969266*r+1.8760108*t+.041556*n),_m(.0556434*r-.2040259*t+1.0572252*n),e.alpha)}function FS(e,t,r){return{l:Ic(e.l,t.l,r),a:Ic(e.a,t.a,r),b:Ic(e.b,t.b,r),alpha:Ic(e.alpha,t.alpha,r)}}function BS(e){const{l:t,a:r,b:n}=b6(e),o=Math.atan2(n,r)*OS;return{h:o<0?o+360:o,c:Math.sqrt(r*r+n*n),l:t,alpha:e.a}}function jS(e){const t=e.h*RS,r=e.c,n=e.l;return w6({l:n,a:Math.cos(t)*r,b:Math.sin(t)*r,alpha:e.alpha})}function US(e,t,r){const n=t-e;return e+r*(n>180||n<-180?n-360*Math.round(n/360):n)}function qS(e,t,r){return{h:US(e.h,t.h,r),c:Ic(e.c,t.c,r),l:Ic(e.l,t.l,r),alpha:Ic(e.alpha,t.alpha,r)}}const Bp={forward:b6,reverse:w6,interpolate:FS},jp={forward:BS,reverse:jS,interpolate:qS};var x6=Object.freeze({__proto__:null,lab:Bp,hcl:jp});class O1{constructor(t,r,n,o,u){this.type=t,this.operator=r,this.interpolation=n,this.input=o,this.labels=[],this.outputs=[];for(const[c,l]of u)this.labels.push(c),this.outputs.push(l)}static interpolationFactor(t,r,n,o){let u=0;if(t.name==="exponential")u=wm(r,t.base,n,o);else if(t.name==="linear")u=wm(r,1,n,o);else if(t.name==="cubic-bezier"){const c=t.controlPoints;u=new MS(c[0],c[1],c[2],c[3]).solve(wm(r,1,n,o))}return u}static parse(t,r){let[n,o,u,...c]=t;if(!Array.isArray(o)||o.length===0)return r.error("Expected an interpolation type expression.",1);if(o[0]==="linear")o={name:"linear"};else if(o[0]==="exponential"){const v=o[1];if(typeof v!="number")return r.error("Exponential interpolation requires a numeric base.",1,1);o={name:"exponential",base:v}}else if(o[0]==="cubic-bezier"){const v=o.slice(1);if(v.length!==4||v.some(w=>typeof w!="number"||w<0||w>1))return r.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);o={name:"cubic-bezier",controlPoints:v}}else return r.error(`Unknown interpolation type ${String(o[0])}`,1,0);if(t.length-1<4)return r.error(`Expected at least 4 arguments, but found only ${t.length-1}.`);if((t.length-1)%2!==0)return r.error("Expected an even number of arguments.");if(u=r.parse(u,2,Vn),!u)return null;const l=[];let h=null;n==="interpolate-hcl"||n==="interpolate-lab"?h=lf:r.expectedType&&r.expectedType.kind!=="value"&&(h=r.expectedType);for(let v=0;v<c.length;v+=2){const w=c[v],E=c[v+1],T=v+3,I=v+4;if(typeof w!="number")return r.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',T);if(l.length&&l[l.length-1][0]>=w)return r.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',T);const F=r.parse(E,I,h);if(!F)return null;h=h||F.type,l.push([w,F])}return h.kind!=="number"&&h.kind!=="color"&&!(h.kind==="array"&&h.itemType.kind==="number"&&typeof h.N=="number")?r.error(`Type ${ts(h)} is not interpolatable.`):new O1(h,n,o,u,l)}evaluate(t){const r=this.labels,n=this.outputs;if(r.length===1)return n[0].evaluate(t);const o=this.input.evaluate(t);if(o<=r[0])return n[0].evaluate(t);const u=r.length;if(o>=r[u-1])return n[u-1].evaluate(t);const c=p2(r,o),l=r[c],h=r[c+1],v=O1.interpolationFactor(this.interpolation,o,l,h),w=n[c].evaluate(t),E=n[c+1].evaluate(t);return this.operator==="interpolate"?d6[this.type.kind.toLowerCase()](w,E,v):this.operator==="interpolate-hcl"?jp.reverse(jp.interpolate(jp.forward(w),jp.forward(E),v)):Bp.reverse(Bp.interpolate(Bp.forward(w),Bp.forward(E),v))}eachChild(t){t(this.input);for(const r of this.outputs)t(r)}outputDefined(){return this.outputs.every(t=>t.outputDefined())}serialize(){let t;this.interpolation.name==="linear"?t=["linear"]:this.interpolation.name==="exponential"?this.interpolation.base===1?t=["linear"]:t=["exponential",this.interpolation.base]:t=["cubic-bezier"].concat(this.interpolation.controlPoints);const r=[this.operator,t,this.input.serialize()];for(let n=0;n<this.labels.length;n++)r.push(this.labels[n],this.outputs[n].serialize());return r}}function wm(e,t,r,n){const o=n-r,u=e-r;return o===0?0:t===1?u/o:(Math.pow(t,u)-1)/(Math.pow(t,o)-1)}var uf=O1;class F1{constructor(t,r){this.type=t,this.args=r}static parse(t,r){if(t.length<2)return r.error("Expectected at least one argument.");let n=null;const o=r.expectedType;o&&o.kind!=="value"&&(n=o);const u=[];for(const l of t.slice(1)){const h=r.parse(l,1+u.length,n,void 0,{typeAnnotation:"omit"});if(!h)return null;n=n||h.type,u.push(h)}return o&&u.some(l=>ad(o,l.type))?new F1(xo,u):new F1(n,u)}evaluate(t){let r=null,n=0,o;for(const u of this.args){if(n++,r=u.evaluate(t),r&&r instanceof pf&&!r.available&&(o||(o=r),r=null,n===this.args.length))return o;if(r!==null)break}return r}eachChild(t){this.args.forEach(t)}outputDefined(){return this.args.every(t=>t.outputDefined())}serialize(){const t=["coalesce"];return this.eachChild(r=>{t.push(r.serialize())}),t}}var k6=F1;class ev{constructor(t,r){this.type=r.type,this.bindings=[].concat(t),this.result=r}evaluate(t){return this.result.evaluate(t)}eachChild(t){for(const r of this.bindings)t(r[1]);t(this.result)}static parse(t,r){if(t.length<4)return r.error(`Expected at least 3 arguments, but found ${t.length-1} instead.`);const n=[];for(let u=1;u<t.length-1;u+=2){const c=t[u];if(typeof c!="string")return r.error(`Expected string, but found ${typeof c} instead.`,u);if(/[^a-zA-Z0-9_]/.test(c))return r.error("Variable names must contain only alphanumeric characters or '_'.",u);const l=r.parse(t[u+1],u+1);if(!l)return null;n.push([c,l])}const o=r.parse(t[t.length-1],t.length-1,r.expectedType,n);return o?new ev(n,o):null}outputDefined(){return this.result.outputDefined()}serialize(){const t=["let"];for(const[r,n]of this.bindings)t.push(r,n.serialize());return t.push(this.result.serialize()),t}}var A6=ev;class tv{constructor(t,r,n){this.type=t,this.index=r,this.input=n}static parse(t,r){if(t.length!==3)return r.error(`Expected 2 arguments, but found ${t.length-1} instead.`);const n=r.parse(t[1],1,Vn),o=r.parse(t[2],2,$c(r.expectedType||xo));if(!n||!o)return null;const u=o.type;return new tv(u.itemType,n,o)}evaluate(t){const r=this.index.evaluate(t),n=this.input.evaluate(t);if(r<0)throw new jl(`Array index out of bounds: ${r} < 0.`);if(r>=n.length)throw new jl(`Array index out of bounds: ${r} > ${n.length-1}.`);if(r!==Math.floor(r))throw new jl(`Array index must be an integer, but found ${r} instead.`);return n[r]}eachChild(t){t(this.index),t(this.input)}outputDefined(){return!1}serialize(){return["at",this.index.serialize(),this.input.serialize()]}}var VS=tv;class rv{constructor(t,r){this.type=wo,this.needle=t,this.haystack=r}static parse(t,r){if(t.length!==3)return r.error(`Expected 2 arguments, but found ${t.length-1} instead.`);const n=r.parse(t[1],1,xo),o=r.parse(t[2],2,xo);return!n||!o?null:By(n.type,[wo,Io,Vn,s2,xo])?new rv(n,o):r.error(`Expected first argument to be of type boolean, string, number or null, but found ${ts(n.type)} instead`)}evaluate(t){const r=this.needle.evaluate(t),n=this.haystack.evaluate(t);if(n==null)return!1;if(!sd(r,["boolean","string","number","null"]))throw new jl(`Expected first argument to be of type boolean, string, number or null, but found ${ts(el(r))} instead.`);if(!sd(n,["string","array"]))throw new jl(`Expected second argument to be of type array or string, but found ${ts(el(n))} instead.`);return n.indexOf(r)>=0}eachChild(t){t(this.needle),t(this.haystack)}outputDefined(){return!0}serialize(){return["in",this.needle.serialize(),this.haystack.serialize()]}}var $S=rv;class B1{constructor(t,r,n){this.type=Vn,this.needle=t,this.haystack=r,this.fromIndex=n}static parse(t,r){if(t.length<=2||t.length>=5)return r.error(`Expected 3 or 4 arguments, but found ${t.length-1} instead.`);const n=r.parse(t[1],1,xo),o=r.parse(t[2],2,xo);if(!n||!o)return null;if(!By(n.type,[wo,Io,Vn,s2,xo]))return r.error(`Expected first argument to be of type boolean, string, number or null, but found ${ts(n.type)} instead`);if(t.length===4){const u=r.parse(t[3],3,Vn);return u?new B1(n,o,u):null}else return new B1(n,o)}evaluate(t){const r=this.needle.evaluate(t),n=this.haystack.evaluate(t);if(!sd(r,["boolean","string","number","null"]))throw new jl(`Expected first argument to be of type boolean, string, number or null, but found ${ts(el(r))} instead.`);if(!sd(n,["string","array"]))throw new jl(`Expected second argument to be of type array or string, but found ${ts(el(n))} instead.`);if(this.fromIndex){const o=this.fromIndex.evaluate(t);return n.indexOf(r,o)}return n.indexOf(r)}eachChild(t){t(this.needle),t(this.haystack),this.fromIndex&&t(this.fromIndex)}outputDefined(){return!1}serialize(){if(this.fromIndex!=null&&this.fromIndex!==void 0){const t=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),t]}return["index-of",this.needle.serialize(),this.haystack.serialize()]}}var GS=B1;class nv{constructor(t,r,n,o,u,c){this.inputType=t,this.type=r,this.input=n,this.cases=o,this.outputs=u,this.otherwise=c}static parse(t,r){if(t.length<5)return r.error(`Expected at least 4 arguments, but found only ${t.length-1}.`);if(t.length%2!==1)return r.error("Expected an even number of arguments.");let n,o;r.expectedType&&r.expectedType.kind!=="value"&&(o=r.expectedType);const u={},c=[];for(let v=2;v<t.length-1;v+=2){let w=t[v];const E=t[v+1];Array.isArray(w)||(w=[w]);const T=r.concat(v);if(w.length===0)return T.error("Expected at least one branch label.");for(const F of w){if(typeof F!="number"&&typeof F!="string")return T.error("Branch labels must be numbers or strings.");if(typeof F=="number"&&Math.abs(F)>Number.MAX_SAFE_INTEGER)return T.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof F=="number"&&Math.floor(F)!==F)return T.error("Numeric branch labels must be integer values.");if(!n)n=el(F);else if(T.checkSubtype(n,el(F)))return null;if(typeof u[String(F)]<"u")return T.error("Branch labels must be unique.");u[String(F)]=c.length}const I=r.parse(E,v,o);if(!I)return null;o=o||I.type,c.push(I)}const l=r.parse(t[1],1,xo);if(!l)return null;const h=r.parse(t[t.length-1],t.length-1,o);return!h||l.type.kind!=="value"&&r.concat(1).checkSubtype(n,l.type)?null:new nv(n,o,l,u,c,h)}evaluate(t){const r=this.input.evaluate(t);return(el(r)===this.inputType&&this.outputs[this.cases[r]]||this.otherwise).evaluate(t)}eachChild(t){t(this.input),this.outputs.forEach(t),t(this.otherwise)}outputDefined(){return this.outputs.every(t=>t.outputDefined())&&this.otherwise.outputDefined()}serialize(){const t=["match",this.input.serialize()],r=Object.keys(this.cases).sort(),n=[],o={};for(const c of r){const l=o[this.cases[c]];l===void 0?(o[this.cases[c]]=n.length,n.push([this.cases[c],[c]])):n[l][1].push(c)}const u=c=>this.inputType.kind==="number"?Number(c):c;for(const[c,l]of n)l.length===1?t.push(u(l[0])):t.push(l.map(u)),t.push(this.outputs[c].serialize());return t.push(this.otherwise.serialize()),t}}var HS=nv;class iv{constructor(t,r,n){this.type=t,this.branches=r,this.otherwise=n}static parse(t,r){if(t.length<4)return r.error(`Expected at least 3 arguments, but found only ${t.length-1}.`);if(t.length%2!==0)return r.error("Expected an odd number of arguments.");let n;r.expectedType&&r.expectedType.kind!=="value"&&(n=r.expectedType);const o=[];for(let c=1;c<t.length-1;c+=2){const l=r.parse(t[c],c,wo);if(!l)return null;const h=r.parse(t[c+1],c+1,n);if(!h)return null;o.push([l,h]),n=n||h.type}const u=r.parse(t[t.length-1],t.length-1,n);return u?new iv(n,o,u):null}evaluate(t){for(const[r,n]of this.branches)if(r.evaluate(t))return n.evaluate(t);return this.otherwise.evaluate(t)}eachChild(t){for(const[r,n]of this.branches)t(r),t(n);t(this.otherwise)}outputDefined(){return this.branches.every(([t,r])=>r.outputDefined())&&this.otherwise.outputDefined()}serialize(){const t=["case"];return this.eachChild(r=>{t.push(r.serialize())}),t}}var WS=iv;class j1{constructor(t,r,n,o){this.type=t,this.input=r,this.beginIndex=n,this.endIndex=o}static parse(t,r){if(t.length<=2||t.length>=5)return r.error(`Expected 3 or 4 arguments, but found ${t.length-1} instead.`);const n=r.parse(t[1],1,xo),o=r.parse(t[2],2,Vn);if(!n||!o)return null;if(!By(n.type,[$c(xo),Io,xo]))return r.error(`Expected first argument to be of type array or string, but found ${ts(n.type)} instead`);if(t.length===4){const u=r.parse(t[3],3,Vn);return u?new j1(n.type,n,o,u):null}else return new j1(n.type,n,o)}evaluate(t){const r=this.input.evaluate(t),n=this.beginIndex.evaluate(t);if(!sd(r,["string","array"]))throw new jl(`Expected first argument to be of type array or string, but found ${ts(el(r))} instead.`);if(this.endIndex){const o=this.endIndex.evaluate(t);return r.slice(n,o)}return r.slice(n)}eachChild(t){t(this.input),t(this.beginIndex),this.endIndex&&t(this.endIndex)}outputDefined(){return!1}serialize(){if(this.endIndex!=null&&this.endIndex!==void 0){const t=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),t]}return["slice",this.input.serialize(),this.beginIndex.serialize()]}}var ZS=j1;function qb(e,t){return e==="=="||e==="!="?t.kind==="boolean"||t.kind==="string"||t.kind==="number"||t.kind==="null"||t.kind==="value":t.kind==="string"||t.kind==="number"||t.kind==="value"}function XS(e,t,r){return t===r}function YS(e,t,r){return t!==r}function JS(e,t,r){return t<r}function KS(e,t,r){return t>r}function QS(e,t,r){return t<=r}function eC(e,t,r){return t>=r}function E6(e,t,r,n){return n.compare(t,r)===0}function tC(e,t,r,n){return!E6(e,t,r,n)}function rC(e,t,r,n){return n.compare(t,r)<0}function nC(e,t,r,n){return n.compare(t,r)>0}function iC(e,t,r,n){return n.compare(t,r)<=0}function oC(e,t,r,n){return n.compare(t,r)>=0}function yp(e,t,r){const n=e!=="=="&&e!=="!=";return class S6{constructor(u,c,l){this.type=wo,this.lhs=u,this.rhs=c,this.collator=l,this.hasUntypedArgument=u.type.kind==="value"||c.type.kind==="value"}static parse(u,c){if(u.length!==3&&u.length!==4)return c.error("Expected two or three arguments.");const l=u[0];let h=c.parse(u[1],1,xo);if(!h)return null;if(!qb(l,h.type))return c.concat(1).error(`"${l}" comparisons are not supported for type '${ts(h.type)}'.`);let v=c.parse(u[2],2,xo);if(!v)return null;if(!qb(l,v.type))return c.concat(2).error(`"${l}" comparisons are not supported for type '${ts(v.type)}'.`);if(h.type.kind!==v.type.kind&&h.type.kind!=="value"&&v.type.kind!=="value")return c.error(`Cannot compare types '${ts(h.type)}' and '${ts(v.type)}'.`);n&&(h.type.kind==="value"&&v.type.kind!=="value"?h=new of(v.type,[h]):h.type.kind!=="value"&&v.type.kind==="value"&&(v=new of(h.type,[v])));let w=null;if(u.length===4){if(h.type.kind!=="string"&&v.type.kind!=="string"&&h.type.kind!=="value"&&v.type.kind!=="value")return c.error("Cannot use collator to compare non-string types.");if(w=c.parse(u[3],3,l2),!w)return null}return new S6(h,v,w)}evaluate(u){const c=this.lhs.evaluate(u),l=this.rhs.evaluate(u);if(n&&this.hasUntypedArgument){const h=el(c),v=el(l);if(h.kind!==v.kind||!(h.kind==="string"||h.kind==="number"))throw new jl(`Expected arguments for "${e}" to be (string, string) or (number, number), but found (${h.kind}, ${v.kind}) instead.`)}if(this.collator&&!n&&this.hasUntypedArgument){const h=el(c),v=el(l);if(h.kind!=="string"||v.kind!=="string")return t(u,c,l)}return this.collator?r(u,c,l,this.collator.evaluate(u)):t(u,c,l)}eachChild(u){u(this.lhs),u(this.rhs),this.collator&&u(this.collator)}outputDefined(){return!0}serialize(){const u=[e];return this.eachChild(c=>{u.push(c.serialize())}),u}}}const aC=yp("==",XS,E6),sC=yp("!=",YS,tC),lC=yp("<",JS,rC),uC=yp(">",KS,nC),cC=yp("<=",QS,iC),fC=yp(">=",eC,oC);class ov{constructor(t,r,n,o,u,c){this.type=Io,this.number=t,this.locale=r,this.currency=n,this.unit=o,this.minFractionDigits=u,this.maxFractionDigits=c}static parse(t,r){if(t.length!==3)return r.error("Expected two arguments.");const n=r.parse(t[1],1,Vn);if(!n)return null;const o=t[2];if(typeof o!="object"||Array.isArray(o))return r.error("NumberFormat options argument must be an object.");let u=null;if(o.locale&&(u=r.parse(o.locale,1,Io),!u))return null;let c=null;if(o.currency&&(c=r.parse(o.currency,1,Io),!c))return null;let l=null;if(o.unit&&(l=r.parse(o.unit,1,Io),!l))return null;let h=null;if(o["min-fraction-digits"]&&(h=r.parse(o["min-fraction-digits"],1,Vn),!h))return null;let v=null;return o["max-fraction-digits"]&&(v=r.parse(o["max-fraction-digits"],1,Vn),!v)?null:new ov(n,u,c,l,h,v)}evaluate(t){return new Intl.NumberFormat(this.locale?this.locale.evaluate(t):[],{style:this.currency&&"currency"||this.unit&&"unit"||"decimal",currency:this.currency?this.currency.evaluate(t):void 0,unit:this.unit?this.unit.evaluate(t):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(t):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(t):void 0}).format(this.number.evaluate(t))}eachChild(t){t(this.number),this.locale&&t(this.locale),this.currency&&t(this.currency),this.unit&&t(this.unit),this.minFractionDigits&&t(this.minFractionDigits),this.maxFractionDigits&&t(this.maxFractionDigits)}outputDefined(){return!1}serialize(){const t={};return this.locale&&(t.locale=this.locale.serialize()),this.currency&&(t.currency=this.currency.serialize()),this.unit&&(t.unit=this.unit.serialize()),this.minFractionDigits&&(t["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(t["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),t]}}class av{constructor(t){this.type=Vn,this.input=t}static parse(t,r){if(t.length!==2)return r.error(`Expected 1 argument, but found ${t.length-1} instead.`);const n=r.parse(t[1],1);return n?n.type.kind!=="array"&&n.type.kind!=="string"&&n.type.kind!=="value"?r.error(`Expected argument of type string or array, but found ${ts(n.type)} instead.`):new av(n):null}evaluate(t){const r=this.input.evaluate(t);if(typeof r=="string")return r.length;if(Array.isArray(r))return r.length;throw new jl(`Expected value to be of type string or array, but found ${ts(el(r))} instead.`)}eachChild(t){t(this.input)}outputDefined(){return!1}serialize(){const t=["length"];return this.eachChild(r=>{t.push(r.serialize())}),t}}var hC=av;const C6={"==":aC,"!=":sC,">":uC,"<":lC,">=":fC,"<=":cC,array:of,at:VS,boolean:of,case:WS,coalesce:k6,collator:h2,format:c2,image:f2,in:$S,"index-of":GS,interpolate:uf,"interpolate-hcl":uf,"interpolate-lab":uf,length:hC,let:A6,literal:N1,match:HS,number:of,"number-format":ov,object:of,slice:ZS,step:h6,string:of,"to-boolean":Fh,"to-color":Fh,"to-number":Fh,"to-string":Fh,var:c6,within:Wy};function Vb(e,[t,r,n,o]){t=t.evaluate(e),r=r.evaluate(e),n=n.evaluate(e);const u=o?o.evaluate(e):1,c=o6(t,r,n,u);if(c)throw new jl(c);return new Bl(t/255*u,r/255*u,n/255*u,u)}function $b(e,t){return e in t}function xm(e,t){const r=t[e];return typeof r>"u"?null:r}function pC(e,t,r,n){for(;r<=n;){const o=r+n>>1;if(t[o]===e)return!0;t[o]>e?n=o-1:r=o+1}return!1}function Wf(e){return{type:e}}gp.register(C6,{error:[cS,[Io],(e,[t])=>{throw new jl(t.evaluate(e))}],typeof:[Io,[xo],(e,[t])=>ts(el(t.evaluate(e)))],"to-rgba":[$c(Vn,4),[lf],(e,[t])=>t.evaluate(e).toArray()],rgb:[lf,[Vn,Vn,Vn],Vb],rgba:[lf,[Vn,Vn,Vn,Vn],Vb],has:{type:wo,overloads:[[[Io],(e,[t])=>$b(t.evaluate(e),e.properties())],[[Io,Yh],(e,[t,r])=>$b(t.evaluate(e),r.evaluate(e))]]},get:{type:xo,overloads:[[[Io],(e,[t])=>xm(t.evaluate(e),e.properties())],[[Io,Yh],(e,[t,r])=>xm(t.evaluate(e),r.evaluate(e))]]},"feature-state":[xo,[Io],(e,[t])=>xm(t.evaluate(e),e.featureState||{})],properties:[Yh,[],e=>e.properties()],"geometry-type":[Io,[],e=>e.geometryType()],id:[xo,[],e=>e.id()],zoom:[Vn,[],e=>e.globals.zoom],pitch:[Vn,[],e=>e.globals.pitch||0],"distance-from-center":[Vn,[],e=>e.distanceFromCenter()],"heatmap-density":[Vn,[],e=>e.globals.heatmapDensity||0],"line-progress":[Vn,[],e=>e.globals.lineProgress||0],"sky-radial-progress":[Vn,[],e=>e.globals.skyRadialProgress||0],accumulated:[xo,[],e=>e.globals.accumulated===void 0?null:e.globals.accumulated],"+":[Vn,Wf(Vn),(e,t)=>{let r=0;for(const n of t)r+=n.evaluate(e);return r}],"*":[Vn,Wf(Vn),(e,t)=>{let r=1;for(const n of t)r*=n.evaluate(e);return r}],"-":{type:Vn,overloads:[[[Vn,Vn],(e,[t,r])=>t.evaluate(e)-r.evaluate(e)],[[Vn],(e,[t])=>-t.evaluate(e)]]},"/":[Vn,[Vn,Vn],(e,[t,r])=>t.evaluate(e)/r.evaluate(e)],"%":[Vn,[Vn,Vn],(e,[t,r])=>t.evaluate(e)%r.evaluate(e)],ln2:[Vn,[],()=>Math.LN2],pi:[Vn,[],()=>Math.PI],e:[Vn,[],()=>Math.E],"^":[Vn,[Vn,Vn],(e,[t,r])=>Math.pow(t.evaluate(e),r.evaluate(e))],sqrt:[Vn,[Vn],(e,[t])=>Math.sqrt(t.evaluate(e))],log10:[Vn,[Vn],(e,[t])=>Math.log(t.evaluate(e))/Math.LN10],ln:[Vn,[Vn],(e,[t])=>Math.log(t.evaluate(e))],log2:[Vn,[Vn],(e,[t])=>Math.log(t.evaluate(e))/Math.LN2],sin:[Vn,[Vn],(e,[t])=>Math.sin(t.evaluate(e))],cos:[Vn,[Vn],(e,[t])=>Math.cos(t.evaluate(e))],tan:[Vn,[Vn],(e,[t])=>Math.tan(t.evaluate(e))],asin:[Vn,[Vn],(e,[t])=>Math.asin(t.evaluate(e))],acos:[Vn,[Vn],(e,[t])=>Math.acos(t.evaluate(e))],atan:[Vn,[Vn],(e,[t])=>Math.atan(t.evaluate(e))],min:[Vn,Wf(Vn),(e,t)=>Math.min(...t.map(r=>r.evaluate(e)))],max:[Vn,Wf(Vn),(e,t)=>Math.max(...t.map(r=>r.evaluate(e)))],abs:[Vn,[Vn],(e,[t])=>Math.abs(t.evaluate(e))],round:[Vn,[Vn],(e,[t])=>{const r=t.evaluate(e);return r<0?-Math.round(-r):Math.round(r)}],floor:[Vn,[Vn],(e,[t])=>Math.floor(t.evaluate(e))],ceil:[Vn,[Vn],(e,[t])=>Math.ceil(t.evaluate(e))],"filter-==":[wo,[Io,xo],(e,[t,r])=>e.properties()[t.value]===r.value],"filter-id-==":[wo,[xo],(e,[t])=>e.id()===t.value],"filter-type-==":[wo,[Io],(e,[t])=>e.geometryType()===t.value],"filter-<":[wo,[Io,xo],(e,[t,r])=>{const n=e.properties()[t.value],o=r.value;return typeof n==typeof o&&n<o}],"filter-id-<":[wo,[xo],(e,[t])=>{const r=e.id(),n=t.value;return typeof r==typeof n&&r<n}],"filter->":[wo,[Io,xo],(e,[t,r])=>{const n=e.properties()[t.value],o=r.value;return typeof n==typeof o&&n>o}],"filter-id->":[wo,[xo],(e,[t])=>{const r=e.id(),n=t.value;return typeof r==typeof n&&r>n}],"filter-<=":[wo,[Io,xo],(e,[t,r])=>{const n=e.properties()[t.value],o=r.value;return typeof n==typeof o&&n<=o}],"filter-id-<=":[wo,[xo],(e,[t])=>{const r=e.id(),n=t.value;return typeof r==typeof n&&r<=n}],"filter->=":[wo,[Io,xo],(e,[t,r])=>{const n=e.properties()[t.value],o=r.value;return typeof n==typeof o&&n>=o}],"filter-id->=":[wo,[xo],(e,[t])=>{const r=e.id(),n=t.value;return typeof r==typeof n&&r>=n}],"filter-has":[wo,[xo],(e,[t])=>t.value in e.properties()],"filter-has-id":[wo,[],e=>e.id()!==null&&e.id()!==void 0],"filter-type-in":[wo,[$c(Io)],(e,[t])=>t.value.indexOf(e.geometryType())>=0],"filter-id-in":[wo,[$c(xo)],(e,[t])=>t.value.indexOf(e.id())>=0],"filter-in-small":[wo,[Io,$c(xo)],(e,[t,r])=>r.value.indexOf(e.properties()[t.value])>=0],"filter-in-large":[wo,[Io,$c(xo)],(e,[t,r])=>pC(e.properties()[t.value],r.value,0,r.value.length-1)],all:{type:wo,overloads:[[[wo,wo],(e,[t,r])=>t.evaluate(e)&&r.evaluate(e)],[Wf(wo),(e,t)=>{for(const r of t)if(!r.evaluate(e))return!1;return!0}]]},any:{type:wo,overloads:[[[wo,wo],(e,[t,r])=>t.evaluate(e)||r.evaluate(e)],[Wf(wo),(e,t)=>{for(const r of t)if(r.evaluate(e))return!0;return!1}]]},"!":[wo,[wo],(e,[t])=>!t.evaluate(e)],"is-supported-script":[wo,[Io],(e,[t])=>{const r=e.globals&&e.globals.isSupportedScript;return r?r(t.evaluate(e)):!0}],upcase:[Io,[Io],(e,[t])=>t.evaluate(e).toUpperCase()],downcase:[Io,[Io],(e,[t])=>t.evaluate(e).toLowerCase()],concat:[Io,Wf(xo),(e,t)=>t.map(r=>Hp(r.evaluate(e))).join("")],"resolved-locale":[Io,[l2],(e,[t])=>t.evaluate(e).resolvedLocale()]});var I6=C6;function Hg(e){return{result:"success",value:e}}function Dh(e){return{result:"error",value:e}}function dC(e){return e["property-type"]==="data-driven"||e["property-type"]==="cross-faded-data-driven"}function mC(e){return!!e.expression&&e.expression.parameters.indexOf("zoom")>-1}function T6(e){return!!e.expression&&e.expression.interpolated}function sv(e){return e instanceof Number?"number":e instanceof String?"string":e instanceof Boolean?"boolean":Array.isArray(e)?"array":e===null?"null":typeof e}function lv(e){return typeof e=="object"&&e!==null&&!Array.isArray(e)}function gC(e){return e}function uv(e,t){const r=t.type==="color",n=e.stops&&typeof e.stops[0][0]=="object",o=n||e.property!==void 0,u=n||!o,c=e.type||(T6(t)?"exponential":"interval");if(r&&(e=n6({},e),e.stops&&(e.stops=e.stops.map(w=>[w[0],Bl.parse(w[1])])),e.default?e.default=Bl.parse(e.default):e.default=Bl.parse(t.default)),e.colorSpace&&e.colorSpace!=="rgb"&&!x6[e.colorSpace])throw new Error(`Unknown color space: ${e.colorSpace}`);let l,h,v;if(c==="exponential")l=Gb;else if(c==="interval")l=vC;else if(c==="categorical"){l=yC,h=Object.create(null);for(const w of e.stops)h[w[0]]=w[1];v=typeof e.stops[0][0]}else if(c==="identity")l=_C;else throw new Error(`Unknown function type "${c}"`);if(n){const w={},E=[];for(let F=0;F<e.stops.length;F++){const U=e.stops[F],G=U[0].zoom;w[G]===void 0&&(w[G]={zoom:G,type:e.type,property:e.property,default:e.default,stops:[]},E.push(G)),w[G].stops.push([U[0].value,U[1]])}const T=[];for(const F of E)T.push([w[F].zoom,uv(w[F],t)]);const I={name:"linear"};return{kind:"composite",interpolationType:I,interpolationFactor:uf.interpolationFactor.bind(void 0,I),zoomStops:T.map(F=>F[0]),evaluate({zoom:F},U){return Gb({stops:T,base:e.base},t,F).evaluate(F,U)}}}else if(u){const w=c==="exponential"?{name:"exponential",base:e.base!==void 0?e.base:1}:null;return{kind:"camera",interpolationType:w,interpolationFactor:uf.interpolationFactor.bind(void 0,w),zoomStops:e.stops.map(E=>E[0]),evaluate:({zoom:E})=>l(e,t,E,h,v)}}else return{kind:"source",evaluate(w,E){const T=E&&E.properties?E.properties[e.property]:void 0;return T===void 0?Ad(e.default,t.default):l(e,t,T,h,v)}}}function Ad(e,t,r){if(e!==void 0)return e;if(t!==void 0)return t;if(r!==void 0)return r}function yC(e,t,r,n,o){const u=typeof r===o?n[r]:void 0;return Ad(u,e.default,t.default)}function vC(e,t,r){if(sv(r)!=="number")return Ad(e.default,t.default);const n=e.stops.length;if(n===1||r<=e.stops[0][0])return e.stops[0][1];if(r>=e.stops[n-1][0])return e.stops[n-1][1];const o=p2(e.stops.map(u=>u[0]),r);return e.stops[o][1]}function Gb(e,t,r){const n=e.base!==void 0?e.base:1;if(sv(r)!=="number")return Ad(e.default,t.default);const o=e.stops.length;if(o===1||r<=e.stops[0][0])return e.stops[0][1];if(r>=e.stops[o-1][0])return e.stops[o-1][1];const u=p2(e.stops.map(w=>w[0]),r),c=bC(r,n,e.stops[u][0],e.stops[u+1][0]),l=e.stops[u][1],h=e.stops[u+1][1];let v=d6[t.type]||gC;if(e.colorSpace&&e.colorSpace!=="rgb"){const w=x6[e.colorSpace];v=(E,T)=>w.reverse(w.interpolate(w.forward(E),w.forward(T),c))}return typeof l.evaluate=="function"?{evaluate(...w){const E=l.evaluate.apply(void 0,w),T=h.evaluate.apply(void 0,w);if(!(E===void 0||T===void 0))return v(E,T,c)}}:v(l,h,c)}function _C(e,t,r){return t.type==="color"?r=Bl.parse(r):t.type==="formatted"?r=m0.fromString(r.toString()):t.type==="resolvedImage"?r=pf.fromString(r.toString()):sv(r)!==t.type&&(t.type!=="enum"||!t.values[r])&&(r=void 0),Ad(r,e.default,t.default)}function bC(e,t,r,n){const o=n-r,u=e-r;return o===0?0:t===1?u/o:(Math.pow(t,u)-1)/(Math.pow(t,o)-1)}class L6{constructor(t,r){this.expression=t,this._warningHistory={},this._evaluator=new a6,this._defaultValue=r?kC(r):null,this._enumValues=r&&r.type==="enum"?r.values:null}evaluateWithoutErrorHandling(t,r,n,o,u,c,l,h){return this._evaluator.globals=t,this._evaluator.feature=r,this._evaluator.featureState=n,this._evaluator.canonical=o||null,this._evaluator.availableImages=u||null,this._evaluator.formattedSection=c,this._evaluator.featureTileCoord=l||null,this._evaluator.featureDistanceData=h||null,this.expression.evaluate(this._evaluator)}evaluate(t,r,n,o,u,c,l,h){this._evaluator.globals=t,this._evaluator.feature=r||null,this._evaluator.featureState=n||null,this._evaluator.canonical=o||null,this._evaluator.availableImages=u||null,this._evaluator.formattedSection=c||null,this._evaluator.featureTileCoord=l||null,this._evaluator.featureDistanceData=h||null;try{const v=this.expression.evaluate(this._evaluator);if(v==null||typeof v=="number"&&v!==v)return this._defaultValue;if(this._enumValues&&!(v in this._enumValues))throw new jl(`Expected value to be one of ${Object.keys(this._enumValues).map(w=>JSON.stringify(w)).join(", ")}, but found ${JSON.stringify(v)} instead.`);return v}catch(v){return this._warningHistory[v.message]||(this._warningHistory[v.message]=!0,typeof console<"u"&&console.warn(v.message)),this._defaultValue}}}function P6(e){return Array.isArray(e)&&e.length>0&&typeof e[0]=="string"&&e[0]in I6}function M6(e,t){const r=new f6(I6,[],t?xC(t):void 0),n=r.parse(e,void 0,void 0,void 0,t&&t.type==="string"?{typeAnnotation:"coerce"}:void 0);return n?Hg(new L6(n,t)):Dh(r.errors)}class Wg{constructor(t,r){this.kind=t,this._styleExpression=r,this.isStateDependent=t!=="constant"&&!Xy(r.expression)}evaluateWithoutErrorHandling(t,r,n,o,u,c){return this._styleExpression.evaluateWithoutErrorHandling(t,r,n,o,u,c)}evaluate(t,r,n,o,u,c){return this._styleExpression.evaluate(t,r,n,o,u,c)}}class Zg{constructor(t,r,n,o){this.kind=t,this.zoomStops=n,this._styleExpression=r,this.isStateDependent=t!=="camera"&&!Xy(r.expression),this.interpolationType=o}evaluateWithoutErrorHandling(t,r,n,o,u,c){return this._styleExpression.evaluateWithoutErrorHandling(t,r,n,o,u,c)}evaluate(t,r,n,o,u,c){return this._styleExpression.evaluate(t,r,n,o,u,c)}interpolationFactor(t,r,n){return this.interpolationType?uf.interpolationFactor(this.interpolationType,t,r,n):0}}function D6(e,t){if(e=M6(e,t),e.result==="error")return e;const r=e.value.expression,n=Zy(r);if(!n&&!dC(t))return Dh([new D0("","data expressions not supported")]);const o=Yy(r,["zoom","pitch","distance-from-center"]);if(!o&&!mC(t))return Dh([new D0("","zoom expressions not supported")]);const u=E1(r);if(!u&&!o)return Dh([new D0("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')]);if(u instanceof D0)return Dh([u]);if(u instanceof uf&&!T6(t))return Dh([new D0("",'"interpolate" expressions cannot be used with this property')]);if(!u)return Hg(n?new Wg("constant",e.value):new Wg("source",e.value));const c=u instanceof uf?u.interpolation:void 0;return Hg(n?new Zg("camera",e.value,u.labels,c):new Zg("composite",e.value,u.labels,c))}class d2{constructor(t,r){this._parameters=t,this._specification=r,n6(this,uv(this._parameters,this._specification))}static deserialize(t){return new d2(t._parameters,t._specification)}static serialize(t){return{_parameters:t._parameters,_specification:t._specification}}}function wC(e,t){if(lv(e))return new d2(e,t);if(P6(e)){const r=D6(e,t);if(r.result==="error")throw new Error(r.value.map(n=>`${n.key}: ${n.message}`).join(", "));return r.value}else{let r=e;return typeof e=="string"&&t.type==="color"&&(r=Bl.parse(e)),{kind:"constant",evaluate:()=>r}}}function E1(e){let t=null;if(e instanceof A6)t=E1(e.result);else if(e instanceof k6){for(const r of e.args)if(t=E1(r),t)break}else(e instanceof h6||e instanceof uf)&&e.input instanceof gp&&e.input.name==="zoom"&&(t=e);return t instanceof D0||e.eachChild(r=>{const n=E1(r);n instanceof D0?t=n:!t&&n?t=new D0("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):t&&n&&t!==n&&(t=new D0("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),t}function xC(e){const t={color:lf,string:Io,number:Vn,enum:Io,boolean:wo,formatted:u2,resolvedImage:kd};return e.type==="array"?$c(t[e.value]||xo,e.length):t[e.type]}function kC(e){return e.type==="color"&&(lv(e.default)||Array.isArray(e.default))?new Bl(0,0,0,0):e.type==="color"?Bl.parse(e.default)||null:e.default===void 0?null:e.default}function ld(e){return typeof e=="object"?["literal",e]:e}function AC(e,t){let r=e.stops;if(!r)return EC(e,t);const n=r&&typeof r[0][0]=="object",o=n||e.property!==void 0,u=n||!o;return r=r.map(c=>!o&&t.tokens&&typeof c[1]=="string"?[c[0],TC(c[1])]:[c[0],ld(c[1])]),n?SC(e,t,r):u?IC(e,t,r):Xg(e,t,r)}function EC(e,t){const r=["get",e.property];if(e.default===void 0)return t.type==="string"?["string",r]:r;if(t.type==="enum")return["match",r,Object.keys(t.values),r,e.default];{const n=[t.type==="color"?"to-color":t.type,r,ld(e.default)];return t.type==="array"&&n.splice(1,0,t.value,t.length||null),n}}function cv(e){switch(e.colorSpace){case"hcl":return"interpolate-hcl";case"lab":return"interpolate-lab";default:return"interpolate"}}function SC(e,t,r){const n={},o={},u=[];for(let l=0;l<r.length;l++){const h=r[l],v=h[0].zoom;n[v]===void 0&&(n[v]={zoom:v,type:e.type,property:e.property,default:e.default},o[v]=[],u.push(v)),o[v].push([h[0].value,h[1]])}if(hv({},t)==="exponential"){const l=[cv(e),["linear"],["zoom"]];for(const h of u){const v=Xg(n[h],t,o[h]);Kh(l,h,v,!1)}return l}else{const l=["step",["zoom"]];for(const h of u){const v=Xg(n[h],t,o[h]);Kh(l,h,v,!0)}return fv(l),l}}function CC(e,t){if(e!==void 0)return e;if(t!==void 0)return t}function Hb(e,t){const r=ld(CC(e.default,t.default));return r===void 0&&t.type==="resolvedImage"?"":r}function Xg(e,t,r){const n=hv(e,t),o=["get",e.property];if(n==="categorical"&&typeof r[0][0]=="boolean"){const u=["case"];for(const c of r)u.push(["==",o,c[0]],c[1]);return u.push(Hb(e,t)),u}else if(n==="categorical"){const u=["match",o];for(const c of r)Kh(u,c[0],c[1],!1);return u.push(Hb(e,t)),u}else if(n==="interval"){const u=["step",["number",o]];for(const c of r)Kh(u,c[0],c[1],!0);return fv(u),e.default===void 0?u:["case",["==",["typeof",o],"number"],u,ld(e.default)]}else if(n==="exponential"){const u=e.base!==void 0?e.base:1,c=[cv(e),u===1?["linear"]:["exponential",u],["number",o]];for(const l of r)Kh(c,l[0],l[1],!1);return e.default===void 0?c:["case",["==",["typeof",o],"number"],c,ld(e.default)]}else throw new Error(`Unknown property function type ${n}`)}function IC(e,t,r,n=["zoom"]){const o=hv(e,t);let u,c=!1;if(o==="interval")u=["step",n],c=!0;else if(o==="exponential"){const l=e.base!==void 0?e.base:1;u=[cv(e),l===1?["linear"]:["exponential",l],n]}else throw new Error(`Unknown zoom function type "${o}"`);for(const l of r)Kh(u,l[0],l[1],c);return fv(u),u}function fv(e){e[0]==="step"&&e.length===3&&(e.push(0),e.push(e[3]))}function Kh(e,t,r,n){e.length>3&&t===e[e.length-2]||(n&&e.length===2||e.push(t),e.push(r))}function hv(e,t){return e.type?e.type:t.expression.interpolated?"exponential":"interval"}function TC(e){const t=["concat"],r=/{([^{}]+)}/g;let n=0;for(let o=r.exec(e);o!==null;o=r.exec(e)){const u=e.slice(n,r.lastIndex-o[0].length);n=r.lastIndex,u.length>0&&t.push(u),t.push(["get",o[1]])}if(t.length===1)return e;if(n<e.length)t.push(e.slice(n));else if(t.length===2)return["to-string",t[1]];return t}function z6(e){if(e===!0||e===!1)return!0;if(!Array.isArray(e)||e.length===0)return!1;switch(e[0]){case"has":return e.length>=2&&e[1]!=="$id"&&e[1]!=="$type";case"in":return e.length>=3&&(typeof e[1]!="string"||Array.isArray(e[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return e.length!==3||Array.isArray(e[1])||Array.isArray(e[2]);case"any":case"all":for(const t of e.slice(1))if(!z6(t)&&typeof t!="boolean")return!1;return!0;default:return!0}}function LC(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var PC={};(function(e){var t=function(){var r=function(G,H,X,ee){for(X=X||{},ee=G.length;ee--;X[G[ee]]=H);return X},n=[1,12],o=[1,13],u=[1,9],c=[1,10],l=[1,11],h=[1,14],v=[1,15],w=[14,18,22,24],E=[18,22],T=[22,24],I={trace:function(){},yy:{},symbols_:{error:2,JSONString:3,STRING:4,JSONNumber:5,NUMBER:6,JSONNullLiteral:7,NULL:8,JSONBooleanLiteral:9,TRUE:10,FALSE:11,JSONText:12,JSONValue:13,EOF:14,JSONObject:15,JSONArray:16,"{":17,"}":18,JSONMemberList:19,JSONMember:20,":":21,",":22,"[":23,"]":24,JSONElementList:25,$accept:0,$end:1},terminals_:{2:"error",4:"STRING",6:"NUMBER",8:"NULL",10:"TRUE",11:"FALSE",14:"EOF",17:"{",18:"}",21:":",22:",",23:"[",24:"]"},productions_:[0,[3,1],[5,1],[7,1],[9,1],[9,1],[12,2],[13,1],[13,1],[13,1],[13,1],[13,1],[13,1],[15,2],[15,3],[20,3],[19,1],[19,3],[16,2],[16,3],[25,1],[25,3]],performAction:function(H,X,ee,K,se,ce,_e){var pe=ce.length-1;switch(se){case 1:this.$=new String(H.replace(/\\(\\|")/g,"$1").replace(/\\n/g,`
`).replace(/\\r/g,"\r").replace(/\\t/g,"	").replace(/\\v/g,"\v").replace(/\\f/g,"\f").replace(/\\b/g,"\b")),this.$.__line__=this._$.first_line;break;case 2:this.$=new Number(H),this.$.__line__=this._$.first_line;break;case 3:this.$=null;break;case 4:this.$=new Boolean(!0),this.$.__line__=this._$.first_line;break;case 5:this.$=new Boolean(!1),this.$.__line__=this._$.first_line;break;case 6:return this.$=ce[pe-1];case 13:this.$={},Object.defineProperty(this.$,"__line__",{value:this._$.first_line,enumerable:!1});break;case 14:case 19:this.$=ce[pe-1],Object.defineProperty(this.$,"__line__",{value:this._$.first_line,enumerable:!1});break;case 15:this.$=[ce[pe-2],ce[pe]];break;case 16:this.$={},this.$[ce[pe][0]]=ce[pe][1];break;case 17:this.$=ce[pe-2],ce[pe-2][ce[pe][0]]=ce[pe][1];break;case 18:this.$=[],Object.defineProperty(this.$,"__line__",{value:this._$.first_line,enumerable:!1});break;case 20:this.$=[ce[pe]];break;case 21:this.$=ce[pe-2],ce[pe-2].push(ce[pe]);break}},table:[{3:5,4:n,5:6,6:o,7:3,8:u,9:4,10:c,11:l,12:1,13:2,15:7,16:8,17:h,23:v},{1:[3]},{14:[1,16]},r(w,[2,7]),r(w,[2,8]),r(w,[2,9]),r(w,[2,10]),r(w,[2,11]),r(w,[2,12]),r(w,[2,3]),r(w,[2,4]),r(w,[2,5]),r([14,18,21,22,24],[2,1]),r(w,[2,2]),{3:20,4:n,18:[1,17],19:18,20:19},{3:5,4:n,5:6,6:o,7:3,8:u,9:4,10:c,11:l,13:23,15:7,16:8,17:h,23:v,24:[1,21],25:22},{1:[2,6]},r(w,[2,13]),{18:[1,24],22:[1,25]},r(E,[2,16]),{21:[1,26]},r(w,[2,18]),{22:[1,28],24:[1,27]},r(T,[2,20]),r(w,[2,14]),{3:20,4:n,20:29},{3:5,4:n,5:6,6:o,7:3,8:u,9:4,10:c,11:l,13:30,15:7,16:8,17:h,23:v},r(w,[2,19]),{3:5,4:n,5:6,6:o,7:3,8:u,9:4,10:c,11:l,13:31,15:7,16:8,17:h,23:v},r(E,[2,17]),r(E,[2,15]),r(T,[2,21])],defaultActions:{16:[2,6]},parseError:function(H,X){if(X.recoverable)this.trace(H);else throw new Error(H)},parse:function(H){var X=this,ee=[0],K=[null],se=[],ce=this.table,_e="",pe=0,Ge=0,We=2,Ae=1,Ie=se.slice.call(arguments,1),Fe=Object.create(this.lexer),ot={yy:{}};for(var _t in this.yy)Object.prototype.hasOwnProperty.call(this.yy,_t)&&(ot.yy[_t]=this.yy[_t]);Fe.setInput(H,ot.yy),ot.yy.lexer=Fe,ot.yy.parser=this,typeof Fe.yylloc>"u"&&(Fe.yylloc={});var ht=Fe.yylloc;se.push(ht);var $e=Fe.options&&Fe.options.ranges;typeof ot.yy.parseError=="function"?this.parseError=ot.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;function ut(){var $t;return $t=Fe.lex()||Ae,typeof $t!="number"&&($t=X.symbols_[$t]||$t),$t}for(var bt,Ze,He,xe,Ne={},Pe,ft,At,Pt;;){if(Ze=ee[ee.length-1],this.defaultActions[Ze]?He=this.defaultActions[Ze]:((bt===null||typeof bt>"u")&&(bt=ut()),He=ce[Ze]&&ce[Ze][bt]),typeof He>"u"||!He.length||!He[0]){var Kt="";Pt=[];for(Pe in ce[Ze])this.terminals_[Pe]&&Pe>We&&Pt.push("'"+this.terminals_[Pe]+"'");Fe.showPosition?Kt="Parse error on line "+(pe+1)+`:
`+Fe.showPosition()+`
Expecting `+Pt.join(", ")+", got '"+(this.terminals_[bt]||bt)+"'":Kt="Parse error on line "+(pe+1)+": Unexpected "+(bt==Ae?"end of input":"'"+(this.terminals_[bt]||bt)+"'"),this.parseError(Kt,{text:Fe.match,token:this.terminals_[bt]||bt,line:Fe.yylineno,loc:ht,expected:Pt})}if(He[0]instanceof Array&&He.length>1)throw new Error("Parse Error: multiple actions possible at state: "+Ze+", token: "+bt);switch(He[0]){case 1:ee.push(bt),K.push(Fe.yytext),se.push(Fe.yylloc),ee.push(He[1]),bt=null,Ge=Fe.yyleng,_e=Fe.yytext,pe=Fe.yylineno,ht=Fe.yylloc;break;case 2:if(ft=this.productions_[He[1]][1],Ne.$=K[K.length-ft],Ne._$={first_line:se[se.length-(ft||1)].first_line,last_line:se[se.length-1].last_line,first_column:se[se.length-(ft||1)].first_column,last_column:se[se.length-1].last_column},$e&&(Ne._$.range=[se[se.length-(ft||1)].range[0],se[se.length-1].range[1]]),xe=this.performAction.apply(Ne,[_e,Ge,pe,ot.yy,He[1],K,se].concat(Ie)),typeof xe<"u")return xe;ft&&(ee=ee.slice(0,-1*ft*2),K=K.slice(0,-1*ft),se=se.slice(0,-1*ft)),ee.push(this.productions_[He[1]][0]),K.push(Ne.$),se.push(Ne._$),At=ce[ee[ee.length-2]][ee[ee.length-1]],ee.push(At);break;case 3:return!0}}return!0}},F=function(){var G={EOF:1,parseError:function(X,ee){if(this.yy.parser)this.yy.parser.parseError(X,ee);else throw new Error(X)},setInput:function(H,X){return this.yy=X||this.yy||{},this._input=H,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var H=this._input[0];this.yytext+=H,this.yyleng++,this.offset++,this.match+=H,this.matched+=H;var X=H.match(/(?:\r\n?|\n).*/g);return X?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),H},unput:function(H){var X=H.length,ee=H.split(/(?:\r\n?|\n)/g);this._input=H+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-X),this.offset-=X;var K=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),ee.length-1&&(this.yylineno-=ee.length-1);var se=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:ee?(ee.length===K.length?this.yylloc.first_column:0)+K[K.length-ee.length].length-ee[0].length:this.yylloc.first_column-X},this.options.ranges&&(this.yylloc.range=[se[0],se[0]+this.yyleng-X]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},less:function(H){this.unput(this.match.slice(H))},pastInput:function(){var H=this.matched.substr(0,this.matched.length-this.match.length);return(H.length>20?"...":"")+H.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var H=this.match;return H.length<20&&(H+=this._input.substr(0,20-H.length)),(H.substr(0,20)+(H.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var H=this.pastInput(),X=new Array(H.length+1).join("-");return H+this.upcomingInput()+`
`+X+"^"},test_match:function(H,X){var ee,K,se;if(this.options.backtrack_lexer&&(se={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(se.yylloc.range=this.yylloc.range.slice(0))),K=H[0].match(/(?:\r\n?|\n).*/g),K&&(this.yylineno+=K.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:K?K[K.length-1].length-K[K.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+H[0].length},this.yytext+=H[0],this.match+=H[0],this.matches=H,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(H[0].length),this.matched+=H[0],ee=this.performAction.call(this,this.yy,this,X,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),ee)return ee;if(this._backtrack){for(var ce in se)this[ce]=se[ce];return!1}return!1},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var H,X,ee,K;this._more||(this.yytext="",this.match="");for(var se=this._currentRules(),ce=0;ce<se.length;ce++)if(ee=this._input.match(this.rules[se[ce]]),ee&&(!X||ee[0].length>X[0].length)){if(X=ee,K=ce,this.options.backtrack_lexer){if(H=this.test_match(ee,se[ce]),H!==!1)return H;if(this._backtrack){X=!1;continue}else return!1}else if(!this.options.flex)break}return X?(H=this.test_match(X,se[K]),H!==!1?H:!1):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var X=this.next();return X||this.lex()},begin:function(X){this.conditionStack.push(X)},popState:function(){var X=this.conditionStack.length-1;return X>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(X){return X=this.conditionStack.length-1-Math.abs(X||0),X>=0?this.conditionStack[X]:"INITIAL"},pushState:function(X){this.begin(X)},stateStackSize:function(){return this.conditionStack.length},options:{},performAction:function(X,ee,K,se){switch(K){case 0:break;case 1:return 6;case 2:return ee.yytext=ee.yytext.substr(1,ee.yyleng-2),4;case 3:return 17;case 4:return 18;case 5:return 23;case 6:return 24;case 7:return 22;case 8:return 21;case 9:return 10;case 10:return 11;case 11:return 8;case 12:return 14;case 13:return"INVALID"}},rules:[/^(?:\s+)/,/^(?:(-?([0-9]|[1-9][0-9]+))(\.[0-9]+)?([eE][-+]?[0-9]+)?\b)/,/^(?:"(?:\\[\\"bfnrt/]|\\u[a-fA-F0-9]{4}|[^\\\0-\x09\x0a-\x1f"])*")/,/^(?:\{)/,/^(?:\})/,/^(?:\[)/,/^(?:\])/,/^(?:,)/,/^(?::)/,/^(?:true\b)/,/^(?:false\b)/,/^(?:null\b)/,/^(?:$)/,/^(?:.)/],conditions:{INITIAL:{rules:[0,1,2,3,4,5,6,7,8,9,10,11,12,13],inclusive:!0}}};return G}();I.lexer=F;function U(){this.yy={}}return U.prototype=I,I.Parser=U,new U}();typeof LC<"u"&&(e.parser=t,e.Parser=t.Parser,e.parse=function(){return t.parse.apply(t,arguments)})})(PC);const MC={StyleExpression:L6,isExpression:P6,isExpressionFilter:z6,createExpression:M6,createPropertyExpression:D6,normalizePropertyExpression:wC,ZoomConstantExpression:Wg,ZoomDependentExpression:Zg,StylePropertyFunction:d2},DC={convertFunction:AC,createFunction:uv,isFunction:lv};function zC(e){var t=e.expr,r=e.layer,n=Math.min(t(r,"paint","circle-radius"),8),o=Math.min(t(r,"paint","circle-stroke-width"),4),u=t(r,"paint","circle-color"),c=t(r,"paint","circle-opacity"),l=t(r,"paint","circle-stroke-color"),h=t(r,"paint","circle-stroke-opacity"),v=n-o/2;return{element:"svg",attributes:{viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",style:{filter:"blur("+t(r,"paint","circle-blur")*v+"px)"}},children:[{element:"circle",attributes:{key:"l1",cx:10,cy:10,fill:u,opacity:c,r:v}},{element:"circle",attributes:{key:"l2",cx:10,cy:10,fill:"transparent",opacity:h,r:n,"stroke-width":o,stroke:l}}]}}function NC(e){var t=e.expr,r=e.layer;return{element:"div",attributes:{style:{width:"100%",height:"100%",backgroundImage:"url("+(0,e.image)(t(r,"paint","fill-pattern"))+")",backgroundColor:t(r,"paint","fill-color"),opacity:t(r,"paint","fill-opacity"),backgroundSize:"66% 66%",backgroundPosition:"center"}}}}function RC(e){var t=e.layer,r=e.expr,n=(0,e.image)(r(t,"paint","line-pattern")),o={stroke:n?"url(#img1)":r(t,"paint","line-color"),strokeWidth:Math.max(2,Math.min(r(t,"paint","line-width"),8)),strokeOpacity:r(t,"paint","line-opacity"),strokeDasharray:r(t,"paint","line-dasharray")},u=o.strokeWidth,c="stroke: "+o.stroke+";";return o.strokeOpacity&&(c+="stroke-opacity: "+o.strokeOpacity+";"),o.strokeDasharray&&(c+="stroke-dasharray: "+o.strokeDasharray+";"),{element:"svg",attributes:{viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},children:[{element:"defs",attributes:{key:"defs"},children:[{element:"pattern",attributes:{key:"pattern",id:"img1",x:0,y:0,width:o.strokeWidth,height:o.strokeWidth,patternUnits:"userSpaceOnUse",patternTransform:"translate("+-u/2+" "+-u/2+") rotate(45)"},children:[{element:"image",attributes:{key:"img",xlinkHref:n,x:0,y:0,width:o.strokeWidth,height:o.strokeWidth}}]}]},{element:"path",attributes:{key:"path",style:c,d:"M0 20 L 20 0"}}]}}function OC(e){return function(l){var h=l.image,v=(0,l.expr)(l.layer,"layout","icon-image");if(!v)return null;var w=h(v);return w?{element:"div",attributes:{style:{backgroundImage:"url("+w+")",backgroundSize:"contain",backgroundPosition:"center",backgroundRepeat:"no-repeat",width:"100%",height:"100%"}}}:null}(e)||(o=(r=(t=e).expr)(n=t.layer,"paint","text-color"),u=r(n,"paint","text-opacity"),{element:"svg",attributes:{viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},children:[{element:"path",attributes:{key:"l1",d:c="M 4,4 L 16,4 L 16,7 L 11.5 7 L 11.5 16 L 8.5 16 L 8.5 7 L 4 7 Z",stroke:r(n,"paint","text-halo-color"),"stroke-width":2*r(n,"paint","text-halo-width"),fill:"transparent","stroke-linejoin":"round"}},{element:"path",attributes:{key:"l2",d:c,fill:"white"}},{element:"path",attributes:{key:"l3",d:c,fill:o,opacity:u}}]});var t,r,n,o,u,c}var FC=[["background"],["circle"],["fill-extrusion"],["fill"],["heatmap"],["hillshade"],["line"],["raster"],["icon","symbol"],["text","symbol"]];function BC(e){var t,r=e.sprite,n=e.layer,o={circle:zC,symbol:OC,line:RC,fill:NC}[n.type],u=(t=e.zoom,function(c,l,h){var v=function(F){var U=FC.find(function(G){return F.startsWith(G[0])});return U?U[1]||U[0]:null}(h),w=WE[l+"_"+v][h];if(!c[l])return w.default;var E=c[l][h];if(E===void 0)return w.default;if(typeof E=="object"){var T;if(Array.isArray(E)){if(w.type==="array")return E;T=MC.createExpression(E).value}else T=DC.createFunction(E,w);if(!T.evaluate)return null;var I=T.evaluate({zoom:t},{});return I?I.name||I:null}return E});return o?o({layer:n,expr:u,image:function(c){if(r&&r.json){var l=r.json[c];if(l)return h=r.image,w=(v=l).x,E=v.y,T=v.width,I=v.height,(F=document.createElement("canvas")).width=2*T,F.height=2*I,F.getContext("2d").drawImage(h,2*w,2*E,2*T,2*I,0,0,2*T,2*I),F.toDataURL()}var h,v,w,E,T,I,F;return null}}):null}var Yg={},jC={get exports(){return Yg},set exports(e){Yg=e}};/**
 * chroma.js - JavaScript library for color conversions
 *
 * Copyright (c) 2011-2019, Gregor Aisch
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions are met:
 *
 * 1. Redistributions of source code must retain the above copyright notice, this
 * list of conditions and the following disclaimer.
 *
 * 2. Redistributions in binary form must reproduce the above copyright notice,
 * this list of conditions and the following disclaimer in the documentation
 * and/or other materials provided with the distribution.
 *
 * 3. The name Gregor Aisch may not be used to endorse or promote products
 * derived from this software without specific prior written permission.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS"
 * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
 * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
 * DISCLAIMED. IN NO EVENT SHALL GREGOR AISCH OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT,
 * INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING,
 * BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
 * DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY
 * OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
 * NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE,
 * EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 *
 * -------------------------------------------------------
 *
 * chroma.js includes colors from colorbrewer2.org, which are released under
 * the following license:
 *
 * Copyright (c) 2002 Cynthia Brewer, Mark Harrower,
 * and The Pennsylvania State University.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing,
 * software distributed under the License is distributed on an
 * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND,
 * either express or implied. See the License for the specific
 * language governing permissions and limitations under the License.
 *
 * ------------------------------------------------------
 *
 * Named colors are taken from X11 Color Names.
 * http://www.w3.org/TR/css3-color/#svg-color
 *
 * @preserve
 */(function(e,t){(function(r,n){e.exports=n()})(Hc,function(){for(var r=function(ue,we,qe){return we===void 0&&(we=0),qe===void 0&&(qe=1),ue<we?we:ue>qe?qe:ue},n=r,o=function(ue){ue._clipped=!1,ue._unclipped=ue.slice(0);for(var we=0;we<=3;we++)we<3?((ue[we]<0||ue[we]>255)&&(ue._clipped=!0),ue[we]=n(ue[we],0,255)):we===3&&(ue[we]=n(ue[we],0,1));return ue},u={},c=0,l=["Boolean","Number","String","Function","Array","Date","RegExp","Undefined","Null"];c<l.length;c+=1){var h=l[c];u["[object "+h+"]"]=h.toLowerCase()}var v=function(ue){return u[Object.prototype.toString.call(ue)]||"object"},w=v,E=function(ue,we){return we===void 0&&(we=null),ue.length>=3?Array.prototype.slice.call(ue):w(ue[0])=="object"&&we?we.split("").filter(function(qe){return ue[0][qe]!==void 0}).map(function(qe){return ue[0][qe]}):ue[0]},T=v,I=function(ue){if(ue.length<2)return null;var we=ue.length-1;return T(ue[we])=="string"?ue[we].toLowerCase():null},F=Math.PI,U={clip_rgb:o,limit:r,type:v,unpack:E,last:I,PI:F,TWOPI:F*2,PITHIRD:F/3,DEG2RAD:F/180,RAD2DEG:180/F},G={format:{},autodetect:[]},H=U.last,X=U.clip_rgb,ee=U.type,K=G,se=function(){for(var we=[],qe=arguments.length;qe--;)we[qe]=arguments[qe];var xt=this;if(ee(we[0])==="object"&&we[0].constructor&&we[0].constructor===this.constructor)return we[0];var nr=H(we),sr=!1;if(!nr){sr=!0,K.sorted||(K.autodetect=K.autodetect.sort(function(yn,Jn){return Jn.p-yn.p}),K.sorted=!0);for(var Zt=0,_r=K.autodetect;Zt<_r.length;Zt+=1){var Cr=_r[Zt];if(nr=Cr.test.apply(Cr,we),nr)break}}if(K.format[nr]){var on=K.format[nr].apply(null,sr?we:we.slice(0,-1));xt._rgb=X(on)}else throw new Error("unknown format: "+we);xt._rgb.length===3&&xt._rgb.push(1)};se.prototype.toString=function(){return ee(this.hex)=="function"?this.hex():"["+this._rgb.join(",")+"]"};var ce=se,_e=function(){for(var ue=[],we=arguments.length;we--;)ue[we]=arguments[we];return new(Function.prototype.bind.apply(_e.Color,[null].concat(ue)))};_e.Color=ce,_e.version="2.4.2";var pe=_e,Ge=U.unpack,We=Math.max,Ae=function(){for(var ue=[],we=arguments.length;we--;)ue[we]=arguments[we];var qe=Ge(ue,"rgb"),xt=qe[0],nr=qe[1],sr=qe[2];xt=xt/255,nr=nr/255,sr=sr/255;var Zt=1-We(xt,We(nr,sr)),_r=Zt<1?1/(1-Zt):0,Cr=(1-xt-Zt)*_r,on=(1-nr-Zt)*_r,yn=(1-sr-Zt)*_r;return[Cr,on,yn,Zt]},Ie=Ae,Fe=U.unpack,ot=function(){for(var ue=[],we=arguments.length;we--;)ue[we]=arguments[we];ue=Fe(ue,"cmyk");var qe=ue[0],xt=ue[1],nr=ue[2],sr=ue[3],Zt=ue.length>4?ue[4]:1;return sr===1?[0,0,0,Zt]:[qe>=1?0:255*(1-qe)*(1-sr),xt>=1?0:255*(1-xt)*(1-sr),nr>=1?0:255*(1-nr)*(1-sr),Zt]},_t=ot,ht=pe,$e=ce,ut=G,bt=U.unpack,Ze=U.type,He=Ie;$e.prototype.cmyk=function(){return He(this._rgb)},ht.cmyk=function(){for(var ue=[],we=arguments.length;we--;)ue[we]=arguments[we];return new(Function.prototype.bind.apply($e,[null].concat(ue,["cmyk"])))},ut.format.cmyk=_t,ut.autodetect.push({p:2,test:function(){for(var ue=[],we=arguments.length;we--;)ue[we]=arguments[we];if(ue=bt(ue,"cmyk"),Ze(ue)==="array"&&ue.length===4)return"cmyk"}});var xe=U.unpack,Ne=U.last,Pe=function(ue){return Math.round(ue*100)/100},ft=function(){for(var ue=[],we=arguments.length;we--;)ue[we]=arguments[we];var qe=xe(ue,"hsla"),xt=Ne(ue)||"lsa";return qe[0]=Pe(qe[0]||0),qe[1]=Pe(qe[1]*100)+"%",qe[2]=Pe(qe[2]*100)+"%",xt==="hsla"||qe.length>3&&qe[3]<1?(qe[3]=qe.length>3?qe[3]:1,xt="hsla"):qe.length=3,xt+"("+qe.join(",")+")"},At=ft,Pt=U.unpack,Kt=function(){for(var ue=[],we=arguments.length;we--;)ue[we]=arguments[we];ue=Pt(ue,"rgba");var qe=ue[0],xt=ue[1],nr=ue[2];qe/=255,xt/=255,nr/=255;var sr=Math.min(qe,xt,nr),Zt=Math.max(qe,xt,nr),_r=(Zt+sr)/2,Cr,on;return Zt===sr?(Cr=0,on=Number.NaN):Cr=_r<.5?(Zt-sr)/(Zt+sr):(Zt-sr)/(2-Zt-sr),qe==Zt?on=(xt-nr)/(Zt-sr):xt==Zt?on=2+(nr-qe)/(Zt-sr):nr==Zt&&(on=4+(qe-xt)/(Zt-sr)),on*=60,on<0&&(on+=360),ue.length>3&&ue[3]!==void 0?[on,Cr,_r,ue[3]]:[on,Cr,_r]},$t=Kt,br=U.unpack,Gt=U.last,Rr=At,Mr=$t,Kr=Math.round,St=function(){for(var ue=[],we=arguments.length;we--;)ue[we]=arguments[we];var qe=br(ue,"rgba"),xt=Gt(ue)||"rgb";return xt.substr(0,3)=="hsl"?Rr(Mr(qe),xt):(qe[0]=Kr(qe[0]),qe[1]=Kr(qe[1]),qe[2]=Kr(qe[2]),(xt==="rgba"||qe.length>3&&qe[3]<1)&&(qe[3]=qe.length>3?qe[3]:1,xt="rgba"),xt+"("+qe.slice(0,xt==="rgb"?3:4).join(",")+")")},ct=St,Or=U.unpack,ln=Math.round,Wt=function(){for(var ue,we=[],qe=arguments.length;qe--;)we[qe]=arguments[qe];we=Or(we,"hsl");var xt=we[0],nr=we[1],sr=we[2],Zt,_r,Cr;if(nr===0)Zt=_r=Cr=sr*255;else{var on=[0,0,0],yn=[0,0,0],Jn=sr<.5?sr*(1+nr):sr+nr-sr*nr,_n=2*sr-Jn,Kn=xt/360;on[0]=Kn+1/3,on[1]=Kn,on[2]=Kn-1/3;for(var ui=0;ui<3;ui++)on[ui]<0&&(on[ui]+=1),on[ui]>1&&(on[ui]-=1),6*on[ui]<1?yn[ui]=_n+(Jn-_n)*6*on[ui]:2*on[ui]<1?yn[ui]=Jn:3*on[ui]<2?yn[ui]=_n+(Jn-_n)*(2/3-on[ui])*6:yn[ui]=_n;ue=[ln(yn[0]*255),ln(yn[1]*255),ln(yn[2]*255)],Zt=ue[0],_r=ue[1],Cr=ue[2]}return we.length>3?[Zt,_r,Cr,we[3]]:[Zt,_r,Cr,1]},Ur=Wt,mn=Ur,en=G,On=/^rgb\(\s*(-?\d+),\s*(-?\d+)\s*,\s*(-?\d+)\s*\)$/,Zn=/^rgba\(\s*(-?\d+),\s*(-?\d+)\s*,\s*(-?\d+)\s*,\s*([01]|[01]?\.\d+)\)$/,ai=/^rgb\(\s*(-?\d+(?:\.\d+)?)%,\s*(-?\d+(?:\.\d+)?)%\s*,\s*(-?\d+(?:\.\d+)?)%\s*\)$/,_i=/^rgba\(\s*(-?\d+(?:\.\d+)?)%,\s*(-?\d+(?:\.\d+)?)%\s*,\s*(-?\d+(?:\.\d+)?)%\s*,\s*([01]|[01]?\.\d+)\)$/,hi=/^hsl\(\s*(-?\d+(?:\.\d+)?),\s*(-?\d+(?:\.\d+)?)%\s*,\s*(-?\d+(?:\.\d+)?)%\s*\)$/,yr=/^hsla\(\s*(-?\d+(?:\.\d+)?),\s*(-?\d+(?:\.\d+)?)%\s*,\s*(-?\d+(?:\.\d+)?)%\s*,\s*([01]|[01]?\.\d+)\)$/,Vr=Math.round,wi=function(ue){ue=ue.toLowerCase().trim();var we;if(en.format.named)try{return en.format.named(ue)}catch{}if(we=ue.match(On)){for(var qe=we.slice(1,4),xt=0;xt<3;xt++)qe[xt]=+qe[xt];return qe[3]=1,qe}if(we=ue.match(Zn)){for(var nr=we.slice(1,5),sr=0;sr<4;sr++)nr[sr]=+nr[sr];return nr}if(we=ue.match(ai)){for(var Zt=we.slice(1,4),_r=0;_r<3;_r++)Zt[_r]=Vr(Zt[_r]*2.55);return Zt[3]=1,Zt}if(we=ue.match(_i)){for(var Cr=we.slice(1,5),on=0;on<3;on++)Cr[on]=Vr(Cr[on]*2.55);return Cr[3]=+Cr[3],Cr}if(we=ue.match(hi)){var yn=we.slice(1,4);yn[1]*=.01,yn[2]*=.01;var Jn=mn(yn);return Jn[3]=1,Jn}if(we=ue.match(yr)){var _n=we.slice(1,4);_n[1]*=.01,_n[2]*=.01;var Kn=mn(_n);return Kn[3]=+we[4],Kn}};wi.test=function(ue){return On.test(ue)||Zn.test(ue)||ai.test(ue)||_i.test(ue)||hi.test(ue)||yr.test(ue)};var xn=wi,si=pe,fr=ce,or=G,Yr=U.type,un=ct,Nr=xn;fr.prototype.css=function(ue){return un(this._rgb,ue)},si.css=function(){for(var ue=[],we=arguments.length;we--;)ue[we]=arguments[we];return new(Function.prototype.bind.apply(fr,[null].concat(ue,["css"])))},or.format.css=Nr,or.autodetect.push({p:5,test:function(ue){for(var we=[],qe=arguments.length-1;qe-- >0;)we[qe]=arguments[qe+1];if(!we.length&&Yr(ue)==="string"&&Nr.test(ue))return"css"}});var pn=ce,Yn=pe,ci=G,No=U.unpack;ci.format.gl=function(){for(var ue=[],we=arguments.length;we--;)ue[we]=arguments[we];var qe=No(ue,"rgba");return qe[0]*=255,qe[1]*=255,qe[2]*=255,qe},Yn.gl=function(){for(var ue=[],we=arguments.length;we--;)ue[we]=arguments[we];return new(Function.prototype.bind.apply(pn,[null].concat(ue,["gl"])))},pn.prototype.gl=function(){var ue=this._rgb;return[ue[0]/255,ue[1]/255,ue[2]/255,ue[3]]};var gi=U.unpack,co=function(){for(var ue=[],we=arguments.length;we--;)ue[we]=arguments[we];var qe=gi(ue,"rgb"),xt=qe[0],nr=qe[1],sr=qe[2],Zt=Math.min(xt,nr,sr),_r=Math.max(xt,nr,sr),Cr=_r-Zt,on=Cr*100/255,yn=Zt/(255-Cr)*100,Jn;return Cr===0?Jn=Number.NaN:(xt===_r&&(Jn=(nr-sr)/Cr),nr===_r&&(Jn=2+(sr-xt)/Cr),sr===_r&&(Jn=4+(xt-nr)/Cr),Jn*=60,Jn<0&&(Jn+=360)),[Jn,on,yn]},li=co,to=U.unpack,yo=Math.floor,pi=function(){for(var ue,we,qe,xt,nr,sr,Zt=[],_r=arguments.length;_r--;)Zt[_r]=arguments[_r];Zt=to(Zt,"hcg");var Cr=Zt[0],on=Zt[1],yn=Zt[2],Jn,_n,Kn;yn=yn*255;var ui=on*255;if(on===0)Jn=_n=Kn=yn;else{Cr===360&&(Cr=0),Cr>360&&(Cr-=360),Cr<0&&(Cr+=360),Cr/=60;var Gi=yo(Cr),so=Cr-Gi,_o=yn*(1-on),jo=_o+ui*(1-so),La=_o+ui*so,ja=_o+ui;switch(Gi){case 0:ue=[ja,La,_o],Jn=ue[0],_n=ue[1],Kn=ue[2];break;case 1:we=[jo,ja,_o],Jn=we[0],_n=we[1],Kn=we[2];break;case 2:qe=[_o,ja,La],Jn=qe[0],_n=qe[1],Kn=qe[2];break;case 3:xt=[_o,jo,ja],Jn=xt[0],_n=xt[1],Kn=xt[2];break;case 4:nr=[La,_o,ja],Jn=nr[0],_n=nr[1],Kn=nr[2];break;case 5:sr=[ja,_o,jo],Jn=sr[0],_n=sr[1],Kn=sr[2];break}}return[Jn,_n,Kn,Zt.length>3?Zt[3]:1]},Ti=pi,Xo=U.unpack,vn=U.type,ze=pe,Ea=ce,ha=G,ra=li;Ea.prototype.hcg=function(){return ra(this._rgb)},ze.hcg=function(){for(var ue=[],we=arguments.length;we--;)ue[we]=arguments[we];return new(Function.prototype.bind.apply(Ea,[null].concat(ue,["hcg"])))},ha.format.hcg=Ti,ha.autodetect.push({p:1,test:function(){for(var ue=[],we=arguments.length;we--;)ue[we]=arguments[we];if(ue=Xo(ue,"hcg"),vn(ue)==="array"&&ue.length===3)return"hcg"}});var be=U.unpack,ye=U.last,De=Math.round,nt=function(){for(var ue=[],we=arguments.length;we--;)ue[we]=arguments[we];var qe=be(ue,"rgba"),xt=qe[0],nr=qe[1],sr=qe[2],Zt=qe[3],_r=ye(ue)||"auto";Zt===void 0&&(Zt=1),_r==="auto"&&(_r=Zt<1?"rgba":"rgb"),xt=De(xt),nr=De(nr),sr=De(sr);var Cr=xt<<16|nr<<8|sr,on="000000"+Cr.toString(16);on=on.substr(on.length-6);var yn="0"+De(Zt*255).toString(16);switch(yn=yn.substr(yn.length-2),_r.toLowerCase()){case"rgba":return"#"+on+yn;case"argb":return"#"+yn+on;default:return"#"+on}},st=nt,Rt=/^#?([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/,Re=/^#?([A-Fa-f0-9]{8}|[A-Fa-f0-9]{4})$/,Ht=function(ue){if(ue.match(Rt)){(ue.length===4||ue.length===7)&&(ue=ue.substr(1)),ue.length===3&&(ue=ue.split(""),ue=ue[0]+ue[0]+ue[1]+ue[1]+ue[2]+ue[2]);var we=parseInt(ue,16),qe=we>>16,xt=we>>8&255,nr=we&255;return[qe,xt,nr,1]}if(ue.match(Re)){(ue.length===5||ue.length===9)&&(ue=ue.substr(1)),ue.length===4&&(ue=ue.split(""),ue=ue[0]+ue[0]+ue[1]+ue[1]+ue[2]+ue[2]+ue[3]+ue[3]);var sr=parseInt(ue,16),Zt=sr>>24&255,_r=sr>>16&255,Cr=sr>>8&255,on=Math.round((sr&255)/255*100)/100;return[Zt,_r,Cr,on]}throw new Error("unknown hex color: "+ue)},Nt=Ht,ir=pe,Br=ce,nn=U.type,Fr=G,$n=st;Br.prototype.hex=function(ue){return $n(this._rgb,ue)},ir.hex=function(){for(var ue=[],we=arguments.length;we--;)ue[we]=arguments[we];return new(Function.prototype.bind.apply(Br,[null].concat(ue,["hex"])))},Fr.format.hex=Nt,Fr.autodetect.push({p:4,test:function(ue){for(var we=[],qe=arguments.length-1;qe-- >0;)we[qe]=arguments[qe+1];if(!we.length&&nn(ue)==="string"&&[3,4,5,6,7,8,9].indexOf(ue.length)>=0)return"hex"}});var Wn=U.unpack,sn=U.TWOPI,yi=Math.min,Ai=Math.sqrt,Xi=Math.acos,Ii=function(){for(var ue=[],we=arguments.length;we--;)ue[we]=arguments[we];var qe=Wn(ue,"rgb"),xt=qe[0],nr=qe[1],sr=qe[2];xt/=255,nr/=255,sr/=255;var Zt,_r=yi(xt,nr,sr),Cr=(xt+nr+sr)/3,on=Cr>0?1-_r/Cr:0;return on===0?Zt=NaN:(Zt=(xt-nr+(xt-sr))/2,Zt/=Ai((xt-nr)*(xt-nr)+(xt-sr)*(nr-sr)),Zt=Xi(Zt),sr>nr&&(Zt=sn-Zt),Zt/=sn),[Zt*360,on,Cr]},qi=Ii,ro=U.unpack,ko=U.limit,Yo=U.TWOPI,So=U.PITHIRD,Jo=Math.cos,Vl=function(){for(var ue=[],we=arguments.length;we--;)ue[we]=arguments[we];ue=ro(ue,"hsi");var qe=ue[0],xt=ue[1],nr=ue[2],sr,Zt,_r;return isNaN(qe)&&(qe=0),isNaN(xt)&&(xt=0),qe>360&&(qe-=360),qe<0&&(qe+=360),qe/=360,qe<1/3?(_r=(1-xt)/3,sr=(1+xt*Jo(Yo*qe)/Jo(So-Yo*qe))/3,Zt=1-(_r+sr)):qe<2/3?(qe-=1/3,sr=(1-xt)/3,Zt=(1+xt*Jo(Yo*qe)/Jo(So-Yo*qe))/3,_r=1-(sr+Zt)):(qe-=2/3,Zt=(1-xt)/3,_r=(1+xt*Jo(Yo*qe)/Jo(So-Yo*qe))/3,sr=1-(Zt+_r)),sr=ko(nr*sr*3),Zt=ko(nr*Zt*3),_r=ko(nr*_r*3),[sr*255,Zt*255,_r*255,ue.length>3?ue[3]:1]},na=Vl,Ao=U.unpack,ml=U.type,gl=pe,gs=ce,$l=G,ys=qi;gs.prototype.hsi=function(){return ys(this._rgb)},gl.hsi=function(){for(var ue=[],we=arguments.length;we--;)ue[we]=arguments[we];return new(Function.prototype.bind.apply(gs,[null].concat(ue,["hsi"])))},$l.format.hsi=na,$l.autodetect.push({p:2,test:function(){for(var ue=[],we=arguments.length;we--;)ue[we]=arguments[we];if(ue=Ao(ue,"hsi"),ml(ue)==="array"&&ue.length===3)return"hsi"}});var Uu=U.unpack,$a=U.type,yl=pe,Gl=ce,qu=G,Vu=$t;Gl.prototype.hsl=function(){return Vu(this._rgb)},yl.hsl=function(){for(var ue=[],we=arguments.length;we--;)ue[we]=arguments[we];return new(Function.prototype.bind.apply(Gl,[null].concat(ue,["hsl"])))},qu.format.hsl=Ur,qu.autodetect.push({p:2,test:function(){for(var ue=[],we=arguments.length;we--;)ue[we]=arguments[we];if(ue=Uu(ue,"hsl"),$a(ue)==="array"&&ue.length===3)return"hsl"}});var tl=U.unpack,us=Math.min,Ps=Math.max,vl=function(){for(var ue=[],we=arguments.length;we--;)ue[we]=arguments[we];ue=tl(ue,"rgb");var qe=ue[0],xt=ue[1],nr=ue[2],sr=us(qe,xt,nr),Zt=Ps(qe,xt,nr),_r=Zt-sr,Cr,on,yn;return yn=Zt/255,Zt===0?(Cr=Number.NaN,on=0):(on=_r/Zt,qe===Zt&&(Cr=(xt-nr)/_r),xt===Zt&&(Cr=2+(nr-qe)/_r),nr===Zt&&(Cr=4+(qe-xt)/_r),Cr*=60,Cr<0&&(Cr+=360)),[Cr,on,yn]},du=vl,_l=U.unpack,mu=Math.floor,vs=function(){for(var ue,we,qe,xt,nr,sr,Zt=[],_r=arguments.length;_r--;)Zt[_r]=arguments[_r];Zt=_l(Zt,"hsv");var Cr=Zt[0],on=Zt[1],yn=Zt[2],Jn,_n,Kn;if(yn*=255,on===0)Jn=_n=Kn=yn;else{Cr===360&&(Cr=0),Cr>360&&(Cr-=360),Cr<0&&(Cr+=360),Cr/=60;var ui=mu(Cr),Gi=Cr-ui,so=yn*(1-on),_o=yn*(1-on*Gi),jo=yn*(1-on*(1-Gi));switch(ui){case 0:ue=[yn,jo,so],Jn=ue[0],_n=ue[1],Kn=ue[2];break;case 1:we=[_o,yn,so],Jn=we[0],_n=we[1],Kn=we[2];break;case 2:qe=[so,yn,jo],Jn=qe[0],_n=qe[1],Kn=qe[2];break;case 3:xt=[so,_o,yn],Jn=xt[0],_n=xt[1],Kn=xt[2];break;case 4:nr=[jo,so,yn],Jn=nr[0],_n=nr[1],Kn=nr[2];break;case 5:sr=[yn,so,_o],Jn=sr[0],_n=sr[1],Kn=sr[2];break}}return[Jn,_n,Kn,Zt.length>3?Zt[3]:1]},_s=vs,Ro=U.unpack,rl=U.type,R=pe,W=ce,ae=G,ke=du;W.prototype.hsv=function(){return ke(this._rgb)},R.hsv=function(){for(var ue=[],we=arguments.length;we--;)ue[we]=arguments[we];return new(Function.prototype.bind.apply(W,[null].concat(ue,["hsv"])))},ae.format.hsv=_s,ae.autodetect.push({p:2,test:function(){for(var ue=[],we=arguments.length;we--;)ue[we]=arguments[we];if(ue=Ro(ue,"hsv"),rl(ue)==="array"&&ue.length===3)return"hsv"}});var Ye={Kn:18,Xn:.95047,Yn:1,Zn:1.08883,t0:.137931034,t1:.206896552,t2:.12841855,t3:.008856452},dt=Ye,Mt=U.unpack,Tt=Math.pow,wr=function(){for(var ue=[],we=arguments.length;we--;)ue[we]=arguments[we];var qe=Mt(ue,"rgb"),xt=qe[0],nr=qe[1],sr=qe[2],Zt=ar(xt,nr,sr),_r=Zt[0],Cr=Zt[1],on=Zt[2],yn=116*Cr-16;return[yn<0?0:yn,500*(_r-Cr),200*(Cr-on)]},pr=function(ue){return(ue/=255)<=.04045?ue/12.92:Tt((ue+.055)/1.055,2.4)},vr=function(ue){return ue>dt.t3?Tt(ue,1/3):ue/dt.t2+dt.t0},ar=function(ue,we,qe){ue=pr(ue),we=pr(we),qe=pr(qe);var xt=vr((.4124564*ue+.3575761*we+.1804375*qe)/dt.Xn),nr=vr((.2126729*ue+.7151522*we+.072175*qe)/dt.Yn),sr=vr((.0193339*ue+.119192*we+.9503041*qe)/dt.Zn);return[xt,nr,sr]},$r=wr,cn=Ye,In=U.unpack,et=Math.pow,m=function(){for(var ue=[],we=arguments.length;we--;)ue[we]=arguments[we];ue=In(ue,"lab");var qe=ue[0],xt=ue[1],nr=ue[2],sr,Zt,_r,Cr,on,yn;return Zt=(qe+16)/116,sr=isNaN(xt)?Zt:Zt+xt/500,_r=isNaN(nr)?Zt:Zt-nr/200,Zt=cn.Yn*f(Zt),sr=cn.Xn*f(sr),_r=cn.Zn*f(_r),Cr=Pr(3.2404542*sr-1.5371385*Zt-.4985314*_r),on=Pr(-.969266*sr+1.8760108*Zt+.041556*_r),yn=Pr(.0556434*sr-.2040259*Zt+1.0572252*_r),[Cr,on,yn,ue.length>3?ue[3]:1]},Pr=function(ue){return 255*(ue<=.00304?12.92*ue:1.055*et(ue,1/2.4)-.055)},f=function(ue){return ue>cn.t1?ue*ue*ue:cn.t2*(ue-cn.t0)},L=m,kn=U.unpack,ii=U.type,To=pe,J=ce,Ri=G,bs=$r;J.prototype.lab=function(){return bs(this._rgb)},To.lab=function(){for(var ue=[],we=arguments.length;we--;)ue[we]=arguments[we];return new(Function.prototype.bind.apply(J,[null].concat(ue,["lab"])))},Ri.format.lab=L,Ri.autodetect.push({p:2,test:function(){for(var ue=[],we=arguments.length;we--;)ue[we]=arguments[we];if(ue=kn(ue,"lab"),ii(ue)==="array"&&ue.length===3)return"lab"}});var Gs=U.unpack,Pc=U.RAD2DEG,bl=Math.sqrt,Xa=Math.atan2,uc=Math.round,gu=function(){for(var ue=[],we=arguments.length;we--;)ue[we]=arguments[we];var qe=Gs(ue,"lab"),xt=qe[0],nr=qe[1],sr=qe[2],Zt=bl(nr*nr+sr*sr),_r=(Xa(sr,nr)*Pc+360)%360;return uc(Zt*1e4)===0&&(_r=Number.NaN),[xt,Zt,_r]},Mc=gu,yu=U.unpack,Qc=$r,$u=Mc,vu=function(){for(var ue=[],we=arguments.length;we--;)ue[we]=arguments[we];var qe=yu(ue,"rgb"),xt=qe[0],nr=qe[1],sr=qe[2],Zt=Qc(xt,nr,sr),_r=Zt[0],Cr=Zt[1],on=Zt[2];return $u(_r,Cr,on)},_u=vu,Hl=U.unpack,bu=U.DEG2RAD,jn=Math.sin,Fn=Math.cos,Gu=function(){for(var ue=[],we=arguments.length;we--;)ue[we]=arguments[we];var qe=Hl(ue,"lch"),xt=qe[0],nr=qe[1],sr=qe[2];return isNaN(sr)&&(sr=0),sr=sr*bu,[xt,Fn(sr)*nr,jn(sr)*nr]},Ms=Gu,ws=U.unpack,Wl=Ms,xs=L,Lo=function(){for(var ue=[],we=arguments.length;we--;)ue[we]=arguments[we];ue=ws(ue,"lch");var qe=ue[0],xt=ue[1],nr=ue[2],sr=Wl(qe,xt,nr),Zt=sr[0],_r=sr[1],Cr=sr[2],on=xs(Zt,_r,Cr),yn=on[0],Jn=on[1],_n=on[2];return[yn,Jn,_n,ue.length>3?ue[3]:1]},te=Lo,Le=U.unpack,pt=te,Bt=function(){for(var ue=[],we=arguments.length;we--;)ue[we]=arguments[we];var qe=Le(ue,"hcl").reverse();return pt.apply(void 0,qe)},ur=Bt,Xr=U.unpack,gn=U.type,Xn=pe,xi=ce,Oi=G,Yi=_u;xi.prototype.lch=function(){return Yi(this._rgb)},xi.prototype.hcl=function(){return Yi(this._rgb).reverse()},Xn.lch=function(){for(var ue=[],we=arguments.length;we--;)ue[we]=arguments[we];return new(Function.prototype.bind.apply(xi,[null].concat(ue,["lch"])))},Xn.hcl=function(){for(var ue=[],we=arguments.length;we--;)ue[we]=arguments[we];return new(Function.prototype.bind.apply(xi,[null].concat(ue,["hcl"])))},Oi.format.lch=te,Oi.format.hcl=ur,["lch","hcl"].forEach(function(ue){return Oi.autodetect.push({p:2,test:function(){for(var we=[],qe=arguments.length;qe--;)we[qe]=arguments[qe];if(we=Xr(we,ue),gn(we)==="array"&&we.length===3)return ue}})});var fo={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflower:"#6495ed",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",laserlemon:"#ffff54",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrod:"#fafad2",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",maroon2:"#7f0000",maroon3:"#b03060",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",purple2:"#7f007f",purple3:"#a020f0",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},qo=fo,Ko=ce,Qo=G,Da=U.type,aa=qo,Vi=Nt,za=st;Ko.prototype.name=function(){for(var ue=za(this._rgb,"rgb"),we=0,qe=Object.keys(aa);we<qe.length;we+=1){var xt=qe[we];if(aa[xt]===ue)return xt.toLowerCase()}return ue},Qo.format.named=function(ue){if(ue=ue.toLowerCase(),aa[ue])return Vi(aa[ue]);throw new Error("unknown color name: "+ue)},Qo.autodetect.push({p:5,test:function(ue){for(var we=[],qe=arguments.length-1;qe-- >0;)we[qe]=arguments[qe+1];if(!we.length&&Da(ue)==="string"&&aa[ue.toLowerCase()])return"named"}});var Sa=U.unpack,Zl=function(){for(var ue=[],we=arguments.length;we--;)ue[we]=arguments[we];var qe=Sa(ue,"rgb"),xt=qe[0],nr=qe[1],sr=qe[2];return(xt<<16)+(nr<<8)+sr},wl=Zl,Hu=U.type,Ds=function(ue){if(Hu(ue)=="number"&&ue>=0&&ue<=16777215){var we=ue>>16,qe=ue>>8&255,xt=ue&255;return[we,qe,xt,1]}throw new Error("unknown num color: "+ue)},xl=Ds,nl=pe,wu=ce,Na=G,xu=U.type,Xl=wl;wu.prototype.num=function(){return Xl(this._rgb)},nl.num=function(){for(var ue=[],we=arguments.length;we--;)ue[we]=arguments[we];return new(Function.prototype.bind.apply(wu,[null].concat(ue,["num"])))},Na.format.num=xl,Na.autodetect.push({p:5,test:function(){for(var ue=[],we=arguments.length;we--;)ue[we]=arguments[we];if(ue.length===1&&xu(ue[0])==="number"&&ue[0]>=0&&ue[0]<=16777215)return"num"}});var Hs=pe,kl=ce,Ra=G,Yl=U.unpack,Ws=U.type,Al=Math.round;kl.prototype.rgb=function(ue){return ue===void 0&&(ue=!0),ue===!1?this._rgb.slice(0,3):this._rgb.slice(0,3).map(Al)},kl.prototype.rgba=function(ue){return ue===void 0&&(ue=!0),this._rgb.slice(0,4).map(function(we,qe){return qe<3?ue===!1?we:Al(we):we})},Hs.rgb=function(){for(var ue=[],we=arguments.length;we--;)ue[we]=arguments[we];return new(Function.prototype.bind.apply(kl,[null].concat(ue,["rgb"])))},Ra.format.rgb=function(){for(var ue=[],we=arguments.length;we--;)ue[we]=arguments[we];var qe=Yl(ue,"rgba");return qe[3]===void 0&&(qe[3]=1),qe},Ra.autodetect.push({p:3,test:function(){for(var ue=[],we=arguments.length;we--;)ue[we]=arguments[we];if(ue=Yl(ue,"rgba"),Ws(ue)==="array"&&(ue.length===3||ue.length===4&&Ws(ue[3])=="number"&&ue[3]>=0&&ue[3]<=1))return"rgb"}});var is=Math.log,El=function(ue){var we=ue/100,qe,xt,nr;return we<66?(qe=255,xt=we<6?0:-155.25485562709179-.44596950469579133*(xt=we-2)+104.49216199393888*is(xt),nr=we<20?0:-254.76935184120902+.8274096064007395*(nr=we-10)+115.67994401066147*is(nr)):(qe=351.97690566805693+.114206453784165*(qe=we-55)-40.25366309332127*is(qe),xt=325.4494125711974+.07943456536662342*(xt=we-50)-28.0852963507957*is(xt),nr=255),[qe,xt,nr,1]},cc=El,Dc=cc,Sl=U.unpack,Ga=Math.round,zs=function(){for(var ue=[],we=arguments.length;we--;)ue[we]=arguments[we];for(var qe=Sl(ue,"rgb"),xt=qe[0],nr=qe[2],sr=1e3,Zt=4e4,_r=.4,Cr;Zt-sr>_r;){Cr=(Zt+sr)*.5;var on=Dc(Cr);on[2]/on[0]>=nr/xt?Zt=Cr:sr=Cr}return Ga(Cr)},Ns=zs,Ya=pe,sa=ce,Rs=G,la=Ns;sa.prototype.temp=sa.prototype.kelvin=sa.prototype.temperature=function(){return la(this._rgb)},Ya.temp=Ya.kelvin=Ya.temperature=function(){for(var ue=[],we=arguments.length;we--;)ue[we]=arguments[we];return new(Function.prototype.bind.apply(sa,[null].concat(ue,["temp"])))},Rs.format.temp=Rs.format.kelvin=Rs.format.temperature=cc;var Wu=U.unpack,cs=Math.cbrt,fs=Math.pow,no=Math.sign,ks=function(){for(var ue=[],we=arguments.length;we--;)ue[we]=arguments[we];var qe=Wu(ue,"rgb"),xt=qe[0],nr=qe[1],sr=qe[2],Zt=[Jl(xt/255),Jl(nr/255),Jl(sr/255)],_r=Zt[0],Cr=Zt[1],on=Zt[2],yn=cs(.4122214708*_r+.5363325363*Cr+.0514459929*on),Jn=cs(.2119034982*_r+.6806995451*Cr+.1073969566*on),_n=cs(.0883024619*_r+.2817188376*Cr+.6299787005*on);return[.2104542553*yn+.793617785*Jn-.0040720468*_n,1.9779984951*yn-2.428592205*Jn+.4505937099*_n,.0259040371*yn+.7827717662*Jn-.808675766*_n]},il=ks;function Jl(ue){var we=Math.abs(ue);return we<.04045?ue/12.92:(no(ue)||1)*fs((we+.055)/1.055,2.4)}var ku=U.unpack,Ca=Math.pow,Cl=Math.sign,ba=function(){for(var ue=[],we=arguments.length;we--;)ue[we]=arguments[we];ue=ku(ue,"lab");var qe=ue[0],xt=ue[1],nr=ue[2],sr=Ca(qe+.3963377774*xt+.2158037573*nr,3),Zt=Ca(qe-.1055613458*xt-.0638541728*nr,3),_r=Ca(qe-.0894841775*xt-1.291485548*nr,3);return[255*Oo(4.0767416621*sr-3.3077115913*Zt+.2309699292*_r),255*Oo(-1.2684380046*sr+2.6097574011*Zt-.3413193965*_r),255*Oo(-.0041960863*sr-.7034186147*Zt+1.707614701*_r),ue.length>3?ue[3]:1]},Pn=ba;function Oo(ue){var we=Math.abs(ue);return we>.0031308?(Cl(ue)||1)*(1.055*Ca(we,1/2.4)-.055):ue*12.92}var Ji=U.unpack,Fo=U.type,ga=pe,An=ce,As=G,Zu=il;An.prototype.oklab=function(){return Zu(this._rgb)},ga.oklab=function(){for(var ue=[],we=arguments.length;we--;)ue[we]=arguments[we];return new(Function.prototype.bind.apply(An,[null].concat(ue,["oklab"])))},As.format.oklab=Pn,As.autodetect.push({p:3,test:function(){for(var ue=[],we=arguments.length;we--;)ue[we]=arguments[we];if(ue=Ji(ue,"oklab"),Fo(ue)==="array"&&ue.length===3)return"oklab"}});var Xu=U.unpack,zc=il,e0=Mc,t0=function(){for(var ue=[],we=arguments.length;we--;)ue[we]=arguments[we];var qe=Xu(ue,"rgb"),xt=qe[0],nr=qe[1],sr=qe[2],Zt=zc(xt,nr,sr),_r=Zt[0],Cr=Zt[1],on=Zt[2];return e0(_r,Cr,on)},b0=t0,Mi=U.unpack,Nc=Ms,fc=Pn,ua=function(){for(var ue=[],we=arguments.length;we--;)ue[we]=arguments[we];ue=Mi(ue,"lch");var qe=ue[0],xt=ue[1],nr=ue[2],sr=Nc(qe,xt,nr),Zt=sr[0],_r=sr[1],Cr=sr[2],on=fc(Zt,_r,Cr),yn=on[0],Jn=on[1],_n=on[2];return[yn,Jn,_n,ue.length>3?ue[3]:1]},os=ua,ia=U.unpack,Zs=U.type,hc=pe,Kl=ce,Ql=G,eu=b0;Kl.prototype.oklch=function(){return eu(this._rgb)},hc.oklch=function(){for(var ue=[],we=arguments.length;we--;)ue[we]=arguments[we];return new(Function.prototype.bind.apply(Kl,[null].concat(ue,["oklch"])))},Ql.format.oklch=os,Ql.autodetect.push({p:3,test:function(){for(var ue=[],we=arguments.length;we--;)ue[we]=arguments[we];if(ue=ia(ue,"oklch"),Zs(ue)==="array"&&ue.length===3)return"oklch"}});var ho=ce,Es=U.type;ho.prototype.alpha=function(ue,we){return we===void 0&&(we=!1),ue!==void 0&&Es(ue)==="number"?we?(this._rgb[3]=ue,this):new ho([this._rgb[0],this._rgb[1],this._rgb[2],ue],"rgb"):this._rgb[3]};var Go=ce;Go.prototype.clipped=function(){return this._rgb._clipped||!1};var Ss=ce,Au=Ye;Ss.prototype.darken=function(ue){ue===void 0&&(ue=1);var we=this,qe=we.lab();return qe[0]-=Au.Kn*ue,new Ss(qe,"lab").alpha(we.alpha(),!0)},Ss.prototype.brighten=function(ue){return ue===void 0&&(ue=1),this.darken(-ue)},Ss.prototype.darker=Ss.prototype.darken,Ss.prototype.brighter=Ss.prototype.brighten;var Rc=ce;Rc.prototype.get=function(ue){var we=ue.split("."),qe=we[0],xt=we[1],nr=this[qe]();if(xt){var sr=qe.indexOf(xt)-(qe.substr(0,2)==="ok"?2:0);if(sr>-1)return nr[sr];throw new Error("unknown channel "+xt+" in mode "+qe)}else return nr};var Eu=ce,ol=U.type,w0=Math.pow,al=1e-7,pc=20;Eu.prototype.luminance=function(ue){if(ue!==void 0&&ol(ue)==="number"){if(ue===0)return new Eu([0,0,0,this._rgb[3]],"rgb");if(ue===1)return new Eu([255,255,255,this._rgb[3]],"rgb");var we=this.luminance(),qe="rgb",xt=pc,nr=function(Zt,_r){var Cr=Zt.interpolate(_r,.5,qe),on=Cr.luminance();return Math.abs(ue-on)<al||!xt--?Cr:on>ue?nr(Zt,Cr):nr(Cr,_r)},sr=(we>ue?nr(new Eu([0,0,0]),this):nr(this,new Eu([255,255,255]))).rgb();return new Eu(sr.concat([this._rgb[3]]))}return oi.apply(void 0,this._rgb.slice(0,3))};var oi=function(ue,we,qe){return ue=vi(ue),we=vi(we),qe=vi(qe),.2126*ue+.7152*we+.0722*qe},vi=function(ue){return ue/=255,ue<=.03928?ue/12.92:w0((ue+.055)/1.055,2.4)},Oa={},Yu=ce,wa=U.type,Bo=Oa,Il=function(ue,we,qe){qe===void 0&&(qe=.5);for(var xt=[],nr=arguments.length-3;nr-- >0;)xt[nr]=arguments[nr+3];var sr=xt[0]||"lrgb";if(!Bo[sr]&&!xt.length&&(sr=Object.keys(Bo)[0]),!Bo[sr])throw new Error("interpolation mode "+sr+" is not defined");return wa(ue)!=="object"&&(ue=new Yu(ue)),wa(we)!=="object"&&(we=new Yu(we)),Bo[sr](ue,we,qe).alpha(ue.alpha()+qe*(we.alpha()-ue.alpha()))},Xs=ce,r0=Il;Xs.prototype.mix=Xs.prototype.interpolate=function(ue,we){we===void 0&&(we=.5);for(var qe=[],xt=arguments.length-2;xt-- >0;)qe[xt]=arguments[xt+2];return r0.apply(void 0,[this,ue,we].concat(qe))};var Tl=ce;Tl.prototype.premultiply=function(ue){ue===void 0&&(ue=!1);var we=this._rgb,qe=we[3];return ue?(this._rgb=[we[0]*qe,we[1]*qe,we[2]*qe,qe],this):new Tl([we[0]*qe,we[1]*qe,we[2]*qe,qe],"rgb")};var ca=ce,xa=Ye;ca.prototype.saturate=function(ue){ue===void 0&&(ue=1);var we=this,qe=we.lch();return qe[1]+=xa.Kn*ue,qe[1]<0&&(qe[1]=0),new ca(qe,"lch").alpha(we.alpha(),!0)},ca.prototype.desaturate=function(ue){return ue===void 0&&(ue=1),this.saturate(-ue)};var Oc=ce,as=U.type;Oc.prototype.set=function(ue,we,qe){qe===void 0&&(qe=!1);var xt=ue.split("."),nr=xt[0],sr=xt[1],Zt=this[nr]();if(sr){var _r=nr.indexOf(sr)-(nr.substr(0,2)==="ok"?2:0);if(_r>-1){if(as(we)=="string")switch(we.charAt(0)){case"+":Zt[_r]+=+we;break;case"-":Zt[_r]+=+we;break;case"*":Zt[_r]*=+we.substr(1);break;case"/":Zt[_r]/=+we.substr(1);break;default:Zt[_r]=+we}else if(as(we)==="number")Zt[_r]=we;else throw new Error("unsupported value for Color.set");var Cr=new Oc(Zt,nr);return qe?(this._rgb=Cr._rgb,this):Cr}throw new Error("unknown channel "+sr+" in mode "+nr)}else return Zt};var M=ce,d=function(ue,we,qe){var xt=ue._rgb,nr=we._rgb;return new M(xt[0]+qe*(nr[0]-xt[0]),xt[1]+qe*(nr[1]-xt[1]),xt[2]+qe*(nr[2]-xt[2]),"rgb")};Oa.rgb=d;var k=ce,C=Math.sqrt,D=Math.pow,q=function(ue,we,qe){var xt=ue._rgb,nr=xt[0],sr=xt[1],Zt=xt[2],_r=we._rgb,Cr=_r[0],on=_r[1],yn=_r[2];return new k(C(D(nr,2)*(1-qe)+D(Cr,2)*qe),C(D(sr,2)*(1-qe)+D(on,2)*qe),C(D(Zt,2)*(1-qe)+D(yn,2)*qe),"rgb")};Oa.lrgb=q;var Y=ce,oe=function(ue,we,qe){var xt=ue.lab(),nr=we.lab();return new Y(xt[0]+qe*(nr[0]-xt[0]),xt[1]+qe*(nr[1]-xt[1]),xt[2]+qe*(nr[2]-xt[2]),"lab")};Oa.lab=oe;var le=ce,de=function(ue,we,qe,xt){var nr,sr,Zt,_r;xt==="hsl"?(Zt=ue.hsl(),_r=we.hsl()):xt==="hsv"?(Zt=ue.hsv(),_r=we.hsv()):xt==="hcg"?(Zt=ue.hcg(),_r=we.hcg()):xt==="hsi"?(Zt=ue.hsi(),_r=we.hsi()):xt==="lch"||xt==="hcl"?(xt="hcl",Zt=ue.hcl(),_r=we.hcl()):xt==="oklch"&&(Zt=ue.oklch().reverse(),_r=we.oklch().reverse());var Cr,on,yn,Jn,_n,Kn;(xt.substr(0,1)==="h"||xt==="oklch")&&(nr=Zt,Cr=nr[0],yn=nr[1],_n=nr[2],sr=_r,on=sr[0],Jn=sr[1],Kn=sr[2]);var ui,Gi,so,_o;return!isNaN(Cr)&&!isNaN(on)?(on>Cr&&on-Cr>180?_o=on-(Cr+360):on<Cr&&Cr-on>180?_o=on+360-Cr:_o=on-Cr,Gi=Cr+qe*_o):isNaN(Cr)?isNaN(on)?Gi=Number.NaN:(Gi=on,(_n==1||_n==0)&&xt!="hsv"&&(ui=Jn)):(Gi=Cr,(Kn==1||Kn==0)&&xt!="hsv"&&(ui=yn)),ui===void 0&&(ui=yn+qe*(Jn-yn)),so=_n+qe*(Kn-_n),xt==="oklch"?new le([so,ui,Gi],xt):new le([Gi,ui,so],xt)},Se=de,je=function(ue,we,qe){return Se(ue,we,qe,"lch")};Oa.lch=je,Oa.hcl=je;var Je=ce,Et=function(ue,we,qe){var xt=ue.num(),nr=we.num();return new Je(xt+qe*(nr-xt),"num")};Oa.num=Et;var mt=de,wt=function(ue,we,qe){return mt(ue,we,qe,"hcg")};Oa.hcg=wt;var tr=de,cr=function(ue,we,qe){return tr(ue,we,qe,"hsi")};Oa.hsi=cr;var Ar=de,Dt=function(ue,we,qe){return Ar(ue,we,qe,"hsl")};Oa.hsl=Dt;var Tr=de,Ir=function(ue,we,qe){return Tr(ue,we,qe,"hsv")};Oa.hsv=Ir;var Zr=ce,Gr=function(ue,we,qe){var xt=ue.oklab(),nr=we.oklab();return new Zr(xt[0]+qe*(nr[0]-xt[0]),xt[1]+qe*(nr[1]-xt[1]),xt[2]+qe*(nr[2]-xt[2]),"oklab")};Oa.oklab=Gr;var dn=de,qr=function(ue,we,qe){return dn(ue,we,qe,"oklch")};Oa.oklch=qr;var Mn=ce,En=U.clip_rgb,Un=Math.pow,Li=Math.sqrt,Di=Math.PI,N=Math.cos,$=Math.sin,re=Math.atan2,fe=function(ue,we,qe){we===void 0&&(we="lrgb"),qe===void 0&&(qe=null);var xt=ue.length;qe||(qe=Array.from(new Array(xt)).map(function(){return 1}));var nr=xt/qe.reduce(function(Gi,so){return Gi+so});if(qe.forEach(function(Gi,so){qe[so]*=nr}),ue=ue.map(function(Gi){return new Mn(Gi)}),we==="lrgb")return Te(ue,qe);for(var sr=ue.shift(),Zt=sr.get(we),_r=[],Cr=0,on=0,yn=0;yn<Zt.length;yn++)if(Zt[yn]=(Zt[yn]||0)*qe[0],_r.push(isNaN(Zt[yn])?0:qe[0]),we.charAt(yn)==="h"&&!isNaN(Zt[yn])){var Jn=Zt[yn]/180*Di;Cr+=N(Jn)*qe[0],on+=$(Jn)*qe[0]}var _n=sr.alpha()*qe[0];ue.forEach(function(Gi,so){var _o=Gi.get(we);_n+=Gi.alpha()*qe[so+1];for(var jo=0;jo<Zt.length;jo++)if(!isNaN(_o[jo]))if(_r[jo]+=qe[so+1],we.charAt(jo)==="h"){var La=_o[jo]/180*Di;Cr+=N(La)*qe[so+1],on+=$(La)*qe[so+1]}else Zt[jo]+=_o[jo]*qe[so+1]});for(var Kn=0;Kn<Zt.length;Kn++)if(we.charAt(Kn)==="h"){for(var ui=re(on/_r[Kn],Cr/_r[Kn])/Di*180;ui<0;)ui+=360;for(;ui>=360;)ui-=360;Zt[Kn]=ui}else Zt[Kn]=Zt[Kn]/_r[Kn];return _n/=xt,new Mn(Zt,we).alpha(_n>.99999?1:_n,!0)},Te=function(ue,we){for(var qe=ue.length,xt=[0,0,0,0],nr=0;nr<ue.length;nr++){var sr=ue[nr],Zt=we[nr]/qe,_r=sr._rgb;xt[0]+=Un(_r[0],2)*Zt,xt[1]+=Un(_r[1],2)*Zt,xt[2]+=Un(_r[2],2)*Zt,xt[3]+=_r[3]*Zt}return xt[0]=Li(xt[0]),xt[1]=Li(xt[1]),xt[2]=Li(xt[2]),xt[3]>.9999999&&(xt[3]=1),new Mn(En(xt))},Oe=pe,Ue=U.type,Ke=Math.pow,rt=function(ue){var we="rgb",qe=Oe("#ccc"),xt=0,nr=[0,1],sr=[],Zt=[0,0],_r=!1,Cr=[],on=!1,yn=0,Jn=1,_n=!1,Kn={},ui=!0,Gi=1,so=function(bn){if(bn=bn||["#fff","#000"],bn&&Ue(bn)==="string"&&Oe.brewer&&Oe.brewer[bn.toLowerCase()]&&(bn=Oe.brewer[bn.toLowerCase()]),Ue(bn)==="array"){bn.length===1&&(bn=[bn[0],bn[0]]),bn=bn.slice(0);for(var bi=0;bi<bn.length;bi++)bn[bi]=Oe(bn[bi]);sr.length=0;for(var lo=0;lo<bn.length;lo++)sr.push(lo/(bn.length-1))}return ea(),Cr=bn},_o=function(bn){if(_r!=null){for(var bi=_r.length-1,lo=0;lo<bi&&bn>=_r[lo];)lo++;return lo-1}return 0},jo=function(bn){return bn},La=function(bn){return bn},ja=function(bn,bi){var lo,Hi;if(bi==null&&(bi=!1),isNaN(bn)||bn===null)return qe;if(bi)Hi=bn;else if(_r&&_r.length>2){var Ka=_o(bn);Hi=Ka/(_r.length-2)}else Jn!==yn?Hi=(bn-yn)/(Jn-yn):Hi=1;Hi=La(Hi),bi||(Hi=jo(Hi)),Gi!==1&&(Hi=Ke(Hi,Gi)),Hi=Zt[0]+Hi*(1-Zt[0]-Zt[1]),Hi=Math.min(1,Math.max(0,Hi));var Pi=Math.floor(Hi*1e4);if(ui&&Kn[Pi])lo=Kn[Pi];else{if(Ue(Cr)==="array")for(var uo=0;uo<sr.length;uo++){var Do=sr[uo];if(Hi<=Do){lo=Cr[uo];break}if(Hi>=Do&&uo===sr.length-1){lo=Cr[uo];break}if(Hi>Do&&Hi<sr[uo+1]){Hi=(Hi-Do)/(sr[uo+1]-Do),lo=Oe.interpolate(Cr[uo],Cr[uo+1],Hi,we);break}}else Ue(Cr)==="function"&&(lo=Cr(Hi));ui&&(Kn[Pi]=lo)}return lo},ea=function(){return Kn={}};so(ue);var Qi=function(bn){var bi=Oe(ja(bn));return on&&bi[on]?bi[on]():bi};return Qi.classes=function(bn){if(bn!=null){if(Ue(bn)==="array")_r=bn,nr=[bn[0],bn[bn.length-1]];else{var bi=Oe.analyze(nr);bn===0?_r=[bi.min,bi.max]:_r=Oe.limits(bi,"e",bn)}return Qi}return _r},Qi.domain=function(bn){if(!arguments.length)return nr;yn=bn[0],Jn=bn[bn.length-1],sr=[];var bi=Cr.length;if(bn.length===bi&&yn!==Jn)for(var lo=0,Hi=Array.from(bn);lo<Hi.length;lo+=1){var Ka=Hi[lo];sr.push((Ka-yn)/(Jn-yn))}else{for(var Pi=0;Pi<bi;Pi++)sr.push(Pi/(bi-1));if(bn.length>2){var uo=bn.map(function(Uo,$o){return $o/(bn.length-1)}),Do=bn.map(function(Uo){return(Uo-yn)/(Jn-yn)});Do.every(function(Uo,$o){return uo[$o]===Uo})||(La=function(Uo){if(Uo<=0||Uo>=1)return Uo;for(var $o=0;Uo>=Do[$o+1];)$o++;var Us=(Uo-Do[$o])/(Do[$o+1]-Do[$o]),_c=uo[$o]+Us*(uo[$o+1]-uo[$o]);return _c})}}return nr=[yn,Jn],Qi},Qi.mode=function(bn){return arguments.length?(we=bn,ea(),Qi):we},Qi.range=function(bn,bi){return so(bn),Qi},Qi.out=function(bn){return on=bn,Qi},Qi.spread=function(bn){return arguments.length?(xt=bn,Qi):xt},Qi.correctLightness=function(bn){return bn==null&&(bn=!0),_n=bn,ea(),_n?jo=function(bi){for(var lo=ja(0,!0).lab()[0],Hi=ja(1,!0).lab()[0],Ka=lo>Hi,Pi=ja(bi,!0).lab()[0],uo=lo+(Hi-lo)*bi,Do=Pi-uo,Uo=0,$o=1,Us=20;Math.abs(Do)>.01&&Us-- >0;)(function(){return Ka&&(Do*=-1),Do<0?(Uo=bi,bi+=($o-bi)*.5):($o=bi,bi+=(Uo-bi)*.5),Pi=ja(bi,!0).lab()[0],Do=Pi-uo})();return bi}:jo=function(bi){return bi},Qi},Qi.padding=function(bn){return bn!=null?(Ue(bn)==="number"&&(bn=[bn,bn]),Zt=bn,Qi):Zt},Qi.colors=function(bn,bi){arguments.length<2&&(bi="hex");var lo=[];if(arguments.length===0)lo=Cr.slice(0);else if(bn===1)lo=[Qi(.5)];else if(bn>1){var Hi=nr[0],Ka=nr[1]-Hi;lo=gt(0,bn,!1).map(function($o){return Qi(Hi+$o/(bn-1)*Ka)})}else{ue=[];var Pi=[];if(_r&&_r.length>2)for(var uo=1,Do=_r.length,Uo=1<=Do;Uo?uo<Do:uo>Do;Uo?uo++:uo--)Pi.push((_r[uo-1]+_r[uo])*.5);else Pi=nr;lo=Pi.map(function($o){return Qi($o)})}return Oe[bi]&&(lo=lo.map(function($o){return $o[bi]()})),lo},Qi.cache=function(bn){return bn!=null?(ui=bn,Qi):ui},Qi.gamma=function(bn){return bn!=null?(Gi=bn,Qi):Gi},Qi.nodata=function(bn){return bn!=null?(qe=Oe(bn),Qi):qe},Qi};function gt(ue,we,qe){for(var xt=[],nr=ue<we,sr=qe?nr?we+1:we-1:we,Zt=ue;nr?Zt<sr:Zt>sr;nr?Zt++:Zt--)xt.push(Zt);return xt}var rr=ce,Er=rt,kr=function(ue){for(var we=[1,1],qe=1;qe<ue;qe++){for(var xt=[1],nr=1;nr<=we.length;nr++)xt[nr]=(we[nr]||0)+we[nr-1];we=xt}return we},hr=function(ue){var we,qe,xt,nr,sr,Zt,_r;if(ue=ue.map(function(_n){return new rr(_n)}),ue.length===2)we=ue.map(function(_n){return _n.lab()}),sr=we[0],Zt=we[1],nr=function(_n){var Kn=[0,1,2].map(function(ui){return sr[ui]+_n*(Zt[ui]-sr[ui])});return new rr(Kn,"lab")};else if(ue.length===3)qe=ue.map(function(_n){return _n.lab()}),sr=qe[0],Zt=qe[1],_r=qe[2],nr=function(_n){var Kn=[0,1,2].map(function(ui){return(1-_n)*(1-_n)*sr[ui]+2*(1-_n)*_n*Zt[ui]+_n*_n*_r[ui]});return new rr(Kn,"lab")};else if(ue.length===4){var Cr;xt=ue.map(function(_n){return _n.lab()}),sr=xt[0],Zt=xt[1],_r=xt[2],Cr=xt[3],nr=function(_n){var Kn=[0,1,2].map(function(ui){return(1-_n)*(1-_n)*(1-_n)*sr[ui]+3*(1-_n)*(1-_n)*_n*Zt[ui]+3*(1-_n)*_n*_n*_r[ui]+_n*_n*_n*Cr[ui]});return new rr(Kn,"lab")}}else if(ue.length>=5){var on,yn,Jn;on=ue.map(function(_n){return _n.lab()}),Jn=ue.length-1,yn=kr(Jn),nr=function(_n){var Kn=1-_n,ui=[0,1,2].map(function(Gi){return on.reduce(function(so,_o,jo){return so+yn[jo]*Math.pow(Kn,Jn-jo)*Math.pow(_n,jo)*_o[Gi]},0)});return new rr(ui,"lab")}}else throw new RangeError("No point in running bezier with only one color.");return nr},fn=function(ue){var we=hr(ue);return we.scale=function(){return Er(we)},we},Dr=pe,zt=function(ue,we,qe){if(!zt[qe])throw new Error("unknown blend mode "+qe);return zt[qe](ue,we)},Xt=function(ue){return function(we,qe){var xt=Dr(qe).rgb(),nr=Dr(we).rgb();return Dr.rgb(ue(xt,nr))}},Hr=function(ue){return function(we,qe){var xt=[];return xt[0]=ue(we[0],qe[0]),xt[1]=ue(we[1],qe[1]),xt[2]=ue(we[2],qe[2]),xt}},Qr=function(ue){return ue},Wr=function(ue,we){return ue*we/255},Nn=function(ue,we){return ue>we?we:ue},Cn=function(ue,we){return ue>we?ue:we},Ci=function(ue,we){return 255*(1-(1-ue/255)*(1-we/255))},Rn=function(ue,we){return we<128?2*ue*we/255:255*(1-2*(1-ue/255)*(1-we/255))},Co=function(ue,we){return 255*(1-(1-we/255)/(ue/255))},Po=function(ue,we){return ue===255?255:(ue=255*(we/255)/(1-ue/255),ue>255?255:ue)};zt.normal=Xt(Hr(Qr)),zt.multiply=Xt(Hr(Wr)),zt.screen=Xt(Hr(Ci)),zt.overlay=Xt(Hr(Rn)),zt.darken=Xt(Hr(Nn)),zt.lighten=Xt(Hr(Cn)),zt.dodge=Xt(Hr(Po)),zt.burn=Xt(Hr(Co));for(var io=zt,$i=U.type,Eo=U.clip_rgb,Mo=U.TWOPI,Ki=Math.pow,Fa=Math.sin,Fi=Math.cos,pa=pe,Ha=function(ue,we,qe,xt,nr){ue===void 0&&(ue=300),we===void 0&&(we=-1.5),qe===void 0&&(qe=1),xt===void 0&&(xt=1),nr===void 0&&(nr=[0,1]);var sr=0,Zt;$i(nr)==="array"?Zt=nr[1]-nr[0]:(Zt=0,nr=[nr,nr]);var _r=function(Cr){var on=Mo*((ue+120)/360+we*Cr),yn=Ki(nr[0]+Zt*Cr,xt),Jn=sr!==0?qe[0]+Cr*sr:qe,_n=Jn*yn*(1-yn)/2,Kn=Fi(on),ui=Fa(on),Gi=yn+_n*(-.14861*Kn+1.78277*ui),so=yn+_n*(-.29227*Kn-.90649*ui),_o=yn+_n*(1.97294*Kn);return pa(Eo([Gi*255,so*255,_o*255,1]))};return _r.start=function(Cr){return Cr==null?ue:(ue=Cr,_r)},_r.rotations=function(Cr){return Cr==null?we:(we=Cr,_r)},_r.gamma=function(Cr){return Cr==null?xt:(xt=Cr,_r)},_r.hue=function(Cr){return Cr==null?qe:(qe=Cr,$i(qe)==="array"?(sr=qe[1]-qe[0],sr===0&&(qe=qe[1])):sr=0,_r)},_r.lightness=function(Cr){return Cr==null?nr:($i(Cr)==="array"?(nr=Cr,Zt=Cr[1]-Cr[0]):(nr=[Cr,Cr],Zt=0),_r)},_r.scale=function(){return pa.scale(_r)},_r.hue(qe),_r},vo=ce,ya="0123456789abcdef",Ba=Math.floor,Wa=Math.random,Ho=function(){for(var ue="#",we=0;we<6;we++)ue+=ya.charAt(Ba(Wa()*16));return new vo(ue,"hex")},ss=v,Os=Math.log,Vo=Math.pow,Ia=Math.floor,tu=Math.abs,Fs=function(ue,we){we===void 0&&(we=null);var qe={min:Number.MAX_VALUE,max:Number.MAX_VALUE*-1,sum:0,values:[],count:0};return ss(ue)==="object"&&(ue=Object.values(ue)),ue.forEach(function(xt){we&&ss(xt)==="object"&&(xt=xt[we]),xt!=null&&!isNaN(xt)&&(qe.values.push(xt),qe.sum+=xt,xt<qe.min&&(qe.min=xt),xt>qe.max&&(qe.max=xt),qe.count+=1)}),qe.domain=[qe.min,qe.max],qe.limits=function(xt,nr){return Ys(qe,xt,nr)},qe},Ys=function(ue,we,qe){we===void 0&&(we="equal"),qe===void 0&&(qe=7),ss(ue)=="array"&&(ue=Fs(ue));var xt=ue.min,nr=ue.max,sr=ue.values.sort(function(df,C0){return df-C0});if(qe===1)return[xt,nr];var Zt=[];if(we.substr(0,1)==="c"&&(Zt.push(xt),Zt.push(nr)),we.substr(0,1)==="e"){Zt.push(xt);for(var _r=1;_r<qe;_r++)Zt.push(xt+_r/qe*(nr-xt));Zt.push(nr)}else if(we.substr(0,1)==="l"){if(xt<=0)throw new Error("Logarithmic scales are only possible for values > 0");var Cr=Math.LOG10E*Os(xt),on=Math.LOG10E*Os(nr);Zt.push(xt);for(var yn=1;yn<qe;yn++)Zt.push(Vo(10,Cr+yn/qe*(on-Cr)));Zt.push(nr)}else if(we.substr(0,1)==="q"){Zt.push(xt);for(var Jn=1;Jn<qe;Jn++){var _n=(sr.length-1)*Jn/qe,Kn=Ia(_n);if(Kn===_n)Zt.push(sr[Kn]);else{var ui=_n-Kn;Zt.push(sr[Kn]*(1-ui)+sr[Kn+1]*ui)}}Zt.push(nr)}else if(we.substr(0,1)==="k"){var Gi,so=sr.length,_o=new Array(so),jo=new Array(qe),La=!0,ja=0,ea=null;ea=[],ea.push(xt);for(var Qi=1;Qi<qe;Qi++)ea.push(xt+Qi/qe*(nr-xt));for(ea.push(nr);La;){for(var bn=0;bn<qe;bn++)jo[bn]=0;for(var bi=0;bi<so;bi++)for(var lo=sr[bi],Hi=Number.MAX_VALUE,Ka=void 0,Pi=0;Pi<qe;Pi++){var uo=tu(ea[Pi]-lo);uo<Hi&&(Hi=uo,Ka=Pi),jo[Ka]++,_o[bi]=Ka}for(var Do=new Array(qe),Uo=0;Uo<qe;Uo++)Do[Uo]=null;for(var $o=0;$o<so;$o++)Gi=_o[$o],Do[Gi]===null?Do[Gi]=sr[$o]:Do[Gi]+=sr[$o];for(var Us=0;Us<qe;Us++)Do[Us]*=1/jo[Us];La=!1;for(var _c=0;_c<qe;_c++)if(Do[_c]!==ea[_c]){La=!0;break}ea=Do,ja++,ja>200&&(La=!1)}for(var bc={},Ku=0;Ku<qe;Ku++)bc[Ku]=[];for(var Bc=0;Bc<so;Bc++)Gi=_o[Bc],bc[Gi].push(sr[Bc]);for(var Pl=[],o0=0;o0<qe;o0++)Pl.push(bc[o0][0]),Pl.push(bc[o0][bc[o0].length-1]);Pl=Pl.sort(function(df,C0){return df-C0}),Zt.push(Pl[0]);for(var S0=1;S0<Pl.length;S0+=2){var Su=Pl[S0];!isNaN(Su)&&Zt.indexOf(Su)===-1&&Zt.push(Su)}}return Zt},Js={analyze:Fs,limits:Ys},da=ce,x0=function(ue,we){ue=new da(ue),we=new da(we);var qe=ue.luminance(),xt=we.luminance();return qe>xt?(qe+.05)/(xt+.05):(xt+.05)/(qe+.05)},G0=ce,Ll=Math.sqrt,fa=Math.pow,dc=Math.min,k0=Math.max,Bs=Math.atan2,js=Math.abs,ru=Math.cos,Ju=Math.sin,A0=Math.exp,mc=Math.PI,gc=function(ue,we,qe,xt,nr){qe===void 0&&(qe=1),xt===void 0&&(xt=1),nr===void 0&&(nr=1);var sr=function(Su){return 360*Su/(2*mc)},Zt=function(Su){return 2*mc*Su/360};ue=new G0(ue),we=new G0(we);var _r=Array.from(ue.lab()),Cr=_r[0],on=_r[1],yn=_r[2],Jn=Array.from(we.lab()),_n=Jn[0],Kn=Jn[1],ui=Jn[2],Gi=(Cr+_n)/2,so=Ll(fa(on,2)+fa(yn,2)),_o=Ll(fa(Kn,2)+fa(ui,2)),jo=(so+_o)/2,La=.5*(1-Ll(fa(jo,7)/(fa(jo,7)+fa(25,7)))),ja=on*(1+La),ea=Kn*(1+La),Qi=Ll(fa(ja,2)+fa(yn,2)),bn=Ll(fa(ea,2)+fa(ui,2)),bi=(Qi+bn)/2,lo=sr(Bs(yn,ja)),Hi=sr(Bs(ui,ea)),Ka=lo>=0?lo:lo+360,Pi=Hi>=0?Hi:Hi+360,uo=js(Ka-Pi)>180?(Ka+Pi+360)/2:(Ka+Pi)/2,Do=1-.17*ru(Zt(uo-30))+.24*ru(Zt(2*uo))+.32*ru(Zt(3*uo+6))-.2*ru(Zt(4*uo-63)),Uo=Pi-Ka;Uo=js(Uo)<=180?Uo:Pi<=Ka?Uo+360:Uo-360,Uo=2*Ll(Qi*bn)*Ju(Zt(Uo)/2);var $o=_n-Cr,Us=bn-Qi,_c=1+.015*fa(Gi-50,2)/Ll(20+fa(Gi-50,2)),bc=1+.045*bi,Ku=1+.015*bi*Do,Bc=30*A0(-fa((uo-275)/25,2)),Pl=2*Ll(fa(bi,7)/(fa(bi,7)+fa(25,7))),o0=-Pl*Ju(2*Zt(Bc)),S0=Ll(fa($o/(qe*_c),2)+fa(Us/(xt*bc),2)+fa(Uo/(nr*Ku),2)+o0*(Us/(xt*bc))*(Uo/(nr*Ku)));return k0(0,dc(100,S0))},yc=ce,vc=function(ue,we,qe){qe===void 0&&(qe="lab"),ue=new yc(ue),we=new yc(we);var xt=ue.get(qe),nr=we.get(qe),sr=0;for(var Zt in xt){var _r=(xt[Zt]||0)-(nr[Zt]||0);sr+=_r*_r}return Math.sqrt(sr)},Fc=ce,hs=function(){for(var ue=[],we=arguments.length;we--;)ue[we]=arguments[we];try{return new(Function.prototype.bind.apply(Fc,[null].concat(ue))),!0}catch{return!1}},Ja=pe,Ta=rt,nu={cool:function(){return Ta([Ja.hsl(180,1,.9),Ja.hsl(250,.7,.4)])},hot:function(){return Ta(["#000","#f00","#ff0","#fff"]).mode("rgb")}},n0={OrRd:["#fff7ec","#fee8c8","#fdd49e","#fdbb84","#fc8d59","#ef6548","#d7301f","#b30000","#7f0000"],PuBu:["#fff7fb","#ece7f2","#d0d1e6","#a6bddb","#74a9cf","#3690c0","#0570b0","#045a8d","#023858"],BuPu:["#f7fcfd","#e0ecf4","#bfd3e6","#9ebcda","#8c96c6","#8c6bb1","#88419d","#810f7c","#4d004b"],Oranges:["#fff5eb","#fee6ce","#fdd0a2","#fdae6b","#fd8d3c","#f16913","#d94801","#a63603","#7f2704"],BuGn:["#f7fcfd","#e5f5f9","#ccece6","#99d8c9","#66c2a4","#41ae76","#238b45","#006d2c","#00441b"],YlOrBr:["#ffffe5","#fff7bc","#fee391","#fec44f","#fe9929","#ec7014","#cc4c02","#993404","#662506"],YlGn:["#ffffe5","#f7fcb9","#d9f0a3","#addd8e","#78c679","#41ab5d","#238443","#006837","#004529"],Reds:["#fff5f0","#fee0d2","#fcbba1","#fc9272","#fb6a4a","#ef3b2c","#cb181d","#a50f15","#67000d"],RdPu:["#fff7f3","#fde0dd","#fcc5c0","#fa9fb5","#f768a1","#dd3497","#ae017e","#7a0177","#49006a"],Greens:["#f7fcf5","#e5f5e0","#c7e9c0","#a1d99b","#74c476","#41ab5d","#238b45","#006d2c","#00441b"],YlGnBu:["#ffffd9","#edf8b1","#c7e9b4","#7fcdbb","#41b6c4","#1d91c0","#225ea8","#253494","#081d58"],Purples:["#fcfbfd","#efedf5","#dadaeb","#bcbddc","#9e9ac8","#807dba","#6a51a3","#54278f","#3f007d"],GnBu:["#f7fcf0","#e0f3db","#ccebc5","#a8ddb5","#7bccc4","#4eb3d3","#2b8cbe","#0868ac","#084081"],Greys:["#ffffff","#f0f0f0","#d9d9d9","#bdbdbd","#969696","#737373","#525252","#252525","#000000"],YlOrRd:["#ffffcc","#ffeda0","#fed976","#feb24c","#fd8d3c","#fc4e2a","#e31a1c","#bd0026","#800026"],PuRd:["#f7f4f9","#e7e1ef","#d4b9da","#c994c7","#df65b0","#e7298a","#ce1256","#980043","#67001f"],Blues:["#f7fbff","#deebf7","#c6dbef","#9ecae1","#6baed6","#4292c6","#2171b5","#08519c","#08306b"],PuBuGn:["#fff7fb","#ece2f0","#d0d1e6","#a6bddb","#67a9cf","#3690c0","#02818a","#016c59","#014636"],Viridis:["#440154","#482777","#3f4a8a","#31678e","#26838f","#1f9d8a","#6cce5a","#b6de2b","#fee825"],Spectral:["#9e0142","#d53e4f","#f46d43","#fdae61","#fee08b","#ffffbf","#e6f598","#abdda4","#66c2a5","#3288bd","#5e4fa2"],RdYlGn:["#a50026","#d73027","#f46d43","#fdae61","#fee08b","#ffffbf","#d9ef8b","#a6d96a","#66bd63","#1a9850","#006837"],RdBu:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#f7f7f7","#d1e5f0","#92c5de","#4393c3","#2166ac","#053061"],PiYG:["#8e0152","#c51b7d","#de77ae","#f1b6da","#fde0ef","#f7f7f7","#e6f5d0","#b8e186","#7fbc41","#4d9221","#276419"],PRGn:["#40004b","#762a83","#9970ab","#c2a5cf","#e7d4e8","#f7f7f7","#d9f0d3","#a6dba0","#5aae61","#1b7837","#00441b"],RdYlBu:["#a50026","#d73027","#f46d43","#fdae61","#fee090","#ffffbf","#e0f3f8","#abd9e9","#74add1","#4575b4","#313695"],BrBG:["#543005","#8c510a","#bf812d","#dfc27d","#f6e8c3","#f5f5f5","#c7eae5","#80cdc1","#35978f","#01665e","#003c30"],RdGy:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#ffffff","#e0e0e0","#bababa","#878787","#4d4d4d","#1a1a1a"],PuOr:["#7f3b08","#b35806","#e08214","#fdb863","#fee0b6","#f7f7f7","#d8daeb","#b2abd2","#8073ac","#542788","#2d004b"],Set2:["#66c2a5","#fc8d62","#8da0cb","#e78ac3","#a6d854","#ffd92f","#e5c494","#b3b3b3"],Accent:["#7fc97f","#beaed4","#fdc086","#ffff99","#386cb0","#f0027f","#bf5b17","#666666"],Set1:["#e41a1c","#377eb8","#4daf4a","#984ea3","#ff7f00","#ffff33","#a65628","#f781bf","#999999"],Set3:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462","#b3de69","#fccde5","#d9d9d9","#bc80bd","#ccebc5","#ffed6f"],Dark2:["#1b9e77","#d95f02","#7570b3","#e7298a","#66a61e","#e6ab02","#a6761d","#666666"],Paired:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f","#ff7f00","#cab2d6","#6a3d9a","#ffff99","#b15928"],Pastel2:["#b3e2cd","#fdcdac","#cbd5e8","#f4cae4","#e6f5c9","#fff2ae","#f1e2cc","#cccccc"],Pastel1:["#fbb4ae","#b3cde3","#ccebc5","#decbe4","#fed9a6","#ffffcc","#e5d8bd","#fddaec","#f2f2f2"]},sl=0,H0=Object.keys(n0);sl<H0.length;sl+=1){var E0=H0[sl];n0[E0.toLowerCase()]=n0[E0]}var i0=n0,va=pe;va.average=fe,va.bezier=fn,va.blend=io,va.cubehelix=Ha,va.mix=va.interpolate=Il,va.random=Ho,va.scale=rt,va.analyze=Js.analyze,va.contrast=x0,va.deltaE=gc,va.distance=vc,va.limits=Js.limits,va.valid=hs,va.scales=nu,va.colors=qo,va.brewer=i0;var W0=va;return W0})})(jC);const op=Yg,pv=e=>{if(e&&Array.isArray(e)){if(e[0]==="rgb")e=op(e.splice(1,3)).css();else if(e[0]==="rgba")e=op(e.splice(1,4)).css();else if(e[0]==="match"){const t=e[e.length-1];e=pv(t)}}return e};function UC(e){let t,r=e[0].innerHTML+"";return{c(){t=yt("div"),this.h()},l(n){t=vt(n,"DIV",{class:!0});var o=Ct(t);o.forEach(ge),this.h()},h(){ve(t,"class","legend svelte-1dizgfa")},m(n,o){Lt(n,t,o),t.innerHTML=r},p(n,[o]){o&1&&r!==(r=n[0].innerHTML+"")&&(t.innerHTML=r)},i:Qn,o:Qn,d(n){n&&ge(t)}}}function qC(e,t,r){let{map:n}=t,{layer:o}=t,{spriteLoader:u}=t,c=document.createElement("div");const l=v=>{let w=new Blob([v],{type:"image/svg+xml"}),E=URL.createObjectURL(w),T=document.createElement("img");return T.src=E,T.addEventListener("load",()=>URL.revokeObjectURL(E),{once:!0}),T.height=24,T.width=24,T},h=async()=>{const v=n.getZoom(),w=BC({zoom:v,layer:o});if(r(0,c.innerText="",c),w){let T,I,F;switch(w.element){case"div":if(w.attributes.style.backgroundImage&&!["url(undefined)","url(null)"].includes(w.attributes.style.backgroundImage)){var E=document.createElement("img");E.src=w.attributes.style.backgroundImage.replace("url(","").replace(")",""),E.alt=o.id,E.style.cssText="height: 24px;",c.appendChild(E)}T=document.createElement("div"),T.style.height="24px",T.style.width="50px",T.style.backgroundColor=w.attributes.style.backgroundColor,T.style.backgroundPosition=w.attributes.style.backgroundPosition,T.style.backgroundSize=w.attributes.style.backgroundSize,T.style.backgroundRepeat=w.attributes.style.backgroundRepeat,T.style.opacity=w.attributes.style.opacity,c.appendChild(T);break;case"svg":if(u&&(F=u.getIconDataUrl(o),F)){const U=document.createElement("img");U.src=F,U.alt=o.id,U.style.cssText="height: 24px;",c.appendChild(U);break}I=document.createElementNS("http://www.w3.org/2000/svg","svg"),I.style.cssText="height: 24px;",I.setAttributeNS(null,"version","1.1"),Object.keys(w.attributes).forEach(U=>{I.setAttribute(U,w.attributes[U]);let G=document.createElementNS("http://www.w3.org/2000/svg","g");w.children.forEach(H=>{var X=document.createElementNS("http://www.w3.org/2000/svg",H.element);Object.keys(H.attributes).forEach(ee=>{X.setAttributeNS(null,ee,H.attributes[ee])}),G.appendChild(X)}),I.appendChild(G)}),c.appendChild(I);break;default:console.log(w.element);return}}else if(o.type==="hillshade"){const I=l('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Pro 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2022 Fonticons, Inc. --><path d="M256 32c12.5 0 24.1 6.4 30.7 17L503.4 394.4c5.6 8.9 8.6 19.2 8.6 29.7c0 30.9-25 55.9-55.9 55.9H55.9C25 480 0 455 0 424.1c0-10.5 3-20.8 8.6-29.7L225.2 49c6.6-10.6 18.3-17 30.8-17zm65 192L256 120.4 176.9 246.5 208 288l48-64h65z"/></svg>');c.appendChild(I)}else if(o.type==="fill-extrusion"){const I=l('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Pro 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2022 Fonticons, Inc. --><path d="M243.583 91.6027L323.695 138.384C326.575 140.026 326.68 144.583 323.695 146.225L228.503 201.854C225.623 203.55 222.22 203.444 219.549 201.854L124.357 146.225C121.425 144.636 121.373 139.973 124.357 138.384L204.417 91.6027V0L0 119.417V358.252L78.3843 312.477V218.914C78.3319 215.576 82.2066 213.192 85.0865 214.993L180.279 270.622C183.159 272.318 184.782 275.338 184.782 278.464V389.669C184.834 393.007 180.959 395.391 178.079 393.589L97.9673 346.808L19.583 392.583L224 512L428.417 392.583L350.033 346.808L269.921 393.589C267.093 395.338 263.114 393.06 263.218 389.669V278.464C263.218 275.126 265.051 272.159 267.721 270.622L362.914 214.993C365.741 213.245 369.72 215.47 369.616 218.914V312.477L448 358.252V119.417L243.583 0V91.6027Z"/></svg>');c.appendChild(I)}else if(o.type==="raster"){const I=l('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Pro 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2022 Fonticons, Inc. --><path d="M57.7 193l9.4 16.4c8.3 14.5 21.9 25.2 38 29.8L163 255.7c17.2 4.9 29 20.6 29 38.5v39.9c0 11 6.2 21 16 25.9s16 14.9 16 25.9v39c0 15.6 14.9 26.9 29.9 22.6c16.1-4.6 28.6-17.5 32.7-33.8l2.8-11.2c4.2-16.9 15.2-31.4 30.3-40l8.1-4.6c15-8.5 24.2-24.5 24.2-41.7v-8.3c0-12.7-5.1-24.9-14.1-33.9l-3.9-3.9c-9-9-21.2-14.1-33.9-14.1H257c-11.1 0-22.1-2.9-31.8-8.4l-34.5-19.7c-4.3-2.5-7.6-6.5-9.2-11.2c-3.2-9.6 1.1-20 10.2-24.5l5.9-3c6.6-3.3 14.3-3.9 21.3-1.5l23.2 7.7c8.2 2.7 17.2-.4 21.9-7.5c4.7-7 4.2-16.3-1.2-22.8l-13.6-16.3c-10-12-9.9-29.5 .3-41.3l15.7-18.3c8.8-10.3 10.2-25 3.5-36.7l-2.4-4.2c-3.5-.2-6.9-.3-10.4-.3C163.1 48 84.4 108.9 57.7 193zM464 256c0-36.8-9.6-71.4-26.4-101.5L412 164.8c-15.7 6.3-23.8 23.8-18.5 39.8l16.9 50.7c3.5 10.4 12 18.3 22.6 20.9l29.1 7.3c1.2-9 1.8-18.2 1.8-27.5zm48 0c0 141.4-114.6 256-256 256S0 397.4 0 256S114.6 0 256 0S512 114.6 512 256z"/></svg>');c.appendChild(I)}else if(o.type==="heatmap"){const T=n.getPaintProperty(o.id,"heatmap-color");if(T&&T[0]==="interpolate"){const I=[];for(let H=4;H<T.length;H=H+2)I.push(T[H]);const U=`height: calc(1px * 24); width: calc(2px * 12); background: linear-gradient(90deg, ${op.scale(I).mode("lrgb").padding([.25,0]).domain([1,100]).colors(I.length,"rgba")});`,G=document.createElement("div");G.style.cssText=U,c.appendChild(G)}else{const F=l('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Pro 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2022 Fonticons, Inc. --><path d="M256 512c141.4 0 256-114.6 256-256S397.4 0 256 0S0 114.6 0 256S114.6 512 256 512zm0-160c-53 0-96-43-96-96s43-96 96-96s96 43 96 96s-43 96-96 96z"/></svg>');c.appendChild(F)}}else{const T=n.getPaintProperty(o.id,"background-color"),I=pv(T)??"#000000",F=n.getPaintProperty(o.id,"background-opacity")??1,U=document.createElement("div");U.style.height="24px",U.style.width="50px",U.style.backgroundColor=I,U.style.opacity=`${F}`,c.appendChild(U)}};return n.on("moveend",h),n.on("zoom",h),e.$$set=v=>{"map"in v&&r(1,n=v.map),"layer"in v&&r(2,o=v.layer),"spriteLoader"in v&&r(3,u=v.spriteLoader)},e.$$.update=()=>{e.$$.dirty&4&&h()},[c,n,o,u]}class N6 extends Dn{constructor(t){super(),zn(this,t,qC,UC,Ln,{map:1,layer:2,spriteLoader:3})}}var R6={};Object.defineProperty(R6,"__esModule",{value:!0});function VC(){var e=!1;if("maxTouchPoints"in navigator)e=navigator.maxTouchPoints>0;else if("msMaxTouchPoints"in navigator)navigator!==null&&(e=navigator.msMaxTouchPoints>0);else{var t=window.matchMedia&&matchMedia("(pointer:coarse)");if(t&&t.media==="(pointer:coarse)")e=!!t.matches;else if("orientation"in window)e=!0;else{var r=navigator.userAgent;e=/\b(BlackBerry|webOS|iPhone|IEMobile)\b/i.test(r)||/\b(Android|Windows Phone|iPad|iPod)\b/i.test(r)}}return e}var $C=R6.isMobile=VC(),GC=typeof global=="object"&&global&&global.Object===Object&&global;const HC=GC;var WC=typeof self=="object"&&self&&self.Object===Object&&self,ZC=HC||WC||Function("return this")();const O6=ZC;var XC=O6.Symbol;const U1=XC;var F6=Object.prototype,YC=F6.hasOwnProperty,JC=F6.toString,zp=U1?U1.toStringTag:void 0;function KC(e){var t=YC.call(e,zp),r=e[zp];try{e[zp]=void 0;var n=!0}catch{}var o=JC.call(e);return n&&(t?e[zp]=r:delete e[zp]),o}var QC=Object.prototype,eI=QC.toString;function tI(e){return eI.call(e)}var rI="[object Null]",nI="[object Undefined]",Wb=U1?U1.toStringTag:void 0;function iI(e){return e==null?e===void 0?nI:rI:Wb&&Wb in Object(e)?KC(e):tI(e)}function oI(e){return e!=null&&typeof e=="object"}var aI="[object Symbol]";function sI(e){return typeof e=="symbol"||oI(e)&&iI(e)==aI}var lI=/\s/;function uI(e){for(var t=e.length;t--&&lI.test(e.charAt(t)););return t}var cI=/^\s+/;function fI(e){return e&&e.slice(0,uI(e)+1).replace(cI,"")}function Jg(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var Zb=0/0,hI=/^[-+]0x[0-9a-f]+$/i,pI=/^0b[01]+$/i,dI=/^0o[0-7]+$/i,mI=parseInt;function Xb(e){if(typeof e=="number")return e;if(sI(e))return Zb;if(Jg(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=Jg(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=fI(e);var r=pI.test(e);return r||dI.test(e)?mI(e.slice(2),r?2:8):hI.test(e)?Zb:+e}var gI=function(){return O6.Date.now()};const km=gI;var yI="Expected a function",vI=Math.max,_I=Math.min;function dv(e,t,r){var n,o,u,c,l,h,v=0,w=!1,E=!1,T=!0;if(typeof e!="function")throw new TypeError(yI);t=Xb(t)||0,Jg(r)&&(w=!!r.leading,E="maxWait"in r,u=E?vI(Xb(r.maxWait)||0,t):u,T="trailing"in r?!!r.trailing:T);function I(ce){var _e=n,pe=o;return n=o=void 0,v=ce,c=e.apply(pe,_e),c}function F(ce){return v=ce,l=setTimeout(H,t),w?I(ce):c}function U(ce){var _e=ce-h,pe=ce-v,Ge=t-_e;return E?_I(Ge,u-pe):Ge}function G(ce){var _e=ce-h,pe=ce-v;return h===void 0||_e>=t||_e<0||E&&pe>=u}function H(){var ce=km();if(G(ce))return X(ce);l=setTimeout(H,U(ce))}function X(ce){return l=void 0,T&&n?I(ce):(n=o=void 0,c)}function ee(){l!==void 0&&clearTimeout(l),v=0,n=h=o=l=void 0}function K(){return l===void 0?c:X(km())}function se(){var ce=km(),_e=G(ce);if(n=arguments,o=this,h=ce,_e){if(l===void 0)return F(h);if(E)return clearTimeout(l),l=setTimeout(H,t),I(h)}return l===void 0&&(l=setTimeout(H,t)),c}return se.cancel=ee,se.flush=K,se}function Yb(e){return Object.prototype.toString.call(e)==="[object Date]"}function Kg(e,t,r,n){if(typeof r=="number"||Yb(r)){const o=n-r,u=(r-t)/(e.dt||1/60),c=e.opts.stiffness*o,l=e.opts.damping*u,h=(c-l)*e.inv_mass,v=(u+h)*e.dt;return Math.abs(v)<e.opts.precision&&Math.abs(o)<e.opts.precision?n:(e.settled=!1,Yb(r)?new Date(r.getTime()+v):r+v)}else{if(Array.isArray(r))return r.map((o,u)=>Kg(e,t[u],r[u],n[u]));if(typeof r=="object"){const o={};for(const u in r)o[u]=Kg(e,t[u],r[u],n[u]);return o}else throw new Error(`Cannot spring ${typeof r} values`)}}function bI(e,t={}){const r=hf(e),{stiffness:n=.15,damping:o=.8,precision:u=.01}=t;let c,l,h,v=e,w=e,E=1,T=0,I=!1;function F(G,H={}){w=G;const X=h={};return e==null||H.hard||U.stiffness>=1&&U.damping>=1?(I=!0,c=z_(),v=G,r.set(e=w),Promise.resolve()):(H.soft&&(T=1/((H.soft===!0?.5:+H.soft)*60),E=0),l||(c=z_(),I=!1,l=_A(ee=>{if(I)return I=!1,l=null,!1;E=Math.min(E+T,1);const K={inv_mass:E,opts:U,settled:!0,dt:(ee-c)*60/1e3},se=Kg(K,v,e,w);return c=ee,v=e,r.set(e=se),K.settled&&(l=null),!K.settled})),new Promise(ee=>{l.promise.then(()=>{X===h&&ee()})}))}const U={set:F,update:(G,H)=>F(G(w,e),H),subscribe:r.subscribe,stiffness:n,damping:o,precision:u};return U}function Jb(e,t,r){const n=e.slice();return n[28]=t[r],n[30]=r,n}function Kb(e){let t,r,n,o,u=(e[6]==="label"||e[7]==="label")&&Qb(e);return{c(){t=yt("span"),u&&u.c(),this.h()},l(c){t=vt(c,"SPAN",{class:!0,style:!0});var l=Ct(t);u&&u.l(l),l.forEach(ge),this.h()},h(){ve(t,"class","pip first"),ve(t,"style",r=e[14]+": 0%;"),ni(t,"selected",e[18](e[0])),ni(t,"in-range",e[17](e[0]))},m(c,l){Lt(c,t,l),u&&u.m(t,null),n||(o=[rn(t,"click",function(){g0(e[21](e[0]))&&e[21](e[0]).apply(this,arguments)}),rn(t,"touchend",Fl(function(){g0(e[21](e[0]))&&e[21](e[0]).apply(this,arguments)}))],n=!0)},p(c,l){e=c,e[6]==="label"||e[7]==="label"?u?u.p(e,l):(u=Qb(e),u.c(),u.m(t,null)):u&&(u.d(1),u=null),l&16384&&r!==(r=e[14]+": 0%;")&&ve(t,"style",r),l&262145&&ni(t,"selected",e[18](e[0])),l&131073&&ni(t,"in-range",e[17](e[0]))},d(c){c&&ge(t),u&&u.d(),n=!1,oa(o)}}}function Qb(e){let t,r=e[12](e[16](e[0]),0,0)+"",n,o=e[10]&&e5(e),u=e[11]&&t5(e);return{c(){t=yt("span"),o&&o.c(),n=ei(r),u&&u.c(),this.h()},l(c){t=vt(c,"SPAN",{class:!0});var l=Ct(t);o&&o.l(l),n=ti(l,r),u&&u.l(l),l.forEach(ge),this.h()},h(){ve(t,"class","pipVal")},m(c,l){Lt(c,t,l),o&&o.m(t,null),lt(t,n),u&&u.m(t,null)},p(c,l){c[10]?o?o.p(c,l):(o=e5(c),o.c(),o.m(t,n)):o&&(o.d(1),o=null),l&69633&&r!==(r=c[12](c[16](c[0]),0,0)+"")&&ta(n,r),c[11]?u?u.p(c,l):(u=t5(c),u.c(),u.m(t,null)):u&&(u.d(1),u=null)},d(c){c&&ge(t),o&&o.d(),u&&u.d()}}}function e5(e){let t,r;return{c(){t=yt("span"),r=ei(e[10]),this.h()},l(n){t=vt(n,"SPAN",{class:!0});var o=Ct(t);r=ti(o,e[10]),o.forEach(ge),this.h()},h(){ve(t,"class","pipVal-prefix")},m(n,o){Lt(n,t,o),lt(t,r)},p(n,o){o&1024&&ta(r,n[10])},d(n){n&&ge(t)}}}function t5(e){let t,r;return{c(){t=yt("span"),r=ei(e[11]),this.h()},l(n){t=vt(n,"SPAN",{class:!0});var o=Ct(t);r=ti(o,e[11]),o.forEach(ge),this.h()},h(){ve(t,"class","pipVal-suffix")},m(n,o){Lt(n,t,o),lt(t,r)},p(n,o){o&2048&&ta(r,n[11])},d(n){n&&ge(t)}}}function r5(e){let t,r=Array(e[20]+1),n=[];for(let o=0;o<r.length;o+=1)n[o]=s5(Jb(e,r,o));return{c(){for(let o=0;o<n.length;o+=1)n[o].c();t=ao()},l(o){for(let u=0;u<n.length;u+=1)n[u].l(o);t=ao()},m(o,u){for(let c=0;c<n.length;c+=1)n[c].m(o,u);Lt(o,t,u)},p(o,u){if(u&4120131){r=Array(o[20]+1);let c;for(c=0;c<r.length;c+=1){const l=Jb(o,r,c);n[c]?n[c].p(l,u):(n[c]=s5(l),n[c].c(),n[c].m(t.parentNode,t))}for(;c<n.length;c+=1)n[c].d(1);n.length=r.length}},d(o){Ol(n,o),o&&ge(t)}}}function n5(e){let t,r,n,o,u,c=(e[6]==="label"||e[9]==="label")&&i5(e);return{c(){t=yt("span"),c&&c.c(),r=mr(),this.h()},l(l){t=vt(l,"SPAN",{class:!0,style:!0});var h=Ct(t);c&&c.l(h),r=gr(h),h.forEach(ge),this.h()},h(){ve(t,"class","pip"),ve(t,"style",n=e[14]+": "+e[15](e[19](e[30]))+"%;"),ni(t,"selected",e[18](e[19](e[30]))),ni(t,"in-range",e[17](e[19](e[30])))},m(l,h){Lt(l,t,h),c&&c.m(t,null),lt(t,r),o||(u=[rn(t,"click",function(){g0(e[21](e[19](e[30])))&&e[21](e[19](e[30])).apply(this,arguments)}),rn(t,"touchend",Fl(function(){g0(e[21](e[19](e[30])))&&e[21](e[19](e[30])).apply(this,arguments)}))],o=!0)},p(l,h){e=l,e[6]==="label"||e[9]==="label"?c?c.p(e,h):(c=i5(e),c.c(),c.m(t,r)):c&&(c.d(1),c=null),h&573440&&n!==(n=e[14]+": "+e[15](e[19](e[30]))+"%;")&&ve(t,"style",n),h&786432&&ni(t,"selected",e[18](e[19](e[30]))),h&655360&&ni(t,"in-range",e[17](e[19](e[30])))},d(l){l&&ge(t),c&&c.d(),o=!1,oa(u)}}}function i5(e){let t,r=e[12](e[19](e[30]),e[30],e[15](e[19](e[30])))+"",n,o=e[10]&&o5(e),u=e[11]&&a5(e);return{c(){t=yt("span"),o&&o.c(),n=ei(r),u&&u.c(),this.h()},l(c){t=vt(c,"SPAN",{class:!0});var l=Ct(t);o&&o.l(l),n=ti(l,r),u&&u.l(l),l.forEach(ge),this.h()},h(){ve(t,"class","pipVal")},m(c,l){Lt(c,t,l),o&&o.m(t,null),lt(t,n),u&&u.m(t,null)},p(c,l){c[10]?o?o.p(c,l):(o=o5(c),o.c(),o.m(t,n)):o&&(o.d(1),o=null),l&561152&&r!==(r=c[12](c[19](c[30]),c[30],c[15](c[19](c[30])))+"")&&ta(n,r),c[11]?u?u.p(c,l):(u=a5(c),u.c(),u.m(t,null)):u&&(u.d(1),u=null)},d(c){c&&ge(t),o&&o.d(),u&&u.d()}}}function o5(e){let t,r;return{c(){t=yt("span"),r=ei(e[10]),this.h()},l(n){t=vt(n,"SPAN",{class:!0});var o=Ct(t);r=ti(o,e[10]),o.forEach(ge),this.h()},h(){ve(t,"class","pipVal-prefix")},m(n,o){Lt(n,t,o),lt(t,r)},p(n,o){o&1024&&ta(r,n[10])},d(n){n&&ge(t)}}}function a5(e){let t,r;return{c(){t=yt("span"),r=ei(e[11]),this.h()},l(n){t=vt(n,"SPAN",{class:!0});var o=Ct(t);r=ti(o,e[11]),o.forEach(ge),this.h()},h(){ve(t,"class","pipVal-suffix")},m(n,o){Lt(n,t,o),lt(t,r)},p(n,o){o&2048&&ta(r,n[11])},d(n){n&&ge(t)}}}function s5(e){let t=e[19](e[30])!==e[0]&&e[19](e[30])!==e[1],r,n=t&&n5(e);return{c(){n&&n.c(),r=ao()},l(o){n&&n.l(o),r=ao()},m(o,u){n&&n.m(o,u),Lt(o,r,u)},p(o,u){u&524291&&(t=o[19](o[30])!==o[0]&&o[19](o[30])!==o[1]),t?n?n.p(o,u):(n=n5(o),n.c(),n.m(r.parentNode,r)):n&&(n.d(1),n=null)},d(o){n&&n.d(o),o&&ge(r)}}}function l5(e){let t,r,n,o,u=(e[6]==="label"||e[8]==="label")&&u5(e);return{c(){t=yt("span"),u&&u.c(),this.h()},l(c){t=vt(c,"SPAN",{class:!0,style:!0});var l=Ct(t);u&&u.l(l),l.forEach(ge),this.h()},h(){ve(t,"class","pip last"),ve(t,"style",r=e[14]+": 100%;"),ni(t,"selected",e[18](e[1])),ni(t,"in-range",e[17](e[1]))},m(c,l){Lt(c,t,l),u&&u.m(t,null),n||(o=[rn(t,"click",function(){g0(e[21](e[1]))&&e[21](e[1]).apply(this,arguments)}),rn(t,"touchend",Fl(function(){g0(e[21](e[1]))&&e[21](e[1]).apply(this,arguments)}))],n=!0)},p(c,l){e=c,e[6]==="label"||e[8]==="label"?u?u.p(e,l):(u=u5(e),u.c(),u.m(t,null)):u&&(u.d(1),u=null),l&16384&&r!==(r=e[14]+": 100%;")&&ve(t,"style",r),l&262146&&ni(t,"selected",e[18](e[1])),l&131074&&ni(t,"in-range",e[17](e[1]))},d(c){c&&ge(t),u&&u.d(),n=!1,oa(o)}}}function u5(e){let t,r=e[12](e[16](e[1]),e[20],100)+"",n,o=e[10]&&c5(e),u=e[11]&&f5(e);return{c(){t=yt("span"),o&&o.c(),n=ei(r),u&&u.c(),this.h()},l(c){t=vt(c,"SPAN",{class:!0});var l=Ct(t);o&&o.l(l),n=ti(l,r),u&&u.l(l),l.forEach(ge),this.h()},h(){ve(t,"class","pipVal")},m(c,l){Lt(c,t,l),o&&o.m(t,null),lt(t,n),u&&u.m(t,null)},p(c,l){c[10]?o?o.p(c,l):(o=c5(c),o.c(),o.m(t,n)):o&&(o.d(1),o=null),l&1118210&&r!==(r=c[12](c[16](c[1]),c[20],100)+"")&&ta(n,r),c[11]?u?u.p(c,l):(u=f5(c),u.c(),u.m(t,null)):u&&(u.d(1),u=null)},d(c){c&&ge(t),o&&o.d(),u&&u.d()}}}function c5(e){let t,r;return{c(){t=yt("span"),r=ei(e[10]),this.h()},l(n){t=vt(n,"SPAN",{class:!0});var o=Ct(t);r=ti(o,e[10]),o.forEach(ge),this.h()},h(){ve(t,"class","pipVal-prefix")},m(n,o){Lt(n,t,o),lt(t,r)},p(n,o){o&1024&&ta(r,n[10])},d(n){n&&ge(t)}}}function f5(e){let t,r;return{c(){t=yt("span"),r=ei(e[11]),this.h()},l(n){t=vt(n,"SPAN",{class:!0});var o=Ct(t);r=ti(o,e[11]),o.forEach(ge),this.h()},h(){ve(t,"class","pipVal-suffix")},m(n,o){Lt(n,t,o),lt(t,r)},p(n,o){o&2048&&ta(r,n[11])},d(n){n&&ge(t)}}}function wI(e){let t,r,n,o=(e[6]&&e[7]!==!1||e[7])&&Kb(e),u=(e[6]&&e[9]!==!1||e[9])&&r5(e),c=(e[6]&&e[8]!==!1||e[8])&&l5(e);return{c(){t=yt("div"),o&&o.c(),r=mr(),u&&u.c(),n=mr(),c&&c.c(),this.h()},l(l){t=vt(l,"DIV",{class:!0});var h=Ct(t);o&&o.l(h),r=gr(h),u&&u.l(h),n=gr(h),c&&c.l(h),h.forEach(ge),this.h()},h(){ve(t,"class","rangePips"),ni(t,"disabled",e[5]),ni(t,"hoverable",e[4]),ni(t,"vertical",e[2]),ni(t,"reversed",e[3]),ni(t,"focus",e[13])},m(l,h){Lt(l,t,h),o&&o.m(t,null),lt(t,r),u&&u.m(t,null),lt(t,n),c&&c.m(t,null)},p(l,[h]){l[6]&&l[7]!==!1||l[7]?o?o.p(l,h):(o=Kb(l),o.c(),o.m(t,r)):o&&(o.d(1),o=null),l[6]&&l[9]!==!1||l[9]?u?u.p(l,h):(u=r5(l),u.c(),u.m(t,n)):u&&(u.d(1),u=null),l[6]&&l[8]!==!1||l[8]?c?c.p(l,h):(c=l5(l),c.c(),c.m(t,null)):c&&(c.d(1),c=null),h&32&&ni(t,"disabled",l[5]),h&16&&ni(t,"hoverable",l[4]),h&4&&ni(t,"vertical",l[2]),h&8&&ni(t,"reversed",l[3]),h&8192&&ni(t,"focus",l[13])},i:Qn,o:Qn,d(l){l&&ge(t),o&&o.d(),u&&u.d(),c&&c.d()}}}function xI(e,t,r){let n,o,u,c,l,{range:h=!1}=t,{min:v=0}=t,{max:w=100}=t,{step:E=1}=t,{values:T=[(w+v)/2]}=t,{vertical:I=!1}=t,{reversed:F=!1}=t,{hoverable:U=!0}=t,{disabled:G=!1}=t,{pipstep:H=void 0}=t,{all:X=!0}=t,{first:ee=void 0}=t,{last:K=void 0}=t,{rest:se=void 0}=t,{prefix:ce=""}=t,{suffix:_e=""}=t,{formatter:pe=(_t,ht)=>_t}=t,{focus:Ge=void 0}=t,{orientationStart:We=void 0}=t,{percentOf:Ae=void 0}=t,{moveHandle:Ie=void 0}=t,{fixFloat:Fe=void 0}=t;function ot(_t){G||Ie(void 0,_t)}return e.$$set=_t=>{"range"in _t&&r(22,h=_t.range),"min"in _t&&r(0,v=_t.min),"max"in _t&&r(1,w=_t.max),"step"in _t&&r(23,E=_t.step),"values"in _t&&r(24,T=_t.values),"vertical"in _t&&r(2,I=_t.vertical),"reversed"in _t&&r(3,F=_t.reversed),"hoverable"in _t&&r(4,U=_t.hoverable),"disabled"in _t&&r(5,G=_t.disabled),"pipstep"in _t&&r(25,H=_t.pipstep),"all"in _t&&r(6,X=_t.all),"first"in _t&&r(7,ee=_t.first),"last"in _t&&r(8,K=_t.last),"rest"in _t&&r(9,se=_t.rest),"prefix"in _t&&r(10,ce=_t.prefix),"suffix"in _t&&r(11,_e=_t.suffix),"formatter"in _t&&r(12,pe=_t.formatter),"focus"in _t&&r(13,Ge=_t.focus),"orientationStart"in _t&&r(14,We=_t.orientationStart),"percentOf"in _t&&r(15,Ae=_t.percentOf),"moveHandle"in _t&&r(26,Ie=_t.moveHandle),"fixFloat"in _t&&r(16,Fe=_t.fixFloat)},e.$$.update=()=>{e.$$.dirty&41943047&&r(27,n=H||((w-v)/E>=(I?50:100)?(w-v)/(I?10:20):1)),e.$$.dirty&142606339&&r(20,o=parseInt((w-v)/(E*n),10)),e.$$.dirty&142671873&&r(19,u=function(_t){return Fe(v+_t*E*n)}),e.$$.dirty&16842752&&r(18,c=function(_t){return T.some(ht=>Fe(ht)===Fe(_t))}),e.$$.dirty&20971520&&r(17,l=function(_t){if(h==="min")return T[0]>_t;if(h==="max")return T[0]<_t;if(h)return T[0]<_t&&T[1]>_t})},[v,w,I,F,U,G,X,ee,K,se,ce,_e,pe,Ge,We,Ae,Fe,l,c,u,o,ot,h,E,T,H,Ie,n]}class kI extends Dn{constructor(t){super(),zn(this,t,xI,wI,Ln,{range:22,min:0,max:1,step:23,values:24,vertical:2,reversed:3,hoverable:4,disabled:5,pipstep:25,all:6,first:7,last:8,rest:9,prefix:10,suffix:11,formatter:12,focus:13,orientationStart:14,percentOf:15,moveHandle:26,fixFloat:16})}}function h5(e,t,r){const n=e.slice();return n[64]=t[r],n[66]=r,n}function p5(e){let t,r=e[21](e[64],e[66],e[23](e[64]))+"",n,o=e[18]&&d5(e),u=e[19]&&m5(e);return{c(){t=yt("span"),o&&o.c(),n=ei(r),u&&u.c(),this.h()},l(c){t=vt(c,"SPAN",{class:!0});var l=Ct(t);o&&o.l(l),n=ti(l,r),u&&u.l(l),l.forEach(ge),this.h()},h(){ve(t,"class","rangeFloat")},m(c,l){Lt(c,t,l),o&&o.m(t,null),lt(t,n),u&&u.m(t,null)},p(c,l){c[18]?o?o.p(c,l):(o=d5(c),o.c(),o.m(t,n)):o&&(o.d(1),o=null),l[0]&10485761&&r!==(r=c[21](c[64],c[66],c[23](c[64]))+"")&&ta(n,r),c[19]?u?u.p(c,l):(u=m5(c),u.c(),u.m(t,null)):u&&(u.d(1),u=null)},d(c){c&&ge(t),o&&o.d(),u&&u.d()}}}function d5(e){let t,r;return{c(){t=yt("span"),r=ei(e[18]),this.h()},l(n){t=vt(n,"SPAN",{class:!0});var o=Ct(t);r=ti(o,e[18]),o.forEach(ge),this.h()},h(){ve(t,"class","rangeFloat-prefix")},m(n,o){Lt(n,t,o),lt(t,r)},p(n,o){o[0]&262144&&ta(r,n[18])},d(n){n&&ge(t)}}}function m5(e){let t,r;return{c(){t=yt("span"),r=ei(e[19]),this.h()},l(n){t=vt(n,"SPAN",{class:!0});var o=Ct(t);r=ti(o,e[19]),o.forEach(ge),this.h()},h(){ve(t,"class","rangeFloat-suffix")},m(n,o){Lt(n,t,o),lt(t,r)},p(n,o){o[0]&524288&&ta(r,n[19])},d(n){n&&ge(t)}}}function g5(e){let t,r,n,o,u,c,l,h,v,w,E,T,I=e[7]&&p5(e);return{c(){t=yt("span"),r=yt("span"),n=mr(),I&&I.c(),this.h()},l(F){t=vt(F,"SPAN",{role:!0,class:!0,"data-handle":!0,style:!0,"aria-valuemin":!0,"aria-valuemax":!0,"aria-valuenow":!0,"aria-valuetext":!0,"aria-orientation":!0,"aria-disabled":!0,disabled:!0,tabindex:!0});var U=Ct(t);r=vt(U,"SPAN",{class:!0}),Ct(r).forEach(ge),n=gr(U),I&&I.l(U),U.forEach(ge),this.h()},h(){ve(r,"class","rangeNub"),ve(t,"role","slider"),ve(t,"class","rangeHandle"),ve(t,"data-handle",e[66]),ve(t,"style",o=e[28]+": "+e[29][e[66]]+"%; z-index: "+(e[26]===e[66]?3:2)+";"),ve(t,"aria-valuemin",u=e[2]===!0&&e[66]===1?e[0][0]:e[3]),ve(t,"aria-valuemax",c=e[2]===!0&&e[66]===0?e[0][1]:e[4]),ve(t,"aria-valuenow",l=e[64]),ve(t,"aria-valuetext",h=""+(e[18]+e[21](e[64],e[66],e[23](e[64]))+e[19])),ve(t,"aria-orientation",v=e[6]?"vertical":"horizontal"),ve(t,"aria-disabled",e[10]),ve(t,"disabled",e[10]),ve(t,"tabindex",w=e[10]?-1:0),ni(t,"active",e[24]&&e[26]===e[66]),ni(t,"press",e[25]&&e[26]===e[66])},m(F,U){Lt(F,t,U),lt(t,r),lt(t,n),I&&I.m(t,null),E||(T=[rn(t,"blur",e[34]),rn(t,"focus",e[35]),rn(t,"keydown",e[36])],E=!0)},p(F,U){F[7]?I?I.p(F,U):(I=p5(F),I.c(),I.m(t,null)):I&&(I.d(1),I=null),U[0]&872415232&&o!==(o=F[28]+": "+F[29][F[66]]+"%; z-index: "+(F[26]===F[66]?3:2)+";")&&ve(t,"style",o),U[0]&13&&u!==(u=F[2]===!0&&F[66]===1?F[0][0]:F[3])&&ve(t,"aria-valuemin",u),U[0]&21&&c!==(c=F[2]===!0&&F[66]===0?F[0][1]:F[4])&&ve(t,"aria-valuemax",c),U[0]&1&&l!==(l=F[64])&&ve(t,"aria-valuenow",l),U[0]&11272193&&h!==(h=""+(F[18]+F[21](F[64],F[66],F[23](F[64]))+F[19]))&&ve(t,"aria-valuetext",h),U[0]&64&&v!==(v=F[6]?"vertical":"horizontal")&&ve(t,"aria-orientation",v),U[0]&1024&&ve(t,"aria-disabled",F[10]),U[0]&1024&&ve(t,"disabled",F[10]),U[0]&1024&&w!==(w=F[10]?-1:0)&&ve(t,"tabindex",w),U[0]&83886080&&ni(t,"active",F[24]&&F[26]===F[66]),U[0]&100663296&&ni(t,"press",F[25]&&F[26]===F[66])},d(F){F&&ge(t),I&&I.d(),E=!1,oa(T)}}}function y5(e){let t,r;return{c(){t=yt("span"),this.h()},l(n){t=vt(n,"SPAN",{class:!0,style:!0}),Ct(t).forEach(ge),this.h()},h(){ve(t,"class","rangeBar"),ve(t,"style",r=e[28]+": "+e[32](e[29])+"%; "+e[27]+": "+e[33](e[29])+"%;")},m(n,o){Lt(n,t,o)},p(n,o){o[0]&939524096&&r!==(r=n[28]+": "+n[32](n[29])+"%; "+n[27]+": "+n[33](n[29])+"%;")&&ve(t,"style",r)},d(n){n&&ge(t)}}}function v5(e){let t,r;return t=new kI({props:{values:e[0],min:e[3],max:e[4],step:e[5],range:e[2],vertical:e[6],reversed:e[8],orientationStart:e[28],hoverable:e[9],disabled:e[10],all:e[13],first:e[14],last:e[15],rest:e[16],pipstep:e[12],prefix:e[18],suffix:e[19],formatter:e[20],focus:e[24],percentOf:e[23],moveHandle:e[31],fixFloat:e[30]}}),{c(){Ut(t.$$.fragment)},l(n){Yt(t.$$.fragment,n)},m(n,o){qt(t,n,o),r=!0},p(n,o){const u={};o[0]&1&&(u.values=n[0]),o[0]&8&&(u.min=n[3]),o[0]&16&&(u.max=n[4]),o[0]&32&&(u.step=n[5]),o[0]&4&&(u.range=n[2]),o[0]&64&&(u.vertical=n[6]),o[0]&256&&(u.reversed=n[8]),o[0]&268435456&&(u.orientationStart=n[28]),o[0]&512&&(u.hoverable=n[9]),o[0]&1024&&(u.disabled=n[10]),o[0]&8192&&(u.all=n[13]),o[0]&16384&&(u.first=n[14]),o[0]&32768&&(u.last=n[15]),o[0]&65536&&(u.rest=n[16]),o[0]&4096&&(u.pipstep=n[12]),o[0]&262144&&(u.prefix=n[18]),o[0]&524288&&(u.suffix=n[19]),o[0]&1048576&&(u.formatter=n[20]),o[0]&16777216&&(u.focus=n[24]),o[0]&8388608&&(u.percentOf=n[23]),t.$set(u)},i(n){r||(Xe(t.$$.fragment,n),r=!0)},o(n){it(t.$$.fragment,n),r=!1},d(n){Vt(t,n)}}}function AI(e){let t,r,n,o,u,c,l=e[0],h=[];for(let E=0;E<l.length;E+=1)h[E]=g5(h5(e,l,E));let v=e[2]&&y5(e),w=e[11]&&v5(e);return{c(){t=yt("div");for(let E=0;E<h.length;E+=1)h[E].c();r=mr(),v&&v.c(),n=mr(),w&&w.c(),this.h()},l(E){t=vt(E,"DIV",{id:!0,class:!0});var T=Ct(t);for(let I=0;I<h.length;I+=1)h[I].l(T);r=gr(T),v&&v.l(T),n=gr(T),w&&w.l(T),T.forEach(ge),this.h()},h(){ve(t,"id",e[17]),ve(t,"class","rangeSlider"),ni(t,"range",e[2]),ni(t,"disabled",e[10]),ni(t,"hoverable",e[9]),ni(t,"vertical",e[6]),ni(t,"reversed",e[8]),ni(t,"focus",e[24]),ni(t,"min",e[2]==="min"),ni(t,"max",e[2]==="max"),ni(t,"pips",e[11]),ni(t,"pip-labels",e[13]==="label"||e[14]==="label"||e[15]==="label"||e[16]==="label")},m(E,T){Lt(E,t,T);for(let I=0;I<h.length;I+=1)h[I].m(t,null);lt(t,r),v&&v.m(t,null),lt(t,n),w&&w.m(t,null),e[50](t),o=!0,u||(c=[rn(window,"mousedown",e[39]),rn(window,"touchstart",e[39]),rn(window,"mousemove",e[40]),rn(window,"touchmove",e[40]),rn(window,"mouseup",e[41]),rn(window,"touchend",e[42]),rn(window,"keydown",e[43]),rn(t,"mousedown",e[37]),rn(t,"mouseup",e[38]),rn(t,"touchstart",Fl(e[37])),rn(t,"touchend",Fl(e[38]))],u=!0)},p(E,T){if(T[0]&934020317|T[1]&56){l=E[0];let I;for(I=0;I<l.length;I+=1){const F=h5(E,l,I);h[I]?h[I].p(F,T):(h[I]=g5(F),h[I].c(),h[I].m(t,r))}for(;I<h.length;I+=1)h[I].d(1);h.length=l.length}E[2]?v?v.p(E,T):(v=y5(E),v.c(),v.m(t,n)):v&&(v.d(1),v=null),E[11]?w?(w.p(E,T),T[0]&2048&&Xe(w,1)):(w=v5(E),w.c(),Xe(w,1),w.m(t,null)):w&&(ji(),it(w,1,1,()=>{w=null}),Ui()),(!o||T[0]&131072)&&ve(t,"id",E[17]),(!o||T[0]&4)&&ni(t,"range",E[2]),(!o||T[0]&1024)&&ni(t,"disabled",E[10]),(!o||T[0]&512)&&ni(t,"hoverable",E[9]),(!o||T[0]&64)&&ni(t,"vertical",E[6]),(!o||T[0]&256)&&ni(t,"reversed",E[8]),(!o||T[0]&16777216)&&ni(t,"focus",E[24]),(!o||T[0]&4)&&ni(t,"min",E[2]==="min"),(!o||T[0]&4)&&ni(t,"max",E[2]==="max"),(!o||T[0]&2048)&&ni(t,"pips",E[11]),(!o||T[0]&122880)&&ni(t,"pip-labels",E[13]==="label"||E[14]==="label"||E[15]==="label"||E[16]==="label")},i(E){o||(Xe(w),o=!0)},o(E){it(w),o=!1},d(E){E&&ge(t),Ol(h,E),v&&v.d(),w&&w.d(),e[50](null),u=!1,oa(c)}}}function _5(e){if(!e)return-1;for(var t=0;e=e.previousElementSibling;)t++;return t}function Am(e){return e.type.includes("touch")?e.touches[0]:e}function EI(e,t,r){let n,o,u,c,l,h,v=Qn,w=()=>(v(),v=bA($t,fr=>r(29,h=fr)),$t);e.$$.on_destroy.push(()=>v());let{slider:E=void 0}=t,{range:T=!1}=t,{pushy:I=!1}=t,{min:F=0}=t,{max:U=100}=t,{step:G=1}=t,{values:H=[(U+F)/2]}=t,{vertical:X=!1}=t,{float:ee=!1}=t,{reversed:K=!1}=t,{hoverable:se=!0}=t,{disabled:ce=!1}=t,{pips:_e=!1}=t,{pipstep:pe=void 0}=t,{all:Ge=void 0}=t,{first:We=void 0}=t,{last:Ae=void 0}=t,{rest:Ie=void 0}=t,{id:Fe=void 0}=t,{prefix:ot=""}=t,{suffix:_t=""}=t,{formatter:ht=(fr,or,Yr)=>fr}=t,{handleFormatter:$e=ht}=t,{precision:ut=2}=t,{springValues:bt={stiffness:.15,damping:.4}}=t;const Ze=mp();let He=0,xe=!1,Ne=!1,Pe=!1,ft=!1,At=H.length-1,Pt,Kt,$t;const br=fr=>parseFloat(fr.toFixed(ut));function Gt(fr){const or=E.querySelectorAll(".handle"),Yr=Array.prototype.includes.call(or,fr),un=Array.prototype.some.call(or,Nr=>Nr.contains(fr));return Yr||un}function Rr(fr){return T==="min"||T==="max"?fr.slice(0,1):T?fr.slice(0,2):fr}function Mr(){return E.getBoundingClientRect()}function Kr(fr){const or=Mr();let Yr=0,un=0,Nr=0;X?(Yr=fr.clientY-or.top,un=Yr/or.height*100,un=K?un:100-un):(Yr=fr.clientX-or.left,un=Yr/or.width*100,un=K?100-un:un),Nr=(U-F)/100*un+F;let pn;return T===!0&&H[0]===H[1]?Nr>H[1]?1:0:(pn=H.indexOf([...H].sort((Yn,ci)=>Math.abs(Nr-Yn)-Math.abs(Nr-ci))[0]),pn)}function St(fr){const or=Mr();let Yr=0,un=0,Nr=0;X?(Yr=fr.clientY-or.top,un=Yr/or.height*100,un=K?un:100-un):(Yr=fr.clientX-or.left,un=Yr/or.width*100,un=K?100-un:un),Nr=(U-F)/100*un+F,ct(At,Nr)}function ct(fr,or){return or=u(or),typeof fr>"u"&&(fr=At),T&&(fr===0&&or>H[1]?I?r(0,H[1]=or,H):or=H[1]:fr===1&&or<H[0]&&(I?r(0,H[0]=or,H):or=H[0])),H[fr]!==or&&r(0,H[fr]=or,H),Kt!==or&&(xn(),Kt=or),or}function Or(fr){return T==="min"?0:fr[0]}function ln(fr){return T==="max"?0:T==="min"?100-fr[0]:100-fr[1]}function Wt(fr){ft&&(r(24,xe=!1),Ne=!1,r(25,Pe=!1))}function Ur(fr){ce||(r(26,At=_5(fr.target)),r(24,xe=!0))}function mn(fr){if(!ce){const or=_5(fr.target);let Yr=fr.ctrlKey||fr.metaKey||fr.shiftKey?G*10:G,un=!1;switch(fr.key){case"PageDown":Yr*=10;case"ArrowRight":case"ArrowUp":ct(or,H[or]+Yr),un=!0;break;case"PageUp":Yr*=10;case"ArrowLeft":case"ArrowDown":ct(or,H[or]-Yr),un=!0;break;case"Home":ct(or,F),un=!0;break;case"End":ct(or,U),un=!0;break}un&&(fr.preventDefault(),fr.stopPropagation())}}function en(fr){if(!ce){const or=fr.target,Yr=Am(fr);r(24,xe=!0),Ne=!0,r(25,Pe=!0),r(26,At=Kr(Yr)),Pt=Kt=u(H[At]),Vr(),fr.type==="touchstart"&&!or.matches(".pipVal")&&St(Yr)}}function On(fr){fr.type==="touchend"&&wi(),r(25,Pe=!1)}function Zn(fr){ft=!1,xe&&fr.target!==E&&!E.contains(fr.target)&&r(24,xe=!1)}function ai(fr){ce||Ne&&St(Am(fr))}function _i(fr){if(!ce){const or=fr.target;Ne&&((or===E||E.contains(or))&&(r(24,xe=!0),!Gt(or)&&!or.matches(".pipVal")&&St(Am(fr))),wi())}Ne=!1,r(25,Pe=!1)}function hi(fr){Ne=!1,r(25,Pe=!1)}function yr(fr){ce||(fr.target===E||E.contains(fr.target))&&(ft=!0)}function Vr(){!ce&&Ze("start",{activeHandle:At,value:Pt,values:H.map(fr=>u(fr))})}function wi(){!ce&&Ze("stop",{activeHandle:At,startValue:Pt,value:H[At],values:H.map(fr=>u(fr))})}function xn(){!ce&&Ze("change",{activeHandle:At,startValue:Pt,previousValue:typeof Kt>"u"?Pt:Kt,value:H[At],values:H.map(fr=>u(fr))})}function si(fr){Ft[fr?"unshift":"push"](()=>{E=fr,r(1,E)})}return e.$$set=fr=>{"slider"in fr&&r(1,E=fr.slider),"range"in fr&&r(2,T=fr.range),"pushy"in fr&&r(44,I=fr.pushy),"min"in fr&&r(3,F=fr.min),"max"in fr&&r(4,U=fr.max),"step"in fr&&r(5,G=fr.step),"values"in fr&&r(0,H=fr.values),"vertical"in fr&&r(6,X=fr.vertical),"float"in fr&&r(7,ee=fr.float),"reversed"in fr&&r(8,K=fr.reversed),"hoverable"in fr&&r(9,se=fr.hoverable),"disabled"in fr&&r(10,ce=fr.disabled),"pips"in fr&&r(11,_e=fr.pips),"pipstep"in fr&&r(12,pe=fr.pipstep),"all"in fr&&r(13,Ge=fr.all),"first"in fr&&r(14,We=fr.first),"last"in fr&&r(15,Ae=fr.last),"rest"in fr&&r(16,Ie=fr.rest),"id"in fr&&r(17,Fe=fr.id),"prefix"in fr&&r(18,ot=fr.prefix),"suffix"in fr&&r(19,_t=fr.suffix),"formatter"in fr&&r(20,ht=fr.formatter),"handleFormatter"in fr&&r(21,$e=fr.handleFormatter),"precision"in fr&&r(45,ut=fr.precision),"springValues"in fr&&r(46,bt=fr.springValues)},e.$$.update=()=>{e.$$.dirty[0]&24&&r(49,o=function(fr){return fr<=F?F:fr>=U?U:fr}),e.$$.dirty[0]&56|e.$$.dirty[1]&262144&&r(48,u=function(fr){if(fr<=F)return br(F);if(fr>=U)return br(U);let or=(fr-F)%G,Yr=fr-or;return Math.abs(or)*2>=G&&(Yr+=or>0?G:-G),Yr=o(Yr),br(Yr)}),e.$$.dirty[0]&24&&r(23,n=function(fr){let or=(fr-F)/(U-F)*100;return isNaN(or)||or<=0?0:or>=100?100:br(or)}),e.$$.dirty[0]&12582937|e.$$.dirty[1]&229376&&(Array.isArray(H)||(r(0,H=[(U+F)/2]),console.error("'values' prop should be an Array (https://github.com/simeydotme/svelte-range-slider-pips#slider-props)")),r(0,H=Rr(H.map(fr=>u(fr)))),He!==H.length?w(r(22,$t=bI(H.map(fr=>n(fr)),bt))):$t.set(H.map(fr=>n(fr))),r(47,He=H.length)),e.$$.dirty[0]&320&&r(28,c=X?K?"top":"bottom":K?"right":"left"),e.$$.dirty[0]&320&&r(27,l=X?K?"bottom":"top":K?"left":"right")},[H,E,T,F,U,G,X,ee,K,se,ce,_e,pe,Ge,We,Ae,Ie,Fe,ot,_t,ht,$e,$t,n,xe,Pe,At,l,c,h,br,ct,Or,ln,Wt,Ur,mn,en,On,Zn,ai,_i,hi,yr,I,ut,bt,He,u,o,si]}class SI extends Dn{constructor(t){super(),zn(this,t,EI,AI,Ln,{slider:1,range:2,pushy:44,min:3,max:4,step:5,values:0,vertical:6,float:7,reversed:8,hoverable:9,disabled:10,pips:11,pipstep:12,all:13,first:14,last:15,rest:16,id:17,prefix:18,suffix:19,formatter:20,handleFormatter:21,precision:45,springValues:46},null,[-1,-1,-1])}}function CI(e){let t,r,n,o,u,c,l;function h(I){e[6](I)}function v(I){e[7](I)}function w(I){e[8](I)}function E(I){e[9](I)}let T={float:!0,pips:!0,first:"label",last:"label",rest:!1,suffix:e[3]};return e[4]!==void 0&&(T.values=e[4]),e[0]!==void 0&&(T.min=e[0]),e[1]!==void 0&&(T.max=e[1]),e[2]!==void 0&&(T.step=e[2]),r=new SI({props:T}),Ft.push(()=>Jt(r,"values",h)),Ft.push(()=>Jt(r,"min",v)),Ft.push(()=>Jt(r,"max",w)),Ft.push(()=>Jt(r,"step",E)),{c(){t=yt("div"),Ut(r.$$.fragment),this.h()},l(I){t=vt(I,"DIV",{class:!0});var F=Ct(t);Yt(r.$$.fragment,F),F.forEach(ge),this.h()},h(){ve(t,"class","range-slider svelte-1k93vzh")},m(I,F){Lt(I,t,F),qt(r,t,null),l=!0},p(I,[F]){const U={};F&8&&(U.suffix=I[3]),!n&&F&16&&(n=!0,U.values=I[4],er(()=>n=!1)),!o&&F&1&&(o=!0,U.min=I[0],er(()=>o=!1)),!u&&F&2&&(u=!0,U.max=I[1],er(()=>u=!1)),!c&&F&4&&(c=!0,U.step=I[2],er(()=>c=!1)),r.$set(U)},i(I){l||(Xe(r.$$.fragment,I),l=!0)},o(I){it(r.$$.fragment,I),l=!1},d(I){I&&ge(t),Vt(r)}}}function II(e,t,r){let{value:n}=t,{min:o}=t,{max:u}=t,{unit:c}=t,{step:l=1}=t,h=c==="%"?[n*100]:[n];const v=()=>{c==="%"?r(5,n=h[0]/100):r(5,n=h[0])};function w(F){h=F,r(4,h)}function E(F){o=F,r(0,o)}function T(F){u=F,r(1,u)}function I(F){l=F,r(2,l)}return e.$$set=F=>{"value"in F&&r(5,n=F.value),"min"in F&&r(0,o=F.min),"max"in F&&r(1,u=F.max),"unit"in F&&r(3,c=F.unit),"step"in F&&r(2,l=F.step)},e.$$.update=()=>{e.$$.dirty&16&&v()},[o,u,l,c,h,n,w,E,T,I]}let ns=class extends Dn{constructor(t){super(),zn(this,t,II,CI,Ln,{value:5,min:0,max:1,unit:3,step:2})}};function TI(e){let t,r,n;function o(c){e[3](c)}let u={min:0,max:100,step:1,unit:"%"};return e[0]!==void 0&&(u.value=e[0]),t=new ns({props:u}),Ft.push(()=>Jt(t,"value",o)),{c(){Ut(t.$$.fragment)},l(c){Yt(t.$$.fragment,c)},m(c,l){qt(t,c,l),n=!0},p(c,[l]){const h={};!r&&l&1&&(r=!0,h.value=c[0],er(()=>r=!1)),t.$set(h)},i(c){n||(Xe(t.$$.fragment,c),n=!0)},o(c){it(t.$$.fragment,c),n=!1},d(c){Vt(t,c)}}}function LI(e,t,r){let{map:n}=t,{layer:o}=t,c=(()=>{const v=n==null?void 0:n.getStyle().layers.find(E=>E.id===o.id);let w;switch(v==null?void 0:v.type){case"background":w=n.getPaintProperty(o.id,"background-opacity");break;case"raster":w=n.getPaintProperty(o.id,"raster-opacity");break;case"symbol":w=n.getPaintProperty(o.id,"icon-opacity");break;case"line":w=n.getPaintProperty(o.id,"line-opacity");break;case"fill":w=n.getPaintProperty(o.id,"fill-opacity");break;case"circle":w=n.getPaintProperty(o.id,"circle-opacity");break;case"heatmap":w=n.getPaintProperty(o.id,"heatmap-opacity");break;case"fill-extrusion":w=n.getPaintProperty(o.id,"fill-extrusion-opacity");break}return w||(w=1),w})();const l=dv(()=>{if(!c)return;const v=n==null?void 0:n.getStyle().layers.find(w=>w.id===o.id);switch(v==null?void 0:v.type){case"background":n.setPaintProperty(o.id,"background-opacity",c);break;case"raster":n.setPaintProperty(o.id,"raster-opacity",c);break;case"symbol":n.setPaintProperty(o.id,"icon-opacity",c),n.setPaintProperty(o.id,"text-opacity",c);break;case"line":n.setPaintProperty(o.id,"line-opacity",c);break;case"fill":n.setPaintProperty(o.id,"fill-opacity",c);break;case"circle":n.setPaintProperty(o.id,"circle-opacity",c);break;case"heatmap":n.setPaintProperty(o.id,"heatmap-opacity",c);break;case"fill-extrusion":n.setPaintProperty(o.id,"fill-extrusion-opacity",c);break}},100);function h(v){c=v,r(0,c)}return e.$$set=v=>{"map"in v&&r(1,n=v.map),"layer"in v&&r(2,o=v.layer)},e.$$.update=()=>{e.$$.dirty&1&&l()},[c,n,o,h]}class Bf extends Dn{constructor(t){super(),zn(this,t,LI,TI,Ln,{map:1,layer:2})}}var PI={grad:.9,turn:360,rad:360/(2*Math.PI)},Q0=function(e){return typeof e=="string"?e.length>0:typeof e=="number"},dl=function(e,t,r){return t===void 0&&(t=0),r===void 0&&(r=Math.pow(10,t)),Math.round(r*e)/r+0},Wc=function(e,t,r){return t===void 0&&(t=0),r===void 0&&(r=1),e>r?r:e>t?e:t},B6=function(e){return(e=isFinite(e)?e%360:0)>0?e:e+360},b5=function(e){return{r:Wc(e.r,0,255),g:Wc(e.g,0,255),b:Wc(e.b,0,255),a:Wc(e.a)}},Em=function(e){return{r:dl(e.r),g:dl(e.g),b:dl(e.b),a:dl(e.a,3)}},MI=/^#([0-9a-f]{3,8})$/i,a1=function(e){var t=e.toString(16);return t.length<2?"0"+t:t},j6=function(e){var t=e.r,r=e.g,n=e.b,o=e.a,u=Math.max(t,r,n),c=u-Math.min(t,r,n),l=c?u===t?(r-n)/c:u===r?2+(n-t)/c:4+(t-r)/c:0;return{h:60*(l<0?l+6:l),s:u?c/u*100:0,v:u/255*100,a:o}},U6=function(e){var t=e.h,r=e.s,n=e.v,o=e.a;t=t/360*6,r/=100,n/=100;var u=Math.floor(t),c=n*(1-r),l=n*(1-(t-u)*r),h=n*(1-(1-t+u)*r),v=u%6;return{r:255*[n,l,c,c,h,n][v],g:255*[h,n,n,l,c,c][v],b:255*[c,c,h,n,n,l][v],a:o}},w5=function(e){return{h:B6(e.h),s:Wc(e.s,0,100),l:Wc(e.l,0,100),a:Wc(e.a)}},x5=function(e){return{h:dl(e.h),s:dl(e.s),l:dl(e.l),a:dl(e.a,3)}},k5=function(e){return U6((r=(t=e).s,{h:t.h,s:(r*=((n=t.l)<50?n:100-n)/100)>0?2*r/(n+r)*100:0,v:n+r,a:t.a}));var t,r,n},Zp=function(e){return{h:(t=j6(e)).h,s:(o=(200-(r=t.s))*(n=t.v)/100)>0&&o<200?r*n/100/(o<=100?o:200-o)*100:0,l:o/2,a:t.a};var t,r,n,o},DI=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s*,\s*([+-]?\d*\.?\d+)%\s*,\s*([+-]?\d*\.?\d+)%\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,zI=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s+([+-]?\d*\.?\d+)%\s+([+-]?\d*\.?\d+)%\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,NI=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,RI=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,Qg={string:[[function(e){var t=MI.exec(e);return t?(e=t[1]).length<=4?{r:parseInt(e[0]+e[0],16),g:parseInt(e[1]+e[1],16),b:parseInt(e[2]+e[2],16),a:e.length===4?dl(parseInt(e[3]+e[3],16)/255,2):1}:e.length===6||e.length===8?{r:parseInt(e.substr(0,2),16),g:parseInt(e.substr(2,2),16),b:parseInt(e.substr(4,2),16),a:e.length===8?dl(parseInt(e.substr(6,2),16)/255,2):1}:null:null},"hex"],[function(e){var t=NI.exec(e)||RI.exec(e);return t?t[2]!==t[4]||t[4]!==t[6]?null:b5({r:Number(t[1])/(t[2]?100/255:1),g:Number(t[3])/(t[4]?100/255:1),b:Number(t[5])/(t[6]?100/255:1),a:t[7]===void 0?1:Number(t[7])/(t[8]?100:1)}):null},"rgb"],[function(e){var t=DI.exec(e)||zI.exec(e);if(!t)return null;var r,n,o=w5({h:(r=t[1],n=t[2],n===void 0&&(n="deg"),Number(r)*(PI[n]||1)),s:Number(t[3]),l:Number(t[4]),a:t[5]===void 0?1:Number(t[5])/(t[6]?100:1)});return k5(o)},"hsl"]],object:[[function(e){var t=e.r,r=e.g,n=e.b,o=e.a,u=o===void 0?1:o;return Q0(t)&&Q0(r)&&Q0(n)?b5({r:Number(t),g:Number(r),b:Number(n),a:Number(u)}):null},"rgb"],[function(e){var t=e.h,r=e.s,n=e.l,o=e.a,u=o===void 0?1:o;if(!Q0(t)||!Q0(r)||!Q0(n))return null;var c=w5({h:Number(t),s:Number(r),l:Number(n),a:Number(u)});return k5(c)},"hsl"],[function(e){var t=e.h,r=e.s,n=e.v,o=e.a,u=o===void 0?1:o;if(!Q0(t)||!Q0(r)||!Q0(n))return null;var c=function(l){return{h:B6(l.h),s:Wc(l.s,0,100),v:Wc(l.v,0,100),a:Wc(l.a)}}({h:Number(t),s:Number(r),v:Number(n),a:Number(u)});return U6(c)},"hsv"]]},A5=function(e,t){for(var r=0;r<t.length;r++){var n=t[r][0](e);if(n)return[n,t[r][1]]}return[null,void 0]},OI=function(e){return typeof e=="string"?A5(e.trim(),Qg.string):typeof e=="object"&&e!==null?A5(e,Qg.object):[null,void 0]},Sm=function(e,t){var r=Zp(e);return{h:r.h,s:Wc(r.s+100*t,0,100),l:r.l,a:r.a}},Cm=function(e){return(299*e.r+587*e.g+114*e.b)/1e3/255},E5=function(e,t){var r=Zp(e);return{h:r.h,s:r.s,l:Wc(r.l+100*t,0,100),a:r.a}},ey=function(){function e(t){this.parsed=OI(t)[0],this.rgba=this.parsed||{r:0,g:0,b:0,a:1}}return e.prototype.isValid=function(){return this.parsed!==null},e.prototype.brightness=function(){return dl(Cm(this.rgba),2)},e.prototype.isDark=function(){return Cm(this.rgba)<.5},e.prototype.isLight=function(){return Cm(this.rgba)>=.5},e.prototype.toHex=function(){return t=Em(this.rgba),r=t.r,n=t.g,o=t.b,c=(u=t.a)<1?a1(dl(255*u)):"","#"+a1(r)+a1(n)+a1(o)+c;var t,r,n,o,u,c},e.prototype.toRgb=function(){return Em(this.rgba)},e.prototype.toRgbString=function(){return t=Em(this.rgba),r=t.r,n=t.g,o=t.b,(u=t.a)<1?"rgba("+r+", "+n+", "+o+", "+u+")":"rgb("+r+", "+n+", "+o+")";var t,r,n,o,u},e.prototype.toHsl=function(){return x5(Zp(this.rgba))},e.prototype.toHslString=function(){return t=x5(Zp(this.rgba)),r=t.h,n=t.s,o=t.l,(u=t.a)<1?"hsla("+r+", "+n+"%, "+o+"%, "+u+")":"hsl("+r+", "+n+"%, "+o+"%)";var t,r,n,o,u},e.prototype.toHsv=function(){return t=j6(this.rgba),{h:dl(t.h),s:dl(t.s),v:dl(t.v),a:dl(t.a,3)};var t},e.prototype.invert=function(){return Mu({r:255-(t=this.rgba).r,g:255-t.g,b:255-t.b,a:t.a});var t},e.prototype.saturate=function(t){return t===void 0&&(t=.1),Mu(Sm(this.rgba,t))},e.prototype.desaturate=function(t){return t===void 0&&(t=.1),Mu(Sm(this.rgba,-t))},e.prototype.grayscale=function(){return Mu(Sm(this.rgba,-1))},e.prototype.lighten=function(t){return t===void 0&&(t=.1),Mu(E5(this.rgba,t))},e.prototype.darken=function(t){return t===void 0&&(t=.1),Mu(E5(this.rgba,-t))},e.prototype.rotate=function(t){return t===void 0&&(t=15),this.hue(this.hue()+t)},e.prototype.alpha=function(t){return typeof t=="number"?Mu({r:(r=this.rgba).r,g:r.g,b:r.b,a:t}):dl(this.rgba.a,3);var r},e.prototype.hue=function(t){var r=Zp(this.rgba);return typeof t=="number"?Mu({h:t,s:r.s,l:r.l,a:r.a}):dl(r.h)},e.prototype.isEqual=function(t){return this.toHex()===Mu(t).toHex()},e}(),Mu=function(e){return e instanceof ey?e:new ey(e)},S5=[],FI=function(e){e.forEach(function(t){S5.indexOf(t)<0&&(t(ey,Qg),S5.push(t))})},Im=function(e){var t=e/255;return t<.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)},Tm=function(e){return .2126*Im(e.r)+.7152*Im(e.g)+.0722*Im(e.b)};function BI(e){e.prototype.luminance=function(){return t=Tm(this.rgba),(r=2)===void 0&&(r=0),n===void 0&&(n=Math.pow(10,r)),Math.round(n*t)/n+0;var t,r,n},e.prototype.contrast=function(t){t===void 0&&(t="#FFF");var r,n,o,u,c,l,h,v=t instanceof e?t:new e(t);return u=this.rgba,c=v.toRgb(),l=Tm(u),h=Tm(c),r=l>h?(l+.05)/(h+.05):(h+.05)/(l+.05),(n=2)===void 0&&(n=0),o===void 0&&(o=Math.pow(10,n)),Math.floor(o*r)/o+0},e.prototype.isReadable=function(t,r){return t===void 0&&(t="#FFF"),r===void 0&&(r={}),this.contrast(t)>=(l=(c=(n=r).size)===void 0?"normal":c,(u=(o=n.level)===void 0?"AA":o)==="AAA"&&l==="normal"?7:u==="AA"&&l==="large"?3:4.5);var n,o,u,c,l}}const af=hf({ArrowLeft:0,ArrowUp:0,ArrowRight:0,ArrowDown:0}),mv=AA(af,e=>({...e,ArrowV:e.ArrowUp+e.ArrowDown,ArrowH:e.ArrowLeft+e.ArrowRight,ArrowVH:e.ArrowUp+e.ArrowDown+e.ArrowLeft+e.ArrowRight}));function gv(e,t=.001,r=.01){const u=Math.min(1,Math.max(1,e-50)/50);return t+(r-t)/2*(1-Math.cos(Math.PI*u))}const{window:Np}=Ly;function jI(e){let t,r,n,o,u,c;var l=e[2].pickerIndicator;function h(v){return{props:{pos:v[9],isDark:v[5],hex:Mu({h:v[3],s:v[0],v:v[1],a:1}).toHex()}}}return l&&(r=rs(l,h(e))),{c(){t=yt("div"),r&&Ut(r.$$.fragment),this.h()},l(v){t=vt(v,"DIV",{class:!0,tabindex:!0,style:!0,"aria-label":!0,"aria-valuemin":!0,"aria-valuemax":!0,"aria-valuetext":!0});var w=Ct(t);r&&Yt(r.$$.fragment,w),w.forEach(ge),this.h()},h(){var v,w;ve(t,"class","picker svelte-uiwgvv"),ve(t,"tabindex","0"),zo(t,"--color-bg",e[8]),ve(t,"aria-label","saturation and brightness picker (arrow keyboard navigation)"),ve(t,"aria-valuemin",0),ve(t,"aria-valuemax",100),ve(t,"aria-valuetext",n="saturation "+((v=e[9].x)==null?void 0:v.toFixed())+"%, brightness "+((w=e[9].y)==null?void 0:w.toFixed())+"%")},m(v,w){Lt(v,t,w),r&&qt(r,t,null),e[18](t),o=!0,u||(c=[rn(t,"mousedown",np(Fl(e[10]))),rn(t,"touchstart",e[16]),rn(t,"touchmove",np(Fl(e[16]))),rn(t,"touchend",e[16])],u=!0)},p(v,w){var T,I;const E={};if(w&512&&(E.pos=v[9]),w&32&&(E.isDark=v[5]),w&11&&(E.hex=Mu({h:v[3],s:v[0],v:v[1],a:1}).toHex()),l!==(l=v[2].pickerIndicator)){if(r){ji();const F=r;it(F.$$.fragment,1,0,()=>{Vt(F,1)}),Ui()}l?(r=rs(l,h(v)),Ut(r.$$.fragment),Xe(r.$$.fragment,1),qt(r,t,null)):r=null}else l&&r.$set(E);(!o||w&256)&&zo(t,"--color-bg",v[8]),(!o||w&512&&n!==(n="saturation "+((T=v[9].x)==null?void 0:T.toFixed())+"%, brightness "+((I=v[9].y)==null?void 0:I.toFixed())+"%"))&&ve(t,"aria-valuetext",n)},i(v){o||(r&&Xe(r.$$.fragment,v),o=!0)},o(v){r&&it(r.$$.fragment,v),o=!1},d(v){v&&ge(t),r&&Vt(r),e[18](null),u=!1,oa(c)}}}function UI(e){let t,r,n,o,u;var c=e[2].pickerWrapper;function l(h){return{props:{focused:h[7],toRight:h[4],$$slots:{default:[jI]},$$scope:{ctx:h}}}}return c&&(t=rs(c,l(e))),{c(){t&&Ut(t.$$.fragment),r=ao()},l(h){t&&Yt(t.$$.fragment,h),r=ao()},m(h,v){t&&qt(t,h,v),Lt(h,r,v),n=!0,o||(u=[rn(Np,"mouseup",e[11]),rn(Np,"mousedown",e[13]),rn(Np,"mousemove",e[12]),rn(Np,"keyup",e[14]),rn(Np,"keydown",e[15])],o=!0)},p(h,[v]){const w={};if(v&128&&(w.focused=h[7]),v&16&&(w.toRight=h[4]),v&67109743&&(w.$$scope={dirty:v,ctx:h}),c!==(c=h[2].pickerWrapper)){if(t){ji();const E=t;it(E.$$.fragment,1,0,()=>{Vt(E,1)}),Ui()}c?(t=rs(c,l(h)),Ut(t.$$.fragment),Xe(t.$$.fragment,1),qt(t,r.parentNode,r)):t=null}else c&&t.$set(w)},i(h){n||(t&&Xe(t.$$.fragment,h),n=!0)},o(h){t&&it(t.$$.fragment,h),n=!1},d(h){h&&ge(r),t&&Vt(t,h),o=!1,oa(u)}}}function C5(e,t,r){return Math.min(Math.max(t,e),r)}function qI(e,t,r){let n,o;ql(e,af,Fe=>r(22,n=Fe)),ql(e,mv,Fe=>r(23,o=Fe));let{components:u}=t,{h:c}=t,{s:l}=t,{v:h}=t,{isOpen:v}=t,{toRight:w}=t,{isDark:E}=t,T,I=!1,F=!1,U,G,H,X={x:100,y:0};function ee(Fe){let ot={x:Fe.offsetX,y:Fe.offsetY},_t=T.getBoundingClientRect().width,ht=T.getBoundingClientRect().height;r(0,l=C5(ot.x/_t,0,1)*100),r(1,h=C5((ht-ot.y)/ht,0,1)*100)}function K(Fe){Fe.button===0&&(I=!0,ee(Fe))}function se(){I=!1}function ce(Fe){I&&ee({offsetX:Math.max(0,Math.min(T.getBoundingClientRect().width,Fe.clientX-T.getBoundingClientRect().left)),offsetY:Math.max(0,Math.min(T.getBoundingClientRect().height,Fe.clientY-T.getBoundingClientRect().top))})}function _e(Fe){Fe.target.isSameNode(T)||r(7,F=!1)}function pe(Fe){var ot;Fe.key==="Tab"&&r(7,F=!!((ot=document.activeElement)!=null&&ot.isSameNode(T))),!Fe.repeat&&F&&We()}function Ge(Fe){F&&o.ArrowVH&&(Fe.preventDefault(),Fe.repeat||We())}function We(){o.ArrowVH?U||(G=0,U=window.setInterval(()=>{let Fe=gv(++G);r(0,l=Math.min(100,Math.max(0,l+(n.ArrowRight-n.ArrowLeft)*Fe*100))),r(1,h=Math.min(100,Math.max(0,h+(n.ArrowUp-n.ArrowDown)*Fe*100)))},10)):U&&(clearInterval(U),U=void 0)}function Ae(Fe){Fe.preventDefault(),ee({offsetX:Fe.changedTouches[0].clientX-T.getBoundingClientRect().left,offsetY:Fe.changedTouches[0].clientY-T.getBoundingClientRect().top})}function Ie(Fe){Ft[Fe?"unshift":"push"](()=>{T=Fe,r(6,T)})}return e.$$set=Fe=>{"components"in Fe&&r(2,u=Fe.components),"h"in Fe&&r(3,c=Fe.h),"s"in Fe&&r(0,l=Fe.s),"v"in Fe&&r(1,h=Fe.v),"isOpen"in Fe&&r(17,v=Fe.isOpen),"toRight"in Fe&&r(4,w=Fe.toRight),"isDark"in Fe&&r(5,E=Fe.isDark)},e.$$.update=()=>{e.$$.dirty&8&&typeof c=="number"&&r(8,H=Mu({h:c,s:100,v:100,a:1}).toHex()),e.$$.dirty&67&&typeof l=="number"&&typeof h=="number"&&T&&r(9,X={x:l,y:100-h})},[l,h,u,c,w,E,T,F,H,X,K,se,ce,_e,pe,Ge,Ae,v,Ie]}class VI extends Dn{constructor(t){super(),zn(this,t,qI,UI,Ln,{components:2,h:3,s:0,v:1,isOpen:17,toRight:4,isDark:5})}}const{window:s1}=Ly;function $I(e){let t,r,n,o,u,c;var l=e[1].sliderIndicator;function h(v){return{props:{pos:v[4],toRight:v[2]}}}return l&&(r=rs(l,h(e))),{c(){t=yt("div"),r&&Ut(r.$$.fragment),this.h()},l(v){t=vt(v,"DIV",{class:!0,tabindex:!0,"aria-label":!0,"aria-valuemin":!0,"aria-valuemax":!0,"aria-valuenow":!0});var w=Ct(t);r&&Yt(r.$$.fragment,w),w.forEach(ge),this.h()},h(){ve(t,"class","slider svelte-14nweqy"),ve(t,"tabindex","0"),ve(t,"aria-label","hue picker (arrow keyboard navigation)"),ve(t,"aria-valuemin",0),ve(t,"aria-valuemax",360),ve(t,"aria-valuenow",n=Math.round(e[0])),ni(t,"to-right",e[2])},m(v,w){Lt(v,t,w),r&&qt(r,t,null),e[12](t),o=!0,u||(c=[rn(t,"mousedown",np(Fl(e[6]))),rn(t,"touchstart",e[11]),rn(t,"touchmove",np(Fl(e[11]))),rn(t,"touchend",e[11])],u=!0)},p(v,w){const E={};if(w&16&&(E.pos=v[4]),w&4&&(E.toRight=v[2]),l!==(l=v[1].sliderIndicator)){if(r){ji();const T=r;it(T.$$.fragment,1,0,()=>{Vt(T,1)}),Ui()}l?(r=rs(l,h(v)),Ut(r.$$.fragment),Xe(r.$$.fragment,1),qt(r,t,null)):r=null}else l&&r.$set(E);(!o||w&1&&n!==(n=Math.round(v[0])))&&ve(t,"aria-valuenow",n),(!o||w&4)&&ni(t,"to-right",v[2])},i(v){o||(r&&Xe(r.$$.fragment,v),o=!0)},o(v){r&&it(r.$$.fragment,v),o=!1},d(v){v&&ge(t),r&&Vt(r),e[12](null),u=!1,oa(c)}}}function GI(e){let t,r,n,o,u;var c=e[1].sliderWrapper;function l(h){return{props:{focused:h[5],toRight:h[2],$$slots:{default:[$I]},$$scope:{ctx:h}}}}return c&&(t=rs(c,l(e))),{c(){t&&Ut(t.$$.fragment),r=ao()},l(h){t&&Yt(t.$$.fragment,h),r=ao()},m(h,v){t&&qt(t,h,v),Lt(h,r,v),n=!0,o||(u=[rn(s1,"mouseup",e[7]),rn(s1,"mousemove",e[8]),rn(s1,"keyup",e[9]),rn(s1,"keydown",e[10])],o=!0)},p(h,[v]){const w={};if(v&32&&(w.focused=h[5]),v&4&&(w.toRight=h[2]),v&1048607&&(w.$$scope={dirty:v,ctx:h}),c!==(c=h[1].sliderWrapper)){if(t){ji();const E=t;it(E.$$.fragment,1,0,()=>{Vt(E,1)}),Ui()}c?(t=rs(c,l(h)),Ut(t.$$.fragment),Xe(t.$$.fragment,1),qt(t,r.parentNode,r)):t=null}else c&&t.$set(w)},i(h){n||(t&&Xe(t.$$.fragment,h),n=!0)},o(h){t&&it(t.$$.fragment,h),n=!1},d(h){h&&ge(r),t&&Vt(t,h),o=!1,oa(u)}}}function HI(e,t,r){let n,o;ql(e,af,_e=>r(16,n=_e)),ql(e,mv,_e=>r(17,o=_e));let{components:u}=t,{toRight:c}=t,l,h=!1,{h:v}=t,w=0,E=!1,T,I;function F(_e){const pe=c?l.getBoundingClientRect().width:l.getBoundingClientRect().height,Ge=Math.max(0,Math.min(pe,_e));r(0,v=Ge/pe*360)}function U(_e){_e.button===0&&(h=!0,F(c?_e.offsetX:_e.offsetY))}function G(){h=!1}function H(_e){h&&F(c?_e.clientX-l.getBoundingClientRect().left:_e.clientY-l.getBoundingClientRect().top)}function X(_e){var pe;_e.key==="Tab"&&r(5,E=!!((pe=document.activeElement)!=null&&pe.isSameNode(l))),!_e.repeat&&E&&K()}function ee(_e){E&&o.ArrowVH&&(_e.preventDefault(),_e.repeat||K())}function K(){o.ArrowVH?T||(I=0,T=window.setInterval(()=>{const _e=gv(++I),pe=c?n.ArrowRight-n.ArrowLeft:n.ArrowDown-n.ArrowUp;r(0,v=Math.min(360,Math.max(0,v+pe*360*_e)))},10)):T&&(clearInterval(T),T=void 0)}function se(_e){_e.preventDefault(),F(c?_e.changedTouches[0].clientX-l.getBoundingClientRect().left:_e.changedTouches[0].clientY-l.getBoundingClientRect().top)}function ce(_e){Ft[_e?"unshift":"push"](()=>{l=_e,r(3,l)})}return e.$$set=_e=>{"components"in _e&&r(1,u=_e.components),"toRight"in _e&&r(2,c=_e.toRight),"h"in _e&&r(0,v=_e.h)},e.$$.update=()=>{e.$$.dirty&9&&typeof v=="number"&&l&&r(4,w=100*v/360)},[v,u,c,l,w,E,U,G,H,X,ee,se,ce]}class WI extends Dn{constructor(t){super(),zn(this,t,HI,GI,Ln,{components:1,toRight:2,h:0})}}const{window:l1}=Ly;function ZI(e){let t,r,n,o,u,c,l;var h=e[0].alphaIndicator;function v(w){return{props:{pos:w[5],toRight:w[2]}}}return h&&(r=rs(h,v(e))),{c(){t=yt("div"),r&&Ut(r.$$.fragment),this.h()},l(w){t=vt(w,"DIV",{class:!0,tabindex:!0,style:!0,"aria-label":!0,"aria-valuemin":!0,"aria-valuemax":!0,"aria-valuenow":!0,"aria-valuetext":!0});var E=Ct(t);r&&Yt(r.$$.fragment,E),E.forEach(ge),this.h()},h(){var w,E;ve(t,"class","alpha svelte-f2vq53"),ve(t,"tabindex","0"),zo(t,"--alpha-color",(w=e[1])==null?void 0:w.substring(0,7)),ve(t,"aria-label","transparency picker (arrow keyboard navigation)"),ve(t,"aria-valuemin",0),ve(t,"aria-valuemax",100),ve(t,"aria-valuenow",n=Math.round(e[5])),ve(t,"aria-valuetext",o=((E=e[5])==null?void 0:E.toFixed())+"%"),ni(t,"to-right",e[2])},m(w,E){Lt(w,t,E),r&&qt(r,t,null),e[14](t),u=!0,c||(l=[rn(t,"mousedown",np(Fl(e[6]))),rn(t,"touchstart",e[11]),rn(t,"touchmove",np(Fl(e[11]))),rn(t,"touchend",e[11])],c=!0)},p(w,E){var I,F;const T={};if(E&32&&(T.pos=w[5]),E&4&&(T.toRight=w[2]),h!==(h=w[0].alphaIndicator)){if(r){ji();const U=r;it(U.$$.fragment,1,0,()=>{Vt(U,1)}),Ui()}h?(r=rs(h,v(w)),Ut(r.$$.fragment),Xe(r.$$.fragment,1),qt(r,t,null)):r=null}else h&&r.$set(T);(!u||E&2)&&zo(t,"--alpha-color",(I=w[1])==null?void 0:I.substring(0,7)),(!u||E&32&&n!==(n=Math.round(w[5])))&&ve(t,"aria-valuenow",n),(!u||E&32&&o!==(o=((F=w[5])==null?void 0:F.toFixed())+"%"))&&ve(t,"aria-valuetext",o),(!u||E&4)&&ni(t,"to-right",w[2])},i(w){u||(r&&Xe(r.$$.fragment,w),u=!0)},o(w){r&&it(r.$$.fragment,w),u=!1},d(w){w&&ge(t),r&&Vt(r),e[14](null),c=!1,oa(l)}}}function XI(e){let t,r,n,o,u;var c=e[0].alphaWrapper;function l(h){return{props:{focused:h[4],toRight:h[2],$$slots:{default:[ZI]},$$scope:{ctx:h}}}}return c&&(t=rs(c,l(e))),{c(){t&&Ut(t.$$.fragment),r=ao()},l(h){t&&Yt(t.$$.fragment,h),r=ao()},m(h,v){t&&qt(t,h,v),Lt(h,r,v),n=!0,o||(u=[rn(l1,"mouseup",e[7]),rn(l1,"mousemove",e[8]),rn(l1,"keyup",e[9]),rn(l1,"keydown",e[10])],o=!0)},p(h,[v]){const w={};if(v&16&&(w.focused=h[4]),v&4&&(w.toRight=h[2]),v&4194351&&(w.$$scope={dirty:v,ctx:h}),c!==(c=h[0].alphaWrapper)){if(t){ji();const E=t;it(E.$$.fragment,1,0,()=>{Vt(E,1)}),Ui()}c?(t=rs(c,l(h)),Ut(t.$$.fragment),Xe(t.$$.fragment,1),qt(t,r.parentNode,r)):t=null}else c&&t.$set(w)},i(h){n||(t&&Xe(t.$$.fragment,h),n=!0)},o(h){t&&it(t.$$.fragment,h),n=!1},d(h){h&&ge(r),t&&Vt(t,h),o=!1,oa(u)}}}function YI(e,t,r){let n,o;ql(e,af,Ge=>r(18,n=Ge)),ql(e,mv,Ge=>r(19,o=Ge));let{components:u}=t,{isOpen:c}=t,{a:l=1}=t,{hex:h}=t,{toRight:v}=t,w,E=!1,T=!1,I,F,U;function G(Ge){const We=v?w.getBoundingClientRect().width:w.getBoundingClientRect().height,Ae=Math.max(0,Math.min(We,Ge));r(12,l=Ae/We)}function H(Ge){Ge.button===0&&(E=!0,G(v?Ge.offsetX:Ge.offsetY))}function X(){E=!1}function ee(Ge){E&&G(v?Ge.clientX-w.getBoundingClientRect().left:Ge.clientY-w.getBoundingClientRect().top)}function K(Ge){var We;Ge.key==="Tab"&&r(4,T=!!((We=document.activeElement)!=null&&We.isSameNode(w))),!Ge.repeat&&T&&ce()}function se(Ge){T&&o.ArrowVH&&(Ge.preventDefault(),Ge.repeat||ce())}function ce(){o.ArrowVH?I||(F=0,I=window.setInterval(()=>{const Ge=gv(++F),We=v?n.ArrowRight-n.ArrowLeft:n.ArrowDown-n.ArrowUp;r(12,l=Math.min(1,Math.max(0,l+We*Ge)))},10)):I&&(clearInterval(I),I=void 0)}function _e(Ge){Ge.preventDefault(),G(v?Ge.changedTouches[0].clientX-w.getBoundingClientRect().left:Ge.changedTouches[0].clientY-w.getBoundingClientRect().top)}function pe(Ge){Ft[Ge?"unshift":"push"](()=>{w=Ge,r(3,w)})}return e.$$set=Ge=>{"components"in Ge&&r(0,u=Ge.components),"isOpen"in Ge&&r(13,c=Ge.isOpen),"a"in Ge&&r(12,l=Ge.a),"hex"in Ge&&r(1,h=Ge.hex),"toRight"in Ge&&r(2,v=Ge.toRight)},e.$$.update=()=>{e.$$.dirty&4104&&typeof l=="number"&&w&&r(5,U=100*l)},[u,h,v,w,T,U,H,X,ee,K,se,_e,l,c,pe]}class JI extends Dn{constructor(t){super(),zn(this,t,YI,XI,Ln,{components:0,isOpen:13,a:12,hex:1,toRight:2})}}function KI(e){let t,r,n,o,u,c,l,h,v,w=e[2]&&I5(e);return{c(){t=yt("div"),r=yt("input"),n=mr(),o=yt("input"),u=mr(),c=yt("input"),l=mr(),w&&w.c(),this.h()},l(E){t=vt(E,"DIV",{class:!0});var T=Ct(t);r=vt(T,"INPUT",{"aria-label":!0,type:!0,min:!0,max:!0,class:!0}),n=gr(T),o=vt(T,"INPUT",{"aria-label":!0,type:!0,min:!0,max:!0,class:!0}),u=gr(T),c=vt(T,"INPUT",{"aria-label":!0,type:!0,min:!0,max:!0,class:!0}),l=gr(T),w&&w.l(T),T.forEach(ge),this.h()},h(){ve(r,"aria-label","hue chanel color"),r.value=e[8],ve(r,"type","number"),ve(r,"min","0"),ve(r,"max","360"),ve(r,"class","svelte-11z4jba"),ve(o,"aria-label","saturation chanel color"),o.value=e[7],ve(o,"type","number"),ve(o,"min","0"),ve(o,"max","100"),ve(o,"class","svelte-11z4jba"),ve(c,"aria-label","brightness chanel color"),c.value=e[6],ve(c,"type","number"),ve(c,"min","0"),ve(c,"max","100"),ve(c,"class","svelte-11z4jba"),ve(t,"class","input-container svelte-11z4jba")},m(E,T){Lt(E,t,T),lt(t,r),lt(t,n),lt(t,o),lt(t,u),lt(t,c),lt(t,l),w&&w.m(t,null),h||(v=[rn(r,"input",e[12]("h")),rn(o,"input",e[12]("s")),rn(c,"input",e[12]("v"))],h=!0)},p(E,T){T&256&&r.value!==E[8]&&(r.value=E[8]),T&128&&o.value!==E[7]&&(o.value=E[7]),T&64&&c.value!==E[6]&&(c.value=E[6]),E[2]?w?w.p(E,T):(w=I5(E),w.c(),w.m(t,null)):w&&(w.d(1),w=null)},d(E){E&&ge(t),w&&w.d(),h=!1,oa(v)}}}function QI(e){let t,r,n,o,u,c,l,h,v,w,E,T,I=e[2]&&T5(e);return{c(){t=yt("div"),r=yt("input"),o=mr(),u=yt("input"),l=mr(),h=yt("input"),w=mr(),I&&I.c(),this.h()},l(F){t=vt(F,"DIV",{class:!0});var U=Ct(t);r=vt(U,"INPUT",{"aria-label":!0,type:!0,min:!0,max:!0,class:!0}),o=gr(U),u=vt(U,"INPUT",{"aria-label":!0,type:!0,min:!0,max:!0,class:!0}),l=gr(U),h=vt(U,"INPUT",{"aria-label":!0,type:!0,min:!0,max:!0,class:!0}),w=gr(U),I&&I.l(U),U.forEach(ge),this.h()},h(){ve(r,"aria-label","red chanel color"),r.value=n=e[0].r,ve(r,"type","number"),ve(r,"min","0"),ve(r,"max","255"),ve(r,"class","svelte-11z4jba"),ve(u,"aria-label","green chanel color"),u.value=c=e[0].g,ve(u,"type","number"),ve(u,"min","0"),ve(u,"max","255"),ve(u,"class","svelte-11z4jba"),ve(h,"aria-label","blue chanel color"),h.value=v=e[0].b,ve(h,"type","number"),ve(h,"min","0"),ve(h,"max","255"),ve(h,"class","svelte-11z4jba"),ve(t,"class","input-container svelte-11z4jba")},m(F,U){Lt(F,t,U),lt(t,r),lt(t,o),lt(t,u),lt(t,l),lt(t,h),lt(t,w),I&&I.m(t,null),E||(T=[rn(r,"input",e[11]("r")),rn(u,"input",e[11]("g")),rn(h,"input",e[11]("b"))],E=!0)},p(F,U){U&1&&n!==(n=F[0].r)&&r.value!==n&&(r.value=n),U&1&&c!==(c=F[0].g)&&u.value!==c&&(u.value=c),U&1&&v!==(v=F[0].b)&&h.value!==v&&(h.value=v),F[2]?I?I.p(F,U):(I=T5(F),I.c(),I.m(t,null)):I&&(I.d(1),I=null)},d(F){F&&ge(t),I&&I.d(),E=!1,oa(T)}}}function eT(e){let t,r,n,o,u,c=e[2]&&L5(e);return{c(){t=yt("div"),r=yt("input"),n=mr(),c&&c.c(),this.h()},l(l){t=vt(l,"DIV",{class:!0});var h=Ct(t);r=vt(h,"INPUT",{style:!0,class:!0}),n=gr(h),c&&c.l(h),h.forEach(ge),this.h()},h(){r.value=e[1],zo(r,"flex","3"),ve(r,"class","svelte-11z4jba"),ve(t,"class","input-container svelte-11z4jba")},m(l,h){Lt(l,t,h),lt(t,r),lt(t,n),c&&c.m(t,null),o||(u=rn(r,"input",e[10]),o=!0)},p(l,h){h&2&&r.value!==l[1]&&(r.value=l[1]),l[2]?c?c.p(l,h):(c=L5(l),c.c(),c.m(t,null)):c&&(c.d(1),c=null)},d(l){l&&ge(t),c&&c.d(),o=!1,u()}}}function I5(e){let t,r,n;return{c(){t=yt("input"),this.h()},l(o){t=vt(o,"INPUT",{"aria-label":!0,type:!0,min:!0,max:!0,step:!0,class:!0}),this.h()},h(){ve(t,"aria-label","transparency chanel color"),t.value=e[5],ve(t,"type","number"),ve(t,"min","0"),ve(t,"max","1"),ve(t,"step","0.01"),ve(t,"class","svelte-11z4jba")},m(o,u){Lt(o,t,u),r||(n=rn(t,"input",e[12]("a")),r=!0)},p(o,u){u&32&&t.value!==o[5]&&(t.value=o[5])},d(o){o&&ge(t),r=!1,n()}}}function T5(e){let t,r,n;return{c(){t=yt("input"),this.h()},l(o){t=vt(o,"INPUT",{"aria-label":!0,type:!0,min:!0,max:!0,step:!0,class:!0}),this.h()},h(){ve(t,"aria-label","transparency chanel color"),t.value=e[5],ve(t,"type","number"),ve(t,"min","0"),ve(t,"max","1"),ve(t,"step","0.01"),ve(t,"class","svelte-11z4jba")},m(o,u){Lt(o,t,u),r||(n=rn(t,"input",e[11]("a")),r=!0)},p(o,u){u&32&&t.value!==o[5]&&(t.value=o[5])},d(o){o&&ge(t),r=!1,n()}}}function L5(e){let t,r,n;return{c(){t=yt("input"),this.h()},l(o){t=vt(o,"INPUT",{"aria-label":!0,type:!0,min:!0,max:!0,step:!0,class:!0}),this.h()},h(){ve(t,"aria-label","hexadecimal color"),t.value=e[5],ve(t,"type","number"),ve(t,"min","0"),ve(t,"max","1"),ve(t,"step","0.01"),ve(t,"class","svelte-11z4jba")},m(o,u){Lt(o,t,u),r||(n=rn(t,"input",e[11]("a")),r=!0)},p(o,u){u&32&&t.value!==o[5]&&(t.value=o[5])},d(o){o&&ge(t),r=!1,n()}}}function P5(e){let t,r=e[9][e[4]]+"",n,o,u,c;return{c(){t=yt("button"),n=ei(r),this.h()},l(l){t=vt(l,"BUTTON",{"aria-label":!0,class:!0});var h=Ct(t);n=ti(h,r),h.forEach(ge),this.h()},h(){ve(t,"aria-label",o="change inputs to "+e[9][(e[4]+1)%3]),ve(t,"class","svelte-11z4jba")},m(l,h){Lt(l,t,h),lt(t,n),u||(c=rn(t,"click",e[14]),u=!0)},p(l,h){h&16&&r!==(r=l[9][l[4]]+"")&&ta(n,r),h&16&&o!==(o="change inputs to "+l[9][(l[4]+1)%3])&&ve(t,"aria-label",o)},d(l){l&&ge(t),u=!1,c()}}}function tT(e){let t,r;function n(l,h){return l[4]===0?eT:l[4]===1?QI:KI}let o=n(e),u=o(e),c=e[3]&&P5(e);return{c(){t=yt("div"),u.c(),r=mr(),c&&c.c(),this.h()},l(l){t=vt(l,"DIV",{class:!0});var h=Ct(t);u.l(h),r=gr(h),c&&c.l(h),h.forEach(ge),this.h()},h(){ve(t,"class","text-input svelte-11z4jba")},m(l,h){Lt(l,t,h),u.m(t,null),lt(t,r),c&&c.m(t,null)},p(l,[h]){o===(o=n(l))&&u?u.p(l,h):(u.d(1),u=o(l),u&&(u.c(),u.m(t,r))),l[3]?c?c.p(l,h):(c=P5(l),c.c(),c.m(t,null)):c&&(c.d(1),c=null)},i:Qn,o:Qn,d(l){l&&ge(t),u.d(),c&&c.d()}}}const rT=/^#?([A-F0-9]{6}|[A-F0-9]{8})$/i;function nT(e,t,r){let n,o,u,c,{isAlpha:l}=t,{rgb:h}=t,{hsv:v}=t,{hex:w}=t,{canChangeMode:E}=t;const T=["HEX","RGB","HSV"];let I=0;function F(X){const ee=X.target;rT.test(ee.value)&&r(1,w=ee.value)}function U(X){return function(ee){r(0,h={...h,[X]:parseFloat(ee.target.value)})}}function G(X){return function(ee){r(13,v={...v,[X]:parseFloat(ee.target.value)})}}const H=()=>r(4,I=(I+1)%3);return e.$$set=X=>{"isAlpha"in X&&r(2,l=X.isAlpha),"rgb"in X&&r(0,h=X.rgb),"hsv"in X&&r(13,v=X.hsv),"hex"in X&&r(1,w=X.hex),"canChangeMode"in X&&r(3,E=X.canChangeMode)},e.$$.update=()=>{e.$$.dirty&8192&&r(8,n=Math.round(v.h)),e.$$.dirty&8192&&r(7,o=Math.round(v.s)),e.$$.dirty&8192&&r(6,u=Math.round(v.v)),e.$$.dirty&8192&&r(5,c=v.a===void 0?1:Math.round(v.a*100)/100)},[h,w,l,E,I,c,u,o,n,T,F,U,G,v,H]}class iT extends Dn{constructor(t){super(),zn(this,t,nT,tT,Ln,{isAlpha:2,rgb:0,hsv:13,hex:1,canChangeMode:3})}}function oT(e){let t,r;return{c(){t=yt("div"),this.h()},l(n){t=vt(n,"DIV",{class:!0,style:!0}),Ct(t).forEach(ge),this.h()},h(){ve(t,"class","slider-indicator svelte-htgglv"),ve(t,"style",r=`top: calc(${e[0]/200*186}% + 2px);`)},m(n,o){Lt(n,t,o)},p(n,[o]){o&1&&r!==(r=`top: calc(${n[0]/200*186}% + 2px);`)&&ve(t,"style",r)},i:Qn,o:Qn,d(n){n&&ge(t)}}}function aT(e,t,r){let{pos:n}=t,{toRight:o}=t;return e.$$set=u=>{"pos"in u&&r(0,n=u.pos),"toRight"in u&&r(1,o=u.toRight)},[n,o]}let M5=class extends Dn{constructor(t){super(),zn(this,t,aT,oT,Ln,{pos:0,toRight:1})}};function sT(e){let t,r;return{c(){t=yt("div"),this.h()},l(n){t=vt(n,"DIV",{class:!0,style:!0}),Ct(t).forEach(ge),this.h()},h(){ve(t,"class","picker-indicator svelte-1nw247x"),ve(t,"style",r=`left: calc(${e[0].x/200*186}% + 2px); top: calc(${e[0].y/200*186}% + 2px); box-shadow: 0 0 4px ${e[1]?"white":"black"};`)},m(n,o){Lt(n,t,o)},p(n,[o]){o&3&&r!==(r=`left: calc(${n[0].x/200*186}% + 2px); top: calc(${n[0].y/200*186}% + 2px); box-shadow: 0 0 4px ${n[1]?"white":"black"};`)&&ve(t,"style",r)},i:Qn,o:Qn,d(n){n&&ge(t)}}}function lT(e,t,r){let{pos:n}=t,{hex:o}=t,{isDark:u}=t;return e.$$set=c=>{"pos"in c&&r(0,n=c.pos),"hex"in c&&r(2,o=c.hex),"isDark"in c&&r(1,u=c.isDark)},[n,u,o]}let uT=class extends Dn{constructor(t){super(),zn(this,t,lT,sT,Ln,{pos:0,hex:2,isDark:1})}};function cT(e){let t,r;return{c:Qn,l:Qn,m(n,o){t||(r=[rn(window,"keyup",e[0]),rn(window,"keydown",e[1])],t=!0)},p:Qn,i:Qn,o:Qn,d(n){t=!1,oa(r)}}}function fT(e,t,r){let n;ql(e,af,c=>r(2,n=c));function o(c){["ArrowLeft","ArrowUp","ArrowRight","ArrowDown"].includes(c.key)&&(lh(af,n[c.key]=0,n),af.set(n))}function u(c){["ArrowLeft","ArrowUp","ArrowRight","ArrowDown"].includes(c.key)&&(c.repeat||(lh(af,n[c.key]=1,n),af.set(n)))}return[o,u]}class hT extends Dn{constructor(t){super(),zn(this,t,fT,cT,Ln,{})}}function pT(e){let t,r;const n=e[3].default,o=Ou(n,e,e[2],null);return{c(){t=yt("div"),o&&o.c(),this.h()},l(u){t=vt(u,"DIV",{class:!0});var c=Ct(t);o&&o.l(c),c.forEach(ge),this.h()},h(){ve(t,"class","picker-wrapper svelte-1isc651"),ni(t,"focused",e[0])},m(u,c){Lt(u,t,c),o&&o.m(t,null),r=!0},p(u,[c]){o&&o.p&&(!r||c&4)&&Fu(o,n,u,u[2],r?ju(n,u[2],c,null):Bu(u[2]),null),(!r||c&1)&&ni(t,"focused",u[0])},i(u){r||(Xe(o,u),r=!0)},o(u){it(o,u),r=!1},d(u){u&&ge(t),o&&o.d(u)}}}function dT(e,t,r){let{$$slots:n={},$$scope:o}=t,{focused:u}=t,{toRight:c}=t;return e.$$set=l=>{"focused"in l&&r(0,u=l.focused),"toRight"in l&&r(1,c=l.toRight),"$$scope"in l&&r(2,o=l.$$scope)},[u,c,o,n]}let mT=class extends Dn{constructor(t){super(),zn(this,t,dT,pT,Ln,{focused:0,toRight:1})}};function gT(e){let t,r;const n=e[3].default,o=Ou(n,e,e[2],null);return{c(){t=yt("div"),o&&o.c(),this.h()},l(u){t=vt(u,"DIV",{class:!0});var c=Ct(t);o&&o.l(c),c.forEach(ge),this.h()},h(){ve(t,"class","slider-wrapper svelte-1udewng"),ni(t,"focused",e[0])},m(u,c){Lt(u,t,c),o&&o.m(t,null),r=!0},p(u,[c]){o&&o.p&&(!r||c&4)&&Fu(o,n,u,u[2],r?ju(n,u[2],c,null):Bu(u[2]),null),(!r||c&1)&&ni(t,"focused",u[0])},i(u){r||(Xe(o,u),r=!0)},o(u){it(o,u),r=!1},d(u){u&&ge(t),o&&o.d(u)}}}function yT(e,t,r){let{$$slots:n={},$$scope:o}=t,{focused:u}=t,{toRight:c}=t;return e.$$set=l=>{"focused"in l&&r(0,u=l.focused),"toRight"in l&&r(1,c=l.toRight),"$$scope"in l&&r(2,o=l.$$scope)},[u,c,o,n]}let D5=class extends Dn{constructor(t){super(),zn(this,t,yT,gT,Ln,{focused:0,toRight:1})}};function vT(e){let t,r,n,o,u,c,l,h,v,w,E;return{c(){t=yt("label"),r=yt("div"),n=yt("input"),o=mr(),u=yt("div"),c=mr(),l=yt("div"),h=mr(),v=ei(e[2]),this.h()},l(T){t=vt(T,"LABEL",{class:!0});var I=Ct(t);r=vt(I,"DIV",{class:!0});var F=Ct(r);n=vt(F,"INPUT",{type:!0,"aria-haspopup":!0,class:!0}),o=gr(F),u=vt(F,"DIV",{class:!0}),Ct(u).forEach(ge),c=gr(F),l=vt(F,"DIV",{class:!0,style:!0}),Ct(l).forEach(ge),F.forEach(ge),h=gr(I),v=ti(I,e[2]),I.forEach(ge),this.h()},h(){ve(n,"type","color"),n.value=e[1],ve(n,"aria-haspopup","dialog"),ve(n,"class","svelte-2ybi8r"),ve(u,"class","alpha svelte-2ybi8r"),ve(l,"class","color svelte-2ybi8r"),zo(l,"background",e[1]),ve(r,"class","container svelte-2ybi8r"),ve(t,"class","svelte-2ybi8r")},m(T,I){Lt(T,t,I),lt(t,r),lt(r,n),lt(r,o),lt(r,u),lt(r,c),lt(r,l),lt(t,h),lt(t,v),e[4](t),w||(E=[rn(n,"click",Fl(_T)),rn(n,"mousedown",Fl(bT)),rn(t,"click",Fl(wT)),rn(t,"mousedown",Fl(xT))],w=!0)},p(T,[I]){I&2&&(n.value=T[1]),I&2&&zo(l,"background",T[1]),I&4&&ta(v,T[2])},i:Qn,o:Qn,d(T){T&&ge(t),e[4](null),w=!1,oa(E)}}}const _T=()=>{},bT=()=>{},wT=()=>{},xT=()=>{};function kT(e,t,r){let{labelWrapper:n}=t,{hex:o}=t,{label:u}=t,{isOpen:c}=t;function l(h){Ft[h?"unshift":"push"](()=>{n=h,r(0,n)})}return e.$$set=h=>{"labelWrapper"in h&&r(0,n=h.labelWrapper),"hex"in h&&r(1,o=h.hex),"label"in h&&r(2,u=h.label),"isOpen"in h&&r(3,c=h.isOpen)},[n,o,u,c,l]}class AT extends Dn{constructor(t){super(),zn(this,t,kT,vT,Ln,{labelWrapper:0,hex:1,label:2,isOpen:3})}}function ET(e){let t,r,n;const o=e[5].default,u=Ou(o,e,e[4],null);return{c(){t=yt("div"),u&&u.c(),this.h()},l(c){t=vt(c,"DIV",{class:!0,role:!0,"aria-label":!0});var l=Ct(t);u&&u.l(l),l.forEach(ge),this.h()},h(){ve(t,"class","wrapper svelte-160vdtq"),ve(t,"role",r=e[2]?"dialog":void 0),ve(t,"aria-label","color picker"),ni(t,"isOpen",e[1]),ni(t,"isPopup",e[2])},m(c,l){Lt(c,t,l),u&&u.m(t,null),e[6](t),n=!0},p(c,[l]){u&&u.p&&(!n||l&16)&&Fu(u,o,c,c[4],n?ju(o,c[4],l,null):Bu(c[4]),null),(!n||l&4&&r!==(r=c[2]?"dialog":void 0))&&ve(t,"role",r),(!n||l&2)&&ni(t,"isOpen",c[1]),(!n||l&4)&&ni(t,"isPopup",c[2])},i(c){n||(Xe(u,c),n=!0)},o(c){it(u,c),n=!1},d(c){c&&ge(t),u&&u.d(c),e[6](null)}}}function ST(e,t,r){let{$$slots:n={},$$scope:o}=t,{wrapper:u}=t,{isOpen:c}=t,{isPopup:l}=t,{toRight:h}=t;function v(w){Ft[w?"unshift":"push"](()=>{u=w,r(0,u)})}return e.$$set=w=>{"wrapper"in w&&r(0,u=w.wrapper),"isOpen"in w&&r(1,c=w.isOpen),"isPopup"in w&&r(2,l=w.isPopup),"toRight"in w&&r(3,h=w.toRight),"$$scope"in w&&r(4,o=w.$$scope)},[u,c,l,h,o,n,v]}let CT=class extends Dn{constructor(t){super(),zn(this,t,ST,ET,Ln,{wrapper:0,isOpen:1,isPopup:2,toRight:3})}};function z5(e,t,r){const n=e.slice();return n[9]=t[r].contrast,n[10]=t[r].hex,n[11]=t[r].placeholder,n[12]=t[r].reverse,n[13]=t[r].size,n}function N5(e){let t,r,n;var o=e[0].a11ySingleNotice;function u(c){return{props:{contrast:c[9],textColor:c[12]?c[10]:c[1],bgColor:c[12]?c[1]:c[10],placeholder:c[11],size:c[13]}}}return o&&(t=rs(o,u(e))),{c(){t&&Ut(t.$$.fragment),r=ao()},l(c){t&&Yt(t.$$.fragment,c),r=ao()},m(c,l){t&&qt(t,c,l),Lt(c,r,l),n=!0},p(c,l){const h={};if(l&16&&(h.contrast=c[9]),l&18&&(h.textColor=c[12]?c[10]:c[1]),l&18&&(h.bgColor=c[12]?c[1]:c[10]),l&16&&(h.placeholder=c[11]),l&16&&(h.size=c[13]),o!==(o=c[0].a11ySingleNotice)){if(t){ji();const v=t;it(v.$$.fragment,1,0,()=>{Vt(v,1)}),Ui()}o?(t=rs(o,u(c)),Ut(t.$$.fragment),Xe(t.$$.fragment,1),qt(t,r.parentNode,r)):t=null}else o&&t.$set(h)},i(c){n||(t&&Xe(t.$$.fragment,c),n=!0)},o(c){t&&it(t.$$.fragment,c),n=!1},d(c){c&&ge(r),t&&Vt(t,c)}}}function R5(e){let t;return{c(){t=yt("span"),this.h()},l(r){t=vt(r,"SPAN",{class:!0});var n=Ct(t);n.forEach(ge),this.h()},h(){ve(t,"class","svelte-1s4dluu")},m(r,n){Lt(r,t,n),t.innerHTML=e[2]},p(r,n){n&4&&(t.innerHTML=r[2])},d(r){r&&ge(t)}}}function IT(e){let t,r,n,o,u,c,l,h,v;var w=e[0].a11ySummary;function E(G){return{props:{a11yColors:G[4],hex:G[1]}}}w&&(n=rs(w,E(e)));let T=e[4],I=[];for(let G=0;G<T.length;G+=1)I[G]=N5(z5(e,T,G));const F=G=>it(I[G],1,1,()=>{I[G]=null});let U=e[2]&&R5(e);return{c(){t=yt("details"),r=yt("summary"),n&&Ut(n.$$.fragment),u=mr(),c=yt("div");for(let G=0;G<I.length;G+=1)I[G].c();l=mr(),U&&U.c(),this.h()},l(G){t=vt(G,"DETAILS",{class:!0});var H=Ct(t);r=vt(H,"SUMMARY",{tabindex:!0,class:!0});var X=Ct(r);n&&Yt(n.$$.fragment,X),X.forEach(ge),u=gr(H),c=vt(H,"DIV",{class:!0});var ee=Ct(c);for(let K=0;K<I.length;K+=1)I[K].l(ee);l=gr(ee),U&&U.l(ee),ee.forEach(ge),H.forEach(ge),this.h()},h(){ve(r,"tabindex",o=e[5]?-1:void 0),ve(r,"class","svelte-1s4dluu"),ve(c,"class","svelte-1s4dluu"),ve(t,"class",h="a11y-notice "+(e[5]?"not-closable":"")+" svelte-1s4dluu"),t.open=e[3]},m(G,H){Lt(G,t,H),lt(t,r),n&&qt(n,r,null),lt(t,u),lt(t,c);for(let X=0;X<I.length;X+=1)I[X].m(c,null);lt(c,l),U&&U.m(c,null),v=!0},p(G,[H]){const X={};if(H&16&&(X.a11yColors=G[4]),H&2&&(X.hex=G[1]),w!==(w=G[0].a11ySummary)){if(n){ji();const ee=n;it(ee.$$.fragment,1,0,()=>{Vt(ee,1)}),Ui()}w?(n=rs(w,E(G)),Ut(n.$$.fragment),Xe(n.$$.fragment,1),qt(n,r,null)):n=null}else w&&n.$set(X);if((!v||H&32&&o!==(o=G[5]?-1:void 0))&&ve(r,"tabindex",o),H&19){T=G[4];let ee;for(ee=0;ee<T.length;ee+=1){const K=z5(G,T,ee);I[ee]?(I[ee].p(K,H),Xe(I[ee],1)):(I[ee]=N5(K),I[ee].c(),Xe(I[ee],1),I[ee].m(c,l))}for(ji(),ee=T.length;ee<I.length;ee+=1)F(ee);Ui()}G[2]?U?U.p(G,H):(U=R5(G),U.c(),U.m(c,null)):U&&(U.d(1),U=null),(!v||H&32&&h!==(h="a11y-notice "+(G[5]?"not-closable":"")+" svelte-1s4dluu"))&&ve(t,"class",h),(!v||H&8)&&(t.open=G[3])},i(G){if(!v){n&&Xe(n.$$.fragment,G);for(let H=0;H<T.length;H+=1)Xe(I[H]);v=!0}},o(G){n&&it(n.$$.fragment,G),I=I.filter(Boolean);for(let H=0;H<I.length;H+=1)it(I[H]);v=!1},d(G){G&&ge(t),n&&Vt(n),Ol(I,G),U&&U.d()}}}function TT(e,t,r){let n,o,{components:u}=t,{a11yColors:c}=t,{hex:l}=t,{color:h}=t,{a11yGuidelines:v}=t,{isA11yOpen:w}=t,{isA11yClosable:E}=t;return e.$$set=T=>{"components"in T&&r(0,u=T.components),"a11yColors"in T&&r(6,c=T.a11yColors),"hex"in T&&r(1,l=T.hex),"color"in T&&r(7,h=T.color),"a11yGuidelines"in T&&r(2,v=T.a11yGuidelines),"isA11yOpen"in T&&r(3,w=T.isA11yOpen),"isA11yClosable"in T&&r(8,E=T.isA11yClosable)},e.$$.update=()=>{e.$$.dirty&264&&r(5,n=w&&!E),e.$$.dirty&192&&r(4,o=c.map(T=>({...T,contrast:h==null?void 0:h.contrast(T.hex)})))},[u,l,v,w,o,n,c,h,E]}class LT extends Dn{constructor(t){super(),zn(this,t,TT,IT,Ln,{components:0,a11yColors:6,hex:1,color:7,a11yGuidelines:2,isA11yOpen:3,isA11yClosable:8})}}function PT(e){let t,r,n=(e[2]||"Lorem Ipsum")+"",o,u,c,l,h,v,w=(e[3]>=10?e[3].toFixed(1):e[3])+"",E,T,I,F,U,G,H;return{c(){t=yt("div"),r=yt("p"),o=ei(n),c=mr(),l=yt("div"),h=yt("p"),v=ei("contrast: "),E=ei(w),T=mr(),I=yt("span"),F=ei("AA"),U=mr(),G=yt("span"),H=ei("AAA"),this.h()},l(X){t=vt(X,"DIV",{class:!0});var ee=Ct(t);r=vt(ee,"P",{class:!0,style:!0});var K=Ct(r);o=ti(K,n),K.forEach(ge),c=gr(ee),l=vt(ee,"DIV",{class:!0});var se=Ct(l);h=vt(se,"P",{class:!0});var ce=Ct(h);v=ti(ce,"contrast: "),E=ti(ce,w),ce.forEach(ge),T=gr(se),I=vt(se,"SPAN",{class:!0});var _e=Ct(I);F=ti(_e,"AA"),_e.forEach(ge),U=gr(se),G=vt(se,"SPAN",{class:!0});var pe=Ct(G);H=ti(pe,"AAA"),pe.forEach(ge),se.forEach(ge),ee.forEach(ge),this.h()},h(){ve(r,"class",u="lorem "+(e[4]==="large"&&"large")+" svelte-obnxge"),zo(r,"color",e[0]),zo(r,"background-color",e[1]),ve(h,"class","svelte-obnxge"),ve(I,"class","grade svelte-obnxge"),ni(I,"grade-ok",e[3]>(e[4]==="large"?3:4.5)),ve(G,"class","grade svelte-obnxge"),ni(G,"grade-ok",e[3]>(e[4]==="large"?4.5:7)),ve(l,"class","score svelte-obnxge"),ve(t,"class","a11y-single-notice svelte-obnxge")},m(X,ee){Lt(X,t,ee),lt(t,r),lt(r,o),lt(t,c),lt(t,l),lt(l,h),lt(h,v),lt(h,E),lt(l,T),lt(l,I),lt(I,F),lt(l,U),lt(l,G),lt(G,H)},p(X,[ee]){ee&4&&n!==(n=(X[2]||"Lorem Ipsum")+"")&&ta(o,n),ee&16&&u!==(u="lorem "+(X[4]==="large"&&"large")+" svelte-obnxge")&&ve(r,"class",u),ee&1&&zo(r,"color",X[0]),ee&2&&zo(r,"background-color",X[1]),ee&8&&w!==(w=(X[3]>=10?X[3].toFixed(1):X[3])+"")&&ta(E,w),ee&24&&ni(I,"grade-ok",X[3]>(X[4]==="large"?3:4.5)),ee&24&&ni(G,"grade-ok",X[3]>(X[4]==="large"?4.5:7))},i:Qn,o:Qn,d(X){X&&ge(t)}}}function MT(e,t,r){let{textColor:n}=t,{bgColor:o}=t,{placeholder:u=void 0}=t,{contrast:c=1}=t,{size:l=void 0}=t;return e.$$set=h=>{"textColor"in h&&r(0,n=h.textColor),"bgColor"in h&&r(1,o=h.bgColor),"placeholder"in h&&r(2,u=h.placeholder),"contrast"in h&&r(3,c=h.contrast),"size"in h&&r(4,l=h.size)},[n,o,u,c,l]}class DT extends Dn{constructor(t){super(),zn(this,t,MT,PT,Ln,{textColor:0,bgColor:1,placeholder:2,contrast:3,size:4})}}function zT(e){let t;return{c(){t=ei(e[0])},l(r){t=ti(r,e[0])},m(r,n){Lt(r,t,n)},p(r,[n]){n&1&&ta(t,r[0])},i:Qn,o:Qn,d(r){r&&ge(t)}}}function NT({contrast:e,size:t}){return e?t==="large"?e<3?2:e<4.5?1:0:e<4.5?2:e<7?1:0:1}function RT(e,t,r){let n,o,{a11yColors:u}=t,{hex:c}=t;return e.$$set=l=>{"a11yColors"in l&&r(1,u=l.a11yColors),"hex"in l&&r(2,c=l.hex)},e.$$.update=()=>{e.$$.dirty&2&&r(3,n=u.map(NT).reduce((l,h)=>l+h)),e.$$.dirty&8&&r(0,o=n?` ${n} contrast grade${n&&"s"} fail`:"Contrast grade information")},[o,u,c,n]}class OT extends Dn{constructor(t){super(),zn(this,t,RT,zT,Ln,{a11yColors:1,hex:2})}}function FT(e){let t;return{c(){t=yt("input"),this.h()},l(r){t=vt(r,"INPUT",{type:!0}),this.h()},h(){ve(t,"type","hidden"),t.value=e[2]},m(r,n){Lt(r,t,n)},p(r,n){n[0]&4&&(t.value=r[2])},i:Qn,o:Qn,d(r){r&&ge(t)}}}function BT(e){let t,r,n,o,u;function c(w){e[25](w)}function l(w){e[26](w)}var h=e[21]().input;function v(w){let E={hex:w[2],label:w[6]};return w[19]!==void 0&&(E.labelWrapper=w[19]),w[3]!==void 0&&(E.isOpen=w[3]),{props:E}}return h&&(t=rs(h,v(e)),Ft.push(()=>Jt(t,"labelWrapper",c)),Ft.push(()=>Jt(t,"isOpen",l))),{c(){t&&Ut(t.$$.fragment),o=ao()},l(w){t&&Yt(t.$$.fragment,w),o=ao()},m(w,E){t&&qt(t,w,E),Lt(w,o,E),u=!0},p(w,E){const T={};if(E[0]&4&&(T.hex=w[2]),E[0]&64&&(T.label=w[6]),!r&&E[0]&524288&&(r=!0,T.labelWrapper=w[19],er(()=>r=!1)),!n&&E[0]&8&&(n=!0,T.isOpen=w[3],er(()=>n=!1)),h!==(h=w[21]().input)){if(t){ji();const I=t;it(I.$$.fragment,1,0,()=>{Vt(I,1)}),Ui()}h?(t=rs(h,v(w)),Ft.push(()=>Jt(t,"labelWrapper",c)),Ft.push(()=>Jt(t,"isOpen",l)),Ut(t.$$.fragment),Xe(t.$$.fragment,1),qt(t,o.parentNode,o)):t=null}else h&&t.$set(T)},i(w){u||(t&&Xe(t.$$.fragment,w),u=!0)},o(w){t&&it(t.$$.fragment,w),u=!1},d(w){w&&ge(o),t&&Vt(t,w)}}}function O5(e){let t,r,n,o;function u(h){e[31](h)}function c(h){e[32](h)}let l={components:e[21](),hex:e[2],toRight:e[17]};return e[1].a!==void 0&&(l.a=e[1].a),e[3]!==void 0&&(l.isOpen=e[3]),t=new JI({props:l}),Ft.push(()=>Jt(t,"a",u)),Ft.push(()=>Jt(t,"isOpen",c)),{c(){Ut(t.$$.fragment)},l(h){Yt(t.$$.fragment,h)},m(h,v){qt(t,h,v),o=!0},p(h,v){const w={};v[0]&4&&(w.hex=h[2]),v[0]&131072&&(w.toRight=h[17]),!r&&v[0]&2&&(r=!0,w.a=h[1].a,er(()=>r=!1)),!n&&v[0]&8&&(n=!0,w.isOpen=h[3],er(()=>n=!1)),t.$set(w)},i(h){o||(Xe(t.$$.fragment,h),o=!0)},o(h){it(t.$$.fragment,h),o=!1},d(h){Vt(t,h)}}}function F5(e){let t,r,n,o,u,c;function l(T){e[33](T)}function h(T){e[34](T)}function v(T){e[35](T)}var w=e[21]().textInput;function E(T){let I={isAlpha:T[7],canChangeMode:T[10]};return T[2]!==void 0&&(I.hex=T[2]),T[0]!==void 0&&(I.rgb=T[0]),T[1]!==void 0&&(I.hsv=T[1]),{props:I}}return w&&(t=rs(w,E(e)),Ft.push(()=>Jt(t,"hex",l)),Ft.push(()=>Jt(t,"rgb",h)),Ft.push(()=>Jt(t,"hsv",v))),{c(){t&&Ut(t.$$.fragment),u=ao()},l(T){t&&Yt(t.$$.fragment,T),u=ao()},m(T,I){t&&qt(t,T,I),Lt(T,u,I),c=!0},p(T,I){const F={};if(I[0]&128&&(F.isAlpha=T[7]),I[0]&1024&&(F.canChangeMode=T[10]),!r&&I[0]&4&&(r=!0,F.hex=T[2],er(()=>r=!1)),!n&&I[0]&1&&(n=!0,F.rgb=T[0],er(()=>n=!1)),!o&&I[0]&2&&(o=!0,F.hsv=T[1],er(()=>o=!1)),w!==(w=T[21]().textInput)){if(t){ji();const U=t;it(U.$$.fragment,1,0,()=>{Vt(U,1)}),Ui()}w?(t=rs(w,E(T)),Ft.push(()=>Jt(t,"hex",l)),Ft.push(()=>Jt(t,"rgb",h)),Ft.push(()=>Jt(t,"hsv",v)),Ut(t.$$.fragment),Xe(t.$$.fragment,1),qt(t,u.parentNode,u)):t=null}else w&&t.$set(F)},i(T){c||(t&&Xe(t.$$.fragment,T),c=!0)},o(T){t&&it(t.$$.fragment,T),c=!1},d(T){T&&ge(u),t&&Vt(t,T)}}}function B5(e){let t,r,n;var o=e[21]().a11yNotice;function u(c){return{props:{components:c[21](),a11yColors:c[12],color:c[4],hex:c[2],a11yGuidelines:c[13],isA11yOpen:c[14],isA11yClosable:c[15]}}}return o&&(t=rs(o,u(e))),{c(){t&&Ut(t.$$.fragment),r=ao()},l(c){t&&Yt(t.$$.fragment,c),r=ao()},m(c,l){t&&qt(t,c,l),Lt(c,r,l),n=!0},p(c,l){const h={};if(l[0]&4096&&(h.a11yColors=c[12]),l[0]&16&&(h.color=c[4]),l[0]&4&&(h.hex=c[2]),l[0]&8192&&(h.a11yGuidelines=c[13]),l[0]&16384&&(h.isA11yOpen=c[14]),l[0]&32768&&(h.isA11yClosable=c[15]),o!==(o=c[21]().a11yNotice)){if(t){ji();const v=t;it(v.$$.fragment,1,0,()=>{Vt(v,1)}),Ui()}o?(t=rs(o,u(c)),Ut(t.$$.fragment),Xe(t.$$.fragment,1),qt(t,r.parentNode,r)):t=null}else o&&t.$set(h)},i(c){n||(t&&Xe(t.$$.fragment,c),n=!0)},o(c){t&&it(t.$$.fragment,c),n=!1},d(c){c&&ge(r),t&&Vt(t,c)}}}function jT(e){let t,r,n,o,u,c,l,h,v,w,E,T;function I(ce){e[27](ce)}function F(ce){e[28](ce)}function U(ce){e[29](ce)}let G={components:e[21](),h:e[1].h,toRight:e[17],isDark:e[5]};e[1].s!==void 0&&(G.s=e[1].s),e[1].v!==void 0&&(G.v=e[1].v),e[3]!==void 0&&(G.isOpen=e[3]),t=new VI({props:G}),Ft.push(()=>Jt(t,"s",I)),Ft.push(()=>Jt(t,"v",F)),Ft.push(()=>Jt(t,"isOpen",U));function H(ce){e[30](ce)}let X={components:e[21](),toRight:e[17]};e[1].h!==void 0&&(X.h=e[1].h),c=new WI({props:X}),Ft.push(()=>Jt(c,"h",H));let ee=e[7]&&O5(e),K=e[9]&&F5(e),se=e[11]&&B5(e);return{c(){Ut(t.$$.fragment),u=mr(),Ut(c.$$.fragment),h=mr(),ee&&ee.c(),v=mr(),K&&K.c(),w=mr(),se&&se.c(),E=ao()},l(ce){Yt(t.$$.fragment,ce),u=gr(ce),Yt(c.$$.fragment,ce),h=gr(ce),ee&&ee.l(ce),v=gr(ce),K&&K.l(ce),w=gr(ce),se&&se.l(ce),E=ao()},m(ce,_e){qt(t,ce,_e),Lt(ce,u,_e),qt(c,ce,_e),Lt(ce,h,_e),ee&&ee.m(ce,_e),Lt(ce,v,_e),K&&K.m(ce,_e),Lt(ce,w,_e),se&&se.m(ce,_e),Lt(ce,E,_e),T=!0},p(ce,_e){const pe={};_e[0]&2&&(pe.h=ce[1].h),_e[0]&131072&&(pe.toRight=ce[17]),_e[0]&32&&(pe.isDark=ce[5]),!r&&_e[0]&2&&(r=!0,pe.s=ce[1].s,er(()=>r=!1)),!n&&_e[0]&2&&(n=!0,pe.v=ce[1].v,er(()=>n=!1)),!o&&_e[0]&8&&(o=!0,pe.isOpen=ce[3],er(()=>o=!1)),t.$set(pe);const Ge={};_e[0]&131072&&(Ge.toRight=ce[17]),!l&&_e[0]&2&&(l=!0,Ge.h=ce[1].h,er(()=>l=!1)),c.$set(Ge),ce[7]?ee?(ee.p(ce,_e),_e[0]&128&&Xe(ee,1)):(ee=O5(ce),ee.c(),Xe(ee,1),ee.m(v.parentNode,v)):ee&&(ji(),it(ee,1,1,()=>{ee=null}),Ui()),ce[9]?K?(K.p(ce,_e),_e[0]&512&&Xe(K,1)):(K=F5(ce),K.c(),Xe(K,1),K.m(w.parentNode,w)):K&&(ji(),it(K,1,1,()=>{K=null}),Ui()),ce[11]?se?(se.p(ce,_e),_e[0]&2048&&Xe(se,1)):(se=B5(ce),se.c(),Xe(se,1),se.m(E.parentNode,E)):se&&(ji(),it(se,1,1,()=>{se=null}),Ui())},i(ce){T||(Xe(t.$$.fragment,ce),Xe(c.$$.fragment,ce),Xe(ee),Xe(K),Xe(se),T=!0)},o(ce){it(t.$$.fragment,ce),it(c.$$.fragment,ce),it(ee),it(K),it(se),T=!1},d(ce){Vt(t,ce),ce&&ge(u),Vt(c,ce),ce&&ge(h),ee&&ee.d(ce),ce&&ge(v),K&&K.d(ce),ce&&ge(w),se&&se.d(ce),ce&&ge(E)}}}function UT(e){let t,r,n,o,u,c,l,h,v,w,E;t=new hT({});const T=[BT,FT],I=[];function F(X,ee){return X[8]?0:1}o=F(e),u=I[o]=T[o](e);function U(X){e[36](X)}var G=e[21]().wrapper;function H(X){let ee={isOpen:X[3],isPopup:X[16],toRight:X[17],$$slots:{default:[jT]},$$scope:{ctx:X}};return X[20]!==void 0&&(ee.wrapper=X[20]),{props:ee}}return G&&(l=rs(G,H(e)),Ft.push(()=>Jt(l,"wrapper",U))),{c(){Ut(t.$$.fragment),r=mr(),n=yt("span"),u.c(),c=mr(),l&&Ut(l.$$.fragment),this.h()},l(X){Yt(t.$$.fragment,X),r=gr(X),n=vt(X,"SPAN",{class:!0});var ee=Ct(n);u.l(ee),c=gr(ee),l&&Yt(l.$$.fragment,ee),ee.forEach(ge),this.h()},h(){ve(n,"class","color-picker svelte-7ntk55")},m(X,ee){qt(t,X,ee),Lt(X,r,ee),Lt(X,n,ee),I[o].m(n,null),lt(n,c),l&&qt(l,n,null),e[37](n),v=!0,w||(E=[rn(window,"mousedown",e[22]),rn(window,"keyup",e[23])],w=!0)},p(X,ee){let K=o;o=F(X),o===K?I[o].p(X,ee):(ji(),it(I[K],1,1,()=>{I[K]=null}),Ui(),u=I[o],u?u.p(X,ee):(u=I[o]=T[o](X),u.c()),Xe(u,1),u.m(n,c));const se={};if(ee[0]&8&&(se.isOpen=X[3]),ee[0]&65536&&(se.isPopup=X[16]),ee[0]&131072&&(se.toRight=X[17]),ee[0]&196287|ee[1]&8192&&(se.$$scope={dirty:ee,ctx:X}),!h&&ee[0]&1048576&&(h=!0,se.wrapper=X[20],er(()=>h=!1)),G!==(G=X[21]().wrapper)){if(l){ji();const ce=l;it(ce.$$.fragment,1,0,()=>{Vt(ce,1)}),Ui()}G?(l=rs(G,H(X)),Ft.push(()=>Jt(l,"wrapper",U)),Ut(l.$$.fragment),Xe(l.$$.fragment,1),qt(l,n,null)):l=null}else G&&l.$set(se)},i(X){v||(Xe(t.$$.fragment,X),Xe(u),l&&Xe(l.$$.fragment,X),v=!0)},o(X){it(t.$$.fragment,X),it(u),l&&it(l.$$.fragment,X),v=!1},d(X){Vt(t,X),X&&ge(r),X&&ge(n),I[o].d(),l&&Vt(l),e[37](null),w=!1,oa(E)}}}function qT(e,t,r){FI([BI]);let{components:n={}}=t;const o=mp();let{label:u="Choose a color"}=t,{isAlpha:c=!0}=t,{isInput:l=!0}=t,{isTextInput:h=!0}=t,{canChangeMode:v=!0}=t,{isA11y:w=!1}=t,{a11yColors:E=[{hex:"#ffffff"}]}=t,{a11yGuidelines:T='<p style="margin: 0; font-size: 12px;">Learn more at <a href="https://webaim.org/articles/contrast/" target="_blank">WebAIM contrast guide</a></p>'}=t,{isA11yOpen:I=!1}=t,{isA11yClosable:F=!0}=t,{isPopup:U=l}=t,{isOpen:G=!l}=t,{toRight:H=!1}=t,{rgb:X={r:255,g:0,b:0,a:1}}=t,{hsv:ee={h:0,s:100,v:100,a:1}}=t,{hex:K="#ff0000"}=t,{color:se=void 0}=t,{isDark:ce=!1}=t,_e={r:255,g:0,b:0,a:1},pe={h:0,s:100,v:100,a:1},Ge="#ff0000",We;const Ae={sliderIndicator:M5,pickerIndicator:uT,alphaIndicator:M5,pickerWrapper:mT,sliderWrapper:D5,alphaWrapper:D5,textInput:iT,a11yNotice:LT,a11ySingleNotice:DT,a11ySummary:OT,input:AT,wrapper:CT};function Ie(){return{...Ae,...n}}let Fe,ot;function _t({target:Gt}){l&&(Fe.contains(Gt)||Fe.isSameNode(Gt)?r(3,G=!G):G&&!ot.contains(Gt)&&r(3,G=!1))}function ht(Gt){Gt.key==="Tab"&&r(3,G=We==null?void 0:We.contains(document.activeElement))}function $e(){ee.h===pe.h&&ee.s===pe.s&&ee.v===pe.v&&ee.a===pe.a&&X.r===_e.r&&X.g===_e.g&&X.b===_e.b&&X.a===_e.a&&K===Ge||(ee.a===void 0&&r(1,ee.a=1,ee),pe.a===void 0&&(pe.a=1),X.a===void 0&&r(0,X.a=1,X),_e.a===void 0&&(_e.a=1),(K==null?void 0:K.substring(7))==="ff"&&r(2,K=K.substring(0,7)),(K==null?void 0:K.substring(7))==="ff"&&r(2,K=K.substring(0,7)),ee.h!==pe.h||ee.s!==pe.s||ee.v!==pe.v||ee.a!==pe.a?(r(4,se=Mu(ee)),r(0,X=se.toRgb()),r(2,K=se.toHex())):X.r!==_e.r||X.g!==_e.g||X.b!==_e.b||X.a!==_e.a?(r(4,se=Mu(X)),r(2,K=se.toHex()),r(1,ee=se.toHsv())):K!==Ge&&(r(4,se=Mu(K)),r(0,X=se.toRgb()),r(1,ee=se.toHsv())),se&&r(5,ce=se.isDark()),pe=Object.assign({},ee),_e=Object.assign({},X),Ge=K,o("input",{color:se,hsv:ee,rgb:X,hex:K}))}function ut(Gt){Fe=Gt,r(19,Fe)}function bt(Gt){G=Gt,r(3,G)}function Ze(Gt){e.$$.not_equal(ee.s,Gt)&&(ee.s=Gt,r(1,ee))}function He(Gt){e.$$.not_equal(ee.v,Gt)&&(ee.v=Gt,r(1,ee))}function xe(Gt){G=Gt,r(3,G)}function Ne(Gt){e.$$.not_equal(ee.h,Gt)&&(ee.h=Gt,r(1,ee))}function Pe(Gt){e.$$.not_equal(ee.a,Gt)&&(ee.a=Gt,r(1,ee))}function ft(Gt){G=Gt,r(3,G)}function At(Gt){K=Gt,r(2,K)}function Pt(Gt){X=Gt,r(0,X)}function Kt(Gt){ee=Gt,r(1,ee)}function $t(Gt){ot=Gt,r(20,ot)}function br(Gt){Ft[Gt?"unshift":"push"](()=>{We=Gt,r(18,We)})}return e.$$set=Gt=>{"components"in Gt&&r(24,n=Gt.components),"label"in Gt&&r(6,u=Gt.label),"isAlpha"in Gt&&r(7,c=Gt.isAlpha),"isInput"in Gt&&r(8,l=Gt.isInput),"isTextInput"in Gt&&r(9,h=Gt.isTextInput),"canChangeMode"in Gt&&r(10,v=Gt.canChangeMode),"isA11y"in Gt&&r(11,w=Gt.isA11y),"a11yColors"in Gt&&r(12,E=Gt.a11yColors),"a11yGuidelines"in Gt&&r(13,T=Gt.a11yGuidelines),"isA11yOpen"in Gt&&r(14,I=Gt.isA11yOpen),"isA11yClosable"in Gt&&r(15,F=Gt.isA11yClosable),"isPopup"in Gt&&r(16,U=Gt.isPopup),"isOpen"in Gt&&r(3,G=Gt.isOpen),"toRight"in Gt&&r(17,H=Gt.toRight),"rgb"in Gt&&r(0,X=Gt.rgb),"hsv"in Gt&&r(1,ee=Gt.hsv),"hex"in Gt&&r(2,K=Gt.hex),"color"in Gt&&r(4,se=Gt.color),"isDark"in Gt&&r(5,ce=Gt.isDark)},e.$$.update=()=>{e.$$.dirty[0]&7&&(ee||X||K)&&$e()},[X,ee,K,G,se,ce,u,c,l,h,v,w,E,T,I,F,U,H,We,Fe,ot,Ie,_t,ht,n,ut,bt,Ze,He,xe,Ne,Pe,ft,At,Pt,Kt,$t,br]}class VT extends Dn{constructor(t){super(),zn(this,t,qT,UT,Ln,{components:24,label:6,isAlpha:7,isInput:8,isTextInput:9,canChangeMode:10,isA11y:11,a11yColors:12,a11yGuidelines:13,isA11yOpen:14,isA11yClosable:15,isPopup:16,isOpen:3,toRight:17,rgb:0,hsv:1,hex:2,color:4,isDark:5},null,[-1,-1])}}function $T(e){let t,r;return{c(){t=yt("div"),this.h()},l(n){t=vt(n,"DIV",{class:!0,style:!0}),Ct(t).forEach(ge),this.h()},h(){ve(t,"class","picker-indicator svelte-1nw247x"),ve(t,"style",r=`left: calc(${e[0].x/260*246}% + 2px); top: calc(${e[0].y/160*149}% + 2px); box-shadow: 0 0 4px ${e[1]?"white":"black"};`)},m(n,o){Lt(n,t,o)},p(n,[o]){o&3&&r!==(r=`left: calc(${n[0].x/260*246}% + 2px); top: calc(${n[0].y/160*149}% + 2px); box-shadow: 0 0 4px ${n[1]?"white":"black"};`)&&ve(t,"style",r)},i:Qn,o:Qn,d(n){n&&ge(t)}}}function GT(e,t,r){let{pos:n}=t,{hex:o}=t,{isDark:u}=t;return e.$$set=c=>{"pos"in c&&r(0,n=c.pos),"hex"in c&&r(2,o=c.hex),"isDark"in c&&r(1,u=c.isDark)},[n,u,o]}class HT extends Dn{constructor(t){super(),zn(this,t,GT,$T,Ln,{pos:0,hex:2,isDark:1})}}function WT(e){let t,r;const n=e[3].default,o=Ou(n,e,e[2],null);return{c(){t=yt("div"),o&&o.c(),this.h()},l(u){t=vt(u,"DIV",{class:!0});var c=Ct(t);o&&o.l(c),c.forEach(ge),this.h()},h(){ve(t,"class","picker-wrapper svelte-1vd0r8g"),ni(t,"focused",e[0])},m(u,c){Lt(u,t,c),o&&o.m(t,null),r=!0},p(u,[c]){o&&o.p&&(!r||c&4)&&Fu(o,n,u,u[2],r?ju(n,u[2],c,null):Bu(u[2]),null),(!r||c&1)&&ni(t,"focused",u[0])},i(u){r||(Xe(o,u),r=!0)},o(u){it(o,u),r=!1},d(u){u&&ge(t),o&&o.d(u)}}}function ZT(e,t,r){let{$$slots:n={},$$scope:o}=t,{focused:u}=t,{toRight:c}=t;return e.$$set=l=>{"focused"in l&&r(0,u=l.focused),"toRight"in l&&r(1,c=l.toRight),"$$scope"in l&&r(2,o=l.$$scope)},[u,c,o,n]}class XT extends Dn{constructor(t){super(),zn(this,t,ZT,WT,Ln,{focused:0,toRight:1})}}function YT(e){let t,r;return{c(){t=yt("div"),this.h()},l(n){t=vt(n,"DIV",{class:!0,style:!0}),Ct(t).forEach(ge),this.h()},h(){ve(t,"class","slider-indicator svelte-hspaza"),ve(t,"style",r=`left: calc(${e[0]/200*192}% + 2px);`)},m(n,o){Lt(n,t,o)},p(n,[o]){o&1&&r!==(r=`left: calc(${n[0]/200*192}% + 2px);`)&&ve(t,"style",r)},i:Qn,o:Qn,d(n){n&&ge(t)}}}function JT(e,t,r){let{pos:n}=t,{toRight:o}=t;return e.$$set=u=>{"pos"in u&&r(0,n=u.pos),"toRight"in u&&r(1,o=u.toRight)},[n,o]}class j5 extends Dn{constructor(t){super(),zn(this,t,JT,YT,Ln,{pos:0,toRight:1})}}function KT(e){let t,r;const n=e[3].default,o=Ou(n,e,e[2],null);return{c(){t=yt("div"),o&&o.c(),this.h()},l(u){t=vt(u,"DIV",{class:!0});var c=Ct(t);o&&o.l(c),c.forEach(ge),this.h()},h(){ve(t,"class","slider-wrapper svelte-1ujhhhp"),ni(t,"focused",e[0])},m(u,c){Lt(u,t,c),o&&o.m(t,null),r=!0},p(u,[c]){o&&o.p&&(!r||c&4)&&Fu(o,n,u,u[2],r?ju(n,u[2],c,null):Bu(u[2]),null),(!r||c&1)&&ni(t,"focused",u[0])},i(u){r||(Xe(o,u),r=!0)},o(u){it(o,u),r=!1},d(u){u&&ge(t),o&&o.d(u)}}}function QT(e,t,r){let{$$slots:n={},$$scope:o}=t,{focused:u}=t,{toRight:c}=t;return e.$$set=l=>{"focused"in l&&r(0,u=l.focused),"toRight"in l&&r(1,c=l.toRight),"$$scope"in l&&r(2,o=l.$$scope)},[u,c,o,n]}class U5 extends Dn{constructor(t){super(),zn(this,t,QT,KT,Ln,{focused:0,toRight:1})}}function eL(e){let t,r,n;const o=e[5].default,u=Ou(o,e,e[4],null);return{c(){t=yt("div"),u&&u.c(),this.h()},l(c){t=vt(c,"DIV",{class:!0,role:!0,"aria-label":!0});var l=Ct(t);u&&u.l(l),l.forEach(ge),this.h()},h(){ve(t,"class","wrapper svelte-17dre7j"),ve(t,"role",r=e[2]?"dialog":void 0),ve(t,"aria-label","color picker"),ni(t,"isOpen",e[1]),ni(t,"isPopup",e[2])},m(c,l){Lt(c,t,l),u&&u.m(t,null),e[6](t),n=!0},p(c,[l]){u&&u.p&&(!n||l&16)&&Fu(u,o,c,c[4],n?ju(o,c[4],l,null):Bu(c[4]),null),(!n||l&4&&r!==(r=c[2]?"dialog":void 0))&&ve(t,"role",r),(!n||l&2)&&ni(t,"isOpen",c[1]),(!n||l&4)&&ni(t,"isPopup",c[2])},i(c){n||(Xe(u,c),n=!0)},o(c){it(u,c),n=!1},d(c){c&&ge(t),u&&u.d(c),e[6](null)}}}function tL(e,t,r){let{$$slots:n={},$$scope:o}=t,{wrapper:u}=t,{isOpen:c}=t,{isPopup:l}=t,{toRight:h}=t;function v(w){Ft[w?"unshift":"push"](()=>{u=w,r(0,u)})}return e.$$set=w=>{"wrapper"in w&&r(0,u=w.wrapper),"isOpen"in w&&r(1,c=w.isOpen),"isPopup"in w&&r(2,l=w.isPopup),"toRight"in w&&r(3,h=w.toRight),"$$scope"in w&&r(4,o=w.$$scope)},[u,c,l,h,o,n,v]}class rL extends Dn{constructor(t){super(),zn(this,t,tL,eL,Ln,{wrapper:0,isOpen:1,isPopup:2,toRight:3})}}const nL={sliderIndicator:j5,pickerIndicator:HT,alphaIndicator:j5,pickerWrapper:XT,sliderWrapper:U5,alphaWrapper:U5,wrapper:rL};var nc="top",Xc="bottom",Yc="right",ic="left",yv="auto",Ed=[nc,Xc,Yc,ic],ap="start",ud="end",iL="clippingParents",q6="viewport",Rp="popper",oL="reference",q5=Ed.reduce(function(e,t){return e.concat([t+"-"+ap,t+"-"+ud])},[]),V6=[].concat(Ed,[yv]).reduce(function(e,t){return e.concat([t,t+"-"+ap,t+"-"+ud])},[]),aL="beforeRead",sL="read",lL="afterRead",uL="beforeMain",cL="main",fL="afterMain",hL="beforeWrite",pL="write",dL="afterWrite",mL=[aL,sL,lL,uL,cL,fL,hL,pL,dL];function V0(e){return e?(e.nodeName||"").toLowerCase():null}function Kc(e){if(e==null)return window;if(e.toString()!=="[object Window]"){var t=e.ownerDocument;return t&&t.defaultView||window}return e}function uh(e){var t=Kc(e).Element;return e instanceof t||e instanceof Element}function Zc(e){var t=Kc(e).HTMLElement;return e instanceof t||e instanceof HTMLElement}function vv(e){if(typeof ShadowRoot>"u")return!1;var t=Kc(e).ShadowRoot;return e instanceof t||e instanceof ShadowRoot}function gL(e){var t=e.state;Object.keys(t.elements).forEach(function(r){var n=t.styles[r]||{},o=t.attributes[r]||{},u=t.elements[r];!Zc(u)||!V0(u)||(Object.assign(u.style,n),Object.keys(o).forEach(function(c){var l=o[c];l===!1?u.removeAttribute(c):u.setAttribute(c,l===!0?"":l)}))})}function yL(e){var t=e.state,r={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(t.elements.popper.style,r.popper),t.styles=r,t.elements.arrow&&Object.assign(t.elements.arrow.style,r.arrow),function(){Object.keys(t.elements).forEach(function(n){var o=t.elements[n],u=t.attributes[n]||{},c=Object.keys(t.styles.hasOwnProperty(n)?t.styles[n]:r[n]),l=c.reduce(function(h,v){return h[v]="",h},{});!Zc(o)||!V0(o)||(Object.assign(o.style,l),Object.keys(u).forEach(function(h){o.removeAttribute(h)}))})}}const $6={name:"applyStyles",enabled:!0,phase:"write",fn:gL,effect:yL,requires:["computeStyles"]};function B0(e){return e.split("-")[0]}var oh=Math.max,q1=Math.min,sp=Math.round;function ty(){var e=navigator.userAgentData;return e!=null&&e.brands?e.brands.map(function(t){return t.brand+"/"+t.version}).join(" "):navigator.userAgent}function G6(){return!/^((?!chrome|android).)*safari/i.test(ty())}function lp(e,t,r){t===void 0&&(t=!1),r===void 0&&(r=!1);var n=e.getBoundingClientRect(),o=1,u=1;t&&Zc(e)&&(o=e.offsetWidth>0&&sp(n.width)/e.offsetWidth||1,u=e.offsetHeight>0&&sp(n.height)/e.offsetHeight||1);var c=uh(e)?Kc(e):window,l=c.visualViewport,h=!G6()&&r,v=(n.left+(h&&l?l.offsetLeft:0))/o,w=(n.top+(h&&l?l.offsetTop:0))/u,E=n.width/o,T=n.height/u;return{width:E,height:T,top:w,right:v+E,bottom:w+T,left:v,x:v,y:w}}function _v(e){var t=lp(e),r=e.offsetWidth,n=e.offsetHeight;return Math.abs(t.width-r)<=1&&(r=t.width),Math.abs(t.height-n)<=1&&(n=t.height),{x:e.offsetLeft,y:e.offsetTop,width:r,height:n}}function H6(e,t){var r=t.getRootNode&&t.getRootNode();if(e.contains(t))return!0;if(r&&vv(r)){var n=t;do{if(n&&e.isSameNode(n))return!0;n=n.parentNode||n.host}while(n)}return!1}function cf(e){return Kc(e).getComputedStyle(e)}function vL(e){return["table","td","th"].indexOf(V0(e))>=0}function jf(e){return((uh(e)?e.ownerDocument:e.document)||window.document).documentElement}function m2(e){return V0(e)==="html"?e:e.assignedSlot||e.parentNode||(vv(e)?e.host:null)||jf(e)}function V5(e){return!Zc(e)||cf(e).position==="fixed"?null:e.offsetParent}function _L(e){var t=/firefox/i.test(ty()),r=/Trident/i.test(ty());if(r&&Zc(e)){var n=cf(e);if(n.position==="fixed")return null}var o=m2(e);for(vv(o)&&(o=o.host);Zc(o)&&["html","body"].indexOf(V0(o))<0;){var u=cf(o);if(u.transform!=="none"||u.perspective!=="none"||u.contain==="paint"||["transform","perspective"].indexOf(u.willChange)!==-1||t&&u.willChange==="filter"||t&&u.filter&&u.filter!=="none")return o;o=o.parentNode}return null}function Sd(e){for(var t=Kc(e),r=V5(e);r&&vL(r)&&cf(r).position==="static";)r=V5(r);return r&&(V0(r)==="html"||V0(r)==="body"&&cf(r).position==="static")?t:r||_L(e)||t}function bv(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}function Xp(e,t,r){return oh(e,q1(t,r))}function bL(e,t,r){var n=Xp(e,t,r);return n>r?r:n}function W6(){return{top:0,right:0,bottom:0,left:0}}function Z6(e){return Object.assign({},W6(),e)}function X6(e,t){return t.reduce(function(r,n){return r[n]=e,r},{})}var wL=function(t,r){return t=typeof t=="function"?t(Object.assign({},r.rects,{placement:r.placement})):t,Z6(typeof t!="number"?t:X6(t,Ed))};function xL(e){var t,r=e.state,n=e.name,o=e.options,u=r.elements.arrow,c=r.modifiersData.popperOffsets,l=B0(r.placement),h=bv(l),v=[ic,Yc].indexOf(l)>=0,w=v?"height":"width";if(!(!u||!c)){var E=wL(o.padding,r),T=_v(u),I=h==="y"?nc:ic,F=h==="y"?Xc:Yc,U=r.rects.reference[w]+r.rects.reference[h]-c[h]-r.rects.popper[w],G=c[h]-r.rects.reference[h],H=Sd(u),X=H?h==="y"?H.clientHeight||0:H.clientWidth||0:0,ee=U/2-G/2,K=E[I],se=X-T[w]-E[F],ce=X/2-T[w]/2+ee,_e=Xp(K,ce,se),pe=h;r.modifiersData[n]=(t={},t[pe]=_e,t.centerOffset=_e-ce,t)}}function kL(e){var t=e.state,r=e.options,n=r.element,o=n===void 0?"[data-popper-arrow]":n;o!=null&&(typeof o=="string"&&(o=t.elements.popper.querySelector(o),!o)||H6(t.elements.popper,o)&&(t.elements.arrow=o))}const AL={name:"arrow",enabled:!0,phase:"main",fn:xL,effect:kL,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function up(e){return e.split("-")[1]}var EL={top:"auto",right:"auto",bottom:"auto",left:"auto"};function SL(e){var t=e.x,r=e.y,n=window,o=n.devicePixelRatio||1;return{x:sp(t*o)/o||0,y:sp(r*o)/o||0}}function $5(e){var t,r=e.popper,n=e.popperRect,o=e.placement,u=e.variation,c=e.offsets,l=e.position,h=e.gpuAcceleration,v=e.adaptive,w=e.roundOffsets,E=e.isFixed,T=c.x,I=T===void 0?0:T,F=c.y,U=F===void 0?0:F,G=typeof w=="function"?w({x:I,y:U}):{x:I,y:U};I=G.x,U=G.y;var H=c.hasOwnProperty("x"),X=c.hasOwnProperty("y"),ee=ic,K=nc,se=window;if(v){var ce=Sd(r),_e="clientHeight",pe="clientWidth";if(ce===Kc(r)&&(ce=jf(r),cf(ce).position!=="static"&&l==="absolute"&&(_e="scrollHeight",pe="scrollWidth")),ce=ce,o===nc||(o===ic||o===Yc)&&u===ud){K=Xc;var Ge=E&&ce===se&&se.visualViewport?se.visualViewport.height:ce[_e];U-=Ge-n.height,U*=h?1:-1}if(o===ic||(o===nc||o===Xc)&&u===ud){ee=Yc;var We=E&&ce===se&&se.visualViewport?se.visualViewport.width:ce[pe];I-=We-n.width,I*=h?1:-1}}var Ae=Object.assign({position:l},v&&EL),Ie=w===!0?SL({x:I,y:U}):{x:I,y:U};if(I=Ie.x,U=Ie.y,h){var Fe;return Object.assign({},Ae,(Fe={},Fe[K]=X?"0":"",Fe[ee]=H?"0":"",Fe.transform=(se.devicePixelRatio||1)<=1?"translate("+I+"px, "+U+"px)":"translate3d("+I+"px, "+U+"px, 0)",Fe))}return Object.assign({},Ae,(t={},t[K]=X?U+"px":"",t[ee]=H?I+"px":"",t.transform="",t))}function CL(e){var t=e.state,r=e.options,n=r.gpuAcceleration,o=n===void 0?!0:n,u=r.adaptive,c=u===void 0?!0:u,l=r.roundOffsets,h=l===void 0?!0:l,v={placement:B0(t.placement),variation:up(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:o,isFixed:t.options.strategy==="fixed"};t.modifiersData.popperOffsets!=null&&(t.styles.popper=Object.assign({},t.styles.popper,$5(Object.assign({},v,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:c,roundOffsets:h})))),t.modifiersData.arrow!=null&&(t.styles.arrow=Object.assign({},t.styles.arrow,$5(Object.assign({},v,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:h})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})}const IL={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:CL,data:{}};var u1={passive:!0};function TL(e){var t=e.state,r=e.instance,n=e.options,o=n.scroll,u=o===void 0?!0:o,c=n.resize,l=c===void 0?!0:c,h=Kc(t.elements.popper),v=[].concat(t.scrollParents.reference,t.scrollParents.popper);return u&&v.forEach(function(w){w.addEventListener("scroll",r.update,u1)}),l&&h.addEventListener("resize",r.update,u1),function(){u&&v.forEach(function(w){w.removeEventListener("scroll",r.update,u1)}),l&&h.removeEventListener("resize",r.update,u1)}}const LL={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:TL,data:{}};var PL={left:"right",right:"left",bottom:"top",top:"bottom"};function S1(e){return e.replace(/left|right|bottom|top/g,function(t){return PL[t]})}var ML={start:"end",end:"start"};function G5(e){return e.replace(/start|end/g,function(t){return ML[t]})}function wv(e){var t=Kc(e),r=t.pageXOffset,n=t.pageYOffset;return{scrollLeft:r,scrollTop:n}}function xv(e){return lp(jf(e)).left+wv(e).scrollLeft}function DL(e,t){var r=Kc(e),n=jf(e),o=r.visualViewport,u=n.clientWidth,c=n.clientHeight,l=0,h=0;if(o){u=o.width,c=o.height;var v=G6();(v||!v&&t==="fixed")&&(l=o.offsetLeft,h=o.offsetTop)}return{width:u,height:c,x:l+xv(e),y:h}}function zL(e){var t,r=jf(e),n=wv(e),o=(t=e.ownerDocument)==null?void 0:t.body,u=oh(r.scrollWidth,r.clientWidth,o?o.scrollWidth:0,o?o.clientWidth:0),c=oh(r.scrollHeight,r.clientHeight,o?o.scrollHeight:0,o?o.clientHeight:0),l=-n.scrollLeft+xv(e),h=-n.scrollTop;return cf(o||r).direction==="rtl"&&(l+=oh(r.clientWidth,o?o.clientWidth:0)-u),{width:u,height:c,x:l,y:h}}function kv(e){var t=cf(e),r=t.overflow,n=t.overflowX,o=t.overflowY;return/auto|scroll|overlay|hidden/.test(r+o+n)}function Y6(e){return["html","body","#document"].indexOf(V0(e))>=0?e.ownerDocument.body:Zc(e)&&kv(e)?e:Y6(m2(e))}function Yp(e,t){var r;t===void 0&&(t=[]);var n=Y6(e),o=n===((r=e.ownerDocument)==null?void 0:r.body),u=Kc(n),c=o?[u].concat(u.visualViewport||[],kv(n)?n:[]):n,l=t.concat(c);return o?l:l.concat(Yp(m2(c)))}function ry(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function NL(e,t){var r=lp(e,!1,t==="fixed");return r.top=r.top+e.clientTop,r.left=r.left+e.clientLeft,r.bottom=r.top+e.clientHeight,r.right=r.left+e.clientWidth,r.width=e.clientWidth,r.height=e.clientHeight,r.x=r.left,r.y=r.top,r}function H5(e,t,r){return t===q6?ry(DL(e,r)):uh(t)?NL(t,r):ry(zL(jf(e)))}function RL(e){var t=Yp(m2(e)),r=["absolute","fixed"].indexOf(cf(e).position)>=0,n=r&&Zc(e)?Sd(e):e;return uh(n)?t.filter(function(o){return uh(o)&&H6(o,n)&&V0(o)!=="body"}):[]}function OL(e,t,r,n){var o=t==="clippingParents"?RL(e):[].concat(t),u=[].concat(o,[r]),c=u[0],l=u.reduce(function(h,v){var w=H5(e,v,n);return h.top=oh(w.top,h.top),h.right=q1(w.right,h.right),h.bottom=q1(w.bottom,h.bottom),h.left=oh(w.left,h.left),h},H5(e,c,n));return l.width=l.right-l.left,l.height=l.bottom-l.top,l.x=l.left,l.y=l.top,l}function J6(e){var t=e.reference,r=e.element,n=e.placement,o=n?B0(n):null,u=n?up(n):null,c=t.x+t.width/2-r.width/2,l=t.y+t.height/2-r.height/2,h;switch(o){case nc:h={x:c,y:t.y-r.height};break;case Xc:h={x:c,y:t.y+t.height};break;case Yc:h={x:t.x+t.width,y:l};break;case ic:h={x:t.x-r.width,y:l};break;default:h={x:t.x,y:t.y}}var v=o?bv(o):null;if(v!=null){var w=v==="y"?"height":"width";switch(u){case ap:h[v]=h[v]-(t[w]/2-r[w]/2);break;case ud:h[v]=h[v]+(t[w]/2-r[w]/2);break}}return h}function cd(e,t){t===void 0&&(t={});var r=t,n=r.placement,o=n===void 0?e.placement:n,u=r.strategy,c=u===void 0?e.strategy:u,l=r.boundary,h=l===void 0?iL:l,v=r.rootBoundary,w=v===void 0?q6:v,E=r.elementContext,T=E===void 0?Rp:E,I=r.altBoundary,F=I===void 0?!1:I,U=r.padding,G=U===void 0?0:U,H=Z6(typeof G!="number"?G:X6(G,Ed)),X=T===Rp?oL:Rp,ee=e.rects.popper,K=e.elements[F?X:T],se=OL(uh(K)?K:K.contextElement||jf(e.elements.popper),h,w,c),ce=lp(e.elements.reference),_e=J6({reference:ce,element:ee,strategy:"absolute",placement:o}),pe=ry(Object.assign({},ee,_e)),Ge=T===Rp?pe:ce,We={top:se.top-Ge.top+H.top,bottom:Ge.bottom-se.bottom+H.bottom,left:se.left-Ge.left+H.left,right:Ge.right-se.right+H.right},Ae=e.modifiersData.offset;if(T===Rp&&Ae){var Ie=Ae[o];Object.keys(We).forEach(function(Fe){var ot=[Yc,Xc].indexOf(Fe)>=0?1:-1,_t=[nc,Xc].indexOf(Fe)>=0?"y":"x";We[Fe]+=Ie[_t]*ot})}return We}function FL(e,t){t===void 0&&(t={});var r=t,n=r.placement,o=r.boundary,u=r.rootBoundary,c=r.padding,l=r.flipVariations,h=r.allowedAutoPlacements,v=h===void 0?V6:h,w=up(n),E=w?l?q5:q5.filter(function(F){return up(F)===w}):Ed,T=E.filter(function(F){return v.indexOf(F)>=0});T.length===0&&(T=E);var I=T.reduce(function(F,U){return F[U]=cd(e,{placement:U,boundary:o,rootBoundary:u,padding:c})[B0(U)],F},{});return Object.keys(I).sort(function(F,U){return I[F]-I[U]})}function BL(e){if(B0(e)===yv)return[];var t=S1(e);return[G5(e),t,G5(t)]}function jL(e){var t=e.state,r=e.options,n=e.name;if(!t.modifiersData[n]._skip){for(var o=r.mainAxis,u=o===void 0?!0:o,c=r.altAxis,l=c===void 0?!0:c,h=r.fallbackPlacements,v=r.padding,w=r.boundary,E=r.rootBoundary,T=r.altBoundary,I=r.flipVariations,F=I===void 0?!0:I,U=r.allowedAutoPlacements,G=t.options.placement,H=B0(G),X=H===G,ee=h||(X||!F?[S1(G)]:BL(G)),K=[G].concat(ee).reduce(function(Pe,ft){return Pe.concat(B0(ft)===yv?FL(t,{placement:ft,boundary:w,rootBoundary:E,padding:v,flipVariations:F,allowedAutoPlacements:U}):ft)},[]),se=t.rects.reference,ce=t.rects.popper,_e=new Map,pe=!0,Ge=K[0],We=0;We<K.length;We++){var Ae=K[We],Ie=B0(Ae),Fe=up(Ae)===ap,ot=[nc,Xc].indexOf(Ie)>=0,_t=ot?"width":"height",ht=cd(t,{placement:Ae,boundary:w,rootBoundary:E,altBoundary:T,padding:v}),$e=ot?Fe?Yc:ic:Fe?Xc:nc;se[_t]>ce[_t]&&($e=S1($e));var ut=S1($e),bt=[];if(u&&bt.push(ht[Ie]<=0),l&&bt.push(ht[$e]<=0,ht[ut]<=0),bt.every(function(Pe){return Pe})){Ge=Ae,pe=!1;break}_e.set(Ae,bt)}if(pe)for(var Ze=F?3:1,He=function(ft){var At=K.find(function(Pt){var Kt=_e.get(Pt);if(Kt)return Kt.slice(0,ft).every(function($t){return $t})});if(At)return Ge=At,"break"},xe=Ze;xe>0;xe--){var Ne=He(xe);if(Ne==="break")break}t.placement!==Ge&&(t.modifiersData[n]._skip=!0,t.placement=Ge,t.reset=!0)}}const UL={name:"flip",enabled:!0,phase:"main",fn:jL,requiresIfExists:["offset"],data:{_skip:!1}};function W5(e,t,r){return r===void 0&&(r={x:0,y:0}),{top:e.top-t.height-r.y,right:e.right-t.width+r.x,bottom:e.bottom-t.height+r.y,left:e.left-t.width-r.x}}function Z5(e){return[nc,Yc,Xc,ic].some(function(t){return e[t]>=0})}function qL(e){var t=e.state,r=e.name,n=t.rects.reference,o=t.rects.popper,u=t.modifiersData.preventOverflow,c=cd(t,{elementContext:"reference"}),l=cd(t,{altBoundary:!0}),h=W5(c,n),v=W5(l,o,u),w=Z5(h),E=Z5(v);t.modifiersData[r]={referenceClippingOffsets:h,popperEscapeOffsets:v,isReferenceHidden:w,hasPopperEscaped:E},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":w,"data-popper-escaped":E})}const VL={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:qL};function $L(e,t,r){var n=B0(e),o=[ic,nc].indexOf(n)>=0?-1:1,u=typeof r=="function"?r(Object.assign({},t,{placement:e})):r,c=u[0],l=u[1];return c=c||0,l=(l||0)*o,[ic,Yc].indexOf(n)>=0?{x:l,y:c}:{x:c,y:l}}function GL(e){var t=e.state,r=e.options,n=e.name,o=r.offset,u=o===void 0?[0,0]:o,c=V6.reduce(function(w,E){return w[E]=$L(E,t.rects,u),w},{}),l=c[t.placement],h=l.x,v=l.y;t.modifiersData.popperOffsets!=null&&(t.modifiersData.popperOffsets.x+=h,t.modifiersData.popperOffsets.y+=v),t.modifiersData[n]=c}const HL={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:GL};function WL(e){var t=e.state,r=e.name;t.modifiersData[r]=J6({reference:t.rects.reference,element:t.rects.popper,strategy:"absolute",placement:t.placement})}const ZL={name:"popperOffsets",enabled:!0,phase:"read",fn:WL,data:{}};function XL(e){return e==="x"?"y":"x"}function YL(e){var t=e.state,r=e.options,n=e.name,o=r.mainAxis,u=o===void 0?!0:o,c=r.altAxis,l=c===void 0?!1:c,h=r.boundary,v=r.rootBoundary,w=r.altBoundary,E=r.padding,T=r.tether,I=T===void 0?!0:T,F=r.tetherOffset,U=F===void 0?0:F,G=cd(t,{boundary:h,rootBoundary:v,padding:E,altBoundary:w}),H=B0(t.placement),X=up(t.placement),ee=!X,K=bv(H),se=XL(K),ce=t.modifiersData.popperOffsets,_e=t.rects.reference,pe=t.rects.popper,Ge=typeof U=="function"?U(Object.assign({},t.rects,{placement:t.placement})):U,We=typeof Ge=="number"?{mainAxis:Ge,altAxis:Ge}:Object.assign({mainAxis:0,altAxis:0},Ge),Ae=t.modifiersData.offset?t.modifiersData.offset[t.placement]:null,Ie={x:0,y:0};if(ce){if(u){var Fe,ot=K==="y"?nc:ic,_t=K==="y"?Xc:Yc,ht=K==="y"?"height":"width",$e=ce[K],ut=$e+G[ot],bt=$e-G[_t],Ze=I?-pe[ht]/2:0,He=X===ap?_e[ht]:pe[ht],xe=X===ap?-pe[ht]:-_e[ht],Ne=t.elements.arrow,Pe=I&&Ne?_v(Ne):{width:0,height:0},ft=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:W6(),At=ft[ot],Pt=ft[_t],Kt=Xp(0,_e[ht],Pe[ht]),$t=ee?_e[ht]/2-Ze-Kt-At-We.mainAxis:He-Kt-At-We.mainAxis,br=ee?-_e[ht]/2+Ze+Kt+Pt+We.mainAxis:xe+Kt+Pt+We.mainAxis,Gt=t.elements.arrow&&Sd(t.elements.arrow),Rr=Gt?K==="y"?Gt.clientTop||0:Gt.clientLeft||0:0,Mr=(Fe=Ae==null?void 0:Ae[K])!=null?Fe:0,Kr=$e+$t-Mr-Rr,St=$e+br-Mr,ct=Xp(I?q1(ut,Kr):ut,$e,I?oh(bt,St):bt);ce[K]=ct,Ie[K]=ct-$e}if(l){var Or,ln=K==="x"?nc:ic,Wt=K==="x"?Xc:Yc,Ur=ce[se],mn=se==="y"?"height":"width",en=Ur+G[ln],On=Ur-G[Wt],Zn=[nc,ic].indexOf(H)!==-1,ai=(Or=Ae==null?void 0:Ae[se])!=null?Or:0,_i=Zn?en:Ur-_e[mn]-pe[mn]-ai+We.altAxis,hi=Zn?Ur+_e[mn]+pe[mn]-ai-We.altAxis:On,yr=I&&Zn?bL(_i,Ur,hi):Xp(I?_i:en,Ur,I?hi:On);ce[se]=yr,Ie[se]=yr-Ur}t.modifiersData[n]=Ie}}const JL={name:"preventOverflow",enabled:!0,phase:"main",fn:YL,requiresIfExists:["offset"]};function KL(e){return{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}}function QL(e){return e===Kc(e)||!Zc(e)?wv(e):KL(e)}function eP(e){var t=e.getBoundingClientRect(),r=sp(t.width)/e.offsetWidth||1,n=sp(t.height)/e.offsetHeight||1;return r!==1||n!==1}function tP(e,t,r){r===void 0&&(r=!1);var n=Zc(t),o=Zc(t)&&eP(t),u=jf(t),c=lp(e,o,r),l={scrollLeft:0,scrollTop:0},h={x:0,y:0};return(n||!n&&!r)&&((V0(t)!=="body"||kv(u))&&(l=QL(t)),Zc(t)?(h=lp(t,!0),h.x+=t.clientLeft,h.y+=t.clientTop):u&&(h.x=xv(u))),{x:c.left+l.scrollLeft-h.x,y:c.top+l.scrollTop-h.y,width:c.width,height:c.height}}function rP(e){var t=new Map,r=new Set,n=[];e.forEach(function(u){t.set(u.name,u)});function o(u){r.add(u.name);var c=[].concat(u.requires||[],u.requiresIfExists||[]);c.forEach(function(l){if(!r.has(l)){var h=t.get(l);h&&o(h)}}),n.push(u)}return e.forEach(function(u){r.has(u.name)||o(u)}),n}function nP(e){var t=rP(e);return mL.reduce(function(r,n){return r.concat(t.filter(function(o){return o.phase===n}))},[])}function iP(e){var t;return function(){return t||(t=new Promise(function(r){Promise.resolve().then(function(){t=void 0,r(e())})})),t}}function oP(e){var t=e.reduce(function(r,n){var o=r[n.name];return r[n.name]=o?Object.assign({},o,n,{options:Object.assign({},o.options,n.options),data:Object.assign({},o.data,n.data)}):n,r},{});return Object.keys(t).map(function(r){return t[r]})}var X5={placement:"bottom",modifiers:[],strategy:"absolute"};function Y5(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return!t.some(function(n){return!(n&&typeof n.getBoundingClientRect=="function")})}function aP(e){e===void 0&&(e={});var t=e,r=t.defaultModifiers,n=r===void 0?[]:r,o=t.defaultOptions,u=o===void 0?X5:o;return function(l,h,v){v===void 0&&(v=u);var w={placement:"bottom",orderedModifiers:[],options:Object.assign({},X5,u),modifiersData:{},elements:{reference:l,popper:h},attributes:{},styles:{}},E=[],T=!1,I={state:w,setOptions:function(H){var X=typeof H=="function"?H(w.options):H;U(),w.options=Object.assign({},u,w.options,X),w.scrollParents={reference:uh(l)?Yp(l):l.contextElement?Yp(l.contextElement):[],popper:Yp(h)};var ee=nP(oP([].concat(n,w.options.modifiers)));return w.orderedModifiers=ee.filter(function(K){return K.enabled}),F(),I.update()},forceUpdate:function(){if(!T){var H=w.elements,X=H.reference,ee=H.popper;if(Y5(X,ee)){w.rects={reference:tP(X,Sd(ee),w.options.strategy==="fixed"),popper:_v(ee)},w.reset=!1,w.placement=w.options.placement,w.orderedModifiers.forEach(function(We){return w.modifiersData[We.name]=Object.assign({},We.data)});for(var K=0;K<w.orderedModifiers.length;K++){if(w.reset===!0){w.reset=!1,K=-1;continue}var se=w.orderedModifiers[K],ce=se.fn,_e=se.options,pe=_e===void 0?{}:_e,Ge=se.name;typeof ce=="function"&&(w=ce({state:w,options:pe,name:Ge,instance:I})||w)}}}},update:iP(function(){return new Promise(function(G){I.forceUpdate(),G(w)})}),destroy:function(){U(),T=!0}};if(!Y5(l,h))return I;I.setOptions(v).then(function(G){!T&&v.onFirstUpdate&&v.onFirstUpdate(G)});function F(){w.orderedModifiers.forEach(function(G){var H=G.name,X=G.options,ee=X===void 0?{}:X,K=G.effect;if(typeof K=="function"){var se=K({state:w,name:H,instance:I,options:ee}),ce=function(){};E.push(se||ce)}})}function U(){E.forEach(function(G){return G()}),E=[]}return I}}var sP=[LL,ZL,IL,$6,HL,UL,JL,AL,VL],K6=aP({defaultModifiers:sP});function lP(e){let t=null,r,n,o=e;const u=()=>{r!==void 0&&n!==void 0&&(t=K6(r,n,o))},c=()=>{t!==null&&(t.destroy(),t=null)},l=w=>"subscribe"in w?(h(w),{}):(r=w,u(),{destroy(){c()}}),h=w=>{const E=w.subscribe(T=>{r===void 0?(r=T,u()):(Object.assign(r,T),t==null||t.update())});Py(E)};return[l,(w,E)=>(n=w,o={...e,...E},u(),{update(T){o={...e,...T},t==null||t.setOptions(o)},destroy(){c()}}),()=>t]}var Av={};Object.defineProperty(Av,"__esModule",{value:!0});var Q6=Av.clickOutside=void 0;function uP(e,t){var r=function(n){return e&&!e.contains(n.target)&&!n.defaultPrevented&&t()};return document.addEventListener("click",r,!0),{destroy:function(){document.removeEventListener("click",r,!0)}}}Q6=Av.clickOutside=uP;function J5(e){let t,r;return{c(){t=yt("p"),r=ei(e[1]),this.h()},l(n){t=vt(n,"P",{class:!0});var o=Ct(t);r=ti(o,e[1]),o.forEach(ge),this.h()},h(){ve(t,"class","label svelte-18w7g2m")},m(n,o){Lt(n,t,o),lt(t,r)},p(n,o){o&2&&ta(r,n[1])},d(n){n&&ge(t)}}}function K5(e){let t,r,n,o,u,c,l;function h(w){e[10](w)}let v={components:nL,isPopup:!0,isInput:!1,isTextInput:!1,isAlpha:!0,toRight:!0,isOpen:!0};return e[3]!==void 0&&(v.rgb=e[3]),r=new VT({props:v}),Ft.push(()=>Jt(r,"rgb",h)),{c(){t=yt("div"),Ut(r.$$.fragment),this.h()},l(w){t=vt(w,"DIV",{id:!0,class:!0});var E=Ct(t);Yt(r.$$.fragment,E),E.forEach(ge),this.h()},h(){ve(t,"id","tooltip"),ve(t,"class","svelte-18w7g2m")},m(w,E){Lt(w,t,E),qt(r,t,null),u=!0,c||(l=[sh(e[6].call(null,t,e[7])),sh(o=Q6.call(null,t,e[11]))],c=!0)},p(w,E){const T={};!n&&E&8&&(n=!0,T.rgb=w[3],er(()=>n=!1)),r.$set(T),o&&g0(o.update)&&E&16&&o.update.call(null,w[11])},i(w){u||(Xe(r.$$.fragment,w),u=!0)},o(w){it(r.$$.fragment,w),u=!1},d(w){w&&ge(t),Vt(r),c=!1,oa(l)}}}function cP(e){let t,r,n,o,u,c,l,h,v=!e[2]&&J5(e),w=e[4]&&K5(e);return{c(){t=yt("span"),r=yt("div"),n=mr(),v&&v.c(),o=mr(),w&&w.c(),u=ao(),this.h()},l(E){t=vt(E,"SPAN",{class:!0,role:!0,tabindex:!0});var T=Ct(t);r=vt(T,"DIV",{class:!0,title:!0,style:!0}),Ct(r).forEach(ge),n=gr(T),v&&v.l(T),T.forEach(ge),o=gr(E),w&&w.l(E),u=ao(),this.h()},h(){ve(r,"class","color-palette svelte-18w7g2m"),ve(r,"title",e[0]),zo(r,"background",e[0]),ve(t,"class","paletter-control svelte-18w7g2m"),ve(t,"role","button"),ve(t,"tabindex","0")},m(E,T){Lt(E,t,T),lt(t,r),lt(t,n),v&&v.m(t,null),Lt(E,o,T),w&&w.m(E,T),Lt(E,u,T),c=!0,l||(h=[rn(t,"click",e[9]),rn(t,"keydown",e[8]),sh(e[5].call(null,t))],l=!0)},p(E,[T]){(!c||T&1)&&ve(r,"title",E[0]),(!c||T&1)&&zo(r,"background",E[0]),E[2]?v&&(v.d(1),v=null):v?v.p(E,T):(v=J5(E),v.c(),v.m(t,null)),E[4]?w?(w.p(E,T),T&16&&Xe(w,1)):(w=K5(E),w.c(),Xe(w,1),w.m(u.parentNode,u)):w&&(ji(),it(w,1,1,()=>{w=null}),Ui())},i(E){c||(Xe(w),c=!0)},o(E){it(w),c=!1},d(E){E&&ge(t),v&&v.d(),E&&ge(o),w&&w.d(E),E&&ge(u),l=!1,oa(h)}}}function fP(e,t,r){let{color:n}=t,{label:o="Choose a color"}=t,{hideLabel:u=!1}=t,c,l=!1;const h=mp(),[v,w]=lP({placement:"bottom",strategy:"fixed"}),E={modifiers:[{name:"offset",options:{offset:[0,8]}},{name:"preventOverflow",options:{mainAxis:!0}}]},T=()=>{const X=op(n),ee=X.rgb();r(3,c={r:ee[0],g:ee[1],b:ee[2],a:X.alpha()})},I=()=>{c&&(r(0,n=op([c.r,c.g,c.b,c.a]).css()),h("change",{color:n}))},F=X=>{X.key==="Enter"&&r(4,l=!l)},U=()=>r(4,l=!l);function G(X){c=X,r(3,c)}const H=()=>r(4,l=!1);return e.$$set=X=>{"color"in X&&r(0,n=X.color),"label"in X&&r(1,o=X.label),"hideLabel"in X&&r(2,u=X.hideLabel)},e.$$.update=()=>{e.$$.dirty&1&&T(),e.$$.dirty&8&&I()},[n,o,u,c,l,v,w,E,F,U,G,H]}class e8 extends Dn{constructor(t){super(),zn(this,t,fP,cP,Ln,{color:0,label:1,hideLabel:2})}}function hP(e){let t,r,n;function o(c){e[5](c)}let u={};return e[0]!==void 0&&(u.color=e[0]),t=new e8({props:u}),Ft.push(()=>Jt(t,"color",o)),t.$on("change",e[1]),{c(){Ut(t.$$.fragment)},l(c){Yt(t.$$.fragment,c)},m(c,l){qt(t,c,l),n=!0},p(c,[l]){const h={};!r&&l&1&&(r=!0,h.color=c[0],er(()=>r=!1)),t.$set(h)},i(c){n||(Xe(t.$$.fragment,c),n=!0)},o(c){it(t.$$.fragment,c),n=!1},d(c){Vt(t,c)}}}function pP(e,t,r){let{map:n}=t,{layer:o}=t,{propertyName:u}=t,l=(()=>{let w=n.getPaintProperty(o.id,u);return w=pv(w),w||(w="#000000"),w})();const h=dv(w=>{r(0,l=w.detail.color),n.setPaintProperty(o.id,u,l);const E=n.getStyle().layers.find(T=>T.id===o.id);E&&r(2,o=E)},100);function v(w){l=w,r(0,l)}return e.$$set=w=>{"map"in w&&r(3,n=w.map),"layer"in w&&r(2,o=w.layer),"propertyName"in w&&r(4,u=w.propertyName)},[l,h,o,n,u,v]}class sc extends Dn{constructor(t){super(),zn(this,t,pP,hP,Ln,{map:3,layer:2,propertyName:4})}}function dP(e){let t,r,n;return r=new go({props:{icon:QA,size:e[0]}}),{c(){t=yt("a"),Ut(r.$$.fragment),this.h()},l(o){t=vt(o,"A",{class:!0,href:!0,target:!0,rel:!0,role:!0});var u=Ct(t);Yt(r.$$.fragment,u),u.forEach(ge),this.h()},h(){ve(t,"class","help svelte-big87s"),ve(t,"href",e[1]),ve(t,"target","_blank"),ve(t,"rel","noreferrer"),ve(t,"role","button")},m(o,u){Lt(o,t,u),qt(r,t,null),n=!0},p(o,[u]){const c={};u&1&&(c.size=o[0]),r.$set(c),(!n||u&2)&&ve(t,"href",o[1])},i(o){n||(Xe(r.$$.fragment,o),n=!0)},o(o){it(r.$$.fragment,o),n=!1},d(o){o&&ge(t),Vt(r)}}}const Lm="https://maplibre.org/maplibre-gl-js-docs/style-spec/layers/";function mP(e,t,r){let{type:n=void 0}=t,{layerType:o}=t,{property:u=void 0}=t,{size:c="sm"}=t,l;return e.$$set=h=>{"type"in h&&r(2,n=h.type),"layerType"in h&&r(3,o=h.layerType),"property"in h&&r(4,u=h.property),"size"in h&&r(0,c=h.size)},e.$$.update=()=>{e.$$.dirty&28&&(n&&o&&u?r(1,l=`${Lm}#${n}-${o}-${u}`):o&&!n&&!u?r(1,l=`${Lm}#${o}`):r(1,l=Lm))},[c,l,n,o,u]}class t8 extends Dn{constructor(t){super(),zn(this,t,mP,dP,Ln,{type:2,layerType:3,property:4,size:0})}}function Q5(e){let t,r,n,o,u;function c(w){e[4](w)}function l(w){e[5](w)}function h(w){e[6](w)}let v={};return e[0].type!==void 0&&(v.type=e[0].type),e[0].layerType!==void 0&&(v.layerType=e[0].layerType),e[0].property!==void 0&&(v.property=e[0].property),t=new t8({props:v}),Ft.push(()=>Jt(t,"type",c)),Ft.push(()=>Jt(t,"layerType",l)),Ft.push(()=>Jt(t,"property",h)),{c(){Ut(t.$$.fragment)},l(w){Yt(t.$$.fragment,w)},m(w,E){qt(t,w,E),u=!0},p(w,E){const T={};!r&&E&1&&(r=!0,T.type=w[0].type,er(()=>r=!1)),!n&&E&1&&(n=!0,T.layerType=w[0].layerType,er(()=>n=!1)),!o&&E&1&&(o=!0,T.property=w[0].property,er(()=>o=!1)),t.$set(T)},i(w){u||(Xe(t.$$.fragment,w),u=!0)},o(w){it(t.$$.fragment,w),u=!1},d(w){Vt(t,w)}}}function gP(e){let t,r,n,o,u,c,l,h=e[0]&&Q5(e);const v=e[3].default,w=Ou(v,e,e[2],null);return{c(){t=yt("div"),r=yt("label"),n=ei(e[1]),o=mr(),h&&h.c(),u=mr(),c=yt("div"),w&&w.c(),this.h()},l(E){t=vt(E,"DIV",{class:!0});var T=Ct(t);r=vt(T,"LABEL",{class:!0});var I=Ct(r);n=ti(I,e[1]),o=gr(I),h&&h.l(I),I.forEach(ge),u=gr(T),c=vt(T,"DIV",{class:!0});var F=Ct(c);w&&w.l(F),F.forEach(ge),T.forEach(ge),this.h()},h(){ve(r,"class","label is-normal svelte-1ffgjvp"),ve(c,"class","control svelte-1ffgjvp"),ve(t,"class","field svelte-1ffgjvp")},m(E,T){Lt(E,t,T),lt(t,r),lt(r,n),lt(r,o),h&&h.m(r,null),lt(t,u),lt(t,c),w&&w.m(c,null),l=!0},p(E,[T]){(!l||T&2)&&ta(n,E[1]),E[0]?h?(h.p(E,T),T&1&&Xe(h,1)):(h=Q5(E),h.c(),Xe(h,1),h.m(r,null)):h&&(ji(),it(h,1,1,()=>{h=null}),Ui()),w&&w.p&&(!l||T&4)&&Fu(w,v,E,E[2],l?ju(v,E[2],T,null):Bu(E[2]),null)},i(E){l||(Xe(h),Xe(w,E),l=!0)},o(E){it(h),it(w,E),l=!1},d(E){E&&ge(t),h&&h.d(),w&&w.d(E)}}}function yP(e,t,r){let{$$slots:n={},$$scope:o}=t,{title:u}=t,{help:c=void 0}=t;function l(w){e.$$.not_equal(c.type,w)&&(c.type=w,r(0,c))}function h(w){e.$$.not_equal(c.layerType,w)&&(c.layerType=w,r(0,c))}function v(w){e.$$.not_equal(c.property,w)&&(c.property=w,r(0,c))}return e.$$set=w=>{"title"in w&&r(1,u=w.title),"help"in w&&r(0,c=w.help),"$$scope"in w&&r(2,o=w.$$scope)},[c,u,o,n,l,h,v]}class Wi extends Dn{constructor(t){super(),zn(this,t,yP,gP,Ln,{title:1,help:0})}}function vP(e){let t,r,n,o;function u(h){e[2](h)}function c(h){e[3](h)}let l={};return e[0]!==void 0&&(l.map=e[0]),e[1]!==void 0&&(l.layer=e[1]),t=new Bf({props:l}),Ft.push(()=>Jt(t,"map",u)),Ft.push(()=>Jt(t,"layer",c)),{c(){Ut(t.$$.fragment)},l(h){Yt(t.$$.fragment,h)},m(h,v){qt(t,h,v),o=!0},p(h,v){const w={};!r&&v&1&&(r=!0,w.map=h[0],er(()=>r=!1)),!n&&v&2&&(n=!0,w.layer=h[1],er(()=>n=!1)),t.$set(w)},i(h){o||(Xe(t.$$.fragment,h),o=!0)},o(h){it(t.$$.fragment,h),o=!1},d(h){Vt(t,h)}}}function _P(e){let t,r,n,o;function u(h){e[4](h)}function c(h){e[5](h)}let l={propertyName:"background-color"};return e[0]!==void 0&&(l.map=e[0]),e[1]!==void 0&&(l.layer=e[1]),t=new sc({props:l}),Ft.push(()=>Jt(t,"map",u)),Ft.push(()=>Jt(t,"layer",c)),{c(){Ut(t.$$.fragment)},l(h){Yt(t.$$.fragment,h)},m(h,v){qt(t,h,v),o=!0},p(h,v){const w={};!r&&v&1&&(r=!0,w.map=h[0],er(()=>r=!1)),!n&&v&2&&(n=!0,w.layer=h[1],er(()=>n=!1)),t.$set(w)},i(h){o||(Xe(t.$$.fragment,h),o=!0)},o(h){it(t.$$.fragment,h),o=!1},d(h){Vt(t,h)}}}function bP(e){let t,r,n,o;return t=new Wi({props:{title:"Opacity",help:{type:"paint",layerType:"background",property:"background-opacity"},$$slots:{default:[vP]},$$scope:{ctx:e}}}),n=new Wi({props:{title:"Background color",help:{type:"paint",layerType:"background",property:"background-color"},$$slots:{default:[_P]},$$scope:{ctx:e}}}),{c(){Ut(t.$$.fragment),r=mr(),Ut(n.$$.fragment)},l(u){Yt(t.$$.fragment,u),r=gr(u),Yt(n.$$.fragment,u)},m(u,c){qt(t,u,c),Lt(u,r,c),qt(n,u,c),o=!0},p(u,[c]){const l={};c&67&&(l.$$scope={dirty:c,ctx:u}),t.$set(l);const h={};c&67&&(h.$$scope={dirty:c,ctx:u}),n.$set(h)},i(u){o||(Xe(t.$$.fragment,u),Xe(n.$$.fragment,u),o=!0)},o(u){it(t.$$.fragment,u),it(n.$$.fragment,u),o=!1},d(u){Vt(t,u),u&&ge(r),Vt(n,u)}}}function wP(e,t,r){let{map:n}=t,{layer:o}=t;function u(v){n=v,r(0,n)}function c(v){o=v,r(1,o)}function l(v){n=v,r(0,n)}function h(v){o=v,r(1,o)}return e.$$set=v=>{"map"in v&&r(0,n=v.map),"layer"in v&&r(1,o=v.layer)},[n,o,u,c,l,h]}class xP extends Dn{constructor(t){super(),zn(this,t,wP,bP,Ln,{map:0,layer:1})}}function kP(e){let t,r,n,o;function u(h){e[2](h)}function c(h){e[3](h)}let l={};return e[0]!==void 0&&(l.map=e[0]),e[1]!==void 0&&(l.layer=e[1]),t=new Bf({props:l}),Ft.push(()=>Jt(t,"map",u)),Ft.push(()=>Jt(t,"layer",c)),{c(){Ut(t.$$.fragment)},l(h){Yt(t.$$.fragment,h)},m(h,v){qt(t,h,v),o=!0},p(h,v){const w={};!r&&v&1&&(r=!0,w.map=h[0],er(()=>r=!1)),!n&&v&2&&(n=!0,w.layer=h[1],er(()=>n=!1)),t.$set(w)},i(h){o||(Xe(t.$$.fragment,h),o=!0)},o(h){it(t.$$.fragment,h),o=!1},d(h){Vt(t,h)}}}function AP(e){let t,r,n,o;function u(h){e[4](h)}function c(h){e[5](h)}let l={propertyName:"fill-color"};return e[0]!==void 0&&(l.map=e[0]),e[1]!==void 0&&(l.layer=e[1]),t=new sc({props:l}),Ft.push(()=>Jt(t,"map",u)),Ft.push(()=>Jt(t,"layer",c)),{c(){Ut(t.$$.fragment)},l(h){Yt(t.$$.fragment,h)},m(h,v){qt(t,h,v),o=!0},p(h,v){const w={};!r&&v&1&&(r=!0,w.map=h[0],er(()=>r=!1)),!n&&v&2&&(n=!0,w.layer=h[1],er(()=>n=!1)),t.$set(w)},i(h){o||(Xe(t.$$.fragment,h),o=!0)},o(h){it(t.$$.fragment,h),o=!1},d(h){Vt(t,h)}}}function EP(e){let t,r,n,o;function u(h){e[6](h)}function c(h){e[7](h)}let l={propertyName:"fill-outline-color"};return e[0]!==void 0&&(l.map=e[0]),e[1]!==void 0&&(l.layer=e[1]),t=new sc({props:l}),Ft.push(()=>Jt(t,"map",u)),Ft.push(()=>Jt(t,"layer",c)),{c(){Ut(t.$$.fragment)},l(h){Yt(t.$$.fragment,h)},m(h,v){qt(t,h,v),o=!0},p(h,v){const w={};!r&&v&1&&(r=!0,w.map=h[0],er(()=>r=!1)),!n&&v&2&&(n=!0,w.layer=h[1],er(()=>n=!1)),t.$set(w)},i(h){o||(Xe(t.$$.fragment,h),o=!0)},o(h){it(t.$$.fragment,h),o=!1},d(h){Vt(t,h)}}}function SP(e){let t,r,n,o,u,c;return t=new Wi({props:{title:"Opacity",help:{type:"paint",layerType:"fill",property:"fill-opacity"},$$slots:{default:[kP]},$$scope:{ctx:e}}}),n=new Wi({props:{title:"Fill color",help:{type:"paint",layerType:"fill",property:"fill-color"},$$slots:{default:[AP]},$$scope:{ctx:e}}}),u=new Wi({props:{title:"Fill outline color",help:{type:"paint",layerType:"fill",property:"fill-outline-color"},$$slots:{default:[EP]},$$scope:{ctx:e}}}),{c(){Ut(t.$$.fragment),r=mr(),Ut(n.$$.fragment),o=mr(),Ut(u.$$.fragment)},l(l){Yt(t.$$.fragment,l),r=gr(l),Yt(n.$$.fragment,l),o=gr(l),Yt(u.$$.fragment,l)},m(l,h){qt(t,l,h),Lt(l,r,h),qt(n,l,h),Lt(l,o,h),qt(u,l,h),c=!0},p(l,[h]){const v={};h&259&&(v.$$scope={dirty:h,ctx:l}),t.$set(v);const w={};h&259&&(w.$$scope={dirty:h,ctx:l}),n.$set(w);const E={};h&259&&(E.$$scope={dirty:h,ctx:l}),u.$set(E)},i(l){c||(Xe(t.$$.fragment,l),Xe(n.$$.fragment,l),Xe(u.$$.fragment,l),c=!0)},o(l){it(t.$$.fragment,l),it(n.$$.fragment,l),it(u.$$.fragment,l),c=!1},d(l){Vt(t,l),l&&ge(r),Vt(n,l),l&&ge(o),Vt(u,l)}}}function CP(e,t,r){let{map:n}=t,{layer:o}=t;function u(E){n=E,r(0,n)}function c(E){o=E,r(1,o)}function l(E){n=E,r(0,n)}function h(E){o=E,r(1,o)}function v(E){n=E,r(0,n)}function w(E){o=E,r(1,o)}return e.$$set=E=>{"map"in E&&r(0,n=E.map),"layer"in E&&r(1,o=E.layer)},[n,o,u,c,l,h,v,w]}class IP extends Dn{constructor(t){super(),zn(this,t,CP,SP,Ln,{map:0,layer:1})}}function TP(e){let t,r,n;function o(c){e[3](c)}let u={min:0,max:20,step:1,unit:"px"};return e[0]!==void 0&&(u.value=e[0]),t=new ns({props:u}),Ft.push(()=>Jt(t,"value",o)),{c(){Ut(t.$$.fragment)},l(c){Yt(t.$$.fragment,c)},m(c,l){qt(t,c,l),n=!0},p(c,[l]){const h={};!r&&l&1&&(r=!0,h.value=c[0],er(()=>r=!1)),t.$set(h)},i(c){n||(Xe(t.$$.fragment,c),n=!0)},o(c){it(t.$$.fragment,c),n=!1},d(c){Vt(t,c)}}}function LP(e,t,r){let{map:n}=t,{layer:o}=t,c=(()=>{let v=n.getPaintProperty(o.id,"line-width");return v||(v=1),v})();const l=()=>{c&&(n==null||n.setPaintProperty(o.id,"line-width",c))};function h(v){c=v,r(0,c)}return e.$$set=v=>{"map"in v&&r(1,n=v.map),"layer"in v&&r(2,o=v.layer)},e.$$.update=()=>{e.$$.dirty&1&&l()},[c,n,o,h]}class PP extends Dn{constructor(t){super(),zn(this,t,LP,TP,Ln,{map:1,layer:2})}}function MP(e){let t,r,n;function o(c){e[3](c)}let u={min:0,max:20,step:1,unit:"px"};return e[0]!==void 0&&(u.value=e[0]),t=new ns({props:u}),Ft.push(()=>Jt(t,"value",o)),{c(){Ut(t.$$.fragment)},l(c){Yt(t.$$.fragment,c)},m(c,l){qt(t,c,l),n=!0},p(c,[l]){const h={};!r&&l&1&&(r=!0,h.value=c[0],er(()=>r=!1)),t.$set(h)},i(c){n||(Xe(t.$$.fragment,c),n=!0)},o(c){it(t.$$.fragment,c),n=!1},d(c){Vt(t,c)}}}function DP(e,t,r){let{map:n}=t,{layer:o}=t,c=(()=>{let v=n.getPaintProperty(o.id,"line-blur");return v||(v=0),v})();const l=()=>{n==null||n.setPaintProperty(o.id,"line-blur",c)};function h(v){c=v,r(0,c)}return e.$$set=v=>{"map"in v&&r(1,n=v.map),"layer"in v&&r(2,o=v.layer)},e.$$.update=()=>{e.$$.dirty&1&&l()},[c,n,o,h]}class zP extends Dn{constructor(t){super(),zn(this,t,DP,MP,Ln,{map:1,layer:2})}}function e4(e,t,r){const n=e.slice();return n[3]=t[r],n}function t4(e){let t,r,n,o=e[3].title+"",u,c,l,h,v;function w(){return e[2](e[3])}return{c(){t=yt("p"),r=yt("button"),n=yt("span"),u=ei(o),l=mr(),this.h()},l(E){t=vt(E,"P",{class:!0});var T=Ct(t);r=vt(T,"BUTTON",{class:!0});var I=Ct(r);n=vt(I,"SPAN",{class:!0});var F=Ct(n);u=ti(F,o),F.forEach(ge),I.forEach(ge),l=gr(T),T.forEach(ge),this.h()},h(){ve(n,"class","svelte-1n4j3zv"),ve(r,"class",c=`button is-small ${JSON.stringify(e[3].value)==JSON.stringify(e[0])?"is-info is-light is-active":""} svelte-1n4j3zv`),ve(t,"class","control svelte-1n4j3zv")},m(E,T){Lt(E,t,T),lt(t,r),lt(r,n),lt(n,u),lt(t,l),h||(v=rn(r,"click",w),h=!0)},p(E,T){e=E,T&2&&o!==(o=e[3].title+"")&&ta(u,o),T&3&&c!==(c=`button is-small ${JSON.stringify(e[3].value)==JSON.stringify(e[0])?"is-info is-light is-active":""} svelte-1n4j3zv`)&&ve(r,"class",c)},d(E){E&&ge(t),h=!1,v()}}}function r4(e){let t,r=e[1],n=[];for(let o=0;o<r.length;o+=1)n[o]=t4(e4(e,r,o));return{c(){for(let o=0;o<n.length;o+=1)n[o].c();t=ao()},l(o){for(let u=0;u<n.length;u+=1)n[u].l(o);t=ao()},m(o,u){for(let c=0;c<n.length;c+=1)n[c].m(o,u);Lt(o,t,u)},p(o,u){if(u&3){r=o[1];let c;for(c=0;c<r.length;c+=1){const l=e4(o,r,c);n[c]?n[c].p(l,u):(n[c]=t4(l),n[c].c(),n[c].m(t.parentNode,t))}for(;c<n.length;c+=1)n[c].d(1);n.length=r.length}},d(o){Ol(n,o),o&&ge(t)}}}function NP(e){let t,r=e[0],n=r4(e);return{c(){t=yt("p"),n.c(),this.h()},l(o){t=vt(o,"P",{class:!0});var u=Ct(t);n.l(u),u.forEach(ge),this.h()},h(){ve(t,"class","buttons svelte-1n4j3zv")},m(o,u){Lt(o,t,u),n.m(t,null)},p(o,[u]){u&1&&Ln(r,r=o[0])?(n.d(1),n=r4(o),n.c(),n.m(t,null)):n.p(o,u)},i:Qn,o:Qn,d(o){o&&ge(t),n.d(o)}}}function RP(e,t,r){let{options:n}=t,{selectedValue:o}=t;const u=c=>{r(0,o=JSON.parse(JSON.stringify(c.value)))};return e.$$set=c=>{"options"in c&&r(1,n=c.options),"selectedValue"in c&&r(0,o=c.selectedValue)},[o,n,u]}class g2 extends Dn{constructor(t){super(),zn(this,t,RP,NP,Ln,{options:1,selectedValue:0})}}function OP(e){let t,r,n,o;function u(h){e[4](h)}function c(h){e[5](h)}let l={};return e[1]!==void 0&&(l.options=e[1]),e[0]!==void 0&&(l.selectedValue=e[0]),t=new g2({props:l}),Ft.push(()=>Jt(t,"options",u)),Ft.push(()=>Jt(t,"selectedValue",c)),{c(){Ut(t.$$.fragment)},l(h){Yt(t.$$.fragment,h)},m(h,v){qt(t,h,v),o=!0},p(h,[v]){const w={};!r&&v&2&&(r=!0,w.options=h[1],er(()=>r=!1)),!n&&v&1&&(n=!0,w.selectedValue=h[0],er(()=>n=!1)),t.$set(w)},i(h){o||(Xe(t.$$.fragment,h),o=!0)},o(h){it(t.$$.fragment,h),o=!1},d(h){Vt(t,h)}}}function FP(e,t,r){let{map:n}=t,{layer:o}=t,u=[{title:"Solid",value:""},{title:" dash",value:[10,4]},{title:" dash dot",value:[10,3,2,3]},{title:" dot",value:[1,1]}],l=(()=>{let E=n.getPaintProperty(o.id,"line-dasharray");return E||(E=u[0].value),E})();const h=()=>{l?n==null||n.setPaintProperty(o.id,"line-dasharray",l):n==null||n.setPaintProperty(o.id,"line-dasharray",void 0);const E=n.getStyle().layers.find(T=>T.id===o.id);E&&r(2,o=E)};function v(E){u=E,r(1,u)}function w(E){l=E,r(0,l)}return e.$$set=E=>{"map"in E&&r(3,n=E.map),"layer"in E&&r(2,o=E.layer)},e.$$.update=()=>{e.$$.dirty&1&&h()},[l,u,o,n,v,w]}class BP extends Dn{constructor(t){super(),zn(this,t,FP,OP,Ln,{map:3,layer:2})}}function jP(e){let t,r,n,o,u=e[0]?"Delete heatmap":"Create heatmap",c,l,h;return{c(){t=yt("div"),r=yt("input"),n=mr(),o=yt("label"),c=ei(u),this.h()},l(v){t=vt(v,"DIV",{class:!0});var w=Ct(t);r=vt(w,"INPUT",{id:!0,type:!0,name:!0,class:!0}),n=gr(w),o=vt(w,"LABEL",{class:!0,for:!0});var E=Ct(o);c=ti(E,u),E.forEach(ge),w.forEach(ge),this.h()},h(){ve(r,"id","heatmapToggle"),ve(r,"type","checkbox"),ve(r,"name","heatmapToggle"),ve(r,"class","switch svelte-46p5i7"),ve(o,"class","switch-label svelte-46p5i7"),ve(o,"for","heatmapToggle"),ve(t,"class","field")},m(v,w){Lt(v,t,w),lt(t,r),r.checked=e[0],lt(t,n),lt(t,o),lt(o,c),l||(h=rn(r,"change",e[3]),l=!0)},p(v,[w]){w&1&&(r.checked=v[0]),w&1&&u!==(u=v[0]?"Delete heatmap":"Create heatmap")&&ta(c,u)},i:Qn,o:Qn,d(v){v&&ge(t),l=!1,h()}}}function UP(e,t,r){let{map:n}=t,{layer:o}=t,u=`${o.id} heatmap`,c=!!n.getLayer(u);const l=()=>{if(n.getLayer(u))return;const w=o,E={id:u,type:"heatmap",source:w.source,"source-layer":w["source-layer"],layout:{visibility:"visible"},paint:{"heatmap-color":["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],"heatmap-intensity":1,"heatmap-opacity":1,"heatmap-radius":30,"heatmap-weight":1}};E.minzoom=w.maxzoom??0,E.maxzoom=w.maxzoom??24,n.addLayer(E,w.id)},h=()=>{n.getLayer(u)&&n.removeLayer(u)};function v(){c=this.checked,r(0,c)}return e.$$set=w=>{"map"in w&&r(1,n=w.map),"layer"in w&&r(2,o=w.layer)},e.$$.update=()=>{e.$$.dirty&1&&c===!0&&l(),e.$$.dirty&1&&(c||h())},[c,n,o,v]}class r8 extends Dn{constructor(t){super(),zn(this,t,UP,jP,Ln,{map:1,layer:2})}}function qP(e){let t,r,n,o;function u(h){e[2](h)}function c(h){e[3](h)}let l={};return e[0]!==void 0&&(l.map=e[0]),e[1]!==void 0&&(l.layer=e[1]),t=new r8({props:l}),Ft.push(()=>Jt(t,"map",u)),Ft.push(()=>Jt(t,"layer",c)),{c(){Ut(t.$$.fragment)},l(h){Yt(t.$$.fragment,h)},m(h,v){qt(t,h,v),o=!0},p(h,v){const w={};!r&&v&1&&(r=!0,w.map=h[0],er(()=>r=!1)),!n&&v&2&&(n=!0,w.layer=h[1],er(()=>n=!1)),t.$set(w)},i(h){o||(Xe(t.$$.fragment,h),o=!0)},o(h){it(t.$$.fragment,h),o=!1},d(h){Vt(t,h)}}}function VP(e){let t,r,n,o;function u(h){e[4](h)}function c(h){e[5](h)}let l={};return e[0]!==void 0&&(l.map=e[0]),e[1]!==void 0&&(l.layer=e[1]),t=new Bf({props:l}),Ft.push(()=>Jt(t,"map",u)),Ft.push(()=>Jt(t,"layer",c)),{c(){Ut(t.$$.fragment)},l(h){Yt(t.$$.fragment,h)},m(h,v){qt(t,h,v),o=!0},p(h,v){const w={};!r&&v&1&&(r=!0,w.map=h[0],er(()=>r=!1)),!n&&v&2&&(n=!0,w.layer=h[1],er(()=>n=!1)),t.$set(w)},i(h){o||(Xe(t.$$.fragment,h),o=!0)},o(h){it(t.$$.fragment,h),o=!1},d(h){Vt(t,h)}}}function $P(e){let t,r,n,o;function u(h){e[6](h)}function c(h){e[7](h)}let l={propertyName:"line-color"};return e[0]!==void 0&&(l.map=e[0]),e[1]!==void 0&&(l.layer=e[1]),t=new sc({props:l}),Ft.push(()=>Jt(t,"map",u)),Ft.push(()=>Jt(t,"layer",c)),{c(){Ut(t.$$.fragment)},l(h){Yt(t.$$.fragment,h)},m(h,v){qt(t,h,v),o=!0},p(h,v){const w={};!r&&v&1&&(r=!0,w.map=h[0],er(()=>r=!1)),!n&&v&2&&(n=!0,w.layer=h[1],er(()=>n=!1)),t.$set(w)},i(h){o||(Xe(t.$$.fragment,h),o=!0)},o(h){it(t.$$.fragment,h),o=!1},d(h){Vt(t,h)}}}function GP(e){let t,r,n,o;function u(h){e[8](h)}function c(h){e[9](h)}let l={};return e[0]!==void 0&&(l.map=e[0]),e[1]!==void 0&&(l.layer=e[1]),t=new PP({props:l}),Ft.push(()=>Jt(t,"map",u)),Ft.push(()=>Jt(t,"layer",c)),{c(){Ut(t.$$.fragment)},l(h){Yt(t.$$.fragment,h)},m(h,v){qt(t,h,v),o=!0},p(h,v){const w={};!r&&v&1&&(r=!0,w.map=h[0],er(()=>r=!1)),!n&&v&2&&(n=!0,w.layer=h[1],er(()=>n=!1)),t.$set(w)},i(h){o||(Xe(t.$$.fragment,h),o=!0)},o(h){it(t.$$.fragment,h),o=!1},d(h){Vt(t,h)}}}function HP(e){let t,r,n,o;function u(h){e[10](h)}function c(h){e[11](h)}let l={};return e[0]!==void 0&&(l.map=e[0]),e[1]!==void 0&&(l.layer=e[1]),t=new BP({props:l}),Ft.push(()=>Jt(t,"map",u)),Ft.push(()=>Jt(t,"layer",c)),{c(){Ut(t.$$.fragment)},l(h){Yt(t.$$.fragment,h)},m(h,v){qt(t,h,v),o=!0},p(h,v){const w={};!r&&v&1&&(r=!0,w.map=h[0],er(()=>r=!1)),!n&&v&2&&(n=!0,w.layer=h[1],er(()=>n=!1)),t.$set(w)},i(h){o||(Xe(t.$$.fragment,h),o=!0)},o(h){it(t.$$.fragment,h),o=!1},d(h){Vt(t,h)}}}function WP(e){let t,r,n,o;function u(h){e[12](h)}function c(h){e[13](h)}let l={};return e[0]!==void 0&&(l.map=e[0]),e[1]!==void 0&&(l.layer=e[1]),t=new zP({props:l}),Ft.push(()=>Jt(t,"map",u)),Ft.push(()=>Jt(t,"layer",c)),{c(){Ut(t.$$.fragment)},l(h){Yt(t.$$.fragment,h)},m(h,v){qt(t,h,v),o=!0},p(h,v){const w={};!r&&v&1&&(r=!0,w.map=h[0],er(()=>r=!1)),!n&&v&2&&(n=!0,w.layer=h[1],er(()=>n=!1)),t.$set(w)},i(h){o||(Xe(t.$$.fragment,h),o=!0)},o(h){it(t.$$.fragment,h),o=!1},d(h){Vt(t,h)}}}function ZP(e){let t,r,n,o,u,c,l,h,v,w,E,T;return t=new Wi({props:{title:"Heatmap",help:{layerType:"heatmap"},$$slots:{default:[qP]},$$scope:{ctx:e}}}),n=new Wi({props:{title:"Opacity",help:{type:"paint",layerType:"line",property:"line-opacity"},$$slots:{default:[VP]},$$scope:{ctx:e}}}),u=new Wi({props:{title:"Line color",help:{type:"paint",layerType:"line",property:"line-color"},$$slots:{default:[$P]},$$scope:{ctx:e}}}),l=new Wi({props:{title:"Line width",help:{type:"paint",layerType:"line",property:"line-width"},$$slots:{default:[GP]},$$scope:{ctx:e}}}),v=new Wi({props:{title:"Line pattern",help:{type:"paint",layerType:"line",property:"line-dasharray"},$$slots:{default:[HP]},$$scope:{ctx:e}}}),E=new Wi({props:{title:"Line blur",help:{type:"paint",layerType:"line",property:"line-blur"},$$slots:{default:[WP]},$$scope:{ctx:e}}}),{c(){Ut(t.$$.fragment),r=mr(),Ut(n.$$.fragment),o=mr(),Ut(u.$$.fragment),c=mr(),Ut(l.$$.fragment),h=mr(),Ut(v.$$.fragment),w=mr(),Ut(E.$$.fragment)},l(I){Yt(t.$$.fragment,I),r=gr(I),Yt(n.$$.fragment,I),o=gr(I),Yt(u.$$.fragment,I),c=gr(I),Yt(l.$$.fragment,I),h=gr(I),Yt(v.$$.fragment,I),w=gr(I),Yt(E.$$.fragment,I)},m(I,F){qt(t,I,F),Lt(I,r,F),qt(n,I,F),Lt(I,o,F),qt(u,I,F),Lt(I,c,F),qt(l,I,F),Lt(I,h,F),qt(v,I,F),Lt(I,w,F),qt(E,I,F),T=!0},p(I,[F]){const U={};F&16387&&(U.$$scope={dirty:F,ctx:I}),t.$set(U);const G={};F&16387&&(G.$$scope={dirty:F,ctx:I}),n.$set(G);const H={};F&16387&&(H.$$scope={dirty:F,ctx:I}),u.$set(H);const X={};F&16387&&(X.$$scope={dirty:F,ctx:I}),l.$set(X);const ee={};F&16387&&(ee.$$scope={dirty:F,ctx:I}),v.$set(ee);const K={};F&16387&&(K.$$scope={dirty:F,ctx:I}),E.$set(K)},i(I){T||(Xe(t.$$.fragment,I),Xe(n.$$.fragment,I),Xe(u.$$.fragment,I),Xe(l.$$.fragment,I),Xe(v.$$.fragment,I),Xe(E.$$.fragment,I),T=!0)},o(I){it(t.$$.fragment,I),it(n.$$.fragment,I),it(u.$$.fragment,I),it(l.$$.fragment,I),it(v.$$.fragment,I),it(E.$$.fragment,I),T=!1},d(I){Vt(t,I),I&&ge(r),Vt(n,I),I&&ge(o),Vt(u,I),I&&ge(c),Vt(l,I),I&&ge(h),Vt(v,I),I&&ge(w),Vt(E,I)}}}function XP(e,t,r){let{map:n}=t,{layer:o}=t;function u(H){n=H,r(0,n)}function c(H){o=H,r(1,o)}function l(H){n=H,r(0,n)}function h(H){o=H,r(1,o)}function v(H){n=H,r(0,n)}function w(H){o=H,r(1,o)}function E(H){n=H,r(0,n)}function T(H){o=H,r(1,o)}function I(H){n=H,r(0,n)}function F(H){o=H,r(1,o)}function U(H){n=H,r(0,n)}function G(H){o=H,r(1,o)}return e.$$set=H=>{"map"in H&&r(0,n=H.map),"layer"in H&&r(1,o=H.layer)},[n,o,u,c,l,h,v,w,E,T,I,F,U,G]}class YP extends Dn{constructor(t){super(),zn(this,t,XP,ZP,Ln,{map:0,layer:1})}}function JP(e){let t,r,n;function o(c){e[3](c)}let u={min:0,max:20,step:1,unit:"px"};return e[0]!==void 0&&(u.value=e[0]),t=new ns({props:u}),Ft.push(()=>Jt(t,"value",o)),{c(){Ut(t.$$.fragment)},l(c){Yt(t.$$.fragment,c)},m(c,l){qt(t,c,l),n=!0},p(c,[l]){const h={};!r&&l&1&&(r=!0,h.value=c[0],er(()=>r=!1)),t.$set(h)},i(c){n||(Xe(t.$$.fragment,c),n=!0)},o(c){it(t.$$.fragment,c),n=!1},d(c){Vt(t,c)}}}function KP(e,t,r){let{map:n}=t,{layer:o}=t,c=(()=>{let v=n.getPaintProperty(o.id,"circle-radius");return v||(v=5),v})();const l=()=>{n==null||n.setPaintProperty(o.id,"circle-radius",c)};function h(v){c=v,r(0,c)}return e.$$set=v=>{"map"in v&&r(1,n=v.map),"layer"in v&&r(2,o=v.layer)},e.$$.update=()=>{e.$$.dirty&1&&l()},[c,n,o,h]}class QP extends Dn{constructor(t){super(),zn(this,t,KP,JP,Ln,{map:1,layer:2})}}function eM(e){let t,r,n;function o(c){e[3](c)}let u={min:0,max:20,step:1,unit:"px"};return e[0]!==void 0&&(u.value=e[0]),t=new ns({props:u}),Ft.push(()=>Jt(t,"value",o)),{c(){Ut(t.$$.fragment)},l(c){Yt(t.$$.fragment,c)},m(c,l){qt(t,c,l),n=!0},p(c,[l]){const h={};!r&&l&1&&(r=!0,h.value=c[0],er(()=>r=!1)),t.$set(h)},i(c){n||(Xe(t.$$.fragment,c),n=!0)},o(c){it(t.$$.fragment,c),n=!1},d(c){Vt(t,c)}}}function tM(e,t,r){let{map:n}=t,{layer:o}=t,c=(()=>{let v=n.getPaintProperty(o.id,"circle-stroke-width");return v||(v=0),v})();const l=()=>{n==null||n.setPaintProperty(o.id,"circle-stroke-width",c)};function h(v){c=v,r(0,c)}return e.$$set=v=>{"map"in v&&r(1,n=v.map),"layer"in v&&r(2,o=v.layer)},e.$$.update=()=>{e.$$.dirty&1&&l()},[c,n,o,h]}class rM extends Dn{constructor(t){super(),zn(this,t,tM,eM,Ln,{map:1,layer:2})}}function nM(e){let t,r,n,o;function u(h){e[2](h)}function c(h){e[3](h)}let l={};return e[0]!==void 0&&(l.map=e[0]),e[1]!==void 0&&(l.layer=e[1]),t=new Bf({props:l}),Ft.push(()=>Jt(t,"map",u)),Ft.push(()=>Jt(t,"layer",c)),{c(){Ut(t.$$.fragment)},l(h){Yt(t.$$.fragment,h)},m(h,v){qt(t,h,v),o=!0},p(h,v){const w={};!r&&v&1&&(r=!0,w.map=h[0],er(()=>r=!1)),!n&&v&2&&(n=!0,w.layer=h[1],er(()=>n=!1)),t.$set(w)},i(h){o||(Xe(t.$$.fragment,h),o=!0)},o(h){it(t.$$.fragment,h),o=!1},d(h){Vt(t,h)}}}function iM(e){let t,r,n,o;function u(h){e[4](h)}function c(h){e[5](h)}let l={};return e[0]!==void 0&&(l.map=e[0]),e[1]!==void 0&&(l.layer=e[1]),t=new QP({props:l}),Ft.push(()=>Jt(t,"map",u)),Ft.push(()=>Jt(t,"layer",c)),{c(){Ut(t.$$.fragment)},l(h){Yt(t.$$.fragment,h)},m(h,v){qt(t,h,v),o=!0},p(h,v){const w={};!r&&v&1&&(r=!0,w.map=h[0],er(()=>r=!1)),!n&&v&2&&(n=!0,w.layer=h[1],er(()=>n=!1)),t.$set(w)},i(h){o||(Xe(t.$$.fragment,h),o=!0)},o(h){it(t.$$.fragment,h),o=!1},d(h){Vt(t,h)}}}function oM(e){let t,r,n,o;function u(h){e[6](h)}function c(h){e[7](h)}let l={propertyName:"circle-color"};return e[0]!==void 0&&(l.map=e[0]),e[1]!==void 0&&(l.layer=e[1]),t=new sc({props:l}),Ft.push(()=>Jt(t,"map",u)),Ft.push(()=>Jt(t,"layer",c)),{c(){Ut(t.$$.fragment)},l(h){Yt(t.$$.fragment,h)},m(h,v){qt(t,h,v),o=!0},p(h,v){const w={};!r&&v&1&&(r=!0,w.map=h[0],er(()=>r=!1)),!n&&v&2&&(n=!0,w.layer=h[1],er(()=>n=!1)),t.$set(w)},i(h){o||(Xe(t.$$.fragment,h),o=!0)},o(h){it(t.$$.fragment,h),o=!1},d(h){Vt(t,h)}}}function aM(e){let t,r,n,o;function u(h){e[8](h)}function c(h){e[9](h)}let l={};return e[0]!==void 0&&(l.map=e[0]),e[1]!==void 0&&(l.layer=e[1]),t=new rM({props:l}),Ft.push(()=>Jt(t,"map",u)),Ft.push(()=>Jt(t,"layer",c)),{c(){Ut(t.$$.fragment)},l(h){Yt(t.$$.fragment,h)},m(h,v){qt(t,h,v),o=!0},p(h,v){const w={};!r&&v&1&&(r=!0,w.map=h[0],er(()=>r=!1)),!n&&v&2&&(n=!0,w.layer=h[1],er(()=>n=!1)),t.$set(w)},i(h){o||(Xe(t.$$.fragment,h),o=!0)},o(h){it(t.$$.fragment,h),o=!1},d(h){Vt(t,h)}}}function sM(e){let t,r,n,o;function u(h){e[10](h)}function c(h){e[11](h)}let l={propertyName:"circle-stroke-color"};return e[0]!==void 0&&(l.map=e[0]),e[1]!==void 0&&(l.layer=e[1]),t=new sc({props:l}),Ft.push(()=>Jt(t,"map",u)),Ft.push(()=>Jt(t,"layer",c)),{c(){Ut(t.$$.fragment)},l(h){Yt(t.$$.fragment,h)},m(h,v){qt(t,h,v),o=!0},p(h,v){const w={};!r&&v&1&&(r=!0,w.map=h[0],er(()=>r=!1)),!n&&v&2&&(n=!0,w.layer=h[1],er(()=>n=!1)),t.$set(w)},i(h){o||(Xe(t.$$.fragment,h),o=!0)},o(h){it(t.$$.fragment,h),o=!1},d(h){Vt(t,h)}}}function lM(e){let t,r,n,o,u,c,l,h,v,w;return t=new Wi({props:{title:"Opacity",help:{type:"paint",layerType:"circle",property:"circle-opacity"},$$slots:{default:[nM]},$$scope:{ctx:e}}}),n=new Wi({props:{title:"Circle radius",help:{type:"paint",layerType:"circle",property:"circle-radius"},$$slots:{default:[iM]},$$scope:{ctx:e}}}),u=new Wi({props:{title:"Circle color",help:{type:"paint",layerType:"circle",property:"circle-color"},$$slots:{default:[oM]},$$scope:{ctx:e}}}),l=new Wi({props:{title:"Circle stroke width",help:{type:"paint",layerType:"circle",property:"circle-stroke-width"},$$slots:{default:[aM]},$$scope:{ctx:e}}}),v=new Wi({props:{title:"Circle stroke color",help:{type:"paint",layerType:"circle",property:"circle-stroke-color"},$$slots:{default:[sM]},$$scope:{ctx:e}}}),{c(){Ut(t.$$.fragment),r=mr(),Ut(n.$$.fragment),o=mr(),Ut(u.$$.fragment),c=mr(),Ut(l.$$.fragment),h=mr(),Ut(v.$$.fragment)},l(E){Yt(t.$$.fragment,E),r=gr(E),Yt(n.$$.fragment,E),o=gr(E),Yt(u.$$.fragment,E),c=gr(E),Yt(l.$$.fragment,E),h=gr(E),Yt(v.$$.fragment,E)},m(E,T){qt(t,E,T),Lt(E,r,T),qt(n,E,T),Lt(E,o,T),qt(u,E,T),Lt(E,c,T),qt(l,E,T),Lt(E,h,T),qt(v,E,T),w=!0},p(E,[T]){const I={};T&4099&&(I.$$scope={dirty:T,ctx:E}),t.$set(I);const F={};T&4099&&(F.$$scope={dirty:T,ctx:E}),n.$set(F);const U={};T&4099&&(U.$$scope={dirty:T,ctx:E}),u.$set(U);const G={};T&4099&&(G.$$scope={dirty:T,ctx:E}),l.$set(G);const H={};T&4099&&(H.$$scope={dirty:T,ctx:E}),v.$set(H)},i(E){w||(Xe(t.$$.fragment,E),Xe(n.$$.fragment,E),Xe(u.$$.fragment,E),Xe(l.$$.fragment,E),Xe(v.$$.fragment,E),w=!0)},o(E){it(t.$$.fragment,E),it(n.$$.fragment,E),it(u.$$.fragment,E),it(l.$$.fragment,E),it(v.$$.fragment,E),w=!1},d(E){Vt(t,E),E&&ge(r),Vt(n,E),E&&ge(o),Vt(u,E),E&&ge(c),Vt(l,E),E&&ge(h),Vt(v,E)}}}function uM(e,t,r){let{map:n}=t,{layer:o}=t;function u(U){n=U,r(0,n)}function c(U){o=U,r(1,o)}function l(U){n=U,r(0,n)}function h(U){o=U,r(1,o)}function v(U){n=U,r(0,n)}function w(U){o=U,r(1,o)}function E(U){n=U,r(0,n)}function T(U){o=U,r(1,o)}function I(U){n=U,r(0,n)}function F(U){o=U,r(1,o)}return e.$$set=U=>{"map"in U&&r(0,n=U.map),"layer"in U&&r(1,o=U.layer)},[n,o,u,c,l,h,v,w,E,T,I,F]}class cM extends Dn{constructor(t){super(),zn(this,t,uM,lM,Ln,{map:0,layer:1})}}function fM(e){let t,r,n;function o(c){e[3](c)}let u={min:0,max:10,step:1,unit:"px"};return e[0]!==void 0&&(u.value=e[0]),t=new ns({props:u}),Ft.push(()=>Jt(t,"value",o)),{c(){Ut(t.$$.fragment)},l(c){Yt(t.$$.fragment,c)},m(c,l){qt(t,c,l),n=!0},p(c,[l]){const h={};!r&&l&1&&(r=!0,h.value=c[0],er(()=>r=!1)),t.$set(h)},i(c){n||(Xe(t.$$.fragment,c),n=!0)},o(c){it(t.$$.fragment,c),n=!1},d(c){Vt(t,c)}}}function hM(e,t,r){let{map:n}=t,{layer:o}=t,c=(()=>{let v=n.getPaintProperty(o.id,"icon-halo-width");return v||(v=0),v})();const l=()=>{n==null||n.setPaintProperty(o.id,"icon-halo-width",c)};function h(v){c=v,r(0,c)}return e.$$set=v=>{"map"in v&&r(1,n=v.map),"layer"in v&&r(2,o=v.layer)},e.$$.update=()=>{e.$$.dirty&1&&l()},[c,n,o,h]}class pM extends Dn{constructor(t){super(),zn(this,t,hM,fM,Ln,{map:1,layer:2})}}function dM(e){let t,r,n;function o(c){e[3](c)}let u={min:0,max:10,step:1,unit:"px"};return e[0]!==void 0&&(u.value=e[0]),t=new ns({props:u}),Ft.push(()=>Jt(t,"value",o)),{c(){Ut(t.$$.fragment)},l(c){Yt(t.$$.fragment,c)},m(c,l){qt(t,c,l),n=!0},p(c,[l]){const h={};!r&&l&1&&(r=!0,h.value=c[0],er(()=>r=!1)),t.$set(h)},i(c){n||(Xe(t.$$.fragment,c),n=!0)},o(c){it(t.$$.fragment,c),n=!1},d(c){Vt(t,c)}}}function mM(e,t,r){let{map:n}=t,{layer:o}=t,c=(()=>{let v=n.getPaintProperty(o.id,"icon-halo-blur");return v||(v=0),v})();const l=()=>{n==null||n.setPaintProperty(o.id,"icon-halo-blur",c)};function h(v){c=v,r(0,c)}return e.$$set=v=>{"map"in v&&r(1,n=v.map),"layer"in v&&r(2,o=v.layer)},e.$$.update=()=>{e.$$.dirty&1&&l()},[c,n,o,h]}class gM extends Dn{constructor(t){super(),zn(this,t,mM,dM,Ln,{map:1,layer:2})}}function yM(e){let t,r,n;function o(c){e[3](c)}let u={min:0,max:10,step:.1,unit:"px"};return e[0]!==void 0&&(u.value=e[0]),t=new ns({props:u}),Ft.push(()=>Jt(t,"value",o)),{c(){Ut(t.$$.fragment)},l(c){Yt(t.$$.fragment,c)},m(c,l){qt(t,c,l),n=!0},p(c,[l]){const h={};!r&&l&1&&(r=!0,h.value=c[0],er(()=>r=!1)),t.$set(h)},i(c){n||(Xe(t.$$.fragment,c),n=!0)},o(c){it(t.$$.fragment,c),n=!1},d(c){Vt(t,c)}}}function vM(e,t,r){let{map:n}=t,{layer:o}=t,c=(()=>{let v=n.getLayoutProperty(o.id,"icon-size");return v||(v=1),v})();const l=()=>{c&&(n==null||n.setLayoutProperty(o.id,"icon-size",c))};function h(v){c=v,r(0,c)}return e.$$set=v=>{"map"in v&&r(1,n=v.map),"layer"in v&&r(2,o=v.layer)},e.$$.update=()=>{e.$$.dirty&1&&l()},[c,n,o,h]}class _M extends Dn{constructor(t){super(),zn(this,t,vM,yM,Ln,{map:1,layer:2})}}function bM(e){let t,r,n;function o(c){e[3](c)}let u={min:0,max:10,step:1,unit:"px"};return e[0]!==void 0&&(u.value=e[0]),t=new ns({props:u}),Ft.push(()=>Jt(t,"value",o)),{c(){Ut(t.$$.fragment)},l(c){Yt(t.$$.fragment,c)},m(c,l){qt(t,c,l),n=!0},p(c,[l]){const h={};!r&&l&1&&(r=!0,h.value=c[0],er(()=>r=!1)),t.$set(h)},i(c){n||(Xe(t.$$.fragment,c),n=!0)},o(c){it(t.$$.fragment,c),n=!1},d(c){Vt(t,c)}}}function wM(e,t,r){let{map:n}=t,{layer:o}=t,c=(()=>{let v=n.getPaintProperty(o.id,"text-halo-width");return v||(v=0),v})();const l=()=>{n==null||n.setPaintProperty(o.id,"text-halo-width",c)};function h(v){c=v,r(0,c)}return e.$$set=v=>{"map"in v&&r(1,n=v.map),"layer"in v&&r(2,o=v.layer)},e.$$.update=()=>{e.$$.dirty&1&&l()},[c,n,o,h]}class xM extends Dn{constructor(t){super(),zn(this,t,wM,bM,Ln,{map:1,layer:2})}}function kM(e){let t,r,n;function o(c){e[3](c)}let u={min:0,max:10,step:1,unit:"px"};return e[0]!==void 0&&(u.value=e[0]),t=new ns({props:u}),Ft.push(()=>Jt(t,"value",o)),{c(){Ut(t.$$.fragment)},l(c){Yt(t.$$.fragment,c)},m(c,l){qt(t,c,l),n=!0},p(c,[l]){const h={};!r&&l&1&&(r=!0,h.value=c[0],er(()=>r=!1)),t.$set(h)},i(c){n||(Xe(t.$$.fragment,c),n=!0)},o(c){it(t.$$.fragment,c),n=!1},d(c){Vt(t,c)}}}function AM(e,t,r){let{map:n}=t,{layer:o}=t,c=(()=>{let v=n.getPaintProperty(o.id,"text-halo-blur");return v||(v=0),v})();const l=()=>{n==null||n.setPaintProperty(o.id,"text-halo-blur",c)};function h(v){c=v,r(0,c)}return e.$$set=v=>{"map"in v&&r(1,n=v.map),"layer"in v&&r(2,o=v.layer)},e.$$.update=()=>{e.$$.dirty&1&&l()},[c,n,o,h]}class EM extends Dn{constructor(t){super(),zn(this,t,AM,kM,Ln,{map:1,layer:2})}}function SM(e){let t,r,n;function o(c){e[3](c)}let u={min:0,max:64,step:.1,unit:"px"};return e[0]!==void 0&&(u.value=e[0]),t=new ns({props:u}),Ft.push(()=>Jt(t,"value",o)),{c(){Ut(t.$$.fragment)},l(c){Yt(t.$$.fragment,c)},m(c,l){qt(t,c,l),n=!0},p(c,[l]){const h={};!r&&l&1&&(r=!0,h.value=c[0],er(()=>r=!1)),t.$set(h)},i(c){n||(Xe(t.$$.fragment,c),n=!0)},o(c){it(t.$$.fragment,c),n=!1},d(c){Vt(t,c)}}}function CM(e,t,r){let{map:n}=t,{layer:o}=t,c=(()=>{let v=n.getLayoutProperty(o.id,"text-size");return v||(v=16),v})();const l=()=>{c&&(n==null||n.setLayoutProperty(o.id,"text-size",c))};function h(v){c=v,r(0,c)}return e.$$set=v=>{"map"in v&&r(1,n=v.map),"layer"in v&&r(2,o=v.layer)},e.$$.update=()=>{e.$$.dirty&1&&l()},[c,n,o,h]}class IM extends Dn{constructor(t){super(),zn(this,t,CM,SM,Ln,{map:1,layer:2})}}function TM(e){let t,r,n;function o(c){e[3](c)}let u={min:0,max:359,step:1,unit:""};return e[0]!==void 0&&(u.value=e[0]),t=new ns({props:u}),Ft.push(()=>Jt(t,"value",o)),{c(){Ut(t.$$.fragment)},l(c){Yt(t.$$.fragment,c)},m(c,l){qt(t,c,l),n=!0},p(c,[l]){const h={};!r&&l&1&&(r=!0,h.value=c[0],er(()=>r=!1)),t.$set(h)},i(c){n||(Xe(t.$$.fragment,c),n=!0)},o(c){it(t.$$.fragment,c),n=!1},d(c){Vt(t,c)}}}function LM(e,t,r){let{map:n}=t,{layer:o}=t,c=(()=>{let v=n.getLayoutProperty(o.id,"text-rotate");return v||(v=0),v})();const l=()=>{n==null||n.setLayoutProperty(o.id,"text-rotate",c)};function h(v){c=v,r(0,c)}return e.$$set=v=>{"map"in v&&r(1,n=v.map),"layer"in v&&r(2,o=v.layer)},e.$$.update=()=>{e.$$.dirty&1&&l()},[c,n,o,h]}class PM extends Dn{constructor(t){super(),zn(this,t,LM,TM,Ln,{map:1,layer:2})}}function MM(e){let t,r,n,o;function u(h){e[4](h)}function c(h){e[5](h)}let l={};return e[1]!==void 0&&(l.options=e[1]),e[0]!==void 0&&(l.selectedValue=e[0]),t=new g2({props:l}),Ft.push(()=>Jt(t,"options",u)),Ft.push(()=>Jt(t,"selectedValue",c)),{c(){Ut(t.$$.fragment)},l(h){Yt(t.$$.fragment,h)},m(h,v){qt(t,h,v),o=!0},p(h,[v]){const w={};!r&&v&2&&(r=!0,w.options=h[1],er(()=>r=!1)),!n&&v&1&&(n=!0,w.selectedValue=h[0],er(()=>n=!1)),t.$set(w)},i(h){o||(Xe(t.$$.fragment,h),o=!0)},o(h){it(t.$$.fragment,h),o=!1},d(h){Vt(t,h)}}}function DM(e,t,r){let{map:n}=t,{layer:o}=t,u=[{title:"Never",value:"never"},{title:"always",value:"always"},{title:"Cooperative",value:"cooperative"}],l=(()=>{let E=n.getLayoutProperty(o.id,"icon-overlap");return E||(E=u[0].value),E})();const h=()=>{n==null||n.setLayoutProperty(o.id,"icon-overlap",l)};function v(E){u=E,r(1,u)}function w(E){l=E,r(0,l)}return e.$$set=E=>{"map"in E&&r(2,n=E.map),"layer"in E&&r(3,o=E.layer)},e.$$.update=()=>{e.$$.dirty&1&&h()},[l,u,n,o,v,w]}class zM extends Dn{constructor(t){super(),zn(this,t,DM,MM,Ln,{map:2,layer:3})}}function NM(e){let t,r,n,o;function u(h){e[5](h)}function c(h){e[6](h)}let l={};return e[0]!==void 0&&(l.map=e[0]),e[1]!==void 0&&(l.layer=e[1]),t=new r8({props:l}),Ft.push(()=>Jt(t,"map",u)),Ft.push(()=>Jt(t,"layer",c)),{c(){Ut(t.$$.fragment)},l(h){Yt(t.$$.fragment,h)},m(h,v){qt(t,h,v),o=!0},p(h,v){const w={};!r&&v[0]&1&&(r=!0,w.map=h[0],er(()=>r=!1)),!n&&v[0]&2&&(n=!0,w.layer=h[1],er(()=>n=!1)),t.$set(w)},i(h){o||(Xe(t.$$.fragment,h),o=!0)},o(h){it(t.$$.fragment,h),o=!1},d(h){Vt(t,h)}}}function RM(e){let t,r,n,o;function u(h){e[7](h)}function c(h){e[8](h)}let l={};return e[0]!==void 0&&(l.map=e[0]),e[1]!==void 0&&(l.layer=e[1]),t=new Bf({props:l}),Ft.push(()=>Jt(t,"map",u)),Ft.push(()=>Jt(t,"layer",c)),{c(){Ut(t.$$.fragment)},l(h){Yt(t.$$.fragment,h)},m(h,v){qt(t,h,v),o=!0},p(h,v){const w={};!r&&v[0]&1&&(r=!0,w.map=h[0],er(()=>r=!1)),!n&&v[0]&2&&(n=!0,w.layer=h[1],er(()=>n=!1)),t.$set(w)},i(h){o||(Xe(t.$$.fragment,h),o=!0)},o(h){it(t.$$.fragment,h),o=!1},d(h){Vt(t,h)}}}function OM(e){var v;let t,r,n,o,u=(v=e[2])==null?void 0:v.isSdf(e[1]),c,l;t=new Wi({props:{title:"Icon size",help:{type:"layout",layerType:"symbol",property:"icon-size"},$$slots:{default:[FM]},$$scope:{ctx:e}}}),n=new Wi({props:{title:"Icon overlap",help:{type:"layout",layerType:"symbol",property:"icon-overlap"},$$slots:{default:[BM]},$$scope:{ctx:e}}});let h=u&&n4(e);return{c(){Ut(t.$$.fragment),r=mr(),Ut(n.$$.fragment),o=mr(),h&&h.c(),c=ao()},l(w){Yt(t.$$.fragment,w),r=gr(w),Yt(n.$$.fragment,w),o=gr(w),h&&h.l(w),c=ao()},m(w,E){qt(t,w,E),Lt(w,r,E),qt(n,w,E),Lt(w,o,E),h&&h.m(w,E),Lt(w,c,E),l=!0},p(w,E){var F;const T={};E[0]&3|E[1]&4&&(T.$$scope={dirty:E,ctx:w}),t.$set(T);const I={};E[0]&3|E[1]&4&&(I.$$scope={dirty:E,ctx:w}),n.$set(I),E[0]&6&&(u=(F=w[2])==null?void 0:F.isSdf(w[1])),u?h?(h.p(w,E),E[0]&6&&Xe(h,1)):(h=n4(w),h.c(),Xe(h,1),h.m(c.parentNode,c)):h&&(ji(),it(h,1,1,()=>{h=null}),Ui())},i(w){l||(Xe(t.$$.fragment,w),Xe(n.$$.fragment,w),Xe(h),l=!0)},o(w){it(t.$$.fragment,w),it(n.$$.fragment,w),it(h),l=!1},d(w){Vt(t,w),w&&ge(r),Vt(n,w),w&&ge(o),h&&h.d(w),w&&ge(c)}}}function FM(e){let t,r,n,o;function u(h){e[9](h)}function c(h){e[10](h)}let l={};return e[0]!==void 0&&(l.map=e[0]),e[1]!==void 0&&(l.layer=e[1]),t=new _M({props:l}),Ft.push(()=>Jt(t,"map",u)),Ft.push(()=>Jt(t,"layer",c)),{c(){Ut(t.$$.fragment)},l(h){Yt(t.$$.fragment,h)},m(h,v){qt(t,h,v),o=!0},p(h,v){const w={};!r&&v[0]&1&&(r=!0,w.map=h[0],er(()=>r=!1)),!n&&v[0]&2&&(n=!0,w.layer=h[1],er(()=>n=!1)),t.$set(w)},i(h){o||(Xe(t.$$.fragment,h),o=!0)},o(h){it(t.$$.fragment,h),o=!1},d(h){Vt(t,h)}}}function BM(e){let t,r,n,o;function u(h){e[11](h)}function c(h){e[12](h)}let l={};return e[0]!==void 0&&(l.map=e[0]),e[1]!==void 0&&(l.layer=e[1]),t=new zM({props:l}),Ft.push(()=>Jt(t,"map",u)),Ft.push(()=>Jt(t,"layer",c)),{c(){Ut(t.$$.fragment)},l(h){Yt(t.$$.fragment,h)},m(h,v){qt(t,h,v),o=!0},p(h,v){const w={};!r&&v[0]&1&&(r=!0,w.map=h[0],er(()=>r=!1)),!n&&v[0]&2&&(n=!0,w.layer=h[1],er(()=>n=!1)),t.$set(w)},i(h){o||(Xe(t.$$.fragment,h),o=!0)},o(h){it(t.$$.fragment,h),o=!1},d(h){Vt(t,h)}}}function n4(e){let t,r,n,o,u,c,l,h;return t=new Wi({props:{title:"Icon color",help:{type:"paint",layerType:"symbol",property:"icon-color"},$$slots:{default:[jM]},$$scope:{ctx:e}}}),n=new Wi({props:{title:"Icon halo color",help:{type:"paint",layerType:"symbol",property:"icon-halo-color"},$$slots:{default:[UM]},$$scope:{ctx:e}}}),u=new Wi({props:{title:"Icon halo width",help:{type:"paint",layerType:"symbol",property:"icon-halo-width"},$$slots:{default:[qM]},$$scope:{ctx:e}}}),l=new Wi({props:{title:"Icon halo blur",help:{type:"paint",layerType:"symbol",property:"icon-halo-blur"},$$slots:{default:[VM]},$$scope:{ctx:e}}}),{c(){Ut(t.$$.fragment),r=mr(),Ut(n.$$.fragment),o=mr(),Ut(u.$$.fragment),c=mr(),Ut(l.$$.fragment)},l(v){Yt(t.$$.fragment,v),r=gr(v),Yt(n.$$.fragment,v),o=gr(v),Yt(u.$$.fragment,v),c=gr(v),Yt(l.$$.fragment,v)},m(v,w){qt(t,v,w),Lt(v,r,w),qt(n,v,w),Lt(v,o,w),qt(u,v,w),Lt(v,c,w),qt(l,v,w),h=!0},p(v,w){const E={};w[0]&3|w[1]&4&&(E.$$scope={dirty:w,ctx:v}),t.$set(E);const T={};w[0]&3|w[1]&4&&(T.$$scope={dirty:w,ctx:v}),n.$set(T);const I={};w[0]&3|w[1]&4&&(I.$$scope={dirty:w,ctx:v}),u.$set(I);const F={};w[0]&3|w[1]&4&&(F.$$scope={dirty:w,ctx:v}),l.$set(F)},i(v){h||(Xe(t.$$.fragment,v),Xe(n.$$.fragment,v),Xe(u.$$.fragment,v),Xe(l.$$.fragment,v),h=!0)},o(v){it(t.$$.fragment,v),it(n.$$.fragment,v),it(u.$$.fragment,v),it(l.$$.fragment,v),h=!1},d(v){Vt(t,v),v&&ge(r),Vt(n,v),v&&ge(o),Vt(u,v),v&&ge(c),Vt(l,v)}}}function jM(e){let t,r,n,o;function u(h){e[13](h)}function c(h){e[14](h)}let l={propertyName:"icon-color"};return e[0]!==void 0&&(l.map=e[0]),e[1]!==void 0&&(l.layer=e[1]),t=new sc({props:l}),Ft.push(()=>Jt(t,"map",u)),Ft.push(()=>Jt(t,"layer",c)),{c(){Ut(t.$$.fragment)},l(h){Yt(t.$$.fragment,h)},m(h,v){qt(t,h,v),o=!0},p(h,v){const w={};!r&&v[0]&1&&(r=!0,w.map=h[0],er(()=>r=!1)),!n&&v[0]&2&&(n=!0,w.layer=h[1],er(()=>n=!1)),t.$set(w)},i(h){o||(Xe(t.$$.fragment,h),o=!0)},o(h){it(t.$$.fragment,h),o=!1},d(h){Vt(t,h)}}}function UM(e){let t,r,n,o;function u(h){e[15](h)}function c(h){e[16](h)}let l={propertyName:"icon-halo-color"};return e[0]!==void 0&&(l.map=e[0]),e[1]!==void 0&&(l.layer=e[1]),t=new sc({props:l}),Ft.push(()=>Jt(t,"map",u)),Ft.push(()=>Jt(t,"layer",c)),{c(){Ut(t.$$.fragment)},l(h){Yt(t.$$.fragment,h)},m(h,v){qt(t,h,v),o=!0},p(h,v){const w={};!r&&v[0]&1&&(r=!0,w.map=h[0],er(()=>r=!1)),!n&&v[0]&2&&(n=!0,w.layer=h[1],er(()=>n=!1)),t.$set(w)},i(h){o||(Xe(t.$$.fragment,h),o=!0)},o(h){it(t.$$.fragment,h),o=!1},d(h){Vt(t,h)}}}function qM(e){let t,r,n,o;function u(h){e[17](h)}function c(h){e[18](h)}let l={};return e[0]!==void 0&&(l.map=e[0]),e[1]!==void 0&&(l.layer=e[1]),t=new pM({props:l}),Ft.push(()=>Jt(t,"map",u)),Ft.push(()=>Jt(t,"layer",c)),{c(){Ut(t.$$.fragment)},l(h){Yt(t.$$.fragment,h)},m(h,v){qt(t,h,v),o=!0},p(h,v){const w={};!r&&v[0]&1&&(r=!0,w.map=h[0],er(()=>r=!1)),!n&&v[0]&2&&(n=!0,w.layer=h[1],er(()=>n=!1)),t.$set(w)},i(h){o||(Xe(t.$$.fragment,h),o=!0)},o(h){it(t.$$.fragment,h),o=!1},d(h){Vt(t,h)}}}function VM(e){let t,r,n,o;function u(h){e[19](h)}function c(h){e[20](h)}let l={};return e[0]!==void 0&&(l.map=e[0]),e[1]!==void 0&&(l.layer=e[1]),t=new gM({props:l}),Ft.push(()=>Jt(t,"map",u)),Ft.push(()=>Jt(t,"layer",c)),{c(){Ut(t.$$.fragment)},l(h){Yt(t.$$.fragment,h)},m(h,v){qt(t,h,v),o=!0},p(h,v){const w={};!r&&v[0]&1&&(r=!0,w.map=h[0],er(()=>r=!1)),!n&&v[0]&2&&(n=!0,w.layer=h[1],er(()=>n=!1)),t.$set(w)},i(h){o||(Xe(t.$$.fragment,h),o=!0)},o(h){it(t.$$.fragment,h),o=!1},d(h){Vt(t,h)}}}function $M(e){let t,r,n,o,u,c,l,h,v,w,E,T;return t=new Wi({props:{title:"Text size",help:{type:"layout",layerType:"symbol",property:"text-size"},$$slots:{default:[GM]},$$scope:{ctx:e}}}),n=new Wi({props:{title:"Text color",help:{type:"paint",layerType:"symbol",property:"text-color"},$$slots:{default:[HM]},$$scope:{ctx:e}}}),u=new Wi({props:{title:"Text rotate",help:{type:"layout",layerType:"symbol",property:"text-rotate"},$$slots:{default:[WM]},$$scope:{ctx:e}}}),l=new Wi({props:{title:"Text halo color",help:{type:"paint",layerType:"symbol",property:"text-halo-color"},$$slots:{default:[ZM]},$$scope:{ctx:e}}}),v=new Wi({props:{title:"Text halo width",help:{type:"paint",layerType:"symbol",property:"text-halo-width"},$$slots:{default:[XM]},$$scope:{ctx:e}}}),E=new Wi({props:{title:"Text halo blur",help:{type:"paint",layerType:"symbol",property:"text-halo-blur"},$$slots:{default:[YM]},$$scope:{ctx:e}}}),{c(){Ut(t.$$.fragment),r=mr(),Ut(n.$$.fragment),o=mr(),Ut(u.$$.fragment),c=mr(),Ut(l.$$.fragment),h=mr(),Ut(v.$$.fragment),w=mr(),Ut(E.$$.fragment)},l(I){Yt(t.$$.fragment,I),r=gr(I),Yt(n.$$.fragment,I),o=gr(I),Yt(u.$$.fragment,I),c=gr(I),Yt(l.$$.fragment,I),h=gr(I),Yt(v.$$.fragment,I),w=gr(I),Yt(E.$$.fragment,I)},m(I,F){qt(t,I,F),Lt(I,r,F),qt(n,I,F),Lt(I,o,F),qt(u,I,F),Lt(I,c,F),qt(l,I,F),Lt(I,h,F),qt(v,I,F),Lt(I,w,F),qt(E,I,F),T=!0},p(I,F){const U={};F[0]&3|F[1]&4&&(U.$$scope={dirty:F,ctx:I}),t.$set(U);const G={};F[0]&3|F[1]&4&&(G.$$scope={dirty:F,ctx:I}),n.$set(G);const H={};F[0]&3|F[1]&4&&(H.$$scope={dirty:F,ctx:I}),u.$set(H);const X={};F[0]&3|F[1]&4&&(X.$$scope={dirty:F,ctx:I}),l.$set(X);const ee={};F[0]&3|F[1]&4&&(ee.$$scope={dirty:F,ctx:I}),v.$set(ee);const K={};F[0]&3|F[1]&4&&(K.$$scope={dirty:F,ctx:I}),E.$set(K)},i(I){T||(Xe(t.$$.fragment,I),Xe(n.$$.fragment,I),Xe(u.$$.fragment,I),Xe(l.$$.fragment,I),Xe(v.$$.fragment,I),Xe(E.$$.fragment,I),T=!0)},o(I){it(t.$$.fragment,I),it(n.$$.fragment,I),it(u.$$.fragment,I),it(l.$$.fragment,I),it(v.$$.fragment,I),it(E.$$.fragment,I),T=!1},d(I){Vt(t,I),I&&ge(r),Vt(n,I),I&&ge(o),Vt(u,I),I&&ge(c),Vt(l,I),I&&ge(h),Vt(v,I),I&&ge(w),Vt(E,I)}}}function GM(e){let t,r,n,o;function u(h){e[21](h)}function c(h){e[22](h)}let l={};return e[0]!==void 0&&(l.map=e[0]),e[1]!==void 0&&(l.layer=e[1]),t=new IM({props:l}),Ft.push(()=>Jt(t,"map",u)),Ft.push(()=>Jt(t,"layer",c)),{c(){Ut(t.$$.fragment)},l(h){Yt(t.$$.fragment,h)},m(h,v){qt(t,h,v),o=!0},p(h,v){const w={};!r&&v[0]&1&&(r=!0,w.map=h[0],er(()=>r=!1)),!n&&v[0]&2&&(n=!0,w.layer=h[1],er(()=>n=!1)),t.$set(w)},i(h){o||(Xe(t.$$.fragment,h),o=!0)},o(h){it(t.$$.fragment,h),o=!1},d(h){Vt(t,h)}}}function HM(e){let t,r,n,o;function u(h){e[23](h)}function c(h){e[24](h)}let l={propertyName:"text-color"};return e[0]!==void 0&&(l.map=e[0]),e[1]!==void 0&&(l.layer=e[1]),t=new sc({props:l}),Ft.push(()=>Jt(t,"map",u)),Ft.push(()=>Jt(t,"layer",c)),{c(){Ut(t.$$.fragment)},l(h){Yt(t.$$.fragment,h)},m(h,v){qt(t,h,v),o=!0},p(h,v){const w={};!r&&v[0]&1&&(r=!0,w.map=h[0],er(()=>r=!1)),!n&&v[0]&2&&(n=!0,w.layer=h[1],er(()=>n=!1)),t.$set(w)},i(h){o||(Xe(t.$$.fragment,h),o=!0)},o(h){it(t.$$.fragment,h),o=!1},d(h){Vt(t,h)}}}function WM(e){let t,r,n,o;function u(h){e[25](h)}function c(h){e[26](h)}let l={};return e[0]!==void 0&&(l.map=e[0]),e[1]!==void 0&&(l.layer=e[1]),t=new PM({props:l}),Ft.push(()=>Jt(t,"map",u)),Ft.push(()=>Jt(t,"layer",c)),{c(){Ut(t.$$.fragment)},l(h){Yt(t.$$.fragment,h)},m(h,v){qt(t,h,v),o=!0},p(h,v){const w={};!r&&v[0]&1&&(r=!0,w.map=h[0],er(()=>r=!1)),!n&&v[0]&2&&(n=!0,w.layer=h[1],er(()=>n=!1)),t.$set(w)},i(h){o||(Xe(t.$$.fragment,h),o=!0)},o(h){it(t.$$.fragment,h),o=!1},d(h){Vt(t,h)}}}function ZM(e){let t,r,n,o;function u(h){e[27](h)}function c(h){e[28](h)}let l={propertyName:"text-halo-color"};return e[0]!==void 0&&(l.map=e[0]),e[1]!==void 0&&(l.layer=e[1]),t=new sc({props:l}),Ft.push(()=>Jt(t,"map",u)),Ft.push(()=>Jt(t,"layer",c)),{c(){Ut(t.$$.fragment)},l(h){Yt(t.$$.fragment,h)},m(h,v){qt(t,h,v),o=!0},p(h,v){const w={};!r&&v[0]&1&&(r=!0,w.map=h[0],er(()=>r=!1)),!n&&v[0]&2&&(n=!0,w.layer=h[1],er(()=>n=!1)),t.$set(w)},i(h){o||(Xe(t.$$.fragment,h),o=!0)},o(h){it(t.$$.fragment,h),o=!1},d(h){Vt(t,h)}}}function XM(e){let t,r,n,o;function u(h){e[29](h)}function c(h){e[30](h)}let l={};return e[0]!==void 0&&(l.map=e[0]),e[1]!==void 0&&(l.layer=e[1]),t=new xM({props:l}),Ft.push(()=>Jt(t,"map",u)),Ft.push(()=>Jt(t,"layer",c)),{c(){Ut(t.$$.fragment)},l(h){Yt(t.$$.fragment,h)},m(h,v){qt(t,h,v),o=!0},p(h,v){const w={};!r&&v[0]&1&&(r=!0,w.map=h[0],er(()=>r=!1)),!n&&v[0]&2&&(n=!0,w.layer=h[1],er(()=>n=!1)),t.$set(w)},i(h){o||(Xe(t.$$.fragment,h),o=!0)},o(h){it(t.$$.fragment,h),o=!1},d(h){Vt(t,h)}}}function YM(e){let t,r,n,o;function u(h){e[31](h)}function c(h){e[32](h)}let l={};return e[0]!==void 0&&(l.map=e[0]),e[1]!==void 0&&(l.layer=e[1]),t=new EM({props:l}),Ft.push(()=>Jt(t,"map",u)),Ft.push(()=>Jt(t,"layer",c)),{c(){Ut(t.$$.fragment)},l(h){Yt(t.$$.fragment,h)},m(h,v){qt(t,h,v),o=!0},p(h,v){const w={};!r&&v[0]&1&&(r=!0,w.map=h[0],er(()=>r=!1)),!n&&v[0]&2&&(n=!0,w.layer=h[1],er(()=>n=!1)),t.$set(w)},i(h){o||(Xe(t.$$.fragment,h),o=!0)},o(h){it(t.$$.fragment,h),o=!1},d(h){Vt(t,h)}}}function JM(e){let t,r,n,o,u,c,l;t=new Wi({props:{title:"Heatmap",help:{layerType:"heatmap"},$$slots:{default:[NM]},$$scope:{ctx:e}}}),n=new Wi({props:{title:"Opacity",help:{type:"paint",layerType:"symbol",property:"icon-opacity"},$$slots:{default:[RM]},$$scope:{ctx:e}}});let h=e[3]&&OM(e),v=e[4]&&$M(e);return{c(){Ut(t.$$.fragment),r=mr(),Ut(n.$$.fragment),o=mr(),h&&h.c(),u=mr(),v&&v.c(),c=ao()},l(w){Yt(t.$$.fragment,w),r=gr(w),Yt(n.$$.fragment,w),o=gr(w),h&&h.l(w),u=gr(w),v&&v.l(w),c=ao()},m(w,E){qt(t,w,E),Lt(w,r,E),qt(n,w,E),Lt(w,o,E),h&&h.m(w,E),Lt(w,u,E),v&&v.m(w,E),Lt(w,c,E),l=!0},p(w,E){const T={};E[0]&3|E[1]&4&&(T.$$scope={dirty:E,ctx:w}),t.$set(T);const I={};E[0]&3|E[1]&4&&(I.$$scope={dirty:E,ctx:w}),n.$set(I),w[3]&&h.p(w,E),w[4]&&v.p(w,E)},i(w){l||(Xe(t.$$.fragment,w),Xe(n.$$.fragment,w),Xe(h),Xe(v),l=!0)},o(w){it(t.$$.fragment,w),it(n.$$.fragment,w),it(h),it(v),l=!1},d(w){Vt(t,w),w&&ge(r),Vt(n,w),w&&ge(o),h&&h.d(w),w&&ge(u),v&&v.d(w),w&&ge(c)}}}function KM(e,t,r){let{map:n}=t,{layer:o}=t,{spriteLoader:u}=t,c=n.getLayoutProperty(o.id,"icon-image"),l=n.getLayoutProperty(o.id,"text-field");function h(Ze){n=Ze,r(0,n)}function v(Ze){o=Ze,r(1,o)}function w(Ze){n=Ze,r(0,n)}function E(Ze){o=Ze,r(1,o)}function T(Ze){n=Ze,r(0,n)}function I(Ze){o=Ze,r(1,o)}function F(Ze){n=Ze,r(0,n)}function U(Ze){o=Ze,r(1,o)}function G(Ze){n=Ze,r(0,n)}function H(Ze){o=Ze,r(1,o)}function X(Ze){n=Ze,r(0,n)}function ee(Ze){o=Ze,r(1,o)}function K(Ze){n=Ze,r(0,n)}function se(Ze){o=Ze,r(1,o)}function ce(Ze){n=Ze,r(0,n)}function _e(Ze){o=Ze,r(1,o)}function pe(Ze){n=Ze,r(0,n)}function Ge(Ze){o=Ze,r(1,o)}function We(Ze){n=Ze,r(0,n)}function Ae(Ze){o=Ze,r(1,o)}function Ie(Ze){n=Ze,r(0,n)}function Fe(Ze){o=Ze,r(1,o)}function ot(Ze){n=Ze,r(0,n)}function _t(Ze){o=Ze,r(1,o)}function ht(Ze){n=Ze,r(0,n)}function $e(Ze){o=Ze,r(1,o)}function ut(Ze){n=Ze,r(0,n)}function bt(Ze){o=Ze,r(1,o)}return e.$$set=Ze=>{"map"in Ze&&r(0,n=Ze.map),"layer"in Ze&&r(1,o=Ze.layer),"spriteLoader"in Ze&&r(2,u=Ze.spriteLoader)},[n,o,u,c,l,h,v,w,E,T,I,F,U,G,H,X,ee,K,se,ce,_e,pe,Ge,We,Ae,Ie,Fe,ot,_t,ht,$e,ut,bt]}class QM extends Dn{constructor(t){super(),zn(this,t,KM,JM,Ln,{map:0,layer:1,spriteLoader:2},null,[-1,-1])}}function eD(e){let t,r,n;function o(c){e[3](c)}let u={min:0,max:100,step:1,unit:"m"};return e[0]!==void 0&&(u.value=e[0]),t=new ns({props:u}),Ft.push(()=>Jt(t,"value",o)),{c(){Ut(t.$$.fragment)},l(c){Yt(t.$$.fragment,c)},m(c,l){qt(t,c,l),n=!0},p(c,[l]){const h={};!r&&l&1&&(r=!0,h.value=c[0],er(()=>r=!1)),t.$set(h)},i(c){n||(Xe(t.$$.fragment,c),n=!0)},o(c){it(t.$$.fragment,c),n=!1},d(c){Vt(t,c)}}}function tD(e,t,r){let{map:n}=t,{layer:o}=t,c=(()=>{let v=n.getPaintProperty(o.id,"fill-extrusion-height");return v||(v=0),v})();const l=()=>{n==null||n.setPaintProperty(o.id,"fill-extrusion-height",c)};function h(v){c=v,r(0,c)}return e.$$set=v=>{"map"in v&&r(1,n=v.map),"layer"in v&&r(2,o=v.layer)},e.$$.update=()=>{e.$$.dirty&1&&l()},[c,n,o,h]}class rD extends Dn{constructor(t){super(),zn(this,t,tD,eD,Ln,{map:1,layer:2})}}function nD(e){let t,r,n;function o(c){e[3](c)}let u={min:0,max:100,step:1,unit:"m"};return e[0]!==void 0&&(u.value=e[0]),t=new ns({props:u}),Ft.push(()=>Jt(t,"value",o)),{c(){Ut(t.$$.fragment)},l(c){Yt(t.$$.fragment,c)},m(c,l){qt(t,c,l),n=!0},p(c,[l]){const h={};!r&&l&1&&(r=!0,h.value=c[0],er(()=>r=!1)),t.$set(h)},i(c){n||(Xe(t.$$.fragment,c),n=!0)},o(c){it(t.$$.fragment,c),n=!1},d(c){Vt(t,c)}}}function iD(e,t,r){let{map:n}=t,{layer:o}=t,c=(()=>{let v=n.getPaintProperty(o.id,"fill-extrusion-base");return v||(v=0),v})();const l=()=>{n==null||n.setPaintProperty(o.id,"fill-extrusion-base",c)};function h(v){c=v,r(0,c)}return e.$$set=v=>{"map"in v&&r(1,n=v.map),"layer"in v&&r(2,o=v.layer)},e.$$.update=()=>{e.$$.dirty&1&&l()},[c,n,o,h]}class oD extends Dn{constructor(t){super(),zn(this,t,iD,nD,Ln,{map:1,layer:2})}}function aD(e){let t,r,n,o;function u(h){e[2](h)}function c(h){e[3](h)}let l={};return e[0]!==void 0&&(l.map=e[0]),e[1]!==void 0&&(l.layer=e[1]),t=new Bf({props:l}),Ft.push(()=>Jt(t,"map",u)),Ft.push(()=>Jt(t,"layer",c)),{c(){Ut(t.$$.fragment)},l(h){Yt(t.$$.fragment,h)},m(h,v){qt(t,h,v),o=!0},p(h,v){const w={};!r&&v&1&&(r=!0,w.map=h[0],er(()=>r=!1)),!n&&v&2&&(n=!0,w.layer=h[1],er(()=>n=!1)),t.$set(w)},i(h){o||(Xe(t.$$.fragment,h),o=!0)},o(h){it(t.$$.fragment,h),o=!1},d(h){Vt(t,h)}}}function sD(e){let t,r,n,o;function u(h){e[4](h)}function c(h){e[5](h)}let l={propertyName:"fill-extrusion-color"};return e[0]!==void 0&&(l.map=e[0]),e[1]!==void 0&&(l.layer=e[1]),t=new sc({props:l}),Ft.push(()=>Jt(t,"map",u)),Ft.push(()=>Jt(t,"layer",c)),{c(){Ut(t.$$.fragment)},l(h){Yt(t.$$.fragment,h)},m(h,v){qt(t,h,v),o=!0},p(h,v){const w={};!r&&v&1&&(r=!0,w.map=h[0],er(()=>r=!1)),!n&&v&2&&(n=!0,w.layer=h[1],er(()=>n=!1)),t.$set(w)},i(h){o||(Xe(t.$$.fragment,h),o=!0)},o(h){it(t.$$.fragment,h),o=!1},d(h){Vt(t,h)}}}function lD(e){let t,r,n,o;function u(h){e[6](h)}function c(h){e[7](h)}let l={};return e[0]!==void 0&&(l.map=e[0]),e[1]!==void 0&&(l.layer=e[1]),t=new rD({props:l}),Ft.push(()=>Jt(t,"map",u)),Ft.push(()=>Jt(t,"layer",c)),{c(){Ut(t.$$.fragment)},l(h){Yt(t.$$.fragment,h)},m(h,v){qt(t,h,v),o=!0},p(h,v){const w={};!r&&v&1&&(r=!0,w.map=h[0],er(()=>r=!1)),!n&&v&2&&(n=!0,w.layer=h[1],er(()=>n=!1)),t.$set(w)},i(h){o||(Xe(t.$$.fragment,h),o=!0)},o(h){it(t.$$.fragment,h),o=!1},d(h){Vt(t,h)}}}function uD(e){let t,r,n,o;function u(h){e[8](h)}function c(h){e[9](h)}let l={};return e[0]!==void 0&&(l.map=e[0]),e[1]!==void 0&&(l.layer=e[1]),t=new oD({props:l}),Ft.push(()=>Jt(t,"map",u)),Ft.push(()=>Jt(t,"layer",c)),{c(){Ut(t.$$.fragment)},l(h){Yt(t.$$.fragment,h)},m(h,v){qt(t,h,v),o=!0},p(h,v){const w={};!r&&v&1&&(r=!0,w.map=h[0],er(()=>r=!1)),!n&&v&2&&(n=!0,w.layer=h[1],er(()=>n=!1)),t.$set(w)},i(h){o||(Xe(t.$$.fragment,h),o=!0)},o(h){it(t.$$.fragment,h),o=!1},d(h){Vt(t,h)}}}function cD(e){let t,r,n,o,u,c,l,h;return t=new Wi({props:{title:"Opacity",help:{type:"paint",layerType:"fill-extrusion",property:"fill-extrusion-opacity"},$$slots:{default:[aD]},$$scope:{ctx:e}}}),n=new Wi({props:{title:"Fill extrusion color",help:{type:"paint",layerType:"fill-extrusion",property:"fill-extrusion-color"},$$slots:{default:[sD]},$$scope:{ctx:e}}}),u=new Wi({props:{title:"Fill extrusion height",help:{type:"paint",layerType:"fill-extrusion",property:"fill-extrusion-height"},$$slots:{default:[lD]},$$scope:{ctx:e}}}),l=new Wi({props:{title:"Fill extrusion base",help:{type:"paint",layerType:"fill-extrusion",property:"fill-extrusion-base"},$$slots:{default:[uD]},$$scope:{ctx:e}}}),{c(){Ut(t.$$.fragment),r=mr(),Ut(n.$$.fragment),o=mr(),Ut(u.$$.fragment),c=mr(),Ut(l.$$.fragment)},l(v){Yt(t.$$.fragment,v),r=gr(v),Yt(n.$$.fragment,v),o=gr(v),Yt(u.$$.fragment,v),c=gr(v),Yt(l.$$.fragment,v)},m(v,w){qt(t,v,w),Lt(v,r,w),qt(n,v,w),Lt(v,o,w),qt(u,v,w),Lt(v,c,w),qt(l,v,w),h=!0},p(v,[w]){const E={};w&1027&&(E.$$scope={dirty:w,ctx:v}),t.$set(E);const T={};w&1027&&(T.$$scope={dirty:w,ctx:v}),n.$set(T);const I={};w&1027&&(I.$$scope={dirty:w,ctx:v}),u.$set(I);const F={};w&1027&&(F.$$scope={dirty:w,ctx:v}),l.$set(F)},i(v){h||(Xe(t.$$.fragment,v),Xe(n.$$.fragment,v),Xe(u.$$.fragment,v),Xe(l.$$.fragment,v),h=!0)},o(v){it(t.$$.fragment,v),it(n.$$.fragment,v),it(u.$$.fragment,v),it(l.$$.fragment,v),h=!1},d(v){Vt(t,v),v&&ge(r),Vt(n,v),v&&ge(o),Vt(u,v),v&&ge(c),Vt(l,v)}}}function fD(e,t,r){let{map:n}=t,{layer:o}=t;function u(I){n=I,r(0,n)}function c(I){o=I,r(1,o)}function l(I){n=I,r(0,n)}function h(I){o=I,r(1,o)}function v(I){n=I,r(0,n)}function w(I){o=I,r(1,o)}function E(I){n=I,r(0,n)}function T(I){o=I,r(1,o)}return e.$$set=I=>{"map"in I&&r(0,n=I.map),"layer"in I&&r(1,o=I.layer)},[n,o,u,c,l,h,v,w,E,T]}class hD extends Dn{constructor(t){super(),zn(this,t,fD,cD,Ln,{map:0,layer:1})}}function pD(e){let t,r,n;function o(c){e[3](c)}let u={min:0,max:100,step:1,unit:"%"};return e[0]!==void 0&&(u.value=e[0]),t=new ns({props:u}),Ft.push(()=>Jt(t,"value",o)),{c(){Ut(t.$$.fragment)},l(c){Yt(t.$$.fragment,c)},m(c,l){qt(t,c,l),n=!0},p(c,[l]){const h={};!r&&l&1&&(r=!0,h.value=c[0],er(()=>r=!1)),t.$set(h)},i(c){n||(Xe(t.$$.fragment,c),n=!0)},o(c){it(t.$$.fragment,c),n=!1},d(c){Vt(t,c)}}}function dD(e,t,r){let{map:n}=t,{layer:o}=t,c=(()=>{let v=n.getPaintProperty(o.id,"hillshade-exaggeration");return v||(v=.5),v})();const l=()=>{n==null||n.setPaintProperty(o.id,"hillshade-exaggeration",c)};function h(v){c=v,r(0,c)}return e.$$set=v=>{"map"in v&&r(1,n=v.map),"layer"in v&&r(2,o=v.layer)},e.$$.update=()=>{e.$$.dirty&1&&l()},[c,n,o,h]}class mD extends Dn{constructor(t){super(),zn(this,t,dD,pD,Ln,{map:1,layer:2})}}function gD(e){let t,r,n;function o(c){e[3](c)}let u={min:0,max:359,step:1,unit:""};return e[0]!==void 0&&(u.value=e[0]),t=new ns({props:u}),Ft.push(()=>Jt(t,"value",o)),{c(){Ut(t.$$.fragment)},l(c){Yt(t.$$.fragment,c)},m(c,l){qt(t,c,l),n=!0},p(c,[l]){const h={};!r&&l&1&&(r=!0,h.value=c[0],er(()=>r=!1)),t.$set(h)},i(c){n||(Xe(t.$$.fragment,c),n=!0)},o(c){it(t.$$.fragment,c),n=!1},d(c){Vt(t,c)}}}function yD(e,t,r){let{map:n}=t,{layer:o}=t,c=(()=>{let v=n.getPaintProperty(o.id,"hillshade-illumination-direction");return v||(v=335),v})();const l=()=>{n==null||n.setPaintProperty(o.id,"hillshade-illumination-direction",c)};function h(v){c=v,r(0,c)}return e.$$set=v=>{"map"in v&&r(1,n=v.map),"layer"in v&&r(2,o=v.layer)},e.$$.update=()=>{e.$$.dirty&1&&l()},[c,n,o,h]}class vD extends Dn{constructor(t){super(),zn(this,t,yD,gD,Ln,{map:1,layer:2})}}function _D(e){let t,r,n,o;function u(h){e[2](h)}function c(h){e[3](h)}let l={};return e[0]!==void 0&&(l.map=e[0]),e[1]!==void 0&&(l.layer=e[1]),t=new mD({props:l}),Ft.push(()=>Jt(t,"map",u)),Ft.push(()=>Jt(t,"layer",c)),{c(){Ut(t.$$.fragment)},l(h){Yt(t.$$.fragment,h)},m(h,v){qt(t,h,v),o=!0},p(h,v){const w={};!r&&v&1&&(r=!0,w.map=h[0],er(()=>r=!1)),!n&&v&2&&(n=!0,w.layer=h[1],er(()=>n=!1)),t.$set(w)},i(h){o||(Xe(t.$$.fragment,h),o=!0)},o(h){it(t.$$.fragment,h),o=!1},d(h){Vt(t,h)}}}function bD(e){let t,r,n,o;function u(h){e[4](h)}function c(h){e[5](h)}let l={propertyName:"hillshade-accent-color"};return e[0]!==void 0&&(l.map=e[0]),e[1]!==void 0&&(l.layer=e[1]),t=new sc({props:l}),Ft.push(()=>Jt(t,"map",u)),Ft.push(()=>Jt(t,"layer",c)),{c(){Ut(t.$$.fragment)},l(h){Yt(t.$$.fragment,h)},m(h,v){qt(t,h,v),o=!0},p(h,v){const w={};!r&&v&1&&(r=!0,w.map=h[0],er(()=>r=!1)),!n&&v&2&&(n=!0,w.layer=h[1],er(()=>n=!1)),t.$set(w)},i(h){o||(Xe(t.$$.fragment,h),o=!0)},o(h){it(t.$$.fragment,h),o=!1},d(h){Vt(t,h)}}}function wD(e){let t,r,n,o;function u(h){e[6](h)}function c(h){e[7](h)}let l={propertyName:"hillshade-highlight-color"};return e[0]!==void 0&&(l.map=e[0]),e[1]!==void 0&&(l.layer=e[1]),t=new sc({props:l}),Ft.push(()=>Jt(t,"map",u)),Ft.push(()=>Jt(t,"layer",c)),{c(){Ut(t.$$.fragment)},l(h){Yt(t.$$.fragment,h)},m(h,v){qt(t,h,v),o=!0},p(h,v){const w={};!r&&v&1&&(r=!0,w.map=h[0],er(()=>r=!1)),!n&&v&2&&(n=!0,w.layer=h[1],er(()=>n=!1)),t.$set(w)},i(h){o||(Xe(t.$$.fragment,h),o=!0)},o(h){it(t.$$.fragment,h),o=!1},d(h){Vt(t,h)}}}function xD(e){let t,r,n,o;function u(h){e[8](h)}function c(h){e[9](h)}let l={};return e[0]!==void 0&&(l.map=e[0]),e[1]!==void 0&&(l.layer=e[1]),t=new vD({props:l}),Ft.push(()=>Jt(t,"map",u)),Ft.push(()=>Jt(t,"layer",c)),{c(){Ut(t.$$.fragment)},l(h){Yt(t.$$.fragment,h)},m(h,v){qt(t,h,v),o=!0},p(h,v){const w={};!r&&v&1&&(r=!0,w.map=h[0],er(()=>r=!1)),!n&&v&2&&(n=!0,w.layer=h[1],er(()=>n=!1)),t.$set(w)},i(h){o||(Xe(t.$$.fragment,h),o=!0)},o(h){it(t.$$.fragment,h),o=!1},d(h){Vt(t,h)}}}function kD(e){let t,r,n,o;function u(h){e[10](h)}function c(h){e[11](h)}let l={propertyName:"hillshade-shadow-color"};return e[0]!==void 0&&(l.map=e[0]),e[1]!==void 0&&(l.layer=e[1]),t=new sc({props:l}),Ft.push(()=>Jt(t,"map",u)),Ft.push(()=>Jt(t,"layer",c)),{c(){Ut(t.$$.fragment)},l(h){Yt(t.$$.fragment,h)},m(h,v){qt(t,h,v),o=!0},p(h,v){const w={};!r&&v&1&&(r=!0,w.map=h[0],er(()=>r=!1)),!n&&v&2&&(n=!0,w.layer=h[1],er(()=>n=!1)),t.$set(w)},i(h){o||(Xe(t.$$.fragment,h),o=!0)},o(h){it(t.$$.fragment,h),o=!1},d(h){Vt(t,h)}}}function AD(e){let t,r,n,o,u,c,l,h,v,w;return t=new Wi({props:{title:"Hillshade exaggeration",help:{type:"paint",layerType:"hillshade",property:"hillshade-exaggeration"},$$slots:{default:[_D]},$$scope:{ctx:e}}}),n=new Wi({props:{title:"Hillshade accent color",help:{type:"paint",layerType:"hillshade",property:"hillshade-accent-color"},$$slots:{default:[bD]},$$scope:{ctx:e}}}),u=new Wi({props:{title:"Hillshade highlight color",help:{type:"paint",layerType:"hillshade",property:"hillshade-highlight-color"},$$slots:{default:[wD]},$$scope:{ctx:e}}}),l=new Wi({props:{title:"Hillshade illumination direction",help:{type:"paint",layerType:"hillshade",property:"hillshade-illumination-direction"},$$slots:{default:[xD]},$$scope:{ctx:e}}}),v=new Wi({props:{title:"Hillshade shadow color",help:{type:"paint",layerType:"hillshade",property:"hillshade-shadow-color"},$$slots:{default:[kD]},$$scope:{ctx:e}}}),{c(){Ut(t.$$.fragment),r=mr(),Ut(n.$$.fragment),o=mr(),Ut(u.$$.fragment),c=mr(),Ut(l.$$.fragment),h=mr(),Ut(v.$$.fragment)},l(E){Yt(t.$$.fragment,E),r=gr(E),Yt(n.$$.fragment,E),o=gr(E),Yt(u.$$.fragment,E),c=gr(E),Yt(l.$$.fragment,E),h=gr(E),Yt(v.$$.fragment,E)},m(E,T){qt(t,E,T),Lt(E,r,T),qt(n,E,T),Lt(E,o,T),qt(u,E,T),Lt(E,c,T),qt(l,E,T),Lt(E,h,T),qt(v,E,T),w=!0},p(E,[T]){const I={};T&4099&&(I.$$scope={dirty:T,ctx:E}),t.$set(I);const F={};T&4099&&(F.$$scope={dirty:T,ctx:E}),n.$set(F);const U={};T&4099&&(U.$$scope={dirty:T,ctx:E}),u.$set(U);const G={};T&4099&&(G.$$scope={dirty:T,ctx:E}),l.$set(G);const H={};T&4099&&(H.$$scope={dirty:T,ctx:E}),v.$set(H)},i(E){w||(Xe(t.$$.fragment,E),Xe(n.$$.fragment,E),Xe(u.$$.fragment,E),Xe(l.$$.fragment,E),Xe(v.$$.fragment,E),w=!0)},o(E){it(t.$$.fragment,E),it(n.$$.fragment,E),it(u.$$.fragment,E),it(l.$$.fragment,E),it(v.$$.fragment,E),w=!1},d(E){Vt(t,E),E&&ge(r),Vt(n,E),E&&ge(o),Vt(u,E),E&&ge(c),Vt(l,E),E&&ge(h),Vt(v,E)}}}function ED(e,t,r){let{map:n}=t,{layer:o}=t;function u(U){n=U,r(0,n)}function c(U){o=U,r(1,o)}function l(U){n=U,r(0,n)}function h(U){o=U,r(1,o)}function v(U){n=U,r(0,n)}function w(U){o=U,r(1,o)}function E(U){n=U,r(0,n)}function T(U){o=U,r(1,o)}function I(U){n=U,r(0,n)}function F(U){o=U,r(1,o)}return e.$$set=U=>{"map"in U&&r(0,n=U.map),"layer"in U&&r(1,o=U.layer)},[n,o,u,c,l,h,v,w,E,T,I,F]}class SD extends Dn{constructor(t){super(),zn(this,t,ED,AD,Ln,{map:0,layer:1})}}function CD(e){let t,r,n;function o(c){e[3](c)}let u={min:0,max:1,step:.1,unit:""};return e[0]!==void 0&&(u.value=e[0]),t=new ns({props:u}),Ft.push(()=>Jt(t,"value",o)),{c(){Ut(t.$$.fragment)},l(c){Yt(t.$$.fragment,c)},m(c,l){qt(t,c,l),n=!0},p(c,[l]){const h={};!r&&l&1&&(r=!0,h.value=c[0],er(()=>r=!1)),t.$set(h)},i(c){n||(Xe(t.$$.fragment,c),n=!0)},o(c){it(t.$$.fragment,c),n=!1},d(c){Vt(t,c)}}}function ID(e,t,r){let{map:n}=t,{layer:o}=t,c=(()=>{let v=n.getPaintProperty(o.id,"raster-brightness-max");return v||(v=1),v})();const l=()=>{n==null||n.setPaintProperty(o.id,"raster-brightness-max",c)};function h(v){c=v,r(0,c)}return e.$$set=v=>{"map"in v&&r(1,n=v.map),"layer"in v&&r(2,o=v.layer)},e.$$.update=()=>{e.$$.dirty&1&&l()},[c,n,o,h]}class TD extends Dn{constructor(t){super(),zn(this,t,ID,CD,Ln,{map:1,layer:2})}}function LD(e){let t,r,n;function o(c){e[3](c)}let u={min:0,max:1,step:.1,unit:""};return e[0]!==void 0&&(u.value=e[0]),t=new ns({props:u}),Ft.push(()=>Jt(t,"value",o)),{c(){Ut(t.$$.fragment)},l(c){Yt(t.$$.fragment,c)},m(c,l){qt(t,c,l),n=!0},p(c,[l]){const h={};!r&&l&1&&(r=!0,h.value=c[0],er(()=>r=!1)),t.$set(h)},i(c){n||(Xe(t.$$.fragment,c),n=!0)},o(c){it(t.$$.fragment,c),n=!1},d(c){Vt(t,c)}}}function PD(e,t,r){let{map:n}=t,{layer:o}=t,c=(()=>{let v=n.getPaintProperty(o.id,"raster-brightness-min");return v||(v=0),v})();const l=()=>{n==null||n.setPaintProperty(o.id,"raster-brightness-min",c)};function h(v){c=v,r(0,c)}return e.$$set=v=>{"map"in v&&r(1,n=v.map),"layer"in v&&r(2,o=v.layer)},e.$$.update=()=>{e.$$.dirty&1&&l()},[c,n,o,h]}class MD extends Dn{constructor(t){super(),zn(this,t,PD,LD,Ln,{map:1,layer:2})}}function DD(e){let t,r,n;function o(c){e[3](c)}let u={min:-1,max:1,step:.1,unit:""};return e[0]!==void 0&&(u.value=e[0]),t=new ns({props:u}),Ft.push(()=>Jt(t,"value",o)),{c(){Ut(t.$$.fragment)},l(c){Yt(t.$$.fragment,c)},m(c,l){qt(t,c,l),n=!0},p(c,[l]){const h={};!r&&l&1&&(r=!0,h.value=c[0],er(()=>r=!1)),t.$set(h)},i(c){n||(Xe(t.$$.fragment,c),n=!0)},o(c){it(t.$$.fragment,c),n=!1},d(c){Vt(t,c)}}}function zD(e,t,r){let{map:n}=t,{layer:o}=t,c=(()=>{let v=n.getPaintProperty(o.id,"raster-contrast");return v||(v=0),v})();const l=()=>{n==null||n.setPaintProperty(o.id,"raster-contrast",c)};function h(v){c=v,r(0,c)}return e.$$set=v=>{"map"in v&&r(1,n=v.map),"layer"in v&&r(2,o=v.layer)},e.$$.update=()=>{e.$$.dirty&1&&l()},[c,n,o,h]}class ND extends Dn{constructor(t){super(),zn(this,t,zD,DD,Ln,{map:1,layer:2})}}function RD(e){let t,r,n;function o(c){e[3](c)}let u={min:0,max:359,step:1,unit:""};return e[0]!==void 0&&(u.value=e[0]),t=new ns({props:u}),Ft.push(()=>Jt(t,"value",o)),{c(){Ut(t.$$.fragment)},l(c){Yt(t.$$.fragment,c)},m(c,l){qt(t,c,l),n=!0},p(c,[l]){const h={};!r&&l&1&&(r=!0,h.value=c[0],er(()=>r=!1)),t.$set(h)},i(c){n||(Xe(t.$$.fragment,c),n=!0)},o(c){it(t.$$.fragment,c),n=!1},d(c){Vt(t,c)}}}function OD(e,t,r){let{map:n}=t,{layer:o}=t,c=(()=>{let v=n.getPaintProperty(o.id,"raster-hue-rotate");return v||(v=0),v})();const l=()=>{n==null||n.setPaintProperty(o.id,"raster-hue-rotate",c)};function h(v){c=v,r(0,c)}return e.$$set=v=>{"map"in v&&r(1,n=v.map),"layer"in v&&r(2,o=v.layer)},e.$$.update=()=>{e.$$.dirty&1&&l()},[c,n,o,h]}class FD extends Dn{constructor(t){super(),zn(this,t,OD,RD,Ln,{map:1,layer:2})}}function BD(e){let t,r,n;function o(c){e[3](c)}let u={min:-1,max:1,step:.1,unit:""};return e[0]!==void 0&&(u.value=e[0]),t=new ns({props:u}),Ft.push(()=>Jt(t,"value",o)),{c(){Ut(t.$$.fragment)},l(c){Yt(t.$$.fragment,c)},m(c,l){qt(t,c,l),n=!0},p(c,[l]){const h={};!r&&l&1&&(r=!0,h.value=c[0],er(()=>r=!1)),t.$set(h)},i(c){n||(Xe(t.$$.fragment,c),n=!0)},o(c){it(t.$$.fragment,c),n=!1},d(c){Vt(t,c)}}}function jD(e,t,r){let{map:n}=t,{layer:o}=t,c=(()=>{let v=n.getPaintProperty(o.id,"raster-saturation");return v||(v=0),v})();const l=()=>{n==null||n.setPaintProperty(o.id,"raster-saturation",c)};function h(v){c=v,r(0,c)}return e.$$set=v=>{"map"in v&&r(1,n=v.map),"layer"in v&&r(2,o=v.layer)},e.$$.update=()=>{e.$$.dirty&1&&l()},[c,n,o,h]}class UD extends Dn{constructor(t){super(),zn(this,t,jD,BD,Ln,{map:1,layer:2})}}function qD(e){let t,r,n,o;function u(h){e[4](h)}function c(h){e[5](h)}let l={};return e[1]!==void 0&&(l.options=e[1]),e[0]!==void 0&&(l.selectedValue=e[0]),t=new g2({props:l}),Ft.push(()=>Jt(t,"options",u)),Ft.push(()=>Jt(t,"selectedValue",c)),{c(){Ut(t.$$.fragment)},l(h){Yt(t.$$.fragment,h)},m(h,v){qt(t,h,v),o=!0},p(h,[v]){const w={};!r&&v&2&&(r=!0,w.options=h[1],er(()=>r=!1)),!n&&v&1&&(n=!0,w.selectedValue=h[0],er(()=>n=!1)),t.$set(w)},i(h){o||(Xe(t.$$.fragment,h),o=!0)},o(h){it(t.$$.fragment,h),o=!1},d(h){Vt(t,h)}}}function VD(e,t,r){let{map:n}=t,{layer:o}=t,u=[{title:"linear",value:"linear"},{title:"nearest",value:"nearest"}],l=(()=>{let E=n.getPaintProperty(o.id,"raster-resampling");return E||(E=u[0].value),E})();const h=()=>{n==null||n.setPaintProperty(o.id,"raster-resampling",l)};function v(E){u=E,r(1,u)}function w(E){l=E,r(0,l)}return e.$$set=E=>{"map"in E&&r(2,n=E.map),"layer"in E&&r(3,o=E.layer)},e.$$.update=()=>{e.$$.dirty&1&&h()},[l,u,n,o,v,w]}class $D extends Dn{constructor(t){super(),zn(this,t,VD,qD,Ln,{map:2,layer:3})}}function GD(e){let t,r,n,o;function u(h){e[2](h)}function c(h){e[3](h)}let l={};return e[0]!==void 0&&(l.map=e[0]),e[1]!==void 0&&(l.layer=e[1]),t=new Bf({props:l}),Ft.push(()=>Jt(t,"map",u)),Ft.push(()=>Jt(t,"layer",c)),{c(){Ut(t.$$.fragment)},l(h){Yt(t.$$.fragment,h)},m(h,v){qt(t,h,v),o=!0},p(h,v){const w={};!r&&v&1&&(r=!0,w.map=h[0],er(()=>r=!1)),!n&&v&2&&(n=!0,w.layer=h[1],er(()=>n=!1)),t.$set(w)},i(h){o||(Xe(t.$$.fragment,h),o=!0)},o(h){it(t.$$.fragment,h),o=!1},d(h){Vt(t,h)}}}function HD(e){let t,r,n,o;function u(h){e[4](h)}function c(h){e[5](h)}let l={};return e[0]!==void 0&&(l.map=e[0]),e[1]!==void 0&&(l.layer=e[1]),t=new TD({props:l}),Ft.push(()=>Jt(t,"map",u)),Ft.push(()=>Jt(t,"layer",c)),{c(){Ut(t.$$.fragment)},l(h){Yt(t.$$.fragment,h)},m(h,v){qt(t,h,v),o=!0},p(h,v){const w={};!r&&v&1&&(r=!0,w.map=h[0],er(()=>r=!1)),!n&&v&2&&(n=!0,w.layer=h[1],er(()=>n=!1)),t.$set(w)},i(h){o||(Xe(t.$$.fragment,h),o=!0)},o(h){it(t.$$.fragment,h),o=!1},d(h){Vt(t,h)}}}function WD(e){let t,r,n,o;function u(h){e[6](h)}function c(h){e[7](h)}let l={};return e[0]!==void 0&&(l.map=e[0]),e[1]!==void 0&&(l.layer=e[1]),t=new MD({props:l}),Ft.push(()=>Jt(t,"map",u)),Ft.push(()=>Jt(t,"layer",c)),{c(){Ut(t.$$.fragment)},l(h){Yt(t.$$.fragment,h)},m(h,v){qt(t,h,v),o=!0},p(h,v){const w={};!r&&v&1&&(r=!0,w.map=h[0],er(()=>r=!1)),!n&&v&2&&(n=!0,w.layer=h[1],er(()=>n=!1)),t.$set(w)},i(h){o||(Xe(t.$$.fragment,h),o=!0)},o(h){it(t.$$.fragment,h),o=!1},d(h){Vt(t,h)}}}function ZD(e){let t,r,n,o;function u(h){e[8](h)}function c(h){e[9](h)}let l={};return e[0]!==void 0&&(l.map=e[0]),e[1]!==void 0&&(l.layer=e[1]),t=new ND({props:l}),Ft.push(()=>Jt(t,"map",u)),Ft.push(()=>Jt(t,"layer",c)),{c(){Ut(t.$$.fragment)},l(h){Yt(t.$$.fragment,h)},m(h,v){qt(t,h,v),o=!0},p(h,v){const w={};!r&&v&1&&(r=!0,w.map=h[0],er(()=>r=!1)),!n&&v&2&&(n=!0,w.layer=h[1],er(()=>n=!1)),t.$set(w)},i(h){o||(Xe(t.$$.fragment,h),o=!0)},o(h){it(t.$$.fragment,h),o=!1},d(h){Vt(t,h)}}}function XD(e){let t,r,n,o;function u(h){e[10](h)}function c(h){e[11](h)}let l={};return e[0]!==void 0&&(l.map=e[0]),e[1]!==void 0&&(l.layer=e[1]),t=new FD({props:l}),Ft.push(()=>Jt(t,"map",u)),Ft.push(()=>Jt(t,"layer",c)),{c(){Ut(t.$$.fragment)},l(h){Yt(t.$$.fragment,h)},m(h,v){qt(t,h,v),o=!0},p(h,v){const w={};!r&&v&1&&(r=!0,w.map=h[0],er(()=>r=!1)),!n&&v&2&&(n=!0,w.layer=h[1],er(()=>n=!1)),t.$set(w)},i(h){o||(Xe(t.$$.fragment,h),o=!0)},o(h){it(t.$$.fragment,h),o=!1},d(h){Vt(t,h)}}}function YD(e){let t,r,n,o;function u(h){e[12](h)}function c(h){e[13](h)}let l={};return e[0]!==void 0&&(l.map=e[0]),e[1]!==void 0&&(l.layer=e[1]),t=new $D({props:l}),Ft.push(()=>Jt(t,"map",u)),Ft.push(()=>Jt(t,"layer",c)),{c(){Ut(t.$$.fragment)},l(h){Yt(t.$$.fragment,h)},m(h,v){qt(t,h,v),o=!0},p(h,v){const w={};!r&&v&1&&(r=!0,w.map=h[0],er(()=>r=!1)),!n&&v&2&&(n=!0,w.layer=h[1],er(()=>n=!1)),t.$set(w)},i(h){o||(Xe(t.$$.fragment,h),o=!0)},o(h){it(t.$$.fragment,h),o=!1},d(h){Vt(t,h)}}}function JD(e){let t,r,n,o;function u(h){e[14](h)}function c(h){e[15](h)}let l={};return e[0]!==void 0&&(l.map=e[0]),e[1]!==void 0&&(l.layer=e[1]),t=new UD({props:l}),Ft.push(()=>Jt(t,"map",u)),Ft.push(()=>Jt(t,"layer",c)),{c(){Ut(t.$$.fragment)},l(h){Yt(t.$$.fragment,h)},m(h,v){qt(t,h,v),o=!0},p(h,v){const w={};!r&&v&1&&(r=!0,w.map=h[0],er(()=>r=!1)),!n&&v&2&&(n=!0,w.layer=h[1],er(()=>n=!1)),t.$set(w)},i(h){o||(Xe(t.$$.fragment,h),o=!0)},o(h){it(t.$$.fragment,h),o=!1},d(h){Vt(t,h)}}}function KD(e){let t,r,n,o,u,c,l,h,v,w,E,T,I,F;return t=new Wi({props:{title:"Opacity",help:{type:"paint",layerType:"raster",property:"raster-opacity"},$$slots:{default:[GD]},$$scope:{ctx:e}}}),n=new Wi({props:{title:"Raster brightness max",help:{type:"paint",layerType:"raster",property:"raster-brightness-max"},$$slots:{default:[HD]},$$scope:{ctx:e}}}),u=new Wi({props:{title:"Raster brightness min",help:{type:"paint",layerType:"raster",property:"raster-brightness-min"},$$slots:{default:[WD]},$$scope:{ctx:e}}}),l=new Wi({props:{title:"Raster contrast",help:{type:"paint",layerType:"raster",property:"raster-contrast"},$$slots:{default:[ZD]},$$scope:{ctx:e}}}),v=new Wi({props:{title:"Raster hue rotate",help:{type:"paint",layerType:"raster",property:"raster-hue-rotate"},$$slots:{default:[XD]},$$scope:{ctx:e}}}),E=new Wi({props:{title:"Raster resampling",help:{type:"paint",layerType:"raster",property:"raster-resampling"},$$slots:{default:[YD]},$$scope:{ctx:e}}}),I=new Wi({props:{title:"Raster saturation",help:{type:"paint",layerType:"raster",property:"raster-saturation"},$$slots:{default:[JD]},$$scope:{ctx:e}}}),{c(){Ut(t.$$.fragment),r=mr(),Ut(n.$$.fragment),o=mr(),Ut(u.$$.fragment),c=mr(),Ut(l.$$.fragment),h=mr(),Ut(v.$$.fragment),w=mr(),Ut(E.$$.fragment),T=mr(),Ut(I.$$.fragment)},l(U){Yt(t.$$.fragment,U),r=gr(U),Yt(n.$$.fragment,U),o=gr(U),Yt(u.$$.fragment,U),c=gr(U),Yt(l.$$.fragment,U),h=gr(U),Yt(v.$$.fragment,U),w=gr(U),Yt(E.$$.fragment,U),T=gr(U),Yt(I.$$.fragment,U)},m(U,G){qt(t,U,G),Lt(U,r,G),qt(n,U,G),Lt(U,o,G),qt(u,U,G),Lt(U,c,G),qt(l,U,G),Lt(U,h,G),qt(v,U,G),Lt(U,w,G),qt(E,U,G),Lt(U,T,G),qt(I,U,G),F=!0},p(U,[G]){const H={};G&65539&&(H.$$scope={dirty:G,ctx:U}),t.$set(H);const X={};G&65539&&(X.$$scope={dirty:G,ctx:U}),n.$set(X);const ee={};G&65539&&(ee.$$scope={dirty:G,ctx:U}),u.$set(ee);const K={};G&65539&&(K.$$scope={dirty:G,ctx:U}),l.$set(K);const se={};G&65539&&(se.$$scope={dirty:G,ctx:U}),v.$set(se);const ce={};G&65539&&(ce.$$scope={dirty:G,ctx:U}),E.$set(ce);const _e={};G&65539&&(_e.$$scope={dirty:G,ctx:U}),I.$set(_e)},i(U){F||(Xe(t.$$.fragment,U),Xe(n.$$.fragment,U),Xe(u.$$.fragment,U),Xe(l.$$.fragment,U),Xe(v.$$.fragment,U),Xe(E.$$.fragment,U),Xe(I.$$.fragment,U),F=!0)},o(U){it(t.$$.fragment,U),it(n.$$.fragment,U),it(u.$$.fragment,U),it(l.$$.fragment,U),it(v.$$.fragment,U),it(E.$$.fragment,U),it(I.$$.fragment,U),F=!1},d(U){Vt(t,U),U&&ge(r),Vt(n,U),U&&ge(o),Vt(u,U),U&&ge(c),Vt(l,U),U&&ge(h),Vt(v,U),U&&ge(w),Vt(E,U),U&&ge(T),Vt(I,U)}}}function QD(e,t,r){let{map:n}=t,{layer:o}=t;function u(ee){n=ee,r(0,n)}function c(ee){o=ee,r(1,o)}function l(ee){n=ee,r(0,n)}function h(ee){o=ee,r(1,o)}function v(ee){n=ee,r(0,n)}function w(ee){o=ee,r(1,o)}function E(ee){n=ee,r(0,n)}function T(ee){o=ee,r(1,o)}function I(ee){n=ee,r(0,n)}function F(ee){o=ee,r(1,o)}function U(ee){n=ee,r(0,n)}function G(ee){o=ee,r(1,o)}function H(ee){n=ee,r(0,n)}function X(ee){o=ee,r(1,o)}return e.$$set=ee=>{"map"in ee&&r(0,n=ee.map),"layer"in ee&&r(1,o=ee.layer)},[n,o,u,c,l,h,v,w,E,T,I,F,U,G,H,X]}class ez extends Dn{constructor(t){super(),zn(this,t,QD,KD,Ln,{map:0,layer:1})}}function tz(e){let t,r,n;function o(c){e[3](c)}let u={min:0,max:10,step:.1,unit:""};return e[0]!==void 0&&(u.value=e[0]),t=new ns({props:u}),Ft.push(()=>Jt(t,"value",o)),{c(){Ut(t.$$.fragment)},l(c){Yt(t.$$.fragment,c)},m(c,l){qt(t,c,l),n=!0},p(c,[l]){const h={};!r&&l&1&&(r=!0,h.value=c[0],er(()=>r=!1)),t.$set(h)},i(c){n||(Xe(t.$$.fragment,c),n=!0)},o(c){it(t.$$.fragment,c),n=!1},d(c){Vt(t,c)}}}function rz(e,t,r){let{map:n}=t,{layer:o}=t,c=(()=>{let v=n.getPaintProperty(o.id,"heatmap-intensity");return v||(v=1),v})();const l=()=>{n==null||n.setPaintProperty(o.id,"heatmap-intensity",c)};function h(v){c=v,r(0,c)}return e.$$set=v=>{"map"in v&&r(1,n=v.map),"layer"in v&&r(2,o=v.layer)},e.$$.update=()=>{e.$$.dirty&1&&l()},[c,n,o,h]}class nz extends Dn{constructor(t){super(),zn(this,t,rz,tz,Ln,{map:1,layer:2})}}function iz(e){let t,r,n;function o(c){e[3](c)}let u={min:1,max:100,step:1,unit:""};return e[0]!==void 0&&(u.value=e[0]),t=new ns({props:u}),Ft.push(()=>Jt(t,"value",o)),{c(){Ut(t.$$.fragment)},l(c){Yt(t.$$.fragment,c)},m(c,l){qt(t,c,l),n=!0},p(c,[l]){const h={};!r&&l&1&&(r=!0,h.value=c[0],er(()=>r=!1)),t.$set(h)},i(c){n||(Xe(t.$$.fragment,c),n=!0)},o(c){it(t.$$.fragment,c),n=!1},d(c){Vt(t,c)}}}function oz(e,t,r){let{map:n}=t,{layer:o}=t,c=(()=>{let v=n.getPaintProperty(o.id,"heatmap-radius");return v||(v=30),v})();const l=()=>{n==null||n.setPaintProperty(o.id,"heatmap-radius",c)};function h(v){c=v,r(0,c)}return e.$$set=v=>{"map"in v&&r(1,n=v.map),"layer"in v&&r(2,o=v.layer)},e.$$.update=()=>{e.$$.dirty&1&&l()},[c,n,o,h]}class az extends Dn{constructor(t){super(),zn(this,t,oz,iz,Ln,{map:1,layer:2})}}function sz(e){let t,r,n;function o(c){e[3](c)}let u={min:0,max:10,step:.1,unit:""};return e[0]!==void 0&&(u.value=e[0]),t=new ns({props:u}),Ft.push(()=>Jt(t,"value",o)),{c(){Ut(t.$$.fragment)},l(c){Yt(t.$$.fragment,c)},m(c,l){qt(t,c,l),n=!0},p(c,[l]){const h={};!r&&l&1&&(r=!0,h.value=c[0],er(()=>r=!1)),t.$set(h)},i(c){n||(Xe(t.$$.fragment,c),n=!0)},o(c){it(t.$$.fragment,c),n=!1},d(c){Vt(t,c)}}}function lz(e,t,r){let{map:n}=t,{layer:o}=t,c=(()=>{let v=n.getPaintProperty(o.id,"heatmap-weight");return v||(v=30),v})();const l=()=>{n==null||n.setPaintProperty(o.id,"heatmap-weight",c)};function h(v){c=v,r(0,c)}return e.$$set=v=>{"map"in v&&r(1,n=v.map),"layer"in v&&r(2,o=v.layer)},e.$$.update=()=>{e.$$.dirty&1&&l()},[c,n,o,h]}class uz extends Dn{constructor(t){super(),zn(this,t,lz,sz,Ln,{map:1,layer:2})}}function i4(e,t,r){const n=e.slice();return n[11]=t[r],n[12]=t,n[13]=r,n}function o4(e){let t,r,n,o,u,c;function l(E){e[6](E,e[11])}function h(E){e[7](E,e[11])}function v(){return e[8](e[13])}let w={};return e[11].color!==void 0&&(w.color=e[11].color),e[11].value!==void 0&&(w.label=e[11].value),r=new e8({props:w}),Ft.push(()=>Jt(r,"color",l)),Ft.push(()=>Jt(r,"label",h)),r.$on("change",v),{c(){t=yt("div"),Ut(r.$$.fragment),u=mr(),this.h()},l(E){t=vt(E,"DIV",{class:!0});var T=Ct(t);Yt(r.$$.fragment,T),u=gr(T),T.forEach(ge),this.h()},h(){ve(t,"class","row svelte-zzq0ed")},m(E,T){Lt(E,t,T),qt(r,t,null),lt(t,u),c=!0},p(E,T){e=E;const I={};!n&&T&2&&(n=!0,I.color=e[11].color,er(()=>n=!1)),!o&&T&2&&(o=!0,I.label=e[11].value,er(()=>o=!1)),r.$set(I)},i(E){c||(Xe(r.$$.fragment,E),c=!0)},o(E){it(r.$$.fragment,E),c=!1},d(E){E&&ge(t),Vt(r)}}}function cz(e){let t,r,n,o,u,c,l=e[1],h=[];for(let w=0;w<l.length;w+=1)h[w]=o4(i4(e,l,w));const v=w=>it(h[w],1,1,()=>{h[w]=null});return{c(){t=yt("p"),r=ei("Rendered by "),n=ei(e[0]),o=mr(),u=yt("div");for(let w=0;w<h.length;w+=1)h[w].c();this.h()},l(w){t=vt(w,"P",{class:!0});var E=Ct(t);r=ti(E,"Rendered by "),n=ti(E,e[0]),E.forEach(ge),o=gr(w),u=vt(w,"DIV",{class:!0});var T=Ct(u);for(let I=0;I<h.length;I+=1)h[I].l(T);T.forEach(ge),this.h()},h(){ve(t,"class","description svelte-zzq0ed"),ve(u,"class","color-table svelte-zzq0ed")},m(w,E){Lt(w,t,E),lt(t,r),lt(t,n),Lt(w,o,E),Lt(w,u,E);for(let T=0;T<h.length;T+=1)h[T].m(u,null);c=!0},p(w,[E]){if((!c||E&1)&&ta(n,w[0]),E&6){l=w[1];let T;for(T=0;T<l.length;T+=1){const I=i4(w,l,T);h[T]?(h[T].p(I,E),Xe(h[T],1)):(h[T]=o4(I),h[T].c(),Xe(h[T],1),h[T].m(u,null))}for(ji(),T=l.length;T<h.length;T+=1)v(T);Ui()}},i(w){if(!c){for(let E=0;E<l.length;E+=1)Xe(h[E]);c=!0}},o(w){h=h.filter(Boolean);for(let E=0;E<h.length;E+=1)it(h[E]);c=!1},d(w){w&&ge(t),w&&ge(o),w&&ge(u),Ol(h,w)}}}const a4=3;function fz(e,t,r){let{map:n}=t,{layer:o}=t,u,c=[],h=(()=>{let F=n.getPaintProperty(o.id,"heatmap-color");if(F||(F=["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"]),F&&F.length>0&&F[0]!=="interpolate")throw Error("invalid color values");const U=F[2];r(0,u=U[0].replace("-"," ")),r(1,c=[]);for(let G=a4;G<F.length-1;G=G+2){const H=F[G],X=F[G+1],ee=op(X);c.push({color:ee.css(),value:`${H}`})}return F})();const v=()=>{n==null||n.setPaintProperty(o.id,"heatmap-color",h)},w=dv(F=>{const U=c[F];r(5,h[a4+(F+1)*2-1]=U.color,h)},100);function E(F,U){e.$$.not_equal(U.color,F)&&(U.color=F,r(1,c))}function T(F,U){e.$$.not_equal(U.value,F)&&(U.value=F,r(1,c))}const I=F=>w(F);return e.$$set=F=>{"map"in F&&r(3,n=F.map),"layer"in F&&r(4,o=F.layer)},e.$$.update=()=>{e.$$.dirty&32&&v()},[u,c,w,n,o,h,E,T,I]}class hz extends Dn{constructor(t){super(),zn(this,t,fz,cz,Ln,{map:3,layer:4})}}function pz(e){let t,r,n,o;function u(h){e[2](h)}function c(h){e[3](h)}let l={};return e[0]!==void 0&&(l.map=e[0]),e[1]!==void 0&&(l.layer=e[1]),t=new Bf({props:l}),Ft.push(()=>Jt(t,"map",u)),Ft.push(()=>Jt(t,"layer",c)),{c(){Ut(t.$$.fragment)},l(h){Yt(t.$$.fragment,h)},m(h,v){qt(t,h,v),o=!0},p(h,v){const w={};!r&&v&1&&(r=!0,w.map=h[0],er(()=>r=!1)),!n&&v&2&&(n=!0,w.layer=h[1],er(()=>n=!1)),t.$set(w)},i(h){o||(Xe(t.$$.fragment,h),o=!0)},o(h){it(t.$$.fragment,h),o=!1},d(h){Vt(t,h)}}}function dz(e){let t,r,n,o;function u(h){e[4](h)}function c(h){e[5](h)}let l={};return e[0]!==void 0&&(l.map=e[0]),e[1]!==void 0&&(l.layer=e[1]),t=new hz({props:l}),Ft.push(()=>Jt(t,"map",u)),Ft.push(()=>Jt(t,"layer",c)),{c(){Ut(t.$$.fragment)},l(h){Yt(t.$$.fragment,h)},m(h,v){qt(t,h,v),o=!0},p(h,v){const w={};!r&&v&1&&(r=!0,w.map=h[0],er(()=>r=!1)),!n&&v&2&&(n=!0,w.layer=h[1],er(()=>n=!1)),t.$set(w)},i(h){o||(Xe(t.$$.fragment,h),o=!0)},o(h){it(t.$$.fragment,h),o=!1},d(h){Vt(t,h)}}}function mz(e){let t,r,n,o;function u(h){e[6](h)}function c(h){e[7](h)}let l={};return e[0]!==void 0&&(l.map=e[0]),e[1]!==void 0&&(l.layer=e[1]),t=new nz({props:l}),Ft.push(()=>Jt(t,"map",u)),Ft.push(()=>Jt(t,"layer",c)),{c(){Ut(t.$$.fragment)},l(h){Yt(t.$$.fragment,h)},m(h,v){qt(t,h,v),o=!0},p(h,v){const w={};!r&&v&1&&(r=!0,w.map=h[0],er(()=>r=!1)),!n&&v&2&&(n=!0,w.layer=h[1],er(()=>n=!1)),t.$set(w)},i(h){o||(Xe(t.$$.fragment,h),o=!0)},o(h){it(t.$$.fragment,h),o=!1},d(h){Vt(t,h)}}}function gz(e){let t,r,n,o;function u(h){e[8](h)}function c(h){e[9](h)}let l={};return e[0]!==void 0&&(l.map=e[0]),e[1]!==void 0&&(l.layer=e[1]),t=new az({props:l}),Ft.push(()=>Jt(t,"map",u)),Ft.push(()=>Jt(t,"layer",c)),{c(){Ut(t.$$.fragment)},l(h){Yt(t.$$.fragment,h)},m(h,v){qt(t,h,v),o=!0},p(h,v){const w={};!r&&v&1&&(r=!0,w.map=h[0],er(()=>r=!1)),!n&&v&2&&(n=!0,w.layer=h[1],er(()=>n=!1)),t.$set(w)},i(h){o||(Xe(t.$$.fragment,h),o=!0)},o(h){it(t.$$.fragment,h),o=!1},d(h){Vt(t,h)}}}function yz(e){let t,r,n,o;function u(h){e[10](h)}function c(h){e[11](h)}let l={};return e[0]!==void 0&&(l.map=e[0]),e[1]!==void 0&&(l.layer=e[1]),t=new uz({props:l}),Ft.push(()=>Jt(t,"map",u)),Ft.push(()=>Jt(t,"layer",c)),{c(){Ut(t.$$.fragment)},l(h){Yt(t.$$.fragment,h)},m(h,v){qt(t,h,v),o=!0},p(h,v){const w={};!r&&v&1&&(r=!0,w.map=h[0],er(()=>r=!1)),!n&&v&2&&(n=!0,w.layer=h[1],er(()=>n=!1)),t.$set(w)},i(h){o||(Xe(t.$$.fragment,h),o=!0)},o(h){it(t.$$.fragment,h),o=!1},d(h){Vt(t,h)}}}function vz(e){let t,r,n,o,u,c,l,h,v,w;return t=new Wi({props:{title:"Opacity",help:{type:"paint",layerType:"heatmap",property:"heatmap-opacity"},$$slots:{default:[pz]},$$scope:{ctx:e}}}),n=new Wi({props:{title:"Heatmap color",help:{type:"paint",layerType:"heatmap",property:"heatmap-color"},$$slots:{default:[dz]},$$scope:{ctx:e}}}),u=new Wi({props:{title:"Heatmap intensity",help:{type:"paint",layerType:"heatmap",property:"heatmap-intensity"},$$slots:{default:[mz]},$$scope:{ctx:e}}}),l=new Wi({props:{title:"Heatmap radius",help:{type:"paint",layerType:"heatmap",property:"heatmap-radius"},$$slots:{default:[gz]},$$scope:{ctx:e}}}),v=new Wi({props:{title:"Heatmap weight",help:{type:"paint",layerType:"heatmap",property:"heatmap-weight"},$$slots:{default:[yz]},$$scope:{ctx:e}}}),{c(){Ut(t.$$.fragment),r=mr(),Ut(n.$$.fragment),o=mr(),Ut(u.$$.fragment),c=mr(),Ut(l.$$.fragment),h=mr(),Ut(v.$$.fragment)},l(E){Yt(t.$$.fragment,E),r=gr(E),Yt(n.$$.fragment,E),o=gr(E),Yt(u.$$.fragment,E),c=gr(E),Yt(l.$$.fragment,E),h=gr(E),Yt(v.$$.fragment,E)},m(E,T){qt(t,E,T),Lt(E,r,T),qt(n,E,T),Lt(E,o,T),qt(u,E,T),Lt(E,c,T),qt(l,E,T),Lt(E,h,T),qt(v,E,T),w=!0},p(E,[T]){const I={};T&4099&&(I.$$scope={dirty:T,ctx:E}),t.$set(I);const F={};T&4099&&(F.$$scope={dirty:T,ctx:E}),n.$set(F);const U={};T&4099&&(U.$$scope={dirty:T,ctx:E}),u.$set(U);const G={};T&4099&&(G.$$scope={dirty:T,ctx:E}),l.$set(G);const H={};T&4099&&(H.$$scope={dirty:T,ctx:E}),v.$set(H)},i(E){w||(Xe(t.$$.fragment,E),Xe(n.$$.fragment,E),Xe(u.$$.fragment,E),Xe(l.$$.fragment,E),Xe(v.$$.fragment,E),w=!0)},o(E){it(t.$$.fragment,E),it(n.$$.fragment,E),it(u.$$.fragment,E),it(l.$$.fragment,E),it(v.$$.fragment,E),w=!1},d(E){Vt(t,E),E&&ge(r),Vt(n,E),E&&ge(o),Vt(u,E),E&&ge(c),Vt(l,E),E&&ge(h),Vt(v,E)}}}function _z(e,t,r){let{map:n}=t,{layer:o}=t;function u(U){n=U,r(0,n)}function c(U){o=U,r(1,o)}function l(U){n=U,r(0,n)}function h(U){o=U,r(1,o)}function v(U){n=U,r(0,n)}function w(U){o=U,r(1,o)}function E(U){n=U,r(0,n)}function T(U){o=U,r(1,o)}function I(U){n=U,r(0,n)}function F(U){o=U,r(1,o)}return e.$$set=U=>{"map"in U&&r(0,n=U.map),"layer"in U&&r(1,o=U.layer)},[n,o,u,c,l,h,v,w,E,T,I,F]}class bz extends Dn{constructor(t){super(),zn(this,t,_z,vz,Ln,{map:0,layer:1})}}/*! js-yaml 4.1.0 https://github.com/nodeca/js-yaml @license MIT */function n8(e){return typeof e>"u"||e===null}function wz(e){return typeof e=="object"&&e!==null}function xz(e){return Array.isArray(e)?e:n8(e)?[]:[e]}function kz(e,t){var r,n,o,u;if(t)for(u=Object.keys(t),r=0,n=u.length;r<n;r+=1)o=u[r],e[o]=t[o];return e}function Az(e,t){var r="",n;for(n=0;n<t;n+=1)r+=e;return r}function Ez(e){return e===0&&Number.NEGATIVE_INFINITY===1/e}var Sz=n8,Cz=wz,Iz=xz,Tz=Az,Lz=Ez,Pz=kz,Qs={isNothing:Sz,isObject:Cz,toArray:Iz,repeat:Tz,isNegativeZero:Lz,extend:Pz};function i8(e,t){var r="",n=e.reason||"(unknown reason)";return e.mark?(e.mark.name&&(r+='in "'+e.mark.name+'" '),r+="("+(e.mark.line+1)+":"+(e.mark.column+1)+")",!t&&e.mark.snippet&&(r+=`

`+e.mark.snippet),n+" "+r):n}function fd(e,t){Error.call(this),this.name="YAMLException",this.reason=e,this.mark=t,this.message=i8(this,!1),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack||""}fd.prototype=Object.create(Error.prototype);fd.prototype.constructor=fd;fd.prototype.toString=function(t){return this.name+": "+i8(this,t)};var Du=fd;function Pm(e,t,r,n,o){var u="",c="",l=Math.floor(o/2)-1;return n-t>l&&(u=" ... ",t=n-l+u.length),r-n>l&&(c=" ...",r=n+l-c.length),{str:u+e.slice(t,r).replace(/\t/g,"")+c,pos:n-t+u.length}}function Mm(e,t){return Qs.repeat(" ",t-e.length)+e}function Mz(e,t){if(t=Object.create(t||null),!e.buffer)return null;t.maxLength||(t.maxLength=79),typeof t.indent!="number"&&(t.indent=1),typeof t.linesBefore!="number"&&(t.linesBefore=3),typeof t.linesAfter!="number"&&(t.linesAfter=2);for(var r=/\r?\n|\r|\0/g,n=[0],o=[],u,c=-1;u=r.exec(e.buffer);)o.push(u.index),n.push(u.index+u[0].length),e.position<=u.index&&c<0&&(c=n.length-2);c<0&&(c=n.length-1);var l="",h,v,w=Math.min(e.line+t.linesAfter,o.length).toString().length,E=t.maxLength-(t.indent+w+3);for(h=1;h<=t.linesBefore&&!(c-h<0);h++)v=Pm(e.buffer,n[c-h],o[c-h],e.position-(n[c]-n[c-h]),E),l=Qs.repeat(" ",t.indent)+Mm((e.line-h+1).toString(),w)+" | "+v.str+`
`+l;for(v=Pm(e.buffer,n[c],o[c],e.position,E),l+=Qs.repeat(" ",t.indent)+Mm((e.line+1).toString(),w)+" | "+v.str+`
`,l+=Qs.repeat("-",t.indent+w+3+v.pos)+`^
`,h=1;h<=t.linesAfter&&!(c+h>=o.length);h++)v=Pm(e.buffer,n[c+h],o[c+h],e.position-(n[c]-n[c+h]),E),l+=Qs.repeat(" ",t.indent)+Mm((e.line+h+1).toString(),w)+" | "+v.str+`
`;return l.replace(/\n$/,"")}var Dz=Mz,zz=["kind","multi","resolve","construct","instanceOf","predicate","represent","representName","defaultStyle","styleAliases"],Nz=["scalar","sequence","mapping"];function Rz(e){var t={};return e!==null&&Object.keys(e).forEach(function(r){e[r].forEach(function(n){t[String(n)]=r})}),t}function Oz(e,t){if(t=t||{},Object.keys(t).forEach(function(r){if(zz.indexOf(r)===-1)throw new Du('Unknown option "'+r+'" is met in definition of "'+e+'" YAML type.')}),this.options=t,this.tag=e,this.kind=t.kind||null,this.resolve=t.resolve||function(){return!0},this.construct=t.construct||function(r){return r},this.instanceOf=t.instanceOf||null,this.predicate=t.predicate||null,this.represent=t.represent||null,this.representName=t.representName||null,this.defaultStyle=t.defaultStyle||null,this.multi=t.multi||!1,this.styleAliases=Rz(t.styleAliases||null),Nz.indexOf(this.kind)===-1)throw new Du('Unknown kind "'+this.kind+'" is specified for "'+e+'" YAML type.')}var Ul=Oz;function s4(e,t){var r=[];return e[t].forEach(function(n){var o=r.length;r.forEach(function(u,c){u.tag===n.tag&&u.kind===n.kind&&u.multi===n.multi&&(o=c)}),r[o]=n}),r}function Fz(){var e={scalar:{},sequence:{},mapping:{},fallback:{},multi:{scalar:[],sequence:[],mapping:[],fallback:[]}},t,r;function n(o){o.multi?(e.multi[o.kind].push(o),e.multi.fallback.push(o)):e[o.kind][o.tag]=e.fallback[o.tag]=o}for(t=0,r=arguments.length;t<r;t+=1)arguments[t].forEach(n);return e}function ny(e){return this.extend(e)}ny.prototype.extend=function(t){var r=[],n=[];if(t instanceof Ul)n.push(t);else if(Array.isArray(t))n=n.concat(t);else if(t&&(Array.isArray(t.implicit)||Array.isArray(t.explicit)))t.implicit&&(r=r.concat(t.implicit)),t.explicit&&(n=n.concat(t.explicit));else throw new Du("Schema.extend argument should be a Type, [ Type ], or a schema definition ({ implicit: [...], explicit: [...] })");r.forEach(function(u){if(!(u instanceof Ul))throw new Du("Specified list of YAML types (or a single Type object) contains a non-Type object.");if(u.loadKind&&u.loadKind!=="scalar")throw new Du("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.");if(u.multi)throw new Du("There is a multi type in the implicit list of a schema. Multi tags can only be listed as explicit.")}),n.forEach(function(u){if(!(u instanceof Ul))throw new Du("Specified list of YAML types (or a single Type object) contains a non-Type object.")});var o=Object.create(ny.prototype);return o.implicit=(this.implicit||[]).concat(r),o.explicit=(this.explicit||[]).concat(n),o.compiledImplicit=s4(o,"implicit"),o.compiledExplicit=s4(o,"explicit"),o.compiledTypeMap=Fz(o.compiledImplicit,o.compiledExplicit),o};var o8=ny,a8=new Ul("tag:yaml.org,2002:str",{kind:"scalar",construct:function(e){return e!==null?e:""}}),s8=new Ul("tag:yaml.org,2002:seq",{kind:"sequence",construct:function(e){return e!==null?e:[]}}),l8=new Ul("tag:yaml.org,2002:map",{kind:"mapping",construct:function(e){return e!==null?e:{}}}),u8=new o8({explicit:[a8,s8,l8]});function Bz(e){if(e===null)return!0;var t=e.length;return t===1&&e==="~"||t===4&&(e==="null"||e==="Null"||e==="NULL")}function jz(){return null}function Uz(e){return e===null}var c8=new Ul("tag:yaml.org,2002:null",{kind:"scalar",resolve:Bz,construct:jz,predicate:Uz,represent:{canonical:function(){return"~"},lowercase:function(){return"null"},uppercase:function(){return"NULL"},camelcase:function(){return"Null"},empty:function(){return""}},defaultStyle:"lowercase"});function qz(e){if(e===null)return!1;var t=e.length;return t===4&&(e==="true"||e==="True"||e==="TRUE")||t===5&&(e==="false"||e==="False"||e==="FALSE")}function Vz(e){return e==="true"||e==="True"||e==="TRUE"}function $z(e){return Object.prototype.toString.call(e)==="[object Boolean]"}var f8=new Ul("tag:yaml.org,2002:bool",{kind:"scalar",resolve:qz,construct:Vz,predicate:$z,represent:{lowercase:function(e){return e?"true":"false"},uppercase:function(e){return e?"TRUE":"FALSE"},camelcase:function(e){return e?"True":"False"}},defaultStyle:"lowercase"});function Gz(e){return 48<=e&&e<=57||65<=e&&e<=70||97<=e&&e<=102}function Hz(e){return 48<=e&&e<=55}function Wz(e){return 48<=e&&e<=57}function Zz(e){if(e===null)return!1;var t=e.length,r=0,n=!1,o;if(!t)return!1;if(o=e[r],(o==="-"||o==="+")&&(o=e[++r]),o==="0"){if(r+1===t)return!0;if(o=e[++r],o==="b"){for(r++;r<t;r++)if(o=e[r],o!=="_"){if(o!=="0"&&o!=="1")return!1;n=!0}return n&&o!=="_"}if(o==="x"){for(r++;r<t;r++)if(o=e[r],o!=="_"){if(!Gz(e.charCodeAt(r)))return!1;n=!0}return n&&o!=="_"}if(o==="o"){for(r++;r<t;r++)if(o=e[r],o!=="_"){if(!Hz(e.charCodeAt(r)))return!1;n=!0}return n&&o!=="_"}}if(o==="_")return!1;for(;r<t;r++)if(o=e[r],o!=="_"){if(!Wz(e.charCodeAt(r)))return!1;n=!0}return!(!n||o==="_")}function Xz(e){var t=e,r=1,n;if(t.indexOf("_")!==-1&&(t=t.replace(/_/g,"")),n=t[0],(n==="-"||n==="+")&&(n==="-"&&(r=-1),t=t.slice(1),n=t[0]),t==="0")return 0;if(n==="0"){if(t[1]==="b")return r*parseInt(t.slice(2),2);if(t[1]==="x")return r*parseInt(t.slice(2),16);if(t[1]==="o")return r*parseInt(t.slice(2),8)}return r*parseInt(t,10)}function Yz(e){return Object.prototype.toString.call(e)==="[object Number]"&&e%1===0&&!Qs.isNegativeZero(e)}var h8=new Ul("tag:yaml.org,2002:int",{kind:"scalar",resolve:Zz,construct:Xz,predicate:Yz,represent:{binary:function(e){return e>=0?"0b"+e.toString(2):"-0b"+e.toString(2).slice(1)},octal:function(e){return e>=0?"0o"+e.toString(8):"-0o"+e.toString(8).slice(1)},decimal:function(e){return e.toString(10)},hexadecimal:function(e){return e>=0?"0x"+e.toString(16).toUpperCase():"-0x"+e.toString(16).toUpperCase().slice(1)}},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}}),Jz=new RegExp("^(?:[-+]?(?:[0-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$");function Kz(e){return!(e===null||!Jz.test(e)||e[e.length-1]==="_")}function Qz(e){var t,r;return t=e.replace(/_/g,"").toLowerCase(),r=t[0]==="-"?-1:1,"+-".indexOf(t[0])>=0&&(t=t.slice(1)),t===".inf"?r===1?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:t===".nan"?NaN:r*parseFloat(t,10)}var eN=/^[-+]?[0-9]+e/;function tN(e,t){var r;if(isNaN(e))switch(t){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===e)switch(t){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===e)switch(t){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(Qs.isNegativeZero(e))return"-0.0";return r=e.toString(10),eN.test(r)?r.replace("e",".e"):r}function rN(e){return Object.prototype.toString.call(e)==="[object Number]"&&(e%1!==0||Qs.isNegativeZero(e))}var p8=new Ul("tag:yaml.org,2002:float",{kind:"scalar",resolve:Kz,construct:Qz,predicate:rN,represent:tN,defaultStyle:"lowercase"}),d8=u8.extend({implicit:[c8,f8,h8,p8]}),m8=d8,g8=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),y8=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$");function nN(e){return e===null?!1:g8.exec(e)!==null||y8.exec(e)!==null}function iN(e){var t,r,n,o,u,c,l,h=0,v=null,w,E,T;if(t=g8.exec(e),t===null&&(t=y8.exec(e)),t===null)throw new Error("Date resolve error");if(r=+t[1],n=+t[2]-1,o=+t[3],!t[4])return new Date(Date.UTC(r,n,o));if(u=+t[4],c=+t[5],l=+t[6],t[7]){for(h=t[7].slice(0,3);h.length<3;)h+="0";h=+h}return t[9]&&(w=+t[10],E=+(t[11]||0),v=(w*60+E)*6e4,t[9]==="-"&&(v=-v)),T=new Date(Date.UTC(r,n,o,u,c,l,h)),v&&T.setTime(T.getTime()-v),T}function oN(e){return e.toISOString()}var v8=new Ul("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:nN,construct:iN,instanceOf:Date,represent:oN});function aN(e){return e==="<<"||e===null}var _8=new Ul("tag:yaml.org,2002:merge",{kind:"scalar",resolve:aN}),Ev=`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=
\r`;function sN(e){if(e===null)return!1;var t,r,n=0,o=e.length,u=Ev;for(r=0;r<o;r++)if(t=u.indexOf(e.charAt(r)),!(t>64)){if(t<0)return!1;n+=6}return n%8===0}function lN(e){var t,r,n=e.replace(/[\r\n=]/g,""),o=n.length,u=Ev,c=0,l=[];for(t=0;t<o;t++)t%4===0&&t&&(l.push(c>>16&255),l.push(c>>8&255),l.push(c&255)),c=c<<6|u.indexOf(n.charAt(t));return r=o%4*6,r===0?(l.push(c>>16&255),l.push(c>>8&255),l.push(c&255)):r===18?(l.push(c>>10&255),l.push(c>>2&255)):r===12&&l.push(c>>4&255),new Uint8Array(l)}function uN(e){var t="",r=0,n,o,u=e.length,c=Ev;for(n=0;n<u;n++)n%3===0&&n&&(t+=c[r>>18&63],t+=c[r>>12&63],t+=c[r>>6&63],t+=c[r&63]),r=(r<<8)+e[n];return o=u%3,o===0?(t+=c[r>>18&63],t+=c[r>>12&63],t+=c[r>>6&63],t+=c[r&63]):o===2?(t+=c[r>>10&63],t+=c[r>>4&63],t+=c[r<<2&63],t+=c[64]):o===1&&(t+=c[r>>2&63],t+=c[r<<4&63],t+=c[64],t+=c[64]),t}function cN(e){return Object.prototype.toString.call(e)==="[object Uint8Array]"}var b8=new Ul("tag:yaml.org,2002:binary",{kind:"scalar",resolve:sN,construct:lN,predicate:cN,represent:uN}),fN=Object.prototype.hasOwnProperty,hN=Object.prototype.toString;function pN(e){if(e===null)return!0;var t=[],r,n,o,u,c,l=e;for(r=0,n=l.length;r<n;r+=1){if(o=l[r],c=!1,hN.call(o)!=="[object Object]")return!1;for(u in o)if(fN.call(o,u))if(!c)c=!0;else return!1;if(!c)return!1;if(t.indexOf(u)===-1)t.push(u);else return!1}return!0}function dN(e){return e!==null?e:[]}var w8=new Ul("tag:yaml.org,2002:omap",{kind:"sequence",resolve:pN,construct:dN}),mN=Object.prototype.toString;function gN(e){if(e===null)return!0;var t,r,n,o,u,c=e;for(u=new Array(c.length),t=0,r=c.length;t<r;t+=1){if(n=c[t],mN.call(n)!=="[object Object]"||(o=Object.keys(n),o.length!==1))return!1;u[t]=[o[0],n[o[0]]]}return!0}function yN(e){if(e===null)return[];var t,r,n,o,u,c=e;for(u=new Array(c.length),t=0,r=c.length;t<r;t+=1)n=c[t],o=Object.keys(n),u[t]=[o[0],n[o[0]]];return u}var x8=new Ul("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:gN,construct:yN}),vN=Object.prototype.hasOwnProperty;function _N(e){if(e===null)return!0;var t,r=e;for(t in r)if(vN.call(r,t)&&r[t]!==null)return!1;return!0}function bN(e){return e!==null?e:{}}var k8=new Ul("tag:yaml.org,2002:set",{kind:"mapping",resolve:_N,construct:bN}),Sv=m8.extend({implicit:[v8,_8],explicit:[b8,w8,x8,k8]}),Nf=Object.prototype.hasOwnProperty,V1=1,A8=2,E8=3,$1=4,Dm=1,wN=2,l4=3,xN=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,kN=/[\x85\u2028\u2029]/,AN=/[,\[\]\{\}]/,S8=/^(?:!|!!|![a-z\-]+!)$/i,C8=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i;function u4(e){return Object.prototype.toString.call(e)}function j0(e){return e===10||e===13}function ah(e){return e===9||e===32}function tc(e){return e===9||e===32||e===10||e===13}function jh(e){return e===44||e===91||e===93||e===123||e===125}function EN(e){var t;return 48<=e&&e<=57?e-48:(t=e|32,97<=t&&t<=102?t-97+10:-1)}function SN(e){return e===120?2:e===117?4:e===85?8:0}function CN(e){return 48<=e&&e<=57?e-48:-1}function c4(e){return e===48?"\0":e===97?"\x07":e===98?"\b":e===116||e===9?"	":e===110?`
`:e===118?"\v":e===102?"\f":e===114?"\r":e===101?"\x1B":e===32?" ":e===34?'"':e===47?"/":e===92?"\\":e===78?"":e===95?"":e===76?"\u2028":e===80?"\u2029":""}function IN(e){return e<=65535?String.fromCharCode(e):String.fromCharCode((e-65536>>10)+55296,(e-65536&1023)+56320)}var I8=new Array(256),T8=new Array(256);for(var Ah=0;Ah<256;Ah++)I8[Ah]=c4(Ah)?1:0,T8[Ah]=c4(Ah);function TN(e,t){this.input=e,this.filename=t.filename||null,this.schema=t.schema||Sv,this.onWarning=t.onWarning||null,this.legacy=t.legacy||!1,this.json=t.json||!1,this.listener=t.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=e.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.firstTabInLine=-1,this.documents=[]}function L8(e,t){var r={name:e.filename,buffer:e.input.slice(0,-1),position:e.position,line:e.line,column:e.position-e.lineStart};return r.snippet=Dz(r),new Du(t,r)}function zi(e,t){throw L8(e,t)}function G1(e,t){e.onWarning&&e.onWarning.call(null,L8(e,t))}var f4={YAML:function(t,r,n){var o,u,c;t.version!==null&&zi(t,"duplication of %YAML directive"),n.length!==1&&zi(t,"YAML directive accepts exactly one argument"),o=/^([0-9]+)\.([0-9]+)$/.exec(n[0]),o===null&&zi(t,"ill-formed argument of the YAML directive"),u=parseInt(o[1],10),c=parseInt(o[2],10),u!==1&&zi(t,"unacceptable YAML version of the document"),t.version=n[0],t.checkLineBreaks=c<2,c!==1&&c!==2&&G1(t,"unsupported YAML version of the document")},TAG:function(t,r,n){var o,u;n.length!==2&&zi(t,"TAG directive accepts exactly two arguments"),o=n[0],u=n[1],S8.test(o)||zi(t,"ill-formed tag handle (first argument) of the TAG directive"),Nf.call(t.tagMap,o)&&zi(t,'there is a previously declared suffix for "'+o+'" tag handle'),C8.test(u)||zi(t,"ill-formed tag prefix (second argument) of the TAG directive");try{u=decodeURIComponent(u)}catch{zi(t,"tag prefix is malformed: "+u)}t.tagMap[o]=u}};function Tf(e,t,r,n){var o,u,c,l;if(t<r){if(l=e.input.slice(t,r),n)for(o=0,u=l.length;o<u;o+=1)c=l.charCodeAt(o),c===9||32<=c&&c<=1114111||zi(e,"expected valid JSON character");else xN.test(l)&&zi(e,"the stream contains non-printable characters");e.result+=l}}function h4(e,t,r,n){var o,u,c,l;for(Qs.isObject(r)||zi(e,"cannot merge mappings; the provided source object is unacceptable"),o=Object.keys(r),c=0,l=o.length;c<l;c+=1)u=o[c],Nf.call(t,u)||(t[u]=r[u],n[u]=!0)}function Uh(e,t,r,n,o,u,c,l,h){var v,w;if(Array.isArray(o))for(o=Array.prototype.slice.call(o),v=0,w=o.length;v<w;v+=1)Array.isArray(o[v])&&zi(e,"nested arrays are not supported inside keys"),typeof o=="object"&&u4(o[v])==="[object Object]"&&(o[v]="[object Object]");if(typeof o=="object"&&u4(o)==="[object Object]"&&(o="[object Object]"),o=String(o),t===null&&(t={}),n==="tag:yaml.org,2002:merge")if(Array.isArray(u))for(v=0,w=u.length;v<w;v+=1)h4(e,t,u[v],r);else h4(e,t,u,r);else!e.json&&!Nf.call(r,o)&&Nf.call(t,o)&&(e.line=c||e.line,e.lineStart=l||e.lineStart,e.position=h||e.position,zi(e,"duplicated mapping key")),o==="__proto__"?Object.defineProperty(t,o,{configurable:!0,enumerable:!0,writable:!0,value:u}):t[o]=u,delete r[o];return t}function Cv(e){var t;t=e.input.charCodeAt(e.position),t===10?e.position++:t===13?(e.position++,e.input.charCodeAt(e.position)===10&&e.position++):zi(e,"a line break is expected"),e.line+=1,e.lineStart=e.position,e.firstTabInLine=-1}function $s(e,t,r){for(var n=0,o=e.input.charCodeAt(e.position);o!==0;){for(;ah(o);)o===9&&e.firstTabInLine===-1&&(e.firstTabInLine=e.position),o=e.input.charCodeAt(++e.position);if(t&&o===35)do o=e.input.charCodeAt(++e.position);while(o!==10&&o!==13&&o!==0);if(j0(o))for(Cv(e),o=e.input.charCodeAt(e.position),n++,e.lineIndent=0;o===32;)e.lineIndent++,o=e.input.charCodeAt(++e.position);else break}return r!==-1&&n!==0&&e.lineIndent<r&&G1(e,"deficient indentation"),n}function y2(e){var t=e.position,r;return r=e.input.charCodeAt(t),!!((r===45||r===46)&&r===e.input.charCodeAt(t+1)&&r===e.input.charCodeAt(t+2)&&(t+=3,r=e.input.charCodeAt(t),r===0||tc(r)))}function Iv(e,t){t===1?e.result+=" ":t>1&&(e.result+=Qs.repeat(`
`,t-1))}function LN(e,t,r){var n,o,u,c,l,h,v,w,E=e.kind,T=e.result,I;if(I=e.input.charCodeAt(e.position),tc(I)||jh(I)||I===35||I===38||I===42||I===33||I===124||I===62||I===39||I===34||I===37||I===64||I===96||(I===63||I===45)&&(o=e.input.charCodeAt(e.position+1),tc(o)||r&&jh(o)))return!1;for(e.kind="scalar",e.result="",u=c=e.position,l=!1;I!==0;){if(I===58){if(o=e.input.charCodeAt(e.position+1),tc(o)||r&&jh(o))break}else if(I===35){if(n=e.input.charCodeAt(e.position-1),tc(n))break}else{if(e.position===e.lineStart&&y2(e)||r&&jh(I))break;if(j0(I))if(h=e.line,v=e.lineStart,w=e.lineIndent,$s(e,!1,-1),e.lineIndent>=t){l=!0,I=e.input.charCodeAt(e.position);continue}else{e.position=c,e.line=h,e.lineStart=v,e.lineIndent=w;break}}l&&(Tf(e,u,c,!1),Iv(e,e.line-h),u=c=e.position,l=!1),ah(I)||(c=e.position+1),I=e.input.charCodeAt(++e.position)}return Tf(e,u,c,!1),e.result?!0:(e.kind=E,e.result=T,!1)}function PN(e,t){var r,n,o;if(r=e.input.charCodeAt(e.position),r!==39)return!1;for(e.kind="scalar",e.result="",e.position++,n=o=e.position;(r=e.input.charCodeAt(e.position))!==0;)if(r===39)if(Tf(e,n,e.position,!0),r=e.input.charCodeAt(++e.position),r===39)n=e.position,e.position++,o=e.position;else return!0;else j0(r)?(Tf(e,n,o,!0),Iv(e,$s(e,!1,t)),n=o=e.position):e.position===e.lineStart&&y2(e)?zi(e,"unexpected end of the document within a single quoted scalar"):(e.position++,o=e.position);zi(e,"unexpected end of the stream within a single quoted scalar")}function MN(e,t){var r,n,o,u,c,l;if(l=e.input.charCodeAt(e.position),l!==34)return!1;for(e.kind="scalar",e.result="",e.position++,r=n=e.position;(l=e.input.charCodeAt(e.position))!==0;){if(l===34)return Tf(e,r,e.position,!0),e.position++,!0;if(l===92){if(Tf(e,r,e.position,!0),l=e.input.charCodeAt(++e.position),j0(l))$s(e,!1,t);else if(l<256&&I8[l])e.result+=T8[l],e.position++;else if((c=SN(l))>0){for(o=c,u=0;o>0;o--)l=e.input.charCodeAt(++e.position),(c=EN(l))>=0?u=(u<<4)+c:zi(e,"expected hexadecimal character");e.result+=IN(u),e.position++}else zi(e,"unknown escape sequence");r=n=e.position}else j0(l)?(Tf(e,r,n,!0),Iv(e,$s(e,!1,t)),r=n=e.position):e.position===e.lineStart&&y2(e)?zi(e,"unexpected end of the document within a double quoted scalar"):(e.position++,n=e.position)}zi(e,"unexpected end of the stream within a double quoted scalar")}function DN(e,t){var r=!0,n,o,u,c=e.tag,l,h=e.anchor,v,w,E,T,I,F=Object.create(null),U,G,H,X;if(X=e.input.charCodeAt(e.position),X===91)w=93,I=!1,l=[];else if(X===123)w=125,I=!0,l={};else return!1;for(e.anchor!==null&&(e.anchorMap[e.anchor]=l),X=e.input.charCodeAt(++e.position);X!==0;){if($s(e,!0,t),X=e.input.charCodeAt(e.position),X===w)return e.position++,e.tag=c,e.anchor=h,e.kind=I?"mapping":"sequence",e.result=l,!0;r?X===44&&zi(e,"expected the node content, but found ','"):zi(e,"missed comma between flow collection entries"),G=U=H=null,E=T=!1,X===63&&(v=e.input.charCodeAt(e.position+1),tc(v)&&(E=T=!0,e.position++,$s(e,!0,t))),n=e.line,o=e.lineStart,u=e.position,cp(e,t,V1,!1,!0),G=e.tag,U=e.result,$s(e,!0,t),X=e.input.charCodeAt(e.position),(T||e.line===n)&&X===58&&(E=!0,X=e.input.charCodeAt(++e.position),$s(e,!0,t),cp(e,t,V1,!1,!0),H=e.result),I?Uh(e,l,F,G,U,H,n,o,u):E?l.push(Uh(e,null,F,G,U,H,n,o,u)):l.push(U),$s(e,!0,t),X=e.input.charCodeAt(e.position),X===44?(r=!0,X=e.input.charCodeAt(++e.position)):r=!1}zi(e,"unexpected end of the stream within a flow collection")}function zN(e,t){var r,n,o=Dm,u=!1,c=!1,l=t,h=0,v=!1,w,E;if(E=e.input.charCodeAt(e.position),E===124)n=!1;else if(E===62)n=!0;else return!1;for(e.kind="scalar",e.result="";E!==0;)if(E=e.input.charCodeAt(++e.position),E===43||E===45)Dm===o?o=E===43?l4:wN:zi(e,"repeat of a chomping mode identifier");else if((w=CN(E))>=0)w===0?zi(e,"bad explicit indentation width of a block scalar; it cannot be less than one"):c?zi(e,"repeat of an indentation width identifier"):(l=t+w-1,c=!0);else break;if(ah(E)){do E=e.input.charCodeAt(++e.position);while(ah(E));if(E===35)do E=e.input.charCodeAt(++e.position);while(!j0(E)&&E!==0)}for(;E!==0;){for(Cv(e),e.lineIndent=0,E=e.input.charCodeAt(e.position);(!c||e.lineIndent<l)&&E===32;)e.lineIndent++,E=e.input.charCodeAt(++e.position);if(!c&&e.lineIndent>l&&(l=e.lineIndent),j0(E)){h++;continue}if(e.lineIndent<l){o===l4?e.result+=Qs.repeat(`
`,u?1+h:h):o===Dm&&u&&(e.result+=`
`);break}for(n?ah(E)?(v=!0,e.result+=Qs.repeat(`
`,u?1+h:h)):v?(v=!1,e.result+=Qs.repeat(`
`,h+1)):h===0?u&&(e.result+=" "):e.result+=Qs.repeat(`
`,h):e.result+=Qs.repeat(`
`,u?1+h:h),u=!0,c=!0,h=0,r=e.position;!j0(E)&&E!==0;)E=e.input.charCodeAt(++e.position);Tf(e,r,e.position,!1)}return!0}function p4(e,t){var r,n=e.tag,o=e.anchor,u=[],c,l=!1,h;if(e.firstTabInLine!==-1)return!1;for(e.anchor!==null&&(e.anchorMap[e.anchor]=u),h=e.input.charCodeAt(e.position);h!==0&&(e.firstTabInLine!==-1&&(e.position=e.firstTabInLine,zi(e,"tab characters must not be used in indentation")),!(h!==45||(c=e.input.charCodeAt(e.position+1),!tc(c))));){if(l=!0,e.position++,$s(e,!0,-1)&&e.lineIndent<=t){u.push(null),h=e.input.charCodeAt(e.position);continue}if(r=e.line,cp(e,t,E8,!1,!0),u.push(e.result),$s(e,!0,-1),h=e.input.charCodeAt(e.position),(e.line===r||e.lineIndent>t)&&h!==0)zi(e,"bad indentation of a sequence entry");else if(e.lineIndent<t)break}return l?(e.tag=n,e.anchor=o,e.kind="sequence",e.result=u,!0):!1}function NN(e,t,r){var n,o,u,c,l,h,v=e.tag,w=e.anchor,E={},T=Object.create(null),I=null,F=null,U=null,G=!1,H=!1,X;if(e.firstTabInLine!==-1)return!1;for(e.anchor!==null&&(e.anchorMap[e.anchor]=E),X=e.input.charCodeAt(e.position);X!==0;){if(!G&&e.firstTabInLine!==-1&&(e.position=e.firstTabInLine,zi(e,"tab characters must not be used in indentation")),n=e.input.charCodeAt(e.position+1),u=e.line,(X===63||X===58)&&tc(n))X===63?(G&&(Uh(e,E,T,I,F,null,c,l,h),I=F=U=null),H=!0,G=!0,o=!0):G?(G=!1,o=!0):zi(e,"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line"),e.position+=1,X=n;else{if(c=e.line,l=e.lineStart,h=e.position,!cp(e,r,A8,!1,!0))break;if(e.line===u){for(X=e.input.charCodeAt(e.position);ah(X);)X=e.input.charCodeAt(++e.position);if(X===58)X=e.input.charCodeAt(++e.position),tc(X)||zi(e,"a whitespace character is expected after the key-value separator within a block mapping"),G&&(Uh(e,E,T,I,F,null,c,l,h),I=F=U=null),H=!0,G=!1,o=!1,I=e.tag,F=e.result;else if(H)zi(e,"can not read an implicit mapping pair; a colon is missed");else return e.tag=v,e.anchor=w,!0}else if(H)zi(e,"can not read a block mapping entry; a multiline key may not be an implicit key");else return e.tag=v,e.anchor=w,!0}if((e.line===u||e.lineIndent>t)&&(G&&(c=e.line,l=e.lineStart,h=e.position),cp(e,t,$1,!0,o)&&(G?F=e.result:U=e.result),G||(Uh(e,E,T,I,F,U,c,l,h),I=F=U=null),$s(e,!0,-1),X=e.input.charCodeAt(e.position)),(e.line===u||e.lineIndent>t)&&X!==0)zi(e,"bad indentation of a mapping entry");else if(e.lineIndent<t)break}return G&&Uh(e,E,T,I,F,null,c,l,h),H&&(e.tag=v,e.anchor=w,e.kind="mapping",e.result=E),H}function RN(e){var t,r=!1,n=!1,o,u,c;if(c=e.input.charCodeAt(e.position),c!==33)return!1;if(e.tag!==null&&zi(e,"duplication of a tag property"),c=e.input.charCodeAt(++e.position),c===60?(r=!0,c=e.input.charCodeAt(++e.position)):c===33?(n=!0,o="!!",c=e.input.charCodeAt(++e.position)):o="!",t=e.position,r){do c=e.input.charCodeAt(++e.position);while(c!==0&&c!==62);e.position<e.length?(u=e.input.slice(t,e.position),c=e.input.charCodeAt(++e.position)):zi(e,"unexpected end of the stream within a verbatim tag")}else{for(;c!==0&&!tc(c);)c===33&&(n?zi(e,"tag suffix cannot contain exclamation marks"):(o=e.input.slice(t-1,e.position+1),S8.test(o)||zi(e,"named tag handle cannot contain such characters"),n=!0,t=e.position+1)),c=e.input.charCodeAt(++e.position);u=e.input.slice(t,e.position),AN.test(u)&&zi(e,"tag suffix cannot contain flow indicator characters")}u&&!C8.test(u)&&zi(e,"tag name cannot contain such characters: "+u);try{u=decodeURIComponent(u)}catch{zi(e,"tag name is malformed: "+u)}return r?e.tag=u:Nf.call(e.tagMap,o)?e.tag=e.tagMap[o]+u:o==="!"?e.tag="!"+u:o==="!!"?e.tag="tag:yaml.org,2002:"+u:zi(e,'undeclared tag handle "'+o+'"'),!0}function ON(e){var t,r;if(r=e.input.charCodeAt(e.position),r!==38)return!1;for(e.anchor!==null&&zi(e,"duplication of an anchor property"),r=e.input.charCodeAt(++e.position),t=e.position;r!==0&&!tc(r)&&!jh(r);)r=e.input.charCodeAt(++e.position);return e.position===t&&zi(e,"name of an anchor node must contain at least one character"),e.anchor=e.input.slice(t,e.position),!0}function FN(e){var t,r,n;if(n=e.input.charCodeAt(e.position),n!==42)return!1;for(n=e.input.charCodeAt(++e.position),t=e.position;n!==0&&!tc(n)&&!jh(n);)n=e.input.charCodeAt(++e.position);return e.position===t&&zi(e,"name of an alias node must contain at least one character"),r=e.input.slice(t,e.position),Nf.call(e.anchorMap,r)||zi(e,'unidentified alias "'+r+'"'),e.result=e.anchorMap[r],$s(e,!0,-1),!0}function cp(e,t,r,n,o){var u,c,l,h=1,v=!1,w=!1,E,T,I,F,U,G;if(e.listener!==null&&e.listener("open",e),e.tag=null,e.anchor=null,e.kind=null,e.result=null,u=c=l=$1===r||E8===r,n&&$s(e,!0,-1)&&(v=!0,e.lineIndent>t?h=1:e.lineIndent===t?h=0:e.lineIndent<t&&(h=-1)),h===1)for(;RN(e)||ON(e);)$s(e,!0,-1)?(v=!0,l=u,e.lineIndent>t?h=1:e.lineIndent===t?h=0:e.lineIndent<t&&(h=-1)):l=!1;if(l&&(l=v||o),(h===1||$1===r)&&(V1===r||A8===r?U=t:U=t+1,G=e.position-e.lineStart,h===1?l&&(p4(e,G)||NN(e,G,U))||DN(e,U)?w=!0:(c&&zN(e,U)||PN(e,U)||MN(e,U)?w=!0:FN(e)?(w=!0,(e.tag!==null||e.anchor!==null)&&zi(e,"alias node should not have any properties")):LN(e,U,V1===r)&&(w=!0,e.tag===null&&(e.tag="?")),e.anchor!==null&&(e.anchorMap[e.anchor]=e.result)):h===0&&(w=l&&p4(e,G))),e.tag===null)e.anchor!==null&&(e.anchorMap[e.anchor]=e.result);else if(e.tag==="?"){for(e.result!==null&&e.kind!=="scalar"&&zi(e,'unacceptable node kind for !<?> tag; it should be "scalar", not "'+e.kind+'"'),E=0,T=e.implicitTypes.length;E<T;E+=1)if(F=e.implicitTypes[E],F.resolve(e.result)){e.result=F.construct(e.result),e.tag=F.tag,e.anchor!==null&&(e.anchorMap[e.anchor]=e.result);break}}else if(e.tag!=="!"){if(Nf.call(e.typeMap[e.kind||"fallback"],e.tag))F=e.typeMap[e.kind||"fallback"][e.tag];else for(F=null,I=e.typeMap.multi[e.kind||"fallback"],E=0,T=I.length;E<T;E+=1)if(e.tag.slice(0,I[E].tag.length)===I[E].tag){F=I[E];break}F||zi(e,"unknown tag !<"+e.tag+">"),e.result!==null&&F.kind!==e.kind&&zi(e,"unacceptable node kind for !<"+e.tag+'> tag; it should be "'+F.kind+'", not "'+e.kind+'"'),F.resolve(e.result,e.tag)?(e.result=F.construct(e.result,e.tag),e.anchor!==null&&(e.anchorMap[e.anchor]=e.result)):zi(e,"cannot resolve a node with !<"+e.tag+"> explicit tag")}return e.listener!==null&&e.listener("close",e),e.tag!==null||e.anchor!==null||w}function BN(e){var t=e.position,r,n,o,u=!1,c;for(e.version=null,e.checkLineBreaks=e.legacy,e.tagMap=Object.create(null),e.anchorMap=Object.create(null);(c=e.input.charCodeAt(e.position))!==0&&($s(e,!0,-1),c=e.input.charCodeAt(e.position),!(e.lineIndent>0||c!==37));){for(u=!0,c=e.input.charCodeAt(++e.position),r=e.position;c!==0&&!tc(c);)c=e.input.charCodeAt(++e.position);for(n=e.input.slice(r,e.position),o=[],n.length<1&&zi(e,"directive name must not be less than one character in length");c!==0;){for(;ah(c);)c=e.input.charCodeAt(++e.position);if(c===35){do c=e.input.charCodeAt(++e.position);while(c!==0&&!j0(c));break}if(j0(c))break;for(r=e.position;c!==0&&!tc(c);)c=e.input.charCodeAt(++e.position);o.push(e.input.slice(r,e.position))}c!==0&&Cv(e),Nf.call(f4,n)?f4[n](e,n,o):G1(e,'unknown document directive "'+n+'"')}if($s(e,!0,-1),e.lineIndent===0&&e.input.charCodeAt(e.position)===45&&e.input.charCodeAt(e.position+1)===45&&e.input.charCodeAt(e.position+2)===45?(e.position+=3,$s(e,!0,-1)):u&&zi(e,"directives end mark is expected"),cp(e,e.lineIndent-1,$1,!1,!0),$s(e,!0,-1),e.checkLineBreaks&&kN.test(e.input.slice(t,e.position))&&G1(e,"non-ASCII line breaks are interpreted as content"),e.documents.push(e.result),e.position===e.lineStart&&y2(e)){e.input.charCodeAt(e.position)===46&&(e.position+=3,$s(e,!0,-1));return}if(e.position<e.length-1)zi(e,"end of the stream or a document separator is expected");else return}function P8(e,t){e=String(e),t=t||{},e.length!==0&&(e.charCodeAt(e.length-1)!==10&&e.charCodeAt(e.length-1)!==13&&(e+=`
`),e.charCodeAt(0)===65279&&(e=e.slice(1)));var r=new TN(e,t),n=e.indexOf("\0");for(n!==-1&&(r.position=n,zi(r,"null byte is not allowed in input")),r.input+="\0";r.input.charCodeAt(r.position)===32;)r.lineIndent+=1,r.position+=1;for(;r.position<r.length-1;)BN(r);return r.documents}function jN(e,t,r){t!==null&&typeof t=="object"&&typeof r>"u"&&(r=t,t=null);var n=P8(e,r);if(typeof t!="function")return n;for(var o=0,u=n.length;o<u;o+=1)t(n[o])}function UN(e,t){var r=P8(e,t);if(r.length!==0){if(r.length===1)return r[0];throw new Du("expected a single document in the stream, but found more")}}var qN=jN,VN=UN,M8={loadAll:qN,load:VN},D8=Object.prototype.toString,z8=Object.prototype.hasOwnProperty,Tv=65279,$N=9,hd=10,GN=13,HN=32,WN=33,ZN=34,iy=35,XN=37,YN=38,JN=39,KN=42,N8=44,QN=45,H1=58,eR=61,tR=62,rR=63,nR=64,R8=91,O8=93,iR=96,F8=123,oR=124,B8=125,hu={};hu[0]="\\0";hu[7]="\\a";hu[8]="\\b";hu[9]="\\t";hu[10]="\\n";hu[11]="\\v";hu[12]="\\f";hu[13]="\\r";hu[27]="\\e";hu[34]='\\"';hu[92]="\\\\";hu[133]="\\N";hu[160]="\\_";hu[8232]="\\L";hu[8233]="\\P";var aR=["y","Y","yes","Yes","YES","on","On","ON","n","N","no","No","NO","off","Off","OFF"],sR=/^[-+]?[0-9_]+(?::[0-9_]+)+(?:\.[0-9_]*)?$/;function lR(e,t){var r,n,o,u,c,l,h;if(t===null)return{};for(r={},n=Object.keys(t),o=0,u=n.length;o<u;o+=1)c=n[o],l=String(t[c]),c.slice(0,2)==="!!"&&(c="tag:yaml.org,2002:"+c.slice(2)),h=e.compiledTypeMap.fallback[c],h&&z8.call(h.styleAliases,l)&&(l=h.styleAliases[l]),r[c]=l;return r}function uR(e){var t,r,n;if(t=e.toString(16).toUpperCase(),e<=255)r="x",n=2;else if(e<=65535)r="u",n=4;else if(e<=4294967295)r="U",n=8;else throw new Du("code point within a string may not be greater than 0xFFFFFFFF");return"\\"+r+Qs.repeat("0",n-t.length)+t}var cR=1,pd=2;function fR(e){this.schema=e.schema||Sv,this.indent=Math.max(1,e.indent||2),this.noArrayIndent=e.noArrayIndent||!1,this.skipInvalid=e.skipInvalid||!1,this.flowLevel=Qs.isNothing(e.flowLevel)?-1:e.flowLevel,this.styleMap=lR(this.schema,e.styles||null),this.sortKeys=e.sortKeys||!1,this.lineWidth=e.lineWidth||80,this.noRefs=e.noRefs||!1,this.noCompatMode=e.noCompatMode||!1,this.condenseFlow=e.condenseFlow||!1,this.quotingType=e.quotingType==='"'?pd:cR,this.forceQuotes=e.forceQuotes||!1,this.replacer=typeof e.replacer=="function"?e.replacer:null,this.implicitTypes=this.schema.compiledImplicit,this.explicitTypes=this.schema.compiledExplicit,this.tag=null,this.result="",this.duplicates=[],this.usedDuplicates=null}function d4(e,t){for(var r=Qs.repeat(" ",t),n=0,o=-1,u="",c,l=e.length;n<l;)o=e.indexOf(`
`,n),o===-1?(c=e.slice(n),n=l):(c=e.slice(n,o+1),n=o+1),c.length&&c!==`
`&&(u+=r),u+=c;return u}function oy(e,t){return`
`+Qs.repeat(" ",e.indent*t)}function hR(e,t){var r,n,o;for(r=0,n=e.implicitTypes.length;r<n;r+=1)if(o=e.implicitTypes[r],o.resolve(t))return!0;return!1}function W1(e){return e===HN||e===$N}function dd(e){return 32<=e&&e<=126||161<=e&&e<=55295&&e!==8232&&e!==8233||57344<=e&&e<=65533&&e!==Tv||65536<=e&&e<=1114111}function m4(e){return dd(e)&&e!==Tv&&e!==GN&&e!==hd}function g4(e,t,r){var n=m4(e),o=n&&!W1(e);return(r?n:n&&e!==N8&&e!==R8&&e!==O8&&e!==F8&&e!==B8)&&e!==iy&&!(t===H1&&!o)||m4(t)&&!W1(t)&&e===iy||t===H1&&o}function pR(e){return dd(e)&&e!==Tv&&!W1(e)&&e!==QN&&e!==rR&&e!==H1&&e!==N8&&e!==R8&&e!==O8&&e!==F8&&e!==B8&&e!==iy&&e!==YN&&e!==KN&&e!==WN&&e!==oR&&e!==eR&&e!==tR&&e!==JN&&e!==ZN&&e!==XN&&e!==nR&&e!==iR}function dR(e){return!W1(e)&&e!==H1}function Up(e,t){var r=e.charCodeAt(t),n;return r>=55296&&r<=56319&&t+1<e.length&&(n=e.charCodeAt(t+1),n>=56320&&n<=57343)?(r-55296)*1024+n-56320+65536:r}function j8(e){var t=/^\n* /;return t.test(e)}var U8=1,ay=2,q8=3,V8=4,zh=5;function mR(e,t,r,n,o,u,c,l){var h,v=0,w=null,E=!1,T=!1,I=n!==-1,F=-1,U=pR(Up(e,0))&&dR(Up(e,e.length-1));if(t||c)for(h=0;h<e.length;v>=65536?h+=2:h++){if(v=Up(e,h),!dd(v))return zh;U=U&&g4(v,w,l),w=v}else{for(h=0;h<e.length;v>=65536?h+=2:h++){if(v=Up(e,h),v===hd)E=!0,I&&(T=T||h-F-1>n&&e[F+1]!==" ",F=h);else if(!dd(v))return zh;U=U&&g4(v,w,l),w=v}T=T||I&&h-F-1>n&&e[F+1]!==" "}return!E&&!T?U&&!c&&!o(e)?U8:u===pd?zh:ay:r>9&&j8(e)?zh:c?u===pd?zh:ay:T?V8:q8}function gR(e,t,r,n,o){e.dump=function(){if(t.length===0)return e.quotingType===pd?'""':"''";if(!e.noCompatMode&&(aR.indexOf(t)!==-1||sR.test(t)))return e.quotingType===pd?'"'+t+'"':"'"+t+"'";var u=e.indent*Math.max(1,r),c=e.lineWidth===-1?-1:Math.max(Math.min(e.lineWidth,40),e.lineWidth-u),l=n||e.flowLevel>-1&&r>=e.flowLevel;function h(v){return hR(e,v)}switch(mR(t,l,e.indent,c,h,e.quotingType,e.forceQuotes&&!n,o)){case U8:return t;case ay:return"'"+t.replace(/'/g,"''")+"'";case q8:return"|"+y4(t,e.indent)+v4(d4(t,u));case V8:return">"+y4(t,e.indent)+v4(d4(yR(t,c),u));case zh:return'"'+vR(t)+'"';default:throw new Du("impossible error: invalid scalar style")}}()}function y4(e,t){var r=j8(e)?String(t):"",n=e[e.length-1]===`
`,o=n&&(e[e.length-2]===`
`||e===`
`),u=o?"+":n?"":"-";return r+u+`
`}function v4(e){return e[e.length-1]===`
`?e.slice(0,-1):e}function yR(e,t){for(var r=/(\n+)([^\n]*)/g,n=function(){var v=e.indexOf(`
`);return v=v!==-1?v:e.length,r.lastIndex=v,_4(e.slice(0,v),t)}(),o=e[0]===`
`||e[0]===" ",u,c;c=r.exec(e);){var l=c[1],h=c[2];u=h[0]===" ",n+=l+(!o&&!u&&h!==""?`
`:"")+_4(h,t),o=u}return n}function _4(e,t){if(e===""||e[0]===" ")return e;for(var r=/ [^ ]/g,n,o=0,u,c=0,l=0,h="";n=r.exec(e);)l=n.index,l-o>t&&(u=c>o?c:l,h+=`
`+e.slice(o,u),o=u+1),c=l;return h+=`
`,e.length-o>t&&c>o?h+=e.slice(o,c)+`
`+e.slice(c+1):h+=e.slice(o),h.slice(1)}function vR(e){for(var t="",r=0,n,o=0;o<e.length;r>=65536?o+=2:o++)r=Up(e,o),n=hu[r],!n&&dd(r)?(t+=e[o],r>=65536&&(t+=e[o+1])):t+=n||uR(r);return t}function _R(e,t,r){var n="",o=e.tag,u,c,l;for(u=0,c=r.length;u<c;u+=1)l=r[u],e.replacer&&(l=e.replacer.call(r,String(u),l)),(ff(e,t,l,!1,!1)||typeof l>"u"&&ff(e,t,null,!1,!1))&&(n!==""&&(n+=","+(e.condenseFlow?"":" ")),n+=e.dump);e.tag=o,e.dump="["+n+"]"}function b4(e,t,r,n){var o="",u=e.tag,c,l,h;for(c=0,l=r.length;c<l;c+=1)h=r[c],e.replacer&&(h=e.replacer.call(r,String(c),h)),(ff(e,t+1,h,!0,!0,!1,!0)||typeof h>"u"&&ff(e,t+1,null,!0,!0,!1,!0))&&((!n||o!=="")&&(o+=oy(e,t)),e.dump&&hd===e.dump.charCodeAt(0)?o+="-":o+="- ",o+=e.dump);e.tag=u,e.dump=o||"[]"}function bR(e,t,r){var n="",o=e.tag,u=Object.keys(r),c,l,h,v,w;for(c=0,l=u.length;c<l;c+=1)w="",n!==""&&(w+=", "),e.condenseFlow&&(w+='"'),h=u[c],v=r[h],e.replacer&&(v=e.replacer.call(r,h,v)),ff(e,t,h,!1,!1)&&(e.dump.length>1024&&(w+="? "),w+=e.dump+(e.condenseFlow?'"':"")+":"+(e.condenseFlow?"":" "),ff(e,t,v,!1,!1)&&(w+=e.dump,n+=w));e.tag=o,e.dump="{"+n+"}"}function wR(e,t,r,n){var o="",u=e.tag,c=Object.keys(r),l,h,v,w,E,T;if(e.sortKeys===!0)c.sort();else if(typeof e.sortKeys=="function")c.sort(e.sortKeys);else if(e.sortKeys)throw new Du("sortKeys must be a boolean or a function");for(l=0,h=c.length;l<h;l+=1)T="",(!n||o!=="")&&(T+=oy(e,t)),v=c[l],w=r[v],e.replacer&&(w=e.replacer.call(r,v,w)),ff(e,t+1,v,!0,!0,!0)&&(E=e.tag!==null&&e.tag!=="?"||e.dump&&e.dump.length>1024,E&&(e.dump&&hd===e.dump.charCodeAt(0)?T+="?":T+="? "),T+=e.dump,E&&(T+=oy(e,t)),ff(e,t+1,w,!0,E)&&(e.dump&&hd===e.dump.charCodeAt(0)?T+=":":T+=": ",T+=e.dump,o+=T));e.tag=u,e.dump=o||"{}"}function w4(e,t,r){var n,o,u,c,l,h;for(o=r?e.explicitTypes:e.implicitTypes,u=0,c=o.length;u<c;u+=1)if(l=o[u],(l.instanceOf||l.predicate)&&(!l.instanceOf||typeof t=="object"&&t instanceof l.instanceOf)&&(!l.predicate||l.predicate(t))){if(r?l.multi&&l.representName?e.tag=l.representName(t):e.tag=l.tag:e.tag="?",l.represent){if(h=e.styleMap[l.tag]||l.defaultStyle,D8.call(l.represent)==="[object Function]")n=l.represent(t,h);else if(z8.call(l.represent,h))n=l.represent[h](t,h);else throw new Du("!<"+l.tag+'> tag resolver accepts not "'+h+'" style');e.dump=n}return!0}return!1}function ff(e,t,r,n,o,u,c){e.tag=null,e.dump=r,w4(e,r,!1)||w4(e,r,!0);var l=D8.call(e.dump),h=n,v;n&&(n=e.flowLevel<0||e.flowLevel>t);var w=l==="[object Object]"||l==="[object Array]",E,T;if(w&&(E=e.duplicates.indexOf(r),T=E!==-1),(e.tag!==null&&e.tag!=="?"||T||e.indent!==2&&t>0)&&(o=!1),T&&e.usedDuplicates[E])e.dump="*ref_"+E;else{if(w&&T&&!e.usedDuplicates[E]&&(e.usedDuplicates[E]=!0),l==="[object Object]")n&&Object.keys(e.dump).length!==0?(wR(e,t,e.dump,o),T&&(e.dump="&ref_"+E+e.dump)):(bR(e,t,e.dump),T&&(e.dump="&ref_"+E+" "+e.dump));else if(l==="[object Array]")n&&e.dump.length!==0?(e.noArrayIndent&&!c&&t>0?b4(e,t-1,e.dump,o):b4(e,t,e.dump,o),T&&(e.dump="&ref_"+E+e.dump)):(_R(e,t,e.dump),T&&(e.dump="&ref_"+E+" "+e.dump));else if(l==="[object String]")e.tag!=="?"&&gR(e,e.dump,t,u,h);else{if(l==="[object Undefined]")return!1;if(e.skipInvalid)return!1;throw new Du("unacceptable kind of an object to dump "+l)}e.tag!==null&&e.tag!=="?"&&(v=encodeURI(e.tag[0]==="!"?e.tag.slice(1):e.tag).replace(/!/g,"%21"),e.tag[0]==="!"?v="!"+v:v.slice(0,18)==="tag:yaml.org,2002:"?v="!!"+v.slice(18):v="!<"+v+">",e.dump=v+" "+e.dump)}return!0}function xR(e,t){var r=[],n=[],o,u;for(sy(e,r,n),o=0,u=n.length;o<u;o+=1)t.duplicates.push(r[n[o]]);t.usedDuplicates=new Array(u)}function sy(e,t,r){var n,o,u;if(e!==null&&typeof e=="object")if(o=t.indexOf(e),o!==-1)r.indexOf(o)===-1&&r.push(o);else if(t.push(e),Array.isArray(e))for(o=0,u=e.length;o<u;o+=1)sy(e[o],t,r);else for(n=Object.keys(e),o=0,u=n.length;o<u;o+=1)sy(e[n[o]],t,r)}function kR(e,t){t=t||{};var r=new fR(t);r.noRefs||xR(e,r);var n=e;return r.replacer&&(n=r.replacer.call({"":n},"",n)),ff(r,0,n,!0,!0)?r.dump+`
`:""}var AR=kR,ER={dump:AR};function Lv(e,t){return function(){throw new Error("Function yaml."+e+" is removed in js-yaml 4. Use yaml."+t+" instead, which is now safe by default.")}}var SR=Ul,CR=o8,IR=u8,TR=d8,LR=m8,PR=Sv,MR=M8.load,DR=M8.loadAll,zR=ER.dump,NR=Du,RR={binary:b8,float:p8,map:l8,null:c8,pairs:x8,set:k8,timestamp:v8,bool:f8,int:h8,merge:_8,omap:w8,seq:s8,str:a8},OR=Lv("safeLoad","load"),FR=Lv("safeLoadAll","loadAll"),BR=Lv("safeDump","dump"),c1={Type:SR,Schema:CR,FAILSAFE_SCHEMA:IR,JSON_SCHEMA:TR,CORE_SCHEMA:LR,DEFAULT_SCHEMA:PR,load:MR,loadAll:DR,dump:zR,YAMLException:NR,types:RR,safeLoad:OR,safeLoadAll:FR,safeDump:BR};function jR(e){let t,r,n,o,u,c,l,h,v,w,E,T,I,F,U,G,H,X,ee,K;n=new go({props:{icon:r7,size:"2x"}});function se(pe){e[7](pe)}function ce(pe){e[8](pe)}let _e={};return e[1]!==void 0&&(_e.options=e[1]),e[0]!==void 0&&(_e.selectedValue=e[0]),u=new g2({props:_e}),Ft.push(()=>Jt(u,"options",se)),Ft.push(()=>Jt(u,"selectedValue",ce)),{c(){t=yt("div"),r=yt("span"),Ut(n.$$.fragment),o=mr(),Ut(u.$$.fragment),h=mr(),v=yt("p"),w=ei("Paint editor"),E=mr(),T=yt("textarea"),I=mr(),F=yt("p"),U=ei("Layout editor"),G=mr(),H=yt("textarea"),this.h()},l(pe){t=vt(pe,"DIV",{class:!0});var Ge=Ct(t);r=vt(Ge,"SPAN",{role:!0,class:!0,"data-tooltip":!0});var We=Ct(r);Yt(n.$$.fragment,We),We.forEach(ge),o=gr(Ge),Yt(u.$$.fragment,Ge),Ge.forEach(ge),h=gr(pe),v=vt(pe,"P",{class:!0});var Ae=Ct(v);w=ti(Ae,"Paint editor"),Ae.forEach(ge),E=gr(pe),T=vt(pe,"TEXTAREA",{class:!0}),Ct(T).forEach(ge),I=gr(pe),F=vt(pe,"P",{class:!0});var Ie=Ct(F);U=ti(Ie,"Layout editor"),Ie.forEach(ge),G=gr(pe),H=vt(pe,"TEXTAREA",{class:!0}),Ct(H).forEach(ge),this.h()},h(){ve(r,"role","button"),ve(r,"class","menu-button has-tooltip-bottom has-tooltip-arrow svelte-jokktb"),ve(r,"data-tooltip","Apply to map"),ve(t,"class","menu-buttons svelte-jokktb"),ve(v,"class","editor-title svelte-jokktb"),ve(T,"class","manual-editor svelte-jokktb"),ve(F,"class","editor-title svelte-jokktb"),ve(H,"class","manual-editor svelte-jokktb")},m(pe,Ge){Lt(pe,t,Ge),lt(t,r),qt(n,r,null),lt(t,o),qt(u,t,null),Lt(pe,h,Ge),Lt(pe,v,Ge),lt(v,w),Lt(pe,E,Ge),Lt(pe,T,Ge),N0(T,e[3]),Lt(pe,I,Ge),Lt(pe,F,Ge),lt(F,U),Lt(pe,G,Ge),Lt(pe,H,Ge),N0(H,e[2]),X=!0,ee||(K=[rn(r,"click",e[4]),rn(T,"input",e[9]),rn(H,"input",e[10])],ee=!0)},p(pe,[Ge]){const We={};!c&&Ge&2&&(c=!0,We.options=pe[1],er(()=>c=!1)),!l&&Ge&1&&(l=!0,We.selectedValue=pe[0],er(()=>l=!1)),u.$set(We),Ge&8&&N0(T,pe[3]),Ge&4&&N0(H,pe[2])},i(pe){X||(Xe(n.$$.fragment,pe),Xe(u.$$.fragment,pe),X=!0)},o(pe){it(n.$$.fragment,pe),it(u.$$.fragment,pe),X=!1},d(pe){pe&&ge(t),Vt(n),Vt(u),pe&&ge(h),pe&&ge(v),pe&&ge(E),pe&&ge(T),pe&&ge(I),pe&&ge(F),pe&&ge(G),pe&&ge(H),ee=!1,oa(K)}}}function UR(e,t,r){let{map:n}=t,{layer:o}=t,u=[{title:"YAML",value:"yaml"},{title:"JSON",value:"json"}],{selectedFormat:c}=t,l="",h="";Ff(()=>{r(2,l=v("layout")),r(3,h=v("paint"))});const v=X=>c==="yaml"?c1.dump(o[X]):JSON.stringify(o[X],null,4),w=X=>{let ee=h;if(X==="layout"&&(ee=l),!ee)return"";let K="";return c==="yaml"?K=c1.dump(JSON.parse(ee)):K=JSON.stringify(c1.load(ee),null,4),K},E=X=>{let ee,K=l;return X==="paint"&&(K=h),c==="yaml"?ee=c1.load(K):ee=JSON.parse(K),ee},T=()=>{const X=E("layout");if(X){const K=Object.keys(X);for(const se of K)n.setLayoutProperty(o.id,se,X[se])}r(5,o.layout=X,o);const ee=E("paint");if(ee){const K=Object.keys(ee);for(const se of K)n.setPaintProperty(o.id,se,ee[se])}r(5,o.paint=ee,o)},I=()=>{r(2,l=w("layout")),r(3,h=w("paint"))};function F(X){u=X,r(1,u)}function U(X){c=X,r(0,c)}function G(){h=this.value,r(3,h)}function H(){l=this.value,r(2,l)}return e.$$set=X=>{"map"in X&&r(6,n=X.map),"layer"in X&&r(5,o=X.layer),"selectedFormat"in X&&r(0,c=X.selectedFormat)},e.$$.update=()=>{e.$$.dirty&1&&I()},[c,u,l,h,T,o,n,F,U,G,H]}class qR extends Dn{constructor(t){super(),zn(this,t,UR,jR,Ln,{map:6,layer:5,selectedFormat:0})}}var VR="tippy-box",$8="tippy-content",$R="tippy-backdrop",G8="tippy-arrow",H8="tippy-svg-arrow",Jf={passive:!0,capture:!0},W8=function(){return document.body};function zm(e,t,r){if(Array.isArray(e)){var n=e[t];return n??(Array.isArray(r)?r[t]:r)}return e}function Pv(e,t){var r={}.toString.call(e);return r.indexOf("[object")===0&&r.indexOf(t+"]")>-1}function Z8(e,t){return typeof e=="function"?e.apply(void 0,t):e}function x4(e,t){if(t===0)return e;var r;return function(n){clearTimeout(r),r=setTimeout(function(){e(n)},t)}}function GR(e){return e.split(/\s+/).filter(Boolean)}function Nh(e){return[].concat(e)}function k4(e,t){e.indexOf(t)===-1&&e.push(t)}function HR(e){return e.filter(function(t,r){return e.indexOf(t)===r})}function WR(e){return e.split("-")[0]}function Z1(e){return[].slice.call(e)}function A4(e){return Object.keys(e).reduce(function(t,r){return e[r]!==void 0&&(t[r]=e[r]),t},{})}function Jp(){return document.createElement("div")}function v2(e){return["Element","Fragment"].some(function(t){return Pv(e,t)})}function ZR(e){return Pv(e,"NodeList")}function XR(e){return Pv(e,"MouseEvent")}function YR(e){return!!(e&&e._tippy&&e._tippy.reference===e)}function JR(e){return v2(e)?[e]:ZR(e)?Z1(e):Array.isArray(e)?e:Z1(document.querySelectorAll(e))}function Nm(e,t){e.forEach(function(r){r&&(r.style.transitionDuration=t+"ms")})}function E4(e,t){e.forEach(function(r){r&&r.setAttribute("data-state",t)})}function KR(e){var t,r=Nh(e),n=r[0];return n!=null&&(t=n.ownerDocument)!=null&&t.body?n.ownerDocument:document}function QR(e,t){var r=t.clientX,n=t.clientY;return e.every(function(o){var u=o.popperRect,c=o.popperState,l=o.props,h=l.interactiveBorder,v=WR(c.placement),w=c.modifiersData.offset;if(!w)return!0;var E=v==="bottom"?w.top.y:0,T=v==="top"?w.bottom.y:0,I=v==="right"?w.left.x:0,F=v==="left"?w.right.x:0,U=u.top-n+E>h,G=n-u.bottom-T>h,H=u.left-r+I>h,X=r-u.right-F>h;return U||G||H||X})}function Rm(e,t,r){var n=t+"EventListener";["transitionend","webkitTransitionEnd"].forEach(function(o){e[n](o,r)})}function S4(e,t){for(var r=t;r;){var n;if(e.contains(r))return!0;r=r.getRootNode==null||(n=r.getRootNode())==null?void 0:n.host}return!1}var M0={isTouch:!1},C4=0;function eO(){M0.isTouch||(M0.isTouch=!0,window.performance&&document.addEventListener("mousemove",X8))}function X8(){var e=performance.now();e-C4<20&&(M0.isTouch=!1,document.removeEventListener("mousemove",X8)),C4=e}function tO(){var e=document.activeElement;if(YR(e)){var t=e._tippy;e.blur&&!t.state.isVisible&&e.blur()}}function rO(){document.addEventListener("touchstart",eO,Jf),window.addEventListener("blur",tO)}var nO=typeof window<"u"&&typeof document<"u",iO=nO?!!window.msCrypto:!1,oO={animateFill:!1,followCursor:!1,inlinePositioning:!1,sticky:!1},aO={allowHTML:!1,animation:"fade",arrow:!0,content:"",inertia:!1,maxWidth:350,role:"tooltip",theme:"",zIndex:9999},d0=Object.assign({appendTo:W8,aria:{content:"auto",expanded:"auto"},delay:0,duration:[300,250],getReferenceClientRect:null,hideOnClick:!0,ignoreAttributes:!1,interactive:!1,interactiveBorder:2,interactiveDebounce:0,moveTransition:"",offset:[0,10],onAfterUpdate:function(){},onBeforeUpdate:function(){},onCreate:function(){},onDestroy:function(){},onHidden:function(){},onHide:function(){},onMount:function(){},onShow:function(){},onShown:function(){},onTrigger:function(){},onUntrigger:function(){},onClickOutside:function(){},placement:"top",plugins:[],popperOptions:{},render:null,showOnCreate:!1,touch:!0,trigger:"mouseenter focus",triggerTarget:null},oO,aO),sO=Object.keys(d0),lO=function(t){var r=Object.keys(t);r.forEach(function(n){d0[n]=t[n]})};function Y8(e){var t=e.plugins||[],r=t.reduce(function(n,o){var u=o.name,c=o.defaultValue;if(u){var l;n[u]=e[u]!==void 0?e[u]:(l=d0[u])!=null?l:c}return n},{});return Object.assign({},e,r)}function uO(e,t){var r=t?Object.keys(Y8(Object.assign({},d0,{plugins:t}))):sO,n=r.reduce(function(o,u){var c=(e.getAttribute("data-tippy-"+u)||"").trim();if(!c)return o;if(u==="content")o[u]=c;else try{o[u]=JSON.parse(c)}catch{o[u]=c}return o},{});return n}function I4(e,t){var r=Object.assign({},t,{content:Z8(t.content,[e])},t.ignoreAttributes?{}:uO(e,t.plugins));return r.aria=Object.assign({},d0.aria,r.aria),r.aria={expanded:r.aria.expanded==="auto"?t.interactive:r.aria.expanded,content:r.aria.content==="auto"?t.interactive?null:"describedby":r.aria.content},r}var cO=function(){return"innerHTML"};function ly(e,t){e[cO()]=t}function T4(e){var t=Jp();return e===!0?t.className=G8:(t.className=H8,v2(e)?t.appendChild(e):ly(t,e)),t}function L4(e,t){v2(t.content)?(ly(e,""),e.appendChild(t.content)):typeof t.content!="function"&&(t.allowHTML?ly(e,t.content):e.textContent=t.content)}function uy(e){var t=e.firstElementChild,r=Z1(t.children);return{box:t,content:r.find(function(n){return n.classList.contains($8)}),arrow:r.find(function(n){return n.classList.contains(G8)||n.classList.contains(H8)}),backdrop:r.find(function(n){return n.classList.contains($R)})}}function J8(e){var t=Jp(),r=Jp();r.className=VR,r.setAttribute("data-state","hidden"),r.setAttribute("tabindex","-1");var n=Jp();n.className=$8,n.setAttribute("data-state","hidden"),L4(n,e.props),t.appendChild(r),r.appendChild(n),o(e.props,e.props);function o(u,c){var l=uy(t),h=l.box,v=l.content,w=l.arrow;c.theme?h.setAttribute("data-theme",c.theme):h.removeAttribute("data-theme"),typeof c.animation=="string"?h.setAttribute("data-animation",c.animation):h.removeAttribute("data-animation"),c.inertia?h.setAttribute("data-inertia",""):h.removeAttribute("data-inertia"),h.style.maxWidth=typeof c.maxWidth=="number"?c.maxWidth+"px":c.maxWidth,c.role?h.setAttribute("role",c.role):h.removeAttribute("role"),(u.content!==c.content||u.allowHTML!==c.allowHTML)&&L4(v,e.props),c.arrow?w?u.arrow!==c.arrow&&(h.removeChild(w),h.appendChild(T4(c.arrow))):h.appendChild(T4(c.arrow)):w&&h.removeChild(w)}return{popper:t,onUpdate:o}}J8.$$tippy=!0;var fO=1,f1=[],Om=[];function hO(e,t){var r=I4(e,Object.assign({},d0,Y8(A4(t)))),n,o,u,c=!1,l=!1,h=!1,v=!1,w,E,T,I=[],F=x4(Kr,r.interactiveDebounce),U,G=fO++,H=null,X=HR(r.plugins),ee={isEnabled:!0,isVisible:!1,isDestroyed:!1,isMounted:!1,isShown:!1},K={id:G,reference:e,popper:Jp(),popperInstance:H,props:r,state:ee,plugins:X,clearDelayTimeouts:_i,setProps:hi,setContent:yr,show:Vr,hide:wi,hideWithInteractivity:xn,enable:Zn,disable:ai,unmount:si,destroy:fr};if(!r.render)return K;var se=r.render(K),ce=se.popper,_e=se.onUpdate;ce.setAttribute("data-tippy-root",""),ce.id="tippy-"+K.id,K.popper=ce,e._tippy=K,ce._tippy=K;var pe=X.map(function(or){return or.fn(K)}),Ge=e.hasAttribute("aria-expanded");return Gt(),Ze(),$e(),ut("onCreate",[K]),r.showOnCreate&&en(),ce.addEventListener("mouseenter",function(){K.props.interactive&&K.state.isVisible&&K.clearDelayTimeouts()}),ce.addEventListener("mouseleave",function(){K.props.interactive&&K.props.trigger.indexOf("mouseenter")>=0&&ot().addEventListener("mousemove",F)}),K;function We(){var or=K.props.touch;return Array.isArray(or)?or:[or,0]}function Ae(){return We()[0]==="hold"}function Ie(){var or;return!!((or=K.props.render)!=null&&or.$$tippy)}function Fe(){return U||e}function ot(){var or=Fe().parentNode;return or?KR(or):document}function _t(){return uy(ce)}function ht(or){return K.state.isMounted&&!K.state.isVisible||M0.isTouch||w&&w.type==="focus"?0:zm(K.props.delay,or?0:1,d0.delay)}function $e(or){or===void 0&&(or=!1),ce.style.pointerEvents=K.props.interactive&&!or?"":"none",ce.style.zIndex=""+K.props.zIndex}function ut(or,Yr,un){if(un===void 0&&(un=!0),pe.forEach(function(pn){pn[or]&&pn[or].apply(pn,Yr)}),un){var Nr;(Nr=K.props)[or].apply(Nr,Yr)}}function bt(){var or=K.props.aria;if(or.content){var Yr="aria-"+or.content,un=ce.id,Nr=Nh(K.props.triggerTarget||e);Nr.forEach(function(pn){var Yn=pn.getAttribute(Yr);if(K.state.isVisible)pn.setAttribute(Yr,Yn?Yn+" "+un:un);else{var ci=Yn&&Yn.replace(un,"").trim();ci?pn.setAttribute(Yr,ci):pn.removeAttribute(Yr)}})}}function Ze(){if(!(Ge||!K.props.aria.expanded)){var or=Nh(K.props.triggerTarget||e);or.forEach(function(Yr){K.props.interactive?Yr.setAttribute("aria-expanded",K.state.isVisible&&Yr===Fe()?"true":"false"):Yr.removeAttribute("aria-expanded")})}}function He(){ot().removeEventListener("mousemove",F),f1=f1.filter(function(or){return or!==F})}function xe(or){if(!(M0.isTouch&&(h||or.type==="mousedown"))){var Yr=or.composedPath&&or.composedPath()[0]||or.target;if(!(K.props.interactive&&S4(ce,Yr))){if(Nh(K.props.triggerTarget||e).some(function(un){return S4(un,Yr)})){if(M0.isTouch||K.state.isVisible&&K.props.trigger.indexOf("click")>=0)return}else ut("onClickOutside",[K,or]);K.props.hideOnClick===!0&&(K.clearDelayTimeouts(),K.hide(),l=!0,setTimeout(function(){l=!1}),K.state.isMounted||At())}}}function Ne(){h=!0}function Pe(){h=!1}function ft(){var or=ot();or.addEventListener("mousedown",xe,!0),or.addEventListener("touchend",xe,Jf),or.addEventListener("touchstart",Pe,Jf),or.addEventListener("touchmove",Ne,Jf)}function At(){var or=ot();or.removeEventListener("mousedown",xe,!0),or.removeEventListener("touchend",xe,Jf),or.removeEventListener("touchstart",Pe,Jf),or.removeEventListener("touchmove",Ne,Jf)}function Pt(or,Yr){$t(or,function(){!K.state.isVisible&&ce.parentNode&&ce.parentNode.contains(ce)&&Yr()})}function Kt(or,Yr){$t(or,Yr)}function $t(or,Yr){var un=_t().box;function Nr(pn){pn.target===un&&(Rm(un,"remove",Nr),Yr())}if(or===0)return Yr();Rm(un,"remove",E),Rm(un,"add",Nr),E=Nr}function br(or,Yr,un){un===void 0&&(un=!1);var Nr=Nh(K.props.triggerTarget||e);Nr.forEach(function(pn){pn.addEventListener(or,Yr,un),I.push({node:pn,eventType:or,handler:Yr,options:un})})}function Gt(){Ae()&&(br("touchstart",Mr,{passive:!0}),br("touchend",St,{passive:!0})),GR(K.props.trigger).forEach(function(or){if(or!=="manual")switch(br(or,Mr),or){case"mouseenter":br("mouseleave",St);break;case"focus":br(iO?"focusout":"blur",ct);break;case"focusin":br("focusout",ct);break}})}function Rr(){I.forEach(function(or){var Yr=or.node,un=or.eventType,Nr=or.handler,pn=or.options;Yr.removeEventListener(un,Nr,pn)}),I=[]}function Mr(or){var Yr,un=!1;if(!(!K.state.isEnabled||Or(or)||l)){var Nr=((Yr=w)==null?void 0:Yr.type)==="focus";w=or,U=or.currentTarget,Ze(),!K.state.isVisible&&XR(or)&&f1.forEach(function(pn){return pn(or)}),or.type==="click"&&(K.props.trigger.indexOf("mouseenter")<0||c)&&K.props.hideOnClick!==!1&&K.state.isVisible?un=!0:en(or),or.type==="click"&&(c=!un),un&&!Nr&&On(or)}}function Kr(or){var Yr=or.target,un=Fe().contains(Yr)||ce.contains(Yr);if(!(or.type==="mousemove"&&un)){var Nr=mn().concat(ce).map(function(pn){var Yn,ci=pn._tippy,No=(Yn=ci.popperInstance)==null?void 0:Yn.state;return No?{popperRect:pn.getBoundingClientRect(),popperState:No,props:r}:null}).filter(Boolean);QR(Nr,or)&&(He(),On(or))}}function St(or){var Yr=Or(or)||K.props.trigger.indexOf("click")>=0&&c;if(!Yr){if(K.props.interactive){K.hideWithInteractivity(or);return}On(or)}}function ct(or){K.props.trigger.indexOf("focusin")<0&&or.target!==Fe()||K.props.interactive&&or.relatedTarget&&ce.contains(or.relatedTarget)||On(or)}function Or(or){return M0.isTouch?Ae()!==or.type.indexOf("touch")>=0:!1}function ln(){Wt();var or=K.props,Yr=or.popperOptions,un=or.placement,Nr=or.offset,pn=or.getReferenceClientRect,Yn=or.moveTransition,ci=Ie()?uy(ce).arrow:null,No=pn?{getBoundingClientRect:pn,contextElement:pn.contextElement||Fe()}:e,gi={name:"$$tippy",enabled:!0,phase:"beforeWrite",requires:["computeStyles"],fn:function(to){var yo=to.state;if(Ie()){var pi=_t(),Ti=pi.box;["placement","reference-hidden","escaped"].forEach(function(Xo){Xo==="placement"?Ti.setAttribute("data-placement",yo.placement):yo.attributes.popper["data-popper-"+Xo]?Ti.setAttribute("data-"+Xo,""):Ti.removeAttribute("data-"+Xo)}),yo.attributes.popper={}}}},co=[{name:"offset",options:{offset:Nr}},{name:"preventOverflow",options:{padding:{top:2,bottom:2,left:5,right:5}}},{name:"flip",options:{padding:5}},{name:"computeStyles",options:{adaptive:!Yn}},gi];Ie()&&ci&&co.push({name:"arrow",options:{element:ci,padding:3}}),co.push.apply(co,(Yr==null?void 0:Yr.modifiers)||[]),K.popperInstance=K6(No,ce,Object.assign({},Yr,{placement:un,onFirstUpdate:T,modifiers:co}))}function Wt(){K.popperInstance&&(K.popperInstance.destroy(),K.popperInstance=null)}function Ur(){var or=K.props.appendTo,Yr,un=Fe();K.props.interactive&&or===W8||or==="parent"?Yr=un.parentNode:Yr=Z8(or,[un]),Yr.contains(ce)||Yr.appendChild(ce),K.state.isMounted=!0,ln()}function mn(){return Z1(ce.querySelectorAll("[data-tippy-root]"))}function en(or){K.clearDelayTimeouts(),or&&ut("onTrigger",[K,or]),ft();var Yr=ht(!0),un=We(),Nr=un[0],pn=un[1];M0.isTouch&&Nr==="hold"&&pn&&(Yr=pn),Yr?n=setTimeout(function(){K.show()},Yr):K.show()}function On(or){if(K.clearDelayTimeouts(),ut("onUntrigger",[K,or]),!K.state.isVisible){At();return}if(!(K.props.trigger.indexOf("mouseenter")>=0&&K.props.trigger.indexOf("click")>=0&&["mouseleave","mousemove"].indexOf(or.type)>=0&&c)){var Yr=ht(!1);Yr?o=setTimeout(function(){K.state.isVisible&&K.hide()},Yr):u=requestAnimationFrame(function(){K.hide()})}}function Zn(){K.state.isEnabled=!0}function ai(){K.hide(),K.state.isEnabled=!1}function _i(){clearTimeout(n),clearTimeout(o),cancelAnimationFrame(u)}function hi(or){if(!K.state.isDestroyed){ut("onBeforeUpdate",[K,or]),Rr();var Yr=K.props,un=I4(e,Object.assign({},Yr,A4(or),{ignoreAttributes:!0}));K.props=un,Gt(),Yr.interactiveDebounce!==un.interactiveDebounce&&(He(),F=x4(Kr,un.interactiveDebounce)),Yr.triggerTarget&&!un.triggerTarget?Nh(Yr.triggerTarget).forEach(function(Nr){Nr.removeAttribute("aria-expanded")}):un.triggerTarget&&e.removeAttribute("aria-expanded"),Ze(),$e(),_e&&_e(Yr,un),K.popperInstance&&(ln(),mn().forEach(function(Nr){requestAnimationFrame(Nr._tippy.popperInstance.forceUpdate)})),ut("onAfterUpdate",[K,or])}}function yr(or){K.setProps({content:or})}function Vr(){var or=K.state.isVisible,Yr=K.state.isDestroyed,un=!K.state.isEnabled,Nr=M0.isTouch&&!K.props.touch,pn=zm(K.props.duration,0,d0.duration);if(!(or||Yr||un||Nr)&&!Fe().hasAttribute("disabled")&&(ut("onShow",[K],!1),K.props.onShow(K)!==!1)){if(K.state.isVisible=!0,Ie()&&(ce.style.visibility="visible"),$e(),ft(),K.state.isMounted||(ce.style.transition="none"),Ie()){var Yn=_t(),ci=Yn.box,No=Yn.content;Nm([ci,No],0)}T=function(){var co;if(!(!K.state.isVisible||v)){if(v=!0,ce.offsetHeight,ce.style.transition=K.props.moveTransition,Ie()&&K.props.animation){var li=_t(),to=li.box,yo=li.content;Nm([to,yo],pn),E4([to,yo],"visible")}bt(),Ze(),k4(Om,K),(co=K.popperInstance)==null||co.forceUpdate(),ut("onMount",[K]),K.props.animation&&Ie()&&Kt(pn,function(){K.state.isShown=!0,ut("onShown",[K])})}},Ur()}}function wi(){var or=!K.state.isVisible,Yr=K.state.isDestroyed,un=!K.state.isEnabled,Nr=zm(K.props.duration,1,d0.duration);if(!(or||Yr||un)&&(ut("onHide",[K],!1),K.props.onHide(K)!==!1)){if(K.state.isVisible=!1,K.state.isShown=!1,v=!1,c=!1,Ie()&&(ce.style.visibility="hidden"),He(),At(),$e(!0),Ie()){var pn=_t(),Yn=pn.box,ci=pn.content;K.props.animation&&(Nm([Yn,ci],Nr),E4([Yn,ci],"hidden"))}bt(),Ze(),K.props.animation?Ie()&&Pt(Nr,K.unmount):K.unmount()}}function xn(or){ot().addEventListener("mousemove",F),k4(f1,F),F(or)}function si(){K.state.isVisible&&K.hide(),K.state.isMounted&&(Wt(),mn().forEach(function(or){or._tippy.unmount()}),ce.parentNode&&ce.parentNode.removeChild(ce),Om=Om.filter(function(or){return or!==K}),K.state.isMounted=!1,ut("onHidden",[K]))}function fr(){K.state.isDestroyed||(K.clearDelayTimeouts(),K.unmount(),Rr(),delete e._tippy,K.state.isDestroyed=!0,ut("onDestroy",[K]))}}function Cd(e,t){t===void 0&&(t={});var r=d0.plugins.concat(t.plugins||[]);rO();var n=Object.assign({},t,{plugins:r}),o=JR(e),u=o.reduce(function(c,l){var h=l&&hO(l,n);return h&&c.push(h),c},[]);return v2(e)?u[0]:u}Cd.defaultProps=d0;Cd.setDefaultProps=lO;Cd.currentInput=M0;Object.assign({},$6,{effect:function(t){var r=t.state,n={popper:{position:r.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};Object.assign(r.elements.popper.style,n.popper),r.styles=n,r.elements.arrow&&Object.assign(r.elements.arrow.style,n.arrow)}});Cd.setDefaultProps({render:J8});const pO=(e,t)=>{const{destroy:r,setProps:n}=Cd(e,t);return{destroy:r,update:n}},dO=e=>(t,r)=>pO(t,{...r,...e}),mO=e=>{let t={arrow:!0,theme:"light",trigger:"click",hideOnClick:"toggle",interactive:!0,onShow(n){var o;(o=n.popper.querySelector(".close"))==null||o.addEventListener("click",()=>{n.hide()})},onHide(n){var o;(o=n.popper.querySelector(".close"))==null||o.removeEventListener("click",()=>{n.hide()})},onClickOutside(n){n.hide()}};return e&&(t=Object.assign(t,e)),dO(t)};const K8=e=>e.replace(/[_-]/g," ").replace(/\.[^/.]+$/,"");function gO(e){let t,r,n,o;function u(h){e[31](h)}function c(h){e[32](h)}let l={};return e[1]!==void 0&&(l.map=e[1]),e[0]!==void 0&&(l.layer=e[0]),t=new bz({props:l}),Ft.push(()=>Jt(t,"map",u)),Ft.push(()=>Jt(t,"layer",c)),{c(){Ut(t.$$.fragment)},l(h){Yt(t.$$.fragment,h)},m(h,v){qt(t,h,v),o=!0},p(h,v){const w={};!r&&v[0]&2&&(r=!0,w.map=h[1],er(()=>r=!1)),!n&&v[0]&1&&(n=!0,w.layer=h[0],er(()=>n=!1)),t.$set(w)},i(h){o||(Xe(t.$$.fragment,h),o=!0)},o(h){it(t.$$.fragment,h),o=!1},d(h){Vt(t,h)}}}function yO(e){let t,r,n,o;function u(h){e[29](h)}function c(h){e[30](h)}let l={};return e[1]!==void 0&&(l.map=e[1]),e[0]!==void 0&&(l.layer=e[0]),t=new ez({props:l}),Ft.push(()=>Jt(t,"map",u)),Ft.push(()=>Jt(t,"layer",c)),{c(){Ut(t.$$.fragment)},l(h){Yt(t.$$.fragment,h)},m(h,v){qt(t,h,v),o=!0},p(h,v){const w={};!r&&v[0]&2&&(r=!0,w.map=h[1],er(()=>r=!1)),!n&&v[0]&1&&(n=!0,w.layer=h[0],er(()=>n=!1)),t.$set(w)},i(h){o||(Xe(t.$$.fragment,h),o=!0)},o(h){it(t.$$.fragment,h),o=!1},d(h){Vt(t,h)}}}function vO(e){let t,r,n,o;function u(h){e[27](h)}function c(h){e[28](h)}let l={};return e[1]!==void 0&&(l.map=e[1]),e[0]!==void 0&&(l.layer=e[0]),t=new SD({props:l}),Ft.push(()=>Jt(t,"map",u)),Ft.push(()=>Jt(t,"layer",c)),{c(){Ut(t.$$.fragment)},l(h){Yt(t.$$.fragment,h)},m(h,v){qt(t,h,v),o=!0},p(h,v){const w={};!r&&v[0]&2&&(r=!0,w.map=h[1],er(()=>r=!1)),!n&&v[0]&1&&(n=!0,w.layer=h[0],er(()=>n=!1)),t.$set(w)},i(h){o||(Xe(t.$$.fragment,h),o=!0)},o(h){it(t.$$.fragment,h),o=!1},d(h){Vt(t,h)}}}function _O(e){let t,r,n,o;function u(h){e[25](h)}function c(h){e[26](h)}let l={};return e[1]!==void 0&&(l.map=e[1]),e[0]!==void 0&&(l.layer=e[0]),t=new hD({props:l}),Ft.push(()=>Jt(t,"map",u)),Ft.push(()=>Jt(t,"layer",c)),{c(){Ut(t.$$.fragment)},l(h){Yt(t.$$.fragment,h)},m(h,v){qt(t,h,v),o=!0},p(h,v){const w={};!r&&v[0]&2&&(r=!0,w.map=h[1],er(()=>r=!1)),!n&&v[0]&1&&(n=!0,w.layer=h[0],er(()=>n=!1)),t.$set(w)},i(h){o||(Xe(t.$$.fragment,h),o=!0)},o(h){it(t.$$.fragment,h),o=!1},d(h){Vt(t,h)}}}function bO(e){let t,r,n,o;function u(h){e[23](h)}function c(h){e[24](h)}let l={};return e[1]!==void 0&&(l.map=e[1]),e[0]!==void 0&&(l.layer=e[0]),t=new cM({props:l}),Ft.push(()=>Jt(t,"map",u)),Ft.push(()=>Jt(t,"layer",c)),{c(){Ut(t.$$.fragment)},l(h){Yt(t.$$.fragment,h)},m(h,v){qt(t,h,v),o=!0},p(h,v){const w={};!r&&v[0]&2&&(r=!0,w.map=h[1],er(()=>r=!1)),!n&&v[0]&1&&(n=!0,w.layer=h[0],er(()=>n=!1)),t.$set(w)},i(h){o||(Xe(t.$$.fragment,h),o=!0)},o(h){it(t.$$.fragment,h),o=!1},d(h){Vt(t,h)}}}function wO(e){let t,r,n,o,u;function c(w){e[20](w)}function l(w){e[21](w)}function h(w){e[22](w)}let v={};return e[1]!==void 0&&(v.map=e[1]),e[0]!==void 0&&(v.layer=e[0]),e[2]!==void 0&&(v.spriteLoader=e[2]),t=new QM({props:v}),Ft.push(()=>Jt(t,"map",c)),Ft.push(()=>Jt(t,"layer",l)),Ft.push(()=>Jt(t,"spriteLoader",h)),{c(){Ut(t.$$.fragment)},l(w){Yt(t.$$.fragment,w)},m(w,E){qt(t,w,E),u=!0},p(w,E){const T={};!r&&E[0]&2&&(r=!0,T.map=w[1],er(()=>r=!1)),!n&&E[0]&1&&(n=!0,T.layer=w[0],er(()=>n=!1)),!o&&E[0]&4&&(o=!0,T.spriteLoader=w[2],er(()=>o=!1)),t.$set(T)},i(w){u||(Xe(t.$$.fragment,w),u=!0)},o(w){it(t.$$.fragment,w),u=!1},d(w){Vt(t,w)}}}function xO(e){let t,r,n,o;function u(h){e[18](h)}function c(h){e[19](h)}let l={};return e[1]!==void 0&&(l.map=e[1]),e[0]!==void 0&&(l.layer=e[0]),t=new YP({props:l}),Ft.push(()=>Jt(t,"map",u)),Ft.push(()=>Jt(t,"layer",c)),{c(){Ut(t.$$.fragment)},l(h){Yt(t.$$.fragment,h)},m(h,v){qt(t,h,v),o=!0},p(h,v){const w={};!r&&v[0]&2&&(r=!0,w.map=h[1],er(()=>r=!1)),!n&&v[0]&1&&(n=!0,w.layer=h[0],er(()=>n=!1)),t.$set(w)},i(h){o||(Xe(t.$$.fragment,h),o=!0)},o(h){it(t.$$.fragment,h),o=!1},d(h){Vt(t,h)}}}function kO(e){let t,r,n,o;function u(h){e[16](h)}function c(h){e[17](h)}let l={};return e[1]!==void 0&&(l.map=e[1]),e[0]!==void 0&&(l.layer=e[0]),t=new IP({props:l}),Ft.push(()=>Jt(t,"map",u)),Ft.push(()=>Jt(t,"layer",c)),{c(){Ut(t.$$.fragment)},l(h){Yt(t.$$.fragment,h)},m(h,v){qt(t,h,v),o=!0},p(h,v){const w={};!r&&v[0]&2&&(r=!0,w.map=h[1],er(()=>r=!1)),!n&&v[0]&1&&(n=!0,w.layer=h[0],er(()=>n=!1)),t.$set(w)},i(h){o||(Xe(t.$$.fragment,h),o=!0)},o(h){it(t.$$.fragment,h),o=!1},d(h){Vt(t,h)}}}function AO(e){let t,r,n,o;function u(h){e[14](h)}function c(h){e[15](h)}let l={};return e[1]!==void 0&&(l.map=e[1]),e[0]!==void 0&&(l.layer=e[0]),t=new xP({props:l}),Ft.push(()=>Jt(t,"map",u)),Ft.push(()=>Jt(t,"layer",c)),{c(){Ut(t.$$.fragment)},l(h){Yt(t.$$.fragment,h)},m(h,v){qt(t,h,v),o=!0},p(h,v){const w={};!r&&v[0]&2&&(r=!0,w.map=h[1],er(()=>r=!1)),!n&&v[0]&1&&(n=!0,w.layer=h[0],er(()=>n=!1)),t.$set(w)},i(h){o||(Xe(t.$$.fragment,h),o=!0)},o(h){it(t.$$.fragment,h),o=!1},d(h){Vt(t,h)}}}function EO(e){let t,r,n,o,u;function c(w){e[11](w)}function l(w){e[12](w)}function h(w){e[13](w)}let v={};return e[1]!==void 0&&(v.map=e[1]),e[0]!==void 0&&(v.layer=e[0]),e[3]!==void 0&&(v.selectedFormat=e[3]),t=new qR({props:v}),Ft.push(()=>Jt(t,"map",c)),Ft.push(()=>Jt(t,"layer",l)),Ft.push(()=>Jt(t,"selectedFormat",h)),{c(){Ut(t.$$.fragment)},l(w){Yt(t.$$.fragment,w)},m(w,E){qt(t,w,E),u=!0},p(w,E){const T={};!r&&E[0]&2&&(r=!0,T.map=w[1],er(()=>r=!1)),!n&&E[0]&1&&(n=!0,T.layer=w[0],er(()=>n=!1)),!o&&E[0]&8&&(o=!0,T.selectedFormat=w[3],er(()=>o=!1)),t.$set(T)},i(w){u||(Xe(t.$$.fragment,w),u=!0)},o(w){it(t.$$.fragment,w),u=!1},d(w){Vt(t,w)}}}function SO(e){let t,r,n,o,u,c,l,h,v,w,E,T,I,F,U,G,H,X,ee,K,se,ce,_e,pe,Ge,We,Ae,Ie,Fe,ot,_t;r=new go({props:{icon:XA,size:"lg"}}),h=new N6({props:{map:e[1],layer:e[0],spriteLoader:e[2]}}),U=new go({props:{icon:VA,size:"lg"}});function ht(He){e[10](He)}let $e={size:"lg"};e[0].type!==void 0&&($e.layerType=e[0].type),X=new t8({props:$e}),Ft.push(()=>Jt(X,"layerType",ht)),ce=new go({props:{icon:Ny,size:"lg",color:"#1c1c1c"}});const ut=[EO,AO,kO,xO,wO,bO,_O,vO,yO,gO],bt=[];function Ze(He,xe){return He[4]?0:He[0].type==="background"?1:He[0].type==="fill"?2:He[0].type==="line"?3:He[0].type==="symbol"?4:He[0].type==="circle"?5:He[0].type==="fill-extrusion"?6:He[0].type==="hillshade"?7:He[0].type==="raster"?8:He[0].type==="heatmap"?9:-1}return~(Ge=Ze(e))&&(We=bt[Ge]=ut[Ge](e)),{c(){t=yt("div"),Ut(r.$$.fragment),o=mr(),u=yt("div"),c=yt("div"),l=yt("div"),Ut(h.$$.fragment),v=mr(),w=yt("div"),E=ei(e[6]),T=mr(),I=yt("div"),F=yt("span"),Ut(U.$$.fragment),G=mr(),H=yt("div"),Ut(X.$$.fragment),K=mr(),se=yt("div"),Ut(ce.$$.fragment),_e=mr(),pe=yt("div"),We&&We.c(),Ae=mr(),Ie=yt("div"),this.h()},l(He){t=vt(He,"DIV",{tabindex:!0,role:!0,class:!0,"data-tooltip":!0});var xe=Ct(t);Yt(r.$$.fragment,xe),xe.forEach(ge),o=gr(He),u=vt(He,"DIV",{class:!0});var Ne=Ct(u);c=vt(Ne,"DIV",{class:!0});var Pe=Ct(c);l=vt(Pe,"DIV",{class:!0});var ft=Ct(l);Yt(h.$$.fragment,ft),ft.forEach(ge),v=gr(Pe),w=vt(Pe,"DIV",{class:!0});var At=Ct(w);E=ti(At,e[6]),At.forEach(ge),Pe.forEach(ge),T=gr(Ne),I=vt(Ne,"DIV",{class:!0});var Pt=Ct(I);F=vt(Pt,"SPAN",{role:!0,class:!0,"data-tooltip":!0});var Kt=Ct(F);Yt(U.$$.fragment,Kt),Kt.forEach(ge),G=gr(Pt),H=vt(Pt,"DIV",{class:!0});var $t=Ct(H);Yt(X.$$.fragment,$t),$t.forEach(ge),K=gr(Pt),se=vt(Pt,"DIV",{role:!0,class:!0,"data-tooltip":!0});var br=Ct(se);Yt(ce.$$.fragment,br),br.forEach(ge),Pt.forEach(ge),_e=gr(Ne),pe=vt(Ne,"DIV",{class:!0});var Gt=Ct(pe);We&&We.l(Gt),Gt.forEach(ge),Ae=gr(Ne),Ie=vt(Ne,"DIV",{id:!0,"data-popper-arrow":!0}),Ct(Ie).forEach(ge),Ne.forEach(ge),this.h()},h(){ve(t,"tabindex","0"),ve(t,"role","button"),ve(t,"class","palette-button has-tooltip-left has-tooltip-arrow svelte-1p7qduj"),ve(t,"data-tooltip","Change layer style"),ve(l,"class","legend svelte-1p7qduj"),ve(w,"class","layer-name svelte-1p7qduj"),ve(c,"class","title svelte-1p7qduj"),ve(F,"role","button"),ve(F,"class","manual-edit-button has-tooltip-right has-tooltip-arrow svelte-1p7qduj"),ve(F,"data-tooltip","Manual editor"),ve(H,"class","help-button svelte-1p7qduj"),ve(se,"role","button"),ve(se,"class","close has-tooltip-bottom has-tooltip-arrow svelte-1p7qduj"),ve(se,"data-tooltip","Close popup"),ve(I,"class","header-buttons svelte-1p7qduj"),ve(pe,"class","editor-contents svelte-1p7qduj"),ve(Ie,"id","arrow"),ve(Ie,"data-popper-arrow",""),ve(u,"class","tooltip svelte-1p7qduj")},m(He,xe){Lt(He,t,xe),qt(r,t,null),Lt(He,o,xe),Lt(He,u,xe),lt(u,c),lt(c,l),qt(h,l,null),lt(c,v),lt(c,w),lt(w,E),lt(u,T),lt(u,I),lt(I,F),qt(U,F,null),lt(I,G),lt(I,H),qt(X,H,null),lt(I,K),lt(I,se),qt(ce,se,null),lt(u,_e),lt(u,pe),~Ge&&bt[Ge].m(pe,null),lt(u,Ae),lt(u,Ie),e[33](u),Fe=!0,ot||(_t=[sh(n=e[7].call(null,t,{content:e[5]})),rn(F,"click",e[9])],ot=!0)},p(He,xe){n&&g0(n.update)&&xe[0]&32&&n.update.call(null,{content:He[5]});const Ne={};xe[0]&2&&(Ne.map=He[1]),xe[0]&1&&(Ne.layer=He[0]),xe[0]&4&&(Ne.spriteLoader=He[2]),h.$set(Ne),(!Fe||xe[0]&64)&&ta(E,He[6]);const Pe={};!ee&&xe[0]&1&&(ee=!0,Pe.layerType=He[0].type,er(()=>ee=!1)),X.$set(Pe);let ft=Ge;Ge=Ze(He),Ge===ft?~Ge&&bt[Ge].p(He,xe):(We&&(ji(),it(bt[ft],1,1,()=>{bt[ft]=null}),Ui()),~Ge?(We=bt[Ge],We?We.p(He,xe):(We=bt[Ge]=ut[Ge](He),We.c()),Xe(We,1),We.m(pe,null)):We=null)},i(He){Fe||(Xe(r.$$.fragment,He),Xe(h.$$.fragment,He),Xe(U.$$.fragment,He),Xe(X.$$.fragment,He),Xe(ce.$$.fragment,He),Xe(We),Fe=!0)},o(He){it(r.$$.fragment,He),it(h.$$.fragment,He),it(U.$$.fragment,He),it(X.$$.fragment,He),it(ce.$$.fragment,He),it(We),Fe=!1},d(He){He&&ge(t),Vt(r),He&&ge(o),He&&ge(u),Vt(h),Vt(U),Vt(X),Vt(ce),~Ge&&bt[Ge].d(),e[33](null),ot=!1,oa(_t)}}}function CO(e,t,r){let n,{map:o}=t,{layer:u}=t,{spriteLoader:c}=t,{relativeLayers:l}=t,h=!1,{selectedFormat:v}=t;const w=mO({placement:"left",trigger:"click",appendTo:document.body});let E;const T=()=>r(4,h=!h);function I(He){e.$$.not_equal(u.type,He)&&(u.type=He,r(0,u))}function F(He){o=He,r(1,o)}function U(He){u=He,r(0,u)}function G(He){v=He,r(3,v)}function H(He){o=He,r(1,o)}function X(He){u=He,r(0,u)}function ee(He){o=He,r(1,o)}function K(He){u=He,r(0,u)}function se(He){o=He,r(1,o)}function ce(He){u=He,r(0,u)}function _e(He){o=He,r(1,o)}function pe(He){u=He,r(0,u)}function Ge(He){c=He,r(2,c)}function We(He){o=He,r(1,o)}function Ae(He){u=He,r(0,u)}function Ie(He){o=He,r(1,o)}function Fe(He){u=He,r(0,u)}function ot(He){o=He,r(1,o)}function _t(He){u=He,r(0,u)}function ht(He){o=He,r(1,o)}function $e(He){u=He,r(0,u)}function ut(He){o=He,r(1,o)}function bt(He){u=He,r(0,u)}function Ze(He){Ft[He?"unshift":"push"](()=>{E=He,r(5,E)})}return e.$$set=He=>{"map"in He&&r(1,o=He.map),"layer"in He&&r(0,u=He.layer),"spriteLoader"in He&&r(2,c=He.spriteLoader),"relativeLayers"in He&&r(8,l=He.relativeLayers),"selectedFormat"in He&&r(3,v=He.selectedFormat)},e.$$.update=()=>{e.$$.dirty[0]&257&&r(6,n=l&&l[u.id]?l[u.id]:K8(u.id))},[u,o,c,v,h,E,n,w,l,T,I,F,U,G,H,X,ee,K,se,ce,_e,pe,Ge,We,Ae,Ie,Fe,ot,_t,ht,$e,ut,bt,Ze]}class IO extends Dn{constructor(t){super(),zn(this,t,CO,SO,Ln,{map:1,layer:0,spriteLoader:2,relativeLayers:8,selectedFormat:3},null,[-1,-1])}}function P4(e){let t,r,n;return r=new go({props:{icon:s7}}),{c(){t=yt("div"),Ut(r.$$.fragment),this.h()},l(o){t=vt(o,"DIV",{class:!0,"data-tooltip":!0});var u=Ct(t);Yt(r.$$.fragment,u),u.forEach(ge),this.h()},h(){ve(t,"class","draggable-icon has-tooltip-right has-tooltip-arrow svelte-5bmqob"),ve(t,"data-tooltip",($C?"Long press & drag":"Drag")+" to change order")},m(o,u){Lt(o,t,u),qt(r,t,null),n=!0},p:Qn,i(o){n||(Xe(r.$$.fragment,o),n=!0)},o(o){it(r.$$.fragment,o),n=!1},d(o){o&&ge(t),Vt(r)}}}function M4(e){let t,r,n=!e[5]&&D4(e);return{c(){n&&n.c(),t=ao()},l(o){n&&n.l(o),t=ao()},m(o,u){n&&n.m(o,u),Lt(o,t,u),r=!0},p(o,u){o[5]?n&&(ji(),it(n,1,1,()=>{n=null}),Ui()):n?(n.p(o,u),u&32&&Xe(n,1)):(n=D4(o),n.c(),Xe(n,1),n.m(t.parentNode,t))},i(o){r||(Xe(n),r=!0)},o(o){it(n),r=!1},d(o){n&&n.d(o),o&&ge(t)}}}function D4(e){let t,r,n,o,u,c,l;const h=[LO,TO],v=[];function w(E,T){return E[8]?0:1}return r=w(e),n=v[r]=h[r](e),{c(){t=yt("div"),n.c(),this.h()},l(E){t=vt(E,"DIV",{tabindex:!0,role:!0,class:!0,"data-tooltip":!0});var T=Ct(t);n.l(T),T.forEach(ge),this.h()},h(){ve(t,"tabindex","0"),ve(t,"role","button"),ve(t,"class","visible-button has-tooltip-right has-tooltip-arrow svelte-5bmqob"),ve(t,"data-tooltip",o=(e[8]?"Hide":"Show")+" layer")},m(E,T){Lt(E,t,T),v[r].m(t,null),u=!0,c||(l=[rn(t,"click",e[19]),rn(t,"keydown",e[12])],c=!0)},p(E,T){let I=r;r=w(E),r===I?v[r].p(E,T):(ji(),it(v[I],1,1,()=>{v[I]=null}),Ui(),n=v[r],n?n.p(E,T):(n=v[r]=h[r](E),n.c()),Xe(n,1),n.m(t,null)),(!u||T&256&&o!==(o=(E[8]?"Hide":"Show")+" layer"))&&ve(t,"data-tooltip",o)},i(E){u||(Xe(n),u=!0)},o(E){it(n),u=!1},d(E){E&&ge(t),v[r].d(),c=!1,oa(l)}}}function TO(e){let t,r;return t=new go({props:{icon:GA}}),{c(){Ut(t.$$.fragment)},l(n){Yt(t.$$.fragment,n)},m(n,o){qt(t,n,o),r=!0},p:Qn,i(n){r||(Xe(t.$$.fragment,n),r=!0)},o(n){it(t.$$.fragment,n),r=!1},d(n){Vt(t,n)}}}function LO(e){let t,r;return t=new go({props:{icon:t7}}),{c(){Ut(t.$$.fragment)},l(n){Yt(t.$$.fragment,n)},m(n,o){qt(t,n,o),r=!0},p:Qn,i(n){r||(Xe(t.$$.fragment,n),r=!0)},o(n){it(t.$$.fragment,n),r=!1},d(n){Vt(t,n)}}}function PO(e){let t,r,n,o,u,c,l;function h(F){e[20](F)}function v(F){e[21](F)}function w(F){e[22](F)}function E(F){e[23](F)}function T(F){e[24](F)}let I={};return e[2]!==void 0&&(I.map=e[2]),e[0]!==void 0&&(I.layer=e[0]),e[3]!==void 0&&(I.spriteLoader=e[3]),e[4]!==void 0&&(I.selectedFormat=e[4]),e[1]!==void 0&&(I.relativeLayers=e[1]),t=new IO({props:I}),Ft.push(()=>Jt(t,"map",h)),Ft.push(()=>Jt(t,"layer",v)),Ft.push(()=>Jt(t,"spriteLoader",w)),Ft.push(()=>Jt(t,"selectedFormat",E)),Ft.push(()=>Jt(t,"relativeLayers",T)),{c(){Ut(t.$$.fragment)},l(F){Yt(t.$$.fragment,F)},m(F,U){qt(t,F,U),l=!0},p(F,U){const G={};!r&&U&4&&(r=!0,G.map=F[2],er(()=>r=!1)),!n&&U&1&&(n=!0,G.layer=F[0],er(()=>n=!1)),!o&&U&8&&(o=!0,G.spriteLoader=F[3],er(()=>o=!1)),!u&&U&16&&(u=!0,G.selectedFormat=F[4],er(()=>u=!1)),!c&&U&2&&(c=!0,G.relativeLayers=F[1],er(()=>c=!1)),t.$set(G)},i(F){l||(Xe(t.$$.fragment,F),l=!0)},o(F){it(t.$$.fragment,F),l=!1},d(F){Vt(t,F)}}}function MO(e){let t,r=e[13]()+1+"",n,o,u=e[14]()+"",c,l,h,v,w,E=!e[9]&&z4(e),T=!e[10]&&N4(e);return{c(){t=yt("div"),n=ei(r),o=ei("/"),c=ei(u),l=mr(),h=yt("div"),E&&E.c(),v=mr(),T&&T.c(),this.h()},l(I){t=vt(I,"DIV",{class:!0});var F=Ct(t);n=ti(F,r),o=ti(F,"/"),c=ti(F,u),F.forEach(ge),l=gr(I),h=vt(I,"DIV",{class:!0});var U=Ct(h);E&&E.l(U),v=gr(U),T&&T.l(U),U.forEach(ge),this.h()},h(){ve(t,"class","layer-position svelte-5bmqob"),ve(h,"class","layer-order svelte-5bmqob")},m(I,F){Lt(I,t,F),lt(t,n),lt(t,o),lt(t,c),Lt(I,l,F),Lt(I,h,F),E&&E.m(h,null),lt(h,v),T&&T.m(h,null),w=!0},p(I,F){I[9]?E&&(ji(),it(E,1,1,()=>{E=null}),Ui()):E?(E.p(I,F),F&512&&Xe(E,1)):(E=z4(I),E.c(),Xe(E,1),E.m(h,v)),I[10]?T&&(ji(),it(T,1,1,()=>{T=null}),Ui()):T?(T.p(I,F),F&1024&&Xe(T,1)):(T=N4(I),T.c(),Xe(T,1),T.m(h,null))},i(I){w||(Xe(E),Xe(T),w=!0)},o(I){it(E),it(T),w=!1},d(I){I&&ge(t),I&&ge(l),I&&ge(h),E&&E.d(),T&&T.d()}}}function z4(e){let t,r,n,o,u;return r=new go({props:{icon:n7,size:"lg"}}),{c(){t=yt("span"),Ut(r.$$.fragment),this.h()},l(c){t=vt(c,"SPAN",{tabindex:!0,role:!0,class:!0,"data-tooltip":!0});var l=Ct(t);Yt(r.$$.fragment,l),l.forEach(ge),this.h()},h(){ve(t,"tabindex","0"),ve(t,"role","button"),ve(t,"class","sort-button has-tooltip-left has-tooltip-arrow svelte-5bmqob"),ve(t,"data-tooltip","Bring backward in map")},m(c,l){Lt(c,t,l),qt(r,t,null),n=!0,o||(u=[rn(t,"click",e[15]),rn(t,"keydown",e[16])],o=!0)},p:Qn,i(c){n||(Xe(r.$$.fragment,c),n=!0)},o(c){it(r.$$.fragment,c),n=!1},d(c){c&&ge(t),Vt(r),o=!1,oa(u)}}}function N4(e){let t,r,n,o,u;return r=new go({props:{icon:jA,size:"lg"}}),{c(){t=yt("span"),Ut(r.$$.fragment),this.h()},l(c){t=vt(c,"SPAN",{tabindex:!0,role:!0,class:!0,"data-tooltip":!0});var l=Ct(t);Yt(r.$$.fragment,l),l.forEach(ge),this.h()},h(){ve(t,"tabindex","0"),ve(t,"role","button"),ve(t,"class","sort-button has-tooltip-left has-tooltip-arrow svelte-5bmqob"),ve(t,"data-tooltip","Bring forward in map")},m(c,l){Lt(c,t,l),qt(r,t,null),n=!0,o||(u=[rn(t,"click",e[17]),rn(t,"keydown",e[18])],o=!0)},p:Qn,i(c){n||(Xe(r.$$.fragment,c),n=!0)},o(c){it(r.$$.fragment,c),n=!1},d(c){c&&ge(t),Vt(r),o=!1,oa(u)}}}function DO(e){let t,r,n,o,u,c,l,h,v,w,E,T,I=e[5]&&P4(),F=!e[6]&&M4(e);u=new N6({props:{map:e[2],layer:e[0],spriteLoader:e[3]}});const U=[MO,PO],G=[];function H(X,ee){return X[5]?0:X[7]===!0?1:-1}return~(w=H(e))&&(E=G[w]=U[w](e)),{c(){t=yt("div"),I&&I.c(),r=mr(),F&&F.c(),n=mr(),o=yt("div"),Ut(u.$$.fragment),c=mr(),l=yt("div"),h=ei(e[11]),v=mr(),E&&E.c(),this.h()},l(X){t=vt(X,"DIV",{class:!0,style:!0});var ee=Ct(t);I&&I.l(ee),r=gr(ee),F&&F.l(ee),n=gr(ee),o=vt(ee,"DIV",{class:!0});var K=Ct(o);Yt(u.$$.fragment,K),K.forEach(ge),c=gr(ee),l=vt(ee,"DIV",{class:!0});var se=Ct(l);h=ti(se,e[11]),se.forEach(ge),v=gr(ee),E&&E.l(ee),ee.forEach(ge),this.h()},h(){ve(o,"class","legend svelte-5bmqob"),ve(l,"class","layer-name svelte-5bmqob"),ve(t,"class","layer-container svelte-5bmqob"),zo(t,"cursor",e[5]?"grab":"default")},m(X,ee){Lt(X,t,ee),I&&I.m(t,null),lt(t,r),F&&F.m(t,null),lt(t,n),lt(t,o),qt(u,o,null),lt(t,c),lt(t,l),lt(l,h),lt(t,v),~w&&G[w].m(t,null),T=!0},p(X,[ee]){X[5]?I?(I.p(X,ee),ee&32&&Xe(I,1)):(I=P4(),I.c(),Xe(I,1),I.m(t,r)):I&&(ji(),it(I,1,1,()=>{I=null}),Ui()),X[6]?F&&(ji(),it(F,1,1,()=>{F=null}),Ui()):F?(F.p(X,ee),ee&64&&Xe(F,1)):(F=M4(X),F.c(),Xe(F,1),F.m(t,n));const K={};ee&4&&(K.map=X[2]),ee&1&&(K.layer=X[0]),ee&8&&(K.spriteLoader=X[3]),u.$set(K),(!T||ee&2048)&&ta(h,X[11]);let se=w;w=H(X),w===se?~w&&G[w].p(X,ee):(E&&(ji(),it(G[se],1,1,()=>{G[se]=null}),Ui()),~w?(E=G[w],E?E.p(X,ee):(E=G[w]=U[w](X),E.c()),Xe(E,1),E.m(t,null)):E=null),(!T||ee&32)&&zo(t,"cursor",X[5]?"grab":"default")},i(X){T||(Xe(I),Xe(F),Xe(u.$$.fragment,X),Xe(E),T=!0)},o(X){it(I),it(F),it(u.$$.fragment,X),it(E),T=!1},d(X){X&&ge(t),I&&I.d(),F&&F.d(),Vt(u),~w&&G[w].d()}}}function zO(e,t,r){let n;const o=mp();let{map:u}=t,{layer:c}=t,{spriteLoader:l}=t,{relativeLayers:h={}}=t,{enableLayerOrder:v=!1}=t,{disableVisibleButton:w=!1}=t,{enableEditing:E=!0}=t,{selectedFormat:T}=t,F=u.getLayer(c.id).visibility!=="none";const U=()=>{const $e=F===!0?"visible":"none";u.setLayoutProperty(c.id,"visibility",$e),o("visibilityChanged",{layer:c,visibility:$e})},G=$e=>{$e.key==="Enter"&&U()},H=()=>{var bt;const $e=(bt=u==null?void 0:u.getStyle())==null?void 0:bt.layers;return $e==null?void 0:$e.findIndex(Ze=>Ze.id===c.id)},X=()=>{var $e;return($e=u==null?void 0:u.getStyle())==null?void 0:$e.layers.length},ee=()=>H()===0,K=()=>{var bt;const $e=(bt=u==null?void 0:u.getStyle())==null?void 0:bt.layers;return H()===$e.length-1};let se=ee(),ce=K();const _e=()=>{var Ze;const $e=H(),bt=((Ze=u==null?void 0:u.getStyle())==null?void 0:Ze.layers)[$e-1].id;u.moveLayer(c.id,bt),r(9,se=ee()),r(10,ce=K()),o("layerOrderChanged")},pe=$e=>{$e.key==="Enter"&&_e()},Ge=()=>{var Ze;const $e=H(),bt=((Ze=u==null?void 0:u.getStyle())==null?void 0:Ze.layers)[$e+1].id;u.moveLayer(bt,c.id),r(9,se=ee()),r(10,ce=K()),o("layerOrderChanged")},We=$e=>{$e.key==="Enter"&&Ge()},Ae=()=>r(8,F=!F);function Ie($e){u=$e,r(2,u)}function Fe($e){c=$e,r(0,c)}function ot($e){l=$e,r(3,l)}function _t($e){T=$e,r(4,T)}function ht($e){h=$e,r(1,h)}return e.$$set=$e=>{"map"in $e&&r(2,u=$e.map),"layer"in $e&&r(0,c=$e.layer),"spriteLoader"in $e&&r(3,l=$e.spriteLoader),"relativeLayers"in $e&&r(1,h=$e.relativeLayers),"enableLayerOrder"in $e&&r(5,v=$e.enableLayerOrder),"disableVisibleButton"in $e&&r(6,w=$e.disableVisibleButton),"enableEditing"in $e&&r(7,E=$e.enableEditing),"selectedFormat"in $e&&r(4,T=$e.selectedFormat)},e.$$.update=()=>{e.$$.dirty&256&&U(),e.$$.dirty&3&&r(11,n=h&&h[c.id]?h[c.id]:K8(c.id))},[c,h,u,l,T,v,w,E,F,se,ce,n,G,H,X,_e,pe,Ge,We,Ae,Ie,Fe,ot,_t,ht]}class NO extends Dn{constructor(t){super(),zn(this,t,zO,DO,Ln,{map:2,layer:0,spriteLoader:3,relativeLayers:1,enableLayerOrder:5,disableVisibleButton:6,enableEditing:7,selectedFormat:4})}}class RO{constructor(t){Bi(this,"spriteUrl");Bi(this,"sprite");this.spriteUrl=t}async load(){const t=await Promise.all([this.loadImage(`${this.spriteUrl}@2x.png`),this.fetchUrl(`${this.spriteUrl}@2x.json`)]);return this.sprite={image:t[0],json:t[1]},this.sprite}loadImage(t){let r=!1;const n=new Promise((o,u)=>{const c=new Image;c.crossOrigin="Anonymous",c.onload=()=>{r||o(c)},c.onerror=l=>{r||u(l)},c.src=t});return n.cancel=()=>{r=!0},n}async fetchUrl(t){return(await fetch(t)).json()}getIconDataUrl(t){var n;let r;if(t.layout&&t.layout["icon-image"]){let o=t.layout["icon-image"];if(Array.isArray(o)&&(o=o[o.length-1]),(n=this.sprite)!=null&&n.json){let u;Object.keys(this.sprite.json).forEach(c=>{c===o&&(u=this.sprite.json[c])}),u&&(r=this.extractPartOfImage(this.sprite.image,u))}}return r}extractPartOfImage(t,r){const o=document.createElement("canvas");return o.width=r.width*1,o.height=r.height*1,o.getContext("2d").drawImage(t,r.x*1,r.y*1,r.width*1,r.height*1,0,0,r.width*1,r.height*1),o.toDataURL()}isSdf(t){var n;let r=!1;if(t.layout&&t.layout["icon-image"]){let o=t.layout["icon-image"];if(Array.isArray(o)&&(o=o[o.length-1]),(n=this.sprite)!=null&&n.json){let u;Object.keys(this.sprite.json).forEach(c=>{c===o&&(u=this.sprite.json[c])}),u!=null&&u.sdf&&(r=u==null?void 0:u.sdf)}}return r}}const R4=hf({}),OO=(e,t,r)=>r.indexOf(e)===t;function O4(e,t,r){const n=e.slice();return n[36]=t[r],n[38]=r,n}function F4(e){let t=e[6],r,n,o=V4(e);return{c(){o.c(),r=ao()},l(u){o.l(u),r=ao()},m(u,c){o.m(u,c),Lt(u,r,c),n=!0},p(u,c){c[0]&64&&Ln(t,t=u[6])?(ji(),it(o,1,1,Qn),Ui(),o=V4(u),o.c(),Xe(o,1),o.m(r.parentNode,r)):o.p(u,c)},i(u){n||(Xe(o),n=!0)},o(u){it(o),n=!1},d(u){u&&ge(r),o.d(u)}}}function B4(e){let t,r,n,o,u,c,l,h,v,w;function E(ee){e[20](ee)}function T(ee){e[21](ee)}function I(ee){e[22](ee)}function F(ee){e[23](ee)}let U={map:e[4],layer:e[36],spriteLoader:e[8],relativeLayers:e[5]};e[0]!==void 0&&(U.enableLayerOrder=e[0]),e[1]!==void 0&&(U.disableVisibleButton=e[1]),e[2]!==void 0&&(U.enableEditing=e[2]),e[3]!==void 0&&(U.selectedFormat=e[3]),n=new NO({props:U}),Ft.push(()=>Jt(n,"enableLayerOrder",E)),Ft.push(()=>Jt(n,"disableVisibleButton",T)),Ft.push(()=>Jt(n,"enableEditing",I)),Ft.push(()=>Jt(n,"selectedFormat",F)),n.$on("visibilityChanged",e[11]),n.$on("layerOrderChanged",e[12]);function G(...ee){return e[24](e[38],...ee)}function H(...ee){return e[25](e[38],e[36],...ee)}function X(){return e[27](e[38])}return{c(){t=yt("div"),r=yt("li"),Ut(n.$$.fragment),this.h()},l(ee){t=vt(ee,"DIV",{class:!0,draggable:!0});var K=Ct(t);r=vt(K,"LI",{class:!0});var se=Ct(r);Yt(n.$$.fragment,se),se.forEach(ge),K.forEach(ge),this.h()},h(){ve(r,"class","legend-panel-block svelte-11ej6jy"),ve(t,"class","list-item svelte-11ej6jy"),ve(t,"draggable",e[0]),ni(t,"is-active",e[7]===e[38])},m(ee,K){Lt(ee,t,K),lt(t,r),qt(n,r,null),h=!0,v||(w=[rn(t,"dragstart",G),rn(t,"drop",Fl(H)),rn(t,"dragover",e[26]),rn(t,"dragenter",X)],v=!0)},p(ee,K){e=ee;const se={};K[0]&16&&(se.map=e[4]),K[0]&512&&(se.layer=e[36]),K[0]&256&&(se.spriteLoader=e[8]),K[0]&32&&(se.relativeLayers=e[5]),!o&&K[0]&1&&(o=!0,se.enableLayerOrder=e[0],er(()=>o=!1)),!u&&K[0]&2&&(u=!0,se.disableVisibleButton=e[1],er(()=>u=!1)),!c&&K[0]&4&&(c=!0,se.enableEditing=e[2],er(()=>c=!1)),!l&&K[0]&8&&(l=!0,se.selectedFormat=e[3],er(()=>l=!1)),n.$set(se),(!h||K[0]&1)&&ve(t,"draggable",e[0]),(!h||K[0]&640)&&ni(t,"is-active",e[7]===e[38])},i(ee){h||(Xe(n.$$.fragment,ee),h=!0)},o(ee){it(n.$$.fragment,ee),h=!1},d(ee){ee&&ge(t),Vt(n),v=!1,oa(w)}}}function j4(e,t){let r,n=t[17](t[36].id),o,u,c=n&&B4(t);return{key:e,first:null,c(){r=ao(),c&&c.c(),o=ao(),this.h()},l(l){r=ao(),c&&c.l(l),o=ao(),this.h()},h(){this.first=r},m(l,h){Lt(l,r,h),c&&c.m(l,h),Lt(l,o,h),u=!0},p(l,h){t=l,h[0]&512&&(n=t[17](t[36].id)),n?c?(c.p(t,h),h[0]&512&&Xe(c,1)):(c=B4(t),c.c(),Xe(c,1),c.m(o.parentNode,o)):c&&(ji(),it(c,1,1,()=>{c=null}),Ui())},i(l){u||(Xe(c),u=!0)},o(l){it(c),u=!1},d(l){l&&ge(r),c&&c.d(l),l&&ge(o)}}}function U4(e){let t,r,n,o=e[10]&&q4();return{c(){t=yt("div"),o&&o.c(),this.h()},l(u){t=vt(u,"DIV",{class:!0,style:!0,draggable:!0});var c=Ct(t);o&&o.l(c),c.forEach(ge),this.h()},h(){ve(t,"class","list-item svelte-11ej6jy"),zo(t,"height","40px"),ve(t,"draggable",!1),ni(t,"is-active",e[7]===e[16]())},m(u,c){Lt(u,t,c),o&&o.m(t,null),r||(n=[rn(t,"drop",Fl(e[28])),rn(t,"dragover",e[29]),rn(t,"dragenter",e[30])],r=!0)},p(u,c){u[10]?o||(o=q4(),o.c(),o.m(t,null)):o&&(o.d(1),o=null),c[0]&65664&&ni(t,"is-active",u[7]===u[16]())},d(u){u&&ge(t),o&&o.d(),r=!1,oa(n)}}}function q4(e){let t,r;return{c(){t=yt("div"),r=ei("Drag to the last"),this.h()},l(n){t=vt(n,"DIV",{class:!0});var o=Ct(t);r=ti(o,"Drag to the last"),o.forEach(ge),this.h()},h(){ve(t,"class","last-drop-area svelte-11ej6jy")},m(n,o){Lt(n,t,o),lt(t,r)},d(n){n&&ge(t)}}}function V4(e){let t=[],r=new Map,n,o,u,c=e[9];const l=v=>v[36].id;for(let v=0;v<c.length;v+=1){let w=O4(e,c,v),E=l(w);r.set(E,t[v]=j4(E,w))}let h=e[0]&&U4(e);return{c(){for(let v=0;v<t.length;v+=1)t[v].c();n=mr(),h&&h.c(),o=ao()},l(v){for(let w=0;w<t.length;w+=1)t[w].l(v);n=gr(v),h&&h.l(v),o=ao()},m(v,w){for(let E=0;E<t.length;E+=1)t[E].m(v,w);Lt(v,n,w),h&&h.m(v,w),Lt(v,o,w),u=!0},p(v,w){w[0]&195519&&(c=v[9],ji(),t=wA(t,w,l,1,v,c,r,n.parentNode,xA,j4,n,O4),Ui()),v[0]?h?h.p(v,w):(h=U4(v),h.c(),h.m(o.parentNode,o)):h&&(h.d(1),h=null)},i(v){if(!u){for(let w=0;w<c.length;w+=1)Xe(t[w]);u=!0}},o(v){for(let w=0;w<t.length;w+=1)it(t[w]);u=!1},d(v){for(let w=0;w<t.length;w+=1)t[w].d(v);v&&ge(n),h&&h.d(v),v&&ge(o)}}}function FO(e){let t,r,n=e[8]&&F4(e);return{c(){t=yt("ul"),n&&n.c(),this.h()},l(o){t=vt(o,"UL",{class:!0});var u=Ct(t);n&&n.l(u),u.forEach(ge),this.h()},h(){ve(t,"class","legend-panel svelte-11ej6jy")},m(o,u){Lt(o,t,u),n&&n.m(t,null),r=!0},p(o,u){o[8]?n?(n.p(o,u),u[0]&256&&Xe(n,1)):(n=F4(o),n.c(),Xe(n,1),n.m(t,null)):n&&(ji(),it(n,1,1,()=>{n=null}),Ui())},i(o){r||(Xe(n),r=!0)},o(o){it(n),r=!1},d(o){o&&ge(t),n&&n.d()}}}function BO(e,t,r){let n,o,u;ql(e,R4,Ne=>r(32,u=Ne));let{map:c}=t,{onlyRendered:l=!0}=t,{onlyRelative:h=!0}=t,{enableLayerOrder:v=!1}=t,{disableVisibleButton:w=!1}=t,{enableEditing:E=!0}=t,T,I,F=!1,{defaultEditorFormat:U="yaml"}=t,G={},{relativeLayers:H={}}=t;const X=(Ne=!0)=>{if(!c||!T)return;const Pe=T.sprite;Pe&&(c.isStyleLoaded()?Ne===!0?(r(8,I=new RO(Pe)),I.load().then(ee)):ee():setTimeout(X,500))},ee=()=>{if(!c||!T)return;G={};const Ne=c.getStyle().layers;if(l===!0){Object.keys(u).forEach(Pt=>{G[Pt]=u[Pt]});const ft=c.queryRenderedFeatures().map(Pt=>Pt.layer.id).filter(OO),At=c.getZoom();Ne.forEach(Pt=>{const Kt=Pt.minzoom??0,$t=Pt.maxzoom??24;(ft.indexOf(Pt.id)!==-1||["heatmap","hillshade"].includes(Pt.type)&&At>=Kt&&At<=$t)&&(G[Pt.id]=Pt)})}else Ne.forEach(Pe=>{G[Pe.id]=Pe});r(9,o=[...Ne])},K=Ne=>{const Pe=Ne.detail.layer;Ne.detail.visibility==="none"?lh(R4,u[Pe.id]=Pe,u):u[Pe.id]&&delete u[Pe.id]},se=()=>{r(9,o=c.getStyle().layers),X(!1)},ce=(Ne,Pe,ft)=>{Ne.dataTransfer.dropEffect="move";const At=parseInt(Ne.dataTransfer.getData("text/plain")),Pt=o;At<=Pe?(Pt.splice(Pe+1,0,Pt[At]),Pt.splice(At,1)):(Pt.splice(Pe,0,Pt[At]),Pt.splice(At+1,1)),r(9,o=Pt),r(7,F=void 0);const Kt=o[Pe];if(ft!=null&&ft.id)c.moveLayer(Kt.id,ft.id);else{const $t=c.getStyle().layers[At];c.moveLayer($t.id)}se()},_e=(Ne,Pe)=>{Ne.dataTransfer.effectAllowed="move",Ne.dataTransfer.dropEffect="move";const ft=Pe;Ne.dataTransfer.setData("text/plain",ft)},pe=Ne=>{Ne.preventDefault(),Ne.dataTransfer.dropEffect="move"},Ge=()=>{let Ne=0;return o==null||o.forEach((Pe,ft)=>{l===!0?G[Pe.id]&&(h===!0?H[Pe.id]&&(Ne=ft):Ne=ft):h===!0?H[Pe.id]&&(Ne=ft):Ne=ft}),Ne+1},We=Ne=>{let Pe=!1;return(H[Ne]||Ne.indexOf("heatmap")>0&&H[Ne.replace("heatmap","").trim()])&&(Pe=!0),Pe},Ae=Ne=>{let Pe=!1;return l===!0?G[Ne]&&(h===!0?We(Ne)&&(Pe=!0):Pe=!0):h===!0?We(Ne)&&(Pe=!0):Pe=!0,Pe};function Ie(Ne){v=Ne,r(0,v)}function Fe(Ne){w=Ne,r(1,w)}function ot(Ne){E=Ne,r(2,E)}function _t(Ne){U=Ne,r(3,U)}const ht=(Ne,Pe)=>_e(Pe,Ne),$e=(Ne,Pe,ft)=>ce(ft,Ne,Pe),ut=Ne=>pe(Ne),bt=Ne=>{r(7,F=Ne)},Ze=Ne=>ce(Ne,Ge()),He=Ne=>pe(Ne),xe=()=>{r(7,F=Ge())};return e.$$set=Ne=>{"map"in Ne&&r(4,c=Ne.map),"onlyRendered"in Ne&&r(19,l=Ne.onlyRendered),"onlyRelative"in Ne&&r(18,h=Ne.onlyRelative),"enableLayerOrder"in Ne&&r(0,v=Ne.enableLayerOrder),"disableVisibleButton"in Ne&&r(1,w=Ne.disableVisibleButton),"enableEditing"in Ne&&r(2,E=Ne.enableEditing),"defaultEditorFormat"in Ne&&r(3,U=Ne.defaultEditorFormat),"relativeLayers"in Ne&&r(5,H=Ne.relativeLayers)},e.$$.update=()=>{e.$$.dirty[0]&128&&r(10,n=F===Ge()),e.$$.dirty[0]&48&&(c&&(c.on("moveend",ee),c.on("styledata",ee),c.on("load",()=>{r(6,T=c.getStyle())}),c.on("style:change",X)),H&&Object.keys(H).length===0&&r(18,h=!1)),e.$$.dirty[0]&64&&r(9,o=T?T.layers:[]),e.$$.dirty[0]&524288&&ee(),e.$$.dirty[0]&262144&&ee(),e.$$.dirty[0]&64&&X()},[v,w,E,U,c,H,T,F,I,o,n,K,se,ce,_e,pe,Ge,Ae,h,l,Ie,Fe,ot,_t,ht,$e,ut,bt,Ze,He,xe]}class jO extends Dn{constructor(t){super(),zn(this,t,BO,FO,Ln,{map:4,onlyRendered:19,onlyRelative:18,enableLayerOrder:0,disableVisibleButton:1,enableEditing:2,defaultEditorFormat:3,relativeLayers:5},null,[-1,-1])}}function $4(e){let t,r,n,o,u,c,l,h,v,w,E;const T=[qO,UO],I=[];function F(U,G){return U[2]?0:1}return u=F(e),c=I[u]=T[u](e),{c(){t=yt("div"),r=yt("input"),n=mr(),o=yt("label"),c.c(),this.h()},l(U){t=vt(U,"DIV",{class:!0,"data-tooltip":!0});var G=Ct(t);r=vt(G,"INPUT",{id:!0,type:!0,name:!0,class:!0}),n=gr(G),o=vt(G,"LABEL",{class:!0,for:!0});var H=Ct(o);c.l(H),H.forEach(ge),G.forEach(ge),this.h()},h(){ve(r,"id","layerorder"),ve(r,"type","checkbox"),ve(r,"name","relative_tab"),r.checked=e[2],ve(r,"class","svelte-1dgwvyy"),ve(o,"class","tab_item layer-order-tab svelte-1dgwvyy"),ve(o,"for","layerorder"),Cc(()=>e[8].call(o)),ve(t,"class","has-tooltip-bottom svelte-1dgwvyy"),ve(t,"data-tooltip",h=(e[2]?"Disable":"Enable")+" changing layer ordering")},m(U,G){Lt(U,t,G),lt(t,r),lt(t,n),lt(t,o),I[u].m(o,null),l=Rh(o,e[8].bind(o)),v=!0,w||(E=rn(r,"click",e[7]),w=!0)},p(U,G){(!v||G&4)&&(r.checked=U[2]);let H=u;u=F(U),u===H?I[u].p(U,G):(ji(),it(I[H],1,1,()=>{I[H]=null}),Ui(),c=I[u],c?c.p(U,G):(c=I[u]=T[u](U),c.c()),Xe(c,1),c.m(o,null)),(!v||G&4&&h!==(h=(U[2]?"Disable":"Enable")+" changing layer ordering"))&&ve(t,"data-tooltip",h)},i(U){v||(Xe(c),v=!0)},o(U){it(c),v=!1},d(U){U&&ge(t),I[u].d(),l(),w=!1,E()}}}function UO(e){let t,r;return t=new go({props:{icon:h7}}),{c(){Ut(t.$$.fragment)},l(n){Yt(t.$$.fragment,n)},m(n,o){qt(t,n,o),r=!0},p:Qn,i(n){r||(Xe(t.$$.fragment,n),r=!0)},o(n){it(t.$$.fragment,n),r=!1},d(n){Vt(t,n)}}}function qO(e){let t,r;return t=new go({props:{icon:UA}}),{c(){Ut(t.$$.fragment)},l(n){Yt(t.$$.fragment,n)},m(n,o){qt(t,n,o),r=!0},p:Qn,i(n){r||(Xe(t.$$.fragment,n),r=!0)},o(n){it(t.$$.fragment,n),r=!1},d(n){Vt(t,n)}}}function VO(e){let t,r,n,o,u,c,l,h,v,w,E,T,I,F,U=e[3]&&$4(e);return{c(){t=yt("div"),r=yt("input"),n=mr(),o=yt("label"),u=ei("Show rendered"),c=mr(),l=yt("input"),h=mr(),v=yt("label"),w=ei("Show related"),E=mr(),U&&U.c(),this.h()},l(G){t=vt(G,"DIV",{class:!0});var H=Ct(t);r=vt(H,"INPUT",{id:!0,type:!0,name:!0,class:!0}),n=gr(H),o=vt(H,"LABEL",{class:!0,for:!0,style:!0});var X=Ct(o);u=ti(X,"Show rendered"),X.forEach(ge),c=gr(H),l=vt(H,"INPUT",{id:!0,type:!0,name:!0,class:!0}),h=gr(H),v=vt(H,"LABEL",{class:!0,for:!0,style:!0});var ee=Ct(v);w=ti(ee,"Show related"),ee.forEach(ge),E=gr(H),U&&U.l(H),H.forEach(ge),this.h()},h(){ve(r,"id","rendered"),ve(r,"type","checkbox"),ve(r,"name","rendered_tab"),r.checked=e[0],ve(r,"class","svelte-1dgwvyy"),ve(o,"class","tab_item svelte-1dgwvyy"),ve(o,"for","rendered"),zo(o,"width","calc((100% - "+e[4]+"px - 10px)/2)"),ve(l,"id","relative"),ve(l,"type","checkbox"),ve(l,"name","relative_tab"),l.checked=e[1],ve(l,"class","svelte-1dgwvyy"),ve(v,"class","tab_item svelte-1dgwvyy"),ve(v,"for","relative"),zo(v,"width","calc((100% - "+e[4]+"px - 10px)/2)"),ve(t,"class","tabs svelte-1dgwvyy")},m(G,H){Lt(G,t,H),lt(t,r),lt(t,n),lt(t,o),lt(o,u),lt(t,c),lt(t,l),lt(t,h),lt(t,v),lt(v,w),lt(t,E),U&&U.m(t,null),T=!0,I||(F=[rn(r,"click",e[5]),rn(l,"click",e[6])],I=!0)},p(G,[H]){(!T||H&1)&&(r.checked=G[0]),(!T||H&16)&&zo(o,"width","calc((100% - "+G[4]+"px - 10px)/2)"),(!T||H&2)&&(l.checked=G[1]),(!T||H&16)&&zo(v,"width","calc((100% - "+G[4]+"px - 10px)/2)"),G[3]?U?(U.p(G,H),H&8&&Xe(U,1)):(U=$4(G),U.c(),Xe(U,1),U.m(t,null)):U&&(ji(),it(U,1,1,()=>{U=null}),Ui())},i(G){T||(Xe(U),T=!0)},o(G){it(U),T=!1},d(G){G&&ge(t),U&&U.d(),I=!1,oa(F)}}}function $O(e,t,r){let{onlyRendered:n=!0}=t,{onlyRelative:o=!0}=t,{enableLayerOrder:u=!1}=t,{isLayerOrderShown:c=!1}=t,l=0;const h=()=>r(0,n=!n),v=()=>r(1,o=!o),w=()=>r(2,u=!u);function E(){l=this.clientWidth,r(4,l)}return e.$$set=T=>{"onlyRendered"in T&&r(0,n=T.onlyRendered),"onlyRelative"in T&&r(1,o=T.onlyRelative),"enableLayerOrder"in T&&r(2,u=T.enableLayerOrder),"isLayerOrderShown"in T&&r(3,c=T.isLayerOrderShown)},[n,o,u,c,l,h,v,w,E]}class GO extends Dn{constructor(t){super(),zn(this,t,$O,VO,Ln,{onlyRendered:0,onlyRelative:1,enableLayerOrder:2,isLayerOrderShown:3})}}class Q8{constructor(){Bi(this,"STYLE_PATHNAME","style")}getUrl(){const t=window.location,r=new URL(t.href);return r.hash=t.hash,r}updateUrl(t){history.replaceState("","",t.toString())}get(){return this.getUrl().searchParams.get(this.STYLE_PATHNAME)}set(t){const r=this.getUrl();r.searchParams.set(this.STYLE_PATHNAME,t),this.updateUrl(r)}delete(){const t=this.getUrl();t.searchParams.delete(this.STYLE_PATHNAME),this.updateUrl(t)}getMatchedStyleByTitle(t,r){for(const n of t)if(n.title===r)return n}getMatchedStyleByUrl(t,r){for(const n of t)if(n.uri===r)return n}getInitialStyle(t){const r=t[0],n=this.get();let o=r;if(n){const u=this.getMatchedStyleByTitle(t,n);u&&(o=u)}else this.set(o.title);return o}}function G4(e,t,r){const n=e.slice();return n[8]=t[r],n}function H4(e){let t,r=e[8].title+"",n,o;return{c(){t=yt("option"),n=ei(r),this.h()},l(u){t=vt(u,"OPTION",{});var c=Ct(t);n=ti(c,r),c.forEach(ge),this.h()},h(){t.__value=o=e[8].uri,t.value=t.__value},m(u,c){Lt(u,t,c),lt(t,n)},p(u,c){c&1&&r!==(r=u[8].title+"")&&ta(n,r),c&1&&o!==(o=u[8].uri)&&(t.__value=o,t.value=t.__value)},d(u){u&&ge(t)}}}function HO(e){let t,r,n,o=e[0],u=[];for(let c=0;c<o.length;c+=1)u[c]=H4(G4(e,o,c));return{c(){t=yt("select");for(let c=0;c<u.length;c+=1)u[c].c();this.h()},l(c){t=vt(c,"SELECT",{class:!0});var l=Ct(t);for(let h=0;h<u.length;h+=1)u[h].l(l);l.forEach(ge),this.h()},h(){ve(t,"class","style-select svelte-1t35gnv"),e[1]===void 0&&Cc(()=>e[4].call(t))},m(c,l){Lt(c,t,l);for(let h=0;h<u.length;h+=1)u[h].m(t,null);Vc(t,e[1]),r||(n=rn(t,"change",e[4]),r=!0)},p(c,[l]){if(l&1){o=c[0];let h;for(h=0;h<o.length;h+=1){const v=G4(c,o,h);u[h]?u[h].p(v,l):(u[h]=H4(v),u[h].c(),u[h].m(t,null))}for(;h<u.length;h+=1)u[h].d(1);u.length=o.length}l&3&&Vc(t,c[1])},i:Qn,o:Qn,d(c){c&&ge(t),Ol(u,c),r=!1,n()}}}function WO(e,t,r){let{map:n}=t,{styles:o}=t,{selectedStyle:u}=t;const c=mp();let l=u.uri;const h=()=>{n&&l!==u.uri&&(n.setStyle(l),n.on("styledata",()=>{const E=new Q8,T=E.getMatchedStyleByUrl(o,l);T?(E.set(T.title),r(2,u=T)):E.delete(),c("change")}))},v=()=>{l!==u.uri&&r(1,l=u.uri)};function w(){l=qh(this),r(1,l),r(0,o)}return e.$$set=E=>{"map"in E&&r(3,n=E.map),"styles"in E&&r(0,o=E.styles),"selectedStyle"in E&&r(2,u=E.selectedStyle)},e.$$.update=()=>{e.$$.dirty&2&&h(),e.$$.dirty&4&&v()},[o,l,u,n,w]}class ZO extends Dn{constructor(t){super(),zn(this,t,WO,HO,Ln,{map:3,styles:0,selectedStyle:2})}}function W4(e,t,r){var n,o,u,c,l;t==null&&(t=100);function h(){var w=Date.now()-c;w<t&&w>=0?n=setTimeout(h,t-w):(n=null,r||(l=e.apply(u,o),u=o=null))}var v=function(){u=this,o=arguments,c=Date.now();var w=r&&!n;return n||(n=setTimeout(h,t)),w&&(l=e.apply(u,o),u=o=null),l};return v.clear=function(){n&&(clearTimeout(n),n=null)},v.flush=function(){n&&(l=e.apply(u,o),u=o=null,clearTimeout(n),n=null)},v}W4.debounce=W4;function XO(e){let t,r,n,o,u,c,l,h,v,w,E,T,I,F,U,G,H,X,ee,K;function se(ut){e[9](ut)}function ce(ut){e[10](ut)}function _e(ut){e[11](ut)}let pe={};e[5]!==void 0&&(pe.map=e[5]),e[6]!==void 0&&(pe.selectedStyle=e[6]),e[0].styles!==void 0&&(pe.styles=e[0].styles),n=new ZO({props:pe}),Ft.push(()=>Jt(n,"map",se)),Ft.push(()=>Jt(n,"selectedStyle",ce)),Ft.push(()=>Jt(n,"styles",_e)),n.$on("change",e[7]);function Ge(ut){e[12](ut)}function We(ut){e[13](ut)}function Ae(ut){e[14](ut)}let Ie={isLayerOrderShown:!0};e[1]!==void 0&&(Ie.onlyRendered=e[1]),e[2]!==void 0&&(Ie.onlyRelative=e[2]),e[3]!==void 0&&(Ie.enableLayerOrder=e[3]),v=new GO({props:Ie}),Ft.push(()=>Jt(v,"onlyRendered",Ge)),Ft.push(()=>Jt(v,"onlyRelative",We)),Ft.push(()=>Jt(v,"enableLayerOrder",Ae));function Fe(ut){e[15](ut)}function ot(ut){e[16](ut)}function _t(ut){e[17](ut)}function ht(ut){e[18](ut)}let $e={relativeLayers:e[4],disableVisibleButton:!1};return e[5]!==void 0&&($e.map=e[5]),e[1]!==void 0&&($e.onlyRendered=e[1]),e[2]!==void 0&&($e.onlyRelative=e[2]),e[3]!==void 0&&($e.enableLayerOrder=e[3]),U=new jO({props:$e}),Ft.push(()=>Jt(U,"map",Fe)),Ft.push(()=>Jt(U,"onlyRendered",ot)),Ft.push(()=>Jt(U,"onlyRelative",_t)),Ft.push(()=>Jt(U,"enableLayerOrder",ht)),{c(){t=yt("div"),r=yt("div"),Ut(n.$$.fragment),l=mr(),h=yt("div"),Ut(v.$$.fragment),I=mr(),F=yt("div"),Ut(U.$$.fragment),this.h()},l(ut){t=vt(ut,"DIV",{class:!0});var bt=Ct(t);r=vt(bt,"DIV",{class:!0});var Ze=Ct(r);Yt(n.$$.fragment,Ze),Ze.forEach(ge),l=gr(bt),h=vt(bt,"DIV",{class:!0});var He=Ct(h);Yt(v.$$.fragment,He),He.forEach(ge),I=gr(bt),F=vt(bt,"DIV",{class:!0});var xe=Ct(F);Yt(U.$$.fragment,xe),xe.forEach(ge),bt.forEach(ge),this.h()},h(){ve(r,"class","style-header svelte-1b1i5r2"),ve(h,"class","legend-header m-1 svelte-1b1i5r2"),ve(F,"class","legend-content svelte-1b1i5r2"),ve(t,"class","primary-container svelte-1b1i5r2")},m(ut,bt){Lt(ut,t,bt),lt(t,r),qt(n,r,null),lt(t,l),lt(t,h),qt(v,h,null),lt(t,I),lt(t,F),qt(U,F,null),K=!0},p(ut,[bt]){const Ze={};!o&&bt&32&&(o=!0,Ze.map=ut[5],er(()=>o=!1)),!u&&bt&64&&(u=!0,Ze.selectedStyle=ut[6],er(()=>u=!1)),!c&&bt&1&&(c=!0,Ze.styles=ut[0].styles,er(()=>c=!1)),n.$set(Ze);const He={};!w&&bt&2&&(w=!0,He.onlyRendered=ut[1],er(()=>w=!1)),!E&&bt&4&&(E=!0,He.onlyRelative=ut[2],er(()=>E=!1)),!T&&bt&8&&(T=!0,He.enableLayerOrder=ut[3],er(()=>T=!1)),v.$set(He);const xe={};bt&16&&(xe.relativeLayers=ut[4]),!G&&bt&32&&(G=!0,xe.map=ut[5],er(()=>G=!1)),!H&&bt&2&&(H=!0,xe.onlyRendered=ut[1],er(()=>H=!1)),!X&&bt&4&&(X=!0,xe.onlyRelative=ut[2],er(()=>X=!1)),!ee&&bt&8&&(ee=!0,xe.enableLayerOrder=ut[3],er(()=>ee=!1)),U.$set(xe)},i(ut){K||(Xe(n.$$.fragment,ut),Xe(v.$$.fragment,ut),Xe(U.$$.fragment,ut),K=!0)},o(ut){it(n.$$.fragment,ut),it(v.$$.fragment,ut),it(U.$$.fragment,ut),K=!1},d(ut){ut&&ge(t),Vt(n),Vt(v),Vt(U)}}}function YO(e,t,r){let n,o;ql(e,Sc,se=>r(5,n=se)),ql(e,rd,se=>r(6,o=se));let u=!0,c=!0,l=!1,h={},{isLayersTabVisible:v=!1}=t;oo.legend&&oo.legend.targets&&(h=oo.legend.targets);const w=()=>{n&&n.fire("style:change")};function E(se){n=se,Sc.set(n)}function T(se){o=se,rd.set(o)}function I(se){e.$$.not_equal(oo.styles,se)&&(oo.styles=se,r(0,oo))}function F(se){u=se,r(1,u)}function U(se){c=se,r(2,c)}function G(se){l=se,r(3,l)}function H(se){n=se,Sc.set(n)}function X(se){u=se,r(1,u)}function ee(se){c=se,r(2,c)}function K(se){l=se,r(3,l)}return e.$$set=se=>{"isLayersTabVisible"in se&&r(8,v=se.isLayersTabVisible)},[oo,u,c,l,h,n,o,w,v,E,T,I,F,U,G,H,X,ee,K]}class JO extends Dn{constructor(t){super(),zn(this,t,YO,XO,Ln,{isLayersTabVisible:8})}}var cy={},KO={get exports(){return cy},set exports(e){cy=e}},X1={},QO={get exports(){return X1},set exports(e){X1=e}},ex=function(t,r){return function(){for(var o=new Array(arguments.length),u=0;u<o.length;u++)o[u]=arguments[u];return t.apply(r,o)}},eF=ex,dh=Object.prototype.toString;function Mv(e){return dh.call(e)==="[object Array]"}function fy(e){return typeof e>"u"}function tF(e){return e!==null&&!fy(e)&&e.constructor!==null&&!fy(e.constructor)&&typeof e.constructor.isBuffer=="function"&&e.constructor.isBuffer(e)}function rF(e){return dh.call(e)==="[object ArrayBuffer]"}function nF(e){return typeof FormData<"u"&&e instanceof FormData}function iF(e){var t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&e.buffer instanceof ArrayBuffer,t}function oF(e){return typeof e=="string"}function aF(e){return typeof e=="number"}function tx(e){return e!==null&&typeof e=="object"}function C1(e){if(dh.call(e)!=="[object Object]")return!1;var t=Object.getPrototypeOf(e);return t===null||t===Object.prototype}function sF(e){return dh.call(e)==="[object Date]"}function lF(e){return dh.call(e)==="[object File]"}function uF(e){return dh.call(e)==="[object Blob]"}function rx(e){return dh.call(e)==="[object Function]"}function cF(e){return tx(e)&&rx(e.pipe)}function fF(e){return typeof URLSearchParams<"u"&&e instanceof URLSearchParams}function hF(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function pF(){return typeof navigator<"u"&&(navigator.product==="ReactNative"||navigator.product==="NativeScript"||navigator.product==="NS")?!1:typeof window<"u"&&typeof document<"u"}function Dv(e,t){if(!(e===null||typeof e>"u"))if(typeof e!="object"&&(e=[e]),Mv(e))for(var r=0,n=e.length;r<n;r++)t.call(null,e[r],r,e);else for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.call(null,e[o],o,e)}function hy(){var e={};function t(o,u){C1(e[u])&&C1(o)?e[u]=hy(e[u],o):C1(o)?e[u]=hy({},o):Mv(o)?e[u]=o.slice():e[u]=o}for(var r=0,n=arguments.length;r<n;r++)Dv(arguments[r],t);return e}function dF(e,t,r){return Dv(t,function(o,u){r&&typeof o=="function"?e[u]=eF(o,r):e[u]=o}),e}function mF(e){return e.charCodeAt(0)===65279&&(e=e.slice(1)),e}var Lc={isArray:Mv,isArrayBuffer:rF,isBuffer:tF,isFormData:nF,isArrayBufferView:iF,isString:oF,isNumber:aF,isObject:tx,isPlainObject:C1,isUndefined:fy,isDate:sF,isFile:lF,isBlob:uF,isFunction:rx,isStream:cF,isURLSearchParams:fF,isStandardBrowserEnv:pF,forEach:Dv,merge:hy,extend:dF,trim:hF,stripBOM:mF},Eh=Lc;function Z4(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var nx=function(t,r,n){if(!r)return t;var o;if(n)o=n(r);else if(Eh.isURLSearchParams(r))o=r.toString();else{var u=[];Eh.forEach(r,function(h,v){h===null||typeof h>"u"||(Eh.isArray(h)?v=v+"[]":h=[h],Eh.forEach(h,function(E){Eh.isDate(E)?E=E.toISOString():Eh.isObject(E)&&(E=JSON.stringify(E)),u.push(Z4(v)+"="+Z4(E))}))}),o=u.join("&")}if(o){var c=t.indexOf("#");c!==-1&&(t=t.slice(0,c)),t+=(t.indexOf("?")===-1?"?":"&")+o}return t},gF=Lc;function _2(){this.handlers=[]}_2.prototype.use=function(t,r,n){return this.handlers.push({fulfilled:t,rejected:r,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1};_2.prototype.eject=function(t){this.handlers[t]&&(this.handlers[t]=null)};_2.prototype.forEach=function(t){gF.forEach(this.handlers,function(n){n!==null&&t(n)})};var yF=_2,vF=Lc,_F=function(t,r){vF.forEach(t,function(o,u){u!==r&&u.toUpperCase()===r.toUpperCase()&&(t[r]=o,delete t[u])})},ix=function(t,r,n,o,u){return t.config=r,n&&(t.code=n),t.request=o,t.response=u,t.isAxiosError=!0,t.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},t},Fm,X4;function ox(){if(X4)return Fm;X4=1;var e=ix;return Fm=function(r,n,o,u,c){var l=new Error(r);return e(l,n,o,u,c)},Fm}var Bm,Y4;function bF(){if(Y4)return Bm;Y4=1;var e=ox();return Bm=function(r,n,o){var u=o.config.validateStatus;!o.status||!u||u(o.status)?r(o):n(e("Request failed with status code "+o.status,o.config,null,o.request,o))},Bm}var jm,J4;function wF(){if(J4)return jm;J4=1;var e=Lc;return jm=e.isStandardBrowserEnv()?function(){return{write:function(n,o,u,c,l,h){var v=[];v.push(n+"="+encodeURIComponent(o)),e.isNumber(u)&&v.push("expires="+new Date(u).toGMTString()),e.isString(c)&&v.push("path="+c),e.isString(l)&&v.push("domain="+l),h===!0&&v.push("secure"),document.cookie=v.join("; ")},read:function(n){var o=document.cookie.match(new RegExp("(^|;\\s*)("+n+")=([^;]*)"));return o?decodeURIComponent(o[3]):null},remove:function(n){this.write(n,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}(),jm}var Um,K4;function xF(){return K4||(K4=1,Um=function(t){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(t)}),Um}var qm,Q4;function kF(){return Q4||(Q4=1,qm=function(t,r){return r?t.replace(/\/+$/,"")+"/"+r.replace(/^\/+/,""):t}),qm}var Vm,e3;function AF(){if(e3)return Vm;e3=1;var e=xF(),t=kF();return Vm=function(n,o){return n&&!e(o)?t(n,o):o},Vm}var $m,t3;function EF(){if(t3)return $m;t3=1;var e=Lc,t=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];return $m=function(n){var o={},u,c,l;return n&&e.forEach(n.split(`
`),function(v){if(l=v.indexOf(":"),u=e.trim(v.substr(0,l)).toLowerCase(),c=e.trim(v.substr(l+1)),u){if(o[u]&&t.indexOf(u)>=0)return;u==="set-cookie"?o[u]=(o[u]?o[u]:[]).concat([c]):o[u]=o[u]?o[u]+", "+c:c}}),o},$m}var Gm,r3;function SF(){if(r3)return Gm;r3=1;var e=Lc;return Gm=e.isStandardBrowserEnv()?function(){var r=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a"),o;function u(c){var l=c;return r&&(n.setAttribute("href",l),l=n.href),n.setAttribute("href",l),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:n.pathname.charAt(0)==="/"?n.pathname:"/"+n.pathname}}return o=u(window.location.href),function(l){var h=e.isString(l)?u(l):l;return h.protocol===o.protocol&&h.host===o.host}}():function(){return function(){return!0}}(),Gm}var Hm,n3;function i3(){if(n3)return Hm;n3=1;var e=Lc,t=bF(),r=wF(),n=nx,o=AF(),u=EF(),c=SF(),l=ox();return Hm=function(v){return new Promise(function(E,T){var I=v.data,F=v.headers,U=v.responseType;e.isFormData(I)&&delete F["Content-Type"];var G=new XMLHttpRequest;if(v.auth){var H=v.auth.username||"",X=v.auth.password?unescape(encodeURIComponent(v.auth.password)):"";F.Authorization="Basic "+btoa(H+":"+X)}var ee=o(v.baseURL,v.url);G.open(v.method.toUpperCase(),n(ee,v.params,v.paramsSerializer),!0),G.timeout=v.timeout;function K(){if(G){var ce="getAllResponseHeaders"in G?u(G.getAllResponseHeaders()):null,_e=!U||U==="text"||U==="json"?G.responseText:G.response,pe={data:_e,status:G.status,statusText:G.statusText,headers:ce,config:v,request:G};t(E,T,pe),G=null}}if("onloadend"in G?G.onloadend=K:G.onreadystatechange=function(){!G||G.readyState!==4||G.status===0&&!(G.responseURL&&G.responseURL.indexOf("file:")===0)||setTimeout(K)},G.onabort=function(){G&&(T(l("Request aborted",v,"ECONNABORTED",G)),G=null)},G.onerror=function(){T(l("Network Error",v,null,G)),G=null},G.ontimeout=function(){var _e="timeout of "+v.timeout+"ms exceeded";v.timeoutErrorMessage&&(_e=v.timeoutErrorMessage),T(l(_e,v,v.transitional&&v.transitional.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",G)),G=null},e.isStandardBrowserEnv()){var se=(v.withCredentials||c(ee))&&v.xsrfCookieName?r.read(v.xsrfCookieName):void 0;se&&(F[v.xsrfHeaderName]=se)}"setRequestHeader"in G&&e.forEach(F,function(_e,pe){typeof I>"u"&&pe.toLowerCase()==="content-type"?delete F[pe]:G.setRequestHeader(pe,_e)}),e.isUndefined(v.withCredentials)||(G.withCredentials=!!v.withCredentials),U&&U!=="json"&&(G.responseType=v.responseType),typeof v.onDownloadProgress=="function"&&G.addEventListener("progress",v.onDownloadProgress),typeof v.onUploadProgress=="function"&&G.upload&&G.upload.addEventListener("progress",v.onUploadProgress),v.cancelToken&&v.cancelToken.promise.then(function(_e){G&&(G.abort(),T(_e),G=null)}),I||(I=null),G.send(I)})},Hm}var Rl=Lc,o3=_F,CF=ix,IF={"Content-Type":"application/x-www-form-urlencoded"};function a3(e,t){!Rl.isUndefined(e)&&Rl.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}function TF(){var e;return(typeof XMLHttpRequest<"u"||typeof process<"u"&&Object.prototype.toString.call(process)==="[object process]")&&(e=i3()),e}function LF(e,t,r){if(Rl.isString(e))try{return(t||JSON.parse)(e),Rl.trim(e)}catch(n){if(n.name!=="SyntaxError")throw n}return(r||JSON.stringify)(e)}var b2={transitional:{silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},adapter:TF(),transformRequest:[function(t,r){return o3(r,"Accept"),o3(r,"Content-Type"),Rl.isFormData(t)||Rl.isArrayBuffer(t)||Rl.isBuffer(t)||Rl.isStream(t)||Rl.isFile(t)||Rl.isBlob(t)?t:Rl.isArrayBufferView(t)?t.buffer:Rl.isURLSearchParams(t)?(a3(r,"application/x-www-form-urlencoded;charset=utf-8"),t.toString()):Rl.isObject(t)||r&&r["Content-Type"]==="application/json"?(a3(r,"application/json"),LF(t)):t}],transformResponse:[function(t){var r=this.transitional,n=r&&r.silentJSONParsing,o=r&&r.forcedJSONParsing,u=!n&&this.responseType==="json";if(u||o&&Rl.isString(t)&&t.length)try{return JSON.parse(t)}catch(c){if(u)throw c.name==="SyntaxError"?CF(c,this,"E_JSON_PARSE"):c}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(t){return t>=200&&t<300}};b2.headers={common:{Accept:"application/json, text/plain, */*"}};Rl.forEach(["delete","get","head"],function(t){b2.headers[t]={}});Rl.forEach(["post","put","patch"],function(t){b2.headers[t]=Rl.merge(IF)});var zv=b2,PF=Lc,MF=zv,DF=function(t,r,n){var o=this||MF;return PF.forEach(n,function(c){t=c.call(o,t,r)}),t},Wm,s3;function ax(){return s3||(s3=1,Wm=function(t){return!!(t&&t.__CANCEL__)}),Wm}var l3=Lc,Zm=DF,zF=ax(),NF=zv;function Xm(e){e.cancelToken&&e.cancelToken.throwIfRequested()}var RF=function(t){Xm(t),t.headers=t.headers||{},t.data=Zm.call(t,t.data,t.headers,t.transformRequest),t.headers=l3.merge(t.headers.common||{},t.headers[t.method]||{},t.headers),l3.forEach(["delete","get","head","post","put","patch","common"],function(o){delete t.headers[o]});var r=t.adapter||NF.adapter;return r(t).then(function(o){return Xm(t),o.data=Zm.call(t,o.data,o.headers,t.transformResponse),o},function(o){return zF(o)||(Xm(t),o&&o.response&&(o.response.data=Zm.call(t,o.response.data,o.response.headers,t.transformResponse))),Promise.reject(o)})},cu=Lc,sx=function(t,r){r=r||{};var n={},o=["url","method","data"],u=["headers","auth","proxy","params"],c=["baseURL","transformRequest","transformResponse","paramsSerializer","timeout","timeoutMessage","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","decompress","maxContentLength","maxBodyLength","maxRedirects","transport","httpAgent","httpsAgent","cancelToken","socketPath","responseEncoding"],l=["validateStatus"];function h(T,I){return cu.isPlainObject(T)&&cu.isPlainObject(I)?cu.merge(T,I):cu.isPlainObject(I)?cu.merge({},I):cu.isArray(I)?I.slice():I}function v(T){cu.isUndefined(r[T])?cu.isUndefined(t[T])||(n[T]=h(void 0,t[T])):n[T]=h(t[T],r[T])}cu.forEach(o,function(I){cu.isUndefined(r[I])||(n[I]=h(void 0,r[I]))}),cu.forEach(u,v),cu.forEach(c,function(I){cu.isUndefined(r[I])?cu.isUndefined(t[I])||(n[I]=h(void 0,t[I])):n[I]=h(void 0,r[I])}),cu.forEach(l,function(I){I in r?n[I]=h(t[I],r[I]):I in t&&(n[I]=h(void 0,t[I]))});var w=o.concat(u).concat(c).concat(l),E=Object.keys(t).concat(Object.keys(r)).filter(function(I){return w.indexOf(I)===-1});return cu.forEach(E,v),n};const OF="axios",FF="0.21.4",BF="Promise based HTTP client for the browser and node.js",jF="index.js",UF={test:"grunt test",start:"node ./sandbox/server.js",build:"NODE_ENV=production grunt build",preversion:"npm test",version:"npm run build && grunt version && git add -A dist && git add CHANGELOG.md bower.json package.json",postversion:"git push && git push --tags",examples:"node ./examples/server.js",coveralls:"cat coverage/lcov.info | ./node_modules/coveralls/bin/coveralls.js",fix:"eslint --fix lib/**/*.js"},qF={type:"git",url:"https://github.com/axios/axios.git"},VF=["xhr","http","ajax","promise","node"],$F="Matt Zabriskie",GF="MIT",HF={url:"https://github.com/axios/axios/issues"},WF="https://axios-http.com",ZF={coveralls:"^3.0.0","es6-promise":"^4.2.4",grunt:"^1.3.0","grunt-banner":"^0.6.0","grunt-cli":"^1.2.0","grunt-contrib-clean":"^1.1.0","grunt-contrib-watch":"^1.0.0","grunt-eslint":"^23.0.0","grunt-karma":"^4.0.0","grunt-mocha-test":"^0.13.3","grunt-ts":"^6.0.0-beta.19","grunt-webpack":"^4.0.2","istanbul-instrumenter-loader":"^1.0.0","jasmine-core":"^2.4.1",karma:"^6.3.2","karma-chrome-launcher":"^3.1.0","karma-firefox-launcher":"^2.1.0","karma-jasmine":"^1.1.1","karma-jasmine-ajax":"^0.1.13","karma-safari-launcher":"^1.0.0","karma-sauce-launcher":"^4.3.6","karma-sinon":"^1.0.5","karma-sourcemap-loader":"^0.3.8","karma-webpack":"^4.0.2","load-grunt-tasks":"^3.5.2",minimist:"^1.2.0",mocha:"^8.2.1",sinon:"^4.5.0","terser-webpack-plugin":"^4.2.3",typescript:"^4.0.5","url-search-params":"^0.10.0",webpack:"^4.44.2","webpack-dev-server":"^3.11.0"},XF={"./lib/adapters/http.js":"./lib/adapters/xhr.js"},YF="dist/axios.min.js",JF="dist/axios.min.js",KF="./index.d.ts",QF={"follow-redirects":"^1.14.0"},eB=[{path:"./dist/axios.min.js",threshold:"5kB"}],tB={name:OF,version:FF,description:BF,main:jF,scripts:UF,repository:qF,keywords:VF,author:$F,license:GF,bugs:HF,homepage:WF,devDependencies:ZF,browser:XF,jsdelivr:YF,unpkg:JF,typings:KF,dependencies:QF,bundlesize:eB};var lx=tB,Nv={};["object","boolean","number","function","string","symbol"].forEach(function(e,t){Nv[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}});var u3={},rB=lx.version.split(".");function ux(e,t){for(var r=t?t.split("."):rB,n=e.split("."),o=0;o<3;o++){if(r[o]>n[o])return!0;if(r[o]<n[o])return!1}return!1}Nv.transitional=function(t,r,n){var o=r&&ux(r);function u(c,l){return"[Axios v"+lx.version+"] Transitional option '"+c+"'"+l+(n?". "+n:"")}return function(c,l,h){if(t===!1)throw new Error(u(l," has been removed in "+r));return o&&!u3[l]&&(u3[l]=!0,console.warn(u(l," has been deprecated since v"+r+" and will be removed in the near future"))),t?t(c,l,h):!0}};function nB(e,t,r){if(typeof e!="object")throw new TypeError("options must be an object");for(var n=Object.keys(e),o=n.length;o-- >0;){var u=n[o],c=t[u];if(c){var l=e[u],h=l===void 0||c(l,u,e);if(h!==!0)throw new TypeError("option "+u+" must be "+h);continue}if(r!==!0)throw Error("Unknown option "+u)}}var iB={isOlderVersion:ux,assertOptions:nB,validators:Nv},cx=Lc,oB=nx,c3=yF,f3=RF,w2=sx,fx=iB,Sh=fx.validators;function Id(e){this.defaults=e,this.interceptors={request:new c3,response:new c3}}Id.prototype.request=function(t){typeof t=="string"?(t=arguments[1]||{},t.url=arguments[0]):t=t||{},t=w2(this.defaults,t),t.method?t.method=t.method.toLowerCase():this.defaults.method?t.method=this.defaults.method.toLowerCase():t.method="get";var r=t.transitional;r!==void 0&&fx.assertOptions(r,{silentJSONParsing:Sh.transitional(Sh.boolean,"1.0.0"),forcedJSONParsing:Sh.transitional(Sh.boolean,"1.0.0"),clarifyTimeoutError:Sh.transitional(Sh.boolean,"1.0.0")},!1);var n=[],o=!0;this.interceptors.request.forEach(function(T){typeof T.runWhen=="function"&&T.runWhen(t)===!1||(o=o&&T.synchronous,n.unshift(T.fulfilled,T.rejected))});var u=[];this.interceptors.response.forEach(function(T){u.push(T.fulfilled,T.rejected)});var c;if(!o){var l=[f3,void 0];for(Array.prototype.unshift.apply(l,n),l=l.concat(u),c=Promise.resolve(t);l.length;)c=c.then(l.shift(),l.shift());return c}for(var h=t;n.length;){var v=n.shift(),w=n.shift();try{h=v(h)}catch(E){w(E);break}}try{c=f3(h)}catch(E){return Promise.reject(E)}for(;u.length;)c=c.then(u.shift(),u.shift());return c};Id.prototype.getUri=function(t){return t=w2(this.defaults,t),oB(t.url,t.params,t.paramsSerializer).replace(/^\?/,"")};cx.forEach(["delete","get","head","options"],function(t){Id.prototype[t]=function(r,n){return this.request(w2(n||{},{method:t,url:r,data:(n||{}).data}))}});cx.forEach(["post","put","patch"],function(t){Id.prototype[t]=function(r,n,o){return this.request(w2(o||{},{method:t,url:r,data:n}))}});var aB=Id,Ym,h3;function hx(){if(h3)return Ym;h3=1;function e(t){this.message=t}return e.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},e.prototype.__CANCEL__=!0,Ym=e,Ym}var Jm,p3;function sB(){if(p3)return Jm;p3=1;var e=hx();function t(r){if(typeof r!="function")throw new TypeError("executor must be a function.");var n;this.promise=new Promise(function(c){n=c});var o=this;r(function(c){o.reason||(o.reason=new e(c),n(o.reason))})}return t.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},t.source=function(){var n,o=new t(function(c){n=c});return{token:o,cancel:n}},Jm=t,Jm}var Km,d3;function lB(){return d3||(d3=1,Km=function(t){return function(n){return t.apply(null,n)}}),Km}var Qm,m3;function uB(){return m3||(m3=1,Qm=function(t){return typeof t=="object"&&t.isAxiosError===!0}),Qm}var g3=Lc,cB=ex,I1=aB,fB=sx,hB=zv;function px(e){var t=new I1(e),r=cB(I1.prototype.request,t);return g3.extend(r,I1.prototype,t),g3.extend(r,t),r}var y0=px(hB);y0.Axios=I1;y0.create=function(t){return px(fB(y0.defaults,t))};y0.Cancel=hx();y0.CancelToken=sB();y0.isCancel=ax();y0.all=function(t){return Promise.all(t)};y0.spread=lB();y0.isAxiosError=uB();QO.exports=y0;X1.default=y0;(function(e){e.exports=X1})(KO);const pB=EA(cy),py=";base64,",dB=e=>e.indexOf(py)>-1,mB=e=>{const t=e.indexOf(py)+py.length,r=e.substring(t),n=window.atob(r),o=n.length,u=new Uint8Array(new ArrayBuffer(o));for(let c=0;c<o;c++)u[c]=n.charCodeAt(c);return u};async function gB(){const e=["data:image/webp;base64,UklGRjIAAABXRUJQVlA4ICYAAACyAgCdASoCAAEALmk0mk0iIiIiIgBoSygABc6zbAAA/v56QAAAAA==","data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA="],t=n=>new Promise((o,u)=>{var c=document.createElement("img");c.onerror=l=>o(!1),c.onload=()=>o(!0),c.src=n});return(await Promise.all(e.map(t))).every(n=>!!n)}class yB extends Error{}async function dx(e){return new Promise((t,r)=>{const n=new XMLHttpRequest;n.open("GET",e),n.responseType="arraybuffer";const o=()=>{r(new yB(`failed to load binary data, code "${n.status}" from "${e}"`))};n.onerror=o,n.onreadystatechange=()=>{n.readyState==4&&(n.status==200?t(new Uint8Array(n.response)):o())},n.send()})}function vB(){var e=typeof e<"u"?e:{},t=function(){function R(){}function W(pr,vr){return function(){pr.apply(vr,arguments)}}function ae(pr){if(!(this instanceof ae))throw new TypeError("Promises must be constructed via new");if(typeof pr!="function")throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],wr(pr,this)}function ke(pr,vr){for(;pr._state===3;)pr=pr._value;if(pr._state===0){pr._deferreds.push(vr);return}pr._handled=!0,ae._immediateFn(function(){var ar=pr._state===1?vr.onFulfilled:vr.onRejected;if(ar===null){(pr._state===1?Ye:dt)(vr.promise,pr._value);return}var $r;try{$r=ar(pr._value)}catch(cn){dt(vr.promise,cn);return}Ye(vr.promise,$r)})}function Ye(pr,vr){try{if(vr===pr)throw new TypeError("A promise cannot be resolved with itself.");if(vr&&(typeof vr=="object"||typeof vr=="function")){var ar=vr.then;if(vr instanceof ae){pr._state=3,pr._value=vr,Mt(pr);return}else if(typeof ar=="function"){wr(W(ar,vr),pr);return}}pr._state=1,pr._value=vr,Mt(pr)}catch($r){dt(pr,$r)}}function dt(pr,vr){pr._state=2,pr._value=vr,Mt(pr)}function Mt(pr){pr._state===2&&pr._deferreds.length===0&&ae._immediateFn(function(){pr._handled||ae._unhandledRejectionFn(pr._value)});for(var vr=0,ar=pr._deferreds.length;vr<ar;vr++)ke(pr,pr._deferreds[vr]);pr._deferreds=null}function Tt(pr,vr,ar){this.onFulfilled=typeof pr=="function"?pr:null,this.onRejected=typeof vr=="function"?vr:null,this.promise=ar}function wr(pr,vr){var ar=!1;try{pr(function($r){ar||(ar=!0,Ye(vr,$r))},function($r){ar||(ar=!0,dt(vr,$r))})}catch($r){if(ar)return;ar=!0,dt(vr,$r)}}return ae.prototype.catch=function(pr){return this.then(null,pr)},ae.prototype.then=function(pr,vr){var ar=new this.constructor(R);return ke(this,new Tt(pr,vr,ar)),ar},ae.all=function(pr){return new ae(function(vr,ar){if(!Array.isArray(pr))return ar(new TypeError("Promise.all accepts an array"));var $r=Array.prototype.slice.call(pr);if($r.length===0)return vr([]);var cn=$r.length;function In(m,Pr){try{if(Pr&&(typeof Pr=="object"||typeof Pr=="function")){var f=Pr.then;if(typeof f=="function"){f.call(Pr,function(L){In(m,L)},ar);return}}$r[m]=Pr,--cn===0&&vr($r)}catch(L){ar(L)}}for(var et=0;et<$r.length;et++)In(et,$r[et])})},ae.resolve=function(pr){return pr&&typeof pr=="object"&&pr.constructor===ae?pr:new ae(function(vr){vr(pr)})},ae.reject=function(pr){return new ae(function(vr,ar){ar(pr)})},ae.race=function(pr){return new ae(function(vr,ar){if(!Array.isArray(pr))return ar(new TypeError("Promise.race accepts an array"));for(var $r=0,cn=pr.length;$r<cn;$r++)ae.resolve(pr[$r]).then(vr,ar)})},ae._immediateFn=typeof setImmediate=="function"&&function(pr){setImmediate(pr)}||function(pr){setTimeout(pr,0)},ae._unhandledRejectionFn=function(vr){typeof console<"u"&&console&&console.warn("Possible Unhandled Promise Rejection:",vr)},ae}(),r={},n;for(n in e)e.hasOwnProperty(n)&&(r[n]=e[n]);var o=!0,u="";function c(R){return e.locateFile?e.locateFile(R,u):u+R}var l,h,v;document.currentScript&&(u=document.currentScript.src),u.indexOf("blob:")!==0?u=u.substr(0,u.lastIndexOf("/")+1):u="",l=function(W){try{var ae=new XMLHttpRequest;return ae.open("GET",W,!1),ae.send(null),ae.responseText}catch(Ye){var ke=yl(W);if(ke)return ys(ke);throw Ye}},h=function(W,ae,ke){var Ye=new XMLHttpRequest;Ye.open("GET",W,!0),Ye.responseType="arraybuffer",Ye.onload=function(){if(Ye.status==200||Ye.status==0&&Ye.response){ae(Ye.response);return}var Mt=yl(W);if(Mt){ae(Mt.buffer);return}ke()},Ye.onerror=ke,Ye.send(null)};var w=e.print||console.log.bind(console),E=e.printErr||console.warn.bind(console);for(n in r)r.hasOwnProperty(n)&&(e[n]=r[n]);r=null,e.arguments&&e.arguments,e.thisProgram&&e.thisProgram,e.quit&&e.quit;var T=16;function I(R,W){return W||(W=T),Math.ceil(R/W)*W}function F(R){F.shown||(F.shown={}),F.shown[R]||(F.shown[R]=1,E(R))}var U=0,G=function(R){U=R},H=function(){return U},X;e.wasmBinary&&(X=e.wasmBinary),e.noExitRuntime&&e.noExitRuntime;var ee={Memory:function(R){this.buffer=new ArrayBuffer(R.initial*65536),this.grow=function(W){var ae=vs(W);return ae}},Table:function(R){var W=new Array(R.initial);return W.set=function(ae,ke){W[ae]=ke},W.get=function(ae){return W[ae]},W},Module:function(R){},Instance:function(R,W){this.exports=function(ke,Ye,dt){function Mt(ar,$r,cn){var In=$r.memory,et=dt,m=new ar.Int8Array(cn),Pr=new ar.Int16Array(cn),f=new ar.Int32Array(cn),L=new ar.Uint8Array(cn),kn=new ar.Uint16Array(cn),ii=new ar.Uint32Array(cn);new ar.Float32Array(cn);var To=new ar.Float64Array(cn),J=ar.Math.imul;ar.Math.fround,ar.Math.abs;var Ri=ar.Math.clz32;ar.Math.min,ar.Math.max,ar.Math.floor,ar.Math.ceil,ar.Math.sqrt;var bs=$r.abort;ar.NaN,ar.Infinity;var Gs=$r.SDL_Init,Pc=$r.SDL_SetVideoMode,bl=$r.SDL_CreateRGBSurface,Xa=$r.SDL_LockSurface,uc=$r.SDL_UnlockSurface,gu=$r.SDL_UpperBlit,Mc=$r.SDL_Flip,yu=$r.SDL_FreeSurface,Qc=$r.fd_close,$u=$r.fd_write,vu=$r.emscripten_resize_heap,_u=$r.emscripten_memcpy_big,Hl=$r.setTempRet0,bu=$r.fd_seek,jn=5255072,Fn=0;function Gu(i,a){var s=0,g=0,b=0,x=0,A=0,P=0,j=0,B=0,Z=0,ne=0,me=0,Ce=0,Be=0,at=0,kt=0,It=0,Qt=0,lr=0,zr=0,Sr=0,Jr=0,hn=0,Sn=0,di=0;g=f[a>>2],ne=f[a+4>>2],s=f[i+2264>>2],m[s+823|0]=129,m[s+807|0]=129,m[s+791|0]=129,m[s+775|0]=129,m[s+759|0]=129,m[s+743|0]=129,m[s+727|0]=129,m[s+711|0]=129,m[s+695|0]=129,m[s+679|0]=129,m[s+663|0]=129,m[s+647|0]=129,m[s+631|0]=129,m[s+615|0]=129,m[s+599|0]=129,m[s+583|0]=129,m[s+519|0]=129,m[s+487|0]=129,m[s+455|0]=129,m[s+423|0]=129,m[s+391|0]=129,m[s+359|0]=129,m[s+327|0]=129,m[s+295|0]=129,m[s+263|0]=129,m[s+231|0]=129,m[s+199|0]=129,m[s+167|0]=129,m[s+135|0]=129,m[s+103|0]=129,m[s+71|0]=129,m[s+39|0]=129;e:{if((ne|0)>=1){m[s+551|0]=129,m[s+567|0]=129,m[s+7|0]=129;break e}m[s+7|0]=2139062143,m[s+8|0]=8355711,m[s+9|0]=32639,m[s+10|0]=127,m[s+11|0]=2139062143,m[s+12|0]=8355711,m[s+13|0]=32639,m[s+14|0]=127,m[s+551|0]=2139062143,m[s+552|0]=8355711,m[s+553|0]=32639,m[s+554|0]=127,m[s+555|0]=2139062143,m[s+556|0]=8355711,m[s+557|0]=32639,m[s+558|0]=127,m[s+567|0]=2139062143,m[s+568|0]=8355711,m[s+569|0]=32639,m[s+570|0]=127,m[s+571|0]=2139062143,m[s+572|0]=8355711,m[s+573|0]=32639,m[s+574|0]=127,m[s+20|0]=2139062143,m[s+21|0]=8355711,m[s+22|0]=32639,m[s+23|0]=127,m[s+24|0]=2139062143,m[s+25|0]=8355711,m[s+26|0]=32639,m[s+27|0]=127,m[s+15|0]=2139062143,m[s+16|0]=8355711,m[s+17|0]=32639,m[s+18|0]=127,m[s+19|0]=2139062143,m[s+20|0]=8355711,m[s+21|0]=32639,m[s+22|0]=127,m[s+559|0]=127,m[s+575|0]=127}if(f[i+288>>2]>=1)for(Ce=s+600|0,Be=s+584|0,me=s+40|0,kt=ne?5:6,Qt=g<<3,lr=g<<4,zr=s+520|0,Sr=s+8|0,at=s+24|0,It=!ne<<2,Jr=(ne|0)<1;;){A=f[a+16>>2],Z&&(g=L[s+20|0]|L[s+21|0]<<8|(L[s+22|0]<<16|L[s+23|0]<<24),m[s+4|0]=g,m[s+5|0]=g>>>8,m[s+6|0]=g>>>16,m[s+7|0]=g>>>24,g=L[s+52|0]|L[s+53|0]<<8|(L[s+54|0]<<16|L[s+55|0]<<24),m[s+36|0]=g,m[s+37|0]=g>>>8,m[s+38|0]=g>>>16,m[s+39|0]=g>>>24,g=L[s+84|0]|L[s+85|0]<<8|(L[s+86|0]<<16|L[s+87|0]<<24),m[s+68|0]=g,m[s+69|0]=g>>>8,m[s+70|0]=g>>>16,m[s+71|0]=g>>>24,g=L[s+116|0]|L[s+117|0]<<8|(L[s+118|0]<<16|L[s+119|0]<<24),m[s+100|0]=g,m[s+101|0]=g>>>8,m[s+102|0]=g>>>16,m[s+103|0]=g>>>24,g=L[s+148|0]|L[s+149|0]<<8|(L[s+150|0]<<16|L[s+151|0]<<24),m[s+132|0]=g,m[s+133|0]=g>>>8,m[s+134|0]=g>>>16,m[s+135|0]=g>>>24,g=L[s+180|0]|L[s+181|0]<<8|(L[s+182|0]<<16|L[s+183|0]<<24),m[s+164|0]=g,m[s+165|0]=g>>>8,m[s+166|0]=g>>>16,m[s+167|0]=g>>>24,g=L[s+212|0]|L[s+213|0]<<8|(L[s+214|0]<<16|L[s+215|0]<<24),m[s+196|0]=g,m[s+197|0]=g>>>8,m[s+198|0]=g>>>16,m[s+199|0]=g>>>24,g=L[s+244|0]|L[s+245|0]<<8|(L[s+246|0]<<16|L[s+247|0]<<24),m[s+228|0]=g,m[s+229|0]=g>>>8,m[s+230|0]=g>>>16,m[s+231|0]=g>>>24,g=L[s+276|0]|L[s+277|0]<<8|(L[s+278|0]<<16|L[s+279|0]<<24),m[s+260|0]=g,m[s+261|0]=g>>>8,m[s+262|0]=g>>>16,m[s+263|0]=g>>>24,g=L[s+308|0]|L[s+309|0]<<8|(L[s+310|0]<<16|L[s+311|0]<<24),m[s+292|0]=g,m[s+293|0]=g>>>8,m[s+294|0]=g>>>16,m[s+295|0]=g>>>24,g=L[s+340|0]|L[s+341|0]<<8|(L[s+342|0]<<16|L[s+343|0]<<24),m[s+324|0]=g,m[s+325|0]=g>>>8,m[s+326|0]=g>>>16,m[s+327|0]=g>>>24,g=L[s+372|0]|L[s+373|0]<<8|(L[s+374|0]<<16|L[s+375|0]<<24),m[s+356|0]=g,m[s+357|0]=g>>>8,m[s+358|0]=g>>>16,m[s+359|0]=g>>>24,g=L[s+404|0]|L[s+405|0]<<8|(L[s+406|0]<<16|L[s+407|0]<<24),m[s+388|0]=g,m[s+389|0]=g>>>8,m[s+390|0]=g>>>16,m[s+391|0]=g>>>24,g=L[s+436|0]|L[s+437|0]<<8|(L[s+438|0]<<16|L[s+439|0]<<24),m[s+420|0]=g,m[s+421|0]=g>>>8,m[s+422|0]=g>>>16,m[s+423|0]=g>>>24,g=L[s+468|0]|L[s+469|0]<<8|(L[s+470|0]<<16|L[s+471|0]<<24),m[s+452|0]=g,m[s+453|0]=g>>>8,m[s+454|0]=g>>>16,m[s+455|0]=g>>>24,g=L[s+500|0]|L[s+501|0]<<8|(L[s+502|0]<<16|L[s+503|0]<<24),m[s+484|0]=g,m[s+485|0]=g>>>8,m[s+486|0]=g>>>16,m[s+487|0]=g>>>24,g=L[s+532|0]|L[s+533|0]<<8|(L[s+534|0]<<16|L[s+535|0]<<24),m[s+516|0]=g,m[s+517|0]=g>>>8,m[s+518|0]=g>>>16,m[s+519|0]=g>>>24,g=L[s+556|0]|L[s+557|0]<<8|(L[s+558|0]<<16|L[s+559|0]<<24),m[s+548|0]=g,m[s+549|0]=g>>>8,m[s+550|0]=g>>>16,m[s+551|0]=g>>>24,g=L[s+572|0]|L[s+573|0]<<8|(L[s+574|0]<<16|L[s+575|0]<<24),m[s+564|0]=g,m[s+565|0]=g>>>8,m[s+566|0]=g>>>16,m[s+567|0]=g>>>24,g=L[s+588|0]|L[s+589|0]<<8|(L[s+590|0]<<16|L[s+591|0]<<24),m[s+580|0]=g,m[s+581|0]=g>>>8,m[s+582|0]=g>>>16,m[s+583|0]=g>>>24,g=L[s+604|0]|L[s+605|0]<<8|(L[s+606|0]<<16|L[s+607|0]<<24),m[s+596|0]=g,m[s+597|0]=g>>>8,m[s+598|0]=g>>>16,m[s+599|0]=g>>>24,g=L[s+620|0]|L[s+621|0]<<8|(L[s+622|0]<<16|L[s+623|0]<<24),m[s+612|0]=g,m[s+613|0]=g>>>8,m[s+614|0]=g>>>16,m[s+615|0]=g>>>24,g=L[s+636|0]|L[s+637|0]<<8|(L[s+638|0]<<16|L[s+639|0]<<24),m[s+628|0]=g,m[s+629|0]=g>>>8,m[s+630|0]=g>>>16,m[s+631|0]=g>>>24,g=L[s+652|0]|L[s+653|0]<<8|(L[s+654|0]<<16|L[s+655|0]<<24),m[s+644|0]=g,m[s+645|0]=g>>>8,m[s+646|0]=g>>>16,m[s+647|0]=g>>>24,g=L[s+668|0]|L[s+669|0]<<8|(L[s+670|0]<<16|L[s+671|0]<<24),m[s+660|0]=g,m[s+661|0]=g>>>8,m[s+662|0]=g>>>16,m[s+663|0]=g>>>24,g=L[s+684|0]|L[s+685|0]<<8|(L[s+686|0]<<16|L[s+687|0]<<24),m[s+676|0]=g,m[s+677|0]=g>>>8,m[s+678|0]=g>>>16,m[s+679|0]=g>>>24,g=L[s+700|0]|L[s+701|0]<<8|(L[s+702|0]<<16|L[s+703|0]<<24),m[s+692|0]=g,m[s+693|0]=g>>>8,m[s+694|0]=g>>>16,m[s+695|0]=g>>>24,g=L[s+716|0]|L[s+717|0]<<8|(L[s+718|0]<<16|L[s+719|0]<<24),m[s+708|0]=g,m[s+709|0]=g>>>8,m[s+710|0]=g>>>16,m[s+711|0]=g>>>24,g=L[s+732|0]|L[s+733|0]<<8|(L[s+734|0]<<16|L[s+735|0]<<24),m[s+724|0]=g,m[s+725|0]=g>>>8,m[s+726|0]=g>>>16,m[s+727|0]=g>>>24,g=L[s+748|0]|L[s+749|0]<<8|(L[s+750|0]<<16|L[s+751|0]<<24),m[s+740|0]=g,m[s+741|0]=g>>>8,m[s+742|0]=g>>>16,m[s+743|0]=g>>>24,g=L[s+764|0]|L[s+765|0]<<8|(L[s+766|0]<<16|L[s+767|0]<<24),m[s+756|0]=g,m[s+757|0]=g>>>8,m[s+758|0]=g>>>16,m[s+759|0]=g>>>24,g=L[s+780|0]|L[s+781|0]<<8|(L[s+782|0]<<16|L[s+783|0]<<24),m[s+772|0]=g,m[s+773|0]=g>>>8,m[s+774|0]=g>>>16,m[s+775|0]=g>>>24,g=L[s+796|0]|L[s+797|0]<<8|(L[s+798|0]<<16|L[s+799|0]<<24),m[s+788|0]=g,m[s+789|0]=g>>>8,m[s+790|0]=g>>>16,m[s+791|0]=g>>>24,g=L[s+812|0]|L[s+813|0]<<8|(L[s+814|0]<<16|L[s+815|0]<<24),m[s+804|0]=g,m[s+805|0]=g>>>8,m[s+806|0]=g>>>16,m[s+807|0]=g>>>24,g=L[s+828|0]|L[s+829|0]<<8|(L[s+830|0]<<16|L[s+831|0]<<24),m[s+820|0]=g,m[s+821|0]=g>>>8,m[s+822|0]=g>>>16,m[s+823|0]=g>>>24),g=f[i+2252>>2]+(Z<<5)|0,x=A+J(Z,800)|0,P=f[x+788>>2];e:{t:{r:{n:{if(!Jr){if(j=L[g+4|0]|L[g+5|0]<<8|(L[g+6|0]<<16|L[g+7|0]<<24),b=Sr,B=L[g|0]|L[g+1|0]<<8|(L[g+2|0]<<16|L[g+3|0]<<24),m[b|0]=B,m[b+1|0]=B>>>8,m[b+2|0]=B>>>16,m[b+3|0]=B>>>24,m[b+4|0]=j,m[b+5|0]=j>>>8,m[b+6|0]=j>>>16,m[b+7|0]=j>>>24,j=L[g+12|0]|L[g+13|0]<<8|(L[g+14|0]<<16|L[g+15|0]<<24),B=L[g+8|0]|L[g+9|0]<<8|(L[g+10|0]<<16|L[g+11|0]<<24),m[b+8|0]=B,m[b+9|0]=B>>>8,m[b+10|0]=B>>>16,m[b+11|0]=B>>>24,m[b+12|0]=j,m[b+13|0]=j>>>8,m[b+14|0]=j>>>16,m[b+15|0]=j>>>24,b=L[g+20|0]|L[g+21|0]<<8|(L[g+22|0]<<16|L[g+23|0]<<24),j=L[g+16|0]|L[g+17|0]<<8|(L[g+18|0]<<16|L[g+19|0]<<24),m[s+552|0]=j,m[s+553|0]=j>>>8,m[s+554|0]=j>>>16,m[s+555|0]=j>>>24,m[s+556|0]=b,m[s+557|0]=b>>>8,m[s+558|0]=b>>>16,m[s+559|0]=b>>>24,b=L[g+28|0]|L[g+29|0]<<8|(L[g+30|0]<<16|L[g+31|0]<<24),A=L[g+24|0]|L[g+25|0]<<8|(L[g+26|0]<<16|L[g+27|0]<<24),m[s+568|0]=A,m[s+569|0]=A>>>8,m[s+570|0]=A>>>16,m[s+571|0]=A>>>24,m[s+572|0]=b,m[s+573|0]=b>>>8,m[s+574|0]=b>>>16,m[s+575|0]=b>>>24,L[x+768|0])break n;break t}if(!L[x+768|0])break t;A=f[at>>2];break r}if((Z|0)>=(f[i+288>>2]+-1|0)){A=L[g+15|0],f[at>>2]=J(A,16843009),A=A|A<<8,A=A<<16|A;break r}A=L[g+32|0]|L[g+33|0]<<8|(L[g+34|0]<<16|L[g+35|0]<<24),f[at>>2]=A}for(f[s+280>>2]=A,f[s+408>>2]=A,f[s+152>>2]=A,A=0;;){b=kn[(A<<1)+4880>>1]+me|0,et[f[(L[(x+A|0)+769|0]<<2)+10736>>2]](b),j=x+(A<<5)|0;r:{n:switch((P>>>30|0)+-1|0){case 2:et[f[2703]](j,b,0);break r;case 1:et[f[2704]](j,b);break r;case 0:break n;default:break r}et[f[2706]](j,b)}if(P=P<<2,A=A+1|0,(A|0)==16)break}B=Z?It:kt;break e}if(A=L[x+769|0],B=Z?It:kt,et[f[((A||B)<<2)+10704>>2]](me),A=0,!P)break e;for(;;){b=x+(A<<5)|0,j=kn[(A<<1)+4880>>1]+me|0;t:{r:switch((P>>>30|0)+-1|0){case 2:et[f[2703]](b,j,0);break t;case 1:et[f[2704]](b,j);break t;case 0:break r;default:break t}et[f[2706]](b,j)}if(P=P<<2,A=A+1|0,(A|0)==16)break}}A=f[x+792>>2],b=L[x+785|0],b=((b||B)<<2)+10784|0,et[f[b>>2]](Be),et[f[b>>2]](Ce);e:{if(!(A&255))break e;if(b=x+512|0,A&170){et[f[2705]](b,Be);break e}et[f[2707]](b,Be)}e:{if(!(A&65280))break e;if(b=x+640|0,A&43520){et[f[2705]](b,Ce);break e}et[f[2707]](b,Ce)}for((ne|0)<(f[i+292>>2]+-1|0)&&(A=zr,b=L[A+4|0]|L[A+5|0]<<8|(L[A+6|0]<<16|L[A+7|0]<<24),x=L[A|0]|L[A+1|0]<<8|(L[A+2|0]<<16|L[A+3|0]<<24),m[g|0]=x,m[g+1|0]=x>>>8,m[g+2|0]=x>>>16,m[g+3|0]=x>>>24,m[g+4|0]=b,m[g+5|0]=b>>>8,m[g+6|0]=b>>>16,m[g+7|0]=b>>>24,b=L[A+12|0]|L[A+13|0]<<8|(L[A+14|0]<<16|L[A+15|0]<<24),A=L[A+8|0]|L[A+9|0]<<8|(L[A+10|0]<<16|L[A+11|0]<<24),m[g+8|0]=A,m[g+9|0]=A>>>8,m[g+10|0]=A>>>16,m[g+11|0]=A>>>24,m[g+12|0]=b,m[g+13|0]=b>>>8,m[g+14|0]=b>>>16,m[g+15|0]=b>>>24,A=L[s+812|0]|L[s+813|0]<<8|(L[s+814|0]<<16|L[s+815|0]<<24),b=L[s+808|0]|L[s+809|0]<<8|(L[s+810|0]<<16|L[s+811|0]<<24),m[g+16|0]=b,m[g+17|0]=b>>>8,m[g+18|0]=b>>>16,m[g+19|0]=b>>>24,m[g+20|0]=A,m[g+21|0]=A>>>8,m[g+22|0]=A>>>16,m[g+23|0]=A>>>24,A=L[s+828|0]|L[s+829|0]<<8|(L[s+830|0]<<16|L[s+831|0]<<24),b=L[s+824|0]|L[s+825|0]<<8|(L[s+826|0]<<16|L[s+827|0]<<24),m[g+24|0]=b,m[g+25|0]=b>>>8,m[g+26|0]=b>>>16,m[g+27|0]=b>>>24,m[g+28|0]=A,m[g+29|0]=A>>>8,m[g+30|0]=A>>>16,m[g+31|0]=A>>>24),hn=f[i+2284>>2],j=f[i+2272>>2],B=f[i+2276>>2],g=me,x=L[g+4|0]|L[g+5|0]<<8|(L[g+6|0]<<16|L[g+7|0]<<24),b=(f[i+2268>>2]+(Z<<4)|0)+J(f[i+2280>>2],lr)|0,P=L[g|0]|L[g+1|0]<<8|(L[g+2|0]<<16|L[g+3|0]<<24),m[b|0]=P,m[b+1|0]=P>>>8,m[b+2|0]=P>>>16,m[b+3|0]=P>>>24,m[b+4|0]=x,m[b+5|0]=x>>>8,m[b+6|0]=x>>>16,m[b+7|0]=x>>>24,x=L[g+12|0]|L[g+13|0]<<8|(L[g+14|0]<<16|L[g+15|0]<<24),g=L[g+8|0]|L[g+9|0]<<8|(L[g+10|0]<<16|L[g+11|0]<<24),m[b+8|0]=g,m[b+9|0]=g>>>8,m[b+10|0]=g>>>16,m[b+11|0]=g>>>24,m[b+12|0]=x,m[b+13|0]=x>>>8,m[b+14|0]=x>>>16,m[b+15|0]=x>>>24,g=Z<<3,Sn=g+B|0,di=g+j|0,A=1;x=(A<<5)+me|0,j=L[x+4|0]|L[x+5|0]<<8|(L[x+6|0]<<16|L[x+7|0]<<24),g=b+J(f[i+2280>>2],A)|0,B=L[x|0]|L[x+1|0]<<8|(L[x+2|0]<<16|L[x+3|0]<<24),m[g|0]=B,m[g+1|0]=B>>>8,m[g+2|0]=B>>>16,m[g+3|0]=B>>>24,m[g+4|0]=j,m[g+5|0]=j>>>8,m[g+6|0]=j>>>16,m[g+7|0]=j>>>24,P=L[x+12|0]|L[x+13|0]<<8|(L[x+14|0]<<16|L[x+15|0]<<24),x=L[x+8|0]|L[x+9|0]<<8|(L[x+10|0]<<16|L[x+11|0]<<24),m[g+8|0]=x,m[g+9|0]=x>>>8,m[g+10|0]=x>>>16,m[g+11|0]=x>>>24,m[g+12|0]=P,m[g+13|0]=P>>>8,m[g+14|0]=P>>>16,m[g+15|0]=P>>>24,A=A+1|0,(A|0)!=16;);if(b=L[s+588|0]|L[s+589|0]<<8|(L[s+590|0]<<16|L[s+591|0]<<24),P=J(Qt,hn),g=P+di|0,x=L[s+584|0]|L[s+585|0]<<8|(L[s+586|0]<<16|L[s+587|0]<<24),m[g|0]=x,m[g+1|0]=x>>>8,m[g+2|0]=x>>>16,m[g+3|0]=x>>>24,m[g+4|0]=b,m[g+5|0]=b>>>8,m[g+6|0]=b>>>16,m[g+7|0]=b>>>24,A=P+Sn|0,b=A,x=L[s+604|0]|L[s+605|0]<<8|(L[s+606|0]<<16|L[s+607|0]<<24),P=L[s+600|0]|L[s+601|0]<<8|(L[s+602|0]<<16|L[s+603|0]<<24),m[b|0]=P,m[b+1|0]=P>>>8,m[b+2|0]=P>>>16,m[b+3|0]=P>>>24,m[b+4|0]=x,m[b+5|0]=x>>>8,m[b+6|0]=x>>>16,m[b+7|0]=x>>>24,x=L[s+620|0]|L[s+621|0]<<8|(L[s+622|0]<<16|L[s+623|0]<<24),b=g+f[i+2284>>2]|0,P=L[s+616|0]|L[s+617|0]<<8|(L[s+618|0]<<16|L[s+619|0]<<24),m[b|0]=P,m[b+1|0]=P>>>8,m[b+2|0]=P>>>16,m[b+3|0]=P>>>24,m[b+4|0]=x,m[b+5|0]=x>>>8,m[b+6|0]=x>>>16,m[b+7|0]=x>>>24,x=L[s+636|0]|L[s+637|0]<<8|(L[s+638|0]<<16|L[s+639|0]<<24),b=A+f[i+2284>>2]|0,P=L[s+632|0]|L[s+633|0]<<8|(L[s+634|0]<<16|L[s+635|0]<<24),m[b|0]=P,m[b+1|0]=P>>>8,m[b+2|0]=P>>>16,m[b+3|0]=P>>>24,m[b+4|0]=x,m[b+5|0]=x>>>8,m[b+6|0]=x>>>16,m[b+7|0]=x>>>24,x=L[s+652|0]|L[s+653|0]<<8|(L[s+654|0]<<16|L[s+655|0]<<24),b=g+(f[i+2284>>2]<<1)|0,P=L[s+648|0]|L[s+649|0]<<8|(L[s+650|0]<<16|L[s+651|0]<<24),m[b|0]=P,m[b+1|0]=P>>>8,m[b+2|0]=P>>>16,m[b+3|0]=P>>>24,m[b+4|0]=x,m[b+5|0]=x>>>8,m[b+6|0]=x>>>16,m[b+7|0]=x>>>24,x=L[s+668|0]|L[s+669|0]<<8|(L[s+670|0]<<16|L[s+671|0]<<24),b=A+(f[i+2284>>2]<<1)|0,P=L[s+664|0]|L[s+665|0]<<8|(L[s+666|0]<<16|L[s+667|0]<<24),m[b|0]=P,m[b+1|0]=P>>>8,m[b+2|0]=P>>>16,m[b+3|0]=P>>>24,m[b+4|0]=x,m[b+5|0]=x>>>8,m[b+6|0]=x>>>16,m[b+7|0]=x>>>24,x=L[s+684|0]|L[s+685|0]<<8|(L[s+686|0]<<16|L[s+687|0]<<24),b=g+J(f[i+2284>>2],3)|0,P=L[s+680|0]|L[s+681|0]<<8|(L[s+682|0]<<16|L[s+683|0]<<24),m[b|0]=P,m[b+1|0]=P>>>8,m[b+2|0]=P>>>16,m[b+3|0]=P>>>24,m[b+4|0]=x,m[b+5|0]=x>>>8,m[b+6|0]=x>>>16,m[b+7|0]=x>>>24,x=L[s+700|0]|L[s+701|0]<<8|(L[s+702|0]<<16|L[s+703|0]<<24),b=A+J(f[i+2284>>2],3)|0,P=L[s+696|0]|L[s+697|0]<<8|(L[s+698|0]<<16|L[s+699|0]<<24),m[b|0]=P,m[b+1|0]=P>>>8,m[b+2|0]=P>>>16,m[b+3|0]=P>>>24,m[b+4|0]=x,m[b+5|0]=x>>>8,m[b+6|0]=x>>>16,m[b+7|0]=x>>>24,x=L[s+716|0]|L[s+717|0]<<8|(L[s+718|0]<<16|L[s+719|0]<<24),b=g+(f[i+2284>>2]<<2)|0,P=L[s+712|0]|L[s+713|0]<<8|(L[s+714|0]<<16|L[s+715|0]<<24),m[b|0]=P,m[b+1|0]=P>>>8,m[b+2|0]=P>>>16,m[b+3|0]=P>>>24,m[b+4|0]=x,m[b+5|0]=x>>>8,m[b+6|0]=x>>>16,m[b+7|0]=x>>>24,x=L[s+732|0]|L[s+733|0]<<8|(L[s+734|0]<<16|L[s+735|0]<<24),b=A+(f[i+2284>>2]<<2)|0,P=L[s+728|0]|L[s+729|0]<<8|(L[s+730|0]<<16|L[s+731|0]<<24),m[b|0]=P,m[b+1|0]=P>>>8,m[b+2|0]=P>>>16,m[b+3|0]=P>>>24,m[b+4|0]=x,m[b+5|0]=x>>>8,m[b+6|0]=x>>>16,m[b+7|0]=x>>>24,x=L[s+748|0]|L[s+749|0]<<8|(L[s+750|0]<<16|L[s+751|0]<<24),b=g+J(f[i+2284>>2],5)|0,P=L[s+744|0]|L[s+745|0]<<8|(L[s+746|0]<<16|L[s+747|0]<<24),m[b|0]=P,m[b+1|0]=P>>>8,m[b+2|0]=P>>>16,m[b+3|0]=P>>>24,m[b+4|0]=x,m[b+5|0]=x>>>8,m[b+6|0]=x>>>16,m[b+7|0]=x>>>24,x=L[s+764|0]|L[s+765|0]<<8|(L[s+766|0]<<16|L[s+767|0]<<24),b=A+J(f[i+2284>>2],5)|0,P=L[s+760|0]|L[s+761|0]<<8|(L[s+762|0]<<16|L[s+763|0]<<24),m[b|0]=P,m[b+1|0]=P>>>8,m[b+2|0]=P>>>16,m[b+3|0]=P>>>24,m[b+4|0]=x,m[b+5|0]=x>>>8,m[b+6|0]=x>>>16,m[b+7|0]=x>>>24,x=L[s+780|0]|L[s+781|0]<<8|(L[s+782|0]<<16|L[s+783|0]<<24),b=g+J(f[i+2284>>2],6)|0,P=L[s+776|0]|L[s+777|0]<<8|(L[s+778|0]<<16|L[s+779|0]<<24),m[b|0]=P,m[b+1|0]=P>>>8,m[b+2|0]=P>>>16,m[b+3|0]=P>>>24,m[b+4|0]=x,m[b+5|0]=x>>>8,m[b+6|0]=x>>>16,m[b+7|0]=x>>>24,x=L[s+796|0]|L[s+797|0]<<8|(L[s+798|0]<<16|L[s+799|0]<<24),b=A+J(f[i+2284>>2],6)|0,P=L[s+792|0]|L[s+793|0]<<8|(L[s+794|0]<<16|L[s+795|0]<<24),m[b|0]=P,m[b+1|0]=P>>>8,m[b+2|0]=P>>>16,m[b+3|0]=P>>>24,m[b+4|0]=x,m[b+5|0]=x>>>8,m[b+6|0]=x>>>16,m[b+7|0]=x>>>24,b=L[s+812|0]|L[s+813|0]<<8|(L[s+814|0]<<16|L[s+815|0]<<24),g=g+J(f[i+2284>>2],7)|0,x=L[s+808|0]|L[s+809|0]<<8|(L[s+810|0]<<16|L[s+811|0]<<24),m[g|0]=x,m[g+1|0]=x>>>8,m[g+2|0]=x>>>16,m[g+3|0]=x>>>24,m[g+4|0]=b,m[g+5|0]=b>>>8,m[g+6|0]=b>>>16,m[g+7|0]=b>>>24,g=A+J(f[i+2284>>2],7)|0,A=L[s+828|0]|L[s+829|0]<<8|(L[s+830|0]<<16|L[s+831|0]<<24),b=L[s+824|0]|L[s+825|0]<<8|(L[s+826|0]<<16|L[s+827|0]<<24),m[g|0]=b,m[g+1|0]=b>>>8,m[g+2|0]=b>>>16,m[g+3|0]=b>>>24,m[g+4|0]=A,m[g+5|0]=A>>>8,m[g+6|0]=A>>>16,m[g+7|0]=A>>>24,Z=Z+1|0,!((Z|0)<f[i+288>>2]))break}}function Ms(i){i=i|0;var a=0,s=0,g=0,b=0,x=0,A=0,P=0,j=0,B=0,Z=0,ne=0,me=0,Ce=0,Be=0;me=jn-16|0,jn=me;e:{t:{r:{n:{o:{l:{i:{u:{a:{s:{h:{c:{if(i>>>0<=244){if(A=f[2884],P=i>>>0<11?16:i+11&-8,a=P>>>3|0,i=A>>>a|0,i&3){g=a+((i^-1)&1)|0,a=g<<3,b=f[a+11584>>2],i=b+8|0,s=f[b+8>>2],a=a+11576|0;f:{if((s|0)==(a|0)){Ce=11536,Be=ea(-2,g)&A,f[Ce>>2]=Be;break f}f[s+12>>2]=a,f[a+8>>2]=s}a=g<<3,f[b+4>>2]=a|3,a=a+b|0,f[a+4>>2]=f[a+4>>2]|1;break e}if(ne=f[2886],P>>>0<=ne>>>0)break c;if(i){s=i<<a,i=2<<a,i=s&(0-i|i),a=(0-i&i)+-1|0,i=a>>>12&16,s=i,a=a>>>i|0,i=a>>>5&8,s=s|i,a=a>>>i|0,i=a>>>2&4,s=s|i,a=a>>>i|0,i=a>>>1&2,s=s|i,a=a>>>i|0,i=a>>>1&1,s=(s|i)+(a>>>i|0)|0,i=s<<3,x=f[i+11584>>2],a=f[x+8>>2],i=i+11576|0;f:{if((a|0)==(i|0)){A=ea(-2,s)&A,f[2884]=A;break f}f[a+12>>2]=i,f[i+8>>2]=a}if(i=x+8|0,f[x+4>>2]=P|3,g=x+P|0,a=s<<3,b=a-P|0,f[g+4>>2]=b|1,f[a+x>>2]=b,ne){a=ne>>>3|0,s=(a<<3)+11576|0,P=f[2889],a=1<<a;f:{if(!(a&A)){f[2884]=a|A,a=s;break f}a=f[s+8>>2]}f[s+8>>2]=P,f[a+12>>2]=P,f[P+12>>2]=s,f[P+8>>2]=a}f[2889]=g,f[2886]=b;break e}if(j=f[2885],!j)break c;for(a=(j&0-j)+-1|0,i=a>>>12&16,s=i,a=a>>>i|0,i=a>>>5&8,s=s|i,a=a>>>i|0,i=a>>>2&4,s=s|i,a=a>>>i|0,i=a>>>1&2,s=s|i,a=a>>>i|0,i=a>>>1&1,a=f[((s|i)+(a>>>i|0)<<2)+11840>>2],b=(f[a+4>>2]&-8)-P|0,s=a;;){f:{if(i=f[s+16>>2],!i&&(i=f[s+20>>2],!i))break f;s=(f[i+4>>2]&-8)-P|0,g=s>>>0<b>>>0,b=g?s:b,a=g?i:a,s=i;continue}break}if(B=a+P|0,B>>>0<=a>>>0)break h;if(Z=f[a+24>>2],g=f[a+12>>2],(g|0)!=(a|0)){i=f[a+8>>2],f[i+12>>2]=g,f[g+8>>2]=i;break t}if(s=a+20|0,i=f[s>>2],!i){if(i=f[a+16>>2],!i)break s;s=a+16|0}for(;x=s,g=i,s=i+20|0,i=f[s>>2],!(!i&&(s=g+16|0,i=f[g+16>>2],!i)););f[x>>2]=0;break t}if(P=-1,i>>>0>4294967231||(i=i+11|0,P=i&-8,j=f[2885],!j))break c;i=i>>>8|0,x=0;f:{if(!i||(x=31,P>>>0>16777215))break f;a=i+1048320>>>16&8,i=i<<a,b=i+520192>>>16&4,i=i<<b,s=i+245760>>>16&2,i=(i<<s>>>15|0)-(s|(a|b))|0,x=(i<<1|P>>>i+21&1)+28|0}b=0-P|0,s=f[(x<<2)+11840>>2];f:{p:{d:{if(!s){i=0;break d}for(i=0,a=P<<((x|0)==31?0:25-(x>>>1|0)|0);;){m:{if(A=(f[s+4>>2]&-8)-P|0,A>>>0>=b>>>0||(g=s,b=A,b))break m;b=0,i=s;break p}if(A=f[s+20>>2],s=f[((a>>>29&4)+s|0)+16>>2],i=A?(A|0)==(s|0)?i:A:i,a=a<<1,!s)break}}if(!(i|g)){if(i=2<<x,i=(0-i|i)&j,!i)break c;a=(i&0-i)+-1|0,i=a>>>12&16,s=i,a=a>>>i|0,i=a>>>5&8,s=s|i,a=a>>>i|0,i=a>>>2&4,s=s|i,a=a>>>i|0,i=a>>>1&2,s=s|i,a=a>>>i|0,i=a>>>1&1,i=f[((s|i)+(a>>>i|0)<<2)+11840>>2]}if(!i)break f}for(;a=(f[i+4>>2]&-8)-P|0,s=a>>>0<b>>>0,b=s?a:b,g=s?i:g,a=f[i+16>>2],a?i=a:i=f[i+20>>2],!!i;);}if(!g|b>>>0>=f[2886]-P>>>0)break c;if(x=g+P|0,x>>>0<=g>>>0)break h;if(B=f[g+24>>2],a=f[g+12>>2],(g|0)!=(a|0)){i=f[g+8>>2],f[i+12>>2]=a,f[a+8>>2]=i;break r}if(s=g+20|0,i=f[s>>2],!i){if(i=f[g+16>>2],!i)break a;s=g+16|0}for(;A=s,a=i,s=i+20|0,i=f[s>>2],!(!i&&(s=a+16|0,i=f[a+16>>2],!i)););f[A>>2]=0;break r}if(s=f[2886],s>>>0>=P>>>0){g=f[2889],a=s-P|0;c:{if(a>>>0>=16){f[2886]=a,i=g+P|0,f[2889]=i,f[i+4>>2]=a|1,f[s+g>>2]=a,f[g+4>>2]=P|3;break c}f[2889]=0,f[2886]=0,f[g+4>>2]=s|3,i=s+g|0,f[i+4>>2]=f[i+4>>2]|1}i=g+8|0;break e}if(j=f[2887],j>>>0>P>>>0){a=j-P|0,f[2887]=a,s=f[2890],i=s+P|0,f[2890]=i,f[i+4>>2]=a|1,f[s+4>>2]=P|3,i=s+8|0;break e}if(i=0,B=P+47|0,a=B,f[3002]?s=f[3004]:(f[3005]=-1,f[3006]=-1,f[3003]=4096,f[3004]=4096,f[3002]=me+12&-16^1431655768,f[3007]=0,f[2995]=0,s=4096),x=a+s|0,A=0-s|0,s=x&A,s>>>0<=P>>>0||(b=f[2994],b&&(g=f[2992],a=g+s|0,a>>>0<=g>>>0|a>>>0>b>>>0)))break e;if(L[11980]&4)break l;c:{f:{if(g=f[2890],g)for(i=11984;;){if(a=f[i>>2],a+f[i+4>>2]>>>0>g>>>0&&a>>>0<=g>>>0)break f;if(i=f[i+8>>2],!i)break}if(a=js(0),(a|0)==-1||(A=s,g=f[3003],i=g+-1|0,i&a&&(A=(s-a|0)+(i+a&0-g)|0),A>>>0<=P>>>0|A>>>0>2147483646)||(b=f[2994],b&&(g=f[2992],i=g+A|0,i>>>0<=g>>>0|i>>>0>b>>>0)))break i;if(i=js(A),(a|0)!=(i|0))break c;break o}if(A=A&x-j,A>>>0>2147483646)break i;if(a=js(A),(a|0)==(f[i>>2]+f[i+4>>2]|0))break u;i=a}if(!((i|0)==-1|P+48>>>0<=A>>>0)){if(a=f[3004],a=a+(B-A|0)&0-a,a>>>0>2147483646){a=i;break o}if((js(a)|0)!=-1){A=a+A|0,a=i;break o}js(0-A|0);break i}if(a=i,(i|0)!=-1)break o;break i}bs()}g=0;break t}a=0;break r}if((a|0)!=-1)break o}f[2995]=f[2995]|4}if(s>>>0>2147483646||(a=js(s),i=js(0),a>>>0>=i>>>0|(a|0)==-1|(i|0)==-1)||(A=i-a|0,A>>>0<=P+40>>>0))break n}i=f[2992]+A|0,f[2992]=i,i>>>0>ii[2993]&&(f[2993]=i);o:{l:{i:{if(b=f[2890],b){for(i=11984;;){if(g=f[i>>2],s=f[i+4>>2],(g+s|0)==(a|0))break i;if(i=f[i+8>>2],!i)break}break l}for(i=f[2888],a>>>0>=i>>>0&&i||(f[2888]=a),i=0,f[2997]=A,f[2996]=a,f[2892]=-1,f[2893]=f[3002],f[2999]=0;g=i<<3,s=g+11576|0,f[g+11584>>2]=s,f[g+11588>>2]=s,i=i+1|0,(i|0)!=32;);g=A+-40|0,i=a+8&7?-8-a&7:0,s=g-i|0,f[2887]=s,i=i+a|0,f[2890]=i,f[i+4>>2]=s|1,f[(a+g|0)+4>>2]=40,f[2891]=f[3006];break o}if(L[i+12|0]&8|a>>>0<=b>>>0|g>>>0>b>>>0)break l;f[i+4>>2]=s+A,i=b+8&7?-8-b&7:0,s=i+b|0,f[2890]=s,a=f[2887]+A|0,i=a-i|0,f[2887]=i,f[s+4>>2]=i|1,f[(a+b|0)+4>>2]=40,f[2891]=f[3006];break o}g=f[2888],a>>>0<g>>>0&&(f[2888]=a,g=0),s=a+A|0,i=11984;l:{i:{u:{a:{s:{h:{for(;;){if((s|0)!=f[i>>2]){if(i=f[i+8>>2],i)continue;break h}break}if(!(L[i+12|0]&8))break s}for(i=11984;;){if(s=f[i>>2],s>>>0<=b>>>0&&(x=s+f[i+4>>2]|0,x>>>0>b>>>0))break a;i=f[i+8>>2]}}if(f[i>>2]=a,f[i+4>>2]=f[i+4>>2]+A,j=(a+8&7?-8-a&7:0)+a|0,f[j+4>>2]=P|3,a=s+(s+8&7?-8-s&7:0)|0,i=(a-j|0)-P|0,x=P+j|0,(a|0)==(b|0)){f[2890]=x,i=f[2887]+i|0,f[2887]=i,f[x+4>>2]=i|1;break i}if(f[2889]==(a|0)){f[2889]=x,i=f[2886]+i|0,f[2886]=i,f[x+4>>2]=i|1,f[i+x>>2]=i;break i}if(s=f[a+4>>2],(s&3)==1){B=s&-8;s:{if(s>>>0<=255){if(b=f[a+8>>2],s=s>>>3|0,g=f[a+12>>2],(g|0)==(b|0)){Ce=11536,Be=f[2884]&ea(-2,s),f[Ce>>2]=Be;break s}f[b+12>>2]=g,f[g+8>>2]=b;break s}Z=f[a+24>>2],A=f[a+12>>2];h:{if((A|0)!=(a|0)){s=f[a+8>>2],f[s+12>>2]=A,f[A+8>>2]=s;break h}c:{if(b=a+20|0,P=f[b>>2],P||(b=a+16|0,P=f[b>>2],P))break c;A=0;break h}for(;s=b,A=P,b=A+20|0,P=f[b>>2],!(!P&&(b=A+16|0,P=f[A+16>>2],!P)););f[s>>2]=0}if(!Z)break s;g=f[a+28>>2],s=(g<<2)+11840|0;h:{if(f[s>>2]==(a|0)){if(f[s>>2]=A,A)break h;Ce=11540,Be=f[2885]&ea(-2,g),f[Ce>>2]=Be;break s}if(f[Z+(f[Z+16>>2]==(a|0)?16:20)>>2]=A,!A)break s}if(f[A+24>>2]=Z,s=f[a+16>>2],s&&(f[A+16>>2]=s,f[s+24>>2]=A),s=f[a+20>>2],!s)break s;f[A+20>>2]=s,f[s+24>>2]=A}a=a+B|0,i=i+B|0}if(f[a+4>>2]=f[a+4>>2]&-2,f[x+4>>2]=i|1,f[i+x>>2]=i,i>>>0<=255){i=i>>>3|0,a=(i<<3)+11576|0,s=f[2884],i=1<<i;s:{if(!(s&i)){f[2884]=i|s,i=a;break s}i=f[a+8>>2]}f[a+8>>2]=x,f[i+12>>2]=x,f[x+12>>2]=a,f[x+8>>2]=i;break i}a=x,g=i>>>8|0,s=0;s:{if(!g||(s=31,i>>>0>16777215))break s;s=g,g=g+1048320>>>16&8,s=s<<g,A=s+520192>>>16&4,s=s<<A,b=s+245760>>>16&2,s=(s<<b>>>15|0)-(b|(g|A))|0,s=(s<<1|i>>>s+21&1)+28|0}f[a+28>>2]=s,f[x+16>>2]=0,f[x+20>>2]=0,A=(s<<2)+11840|0,g=f[2885],a=1<<s;s:{if(!(g&a)){f[2885]=a|g,f[A>>2]=x,f[x+24>>2]=A;break s}for(b=i<<((s|0)==31?0:25-(s>>>1|0)|0),a=f[A>>2];;){if(s=a,(f[a+4>>2]&-8)==(i|0))break u;if(a=b>>>29|0,b=b<<1,g=(s+(a&4)|0)+16|0,a=f[g>>2],!a)break}f[g>>2]=x,f[x+24>>2]=s}f[x+12>>2]=x,f[x+8>>2]=x;break i}for(g=A+-40|0,i=a+8&7?-8-a&7:0,s=g-i|0,f[2887]=s,i=i+a|0,f[2890]=i,f[i+4>>2]=s|1,f[(a+g|0)+4>>2]=40,f[2891]=f[3006],i=(x+(x+-39&7?39-x&7:0)|0)+-47|0,s=i>>>0<b+16>>>0?b:i,f[s+4>>2]=27,i=f[2999],f[s+16>>2]=f[2998],f[s+20>>2]=i,i=f[2997],f[s+8>>2]=f[2996],f[s+12>>2]=i,f[2998]=s+8,f[2997]=A,f[2996]=a,f[2999]=0,i=s+24|0;f[i+4>>2]=7,a=i+8|0,i=i+4|0,x>>>0>a>>>0;);if((s|0)==(b|0))break o;if(f[s+4>>2]=f[s+4>>2]&-2,x=s-b|0,f[b+4>>2]=x|1,f[s>>2]=x,x>>>0<=255){i=x>>>3|0,a=(i<<3)+11576|0,s=f[2884],i=1<<i;a:{if(!(s&i)){f[2884]=i|s,i=a;break a}i=f[a+8>>2]}f[a+8>>2]=b,f[i+12>>2]=b,f[b+12>>2]=a,f[b+8>>2]=i;break o}f[b+16>>2]=0,f[b+20>>2]=0,i=b,s=x>>>8|0,a=0;a:{if(!s||(a=31,x>>>0>16777215))break a;a=s,s=s+1048320>>>16&8,a=a<<s,A=a+520192>>>16&4,a=a<<A,g=a+245760>>>16&2,a=(a<<g>>>15|0)-(g|(s|A))|0,a=(a<<1|x>>>a+21&1)+28|0}f[i+28>>2]=a,g=(a<<2)+11840|0,s=f[2885],i=1<<a;a:{if(!(s&i)){f[2885]=i|s,f[g>>2]=b,f[b+24>>2]=g;break a}for(i=x<<((a|0)==31?0:25-(a>>>1|0)|0),a=f[g>>2];;){if(s=a,(x|0)==(f[a+4>>2]&-8))break l;if(a=i>>>29|0,i=i<<1,g=(s+(a&4)|0)+16|0,a=f[g>>2],!a)break}f[g>>2]=b,f[b+24>>2]=s}f[b+12>>2]=b,f[b+8>>2]=b;break o}i=f[s+8>>2],f[i+12>>2]=x,f[s+8>>2]=x,f[x+24>>2]=0,f[x+12>>2]=s,f[x+8>>2]=i}i=j+8|0;break e}i=f[s+8>>2],f[i+12>>2]=b,f[s+8>>2]=b,f[b+24>>2]=0,f[b+12>>2]=s,f[b+8>>2]=i}if(i=f[2887],i>>>0<=P>>>0)break n;a=i-P|0,f[2887]=a,s=f[2890],i=s+P|0,f[2890]=i,f[i+4>>2]=a|1,f[s+4>>2]=P|3,i=s+8|0;break e}f[2865]=48,i=0;break e}r:{if(!B)break r;s=f[g+28>>2],i=(s<<2)+11840|0;n:{if(f[i>>2]==(g|0)){if(f[i>>2]=a,a)break n;j=ea(-2,s)&j,f[2885]=j;break r}if(f[B+(f[B+16>>2]==(g|0)?16:20)>>2]=a,!a)break r}if(f[a+24>>2]=B,i=f[g+16>>2],i&&(f[a+16>>2]=i,f[i+24>>2]=a),i=f[g+20>>2],!i)break r;f[a+20>>2]=i,f[i+24>>2]=a}r:{if(b>>>0<=15){i=b+P|0,f[g+4>>2]=i|3,i=i+g|0,f[i+4>>2]=f[i+4>>2]|1;break r}if(f[g+4>>2]=P|3,f[x+4>>2]=b|1,f[b+x>>2]=b,b>>>0<=255){i=b>>>3|0,a=(i<<3)+11576|0,s=f[2884],i=1<<i;n:{if(!(s&i)){f[2884]=i|s,i=a;break n}i=f[a+8>>2]}f[a+8>>2]=x,f[i+12>>2]=x,f[x+12>>2]=a,f[x+8>>2]=i;break r}i=x,s=b>>>8|0,a=0;n:{if(!s||(a=31,b>>>0>16777215))break n;a=s,s=s+1048320>>>16&8,a=a<<s,P=a+520192>>>16&4,a=a<<P,A=a+245760>>>16&2,a=(a<<A>>>15|0)-(A|(s|P))|0,a=(a<<1|b>>>a+21&1)+28|0}f[i+28>>2]=a,f[x+16>>2]=0,f[x+20>>2]=0,s=(a<<2)+11840|0;n:{i=1<<a;o:{if(!(i&j)){f[2885]=i|j,f[s>>2]=x,f[x+24>>2]=s;break o}for(i=b<<((a|0)==31?0:25-(a>>>1|0)|0),P=f[s>>2];;){if(a=P,(f[a+4>>2]&-8)==(b|0))break n;if(s=i>>>29|0,i=i<<1,s=(a+(s&4)|0)+16|0,P=f[s>>2],!P)break}f[s>>2]=x,f[x+24>>2]=a}f[x+12>>2]=x,f[x+8>>2]=x;break r}i=f[a+8>>2],f[i+12>>2]=x,f[a+8>>2]=x,f[x+24>>2]=0,f[x+12>>2]=a,f[x+8>>2]=i}i=g+8|0;break e}t:{if(!Z)break t;s=f[a+28>>2],i=(s<<2)+11840|0;r:{if(f[i>>2]==(a|0)){if(f[i>>2]=g,g)break r;Ce=11540,Be=ea(-2,s)&j,f[Ce>>2]=Be;break t}if(f[(f[Z+16>>2]==(a|0)?16:20)+Z>>2]=g,!g)break t}if(f[g+24>>2]=Z,i=f[a+16>>2],i&&(f[g+16>>2]=i,f[i+24>>2]=g),i=f[a+20>>2],!i)break t;f[g+20>>2]=i,f[i+24>>2]=g}t:{if(b>>>0<=15){i=b+P|0,f[a+4>>2]=i|3,i=i+a|0,f[i+4>>2]=f[i+4>>2]|1;break t}if(f[a+4>>2]=P|3,f[B+4>>2]=b|1,f[b+B>>2]=b,ne){i=ne>>>3|0,s=(i<<3)+11576|0,g=f[2889],i=1<<i;r:{if(!(i&A)){f[2884]=i|A,i=s;break r}i=f[s+8>>2]}f[s+8>>2]=g,f[i+12>>2]=g,f[g+12>>2]=s,f[g+8>>2]=i}f[2889]=B,f[2886]=b}i=a+8|0}return jn=me+16|0,i|0}function ws(i,a){var s=0,g=0,b=0,x=0,A=0,P=0,j=0,B=0,Z=0,ne=0,me=0,Ce=0,Be=0,at=0,kt=0,It=0,Qt=0,lr=0,zr=0,Sr=0,Jr=0;if(f[a+288>>2]>=1)for(Jr=a+2248|0;;){if(B=f[a+2244>>2],ne=f[a+2304>>2],x=0,f[a+108>>2]){P=f[i+4>>2],b=L[a+904|0],g=f[i+8>>2];e:{if((g|0)>-1)break e;if(s=f[i+12>>2],s>>>0<ii[i+20>>2]){A=L[s|0]|L[s+1|0]<<8|(L[s+2|0]<<16|L[s+3|0]<<24),f[i+12>>2]=s+3,g=g+24|0,f[i+8>>2]=g,f[i>>2]=f[i>>2]<<24|(A>>>8&65280|(A<<8&16711680|A<<24))>>>8;break e}Fi(i),g=f[i+8>>2]}A=i,Z=g,x=f[i>>2],j=x>>>g|0,b=J(b,P)>>>8|0;e:{if(j>>>0>b>>>0){x=((b^-1)<<g)+x|0,f[i>>2]=x,P=P-b|0;break e}P=b+1|0}s=Ri(P)^24,g=Z-s|0,f[A+8>>2]=g,A=(P<<s)+-1|0,f[i+4>>2]=A;e:{if(j>>>0<=b>>>0){P=L[a+905|0];t:{if((g|0)>-1)break t;if(s=f[i+12>>2],s>>>0<ii[i+20>>2]){b=L[s|0]|L[s+1|0]<<8|(L[s+2|0]<<16|L[s+3|0]<<24),g=g+24|0,f[i+8>>2]=g,f[i+12>>2]=s+3,x=x<<24|(b>>>8&65280|(b<<8&16711680|b<<24))>>>8,f[i>>2]=x;break t}Fi(i),x=f[i>>2],g=f[i+8>>2]}b=x>>>g|0,s=J(A,P)>>>8|0;t:{if(b>>>0>s>>>0){f[i>>2]=((s^-1)<<g)+x,A=A-s|0;break t}A=s+1|0}x=b>>>0>s>>>0,s=Ri(A)^24,g=g-s|0,s=A<<s;break e}P=L[a+906|0];t:{if((g|0)>-1)break t;if(s=f[i+12>>2],s>>>0<ii[i+20>>2]){b=L[s|0]|L[s+1|0]<<8|(L[s+2|0]<<16|L[s+3|0]<<24),g=g+24|0,f[i+8>>2]=g,f[i+12>>2]=s+3,x=x<<24|(b>>>8&65280|(b<<8&16711680|b<<24))>>>8,f[i>>2]=x;break t}Fi(i),x=f[i>>2],g=f[i+8>>2]}s=g,j=s,b=J(A,P)>>>8|0;t:{if(x>>>s>>>0>b>>>0){f[i>>2]=((b^-1)<<g)+x,x=3,A=A-b|0;break t}x=2,A=b+1|0}s=Ri(A)^24,g=j-s|0,s=A<<s}f[i+8>>2]=g,f[i+4>>2]=s+-1}ne=ne+J(me,800)|0,m[ne+798|0]=x;e:{if(!f[a+2236>>2]){g=f[i+8>>2],P=f[i+4>>2];break e}b=f[i+4>>2],x=L[a+2240|0],g=f[i+8>>2];t:{if((g|0)>-1)break t;if(s=f[i+12>>2],s>>>0<ii[i+20>>2]){A=L[s|0]|L[s+1|0]<<8|(L[s+2|0]<<16|L[s+3|0]<<24),f[i+12>>2]=s+3,g=g+24|0,f[i+8>>2]=g,f[i>>2]=f[i>>2]<<24|(A>>>8&65280|(A<<8&16711680|A<<24))>>>8;break t}Fi(i),g=f[i+8>>2]}A=i,Z=g,P=f[i>>2],j=P>>>g|0,x=J(b,x)>>>8|0;t:{if(j>>>0>x>>>0){f[i>>2]=P+((x^-1)<<g),b=b-x|0;break t}b=x+1|0}s=Ri(b)^24,g=Z-s|0,f[A+8>>2]=g,P=(b<<s)+-1|0,f[i+4>>2]=P,m[ne+797|0]=j>>>0>x>>>0}e:{if((g|0)>-1)break e;if(s=f[i+12>>2],s>>>0<ii[i+20>>2]){A=L[s|0]|L[s+1|0]<<8|(L[s+2|0]<<16|L[s+3|0]<<24),f[i+12>>2]=s+3,g=g+24|0,f[i+8>>2]=g,f[i>>2]=f[i>>2]<<24|(A>>>8&65280|(A<<8&16711680|A<<24))>>>8;break e}Fi(i),g=f[i+8>>2]}B=B+(me<<2)|0,A=i,Z=g,x=f[i>>2],b=J(P,145)>>>8|0,j=x>>>g>>>0<=b>>>0;e:{if(!j){x=((b^-1)<<g)+x|0,f[i>>2]=x,b=P-b|0;break e}b=b+1|0}s=Ri(b)^24,g=Z-s|0,f[A+8>>2]=g,P=(b<<s)+-1|0,f[i+4>>2]=P,m[ne+768|0]=j;e:{if(!j){t:{if((g|0)>-1)break t;if(s=f[i+12>>2],s>>>0<ii[i+20>>2]){A=L[s|0]|L[s+1|0]<<8|(L[s+2|0]<<16|L[s+3|0]<<24),g=g+24|0,f[i+8>>2]=g,f[i+12>>2]=s+3,x=x<<24|(A>>>8&65280|(A<<8&16711680|A<<24))>>>8,f[i>>2]=x;break t}Fi(i),x=f[i>>2],g=f[i+8>>2]}A=i,Z=g,b=J(P,156)>>>8|0,j=x>>>g>>>0<=b>>>0;t:{if(!j){x=((b^-1)<<g)+x|0,f[i>>2]=x,b=P-b|0;break t}b=b+1|0}s=Ri(b)^24,g=Z-s|0,f[A+8>>2]=g,A=(b<<s)+-1|0,f[i+4>>2]=A;t:{if(!j){r:{if((g|0)>-1)break r;if(s=f[i+12>>2],s>>>0<ii[i+20>>2]){b=L[s|0]|L[s+1|0]<<8|(L[s+2|0]<<16|L[s+3|0]<<24),g=g+24|0,f[i+8>>2]=g,f[i+12>>2]=s+3,x=x<<24|(b>>>8&65280|(b<<8&16711680|b<<24))>>>8,f[i>>2]=x;break r}Fi(i),x=f[i>>2],g=f[i+8>>2]}s=g,P=s,b=A>>>1&16777215;r:{if(x>>>s>>>0>b>>>0){f[i>>2]=((b^-1)<<g)+x,x=1,A=A-b|0;break r}x=3,A=b+1|0}s=Ri(A)^24,g=P-s|0,s=A<<s;break t}r:{if((g|0)>-1)break r;if(s=f[i+12>>2],s>>>0<ii[i+20>>2]){b=L[s|0]|L[s+1|0]<<8|(L[s+2|0]<<16|L[s+3|0]<<24),g=g+24|0,f[i+8>>2]=g,f[i+12>>2]=s+3,x=x<<24|(b>>>8&65280|(b<<8&16711680|b<<24))>>>8,f[i>>2]=x;break r}Fi(i),x=f[i>>2],g=f[i+8>>2]}s=g,P=s,b=J(A,163)>>>8|0;r:{if(x>>>s>>>0>b>>>0){f[i>>2]=((b^-1)<<g)+x,x=2,A=A-b|0;break r}x=0,A=b+1|0}s=Ri(A)^24,g=P-s|0,s=A<<s}f[i+8>>2]=g,f[i+4>>2]=s+-1,m[ne+769|0]=x,s=J(x,16843009),m[B|0]=s,m[B+1|0]=s>>>8,m[B+2|0]=s>>>16,m[B+3|0]=s>>>24,g=Jr,m[g|0]=s,m[g+1|0]=s>>>8,m[g+2|0]=s>>>16,m[g+3|0]=s>>>24;break e}for(A=ne+769|0,Ce=0;;){for(It=(a+Ce|0)+2248|0,g=L[It|0],Be=0;;){Qt=J(g,9),lr=B+Be|0,zr=J(L[lr|0],90),b=L[Qt+(zr+3504|0)|0],j=f[i+4>>2],g=f[i+8>>2];t:{if((g|0)>-1)break t;if(s=f[i+12>>2],s>>>0<ii[i+20>>2]){x=L[s|0]|L[s+1|0]<<8|(L[s+2|0]<<16|L[s+3|0]<<24),f[i+12>>2]=s+3,g=g+24|0,f[i+8>>2]=g,f[i>>2]=f[i>>2]<<24|(x>>>8&65280|(x<<8&16711680|x<<24))>>>8;break t}Fi(i),g=f[i+8>>2]}Z=i,kt=g,P=f[i>>2],at=P>>>g|0,b=J(b,j)>>>8|0;t:{if(at>>>0>b>>>0){P=((b^-1)<<g)+P|0,f[i>>2]=P,j=j-b|0;break t}j=b+1|0}if(s=Ri(j)^24,g=kt-s|0,f[Z+8>>2]=g,s=(j<<s)+-1|0,f[i+4>>2]=s,b=at>>>0>b>>>0,x=m[b+4416|0],41706>>>b&1)for(;;){at=L[((zr+3504|0)+Qt|0)+x|0];t:{if((g|0)>-1)break t;if(b=f[i+12>>2],b>>>0<ii[i+20>>2]){j=L[b|0]|L[b+1|0]<<8|(L[b+2|0]<<16|L[b+3|0]<<24),g=g+24|0,f[i+8>>2]=g,f[i+12>>2]=b+3,P=P<<24|(j>>>8&65280|(j<<8&16711680|j<<24))>>>8,f[i>>2]=P;break t}Fi(i),P=f[i>>2],g=f[i+8>>2]}b=x<<1,Z=i,kt=g,Sr=P>>>g|0,j=J(s,at)>>>8|0;t:{if(Sr>>>0>j>>>0){P=((j^-1)<<g)+P|0,f[i>>2]=P,s=s-j|0;break t}s=j+1|0}if(x=Ri(s)^24,g=kt-x|0,f[Z+8>>2]=g,s=(s<<x)+-1|0,f[i+4>>2]=s,b=b|Sr>>>0>j>>>0,x=m[b+4416|0],!(41706>>>b&1))break}if(g=0-x|0,m[lr|0]=g,Be=Be+1|0,(Be|0)==4)break}if(s=A,A=L[B|0]|L[B+1|0]<<8|(L[B+2|0]<<16|L[B+3|0]<<24),m[s|0]=A,m[s+1|0]=A>>>8,m[s+2|0]=A>>>16,m[s+3|0]=A>>>24,m[It|0]=g,A=s+4|0,Ce=Ce+1|0,(Ce|0)==4)break}}P=f[i+4>>2],g=f[i+8>>2];e:{if((g|0)>-1)break e;if(s=f[i+12>>2],s>>>0<ii[i+20>>2]){A=L[s|0]|L[s+1|0]<<8|(L[s+2|0]<<16|L[s+3|0]<<24),f[i+12>>2]=s+3,g=g+24|0,f[i+8>>2]=g,f[i>>2]=f[i>>2]<<24|(A>>>8&65280|(A<<8&16711680|A<<24))>>>8;break e}Fi(i),g=f[i+8>>2]}A=i,j=g,x=f[i>>2],b=J(P,142)>>>8|0,B=x>>>g>>>0<=b>>>0;e:{if(!B){x=((b^-1)<<g)+x|0,f[i>>2]=x,b=P-b|0;break e}b=b+1|0}s=Ri(b)^24,g=j-s|0,f[A+8>>2]=g,P=(b<<s)+-1|0,f[i+4>>2]=P,s=0;e:{if(B)break e;t:{if((g|0)>-1)break t;if(s=f[i+12>>2],s>>>0<ii[i+20>>2]){A=L[s|0]|L[s+1|0]<<8|(L[s+2|0]<<16|L[s+3|0]<<24),g=g+24|0,f[i+8>>2]=g,f[i+12>>2]=s+3,x=x<<24|(A>>>8&65280|(A<<8&16711680|A<<24))>>>8,f[i>>2]=x;break t}Fi(i),x=f[i>>2],g=f[i+8>>2]}A=i,j=g,b=J(P,114)>>>8|0,B=x>>>g>>>0<=b>>>0;t:{if(!B){x=((b^-1)<<g)+x|0,f[i>>2]=x,b=P-b|0;break t}b=b+1|0}if(s=Ri(b)^24,g=j-s|0,f[A+8>>2]=g,b=(b<<s)+-1|0,f[i+4>>2]=b,s=2,B)break e;t:{if((g|0)>-1)break t;if(s=f[i+12>>2],s>>>0<ii[i+20>>2]){A=L[s|0]|L[s+1|0]<<8|(L[s+2|0]<<16|L[s+3|0]<<24),g=g+24|0,f[i+8>>2]=g,f[i+12>>2]=s+3,x=x<<24|(A>>>8&65280|(A<<8&16711680|A<<24))>>>8,f[i>>2]=x;break t}Fi(i),x=f[i>>2],g=f[i+8>>2]}s=J(b,183)>>>8|0;t:{if(x>>>g>>>0>s>>>0){f[i>>2]=((s^-1)<<g)+x,x=b-s|0,s=1;break t}x=s+1|0,s=3}b=g,g=Ri(x)^24,f[i+8>>2]=b-g,f[i+4>>2]=(x<<g)+-1}if(m[ne+785|0]=s,me=me+1|0,!((me|0)<f[a+288>>2]))break}return!f[a+36>>2]}function Wl(i,a,s,g,b,x){var A=0,P=0,j=0,B=0,Z=0,ne=0,me=0,Ce=0,Be=0,at=0,kt=0,It=0,Qt=0,lr=0,zr=0,Sr=0,Jr=0,hn=0,Sn=0,di=0,Ni=0,Ua=0,Ks=0,iu=0,jc=0,yf=0;di=i+124|0,A=f[i+112>>2],Be=(A|0)/(s|0)|0,Ce=i+24|0,Ni=(J(s,g)<<2)+a|0,g=(A<<2)+a|0;e:{t:{at=J(s,b);r:{if((A|0)>=(at|0))break r;for(me=at<<2,It=A-J(s,Be)|0,Ua=f[i+148>>2],at=0,Sn=f[i+120>>2],hn=(Sn|0)>0?di:0,Ks=f[i+56>>2]?Be:16777216,iu=Sn+280|0,jc=a+me|0,ne=f[i+168>>2],A=f[i+152>>2],A&&(at=f[f[i+160>>2]+(J(f[i+156>>2],Be>>A)+(It>>A)<<2)>>2]),Qt=ne+J(at,548)|0,yf=i+136|0,Sr=i- -64|0,at=g;;){(Be|0)>=(Ks|0)&&(A=f[Ce+4>>2],f[Sr>>2]=f[Ce>>2],f[Sr+4>>2]=A,A=f[Ce+28>>2],f[Sr+24>>2]=f[Ce+24>>2],f[Sr+28>>2]=A,A=f[Ce+20>>2],f[Sr+16>>2]=f[Ce+16>>2],f[Sr+20>>2]=A,A=f[Ce+12>>2],f[Sr+8>>2]=f[Ce+8>>2],f[Sr+12>>2]=A,f[i+96>>2]=g-a>>2,f[i+120>>2]>=1&&C0(di,yf),Ks=Be+8|0);n:{o:{l:{if(!(It&Ua)){A=f[i+168>>2],j=f[i+152>>2],ne=0;i:{if(!j)break i;ne=f[f[i+160>>2]+(J(f[i+156>>2],Be>>j)+(It>>j)<<2)>>2]}Qt=A+J(ne,548)|0}if(f[Qt+28>>2]){B=f[Qt+24>>2];break l}f[i+44>>2]>=32&&de(Ce);i:{if(f[Qt+32>>2]){A=f[i+28>>2],B=f[i+44>>2],P=B&63,j=P&31,kt=f[i+24>>2],me=(((32<=(P&63)>>>0?A>>>j|0:((1<<j)-1&A)<<32-j|kt>>>j)&63)<<3)+Qt|0,j=f[me+36>>2],ne=B+j|0,B=f[me+40>>2];u:{if((j|0)<=255){f[i+44>>2]=ne,f[g>>2]=B,B=0;break u}f[i+44>>2]=ne+-256}if(f[i+48>>2]|(f[i+44>>2]>64?f[i+40>>2]==f[i+36>>2]:0))break r;if(B)break i;break o}if(me=i,A=f[i+28>>2],B=f[i+44>>2],Z=B&63,j=Z&31,kt=f[i+24>>2],P=f[Qt>>2]+(((32<=(Z&63)>>>0?A>>>j|0:((1<<j)-1&A)<<32-j|kt>>>j)&255)<<2)|0,j=L[P|0],j>>>0>=9&&(B=B+8|0,f[i+44>>2]=B,ne=(kn[P+2>>1]<<2)+P|0,lr=B&63,P=lr&31,P=ne+(((-1<<j+-8^-1)&(32<=(lr&63)>>>0?A>>>P|0:((1<<P)-1&A)<<32-P|kt>>>P))<<2)|0,j=L[P|0]),f[me+44>>2]=(j&255)+B,f[i+48>>2])break r;B=kn[P+2>>1]}if(f[i+44>>2]>64&&f[i+40>>2]==f[i+36>>2])break r;if((B|0)<=255){if(f[Qt+20>>2]){B=f[Qt+24>>2]|B<<8;break l}if(me=i,P=f[i+44>>2],lr=P&63,ne=lr&31,Z=f[Qt+4>>2]+(((32<=(lr&63)>>>0?A>>>ne|0:((1<<ne)-1&A)<<32-ne|kt>>>ne)&255)<<2)|0,j=L[Z|0],j>>>0>=9&&(P=P+8|0,f[i+44>>2]=P,ne=(kn[Z+2>>1]<<2)+Z|0,Jr=P&63,Z=Jr&31,Z=ne+(((-1<<j+-8^-1)&(32<=(Jr&63)>>>0?A>>>Z|0:((1<<Z)-1&A)<<32-Z|kt>>>Z))<<2)|0,j=L[Z|0]),P=(j&255)+P|0,f[me+44>>2]=P,lr=kn[Z+2>>1],(P|0)>=32&&(de(Ce),kt=f[i+24>>2],P=f[i+44>>2],A=f[i+28>>2]),Jr=P&63,ne=Jr&31,Z=f[Qt+8>>2]+(((32<=(Jr&63)>>>0?A>>>ne|0:((1<<ne)-1&A)<<32-ne|kt>>>ne)&255)<<2)|0,j=L[Z|0],j>>>0>=9&&(P=P+8|0,f[i+44>>2]=P,ne=(kn[Z+2>>1]<<2)+Z|0,zr=P&63,Z=zr&31,Z=ne+(((-1<<j+-8^-1)&(32<=zr>>>0?A>>>Z|0:((1<<Z)-1&A)<<32-Z|kt>>>Z))<<2)|0,j=L[Z|0]),P=(j&255)+P|0,f[me+44>>2]=P,Jr=kn[Z+2>>1],ne=i,zr=P&63,me=zr&31,Z=f[Qt+12>>2]+(((32<=zr>>>0?A>>>me|0:((1<<me)-1&A)<<32-me|kt>>>me)&255)<<2)|0,j=L[Z|0],j>>>0>=9&&(P=P+8|0,f[i+44>>2]=P,zr=(kn[Z+2>>1]<<2)+Z|0,Z=P&63,me=Z&31,Z=zr+(((-1<<j+-8^-1)&(32<=(Z&63)>>>0?A>>>me|0:((1<<me)-1&A)<<32-me|kt>>>me))<<2)|0,j=L[Z|0]),A=(j&255)+P|0,f[ne+44>>2]=A,f[i+48>>2]||(j=kn[Z+2>>1],f[i+40>>2]==f[i+36>>2]&&(A|0)>=65))break r;B=Jr|(lr<<16|B<<8)|j<<24;break l}i:{u:{if((B|0)<=279){ne=B+-256|0,(B|0)>=260&&(A=B+-258>>1,ne=ho(Ce,A)+((ne&1|2)<<A)|0,kt=f[Ce>>2],A=f[Ce+4>>2]),me=i,B=f[i+44>>2],lr=B&63,P=lr&31,P=f[Qt+16>>2]+(((32<=(lr&63)>>>0?A>>>P|0:((1<<P)-1&A)<<32-P|kt>>>P)&255)<<2)|0,j=L[P|0],j>>>0>=9&&(B=B+8|0,f[i+44>>2]=B,zr=(kn[P+2>>1]<<2)+P|0,Z=B&63,P=Z&31,P=zr+(((-1<<j+-8^-1)&(32<=(Z&63)>>>0?A>>>P|0:((1<<P)-1&A)<<32-P|kt>>>P))<<2)|0,j=L[P|0]),A=(j&255)+B|0,f[me+44>>2]=A,B=kn[P+2>>1],(A|0)>=32&&de(Ce),B>>>0>=4&&(A=B+-2>>1,B=ho(Ce,A)+((B&1|2)<<A)|0);a:{if((B+1|0)>=121){A=B+-119|0;break a}A=L[B+1264|0],A=(J(A>>>4|0,s)-(A&15)|0)+8|0,A=(A|0)>1?A:1}if(f[i+48>>2]|(f[i+44>>2]>64?f[i+40>>2]==f[i+36>>2]:0))break r;if(g-a>>2<(A|0)||(me=ne+1|0,Ni-g>>2<(me|0)))break t;if(P=g-(A<<2)|0,!(g&3|(me|0)<4|(A|0)>2)){a:{if((A|0)==1){B=f[P>>2],j=B,A=j,kt=A;break a}A=f[P+4>>2],kt=f[P>>2],B=kt}a:{if(!(g&4)){ne=me,j=g;break a}f[g>>2]=B,kt=Od(kt,A),A=Fn,P=P+4|0,j=g+4|0}for(B=ne>>>1|0,Z=B>>>0>1?B:1,B=0;lr=j+(B<<3)|0,f[lr>>2]=kt,f[lr+4>>2]=A,B=B+1|0,(Z|0)!=(B|0););if(!(ne&1))break i;A=Z<<3,f[A+j>>2]=f[A+P>>2];break i}if((A|0)>=(me|0))break u;if(B=0,(me|0)<=0)break i;for(;A=B<<2,f[A+g>>2]=f[A+P>>2],A=(B|0)!=(ne|0),B=B+1|0,!!A;);break i}if((B|0)>=(iu|0))break t;if(j=B+-280|0,A=f[hn>>2],at>>>0<g>>>0)for(;ne=f[at>>2],f[A+(J(ne,506832829)>>>f[hn+4>>2]<<2)>>2]=ne,at=at+4|0,at>>>0<g>>>0;);B=f[A+(j<<2)>>2];break l}no(g,P,me<<2)}if(It=me+It|0,(It|0)>=(s|0))for(;It=It-s|0,A=Be,Be=A+1|0,Be&15|(!x|(A|0)>=(b|0))||et[x|0](i,Be),(It|0)>=(s|0););if(ne=me<<2,It&Ua){A=f[i+168>>2],j=f[i+152>>2],me=0;i:{if(!j)break i;me=f[f[i+160>>2]+(J(f[i+156>>2],Be>>j)+(It>>j)<<2)>>2]}Qt=A+J(me,548)|0}if(g=g+ne|0,(Sn|0)<1|at>>>0>=g>>>0)break n;for(A=f[hn>>2];j=f[at>>2],f[A+(J(j,506832829)>>>f[hn+4>>2]<<2)>>2]=j,at=at+4|0,at>>>0<g>>>0;);break n}f[g>>2]=B}if(A=g+4|0,It=It+1|0,(It|0)<(s|0)){g=A;break n}if(j=Be+1|0,j&15|(!x|(Be|0)>=(b|0))||et[x|0](i,j),It=0,!((Sn|0)<1|at>>>0>=A>>>0)){for(ne=f[hn>>2];Be=f[at>>2],f[ne+(J(Be,506832829)>>>f[hn+4>>2]<<2)>>2]=Be,me=at>>>0<g>>>0,Be=at+4|0,at=Be,!!me;);at=Be}g=A,Be=j}if(!(g>>>0<jc>>>0))break}}A=i,s=1;r:{if(f[i+48>>2]||(s=0,f[i+40>>2]!=f[i+36>>2]))break r;s=f[i+44>>2]>64}if(f[A+48>>2]=s,!(!f[i+56>>2]|(!s|g>>>0>=Ni>>>0))){if(f[i>>2]=5,a=f[i+68>>2],f[Ce>>2]=f[i+64>>2],f[Ce+4>>2]=a,a=f[i+92>>2],f[Ce+24>>2]=f[i+88>>2],f[Ce+28>>2]=a,a=f[i+84>>2],f[Ce+16>>2]=f[i+80>>2],f[Ce+20>>2]=a,a=f[i+76>>2],f[Ce+8>>2]=f[i+72>>2],f[Ce+12>>2]=a,f[i+112>>2]=f[i+96>>2],a=1,f[i+120>>2]<1)break e;return C0(i+136|0,di),1}if(s)break t;return x&&et[x|0](i,(Be|0)>(b|0)?b:Be),f[i>>2]=0,f[i+112>>2]=g-a>>2,1}f[i>>2]=3,a=0}return a}function xs(i){i=i|0;var a=0,s=0;s=Ei(L[i+31|0],0,16843009,16843009),a=s,m[i+32|0]=a,m[i+33|0]=a>>>8,m[i+34|0]=a>>>16,m[i+35|0]=a>>>24,a=Fn,m[i+36|0]=a,m[i+37|0]=a>>>8,m[i+38|0]=a>>>16,m[i+39|0]=a>>>24,m[i+40|0]=s,m[i+41|0]=s>>>8,m[i+42|0]=s>>>16,m[i+43|0]=s>>>24,m[i+44|0]=a,m[i+45|0]=a>>>8,m[i+46|0]=a>>>16,m[i+47|0]=a>>>24,s=Ei(L[i+63|0],0,16843009,16843009),a=s,m[i+64|0]=a,m[i+65|0]=a>>>8,m[i+66|0]=a>>>16,m[i+67|0]=a>>>24,a=Fn,m[i+68|0]=a,m[i+69|0]=a>>>8,m[i+70|0]=a>>>16,m[i+71|0]=a>>>24,m[i+72|0]=s,m[i+73|0]=s>>>8,m[i+74|0]=s>>>16,m[i+75|0]=s>>>24,m[i+76|0]=a,m[i+77|0]=a>>>8,m[i+78|0]=a>>>16,m[i+79|0]=a>>>24,s=Ei(L[i+95|0],0,16843009,16843009),a=s,m[i+96|0]=a,m[i+97|0]=a>>>8,m[i+98|0]=a>>>16,m[i+99|0]=a>>>24,a=Fn,m[i+100|0]=a,m[i+101|0]=a>>>8,m[i+102|0]=a>>>16,m[i+103|0]=a>>>24,m[i+104|0]=s,m[i+105|0]=s>>>8,m[i+106|0]=s>>>16,m[i+107|0]=s>>>24,m[i+108|0]=a,m[i+109|0]=a>>>8,m[i+110|0]=a>>>16,m[i+111|0]=a>>>24,s=Ei(L[i+127|0],0,16843009,16843009),a=s,m[i+128|0]=a,m[i+129|0]=a>>>8,m[i+130|0]=a>>>16,m[i+131|0]=a>>>24,a=Fn,m[i+132|0]=a,m[i+133|0]=a>>>8,m[i+134|0]=a>>>16,m[i+135|0]=a>>>24,m[i+136|0]=s,m[i+137|0]=s>>>8,m[i+138|0]=s>>>16,m[i+139|0]=s>>>24,m[i+140|0]=a,m[i+141|0]=a>>>8,m[i+142|0]=a>>>16,m[i+143|0]=a>>>24,s=Ei(L[i+159|0],0,16843009,16843009),a=s,m[i+168|0]=a,m[i+169|0]=a>>>8,m[i+170|0]=a>>>16,m[i+171|0]=a>>>24,a=Fn,m[i+172|0]=a,m[i+173|0]=a>>>8,m[i+174|0]=a>>>16,m[i+175|0]=a>>>24,m[i+160|0]=s,m[i+161|0]=s>>>8,m[i+162|0]=s>>>16,m[i+163|0]=s>>>24,m[i+164|0]=a,m[i+165|0]=a>>>8,m[i+166|0]=a>>>16,m[i+167|0]=a>>>24,s=Ei(L[i+-1|0],0,16843009,16843009),a=s,m[i|0]=a,m[i+1|0]=a>>>8,m[i+2|0]=a>>>16,m[i+3|0]=a>>>24,a=Fn,m[i+4|0]=a,m[i+5|0]=a>>>8,m[i+6|0]=a>>>16,m[i+7|0]=a>>>24,m[i+8|0]=s,m[i+9|0]=s>>>8,m[i+10|0]=s>>>16,m[i+11|0]=s>>>24,m[i+12|0]=a,m[i+13|0]=a>>>8,m[i+14|0]=a>>>16,m[i+15|0]=a>>>24,s=Ei(L[i+191|0],0,16843009,16843009),a=s,m[i+200|0]=a,m[i+201|0]=a>>>8,m[i+202|0]=a>>>16,m[i+203|0]=a>>>24,a=Fn,m[i+204|0]=a,m[i+205|0]=a>>>8,m[i+206|0]=a>>>16,m[i+207|0]=a>>>24,m[i+192|0]=s,m[i+193|0]=s>>>8,m[i+194|0]=s>>>16,m[i+195|0]=s>>>24,m[i+196|0]=a,m[i+197|0]=a>>>8,m[i+198|0]=a>>>16,m[i+199|0]=a>>>24,s=Ei(L[i+223|0],0,16843009,16843009),a=s,m[i+232|0]=a,m[i+233|0]=a>>>8,m[i+234|0]=a>>>16,m[i+235|0]=a>>>24,a=Fn,m[i+236|0]=a,m[i+237|0]=a>>>8,m[i+238|0]=a>>>16,m[i+239|0]=a>>>24,m[i+224|0]=s,m[i+225|0]=s>>>8,m[i+226|0]=s>>>16,m[i+227|0]=s>>>24,m[i+228|0]=a,m[i+229|0]=a>>>8,m[i+230|0]=a>>>16,m[i+231|0]=a>>>24,s=Ei(L[i+255|0],0,16843009,16843009),a=s,m[i+264|0]=a,m[i+265|0]=a>>>8,m[i+266|0]=a>>>16,m[i+267|0]=a>>>24,a=Fn,m[i+268|0]=a,m[i+269|0]=a>>>8,m[i+270|0]=a>>>16,m[i+271|0]=a>>>24,m[i+256|0]=s,m[i+257|0]=s>>>8,m[i+258|0]=s>>>16,m[i+259|0]=s>>>24,m[i+260|0]=a,m[i+261|0]=a>>>8,m[i+262|0]=a>>>16,m[i+263|0]=a>>>24,s=Ei(L[i+287|0],0,16843009,16843009),a=s,m[i+296|0]=a,m[i+297|0]=a>>>8,m[i+298|0]=a>>>16,m[i+299|0]=a>>>24,a=Fn,m[i+300|0]=a,m[i+301|0]=a>>>8,m[i+302|0]=a>>>16,m[i+303|0]=a>>>24,m[i+288|0]=s,m[i+289|0]=s>>>8,m[i+290|0]=s>>>16,m[i+291|0]=s>>>24,m[i+292|0]=a,m[i+293|0]=a>>>8,m[i+294|0]=a>>>16,m[i+295|0]=a>>>24,s=Ei(L[i+319|0],0,16843009,16843009),a=s,m[i+328|0]=a,m[i+329|0]=a>>>8,m[i+330|0]=a>>>16,m[i+331|0]=a>>>24,a=Fn,m[i+332|0]=a,m[i+333|0]=a>>>8,m[i+334|0]=a>>>16,m[i+335|0]=a>>>24,m[i+320|0]=s,m[i+321|0]=s>>>8,m[i+322|0]=s>>>16,m[i+323|0]=s>>>24,m[i+324|0]=a,m[i+325|0]=a>>>8,m[i+326|0]=a>>>16,m[i+327|0]=a>>>24,s=Ei(L[i+351|0],0,16843009,16843009),a=s,m[i+360|0]=a,m[i+361|0]=a>>>8,m[i+362|0]=a>>>16,m[i+363|0]=a>>>24,a=Fn,m[i+364|0]=a,m[i+365|0]=a>>>8,m[i+366|0]=a>>>16,m[i+367|0]=a>>>24,m[i+352|0]=s,m[i+353|0]=s>>>8,m[i+354|0]=s>>>16,m[i+355|0]=s>>>24,m[i+356|0]=a,m[i+357|0]=a>>>8,m[i+358|0]=a>>>16,m[i+359|0]=a>>>24,s=Ei(L[i+383|0],0,16843009,16843009),a=s,m[i+392|0]=a,m[i+393|0]=a>>>8,m[i+394|0]=a>>>16,m[i+395|0]=a>>>24,a=Fn,m[i+396|0]=a,m[i+397|0]=a>>>8,m[i+398|0]=a>>>16,m[i+399|0]=a>>>24,m[i+384|0]=s,m[i+385|0]=s>>>8,m[i+386|0]=s>>>16,m[i+387|0]=s>>>24,m[i+388|0]=a,m[i+389|0]=a>>>8,m[i+390|0]=a>>>16,m[i+391|0]=a>>>24,s=Ei(L[i+415|0],0,16843009,16843009),a=s,m[i+424|0]=a,m[i+425|0]=a>>>8,m[i+426|0]=a>>>16,m[i+427|0]=a>>>24,a=Fn,m[i+428|0]=a,m[i+429|0]=a>>>8,m[i+430|0]=a>>>16,m[i+431|0]=a>>>24,m[i+416|0]=s,m[i+417|0]=s>>>8,m[i+418|0]=s>>>16,m[i+419|0]=s>>>24,m[i+420|0]=a,m[i+421|0]=a>>>8,m[i+422|0]=a>>>16,m[i+423|0]=a>>>24,s=Ei(L[i+447|0],0,16843009,16843009),a=s,m[i+456|0]=a,m[i+457|0]=a>>>8,m[i+458|0]=a>>>16,m[i+459|0]=a>>>24,a=Fn,m[i+460|0]=a,m[i+461|0]=a>>>8,m[i+462|0]=a>>>16,m[i+463|0]=a>>>24,m[i+448|0]=s,m[i+449|0]=s>>>8,m[i+450|0]=s>>>16,m[i+451|0]=s>>>24,m[i+452|0]=a,m[i+453|0]=a>>>8,m[i+454|0]=a>>>16,m[i+455|0]=a>>>24,s=Ei(L[i+479|0],0,16843009,16843009),a=s,m[i+488|0]=a,m[i+489|0]=a>>>8,m[i+490|0]=a>>>16,m[i+491|0]=a>>>24,a=Fn,m[i+492|0]=a,m[i+493|0]=a>>>8,m[i+494|0]=a>>>16,m[i+495|0]=a>>>24,m[i+480|0]=s,m[i+481|0]=s>>>8,m[i+482|0]=s>>>16,m[i+483|0]=s>>>24,m[i+484|0]=a,m[i+485|0]=a>>>8,m[i+486|0]=a>>>16,m[i+487|0]=a>>>24}function Lo(i,a){var s=0,g=0,b=0,x=0,A=0,P=0,j=0,B=0,Z=0,ne=0;P=f[i+4>>2],x=L[a+3|0],s=f[i+8>>2];e:{if((s|0)>-1)break e;if(b=f[i+12>>2],b>>>0<ii[i+20>>2]){A=L[b|0]|L[b+1|0]<<8|(L[b+2|0]<<16|L[b+3|0]<<24),f[i+12>>2]=b+3,s=s+24|0,f[i+8>>2]=s,f[i>>2]=f[i>>2]<<24|(A>>>8&65280|(A<<8&16711680|A<<24))>>>8;break e}Fi(i),s=f[i+8>>2]}A=i,B=s,g=f[i>>2],j=g>>>s|0,x=J(x,P)>>>8|0;e:{if(j>>>0>x>>>0){g=((x^-1)<<s)+g|0,f[i>>2]=g,P=P-x|0;break e}P=x+1|0}b=Ri(P)^24,s=B-b|0,f[A+8>>2]=s,P=(P<<b)+-1|0,f[i+4>>2]=P;e:{if(j>>>0<=x>>>0){x=L[a+4|0];t:{if((s|0)>-1)break t;if(b=f[i+12>>2],b>>>0<ii[i+20>>2]){A=L[b|0]|L[b+1|0]<<8|(L[b+2|0]<<16|L[b+3|0]<<24),s=s+24|0,f[i+8>>2]=s,f[i+12>>2]=b+3,g=g<<24|(A>>>8&65280|(A<<8&16711680|A<<24))>>>8,f[i>>2]=g;break t}Fi(i),g=f[i>>2],s=f[i+8>>2]}A=i,B=s,x=J(x,P)>>>8|0,j=g>>>s>>>0<=x>>>0;t:{if(!j){g=((x^-1)<<s)+g|0,f[i>>2]=g,x=P-x|0;break t}x=x+1|0}if(b=Ri(x)^24,s=B-b|0,f[A+8>>2]=s,P=(x<<b)+-1|0,f[i+4>>2]=P,x=2,j)break e;A=L[a+5|0];t:{if((s|0)>-1)break t;if(a=f[i+12>>2],a>>>0<ii[i+20>>2]){b=L[a|0]|L[a+1|0]<<8|(L[a+2|0]<<16|L[a+3|0]<<24),s=s+24|0,f[i+8>>2]=s,f[i+12>>2]=a+3,g=g<<24|(b>>>8&65280|(b<<8&16711680|b<<24))>>>8,f[i>>2]=g;break t}Fi(i),g=f[i>>2],s=f[i+8>>2]}B=i,b=s,x=J(A,P)>>>8|0;t:{if(g>>>s>>>0>x>>>0){f[i>>2]=((x^-1)<<s)+g,A=4,s=P-x|0;break t}A=3,s=x+1|0}return a=Ri(s)^24,f[B+8>>2]=b-a,f[i+4>>2]=(s<<a)+-1,A}x=L[a+6|0];t:{if((s|0)>-1)break t;if(b=f[i+12>>2],b>>>0<ii[i+20>>2]){A=L[b|0]|L[b+1|0]<<8|(L[b+2|0]<<16|L[b+3|0]<<24),s=s+24|0,f[i+8>>2]=s,f[i+12>>2]=b+3,g=g<<24|(A>>>8&65280|(A<<8&16711680|A<<24))>>>8,f[i>>2]=g;break t}Fi(i),g=f[i>>2],s=f[i+8>>2]}A=i,B=s,j=g>>>s|0,x=J(x,P)>>>8|0;t:{if(j>>>0>x>>>0){g=((x^-1)<<s)+g|0,f[i>>2]=g,P=P-x|0;break t}P=x+1|0}if(b=Ri(P)^24,s=B-b|0,f[A+8>>2]=s,P=(P<<b)+-1|0,f[i+4>>2]=P,j>>>0<=x>>>0){A=L[a+7|0];t:{if((s|0)>-1)break t;if(a=f[i+12>>2],a>>>0<ii[i+20>>2]){b=L[a|0]|L[a+1|0]<<8|(L[a+2|0]<<16|L[a+3|0]<<24),s=s+24|0,f[i+8>>2]=s,f[i+12>>2]=a+3,g=g<<24|(b>>>8&65280|(b<<8&16711680|b<<24))>>>8,f[i>>2]=g;break t}Fi(i),g=f[i>>2],s=f[i+8>>2]}B=i,b=s,j=g>>>s|0,A=J(A,P)>>>8|0;t:{if(j>>>0>A>>>0){g=((A^-1)<<s)+g|0,f[i>>2]=g,x=P-A|0;break t}x=A+1|0}if(a=Ri(x)^24,s=b-a|0,f[B+8>>2]=s,P=(x<<a)+-1|0,f[i+4>>2]=P,j>>>0<=A>>>0){t:{if((s|0)>-1)break t;if(a=f[i+12>>2],a>>>0<ii[i+20>>2]){b=L[a|0]|L[a+1|0]<<8|(L[a+2|0]<<16|L[a+3|0]<<24),s=s+24|0,f[i+8>>2]=s,f[i+12>>2]=a+3,g=g<<24|(b>>>8&65280|(b<<8&16711680|b<<24))>>>8,f[i>>2]=g;break t}Fi(i),g=f[i>>2],s=f[i+8>>2]}a=J(P,159)>>>8|0;t:{if(g>>>s>>>0>a>>>0){f[i>>2]=((a^-1)<<s)+g,g=P-a|0,a=6;break t}g=a+1|0,a=5}return x=s,s=Ri(g)^24,f[i+8>>2]=x-s,f[i+4>>2]=(g<<s)+-1,a}t:{if((s|0)>-1)break t;if(a=f[i+12>>2],a>>>0<ii[i+20>>2]){b=L[a|0]|L[a+1|0]<<8|(L[a+2|0]<<16|L[a+3|0]<<24),s=s+24|0,f[i+8>>2]=s,f[i+12>>2]=a+3,g=g<<24|(b>>>8&65280|(b<<8&16711680|b<<24))>>>8,f[i>>2]=g;break t}Fi(i),g=f[i>>2],s=f[i+8>>2]}B=i,b=s,A=J(P,165)>>>8|0;t:{if(g>>>s>>>0>A>>>0){g=((A^-1)<<s)+g|0,f[i>>2]=g,x=9,A=P-A|0;break t}x=7,A=A+1|0}a=Ri(A)^24,s=b-a|0,f[B+8>>2]=s,P=(A<<a)+-1|0,f[i+4>>2]=P;t:{if((s|0)>-1)break t;if(a=f[i+12>>2],a>>>0<ii[i+20>>2]){b=L[a|0]|L[a+1|0]<<8|(L[a+2|0]<<16|L[a+3|0]<<24),s=s+24|0,f[i+8>>2]=s,f[i+12>>2]=a+3,g=g<<24|(b>>>8&65280|(b<<8&16711680|b<<24))>>>8,f[i>>2]=g;break t}Fi(i),g=f[i>>2],s=f[i+8>>2]}B=i,b=s,j=g>>>s|0,A=J(P,145)>>>8|0;t:{if(j>>>0>A>>>0){f[i>>2]=((A^-1)<<s)+g,s=P-A|0;break t}s=A+1|0}return a=Ri(s)^24,f[B+8>>2]=b-a,f[i+4>>2]=(s<<a)+-1,(j>>>0>A>>>0)+x|0}x=L[a+8|0];t:{if((s|0)>-1)break t;if(b=f[i+12>>2],b>>>0<ii[i+20>>2]){A=L[b|0]|L[b+1|0]<<8|(L[b+2|0]<<16|L[b+3|0]<<24),s=s+24|0,f[i+8>>2]=s,f[i+12>>2]=b+3,g=g<<24|(A>>>8&65280|(A<<8&16711680|A<<24))>>>8,f[i>>2]=g;break t}Fi(i),g=f[i>>2],s=f[i+8>>2]}A=i,B=s,Z=g>>>s|0,j=J(x,P)>>>8|0;t:{if(Z>>>0>j>>>0){g=((j^-1)<<s)+g|0,f[i>>2]=g,ne=10,x=P-j|0;break t}ne=9,x=j+1|0}b=Ri(x)^24,s=B-b|0,f[A+8>>2]=s,x=(x<<b)+-1|0,f[i+4>>2]=x,A=L[a+ne|0];t:{if((s|0)>-1)break t;if(a=f[i+12>>2],a>>>0<ii[i+20>>2]){b=L[a|0]|L[a+1|0]<<8|(L[a+2|0]<<16|L[a+3|0]<<24),s=s+24|0,f[i+8>>2]=s,f[i+12>>2]=a+3,g=g<<24|(b>>>8&65280|(b<<8&16711680|b<<24))>>>8,f[i>>2]=g;break t}Fi(i),g=f[i>>2],s=f[i+8>>2]}B=i,b=s,P=g>>>s|0,A=J(A,x)>>>8|0;t:{if(P>>>0>A>>>0){g=((A^-1)<<s)+g|0,f[i>>2]=g,x=x-A|0;break t}x=A+1|0}a=Ri(x)^24,s=b-a|0,f[B+8>>2]=s,x=(x<<a)+-1|0,f[i+4>>2]=x,ne=(Z>>>0>j>>>0)<<1|P>>>0>A>>>0,A=f[(ne<<2)+10160>>2],a=L[A|0];t:{if(!a){P=0;break t}for(P=0;;){j=a&255;r:{if((s|0)>-1)break r;if(a=f[i+12>>2],a>>>0<ii[i+20>>2]){b=L[a|0]|L[a+1|0]<<8|(L[a+2|0]<<16|L[a+3|0]<<24),s=s+24|0,f[i+8>>2]=s,f[i+12>>2]=a+3,g=g<<24|(b>>>8&65280|(b<<8&16711680|b<<24))>>>8,f[i>>2]=g;break r}Fi(i),g=f[i>>2],s=f[i+8>>2]}B=i,b=s,Z=g>>>s|0,j=J(x,j)>>>8|0;r:{if(Z>>>0>j>>>0){g=((j^-1)<<s)+g|0,f[i>>2]=g,x=x-j|0;break r}x=j+1|0}if(a=Ri(x)^24,s=b-a|0,f[B+8>>2]=s,x=(x<<a)+-1|0,f[i+4>>2]=x,P=P<<1|Z>>>0>j>>>0,a=L[A+1|0],A=A+1|0,!a)break}}x=(8<<ne|3)+P|0}return x}function te(i){i=i|0,m[i|0]=-2139062144,m[i+1|0]=8421504,m[i+2|0]=32896,m[i+3|0]=128,m[i+4|0]=-2139062144,m[i+5|0]=8421504,m[i+6|0]=32896,m[i+7|0]=128,m[i+32|0]=-2139062144,m[i+33|0]=8421504,m[i+34|0]=32896,m[i+35|0]=128,m[i+36|0]=-2139062144,m[i+37|0]=8421504,m[i+38|0]=32896,m[i+39|0]=128,m[i+64|0]=-2139062144,m[i+65|0]=8421504,m[i+66|0]=32896,m[i+67|0]=128,m[i+68|0]=-2139062144,m[i+69|0]=8421504,m[i+70|0]=32896,m[i+71|0]=128,m[i+96|0]=-2139062144,m[i+97|0]=8421504,m[i+98|0]=32896,m[i+99|0]=128,m[i+100|0]=-2139062144,m[i+101|0]=8421504,m[i+102|0]=32896,m[i+103|0]=128,m[i+128|0]=-2139062144,m[i+129|0]=8421504,m[i+130|0]=32896,m[i+131|0]=128,m[i+132|0]=-2139062144,m[i+133|0]=8421504,m[i+134|0]=32896,m[i+135|0]=128,m[i+160|0]=-2139062144,m[i+161|0]=8421504,m[i+162|0]=32896,m[i+163|0]=128,m[i+164|0]=-2139062144,m[i+165|0]=8421504,m[i+166|0]=32896,m[i+167|0]=128,m[i+192|0]=-2139062144,m[i+193|0]=8421504,m[i+194|0]=32896,m[i+195|0]=128,m[i+196|0]=-2139062144,m[i+197|0]=8421504,m[i+198|0]=32896,m[i+199|0]=128,m[i+224|0]=-2139062144,m[i+225|0]=8421504,m[i+226|0]=32896,m[i+227|0]=128,m[i+228|0]=-2139062144,m[i+229|0]=8421504,m[i+230|0]=32896,m[i+231|0]=128,m[i+256|0]=-2139062144,m[i+257|0]=8421504,m[i+258|0]=32896,m[i+259|0]=128,m[i+260|0]=-2139062144,m[i+261|0]=8421504,m[i+262|0]=32896,m[i+263|0]=128,m[i+8|0]=-2139062144,m[i+9|0]=8421504,m[i+10|0]=32896,m[i+11|0]=128,m[i+12|0]=-2139062144,m[i+13|0]=8421504,m[i+14|0]=32896,m[i+15|0]=128,m[i+40|0]=-2139062144,m[i+41|0]=8421504,m[i+42|0]=32896,m[i+43|0]=128,m[i+44|0]=-2139062144,m[i+45|0]=8421504,m[i+46|0]=32896,m[i+47|0]=128,m[i+72|0]=-2139062144,m[i+73|0]=8421504,m[i+74|0]=32896,m[i+75|0]=128,m[i+76|0]=-2139062144,m[i+77|0]=8421504,m[i+78|0]=32896,m[i+79|0]=128,m[i+104|0]=-2139062144,m[i+105|0]=8421504,m[i+106|0]=32896,m[i+107|0]=128,m[i+108|0]=-2139062144,m[i+109|0]=8421504,m[i+110|0]=32896,m[i+111|0]=128,m[i+136|0]=-2139062144,m[i+137|0]=8421504,m[i+138|0]=32896,m[i+139|0]=128,m[i+140|0]=-2139062144,m[i+141|0]=8421504,m[i+142|0]=32896,m[i+143|0]=128,m[i+168|0]=-2139062144,m[i+169|0]=8421504,m[i+170|0]=32896,m[i+171|0]=128,m[i+172|0]=-2139062144,m[i+173|0]=8421504,m[i+174|0]=32896,m[i+175|0]=128,m[i+200|0]=-2139062144,m[i+201|0]=8421504,m[i+202|0]=32896,m[i+203|0]=128,m[i+204|0]=-2139062144,m[i+205|0]=8421504,m[i+206|0]=32896,m[i+207|0]=128,m[i+232|0]=-2139062144,m[i+233|0]=8421504,m[i+234|0]=32896,m[i+235|0]=128,m[i+236|0]=-2139062144,m[i+237|0]=8421504,m[i+238|0]=32896,m[i+239|0]=128,m[i+264|0]=-2139062144,m[i+265|0]=8421504,m[i+266|0]=32896,m[i+267|0]=128,m[i+268|0]=-2139062144,m[i+269|0]=8421504,m[i+270|0]=32896,m[i+271|0]=128,m[i+296|0]=-2139062144,m[i+297|0]=8421504,m[i+298|0]=32896,m[i+299|0]=128,m[i+300|0]=-2139062144,m[i+301|0]=8421504,m[i+302|0]=32896,m[i+303|0]=128,m[i+288|0]=-2139062144,m[i+289|0]=8421504,m[i+290|0]=32896,m[i+291|0]=128,m[i+292|0]=-2139062144,m[i+293|0]=8421504,m[i+294|0]=32896,m[i+295|0]=128,m[i+328|0]=-2139062144,m[i+329|0]=8421504,m[i+330|0]=32896,m[i+331|0]=128,m[i+332|0]=-2139062144,m[i+333|0]=8421504,m[i+334|0]=32896,m[i+335|0]=128,m[i+320|0]=-2139062144,m[i+321|0]=8421504,m[i+322|0]=32896,m[i+323|0]=128,m[i+324|0]=-2139062144,m[i+325|0]=8421504,m[i+326|0]=32896,m[i+327|0]=128,m[i+360|0]=-2139062144,m[i+361|0]=8421504,m[i+362|0]=32896,m[i+363|0]=128,m[i+364|0]=-2139062144,m[i+365|0]=8421504,m[i+366|0]=32896,m[i+367|0]=128,m[i+352|0]=-2139062144,m[i+353|0]=8421504,m[i+354|0]=32896,m[i+355|0]=128,m[i+356|0]=-2139062144,m[i+357|0]=8421504,m[i+358|0]=32896,m[i+359|0]=128,m[i+392|0]=-2139062144,m[i+393|0]=8421504,m[i+394|0]=32896,m[i+395|0]=128,m[i+396|0]=-2139062144,m[i+397|0]=8421504,m[i+398|0]=32896,m[i+399|0]=128,m[i+384|0]=-2139062144,m[i+385|0]=8421504,m[i+386|0]=32896,m[i+387|0]=128,m[i+388|0]=-2139062144,m[i+389|0]=8421504,m[i+390|0]=32896,m[i+391|0]=128,m[i+424|0]=-2139062144,m[i+425|0]=8421504,m[i+426|0]=32896,m[i+427|0]=128,m[i+428|0]=-2139062144,m[i+429|0]=8421504,m[i+430|0]=32896,m[i+431|0]=128,m[i+416|0]=-2139062144,m[i+417|0]=8421504,m[i+418|0]=32896,m[i+419|0]=128,m[i+420|0]=-2139062144,m[i+421|0]=8421504,m[i+422|0]=32896,m[i+423|0]=128,m[i+456|0]=-2139062144,m[i+457|0]=8421504,m[i+458|0]=32896,m[i+459|0]=128,m[i+460|0]=-2139062144,m[i+461|0]=8421504,m[i+462|0]=32896,m[i+463|0]=128,m[i+448|0]=-2139062144,m[i+449|0]=8421504,m[i+450|0]=32896,m[i+451|0]=128,m[i+452|0]=-2139062144,m[i+453|0]=8421504,m[i+454|0]=32896,m[i+455|0]=128,m[i+488|0]=-2139062144,m[i+489|0]=8421504,m[i+490|0]=32896,m[i+491|0]=128,m[i+492|0]=-2139062144,m[i+493|0]=8421504,m[i+494|0]=32896,m[i+495|0]=128,m[i+480|0]=-2139062144,m[i+481|0]=8421504,m[i+482|0]=32896,m[i+483|0]=128,m[i+484|0]=-2139062144,m[i+485|0]=8421504,m[i+486|0]=32896,m[i+487|0]=128}function Le(i){i=i|0;var a=0,s=0,g=0,b=0,x=0,A=0;a=i,x=a+-32|0,g=x,b=L[g+4|0]|L[g+5|0]<<8|(L[g+6|0]<<16|L[g+7|0]<<24),i=L[g|0]|L[g+1|0]<<8|(L[g+2|0]<<16|L[g+3|0]<<24),s=i,m[a|0]=s,m[a+1|0]=s>>>8,m[a+2|0]=s>>>16,m[a+3|0]=s>>>24,m[a+4|0]=b,m[a+5|0]=b>>>8,m[a+6|0]=b>>>16,m[a+7|0]=b>>>24,m[a+32|0]=s,m[a+33|0]=s>>>8,m[a+34|0]=s>>>16,m[a+35|0]=s>>>24,m[a+36|0]=b,m[a+37|0]=b>>>8,m[a+38|0]=b>>>16,m[a+39|0]=b>>>24,m[a+64|0]=s,m[a+65|0]=s>>>8,m[a+66|0]=s>>>16,m[a+67|0]=s>>>24,m[a+68|0]=b,m[a+69|0]=b>>>8,m[a+70|0]=b>>>16,m[a+71|0]=b>>>24,m[a+96|0]=s,m[a+97|0]=s>>>8,m[a+98|0]=s>>>16,m[a+99|0]=s>>>24,m[a+100|0]=b,m[a+101|0]=b>>>8,m[a+102|0]=b>>>16,m[a+103|0]=b>>>24,m[a+128|0]=s,m[a+129|0]=s>>>8,m[a+130|0]=s>>>16,m[a+131|0]=s>>>24,m[a+132|0]=b,m[a+133|0]=b>>>8,m[a+134|0]=b>>>16,m[a+135|0]=b>>>24,m[a+160|0]=s,m[a+161|0]=s>>>8,m[a+162|0]=s>>>16,m[a+163|0]=s>>>24,m[a+164|0]=b,m[a+165|0]=b>>>8,m[a+166|0]=b>>>16,m[a+167|0]=b>>>24,m[a+192|0]=s,m[a+193|0]=s>>>8,m[a+194|0]=s>>>16,m[a+195|0]=s>>>24,m[a+196|0]=b,m[a+197|0]=b>>>8,m[a+198|0]=b>>>16,m[a+199|0]=b>>>24,m[a+224|0]=s,m[a+225|0]=s>>>8,m[a+226|0]=s>>>16,m[a+227|0]=s>>>24,m[a+228|0]=b,m[a+229|0]=b>>>8,m[a+230|0]=b>>>16,m[a+231|0]=b>>>24,b=g+8|0,g=L[b+4|0]|L[b+5|0]<<8|(L[b+6|0]<<16|L[b+7|0]<<24),i=L[b|0]|L[b+1|0]<<8|(L[b+2|0]<<16|L[b+3|0]<<24),s=i,m[a+8|0]=s,m[a+9|0]=s>>>8,m[a+10|0]=s>>>16,m[a+11|0]=s>>>24,m[a+12|0]=g,m[a+13|0]=g>>>8,m[a+14|0]=g>>>16,m[a+15|0]=g>>>24,m[a+40|0]=s,m[a+41|0]=s>>>8,m[a+42|0]=s>>>16,m[a+43|0]=s>>>24,m[a+44|0]=g,m[a+45|0]=g>>>8,m[a+46|0]=g>>>16,m[a+47|0]=g>>>24,m[a+72|0]=s,m[a+73|0]=s>>>8,m[a+74|0]=s>>>16,m[a+75|0]=s>>>24,m[a+76|0]=g,m[a+77|0]=g>>>8,m[a+78|0]=g>>>16,m[a+79|0]=g>>>24,m[a+104|0]=s,m[a+105|0]=s>>>8,m[a+106|0]=s>>>16,m[a+107|0]=s>>>24,m[a+108|0]=g,m[a+109|0]=g>>>8,m[a+110|0]=g>>>16,m[a+111|0]=g>>>24,m[a+136|0]=s,m[a+137|0]=s>>>8,m[a+138|0]=s>>>16,m[a+139|0]=s>>>24,m[a+140|0]=g,m[a+141|0]=g>>>8,m[a+142|0]=g>>>16,m[a+143|0]=g>>>24,m[a+168|0]=s,m[a+169|0]=s>>>8,m[a+170|0]=s>>>16,m[a+171|0]=s>>>24,m[a+172|0]=g,m[a+173|0]=g>>>8,m[a+174|0]=g>>>16,m[a+175|0]=g>>>24,m[a+200|0]=s,m[a+201|0]=s>>>8,m[a+202|0]=s>>>16,m[a+203|0]=s>>>24,m[a+204|0]=g,m[a+205|0]=g>>>8,m[a+206|0]=g>>>16,m[a+207|0]=g>>>24,m[a+232|0]=s,m[a+233|0]=s>>>8,m[a+234|0]=s>>>16,m[a+235|0]=s>>>24,m[a+236|0]=g,m[a+237|0]=g>>>8,m[a+238|0]=g>>>16,m[a+239|0]=g>>>24,g=L[b+4|0]|L[b+5|0]<<8|(L[b+6|0]<<16|L[b+7|0]<<24),A=g,s=L[b|0]|L[b+1|0]<<8|(L[b+2|0]<<16|L[b+3|0]<<24),m[a+264|0]=s,m[a+265|0]=s>>>8,m[a+266|0]=s>>>16,m[a+267|0]=s>>>24,m[a+268|0]=g,m[a+269|0]=g>>>8,m[a+270|0]=g>>>16,m[a+271|0]=g>>>24,g=L[x+4|0]|L[x+5|0]<<8|(L[x+6|0]<<16|L[x+7|0]<<24),i=L[x|0]|L[x+1|0]<<8|(L[x+2|0]<<16|L[x+3|0]<<24),x=i,m[a+256|0]=x,m[a+257|0]=x>>>8,m[a+258|0]=x>>>16,m[a+259|0]=x>>>24,m[a+260|0]=g,m[a+261|0]=g>>>8,m[a+262|0]=g>>>16,m[a+263|0]=g>>>24,m[a+296|0]=s,m[a+297|0]=s>>>8,m[a+298|0]=s>>>16,m[a+299|0]=s>>>24,m[a+300|0]=A,m[a+301|0]=A>>>8,m[a+302|0]=A>>>16,m[a+303|0]=A>>>24,m[a+288|0]=x,m[a+289|0]=x>>>8,m[a+290|0]=x>>>16,m[a+291|0]=x>>>24,m[a+292|0]=g,m[a+293|0]=g>>>8,m[a+294|0]=g>>>16,m[a+295|0]=g>>>24,m[a+328|0]=s,m[a+329|0]=s>>>8,m[a+330|0]=s>>>16,m[a+331|0]=s>>>24,m[a+332|0]=A,m[a+333|0]=A>>>8,m[a+334|0]=A>>>16,m[a+335|0]=A>>>24,m[a+320|0]=x,m[a+321|0]=x>>>8,m[a+322|0]=x>>>16,m[a+323|0]=x>>>24,m[a+324|0]=g,m[a+325|0]=g>>>8,m[a+326|0]=g>>>16,m[a+327|0]=g>>>24,m[a+360|0]=s,m[a+361|0]=s>>>8,m[a+362|0]=s>>>16,m[a+363|0]=s>>>24,m[a+364|0]=A,m[a+365|0]=A>>>8,m[a+366|0]=A>>>16,m[a+367|0]=A>>>24,m[a+352|0]=x,m[a+353|0]=x>>>8,m[a+354|0]=x>>>16,m[a+355|0]=x>>>24,m[a+356|0]=g,m[a+357|0]=g>>>8,m[a+358|0]=g>>>16,m[a+359|0]=g>>>24,m[a+384|0]=x,m[a+385|0]=x>>>8,m[a+386|0]=x>>>16,m[a+387|0]=x>>>24,m[a+388|0]=g,m[a+389|0]=g>>>8,m[a+390|0]=g>>>16,m[a+391|0]=g>>>24,m[a+392|0]=s,m[a+393|0]=s>>>8,m[a+394|0]=s>>>16,m[a+395|0]=s>>>24,m[a+396|0]=A,m[a+397|0]=A>>>8,m[a+398|0]=A>>>16,m[a+399|0]=A>>>24,m[a+424|0]=s,m[a+425|0]=s>>>8,m[a+426|0]=s>>>16,m[a+427|0]=s>>>24,m[a+428|0]=A,m[a+429|0]=A>>>8,m[a+430|0]=A>>>16,m[a+431|0]=A>>>24,m[a+416|0]=x,m[a+417|0]=x>>>8,m[a+418|0]=x>>>16,m[a+419|0]=x>>>24,m[a+420|0]=g,m[a+421|0]=g>>>8,m[a+422|0]=g>>>16,m[a+423|0]=g>>>24,m[a+448|0]=x,m[a+449|0]=x>>>8,m[a+450|0]=x>>>16,m[a+451|0]=x>>>24,m[a+452|0]=g,m[a+453|0]=g>>>8,m[a+454|0]=g>>>16,m[a+455|0]=g>>>24,m[a+456|0]=s,m[a+457|0]=s>>>8,m[a+458|0]=s>>>16,m[a+459|0]=s>>>24,m[a+460|0]=A,m[a+461|0]=A>>>8,m[a+462|0]=A>>>16,m[a+463|0]=A>>>24,m[a+488|0]=s,m[a+489|0]=s>>>8,m[a+490|0]=s>>>16,m[a+491|0]=s>>>24,m[a+492|0]=A,m[a+493|0]=A>>>8,m[a+494|0]=A>>>16,m[a+495|0]=A>>>24,m[a+480|0]=x,m[a+481|0]=x>>>8,m[a+482|0]=x>>>16,m[a+483|0]=x>>>24,m[a+484|0]=g,m[a+485|0]=g>>>8,m[a+486|0]=g>>>16,m[a+487|0]=g>>>24}function pt(i,a,s,g,b){var x=0,A=0,P=0,j=0,B=0,Z=0,ne=0,me=0,Ce=0,Be=0,at=0,kt=0,It=0,Qt=0,lr=0;x=jn-80|0,jn=x,f[x+76>>2]=a,lr=x+55|0,kt=x+56|0,a=0;e:{t:for(;;){r:{if((Ce|0)<0)break r;if((a|0)>(2147483647-Ce|0)){f[2865]=61,Ce=-1;break r}Ce=a+Ce|0}r:{n:{o:{if(j=f[x+76>>2],a=j,A=L[a|0],A)for(;;){l:{A=A&255;i:{if(!A){A=a;break i}if((A|0)!=37)break l;for(A=a;;){if(L[a+1|0]!=37)break i;if(P=a+2|0,f[x+76>>2]=P,A=A+1|0,B=L[a+2|0],a=P,(B|0)!=37)break}}if(a=A-j|0,i&&mf(i,j,a),a)continue t;A=x,P=!qf(m[f[x+76>>2]+1|0]),a=f[x+76>>2];i:{if(!(P|L[a+2|0]!=36)){at=m[a+1|0]+-48|0,It=1,a=a+3|0;break i}at=-1,a=a+1|0}f[A+76>>2]=a,Z=0,Be=m[a|0],P=Be+-32|0;i:{if(P>>>0>31){A=a;break i}if(A=a,P=1<<P,!(P&75913))break i;for(;;){if(A=a+1|0,f[x+76>>2]=A,Z=P|Z,Be=m[a+1|0],P=Be+-32|0,P>>>0>=32)break i;if(a=A,P=1<<P,!(P&75913))break}}i:{if((Be|0)==42){P=x;u:{a:{if(!qf(m[A+1|0])||(a=f[x+76>>2],L[a+2|0]!=36))break a;f[((m[a+1|0]<<2)+b|0)+-192>>2]=10,ne=f[((m[a+1|0]<<3)+g|0)+-384>>2],It=1,a=a+3|0;break u}if(It)break o;It=0,ne=0,i&&(a=f[s>>2],f[s>>2]=a+4,ne=f[a>>2]),a=f[x+76>>2]+1|0}if(f[P+76>>2]=a,(ne|0)>-1)break i;ne=0-ne|0,Z=Z|8192;break i}if(ne=Ja(x+76|0),(ne|0)<0)break o;a=f[x+76>>2]}B=-1;i:{if(L[a|0]!=46)break i;if(L[a+1|0]==42){u:{if(!qf(m[a+2|0])||(a=f[x+76>>2],L[a+3|0]!=36))break u;f[((m[a+2|0]<<2)+b|0)+-192>>2]=10,B=f[((m[a+2|0]<<3)+g|0)+-384>>2],a=a+4|0,f[x+76>>2]=a;break i}if(It)break o;i?(a=f[s>>2],f[s>>2]=a+4,B=f[a>>2]):B=0,a=f[x+76>>2]+2|0,f[x+76>>2]=a;break i}f[x+76>>2]=a+1,B=Ja(x+76|0),a=f[x+76>>2]}for(A=0;;){if(Qt=A,me=-1,m[a|0]+-65>>>0>57)break e;if(Be=a+1|0,f[x+76>>2]=Be,A=m[a|0],a=Be,A=L[(A+J(Qt,58)|0)+9599|0],!(A+-1>>>0<8))break}i:{u:{if((A|0)!=19){if(!A)break e;if((at|0)>=0){f[(at<<2)+b>>2]=A,a=(at<<3)+g|0,A=f[a+4>>2],f[x+64>>2]=f[a>>2],f[x+68>>2]=A;break u}if(!i)break r;Ql(x- -64|0,A,s),Be=f[x+76>>2];break i}if((at|0)>-1)break e}if(a=0,!i)continue t}P=Z&-65537,A=Z&8192?P:Z,me=0,at=9644,Z=kt;i:{u:{a:{s:{h:{c:{f:{p:{d:{m:{v:{_:{b:{g:{w:{y:switch(a=m[Be+-1|0],a=Qt&&(a&15)==3?a&-33:a,a+-88|0){case 11:break i;case 9:case 13:case 14:case 15:break u;case 27:break f;case 12:case 17:break m;case 23:break v;case 0:case 32:break _;case 24:break b;case 22:break g;case 29:break w;case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 10:case 16:case 18:case 19:case 20:case 21:case 25:case 26:case 28:case 30:case 31:break n;default:break y}y:switch(a+-65|0){case 0:case 4:case 5:case 6:break u;case 2:break h;case 1:case 3:break n;default:break y}if((a|0)==83)break c;break n}a=f[x+64>>2],j=f[x+68>>2],at=9644;break d}a=0;g:switch(Qt&255){case 0:f[f[x+64>>2]>>2]=Ce;continue t;case 1:f[f[x+64>>2]>>2]=Ce;continue t;case 2:A=f[x+64>>2],f[A>>2]=Ce,f[A+4>>2]=Ce>>31;continue t;case 3:Pr[f[x+64>>2]>>1]=Ce;continue t;case 4:m[f[x+64>>2]]=Ce;continue t;case 6:f[f[x+64>>2]>>2]=Ce;continue t;case 7:break g;default:continue t}A=f[x+64>>2],f[A>>2]=Ce,f[A+4>>2]=Ce>>31;continue t}B=B>>>0>8?B:8,A=A|8,a=120}if(j=i0(f[x+64>>2],f[x+68>>2],kt,a&32),!(A&8)|!(f[x+64>>2]|f[x+68>>2]))break p;at=(a>>>4|0)+9644|0,me=2;break p}if(j=nr(f[x+64>>2],f[x+68>>2],kt),!(A&8))break p;a=kt-j|0,B=(B|0)>(a|0)?B:a+1|0;break p}if(P=f[x+68>>2],j=P,a=f[x+64>>2],(P|0)<-1||(P|0)<=-1){j=0-(j+(0<a>>>0)|0)|0,a=0-a|0,f[x+64>>2]=a,f[x+68>>2]=j,me=1,at=9644;break d}if(A&2048){me=1,at=9645;break d}me=A&1,at=me?9646:9644}j=Hr(a,j,kt)}if(A=(B|0)>-1?A&-65537:A,a=f[x+64>>2],P=f[x+68>>2],!(!!(a|P)|B)){B=0,j=kt;break n}a=!(a|P)+(kt-j|0)|0,B=(B|0)>(a|0)?B:a;break n}a=f[x+64>>2],j=a||9654,a=Ar(j,B),Z=a||B+j|0,A=P,B=a?a-j|0:B;break n}if(P=f[x+64>>2],B)break s;a=0,Ho(i,32,ne,0,A);break a}f[x+12>>2]=0,f[x+8>>2]=f[x+64>>2],f[x+64>>2]=x+8,B=-1,P=x+8|0}a=0;s:{for(;;){if(j=f[P>>2],!j)break s;if(j=Dd(x+4|0,j),Z=(j|0)<0,!(Z|j>>>0>B-a>>>0)){if(P=P+4|0,a=a+j|0,B>>>0>a>>>0)continue;break s}break}if(me=-1,Z)break e}if(Ho(i,32,ne,a,A),!a){a=0;break a}for(Be=0,P=f[x+64>>2];;){if(j=f[P>>2],!j||(j=Dd(x+4|0,j),Be=j+Be|0,(Be|0)>(a|0)))break a;if(mf(i,x+4|0,j),P=P+4|0,!(Be>>>0<a>>>0))break}}Ho(i,32,ne,a,A^8192),a=(ne|0)>(a|0)?ne:a;continue t}a=et[0](i,To[x+64>>3],ne,B,A,a)|0;continue t}m[x+55|0]=f[x+64>>2],B=1,j=lr,A=P;break n}P=a+1|0,f[x+76>>2]=P,A=L[a+1|0],a=P}if(me=Ce,i)break e;if(!It)break r;for(a=1;;){if(i=f[(a<<2)+b>>2],i){if(Ql((a<<3)+g|0,i,s),me=1,a=a+1|0,(a|0)!=10)continue;break e}break}if(me=1,a>>>0>=10)break e;for(;;){if(f[(a<<2)+b>>2])break o;if(a=a+1|0,(a|0)==10)break}break e}me=-1;break e}Z=Z-j|0,B=(B|0)<(Z|0)?Z:B,P=B+me|0,a=(ne|0)<(P|0)?P:ne,Ho(i,32,a,P,A),mf(i,at,me),Ho(i,48,a,P,A^65536),Ho(i,48,B,Z,0),mf(i,j,Z),Ho(i,32,a,P,A^8192);continue}break}me=0}return jn=x+80|0,me}function Bt(i){i=i|0;var a=0,s=0;a=i,i=Ei((L[a+-17|0]+(L[a+-18|0]+(L[a+-19|0]+(L[a+-20|0]+(L[a+-21|0]+(L[a+-22|0]+(L[a+-23|0]+(L[a+-24|0]+(L[a+-25|0]+(L[a+-26|0]+(L[a+-27|0]+(L[a+-28|0]+(L[a+-29|0]+(L[a+-30|0]+(L[a+-32|0]+L[a+-31|0]|0)|0)|0)|0)|0)|0)|0)|0)|0)|0)|0)|0)|0)|0)|0)+8>>>4&255,0,16843009,16843009),m[a|0]=i,m[a+1|0]=i>>>8,m[a+2|0]=i>>>16,m[a+3|0]=i>>>24,s=Fn,m[a+4|0]=s,m[a+5|0]=s>>>8,m[a+6|0]=s>>>16,m[a+7|0]=s>>>24,m[a+8|0]=i,m[a+9|0]=i>>>8,m[a+10|0]=i>>>16,m[a+11|0]=i>>>24,m[a+12|0]=s,m[a+13|0]=s>>>8,m[a+14|0]=s>>>16,m[a+15|0]=s>>>24,m[a+40|0]=i,m[a+41|0]=i>>>8,m[a+42|0]=i>>>16,m[a+43|0]=i>>>24,m[a+44|0]=s,m[a+45|0]=s>>>8,m[a+46|0]=s>>>16,m[a+47|0]=s>>>24,m[a+32|0]=i,m[a+33|0]=i>>>8,m[a+34|0]=i>>>16,m[a+35|0]=i>>>24,m[a+36|0]=s,m[a+37|0]=s>>>8,m[a+38|0]=s>>>16,m[a+39|0]=s>>>24,m[a+72|0]=i,m[a+73|0]=i>>>8,m[a+74|0]=i>>>16,m[a+75|0]=i>>>24,m[a+76|0]=s,m[a+77|0]=s>>>8,m[a+78|0]=s>>>16,m[a+79|0]=s>>>24,m[a+64|0]=i,m[a+65|0]=i>>>8,m[a+66|0]=i>>>16,m[a+67|0]=i>>>24,m[a+68|0]=s,m[a+69|0]=s>>>8,m[a+70|0]=s>>>16,m[a+71|0]=s>>>24,m[a+104|0]=i,m[a+105|0]=i>>>8,m[a+106|0]=i>>>16,m[a+107|0]=i>>>24,m[a+108|0]=s,m[a+109|0]=s>>>8,m[a+110|0]=s>>>16,m[a+111|0]=s>>>24,m[a+96|0]=i,m[a+97|0]=i>>>8,m[a+98|0]=i>>>16,m[a+99|0]=i>>>24,m[a+100|0]=s,m[a+101|0]=s>>>8,m[a+102|0]=s>>>16,m[a+103|0]=s>>>24,m[a+136|0]=i,m[a+137|0]=i>>>8,m[a+138|0]=i>>>16,m[a+139|0]=i>>>24,m[a+140|0]=s,m[a+141|0]=s>>>8,m[a+142|0]=s>>>16,m[a+143|0]=s>>>24,m[a+128|0]=i,m[a+129|0]=i>>>8,m[a+130|0]=i>>>16,m[a+131|0]=i>>>24,m[a+132|0]=s,m[a+133|0]=s>>>8,m[a+134|0]=s>>>16,m[a+135|0]=s>>>24,m[a+168|0]=i,m[a+169|0]=i>>>8,m[a+170|0]=i>>>16,m[a+171|0]=i>>>24,m[a+172|0]=s,m[a+173|0]=s>>>8,m[a+174|0]=s>>>16,m[a+175|0]=s>>>24,m[a+160|0]=i,m[a+161|0]=i>>>8,m[a+162|0]=i>>>16,m[a+163|0]=i>>>24,m[a+164|0]=s,m[a+165|0]=s>>>8,m[a+166|0]=s>>>16,m[a+167|0]=s>>>24,m[a+200|0]=i,m[a+201|0]=i>>>8,m[a+202|0]=i>>>16,m[a+203|0]=i>>>24,m[a+204|0]=s,m[a+205|0]=s>>>8,m[a+206|0]=s>>>16,m[a+207|0]=s>>>24,m[a+192|0]=i,m[a+193|0]=i>>>8,m[a+194|0]=i>>>16,m[a+195|0]=i>>>24,m[a+196|0]=s,m[a+197|0]=s>>>8,m[a+198|0]=s>>>16,m[a+199|0]=s>>>24,m[a+232|0]=i,m[a+233|0]=i>>>8,m[a+234|0]=i>>>16,m[a+235|0]=i>>>24,m[a+236|0]=s,m[a+237|0]=s>>>8,m[a+238|0]=s>>>16,m[a+239|0]=s>>>24,m[a+224|0]=i,m[a+225|0]=i>>>8,m[a+226|0]=i>>>16,m[a+227|0]=i>>>24,m[a+228|0]=s,m[a+229|0]=s>>>8,m[a+230|0]=s>>>16,m[a+231|0]=s>>>24,m[a+264|0]=i,m[a+265|0]=i>>>8,m[a+266|0]=i>>>16,m[a+267|0]=i>>>24,m[a+268|0]=s,m[a+269|0]=s>>>8,m[a+270|0]=s>>>16,m[a+271|0]=s>>>24,m[a+256|0]=i,m[a+257|0]=i>>>8,m[a+258|0]=i>>>16,m[a+259|0]=i>>>24,m[a+260|0]=s,m[a+261|0]=s>>>8,m[a+262|0]=s>>>16,m[a+263|0]=s>>>24,m[a+296|0]=i,m[a+297|0]=i>>>8,m[a+298|0]=i>>>16,m[a+299|0]=i>>>24,m[a+300|0]=s,m[a+301|0]=s>>>8,m[a+302|0]=s>>>16,m[a+303|0]=s>>>24,m[a+288|0]=i,m[a+289|0]=i>>>8,m[a+290|0]=i>>>16,m[a+291|0]=i>>>24,m[a+292|0]=s,m[a+293|0]=s>>>8,m[a+294|0]=s>>>16,m[a+295|0]=s>>>24,m[a+328|0]=i,m[a+329|0]=i>>>8,m[a+330|0]=i>>>16,m[a+331|0]=i>>>24,m[a+332|0]=s,m[a+333|0]=s>>>8,m[a+334|0]=s>>>16,m[a+335|0]=s>>>24,m[a+320|0]=i,m[a+321|0]=i>>>8,m[a+322|0]=i>>>16,m[a+323|0]=i>>>24,m[a+324|0]=s,m[a+325|0]=s>>>8,m[a+326|0]=s>>>16,m[a+327|0]=s>>>24,m[a+360|0]=i,m[a+361|0]=i>>>8,m[a+362|0]=i>>>16,m[a+363|0]=i>>>24,m[a+364|0]=s,m[a+365|0]=s>>>8,m[a+366|0]=s>>>16,m[a+367|0]=s>>>24,m[a+352|0]=i,m[a+353|0]=i>>>8,m[a+354|0]=i>>>16,m[a+355|0]=i>>>24,m[a+356|0]=s,m[a+357|0]=s>>>8,m[a+358|0]=s>>>16,m[a+359|0]=s>>>24,m[a+392|0]=i,m[a+393|0]=i>>>8,m[a+394|0]=i>>>16,m[a+395|0]=i>>>24,m[a+396|0]=s,m[a+397|0]=s>>>8,m[a+398|0]=s>>>16,m[a+399|0]=s>>>24,m[a+384|0]=i,m[a+385|0]=i>>>8,m[a+386|0]=i>>>16,m[a+387|0]=i>>>24,m[a+388|0]=s,m[a+389|0]=s>>>8,m[a+390|0]=s>>>16,m[a+391|0]=s>>>24,m[a+424|0]=i,m[a+425|0]=i>>>8,m[a+426|0]=i>>>16,m[a+427|0]=i>>>24,m[a+428|0]=s,m[a+429|0]=s>>>8,m[a+430|0]=s>>>16,m[a+431|0]=s>>>24,m[a+416|0]=i,m[a+417|0]=i>>>8,m[a+418|0]=i>>>16,m[a+419|0]=i>>>24,m[a+420|0]=s,m[a+421|0]=s>>>8,m[a+422|0]=s>>>16,m[a+423|0]=s>>>24,m[a+456|0]=i,m[a+457|0]=i>>>8,m[a+458|0]=i>>>16,m[a+459|0]=i>>>24,m[a+460|0]=s,m[a+461|0]=s>>>8,m[a+462|0]=s>>>16,m[a+463|0]=s>>>24,m[a+448|0]=i,m[a+449|0]=i>>>8,m[a+450|0]=i>>>16,m[a+451|0]=i>>>24,m[a+452|0]=s,m[a+453|0]=s>>>8,m[a+454|0]=s>>>16,m[a+455|0]=s>>>24,m[a+488|0]=i,m[a+489|0]=i>>>8,m[a+490|0]=i>>>16,m[a+491|0]=i>>>24,m[a+492|0]=s,m[a+493|0]=s>>>8,m[a+494|0]=s>>>16,m[a+495|0]=s>>>24,m[a+480|0]=i,m[a+481|0]=i>>>8,m[a+482|0]=i>>>16,m[a+483|0]=i>>>24,m[a+484|0]=s,m[a+485|0]=s>>>8,m[a+486|0]=s>>>16,m[a+487|0]=s>>>24}function ur(i){i=i|0;var a=0,s=0;a=i,i=Ei((L[a+479|0]+(L[a+447|0]+(L[a+415|0]+(L[a+383|0]+(L[a+351|0]+(L[a+319|0]+(L[a+287|0]+(L[a+255|0]+(L[a+223|0]+(L[a+191|0]+(L[a+159|0]+(L[a+127|0]+(L[a+95|0]+(L[a+63|0]+(L[a+-1|0]+L[a+31|0]|0)|0)|0)|0)|0)|0)|0)|0)|0)|0)|0)|0)|0)|0)|0)+8>>>4&255,0,16843009,16843009),m[a|0]=i,m[a+1|0]=i>>>8,m[a+2|0]=i>>>16,m[a+3|0]=i>>>24,s=Fn,m[a+4|0]=s,m[a+5|0]=s>>>8,m[a+6|0]=s>>>16,m[a+7|0]=s>>>24,m[a+8|0]=i,m[a+9|0]=i>>>8,m[a+10|0]=i>>>16,m[a+11|0]=i>>>24,m[a+12|0]=s,m[a+13|0]=s>>>8,m[a+14|0]=s>>>16,m[a+15|0]=s>>>24,m[a+40|0]=i,m[a+41|0]=i>>>8,m[a+42|0]=i>>>16,m[a+43|0]=i>>>24,m[a+44|0]=s,m[a+45|0]=s>>>8,m[a+46|0]=s>>>16,m[a+47|0]=s>>>24,m[a+32|0]=i,m[a+33|0]=i>>>8,m[a+34|0]=i>>>16,m[a+35|0]=i>>>24,m[a+36|0]=s,m[a+37|0]=s>>>8,m[a+38|0]=s>>>16,m[a+39|0]=s>>>24,m[a+72|0]=i,m[a+73|0]=i>>>8,m[a+74|0]=i>>>16,m[a+75|0]=i>>>24,m[a+76|0]=s,m[a+77|0]=s>>>8,m[a+78|0]=s>>>16,m[a+79|0]=s>>>24,m[a+64|0]=i,m[a+65|0]=i>>>8,m[a+66|0]=i>>>16,m[a+67|0]=i>>>24,m[a+68|0]=s,m[a+69|0]=s>>>8,m[a+70|0]=s>>>16,m[a+71|0]=s>>>24,m[a+104|0]=i,m[a+105|0]=i>>>8,m[a+106|0]=i>>>16,m[a+107|0]=i>>>24,m[a+108|0]=s,m[a+109|0]=s>>>8,m[a+110|0]=s>>>16,m[a+111|0]=s>>>24,m[a+96|0]=i,m[a+97|0]=i>>>8,m[a+98|0]=i>>>16,m[a+99|0]=i>>>24,m[a+100|0]=s,m[a+101|0]=s>>>8,m[a+102|0]=s>>>16,m[a+103|0]=s>>>24,m[a+136|0]=i,m[a+137|0]=i>>>8,m[a+138|0]=i>>>16,m[a+139|0]=i>>>24,m[a+140|0]=s,m[a+141|0]=s>>>8,m[a+142|0]=s>>>16,m[a+143|0]=s>>>24,m[a+128|0]=i,m[a+129|0]=i>>>8,m[a+130|0]=i>>>16,m[a+131|0]=i>>>24,m[a+132|0]=s,m[a+133|0]=s>>>8,m[a+134|0]=s>>>16,m[a+135|0]=s>>>24,m[a+168|0]=i,m[a+169|0]=i>>>8,m[a+170|0]=i>>>16,m[a+171|0]=i>>>24,m[a+172|0]=s,m[a+173|0]=s>>>8,m[a+174|0]=s>>>16,m[a+175|0]=s>>>24,m[a+160|0]=i,m[a+161|0]=i>>>8,m[a+162|0]=i>>>16,m[a+163|0]=i>>>24,m[a+164|0]=s,m[a+165|0]=s>>>8,m[a+166|0]=s>>>16,m[a+167|0]=s>>>24,m[a+200|0]=i,m[a+201|0]=i>>>8,m[a+202|0]=i>>>16,m[a+203|0]=i>>>24,m[a+204|0]=s,m[a+205|0]=s>>>8,m[a+206|0]=s>>>16,m[a+207|0]=s>>>24,m[a+192|0]=i,m[a+193|0]=i>>>8,m[a+194|0]=i>>>16,m[a+195|0]=i>>>24,m[a+196|0]=s,m[a+197|0]=s>>>8,m[a+198|0]=s>>>16,m[a+199|0]=s>>>24,m[a+232|0]=i,m[a+233|0]=i>>>8,m[a+234|0]=i>>>16,m[a+235|0]=i>>>24,m[a+236|0]=s,m[a+237|0]=s>>>8,m[a+238|0]=s>>>16,m[a+239|0]=s>>>24,m[a+224|0]=i,m[a+225|0]=i>>>8,m[a+226|0]=i>>>16,m[a+227|0]=i>>>24,m[a+228|0]=s,m[a+229|0]=s>>>8,m[a+230|0]=s>>>16,m[a+231|0]=s>>>24,m[a+264|0]=i,m[a+265|0]=i>>>8,m[a+266|0]=i>>>16,m[a+267|0]=i>>>24,m[a+268|0]=s,m[a+269|0]=s>>>8,m[a+270|0]=s>>>16,m[a+271|0]=s>>>24,m[a+256|0]=i,m[a+257|0]=i>>>8,m[a+258|0]=i>>>16,m[a+259|0]=i>>>24,m[a+260|0]=s,m[a+261|0]=s>>>8,m[a+262|0]=s>>>16,m[a+263|0]=s>>>24,m[a+296|0]=i,m[a+297|0]=i>>>8,m[a+298|0]=i>>>16,m[a+299|0]=i>>>24,m[a+300|0]=s,m[a+301|0]=s>>>8,m[a+302|0]=s>>>16,m[a+303|0]=s>>>24,m[a+288|0]=i,m[a+289|0]=i>>>8,m[a+290|0]=i>>>16,m[a+291|0]=i>>>24,m[a+292|0]=s,m[a+293|0]=s>>>8,m[a+294|0]=s>>>16,m[a+295|0]=s>>>24,m[a+328|0]=i,m[a+329|0]=i>>>8,m[a+330|0]=i>>>16,m[a+331|0]=i>>>24,m[a+332|0]=s,m[a+333|0]=s>>>8,m[a+334|0]=s>>>16,m[a+335|0]=s>>>24,m[a+320|0]=i,m[a+321|0]=i>>>8,m[a+322|0]=i>>>16,m[a+323|0]=i>>>24,m[a+324|0]=s,m[a+325|0]=s>>>8,m[a+326|0]=s>>>16,m[a+327|0]=s>>>24,m[a+360|0]=i,m[a+361|0]=i>>>8,m[a+362|0]=i>>>16,m[a+363|0]=i>>>24,m[a+364|0]=s,m[a+365|0]=s>>>8,m[a+366|0]=s>>>16,m[a+367|0]=s>>>24,m[a+352|0]=i,m[a+353|0]=i>>>8,m[a+354|0]=i>>>16,m[a+355|0]=i>>>24,m[a+356|0]=s,m[a+357|0]=s>>>8,m[a+358|0]=s>>>16,m[a+359|0]=s>>>24,m[a+392|0]=i,m[a+393|0]=i>>>8,m[a+394|0]=i>>>16,m[a+395|0]=i>>>24,m[a+396|0]=s,m[a+397|0]=s>>>8,m[a+398|0]=s>>>16,m[a+399|0]=s>>>24,m[a+384|0]=i,m[a+385|0]=i>>>8,m[a+386|0]=i>>>16,m[a+387|0]=i>>>24,m[a+388|0]=s,m[a+389|0]=s>>>8,m[a+390|0]=s>>>16,m[a+391|0]=s>>>24,m[a+424|0]=i,m[a+425|0]=i>>>8,m[a+426|0]=i>>>16,m[a+427|0]=i>>>24,m[a+428|0]=s,m[a+429|0]=s>>>8,m[a+430|0]=s>>>16,m[a+431|0]=s>>>24,m[a+416|0]=i,m[a+417|0]=i>>>8,m[a+418|0]=i>>>16,m[a+419|0]=i>>>24,m[a+420|0]=s,m[a+421|0]=s>>>8,m[a+422|0]=s>>>16,m[a+423|0]=s>>>24,m[a+456|0]=i,m[a+457|0]=i>>>8,m[a+458|0]=i>>>16,m[a+459|0]=i>>>24,m[a+460|0]=s,m[a+461|0]=s>>>8,m[a+462|0]=s>>>16,m[a+463|0]=s>>>24,m[a+448|0]=i,m[a+449|0]=i>>>8,m[a+450|0]=i>>>16,m[a+451|0]=i>>>24,m[a+452|0]=s,m[a+453|0]=s>>>8,m[a+454|0]=s>>>16,m[a+455|0]=s>>>24,m[a+488|0]=i,m[a+489|0]=i>>>8,m[a+490|0]=i>>>16,m[a+491|0]=i>>>24,m[a+492|0]=s,m[a+493|0]=s>>>8,m[a+494|0]=s>>>16,m[a+495|0]=s>>>24,m[a+480|0]=i,m[a+481|0]=i>>>8,m[a+482|0]=i>>>16,m[a+483|0]=i>>>24,m[a+484|0]=s,m[a+485|0]=s>>>8,m[a+486|0]=s>>>16,m[a+487|0]=s>>>24}function Xr(i){i=i|0;var a=0,s=0;for(s=16;s=L[(i+a|0)+-32|0]+(L[((a<<5)+i|0)+-1|0]+s|0)|0,a=a+1|0,(a|0)!=16;);a=i,i=Ei(s>>>5&255,0,16843009,16843009),s=i,m[a+8|0]=s,m[a+9|0]=s>>>8,m[a+10|0]=s>>>16,m[a+11|0]=s>>>24,i=Fn,m[a+12|0]=i,m[a+13|0]=i>>>8,m[a+14|0]=i>>>16,m[a+15|0]=i>>>24,m[a|0]=s,m[a+1|0]=s>>>8,m[a+2|0]=s>>>16,m[a+3|0]=s>>>24,m[a+4|0]=i,m[a+5|0]=i>>>8,m[a+6|0]=i>>>16,m[a+7|0]=i>>>24,m[a+32|0]=s,m[a+33|0]=s>>>8,m[a+34|0]=s>>>16,m[a+35|0]=s>>>24,m[a+36|0]=i,m[a+37|0]=i>>>8,m[a+38|0]=i>>>16,m[a+39|0]=i>>>24,m[a+40|0]=s,m[a+41|0]=s>>>8,m[a+42|0]=s>>>16,m[a+43|0]=s>>>24,m[a+44|0]=i,m[a+45|0]=i>>>8,m[a+46|0]=i>>>16,m[a+47|0]=i>>>24,m[a+64|0]=s,m[a+65|0]=s>>>8,m[a+66|0]=s>>>16,m[a+67|0]=s>>>24,m[a+68|0]=i,m[a+69|0]=i>>>8,m[a+70|0]=i>>>16,m[a+71|0]=i>>>24,m[a+72|0]=s,m[a+73|0]=s>>>8,m[a+74|0]=s>>>16,m[a+75|0]=s>>>24,m[a+76|0]=i,m[a+77|0]=i>>>8,m[a+78|0]=i>>>16,m[a+79|0]=i>>>24,m[a+96|0]=s,m[a+97|0]=s>>>8,m[a+98|0]=s>>>16,m[a+99|0]=s>>>24,m[a+100|0]=i,m[a+101|0]=i>>>8,m[a+102|0]=i>>>16,m[a+103|0]=i>>>24,m[a+104|0]=s,m[a+105|0]=s>>>8,m[a+106|0]=s>>>16,m[a+107|0]=s>>>24,m[a+108|0]=i,m[a+109|0]=i>>>8,m[a+110|0]=i>>>16,m[a+111|0]=i>>>24,m[a+128|0]=s,m[a+129|0]=s>>>8,m[a+130|0]=s>>>16,m[a+131|0]=s>>>24,m[a+132|0]=i,m[a+133|0]=i>>>8,m[a+134|0]=i>>>16,m[a+135|0]=i>>>24,m[a+136|0]=s,m[a+137|0]=s>>>8,m[a+138|0]=s>>>16,m[a+139|0]=s>>>24,m[a+140|0]=i,m[a+141|0]=i>>>8,m[a+142|0]=i>>>16,m[a+143|0]=i>>>24,m[a+160|0]=s,m[a+161|0]=s>>>8,m[a+162|0]=s>>>16,m[a+163|0]=s>>>24,m[a+164|0]=i,m[a+165|0]=i>>>8,m[a+166|0]=i>>>16,m[a+167|0]=i>>>24,m[a+168|0]=s,m[a+169|0]=s>>>8,m[a+170|0]=s>>>16,m[a+171|0]=s>>>24,m[a+172|0]=i,m[a+173|0]=i>>>8,m[a+174|0]=i>>>16,m[a+175|0]=i>>>24,m[a+192|0]=s,m[a+193|0]=s>>>8,m[a+194|0]=s>>>16,m[a+195|0]=s>>>24,m[a+196|0]=i,m[a+197|0]=i>>>8,m[a+198|0]=i>>>16,m[a+199|0]=i>>>24,m[a+200|0]=s,m[a+201|0]=s>>>8,m[a+202|0]=s>>>16,m[a+203|0]=s>>>24,m[a+204|0]=i,m[a+205|0]=i>>>8,m[a+206|0]=i>>>16,m[a+207|0]=i>>>24,m[a+232|0]=s,m[a+233|0]=s>>>8,m[a+234|0]=s>>>16,m[a+235|0]=s>>>24,m[a+236|0]=i,m[a+237|0]=i>>>8,m[a+238|0]=i>>>16,m[a+239|0]=i>>>24,m[a+224|0]=s,m[a+225|0]=s>>>8,m[a+226|0]=s>>>16,m[a+227|0]=s>>>24,m[a+228|0]=i,m[a+229|0]=i>>>8,m[a+230|0]=i>>>16,m[a+231|0]=i>>>24,m[a+264|0]=s,m[a+265|0]=s>>>8,m[a+266|0]=s>>>16,m[a+267|0]=s>>>24,m[a+268|0]=i,m[a+269|0]=i>>>8,m[a+270|0]=i>>>16,m[a+271|0]=i>>>24,m[a+256|0]=s,m[a+257|0]=s>>>8,m[a+258|0]=s>>>16,m[a+259|0]=s>>>24,m[a+260|0]=i,m[a+261|0]=i>>>8,m[a+262|0]=i>>>16,m[a+263|0]=i>>>24,m[a+296|0]=s,m[a+297|0]=s>>>8,m[a+298|0]=s>>>16,m[a+299|0]=s>>>24,m[a+300|0]=i,m[a+301|0]=i>>>8,m[a+302|0]=i>>>16,m[a+303|0]=i>>>24,m[a+288|0]=s,m[a+289|0]=s>>>8,m[a+290|0]=s>>>16,m[a+291|0]=s>>>24,m[a+292|0]=i,m[a+293|0]=i>>>8,m[a+294|0]=i>>>16,m[a+295|0]=i>>>24,m[a+328|0]=s,m[a+329|0]=s>>>8,m[a+330|0]=s>>>16,m[a+331|0]=s>>>24,m[a+332|0]=i,m[a+333|0]=i>>>8,m[a+334|0]=i>>>16,m[a+335|0]=i>>>24,m[a+320|0]=s,m[a+321|0]=s>>>8,m[a+322|0]=s>>>16,m[a+323|0]=s>>>24,m[a+324|0]=i,m[a+325|0]=i>>>8,m[a+326|0]=i>>>16,m[a+327|0]=i>>>24,m[a+360|0]=s,m[a+361|0]=s>>>8,m[a+362|0]=s>>>16,m[a+363|0]=s>>>24,m[a+364|0]=i,m[a+365|0]=i>>>8,m[a+366|0]=i>>>16,m[a+367|0]=i>>>24,m[a+352|0]=s,m[a+353|0]=s>>>8,m[a+354|0]=s>>>16,m[a+355|0]=s>>>24,m[a+356|0]=i,m[a+357|0]=i>>>8,m[a+358|0]=i>>>16,m[a+359|0]=i>>>24,m[a+392|0]=s,m[a+393|0]=s>>>8,m[a+394|0]=s>>>16,m[a+395|0]=s>>>24,m[a+396|0]=i,m[a+397|0]=i>>>8,m[a+398|0]=i>>>16,m[a+399|0]=i>>>24,m[a+384|0]=s,m[a+385|0]=s>>>8,m[a+386|0]=s>>>16,m[a+387|0]=s>>>24,m[a+388|0]=i,m[a+389|0]=i>>>8,m[a+390|0]=i>>>16,m[a+391|0]=i>>>24,m[a+424|0]=s,m[a+425|0]=s>>>8,m[a+426|0]=s>>>16,m[a+427|0]=s>>>24,m[a+428|0]=i,m[a+429|0]=i>>>8,m[a+430|0]=i>>>16,m[a+431|0]=i>>>24,m[a+416|0]=s,m[a+417|0]=s>>>8,m[a+418|0]=s>>>16,m[a+419|0]=s>>>24,m[a+420|0]=i,m[a+421|0]=i>>>8,m[a+422|0]=i>>>16,m[a+423|0]=i>>>24,m[a+456|0]=s,m[a+457|0]=s>>>8,m[a+458|0]=s>>>16,m[a+459|0]=s>>>24,m[a+460|0]=i,m[a+461|0]=i>>>8,m[a+462|0]=i>>>16,m[a+463|0]=i>>>24,m[a+448|0]=s,m[a+449|0]=s>>>8,m[a+450|0]=s>>>16,m[a+451|0]=s>>>24,m[a+452|0]=i,m[a+453|0]=i>>>8,m[a+454|0]=i>>>16,m[a+455|0]=i>>>24,m[a+488|0]=s,m[a+489|0]=s>>>8,m[a+490|0]=s>>>16,m[a+491|0]=s>>>24,m[a+492|0]=i,m[a+493|0]=i>>>8,m[a+494|0]=i>>>16,m[a+495|0]=i>>>24,m[a+480|0]=s,m[a+481|0]=s>>>8,m[a+482|0]=s>>>16,m[a+483|0]=s>>>24,m[a+484|0]=i,m[a+485|0]=i>>>8,m[a+486|0]=i>>>16,m[a+487|0]=i>>>24}function gn(i,a,s,g,b){var x=0,A=0,P=0,j=0,B=0,Z=0,ne=0,me=0,Ce=0,Be=0,at=0,kt=0,It=0,Qt=0,lr=0,zr=0,Sr=0,Jr=0,hn=0,Sn=0,di=0,Ni=0,Ua=0,Ks=0,iu=0,jc=0,yf=0;Qt=jn-16|0,jn=Qt,at=g+120|0,ne=g+24|0;e:{t:{r:{n:{o:{l:{i:{if(!s)break i;for(;;){if(!ho(ne,1))break i;if(x=f[g+176>>2],Be=ho(ne,2),B=f[g+260>>2],P=1<<Be,B&P)break l;f[g+260>>2]=P|B,x=J(x,20)+g|0,Z=x+196|0,f[Z>>2]=0,B=x+192|0,f[B>>2]=a,P=x+188|0,f[P>>2]=i,f[x+180>>2]=Be,me=1,f[g+176>>2]=f[g+176>>2]+1;u:switch(Be|0){case 0:case 1:if(Sr=x,x=ho(ne,3)+2|0,f[Sr+184>>2]=x,Sr=f[P>>2],P=-1<<x^-1,gn(Sr+P>>>x|0,P+f[B>>2]>>>x|0,0,g,Z))continue;break l;case 3:A=ho(ne,8)+1|0,i=0;a:{if((A|0)>16||(i=1,(A|0)>4))break a;i=(A|0)>2?2:3}if(B=f[P>>2],P=x+184|0,f[P>>2]=i,!gn(A,1,0,g,Z))break l;if(Be=(B+(1<<i)|0)+-1|0,x=1<<(8>>>f[P>>2]),j=Ta(x,0,4),j){if(B=f[Z>>2],f[j>>2]=f[B>>2],me=4,(A|0)>=2)for(P=A<<2,me=(P|0)>5?P:5,A=4;P=A+j|0,m[P|0]=L[P+-4|0]+L[A+B|0],A=A+1|0,(me|0)!=(A|0););P=x<<2,(P|0)>(me|0)&&ua(j+me|0,0,P-me|0),Vi(f[Z>>2]),f[Z>>2]=j}i=Be>>>i|0,me=(j|0)!=0;break;default:break u}if(!me)break}break l}i:{if(!ho(ne,1)||(lr=ho(ne,4),lr+-1>>>0<11))break i;f[g>>2]=3,A=0;break n}f[Qt+12>>2]=0;i:{u:{a:{if(!s){Be=1,P=1;break a}if(Be=1,P=1,!ho(ne,1))break a;if(zr=1,x=ho(ne,3)+2|0,P=1<<x,B=(P+i|0)+-1>>>x|0,P=(a+P|0)+-1>>>x|0,!gn(B,P,0,g,Qt+12|0))break u;if(f[g+152>>2]=x,kt=J(P,B),(kt|0)>=1)for(A=0,P=f[Qt+12>>2];B=P+(A<<2)|0,x=L[B+1|0]|L[B+2|0]<<8,f[B>>2]=x,Be=(x|0)<(Be|0)?Be:x+1|0,A=A+1|0,(kt|0)!=(A|0););if(!((Be|0)>1e3|(Be|0)>(J(i,a)|0))){P=Be;break a}if(Sn=Ta(Be,0,4),!Sn){f[g>>2]=1,Sn=0;break u}if(ne=ua(Sn,255,Be<<2),(kt|0)<1){P=0;break a}for(A=0,Z=f[Qt+12>>2],P=0;j=Z+(A<<2)|0,B=ne+(f[j>>2]<<2)|0,x=f[B>>2],(x|0)==-1&&(f[B>>2]=P,x=P,P=x+1|0),f[j>>2]=x,A=A+1|0,(kt|0)!=(A|0););}if(f[g+48>>2]){zr=1;break u}if(zr=1,yf=1<<lr,jc=(lr|0)>0?yf+280|0:280,me=sl((jc|0)>256?jc:256,0,4),Jr=J(kn[(lr<<1)+1184>>1],P),Jr=Ta(Jr,Jr>>31,4),iu=Ta(P,P>>31,548),!(!iu|(!Jr|!me))){for(B=Jr;;){A=di;a:{s:{if(!Sn||(A=f[(di<<2)+Sn>>2],(A|0)!=-1))break s;if(zr=1,!fs(jc,g,me,0)||!fs(256,g,me,0)||!fs(256,g,me,0)||!fs(256,g,me,0))break i;if(fs(40,g,me,0))break a;break i}for(Ce=J(A,548)+iu|0,zr=1,It=0,Ni=0,hn=1,Ua=0;;){if(f[(It<<2)+Ce>>2]=B,kt=kn[(It<<1)+1208>>1]+((lr|0)>0?It?0:yf:0)|0,x=fs(kt,g,me,B),!x)break i;s:{if(!hn){hn=0;break s}if(!(It&2147483643))break s;hn=!L[B|0]}if(ne=x<<2,Z=L[B|0],It>>>0<=3){if(A=f[me>>2],x=1,(kt|0)>=2)for(;j=f[(x<<2)+me>>2],A=(j|0)>(A|0)?j:A,x=x+1|0,(kt|0)!=(x|0););Ni=A+Ni|0}if(B=B+ne|0,Ua=Z+Ua|0,It=It+1|0,(It|0)==5)break}f[Ce+28>>2]=0,f[Ce+20>>2]=hn;s:{if(!hn||(A=kn[f[Ce+8>>2]+2>>1]|kn[f[Ce+4>>2]+2>>1]<<16|kn[f[Ce+12>>2]+2>>1]<<24,f[Ce+24>>2]=A,Ua)||(x=kn[f[Ce>>2]+2>>1],x>>>0>255))break s;f[Ce+28>>2]=1,f[Ce+24>>2]=A|x<<8,f[Ce+32>>2]=0;break a}if(f[Ce+32>>2]=(Ni|0)<6,(Ni|0)>5)break a;for(zr=Ce+12|0,hn=Ce+8|0,Ni=Ce+4|0,Ua=f[Ce>>2],A=0;;){Z=(A<<3)+Ce|0,Ks=Z+36|0,x=Ua+(A<<2)|0,j=kn[x>>1]|kn[x+2>>1]<<16,x=j>>>16|0;s:{if(x>>>0>=256){f[Ks>>2]=j&255|256,f[Z+40>>2]=x;break s}j=j&255,f[Ks>>2]=j,It=Z+40|0,kt=x<<8,f[It>>2]=kt,ne=A>>>j|0,x=f[Ni>>2]+(ne<<2)|0,Z=L[x+2|0]|L[x+3|0]<<8,Sr=j,j=L[x|0],x=Sr+j|0,f[Ks>>2]=x,kt=kt|Z<<16,f[It>>2]=kt,ne=ne>>>j|0,Z=f[hn>>2]+(ne<<2)|0,j=L[Z+2|0]|L[Z+3|0]<<8,Sr=x,x=L[Z|0],Z=Sr+x|0,f[Ks>>2]=Z,j=j|kt,f[It>>2]=j,ne=f[zr>>2]+(ne>>>x<<2)|0,x=L[ne+2|0]|L[ne+3|0]<<8,f[Ks>>2]=Z+L[ne|0],f[It>>2]=j|x<<24}if(A=A+1|0,(A|0)==64)break}}if(di=di+1|0,(di|0)==(Be|0))break}di=f[Qt+12>>2],f[g+172>>2]=Jr,f[g+168>>2]=iu,f[g+164>>2]=P,f[g+160>>2]=di,zr=0;break i}f[g>>2]=1;break i}me=0}if(Vi(me),Vi(Sn),!zr)break o;Vi(f[Qt+12>>2]),Vi(Jr),Vf(iu)}f[g>>2]=3,A=0;break n}o:{if((lr|0)>=1){if(f[g+120>>2]=1<<lr,Cr(g+124|0,lr))break o;f[g>>2]=1,A=0;break n}f[at>>2]=0}if(f[g+104>>2]=a,f[g+100>>2]=i,P=f[g+152>>2],f[g+148>>2]=P?-1<<P^-1:-1,f[g+156>>2]=((1<<P)+i|0)+-1>>>P,s){f[g+4>>2]=1,A=0;break r}if(A=Ta(Ei(i,i>>31,a,a>>31),Fn,4),!A){f[g>>2]=1,A=0;break n}if(!Wl(g,A,i,a,a,0))break n;if(!f[g+48>>2])break r}Vi(A),A=0;break t}if(b&&(f[b>>2]=A),f[g+112>>2]=0,A=1,s)break e}Vi(f[g+160>>2]),Vi(f[g+172>>2]),Vf(f[g+168>>2]),s0(g+124|0),s0(g+136|0),f[at+48>>2]=0,f[at+52>>2]=0,f[at+40>>2]=0,f[at+44>>2]=0,f[at+32>>2]=0,f[at+36>>2]=0,f[at+24>>2]=0,f[at+28>>2]=0,f[at+16>>2]=0,f[at+20>>2]=0,f[at+8>>2]=0,f[at+12>>2]=0,f[at>>2]=0,f[at+4>>2]=0}return jn=Qt+16|0,A}function Xn(i,a,s,g,b,x,A,P,j){i=i|0,a=a|0,s=s|0,g=g|0,b=b|0,x=x|0,A=A|0,P=P|0,j=j|0;var B=0,Z=0,ne=0,me=0,Ce=0,Be=0,at=0,kt=0,It=0,Qt=0,lr=0,zr=0,Sr=0,Jr=0,hn=0,Sn=0,di=0,Ni=0;ne=L[i|0],Z=L[s|0],me=L[g|0],Ce=L[b|0],kt=L[x|0],m[A|0]=255,ne=J(ne,19077)>>>8|0,Ce=Ce|kt<<16,Z=Z|me<<16,me=(Ce+J(Z,3)|0)+131074|0,kt=me>>>2&255,It=ne+(J(kt,33050)>>>8|0)|0,B=It+-17685|0,m[A+3|0]=B>>>0<16384?B>>>6|0:It>>>0<17685?0:255,me=me>>>18&255,It=ne+(J(me,26149)>>>8|0)|0,B=It+-14234|0,m[A+1|0]=B>>>0<16384?B>>>6|0:It>>>0<14234?0:255,ne=ne-(J(kt,6419)>>>8|0)-(J(me,13320)>>>8)|0,me=ne+8708|0,m[A+2|0]=me>>>0<16384?me>>>6|0:(ne|0)<-8708?0:255,a&&(ne=L[a|0],m[P|0]=255,ne=J(ne,19077)>>>8|0,me=(J(Ce,3)+Z|0)+131074|0,kt=me>>>2&255,It=ne+(J(kt,33050)>>>8|0)|0,B=It+-17685|0,m[P+3|0]=B>>>0<16384?B>>>6|0:It>>>0<17685?0:255,me=me>>>18&255,It=ne+(J(me,26149)>>>8|0)|0,B=It+-14234|0,m[P+1|0]=B>>>0<16384?B>>>6|0:It>>>0<14234?0:255,ne=ne-(J(kt,6419)>>>8|0)-(J(me,13320)>>>8)|0,me=ne+8708|0,m[P+2|0]=me>>>0<16384?me>>>6|0:(ne|0)<-8708?0:255),It=j+-1|0;e:{if((j|0)<3){ne=Ce,me=Z;break e}for(ne=It>>1,Ni=(ne|0)>1?ne:1,kt=1;Sn=kt<<1,lr=Sn+-1|0,Be=L[lr+i|0],me=L[s+kt|0],Qt=L[g+kt|0],ne=L[b+kt|0],hn=L[x+kt|0],di=lr<<2,B=di+A|0,m[B|0]=255,ne=ne|hn<<16,me=me|Qt<<16,hn=Ce+me|0,Qt=(ne+(hn+Z|0)|0)+524296|0,Be=J(Be,19077)>>>8|0,hn=Qt+(hn<<1)>>>3|0,zr=hn+Z|0,Sr=zr>>>1&255,Jr=Be+(J(Sr,33050)>>>8|0)|0,at=Jr+-17685|0,m[B+3|0]=at>>>0<16384?at>>>6|0:Jr>>>0<17685?0:255,zr=zr>>>17&255,Jr=Be+(J(zr,26149)>>>8|0)|0,at=Jr+-14234|0,m[B+1|0]=at>>>0<16384?at>>>6|0:Jr>>>0<14234?0:255,at=B,B=Be-(J(Sr,6419)>>>8|0)-(J(zr,13320)>>>8)|0,Be=B+8708|0,m[at+2|0]=Be>>>0<16384?Be>>>6|0:(B|0)<-8708?0:255,Be=L[i+Sn|0],zr=kt<<3,B=zr+A|0,m[B|0]=255,Qt=Qt+(Z+ne<<1)>>>3|0,Sr=Qt+me|0,Jr=Sr>>>1&255,Z=J(Be,19077)>>>8|0,Be=(J(Jr,33050)>>>8|0)+Z|0,at=Be+-17685|0,m[B+3|0]=at>>>0<16384?at>>>6|0:Be>>>0<17685?0:255,Be=Sr>>>17&255,Sr=Z+(J(Be,26149)>>>8|0)|0,at=Sr+-14234|0,m[B+1|0]=at>>>0<16384?at>>>6|0:Sr>>>0<14234?0:255,at=B,Z=Z-(J(Jr,6419)>>>8|0)-(J(Be,13320)>>>8)|0,B=Z+8708|0,m[at+2|0]=B>>>0<16384?B>>>6|0:(Z|0)<-8708?0:255,a&&(B=L[a+lr|0],Z=P+di|0,m[Z|0]=255,lr=Ce+Qt|0,Qt=lr>>>1&255,Ce=J(B,19077)>>>8|0,B=(J(Qt,33050)>>>8|0)+Ce|0,Be=B+-17685|0,m[Z+3|0]=Be>>>0<16384?Be>>>6|0:B>>>0<17685?0:255,B=lr>>>17&255,lr=Ce+(J(B,26149)>>>8|0)|0,Be=lr+-14234|0,m[Z+1|0]=Be>>>0<16384?Be>>>6|0:lr>>>0<14234?0:255,at=Z,Z=Ce-(J(Qt,6419)>>>8|0)-(J(B,13320)>>>8)|0,Ce=Z+8708|0,m[at+2|0]=Ce>>>0<16384?Ce>>>6|0:(Z|0)<-8708?0:255,Ce=L[a+Sn|0],Z=P+zr|0,m[Z|0]=255,Ce=J(Ce,19077)>>>8|0,B=ne+hn|0,Sn=B>>>1&255,lr=Ce+(J(Sn,33050)>>>8|0)|0,Qt=lr+-17685|0,m[Z+3|0]=Qt>>>0<16384?Qt>>>6|0:lr>>>0<17685?0:255,B=B>>>17&255,lr=Ce+(J(B,26149)>>>8|0)|0,Qt=lr+-14234|0,m[Z+1|0]=Qt>>>0<16384?Qt>>>6|0:lr>>>0<14234?0:255,at=Z,Z=Ce-(J(Sn,6419)>>>8|0)-(J(B,13320)>>>8)|0,Ce=Z+8708|0,m[at+2|0]=Ce>>>0<16384?Ce>>>6|0:(Z|0)<-8708?0:255),B=(kt|0)!=(Ni|0),kt=kt+1|0,Z=me,Ce=ne,!!B;);}e:{if(j&1||(s=L[i+It|0],g=It<<2,i=g+A|0,m[i|0]=255,s=J(s,19077)>>>8|0,b=(J(me,3)+ne|0)+131074|0,x=b>>>2&255,A=s+(J(x,33050)>>>8|0)|0,j=A+-17685|0,m[i+3|0]=j>>>0<16384?j>>>6|0:A>>>0<17685?0:255,b=b>>>18&255,A=s+(J(b,26149)>>>8|0)|0,j=A+-14234|0,m[i+1|0]=j>>>0<16384?j>>>6|0:A>>>0<14234?0:255,A=i,i=s-(J(x,6419)>>>8|0)-(J(b,13320)>>>8)|0,s=i+8708|0,m[A+2|0]=s>>>0<16384?s>>>6|0:(i|0)<-8708?0:255,!a))break e;a=L[a+It|0],i=g+P|0,m[i|0]=255,a=J(a,19077)>>>8|0,s=(J(ne,3)+me|0)+131074|0,g=s>>>2&255,b=a+(J(g,33050)>>>8|0)|0,x=b+-17685|0,m[i+3|0]=x>>>0<16384?x>>>6|0:b>>>0<17685?0:255,s=s>>>18&255,b=a+(J(s,26149)>>>8|0)|0,x=b+-14234|0,m[i+1|0]=x>>>0<16384?x>>>6|0:b>>>0<14234?0:255,b=i,i=a-(J(g,6419)>>>8|0)-(J(s,13320)>>>8)|0,a=i+8708|0,m[b+2|0]=a>>>0<16384?a>>>6|0:(i|0)<-8708?0:255}}function xi(i,a,s,g,b,x,A,P,j){i=i|0,a=a|0,s=s|0,g=g|0,b=b|0,x=x|0,A=A|0,P=P|0,j=j|0;var B=0,Z=0,ne=0,me=0,Ce=0,Be=0,at=0,kt=0,It=0,Qt=0,lr=0,zr=0,Sr=0,Jr=0,hn=0,Sn=0,di=0,Ni=0;ne=L[i|0],Z=L[s|0],me=L[g|0],Ce=L[b|0],kt=L[x|0],m[A+3|0]=255,ne=J(ne,19077)>>>8|0,Ce=Ce|kt<<16,Z=Z|me<<16,me=(Ce+J(Z,3)|0)+131074|0,kt=me>>>2&255,It=ne+(J(kt,33050)>>>8|0)|0,B=It+-17685|0,m[A+2|0]=B>>>0<16384?B>>>6|0:It>>>0<17685?0:255,me=me>>>18&255,It=ne+(J(me,26149)>>>8|0)|0,B=It+-14234|0,m[A|0]=B>>>0<16384?B>>>6|0:It>>>0<14234?0:255,ne=ne-(J(kt,6419)>>>8|0)-(J(me,13320)>>>8)|0,me=ne+8708|0,m[A+1|0]=me>>>0<16384?me>>>6|0:(ne|0)<-8708?0:255,a&&(ne=L[a|0],m[P+3|0]=255,ne=J(ne,19077)>>>8|0,me=(J(Ce,3)+Z|0)+131074|0,kt=me>>>2&255,It=ne+(J(kt,33050)>>>8|0)|0,B=It+-17685|0,m[P+2|0]=B>>>0<16384?B>>>6|0:It>>>0<17685?0:255,me=me>>>18&255,It=ne+(J(me,26149)>>>8|0)|0,B=It+-14234|0,m[P|0]=B>>>0<16384?B>>>6|0:It>>>0<14234?0:255,ne=ne-(J(kt,6419)>>>8|0)-(J(me,13320)>>>8)|0,me=ne+8708|0,m[P+1|0]=me>>>0<16384?me>>>6|0:(ne|0)<-8708?0:255),It=j+-1|0;e:{if((j|0)<3){ne=Ce,me=Z;break e}for(ne=It>>1,Ni=(ne|0)>1?ne:1,kt=1;Sn=kt<<1,lr=Sn+-1|0,Be=L[lr+i|0],me=L[s+kt|0],Qt=L[g+kt|0],ne=L[b+kt|0],hn=L[x+kt|0],di=lr<<2,B=di+A|0,m[B+3|0]=255,ne=ne|hn<<16,me=me|Qt<<16,hn=Ce+me|0,Qt=(ne+(hn+Z|0)|0)+524296|0,Be=J(Be,19077)>>>8|0,hn=Qt+(hn<<1)>>>3|0,zr=hn+Z|0,Sr=zr>>>1&255,Jr=Be+(J(Sr,33050)>>>8|0)|0,at=Jr+-17685|0,m[B+2|0]=at>>>0<16384?at>>>6|0:Jr>>>0<17685?0:255,zr=zr>>>17&255,Jr=Be+(J(zr,26149)>>>8|0)|0,at=Jr+-14234|0,m[B|0]=at>>>0<16384?at>>>6|0:Jr>>>0<14234?0:255,at=B,B=Be-(J(Sr,6419)>>>8|0)-(J(zr,13320)>>>8)|0,Be=B+8708|0,m[at+1|0]=Be>>>0<16384?Be>>>6|0:(B|0)<-8708?0:255,Be=L[i+Sn|0],zr=kt<<3,B=zr+A|0,m[B+3|0]=255,Qt=Qt+(Z+ne<<1)>>>3|0,Sr=Qt+me|0,Jr=Sr>>>1&255,Z=J(Be,19077)>>>8|0,Be=(J(Jr,33050)>>>8|0)+Z|0,at=Be+-17685|0,m[B+2|0]=at>>>0<16384?at>>>6|0:Be>>>0<17685?0:255,Be=Sr>>>17&255,Sr=Z+(J(Be,26149)>>>8|0)|0,at=Sr+-14234|0,m[B|0]=at>>>0<16384?at>>>6|0:Sr>>>0<14234?0:255,at=B,Z=Z-(J(Jr,6419)>>>8|0)-(J(Be,13320)>>>8)|0,B=Z+8708|0,m[at+1|0]=B>>>0<16384?B>>>6|0:(Z|0)<-8708?0:255,a&&(B=L[a+lr|0],Z=P+di|0,m[Z+3|0]=255,lr=Ce+Qt|0,Qt=lr>>>1&255,Ce=J(B,19077)>>>8|0,B=(J(Qt,33050)>>>8|0)+Ce|0,Be=B+-17685|0,m[Z+2|0]=Be>>>0<16384?Be>>>6|0:B>>>0<17685?0:255,B=lr>>>17&255,lr=Ce+(J(B,26149)>>>8|0)|0,Be=lr+-14234|0,m[Z|0]=Be>>>0<16384?Be>>>6|0:lr>>>0<14234?0:255,at=Z,Z=Ce-(J(Qt,6419)>>>8|0)-(J(B,13320)>>>8)|0,Ce=Z+8708|0,m[at+1|0]=Ce>>>0<16384?Ce>>>6|0:(Z|0)<-8708?0:255,Ce=L[a+Sn|0],Z=P+zr|0,m[Z+3|0]=255,Ce=J(Ce,19077)>>>8|0,B=ne+hn|0,Sn=B>>>1&255,lr=Ce+(J(Sn,33050)>>>8|0)|0,Qt=lr+-17685|0,m[Z+2|0]=Qt>>>0<16384?Qt>>>6|0:lr>>>0<17685?0:255,B=B>>>17&255,lr=Ce+(J(B,26149)>>>8|0)|0,Qt=lr+-14234|0,m[Z|0]=Qt>>>0<16384?Qt>>>6|0:lr>>>0<14234?0:255,at=Z,Z=Ce-(J(Sn,6419)>>>8|0)-(J(B,13320)>>>8)|0,Ce=Z+8708|0,m[at+1|0]=Ce>>>0<16384?Ce>>>6|0:(Z|0)<-8708?0:255),B=(kt|0)!=(Ni|0),kt=kt+1|0,Z=me,Ce=ne,!!B;);}e:{if(j&1||(s=L[i+It|0],g=It<<2,i=g+A|0,m[i+3|0]=255,s=J(s,19077)>>>8|0,b=(J(me,3)+ne|0)+131074|0,x=b>>>2&255,A=s+(J(x,33050)>>>8|0)|0,j=A+-17685|0,m[i+2|0]=j>>>0<16384?j>>>6|0:A>>>0<17685?0:255,b=b>>>18&255,A=s+(J(b,26149)>>>8|0)|0,j=A+-14234|0,m[i|0]=j>>>0<16384?j>>>6|0:A>>>0<14234?0:255,A=i,i=s-(J(x,6419)>>>8|0)-(J(b,13320)>>>8)|0,s=i+8708|0,m[A+1|0]=s>>>0<16384?s>>>6|0:(i|0)<-8708?0:255,!a))break e;a=L[a+It|0],i=g+P|0,m[i+3|0]=255,a=J(a,19077)>>>8|0,s=(J(ne,3)+me|0)+131074|0,g=s>>>2&255,b=a+(J(g,33050)>>>8|0)|0,x=b+-17685|0,m[i+2|0]=x>>>0<16384?x>>>6|0:b>>>0<17685?0:255,s=s>>>18&255,b=a+(J(s,26149)>>>8|0)|0,x=b+-14234|0,m[i|0]=x>>>0<16384?x>>>6|0:b>>>0<14234?0:255,b=i,i=a-(J(g,6419)>>>8|0)-(J(s,13320)>>>8)|0,a=i+8708|0,m[b+1|0]=a>>>0<16384?a>>>6|0:(i|0)<-8708?0:255}}function Oi(i,a,s,g,b,x,A,P,j){i=i|0,a=a|0,s=s|0,g=g|0,b=b|0,x=x|0,A=A|0,P=P|0,j=j|0;var B=0,Z=0,ne=0,me=0,Ce=0,Be=0,at=0,kt=0,It=0,Qt=0,lr=0,zr=0,Sr=0,Jr=0,hn=0,Sn=0,di=0,Ni=0;ne=L[i|0],Z=L[s|0],me=L[g|0],Ce=L[b|0],kt=L[x|0],m[A+3|0]=255,ne=J(ne,19077)>>>8|0,Ce=Ce|kt<<16,Z=Z|me<<16,me=(Ce+J(Z,3)|0)+131074|0,kt=me>>>18&255,It=ne+(J(kt,26149)>>>8|0)|0,B=It+-14234|0,m[A+2|0]=B>>>0<16384?B>>>6|0:It>>>0<14234?0:255,me=me>>>2&255,It=ne+(J(me,33050)>>>8|0)|0,B=It+-17685|0,m[A|0]=B>>>0<16384?B>>>6|0:It>>>0<17685?0:255,ne=ne-(J(me,6419)>>>8|0)-(J(kt,13320)>>>8)|0,me=ne+8708|0,m[A+1|0]=me>>>0<16384?me>>>6|0:(ne|0)<-8708?0:255,a&&(ne=L[a|0],m[P+3|0]=255,ne=J(ne,19077)>>>8|0,me=(J(Ce,3)+Z|0)+131074|0,kt=me>>>18&255,It=ne+(J(kt,26149)>>>8|0)|0,B=It+-14234|0,m[P+2|0]=B>>>0<16384?B>>>6|0:It>>>0<14234?0:255,me=me>>>2&255,It=ne+(J(me,33050)>>>8|0)|0,B=It+-17685|0,m[P|0]=B>>>0<16384?B>>>6|0:It>>>0<17685?0:255,ne=ne-(J(me,6419)>>>8|0)-(J(kt,13320)>>>8)|0,me=ne+8708|0,m[P+1|0]=me>>>0<16384?me>>>6|0:(ne|0)<-8708?0:255),It=j+-1|0;e:{if((j|0)<3){ne=Ce,me=Z;break e}for(ne=It>>1,Ni=(ne|0)>1?ne:1,kt=1;Sn=kt<<1,lr=Sn+-1|0,Be=L[lr+i|0],me=L[s+kt|0],Qt=L[g+kt|0],ne=L[b+kt|0],hn=L[x+kt|0],di=lr<<2,B=di+A|0,m[B+3|0]=255,ne=ne|hn<<16,me=me|Qt<<16,hn=Ce+me|0,Qt=(ne+(hn+Z|0)|0)+524296|0,Be=J(Be,19077)>>>8|0,hn=Qt+(hn<<1)>>>3|0,zr=hn+Z|0,Sr=zr>>>17&255,Jr=Be+(J(Sr,26149)>>>8|0)|0,at=Jr+-14234|0,m[B+2|0]=at>>>0<16384?at>>>6|0:Jr>>>0<14234?0:255,zr=zr>>>1&255,Jr=Be+(J(zr,33050)>>>8|0)|0,at=Jr+-17685|0,m[B|0]=at>>>0<16384?at>>>6|0:Jr>>>0<17685?0:255,at=B,B=Be-(J(zr,6419)>>>8|0)-(J(Sr,13320)>>>8)|0,Be=B+8708|0,m[at+1|0]=Be>>>0<16384?Be>>>6|0:(B|0)<-8708?0:255,Be=L[i+Sn|0],zr=kt<<3,B=zr+A|0,m[B+3|0]=255,Qt=Qt+(Z+ne<<1)>>>3|0,Sr=Qt+me|0,Jr=Sr>>>17&255,Z=J(Be,19077)>>>8|0,Be=(J(Jr,26149)>>>8|0)+Z|0,at=Be+-14234|0,m[B+2|0]=at>>>0<16384?at>>>6|0:Be>>>0<14234?0:255,Be=Sr>>>1&255,Sr=Z+(J(Be,33050)>>>8|0)|0,at=Sr+-17685|0,m[B|0]=at>>>0<16384?at>>>6|0:Sr>>>0<17685?0:255,at=B,Z=Z-(J(Be,6419)>>>8|0)-(J(Jr,13320)>>>8)|0,B=Z+8708|0,m[at+1|0]=B>>>0<16384?B>>>6|0:(Z|0)<-8708?0:255,a&&(B=L[a+lr|0],Z=P+di|0,m[Z+3|0]=255,lr=Ce+Qt|0,Qt=lr>>>17&255,Ce=J(B,19077)>>>8|0,B=(J(Qt,26149)>>>8|0)+Ce|0,Be=B+-14234|0,m[Z+2|0]=Be>>>0<16384?Be>>>6|0:B>>>0<14234?0:255,B=lr>>>1&255,lr=Ce+(J(B,33050)>>>8|0)|0,Be=lr+-17685|0,m[Z|0]=Be>>>0<16384?Be>>>6|0:lr>>>0<17685?0:255,at=Z,Z=Ce-(J(B,6419)>>>8|0)-(J(Qt,13320)>>>8)|0,Ce=Z+8708|0,m[at+1|0]=Ce>>>0<16384?Ce>>>6|0:(Z|0)<-8708?0:255,Ce=L[a+Sn|0],Z=P+zr|0,m[Z+3|0]=255,Ce=J(Ce,19077)>>>8|0,B=ne+hn|0,Sn=B>>>17&255,lr=Ce+(J(Sn,26149)>>>8|0)|0,Qt=lr+-14234|0,m[Z+2|0]=Qt>>>0<16384?Qt>>>6|0:lr>>>0<14234?0:255,B=B>>>1&255,lr=Ce+(J(B,33050)>>>8|0)|0,Qt=lr+-17685|0,m[Z|0]=Qt>>>0<16384?Qt>>>6|0:lr>>>0<17685?0:255,at=Z,Z=Ce-(J(B,6419)>>>8|0)-(J(Sn,13320)>>>8)|0,Ce=Z+8708|0,m[at+1|0]=Ce>>>0<16384?Ce>>>6|0:(Z|0)<-8708?0:255),B=(kt|0)!=(Ni|0),kt=kt+1|0,Z=me,Ce=ne,!!B;);}e:{if(j&1||(s=L[i+It|0],g=It<<2,i=g+A|0,m[i+3|0]=255,s=J(s,19077)>>>8|0,b=(J(me,3)+ne|0)+131074|0,x=b>>>18&255,A=s+(J(x,26149)>>>8|0)|0,j=A+-14234|0,m[i+2|0]=j>>>0<16384?j>>>6|0:A>>>0<14234?0:255,b=b>>>2&255,A=s+(J(b,33050)>>>8|0)|0,j=A+-17685|0,m[i|0]=j>>>0<16384?j>>>6|0:A>>>0<17685?0:255,A=i,i=s-(J(b,6419)>>>8|0)-(J(x,13320)>>>8)|0,s=i+8708|0,m[A+1|0]=s>>>0<16384?s>>>6|0:(i|0)<-8708?0:255,!a))break e;a=L[a+It|0],i=g+P|0,m[i+3|0]=255,a=J(a,19077)>>>8|0,s=(J(ne,3)+me|0)+131074|0,g=s>>>18&255,b=a+(J(g,26149)>>>8|0)|0,x=b+-14234|0,m[i+2|0]=x>>>0<16384?x>>>6|0:b>>>0<14234?0:255,s=s>>>2&255,b=a+(J(s,33050)>>>8|0)|0,x=b+-17685|0,m[i|0]=x>>>0<16384?x>>>6|0:b>>>0<17685?0:255,b=i,i=a-(J(s,6419)>>>8|0)-(J(g,13320)>>>8)|0,a=i+8708|0,m[b+1|0]=a>>>0<16384?a>>>6|0:(i|0)<-8708?0:255}}function Yi(i,a,s,g,b,x,A,P,j){i=i|0,a=a|0,s=s|0,g=g|0,b=b|0,x=x|0,A=A|0,P=P|0,j=j|0;var B=0,Z=0,ne=0,me=0,Ce=0,Be=0,at=0,kt=0,It=0,Qt=0,lr=0,zr=0,Sr=0,Jr=0,hn=0,Sn=0,di=0,Ni=0;me=J(L[i|0],19077)>>>8|0,Ce=L[b|0]|L[x|0]<<16,B=L[s|0]|L[g|0]<<16,ne=(Ce+J(B,3)|0)+131074|0,kt=ne>>>2&255,ne=ne>>>18|0,at=me-(J(kt,6419)>>>8|0)-(J(ne,13320)>>>8)|0,Z=at+8708|0,at=Z>>>0<16384?Z>>6:(at|0)<-8708?0:255,ne=me+(J(ne,26149)>>>8|0)|0,Z=ne+-14234|0,m[A|0]=at>>>5|(Z>>>0<16384?Z>>>6|0:ne>>>0<14234?0:248)&248,me=me+(J(kt,33050)>>>8|0)|0,ne=me+-17685|0,m[A+1|0]=at<<3&224|(ne>>>0<16384?ne>>>9|0:me>>>0<17685?0:31),a&&(me=J(L[a|0],19077)>>>8|0,ne=(J(Ce,3)+B|0)+131074|0,kt=ne>>>2&255,ne=ne>>>18|0,at=me-(J(kt,6419)>>>8|0)-(J(ne,13320)>>>8)|0,Z=at+8708|0,at=Z>>>0<16384?Z>>6:(at|0)<-8708?0:255,ne=me+(J(ne,26149)>>>8|0)|0,Z=ne+-14234|0,m[P|0]=at>>>5|(Z>>>0<16384?Z>>>6|0:ne>>>0<14234?0:248)&248,me=me+(J(kt,33050)>>>8|0)|0,ne=me+-17685|0,m[P+1|0]=at<<3&224|(ne>>>0<16384?ne>>>9|0:me>>>0<17685?0:31)),at=j+-1|0;e:{if((j|0)<3){me=Ce,ne=B;break e}for(me=at>>1,Ni=(me|0)>1?me:1,kt=1;me=L[b+kt|0]|L[x+kt|0]<<16,ne=L[s+kt|0]|L[g+kt|0]<<16,Sn=ne+Ce|0,Z=(me+(Sn+B|0)|0)+524296|0,hn=kt<<1,It=hn+-1|0,Sr=It<<1,Jr=Sr+A|0,Be=J(L[i+It|0],19077)>>>8|0,Sn=Z+(Sn<<1)>>>3|0,lr=Sn+B|0,di=lr>>>1&255,lr=lr>>>17|0,zr=Be-(J(di,6419)>>>8|0)-(J(lr,13320)>>>8)|0,Qt=zr+8708|0,zr=Qt>>>0<16384?Qt>>6:(zr|0)<-8708?0:255,lr=Be+(J(lr,26149)>>>8|0)|0,Qt=lr+-14234|0,m[Jr|0]=zr>>>5|(Qt>>>0<16384?Qt>>>6|0:lr>>>0<14234?0:248)&248,Qt=Jr,Be=Be+(J(di,33050)>>>8|0)|0,Jr=Be+-17685|0,m[Qt+1|0]=zr<<3&224|(Jr>>>0<16384?Jr>>>9|0:Be>>>0<17685?0:31),Jr=kt<<2,lr=Jr+A|0,Be=J(L[i+hn|0],19077)>>>8|0,Z=Z+(B+me<<1)>>>3|0,B=Z+ne|0,di=B>>>1&255,B=B>>>17|0,zr=Be-(J(di,6419)>>>8|0)-(J(B,13320)>>>8)|0,Qt=zr+8708|0,zr=Qt>>>0<16384?Qt>>6:(zr|0)<-8708?0:255,B=Be+(J(B,26149)>>>8|0)|0,Qt=B+-14234|0,m[lr|0]=zr>>>5|(Qt>>>0<16384?Qt>>>6|0:B>>>0<14234?0:248)&248,B=Be+(J(di,33050)>>>8|0)|0,Be=B+-17685|0,m[lr+1|0]=zr<<3&224|(Be>>>0<16384?Be>>>9|0:B>>>0<17685?0:31),a&&(Be=P+Sr|0,B=J(L[a+It|0],19077)>>>8|0,Ce=Z+Ce|0,Z=Ce>>>1&255,Ce=Ce>>>17|0,It=B-(J(Z,6419)>>>8|0)-(J(Ce,13320)>>>8)|0,Sr=It+8708|0,It=Sr>>>0<16384?Sr>>6:(It|0)<-8708?0:255,Ce=B+(J(Ce,26149)>>>8|0)|0,Sr=Ce+-14234|0,m[Be|0]=It>>>5|(Sr>>>0<16384?Sr>>>6|0:Ce>>>0<14234?0:248)&248,B=B+(J(Z,33050)>>>8|0)|0,Ce=B+-17685|0,m[Be+1|0]=It<<3&224|(Ce>>>0<16384?Ce>>>9|0:B>>>0<17685?0:31),Ce=P+Jr|0,B=J(L[a+hn|0],19077)>>>8|0,Z=me+Sn|0,hn=Z>>>1&255,Z=Z>>>17|0,It=B-(J(hn,6419)>>>8|0)-(J(Z,13320)>>>8)|0,Be=It+8708|0,It=Be>>>0<16384?Be>>6:(It|0)<-8708?0:255,Z=B+(J(Z,26149)>>>8|0)|0,Be=Z+-14234|0,m[Ce|0]=It>>>5|(Be>>>0<16384?Be>>>6|0:Z>>>0<14234?0:248)&248,Qt=Ce,B=B+(J(hn,33050)>>>8|0)|0,Ce=B+-17685|0,m[Qt+1|0]=It<<3&224|(Ce>>>0<16384?Ce>>>9|0:B>>>0<17685?0:31)),Z=(kt|0)!=(Ni|0),kt=kt+1|0,B=ne,Ce=me,!!Z;);}e:{if(j&1||(s=at<<1,g=s+A|0,i=J(L[i+at|0],19077)>>>8|0,b=(J(ne,3)+me|0)+131074|0,x=b>>>2&255,b=b>>>18|0,A=i-(J(x,6419)>>>8|0)-(J(b,13320)>>>8)|0,j=A+8708|0,A=j>>>0<16384?j>>6:(A|0)<-8708?0:255,b=i+(J(b,26149)>>>8|0)|0,j=b+-14234|0,m[g|0]=A>>>5|(j>>>0<16384?j>>>6|0:b>>>0<14234?0:248)&248,b=g,i=i+(J(x,33050)>>>8|0)|0,g=i+-17685|0,m[b+1|0]=A<<3&224|(g>>>0<16384?g>>>9|0:i>>>0<17685?0:31),!a))break e;s=s+P|0,i=J(L[a+at|0],19077)>>>8|0,a=(J(me,3)+ne|0)+131074|0,g=a>>>2&255,a=a>>>18|0,b=i-(J(g,6419)>>>8|0)-(J(a,13320)>>>8)|0,x=b+8708|0,b=x>>>0<16384?x>>6:(b|0)<-8708?0:255,a=i+(J(a,26149)>>>8|0)|0,x=a+-14234|0,m[s|0]=b>>>5|(x>>>0<16384?x>>>6|0:a>>>0<14234?0:248)&248,i=i+(J(g,33050)>>>8|0)|0,a=i+-17685|0,m[s+1|0]=b<<3&224|(a>>>0<16384?a>>>9|0:i>>>0<17685?0:31)}}function fo(i,a,s,g,b,x,A,P,j){i=i|0,a=a|0,s=s|0,g=g|0,b=b|0,x=x|0,A=A|0,P=P|0,j=j|0;var B=0,Z=0,ne=0,me=0,Ce=0,Be=0,at=0,kt=0,It=0,Qt=0,lr=0,zr=0,Sr=0,Jr=0,hn=0,Sn=0,di=0,Ni=0;ne=J(L[i|0],19077)>>>8|0,me=L[b|0]|L[x|0]<<16,B=L[s|0]|L[g|0]<<16,Ce=(me+J(B,3)|0)+131074|0,at=Ce>>>2&255,kt=ne+(J(at,33050)>>>8|0)|0,Z=kt+-17685|0,m[A+1|0]=(Z>>>0<16384?Z>>>6|0:kt>>>0<17685?0:240)|15,Ce=Ce>>>18|0,at=ne-(J(at,6419)>>>8|0)-(J(Ce,13320)>>>8)|0,kt=at+8708|0,ne=ne+(J(Ce,26149)>>>8|0)|0,Ce=ne+-14234|0,m[A|0]=(kt>>>0<16384?kt>>>10|0:(at|0)<-8708?0:15)|(Ce>>>0<16384?Ce>>>6|0:ne>>>0<14234?0:240)&240,a&&(ne=J(L[a|0],19077)>>>8|0,Ce=(J(me,3)+B|0)+131074|0,at=Ce>>>2&255,kt=ne+(J(at,33050)>>>8|0)|0,Z=kt+-17685|0,m[P+1|0]=(Z>>>0<16384?Z>>>6|0:kt>>>0<17685?0:240)|15,Ce=Ce>>>18|0,kt=ne+(J(Ce,26149)>>>8|0)|0,Z=kt+-14234|0,ne=ne-(J(at,6419)>>>8|0)-(J(Ce,13320)>>>8)|0,Ce=ne+8708|0,m[P|0]=(Z>>>0<16384?Z>>>6|0:kt>>>0<14234?0:240)&240|(Ce>>>0<16384?Ce>>>10|0:(ne|0)<-8708?0:15)),kt=j+-1|0;e:{if((j|0)<3){ne=me,Ce=B;break e}for(ne=kt>>1,Ni=(ne|0)>1?ne:1,at=1;ne=L[b+at|0]|L[x+at|0]<<16,Ce=L[s+at|0]|L[g+at|0]<<16,It=Ce+me|0,Z=(ne+(It+B|0)|0)+524296|0,Sr=at<<1,Qt=Sr+-1|0,hn=Qt<<1,Be=hn+A|0,di=Z+(It<<1)>>>3|0,lr=di+B|0,zr=lr>>>1&255,It=J(L[i+Qt|0],19077)>>>8|0,Sn=(J(zr,33050)>>>8|0)+It|0,Jr=Sn+-17685|0,m[Be+1|0]=(Jr>>>0<16384?Jr>>>6|0:Sn>>>0<17685?0:240)|15,Jr=Be,Be=lr>>>17|0,lr=It-(J(zr,6419)>>>8|0)-(J(Be,13320)>>>8)|0,zr=lr+8708|0,It=It+(J(Be,26149)>>>8|0)|0,Be=It+-14234|0,m[Jr|0]=(zr>>>0<16384?zr>>>10|0:(lr|0)<-8708?0:15)|(Be>>>0<16384?Be>>>6|0:It>>>0<14234?0:240)&240,It=at<<2,Be=It+A|0,Z=Z+(B+ne<<1)>>>3|0,lr=Z+Ce|0,zr=lr>>>1&255,B=J(L[i+Sr|0],19077)>>>8|0,Sn=(J(zr,33050)>>>8|0)+B|0,Jr=Sn+-17685|0,m[Be+1|0]=(Jr>>>0<16384?Jr>>>6|0:Sn>>>0<17685?0:240)|15,Jr=Be,Be=lr>>>17|0,lr=B-(J(zr,6419)>>>8|0)-(J(Be,13320)>>>8)|0,zr=lr+8708|0,B=B+(J(Be,26149)>>>8|0)|0,Be=B+-14234|0,m[Jr|0]=(zr>>>0<16384?zr>>>10|0:(lr|0)<-8708?0:15)|(Be>>>0<16384?Be>>>6|0:B>>>0<14234?0:240)&240,a&&(hn=P+hn|0,B=J(L[a+Qt|0],19077)>>>8|0,me=Z+me|0,Z=me>>>1&255,Qt=B+(J(Z,33050)>>>8|0)|0,Be=Qt+-17685|0,m[hn+1|0]=(Be>>>0<16384?Be>>>6|0:Qt>>>0<17685?0:240)|15,Be=hn,me=me>>>17|0,Qt=B+(J(me,26149)>>>8|0)|0,hn=Qt+-14234|0,B=B-(J(Z,6419)>>>8|0)-(J(me,13320)>>>8)|0,me=B+8708|0,m[Be|0]=(hn>>>0<16384?hn>>>6|0:Qt>>>0<14234?0:240)&240|(me>>>0<16384?me>>>10|0:(B|0)<-8708?0:15),me=P+It|0,B=J(L[a+Sr|0],19077)>>>8|0,Z=ne+di|0,Qt=Z>>>1&255,Sr=B+(J(Qt,33050)>>>8|0)|0,It=Sr+-17685|0,m[me+1|0]=(It>>>0<16384?It>>>6|0:Sr>>>0<17685?0:240)|15,Be=me,me=Z>>>17|0,Z=B+(J(me,26149)>>>8|0)|0,Sr=Z+-14234|0,B=B-(J(Qt,6419)>>>8|0)-(J(me,13320)>>>8)|0,me=B+8708|0,m[Be|0]=(Sr>>>0<16384?Sr>>>6|0:Z>>>0<14234?0:240)&240|(me>>>0<16384?me>>>10|0:(B|0)<-8708?0:15)),Z=(at|0)!=(Ni|0),at=at+1|0,B=Ce,me=ne,!!Z;);}e:{if(j&1||(s=kt<<1,g=s+A|0,i=J(L[i+kt|0],19077)>>>8|0,b=(J(Ce,3)+ne|0)+131074|0,x=b>>>2&255,A=i+(J(x,33050)>>>8|0)|0,j=A+-17685|0,m[g+1|0]=(j>>>0<16384?j>>>6|0:A>>>0<17685?0:240)|15,j=g,g=b>>>18|0,b=i+(J(g,26149)>>>8|0)|0,A=b+-14234|0,i=i-(J(x,6419)>>>8|0)-(J(g,13320)>>>8)|0,g=i+8708|0,m[j|0]=(A>>>0<16384?A>>>6|0:b>>>0<14234?0:240)&240|(g>>>0<16384?g>>>10|0:(i|0)<-8708?0:15),!a))break e;s=s+P|0,i=J(L[a+kt|0],19077)>>>8|0,g=(J(ne,3)+Ce|0)+131074|0,b=g>>>2&255,a=i+(J(b,33050)>>>8|0)|0,x=a+-17685|0,m[s+1|0]=(x>>>0<16384?x>>>6|0:a>>>0<17685?0:240)|15,x=s,a=g>>>18|0,s=i+(J(a,26149)>>>8|0)|0,g=s+-14234|0,i=i-(J(b,6419)>>>8|0)-(J(a,13320)>>>8)|0,a=i+8708|0,m[x|0]=(g>>>0<16384?g>>>6|0:s>>>0<14234?0:240)&240|(a>>>0<16384?a>>>10|0:(i|0)<-8708?0:15)}}function qo(i,a,s,g,b,x,A,P,j){i=i|0,a=a|0,s=s|0,g=g|0,b=b|0,x=x|0,A=A|0,P=P|0,j=j|0;var B=0,Z=0,ne=0,me=0,Ce=0,Be=0,at=0,kt=0,It=0,Qt=0,lr=0,zr=0,Sr=0,Jr=0,hn=0,Sn=0,di=0,Ni=0;ne=J(L[i|0],19077)>>>8|0,Be=L[b|0]|L[x|0]<<16,Z=L[s|0]|L[g|0]<<16,me=(Be+J(Z,3)|0)+131074|0,It=me>>>18|0,kt=ne+(J(It,26149)>>>8|0)|0,B=kt+-14234|0,m[A|0]=B>>>0<16384?B>>>6|0:kt>>>0<14234?0:255,me=me>>>2&255,kt=ne+(J(me,33050)>>>8|0)|0,B=kt+-17685|0,m[A+2|0]=B>>>0<16384?B>>>6|0:kt>>>0<17685?0:255,ne=ne-(J(me,6419)>>>8|0)-(J(It,13320)>>>8)|0,me=ne+8708|0,m[A+1|0]=me>>>0<16384?me>>>6|0:(ne|0)<-8708?0:255,a&&(ne=J(L[a|0],19077)>>>8|0,me=(J(Be,3)+Z|0)+131074|0,It=me>>>18|0,kt=ne+(J(It,26149)>>>8|0)|0,B=kt+-14234|0,m[P|0]=B>>>0<16384?B>>>6|0:kt>>>0<14234?0:255,me=me>>>2&255,kt=ne+(J(me,33050)>>>8|0)|0,B=kt+-17685|0,m[P+2|0]=B>>>0<16384?B>>>6|0:kt>>>0<17685?0:255,ne=ne-(J(me,6419)>>>8|0)-(J(It,13320)>>>8)|0,me=ne+8708|0,m[P+1|0]=me>>>0<16384?me>>>6|0:(ne|0)<-8708?0:255),kt=j+-1|0;e:{if((j|0)<3){ne=Be,me=Z;break e}for(ne=kt>>1,Ni=(ne|0)>1?ne:1,It=1;ne=L[b+It|0]|L[x+It|0]<<16,me=L[s+It|0]|L[g+It|0]<<16,Qt=me+Be|0,B=(ne+(Qt+Z|0)|0)+524296|0,Jr=It<<1,lr=Jr+-1|0,hn=J(lr,3),Ce=hn+A|0,di=B+(Qt<<1)>>>3|0,zr=di+Z|0,Sn=zr>>>17|0,Qt=J(L[i+lr|0],19077)>>>8|0,at=(J(Sn,26149)>>>8|0)+Qt|0,Sr=at+-14234|0,m[Ce|0]=Sr>>>0<16384?Sr>>>6|0:at>>>0<14234?0:255,zr=zr>>>1&255,at=Qt+(J(zr,33050)>>>8|0)|0,Sr=at+-17685|0,m[Ce+2|0]=Sr>>>0<16384?Sr>>>6|0:at>>>0<17685?0:255,at=Ce,Ce=Qt-(J(zr,6419)>>>8|0)-(J(Sn,13320)>>>8)|0,Qt=Ce+8708|0,m[at+1|0]=Qt>>>0<16384?Qt>>>6|0:(Ce|0)<-8708?0:255,Qt=J(It,6),Ce=Qt+A|0,B=B+(Z+ne<<1)>>>3|0,zr=B+me|0,Sn=zr>>>1&255,Z=J(L[i+Jr|0],19077)>>>8|0,at=(J(Sn,33050)>>>8|0)+Z|0,Sr=at+-17685|0,m[Ce+2|0]=Sr>>>0<16384?Sr>>>6|0:at>>>0<17685?0:255,zr=zr>>>17|0,at=Z+(J(zr,26149)>>>8|0)|0,Sr=at+-14234|0,m[Ce|0]=Sr>>>0<16384?Sr>>>6|0:at>>>0<14234?0:255,at=Ce,Z=Z-(J(Sn,6419)>>>8|0)-(J(zr,13320)>>>8)|0,Ce=Z+8708|0,m[at+1|0]=Ce>>>0<16384?Ce>>>6|0:(Z|0)<-8708?0:255,a&&(Z=P+hn|0,B=B+Be|0,Ce=B>>>17|0,Be=J(L[a+lr|0],19077)>>>8|0,lr=(J(Ce,26149)>>>8|0)+Be|0,hn=lr+-14234|0,m[Z|0]=hn>>>0<16384?hn>>>6|0:lr>>>0<14234?0:255,B=B>>>1&255,lr=Be+(J(B,33050)>>>8|0)|0,hn=lr+-17685|0,m[Z+2|0]=hn>>>0<16384?hn>>>6|0:lr>>>0<17685?0:255,at=Z,Z=Be-(J(B,6419)>>>8|0)-(J(Ce,13320)>>>8)|0,Be=Z+8708|0,m[at+1|0]=Be>>>0<16384?Be>>>6|0:(Z|0)<-8708?0:255,Z=P+Qt|0,Be=J(L[a+Jr|0],19077)>>>8|0,B=ne+di|0,lr=B>>>1&255,Jr=Be+(J(lr,33050)>>>8|0)|0,Ce=Jr+-17685|0,m[Z+2|0]=Ce>>>0<16384?Ce>>>6|0:Jr>>>0<17685?0:255,B=B>>>17|0,Jr=Be+(J(B,26149)>>>8|0)|0,Ce=Jr+-14234|0,m[Z|0]=Ce>>>0<16384?Ce>>>6|0:Jr>>>0<14234?0:255,Ce=Z,Z=Be-(J(lr,6419)>>>8|0)-(J(B,13320)>>>8)|0,Be=Z+8708|0,m[Ce+1|0]=Be>>>0<16384?Be>>>6|0:(Z|0)<-8708?0:255),B=(It|0)!=(Ni|0),It=It+1|0,Z=me,Be=ne,!!B;);}e:{if(j&1||(g=J(kt,3),s=g+A|0,i=J(L[i+kt|0],19077)>>>8|0,b=(J(me,3)+ne|0)+131074|0,x=b>>>18|0,A=i+(J(x,26149)>>>8|0)|0,j=A+-14234|0,m[s|0]=j>>>0<16384?j>>>6|0:A>>>0<14234?0:255,b=b>>>2&255,A=i+(J(b,33050)>>>8|0)|0,j=A+-17685|0,m[s+2|0]=j>>>0<16384?j>>>6|0:A>>>0<17685?0:255,A=s,i=i-(J(b,6419)>>>8|0)-(J(x,13320)>>>8)|0,s=i+8708|0,m[A+1|0]=s>>>0<16384?s>>>6|0:(i|0)<-8708?0:255,!a))break e;i=g+P|0,a=J(L[a+kt|0],19077)>>>8|0,s=(J(ne,3)+me|0)+131074|0,g=s>>>18|0,b=a+(J(g,26149)>>>8|0)|0,x=b+-14234|0,m[i|0]=x>>>0<16384?x>>>6|0:b>>>0<14234?0:255,s=s>>>2&255,b=a+(J(s,33050)>>>8|0)|0,x=b+-17685|0,m[i+2|0]=x>>>0<16384?x>>>6|0:b>>>0<17685?0:255,b=i,i=a-(J(s,6419)>>>8|0)-(J(g,13320)>>>8)|0,a=i+8708|0,m[b+1|0]=a>>>0<16384?a>>>6|0:(i|0)<-8708?0:255}}function Ko(i,a,s,g,b,x,A,P,j){i=i|0,a=a|0,s=s|0,g=g|0,b=b|0,x=x|0,A=A|0,P=P|0,j=j|0;var B=0,Z=0,ne=0,me=0,Ce=0,Be=0,at=0,kt=0,It=0,Qt=0,lr=0,zr=0,Sr=0,Jr=0,hn=0,Sn=0,di=0,Ni=0;ne=J(L[i|0],19077)>>>8|0,Be=L[b|0]|L[x|0]<<16,Z=L[s|0]|L[g|0]<<16,me=(Be+J(Z,3)|0)+131074|0,It=me>>>18|0,kt=ne+(J(It,26149)>>>8|0)|0,B=kt+-14234|0,m[A+2|0]=B>>>0<16384?B>>>6|0:kt>>>0<14234?0:255,me=me>>>2&255,kt=ne+(J(me,33050)>>>8|0)|0,B=kt+-17685|0,m[A|0]=B>>>0<16384?B>>>6|0:kt>>>0<17685?0:255,ne=ne-(J(me,6419)>>>8|0)-(J(It,13320)>>>8)|0,me=ne+8708|0,m[A+1|0]=me>>>0<16384?me>>>6|0:(ne|0)<-8708?0:255,a&&(ne=J(L[a|0],19077)>>>8|0,me=(J(Be,3)+Z|0)+131074|0,It=me>>>18|0,kt=ne+(J(It,26149)>>>8|0)|0,B=kt+-14234|0,m[P+2|0]=B>>>0<16384?B>>>6|0:kt>>>0<14234?0:255,me=me>>>2&255,kt=ne+(J(me,33050)>>>8|0)|0,B=kt+-17685|0,m[P|0]=B>>>0<16384?B>>>6|0:kt>>>0<17685?0:255,ne=ne-(J(me,6419)>>>8|0)-(J(It,13320)>>>8)|0,me=ne+8708|0,m[P+1|0]=me>>>0<16384?me>>>6|0:(ne|0)<-8708?0:255),kt=j+-1|0;e:{if((j|0)<3){ne=Be,me=Z;break e}for(ne=kt>>1,Ni=(ne|0)>1?ne:1,It=1;ne=L[b+It|0]|L[x+It|0]<<16,me=L[s+It|0]|L[g+It|0]<<16,Qt=me+Be|0,B=(ne+(Qt+Z|0)|0)+524296|0,Jr=It<<1,lr=Jr+-1|0,hn=J(lr,3),Ce=hn+A|0,di=B+(Qt<<1)>>>3|0,zr=di+Z|0,Sn=zr>>>17|0,Qt=J(L[i+lr|0],19077)>>>8|0,at=(J(Sn,26149)>>>8|0)+Qt|0,Sr=at+-14234|0,m[Ce+2|0]=Sr>>>0<16384?Sr>>>6|0:at>>>0<14234?0:255,zr=zr>>>1&255,at=Qt+(J(zr,33050)>>>8|0)|0,Sr=at+-17685|0,m[Ce|0]=Sr>>>0<16384?Sr>>>6|0:at>>>0<17685?0:255,at=Ce,Ce=Qt-(J(zr,6419)>>>8|0)-(J(Sn,13320)>>>8)|0,Qt=Ce+8708|0,m[at+1|0]=Qt>>>0<16384?Qt>>>6|0:(Ce|0)<-8708?0:255,Qt=J(It,6),Ce=Qt+A|0,B=B+(Z+ne<<1)>>>3|0,zr=B+me|0,Sn=zr>>>17|0,Z=J(L[i+Jr|0],19077)>>>8|0,at=(J(Sn,26149)>>>8|0)+Z|0,Sr=at+-14234|0,m[Ce+2|0]=Sr>>>0<16384?Sr>>>6|0:at>>>0<14234?0:255,zr=zr>>>1&255,at=Z+(J(zr,33050)>>>8|0)|0,Sr=at+-17685|0,m[Ce|0]=Sr>>>0<16384?Sr>>>6|0:at>>>0<17685?0:255,at=Ce,Z=Z-(J(zr,6419)>>>8|0)-(J(Sn,13320)>>>8)|0,Ce=Z+8708|0,m[at+1|0]=Ce>>>0<16384?Ce>>>6|0:(Z|0)<-8708?0:255,a&&(Z=P+hn|0,B=B+Be|0,Ce=B>>>17|0,Be=J(L[a+lr|0],19077)>>>8|0,lr=(J(Ce,26149)>>>8|0)+Be|0,hn=lr+-14234|0,m[Z+2|0]=hn>>>0<16384?hn>>>6|0:lr>>>0<14234?0:255,B=B>>>1&255,lr=Be+(J(B,33050)>>>8|0)|0,hn=lr+-17685|0,m[Z|0]=hn>>>0<16384?hn>>>6|0:lr>>>0<17685?0:255,at=Z,Z=Be-(J(B,6419)>>>8|0)-(J(Ce,13320)>>>8)|0,Be=Z+8708|0,m[at+1|0]=Be>>>0<16384?Be>>>6|0:(Z|0)<-8708?0:255,Z=P+Qt|0,Be=J(L[a+Jr|0],19077)>>>8|0,B=ne+di|0,lr=B>>>17|0,Jr=Be+(J(lr,26149)>>>8|0)|0,Ce=Jr+-14234|0,m[Z+2|0]=Ce>>>0<16384?Ce>>>6|0:Jr>>>0<14234?0:255,B=B>>>1&255,Jr=Be+(J(B,33050)>>>8|0)|0,Ce=Jr+-17685|0,m[Z|0]=Ce>>>0<16384?Ce>>>6|0:Jr>>>0<17685?0:255,Ce=Z,Z=Be-(J(B,6419)>>>8|0)-(J(lr,13320)>>>8)|0,Be=Z+8708|0,m[Ce+1|0]=Be>>>0<16384?Be>>>6|0:(Z|0)<-8708?0:255),B=(It|0)!=(Ni|0),It=It+1|0,Z=me,Be=ne,!!B;);}e:{if(j&1||(g=J(kt,3),s=g+A|0,i=J(L[i+kt|0],19077)>>>8|0,b=(J(me,3)+ne|0)+131074|0,x=b>>>18|0,A=i+(J(x,26149)>>>8|0)|0,j=A+-14234|0,m[s+2|0]=j>>>0<16384?j>>>6|0:A>>>0<14234?0:255,b=b>>>2&255,A=i+(J(b,33050)>>>8|0)|0,j=A+-17685|0,m[s|0]=j>>>0<16384?j>>>6|0:A>>>0<17685?0:255,A=s,i=i-(J(b,6419)>>>8|0)-(J(x,13320)>>>8)|0,s=i+8708|0,m[A+1|0]=s>>>0<16384?s>>>6|0:(i|0)<-8708?0:255,!a))break e;i=g+P|0,a=J(L[a+kt|0],19077)>>>8|0,s=(J(ne,3)+me|0)+131074|0,g=s>>>18|0,b=a+(J(g,26149)>>>8|0)|0,x=b+-14234|0,m[i+2|0]=x>>>0<16384?x>>>6|0:b>>>0<14234?0:255,s=s>>>2&255,b=a+(J(s,33050)>>>8|0)|0,x=b+-17685|0,m[i|0]=x>>>0<16384?x>>>6|0:b>>>0<17685?0:255,b=i,i=a-(J(s,6419)>>>8|0)-(J(g,13320)>>>8)|0,a=i+8708|0,m[b+1|0]=a>>>0<16384?a>>>6|0:(i|0)<-8708?0:255}}function Qo(i,a){var s=0,g=0,b=0,x=0,A=0,P=0,j=0,B=0,Z=0,ne=0,me=0;e:{if(!i)break e;if(f[i>>2]=0,f[i+8>>2]=5010,!a){f[i>>2]=2,f[i+4>>2]=0,f[i+8>>2]=5013;break e}if(P=f[a+60>>2],P>>>0<=3){f[i>>2]=7,f[i+4>>2]=0,f[i+8>>2]=5050;break e}if(s=f[a+64>>2],b=L[s+1|0],x=L[s+2|0],g=L[s|0],A=g>>>4&1,m[i+42|0]=A,j=g>>>1&7,m[i+41|0]=j,B=(g^-1)&1,m[i+40|0]=B,g=(g|b<<8|x<<16)>>>5|0,f[i+44>>2]=g,j>>>0>=4){f[i>>2]=3,f[i+4>>2]=0,f[i+8>>2]=5068;break e}if(!A){f[i>>2]=4,f[i+4>>2]=0,f[i+8>>2]=5099;break e}if(b=P+-3|0,x=s+3|0,B){if(b>>>0<=6){f[i>>2]=7,f[i+4>>2]=0,f[i+8>>2]=5122;break e}if(!(L[s+5|0]==42&&!(L[x|0]!=157|L[s+4|0]!=1))){f[i>>2]=3,f[i+4>>2]=0,f[i+8>>2]=5150;break e}g=L[s+6|0]|L[s+7|0]<<8&16128,Pr[i+48>>1]=g,m[i+52|0]=L[s+7|0]>>>6,b=L[s+8|0]|L[s+9|0]<<8&16128,Pr[i+50>>1]=b,x=L[s+9|0],f[i+292>>2]=b+15>>>4,f[i+288>>2]=g+15>>>4,m[i+53|0]=x>>>6,f[a+84>>2]=0,f[a+4>>2]=b,f[a>>2]=g,f[a+100>>2]=b,f[a+96>>2]=g,f[a+92>>2]=0,f[a+88>>2]=b,f[a+80>>2]=g,f[a+72>>2]=0,f[a+76>>2]=0,f[a+16>>2]=b,f[a+12>>2]=g,a=i+904|0,Pr[a>>1]=-1,m[a+2|0]=-1,f[i+120>>2]=0,f[i+112>>2]=1,f[i+116>>2]=0,f[i+104>>2]=0,f[i+108>>2]=0,b=P+-10|0,x=s+10|0,g=f[i+44>>2]}t:{if(g>>>0>b>>>0){if(a=0,f[i>>2])break t;f[i>>2]=7,f[i+4>>2]=0,f[i+8>>2]=5164;break e}s=i+12|0,Li(s,x,g),A=f[i+44>>2],L[i+40|0]&&(ne=i,me=Mi(s,1),m[ne+54|0]=me,ne=i,me=Mi(s,1),m[ne+55|0]=me),a=Mi(s,1),f[i+104>>2]=a;r:{if(a){if(ne=i,me=Mi(s,1),f[ne+108>>2]=me,Mi(s,1)&&(ne=i,me=Mi(s,1),f[ne+112>>2]=me,a=i,Mi(s,1)?g=ls(s,7):g=0,m[a+116|0]=g,a=i,Mi(s,1)?g=ls(s,7):g=0,m[a+117|0]=g,a=i,Mi(s,1)?g=ls(s,7):g=0,m[a+118|0]=g,a=i,Mi(s,1)?g=ls(s,7):g=0,m[a+119|0]=g,a=i,Mi(s,1)?g=ls(s,6):g=0,m[a+120|0]=g,a=i,Mi(s,1)?g=ls(s,6):g=0,m[a+121|0]=g,a=i,Mi(s,1)?g=ls(s,6):g=0,m[a+122|0]=g,a=i,Mi(s,1)?g=ls(s,6):g=0,m[a+123|0]=g),!f[i+108>>2])break r;a=i,Mi(s,1)?g=Mi(s,8):g=255,m[a+904|0]=g,a=i,Mi(s,1)?g=Mi(s,8):g=255,m[a+905|0]=g,a=i,g=255;n:{if(!Mi(s,1))break n;g=Mi(s,8)}m[a+906|0]=g;break r}f[i+108>>2]=0}if(f[i+36>>2]){if(a=0,f[i>>2])break t;f[i>>2]=3,f[i+4>>2]=0,f[i+8>>2]=5185;break e}ne=i,me=Mi(s,1),f[ne+56>>2]=me,ne=i,me=Mi(s,6),f[ne+60>>2]=me,ne=i- -64|0,me=Mi(s,3),f[ne>>2]=me,a=Mi(s,1),f[i+68>>2]=a;r:{if(!a||!Mi(s,1)||(Mi(s,1)&&(ne=i,me=ls(s,6),f[ne+72>>2]=me),Mi(s,1)&&(ne=i,me=ls(s,6),f[ne+76>>2]=me),Mi(s,1)&&(ne=i,me=ls(s,6),f[ne+80>>2]=me),Mi(s,1)&&(ne=i,me=ls(s,6),f[ne+84>>2]=me),Mi(s,1)&&(ne=i,me=ls(s,6),f[ne+88>>2]=me),Mi(s,1)&&(ne=i,me=ls(s,6),f[ne+92>>2]=me),Mi(s,1)&&(ne=i,me=ls(s,6),f[ne+96>>2]=me),!Mi(s,1)))break r;ne=i,me=ls(s,6),f[ne+100>>2]=me}if(a=i,f[i+60>>2]?g=f[i+56>>2]?1:2:g=0,f[a+2308>>2]=g,f[i+36>>2]){if(a=0,f[i>>2])break t;f[i>>2]=3,f[i+4>>2]=0,f[i+8>>2]=5213;break e}B=Mi(s,2),P=-1<<B^-1,f[i+312>>2]=P,g=7;r:{if(a=b-A|0,j=J(P,3),a>>>0>=j>>>0){if(Z=b+x|0,g=a-j|0,a=x+A|0,x=j+a|0,B)for(j=P>>>0>1?P:1,b=0;A=L[a|0]|L[a+1|0]<<8|L[a+2|0]<<16,A=A>>>0>g>>>0?g:A,Li((J(b,28)+i|0)+316|0,x,A),g=g-A|0,x=x+A|0,a=a+3|0,b=b+1|0,(j|0)!=(b|0););if(Li((J(P,28)+i|0)+316|0,x,g),g=5,x>>>0<Z>>>0)break r}if(a=0,f[i>>2])break t;f[i>>2]=g,f[i+4>>2]=0,f[i+8>>2]=5240;break e}if(ku(i),!L[i+40|0]){if(a=0,f[i>>2])break t;f[i>>2]=4,f[i+4>>2]=0,f[i+8>>2]=5264;break e}Mi(s,1),is(s,i),f[i+4>>2]=1,a=1}return a}return 0}function Da(i,a){var s=0,g=0,b=0,x=0,A=0,P=0,j=0,B=0,Z=0,ne=0,me=0,Ce=0,Be=0,at=0,kt=0,It=0,Qt=0,lr=0,zr=0,Sr=0,Jr=0;if(b=f[i+20>>2],f[b+108>>2]<(a|0)){e:{if(!f[i+132>>2]&&(fa(),!f[i+132>>2]))break e;me=f[b+100>>2],lr=J(me,f[b+104>>2]),j=f[b+112>>2],i=(j|0)/(me|0)|0,Qt=J(a,me);t:{r:{if((j|0)>=(Qt|0)){Be=b+48|0;break r}B=j-J(i,me)|0,A=f[b+152>>2],x=0;n:{if(!A)break n;x=f[f[b+160>>2]+(J(f[b+156>>2],i>>A)+(B>>A)<<2)>>2]}if(Be=b+48|0,f[Be>>2])break r;for(zr=f[b+148>>2],Sr=f[b+16>>2],at=b+24|0,It=f[b+168>>2]+J(x,548)|0;;){if(!(B&zr)){s=f[b+168>>2],A=f[b+152>>2],x=0;n:{if(!A)break n;x=f[f[b+160>>2]+(J(f[b+156>>2],i>>A)+(B>>A)<<2)>>2]}It=s+J(x,548)|0}g=f[b+44>>2],(g|0)>=32&&(de(at),g=f[b+44>>2]),Z=b,x=f[at+4>>2],s=x,P=g&63,A=P&31,kt=f[at>>2],s=f[It>>2]+(((32<=(P&63)>>>0?s>>>A|0:((1<<A)-1&s)<<32-A|kt>>>A)&255)<<2)|0,A=L[s|0],A>>>0>=9&&(g=g+8|0,f[b+44>>2]=g,P=(kn[s+2>>1]<<2)+s|0,s=x,Ce=g&63,ne=Ce&31,s=P+(((-1<<A+-8^-1)&(32<=Ce>>>0?s>>>ne|0:((1<<ne)-1&s)<<32-ne|kt>>>ne))<<2)|0,A=L[s|0]),P=(A&255)+g|0,f[Z+44>>2]=P,s=kn[s+2>>1];n:{if(s>>>0<=255){if(m[j+Sr|0]=s,j=j+1|0,B=B+1|0,(B|0)<(me|0))break n;if(x=i+1|0,B=0,(i|0)>=(a|0)){i=x;break n}if(x&15){i=x;break n}M(b,x),i=x;break n}if(Z=1,s>>>0>279)break t;A=s+-256|0,s>>>0>=260&&(x=s+-258>>1,A=ho(at,x)+((A&1|2)<<x)|0,kt=f[b+24>>2],P=f[b+44>>2],x=f[b+28>>2]),ne=b,s=x,Ce=P&63,g=Ce&31,g=f[It+16>>2]+(((32<=Ce>>>0?s>>>g|0:((1<<g)-1&s)<<32-g|kt>>>g)&255)<<2)|0,s=L[g|0],s>>>0>=9&&(P=P+8|0,f[b+44>>2]=P,Jr=(kn[g+2>>1]<<2)+g|0,Ce=P&63,g=Ce&31,g=Jr+(((-1<<s+-8^-1)&(32<=Ce>>>0?x>>>g|0:((1<<g)-1&x)<<32-g|kt>>>g))<<2)|0,s=L[g|0]),x=(s&255)+P|0,f[ne+44>>2]=x,g=kn[g+2>>1],(x|0)>=32&&de(at),x=A+1|0,g>>>0>=4&&(s=g+-2>>1,g=ho(at,s)+((g&1|2)<<s)|0);o:{if((g+1|0)>=121){s=g+-119|0;break o}s=L[g+1264|0],s=(J(s>>>4|0,me)-(s&15)|0)+8|0,s=(s|0)>1?s:1}if((lr-j|0)<(x|0)|(j|0)<(s|0))break t;g=j+Sr|0,P=g-s|0;o:{l:{if((x|0)<8)break l;i:{u:switch(s+-1|0){case 0:s=L[P|0],Z=J(s,16843009);break i;case 1:s=L[P|0]|L[P+1|0]<<8,Z=J(s,65537);break i;case 3:break u;default:break l}s=L[P|0]|L[P+1|0]<<8|(L[P+2|0]<<16|L[P+3|0]<<24),Z=s}i:{u:{a:{if(g&3){if(m[g|0]=s,Z=ea(Z,24),P=P+1|0,g=g+1|0,g&3)break a;s=A>>>2|0;break u}A=x,s=A>>>2|0;break u}for(;m[g|0]=L[P|0],ne=A,A=A+-1|0,Z=ea(Z,24),P=P+1|0,g=g+1|0,!!(g&3););if(s=0,(ne|0)<5)break i;s=A>>2}for(ne=(s|0)>1?s:1,s=0;f[(s<<2)+g>>2]=Z,s=s+1|0,(ne|0)!=(s|0););s=ne<<2}if((s|0)>=(A|0))break o;for(;m[s+g|0]=L[s+P|0],s=s+1|0,(A|0)!=(s|0););break o}if((s|0)<(x|0)){if(s=0,(x|0)<=0)break o;for(;m[s+g|0]=L[s+P|0],Z=(s|0)!=(A|0),s=s+1|0,!!Z;);break o}no(g,P,x)}if(j=x+j|0,B=x+B|0,(B|0)>=(me|0))for(;B=B-me|0,x=i,i=x+1|0,i&15|(x|0)>=(a|0)||M(b,i),(B|0)>=(me|0););if(!(B&zr)|(j|0)>=(Qt|0))break n;s=f[b+168>>2],A=f[b+152>>2],x=0;o:{if(!A)break o;x=f[f[b+160>>2]+(J(f[b+156>>2],i>>A)+(B>>A)<<2)>>2]}It=s+J(x,548)|0}if(f[Be>>2]){f[Be>>2]=1;break r}if(g=0,g=f[b+40>>2]==f[b+36>>2]?f[b+44>>2]>64:g,f[Be>>2]=g,(j|0)>=(Qt|0))break r;if(g)break}}M(b,(i|0)>(a|0)?a:i),Z=0}a=Be,x=a,i=1;t:{if(f[a>>2]||(i=0,f[b+40>>2]!=f[b+36>>2]))break t;i=f[b+44>>2]>64}return f[x>>2]=i,!i|(lr|0)<=(j|0)&&!Z?(f[b+112>>2]=j,1):(f[b>>2]=i?5:3,0)}i=Wl(b,f[b+16>>2],f[b+100>>2],f[b+104>>2],a,1)}else i=1;return i}function aa(i,a){i=i|0,a=a|0;var s=0,g=0,b=0,x=0,A=0,P=0,j=0,B=0,Z=0,ne=0,me=0,Ce=0,Be=0,at=0,kt=0,It=0,Qt=0,lr=0,zr=0,Sr=0,Jr=0,hn=0,Sn=0,di=0,Ni=0;lr=jn+-64|0,jn=lr,b=f[i+2280>>2],Sn=f[i+160>>2],kt=f[i+2268>>2],x=f[i+2284>>2],Jr=L[f[i+2308>>2]+4863|0],s=Jr>>>1|0,Ce=f[i+2276>>2],zr=f[i+2272>>2],Ni=f[i+308>>2],hn=f[i+164>>2],f[i+148>>2]==2&&Gu(i,i+160|0),A=J(b,Sn),di=J(b,Jr),g=J(x,Sn),Sr=J(s,x);e:{if(!f[i+168>>2]||(s=f[i+296>>2],(s|0)>=f[i+304>>2]))break e;for(Be=f[i+164>>2];;){ne=f[i+172>>2]+(s<<2)|0,P=L[ne|0];t:{if(!P)break t;if(x=f[i+160>>2],B=f[i+2280>>2],j=(f[i+2268>>2]+(J(x,B)<<4)|0)+(s<<4)|0,f[i+2308>>2]==1){if((s|0)>=1&&et[f[2717]](j,B,P+4|0),L[ne+2|0]&&et[f[2719]](j,B,P),x=ne+2|0,(Be|0)>=1&&et[f[2716]](j,B,P+4|0),!L[x|0])break t;et[f[2718]](j,B,P);break t}if(Z=L[ne+1|0],It=f[i+2284>>2],b=J(It,x)<<3,x=s<<3,Qt=(b+f[i+2276>>2]|0)+x|0,at=x+(b+f[i+2272>>2]|0)|0,me=L[ne+3|0],(s|0)>=1&&(x=P+4|0,et[f[2709]](j,B,x,Z,me),et[f[2711]](at,Qt,It,x,Z,me)),L[ne+2|0]&&(et[f[2713]](j,B,P,Z,me),et[f[2715]](at,Qt,It,P,Z,me)),b=ne+2|0,(Be|0)>=1&&(x=P+4|0,et[f[2708]](j,B,x,Z,me),et[f[2710]](at,Qt,It,x,Z,me)),!L[b|0])break t;et[f[2712]](j,B,P,Z,me),et[f[2714]](at,Qt,It,P,Z,me)}if(s=s+1|0,!((s|0)<f[i+304>>2]))break}}me=A<<4,at=kt-di|0,B=g<<3,Be=Ce-Sr|0,kt=zr-Sr|0;e:{if(!f[i+540>>2]||(j=f[i+296>>2],g=f[i+304>>2],(j|0)>=(g|0)))break e;for(Z=i+552|0;;){if(s=f[i+176>>2]+J(j,800)|0,b=L[s+796|0],b>>>0>=4){for(Ce=s+796|0,ne=f[i+2284>>2],It=J(ne,f[i+160>>2])<<3,zr=f[i+2276>>2],x=f[i+2272>>2],P=f[i+548>>2],A=f[i+544>>2],g=0;s=Z+(A<<2)|0,Qt=f[s>>2]-f[Z+(P<<2)>>2]|0,f[s>>2]=Qt&2147483647,s=f[i+544>>2]+1|0,A=(s|0)==55?0:s,f[i+544>>2]=A,s=f[i+548>>2]+1|0,P=(s|0)==55?0:s,f[i+548>>2]=P,m[g+lr|0]=J(b,Qt<<1>>24)>>>8^128,g=g+1|0,(g|0)!=64;);for(b=j<<3,et[f[2720]](lr,b+(x+It|0)|0,ne),x=L[Ce|0],P=f[i+548>>2],A=f[i+544>>2],g=0;s=Z+(A<<2)|0,Ce=f[s>>2]-f[Z+(P<<2)>>2]|0,f[s>>2]=Ce&2147483647,s=f[i+544>>2]+1|0,A=(s|0)==55?0:s,f[i+544>>2]=A,s=f[i+548>>2]+1|0,P=(s|0)==55?0:s,f[i+548>>2]=P,m[g+lr|0]=J(x,Ce<<1>>24)>>>8^128,g=g+1|0,(g|0)!=64;);et[f[2720]](lr,b+(It+zr|0)|0,ne),g=f[i+304>>2]}if(j=j+1|0,!((j|0)<(g|0)))break}}at=me+at|0,x=B+Be|0,Ce=B+kt|0,zr=Ni+-1|0;e:{t:{g=1;r:{if(!f[a+44>>2])break r;s=hn<<4,b=s+16|0;n:{if(hn){f[a+24>>2]=Ce,f[a+20>>2]=at,A=x,s=s-Jr|0;break n}f[a+20>>2]=me+f[i+2268>>2],f[a+24>>2]=B+f[i+2272>>2],A=B+f[i+2276>>2]|0,s=0}if(f[a+28>>2]=A,A=0,f[a+104>>2]=0,g=f[a+88>>2],b=b-((hn|0)>=(zr|0)?0:Jr)|0,Be=(b|0)>(g|0)?g:b,!(!f[i+2348>>2]|(Be|0)<=(s|0))&&(A=Na(i,a,s,Be-s|0),f[a+104>>2]=A,!A))break t;if(b=f[a+84>>2],(b|0)>(s|0)){g=b-s|0,f[a+20>>2]=f[a+20>>2]+J(g,f[i+2280>>2]),s=J(f[i+2284>>2],g>>1),f[a+24>>2]=s+f[a+24>>2],f[a+28>>2]=s+f[a+28>>2];n:{if(!A){A=0;break n}A=J(g,f[a>>2])+A|0,f[a+104>>2]=A}s=b}if(g=1,(Be|0)<=(s|0))break r;kt=f[a+76>>2],f[a+20>>2]=kt+f[a+20>>2],g=kt>>1,f[a+24>>2]=g+f[a+24>>2],f[a+28>>2]=g+f[a+28>>2],A&&(f[a+104>>2]=A+kt),f[a+8>>2]=s-b,f[a+16>>2]=Be-s,f[a+12>>2]=f[a+80>>2]-kt,g=et[f[a+44>>2]](a)|0}if(f[i+156>>2]!=(Sn+1|0)|(hn|0)>=(zr|0))break e;no(f[i+2268>>2]-di|0,at+(f[i+2280>>2]<<4)|0,di),a=0-Sr|0,no(a+f[i+2272>>2]|0,Ce+(f[i+2284>>2]<<3)|0,Sr),no(a+f[i+2276>>2]|0,x+(f[i+2284>>2]<<3)|0,Sr);break e}g=Pi(i,3,4912)}return jn=lr- -64|0,g|0}function Vi(i){i=i|0;var a=0,s=0,g=0,b=0,x=0,A=0,P=0,j=0,B=0;e:{if(!i)break e;g=i+-8|0,s=f[i+-4>>2],i=s&-8,x=g+i|0;t:{if(s&1)break t;if(!(s&3)||(s=f[g>>2],g=g-s|0,g>>>0<ii[2888]))break e;if(i=i+s|0,f[2889]!=(g|0)){if(s>>>0<=255){if(b=f[g+8>>2],s=s>>>3|0,a=f[g+12>>2],(a|0)==(b|0)){j=11536,B=f[2884]&ea(-2,s),f[j>>2]=B;break t}f[b+12>>2]=a,f[a+8>>2]=b;break t}P=f[g+24>>2],s=f[g+12>>2];r:{if((s|0)!=(g|0)){a=f[g+8>>2],f[a+12>>2]=s,f[s+8>>2]=a;break r}n:{if(b=g+20|0,a=f[b>>2],a||(b=g+16|0,a=f[b>>2],a))break n;s=0;break r}for(;A=b,s=a,b=s+20|0,a=f[b>>2],!(!a&&(b=s+16|0,a=f[s+16>>2],!a)););f[A>>2]=0}if(!P)break t;b=f[g+28>>2],a=(b<<2)+11840|0;r:{if(f[a>>2]==(g|0)){if(f[a>>2]=s,s)break r;j=11540,B=f[2885]&ea(-2,b),f[j>>2]=B;break t}if(f[P+(f[P+16>>2]==(g|0)?16:20)>>2]=s,!s)break t}if(f[s+24>>2]=P,a=f[g+16>>2],a&&(f[s+16>>2]=a,f[a+24>>2]=s),a=f[g+20>>2],!a)break t;f[s+20>>2]=a,f[a+24>>2]=s;break t}if(s=f[x+4>>2],(s&3)!=3)break t;f[2886]=i,f[x+4>>2]=s&-2,f[g+4>>2]=i|1,f[i+g>>2]=i;return}if(x>>>0<=g>>>0||(s=f[x+4>>2],!(s&1)))break e;t:{if(!(s&2)){if((x|0)==f[2890]){if(f[2890]=g,i=f[2887]+i|0,f[2887]=i,f[g+4>>2]=i|1,f[2889]!=(g|0))break e;f[2886]=0,f[2889]=0;return}if((x|0)==f[2889]){f[2889]=g,i=f[2886]+i|0,f[2886]=i,f[g+4>>2]=i|1,f[i+g>>2]=i;return}i=(s&-8)+i|0;r:{if(s>>>0<=255){if(a=f[x+8>>2],s=s>>>3|0,b=f[x+12>>2],(a|0)==(b|0)){j=11536,B=f[2884]&ea(-2,s),f[j>>2]=B;break r}f[a+12>>2]=b,f[b+8>>2]=a;break r}P=f[x+24>>2],s=f[x+12>>2];n:{if((x|0)!=(s|0)){a=f[x+8>>2],f[a+12>>2]=s,f[s+8>>2]=a;break n}o:{if(b=x+20|0,a=f[b>>2],a||(b=x+16|0,a=f[b>>2],a))break o;s=0;break n}for(;A=b,s=a,b=s+20|0,a=f[b>>2],!(!a&&(b=s+16|0,a=f[s+16>>2],!a)););f[A>>2]=0}if(!P)break r;b=f[x+28>>2],a=(b<<2)+11840|0;n:{if((x|0)==f[a>>2]){if(f[a>>2]=s,s)break n;j=11540,B=f[2885]&ea(-2,b),f[j>>2]=B;break r}if(f[P+((x|0)==f[P+16>>2]?16:20)>>2]=s,!s)break r}if(f[s+24>>2]=P,a=f[x+16>>2],a&&(f[s+16>>2]=a,f[a+24>>2]=s),a=f[x+20>>2],!a)break r;f[s+20>>2]=a,f[a+24>>2]=s}if(f[g+4>>2]=i|1,f[i+g>>2]=i,f[2889]!=(g|0))break t;f[2886]=i;return}f[x+4>>2]=s&-2,f[g+4>>2]=i|1,f[i+g>>2]=i}if(i>>>0<=255){i=i>>>3|0,s=(i<<3)+11576|0,a=f[2884],i=1<<i;t:{if(!(a&i)){f[2884]=i|a,i=s;break t}i=f[s+8>>2]}f[s+8>>2]=g,f[i+12>>2]=g,f[g+12>>2]=s,f[g+8>>2]=i;return}f[g+16>>2]=0,f[g+20>>2]=0,x=g,b=i>>>8|0,a=0;t:{if(!b||(a=31,i>>>0>16777215))break t;s=b,b=b+1048320>>>16&8,a=s<<b,P=a+520192>>>16&4,a=a<<P,A=a+245760>>>16&2,a=(a<<A>>>15|0)-(A|(b|P))|0,a=(a<<1|i>>>a+21&1)+28|0}f[x+28>>2]=a,A=(a<<2)+11840|0;t:{r:{b=f[2885],s=1<<a;n:{if(!(b&s)){f[2885]=s|b,f[A>>2]=g,f[g+24>>2]=A;break n}for(b=i<<((a|0)==31?0:25-(a>>>1|0)|0),s=f[A>>2];;){if(a=s,(f[s+4>>2]&-8)==(i|0))break r;if(s=b>>>29|0,b=b<<1,A=(a+(s&4)|0)+16|0,s=f[A>>2],!s)break}f[A>>2]=g,f[g+24>>2]=a}f[g+12>>2]=g,f[g+8>>2]=g;break t}i=f[a+8>>2],f[i+12>>2]=g,f[a+8>>2]=g,f[g+24>>2]=0,f[g+12>>2]=a,f[g+8>>2]=i}if(i=f[2892]+-1|0,f[2892]=i,i)break e;for(g=11992;i=f[g>>2],g=i+8|0,!!i;);f[2892]=-1}}function za(i,a,s,g,b){var x=0,A=0,P=0,j=0,B=0,Z=0,ne=0,me=0,Ce=0,Be=0,at=0,kt=0,It=0,Qt=0,lr=0,zr=0,Sr=0,Jr=0,hn=0,Sn=0,di=0;P=jn-128|0,f[P+120>>2]=0,f[P+124>>2]=0,f[P+112>>2]=0,f[P+116>>2]=0,f[P+104>>2]=0,f[P+108>>2]=0,f[P+96>>2]=0,f[P+100>>2]=0,f[P+88>>2]=0,f[P+92>>2]=0,f[P+80>>2]=0,f[P+84>>2]=0,f[P+72>>2]=0,f[P+76>>2]=0,f[P+64>>2]=0,f[P+68>>2]=0;e:{if((g|0)>=1){for(;;){if(A=f[(x<<2)+s>>2],(A|0)>15)break e;if(A=(P- -64|0)+(A<<2)|0,f[A>>2]=f[A>>2]+1,x=x+1|0,(x|0)==(g|0))break}x=f[P+64>>2]}else x=0;if((x|0)==(g|0)||(f[P+4>>2]=0,x=f[P+68>>2],(x|0)>2)||(f[P+8>>2]=x,A=f[P+72>>2],(A|0)>4)||(x=x+A|0,f[P+12>>2]=x,A=f[P+76>>2],(A|0)>8)||(x=x+A|0,f[P+16>>2]=x,A=f[P+80>>2],(A|0)>16)||(x=x+A|0,f[P+20>>2]=x,A=f[P+84>>2],(A|0)>32)||(x=x+A|0,f[P+24>>2]=x,A=f[P+88>>2],(A|0)>64)||(x=x+A|0,f[P+28>>2]=x,A=f[P+92>>2],(A|0)>128)||(x=x+A|0,f[P+32>>2]=x,A=f[P+96>>2],(A|0)>256)||(x=x+A|0,f[P+36>>2]=x,A=f[P+100>>2],(A|0)>512)||(x=x+A|0,f[P+40>>2]=x,A=f[P+104>>2],(A|0)>1024)||(x=x+A|0,f[P+44>>2]=x,A=f[P+108>>2],(A|0)>2048)||(x=x+A|0,f[P+48>>2]=x,A=f[P+112>>2],(A|0)>4096)||(x=x+A|0,f[P+52>>2]=x,A=f[P+116>>2],(A|0)>8192)||(x=x+A|0,f[P+56>>2]=x,A=f[P+120>>2],(A|0)>16384))break e;if(f[P+60>>2]=x+A,x=0,(g|0)>0)for(;;){A=f[(x<<2)+s>>2];t:{if((A|0)<1)break t;if(b){j=P+(A<<2)|0,A=f[j>>2],f[j>>2]=A+1,Pr[(A<<1)+b>>1]=x;break t}A=P+(A<<2)|0,f[A>>2]=f[A>>2]+1}if(x=x+1|0,(x|0)==(g|0))break}if(A=1<<a,at=1,ne=f[P+60>>2],(ne|0)==1){if(!b)return A;for(s=kn[b>>1]<<16,x=A;a=x+-1|0,g=(a<<2)+i|0,Pr[g>>1]=s,Pr[g+2>>1]=s>>>16,g=(x|0)>1,x=a,!!g;);return A}Qt=1;t:{r:{if((a|0)<1)break r;for(Ce=2,x=1;;){if(Be=at<<1,lr=(P- -64|0)+(x<<2)|0,g=f[lr>>2],at=Be-g|0,(at|0)<0)break e;if(s=x,!(!i|(g|0)<1)){for(j=g+me|0,zr=s&255,Z=1<<s+-1;;){for(Sr=(B<<2)+i|0,g=zr|kn[(me<<1)+b>>1]<<16,x=A;x=x-Ce|0,kt=Sr+(x<<2)|0,Pr[kt>>1]=g,Pr[kt+2>>1]=g>>>16,(x|0)>0;);for(g=Z;x=g,g=x>>>1|0,!!(x&B););if(B=x?x+(x+-1&B)|0:B,me=me+1|0,(j|0)==(me|0))break}f[lr>>2]=0,me=j}if(Qt=Be+Qt|0,Ce=Ce<<1,x=s+1|0,(a|0)==(s|0))break}if((a|0)<=14)break r;Be=A;break t}for(Sn=A+-1|0,j=a,Z=-1,Ce=2,ne=i,Be=A;;){if(It=0,lr=j,Jr=at<<1,j=j+1|0,kt=(P- -64|0)+(j<<2)|0,s=f[kt>>2],at=Jr-s|0,(at|0)<0)break e;if(!(!i|(s|0)<1))for(Sr=1<<lr,It=j-a|0,di=It&255,zr=1<<It,x=Z;;){Z=B&Sn;r:{if((Z|0)==(x|0)){Z=x;break r}if(ne=(A<<2)+ne|0,A=zr,x=It,(lr|0)<=13){x=j,g=x,s=zr-s|0;n:{if((s|0)<1)break n;for(;;){if(g=15,x=x+1|0,(x|0)==15)break n;if(g=x,s=(s<<1)-f[(P- -64|0)+(x<<2)>>2]|0,!((s|0)>0))break}}x=g-a|0,A=1<<x}s=(Z<<2)+i|0,m[s|0]=a+x,Pr[s+2>>1]=(ne-i>>>2|0)-Z,Be=A+Be|0}for(g=(B>>>a<<2)+ne|0,s=di|kn[(me<<1)+b>>1]<<16,x=A;x=x-Ce|0,hn=g+(x<<2)|0,Pr[hn>>1]=s,Pr[hn+2>>1]=s>>>16,(x|0)>0;);for(g=Sr;x=g,g=x>>>1|0,!!(x&B););if(g=f[kt>>2],s=g+-1|0,f[kt>>2]=s,B=x?x+(x+-1&B)|0:B,me=me+1|0,x=Z,!((g|0)>1))break}if(Qt=Qt+Jr|0,Ce=Ce<<1,(j|0)==15)break}ne=f[P+60>>2]}It=((ne<<1)+-1|0)==(Qt|0)?Be:0}return It}function Sa(i,a){var s=0,g=0,b=0,x=0,A=0,P=0,j=0,B=0,Z=0,ne=0,me=0,Ce=0,Be=0,at=0,kt=0,It=0,Qt=0,lr=0,zr=0,Sr=0,Jr=0,hn=0,Sn=0,di=0;It=jn-32|0,jn=It,A=f[i+2256>>2],ne=f[i+2296>>2],Qt=A+(ne<<1)|0,at=f[i+2304>>2];e:{t:{if(f[i+2236>>2]&&(s=J(ne,800)+at|0,L[s+797|0]))break t;if(b=J(ne,800)+at|0,lr=L[b+798|0],j=3,g=ua(b,0,768),!L[g+768|0]){s=It,f[s+24>>2]=0,f[s+28>>2]=0,f[s+16>>2]=0,f[s+20>>2]=0,f[s+8>>2]=0,f[s+12>>2]=0,f[s>>2]=0,f[s+4>>2]=0,x=A+-1|0,j=A+(ne<<1)|0,B=et[f[2661]](a,i+2032|0,L[x|0]+L[j+1|0]|0,((lr<<5)+i|0)+784|0,0,s)|0,s=(B|0)>0,m[x|0]=s,m[j+1|0]=s;r:{if((B|0)>=2){et[f[2674]](It,g);break r}s=J(ne,800)+at|0,g=Pr[It>>1]+3>>>3|0,Pr[s+480>>1]=g,Pr[s+448>>1]=g,Pr[s+416>>1]=g,Pr[s+384>>1]=g,Pr[s+352>>1]=g,Pr[s+320>>1]=g,Pr[s+288>>1]=g,Pr[s+256>>1]=g,Pr[s+224>>1]=g,Pr[s+192>>1]=g,Pr[s+160>>1]=g,Pr[s+128>>1]=g,Pr[s+96>>1]=g,Pr[s+64>>1]=g,Pr[s+32>>1]=g,Pr[s>>1]=g}j=0,x=1}for(s=L[Qt|0]&15,g=((lr<<5)+i|0)+776|0,Sr=A+-2|0,A=L[Sr|0]&15,j=(J(j,68)+i|0)+1964|0;B=et[f[2661]](a,j,(A&1)+(s&1)|0,g,x,b)|0,me=kn[b>>1],P=(B|0)>(x|0),Z=s>>>1|0,s=et[f[2661]](a,j,P+(Z&1)|0,g,x,b+32|0)|0,Ce=kn[b+32>>1],Be=(s|0)>(x|0),P=(Z&126|P<<7)>>>1|0,Z=et[f[2661]](a,j,Be+(P&1)|0,g,x,b- -64|0)|0,Jr=kn[b+64>>1],zr=(Z|0)>(x|0),Be=(P|Be<<7)>>>1|0,P=et[f[2661]](a,j,zr+(Be&1)|0,g,x,b+96|0)|0,hn=(((s|0)>3?3:(s|0)<2?(Ce|0)!=0:2)|((B|0)>3?12:(B|0)<2?((me|0)!=0)<<2:8))<<4|hn<<8|((Z|0)>3?12:(Z|0)<2?((Jr|0)!=0)<<2:8)|((P|0)>3?3:(P|0)<2?kn[b+96>>1]!=0:2),B=(P|0)>(x|0),s=B<<3|(Be|zr<<7)>>>5,A=B<<7|(A&254)>>>1,b=b+128|0,kt=kt+1|0,(kt|0)!=4;);for(j=i+2100|0,kt=A>>>4|0,Z=s&255,B=((lr<<5)+i|0)+792|0,A=0,s=1,x=0;g=x|4,me=L[Sr|0]>>>g|0,P=L[Qt|0]>>>g|0,g=et[f[2661]](a,j,(me&1)+(P&1)|0,B,0,b)|0,Be=kn[b>>1],Ce=(g|0)>0,P=et[f[2661]](a,j,Ce+(P>>>1&1)|0,B,0,b+32|0)|0,Jr=kn[b+32>>1],me=et[f[2661]](a,j,Ce+(me>>>1&1)|0,B,0,b- -64|0)|0,zr=kn[b+64>>1],Sn=(me|0)>0,di=(P|0)>0,Ce=et[f[2661]](a,j,Sn+di|0,B,0,b+96|0)|0,A=((((P|0)>3?3:(P|0)<2?(Jr|0)!=0:2)|((g|0)>3?12:(g|0)<2?((Be|0)!=0)<<2:8))<<4|((me|0)>3?12:(me|0)<2?((zr|0)!=0)<<2:8)|((Ce|0)>3?3:(Ce|0)<2?kn[b+96>>1]!=0:2))<<(x<<2)|A,g=(Ce|0)>0,kt=(g<<5|di<<4)<<x|kt,Z=(g<<1|Sn)<<4<<x|Z,b=b+128|0,g=s,s=0,x=2,!!g;);m[Qt|0]=Z,m[Sr|0]=kt,s=J(ne,800)+at|0,f[s+792>>2]=A,f[s+788>>2]=hn,m[s+796|0]=A&43690?0:f[((lr<<5)+i|0)+804>>2],x=(A|hn)!=0;break e}m[Qt|0]=0,m[A+-2|0]=0,L[s+768|0]||(m[(A+(ne<<1)|0)+1|0]=0,m[A+-1|0]=0),s=J(ne,800)+at|0,f[s+788>>2]=0,f[s+792>>2]=0,m[s+796|0]=0}return f[i+2308>>2]>=1&&(s=f[i+2260>>2]+(f[i+2296>>2]<<2)|0,g=i,i=J(ne,800)+at|0,i=f[((g+(L[i+798|0]<<3)|0)+(L[i+768|0]<<2)|0)+2312>>2],m[s|0]=i,m[s+1|0]=i>>>8,m[s+2|0]=i>>>16,m[s+3|0]=i>>>24,m[s+2|0]=L[s+2|0]|x),jn=It+32|0,!f[a+24>>2]}function Zl(i,a,s,g,b){var x=0,A=0,P=0,j=0,B=0,Z=0,ne=0,me=0,Ce=0,Be=0,at=0,kt=0,It=0,Qt=0,lr=0,zr=0,Sr=0;Ce=jn-16|0,jn=Ce,A=f[i+8>>2];e:{t:switch(f[i>>2]){case 2:et[f[2733]](g,J(A,s-a|0),b);break e;case 0:r:{if(a){ne=A+-1|0,Z=b,x=a;break r}if(x=f[g>>2],x=x+-16777216&-16711936|x&16711935,f[b>>2]=x,ne=A+-1|0,(A|0)>=2)for(Z=b+4|0,B=g+4|0;me=j<<2,P=f[me+B>>2],x=(P&-16711936)+(x&-16711936)&-16711936|(P&16711935)+(x&16711935)&16711935,f[Z+me>>2]=x,j=j+1|0,(ne|0)!=(j|0););x=A<<2,Z=x+b|0,g=g+x|0,x=1}if(B=x,(B|0)<(s|0))for(x=f[i+4>>2],It=1<<x,zr=It+-1|0,Be=0-It|0,at=0-A|0,kt=ne+It>>>x|0,me=f[i+16>>2]+(J(kt,B>>x)<<2)|0;;){if(P=f[g>>2],ne=at<<2,x=f[ne+Z>>2],f[Z>>2]=(P&-16711936)+(x&-16711936)&-16711936|(P&16711935)+(x&16711935)&16711935,x=1,j=me,(A|0)>=2)for(;P=x<<2,lr=P+Z|0,Sr=g+P|0,Qt=It+(x&Be)|0,P=(Qt|0)>(A|0)?A:Qt,et[f[(f[j>>2]>>>6&60)+10960>>2]](Sr,ne+lr|0,P-x|0,lr),j=j+4|0,x=P,(A|0)>(Qt|0););if(B=B+1|0,me=zr&B?me:(kt<<2)+me|0,x=A<<2,Z=x+Z|0,g=g+x|0,(s|0)==(B|0))break}if(f[i+12>>2]==(s|0))break e;i=A<<2,no(b-i|0,(J(A,(a^-1)+s|0)<<2)+b|0,i);break e;case 1:if((s|0)<=(a|0))break e;for(x=f[i+4>>2],Be=1<<x,at=A&0-Be,kt=A-at|0,ne=Be+-1|0,j=ne+A>>>x|0,i=f[i+16>>2]+(J(j,a>>x)<<2)|0,Z=(at|0)<1;;){m[Ce+10|0]=0,Pr[Ce+8>>1]=0,B=(A<<2)+g|0;r:{if(Z){x=i;break r}for(me=(at<<2)+g|0,x=i;P=f[x>>2],m[Ce+8|0]=P,m[Ce+10|0]=P>>>16,m[Ce+9|0]=P>>>8,et[f[2804]](Ce+8|0,g,Be,b),x=x+4|0,P=Be<<2,b=P+b|0,g=g+P|0,g>>>0<me>>>0;);}if(g>>>0<B>>>0&&(x=f[x>>2],m[Ce+8|0]=x,m[Ce+10|0]=x>>>16,m[Ce+9|0]=x>>>8,et[f[2804]](Ce+8|0,g,kt,b),x=kt<<2,b=x+b|0,g=g+x|0),a=a+1|0,i=ne&a?i:(j<<2)+i|0,(a|0)==(s|0))break}break e;case 3:break t;default:break e}if(x=f[i+4>>2],!((g|0)!=(b|0)|(x|0)<1)){if(b=s-a|0,x=J(b,(A+(1<<x)|0)+-1>>>x|0)<<2,j=((J(b,A)<<2)+g|0)-x|0,b=Nc(j,g,x),Z=f[i+16>>2],ne=f[i+8>>2],i=f[i+4>>2],B=8>>>i|0,(B|0)<=7){if((s|0)<=(a|0))break e;for(me=-1<<B^-1,P=-1<<i^-1,i=(ne|0)<1;;){if(x=0,b=0,!i)for(;x&P||(b=L[j+1|0],j=j+4|0),f[g>>2]=f[Z+((b&me)<<2)>>2],b=b>>>B|0,g=g+4|0,x=x+1|0,(ne|0)!=(x|0););if(a=a+1|0,(s|0)==(a|0))break}break e}et[f[2805]](b,Z,g,a,s,ne);break e}if(Z=f[i+16>>2],B=8>>>x|0,(B|0)<=7){if((s|0)<=(a|0))break e;for(me=-1<<B^-1,P=-1<<x^-1,i=(A|0)<1;;){if(j=0,x=0,!i)for(;j&P||(x=L[g+1|0],g=g+4|0),f[b>>2]=f[Z+((x&me)<<2)>>2],x=x>>>B|0,b=b+4|0,j=j+1|0,(A|0)!=(j|0););if(a=a+1|0,(s|0)==(a|0))break}break e}et[f[2805]](g,Z,b,a,s,A)}jn=Ce+16|0}function wl(i,a,s,g,b,x,A,P){var j=0,B=0,Z=0,ne=0,me=0,Ce=0,Be=0,at=0,kt=0,It=0,Qt=0,lr=0,zr=0,Sr=0,Jr=0,hn=0;ne=jn-16|0,jn=ne,f[ne+12>>2]=0,f[ne+8>>2]=0,Jr=P?f[P+8>>2]:0;e:{if(!i){Z=7;break e}if(a>>>0<12){Z=7;break e}if(B=a,j=i,kt=Fc(j,5463),!kt){if(Z=3,(L[i+8|0]|L[i+9|0]<<8|(L[i+10|0]<<16|L[i+11|0]<<24))!=1346520407||(Be=L[i+4|0]|L[i+5|0]<<8|(L[i+6|0]<<16|L[i+7|0]<<24),Be+-12>>>0>4294967274))break e;if(!(!Jr|Be>>>0<=a+-8>>>0)){Z=7;break e}if(B=a+-12|0,B>>>0<8){Z=7;break e}j=i+12|0}at=Fc(j,5468);t:{if(at){Z=0;break t}if(Z=3,(L[j+4|0]|L[j+5|0]<<8|(L[j+6|0]<<16|L[j+7|0]<<24))!=10)break e;if(B>>>0<18){Z=7;break e}if(me=1,Qt=(L[j+12|0]|L[j+13|0]<<8|L[j+14|0]<<16)+1|0,lr=(L[j+15|0]|L[j+16|0]<<8|L[j+17|0]<<16)+1|0,Ei(Qt,0,lr,0),kt|Fn)break e;Z=L[j+8|0],B=B+-18|0,j=j+18|0,zr=(Z&2)>>>1|0}b&&(f[b>>2]=Z>>>4&1),x&&(f[x>>2]=zr),A&&(f[A>>2]=0),f[ne+8>>2]=lr,f[ne+12>>2]=Qt;t:{if(!P&&(x=0,!at&zr))break t;x=0;r:{if(B>>>0<4)break r;n:{if(me|Be|(L[j|0]|L[j+1|0]<<8|(L[j+2|0]<<16|L[j+3|0]<<24))!=1213221953&&at|kt)break n;if(B>>>0<8)break r;for(Sr=22;;){if(Z=3,Ce=L[j+4|0]|L[j+5|0]<<8|(L[j+6|0]<<16|L[j+7|0]<<24),Ce>>>0>4294967286||(It=Ce+9&-2,Sr=It+Sr|0,Sr>>>0>Be>>>0&&!kt))break e;if((L[j|0]|L[j+1|0]<<8|(L[j+2|0]<<16|L[j+3|0]<<24))==540561494|(L[j|0]|L[j+1|0]<<8|(L[j+2|0]<<16|L[j+3|0]<<24))==1278758998)break n;if(B>>>0<It>>>0)break r;if(me=(L[j|0]|L[j+1|0]<<8|(L[j+2|0]<<16|L[j+3|0]<<24))==1213221953,x=me?j+8|0:x,hn=me?Ce:hn,j=j+It|0,B=B-It|0,!(B>>>0>=8))break}break r}if(B>>>0<8)break r;Ce=L[j|0]|L[j+1|0]<<8|(L[j+2|0]<<16|L[j+3|0]<<24);n:{if(!((L[j|0]|L[j+1|0]<<8|(L[j+2|0]<<16|L[j+3|0]<<24))!=540561494&&(Ce|0)!=1278758998)){if(me=L[j+4|0]|L[j+5|0]<<8|(L[j+6|0]<<16|L[j+7|0]<<24),Be>>>0>=12&&(Z=3,me>>>0>Be+-12>>>0))break e;if(B=B+-8|0,me>>>0>B>>>0&&Jr)break r;j=j+8|0,Ce=(Ce|0)==1278758998;break n}me=B,Ce=L[j|0]!=47|B>>>0<5?0:L[j+4|0]<32}if(Z=3,me>>>0>4294967286)break e;zr|!A||(f[A>>2]=Ce?2:1);n:{if(!Ce){if(B>>>0<10)break r;if(gt(j,B,me,ne+12|0,ne+8|0))break n;break e}if(B>>>0<5)break r;if(!Wr(j,B,ne+12|0,ne+8|0,b))break e}if(f[ne+12>>2]!=(Qt|0)|f[ne+8>>2]!=(lr|0)&&!at)break e;if(!P)break t;f[P+8>>2]=0,f[P+12>>2]=0,f[P+4>>2]=a,f[P>>2]=i,f[P+32>>2]=Ce,f[P+28>>2]=Be,f[P+24>>2]=me,f[P+20>>2]=hn,f[P+16>>2]=x,f[P+12>>2]=j-i;break t}if(P){Z=7;break e}if(Z=7,at)break e}if(b&&(f[b>>2]=f[b>>2]|(x|0)!=0),s&&(f[s>>2]=f[ne+12>>2]),Z=0,!g)break e;f[g>>2]=f[ne+8>>2]}return jn=ne+16|0,Z}function Hu(i,a){i=i|0,a=a|0;var s=0,g=0,b=0,x=0,A=0,P=0,j=0,B=0,Z=0,ne=0,me=0,Ce=0,Be=0,at=0;e:{P=f[i+108>>2],s=a-P|0;t:{if((s|0)<1)break t;A=f[i+8>>2],Ce=f[A>>2],g=f[i+100>>2],B=f[i+16>>2]+(J(g,P)<<2)|0,j=f[i+20>>2],ne=f[i+176>>2];r:{if((ne|0)>=1){if(s=ne+-1|0,Zl((J(s,20)+i|0)+180|0,P,a,B,j),(ne|0)<2)break r;for(;g=s+-1|0,Zl((J(g,20)+i|0)+180|0,P,a,j,j),ne=(s|0)>1,s=g,!!ne;);break r}if((j|0)==(B|0))break r;no(j,B,J(s,g)<<2)}if(P=f[A+84>>2],B=f[i+108>>2],ne=(P|0)>(B|0),g=f[A+88>>2],g=(g|0)<(a|0)?g:a,s=ne?P:B,(g|0)<=(s|0))break t;if(g=g-s|0,f[A+16>>2]=g,f[A+8>>2]=s-P,s=f[A+76>>2],b=f[A+80>>2]-s|0,f[A+12>>2]=b,Be=Ce<<2,me=(s<<2)+(ne?j+J(Be,P-B|0)|0:j)|0,s=f[i+12>>2],P=f[s>>2],P>>>0>10)break e;j=f[s+20>>2],at=f[s+16>>2]+J(j,f[i+116>>2])|0;r:{if(f[A+92>>2]){if((g|0)<1)break r;for(;;){Ce=g-Z|0,ne=_n(f[i+268>>2],Ce),s=J(Z,Be)+me|0,Zt(s,Be,f[f[i+268>>2]+44>>2],ne),Z=wa(f[i+268>>2],Ce,s,Be)+Z|0,s=0,b=f[i+268>>2];n:{if(f[b+64>>2]>=f[b+56>>2])break n;for(ne=J(x,j)+at|0,B=f[b+52>>2],Ce=f[b+68>>2];;){if(f[b+24>>2]>0)break n;if(Gr(b),et[f[2662]](Ce,B,1),Fo(Ce,B,P,ne+J(s,j)|0),s=s+1|0,!(f[b+64>>2]<f[b+56>>2]))break}}if(x=s+x|0,!((Z|0)<(g|0)))break}break r}if((g|0)>=1)for(s=g;Fo(me,b,P,at),at=j+at|0,me=me+Be|0,x=(s|0)>1,s=s+-1|0,!!x;);x=g}f[i+116>>2]=f[i+116>>2]+x}f[i+108>>2]=a;return}Z=f[i+116>>2];e:{if(f[A+92>>2]){if((g|0)<1)break e;for(;;){s=g-at|0,x=_n(f[i+268>>2],s),Zt(me,Be,f[f[i+268>>2]+44>>2],x),Ce=J(x,Be),at=wa(f[i+268>>2],s,me,Be)+at|0,P=0,A=f[i+268>>2];t:{if(f[A+64>>2]>=f[A+56>>2])break t;for(j=f[A+52>>2],B=f[A+68>>2],ne=B+3|0,s=Z;;){if(f[A+24>>2]>0)break t;if(Gr(A),et[f[2662]](B,j,1),b=f[i+12>>2],et[f[2860]](B,f[b+16>>2]+J(f[b+32>>2],s)|0,j),x=s>>1,et[f[2861]](B,f[b+20>>2]+J(x,f[b+36>>2])|0,f[b+24>>2]+J(x,f[b+40>>2])|0,j,(s^-1)&1),x=f[b+28>>2],x&&et[f[2668]](ne,0,j,1,x+J(f[b+44>>2],s)|0,0)|0,P=P+1|0,s=s+1|0,!(f[A+64>>2]<f[A+56>>2]))break}}if(me=me+Ce|0,Z=Z+P|0,!((at|0)<(g|0)))break}break e}if((g|0)<1)break e;for(;;){if(et[f[2860]](me,f[s+16>>2]+J(f[s+32>>2],Z)|0,b),x=Z>>1,et[f[2861]](me,f[s+20>>2]+J(x,f[s+36>>2])|0,f[s+24>>2]+J(x,f[s+40>>2])|0,b,(Z^-1)&1),x=f[s+28>>2],x&&et[f[2668]](me+3|0,0,b,1,x+J(f[s+44>>2],Z)|0,0)|0,Z=Z+1|0,(g|0)<2)break e;g=g+-1|0,me=me+Be|0,s=f[i+12>>2]}}f[i+116>>2]=Z,f[i+108>>2]=a}function Ds(i){i=i|0;var a=0,s=0,g=0,b=0,x=0,A=0,P=0,j=0,B=0,Z=0,ne=0,me=0,Ce=0,Be=0,at=0;a=f[i+40>>2],g=f[f[a>>2]>>2],b=g+-1|0;e:{if(b>>>0<12&&(s=0,2077>>>(b&65535)&1))break e;s=g+-7>>>0>3}f[a+40>>2]=0,f[a+44>>2]=0,f[a+48>>2]=0,f[a+52>>2]=0;e:{if(!As(f[a+20>>2],i,s?12:11))break e;s|g+-7>>>0>3||Js(),x=a+40|0;t:{r:{n:{o:{l:{if(f[i+92>>2]){if(s=f[a>>2],P=f[s>>2],A=P+-1|0,g>>>0<=10){if(A>>>0>=12||(b=0,!(2077>>>(A&65535)&1)))break n;break r}if(A>>>0>=12||(g=0,!(2077>>>(A&65535)&1)))break l;break o}i:{if(g>>>0<=10){if(tu(),f[a+44>>2]=6,!f[i+56>>2])break i;if(b=f[i+12>>2],A=b+1|0,b=Ta(1,0,(A&-2)+b|0),f[x>>2]=b,!b)break e;f[a+4>>2]=b,i=f[i+12>>2],f[a+44>>2]=7,i=i+b|0,f[a+8>>2]=i,f[a+12>>2]=i+(A>>1),Js();break i}f[a+44>>2]=8}if(j=1,s)break e;i=9;i:switch(g+-5|0){default:i=g>>>0<11?10:11;break;case 0:case 5:break i}if(f[a+48>>2]=i,g>>>0>10)break e;break t}g=P+-7>>>0>3}if(P=f[i+100>>2],B=f[i+12>>2],Z=f[i+16>>2],ne=x,b=f[i+96>>2],x=b+1|0,me=x&-2,Ce=me<<1,Be=b<<1,at=(Ce+Be<<2)+(g?0:b<<3)|0,A=Ta(1,0,at+(g?283:367)|0),f[ne>>2]=A,!A||(j=(A+at|0)+31&-32,f[a+24>>2]=j,f[a+32>>2]=j+168,f[a+28>>2]=j+84,f[a+36>>2]=g?0:j+252|0,ol(j,f[i+12>>2],f[i+16>>2],f[s+16>>2],b,P,f[s+32>>2],1,A),j=B+1>>1,B=Z+1>>1,x=x>>1,Z=P+1>>1,A=A+(Be<<2)|0,ol(f[a+28>>2],j,B,f[s+20>>2],x,Z,f[s+36>>2],1,A),ol(f[a+32>>2],j,B,f[s+24>>2],x,Z,f[s+40>>2],1,A+(me<<2)|0),f[a+44>>2]=12,j=1,g))break e;ol(f[a+36>>2],f[i+12>>2],f[i+16>>2],f[s+28>>2],b,P,f[s+44>>2],1,A+(Ce<<2)|0),f[a+48>>2]=13;break t}b=P+-7>>>0>3}if(A=f[i+100>>2],B=f[i+12>>2],Z=f[i+16>>2],s=f[i+96>>2],me=J(s,6),P=(b?me:s<<3)<<2,ne=x,Ce=J(s,3),Be=s<<2,x=P+(b?Ce:Be)|0,g=Ta(1,0,x+(b?283:367)|0),f[ne>>2]=g,!g||(j=1,x=(g+x|0)+31&-32,f[a+24>>2]=x,f[a+32>>2]=x+168,f[a+28>>2]=x+84,f[a+36>>2]=b?0:x+252|0,ne=x,x=g+P|0,ol(ne,f[i+12>>2],f[i+16>>2],x,s,A,0,1,g),P=B+1>>1,B=Z+1>>1,Z=s<<1,ol(f[a+28>>2],P,B,s+x|0,s,A,0,1,g+(Z<<2)|0),ol(f[a+32>>2],P,B,x+Z|0,s,A,0,1,g+(Be<<2)|0),f[a+44>>2]=14,Fs(),b))break e;ol(f[a+36>>2],f[i+12>>2],f[i+16>>2],x+Ce|0,s,A,0,1,g+(me<<2)|0),f[a+48>>2]=15,i=16;r:switch(f[f[a>>2]>>2]+-5|0){default:i=17;break;case 0:case 5:break r}f[a+52>>2]=i}fa()}return j|0}function xl(i,a,s,g,b){var x=0,A=0,P=0,j=0,B=0,Z=0,ne=0,me=0,Ce=0,Be=0,at=0,kt=0,It=0,Qt=0,lr=0,zr=0,Sr=0,Jr=0,hn=0,Sn=0,di=0,Ni=0,Ua=0,Ks=0,iu=0;Jr=jn-256|0,jn=Jr,x=(b|0)/25|0;e:{if(!i|b>>>0>100|((a|0)<1|(s|0)<1)||(A=1,di=s+-1|0,Be=a+-1|0,b=(x<<1|1)>(a|0)?Be>>1:x,Z=(b<<1|1)>(s|0)?di>>1:b,(Z|0)<1)||(A=0,B=a<<1,x=Z<<1,b=J(B,x+2|0),lr=Ta(1,0,(b+B|0)+4094|0),!lr))break e;for(It=0-Z|0,x=x|1,me=(J(x,a)<<1)+lr|0,j=me-B|0,ua(j,0,B),at=ua(Jr,0,256),Sr=b+lr|0,zr=J(x,x),hn=255,ne=255,x=i;;){for(A=0;b=L[A+x|0],m[b+at|0]=1,Ce=(P|0)<(b|0),P=Ce?b:P,Ni=Ce?b:Ni,Ce=(ne|0)>(b|0),ne=Ce?b:ne,hn=Ce?b:hn,A=A+1|0,(A|0)!=(a|0););if(x=g+x|0,kt=kt+1|0,(kt|0)==(s|0))break}for(P=P-ne|0,Ce=262144/(zr>>>0)|0,x=B+Sr|0,A=-1,ne=0,b=0;L[b+at|0]&&(ne=ne+1|0,(A|0)>=0&&(A=b-A|0,P=(A|0)<(P|0)?A:P),A=b),b=b+1|0,(b|0)!=256;);for(A=P<<2,at=J(P,12)>>2,P=A-at|0,zr=x+2046|0,b=1;;){kt=b<<1,Qt=kt+zr|0,x=b;t:{if((b|0)<=(at|0)||(x=0,(A|0)<=(b|0)))break t;x=(J(at,A-b|0)|0)/(P|0)|0}if(x=x>>>2|0,Pr[Qt>>1]=x,Pr[zr-kt>>1]=0-x,b=b+1|0,(b|0)==1024)break}if(Pr[zr>>1]=0,!((ne|0)<3|(It|0)>=(s|0)))for(kt=Z^-1,ne=a-Z|0,at=Z+1|0,Ua=Z+-1|0,Ks=(B-Z|0)+-2|0,iu=(Be<<1)+me|0,A=lr,x=i;;){if(P=0,b=0,Qt=(a|0)<1,!Qt)for(;P=L[b+x|0]+(P&65535)|0,B=b<<1,Be=P+kn[B+j>>1]|0,Sn=B+me|0,B=A+B|0,Pr[Sn>>1]=Be-kn[B>>1],Pr[B>>1]=Be,b=b+1|0,(b|0)!=(a|0););if(P=(It|0)<(di|0)?g+x|0:x,B=(It|0)>-1,Be=(a<<1)+A|0,Sn=(Be|0)==(me|0),(It|0)>=(Z|0)){if(b=0,(Z|0)>-1){for(;Pr[(b<<1)+Sr>>1]=J(Ce,kn[(Z-b<<1)+me>>1]+kn[(b+Ua<<1)+me>>1]&65535)>>>16,j=(b|0)==(Z|0),b=b+1|0,!j;);b=at}if((b|0)<(ne|0)){for(;Pr[(b<<1)+Sr>>1]=J(Ce,kn[(b+Z<<1)+me>>1]-kn[(b+kt<<1)+me>>1]&65535)>>>16,b=b+1|0,(ne|0)!=(b|0););b=ne}if((b|0)<(a|0))for(;Pr[(b<<1)+Sr>>1]=J(Ce,((kn[iu>>1]<<1)-kn[(Ks-b<<1)+me>>1]|0)-kn[(b+kt<<1)+me>>1]&65535)>>>16,b=b+1|0,(b|0)!=(a|0););if(b=0,!Qt)for(;Qt=i+b|0,j=L[Qt|0],(Ni|0)<=(j|0)|(hn|0)>=(j|0)||(j=j+Pr[(kn[(b<<1)+Sr>>1]-(j<<2)<<1)+zr>>1]|0,j=(j|0)>0?j:0,m[Qt|0]=(j|0)<255?j:255),b=b+1|0,(b|0)!=(a|0););i=i+g|0}if(x=B?P:x,j=A,A=Sn?lr:Be,It=It+1|0,(It|0)==(s|0))break}Vi(lr),A=1}return jn=Jr+256|0,A}function nl(i,a,s,g,b,x){i=i|0,a=a|0,s=s|0,g=g|0,b=b|0,x=x|0;var A=0,P=0,j=0,B=0,Z=0,ne=0,me=0,Ce=0,Be=0,at=0;e:{if((b|0)<=15)for(Ce=f[(b<<2)+a>>2]+J(s,11)|0,s=f[i+8>>2],j=f[i+4>>2];;){A=L[Ce|0];t:{if((s|0)>-1)break t;if(ne=f[i+12>>2],ne>>>0<ii[i+20>>2]){P=L[ne|0]|L[ne+1|0]<<8|(L[ne+2|0]<<16|L[ne+3|0]<<24),f[i+12>>2]=ne+3,s=s+24|0,f[i+8>>2]=s,f[i>>2]=f[i>>2]<<24|(P>>>8&65280|(P<<8&16711680|P<<24))>>>8;break t}Fi(i),s=f[i+8>>2]}me=i,P=s,B=f[i>>2],Z=B>>>s|0,A=J(A,j)>>>8|0;t:{if(Z>>>0>A>>>0){B=((A^-1)<<s)+B|0,f[i>>2]=B,j=j-A|0;break t}j=A+1|0}if(ne=Ri(j)^24,s=P-ne|0,f[me+8>>2]=s,j=(j<<ne)+-1|0,f[i+4>>2]=j,ne=b,me=b,Z>>>0<=A>>>0)break e;for(;;){A=L[Ce+1|0];t:{if((s|0)>-1)break t;if(b=f[i+12>>2],b>>>0<ii[i+20>>2]){P=L[b|0]|L[b+1|0]<<8|(L[b+2|0]<<16|L[b+3|0]<<24),s=s+24|0,f[i+8>>2]=s,f[i+12>>2]=b+3,B=B<<24|(P>>>8&65280|(P<<8&16711680|P<<24))>>>8,f[i>>2]=B;break t}Fi(i),B=f[i>>2],s=f[i+8>>2]}me=i,P=s,Z=B>>>s|0,A=J(A,j)>>>8|0;t:{if(Z>>>0>A>>>0){B=((A^-1)<<s)+B|0,f[i>>2]=B,j=j-A|0;break t}j=A+1|0}if(b=Ri(j)^24,s=P-b|0,f[me+8>>2]=s,j=(j<<b)+-1|0,f[i+4>>2]=j,b=ne+1|0,Z>>>0<=A>>>0){if(me=16,(b|0)==16)break e;Ce=f[(b<<2)+a>>2],ne=b;continue}break}Be=f[(b<<2)+a>>2],Z=L[Ce+2|0];t:{if((s|0)>-1)break t;if(P=f[i+12>>2],P>>>0<ii[i+20>>2]){A=L[P|0]|L[P+1|0]<<8|(L[P+2|0]<<16|L[P+3|0]<<24),s=s+24|0,f[i+8>>2]=s,f[i+12>>2]=P+3,B=B<<24|(A>>>8&65280|(A<<8&16711680|A<<24))>>>8,f[i>>2]=B;break t}Fi(i),B=f[i>>2],s=f[i+8>>2]}me=i,P=s,at=B>>>s|0,Z=J(j,Z)>>>8|0;t:{if(at>>>0>Z>>>0){f[i>>2]=((Z^-1)<<s)+B,s=j-Z|0;break t}s=Z+1|0}A=Ri(s)^24,P=P-A|0,f[me+8>>2]=P,f[i+4>>2]=(s<<A)+-1;t:{if(at>>>0<=Z>>>0){B=1,Ce=Be+11|0;break t}B=Lo(i,Ce),P=f[i+8>>2],Ce=Be+22|0}t:{if((P|0)>-1)break t;if(s=f[i+12>>2],s>>>0<ii[i+20>>2]){A=L[s|0]|L[s+1|0]<<8|(L[s+2|0]<<16|L[s+3|0]<<24),f[i+12>>2]=s+3,P=P+24|0,f[i+8>>2]=P,f[i>>2]=f[i>>2]<<24|(A>>>8&65280|(A<<8&16711680|A<<24))>>>8;break t}Fi(i),P=f[i+8>>2]}if(s=P+-1|0,f[i+8>>2]=s,j=f[i+4>>2],Z=j>>>1|0,Be=f[i>>2],A=Z-(Be>>>P|0)>>31,j=A+j|1,f[i+4>>2]=j,f[i>>2]=Be-((A&Z+1)<<P),Pr[(L[ne+5328|0]<<1)+x>>1]=J(f[(((ne|0)>0)<<2)+g>>2],(A^B)-A|0),!((ne|0)<15))break}me=16}return me|0}function wu(i,a,s,g,b,x){i=i|0,a=a|0,s=s|0,g=g|0,b=b|0,x=x|0;var A=0,P=0,j=0,B=0,Z=0,ne=0,me=0,Ce=0,Be=0;e:{if((b|0)<=15)for(Ce=f[(b<<2)+a>>2]+J(s,11)|0,P=f[i+8>>2],A=f[i+4>>2];;){B=L[Ce|0];t:{if((P|0)>-1)break t;if(s=f[i+12>>2],s>>>0<ii[i+20>>2]){ne=L[s|0]|L[s+1|0]<<8|(L[s+2|0]<<16|L[s+3|0]<<24),f[i+12>>2]=s+3,P=P+24|0,f[i+8>>2]=P,f[i>>2]=f[i>>2]<<24|(ne>>>8&65280|(ne<<8&16711680|ne<<24))>>>8;break t}Fi(i),P=f[i+8>>2]}if(j=f[i>>2],s=J(A,B)>>>8|0,B=j>>>P>>>0<=s>>>0,B||(s=s+1|0,j=j-(s<<P)|0,f[i>>2]=j,s=A-s|0),s>>>0<=126&&(P=P-L[s+9056|0]|0,f[i+8>>2]=P,s=L[s+9184|0]),f[i+4>>2]=s,ne=b,A=b,B)break e;for(;;){B=L[Ce+1|0];t:{if((P|0)>-1)break t;if(b=f[i+12>>2],b>>>0<ii[i+20>>2]){A=L[b|0]|L[b+1|0]<<8|(L[b+2|0]<<16|L[b+3|0]<<24),P=P+24|0,f[i+8>>2]=P,f[i+12>>2]=b+3,j=j<<24|(A>>>8&65280|(A<<8&16711680|A<<24))>>>8,f[i>>2]=j;break t}Fi(i),j=f[i>>2],P=f[i+8>>2]}Z=j>>>P|0,A=J(s,B)>>>8|0;t:{if(Z>>>0<=A>>>0){s=A;break t}b=A+1|0,j=j-(b<<P)|0,f[i>>2]=j,s=s-b|0}if(s>>>0<=126&&(P=P-L[s+9056|0]|0,f[i+8>>2]=P,s=L[s+9184|0]),f[i+4>>2]=s,b=ne+1|0,B=f[(b<<2)+a>>2],Z>>>0<=A>>>0){if(A=16,ne=b,Ce=B,(b|0)!=16)continue;break e}break}me=L[Ce+2|0];t:{if((P|0)>-1)break t;if(A=f[i+12>>2],A>>>0<ii[i+20>>2]){Z=L[A|0]|L[A+1|0]<<8|(L[A+2|0]<<16|L[A+3|0]<<24),P=P+24|0,f[i+8>>2]=P,f[i+12>>2]=A+3,j=j<<24|(Z>>>8&65280|(Z<<8&16711680|Z<<24))>>>8,f[i>>2]=j;break t}Fi(i),j=f[i>>2],P=f[i+8>>2]}Z=i,Be=j>>>P|0,me=J(s,me)>>>8|0,A=me,Be>>>0>A>>>0&&(A=me+1|0,f[i>>2]=j-(A<<P),A=s-A|0),A>>>0<=126&&(P=P-L[A+9056|0]|0,f[i+8>>2]=P,A=L[A+9184|0]),f[Z+4>>2]=A;t:{if(Be>>>0<=me>>>0){Z=1,Ce=B+11|0;break t}Z=Lo(i,Ce),P=f[i+8>>2],Ce=B+22|0}t:{if((P|0)>-1){s=P;break t}if(s=f[i+12>>2],s>>>0<ii[i+20>>2]){A=L[s|0]|L[s+1|0]<<8|(L[s+2|0]<<16|L[s+3|0]<<24),f[i+12>>2]=s+3,s=P+24|0,f[i+8>>2]=s,f[i>>2]=f[i>>2]<<24|(A>>>8&65280|(A<<8&16711680|A<<24))>>>8;break t}Fi(i),s=f[i+8>>2]}if(P=s+-1|0,f[i+8>>2]=P,A=f[i+4>>2],j=A>>>1|0,me=f[i>>2],B=j-(me>>>s|0)>>31,A=A+B|1,f[i+4>>2]=A,f[i>>2]=me-((B&j+1)<<s),Pr[(L[ne+5328|0]<<1)+x>>1]=J(f[(((ne|0)>0)<<2)+g>>2],(B^Z)-B|0),!((ne|0)<15))break}A=16}return A|0}function Na(i,a,s,g){var b=0,x=0,A=0,P=0,j=0,B=0,Z=0,ne=0;e:{if((s|0)<0|(g|0)<1||(j=f[a+88>>2],(s+g|0)>(j|0)))break e;Z=f[a>>2];t:{r:{if(f[i+2356>>2])break r;x=f[i+2344>>2];n:{if(x)break n;if(b=sl(1,0,144),f[i+2344>>2]=b,!b)break e;if(b=f[a+88>>2],A=b,x=b>>31,b=f[a>>2],x=Ta(Ei(A,x,b,b>>31),Fn,1),f[i+2360>>2]=x,!x||(f[i+2368>>2]=0,f[i+2364>>2]=x,A=f[i+2348>>2],P=f[i+2352>>2],b=f[i+2344>>2],n0(),f[b+136>>2]=x,f[b>>2]=f[a>>2],f[b+4>>2]=f[a+4>>2],P>>>0<2)||(x=L[A|0]&3,f[b+8>>2]=x,f[b+12>>2]=L[A|0]>>>2&3,B=L[A|0]>>>4&3,f[b+16>>2]=B,x>>>0>1|B>>>0>1|L[A|0]>63)||(x=P+-1|0,P=b+24|0,Rd(P),Us(0,P),f[b- -64>>2]=b,f[b+24>>2]=f[a>>2],f[b+28>>2]=f[a+4>>2],f[b+96>>2]=f[a+72>>2],f[b+100>>2]=f[a+76>>2],f[b+104>>2]=f[a+80>>2],f[b+108>>2]=f[a+84>>2],f[b+112>>2]=f[a+88>>2],f[b+8>>2]?b=Cl(b,A+1|0,x):b=x>>>0>=J(f[b+4>>2],f[b>>2])>>>0,!b))break t;if(x=f[i+2344>>2],f[x+16>>2]!=1){f[i+2372>>2]=0;break n}g=j-s|0}ne=f[x+112>>2];n:{if(!f[x+8>>2]){P=f[x>>2],A=J(P,s),b=A+f[i+2364>>2]|0,j=(A+f[i+2348>>2]|0)+1|0,A=f[i+2368>>2];o:{l:{if(B=f[x+12>>2],B){if((g|0)<1)break o;if(et[f[(B<<2)+10912>>2]](A,j,b,P),B=1,(g|0)!=1)break l;A=b;break o}if(x=0,(g|0)<=0)break o;for(;A=b,b=no(b,j,P),j=P+j|0,b=b+P|0,x=x+1|0,(x|0)!=(g|0););break o}for(;j=P+j|0,A=b+P|0,et[f[(f[x+12>>2]<<2)+10912>>2]](b,j,A,P),b=A,B=B+1|0,(B|0)!=(g|0););}f[i+2368>>2]=A,g=s+g|0;break n}if(g=s+g|0,!Da(x,g))break t}n:{if((g|0)>=(ne|0)){f[i+2356>>2]=1;break n}if(!f[i+2356>>2])break r}if(g=f[i+2344>>2],g&&(yh(f[g+20>>2]),f[g+20>>2]=0,Vi(g)),f[i+2344>>2]=0,g=f[i+2372>>2],(g|0)<1)break r;if(A=f[a+76>>2],b=f[a+84>>2],!xl(A+(f[i+2364>>2]+J(b,Z)|0)|0,f[a+80>>2]-A|0,f[a+88>>2]-b|0,Z,g))break t}return f[i+2364>>2]+J(s,Z)|0}Vi(f[i+2360>>2]),f[i+2360>>2]=0,f[i+2364>>2]=0,a=f[i+2344>>2],a&&(yh(f[a+20>>2]),f[a+20>>2]=0,Vi(a)),f[i+2344>>2]=0}return 0}function xu(i,a){var s=0,g=0,b=0,x=0,A=0,P=0,j=0,B=0,Z=0,ne=0,me=0,Ce=0,Be=0,at=0,kt=0,It=0,Qt=0,lr=0;f[i+152>>2]=0,j=1;e:{t:{if(f[i+148>>2]>=1){if(!(et[f[2558]](i+124|0)|0))break t;f[i+140>>2]=i+180,f[i+136>>2]=i,f[i+132>>2]=18,j=f[i+2308>>2]>0?3:2}f[i+156>>2]=j;break e}if(!Pi(i,1,4941))return 0}A=f[i+288>>2],Z=A<<2,s=f[i+148>>2],B=f[i+2308>>2],me=(B|0)>0?J(Z,(s|0)<1?1:2):0,Ce=A<<5,at=j<<4,kt=J(Ce,(J(at+L[B+4863|0]|0,3)|0)/2|0),Be=(A<<1)+2|0,It=J(J(A,(s|0)==2?2:1),800),x=0;e:{if(!f[i+2348>>2])break e;Qt=Ei(kn[i+50>>1],0,kn[i+48>>1],0),x=Fn}lr=x,s=0,g=Z,b=g+Ce|0,b>>>0<g>>>0&&(s=1),g=b,b=g+Be|0,b>>>0<g>>>0&&(s=s+1|0),g=b,b=g+me|0,b>>>0<g>>>0&&(s=s+1|0),g=b,b=g+It|0,b>>>0<g>>>0&&(s=s+1|0),g=b,b=g+kt|0,b>>>0<g>>>0&&(s=s+1|0),g=b,b=g+Qt|0,s=s+x|0,x=b,s=b>>>0<g>>>0?s+1|0:s,g=s,b=b+832|0,b>>>0<832&&(s=s+1|0);e:{if(!s&b>>>0>4294967264|s>>>0>0)break e;P=f[i+2288>>2];t:{r:{if(s=g,g=x+863|0,g>>>0<863&&(s=s+1|0),x=g,b=g,g=s,!s&b>>>0>ii[i+2292>>2]|s>>>0>0){if(Vi(P),f[i+2292>>2]=0,P=Ta(x,g,1),f[i+2288>>2]=P,!P)break r;f[i+2292>>2]=x,B=f[i+2308>>2]}f[i+2244>>2]=P,f[i+160>>2]=0,s=P+Z|0,f[i+2252>>2]=s,s=s+Ce|0,ne=s+2|0,f[i+2256>>2]=ne,s=s+Be|0,b=me?s:0,f[i+2260>>2]=b,f[i+172>>2]=b,s=s+me|0,g=f[i+148>>2],(B|0)<1|(g|0)<1||(f[i+172>>2]=b+(A<<2)),s=s+31&-32,f[i+2264>>2]=s,s=s+832|0,f[i+2304>>2]=s,f[i+176>>2]=s,(g|0)==2&&(f[i+176>>2]=s+J(A,800)),f[i+152>>2]=0,x=A<<3,f[i+2284>>2]=x,b=A<<4,f[i+2280>>2]=b,s=s+It|0,f[i+2364>>2]=Qt|lr?s+kt|0:0,g=L[B+4863|0],s=s+J(g,b)|0,f[i+2268>>2]=s,g=J(x,g>>>1|0),s=g+(s+J(b,at)|0)|0,f[i+2272>>2]=s,f[i+2276>>2]=g+(s+(J(x,j)<<3)|0),ua(ne+-2|0,0,Be),s=f[i+2256>>2]+-2|0,m[s|0]=0,m[s+1|0]=0,f[i+2296>>2]=0,f[i+2248>>2]=0,ua(f[i+2244>>2],0,Z);break t}if(!Pi(i,1,4971))break e}f[a+8>>2]=0,f[a+20>>2]=f[i+2268>>2],f[a+24>>2]=f[i+2272>>2],f[a+28>>2]=f[i+2276>>2],f[a+32>>2]=f[i+2280>>2],i=f[i+2284>>2],f[a+104>>2]=0,f[a+36>>2]=i,Il(),ne=1}return ne}function Xl(i,a,s,g){var b=0,x=0,A=0,P=0,j=0,B=0,Z=0,ne=0,me=0,Ce=0,Be=0,at=0;j=jn-16|0,jn=j,B=2;e:{if(!g|((a|0)<1|(i|0)<1))break e;t:{if(!s)break t;r:{if(!f[s+8>>2]){b=a,x=i;break r}if(b=f[s+24>>2],(b|0)<1||(x=f[s+20>>2],(x|0)<1)||(A=f[s+16>>2],P=f[s+12>>2],(A|P)<0|((P&-2)+x|0)>(i|0)|((A&-2)+b|0)>(a|0)))break e}if(!f[s+28>>2]){a=b,i=x;break t}if(f[j+12>>2]=f[s+32>>2],f[j+8>>2]=f[s+36>>2],!Ue(x,b,j+12|0,j+8|0))break e;a=f[j+8>>2],i=f[j+12>>2]}if(f[g+8>>2]=a,f[g+4>>2]=i,(a|0)<1|(i|0)<1||(P=f[g>>2],P>>>0>12))break e;t:{if(f[g+80>>2]|f[g+12>>2]>0)break t;if(x=i,b=L[P+1157|0],Ei(i,0,b,0),Fn)break e;A=a,Ce=J(i,b),b=Ce,b=Ei(a,0,b,b>>31),Z=Fn,B=1;r:{if(P>>>0<11){a=0,A=0,i=0;break r}x=Ei(x,0,A,0),A=(P|0)==12,at=A?x:0,ne=A?Fn:0,Be=(i+1|0)/2|0,x=Be,a=(a+1|0)/2|0,a=Ei(x,x>>31,a,a>>31),A=A?i:0,i=Fn}if(me=a,i=i<<1|a>>>31,ne=ne+Z|0,Z=b+at|0,Z>>>0<b>>>0&&(ne=ne+1|0),me=me<<1,x=me+Z|0,i=i+ne|0,i=Ta(x,x>>>0<Z>>>0?i+1|0:i,1),!i)break e;if(f[g+16>>2]=i,f[g+80>>2]=i,P>>>0>=11){f[g+48>>2]=b,f[g+32>>2]=Ce,f[g+52>>2]=a,f[g+36>>2]=Be,f[g+56>>2]=a,f[g+40>>2]=Be,i=i+b|0,f[g+20>>2]=i,f[g+24>>2]=i+a,(P|0)==12&&(f[g+28>>2]=i+me),f[g+44>>2]=A,f[g+60>>2]=at;break t}f[g+24>>2]=b,f[g+20>>2]=Ce}if(B=la(g),B|!s)break e;if(!f[s+48>>2]){B=0;break e}if(i=f[g+8>>2]+-1|0,ii[g>>2]<=10){B=0,s=g+20|0,a=f[s>>2],f[s>>2]=0-a,f[g+16>>2]=f[g+16>>2]+J(i,a);break e}if(B=0,s=g+32|0,a=f[s>>2],f[s>>2]=0-a,b=g+36|0,s=f[b>>2],f[b>>2]=0-s,x=g+40|0,b=f[x>>2],f[x>>2]=0-b,f[g+16>>2]=f[g+16>>2]+J(i,a),a=g+20|0,x=a,A=f[a>>2],a=i>>1,f[x>>2]=A+J(a,s),s=g+24|0,f[s>>2]=f[s>>2]+J(a,b),s=f[g+28>>2],!s)break e;b=g+44|0,a=f[b>>2],f[b>>2]=0-a,f[g+28>>2]=s+J(i,a)}return jn=j+16|0,B}function Hs(i,a){var s=0,g=0,b=0,x=0,A=0,P=0,j=0,B=0;for(A=jn+-64|0,b=Pr[i+16>>1],x=Pr[i>>1],P=b+x|0,s=Pr[i+8>>1],g=Pr[i+24>>1],j=((J(s,20091)>>16)+s|0)+(J(g,35468)>>16)|0,f[A+12>>2]=P-j,b=x-b|0,s=((J(s,35468)>>16)-g|0)-(J(g,20091)>>16)|0,f[A+8>>2]=b-s,f[A+4>>2]=s+b,f[A>>2]=P+j,b=Pr[i+18>>1],x=Pr[i+2>>1],P=b+x|0,s=Pr[i+10>>1],g=Pr[i+26>>1],j=((J(s,20091)>>16)+s|0)+(J(g,35468)>>16)|0,f[A+28>>2]=P-j,b=x-b|0,s=((J(s,35468)>>16)-g|0)-(J(g,20091)>>16)|0,f[A+24>>2]=b-s,f[A+20>>2]=s+b,s=P+j|0,f[A+16>>2]=s,x=Pr[i+20>>1],P=Pr[i+4>>1],j=x+P|0,g=Pr[i+12>>1],b=Pr[i+28>>1],B=((J(g,20091)>>16)+g|0)+(J(b,35468)>>16)|0,f[A+44>>2]=j-B,x=P-x|0,g=((J(g,35468)>>16)-b|0)-(J(b,20091)>>16)|0,f[A+40>>2]=x-g,f[A+36>>2]=g+x,f[A+32>>2]=j+B,b=Pr[i+22>>1],x=Pr[i+6>>1],P=b+x|0,g=Pr[i+14>>1],i=Pr[i+30>>1],j=((J(g,20091)>>16)+g|0)+(J(i,35468)>>16)|0,f[A+60>>2]=P-j,b=x-b|0,i=((J(g,35468)>>16)-i|0)-(J(i,20091)>>16)|0,f[A+56>>2]=b-i,f[A+52>>2]=i+b,f[A+48>>2]=P+j,i=A,A=0;;){if(g=f[i+48>>2],b=((J(s,20091)>>16)+s|0)+(J(g,35468)>>16)|0,x=f[i>>2]+4|0,P=f[i+32>>2],j=x+P|0,B=L[a|0]+(b+j>>3)|0,B=(B|0)>0?B:0,m[a|0]=(B|0)<255?B:255,s=((J(s,35468)>>16)-g|0)-(J(g,20091)>>16)|0,g=x-P|0,x=L[a+1|0]+(s+g>>3)|0,x=(x|0)>0?x:0,m[a+1|0]=(x|0)<255?x:255,s=L[a+2|0]+(g-s>>3)|0,s=(s|0)>0?s:0,m[a+2|0]=(s|0)<255?s:255,s=L[a+3|0]+(j-b>>3)|0,s=(s|0)>0?s:0,m[a+3|0]=(s|0)<255?s:255,A=A+1|0,(A|0)!=4){a=a+32|0,s=f[i+20>>2],i=i+4|0;continue}break}}function kl(i){i=i|0;var a=0;a=Ei(L[i+31|0],0,16843009,16843009),m[i+32|0]=a,m[i+33|0]=a>>>8,m[i+34|0]=a>>>16,m[i+35|0]=a>>>24,a=Fn,m[i+36|0]=a,m[i+37|0]=a>>>8,m[i+38|0]=a>>>16,m[i+39|0]=a>>>24,a=Ei(L[i+63|0],0,16843009,16843009),m[i+64|0]=a,m[i+65|0]=a>>>8,m[i+66|0]=a>>>16,m[i+67|0]=a>>>24,a=Fn,m[i+68|0]=a,m[i+69|0]=a>>>8,m[i+70|0]=a>>>16,m[i+71|0]=a>>>24,a=Ei(L[i+95|0],0,16843009,16843009),m[i+96|0]=a,m[i+97|0]=a>>>8,m[i+98|0]=a>>>16,m[i+99|0]=a>>>24,a=Fn,m[i+100|0]=a,m[i+101|0]=a>>>8,m[i+102|0]=a>>>16,m[i+103|0]=a>>>24,a=Ei(L[i+127|0],0,16843009,16843009),m[i+128|0]=a,m[i+129|0]=a>>>8,m[i+130|0]=a>>>16,m[i+131|0]=a>>>24,a=Fn,m[i+132|0]=a,m[i+133|0]=a>>>8,m[i+134|0]=a>>>16,m[i+135|0]=a>>>24,a=Ei(L[i+159|0],0,16843009,16843009),m[i+160|0]=a,m[i+161|0]=a>>>8,m[i+162|0]=a>>>16,m[i+163|0]=a>>>24,a=Fn,m[i+164|0]=a,m[i+165|0]=a>>>8,m[i+166|0]=a>>>16,m[i+167|0]=a>>>24,a=Ei(L[i+191|0],0,16843009,16843009),m[i+192|0]=a,m[i+193|0]=a>>>8,m[i+194|0]=a>>>16,m[i+195|0]=a>>>24,a=Fn,m[i+196|0]=a,m[i+197|0]=a>>>8,m[i+198|0]=a>>>16,m[i+199|0]=a>>>24,a=Ei(L[i+223|0],0,16843009,16843009),m[i+224|0]=a,m[i+225|0]=a>>>8,m[i+226|0]=a>>>16,m[i+227|0]=a>>>24,a=Fn,m[i+228|0]=a,m[i+229|0]=a>>>8,m[i+230|0]=a>>>16,m[i+231|0]=a>>>24,a=Ei(L[i+-1|0],0,16843009,16843009),m[i|0]=a,m[i+1|0]=a>>>8,m[i+2|0]=a>>>16,m[i+3|0]=a>>>24,a=Fn,m[i+4|0]=a,m[i+5|0]=a>>>8,m[i+6|0]=a>>>16,m[i+7|0]=a>>>24}function Ra(i,a,s){i=i|0,a=a|0,s=s|0;var g=0,b=0,x=0;e:{if((s|0)!=1){for(;g=L[a|0]+(L[i|0]+-120>>4)|0,g=(g|0)>0?g:0,m[a|0]=(g|0)<255?g:255,g=L[a+1|0]+(L[i+1|0]+-120>>4)|0,g=(g|0)>0?g:0,m[a+1|0]=(g|0)<255?g:255,g=L[a+2|0]+(L[i+2|0]+-120>>4)|0,g=(g|0)>0?g:0,m[a+2|0]=(g|0)<255?g:255,g=L[a+3|0]+(L[i+3|0]+-120>>4)|0,g=(g|0)>0?g:0,m[a+3|0]=(g|0)<255?g:255,g=L[a+4|0]+(L[i+4|0]+-120>>4)|0,g=(g|0)>0?g:0,m[a+4|0]=(g|0)<255?g:255,g=L[a+5|0]+(L[i+5|0]+-120>>4)|0,g=(g|0)>0?g:0,m[a+5|0]=(g|0)<255?g:255,g=L[a+6|0]+(L[i+6|0]+-120>>4)|0,g=(g|0)>0?g:0,m[a+6|0]=(g|0)<255?g:255,g=L[a+7|0]+(L[i+7|0]+-120>>4)|0,g=(g|0)>0?g:0,m[a+7|0]=(g|0)<255?g:255,i=i+8|0,a=a+s|0,b=b+1|0,(b|0)!=8;);break e}for(b=L[a+6|0];g=L[a|0]+(L[i|0]+-120>>4)|0,g=(g|0)>0?g:0,m[a|0]=(g|0)<255?g:255,g=L[a+1|0]+(L[i+1|0]+-120>>4)|0,g=(g|0)>0?g:0,m[a+1|0]=(g|0)<255?g:255,g=L[a+2|0]+(L[i+2|0]+-120>>4)|0,g=(g|0)>0?g:0,m[a+2|0]=(g|0)<255?g:255,g=L[a+3|0]+(L[i+3|0]+-120>>4)|0,g=(g|0)>0?g:0,m[a+3|0]=(g|0)<255?g:255,g=L[a+4|0]+(L[i+4|0]+-120>>4)|0,g=(g|0)>0?g:0,m[a+4|0]=(g|0)<255?g:255,g=L[a+5|0]+(L[i+5|0]+-120>>4)|0,g=(g|0)>0?g:0,m[a+5|0]=(g|0)<255?g:255,b=(b&255)+(L[i+6|0]+-120>>4)|0,b=(b|0)>0?b:0,m[a+6|0]=(b|0)<255?b:255,b=L[a+7|0]+(L[i+7|0]+-120>>4)|0,b=(b|0)>0?b:0,b=(b|0)<255?b:255,m[a+7|0]=b,i=i+8|0,a=a+s|0,x=x+1|0,(x|0)!=8;);}}function Yl(i){i=i|0;var a=0,s=0;a=Ei((L[i+223|0]+(L[i+-25|0]+(L[i+191|0]+(L[i+-26|0]+(L[i+159|0]+(L[i+-27|0]+(L[i+127|0]+(L[i+-28|0]+(L[i+95|0]+(L[i+-29|0]+(L[i+63|0]+(L[i+-30|0]+(L[i+31|0]+(L[i+-31|0]+(L[i+-32|0]+L[i+-1|0]|0)|0)|0)|0)|0)|0)|0)|0)|0)|0)|0)|0)|0)|0)|0)+8>>>4&255,0,16843009,16843009),m[i+224|0]=a,m[i+225|0]=a>>>8,m[i+226|0]=a>>>16,m[i+227|0]=a>>>24,s=Fn,m[i+228|0]=s,m[i+229|0]=s>>>8,m[i+230|0]=s>>>16,m[i+231|0]=s>>>24,m[i+192|0]=a,m[i+193|0]=a>>>8,m[i+194|0]=a>>>16,m[i+195|0]=a>>>24,m[i+196|0]=s,m[i+197|0]=s>>>8,m[i+198|0]=s>>>16,m[i+199|0]=s>>>24,m[i+160|0]=a,m[i+161|0]=a>>>8,m[i+162|0]=a>>>16,m[i+163|0]=a>>>24,m[i+164|0]=s,m[i+165|0]=s>>>8,m[i+166|0]=s>>>16,m[i+167|0]=s>>>24,m[i+128|0]=a,m[i+129|0]=a>>>8,m[i+130|0]=a>>>16,m[i+131|0]=a>>>24,m[i+132|0]=s,m[i+133|0]=s>>>8,m[i+134|0]=s>>>16,m[i+135|0]=s>>>24,m[i+96|0]=a,m[i+97|0]=a>>>8,m[i+98|0]=a>>>16,m[i+99|0]=a>>>24,m[i+100|0]=s,m[i+101|0]=s>>>8,m[i+102|0]=s>>>16,m[i+103|0]=s>>>24,m[i+64|0]=a,m[i+65|0]=a>>>8,m[i+66|0]=a>>>16,m[i+67|0]=a>>>24,m[i+68|0]=s,m[i+69|0]=s>>>8,m[i+70|0]=s>>>16,m[i+71|0]=s>>>24,m[i+32|0]=a,m[i+33|0]=a>>>8,m[i+34|0]=a>>>16,m[i+35|0]=a>>>24,m[i+36|0]=s,m[i+37|0]=s>>>8,m[i+38|0]=s>>>16,m[i+39|0]=s>>>24,m[i|0]=a,m[i+1|0]=a>>>8,m[i+2|0]=a>>>16,m[i+3|0]=a>>>24,m[i+4|0]=s,m[i+5|0]=s>>>8,m[i+6|0]=s>>>16,m[i+7|0]=s>>>24}function Ws(i,a){var s=0,g=0,b=0,x=0,A=0,P=0,j=0,B=0,Z=0;e:{if(s=f[a+48>>2],!s||et[s|0](a)|0)break e;return Pi(i,6,4844),f[i>>2]}e:{t:{r:{n:{if(f[a+68>>2]){f[i+2308>>2]=0,s=0;break n}if(s=2,x=f[i+2308>>2],g=L[x+4863|0],(x|0)==2)break r;s=x}if(x=f[a+76>>2]-g|0,f[i+296>>2]=x>>4,b=f[a+84>>2]-g|0,f[i+300>>2]=b>>4,(x|0)<=-1&&(f[i+296>>2]=0),(b|0)>-1)break e;x=i+300|0;break t}f[i+296>>2]=0,x=i+300|0}f[x>>2]=0}if(g=g+15|0,x=g+f[a+88>>2]>>4,f[i+308>>2]=x,b=f[i+288>>2],a=g+f[a+80>>2]>>4,f[i+304>>2]=(a|0)>(b|0)?b:a,a=f[i+292>>2],(x|0)>(a|0)&&(f[i+308>>2]=a),(s|0)>=1)for(B=f[i+68>>2],Z=f[i+104>>2],x=0;;){a=(x<<3)+i|0;e:{if(Z){if(s=m[(i+x|0)+120|0],g=s,f[i+112>>2])break e;g=s+f[i+60>>2]|0;break e}g=f[i+60>>2]}s=g,A=a+2312|0,s=B?f[i+72>>2]+s|0:s;e:{if((s|0)>=1){b=(s|0)<63?s:63,s=(s|0)>0?b:0,j=a+2313|0,P=f[i+64>>2],(P|0)>=1&&(b=9-P|0,P=s>>>((P|0)>4?2:1)|0,b=(P|0)>(b|0)?b:P),b=(b|0)>1?b:1,m[j|0]=b,m[A|0]=b+(s<<1),m[a+2315|0]=(s|0)>39?2:(s|0)>14;break e}m[A|0]=0}m[a+2314|0]=0,b=a+2316|0,g=B?f[i+88>>2]+(f[i+72>>2]+g|0)|0:g,A=(g|0)>0;e:{if(!A){m[b|0]=0;break e}s=(g|0)<63?g:63,g=A?s:0,j=a+2317|0,A=f[i+64>>2],(A|0)>=1&&(s=9-A|0,A=g>>>((A|0)>4?2:1)|0,s=(A|0)>(s|0)?s:A),s=(s|0)>1?s:1,m[j|0]=s,m[b|0]=s+(g<<1),m[a+2319|0]=(g|0)>39?2:(g|0)>14}if(m[a+2318|0]=1,x=x+1|0,(x|0)==4)break}return 0}function Al(i,a){i=i|0,a=a|0;var s=0,g=0,b=0,x=0,A=0,P=0,j=0,B=0,Z=0,ne=0,me=0,Ce=0,Be=0,at=0;g=jn+-64|0,b=Pr[i+24>>1],s=Pr[i>>1],x=b+s|0,P=Pr[i+16>>1],j=Pr[i+8>>1],A=P+j|0,f[g+32>>2]=x-A,b=s-b|0,s=j-P|0,f[g+48>>2]=b-s,f[g+16>>2]=s+b,me=x+A|0,f[g>>2]=me,b=Pr[i+26>>1],s=Pr[i+2>>1],x=b+s|0,P=Pr[i+18>>1],j=Pr[i+10>>1],A=P+j|0,f[g+36>>2]=x-A,b=s-b|0,s=j-P|0,f[g+52>>2]=b-s,b=s+b|0,f[g+20>>2]=b,s=x+A|0,f[g+4>>2]=s,x=Pr[i+4>>1],P=Pr[i+28>>1],j=x-P|0,A=Pr[i+12>>1],B=Pr[i+20>>1],Z=A-B|0,f[g+56>>2]=j-Z,A=A+B|0,P=x+P|0,x=A+P|0,f[g+8>>2]=x,P=P-A|0,f[g+40>>2]=P,j=j+Z|0,f[g+24>>2]=j,A=Pr[i+30>>1],B=Pr[i+6>>1],Z=A+B|0,ne=Pr[i+22>>1],Ce=Pr[i+14>>1],Be=ne+Ce|0,i=Z+Be|0,f[g+12>>2]=i,at=B-A|0,ne=Ce-ne|0,A=at-ne|0,f[g+60>>2]=A,B=Z-Be|0,f[g+44>>2]=B,Z=ne+at|0,f[g+28>>2]=Z,me=me+3|0,ne=me-i|0,Ce=s-x|0,Pr[a+96>>1]=ne-Ce>>>3,i=i+me|0,s=s+x|0,Pr[a+64>>1]=i-s>>>3,Pr[a+32>>1]=ne+Ce>>>3,Pr[a>>1]=i+s>>>3,i=f[g+16>>2]+3|0,s=i-Z|0,x=b-j|0,Pr[a+224>>1]=s-x>>>3,i=i+Z|0,b=b+j|0,Pr[a+192>>1]=i-b>>>3,Pr[a+160>>1]=s+x>>>3,Pr[a+128>>1]=i+b>>>3,i=f[g+32>>2]+3|0,b=i-B|0,s=f[g+36>>2],x=s-P|0,Pr[a+352>>1]=b-x>>>3,i=i+B|0,s=s+P|0,Pr[a+320>>1]=i-s>>>3,Pr[a+288>>1]=b+x>>>3,Pr[a+256>>1]=i+s>>>3,i=f[g+48>>2]+3|0,b=i-A|0,s=f[g+52>>2],g=f[g+56>>2],x=s-g|0,Pr[a+480>>1]=b-x>>>3,i=i+A|0,g=g+s|0,Pr[a+448>>1]=i-g>>>3,Pr[a+416>>1]=b+x>>>3,Pr[a+384>>1]=i+g>>>3}function is(i,a){var s=0,g=0,b=0,x=0,A=0,P=0,j=0,B=0,Z=0,ne=0,me=0,Ce=0,Be=0,at=0,kt=0,It=0,Qt=0;for(Be=a+904|0;;){for(P=0;;){for(j=0;;){for(x=0;;){ne=J(j,11),me=J(P,33),Z=J(B,264),A=L[(ne+(me+(Z+1392|0)|0)|0)+x|0],at=f[i+4>>2],s=f[i+8>>2];e:{if((s|0)>-1)break e;if(g=f[i+12>>2],g>>>0<ii[i+20>>2]){b=L[g|0]|L[g+1|0]<<8|(L[g+2|0]<<16|L[g+3|0]<<24),f[i+12>>2]=g+3,s=s+24|0,f[i+8>>2]=s,f[i>>2]=f[i>>2]<<24|(b>>>8&65280|(b<<8&16711680|b<<24))>>>8;break e}Fi(i),s=f[i+8>>2]}Ce=i,kt=s,g=f[i>>2],A=J(A,at)>>>8|0,b=g>>>s>>>0<=A>>>0;e:{if(!b){f[i>>2]=g+((A^-1)<<s),s=at-A|0;break e}s=A+1|0}g=Ri(s)^24,f[Ce+8>>2]=kt-g,f[i+4>>2]=(s<<g)+-1,Ce=(((a+Z|0)+me|0)+ne|0)+x|0;e:{if(!b){s=Mi(i,8);break e}s=L[(((Z+2448|0)+me|0)+ne|0)+x|0]}if(m[Ce+907|0]=s,x=x+1|0,(x|0)==11)break}if(j=j+1|0,(j|0)==3)break}if(P=P+1|0,(P|0)==8)break}if(s=J(B,68)+Be|0,b=Z+Be|0,x=b+3|0,f[s+1124>>2]=x,f[s+1120>>2]=b+234,g=b+201|0,f[s+1116>>2]=g,f[s+1112>>2]=g,f[s+1108>>2]=g,f[s+1104>>2]=g,f[s+1100>>2]=g,f[s+1096>>2]=g,f[s+1092>>2]=g,f[s+1088>>2]=g,f[s+1084>>2]=b+168,f[s+1080>>2]=b+135,f[s+1076>>2]=g,f[s+1072>>2]=b+102,f[s+1068>>2]=b+69,f[s+1064>>2]=b+36,f[s+1060>>2]=x,B=B+1|0,(B|0)==4)break}s=Mi(i,1),f[a+2236>>2]=s,s&&(It=a,Qt=Mi(i,8),m[It+2240|0]=Qt)}function El(i){i=i|0;var a=0,s=0;a=i,i=Ei((L[a+-25|0]+(L[a+-26|0]+(L[a+-27|0]+(L[a+-28|0]+(L[a+-29|0]+(L[a+-30|0]+(L[a+-32|0]+L[a+-31|0]|0)|0)|0)|0)|0)|0)|0)+4>>>3&255,0,16843009,16843009),m[a+224|0]=i,m[a+225|0]=i>>>8,m[a+226|0]=i>>>16,m[a+227|0]=i>>>24,s=Fn,m[a+228|0]=s,m[a+229|0]=s>>>8,m[a+230|0]=s>>>16,m[a+231|0]=s>>>24,m[a+192|0]=i,m[a+193|0]=i>>>8,m[a+194|0]=i>>>16,m[a+195|0]=i>>>24,m[a+196|0]=s,m[a+197|0]=s>>>8,m[a+198|0]=s>>>16,m[a+199|0]=s>>>24,m[a+160|0]=i,m[a+161|0]=i>>>8,m[a+162|0]=i>>>16,m[a+163|0]=i>>>24,m[a+164|0]=s,m[a+165|0]=s>>>8,m[a+166|0]=s>>>16,m[a+167|0]=s>>>24,m[a+128|0]=i,m[a+129|0]=i>>>8,m[a+130|0]=i>>>16,m[a+131|0]=i>>>24,m[a+132|0]=s,m[a+133|0]=s>>>8,m[a+134|0]=s>>>16,m[a+135|0]=s>>>24,m[a+96|0]=i,m[a+97|0]=i>>>8,m[a+98|0]=i>>>16,m[a+99|0]=i>>>24,m[a+100|0]=s,m[a+101|0]=s>>>8,m[a+102|0]=s>>>16,m[a+103|0]=s>>>24,m[a+64|0]=i,m[a+65|0]=i>>>8,m[a+66|0]=i>>>16,m[a+67|0]=i>>>24,m[a+68|0]=s,m[a+69|0]=s>>>8,m[a+70|0]=s>>>16,m[a+71|0]=s>>>24,m[a+32|0]=i,m[a+33|0]=i>>>8,m[a+34|0]=i>>>16,m[a+35|0]=i>>>24,m[a+36|0]=s,m[a+37|0]=s>>>8,m[a+38|0]=s>>>16,m[a+39|0]=s>>>24,m[a|0]=i,m[a+1|0]=i>>>8,m[a+2|0]=i>>>16,m[a+3|0]=i>>>24,m[a+4|0]=s,m[a+5|0]=s>>>8,m[a+6|0]=s>>>16,m[a+7|0]=s>>>24}function cc(i){i=i|0;var a=0,s=0;a=i,i=Ei((L[a+223|0]+(L[a+191|0]+(L[a+159|0]+(L[a+127|0]+(L[a+95|0]+(L[a+63|0]+(L[a+-1|0]+L[a+31|0]|0)|0)|0)|0)|0)|0)|0)+4>>>3&255,0,16843009,16843009),m[a+224|0]=i,m[a+225|0]=i>>>8,m[a+226|0]=i>>>16,m[a+227|0]=i>>>24,s=Fn,m[a+228|0]=s,m[a+229|0]=s>>>8,m[a+230|0]=s>>>16,m[a+231|0]=s>>>24,m[a+192|0]=i,m[a+193|0]=i>>>8,m[a+194|0]=i>>>16,m[a+195|0]=i>>>24,m[a+196|0]=s,m[a+197|0]=s>>>8,m[a+198|0]=s>>>16,m[a+199|0]=s>>>24,m[a+160|0]=i,m[a+161|0]=i>>>8,m[a+162|0]=i>>>16,m[a+163|0]=i>>>24,m[a+164|0]=s,m[a+165|0]=s>>>8,m[a+166|0]=s>>>16,m[a+167|0]=s>>>24,m[a+128|0]=i,m[a+129|0]=i>>>8,m[a+130|0]=i>>>16,m[a+131|0]=i>>>24,m[a+132|0]=s,m[a+133|0]=s>>>8,m[a+134|0]=s>>>16,m[a+135|0]=s>>>24,m[a+96|0]=i,m[a+97|0]=i>>>8,m[a+98|0]=i>>>16,m[a+99|0]=i>>>24,m[a+100|0]=s,m[a+101|0]=s>>>8,m[a+102|0]=s>>>16,m[a+103|0]=s>>>24,m[a+64|0]=i,m[a+65|0]=i>>>8,m[a+66|0]=i>>>16,m[a+67|0]=i>>>24,m[a+68|0]=s,m[a+69|0]=s>>>8,m[a+70|0]=s>>>16,m[a+71|0]=s>>>24,m[a+32|0]=i,m[a+33|0]=i>>>8,m[a+34|0]=i>>>16,m[a+35|0]=i>>>24,m[a+36|0]=s,m[a+37|0]=s>>>8,m[a+38|0]=s>>>16,m[a+39|0]=s>>>24,m[a|0]=i,m[a+1|0]=i>>>8,m[a+2|0]=i>>>16,m[a+3|0]=i>>>24,m[a+4|0]=s,m[a+5|0]=s>>>8,m[a+6|0]=s>>>16,m[a+7|0]=s>>>24}function Dc(i){var a=0,s=0,g=0,b=0,x=0,A=0,P=0,j=0,B=0,Z=0,ne=0;e:{t:{if(i){if(x=f[i+8>>2],Z=f[x+40>>2],f[i+4>>2]){if(f[i+12>>2]=f[Z>>2],!As(f[Z+20>>2],x,3))return f[i>>2]=2,Bo(i),0;if(a=f[i+104>>2],s=a,b=a>>31,a=f[i+100>>2],A=Ei(s,b,a,a>>31),s=Fn,j=f[x>>2],b=j,a=b>>31,a=a<<4|b>>>28,b=b<<4,B=i,P=a,a=b,b=j&65535,g=b,a=a+g|0,a>>>0<g>>>0&&(P=P+1|0),g=a+A|0,s=s+P|0,a=Ta(g,g>>>0<a>>>0?s+1|0:s,4),f[B+16>>2]=a,!a){f[i+20>>2]=0;break e}f[i+20>>2]=(a+(A<<2)|0)+(b<<2);r:{n:{if(f[x+92>>2]){if(ne=f[x+100>>2],j=f[x+16>>2],b=f[x+12>>2],A=f[x+96>>2],s=A,a=s>>31,g=s,s=a,a=a<<5|g>>>27,P=s<<2|g>>>30,B=g<<5,s=g<<2,g=B+s|0,a=a+P|0,a=g>>>0<s>>>0?a+1|0:a,s=g+84|0,s>>>0<84&&(a=a+1|0),a=Ta(s,a,1),!a){f[i>>2]=1;break t}if(f[i+268>>2]=a,f[i+264>>2]=a,s=a,a=a+84|0,ol(s,b,j,a+B|0,A,ne,0,4,a),f[x+92>>2])break n}if(a=f[f[i+12>>2]>>2],a+-7>>>0>3)break r}fa(),a=f[f[i+12>>2]>>2]}r:{if(a>>>0<11||(hs(),!f[f[i+12>>2]+28>>2]))break r;fa()}r:{if(!f[i+56>>2]|f[i+120>>2]<1||(a=i+136|0,f[a>>2])||Cr(a,f[i+132>>2]))break r;break e}f[i+4>>2]=0}if(!Wl(i,f[i+16>>2],f[i+100>>2],f[i+104>>2],f[x+88>>2],2))break t;f[Z+16>>2]=f[i+116>>2],i=1}else i=0;return i}return Bo(i),0}return f[i>>2]=1,Bo(i),0}function Sl(i,a){i=i|0,a=a|0;var s=0,g=0,b=0,x=0,A=0,P=0;b=Pr[i+2>>1],A=(J(b,20091)>>16)+b|0,g=Pr[i+8>>1],P=J(g,35468)>>16,x=Pr[i>>1]+4|0,s=P+x|0,i=L[a+32|0]+(A+s>>3)|0,i=(i|0)>0?i:0,m[a+32|0]=(i|0)<255?i:255,i=J(b,35468)>>16,b=L[a+33|0]+(i+s>>3)|0,b=(b|0)>0?b:0,m[a+33|0]=(b|0)<255?b:255,b=L[a+34|0]+(s-i>>3)|0,b=(b|0)>0?b:0,m[a+34|0]=(b|0)<255?b:255,s=L[a+35|0]+(s-A>>3)|0,s=(s|0)>0?s:0,m[a+35|0]=(s|0)<255?s:255,b=g+(J(g,20091)>>16)|0,s=b+x|0,g=L[a|0]+(s+A>>3)|0,g=(g|0)>0?g:0,m[a|0]=(g|0)<255?g:255,g=L[a+1|0]+(i+s>>3)|0,g=(g|0)>0?g:0,m[a+1|0]=(g|0)<255?g:255,g=L[a+2|0]+(s-i>>3)|0,g=(g|0)>0?g:0,m[a+2|0]=(g|0)<255?g:255,s=L[a+3|0]+(s-A>>3)|0,s=(s|0)>0?s:0,m[a+3|0]=(s|0)<255?s:255,s=x-P|0,g=L[a+64|0]+(s+A>>3)|0,g=(g|0)>0?g:0,m[a+64|0]=(g|0)<255?g:255,g=L[a+65|0]+(i+s>>3)|0,g=(g|0)>0?g:0,m[a+65|0]=(g|0)<255?g:255,g=L[a+66|0]+(s-i>>3)|0,g=(g|0)>0?g:0,m[a+66|0]=(g|0)<255?g:255,s=L[a+67|0]+(s-A>>3)|0,s=(s|0)>0?s:0,m[a+67|0]=(s|0)<255?s:255,x=x-b|0,s=L[a+96|0]+(x+A>>3)|0,s=(s|0)>0?s:0,m[a+96|0]=(s|0)<255?s:255,s=L[a+97|0]+(i+x>>3)|0,s=(s|0)>0?s:0,m[a+97|0]=(s|0)<255?s:255,i=L[a+98|0]+(x-i>>3)|0,i=(i|0)>0?i:0,m[a+98|0]=(i|0)<255?i:255,i=L[a+99|0]+(x-A>>3)|0,i=(i|0)>0?i:0,m[a+99|0]=(i|0)<255?i:255}function Ga(i,a,s,g,b){i=i|0,a=a|0,s=s|0,g=g|0,b=b|0;var x=0,A=0,P=0,j=0,B=0,Z=0;if(B=b<<1&-4,B){for(B=g+B|0;P=J(L[i|0],19077)>>>8|0,x=L[s|0],j=P+(J(x,26149)>>>8|0)|0,A=j+-14234|0,Z=(A>>>0<16384?A>>>6|0:j>>>0<14234?0:248)&248,j=L[a|0],x=P-(J(j,6419)>>>8|0)-(J(x,13320)>>>8)|0,A=x+8708|0,x=A>>>0<16384?A>>6:(x|0)<-8708?0:255,m[g|0]=Z|x>>>5,A=x<<3&224,P=P+(J(j,33050)>>>8|0)|0,x=P+-17685|0,m[g+1|0]=A|(x>>>0<16384?x>>>9|0:P>>>0<17685?0:31),P=J(L[i+1|0],19077)>>>8|0,x=L[s|0],j=P+(J(x,26149)>>>8|0)|0,A=j+-14234|0,Z=(A>>>0<16384?A>>>6|0:j>>>0<14234?0:248)&248,j=L[a|0],x=P-(J(j,6419)>>>8|0)-(J(x,13320)>>>8)|0,A=x+8708|0,x=A>>>0<16384?A>>6:(x|0)<-8708?0:255,m[g+2|0]=Z|x>>>5,A=x<<3&224,P=P+(J(j,33050)>>>8|0)|0,x=P+-17685|0,m[g+3|0]=A|(x>>>0<16384?x>>>9|0:P>>>0<17685?0:31),s=s+1|0,a=a+1|0,i=i+2|0,g=g+4|0,(B|0)!=(g|0););g=B}b&1&&(i=J(L[i|0],19077)>>>8|0,s=L[s|0],b=i+(J(s,26149)>>>8|0)|0,B=b+-14234|0,B=(B>>>0<16384?B>>>6|0:b>>>0<14234?0:248)&248,a=L[a|0],s=i-(J(a,6419)>>>8|0)-(J(s,13320)>>>8)|0,b=s+8708|0,s=b>>>0<16384?b>>6:(s|0)<-8708?0:255,m[g|0]=B|s>>>5,i=i+(J(a,33050)>>>8|0)|0,a=i+-17685|0,m[g+1|0]=s<<3&224|(a>>>0<16384?a>>>9|0:i>>>0<17685?0:31))}function zs(i,a,s,g,b){i=i|0,a=a|0,s=s|0,g=g|0,b=b|0;var x=0,A=0,P=0,j=0,B=0,Z=0;if(x=b<<2&-8,x){for(x=g+x|0;A=L[s|0],P=L[a|0],j=L[i|0],m[g+3|0]=255,j=J(j,19077)>>>8|0,B=j+(J(P,33050)>>>8|0)|0,Z=B+-17685|0,m[g+2|0]=Z>>>0<16384?Z>>>6|0:B>>>0<17685?0:255,B=j+(J(A,26149)>>>8|0)|0,Z=B+-14234|0,m[g|0]=Z>>>0<16384?Z>>>6|0:B>>>0<14234?0:255,A=j-(J(P,6419)>>>8|0)-(J(A,13320)>>>8)|0,P=A+8708|0,m[g+1|0]=P>>>0<16384?P>>>6|0:(A|0)<-8708?0:255,A=L[s|0],P=L[a|0],j=L[i+1|0],m[g+7|0]=255,j=J(j,19077)>>>8|0,B=j+(J(P,33050)>>>8|0)|0,Z=B+-17685|0,m[g+6|0]=Z>>>0<16384?Z>>>6|0:B>>>0<17685?0:255,B=j+(J(A,26149)>>>8|0)|0,Z=B+-14234|0,m[g+4|0]=Z>>>0<16384?Z>>>6|0:B>>>0<14234?0:255,A=j-(J(P,6419)>>>8|0)-(J(A,13320)>>>8)|0,P=A+8708|0,m[g+5|0]=P>>>0<16384?P>>>6|0:(A|0)<-8708?0:255,s=s+1|0,a=a+1|0,i=i+2|0,g=g+8|0,(x|0)!=(g|0););g=x}b&1&&(s=L[s|0],a=L[a|0],i=L[i|0],m[g+3|0]=255,i=J(i,19077)>>>8|0,b=i+(J(a,33050)>>>8|0)|0,x=b+-17685|0,m[g+2|0]=x>>>0<16384?x>>>6|0:b>>>0<17685?0:255,b=i+(J(s,26149)>>>8|0)|0,x=b+-14234|0,m[g|0]=x>>>0<16384?x>>>6|0:b>>>0<14234?0:255,i=i-(J(a,6419)>>>8|0)-(J(s,13320)>>>8)|0,a=i+8708|0,m[g+1|0]=a>>>0<16384?a>>>6|0:(i|0)<-8708?0:255)}function Ns(i,a,s,g,b){i=i|0,a=a|0,s=s|0,g=g|0,b=b|0;var x=0,A=0,P=0,j=0,B=0,Z=0;if(x=b<<2&-8,x){for(x=g+x|0;A=L[a|0],P=L[s|0],j=L[i|0],m[g+3|0]=255,j=J(j,19077)>>>8|0,B=j+(J(P,26149)>>>8|0)|0,Z=B+-14234|0,m[g+2|0]=Z>>>0<16384?Z>>>6|0:B>>>0<14234?0:255,B=j+(J(A,33050)>>>8|0)|0,Z=B+-17685|0,m[g|0]=Z>>>0<16384?Z>>>6|0:B>>>0<17685?0:255,A=j-(J(A,6419)>>>8|0)-(J(P,13320)>>>8)|0,P=A+8708|0,m[g+1|0]=P>>>0<16384?P>>>6|0:(A|0)<-8708?0:255,A=L[a|0],P=L[s|0],j=L[i+1|0],m[g+7|0]=255,j=J(j,19077)>>>8|0,B=j+(J(P,26149)>>>8|0)|0,Z=B+-14234|0,m[g+6|0]=Z>>>0<16384?Z>>>6|0:B>>>0<14234?0:255,B=j+(J(A,33050)>>>8|0)|0,Z=B+-17685|0,m[g+4|0]=Z>>>0<16384?Z>>>6|0:B>>>0<17685?0:255,A=j-(J(A,6419)>>>8|0)-(J(P,13320)>>>8)|0,P=A+8708|0,m[g+5|0]=P>>>0<16384?P>>>6|0:(A|0)<-8708?0:255,s=s+1|0,a=a+1|0,i=i+2|0,g=g+8|0,(x|0)!=(g|0););g=x}b&1&&(a=L[a|0],s=L[s|0],i=L[i|0],m[g+3|0]=255,i=J(i,19077)>>>8|0,b=i+(J(s,26149)>>>8|0)|0,x=b+-14234|0,m[g+2|0]=x>>>0<16384?x>>>6|0:b>>>0<14234?0:255,b=i+(J(a,33050)>>>8|0)|0,x=b+-17685|0,m[g|0]=x>>>0<16384?x>>>6|0:b>>>0<17685?0:255,i=i-(J(a,6419)>>>8|0)-(J(s,13320)>>>8)|0,a=i+8708|0,m[g+1|0]=a>>>0<16384?a>>>6|0:(i|0)<-8708?0:255)}function Ya(i,a,s,g,b){i=i|0,a=a|0,s=s|0,g=g|0,b=b|0;var x=0,A=0,P=0,j=0,B=0,Z=0;if(x=b<<2&-8,x){for(x=g+x|0;A=L[s|0],P=L[a|0],j=L[i|0],m[g|0]=255,j=J(j,19077)>>>8|0,B=j+(J(P,33050)>>>8|0)|0,Z=B+-17685|0,m[g+3|0]=Z>>>0<16384?Z>>>6|0:B>>>0<17685?0:255,B=j+(J(A,26149)>>>8|0)|0,Z=B+-14234|0,m[g+1|0]=Z>>>0<16384?Z>>>6|0:B>>>0<14234?0:255,A=j-(J(P,6419)>>>8|0)-(J(A,13320)>>>8)|0,P=A+8708|0,m[g+2|0]=P>>>0<16384?P>>>6|0:(A|0)<-8708?0:255,A=L[s|0],P=L[a|0],j=L[i+1|0],m[g+4|0]=255,j=J(j,19077)>>>8|0,B=j+(J(P,33050)>>>8|0)|0,Z=B+-17685|0,m[g+7|0]=Z>>>0<16384?Z>>>6|0:B>>>0<17685?0:255,B=j+(J(A,26149)>>>8|0)|0,Z=B+-14234|0,m[g+5|0]=Z>>>0<16384?Z>>>6|0:B>>>0<14234?0:255,A=j-(J(P,6419)>>>8|0)-(J(A,13320)>>>8)|0,P=A+8708|0,m[g+6|0]=P>>>0<16384?P>>>6|0:(A|0)<-8708?0:255,s=s+1|0,a=a+1|0,i=i+2|0,g=g+8|0,(x|0)!=(g|0););g=x}b&1&&(s=L[s|0],a=L[a|0],i=L[i|0],m[g|0]=255,i=J(i,19077)>>>8|0,b=i+(J(a,33050)>>>8|0)|0,x=b+-17685|0,m[g+3|0]=x>>>0<16384?x>>>6|0:b>>>0<17685?0:255,b=i+(J(s,26149)>>>8|0)|0,x=b+-14234|0,m[g+1|0]=x>>>0<16384?x>>>6|0:b>>>0<14234?0:255,i=i-(J(a,6419)>>>8|0)-(J(s,13320)>>>8)|0,a=i+8708|0,m[g+2|0]=a>>>0<16384?a>>>6|0:(i|0)<-8708?0:255)}function sa(i){i=i|0,m[i+224|0]=-2139062144,m[i+225|0]=8421504,m[i+226|0]=32896,m[i+227|0]=128,m[i+228|0]=-2139062144,m[i+229|0]=8421504,m[i+230|0]=32896,m[i+231|0]=128,m[i+192|0]=-2139062144,m[i+193|0]=8421504,m[i+194|0]=32896,m[i+195|0]=128,m[i+196|0]=-2139062144,m[i+197|0]=8421504,m[i+198|0]=32896,m[i+199|0]=128,m[i+160|0]=-2139062144,m[i+161|0]=8421504,m[i+162|0]=32896,m[i+163|0]=128,m[i+164|0]=-2139062144,m[i+165|0]=8421504,m[i+166|0]=32896,m[i+167|0]=128,m[i+128|0]=-2139062144,m[i+129|0]=8421504,m[i+130|0]=32896,m[i+131|0]=128,m[i+132|0]=-2139062144,m[i+133|0]=8421504,m[i+134|0]=32896,m[i+135|0]=128,m[i+96|0]=-2139062144,m[i+97|0]=8421504,m[i+98|0]=32896,m[i+99|0]=128,m[i+100|0]=-2139062144,m[i+101|0]=8421504,m[i+102|0]=32896,m[i+103|0]=128,m[i+64|0]=-2139062144,m[i+65|0]=8421504,m[i+66|0]=32896,m[i+67|0]=128,m[i+68|0]=-2139062144,m[i+69|0]=8421504,m[i+70|0]=32896,m[i+71|0]=128,m[i+32|0]=-2139062144,m[i+33|0]=8421504,m[i+34|0]=32896,m[i+35|0]=128,m[i+36|0]=-2139062144,m[i+37|0]=8421504,m[i+38|0]=32896,m[i+39|0]=128,m[i|0]=-2139062144,m[i+1|0]=8421504,m[i+2|0]=32896,m[i+3|0]=128,m[i+4|0]=-2139062144,m[i+5|0]=8421504,m[i+6|0]=32896,m[i+7|0]=128}function Rs(i){i=i|0;var a=0,s=0;a=i,i=a+-32|0,s=L[i|0]|L[i+1|0]<<8|(L[i+2|0]<<16|L[i+3|0]<<24),i=L[i+4|0]|L[i+5|0]<<8|(L[i+6|0]<<16|L[i+7|0]<<24),m[a+224|0]=s,m[a+225|0]=s>>>8,m[a+226|0]=s>>>16,m[a+227|0]=s>>>24,m[a+228|0]=i,m[a+229|0]=i>>>8,m[a+230|0]=i>>>16,m[a+231|0]=i>>>24,m[a+192|0]=s,m[a+193|0]=s>>>8,m[a+194|0]=s>>>16,m[a+195|0]=s>>>24,m[a+196|0]=i,m[a+197|0]=i>>>8,m[a+198|0]=i>>>16,m[a+199|0]=i>>>24,m[a+160|0]=s,m[a+161|0]=s>>>8,m[a+162|0]=s>>>16,m[a+163|0]=s>>>24,m[a+164|0]=i,m[a+165|0]=i>>>8,m[a+166|0]=i>>>16,m[a+167|0]=i>>>24,m[a+128|0]=s,m[a+129|0]=s>>>8,m[a+130|0]=s>>>16,m[a+131|0]=s>>>24,m[a+132|0]=i,m[a+133|0]=i>>>8,m[a+134|0]=i>>>16,m[a+135|0]=i>>>24,m[a+96|0]=s,m[a+97|0]=s>>>8,m[a+98|0]=s>>>16,m[a+99|0]=s>>>24,m[a+100|0]=i,m[a+101|0]=i>>>8,m[a+102|0]=i>>>16,m[a+103|0]=i>>>24,m[a+64|0]=s,m[a+65|0]=s>>>8,m[a+66|0]=s>>>16,m[a+67|0]=s>>>24,m[a+68|0]=i,m[a+69|0]=i>>>8,m[a+70|0]=i>>>16,m[a+71|0]=i>>>24,m[a+32|0]=s,m[a+33|0]=s>>>8,m[a+34|0]=s>>>16,m[a+35|0]=s>>>24,m[a+36|0]=i,m[a+37|0]=i>>>8,m[a+38|0]=i>>>16,m[a+39|0]=i>>>24,m[a|0]=s,m[a+1|0]=s>>>8,m[a+2|0]=s>>>16,m[a+3|0]=s>>>24,m[a+4|0]=i,m[a+5|0]=i>>>8,m[a+6|0]=i>>>16,m[a+7|0]=i>>>24}function la(i){var a=0,s=0,g=0,b=0,x=0,A=0,P=0,j=0,B=0,Z=0,ne=0,me=0,Ce=0,Be=0,at=0,kt=0,It=0,Qt=0,lr=0;me=2,j=f[i>>2];e:{if(j>>>0>12)break e;A=f[i+8>>2],b=f[i+4>>2];t:{r:{if(j>>>0>=11){if(s=f[i+40>>2],g=s>>31,P=f[i+36>>2],a=P>>31,Z=f[i+32>>2],x=Z>>31,Ce=g^s+g,s=(b+1|0)/2|0,It=(Ce|0)>=(s|0),P=a^a+P,Qt=(P|0)>=(s|0),a=x^x+Z,lr=(a|0)>=(b|0),g=b,x=A+-1|0,Z=x,Be=x>>31,B=Ei(x,Be,a,0),x=g+B|0,at=g>>31,a=at+Fn|0,a=x>>>0<B>>>0?a+1|0:a,ne=!a&x>>>0<=ii[i+48>>2]|a>>>0<0,a=s,A=((A+1|0)/2|0)+-1|0,x=A,B=x>>31,P=Ei(x,B,P,0),A=a+P|0,kt=a>>31,s=kt+Fn|0,s=A>>>0<P>>>0?s+1|0:s,ne=ne&(!s&A>>>0<=ii[i+52>>2]|s>>>0<0),A=Ei(Ce,0,x,B)+a|0,s=kt+Fn|0,s=A>>>0<a>>>0?s+1|0:s,a=A,a=It&(Qt&(lr&(ne&(!s&a>>>0<=ii[i+56>>2]|s>>>0<0))))&f[i+16>>2]!=0&f[i+20>>2]!=0&f[i+24>>2]!=0,(j|0)!=12)break r;if(!f[i+28>>2]||(j=f[i+44>>2],s=j>>31,s=s^s+j,!(a&(s|0)>=(b|0))))break e;if(b=Ei(s,0,Z,Be)+g|0,a=at+Fn|0,a=b>>>0<g>>>0?a+1|0:a,g=b,!a&g>>>0<=ii[i+60>>2]|a>>>0<0)break t;break e}if(!f[i+16>>2]||(a=f[i+20>>2],g=a>>31,a=g^a+g,g=J(L[j+1157|0],b),(a|0)<(g|0)))break e;if(b=A+-1|0,b=Ei(b,b>>31,a,0),a=b+g|0,g=Fn+(g>>31)|0,g=a>>>0<b>>>0?g+1|0:g,!g&a>>>0<=ii[i+24>>2]|g>>>0<0)break t;break e}if(!a)break e}me=0}return me}function Wu(i,a,s,g){var b=0,x=0,A=0,P=0,j=0,B=0,Z=0,ne=0,me=0,Ce=0,Be=0;e:{t:{r:{n:{o:{l:{i:{u:{a:{s:{if(A=a,A){if(b=s,!b)break s;if(x=g,!x)break a;if(x=Ri(x)-Ri(A)|0,x>>>0<=31)break u;break t}if((g|0)==1&s>>>0>=0|g>>>0>1)break t;return a=(i>>>0)/(s>>>0)|0,Fn=0,a}if(b=g,!i)break i;if(!b||b+-1&b)break l;return i=A>>>(df(b)&31)|0,Fn=0,i}if(!(b+-1&b))break o;B=(Ri(b)+33|0)-Ri(A)|0,P=0-B|0;break r}B=x+1|0,P=63-x|0;break r}return i=(A>>>0)/(b>>>0)|0,Fn=0,i}if(x=Ri(b)-Ri(A)|0,x>>>0<31)break n;break t}if((b|0)==1)break e;return s=i,i=df(b),g=i&31,32<=(i&63)>>>0?(x=0,i=a>>>g|0):(x=a>>>g|0,i=((1<<g)-1&a)<<32-g|s>>>g),Fn=x,i}B=x+1|0,P=63-x|0}if(b=a,A=i,x=B&63,j=x&31,32<=(x&63)>>>0?(x=0,ne=b>>>j|0):(x=b>>>j|0,ne=((1<<j)-1&b)<<32-j|A>>>j),i=P&63,P=i&31,32<=(i&63)>>>0?(b=A<<P,i=0):(b=(1<<P)-1&A>>>32-P|a<<P,i=A<<P),a=b,B)for(A=g+-1|0,b=s+-1|0,(b|0)!=-1&&(A=A+1|0),P=b;b=ne,Z=x<<1|b>>>31,x=b<<1|a>>>31,me=Z,b=Z,Z=x,j=A-((P>>>0<x>>>0)+b|0)|0,b=j>>31,j=j>>31,x=s&j,ne=Z-x|0,x=me-((g&b)+(Z>>>0<x>>>0)|0)|0,b=a<<1|i>>>31,i=Ce|i<<1,a=b|Be,me=0,Z=j&1,Ce=Z,B=B+-1|0,!!B;);return Fn=me|(a<<1|i>>>31),Z|i<<1}i=0,a=0}return Fn=a,i}function cs(i,a,s,g,b){i=i|0,a=a|0,s=s|0,g=g|0,b=b|0;var x=0,A=0,P=0,j=0,B=0,Z=0;if(B=b<<1&-4,B){for(B=g+B|0;A=L[s|0],x=J(L[i|0],19077)>>>8|0,Z=L[a|0],P=x+(J(Z,33050)>>>8|0)|0,j=P+-17685|0,m[g+1|0]=(j>>>0<16384?j>>>6|0:P>>>0<17685?0:240)|15,P=x+(J(A,26149)>>>8|0)|0,j=P+-14234|0,A=x-(J(Z,6419)>>>8|0)-(J(A,13320)>>>8)|0,x=A+8708|0,m[g|0]=(j>>>0<16384?j>>>6|0:P>>>0<14234?0:240)&240|(x>>>0<16384?x>>>10|0:(A|0)<-8708?0:15),A=L[s|0],x=J(L[i+1|0],19077)>>>8|0,Z=L[a|0],P=x+(J(Z,33050)>>>8|0)|0,j=P+-17685|0,m[g+3|0]=(j>>>0<16384?j>>>6|0:P>>>0<17685?0:240)|15,P=x+(J(A,26149)>>>8|0)|0,j=P+-14234|0,A=x-(J(Z,6419)>>>8|0)-(J(A,13320)>>>8)|0,x=A+8708|0,m[g+2|0]=(j>>>0<16384?j>>>6|0:P>>>0<14234?0:240)&240|(x>>>0<16384?x>>>10|0:(A|0)<-8708?0:15),s=s+1|0,a=a+1|0,i=i+2|0,g=g+4|0,(B|0)!=(g|0););g=B}b&1&&(s=L[s|0],i=J(L[i|0],19077)>>>8|0,a=L[a|0],b=i+(J(a,33050)>>>8|0)|0,B=b+-17685|0,m[g+1|0]=(B>>>0<16384?B>>>6|0:b>>>0<17685?0:240)|15,B=g,g=i+(J(s,26149)>>>8|0)|0,b=g+-14234|0,i=i-(J(a,6419)>>>8|0)-(J(s,13320)>>>8)|0,a=i+8708|0,m[B|0]=(b>>>0<16384?b>>>6|0:g>>>0<14234?0:240)&240|(a>>>0<16384?a>>>10|0:(i|0)<-8708?0:15))}function fs(i,a,s,g){var b=0,x=0,A=0,P=0,j=0,B=0,Z=0,ne=0,me=0,Ce=0,Be=0,at=0;ne=jn-592|0,jn=ne,x=a+24|0,A=ho(x,1),j=ua(s,0,i<<2);e:{t:{r:{n:{if(A){if(s=ho(x,1),Be=(ho(x,ho(x,1)?8:1)<<2)+j|0,at=1,f[Be>>2]=at,(s|0)!=1)break n;Be=(ho(x,8)<<2)+j|0,at=1,f[Be>>2]=at;break n}if(Z=ua(ne,0,76),A=ho(x,4)+4|0,(A|0)>19)break t;if(s=0,(A|0)>0)for(;Be=(L[s+1232|0]<<2)+Z|0,at=ho(x,3),f[Be>>2]=at,s=s+1|0,(A|0)!=(s|0););if(!Ia(Z+80|0,7,Z,19)||(A=i,ho(x,1)&&(A=ho(x,(ho(x,3)<<1)+2|0)+2|0,(A|0)>(i|0))))break r;if((i|0)<1)break n;for(me=8,s=0;;){if(!A)break n;b=f[a+44>>2],(b|0)>=32&&(de(x),b=f[a+44>>2]),Ce=b,P=f[a+28>>2],B=b&63,b=B&31,b=(Z+80|0)+(((32<=(B&63)>>>0?P>>>b|0:((1<<b)-1&P)<<32-b|f[a+24>>2]>>>b)&127)<<2)|0,f[a+44>>2]=Ce+L[b|0],P=kn[b+2>>1];o:{if(P>>>0<=15){f[(s<<2)+j>>2]=P,me=P||me,s=s+1|0;break o}if(b=P+-16|0,B=ho(x,L[b+1251|0])+L[b+1254|0]|0,b=B+s|0,(b|0)>(i|0))break r;if((B|0)<1)break o;for(P=(P|0)==16?me:0;f[(s<<2)+j>>2]=P,s=s+1|0,(b|0)!=(s|0););s=b}if(A=A+-1|0,!((s|0)<(i|0)))break}}if(f[a+48>>2])break t;if(s=Ia(g,8,j,i),s)break e;break t}f[a>>2]=3}f[a>>2]=3,s=0}return jn=ne+592|0,s}function no(i,a,s){i=i|0,a=a|0,s=s|0;var g=0,b=0,x=0;if(s>>>0>=512)return _u(i|0,a|0,s|0)|0,i|0;b=i+s|0;e:{if(!((i^a)&3)){t:{if((s|0)<1){s=i;break t}if(!(i&3)){s=i;break t}for(s=i;;){if(m[s|0]=L[a|0],a=a+1|0,s=s+1|0,s>>>0>=b>>>0)break t;if(!(s&3))break}}g=b&-4;t:{if(g>>>0<64||(x=g+-64|0,s>>>0>x>>>0))break t;for(;f[s>>2]=f[a>>2],f[s+4>>2]=f[a+4>>2],f[s+8>>2]=f[a+8>>2],f[s+12>>2]=f[a+12>>2],f[s+16>>2]=f[a+16>>2],f[s+20>>2]=f[a+20>>2],f[s+24>>2]=f[a+24>>2],f[s+28>>2]=f[a+28>>2],f[s+32>>2]=f[a+32>>2],f[s+36>>2]=f[a+36>>2],f[s+40>>2]=f[a+40>>2],f[s+44>>2]=f[a+44>>2],f[s+48>>2]=f[a+48>>2],f[s+52>>2]=f[a+52>>2],f[s+56>>2]=f[a+56>>2],f[s+60>>2]=f[a+60>>2],a=a- -64|0,s=s- -64|0,s>>>0<=x>>>0;);}if(s>>>0>=g>>>0)break e;for(;f[s>>2]=f[a>>2],a=a+4|0,s=s+4|0,s>>>0<g>>>0;);break e}if(b>>>0<4){s=i;break e}if(g=b+-4|0,g>>>0<i>>>0){s=i;break e}for(s=i;m[s|0]=L[a|0],m[s+1|0]=L[a+1|0],m[s+2|0]=L[a+2|0],m[s+3|0]=L[a+3|0],a=a+4|0,s=s+4|0,s>>>0<=g>>>0;);}if(s>>>0<b>>>0)for(;m[s|0]=L[a|0],a=a+1|0,s=s+1|0,(b|0)!=(s|0););return i|0}function ks(i,a,s,g,b){i=i|0,a=a|0,s=s|0,g=g|0,b=b|0;var x=0,A=0,P=0,j=0,B=0,Z=0;if(A=b&-2,A){for(A=J(A,3)+g|0;P=L[s|0],x=J(L[i|0],19077)>>>8|0,Z=L[a|0],j=x+(J(Z,33050)>>>8|0)|0,B=j+-17685|0,m[g+2|0]=B>>>0<16384?B>>>6|0:j>>>0<17685?0:255,j=x+(J(P,26149)>>>8|0)|0,B=j+-14234|0,m[g|0]=B>>>0<16384?B>>>6|0:j>>>0<14234?0:255,P=x-(J(Z,6419)>>>8|0)-(J(P,13320)>>>8)|0,x=P+8708|0,m[g+1|0]=x>>>0<16384?x>>>6|0:(P|0)<-8708?0:255,P=L[s|0],x=J(L[i+1|0],19077)>>>8|0,Z=L[a|0],j=x+(J(Z,33050)>>>8|0)|0,B=j+-17685|0,m[g+5|0]=B>>>0<16384?B>>>6|0:j>>>0<17685?0:255,j=x+(J(P,26149)>>>8|0)|0,B=j+-14234|0,m[g+3|0]=B>>>0<16384?B>>>6|0:j>>>0<14234?0:255,P=x-(J(Z,6419)>>>8|0)-(J(P,13320)>>>8)|0,x=P+8708|0,m[g+4|0]=x>>>0<16384?x>>>6|0:(P|0)<-8708?0:255,s=s+1|0,a=a+1|0,i=i+2|0,g=g+6|0,(A|0)!=(g|0););g=A}b&1&&(s=L[s|0],i=J(L[i|0],19077)>>>8|0,a=L[a|0],b=i+(J(a,33050)>>>8|0)|0,A=b+-17685|0,m[g+2|0]=A>>>0<16384?A>>>6|0:b>>>0<17685?0:255,b=i+(J(s,26149)>>>8|0)|0,A=b+-14234|0,m[g|0]=A>>>0<16384?A>>>6|0:b>>>0<14234?0:255,i=i-(J(a,6419)>>>8|0)-(J(s,13320)>>>8)|0,a=i+8708|0,m[g+1|0]=a>>>0<16384?a>>>6|0:(i|0)<-8708?0:255)}function il(i,a,s,g,b){i=i|0,a=a|0,s=s|0,g=g|0,b=b|0;var x=0,A=0,P=0,j=0,B=0,Z=0;if(A=b&-2,A){for(A=J(A,3)+g|0;P=L[a|0],x=J(L[i|0],19077)>>>8|0,Z=L[s|0],j=x+(J(Z,26149)>>>8|0)|0,B=j+-14234|0,m[g+2|0]=B>>>0<16384?B>>>6|0:j>>>0<14234?0:255,j=x+(J(P,33050)>>>8|0)|0,B=j+-17685|0,m[g|0]=B>>>0<16384?B>>>6|0:j>>>0<17685?0:255,P=x-(J(P,6419)>>>8|0)-(J(Z,13320)>>>8)|0,x=P+8708|0,m[g+1|0]=x>>>0<16384?x>>>6|0:(P|0)<-8708?0:255,P=L[a|0],x=J(L[i+1|0],19077)>>>8|0,Z=L[s|0],j=x+(J(Z,26149)>>>8|0)|0,B=j+-14234|0,m[g+5|0]=B>>>0<16384?B>>>6|0:j>>>0<14234?0:255,j=x+(J(P,33050)>>>8|0)|0,B=j+-17685|0,m[g+3|0]=B>>>0<16384?B>>>6|0:j>>>0<17685?0:255,P=x-(J(P,6419)>>>8|0)-(J(Z,13320)>>>8)|0,x=P+8708|0,m[g+4|0]=x>>>0<16384?x>>>6|0:(P|0)<-8708?0:255,s=s+1|0,a=a+1|0,i=i+2|0,g=g+6|0,(A|0)!=(g|0););g=A}b&1&&(a=L[a|0],i=J(L[i|0],19077)>>>8|0,s=L[s|0],b=i+(J(s,26149)>>>8|0)|0,A=b+-14234|0,m[g+2|0]=A>>>0<16384?A>>>6|0:b>>>0<14234?0:255,b=i+(J(a,33050)>>>8|0)|0,A=b+-17685|0,m[g|0]=A>>>0<16384?A>>>6|0:b>>>0<17685?0:255,i=i-(J(a,6419)>>>8|0)-(J(s,13320)>>>8)|0,a=i+8708|0,m[g+1|0]=a>>>0<16384?a>>>6|0:(i|0)<-8708?0:255)}function Jl(i,a){var s=0,g=0,b=0;e:{if(!i)break e;if(!a){if(f[i>>2])break e;return f[i>>2]=2,f[i+4>>2]=0,f[i+8>>2]=5281,0}if(!f[i+4>>2]&&!Qo(i,a))break e;t:{if(!Ws(i,a)){r:{if(!xu(i,a))break r;f[i+2300>>2]=0;n:{if(f[i+308>>2]>=1)for(b=i+12|0;;){if(g=f[i+312>>2],!ws(b,i))break n;if(f[i+2296>>2]<f[i+288>>2])for(s=(J(s&g,28)+i|0)+316|0;;){if(!Sa(i,s)){if(s=0,f[i>>2])break r;f[i>>2]=7,f[i+4>>2]=0,f[i+8>>2]=5412;break r}if(g=f[i+2296>>2]+1|0,f[i+2296>>2]=g,!((g|0)<f[i+288>>2]))break}if(s=f[i+2256>>2]+-2|0,m[s|0]=0,m[s+1|0]=0,f[i+2296>>2]=0,f[i+2248>>2]=0,!Rc(i,a)){if(s=0,f[i>>2])break r;f[i>>2]=6,f[i+4>>2]=0,f[i+8>>2]=5447;break r}if(s=f[i+2300>>2]+1|0,f[i+2300>>2]=s,!((s|0)<f[i+308>>2]))break}o:{if(f[i+148>>2]<1||et[f[2559]](i+124|0)|0)break o;s=0;break r}s=1;break r}if(s=0,f[i>>2])break r;f[i>>2]=7,f[i+4>>2]=0,f[i+8>>2]=5371}if(on(i,a)&s)break t}return et[f[2562]](i+124|0),H0(i),Vi(f[i+2288>>2]),f[i+2288>>2]=0,f[i+2292>>2]=0,f[i+12>>2]=0,f[i+16>>2]=0,f[i+20>>2]=0,f[i+24>>2]=0,f[i+28>>2]=0,f[i+32>>2]=0,f[i+36>>2]=0,f[i+4>>2]=0,0}f[i+4>>2]=0,s=1}return s}function ku(i){var a=0,s=0,g=0,b=0,x=0,A=0,P=0,j=0,B=0,Z=0,ne=0,me=0,Ce=0,Be=0,at=0,kt=0;for(a=i+12|0,P=Mi(a,7),Mi(a,1)&&(ne=ls(a,4)),Mi(a,1)&&(me=ls(a,4)),Mi(a,1)&&(Ce=ls(a,4)),Mi(a,1)&&(Be=ls(a,4)),Mi(a,1)&&(at=ls(a,4)),kt=f[i+104>>2],A=i+776|0,j=A+24|0,B=A+16|0,Z=A+8|0;;){e:{t:{if(kt){a=m[(i+x|0)+116|0]+(f[i+112>>2]?0:P)|0;break t}if(a=P,!x)break t;s=f[j+4>>2],a=(x<<5)+i|0,f[a+800>>2]=f[j>>2],f[a+804>>2]=s,s=f[B+4>>2],f[a+792>>2]=f[B>>2],f[a+796>>2]=s,s=f[Z+4>>2],f[a+784>>2]=f[Z>>2],f[a+788>>2]=s,s=f[A+4>>2],f[a+776>>2]=f[A>>2],f[a+780>>2]=s;break e}s=(x<<5)+i|0,b=a+at|0,f[s+800>>2]=b,g=a+Be|0,g=(g|0)<117?g:117,f[s+792>>2]=L[((g|0)>0?g:0)+4448|0],g=(a|0)<127?a:127,f[s+780>>2]=kn[(((g|0)>0?g:0)<<1)+4576>>1],g=a+ne|0,g=(g|0)<127?g:127,f[s+776>>2]=L[((g|0)>0?g:0)+4448|0],b=(b|0)<127?b:127,f[s+796>>2]=kn[(((b|0)>0?b:0)<<1)+4576>>1],b=a+me|0,b=(b|0)<127?b:127,f[s+784>>2]=L[((b|0)>0?b:0)+4448|0]<<1,a=a+Ce|0,a=(a|0)<127?a:127,a=J(kn[(((a|0)>0?a:0)<<1)+4576>>1],101581),f[s+788>>2]=a>>>0<524288?8:a>>>16|0}if(x=x+1|0,(x|0)==4)break}}function Ca(i,a,s,g,b,x,A){var P=0,j=0,B=0,Z=0,ne=0,me=0,Ce=0,Be=0,at=0,kt=0,It=0,Qt=0,lr=0,zr=0,Sr=0,Jr=0,hn=0,Sn=0,di=0,Ni=0,Ua=0,Ks=0,iu=0,jc=0;if((g|0)>=1)for(di=b<<1|1,Ni=J(a,3),Ua=0-a|0,Ks=J(a,-3),iu=0-(a<<2)|0,It=a<<1,jc=0-It|0,Qt=f[2547],B=f[2548],lr=f[2546],Z=f[2549];;){b=g,zr=i+jc|0,j=L[zr|0],Sr=i+a|0,Be=L[Sr|0],P=j-Be|0,at=i+Ua|0,g=L[at|0],Ce=L[i|0];e:{if((L[P+Z|0]+(L[Z+(g-Ce|0)|0]<<2)|0)>(di|0)||(Jr=i+Ks|0,me=L[Jr|0],L[Z+(L[i+iu|0]-me|0)|0]>(x|0)|L[Z+(me-j|0)|0]>(x|0))||(ne=L[Z+(j-g|0)|0],(ne|0)>(x|0))||(hn=i+It|0,kt=L[hn|0],L[Z+(L[i+Ni|0]-kt|0)|0]>(x|0)|L[Z+(kt-Be|0)|0]>(x|0))||(Sn=L[Z+(Be-Ce|0)|0],(Sn|0)>(x|0)))break e;if(P=m[P+lr|0]+J(Ce-g|0,3)|0,!((Sn|0)<=(A|0)&&(ne|0)<=(A|0))){j=m[(P+4>>3)+Qt|0],m[at|0]=L[(m[(P+3>>3)+Qt|0]+g|0)+B|0],m[i|0]=L[(Ce-j|0)+B|0];break e}ne=me,P=m[P+lr|0],me=J(P,9)+63>>7,m[Jr|0]=L[(ne+me|0)+B|0],ne=j,j=J(P,18)+63>>7,m[zr|0]=L[(ne+j|0)+B|0],ne=g,g=J(P,27)+63>>7,m[at|0]=L[(ne+g|0)+B|0],m[i|0]=L[(Ce-g|0)+B|0],m[Sr|0]=L[(Be-j|0)+B|0],m[hn|0]=L[(kt-me|0)+B|0]}if(g=b+-1|0,i=i+s|0,!((b|0)>1))break}}function Cl(i,a,s){var g=0,b=0,x=0,A=0,P=0,j=0;if(g=sl(1,0,272),!g)return 0;f[g>>2]=0,f[g+4>>2]=2,An(),x=f[i>>2],f[g+100>>2]=x,b=f[i+4>>2],f[g+8>>2]=i+24,f[g+104>>2]=b,f[i+28>>2]=b,f[i+24>>2]=x,f[i- -64>>2]=i,f[g>>2]=0,fe(g+24|0,a,s);e:{t:{r:{if(!gn(f[i>>2],f[i+4>>2],1,g,0))break r;n:{o:{if(f[g+176>>2]!=1|f[g+180>>2]!=3|f[g+120>>2]>0)break o;if(s=f[g+164>>2],(s|0)<1)break n;for(a=f[g+168>>2],b=0;;){if(x=a+J(b,548)|0,L[f[x+4>>2]]|L[f[x+8>>2]]|L[f[x+12>>2]])break o;if(b=b+1|0,(s|0)==(b|0))break}break n}if(f[i+132>>2]=0,a=f[g+104>>2],s=a,b=a>>31,a=f[g+100>>2],A=Ei(s,b,a,a>>31),s=Fn,j=g,b=f[i>>2],a=b>>31,a=a<<4|b>>>28,x=b<<4,P=b&65535,b=P,x=x+b|0,x>>>0<b>>>0&&(a=a+1|0),b=x+A|0,a=a+s|0,a=Ta(b,b>>>0<x>>>0?a+1|0:a,4),f[j+16>>2]=a,a)break t;f[g+20>>2]=0,f[g>>2]=1;break r}if(f[i+132>>2]=1,f[g+20>>2]=0,a=f[g+104>>2],s=a,b=a>>31,a=f[g+100>>2],a=Ta(Ei(s,b,a,a>>31),Fn,1),f[g+16>>2]=a,a)break e;f[g>>2]=1}return Bo(g),Vi(g),0}f[g+20>>2]=(a+(A<<2)|0)+(P<<2)}return f[i+20>>2]=g,1}function ba(i,a,s){i=i|0,a=a|0,s=s|0;var g=0,b=0,x=0,A=0,P=0,j=0,B=0,Z=0,ne=0,me=0,Ce=0,Be=0,at=0,kt=0;for(me=0-a|0,Z=a<<2,j=Z+i|0,Ce=0-(a<<1)|0,Be=s<<1|1,i=f[2548],s=f[2547],at=f[2546],ne=f[2549];g=b+j|0,A=g+me|0,B=L[A|0],P=L[g|0],x=L[g+Ce|0]-L[a+g|0]|0,((L[ne+(B-P|0)|0]<<2)+L[x+ne|0]|0)<=(Be|0)&&(x=m[x+at|0]+J(P-B|0,3)|0,kt=m[(x+4>>3)+s|0],m[A|0]=L[(B+m[(x+3>>3)+s|0]|0)+i|0],m[g|0]=L[(P-kt|0)+i|0]),b=b+1|0,(b|0)!=16;);for(j=j+Z|0,b=0;g=b+j|0,A=g+me|0,B=L[A|0],P=L[g|0],x=L[g+Ce|0]-L[a+g|0]|0,((L[ne+(B-P|0)|0]<<2)+L[x+ne|0]|0)<=(Be|0)&&(x=m[x+at|0]+J(P-B|0,3)|0,kt=m[(x+4>>3)+s|0],m[A|0]=L[(B+m[(x+3>>3)+s|0]|0)+i|0],m[g|0]=L[(P-kt|0)+i|0]),b=b+1|0,(b|0)!=16;);for(B=j+Z|0,b=0;g=b+B|0,P=g+me|0,Z=L[P|0],j=L[g|0],A=L[g+Ce|0]-L[a+g|0]|0,((L[ne+(Z-j|0)|0]<<2)+L[A+ne|0]|0)<=(Be|0)&&(A=m[A+at|0]+J(j-Z|0,3)|0,x=m[(A+4>>3)+s|0],m[P|0]=L[(Z+m[(A+3>>3)+s|0]|0)+i|0],m[g|0]=L[(j-x|0)+i|0]),b=b+1|0,(b|0)!=16;);}function Pn(i,a,s){i=i|0,a=a|0,s=s|0;var g=0,b=0,x=0,A=0,P=0,j=0,B=0,Z=0,ne=0,me=0,Ce=0,Be=0;for(B=i+4|0,me=s<<1|1,s=f[2548],Z=f[2547],Ce=f[2546],ne=f[2549];g=B+J(a,b)|0,A=g+-1|0,P=L[A|0],j=L[g|0],x=L[g+-2|0]-L[g+1|0]|0,((L[ne+(P-j|0)|0]<<2)+L[x+ne|0]|0)<=(me|0)&&(x=m[x+Ce|0]+J(j-P|0,3)|0,Be=m[(x+4>>3)+Z|0],m[A|0]=L[(P+m[(x+3>>3)+Z|0]|0)+s|0],m[g|0]=L[(j-Be|0)+s|0]),b=b+1|0,(b|0)!=16;);for(B=i+8|0,b=0;g=B+J(a,b)|0,A=g+-1|0,P=L[A|0],j=L[g|0],x=L[g+-2|0]-L[g+1|0]|0,((L[ne+(P-j|0)|0]<<2)+L[x+ne|0]|0)<=(me|0)&&(x=m[x+Ce|0]+J(j-P|0,3)|0,Be=m[(x+4>>3)+Z|0],m[A|0]=L[(P+m[(x+3>>3)+Z|0]|0)+s|0],m[g|0]=L[(j-Be|0)+s|0]),b=b+1|0,(b|0)!=16;);for(j=i+12|0,b=0;i=j+J(a,b)|0,B=i+-1|0,g=L[B|0],P=L[i|0],A=L[i+-2|0]-L[i+1|0]|0,((L[ne+(g-P|0)|0]<<2)+L[A+ne|0]|0)<=(me|0)&&(A=m[A+Ce|0]+J(P-g|0,3)|0,x=m[(A+4>>3)+Z|0],m[B|0]=L[(g+m[(A+3>>3)+Z|0]|0)+s|0],m[i|0]=L[(P-x|0)+s|0]),b=b+1|0,(b|0)!=16;);}function Oo(i,a){i=i|0,a=a|0;var s=0;i=Pr[i>>1]+4>>3,s=i+L[a|0]|0,s=(s|0)>0?s:0,m[a|0]=(s|0)<255?s:255,s=i+L[a+1|0]|0,s=(s|0)>0?s:0,m[a+1|0]=(s|0)<255?s:255,s=i+L[a+2|0]|0,s=(s|0)>0?s:0,m[a+2|0]=(s|0)<255?s:255,s=i+L[a+3|0]|0,s=(s|0)>0?s:0,m[a+3|0]=(s|0)<255?s:255,s=i+L[a+32|0]|0,s=(s|0)>0?s:0,m[a+32|0]=(s|0)<255?s:255,s=i+L[a+33|0]|0,s=(s|0)>0?s:0,m[a+33|0]=(s|0)<255?s:255,s=i+L[a+34|0]|0,s=(s|0)>0?s:0,m[a+34|0]=(s|0)<255?s:255,s=i+L[a+35|0]|0,s=(s|0)>0?s:0,m[a+35|0]=(s|0)<255?s:255,s=i+L[a+64|0]|0,s=(s|0)>0?s:0,m[a+64|0]=(s|0)<255?s:255,s=i+L[a+65|0]|0,s=(s|0)>0?s:0,m[a+65|0]=(s|0)<255?s:255,s=i+L[a+66|0]|0,s=(s|0)>0?s:0,m[a+66|0]=(s|0)<255?s:255,s=i+L[a+67|0]|0,s=(s|0)>0?s:0,m[a+67|0]=(s|0)<255?s:255,s=i+L[a+96|0]|0,s=(s|0)>0?s:0,m[a+96|0]=(s|0)<255?s:255,s=i+L[a+97|0]|0,s=(s|0)>0?s:0,m[a+97|0]=(s|0)<255?s:255,s=i+L[a+98|0]|0,s=(s|0)>0?s:0,m[a+98|0]=(s|0)<255?s:255,i=i+L[a+99|0]|0,i=(i|0)>0?i:0,m[a+99|0]=(i|0)<255?i:255}function Ji(i,a,s,g,b,x,A){var P=0,j=0,B=0,Z=0,ne=0,me=0,Ce=0,Be=0,at=0,kt=0,It=0,Qt=0,lr=0,zr=0,Sr=0,Jr=0,hn=0,Sn=0,di=0,Ni=0,Ua=0;if((g|0)>=1)for(Sr=b<<1|1,Jr=J(a,3),hn=0-a|0,Sn=J(a,-3),di=0-(a<<2)|0,It=a<<1,Ni=0-It|0,Ua=f[2546],Z=f[2548],Ce=f[2547],B=f[2549];;){b=g,Qt=i+Ni|0,j=L[Qt|0],lr=i+a|0,ne=L[lr|0],Be=j-ne|0,kt=i+hn|0,g=L[kt|0],me=L[i|0];e:{if((L[Be+B|0]+(L[B+(g-me|0)|0]<<2)|0)>(Sr|0)||(P=L[i+Sn|0],L[B+(L[i+di|0]-P|0)|0]>(x|0)|L[B+(P-j|0)|0]>(x|0))||(at=L[B+(j-g|0)|0],(at|0)>(x|0))||(P=L[i+It|0],L[B+(L[i+Jr|0]-P|0)|0]>(x|0)|L[B+(P-ne|0)|0]>(x|0))||(zr=L[B+(ne-me|0)|0],(zr|0)>(x|0)))break e;if(P=J(me-g|0,3),!((zr|0)<=(A|0)&&(at|0)<=(A|0))){j=m[Be+Ua|0]+P|0,ne=m[(j+4>>3)+Ce|0],m[kt|0]=L[(m[(j+3>>3)+Ce|0]+g|0)+Z|0],m[i|0]=L[(me-ne|0)+Z|0];break e}Be=m[(P+3>>3)+Ce|0],at=j,j=m[(P+4>>3)+Ce|0],P=j+1>>1,m[Qt|0]=L[(at+P|0)+Z|0],m[kt|0]=L[(g+Be|0)+Z|0],m[i|0]=L[(me-j|0)+Z|0],m[lr|0]=L[(ne-P|0)+Z|0]}if(g=b+-1|0,i=i+s|0,!((b|0)>1))break}}function Fo(i,a,s,g){var b=0,x=0,A=0,P=0,j=0,B=0,Z=0,ne=0;e:{t:switch(s|0){case 0:et[f[2734]](i,a,g);return;case 1:et[f[2735]](i,a,g);return;case 7:et[f[2735]](i,a,g),et[f[2664]](g,0,a,1,0);return;case 2:et[f[2736]](i,a,g);return;case 3:no(g,i,a<<2);return;case 8:P=no(g,i,a<<2),j=0,B=a,Z=1,ne=0,A=f[2664],et[A](P|0,j|0,B|0,Z|0,ne|0);return;case 4:if((a|0)<1)break e;for(s=(a<<2)+i|0;a=f[i>>2],a=a<<24|a<<8&16711680|(a>>>8&65280|a>>>24),m[g|0]=a,m[g+1|0]=a>>>8,m[g+2|0]=a>>>16,m[g+3|0]=a>>>24,g=g+4|0,i=i+4|0,i>>>0<s>>>0;);break e;case 9:if((a|0)>=1)for(x=(a<<2)+i|0,s=g;b=f[i>>2],b=b<<24|b<<8&16711680|(b>>>8&65280|b>>>24),m[s|0]=b,m[s+1|0]=b>>>8,m[s+2|0]=b>>>16,m[s+3|0]=b>>>24,s=s+4|0,i=i+4|0,i>>>0<x>>>0;);et[f[2664]](g,1,a,1,0);return;case 5:et[f[2737]](i,a,g);return;case 10:et[f[2737]](i,a,g),et[f[2665]](g,a,1,0);return;case 6:break t;default:break e}et[f[2738]](i,a,g)}}function ga(i,a,s){var g=0,b=0,x=0;g=jn-160|0,jn=g,f[g+16>>2]=1,f[g+12>>2]=a,f[g+8>>2]=i,f[g+156>>2]=0,b=g,x=wl(i,a,0,0,0,g+156|0,0,g+8|0),f[b+48>>2]=x,!f[g+156>>2]|(f[g+48>>2]!=7?f[g+48>>2]:0)||(f[g+48>>2]=4),i=f[g+48>>2];e:{if(i)break e;Rd(g+48|0),i=f[g+20>>2],f[g+112>>2]=i+f[g+8>>2],f[g+108>>2]=f[g+12>>2]-i,Us(s,g+48|0);t:{if(!f[g+40>>2]){if(a=Mo(),!a){i=1;break e}f[a+2348>>2]=f[g+24>>2],f[a+2352>>2]=f[g+28>>2];r:{if(Qo(a,g+48|0)&&(i=Xl(f[g+48>>2],f[g+52>>2],f[s+20>>2],f[s>>2]),i||(f[a+148>>2]=0,b0(f[s+20>>2],a),i=0,Jl(a,g+48|0))))break r;i=f[a>>2]}Wa(a);break t}a=sl(1,0,272),i=0;r:{if(!a)break r;f[a>>2]=0,f[a+4>>2]=2,An(),i=a}if(a=i,!a){i=1;break e}r:{if(Te(a,g+48|0)&&(i=Xl(f[g+48>>2],f[g+52>>2],f[s+20>>2],f[s>>2]),i||(i=0,Dc(a))))break r;i=f[a>>2]}yh(a)}if(i){Pl(f[s>>2]);break e}if(i=0,a=f[s+20>>2],!a|!f[a+48>>2])break e;i=je(f[s>>2])}return jn=g+160|0,i}function An(){var i=0;i=f[2673],(i|0)!=f[2551]&&(f[2771]=81,f[2770]=81,f[2769]=82,f[2768]=83,f[2767]=84,f[2766]=85,f[2765]=86,f[2764]=87,f[2763]=88,f[2762]=89,f[2761]=90,f[2760]=91,f[2759]=92,f[2758]=93,f[2757]=94,f[2756]=81,f[2803]=81,f[2802]=81,f[2801]=82,f[2800]=83,f[2799]=84,f[2798]=85,f[2797]=86,f[2796]=87,f[2795]=88,f[2794]=89,f[2793]=90,f[2792]=91,f[2791]=92,f[2790]=93,f[2789]=94,f[2788]=81,f[2755]=95,f[2754]=95,f[2753]=96,f[2752]=97,f[2751]=98,f[2750]=99,f[2749]=100,f[2748]=101,f[2747]=102,f[2746]=103,f[2745]=104,f[2744]=105,f[2743]=106,f[2742]=107,f[2741]=108,f[2740]=95,f[2787]=95,f[2786]=95,f[2785]=96,f[2784]=97,f[2783]=98,f[2782]=99,f[2781]=100,f[2780]=101,f[2779]=102,f[2778]=103,f[2777]=104,f[2776]=105,f[2775]=106,f[2774]=107,f[2773]=108,f[2772]=95,f[2733]=109,f[2804]=110,f[2735]=111,f[2734]=112,f[2736]=113,f[2737]=114,f[2738]=115,f[2805]=116,f[2732]=117,f[2551]=i)}function As(i,a,s){var g=0,b=0,x=0,A=0,P=0,j=0,B=0,Z=0;b=jn-16|0,jn=b,j=f[a+4>>2],B=f[a>>2];e:{t:{if(!i){f[a+72>>2]=0,g=B,x=j;break t}if(A=f[i+8>>2],f[a+72>>2]=(A|0)>0,g=B,x=j,(A|0)<1)break t;if(A=0,g=f[i+16>>2],s=s>>>0>10,P=s?g&-2:g,x=f[i+24>>2],(P+x|0)>(j|0)||(g=f[i+12>>2],Z=s?g&-2:g,g=f[i+20>>2],(x|0)<1|(Z+g|0)>(B|0)|((g|0)<1|(P|Z)<0)))break e}if(f[a+84>>2]=P,f[a+76>>2]=Z,f[a+16>>2]=x,f[a+12>>2]=g,f[a+88>>2]=P+x,f[a+80>>2]=g+Z,i){s=f[i+28>>2],f[a+92>>2]=(s|0)>0,A=1,P=1;t:{if((s|0)>=1){if(f[b+12>>2]=f[i+32>>2],f[b+8>>2]=f[i+36>>2],!Ue(g,x,b+12|0,b+8|0))break t;f[a+96>>2]=f[b+12>>2],f[a+100>>2]=f[b+8>>2],P=!f[a+92>>2]}if(f[a+68>>2]=f[i>>2]!=0,f[a+56>>2]=!f[i+4>>2],P)break e;i=0,i=f[a+96>>2]<((J(B,3)|0)/4|0)?f[a+100>>2]<((J(j,3)|0)/4|0):i,f[a+56>>2]=0,f[a+68>>2]=i;break e}A=0;break e}f[a+68>>2]=0,f[a+92>>2]=0,A=1,f[a+56>>2]=1}return jn=b+16|0,A}function Zu(i,a){i=i|0,a=a|0;var s=0,g=0,b=0,x=0,A=0,P=0,j=0,B=0,Z=0,ne=0,me=0,Ce=0,Be=0;if(g=f[i+108>>2],A=a-g|0,(A|0)>=1)for(s=f[i+100>>2],B=f[i+16>>2]+(J(s,g)<<2)|0;;){P=(A|0)<16?A:16,me=P+g|0,b=f[i+8>>2],Z=f[b>>2],Ce=J(Z,P),ne=f[b+40>>2],b=f[ne+136>>2]+J(g,Z)|0,j=f[i+20>>2],x=f[i+176>>2];e:{if((x|0)>=1){if(s=x+-1|0,Zl((J(s,20)+i|0)+180|0,g,me,B,j),(x|0)<2)break e;for(;x=s+-1|0,Zl((J(x,20)+i|0)+180|0,g,me,j,j),Be=(s|0)>1,s=x,!!Be;);break e}if((j|0)==(B|0))break e;no(j,B,J(s,P)<<2)}if(et[f[2669]](j,b,Ce),x=f[ne+12>>2],x){s=f[ne+140>>2];e:{if((A|0)<1)break e;if(et[f[(x<<2)+10912>>2]](s,b,b,Z),(P|0)==1){s=b;break e}for(g=g+1|0;s=b+Z|0,et[f[(f[ne+12>>2]<<2)+10912>>2]](b,s,s,Z),b=s,g=g+1|0,(me|0)!=(g|0););}f[ne+140>>2]=s}if(s=f[i+100>>2],B=(J(s,P)<<2)+B|0,g=me,A=A-P|0,!((A|0)>0))break}f[i+108>>2]=a,f[i+116>>2]=a}function Xu(i,a){i=i|0,a=a|0;var s=0,g=0,b=0,x=0,A=0,P=0,j=0,B=0,Z=0,ne=0,me=0;if(A=f[i+16>>2],(A|0)<1)return 0;for(ne=A+1>>1,s=f[a+24>>2];;){g=s,s=f[i+32>>2],x=wa(g,A-P|0,f[i+20>>2]+J(s,P)|0,s),s=ne-j|0,_n(f[a+28>>2],s)&&(b=f[i+36>>2],b=wa(f[a+28>>2],s,f[i+24>>2]+J(b,j)|0,b),g=s,s=f[i+36>>2],wa(f[a+32>>2],g,f[i+28>>2]+J(s,j)|0,s),j=b+j|0),P=x+P|0,x=f[a>>2],g=f[x>>2],b=0,s=f[a+24>>2];e:{if(f[s+64>>2]>=f[s+56>>2])break e;for(me=f[(g<<2)+11312>>2],g=f[x+16>>2]+J(f[x+20>>2],f[a+16>>2]+B|0)|0;;){if(f[s+24>>2]>0||(Z=f[a+28>>2],f[Z+64>>2]>=f[Z+56>>2]|f[Z+24>>2]>0))break e;if(Gr(s),Gr(f[a+28>>2]),Gr(f[a+32>>2]),s=f[a+24>>2],et[me|0](f[s+68>>2],f[f[a+28>>2]+68>>2],f[f[a+32>>2]+68>>2],g,f[s+52>>2]),b=b+1|0,g=f[x+20>>2]+g|0,s=f[a+24>>2],!(f[s+64>>2]<f[s+56>>2]))break}}if(B=b+B|0,!((A|0)>(P|0)))break}return B|0}function zc(i,a){i=i|0,a=a|0;var s=0,g=0,b=0,x=0,A=0,P=0;s=jn-240|0,jn=s,b=s+40|0,b?(gf(ua(b,0,200)+40|0),b=1):b=0;e:{if(!b){lo(f[2536]);break e}L[10640]||(Gs(32)|0,m[10640]=1),b=s+80|0;t:{if(Ki(i,a,s+40|0))break t;if(x=Pc(f[s+40>>2],f[s+44>>2],32,0)|0,!x){i=f[s+44>>2],f[s>>2]=f[s+40>>2],f[s+4>>2]=i,uo(f[2536],1051,s),x=0;break t}if(g=bl(0,f[s+40>>2],f[s+44>>2],32,255,65280,16711680,-16777216)|0,!g){i=f[s+44>>2],f[s+16>>2]=f[s+40>>2],f[s+20>>2]=i,uo(f[2536],1092,s+16|0),g=0;break t}if(Xa(g|0)|0,f[s+80>>2]=1,f[s+84>>2]=f[g+8>>2],f[s+88>>2]=f[g+12>>2],f[s+96>>2]=f[g+20>>2],f[s+100>>2]=f[g+16>>2],A=f[g+12>>2],P=f[g+16>>2],f[s+92>>2]=1,f[s+104>>2]=J(A,P),i=os(i,a,s+40|0),i){f[s+32>>2]=i,A=0,uo(f[2536],1130,s+32|0);break t}if(uc(g|0),A=0,gu(g|0,0,x|0,0)|0)break t;A=!(Mc(x|0)|0)}yu(g|0),yu(x|0),Pl(b)}return jn=s+240|0,A|0}function e0(i,a,s,g,b){i=i|0,a=a|0,s=s|0,g=g|0,b=b|0;var x=0,A=0,P=0,j=0,B=0,Z=0;if((g|0)>=2)for(A=g>>1,j=(A|0)>1?A:1,A=0;;){x=A<<3,P=f[(x|4)+i>>2],x=f[i+x>>2],B=(P>>>7&510)+(x>>>7&510)|0,Z=(P>>>15&510)+(x>>>15&510)|0,x=(P<<1&510)+(x<<1&510)|0,P=((J(B,-24116)+J(Z,28800)|0)+J(x,-4684)|0)+33685504>>18,x=((J(B,-19081)+J(Z,-9719)|0)+J(x,28800)|0)+33685504>>18;e:{if(b){m[a+A|0]=x,m[s+A|0]=P;break e}B=a+A|0,m[B|0]=(x+L[B|0]|0)+1>>>1,x=s+A|0,m[x|0]=(P+L[x|0]|0)+1>>>1}if(A=A+1|0,(j|0)==(A|0))break}if(g&1){if(i=f[(j<<3)+i>>2],g=i>>>6&1020,A=i>>>14&1020,P=i<<2&1020,i=((J(g,-24116)+J(A,28800)|0)+J(P,-4684)|0)+33685504>>18,g=((J(g,-19081)+J(A,-9719)|0)+J(P,28800)|0)+33685504>>18,b){m[a+j|0]=g,m[s+j|0]=i;return}a=a+j|0,m[a|0]=(g+L[a|0]|0)+1>>>1,a=s+j|0,m[a|0]=(i+L[a|0]|0)+1>>>1}}function t0(i,a){i=i|0,a=a|0;var s=0,g=0,b=0,x=0,A=0,P=0,j=0,B=0,Z=0,ne=0,me=0,Ce=0,Be=0,at=0,kt=0,It=0;b=f[i+16>>2],B=f[i+12>>2],Ce=(B+1|0)/2|0,Z=f[a>>2],s=f[Z+20>>2],A=f[i+8>>2],P=f[Z+16>>2]+J(A,s)|0,ne=f[(f[Z>>2]<<2)+11248>>2],g=f[i+28>>2],x=f[i+24>>2],j=f[i+20>>2];e:{if(!A){et[ne|0](j,0,x,g,x,g,P,0,B),s=b;break e}et[ne|0](f[a+4>>2],j,f[a+8>>2],f[a+12>>2],x,g,P-s|0,P,B),s=b+1|0}Be=s,me=b+A|0;e:{if((b|0)<3){s=x,b=g;break e}for(A=A+2|0;s=f[i+32>>2],j=(s<<1)+j|0,kt=j-s|0,at=x,It=g,x=f[i+36>>2],s=at+x|0,b=g+x|0,g=f[Z+20>>2],P=(g<<1)+P|0,et[ne|0](kt,j,at,It,s,b,P-g|0,P,B),g=b,x=s,A=A+2|0,(A|0)<(me|0););}return g=f[i+32>>2]+j|0,(f[i+84>>2]+me|0)<f[i+88>>2]?(no(f[a+4>>2],g,B),no(f[a+8>>2],s,Ce),no(f[a+12>>2],b,Ce),Be+-1|0):(me&1||et[ne|0](g,0,s,b,s,b,f[Z+20>>2]+P|0,0,B),Be|0)}function b0(i,a){var s=0,g=0,b=0;e:{if(!i)break e;s=f[i+44>>2];t:{if((s|0)<0||(g=255,(s|0)<=100&&(s=J(s,255),g=(s|0)/100|0,(s|0)<100)))break t;s=f[a+800>>2];r:{if((s|0)>=12){b=f[a+804>>2];break r}b=J(L[((s|0)>0?s:0)+4832|0],g)>>3,f[a+804>>2]=b}s=f[a+832>>2];r:{if((s|0)>=12){s=f[a+836>>2];break r}s=J(L[((s|0)>0?s:0)+4832|0],g)>>3,f[a+836>>2]=s}b=s|b,s=f[a+864>>2];r:{if((s|0)>=12){s=f[a+868>>2];break r}s=J(L[((s|0)>0?s:0)+4832|0],g)>>3,f[a+868>>2]=s}b=s|b,s=f[a+896>>2];r:{if((s|0)>=12){g=f[a+900>>2];break r}g=J(L[((s|0)>0?s:0)+4832|0],g)>>3,f[a+900>>2]=g}if(!(g|b))break t;g=a+544|0,no(g+8|0,9424,220),f[g>>2]=0,f[g+4>>2]=31,f[g+228>>2]=256,f[a+540>>2]=1}if(i=f[i+52>>2],f[a+2372>>2]=i,(i|0)>=101){f[a+2372>>2]=100;return}if((i|0)>-1)break e;f[a+2372>>2]=0}}function Mi(i,a){var s=0,g=0,b=0,x=0,A=0,P=0,j=0,B=0,Z=0,ne=0;if((a|0)<1)return 0;for(s=f[i+8>>2],P=f[i+4>>2];;){e:{if((s|0)>-1)break e;if(g=f[i+12>>2],g>>>0<ii[i+20>>2]){b=L[g|0]|L[g+1|0]<<8|(L[g+2|0]<<16|L[g+3|0]<<24),f[i+12>>2]=g+3,s=s+24|0,f[i+8>>2]=s,f[i>>2]=f[i>>2]<<24|(b>>>8&65280|(b<<8&16711680|b<<24))>>>8;break e}if(g>>>0<ii[i+16>>2]){f[i+12>>2]=g+1,s=s+8|0,f[i+8>>2]=s,f[i>>2]=L[g|0]|f[i>>2]<<8;break e}if(!f[i+24>>2]){f[i+24>>2]=1,s=s+8|0,f[i+8>>2]=s,f[i>>2]=f[i>>2]<<8;break e}s=0,f[i+8>>2]=0}g=a+-1|0,Z=i,ne=s,x=f[i>>2],j=x>>>s|0,A=P>>>1&16777215;e:{if(j>>>0>A>>>0){f[i>>2]=x+((A^-1)<<s),x=P-A|0;break e}x=A+1|0}if(b=Ri(x)^24,s=ne-b|0,f[Z+8>>2]=s,P=(x<<b)+-1|0,f[i+4>>2]=P,B=(j>>>0>A>>>0)<<g|B,b=(a|0)>1,a=g,!b)break}return B}function Nc(i,a,s){var g=0;e:{if((i|0)==(a|0))break e;if((a-i|0)-s>>>0<=0-(s<<1)>>>0)return no(i,a,s);g=(i^a)&3;t:{r:{if(i>>>0<a>>>0){if(g){g=i;break t}if(!(i&3)){g=i;break r}for(g=i;;){if(!s)break e;if(m[g|0]=L[a|0],a=a+1|0,s=s+-1|0,g=g+1|0,!(g&3))break}break r}n:{if(g)break n;if(i+s&3)for(;;){if(!s)break e;if(s=s+-1|0,g=s+i|0,m[g|0]=L[a+s|0],!(g&3))break}if(s>>>0<=3)break n;for(;s=s+-4|0,f[s+i>>2]=f[a+s>>2],s>>>0>3;);}if(!s)break e;for(;s=s+-1|0,m[s+i|0]=L[a+s|0],!!s;);break e}if(s>>>0<=3)break t;for(;f[g>>2]=f[a>>2],a=a+4|0,g=g+4|0,s=s+-4|0,s>>>0>3;);}if(!s)break e;for(;m[g|0]=L[a|0],g=g+1|0,a=a+1|0,s=s+-1|0,!!s;);}return i}function fc(i){i=i|0;var a=0,s=0,g=0,b=0,x=0,A=0,P=0,j=0,B=0,Z=0,ne=0,me=0,Ce=0,Be=0,at=0,kt=0,It=0,Qt=0,lr=0;for(g=i+-17|0,b=i+-18|0,x=i+-19|0,A=i+-20|0,P=i+-21|0,j=i+-22|0,B=i+-23|0,Z=i+-24|0,ne=i+-25|0,me=i+-26|0,Ce=i+-27|0,Be=i+-28|0,at=i+-29|0,kt=i+-30|0,It=i+-31|0,Qt=i+-32|0,lr=f[2548]-L[i+-33|0]|0;a=L[i+-1|0]+lr|0,m[i|0]=L[a+L[Qt|0]|0],m[i+1|0]=L[L[It|0]+a|0],m[i+2|0]=L[L[kt|0]+a|0],m[i+3|0]=L[L[at|0]+a|0],m[i+4|0]=L[L[Be|0]+a|0],m[i+5|0]=L[L[Ce|0]+a|0],m[i+6|0]=L[L[me|0]+a|0],m[i+7|0]=L[L[ne|0]+a|0],m[i+8|0]=L[L[Z|0]+a|0],m[i+9|0]=L[L[B|0]+a|0],m[i+10|0]=L[L[j|0]+a|0],m[i+11|0]=L[L[P|0]+a|0],m[i+12|0]=L[L[A|0]+a|0],m[i+13|0]=L[L[x|0]+a|0],m[i+14|0]=L[L[b|0]+a|0],m[i+15|0]=L[L[g|0]+a|0],i=i+32|0,s=s+1|0,(s|0)!=16;);}function ua(i,a,s){i=i|0,a=a|0,s=s|0;var g=0,b=0,x=0,A=0;e:{if(!s||(g=i+s|0,m[g+-1|0]=a,m[i|0]=a,s>>>0<3)||(m[g+-2|0]=a,m[i+1|0]=a,m[g+-3|0]=a,m[i+2|0]=a,s>>>0<7)||(m[g+-4|0]=a,m[i+3|0]=a,s>>>0<9)||(g=0-i&3,b=g+i|0,a=J(a&255,16843009),f[b>>2]=a,s=s-g&-4,g=s+b|0,f[g+-4>>2]=a,s>>>0<9)||(f[b+8>>2]=a,f[b+4>>2]=a,f[g+-8>>2]=a,f[g+-12>>2]=a,s>>>0<25)||(f[b+24>>2]=a,f[b+20>>2]=a,f[b+16>>2]=a,f[b+12>>2]=a,f[g+-16>>2]=a,f[g+-20>>2]=a,f[g+-24>>2]=a,f[g+-28>>2]=a,A=b&4|24,s=s-A|0,s>>>0<32))break e;for(g=a,x=a,a=b+A|0;f[a+24>>2]=x,f[a+28>>2]=g,f[a+16>>2]=x,f[a+20>>2]=g,f[a+8>>2]=x,f[a+12>>2]=g,f[a>>2]=x,f[a+4>>2]=g,a=a+32|0,s=s+-32|0,s>>>0>31;);}return i|0}function os(i,a,s){var g=0,b=0,x=0,A=0;g=jn-144|0,jn=g;e:{if(!s){x=2;break e}t:{if(!i){b=2;break t}f[s>>2]=0,f[s+4>>2]=0,f[s+32>>2]=0,f[s+36>>2]=0,f[s+24>>2]=0,f[s+28>>2]=0,A=s+16|0,x=A,f[x>>2]=0,f[x+4>>2]=0,b=s+8|0,f[b>>2]=0,f[b+4>>2]=0,x=3;r:switch(b=wl(i,a,s,s+4|0,b,s+12|0,A,0),b|0){case 7:break e;case 0:break r;default:break t}if(f[g+140>>2]=0,f[g+132>>2]=0,f[g+136>>2]=0,f[g+124>>2]=0,f[g+128>>2]=0,f[g+116>>2]=0,f[g+120>>2]=0,f[g+100>>2]=0,f[g+104>>2]=0,f[g+108>>2]=0,f[g+112>>2]=0,f[g+92>>2]=0,f[g+96>>2]=0,f[g+108>>2]=s+124,b=s+40|0,f[g+88>>2]=b,jo(b,s)){gf(g),f[g>>2]=f[s+40>>2],f[g+4>>2]=f[s>>2],f[g+8>>2]=f[s+4>>2],f[g+88>>2]=g,x=ga(i,a,g+88|0),x||(x=Au(g,b)),Pl(g);break e}x=ga(i,a,g+88|0);break e}x=b}return jn=g+144|0,x}function ia(i,a,s){i=i|0,a=a|0,s=s|0;var g=0,b=0,x=0,A=0,P=0,j=0,B=0;g=jn-32|0,jn=g,b=f[i+28>>2],f[g+16>>2]=b,x=f[i+20>>2],f[g+28>>2]=s,f[g+24>>2]=a,a=x-b|0,f[g+20>>2]=a,b=a+s|0,B=2,a=g+16|0;e:{t:{r:{if(!Uf($u(f[i+60>>2],g+16|0,2,g+12|0)|0))for(;;){if(x=f[g+12>>2],(x|0)==(b|0))break r;if((x|0)<=-1)break t;if(A=f[a+4>>2],P=x>>>0>A>>>0,j=(P<<3)+a|0,A=x-(P?A:0)|0,f[j>>2]=A+f[j>>2],j=(P?12:4)+a|0,f[j>>2]=f[j>>2]-A,b=b-x|0,a=P?a+8|0:a,B=B-P|0,!!Uf($u(f[i+60>>2],a|0,B|0,g+12|0)|0))break}if(f[g+12>>2]=-1,(b|0)!=-1)break t}a=f[i+44>>2],f[i+28>>2]=a,f[i+20>>2]=a,f[i+16>>2]=a+f[i+48>>2],i=s;break e}if(f[i+28>>2]=0,f[i+16>>2]=0,f[i+20>>2]=0,f[i>>2]=f[i>>2]|32,i=0,(B|0)==2)break e;i=s-f[a+4>>2]|0}return jn=g+32|0,i|0}function Zs(i){i=i|0;var a=0,s=0,g=0,b=0,x=0,A=0,P=0,j=0,B=0,Z=0,ne=0,me=0,Ce=0,Be=0;x=J(f[i+8>>2],f[i+52>>2]),A=f[i+80>>2],P=f[i+68>>2],a=f[i+24>>2];e:{if(!a){if((x|0)<1)break e;for(;s=Ei(f[i+16>>2],0,f[(g<<2)+A>>2],0)+-2147483648|0,a=Fn,a=s>>>0<2147483648?a+1|0:a,m[g+P|0]=(a|0)>255?-1:a,g=g+1|0,(x|0)!=(g|0););break e}if(s=0-a|0,a=f[i+32>>2],a=a0(0,s,a,a>>31),(x|0)<1)break e;for(j=f[i+76>>2],B=a,Z=0-a|0;a=f[i+16>>2],s=g<<2,b=Ei(Z,Ce,f[s+A>>2],0),ne=Fn,me=a,a=b,b=Ei(B,Be,f[s+j>>2],0),s=a+b|0,a=Fn+ne|0,a=s>>>0<b>>>0?a+1|0:a,b=s+-2147483648|0,s=Ei(me,0,b>>>0<2147483648?a+1|0:a,0)+-2147483648|0,a=Fn,a=s>>>0<2147483648?a+1|0:a,m[g+P|0]=(a|0)>255?-1:a,g=g+1|0,(x|0)!=(g|0););}}function hc(i,a,s,g){i=i|0,a=a|0,s=s|0,g=g|0;var b=0,x=0,A=0,P=0,j=0,B=0,Z=0,ne=0,me=0,Ce=0,Be=0,at=0,kt=0,It=0,Qt=0,lr=0,zr=0;if((s|0)>=1)for(b=f[g+-4>>2];Z=B<<2,x=Z+a|0,A=f[x>>2],x=f[x+-4>>2],j=x&255,ne=(A&255)-j|0,me=(b&255)-j|0,j=me>>31,Ce=x>>>24|0,Be=(b>>>24|0)-Ce|0,at=Be>>31,kt=x>>>8&255,It=(b>>>8&255)-kt|0,P=It>>31,Qt=x>>>16&255,lr=(b>>>16&255)-Qt|0,x=lr>>31,zr=b,b=(A>>>24|0)-Ce|0,P=((((j^j+me)+((ne|0)<0?ne:0-ne|0)|0)+(at^at+Be)|0)+((b|0)<0?b:0-b|0)|0)+(P^P+It)|0,b=(A>>>8&255)-kt|0,P=(P+((b|0)<0?b:0-b|0)|0)+(x^x+lr)|0,b=(A>>>16&255)-Qt|0,b=(P+((b|0)<0?b:0-b|0)|0)<1?A:zr,A=f[i+Z>>2],b=(b&-16711936)+(A&-16711936)&-16711936|(b&16711935)+(A&16711935)&16711935,f[g+Z>>2]=b,B=B+1|0,(B|0)!=(s|0););}function Kl(i,a,s){i=i|0,a=a|0,s=s|0;var g=0,b=0,x=0,A=0,P=0,j=0,B=0,Z=0,ne=0,me=0,Ce=0;x=f[i+104>>2];e:{if(!x)break e;b=f[i+16>>2],g=f[i+8>>2],A=f[a>>2];t:{if(!f[i+56>>2]){a=g;break t}r:{if(!g){s=b+-1|0,a=0;break r}x=x-f[i>>2]|0,s=b,a=g+-1|0}if(g=g+b|0,b=f[i+84>>2],g=g+b|0,(g|0)!=f[i+88>>2]){b=s;break t}b=g-(a+b|0)|0}if((b|0)<1)break e;for(P=f[i+12>>2],ne=f[A>>2],s=f[A+20>>2],B=f[A+16>>2]+J(s,a)|0,j=B+1|0,a=15;;){if(g=0,(P|0)>=1){for(;s=(g<<1)+j|0,me=s,Ce=L[s|0]&240,s=L[g+x|0]>>>4|0,m[me|0]=Ce|s,a=a&s,g=g+1|0,(P|0)!=(g|0););s=f[A+20>>2]}if(j=s+j|0,x=f[i>>2]+x|0,Z=Z+1|0,(Z|0)==(b|0))break}if((a|0)==15|ne+-7>>>0>3)break e;et[f[2665]](B,P,b,s)}return 0}function Ql(i,a,s){e:{t:{if(a>>>0>20)break t;r:switch(a+-9|0){case 0:a=f[s>>2],f[s>>2]=a+4,f[i>>2]=f[a>>2];return;case 1:a=f[s>>2],f[s>>2]=a+4,a=f[a>>2],f[i>>2]=a,f[i+4>>2]=a>>31;return;case 2:a=f[s>>2],f[s>>2]=a+4,f[i>>2]=f[a>>2],f[i+4>>2]=0;return;case 4:a=f[s>>2],f[s>>2]=a+4,a=Pr[a>>1],f[i>>2]=a,f[i+4>>2]=a>>31;return;case 5:a=f[s>>2],f[s>>2]=a+4,f[i>>2]=kn[a>>1],f[i+4>>2]=0;return;case 6:a=f[s>>2],f[s>>2]=a+4,a=m[a|0],f[i>>2]=a,f[i+4>>2]=a>>31;return;case 7:a=f[s>>2],f[s>>2]=a+4,f[i>>2]=L[a|0],f[i+4>>2]=0;return;case 3:case 8:break e;case 9:break r;default:break t}et[0](i,s)}return}a=f[s>>2]+7&-8,f[s>>2]=a+8,s=f[a+4>>2],f[i>>2]=f[a>>2],f[i+4>>2]=s}function eu(i,a){i=i|0,a=a|0;var s=0,g=0,b=0,x=0,A=0,P=0,j=0,B=0;b=f[i+16>>2],x=f[a+24>>2],s=f[f[a>>2]>>2];e:{if(s+-7>>>0>3&&!(1<<s&4154&&s>>>0<=12)||(s=f[i+104>>2],!s))break e;va(f[i+20>>2],f[i+32>>2],s,f[i>>2],f[i+12>>2],b,0)}if((b|0)<1)return 0;for(A=b+1>>1,P=f[i+32>>2],g=f[i+20>>2],s=b;j=wa(x,s,g,P),g=J(j,P)+g|0,B=vc(x)+B|0,s=s-j|0,(s|0)>0;);if((b|0)>=1){for(b=f[a+28>>2],x=f[i+36>>2],g=f[i+24>>2],s=A;P=wa(b,s,g,x),vc(b),g=J(x,P)+g|0,s=s-P|0,(s|0)>0;);for(g=f[i+28>>2],a=f[a+32>>2],i=f[i+36>>2];s=wa(a,A,g,i),vc(a),g=J(i,s)+g|0,A=A-s|0,(A|0)>0;);}return B|0}function ho(i,a){var s=0,g=0,b=0,x=0,A=0,P=0,j=0,B=0;e:{if(!(f[i+24>>2]|(a|0)>24)){if(s=f[i+20>>2],b=s+a|0,f[i+20>>2]=b,P=f[(a<<2)+9312>>2],A=f[i+4>>2],g=A,a=s&63,s=a&31,x=f[i>>2],B=P&(32<=(a&63)>>>0?g>>>s|0:((1<<s)-1&g)<<32-s|x>>>s),(b|0)<8)break e;for(a=f[i+16>>2],j=f[i+12>>2],P=a>>>0>j>>>0?a:j;;){t:{if((a|0)==(P|0)){a=P,g=b;break t}if(g=A,x=(g&255)<<24|x>>>8,g=g>>>8|0,A=g,f[i>>2]=x,f[i+4>>2]=g,s=L[f[i+8>>2]+a|0],g=b+-8|0,f[i+20>>2]=g,a=a+1|0,f[i+16>>2]=a,s=A|s<<24,A=s,f[i>>2]=x,f[i+4>>2]=s,s=(b|0)>15,b=g,s)continue}break}if((a|0)!=(j|0)|(g|0)<65)break e;return f[i+20>>2]=0,f[i+24>>2]=1,B}f[i+20>>2]=0,f[i+24>>2]=1}return B}function Es(i){i=i|0;var a=0,s=0,g=0,b=0,x=0,A=0,P=0,j=0,B=0,Z=0,ne=0;b=J(f[i+8>>2],f[i+52>>2]),A=f[i+76>>2],P=f[i+68>>2],a=J(f[i+24>>2],f[i+16>>2]);e:{if(a){if((b|0)<1)break e;for(x=f[i+80>>2],Z=0-a|0,a=0;g=f[i+20>>2],s=a<<2,j=s+A|0,ne=f[j>>2],Ei(f[s+x>>2],0,Z,0),B=Fn,g=Ei(g,0,ne-B|0,0)+-2147483648|0,s=Fn,s=g>>>0<2147483648?s+1|0:s,m[a+P|0]=(s|0)>255?-1:s,f[j>>2]=B,a=a+1|0,(b|0)!=(a|0););break e}if((b|0)<1)break e;for(a=0;x=(a<<2)+A|0,g=Ei(f[i+20>>2],0,f[x>>2],0)+-2147483648|0,s=Fn,s=g>>>0<2147483648?s+1|0:s,m[a+P|0]=(s|0)>255?-1:s,f[x>>2]=0,a=a+1|0,(b|0)!=(a|0););}}function Go(i,a,s,g){i=i|0,a=a|0,s=s|0,g=g|0;var b=0,x=0,A=0,P=0,j=0,B=0;if((s|0)>=1)for(x=f[g+-4>>2];j=P<<2,A=j+a|0,b=f[A>>2],x=((b^x)>>>1&2139062143)+(b&x)|0,b=x&255,A=f[A+-4>>2],b=((b-(A&255)|0)/2|0)+b|0,B=b>>>0<256?b:(b^-1)>>>24|0,b=x>>>24|0,b=((b-(A>>>24|0)|0)/2|0)+b|0,B=B|(b>>>0<256?b:b>>>24^-1)<<24,b=x>>>16&255,b=((b-(A>>>16&255)|0)/2|0)+b|0,x=x>>>8&255,x=((x-(A>>>8&255)|0)/2|0)+x|0,x=B|(b>>>0<256?b:(b^-1)>>>24|0)<<16|(x>>>0<256?x:(x^-1)>>>24|0)<<8,A=f[i+j>>2],x=(x&-16711936)+(A&-16711936)&-16711936|(x&16711935)+(A&16711935)&16711935,f[g+j>>2]=x,P=P+1|0,(P|0)!=(s|0););}function Ss(i,a,s){i=i|0,a=a|0,s=s|0;var g=0,b=0,x=0,A=0,P=0,j=0,B=0,Z=0,ne=0,me=0;g=f[i+36>>2];e:{if(f[g+64>>2]>=f[g+56>>2])break e;x=f[i>>2],Z=f[x>>2]+-7|0,b=f[x+20>>2],B=f[x+16>>2]+J(b,a)|0,P=f[g+52>>2],a=15;t:{if((s|0)<1|f[g+24>>2]>0)break t;for(j=B+1|0;;){if(Gr(g),g=0,(P|0)>=1)for(;b=(g<<1)+j|0,ne=b,me=L[b|0]&240,b=L[f[f[i+36>>2]+68>>2]+g|0]>>>4|0,m[ne|0]=me|b,a=a&b,g=g+1|0,(P|0)!=(g|0););if(b=f[x+20>>2],g=f[i+36>>2],A=A+1|0,f[g+64>>2]>=f[g+56>>2]|(A|0)>=(s|0))break t;if(j=b+j|0,!(f[g+24>>2]<=0))break}}if((a|0)==15|Z>>>0>3)break e;et[f[2665]](B,P,A,b)}return A|0}function Au(i,a){var s=0,g=0;f[a+4>>2]=f[i+4>>2],f[a+8>>2]=f[i+8>>2],s=2;e:{if(la(a))break e;s=f[i+16>>2],g=f[i>>2];t:{if(g>>>0<=10){xt(s,f[i+20>>2],f[a+16>>2],f[a+20>>2],J(f[i+4>>2],L[g+1157|0]),f[i+8>>2]);break t}if(xt(s,f[i+32>>2],f[a+16>>2],f[a+32>>2],f[i+4>>2],f[i+8>>2]),xt(f[i+20>>2],f[i+36>>2],f[a+20>>2],f[a+36>>2],(f[i+4>>2]+1|0)/2|0,(f[i+8>>2]+1|0)/2|0),xt(f[i+24>>2],f[i+40>>2],f[a+24>>2],f[a+40>>2],(f[i+4>>2]+1|0)/2|0,(f[i+8>>2]+1|0)/2|0),g=f[i>>2],!(1<<g&4154&&g>>>0<=12)&&(s=0,g+-7>>>0>3))break e;xt(f[i+28>>2],f[i+44>>2],f[a+28>>2],f[a+44>>2],f[i+4>>2],f[i+8>>2])}s=0}return s}function Rc(i,a){var s=0,g=0,b=0,x=0;e:{if(f[i+2308>>2]<1||(s=f[i+2300>>2],(s|0)<f[i+300>>2]))break e;g=(s|0)<=f[i+308>>2]}s=i+160|0;e:{if(!f[i+148>>2]){f[i+168>>2]=g,f[i+164>>2]=f[i+2300>>2],Gu(i,s),x=aa(i,a);break e}if(b=i+124|0,!(et[f[2559]](b)&1))break e;no(i+180|0,a,108),f[i+168>>2]=g,f[i+160>>2]=f[i+152>>2],f[i+164>>2]=f[i+2300>>2];t:{if(f[i+148>>2]==2){a=f[i+2304>>2],s=i+176|0,f[i+2304>>2]=f[s>>2],f[s>>2]=a;break t}Gu(i,s)}return g&&(a=f[i+2260>>2],g=i+172|0,f[i+2260>>2]=f[g>>2],f[g>>2]=a),et[f[2560]](b),a=f[i+152>>2]+1|0,f[i+152>>2]=(a|0)==f[i+156>>2]?0:a,1}return x}function Eu(i,a,s,g){i=i|0,a=a|0,s=s|0,g=g|0;var b=0,x=0,A=0,P=0,j=0,B=0,Z=0;if((s|0)>=1)for(b=f[g+-4>>2];B=j<<2,A=B+a|0,P=f[A>>2],A=f[A+-4>>2],x=((P&255)+(b&255)|0)-(A&255)|0,Z=x>>>0<256?x:(x^-1)>>>24|0,x=(P>>>24)+(b>>>24)-(A>>>24)|0,Z=Z|(x>>>0<256?x:x>>>24^-1)<<24,x=((P>>>16&255)+(b>>>16&255)|0)-(A>>>16&255)|0,b=((P>>>8&255)+(b>>>8&255)|0)-(A>>>8&255)|0,b=Z|(x>>>0<256?x:(x^-1)>>>24|0)<<16|(b>>>0<256?b:(b^-1)>>>24|0)<<8,P=f[i+B>>2],b=(b&-16711936)+(P&-16711936)&-16711936|(b&16711935)+(P&16711935)&16711935,f[g+B>>2]=b,j=j+1|0,(j|0)!=(s|0););}function ol(i,a,s,g,b,x,A,P,j){var B=0,Z=0,ne=0,me=0;f[i+72>>2]=A,f[i+68>>2]=g,f[i+60>>2]=0,f[i+64>>2]=0,f[i+56>>2]=x,f[i+52>>2]=b,f[i+48>>2]=s,f[i+44>>2]=a,f[i+8>>2]=P,A=(s|0)<(x|0),f[i+4>>2]=A,B=(a|0)<(b|0),f[i>>2]=B,Z=B?a+-1|0:b,f[i+40>>2]=Z,g=B?b+-1|0:a,f[i+36>>2]=g,B||(ne=i,me=a0(0,1,Z,Z>>31),f[ne+12>>2]=me),a=x-A|0,f[i+32>>2]=a,s=s-A|0,f[i+28>>2]=s;e:{if(!A){f[i+24>>2]=s,s=J(s,g),s=a0(0,x,s,s>>31),g=Fn,f[i+20>>2]=(g|0)==1&s>>>0<0|g>>>0<1?s:0;break e}f[i+24>>2]=a,a=g}f[i+76>>2]=j,ne=i,me=a0(0,1,a,a>>31),f[ne+16>>2]=me,a=i,i=J(b,P),f[a+80>>2]=(i<<2)+j,ua(j,0,i<<3),_r()}function w0(i){i=i|0;var a=0,s=0,g=0,b=0,x=0,A=0,P=0;x=L[i+-31|0],a=x+1|0,s=L[i+-30|0],b=a+s>>>1|0,m[i+64|0]=b,P=L[i+-32|0],m[i|0]=P+a>>>1,a=L[i+-29|0],g=(a+s|0)+1>>>1|0,m[i+65|0]=g,m[i+1|0]=b,b=L[i+-28|0],A=(b+a|0)+1>>>1|0,m[i+66|0]=A,m[i+2|0]=g,m[i+3|0]=A,g=a+2|0,A=(g+x|0)+(s<<1)>>>2|0,m[i+96|0]=A,s=s+2|0,m[i+32|0]=(s+P|0)+(x<<1)>>>2,x=b+(s+(a<<1)|0)>>>2|0,m[i+97|0]=x,m[i+33|0]=A,P=L[i+-25|0],s=L[i+-26|0],a=L[i+-27|0],g=a+(g+(b<<1)|0)>>>2|0,m[i+98|0]=g,m[i+34|0]=x,m[i+99|0]=(P+(a+(s<<1)|0)|0)+2>>>2,m[i+67|0]=(s+(b+(a<<1)|0)|0)+2>>>2,m[i+35|0]=g}function al(i){i=i|0;var a=0,s=0,g=0,b=0,x=0,A=0,P=0,j=0,B=0;A=L[i+63|0],g=L[i+31|0],s=(A+g|0)+1>>>1|0,m[i+98|0]=s,P=L[i+95|0],m[i+96|0]=(P+A|0)+1>>>1,m[i+64|0]=s,b=L[i+-1|0],a=b+1|0,s=L[i+-33|0],x=a+s>>>1|0,m[i+34|0]=x,a=a+g>>>1|0,m[i+66|0]=a,m[i|0]=x,m[i+32|0]=a,a=L[i+-32|0],x=b+2|0,j=a+(x+(s<<1)|0)>>>2|0,m[i+35|0]=j,B=L[i+-31|0],m[i+3|0]=(L[i+-30|0]+(a+(B<<1)|0)|0)+2>>>2,m[i+2|0]=((s+(a<<1)|0)+B|0)+2>>>2,a=b<<1,b=g+2|0,s=s+(a+b|0)>>>2|0,m[i+67|0]=s,m[i+1|0]=j,g=(A+x|0)+(g<<1)>>>2|0,m[i+99|0]=g,m[i+33|0]=s,m[i+97|0]=(b+P|0)+(A<<1)>>>2,m[i+65|0]=g}function pc(i){i=i|0;var a=0,s=0,g=0,b=0,x=0,A=0,P=0,j=0;g=L[i+-32|0],b=g+1|0,a=L[i+-33|0],s=b+a>>>1|0,m[i+65|0]=s,x=L[i+-31|0],A=b+x>>>1|0,m[i+66|0]=A,m[i|0]=s,b=L[i+-30|0],s=(b+x|0)+1>>>1|0,m[i+67|0]=s,m[i+1|0]=A,A=L[i+-29|0],m[i+3|0]=(A+b|0)+1>>>1,m[i+2|0]=s,s=L[i+-1|0],P=s+2|0,j=L[i+31|0],m[i+96|0]=(P+L[i+63|0]|0)+(j<<1)>>>2,P=g+(P+(a<<1)|0)>>>2|0,m[i+97|0]=P,a=a+2|0,m[i+64|0]=(a+j|0)+(s<<1)>>>2,a=(a+(g<<1)|0)+x>>>2|0,m[i+98|0]=a,m[i+32|0]=P,g=(b+(g+(x<<1)|0)|0)+2>>>2|0,m[i+99|0]=g,m[i+33|0]=a,m[i+35|0]=(A+((b<<1)+x|0)|0)+2>>>2,m[i+34|0]=g}function oi(i,a,s){i=i|0,a=a|0,s=s|0;var g=0,b=0,x=0,A=0,P=0,j=0,B=0,Z=0,ne=0;g=f[i+36>>2];e:{if(f[g+64>>2]>=f[g+56>>2])break e;x=f[i>>2],b=f[x>>2],P=(b|0)==4|(b|0)==9,ne=b+-7|0,A=f[x+20>>2],j=f[x+16>>2]+J(A,a)|0,B=f[g+52>>2],b=0,a=0;t:{if((s|0)<1||(a=0,f[g+24>>2]>0))break t;for(a=(P?0:3)+j|0;;){r:{if(Gr(g),Z=et[f[2666]](f[f[i+36>>2]+68>>2],0,B,1,a,0)|Z,A=f[x+20>>2],g=f[i+36>>2],b=b+1|0,f[g+64>>2]>=f[g+56>>2]|(b|0)>=(s|0))break r;if(a=a+A|0,f[g+24>>2]<=0)continue}break}a=(Z|0)!=0}if(!a|ne>>>0>3)break e;et[f[2664]](j,P,B,b,A)}return b|0}function vi(i,a,s){var g=0,b=0,x=0;g=jn-208|0,jn=g,f[g+204>>2]=s,s=0,ua(g+160|0,0,40),f[g+200>>2]=f[g+204>>2];e:{if((pt(0,a,g+200|0,g+80|0,g+160|0)|0)<0)break e;s=f[i+76>>2]>=0?1:s,b=f[i>>2],m[i+74|0]<=0&&(f[i>>2]=b&-33),x=b&32;t:{if(f[i+48>>2]){pt(i,a,g+200|0,g+80|0,g+160|0);break t}if(f[i+48>>2]=80,f[i+16>>2]=g+80,f[i+28>>2]=g,f[i+20>>2]=g,b=f[i+44>>2],f[i+44>>2]=g,pt(i,a,g+200|0,g+80|0,g+160|0),!b)break t;et[f[i+36>>2]](i,0,0)|0,f[i+48>>2]=0,f[i+44>>2]=b,f[i+28>>2]=0,f[i+16>>2]=0,f[i+20>>2]=0}if(f[i>>2]=x|f[i>>2],!s)break e}jn=g+208|0}function Oa(i,a,s){i=i|0,a=a|0,s=s|0;var g=0,b=0,x=0,A=0,P=0,j=0,B=0,Z=0,ne=0;b=f[a>>2],x=f[b+28>>2],j=f[a+16>>2],A=f[b+44>>2],P=x+J(j,A)|0,g=f[i+104>>2];e:{if(g){if(s=f[i+16>>2],(s|0)<1)break e;for(Z=f[b+32>>2],x=f[a+36>>2],A=f[i>>2],ne=f[b+16>>2],i=0;B=wa(x,s,g,A),g=J(A,B)+g|0,i=vc(x)+i|0,s=s-B|0,(s|0)>0;);if((i|0)<1)break e;return va(J(j,Z)+ne|0,f[b+32>>2],P,f[b+44>>2],f[f[a+36>>2]+52>>2],i,1),0}if(!x|(s|0)<1)break e;for(i=f[i+96>>2],g=0;P=ua(P,255,i)+A|0,g=g+1|0,(g|0)!=(s|0););}return 0}function Yu(i){i=i|0;var a=0,s=0,g=0,b=0,x=0;s=L[i+31|0],g=s+2|0,a=L[i+63|0],m[i+96|0]=L[i+95|0]+(g+(a<<1)|0)>>>2,x=s<<1,s=L[i+-1|0],b=s+2|0,a=a+(x+b|0)>>>2|0,m[i+97|0]=a,m[i+64|0]=a,a=g+(s<<1)|0,s=L[i+-33|0],a=a+s>>>2|0,m[i+98|0]=a,m[i+65|0]=a,m[i+32|0]=a,g=L[i+-32|0],a=(g+b|0)+(s<<1)>>>2|0,m[i+99|0]=a,m[i+66|0]=a,m[i+33|0]=a,m[i|0]=a,x=L[i+-29|0],a=L[i+-30|0],b=s,s=L[i+-31|0],b=((b+s|0)+(g<<1)|0)+2>>>2|0,m[i+67|0]=b,m[i+34|0]=b,m[i+1|0]=b,g=((a+g|0)+(s<<1)|0)+2>>>2|0,m[i+35|0]=g,m[i+2|0]=g,m[i+3|0]=((s+x|0)+(a<<1)|0)+2>>>2}function wa(i,a,s,g){var b=0,x=0,A=0,P=0,j=0,B=0,Z=0,ne=0;e:{if((a|0)<1)break e;for(;;){if(f[i+24>>2]<1&&f[i+64>>2]<f[i+56>>2])break e;if(f[i+4>>2]&&(Z=i,ne=Od(f[i+76>>2],f[i+80>>2]),f[Z+76>>2]=ne,f[i+80>>2]=Fn),_c(i,s),!(f[i+4>>2]|(J(f[i+52>>2],f[i+8>>2])|0)<1))for(j=f[i+76>>2],B=f[i+80>>2],b=0;A=b<<2,P=A+j|0,f[P>>2]=f[P>>2]+f[B+A>>2],b=b+1|0,(b|0)<(J(f[i+52>>2],f[i+8>>2])|0););if(f[i+60>>2]=f[i+60>>2]+1,f[i+24>>2]=f[i+24>>2]-f[i+32>>2],s=s+g|0,x=x+1|0,(x|0)==(a|0))break}x=a}return x}function Bo(i){var a=0,s=0,g=0;if(i){if(a=i+160|0,Vi(f[a>>2]),Vi(f[i+172>>2]),s=i+168|0,Vf(f[s>>2]),s0(i+124|0),g=i+136|0,s0(g),f[s>>2]=0,f[s+4>>2]=0,f[a>>2]=0,f[a+4>>2]=0,f[i+152>>2]=0,f[i+156>>2]=0,f[i+144>>2]=0,f[i+148>>2]=0,f[g>>2]=0,f[g+4>>2]=0,f[i+128>>2]=0,f[i+132>>2]=0,f[i+120>>2]=0,f[i+124>>2]=0,Vi(f[i+16>>2]),a=0,f[i+16>>2]=0,f[i+176>>2]>=1)for(;s=(J(a,20)+i|0)+196|0,Vi(f[s>>2]),f[s>>2]=0,a=a+1|0,(a|0)<f[i+176>>2];);f[i+260>>2]=0,f[i+176>>2]=0,Vi(f[i+264>>2]),f[i+12>>2]=0,f[i+264>>2]=0}}function Il(){f[2545]!=f[2673]&&(f[2703]=32,f[2674]=33,f[2706]=34,f[2704]=35,f[2705]=36,f[2707]=37,f[2708]=38,f[2712]=39,f[2709]=40,f[2710]=41,f[2714]=42,f[2716]=43,f[2717]=44,f[2718]=45,f[2719]=46,f[2713]=47,f[2711]=48,f[2715]=49,f[2690]=50,f[2688]=51,f[2686]=52,f[2685]=53,f[2684]=54,f[2693]=55,f[2692]=56,f[2691]=57,f[2689]=58,f[2687]=59,f[2682]=60,f[2681]=61,f[2680]=62,f[2679]=63,f[2678]=64,f[2677]=65,f[2676]=66,f[2702]=67,f[2701]=68,f[2700]=69,f[2699]=70,f[2698]=71,f[2697]=72,f[2696]=73,f[2720]=74,f[2545]=f[2673])}function Xs(i){i=i|0;var a=0,s=0,g=0,b=0,x=0;a=L[i+-29|0],b=a+2|0,g=L[i+-31|0],s=L[i+-30|0],x=(b+g|0)+(s<<1)>>>2|0,m[i+32|0]=x,s=s+2|0,m[i|0]=(s+L[i+-32|0]|0)+(g<<1)>>>2,g=L[i+-28|0],s=g+(s+(a<<1)|0)>>>2|0,m[i+64|0]=s,m[i+1|0]=x,m[i+33|0]=s,a=b+(g<<1)|0,b=L[i+-27|0],a=a+b>>>2|0,m[i+96|0]=a,m[i+2|0]=s,m[i+65|0]=a,m[i+34|0]=a,m[i+3|0]=a,a=L[i+-26|0],g=(a+(g+(b<<1)|0)|0)+2>>>2|0,m[i+97|0]=g,s=L[i+-25|0],b=(s+(b+(a<<1)|0)|0)+2>>>2|0,m[i+98|0]=b,m[i+35|0]=g,m[i+66|0]=g,m[i+99|0]=((s+a|0)+(s<<1)|0)+2>>>2,m[i+67|0]=b}function r0(i){i=i|0;var a=0,s=0,g=0,b=0,x=0;s=L[i+63|0],a=s+2|0,x=L[i+95|0],g=J((a+x|0)+(x<<1)>>>2|0,16843009),m[i+96|0]=g,m[i+97|0]=g>>>8,m[i+98|0]=g>>>16,m[i+99|0]=g>>>24,b=L[i+31|0],g=b+2|0,s=J(x+(g+(s<<1)|0)>>>2|0,16843009),m[i+64|0]=s,m[i+65|0]=s>>>8,m[i+66|0]=s>>>16,m[i+67|0]=s>>>24,x=a,a=L[i+-1|0],b=J((x+a|0)+(b<<1)>>>2|0,16843009),m[i+32|0]=b,m[i+33|0]=b>>>8,m[i+34|0]=b>>>16,m[i+35|0]=b>>>24,a=J((L[i+-33|0]+g|0)+(a<<1)>>>2|0,16843009),m[i|0]=a,m[i+1|0]=a>>>8,m[i+2|0]=a>>>16,m[i+3|0]=a>>>24}function Tl(i,a,s,g,b){i=i|0,a=a|0,s=s|0,g=g|0,b=b|0;var x=0,A=0,P=0,j=0,B=0,Z=0,ne=0;if(m[b|0]=L[i|0],(a|0)>=2)for(P=a+-1|0,j=b+1|0,A=i+1|0;m[x+j|0]=L[x+A|0]-L[i+x|0],x=x+1|0,(P|0)!=(x|0););if((s|0)>=2)for(Z=g^-1,ne=(a|0)<2,j=1;;){if(b=g+b|0,P=i+g|0,m[b|0]=L[P|0]-L[i|0],x=1,!ne)for(;B=x+P|0,A=(L[i+x|0]+L[B+-1|0]|0)-L[P+(x+Z|0)|0]|0,A=(A|0)>0?A:0,m[b+x|0]=L[B|0]-((A|0)<255?A:255),x=x+1|0,(x|0)!=(a|0););if(i=P,j=j+1|0,(j|0)==(s|0))break}}function ca(i,a,s,g,b){i=i|0,a=a|0,s=s|0,g=g|0,b=b|0;var x=0,A=0,P=0,j=0,B=0,Z=0,ne=0;if((b|0)>=1)for(;j=L[s+P|0],ne=L[a+P|0],B=L[i+P|0],x=(P<<2)+g|0,m[x|0]=255,B=J(B,19077)>>>8|0,Z=B+(J(ne,33050)>>>8|0)|0,A=Z+-17685|0,m[x+3|0]=A>>>0<16384?A>>>6|0:Z>>>0<17685?0:255,Z=B+(J(j,26149)>>>8|0)|0,A=Z+-14234|0,m[x+1|0]=A>>>0<16384?A>>>6|0:Z>>>0<14234?0:255,A=x,x=B-(J(ne,6419)>>>8|0)-(J(j,13320)>>>8)|0,j=x+8708|0,m[A+2|0]=j>>>0<16384?j>>>6|0:(x|0)<-8708?0:255,P=P+1|0,(P|0)!=(b|0););}function xa(i,a,s,g,b){i=i|0,a=a|0,s=s|0,g=g|0,b=b|0;var x=0,A=0,P=0,j=0,B=0,Z=0,ne=0;if((b|0)>=1)for(;j=L[a+P|0],ne=L[s+P|0],B=L[i+P|0],x=(P<<2)+g|0,m[x+3|0]=255,B=J(B,19077)>>>8|0,Z=B+(J(ne,26149)>>>8|0)|0,A=Z+-14234|0,m[x+2|0]=A>>>0<16384?A>>>6|0:Z>>>0<14234?0:255,Z=B+(J(j,33050)>>>8|0)|0,A=Z+-17685|0,m[x|0]=A>>>0<16384?A>>>6|0:Z>>>0<17685?0:255,A=x,x=B-(J(j,6419)>>>8|0)-(J(ne,13320)>>>8)|0,j=x+8708|0,m[A+1|0]=j>>>0<16384?j>>>6|0:(x|0)<-8708?0:255,P=P+1|0,(P|0)!=(b|0););}function Oc(i,a,s,g,b){i=i|0,a=a|0,s=s|0,g=g|0,b=b|0;var x=0,A=0,P=0,j=0,B=0,Z=0,ne=0;if((b|0)>=1)for(;j=L[s+P|0],ne=L[a+P|0],B=L[i+P|0],x=(P<<2)+g|0,m[x+3|0]=255,B=J(B,19077)>>>8|0,Z=B+(J(ne,33050)>>>8|0)|0,A=Z+-17685|0,m[x+2|0]=A>>>0<16384?A>>>6|0:Z>>>0<17685?0:255,Z=B+(J(j,26149)>>>8|0)|0,A=Z+-14234|0,m[x|0]=A>>>0<16384?A>>>6|0:Z>>>0<14234?0:255,A=x,x=B-(J(ne,6419)>>>8|0)-(J(j,13320)>>>8)|0,j=x+8708|0,m[A+1|0]=j>>>0<16384?j>>>6|0:(x|0)<-8708?0:255,P=P+1|0,(P|0)!=(b|0););}function as(i,a,s,g,b){i=i|0,a=a|0,s=s|0,g=g|0,b=b|0;var x=0,A=0,P=0,j=0,B=0,Z=0,ne=0;if((b|0)>=1)for(;B=(P<<1)+g|0,j=J(L[i+P|0],19077)>>>8|0,x=L[s+P|0],Z=j+(J(x,26149)>>>8|0)|0,A=Z+-14234|0,ne=(A>>>0<16384?A>>>6|0:Z>>>0<14234?0:248)&248,Z=L[a+P|0],x=j-(J(Z,6419)>>>8|0)-(J(x,13320)>>>8)|0,A=x+8708|0,x=A>>>0<16384?A>>6:(x|0)<-8708?0:255,m[B|0]=ne|x>>>5,A=B,j=j+(J(Z,33050)>>>8|0)|0,B=j+-17685|0,m[A+1|0]=x<<3&224|(B>>>0<16384?B>>>9|0:j>>>0<17685?0:31),P=P+1|0,(P|0)!=(b|0););}function M(i,a){var s=0,g=0,b=0,x=0,A=0;g=f[i+8>>2],A=f[g+40>>2],s=f[(ii[A+12>>2]<2?g+84|0:i+108|0)>>2],b=f[i+108>>2],s=(b|0)<(s|0)?s:b;e:{if((s|0)>=(a|0)||(b=f[g>>2],g=f[A+136>>2]+J(b,s)|0,qr(i+180|0,s,a,f[i+16>>2]+J(s,f[i+100>>2])|0,g),x=f[A+12>>2],!x))break e;et[f[(x<<2)+10912>>2]](f[A+140>>2],g,g,b),x=s+1|0;t:{if((x|0)==(a|0)){s=g;break t}for(;s=g+b|0,et[f[(f[A+12>>2]<<2)+10912>>2]](g,s,s,b),g=s,x=x+1|0,(x|0)!=(a|0););}f[A+140>>2]=s}f[i+108>>2]=a,f[i+116>>2]=a}function d(i,a){i=i|0,a=a|0;var s=0,g=0,b=0,x=0,A=0,P=0,j=0,B=0,Z=0,ne=0,me=0;if(x=f[i+8>>2],(x|0)>=1)for(Z=J(f[i+52>>2],x);;){if((A|0)<(Z|0))for(me=f[i+80>>2],g=0,b=0,P=A,j=A;;){if(ne=f[i+40>>2],B=0,g=f[i+36>>2]+g|0,(g|0)>=1){for(;B=L[a+j|0],b=B+b|0,s=j+x|0,j=s,g=g-ne|0,(g|0)>0;);j=s}if(s=J(g,B),f[(P<<2)+me>>2]=s+J(b,ne),b=Ei(f[i+12>>2],0,0-s|0,0)+-2147483648|0,s=Fn,b=b>>>0<2147483648?s+1|0:s,P=x+P|0,!((P|0)<(Z|0)))break}if(A=A+1|0,(x|0)==(A|0))break}}function k(i){i=i|0;var a=0,s=0,g=0,b=0,x=0,A=0;s=L[i+-32|0],g=f[2548]-L[i+-33|0]|0,a=g+L[i+-1|0]|0,m[i|0]=L[s+a|0],b=L[i+-31|0],m[i+1|0]=L[a+b|0],x=L[i+-30|0],m[i+2|0]=L[a+x|0],A=L[i+-29|0],m[i+3|0]=L[a+A|0],a=g+L[i+31|0]|0,m[i+32|0]=L[a+s|0],m[i+33|0]=L[a+b|0],m[i+34|0]=L[a+x|0],m[i+35|0]=L[a+A|0],a=g+L[i+63|0]|0,m[i+64|0]=L[a+s|0],m[i+65|0]=L[a+b|0],m[i+66|0]=L[a+x|0],m[i+67|0]=L[a+A|0],a=s,s=g+L[i+95|0]|0,m[i+96|0]=L[a+s|0],m[i+97|0]=L[s+b|0],m[i+98|0]=L[s+x|0],m[i+99|0]=L[s+A|0]}function C(i,a,s,g,b){i=i|0,a=a|0,s=s|0,g=g|0,b=b|0;var x=0,A=0,P=0,j=0,B=0,Z=0,ne=0;if((b|0)>=1)for(;P=L[s+x|0],j=(x<<1)+g|0,A=J(L[i+x|0],19077)>>>8|0,ne=L[a+x|0],B=A+(J(ne,33050)>>>8|0)|0,Z=B+-17685|0,m[j+1|0]=(Z>>>0<16384?Z>>>6|0:B>>>0<17685?0:240)|15,Z=j,j=A+(J(P,26149)>>>8|0)|0,B=j+-14234|0,P=A-(J(ne,6419)>>>8|0)-(J(P,13320)>>>8)|0,A=P+8708|0,m[Z|0]=(B>>>0<16384?B>>>6|0:j>>>0<14234?0:240)&240|(A>>>0<16384?A>>>10|0:(P|0)<-8708?0:15),x=x+1|0,(x|0)!=(b|0););}function D(i,a,s){i=i|0,a=a|0,s=s|0;var g=0,b=0,x=0,A=0,P=0,j=0,B=0;b=f[i+104>>2];e:{if(!b)break e;x=f[a>>2],A=f[x>>2],j=(A|0)==4|(A|0)==9,a=f[i+16>>2],g=f[i+8>>2],B=f[i+12>>2];t:{if(!f[i+56>>2]){P=g;break t}if(g?(P=g+-1|0,b=b-f[i>>2]|0,s=a):s=a+-1|0,a=a+g|0,g=f[i+84>>2],a=a+g|0,(a|0)!=f[i+88>>2]){a=s;break t}a=a-(g+P|0)|0}if(g=f[i>>2],i=f[x+20>>2],s=f[x+16>>2]+J(i,P)|0,!(et[f[2666]](b,g,B,a,s+(j?0:3)|0,i)|0)|A+-7>>>0>3)break e;et[f[2664]](s,j,B,a,f[x+20>>2])}return 0}function q(i,a,s,g,b){i=i|0,a=a|0,s=s|0,g=g|0,b=b|0;var x=0,A=0,P=0,j=0,B=0,Z=0,ne=0;if((b|0)>=1)for(;j=L[a+A|0],P=J(A,3)+g|0,Z=J(L[i+A|0],19077)>>>8|0,ne=L[s+A|0],x=Z+(J(ne,26149)>>>8|0)|0,B=x+-14234|0,m[P+2|0]=B>>>0<16384?B>>>6|0:x>>>0<14234?0:255,x=Z+(J(j,33050)>>>8|0)|0,B=x+-17685|0,m[P|0]=B>>>0<16384?B>>>6|0:x>>>0<17685?0:255,x=P,j=Z-(J(j,6419)>>>8|0)-(J(ne,13320)>>>8)|0,P=j+8708|0,m[x+1|0]=P>>>0<16384?P>>>6|0:(j|0)<-8708?0:255,A=A+1|0,(A|0)!=(b|0););}function Y(i,a,s,g,b){i=i|0,a=a|0,s=s|0,g=g|0,b=b|0;var x=0,A=0,P=0,j=0,B=0,Z=0,ne=0;if((b|0)>=1)for(;j=L[s+A|0],P=J(A,3)+g|0,Z=J(L[i+A|0],19077)>>>8|0,ne=L[a+A|0],x=Z+(J(ne,33050)>>>8|0)|0,B=x+-17685|0,m[P+2|0]=B>>>0<16384?B>>>6|0:x>>>0<17685?0:255,x=Z+(J(j,26149)>>>8|0)|0,B=x+-14234|0,m[P|0]=B>>>0<16384?B>>>6|0:x>>>0<14234?0:255,x=P,j=Z-(J(ne,6419)>>>8|0)-(J(j,13320)>>>8)|0,P=j+8708|0,m[x+1|0]=P>>>0<16384?P>>>6|0:(j|0)<-8708?0:255,A=A+1|0,(A|0)!=(b|0););}function oe(i,a){i=i|0,a=a|0;var s=0,g=0,b=0,x=0,A=0,P=0,j=0,B=0,Z=0,ne=0,me=0,Ce=0,Be=0;return g=f[a>>2],a=f[a+-4>>2],s=a&255,b=(g&255)-s|0,x=(i&255)-s|0,s=x>>31,A=a>>>24|0,P=(i>>>24|0)-A|0,j=P>>31,B=a>>>8&255,Z=(i>>>8&255)-B|0,ne=Z>>31,me=a>>>16&255,Ce=(i>>>16&255)-me|0,a=Ce>>31,Be=i,i=(g>>>24|0)-A|0,s=((((s^s+x)+((b|0)<0?b:0-b|0)|0)+(j^j+P)|0)+((i|0)<0?i:0-i|0)|0)+(ne^ne+Z)|0,i=(g>>>8&255)-B|0,a=(s+((i|0)<0?i:0-i|0)|0)+(a^a+Ce)|0,i=(g>>>16&255)-me|0,((a+((i|0)<0?i:0-i|0)|0)<1?g:Be)|0}function le(i,a){i=i|0,a=a|0;var s=0,g=0,b=0,x=0,A=0,P=0,j=0,B=0,Z=0,ne=0;if(b=f[i+8>>2],(b|0)>=1)for(Z=J(f[i+52>>2],b),ne=f[i+80>>2];;){if(s=b+A|0,g=f[i+36>>2],P=L[a+A|0],x=P,x=f[i+44>>2]>=2?L[a+s|0]:x,f[(A<<2)+ne>>2]=J(g,P),j=s,(s|0)<(Z|0))for(;;){g=g-f[i+40>>2]|0;e:{if((g|0)>=0){B=f[i+36>>2];break e}B=f[i+36>>2],g=B+g|0,P=x,j=b+j|0,x=L[j+a|0]}if(f[(s<<2)+ne>>2]=J(x,B)+J(P-x|0,g),s=s+b|0,!((s|0)<(Z|0)))break}if(A=A+1|0,(A|0)==(b|0))break}}function de(i){var a=0,s=0,g=0,b=0,x=0,A=0,P=0;g=f[i+20>>2];e:{if((g|0)<8){a=g;break e}for(s=f[i+16>>2],a=f[i+12>>2],P=s>>>0>a>>>0?s:a;;){if((s|0)==(P|0)){a=g;break e}if(x=f[i+4>>2],b=x>>>8|0,A=(x&255)<<24|f[i>>2]>>>8,x=b,f[i>>2]=A,f[i+4>>2]=b,b=L[f[i+8>>2]+s|0],a=g+-8|0,f[i+20>>2]=a,s=s+1|0,f[i+16>>2]=s,f[i>>2]=A,f[i+4>>2]=x|b<<24,b=(g|0)>15,g=a,!b)break}}f[i+16>>2]!=f[i+12>>2]|(a|0)<65&&!f[i+24>>2]||(f[i+20>>2]=0,f[i+24>>2]=1)}function Se(i,a){e:{if(i){if(a>>>0<=127)break e;t:{if(!f[f[2607]>>2]){if((a&-128)==57216)break e;break t}if(a>>>0<=2047)return m[i+1|0]=a&63|128,m[i|0]=a>>>6|192,2;if(!((a&-8192)!=57344&&a>>>0>=55296))return m[i+2|0]=a&63|128,m[i|0]=a>>>12|224,m[i+1|0]=a>>>6&63|128,3;if(a+-65536>>>0<=1048575)return m[i+3|0]=a&63|128,m[i|0]=a>>>18|240,m[i+2|0]=a>>>6&63|128,m[i+1|0]=a>>>12&63|128,4}f[2865]=25,i=-1}else i=1;return i}return m[i|0]=a,1}function je(i){var a=0,s=0,g=0,b=0,x=0,A=0;return i?(b=f[i+8>>2]+-1|0,ii[i>>2]<=10?(a=i+20|0,s=f[a>>2],f[a>>2]=0-s,f[i+16>>2]=f[i+16>>2]+J(s,b),0):(a=i+32|0,s=f[a>>2],f[a>>2]=0-s,g=i+36|0,a=f[g>>2],f[g>>2]=0-a,x=i+40|0,g=f[x>>2],f[x>>2]=0-g,f[i+16>>2]=f[i+16>>2]+J(s,b),s=i+20|0,x=s,A=f[s>>2],s=b>>1,f[x>>2]=A+J(s,a),a=i+24|0,f[a>>2]=f[a>>2]+J(s,g),a=f[i+28>>2],a&&(g=i+44|0,s=f[g>>2],f[g>>2]=0-s,f[i+28>>2]=a+J(s,b)),0)):2}function Je(i){i=i|0;var a=0,s=0,g=0,b=0,x=0,A=0,P=0,j=0,B=0,Z=0,ne=0;for(g=i+-25|0,b=i+-26|0,x=i+-27|0,A=i+-28|0,P=i+-29|0,j=i+-30|0,B=i+-31|0,Z=i+-32|0,ne=f[2548]-L[i+-33|0]|0;a=L[i+-1|0]+ne|0,m[i|0]=L[a+L[Z|0]|0],m[i+1|0]=L[L[B|0]+a|0],m[i+2|0]=L[L[j|0]+a|0],m[i+3|0]=L[L[P|0]+a|0],m[i+4|0]=L[L[A|0]+a|0],m[i+5|0]=L[L[x|0]+a|0],m[i+6|0]=L[L[b|0]+a|0],m[i+7|0]=L[L[g|0]+a|0],i=i+32|0,s=s+1|0,(s|0)!=8;);}function Et(i){i=i|0;var a=0,s=0,g=0,b=0,x=0,A=0;s=L[i+95|0],m[i+67|0]=s,m[i+66|0]=s,a=J(s,16843009),m[i+96|0]=a,m[i+97|0]=a>>>8,m[i+98|0]=a>>>16,m[i+99|0]=a>>>24,b=L[i+31|0],g=b+1|0,a=L[i+63|0],x=g+a>>>1|0,m[i+32|0]=x,A=L[i+-1|0],m[i|0]=g+A>>>1,g=(a+s|0)+1>>>1|0,m[i+64|0]=g,m[i+2|0]=x,m[i+34|0]=g,g=((s+b|0)+(a<<1)|0)+2>>>2|0,m[i+33|0]=g,a=a+2|0,m[i+1|0]=(a+A|0)+(b<<1)>>>2,s=(a+s|0)+(s<<1)>>>2|0,m[i+65|0]=s,m[i+3|0]=g,m[i+35|0]=s}function mt(i,a,s,g,b){i=i|0,a=a|0,s=s|0,g=g|0,b=b|0;var x=0,A=0,P=0,j=0,B=0;if(m[b|0]=L[i|0],B=a+-1|0,A=1,(a|0)>=2)for(P=b+1|0,j=i+1|0;m[x+P|0]=L[x+j|0]-L[i+x|0],x=x+1|0,(B|0)!=(x|0););if((s|0)>=2)for(P=(a|0)<2;;){if(b=g+b|0,a=i+g|0,m[b|0]=L[a|0]-L[i|0],!P)for(i=b+1|0,j=a+1|0,x=0;m[i+x|0]=L[x+j|0]-L[a+x|0],x=x+1|0,(B|0)!=(x|0););if(i=a,A=A+1|0,(A|0)==(s|0))break}}function wt(i){i=i|0;var a=0,s=0,g=0,b=0,x=0,A=0;s=L[i+-30|0],a=s+2|0,g=L[i+-29|0],b=L[i+-28|0]+(a+(g<<1)|0)>>>2|0,m[i+99|0]=b,x=L[i+-31|0],A=x+2|0,g=g+(A+(s<<1)|0)>>>2|0,m[i+98|0]=g,s=a,a=L[i+-32|0],s=(s+a|0)+(x<<1)>>>2|0,m[i+97|0]=s,a=(L[i+-33|0]+A|0)+(a<<1)>>>2|0,m[i+96|0]=a,m[i+67|0]=b,m[i+66|0]=g,m[i+65|0]=s,m[i+64|0]=a,m[i+35|0]=b,m[i+34|0]=g,m[i+33|0]=s,m[i+32|0]=a,m[i+3|0]=b,m[i+2|0]=g,m[i+1|0]=s,m[i|0]=a}function tr(i,a){i=i|0,a=a|0;var s=0,g=0,b=0,x=0,A=0,P=0,j=0,B=0,Z=0,ne=0;return a=f[a>>2],B=f[a+24>>2],x=a+40|0,Z=f[x>>2],g=f[a+20>>2],A=a+36|0,b=f[A>>2],s=f[a+16>>2],P=f[i+8>>2],a=f[a+32>>2],ne=s+J(P,a)|0,s=a,a=f[i+12>>2],j=f[i+16>>2],xt(f[i+20>>2],f[i+32>>2],ne,s,a,j),s=b,b=P>>1,s=g+J(s,b)|0,a=(a+1|0)/2|0,g=(j+1|0)/2|0,xt(f[i+24>>2],f[i+36>>2],s,f[A>>2],a,g),xt(f[i+28>>2],f[i+36>>2],J(b,Z)+B|0,f[x>>2],a,g),f[i+16>>2]}function cr(i,a,s,g,b){i=i|0,a=a|0,s=s|0,g=g|0,b=b|0;var x=0,A=0,P=0,j=0,B=0,Z=0,ne=0,me=0;if((g|0)>=1)for(B=a?0:3,Z=(a|0)!=0,ne=(s|0)<1;;){if(!ne)for(me=i+B|0,j=i+Z|0,a=0;x=a<<2,A=L[x+me|0],(A|0)!=255&&(P=x+j|0,A=J(A,32897),m[P|0]=J(A,L[P|0])>>>23,P=(x|1)+j|0,m[P|0]=J(A,L[P|0])>>>23,x=(x|2)+j|0,m[x|0]=J(A,L[x|0])>>>23),a=a+1|0,(s|0)!=(a|0););if(i=i+b|0,a=(g|0)>1,g=g+-1|0,!a)break}}function Ar(i,a){var s=0;s=(a|0)!=0;e:{t:{r:{if(!a|!(i&3))break r;for(;;){if(!L[i|0])break t;if(i=i+1|0,a=a+-1|0,s=(a|0)!=0,!a)break r;if(!(i&3))break}}if(!s)break e}t:{if(!L[i|0]|a>>>0<4)break t;for(;;){if(s=f[i>>2],(s^-1)&s+-16843009&-2139062144)break t;if(i=i+4|0,a=a+-4|0,!(a>>>0>3))break}}if(!a)break e;for(;;){if(!L[i|0])return i;if(i=i+1|0,a=a+-1|0,!a)break}}return 0}function Dt(i){i=i|0;var a=0;a=J((L[i+95|0]+(L[i+-29|0]+(L[i+63|0]+(L[i+-30|0]+(L[i+31|0]+(L[i+-31|0]+(L[i+-32|0]+L[i+-1|0]|0)|0)|0)|0)|0)|0)|0)+4>>>3&255,16843009),m[i+96|0]=a,m[i+97|0]=a>>>8,m[i+98|0]=a>>>16,m[i+99|0]=a>>>24,m[i+64|0]=a,m[i+65|0]=a>>>8,m[i+66|0]=a>>>16,m[i+67|0]=a>>>24,m[i+32|0]=a,m[i+33|0]=a>>>8,m[i+34|0]=a>>>16,m[i+35|0]=a>>>24,m[i|0]=a,m[i+1|0]=a>>>8,m[i+2|0]=a>>>16,m[i+3|0]=a>>>24}function Tr(i,a,s,g){i=i|0,a=a|0,s=s|0,g=g|0;var b=0,x=0,A=0,P=0,j=0,B=0,Z=0;if((s|0)>=1)for(b=f[g+-4>>2];x=j<<2,A=x+a|0,P=f[A+4>>2],Z=g+x|0,B=f[A>>2],P=((P^B)>>>1&2139062143)+(P&B)|0,A=f[A+-4>>2],b=((A^b)>>>1&2139062143)+(b&A)|0,b=((P^b)>>>1&2139062143)+(b&P)|0,x=f[i+x>>2],b=(b&-16711936)+(x&-16711936)&-16711936|(b&16711935)+(x&16711935)&16711935,f[Z>>2]=b,j=j+1|0,(j|0)!=(s|0););}function Ir(i,a,s){i=i|0,a=a|0,s=s|0;var g=0,b=0,x=0,A=0,P=0,j=0,B=0,Z=0,ne=0,me=0,Ce=0,Be=0,at=0;for(ne=0-a|0,me=0-(a<<1)|0,Ce=s<<1|1,P=f[2548],j=f[2547],Be=f[2546],B=f[2549];s=i+b|0,Z=s+ne|0,x=L[Z|0],A=L[s|0],g=L[s+me|0]-L[a+s|0]|0,((L[(x-A|0)+B|0]<<2)+L[g+B|0]|0)<=(Ce|0)&&(g=m[g+Be|0]+J(A-x|0,3)|0,at=m[(g+4>>3)+j|0],m[Z|0]=L[(m[(g+3>>3)+j|0]+x|0)+P|0],m[s|0]=L[(A-at|0)+P|0]),b=b+1|0,(b|0)!=16;);}function Zr(i,a,s,g,b){i=i|0,a=a|0,s=s|0,g=g|0,b=b|0;var x=0,A=0,P=0,j=0,B=0,Z=0,ne=0;if((s|0)>=1)for(;x=P<<2,j=Pr[a+2>>1],B=Pr[i>>1],Z=Pr[a>>1],ne=Pr[i+2>>1],A=kn[x+g>>1]+(((j+J(B,9)|0)+J(Z+ne|0,3)|0)+8>>4)|0,A=(A|0)<1023?A:1023,Pr[b+x>>1]=(A|0)>0?A:0,A=x|2,x=kn[A+g>>1]+(((J(ne,9)+Z|0)+J(j+B|0,3)|0)+8>>4)|0,x=(x|0)<1023?x:1023,Pr[b+A>>1]=(x|0)>0?x:0,a=a+2|0,i=i+2|0,P=P+1|0,(P|0)!=(s|0););}function Gr(i){var a=0,s=0,g=0;if(f[i+24>>2]<=0){e:{if(f[i+4>>2]){et[f[2808]](i);break e}if(!f[i+20>>2]){if((J(f[i+52>>2],f[i+8>>2])|0)<1)break e;for(s=f[i+76>>2];g=a<<2,m[f[i+68>>2]+a|0]=f[g+s>>2],s=f[i+76>>2],f[g+s>>2]=0,a=a+1|0,(a|0)<(J(f[i+52>>2],f[i+8>>2])|0););break e}et[f[2809]](i)}f[i+24>>2]=f[i+24>>2]+f[i+28>>2],f[i+68>>2]=f[i+68>>2]+f[i+72>>2],f[i+64>>2]=f[i+64>>2]+1}}function dn(i,a,s,g){i=i|0,a=a|0,s=s|0,g=g|0;var b=0,x=0,A=0,P=0,j=0,B=0;if((g|0)>=1)for(;b=kn[i+2>>1],x=kn[i>>1],P=kn[i+4>>1],j=(J(b,-19081)+J(x,-9719)|0)+J(P,28800)|0,B=j+33685504>>18,m[a+A|0]=B>>>0<256?B:(j|0)<-33685504?-33685504:255,b=(J(b,-24116)+J(x,28800)|0)+J(P,-4684)|0,x=b+33685504>>18,m[s+A|0]=x>>>0<256?x:(b|0)<-33685504?-33685504:255,i=i+8|0,A=A+1|0,(A|0)!=(g|0););}function qr(i,a,s,g,b){var x=0,A=0,P=0,j=0,B=0,Z=0,ne=0;j=f[i+16>>2],A=f[i+8>>2],i=f[i+4>>2],P=8>>>i|0;e:{if((P|0)<=7){if((a|0)>=(s|0))break e;for(B=-1<<P^-1,Z=-1<<i^-1,ne=(A|0)<1;;){if(x=0,i=0,!ne)for(;x&Z||(i=L[g|0],g=g+1|0),m[b|0]=f[((i&B)<<2)+j>>2]>>>8,i=i>>>P|0,b=b+1|0,x=x+1|0,(x|0)!=(A|0););if(a=a+1|0,(s|0)==(a|0))break}break e}et[f[2732]](g,j,b,a,s,A)}}function Mn(i,a,s){i=i|0,a=a|0,s=s|0;var g=0,b=0,x=0,A=0,P=0;x=f[a>>2],s=f[x+28>>2],A=f[x+44>>2],g=s+J(A,f[i+8>>2])|0,b=f[i+16>>2],P=f[i+12>>2],a=f[i+104>>2];e:{if(a){if((b|0)<1)break e;for(s=0;g=no(g,a,P)+f[x+44>>2]|0,a=f[i>>2]+a|0,s=s+1|0,(b|0)!=(s|0););break e}if(!s|(b|0)<1)break e;for(a=0;g=ua(g,255,P)+A|0,a=a+1|0,(b|0)!=(a|0););}return 0}function En(i,a,s){i=i|0,a=a|0,s=s|0;var g=0,b=0,x=0,A=0,P=0,j=0,B=0,Z=0,ne=0,me=0,Ce=0;for(ne=s<<1|1,P=f[2548],j=f[2547],me=f[2546],B=f[2549];s=J(a,b)+i|0,Z=s+-1|0,x=L[Z|0],A=L[s|0],g=L[s+-2|0]-L[s+1|0]|0,((L[(x-A|0)+B|0]<<2)+L[g+B|0]|0)<=(ne|0)&&(g=m[g+me|0]+J(A-x|0,3)|0,Ce=m[(g+4>>3)+j|0],m[Z|0]=L[(m[(g+3>>3)+j|0]+x|0)+P|0],m[s|0]=L[(A-Ce|0)+P|0]),b=b+1|0,(b|0)!=16;);}function Un(i,a){i=i|0,a=a|0;var s=0,g=0;return s=f[a>>2],i=((s^i)>>>1&2139062143)+(i&s)|0,s=i&255,a=f[a+-4>>2],s=((s-(a&255)|0)/2|0)+s|0,g=s>>>0<256?s:(s^-1)>>>24|0,s=i>>>24|0,s=((s-(a>>>24|0)|0)/2|0)+s|0,g=g|(s>>>0<256?s:s>>>24^-1)<<24,s=i>>>16&255,s=((s-(a>>>16&255)|0)/2|0)+s|0,i=i>>>8&255,i=((i-(a>>>8&255)|0)/2|0)+i|0,g|(s>>>0<256?s:(s^-1)>>>24|0)<<16|(i>>>0<256?i:(i^-1)>>>24|0)<<8}function Li(i,a,s){var g=0;if(f[i+24>>2]=0,f[i+8>>2]=-8,f[i>>2]=0,f[i+4>>2]=254,f[i+12>>2]=a,g=a+s|0,f[i+16>>2]=g,g=s>>>0>3?g+-3|0:a,f[i+20>>2]=g,g>>>0>a>>>0){s=L[a|0]|L[a+1|0]<<8|(L[a+2|0]<<16|L[a+3|0]<<24),f[i+8>>2]=16,f[i+12>>2]=a+3,f[i>>2]=(s>>>8&65280|(s<<8&16711680|s<<24))>>>8;return}if((s|0)>=1){f[i+8>>2]=0,f[i+12>>2]=a+1,f[i>>2]=L[a|0];return}f[i+24>>2]=1,f[i+8>>2]=0,f[i>>2]=0}function Di(i,a,s){var g=0,b=0,x=0,A=0;g=f[s+16>>2];e:{if(!g){if(da(s))break e;g=f[s+16>>2]}if(x=f[s+20>>2],g-x>>>0<a>>>0)return et[f[s+36>>2]](s,i,a)|0;t:{if(m[s+75|0]<0)break t;for(b=a;;){if(g=b,!g)break t;if(b=g+-1|0,L[b+i|0]==10)break}if(b=et[f[s+36>>2]](s,i,g)|0,b>>>0<g>>>0)break e;i=i+g|0,a=a-g|0,x=f[s+20>>2],A=g}no(x,i,a),f[s+20>>2]=f[s+20>>2]+a,b=a+A|0}return b}function N(i,a,s,g){i=i|0,a=a|0,s=s|0,g=g|0;var b=0,x=0,A=0,P=0,j=0,B=0,Z=0,ne=0;if((s|0)>=1)for(Z=(a|0)<1;;){if(A=0,!Z)for(;b=A<<1,x=b+i|0,ne=x,B=(b|1)+i|0,P=L[B|0],b=P&15,j=J(b,4369),x=L[x|0],m[ne|0]=J(j,x&240|x>>>4)>>>16&240|J((x&15|x<<4)&255,j)>>>20,m[B|0]=J(P&240|P>>>4,j)>>>16&240|b,A=A+1|0,(A|0)!=(a|0););if(i=i+g|0,b=(s|0)>1,s=s+-1|0,!b)break}}function $(i,a,s,g,b){i=i|0,a=a|0,s=s|0,g=g|0,b=b|0;var x=0,A=0,P=0,j=0;if(m[b|0]=L[i|0],(a|0)>=2)for(P=a+-1|0,A=b+1|0,j=i+1|0;m[x+A|0]=L[x+j|0]-L[i+x|0],x=x+1|0,(P|0)!=(x|0););if((s|0)>=2)for(A=1;;){if(b=g+b|0,P=i+g|0,x=0,(a|0)>=1)for(;m[b+x|0]=L[x+P|0]-L[i+x|0],x=x+1|0,(x|0)!=(a|0););if(i=P,A=A+1|0,(A|0)==(s|0))break}}function re(i,a,s){i=i|0,a=a|0,s=s|0;var g=0,b=0,x=0,A=0;if((a|0)>=1)for(;g=(x<<2)+i|0,b=f[g>>2],b>>>0<=4278190079&&(A=g,b>>>0>=16777216?(g=b>>>24|0,s?g=4278190080/(g>>>0)|0:g=J(g,65793),g=J(g,b>>>16&255)+8388608>>>8&16711680|(J(g,b>>>8&255)+8388608>>>16&65280|(b&-16777216|J(g,b&255)+8388608>>>24))):g=0,f[A>>2]=g),x=x+1|0,(x|0)!=(a|0););}function fe(i,a,s){var g=0,b=0,x=0,A=0,P=0,j=0,B=0,Z=0,ne=0;if(f[i+20>>2]=0,f[i+24>>2]=0,f[i>>2]=0,f[i+4>>2]=0,f[i+12>>2]=s,x=s>>>0<8?s:8,x)for(ne=x,s=0;A=L[a+s|0],b=P<<3,g=b&31,32<=(b&63)>>>0?(b=A<<g,g=0):(b=(1<<g)-1&A>>>32-g,g=A<<g),j=g|j,B=b|B,s=s+1|0,g=P+1|0,g>>>0<1&&(Z=Z+1|0),P=g,!!((ne|0)!=(g|0)|Z););f[i+16>>2]=x,f[i>>2]=j,f[i+4>>2]=B,f[i+8>>2]=a}function Te(i,a){var s=0,g=0,b=0;s=0;e:{if(!i)break e;if(!a)return f[i>>2]=2,0;f[i>>2]=0,f[i+8>>2]=a,s=i+24|0,fe(s,f[a+64>>2],f[a+60>>2]);t:{r:{n:{if((ho(s,8)|0)!=47||(b=ho(s,14),g=ho(s,14),ho(s,1),ho(s,3)))break n;if(!f[i+48>>2])break r}f[i>>2]=3;break t}if(f[i+4>>2]=2,g=g+1|0,f[a+4>>2]=g,s=a,a=b+1|0,f[s>>2]=a,s=1,gn(a,g,1,i,0))break e}Bo(i),s=0}return s}function Oe(i,a,s,g){i=i|0,a=a|0,s=s|0,g=g|0;var b=0,x=0,A=0,P=0;e:{if(!i){if((g|0)<1)break e;for(;b=L[a+x|0]+b|0,m[s+x|0]=b,x=x+1|0,(x|0)!=(g|0););break e}if((g|0)<1)break e;for(b=L[i|0],A=b,P=b;;){if(A=(A&255)-(P&255)|0,P=b,b=(b&255)+A|0,b=(b|0)>0?b:0,A=L[a+x|0]+((b|0)<255?b:255)|0,m[s+x|0]=A,x=x+1|0,(x|0)==(g|0))break e;b=L[i+x|0]}}}function Ue(i,a,s,g){var b=0,x=0,A=0,P=0;return b=f[g>>2],x=f[s>>2],x|(a|0)<1||(P=Ei(b,b>>31,i,i>>31),x=a+P|0,A=Fn,A=x>>>0<P>>>0?A+1|0:A,x=x+-1|0,A=A+-1|0,x=a0(x,(x|0)!=-1?A+1|0:A,a,0)),b|(i|0)<1||(A=Ei(x,x>>31,a,a>>31),b=A+i|0,a=Fn,a=b>>>0<A>>>0?a+1|0:a,b=b+-1|0,a=a+-1|0,b=a0(b,(b|0)!=-1?a+1|0:a,i,0)),i=0,(x|0)<1|(b|0)<1||(f[s>>2]=x,f[g>>2]=b,i=1),i}function Ke(i,a,s,g){i=i|0,a=a|0,s=s|0,g=g|0;var b=0,x=0,A=0,P=0,j=0;if((s|0)>=1)for(b=f[g+-4>>2];x=j<<2,A=x+a|0,P=f[A+4>>2],b=((P^b)>>>1&2139062143)+(b&P)|0,P=g+x|0,A=f[A>>2],b=((A^b)>>>1&2139062143)+(b&A)|0,x=f[i+x>>2],b=(b&-16711936)+(x&-16711936)&-16711936|(b&16711935)+(x&16711935)&16711935,f[P>>2]=b,j=j+1|0,(j|0)!=(s|0););}function rt(i,a){i=i|0,a=a|0;var s=0,g=0,b=0;return g=f[a>>2],a=f[a+-4>>2],s=((g&255)+(i&255)|0)-(a&255)|0,b=s>>>0<256?s:(s^-1)>>>24|0,s=(g>>>24)+(i>>>24)-(a>>>24)|0,b=b|(s>>>0<256?s:s>>>24^-1)<<24,s=((g>>>16&255)+(i>>>16&255)|0)-(a>>>16&255)|0,i=((g>>>8&255)+(i>>>8&255)|0)-(a>>>8&255)|0,b|(s>>>0<256?s:(s^-1)>>>24|0)<<16|(i>>>0<256?i:(i^-1)>>>24|0)<<8}function gt(i,a,s,g,b){var x=0;e:{if(!i|a>>>0<10|(L[i+3|0]!=157|L[i+4|0]!=1)||L[i+5|0]!=42||(a=L[i|0],(a&25)!=16|(a|L[i+1|0]<<8|L[i+2|0]<<16)>>>5>>>0>=s>>>0)||(a=L[i+6|0]|L[i+7|0]<<8&16128,!a)||(i=L[i+8|0]|L[i+9|0]<<8&16128,!i)||(g&&(f[g>>2]=a),x=1,!b))break e;f[b>>2]=i}return x}function rr(i,a,s){i=i|0,a=a|0,s=s|0;var g=0,b=0,x=0,A=0,P=0,j=0;e:{if(g=f[i+104>>2],!g|(s|0)<1)break e;for(P=f[a+16>>2]+s|0,b=f[a+36>>2];;){if(x=f[i+8>>2],A=f[b+60>>2],j=g,g=f[i>>2],wa(b,f[i+16>>2]+(x-A|0)|0,j+J(g,A-x|0)|0,g),s=s-(et[f[a+52>>2]](a,P-s|0,s)|0)|0,(s|0)<1)break e;g=f[i+104>>2]}}return 0}function Er(i,a,s,g){i=i|0,a=a|0,s=s|0,g=g|0;var b=0,x=0,A=0,P=0,j=0,B=0,Z=0;if((s|0)>=1)for(j=m[i+2|0],B=m[i+1|0],Z=m[i|0];x=b<<2,i=f[x+a>>2],A=i<<16>>24,P=(J(A,Z)>>5)+(i>>>16|0)|0,f[g+x>>2]=i+(J(B,A)>>>5|0)+(J(P<<24>>24,j)>>>5)&255|(P<<16&16711680|i&-16711936),b=b+1|0,(b|0)!=(s|0););}function kr(i,a,s,g){i=i|0,a=a|0,s=s|0,g=g|0;var b=0,x=0,A=0,P=0;if((s|0)>=1)for(P=a+-4|0,a=f[g+-4>>2];b=A<<2,x=f[b+P>>2],a=((x^a)>>>1&2139062143)+(a&x)|0,x=g+b|0,b=f[i+b>>2],a=(a&-16711936)+(b&-16711936)&-16711936|(a&16711935)+(b&16711935)&16711935,f[x>>2]=a,A=A+1|0,(A|0)!=(s|0););}function hr(i,a,s,g){i=i|0,a=a|0,s=s|0,g=g|0;var b=0,x=0,A=0,P=0,j=0;if((s|0)>=1)for(;b=P<<2,x=b+a|0,A=f[x>>2],j=g+b|0,x=f[x+-4>>2],A=((x^A)>>>1&2139062143)+(A&x)|0,b=f[i+b>>2],f[j>>2]=(A&-16711936)+(b&-16711936)&-16711936|(A&16711935)+(b&16711935)&16711935,P=P+1|0,(P|0)!=(s|0););}function fn(i,a,s,g){i=i|0,a=a|0,s=s|0,g=g|0;var b=0,x=0,A=0,P=0,j=0;if((s|0)>=1)for(;b=P<<2,x=b+a|0,A=f[x+4>>2],j=g+b|0,x=f[x>>2],A=((x^A)>>>1&2139062143)+(A&x)|0,b=f[i+b>>2],f[j>>2]=(A&-16711936)+(b&-16711936)&-16711936|(A&16711935)+(b&16711935)&16711935,P=P+1|0,(P|0)!=(s|0););}function Dr(i,a,s,g){i=i|0,a=a|0,s=s|0,g=g|0;var b=0,x=0,A=0,P=0;if((s|0)>=1)for(b=f[g+-4>>2];x=P<<2,A=f[x+a>>2],b=((A^b)>>>1&2139062143)+(b&A)|0,A=g+x|0,x=f[i+x>>2],b=(b&-16711936)+(x&-16711936)&-16711936|(b&16711935)+(x&16711935)&16711935,f[A>>2]=b,P=P+1|0,(P|0)!=(s|0););}function zt(i,a,s,g){i=i|0,a=a|0,s=s|0,g=g|0;var b=0,x=0,A=0,P=0,j=0,B=0;if((g|0)>=1)for(;x=A<<1,b=x+s|0,B=b,x=kn[i+x>>1]-kn[a+x>>1]|0,b=x+kn[b>>1]|0,b=(b|0)<1023?b:1023,Pr[B>>1]=(b|0)>0?b:0,b=x>>31,x=b+x^b,b=P+x|0,b>>>0<x>>>0&&(j=j+1|0),P=b,A=A+1|0,(A|0)!=(g|0););return Fn=j,P|0}function Xt(i,a,s,g,b,x){i=i|0,a=a|0,s=s|0,g=g|0,b=b|0,x=x|0;var A=0,P=0,j=0,B=0,Z=0;if(P=255,(g|0)>=1)for(Z=(s|0)<1;;){if(A=0,!Z)for(;j=L[(A<<2)+i|0],m[b+A|0]=j,P=P&j,A=A+1|0,(A|0)!=(s|0););if(b=b+x|0,i=i+a|0,B=B+1|0,(B|0)==(g|0))break}return(P&255)==255|0}function Hr(i,a,s){var g=0,b=0,x=0;e:{if((a|0)==1&i>>>0<0|a>>>0<1){g=i;break e}for(;g=a0(i,a,10,0),b=Fn,x=b,b=Ei(g,b,10,0),s=s+-1|0,m[s|0]=i-b|48,b=a>>>0>9,i=g,a=x,!!b;);}if(g)for(;s=s+-1|0,i=(g>>>0)/10|0,m[s|0]=g-J(i,10)|48,a=g>>>0>9,g=i,!!a;);return s}function Qr(i,a,s,g,b,x){i=i|0,a=a|0,s=s|0,g=g|0,b=b|0,x=x|0;var A=0,P=0,j=0,B=0,Z=0;if(P=255,(g|0)>=1)for(Z=(s|0)<1;;){if(A=0,!Z)for(;j=L[i+A|0],m[(A<<2)+b|0]=j,P=P&j,A=A+1|0,(A|0)!=(s|0););if(b=b+x|0,i=i+a|0,B=B+1|0,(B|0)==(g|0))break}return(P|0)!=255|0}function Wr(i,a,s,g,b){var x=0,A=0,P=0;x=jn-32|0,jn=x;e:{if(!i|a>>>0<5|(L[i|0]!=47|L[i+4|0]>31)||(fe(x,i,a),(ho(x,8)|0)!=47)||(i=ho(x,14),a=ho(x,14),A=ho(x,1),ho(x,3)|f[x+24>>2])||(s&&(f[s>>2]=i+1),g&&(f[g>>2]=a+1),P=1,!b))break e;f[b>>2]=A}return jn=x+32|0,P}function Nn(i,a,s,g){i=i|0,a=a|0,s=s|0,g=g|0;var b=0,x=0,A=0,P=0;if((s|0)>=1)for(;;){b=L[a+x|0];e:{if((b|0)==255)break e;if(!b){m[i+x|0]=0;break e}A=i+x|0,P=A,g?b=4278190080/(b>>>0)|0:b=J(b,65793),m[P|0]=J(b,L[A|0])+8388608>>>24}if(x=x+1|0,(x|0)==(s|0))break}}function Cn(i,a,s,g){i=i|0,a=a|0,s=s|0,g=g|0;var b=0;e:{if(i){if((g|0)<=0)break e;for(;m[s+b|0]=L[a+b|0]+L[i+b|0],b=b+1|0,(b|0)!=(g|0););break e}if((g|0)<1)break e;for(i=0;i=L[a+b|0]+i|0,m[s+b|0]=i,b=b+1|0,(b|0)!=(g|0););}}function Ci(i,a,s,g){i=i|0,a=a|0,s=s|0,g=g|0;var b=0,x=0,A=0,P=0;if((s|0)>=1)for(A=a+-4|0,a=0;b=a<<2,x=f[b+i>>2],P=g+b|0,b=f[b+A>>2],f[P>>2]=(x&-16711936)+(b&-16711936)&-16711936|(x&16711935)+(b&16711935)&16711935,a=a+1|0,(s|0)!=(a|0););}function Rn(i,a,s,g,b,x){i=i|0,a=a|0,s=s|0,g=g|0,b=b|0,x=x|0;var A=0,P=0,j=0;if((g|0)>=1)for(P=(s|0)<1,j=x<<2;;){if(x=0,!P)for(;f[(x<<2)+b>>2]=L[i+x|0]<<8,x=x+1|0,(x|0)!=(s|0););if(i=i+a|0,b=b+j|0,A=A+1|0,(A|0)==(g|0))break}}function Co(i,a,s,g,b,x){i=i|0,a=a|0,s=s|0,g=g|0,b=b|0,x=x|0;var A=0,P=0;if((g|0)<(b|0))for(P=(x|0)<1;;){if(A=0,!P)for(;f[s>>2]=f[(f[i>>2]>>>6&1020)+a>>2],s=s+4|0,i=i+4|0,A=A+1|0,(A|0)!=(x|0););if(g=g+1|0,(b|0)==(g|0))break}}function Po(i,a,s,g){i=i|0,a=a|0,s=s|0,g=g|0;var b=0,x=0,A=0,P=0;if((s|0)>=1)for(A=a+4|0,a=0;b=a<<2,x=f[b+i>>2],P=g+b|0,b=f[b+A>>2],f[P>>2]=(x&-16711936)+(b&-16711936)&-16711936|(x&16711935)+(b&16711935)&16711935,a=a+1|0,(s|0)!=(a|0););}function io(i,a,s,g,b,x){i=i|0,a=a|0,s=s|0,g=g|0,b=b|0,x=x|0;var A=0,P=0;if((g|0)<(b|0))for(P=(x|0)<1;;){if(A=0,!P)for(;m[s|0]=f[(L[i|0]<<2)+a>>2]>>>8,s=s+1|0,i=i+1|0,A=A+1|0,(A|0)!=(x|0););if(g=g+1|0,(b|0)==(g|0))break}}function $i(i,a,s,g){i=i|0,a=a|0,s=s|0,g=g|0;var b=0,x=0,A=0,P=0;if((s|0)>=1)for(;b=x<<2,A=f[b+i>>2],P=g+b|0,b=f[a+b>>2],f[P>>2]=(A&-16711936)+(b&-16711936)&-16711936|(A&16711935)+(b&16711935)&16711935,x=x+1|0,(x|0)!=(s|0););}function Eo(i,a,s,g){i=i|0,a=a|0,s=s|0,g=g|0;var b=0,x=0,A=0;if((s|0)>=1)for(a=f[g+-4>>2];x=b<<2,A=f[x+i>>2],a=(A&-16711936)+(a&-16711936)&-16711936|(A&16711935)+(a&16711935)&16711935,f[g+x>>2]=a,b=b+1|0,(b|0)!=(s|0););}function Mo(){var i=0,a=0;i=sl(1,0,2376);e:{if(!i||(f[i>>2]=0,f[i+8>>2]=5010,et[f[2557]](i+124|0),f[i+312>>2]=0,f[i+4>>2]=0,f[2661]))break e;t:{if(a=f[2673],!a||!(et[a|0](2)|0))break t;return f[2661]=19,i}f[2661]=20}return i}function Ki(i,a,s){var g=0,b=0;return g=2,!i|!s||(f[s>>2]=0,f[s+4>>2]=0,f[s+32>>2]=0,f[s+36>>2]=0,f[s+24>>2]=0,f[s+28>>2]=0,b=s+16|0,g=b,f[g>>2]=0,f[g+4>>2]=0,g=s+8|0,f[g>>2]=0,f[g+4>>2]=0,g=wl(i,a,s,s+4|0,g,s+12|0,b,0)),g}function Fa(i,a,s,g){var b=0,x=0,A=0,P=0,j=0,B=0;return b=s>>>16|0,x=i>>>16|0,B=J(b,x),A=s&65535,P=i&65535,j=J(A,P),x=(j>>>16|0)+J(x,A)|0,b=(x&65535)+J(b,P)|0,i=(J(a,s)+B|0)+J(i,g)+(x>>>16)+(b>>>16)|0,a=j&65535|b<<16,Fn=i,a}function Fi(i){var a=0;if(a=f[i+12>>2],a>>>0<ii[i+16>>2]){f[i+12>>2]=a+1,f[i+8>>2]=f[i+8>>2]+8,f[i>>2]=L[a|0]|f[i>>2]<<8;return}if(!f[i+24>>2]){f[i+24>>2]=1,f[i>>2]=f[i>>2]<<8,f[i+8>>2]=f[i+8>>2]+8;return}f[i+8>>2]=0}function pa(i,a){i=i|0,a=a|0;var s=0;return a=f[a>>2],s=f[a+20>>2],A0(f[i+20>>2],f[i+32>>2],f[i+24>>2],f[i+28>>2],f[i+36>>2],J(s,f[i+8>>2])+f[a+16>>2]|0,s,f[i+12>>2],f[i+16>>2],f[(f[a>>2]<<2)+11376>>2]),f[i+16>>2]}function Ha(i,a,s){i=i|0,a=a|0,s=s|0;var g=0,b=0;if((s|0)>=1)for(;b=f[(g<<2)+i>>2],m[a+g|0]=((J(b&255,6420)+J(b>>>16&255,16839)|0)+J(b>>>8&255,33059)|0)+1081344>>>16,g=g+1|0,(g|0)!=(s|0););}function vo(i,a,s,g){i=i|0,a=a|0,s=s|0,g=g|0;var b=0;b=jn-16|0,jn=b;e:{if(!Uf(bu(f[i+60>>2],a|0,s|0,g&255,b+8|0)|0)){a=f[b+12>>2],i=f[b+8>>2];break e}f[b+8>>2]=-1,f[b+12>>2]=-1,a=-1,i=-1}return jn=b+16|0,Fn=a,i|0}function ya(i,a,s,g,b,x){i=i|0,a=a|0,s=s|0,g=g|0,b=b|0,x=x|0;var A=0,P=0;if((g|0)>=1)for(;f[(P<<2)+x>>2]=L[s+A|0]|(L[i+A|0]<<16|L[a+A|0]<<8)|-16777216,A=b+A|0,P=P+1|0,(P|0)!=(g|0););}function Ba(i,a,s){i=i|0,a=a|0,s=s|0;var g=0,b=0,x=0,A=0;if((a|0)>=1)for(;x=g<<2,b=f[x+i>>2],A=b>>>8&255,f[s+x>>2]=(b&16711935)+(A<<16|A)&16711935|b&-16711936,g=g+1|0,(g|0)!=(a|0););}function Wa(i){i&&(et[f[2562]](i+124|0),H0(i),Vi(f[i+2288>>2]),f[i+2288>>2]=0,f[i+2292>>2]=0,f[i+12>>2]=0,f[i+16>>2]=0,f[i+20>>2]=0,f[i+24>>2]=0,f[i+28>>2]=0,f[i+32>>2]=0,f[i+36>>2]=0,f[i+4>>2]=0,Vi(i))}function Ho(i,a,s,g,b){var x=0;if(x=jn-256|0,jn=x,!(b&73728|(s|0)<=(g|0))){if(s=s-g|0,g=s>>>0<256,ua(x,a&255,g?s:256),!g)for(;mf(i,x,256),s=s+-256|0,s>>>0>255;);mf(i,x,s)}jn=x+256|0}function ss(i,a,s){i=i|0,a=a|0,s=s|0;var g=0;if((s|0)>=1)for(;m[a+g|0]=((J(L[i+2|0],16839)+J(L[i+1|0],33059)|0)+J(L[i|0],6420)|0)+1081344>>>16,i=i+3|0,g=g+1|0,(g|0)!=(s|0););}function Os(i,a,s){i=i|0,a=a|0,s=s|0;var g=0;if((s|0)>=1)for(;m[a+g|0]=((J(L[i|0],16839)+J(L[i+1|0],33059)|0)+J(L[i+2|0],6420)|0)+1081344>>>16,i=i+3|0,g=g+1|0,(g|0)!=(s|0););}function Vo(i,a,s){i=i|0,a=a|0,s=s|0;var g=0;if((a|0)>=1)for(g=(a<<2)+i|0;a=f[i>>2],m[s+2|0]=a,m[s+3|0]=a>>>24,m[s+1|0]=a>>>8,m[s|0]=a>>>16,s=s+4|0,i=i+4|0,i>>>0<g>>>0;);}function Ia(i,a,s,g){var b=0,x=0;b=jn-1024|0,jn=b;e:{if(!i){g=za(0,a,s,g,0);break e}if((g|0)<=512){g=za(i,a,s,g,b);break e}if(x=Ta(g,0,2),!x){g=0;break e}g=za(i,a,s,g,x),Vi(x)}return jn=b+1024|0,g}function tu(){var i=0;i=f[2673],(i|0)!=f[2555]&&(f[2854]=136,f[2853]=137,f[2852]=138,f[2851]=139,f[2850]=140,f[2849]=136,f[2848]=137,f[2847]=138,f[2846]=141,f[2845]=139,f[2844]=142,f[2555]=i)}function Fs(){var i=0;i=f[2673],(i|0)!=f[2553]&&(f[2831]=129,f[2829]=130,f[2838]=131,f[2837]=132,f[2836]=129,f[2835]=130,f[2834]=133,f[2833]=131,f[2832]=132,f[2830]=134,f[2828]=135,f[2553]=i)}function Ys(i,a,s){i=i|0,a=a|0,s=s|0;var g=0;if((a|0)>=1)for(g=(a<<2)+i|0;a=f[i>>2],m[s+1|0]=a>>>5&224|a>>>3&31,m[s|0]=a>>>16&248|a>>>13&7,s=s+2|0,i=i+4|0,i>>>0<g>>>0;);}function Js(){var i=0;i=f[2673],(i|0)!=f[2554]&&(f[2820]=122,f[2819]=123,f[2815]=122,f[2813]=123,f[2822]=124,f[2821]=125,f[2818]=126,f[2817]=124,f[2816]=125,f[2814]=127,f[2812]=128,f[2554]=i)}function da(i){var a=0;return a=L[i+74|0],m[i+74|0]=a+-1|a,a=f[i>>2],a&8?(f[i>>2]=a|32,-1):(f[i+4>>2]=0,f[i+8>>2]=0,a=f[i+44>>2],f[i+28>>2]=a,f[i+20>>2]=a,f[i+16>>2]=a+f[i+48>>2],0)}function x0(i,a,s){i=i|0,a=a|0,s=s|0;var g=0;if((a|0)>=1)for(g=(a<<2)+i|0;a=f[i>>2],m[s+1|0]=a&240|a>>>28,m[s|0]=a>>>16&240|a>>>12&15,s=s+2|0,i=i+4|0,i>>>0<g>>>0;);}function G0(i,a,s,g){i=i|0,a=a|0,s=s|0,g=g|0;var b=0,x=0;if((s|0)>=1)for(a=0;b=a<<2,x=f[b+i>>2],f[g+b>>2]=x+-16777216&-16711936|x&16711935,a=a+1|0,(s|0)!=(a|0););}function Ll(i,a){i=i|0,a=a|0,kn[i>>1]&&et[f[2706]](i,a),kn[i+32>>1]&&et[f[2706]](i+32|0,a+4|0),kn[i+64>>1]&&et[f[2706]](i- -64|0,a+128|0),kn[i+96>>1]&&et[f[2706]](i+96|0,a+132|0)}function fa(){var i=0;i=f[2673],(i|0)!=f[2544]&&(f[2663]=21,f[2662]=22,f[2665]=23,f[2670]=24,f[2664]=25,f[2666]=26,f[2667]=27,f[2668]=28,f[2669]=29,f[2671]=30,f[2672]=31,f[2544]=i)}function dc(i,a){i=i|0,a=a|0;var s=0,g=0;return s=f[a>>2],g=f[a+4>>2],s=((s^g)>>>1&2139062143)+(s&g)|0,a=f[a+-4>>2],i=((a^i)>>>1&2139062143)+(i&a)|0,((s^i)>>>1&2139062143)+(i&s)|0}function k0(i){i=i|0;var a=0,s=0,g=0;return f[i+12>>2]<1|f[i+16>>2]<1||(a=f[i+40>>2],s=et[f[a+44>>2]](i,a)|0,g=f[a+48>>2],g&&et[g|0](i,a,s)|0,f[a+16>>2]=f[a+16>>2]+s,a=1),a|0}function Bs(i,a,s,g){i=i|0,a=a|0,s=s|0,g=g|0;var b=0,x=0,A=0;if((g|0)>=1)for(;x=b<<1,A=x+s|0,Pr[A>>1]=kn[A>>1]+(kn[i+x>>1]-kn[a+x>>1]|0),b=b+1|0,(b|0)!=(g|0););}function js(i){var a=0,s=0;a=f[3008],s=i+3&-4,i=a+s|0;e:{if(i>>>0<=a>>>0&&(s|0)>=1||i>>>0>Bd()<<16>>>0&&!(vu(i|0)|0))break e;return f[3008]=i,a}return f[2865]=48,-1}function ru(i,a,s){i=i|0,a=a|0,s=s|0;var g=0;if((a|0)>=1)for(g=(a<<2)+i|0;a=f[i>>2],m[s|0]=a,m[s+2|0]=a>>>16,m[s+1|0]=a>>>8,s=s+3|0,i=i+4|0,i>>>0<g>>>0;);}function Ju(i,a,s){i=i|0,a=a|0,s=s|0;var g=0;if((a|0)>=1)for(g=(a<<2)+i|0;a=f[i>>2],m[s+2|0]=a,m[s+1|0]=a>>>8,m[s|0]=a>>>16,s=s+3|0,i=i+4|0,i>>>0<g>>>0;);}function A0(i,a,s,g,b,x,A,P,j,B){var Z=0,ne=0;if((j|0)>=1)for(;et[B|0](i,s,g,x,P),ne=Z&1,s=ne?s+b|0:s,g=ne?g+b|0:g,x=x+A|0,i=i+a|0,Z=Z+1|0,(Z|0)!=(j|0););}function mc(i,a){var s=0,g=0,b=0;s=0;e:{if(!i||(g=Ei(i,0,a,0),b=Fn,s=g,(i|a)>>>0<65536))break e;s=b?-1:g}return a=s,i=Ms(a),!i|!(L[i+-4|0]&3)||ua(i,0,a),i}function gc(i,a){i=i|0,a=a|0;var s=0,g=0,b=0;e:{if((a|0)<=0)break e;for(;;){if(L[i+s|0]==255){if(s=s+4|0,g=(a|0)<2,a=a+-1|0,!g)continue;break e}break}b=1}return b|0}function yc(i,a,s,g){i=i|0,a=a|0,s=s|0,g=g|0;var b=0,x=0;if(b=i?L[i|0]:b,(g|0)>=1)for(;b=L[a+x|0]+b|0,m[s+x|0]=b,x=x+1|0,(x|0)!=(g|0););}function vc(i){var a=0;e:{if(f[i+64>>2]>=f[i+56>>2])break e;for(;;){if(f[i+24>>2]>0)break e;if(a=a+1|0,Gr(i),!(f[i+64>>2]<f[i+56>>2]))break}}return a}function Fc(i,a){var s=0,g=0,b=0,x=0;s=4;e:{for(;;){if(g=L[i|0],b=L[a|0],(g|0)==(b|0)){if(a=a+1|0,i=i+1|0,s=s+-1|0,s)continue;break e}break}x=g-b|0}return x}function hs(){var i=0;i=f[2673],(i|0)!=f[2556]&&(f[2861]=143,f[2860]=144,f[2857]=145,f[2858]=146,f[2859]=147,f[2862]=148,f[2863]=149,f[2864]=150,f[2556]=i)}function Ja(i){var a=0,s=0,g=0;if(qf(m[f[i>>2]]))for(;a=f[i>>2],g=m[a|0],f[i>>2]=a+1,s=(J(s,10)+g|0)+-48|0,!!qf(m[a+1|0]););return s}function Ta(i,a,s){var g=0,b=0,x=0;e:{if(i|a&&(b=a0(2147418112,0,i,a),g=Fn,Ei(s,0,i,a),!g&b>>>0<s>>>0|g>>>0<0|Fn>>>0>0))break e;x=Ms(J(i,s))}return x}function nu(i,a,s,g,b){i=i|0,a=a|0,s=s|0,g=g|0,b=b|0;var x=0;x=i,i=a<<2,x=x+i|0,Ji(x,a,1,16,s,g,b),x=i+x|0,Ji(x,a,1,16,s,g,b),Ji(i+x|0,a,1,16,s,g,b)}function n0(){var i=0;i=f[2673],(i|0)!=f[2550]&&(f[2731]=75,f[2730]=76,f[2729]=77,f[2728]=0,f[2727]=78,f[2726]=79,f[2725]=80,f[2724]=0,f[2550]=i)}function sl(i,a,s){var g=0,b=0,x=0;e:{if(i|a&&(b=a0(2147418112,0,i,a),g=Fn,Ei(s,0,i,a),!g&b>>>0<s>>>0|g>>>0<0|Fn>>>0>0))break e;x=mc(i,s)}return x}function H0(i){var a=0;Vi(f[i+2360>>2]),f[i+2360>>2]=0,f[i+2364>>2]=0,a=f[i+2344>>2],a&&(yh(f[a+20>>2]),f[a+20>>2]=0,Vi(a)),f[i+2344>>2]=0}function E0(i,a,s){i=i|0,a=a|0,s=s|0;var g=0;if((s|0)>=1)for(;m[a+g|0]=f[(g<<2)+i>>2]>>>8,g=g+1|0,(g|0)!=(s|0););}function i0(i,a,s,g){if(i|a)for(;s=s+-1|0,m[s|0]=L[(i&15)+10128|0]|g,i=(a&15)<<28|i>>>4,a=a>>>4|0,!!(i|a););return s}function va(i,a,s,g,b,x,A){var P=0;if((x|0)>=1)for(;et[f[2663]](i,s,b,A),s=s+g|0,i=i+a|0,P=P+1|0,(P|0)!=(x|0););}function W0(i,a){i=i|0,a=a|0;for(var s=0;;){if((a|0)<1)return 0;if(a=a+-1|0,s=L[i|0],i=i+1|0,(s|0)!=255)break}return 1}function ue(i,a){i=i|0,a=a|0;var s=0;return s=f[a+4>>2],i=((s^i)>>>1&2139062143)+(i&s)|0,a=f[a>>2],((i^a)>>>1&2139062143)+(i&a)|0}function we(i,a,s,g,b,x){i=i|0,a=a|0,s=s|0,g=g|0,b=b|0,x=x|0;var A=0;A=i,i=s<<2,Ji(A+i|0,s,1,8,g,b,x),Ji(i+a|0,s,1,8,g,b,x)}function qe(i,a,s,g,b){i=i|0,a=a|0,s=s|0,g=g|0,b=b|0,Ji(i+4|0,1,a,16,s,g,b),Ji(i+8|0,1,a,16,s,g,b),Ji(i+12|0,1,a,16,s,g,b)}function xt(i,a,s,g,b,x){var A=0;if((x|0)>=1)for(;s=no(s,i,b)+g|0,i=i+a|0,A=(x|0)>1,x=x+-1|0,!!A;);}function nr(i,a,s){if(i|a)for(;s=s+-1|0,m[s|0]=i&7|48,i=(a&7)<<29|i>>>3,a=a>>>3|0,!!(i|a););return s}function sr(i,a,s,g,b,x,A,P,j,B){i=i|0,a=a|0,s=s|0,g=g|0,b=b|0,x=x|0,A=A|0,P=P|0,j=j|0,B=B|0,et[i|0](a,s,g,b,x,A,P,j,B)}function Zt(i,a,s,g){var b=0;if((g|0)>=1)for(;et[f[2662]](i,s,0),i=i+a|0,b=b+1|0,(b|0)!=(g|0););}function _r(){var i=0;i=f[2673],(i|0)!=f[2552]&&(f[2809]=118,f[2808]=119,f[2807]=120,f[2806]=121,f[2552]=i)}function Cr(i,a){var s=0;return s=1<<a,s=sl(s,s>>31,4),f[i>>2]=s,s?(f[i+8>>2]=a,f[i+4>>2]=32-a,1):0}function on(i,a){var s=0;return s=1,f[i+148>>2]>=1&&(s=et[f[2559]](i+124|0)|0),i=f[a+52>>2],i&&et[i|0](a),s}function yn(i){i=i|0;var a=0;a=f[i+8>>2],a&&(a=et[a|0](f[i+12>>2],f[i+16>>2])|0,f[i+20>>2]=f[i+20>>2]|!a)}function Jn(i,a,s,g,b,x){i=i|0,a=a|0,s=s|0,g=g|0,b=b|0,x=x|0,Ji(i+4|0,1,s,8,g,b,x),Ji(a+4|0,1,s,8,g,b,x)}function _n(i,a){var s=0;return s=f[i+24>>2],i=f[i+32>>2],i=((s+i|0)+-1|0)/(i|0)|0,(i|0)>(a|0)?a:i}function Kn(i,a,s,g,b,x,A){return i=i|0,a=a|0,s=s|0,g=g|0,b=b|0,x=x|0,A=A|0,et[i|0](a,s,g,b,x,A)|0}function ui(i,a,s,g,b,x){i=i|0,a=a|0,s=s|0,g=g|0,b=b|0,x=x|0,Ca(i,1,s,8,g,b,x),Ca(a,1,s,8,g,b,x)}function Gi(i,a,s,g,b,x){i=i|0,a=a|0,s=s|0,g=g|0,b=b|0,x=x|0,Ca(i,s,1,8,g,b,x),Ca(a,s,1,8,g,b,x)}function so(i){i=i|0,f[i>>2]=0,f[i+4>>2]=0,f[i+16>>2]=0,f[i+20>>2]=0,f[i+8>>2]=0,f[i+12>>2]=0}function _o(i,a,s,g,b){return i=i|0,a=a|0,s=s|0,g=g|0,b=b|0,i=et[i|0](a,s,g,b)|0,Hl(Fn|0),i|0}function jo(i,a){var s=0;return!a|f[i+12>>2]<2|f[i>>2]+-7>>>0>3||(s=f[a+8>>2]!=0),s}function La(i,a){return i=i|0,a=a|0,i=f[a>>2],a=f[a+-4>>2],((i^a)>>>1&2139062143)+(i&a)|0}function ja(i,a,s,g,b,x,A){i=i|0,a=a|0,s=s|0,g=g|0,b=b|0,x=x|0,A=A|0,et[i|0](a,s,g,b,x,A)}function ea(i,a){var s=0,g=0;return s=a&31,g=(-1>>>s&i)<<s,s=i,i=0-a&31,g|(s&-1<<i)>>>i}function Qi(i,a){return i=i|0,a=a|0,i=f[a+4>>2],a=f[a>>2],((i^a)>>>1&2139062143)+(i&a)|0}function bn(i,a){return i=i|0,a=a|0,a=f[a+-4>>2],((a^i)>>>1&2139062143)+(i&a)|0}function bi(i,a,s,g,b,x){i=i|0,a=a|0,s=s|0,g=g|0,b=b|0,x=x|0,et[i|0](a,s,g,b,x)}function lo(i){e:{if(f[i+76>>2]<=-1){i=Di(1024,26,i);break e}i=Di(1024,26,i)}}function Hi(i,a){i=i|0,a=a|0,et[f[2703]](i,a,1),et[f[2703]](i- -64|0,a+128|0,1)}function Ka(i,a){return i=i|0,a=a|0,a=f[a>>2],((a^i)>>>1&2139062143)+(i&a)|0}function Pi(i,a,s){return f[i>>2]||(f[i+8>>2]=s,f[i>>2]=a,f[i+4>>2]=0),0}function uo(i,a,s){var g=0;g=jn-16|0,jn=g,f[g+12>>2]=s,vi(i,a,s),jn=g+16|0}function Do(i,a,s,g,b){i=i|0,a=a|0,s=s|0,g=g|0,b=b|0,Ca(i,1,a,16,s,g,b)}function Uo(i,a,s,g,b){i=i|0,a=a|0,s=s|0,g=g|0,b=b|0,Ca(i,a,1,16,s,g,b)}function $o(i){return i=i|0,f[i+20>>2]=0,f[i+4>>2]||(f[i+4>>2]=1),1}function Us(i,a){f[a+40>>2]=i,f[a+52>>2]=3,f[a+48>>2]=4,f[a+44>>2]=5}function _c(i,a){if(!f[i>>2]){et[f[2806]](i,a);return}et[f[2807]](i,a)}function bc(i,a,s,g,b){i=i|0,a=a|0,s=s|0,g=g|0,b=b|0,et[i|0](a,s,g,b)}function Ku(i,a,s){i=i|0,a=a|0,s=s|0,Hs(i,a),s&&Hs(i+32|0,a+4|0)}function Bc(i,a,s,g){return i=i|0,a=a|0,s=s|0,g=g|0,et[i|0](a,s,g)|0}function Pl(i){i&&(f[i+12>>2]<=0&&Vi(f[i+80>>2]),f[i+80>>2]=0)}function o0(i){i=i|0,i=f[i+40>>2],Vi(f[i+40>>2]),f[i+40>>2]=0}function S0(i,a,s,g){i=i|0,a=a|0,s=s|0,g=g|0,et[i|0](a,s,g)}function Su(i,a,s){return i=i|0,a=a|0,s=s|0,et[i|0](a,s)|0}function df(i){return i?31-Ri(i+-1^i)|0:32}function C0(i,a){no(f[a>>2],f[i>>2],4<<f[a+8>>2])}function ls(i,a){return a=Mi(i,a),Mi(i,1)?0-a|0:a}function Uf(i){return i?(f[2865]=i,-1):0}function xp(i,a,s){i=i|0,a=a|0,s=s|0,et[i|0](a,s)}function kp(i,a){return i=i|0,a=a|0,et[i|0](a)|0}function C2(i,a){return a=a|0,f[a+-4>>2]}function Dd(i,a){return i?Se(i,a):0}function mf(i,a,s){L[i|0]&32||Di(a,s,i)}function I2(i){return i=i|0,i=jn-i&-16,jn=i,i|0}function T2(i,a){return a=a|0,f[a+4>>2]}function I0(i,a){return-16777216}function a0(i,a,s,g){return i=Wu(i,a,s,g),i}function Ei(i,a,s,g){return i=Fa(i,a,s,g),i}function s0(i){i&&(Vi(f[i>>2]),f[i>>2]=0)}function L2(i,a){return a=a|0,f[a>>2]}function P2(i){return i=i|0,Qc(f[i+60>>2])|0}function M2(i){return i=i|0,!f[i+20>>2]|0}function zd(i,a){return i=i|0,i|0}function Nd(i,a){i=i|0,a=a|0,et[i|0](a)}function D2(i){return i=i|0,R2(i|0)|0}function qf(i){return i+-48>>>0<10}function yh(i){i&&(Bo(i),Vi(i))}function Rd(i){i&&ua(i,0,108)}function Ap(i){i=i|0,f[i+4>>2]=0}function gf(i){i&&ua(i,0,84)}function Vf(i){i&&Vi(i)}function Od(i,a){return Fn=i,a}function z2(){return 11460}function N2(i){i=i|0,jn=i}function $f(){return jn|0}function Fd(){}et[1]=Zu,et[2]=Hu,et[3]=o0,et[4]=Ds,et[5]=k0,et[6]=pa,et[7]=t0,et[8]=tr,et[9]=Kl,et[10]=D,et[11]=Mn,et[12]=eu,et[13]=Oa,et[14]=Xu,et[15]=rr,et[16]=Ss,et[17]=oi,et[18]=aa,et[19]=wu,et[20]=nl,et[21]=Nn,et[22]=re,et[23]=N,et[24]=ya,et[25]=cr,et[26]=Qr,et[27]=Rn,et[28]=Xt,et[29]=E0,et[30]=W0,et[31]=gc,et[32]=Ku,et[33]=Al,et[34]=Oo,et[35]=Sl,et[36]=Hi,et[37]=Ll,et[38]=Uo,et[39]=nu,et[40]=Do,et[41]=Gi,et[42]=we,et[43]=Ir,et[44]=En,et[45]=ba,et[46]=Pn,et[47]=qe,et[48]=ui,et[49]=Jn,et[50]=Xs,et[51]=Yu,et[52]=wt,et[53]=k,et[54]=Dt,et[55]=Et,et[56]=al,et[57]=w0,et[58]=pc,et[59]=r0,et[60]=te,et[61]=Bt,et[62]=ur,et[63]=xs,et[64]=Le,et[65]=fc,et[66]=Xr,et[67]=sa,et[68]=El,et[69]=cc,et[70]=kl,et[71]=Rs,et[72]=Je,et[73]=Yl,et[74]=Ra,et[75]=Oe,et[76]=Cn,et[77]=yc,et[78]=Tl,et[79]=$,et[80]=mt,et[81]=I0,et[82]=Un,et[83]=rt,et[84]=oe,et[85]=dc,et[86]=Qi,et[87]=La,et[88]=Ka,et[89]=bn,et[90]=ue,et[91]=C2,et[92]=T2,et[93]=L2,et[94]=zd,et[95]=G0,et[96]=Go,et[97]=Eu,et[98]=hc,et[99]=Tr,et[100]=fn,et[101]=hr,et[102]=Dr,et[103]=kr,et[104]=Ke,et[105]=Ci,et[106]=Po,et[107]=$i,et[108]=Eo,et[109]=Ba,et[110]=Er,et[111]=Vo,et[112]=Ju,et[113]=ru,et[114]=x0,et[115]=Ys,et[116]=Co,et[117]=io,et[118]=Es,et[119]=Zs,et[120]=le,et[121]=d,et[122]=Oi,et[123]=xi,et[124]=fo,et[125]=Xn,et[126]=Yi,et[127]=Ko,et[128]=qo,et[129]=xa,et[130]=Oc,et[131]=C,et[132]=ca,et[133]=as,et[134]=q,et[135]=Y,et[136]=cs,et[137]=Ya,et[138]=Ns,et[139]=zs,et[140]=Ga,et[141]=il,et[142]=ks,et[143]=e0,et[144]=Ha,et[145]=Os,et[146]=ss,et[147]=dn,et[148]=zt,et[149]=Bs,et[150]=Zr,et[151]=so,et[152]=$o,et[153]=M2,et[154]=yn,et[155]=yn,et[156]=Ap,et[157]=P2,et[158]=ia,et[159]=vo;function Bd(){return cn.byteLength/65536|0}function R2(i){i=i|0;var a=Bd()|0,s=a+i|0;if(a<s&&s<65536){var g=new ArrayBuffer(J(s,65536)),b=new ar.Int8Array(g);b.set(m),m=b,m=new ar.Int8Array(g),Pr=new ar.Int16Array(g),f=new ar.Int32Array(g),L=new ar.Uint8Array(g),kn=new ar.Uint16Array(g),ii=new ar.Uint32Array(g),new ar.Float32Array(g),To=new ar.Float64Array(g),cn=g,In.buffer=g}return a}return{__wasm_call_ctors:Fd,WebpToSDL:zc,memset:ua,memcpy:no,malloc:Ms,free:Vi,__errno_location:z2,stackSave:$f,stackRestore:N2,stackAlloc:I2,dynCall_vii:xp,dynCall_vi:Nd,dynCall_ii:kp,dynCall_iii:Su,dynCall_iiii:Bc,dynCall_iiiiiii:Kn,dynCall_viiii:bc,dynCall_viii:S0,dynCall_viiiiii:ja,dynCall_viiiii:bi,dynCall_viiiiiiiii:sr,dynCall_jiiii:_o,dynCall_jiji:_o,__growWasmMemory:D2}}for(var Tt=new Uint8Array(Ye.buffer),wr=new Uint8Array(123),pr=25;pr>=0;--pr)wr[48+pr]=52+pr,wr[65+pr]=pr,wr[97+pr]=26+pr;wr[43]=62,wr[47]=63;function vr(ar,$r,cn){for(var In,et,m=0,Pr=$r,f=cn.length,L=$r+(f*3>>2)-(cn[f-2]=="=")-(cn[f-1]=="=");m<f;m+=4)In=wr[cn.charCodeAt(m+1)],et=wr[cn.charCodeAt(m+2)],ar[Pr++]=wr[cn.charCodeAt(m)]<<2|In>>4,Pr<L&&(ar[Pr++]=In<<4|et>>2),Pr<L&&(ar[Pr++]=et<<6|wr[cn.charCodeAt(m+3)])}return vr(Tt,1024,"TGlicmFyeSB2ZXJzaW9uIG1pc21hdGNoIQoAVW5hYmxlIHRvIHNldCB2aWRlbyBtb2RlICgzMmJwcCAlZHglZCkhCgBVbmFibGUgdG8gY3JlYXRlICVkeCVkIFJHQkEgc3VyZmFjZSEKAEVycm9yIGRlY29kaW5nIGltYWdlICglZCkKAAMEAwQEAgIEBAQCAQE="),vr(Tt,1184,"iguMC44LkguaC6oLygsKDIwMjA2MD4wTGAEAAQABAAEo"),vr(Tt,1232,"ERIAAQIDBAUQBgcICQoLDA0ODwIDBwMDCwAAAAAAAAAYBxcZKAYnKRYaJio4BTc5FRs2OiUrSARHSRQcNTtGSiQsWEVLNDwDV1kTHVZaIy1ETFVbMz1oAmdpEh5maiIuVFxDTWVrMj54AXd5U10RH2RsQk52eiEvdXsxP2NtUl4AdHxBTxAgYm4wc31RX0ByfmFvUHF/YHAAAAAAAAAAAP///////////////////////////////////////////7D2////////////3/H8///////////5/f3////////////0/P//////////6v7+///////////9///////////////2/v//////////7/3+///////////+//7////////////4/v//////////+//+///////////////////////////9/v//////////+/7+///////////+//7////////////+/f/+////////+v/+//7////////+/////////////////////////////////////////////////////////9n/////////////4fzx/f///v/////q+vH6/f/9/v/////+////////////3/7+///////////u/f7+///////////4/v//////////+f7////////////////////////////9////////////9/7////////////////////////////9/v///////////P/////////////////////////////+/v///////////f/////////////////////////////+/f//////////+v/////////////+/////////////////////////////////////////////////////////7r7+v//////////6vv0/v/////////7+/P9/v/+///////9/v//////////7P3+///////////7/f3+/v/////////+/v///////////v7+///////////////////////////+/////////////v7////////////+/////////////////////////////v////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////j/////////////+v78/v/////////4/vn9///////////9/f//////////9v39///////////8/vv+/v/////////+/P//////////+P79///////////9//7+///////////7/v//////////9fv+///////////9/f7////////////7/f///////////P3+/////////////v/////////////8////////////+f/+//////////////7//////////////f//////////+v///////////////////////////////////////////v///////////////////////////4CAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgP2I/v/k24CAgICAvYHy/+PV/9uAgIBqfuP81tH//4CAgAFi+P/s4v//gICAtYXu/t3q/5qAgIBOhsr3xrT/24CAgAG5+f/z/4CAgICAuJb3/+zggICAgIBNbtj/7OaAgICAgAFl+//x/4CAgICAqovx/OzR//+AgIAldMTz5P///4CAgAHM/v/1/4CAgICAz6D6/+6AgICAgIBmZ+f/06uAgICAgAGY/P/w/4CAgICAsYfz/+rhgICAgIBQgdP/wuCAgICAgAEB/4CAgICAgICA9gH/gICAgICAgID/gICAgICAgICAgMYj7d/Bu6KgkZs+gy3G3ayw3J383QFEL5LQlafdov/fgAGV8f/d4P//gICAuI3q/d7c/8eAgIBRY7XysL75yv//gAGB6P3WxfLE//+AY3nS+snG/8qAgIAXW6Pyqrv30v//gAHI9v/q/4CAgICAbbLx/+f1//+AgIAsgsn9zcD//4CAgAGE7/vb0f+lgICAXojh+9q+//+AgIAWZK71uqH/x4CAgAG2+f/o64CAgICAfI/x/+PqgICAgIAjTbX7wdP/zYCAgAGd9//s5///gICAeY3r/+Hj//+AgIAtY7z7w9n/4ICAgAEB+//V/4CAgICAywH4//+AgICAgICJAbH/4P+AgICAgP0J+PvP0P/AgICArw3g88G5+cb//4BJEavdobPsp//qgAFf9/3Ut///gICA71r0+tPR//+AgICbTcP4vMP//4CAgAEY7/va2//NgICAyTPb/8S6gICAgIBFLr7vydr/5ICAgAG/+///gICAgICA36X5/9X/gICAgICNfPj//4CAgICAgAEQ+P//gICAgICAviTm/+z/gICAgICVAf+AgICAgICAgAHi/4CAgICAgICA98D/gICAgICAgIDwgP+AgICAgICAgAGG/P//gICAgICA1T76//+AgICAgIA3Xf+AgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgMoY1eu6v9yg8K//fia26Km45K7/u4A9Lorbl7Lwqv/YgAFw5vrHv/ef//+Apm3k/NPX/66AgIAnTaLorLT1sv//gAE03PbGx/nc//+AfEq/87fB+t3//4AYR4Lbmqrztv//gAG24fnb8P/ggICAlZbi/NjN/6uAgIAcbKryt8L+3///gAFR5vzMy//AgICAe2bR97zE/+mAgIAUX5nzpK3/y4CAgAHe+P/Y1YCAgICAqK/2/OvN//+AgIAvdNf/09T//4CAgAF57P3U1v//gICAjVTV/MnK/9uAgIAqUKDworn/zYCAgAEB/4CAgICAgICA9AH/gICAgICAgIDuAf+AgICAgICAgOd4MFlzcXiYcJizQH6qdi5GX69Fj1BVUkibZzg6CqvavRENmHIaEaMswxUKrXkYUMMaPixAVZBHCiar1ZAiGqouNxOIoCHORz8UCHJy0AwJ4lEoC2C2VB0QJIa3WYliZWqllEi7ZIKdbyBLUEJmp2NKPijqgCk1CbLxjRoIa0orGpJJpjEXnUEmaaAzNB9zgGhPDBvZ/1cRB1dERyxyMw+6Fy8pDm62txURwkItGWbFvRcSFlhYk5YqLi3EzStht3VVJiOzPSc1yFcaFSvoqzgiM2hyZh1dTSccVas6pVpiQCIWdM4XIiumSWs2IBozAVErH0QZahZAqyThciITFWaEvBBMfD4STl9VOTIwM8FlI5/Xb1kubzyUH6zb5BUSb3BxTVWz/yZ4cigqAcT10QoZbVgrHYym1SUrmj0/HptDLUQB0WRQCCuaATMaR45OThD/gCLFqykoBWbTtwQB3TMyEajRwBcZUoofJKsbpiYs5UNXOqlScxo7sz87WrQ7pl1JmigoFXSP0SInry8PELci3zEtty4RIbcGYg8gtzkuFhiAATYRJUEgSXMcgBeAzSgDCXMzwBIG31clCXM7TUAVL2g3LNoJNjWC4kBaRs0oKRcaOTY5cLgFKSam1R4iGoWYdAoghicTNd0aciBJ/x8JQeoCDwF2SUsgDDPA/6ArM1gfI0NmVTe6VTgVF287zS0lwDcmRnxJZgEiYn1iKlhoVXWvUl9UNVmAZHFlLUtPey8zgFGrATkRBUdmOTUpMSYhDXk5SRoBVSkKQ4pNblovcnMVAgpm/6YXBmUdEApVgGXEGjkSCmZm1SIUK3UUDySjgEQBGmY9RyUiNR/zwEU8RyZJdxzeJUQtgCIBLwv1qz4RE0aSVTc+RiUrJZpko1WgAT8JXIgcQCDJVUsPCQlA/7h3EFYGHAVA/xn4ATgIEYSJ/zd0gDoPFFKHORp5KKQyH4mahRkj2jNnLIODex8GnlYoQIeU4C23gBYaEYPwmg4B0S0QFVtA3gcBxTgVJ5s8ihdm1VMMDTbA/0QvHFUaVVWAgCCSqxILBz+QqwQE9iMbCpKuqwwagL5QI2O0UH42LVV+L1ewMykUIGVLgIt2knSAVTgpD7DsVSUJPkceEXd2/xESimUmPIo3RisajpIkEx6r/2EbFIotPT7bAVG8QCApFHWXjhQVo3ATDD3DgDAEGA=="),vr(Tt,4417,"Af8C/gMEBv0F/Pv6B/kI+Pc="),vr(Tt,4448,"BAUGBwgJCgoLDA0ODxARERITFBQVFRYWFxcYGRkaGxwdHh8gISIjJCUlJicoKSorLC0uLi8wMTIzNDU2Nzg5Ojs8PT4/QEFCQ0RFRkdISUpLTExNTk9QUVJTVFVWV1hZW11fYGJkZWZoamxucHJ0dnp8foCChIaIioyPkZSXmp0EAAUABgAHAAgACQAKAAsADAANAA4ADwAQABEAEgATABQAFQAWABcAGAAZABoAGwAcAB0AHgAfACAAIQAiACMAJAAlACYAJwAoACkAKgArACwALQAuAC8AMAAxADIAMwA0ADUANgA3ADgAOQA6ADwAPgBAAEIARABGAEgASgBMAE4AUABSAFQAVgBYAFoAXABeAGAAYgBkAGYAaABqAGwAbgBwAHIAdAB3AHoAfQCAAIMAhgCJAIwAjwCSAJUAmACbAJ4AoQCkAKcAqgCtALEAtQC5AL0AwQDFAMkAzQDRANUA2QDdAOEA5QDqAO8A9QD5AP4AAwEIAQ0BEgEXARwBCAcGBAQCAgIBAQEBRnJhbWUgc2V0dXAgZmFpbGVkAAACCA=="),vr(Tt,4882,"BAAIAAwAgACEAIgAjAAAAQQBCAEMAYABhAGIAYwBQ291bGQgbm90IGRlY29kZSBhbHBoYSBkYXRhLgB0aHJlYWQgaW5pdGlhbGl6YXRpb24gZmFpbGVkLgBubyBtZW1vcnkgZHVyaW5nIGZyYW1lIGluaXRpYWxpemF0aW9uLgBPSwBudWxsIFZQOElvIHBhc3NlZCB0byBWUDhHZXRIZWFkZXJzKCkAVHJ1bmNhdGVkIGhlYWRlci4ASW5jb3JyZWN0IGtleWZyYW1lIHBhcmFtZXRlcnMuAEZyYW1lIG5vdCBkaXNwbGF5YWJsZS4AY2Fubm90IHBhcnNlIHBpY3R1cmUgaGVhZGVyAEJhZCBjb2RlIHdvcmQAYmFkIHBhcnRpdGlvbiBsZW5ndGgAY2Fubm90IHBhcnNlIHNlZ21lbnQgaGVhZGVyAGNhbm5vdCBwYXJzZSBmaWx0ZXIgaGVhZGVyAGNhbm5vdCBwYXJzZSBwYXJ0aXRpb25zAE5vdCBhIGtleSBmcmFtZS4ATlVMTCBWUDhJbyBwYXJhbWV0ZXIgaW4gVlA4RGVjb2RlKCku"),vr(Tt,5329,"AQQIBQIDBgkMDQoHCw4PrZSMALCbjIcAtJ2NhoIA/v7z5sSxmYyFgoEAUHJlbWF0dXJlIGVuZC1vZi1wYXJ0aXRpb24wIGVuY291bnRlcmVkLgBQcmVtYXR1cmUgZW5kLW9mLWZpbGUgZW5jb3VudGVyZWQuAE91dHB1dCBhYm9ydGVkLgBSSUZGAFZQOFg="),vr(Tt,5488,"gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBgoOEhYaHiImKi4yNjo+QkZKTlJWWl5iZmpucnZ6foKGio6SlpqeoqaqrrK2ur7CxsrO0tba3uLm6u7y9vr/AwcLDxMXGx8jJysvMzc7P0NHS09TV1tfY2drb3N3e3+Dh4uPk5ebn6Onq6+zt7u/w8fLz9PX29/j5+vv8/f7/AAECAwQFBgcICQoLDA0ODxAREhMUFRYXGBkaGxwdHh8gISIjJCUmJygpKissLS4vMDEyMzQ1Njc4OTo7PD0+P0BBQkNERUZHSElKS0xNTk9QUVJTVFVWV1hZWltcXV5fYGFiY2RlZmdoaWprbG1ub3BxcnN0dXZ3eHl6e3x9fn9/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/AAAAAAAAAADw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8fLz9PX29/j5+vv8/f7/AAECAwQFBgcICQoLDA0ODw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw=="),vr(Tt,8032,"AQIDBAUGBwgJCgsMDQ4PEBESExQVFhcYGRobHB0eHyAhIiMkJSYnKCkqKywtLi8wMTIzNDU2Nzg5Ojs8PT4/QEFCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaW1xdXl9gYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXp7fH1+f4CBgoOEhYaHiImKi4yNjo+QkZKTlJWWl5iZmpucnZ6foKGio6SlpqeoqaqrrK2ur7CxsrO0tba3uLm6u7y9vr/AwcLDxMXGx8jJysvMzc7P0NHS09TV1tfY2drb3N3e3+Dh4uPk5ebn6Onq6+zt7u/w8fLz9PX29/j5+vv8/f7/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////AAD//v38+/r5+Pf29fTz8vHw7+7t7Ovq6ejn5uXk4+Lh4N/e3dzb2tnY19bV1NPS0dDPzs3My8rJyMfGxcTDwsHAv769vLu6ubi3trW0s7KxsK+urayrqqmop6alpKOioaCfnp2cm5qZmJeWlZSTkpGQj46NjIuKiYiHhoWEg4KBgH9+fXx7enl4d3Z1dHNycXBvbm1sa2ppaGdmZWRjYmFgX15dXFtaWVhXVlVUU1JRUE9OTUxLSklIR0ZFRENCQUA/Pj08Ozo5ODc2NTQzMjEwLy4tLCsqKSgnJiUkIyIhIB8eHRwbGhkYFxYVFBMSERAPDg0MCwoJCAcGBQQDAgEAAQIDBAUGBwgJCgsMDQ4PEBESExQVFhcYGRobHB0eHyAhIiMkJSYnKCkqKywtLi8wMTIzNDU2Nzg5Ojs8PT4/QEFCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaW1xdXl9gYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXp7fH1+f4CBgoOEhYaHiImKi4yNjo+QkZKTlJWWl5iZmpucnZ6foKGio6SlpqeoqaqrrK2ur7CxsrO0tba3uLm6u7y9vr/AwcLDxMXGx8jJysvMzc7P0NHS09TV1tfY2drb3N3e3+Dh4uPk5ebn6Onq6+zt7u/w8fLz9PX29/j5+vv8/f7/AAcGBgUFBQUEBAQEBAQEBAMDAwMDAwMDAwMDAwMDAwMCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEAf3+/f5+/33+Pn6+/z9/vf4ePl5+nr7e/x8/X3+fv93+Dh4uPk5ebn6Onq6+zt7u/w8fLz9PX29/j5+vv8/f7f4GDhYeJi42PkZOVl5mbnZ+ho6Wnqautr7Gztbe5u72/wcPFx8nLzc/R09XX2dvd3+Hj5efp6+3v8fP19/n7/X8AAAAAAQAAAAMAAAAHAAAADwAAAB8AAAA/AAAAfwAAAP8AAAD/AQAA/wMAAP8HAAD/DwAA/x8AAP8/AAD/fwAA//8AAP//AQD//wMA//8HAP//DwD//x8A//8/AP//fwD///8="),vr(Tt,9424,"MFLhDYYYswPLrF93amKIHFVcOGgouLMU+P6FSku43UmX8/xkiQJVXAAAKUrawX4Nq7dAWX1XklRyyhlOaYzTOGXuAQxfdaEyUvY3VDIsu1qxV6oP5zP1c9ruX2jizGN1gw6Zbu2nMEfG2cBPPBVrSfoDFE8M+xpUMguZcxzL1yYGN8xv2He7LCovdnXdzCVkYVSzJBWHfQqoFAQiZ78eFIMVtFbjAuVzb7HKREJNJij7rrpz7etQCvu2ah0L1DoNaDvbNYMeCCuVa8538OWBUbw7hXiUlJ8APO3lJy0rICAgMFgweAAobnVsbCkAAAAAEQAKABEREQAAAAAFAAAAAAAACQAAAAALAAAAAAAAAAARAA8KERERAwoHAAEACQsLAAAJBgsAAAsABhEAAAARERE="),vr(Tt,9745,"CwAAAAAAAAAAEQAKChEREQAKAAACAAkLAAAACQALAAAL"),vr(Tt,9803,"DA=="),vr(Tt,9815,"DAAAAAAMAAAAAAkMAAAAAAAMAAAM"),vr(Tt,9861,"Dg=="),vr(Tt,9873,"DQAAAAQNAAAAAAkOAAAAAAAOAAAO"),vr(Tt,9919,"EA=="),vr(Tt,9931,"DwAAAAAPAAAAAAkQAAAAAAAQAAAQAAASAAAAEhIS"),vr(Tt,9986,"EgAAABISEgAAAAAAAAk="),vr(Tt,10035,"Cw=="),vr(Tt,10047,"CgAAAAAKAAAAAAkLAAAAAAALAAAL"),vr(Tt,10093,"DA=="),vr(Tt,10105,"DAAAAAAMAAAAAAkMAAAAAAAMAAAMAAAwMTIzNDU2Nzg5QUJDREVG+Cg="),vr(Tt,10160,"4BQAAOQUAADpFAAA7xQAAMAnAADEJwAAbBkAAOAdAABfHwAAXyIAANgnAADcJwAA4CcAAOQnAADoJwAA7CcAAPAnAACXAAAAmAAAAJkAAACaAAAAmwAAAJw="),vr(Tt,10428,"8Cw="),vr(Tt,10488,"BQ=="),vr(Tt,10500,"nQ=="),vr(Tt,10524,"ngAAAJ8AAAAQLQ=="),vr(Tt,10548,"Ag=="),vr(Tt,10563,"//////8="),Mt({Int8Array,Int16Array,Int32Array,Uint8Array,Uint16Array,Uint32Array,Float32Array,Float64Array,NaN:NaN,Infinity:1/0,Math},ke,Ye.buffer)}(Gl,K,se)},instantiate:function(R,W){return{then:function(ae){var ke=new ee.Module(R);ae({instance:new ee.Instance(ke)})}}},RuntimeError:Error};X=[],typeof ee!="object"&&si("no native wasm support detected");var K,se=new ee.Table({initial:160,maximum:160,element:"anyfunc"}),ce=!1;function _e(R,W){R||si("Assertion failed: "+W)}function pe(R){var W=e["_"+R];return _e(W,"Cannot call unknown function "+R+", make sure it is exported"),W}function Ge(R,W,ae,ke,Ye){var dt={string:function(cn){var In=0;if(cn!=null&&cn!==0){var et=(cn.length<<2)+1;In=mu(et),_t(cn,In,et)}return In},array:function(cn){var In=mu(cn.length);return $e(cn,In),In}};function Mt(cn){return W==="string"?Fe(cn):W==="boolean"?Boolean(cn):cn}var Tt=pe(R),wr=[],pr=0;if(ke)for(var vr=0;vr<ke.length;vr++){var ar=dt[ae[vr]];ar?(pr===0&&(pr=du()),wr[vr]=ar(ke[vr])):wr[vr]=ke[vr]}var $r=Tt.apply(null,wr);return $r=Mt($r),pr!==0&&_l(pr),$r}function We(R,W,ae,ke){ae=ae||[];var Ye=ae.every(function(Mt){return Mt==="number"}),dt=W!=="string";return dt&&Ye&&!ke?pe(R):function(){return Ge(R,W,ae,arguments)}}var Ae=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0;function Ie(R,W,ae){for(var ke=W+ae,Ye=W;R[Ye]&&!(Ye>=ke);)++Ye;if(Ye-W>16&&R.subarray&&Ae)return Ae.decode(R.subarray(W,Ye));for(var dt="";W<Ye;){var Mt=R[W++];if(!(Mt&128)){dt+=String.fromCharCode(Mt);continue}var Tt=R[W++]&63;if((Mt&224)==192){dt+=String.fromCharCode((Mt&31)<<6|Tt);continue}var wr=R[W++]&63;if((Mt&240)==224?Mt=(Mt&15)<<12|Tt<<6|wr:Mt=(Mt&7)<<18|Tt<<12|wr<<6|R[W++]&63,Mt<65536)dt+=String.fromCharCode(Mt);else{var pr=Mt-65536;dt+=String.fromCharCode(55296|pr>>10,56320|pr&1023)}}return dt}function Fe(R,W){return R?Ie(xe,R,W):""}function ot(R,W,ae,ke){if(!(ke>0))return 0;for(var Ye=ae,dt=ae+ke-1,Mt=0;Mt<R.length;++Mt){var Tt=R.charCodeAt(Mt);if(Tt>=55296&&Tt<=57343){var wr=R.charCodeAt(++Mt);Tt=65536+((Tt&1023)<<10)|wr&1023}if(Tt<=127){if(ae>=dt)break;W[ae++]=Tt}else if(Tt<=2047){if(ae+1>=dt)break;W[ae++]=192|Tt>>6,W[ae++]=128|Tt&63}else if(Tt<=65535){if(ae+2>=dt)break;W[ae++]=224|Tt>>12,W[ae++]=128|Tt>>6&63,W[ae++]=128|Tt&63}else{if(ae+3>=dt)break;W[ae++]=240|Tt>>18,W[ae++]=128|Tt>>12&63,W[ae++]=128|Tt>>6&63,W[ae++]=128|Tt&63}}return W[ae]=0,ae-Ye}function _t(R,W,ae){return ot(R,xe,W,ae)}function ht(R){for(var W=0,ae=0;ae<R.length;++ae){var ke=R.charCodeAt(ae);ke>=55296&&ke<=57343&&(ke=65536+((ke&1023)<<10)|R.charCodeAt(++ae)&1023),ke<=127?++W:ke<=2047?W+=2:ke<=65535?W+=3:W+=4}return W}typeof TextDecoder<"u"&&new TextDecoder("utf-16le");function $e(R,W){He.set(R,W)}var ut=65536;function bt(R,W){return R%W>0&&(R+=W-R%W),R}var Ze,He,xe,Ne,Pe,ft,At;function Pt(R){Ze=R,e.HEAP8=He=new Int8Array(R),e.HEAP16=Ne=new Int16Array(R),e.HEAP32=Pe=new Int32Array(R),e.HEAPU8=xe=new Uint8Array(R),e.HEAPU16=new Uint16Array(R),e.HEAPU32=ft=new Uint32Array(R),e.HEAPF32=At=new Float32Array(R),e.HEAPF64=new Float64Array(R)}var Kt=5255072,$t=12032,br=e.INITIAL_MEMORY||67108864;e.wasmMemory?K=e.wasmMemory:K=new ee.Memory({initial:br/ut,maximum:2147483648/ut}),K&&(Ze=K.buffer),br=Ze.byteLength,Pt(Ze),Pe[$t>>2]=Kt;function Gt(R){for(;R.length>0;){var W=R.shift();if(typeof W=="function"){W(e);continue}var ae=W.func;typeof ae=="number"?W.arg===void 0?e.dynCall_v(ae):e.dynCall_vi(ae,W.arg):ae(W.arg===void 0?null:W.arg)}}var Rr=[],Mr=[],Kr=[],St=[];function ct(){if(e.preRun)for(typeof e.preRun=="function"&&(e.preRun=[e.preRun]);e.preRun.length;)Ur(e.preRun.shift());Gt(Rr)}function Or(){!e.noFSInit&&!ze.init.initialized&&ze.init(),Gt(Mr)}function ln(){ze.ignorePermissions=!1,Gt(Kr)}function Wt(){if(e.postRun)for(typeof e.postRun=="function"&&(e.postRun=[e.postRun]);e.postRun.length;)mn(e.postRun.shift());Gt(St)}function Ur(R){Rr.unshift(R)}function mn(R){St.unshift(R)}if((!Math.imul||Math.imul(4294967295,5)!==-5)&&(Math.imul=function(W,ae){var ke=W>>>16,Ye=W&65535,dt=ae>>>16,Mt=ae&65535;return Ye*Mt+(ke*Mt+Ye*dt<<16)|0}),!Math.fround){var en=new Float32Array(1);Math.fround=function(R){return en[0]=R,en[0]}}Math.clz32||(Math.clz32=function(R){var W=32,ae=R>>16;return ae&&(W-=16,R=ae),ae=R>>8,ae&&(W-=8,R=ae),ae=R>>4,ae&&(W-=4,R=ae),ae=R>>2,ae&&(W-=2,R=ae),ae=R>>1,ae?W-2:W-R}),Math.trunc||(Math.trunc=function(R){return R<0?Math.ceil(R):Math.floor(R)});var On=Math.abs,Zn=Math.ceil,ai=Math.floor,_i=Math.min,hi=0,yr=null;function Vr(R){return R}function wi(R){hi++,e.monitorRunDependencies&&e.monitorRunDependencies(hi)}function xn(R){if(hi--,e.monitorRunDependencies&&e.monitorRunDependencies(hi),hi==0&&yr){var W=yr;yr=null,W()}}e.preloadedImages={},e.preloadedAudios={};function si(R){e.onAbort&&e.onAbort(R),R+="",E(R),ce=!0,R="abort("+R+"). Build with -s ASSERTIONS=1 for more info.";var W=new ee.RuntimeError(R);throw W}function fr(R,W){return String.prototype.startsWith?R.startsWith(W):R.indexOf(W)===0}var or="data:application/octet-stream;base64,";function Yr(R){return fr(R,or)}var un="webp.wasm";Yr(un)||(un=c(un));function Nr(){try{if(X)return new Uint8Array(X);var R=yl(un);if(R)return R;if(!v)throw"both async and sync fetching of the wasm failed"}catch(W){si(W)}}function pn(){return!X&&o&&typeof fetch=="function"?fetch(un,{credentials:"same-origin"}).then(function(R){if(!R.ok)throw"failed to load wasm binary file at '"+un+"'";return R.arrayBuffer()}).catch(function(){return Nr()}):t.resolve().then(Nr)}function Yn(){var R={env:Gl,wasi_snapshot_preview1:Gl};function W(Mt,Tt){var wr=Mt.exports;e.asm=wr,xn()}wi();function ae(Mt){W(Mt.instance)}function ke(Mt){return pn().then(function(Tt){return ee.instantiate(Tt,R)}).then(Mt,function(Tt){E("failed to asynchronously prepare wasm: "+Tt),si(Tt)})}function Ye(){if(!X&&typeof ee.instantiateStreaming=="function"&&!Yr(un)&&typeof fetch=="function")fetch(un,{credentials:"same-origin"}).then(function(Mt){var Tt=ee.instantiateStreaming(Mt,R);return Tt.then(ae,function(wr){return E("wasm streaming compile failed: "+wr),E("falling back to ArrayBuffer instantiation"),ke(ae)})});else return ke(ae)}if(e.instantiateWasm)try{var dt=e.instantiateWasm(R,W);return dt}catch(Mt){return E("Module.instantiateWasm callback failed with error: "+Mt),!1}return Ye(),{}}var ci,No;Mr.push({func:function(){qu()}});function gi(R){return R}function co(R){var W=/\b_Z[\w\d_]+/g;return R.replace(W,function(ae){var ke=ae;return ae===ke?ae:ke+" ["+ae+"]"})}function li(){var R=new Error;if(!R.stack){try{throw new Error}catch(W){R=W}if(!R.stack)return"(no stack trace available)"}return R.stack.toString()}function to(){var R=li();return e.extraStackTrace&&(R+=`
`+e.extraStackTrace()),co(R)}function yo(R){return Pe[vl()>>2]=R,R}var pi={splitPath:function(R){var W=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/;return W.exec(R).slice(1)},normalizeArray:function(R,W){for(var ae=0,ke=R.length-1;ke>=0;ke--){var Ye=R[ke];Ye==="."?R.splice(ke,1):Ye===".."?(R.splice(ke,1),ae++):ae&&(R.splice(ke,1),ae--)}if(W)for(;ae;ae--)R.unshift("..");return R},normalize:function(R){var W=R.charAt(0)==="/",ae=R.substr(-1)==="/";return R=pi.normalizeArray(R.split("/").filter(function(ke){return!!ke}),!W).join("/"),!R&&!W&&(R="."),R&&ae&&(R+="/"),(W?"/":"")+R},dirname:function(R){var W=pi.splitPath(R),ae=W[0],ke=W[1];return!ae&&!ke?".":(ke&&(ke=ke.substr(0,ke.length-1)),ae+ke)},basename:function(R){if(R==="/")return"/";R=pi.normalize(R),R=R.replace(/\/$/,"");var W=R.lastIndexOf("/");return W===-1?R:R.substr(W+1)},extname:function(R){return pi.splitPath(R)[3]},join:function(){var R=Array.prototype.slice.call(arguments,0);return pi.normalize(R.join("/"))},join2:function(R,W){return pi.normalize(R+"/"+W)}},Ti={resolve:function(){for(var R="",W=!1,ae=arguments.length-1;ae>=-1&&!W;ae--){var ke=ae>=0?arguments[ae]:ze.cwd();if(typeof ke!="string")throw new TypeError("Arguments to path.resolve must be strings");if(!ke)return"";R=ke+"/"+R,W=ke.charAt(0)==="/"}return R=pi.normalizeArray(R.split("/").filter(function(Ye){return!!Ye}),!W).join("/"),(W?"/":"")+R||"."},relative:function(R,W){R=Ti.resolve(R).substr(1),W=Ti.resolve(W).substr(1);function ae(pr){for(var vr=0;vr<pr.length&&pr[vr]==="";vr++);for(var ar=pr.length-1;ar>=0&&pr[ar]==="";ar--);return vr>ar?[]:pr.slice(vr,ar-vr+1)}for(var ke=ae(R.split("/")),Ye=ae(W.split("/")),dt=Math.min(ke.length,Ye.length),Mt=dt,Tt=0;Tt<dt;Tt++)if(ke[Tt]!==Ye[Tt]){Mt=Tt;break}for(var wr=[],Tt=Mt;Tt<ke.length;Tt++)wr.push("..");return wr=wr.concat(Ye.slice(Mt)),wr.join("/")}},Xo={ttys:[],init:function(){},shutdown:function(){},register:function(R,W){Xo.ttys[R]={input:[],output:[],ops:W},ze.registerDevice(R,Xo.stream_ops)},stream_ops:{open:function(R){var W=Xo.ttys[R.node.rdev];if(!W)throw new ze.ErrnoError(43);R.tty=W,R.seekable=!1},close:function(R){R.tty.ops.flush(R.tty)},flush:function(R){R.tty.ops.flush(R.tty)},read:function(R,W,ae,ke,Ye){if(!R.tty||!R.tty.ops.get_char)throw new ze.ErrnoError(60);for(var dt=0,Mt=0;Mt<ke;Mt++){var Tt;try{Tt=R.tty.ops.get_char(R.tty)}catch{throw new ze.ErrnoError(29)}if(Tt===void 0&&dt===0)throw new ze.ErrnoError(6);if(Tt==null)break;dt++,W[ae+Mt]=Tt}return dt&&(R.node.timestamp=Date.now()),dt},write:function(R,W,ae,ke,Ye){if(!R.tty||!R.tty.ops.put_char)throw new ze.ErrnoError(60);try{for(var dt=0;dt<ke;dt++)R.tty.ops.put_char(R.tty,W[ae+dt])}catch{throw new ze.ErrnoError(29)}return ke&&(R.node.timestamp=Date.now()),dt}},default_tty_ops:{get_char:function(R){if(!R.input.length){var W=null;if(typeof window<"u"&&typeof window.prompt=="function"?(W=window.prompt("Input: "),W!==null&&(W+=`
`)):typeof readline=="function"&&(W=readline(),W!==null&&(W+=`
`)),!W)return null;R.input=$l(W,!0)}return R.input.shift()},put_char:function(R,W){W===null||W===10?(w(Ie(R.output,0)),R.output=[]):W!=0&&R.output.push(W)},flush:function(R){R.output&&R.output.length>0&&(w(Ie(R.output,0)),R.output=[])}},default_tty1_ops:{put_char:function(R,W){W===null||W===10?(E(Ie(R.output,0)),R.output=[]):W!=0&&R.output.push(W)},flush:function(R){R.output&&R.output.length>0&&(E(Ie(R.output,0)),R.output=[])}}},vn={ops_table:null,mount:function(R){return vn.createNode(null,"/",16895,0)},createNode:function(R,W,ae,ke){if(ze.isBlkdev(ae)||ze.isFIFO(ae))throw new ze.ErrnoError(63);vn.ops_table||(vn.ops_table={dir:{node:{getattr:vn.node_ops.getattr,setattr:vn.node_ops.setattr,lookup:vn.node_ops.lookup,mknod:vn.node_ops.mknod,rename:vn.node_ops.rename,unlink:vn.node_ops.unlink,rmdir:vn.node_ops.rmdir,readdir:vn.node_ops.readdir,symlink:vn.node_ops.symlink},stream:{llseek:vn.stream_ops.llseek}},file:{node:{getattr:vn.node_ops.getattr,setattr:vn.node_ops.setattr},stream:{llseek:vn.stream_ops.llseek,read:vn.stream_ops.read,write:vn.stream_ops.write,allocate:vn.stream_ops.allocate,mmap:vn.stream_ops.mmap,msync:vn.stream_ops.msync}},link:{node:{getattr:vn.node_ops.getattr,setattr:vn.node_ops.setattr,readlink:vn.node_ops.readlink},stream:{}},chrdev:{node:{getattr:vn.node_ops.getattr,setattr:vn.node_ops.setattr},stream:ze.chrdev_stream_ops}});var Ye=ze.createNode(R,W,ae,ke);return ze.isDir(Ye.mode)?(Ye.node_ops=vn.ops_table.dir.node,Ye.stream_ops=vn.ops_table.dir.stream,Ye.contents={}):ze.isFile(Ye.mode)?(Ye.node_ops=vn.ops_table.file.node,Ye.stream_ops=vn.ops_table.file.stream,Ye.usedBytes=0,Ye.contents=null):ze.isLink(Ye.mode)?(Ye.node_ops=vn.ops_table.link.node,Ye.stream_ops=vn.ops_table.link.stream):ze.isChrdev(Ye.mode)&&(Ye.node_ops=vn.ops_table.chrdev.node,Ye.stream_ops=vn.ops_table.chrdev.stream),Ye.timestamp=Date.now(),R&&(R.contents[W]=Ye),Ye},getFileDataAsRegularArray:function(R){if(R.contents&&R.contents.subarray){for(var W=[],ae=0;ae<R.usedBytes;++ae)W.push(R.contents[ae]);return W}return R.contents},getFileDataAsTypedArray:function(R){return R.contents?R.contents.subarray?R.contents.subarray(0,R.usedBytes):new Uint8Array(R.contents):new Uint8Array(0)},expandFileStorage:function(R,W){var ae=R.contents?R.contents.length:0;if(!(ae>=W)){var ke=1024*1024;W=Math.max(W,ae*(ae<ke?2:1.125)>>>0),ae!=0&&(W=Math.max(W,256));var Ye=R.contents;R.contents=new Uint8Array(W),R.usedBytes>0&&R.contents.set(Ye.subarray(0,R.usedBytes),0)}},resizeFileStorage:function(R,W){if(R.usedBytes!=W){if(W==0){R.contents=null,R.usedBytes=0;return}if(!R.contents||R.contents.subarray){var ae=R.contents;R.contents=new Uint8Array(W),ae&&R.contents.set(ae.subarray(0,Math.min(W,R.usedBytes))),R.usedBytes=W;return}if(R.contents||(R.contents=[]),R.contents.length>W)R.contents.length=W;else for(;R.contents.length<W;)R.contents.push(0);R.usedBytes=W}},node_ops:{getattr:function(R){var W={};return W.dev=ze.isChrdev(R.mode)?R.id:1,W.ino=R.id,W.mode=R.mode,W.nlink=1,W.uid=0,W.gid=0,W.rdev=R.rdev,ze.isDir(R.mode)?W.size=4096:ze.isFile(R.mode)?W.size=R.usedBytes:ze.isLink(R.mode)?W.size=R.link.length:W.size=0,W.atime=new Date(R.timestamp),W.mtime=new Date(R.timestamp),W.ctime=new Date(R.timestamp),W.blksize=4096,W.blocks=Math.ceil(W.size/W.blksize),W},setattr:function(R,W){W.mode!==void 0&&(R.mode=W.mode),W.timestamp!==void 0&&(R.timestamp=W.timestamp),W.size!==void 0&&vn.resizeFileStorage(R,W.size)},lookup:function(R,W){throw ze.genericErrors[44]},mknod:function(R,W,ae,ke){return vn.createNode(R,W,ae,ke)},rename:function(R,W,ae){if(ze.isDir(R.mode)){var ke;try{ke=ze.lookupNode(W,ae)}catch{}if(ke)for(var Ye in ke.contents)throw new ze.ErrnoError(55)}delete R.parent.contents[R.name],R.name=ae,W.contents[ae]=R,R.parent=W},unlink:function(R,W){delete R.contents[W]},rmdir:function(R,W){var ae=ze.lookupNode(R,W);for(var ke in ae.contents)throw new ze.ErrnoError(55);delete R.contents[W]},readdir:function(R){var W=[".",".."];for(var ae in R.contents)R.contents.hasOwnProperty(ae)&&W.push(ae);return W},symlink:function(R,W,ae){var ke=vn.createNode(R,W,41471,0);return ke.link=ae,ke},readlink:function(R){if(!ze.isLink(R.mode))throw new ze.ErrnoError(28);return R.link}},stream_ops:{read:function(R,W,ae,ke,Ye){var dt=R.node.contents;if(Ye>=R.node.usedBytes)return 0;var Mt=Math.min(R.node.usedBytes-Ye,ke);if(Mt>8&&dt.subarray)W.set(dt.subarray(Ye,Ye+Mt),ae);else for(var Tt=0;Tt<Mt;Tt++)W[ae+Tt]=dt[Ye+Tt];return Mt},write:function(R,W,ae,ke,Ye,dt){if(W.buffer===He.buffer&&(dt=!1),!ke)return 0;var Mt=R.node;if(Mt.timestamp=Date.now(),W.subarray&&(!Mt.contents||Mt.contents.subarray)){if(dt)return Mt.contents=W.subarray(ae,ae+ke),Mt.usedBytes=ke,ke;if(Mt.usedBytes===0&&Ye===0)return Mt.contents=W.slice(ae,ae+ke),Mt.usedBytes=ke,ke;if(Ye+ke<=Mt.usedBytes)return Mt.contents.set(W.subarray(ae,ae+ke),Ye),ke}if(vn.expandFileStorage(Mt,Ye+ke),Mt.contents.subarray&&W.subarray)Mt.contents.set(W.subarray(ae,ae+ke),Ye);else for(var Tt=0;Tt<ke;Tt++)Mt.contents[Ye+Tt]=W[ae+Tt];return Mt.usedBytes=Math.max(Mt.usedBytes,Ye+ke),ke},llseek:function(R,W,ae){var ke=W;if(ae===1?ke+=R.position:ae===2&&ze.isFile(R.node.mode)&&(ke+=R.node.usedBytes),ke<0)throw new ze.ErrnoError(28);return ke},allocate:function(R,W,ae){vn.expandFileStorage(R.node,W+ae),R.node.usedBytes=Math.max(R.node.usedBytes,W+ae)},mmap:function(R,W,ae,ke,Ye,dt){if(_e(W===0),!ze.isFile(R.node.mode))throw new ze.ErrnoError(43);var Mt,Tt,wr=R.node.contents;if(!(dt&2)&&wr.buffer===Ze)Tt=!1,Mt=wr.byteOffset;else{if((ke>0||ke+ae<wr.length)&&(wr.subarray?wr=wr.subarray(ke,ke+ae):wr=Array.prototype.slice.call(wr,ke,ke+ae)),Tt=!0,Mt=ze.mmapAlloc(ae),!Mt)throw new ze.ErrnoError(48);He.set(wr,Mt)}return{ptr:Mt,allocated:Tt}},msync:function(R,W,ae,ke,Ye){if(!ze.isFile(R.node.mode))throw new ze.ErrnoError(43);return Ye&2||vn.stream_ops.write(R,W,0,ke,ae,!1),0}}},ze={root:null,mounts:[],devices:{},streams:[],nextInode:1,nameTable:null,currentPath:"/",initialized:!1,ignorePermissions:!0,trackingDelegate:{},tracking:{openFlags:{READ:1,WRITE:2}},ErrnoError:null,genericErrors:{},filesystems:null,syncFSRequests:0,handleFSError:function(R){if(!(R instanceof ze.ErrnoError))throw R+" : "+to();return yo(R.errno)},lookupPath:function(R,W){if(R=Ti.resolve(ze.cwd(),R),W=W||{},!R)return{path:"",node:null};var ae={follow_mount:!0,recurse_count:0};for(var ke in ae)W[ke]===void 0&&(W[ke]=ae[ke]);if(W.recurse_count>8)throw new ze.ErrnoError(32);for(var Ye=pi.normalizeArray(R.split("/").filter(function($r){return!!$r}),!1),dt=ze.root,Mt="/",Tt=0;Tt<Ye.length;Tt++){var wr=Tt===Ye.length-1;if(wr&&W.parent)break;if(dt=ze.lookupNode(dt,Ye[Tt]),Mt=pi.join2(Mt,Ye[Tt]),ze.isMountpoint(dt)&&(!wr||wr&&W.follow_mount)&&(dt=dt.mounted.root),!wr||W.follow)for(var pr=0;ze.isLink(dt.mode);){var vr=ze.readlink(Mt);Mt=Ti.resolve(pi.dirname(Mt),vr);var ar=ze.lookupPath(Mt,{recurse_count:W.recurse_count});if(dt=ar.node,pr++>40)throw new ze.ErrnoError(32)}}return{path:Mt,node:dt}},getPath:function(R){for(var W;;){if(ze.isRoot(R)){var ae=R.mount.mountpoint;return W?ae[ae.length-1]!=="/"?ae+"/"+W:ae+W:ae}W=W?R.name+"/"+W:R.name,R=R.parent}},hashName:function(R,W){for(var ae=0,ke=0;ke<W.length;ke++)ae=(ae<<5)-ae+W.charCodeAt(ke)|0;return(R+ae>>>0)%ze.nameTable.length},hashAddNode:function(R){var W=ze.hashName(R.parent.id,R.name);R.name_next=ze.nameTable[W],ze.nameTable[W]=R},hashRemoveNode:function(R){var W=ze.hashName(R.parent.id,R.name);if(ze.nameTable[W]===R)ze.nameTable[W]=R.name_next;else for(var ae=ze.nameTable[W];ae;){if(ae.name_next===R){ae.name_next=R.name_next;break}ae=ae.name_next}},lookupNode:function(R,W){var ae=ze.mayLookup(R);if(ae)throw new ze.ErrnoError(ae,R);for(var ke=ze.hashName(R.id,W),Ye=ze.nameTable[ke];Ye;Ye=Ye.name_next){var dt=Ye.name;if(Ye.parent.id===R.id&&dt===W)return Ye}return ze.lookup(R,W)},createNode:function(R,W,ae,ke){var Ye=new ze.FSNode(R,W,ae,ke);return ze.hashAddNode(Ye),Ye},destroyNode:function(R){ze.hashRemoveNode(R)},isRoot:function(R){return R===R.parent},isMountpoint:function(R){return!!R.mounted},isFile:function(R){return(R&61440)===32768},isDir:function(R){return(R&61440)===16384},isLink:function(R){return(R&61440)===40960},isChrdev:function(R){return(R&61440)===8192},isBlkdev:function(R){return(R&61440)===24576},isFIFO:function(R){return(R&61440)===4096},isSocket:function(R){return(R&49152)===49152},flagModes:{r:0,rs:1052672,"r+":2,w:577,wx:705,xw:705,"w+":578,"wx+":706,"xw+":706,a:1089,ax:1217,xa:1217,"a+":1090,"ax+":1218,"xa+":1218},modeStringToFlags:function(R){var W=ze.flagModes[R];if(typeof W>"u")throw new Error("Unknown file open mode: "+R);return W},flagsToPermissionString:function(R){var W=["r","w","rw"][R&3];return R&512&&(W+="w"),W},nodePermissions:function(R,W){return ze.ignorePermissions?0:W.indexOf("r")!==-1&&!(R.mode&292)||W.indexOf("w")!==-1&&!(R.mode&146)||W.indexOf("x")!==-1&&!(R.mode&73)?2:0},mayLookup:function(R){var W=ze.nodePermissions(R,"x");return W||(R.node_ops.lookup?0:2)},mayCreate:function(R,W){try{var ae=ze.lookupNode(R,W);return 20}catch{}return ze.nodePermissions(R,"wx")},mayDelete:function(R,W,ae){var ke;try{ke=ze.lookupNode(R,W)}catch(dt){return dt.errno}var Ye=ze.nodePermissions(R,"wx");if(Ye)return Ye;if(ae){if(!ze.isDir(ke.mode))return 54;if(ze.isRoot(ke)||ze.getPath(ke)===ze.cwd())return 10}else if(ze.isDir(ke.mode))return 31;return 0},mayOpen:function(R,W){return R?ze.isLink(R.mode)?32:ze.isDir(R.mode)&&(ze.flagsToPermissionString(W)!=="r"||W&512)?31:ze.nodePermissions(R,ze.flagsToPermissionString(W)):44},MAX_OPEN_FDS:4096,nextfd:function(R,W){R=R||0,W=W||ze.MAX_OPEN_FDS;for(var ae=R;ae<=W;ae++)if(!ze.streams[ae])return ae;throw new ze.ErrnoError(33)},getStream:function(R){return ze.streams[R]},createStream:function(R,W,ae){ze.FSStream||(ze.FSStream=function(){},ze.FSStream.prototype={object:{get:function(){return this.node},set:function(Mt){this.node=Mt}},isRead:{get:function(){return(this.flags&2097155)!==1}},isWrite:{get:function(){return(this.flags&2097155)!==0}},isAppend:{get:function(){return this.flags&1024}}});var ke=new ze.FSStream;for(var Ye in R)ke[Ye]=R[Ye];R=ke;var dt=ze.nextfd(W,ae);return R.fd=dt,ze.streams[dt]=R,R},closeStream:function(R){ze.streams[R]=null},chrdev_stream_ops:{open:function(R){var W=ze.getDevice(R.node.rdev);R.stream_ops=W.stream_ops,R.stream_ops.open&&R.stream_ops.open(R)},llseek:function(){throw new ze.ErrnoError(70)}},major:function(R){return R>>8},minor:function(R){return R&255},makedev:function(R,W){return R<<8|W},registerDevice:function(R,W){ze.devices[R]={stream_ops:W}},getDevice:function(R){return ze.devices[R]},getMounts:function(R){for(var W=[],ae=[R];ae.length;){var ke=ae.pop();W.push(ke),ae.push.apply(ae,ke.mounts)}return W},syncfs:function(R,W){typeof R=="function"&&(W=R,R=!1),ze.syncFSRequests++,ze.syncFSRequests>1&&E("warning: "+ze.syncFSRequests+" FS.syncfs operations in flight at once, probably just doing extra work");var ae=ze.getMounts(ze.root.mount),ke=0;function Ye(Mt){return ze.syncFSRequests--,W(Mt)}function dt(Mt){if(Mt)return dt.errored?void 0:(dt.errored=!0,Ye(Mt));++ke>=ae.length&&Ye(null)}ae.forEach(function(Mt){if(!Mt.type.syncfs)return dt(null);Mt.type.syncfs(Mt,R,dt)})},mount:function(R,W,ae){var ke=ae==="/",Ye=!ae,dt;if(ke&&ze.root)throw new ze.ErrnoError(10);if(!ke&&!Ye){var Mt=ze.lookupPath(ae,{follow_mount:!1});if(ae=Mt.path,dt=Mt.node,ze.isMountpoint(dt))throw new ze.ErrnoError(10);if(!ze.isDir(dt.mode))throw new ze.ErrnoError(54)}var Tt={type:R,opts:W,mountpoint:ae,mounts:[]},wr=R.mount(Tt);return wr.mount=Tt,Tt.root=wr,ke?ze.root=wr:dt&&(dt.mounted=Tt,dt.mount&&dt.mount.mounts.push(Tt)),wr},unmount:function(R){var W=ze.lookupPath(R,{follow_mount:!1});if(!ze.isMountpoint(W.node))throw new ze.ErrnoError(28);var ae=W.node,ke=ae.mounted,Ye=ze.getMounts(ke);Object.keys(ze.nameTable).forEach(function(Mt){for(var Tt=ze.nameTable[Mt];Tt;){var wr=Tt.name_next;Ye.indexOf(Tt.mount)!==-1&&ze.destroyNode(Tt),Tt=wr}}),ae.mounted=null;var dt=ae.mount.mounts.indexOf(ke);ae.mount.mounts.splice(dt,1)},lookup:function(R,W){return R.node_ops.lookup(R,W)},mknod:function(R,W,ae){var ke=ze.lookupPath(R,{parent:!0}),Ye=ke.node,dt=pi.basename(R);if(!dt||dt==="."||dt==="..")throw new ze.ErrnoError(28);var Mt=ze.mayCreate(Ye,dt);if(Mt)throw new ze.ErrnoError(Mt);if(!Ye.node_ops.mknod)throw new ze.ErrnoError(63);return Ye.node_ops.mknod(Ye,dt,W,ae)},create:function(R,W){return W=W!==void 0?W:438,W&=4095,W|=32768,ze.mknod(R,W,0)},mkdir:function(R,W){return W=W!==void 0?W:511,W&=1023,W|=16384,ze.mknod(R,W,0)},mkdirTree:function(R,W){for(var ae=R.split("/"),ke="",Ye=0;Ye<ae.length;++Ye)if(ae[Ye]){ke+="/"+ae[Ye];try{ze.mkdir(ke,W)}catch(dt){if(dt.errno!=20)throw dt}}},mkdev:function(R,W,ae){return typeof ae>"u"&&(ae=W,W=438),W|=8192,ze.mknod(R,W,ae)},symlink:function(R,W){if(!Ti.resolve(R))throw new ze.ErrnoError(44);var ae=ze.lookupPath(W,{parent:!0}),ke=ae.node;if(!ke)throw new ze.ErrnoError(44);var Ye=pi.basename(W),dt=ze.mayCreate(ke,Ye);if(dt)throw new ze.ErrnoError(dt);if(!ke.node_ops.symlink)throw new ze.ErrnoError(63);return ke.node_ops.symlink(ke,Ye,R)},rename:function(R,W){var ae=pi.dirname(R),ke=pi.dirname(W),Ye=pi.basename(R),dt=pi.basename(W),Mt,Tt,wr;if(Mt=ze.lookupPath(R,{parent:!0}),Tt=Mt.node,Mt=ze.lookupPath(W,{parent:!0}),wr=Mt.node,!Tt||!wr)throw new ze.ErrnoError(44);if(Tt.mount!==wr.mount)throw new ze.ErrnoError(75);var pr=ze.lookupNode(Tt,Ye),vr=Ti.relative(R,ke);if(vr.charAt(0)!==".")throw new ze.ErrnoError(28);if(vr=Ti.relative(W,ae),vr.charAt(0)!==".")throw new ze.ErrnoError(55);var ar;try{ar=ze.lookupNode(wr,dt)}catch{}if(pr!==ar){var $r=ze.isDir(pr.mode),cn=ze.mayDelete(Tt,Ye,$r);if(cn)throw new ze.ErrnoError(cn);if(cn=ar?ze.mayDelete(wr,dt,$r):ze.mayCreate(wr,dt),cn)throw new ze.ErrnoError(cn);if(!Tt.node_ops.rename)throw new ze.ErrnoError(63);if(ze.isMountpoint(pr)||ar&&ze.isMountpoint(ar))throw new ze.ErrnoError(10);if(wr!==Tt&&(cn=ze.nodePermissions(Tt,"w"),cn))throw new ze.ErrnoError(cn);try{ze.trackingDelegate.willMovePath&&ze.trackingDelegate.willMovePath(R,W)}catch(In){E("FS.trackingDelegate['willMovePath']('"+R+"', '"+W+"') threw an exception: "+In.message)}ze.hashRemoveNode(pr);try{Tt.node_ops.rename(pr,wr,dt)}catch(In){throw In}finally{ze.hashAddNode(pr)}try{ze.trackingDelegate.onMovePath&&ze.trackingDelegate.onMovePath(R,W)}catch(In){E("FS.trackingDelegate['onMovePath']('"+R+"', '"+W+"') threw an exception: "+In.message)}}},rmdir:function(R){var W=ze.lookupPath(R,{parent:!0}),ae=W.node,ke=pi.basename(R),Ye=ze.lookupNode(ae,ke),dt=ze.mayDelete(ae,ke,!0);if(dt)throw new ze.ErrnoError(dt);if(!ae.node_ops.rmdir)throw new ze.ErrnoError(63);if(ze.isMountpoint(Ye))throw new ze.ErrnoError(10);try{ze.trackingDelegate.willDeletePath&&ze.trackingDelegate.willDeletePath(R)}catch(Mt){E("FS.trackingDelegate['willDeletePath']('"+R+"') threw an exception: "+Mt.message)}ae.node_ops.rmdir(ae,ke),ze.destroyNode(Ye);try{ze.trackingDelegate.onDeletePath&&ze.trackingDelegate.onDeletePath(R)}catch(Mt){E("FS.trackingDelegate['onDeletePath']('"+R+"') threw an exception: "+Mt.message)}},readdir:function(R){var W=ze.lookupPath(R,{follow:!0}),ae=W.node;if(!ae.node_ops.readdir)throw new ze.ErrnoError(54);return ae.node_ops.readdir(ae)},unlink:function(R){var W=ze.lookupPath(R,{parent:!0}),ae=W.node,ke=pi.basename(R),Ye=ze.lookupNode(ae,ke),dt=ze.mayDelete(ae,ke,!1);if(dt)throw new ze.ErrnoError(dt);if(!ae.node_ops.unlink)throw new ze.ErrnoError(63);if(ze.isMountpoint(Ye))throw new ze.ErrnoError(10);try{ze.trackingDelegate.willDeletePath&&ze.trackingDelegate.willDeletePath(R)}catch(Mt){E("FS.trackingDelegate['willDeletePath']('"+R+"') threw an exception: "+Mt.message)}ae.node_ops.unlink(ae,ke),ze.destroyNode(Ye);try{ze.trackingDelegate.onDeletePath&&ze.trackingDelegate.onDeletePath(R)}catch(Mt){E("FS.trackingDelegate['onDeletePath']('"+R+"') threw an exception: "+Mt.message)}},readlink:function(R){var W=ze.lookupPath(R),ae=W.node;if(!ae)throw new ze.ErrnoError(44);if(!ae.node_ops.readlink)throw new ze.ErrnoError(28);return Ti.resolve(ze.getPath(ae.parent),ae.node_ops.readlink(ae))},stat:function(R,W){var ae=ze.lookupPath(R,{follow:!W}),ke=ae.node;if(!ke)throw new ze.ErrnoError(44);if(!ke.node_ops.getattr)throw new ze.ErrnoError(63);return ke.node_ops.getattr(ke)},lstat:function(R){return ze.stat(R,!0)},chmod:function(R,W,ae){var ke;if(typeof R=="string"){var Ye=ze.lookupPath(R,{follow:!ae});ke=Ye.node}else ke=R;if(!ke.node_ops.setattr)throw new ze.ErrnoError(63);ke.node_ops.setattr(ke,{mode:W&4095|ke.mode&-4096,timestamp:Date.now()})},lchmod:function(R,W){ze.chmod(R,W,!0)},fchmod:function(R,W){var ae=ze.getStream(R);if(!ae)throw new ze.ErrnoError(8);ze.chmod(ae.node,W)},chown:function(R,W,ae,ke){var Ye;if(typeof R=="string"){var dt=ze.lookupPath(R,{follow:!ke});Ye=dt.node}else Ye=R;if(!Ye.node_ops.setattr)throw new ze.ErrnoError(63);Ye.node_ops.setattr(Ye,{timestamp:Date.now()})},lchown:function(R,W,ae){ze.chown(R,W,ae,!0)},fchown:function(R,W,ae){var ke=ze.getStream(R);if(!ke)throw new ze.ErrnoError(8);ze.chown(ke.node,W,ae)},truncate:function(R,W){if(W<0)throw new ze.ErrnoError(28);var ae;if(typeof R=="string"){var ke=ze.lookupPath(R,{follow:!0});ae=ke.node}else ae=R;if(!ae.node_ops.setattr)throw new ze.ErrnoError(63);if(ze.isDir(ae.mode))throw new ze.ErrnoError(31);if(!ze.isFile(ae.mode))throw new ze.ErrnoError(28);var Ye=ze.nodePermissions(ae,"w");if(Ye)throw new ze.ErrnoError(Ye);ae.node_ops.setattr(ae,{size:W,timestamp:Date.now()})},ftruncate:function(R,W){var ae=ze.getStream(R);if(!ae)throw new ze.ErrnoError(8);if(!(ae.flags&2097155))throw new ze.ErrnoError(28);ze.truncate(ae.node,W)},utime:function(R,W,ae){var ke=ze.lookupPath(R,{follow:!0}),Ye=ke.node;Ye.node_ops.setattr(Ye,{timestamp:Math.max(W,ae)})},open:function(R,W,ae,ke,Ye){if(R==="")throw new ze.ErrnoError(44);W=typeof W=="string"?ze.modeStringToFlags(W):W,ae=typeof ae>"u"?438:ae,W&64?ae=ae&4095|32768:ae=0;var dt;if(typeof R=="object")dt=R;else{R=pi.normalize(R);try{var Mt=ze.lookupPath(R,{follow:!(W&131072)});dt=Mt.node}catch{}}var Tt=!1;if(W&64)if(dt){if(W&128)throw new ze.ErrnoError(20)}else dt=ze.mknod(R,ae,0),Tt=!0;if(!dt)throw new ze.ErrnoError(44);if(ze.isChrdev(dt.mode)&&(W&=-513),W&65536&&!ze.isDir(dt.mode))throw new ze.ErrnoError(54);if(!Tt){var wr=ze.mayOpen(dt,W);if(wr)throw new ze.ErrnoError(wr)}W&512&&ze.truncate(dt,0),W&=-131713;var pr=ze.createStream({node:dt,path:ze.getPath(dt),flags:W,seekable:!0,position:0,stream_ops:dt.stream_ops,ungotten:[],error:!1},ke,Ye);pr.stream_ops.open&&pr.stream_ops.open(pr),e.logReadFiles&&!(W&1)&&(ze.readFiles||(ze.readFiles={}),R in ze.readFiles||(ze.readFiles[R]=1,E("FS.trackingDelegate error on read file: "+R)));try{if(ze.trackingDelegate.onOpenFile){var vr=0;(W&2097155)!==1&&(vr|=ze.tracking.openFlags.READ),W&2097155&&(vr|=ze.tracking.openFlags.WRITE),ze.trackingDelegate.onOpenFile(R,vr)}}catch(ar){E("FS.trackingDelegate['onOpenFile']('"+R+"', flags) threw an exception: "+ar.message)}return pr},close:function(R){if(ze.isClosed(R))throw new ze.ErrnoError(8);R.getdents&&(R.getdents=null);try{R.stream_ops.close&&R.stream_ops.close(R)}catch(W){throw W}finally{ze.closeStream(R.fd)}R.fd=null},isClosed:function(R){return R.fd===null},llseek:function(R,W,ae){if(ze.isClosed(R))throw new ze.ErrnoError(8);if(!R.seekable||!R.stream_ops.llseek)throw new ze.ErrnoError(70);if(ae!=0&&ae!=1&&ae!=2)throw new ze.ErrnoError(28);return R.position=R.stream_ops.llseek(R,W,ae),R.ungotten=[],R.position},read:function(R,W,ae,ke,Ye){if(ke<0||Ye<0)throw new ze.ErrnoError(28);if(ze.isClosed(R))throw new ze.ErrnoError(8);if((R.flags&2097155)===1)throw new ze.ErrnoError(8);if(ze.isDir(R.node.mode))throw new ze.ErrnoError(31);if(!R.stream_ops.read)throw new ze.ErrnoError(28);var dt=typeof Ye<"u";if(!dt)Ye=R.position;else if(!R.seekable)throw new ze.ErrnoError(70);var Mt=R.stream_ops.read(R,W,ae,ke,Ye);return dt||(R.position+=Mt),Mt},write:function(R,W,ae,ke,Ye,dt){if(ke<0||Ye<0)throw new ze.ErrnoError(28);if(ze.isClosed(R))throw new ze.ErrnoError(8);if(!(R.flags&2097155))throw new ze.ErrnoError(8);if(ze.isDir(R.node.mode))throw new ze.ErrnoError(31);if(!R.stream_ops.write)throw new ze.ErrnoError(28);R.seekable&&R.flags&1024&&ze.llseek(R,0,2);var Mt=typeof Ye<"u";if(!Mt)Ye=R.position;else if(!R.seekable)throw new ze.ErrnoError(70);var Tt=R.stream_ops.write(R,W,ae,ke,Ye,dt);Mt||(R.position+=Tt);try{R.path&&ze.trackingDelegate.onWriteToFile&&ze.trackingDelegate.onWriteToFile(R.path)}catch(wr){E("FS.trackingDelegate['onWriteToFile']('"+R.path+"') threw an exception: "+wr.message)}return Tt},allocate:function(R,W,ae){if(ze.isClosed(R))throw new ze.ErrnoError(8);if(W<0||ae<=0)throw new ze.ErrnoError(28);if(!(R.flags&2097155))throw new ze.ErrnoError(8);if(!ze.isFile(R.node.mode)&&!ze.isDir(R.node.mode))throw new ze.ErrnoError(43);if(!R.stream_ops.allocate)throw new ze.ErrnoError(138);R.stream_ops.allocate(R,W,ae)},mmap:function(R,W,ae,ke,Ye,dt){if(Ye&2&&!(dt&2)&&(R.flags&2097155)!==2)throw new ze.ErrnoError(2);if((R.flags&2097155)===1)throw new ze.ErrnoError(2);if(!R.stream_ops.mmap)throw new ze.ErrnoError(43);return R.stream_ops.mmap(R,W,ae,ke,Ye,dt)},msync:function(R,W,ae,ke,Ye){return!R||!R.stream_ops.msync?0:R.stream_ops.msync(R,W,ae,ke,Ye)},munmap:function(R){return 0},ioctl:function(R,W,ae){if(!R.stream_ops.ioctl)throw new ze.ErrnoError(59);return R.stream_ops.ioctl(R,W,ae)},readFile:function(R,W){if(W=W||{},W.flags=W.flags||"r",W.encoding=W.encoding||"binary",W.encoding!=="utf8"&&W.encoding!=="binary")throw new Error('Invalid encoding type "'+W.encoding+'"');var ae,ke=ze.open(R,W.flags),Ye=ze.stat(R),dt=Ye.size,Mt=new Uint8Array(dt);return ze.read(ke,Mt,0,dt,0),W.encoding==="utf8"?ae=Ie(Mt,0):W.encoding==="binary"&&(ae=Mt),ze.close(ke),ae},writeFile:function(R,W,ae){ae=ae||{},ae.flags=ae.flags||"w";var ke=ze.open(R,ae.flags,ae.mode);if(typeof W=="string"){var Ye=new Uint8Array(ht(W)+1),dt=ot(W,Ye,0,Ye.length);ze.write(ke,Ye,0,dt,void 0,ae.canOwn)}else if(ArrayBuffer.isView(W))ze.write(ke,W,0,W.byteLength,void 0,ae.canOwn);else throw new Error("Unsupported data type");ze.close(ke)},cwd:function(){return ze.currentPath},chdir:function(R){var W=ze.lookupPath(R,{follow:!0});if(W.node===null)throw new ze.ErrnoError(44);if(!ze.isDir(W.node.mode))throw new ze.ErrnoError(54);var ae=ze.nodePermissions(W.node,"x");if(ae)throw new ze.ErrnoError(ae);ze.currentPath=W.path},createDefaultDirectories:function(){ze.mkdir("/tmp"),ze.mkdir("/home"),ze.mkdir("/home/web_user")},createDefaultDevices:function(){ze.mkdir("/dev"),ze.registerDevice(ze.makedev(1,3),{read:function(){return 0},write:function(ae,ke,Ye,dt,Mt){return dt}}),ze.mkdev("/dev/null",ze.makedev(1,3)),Xo.register(ze.makedev(5,0),Xo.default_tty_ops),Xo.register(ze.makedev(6,0),Xo.default_tty1_ops),ze.mkdev("/dev/tty",ze.makedev(5,0)),ze.mkdev("/dev/tty1",ze.makedev(6,0));var R;if(typeof crypto=="object"&&typeof crypto.getRandomValues=="function"){var W=new Uint8Array(1);R=function(){return crypto.getRandomValues(W),W[0]}}R||(R=function(){si("random_device")}),ze.createDevice("/dev","random",R),ze.createDevice("/dev","urandom",R),ze.mkdir("/dev/shm"),ze.mkdir("/dev/shm/tmp")},createSpecialDirectories:function(){ze.mkdir("/proc"),ze.mkdir("/proc/self"),ze.mkdir("/proc/self/fd"),ze.mount({mount:function(){var R=ze.createNode("/proc/self","fd",16895,73);return R.node_ops={lookup:function(W,ae){var ke=+ae,Ye=ze.getStream(ke);if(!Ye)throw new ze.ErrnoError(8);var dt={parent:null,mount:{mountpoint:"fake"},node_ops:{readlink:function(){return Ye.path}}};return dt.parent=dt,dt}},R}},{},"/proc/self/fd")},createStandardStreams:function(){e.stdin?ze.createDevice("/dev","stdin",e.stdin):ze.symlink("/dev/tty","/dev/stdin"),e.stdout?ze.createDevice("/dev","stdout",null,e.stdout):ze.symlink("/dev/tty","/dev/stdout"),e.stderr?ze.createDevice("/dev","stderr",null,e.stderr):ze.symlink("/dev/tty1","/dev/stderr"),ze.open("/dev/stdin","r"),ze.open("/dev/stdout","w"),ze.open("/dev/stderr","w")},ensureErrnoError:function(){ze.ErrnoError||(ze.ErrnoError=function(W,ae){this.node=ae,this.setErrno=function(ke){this.errno=ke},this.setErrno(W),this.message="FS error"},ze.ErrnoError.prototype=new Error,ze.ErrnoError.prototype.constructor=ze.ErrnoError,[44].forEach(function(R){ze.genericErrors[R]=new ze.ErrnoError(R),ze.genericErrors[R].stack="<generic error, no stack>"}))},staticInit:function(){ze.ensureErrnoError(),ze.nameTable=new Array(4096),ze.mount(vn,{},"/"),ze.createDefaultDirectories(),ze.createDefaultDevices(),ze.createSpecialDirectories(),ze.filesystems={MEMFS:vn}},init:function(R,W,ae){ze.init.initialized=!0,ze.ensureErrnoError(),e.stdin=R||e.stdin,e.stdout=W||e.stdout,e.stderr=ae||e.stderr,ze.createStandardStreams()},quit:function(){ze.init.initialized=!1;var R=e._fflush;R&&R(0);for(var W=0;W<ze.streams.length;W++){var ae=ze.streams[W];ae&&ze.close(ae)}},getMode:function(R,W){var ae=0;return R&&(ae|=365),W&&(ae|=146),ae},joinPath:function(R,W){var ae=pi.join.apply(null,R);return W&&ae[0]=="/"&&(ae=ae.substr(1)),ae},absolutePath:function(R,W){return Ti.resolve(W,R)},standardizePath:function(R){return pi.normalize(R)},findObject:function(R,W){var ae=ze.analyzePath(R,W);return ae.exists?ae.object:(yo(ae.error),null)},analyzePath:function(R,W){try{var ae=ze.lookupPath(R,{follow:!W});R=ae.path}catch{}var ke={isRoot:!1,exists:!1,error:0,name:null,path:null,object:null,parentExists:!1,parentPath:null,parentObject:null};try{var ae=ze.lookupPath(R,{parent:!0});ke.parentExists=!0,ke.parentPath=ae.path,ke.parentObject=ae.node,ke.name=pi.basename(R),ae=ze.lookupPath(R,{follow:!W}),ke.exists=!0,ke.path=ae.path,ke.object=ae.node,ke.name=ae.node.name,ke.isRoot=ae.path==="/"}catch(Ye){ke.error=Ye.errno}return ke},createFolder:function(R,W,ae,ke){var Ye=pi.join2(typeof R=="string"?R:ze.getPath(R),W),dt=ze.getMode(ae,ke);return ze.mkdir(Ye,dt)},createPath:function(R,W,ae,ke){R=typeof R=="string"?R:ze.getPath(R);for(var Ye=W.split("/").reverse();Ye.length;){var dt=Ye.pop();if(dt){var Mt=pi.join2(R,dt);try{ze.mkdir(Mt)}catch{}R=Mt}}return Mt},createFile:function(R,W,ae,ke,Ye){var dt=pi.join2(typeof R=="string"?R:ze.getPath(R),W),Mt=ze.getMode(ke,Ye);return ze.create(dt,Mt)},createDataFile:function(R,W,ae,ke,Ye,dt){var Mt=W?pi.join2(typeof R=="string"?R:ze.getPath(R),W):R,Tt=ze.getMode(ke,Ye),wr=ze.create(Mt,Tt);if(ae){if(typeof ae=="string"){for(var pr=new Array(ae.length),vr=0,ar=ae.length;vr<ar;++vr)pr[vr]=ae.charCodeAt(vr);ae=pr}ze.chmod(wr,Tt|146);var $r=ze.open(wr,"w");ze.write($r,ae,0,ae.length,0,dt),ze.close($r),ze.chmod(wr,Tt)}return wr},createDevice:function(R,W,ae,ke){var Ye=pi.join2(typeof R=="string"?R:ze.getPath(R),W),dt=ze.getMode(!!ae,!!ke);ze.createDevice.major||(ze.createDevice.major=64);var Mt=ze.makedev(ze.createDevice.major++,0);return ze.registerDevice(Mt,{open:function(Tt){Tt.seekable=!1},close:function(Tt){ke&&ke.buffer&&ke.buffer.length&&ke(10)},read:function(Tt,wr,pr,vr,ar){for(var $r=0,cn=0;cn<vr;cn++){var In;try{In=ae()}catch{throw new ze.ErrnoError(29)}if(In===void 0&&$r===0)throw new ze.ErrnoError(6);if(In==null)break;$r++,wr[pr+cn]=In}return $r&&(Tt.node.timestamp=Date.now()),$r},write:function(Tt,wr,pr,vr,ar){for(var $r=0;$r<vr;$r++)try{ke(wr[pr+$r])}catch{throw new ze.ErrnoError(29)}return vr&&(Tt.node.timestamp=Date.now()),$r}}),ze.mkdev(Ye,dt,Mt)},createLink:function(R,W,ae,ke,Ye){var dt=pi.join2(typeof R=="string"?R:ze.getPath(R),W);return ze.symlink(ae,dt)},forceLoadFile:function(R){if(R.isDevice||R.isFolder||R.link||R.contents)return!0;var W=!0;if(typeof XMLHttpRequest<"u")throw new Error("Lazy loading should have been performed (contents set) in createLazyFile, but it was not. Lazy loading only works in web workers. Use --embed-file or --preload-file in emcc on the main thread.");if(l)try{R.contents=$l(l(R.url),!0),R.usedBytes=R.contents.length}catch{W=!1}else throw new Error("Cannot load without read() or XMLHttpRequest.");return W||yo(29),W},createLazyFile:function(R,W,ae,ke,Ye){function dt(){this.lengthKnown=!1,this.chunks=[]}if(dt.prototype.get=function($r){if(!($r>this.length-1||$r<0)){var cn=$r%this.chunkSize,In=$r/this.chunkSize|0;return this.getter(In)[cn]}},dt.prototype.setDataGetter=function($r){this.getter=$r},dt.prototype.cacheLength=function(){var $r=new XMLHttpRequest;if($r.open("HEAD",ae,!1),$r.send(null),!($r.status>=200&&$r.status<300||$r.status===304))throw new Error("Couldn't load "+ae+". Status: "+$r.status);var cn=Number($r.getResponseHeader("Content-length")),In,et=(In=$r.getResponseHeader("Accept-Ranges"))&&In==="bytes",m=(In=$r.getResponseHeader("Content-Encoding"))&&In==="gzip",Pr=1024*1024;et||(Pr=cn);var f=function(kn,ii){if(kn>ii)throw new Error("invalid range ("+kn+", "+ii+") or no bytes requested!");if(ii>cn-1)throw new Error("only "+cn+" bytes available! programmer error!");var To=new XMLHttpRequest;if(To.open("GET",ae,!1),cn!==Pr&&To.setRequestHeader("Range","bytes="+kn+"-"+ii),typeof Uint8Array<"u"&&(To.responseType="arraybuffer"),To.overrideMimeType&&To.overrideMimeType("text/plain; charset=x-user-defined"),To.send(null),!(To.status>=200&&To.status<300||To.status===304))throw new Error("Couldn't load "+ae+". Status: "+To.status);return To.response!==void 0?new Uint8Array(To.response||[]):$l(To.responseText||"",!0)},L=this;L.setDataGetter(function(kn){var ii=kn*Pr,To=(kn+1)*Pr-1;if(To=Math.min(To,cn-1),typeof L.chunks[kn]>"u"&&(L.chunks[kn]=f(ii,To)),typeof L.chunks[kn]>"u")throw new Error("doXHR failed!");return L.chunks[kn]}),(m||!cn)&&(Pr=cn=1,cn=this.getter(0).length,Pr=cn,w("LazyFiles on gzip forces download of the whole file when length is accessed")),this._length=cn,this._chunkSize=Pr,this.lengthKnown=!0},typeof XMLHttpRequest<"u"){throw"Cannot do synchronous binary XHRs outside webworkers in modern browsers. Use --embed-file or --preload-file in emcc";var Mt,Tt}else var Tt={isDevice:!1,url:ae};var wr=ze.createFile(R,W,Tt,ke,Ye);Tt.contents?wr.contents=Tt.contents:Tt.url&&(wr.contents=null,wr.url=Tt.url),Object.defineProperties(wr,{usedBytes:{get:function(){return this.contents.length}}});var pr={},vr=Object.keys(wr.stream_ops);return vr.forEach(function(ar){var $r=wr.stream_ops[ar];pr[ar]=function(){if(!ze.forceLoadFile(wr))throw new ze.ErrnoError(29);return $r.apply(null,arguments)}}),pr.read=function($r,cn,In,et,m){if(!ze.forceLoadFile(wr))throw new ze.ErrnoError(29);var Pr=$r.node.contents;if(m>=Pr.length)return 0;var f=Math.min(Pr.length-m,et);if(Pr.slice)for(var L=0;L<f;L++)cn[In+L]=Pr[m+L];else for(var L=0;L<f;L++)cn[In+L]=Pr.get(m+L);return f},wr.stream_ops=pr,wr},createPreloadedFile:function(R,W,ae,ke,Ye,dt,Mt,Tt,wr,pr){be.init();var vr=W?Ti.resolve(pi.join2(R,W)):R;function ar($r){function cn(et){pr&&pr(),Tt||ze.createDataFile(R,W,et,ke,Ye,wr),dt&&dt(),xn()}var In=!1;e.preloadPlugins.forEach(function(et){In||et.canHandle(vr)&&(et.handle($r,vr,cn,function(){Mt&&Mt(),xn()}),In=!0)}),In||cn($r)}wi(),typeof ae=="string"?be.asyncLoad(ae,function($r){ar($r)},Mt):ar(ae)},indexedDB:function(){return window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB},DB_NAME:function(){return"EM_FS_"+window.location.pathname},DB_VERSION:20,DB_STORE_NAME:"FILE_DATA",saveFilesToDB:function(R,W,ae){W=W||function(){},ae=ae||function(){};var ke=ze.indexedDB();try{var Ye=ke.open(ze.DB_NAME(),ze.DB_VERSION)}catch(dt){return ae(dt)}Ye.onupgradeneeded=function(){w("creating db");var Mt=Ye.result;Mt.createObjectStore(ze.DB_STORE_NAME)},Ye.onsuccess=function(){var Mt=Ye.result,Tt=Mt.transaction([ze.DB_STORE_NAME],"readwrite"),wr=Tt.objectStore(ze.DB_STORE_NAME),pr=0,vr=0,ar=R.length;function $r(){vr==0?W():ae()}R.forEach(function(cn){var In=wr.put(ze.analyzePath(cn).object.contents,cn);In.onsuccess=function(){pr++,pr+vr==ar&&$r()},In.onerror=function(){vr++,pr+vr==ar&&$r()}}),Tt.onerror=ae},Ye.onerror=ae},loadFilesFromDB:function(R,W,ae){W=W||function(){},ae=ae||function(){};var ke=ze.indexedDB();try{var Ye=ke.open(ze.DB_NAME(),ze.DB_VERSION)}catch(dt){return ae(dt)}Ye.onupgradeneeded=ae,Ye.onsuccess=function(){var Mt=Ye.result;try{var Tt=Mt.transaction([ze.DB_STORE_NAME],"readonly")}catch(cn){ae(cn);return}var wr=Tt.objectStore(ze.DB_STORE_NAME),pr=0,vr=0,ar=R.length;function $r(){vr==0?W():ae()}R.forEach(function(cn){var In=wr.get(cn);In.onsuccess=function(){ze.analyzePath(cn).exists&&ze.unlink(cn),ze.createDataFile(pi.dirname(cn),pi.basename(cn),In.result,!0,!0,!0),pr++,pr+vr==ar&&$r()},In.onerror=function(){vr++,pr+vr==ar&&$r()}}),Tt.onerror=ae},Ye.onerror=ae},mmapAlloc:function(R){for(var W=I(R,16384),ae=us(W);R<W;)He[ae+R++]=0;return ae}};function Ea(R,W){if(be.mainLoop.timingMode=R,be.mainLoop.timingValue=W,!be.mainLoop.func)return 1;if(R==0)be.mainLoop.scheduler=function(){var Mt=Math.max(0,be.mainLoop.tickStartTime+W-ha())|0;setTimeout(be.mainLoop.runner,Mt)},be.mainLoop.method="timeout";else if(R==1)be.mainLoop.scheduler=function(){be.requestAnimationFrame(be.mainLoop.runner)},be.mainLoop.method="rAF";else if(R==2){if(typeof setImmediate>"u"){var ae=[],ke="setimmediate",Ye=function(dt){(dt.data===ke||dt.data.target===ke)&&(dt.stopPropagation(),ae.shift()())};addEventListener("message",Ye,!0),setImmediate=function(Mt){ae.push(Mt),postMessage(ke,"*")}}be.mainLoop.scheduler=function(){setImmediate(be.mainLoop.runner)},be.mainLoop.method="immediate"}return 0}var ha;typeof performance<"u"&&performance.now?ha=function(){return performance.now()}:ha=Date.now;function ra(R,W,ae,ke,Ye){_e(!be.mainLoop.func,"emscripten_set_main_loop: there can only be one main loop function at once: call emscripten_cancel_main_loop to cancel the previous one before setting a new one with different parameters."),be.mainLoop.func=R,be.mainLoop.arg=ke;var dt;typeof ke<"u"?dt=function(){e.dynCall_vi(R,ke)}:dt=function(){e.dynCall_v(R)};var Mt=be.mainLoop.currentlyRunningMainloop;if(be.mainLoop.runner=function(){if(!ce){if(be.mainLoop.queue.length>0){var wr=Date.now(),pr=be.mainLoop.queue.shift();if(pr.func(pr.arg),be.mainLoop.remainingBlockers){var vr=be.mainLoop.remainingBlockers,ar=vr%1==0?vr-1:Math.floor(vr);pr.counted?be.mainLoop.remainingBlockers=ar:(ar=ar+.5,be.mainLoop.remainingBlockers=(8*vr+ar)/9)}if(console.log('main loop blocker "'+pr.name+'" took '+(Date.now()-wr)+" ms"),be.mainLoop.updateStatus(),Mt<be.mainLoop.currentlyRunningMainloop)return;setTimeout(be.mainLoop.runner,0);return}if(!(Mt<be.mainLoop.currentlyRunningMainloop)){if(be.mainLoop.currentFrameNumber=be.mainLoop.currentFrameNumber+1|0,be.mainLoop.timingMode==1&&be.mainLoop.timingValue>1&&be.mainLoop.currentFrameNumber%be.mainLoop.timingValue!=0){be.mainLoop.scheduler();return}else be.mainLoop.timingMode==0&&(be.mainLoop.tickStartTime=ha());be.mainLoop.runIter(dt),!(Mt<be.mainLoop.currentlyRunningMainloop)&&(typeof Re=="object"&&Re.audio&&Re.audio.queueNewAudioData&&Re.audio.queueNewAudioData(),be.mainLoop.scheduler())}}},Ye||(W&&W>0?Ea(0,1e3/W):Ea(1,1),be.mainLoop.scheduler()),ae)throw"unwind"}var be={mainLoop:{scheduler:null,method:"",currentlyRunningMainloop:0,func:null,arg:0,timingMode:0,timingValue:0,currentFrameNumber:0,queue:[],pause:function(){be.mainLoop.scheduler=null,be.mainLoop.currentlyRunningMainloop++},resume:function(){be.mainLoop.currentlyRunningMainloop++;var R=be.mainLoop.timingMode,W=be.mainLoop.timingValue,ae=be.mainLoop.func;be.mainLoop.func=null,ra(ae,0,!1,be.mainLoop.arg,!0),Ea(R,W),be.mainLoop.scheduler()},updateStatus:function(){if(e.setStatus){var R=e.statusMessage||"Please wait...",W=be.mainLoop.remainingBlockers,ae=be.mainLoop.expectedBlockers;W?W<ae?e.setStatus(R+" ("+(ae-W)+"/"+ae+")"):e.setStatus(R):e.setStatus("")}},runIter:function(R){if(!ce){if(e.preMainLoop){var W=e.preMainLoop();if(W===!1)return}try{R()}catch(ae){if(ae instanceof Ro)return;if(ae=="unwind")return;throw ae&&typeof ae=="object"&&ae.stack&&E("exception thrown: "+[ae,ae.stack]),ae}e.postMainLoop&&e.postMainLoop()}}},isFullscreen:!1,pointerLock:!1,moduleContextCreatedCallbacks:[],workers:[],init:function(){if(e.preloadPlugins||(e.preloadPlugins=[]),be.initted)return;be.initted=!0;try{new Blob,be.hasBlobConstructor=!0}catch{be.hasBlobConstructor=!1,console.log("warning: no blob constructor, cannot create blobs with mimetypes")}be.BlobBuilder=typeof MozBlobBuilder<"u"?MozBlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:be.hasBlobConstructor?null:console.log("warning: no BlobBuilder"),be.URLObject=typeof window<"u"?window.URL?window.URL:window.webkitURL:void 0,!e.noImageDecoding&&typeof be.URLObject>"u"&&(console.log("warning: Browser does not support creating object URLs. Built-in browser image decoding will not be available."),e.noImageDecoding=!0);var R={};R.canHandle=function(dt){return!e.noImageDecoding&&/\.(jpg|jpeg|png|bmp)$/i.test(dt)},R.handle=function(dt,Mt,Tt,wr){var pr=null;if(be.hasBlobConstructor)try{pr=new Blob([dt],{type:be.getMimetype(Mt)}),pr.size!==dt.length&&(pr=new Blob([new Uint8Array(dt).buffer],{type:be.getMimetype(Mt)}))}catch(cn){F("Blob constructor present but fails: "+cn+"; falling back to blob builder")}if(!pr){var vr=new be.BlobBuilder;vr.append(new Uint8Array(dt).buffer),pr=vr.getBlob()}var ar=be.URLObject.createObjectURL(pr),$r=new Image;$r.onload=function(){_e($r.complete,"Image "+Mt+" could not be decoded");var In=document.createElement("canvas");In.width=$r.width,In.height=$r.height;var et=In.getContext("2d");et.drawImage($r,0,0),e.preloadedImages[Mt]=In,be.URLObject.revokeObjectURL(ar),Tt&&Tt(dt)},$r.onerror=function(In){console.log("Image "+ar+" could not be decoded"),wr&&wr()},$r.src=ar},e.preloadPlugins.push(R);var W={};W.canHandle=function(dt){return!e.noAudioDecoding&&dt.substr(-4)in{".ogg":1,".wav":1,".mp3":1}},W.handle=function(dt,Mt,Tt,wr){var pr=!1;function vr(et){pr||(pr=!0,e.preloadedAudios[Mt]=et,Tt&&Tt(dt))}function ar(){pr||(pr=!0,e.preloadedAudios[Mt]=new Audio,wr&&wr())}if(be.hasBlobConstructor){try{var $r=new Blob([dt],{type:be.getMimetype(Mt)})}catch{return ar()}var cn=be.URLObject.createObjectURL($r),In=new Audio;In.addEventListener("canplaythrough",function(){vr(In)},!1),In.onerror=function(m){if(pr)return;console.log("warning: browser could not fully decode audio "+Mt+", trying slower base64 approach");function Pr(f){for(var L="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",kn="=",ii="",To=0,J=0,Ri=0;Ri<f.length;Ri++)for(To=To<<8|f[Ri],J+=8;J>=6;){var bs=To>>J-6&63;J-=6,ii+=L[bs]}return J==2?(ii+=L[(To&3)<<4],ii+=kn+kn):J==4&&(ii+=L[(To&15)<<2],ii+=kn),ii}In.src="data:audio/x-"+Mt.substr(-3)+";base64,"+Pr(dt),vr(In)},In.src=cn,be.safeSetTimeout(function(){vr(In)},1e4)}else return ar()},e.preloadPlugins.push(W);function ae(){be.pointerLock=document.pointerLockElement===e.canvas||document.mozPointerLockElement===e.canvas||document.webkitPointerLockElement===e.canvas||document.msPointerLockElement===e.canvas}var ke=e.canvas;ke&&(ke.requestPointerLock=ke.requestPointerLock||ke.mozRequestPointerLock||ke.webkitRequestPointerLock||ke.msRequestPointerLock||function(){},ke.exitPointerLock=document.exitPointerLock||document.mozExitPointerLock||document.webkitExitPointerLock||document.msExitPointerLock||function(){},ke.exitPointerLock=ke.exitPointerLock.bind(document),document.addEventListener("pointerlockchange",ae,!1),document.addEventListener("mozpointerlockchange",ae,!1),document.addEventListener("webkitpointerlockchange",ae,!1),document.addEventListener("mspointerlockchange",ae,!1),e.elementPointerLock&&ke.addEventListener("click",function(Ye){!be.pointerLock&&e.canvas.requestPointerLock&&(e.canvas.requestPointerLock(),Ye.preventDefault())},!1))},createContext:function(R,W,ae,ke){if(W&&e.ctx&&R==e.canvas)return e.ctx;var Ye,dt;if(W){var Mt={antialias:!1,alpha:!1,majorVersion:1};if(ke)for(var Tt in ke)Mt[Tt]=ke[Tt];typeof sn<"u"&&(dt=sn.createContext(R,Mt),dt&&(Ye=sn.getContext(dt).GLctx))}else Ye=R.getContext("2d");return Ye?(ae&&(W||_e(typeof gs>"u","cannot set in module if GLctx is used, but we are a non-GL context that would replace it"),e.ctx=Ye,W&&sn.makeContextCurrent(dt),e.useWebGL=W,be.moduleContextCreatedCallbacks.forEach(function(wr){wr()}),be.init()),Ye):null},destroyContext:function(R,W,ae){},fullscreenHandlersInstalled:!1,lockPointer:void 0,resizeCanvas:void 0,requestFullscreen:function(R,W){be.lockPointer=R,be.resizeCanvas=W,typeof be.lockPointer>"u"&&(be.lockPointer=!0),typeof be.resizeCanvas>"u"&&(be.resizeCanvas=!1);var ae=e.canvas;function ke(){be.isFullscreen=!1;var dt=ae.parentNode;(document.fullscreenElement||document.mozFullScreenElement||document.msFullscreenElement||document.webkitFullscreenElement||document.webkitCurrentFullScreenElement)===dt?(ae.exitFullscreen=be.exitFullscreen,be.lockPointer&&ae.requestPointerLock(),be.isFullscreen=!0,be.resizeCanvas?be.setFullscreenCanvasSize():be.updateCanvasDimensions(ae)):(dt.parentNode.insertBefore(ae,dt),dt.parentNode.removeChild(dt),be.resizeCanvas?be.setWindowedCanvasSize():be.updateCanvasDimensions(ae)),e.onFullScreen&&e.onFullScreen(be.isFullscreen),e.onFullscreen&&e.onFullscreen(be.isFullscreen)}be.fullscreenHandlersInstalled||(be.fullscreenHandlersInstalled=!0,document.addEventListener("fullscreenchange",ke,!1),document.addEventListener("mozfullscreenchange",ke,!1),document.addEventListener("webkitfullscreenchange",ke,!1),document.addEventListener("MSFullscreenChange",ke,!1));var Ye=document.createElement("div");ae.parentNode.insertBefore(Ye,ae),Ye.appendChild(ae),Ye.requestFullscreen=Ye.requestFullscreen||Ye.mozRequestFullScreen||Ye.msRequestFullscreen||(Ye.webkitRequestFullscreen?function(){Ye.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT)}:null)||(Ye.webkitRequestFullScreen?function(){Ye.webkitRequestFullScreen(Element.ALLOW_KEYBOARD_INPUT)}:null),Ye.requestFullscreen()},exitFullscreen:function(){if(!be.isFullscreen)return!1;var R=document.exitFullscreen||document.cancelFullScreen||document.mozCancelFullScreen||document.msExitFullscreen||document.webkitCancelFullScreen||function(){};return R.apply(document,[]),!0},nextRAF:0,fakeRequestAnimationFrame:function(R){var W=Date.now();if(be.nextRAF===0)be.nextRAF=W+1e3/60;else for(;W+2>=be.nextRAF;)be.nextRAF+=1e3/60;var ae=Math.max(be.nextRAF-W,0);setTimeout(R,ae)},requestAnimationFrame:function(R){if(typeof requestAnimationFrame=="function"){requestAnimationFrame(R);return}var W=be.fakeRequestAnimationFrame;typeof window<"u"&&(W=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame||window.oRequestAnimationFrame||W),W(R)},safeCallback:function(R){return function(){if(!ce)return R.apply(null,arguments)}},allowAsyncCallbacks:!0,queuedAsyncCallbacks:[],pauseAsyncCallbacks:function(){be.allowAsyncCallbacks=!1},resumeAsyncCallbacks:function(){if(be.allowAsyncCallbacks=!0,be.queuedAsyncCallbacks.length>0){var R=be.queuedAsyncCallbacks;be.queuedAsyncCallbacks=[],R.forEach(function(W){W()})}},safeRequestAnimationFrame:function(R){return be.requestAnimationFrame(function(){ce||(be.allowAsyncCallbacks?R():be.queuedAsyncCallbacks.push(R))})},safeSetTimeout:function(R,W){return setTimeout(function(){ce||(be.allowAsyncCallbacks?R():be.queuedAsyncCallbacks.push(R))},W)},safeSetInterval:function(R,W){return setInterval(function(){ce||be.allowAsyncCallbacks&&R()},W)},getMimetype:function(R){return{jpg:"image/jpeg",jpeg:"image/jpeg",png:"image/png",bmp:"image/bmp",ogg:"audio/ogg",wav:"audio/wav",mp3:"audio/mpeg"}[R.substr(R.lastIndexOf(".")+1)]},getUserMedia:function(R){window.getUserMedia||(window.getUserMedia=navigator.getUserMedia||navigator.mozGetUserMedia),window.getUserMedia(R)},getMovementX:function(R){return R.movementX||R.mozMovementX||R.webkitMovementX||0},getMovementY:function(R){return R.movementY||R.mozMovementY||R.webkitMovementY||0},getMouseWheelDelta:function(R){var W=0;switch(R.type){case"DOMMouseScroll":W=R.detail/3;break;case"mousewheel":W=R.wheelDelta/120;break;case"wheel":switch(W=R.deltaY,R.deltaMode){case 0:W/=100;break;case 1:W/=3;break;case 2:W*=80;break;default:throw"unrecognized mouse wheel delta mode: "+R.deltaMode}break;default:throw"unrecognized mouse wheel event: "+R.type}return W},mouseX:0,mouseY:0,mouseMovementX:0,mouseMovementY:0,touches:{},lastTouches:{},calculateMouseEvent:function(R){if(be.pointerLock)R.type!="mousemove"&&"mozMovementX"in R?be.mouseMovementX=be.mouseMovementY=0:(be.mouseMovementX=be.getMovementX(R),be.mouseMovementY=be.getMovementY(R)),typeof Re<"u"?(be.mouseX=Re.mouseX+be.mouseMovementX,be.mouseY=Re.mouseY+be.mouseMovementY):(be.mouseX+=be.mouseMovementX,be.mouseY+=be.mouseMovementY);else{var W=e.canvas.getBoundingClientRect(),ae=e.canvas.width,ke=e.canvas.height,Ye=typeof window.scrollX<"u"?window.scrollX:window.pageXOffset,dt=typeof window.scrollY<"u"?window.scrollY:window.pageYOffset;if(R.type==="touchstart"||R.type==="touchend"||R.type==="touchmove"){var Mt=R.touch;if(Mt===void 0)return;var Tt=Mt.pageX-(Ye+W.left),wr=Mt.pageY-(dt+W.top);Tt=Tt*(ae/W.width),wr=wr*(ke/W.height);var pr={x:Tt,y:wr};if(R.type==="touchstart")be.lastTouches[Mt.identifier]=pr,be.touches[Mt.identifier]=pr;else if(R.type==="touchend"||R.type==="touchmove"){var vr=be.touches[Mt.identifier];vr||(vr=pr),be.lastTouches[Mt.identifier]=vr,be.touches[Mt.identifier]=pr}return}var ar=R.pageX-(Ye+W.left),$r=R.pageY-(dt+W.top);ar=ar*(ae/W.width),$r=$r*(ke/W.height),be.mouseMovementX=ar-be.mouseX,be.mouseMovementY=$r-be.mouseY,be.mouseX=ar,be.mouseY=$r}},asyncLoad:function(R,W,ae,ke){var Ye=ke?"":"al "+R;h(R,function(dt){_e(dt,'Loading data file "'+R+'" failed (no arrayBuffer).'),W(new Uint8Array(dt)),Ye&&xn()},function(dt){if(ae)ae();else throw'Loading data file "'+R+'" failed.'}),Ye&&wi()},resizeListeners:[],updateResizeListeners:function(){var R=e.canvas;be.resizeListeners.forEach(function(W){W(R.width,R.height)})},setCanvasSize:function(R,W,ae){var ke=e.canvas;be.updateCanvasDimensions(ke,R,W),ae||be.updateResizeListeners()},windowedWidth:0,windowedHeight:0,setFullscreenCanvasSize:function(){if(typeof Re<"u"){var R=ft[Re.screen>>2];R=R|8388608,Pe[Re.screen>>2]=R}be.updateCanvasDimensions(e.canvas),be.updateResizeListeners()},setWindowedCanvasSize:function(){if(typeof Re<"u"){var R=ft[Re.screen>>2];R=R&-8388609,Pe[Re.screen>>2]=R}be.updateCanvasDimensions(e.canvas),be.updateResizeListeners()},updateCanvasDimensions:function(R,W,ae){W&&ae?(R.widthNative=W,R.heightNative=ae):(W=R.widthNative,ae=R.heightNative);var ke=W,Ye=ae;if(e.forcedAspectRatio&&e.forcedAspectRatio>0&&(ke/Ye<e.forcedAspectRatio?ke=Math.round(Ye*e.forcedAspectRatio):Ye=Math.round(ke/e.forcedAspectRatio)),(document.fullscreenElement||document.mozFullScreenElement||document.msFullscreenElement||document.webkitFullscreenElement||document.webkitCurrentFullScreenElement)===R.parentNode&&typeof screen<"u"){var dt=Math.min(screen.width/ke,screen.height/Ye);ke=Math.round(ke*dt),Ye=Math.round(Ye*dt)}be.resizeCanvas?(R.width!=ke&&(R.width=ke),R.height!=Ye&&(R.height=Ye),typeof R.style<"u"&&(R.style.removeProperty("width"),R.style.removeProperty("height"))):(R.width!=W&&(R.width=W),R.height!=ae&&(R.height=ae),typeof R.style<"u"&&(ke!=W||Ye!=ae?(R.style.setProperty("width",ke+"px","important"),R.style.setProperty("height",Ye+"px","important")):(R.style.removeProperty("width"),R.style.removeProperty("height"))))},wgetRequests:{},nextWgetRequestHandle:0,getNextWgetRequestHandle:function(){var R=be.nextWgetRequestHandle;return be.nextWgetRequestHandle++,R}};function ye(){return Date.now()-Re.startTime|0}function De(R){var W=Re.surfaces[R];if(W.locked++,W.locked>1||(W.buffer||(W.buffer=us(W.width*W.height*4),Pe[R+20>>2]=W.buffer),Pe[R+20>>2]=W.buffer,R==Re.screen&&e.screenIsReadOnly&&W.image))return 0;if(W.image=W.ctx.getImageData(0,0,W.width,W.height),R==Re.screen&&Re.defaults.opaqueFrontBuffer)for(var ae=W.image.data,ke=ae.length,Ye=0;Ye<ke/4;Ye++)ae[Ye*4+3]=255;{if(W.isFlagSet(2097152))throw"CopyOnLock is not supported for SDL_LockSurface with SDL_HWPALETTE flag set"+new Error().stack;xe.set(W.image.data,W.buffer)}return 0}function nt(){return Re.unicode}function st(){return Re.ttfContext}function Rt(){return Re.audio}var Re={defaults:{width:320,height:200,copyOnLock:!0,discardOnLock:!1,opaqueFrontBuffer:!0},version:null,surfaces:{},canvasPool:[],events:[],fonts:[null],audios:[null],rwops:[null],music:{audio:null,volume:1},mixerFrequency:22050,mixerFormat:32784,mixerNumChannels:2,mixerChunkSize:1024,channelMinimumNumber:0,GL:!1,glAttributes:{0:3,1:3,2:2,3:0,4:0,5:1,6:16,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:1,16:0,17:0,18:0},keyboardState:null,keyboardMap:{},canRequestFullscreen:!1,isRequestingFullscreen:!1,textInput:!1,startTime:null,initFlags:0,buttonState:0,modState:0,DOMButtons:[0,0,0],DOMEventToSDLEvent:{},TOUCH_DEFAULT_ID:0,eventHandler:null,eventHandlerContext:null,eventHandlerTemp:0,keyCodes:{16:1249,17:1248,18:1250,20:1081,33:1099,34:1102,35:1101,36:1098,37:1104,38:1106,39:1103,40:1105,44:316,45:1097,46:127,91:1251,93:1125,96:1122,97:1113,98:1114,99:1115,100:1116,101:1117,102:1118,103:1119,104:1120,105:1121,106:1109,107:1111,109:1110,110:1123,111:1108,112:1082,113:1083,114:1084,115:1085,116:1086,117:1087,118:1088,119:1089,120:1090,121:1091,122:1092,123:1093,124:1128,125:1129,126:1130,127:1131,128:1132,129:1133,130:1134,131:1135,132:1136,133:1137,134:1138,135:1139,144:1107,160:94,161:33,162:34,163:35,164:36,165:37,166:38,167:95,168:40,169:41,170:42,171:43,172:124,173:45,174:123,175:125,176:126,181:127,182:129,183:128,188:44,190:46,191:47,192:96,219:91,220:92,221:93,222:39,224:1251},scanCodes:{8:42,9:43,13:40,27:41,32:44,35:204,39:53,44:54,46:55,47:56,48:39,49:30,50:31,51:32,52:33,53:34,54:35,55:36,56:37,57:38,58:203,59:51,61:46,91:47,92:49,93:48,96:52,97:4,98:5,99:6,100:7,101:8,102:9,103:10,104:11,105:12,106:13,107:14,108:15,109:16,110:17,111:18,112:19,113:20,114:21,115:22,116:23,117:24,118:25,119:26,120:27,121:28,122:29,127:76,305:224,308:226,316:70},loadRect:function(R){return{x:Pe[R+0>>2],y:Pe[R+4>>2],w:Pe[R+8>>2],h:Pe[R+12>>2]}},updateRect:function(R,W){Pe[R>>2]=W.x,Pe[R+4>>2]=W.y,Pe[R+8>>2]=W.w,Pe[R+12>>2]=W.h},intersectionOfRects:function(R,W){var ae=Math.max(R.x,W.x),ke=Math.max(R.y,W.y),Ye=Math.min(R.x+R.w,W.x+W.w),dt=Math.min(R.y+R.h,W.y+W.h);return{x:ae,y:ke,w:Math.max(ae,Ye)-ae,h:Math.max(ke,dt)-ke}},checkPixelFormat:function(R){},loadColorToCSSRGB:function(R){var W=Pe[R>>2];return"rgb("+(W&255)+","+(W>>8&255)+","+(W>>16&255)+")"},loadColorToCSSRGBA:function(R){var W=Pe[R>>2];return"rgba("+(W&255)+","+(W>>8&255)+","+(W>>16&255)+","+(W>>24&255)/255+")"},translateColorToCSSRGBA:function(R){return"rgba("+(R&255)+","+(R>>8&255)+","+(R>>16&255)+","+(R>>>24)/255+")"},translateRGBAToCSSRGBA:function(R,W,ae,ke){return"rgba("+(R&255)+","+(W&255)+","+(ae&255)+","+(ke&255)/255+")"},translateRGBAToColor:function(R,W,ae,ke){return R|W<<8|ae<<16|ke<<24},makeSurface:function(R,W,ae,ke,Ye,dt,Mt,Tt,wr){ae=ae||0;var pr=ae&1,vr=ae&2097152,ar=ae&67108864,$r=us(60),cn=us(44),In=vr?1:4,et=0;!pr&&!ar&&(et=us(R*W*4)),Pe[$r>>2]=ae,Pe[$r+4>>2]=cn,Pe[$r+8>>2]=R,Pe[$r+12>>2]=W,Pe[$r+16>>2]=R*In,Pe[$r+20>>2]=et,Pe[$r+36>>2]=0,Pe[$r+40>>2]=0,Pe[$r+44>>2]=e.canvas.width,Pe[$r+48>>2]=e.canvas.height,Pe[$r+56>>2]=1,Pe[cn>>2]=-2042224636,Pe[cn+4>>2]=0,He[cn+8>>0]=In*8,He[cn+9>>0]=In,Pe[cn+12>>2]=dt||255,Pe[cn+16>>2]=Mt||65280,Pe[cn+20>>2]=Tt||16711680,Pe[cn+24>>2]=wr||4278190080,Re.GL=Re.GL||ar;var m;ke?m=e.canvas:(Re.canvasPool.length>0?m=Re.canvasPool.pop():m=document.createElement("canvas"),m.width=R,m.height=W);var Pr={antialias:Re.glAttributes[13]!=0,depth:Re.glAttributes[6]>0,stencil:Re.glAttributes[7]>0,alpha:Re.glAttributes[3]>0},f=be.createContext(m,ar,ke,Pr);return Re.surfaces[$r]={width:R,height:W,canvas:m,ctx:f,surf:$r,buffer:et,pixelFormat:cn,alpha:255,flags:ae,locked:0,usePageCanvas:ke,source:Ye,isFlagSet:function(L){return ae&L}},$r},copyIndexedColorData:function(R,W,ae,ke,Ye){if(R.colors){var dt=e.canvas.width,Mt=e.canvas.height,Tt=W||0,wr=ae||0,pr=(ke||dt-Tt)+Tt,vr=(Ye||Mt-wr)+wr,ar=R.buffer;R.image.data32||(R.image.data32=new Uint32Array(R.image.data.buffer));for(var $r=R.image.data32,cn=R.colors32,In=wr;In<vr;++In)for(var et=In*dt,m=Tt;m<pr;++m)$r[et+m]=cn[xe[ar+et+m>>0]]}},freeSurface:function(R){var W=R+56,ae=Pe[W>>2];if(ae>1){Pe[W>>2]=ae-1;return}var ke=Re.surfaces[R];!ke.usePageCanvas&&ke.canvas&&Re.canvasPool.push(ke.canvas),ke.buffer&&Ps(ke.buffer),Ps(ke.pixelFormat),Ps(R),Re.surfaces[R]=null,R===Re.screen&&(Re.screen=null)},blitSurface:function(R,W,ae,ke,Ye){var dt=Re.surfaces[R],Mt=Re.surfaces[ae],Tt,wr;if(W?Tt=Re.loadRect(W):Tt={x:0,y:0,w:dt.width,h:dt.height},ke?wr=Re.loadRect(ke):wr={x:0,y:0,w:dt.width,h:dt.height},Mt.clipRect){var pr=!Ye||Tt.w===0?1:Tt.w/wr.w,vr=!Ye||Tt.h===0?1:Tt.h/wr.h;wr=Re.intersectionOfRects(Mt.clipRect,wr),Tt.w=wr.w*pr,Tt.h=wr.h*vr,ke&&Re.updateRect(ke,wr)}var ar,$r;if(Ye?(ar=wr.w,$r=wr.h):(ar=Tt.w,$r=Tt.h),Tt.w===0||Tt.h===0||ar===0||$r===0)return 0;var cn=Mt.ctx.globalAlpha;return Mt.ctx.globalAlpha=dt.alpha/255,Mt.ctx.drawImage(dt.canvas,Tt.x,Tt.y,Tt.w,Tt.h,wr.x,wr.y,ar,$r),Mt.ctx.globalAlpha=cn,ae!=Re.screen&&(F("WARNING: copying canvas data to memory for compatibility"),De(ae),Mt.locked--),0},downFingers:{},savedKeydown:null,receiveEvent:function(R){function W(){for(var vr in Re.keyboardMap)Re.events.push({type:"keyup",keyCode:Re.keyboardMap[vr]})}switch(R.type){case"touchstart":case"touchmove":{R.preventDefault();var ae=[];if(R.type==="touchstart")for(var ke=0;ke<R.touches.length;ke++){var Ye=R.touches[ke];Re.downFingers[Ye.identifier]!=!0&&(Re.downFingers[Ye.identifier]=!0,ae.push(Ye))}else ae=R.touches;var dt=ae[0];if(dt){R.type=="touchstart"&&(Re.DOMButtons[0]=1);var Mt;switch(R.type){case"touchstart":Mt="mousedown";break;case"touchmove":Mt="mousemove";break}var Tt={type:Mt,button:0,pageX:dt.clientX,pageY:dt.clientY};Re.events.push(Tt)}for(var ke=0;ke<ae.length;ke++){var Ye=ae[ke];Re.events.push({type:R.type,touch:Ye})}break}case"touchend":{R.preventDefault();for(var ke=0;ke<R.changedTouches.length;ke++){var Ye=R.changedTouches[ke];Re.downFingers[Ye.identifier]===!0&&delete Re.downFingers[Ye.identifier]}var Tt={type:"mouseup",button:0,pageX:R.changedTouches[0].clientX,pageY:R.changedTouches[0].clientY};Re.DOMButtons[0]=0,Re.events.push(Tt);for(var ke=0;ke<R.changedTouches.length;ke++){var Ye=R.changedTouches[ke];Re.events.push({type:"touchend",touch:Ye})}break}case"DOMMouseScroll":case"mousewheel":case"wheel":var wr=-be.getMouseWheelDelta(R);wr=wr==0?0:wr>0?Math.max(wr,1):Math.min(wr,-1);var pr=wr>0?3:4;Re.events.push({type:"mousedown",button:pr,pageX:R.pageX,pageY:R.pageY}),Re.events.push({type:"mouseup",button:pr,pageX:R.pageX,pageY:R.pageY}),Re.events.push({type:"wheel",deltaX:0,deltaY:wr}),R.preventDefault();break;case"mousemove":if(Re.DOMButtons[0]===1&&Re.events.push({type:"touchmove",touch:{identifier:0,deviceID:-1,pageX:R.pageX,pageY:R.pageY}}),be.pointerLock&&("mozMovementX"in R&&(R.movementX=R.mozMovementX,R.movementY=R.mozMovementY),R.movementX==0&&R.movementY==0)){R.preventDefault();return}case"keydown":case"keyup":case"keypress":case"mousedown":case"mouseup":if((R.type!=="keydown"||!nt()&&!Re.textInput||R.keyCode===8||R.keyCode===9)&&R.preventDefault(),R.type=="mousedown")Re.DOMButtons[R.button]=1,Re.events.push({type:"touchstart",touch:{identifier:0,deviceID:-1,pageX:R.pageX,pageY:R.pageY}});else if(R.type=="mouseup"){if(!Re.DOMButtons[R.button])return;Re.events.push({type:"touchend",touch:{identifier:0,deviceID:-1,pageX:R.pageX,pageY:R.pageY}}),Re.DOMButtons[R.button]=0}R.type==="keydown"||R.type==="mousedown"?Re.canRequestFullscreen=!0:(R.type==="keyup"||R.type==="mouseup")&&(Re.canRequestFullscreen=!1),R.type==="keypress"&&Re.savedKeydown?(Re.savedKeydown.keypressCharCode=R.charCode,Re.savedKeydown=null):R.type==="keydown"&&(Re.savedKeydown=R),(R.type!=="keypress"||Re.textInput)&&Re.events.push(R);break;case"mouseout":for(var ke=0;ke<3;ke++)Re.DOMButtons[ke]&&(Re.events.push({type:"mouseup",button:ke,pageX:R.pageX,pageY:R.pageY}),Re.DOMButtons[ke]=0);R.preventDefault();break;case"focus":Re.events.push(R),R.preventDefault();break;case"blur":Re.events.push(R),W(),R.preventDefault();break;case"visibilitychange":Re.events.push({type:"visibilitychange",visible:!document.hidden}),W(),R.preventDefault();break;case"unload":be.mainLoop.runner&&(Re.events.push(R),be.mainLoop.runner());return;case"resize":Re.events.push(R),R.preventDefault&&R.preventDefault();break}Re.events.length>=1e4&&(E("SDL event queue full, dropping events"),Re.events=Re.events.slice(0,1e4))},lookupKeyCodeForEvent:function(R){var W=R.keyCode;return W>=65&&W<=90?W+=32:(W=Re.keyCodes[R.keyCode]||R.keyCode,R.location===2&&W>=(224|1<<10)&&W<=(227|1<<10)&&(W+=4)),W},handleEvent:function(R){if(!R.handled)switch(R.handled=!0,R.type){case"touchstart":case"touchend":case"touchmove":{be.calculateMouseEvent(R);break}case"keydown":case"keyup":{var W=R.type==="keydown",ae=Re.lookupKeyCodeForEvent(R);He[Re.keyboardState+ae>>0]=W,Re.modState=(He[Re.keyboardState+1248>>0]?64:0)|(He[Re.keyboardState+1249>>0]?1:0)|(He[Re.keyboardState+1250>>0]?256:0)|(He[Re.keyboardState+1252>>0]?128:0)|(He[Re.keyboardState+1253>>0]?2:0)|(He[Re.keyboardState+1254>>0]?512:0),W?Re.keyboardMap[ae]=R.keyCode:delete Re.keyboardMap[ae];break}case"mousedown":case"mouseup":R.type=="mousedown"?Re.buttonState|=1<<R.button:R.type=="mouseup"&&(Re.buttonState&=~(1<<R.button));case"mousemove":{be.calculateMouseEvent(R);break}}},flushEventsToHandler:function(){},pollEvent:function(R){if(Re.initFlags&512&&Re.joystickEventState&&Re.queryJoysticks(),R){for(;Re.events.length>0;)if(Re.makeCEvent(Re.events.shift(),R)!==!1)return 1;return 0}else return Re.events.length>0},makeCEvent:function(R,W){if(typeof R=="number"){tl(W,R,28),Ps(R);return}switch(Re.handleEvent(R),R.type){case"keydown":case"keyup":{var ae=R.type==="keydown",ke=Re.lookupKeyCodeForEvent(R),Ye;ke>=1024?Ye=ke-1024:Ye=Re.scanCodes[ke]||ke,Pe[W>>2]=Re.DOMEventToSDLEvent[R.type],He[W+8>>0]=ae?1:0,He[W+9>>0]=0,Pe[W+12>>2]=Ye,Pe[W+16>>2]=ke,Ne[W+20>>1]=Re.modState,Pe[W+24>>2]=R.keypressCharCode||ke;break}case"keypress":{Pe[W>>2]=Re.DOMEventToSDLEvent[R.type];for(var dt=$l(String.fromCharCode(R.charCode)),Mt=0;Mt<dt.length;++Mt)He[W+(8+Mt)>>0]=dt[Mt];break}case"mousedown":case"mouseup":case"mousemove":{if(R.type!="mousemove"){var ae=R.type==="mousedown";Pe[W>>2]=Re.DOMEventToSDLEvent[R.type],Pe[W+4>>2]=0,Pe[W+8>>2]=0,Pe[W+12>>2]=0,He[W+16>>0]=R.button+1,He[W+17>>0]=ae?1:0,Pe[W+20>>2]=be.mouseX,Pe[W+24>>2]=be.mouseY}else Pe[W>>2]=Re.DOMEventToSDLEvent[R.type],Pe[W+4>>2]=0,Pe[W+8>>2]=0,Pe[W+12>>2]=0,Pe[W+16>>2]=Re.buttonState,Pe[W+20>>2]=be.mouseX,Pe[W+24>>2]=be.mouseY,Pe[W+28>>2]=be.mouseMovementX,Pe[W+32>>2]=be.mouseMovementY;break}case"wheel":{Pe[W>>2]=Re.DOMEventToSDLEvent[R.type],Pe[W+16>>2]=R.deltaX,Pe[W+20>>2]=R.deltaY;break}case"touchstart":case"touchend":case"touchmove":{var Tt=R.touch;if(!be.touches[Tt.identifier])break;var wr=e.canvas.width,pr=e.canvas.height,vr=be.touches[Tt.identifier].x/wr,ar=be.touches[Tt.identifier].y/pr,$r=be.lastTouches[Tt.identifier].x/wr,cn=be.lastTouches[Tt.identifier].y/pr,In=vr-$r,et=ar-cn;if(Tt.deviceID===void 0&&(Tt.deviceID=Re.TOUCH_DEFAULT_ID),In===0&&et===0&&R.type==="touchmove")return!1;Pe[W>>2]=Re.DOMEventToSDLEvent[R.type],Pe[W+4>>2]=ye(),No=[Tt.deviceID>>>0,(ci=Tt.deviceID,+On(ci)>=1?ci>0?(_i(+ai(ci/4294967296),4294967295)|0)>>>0:~~+Zn((ci-+(~~ci>>>0))/4294967296)>>>0:0)],Pe[W+8>>2]=No[0],Pe[W+12>>2]=No[1],No=[Tt.identifier>>>0,(ci=Tt.identifier,+On(ci)>=1?ci>0?(_i(+ai(ci/4294967296),4294967295)|0)>>>0:~~+Zn((ci-+(~~ci>>>0))/4294967296)>>>0:0)],Pe[W+16>>2]=No[0],Pe[W+20>>2]=No[1],At[W+24>>2]=vr,At[W+28>>2]=ar,At[W+32>>2]=In,At[W+36>>2]=et,Tt.force!==void 0?At[W+40>>2]=Tt.force:At[W+40>>2]=R.type=="touchend"?0:1;break}case"unload":{Pe[W>>2]=Re.DOMEventToSDLEvent[R.type];break}case"resize":{Pe[W>>2]=Re.DOMEventToSDLEvent[R.type],Pe[W+4>>2]=R.w,Pe[W+8>>2]=R.h;break}case"joystick_button_up":case"joystick_button_down":{var m=R.type==="joystick_button_up"?0:1;Pe[W>>2]=Re.DOMEventToSDLEvent[R.type],He[W+4>>0]=R.index,He[W+5>>0]=R.button,He[W+6>>0]=m;break}case"joystick_axis_motion":{Pe[W>>2]=Re.DOMEventToSDLEvent[R.type],He[W+4>>0]=R.index,He[W+5>>0]=R.axis,Pe[W+8>>2]=Re.joystickAxisValueConversion(R.value);break}case"focus":{var Pr=12;Pe[W>>2]=Re.DOMEventToSDLEvent[R.type],Pe[W+4>>2]=0,He[W+8>>0]=Pr;break}case"blur":{var f=13;Pe[W>>2]=Re.DOMEventToSDLEvent[R.type],Pe[W+4>>2]=0,He[W+8>>0]=f;break}case"visibilitychange":{var L=1,kn=2,ii=R.visible?L:kn;Pe[W>>2]=Re.DOMEventToSDLEvent[R.type],Pe[W+4>>2]=0,He[W+8>>0]=ii;break}default:throw"Unhandled SDL event: "+R.type}},makeFontString:function(R,W){return W.charAt(0)!="'"&&W.charAt(0)!='"'&&(W='"'+W+'"'),R+"px "+W+", serif"},estimateTextWidth:function(R,W){var ae=R.size,ke=Re.makeFontString(ae,R.name),Ye=st();Ye.font=ke;var dt=Ye.measureText(W).width|0;return dt},allocateChannels:function(R){if(!(Re.numChannels&&Re.numChannels>=R&&R!=0)){Re.numChannels=R,Re.channels=[];for(var W=0;W<R;W++)Re.channels[W]={audio:null,volume:1}}},setGetVolume:function(R,W){if(!R)return 0;var ae=R.volume*128;if(W!=-1&&(R.volume=Math.min(Math.max(W,0),128)/128,R.audio))try{R.audio.volume=R.volume,R.audio.webAudioGainNode&&(R.audio.webAudioGainNode.gain.value=R.volume)}catch(ke){E("setGetVolume failed to set audio volume: "+ke)}return ae},setPannerPosition:function(R,W,ae,ke){R&&R.audio&&R.audio.webAudioPannerNode&&R.audio.webAudioPannerNode.setPosition(W,ae,ke)},playWebAudio:function(R){if(R&&!R.webAudioNode&&Re.webAudioAvailable())try{var W=R.resource.webAudio;if(R.paused=!1,!W.decodedBuffer){W.onDecodeComplete===void 0&&si("Cannot play back audio object that was not loaded"),W.onDecodeComplete.push(function(){R.paused||Re.playWebAudio(R)});return}R.webAudioNode=Re.audioContext.createBufferSource(),R.webAudioNode.buffer=W.decodedBuffer,R.webAudioNode.loop=R.loop,R.webAudioNode.onended=function(){R.onended()},R.webAudioPannerNode=Re.audioContext.createPanner(),R.webAudioPannerNode.setPosition(0,0,-.5),R.webAudioPannerNode.panningModel="equalpower",R.webAudioGainNode=Re.audioContext.createGain(),R.webAudioGainNode.gain.value=R.volume,R.webAudioNode.connect(R.webAudioPannerNode),R.webAudioPannerNode.connect(R.webAudioGainNode),R.webAudioGainNode.connect(Re.audioContext.destination),R.webAudioNode.start(0,R.currentPosition),R.startTime=Re.audioContext.currentTime-R.currentPosition}catch(ae){E("playWebAudio failed: "+ae)}},pauseWebAudio:function(R){if(R){if(R.webAudioNode)try{R.currentPosition=(Re.audioContext.currentTime-R.startTime)%R.resource.webAudio.decodedBuffer.duration,R.webAudioNode.onended=void 0,R.webAudioNode.stop(0),R.webAudioNode=void 0}catch(W){E("pauseWebAudio failed: "+W)}R.paused=!0}},openAudioContext:function(){Re.audioContext||(typeof AudioContext<"u"?Re.audioContext=new AudioContext:typeof webkitAudioContext<"u"&&(Re.audioContext=new webkitAudioContext))},webAudioAvailable:function(){return!!Re.audioContext},fillWebAudioBufferFromHeap:function(R,W,ae){for(var ke=Rt(),Ye=ke.channels,dt=0;dt<Ye;++dt){var Mt=ae.getChannelData(dt);if(Mt.length!=W)throw"Web Audio output buffer length mismatch! Destination size: "+Mt.length+" samples vs expected "+W+" samples!";if(ke.format==32784)for(var Tt=0;Tt<W;++Tt)Mt[Tt]=Ne[R+(Tt*Ye+dt)*2>>1]/32768;else if(ke.format==8)for(var Tt=0;Tt<W;++Tt){var wr=He[R+(Tt*Ye+dt)>>0];Mt[Tt]=(wr>=0?wr-128:wr+128)/128}else if(ke.format==33056)for(var Tt=0;Tt<W;++Tt)Mt[Tt]=At[R+(Tt*Ye+dt)*4>>2];else throw"Invalid SDL audio format "+ke.format+"!"}},debugSurface:function(R){console.log("dumping surface "+[R.surf,R.source,R.width,R.height]);for(var W=R.ctx.getImageData(0,0,R.width,R.height),ae=W.data,ke=Math.min(R.width,R.height),Ye=0;Ye<ke;Ye++)console.log("   diagonal "+Ye+":"+[ae[Ye*R.width*4+Ye*4+0],ae[Ye*R.width*4+Ye*4+1],ae[Ye*R.width*4+Ye*4+2],ae[Ye*R.width*4+Ye*4+3]])},joystickEventState:1,lastJoystickState:{},joystickNamePool:{},recordJoystickState:function(R,W){for(var ae=new Array(W.buttons.length),ke=0;ke<W.buttons.length;ke++)ae[ke]=Re.getJoystickButtonState(W.buttons[ke]);Re.lastJoystickState[R]={buttons:ae,axes:W.axes.slice(0),timestamp:W.timestamp,index:W.index,id:W.id}},getJoystickButtonState:function(R){return typeof R=="object"?R.pressed:R>0},queryJoysticks:function(){for(var R in Re.lastJoystickState){var W=Re.getGamepad(R-1),ae=Re.lastJoystickState[R];if(typeof W>"u"||W===null)return;if(typeof W.timestamp!="number"||W.timestamp!==ae.timestamp||!W.timestamp){var ke;for(ke=0;ke<W.buttons.length;ke++){var Ye=Re.getJoystickButtonState(W.buttons[ke]);Ye!==ae.buttons[ke]&&Re.events.push({type:Ye?"joystick_button_down":"joystick_button_up",joystick:R,index:R-1,button:ke})}for(ke=0;ke<W.axes.length;ke++)W.axes[ke]!==ae.axes[ke]&&Re.events.push({type:"joystick_axis_motion",joystick:R,index:R-1,axis:ke,value:W.axes[ke]});Re.recordJoystickState(R,W)}}},joystickAxisValueConversion:function(R){return R=Math.min(1,Math.max(R,-1)),Math.ceil((R+1)*32767.5-32768)},getGamepads:function(){var R=navigator.getGamepads||navigator.webkitGamepads||navigator.mozGamepads||navigator.gamepads||navigator.webkitGetGamepads;return R!==void 0?R.apply(navigator):[]},getGamepad:function(R){var W=Re.getGamepads();return W.length>R&&R>=0?W[R]:null}};function Ht(R,W,ae,ke,Ye,dt,Mt,Tt){return Re.makeSurface(W,ae,R,!1,"CreateRGBSurface",Ye,dt,Mt,Tt)}function Nt(R){}function ir(R){R&&Re.freeSurface(R)}function Br(R){if(Re.startTime=Date.now(),Re.initFlags=R,!e.doNotCaptureKeyboard){var W=e.keyboardListeningElement||document;W.addEventListener("keydown",Re.receiveEvent),W.addEventListener("keyup",Re.receiveEvent),W.addEventListener("keypress",Re.receiveEvent),window.addEventListener("focus",Re.receiveEvent),window.addEventListener("blur",Re.receiveEvent),document.addEventListener("visibilitychange",Re.receiveEvent)}return window.addEventListener("unload",Re.receiveEvent),Re.keyboardState=us(65536),Vu(Re.keyboardState,0,65536),Re.DOMEventToSDLEvent.keydown=768,Re.DOMEventToSDLEvent.keyup=769,Re.DOMEventToSDLEvent.keypress=771,Re.DOMEventToSDLEvent.mousedown=1025,Re.DOMEventToSDLEvent.mouseup=1026,Re.DOMEventToSDLEvent.mousemove=1024,Re.DOMEventToSDLEvent.wheel=1027,Re.DOMEventToSDLEvent.touchstart=1792,Re.DOMEventToSDLEvent.touchend=1793,Re.DOMEventToSDLEvent.touchmove=1794,Re.DOMEventToSDLEvent.unload=256,Re.DOMEventToSDLEvent.resize=28673,Re.DOMEventToSDLEvent.visibilitychange=512,Re.DOMEventToSDLEvent.focus=512,Re.DOMEventToSDLEvent.blur=512,Re.DOMEventToSDLEvent.joystick_axis_motion=1536,Re.DOMEventToSDLEvent.joystick_button_down=1539,Re.DOMEventToSDLEvent.joystick_button_up=1540,0}function nn(R){var W=R.getExtension("ANGLE_instanced_arrays");if(W)return R.vertexAttribDivisor=function(ae,ke){W.vertexAttribDivisorANGLE(ae,ke)},R.drawArraysInstanced=function(ae,ke,Ye,dt){W.drawArraysInstancedANGLE(ae,ke,Ye,dt)},R.drawElementsInstanced=function(ae,ke,Ye,dt,Mt){W.drawElementsInstancedANGLE(ae,ke,Ye,dt,Mt)},1}function Fr(R){var W=R.getExtension("OES_vertex_array_object");if(W)return R.createVertexArray=function(){return W.createVertexArrayOES()},R.deleteVertexArray=function(ae){W.deleteVertexArrayOES(ae)},R.bindVertexArray=function(ae){W.bindVertexArrayOES(ae)},R.isVertexArray=function(ae){return W.isVertexArrayOES(ae)},1}function $n(R){var W=R.getExtension("WEBGL_draw_buffers");if(W)return R.drawBuffers=function(ae,ke){W.drawBuffersWEBGL(ae,ke)},1}function Wn(R){return!!(R.multiDrawWebgl=R.getExtension("WEBGL_multi_draw"))}var sn={counter:1,buffers:[],programs:[],framebuffers:[],renderbuffers:[],textures:[],uniforms:[],shaders:[],vaos:[],contexts:[],offscreenCanvases:{},timerQueriesEXT:[],programInfos:{},stringCache:{},unpackAlignment:4,recordError:function(W){sn.lastError||(sn.lastError=W)},getNewId:function(R){for(var W=sn.counter++,ae=R.length;ae<W;ae++)R[ae]=null;return W},getSource:function(R,W,ae,ke){for(var Ye="",dt=0;dt<W;++dt){var Mt=ke?Pe[ke+dt*4>>2]:-1;Ye+=Fe(Pe[ae+dt*4>>2],Mt<0?void 0:Mt)}return Ye},createContext:function(R,W){var ae=R.getContext("webgl",W)||R.getContext("experimental-webgl",W);if(!ae)return 0;var ke=sn.registerContext(ae,W);return ke},registerContext:function(R,W){var ae=sn.getNewId(sn.contexts),ke={handle:ae,attributes:W,version:W.majorVersion,GLctx:R};return ke.cannotHandleOffsetsInUniformArrayViews=function(Ye){function dt(pr,vr){var ar=Ye.createShader(vr);return Ye.shaderSource(ar,pr),Ye.compileShader(ar),ar}try{var Mt=Ye.createProgram();Ye.attachShader(Mt,dt("attribute vec4 p;void main(){gl_Position=p;}",35633)),Ye.attachShader(Mt,dt("precision lowp float;uniform vec4 u;void main(){gl_FragColor=u;}",35632)),Ye.linkProgram(Mt);var Tt=new Float32Array(8);Tt[4]=1,Ye.useProgram(Mt);var wr=Ye.getUniformLocation(Mt,"u");return Ye.uniform4fv(wr,Tt.subarray(4,8)),!Ye.getUniform(Mt,wr)[0]}catch{return!1}}(),R.canvas&&(R.canvas.GLctxObject=ke),sn.contexts[ae]=ke,(typeof W.enableExtensionsByDefault>"u"||W.enableExtensionsByDefault)&&sn.initExtensions(ke),ae},makeContextCurrent:function(R){return sn.currentContext=sn.contexts[R],e.ctx=gs=sn.currentContext&&sn.currentContext.GLctx,!(R&&!gs)},getContext:function(R){return sn.contexts[R]},deleteContext:function(R){sn.currentContext===sn.contexts[R]&&(sn.currentContext=null),typeof JSEvents=="object"&&JSEvents.removeAllHandlersOnTarget(sn.contexts[R].GLctx.canvas),sn.contexts[R]&&sn.contexts[R].GLctx.canvas&&(sn.contexts[R].GLctx.canvas.GLctxObject=void 0),sn.contexts[R]=null},initExtensions:function(R){if(R||(R=sn.currentContext),!R.initExtensionsDone){R.initExtensionsDone=!0;var W=R.GLctx;nn(W),Fr(W),$n(W),W.disjointTimerQueryExt=W.getExtension("EXT_disjoint_timer_query"),Wn(W);var ae=["OES_texture_float","OES_texture_half_float","OES_standard_derivatives","OES_vertex_array_object","WEBGL_compressed_texture_s3tc","WEBGL_depth_texture","OES_element_index_uint","EXT_texture_filter_anisotropic","EXT_frag_depth","WEBGL_draw_buffers","ANGLE_instanced_arrays","OES_texture_float_linear","OES_texture_half_float_linear","EXT_blend_minmax","EXT_shader_texture_lod","EXT_texture_norm16","WEBGL_compressed_texture_pvrtc","EXT_color_buffer_half_float","WEBGL_color_buffer_float","EXT_sRGB","WEBGL_compressed_texture_etc1","EXT_disjoint_timer_query","WEBGL_compressed_texture_etc","WEBGL_compressed_texture_astc","EXT_color_buffer_float","WEBGL_compressed_texture_s3tc_srgb","EXT_disjoint_timer_query_webgl2","WEBKIT_WEBGL_compressed_texture_pvrtc"],ke=W.getSupportedExtensions()||[];ke.forEach(function(Ye){ae.indexOf(Ye)!=-1&&W.getExtension(Ye)})}},populateUniformTable:function(R){for(var W=sn.programs[R],ae=sn.programInfos[R]={uniforms:{},maxUniformLength:0,maxAttributeLength:-1,maxUniformBlockNameLength:-1},ke=ae.uniforms,Ye=gs.getProgramParameter(W,35718),dt=0;dt<Ye;++dt){var Mt=gs.getActiveUniform(W,dt),Tt=Mt.name;ae.maxUniformLength=Math.max(ae.maxUniformLength,Tt.length+1),Tt.slice(-1)=="]"&&(Tt=Tt.slice(0,Tt.lastIndexOf("[")));var wr=gs.getUniformLocation(W,Tt);if(wr){var pr=sn.getNewId(sn.uniforms);ke[Tt]=[Mt.size,pr],sn.uniforms[pr]=wr;for(var vr=1;vr<Mt.size;++vr){var ar=Tt+"["+vr+"]";wr=gs.getUniformLocation(W,ar),pr=sn.getNewId(sn.uniforms),sn.uniforms[pr]=wr}}}}};function yi(R,W,ae,ke){["touchstart","touchend","touchmove","mousedown","mouseup","mousemove","DOMMouseScroll","mousewheel","wheel","mouseout"].forEach(function(dt){e.canvas.addEventListener(dt,Re.receiveEvent,!0)});var Ye=e.canvas;return R==0&&W==0&&(R=Ye.width,W=Ye.height),Re.addedResizeListener||(Re.addedResizeListener=!0,be.resizeListeners.push(function(dt,Mt){Re.settingVideoMode||Re.receiveEvent({type:"resize",w:dt,h:Mt})})),Re.settingVideoMode=!0,be.setCanvasSize(R,W),Re.settingVideoMode=!1,Re.screen&&(Re.freeSurface(Re.screen),_e(!Re.screen)),Re.GL&&(ke=ke|67108864),Re.screen=Re.makeSurface(R,W,ke,!0,"screen"),Re.screen}function Ai(R){_e(!Re.GL);var W=Re.surfaces[R];if(!(!W.locked||--W.locked>0)){if(W.isFlagSet(2097152))Re.copyIndexedColorData(W);else if(W.colors)for(var cn=e.canvas.width,In=e.canvas.height,et=W.buffer,ae=W.image.data,m=W.colors,Pr=0;Pr<In;Pr++){for(var f=Pr*cn*4,L=0;L<cn;L++){var wr=xe[et++>>0]*4,kn=f+L*4;ae[kn]=m[wr],ae[kn+1]=m[wr+1],ae[kn+2]=m[wr+2]}et+=cn*3}else{var ae=W.image.data,ke=W.buffer;_e(ke%4==0,"Invalid buffer offset: "+ke);var Ye=ke>>2,dt=0,Mt=R==Re.screen,Tt;if(typeof CanvasPixelArray<"u"&&ae instanceof CanvasPixelArray)for(Tt=ae.length;dt<Tt;){var wr=Pe[Ye];ae[dt]=wr&255,ae[dt+1]=wr>>8&255,ae[dt+2]=wr>>16&255,ae[dt+3]=Mt?255:wr>>24&255,Ye++,dt+=4}else{var pr=new Uint32Array(ae.buffer);if(Mt&&Re.defaults.opaqueFrontBuffer){Tt=pr.length,pr.set(Pe.subarray(Ye,Ye+Tt));var vr=new Uint8Array(ae.buffer),ar=3,$r=ar+4*Tt;if(Tt%8==0)for(;ar<$r;)vr[ar]=255,ar=ar+4|0,vr[ar]=255,ar=ar+4|0,vr[ar]=255,ar=ar+4|0,vr[ar]=255,ar=ar+4|0,vr[ar]=255,ar=ar+4|0,vr[ar]=255,ar=ar+4|0,vr[ar]=255,ar=ar+4|0,vr[ar]=255,ar=ar+4|0;else for(;ar<$r;)vr[ar]=255,ar=ar+4|0}else pr.set(Pe.subarray(Ye,Ye+pr.length))}}W.ctx.putImageData(W.image,0,0)}}function Xi(R,W,ae,ke){return Re.blitSurface(R,W,ae,ke,!1)}function Ii(){return 12032}var qi=Uint8Array.prototype.copyWithin?function(R,W,ae){xe.copyWithin(R,W,W+ae)}:function(R,W,ae){xe.set(xe.subarray(W,W+ae),R)};function ro(){return xe.length}function ko(R){try{return K.grow(R-Ze.byteLength+65535>>>16),Pt(K.buffer),1}catch{}}function Yo(R){R=R>>>0;var W=ro(),ae=65536,ke=2147483648;if(R>ke)return!1;for(var Ye=16777216,dt=1;dt<=4;dt*=2){var Mt=W*(1+.2/dt);Mt=Math.min(Mt,R+100663296);var Tt=Math.min(ke,bt(Math.max(Ye,R,Mt),ae)),wr=ko(Tt);if(wr)return!0}return!1}var So={mappings:{},buffers:[null,[],[]],printChar:function(R,W){var ae=So.buffers[R];W===0||W===10?((R===1?w:E)(Ie(ae,0)),ae.length=0):ae.push(W)},varargs:void 0,get:function(){So.varargs+=4;var R=Pe[So.varargs-4>>2];return R},getStr:function(R){var W=Fe(R);return W},get64:function(R,W){return R}};function Jo(R){return 0}function Vl(R,W,ae,ke,Ye){}function na(R,W,ae,ke){for(var Ye=0,dt=0;dt<ae;dt++){for(var Mt=Pe[W+dt*8>>2],Tt=Pe[W+(dt*8+4)>>2],wr=0;wr<Tt;wr++)So.printChar(R,xe[Mt+wr]);Ye+=Tt}return Pe[ke>>2]=Ye,0}var Ao=function(R,W,ae,ke){R||(R=this),this.parent=R,this.mount=R.mount,this.mounted=null,this.id=ze.nextInode++,this.name=W,this.mode=ae,this.node_ops={},this.stream_ops={},this.rdev=ke},ml=365,gl=146;Object.defineProperties(Ao.prototype,{read:{get:function(){return(this.mode&ml)===ml},set:function(R){R?this.mode|=ml:this.mode&=~ml}},write:{get:function(){return(this.mode&gl)===gl},set:function(R){R?this.mode|=gl:this.mode&=~gl}},isFolder:{get:function(){return ze.isDir(this.mode)}},isDevice:{get:function(){return ze.isChrdev(this.mode)}}}),ze.FSNode=Ao,ze.staticInit(),e.requestFullscreen=function(W,ae){be.requestFullscreen(W,ae)},e.requestAnimationFrame=function(W){be.requestAnimationFrame(W)},e.setCanvasSize=function(W,ae,ke){be.setCanvasSize(W,ae,ke)},e.pauseMainLoop=function(){be.mainLoop.pause()},e.resumeMainLoop=function(){be.mainLoop.resume()},e.getUserMedia=function(){be.getUserMedia()},e.createContext=function(W,ae,ke,Ye){return be.createContext(W,ae,ke,Ye)};var gs;function $l(R,W,ae){var ke=ae>0?ae:ht(R)+1,Ye=new Array(ke),dt=ot(R,Ye,0,Ye.length);return W&&(Ye.length=dt),Ye}function ys(R){for(var W=[],ae=0;ae<R.length;ae++){var ke=R[ae];ke>255&&(ke&=255),W.push(String.fromCharCode(ke))}return W.join("")}var Uu=typeof atob=="function"?atob:function(R){var W="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",ae="",ke,Ye,dt,Mt,Tt,wr,pr,vr=0;R=R.replace(/[^A-Za-z0-9\+\/\=]/g,"");do Mt=W.indexOf(R.charAt(vr++)),Tt=W.indexOf(R.charAt(vr++)),wr=W.indexOf(R.charAt(vr++)),pr=W.indexOf(R.charAt(vr++)),ke=Mt<<2|Tt>>4,Ye=(Tt&15)<<4|wr>>2,dt=(wr&3)<<6|pr,ae=ae+String.fromCharCode(ke),wr!==64&&(ae=ae+String.fromCharCode(Ye)),pr!==64&&(ae=ae+String.fromCharCode(dt));while(vr<R.length);return ae};function $a(R){try{for(var W=Uu(R),ae=new Uint8Array(W.length),ke=0;ke<W.length;++ke)ae[ke]=W.charCodeAt(ke);return ae}catch{throw new Error("Converting base64 string to bytes failed.")}}function yl(R){if(Yr(R))return $a(R.slice(or.length))}var Gl={SDL_CreateRGBSurface:Ht,SDL_Flip:Nt,SDL_FreeSurface:ir,SDL_Init:Br,SDL_LockSurface:De,SDL_SetVideoMode:yi,SDL_UnlockSurface:Ai,SDL_UpperBlit:Xi,emscripten_get_sbrk_ptr:Ii,emscripten_memcpy_big:qi,emscripten_resize_heap:Yo,fd_close:Jo,fd_seek:Vl,fd_write:na,getTempRet0:H,memory:K,setTempRet0:G,table:se};Yn();var qu=e.___wasm_call_ctors=function(){return(qu=e.___wasm_call_ctors=e.asm.__wasm_call_ctors).apply(null,arguments)};e._WebpToSDL=function(){return(e._WebpToSDL=e.asm.WebpToSDL).apply(null,arguments)};var Vu=e._memset=function(){return(Vu=e._memset=e.asm.memset).apply(null,arguments)},tl=e._memcpy=function(){return(tl=e._memcpy=e.asm.memcpy).apply(null,arguments)},us=e._malloc=function(){return(us=e._malloc=e.asm.malloc).apply(null,arguments)},Ps=e._free=function(){return(Ps=e._free=e.asm.free).apply(null,arguments)},vl=e.___errno_location=function(){return(vl=e.___errno_location=e.asm.__errno_location).apply(null,arguments)},du=e.stackSave=function(){return(du=e.stackSave=e.asm.stackSave).apply(null,arguments)},_l=e.stackRestore=function(){return(_l=e.stackRestore=e.asm.stackRestore).apply(null,arguments)},mu=e.stackAlloc=function(){return(mu=e.stackAlloc=e.asm.stackAlloc).apply(null,arguments)};e.dynCall_vii=function(){return(e.dynCall_vii=e.asm.dynCall_vii).apply(null,arguments)},e.dynCall_vi=function(){return(e.dynCall_vi=e.asm.dynCall_vi).apply(null,arguments)},e.dynCall_ii=function(){return(e.dynCall_ii=e.asm.dynCall_ii).apply(null,arguments)},e.dynCall_iii=function(){return(e.dynCall_iii=e.asm.dynCall_iii).apply(null,arguments)},e.dynCall_iiii=function(){return(e.dynCall_iiii=e.asm.dynCall_iiii).apply(null,arguments)},e.dynCall_iiiiiii=function(){return(e.dynCall_iiiiiii=e.asm.dynCall_iiiiiii).apply(null,arguments)},e.dynCall_viiii=function(){return(e.dynCall_viiii=e.asm.dynCall_viiii).apply(null,arguments)},e.dynCall_viii=function(){return(e.dynCall_viii=e.asm.dynCall_viii).apply(null,arguments)},e.dynCall_viiiiii=function(){return(e.dynCall_viiiiii=e.asm.dynCall_viiiiii).apply(null,arguments)},e.dynCall_viiiii=function(){return(e.dynCall_viiiii=e.asm.dynCall_viiiii).apply(null,arguments)},e.dynCall_viiiiiiiii=function(){return(e.dynCall_viiiiiiiii=e.asm.dynCall_viiiiiiiii).apply(null,arguments)},e.dynCall_jiiii=function(){return(e.dynCall_jiiii=e.asm.dynCall_jiiii).apply(null,arguments)},e.dynCall_jiji=function(){return(e.dynCall_jiji=e.asm.dynCall_jiji).apply(null,arguments)};var vs=e.__growWasmMemory=function(){return(vs=e.__growWasmMemory=e.asm.__growWasmMemory).apply(null,arguments)};e.cwrap=We;var _s;function Ro(R){this.name="ExitStatus",this.message="Program terminated with exit("+R+")",this.status=R}yr=function R(){_s||rl(),_s||(yr=R)};function rl(R){if(hi>0||(ct(),hi>0))return;function W(){_s||(_s=!0,e.calledRun=!0,!ce&&(Or(),ln(),e.onRuntimeInitialized&&e.onRuntimeInitialized(),Wt()))}e.setStatus?(e.setStatus("Running..."),setTimeout(function(){setTimeout(function(){e.setStatus("")},1),W()},1)):W()}if(e.run=rl,e.preInit)for(typeof e.preInit=="function"&&(e.preInit=[e.preInit]);e.preInit.length>0;)e.preInit.pop()();rl(),this.Module=e,this.webpToSdl=e.cwrap("WebpToSDL","number",["array","number"]),this.setCanvas=function(R){e.canvas=R},this.Module.doNotCaptureKeyboard=!0}const _B=()=>new Promise(e=>requestAnimationFrame(e));class h1 extends Error{}const bB=e=>/\.webp.*$/i.test(e.src);class wB{constructor({webp:t=new vB,webpSupport:r=gB(),detectWebpImage:n=bB}={}){this.busy=!1,this.cache={},this.webp=t,this.webpSupport=r,this.detectWebpImage=n}async decode(t){if(this.busy)throw new h1("cannot decode when already busy");this.busy=!0;try{await _B();const r=document.createElement("canvas");return this.webp.setCanvas(r),this.webp.webpToSdl(t,t.length),this.busy=!1,r.toDataURL()}catch(r){throw this.busy=!1,r.name=h1.name,r.message=`failed to decode webp image: ${r.message}`,r}}async polyfillImage(t){if(await this.webpSupport)return;const{src:r}=t;if(this.detectWebpImage(t)){if(this.cache[r]){t.src=this.cache[r];return}try{const n=dB(r)?mB(r):await dx(r),o=await this.decode(n);t.src=this.cache[r]=o}catch(n){throw n.name=h1.name,n.message=`failed to polyfill image "${r}": ${n.message}`,n}}}async polyfillDocument({document:t=window.document}={}){if(await this.webpSupport)return null;for(const r of Array.from(t.querySelectorAll("img")))try{await this.polyfillImage(r)}catch(n){throw n.name=h1.name,n.message=`webp image polyfill failed for url "${r.src}": ${n}`,n}}clearCache(){this.cache={}}}var Y1=2*Math.PI*6378137/2;function xB(e){return e=e||256,2*Math.PI*6378137/e}function kB(e,t,r={enable:!0,decimal:1}){e=Rv(e,t);var n=e[0],o=e[1],u=n*Y1/180,c=Math.log(Math.tan((90+o)*Math.PI/360))/(Math.PI/180);return c=c*Y1/180,r.enable&&(u=Number(u.toFixed(r.decimal)),c=Number(c.toFixed(r.decimal))),[u,c]}function AB(e,t,r){var n=e[0],o=e[1],u=PB(t,r),c=(n+Y1)/u,l=(o+Y1)/u;return[c,l,t]}function EB(e,t,r){e=Rv(e,r);var n=kB(e),o=AB(n,t);return CB(o)}function SB(e,t,r){if(e=Rv(e,r),t===0)return[0,0,0];var n=EB(e,t);return IB(n)}function CB(e,t,r){t=t||256;var n=e[0],o=e[1],u=e[2];if(u===0)return[0,0,0];mx(u);var c=Math.ceil(n/t)-1,l=Math.ceil(o/t)-1;return c<0&&(c=0),l<0&&(l=0),[c,l,u]}function IB(e,t){TB(e,t);var r=e[0],n=e[1],o=e[2];if(o===0)return[0,0,0];var u=r,c=Math.pow(2,o)-1-n;return[u,c,o]}function TB(e,t){var r=e[0],n=e[1],o=e[2];if(t===!1)return e;if(o==null)throw new Error("<zoom> is required");if(r==null)throw new Error("<x> is required");if(n==null)throw new Error("<y> is required");return o=mx(o),e=LB(e),e}function LB(e){var t=e[0],r=e[1],n=e[2],o=Math.pow(2,n);return t=t%o,t<0&&(t=t+o),[t,r,n]}function mx(e){if(e===!1)return e;if(e==null)throw new Error("<zoom> is required");if(e<0)throw new Error("<zoom> cannot be less than 0");if(e>32)throw new Error("<zoom> cannot be greater than 32");return e}function Rv(e,t){if(t===!1)return e;var r=DB(e[0]),n=MB(e[1]);return n>85&&(n=85),n<-85&&(n=-85),[r,n]}function PB(e,t){return xB(t)/Math.pow(2,e)}function MB(e){if(e==null)throw new Error("lat is required");return(e>90||e<-90)&&(e=e%180,e>90&&(e=-180+e),e<-90&&(e=180+e),e===0&&(e=0)),e}function DB(e){if(e==null)throw new Error("lng is required");return(e>180||e<-180)&&(e=e%360,e>180&&(e=-360+e),e<-180&&(e=360+e),e===0&&(e=0)),e}/*! pako 2.1.0 https://github.com/nodeca/pako @license (MIT AND Zlib) */const zB=4,y3=0,v3=1,NB=2;function vp(e){let t=e.length;for(;--t>=0;)e[t]=0}const RB=0,gx=1,OB=2,FB=3,BB=258,Ov=29,Td=256,md=Td+1+Ov,Qh=30,Fv=19,yx=2*md+1,eh=15,eg=16,jB=7,Bv=256,vx=16,_x=17,bx=18,dy=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),T1=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),UB=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),wx=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),qB=512,rf=new Array((md+2)*2);vp(rf);const Kp=new Array(Qh*2);vp(Kp);const gd=new Array(qB);vp(gd);const yd=new Array(BB-FB+1);vp(yd);const jv=new Array(Ov);vp(jv);const J1=new Array(Qh);vp(J1);function tg(e,t,r,n,o){this.static_tree=e,this.extra_bits=t,this.extra_base=r,this.elems=n,this.max_length=o,this.has_stree=e&&e.length}let xx,kx,Ax;function rg(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}const Ex=e=>e<256?gd[e]:gd[256+(e>>>7)],vd=(e,t)=>{e.pending_buf[e.pending++]=t&255,e.pending_buf[e.pending++]=t>>>8&255},rc=(e,t,r)=>{e.bi_valid>eg-r?(e.bi_buf|=t<<e.bi_valid&65535,vd(e,e.bi_buf),e.bi_buf=t>>eg-e.bi_valid,e.bi_valid+=r-eg):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=r)},z0=(e,t,r)=>{rc(e,r[t*2],r[t*2+1])},Sx=(e,t)=>{let r=0;do r|=e&1,e>>>=1,r<<=1;while(--t>0);return r>>>1},VB=e=>{e.bi_valid===16?(vd(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):e.bi_valid>=8&&(e.pending_buf[e.pending++]=e.bi_buf&255,e.bi_buf>>=8,e.bi_valid-=8)},$B=(e,t)=>{const r=t.dyn_tree,n=t.max_code,o=t.stat_desc.static_tree,u=t.stat_desc.has_stree,c=t.stat_desc.extra_bits,l=t.stat_desc.extra_base,h=t.stat_desc.max_length;let v,w,E,T,I,F,U=0;for(T=0;T<=eh;T++)e.bl_count[T]=0;for(r[e.heap[e.heap_max]*2+1]=0,v=e.heap_max+1;v<yx;v++)w=e.heap[v],T=r[r[w*2+1]*2+1]+1,T>h&&(T=h,U++),r[w*2+1]=T,!(w>n)&&(e.bl_count[T]++,I=0,w>=l&&(I=c[w-l]),F=r[w*2],e.opt_len+=F*(T+I),u&&(e.static_len+=F*(o[w*2+1]+I)));if(U!==0){do{for(T=h-1;e.bl_count[T]===0;)T--;e.bl_count[T]--,e.bl_count[T+1]+=2,e.bl_count[h]--,U-=2}while(U>0);for(T=h;T!==0;T--)for(w=e.bl_count[T];w!==0;)E=e.heap[--v],!(E>n)&&(r[E*2+1]!==T&&(e.opt_len+=(T-r[E*2+1])*r[E*2],r[E*2+1]=T),w--)}},Cx=(e,t,r)=>{const n=new Array(eh+1);let o=0,u,c;for(u=1;u<=eh;u++)o=o+r[u-1]<<1,n[u]=o;for(c=0;c<=t;c++){let l=e[c*2+1];l!==0&&(e[c*2]=Sx(n[l]++,l))}},GB=()=>{let e,t,r,n,o;const u=new Array(eh+1);for(r=0,n=0;n<Ov-1;n++)for(jv[n]=r,e=0;e<1<<dy[n];e++)yd[r++]=n;for(yd[r-1]=n,o=0,n=0;n<16;n++)for(J1[n]=o,e=0;e<1<<T1[n];e++)gd[o++]=n;for(o>>=7;n<Qh;n++)for(J1[n]=o<<7,e=0;e<1<<T1[n]-7;e++)gd[256+o++]=n;for(t=0;t<=eh;t++)u[t]=0;for(e=0;e<=143;)rf[e*2+1]=8,e++,u[8]++;for(;e<=255;)rf[e*2+1]=9,e++,u[9]++;for(;e<=279;)rf[e*2+1]=7,e++,u[7]++;for(;e<=287;)rf[e*2+1]=8,e++,u[8]++;for(Cx(rf,md+1,u),e=0;e<Qh;e++)Kp[e*2+1]=5,Kp[e*2]=Sx(e,5);xx=new tg(rf,dy,Td+1,md,eh),kx=new tg(Kp,T1,0,Qh,eh),Ax=new tg(new Array(0),UB,0,Fv,jB)},Ix=e=>{let t;for(t=0;t<md;t++)e.dyn_ltree[t*2]=0;for(t=0;t<Qh;t++)e.dyn_dtree[t*2]=0;for(t=0;t<Fv;t++)e.bl_tree[t*2]=0;e.dyn_ltree[Bv*2]=1,e.opt_len=e.static_len=0,e.sym_next=e.matches=0},Tx=e=>{e.bi_valid>8?vd(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0},_3=(e,t,r,n)=>{const o=t*2,u=r*2;return e[o]<e[u]||e[o]===e[u]&&n[t]<=n[r]},ng=(e,t,r)=>{const n=e.heap[r];let o=r<<1;for(;o<=e.heap_len&&(o<e.heap_len&&_3(t,e.heap[o+1],e.heap[o],e.depth)&&o++,!_3(t,n,e.heap[o],e.depth));)e.heap[r]=e.heap[o],r=o,o<<=1;e.heap[r]=n},b3=(e,t,r)=>{let n,o,u=0,c,l;if(e.sym_next!==0)do n=e.pending_buf[e.sym_buf+u++]&255,n+=(e.pending_buf[e.sym_buf+u++]&255)<<8,o=e.pending_buf[e.sym_buf+u++],n===0?z0(e,o,t):(c=yd[o],z0(e,c+Td+1,t),l=dy[c],l!==0&&(o-=jv[c],rc(e,o,l)),n--,c=Ex(n),z0(e,c,r),l=T1[c],l!==0&&(n-=J1[c],rc(e,n,l)));while(u<e.sym_next);z0(e,Bv,t)},my=(e,t)=>{const r=t.dyn_tree,n=t.stat_desc.static_tree,o=t.stat_desc.has_stree,u=t.stat_desc.elems;let c,l,h=-1,v;for(e.heap_len=0,e.heap_max=yx,c=0;c<u;c++)r[c*2]!==0?(e.heap[++e.heap_len]=h=c,e.depth[c]=0):r[c*2+1]=0;for(;e.heap_len<2;)v=e.heap[++e.heap_len]=h<2?++h:0,r[v*2]=1,e.depth[v]=0,e.opt_len--,o&&(e.static_len-=n[v*2+1]);for(t.max_code=h,c=e.heap_len>>1;c>=1;c--)ng(e,r,c);v=u;do c=e.heap[1],e.heap[1]=e.heap[e.heap_len--],ng(e,r,1),l=e.heap[1],e.heap[--e.heap_max]=c,e.heap[--e.heap_max]=l,r[v*2]=r[c*2]+r[l*2],e.depth[v]=(e.depth[c]>=e.depth[l]?e.depth[c]:e.depth[l])+1,r[c*2+1]=r[l*2+1]=v,e.heap[1]=v++,ng(e,r,1);while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],$B(e,t),Cx(r,h,e.bl_count)},w3=(e,t,r)=>{let n,o=-1,u,c=t[0*2+1],l=0,h=7,v=4;for(c===0&&(h=138,v=3),t[(r+1)*2+1]=65535,n=0;n<=r;n++)u=c,c=t[(n+1)*2+1],!(++l<h&&u===c)&&(l<v?e.bl_tree[u*2]+=l:u!==0?(u!==o&&e.bl_tree[u*2]++,e.bl_tree[vx*2]++):l<=10?e.bl_tree[_x*2]++:e.bl_tree[bx*2]++,l=0,o=u,c===0?(h=138,v=3):u===c?(h=6,v=3):(h=7,v=4))},x3=(e,t,r)=>{let n,o=-1,u,c=t[0*2+1],l=0,h=7,v=4;for(c===0&&(h=138,v=3),n=0;n<=r;n++)if(u=c,c=t[(n+1)*2+1],!(++l<h&&u===c)){if(l<v)do z0(e,u,e.bl_tree);while(--l!==0);else u!==0?(u!==o&&(z0(e,u,e.bl_tree),l--),z0(e,vx,e.bl_tree),rc(e,l-3,2)):l<=10?(z0(e,_x,e.bl_tree),rc(e,l-3,3)):(z0(e,bx,e.bl_tree),rc(e,l-11,7));l=0,o=u,c===0?(h=138,v=3):u===c?(h=6,v=3):(h=7,v=4)}},HB=e=>{let t;for(w3(e,e.dyn_ltree,e.l_desc.max_code),w3(e,e.dyn_dtree,e.d_desc.max_code),my(e,e.bl_desc),t=Fv-1;t>=3&&e.bl_tree[wx[t]*2+1]===0;t--);return e.opt_len+=3*(t+1)+5+5+4,t},WB=(e,t,r,n)=>{let o;for(rc(e,t-257,5),rc(e,r-1,5),rc(e,n-4,4),o=0;o<n;o++)rc(e,e.bl_tree[wx[o]*2+1],3);x3(e,e.dyn_ltree,t-1),x3(e,e.dyn_dtree,r-1)},ZB=e=>{let t=4093624447,r;for(r=0;r<=31;r++,t>>>=1)if(t&1&&e.dyn_ltree[r*2]!==0)return y3;if(e.dyn_ltree[9*2]!==0||e.dyn_ltree[10*2]!==0||e.dyn_ltree[13*2]!==0)return v3;for(r=32;r<Td;r++)if(e.dyn_ltree[r*2]!==0)return v3;return y3};let k3=!1;const XB=e=>{k3||(GB(),k3=!0),e.l_desc=new rg(e.dyn_ltree,xx),e.d_desc=new rg(e.dyn_dtree,kx),e.bl_desc=new rg(e.bl_tree,Ax),e.bi_buf=0,e.bi_valid=0,Ix(e)},Lx=(e,t,r,n)=>{rc(e,(RB<<1)+(n?1:0),3),Tx(e),vd(e,r),vd(e,~r),r&&e.pending_buf.set(e.window.subarray(t,t+r),e.pending),e.pending+=r},YB=e=>{rc(e,gx<<1,3),z0(e,Bv,rf),VB(e)},JB=(e,t,r,n)=>{let o,u,c=0;e.level>0?(e.strm.data_type===NB&&(e.strm.data_type=ZB(e)),my(e,e.l_desc),my(e,e.d_desc),c=HB(e),o=e.opt_len+3+7>>>3,u=e.static_len+3+7>>>3,u<=o&&(o=u)):o=u=r+5,r+4<=o&&t!==-1?Lx(e,t,r,n):e.strategy===zB||u===o?(rc(e,(gx<<1)+(n?1:0),3),b3(e,rf,Kp)):(rc(e,(OB<<1)+(n?1:0),3),WB(e,e.l_desc.max_code+1,e.d_desc.max_code+1,c+1),b3(e,e.dyn_ltree,e.dyn_dtree)),Ix(e),n&&Tx(e)},KB=(e,t,r)=>(e.pending_buf[e.sym_buf+e.sym_next++]=t,e.pending_buf[e.sym_buf+e.sym_next++]=t>>8,e.pending_buf[e.sym_buf+e.sym_next++]=r,t===0?e.dyn_ltree[r*2]++:(e.matches++,t--,e.dyn_ltree[(yd[r]+Td+1)*2]++,e.dyn_dtree[Ex(t)*2]++),e.sym_next===e.sym_end);var QB=XB,ej=Lx,tj=JB,rj=KB,nj=YB,ij={_tr_init:QB,_tr_stored_block:ej,_tr_flush_block:tj,_tr_tally:rj,_tr_align:nj};const oj=(e,t,r,n)=>{let o=e&65535|0,u=e>>>16&65535|0,c=0;for(;r!==0;){c=r>2e3?2e3:r,r-=c;do o=o+t[n++]|0,u=u+o|0;while(--c);o%=65521,u%=65521}return o|u<<16|0};var _d=oj;const aj=()=>{let e,t=[];for(var r=0;r<256;r++){e=r;for(var n=0;n<8;n++)e=e&1?3988292384^e>>>1:e>>>1;t[r]=e}return t},sj=new Uint32Array(aj()),lj=(e,t,r,n)=>{const o=sj,u=n+r;e^=-1;for(let c=n;c<u;c++)e=e>>>8^o[(e^t[c])&255];return e^-1};var hl=lj,ch={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},mh={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};const{_tr_init:uj,_tr_stored_block:gy,_tr_flush_block:cj,_tr_tally:Lf,_tr_align:fj}=ij,{Z_NO_FLUSH:Pf,Z_PARTIAL_FLUSH:hj,Z_FULL_FLUSH:pj,Z_FINISH:Gc,Z_BLOCK:A3,Z_OK:Nl,Z_STREAM_END:E3,Z_STREAM_ERROR:U0,Z_DATA_ERROR:dj,Z_BUF_ERROR:ig,Z_DEFAULT_COMPRESSION:mj,Z_FILTERED:gj,Z_HUFFMAN_ONLY:p1,Z_RLE:yj,Z_FIXED:vj,Z_DEFAULT_STRATEGY:_j,Z_UNKNOWN:bj,Z_DEFLATED:x2}=mh,wj=9,xj=15,kj=8,Aj=29,Ej=256,yy=Ej+1+Aj,Sj=30,Cj=19,Ij=2*yy+1,Tj=15,Zo=3,Ef=258,q0=Ef+Zo+1,Lj=32,fp=42,Uv=57,vy=69,_y=73,by=91,wy=103,th=113,qp=666,Ru=1,_p=2,fh=3,bp=4,Pj=3,rh=(e,t)=>(e.msg=ch[t],t),S3=e=>e*2-(e>4?9:0),kf=e=>{let t=e.length;for(;--t>=0;)e[t]=0},Mj=e=>{let t,r,n,o=e.w_size;t=e.hash_size,n=t;do r=e.head[--n],e.head[n]=r>=o?r-o:0;while(--t);t=o,n=t;do r=e.prev[--n],e.prev[n]=r>=o?r-o:0;while(--t)};let Dj=(e,t,r)=>(t<<e.hash_shift^r)&e.hash_mask,Mf=Dj;const Ac=e=>{const t=e.state;let r=t.pending;r>e.avail_out&&(r=e.avail_out),r!==0&&(e.output.set(t.pending_buf.subarray(t.pending_out,t.pending_out+r),e.next_out),e.next_out+=r,t.pending_out+=r,e.total_out+=r,e.avail_out-=r,t.pending-=r,t.pending===0&&(t.pending_out=0))},Tc=(e,t)=>{cj(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,Ac(e.strm)},ma=(e,t)=>{e.pending_buf[e.pending++]=t},Op=(e,t)=>{e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=t&255},xy=(e,t,r,n)=>{let o=e.avail_in;return o>n&&(o=n),o===0?0:(e.avail_in-=o,t.set(e.input.subarray(e.next_in,e.next_in+o),r),e.state.wrap===1?e.adler=_d(e.adler,t,o,r):e.state.wrap===2&&(e.adler=hl(e.adler,t,o,r)),e.next_in+=o,e.total_in+=o,o)},Px=(e,t)=>{let r=e.max_chain_length,n=e.strstart,o,u,c=e.prev_length,l=e.nice_match;const h=e.strstart>e.w_size-q0?e.strstart-(e.w_size-q0):0,v=e.window,w=e.w_mask,E=e.prev,T=e.strstart+Ef;let I=v[n+c-1],F=v[n+c];e.prev_length>=e.good_match&&(r>>=2),l>e.lookahead&&(l=e.lookahead);do if(o=t,!(v[o+c]!==F||v[o+c-1]!==I||v[o]!==v[n]||v[++o]!==v[n+1])){n+=2,o++;do;while(v[++n]===v[++o]&&v[++n]===v[++o]&&v[++n]===v[++o]&&v[++n]===v[++o]&&v[++n]===v[++o]&&v[++n]===v[++o]&&v[++n]===v[++o]&&v[++n]===v[++o]&&n<T);if(u=Ef-(T-n),n=T-Ef,u>c){if(e.match_start=t,c=u,u>=l)break;I=v[n+c-1],F=v[n+c]}}while((t=E[t&w])>h&&--r!==0);return c<=e.lookahead?c:e.lookahead},hp=e=>{const t=e.w_size;let r,n,o;do{if(n=e.window_size-e.lookahead-e.strstart,e.strstart>=t+(t-q0)&&(e.window.set(e.window.subarray(t,t+t-n),0),e.match_start-=t,e.strstart-=t,e.block_start-=t,e.insert>e.strstart&&(e.insert=e.strstart),Mj(e),n+=t),e.strm.avail_in===0)break;if(r=xy(e.strm,e.window,e.strstart+e.lookahead,n),e.lookahead+=r,e.lookahead+e.insert>=Zo)for(o=e.strstart-e.insert,e.ins_h=e.window[o],e.ins_h=Mf(e,e.ins_h,e.window[o+1]);e.insert&&(e.ins_h=Mf(e,e.ins_h,e.window[o+Zo-1]),e.prev[o&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=o,o++,e.insert--,!(e.lookahead+e.insert<Zo)););}while(e.lookahead<q0&&e.strm.avail_in!==0)},Mx=(e,t)=>{let r=e.pending_buf_size-5>e.w_size?e.w_size:e.pending_buf_size-5,n,o,u,c=0,l=e.strm.avail_in;do{if(n=65535,u=e.bi_valid+42>>3,e.strm.avail_out<u||(u=e.strm.avail_out-u,o=e.strstart-e.block_start,n>o+e.strm.avail_in&&(n=o+e.strm.avail_in),n>u&&(n=u),n<r&&(n===0&&t!==Gc||t===Pf||n!==o+e.strm.avail_in)))break;c=t===Gc&&n===o+e.strm.avail_in?1:0,gy(e,0,0,c),e.pending_buf[e.pending-4]=n,e.pending_buf[e.pending-3]=n>>8,e.pending_buf[e.pending-2]=~n,e.pending_buf[e.pending-1]=~n>>8,Ac(e.strm),o&&(o>n&&(o=n),e.strm.output.set(e.window.subarray(e.block_start,e.block_start+o),e.strm.next_out),e.strm.next_out+=o,e.strm.avail_out-=o,e.strm.total_out+=o,e.block_start+=o,n-=o),n&&(xy(e.strm,e.strm.output,e.strm.next_out,n),e.strm.next_out+=n,e.strm.avail_out-=n,e.strm.total_out+=n)}while(c===0);return l-=e.strm.avail_in,l&&(l>=e.w_size?(e.matches=2,e.window.set(e.strm.input.subarray(e.strm.next_in-e.w_size,e.strm.next_in),0),e.strstart=e.w_size,e.insert=e.strstart):(e.window_size-e.strstart<=l&&(e.strstart-=e.w_size,e.window.set(e.window.subarray(e.w_size,e.w_size+e.strstart),0),e.matches<2&&e.matches++,e.insert>e.strstart&&(e.insert=e.strstart)),e.window.set(e.strm.input.subarray(e.strm.next_in-l,e.strm.next_in),e.strstart),e.strstart+=l,e.insert+=l>e.w_size-e.insert?e.w_size-e.insert:l),e.block_start=e.strstart),e.high_water<e.strstart&&(e.high_water=e.strstart),c?bp:t!==Pf&&t!==Gc&&e.strm.avail_in===0&&e.strstart===e.block_start?_p:(u=e.window_size-e.strstart,e.strm.avail_in>u&&e.block_start>=e.w_size&&(e.block_start-=e.w_size,e.strstart-=e.w_size,e.window.set(e.window.subarray(e.w_size,e.w_size+e.strstart),0),e.matches<2&&e.matches++,u+=e.w_size,e.insert>e.strstart&&(e.insert=e.strstart)),u>e.strm.avail_in&&(u=e.strm.avail_in),u&&(xy(e.strm,e.window,e.strstart,u),e.strstart+=u,e.insert+=u>e.w_size-e.insert?e.w_size-e.insert:u),e.high_water<e.strstart&&(e.high_water=e.strstart),u=e.bi_valid+42>>3,u=e.pending_buf_size-u>65535?65535:e.pending_buf_size-u,r=u>e.w_size?e.w_size:u,o=e.strstart-e.block_start,(o>=r||(o||t===Gc)&&t!==Pf&&e.strm.avail_in===0&&o<=u)&&(n=o>u?u:o,c=t===Gc&&e.strm.avail_in===0&&n===o?1:0,gy(e,e.block_start,n,c),e.block_start+=n,Ac(e.strm)),c?fh:Ru)},og=(e,t)=>{let r,n;for(;;){if(e.lookahead<q0){if(hp(e),e.lookahead<q0&&t===Pf)return Ru;if(e.lookahead===0)break}if(r=0,e.lookahead>=Zo&&(e.ins_h=Mf(e,e.ins_h,e.window[e.strstart+Zo-1]),r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),r!==0&&e.strstart-r<=e.w_size-q0&&(e.match_length=Px(e,r)),e.match_length>=Zo)if(n=Lf(e,e.strstart-e.match_start,e.match_length-Zo),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=Zo){e.match_length--;do e.strstart++,e.ins_h=Mf(e,e.ins_h,e.window[e.strstart+Zo-1]),r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart;while(--e.match_length!==0);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=Mf(e,e.ins_h,e.window[e.strstart+1]);else n=Lf(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(n&&(Tc(e,!1),e.strm.avail_out===0))return Ru}return e.insert=e.strstart<Zo-1?e.strstart:Zo-1,t===Gc?(Tc(e,!0),e.strm.avail_out===0?fh:bp):e.sym_next&&(Tc(e,!1),e.strm.avail_out===0)?Ru:_p},Ch=(e,t)=>{let r,n,o;for(;;){if(e.lookahead<q0){if(hp(e),e.lookahead<q0&&t===Pf)return Ru;if(e.lookahead===0)break}if(r=0,e.lookahead>=Zo&&(e.ins_h=Mf(e,e.ins_h,e.window[e.strstart+Zo-1]),r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=Zo-1,r!==0&&e.prev_length<e.max_lazy_match&&e.strstart-r<=e.w_size-q0&&(e.match_length=Px(e,r),e.match_length<=5&&(e.strategy===gj||e.match_length===Zo&&e.strstart-e.match_start>4096)&&(e.match_length=Zo-1)),e.prev_length>=Zo&&e.match_length<=e.prev_length){o=e.strstart+e.lookahead-Zo,n=Lf(e,e.strstart-1-e.prev_match,e.prev_length-Zo),e.lookahead-=e.prev_length-1,e.prev_length-=2;do++e.strstart<=o&&(e.ins_h=Mf(e,e.ins_h,e.window[e.strstart+Zo-1]),r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart);while(--e.prev_length!==0);if(e.match_available=0,e.match_length=Zo-1,e.strstart++,n&&(Tc(e,!1),e.strm.avail_out===0))return Ru}else if(e.match_available){if(n=Lf(e,0,e.window[e.strstart-1]),n&&Tc(e,!1),e.strstart++,e.lookahead--,e.strm.avail_out===0)return Ru}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(n=Lf(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<Zo-1?e.strstart:Zo-1,t===Gc?(Tc(e,!0),e.strm.avail_out===0?fh:bp):e.sym_next&&(Tc(e,!1),e.strm.avail_out===0)?Ru:_p},zj=(e,t)=>{let r,n,o,u;const c=e.window;for(;;){if(e.lookahead<=Ef){if(hp(e),e.lookahead<=Ef&&t===Pf)return Ru;if(e.lookahead===0)break}if(e.match_length=0,e.lookahead>=Zo&&e.strstart>0&&(o=e.strstart-1,n=c[o],n===c[++o]&&n===c[++o]&&n===c[++o])){u=e.strstart+Ef;do;while(n===c[++o]&&n===c[++o]&&n===c[++o]&&n===c[++o]&&n===c[++o]&&n===c[++o]&&n===c[++o]&&n===c[++o]&&o<u);e.match_length=Ef-(u-o),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=Zo?(r=Lf(e,1,e.match_length-Zo),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(r=Lf(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),r&&(Tc(e,!1),e.strm.avail_out===0))return Ru}return e.insert=0,t===Gc?(Tc(e,!0),e.strm.avail_out===0?fh:bp):e.sym_next&&(Tc(e,!1),e.strm.avail_out===0)?Ru:_p},Nj=(e,t)=>{let r;for(;;){if(e.lookahead===0&&(hp(e),e.lookahead===0)){if(t===Pf)return Ru;break}if(e.match_length=0,r=Lf(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,r&&(Tc(e,!1),e.strm.avail_out===0))return Ru}return e.insert=0,t===Gc?(Tc(e,!0),e.strm.avail_out===0?fh:bp):e.sym_next&&(Tc(e,!1),e.strm.avail_out===0)?Ru:_p};function L0(e,t,r,n,o){this.good_length=e,this.max_lazy=t,this.nice_length=r,this.max_chain=n,this.func=o}const Vp=[new L0(0,0,0,0,Mx),new L0(4,4,8,4,og),new L0(4,5,16,8,og),new L0(4,6,32,32,og),new L0(4,4,16,16,Ch),new L0(8,16,32,32,Ch),new L0(8,16,128,128,Ch),new L0(8,32,128,256,Ch),new L0(32,128,258,1024,Ch),new L0(32,258,258,4096,Ch)],Rj=e=>{e.window_size=2*e.w_size,kf(e.head),e.max_lazy_match=Vp[e.level].max_lazy,e.good_match=Vp[e.level].good_length,e.nice_match=Vp[e.level].nice_length,e.max_chain_length=Vp[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=Zo-1,e.match_available=0,e.ins_h=0};function Oj(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=x2,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(Ij*2),this.dyn_dtree=new Uint16Array((2*Sj+1)*2),this.bl_tree=new Uint16Array((2*Cj+1)*2),kf(this.dyn_ltree),kf(this.dyn_dtree),kf(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(Tj+1),this.heap=new Uint16Array(2*yy+1),kf(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(2*yy+1),kf(this.depth),this.sym_buf=0,this.lit_bufsize=0,this.sym_next=0,this.sym_end=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}const Ld=e=>{if(!e)return 1;const t=e.state;return!t||t.strm!==e||t.status!==fp&&t.status!==Uv&&t.status!==vy&&t.status!==_y&&t.status!==by&&t.status!==wy&&t.status!==th&&t.status!==qp?1:0},Dx=e=>{if(Ld(e))return rh(e,U0);e.total_in=e.total_out=0,e.data_type=bj;const t=e.state;return t.pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=t.wrap===2?Uv:t.wrap?fp:th,e.adler=t.wrap===2?0:1,t.last_flush=-2,uj(t),Nl},zx=e=>{const t=Dx(e);return t===Nl&&Rj(e.state),t},Fj=(e,t)=>Ld(e)||e.state.wrap!==2?U0:(e.state.gzhead=t,Nl),Nx=(e,t,r,n,o,u)=>{if(!e)return U0;let c=1;if(t===mj&&(t=6),n<0?(c=0,n=-n):n>15&&(c=2,n-=16),o<1||o>wj||r!==x2||n<8||n>15||t<0||t>9||u<0||u>vj||n===8&&c!==1)return rh(e,U0);n===8&&(n=9);const l=new Oj;return e.state=l,l.strm=e,l.status=fp,l.wrap=c,l.gzhead=null,l.w_bits=n,l.w_size=1<<l.w_bits,l.w_mask=l.w_size-1,l.hash_bits=o+7,l.hash_size=1<<l.hash_bits,l.hash_mask=l.hash_size-1,l.hash_shift=~~((l.hash_bits+Zo-1)/Zo),l.window=new Uint8Array(l.w_size*2),l.head=new Uint16Array(l.hash_size),l.prev=new Uint16Array(l.w_size),l.lit_bufsize=1<<o+6,l.pending_buf_size=l.lit_bufsize*4,l.pending_buf=new Uint8Array(l.pending_buf_size),l.sym_buf=l.lit_bufsize,l.sym_end=(l.lit_bufsize-1)*3,l.level=t,l.strategy=u,l.method=r,zx(e)},Bj=(e,t)=>Nx(e,t,x2,xj,kj,_j),jj=(e,t)=>{if(Ld(e)||t>A3||t<0)return e?rh(e,U0):U0;const r=e.state;if(!e.output||e.avail_in!==0&&!e.input||r.status===qp&&t!==Gc)return rh(e,e.avail_out===0?ig:U0);const n=r.last_flush;if(r.last_flush=t,r.pending!==0){if(Ac(e),e.avail_out===0)return r.last_flush=-1,Nl}else if(e.avail_in===0&&S3(t)<=S3(n)&&t!==Gc)return rh(e,ig);if(r.status===qp&&e.avail_in!==0)return rh(e,ig);if(r.status===fp&&r.wrap===0&&(r.status=th),r.status===fp){let o=x2+(r.w_bits-8<<4)<<8,u=-1;if(r.strategy>=p1||r.level<2?u=0:r.level<6?u=1:r.level===6?u=2:u=3,o|=u<<6,r.strstart!==0&&(o|=Lj),o+=31-o%31,Op(r,o),r.strstart!==0&&(Op(r,e.adler>>>16),Op(r,e.adler&65535)),e.adler=1,r.status=th,Ac(e),r.pending!==0)return r.last_flush=-1,Nl}if(r.status===Uv){if(e.adler=0,ma(r,31),ma(r,139),ma(r,8),r.gzhead)ma(r,(r.gzhead.text?1:0)+(r.gzhead.hcrc?2:0)+(r.gzhead.extra?4:0)+(r.gzhead.name?8:0)+(r.gzhead.comment?16:0)),ma(r,r.gzhead.time&255),ma(r,r.gzhead.time>>8&255),ma(r,r.gzhead.time>>16&255),ma(r,r.gzhead.time>>24&255),ma(r,r.level===9?2:r.strategy>=p1||r.level<2?4:0),ma(r,r.gzhead.os&255),r.gzhead.extra&&r.gzhead.extra.length&&(ma(r,r.gzhead.extra.length&255),ma(r,r.gzhead.extra.length>>8&255)),r.gzhead.hcrc&&(e.adler=hl(e.adler,r.pending_buf,r.pending,0)),r.gzindex=0,r.status=vy;else if(ma(r,0),ma(r,0),ma(r,0),ma(r,0),ma(r,0),ma(r,r.level===9?2:r.strategy>=p1||r.level<2?4:0),ma(r,Pj),r.status=th,Ac(e),r.pending!==0)return r.last_flush=-1,Nl}if(r.status===vy){if(r.gzhead.extra){let o=r.pending,u=(r.gzhead.extra.length&65535)-r.gzindex;for(;r.pending+u>r.pending_buf_size;){let l=r.pending_buf_size-r.pending;if(r.pending_buf.set(r.gzhead.extra.subarray(r.gzindex,r.gzindex+l),r.pending),r.pending=r.pending_buf_size,r.gzhead.hcrc&&r.pending>o&&(e.adler=hl(e.adler,r.pending_buf,r.pending-o,o)),r.gzindex+=l,Ac(e),r.pending!==0)return r.last_flush=-1,Nl;o=0,u-=l}let c=new Uint8Array(r.gzhead.extra);r.pending_buf.set(c.subarray(r.gzindex,r.gzindex+u),r.pending),r.pending+=u,r.gzhead.hcrc&&r.pending>o&&(e.adler=hl(e.adler,r.pending_buf,r.pending-o,o)),r.gzindex=0}r.status=_y}if(r.status===_y){if(r.gzhead.name){let o=r.pending,u;do{if(r.pending===r.pending_buf_size){if(r.gzhead.hcrc&&r.pending>o&&(e.adler=hl(e.adler,r.pending_buf,r.pending-o,o)),Ac(e),r.pending!==0)return r.last_flush=-1,Nl;o=0}r.gzindex<r.gzhead.name.length?u=r.gzhead.name.charCodeAt(r.gzindex++)&255:u=0,ma(r,u)}while(u!==0);r.gzhead.hcrc&&r.pending>o&&(e.adler=hl(e.adler,r.pending_buf,r.pending-o,o)),r.gzindex=0}r.status=by}if(r.status===by){if(r.gzhead.comment){let o=r.pending,u;do{if(r.pending===r.pending_buf_size){if(r.gzhead.hcrc&&r.pending>o&&(e.adler=hl(e.adler,r.pending_buf,r.pending-o,o)),Ac(e),r.pending!==0)return r.last_flush=-1,Nl;o=0}r.gzindex<r.gzhead.comment.length?u=r.gzhead.comment.charCodeAt(r.gzindex++)&255:u=0,ma(r,u)}while(u!==0);r.gzhead.hcrc&&r.pending>o&&(e.adler=hl(e.adler,r.pending_buf,r.pending-o,o))}r.status=wy}if(r.status===wy){if(r.gzhead.hcrc){if(r.pending+2>r.pending_buf_size&&(Ac(e),r.pending!==0))return r.last_flush=-1,Nl;ma(r,e.adler&255),ma(r,e.adler>>8&255),e.adler=0}if(r.status=th,Ac(e),r.pending!==0)return r.last_flush=-1,Nl}if(e.avail_in!==0||r.lookahead!==0||t!==Pf&&r.status!==qp){let o=r.level===0?Mx(r,t):r.strategy===p1?Nj(r,t):r.strategy===yj?zj(r,t):Vp[r.level].func(r,t);if((o===fh||o===bp)&&(r.status=qp),o===Ru||o===fh)return e.avail_out===0&&(r.last_flush=-1),Nl;if(o===_p&&(t===hj?fj(r):t!==A3&&(gy(r,0,0,!1),t===pj&&(kf(r.head),r.lookahead===0&&(r.strstart=0,r.block_start=0,r.insert=0))),Ac(e),e.avail_out===0))return r.last_flush=-1,Nl}return t!==Gc?Nl:r.wrap<=0?E3:(r.wrap===2?(ma(r,e.adler&255),ma(r,e.adler>>8&255),ma(r,e.adler>>16&255),ma(r,e.adler>>24&255),ma(r,e.total_in&255),ma(r,e.total_in>>8&255),ma(r,e.total_in>>16&255),ma(r,e.total_in>>24&255)):(Op(r,e.adler>>>16),Op(r,e.adler&65535)),Ac(e),r.wrap>0&&(r.wrap=-r.wrap),r.pending!==0?Nl:E3)},Uj=e=>{if(Ld(e))return U0;const t=e.state.status;return e.state=null,t===th?rh(e,dj):Nl},qj=(e,t)=>{let r=t.length;if(Ld(e))return U0;const n=e.state,o=n.wrap;if(o===2||o===1&&n.status!==fp||n.lookahead)return U0;if(o===1&&(e.adler=_d(e.adler,t,r,0)),n.wrap=0,r>=n.w_size){o===0&&(kf(n.head),n.strstart=0,n.block_start=0,n.insert=0);let h=new Uint8Array(n.w_size);h.set(t.subarray(r-n.w_size,r),0),t=h,r=n.w_size}const u=e.avail_in,c=e.next_in,l=e.input;for(e.avail_in=r,e.next_in=0,e.input=t,hp(n);n.lookahead>=Zo;){let h=n.strstart,v=n.lookahead-(Zo-1);do n.ins_h=Mf(n,n.ins_h,n.window[h+Zo-1]),n.prev[h&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=h,h++;while(--v);n.strstart=h,n.lookahead=Zo-1,hp(n)}return n.strstart+=n.lookahead,n.block_start=n.strstart,n.insert=n.lookahead,n.lookahead=0,n.match_length=n.prev_length=Zo-1,n.match_available=0,e.next_in=c,e.input=l,e.avail_in=u,n.wrap=o,Nl};var Vj=Bj,$j=Nx,Gj=zx,Hj=Dx,Wj=Fj,Zj=jj,Xj=Uj,Yj=qj,Jj="pako deflate (from Nodeca project)",Qp={deflateInit:Vj,deflateInit2:$j,deflateReset:Gj,deflateResetKeep:Hj,deflateSetHeader:Wj,deflate:Zj,deflateEnd:Xj,deflateSetDictionary:Yj,deflateInfo:Jj};const Kj=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var Qj=function(e){const t=Array.prototype.slice.call(arguments,1);for(;t.length;){const r=t.shift();if(r){if(typeof r!="object")throw new TypeError(r+"must be non-object");for(const n in r)Kj(r,n)&&(e[n]=r[n])}}return e},eU=e=>{let t=0;for(let n=0,o=e.length;n<o;n++)t+=e[n].length;const r=new Uint8Array(t);for(let n=0,o=0,u=e.length;n<u;n++){let c=e[n];r.set(c,o),o+=c.length}return r},k2={assign:Qj,flattenChunks:eU};let Rx=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{Rx=!1}const bd=new Uint8Array(256);for(let e=0;e<256;e++)bd[e]=e>=252?6:e>=248?5:e>=240?4:e>=224?3:e>=192?2:1;bd[254]=bd[254]=1;var tU=e=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(e);let t,r,n,o,u,c=e.length,l=0;for(o=0;o<c;o++)r=e.charCodeAt(o),(r&64512)===55296&&o+1<c&&(n=e.charCodeAt(o+1),(n&64512)===56320&&(r=65536+(r-55296<<10)+(n-56320),o++)),l+=r<128?1:r<2048?2:r<65536?3:4;for(t=new Uint8Array(l),u=0,o=0;u<l;o++)r=e.charCodeAt(o),(r&64512)===55296&&o+1<c&&(n=e.charCodeAt(o+1),(n&64512)===56320&&(r=65536+(r-55296<<10)+(n-56320),o++)),r<128?t[u++]=r:r<2048?(t[u++]=192|r>>>6,t[u++]=128|r&63):r<65536?(t[u++]=224|r>>>12,t[u++]=128|r>>>6&63,t[u++]=128|r&63):(t[u++]=240|r>>>18,t[u++]=128|r>>>12&63,t[u++]=128|r>>>6&63,t[u++]=128|r&63);return t};const rU=(e,t)=>{if(t<65534&&e.subarray&&Rx)return String.fromCharCode.apply(null,e.length===t?e:e.subarray(0,t));let r="";for(let n=0;n<t;n++)r+=String.fromCharCode(e[n]);return r};var nU=(e,t)=>{const r=t||e.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(e.subarray(0,t));let n,o;const u=new Array(r*2);for(o=0,n=0;n<r;){let c=e[n++];if(c<128){u[o++]=c;continue}let l=bd[c];if(l>4){u[o++]=65533,n+=l-1;continue}for(c&=l===2?31:l===3?15:7;l>1&&n<r;)c=c<<6|e[n++]&63,l--;if(l>1){u[o++]=65533;continue}c<65536?u[o++]=c:(c-=65536,u[o++]=55296|c>>10&1023,u[o++]=56320|c&1023)}return rU(u,o)},iU=(e,t)=>{t=t||e.length,t>e.length&&(t=e.length);let r=t-1;for(;r>=0&&(e[r]&192)===128;)r--;return r<0||r===0?t:r+bd[e[r]]>t?r:t},wd={string2buf:tU,buf2string:nU,utf8border:iU};function oU(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var Ox=oU;const Fx=Object.prototype.toString,{Z_NO_FLUSH:aU,Z_SYNC_FLUSH:sU,Z_FULL_FLUSH:lU,Z_FINISH:uU,Z_OK:K1,Z_STREAM_END:cU,Z_DEFAULT_COMPRESSION:fU,Z_DEFAULT_STRATEGY:hU,Z_DEFLATED:pU}=mh;function Pd(e){this.options=k2.assign({level:fU,method:pU,chunkSize:16384,windowBits:15,memLevel:8,strategy:hU},e||{});let t=this.options;t.raw&&t.windowBits>0?t.windowBits=-t.windowBits:t.gzip&&t.windowBits>0&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Ox,this.strm.avail_out=0;let r=Qp.deflateInit2(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(r!==K1)throw new Error(ch[r]);if(t.header&&Qp.deflateSetHeader(this.strm,t.header),t.dictionary){let n;if(typeof t.dictionary=="string"?n=wd.string2buf(t.dictionary):Fx.call(t.dictionary)==="[object ArrayBuffer]"?n=new Uint8Array(t.dictionary):n=t.dictionary,r=Qp.deflateSetDictionary(this.strm,n),r!==K1)throw new Error(ch[r]);this._dict_set=!0}}Pd.prototype.push=function(e,t){const r=this.strm,n=this.options.chunkSize;let o,u;if(this.ended)return!1;for(t===~~t?u=t:u=t===!0?uU:aU,typeof e=="string"?r.input=wd.string2buf(e):Fx.call(e)==="[object ArrayBuffer]"?r.input=new Uint8Array(e):r.input=e,r.next_in=0,r.avail_in=r.input.length;;){if(r.avail_out===0&&(r.output=new Uint8Array(n),r.next_out=0,r.avail_out=n),(u===sU||u===lU)&&r.avail_out<=6){this.onData(r.output.subarray(0,r.next_out)),r.avail_out=0;continue}if(o=Qp.deflate(r,u),o===cU)return r.next_out>0&&this.onData(r.output.subarray(0,r.next_out)),o=Qp.deflateEnd(this.strm),this.onEnd(o),this.ended=!0,o===K1;if(r.avail_out===0){this.onData(r.output);continue}if(u>0&&r.next_out>0){this.onData(r.output.subarray(0,r.next_out)),r.avail_out=0;continue}if(r.avail_in===0)break}return!0};Pd.prototype.onData=function(e){this.chunks.push(e)};Pd.prototype.onEnd=function(e){e===K1&&(this.result=k2.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};function qv(e,t){const r=new Pd(t);if(r.push(e,!0),r.err)throw r.msg||ch[r.err];return r.result}function dU(e,t){return t=t||{},t.raw=!0,qv(e,t)}function mU(e,t){return t=t||{},t.gzip=!0,qv(e,t)}var gU=Pd,yU=qv,vU=dU,_U=mU,bU=mh,wU={Deflate:gU,deflate:yU,deflateRaw:vU,gzip:_U,constants:bU};const d1=16209,xU=16191;var kU=function(t,r){let n,o,u,c,l,h,v,w,E,T,I,F,U,G,H,X,ee,K,se,ce,_e,pe,Ge,We;const Ae=t.state;n=t.next_in,Ge=t.input,o=n+(t.avail_in-5),u=t.next_out,We=t.output,c=u-(r-t.avail_out),l=u+(t.avail_out-257),h=Ae.dmax,v=Ae.wsize,w=Ae.whave,E=Ae.wnext,T=Ae.window,I=Ae.hold,F=Ae.bits,U=Ae.lencode,G=Ae.distcode,H=(1<<Ae.lenbits)-1,X=(1<<Ae.distbits)-1;e:do{F<15&&(I+=Ge[n++]<<F,F+=8,I+=Ge[n++]<<F,F+=8),ee=U[I&H];t:for(;;){if(K=ee>>>24,I>>>=K,F-=K,K=ee>>>16&255,K===0)We[u++]=ee&65535;else if(K&16){se=ee&65535,K&=15,K&&(F<K&&(I+=Ge[n++]<<F,F+=8),se+=I&(1<<K)-1,I>>>=K,F-=K),F<15&&(I+=Ge[n++]<<F,F+=8,I+=Ge[n++]<<F,F+=8),ee=G[I&X];r:for(;;){if(K=ee>>>24,I>>>=K,F-=K,K=ee>>>16&255,K&16){if(ce=ee&65535,K&=15,F<K&&(I+=Ge[n++]<<F,F+=8,F<K&&(I+=Ge[n++]<<F,F+=8)),ce+=I&(1<<K)-1,ce>h){t.msg="invalid distance too far back",Ae.mode=d1;break e}if(I>>>=K,F-=K,K=u-c,ce>K){if(K=ce-K,K>w&&Ae.sane){t.msg="invalid distance too far back",Ae.mode=d1;break e}if(_e=0,pe=T,E===0){if(_e+=v-K,K<se){se-=K;do We[u++]=T[_e++];while(--K);_e=u-ce,pe=We}}else if(E<K){if(_e+=v+E-K,K-=E,K<se){se-=K;do We[u++]=T[_e++];while(--K);if(_e=0,E<se){K=E,se-=K;do We[u++]=T[_e++];while(--K);_e=u-ce,pe=We}}}else if(_e+=E-K,K<se){se-=K;do We[u++]=T[_e++];while(--K);_e=u-ce,pe=We}for(;se>2;)We[u++]=pe[_e++],We[u++]=pe[_e++],We[u++]=pe[_e++],se-=3;se&&(We[u++]=pe[_e++],se>1&&(We[u++]=pe[_e++]))}else{_e=u-ce;do We[u++]=We[_e++],We[u++]=We[_e++],We[u++]=We[_e++],se-=3;while(se>2);se&&(We[u++]=We[_e++],se>1&&(We[u++]=We[_e++]))}}else if(K&64){t.msg="invalid distance code",Ae.mode=d1;break e}else{ee=G[(ee&65535)+(I&(1<<K)-1)];continue r}break}}else if(K&64)if(K&32){Ae.mode=xU;break e}else{t.msg="invalid literal/length code",Ae.mode=d1;break e}else{ee=U[(ee&65535)+(I&(1<<K)-1)];continue t}break}}while(n<o&&u<l);se=F>>3,n-=se,F-=se<<3,I&=(1<<F)-1,t.next_in=n,t.next_out=u,t.avail_in=n<o?5+(o-n):5-(n-o),t.avail_out=u<l?257+(l-u):257-(u-l),Ae.hold=I,Ae.bits=F};const Ih=15,C3=852,I3=592,T3=0,ag=1,L3=2,AU=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),EU=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),SU=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),CU=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),IU=(e,t,r,n,o,u,c,l)=>{const h=l.bits;let v=0,w=0,E=0,T=0,I=0,F=0,U=0,G=0,H=0,X=0,ee,K,se,ce,_e,pe=null,Ge;const We=new Uint16Array(Ih+1),Ae=new Uint16Array(Ih+1);let Ie=null,Fe,ot,_t;for(v=0;v<=Ih;v++)We[v]=0;for(w=0;w<n;w++)We[t[r+w]]++;for(I=h,T=Ih;T>=1&&We[T]===0;T--);if(I>T&&(I=T),T===0)return o[u++]=1<<24|64<<16|0,o[u++]=1<<24|64<<16|0,l.bits=1,0;for(E=1;E<T&&We[E]===0;E++);for(I<E&&(I=E),G=1,v=1;v<=Ih;v++)if(G<<=1,G-=We[v],G<0)return-1;if(G>0&&(e===T3||T!==1))return-1;for(Ae[1]=0,v=1;v<Ih;v++)Ae[v+1]=Ae[v]+We[v];for(w=0;w<n;w++)t[r+w]!==0&&(c[Ae[t[r+w]]++]=w);if(e===T3?(pe=Ie=c,Ge=20):e===ag?(pe=AU,Ie=EU,Ge=257):(pe=SU,Ie=CU,Ge=0),X=0,w=0,v=E,_e=u,F=I,U=0,se=-1,H=1<<I,ce=H-1,e===ag&&H>C3||e===L3&&H>I3)return 1;for(;;){Fe=v-U,c[w]+1<Ge?(ot=0,_t=c[w]):c[w]>=Ge?(ot=Ie[c[w]-Ge],_t=pe[c[w]-Ge]):(ot=32+64,_t=0),ee=1<<v-U,K=1<<F,E=K;do K-=ee,o[_e+(X>>U)+K]=Fe<<24|ot<<16|_t|0;while(K!==0);for(ee=1<<v-1;X&ee;)ee>>=1;if(ee!==0?(X&=ee-1,X+=ee):X=0,w++,--We[v]===0){if(v===T)break;v=t[r+c[w]]}if(v>I&&(X&ce)!==se){for(U===0&&(U=I),_e+=E,F=v-U,G=1<<F;F+U<T&&(G-=We[F+U],!(G<=0));)F++,G<<=1;if(H+=1<<F,e===ag&&H>C3||e===L3&&H>I3)return 1;se=X&ce,o[se]=I<<24|F<<16|_e-u|0}}return X!==0&&(o[_e+X]=v-U<<24|64<<16|0),l.bits=I,0};var ed=IU;const TU=0,Bx=1,jx=2,{Z_FINISH:P3,Z_BLOCK:LU,Z_TREES:m1,Z_OK:hh,Z_STREAM_END:PU,Z_NEED_DICT:MU,Z_STREAM_ERROR:Jc,Z_DATA_ERROR:Ux,Z_MEM_ERROR:qx,Z_BUF_ERROR:DU,Z_DEFLATED:M3}=mh,A2=16180,D3=16181,z3=16182,N3=16183,R3=16184,O3=16185,F3=16186,B3=16187,j3=16188,U3=16189,Q1=16190,ef=16191,sg=16192,q3=16193,lg=16194,V3=16195,$3=16196,G3=16197,H3=16198,g1=16199,y1=16200,W3=16201,Z3=16202,X3=16203,Y3=16204,J3=16205,ug=16206,K3=16207,Q3=16208,es=16209,Vx=16210,$x=16211,zU=852,NU=592,RU=15,OU=RU,ew=e=>(e>>>24&255)+(e>>>8&65280)+((e&65280)<<8)+((e&255)<<24);function FU(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const gh=e=>{if(!e)return 1;const t=e.state;return!t||t.strm!==e||t.mode<A2||t.mode>$x?1:0},Gx=e=>{if(gh(e))return Jc;const t=e.state;return e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=t.wrap&1),t.mode=A2,t.last=0,t.havedict=0,t.flags=-1,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new Int32Array(zU),t.distcode=t.distdyn=new Int32Array(NU),t.sane=1,t.back=-1,hh},Hx=e=>{if(gh(e))return Jc;const t=e.state;return t.wsize=0,t.whave=0,t.wnext=0,Gx(e)},Wx=(e,t)=>{let r;if(gh(e))return Jc;const n=e.state;return t<0?(r=0,t=-t):(r=(t>>4)+5,t<48&&(t&=15)),t&&(t<8||t>15)?Jc:(n.window!==null&&n.wbits!==t&&(n.window=null),n.wrap=r,n.wbits=t,Hx(e))},Zx=(e,t)=>{if(!e)return Jc;const r=new FU;e.state=r,r.strm=e,r.window=null,r.mode=A2;const n=Wx(e,t);return n!==hh&&(e.state=null),n},BU=e=>Zx(e,OU);let tw=!0,cg,fg;const jU=e=>{if(tw){cg=new Int32Array(512),fg=new Int32Array(32);let t=0;for(;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(ed(Bx,e.lens,0,288,cg,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;ed(jx,e.lens,0,32,fg,0,e.work,{bits:5}),tw=!1}e.lencode=cg,e.lenbits=9,e.distcode=fg,e.distbits=5},Xx=(e,t,r,n)=>{let o;const u=e.state;return u.window===null&&(u.wsize=1<<u.wbits,u.wnext=0,u.whave=0,u.window=new Uint8Array(u.wsize)),n>=u.wsize?(u.window.set(t.subarray(r-u.wsize,r),0),u.wnext=0,u.whave=u.wsize):(o=u.wsize-u.wnext,o>n&&(o=n),u.window.set(t.subarray(r-n,r-n+o),u.wnext),n-=o,n?(u.window.set(t.subarray(r-n,r),0),u.wnext=n,u.whave=u.wsize):(u.wnext+=o,u.wnext===u.wsize&&(u.wnext=0),u.whave<u.wsize&&(u.whave+=o))),0},UU=(e,t)=>{let r,n,o,u,c,l,h,v,w,E,T,I,F,U,G=0,H,X,ee,K,se,ce,_e,pe;const Ge=new Uint8Array(4);let We,Ae;const Ie=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(gh(e)||!e.output||!e.input&&e.avail_in!==0)return Jc;r=e.state,r.mode===ef&&(r.mode=sg),c=e.next_out,o=e.output,h=e.avail_out,u=e.next_in,n=e.input,l=e.avail_in,v=r.hold,w=r.bits,E=l,T=h,pe=hh;e:for(;;)switch(r.mode){case A2:if(r.wrap===0){r.mode=sg;break}for(;w<16;){if(l===0)break e;l--,v+=n[u++]<<w,w+=8}if(r.wrap&2&&v===35615){r.wbits===0&&(r.wbits=15),r.check=0,Ge[0]=v&255,Ge[1]=v>>>8&255,r.check=hl(r.check,Ge,2,0),v=0,w=0,r.mode=D3;break}if(r.head&&(r.head.done=!1),!(r.wrap&1)||(((v&255)<<8)+(v>>8))%31){e.msg="incorrect header check",r.mode=es;break}if((v&15)!==M3){e.msg="unknown compression method",r.mode=es;break}if(v>>>=4,w-=4,_e=(v&15)+8,r.wbits===0&&(r.wbits=_e),_e>15||_e>r.wbits){e.msg="invalid window size",r.mode=es;break}r.dmax=1<<r.wbits,r.flags=0,e.adler=r.check=1,r.mode=v&512?U3:ef,v=0,w=0;break;case D3:for(;w<16;){if(l===0)break e;l--,v+=n[u++]<<w,w+=8}if(r.flags=v,(r.flags&255)!==M3){e.msg="unknown compression method",r.mode=es;break}if(r.flags&57344){e.msg="unknown header flags set",r.mode=es;break}r.head&&(r.head.text=v>>8&1),r.flags&512&&r.wrap&4&&(Ge[0]=v&255,Ge[1]=v>>>8&255,r.check=hl(r.check,Ge,2,0)),v=0,w=0,r.mode=z3;case z3:for(;w<32;){if(l===0)break e;l--,v+=n[u++]<<w,w+=8}r.head&&(r.head.time=v),r.flags&512&&r.wrap&4&&(Ge[0]=v&255,Ge[1]=v>>>8&255,Ge[2]=v>>>16&255,Ge[3]=v>>>24&255,r.check=hl(r.check,Ge,4,0)),v=0,w=0,r.mode=N3;case N3:for(;w<16;){if(l===0)break e;l--,v+=n[u++]<<w,w+=8}r.head&&(r.head.xflags=v&255,r.head.os=v>>8),r.flags&512&&r.wrap&4&&(Ge[0]=v&255,Ge[1]=v>>>8&255,r.check=hl(r.check,Ge,2,0)),v=0,w=0,r.mode=R3;case R3:if(r.flags&1024){for(;w<16;){if(l===0)break e;l--,v+=n[u++]<<w,w+=8}r.length=v,r.head&&(r.head.extra_len=v),r.flags&512&&r.wrap&4&&(Ge[0]=v&255,Ge[1]=v>>>8&255,r.check=hl(r.check,Ge,2,0)),v=0,w=0}else r.head&&(r.head.extra=null);r.mode=O3;case O3:if(r.flags&1024&&(I=r.length,I>l&&(I=l),I&&(r.head&&(_e=r.head.extra_len-r.length,r.head.extra||(r.head.extra=new Uint8Array(r.head.extra_len)),r.head.extra.set(n.subarray(u,u+I),_e)),r.flags&512&&r.wrap&4&&(r.check=hl(r.check,n,I,u)),l-=I,u+=I,r.length-=I),r.length))break e;r.length=0,r.mode=F3;case F3:if(r.flags&2048){if(l===0)break e;I=0;do _e=n[u+I++],r.head&&_e&&r.length<65536&&(r.head.name+=String.fromCharCode(_e));while(_e&&I<l);if(r.flags&512&&r.wrap&4&&(r.check=hl(r.check,n,I,u)),l-=I,u+=I,_e)break e}else r.head&&(r.head.name=null);r.length=0,r.mode=B3;case B3:if(r.flags&4096){if(l===0)break e;I=0;do _e=n[u+I++],r.head&&_e&&r.length<65536&&(r.head.comment+=String.fromCharCode(_e));while(_e&&I<l);if(r.flags&512&&r.wrap&4&&(r.check=hl(r.check,n,I,u)),l-=I,u+=I,_e)break e}else r.head&&(r.head.comment=null);r.mode=j3;case j3:if(r.flags&512){for(;w<16;){if(l===0)break e;l--,v+=n[u++]<<w,w+=8}if(r.wrap&4&&v!==(r.check&65535)){e.msg="header crc mismatch",r.mode=es;break}v=0,w=0}r.head&&(r.head.hcrc=r.flags>>9&1,r.head.done=!0),e.adler=r.check=0,r.mode=ef;break;case U3:for(;w<32;){if(l===0)break e;l--,v+=n[u++]<<w,w+=8}e.adler=r.check=ew(v),v=0,w=0,r.mode=Q1;case Q1:if(r.havedict===0)return e.next_out=c,e.avail_out=h,e.next_in=u,e.avail_in=l,r.hold=v,r.bits=w,MU;e.adler=r.check=1,r.mode=ef;case ef:if(t===LU||t===m1)break e;case sg:if(r.last){v>>>=w&7,w-=w&7,r.mode=ug;break}for(;w<3;){if(l===0)break e;l--,v+=n[u++]<<w,w+=8}switch(r.last=v&1,v>>>=1,w-=1,v&3){case 0:r.mode=q3;break;case 1:if(jU(r),r.mode=g1,t===m1){v>>>=2,w-=2;break e}break;case 2:r.mode=$3;break;case 3:e.msg="invalid block type",r.mode=es}v>>>=2,w-=2;break;case q3:for(v>>>=w&7,w-=w&7;w<32;){if(l===0)break e;l--,v+=n[u++]<<w,w+=8}if((v&65535)!==(v>>>16^65535)){e.msg="invalid stored block lengths",r.mode=es;break}if(r.length=v&65535,v=0,w=0,r.mode=lg,t===m1)break e;case lg:r.mode=V3;case V3:if(I=r.length,I){if(I>l&&(I=l),I>h&&(I=h),I===0)break e;o.set(n.subarray(u,u+I),c),l-=I,u+=I,h-=I,c+=I,r.length-=I;break}r.mode=ef;break;case $3:for(;w<14;){if(l===0)break e;l--,v+=n[u++]<<w,w+=8}if(r.nlen=(v&31)+257,v>>>=5,w-=5,r.ndist=(v&31)+1,v>>>=5,w-=5,r.ncode=(v&15)+4,v>>>=4,w-=4,r.nlen>286||r.ndist>30){e.msg="too many length or distance symbols",r.mode=es;break}r.have=0,r.mode=G3;case G3:for(;r.have<r.ncode;){for(;w<3;){if(l===0)break e;l--,v+=n[u++]<<w,w+=8}r.lens[Ie[r.have++]]=v&7,v>>>=3,w-=3}for(;r.have<19;)r.lens[Ie[r.have++]]=0;if(r.lencode=r.lendyn,r.lenbits=7,We={bits:r.lenbits},pe=ed(TU,r.lens,0,19,r.lencode,0,r.work,We),r.lenbits=We.bits,pe){e.msg="invalid code lengths set",r.mode=es;break}r.have=0,r.mode=H3;case H3:for(;r.have<r.nlen+r.ndist;){for(;G=r.lencode[v&(1<<r.lenbits)-1],H=G>>>24,X=G>>>16&255,ee=G&65535,!(H<=w);){if(l===0)break e;l--,v+=n[u++]<<w,w+=8}if(ee<16)v>>>=H,w-=H,r.lens[r.have++]=ee;else{if(ee===16){for(Ae=H+2;w<Ae;){if(l===0)break e;l--,v+=n[u++]<<w,w+=8}if(v>>>=H,w-=H,r.have===0){e.msg="invalid bit length repeat",r.mode=es;break}_e=r.lens[r.have-1],I=3+(v&3),v>>>=2,w-=2}else if(ee===17){for(Ae=H+3;w<Ae;){if(l===0)break e;l--,v+=n[u++]<<w,w+=8}v>>>=H,w-=H,_e=0,I=3+(v&7),v>>>=3,w-=3}else{for(Ae=H+7;w<Ae;){if(l===0)break e;l--,v+=n[u++]<<w,w+=8}v>>>=H,w-=H,_e=0,I=11+(v&127),v>>>=7,w-=7}if(r.have+I>r.nlen+r.ndist){e.msg="invalid bit length repeat",r.mode=es;break}for(;I--;)r.lens[r.have++]=_e}}if(r.mode===es)break;if(r.lens[256]===0){e.msg="invalid code -- missing end-of-block",r.mode=es;break}if(r.lenbits=9,We={bits:r.lenbits},pe=ed(Bx,r.lens,0,r.nlen,r.lencode,0,r.work,We),r.lenbits=We.bits,pe){e.msg="invalid literal/lengths set",r.mode=es;break}if(r.distbits=6,r.distcode=r.distdyn,We={bits:r.distbits},pe=ed(jx,r.lens,r.nlen,r.ndist,r.distcode,0,r.work,We),r.distbits=We.bits,pe){e.msg="invalid distances set",r.mode=es;break}if(r.mode=g1,t===m1)break e;case g1:r.mode=y1;case y1:if(l>=6&&h>=258){e.next_out=c,e.avail_out=h,e.next_in=u,e.avail_in=l,r.hold=v,r.bits=w,kU(e,T),c=e.next_out,o=e.output,h=e.avail_out,u=e.next_in,n=e.input,l=e.avail_in,v=r.hold,w=r.bits,r.mode===ef&&(r.back=-1);break}for(r.back=0;G=r.lencode[v&(1<<r.lenbits)-1],H=G>>>24,X=G>>>16&255,ee=G&65535,!(H<=w);){if(l===0)break e;l--,v+=n[u++]<<w,w+=8}if(X&&!(X&240)){for(K=H,se=X,ce=ee;G=r.lencode[ce+((v&(1<<K+se)-1)>>K)],H=G>>>24,X=G>>>16&255,ee=G&65535,!(K+H<=w);){if(l===0)break e;l--,v+=n[u++]<<w,w+=8}v>>>=K,w-=K,r.back+=K}if(v>>>=H,w-=H,r.back+=H,r.length=ee,X===0){r.mode=J3;break}if(X&32){r.back=-1,r.mode=ef;break}if(X&64){e.msg="invalid literal/length code",r.mode=es;break}r.extra=X&15,r.mode=W3;case W3:if(r.extra){for(Ae=r.extra;w<Ae;){if(l===0)break e;l--,v+=n[u++]<<w,w+=8}r.length+=v&(1<<r.extra)-1,v>>>=r.extra,w-=r.extra,r.back+=r.extra}r.was=r.length,r.mode=Z3;case Z3:for(;G=r.distcode[v&(1<<r.distbits)-1],H=G>>>24,X=G>>>16&255,ee=G&65535,!(H<=w);){if(l===0)break e;l--,v+=n[u++]<<w,w+=8}if(!(X&240)){for(K=H,se=X,ce=ee;G=r.distcode[ce+((v&(1<<K+se)-1)>>K)],H=G>>>24,X=G>>>16&255,ee=G&65535,!(K+H<=w);){if(l===0)break e;l--,v+=n[u++]<<w,w+=8}v>>>=K,w-=K,r.back+=K}if(v>>>=H,w-=H,r.back+=H,X&64){e.msg="invalid distance code",r.mode=es;break}r.offset=ee,r.extra=X&15,r.mode=X3;case X3:if(r.extra){for(Ae=r.extra;w<Ae;){if(l===0)break e;l--,v+=n[u++]<<w,w+=8}r.offset+=v&(1<<r.extra)-1,v>>>=r.extra,w-=r.extra,r.back+=r.extra}if(r.offset>r.dmax){e.msg="invalid distance too far back",r.mode=es;break}r.mode=Y3;case Y3:if(h===0)break e;if(I=T-h,r.offset>I){if(I=r.offset-I,I>r.whave&&r.sane){e.msg="invalid distance too far back",r.mode=es;break}I>r.wnext?(I-=r.wnext,F=r.wsize-I):F=r.wnext-I,I>r.length&&(I=r.length),U=r.window}else U=o,F=c-r.offset,I=r.length;I>h&&(I=h),h-=I,r.length-=I;do o[c++]=U[F++];while(--I);r.length===0&&(r.mode=y1);break;case J3:if(h===0)break e;o[c++]=r.length,h--,r.mode=y1;break;case ug:if(r.wrap){for(;w<32;){if(l===0)break e;l--,v|=n[u++]<<w,w+=8}if(T-=h,e.total_out+=T,r.total+=T,r.wrap&4&&T&&(e.adler=r.check=r.flags?hl(r.check,o,T,c-T):_d(r.check,o,T,c-T)),T=h,r.wrap&4&&(r.flags?v:ew(v))!==r.check){e.msg="incorrect data check",r.mode=es;break}v=0,w=0}r.mode=K3;case K3:if(r.wrap&&r.flags){for(;w<32;){if(l===0)break e;l--,v+=n[u++]<<w,w+=8}if(r.wrap&4&&v!==(r.total&4294967295)){e.msg="incorrect length check",r.mode=es;break}v=0,w=0}r.mode=Q3;case Q3:pe=PU;break e;case es:pe=Ux;break e;case Vx:return qx;case $x:default:return Jc}return e.next_out=c,e.avail_out=h,e.next_in=u,e.avail_in=l,r.hold=v,r.bits=w,(r.wsize||T!==e.avail_out&&r.mode<es&&(r.mode<ug||t!==P3))&&Xx(e,e.output,e.next_out,T-e.avail_out),E-=e.avail_in,T-=e.avail_out,e.total_in+=E,e.total_out+=T,r.total+=T,r.wrap&4&&T&&(e.adler=r.check=r.flags?hl(r.check,o,T,e.next_out-T):_d(r.check,o,T,e.next_out-T)),e.data_type=r.bits+(r.last?64:0)+(r.mode===ef?128:0)+(r.mode===g1||r.mode===lg?256:0),(E===0&&T===0||t===P3)&&pe===hh&&(pe=DU),pe},qU=e=>{if(gh(e))return Jc;let t=e.state;return t.window&&(t.window=null),e.state=null,hh},VU=(e,t)=>{if(gh(e))return Jc;const r=e.state;return r.wrap&2?(r.head=t,t.done=!1,hh):Jc},$U=(e,t)=>{const r=t.length;let n,o,u;return gh(e)||(n=e.state,n.wrap!==0&&n.mode!==Q1)?Jc:n.mode===Q1&&(o=1,o=_d(o,t,r,0),o!==n.check)?Ux:(u=Xx(e,t,r,r),u?(n.mode=Vx,qx):(n.havedict=1,hh))};var GU=Hx,HU=Wx,WU=Gx,ZU=BU,XU=Zx,YU=UU,JU=qU,KU=VU,QU=$U,eq="pako inflate (from Nodeca project)",nf={inflateReset:GU,inflateReset2:HU,inflateResetKeep:WU,inflateInit:ZU,inflateInit2:XU,inflate:YU,inflateEnd:JU,inflateGetHeader:KU,inflateSetDictionary:QU,inflateInfo:eq};function tq(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var rq=tq;const Yx=Object.prototype.toString,{Z_NO_FLUSH:nq,Z_FINISH:iq,Z_OK:xd,Z_STREAM_END:hg,Z_NEED_DICT:pg,Z_STREAM_ERROR:oq,Z_DATA_ERROR:rw,Z_MEM_ERROR:aq}=mh;function Md(e){this.options=k2.assign({chunkSize:1024*64,windowBits:15,to:""},e||{});const t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,t.windowBits===0&&(t.windowBits=-15)),t.windowBits>=0&&t.windowBits<16&&!(e&&e.windowBits)&&(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&(t.windowBits&15||(t.windowBits|=15)),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Ox,this.strm.avail_out=0;let r=nf.inflateInit2(this.strm,t.windowBits);if(r!==xd)throw new Error(ch[r]);if(this.header=new rq,nf.inflateGetHeader(this.strm,this.header),t.dictionary&&(typeof t.dictionary=="string"?t.dictionary=wd.string2buf(t.dictionary):Yx.call(t.dictionary)==="[object ArrayBuffer]"&&(t.dictionary=new Uint8Array(t.dictionary)),t.raw&&(r=nf.inflateSetDictionary(this.strm,t.dictionary),r!==xd)))throw new Error(ch[r])}Md.prototype.push=function(e,t){const r=this.strm,n=this.options.chunkSize,o=this.options.dictionary;let u,c,l;if(this.ended)return!1;for(t===~~t?c=t:c=t===!0?iq:nq,Yx.call(e)==="[object ArrayBuffer]"?r.input=new Uint8Array(e):r.input=e,r.next_in=0,r.avail_in=r.input.length;;){for(r.avail_out===0&&(r.output=new Uint8Array(n),r.next_out=0,r.avail_out=n),u=nf.inflate(r,c),u===pg&&o&&(u=nf.inflateSetDictionary(r,o),u===xd?u=nf.inflate(r,c):u===rw&&(u=pg));r.avail_in>0&&u===hg&&r.state.wrap>0&&e[r.next_in]!==0;)nf.inflateReset(r),u=nf.inflate(r,c);switch(u){case oq:case rw:case pg:case aq:return this.onEnd(u),this.ended=!0,!1}if(l=r.avail_out,r.next_out&&(r.avail_out===0||u===hg))if(this.options.to==="string"){let h=wd.utf8border(r.output,r.next_out),v=r.next_out-h,w=wd.buf2string(r.output,h);r.next_out=v,r.avail_out=n-v,v&&r.output.set(r.output.subarray(h,h+v),0),this.onData(w)}else this.onData(r.output.length===r.next_out?r.output:r.output.subarray(0,r.next_out));if(!(u===xd&&l===0)){if(u===hg)return u=nf.inflateEnd(this.strm),this.onEnd(u),this.ended=!0,!0;if(r.avail_in===0)break}}return!0};Md.prototype.onData=function(e){this.chunks.push(e)};Md.prototype.onEnd=function(e){e===xd&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=k2.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};function Vv(e,t){const r=new Md(t);if(r.push(e),r.err)throw r.msg||ch[r.err];return r.result}function sq(e,t){return t=t||{},t.raw=!0,Vv(e,t)}var lq=Md,uq=Vv,cq=sq,fq=Vv,hq=mh,pq={Inflate:lq,inflate:uq,inflateRaw:cq,ungzip:fq,constants:hq};const{Deflate:dq,deflate:mq,deflateRaw:gq,gzip:yq}=wU,{Inflate:vq,inflate:_q,inflateRaw:bq,ungzip:wq}=pq;var xq=dq,kq=mq,Aq=gq,Eq=yq,Sq=vq,Cq=_q,Iq=bq,Tq=wq,Lq=mh,Pq={Deflate:xq,deflate:kq,deflateRaw:Aq,gzip:Eq,Inflate:Sq,inflate:Cq,inflateRaw:Iq,ungzip:Tq,constants:Lq};class ky{constructor(t){this.decode=()=>{const n=new Uint8Array(this.width*this.height*4),o=this.decodePixels();return this.copyImageDataToBuffer(n,o),n},this.copyImageDataToBuffer=(n,o)=>{let u=this.colors,c,l=this.hasAlphaChannel;this.palette.length&&(c=this.decodePalette(),u=4,l=!0);const h=n,v=h.length,w=c||o;let E=0,T=0;if(u===1)for(;E<v;){let I=c?o[E/4]*4:T;const F=w[I++];h[E++]=F,h[E++]=F,h[E++]=F,h[E++]=l?w[I++]:255,T=I}else for(;E<v;){let I=c?o[E/4]*4:T;h[E++]=w[I++],h[E++]=w[I++],h[E++]=w[I++],h[E++]=l?w[I++]:255,T=I}},this.decodePixels=()=>{const n=Pq.inflate(this.imgData),o=this.pixelBitlength/8,u=o*this.width,c=new Uint8Array(u*this.height),l=n.length;let h=0,v=0,w=0;for(;v<l;){switch(n[v++]){case 0:{for(let E=0;E<u;E++)c[w++]=n[v++];break}case 1:{for(let E=0;E<u;E++){const T=n[v++],I=E<o?0:c[w-o];c[w++]=(T+I)%256}break}case 2:{for(let E=0;E<u;E++){const T=n[v++],I=(E-E%o)/o,F=(h-1)*u+I*o+E%o,U=h&&c[F];c[w++]=(U+T)%256}break}case 3:{for(let E=0;E<u;E++){const T=n[v++],I=(E-E%o)/o,F=E<o?0:c[w-o],U=(h-1)*u+I*o+E%o,G=h&&c[U];c[w++]=(T+Math.floor((F+G)/2))%256}break}case 4:{for(let E=0;E<u;E++){const T=n[v++],I=(E-E%o)/o,F=E<o?0:c[w-o];let U,G;if(h===0)U=G=0;else{const ce=(h-1)*u+I*o+E%o,_e=(h-1)*u+(I-1)*o+E%o;U=c[ce],G=I&&c[_e]}const H=F+U-G,X=Math.abs(H-F),ee=Math.abs(H-U),K=Math.abs(H-G);let se;X<=ee&&X<=K?se=F:ee<=K?se=U:se=G,c[w++]=(T+se)%256}break}default:throw new Error(`Invalid filter algorithm: ${n[v-1]}`)}h++}return c},this.read=n=>{const o=[];for(let u=0;u<n;u++)o[u]=this.data[this.pos++];return o},this.readUInt32=()=>{const n=this.data[this.pos++]<<24,o=this.data[this.pos++]<<16,u=this.data[this.pos++]<<8,c=this.data[this.pos++];return n|o|u|c},this.decodePalette=()=>{const n=this.palette,o=this.transparency.indexed||[],u=new Uint8Array(o.length+n.length);let c=0,l=0;for(let h=0;h<n.length;h++){u[c++]=n[h],u[c++]=n[h+1],u[c++]=n[h+2];const v=o[l++];u[c++]=v!==void 0?v:255}return u},this.data=t,this.pos=8,this.palette=[];const r=[];for(this.transparency={},this.text={};;){const n=this.readUInt32();let o="";for(let u=0;u<4;u++)o+=String.fromCharCode(this.data[this.pos++]);switch(o){case"IHDR":{this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break}case"PLTE":{this.palette=this.read(n);break}case"IDAT":{for(let u=0;u<n;u++)r.push(this.data[this.pos++]);break}case"tRNS":{switch(this.transparency={},this.colorType){case 3:{if(this.transparency.indexed=this.read(n),255-this.transparency.indexed.length>0)for(let c=0;c<255;c++)this.transparency.indexed.push(255);break}case 0:{this.transparency.grayscale=this.read(n)[0];break}case 2:{this.transparency.rgb=this.read(n);break}}break}case"tEXt":{const u=this.read(n),c=u.indexOf(0),l=String.fromCharCode(...u.slice(0,c));this.text[l]=String.fromCharCode(...u.slice(c+1));break}case"IEND":{const u={0:1,3:1,4:1,2:3,6:3};this.colors=u[this.colorType],this.hasAlphaChannel=[4,6].includes(this.colorType);const c=this.colors+(this.hasAlphaChannel?1:0);this.pixelBitlength=this.bits*c,this.colorSpace={1:"DeviceGray",3:"DeviceRGB"}[this.colors],this.imgData=new Uint8Array(r);return}default:this.pos+=n}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}}ky.load=e=>new ky(e);class Mq{constructor(t,r,n,o){this.url=t,this.tileSize=r,this.minzoom=n,this.maxzoom=o}getValue(t,r){return new Promise((n,o)=>{const u=t[0],c=t[1];let l=r;r>this.maxzoom?l=this.maxzoom:r<this.minzoom&&(l=this.minzoom);const h=SB([u,c],l),v=this.url.replace(/{x}/g,h[0].toString()).replace(/{y}/g,h[1].toString()).replace(/{z}/g,h[2].toString());let w=this.getUrlExtension(v);switch(w||(w="png"),w){case"png":pB.get(v,{responseType:"arraybuffer"}).then(E=>{const T=Buffer.from(E.data,"binary"),I=this.getValueFromPNG(T,h,u,c);n(I)}).catch(E=>o(E));break;case"webp":dx(v).then(E=>{this.getValueFromWEBP(E,h,u,c).then(T=>{n(T)}).catch(T=>o(T))}).catch(E=>o(E));break;default:o(new Error(`Invalid file extension: ${w}`));break}})}getValueFromPNG(t,r,n,o){const c=ky.load(t).decode(),l=this.pixels2rgba(c,r,n,o);return this.calc(l[0],l[1],l[2],l[3])}getValueFromWEBP(t,r,n,o){return new Promise((u,c)=>{new wB().decode(t).then(h=>{const v=this.dataURIConverter(h),w=this.getValueFromPNG(v,r,n,o);u(w)}).catch(h=>c(h))})}pixels2rgba(t,r,n,o){const u=[];for(let w=0;w<t.length;w+=4){const E=t[w],T=t[w+1],I=t[w+2],F=t[w+3],U=[E,T,I,F];u.push(U)}const c=this.tileToBBOX(r),l=this.getPixelPosition(n,o,c),h=l[0]+l[1]*this.tileSize;return u[h]}getPixelPosition(t,r,n){const o=this.tileSize,u=this.tileSize,c=n[2]-n[0],l=n[3]-n[1],h=(t-n[0])/c,v=(r-n[1])/l,w=Math.floor(o*h),E=Math.floor(u*(1-v));return[w,E]}getUrlExtension(t){let r=t.split(/[#?]/)[0].split(".").pop();return r&&(r=r.trim()),r}dataURIConverter(t){const r=atob(t.split(",")[1]),n=new Uint8Array(r.length);for(let o=0;o<r.length;o+=1)n[o]=r.charCodeAt(o);return n}tileToBBOX(t){const r=this.tile2lon(t[0]+1,t[2]),n=this.tile2lon(t[0],t[2]),o=this.tile2lat(t[1]+1,t[2]),u=this.tile2lat(t[1],t[2]);return[n,o,r,u]}tile2lon(t,r){return t/Math.pow(2,r)*360-180}tile2lat(t,r){const n=180/Math.PI,o=Math.PI-2*Math.PI*t/Math.pow(2,r);return n*Math.atan(.5*(Math.exp(o)-Math.exp(-o)))}}var Dq=globalThis&&globalThis.__awaiter||function(e,t,r,n){function o(u){return u instanceof r?u:new r(function(c){c(u)})}return new(r||(r=Promise))(function(u,c){function l(w){try{v(n.next(w))}catch(E){c(E)}}function h(w){try{v(n.throw(w))}catch(E){c(E)}}function v(w){w.done?u(w.value):o(w.value).then(l,h)}v((n=n.apply(e,t||[])).next())})};class zq extends Mq{constructor(t,r,n=5,o=15){super(t,r,n,o)}getElevation(t,r){return Dq(this,void 0,void 0,function*(){return yield this.getValue(t,r)})}calc(t,r,n){return-1e4+(t*256*256+r*256+n)*.1}}var ec=63710088e-1,Nq={centimeters:ec*100,centimetres:ec*100,degrees:ec/111325,feet:ec*3.28084,inches:ec*39.37,kilometers:ec/1e3,kilometres:ec/1e3,meters:ec,metres:ec,miles:ec/1609.344,millimeters:ec*1e3,millimetres:ec*1e3,nauticalmiles:ec/1852,radians:1,yards:ec*1.0936};function Rq(e,t){t===void 0&&(t="kilometers");var r=Nq[t];if(!r)throw new Error(t+" units is invalid");return e*r}function v1(e){var t=e%360;return t*Math.PI/180}function nw(e){if(!e)throw new Error("coord is required");if(!Array.isArray(e)){if(e.type==="Feature"&&e.geometry!==null&&e.geometry.type==="Point")return e.geometry.coordinates;if(e.type==="Point")return e.coordinates}if(Array.isArray(e)&&e.length>=2&&!Array.isArray(e[0])&&!Array.isArray(e[1]))return e;throw new Error("coord must be GeoJSON Point or an Array of numbers")}function Oq(e,t,r){r===void 0&&(r={});var n=nw(e),o=nw(t),u=v1(o[1]-n[1]),c=v1(o[0]-n[0]),l=v1(n[1]),h=v1(o[1]),v=Math.pow(Math.sin(u/2),2)+Math.pow(Math.sin(c/2),2)*Math.cos(l)*Math.cos(h);return Rq(2*Math.atan2(Math.sqrt(v),Math.sqrt(1-v)),r.units)}const Th="elev-controls-source-line",dg="elev-controls-layer-line",mg="elev-controls-layer-symbol",Lh="elev-controls-source-symbol",Fq={tileSize:512,font:["Roboto Medium"],fontSize:12,fontHalo:1,mainColor:"#263238",haloColor:"#fff"};class Bq{constructor(t,r,n){Bi(this,"map");Bi(this,"measureOption",Object.assign({},Fq));Bi(this,"terrainRgbUrl");Bi(this,"units","kilometers");Bi(this,"measureControlData");Bi(this,"isMeasure",!1);Bi(this,"isClickListenerAdded",!1);this.map=t,this.terrainRgbUrl=r,this.measureOption=Object.assign(this.measureOption,n),this.measureControlData={markers:[],coordinates:[],elevations:[]}}hasData(){return this.measureControlData&&this.measureControlData.coordinates.length>0}measuringOn(){this.map&&(this.map.getCanvas().style.cursor="crosshair",this.isClickListenerAdded||(this.map.on("click",this.mapClickListener.bind(this)),this.isClickListenerAdded=!0),this.map.fire("measure.on"),this.isMeasure=!0)}measuringOff(){this.map&&(this.map.getCanvas().style.cursor="",this.map.off("click",this.mapClickListener.bind(this)),this.map.fire("measure.off"),this.isMeasure=!1)}clearFeatures(){this.map&&(this.map.getLayer(dg)&&this.map.removeLayer(dg),this.map.getLayer(mg)&&this.map.removeLayer(mg),this.map.getSource(Th)&&this.map.removeSource(Th),this.map.getSource(Lh)&&this.map.removeSource(Lh)),this.measureControlData.markers.forEach(t=>t.remove()),this.map.fire("measure.clear")}mapClickListener(t){if(!this.isMeasure)return;(!this.map.getSource(Th)||!this.map.getSource(Lh))&&(this.clearFeatures(),this.initFeatures());let r=this.map.getZoom();r||(r=15),r=Math.round(r);const n=[t.lngLat.lng,t.lngLat.lat],o=this.measureOption.tileSize?this.measureOption.tileSize:512;this.terrainRgbUrl?new zq(this.terrainRgbUrl,o).getElevation(n,r).then(c=>{c||(c=-1),this.addPoint(t.lngLat,c)}):this.addPoint(t.lngLat)}addPoint(t,r){const n=new Ec.Marker({draggable:!0}).setLngLat(t).addTo(this.map);this.measureControlData.markers.push(n),r?(this.measureControlData.coordinates.push([t.lng,t.lat,r]),this.measureControlData.elevations.push(r)):this.measureControlData.coordinates.push([t.lng,t.lat]),this.map.getSource(Th).setData(this.geoLineString(this.measureControlData.coordinates)),this.map.getSource(Lh).setData(this.geoPoint(this.measureControlData.coordinates)),this.map.fire("measure.add",{lnglat:t,elevation:r})}initFeatures(){this.measureControlData.markers=[],this.measureControlData.coordinates=[],this.measureControlData.elevations=[],this.map&&(this.map.addSource(Th,{type:"geojson",data:this.geoLineString(this.measureControlData.coordinates)}),this.map.addSource(Lh,{type:"geojson",data:this.geoPoint(this.measureControlData.coordinates)}),this.map.addLayer({id:dg,type:"line",source:Th,paint:{"line-color":this.measureOption.mainColor,"line-width":2}}),this.map.addLayer({id:mg,type:"symbol",source:Lh,layout:{"text-field":"{text}","text-font":this.measureOption.font,"text-size":this.measureOption.fontSize,"text-variable-anchor":["top","bottom","left","right"],"text-radial-offset":.8,"text-justify":"auto"},paint:{"text-color":this.measureOption.mainColor,"text-halo-color":this.measureOption.haloColor,"text-halo-width":this.measureOption.fontHalo}}))}labelFormat(t,r){let n=`${t.toFixed(2)} km`;t<1&&(n=`${(t*1e3).toFixed()} m`);let o="";return r&&r>0&&(o=`
alt.${r}m`),`${n}${o}`}geoLineString(t=[]){return{type:"Feature",properties:{},geometry:{type:"LineString",coordinates:t}}}geoPoint(t=[]){let r=0;return{type:"FeatureCollection",features:t.map((n,o)=>(o>0&&(r+=Oq(t[o-1],t[o],{units:this.units})),{type:"Feature",properties:{id:o+1,text:this.labelFormat(r,n[2]),elevation:n[2],length:(r*1e3).toFixed()},geometry:{type:"Point",coordinates:n}}))}}downloadGeoJSON(){if(this.measureControlData.coordinates.length===0)return;const t=this.geoPoint(this.measureControlData.coordinates);if(t.features.forEach(o=>{delete o.properties.text}),this.measureControlData.coordinates.length>1){const o=this.geoLineString(this.measureControlData.coordinates);t.features.push(o)}const r="measure_result.geojson",n=JSON.stringify(t);this.download(r,n)}download(t,r){const n=new Blob([r],{type:"text/plain"}),o=document.createElement("a");o.href=URL.createObjectURL(n),o.setAttribute("download",t),o.dispatchEvent(new MouseEvent("click"))}}const iw=hf(void 0);function ow(e){let t,r,n,o,u,c,l,h,v,w,E,T,I,F,U,G,H,X,ee,K;const se=[Uq,jq],ce=[];function _e(Ae,Ie){return Ae[2]?0:1}o=_e(e),u=ce[o]=se[o](e);function pe(Ae,Ie){return Ae[2]?Vq:qq}let Ge=pe(e),We=Ge(e);return E=new go({props:{icon:My}}),G=new go({props:{icon:Ow}}),{c(){t=yt("div"),r=yt("button"),n=yt("span"),u.c(),c=mr(),l=yt("span"),We.c(),h=mr(),v=yt("button"),w=yt("span"),Ut(E.$$.fragment),I=mr(),F=yt("button"),U=yt("span"),Ut(G.$$.fragment),this.h()},l(Ae){t=vt(Ae,"DIV",{class:!0});var Ie=Ct(t);r=vt(Ie,"BUTTON",{class:!0});var Fe=Ct(r);n=vt(Fe,"SPAN",{class:!0});var ot=Ct(n);u.l(ot),ot.forEach(ge),c=gr(Fe),l=vt(Fe,"SPAN",{});var _t=Ct(l);We.l(_t),_t.forEach(ge),Fe.forEach(ge),h=gr(Ie),v=vt(Ie,"BUTTON",{class:!0});var ht=Ct(v);w=vt(ht,"SPAN",{});var $e=Ct(w);Yt(E.$$.fragment,$e),$e.forEach(ge),ht.forEach(ge),I=gr(Ie),F=vt(Ie,"BUTTON",{class:!0});var ut=Ct(F);U=vt(ut,"SPAN",{});var bt=Ct(U);Yt(G.$$.fragment,bt),bt.forEach(ge),ut.forEach(ge),Ie.forEach(ge),this.h()},h(){ve(n,"class","control-icon svelte-1bv29kx"),ve(r,"class","control-button svelte-1bv29kx"),ve(v,"class","setting-button svelte-1bv29kx"),v.disabled=T=!e[3],ve(F,"class","setting-button svelte-1bv29kx"),F.disabled=H=!e[3],ve(t,"class","measure-container svelte-1bv29kx")},m(Ae,Ie){Lt(Ae,t,Ie),lt(t,r),lt(r,n),ce[o].m(n,null),lt(r,c),lt(r,l),We.m(l,null),lt(t,h),lt(t,v),lt(v,w),qt(E,w,null),lt(t,I),lt(t,F),lt(F,U),qt(G,U,null),X=!0,ee||(K=[rn(r,"click",e[7]),rn(v,"click",e[8]),rn(F,"click",e[9])],ee=!0)},p(Ae,Ie){let Fe=o;o=_e(Ae),o===Fe?ce[o].p(Ae,Ie):(ji(),it(ce[Fe],1,1,()=>{ce[Fe]=null}),Ui(),u=ce[o],u?u.p(Ae,Ie):(u=ce[o]=se[o](Ae),u.c()),Xe(u,1),u.m(n,null)),Ge!==(Ge=pe(Ae))&&(We.d(1),We=Ge(Ae),We&&(We.c(),We.m(l,null))),(!X||Ie&8&&T!==(T=!Ae[3]))&&(v.disabled=T),(!X||Ie&8&&H!==(H=!Ae[3]))&&(F.disabled=H)},i(Ae){X||(Xe(u),Xe(E.$$.fragment,Ae),Xe(G.$$.fragment,Ae),X=!0)},o(Ae){it(u),it(E.$$.fragment,Ae),it(G.$$.fragment,Ae),X=!1},d(Ae){Ae&&ge(t),ce[o].d(),We.d(),Vt(E),Vt(G),ee=!1,oa(K)}}}function jq(e){let t,r;return t=new go({props:{icon:Dy}}),{c(){Ut(t.$$.fragment)},l(n){Yt(t.$$.fragment,n)},m(n,o){qt(t,n,o),r=!0},p:Qn,i(n){r||(Xe(t.$$.fragment,n),r=!0)},o(n){it(t.$$.fragment,n),r=!1},d(n){Vt(t,n)}}}function Uq(e){let t,r;return t=new go({props:{icon:Fw}}),{c(){Ut(t.$$.fragment)},l(n){Yt(t.$$.fragment,n)},m(n,o){qt(t,n,o),r=!0},p:Qn,i(n){r||(Xe(t.$$.fragment,n),r=!0)},o(n){it(t.$$.fragment,n),r=!1},d(n){Vt(t,n)}}}function qq(e){let t;return{c(){t=ei("Start measure")},l(r){t=ti(r,"Start measure")},m(r,n){Lt(r,t,n)},d(r){r&&ge(t)}}}function Vq(e){let t;return{c(){t=ei("Stop measure")},l(r){t=ti(r,"Stop measure")},m(r,n){Lt(r,t,n)},d(r){r&&ge(t)}}}function $q(e){let t,r,n=e[0]&&ow(e);return{c(){n&&n.c(),t=ao()},l(o){n&&n.l(o),t=ao()},m(o,u){n&&n.m(o,u),Lt(o,t,u),r=!0},p(o,[u]){o[0]?n?(n.p(o,u),u&1&&Xe(n,1)):(n=ow(o),n.c(),Xe(n,1),n.m(t.parentNode,t)):n&&(ji(),it(n,1,1,()=>{n=null}),Ui())},i(o){r||(Xe(n),r=!0)},o(o){it(n),r=!1},d(o){n&&n.d(o),o&&ge(t)}}}function Gq(e,t,r){let n;ql(e,iw,I=>r(1,n=I));let{map:o}=t,{terrainRgbUrl:u=void 0}=t,{measureOption:c}=t,l,h=!1;Py(()=>{l===!0&&n.measuringOff()});const v=()=>{l?n.measuringOff():n.measuringOn()},w=()=>v(),E=()=>n.clearFeatures(),T=()=>n.downloadGeoJSON();return e.$$set=I=>{"map"in I&&r(0,o=I.map),"terrainRgbUrl"in I&&r(5,u=I.terrainRgbUrl),"measureOption"in I&&r(6,c=I.measureOption)},e.$$.update=()=>{e.$$.dirty&99&&o&&(n||lh(iw,n=new Bq(o,u,c),n),o.on("measure.on",()=>{r(2,l=!0)}),o.on("measure.off",()=>{r(2,l=!1)}),o.on("measure.add",()=>{r(3,h=n.hasData())}),o.on("measure.clear",()=>{r(3,h=!1)}))},[o,n,l,h,v,u,c,w,E,T]}class Hq extends Dn{constructor(t){super(),zn(this,t,Gq,$q,Ln,{map:0,terrainRgbUrl:5,measureOption:6})}}const gg=hf(void 0),yg=hf(void 0),{Marker:Wq}=zw;var fu;(function(e){e.Time="time",e.Distance="distance"})(fu||(fu={}));class Zq{constructor(t,r,n,o){Bi(this,"map");Bi(this,"url");Bi(this,"contourSources",[]);Bi(this,"contourLayers",[]);Bi(this,"contourMaker");Bi(this,"contours",[{time:3,distance:1,color:"ff0000"},{time:5,distance:2,color:"ffff00"},{time:10,distance:3,color:"0000ff"},{time:15,distance:4,color:"ff00ff"}]);Bi(this,"isochroneStyle",{font:["Roboto Bold"],fontSize:16,fontHalo:1,fontColor:"#000000",fontHaloColor:"#fff"});this.map=t,this.url=r,n&&(this.contours=n),o&&(this.isochroneStyle=Object.assign(this.isochroneStyle,o))}clearFeatures(){this.contourLayers&&this.contourLayers.length>0&&(this.contourLayers.forEach(t=>{var r;(r=this.map)==null||r.removeLayer(t)}),this.contourLayers=[]),this.contourSources&&this.contourSources.length>0&&(this.contourSources.forEach(t=>{var r;(r=this.map)==null||r.removeSource(t)}),this.contourSources=[]),this.contourMaker&&(this.contourMaker.remove(),this.contourMaker=void 0)}getIsochrone(t,r,n,o,u){this.clearFeatures();let c=JSON.parse(JSON.stringify(this.contours));u&&(c=u),c.forEach(h=>{n===fu.Time?delete h.distance:delete h.time});let l="km";return n===fu.Time&&(l="min"),new Promise((h,v)=>{const w={locations:[{lat:r,lon:t}],costing:o,contours:c,polygons:!0},E=`${this.url}/isochrone?json=${JSON.stringify(w)}`;fetch(E).then(T=>T.json()).then(T=>{T.features.forEach(I=>{var U,G,H,X;const F=`isochrone-${I.properties.contour}-${n}`;(U=this.map)==null||U.addSource(F,{type:"geojson",data:I}),this.contourSources.push(F),(G=this.map)==null||G.addLayer({id:`pg-${F}-${n}`,type:"fill",source:F,layout:{},paint:{"fill-color":I.properties.fillColor,"fill-opacity":.1}}),this.contourLayers.push(`pg-${F}-${n}`),(H=this.map)==null||H.addLayer({id:`ls-${F}-${n}`,type:"line",source:F,layout:{"line-join":"round","line-cap":"round"},paint:{"line-color":I.properties.fillColor,"line-width":3}}),this.contourLayers.push(`ls-${F}-${n}`),(X=this.map)==null||X.addLayer({id:`symbol-${F}-${n}`,type:"symbol",source:F,layout:{"symbol-placement":"line","text-pitch-alignment":"viewport","text-font":this.isochroneStyle.font,"text-field":["concat",["get","contour"],` ${l}`],"text-size":this.isochroneStyle.fontSize},paint:{"text-color":this.isochroneStyle.fontColor,"text-halo-width":this.isochroneStyle.fontHalo,"text-halo-color":this.isochroneStyle.fontHaloColor}}),this.contourLayers.push(`symbol-${F}-${n}`)}),this.map&&(this.contourMaker=new Wq().setLngLat([t,r]).addTo(this.map)),h()}).catch(T=>v(T))})}getContoursOption(){return this.contours}}const pp=[{value:"pedestrian",label:"Walking",icon:ZA},{value:"bicycle",label:"Bicycle",icon:HA},{value:"auto",label:"Car",icon:u7}];function aw(e,t,r){const n=e.slice();return n[17]=t[r],n[18]=t,n[19]=r,n}function sw(e,t,r){const n=e.slice();return n[20]=t[r],n}function lw(e){let t,r,n,o,u,c,l,h=e[20].label+"",v,w,E,T,I;function F(){return e[13](e[20])}return c=new go({props:{icon:e[20].icon}}),{c(){t=yt("label"),r=yt("input"),o=mr(),u=yt("span"),Ut(c.$$.fragment),l=mr(),v=ei(h),w=mr(),this.h()},l(U){t=vt(U,"LABEL",{class:!0,style:!0});var G=Ct(t);r=vt(G,"INPUT",{type:!0,name:!0}),o=gr(G),u=vt(G,"SPAN",{class:!0});var H=Ct(u);Yt(c.$$.fragment,H),H.forEach(ge),l=gr(G),v=ti(G,h),w=gr(G),G.forEach(ge),this.h()},h(){ve(r,"type","radio"),ve(r,"name","transport-isocrhone"),r.checked=n=e[4]===e[20].value,ve(u,"class","icon svelte-1u6mi4u"),ve(t,"class","radio-transport svelte-1u6mi4u"),zo(t,"color","black")},m(U,G){Lt(U,t,G),lt(t,r),lt(t,o),lt(t,u),qt(c,u,null),lt(t,l),lt(t,v),lt(t,w),E=!0,T||(I=rn(r,"click",F),T=!0)},p(U,G){e=U,(!E||G&16&&n!==(n=e[4]===e[20].value))&&(r.checked=n)},i(U){E||(Xe(c.$$.fragment,U),E=!0)},o(U){it(c.$$.fragment,U),E=!1},d(U){U&&ge(t),Vt(c),T=!1,I()}}}function uw(e){let t,r,n,o,u,c,l,h,v;return{c(){t=yt("label"),r=ei("From"),n=mr(),o=yt("div"),u=yt("input"),l=mr(),h=yt("input"),this.h()},l(w){t=vt(w,"LABEL",{class:!0});var E=Ct(t);r=ti(E,"From"),E.forEach(ge),n=gr(w),o=vt(w,"DIV",{class:!0});var T=Ct(o);u=vt(T,"INPUT",{class:!0,type:!0,placeholder:!0,style:!0}),l=gr(T),h=vt(T,"INPUT",{class:!0,type:!0,placeholder:!0,style:!0}),T.forEach(ge),this.h()},h(){ve(t,"class","control-label svelte-1u6mi4u"),ve(u,"class","input-text svelte-1u6mi4u"),ve(u,"type","text"),ve(u,"placeholder","Name"),u.value=c=`${e[1].toFixed(6)}`,u.readOnly=!0,zo(u,"width","50%"),ve(h,"class","input-text svelte-1u6mi4u"),ve(h,"type","text"),ve(h,"placeholder","Name"),h.value=v=`${e[2].toFixed(6)}`,h.readOnly=!0,zo(h,"width","50%"),ve(o,"class","flex-container svelte-1u6mi4u")},m(w,E){Lt(w,t,E),lt(t,r),Lt(w,n,E),Lt(w,o,E),lt(o,u),lt(o,l),lt(o,h)},p(w,E){E&2&&c!==(c=`${w[1].toFixed(6)}`)&&u.value!==c&&(u.value=c),E&4&&v!==(v=`${w[2].toFixed(6)}`)&&h.value!==v&&(h.value=v)},d(w){w&&ge(t),w&&ge(n),w&&ge(o)}}}function cw(e){let t,r=e[3],n=[];for(let o=0;o<r.length;o+=1)n[o]=fw(aw(e,r,o));return{c(){t=yt("div");for(let o=0;o<n.length;o+=1)n[o].c();this.h()},l(o){t=vt(o,"DIV",{class:!0});var u=Ct(t);for(let c=0;c<n.length;c+=1)n[c].l(u);u.forEach(ge),this.h()},h(){ve(t,"class","flex-container svelte-1u6mi4u")},m(o,u){Lt(o,t,u);for(let c=0;c<n.length;c+=1)n[c].m(t,null)},p(o,u){if(u&9){r=o[3];let c;for(c=0;c<r.length;c+=1){const l=aw(o,r,c);n[c]?n[c].p(l,u):(n[c]=fw(l),n[c].c(),n[c].m(t,null))}for(;c<n.length;c+=1)n[c].d(1);n.length=r.length}},d(o){o&&ge(t),Ol(n,o)}}}function Xq(e){let t=e[17].distance+"",r,n;return{c(){r=ei(t),n=ei(" km")},l(o){r=ti(o,t),n=ti(o," km")},m(o,u){Lt(o,r,u),Lt(o,n,u)},p(o,u){u&8&&t!==(t=o[17].distance+"")&&ta(r,t)},d(o){o&&ge(r),o&&ge(n)}}}function Yq(e){let t=e[17].time+"",r,n;return{c(){r=ei(t),n=ei(" min")},l(o){r=ti(o,t),n=ti(o," min")},m(o,u){Lt(o,r,u),Lt(o,n,u)},p(o,u){u&8&&t!==(t=o[17].time+"")&&ta(r,t)},d(o){o&&ge(r),o&&ge(n)}}}function Jq(e){let t,r,n;function o(){e[15].call(t,e[18],e[19])}return{c(){t=yt("input"),this.h()},l(u){t=vt(u,"INPUT",{class:!0,type:!0}),this.h()},h(){ve(t,"class","input-text svelte-1u6mi4u"),ve(t,"type","number")},m(u,c){Lt(u,t,c),N0(t,e[17].distance),r||(n=rn(t,"input",o),r=!0)},p(u,c){e=u,c&8&&P1(t.value)!==e[17].distance&&N0(t,e[17].distance)},d(u){u&&ge(t),r=!1,n()}}}function Kq(e){let t,r,n;function o(){e[14].call(t,e[18],e[19])}return{c(){t=yt("input"),this.h()},l(u){t=vt(u,"INPUT",{class:!0,type:!0}),this.h()},h(){ve(t,"class","input-text svelte-1u6mi4u"),ve(t,"type","number")},m(u,c){Lt(u,t,c),N0(t,e[17].time),r||(n=rn(t,"input",o),r=!0)},p(u,c){e=u,c&8&&P1(t.value)!==e[17].time&&N0(t,e[17].time)},d(u){u&&ge(t),r=!1,n()}}}function fw(e){let t,r,n,o;function u(E,T){return E[0]===fu.Time?Yq:Xq}let c=u(e),l=c(e);function h(E,T){return E[0]===fu.Time?Kq:Jq}let v=h(e),w=v(e);return{c(){t=yt("div"),r=yt("label"),l.c(),n=mr(),w.c(),o=mr(),this.h()},l(E){t=vt(E,"DIV",{class:!0,style:!0});var T=Ct(t);r=vt(T,"LABEL",{class:!0});var I=Ct(r);l.l(I),I.forEach(ge),n=gr(T),w.l(T),o=gr(T),T.forEach(ge),this.h()},h(){ve(r,"class","control-label svelte-1u6mi4u"),ve(t,"class","flex-vertical-container svelte-1u6mi4u"),zo(t,"width","25%")},m(E,T){Lt(E,t,T),lt(t,r),l.m(r,null),lt(t,n),w.m(t,null),lt(t,o)},p(E,T){c===(c=u(E))&&l?l.p(E,T):(l.d(1),l=c(E),l&&(l.c(),l.m(r,null))),v===(v=h(E))&&w?w.p(E,T):(w.d(1),w=v(E),w&&(w.c(),w.m(t,o)))},d(E){E&&ge(t),l.d(),w.d()}}}function Qq(e){let t,r;return t=new go({props:{icon:Dy}}),{c(){Ut(t.$$.fragment)},l(n){Yt(t.$$.fragment,n)},m(n,o){qt(t,n,o),r=!0},p:Qn,i(n){r||(Xe(t.$$.fragment,n),r=!0)},o(n){it(t.$$.fragment,n),r=!1},d(n){Vt(t,n)}}}function eV(e){let t,r;return t=new go({props:{icon:Rw}}),{c(){Ut(t.$$.fragment)},l(n){Yt(t.$$.fragment,n)},m(n,o){qt(t,n,o),r=!0},p:Qn,i(n){r||(Xe(t.$$.fragment,n),r=!0)},o(n){it(t.$$.fragment,n),r=!1},d(n){Vt(t,n)}}}function tV(e){let t,r,n,o,u,c,l,h,v,w,E,T="Time",I,F,U,G,H,X,ee,K,se,ce="Distance",_e,pe,Ge,We,Ae,Ie,Fe,ot,_t,ht,$e,ut,bt,Ze,He,xe,Ne,Pe,ft,At,Pt,Kt,$t,br;w=new go({props:{icon:Rw}}),K=new go({props:{icon:Dy}});let Gt=pp,Rr=[];for(let Wt=0;Wt<Gt.length;Wt+=1)Rr[Wt]=lw(sw(e,Gt,Wt));const Mr=Wt=>it(Rr[Wt],1,1,()=>{Rr[Wt]=null});let Kr=e[1]&&e[2]&&uw(e),St=e[3]&&cw(e);const ct=[eV,Qq],Or=[];function ln(Wt,Ur){return Wt[0]===fu.Time?0:1}return bt=ln(e),Ze=Or[bt]=ct[bt](e),Pt=new go({props:{icon:My}}),{c(){t=yt("label"),r=ei("Type of Isochrone"),n=mr(),o=yt("div"),u=yt("label"),c=yt("input"),h=mr(),v=yt("div"),Ut(w.$$.fragment),E=mr(),I=ei(T),F=mr(),U=yt("label"),G=yt("input"),X=mr(),ee=yt("div"),Ut(K.$$.fragment),se=mr(),_e=ei(ce),pe=mr(),Ge=yt("label"),We=ei("Means of Transport"),Ae=mr(),Ie=yt("div");for(let Wt=0;Wt<Rr.length;Wt+=1)Rr[Wt].c();Fe=mr(),Kr&&Kr.c(),ot=mr(),St&&St.c(),_t=mr(),ht=yt("div"),$e=yt("button"),ut=yt("span"),Ze.c(),He=mr(),xe=yt("span"),Ne=ei("Calculate"),Pe=mr(),ft=yt("button"),At=yt("span"),Ut(Pt.$$.fragment),this.h()},l(Wt){t=vt(Wt,"LABEL",{class:!0});var Ur=Ct(t);r=ti(Ur,"Type of Isochrone"),Ur.forEach(ge),n=gr(Wt),o=vt(Wt,"DIV",{class:!0});var mn=Ct(o);u=vt(mn,"LABEL",{class:!0,style:!0});var en=Ct(u);c=vt(en,"INPUT",{type:!0,name:!0}),h=gr(en),v=vt(en,"DIV",{class:!0});var On=Ct(v);Yt(w.$$.fragment,On),On.forEach(ge),E=gr(en),I=ti(en,T),en.forEach(ge),F=gr(mn),U=vt(mn,"LABEL",{class:!0,style:!0});var Zn=Ct(U);G=vt(Zn,"INPUT",{type:!0,name:!0}),X=gr(Zn),ee=vt(Zn,"DIV",{class:!0});var ai=Ct(ee);Yt(K.$$.fragment,ai),ai.forEach(ge),se=gr(Zn),_e=ti(Zn,ce),Zn.forEach(ge),mn.forEach(ge),pe=gr(Wt),Ge=vt(Wt,"LABEL",{class:!0});var _i=Ct(Ge);We=ti(_i,"Means of Transport"),_i.forEach(ge),Ae=gr(Wt),Ie=vt(Wt,"DIV",{class:!0});var hi=Ct(Ie);for(let or=0;or<Rr.length;or+=1)Rr[or].l(hi);hi.forEach(ge),Fe=gr(Wt),Kr&&Kr.l(Wt),ot=gr(Wt),St&&St.l(Wt),_t=gr(Wt),ht=vt(Wt,"DIV",{class:!0});var yr=Ct(ht);$e=vt(yr,"BUTTON",{class:!0});var Vr=Ct($e);ut=vt(Vr,"SPAN",{class:!0});var wi=Ct(ut);Ze.l(wi),wi.forEach(ge),He=gr(Vr),xe=vt(Vr,"SPAN",{});var xn=Ct(xe);Ne=ti(xn,"Calculate"),xn.forEach(ge),Vr.forEach(ge),Pe=gr(yr),ft=vt(yr,"BUTTON",{class:!0});var si=Ct(ft);At=vt(si,"SPAN",{});var fr=Ct(At);Yt(Pt.$$.fragment,fr),fr.forEach(ge),si.forEach(ge),yr.forEach(ge),this.h()},h(){ve(t,"class","control-label svelte-1u6mi4u"),ve(c,"type","radio"),ve(c,"name","isochrone-"+fu.Time),c.checked=l=e[0]===fu.Time,ve(v,"class","icon is-small is-left pl-3 pr-3 svelte-1u6mi4u"),ve(u,"class","radio-transport svelte-1u6mi4u"),zo(u,"color","black"),ve(G,"type","radio"),ve(G,"name","isochrone-"+fu.Distance),G.checked=H=e[0]===fu.Distance,ve(ee,"class","icon is-small is-left pl-3 pr-3 svelte-1u6mi4u"),ve(U,"class","radio-transport svelte-1u6mi4u"),zo(U,"color","black"),ve(o,"class","transport-select-container svelte-1u6mi4u"),ve(Ge,"class","control-label svelte-1u6mi4u"),ve(Ie,"class","transport-select-container svelte-1u6mi4u"),ve(ut,"class","control-icon svelte-1u6mi4u"),ve($e,"class","control-button svelte-1u6mi4u"),ve(ft,"class","setting-button svelte-1u6mi4u"),ve(ht,"class","valhalla-container svelte-1u6mi4u")},m(Wt,Ur){Lt(Wt,t,Ur),lt(t,r),Lt(Wt,n,Ur),Lt(Wt,o,Ur),lt(o,u),lt(u,c),lt(u,h),lt(u,v),qt(w,v,null),lt(u,E),lt(u,I),lt(o,F),lt(o,U),lt(U,G),lt(U,X),lt(U,ee),qt(K,ee,null),lt(U,se),lt(U,_e),Lt(Wt,pe,Ur),Lt(Wt,Ge,Ur),lt(Ge,We),Lt(Wt,Ae,Ur),Lt(Wt,Ie,Ur);for(let mn=0;mn<Rr.length;mn+=1)Rr[mn].m(Ie,null);Lt(Wt,Fe,Ur),Kr&&Kr.m(Wt,Ur),Lt(Wt,ot,Ur),St&&St.m(Wt,Ur),Lt(Wt,_t,Ur),Lt(Wt,ht,Ur),lt(ht,$e),lt($e,ut),Or[bt].m(ut,null),lt($e,He),lt($e,xe),lt(xe,Ne),lt(ht,Pe),lt(ht,ft),lt(ft,At),qt(Pt,At,null),Kt=!0,$t||(br=[rn(c,"click",e[11]),rn(G,"click",e[12]),rn($e,"click",e[16]),rn(ft,"click",e[6])],$t=!0)},p(Wt,[Ur]){if((!Kt||Ur&1&&l!==(l=Wt[0]===fu.Time))&&(c.checked=l),(!Kt||Ur&1&&H!==(H=Wt[0]===fu.Distance))&&(G.checked=H),Ur&16){Gt=pp;let en;for(en=0;en<Gt.length;en+=1){const On=sw(Wt,Gt,en);Rr[en]?(Rr[en].p(On,Ur),Xe(Rr[en],1)):(Rr[en]=lw(On),Rr[en].c(),Xe(Rr[en],1),Rr[en].m(Ie,null))}for(ji(),en=Gt.length;en<Rr.length;en+=1)Mr(en);Ui()}Wt[1]&&Wt[2]?Kr?Kr.p(Wt,Ur):(Kr=uw(Wt),Kr.c(),Kr.m(ot.parentNode,ot)):Kr&&(Kr.d(1),Kr=null),Wt[3]?St?St.p(Wt,Ur):(St=cw(Wt),St.c(),St.m(_t.parentNode,_t)):St&&(St.d(1),St=null);let mn=bt;bt=ln(Wt),bt===mn?Or[bt].p(Wt,Ur):(ji(),it(Or[mn],1,1,()=>{Or[mn]=null}),Ui(),Ze=Or[bt],Ze?Ze.p(Wt,Ur):(Ze=Or[bt]=ct[bt](Wt),Ze.c()),Xe(Ze,1),Ze.m(ut,null))},i(Wt){if(!Kt){Xe(w.$$.fragment,Wt),Xe(K.$$.fragment,Wt);for(let Ur=0;Ur<Gt.length;Ur+=1)Xe(Rr[Ur]);Xe(Ze),Xe(Pt.$$.fragment,Wt),Kt=!0}},o(Wt){it(w.$$.fragment,Wt),it(K.$$.fragment,Wt),Rr=Rr.filter(Boolean);for(let Ur=0;Ur<Rr.length;Ur+=1)it(Rr[Ur]);it(Ze),it(Pt.$$.fragment,Wt),Kt=!1},d(Wt){Wt&&ge(t),Wt&&ge(n),Wt&&ge(o),Vt(w),Vt(K),Wt&&ge(pe),Wt&&ge(Ge),Wt&&ge(Ae),Wt&&ge(Ie),Ol(Rr,Wt),Wt&&ge(Fe),Kr&&Kr.d(Wt),Wt&&ge(ot),St&&St.d(Wt),Wt&&ge(_t),Wt&&ge(ht),Or[bt].d(),Vt(Pt),$t=!1,oa(br)}}}function rV(e,t,r){let n;ql(e,gg,K=>r(10,n=K));let{map:o}=t,{url:u}=t,{options:c}=t,l=fu.Time,h,v,w=c.Contours;w||(w=[{time:3,distance:1,color:"ff0000"},{time:5,distance:2,color:"ffff00"},{time:10,distance:3,color:"0000ff"},{time:15,distance:4,color:"ff00ff"}]);let E=pp[0].value;const T=K=>{n==null||n.getIsochrone(Number(h),Number(v),K,E,JSON.parse(JSON.stringify(w)))},I=()=>{n==null||n.clearFeatures()},F=()=>{r(0,l=fu.Time)},U=()=>{r(0,l=fu.Distance)},G=K=>{r(4,E=K.value)};function H(K,se){K[se].time=P1(this.value),r(3,w)}function X(K,se){K[se].distance=P1(this.value),r(3,w)}const ee=()=>T(l);return e.$$set=K=>{"map"in K&&r(7,o=K.map),"url"in K&&r(8,u=K.url),"options"in K&&r(9,c=K.options)},e.$$.update=()=>{e.$$.dirty&1408&&o&&(n||gg.update(()=>{}),n||lh(gg,n=new Zq(o,u),n),r(1,h=o.getCenter().lng),r(2,v=o.getCenter().lat),o.on("moveend",()=>{r(1,h=o.getCenter().lng),r(2,v=o.getCenter().lat)}))},[l,h,v,w,E,T,I,o,u,c,n,F,U,G,H,X,ee]}class nV extends Dn{constructor(t){super(),zn(this,t,rV,tV,Ln,{map:7,url:8,options:9})}}const Zf="routing-controls-source-line",vg="routing-controls-layer-line",_g="routing-controls-layer-line-label",bg="routing-controls-layer-symbol",Fp="routing-controls-source-symbol";class iV{constructor(t,r,n){Bi(this,"map");Bi(this,"tripData",[]);Bi(this,"url");Bi(this,"options",{font:["Roboto Medium"],fontSize:14,fontHalo:3,fontColor:"#263238",fontHaloColor:"#fff",iconImage:"marker",iconSize:1});Bi(this,"tripSummary");Bi(this,"isRouting",!1);Bi(this,"isClickListenerAdded",!1);this.map=t,this.url=r,n&&(this.options=Object.assign(this.options,n))}getTripData(){return this.tripData}getTripSummary(){return this.tripSummary}clearFeatures(){this.map&&(this.map.getLayer(vg)&&this.map.removeLayer(vg),this.map.getLayer(_g)&&this.map.removeLayer(_g),this.map.getLayer(bg)&&this.map.removeLayer(bg),this.map.getSource(Zf)&&this.map.removeSource(Zf),this.map.getSource(Fp)&&this.map.removeSource(Fp)),this.tripData=[],this.tripSummary=void 0,this.map.fire("routing.clear")}addingPointOn(){this.map.getCanvas().style.cursor="crosshair",this.isClickListenerAdded||(this.map.on("click",this.mapClickListener.bind(this)),this.isClickListenerAdded=!0),this.map.fire("routing.on"),this.isRouting=!0}addingPointOff(){this.map.getCanvas().style.cursor="",this.map.off("click",this.mapClickListener.bind(this)),this.map.fire("routing.off"),this.isRouting=!1}mapClickListener(t){if(!this.isRouting)return;const r=t.lngLat;this.tripData||(this.tripData=[]),this.tripData=[...this.tripData,r],this.map.fire("routing.point.added")}calcRoute(t){if(!this.tripData||this.tripData&&this.tripData.length<2){this.tripSummary=void 0;return}this.map.fire("routing.error",{message:""});const r=`${this.url}/route`,n={locations:this.tripData.map(u=>({lon:u.lng,lat:u.lat})),costing:t,costing_options:{auto:{country_crossing_penalty:2e3}},units:"kilometers",id:"my_work_route"},o=`${r}?json=${JSON.stringify(n)}`;fetch(o).then(u=>u.json()).then(u=>{if("error"in u)throw this.tripData.pop(),new Error(`${u.status} (${u.status_code}): ${u.error} (${u.error_code})`);const c=u.trip.legs.map(w=>this.decodeShape(w.shape));let l=[];c.forEach(w=>{l=[...l,...w]}),this.tripSummary=u.trip.summary,this.tripSummary.length=Number(this.tripSummary.length.toFixed(2)),this.tripSummary.time=Number((this.tripSummary.time/60).toFixed());const h={type:"FeatureCollection",features:u.trip.legs.map(w=>{const E=this.decodeShape(w.shape),T={length:Number(w.summary.length.toFixed(2)),time:Number((w.summary.time/60).toFixed())};return this.geoLineString(E,T)})},v=this.geoPoint(this.tripData.map(w=>[w.lng,w.lat]));this.map.fire("routing.calc.done"),this.map&&(this.map.getSource(Zf)?(this.map.getSource(Zf).setData(h),this.map.getSource(Fp).setData(v)):(this.map.addSource(Zf,{type:"geojson",data:h}),this.map.addSource(Fp,{type:"geojson",data:v}),this.map.addLayer({id:vg,type:"line",source:Zf,paint:{"line-color":"rgb(255,0,0)","line-width":4}}),this.map.addLayer({id:_g,type:"symbol",source:Zf,layout:{"text-field":["concat",["to-string",["get","length"]]," km (",["to-string",["get","time"]]," min)"],"text-font":this.options.font,"text-size":this.options.fontSize,"symbol-placement":"line","text-allow-overlap":!0,"text-ignore-placement":!0},paint:{"text-color":this.options.fontColor,"text-halo-color":this.options.fontHaloColor,"text-halo-width":this.options.fontHalo}}),this.map.addLayer({id:bg,type:"symbol",source:Fp,layout:{"icon-image":this.options.iconImage,"icon-size":this.options.iconSize,"text-field":["get","text"],"text-font":this.options.font,"text-size":this.options.fontSize,"text-variable-anchor":["top","bottom","left","right"],"text-radial-offset":.8,"text-justify":"auto"},paint:{"text-color":this.options.fontColor,"text-halo-color":this.options.fontHaloColor,"text-halo-width":this.options.fontHalo}})))}).catch(u=>{console.error(u),this.map.fire("routing.error",{message:u.message})})}geoLineString(t=[],r={}){return{type:"Feature",properties:r,geometry:{type:"LineString",coordinates:t}}}geoPoint(t=[]){return{type:"FeatureCollection",features:t.map((r,n)=>{let o=(n+1).toString();return n===0?o="From":n===t.length-1&&(o="To"),{type:"Feature",properties:{text:o},geometry:{type:"Point",coordinates:r}}})}}decodeShape(t,r=6){let n=0,o=0,u=0,c=[],l=0,h=0,v=null,w,E,T=Math.pow(10,r||6);for(;n<t.length;){v=null,l=0,h=0;do v=t.charCodeAt(n++)-63,h|=(v&31)<<l,l+=5;while(v>=32);w=h&1?~(h>>1):h>>1,l=h=0;do v=t.charCodeAt(n++)-63,h|=(v&31)<<l,l+=5;while(v>=32);E=h&1?~(h>>1):h>>1,o+=w,u+=E,c.push([u/T,o/T])}return c}}function hw(e,t,r){const n=e.slice();return n[14]=t[r],n}function pw(e){let t,r,n,o,u,c,l,h=e[14].label+"",v,w,E,T,I;function F(){return e[12](e[14])}return c=new go({props:{icon:e[14].icon}}),{c(){t=yt("label"),r=yt("input"),o=mr(),u=yt("span"),Ut(c.$$.fragment),l=mr(),v=ei(h),w=mr(),this.h()},l(U){t=vt(U,"LABEL",{class:!0,style:!0});var G=Ct(t);r=vt(G,"INPUT",{type:!0,name:!0}),o=gr(G),u=vt(G,"SPAN",{class:!0});var H=Ct(u);Yt(c.$$.fragment,H),H.forEach(ge),l=gr(G),v=ti(G,h),w=gr(G),G.forEach(ge),this.h()},h(){ve(r,"type","radio"),ve(r,"name","transport-routing"),r.checked=n=e[0]===e[14].value,ve(u,"class","icon svelte-18sva3g"),ve(t,"class","radio-transport svelte-18sva3g"),zo(t,"color","black")},m(U,G){Lt(U,t,G),lt(t,r),lt(t,o),lt(t,u),qt(c,u,null),lt(t,l),lt(t,v),lt(t,w),E=!0,T||(I=rn(r,"click",F),T=!0)},p(U,G){e=U,(!E||G&1&&n!==(n=e[0]===e[14].value))&&(r.checked=n)},i(U){E||(Xe(c.$$.fragment,U),E=!0)},o(U){it(c.$$.fragment,U),E=!1},d(U){U&&ge(t),Vt(c),T=!1,I()}}}function oV(e){let t,r;return t=new go({props:{icon:e7}}),{c(){Ut(t.$$.fragment)},l(n){Yt(t.$$.fragment,n)},m(n,o){qt(t,n,o),r=!0},p:Qn,i(n){r||(Xe(t.$$.fragment,n),r=!0)},o(n){it(t.$$.fragment,n),r=!1},d(n){Vt(t,n)}}}function aV(e){let t,r;return t=new go({props:{icon:Fw}}),{c(){Ut(t.$$.fragment)},l(n){Yt(t.$$.fragment,n)},m(n,o){qt(t,n,o),r=!0},p:Qn,i(n){r||(Xe(t.$$.fragment,n),r=!0)},o(n){it(t.$$.fragment,n),r=!1},d(n){Vt(t,n)}}}function sV(e){let t;return{c(){t=ei("Start routing")},l(r){t=ti(r,"Start routing")},m(r,n){Lt(r,t,n)},d(r){r&&ge(t)}}}function lV(e){let t;return{c(){t=ei("Stop routing")},l(r){t=ti(r,"Stop routing")},m(r,n){Lt(r,t,n)},d(r){r&&ge(t)}}}function dw(e){let t,r,n,o,u,c,l,h,v,w,E,T,I,F=e[1].length>1&&mw(e),U=e[3]&&gw(e),G=e[4]&&yw(e);return{c(){t=yt("label"),r=ei("From"),n=mr(),o=yt("div"),u=yt("input"),l=mr(),h=yt("input"),w=mr(),F&&F.c(),E=mr(),U&&U.c(),T=mr(),G&&G.c(),I=ao(),this.h()},l(H){t=vt(H,"LABEL",{class:!0});var X=Ct(t);r=ti(X,"From"),X.forEach(ge),n=gr(H),o=vt(H,"DIV",{class:!0});var ee=Ct(o);u=vt(ee,"INPUT",{class:!0,type:!0,placeholder:!0,style:!0}),l=gr(ee),h=vt(ee,"INPUT",{class:!0,type:!0,placeholder:!0,style:!0}),ee.forEach(ge),w=gr(H),F&&F.l(H),E=gr(H),U&&U.l(H),T=gr(H),G&&G.l(H),I=ao(),this.h()},h(){ve(t,"class","control-label svelte-18sva3g"),ve(u,"class","input-text svelte-18sva3g"),ve(u,"type","text"),ve(u,"placeholder","Name"),u.value=c=`${e[1][0].lng.toFixed(6)}`,u.readOnly=!0,zo(u,"width","50%"),ve(h,"class","input-text svelte-18sva3g"),ve(h,"type","text"),ve(h,"placeholder","Name"),h.value=v=`${e[1][0].lat.toFixed(6)}`,h.readOnly=!0,zo(h,"width","50%"),ve(o,"class","flex-container svelte-18sva3g")},m(H,X){Lt(H,t,X),lt(t,r),Lt(H,n,X),Lt(H,o,X),lt(o,u),lt(o,l),lt(o,h),Lt(H,w,X),F&&F.m(H,X),Lt(H,E,X),U&&U.m(H,X),Lt(H,T,X),G&&G.m(H,X),Lt(H,I,X)},p(H,X){X&2&&c!==(c=`${H[1][0].lng.toFixed(6)}`)&&u.value!==c&&(u.value=c),X&2&&v!==(v=`${H[1][0].lat.toFixed(6)}`)&&h.value!==v&&(h.value=v),H[1].length>1?F?F.p(H,X):(F=mw(H),F.c(),F.m(E.parentNode,E)):F&&(F.d(1),F=null),H[3]?U?U.p(H,X):(U=gw(H),U.c(),U.m(T.parentNode,T)):U&&(U.d(1),U=null),H[4]?G?G.p(H,X):(G=yw(H),G.c(),G.m(I.parentNode,I)):G&&(G.d(1),G=null)},d(H){H&&ge(t),H&&ge(n),H&&ge(o),H&&ge(w),F&&F.d(H),H&&ge(E),U&&U.d(H),H&&ge(T),G&&G.d(H),H&&ge(I)}}}function mw(e){let t,r,n,o,u,c,l,h,v;return{c(){t=yt("label"),r=ei("To"),n=mr(),o=yt("div"),u=yt("input"),l=mr(),h=yt("input"),this.h()},l(w){t=vt(w,"LABEL",{class:!0});var E=Ct(t);r=ti(E,"To"),E.forEach(ge),n=gr(w),o=vt(w,"DIV",{class:!0});var T=Ct(o);u=vt(T,"INPUT",{class:!0,type:!0,placeholder:!0,style:!0}),l=gr(T),h=vt(T,"INPUT",{class:!0,type:!0,placeholder:!0,style:!0}),T.forEach(ge),this.h()},h(){ve(t,"class","control-label svelte-18sva3g"),ve(u,"class","input-text svelte-18sva3g"),ve(u,"type","text"),ve(u,"placeholder","Name"),u.value=c=`${e[1][e[1].length-1].lng.toFixed(6)}`,u.readOnly=!0,zo(u,"width","50%"),ve(h,"class","input-text svelte-18sva3g"),ve(h,"type","text"),ve(h,"placeholder","Name"),h.value=v=`${e[1][e[1].length-1].lat.toFixed(6)}`,h.readOnly=!0,zo(h,"width","50%"),ve(o,"class","flex-container svelte-18sva3g")},m(w,E){Lt(w,t,E),lt(t,r),Lt(w,n,E),Lt(w,o,E),lt(o,u),lt(o,l),lt(o,h)},p(w,E){E&2&&c!==(c=`${w[1][w[1].length-1].lng.toFixed(6)}`)&&u.value!==c&&(u.value=c),E&2&&v!==(v=`${w[1][w[1].length-1].lat.toFixed(6)}`)&&h.value!==v&&(h.value=v)},d(w){w&&ge(t),w&&ge(n),w&&ge(o)}}}function gw(e){let t,r,n,o,u,c,l,h,v,w,E,T,I,F;return{c(){t=yt("div"),r=yt("div"),n=yt("label"),o=ei("Length"),u=mr(),c=yt("input"),h=mr(),v=yt("div"),w=yt("label"),E=ei("Time"),T=mr(),I=yt("input"),this.h()},l(U){t=vt(U,"DIV",{class:!0});var G=Ct(t);r=vt(G,"DIV",{class:!0,style:!0});var H=Ct(r);n=vt(H,"LABEL",{class:!0});var X=Ct(n);o=ti(X,"Length"),X.forEach(ge),u=gr(H),c=vt(H,"INPUT",{class:!0,type:!0}),H.forEach(ge),h=gr(G),v=vt(G,"DIV",{class:!0,style:!0});var ee=Ct(v);w=vt(ee,"LABEL",{class:!0});var K=Ct(w);E=ti(K,"Time"),K.forEach(ge),T=gr(ee),I=vt(ee,"INPUT",{class:!0,type:!0}),ee.forEach(ge),G.forEach(ge),this.h()},h(){ve(n,"class","control-label svelte-18sva3g"),ve(c,"class","input-text svelte-18sva3g"),ve(c,"type","text"),c.value=l=`${e[3].length} km`,c.readOnly=!0,ve(r,"class","flex-vertical-container svelte-18sva3g"),zo(r,"width","50%"),ve(w,"class","control-label svelte-18sva3g"),ve(I,"class","input-text svelte-18sva3g"),ve(I,"type","text"),I.value=F=`${e[3].time} min`,I.readOnly=!0,ve(v,"class","flex-vertical-container svelte-18sva3g"),zo(v,"width","50%"),ve(t,"class","flex-container svelte-18sva3g")},m(U,G){Lt(U,t,G),lt(t,r),lt(r,n),lt(n,o),lt(r,u),lt(r,c),lt(t,h),lt(t,v),lt(v,w),lt(w,E),lt(v,T),lt(v,I)},p(U,G){G&8&&l!==(l=`${U[3].length} km`)&&c.value!==l&&(c.value=l),G&8&&F!==(F=`${U[3].time} min`)&&I.value!==F&&(I.value=F)},d(U){U&&ge(t)}}}function yw(e){let t,r;return{c(){t=yt("div"),r=ei(e[4]),this.h()},l(n){t=vt(n,"DIV",{class:!0});var o=Ct(t);r=ti(o,e[4]),o.forEach(ge),this.h()},h(){ve(t,"class","notification svelte-18sva3g")},m(n,o){Lt(n,t,o),lt(t,r)},p(n,o){o&16&&ta(r,n[4])},d(n){n&&ge(t)}}}function uV(e){let t,r,n,o,u,c,l,h,v,w,E,T,I,F,U,G,H,X,ee,K,se,ce,_e=pp,pe=[];for(let $e=0;$e<_e.length;$e+=1)pe[$e]=pw(hw(e,_e,$e));const Ge=$e=>it(pe[$e],1,1,()=>{pe[$e]=null}),We=[aV,oV],Ae=[];function Ie($e,ut){return $e[2]?0:1}v=Ie(e),w=Ae[v]=We[v](e);function Fe($e,ut){return $e[2]?lV:sV}let ot=Fe(e),_t=ot(e);G=new go({props:{icon:My}});let ht=e[1]&&e[1].length>0&&dw(e);return{c(){t=yt("label"),r=ei("Means of Transport"),n=mr(),o=yt("div");for(let $e=0;$e<pe.length;$e+=1)pe[$e].c();u=mr(),c=yt("div"),l=yt("button"),h=yt("span"),w.c(),E=mr(),T=yt("span"),_t.c(),I=mr(),F=yt("button"),U=yt("span"),Ut(G.$$.fragment),X=mr(),ht&&ht.c(),ee=ao(),this.h()},l($e){t=vt($e,"LABEL",{class:!0});var ut=Ct(t);r=ti(ut,"Means of Transport"),ut.forEach(ge),n=gr($e),o=vt($e,"DIV",{class:!0});var bt=Ct(o);for(let At=0;At<pe.length;At+=1)pe[At].l(bt);bt.forEach(ge),u=gr($e),c=vt($e,"DIV",{class:!0});var Ze=Ct(c);l=vt(Ze,"BUTTON",{class:!0});var He=Ct(l);h=vt(He,"SPAN",{class:!0});var xe=Ct(h);w.l(xe),xe.forEach(ge),E=gr(He),T=vt(He,"SPAN",{});var Ne=Ct(T);_t.l(Ne),Ne.forEach(ge),He.forEach(ge),I=gr(Ze),F=vt(Ze,"BUTTON",{class:!0});var Pe=Ct(F);U=vt(Pe,"SPAN",{});var ft=Ct(U);Yt(G.$$.fragment,ft),ft.forEach(ge),Pe.forEach(ge),Ze.forEach(ge),X=gr($e),ht&&ht.l($e),ee=ao(),this.h()},h(){ve(t,"class","control-label svelte-18sva3g"),ve(o,"class","transport-select-container svelte-18sva3g"),ve(h,"class","control-icon svelte-18sva3g"),ve(l,"class","control-button svelte-18sva3g"),ve(F,"class","setting-button svelte-18sva3g"),F.disabled=H=!e[5],ve(c,"class","valhalla-container svelte-18sva3g")},m($e,ut){Lt($e,t,ut),lt(t,r),Lt($e,n,ut),Lt($e,o,ut);for(let bt=0;bt<pe.length;bt+=1)pe[bt].m(o,null);Lt($e,u,ut),Lt($e,c,ut),lt(c,l),lt(l,h),Ae[v].m(h,null),lt(l,E),lt(l,T),_t.m(T,null),lt(c,I),lt(c,F),lt(F,U),qt(G,U,null),Lt($e,X,ut),ht&&ht.m($e,ut),Lt($e,ee,ut),K=!0,se||(ce=[rn(l,"click",e[6]),rn(F,"click",e[7])],se=!0)},p($e,[ut]){if(ut&1){_e=pp;let Ze;for(Ze=0;Ze<_e.length;Ze+=1){const He=hw($e,_e,Ze);pe[Ze]?(pe[Ze].p(He,ut),Xe(pe[Ze],1)):(pe[Ze]=pw(He),pe[Ze].c(),Xe(pe[Ze],1),pe[Ze].m(o,null))}for(ji(),Ze=_e.length;Ze<pe.length;Ze+=1)Ge(Ze);Ui()}let bt=v;v=Ie($e),v===bt?Ae[v].p($e,ut):(ji(),it(Ae[bt],1,1,()=>{Ae[bt]=null}),Ui(),w=Ae[v],w?w.p($e,ut):(w=Ae[v]=We[v]($e),w.c()),Xe(w,1),w.m(h,null)),ot!==(ot=Fe($e))&&(_t.d(1),_t=ot($e),_t&&(_t.c(),_t.m(T,null))),(!K||ut&32&&H!==(H=!$e[5]))&&(F.disabled=H),$e[1]&&$e[1].length>0?ht?ht.p($e,ut):(ht=dw($e),ht.c(),ht.m(ee.parentNode,ee)):ht&&(ht.d(1),ht=null)},i($e){if(!K){for(let ut=0;ut<_e.length;ut+=1)Xe(pe[ut]);Xe(w),Xe(G.$$.fragment,$e),K=!0}},o($e){pe=pe.filter(Boolean);for(let ut=0;ut<pe.length;ut+=1)it(pe[ut]);it(w),it(G.$$.fragment,$e),K=!1},d($e){$e&&ge(t),$e&&ge(n),$e&&ge(o),Ol(pe,$e),$e&&ge(u),$e&&ge(c),Ae[v].d(),_t.d(),Vt(G),$e&&ge(X),ht&&ht.d($e),$e&&ge(ee),se=!1,oa(ce)}}}function cV(e,t,r){let n,o;ql(e,yg,H=>r(11,o=H));let{map:u}=t,{url:c}=t,{options:l}=t,h=!1,v=pp[0].value,w,E=[],T="";Py(()=>{o&&h===!0&&o.addingPointOff()});const I=()=>{o&&(h?o.addingPointOff():o.addingPointOn())},F=()=>{o&&o.calcRoute(v)},U=()=>{o&&o.clearFeatures()},G=H=>{r(0,v=H.value)};return e.$$set=H=>{"map"in H&&r(8,u=H.map),"url"in H&&r(9,c=H.url),"options"in H&&r(10,l=H.options)},e.$$.update=()=>{e.$$.dirty&3840&&u&&(o||yg.update(()=>{}),o||lh(yg,o=new iV(u,c,l),o),u.on("routing.on",()=>{r(2,h=!0)}),u.on("routing.off",()=>{r(2,h=!1),o&&(r(3,w=o.getTripSummary()),r(1,E=o.getTripData()))}),u.on("routing.point.added",()=>{o&&r(1,E=o.getTripData())}),u.on("routing.calc.done",()=>{o&&r(3,w=o.getTripSummary())}),u.on("routing.clear",()=>{o&&(r(3,w=o.getTripSummary()),r(1,E=o.getTripData()))}),u.on("routing.error",H=>{r(4,T=H.message)})),e.$$.dirty&2&&r(5,n=E&&E.length>0),e.$$.dirty&2&&F(),e.$$.dirty&1&&F()},[v,E,h,w,T,n,I,U,u,c,l,o,G]}class fV extends Dn{constructor(t){super(),zn(this,t,cV,uV,Ln,{map:8,url:9,options:10})}}function hV(e){let t,r;return t=new go({props:{icon:p7,color:"white"}}),{c(){Ut(t.$$.fragment)},l(n){Yt(t.$$.fragment,n)},m(n,o){qt(t,n,o),r=!0},p:Qn,i(n){r||(Xe(t.$$.fragment,n),r=!0)},o(n){it(t.$$.fragment,n),r=!1},d(n){Vt(t,n)}}}function pV(e){let t,r;return t=new go({props:{icon:l7,color:"white"}}),{c(){Ut(t.$$.fragment)},l(n){Yt(t.$$.fragment,n)},m(n,o){qt(t,n,o),r=!0},p:Qn,i(n){r||(Xe(t.$$.fragment,n),r=!0)},o(n){it(t.$$.fragment,n),r=!1},d(n){Vt(t,n)}}}function dV(e){let t,r,n,o,u,c,l,h,v,w,E,T,I,F;const U=[pV,hV],G=[];function H(K,se){return K[0]?0:1}o=H(e),u=G[o]=U[o](e);const X=e[4].default,ee=Ou(X,e,e[3],null);return{c(){t=yt("nav"),r=yt("p"),n=yt("span"),u.c(),c=mr(),l=ei(e[1]),h=mr(),v=yt("div"),ee&&ee.c(),this.h()},l(K){t=vt(K,"NAV",{class:!0});var se=Ct(t);r=vt(se,"P",{class:!0});var ce=Ct(r);n=vt(ce,"SPAN",{class:!0});var _e=Ct(n);u.l(_e),_e.forEach(ge),c=gr(ce),l=ti(ce,e[1]),ce.forEach(ge),h=gr(se),v=vt(se,"DIV",{class:!0});var pe=Ct(v);ee&&ee.l(pe),pe.forEach(ge),se.forEach(ge),this.h()},h(){ve(n,"class","panel-icon mt-1 svelte-6zjgg4"),ve(r,"class","panel-heading p-2 header-menu svelte-6zjgg4"),ve(v,"class","container m-2 svelte-6zjgg4"),v.hidden=w=!e[0],ve(t,"class",E="panel "+e[2]+" my-1 mx-1 svelte-6zjgg4")},m(K,se){Lt(K,t,se),lt(t,r),lt(r,n),G[o].m(n,null),lt(r,c),lt(r,l),lt(t,h),lt(t,v),ee&&ee.m(v,null),T=!0,I||(F=rn(r,"click",e[5]),I=!0)},p(K,[se]){let ce=o;o=H(K),o===ce?G[o].p(K,se):(ji(),it(G[ce],1,1,()=>{G[ce]=null}),Ui(),u=G[o],u?u.p(K,se):(u=G[o]=U[o](K),u.c()),Xe(u,1),u.m(n,null)),(!T||se&2)&&ta(l,K[1]),ee&&ee.p&&(!T||se&8)&&Fu(ee,X,K,K[3],T?ju(X,K[3],se,null):Bu(K[3]),null),(!T||se&1&&w!==(w=!K[0]))&&(v.hidden=w),(!T||se&4&&E!==(E="panel "+K[2]+" my-1 mx-1 svelte-6zjgg4"))&&ve(t,"class",E)},i(K){T||(Xe(u),Xe(ee,K),T=!0)},o(K){it(u),it(ee,K),T=!1},d(K){K&&ge(t),G[o].d(),ee&&ee.d(K),I=!1,F()}}}function mV(e,t,r){let{$$slots:n={},$$scope:o}=t,{title:u}=t,{isPanelOpen:c=!1}=t,{color:l=""}=t;const h=()=>r(0,c=!c);return e.$$set=v=>{"title"in v&&r(1,u=v.title),"isPanelOpen"in v&&r(0,c=v.isPanelOpen),"color"in v&&r(2,l=v.color),"$$scope"in v&&r(3,o=v.$$scope)},[c,u,l,o,n,h]}class Ay extends Dn{constructor(t){super(),zn(this,t,mV,dV,Ln,{title:1,isPanelOpen:0,color:2})}}function vw(e){let t,r,n;function o(c){e[9](c)}let u={title:"Measuring tool",color:Ey,$$slots:{default:[gV]},$$scope:{ctx:e}};return e[0]!==void 0&&(u.isPanelOpen=e[0]),t=new Ay({props:u}),Ft.push(()=>Jt(t,"isPanelOpen",o)),{c(){Ut(t.$$.fragment)},l(c){Yt(t.$$.fragment,c)},m(c,l){qt(t,c,l),n=!0},p(c,l){const h={};l&524312&&(h.$$scope={dirty:l,ctx:c}),!r&&l&1&&(r=!0,h.isPanelOpen=c[0],er(()=>r=!1)),t.$set(h)},i(c){n||(Xe(t.$$.fragment,c),n=!0)},o(c){it(t.$$.fragment,c),n=!1},d(c){Vt(t,c)}}}function gV(e){let t,r,n,o,u,c;function l(E){e[6](E)}function h(E){e[7](E)}function v(E){e[8](E)}let w={};return e[4]!==void 0&&(w.map=e[4]),e[3].elevation.options!==void 0&&(w.measureOption=e[3].elevation.options),e[3].elevation.url!==void 0&&(w.terrainRgbUrl=e[3].elevation.url),r=new Hq({props:w}),Ft.push(()=>Jt(r,"map",l)),Ft.push(()=>Jt(r,"measureOption",h)),Ft.push(()=>Jt(r,"terrainRgbUrl",v)),{c(){t=yt("div"),Ut(r.$$.fragment),this.h()},l(E){t=vt(E,"DIV",{class:!0});var T=Ct(t);Yt(r.$$.fragment,T),T.forEach(ge),this.h()},h(){ve(t,"class","accordion-content svelte-1toti4c")},m(E,T){Lt(E,t,T),qt(r,t,null),c=!0},p(E,T){const I={};!n&&T&16&&(n=!0,I.map=E[4],er(()=>n=!1)),!o&&T&8&&(o=!0,I.measureOption=E[3].elevation.options,er(()=>o=!1)),!u&&T&8&&(u=!0,I.terrainRgbUrl=E[3].elevation.url,er(()=>u=!1)),r.$set(I)},i(E){c||(Xe(r.$$.fragment,E),c=!0)},o(E){it(r.$$.fragment,E),c=!1},d(E){E&&ge(t),Vt(r)}}}function _w(e){let t,r,n,o,u,c;function l(E){e[13](E)}let h={title:"Routing tool",color:Ey,$$slots:{default:[yV]},$$scope:{ctx:e}};e[1]!==void 0&&(h.isPanelOpen=e[1]),t=new Ay({props:h}),Ft.push(()=>Jt(t,"isPanelOpen",l));function v(E){e[17](E)}let w={title:"Isochrone analysis",color:Ey,$$slots:{default:[vV]},$$scope:{ctx:e}};return e[2]!==void 0&&(w.isPanelOpen=e[2]),o=new Ay({props:w}),Ft.push(()=>Jt(o,"isPanelOpen",v)),{c(){Ut(t.$$.fragment),n=mr(),Ut(o.$$.fragment)},l(E){Yt(t.$$.fragment,E),n=gr(E),Yt(o.$$.fragment,E)},m(E,T){qt(t,E,T),Lt(E,n,T),qt(o,E,T),c=!0},p(E,T){const I={};T&524312&&(I.$$scope={dirty:T,ctx:E}),!r&&T&2&&(r=!0,I.isPanelOpen=E[1],er(()=>r=!1)),t.$set(I);const F={};T&524312&&(F.$$scope={dirty:T,ctx:E}),!u&&T&4&&(u=!0,F.isPanelOpen=E[2],er(()=>u=!1)),o.$set(F)},i(E){c||(Xe(t.$$.fragment,E),Xe(o.$$.fragment,E),c=!0)},o(E){it(t.$$.fragment,E),it(o.$$.fragment,E),c=!1},d(E){Vt(t,E),E&&ge(n),Vt(o,E)}}}function yV(e){let t,r,n,o,u,c;function l(E){e[10](E)}function h(E){e[11](E)}function v(E){e[12](E)}let w={};return e[4]!==void 0&&(w.map=e[4]),e[3].valhalla.url!==void 0&&(w.url=e[3].valhalla.url),e[3].valhalla.routingOptions!==void 0&&(w.options=e[3].valhalla.routingOptions),r=new fV({props:w}),Ft.push(()=>Jt(r,"map",l)),Ft.push(()=>Jt(r,"url",h)),Ft.push(()=>Jt(r,"options",v)),{c(){t=yt("div"),Ut(r.$$.fragment),this.h()},l(E){t=vt(E,"DIV",{class:!0});var T=Ct(t);Yt(r.$$.fragment,T),T.forEach(ge),this.h()},h(){ve(t,"class","accordion-content svelte-1toti4c")},m(E,T){Lt(E,t,T),qt(r,t,null),c=!0},p(E,T){const I={};!n&&T&16&&(n=!0,I.map=E[4],er(()=>n=!1)),!o&&T&8&&(o=!0,I.url=E[3].valhalla.url,er(()=>o=!1)),!u&&T&8&&(u=!0,I.options=E[3].valhalla.routingOptions,er(()=>u=!1)),r.$set(I)},i(E){c||(Xe(r.$$.fragment,E),c=!0)},o(E){it(r.$$.fragment,E),c=!1},d(E){E&&ge(t),Vt(r)}}}function vV(e){let t,r,n,o,u,c;function l(E){e[14](E)}function h(E){e[15](E)}function v(E){e[16](E)}let w={};return e[4]!==void 0&&(w.map=e[4]),e[3].valhalla.url!==void 0&&(w.url=e[3].valhalla.url),e[3].valhalla.isoChroneOptions!==void 0&&(w.options=e[3].valhalla.isoChroneOptions),r=new nV({props:w}),Ft.push(()=>Jt(r,"map",l)),Ft.push(()=>Jt(r,"url",h)),Ft.push(()=>Jt(r,"options",v)),{c(){t=yt("div"),Ut(r.$$.fragment),this.h()},l(E){t=vt(E,"DIV",{class:!0});var T=Ct(t);Yt(r.$$.fragment,T),T.forEach(ge),this.h()},h(){ve(t,"class","accordion-content svelte-1toti4c")},m(E,T){Lt(E,t,T),qt(r,t,null),c=!0},p(E,T){const I={};!n&&T&16&&(n=!0,I.map=E[4],er(()=>n=!1)),!o&&T&8&&(o=!0,I.url=E[3].valhalla.url,er(()=>o=!1)),!u&&T&8&&(u=!0,I.options=E[3].valhalla.isoChroneOptions,er(()=>u=!1)),r.$set(I)},i(E){c||(Xe(r.$$.fragment,E),c=!0)},o(E){it(r.$$.fragment,E),c=!1},d(E){E&&ge(t),Vt(r)}}}function _V(e){let t,r,n,o=e[3].elevation&&vw(e),u=e[3].valhalla&&_w(e);return{c(){t=yt("div"),o&&o.c(),r=mr(),u&&u.c(),this.h()},l(c){t=vt(c,"DIV",{class:!0});var l=Ct(t);o&&o.l(l),r=gr(l),u&&u.l(l),l.forEach(ge),this.h()},h(){ve(t,"class","panel-content svelte-1toti4c")},m(c,l){Lt(c,t,l),o&&o.m(t,null),lt(t,r),u&&u.m(t,null),n=!0},p(c,[l]){c[3].elevation?o?(o.p(c,l),l&8&&Xe(o,1)):(o=vw(c),o.c(),Xe(o,1),o.m(t,r)):o&&(ji(),it(o,1,1,()=>{o=null}),Ui()),c[3].valhalla?u?(u.p(c,l),l&8&&Xe(u,1)):(u=_w(c),u.c(),Xe(u,1),u.m(t,null)):u&&(ji(),it(u,1,1,()=>{u=null}),Ui())},i(c){n||(Xe(o),Xe(u),n=!0)},o(c){it(o),it(u),n=!1},d(c){c&&ge(t),o&&o.d(),u&&u.d()}}}let Ey="is-link";function bV(e,t,r){let n;ql(e,Sc,se=>r(4,n=se));let o="measure",u=!1,c=!1,l=!1;const h=()=>{switch(o){case"measure":r(0,u=!0),r(1,c=!1),r(2,l=!1);break;case"routing":r(0,u=!1),r(1,c=!0),r(2,l=!1);break;case"isochrone":r(0,u=!1),r(1,c=!1),r(2,l=!0);break}};function v(se){n=se,Sc.set(n)}function w(se){e.$$.not_equal(oo.elevation.options,se)&&(oo.elevation.options=se,r(3,oo))}function E(se){e.$$.not_equal(oo.elevation.url,se)&&(oo.elevation.url=se,r(3,oo))}function T(se){u=se,r(0,u)}function I(se){n=se,Sc.set(n)}function F(se){e.$$.not_equal(oo.valhalla.url,se)&&(oo.valhalla.url=se,r(3,oo))}function U(se){e.$$.not_equal(oo.valhalla.routingOptions,se)&&(oo.valhalla.routingOptions=se,r(3,oo))}function G(se){c=se,r(1,c)}function H(se){n=se,Sc.set(n)}function X(se){e.$$.not_equal(oo.valhalla.url,se)&&(oo.valhalla.url=se,r(3,oo))}function ee(se){e.$$.not_equal(oo.valhalla.isoChroneOptions,se)&&(oo.valhalla.isoChroneOptions=se,r(3,oo))}function K(se){l=se,r(2,l)}return e.$$.update=()=>{e.$$.dirty&1&&u&&r(5,o="measure"),e.$$.dirty&2&&c&&r(5,o="routing"),e.$$.dirty&4&&l&&r(5,o="isochrone"),e.$$.dirty&32&&h()},[u,c,l,oo,n,o,v,w,E,T,I,F,U,G,H,X,ee,K]}class wV extends Dn{constructor(t){super(),zn(this,t,bV,_V,Ln,{})}}function bw(e,t,r){const n=e.slice();return n[4]=t[r],n}function ww(e){let t,r,n,o,u,c,l=e[4].label+"",h,v,w,E,T,I,F;o=new go({props:{icon:e[4].icon,size:"2x","aria-hidden":"true"}});function U(){return e[3](e[4])}return{c(){t=yt("li"),r=yt("a"),n=yt("span"),Ut(o.$$.fragment),u=mr(),c=yt("span"),h=ei(l),w=mr(),E=yt("li"),this.h()},l(G){t=vt(G,"LI",{class:!0});var H=Ct(t);r=vt(H,"A",{class:!0});var X=Ct(r);n=vt(X,"SPAN",{class:!0});var ee=Ct(n);Yt(o.$$.fragment,ee),ee.forEach(ge),u=gr(X),c=vt(X,"SPAN",{class:!0});var K=Ct(c);h=ti(K,l),K.forEach(ge),X.forEach(ge),H.forEach(ge),w=gr(G),E=vt(G,"LI",{class:!0}),Ct(E).forEach(ge),this.h()},h(){ve(n,"class","icon ml-2 svelte-e2lduu"),ve(c,"class","svelte-e2lduu"),ve(r,"class","svelte-e2lduu"),ve(t,"class",v=rp(e[1].label===e[4].label?"is-active":"")+" svelte-e2lduu"),ve(E,"class","svelte-e2lduu")},m(G,H){Lt(G,t,H),lt(t,r),lt(r,n),qt(o,n,null),lt(r,u),lt(r,c),lt(c,h),Lt(G,w,H),Lt(G,E,H),T=!0,I||(F=rn(t,"click",U),I=!0)},p(G,H){e=G,(!T||H&2&&v!==(v=rp(e[1].label===e[4].label?"is-active":"")+" svelte-e2lduu"))&&ve(t,"class",v)},i(G){T||(Xe(o.$$.fragment,G),T=!0)},o(G){it(o.$$.fragment,G),T=!1},d(G){G&&ge(t),Vt(o),G&&ge(w),G&&ge(E),I=!1,F()}}}function xV(e){let t,r,n,o,u,c,l,h,v,w,E,T,I,F,U,G,H,X=e[2],ee=[];for(let se=0;se<X.length;se+=1)ee[se]=ww(bw(e,X,se));const K=se=>it(ee[se],1,1,()=>{ee[se]=null});return E=new JO({}),U=new wV({}),{c(){t=yt("div"),r=yt("div"),n=yt("a"),o=yt("img"),c=mr(),l=yt("div"),h=yt("ul");for(let se=0;se<ee.length;se+=1)ee[se].c();v=mr(),w=yt("div"),Ut(E.$$.fragment),I=mr(),F=yt("div"),Ut(U.$$.fragment),this.h()},l(se){t=vt(se,"DIV",{class:!0});var ce=Ct(t);r=vt(ce,"DIV",{class:!0});var _e=Ct(r);n=vt(_e,"A",{class:!0,href:!0});var pe=Ct(n);o=vt(pe,"IMG",{src:!0,alt:!0,class:!0}),pe.forEach(ge),c=gr(_e),l=vt(_e,"DIV",{class:!0});var Ge=Ct(l);h=vt(Ge,"UL",{class:!0});var We=Ct(h);for(let Fe=0;Fe<ee.length;Fe+=1)ee[Fe].l(We);We.forEach(ge),Ge.forEach(ge),_e.forEach(ge),v=gr(ce),w=vt(ce,"DIV",{class:!0});var Ae=Ct(w);Yt(E.$$.fragment,Ae),Ae.forEach(ge),I=gr(ce),F=vt(ce,"DIV",{class:!0});var Ie=Ct(F);Yt(U.$$.fragment,Ie),Ie.forEach(ge),ce.forEach(ge),this.h()},h(){Mw(o.src,u=oo.logo)||ve(o,"src",u),ve(o,"alt","logo"),ve(o,"class","svelte-e2lduu"),ve(n,"class","icon is-medium logo svelte-e2lduu"),ve(n,"href",oo.url),ve(h,"class","svelte-e2lduu"),ve(l,"class","tabs is-centered is-small mb-0 svelte-e2lduu"),ve(r,"class","header svelte-e2lduu"),w.hidden=T=e[1].label!==e[0].LAYERS,ve(w,"class","svelte-e2lduu"),F.hidden=G=e[1].label!==e[0].ADVANCED,ve(F,"class","svelte-e2lduu"),ve(t,"class","drawer-content svelte-e2lduu")},m(se,ce){Lt(se,t,ce),lt(t,r),lt(r,n),lt(n,o),lt(r,c),lt(r,l),lt(l,h);for(let _e=0;_e<ee.length;_e+=1)ee[_e].m(h,null);lt(t,v),lt(t,w),qt(E,w,null),lt(t,I),lt(t,F),qt(U,F,null),H=!0},p(se,[ce]){if(ce&6){X=se[2];let _e;for(_e=0;_e<X.length;_e+=1){const pe=bw(se,X,_e);ee[_e]?(ee[_e].p(pe,ce),Xe(ee[_e],1)):(ee[_e]=ww(pe),ee[_e].c(),Xe(ee[_e],1),ee[_e].m(h,null))}for(ji(),_e=X.length;_e<ee.length;_e+=1)K(_e);Ui()}(!H||ce&3&&T!==(T=se[1].label!==se[0].LAYERS))&&(w.hidden=T),(!H||ce&3&&G!==(G=se[1].label!==se[0].ADVANCED))&&(F.hidden=G)},i(se){if(!H){for(let ce=0;ce<X.length;ce+=1)Xe(ee[ce]);Xe(E.$$.fragment,se),Xe(U.$$.fragment,se),H=!0}},o(se){ee=ee.filter(Boolean);for(let ce=0;ce<ee.length;ce+=1)it(ee[ce]);it(E.$$.fragment,se),it(U.$$.fragment,se),H=!1},d(se){se&&ge(t),Ol(ee,se),Vt(E),Vt(U)}}}function kV(e,t,r){var n;(function(l){l.LAYERS="Layers",l.ADVANCED="Advanced"})(n||(n={}));let o=[{icon:JA,label:n.LAYERS},{icon:WA,label:n.ADVANCED}],u=o[0];return[n,u,o,l=>r(1,u=l)]}class AV extends Dn{constructor(t){super(),zn(this,t,kV,xV,Ln,{})}}class EV{constructor(t,r=20,n=20,o="#000000",u=4){Bi(this,"map");Bi(this,"width");Bi(this,"height");Bi(this,"svgCanvas");Bi(this,"xLine");Bi(this,"yLine");Bi(this,"color");Bi(this,"iconWidth");Bi(this,"iconHeight");Bi(this,"lineWidth");this.map=t,this.mapResize=this.mapResize.bind(this),this.iconWidth=r,this.iconHeight=n,this.color=o,this.lineWidth=u}create(){this.updateValues(),this.map!==void 0?(this.map.on("resize",this.mapResize),this.createCanvas(this.map.getCanvasContainer())):console.error("map object is null")}updateValues(){var t,r;this.width=(t=this.map)==null?void 0:t.getCanvas().clientWidth,this.height=(r=this.map)==null?void 0:r.getCanvas().clientHeight}mapResize(){this.updateValues(),this.updateCanvas()}updateCanvas(){if(this.svgCanvas!==void 0&&this.yLine!==void 0&&this.xLine!==void 0&&this.width!==void 0&&this.height!==void 0){this.svgCanvas.setAttribute("width",`${this.iconWidth}px`),this.svgCanvas.setAttribute("height",`${this.iconHeight}px`);const t=this.width/2,r=this.height/2,n=this.iconWidth/2,o=this.iconHeight/2;this.svgCanvas.style.top=`${r-o}px`,this.svgCanvas.style.left=`${t-n}px`,this.yLine.setAttribute("x1",`${n}px`),this.yLine.setAttribute("y1","0px"),this.yLine.setAttribute("x2",`${n}px`),this.yLine.setAttribute("y2",`${this.iconHeight}px`),this.xLine.setAttribute("x1","0px"),this.xLine.setAttribute("y1",`${o}px`),this.xLine.setAttribute("x2",`${this.iconWidth}px`),this.xLine.setAttribute("y2",`${o}px`)}else console.error("element value is null")}createCanvas(t){if(this.width!==void 0&&this.height!==void 0){const r=document.createElementNS("http://www.w3.org/2000/svg","svg");r.style.position="absolute",r.setAttribute("width",`${this.iconWidth}px`),r.setAttribute("height",`${this.iconHeight}px`);const n=this.width/2,o=this.height/2,u=this.iconWidth/2,c=this.iconHeight/2;r.style.top=`${o-c}px`,r.style.left=`${n-u}px`,this.yLine=r.appendChild(this.createLine(u.toString(),"0",u.toString(),this.iconHeight.toString(),this.color,`${this.lineWidth}px`)),this.xLine=r.appendChild(this.createLine("0",c.toString(),this.iconWidth.toString(),c.toString(),this.color,`${this.lineWidth}px`)),t==null||t.appendChild(r),this.svgCanvas=r}}createLine(t,r,n,o,u,c){const l=document.createElementNS("http://www.w3.org/2000/svg","line");return l.setAttribute("x1",t),l.setAttribute("y1",r),l.setAttribute("x2",n),l.setAttribute("y2",o),l.setAttribute("stroke",u),l.setAttribute("stroke-width",c),l}destroy(){this.xLine!==void 0&&(this.xLine.remove(),this.xLine=void 0),this.yLine!==void 0&&(this.yLine.remove(),this.yLine=void 0),this.svgCanvas!==void 0&&(this.svgCanvas.remove(),this.svgCanvas=void 0),this.map!==void 0&&(this.map.off("resize",this.mapResize),this.map=void 0)}}var wp=CV,SV=Object.prototype.hasOwnProperty;function CV(){for(var e={},t=0;t<arguments.length;t++){var r=arguments[t];for(var n in r)SV.call(r,n)&&(e[n]=r[n])}return e}var Sy={},IV={get exports(){return Sy},set exports(e){Sy=e}};(function(e,t){(function(){var r={};e.exports=r,r.simpleFilter=function(n,o){return o.filter(function(u){return r.test(n,u)})},r.test=function(n,o){return r.match(n,o)!==null},r.match=function(n,o,u){u=u||{};var c=0,l=[],h=o.length,v=0,w=0,E=u.pre||"",T=u.post||"",I=u.caseSensitive&&o||o.toLowerCase(),F;n=u.caseSensitive&&n||n.toLowerCase();for(var U=0;U<h;U++)F=o[U],I[U]===n[c]?(F=E+F+T,c+=1,w+=1+w):w=0,v+=w,l[l.length]=F;return c===n.length?(v=I===n?1/0:v,{rendered:l.join(""),score:v}):null},r.filter=function(n,o,u){return!o||o.length===0?[]:typeof n!="string"?o:(u=u||{},o.reduce(function(c,l,h,v){var w=l;u.extract&&(w=u.extract(l));var E=r.match(n,w,u);return E!=null&&(c[c.length]={string:E.rendered,score:E.score,index:h,original:l}),c},[]).sort(function(c,l){var h=l.score-c.score;return h||c.index-l.index}))}})()})(IV);var lc=function(e){return this.component=e,this.items=[],this.active=0,this.wrapper=document.createElement("div"),this.wrapper.className="suggestions-wrapper",this.element=document.createElement("ul"),this.element.className="suggestions",this.wrapper.appendChild(this.element),this.selectingListItem=!1,e.el.parentNode.insertBefore(this.wrapper,e.el.nextSibling),this};lc.prototype.show=function(){this.element.style.display="block"};lc.prototype.hide=function(){this.element.style.display="none"};lc.prototype.add=function(e){this.items.push(e)};lc.prototype.clear=function(){this.items=[],this.active=0};lc.prototype.isEmpty=function(){return!this.items.length};lc.prototype.isVisible=function(){return this.element.style.display==="block"};lc.prototype.draw=function(){if(this.element.innerHTML="",this.items.length===0){this.hide();return}for(var e=0;e<this.items.length;e++)this.drawItem(this.items[e],this.active===e);this.show()};lc.prototype.drawItem=function(e,t){var r=document.createElement("li"),n=document.createElement("a");t&&(r.className+=" active"),n.innerHTML=e.string,r.appendChild(n),this.element.appendChild(r),r.addEventListener("mousedown",function(){this.selectingListItem=!0}.bind(this)),r.addEventListener("mouseup",function(){this.handleMouseUp.call(this,e)}.bind(this))};lc.prototype.handleMouseUp=function(e){this.selectingListItem=!1,this.component.value(e.original),this.clear(),this.draw()};lc.prototype.move=function(e){this.active=e,this.draw()};lc.prototype.previous=function(){this.move(this.active===0?this.items.length-1:this.active-1)};lc.prototype.next=function(){this.move(this.active===this.items.length-1?0:this.active+1)};lc.prototype.drawError=function(e){var t=document.createElement("li");t.innerHTML=e,this.element.appendChild(t),this.show()};var TV=lc,LV=wp,PV=Sy,MV=TV,pu=function(e,t,r){return r=r||{},this.options=LV({minLength:2,limit:5,filter:!0,hideOnBlur:!0},r),this.el=e,this.data=t||[],this.list=new MV(this),this.query="",this.selected=null,this.list.draw(),this.el.addEventListener("keyup",function(n){this.handleKeyUp(n.keyCode)}.bind(this),!1),this.el.addEventListener("keydown",function(n){this.handleKeyDown(n)}.bind(this)),this.el.addEventListener("focus",function(){this.handleFocus()}.bind(this)),this.el.addEventListener("blur",function(){this.handleBlur()}.bind(this)),this.el.addEventListener("paste",function(n){this.handlePaste(n)}.bind(this)),this.render=this.options.render?this.options.render.bind(this):this.render.bind(this),this.getItemValue=this.options.getItemValue?this.options.getItemValue.bind(this):this.getItemValue.bind(this),this};pu.prototype.handleKeyUp=function(e){e===40||e===38||e===27||e===13||e===9||this.handleInputChange(this.el.value)};pu.prototype.handleKeyDown=function(e){switch(e.keyCode){case 13:case 9:this.list.isEmpty()||(this.list.isVisible()&&e.preventDefault(),this.value(this.list.items[this.list.active].original),this.list.hide());break;case 27:this.list.isEmpty()||this.list.hide();break;case 38:this.list.previous();break;case 40:this.list.next();break}};pu.prototype.handleBlur=function(){!this.list.selectingListItem&&this.options.hideOnBlur&&this.list.hide()};pu.prototype.handlePaste=function(e){if(e.clipboardData)this.handleInputChange(e.clipboardData.getData("Text"));else{var t=this;setTimeout(function(){t.handleInputChange(e.target.value)},100)}};pu.prototype.handleInputChange=function(e){if(this.query=this.normalize(e),this.list.clear(),this.query.length<this.options.minLength){this.list.draw();return}this.getCandidates(function(t){for(var r=0;r<t.length&&(this.list.add(t[r]),r!==this.options.limit-1);r++);this.list.draw()}.bind(this))};pu.prototype.handleFocus=function(){this.list.isEmpty()||this.list.show(),this.list.selectingListItem=!1};pu.prototype.update=function(e){this.data=e,this.handleKeyUp()};pu.prototype.clear=function(){this.data=[],this.list.clear()};pu.prototype.normalize=function(e){return e=e.toLowerCase(),e};pu.prototype.match=function(e,t){return e.indexOf(t)>-1};pu.prototype.value=function(e){if(this.selected=e,this.el.value=this.getItemValue(e),document.createEvent){var t=document.createEvent("HTMLEvents");t.initEvent("change",!0,!1),this.el.dispatchEvent(t)}else this.el.fireEvent("onchange")};pu.prototype.getCandidates=function(e){var t={pre:"<strong>",post:"</strong>",extract:function(n){return this.getItemValue(n)}.bind(this)},r;this.options.filter?(r=PV.filter(this.query,this.data,t),r=r.map(function(n){return{original:n.original,string:this.render(n.original,n.string)}}.bind(this))):r=this.data.map(function(n){var o=this.render(n);return{original:n,string:o}}.bind(this)),e(r)};pu.prototype.getItemValue=function(e){return e};pu.prototype.render=function(e,t){if(t)return t;for(var r=e.original?this.getItemValue(e.original):this.getItemValue(e),n=this.normalize(r),o=n.lastIndexOf(this.query);o>-1;){var u=o+this.query.length;r=r.slice(0,o)+"<strong>"+r.slice(o,u)+"</strong>"+r.slice(u),o=n.slice(0,o).lastIndexOf(this.query)}return r};pu.prototype.renderError=function(e){this.list.drawError(e)};var DV=pu,Jx=DV,zV=Jx;typeof window<"u"&&(window.Suggestions=Jx);var NV="Expected a function",xw=0/0,RV="[object Symbol]",OV=/^\s+|\s+$/g,FV=/^[-+]0x[0-9a-f]+$/i,BV=/^0b[01]+$/i,jV=/^0o[0-7]+$/i,UV=parseInt,qV=typeof Hc=="object"&&Hc&&Hc.Object===Object&&Hc,VV=typeof self=="object"&&self&&self.Object===Object&&self,$V=qV||VV||Function("return this")(),GV=Object.prototype,HV=GV.toString,WV=Math.max,ZV=Math.min,wg=function(){return $V.Date.now()};function XV(e,t,r){var n,o,u,c,l,h,v=0,w=!1,E=!1,T=!0;if(typeof e!="function")throw new TypeError(NV);t=kw(t)||0,Cy(r)&&(w=!!r.leading,E="maxWait"in r,u=E?WV(kw(r.maxWait)||0,t):u,T="trailing"in r?!!r.trailing:T);function I(ce){var _e=n,pe=o;return n=o=void 0,v=ce,c=e.apply(pe,_e),c}function F(ce){return v=ce,l=setTimeout(H,t),w?I(ce):c}function U(ce){var _e=ce-h,pe=ce-v,Ge=t-_e;return E?ZV(Ge,u-pe):Ge}function G(ce){var _e=ce-h,pe=ce-v;return h===void 0||_e>=t||_e<0||E&&pe>=u}function H(){var ce=wg();if(G(ce))return X(ce);l=setTimeout(H,U(ce))}function X(ce){return l=void 0,T&&n?I(ce):(n=o=void 0,c)}function ee(){l!==void 0&&clearTimeout(l),v=0,n=h=o=l=void 0}function K(){return l===void 0?c:X(wg())}function se(){var ce=wg(),_e=G(ce);if(n=arguments,o=this,h=ce,_e){if(l===void 0)return F(h);if(E)return l=setTimeout(H,t),I(h)}return l===void 0&&(l=setTimeout(H,t)),c}return se.cancel=ee,se.flush=K,se}function Cy(e){var t=typeof e;return!!e&&(t=="object"||t=="function")}function YV(e){return!!e&&typeof e=="object"}function JV(e){return typeof e=="symbol"||YV(e)&&HV.call(e)==RV}function kw(e){if(typeof e=="number")return e;if(JV(e))return xw;if(Cy(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=Cy(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=e.replace(OV,"");var r=BV.test(e);return r||jV.test(e)?UV(e.slice(2),r?2:8):FV.test(e)?xw:+e}var KV=XV,e2={},QV={get exports(){return e2},set exports(e){e2=e}},ep=typeof Reflect=="object"?Reflect:null,Aw=ep&&typeof ep.apply=="function"?ep.apply:function(t,r,n){return Function.prototype.apply.call(t,r,n)},L1;ep&&typeof ep.ownKeys=="function"?L1=ep.ownKeys:Object.getOwnPropertySymbols?L1=function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:L1=function(t){return Object.getOwnPropertyNames(t)};function e$(e){console&&console.warn&&console.warn(e)}var Kx=Number.isNaN||function(t){return t!==t};function Aa(){Aa.init.call(this)}QV.exports=Aa;e2.once=i$;Aa.EventEmitter=Aa;Aa.prototype._events=void 0;Aa.prototype._eventsCount=0;Aa.prototype._maxListeners=void 0;var Ew=10;function E2(e){if(typeof e!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}Object.defineProperty(Aa,"defaultMaxListeners",{enumerable:!0,get:function(){return Ew},set:function(e){if(typeof e!="number"||e<0||Kx(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");Ew=e}});Aa.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};Aa.prototype.setMaxListeners=function(t){if(typeof t!="number"||t<0||Kx(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this};function Qx(e){return e._maxListeners===void 0?Aa.defaultMaxListeners:e._maxListeners}Aa.prototype.getMaxListeners=function(){return Qx(this)};Aa.prototype.emit=function(t){for(var r=[],n=1;n<arguments.length;n++)r.push(arguments[n]);var o=t==="error",u=this._events;if(u!==void 0)o=o&&u.error===void 0;else if(!o)return!1;if(o){var c;if(r.length>0&&(c=r[0]),c instanceof Error)throw c;var l=new Error("Unhandled error."+(c?" ("+c.message+")":""));throw l.context=c,l}var h=u[t];if(h===void 0)return!1;if(typeof h=="function")Aw(h,this,r);else for(var v=h.length,w=ik(h,v),n=0;n<v;++n)Aw(w[n],this,r);return!0};function ek(e,t,r,n){var o,u,c;if(E2(r),u=e._events,u===void 0?(u=e._events=Object.create(null),e._eventsCount=0):(u.newListener!==void 0&&(e.emit("newListener",t,r.listener?r.listener:r),u=e._events),c=u[t]),c===void 0)c=u[t]=r,++e._eventsCount;else if(typeof c=="function"?c=u[t]=n?[r,c]:[c,r]:n?c.unshift(r):c.push(r),o=Qx(e),o>0&&c.length>o&&!c.warned){c.warned=!0;var l=new Error("Possible EventEmitter memory leak detected. "+c.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");l.name="MaxListenersExceededWarning",l.emitter=e,l.type=t,l.count=c.length,e$(l)}return e}Aa.prototype.addListener=function(t,r){return ek(this,t,r,!1)};Aa.prototype.on=Aa.prototype.addListener;Aa.prototype.prependListener=function(t,r){return ek(this,t,r,!0)};function t$(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function tk(e,t,r){var n={fired:!1,wrapFn:void 0,target:e,type:t,listener:r},o=t$.bind(n);return o.listener=r,n.wrapFn=o,o}Aa.prototype.once=function(t,r){return E2(r),this.on(t,tk(this,t,r)),this};Aa.prototype.prependOnceListener=function(t,r){return E2(r),this.prependListener(t,tk(this,t,r)),this};Aa.prototype.removeListener=function(t,r){var n,o,u,c,l;if(E2(r),o=this._events,o===void 0)return this;if(n=o[t],n===void 0)return this;if(n===r||n.listener===r)--this._eventsCount===0?this._events=Object.create(null):(delete o[t],o.removeListener&&this.emit("removeListener",t,n.listener||r));else if(typeof n!="function"){for(u=-1,c=n.length-1;c>=0;c--)if(n[c]===r||n[c].listener===r){l=n[c].listener,u=c;break}if(u<0)return this;u===0?n.shift():r$(n,u),n.length===1&&(o[t]=n[0]),o.removeListener!==void 0&&this.emit("removeListener",t,l||r)}return this};Aa.prototype.off=Aa.prototype.removeListener;Aa.prototype.removeAllListeners=function(t){var r,n,o;if(n=this._events,n===void 0)return this;if(n.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):n[t]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete n[t]),this;if(arguments.length===0){var u=Object.keys(n),c;for(o=0;o<u.length;++o)c=u[o],c!=="removeListener"&&this.removeAllListeners(c);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(r=n[t],typeof r=="function")this.removeListener(t,r);else if(r!==void 0)for(o=r.length-1;o>=0;o--)this.removeListener(t,r[o]);return this};function rk(e,t,r){var n=e._events;if(n===void 0)return[];var o=n[t];return o===void 0?[]:typeof o=="function"?r?[o.listener||o]:[o]:r?n$(o):ik(o,o.length)}Aa.prototype.listeners=function(t){return rk(this,t,!0)};Aa.prototype.rawListeners=function(t){return rk(this,t,!1)};Aa.listenerCount=function(e,t){return typeof e.listenerCount=="function"?e.listenerCount(t):nk.call(e,t)};Aa.prototype.listenerCount=nk;function nk(e){var t=this._events;if(t!==void 0){var r=t[e];if(typeof r=="function")return 1;if(r!==void 0)return r.length}return 0}Aa.prototype.eventNames=function(){return this._eventsCount>0?L1(this._events):[]};function ik(e,t){for(var r=new Array(t),n=0;n<t;++n)r[n]=e[n];return r}function r$(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}function n$(e){for(var t=new Array(e.length),r=0;r<t.length;++r)t[r]=e[r].listener||e[r];return t}function i$(e,t){return new Promise(function(r,n){function o(c){e.removeListener(t,u),n(c)}function u(){typeof e.removeListener=="function"&&e.removeListener("error",o),r([].slice.call(arguments))}ok(e,t,u,{once:!0}),t!=="error"&&o$(e,o,{once:!0})})}function o$(e,t,r){typeof e.on=="function"&&ok(e,"error",t,r)}function ok(e,t,r,n){if(typeof e.on=="function")n.once?e.once(t,r):e.on(t,r);else if(typeof e.addEventListener=="function")e.addEventListener(t,function o(u){n.once&&e.removeEventListener(t,o),r(u)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e)}var a$={fr:{name:"France",bbox:[[-4.59235,41.380007],[9.560016,51.148506]]},us:{name:"United States",bbox:[[-171.791111,18.91619],[-66.96466,71.357764]]},ru:{name:"Russia",bbox:[[19.66064,41.151416],[190.10042,81.2504]]},ca:{name:"Canada",bbox:[[-140.99778,41.675105],[-52.648099,83.23324]]}};function s$(e){var t=e.match(/\s*(.+)\s*=\s*"?([^"]+)"?/);return t?{key:t[1],value:t[2]}:null}function l$(e){var t=e.match(/<?([^>]*)>(.*)/);if(!t)return null;var r=t[1],n=t[2].split(";"),o=null,u=n.reduce(function(c,l){var h=s$(l);return h?h.key==="rel"?(o||(o=h.value),c):(c[h.key]=h.value,c):c},{});return o?{url:r,rel:o,params:u}:null}function u$(e){return e?e.split(/,\s*</).reduce(function(t,r){var n=l$(r);if(!n)return t;var o=n.rel.split(/\s+/);return o.forEach(function(u){t[u]||(t[u]={url:n.url,params:n.params})}),t},{}):{}}var c$=u$,f$=c$;function $v(e,t){this.request=e,this.headers=t.headers,this.rawBody=t.body,this.statusCode=t.statusCode;try{this.body=JSON.parse(t.body||"{}")}catch{this.body=t.body}this.links=f$(this.headers.link)}$v.prototype.hasNextPage=function(){return!!this.links.next};$v.prototype.nextPage=function(){return this.hasNextPage()?this.request._extend({path:this.links.next.url}):null};var h$=$v,S2={API_ORIGIN:"https://api.mapbox.com",EVENT_PROGRESS_DOWNLOAD:"downloadProgress",EVENT_PROGRESS_UPLOAD:"uploadProgress",EVENT_ERROR:"error",EVENT_RESPONSE:"response",ERROR_HTTP:"HttpError",ERROR_REQUEST_ABORTED:"RequestAbortedError"},Sw=S2;function p$(e){var t=e.type||Sw.ERROR_HTTP,r;if(e.body)try{r=JSON.parse(e.body)}catch{r=e.body}else r=null;var n=e.message||null;n||(typeof r=="string"?n=r:r&&typeof r.message=="string"?n=r.message:t===Sw.ERROR_REQUEST_ABORTED&&(n="Request aborted")),this.message=n,this.type=t,this.statusCode=e.statusCode||null,this.request=e.request,this.body=r}var d$=p$;function m$(e){var t=e.indexOf(":"),r=e.substring(0,t).trim().toLowerCase(),n=e.substring(t+1).trim();return{name:r,value:n}}function g$(e){var t={};return e&&e.trim().split(/[\r|\n]+/).forEach(function(r){var n=m$(r);t[n.name]=n.value}),t}var y$=g$,v$=h$,Cw=d$,xg=S2,_$=y$,t2={};function b$(e){var t=t2[e.id];t&&(t.abort(),delete t2[e.id])}function w$(e,t){return new v$(e,{body:t.response,headers:_$(t.getAllResponseHeaders()),statusCode:t.status})}function Iw(e){var t=e.total,r=e.loaded,n=100*r/t;return{total:t,transferred:r,percent:n}}function ak(e,t){return new Promise(function(r,n){t.onprogress=function(c){e.emitter.emit(xg.EVENT_PROGRESS_DOWNLOAD,Iw(c))};var o=e.file;o&&(t.upload.onprogress=function(c){e.emitter.emit(xg.EVENT_PROGRESS_UPLOAD,Iw(c))}),t.onerror=function(c){n(c)},t.onabort=function(){var c=new Cw({request:e,type:xg.ERROR_REQUEST_ABORTED});n(c)},t.onload=function(){if(delete t2[e.id],t.status<200||t.status>=400){var c=new Cw({request:e,body:t.response,statusCode:t.status});n(c);return}r(t)};var u=e.body;typeof u=="string"?t.send(u):u?t.send(JSON.stringify(u)):o?t.send(o):t.send(),t2[e.id]=t}).then(function(r){return w$(e,r)})}function sk(e,t){var r=e.url(t),n=new window.XMLHttpRequest;return n.open(e.method,r),Object.keys(e.headers).forEach(function(o){n.setRequestHeader(o,e.headers[o])}),n}function x$(e){return Promise.resolve().then(function(){var t=sk(e,e.client.accessToken);return ak(e,t)})}var k$={browserAbort:b$,sendRequestXhr:ak,browserSend:x$,createRequestXhr:sk},r2={},A$={get exports(){return r2},set exports(e){r2=e}};/*! http://mths.be/base64 v0.1.0 by @mathias | MIT license */(function(e,t){(function(r){var n=t,o=e&&e.exports==n&&e,u=typeof Hc=="object"&&Hc;(u.global===u||u.window===u)&&(r=u);var c=function(F){this.message=F};c.prototype=new Error,c.prototype.name="InvalidCharacterError";var l=function(F){throw new c(F)},h="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",v=/[\t\n\f\r ]/g,w=function(F){F=String(F).replace(v,"");var U=F.length;U%4==0&&(F=F.replace(/==?$/,""),U=F.length),(U%4==1||/[^+a-zA-Z0-9/]/.test(F))&&l("Invalid character: the string to be decoded is not correctly encoded.");for(var G=0,H,X,ee="",K=-1;++K<U;)X=h.indexOf(F.charAt(K)),H=G%4?H*64+X:X,G++%4&&(ee+=String.fromCharCode(255&H>>(-2*G&6)));return ee},E=function(F){F=String(F),/[^\0-\xFF]/.test(F)&&l("The string to be encoded contains characters outside of the Latin1 range.");for(var U=F.length%3,G="",H=-1,X,ee,K,se,ce=F.length-U;++H<ce;)X=F.charCodeAt(H)<<16,ee=F.charCodeAt(++H)<<8,K=F.charCodeAt(++H),se=X+ee+K,G+=h.charAt(se>>18&63)+h.charAt(se>>12&63)+h.charAt(se>>6&63)+h.charAt(se&63);return U==2?(X=F.charCodeAt(H)<<8,ee=F.charCodeAt(++H),se=X+ee,G+=h.charAt(se>>10)+h.charAt(se>>4&63)+h.charAt(se<<2&63)+"="):U==1&&(se=F.charCodeAt(H),G+=h.charAt(se>>2)+h.charAt(se<<4&63)+"=="),G},T={encode:E,decode:w,version:"0.1.0"};if(n&&!n.nodeType)if(o)o.exports=T;else for(var I in T)T.hasOwnProperty(I)&&(n[I]=T[I]);else r.base64=T})(Hc)})(A$,r2);var E$=r2,kg={};function S$(e){if(kg[e])return kg[e];var t=e.split("."),r=t[0],n=t[1];if(!n)throw new Error("Invalid token");var o=C$(n),u={usage:r,user:o.u};return Xf(o,"a")&&(u.authorization=o.a),Xf(o,"exp")&&(u.expires=o.exp*1e3),Xf(o,"iat")&&(u.created=o.iat*1e3),Xf(o,"scopes")&&(u.scopes=o.scopes),Xf(o,"client")&&(u.client=o.client),Xf(o,"ll")&&(u.lastLogin=o.ll),Xf(o,"iu")&&(u.impersonator=o.iu),kg[e]=u,u}function C$(e){try{return JSON.parse(E$.decode(e))}catch{throw new Error("Invalid token")}}function Xf(e,t){return Object.prototype.hasOwnProperty.call(e,t)}var lk=S$,Iy={},I$={get exports(){return Iy},set exports(e){Iy=e}};(function(e){var t=Object.prototype.hasOwnProperty,r="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(r=!1));function o(h,v,w){this.fn=h,this.context=v,this.once=w||!1}function u(h,v,w,E,T){if(typeof w!="function")throw new TypeError("The listener must be a function");var I=new o(w,E||h,T),F=r?r+v:v;return h._events[F]?h._events[F].fn?h._events[F]=[h._events[F],I]:h._events[F].push(I):(h._events[F]=I,h._eventsCount++),h}function c(h,v){--h._eventsCount===0?h._events=new n:delete h._events[v]}function l(){this._events=new n,this._eventsCount=0}l.prototype.eventNames=function(){var v=[],w,E;if(this._eventsCount===0)return v;for(E in w=this._events)t.call(w,E)&&v.push(r?E.slice(1):E);return Object.getOwnPropertySymbols?v.concat(Object.getOwnPropertySymbols(w)):v},l.prototype.listeners=function(v){var w=r?r+v:v,E=this._events[w];if(!E)return[];if(E.fn)return[E.fn];for(var T=0,I=E.length,F=new Array(I);T<I;T++)F[T]=E[T].fn;return F},l.prototype.listenerCount=function(v){var w=r?r+v:v,E=this._events[w];return E?E.fn?1:E.length:0},l.prototype.emit=function(v,w,E,T,I,F){var U=r?r+v:v;if(!this._events[U])return!1;var G=this._events[U],H=arguments.length,X,ee;if(G.fn){switch(G.once&&this.removeListener(v,G.fn,void 0,!0),H){case 1:return G.fn.call(G.context),!0;case 2:return G.fn.call(G.context,w),!0;case 3:return G.fn.call(G.context,w,E),!0;case 4:return G.fn.call(G.context,w,E,T),!0;case 5:return G.fn.call(G.context,w,E,T,I),!0;case 6:return G.fn.call(G.context,w,E,T,I,F),!0}for(ee=1,X=new Array(H-1);ee<H;ee++)X[ee-1]=arguments[ee];G.fn.apply(G.context,X)}else{var K=G.length,se;for(ee=0;ee<K;ee++)switch(G[ee].once&&this.removeListener(v,G[ee].fn,void 0,!0),H){case 1:G[ee].fn.call(G[ee].context);break;case 2:G[ee].fn.call(G[ee].context,w);break;case 3:G[ee].fn.call(G[ee].context,w,E);break;case 4:G[ee].fn.call(G[ee].context,w,E,T);break;default:if(!X)for(se=1,X=new Array(H-1);se<H;se++)X[se-1]=arguments[se];G[ee].fn.apply(G[ee].context,X)}}return!0},l.prototype.on=function(v,w,E){return u(this,v,w,E,!1)},l.prototype.once=function(v,w,E){return u(this,v,w,E,!0)},l.prototype.removeListener=function(v,w,E,T){var I=r?r+v:v;if(!this._events[I])return this;if(!w)return c(this,I),this;var F=this._events[I];if(F.fn)F.fn===w&&(!T||F.once)&&(!E||F.context===E)&&c(this,I);else{for(var U=0,G=[],H=F.length;U<H;U++)(F[U].fn!==w||T&&!F[U].once||E&&F[U].context!==E)&&G.push(F[U]);G.length?this._events[I]=G.length===1?G[0]:G:c(this,I)}return this},l.prototype.removeAllListeners=function(v){var w;return v?(w=r?r+v:v,this._events[w]&&c(this,w)):(this._events=new n,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=r,l.EventEmitter=l,e.exports=l})(I$);function T$(e){return e.map(encodeURIComponent).join(",")}function uk(e){return Array.isArray(e)?T$(e):encodeURIComponent(String(e))}function ck(e,t,r){if(r===!1||r===null)return e;var n=/\?/.test(e)?"&":"?",o=encodeURIComponent(t);return r!==void 0&&r!==""&&r!==!0&&(o+="="+uk(r)),""+e+n+o}function L$(e,t){if(!t)return e;var r=e;return Object.keys(t).forEach(function(n){var o=t[n];o!==void 0&&(Array.isArray(o)&&(o=o.filter(function(u){return u!=null}).join(",")),r=ck(r,n,o))}),r}function P$(e,t){if(!t||e.slice(0,4)==="http")return e;var r=e[0]==="/"?"":"/";return""+t.replace(/\/$/,"")+r+e}function M$(e,t){return t?e.replace(/\/:([a-zA-Z0-9]+)/g,function(r,n){var o=t[n];if(o===void 0)throw new Error("Unspecified route parameter "+n);var u=uk(o);return"/"+u}):e}var D$={appendQueryObject:L$,appendQueryParam:ck,prependOrigin:P$,interpolateRouteParams:M$},z$=lk,Gv=wp,N$=Iy,_1=D$,Tw=S2,R$=1;function Rf(e,t){if(!e)throw new Error("MapiRequest requires a client");if(!t||!t.path||!t.method)throw new Error("MapiRequest requires an options object with path and method properties");var r={};t.body&&(r["content-type"]="application/json");var n=Gv(r,t.headers),o=Object.keys(n).reduce(function(u,c){return u[c.toLowerCase()]=n[c],u},{});this.id=R$++,this._options=t,this.emitter=new N$,this.client=e,this.response=null,this.error=null,this.sent=!1,this.aborted=!1,this.path=t.path,this.method=t.method,this.origin=t.origin||e.origin,this.query=t.query||{},this.params=t.params||{},this.body=t.body||null,this.file=t.file||null,this.encoding=t.encoding||"utf8",this.sendFileAs=t.sendFileAs||null,this.headers=o}Rf.prototype.url=function(t){var r=_1.prependOrigin(this.path,this.origin);r=_1.appendQueryObject(r,this.query);var n=this.params,o=t??this.client.accessToken;if(o){r=_1.appendQueryParam(r,"access_token",o);var u=z$(o).user;n=Gv({ownerId:u},n)}return r=_1.interpolateRouteParams(r,n),r};Rf.prototype.send=function(){var t=this;if(t.sent)throw new Error("This request has already been sent. Check the response and error properties. Create a new request with clone().");return t.sent=!0,t.client.sendRequest(t).then(function(r){return t.response=r,t.emitter.emit(Tw.EVENT_RESPONSE,r),r},function(r){throw t.error=r,t.emitter.emit(Tw.EVENT_ERROR,r),r})};Rf.prototype.abort=function(){this._nextPageRequest&&(this._nextPageRequest.abort(),delete this._nextPageRequest),!(this.response||this.error||this.aborted)&&(this.aborted=!0,this.client.abortRequest(this))};Rf.prototype.eachPage=function(t){var r=this;function n(c){function l(){delete r._nextPageRequest;var h=c.nextPage();h&&(r._nextPageRequest=h,u(h))}t(null,c,l)}function o(c){t(c,null,function(){})}function u(c){c.send().then(n,o)}u(this)};Rf.prototype.clone=function(){return this._extend()};Rf.prototype._extend=function(t){var r=Gv(this._options,t);return new Rf(this.client,r)};var O$=Rf,F$=lk,B$=O$,j$=S2;function fk(e){if(!e||!e.accessToken)throw new Error("Cannot create a client without an access token");F$(e.accessToken),this.accessToken=e.accessToken,this.origin=e.origin||j$.API_ORIGIN}fk.prototype.createRequest=function(t){return new B$(this,t)};var hk=fk,pk=k$,dk=hk;function dp(e){dk.call(this,e)}dp.prototype=Object.create(dk.prototype);dp.prototype.constructor=dp;dp.prototype.sendRequest=pk.browserSend;dp.prototype.abortRequest=pk.browserAbort;function U$(e){return new dp(e)}var mk=U$,q$=mk,V$=q$,$$=Object.prototype.toString,G$=function(e){var t;return $$.call(e)==="[object Object]"&&(t=Object.getPrototypeOf(e),t===null||t===Object.getPrototypeOf({}))},H$=G$,W$=wp,gk="value",Ag=`
  `,Va={};Va.assert=function(e,t){return t=t||{},function(r){var n=Of(e,r);if(n){var o=Hv(n,t);throw t.apiName&&(o=t.apiName+": "+o),new Error(o)}}};Va.shape=function(t){var r=J$(t);return function(o){var u=Of(Va.plainObject,o);if(u)return u;for(var c,l,h=[],v=0;v<r.length;v++)c=r[v].key,l=r[v].value,u=Of(l,o[c]),u&&h.push([c].concat(u));return h.length<2?h[0]:function(w){h=h.map(function(I){var F=I[0],U=Hv(I,w).split(`
`).join(Ag);return"- "+F+": "+U});var E=w.path.join("."),T=E===gk?"":" of "+E;return"The following properties"+T+" have invalid values:"+Ag+h.join(Ag)}}};Va.strictShape=function(t){var r=Va.shape(t);return function(o){var u=r(o);if(u)return u;var c=Object.keys(o).reduce(function(l,h){return t[h]===void 0&&l.push(h),l},[]);if(c.length!==0)return function(){return"The following keys are invalid: "+c.join(", ")}}};Va.arrayOf=function(t){return yk(t)};Va.tuple=function(){var t=Array.isArray(arguments[0])?arguments[0]:Array.prototype.slice.call(arguments);return yk(t)};function yk(e){var t=Array.isArray(e),r=function(n){return t?e[n]:e};return function(o){var u=Of(Va.plainArray,o);if(u)return u;if(t&&o.length!==e.length)return"an array with "+e.length+" items";for(var c=0;c<o.length;c++)if(u=Of(r(c),o[c]),u)return[c].concat(u)}}Va.required=function(t){function r(n){return n==null?function(o){return vk(o,_k(o.path)?"cannot be undefined/null.":"is required.")}:t.apply(this,arguments)}return r.__required=!0,r};Va.oneOfType=function(){var t=Array.isArray(arguments[0])?arguments[0]:Array.prototype.slice.call(arguments);return function(n){var o=t.map(function(u){return Of(u,n)}).filter(Boolean);if(o.length===t.length)return o.every(function(u){return u.length===1&&typeof u[0]=="string"})?Z$(o.map(function(u){return u[0]})):o.reduce(function(u,c){return c.length>u.length?c:u})}};Va.equal=function(t){return function(n){if(n!==t)return JSON.stringify(t)}};Va.oneOf=function(){var t=Array.isArray(arguments[0])?arguments[0]:Array.prototype.slice.call(arguments),r=t.map(function(n){return Va.equal(n)});return Va.oneOfType.apply(this,r)};Va.range=function(t){var r=t[0],n=t[1];return function(u){var c=Of(Va.number,u);if(c||u<r||u>n)return"number between "+r+" & "+n+" (inclusive)"}};Va.any=function(){};Va.boolean=function(t){if(typeof t!="boolean")return"boolean"};Va.number=function(t){if(typeof t!="number")return"number"};Va.plainArray=function(t){if(!Array.isArray(t))return"array"};Va.plainObject=function(t){if(!H$(t))return"object"};Va.string=function(t){if(typeof t!="string")return"string"};Va.func=function(t){if(typeof t!="function")return"function"};function Of(e,t){if(!(t==null&&!e.hasOwnProperty("__required"))){var r=e(t);if(r)return Array.isArray(r)?r:[r]}}function Hv(e,t){var r=e.length,n=e[r-1],o=e.slice(0,r-1);return o.length===0&&(o=[gk]),t=W$(t,{path:o}),typeof n=="function"?n(t):vk(t,X$(n))}function Z$(e){return e.length<2?e[0]:e.length===2?e.join(" or "):e.slice(0,-1).join(", ")+", or "+e.slice(-1)}function X$(e){return"must be "+Y$(e)+"."}function Y$(e){return/^an? /.test(e)?e:/^[aeiou]/i.test(e)?"an "+e:/^[a-z]/i.test(e)?"a "+e:e}function vk(e,t){var r=_k(e.path),n=e.path.join(".")+" "+t,o=r?"Item at position ":"";return o+n}function _k(e){return typeof e[e.length-1]=="number"||typeof e[0]=="number"}function J$(e){return Object.keys(e||{}).map(function(t){return{key:t,value:e[t]}})}Va.validate=Of;Va.processMessage=Hv;var K$=Va,Q$=wp,tp=K$;function eG(e){if(typeof window<"u")return e instanceof Hc.Blob||e instanceof Hc.ArrayBuffer?void 0:"Blob or ArrayBuffer";if(!(typeof e=="string"||e.pipe!==void 0))return"Filename or Readable stream"}function tG(e,t){return tp.assert(tp.strictShape(e),t)}function rG(e){var t="date";if(typeof e=="boolean")return t;try{var r=new Date(e);if(r.getTime&&isNaN(r.getTime()))return t}catch{return t}}function nG(e){return tp.tuple(tp.number,tp.number)(e)}var iG=Q$(tp,{file:eG,date:rG,coordinates:nG,assertShape:tG});function oG(e,t){var r=function(n,o){return t.indexOf(n)!==-1&&o!==void 0};return typeof t=="function"&&(r=t),Object.keys(e).filter(function(n){return r(n,e[n])}).reduce(function(n,o){return n[o]=e[o],n},{})}var aG=oG;function sG(e,t){return Object.keys(e).reduce(function(r,n){return r[n]=t(n,e[n]),r},{})}var lG=sG,uG=lG;function cG(e){return uG(e,function(t,r){return typeof r=="boolean"?JSON.stringify(r):r})}var fG=cG,hG=hk,pG=mk;function dG(e){return function(t){var r;hG.prototype.isPrototypeOf(t)?r=t:r=pG(t);var n=Object.create(e);return n.client=r,n}}var mG=dG,bk=wp,Wo=iG,n2=aG,wk=fG,gG=mG,Wv={},xk=["country","region","postcode","district","place","locality","neighborhood","address","poi","poi.landmark"];Wv.forwardGeocode=function(e){Wo.assertShape({query:Wo.required(Wo.string),mode:Wo.oneOf("mapbox.places","mapbox.places-permanent"),countries:Wo.arrayOf(Wo.string),proximity:Wo.oneOf(Wo.coordinates,"ip"),types:Wo.arrayOf(Wo.oneOf(xk)),autocomplete:Wo.boolean,bbox:Wo.arrayOf(Wo.number),limit:Wo.number,language:Wo.arrayOf(Wo.string),routing:Wo.boolean,fuzzyMatch:Wo.boolean,worldview:Wo.string})(e),e.mode=e.mode||"mapbox.places";var t=wk(bk({country:e.countries},n2(e,["proximity","types","autocomplete","bbox","limit","language","routing","fuzzyMatch","worldview"])));return this.client.createRequest({method:"GET",path:"/geocoding/v5/:mode/:query.json",params:n2(e,["mode","query"]),query:t})};Wv.reverseGeocode=function(e){Wo.assertShape({query:Wo.required(Wo.coordinates),mode:Wo.oneOf("mapbox.places","mapbox.places-permanent"),countries:Wo.arrayOf(Wo.string),types:Wo.arrayOf(Wo.oneOf(xk)),bbox:Wo.arrayOf(Wo.number),limit:Wo.number,language:Wo.arrayOf(Wo.string),reverseMode:Wo.oneOf("distance","score"),routing:Wo.boolean,worldview:Wo.string})(e),e.mode=e.mode||"mapbox.places";var t=wk(bk({country:e.countries},n2(e,["country","types","bbox","limit","language","reverseMode","routing","worldview"])));return this.client.createRequest({method:"GET",path:"/geocoding/v5/:mode/:query.json",params:n2(e,["mode","query"]),query:t})};var yG=gG(Wv);let vG="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict",kk=e=>crypto.getRandomValues(new Uint8Array(e)),Ak=(e,t,r)=>{let n=(2<<Math.log(e.length-1)/Math.LN2)-1,o=-~(1.6*n*t/e.length);return(u=t)=>{let c="";for(;;){let l=r(o),h=o;for(;h--;)if(c+=e[l[h]&n]||"",c.length===u)return c}}},_G=(e,t=21)=>Ak(e,t,kk),bG=(e=21)=>crypto.getRandomValues(new Uint8Array(e)).reduce((t,r)=>(r&=63,r<36?t+=r.toString(36):r<62?t+=(r-26).toString(36).toUpperCase():r>62?t+="-":t+="_",t),"");const wG=Object.freeze(Object.defineProperty({__proto__:null,customAlphabet:_G,customRandom:Ak,nanoid:bG,random:kk,urlAlphabet:vG},Symbol.toStringTag,{value:"Module"})),xG=SA(wG);var kG=xG.nanoid;function Ek(e){this.origin=e.origin||"https://api.mapbox.com",this.endpoint="events/v2",this.access_token=e.accessToken,this.version="0.2.0",this.sessionID=this.generateSessionID(),this.userAgent=this.getUserAgent(),this.options=e,this.send=this.send.bind(this),this.countries=e.countries?e.countries.split(","):null,this.types=e.types?e.types.split(","):null,this.bbox=e.bbox?e.bbox:null,this.language=e.language?e.language.split(","):null,this.limit=e.limit?+e.limit:null,this.locale=navigator.language||null,this.enableEventLogging=this.shouldEnableLogging(e),this.eventQueue=new Array,this.flushInterval=e.flushInterval||1e3,this.maxQueueSize=e.maxQueueSize||100,this.timer=this.flushInterval?setTimeout(this.flush.bind(this),this.flushInterval):null,this.lastSentInput="",this.lastSentIndex=0}Ek.prototype={select:function(e,t){var r=this.getSelectedIndex(e,t),n=this.getEventPayload("search.select",t);if(n.resultIndex=r,n.resultPlaceName=e.place_name,n.resultId=e.id,!(r===this.lastSentIndex&&n.queryString===this.lastSentInput||r==-1)&&(this.lastSentIndex=r,this.lastSentInput=n.queryString,!!n.queryString))return this.push(n)},start:function(e){var t=this.getEventPayload("search.start",e);if(t.queryString)return this.push(t)},keyevent:function(e,t){if(e.key&&!(e.metaKey||[9,27,37,39,13,38,40].indexOf(e.keyCode)!==-1)){var r=this.getEventPayload("search.keystroke",t);if(r.lastAction=e.key,!!r.queryString)return this.push(r)}},send:function(e,t){if(!this.enableEventLogging)return t?t():void 0;var r=this.getRequestOptions(e);this.request(r,function(n){if(n)return this.handleError(n,t);if(t)return t()}.bind(this))},getRequestOptions:function(e){Array.isArray(e)||(e=[e]);var t={method:"POST",host:this.origin,path:this.endpoint+"?access_token="+this.access_token,headers:{"Content-Type":"application/json"},body:JSON.stringify(e)};return t},getEventPayload:function(e,t){var r;t.options.proximity?typeof t.options.proximity=="object"?r=[t.options.proximity.longitude,t.options.proximity.latitude]:t.options.proximity==="ip"?r=[999,999]:r=t.options.proximity:r=null;var n=t._map?t._map.getZoom():void 0,o={event:e,created:+new Date,sessionIdentifier:this.sessionID,country:this.countries,userAgent:this.userAgent,language:this.language,bbox:this.bbox,types:this.types,endpoint:"mapbox.places",autocomplete:t.options.autocomplete,fuzzyMatch:t.options.fuzzyMatch,proximity:r,limit:t.options.limit,routing:t.options.routing,worldview:t.options.worldview,mapZoom:n,keyboardLocale:this.locale};return e==="search.select"?o.queryString=t.inputString:e!="search.select"&&t._inputEl?o.queryString=t._inputEl.value:o.queryString=t.inputString,o},request:function(e,t){var r=new XMLHttpRequest;r.onreadystatechange=function(){if(this.readyState==4)return this.status==204?t(null):t(this.statusText)},r.open(e.method,e.host+"/"+e.path,!0);for(var n in e.headers){var o=e.headers[n];r.setRequestHeader(n,o)}r.send(e.body)},handleError:function(e,t){if(t)return t(e)},generateSessionID:function(){return kG()},getUserAgent:function(){return"mapbox-gl-geocoder."+this.version+"."+navigator.userAgent},getSelectedIndex:function(e,t){if(t._typeahead){var r=t._typeahead.data,n=e.id,o=r.map(function(c){return c.id}),u=o.indexOf(n);return u}},shouldEnableLogging:function(e){return!(e.enableEventLogging===!1||e.origin&&e.origin!=="https://api.mapbox.com"||e.localGeocoder||e.filter)},flush:function(){this.eventQueue.length>0&&(this.send(this.eventQueue),this.eventQueue=new Array),this.timer&&clearTimeout(this.timer),this.flushInterval&&(this.timer=setTimeout(this.flush.bind(this),this.flushInterval))},push:function(e,t){this.eventQueue.push(e),(this.eventQueue.length>=this.maxQueueSize||t)&&this.flush()},remove:function(){this.flush()}};var AG=Ek,EG={de:"Suche",it:"Ricerca",en:"Search",nl:"Zoeken",fr:"Chercher",ca:"Cerca",he:"",ja:"",lv:"Meklt",pt:"Procurar",sr:"",zh:"",cs:"Vyhledvn",hu:"Keress",ka:"",nb:"Ske",sk:"Vyhadvanie",th:"",fi:"Hae",is:"Leita",ko:"",pl:"Szukaj",sl:"Iskanje",fa:"",ru:""},SG={placeholder:EG},Ty={},CG={get exports(){return Ty},set exports(e){Ty=e}};(function(e){(function(t,r,n){e.exports?e.exports=n():t[r]=n()})(Hc,"subtag",function(){var t="",r=/^([a-zA-Z]{2,3})(?:[_-]+([a-zA-Z]{3})(?=$|[_-]+))?(?:[_-]+([a-zA-Z]{4})(?=$|[_-]+))?(?:[_-]+([a-zA-Z]{2}|[0-9]{3})(?=$|[_-]+))?/;function n(h){return h.match(r)||[]}function o(h){return n(h).filter(function(v,w){return v&&w})}function u(h){return h=n(h),{language:h[1]||t,extlang:h[2]||t,script:h[3]||t,region:h[4]||t}}function c(h,v,w){Object.defineProperty(h,v,{value:w,enumerable:!0})}function l(h,v,w){function E(T){return n(T)[h]||t}c(E,"pattern",v),c(u,w,E)}return l(1,/^[a-zA-Z]{2,3}$/,"language"),l(2,/^[a-zA-Z]{3}$/,"extlang"),l(3,/^[a-zA-Z]{4}$/,"script"),l(4,/^[a-zA-Z]{2}$|^[0-9]{3}$/,"region"),c(u,"split",o),u})})(CG);function Sk(){}Sk.prototype={isSupport:function(){return Boolean(window.navigator.geolocation)},getCurrentPosition:function(){const e={enableHighAccuracy:!0};return new Promise(function(t,r){window.navigator.geolocation.getCurrentPosition(t,r,e)})}};var IG=Sk;function TG(e,t){const r=Ck(e),n=["address","street","place","country"];var o;if(typeof t=="function")return t(r);const u=n.indexOf(t);return u===-1?o=n:o=n.slice(u),o.reduce(function(c,l){return r[l]?(c!==""&&(c=c+", "),c+r[l]):c},"")}function Ck(e){const t=e.address||"",r=e.text||"",n=e.place_name||"",u={address:n.split(",")[0],houseNumber:t,street:r,placeName:n};return e.context.forEach(function(c){const l=c.id.split(".")[0];u[l]=c.text}),u}const LG=/^[ ]*(-?\d{1,3}(\.\d{0,256})?)[, ]+(-?\d{1,3}(\.\d{0,256})?)[ ]*$/;var PG={transformFeatureToGeolocationText:TG,getAddressInfo:Ck,REVERSE_GEOCODE_COORD_RGX:LG},MG=zV,DG=KV,Kf=wp,zG=e2.EventEmitter,Lw=a$,Eg=V$,Sg=yG,NG=AG,RG=SG,OG=Ty,FG=IG,Pw=PG;const xf={FORWARD:0,LOCAL:1,REVERSE:2};function BG(){var e=document.createElement("div");return e.className="mapboxgl-ctrl-geocoder--powered-by",e.innerHTML='<a href="https://www.mapbox.com/search-service" target="_blank">Powered by Mapbox</a>',e}function Ik(e){this._eventEmitter=new zG,this.options=Kf({},this.options,e),this.inputString="",this.fresh=!0,this.lastSelected=null,this.geolocation=new FG}Ik.prototype={options:{zoom:16,flyTo:!0,trackProximity:!0,minLength:2,reverseGeocode:!1,flipCoordinates:!1,limit:5,origin:"https://api.mapbox.com",enableEventLogging:!0,marker:!0,mapboxgl:null,collapsed:!1,clearAndBlurOnEsc:!1,clearOnBlur:!1,enableGeolocation:!1,addressAccuracy:"street",getItemValue:function(e){return e.place_name},render:function(e){var t=e.place_name.split(",");return'<div class="mapboxgl-ctrl-geocoder--suggestion"><div class="mapboxgl-ctrl-geocoder--suggestion-title">'+t[0]+'</div><div class="mapboxgl-ctrl-geocoder--suggestion-address">'+t.splice(1,t.length).join(",")+"</div></div>"}},addTo:function(e){function t(r,n){if(!document.body.contains(n))throw new Error("Element provided to #addTo() exists, but is not in the DOM");const o=r.onAdd();n.appendChild(o)}if(e._controlContainer)e.addControl(this);else if(e instanceof HTMLElement)t(this,e);else if(typeof e=="string"){const r=document.querySelectorAll(e);if(r.length===0)throw new Error("Element ",e,"not found.");if(r.length>1)throw new Error("Geocoder can only be added to a single html element");t(this,r[0])}else throw new Error("Error: addTo must be a mapbox-gl-js map, an html element, or a CSS selector query for a single html element")},onAdd:function(e){if(e&&typeof e!="string"&&(this._map=e),this.setLanguage(),this.options.localGeocoderOnly||(this.geocoderService=Sg(Eg({accessToken:this.options.accessToken,origin:this.options.origin}))),this.options.localGeocoderOnly&&!this.options.localGeocoder)throw new Error("A localGeocoder function must be specified to use localGeocoderOnly mode");this.eventManager=new NG(this.options),this._onChange=this._onChange.bind(this),this._onKeyDown=this._onKeyDown.bind(this),this._onPaste=this._onPaste.bind(this),this._onBlur=this._onBlur.bind(this),this._showButton=this._showButton.bind(this),this._hideButton=this._hideButton.bind(this),this._onQueryResult=this._onQueryResult.bind(this),this.clear=this.clear.bind(this),this._updateProximity=this._updateProximity.bind(this),this._collapse=this._collapse.bind(this),this._unCollapse=this._unCollapse.bind(this),this._clear=this._clear.bind(this),this._clearOnBlur=this._clearOnBlur.bind(this),this._geolocateUser=this._geolocateUser.bind(this);var t=this.container=document.createElement("div");t.className="mapboxgl-ctrl-geocoder mapboxgl-ctrl";var r=this.createIcon("search",'<path d="M7.4 2.5c-2.7 0-4.9 2.2-4.9 4.9s2.2 4.9 4.9 4.9c1 0 1.8-.2 2.5-.8l3.7 3.7c.2.2.4.3.8.3.7 0 1.1-.4 1.1-1.1 0-.3-.1-.5-.3-.8L11.4 10c.4-.8.8-1.6.8-2.5.1-2.8-2.1-5-4.8-5zm0 1.6c1.8 0 3.2 1.4 3.2 3.2s-1.4 3.2-3.2 3.2-3.3-1.3-3.3-3.1 1.4-3.3 3.3-3.3z"/>');this._inputEl=document.createElement("input"),this._inputEl.type="text",this._inputEl.className="mapboxgl-ctrl-geocoder--input",this.setPlaceholder(),this.options.collapsed&&(this._collapse(),this.container.addEventListener("mouseenter",this._unCollapse),this.container.addEventListener("mouseleave",this._collapse),this._inputEl.addEventListener("focus",this._unCollapse)),(this.options.collapsed||this.options.clearOnBlur)&&this._inputEl.addEventListener("blur",this._onBlur),this._inputEl.addEventListener("keydown",DG(this._onKeyDown,200)),this._inputEl.addEventListener("paste",this._onPaste),this._inputEl.addEventListener("change",this._onChange),this.container.addEventListener("mouseenter",this._showButton),this.container.addEventListener("mouseleave",this._hideButton),this._inputEl.addEventListener("keyup",function(v){this.eventManager.keyevent(v,this)}.bind(this));var n=document.createElement("div");n.classList.add("mapboxgl-ctrl-geocoder--pin-right"),this._clearEl=document.createElement("button"),this._clearEl.setAttribute("aria-label","Clear"),this._clearEl.addEventListener("click",this.clear),this._clearEl.className="mapboxgl-ctrl-geocoder--button";var o=this.createIcon("close",'<path d="M3.8 2.5c-.6 0-1.3.7-1.3 1.3 0 .3.2.7.5.8L7.2 9 3 13.2c-.3.3-.5.7-.5 1 0 .6.7 1.3 1.3 1.3.3 0 .7-.2 1-.5L9 10.8l4.2 4.2c.2.3.7.3 1 .3.6 0 1.3-.7 1.3-1.3 0-.3-.2-.7-.3-1l-4.4-4L15 4.6c.3-.2.5-.5.5-.8 0-.7-.7-1.3-1.3-1.3-.3 0-.7.2-1 .3L9 7.1 4.8 2.8c-.3-.1-.7-.3-1-.3z"/>');if(this._clearEl.appendChild(o),this._loadingEl=this.createIcon("loading",'<path fill="#333" d="M4.4 4.4l.8.8c2.1-2.1 5.5-2.1 7.6 0l.8-.8c-2.5-2.5-6.7-2.5-9.2 0z"/><path opacity=".1" d="M12.8 12.9c-2.1 2.1-5.5 2.1-7.6 0-2.1-2.1-2.1-5.5 0-7.7l-.8-.8c-2.5 2.5-2.5 6.7 0 9.2s6.6 2.5 9.2 0 2.5-6.6 0-9.2l-.8.8c2.2 2.1 2.2 5.6 0 7.7z"/>'),n.appendChild(this._clearEl),n.appendChild(this._loadingEl),t.appendChild(r),t.appendChild(this._inputEl),t.appendChild(n),this.options.enableGeolocation&&this.geolocation.isSupport()){this._geolocateEl=document.createElement("button"),this._geolocateEl.setAttribute("aria-label","Geolocate"),this._geolocateEl.addEventListener("click",this._geolocateUser),this._geolocateEl.className="mapboxgl-ctrl-geocoder--button";var u=this.createIcon("geolocate",'<path d="M12.999 3.677L2.042 8.269c-.962.403-.747 1.823.29 1.912l5.032.431.431 5.033c.089 1.037 1.509 1.252 1.912.29l4.592-10.957c.345-.822-.477-1.644-1.299-1.299z" fill="#4264fb"/>');this._geolocateEl.appendChild(u),n.appendChild(this._geolocateEl),this._showGeolocateButton()}var c=this._typeahead=new MG(this._inputEl,[],{filter:!1,minLength:this.options.minLength,limit:this.options.limit});this.setRenderFunction(this.options.render),c.getItemValue=this.options.getItemValue;var l=c.list.draw,h=this._footerNode=BG();return c.list.draw=function(){l.call(this),h.addEventListener("mousedown",function(){this.selectingListItem=!0}.bind(this)),h.addEventListener("mouseup",function(){this.selectingListItem=!1}.bind(this)),this.element.appendChild(h)},this.mapMarker=null,this._handleMarker=this._handleMarker.bind(this),this._map&&(this.options.trackProximity&&(this._updateProximity(),this._map.on("moveend",this._updateProximity)),this._mapboxgl=this.options.mapboxgl,!this._mapboxgl&&this.options.marker&&(console.error("No mapboxgl detected in options. Map markers are disabled. Please set options.mapboxgl."),this.options.marker=!1)),t},_geolocateUser:function(){this._hideGeolocateButton(),this._showLoadingIcon(),this.geolocation.getCurrentPosition().then(function(e){this._hideLoadingIcon();const t={geometry:{type:"Point",coordinates:[e.coords.longitude,e.coords.latitude]}};this._handleMarker(t),this._fly(t),this._typeahead.clear(),this._typeahead.selected=!0,this.lastSelected=JSON.stringify(t),this._showClearButton(),this.fresh=!1;const r={limit:1,language:[this.options.language],query:t.geometry.coordinates,types:["address"]};if(this.options.localGeocoderOnly){const n=t.geometry.coordinates[0]+","+t.geometry.coordinates[1];this._setInputValue(n),this._eventEmitter.emit("result",{result:t})}else this.geocoderService.reverseGeocode(r).send().then(function(n){const o=n.body.features[0];if(o){const u=Pw.transformFeatureToGeolocationText(o,this.options.addressAccuracy);this._setInputValue(u),o.user_coordinates=t.geometry.coordinates,this._eventEmitter.emit("result",{result:o})}else this._eventEmitter.emit("result",{result:{user_coordinates:t.geometry.coordinates}})}.bind(this))}.bind(this)).catch(function(e){e.code===1?this._renderUserDeniedGeolocationError():this._renderLocationError(),this._hideLoadingIcon(),this._showGeolocateButton(),this._hideAttribution()}.bind(this))},createIcon:function(e,t){var r=document.createElementNS("http://www.w3.org/2000/svg","svg");return r.setAttribute("class","mapboxgl-ctrl-geocoder--icon mapboxgl-ctrl-geocoder--icon-"+e),r.setAttribute("viewBox","0 0 18 18"),r.setAttribute("xml:space","preserve"),r.setAttribute("width",18),r.setAttribute("height",18),r.innerHTML=t,r},onRemove:function(){return this.container.parentNode.removeChild(this.container),this.options.trackProximity&&this._map&&this._map.off("moveend",this._updateProximity),this._removeMarker(),this._map=null,this},_setInputValue:function(e){this._inputEl.value=e,setTimeout(function(){this._inputEl.focus(),this._inputEl.scrollLeft=0,this._inputEl.setSelectionRange(0,0)}.bind(this),1)},_onPaste:function(e){var t=(e.clipboardData||window.clipboardData).getData("text");t.length>=this.options.minLength&&this._geocode(t)},_onKeyDown:function(e){var t=27,r=9;if(e.keyCode===t&&this.options.clearAndBlurOnEsc)return this._clear(e),this._inputEl.blur();var n=e.target&&e.target.shadowRoot?e.target.shadowRoot.activeElement:e.target,o=n?n.value:"";if(!o)return this.fresh=!0,e.keyCode!==r&&this.clear(e),this._showGeolocateButton(),this._hideClearButton();this._hideGeolocateButton(),!(e.metaKey||[r,t,37,39,13,38,40].indexOf(e.keyCode)!==-1)&&n.value.length>=this.options.minLength&&this._geocode(n.value)},_showButton:function(){this._typeahead.selected&&this._showClearButton()},_hideButton:function(){this._typeahead.selected&&this._hideClearButton()},_showClearButton:function(){this._clearEl.style.display="block"},_hideClearButton:function(){this._clearEl.style.display="none"},_showGeolocateButton:function(){this._geolocateEl&&this.geolocation.isSupport()&&(this._geolocateEl.style.display="block")},_hideGeolocateButton:function(){this._geolocateEl&&(this._geolocateEl.style.display="none")},_showLoadingIcon:function(){this._loadingEl.style.display="block"},_hideLoadingIcon:function(){this._loadingEl.style.display="none"},_showAttribution:function(){this._footerNode.style.display="block"},_hideAttribution:function(){this._footerNode.style.display="none"},_onBlur:function(e){this.options.clearOnBlur&&this._clearOnBlur(e),this.options.collapsed&&this._collapse()},_onChange:function(){var e=this._typeahead.selected;e&&JSON.stringify(e)!==this.lastSelected&&(this._hideClearButton(),this.options.flyTo&&this._fly(e),this.options.marker&&this._mapboxgl&&this._handleMarker(e),this._inputEl.focus(),this._inputEl.scrollLeft=0,this._inputEl.setSelectionRange(0,0),this.lastSelected=JSON.stringify(e),this._eventEmitter.emit("result",{result:e}),this.eventManager.select(e,this))},_fly:function(e){var t;if(e.properties&&Lw[e.properties.short_code])t=Kf({},this.options.flyTo),this._map&&this._map.fitBounds(Lw[e.properties.short_code].bbox,t);else if(e.bbox){var r=e.bbox;t=Kf({},this.options.flyTo),this._map&&this._map.fitBounds([[r[0],r[1]],[r[2],r[3]]],t)}else{var n={zoom:this.options.zoom};t=Kf({},n,this.options.flyTo),e.center?t.center=e.center:e.geometry&&e.geometry.type&&e.geometry.type==="Point"&&e.geometry.coordinates&&(t.center=e.geometry.coordinates),this._map&&this._map.flyTo(t)}},_requestType:function(e,t){var r;return e.localGeocoderOnly?r=xf.LOCAL:e.reverseGeocode&&Pw.REVERSE_GEOCODE_COORD_RGX.test(t)?r=xf.REVERSE:r=xf.FORWARD,r},_setupConfig:function(e,t){const r=["bbox","limit","proximity","countries","types","language","reverseMode","mode","autocomplete","fuzzyMatch","routing","worldview"],n=/[\s,]+/;var o=this,u=r.reduce(function(l,h){if(o.options[h]===void 0||o.options[h]===null)return l;["countries","types","language"].indexOf(h)>-1?l[h]=o.options[h].split(n):l[h]=o.options[h];const v=typeof o.options[h].longitude=="number"&&typeof o.options[h].latitude=="number";if(h==="proximity"&&v){const w=o.options[h].longitude,E=o.options[h].latitude;l[h]=[w,E]}return l},{});switch(e){case xf.REVERSE:{var c=t.split(n).map(function(l){return parseFloat(l,10)});o.options.flipCoordinates||c.reverse(),u.types&&u.types[0],u=Kf(u,{query:c,limit:1}),["proximity","autocomplete","fuzzyMatch","bbox"].forEach(function(l){l in u&&delete u[l]})}break;case xf.FORWARD:{const l=t.trim();/^(-?\d{1,3}(\.\d{0,256})?)[, ]+(-?\d{1,3}(\.\d{0,256})?)?$/.test(l)&&(t=t.replace(/,/g," ")),u=Kf(u,{query:t})}break}return u},_geocode:function(e){this.inputString=e,this._showLoadingIcon(),this._eventEmitter.emit("loading",{query:e});const t=this._requestType(this.options,e),r=this._setupConfig(t,e);var n;switch(t){case xf.LOCAL:n=Promise.resolve();break;case xf.FORWARD:n=this.geocoderService.forwardGeocode(r).send();break;case xf.REVERSE:n=this.geocoderService.reverseGeocode(r).send();break}var o=this.options.localGeocoder?this.options.localGeocoder(e)||[]:[],u=[],c=null;return n.catch(function(l){c=l}.bind(this)).then(function(l){this._hideLoadingIcon();var h={};return l?l.statusCode=="200"&&(h=l.body,h.request=l.request,h.headers=l.headers):h={type:"FeatureCollection",features:[]},h.config=r,this.fresh&&(this.eventManager.start(this),this.fresh=!1),h.features=h.features?o.concat(h.features):o,this.options.externalGeocoder?(u=this.options.externalGeocoder(e,h.features)||Promise.resolve([]),u.then(function(v){return h.features=h.features?v.concat(h.features):v,h},function(){return h})):h}.bind(this)).then(function(l){if(c)throw c;this.options.filter&&l.features.length&&(l.features=l.features.filter(this.options.filter)),l.features.length?(this._showClearButton(),this._hideGeolocateButton(),this._showAttribution(),this._eventEmitter.emit("results",l),this._typeahead.update(l.features)):(this._hideClearButton(),this._hideAttribution(),this._typeahead.selected=null,this._renderNoResults(),this._eventEmitter.emit("results",l))}.bind(this)).catch(function(l){this._hideLoadingIcon(),this._hideAttribution(),o.length&&this.options.localGeocoder||u.length&&this.options.externalGeocoder?(this._showClearButton(),this._hideGeolocateButton(),this._typeahead.update(o)):(this._hideClearButton(),this._typeahead.selected=null,this._renderError()),this._eventEmitter.emit("results",{features:o}),this._eventEmitter.emit("error",{error:l})}.bind(this)),n},_clear:function(e){e&&e.preventDefault(),this._inputEl.value="",this._typeahead.selected=null,this._typeahead.clear(),this._onChange(),this._hideClearButton(),this._showGeolocateButton(),this._removeMarker(),this.lastSelected=null,this._eventEmitter.emit("clear"),this.fresh=!0},clear:function(e){this._clear(e),this._inputEl.focus()},_clearOnBlur:function(e){var t=this;e.relatedTarget&&t._clear(e)},_onQueryResult:function(e){var t=e.body;if(t.features.length){var r=t.features[0];this._typeahead.selected=r,this._inputEl.value=r.place_name,this._onChange()}},_updateProximity:function(){if(!(!this._map||!this.options.trackProximity))if(this._map.getZoom()>9){var e=this._map.getCenter().wrap();this.setProximity({longitude:e.lng,latitude:e.lat},!1)}else this.setProximity(null,!1)},_collapse:function(){!this._inputEl.value&&this._inputEl!==document.activeElement&&this.container.classList.add("mapboxgl-ctrl-geocoder--collapsed")},_unCollapse:function(){this.container.classList.remove("mapboxgl-ctrl-geocoder--collapsed")},query:function(e){return this._geocode(e).then(this._onQueryResult),this},_renderError:function(){var e="<div class='mapbox-gl-geocoder--error'>There was an error reaching the server</div>";this._renderMessage(e)},_renderLocationError:function(){var e="<div class='mapbox-gl-geocoder--error'>A location error has occurred</div>";this._renderMessage(e)},_renderNoResults:function(){var e="<div class='mapbox-gl-geocoder--error mapbox-gl-geocoder--no-results'>No results found</div>";this._renderMessage(e)},_renderUserDeniedGeolocationError:function(){var e="<div class='mapbox-gl-geocoder--error'>Geolocation permission denied</div>";this._renderMessage(e)},_renderMessage:function(e){this._typeahead.update([]),this._typeahead.selected=null,this._typeahead.clear(),this._typeahead.renderError(e)},_getPlaceholderText:function(){if(this.options.placeholder)return this.options.placeholder;if(this.options.language){var e=this.options.language.split(",")[0],t=OG.language(e),r=RG.placeholder[t];if(r)return r}return"Search"},setInput:function(e){return this._inputEl.value=e,this._typeahead.selected=null,this._typeahead.clear(),e.length>=this.options.minLength&&this._geocode(e),this},setProximity:function(e,t=!0){return this.options.proximity=e,t&&(this.options.trackProximity=!1),this},getProximity:function(){return this.options.proximity},setRenderFunction:function(e){return e&&typeof e=="function"&&(this._typeahead.render=e),this},getRenderFunction:function(){return this._typeahead.render},setLanguage:function(e){var t=navigator.language||navigator.userLanguage||navigator.browserLanguage;return this.options.language=e||this.options.language||t,this},getLanguage:function(){return this.options.language},getZoom:function(){return this.options.zoom},setZoom:function(e){return this.options.zoom=e,this},getFlyTo:function(){return this.options.flyTo},setFlyTo:function(e){return this.options.flyTo=e,this},getPlaceholder:function(){return this.options.placeholder},setPlaceholder:function(e){return this.placeholder=e||this._getPlaceholderText(),this._inputEl.placeholder=this.placeholder,this._inputEl.setAttribute("aria-label",this.placeholder),this},getBbox:function(){return this.options.bbox},setBbox:function(e){return this.options.bbox=e,this},getCountries:function(){return this.options.countries},setCountries:function(e){return this.options.countries=e,this},getTypes:function(){return this.options.types},setTypes:function(e){return this.options.types=e,this},getMinLength:function(){return this.options.minLength},setMinLength:function(e){return this.options.minLength=e,this._typeahead&&(this._typeahead.options.minLength=e),this},getLimit:function(){return this.options.limit},setLimit:function(e){return this.options.limit=e,this._typeahead&&(this._typeahead.options.limit=e),this},getFilter:function(){return this.options.filter},setFilter:function(e){return this.options.filter=e,this},setOrigin:function(e){return this.options.origin=e,this.geocoderService=Sg(Eg({accessToken:this.options.accessToken,origin:this.options.origin})),this},getOrigin:function(){return this.options.origin},setAccessToken:function(e){return this.options.accessToken=e,this.geocoderService=Sg(Eg({accessToken:this.options.accessToken,origin:this.options.origin})),this},setAutocomplete:function(e){return this.options.autocomplete=e,this},getAutocomplete:function(){return this.options.autocomplete},setFuzzyMatch:function(e){return this.options.fuzzyMatch=e,this},getFuzzyMatch:function(){return this.options.fuzzyMatch},setRouting:function(e){return this.options.routing=e,this},getRouting:function(){return this.options.routing},setWorldview:function(e){return this.options.worldview=e,this},getWorldview:function(){return this.options.worldview},_handleMarker:function(e){if(this._map){this._removeMarker();var t={color:"#4668F2"},r=Kf({},t,this.options.marker);return this.mapMarker=new this._mapboxgl.Marker(r),e.center?this.mapMarker.setLngLat(e.center).addTo(this._map):e.geometry&&e.geometry.type&&e.geometry.type==="Point"&&e.geometry.coordinates&&this.mapMarker.setLngLat(e.geometry.coordinates).addTo(this._map),this}},_removeMarker:function(){this.mapMarker&&(this.mapMarker.remove(),this.mapMarker=null)},on:function(e,t){return this._eventEmitter.on(e,t),this},off:function(e,t){return this._eventEmitter.removeListener(e,t),this.eventManager.remove(),this}};var jG=Ik;function UG(e){let t,r,n;return r=new AV({}),{c(){t=yt("div"),Ut(r.$$.fragment),this.h()},l(o){t=vt(o,"DIV",{slot:!0});var u=Ct(t);Yt(r.$$.fragment,u),u.forEach(ge),this.h()},h(){ve(t,"slot","sidebar")},m(o,u){Lt(o,t,u),qt(r,t,null),n=!0},p:Qn,i(o){n||(Xe(r.$$.fragment,o),n=!0)},o(o){it(r.$$.fragment,o),n=!1},d(o){o&&ge(t),Vt(r)}}}function qG(e){return{c:Qn,l:Qn,m:Qn,p:Qn,i:Qn,o:Qn,d:Qn}}function VG(e){let t,r,n,o,u,c,l,h,v,w,E;function T(K){e[7](K)}function I(K){e[8](K)}let F={};e[5]!==void 0&&(F.map=e[5]),e[0].popup.target!==void 0&&(F.targetLayers=e[0].popup.target),t=new DA({props:F}),Ft.push(()=>Jt(t,"map",T)),Ft.push(()=>Jt(t,"targetLayers",I));function U(K){e[9](K)}function G(K){e[10](K)}let H={position:"top-right"};e[5]!==void 0&&(H.map=e[5]),e[4]!==void 0&&(H.customiseUrl=e[4]),u=new C9({props:H}),Ft.push(()=>Jt(u,"map",U)),Ft.push(()=>Jt(u,"customiseUrl",G));function X(K){e[11](K)}let ee={showPrintableArea:!0,showCrosshair:!0,position:"top-right"};return e[5]!==void 0&&(ee.map=e[5]),v=new b9({props:ee}),Ft.push(()=>Jt(v,"map",X)),{c(){Ut(t.$$.fragment),o=mr(),Ut(u.$$.fragment),h=mr(),Ut(v.$$.fragment)},l(K){Yt(t.$$.fragment,K),o=gr(K),Yt(u.$$.fragment,K),h=gr(K),Yt(v.$$.fragment,K)},m(K,se){qt(t,K,se),Lt(K,o,se),qt(u,K,se),Lt(K,h,se),qt(v,K,se),E=!0},p(K,se){const ce={};!r&&se&32&&(r=!0,ce.map=K[5],er(()=>r=!1)),!n&&se&1&&(n=!0,ce.targetLayers=K[0].popup.target,er(()=>n=!1)),t.$set(ce);const _e={};!c&&se&32&&(c=!0,_e.map=K[5],er(()=>c=!1)),!l&&se&16&&(l=!0,_e.customiseUrl=K[4],er(()=>l=!1)),u.$set(_e);const pe={};!w&&se&32&&(w=!0,pe.map=K[5],er(()=>w=!1)),v.$set(pe)},i(K){E||(Xe(t.$$.fragment,K),Xe(u.$$.fragment,K),Xe(v.$$.fragment,K),E=!0)},o(K){it(t.$$.fragment,K),it(u.$$.fragment,K),it(v.$$.fragment,K),E=!1},d(K){Vt(t,K),K&&ge(o),Vt(u,K),K&&ge(h),Vt(v,K)}}}function $G(e){return{c:Qn,l:Qn,m:Qn,p:Qn,i:Qn,o:Qn,d:Qn}}function GG(e){let t,r,n,o,u,c={ctx:e,current:null,token:null,hasCatch:!1,pending:$G,then:VG,catch:qG,blocks:[,,,]};return N_(o=e[3],c),{c(){t=yt("div"),r=yt("div"),n=mr(),c.block.c(),this.h()},l(l){t=vt(l,"DIV",{slot:!0});var h=Ct(t);r=vt(h,"DIV",{class:!0,id:!0}),Ct(r).forEach(ge),n=gr(h),c.block.l(h),h.forEach(ge),this.h()},h(){ve(r,"class","map svelte-19j8uwj"),ve(r,"id","map"),ve(t,"slot","map")},m(l,h){Lt(l,t,h),lt(t,r),e[6](r),lt(t,n),c.block.m(t,c.anchor=null),c.mount=()=>t,c.anchor=null,u=!0},p(l,h){e=l,c.ctx=e,h&8&&o!==(o=e[3])&&N_(o,c)||kA(c,e,h)},i(l){u||(Xe(c.block),u=!0)},o(l){for(let h=0;h<3;h+=1){const v=c.blocks[h];it(v)}u=!1},d(l){l&&ge(t),e[6](null),c.block.d(),c.token=null,c=null}}}function HG(e){let t,r,n,o;function u(h){e[12](h)}function c(h){e[13](h)}let l={position:"top-right",$$slots:{map:[GG],sidebar:[UG]},$$scope:{ctx:e}};return e[5]!==void 0&&(l.map=e[5]),e[2]!==void 0&&(l.isMenuShown=e[2]),t=new K9({props:l}),Ft.push(()=>Jt(t,"map",u)),Ft.push(()=>Jt(t,"isMenuShown",c)),{c(){Ut(t.$$.fragment)},l(h){Yt(t.$$.fragment,h)},m(h,v){qt(t,h,v),o=!0},p(h,[v]){const w={};v&262203&&(w.$$scope={dirty:v,ctx:h}),!r&&v&32&&(r=!0,w.map=h[5],er(()=>r=!1)),!n&&v&4&&(n=!0,w.isMenuShown=h[2],er(()=>n=!1)),t.$set(w)},i(h){o||(Xe(t.$$.fragment,h),o=!0)},o(h){it(t.$$.fragment,h),o=!1},d(h){Vt(t,h)}}}function WG(e,t,r){let n,o;ql(e,rd,K=>r(14,n=K)),ql(e,Sc,K=>r(5,o=K));let u,c=!1,l;const v=new Q8().getInitialStyle(oo.styles);rd.update(()=>v);const w=()=>{if(u)return new Promise(K=>{lh(Sc,o=new Ec.Map({container:u,style:v.uri,center:oo.center,zoom:oo.zoom,hash:!0,attributionControl:!1}),o),o.addControl(new Ec.AttributionControl({compact:!0}),"bottom-right"),o.addControl(new Ec.GeolocateControl({positionOptions:{enableHighAccuracy:!0},trackUserLocation:!0}),"bottom-right"),o.addControl(new Ec.NavigationControl({visualizePitch:!0,showZoom:!0,showCompass:!0}),"bottom-right"),oo.terrain&&(o.setMaxPitch(85),o.addControl(new Ec.TerrainControl(oo.terrain),"bottom-right")),oo.areaSwitcher&&o.addControl(new IA(oo.areaSwitcher.areas),"bottom-right"),o.addControl(new Ec.FullscreenControl({container:document.querySelector("body")}),"bottom-right"),o.addControl(new Ec.ScaleControl({maxWidth:80,unit:"metric"}),"bottom-left"),new EV(o).create(),oo.search&&fetch(oo.search.url).then(ce=>ce.json()).then(ce=>{function _e(pe){for(var Ge=[],We=0;We<ce.features.length;We++){var Ae=ce.features[We];oo.search.target.forEach(Ie=>{var Fe=Ae.properties[Ie];Fe&&Fe.toString().toLowerCase().search(pe.toString().toLowerCase())!==-1&&(Ae.place_name=oo.search.format(Ae.properties),Ae.center=Ae.geometry.coordinates,Ae.place_type=oo.search.place_type,Ge.push(Ae))})}return Ge}o.addControl(new jG({localGeocoder:_e,localGeocoderOnly:!0,zoom:oo.search.zoom,placeholder:oo.search.placeholder,limit:oo.search.limit,mapboxgl:zw,collapsed:!0}),"top-left")}),o.on("load",()=>{K()})})};let E=K=>{const se=new URL(K);return se.searchParams.set("style",n.title),se.toString()};Ff(()=>{r(3,l=w())});function T(K){Ft[K?"unshift":"push"](()=>{u=K,r(1,u)})}function I(K){o=K,Sc.set(o)}function F(K){e.$$.not_equal(oo.popup.target,K)&&(oo.popup.target=K,r(0,oo))}function U(K){o=K,Sc.set(o)}function G(K){E=K,r(4,E)}function H(K){o=K,Sc.set(o)}function X(K){o=K,Sc.set(o)}function ee(K){c=K,r(2,c)}return[oo,u,c,l,E,o,T,I,F,U,G,H,X,ee]}class ZG extends Dn{constructor(t){super(),zn(this,t,WG,HG,Ln,{})}}function XG(e){let t,r,n,o,u,c,l,h,v;return h=new ZG({}),{c(){t=yt("sveltekit:head"),r=yt("script"),o=mr(),u=yt("script"),c=ei(`window.dataLayer = window.dataLayer || [];
		function gtag() {
			dataLayer.push(arguments);
		}
		gtag('js', new Date());

		gtag('config', 'UA-170080825-7');`),l=mr(),Ut(h.$$.fragment),this.h()},l(w){t=vt(w,"SVELTEKIT:HEAD",{});var E=Ct(t);r=vt(E,"SCRIPT",{src:!0});var T=Ct(r);T.forEach(ge),o=gr(E),u=vt(E,"SCRIPT",{});var I=Ct(u);c=ti(I,`window.dataLayer = window.dataLayer || [];
		function gtag() {
			dataLayer.push(arguments);
		}
		gtag('js', new Date());

		gtag('config', 'UA-170080825-7');`),I.forEach(ge),E.forEach(ge),l=gr(w),Yt(h.$$.fragment,w),this.h()},h(){r.async=!0,Mw(r.src,n="https://www.googletagmanager.com/gtag/js?id=UA-170080825-7")||ve(r,"src",n)},m(w,E){Lt(w,t,E),lt(t,r),lt(t,o),lt(t,u),lt(u,c),Lt(w,l,E),qt(h,w,E),v=!0},p:Qn,i(w){v||(Xe(h.$$.fragment,w),v=!0)},o(w){it(h.$$.fragment,w),v=!1},d(w){w&&ge(t),w&&ge(l),Vt(h,w)}}}function YG(e){const t=oo.styles[0];return rd.update(()=>t),Ff(async()=>{window.global=window;const r=await(await td(()=>import("./index-95d721c5.js").then(n=>n.i),[],import.meta.url)).Buffer;window.Buffer=r}),[]}class sH extends Dn{constructor(t){super(),zn(this,t,YG,XG,Ln,{})}}export{sH as P,_a as _,Hc as c};
